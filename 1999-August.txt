From Richard.Beare@cmis.csiro.au  Mon Aug  2 08:50:52 1999
From: Richard.Beare@cmis.csiro.au (Richard Beare)
Date: Mon, 02 Aug 1999 17:50:52 +1000
Subject: Advice interfacing to an imaging library
Message-ID: <37A54DDC.2B830881@cmis.csiro.au>

Hi All,
I've done some work recently making some of our image analysis library
callable from R and Splus. Most of the C image functions use an abstract
data type, and R only sees a pointer to this. All memory allocation is
done by the library. This leads to some interesting problems. I'm
interested in your views about possible solutions.

1) assignment. something like a<-b, where a and b are image pointers
will only copy the pointer, not the image. We'd like to overload the <-
operator to call the library copy routine.

2) garbage collection. It is now easy to lose track of memory, and this
is likely to be significant because images are usually quite big. There
is a delete function in the library, so it is possible to dispose of
images manually, but an automated method would be nice. One option is to
keep a global list of all pointers returned from C function calls,
generate a list of all image class objects visible in R and compare the
two. Any pointers not on the image class list can be disposed. Does
anyone have any other ideas?

All advice welcome.


-- 
Richard Beare
Richard.Beare@cmis.csiro.au
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From naras@stat.stanford.edu  Mon Aug  2 18:27:21 1999
From: naras@stat.stanford.edu (Balasubramanian Narasimhan)
Date: Mon, 02 Aug 1999 10:27:21 -0700 (PDT)
Subject: Advice interfacing to an imaging library
In-Reply-To: Your message of "Mon, 02 Aug 1999 17:50:52 +1000"
 <37A54DDC.2B830881@cmis.csiro.au>
References: <37A54DDC.2B830881@cmis.csiro.au>
Message-ID: <19990802102721C.naras@stat.Stanford.EDU>

>>>>> "Richard" == Richard Beare <Richard.Beare@cmis.csiro.au> writes:

    Richard> 2) garbage collection. It is now easy to lose track of
    Richard> memory, and this is likely to be significant because
    Richard> images are usually quite big. There is a delete function
    Richard> in the library, so it is possible to dispose of images
    Richard> manually, but an automated method would be nice. One
    Richard> option is to keep a global list of all pointers returned
    Richard> from C function calls, generate a list of all image class
    Richard> objects visible in R and compare the two. Any pointers
    Richard> not on the image class list can be disposed. Does anyone
    Richard> have any other ideas?

I'd look to embed a JVM into R and use all the power of Java for image
processing and garbage collection. I've done it with xlispstat but not
with R.
________________________________________________________________
B. Narasimhan                            naras@stat.stanford.edu
                             http://www-stat.stanford.edu/~naras





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Mon Aug  2 18:43:13 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 2 Aug 1999 13:43:13 -0400
Subject: Advice interfacing to an imaging library
Message-ID: <199908021744.TAA02445@stat.math.ethz.ch>


> >>>>> "Richard" == Richard Beare <Richard.Beare@cmis.csiro.au> writes:
> 
>     Richard> 2) garbage collection. It is now easy to lose track of
>     Richard> memory, and this is likely to be significant because
>     Richard> images are usually quite big. There is a delete function
>     Richard> in the library, so it is possible to dispose of images
>     Richard> manually, but an automated method would be nice. One
>     Richard> option is to keep a global list of all pointers returned
>     Richard> from C function calls, generate a list of all image class
>     Richard> objects visible in R and compare the two. Any pointers
>     Richard> not on the image class list can be disposed. Does anyone
>     Richard> have any other ideas?
> 
> I'd look to embed a JVM into R and use all the power of Java for image
> processing and garbage collection. I've done it with xlispstat but not
> with R.
> ________________________________________________________________
> B. Narasimhan                            naras@stat.stanford.edu


My guess is that that would involve rewriting the existing library
written in C. Similarly, embedding the JVM still requires some
communication with the Java classes, etc. and conversion between the
R and Java data structures. This is where the meat of the interface lies.

However, on a more positive note, the embedding of the JVM into R and
S4/Splus5, John Chambers and I have been playing with, is getting very
close to being finished. I have been putting some of the final details
to it over the weekend. So the dynamic communication with Java
(i.e. dynamic method lookup and invocation) would not be that hard.

D.


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dajm@deeq.demon.co.uk  Tue Aug  3 23:22:50 1999
From: dajm@deeq.demon.co.uk (dajm@deeq.demon.co.uk)
Date: Wed, 4 Aug 1999 00:22:50 +0200 (MET DST)
Subject: EPS compliance of postscript device: initclip operator (PR#238)
Message-ID: <199908032222.AAA13347@pubhealth.ku.dk>


Dear R-bugs

The help for the R postscript() device states:

        The postscript produced by R is EPS (Encapsulated
        PostScript) compatible, and can be included into other
        documents...

However, postscript produced by R uses the "initclip" operator to
define the operator "cl":

	/cl  { initclip newpath 3 index 3 index moveto 1 index
		4 -1 roll lineto  exch 1 index lineto lineto
		closepath clip newpath } def

initclip is one of the postscript operators that the EPS file specification
(at http://partners.adobe.com/asn/developer/PDFS/5002.EPSF_Spec_v3.0.pdf -
see page 6) states should not be used in EPS files.

For true EPS compliance the R postscript device should not therefore use
initclip.

Under S-PLUS (v3.3 Solaris is the latest I have experience of, Brian Ripley
notes the same is NOT true under S-PLUS for windows) the onefile=T argument to
the postscript device causes the output file to be structured as an EPS file.
It would be desirable if R supported a similar option.  As under S-PLUS, it
could
probably be left to the user to ensure that only a single page of graphics
is output
to a file intended to be EPS compliant (or an error could be returned if
starting
a second page could be detected with ease).

Thanks

David Middleton
dajm@deeq.demon.co.uk

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 8
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@stat.auckland.ac.nz  Tue Aug  3 22:32:20 1999
From: lyndon@stat.auckland.ac.nz (Lyndon Drake)
Date: Wed, 4 Aug 1999 09:32:20 +1200
Subject: Memory profiling/benchmarking
In-Reply-To: <379DC75D.DFFAFBC6@bank-banque-canada.ca>; from Paul Gilbert on Tue, Jul 27, 1999 at 10:51:10AM -0400
References: <19990727171758.A2622@stat1.stat.auckland.ac.nz> <379DC75D.DFFAFBC6@bank-banque-canada.ca>
Message-ID: <19990804093220.A14758@stat1.stat.auckland.ac.nz>

On Tue, Jul 27, 1999 at 10:51:10AM -0400, Paul Gilbert wrote:
> Lyndon
> 
> There are several test scripts with my DSE library available at
> <http://www.bank-banque-canada.ca/pgilbert>. (Please don't make the mistake of
> trying to install the version on CRAN - it installs with  R 0.61 but there have
> been a lot of changes to R since then.)
> 

The latest DSE tar.gz file seems to be corrupt.  The file I am looking at is
ftp://www.bank-banque-canada.ca/pub/pgilbert/dse/dse.1999.07alphaR.tar.gz

I get an unexpected EOF from tar.

Thanks for the info, 
Lyndon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.csiro.au  Wed Aug  4 00:00:28 1999
From: Richard.Beare@cmis.csiro.au (Richard Beare)
Date: Wed, 04 Aug 1999 09:00:28 +1000
Subject: R internals
Message-ID: <37A7748C.AC3E268D@cmis.csiro.au>

Hi,
I'm interested in hooking into the garbage collection mechanisms in R to
enable R to manage the garbage collection in an imaging package that
does its own memory allocation. This would require R to call a
destructor when it disposes of objects of a certain class. Is this a
practical approach? I've been looking for documentation about the R
internals, but haven't found any yet - where should I be looking.

Thanks, any advice is welcome.
-- 
Richard Beare
Richard.Beare@cmis.csiro.au
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  5 12:28:05 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 5 Aug 1999 13:28:05 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908051128.NAA28801@pubhealth.ku.dk>

(1) ?cbind claims

     The generic functions `cbind' and `rbind' take a
     sequence of vector and/or matrix arguments and combine
     them as the columns or rows, respectively, of a matrix.

Note:

     The method dispatching is not done via `UseMethod(..)',
     but by C-internal dispatching.  Therefore, there's no
     need for, e.g., `rbind.default'.

but my cbind.ts does not get called, and try the following:

cbind.my <- function(...)
{
    stop("used cbind.my")
}
a <- b <- 1:3
cbind(a, b)
class(a) <- "my"
cbind(a, b)
     [,1] [,2]
[1,]    1    1
[2,]    2    2
[3,]    3    3

This is incorrect.

(2) S would give 
     a b 
[1,] 1 1
[2,] 2 2
[3,] 3 3
(and stop on the second cbind call).

and this discrepancy is hardly an improvement!

Could someone who can understands the c/rbind code please sort this out.
(It looks pretty arcane to me, and surely should not be special-casing data
frames.)

I used both of 

> R.version
           _                   
platform   sparc-sun-solaris2.6
arch       sparc               
os         solaris2.6          
system     sparc, solaris2.6   
status                         
status.rev 0                   
major      0                   
minor      64.2                
year       1999                
month      July                
day        3                   
language   R                   

> R.version
           _                           
platform   sparc-sun-solaris2.6        
arch       sparc                       
os         solaris2.6                  
system     sparc, solaris2.6           
status     Under development (unstable)
status.rev 0                           
major      0                           
minor      65.0                        
year       1999                        
month      August                      
day        05                          
language   R                           



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  5 14:57:27 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Aug 1999 15:57:27 +0200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Thu, 5 Aug 1999 13:28:05 +0200 (MET DST)"
References: <199908051128.NAA28801@pubhealth.ku.dk>
Message-ID: <x2lnbqgwjc.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> (1) ?cbind claims
> 
>      The generic functions `cbind' and `rbind' take a
>      sequence of vector and/or matrix arguments and combine
>      them as the columns or rows, respectively, of a matrix.
> 
> Note:
> 
>      The method dispatching is not done via `UseMethod(..)',
>      but by C-internal dispatching.  Therefore, there's no
>      need for, e.g., `rbind.default'.
> 
> but my cbind.ts does not get called, and try the following:
> 
> cbind.my <- function(...)
> {
>     stop("used cbind.my")
> }
> a <- b <- 1:3
> cbind(a, b)
> class(a) <- "my"
> cbind(a, b)
>      [,1] [,2]
> [1,]    1    1
> [2,]    2    2
> [3,]    3    3
> 
> This is incorrect.
> 
> (2) S would give 
>      a b 
> [1,] 1 1
> [2,] 2 2
> [3,] 3 3
> (and stop on the second cbind call).
> 
> and this discrepancy is hardly an improvement!
> 
> Could someone who can understands the c/rbind code please sort this out.
> (It looks pretty arcane to me, and surely should not be special-casing data
> frames.)

Hmm. 

(1) The docs are clearly wrong (or perhaps rather, wishful thinking)

(2) Cbind should be generic as in Splus

(3) For the labels, one needs essentially to implement deparse.level
    or face the horrors of
    eval(substitute(cbind(a,b,deparse.level=2),list(a=rnorm(10),b=rnorm(10))))

(4) The dataframe special casing seems to be an evasion. The sticky
    bit is that one needs to dispatch on *any* argument. For Splus (3.4)
    compatibility, one has to check each argument for its class
    method, and if all arguments agree - in the sense that all the
    arguments that have class methods must have the same one, dispatch
    to that method. If they disagree, print error message and try
    default method. 

    Whoever wrote the code seems to have decided that things would be
    easier if one assumed that the only method for cbind was
    cbind.data.frame...

    Note that by the above logic, if you make a cbind.ts, you can't
    cbind a time series to a data frame!
 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  5 17:17:14 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 5 Aug 1999 18:17:14 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#240)
Message-ID: <199908051617.SAA02592@pubhealth.ku.dk>

On 5 Aug 1999, Peter Dalgaard BSA wrote:

> (1) The docs are clearly wrong (or perhaps rather, wishful thinking)

Sorry, but always the docs are right and the implementation wrong.
That's an axiom of professional computer programming (so I am told
by several ex-professional computer programmers.)

> (2) Cbind should be generic as in Splus
> 
> (3) For the labels, one needs essentially to implement deparse.level
>     or face the horrors of
>     eval(substitute(cbind(a,b,deparse.level=2),list(a=rnorm(10),b=rnorm(10))))

Really? Or try a bit less hard?  Getting the common cases right is not
too hard -- ts.union etc seem normally to be about right, and they have
simple code.

> (4) The dataframe special casing seems to be an evasion. The sticky
>     bit is that one needs to dispatch on *any* argument. For Splus (3.4)
>     compatibility, one has to check each argument for its class
>     method, and if all arguments agree - in the sense that all the
>     arguments that have class methods must have the same one, dispatch
>     to that method. If they disagree, print error message and try
>     default method. 
> 
>     Whoever wrote the code seems to have decided that things would be
>     easier if one assumed that the only method for cbind was
>     cbind.data.frame...
> 
>     Note that by the above logic, if you make a cbind.ts, you can't
>     cbind a time series to a data frame!

That's OK, as I can coerce a data frame to a ts, but in general I want to
cbind ts objects with non-trivial time bases.

I don't think documenting what we have is a good way out here....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  5 17:19:08 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
Subject: cbind is not generic as claimed, omits labels where S has them
 (PR#239)
In-Reply-To: <x2lnbqgwjc.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9908051705140.2936-100000@auk.stats>

On 5 Aug 1999, Peter Dalgaard BSA wrote:

> (1) The docs are clearly wrong (or perhaps rather, wishful thinking)

Sorry, but always the docs are right and the implementation wrong.
That's an axiom of professional computer programming (so I am told
by several ex-professional computer programmers.)

> (2) Cbind should be generic as in Splus
> 
> (3) For the labels, one needs essentially to implement deparse.level
>     or face the horrors of
>     eval(substitute(cbind(a,b,deparse.level=2),list(a=rnorm(10),b=rnorm(10))))

Really? Or try a bit less hard?  Getting the common cases right is not
too hard -- ts.union etc seem normally to be about right, and they have
simple code.

> (4) The dataframe special casing seems to be an evasion. The sticky
>     bit is that one needs to dispatch on *any* argument. For Splus (3.4)
>     compatibility, one has to check each argument for its class
>     method, and if all arguments agree - in the sense that all the
>     arguments that have class methods must have the same one, dispatch
>     to that method. If they disagree, print error message and try
>     default method. 
> 
>     Whoever wrote the code seems to have decided that things would be
>     easier if one assumed that the only method for cbind was
>     cbind.data.frame...
> 
>     Note that by the above logic, if you make a cbind.ts, you can't
>     cbind a time series to a data frame!

That's OK, as I can coerce a data frame to a ts, but in general I want to
cbind ts objects with non-trivial time bases.

I don't think documenting what we have is a good way out here....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  5 18:04:16 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Aug 1999 19:04:16 +0200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#240)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Thu, 5 Aug 1999 18:17:14 +0200 (MET DST)"
References: <199908051617.SAA02592@pubhealth.ku.dk>
Message-ID: <x2emhignvz.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> On 5 Aug 1999, Peter Dalgaard BSA wrote:
> 
> > (1) The docs are clearly wrong (or perhaps rather, wishful thinking)
> 
> Sorry, but always the docs are right and the implementation wrong.
> That's an axiom of professional computer programming (so I am told
> by several ex-professional computer programmers.)

Hmm. I think there are counterexamples...

> 
> > (2) Cbind should be generic as in Splus
> > 
> > (3) For the labels, one needs essentially to implement deparse.level
> >     or face the horrors of
> >     eval(substitute(cbind(a,b,deparse.level=2),list(a=rnorm(10),b=rnorm(10))))
> 
> Really? Or try a bit less hard?  Getting the common cases right is not
> too hard -- ts.union etc seem normally to be about right, and they have
> simple code.

I don't think it's hard to implement deparse.level. The main
difficulty is figuring out who does the deparsing. The generic, the
default, or the specific method? 

> > (4) The dataframe special casing seems to be an evasion. The sticky
> >     bit is that one needs to dispatch on *any* argument. For Splus (3.4)
> >     compatibility, one has to check each argument for its class
> >     method, and if all arguments agree - in the sense that all the
> >     arguments that have class methods must have the same one, dispatch
> >     to that method. If they disagree, print error message and try
> >     default method. 
> > 
> >     Whoever wrote the code seems to have decided that things would be
> >     easier if one assumed that the only method for cbind was
> >     cbind.data.frame...
> > 
> >     Note that by the above logic, if you make a cbind.ts, you can't
> >     cbind a time series to a data frame!
> 
> That's OK, as I can coerce a data frame to a ts, but in general I want to
> cbind ts objects with non-trivial time bases.
> 
> I don't think documenting what we have is a good way out here....

Agreed. But if you want it in 0.65 don't expect me to do it. I'll be
away for the weekend and fly to ISI/Helsinki on Tuesday.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Aug  5 22:53:12 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 6 Aug 1999 09:53:12 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <199908051128.NAA28801@pubhealth.ku.dk>; from ripley@stats.ox.ac.uk on Thu, Aug 05, 1999 at 01:28:05PM +0200
References: <199908051128.NAA28801@pubhealth.ku.dk>
Message-ID: <19990806095312.A15303@stat1.stat.auckland.ac.nz>

On Thu, Aug 05, 1999 at 01:28:05PM +0200, ripley@stats.ox.ac.uk wrote:
> Could someone who can understands the c/rbind code please sort this out.
> (It looks pretty arcane to me, and surely should not be special-casing data
> frames.)

[ That would be a member of an empty subset of the developers. :-) ]

I can see what the problem is - we don't have the generic dispatch
mechanism in place.  I will add it.

I think that the special casing of data frames is needed because this
appears to be the (undocumented) S behaviour.  A data frame anywhere in
the argument list causes the result to be a data frame.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  5 23:08:05 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Aug 1999 00:08:05 +0200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: Ross Ihaka's message of "Fri, 6 Aug 1999 09:53:12 +1200"
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz>
Message-ID: <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>

Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

> I can see what the problem is - we don't have the generic dispatch
> mechanism in place.  I will add it.
> 
> I think that the special casing of data frames is needed because this
> appears to be the (undocumented) S behaviour.  A data frame anywhere in
> the argument list causes the result to be a data frame.

I played around with this earlier today. There's nothing special about
dataframes, S does the same with any classed object. I.e.

class(b)<-"my"
cbind.my<-function(...)match.call()

cbind(a,b)

will dispatch cbind.my

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Aug  5 23:29:14 1999
From: ihaka@stat.auckland.ac.nz (ihaka@stat.auckland.ac.nz)
Date: Fri, 6 Aug 1999 00:29:14 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908052229.AAA03662@pubhealth.ku.dk>

On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> 
> > I can see what the problem is - we don't have the generic dispatch
> > mechanism in place.  I will add it.
> > 
> > I think that the special casing of data frames is needed because this
> > appears to be the (undocumented) S behaviour.  A data frame anywhere in
> > the argument list causes the result to be a data frame.
> 
> I played around with this earlier today. There's nothing special about
> dataframes, S does the same with any classed object. I.e.
> 
> class(b)<-"my"
> cbind.my<-function(...)match.call()
> 
> cbind(a,b)
> 
> will dispatch cbind.my

Yetch!  What happens when there are conflicting classes I wonder.
[ Rhetorical question. ]

It sounds like this might make things easier.

	Ross

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Aug  5 23:30:31 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 6 Aug 1999 10:30:31 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Fri, Aug 06, 1999 at 12:08:05AM +0200
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz> <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>
Message-ID: <19990806103031.A17464@stat1.stat.auckland.ac.nz>

On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> 
> > I can see what the problem is - we don't have the generic dispatch
> > mechanism in place.  I will add it.
> > 
> > I think that the special casing of data frames is needed because this
> > appears to be the (undocumented) S behaviour.  A data frame anywhere in
> > the argument list causes the result to be a data frame.
> 
> I played around with this earlier today. There's nothing special about
> dataframes, S does the same with any classed object. I.e.
> 
> class(b)<-"my"
> cbind.my<-function(...)match.call()
> 
> cbind(a,b)
> 
> will dispatch cbind.my

Yetch!  What happens when there are conflicting classes I wonder.
[ Rhetorical question. ]

It sounds like this might make things easier.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Aug  6 03:55:34 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 6 Aug 1999 14:55:34 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Fri, Aug 06, 1999 at 12:08:05AM +0200
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz> <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>
Message-ID: <19990806145534.A3584@stat1.stat.auckland.ac.nz>

On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> 
> I played around with this earlier today. There's nothing special about
> dataframes, S does the same with any classed object. I.e.
> 
> class(b)<-"my"
> cbind.my<-function(...)match.call()
> 
> cbind(a,b)
> 
> will dispatch cbind.my

I played some more.  I think data frames are special somehow.

	S> x <- factor(1:10)
	S> y <- data.frame(1:10)
	> class(x)
	[1] "factor"
	S> class(y)
	[1] "data.frame"
	S> class(cbind(x,y))
	[1] "data.frame"
	S> class(cbind(y,x))
	[1] "data.frame"

They seem to overpower other class arguments too.

	Ross

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Aug  6 03:54:27 1999
From: ihaka@stat.auckland.ac.nz (ihaka@stat.auckland.ac.nz)
Date: Fri, 6 Aug 1999 04:54:27 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908060254.EAA04395@pubhealth.ku.dk>

On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> 
> I played around with this earlier today. There's nothing special about
> dataframes, S does the same with any classed object. I.e.
> 
> class(b)<-"my"
> cbind.my<-function(...)match.call()
> 
> cbind(a,b)
> 
> will dispatch cbind.my

I played some more.  I think data frames are special somehow.

	S> x <- factor(1:10)
	S> y <- data.frame(1:10)
	> class(x)
	[1] "factor"
	S> class(y)
	[1] "data.frame"
	S> class(cbind(x,y))
	[1] "data.frame"
	S> class(cbind(y,x))
	[1] "data.frame"

They seem to overpower other class arguments too.

	Ross


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 06:50:50 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 6 Aug 1999 07:50:50 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#241)
Message-ID: <199908060550.HAA04696@pubhealth.ku.dk>

On Fri, 6 Aug 1999 ihaka@stat.auckland.ac.nz wrote:

> On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> > Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> > 
> > I played around with this earlier today. There's nothing special about
> > dataframes, S does the same with any classed object. I.e.
> > 
> > class(b)<-"my"
> > cbind.my<-function(...)match.call()
> > 
> > cbind(a,b)
> > 
> > will dispatch cbind.my
> 
> I played some more.  I think data frames are special somehow.
> 
> 	S> x <- factor(1:10)
> 	S> y <- data.frame(1:10)
> 	> class(x)
> 	[1] "factor"
> 	S> class(y)
> 	[1] "data.frame"
> 	S> class(cbind(x,y))
> 	[1] "data.frame"
> 	S> class(cbind(y,x))
> 	[1] "data.frame"
> 
> They seem to overpower other class arguments too.

Once again, there is a difference between what S documents it does and what
it actually does. The on-line help says:

       Returns a matrix that  is  pieced  together  from  several
       vectors and/or matrices. The functions cbind and rbind are
       generic (relative to their first argument). In particular,
       there  are  cbind  and  rbind  methods  for classes in the
       Matrix library.

I would settle for that. I think what in part is going is that the 
one method, in particular the default method, may use another method.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug  6 08:42:23 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Aug 1999 09:42:23 +0200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: Ross Ihaka's message of "Fri, 6 Aug 1999 14:55:34 +1200"
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz> <x2lnbp7uey.fsf@blueberry.kubism.ku.dk> <19990806145534.A3584@stat1.stat.auckland.ac.nz>
Message-ID: <x2u2qd8ie8.fsf@blueberry.kubism.ku.dk>

Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

> On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> > Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> > 
> > I played around with this earlier today. There's nothing special about
> > dataframes, S does the same with any classed object. I.e.
> > 
> > class(b)<-"my"
> > cbind.my<-function(...)match.call()
> > 
> > cbind(a,b)
> > 
> > will dispatch cbind.my
> 
> I played some more.  I think data frames are special somehow.
> 
> 	S> x <- factor(1:10)
> 	S> y <- data.frame(1:10)
> 	> class(x)
> 	[1] "factor"
> 	S> class(y)
> 	[1] "data.frame"
> 	S> class(cbind(x,y))
> 	[1] "data.frame"
> 	S> class(cbind(y,x))
> 	[1] "data.frame"
> 
> They seem to overpower other class arguments too.

This is because there's no cbind.factor:

S> cbind.factor<-function(...) match.call()
S> cbind(x,y)
      x           y 
X1.10 1 numeric, 10
attr(, "names"):
[1] ""      "X1.10"
Warning messages:
1: Incompatible methods ("cbind.factor", "cbind.data.frame") for "cbind"
2: Number of rows of result is not a multiple of vector length (arg 1) in: cbin
	d(x, y)

(and cbind.data.frame just calls data.frame(...) so it's little wonder
that the result is always a data frame)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug  6 08:34:04 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 6 Aug 1999 09:34:04 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908060734.JAA06002@pubhealth.ku.dk>

Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

> On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> > Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> > 
> > I played around with this earlier today. There's nothing special about
> > dataframes, S does the same with any classed object. I.e.
> > 
> > class(b)<-"my"
> > cbind.my<-function(...)match.call()
> > 
> > cbind(a,b)
> > 
> > will dispatch cbind.my
> 
> I played some more.  I think data frames are special somehow.
> 
> 	S> x <- factor(1:10)
> 	S> y <- data.frame(1:10)
> 	> class(x)
> 	[1] "factor"
> 	S> class(y)
> 	[1] "data.frame"
> 	S> class(cbind(x,y))
> 	[1] "data.frame"
> 	S> class(cbind(y,x))
> 	[1] "data.frame"
> 
> They seem to overpower other class arguments too.

This is because there's no cbind.factor:

S> cbind.factor<-function(...) match.call()
S> cbind(x,y)
      x           y 
X1.10 1 numeric, 10
attr(, "names"):
[1] ""      "X1.10"
Warning messages:
1: Incompatible methods ("cbind.factor", "cbind.data.frame") for "cbind"
2: Number of rows of result is not a multiple of vector length (arg 1) in: cbin
	d(x, y)

(and cbind.data.frame just calls data.frame(...) so it's little wonder
that the result is always a data frame)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Aug  6 19:35:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 06 Aug 1999 14:35:14 -0400
Subject: ts and defaults
Message-ID: <37AB2AE2.1DA7D784@bank-banque-canada.ca>

Brian

The example below may be helpful to further illustrate the concern I have with
the effects of your ts library on defaults. According to the "Blue Book", in
Splus, in R up to 0.64.2, and in today's snapshot of 0.65 without the "ts"
library attached

> end(ts(rnorm(10), start=c(1991,1), frequency=1))

gives
[1] 2000    1

However, with the "ts" library attached the result is

[1] 2000

This change in the default behavior will break a lot of user code, effectively
meaning that many people who do a lot of time series work will not use the
library. Hopeful that is not what you intend. Even casual users, I believe, will
be confused by the change in behavior depending on whether  ts is attached or
not.

Possibly a much better way to define a new improved class is to give it a new
name, rather than a name that introduces conflicts with the old defaults.

I hope that you will have time to consider changing this before 0.65 is
released. I will be away for the next two week, but will be happy to continue
testing when I return.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 20:55:21 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 6 Aug 1999 20:55:21 +0100 (BST)
Subject: ts and defaults
In-Reply-To: <37AB2AE2.1DA7D784@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.9908062019540.20236-100000@auk.stats>

On Fri, 6 Aug 1999, Paul Gilbert wrote:

> Brian
> 
> The example below may be helpful to further illustrate the concern I have with
> the effects of your ts library on defaults. According to the "Blue Book", in
> Splus, in R up to 0.64.2, and in today's snapshot of 0.65 without the "ts"
> library attached
> 
> > end(ts(rnorm(10), start=c(1991,1), frequency=1))
> 
> gives
> [1] 2000    1

How is anyone supposed to know that means 2000 not 2001 without reading
the help page?

> However, with the "ts" library attached the result is
> 
> [1] 2000

Isn't that much more readable?

> This change in the default behavior will break a lot of user code [ ... ]

Statistical evidence, please.

Note that all the S (and R) code is written to accept start=1991, so this
user code must depart from that convention. Maybe it would be a good
opportunity to re-write that code to conform to the standard conventions?
As in

start:    starting date for the series, e.g., in years, February,
       1970  would  be  1970+(1/12)  or  1970.083.  If start is a
       vector with  at  least  two  data  values,  the  first  is
       interpreted  as  the  time  unit,  e.g., the year, and the
       second as  the  number  of  positions  into  the  sampling
       period;  e.g., February, 1970 could be c(1970,2).

Note the two possibilities, and that the one you advocate is the
alternate. I at least find c(1970, 2) = 1970+(1/12) a _very_ confusing
notation, fortunately one that can be avoided.

The problem here is that ts in R is fundamentally incompatible with S, as R
has a ts class and S does not. I believe start.default should not be 
implemented in terms of class ts (and any user can change the
behaviour of a class), and I trust the `lots of user code' does not do
things like that. The plan is to separate the the default methods from the
ts class methods.  We do not consider that S compatibility applies 
to class ts, which S does not have.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Aug  6 21:06:20 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 06 Aug 1999 16:06:20 -0400
Subject: ts and defaults
References: <Pine.GSO.4.05.9908062019540.20236-100000@auk.stats>
Message-ID: <37AB403C.86D179AB@bank-banque-canada.ca>

>The plan is to separate the the default methods from the
>ts class methods.  We do not consider that S compatibility applies
>to class ts, which S does not have.

The other part of the problem is that the function name ts() has already been
appropriated as the constructor for the default, so you can't use ts() as the
constructor for your "ts" class. Ditto for is.ts, as.ts, etc.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 21:10:58 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 6 Aug 1999 21:10:58 +0100 (BST)
Subject: ts and defaults
In-Reply-To: <37AB403C.86D179AB@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.9908062108170.20236-100000@auk.stats>

On Fri, 6 Aug 1999, Paul Gilbert wrote:

> >The plan is to separate the the default methods from the
> >ts class methods.  We do not consider that S compatibility applies
> >to class ts, which S does not have.
> 
> The other part of the problem is that the function name ts() has already been
> appropriated as the constructor for the default, so you can't use ts() as the
> constructor for your "ts" class. Ditto for is.ts, as.ts, etc.

Or to put it another way, as I said before, ts() in R is incompatible
with ts() in S, and the name has already been taken for the constructor
of the R ts class. (In case you still do not get it, there is already
an R ts class.) Do you want us to change ts in R not to be the constructor
of the ts class, and thereby `break a lot of user code' in R?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Aug  6 22:12:42 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 7 Aug 1999 09:12:42 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <x2u2qd8ie8.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Fri, Aug 06, 1999 at 09:42:23AM +0200
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz> <x2lnbp7uey.fsf@blueberry.kubism.ku.dk> <19990806145534.A3584@stat1.stat.auckland.ac.nz> <x2u2qd8ie8.fsf@blueberry.kubism.ku.dk>
Message-ID: <19990807091242.A15242@stat1.stat.auckland.ac.nz>

Ok, I have made some changes to cbind/rbind which will support dispatch
to other methods.  As part of this I have changed things so that the
values passed on are packaged up as (evaluated) promises so that any
closure they invoke will be able to use substitute to get text values
to use as labels.  What I need is a clear idea of the rules for doing
the dispatch.  The picture I have at present is:

	dispatch.class <- "default"
	for (arg in arg.list) {
		if (arg is an object) {
			arg.class <- class(arg)[1]
			if (there is a method for arg.class) {
				if (dispatch.class == "default")
					class <- arg.class
				else if (args.class != dispatch.class)
					drop through to dispatch
			}
		}
	}
    dispatch:
	if (dispatch.class != "default")
		dispatch to appropriate closure
	else
		carry out default actions

This also looks like it sufficiently generic that it could be packaged
as a useful function along the lines of "DespatchOrEval" -- perhaps
MultiDespatchOrEval.

Does this sound right?

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Aug  6 22:15:37 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 06 Aug 1999 17:15:37 -0400
Subject: ts and defaults
References: <Pine.GSO.4.05.9908062108170.20236-100000@auk.stats>
Message-ID: <37AB5078.E7151CD1@bank-banque-canada.ca>

>ts() in R is incompatible
>with ts() in S, and the name has already been taken for the constructor
>of the R ts class. (In case you still do not get it, there is already
>an R ts class.)

I have a very large set of test and ts() in R is suprisingly compatible with S,
even though it is implemented in a very different way. A lot of S time series
code runs directly in R with no changes. This does not affect my own code very
much, since I define my own classes too. In fact, most everyone who works much
with time series probably defines their own classes. You are not the first to
notice how bad the defaults are. But it does affect a lot of code which users
have, and for which they might want to use R, or even contribute.

>Do you want us to change ts in R not to be the constructor
>of the ts class, and thereby `break a lot of user code' in R?

No, I want you to change the name of your new improved class of time series and
leave "ts" alone or make it even more compatible with S.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 22:24:13 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 6 Aug 1999 22:24:13 +0100 (GMT Daylight Time)
Subject: ts and defaults
In-Reply-To: <37AB5078.E7151CD1@bank-banque-canada.ca>
Message-ID: <Pine.WNT.4.05.9908062220240.18403-100000@tern.stats>

On Fri, 6 Aug 1999, Paul Gilbert wrote:

[quoting me without attribution]

> >Do you want us to change ts in R not to be the constructor
> >of the ts class, and thereby `break a lot of user code' in R?
> 
> No, I want you to change the name of your new improved class of time series and
> leave "ts" alone or make it even more compatible with S.
> 
I asked a very specific question and got an ambiguous answer. `make it
even more compatible with S' means `yes', not `no', as in S ts() is not the
constructor of a ts class. Which do you want?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 22:49:07 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 6 Aug 1999 22:49:07 +0100 (GMT Daylight Time)
Subject: cbind is not generic as claimed, omits labels where S has them
 (PR#239)
In-Reply-To: <19990807091242.A15242@stat1.stat.auckland.ac.nz>
Message-ID: <Pine.WNT.4.05.9908062235120.18403-100000@tern.stats>

On Sat, 7 Aug 1999, Ross Ihaka wrote:

> Ok, I have made some changes to cbind/rbind which will support dispatch
> to other methods.  As part of this I have changed things so that the
> values passed on are packaged up as (evaluated) promises so that any
> closure they invoke will be able to use substitute to get text values

Sorry, are you using `closure' to mean `method' in S (and I thought R)
terminology? (I thought a function closure involved the environment....)

> to use as labels.  What I need is a clear idea of the rules for doing
> the dispatch.  The picture I have at present is:
> 
> 	dispatch.class <- "default"
> 	for (arg in arg.list) {
> 		if (arg is an object) {
> 			arg.class <- class(arg)[1]
> 			if (there is a method for arg.class) {
> 				if (dispatch.class == "default")
> 					class <- arg.class
> 				else if (args.class != dispatch.class)
> 					drop through to dispatch
> 			}
> 		}
> 	}
>     dispatch:
> 	if (dispatch.class != "default")
> 		dispatch to appropriate closure
> 	else
> 		carry out default actions
> 
> This also looks like it sufficiently generic that it could be packaged
> as a useful function along the lines of "DespatchOrEval" -- perhaps
> MultiDespatchOrEval.
> 
> Does this sound right?

`right', huh?  That's hard. I had been thinking about multiple classes,
which bedevil all this (and JMC got rid of for that reason, I guess). I
think your rules says choose the class of the leading argument whose first
class has a method, and I think that is wrong. Suppose my two args both
have class c("mts", "ts") and there is no cbind.mts. Then you will dispatch
the default, even though the normal rules for dispatching on the first arg
would dispatch cbind.ts.

I suspect we need to try more than the first method, but have no clear
picture of what is right. I would dispatch on the first arg that had a 
usable method.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@kcbbs.gen.nz  Sat Aug  7 01:03:42 1999
From: lyndon@kcbbs.gen.nz (lyndon@kcbbs.gen.nz)
Date: Sat, 7 Aug 1999 02:03:42 +0200 (MET DST)
Subject: INSTALL script does not handle spaces in pathnames correctly (PR#242)
Message-ID: <199908070003.CAA02356@pubhealth.ku.dk>

Full_Name: Lyndon Drake
Version: Version 0.65.0 Under development (unstable) (August 07, 1999)
OS: Linux 2.2.2
Submission from: (NULL) (202.14.102.52)


I was attempting to install the DSE package from a directory whose
pathname includes spaces.  The INSTALL script interprets spaces in
the pathname as a separator.  For example:

[lyndon@beat Rdse]$ pwd
/home/lyndon/doc/uni/415.704 Computer Systems Peformance Analysis/R/Rdse
[lyndon@beat Rdse]$ ~/src/cvs-stuff/R/bin/R INSTALL --no-docs -l ../lib/
syskern
/home/lyndon/src/cvs-stuff/R/bin/INSTALL: /home/lyndon/doc/uni/415.704: No such
file or directory
Installing package `415.704' ...
  No man pages found in package `415.704'
 DONE (415.704)

Installing package `Computer' ...
  No man pages found in package `Computer'
 DONE (Computer)

Installing package `Systems' ...
  No man pages found in package `Systems'
 DONE (Systems)

Installing package `Peformance' ...
  No man pages found in package `Peformance'
 DONE (Peformance)

/home/lyndon/src/cvs-stuff/R/bin/INSTALL: Analysis/R/Rdse/syskern: No such file
or directory
Installing package `syskern' ...
  No man pages found in package `syskern'
 DONE (syskern)

DONE (INSTALL)

One possibility would be to change the separator used in the install
script from a space to a colon.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ATurpin@discoveriesinsight.org  Sat Aug  7 01:09:31 1999
From: ATurpin@discoveriesinsight.org (ATurpin@discoveriesinsight.org)
Date: Sat, 7 Aug 1999 02:09:31 +0200 (MET DST)
Subject: bug ? wilcox() (PR#243)
Message-ID: <199908070009.CAA02388@pubhealth.ku.dk>

> Hi,
> 
> I am getting a strange result from the wilcox function in the code below.
> This code has worked for many other wilcox's, but not this particular one.
> The p-value printed should be much higher (consistent with the p-value
> for the t-test).
> 
> I am using R Version 0.64.2 under Debian Linux.
> 
> I hope it is not me being stupid...
> 
> Regards,
> 
> Andrew Turpin
> aturpin@discoveriesinsight.org
> 
> --------------------------------------------------------------------------
> ----
> 
> library(ctest)
> x <- vector(length=50)
> y <- vector(length=50)
> x <- c(0.624200,0.252100
> ,0.404500
> ,0.465000
> ,0.033500
> ,0.565500
> ,0.316000
> ,0.469800
> ,0.590200
> ,0.420200
> ,0.609800
> ,0.577800
> ,0.854200
> ,0.284800
> ,0.243600
> ,0.596100
> ,0.213200
> ,0.369800
> ,0.281400
> ,0.754500
> ,0.135200
> ,0.041900
> ,0.640900
> ,0.547000
> ,0.214300
> ,0.212000
> ,0.325200
> ,0.400700
> ,0.115400
> ,0.248800
> ,0.211500
> ,0.540200
> ,0.282100
> ,0.131700
> ,0.757500
> ,0.136500
> ,0.391500
> ,0.293500
> ,0.275400
> ,0.048700
> ,0.308400
> ,0.140900
> ,0.624100
> ,0.042600
> ,0.158100
> ,0.631300
> ,0.279200
> ,0.623100
> ,0.042600
> ,0.477200
> )
> y <- c(0.606500,0.252100
> ,0.404500
> ,0.465000
> ,0.033500
> ,0.565500
> ,0.316000
> ,0.469800
> ,0.591700
> ,0.420200
> ,0.608700
> ,0.577800
> ,0.854200
> ,0.284800
> ,0.244700
> ,0.596100
> ,0.213200
> ,0.369800
> ,0.281400
> ,0.754500
> ,0.135200
> ,0.041900
> ,0.640900
> ,0.683500
> ,0.214300
> ,0.192100
> ,0.304800
> ,0.400700
> ,0.115400
> ,0.248800
> ,0.211500
> ,0.540200
> ,0.282100
> ,0.131700
> ,0.757500
> ,0.137200
> ,0.391500
> ,0.293500
> ,0.275400
> ,0.048700
> ,0.308400
> ,0.140900
> ,0.624100
> ,0.042600
> ,0.158100
> ,0.631300
> ,0.282900
> ,0.620100
> ,0.030800
> ,0.471700
> )
>         #
>         # some functions for formatting output
>         #
>      f    <- function (x) { formatC(x,digits=4,width=10,format="f") }
>      mydiff<-function (x,y) {
> formatC((y-x)/y*100,digits=2,width=10,format="f")}
>      line <- function (d,x,y) { cat(d,f(x),f(y),mydiff(x,y),"\n")}
> 
>         #
>         # print basic stats
>         #
>      line("n           ",length(x),length(y))
>      line("Mean        ",mean(x),mean(y))
>      line("Median      ",median(x),median(y))
>      line("Var         ",var(x),var(y))
> 
>      cat("\n")
> 
>         #
>         # Perform basic tests
>         #
>      w  <- wilcox.test(x,y,paired=TRUE)
>      t  <- t.test(x,y,paired=TRUE)
> 
>      cat("t-test   p =", f(t$p.value),
> ifelse(t$p.value<0.05,"(Significant)","(Not significant)"), "\n")
>      cat("Wilcoxon p =",
> f(w$p.value),ifelse(w$p.value<0.05,"(Significant)","(Not significant)"),
> "\n")
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Sat Aug  7 01:37:59 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 7 Aug 1999 12:37:59 +1200 (NZST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908070037.MAA18569@stat1.stat.auckland.ac.nz>

	From ripley@stats.ox.ac.uk  Sat Aug  7 09:49:12 1999
	Date: Fri, 6 Aug 1999 22:49:07 +0100 (GMT Daylight Time)
	From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
	To: Ross Ihaka <ihaka@stat.auckland.ac.nz>
	cc: r-devel@stat.math.ethz.ch
	Subject: Re: cbind is not generic as claimed, omits labels where S has them
	 (PR#239)
	MIME-Version: 1.0

	On Sat, 7 Aug 1999, Ross Ihaka wrote:

	> Ok, I have made some changes to cbind/rbind which will support
	> dispatch to other methods.  As part of this I have changed
	> things so that the values passed on are packaged up as
	> (evaluated) promises so that any closure they invoke will
	> be able to use substitute to get text values

	Sorry, are you using `closure' to mean `method' in S (and I thought R)
	terminology? (I thought a function closure involved the environment....)

Technicality : I mean interpreted function.  I'm disallowing dispatch
to functions without at least an interpreted wrapper.  I don't think
this is a real restriction.

	> to use as labels.  What I need is a clear idea of the rules for doing
	> the dispatch.  The picture I have at present is:
	> 
	> 	dispatch.class <- "default"
	> 	for (arg in arg.list) {
	> 		if (arg is an object) {
	> 			arg.class <- class(arg)[1]
	> 			if (there is a method for arg.class) {
	> 				if (dispatch.class == "default")
	> 					class <- arg.class
	> 				else if (args.class != dispatch.class)
	> 					drop through to dispatch
	> 			}
	> 		}
	> 	}
	>     dispatch:
	> 	if (dispatch.class != "default")
	> 		dispatch to appropriate closure
	> 	else
	> 		carry out default actions
	> 
	> This also looks like it sufficiently generic that it could be packaged
	> as a useful function along the lines of "DespatchOrEval" -- perhaps
	> MultiDespatchOrEval.
	> 
	> Does this sound right?

	`right', huh?  That's hard. I had been thinking about multiple
	classes, which bedevil all this (and JMC got rid of for that
	reason, I guess). I think your rules says choose the class of
	the leading argument whose first class has a method, and I
	think that is wrong. Suppose my two args both have class
	c("mts", "ts") and there is no cbind.mts. Then you will
	dispatch the default, even though the normal rules for
	dispatching on the first arg would dispatch cbind.ts.

	I suspect we need to try more than the first method, but have
	no clear picture of what is right. I would dispatch on the
	first arg that had a usable method.

I think I'm shooting for S compatibility here (I'm firmly in both the
compatible and non-compatible camps -- trying to please everyone I
guess).  I believe Peter described what S3 appears to do, and the
above  is my interpretation of what he said.

I think trying to do inheritance by traversing the class vectors
might be asking for trouble.  It would certainly be significantly
more complex and probably slower.

Taking the first arg with a usable method means that cbind(a, b)
could be a significantly different class of object from cbind(b, a).
This is sometimes a nasty surprise for people.  The S3 philosophy
seems to be that in cases of conflict you ignore classes entirely.
That does give a symmetric result.

	Ross


[ Duncan and I talked about implementing a new kind of object system
  -- different from either S3 or S4.  It would look a little more like
  Java.  Definitely a Version 2 project. ]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Sat Aug  7 03:52:37 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 7 Aug 1999 14:52:37 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <199908070037.MAA18569@stat1.stat.auckland.ac.nz>; from Ross Ihaka on Sat, Aug 07, 1999 at 12:37:59PM +1200
References: <199908070037.MAA18569@stat1.stat.auckland.ac.nz>
Message-ID: <19990807145237.A19953@stat1.stat.auckland.ac.nz>

I've modified rbind/cbind so that they dispatch as follows:

1) For each argument we get the list of possible class memberships from
   the class attribute.

2) We inspect each class in turn to see if there is an an applicable
   method.

3) If we find an applicable method we make sure that it is identical to
   any method determined from prior arguments.  If it is identical, we
   proceed, otherwise we immediately drop through to the default code.

This is commited in the development version.  Are there any other
functions which should behave this way.

(Sorry for any obtuseness.  Sleep is in short supply at present.)

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Aug  9 09:02:11 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 09 Aug 1999 10:02:11 +0200 (CEST)
Subject: ts and defaults
In-Reply-To: <Pine.GSO.4.05.9908062019540.20236-100000@auk.stats>
Message-ID: <XFMail.990809100211.plummer@iarc.fr>

I think the c(base, offset) notation is appropriate when
1) Frequency is an integer, and
2) The time dimension refers to an interval.
whereas the scalar representation of time is appropriate when the time
dimension refers to a precise point in time.  There is no unambiguous
way of translating between the two since they are not measuring the same
thing, and it is a bit unfortunate that the two are mixed up.

The c(base,offset) notation is impossible to interpret without
reference to the frequency. So whereas
[1] 2000    1
refers to the whole of 2000 if frequency=1, it means the first 1/12
of 2000 (i.e. January) if frequency=12. This is another source of confusion.

I note in passing that the R base library allows the c(base,offset) notation
for non-integer frequency, e.g.

R> x_ts(1:10,start=c(2,1), freq=2.5)
R> start(x)
[1] 2 1

which is disallowed by S-PLUS.

Martyn


On 06-Aug-99 Prof Brian D Ripley wrote:
> On Fri, 6 Aug 1999, Paul Gilbert wrote:
> 
>> Brian
>> 
>> The example below may be helpful to further illustrate the concern I have
>> with
>> the effects of your ts library on defaults. According to the "Blue Book", in
>> Splus, in R up to 0.64.2, and in today's snapshot of 0.65 without the "ts"
>> library attached
>> 
>> > end(ts(rnorm(10), start=c(1991,1), frequency=1))
>> 
>> gives
>> [1] 2000    1
> 
> How is anyone supposed to know that means 2000 not 2001 without reading
> the help page?
> 
>> However, with the "ts" library attached the result is
>> 
>> [1] 2000
> 
> Isn't that much more readable?
> 
>> This change in the default behavior will break a lot of user code [ ... ]
> 
> Statistical evidence, please.
> 
> Note that all the S (and R) code is written to accept start=1991, so this
> user code must depart from that convention. Maybe it would be a good
> opportunity to re-write that code to conform to the standard conventions?
> As in
> 
> start:    starting date for the series, e.g., in years, February,
>        1970  would  be  1970+(1/12)  or  1970.083.  If start is a
>        vector with  at  least  two  data  values,  the  first  is
>        interpreted  as  the  time  unit,  e.g., the year, and the
>        second as  the  number  of  positions  into  the  sampling
>        period;  e.g., February, 1970 could be c(1970,2).
> 
> Note the two possibilities, and that the one you advocate is the
> alternate. I at least find c(1970, 2) = 1970+(1/12) a _very_ confusing
> notation, fortunately one that can be avoided.
> 
> The problem here is that ts in R is fundamentally incompatible with S, as R
> has a ts class and S does not. I believe start.default should not be 
> implemented in terms of class ts (and any user can change the
> behaviour of a class), and I trust the `lots of user code' does not do
> things like that. The plan is to separate the the default methods from the
> ts class methods.  We do not consider that S compatibility applies 
> to class ts, which S does not have.
> 
> Brian
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david_m_potter@groton.pfizer.com  Mon Aug  9 16:47:57 1999
From: david_m_potter@groton.pfizer.com (david_m_potter@groton.pfizer.com)
Date: Mon, 9 Aug 1999 17:47:57 +0200 (MET DST)
Subject: cm.colors bug (PR#244)
Message-ID: <199908091547.RAA16601@pubhealth.ku.dk>

Full_Name: David M. Potter
Version: 0.64.1
OS: solaris 2.6
Submission from: (NULL) (12.18.36.220)


cm.colors() returns an extra element "1":

> cm.colors(10)
                                                                               

"#7FFFFF" "#99FFFF" "#B2FFFF" "#CCFFFF" "#E5FFFF" "#FFE5FF" "#FFCCFF" "#FFB2FF"

                            v 
"#FF99FF" "#FF7FFF"       "1" 
> 

Why I think it happens

The function has an unnecessary right parentheses
immediately preceding ", v=1" which causes the "v=1" to
be added to the vector rather than being interpreted as an
argument to hsv().

> cm.colors
function (n) 
{
    k <- n%/%2
    if (2 * k == n) {
        c(hsv(h = 6/12, s = seq(0.5, 0, length = k + 1)[-k - 
            1], v = 1), hsv(h = 10/12, s = seq(0, 0.5, length = n - 
            k + 1)[-1]), v = 1)
    }
    else {
        c(hsv(h = 6/12, s = seq(0.5, 0, length = k + 1), v = 1), 
            hsv(h = 10/12, s = seq(0, 0.5, length = n - k)[-1]), 
            v = 1)
    }
}
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug  9 17:29:55 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 9 Aug 1999 18:29:55 +0200
Subject: cm.colors bug (PR#244)
In-Reply-To: <199908091547.RAA16601@pubhealth.ku.dk>
 (david_m_potter@groton.pfizer.com)
References: <199908091547.RAA16601@pubhealth.ku.dk>
Message-ID: <199908091629.SAA11554@sophie.ethz.ch>


    david> Full_Name: David M. Potter Version: 0.64.1 OS: solaris 2.6
    david> Submission from: (NULL) (12.18.36.220)

    david> cm.colors() returns an extra element "1":

Yes, this is a bug
    ....

    david> Why I think it happens

    david> The function has an unnecessary right parentheses immediately
    david> preceding ", v=1" which causes the "v=1" to be added to the
    david> vector rather than being interpreted as an argument to hsv().

   david> > cm.colors
   david> function (n) 
   david> {
   david>     k <- n%/%2
   david>     if (2 * k == n) {
   david>         c(hsv(h = 6/12, s = seq(0.5, 0, length = k + 1)[-k - 
   david>             1], v = 1), hsv(h = 10/12, s = seq(0, 0.5, length = n - 
   david>             k + 1)[-1]), v = 1)
   david>     }
   david>     else {
   david>         c(hsv(h = 6/12, s = seq(0.5, 0, length = k + 1), v = 1), 
   david>             hsv(h = 10/12, s = seq(0, 0.5, length = n - k)[-1]), 
   david>             v = 1)
   david>     }
   david> }


Correct.
There were more problems :
cm.colors(1) {and cm.colors(0)} both failed as well.

The following seems to be correct in all cases

cm.colors <- function (n)
{
    if ((n <- as.integer(n[1])) > 0) {
	even.n <- n %% 2 == 0
	k <- n%/%2
	l1 <- k + 1 - even.n
	l2 <- n - k + even.n
	c(if(l1 > 0)
	  hsv(h =  6/12, s= seq(.5, ifelse(even.n,.5/k,0), length = l1), v = 1),
	  if(l2 > 1)
	  hsv(h = 10/12, s= seq(0, 0.5, length = l2)[-1], v = 1))
    } else character(0)
}

I'll commit it for the R-devel [daily snapshot] and hence 0.65.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug  9 17:45:39 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Aug 1999 18:45:39 +0200
Subject: bug ? wilcox() (PR#243)
In-Reply-To: ATurpin@discoveriesinsight.org's message of "Sat, 7 Aug 1999 02:09:31 +0200 (MET DST)"
References: <199908070009.CAA02388@pubhealth.ku.dk>
Message-ID: <x2hfm8kimk.fsf@blueberry.kubism.ku.dk>

ATurpin@discoveriesinsight.org writes:

> > Hi,
> > 
> > I am getting a strange result from the wilcox function in the code below.
> > This code has worked for many other wilcox's, but not this particular one.
> > The p-value printed should be much higher (consistent with the p-value
> > for the t-test).
> > 
> > I am using R Version 0.64.2 under Debian Linux.
> > 
> > I hope it is not me being stupid...

This *was* a bug in older versions of ctest. Your example has a huge
number of cases with x==y and the test was based on 

	STATISTIC <- sum(r[x > 0])

(x being x-y at that stage) 

The current version at CRAN removes the zeros first...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 10 17:06:15 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 10 Aug 1999 18:06:15 +0200 (MET DST)
Subject: Is a ts of length one a ts? (PR#245)
Message-ID: <199908101606.SAA27541@pubhealth.ku.dk>

The following seems confused (0.65 snapshot)

> x <- ts(1:20)
> window(x, 1, 1)
Time Series:
Start = c(1, 1) 
End = c(1, 1) 
Frequency = 1 
[1] 1
Warning message: 
Not returning a time series object in: [.ts(x, i) 

(it of class ts, as the print method shows). Under 0.64.2 it is even more
confusing:

> x <- ts(1:20)
> window(x, 1, 1)
Warning: Not returning a time series object
Time Series:
Start = c(1, 1) 
End = c(1, 1) 
Frequency = 1 
[1] 1

sic!

> x[1]
[1] 1
Warning message: 
Not returning a time series object in: [.ts(x, 1) 

Is there any good reason why a time series of length one is not
allowed by [.ts (you can certainly create one with ts)?

How about one of length 0:

> ts(numeric(0))
Time Series:
Start = c(1, 1) 
End = c(0, 1) 
Frequency = 1 
numeric(0)

(which is surely a bug in print.ts if length 0 objects are allowed).

> x[0]
numeric(0)
Warning message: 
Not returning a time series object in: [.ts(x, 0) 

I suggest we should allow time series of length 1 but not of length 0
(as they have no start).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Aug 11 08:23:38 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 11 Aug 1999 09:23:38 +0200 (CEST)
Subject: Is a ts of length one a ts? (PR#245)
In-Reply-To: <199908101606.SAA27541@pubhealth.ku.dk>
Message-ID: <XFMail.990811092338.plummer@iarc.fr>

On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
> Is there any good reason why a time series of length one is not
> allowed by [.ts (you can certainly create one with ts)?

It certainly has a start and an end value, but what's the
frequency?  If you want the tsp attribute of a time series
to be well defined, then maybe you should disallow series
of length 1.

"[.ts" certainly needs fixing.  There has been some discussion
about this and I think the consensus was that "[.ts" should
not attempt to return a time series when taking row subsets
(computationally expensive, and quite difficult to cover
all cases, see PR#216, PR#217).  The window() function is more
appropriate for taking subseries IMHO.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 11 09:37:36 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 11 Aug 1999 09:37:36 +0100 (BST)
Subject: Is a ts of length one a ts? (PR#245)
In-Reply-To: <XFMail.990811092338.plummer@iarc.fr>
Message-ID: <Pine.GSO.4.05.9908110928000.12494-100000@auk.stats>

On Wed, 11 Aug 1999, Martyn Plummer wrote:

> On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
> > Is there any good reason why a time series of length one is not
> > allowed by [.ts (you can certainly create one with ts)?
> 
> It certainly has a start and an end value, but what's the
> frequency?  If you want the tsp attribute of a time series
> to be well defined, then maybe you should disallow series
> of length 1.

I think the frequency is perfectly well defined, as that of the series you
subsetted.  How can extracting one observation change the frequency of
observation? Similarly, it is defined by ts, as it is an argument.

> "[.ts" certainly needs fixing.  There has been some discussion
> about this and I think the consensus was that "[.ts" should
> not attempt to return a time series when taking row subsets
> (computationally expensive, and quite difficult to cover
> all cases, see PR#216, PR#217).  The window() function is more
> appropriate for taking subseries IMHO.

You can't control this. Once you have [.ts, it gets used in all sorts
of places deep inside other functions.  For example, in

boxplot(split(nottem, cycle(nottem))

the subsetting in boxplot.stats uses [.ts (in 0.65 where split
preserves classes). So we have to get this right.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Aug 11 12:52:51 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 11 Aug 1999 13:52:51 +0200 (CEST)
Subject: Is a ts of length one a ts? (PR#245)
In-Reply-To: <Pine.GSO.4.05.9908110928000.12494-100000@auk.stats>
Message-ID: <XFMail.990811135251.plummer@iarc.fr>

On 11-Aug-99 Prof Brian D Ripley wrote:
> On Wed, 11 Aug 1999, Martyn Plummer wrote:
> 
>> On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
>> > Is there any good reason why a time series of length one is not
>> > allowed by [.ts (you can certainly create one with ts)?
>> 
>> It certainly has a start and an end value, but what's the
>> frequency?  If you want the tsp attribute of a time series
>> to be well defined, then maybe you should disallow series
>> of length 1.
> 
> I think the frequency is perfectly well defined, as that of the series you
> subsetted.

Is it?

R 0.64.2:

R> x <- ts(1:10)
R> frequency(x)
[1] 1
R> y <- x[c(2,4,6,8,10)]
R> frequency(y)
[1] 0.5

This agrees with the S-PLUS treatment of "regular" time series:

S> x <- rts(1:10)
S> frequency(x)
 frequency 
         1
S> y <- x[c(2,4,6,8,10)]
S> frequency(y)
 frequency 
       0.5

By this logic, the frequency of a single element selected from
a time series is undefined. S-PLUS can get round this problem
because it has the richer time series class "its":

S> z <- x[1]
S> class(z)
[1] "its"

So although z still has a time dimension, it has no frequency.

S-PLUS does allow you to create an "rts" object of length one.  There is
a certain logic to this. The time series parameters must satisfy the
equation

frequency * (end - start) = length - 1

For a series of length 1:

frequency * 0 = 0

which is satisfied by any user-specified value of the frequency.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug 11 13:49:09 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 11 Aug 1999 14:49:09 +0200 (CEST)
Subject: INSTALL script does not handle spaces in pathnames correctly (PR#242)
In-Reply-To: <199908070003.CAA02356@pubhealth.ku.dk>
References: <199908070003.CAA02356@pubhealth.ku.dk>
Message-ID: <14257.28997.662692.683681@fangorn.ci.tuwien.ac.at>

>>>>> lyndon  writes:

> Full_Name: Lyndon Drake
> Version: Version 0.65.0 Under development (unstable) (August 07, 1999)
> OS: Linux 2.2.2
> Submission from: (NULL) (202.14.102.52)


> I was attempting to install the DSE package from a directory whose
> pathname includes spaces.  The INSTALL script interprets spaces in
> the pathname as a separator.  For example:

I think I fixed the problem.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Aug 11 13:57:01 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 11 Aug 1999 13:57:01 +0100 (BST)
Subject: Is a ts of length one a ts? (PR#245)
Message-ID: <199908111257.NAA24100@toucan.stats.ox.ac.uk>

> Date: Wed, 11 Aug 1999 13:52:51 +0200 (CEST)
> From: Martyn Plummer <plummer@iarc.fr>
> To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> Subject: RE: Is a ts of length one a ts? (PR#245)
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> 
> On 11-Aug-99 Prof Brian D Ripley wrote:
> > On Wed, 11 Aug 1999, Martyn Plummer wrote:
> > 
> >> On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
> >> > Is there any good reason why a time series of length one is not
> >> > allowed by [.ts (you can certainly create one with ts)?
> >> 
> >> It certainly has a start and an end value, but what's the
> >> frequency?  If you want the tsp attribute of a time series
> >> to be well defined, then maybe you should disallow series
> >> of length 1.
> > 
> > I think the frequency is perfectly well defined, as that of the series you
> > subsetted.
> 
> Is it?
> 
> R 0.64.2:
> 
> R> x <- ts(1:10)
> R> frequency(x)
> [1] 1
> R> y <- x[c(2,4,6,8,10)]
> R> frequency(y)
> [1] 0.5
> 

I was only discussing the case of a subset of one, but you omitted
the next sentence. What I actually said was

`I think the frequency is perfectly well defined, as that of the series you
subsetted.  How can extracting one observation change the frequency of
observation?'

Obviously, subsetting a regularly spaced series can change the frequency.
 
-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Aug 11 18:08:40 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 11 Aug 1999 19:08:40 +0200 (CEST)
Subject: Is a ts of length one a ts? (PR#245)
In-Reply-To: <199908111257.NAA24100@toucan.stats.ox.ac.uk>
Message-ID: <XFMail.990811190840.plummer@iarc.fr>

On 11-Aug-99 Prof Brian Ripley wrote:
>> Date: Wed, 11 Aug 1999 13:52:51 +0200 (CEST)
>> From: Martyn Plummer <plummer@iarc.fr>
>> To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
>> Subject: RE: Is a ts of length one a ts? (PR#245)
>> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
>> 
>> On 11-Aug-99 Prof Brian D Ripley wrote:
>> > On Wed, 11 Aug 1999, Martyn Plummer wrote:
>> > 
>> >> On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
>> >> > Is there any good reason why a time series of length one is not
>> >> > allowed by [.ts (you can certainly create one with ts)?
>> >> 
>> >> It certainly has a start and an end value, but what's the
>> >> frequency?  If you want the tsp attribute of a time series
>> >> to be well defined, then maybe you should disallow series
>> >> of length 1.
>> > 
>> > I think the frequency is perfectly well defined, as that of the series you
>> > subsetted.
>> 
>> Is it?
>> 
>> R 0.64.2:
>> 
>> R> x <- ts(1:10)
>> R> frequency(x)
>> [1] 1
>> R> y <- x[c(2,4,6,8,10)]
>> R> frequency(y)
>> [1] 0.5
>> 
> 
> I was only discussing the case of a subset of one, but you omitted
> the next sentence. What I actually said was
> 
> `I think the frequency is perfectly well defined, as that of the series you
> subsetted.  How can extracting one observation change the frequency of
> observation?'
> 
> Obviously, subsetting a regularly spaced series can change the frequency.

Yes, I am sorry for clipping too much of your e-mail in my reply.
I didn't develop my argument properly and it looks facetious.
Let me try again.

x <- ts(1:10)
y <- x[c(1,3,5,7,9)]
 
x1 <- x[1]
y1 <- y[1]

The question we disagree on, I think, is "Are x1 and y1 the same?".
I would say yes.  I don't think that the attributes of a subset should
depend on the sequence of commands used to derive it, and I can't think of
another example in R or S where this is the case.  Although R 0.64.2 and
S-PLUS behave differently here, they both conform to this notion.

Underlying my argument is the notion that two time series with a single
observation and the same start value are identical.  The fact that ts()
can construct two such time series with different frequencies blows a
large hole in my argument so I'll stop.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 12 11:10:53 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 12 Aug 1999 12:10:53 +0200
Subject: weighted.residuals() ?
Message-ID: <199908121010.MAA07648@sophie.ethz.ch>

This function is not documented (and not available in S-plus).
I do think it is a useful utility (and should be documented).
However, currently

    weighted.residuals <- function(obj)
    {
	w <- weights(obj)
	if(is.null(w)) residuals(obj)
	else (sqrt(w)*residuals(obj))[w!=0]
    }

where I think the "[w!=0]" is really not at all desired.
It makes sum(weighted.residuals(..)^2) slightly faster, 
however,  weighted.residuals() should return a residual vector of proper
length!

I'm about to drop the above "[w!=0]", document weighted.residuals
and fix  deviance.lm(.) according to John Maindonald's bug report
(and use his suggestion to make cooks.distance() work for glm()'s ..).

Any objections ? [please in the next 5 hours or so...]

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 12 11:42:18 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 12 Aug 1999 12:42:18 +0200 (CEST)
Subject: R Add-on Packages
Message-ID: <14258.42250.271149.861624@fangorn.ci.tuwien.ac.at>

As the 0.65 release should happen within the next few weeks, now would
be a good time for updating/improving our impressive collection of add
on packages.

Issues to look look into include:

* Valid and complete DESCRIPTION, TITLE and INDEX files.

* Complete data/00Index files (if applicable).

* All examples should be executable to that R CMD check passes.

* src/Makefile (if there, most likely not needed) should be correct
(FLIBS etc).  Follow the etc/Makeconf rules ...

Minor issues:

* The formatting of TITLE files is still not consistent.  Please follow
the format of the add-ons in the R distribution.

* It would be nice if compilation with `-Wall' would not give any
warnings ...

* Please watch the Rdconv messages when building the help files from the
Rd sources, and try to fix problems with missing links.  Note that Fritz
is planning on extending the \link{} command so that it can point to an
entry in a different package, but this is still WIP.

* Note that INSTALL now runs configure and cleanup scripts.  If your
package needs something that may not be available, then please use
configure.  Package e1071 may serve as an example.

Fritz and I are planning on writing a script that automates the process
of building CORRECT packages.  But again, WIP ...

I am looking forward to all improvements ...

-k

PS.  Now that we have a ts package in 0.65, should we get rid of bats
and tseries?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 12 12:56:39 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 12 Aug 1999 12:56:39 +0100 (BST)
Subject: R Add-on Packages
In-Reply-To: <14258.42250.271149.861624@fangorn.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.05.9908121254020.14956-100000@auk.stats>

On Thu, 12 Aug 1999, Kurt Hornik wrote:

> PS.  Now that we have a ts package in 0.65, should we get rid of bats
> and tseries?

There are valuable things in tseries not in ts (deliberately, because
they are specialized or there are special copyright issues). I know
Adrian Trapletti is planning a new version of tseries that works with
0.65's ts, when that is final.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Adrian.Trapletti@wu-wien.ac.at  Thu Aug 12 13:04:13 1999
From: Adrian.Trapletti@wu-wien.ac.at (Adrian Trapletti)
Date: Thu, 12 Aug 1999 12:04:13 +0000
Subject: R Add-on Packages
References: <14258.42250.271149.861624@fangorn.ci.tuwien.ac.at>
Message-ID: <37B2B83D.924CB317@wu-wien.ac.at>

Kurt Hornik wrote:

> PS.  Now that we have a ts package in 0.65, should we get rid of bats
> and tseries?

Concerning tseries. I will update tseries as soon as the official ts in R-0.65 is
released, i.e., remove the already implemented functions and so on. I already have
some new functions such as White's and Terasvirta's test for neglected
non-linearity and a few other useful routines will be implemented such as
Johanson's VAR methodology, i.e. we can remove the old tseries and I will post the
new version as soon I have finished my work.

Adrian

>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--
Adrian Trapletti, Vienna University of Economics and Business
Administration, Augasse 2-6, A-1090 Vienna, Austria
Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
Email: adrian.trapletti@wu-wien.ac.at



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 12 15:03:56 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Aug 1999 16:03:56 +0200
Subject: weighted.residuals() ?
In-Reply-To: Martin Maechler's message of "Thu, 12 Aug 1999 12:10:53 +0200"
References: <199908121010.MAA07648@sophie.ethz.ch>
Message-ID: <x2g11pjdtf.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> I'm about to drop the above "[w!=0]", document weighted.residuals
> and fix  deviance.lm(.) according to John Maindonald's bug report
> (and use his suggestion to make cooks.distance() work for glm()'s ..).
> 
> Any objections ? [please in the next 5 hours or so...]

Be *very* careful! The zero-weight issue has bitten us several times
before. Check whether your change would be consistent with what lm/glm
does in such cases. (In particular, degrees of freedom calculations can
get in trouble).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 12 17:42:43 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 12 Aug 1999 18:42:43 +0200
Subject: weighted.residuals() ?
In-Reply-To: <x2g11pjdtf.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 12 Aug 1999 16:03:56 +0200)
References: <199908121010.MAA07648@sophie.ethz.ch> <x2g11pjdtf.fsf@blueberry.kubism.ku.dk>
Message-ID: <199908121642.SAA21912@sophie.ethz.ch>

>>>>> On 12 Aug 1999 16:03, Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> said:

    PD> Martin Maechler <maechler@stat.math.ethz.ch> writes:
    >> I'm about to drop the above "[w!=0]", document weighted.residuals
    >> and fix deviance.lm(.) according to John Maindonald's bug report
    >> (and use his suggestion to make cooks.distance() work for glm()'s
    >> ..).
    >> 
    >> Any objections ? [please in the next 5 hours or so...]

    PD> Be *very* careful! The zero-weight issue has bitten us several
    PD> times before. Check whether your change would be consistent with
    PD> what lm/glm does in such cases. (In particular, degrees of freedom
    PD> calculations can get in trouble).

weighted.residuals() is currently really only used in lm.influence.R;
but the `trouble' is that these {lm diagnostics functions} really all drop
the cases with weight=0.

I'm currently updating documentation {still using fixed deviance.lm() etc}.
weighted.residuals() now has

    \title{Computed Weighted Residuals}
    \usage{
    weighted.residuals(obj, drop0 = TRUE)
    }
    \arguments{
     \item{obj}{\R object, typically of class \code{\link{lm}} or \code{\link{glm}}.}
     \item{drop0}{logical.  If \code{TRUE}, drop all cases with
	 \code{\link{weights} == 0}.}
    }

--
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rprice@honlab.nmfs.hawaii.edu  Thu Aug 12 22:27:20 1999
From: rprice@honlab.nmfs.hawaii.edu (rprice@honlab.nmfs.hawaii.edu)
Date: Thu, 12 Aug 1999 23:27:20 +0200 (MET DST)
Subject: Installation problem on Redhat 6.0 (PR#247)
Message-ID: <199908122127.XAA19789@pubhealth.ku.dk>

Full_Name: Russell Price
Version: 0.64.2
OS: Redhat 6.0
Submission from: (NULL) (128.171.242.1)


When attempting to compile, I get the following error message:

gcc -g -O2 -I../include -I../../src/include  -c d1mach.c -o d1mach.o
gcc: Internal compiler error: program cc1 got fatal signal 6
make[2]: *** [d1mach.o] Error 1
make[2]: Leaving directory `/usr/local/src/R-0.64.2/src/nmath'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/usr/local/src/R-0.64.2/src'
make: *** [R] Error 1

Compiler is gcc 2.8.1 / g77 0.5.23

Have you seen this before?

Thank you for your help.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 12 23:13:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 12 Aug 1999 23:13:47 +0100 (BST)
Subject: Installation problem on Redhat 6.0 (PR#247)
In-Reply-To: <199908122127.XAA19789@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9908122306430.588-100000@auk.stats>

On Thu, 12 Aug 1999 rprice@honlab.nmfs.hawaii.edu wrote:

> Full_Name: Russell Price
> Version: 0.64.2
> OS: Redhat 6.0
> Submission from: (NULL) (128.171.242.1)
> 
> 
> When attempting to compile, I get the following error message:
> 
> gcc -g -O2 -I../include -I../../src/include  -c d1mach.c -o d1mach.o
> gcc: Internal compiler error: program cc1 got fatal signal 6
> make[2]: *** [d1mach.o] Error 1
> make[2]: Leaving directory `/usr/local/src/R-0.64.2/src/nmath'
> make[1]: *** [R] Error 1
> make[1]: Leaving directory `/usr/local/src/R-0.64.2/src'
> make: *** [R] Error 1
> 
> Compiler is gcc 2.8.1 / g77 0.5.23
> 
> Have you seen this before?

No, but those are not the compilers that came with my version of RH6.0.
I have no problems with

blackcap% gcc --version
egcs-2.91.66
blackcap% g77 --version
GNU Fortran 0.5.24-19981002

the latter being from the egcs-g77 rpm, if I recall correctly. We ahve
seem similar problems with people using the compilers for RH5.1 on RH6.0.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 13 00:27:13 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 13 Aug 1999 00:27:13 +0100 (BST)
Subject: ts in R (again)
Message-ID: <Pine.GSO.4.05.9908130015590.21254-100000@auk.stats>

I have done a re-working of the time series code in base R and library
ts that will appear in Friday's snapshot. I am sure at least one
person will be dissatisfied, but I am convinced there are fewer
errors than there were before (I found more than 20, as well as several
documented features that did not exist.)

The principles in the code are:

tsp attributes can only go on vectors of length at least one, must
have a positive frequency, start and end consistent with length. This
is all S-compatible (with the implementation, if not the
documentation).

Default methods and ts methods will where possible make use of the tsp
attribute information (as in S), but ts methods will return class
"ts".  In general R code is expected to use class "ts" (and class
"mts" which inherits from it for multivariate time series), but the
scheme is intended to allow more general classes using the tsp attribute
that may or may not inherit from "ts".  To facilitate this, the
function ts() has argument `class' that governs the class of the
returned object. For strict S compatibility this should be "none".

start.default and end.default were quite unreliable: I had Jan 1995
reported as c(1994, 13), for example. I have tried to make them more
robust. For example, try
> y <- ts(1:120, end=10-1e-7, frequency=12)
> end(y)
[1] 9 13
in S3 (with a warning) and R0.64.2 (which fails to print y). 
This does not seem worth copying (or does Paul Gilbert so instruct?)

"ts" class is only added by ts() and as.ts() (makes use of a tsp
attribute, as in S and unlike current R).  There seems no reason for
diff.default() or window.default() to change the class to "ts" (only),
for example.  I think they should preserve the class, and they do in
my versions.

"ts" class is only removed by tsp(x) <- NULL and by using subsets.  I
have taken Martyn Plummer's advice (PR#217) and made subsetting except
x[, blah] remove the "ts" class. In principle I would like to have
kept it, but at least code works this way!  There were too many problems
with the existing code, for example with matrix indices. (If "[.ts"
is to be special, it has to work in all cases.)  window() can now extract
regular sub-samples. 

There is one change that occurs if library(ts) is used, which is that
simple arithmetic (+ - * /) works on time-aligned series, so that
e.g.

x - 0.8*lag(x, -3)

does what you would expect (otherwise you get 0.2*x).  It is currently
optional, as I am unsure what this might break (although I can find
nothing, and it has been silently there for a week). Should this become
standard?

Two other things I would like opinions on:

1) Given multiple series, plot.ts plots them on a single y scale, and
plot.mts uses separate plots with a common x. Each has disadvantages.
Should we try to switch between the styles depending on the inputs,
and if so how?

2) I think the current R style of

>  y <- ts(1:120, end=10-1e-7,frequency=12)
> y
   Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
0   NA   1   2   3   4   5   6   7   8   9  10  11
1   12  13  14  15  16  17  18  19  20  21  22  23
2   24  25  26  27  28  29  30  31  32  33  34  35
3   36  37  38  39  40  41  42  43  44  45  46  47
4   48  49  50  51  52  53  54  55  56  57  58  59
5   60  61  62  63  64  65  66  67  68  69  70  71
6   72  73  74  75  76  77  78  79  80  81  82  83
7   84  85  86  87  88  89  90  91  92  93  94  95
8   96  97  98  99 100 101 102 103 104 105 106 107
9  108 109 110 111 112 113 114 115 116 117 118 119
10 120  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA

is confusing, not least as it is it impossible to distinguish NAs at the
ends from NAs generated by printing. I had a variant in library ts that
used format to get blanks. Should I make that the default?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 13 07:24:41 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Aug 1999 08:24:41 +0200
Subject: Installation problem on Redhat 6.0 (PR#247)
In-Reply-To: Prof Brian D Ripley's message of "Thu, 12 Aug 1999 23:13:47 +0100 (BST)"
References: <Pine.GSO.4.05.9908122306430.588-100000@auk.stats>
Message-ID: <x2n1vwdwpi.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> > Compiler is gcc 2.8.1 / g77 0.5.23
> > 
> > Have you seen this before?
> 
> No, but those are not the compilers that came with my version of RH6.0.

...and there have been previous reports of trouble with gcc 2.8.x.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Adrian.Trapletti@wu-wien.ac.at  Fri Aug 13 14:15:42 1999
From: Adrian.Trapletti@wu-wien.ac.at (Adrian Trapletti)
Date: Fri, 13 Aug 1999 13:15:42 +0000
Subject: strange scan, count.fields
Message-ID: <37B41A7E.53104D7D@wu-wien.ac.at>

Does anybody understand what's going on here:

I have the following ascii file called "y.txt"


"USD-DEM" "USD-JPY" "DEM-JPY"
 0.344901 4.78712 4.442
 0.345715 4.7882 4.44189
 0.350657 4.79065 4.44177
 0.35347 4.79065 4.43616
 0.35368 4.78957 4.43622
 0.35361 4.78982 4.43669
 0.353821 4.79036 4.43622
 0.352767 4.78899 4.43634
 0.353119 4.78916 4.43545


In R I do the following:


wu161215{adrian}28: R

R : Copyright 1999, The R Development Core Team
Version 0.64.2  (July 3, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> x<-scan("y.txt")
Error: "scan" expected a real got ""USD-DEM""
> row.lens <- count.fields("y.txt")
> any(row.lens != row.lens[1])
[1] TRUE
>
> x<-scan("y.txt", skip=1)
Read 27 items
> row.lens <- count.fields("y.txt")
> any(row.lens != row.lens[1])
[1] FALSE
>


scan seems to produce some side-effect (not properly close the file?)
I am using Redhat 5.2 and in general R seems to be rather stable...

Thanks
Adrian

--
Adrian Trapletti, Vienna University of Economics and Business
Administration, Augasse 2-6, A-1090 Vienna, Austria
Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
Email: adrian.trapletti@wu-wien.ac.at



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Aug 13 16:02:33 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 13 Aug 1999 17:02:33 +0200
Subject: strange scan, count.fields --> BUG
In-Reply-To: <37B41A7E.53104D7D@wu-wien.ac.at> (message from Adrian Trapletti
 on Fri, 13 Aug 1999 13:15:42 +0000)
References: <37B41A7E.53104D7D@wu-wien.ac.at>
Message-ID: <199908131502.RAA12663@sophie.ethz.ch>

Adrian, you seem to report several things at once,...

I think, first you really don't want scan but rather read.table
with your file 

>> I have the following ascii file called "y.txt"
>> 
>> "USD-DEM" "USD-JPY" "DEM-JPY"
>>  0.344901 4.78712 4.442
>>  0.345715 4.7882 4.44189
>>  0.350657 4.79065 4.44177
>>  0.35347 4.79065 4.43616
>>  0.35368 4.78957 4.43622
>>  0.35361 4.78982 4.43669
>>  0.353821 4.79036 4.43622
>>  0.352767 4.78899 4.43634
>>  0.353119 4.78916 4.43545

which gives

R> str(read.table("y.txt",head=T))
`data.frame':  9 obs. of  3 variables:
 $ USD-DEM: num  0.345 0.346 0.351 0.353 0.354 ...
 $ USD-JPY: num  4.79 4.79 4.79 4.79 4.79 ...
 $ DEM-JPY: num  4.44 4.44 4.44 4.44 4.44 ...

---------

Then you report that  scan() leaves something ``behind'' {open file, ??}
after stopping with an error.
This is clearly a bug and is still present in the current 0.65 snapshot.
After a few tests, I see that the problem seems to happen only
(sometimes) when the text leading to the error contains a ` " ' .
The following is even simpler :

 write(c(paste("\"", LETTERS[1:3],"\"", sep=""),1:3), nc=3)
 scan("data")         # gives error as it should
 count.fields("data") # will be wrong
 count.fields("data") # is now ok : 3 3

Gives (in 0.65 snapshot)

    >  write(c(paste("\"", LETTERS[1:3],"\"", sep=""),1:3), nc=3)
    >  scan("data")         # gives error as it should
    Error: "scan" expected a real got ""A""
    >  count.fields("data") # will be wrong
    [1] 4 3
    >  count.fields("data") # is now ok : 3 3
    [1] 3 3

--> I'll report to R-bugs
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Aug 13 16:43:48 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 13 Aug 1999 17:43:48 +0200 (MET DST)
Subject: scan() + error interferes with count.fields() in some cases (PR#248)
Message-ID: <199908131543.RAA28991@pubhealth.ku.dk>

As just mentioned on R-devel,
and originally reported (somewhat less concisely) by Adrian Trapletti,

This code

 write(c(paste("\"", LETTERS[1:3],"\"", sep=""),1:3), nc=3)
 scan("data")         # gives error as it should
 count.fields("data") # will be wrong
 count.fields("data") # is now ok : 3 3

gives (in 0.64.2 and in 0.65 snapshot)

    >  write(c(paste("\"", LETTERS[1:3],"\"", sep=""),1:3), nc=3)
    >  scan("data")         # gives error as it should
    Error: "scan" expected a real got ""A""
    >  count.fields("data") # will be wrong
    [1] 4 3
    >  count.fields("data") # is now ok : 3 3
    [1] 3 3

>From my experiments, the problem seems to be the leading `` " '' ,
since the following also fails  {and btw mixes up ESS ...}

  write(c("\"A", "B", "C",1:3), nc=3)
  scan("data")         # gives error as it should
  count.fields("data") # 3 3
  count.fields("data") # >> Error in count.fields..: string terminated by nl..

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug 16 08:05:15 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 16 Aug 1999 09:05:15 +0200
Subject: configure / linking problem when using hdf5
Message-ID: <199908160705.JAA04507@sophie.ethz.ch>


I've installed hdf5 [library & includes] here locally, last week.
[see ?hdf5save in R]

There is a remaining compilation / linking problem  for me:

The hdf5 library uses "compress2" a routine defined in Gnu's zlib,
but not available in the zlib that comes with X11R6.3 (which we have installed).

Now unfortunately,
the final link statement for R (0.65) [for me, with hdf5 enabled] is 

 gcc -o ../../bin/R.X11 arithmetic.o ....[omitted]  version.o  \
 ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE -L/usr/local/X11R6.3/lib -R/usr/local/X11R6.3/lib -lX11 -lsocket  -lnsl -R/opt/SUNWspro/lib  -L/opt/SUNWspro/lib -L/opt/SUNWspro/SC4.2/lib -L/usr/ccs/lib -L/usr/lib /opt/SUNWspro/SC4.2/lib/libM77.a -lF77 -lsunmath -lm -lcx  -lreadline -lhdf5 -lz -ldl -ltermcap -lm

Undefined			first referenced
 symbol  			    in file
compress2                           /usr/local/lib/libhdf5.a(H5Z.o)
ld: fatal: Symbol referencing errors. No output written to ../../bin/R.X11

-------------
Which happens because there was an  -L/usr/local/X11R6.3/lib 
before the "-lhdf5 -lz".
In the local LD_LIBRARY_PATH,  
   /usr/local/lib (which has the proper libz.a  *with* compress2)
   comes before the X11/lib (which has the wrong  libz.a).

Of course, I can manually 
put -L/usr/local/lib  BEFORE the -L/usr/local/X11R6.3/lib,
but I wonder what would be recommended, "officially".

Putting " -lhdf5 -lz "  BEFORE  "-L/usr/local/X11R6.3/lib"
simply fails as well [undefined symbol "compress2"].

Having two different "libz.a" in LD_LIBRARY_PATH doesn't make sense anyway.
Would any of you know if I can safely get rid of X11's one now that I have
GNU's ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 16 08:19:59 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 16 Aug 1999 09:19:59 +0200 (CEST)
Subject: configure / linking problem when using hdf5
In-Reply-To: <199908160705.JAA04507@sophie.ethz.ch>
References: <199908160705.JAA04507@sophie.ethz.ch>
Message-ID: <14263.48031.406276.341146@fangorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

> I've installed hdf5 [library & includes] here locally, last week.
> [see ?hdf5save in R]

> There is a remaining compilation / linking problem  for me:

> The hdf5 library uses "compress2" a routine defined in Gnu's zlib,
> but not available in the zlib that comes with X11R6.3 (which we have installed).

> Now unfortunately,
> the final link statement for R (0.65) [for me, with hdf5 enabled] is 

>  gcc -o ../../bin/R.X11 arithmetic.o ....[omitted]  version.o  \
>  ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE -L/usr/local/X11R6.3/lib -R/usr/local/X11R6.3/lib -lX11 -lsocket  -lnsl -R/opt/SUNWspro/lib  -L/opt/SUNWspro/lib -L/opt/SUNWspro/SC4.2/lib -L/usr/ccs/lib -L/usr/lib /opt/SUNWspro/SC4.2/lib/libM77.a -lF77 -lsunmath -lm -lcx  -lreadline -lhdf5 -lz -ldl -ltermcap -lm

> Undefined			first referenced
>  symbol  			    in file
> compress2                           /usr/local/lib/libhdf5.a(H5Z.o)
> ld: fatal: Symbol referencing errors. No output written to ../../bin/R.X11

> -------------
> Which happens because there was an  -L/usr/local/X11R6.3/lib 
> before the "-lhdf5 -lz".
> In the local LD_LIBRARY_PATH,  
>    /usr/local/lib (which has the proper libz.a  *with* compress2)
>    comes before the X11/lib (which has the wrong  libz.a).

> Of course, I can manually 
> put -L/usr/local/lib  BEFORE the -L/usr/local/X11R6.3/lib,
> but I wonder what would be recommended, "officially".

> Putting " -lhdf5 -lz "  BEFORE  "-L/usr/local/X11R6.3/lib"
> simply fails as well [undefined symbol "compress2"].

> Having two different "libz.a" in LD_LIBRARY_PATH doesn't make sense
> anyway.  Would any of you know if I can safely get rid of X11's one
> now that I have GNU's ?

We currently have

  ALL_LIBS = $(RLIBS) $(ALL_X_LIBS) $(FLIBS) $(R_XTRA_LIBS) $(LIBS)

I assume that the order is mostly for historic reasons.  You could try
putting ALL_X_LIBS last and see what happens ...e.g.,

  ALL_LIBS = $(RLIBS) $(R_XTRA_LIBS) $(FLIBS) $(LIBS) $(ALL_X_LIBS)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Aug 16 21:49:07 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Tue, 17 Aug 1999 08:49:07 +1200
Subject: ts in R (again)
In-Reply-To: <Pine.GSO.4.05.9908130015590.21254-100000@auk.stats>; from Prof Brian D Ripley on Fri, Aug 13, 1999 at 12:27:13AM +0100
References: <Pine.GSO.4.05.9908130015590.21254-100000@auk.stats>
Message-ID: <19990817084907.A5910@stat1.stat.auckland.ac.nz>

On Fri, Aug 13, 1999 at 12:27:13AM +0100, Prof Brian D Ripley wrote:
> Two other things I would like opinions on:
> 
> 1) Given multiple series, plot.ts plots them on a single y scale, and
> plot.mts uses separate plots with a common x. Each has disadvantages.
> Should we try to switch between the styles depending on the inputs,
> and if so how?

Genuine query:  How do I do I get a simple lagged variable plot like

	plot(lag(x), x)
	lines(lowess(lag(x), x))

We don't seem to have any simple way of doing this.  Do we need a special
function for this (with a panel function for effects like lowess/loess)?


> 2) I think the current R style of
> 
> >  y <- ts(1:120, end=10-1e-7,frequency=12)
> > y
>    Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
> 0   NA   1   2   3   4   5   6   7   8   9  10  11
> 1   12  13  14  15  16  17  18  19  20  21  22  23
> 2   24  25  26  27  28  29  30  31  32  33  34  35
> 3   36  37  38  39  40  41  42  43  44  45  46  47
> 4   48  49  50  51  52  53  54  55  56  57  58  59
> 5   60  61  62  63  64  65  66  67  68  69  70  71
> 6   72  73  74  75  76  77  78  79  80  81  82  83
> 7   84  85  86  87  88  89  90  91  92  93  94  95
> 8   96  97  98  99 100 101 102 103 104 105 106 107
> 9  108 109 110 111 112 113 114 115 116 117 118 119
> 10 120  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA
> 
> is confusing, not least as it is it impossible to distinguish NAs at the
> ends from NAs generated by printing. I had a variant in library ts that
> used format to get blanks. Should I make that the default?

Yes.

I'm a little bit worried about having libraries overide "base"
methods.  For efficiency reasons it would be better to attach libraries
after the "base" libraries.  That would mean that attempted overrides
would not work.

We can't attach libraries after "base" at present, but I would like to
make it the default behaviour (if politically possible).  That makes it 
important to get agreement of what the "right" basic methods are and to
get them into the base.

-- 
+----------------------------------------------------------------------+
| Ross Ihaka                         Email:  ihaka@stat.auckland.ac.nz |
| Department of Statistics           Phone:  (64-9) 373-7599 x 5054    |
| University of Auckland             Fax:    (64-9) 373-7018           |
| Private Bag 92019                                                    |
| Auckland, New Zealand                                                |
+----------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 16 22:50:52 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 16 Aug 1999 22:50:52 +0100 (BST)
Subject: ts in R (again)
In-Reply-To: <19990817084907.A5910@stat1.stat.auckland.ac.nz>
Message-ID: <Pine.GSO.4.05.9908162225540.29169-100000@auk.stats>

On Tue, 17 Aug 1999, Ross Ihaka wrote:

> On Fri, Aug 13, 1999 at 12:27:13AM +0100, Prof Brian D Ripley wrote:
> > Two other things I would like opinions on:
> > 
> > 1) Given multiple series, plot.ts plots them on a single y scale, and
> > plot.mts uses separate plots with a common x. Each has disadvantages.
> > Should we try to switch between the styles depending on the inputs,
> > and if so how?
> 
> Genuine query:  How do I do I get a simple lagged variable plot like
> 
> 	plot(lag(x), x)
> 	lines(lowess(lag(x), x))
> 
> We don't seem to have any simple way of doing this.  Do we need a special
> function for this (with a panel function for effects like lowess/loess)?

As of a few days ago, you can do precisely plot(lag(x), x), as plot.ts has
a `scatterplot' method, and that aligns the time bases. You probably want
plot(lag(x), x, type="p"), but I have not changed the previous default.

The lowess thing is a little more difficult. I think you want

xy <- ts.intersect(z=lag(x), x)
lines(lowess(xy[,1], xy[,2]))

That's the trick: set up all the objects you want, ts.intersect them
and unpick.  Some functions like plot.ts and Ops.ts do this for you.

> > 2) I think the current R style of
> > 
> > >  y <- ts(1:120, end=10-1e-7,frequency=12)
> > > y
> >    Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
> > 0   NA   1   2   3   4   5   6   7   8   9  10  11
> > 1   12  13  14  15  16  17  18  19  20  21  22  23
> > 2   24  25  26  27  28  29  30  31  32  33  34  35
> > 3   36  37  38  39  40  41  42  43  44  45  46  47
> > 4   48  49  50  51  52  53  54  55  56  57  58  59
> > 5   60  61  62  63  64  65  66  67  68  69  70  71
> > 6   72  73  74  75  76  77  78  79  80  81  82  83
> > 7   84  85  86  87  88  89  90  91  92  93  94  95
> > 8   96  97  98  99 100 101 102 103 104 105 106 107
> > 9  108 109 110 111 112 113 114 115 116 117 118 119
> > 10 120  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA
> > 
> > is confusing, not least as it is it impossible to distinguish NAs at the
> > ends from NAs generated by printing. I had a variant in library ts that
> > used format to get blanks. Should I make that the default?
> 
> Yes.

Done on Saturday.

> I'm a little bit worried about having libraries overide "base"
> methods.  For efficiency reasons it would be better to attach libraries
> after the "base" libraries.  That would mean that attempted overrides
> would not work.

There are now no overrides in library(ts), but it was very useful to have
them when testing things out. S has the `first' flag which is normally
false, but can be used to force overrides. I find this useful, not least to
ensure that my library comes in front of a broken one. (Someone out there
with a package on CRAN thinks plot.profile is not the name of a plot method
for profile objects, for example, even though that is in the White Book.)

On the basis of feedback so far, I have altered plot.ts to have a plot.type
flag that defaults to the plot.mts style, and altered print.ts to use
blanks not NAs.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Aug 16 23:52:29 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Tue, 17 Aug 1999 00:52:29 +0200 (MET DST)
Subject: axis ignores srt/crt (PR#249)
Message-ID: <199908162252.AAA18622@pubhealth.ku.dk>


Rotated text for axis labels should be possible with one of 
par(srt=90)
axis(1,at,labels)
par(srt=0)

or 

axis(1,at,labels,srt=90)

(or similar with crt instead of srt)

None of these works in pre0.65 or in 0.64.2

           _                           
platform   sparc-sun-solaris2.7        
arch       sparc                       
os         solaris2.7                  
system     sparc, solaris2.7           
status     Under development (unstable)
status.rev 0                           
major      0                           
minor      65.0                        
year       1999                        
month      August                      
day        13                          
language   R            


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 17 09:53:01 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 17 Aug 1999 10:53:01 +0200
Subject: axis ignores srt/crt (PR#249)
In-Reply-To: <199908162252.AAA18622@pubhealth.ku.dk>
 (thomas@biostat.washington.edu)
References: <199908162252.AAA18622@pubhealth.ku.dk>
Message-ID: <199908170853.KAA00649@sophie.ethz.ch>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> Rotated text for axis labels should be possible with one of
    TL> par(srt=90) axis(1,at,labels) par(srt=0)

    TL> or

    TL> axis(1,at,labels,srt=90)

    TL> (or similar with crt instead of srt)

    TL> None of these works in pre0.65 or in 0.64.2

I'm not sure if you are right...

The standard way to get rotated axis labels used to be
    par(las = {0,1,2,3})

The doc (?par) has

     las: numeric in {0,1,2,3}; the style of axis labels.  0 =
          always parallel to the axis [default], 1 = always
          horizontal, 2 = always perpendicular to the axis,
          3 = always vertical.

Try
	par(mfrow=c(2,2))
	for(las in 0:3) plot(1, las = las, main = paste("las =",las))

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Aug 17 16:21:08 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 17 Aug 1999 08:21:08 -0700 (PDT)
Subject: axis ignores srt/crt (PR#249)
In-Reply-To: <199908170853.KAA00649@sophie.ethz.ch>
Message-ID: <Pine.GSO.4.10.9908170819300.15758-100000@wompom.biostat.washington.edu>

On Tue, 17 Aug 1999, Martin Maechler wrote:
> 
> The standard way to get rotated axis labels used to be
>     par(las = {0,1,2,3})
> 

Ok. It's not a bug, it's an incompatibility -- I was trying to port some
code from S-PLUS.  I'll use par(las).

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Aug 18 09:26:42 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 18 Aug 1999 09:26:42 +0100 (BST)
Subject: diag()
Message-ID: <Pine.GSO.3.96.990818091901.648B-100000@laplace>

I would like to suggest a slight modification to diag().  In the case
where x is a matrix with both row names and column names the same, it
would be reasonable if the resulting vector also had those names.  I often
use diag() on variance matrices, where this modification is helpful. 

The modification requires replacing 

    if (is.matrix(x) && nargs() == 1) 
        return(c(x)[1 + 0:(min(dim(x)) - 1) * (dim(x)[1] + 1)])

the first two lines, with something like

    if (is.matrix(x) && nargs() == 1) {
        y <- c(x)[1 + 0:(min(dim(x)) - 1) * (dim(x)[1] + 1)]
        if (!is.null(nms <- dimnames(x)) && all(nms[[1]]==nms[[2]]))
          names(y) <- nms[[1]]
        return(y)
    }

Just a thought,  Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 18 09:48:04 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 18 Aug 1999 10:48:04 +0200
Subject: diag(); feature freeze; please beta-test..
In-Reply-To: <Pine.GSO.3.96.990818091901.648B-100000@laplace> (message from
 Jonathan Rougier on Wed, 18 Aug 1999 09:26:42 +0100 (BST))
References: <Pine.GSO.3.96.990818091901.648B-100000@laplace>
Message-ID: <199908180848.KAA03018@sophie.ethz.ch>

>>>>> On Wed, 18 Aug 1999 09:26:42 +0100 (BST), Jonathan Rougier <J.C.Rougier@durham.ac.uk> said:

    JonR> I would like to suggest a slight modification to diag().  In the
    JonR> case where x is a matrix with both row names and column names the
    JonR> same, it would be reasonable if the resulting vector also had
    JonR> those names.  I often use diag() on variance matrices, where this
    JonR> modification is helpful.

    JonR> The modification requires replacing 

    JonR> if (is.matrix(x) && nargs() == 1) 
    JonR>    return(c(x)[1 + 0:(min(dim(x)) - 1) * (dim(x)[1] + 1)])

    JonR> the first two lines, with something like

    JonR> if (is.matrix(x) && nargs() == 1) {
    JonR>   y <- c(x)[1 + 0:(min(dim(x)) - 1) * (dim(x)[1] + 1)]
    JonR>   if (!is.null(nms <- dimnames(x)) && all(nms[[1]]==nms[[2]]))
    JonR>     names(y) <- nms[[1]]
    JonR>   return(y)
    JonR> }

    JonR> Just a thought,  Jonathan.

    JonR> Jonathan Rougier                       Science Laboratories
    JonR> Department of Mathematical Sciences    South Road
    JonR> University of Durham                   Durham DH1 3LE


This seems like a good idea [ and I think I vaguely remember that I would
			      have wanted that myself, some time],
however,  R 0.65 is in ``feature freeze'' now
(and release date is scheduled for Aug.27 ..)

Yes, please ``everyone'' : 
Now is pre-tester time,
     Get "R-devel.tar.gz" from a CRAN site near you,
unpack and install {from source!!},
and send bug reports to R-core or R-devel,
*not* to R-bugs -- since bugs in non-released versions shouldn't make it
into the R repository I think.

{I hope to not forget to put the above diag() improvement into the next
  release after 0.65(.0)..}

Martin.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Aug 18 11:14:56 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 18 Aug 1999 11:14:56 +0100 (BST)
Subject: feature freeze; please beta-test..
Message-ID: <199908181014.LAA08544@toucan.stats.ox.ac.uk>

> From: Martin Maechler <maechler@stat.math.ethz.ch>

[... about something else]

> R 0.65 is in ``feature freeze'' now
> (and release date is scheduled for Aug.27 ..)
> 
> Yes, please ``everyone'' : 
> Now is pre-tester time,
>      Get "R-devel.tar.gz" from a CRAN site near you,
> unpack and install {from source!!},
> and send bug reports to R-core or R-devel,
> *not* to R-bugs -- since bugs in non-released versions shouldn't make it
> into the R repository I think.

Can we also ask that you fill in the form in the PLATFORMS file and
send it in (to R-core) if you successfully run make check.  That file
is getting outdated, and we are proposing to remove all entries for
pre-0.65 versions. We are particularly interested in reports for less
common systems, i.e. not i386-GNU/Linux nor Solaris, and also of
builds of the gnome version.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman.buyukisik@ae.ge.com  Wed Aug 18 16:47:29 1999
From: osman.buyukisik@ae.ge.com (U-E59264-Osman F Buyukisik)
Date: Wed, 18 Aug 1999 11:47:29 -0400 (EDT)
Subject: R-devel Aug18 version on hpux10.20
Message-ID: <14266.52770.150464.86932@c1186.ae.ge.com>

Hello,

 configured with  gcc-2.95, hpux ld, hpux fort77, --with-readline

 I had three problems:

1. changed f77 to fort77 in Makeconf files/Makefile (I had
--with-f77=fort77 in the configure line)

2. readline : picked up that I had readline, but the include location
was inserted into the CFLAGS, and history was marked as
unavailable. Made changes to Makeconf  and etc/Makeconf 

3. LDFLAGS = -g -Wl,xx   was not acceptable to the hpux "ld" (both
have to go) Changed Makefile.

Then had a clean build.  Seems to able to load dynamic libs. 
Check fails at two locations:

is.infinite(.Machine$double.base ^ .Machine$double.max.exp)# overflow
[1] FALSE

 x <- 1:99/100
 all(abs(1 - x / asin(sin(x))) <= Meps)
[1] FALSE

Second one :
 [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[49]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE
[61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[97]  TRUE  TRUE  TRUE

Flaky math routines in hpux or gcc libc.


Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Aug 19 03:56:10 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 19 Aug 1999 14:56:10 +1200
Subject: axis ignores srt/crt (PR#249)
In-Reply-To: <199908162252.AAA18622@pubhealth.ku.dk>; from thomas@biostat.washington.edu on Tue, Aug 17, 1999 at 12:52:29AM +0200
References: <199908162252.AAA18622@pubhealth.ku.dk>
Message-ID: <19990819145610.A6868@stat1.stat.auckland.ac.nz>

On Tue, Aug 17, 1999 at 12:52:29AM +0200, thomas@biostat.washington.edu wrote:
> 
> Rotated text for axis labels should be possible with one of 
> par(srt=90)
> axis(1,at,labels)
> par(srt=0)
> 
> or 
> 
> axis(1,at,labels,srt=90)
> 
> (or similar with crt instead of srt)
> 
> None of these works in pre0.65 or in 0.64.2

This seems like a useful feature, but the S implementation seems
sightly odd.

	axis(1,at,srt=45,adj=1)

does rotate the labels, but

	axis(1,srt=45,adj=1)

does not.  Do you want this exact behaviour, or would always obeying
the srt= option make more sense?

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 19 06:54:27 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 19 Aug 1999 06:54:27 +0100 (BST)
Subject: R-devel Aug18 version on hpux10.20
In-Reply-To: <14266.52770.150464.86932@c1186.ae.ge.com>
Message-ID: <Pine.GSO.4.05.9908190648020.10425-100000@auk.stats>

On Wed, 18 Aug 1999, U-E59264-Osman F Buyukisik wrote:

> Hello,
> 
>  configured with  gcc-2.95, hpux ld, hpux fort77, --with-readline
> 
>  I had three problems:
> 
> 1. changed f77 to fort77 in Makeconf files/Makefile (I had
> --with-f77=fort77 in the configure line)
> 
> 2. readline : picked up that I had readline, but the include location
> was inserted into the CFLAGS, and history was marked as
> unavailable. Made changes to Makeconf  and etc/Makeconf 

That might be gcc-2.95. I found that its default include path is set up to
include prefix/include but not /usr/local/include, which are of course the
same only if you install in /usr/local (and that is where 2.8.1 is). This
means that for me readline is only found correctly when I use 2.95 if I
have CPPFLAGS set to -I/usr/local/include in config.site (readline was
installed in /usr/local).


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 19 08:18:49 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 19 Aug 1999 09:18:49 +0200 (CEST)
Subject: R-devel Aug18 version on hpux10.20
In-Reply-To: <14266.52770.150464.86932@c1186.ae.ge.com>
References: <14266.52770.150464.86932@c1186.ae.ge.com>
Message-ID: <14267.45017.588791.524861@fangorn.ci.tuwien.ac.at>

>>>>> U-E59264-Osman F Buyukisik writes:

> Hello,
>  configured with  gcc-2.95, hpux ld, hpux fort77, --with-readline

>  I had three problems:

> 1. changed f77 to fort77 in Makeconf files/Makefile (I had
> --with-f77=fort77 in the configure line)

What is the problem here?  You do --with-f77=fort77 but FC is set to
f77?

> 2. readline : picked up that I had readline, but the include location
> was inserted into the CFLAGS, and history was marked as
> unavailable. Made changes to Makeconf  and etc/Makeconf 

> 3. LDFLAGS = -g -Wl,xx   was not acceptable to the hpux "ld" (both
> have to go) Changed Makefile.

Which version is that?  What is the problem?  Works for me as detailed
in PLATFORMS (note that the configure setting is -Wl,-E).

> Then had a clean build.  Seems to able to load dynamic libs. 
> Check fails at two locations:

> ...

> Flaky math routines in hpux or gcc libc.

Not gcc, I would assume, as I get the same with cc.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 19 09:45:35 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 19 Aug 1999 10:45:35 +0200
Subject: date() should not append a final "\n" ?!?
Message-ID: <199908190845.KAA24041@sophie.ethz.ch>

Between R 0.63.2 and 0.64, the behavior of 
  date()
has been changed in order to become platform independent.
It now uses POSIX calls, basically

    time_t t;
    time(&t);
    return ctime(&t);


This currently returns (for me on Sun SPARC Solaris)

  > date()
  [1] "Thu Aug 19 10:36:28 1999\n"

where I think the final "\n" is really UNdesired.

---
Is this just my (Sun's) version of ctime(), i.e.,
does anyone *NOT* get the final new line ?

Thanks for your feedback.
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Aug 19 09:48:18 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 19 Aug 1999 10:48:18 +0200 (CEST)
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <199908190845.KAA24041@sophie.ethz.ch>
References: <199908190845.KAA24041@sophie.ethz.ch>
Message-ID: <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

MM> Between R 0.63.2 and 0.64, the behavior of 
MM>   date()
MM> has been changed in order to become platform independent.
MM> It now uses POSIX calls, basically

MM>     time_t t;
MM>     time(&t);
MM>     return ctime(&t);


MM> This currently returns (for me on Sun SPARC Solaris)

>> date()
MM>   [1] "Thu Aug 19 10:36:28 1999\n"

MM> where I think the final "\n" is really UNdesired.

Yes!


MM> ---
MM> Is this just my (Sun's) version of ctime(), i.e.,
MM> does anyone *NOT* get the final new line ?


Debian Linux:

R> date()
[1] "Thu Aug 19 10:47:17 1999\n"


.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mlthomps@yayoi.mt.m-kagaku.co.jp  Thu Aug 19 10:03:48 1999
From: mlthomps@yayoi.mt.m-kagaku.co.jp (mlthomps@yayoi.mt.m-kagaku.co.jp)
Date: Thu, 19 Aug 1999 11:03:48 +0200 (MET DST)
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1 (PR#252)
Message-ID: <199908190903.LAA12321@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0007_01BEEA08.8191B340
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Dear R Development Core Team,

I've been trying to install R ver. 0.64.0 on a
Dec-Alpha machine w/OSF1.

A couple of things go wrong.

After I type "make", the installation process
bombs while trying to compile the R.binary.
It reports the following:

     f77   -o ../../bin/R.binary {*** for brevity, I've deleted the =
filenames printed here ***}
     ld:  ../unix/libunix.a(system.o): main: multiply defined
     fort: Severe: Failed while trying to link.

I got around this by adding the "-nofor_main" option to the=20
compile statement in the Makefile in ../src/main directory.
Thus, make issues the command:
     f77  -nofor_main -o ../../bin/R.binary {*** again, deleted printed =
filenames ***}
That allowed the compilation to complete smoothly.

However, when I tried to run R, I got the following result:
----------------------------------------------------------------------
> R
ARGUMENT '' __ignored__

R : Copyright 1999, The R Development Core Team
Version 0.64.0  (April 8, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

Floating exception (core dumped)
----------------------------------------------------------------------


So, I tried it with the debugger dbx and got this output:
----------------------------------------------------------------------
> R --debugger dbx
dbx version 3.11.8
Type 'help' for help.


"system.c" not defined or not active
(dbx) run

R : Copyright 1999, The R Development Core Team
Version 0.64.0  (April 8, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

signal Floating point exception at   [InitArithmetic:5 =
+0x17c,0x120018ddc]       Source not available
(dbx) quit
----------------------------------------------------------------------


Any ideas what might be wrong and how I can get around it?

By the way, I use R on my PC without any glitches.
I'm impressed with the work you have done.

Thanks for providing such useful software,
-Mike

------------------------------------------------------------------
Michael L. Thompson, Ph.D.  | Phone:  (0)86-457-2805  |
Senior Consultant on Modeling & Statistics     | Fax:      =
(0)86-457-2027  |
Development and Engineering Research Center =20
E-mail: mlthomps@seigi2.mt.m-kagaku.co.jp
               mlthomps@alum.mit.edu
Mitsubishi Chemical Corporation, Mizushima Plant
3-10 Ushiodori, Kurashiki, Okayama 712  JAPAN
-------------------------------------------------------------------

------=_NextPart_000_0007_01BEEA08.8191B340
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD W3 HTML//EN">
<HTML>
<HEAD>

<META content=3Dtext/html;charset=3Diso-8859-1 =
http-equiv=3DContent-Type>
<META content=3D'"MSHTML 4.72.3110.7"' name=3DGENERATOR>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT color=3D#000000 size=3D2>Dear R Development Core =
Team,</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>I've been trying to install R ver. 0.64.0 on =
a</FONT></DIV>
<DIV><FONT size=3D2>Dec-Alpha machine w/OSF1.</FONT></DIV>
<DIV><FONT size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>A couple of things go wrong.</FONT></DIV>
<DIV><FONT size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>After I type &quot;make&quot;, the installation=20
process</FONT></DIV>
<DIV><FONT size=3D2>bombs while trying to compile the =
R.binary.</FONT></DIV>
<DIV><FONT size=3D2>It reports the following:</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp;&nbsp; f77&nbsp;&nbsp; -o =
.../../bin/R.binary=20
{*** for brevity, I've deleted the filenames printed here =
***}</FONT></DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp;&nbsp; ld:&nbsp;=20
.../unix/libunix.a(system.o): main: multiply =
defined<BR>&nbsp;&nbsp;&nbsp;&nbsp;=20
fort: Severe: Failed while trying to link.</FONT></DIV>
<DIV><FONT size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>I got around this by adding the =
&quot;-nofor_main&quot; option=20
to the </FONT></DIV>
<DIV><FONT size=3D2>compile statement </FONT><FONT size=3D2>in the =
Makefile in=20
.../src/main directory.</FONT></DIV>
<DIV><FONT size=3D2>Thus, make issues the command:</FONT></DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp;&nbsp; f77&nbsp; -nofor_main -o=20
../../bin/R.binary {*** again, deleted printed filenames =
***}</FONT></DIV>
<DIV><FONT size=3D2>That allowed the compilation to complete=20
smoothly.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>However, when I tried to run R, I =
got the=20
following result:</FONT></DIV>
<DIV><FONT color=3D#000000=20
size=3D2>----------------------------------------------------------------=
------</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2>&gt; R<BR>ARGUMENT '' =
__ignored__</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R : Copyright 1999, The R =
Development Core=20
Team<BR>Version 0.64.0&nbsp; (April 8, 1999)</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R is free software and comes with =
ABSOLUTELY NO=20
WARRANTY.<BR>You are welcome to redistribute it under certain=20
conditions.<BR>Type&nbsp;&nbsp;&nbsp; &quot;?license&quot; or=20
&quot;?licence&quot; for distribution details.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R is a collaborative project with =
many=20
contributors.<BR>Type&nbsp;&nbsp;&nbsp; &quot;?contributors&quot; for a=20
list.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>Type&nbsp;&nbsp;&nbsp; =
&quot;demo()&quot; for=20
some demos, &quot;help()&quot; for on-line help,=20
or<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
&quot;help.start()&quot; for a=20
HTML browser interface to help.<BR>Type&nbsp;&nbsp;&nbsp; =
&quot;q()&quot; to=20
quit R.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>Floating exception (core=20
dumped)<BR></FONT>-------------------------------------------------------=
---------------</DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>So, I tried it with the debugger dbx =
and got=20
this output:</FONT></DIV>
<DIV><FONT color=3D#000000=20
size=3D2></FONT>---------------------------------------------------------=
-------------</DIV>
<DIV><FONT color=3D#000000 size=3D2>&gt; R --debugger dbx<BR>dbx version =

3.11.8<BR>Type 'help' for help.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2><BR>&quot;system.c&quot; not defined =
or not=20
active<BR>(dbx) run</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R : Copyright 1999, The R =
Development Core=20
Team<BR>Version 0.64.0&nbsp; (April 8, 1999)</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R is free software and comes with =
ABSOLUTELY NO=20
WARRANTY.<BR>You are welcome to redistribute it under certain=20
conditions.<BR>Type&nbsp;&nbsp;&nbsp; &quot;?license&quot; or=20
&quot;?licence&quot; for distribution details.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R is a collaborative project with =
many=20
contributors.<BR>Type&nbsp;&nbsp;&nbsp; &quot;?contributors&quot; for a=20
list.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>Type&nbsp;&nbsp;&nbsp; =
&quot;demo()&quot; for=20
some demos, &quot;help()&quot; for on-line help,=20
or<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
&quot;help.start()&quot; for a=20
HTML browser interface to help.<BR>Type&nbsp;&nbsp;&nbsp; =
&quot;q()&quot; to=20
quit R.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>signal Floating point exception =
at&nbsp;&nbsp;=20
[InitArithmetic:5 =
+0x17c,0x120018ddc]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Source=20
not available<BR>(dbx)=20
quit<BR></FONT>----------------------------------------------------------=
------------</DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>Any ideas what might be wrong and =
how I can get=20
around it?</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>By the way, I use R on my PC without =
any=20
glitches.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT><FONT size=3D2>I'm impressed =
with the work=20
you have done.</FONT></DIV>
<DIV><FONT size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>Thanks for providing such useful =
software,</FONT></DIV>
<DIV><FONT size=3D2>-Mike</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT color=3D#000000=20
size=3D2>----------------------------------------------------------------=
--<BR>Michael=20
L. Thompson, Ph.D.&nbsp; | Phone:&nbsp; (0)86-457-2805&nbsp; |<BR>Senior =

Consultant on Modeling &amp; Statistics&nbsp;&nbsp;&nbsp;&nbsp; |=20
Fax:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (0)86-457-2027&nbsp; |<BR>Development =
and=20
Engineering Research Center&nbsp; <BR>E-mail: <A=20
href=3D"mailto:mlthomps@seigi2.mt.m-kagaku.co.jp">mlthomps@seigi2.mt.m-ka=
gaku.co.jp</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
<A =
href=3D"mailto:mlthomps@alum.mit.edu">mlthomps@alum.mit.edu</A><BR>Mitsub=
ishi=20
Chemical Corporation, Mizushima Plant<BR>3-10 Ushiodori, Kurashiki, =
Okayama=20
712&nbsp;=20
JAPAN<BR>----------------------------------------------------------------=
---</FONT></DIV></BODY></HTML>

------=_NextPart_000_0007_01BEEA08.8191B340--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 19 10:32:03 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 19 Aug 1999 11:32:03 +0200 (CEST)
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1 (PR#252)
In-Reply-To: <199908190903.LAA12321@pubhealth.ku.dk>
References: <199908190903.LAA12321@pubhealth.ku.dk>
Message-ID: <14267.53011.7435.122041@fangorn.ci.tuwien.ac.at>

>>>>> mlthomps  writes:

> This is a multi-part message in MIME format.
> ------=_NextPart_000_0007_01BEEA08.8191B340
> Content-Type: text/plain;
> 	charset="iso-8859-1"
> Content-Transfer-Encoding: quoted-printable

> Dear R Development Core Team,

> I've been trying to install R ver. 0.64.0 on a
> Dec-Alpha machine w/OSF1.

Can you please try the current R-devel snapshot instead?
Also, can you please use the function bug.report(), or provide detailed
information on what exactly you did and your environment is?

-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 19 10:38:41 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 19 Aug 1999 11:38:41 +0200
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at> (message
 from Friedrich Leisch on Thu, 19 Aug 1999 10:48:18 +0200 (CEST))
References: <199908190845.KAA24041@sophie.ethz.ch> <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
Message-ID: <199908190938.LAA24130@sophie.ethz.ch>


>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

    MM> Between R 0.63.2 and 0.64, the behavior of 
    MM> date()
    MM> has been changed in order to become platform independent.
    MM> It now uses POSIX calls, basically

    MM> time_t t;
    MM> time(&t);
    MM> return ctime(&t);


    MM> This currently returns (for me on Sun SPARC Solaris)

    >>> date()
    MM> [1] "Thu Aug 19 10:36:28 1999\n"

    MM> where I think the final "\n" is really UNdesired.

    FrL> Yes!

Okay,
I checked  Lewine (1991) "POSIX Programmer's Guide" :

POSIX specifies that ctime() has a final "\n" 
(before the string terminator \0)
and always length 26 (incl. terminator)

Hence, we have to drop the final "\n",
already in function R_Date() which is [in src/main/platform.c]
currently
    char *R_Date()
    {
	time_t t;
	time(&t);
	return ctime(&t);
    }

How can we drop is this done in the most elegant way?
(without having to allocate a  char[26] ?)


 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 19 10:43:46 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 19 Aug 1999 11:43:46 +0200 (CEST)
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <199908190938.LAA24130@sophie.ethz.ch>
References: <199908190845.KAA24041@sophie.ethz.ch>
 <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
 <199908190938.LAA24130@sophie.ethz.ch>
Message-ID: <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

MM> Between R 0.63.2 and 0.64, the behavior of 
MM> date()
MM> has been changed in order to become platform independent.
MM> It now uses POSIX calls, basically

MM> time_t t;
MM> time(&t);
MM> return ctime(&t);


MM> This currently returns (for me on Sun SPARC Solaris)

>>>> date()
MM> [1] "Thu Aug 19 10:36:28 1999\n"

MM> where I think the final "\n" is really UNdesired.

FrL> Yes!

> Okay,
> I checked  Lewine (1991) "POSIX Programmer's Guide" :

> POSIX specifies that ctime() has a final "\n" 
> (before the string terminator \0)
> and always length 26 (incl. terminator)

> Hence, we have to drop the final "\n",
> already in function R_Date() which is [in src/main/platform.c]
> currently
>     char *R_Date()
>     {
> 	time_t t;
> 	time(&t);
> 	return ctime(&t);
>     }

> How can we drop is this done in the most elegant way?
> (without having to allocate a  char[26] ?)

Be brutal, do

	date <- function() substring(.Internal(date()), 1, 24)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 19 10:48:08 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 19 Aug 1999 11:48:08 +0200
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at> (message from
 Kurt Hornik on Thu, 19 Aug 1999 11:43:46 +0200 (CEST))
References: <199908190845.KAA24041@sophie.ethz.ch>
 <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
 <199908190938.LAA24130@sophie.ethz.ch> <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at>
Message-ID: <199908190948.LAA24138@sophie.ethz.ch>

>>>>> On Thu, 19 Aug 1999 11:43:46 +0200 (CEST), Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> said:

>>>>> Martin Maechler writes:
>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

    MM> Between R 0.63.2 and 0.64, the behavior of 
    MM> date()
    MM> has been changed in order to become platform independent.
    MM> It now uses POSIX calls, basically

    MM> time_t t;
    MM> time(&t);
    MM> return ctime(&t);


    MM> This currently returns (for me on Sun SPARC Solaris)

    >>>>> date()
    MM> [1] "Thu Aug 19 10:36:28 1999\n"

    MM> where I think the final "\n" is really UNdesired.

    FrL> Yes!

    >> Okay,
    >> I checked  Lewine (1991) "POSIX Programmer's Guide" :

    >> POSIX specifies that ctime() has a final "\n" 
    >> (before the string terminator \0)
    >> and always length 26 (incl. terminator)

    >> Hence, we have to drop the final "\n",
    >> already in function R_Date() which is [in src/main/platform.c]
    >> currently
    >> char *R_Date()
    >> {
    >>   time_t t;
    >>   time(&t);
    >>   return ctime(&t);
    >> }

    >> How can we drop is this done in the most elegant way?
    >> (without having to allocate a  char[26] ?)

    KH> Be brutal, do

    KH> date <- function() substring(.Internal(date()), 1, 24)

Kurt, I said
		"most elegant way"
about 5 lines above..

And also for the C API, we want  R_Date() to be correct.

{{I really wonder that the POSIX people where thinking when they
  appended the "\n";  
  appending afterwards is always much easier than removing....
}}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 19 11:11:09 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 19 Aug 1999 12:11:09 +0200 (CEST)
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <199908190948.LAA24138@sophie.ethz.ch>
References: <199908190845.KAA24041@sophie.ethz.ch>
 <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
 <199908190938.LAA24130@sophie.ethz.ch>
 <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at>
 <199908190948.LAA24138@sophie.ethz.ch>
Message-ID: <14267.55357.387296.720135@fangorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

>>>>> On Thu, 19 Aug 1999 11:43:46 +0200 (CEST), Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> said:
>>>>> Martin Maechler writes:
>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

MM> Between R 0.63.2 and 0.64, the behavior of 
MM> date()
MM> has been changed in order to become platform independent.
MM> It now uses POSIX calls, basically

MM> time_t t;
MM> time(&t);
MM> return ctime(&t);


MM> This currently returns (for me on Sun SPARC Solaris)

>>>>>> date()
MM> [1] "Thu Aug 19 10:36:28 1999\n"

MM> where I think the final "\n" is really UNdesired.

FrL> Yes!

>>> Okay,
>>> I checked  Lewine (1991) "POSIX Programmer's Guide" :

>>> POSIX specifies that ctime() has a final "\n" 
>>> (before the string terminator \0)
>>> and always length 26 (incl. terminator)

>>> Hence, we have to drop the final "\n",
>>> already in function R_Date() which is [in src/main/platform.c]
>>> currently
>>> char *R_Date()
>>> {
>>> time_t t;
>>> time(&t);
>>> return ctime(&t);
>>> }

>>> How can we drop is this done in the most elegant way?
>>> (without having to allocate a  char[26] ?)

KH> Be brutal, do

KH> date <- function() substring(.Internal(date()), 1, 24)

> Kurt, I said
> 		"most elegant way"
> about 5 lines above..

But you did not define `elegant' ... :-)

> And also for the C API, we want  R_Date() to be correct.

Define `correct'.  That would be without the trailing newline?

> {{I really wonder that the POSIX people where thinking when they
>   appended the "\n";  
>   appending afterwards is always much easier than removing....
> }}


Suggestion:

	return strtok(ctime(&t), "\n");

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 19 18:05:23 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Aug 1999 19:05:23 +0200
Subject: date() should not append a final "\n" ?!?
In-Reply-To: Kurt Hornik's message of "Thu, 19 Aug 1999 12:11:09 +0200 (CEST)"
References: <199908190845.KAA24041@sophie.ethz.ch> 	<14267.50386.581977.851244@galadriel.ci.tuwien.ac.at> 	<199908190938.LAA24130@sophie.ethz.ch> 	<14267.53714.885909.438577@fangorn.ci.tuwien.ac.at> 	<199908190948.LAA24138@sophie.ethz.ch> <14267.55357.387
Message-ID: <x2aernsnu4.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> Suggestion:
> 
> 	return strtok(ctime(&t), "\n");

s<-ctime(&t); s[25] = '\0'; return s;

This won't work if s is read-only (which I don't think it is), but
neither will strtok since it pokes a null in the same spot....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 19 18:08:09 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 19 Aug 1999 19:08:09 +0200
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <14267.55357.387296.720135@fangorn.ci.tuwien.ac.at> (message from
 Kurt Hornik on Thu, 19 Aug 1999 12:11:09 +0200 (CEST))
References: <199908190845.KAA24041@sophie.ethz.ch>
 <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
 <199908190938.LAA24130@sophie.ethz.ch>
 <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at>
 <199908190948.LAA24138@sophie.ethz.ch> <14267.55357.387296.720135@fangorn.ci.tuwien.ac.at>
Message-ID: <199908191708.TAA08386@sophie.ethz.ch>

>>>>> On Thu, 19 Aug 1999 12:11:09 +0200 (CEST), Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> said:

>>>>> Martin Maechler writes:
...

    MM> Between R 0.63.2 and 0.64, the behavior of date() has been changed
    MM> in order to become platform independent.  It now uses POSIX calls,
    MM> basically

    MM> time_t t; time(&t); return ctime(&t);


    MM> This currently returns (for me on Sun SPARC Solaris)

    >>>>>>> date()
    MM> [1] "Thu Aug 19 10:36:28 1999\n"

    MM> where I think the final "\n" is really UNdesired.

    FrL> Yes!

    >>>> Okay, I checked Lewine (1991) "POSIX Programmer's Guide" :

    >>>> POSIX specifies that ctime() has a final "\n" (before the string
    >>>> terminator \0) and always length 26 (incl. terminator)

    >>>> Hence, we have to drop the final "\n", already in function
    >>>> R_Date() which is [in src/main/platform.c] currently char
    >>>> *R_Date() { time_t t; time(&t); return ctime(&t); }

    >>>> How can we drop is this done in the most elegant way?  (without
    >>>> having to allocate a char[26] ?)

 <...>

    KH> Suggestion:

    KH> 	return strtok(ctime(&t), "\n");

Thanks Kurt, 
this works (and *is* elegant!);  

I've applied and committed it for 0.65.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Aug 20 13:18:04 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 20 Aug 1999 14:18:04 +0200 (MET DST)
Subject: seg.fault for some illegal .Random.seed (new since 0.64) (PR#253)
Message-ID: <199908201218.OAA26837@pubhealth.ku.dk>


This is already in 0.64, but was okay in 0.63

In R version <= 0.63 :

    > .Random.seed <- c(111,2,3)
    > rnorm(1)
    Warning: Wrong length .Random.seed; forgot initial RNGkind? set to Wichmann-Hill
    [1] -0.4811529
    > .Random.seed
    [1]     0  6968 28861 26054
    > 

Now in 0.65 (pre-release) and both versions of 0.64 :

    > .Random.seed <- c(111,2,3)
    > rnorm(1)

  ----> Segmentation Fault

---
{I know that maybe, I should fix this; however, I don't have time just now,
 and in order not to forget this one...
}
Martin

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.5.1
 arch = sparc
 os = solaris2.5.1
 system = sparc, solaris2.5.1
 status = Under development (unstable)
 status.rev = 0
 major = 0
 minor = 65.0
 year = 1999
 month = August
 day = 20
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sat Aug 21 06:15:04 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sat, 21 Aug 1999 07:15:04 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199908210515.HAA22381@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

* PR# 137 *
Subject: funfits
From: "Alvaro A. Novo" <novo@uiuc.edu>
Date: Tue, 9 Mar 1999 22:24:54 -0600
--Not our problem. Dubious whether a bug at all.

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 61 *
Subject: points(...,  cex = ..)  is pretty wrong...
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 2 Nov 1998 19:15:06 +0100
--Symbols getting decentered when too large cex for X. Still there 22feb99  
* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 123 *
Subject: Text in plot
From: Ennapadam Venkatraman <venkat@biosta.mskcc.org>
Date: Thu, 18 Feb 1999 13:05:37 -0500
--Multiline text not working
* PR# 130 *
Subject: lty=0 -- shouldn't it give an invisible line?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Feb 1999 21:45:43 +0100
--Strange effect on barplot
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 229 *
Subject: dev.print scaling bug?
From: John.Peters@tip.csiro.au (John Peters)
Date: Fri, 16 Jul 1999 12:10:48 +1000 (EST)
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 238 *
Subject: EPS compliance of postscript device: initclip operator
From: David Middleton <dajm@deeq.demon.co.uk>
Date: Tue, 03 Aug 1999 17:51:47 -0300
--initclip is removed. Still need new argument onefile/onepage to ensure one page
--and use %!PS-Adobe-3.0 EPSF-3.0 header

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 207 *
Subject: Lines longer than ~1000 chars truncated at parsing
From: msa@biostat.mgh.harvard.edu
Date: Mon, 7 Jun 1999 22:27:10 +0200 (MET DST)
--Fixed buffer used during input.
--Not fixable without major changes to readline lib.

Directory:  Installation

none

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 239 *
Subject: cbind is not generic as claimed, omits labels where S has them 
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 12:29:58 +0100 (BST)
--Cbind is now generic, still labelling issues. See also PR#240 and PR#241.
* PR# 240 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
--See PR#239
* PR# 241 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 6 Aug 1999 06:52:35 +0100 (BST)
--See PR#239

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 210 *
Subject: definition of R_problem_buf in S.h
From: vogels@ieee.org
Date: Mon, 14 Jun 1999 17:56:04 +0200 (MET DST)
--Same as #185
* PR# 235 *
Subject:  round(numeric(0)) 
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 29 Jul 1999 15:20:21 +0100 (BST)
--Some followup of this on R-devel not sent here.

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

* PR# 121 *
Subject:  model.frame mangles time series 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Thu, 18 Feb 1999 15:47:24 +0100
--Subset in C code + attributes = mess
--Switch to interpreted ("[")

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 222 *
Subject: Use of R-Coda
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Fri, 9 Jul 1999 10:54:16 +0200 
--In Danish (?)  Looks as if PR#246 is the same in English
* PR# 234 *
Subject: R-bugs
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Tue, 27 Jul 1999 13:49:31 +0200
--Looks like PR#222 again, in Danish. See PR#246 for English version
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200
* PR# 249 *
Subject: axis ignores srt/crt
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 16 Aug 1999 15:51:49 -0700 (PDT)
* PR# 250 *
From: Peter Malewski <peter@tu-bs.de>
Date: Tue, 17 Aug 1999 12:21:38 +0200 (CEST)
* PR# 251 *
From: Peter Malewski <peter@tu-bs.de>
Date: Tue, 17 Aug 1999 12:21:45 +0200 (CEST)
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 253 *
Subject: seg.fault for some illegal .Random.seed (new since 0.64)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 20 Aug 1999 14:17:31 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tbmzuotvux@white-star.com  Mon Aug 23 07:24:48 1999
From: tbmzuotvux@white-star.com (tbmzuotvux@white-star.com)
Date: Mon, 23 Aug 1999 08:24:48 +0200 (MET DST)
Subject: For Serious Marketers ONLY                                                   zovbs
Message-ID: <199908230624.IAA22363@stat.math.ethz.ch>

Are you making more money than ever?
Are You getting all the sales that you want?
Is your inbox filled with fresh orders every day?

If you answered YES to all of the above questions, 
then you probably don't need our services.

However, If you answered No to ANY of them, 
then try these questions:

Do You:
Want a Direct Email Service that delivers?
Want access to the best e-mail lists available?
DO YOU NEED? 
Full version Direct Email Software at a discount? 

If you answered YES to ANY of the above questions, 
then try:

Warhorse Promotions....   Discount Direct Email
SIMPLY THE VERY BEST!

We have Contract Mailing, Mailing Software and List 
Management Tools at Discount Prices. We also have 
general internet lists and Biz Opp targeted lists, 
that have been cleaned and verified. 
These lists get 90% plus deliverables. 

For info on any of the above, Call 954 527-7155
and leave your name, phone # and time zone.

Thanx,  Warhorse

********************************************************
***You WILL NOT be removed by calling the above phone #. 
To be removed from future mailings, Click Here 
http://www.spamnomore.com/ This is a global remove list 
which I run my lists against before mailing.

********************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From prechelt@ira.uka.de  Mon Aug 23 19:27:00 1999
From: prechelt@ira.uka.de (prechelt@ira.uka.de)
Date: Mon, 23 Aug 1999 20:27:00 +0200 (MET DST)
Subject: Strange 'Unimplemented feature in rep' error (PR#254)
Message-ID: <199908231827.UAA15353@pubhealth.ku.dk>

I have a large computation that performs various bootstrap resampling
loops over pairs of samples using lapply().
After a few seconds it stops like this

> do.summarize.effects(compute.power=T)
...
Error: Unimplemented feature in rep
> .Traceback
[[1]]
[1] "rep(no, length = length(ans))"

[[2]]
[1] "ifelse(t.howto == \"n\", boot.result, l.meanboot.test(onew.x, onew.y, " "    samples = boot.test.samples, expect = makezero, return.htest = T, "
[3] "    alt = \"t\"))"                                                     

[[3]]
[1] "measure.power(firstset, secondset, t.howto = t.howto, var.equal = var.equal)"

[[4]]
[1] "FUN(X[[i]], ...)"

[[5]]
[1] "lapply(split(X, group), FUN, ...)"

[[6]]
[1] "tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power)"

[[7]]
[1] "as.list(X)"

[[8]]
[1] "lapply(as.list(X), FUN, ...)"

[[9]]
[1] "sapply(tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power), " "    rbind)"                                                                             

[[10]]
[1] "t(sapply(tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power), " "    rbind))"                                                                             

[[11]]
[1] "do.summarize.effects(compute.power = T)"

My problems are the following:

1. I cannot find the line
     rep(no, length = length(ans))
   anywhere in my own code

2. The R source code of 'rep' does not contain the error message
   "unimplemented feature" (I have not checked the .Internal)

3. I've had similar strange errors before and could not find the problem
   in my own code. The problem finally went away after I renamed two
   of the groups in my data such that the factor ordering changed and
   the computations were performed in a different order...
   
4. I've also previously had the effect that my function that reads the data
   using read.table(), which is not part of the above call,
   reproducibly came up with the second column being NULL instead
   of 1451 items as the other colums. A second call to the same function
   reliably came back with the correct result. I am not sure whether
   these problems are related but I think both were not my fault.

Any suggestions where to look for the above problem?
Both my data and my computations are somewhat lengthy so the 
stepwise-stripping-down approach is cumbersome.
The new problem appeared using the same data as in (3) above, but
after some extensions to the code (none of them introducing a new
call to rep()).
The problem does also appear if I use only the small subset of the 
data used in the respective part of the computation that fails.

Thanks in advance for your help

  Lutz

Lutz Prechelt  http://wwwipd.ira.uka.de/~prechelt/   | Whenever you 
Institut f. Programmstrukturen und Datenorganisation | complicate things,
Universitaet Karlsruhe;  D-76128 Karlsruhe;  Germany | they get
(Phone: +49/721/608-4068, FAX: +49/721/608-7343)     | less simple.
>>> Ever had negative research results?  http://wwwipd.ira.uka.de/fnr <<<

--please do not edit the information below--

Version:
 platform = alpha-dec-osf4.0
 arch = alpha
 os = osf4.0
 system = alpha, osf4.0
 status = 
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 8
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 23 21:19:24 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 23 Aug 1999 21:19:24 +0100 (BST)
Subject: Strange 'Unimplemented feature in rep' error (PR#254)
In-Reply-To: <199908231827.UAA15353@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9908232101100.3583-100000@auk.stats>

On Mon, 23 Aug 1999 prechelt@ira.uka.de wrote:

> I have a large computation that performs various bootstrap resampling
> loops over pairs of samples using lapply().
> After a few seconds it stops like this
> 
> > do.summarize.effects(compute.power=T)
> ...
> Error: Unimplemented feature in rep
> > .Traceback

(use traceback(): it is easier to read)

> [[1]]
> [1] "rep(no, length = length(ans))"
> 
> [[2]]
> [1] "ifelse(t.howto == \"n\", boot.result, l.meanboot.test(onew.x, onew.y, " "    samples = boot.test.samples, expect = makezero, return.htest = T, "
> [3] "    alt = \"t\"))"                                                     
> 
> [[3]]
> [1] "measure.power(firstset, secondset, t.howto = t.howto, var.equal = var.equal)"
> 
> [[4]]
> [1] "FUN(X[[i]], ...)"
> 
> [[5]]
> [1] "lapply(split(X, group), FUN, ...)"
> 
> [[6]]
> [1] "tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power)"
> 
> [[7]]
> [1] "as.list(X)"
> 
> [[8]]
> [1] "lapply(as.list(X), FUN, ...)"
> 
> [[9]]
> [1] "sapply(tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power), " "    rbind)"                                                                             
> 
> [[10]]
> [1] "t(sapply(tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power), " "    rbind))"                                                                             
> 
> [[11]]
> [1] "do.summarize.effects(compute.power = T)"
> 
> My problems are the following:
> 
> 1. I cannot find the line
>      rep(no, length = length(ans))
>    anywhere in my own code

Look at the line below in the traceback: it is in ifelse.

> 2. The R source code of 'rep' does not contain the error message
>    "unimplemented feature" (I have not checked the .Internal)

Look in src/main/seq.c. It means that the first arg of rep is an
unimplemented type of SEXP. It is hard to guess what: it checks that it is
a vector or list.

> 3. I've had similar strange errors before and could not find the problem
>    in my own code. The problem finally went away after I renamed two
>    of the groups in my data such that the factor ordering changed and
>    the computations were performed in a different order...

Usually these indicate a problem with something being empty. What exactly
does l.meanboot.test return, under all possible inputs?  Your code is
trying to replicate whatever it does return (omitting NAs), and failing.

In the absence of a post-mortem debugger in R, traceback() is a very useful
tool, worth getting to grips with. I grepped the sources to find the
error message, something I resort to not infrequently.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tian@chico.ma.adfa.edu.au  Tue Aug 24 04:39:23 1999
From: tian@chico.ma.adfa.edu.au (tian@chico.ma.adfa.edu.au)
Date: Tue, 24 Aug 1999 05:39:23 +0200 (MET DST)
Subject: broken link in R FAQ page? (PR#255)
Message-ID: <199908240339.FAA16586@pubhealth.ku.dk>

When clicking "What machines does R run on" 
in the R FAQ page (http://lib.stat.cmu.edu/R/CRAN/doc/FAQ/R-FAQ.html)
what shows on the screen has nothing with the topic.

Is it a broken link?

Tian.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 24 10:43:06 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Aug 1999 11:43:06 +0200
Subject: broken link in R FAQ page? (PR#255)
In-Reply-To: tian@chico.ma.adfa.edu.au's message of "Tue, 24 Aug 1999 05:39:23 +0200 (MET DST)"
References: <199908240339.FAA16586@pubhealth.ku.dk>
Message-ID: <x2iu654iqd.fsf@blueberry.kubism.ku.dk>

tian@chico.ma.adfa.edu.au writes:

> When clicking "What machines does R run on" 
> in the R FAQ page (http://lib.stat.cmu.edu/R/CRAN/doc/FAQ/R-FAQ.html)
> what shows on the screen has nothing with the topic.
> 
> Is it a broken link?
> 
> Tian.

Hardly, it's in the same file... But something funny seems to be up
with HTML links ending in a '?'-mark. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 24 10:46:33 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Aug 1999 11:46:33 +0200
Subject: broken link in R FAQ page? (PR#255)
In-Reply-To: Peter Dalgaard BSA's message of "24 Aug 1999 11:43:06 +0200"
References: <199908240339.FAA16586@pubhealth.ku.dk> <x2iu654iqd.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2hflp4ikm.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > When clicking "What machines does R run on" 
...> 
> Hardly, it's in the same file... But something funny seems to be up
> with HTML links ending in a '?'-mark. 

...which lynx can handle, but Netscape not, apparently.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug 25 08:05:36 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 25 Aug 1999 09:05:36 +0200 (CEST)
Subject: broken link in R FAQ page? (PR#255)
In-Reply-To: <x2iu654iqd.fsf@blueberry.kubism.ku.dk>
References: <199908240339.FAA16586@pubhealth.ku.dk>
 <x2iu654iqd.fsf@blueberry.kubism.ku.dk>
Message-ID: <14275.38336.894809.677851@fangorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> tian@chico.ma.adfa.edu.au writes:
>> When clicking "What machines does R run on" 
>> in the R FAQ page (http://lib.stat.cmu.edu/R/CRAN/doc/FAQ/R-FAQ.html)
>> what shows on the screen has nothing with the topic.
>> 
>> Is it a broken link?
>> 
>> Tian.

> Hardly, it's in the same file... But something funny seems to be up
> with HTML links ending in a '?'-mark.

The HTML files are produced using recent versions of Texinfo's makeinfo
--html.  Karl Berry and I have had some discussions on what HTML output
without explicit info-like node structuring should be like, but we are
not there yet (apparently).  I will turn the `--no-headers' flag off
again when building the html version.

NOTE: in any case, this should not be a bug report on R.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Aug 25 10:00:29 1999
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Wed, 25 Aug 1999 11:00:29 +0200 (MET DST)
Subject: Error in ?text (PR#256)
Message-ID: <199908250900.LAA02396@pubhealth.ku.dk>

Just a minor point, but the adj argument in ?text is described wrongly
(0.64.1).  Perhaps the following might be added to the details.

     Values of 0, 0.5, and 1 specify left/top, middle and right/bottom,
     respectively.  The default is for centred text, ie \code{adj = c(0.5,
     0.5)}.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From weingessel@ci.tuwien.ac.at  Wed Aug 25 11:46:08 1999
From: weingessel@ci.tuwien.ac.at (weingessel@ci.tuwien.ac.at)
Date: Wed, 25 Aug 1999 12:46:08 +0200 (MET DST)
Subject: dimnames names lost when subscripting (PR#257)
Message-ID: <199908251046.MAA03884@pubhealth.ku.dk>

When subscripting an array with dimnames names, these names are lost.

For example:
> a <- array(0,c(2,2,2));
> dimnames(a)<-list(hansi=1:2, pepi=c("a","b"), karli=3:4)
> dimnames(a)
$hansi
[1] "1" "2"

$pepi
[1] "a" "b"

$karli
[1] "3" "4"

BUT

>  dimnames(a[,,1])
[[1]]
[1] "1" "2"

[[2]]
[1] "a" "b"




--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 status.rev = 0
 major = 0
 minor = 65.0
 year = 1999
 month = July
 day = 08
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 25 12:44:44 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 25 Aug 1999 13:44:44 +0200
Subject: Error in ?text (PR#256)
In-Reply-To: <199908250900.LAA02396@pubhealth.ku.dk>
 (J.C.Rougier@durham.ac.uk)
References: <199908250900.LAA02396@pubhealth.ku.dk>
Message-ID: <199908251144.NAA00485@sophie.ethz.ch>

>>>>> On Wed, 25 Aug 1999 11:00 (MET DST), J.C.Rougier@durham.ac.uk said:

    JonR> Just a minor point, but the adj argument in ?text is described
    JonR> wrongly (0.64.1).
What is wrong?
pre-0.65 has

 \arguments{
     ....

   \item{adj}{one or two numeric values which specify the x
     (and optionally y) adjustment of the labels.}

     ....
 }

    JonR> Perhaps the following might be added to the
    JonR> details.

okay, I'm about to add this:

    JonR>      Values of 0, 0.5, and 1 specify left/top, middle and
    JonR> right/bottom, respectively.  The default is for centred text, ie
    JonR> \code{adj = c(0.5, 0.5)}.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From BXC@NOVO.dk  Thu Aug 26 11:09:56 1999
From: BXC@NOVO.dk (BXC@NOVO.dk)
Date: Thu, 26 Aug 1999 12:09:56 +0200 (MET DST)
Subject: Greek letters in outer margins. (PR#258)
Message-ID: <199908261009.MAA13630@pubhealth.ku.dk>

When doing:

par(mfrow=c(2,2),mgp=c(2,1,0),mai=c(1,1,0.3,0.3)/1.5,oma=c(2,2,0,0))

for (i in 1:4) plot(rnorm(200),rnorm(200),ylab=" ",xlab=" ")

mtext(paste(expression(beta-alpha)),outer=T,side=1,line=0.5)
mtext(paste(expression(beta-gamma)),outer=T,side=2,line=0.5)
mtext("beta-alpha",outer=T,side=1,line=0.5)
mtext("beta-gamma",outer=T,side=2,line=0.5)

the greek letters appear in the margins of the last plot
whereas the plain text appear correctly in the outer margins.


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 status.rev = 0
 major = 0
 minor = 64.2
 year = 1999
 month = July
 day = 3
 language = R

Windows NT 4.0 (build 1381) Service Pack 4

Search Path:
 .GlobalEnv, Autoloads, package:base


                      \\\|///
                     \\ - - /
                     (  @ @ )  
+------------------o00o-(_)-o00o----------------------+
| Bendix Carstensen              tel: +45 44 43 87 38 |
| Senior Statistician            SDC: +45 44 43 90 42 |
| Steno Diabetes Center          fax: +45 44 43 82 32 |
| Niels Steensens Vej 2       e-mail: bxc@novo.dk     |
| DK - 2820 Gentofte                                  |
| Denmark                   Ooooo                     |
+------------------ooooO----(   )---------------------+
                   (   )     ) /
                    \ (     (_/
                     \_)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Aug 26 12:44:35 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 26 Aug 1999 13:44:35 +0200 (MET DST)
Subject: Error in ?text (PR#256)
Message-ID: <199908261144.NAA15003@pubhealth.ku.dk>

>>>>> On Thu, 26 Aug 1999 11:45:08 +0100 (BST), Jonathan Rougier <J.C.Rougier@durham.ac.uk> said:

    JonR> Hi Martin,
    JonR> On Wed, 25 Aug 1999, Martin Maechler wrote:

    JonR> Just a minor point, but the adj argument in ?text is described
    JonR> wrongly (0.64.1).
    >> What is wrong?
    >> pre-0.65 has
    >> 
    >> \arguments{
    >> ....
    >> 
    >> \item{adj}{one or two numeric values which specify the x
    >> (and optionally y) adjustment of the labels.}
    >> 
    >> ....
    >> }

    JonR> That's odd, because my ?text has the Arguments:

Well, it's not really odd.
As I said my version is "pre 0.65"  which is very much newer than
0.64.1.

This just means that the documentation for  text has been fixed since the
release of 0.64.1...

Thank you anyway for reporting it!
Martin

    JonR> x, y: numeric vectors of coordinates where the text
    JonR> `labels' should be written.  If the length of `x'
    JonR> and `y' differs, the shorter one is recycled.
 
    JonR> labels: character or expression with the text to be writ-
    JonR> ten.

    JonR> adj: character or expression with the text to be writ-
    JonR> ten.

    JonR> ...: further graphical parameters (from `par'), such as
    JonR> `cex', etc.
 
    JonR> Here's the spec. ...

    JonR> platform   sparc-sun-solaris2.5.1
    JonR> arch       sparc                 
    JonR> os         solaris2.5.1          
    JonR> system     sparc, solaris2.5.1   
    JonR> status                           
    JonR> status.rev 0                     
    JonR> major      0                     
    JonR> minor      64.1                  
    JonR> year       1999                  
    JonR> month      May                   
    JonR> day        8                     
    JonR> language   R                     

    JonR> Cheers, Jonathan.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jnf@pcisys.net  Sat Aug 28 22:23:27 1999
From: jnf@pcisys.net (jnf@pcisys.net)
Date: Sat, 28 Aug 1999 23:23:27 +0200 (MET DST)
Subject: R without X11? (PR#259)
Message-ID: <199908282123.XAA02173@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------DD49957419D60BCA65CC41EE
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
KDE installed but not gnome.  When I ran configure, it correctly
indicated that gnome is not installed.  However when I then ran make, I
received errors complaining that  the include file X11/X.h and similar
are not found.  Is X11 required for R?  If not, how can a work around
this?

I have attached the output of the configure and make commands with more
information.

Thanks for your help.

--

Jack Fenner

  I am life that wills to live in the midst of life that wills to live.
             - Albert Schweitzer, "Out of my Life and Thought"



--------------DD49957419D60BCA65CC41EE
Content-Type: text/plain; charset=us-ascii;
 name="create_R.script"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="create_R.script"

Script started on Sat Aug 28 09:13:36 1999
[root@noname R-0.64.2]# ./configure
loading cache ./config.cache
checking for a BSD compatible install... (cached) /usr/bin/install -c
checking whether ln -s works... (cached) yes
checking for ranlib... (cached) ranlib
checking for bison... no
checking for byacc... no
checking for ar... (cached) ar
checking for latex... (cached) /opt/teTeX/bin/latex
checking for dvips... (cached) /opt/teTeX/bin/dvips
checking for makeindex... (cached) /opt/teTeX/bin/makeindex
checking for unzip... (cached) /usr/bin/unzip
checking for zip... (cached) /usr/bin/zip
checking for perl... (cached) /usr/bin/perl
checking whether perl is perl 5... yes
checking for gcc... (cached) gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... (cached) yes
checking whether gcc accepts -g... (cached) yes
checking for g77... (cached) /usr/bin/g77
checking for underscore after Fortran symbols... yes
checking for sin in -lm... (cached) yes
checking for sin in -lmoto... (cached) no
checking for main in -lncurses... (cached) yes
checking for dlopen in -ldl... (cached) yes
checking for main in -lz... (cached) no
checking for main in -lhdf5... (cached) no
checking for main in -ldxml... (cached) no
checking for main in -lblas... (cached) no
checking for rl_callback_read_char in -lreadline... (cached) no
checking how to run the C preprocessor... (cached) gcc -E
checking for ANSI C header files... (cached) yes
checking for pid_t... (cached) yes
checking for vfork.h... (cached) no
checking for working vfork... (cached) yes
checking for vprintf... (cached) yes
checking for acosh... (cached) yes
checking for asinh... (cached) yes
checking for atanh... (cached) yes
checking for bcopy... (cached) yes
checking for finite... (cached) yes
checking for isfinite... (cached) no
checking for isnan... (cached) yes
checking for matherr... (cached) yes
checking for memcpy... (cached) yes
checking for memmove... (cached) yes
checking for regcomp... (cached) yes
checking for rint... (cached) yes
checking for strcoll... (cached) yes
checking for strtod... (cached) yes
checking for strtol... (cached) yes
checking for system... (cached) yes
checking for times... (cached) yes
checking for sigsetjmp... (cached) no
checking for siglongjmp... (cached) yes
checking for __setfpucw... (cached) no
checking for ANSI C header files... (cached) yes
checking for dl.h... (cached) no
checking for dlfcn.h... (cached) yes
checking for elf.h... (cached) yes
checking for locale.h... (cached) yes
checking for readline/history.h... (cached) no
checking for rpc/xdr.h... (cached) yes
checking for sys/times.h... (cached) yes
checking for time.h... (cached) yes
checking for ieeefp.h... (cached) no
checking for ieee754.h... (cached) yes
checking for unistd.h... (cached) yes
checking for hdf5.h... (cached) no
checking return type of signal handlers... (cached) void
checking for working const... (cached) yes
checking size of long... (cached) 4
checking for xmkmf... (cached) /usr/X11R6/bin/xmkmf
checking how to make shared libraries... done
checking for X... (cached) no
checking for lpr... (cached) lpr
creating ./config.status
creating Makeconf
creating Makefile
creating afm/Makefile
creating demos/Makefile
creating doc/Makefile
creating doc/keyword-test
creating doc/manual/Makefile
creating doc/manual/lib2tex
creating doc/manual/Reference.tex
creating doc/manual/Manual.tex
creating etc/Makefile
creating etc/Makeconf
creating src/Makefile
creating src/appl/Makefile
creating src/include/Makefile
creating src/library/Makefile
creating src/main/Makefile
creating src/nmath/Makefile
creating src/scripts/Makefile
creating src/unix/Makefile
creating src/gnome/Makefile
creating src/library/base/Makefile
creating src/library/profile/Makefile
creating src/library/eda/Makefile
creating src/library/eda/src/Makefile
creating src/library/lqs/Makefile
creating src/library/lqs/src/Makefile
creating src/library/modreg/Makefile
creating src/library/modreg/src/Makefile
creating src/library/mva/Makefile
creating src/library/mva/src/Makefile
creating src/library/stepfun/Makefile
creating src/scripts/COMPILE
creating src/scripts/INSTALL
creating src/scripts/REMOVE
creating src/scripts/R.sh
creating src/scripts/Rdconv
creating src/scripts/Rdindex
creating src/scripts/Rman2Rd
creating src/scripts/SHLIB
creating src/scripts/Sd2Rd
creating src/scripts/build-help
creating src/scripts/fwf2table
creating src/scripts/help.pretty
creating src/scripts/html2dos
creating src/scripts/Rd2contents
creating tests/Makefile
creating tests/Examples/Makefile
creating src/include/Platform.h
src/include/Platform.h is unchanged


R is now configured for i586-unknown-linux

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc -g -O2
  FORTRAN compiler:         g77 -O2
  Gnome support:            no

[root@noname R-0.64.2]# make
make[1]: Entering directory `/home/jack/R-0.64.2/afm'
make[1]: Leaving directory `/home/jack/R-0.64.2/afm'
make[1]: Entering directory `/home/jack/R-0.64.2/demos'
make[1]: Leaving directory `/home/jack/R-0.64.2/demos'
make[1]: Entering directory `/home/jack/R-0.64.2/doc'
make[1]: Leaving directory `/home/jack/R-0.64.2/doc'
make[1]: Entering directory `/home/jack/R-0.64.2/etc'
make[1]: Leaving directory `/home/jack/R-0.64.2/etc'
make[1]: Entering directory `/home/jack/R-0.64.2/src'
make[2]: Entering directory `/home/jack/R-0.64.2/src/include'
make[2]: Leaving directory `/home/jack/R-0.64.2/src/include'
make[2]: Entering directory `/home/jack/R-0.64.2/src/appl'
make[2]: Nothing to be done for `R'.
make[2]: Leaving directory `/home/jack/R-0.64.2/src/appl'
make[2]: Entering directory `/home/jack/R-0.64.2/src/nmath'
make[2]: Nothing to be done for `R'.
make[2]: Leaving directory `/home/jack/R-0.64.2/src/nmath'
make[2]: Entering directory `/home/jack/R-0.64.2/src/unix'
gcc -g -O2  -I../include -I../../src/include  -c dataentry.c
In file included from dataentry.c:24:
dataentry.h:22: X11/X.h: No such file or directory
dataentry.h:23: X11/Xlib.h: No such file or directory
dataentry.h:24: X11/Xutil.h: No such file or directory
dataentry.h:25: X11/keysym.h: No such file or directory
dataentry.h:26: X11/cursorfont.h: No such file or directory
make[2]: *** [dataentry.o] Error 1
make[2]: Leaving directory `/home/jack/R-0.64.2/src/unix'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/home/jack/R-0.64.2/src'
make: *** [R] Error 1
[root@noname R-0.64.2]# exit
exit

Script done on Sat Aug 28 09:14:32 1999

--------------DD49957419D60BCA65CC41EE--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sat Aug 28 23:38:25 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Sat, 28 Aug 1999 15:38:25 -0700 (PDT)
Subject: R without X11? (PR#259)
In-Reply-To: <199908282123.XAA02173@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9908281505420.597-100000@wompom.biostat.washington.edu>

On Sat, 28 Aug 1999 jnf@pcisys.net wrote:
> 
> 
> I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
> KDE installed but not gnome.  When I ran configure, it correctly
> indicated that gnome is not installed.  However when I then ran make, I
> received errors complaining that  the include file X11/X.h and similar
> are not found.  Is X11 required for R?  If not, how can a work around
> this?


X11 does seem to be required for R. Although there is a configure
option --without-x or --with-x=no, it doesn't appear to work.  

However, you do have X11 on your machine if you have KDE, and you
definitely do want to use X11 in R to get graphics.

 You may not have the X11 header files installed -- they should be
somewhere under /usr/X11 or /usr/include/X11.  If the header files aren't
installed then you will need to install them. They will be on your
distribution CD, perhaps in a package called something like x-devel.


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun Aug 29 05:44:18 1999
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Sun, 29 Aug 1999 14:44:18 +1000 (EST)
Subject: Compilation of R under Caldera OpenLinux 2.2
Message-ID: <199908290444.OAA03376@leonard.anu.edu.au>

On Sat, 28 Aug 1999 15:38:25 Thomas Lumley <thomas@biostat.washington.edu>
wrote:

> On Sat, 28 Aug 1999 jnf@pcisys.net wrote:
> > 
> > 
> > I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
> > KDE installed but not gnome.  When I ran configure, it correctly
> > indicated that gnome is not installed.  However when I then ran make, I
> > received errors complaining that  the include file X11/X.h and similar
> > are not found.
...

> However, you do have X11 on your machine if you have KDE, and you
> definitely do want to use X11 in R to get graphics.
> 
>  You may not have the X11 header files installed -- they should be
> somewhere under /usr/X11 or /usr/include/X11.  If the header files aren't
> installed then you will need to install them. They will be on your
> distribution CD, perhaps in a package called something like x-devel.

The needed files are in
  cdrom/Packages/RPMS/XFree86-devel-3.3.3.1-4.i386.rpm
This is also where one finds them under RedHat, except that the
file is XFree86-devel-3.3.3.1-49.i386.rpm and one needs the
path that is relevant to the RedHat distribution.

I have yet to check whether installing this package (as well as
g77-2.91.66-5.i386.rpm, which I installed earlier) is enough to
allow make to run to completion.  
[The XFree86-devel-3.3.3.1-4.i386.rpm on my home CD is corrupt.
Fortunately I have another disk at work, where the file seems
ok.]

Caldera OpenLinux 2.2 seems, aside from these immediate difficulties,
a product that is relatively novice-friendly.  It is a lot more
straightforward than RedHat to install and configure.  So it will
be useful to sort out how to set up R under it.

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun Aug 29 10:38:13 1999
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
Subject: Compiling R under Caldera Open Linux 2.2
Message-ID: <199908290938.TAA07841@leonard.anu.edu.au>

To: jnf@pcisys.net
Subject: Compilation of R under Caldera OpenLinux 2.2

> On Sat, 28 Aug 1999 jnf@pcisys.net wrote:
> > 
> > I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
> > KDE installed but not gnome.  When I ran configure, it correctly
> > indicated that gnome is not installed.  However when I then ran make, I
> > received errors complaining that  the include file X11/X.h and similar
> > are not found.
....
> However, you do have X11 on your machine if you have KDE, and you
> definitely do want to use X11 in R to get graphics.
> 
>  You may not have the X11 header files installed -- they should be
> somewhere under /usr/X11 or /usr/include/X11.  If the header files aren't
> installed then you will need to install them. They will be on your
> distribution CD, perhaps in a package called something like x-devel.

They are in the file Packages/RPMS/XFree86-devel-3.3.3.1-4.i386.rpm

(On the RedHat 6.0 distribution, there is
XFree86-devel-3.3.3.1-49.i386.rpm
which seems to be a later version.)

----------------------------------------------------------------
I have been wrestling with this also.  I had to install g77 from
the distribution CD, then the above rpm.
Having got this in order, I then received extensive output,
terminated by the following (which I have formatted on to
multiple lines):

gcc -export-dynamic -o ../../bin/R.X11 arithmetic.o array.o attrib.o
 bind.o builtin.o character.o coerce.o colors.o complex.o context.o
 cov.o cum.o debug.o devPS.o devPicTeX.o deparse.o deriv.o devices.o
 dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o format.o
 fourier.o gram.o gram-ex.o graphics.o iosupport.o list.o logic.o
 main.o match.o memory.o model.o names.o objects.o optimize.o
 options.o par.o paste.o platform.o plot.o plot3d.o plotmath.o
 print.o printarray.o printvector.o printutils.o random.o relop.o
 saveload.o scan.o seq.o sort.o source.o split.o subassign.o
 subscript.o subset.o summary.o unique.o util.o version.o
 ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE
 -L/usr/X11R6/lib -lX11 -L/usr/lib/gcc-lib/i386-linux/egcs-2.91.66
 -L/usr/i386-linux/lib -lg2c -lm -lg2c: -ldl -lm
 /usr/i386-linux/bin/ld: cannot open -lg2c: No such file or directory
make[3]: *** [../../bin/R.X11] Error 1 make[3]: Leaving directory
`/home/john/BUILD/src/main' make[2]: *** [R] Error 2 make[2]:
Leaving directory `/home/john/BUILD/src/main' make[1]: *** [R] Error
1 make[1]: Leaving directory `/home/john/BUILD/src' make: *** [R]
Error 1 

I have been unable to find anything on the distribution CD that
might answer to the lg2c.  Any clues would be welcome.

These difficulties aside, the Caldera OpenLinux 2.2 distribution
is much more novice-friendly than RedHat 6.0.  Configuration is
much quicker and more straightforward.


John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun Aug 29 10:38:49 1999
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sun, 29 Aug 1999 11:38:49 +0200 (MET DST)
Subject: Compiling R under Caldera Open Linux 2.2 (PR#260)
Message-ID: <199908290938.LAA03259@pubhealth.ku.dk>

To: jnf@pcisys.net
Subject: Compilation of R under Caldera OpenLinux 2.2

> On Sat, 28 Aug 1999 jnf@pcisys.net wrote:
> > 
> > I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
> > KDE installed but not gnome.  When I ran configure, it correctly
> > indicated that gnome is not installed.  However when I then ran make, I
> > received errors complaining that  the include file X11/X.h and similar
> > are not found.
....
> However, you do have X11 on your machine if you have KDE, and you
> definitely do want to use X11 in R to get graphics.
> 
>  You may not have the X11 header files installed -- they should be
> somewhere under /usr/X11 or /usr/include/X11.  If the header files aren't
> installed then you will need to install them. They will be on your
> distribution CD, perhaps in a package called something like x-devel.

They are in the file Packages/RPMS/XFree86-devel-3.3.3.1-4.i386.rpm

(On the RedHat 6.0 distribution, there is
XFree86-devel-3.3.3.1-49.i386.rpm
which seems to be a later version.)

----------------------------------------------------------------
I have been wrestling with this also.  I had to install g77 from
the distribution CD, then the above rpm.
Having got this in order, I then received extensive output,
terminated by the following (which I have formatted on to
multiple lines):

gcc -export-dynamic -o ../../bin/R.X11 arithmetic.o array.o attrib.o
 bind.o builtin.o character.o coerce.o colors.o complex.o context.o
 cov.o cum.o debug.o devPS.o devPicTeX.o deparse.o deriv.o devices.o
 dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o format.o
 fourier.o gram.o gram-ex.o graphics.o iosupport.o list.o logic.o
 main.o match.o memory.o model.o names.o objects.o optimize.o
 options.o par.o paste.o platform.o plot.o plot3d.o plotmath.o
 print.o printarray.o printvector.o printutils.o random.o relop.o
 saveload.o scan.o seq.o sort.o source.o split.o subassign.o
 subscript.o subset.o summary.o unique.o util.o version.o
 ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE
 -L/usr/X11R6/lib -lX11 -L/usr/lib/gcc-lib/i386-linux/egcs-2.91.66
 -L/usr/i386-linux/lib -lg2c -lm -lg2c: -ldl -lm
 /usr/i386-linux/bin/ld: cannot open -lg2c: No such file or directory
make[3]: *** [../../bin/R.X11] Error 1 make[3]: Leaving directory
`/home/john/BUILD/src/main' make[2]: *** [R] Error 2 make[2]:
Leaving directory `/home/john/BUILD/src/main' make[1]: *** [R] Error
1 make[1]: Leaving directory `/home/john/BUILD/src' make: *** [R]
Error 1 

I have been unable to find anything on the distribution CD that
might answer to the lg2c.  Any clues would be welcome.

These difficulties aside, the Caldera OpenLinux 2.2 distribution
is much more novice-friendly than RedHat 6.0.  Configuration is
much quicker and more straightforward.


John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Aug 29 11:59:06 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Aug 1999 12:59:06 +0200
Subject: Compiling R under Caldera Open Linux 2.2 (PR#260)
In-Reply-To: john.maindonald@anu.edu.au's message of "Sun, 29 Aug 1999 11:38:49 +0200 (MET DST)"
References: <199908290938.LAA03259@pubhealth.ku.dk>
Message-ID: <x2emgmua2t.fsf@blueberry.kubism.ku.dk>

john.maindonald@anu.edu.au writes:

>  -L/usr/X11R6/lib -lX11 -L/usr/lib/gcc-lib/i386-linux/egcs-2.91.66
>  -L/usr/i386-linux/lib -lg2c -lm -lg2c: -ldl -lm
>  /usr/i386-linux/bin/ld: cannot open -lg2c: No such file or directory
...
> I have been unable to find anything on the distribution CD that
> might answer to the lg2c.  Any clues would be welcome.

Hmm. Redhat has the g2c stuff in 

/usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/include/g2c.h
/usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/libg2c.a

Generally, the file comes with the EGCS g77 (egcs-g77-1.1.2-12 here).
Try 'locate g2c' and if that fails go through the RPMS on the CD with

rpm -qlp /path/to/RPMS/*.rpm | grep g2c

> These difficulties aside, the Caldera OpenLinux 2.2 distribution
> is much more novice-friendly than RedHat 6.0.  Configuration is
> much quicker and more straightforward.

- except for developers, it would seem....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gautier@lion-ag.de  Mon Aug 30 12:28:54 1999
From: gautier@lion-ag.de (gautier@lion-ag.de)
Date: Mon, 30 Aug 1999 13:28:54 +0200 (MET DST)
Subject: interface w/ emacs (PR#261)
Message-ID: <199908301128.NAA11318@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: 0.65.0
OS: mips SGI-Irix 6.5
Submission from: (NULL) (195.110.4.98)


Using R through emacs with ess5.1.8, I cannot set R workspace (--vsize and
--nsize).

So far I was using R0.64.2 without such a problem. I am aware my bug report is a
bit light,
but just let me know if anything I could do with my R and emacs would be of any
help for\
specifying better what is the bug (if there is a bug...)


To reproduce the problem :
with emacs 20.3.3

C-u M-x R
(when asked the arguments) --nsize whatever --vsize whatever

(check in R what is the workspace)

gc()





Laurent

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 30 13:08:44 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Aug 1999 14:08:44 +0200
Subject: interface w/ emacs (PR#261)
In-Reply-To: gautier@lion-ag.de's message of "Mon, 30 Aug 1999 13:28:54 +0200 (MET DST)"
References: <199908301128.NAA11318@pubhealth.ku.dk>
Message-ID: <x2vh9xjws3.fsf@blueberry.kubism.ku.dk>

gautier@lion-ag.de writes:

> So far I was using R0.64.2 without such a problem. I am aware my bug report is a
> bit light,
> but just let me know if anything I could do with my R and emacs would be of any
> help for\
> specifying better what is the bug (if there is a bug...)

There's a bug alright...

The problem is also displayed when starting from the command line with

 R --no-readline --vsize 10M 

(but not with --no-readline last) 

A passable workaround would seem to be to 'M-x setenv' R_VSIZE and
R_NSIZE before 'M-x R'.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 30 13:25:56 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 30 Aug 1999 13:25:56 +0100 (BST)
Subject: interface w/ emacs (PR#261)
In-Reply-To: <x2vh9xjws3.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9908301322200.23731-100000@auk.stats>

On 30 Aug 1999, Peter Dalgaard BSA wrote:

> gautier@lion-ag.de writes:
> 
> > So far I was using R0.64.2 without such a problem. I am aware my bug report is a
> > bit light,
> > but just let me know if anything I could do with my R and emacs would be of any
> > help for\
> > specifying better what is the bug (if there is a bug...)
> 
> There's a bug alright...

Yes, will commit a patch for R-release shortly

> The problem is also displayed when starting from the command line with
> 
>  R --no-readline --vsize 10M 
> 
> (but not with --no-readline last) 
> 
> A passable workaround would seem to be to 'M-x setenv' R_VSIZE and
> R_NSIZE before 'M-x R'.

It might be easier to use .Renviron to set these.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 30 13:50:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 30 Aug 1999 13:50:47 +0100 (BST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <XFMail.990830135718.awol@xs4all.nl>
Message-ID: <Pine.GSO.4.05.9908301344510.25686-100000@auk.stats>

On Mon, 30 Aug 1999, Alexander Volovics wrote:

> Have just compiled and installed R-65.0 on RH 6.0 with all the latest
> updates for RH and Gnome (including `libglade-0.3-1.i386.rpm' and
> `libglade-devel-0.3-1.i386.rpm' from RH ftp).
> 
> R.X11 works OK.
> 
> But when I try `R --gnome' I get a segmentation fault/core dump
> with the messages:
> 
> Gdk-CRITICAL **: file gdkfont.c: line 174 (gdk_font_id): assertion `font
> != NULL' failed.
> 
> Gdk-CRITICAL **: file gdkfont.c: line 133 (gdk_font_ref): assertion `font
> != NULL' failed.
> 
> .................etc., etc.
> 
> 1) `gdb' shows (for what it is worth):
>    Core was generated by `/usr/local/R65/lib/R/bin/R.gnome'
>    #0  0x4024034d in gtk_text_size_request ()
> 
> 2) I can't find the file `gdkfont.c' anywhere on my system.
>    Should I be able to and if so can anybody tell me which package/library
>    contains `gdkfont.c' ?

(it is in the source for libgdk).

> Is this my stupidity or worth reporting as a bug or already known?

Have you upgraded all the rpms mentioned in the INSTALL? It is possible
I suppose that you have too recent versions, as well as possible that
you have too old ones.  That does work on both my RH6.0 systems, and it
was critical that I upgraded the gtk+ packages; before I did I got similar
problems.

I have moved this to R-devel, as a more appropriate place IMHO.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From awol@xs4all.nl  Mon Aug 30 15:32:08 1999
From: awol@xs4all.nl (Alexander Volovics)
Date: Mon, 30 Aug 1999 16:32:08 +0200 (CEST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <Pine.GSO.4.05.9908301344510.25686-100000@auk.stats>
Message-ID: <XFMail.990830163208.awol@xs4all.nl>


On 30-Aug-99 Prof Brian D Ripley wrote:

>> 2) I can't find the file `gdkfont.c' anywhere on my system.
>>    Should I be able to and if so can anybody tell me which
>>    package/library contains `gdkfont.c' ?
 
> (it is in the source for libgdk).

Thanks for your quick reply.

Libgdk? 
The only packages I know of with gdk/libgdk files
are `gtk+' and `gtk+10' and neither contain `gdkfont.c'.

> Have you upgraded all the rpms mentioned in the INSTALL? It is possible
> I suppose that you have too recent versions, as well as possible that
> you have too old ones.  That does work on both my RH6.0 systems, and it
> was critical that I upgraded the gtk+ packages; before I did I got
> similar problems.

This is what I have:

gnome-libs-1.0.12-1 & gnome-libs-devel-1.0.12-1
gtk+-1.2.3-1 & gtk+-devel-1.2.3-1
gtk+10-1.0.6-5
glib-1.2.3-1 & glib-devel-1.2.3-1
libglade-0.3-1 & libglade-devel-0.3-1
libxml-1.4.0-1 & libxml-devel-1.4.0-1


On 30-Aug-99 Peter Dalgaard wrote:

> Didn't happen for me. Almost identical setup, except that I had a
> libglade straight from 
> ftp://ftp.daa.com.au/pub/james/gnome/
> there's a 0.4 version of libglade as of last Wednesday.

I had already downloaded that one. If nothing else is wrong I will
try that.
 

*************************************
Alexander Volovics
Dept of Methodology & Statistics
Maastricht University, Maastricht, NL
*************************************
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 30 16:12:01 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 30 Aug 1999 16:12:01 +0100 (BST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <XFMail.990830163208.awol@xs4all.nl>
Message-ID: <Pine.GSO.4.05.9908301605150.25844-100000@auk.stats>

On Mon, 30 Aug 1999, Alexander Volovics wrote:

> 
> On 30-Aug-99 Prof Brian D Ripley wrote:
> 
> >> 2) I can't find the file `gdkfont.c' anywhere on my system.
> >>    Should I be able to and if so can anybody tell me which
> >>    package/library contains `gdkfont.c' ?
>  
> > (it is in the source for libgdk).
> 
> Thanks for your quick reply.
> 
> Libgdk? 
> The only packages I know of with gdk/libgdk files
> are `gtk+' and `gtk+10' and neither contain `gdkfont.c'.

No, binary rpms will not contain source files, will they?

> > Have you upgraded all the rpms mentioned in the INSTALL? It is possible
> > I suppose that you have too recent versions, as well as possible that
> > you have too old ones.  That does work on both my RH6.0 systems, and it
> > was critical that I upgraded the gtk+ packages; before I did I got
> > similar problems.
> 
> This is what I have:
> 
> gnome-libs-1.0.12-1 & gnome-libs-devel-1.0.12-1
> gtk+-1.2.3-1 & gtk+-devel-1.2.3-1
> gtk+10-1.0.6-5
> glib-1.2.3-1 & glib-devel-1.2.3-1
> libglade-0.3-1 & libglade-devel-0.3-1
> libxml-1.4.0-1 & libxml-devel-1.4.0-1

That's a later gnome-libs than I have.

> On 30-Aug-99 Peter Dalgaard wrote:
> 
> > Didn't happen for me. Almost identical setup, except that I had a
> > libglade straight from 
> > ftp://ftp.daa.com.au/pub/james/gnome/
> > there's a 0.4 version of libglade as of last Wednesday.
> 
> I had already downloaded that one. If nothing else is wrong I will
> try that.

libglade is not actually used in 0.65.0, I believe. I was using the
libglade-0.3 straight from the source.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 30 16:16:23 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Aug 1999 17:16:23 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Mon, 30 Aug 1999 16:32:08 +0200 (CEST)"
References: <XFMail.990830163208.awol@xs4all.nl>
Message-ID: <x2ogfpjo3c.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> Libgdk? 
> The only packages I know of with gdk/libgdk files
> are `gtk+' and `gtk+10' and neither contain `gdkfont.c'.

Try 'nm /usr/lib/libgdk.a | grep font' and I think you will see the light...

> > Have you upgraded all the rpms mentioned in the INSTALL? It is possible
> > I suppose that you have too recent versions, as well as possible that
> > you have too old ones.  That does work on both my RH6.0 systems, and it
> > was critical that I upgraded the gtk+ packages; before I did I got
> > similar problems.
> 
> This is what I have:
> 
> gnome-libs-1.0.12-1 & gnome-libs-devel-1.0.12-1
> gtk+-1.2.3-1 & gtk+-devel-1.2.3-1
> gtk+10-1.0.6-5
> glib-1.2.3-1 & glib-devel-1.2.3-1
> libglade-0.3-1 & libglade-devel-0.3-1
> libxml-1.4.0-1 & libxml-devel-1.4.0-1

Builds and runs (i.e. doesn't crash at startup and runs
demo(graphics)) for me with

gnome-libs-1.0.11-1
gnome-libs-devel-1.0.11-1
gtk+-1.2.3-1
gtk+-1.2.3-1
gtk+10-1.0.6-5
glib-1.2.3-1
glib-devel-1.2.3-1
libglade-0.4-SNAP
libglade-devel-0.4-SNAP
libxml-1.4.0-1
libxml-devel-1.4.0-1
libxml10-1.0.0-1

I'd say libglade is the culprit...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From awol@xs4all.nl  Tue Aug 31 10:46:27 1999
From: awol@xs4all.nl (Alexander Volovics)
Date: Tue, 31 Aug 1999 11:46:27 +0200 (CEST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
Message-ID: <XFMail.990831114627.awol@xs4all.nl>

On 30-Aug-99 I wrote: 

>> Libgdk? 
>> The only packages I know of with gdk/libgdk files
>> are `gtk+' and `gtk+10' and neither contain `gdkfont.c'.

To which Prof Brian D Ripley and Peter Dalgaard replied:

> No, binary rpms will not contain source files, will they?

> Try 'nm /usr/lib/libgdk.a | grep font' and I think you will see the
> light...

I (just barely, as a non programmer) know the differences between
foo.c, foo.o, foo.h, foo.a files but I got carried away (non thinkingly)
by the error messages:

  Gdk-CRITICAL **: file gdkfont.c: line 174 (gdk_font_id): assertion
  `font != NULL' failed.

However what has `gdkfont.c' got to do with it in THIS context?

Further I wrote:

>> This is what I have:
>> gnome-libs-1.0.12-1 & gnome-libs-devel-1.0.12-1
>> gtk+-1.2.3-1 & gtk+-devel-1.2.3-1
>> gtk+10-1.0.6-5
>> glib-1.2.3-1 & glib-devel-1.2.3-1
>> libglade-0.3-1 & libglade-devel-0.3-1
>> libxml-1.4.0-1 & libxml-devel-1.4.0-1

To which Prof Brian D Ripley and Peter Dalgaard replied:

> That's a later gnome-libs than I have.
 
> libglade-0.4-SNAP
> libglade-devel-0.4-SNAP
> I'd say libglade is the culprit...

I have just made the libglade-0.4-SNAP and libglade-devel-0.4-SNAP rpm's
and recompiled R-0.65.0. The same thing happens with `R --gnome', namely:
Segmentation fault (core dumped), with the same error messages.

So the culprit is not libglade but maybe `gnome-libs-1.0.12-1' given that
you both have an earlier gnome-libs. Or maybe even something else.

I am not going to pursue this further as it takes too much time. I was just
curious how the R gnome interface had progressed.

Thank you both very much for taking the time to respond.

Should I report it as a bug or is it not worth it given the
`moving target' status of the gnome libs and the `work in progress'
status of the R gnome interface?


*************************************
Alexander Volovics
Dept of Methodology & Statistics
Maastricht University, Maastricht, NL
*************************************
  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 11:03:28 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 12:03:28 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 11:46:27 +0200 (CEST)"
References: <XFMail.990831114627.awol@xs4all.nl>
Message-ID: <x2671w9si7.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> Should I report it as a bug or is it not worth it given the
> `moving target' status of the gnome libs and the `work in progress'
> status of the R gnome interface?

Probably the latter. A note to R-devel should suffice to get the
immediate attention. When we get around to working through the bug
repository, the world may look completely different. 

One thing, btw. What happens if you run

bin/R -d gdb
(gdb) run --gnome
<<crash>>
(gdb) bt
<<stack trace telling us what was the call>>
(gdb) up
<<possibly repeat until inside R>>
(gdb) l

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Tue Aug 31 13:47:23 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 31 Aug 1999 05:47:23 -0700
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 11:46:27 +0200 (CEST)"
References: <XFMail.990831114627.awol@xs4all.nl>
Message-ID: <87pv042k2s.fsf@alpha.cfas.washington.edu>


>>>>> "AV" == Alexander Volovics <awol@xs4all.nl> writes:

    AV> I (just barely, as a non programmer) know the differences
    AV> between foo.c, foo.o, foo.h, foo.a files but I got carried
    AV> away (non thinkingly) by the error messages:

    AV>   Gdk-CRITICAL **: file gdkfont.c: line 174 (gdk_font_id):
    AV>   assertion `font != NULL' failed.

    AV> However what has `gdkfont.c' got to do with it in THIS
    AV> context?

This says that it couldn't find a font it was looking for.  

Gnome is pretty half-hazard.  It's nice when it works, but can't be
trusted -- for instance, out of 6 identically configured Debian
machines, I can run gnome-session on startup on 4, but I _always_ get
name-service errors (with fatal halts) on the other 2.    (Debian's
slightly behind, but problem and bug reports on the Gnome list are
still a bit too often for my liking).

Even though I'm using it as my default GUI, I'd trust gnome about as
far as I can throw it (the bits, not the machines :-)...  It's still
somewhat unstable.

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From awol@xs4all.nl  Tue Aug 31 14:03:06 1999
From: awol@xs4all.nl (Alexander Volovics)
Date: Tue, 31 Aug 1999 15:03:06 +0200 (CEST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <x2671w9si7.fsf@blueberry.kubism.ku.dk>
Message-ID: <XFMail.990831150306.awol@xs4all.nl>


On 31-Aug-99 Peter Dalgaard BSA wrote:

> One thing, btw. What happens if you run
> 
> bin/R -d gdb
> (gdb) run --gnome
> <<crash>>
> (gdb) bt
> <<stack trace telling us what was the call>>
> (gdb) up
> <<possibly repeat until inside R>>
> (gdb) l


This does not work.

`R -d gdb' opens in gdb allright but then you get:
(gdb) run --gnome
Starting program: /usr/local/R65/lib/R/bin/R.X11 --gnome
WARNING: unknown option --gnome

I have not found a way to start R.gnome with `-d gdb' yet.


*************************************
Alexander Volovics
Dept of Methodology & Statistics
Maastricht University, Maastricht, NL
*************************************
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 31 14:42:48 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 31 Aug 1999 15:42:48 +0200
Subject: Suggestion for  qqplot() improvement
In-Reply-To: <199908311257.OAA00978@erna-w.ethz.ch> (message from Werner
 Stahel on Tue, 31 Aug 1999 14:57:21 +0200)
References: <199908311257.OAA00978@erna-w.ethz.ch>
Message-ID: <199908311342.PAA01425@sophie.ethz.ch>

>>>>> On Tue, 31 Aug 1999 14:57, Werner Stahel <stahel@stat.math.ethz.ch> said:

    WSt> Here is a suggestion.  It seems that qqplots, comparing a sample
    WSt> to a distribution other than the normal, are not explicitly
    WSt> available in S or R. I found

(in S-plus / Trellis it is, see below)

    WSt>	   qqplot(y, rt(300, df = 5))

    WSt> as an example in the help file to  qqplot .
    WSt> This is not very sensible. 

(it only tried to show that you can QQ-plot two datasets 
 of *different* length, rather than anything else)

    WSt> I would prefer

    WSt>   n <- length(y)
    WSt>   qqplot(qt((1:n)/(n+1), df=5), y, xlab='quantiles', ylab='data')

yes, for comparison with a theoretical distribution.

Maybe even
      qqplot(qt(ppoints(n), df=5), y, 
	     xlab='quantiles of t(* ,df=5)', ylab='data')

    WSt> and this could be shortened to

    WSt>   qqplot(y, distribution='t', df=5)

    WSt> with an easy extension of the function.

I found:

   Trellis in S-plus has
	    qqmath(formula, distribution = qnorm, f.value = ppoints, ...),
   for your example
        qqmath( ~ y, distribution = function(p) qt(p, df=5), ...)

which is slightly more general (also works with panels, banking to 45
deg,..) but quite a bit more complicated to use for non-sophisticated users.

What should we do / would we want for R?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 15:00:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 16:00:55 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 15:03:06 +0200 (CEST)"
References: <XFMail.990831150306.awol@xs4all.nl>
Message-ID: <x21zck9hig.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> On 31-Aug-99 Peter Dalgaard BSA wrote:
> 
> > One thing, btw. What happens if you run
> > 
> > bin/R -d gdb
> > (gdb) run --gnome
> > <<crash>>
> > (gdb) bt
> > <<stack trace telling us what was the call>>
> > (gdb) up
> > <<possibly repeat until inside R>>
> > (gdb) l
> 
> 
> This does not work.
> 
> `R -d gdb' opens in gdb allright but then you get:
> (gdb) run --gnome
> Starting program: /usr/local/R65/lib/R/bin/R.X11 --gnome
> WARNING: unknown option --gnome

D**n. I forgot that --gnome is processed by the startup script, not the
binary. Sorry.

> I have not found a way to start R.gnome with `-d gdb' yet.

R --gnome -d gdb 

seems to work.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 15:56:48 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 16:56:48 +0200
Subject: Suggestion for  qqplot() improvement
In-Reply-To: Martin Maechler's message of "Tue, 31 Aug 1999 15:42:48 +0200"
References: <199908311257.OAA00978@erna-w.ethz.ch> <199908311342.PAA01425@sophie.ethz.ch>
Message-ID: <x2zoz880cv.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> Maybe even
>       qqplot(qt(ppoints(n), df=5), y, 
> 	     xlab='quantiles of t(* ,df=5)', ylab='data')
> 
>     WSt> and this could be shortened to
> 
>     WSt>   qqplot(y, distribution='t', df=5)
> 
>     WSt> with an easy extension of the function.
> 
> I found:
> 
>    Trellis in S-plus has
> 	    qqmath(formula, distribution = qnorm, f.value = ppoints, ...),
>    for your example
>         qqmath( ~ y, distribution = function(p) qt(p, df=5), ...)
> 
> which is slightly more general (also works with panels, banking to 45
> deg,..) but quite a bit more complicated to use for non-sophisticated users.
> 
> What should we do / would we want for R?

Lets see. "qqplot(qt, y, df=5)" would be tempting save for the
complexities of separating parts of ... intended for the quantile
function from those intended for the plotting. 


We could "easily" have qqplot(y, distrib=qt(p,df=5)), here's a
simplified variant:
                       
f <- function(y,distrib){
    p <- ppoints(length(y))
    x <- eval(eval(substitute(substitute(distrib)),list(p=p)))
    qqplot(x,y,
        xlab=deparse(substitute(distrib)),
        ylab=deparse(substitute(y)))
}

f(rnorm(100), distrib=qt(p,df=2))

The form, e.g., qqplot(qt, y, df=5, lty=3) may not be *all* that hard
to set up. It's just necessary to manipulate the argument list,
somewhat along the lines of

g <- function(p,...){
    l<-list(...)
    m<-match(names(l), names(formals(qt)))
    do.call("qt", c(list(p=p), l[!is.na(m)]))    
}

which is just a long-winded version of qt, except that it strips off
unused arguments. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 31 16:12:39 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 31 Aug 1999 16:12:39 +0100 (BST)
Subject: Suggestion for  qqplot() improvement
In-Reply-To: <x2zoz880cv.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9908311605490.7922-100000@auk.stats>

On 31 Aug 1999, Peter Dalgaard BSA wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > Maybe even
> >       qqplot(qt(ppoints(n), df=5), y, 
> > 	     xlab='quantiles of t(* ,df=5)', ylab='data')
> > 
> >     WSt> and this could be shortened to
> > 
> >     WSt>   qqplot(y, distribution='t', df=5)
> > 
> >     WSt> with an easy extension of the function.
> > 
> > I found:
> > 
> >    Trellis in S-plus has
> > 	    qqmath(formula, distribution = qnorm, f.value = ppoints, ...),
> >    for your example
> >         qqmath( ~ y, distribution = function(p) qt(p, df=5), ...)
> > 
> > which is slightly more general (also works with panels, banking to 45
> > deg,..) but quite a bit more complicated to use for non-sophisticated users.
> > 
> > What should we do / would we want for R?
> 
> Lets see. "qqplot(qt, y, df=5)" would be tempting save for the
> complexities of separating parts of ... intended for the quantile
> function from those intended for the plotting. 
> 
> 
> We could "easily" have qqplot(y, distrib=qt(p,df=5)), here's a
> simplified variant:
>                        
> f <- function(y,distrib){
>     p <- ppoints(length(y))
>     x <- eval(eval(substitute(substitute(distrib)),list(p=p)))
>     qqplot(x,y,
>         xlab=deparse(substitute(distrib)),
>         ylab=deparse(substitute(y)))
> }
> 
> f(rnorm(100), distrib=qt(p,df=2))
> 
> The form, e.g., qqplot(qt, y, df=5, lty=3) may not be *all* that hard
> to set up. It's just necessary to manipulate the argument list,
> somewhat along the lines of
> 
> g <- function(p,...){
>     l<-list(...)
>     m<-match(names(l), names(formals(qt)))
>     do.call("qt", c(list(p=p), l[!is.na(m)]))    
> }
> 
> which is just a long-winded version of qt, except that it strips off
> unused arguments. 

If it helps, surf.gls in my spatial library does almost precisely that in
the parent, that is matches up those arguments that apply to the (here)
distrib argument and packages a function to do the work. (It is a bit more
than is needed here, as that needs to return the function for future use or
(once) to pass to call_S.)  So I don't think it is hard (the second time).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 16:15:47 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 17:15:47 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 16:40:30 +0200 (CEST)"
References: <XFMail.990831164030.awol@xs4all.nl>
Message-ID: <x2yaes7zh8.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> Program received signal SIGSEGV, Segmentation fault.
> 0x4024034d in gtk_text_size_request ()
> (gdb) bt
> #0  0x4024034d in gtk_text_size_request ()
> #1  0x40266695 in gtk_marshal_NONE__POINTER ()
> #2  0x4022d2ab in gtk_signal_real_emit ()
> #3  0x4022b6c0 in gtk_signal_emit ()
> #4  0x4025d298 in gtk_widget_size_request ()
> #5  0x4023ca3a in gtk_table_size_request_init ()
> #6  0x4023c569 in gtk_table_size_request ()
> #7  0x40266695 in gtk_marshal_NONE__POINTER ()
> #8  0x4022d2ab in gtk_signal_real_emit ()
> #9  0x4022b6c0 in gtk_signal_emit ()
> #10 0x4025d298 in gtk_widget_size_request ()
> #11 0x400af7d0 in gnome_dock_size_request ()
> #12 0x40266695 in gtk_marshal_NONE__POINTER ()
> #13 0x4022d2ab in gtk_signal_real_emit ()
> #14 0x4022b6c0 in gtk_signal_emit ()
> #15 0x4025d298 in gtk_widget_size_request ()
> #16 0x4025366e in gtk_vbox_size_request ()
> #17 0x40266695 in gtk_marshal_NONE__POINTER ()
> #18 0x4022d2ab in gtk_signal_real_emit ()
> #19 0x4022b6c0 in gtk_signal_emit ()
> #20 0x4025d298 in gtk_widget_size_request ()
> #21 0x40264c77 in gtk_window_size_request ()
> #22 0x40266695 in gtk_marshal_NONE__POINTER ()
> #23 0x4022d2ab in gtk_signal_real_emit ()
> #24 0x4022b6c0 in gtk_signal_emit ()
> #25 0x4025d298 in gtk_widget_size_request ()
> #26 0x402659fc in gtk_window_move_resize ()
> #27 0x4026591e in gtk_window_check_resize ()
> #28 0x402667eb in gtk_marshal_NONE__NONE ()
> #29 0x4022d428 in gtk_signal_real_emit ()
> #30 0x4022b6c0 in gtk_signal_emit ()
> #31 0x401c5df8 in gtk_container_check_resize ()
> #32 0x40264744 in gtk_window_show ()
> #33 0x4008a7b0 in gnome_app_show ()
> #34 0x402667eb in gtk_marshal_NONE__NONE ()
> #35 0x4022d2ab in gtk_signal_real_emit ()
> #36 0x4022b6c0 in gtk_signal_emit ()
> #37 0x4025b230 in gtk_widget_show ()
> #38 0x401c78d4 in gtk_container_show_all ()
> ---Type <return> to continue, or q <return> to quit---
> #39 0x4025b7d6 in gtk_widget_show_all ()
> #40 0x80cd79b in R_gtk_terminal_new () at terminal.c:112
> #41 0x80c8481 in main (ac=1, av=0xbffffbc4) at system.c:314
> #42 0x4042acb3 in __libc_start_main (main=0x80c831c <main>, argc=1, 
>     argv=0xbffffbc4, init=0x8058934 <_init>, fini=0x810319c <_fini>, 
>     rtld_fini=0x4000a350 <_dl_fini>, stack_end=0xbffffbbc)
>     at ../sysdeps/generic/libc-start.c:78
> (gdb) up
> #1  0x40266695 in gtk_marshal_NONE__POINTER ()
> (gdb) up
> #2  0x4022d2ab in gtk_signal_real_emit ()
> (gdb) up
> #3  0x4022b6c0 in gtk_signal_emit ()
> (gdb) up
....
> #40 0x80cd79b in R_gtk_terminal_new () at terminal.c:112
> 112       gtk_widget_show_all(R_gtk_main_window);
> (gdb) up
> #41 0x80c8481 in main (ac=1, av=0xbffffbc4) at system.c:314
> 314         R_gtk_terminal_new();
> (gdb) up
> #42 0x4042acb3 in __libc_start_main (main=0x80c831c <main>, argc=1, 
>     argv=0xbffffbc4, init=0x8058934 <_init>, fini=0x810319c <_fini>, 
>     rtld_fini=0x4000a350 <_dl_fini>, stack_end=0xbffffbbc)
>     at ../sysdeps/generic/libc-start.c:78
> ../sysdeps/generic/libc-start.c:78: No such file or directory.
> (gdb) up
> Initial frame selected; you cannot go up.
> (gdb) l
> ../sysdeps/generic/libc-start.c:73: No such file or directory.
.
> What is the meaning of `up'. It just goes all the way back to the
> `beginning' and does not `reenter' R ?

It goes back through the list of function calls. This allows you to
inspect variables, etc.

> Does this tell you anything. No core file was produced this way.
> 
> If I have done it wrong please ask again. I have no real understanding
> of how gdb works.

What would interest me is what the content of R_gnome_userprefs.font
if you go up to #40 (in R_gtk_terminal_new () at terminal.c:112). Just
type 

p R_gnome_userprefs.font

if it's NULL, then we might have a lead on the problem. But Lyndon
Drake is the guy who knows his way around the Gnome stuff, not me.

What is in your .gnome/R.gnome file, by the way?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 31 17:24:18 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 31 Aug 1999 17:24:18 +0100 (BST)
Subject: Suggestion for  qqplot() improvement
In-Reply-To: <Pine.GSO.4.05.9908311605490.7922-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.9908311713310.8158-100000@auk.stats>

(Martin Maechler quoting Werner Stahel, I think)

> Maybe even
>       qqplot(qt(ppoints(n), df=5), y, 
> 	     xlab='quantiles of t(* ,df=5)', ylab='data')
> 
>     WSt> and this could be shortened to
> 
>     WSt>   qqplot(y, distribution='t', df=5)
> 
>     WSt> with an easy extension of the function.

Would qqplot(qt, y, df=5) or qqplot("t", y, df=5) with the following do
what you want?  As plot warns about surplus arguments, I have removed them
from the ... in its call.

qqplot <- function (x, y, plot.it = TRUE, xlab = deparse(substitute(x)), 
    ylab = deparse(substitute(y)), ...) 
{
    xlab
    sy <- sort(y)
    leny <- length(sy)
    dots <- list(...)
    if(is.character(x)) x <- get(paste("q", x, sep=""))
    if(is.function(x)) {
        fn <- x
        formals(fn) <- c(formals(fn), "..." = list(NULL))
        sx <- fn(ppoints(leny), ...)
        dots <- dots[!match(names(dots), names(formals(x)), FALSE)]
    } else {    
        sx <- sort(x)
        lenx <- length(sx)
        if (leny < lenx) sx <- approx(1:lenx, sx, n = leny)$y
        if (leny > lenx) sy <- approx(1:leny, sy, n = lenx)$y
    }
    if (plot.it) 
        do.call("plot", c(list(sx, sy, xlab = xlab, ylab = ylab), dots))
    invisible(list(x = sx, y = sy))
}


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 17:48:42 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 18:48:42 +0200
Subject: Suggestion for  qqplot() improvement
In-Reply-To: Prof Brian D Ripley's message of "Tue, 31 Aug 1999 17:24:18 +0100 (BST)"
References: <Pine.GSO.4.05.9908311713310.8158-100000@auk.stats>
Message-ID: <x2vh9v99qt.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

>         formals(fn) <- c(formals(fn), "..." = list(NULL))

This will break if fn already has a "..." argument, will it not? (If
it doesn't, it should...). I'd prefer

  formals(fn)["..."] <- alist(...=)

(And its a good thing that Robert is on that secluded island off of
Gothenburg. This would really make him cringe.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From awol@xs4all.nl  Tue Aug 31 22:21:31 1999
From: awol@xs4all.nl (Alexander Volovics)
Date: Tue, 31 Aug 1999 23:21:31 +0200 (CEST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <x2yaes7zh8.fsf@blueberry.kubism.ku.dk>
Message-ID: <XFMail.990831232131.awol@xs4all.nl>


On 31-Aug-99 Peter Dalgaard BSA wrote:

> What would interest me is what the content of R_gnome_userprefs.font
> if you go up to #40 (in R_gtk_terminal_new () at terminal.c:112). Just
> type 
> p R_gnome_userprefs.font
> if it's NULL, then we might have a lead on the problem. But Lyndon
> Drake is the guy who knows his way around the Gnome stuff, not me.


Here is the result:

#40 0x80cd79b in R_gtk_terminal_new () at terminal.c:112
112       gtk_widget_show_all(R_gtk_main_window);
(gdb) p R_gnome_userprefs.font
$1 = (gchar *) 0x814cbf0 ""


> What is in your .gnome/R.gnome file, by the way?

Here is my R.gnome:

[Placement]
Dock=Toolbar\\0,1,0,0\\Menubar\\0,0,0,0

[Text]
textcolor=rgb:0000/0000/0000
bgcolor=rgb:ffff/ffff/ffff
font=

[Pager]
title_font=-adobe-helvetica-bold-r-normal-*-*-100-*-*-p-*-iso8859-1
title_textcolor=rgb:0000/0000/0000
title_bgcolor=rgb:ffff/ffff/ffff
text_font=-misc-fixed-medium-r-normal-*-*-120-*-*-c-*-iso8859-1
em_font=-misc-fixed-bold-r-normal-*-*-120-*-*-c-*-iso8859-1
text_textcolor=rgb:0000/0000/0000
text_bgcolor=rgb:ffff/ffff/ffff

HA. The solution is often very simple. I should have thought of
looking here myself. Under [Text] there is no entry for font!
Enter a font and R.gnome works.

This means that it would also have worked with libglade-0.3-1.
Is this an ommision in configure/make/make install?

Thanks for taking the time to respond and the suggestions.


*************************************
Alexander Volovics
Dept of Methodology & Statistics
Maastricht University, Maastricht, NL
*************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 22:54:12 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 23:54:12 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 23:21:31 +0200 (CEST)"
References: <XFMail.990831232131.awol@xs4all.nl>
Message-ID: <x2zoz7wr97.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> HA. The solution is often very simple. I should have thought of
> looking here myself. Under [Text] there is no entry for font!
> Enter a font and R.gnome works.
> 
> This means that it would also have worked with libglade-0.3-1.
> Is this an ommision in configure/make/make install?

It's not supposed to happen. Mine certainly got filled in without any
help. Perhaps a default font used to get inserted? With a font entry
like yours, my version also burns to cinders in a flurry of

Gdk-CRITICAL **: file gdkfont.c: line 360 (gdk_char_width): assertion
`font != NULL' failed.

(And as Brian remarked, the libglade seems not to be actually used in
0.65. We just wouldn't tamper any more with the configure program...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.csiro.au  Mon Aug  2 08:50:52 1999
From: Richard.Beare@cmis.csiro.au (Richard Beare)
Date: Mon, 02 Aug 1999 17:50:52 +1000
Subject: Advice interfacing to an imaging library
Message-ID: <37A54DDC.2B830881@cmis.csiro.au>

Hi All,
I've done some work recently making some of our image analysis library
callable from R and Splus. Most of the C image functions use an abstract
data type, and R only sees a pointer to this. All memory allocation is
done by the library. This leads to some interesting problems. I'm
interested in your views about possible solutions.

1) assignment. something like a<-b, where a and b are image pointers
will only copy the pointer, not the image. We'd like to overload the <-
operator to call the library copy routine.

2) garbage collection. It is now easy to lose track of memory, and this
is likely to be significant because images are usually quite big. There
is a delete function in the library, so it is possible to dispose of
images manually, but an automated method would be nice. One option is to
keep a global list of all pointers returned from C function calls,
generate a list of all image class objects visible in R and compare the
two. Any pointers not on the image class list can be disposed. Does
anyone have any other ideas?

All advice welcome.


-- 
Richard Beare
Richard.Beare@cmis.csiro.au
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From naras@stat.stanford.edu  Mon Aug  2 18:27:21 1999
From: naras@stat.stanford.edu (Balasubramanian Narasimhan)
Date: Mon, 02 Aug 1999 10:27:21 -0700 (PDT)
Subject: Advice interfacing to an imaging library
In-Reply-To: Your message of "Mon, 02 Aug 1999 17:50:52 +1000"
 <37A54DDC.2B830881@cmis.csiro.au>
References: <37A54DDC.2B830881@cmis.csiro.au>
Message-ID: <19990802102721C.naras@stat.Stanford.EDU>

>>>>> "Richard" == Richard Beare <Richard.Beare@cmis.csiro.au> writes:

    Richard> 2) garbage collection. It is now easy to lose track of
    Richard> memory, and this is likely to be significant because
    Richard> images are usually quite big. There is a delete function
    Richard> in the library, so it is possible to dispose of images
    Richard> manually, but an automated method would be nice. One
    Richard> option is to keep a global list of all pointers returned
    Richard> from C function calls, generate a list of all image class
    Richard> objects visible in R and compare the two. Any pointers
    Richard> not on the image class list can be disposed. Does anyone
    Richard> have any other ideas?

I'd look to embed a JVM into R and use all the power of Java for image
processing and garbage collection. I've done it with xlispstat but not
with R.
________________________________________________________________
B. Narasimhan                            naras@stat.stanford.edu
                             http://www-stat.stanford.edu/~naras





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Mon Aug  2 18:43:13 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 2 Aug 1999 13:43:13 -0400
Subject: Advice interfacing to an imaging library
Message-ID: <199908021744.TAA02445@stat.math.ethz.ch>


> >>>>> "Richard" == Richard Beare <Richard.Beare@cmis.csiro.au> writes:
> 
>     Richard> 2) garbage collection. It is now easy to lose track of
>     Richard> memory, and this is likely to be significant because
>     Richard> images are usually quite big. There is a delete function
>     Richard> in the library, so it is possible to dispose of images
>     Richard> manually, but an automated method would be nice. One
>     Richard> option is to keep a global list of all pointers returned
>     Richard> from C function calls, generate a list of all image class
>     Richard> objects visible in R and compare the two. Any pointers
>     Richard> not on the image class list can be disposed. Does anyone
>     Richard> have any other ideas?
> 
> I'd look to embed a JVM into R and use all the power of Java for image
> processing and garbage collection. I've done it with xlispstat but not
> with R.
> ________________________________________________________________
> B. Narasimhan                            naras@stat.stanford.edu


My guess is that that would involve rewriting the existing library
written in C. Similarly, embedding the JVM still requires some
communication with the Java classes, etc. and conversion between the
R and Java data structures. This is where the meat of the interface lies.

However, on a more positive note, the embedding of the JVM into R and
S4/Splus5, John Chambers and I have been playing with, is getting very
close to being finished. I have been putting some of the final details
to it over the weekend. So the dynamic communication with Java
(i.e. dynamic method lookup and invocation) would not be that hard.

D.


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dajm@deeq.demon.co.uk  Tue Aug  3 23:22:50 1999
From: dajm@deeq.demon.co.uk (dajm@deeq.demon.co.uk)
Date: Wed, 4 Aug 1999 00:22:50 +0200 (MET DST)
Subject: EPS compliance of postscript device: initclip operator (PR#238)
Message-ID: <199908032222.AAA13347@pubhealth.ku.dk>


Dear R-bugs

The help for the R postscript() device states:

        The postscript produced by R is EPS (Encapsulated
        PostScript) compatible, and can be included into other
        documents...

However, postscript produced by R uses the "initclip" operator to
define the operator "cl":

	/cl  { initclip newpath 3 index 3 index moveto 1 index
		4 -1 roll lineto  exch 1 index lineto lineto
		closepath clip newpath } def

initclip is one of the postscript operators that the EPS file specification
(at http://partners.adobe.com/asn/developer/PDFS/5002.EPSF_Spec_v3.0.pdf -
see page 6) states should not be used in EPS files.

For true EPS compliance the R postscript device should not therefore use
initclip.

Under S-PLUS (v3.3 Solaris is the latest I have experience of, Brian Ripley
notes the same is NOT true under S-PLUS for windows) the onefile=T argument to
the postscript device causes the output file to be structured as an EPS file.
It would be desirable if R supported a similar option.  As under S-PLUS, it
could
probably be left to the user to ensure that only a single page of graphics
is output
to a file intended to be EPS compliant (or an error could be returned if
starting
a second page could be detected with ease).

Thanks

David Middleton
dajm@deeq.demon.co.uk

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 8
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@stat.auckland.ac.nz  Tue Aug  3 22:32:20 1999
From: lyndon@stat.auckland.ac.nz (Lyndon Drake)
Date: Wed, 4 Aug 1999 09:32:20 +1200
Subject: Memory profiling/benchmarking
In-Reply-To: <379DC75D.DFFAFBC6@bank-banque-canada.ca>; from Paul Gilbert on Tue, Jul 27, 1999 at 10:51:10AM -0400
References: <19990727171758.A2622@stat1.stat.auckland.ac.nz> <379DC75D.DFFAFBC6@bank-banque-canada.ca>
Message-ID: <19990804093220.A14758@stat1.stat.auckland.ac.nz>

On Tue, Jul 27, 1999 at 10:51:10AM -0400, Paul Gilbert wrote:
> Lyndon
> 
> There are several test scripts with my DSE library available at
> <http://www.bank-banque-canada.ca/pgilbert>. (Please don't make the mistake of
> trying to install the version on CRAN - it installs with  R 0.61 but there have
> been a lot of changes to R since then.)
> 

The latest DSE tar.gz file seems to be corrupt.  The file I am looking at is
ftp://www.bank-banque-canada.ca/pub/pgilbert/dse/dse.1999.07alphaR.tar.gz

I get an unexpected EOF from tar.

Thanks for the info, 
Lyndon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.csiro.au  Wed Aug  4 00:00:28 1999
From: Richard.Beare@cmis.csiro.au (Richard Beare)
Date: Wed, 04 Aug 1999 09:00:28 +1000
Subject: R internals
Message-ID: <37A7748C.AC3E268D@cmis.csiro.au>

Hi,
I'm interested in hooking into the garbage collection mechanisms in R to
enable R to manage the garbage collection in an imaging package that
does its own memory allocation. This would require R to call a
destructor when it disposes of objects of a certain class. Is this a
practical approach? I've been looking for documentation about the R
internals, but haven't found any yet - where should I be looking.

Thanks, any advice is welcome.
-- 
Richard Beare
Richard.Beare@cmis.csiro.au
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  5 12:28:05 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 5 Aug 1999 13:28:05 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908051128.NAA28801@pubhealth.ku.dk>

(1) ?cbind claims

     The generic functions `cbind' and `rbind' take a
     sequence of vector and/or matrix arguments and combine
     them as the columns or rows, respectively, of a matrix.

Note:

     The method dispatching is not done via `UseMethod(..)',
     but by C-internal dispatching.  Therefore, there's no
     need for, e.g., `rbind.default'.

but my cbind.ts does not get called, and try the following:

cbind.my <- function(...)
{
    stop("used cbind.my")
}
a <- b <- 1:3
cbind(a, b)
class(a) <- "my"
cbind(a, b)
     [,1] [,2]
[1,]    1    1
[2,]    2    2
[3,]    3    3

This is incorrect.

(2) S would give 
     a b 
[1,] 1 1
[2,] 2 2
[3,] 3 3
(and stop on the second cbind call).

and this discrepancy is hardly an improvement!

Could someone who can understands the c/rbind code please sort this out.
(It looks pretty arcane to me, and surely should not be special-casing data
frames.)

I used both of 

> R.version
           _                   
platform   sparc-sun-solaris2.6
arch       sparc               
os         solaris2.6          
system     sparc, solaris2.6   
status                         
status.rev 0                   
major      0                   
minor      64.2                
year       1999                
month      July                
day        3                   
language   R                   

> R.version
           _                           
platform   sparc-sun-solaris2.6        
arch       sparc                       
os         solaris2.6                  
system     sparc, solaris2.6           
status     Under development (unstable)
status.rev 0                           
major      0                           
minor      65.0                        
year       1999                        
month      August                      
day        05                          
language   R                           



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  5 14:57:27 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Aug 1999 15:57:27 +0200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Thu, 5 Aug 1999 13:28:05 +0200 (MET DST)"
References: <199908051128.NAA28801@pubhealth.ku.dk>
Message-ID: <x2lnbqgwjc.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> (1) ?cbind claims
> 
>      The generic functions `cbind' and `rbind' take a
>      sequence of vector and/or matrix arguments and combine
>      them as the columns or rows, respectively, of a matrix.
> 
> Note:
> 
>      The method dispatching is not done via `UseMethod(..)',
>      but by C-internal dispatching.  Therefore, there's no
>      need for, e.g., `rbind.default'.
> 
> but my cbind.ts does not get called, and try the following:
> 
> cbind.my <- function(...)
> {
>     stop("used cbind.my")
> }
> a <- b <- 1:3
> cbind(a, b)
> class(a) <- "my"
> cbind(a, b)
>      [,1] [,2]
> [1,]    1    1
> [2,]    2    2
> [3,]    3    3
> 
> This is incorrect.
> 
> (2) S would give 
>      a b 
> [1,] 1 1
> [2,] 2 2
> [3,] 3 3
> (and stop on the second cbind call).
> 
> and this discrepancy is hardly an improvement!
> 
> Could someone who can understands the c/rbind code please sort this out.
> (It looks pretty arcane to me, and surely should not be special-casing data
> frames.)

Hmm. 

(1) The docs are clearly wrong (or perhaps rather, wishful thinking)

(2) Cbind should be generic as in Splus

(3) For the labels, one needs essentially to implement deparse.level
    or face the horrors of
    eval(substitute(cbind(a,b,deparse.level=2),list(a=rnorm(10),b=rnorm(10))))

(4) The dataframe special casing seems to be an evasion. The sticky
    bit is that one needs to dispatch on *any* argument. For Splus (3.4)
    compatibility, one has to check each argument for its class
    method, and if all arguments agree - in the sense that all the
    arguments that have class methods must have the same one, dispatch
    to that method. If they disagree, print error message and try
    default method. 

    Whoever wrote the code seems to have decided that things would be
    easier if one assumed that the only method for cbind was
    cbind.data.frame...

    Note that by the above logic, if you make a cbind.ts, you can't
    cbind a time series to a data frame!
 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  5 17:17:14 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 5 Aug 1999 18:17:14 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#240)
Message-ID: <199908051617.SAA02592@pubhealth.ku.dk>

On 5 Aug 1999, Peter Dalgaard BSA wrote:

> (1) The docs are clearly wrong (or perhaps rather, wishful thinking)

Sorry, but always the docs are right and the implementation wrong.
That's an axiom of professional computer programming (so I am told
by several ex-professional computer programmers.)

> (2) Cbind should be generic as in Splus
> 
> (3) For the labels, one needs essentially to implement deparse.level
>     or face the horrors of
>     eval(substitute(cbind(a,b,deparse.level=2),list(a=rnorm(10),b=rnorm(10))))

Really? Or try a bit less hard?  Getting the common cases right is not
too hard -- ts.union etc seem normally to be about right, and they have
simple code.

> (4) The dataframe special casing seems to be an evasion. The sticky
>     bit is that one needs to dispatch on *any* argument. For Splus (3.4)
>     compatibility, one has to check each argument for its class
>     method, and if all arguments agree - in the sense that all the
>     arguments that have class methods must have the same one, dispatch
>     to that method. If they disagree, print error message and try
>     default method. 
> 
>     Whoever wrote the code seems to have decided that things would be
>     easier if one assumed that the only method for cbind was
>     cbind.data.frame...
> 
>     Note that by the above logic, if you make a cbind.ts, you can't
>     cbind a time series to a data frame!

That's OK, as I can coerce a data frame to a ts, but in general I want to
cbind ts objects with non-trivial time bases.

I don't think documenting what we have is a good way out here....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  5 17:19:08 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
Subject: cbind is not generic as claimed, omits labels where S has them
 (PR#239)
In-Reply-To: <x2lnbqgwjc.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9908051705140.2936-100000@auk.stats>

On 5 Aug 1999, Peter Dalgaard BSA wrote:

> (1) The docs are clearly wrong (or perhaps rather, wishful thinking)

Sorry, but always the docs are right and the implementation wrong.
That's an axiom of professional computer programming (so I am told
by several ex-professional computer programmers.)

> (2) Cbind should be generic as in Splus
> 
> (3) For the labels, one needs essentially to implement deparse.level
>     or face the horrors of
>     eval(substitute(cbind(a,b,deparse.level=2),list(a=rnorm(10),b=rnorm(10))))

Really? Or try a bit less hard?  Getting the common cases right is not
too hard -- ts.union etc seem normally to be about right, and they have
simple code.

> (4) The dataframe special casing seems to be an evasion. The sticky
>     bit is that one needs to dispatch on *any* argument. For Splus (3.4)
>     compatibility, one has to check each argument for its class
>     method, and if all arguments agree - in the sense that all the
>     arguments that have class methods must have the same one, dispatch
>     to that method. If they disagree, print error message and try
>     default method. 
> 
>     Whoever wrote the code seems to have decided that things would be
>     easier if one assumed that the only method for cbind was
>     cbind.data.frame...
> 
>     Note that by the above logic, if you make a cbind.ts, you can't
>     cbind a time series to a data frame!

That's OK, as I can coerce a data frame to a ts, but in general I want to
cbind ts objects with non-trivial time bases.

I don't think documenting what we have is a good way out here....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  5 18:04:16 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Aug 1999 19:04:16 +0200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#240)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Thu, 5 Aug 1999 18:17:14 +0200 (MET DST)"
References: <199908051617.SAA02592@pubhealth.ku.dk>
Message-ID: <x2emhignvz.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> On 5 Aug 1999, Peter Dalgaard BSA wrote:
> 
> > (1) The docs are clearly wrong (or perhaps rather, wishful thinking)
> 
> Sorry, but always the docs are right and the implementation wrong.
> That's an axiom of professional computer programming (so I am told
> by several ex-professional computer programmers.)

Hmm. I think there are counterexamples...

> 
> > (2) Cbind should be generic as in Splus
> > 
> > (3) For the labels, one needs essentially to implement deparse.level
> >     or face the horrors of
> >     eval(substitute(cbind(a,b,deparse.level=2),list(a=rnorm(10),b=rnorm(10))))
> 
> Really? Or try a bit less hard?  Getting the common cases right is not
> too hard -- ts.union etc seem normally to be about right, and they have
> simple code.

I don't think it's hard to implement deparse.level. The main
difficulty is figuring out who does the deparsing. The generic, the
default, or the specific method? 

> > (4) The dataframe special casing seems to be an evasion. The sticky
> >     bit is that one needs to dispatch on *any* argument. For Splus (3.4)
> >     compatibility, one has to check each argument for its class
> >     method, and if all arguments agree - in the sense that all the
> >     arguments that have class methods must have the same one, dispatch
> >     to that method. If they disagree, print error message and try
> >     default method. 
> > 
> >     Whoever wrote the code seems to have decided that things would be
> >     easier if one assumed that the only method for cbind was
> >     cbind.data.frame...
> > 
> >     Note that by the above logic, if you make a cbind.ts, you can't
> >     cbind a time series to a data frame!
> 
> That's OK, as I can coerce a data frame to a ts, but in general I want to
> cbind ts objects with non-trivial time bases.
> 
> I don't think documenting what we have is a good way out here....

Agreed. But if you want it in 0.65 don't expect me to do it. I'll be
away for the weekend and fly to ISI/Helsinki on Tuesday.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Aug  5 22:53:12 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 6 Aug 1999 09:53:12 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <199908051128.NAA28801@pubhealth.ku.dk>; from ripley@stats.ox.ac.uk on Thu, Aug 05, 1999 at 01:28:05PM +0200
References: <199908051128.NAA28801@pubhealth.ku.dk>
Message-ID: <19990806095312.A15303@stat1.stat.auckland.ac.nz>

On Thu, Aug 05, 1999 at 01:28:05PM +0200, ripley@stats.ox.ac.uk wrote:
> Could someone who can understands the c/rbind code please sort this out.
> (It looks pretty arcane to me, and surely should not be special-casing data
> frames.)

[ That would be a member of an empty subset of the developers. :-) ]

I can see what the problem is - we don't have the generic dispatch
mechanism in place.  I will add it.

I think that the special casing of data frames is needed because this
appears to be the (undocumented) S behaviour.  A data frame anywhere in
the argument list causes the result to be a data frame.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  5 23:08:05 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Aug 1999 00:08:05 +0200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: Ross Ihaka's message of "Fri, 6 Aug 1999 09:53:12 +1200"
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz>
Message-ID: <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>

Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

> I can see what the problem is - we don't have the generic dispatch
> mechanism in place.  I will add it.
> 
> I think that the special casing of data frames is needed because this
> appears to be the (undocumented) S behaviour.  A data frame anywhere in
> the argument list causes the result to be a data frame.

I played around with this earlier today. There's nothing special about
dataframes, S does the same with any classed object. I.e.

class(b)<-"my"
cbind.my<-function(...)match.call()

cbind(a,b)

will dispatch cbind.my

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Aug  5 23:29:14 1999
From: ihaka@stat.auckland.ac.nz (ihaka@stat.auckland.ac.nz)
Date: Fri, 6 Aug 1999 00:29:14 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908052229.AAA03662@pubhealth.ku.dk>

On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> 
> > I can see what the problem is - we don't have the generic dispatch
> > mechanism in place.  I will add it.
> > 
> > I think that the special casing of data frames is needed because this
> > appears to be the (undocumented) S behaviour.  A data frame anywhere in
> > the argument list causes the result to be a data frame.
> 
> I played around with this earlier today. There's nothing special about
> dataframes, S does the same with any classed object. I.e.
> 
> class(b)<-"my"
> cbind.my<-function(...)match.call()
> 
> cbind(a,b)
> 
> will dispatch cbind.my

Yetch!  What happens when there are conflicting classes I wonder.
[ Rhetorical question. ]

It sounds like this might make things easier.

	Ross

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Aug  5 23:30:31 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 6 Aug 1999 10:30:31 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Fri, Aug 06, 1999 at 12:08:05AM +0200
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz> <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>
Message-ID: <19990806103031.A17464@stat1.stat.auckland.ac.nz>

On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> 
> > I can see what the problem is - we don't have the generic dispatch
> > mechanism in place.  I will add it.
> > 
> > I think that the special casing of data frames is needed because this
> > appears to be the (undocumented) S behaviour.  A data frame anywhere in
> > the argument list causes the result to be a data frame.
> 
> I played around with this earlier today. There's nothing special about
> dataframes, S does the same with any classed object. I.e.
> 
> class(b)<-"my"
> cbind.my<-function(...)match.call()
> 
> cbind(a,b)
> 
> will dispatch cbind.my

Yetch!  What happens when there are conflicting classes I wonder.
[ Rhetorical question. ]

It sounds like this might make things easier.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Aug  6 03:55:34 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 6 Aug 1999 14:55:34 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Fri, Aug 06, 1999 at 12:08:05AM +0200
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz> <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>
Message-ID: <19990806145534.A3584@stat1.stat.auckland.ac.nz>

On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> 
> I played around with this earlier today. There's nothing special about
> dataframes, S does the same with any classed object. I.e.
> 
> class(b)<-"my"
> cbind.my<-function(...)match.call()
> 
> cbind(a,b)
> 
> will dispatch cbind.my

I played some more.  I think data frames are special somehow.

	S> x <- factor(1:10)
	S> y <- data.frame(1:10)
	> class(x)
	[1] "factor"
	S> class(y)
	[1] "data.frame"
	S> class(cbind(x,y))
	[1] "data.frame"
	S> class(cbind(y,x))
	[1] "data.frame"

They seem to overpower other class arguments too.

	Ross

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Aug  6 03:54:27 1999
From: ihaka@stat.auckland.ac.nz (ihaka@stat.auckland.ac.nz)
Date: Fri, 6 Aug 1999 04:54:27 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908060254.EAA04395@pubhealth.ku.dk>

On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> 
> I played around with this earlier today. There's nothing special about
> dataframes, S does the same with any classed object. I.e.
> 
> class(b)<-"my"
> cbind.my<-function(...)match.call()
> 
> cbind(a,b)
> 
> will dispatch cbind.my

I played some more.  I think data frames are special somehow.

	S> x <- factor(1:10)
	S> y <- data.frame(1:10)
	> class(x)
	[1] "factor"
	S> class(y)
	[1] "data.frame"
	S> class(cbind(x,y))
	[1] "data.frame"
	S> class(cbind(y,x))
	[1] "data.frame"

They seem to overpower other class arguments too.

	Ross


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 06:50:50 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 6 Aug 1999 07:50:50 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#241)
Message-ID: <199908060550.HAA04696@pubhealth.ku.dk>

On Fri, 6 Aug 1999 ihaka@stat.auckland.ac.nz wrote:

> On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> > Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> > 
> > I played around with this earlier today. There's nothing special about
> > dataframes, S does the same with any classed object. I.e.
> > 
> > class(b)<-"my"
> > cbind.my<-function(...)match.call()
> > 
> > cbind(a,b)
> > 
> > will dispatch cbind.my
> 
> I played some more.  I think data frames are special somehow.
> 
> 	S> x <- factor(1:10)
> 	S> y <- data.frame(1:10)
> 	> class(x)
> 	[1] "factor"
> 	S> class(y)
> 	[1] "data.frame"
> 	S> class(cbind(x,y))
> 	[1] "data.frame"
> 	S> class(cbind(y,x))
> 	[1] "data.frame"
> 
> They seem to overpower other class arguments too.

Once again, there is a difference between what S documents it does and what
it actually does. The on-line help says:

       Returns a matrix that  is  pieced  together  from  several
       vectors and/or matrices. The functions cbind and rbind are
       generic (relative to their first argument). In particular,
       there  are  cbind  and  rbind  methods  for classes in the
       Matrix library.

I would settle for that. I think what in part is going is that the 
one method, in particular the default method, may use another method.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug  6 08:42:23 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Aug 1999 09:42:23 +0200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: Ross Ihaka's message of "Fri, 6 Aug 1999 14:55:34 +1200"
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz> <x2lnbp7uey.fsf@blueberry.kubism.ku.dk> <19990806145534.A3584@stat1.stat.auckland.ac.nz>
Message-ID: <x2u2qd8ie8.fsf@blueberry.kubism.ku.dk>

Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

> On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> > Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> > 
> > I played around with this earlier today. There's nothing special about
> > dataframes, S does the same with any classed object. I.e.
> > 
> > class(b)<-"my"
> > cbind.my<-function(...)match.call()
> > 
> > cbind(a,b)
> > 
> > will dispatch cbind.my
> 
> I played some more.  I think data frames are special somehow.
> 
> 	S> x <- factor(1:10)
> 	S> y <- data.frame(1:10)
> 	> class(x)
> 	[1] "factor"
> 	S> class(y)
> 	[1] "data.frame"
> 	S> class(cbind(x,y))
> 	[1] "data.frame"
> 	S> class(cbind(y,x))
> 	[1] "data.frame"
> 
> They seem to overpower other class arguments too.

This is because there's no cbind.factor:

S> cbind.factor<-function(...) match.call()
S> cbind(x,y)
      x           y 
X1.10 1 numeric, 10
attr(, "names"):
[1] ""      "X1.10"
Warning messages:
1: Incompatible methods ("cbind.factor", "cbind.data.frame") for "cbind"
2: Number of rows of result is not a multiple of vector length (arg 1) in: cbin
	d(x, y)

(and cbind.data.frame just calls data.frame(...) so it's little wonder
that the result is always a data frame)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug  6 08:34:04 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 6 Aug 1999 09:34:04 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908060734.JAA06002@pubhealth.ku.dk>

Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

> On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> > Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> > 
> > I played around with this earlier today. There's nothing special about
> > dataframes, S does the same with any classed object. I.e.
> > 
> > class(b)<-"my"
> > cbind.my<-function(...)match.call()
> > 
> > cbind(a,b)
> > 
> > will dispatch cbind.my
> 
> I played some more.  I think data frames are special somehow.
> 
> 	S> x <- factor(1:10)
> 	S> y <- data.frame(1:10)
> 	> class(x)
> 	[1] "factor"
> 	S> class(y)
> 	[1] "data.frame"
> 	S> class(cbind(x,y))
> 	[1] "data.frame"
> 	S> class(cbind(y,x))
> 	[1] "data.frame"
> 
> They seem to overpower other class arguments too.

This is because there's no cbind.factor:

S> cbind.factor<-function(...) match.call()
S> cbind(x,y)
      x           y 
X1.10 1 numeric, 10
attr(, "names"):
[1] ""      "X1.10"
Warning messages:
1: Incompatible methods ("cbind.factor", "cbind.data.frame") for "cbind"
2: Number of rows of result is not a multiple of vector length (arg 1) in: cbin
	d(x, y)

(and cbind.data.frame just calls data.frame(...) so it's little wonder
that the result is always a data frame)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Aug  6 19:35:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 06 Aug 1999 14:35:14 -0400
Subject: ts and defaults
Message-ID: <37AB2AE2.1DA7D784@bank-banque-canada.ca>

Brian

The example below may be helpful to further illustrate the concern I have with
the effects of your ts library on defaults. According to the "Blue Book", in
Splus, in R up to 0.64.2, and in today's snapshot of 0.65 without the "ts"
library attached

> end(ts(rnorm(10), start=c(1991,1), frequency=1))

gives
[1] 2000    1

However, with the "ts" library attached the result is

[1] 2000

This change in the default behavior will break a lot of user code, effectively
meaning that many people who do a lot of time series work will not use the
library. Hopeful that is not what you intend. Even casual users, I believe, will
be confused by the change in behavior depending on whether  ts is attached or
not.

Possibly a much better way to define a new improved class is to give it a new
name, rather than a name that introduces conflicts with the old defaults.

I hope that you will have time to consider changing this before 0.65 is
released. I will be away for the next two week, but will be happy to continue
testing when I return.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 20:55:21 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 6 Aug 1999 20:55:21 +0100 (BST)
Subject: ts and defaults
In-Reply-To: <37AB2AE2.1DA7D784@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.9908062019540.20236-100000@auk.stats>

On Fri, 6 Aug 1999, Paul Gilbert wrote:

> Brian
> 
> The example below may be helpful to further illustrate the concern I have with
> the effects of your ts library on defaults. According to the "Blue Book", in
> Splus, in R up to 0.64.2, and in today's snapshot of 0.65 without the "ts"
> library attached
> 
> > end(ts(rnorm(10), start=c(1991,1), frequency=1))
> 
> gives
> [1] 2000    1

How is anyone supposed to know that means 2000 not 2001 without reading
the help page?

> However, with the "ts" library attached the result is
> 
> [1] 2000

Isn't that much more readable?

> This change in the default behavior will break a lot of user code [ ... ]

Statistical evidence, please.

Note that all the S (and R) code is written to accept start=1991, so this
user code must depart from that convention. Maybe it would be a good
opportunity to re-write that code to conform to the standard conventions?
As in

start:    starting date for the series, e.g., in years, February,
       1970  would  be  1970+(1/12)  or  1970.083.  If start is a
       vector with  at  least  two  data  values,  the  first  is
       interpreted  as  the  time  unit,  e.g., the year, and the
       second as  the  number  of  positions  into  the  sampling
       period;  e.g., February, 1970 could be c(1970,2).

Note the two possibilities, and that the one you advocate is the
alternate. I at least find c(1970, 2) = 1970+(1/12) a _very_ confusing
notation, fortunately one that can be avoided.

The problem here is that ts in R is fundamentally incompatible with S, as R
has a ts class and S does not. I believe start.default should not be 
implemented in terms of class ts (and any user can change the
behaviour of a class), and I trust the `lots of user code' does not do
things like that. The plan is to separate the the default methods from the
ts class methods.  We do not consider that S compatibility applies 
to class ts, which S does not have.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Aug  6 21:06:20 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 06 Aug 1999 16:06:20 -0400
Subject: ts and defaults
References: <Pine.GSO.4.05.9908062019540.20236-100000@auk.stats>
Message-ID: <37AB403C.86D179AB@bank-banque-canada.ca>

>The plan is to separate the the default methods from the
>ts class methods.  We do not consider that S compatibility applies
>to class ts, which S does not have.

The other part of the problem is that the function name ts() has already been
appropriated as the constructor for the default, so you can't use ts() as the
constructor for your "ts" class. Ditto for is.ts, as.ts, etc.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 21:10:58 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 6 Aug 1999 21:10:58 +0100 (BST)
Subject: ts and defaults
In-Reply-To: <37AB403C.86D179AB@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.9908062108170.20236-100000@auk.stats>

On Fri, 6 Aug 1999, Paul Gilbert wrote:

> >The plan is to separate the the default methods from the
> >ts class methods.  We do not consider that S compatibility applies
> >to class ts, which S does not have.
> 
> The other part of the problem is that the function name ts() has already been
> appropriated as the constructor for the default, so you can't use ts() as the
> constructor for your "ts" class. Ditto for is.ts, as.ts, etc.

Or to put it another way, as I said before, ts() in R is incompatible
with ts() in S, and the name has already been taken for the constructor
of the R ts class. (In case you still do not get it, there is already
an R ts class.) Do you want us to change ts in R not to be the constructor
of the ts class, and thereby `break a lot of user code' in R?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Aug  6 22:12:42 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 7 Aug 1999 09:12:42 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <x2u2qd8ie8.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Fri, Aug 06, 1999 at 09:42:23AM +0200
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz> <x2lnbp7uey.fsf@blueberry.kubism.ku.dk> <19990806145534.A3584@stat1.stat.auckland.ac.nz> <x2u2qd8ie8.fsf@blueberry.kubism.ku.dk>
Message-ID: <19990807091242.A15242@stat1.stat.auckland.ac.nz>

Ok, I have made some changes to cbind/rbind which will support dispatch
to other methods.  As part of this I have changed things so that the
values passed on are packaged up as (evaluated) promises so that any
closure they invoke will be able to use substitute to get text values
to use as labels.  What I need is a clear idea of the rules for doing
the dispatch.  The picture I have at present is:

	dispatch.class <- "default"
	for (arg in arg.list) {
		if (arg is an object) {
			arg.class <- class(arg)[1]
			if (there is a method for arg.class) {
				if (dispatch.class == "default")
					class <- arg.class
				else if (args.class != dispatch.class)
					drop through to dispatch
			}
		}
	}
    dispatch:
	if (dispatch.class != "default")
		dispatch to appropriate closure
	else
		carry out default actions

This also looks like it sufficiently generic that it could be packaged
as a useful function along the lines of "DespatchOrEval" -- perhaps
MultiDespatchOrEval.

Does this sound right?

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Aug  6 22:15:37 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 06 Aug 1999 17:15:37 -0400
Subject: ts and defaults
References: <Pine.GSO.4.05.9908062108170.20236-100000@auk.stats>
Message-ID: <37AB5078.E7151CD1@bank-banque-canada.ca>

>ts() in R is incompatible
>with ts() in S, and the name has already been taken for the constructor
>of the R ts class. (In case you still do not get it, there is already
>an R ts class.)

I have a very large set of test and ts() in R is suprisingly compatible with S,
even though it is implemented in a very different way. A lot of S time series
code runs directly in R with no changes. This does not affect my own code very
much, since I define my own classes too. In fact, most everyone who works much
with time series probably defines their own classes. You are not the first to
notice how bad the defaults are. But it does affect a lot of code which users
have, and for which they might want to use R, or even contribute.

>Do you want us to change ts in R not to be the constructor
>of the ts class, and thereby `break a lot of user code' in R?

No, I want you to change the name of your new improved class of time series and
leave "ts" alone or make it even more compatible with S.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 22:24:13 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 6 Aug 1999 22:24:13 +0100 (GMT Daylight Time)
Subject: ts and defaults
In-Reply-To: <37AB5078.E7151CD1@bank-banque-canada.ca>
Message-ID: <Pine.WNT.4.05.9908062220240.18403-100000@tern.stats>

On Fri, 6 Aug 1999, Paul Gilbert wrote:

[quoting me without attribution]

> >Do you want us to change ts in R not to be the constructor
> >of the ts class, and thereby `break a lot of user code' in R?
> 
> No, I want you to change the name of your new improved class of time series and
> leave "ts" alone or make it even more compatible with S.
> 
I asked a very specific question and got an ambiguous answer. `make it
even more compatible with S' means `yes', not `no', as in S ts() is not the
constructor of a ts class. Which do you want?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 22:49:07 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 6 Aug 1999 22:49:07 +0100 (GMT Daylight Time)
Subject: cbind is not generic as claimed, omits labels where S has them
 (PR#239)
In-Reply-To: <19990807091242.A15242@stat1.stat.auckland.ac.nz>
Message-ID: <Pine.WNT.4.05.9908062235120.18403-100000@tern.stats>

On Sat, 7 Aug 1999, Ross Ihaka wrote:

> Ok, I have made some changes to cbind/rbind which will support dispatch
> to other methods.  As part of this I have changed things so that the
> values passed on are packaged up as (evaluated) promises so that any
> closure they invoke will be able to use substitute to get text values

Sorry, are you using `closure' to mean `method' in S (and I thought R)
terminology? (I thought a function closure involved the environment....)

> to use as labels.  What I need is a clear idea of the rules for doing
> the dispatch.  The picture I have at present is:
> 
> 	dispatch.class <- "default"
> 	for (arg in arg.list) {
> 		if (arg is an object) {
> 			arg.class <- class(arg)[1]
> 			if (there is a method for arg.class) {
> 				if (dispatch.class == "default")
> 					class <- arg.class
> 				else if (args.class != dispatch.class)
> 					drop through to dispatch
> 			}
> 		}
> 	}
>     dispatch:
> 	if (dispatch.class != "default")
> 		dispatch to appropriate closure
> 	else
> 		carry out default actions
> 
> This also looks like it sufficiently generic that it could be packaged
> as a useful function along the lines of "DespatchOrEval" -- perhaps
> MultiDespatchOrEval.
> 
> Does this sound right?

`right', huh?  That's hard. I had been thinking about multiple classes,
which bedevil all this (and JMC got rid of for that reason, I guess). I
think your rules says choose the class of the leading argument whose first
class has a method, and I think that is wrong. Suppose my two args both
have class c("mts", "ts") and there is no cbind.mts. Then you will dispatch
the default, even though the normal rules for dispatching on the first arg
would dispatch cbind.ts.

I suspect we need to try more than the first method, but have no clear
picture of what is right. I would dispatch on the first arg that had a 
usable method.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@kcbbs.gen.nz  Sat Aug  7 01:03:42 1999
From: lyndon@kcbbs.gen.nz (lyndon@kcbbs.gen.nz)
Date: Sat, 7 Aug 1999 02:03:42 +0200 (MET DST)
Subject: INSTALL script does not handle spaces in pathnames correctly (PR#242)
Message-ID: <199908070003.CAA02356@pubhealth.ku.dk>

Full_Name: Lyndon Drake
Version: Version 0.65.0 Under development (unstable) (August 07, 1999)
OS: Linux 2.2.2
Submission from: (NULL) (202.14.102.52)


I was attempting to install the DSE package from a directory whose
pathname includes spaces.  The INSTALL script interprets spaces in
the pathname as a separator.  For example:

[lyndon@beat Rdse]$ pwd
/home/lyndon/doc/uni/415.704 Computer Systems Peformance Analysis/R/Rdse
[lyndon@beat Rdse]$ ~/src/cvs-stuff/R/bin/R INSTALL --no-docs -l ../lib/
syskern
/home/lyndon/src/cvs-stuff/R/bin/INSTALL: /home/lyndon/doc/uni/415.704: No such
file or directory
Installing package `415.704' ...
  No man pages found in package `415.704'
 DONE (415.704)

Installing package `Computer' ...
  No man pages found in package `Computer'
 DONE (Computer)

Installing package `Systems' ...
  No man pages found in package `Systems'
 DONE (Systems)

Installing package `Peformance' ...
  No man pages found in package `Peformance'
 DONE (Peformance)

/home/lyndon/src/cvs-stuff/R/bin/INSTALL: Analysis/R/Rdse/syskern: No such file
or directory
Installing package `syskern' ...
  No man pages found in package `syskern'
 DONE (syskern)

DONE (INSTALL)

One possibility would be to change the separator used in the install
script from a space to a colon.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ATurpin@discoveriesinsight.org  Sat Aug  7 01:09:31 1999
From: ATurpin@discoveriesinsight.org (ATurpin@discoveriesinsight.org)
Date: Sat, 7 Aug 1999 02:09:31 +0200 (MET DST)
Subject: bug ? wilcox() (PR#243)
Message-ID: <199908070009.CAA02388@pubhealth.ku.dk>

> Hi,
> 
> I am getting a strange result from the wilcox function in the code below.
> This code has worked for many other wilcox's, but not this particular one.
> The p-value printed should be much higher (consistent with the p-value
> for the t-test).
> 
> I am using R Version 0.64.2 under Debian Linux.
> 
> I hope it is not me being stupid...
> 
> Regards,
> 
> Andrew Turpin
> aturpin@discoveriesinsight.org
> 
> --------------------------------------------------------------------------
> ----
> 
> library(ctest)
> x <- vector(length=50)
> y <- vector(length=50)
> x <- c(0.624200,0.252100
> ,0.404500
> ,0.465000
> ,0.033500
> ,0.565500
> ,0.316000
> ,0.469800
> ,0.590200
> ,0.420200
> ,0.609800
> ,0.577800
> ,0.854200
> ,0.284800
> ,0.243600
> ,0.596100
> ,0.213200
> ,0.369800
> ,0.281400
> ,0.754500
> ,0.135200
> ,0.041900
> ,0.640900
> ,0.547000
> ,0.214300
> ,0.212000
> ,0.325200
> ,0.400700
> ,0.115400
> ,0.248800
> ,0.211500
> ,0.540200
> ,0.282100
> ,0.131700
> ,0.757500
> ,0.136500
> ,0.391500
> ,0.293500
> ,0.275400
> ,0.048700
> ,0.308400
> ,0.140900
> ,0.624100
> ,0.042600
> ,0.158100
> ,0.631300
> ,0.279200
> ,0.623100
> ,0.042600
> ,0.477200
> )
> y <- c(0.606500,0.252100
> ,0.404500
> ,0.465000
> ,0.033500
> ,0.565500
> ,0.316000
> ,0.469800
> ,0.591700
> ,0.420200
> ,0.608700
> ,0.577800
> ,0.854200
> ,0.284800
> ,0.244700
> ,0.596100
> ,0.213200
> ,0.369800
> ,0.281400
> ,0.754500
> ,0.135200
> ,0.041900
> ,0.640900
> ,0.683500
> ,0.214300
> ,0.192100
> ,0.304800
> ,0.400700
> ,0.115400
> ,0.248800
> ,0.211500
> ,0.540200
> ,0.282100
> ,0.131700
> ,0.757500
> ,0.137200
> ,0.391500
> ,0.293500
> ,0.275400
> ,0.048700
> ,0.308400
> ,0.140900
> ,0.624100
> ,0.042600
> ,0.158100
> ,0.631300
> ,0.282900
> ,0.620100
> ,0.030800
> ,0.471700
> )
>         #
>         # some functions for formatting output
>         #
>      f    <- function (x) { formatC(x,digits=4,width=10,format="f") }
>      mydiff<-function (x,y) {
> formatC((y-x)/y*100,digits=2,width=10,format="f")}
>      line <- function (d,x,y) { cat(d,f(x),f(y),mydiff(x,y),"\n")}
> 
>         #
>         # print basic stats
>         #
>      line("n           ",length(x),length(y))
>      line("Mean        ",mean(x),mean(y))
>      line("Median      ",median(x),median(y))
>      line("Var         ",var(x),var(y))
> 
>      cat("\n")
> 
>         #
>         # Perform basic tests
>         #
>      w  <- wilcox.test(x,y,paired=TRUE)
>      t  <- t.test(x,y,paired=TRUE)
> 
>      cat("t-test   p =", f(t$p.value),
> ifelse(t$p.value<0.05,"(Significant)","(Not significant)"), "\n")
>      cat("Wilcoxon p =",
> f(w$p.value),ifelse(w$p.value<0.05,"(Significant)","(Not significant)"),
> "\n")
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Sat Aug  7 01:37:59 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 7 Aug 1999 12:37:59 +1200 (NZST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908070037.MAA18569@stat1.stat.auckland.ac.nz>

	From ripley@stats.ox.ac.uk  Sat Aug  7 09:49:12 1999
	Date: Fri, 6 Aug 1999 22:49:07 +0100 (GMT Daylight Time)
	From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
	To: Ross Ihaka <ihaka@stat.auckland.ac.nz>
	cc: r-devel@stat.math.ethz.ch
	Subject: Re: cbind is not generic as claimed, omits labels where S has them
	 (PR#239)
	MIME-Version: 1.0

	On Sat, 7 Aug 1999, Ross Ihaka wrote:

	> Ok, I have made some changes to cbind/rbind which will support
	> dispatch to other methods.  As part of this I have changed
	> things so that the values passed on are packaged up as
	> (evaluated) promises so that any closure they invoke will
	> be able to use substitute to get text values

	Sorry, are you using `closure' to mean `method' in S (and I thought R)
	terminology? (I thought a function closure involved the environment....)

Technicality : I mean interpreted function.  I'm disallowing dispatch
to functions without at least an interpreted wrapper.  I don't think
this is a real restriction.

	> to use as labels.  What I need is a clear idea of the rules for doing
	> the dispatch.  The picture I have at present is:
	> 
	> 	dispatch.class <- "default"
	> 	for (arg in arg.list) {
	> 		if (arg is an object) {
	> 			arg.class <- class(arg)[1]
	> 			if (there is a method for arg.class) {
	> 				if (dispatch.class == "default")
	> 					class <- arg.class
	> 				else if (args.class != dispatch.class)
	> 					drop through to dispatch
	> 			}
	> 		}
	> 	}
	>     dispatch:
	> 	if (dispatch.class != "default")
	> 		dispatch to appropriate closure
	> 	else
	> 		carry out default actions
	> 
	> This also looks like it sufficiently generic that it could be packaged
	> as a useful function along the lines of "DespatchOrEval" -- perhaps
	> MultiDespatchOrEval.
	> 
	> Does this sound right?

	`right', huh?  That's hard. I had been thinking about multiple
	classes, which bedevil all this (and JMC got rid of for that
	reason, I guess). I think your rules says choose the class of
	the leading argument whose first class has a method, and I
	think that is wrong. Suppose my two args both have class
	c("mts", "ts") and there is no cbind.mts. Then you will
	dispatch the default, even though the normal rules for
	dispatching on the first arg would dispatch cbind.ts.

	I suspect we need to try more than the first method, but have
	no clear picture of what is right. I would dispatch on the
	first arg that had a usable method.

I think I'm shooting for S compatibility here (I'm firmly in both the
compatible and non-compatible camps -- trying to please everyone I
guess).  I believe Peter described what S3 appears to do, and the
above  is my interpretation of what he said.

I think trying to do inheritance by traversing the class vectors
might be asking for trouble.  It would certainly be significantly
more complex and probably slower.

Taking the first arg with a usable method means that cbind(a, b)
could be a significantly different class of object from cbind(b, a).
This is sometimes a nasty surprise for people.  The S3 philosophy
seems to be that in cases of conflict you ignore classes entirely.
That does give a symmetric result.

	Ross


[ Duncan and I talked about implementing a new kind of object system
  -- different from either S3 or S4.  It would look a little more like
  Java.  Definitely a Version 2 project. ]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Sat Aug  7 03:52:37 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 7 Aug 1999 14:52:37 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <199908070037.MAA18569@stat1.stat.auckland.ac.nz>; from Ross Ihaka on Sat, Aug 07, 1999 at 12:37:59PM +1200
References: <199908070037.MAA18569@stat1.stat.auckland.ac.nz>
Message-ID: <19990807145237.A19953@stat1.stat.auckland.ac.nz>

I've modified rbind/cbind so that they dispatch as follows:

1) For each argument we get the list of possible class memberships from
   the class attribute.

2) We inspect each class in turn to see if there is an an applicable
   method.

3) If we find an applicable method we make sure that it is identical to
   any method determined from prior arguments.  If it is identical, we
   proceed, otherwise we immediately drop through to the default code.

This is commited in the development version.  Are there any other
functions which should behave this way.

(Sorry for any obtuseness.  Sleep is in short supply at present.)

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Aug  9 09:02:11 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 09 Aug 1999 10:02:11 +0200 (CEST)
Subject: ts and defaults
In-Reply-To: <Pine.GSO.4.05.9908062019540.20236-100000@auk.stats>
Message-ID: <XFMail.990809100211.plummer@iarc.fr>

I think the c(base, offset) notation is appropriate when
1) Frequency is an integer, and
2) The time dimension refers to an interval.
whereas the scalar representation of time is appropriate when the time
dimension refers to a precise point in time.  There is no unambiguous
way of translating between the two since they are not measuring the same
thing, and it is a bit unfortunate that the two are mixed up.

The c(base,offset) notation is impossible to interpret without
reference to the frequency. So whereas
[1] 2000    1
refers to the whole of 2000 if frequency=1, it means the first 1/12
of 2000 (i.e. January) if frequency=12. This is another source of confusion.

I note in passing that the R base library allows the c(base,offset) notation
for non-integer frequency, e.g.

R> x_ts(1:10,start=c(2,1), freq=2.5)
R> start(x)
[1] 2 1

which is disallowed by S-PLUS.

Martyn


On 06-Aug-99 Prof Brian D Ripley wrote:
> On Fri, 6 Aug 1999, Paul Gilbert wrote:
> 
>> Brian
>> 
>> The example below may be helpful to further illustrate the concern I have
>> with
>> the effects of your ts library on defaults. According to the "Blue Book", in
>> Splus, in R up to 0.64.2, and in today's snapshot of 0.65 without the "ts"
>> library attached
>> 
>> > end(ts(rnorm(10), start=c(1991,1), frequency=1))
>> 
>> gives
>> [1] 2000    1
> 
> How is anyone supposed to know that means 2000 not 2001 without reading
> the help page?
> 
>> However, with the "ts" library attached the result is
>> 
>> [1] 2000
> 
> Isn't that much more readable?
> 
>> This change in the default behavior will break a lot of user code [ ... ]
> 
> Statistical evidence, please.
> 
> Note that all the S (and R) code is written to accept start=1991, so this
> user code must depart from that convention. Maybe it would be a good
> opportunity to re-write that code to conform to the standard conventions?
> As in
> 
> start:    starting date for the series, e.g., in years, February,
>        1970  would  be  1970+(1/12)  or  1970.083.  If start is a
>        vector with  at  least  two  data  values,  the  first  is
>        interpreted  as  the  time  unit,  e.g., the year, and the
>        second as  the  number  of  positions  into  the  sampling
>        period;  e.g., February, 1970 could be c(1970,2).
> 
> Note the two possibilities, and that the one you advocate is the
> alternate. I at least find c(1970, 2) = 1970+(1/12) a _very_ confusing
> notation, fortunately one that can be avoided.
> 
> The problem here is that ts in R is fundamentally incompatible with S, as R
> has a ts class and S does not. I believe start.default should not be 
> implemented in terms of class ts (and any user can change the
> behaviour of a class), and I trust the `lots of user code' does not do
> things like that. The plan is to separate the the default methods from the
> ts class methods.  We do not consider that S compatibility applies 
> to class ts, which S does not have.
> 
> Brian
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david_m_potter@groton.pfizer.com  Mon Aug  9 16:47:57 1999
From: david_m_potter@groton.pfizer.com (david_m_potter@groton.pfizer.com)
Date: Mon, 9 Aug 1999 17:47:57 +0200 (MET DST)
Subject: cm.colors bug (PR#244)
Message-ID: <199908091547.RAA16601@pubhealth.ku.dk>

Full_Name: David M. Potter
Version: 0.64.1
OS: solaris 2.6
Submission from: (NULL) (12.18.36.220)


cm.colors() returns an extra element "1":

> cm.colors(10)
                                                                               

"#7FFFFF" "#99FFFF" "#B2FFFF" "#CCFFFF" "#E5FFFF" "#FFE5FF" "#FFCCFF" "#FFB2FF"

                            v 
"#FF99FF" "#FF7FFF"       "1" 
> 

Why I think it happens

The function has an unnecessary right parentheses
immediately preceding ", v=1" which causes the "v=1" to
be added to the vector rather than being interpreted as an
argument to hsv().

> cm.colors
function (n) 
{
    k <- n%/%2
    if (2 * k == n) {
        c(hsv(h = 6/12, s = seq(0.5, 0, length = k + 1)[-k - 
            1], v = 1), hsv(h = 10/12, s = seq(0, 0.5, length = n - 
            k + 1)[-1]), v = 1)
    }
    else {
        c(hsv(h = 6/12, s = seq(0.5, 0, length = k + 1), v = 1), 
            hsv(h = 10/12, s = seq(0, 0.5, length = n - k)[-1]), 
            v = 1)
    }
}
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug  9 17:29:55 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 9 Aug 1999 18:29:55 +0200
Subject: cm.colors bug (PR#244)
In-Reply-To: <199908091547.RAA16601@pubhealth.ku.dk>
 (david_m_potter@groton.pfizer.com)
References: <199908091547.RAA16601@pubhealth.ku.dk>
Message-ID: <199908091629.SAA11554@sophie.ethz.ch>


    david> Full_Name: David M. Potter Version: 0.64.1 OS: solaris 2.6
    david> Submission from: (NULL) (12.18.36.220)

    david> cm.colors() returns an extra element "1":

Yes, this is a bug
    ....

    david> Why I think it happens

    david> The function has an unnecessary right parentheses immediately
    david> preceding ", v=1" which causes the "v=1" to be added to the
    david> vector rather than being interpreted as an argument to hsv().

   david> > cm.colors
   david> function (n) 
   david> {
   david>     k <- n%/%2
   david>     if (2 * k == n) {
   david>         c(hsv(h = 6/12, s = seq(0.5, 0, length = k + 1)[-k - 
   david>             1], v = 1), hsv(h = 10/12, s = seq(0, 0.5, length = n - 
   david>             k + 1)[-1]), v = 1)
   david>     }
   david>     else {
   david>         c(hsv(h = 6/12, s = seq(0.5, 0, length = k + 1), v = 1), 
   david>             hsv(h = 10/12, s = seq(0, 0.5, length = n - k)[-1]), 
   david>             v = 1)
   david>     }
   david> }


Correct.
There were more problems :
cm.colors(1) {and cm.colors(0)} both failed as well.

The following seems to be correct in all cases

cm.colors <- function (n)
{
    if ((n <- as.integer(n[1])) > 0) {
	even.n <- n %% 2 == 0
	k <- n%/%2
	l1 <- k + 1 - even.n
	l2 <- n - k + even.n
	c(if(l1 > 0)
	  hsv(h =  6/12, s= seq(.5, ifelse(even.n,.5/k,0), length = l1), v = 1),
	  if(l2 > 1)
	  hsv(h = 10/12, s= seq(0, 0.5, length = l2)[-1], v = 1))
    } else character(0)
}

I'll commit it for the R-devel [daily snapshot] and hence 0.65.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug  9 17:45:39 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Aug 1999 18:45:39 +0200
Subject: bug ? wilcox() (PR#243)
In-Reply-To: ATurpin@discoveriesinsight.org's message of "Sat, 7 Aug 1999 02:09:31 +0200 (MET DST)"
References: <199908070009.CAA02388@pubhealth.ku.dk>
Message-ID: <x2hfm8kimk.fsf@blueberry.kubism.ku.dk>

ATurpin@discoveriesinsight.org writes:

> > Hi,
> > 
> > I am getting a strange result from the wilcox function in the code below.
> > This code has worked for many other wilcox's, but not this particular one.
> > The p-value printed should be much higher (consistent with the p-value
> > for the t-test).
> > 
> > I am using R Version 0.64.2 under Debian Linux.
> > 
> > I hope it is not me being stupid...

This *was* a bug in older versions of ctest. Your example has a huge
number of cases with x==y and the test was based on 

	STATISTIC <- sum(r[x > 0])

(x being x-y at that stage) 

The current version at CRAN removes the zeros first...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 10 17:06:15 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 10 Aug 1999 18:06:15 +0200 (MET DST)
Subject: Is a ts of length one a ts? (PR#245)
Message-ID: <199908101606.SAA27541@pubhealth.ku.dk>

The following seems confused (0.65 snapshot)

> x <- ts(1:20)
> window(x, 1, 1)
Time Series:
Start = c(1, 1) 
End = c(1, 1) 
Frequency = 1 
[1] 1
Warning message: 
Not returning a time series object in: [.ts(x, i) 

(it of class ts, as the print method shows). Under 0.64.2 it is even more
confusing:

> x <- ts(1:20)
> window(x, 1, 1)
Warning: Not returning a time series object
Time Series:
Start = c(1, 1) 
End = c(1, 1) 
Frequency = 1 
[1] 1

sic!

> x[1]
[1] 1
Warning message: 
Not returning a time series object in: [.ts(x, 1) 

Is there any good reason why a time series of length one is not
allowed by [.ts (you can certainly create one with ts)?

How about one of length 0:

> ts(numeric(0))
Time Series:
Start = c(1, 1) 
End = c(0, 1) 
Frequency = 1 
numeric(0)

(which is surely a bug in print.ts if length 0 objects are allowed).

> x[0]
numeric(0)
Warning message: 
Not returning a time series object in: [.ts(x, 0) 

I suggest we should allow time series of length 1 but not of length 0
(as they have no start).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Aug 11 08:23:38 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 11 Aug 1999 09:23:38 +0200 (CEST)
Subject: Is a ts of length one a ts? (PR#245)
In-Reply-To: <199908101606.SAA27541@pubhealth.ku.dk>
Message-ID: <XFMail.990811092338.plummer@iarc.fr>

On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
> Is there any good reason why a time series of length one is not
> allowed by [.ts (you can certainly create one with ts)?

It certainly has a start and an end value, but what's the
frequency?  If you want the tsp attribute of a time series
to be well defined, then maybe you should disallow series
of length 1.

"[.ts" certainly needs fixing.  There has been some discussion
about this and I think the consensus was that "[.ts" should
not attempt to return a time series when taking row subsets
(computationally expensive, and quite difficult to cover
all cases, see PR#216, PR#217).  The window() function is more
appropriate for taking subseries IMHO.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 11 09:37:36 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 11 Aug 1999 09:37:36 +0100 (BST)
Subject: Is a ts of length one a ts? (PR#245)
In-Reply-To: <XFMail.990811092338.plummer@iarc.fr>
Message-ID: <Pine.GSO.4.05.9908110928000.12494-100000@auk.stats>

On Wed, 11 Aug 1999, Martyn Plummer wrote:

> On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
> > Is there any good reason why a time series of length one is not
> > allowed by [.ts (you can certainly create one with ts)?
> 
> It certainly has a start and an end value, but what's the
> frequency?  If you want the tsp attribute of a time series
> to be well defined, then maybe you should disallow series
> of length 1.

I think the frequency is perfectly well defined, as that of the series you
subsetted.  How can extracting one observation change the frequency of
observation? Similarly, it is defined by ts, as it is an argument.

> "[.ts" certainly needs fixing.  There has been some discussion
> about this and I think the consensus was that "[.ts" should
> not attempt to return a time series when taking row subsets
> (computationally expensive, and quite difficult to cover
> all cases, see PR#216, PR#217).  The window() function is more
> appropriate for taking subseries IMHO.

You can't control this. Once you have [.ts, it gets used in all sorts
of places deep inside other functions.  For example, in

boxplot(split(nottem, cycle(nottem))

the subsetting in boxplot.stats uses [.ts (in 0.65 where split
preserves classes). So we have to get this right.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Aug 11 12:52:51 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 11 Aug 1999 13:52:51 +0200 (CEST)
Subject: Is a ts of length one a ts? (PR#245)
In-Reply-To: <Pine.GSO.4.05.9908110928000.12494-100000@auk.stats>
Message-ID: <XFMail.990811135251.plummer@iarc.fr>

On 11-Aug-99 Prof Brian D Ripley wrote:
> On Wed, 11 Aug 1999, Martyn Plummer wrote:
> 
>> On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
>> > Is there any good reason why a time series of length one is not
>> > allowed by [.ts (you can certainly create one with ts)?
>> 
>> It certainly has a start and an end value, but what's the
>> frequency?  If you want the tsp attribute of a time series
>> to be well defined, then maybe you should disallow series
>> of length 1.
> 
> I think the frequency is perfectly well defined, as that of the series you
> subsetted.

Is it?

R 0.64.2:

R> x <- ts(1:10)
R> frequency(x)
[1] 1
R> y <- x[c(2,4,6,8,10)]
R> frequency(y)
[1] 0.5

This agrees with the S-PLUS treatment of "regular" time series:

S> x <- rts(1:10)
S> frequency(x)
 frequency 
         1
S> y <- x[c(2,4,6,8,10)]
S> frequency(y)
 frequency 
       0.5

By this logic, the frequency of a single element selected from
a time series is undefined. S-PLUS can get round this problem
because it has the richer time series class "its":

S> z <- x[1]
S> class(z)
[1] "its"

So although z still has a time dimension, it has no frequency.

S-PLUS does allow you to create an "rts" object of length one.  There is
a certain logic to this. The time series parameters must satisfy the
equation

frequency * (end - start) = length - 1

For a series of length 1:

frequency * 0 = 0

which is satisfied by any user-specified value of the frequency.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug 11 13:49:09 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 11 Aug 1999 14:49:09 +0200 (CEST)
Subject: INSTALL script does not handle spaces in pathnames correctly (PR#242)
In-Reply-To: <199908070003.CAA02356@pubhealth.ku.dk>
References: <199908070003.CAA02356@pubhealth.ku.dk>
Message-ID: <14257.28997.662692.683681@fangorn.ci.tuwien.ac.at>

>>>>> lyndon  writes:

> Full_Name: Lyndon Drake
> Version: Version 0.65.0 Under development (unstable) (August 07, 1999)
> OS: Linux 2.2.2
> Submission from: (NULL) (202.14.102.52)


> I was attempting to install the DSE package from a directory whose
> pathname includes spaces.  The INSTALL script interprets spaces in
> the pathname as a separator.  For example:

I think I fixed the problem.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Aug 11 13:57:01 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 11 Aug 1999 13:57:01 +0100 (BST)
Subject: Is a ts of length one a ts? (PR#245)
Message-ID: <199908111257.NAA24100@toucan.stats.ox.ac.uk>

> Date: Wed, 11 Aug 1999 13:52:51 +0200 (CEST)
> From: Martyn Plummer <plummer@iarc.fr>
> To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> Subject: RE: Is a ts of length one a ts? (PR#245)
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> 
> On 11-Aug-99 Prof Brian D Ripley wrote:
> > On Wed, 11 Aug 1999, Martyn Plummer wrote:
> > 
> >> On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
> >> > Is there any good reason why a time series of length one is not
> >> > allowed by [.ts (you can certainly create one with ts)?
> >> 
> >> It certainly has a start and an end value, but what's the
> >> frequency?  If you want the tsp attribute of a time series
> >> to be well defined, then maybe you should disallow series
> >> of length 1.
> > 
> > I think the frequency is perfectly well defined, as that of the series you
> > subsetted.
> 
> Is it?
> 
> R 0.64.2:
> 
> R> x <- ts(1:10)
> R> frequency(x)
> [1] 1
> R> y <- x[c(2,4,6,8,10)]
> R> frequency(y)
> [1] 0.5
> 

I was only discussing the case of a subset of one, but you omitted
the next sentence. What I actually said was

`I think the frequency is perfectly well defined, as that of the series you
subsetted.  How can extracting one observation change the frequency of
observation?'

Obviously, subsetting a regularly spaced series can change the frequency.
 
-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Aug 11 18:08:40 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 11 Aug 1999 19:08:40 +0200 (CEST)
Subject: Is a ts of length one a ts? (PR#245)
In-Reply-To: <199908111257.NAA24100@toucan.stats.ox.ac.uk>
Message-ID: <XFMail.990811190840.plummer@iarc.fr>

On 11-Aug-99 Prof Brian Ripley wrote:
>> Date: Wed, 11 Aug 1999 13:52:51 +0200 (CEST)
>> From: Martyn Plummer <plummer@iarc.fr>
>> To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
>> Subject: RE: Is a ts of length one a ts? (PR#245)
>> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
>> 
>> On 11-Aug-99 Prof Brian D Ripley wrote:
>> > On Wed, 11 Aug 1999, Martyn Plummer wrote:
>> > 
>> >> On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
>> >> > Is there any good reason why a time series of length one is not
>> >> > allowed by [.ts (you can certainly create one with ts)?
>> >> 
>> >> It certainly has a start and an end value, but what's the
>> >> frequency?  If you want the tsp attribute of a time series
>> >> to be well defined, then maybe you should disallow series
>> >> of length 1.
>> > 
>> > I think the frequency is perfectly well defined, as that of the series you
>> > subsetted.
>> 
>> Is it?
>> 
>> R 0.64.2:
>> 
>> R> x <- ts(1:10)
>> R> frequency(x)
>> [1] 1
>> R> y <- x[c(2,4,6,8,10)]
>> R> frequency(y)
>> [1] 0.5
>> 
> 
> I was only discussing the case of a subset of one, but you omitted
> the next sentence. What I actually said was
> 
> `I think the frequency is perfectly well defined, as that of the series you
> subsetted.  How can extracting one observation change the frequency of
> observation?'
> 
> Obviously, subsetting a regularly spaced series can change the frequency.

Yes, I am sorry for clipping too much of your e-mail in my reply.
I didn't develop my argument properly and it looks facetious.
Let me try again.

x <- ts(1:10)
y <- x[c(1,3,5,7,9)]
 
x1 <- x[1]
y1 <- y[1]

The question we disagree on, I think, is "Are x1 and y1 the same?".
I would say yes.  I don't think that the attributes of a subset should
depend on the sequence of commands used to derive it, and I can't think of
another example in R or S where this is the case.  Although R 0.64.2 and
S-PLUS behave differently here, they both conform to this notion.

Underlying my argument is the notion that two time series with a single
observation and the same start value are identical.  The fact that ts()
can construct two such time series with different frequencies blows a
large hole in my argument so I'll stop.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 12 11:10:53 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 12 Aug 1999 12:10:53 +0200
Subject: weighted.residuals() ?
Message-ID: <199908121010.MAA07648@sophie.ethz.ch>

This function is not documented (and not available in S-plus).
I do think it is a useful utility (and should be documented).
However, currently

    weighted.residuals <- function(obj)
    {
	w <- weights(obj)
	if(is.null(w)) residuals(obj)
	else (sqrt(w)*residuals(obj))[w!=0]
    }

where I think the "[w!=0]" is really not at all desired.
It makes sum(weighted.residuals(..)^2) slightly faster, 
however,  weighted.residuals() should return a residual vector of proper
length!

I'm about to drop the above "[w!=0]", document weighted.residuals
and fix  deviance.lm(.) according to John Maindonald's bug report
(and use his suggestion to make cooks.distance() work for glm()'s ..).

Any objections ? [please in the next 5 hours or so...]

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 12 11:42:18 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 12 Aug 1999 12:42:18 +0200 (CEST)
Subject: R Add-on Packages
Message-ID: <14258.42250.271149.861624@fangorn.ci.tuwien.ac.at>

As the 0.65 release should happen within the next few weeks, now would
be a good time for updating/improving our impressive collection of add
on packages.

Issues to look look into include:

* Valid and complete DESCRIPTION, TITLE and INDEX files.

* Complete data/00Index files (if applicable).

* All examples should be executable to that R CMD check passes.

* src/Makefile (if there, most likely not needed) should be correct
(FLIBS etc).  Follow the etc/Makeconf rules ...

Minor issues:

* The formatting of TITLE files is still not consistent.  Please follow
the format of the add-ons in the R distribution.

* It would be nice if compilation with `-Wall' would not give any
warnings ...

* Please watch the Rdconv messages when building the help files from the
Rd sources, and try to fix problems with missing links.  Note that Fritz
is planning on extending the \link{} command so that it can point to an
entry in a different package, but this is still WIP.

* Note that INSTALL now runs configure and cleanup scripts.  If your
package needs something that may not be available, then please use
configure.  Package e1071 may serve as an example.

Fritz and I are planning on writing a script that automates the process
of building CORRECT packages.  But again, WIP ...

I am looking forward to all improvements ...

-k

PS.  Now that we have a ts package in 0.65, should we get rid of bats
and tseries?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 12 12:56:39 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 12 Aug 1999 12:56:39 +0100 (BST)
Subject: R Add-on Packages
In-Reply-To: <14258.42250.271149.861624@fangorn.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.05.9908121254020.14956-100000@auk.stats>

On Thu, 12 Aug 1999, Kurt Hornik wrote:

> PS.  Now that we have a ts package in 0.65, should we get rid of bats
> and tseries?

There are valuable things in tseries not in ts (deliberately, because
they are specialized or there are special copyright issues). I know
Adrian Trapletti is planning a new version of tseries that works with
0.65's ts, when that is final.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Adrian.Trapletti@wu-wien.ac.at  Thu Aug 12 13:04:13 1999
From: Adrian.Trapletti@wu-wien.ac.at (Adrian Trapletti)
Date: Thu, 12 Aug 1999 12:04:13 +0000
Subject: R Add-on Packages
References: <14258.42250.271149.861624@fangorn.ci.tuwien.ac.at>
Message-ID: <37B2B83D.924CB317@wu-wien.ac.at>

Kurt Hornik wrote:

> PS.  Now that we have a ts package in 0.65, should we get rid of bats
> and tseries?

Concerning tseries. I will update tseries as soon as the official ts in R-0.65 is
released, i.e., remove the already implemented functions and so on. I already have
some new functions such as White's and Terasvirta's test for neglected
non-linearity and a few other useful routines will be implemented such as
Johanson's VAR methodology, i.e. we can remove the old tseries and I will post the
new version as soon I have finished my work.

Adrian

>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--
Adrian Trapletti, Vienna University of Economics and Business
Administration, Augasse 2-6, A-1090 Vienna, Austria
Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
Email: adrian.trapletti@wu-wien.ac.at



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 12 15:03:56 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Aug 1999 16:03:56 +0200
Subject: weighted.residuals() ?
In-Reply-To: Martin Maechler's message of "Thu, 12 Aug 1999 12:10:53 +0200"
References: <199908121010.MAA07648@sophie.ethz.ch>
Message-ID: <x2g11pjdtf.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> I'm about to drop the above "[w!=0]", document weighted.residuals
> and fix  deviance.lm(.) according to John Maindonald's bug report
> (and use his suggestion to make cooks.distance() work for glm()'s ..).
> 
> Any objections ? [please in the next 5 hours or so...]

Be *very* careful! The zero-weight issue has bitten us several times
before. Check whether your change would be consistent with what lm/glm
does in such cases. (In particular, degrees of freedom calculations can
get in trouble).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 12 17:42:43 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 12 Aug 1999 18:42:43 +0200
Subject: weighted.residuals() ?
In-Reply-To: <x2g11pjdtf.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 12 Aug 1999 16:03:56 +0200)
References: <199908121010.MAA07648@sophie.ethz.ch> <x2g11pjdtf.fsf@blueberry.kubism.ku.dk>
Message-ID: <199908121642.SAA21912@sophie.ethz.ch>

>>>>> On 12 Aug 1999 16:03, Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> said:

    PD> Martin Maechler <maechler@stat.math.ethz.ch> writes:
    >> I'm about to drop the above "[w!=0]", document weighted.residuals
    >> and fix deviance.lm(.) according to John Maindonald's bug report
    >> (and use his suggestion to make cooks.distance() work for glm()'s
    >> ..).
    >> 
    >> Any objections ? [please in the next 5 hours or so...]

    PD> Be *very* careful! The zero-weight issue has bitten us several
    PD> times before. Check whether your change would be consistent with
    PD> what lm/glm does in such cases. (In particular, degrees of freedom
    PD> calculations can get in trouble).

weighted.residuals() is currently really only used in lm.influence.R;
but the `trouble' is that these {lm diagnostics functions} really all drop
the cases with weight=0.

I'm currently updating documentation {still using fixed deviance.lm() etc}.
weighted.residuals() now has

    \title{Computed Weighted Residuals}
    \usage{
    weighted.residuals(obj, drop0 = TRUE)
    }
    \arguments{
     \item{obj}{\R object, typically of class \code{\link{lm}} or \code{\link{glm}}.}
     \item{drop0}{logical.  If \code{TRUE}, drop all cases with
	 \code{\link{weights} == 0}.}
    }

--
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rprice@honlab.nmfs.hawaii.edu  Thu Aug 12 22:27:20 1999
From: rprice@honlab.nmfs.hawaii.edu (rprice@honlab.nmfs.hawaii.edu)
Date: Thu, 12 Aug 1999 23:27:20 +0200 (MET DST)
Subject: Installation problem on Redhat 6.0 (PR#247)
Message-ID: <199908122127.XAA19789@pubhealth.ku.dk>

Full_Name: Russell Price
Version: 0.64.2
OS: Redhat 6.0
Submission from: (NULL) (128.171.242.1)


When attempting to compile, I get the following error message:

gcc -g -O2 -I../include -I../../src/include  -c d1mach.c -o d1mach.o
gcc: Internal compiler error: program cc1 got fatal signal 6
make[2]: *** [d1mach.o] Error 1
make[2]: Leaving directory `/usr/local/src/R-0.64.2/src/nmath'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/usr/local/src/R-0.64.2/src'
make: *** [R] Error 1

Compiler is gcc 2.8.1 / g77 0.5.23

Have you seen this before?

Thank you for your help.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 12 23:13:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 12 Aug 1999 23:13:47 +0100 (BST)
Subject: Installation problem on Redhat 6.0 (PR#247)
In-Reply-To: <199908122127.XAA19789@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9908122306430.588-100000@auk.stats>

On Thu, 12 Aug 1999 rprice@honlab.nmfs.hawaii.edu wrote:

> Full_Name: Russell Price
> Version: 0.64.2
> OS: Redhat 6.0
> Submission from: (NULL) (128.171.242.1)
> 
> 
> When attempting to compile, I get the following error message:
> 
> gcc -g -O2 -I../include -I../../src/include  -c d1mach.c -o d1mach.o
> gcc: Internal compiler error: program cc1 got fatal signal 6
> make[2]: *** [d1mach.o] Error 1
> make[2]: Leaving directory `/usr/local/src/R-0.64.2/src/nmath'
> make[1]: *** [R] Error 1
> make[1]: Leaving directory `/usr/local/src/R-0.64.2/src'
> make: *** [R] Error 1
> 
> Compiler is gcc 2.8.1 / g77 0.5.23
> 
> Have you seen this before?

No, but those are not the compilers that came with my version of RH6.0.
I have no problems with

blackcap% gcc --version
egcs-2.91.66
blackcap% g77 --version
GNU Fortran 0.5.24-19981002

the latter being from the egcs-g77 rpm, if I recall correctly. We ahve
seem similar problems with people using the compilers for RH5.1 on RH6.0.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 13 00:27:13 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 13 Aug 1999 00:27:13 +0100 (BST)
Subject: ts in R (again)
Message-ID: <Pine.GSO.4.05.9908130015590.21254-100000@auk.stats>

I have done a re-working of the time series code in base R and library
ts that will appear in Friday's snapshot. I am sure at least one
person will be dissatisfied, but I am convinced there are fewer
errors than there were before (I found more than 20, as well as several
documented features that did not exist.)

The principles in the code are:

tsp attributes can only go on vectors of length at least one, must
have a positive frequency, start and end consistent with length. This
is all S-compatible (with the implementation, if not the
documentation).

Default methods and ts methods will where possible make use of the tsp
attribute information (as in S), but ts methods will return class
"ts".  In general R code is expected to use class "ts" (and class
"mts" which inherits from it for multivariate time series), but the
scheme is intended to allow more general classes using the tsp attribute
that may or may not inherit from "ts".  To facilitate this, the
function ts() has argument `class' that governs the class of the
returned object. For strict S compatibility this should be "none".

start.default and end.default were quite unreliable: I had Jan 1995
reported as c(1994, 13), for example. I have tried to make them more
robust. For example, try
> y <- ts(1:120, end=10-1e-7, frequency=12)
> end(y)
[1] 9 13
in S3 (with a warning) and R0.64.2 (which fails to print y). 
This does not seem worth copying (or does Paul Gilbert so instruct?)

"ts" class is only added by ts() and as.ts() (makes use of a tsp
attribute, as in S and unlike current R).  There seems no reason for
diff.default() or window.default() to change the class to "ts" (only),
for example.  I think they should preserve the class, and they do in
my versions.

"ts" class is only removed by tsp(x) <- NULL and by using subsets.  I
have taken Martyn Plummer's advice (PR#217) and made subsetting except
x[, blah] remove the "ts" class. In principle I would like to have
kept it, but at least code works this way!  There were too many problems
with the existing code, for example with matrix indices. (If "[.ts"
is to be special, it has to work in all cases.)  window() can now extract
regular sub-samples. 

There is one change that occurs if library(ts) is used, which is that
simple arithmetic (+ - * /) works on time-aligned series, so that
e.g.

x - 0.8*lag(x, -3)

does what you would expect (otherwise you get 0.2*x).  It is currently
optional, as I am unsure what this might break (although I can find
nothing, and it has been silently there for a week). Should this become
standard?

Two other things I would like opinions on:

1) Given multiple series, plot.ts plots them on a single y scale, and
plot.mts uses separate plots with a common x. Each has disadvantages.
Should we try to switch between the styles depending on the inputs,
and if so how?

2) I think the current R style of

>  y <- ts(1:120, end=10-1e-7,frequency=12)
> y
   Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
0   NA   1   2   3   4   5   6   7   8   9  10  11
1   12  13  14  15  16  17  18  19  20  21  22  23
2   24  25  26  27  28  29  30  31  32  33  34  35
3   36  37  38  39  40  41  42  43  44  45  46  47
4   48  49  50  51  52  53  54  55  56  57  58  59
5   60  61  62  63  64  65  66  67  68  69  70  71
6   72  73  74  75  76  77  78  79  80  81  82  83
7   84  85  86  87  88  89  90  91  92  93  94  95
8   96  97  98  99 100 101 102 103 104 105 106 107
9  108 109 110 111 112 113 114 115 116 117 118 119
10 120  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA

is confusing, not least as it is it impossible to distinguish NAs at the
ends from NAs generated by printing. I had a variant in library ts that
used format to get blanks. Should I make that the default?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 13 07:24:41 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Aug 1999 08:24:41 +0200
Subject: Installation problem on Redhat 6.0 (PR#247)
In-Reply-To: Prof Brian D Ripley's message of "Thu, 12 Aug 1999 23:13:47 +0100 (BST)"
References: <Pine.GSO.4.05.9908122306430.588-100000@auk.stats>
Message-ID: <x2n1vwdwpi.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> > Compiler is gcc 2.8.1 / g77 0.5.23
> > 
> > Have you seen this before?
> 
> No, but those are not the compilers that came with my version of RH6.0.

...and there have been previous reports of trouble with gcc 2.8.x.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Adrian.Trapletti@wu-wien.ac.at  Fri Aug 13 14:15:42 1999
From: Adrian.Trapletti@wu-wien.ac.at (Adrian Trapletti)
Date: Fri, 13 Aug 1999 13:15:42 +0000
Subject: strange scan, count.fields
Message-ID: <37B41A7E.53104D7D@wu-wien.ac.at>

Does anybody understand what's going on here:

I have the following ascii file called "y.txt"


"USD-DEM" "USD-JPY" "DEM-JPY"
 0.344901 4.78712 4.442
 0.345715 4.7882 4.44189
 0.350657 4.79065 4.44177
 0.35347 4.79065 4.43616
 0.35368 4.78957 4.43622
 0.35361 4.78982 4.43669
 0.353821 4.79036 4.43622
 0.352767 4.78899 4.43634
 0.353119 4.78916 4.43545


In R I do the following:


wu161215{adrian}28: R

R : Copyright 1999, The R Development Core Team
Version 0.64.2  (July 3, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> x<-scan("y.txt")
Error: "scan" expected a real got ""USD-DEM""
> row.lens <- count.fields("y.txt")
> any(row.lens != row.lens[1])
[1] TRUE
>
> x<-scan("y.txt", skip=1)
Read 27 items
> row.lens <- count.fields("y.txt")
> any(row.lens != row.lens[1])
[1] FALSE
>


scan seems to produce some side-effect (not properly close the file?)
I am using Redhat 5.2 and in general R seems to be rather stable...

Thanks
Adrian

--
Adrian Trapletti, Vienna University of Economics and Business
Administration, Augasse 2-6, A-1090 Vienna, Austria
Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
Email: adrian.trapletti@wu-wien.ac.at



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Aug 13 16:02:33 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 13 Aug 1999 17:02:33 +0200
Subject: strange scan, count.fields --> BUG
In-Reply-To: <37B41A7E.53104D7D@wu-wien.ac.at> (message from Adrian Trapletti
 on Fri, 13 Aug 1999 13:15:42 +0000)
References: <37B41A7E.53104D7D@wu-wien.ac.at>
Message-ID: <199908131502.RAA12663@sophie.ethz.ch>

Adrian, you seem to report several things at once,...

I think, first you really don't want scan but rather read.table
with your file 

>> I have the following ascii file called "y.txt"
>> 
>> "USD-DEM" "USD-JPY" "DEM-JPY"
>>  0.344901 4.78712 4.442
>>  0.345715 4.7882 4.44189
>>  0.350657 4.79065 4.44177
>>  0.35347 4.79065 4.43616
>>  0.35368 4.78957 4.43622
>>  0.35361 4.78982 4.43669
>>  0.353821 4.79036 4.43622
>>  0.352767 4.78899 4.43634
>>  0.353119 4.78916 4.43545

which gives

R> str(read.table("y.txt",head=T))
`data.frame':  9 obs. of  3 variables:
 $ USD-DEM: num  0.345 0.346 0.351 0.353 0.354 ...
 $ USD-JPY: num  4.79 4.79 4.79 4.79 4.79 ...
 $ DEM-JPY: num  4.44 4.44 4.44 4.44 4.44 ...

---------

Then you report that  scan() leaves something ``behind'' {open file, ??}
after stopping with an error.
This is clearly a bug and is still present in the current 0.65 snapshot.
After a few tests, I see that the problem seems to happen only
(sometimes) when the text leading to the error contains a ` " ' .
The following is even simpler :

 write(c(paste("\"", LETTERS[1:3],"\"", sep=""),1:3), nc=3)
 scan("data")         # gives error as it should
 count.fields("data") # will be wrong
 count.fields("data") # is now ok : 3 3

Gives (in 0.65 snapshot)

    >  write(c(paste("\"", LETTERS[1:3],"\"", sep=""),1:3), nc=3)
    >  scan("data")         # gives error as it should
    Error: "scan" expected a real got ""A""
    >  count.fields("data") # will be wrong
    [1] 4 3
    >  count.fields("data") # is now ok : 3 3
    [1] 3 3

--> I'll report to R-bugs
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Aug 13 16:43:48 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 13 Aug 1999 17:43:48 +0200 (MET DST)
Subject: scan() + error interferes with count.fields() in some cases (PR#248)
Message-ID: <199908131543.RAA28991@pubhealth.ku.dk>

As just mentioned on R-devel,
and originally reported (somewhat less concisely) by Adrian Trapletti,

This code

 write(c(paste("\"", LETTERS[1:3],"\"", sep=""),1:3), nc=3)
 scan("data")         # gives error as it should
 count.fields("data") # will be wrong
 count.fields("data") # is now ok : 3 3

gives (in 0.64.2 and in 0.65 snapshot)

    >  write(c(paste("\"", LETTERS[1:3],"\"", sep=""),1:3), nc=3)
    >  scan("data")         # gives error as it should
    Error: "scan" expected a real got ""A""
    >  count.fields("data") # will be wrong
    [1] 4 3
    >  count.fields("data") # is now ok : 3 3
    [1] 3 3

>From my experiments, the problem seems to be the leading `` " '' ,
since the following also fails  {and btw mixes up ESS ...}

  write(c("\"A", "B", "C",1:3), nc=3)
  scan("data")         # gives error as it should
  count.fields("data") # 3 3
  count.fields("data") # >> Error in count.fields..: string terminated by nl..

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug 16 08:05:15 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 16 Aug 1999 09:05:15 +0200
Subject: configure / linking problem when using hdf5
Message-ID: <199908160705.JAA04507@sophie.ethz.ch>


I've installed hdf5 [library & includes] here locally, last week.
[see ?hdf5save in R]

There is a remaining compilation / linking problem  for me:

The hdf5 library uses "compress2" a routine defined in Gnu's zlib,
but not available in the zlib that comes with X11R6.3 (which we have installed).

Now unfortunately,
the final link statement for R (0.65) [for me, with hdf5 enabled] is 

 gcc -o ../../bin/R.X11 arithmetic.o ....[omitted]  version.o  \
 ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE -L/usr/local/X11R6.3/lib -R/usr/local/X11R6.3/lib -lX11 -lsocket  -lnsl -R/opt/SUNWspro/lib  -L/opt/SUNWspro/lib -L/opt/SUNWspro/SC4.2/lib -L/usr/ccs/lib -L/usr/lib /opt/SUNWspro/SC4.2/lib/libM77.a -lF77 -lsunmath -lm -lcx  -lreadline -lhdf5 -lz -ldl -ltermcap -lm

Undefined			first referenced
 symbol  			    in file
compress2                           /usr/local/lib/libhdf5.a(H5Z.o)
ld: fatal: Symbol referencing errors. No output written to ../../bin/R.X11

-------------
Which happens because there was an  -L/usr/local/X11R6.3/lib 
before the "-lhdf5 -lz".
In the local LD_LIBRARY_PATH,  
   /usr/local/lib (which has the proper libz.a  *with* compress2)
   comes before the X11/lib (which has the wrong  libz.a).

Of course, I can manually 
put -L/usr/local/lib  BEFORE the -L/usr/local/X11R6.3/lib,
but I wonder what would be recommended, "officially".

Putting " -lhdf5 -lz "  BEFORE  "-L/usr/local/X11R6.3/lib"
simply fails as well [undefined symbol "compress2"].

Having two different "libz.a" in LD_LIBRARY_PATH doesn't make sense anyway.
Would any of you know if I can safely get rid of X11's one now that I have
GNU's ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 16 08:19:59 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 16 Aug 1999 09:19:59 +0200 (CEST)
Subject: configure / linking problem when using hdf5
In-Reply-To: <199908160705.JAA04507@sophie.ethz.ch>
References: <199908160705.JAA04507@sophie.ethz.ch>
Message-ID: <14263.48031.406276.341146@fangorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

> I've installed hdf5 [library & includes] here locally, last week.
> [see ?hdf5save in R]

> There is a remaining compilation / linking problem  for me:

> The hdf5 library uses "compress2" a routine defined in Gnu's zlib,
> but not available in the zlib that comes with X11R6.3 (which we have installed).

> Now unfortunately,
> the final link statement for R (0.65) [for me, with hdf5 enabled] is 

>  gcc -o ../../bin/R.X11 arithmetic.o ....[omitted]  version.o  \
>  ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE -L/usr/local/X11R6.3/lib -R/usr/local/X11R6.3/lib -lX11 -lsocket  -lnsl -R/opt/SUNWspro/lib  -L/opt/SUNWspro/lib -L/opt/SUNWspro/SC4.2/lib -L/usr/ccs/lib -L/usr/lib /opt/SUNWspro/SC4.2/lib/libM77.a -lF77 -lsunmath -lm -lcx  -lreadline -lhdf5 -lz -ldl -ltermcap -lm

> Undefined			first referenced
>  symbol  			    in file
> compress2                           /usr/local/lib/libhdf5.a(H5Z.o)
> ld: fatal: Symbol referencing errors. No output written to ../../bin/R.X11

> -------------
> Which happens because there was an  -L/usr/local/X11R6.3/lib 
> before the "-lhdf5 -lz".
> In the local LD_LIBRARY_PATH,  
>    /usr/local/lib (which has the proper libz.a  *with* compress2)
>    comes before the X11/lib (which has the wrong  libz.a).

> Of course, I can manually 
> put -L/usr/local/lib  BEFORE the -L/usr/local/X11R6.3/lib,
> but I wonder what would be recommended, "officially".

> Putting " -lhdf5 -lz "  BEFORE  "-L/usr/local/X11R6.3/lib"
> simply fails as well [undefined symbol "compress2"].

> Having two different "libz.a" in LD_LIBRARY_PATH doesn't make sense
> anyway.  Would any of you know if I can safely get rid of X11's one
> now that I have GNU's ?

We currently have

  ALL_LIBS = $(RLIBS) $(ALL_X_LIBS) $(FLIBS) $(R_XTRA_LIBS) $(LIBS)

I assume that the order is mostly for historic reasons.  You could try
putting ALL_X_LIBS last and see what happens ...e.g.,

  ALL_LIBS = $(RLIBS) $(R_XTRA_LIBS) $(FLIBS) $(LIBS) $(ALL_X_LIBS)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Aug 16 21:49:07 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Tue, 17 Aug 1999 08:49:07 +1200
Subject: ts in R (again)
In-Reply-To: <Pine.GSO.4.05.9908130015590.21254-100000@auk.stats>; from Prof Brian D Ripley on Fri, Aug 13, 1999 at 12:27:13AM +0100
References: <Pine.GSO.4.05.9908130015590.21254-100000@auk.stats>
Message-ID: <19990817084907.A5910@stat1.stat.auckland.ac.nz>

On Fri, Aug 13, 1999 at 12:27:13AM +0100, Prof Brian D Ripley wrote:
> Two other things I would like opinions on:
> 
> 1) Given multiple series, plot.ts plots them on a single y scale, and
> plot.mts uses separate plots with a common x. Each has disadvantages.
> Should we try to switch between the styles depending on the inputs,
> and if so how?

Genuine query:  How do I do I get a simple lagged variable plot like

	plot(lag(x), x)
	lines(lowess(lag(x), x))

We don't seem to have any simple way of doing this.  Do we need a special
function for this (with a panel function for effects like lowess/loess)?


> 2) I think the current R style of
> 
> >  y <- ts(1:120, end=10-1e-7,frequency=12)
> > y
>    Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
> 0   NA   1   2   3   4   5   6   7   8   9  10  11
> 1   12  13  14  15  16  17  18  19  20  21  22  23
> 2   24  25  26  27  28  29  30  31  32  33  34  35
> 3   36  37  38  39  40  41  42  43  44  45  46  47
> 4   48  49  50  51  52  53  54  55  56  57  58  59
> 5   60  61  62  63  64  65  66  67  68  69  70  71
> 6   72  73  74  75  76  77  78  79  80  81  82  83
> 7   84  85  86  87  88  89  90  91  92  93  94  95
> 8   96  97  98  99 100 101 102 103 104 105 106 107
> 9  108 109 110 111 112 113 114 115 116 117 118 119
> 10 120  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA
> 
> is confusing, not least as it is it impossible to distinguish NAs at the
> ends from NAs generated by printing. I had a variant in library ts that
> used format to get blanks. Should I make that the default?

Yes.

I'm a little bit worried about having libraries overide "base"
methods.  For efficiency reasons it would be better to attach libraries
after the "base" libraries.  That would mean that attempted overrides
would not work.

We can't attach libraries after "base" at present, but I would like to
make it the default behaviour (if politically possible).  That makes it 
important to get agreement of what the "right" basic methods are and to
get them into the base.

-- 
+----------------------------------------------------------------------+
| Ross Ihaka                         Email:  ihaka@stat.auckland.ac.nz |
| Department of Statistics           Phone:  (64-9) 373-7599 x 5054    |
| University of Auckland             Fax:    (64-9) 373-7018           |
| Private Bag 92019                                                    |
| Auckland, New Zealand                                                |
+----------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 16 22:50:52 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 16 Aug 1999 22:50:52 +0100 (BST)
Subject: ts in R (again)
In-Reply-To: <19990817084907.A5910@stat1.stat.auckland.ac.nz>
Message-ID: <Pine.GSO.4.05.9908162225540.29169-100000@auk.stats>

On Tue, 17 Aug 1999, Ross Ihaka wrote:

> On Fri, Aug 13, 1999 at 12:27:13AM +0100, Prof Brian D Ripley wrote:
> > Two other things I would like opinions on:
> > 
> > 1) Given multiple series, plot.ts plots them on a single y scale, and
> > plot.mts uses separate plots with a common x. Each has disadvantages.
> > Should we try to switch between the styles depending on the inputs,
> > and if so how?
> 
> Genuine query:  How do I do I get a simple lagged variable plot like
> 
> 	plot(lag(x), x)
> 	lines(lowess(lag(x), x))
> 
> We don't seem to have any simple way of doing this.  Do we need a special
> function for this (with a panel function for effects like lowess/loess)?

As of a few days ago, you can do precisely plot(lag(x), x), as plot.ts has
a `scatterplot' method, and that aligns the time bases. You probably want
plot(lag(x), x, type="p"), but I have not changed the previous default.

The lowess thing is a little more difficult. I think you want

xy <- ts.intersect(z=lag(x), x)
lines(lowess(xy[,1], xy[,2]))

That's the trick: set up all the objects you want, ts.intersect them
and unpick.  Some functions like plot.ts and Ops.ts do this for you.

> > 2) I think the current R style of
> > 
> > >  y <- ts(1:120, end=10-1e-7,frequency=12)
> > > y
> >    Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
> > 0   NA   1   2   3   4   5   6   7   8   9  10  11
> > 1   12  13  14  15  16  17  18  19  20  21  22  23
> > 2   24  25  26  27  28  29  30  31  32  33  34  35
> > 3   36  37  38  39  40  41  42  43  44  45  46  47
> > 4   48  49  50  51  52  53  54  55  56  57  58  59
> > 5   60  61  62  63  64  65  66  67  68  69  70  71
> > 6   72  73  74  75  76  77  78  79  80  81  82  83
> > 7   84  85  86  87  88  89  90  91  92  93  94  95
> > 8   96  97  98  99 100 101 102 103 104 105 106 107
> > 9  108 109 110 111 112 113 114 115 116 117 118 119
> > 10 120  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA
> > 
> > is confusing, not least as it is it impossible to distinguish NAs at the
> > ends from NAs generated by printing. I had a variant in library ts that
> > used format to get blanks. Should I make that the default?
> 
> Yes.

Done on Saturday.

> I'm a little bit worried about having libraries overide "base"
> methods.  For efficiency reasons it would be better to attach libraries
> after the "base" libraries.  That would mean that attempted overrides
> would not work.

There are now no overrides in library(ts), but it was very useful to have
them when testing things out. S has the `first' flag which is normally
false, but can be used to force overrides. I find this useful, not least to
ensure that my library comes in front of a broken one. (Someone out there
with a package on CRAN thinks plot.profile is not the name of a plot method
for profile objects, for example, even though that is in the White Book.)

On the basis of feedback so far, I have altered plot.ts to have a plot.type
flag that defaults to the plot.mts style, and altered print.ts to use
blanks not NAs.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Aug 16 23:52:29 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Tue, 17 Aug 1999 00:52:29 +0200 (MET DST)
Subject: axis ignores srt/crt (PR#249)
Message-ID: <199908162252.AAA18622@pubhealth.ku.dk>


Rotated text for axis labels should be possible with one of 
par(srt=90)
axis(1,at,labels)
par(srt=0)

or 

axis(1,at,labels,srt=90)

(or similar with crt instead of srt)

None of these works in pre0.65 or in 0.64.2

           _                           
platform   sparc-sun-solaris2.7        
arch       sparc                       
os         solaris2.7                  
system     sparc, solaris2.7           
status     Under development (unstable)
status.rev 0                           
major      0                           
minor      65.0                        
year       1999                        
month      August                      
day        13                          
language   R            


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 17 09:53:01 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 17 Aug 1999 10:53:01 +0200
Subject: axis ignores srt/crt (PR#249)
In-Reply-To: <199908162252.AAA18622@pubhealth.ku.dk>
 (thomas@biostat.washington.edu)
References: <199908162252.AAA18622@pubhealth.ku.dk>
Message-ID: <199908170853.KAA00649@sophie.ethz.ch>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> Rotated text for axis labels should be possible with one of
    TL> par(srt=90) axis(1,at,labels) par(srt=0)

    TL> or

    TL> axis(1,at,labels,srt=90)

    TL> (or similar with crt instead of srt)

    TL> None of these works in pre0.65 or in 0.64.2

I'm not sure if you are right...

The standard way to get rotated axis labels used to be
    par(las = {0,1,2,3})

The doc (?par) has

     las: numeric in {0,1,2,3}; the style of axis labels.  0 =
          always parallel to the axis [default], 1 = always
          horizontal, 2 = always perpendicular to the axis,
          3 = always vertical.

Try
	par(mfrow=c(2,2))
	for(las in 0:3) plot(1, las = las, main = paste("las =",las))

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Aug 17 16:21:08 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 17 Aug 1999 08:21:08 -0700 (PDT)
Subject: axis ignores srt/crt (PR#249)
In-Reply-To: <199908170853.KAA00649@sophie.ethz.ch>
Message-ID: <Pine.GSO.4.10.9908170819300.15758-100000@wompom.biostat.washington.edu>

On Tue, 17 Aug 1999, Martin Maechler wrote:
> 
> The standard way to get rotated axis labels used to be
>     par(las = {0,1,2,3})
> 

Ok. It's not a bug, it's an incompatibility -- I was trying to port some
code from S-PLUS.  I'll use par(las).

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Aug 18 09:26:42 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 18 Aug 1999 09:26:42 +0100 (BST)
Subject: diag()
Message-ID: <Pine.GSO.3.96.990818091901.648B-100000@laplace>

I would like to suggest a slight modification to diag().  In the case
where x is a matrix with both row names and column names the same, it
would be reasonable if the resulting vector also had those names.  I often
use diag() on variance matrices, where this modification is helpful. 

The modification requires replacing 

    if (is.matrix(x) && nargs() == 1) 
        return(c(x)[1 + 0:(min(dim(x)) - 1) * (dim(x)[1] + 1)])

the first two lines, with something like

    if (is.matrix(x) && nargs() == 1) {
        y <- c(x)[1 + 0:(min(dim(x)) - 1) * (dim(x)[1] + 1)]
        if (!is.null(nms <- dimnames(x)) && all(nms[[1]]==nms[[2]]))
          names(y) <- nms[[1]]
        return(y)
    }

Just a thought,  Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 18 09:48:04 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 18 Aug 1999 10:48:04 +0200
Subject: diag(); feature freeze; please beta-test..
In-Reply-To: <Pine.GSO.3.96.990818091901.648B-100000@laplace> (message from
 Jonathan Rougier on Wed, 18 Aug 1999 09:26:42 +0100 (BST))
References: <Pine.GSO.3.96.990818091901.648B-100000@laplace>
Message-ID: <199908180848.KAA03018@sophie.ethz.ch>

>>>>> On Wed, 18 Aug 1999 09:26:42 +0100 (BST), Jonathan Rougier <J.C.Rougier@durham.ac.uk> said:

    JonR> I would like to suggest a slight modification to diag().  In the
    JonR> case where x is a matrix with both row names and column names the
    JonR> same, it would be reasonable if the resulting vector also had
    JonR> those names.  I often use diag() on variance matrices, where this
    JonR> modification is helpful.

    JonR> The modification requires replacing 

    JonR> if (is.matrix(x) && nargs() == 1) 
    JonR>    return(c(x)[1 + 0:(min(dim(x)) - 1) * (dim(x)[1] + 1)])

    JonR> the first two lines, with something like

    JonR> if (is.matrix(x) && nargs() == 1) {
    JonR>   y <- c(x)[1 + 0:(min(dim(x)) - 1) * (dim(x)[1] + 1)]
    JonR>   if (!is.null(nms <- dimnames(x)) && all(nms[[1]]==nms[[2]]))
    JonR>     names(y) <- nms[[1]]
    JonR>   return(y)
    JonR> }

    JonR> Just a thought,  Jonathan.

    JonR> Jonathan Rougier                       Science Laboratories
    JonR> Department of Mathematical Sciences    South Road
    JonR> University of Durham                   Durham DH1 3LE


This seems like a good idea [ and I think I vaguely remember that I would
			      have wanted that myself, some time],
however,  R 0.65 is in ``feature freeze'' now
(and release date is scheduled for Aug.27 ..)

Yes, please ``everyone'' : 
Now is pre-tester time,
     Get "R-devel.tar.gz" from a CRAN site near you,
unpack and install {from source!!},
and send bug reports to R-core or R-devel,
*not* to R-bugs -- since bugs in non-released versions shouldn't make it
into the R repository I think.

{I hope to not forget to put the above diag() improvement into the next
  release after 0.65(.0)..}

Martin.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Aug 18 11:14:56 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 18 Aug 1999 11:14:56 +0100 (BST)
Subject: feature freeze; please beta-test..
Message-ID: <199908181014.LAA08544@toucan.stats.ox.ac.uk>

> From: Martin Maechler <maechler@stat.math.ethz.ch>

[... about something else]

> R 0.65 is in ``feature freeze'' now
> (and release date is scheduled for Aug.27 ..)
> 
> Yes, please ``everyone'' : 
> Now is pre-tester time,
>      Get "R-devel.tar.gz" from a CRAN site near you,
> unpack and install {from source!!},
> and send bug reports to R-core or R-devel,
> *not* to R-bugs -- since bugs in non-released versions shouldn't make it
> into the R repository I think.

Can we also ask that you fill in the form in the PLATFORMS file and
send it in (to R-core) if you successfully run make check.  That file
is getting outdated, and we are proposing to remove all entries for
pre-0.65 versions. We are particularly interested in reports for less
common systems, i.e. not i386-GNU/Linux nor Solaris, and also of
builds of the gnome version.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman.buyukisik@ae.ge.com  Wed Aug 18 16:47:29 1999
From: osman.buyukisik@ae.ge.com (U-E59264-Osman F Buyukisik)
Date: Wed, 18 Aug 1999 11:47:29 -0400 (EDT)
Subject: R-devel Aug18 version on hpux10.20
Message-ID: <14266.52770.150464.86932@c1186.ae.ge.com>

Hello,

 configured with  gcc-2.95, hpux ld, hpux fort77, --with-readline

 I had three problems:

1. changed f77 to fort77 in Makeconf files/Makefile (I had
--with-f77=fort77 in the configure line)

2. readline : picked up that I had readline, but the include location
was inserted into the CFLAGS, and history was marked as
unavailable. Made changes to Makeconf  and etc/Makeconf 

3. LDFLAGS = -g -Wl,xx   was not acceptable to the hpux "ld" (both
have to go) Changed Makefile.

Then had a clean build.  Seems to able to load dynamic libs. 
Check fails at two locations:

is.infinite(.Machine$double.base ^ .Machine$double.max.exp)# overflow
[1] FALSE

 x <- 1:99/100
 all(abs(1 - x / asin(sin(x))) <= Meps)
[1] FALSE

Second one :
 [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[49]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE
[61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[97]  TRUE  TRUE  TRUE

Flaky math routines in hpux or gcc libc.


Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Aug 19 03:56:10 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 19 Aug 1999 14:56:10 +1200
Subject: axis ignores srt/crt (PR#249)
In-Reply-To: <199908162252.AAA18622@pubhealth.ku.dk>; from thomas@biostat.washington.edu on Tue, Aug 17, 1999 at 12:52:29AM +0200
References: <199908162252.AAA18622@pubhealth.ku.dk>
Message-ID: <19990819145610.A6868@stat1.stat.auckland.ac.nz>

On Tue, Aug 17, 1999 at 12:52:29AM +0200, thomas@biostat.washington.edu wrote:
> 
> Rotated text for axis labels should be possible with one of 
> par(srt=90)
> axis(1,at,labels)
> par(srt=0)
> 
> or 
> 
> axis(1,at,labels,srt=90)
> 
> (or similar with crt instead of srt)
> 
> None of these works in pre0.65 or in 0.64.2

This seems like a useful feature, but the S implementation seems
sightly odd.

	axis(1,at,srt=45,adj=1)

does rotate the labels, but

	axis(1,srt=45,adj=1)

does not.  Do you want this exact behaviour, or would always obeying
the srt= option make more sense?

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 19 06:54:27 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 19 Aug 1999 06:54:27 +0100 (BST)
Subject: R-devel Aug18 version on hpux10.20
In-Reply-To: <14266.52770.150464.86932@c1186.ae.ge.com>
Message-ID: <Pine.GSO.4.05.9908190648020.10425-100000@auk.stats>

On Wed, 18 Aug 1999, U-E59264-Osman F Buyukisik wrote:

> Hello,
> 
>  configured with  gcc-2.95, hpux ld, hpux fort77, --with-readline
> 
>  I had three problems:
> 
> 1. changed f77 to fort77 in Makeconf files/Makefile (I had
> --with-f77=fort77 in the configure line)
> 
> 2. readline : picked up that I had readline, but the include location
> was inserted into the CFLAGS, and history was marked as
> unavailable. Made changes to Makeconf  and etc/Makeconf 

That might be gcc-2.95. I found that its default include path is set up to
include prefix/include but not /usr/local/include, which are of course the
same only if you install in /usr/local (and that is where 2.8.1 is). This
means that for me readline is only found correctly when I use 2.95 if I
have CPPFLAGS set to -I/usr/local/include in config.site (readline was
installed in /usr/local).


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 19 08:18:49 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 19 Aug 1999 09:18:49 +0200 (CEST)
Subject: R-devel Aug18 version on hpux10.20
In-Reply-To: <14266.52770.150464.86932@c1186.ae.ge.com>
References: <14266.52770.150464.86932@c1186.ae.ge.com>
Message-ID: <14267.45017.588791.524861@fangorn.ci.tuwien.ac.at>

>>>>> U-E59264-Osman F Buyukisik writes:

> Hello,
>  configured with  gcc-2.95, hpux ld, hpux fort77, --with-readline

>  I had three problems:

> 1. changed f77 to fort77 in Makeconf files/Makefile (I had
> --with-f77=fort77 in the configure line)

What is the problem here?  You do --with-f77=fort77 but FC is set to
f77?

> 2. readline : picked up that I had readline, but the include location
> was inserted into the CFLAGS, and history was marked as
> unavailable. Made changes to Makeconf  and etc/Makeconf 

> 3. LDFLAGS = -g -Wl,xx   was not acceptable to the hpux "ld" (both
> have to go) Changed Makefile.

Which version is that?  What is the problem?  Works for me as detailed
in PLATFORMS (note that the configure setting is -Wl,-E).

> Then had a clean build.  Seems to able to load dynamic libs. 
> Check fails at two locations:

> ...

> Flaky math routines in hpux or gcc libc.

Not gcc, I would assume, as I get the same with cc.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 19 09:45:35 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 19 Aug 1999 10:45:35 +0200
Subject: date() should not append a final "\n" ?!?
Message-ID: <199908190845.KAA24041@sophie.ethz.ch>

Between R 0.63.2 and 0.64, the behavior of 
  date()
has been changed in order to become platform independent.
It now uses POSIX calls, basically

    time_t t;
    time(&t);
    return ctime(&t);


This currently returns (for me on Sun SPARC Solaris)

  > date()
  [1] "Thu Aug 19 10:36:28 1999\n"

where I think the final "\n" is really UNdesired.

---
Is this just my (Sun's) version of ctime(), i.e.,
does anyone *NOT* get the final new line ?

Thanks for your feedback.
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Aug 19 09:48:18 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 19 Aug 1999 10:48:18 +0200 (CEST)
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <199908190845.KAA24041@sophie.ethz.ch>
References: <199908190845.KAA24041@sophie.ethz.ch>
Message-ID: <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

MM> Between R 0.63.2 and 0.64, the behavior of 
MM>   date()
MM> has been changed in order to become platform independent.
MM> It now uses POSIX calls, basically

MM>     time_t t;
MM>     time(&t);
MM>     return ctime(&t);


MM> This currently returns (for me on Sun SPARC Solaris)

>> date()
MM>   [1] "Thu Aug 19 10:36:28 1999\n"

MM> where I think the final "\n" is really UNdesired.

Yes!


MM> ---
MM> Is this just my (Sun's) version of ctime(), i.e.,
MM> does anyone *NOT* get the final new line ?


Debian Linux:

R> date()
[1] "Thu Aug 19 10:47:17 1999\n"


.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mlthomps@yayoi.mt.m-kagaku.co.jp  Thu Aug 19 10:03:48 1999
From: mlthomps@yayoi.mt.m-kagaku.co.jp (mlthomps@yayoi.mt.m-kagaku.co.jp)
Date: Thu, 19 Aug 1999 11:03:48 +0200 (MET DST)
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1 (PR#252)
Message-ID: <199908190903.LAA12321@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0007_01BEEA08.8191B340
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Dear R Development Core Team,

I've been trying to install R ver. 0.64.0 on a
Dec-Alpha machine w/OSF1.

A couple of things go wrong.

After I type "make", the installation process
bombs while trying to compile the R.binary.
It reports the following:

     f77   -o ../../bin/R.binary {*** for brevity, I've deleted the =
filenames printed here ***}
     ld:  ../unix/libunix.a(system.o): main: multiply defined
     fort: Severe: Failed while trying to link.

I got around this by adding the "-nofor_main" option to the=20
compile statement in the Makefile in ../src/main directory.
Thus, make issues the command:
     f77  -nofor_main -o ../../bin/R.binary {*** again, deleted printed =
filenames ***}
That allowed the compilation to complete smoothly.

However, when I tried to run R, I got the following result:
----------------------------------------------------------------------
> R
ARGUMENT '' __ignored__

R : Copyright 1999, The R Development Core Team
Version 0.64.0  (April 8, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

Floating exception (core dumped)
----------------------------------------------------------------------


So, I tried it with the debugger dbx and got this output:
----------------------------------------------------------------------
> R --debugger dbx
dbx version 3.11.8
Type 'help' for help.


"system.c" not defined or not active
(dbx) run

R : Copyright 1999, The R Development Core Team
Version 0.64.0  (April 8, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

signal Floating point exception at   [InitArithmetic:5 =
+0x17c,0x120018ddc]       Source not available
(dbx) quit
----------------------------------------------------------------------


Any ideas what might be wrong and how I can get around it?

By the way, I use R on my PC without any glitches.
I'm impressed with the work you have done.

Thanks for providing such useful software,
-Mike

------------------------------------------------------------------
Michael L. Thompson, Ph.D.  | Phone:  (0)86-457-2805  |
Senior Consultant on Modeling & Statistics     | Fax:      =
(0)86-457-2027  |
Development and Engineering Research Center =20
E-mail: mlthomps@seigi2.mt.m-kagaku.co.jp
               mlthomps@alum.mit.edu
Mitsubishi Chemical Corporation, Mizushima Plant
3-10 Ushiodori, Kurashiki, Okayama 712  JAPAN
-------------------------------------------------------------------

------=_NextPart_000_0007_01BEEA08.8191B340
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD W3 HTML//EN">
<HTML>
<HEAD>

<META content=3Dtext/html;charset=3Diso-8859-1 =
http-equiv=3DContent-Type>
<META content=3D'"MSHTML 4.72.3110.7"' name=3DGENERATOR>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT color=3D#000000 size=3D2>Dear R Development Core =
Team,</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>I've been trying to install R ver. 0.64.0 on =
a</FONT></DIV>
<DIV><FONT size=3D2>Dec-Alpha machine w/OSF1.</FONT></DIV>
<DIV><FONT size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>A couple of things go wrong.</FONT></DIV>
<DIV><FONT size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>After I type &quot;make&quot;, the installation=20
process</FONT></DIV>
<DIV><FONT size=3D2>bombs while trying to compile the =
R.binary.</FONT></DIV>
<DIV><FONT size=3D2>It reports the following:</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp;&nbsp; f77&nbsp;&nbsp; -o =
.../../bin/R.binary=20
{*** for brevity, I've deleted the filenames printed here =
***}</FONT></DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp;&nbsp; ld:&nbsp;=20
.../unix/libunix.a(system.o): main: multiply =
defined<BR>&nbsp;&nbsp;&nbsp;&nbsp;=20
fort: Severe: Failed while trying to link.</FONT></DIV>
<DIV><FONT size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>I got around this by adding the =
&quot;-nofor_main&quot; option=20
to the </FONT></DIV>
<DIV><FONT size=3D2>compile statement </FONT><FONT size=3D2>in the =
Makefile in=20
.../src/main directory.</FONT></DIV>
<DIV><FONT size=3D2>Thus, make issues the command:</FONT></DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp;&nbsp; f77&nbsp; -nofor_main -o=20
../../bin/R.binary {*** again, deleted printed filenames =
***}</FONT></DIV>
<DIV><FONT size=3D2>That allowed the compilation to complete=20
smoothly.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>However, when I tried to run R, I =
got the=20
following result:</FONT></DIV>
<DIV><FONT color=3D#000000=20
size=3D2>----------------------------------------------------------------=
------</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2>&gt; R<BR>ARGUMENT '' =
__ignored__</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R : Copyright 1999, The R =
Development Core=20
Team<BR>Version 0.64.0&nbsp; (April 8, 1999)</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R is free software and comes with =
ABSOLUTELY NO=20
WARRANTY.<BR>You are welcome to redistribute it under certain=20
conditions.<BR>Type&nbsp;&nbsp;&nbsp; &quot;?license&quot; or=20
&quot;?licence&quot; for distribution details.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R is a collaborative project with =
many=20
contributors.<BR>Type&nbsp;&nbsp;&nbsp; &quot;?contributors&quot; for a=20
list.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>Type&nbsp;&nbsp;&nbsp; =
&quot;demo()&quot; for=20
some demos, &quot;help()&quot; for on-line help,=20
or<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
&quot;help.start()&quot; for a=20
HTML browser interface to help.<BR>Type&nbsp;&nbsp;&nbsp; =
&quot;q()&quot; to=20
quit R.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>Floating exception (core=20
dumped)<BR></FONT>-------------------------------------------------------=
---------------</DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>So, I tried it with the debugger dbx =
and got=20
this output:</FONT></DIV>
<DIV><FONT color=3D#000000=20
size=3D2></FONT>---------------------------------------------------------=
-------------</DIV>
<DIV><FONT color=3D#000000 size=3D2>&gt; R --debugger dbx<BR>dbx version =

3.11.8<BR>Type 'help' for help.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2><BR>&quot;system.c&quot; not defined =
or not=20
active<BR>(dbx) run</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R : Copyright 1999, The R =
Development Core=20
Team<BR>Version 0.64.0&nbsp; (April 8, 1999)</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R is free software and comes with =
ABSOLUTELY NO=20
WARRANTY.<BR>You are welcome to redistribute it under certain=20
conditions.<BR>Type&nbsp;&nbsp;&nbsp; &quot;?license&quot; or=20
&quot;?licence&quot; for distribution details.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R is a collaborative project with =
many=20
contributors.<BR>Type&nbsp;&nbsp;&nbsp; &quot;?contributors&quot; for a=20
list.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>Type&nbsp;&nbsp;&nbsp; =
&quot;demo()&quot; for=20
some demos, &quot;help()&quot; for on-line help,=20
or<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
&quot;help.start()&quot; for a=20
HTML browser interface to help.<BR>Type&nbsp;&nbsp;&nbsp; =
&quot;q()&quot; to=20
quit R.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>signal Floating point exception =
at&nbsp;&nbsp;=20
[InitArithmetic:5 =
+0x17c,0x120018ddc]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Source=20
not available<BR>(dbx)=20
quit<BR></FONT>----------------------------------------------------------=
------------</DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>Any ideas what might be wrong and =
how I can get=20
around it?</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>By the way, I use R on my PC without =
any=20
glitches.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT><FONT size=3D2>I'm impressed =
with the work=20
you have done.</FONT></DIV>
<DIV><FONT size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>Thanks for providing such useful =
software,</FONT></DIV>
<DIV><FONT size=3D2>-Mike</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT color=3D#000000=20
size=3D2>----------------------------------------------------------------=
--<BR>Michael=20
L. Thompson, Ph.D.&nbsp; | Phone:&nbsp; (0)86-457-2805&nbsp; |<BR>Senior =

Consultant on Modeling &amp; Statistics&nbsp;&nbsp;&nbsp;&nbsp; |=20
Fax:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (0)86-457-2027&nbsp; |<BR>Development =
and=20
Engineering Research Center&nbsp; <BR>E-mail: <A=20
href=3D"mailto:mlthomps@seigi2.mt.m-kagaku.co.jp">mlthomps@seigi2.mt.m-ka=
gaku.co.jp</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
<A =
href=3D"mailto:mlthomps@alum.mit.edu">mlthomps@alum.mit.edu</A><BR>Mitsub=
ishi=20
Chemical Corporation, Mizushima Plant<BR>3-10 Ushiodori, Kurashiki, =
Okayama=20
712&nbsp;=20
JAPAN<BR>----------------------------------------------------------------=
---</FONT></DIV></BODY></HTML>

------=_NextPart_000_0007_01BEEA08.8191B340--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 19 10:32:03 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 19 Aug 1999 11:32:03 +0200 (CEST)
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1 (PR#252)
In-Reply-To: <199908190903.LAA12321@pubhealth.ku.dk>
References: <199908190903.LAA12321@pubhealth.ku.dk>
Message-ID: <14267.53011.7435.122041@fangorn.ci.tuwien.ac.at>

>>>>> mlthomps  writes:

> This is a multi-part message in MIME format.
> ------=_NextPart_000_0007_01BEEA08.8191B340
> Content-Type: text/plain;
> 	charset="iso-8859-1"
> Content-Transfer-Encoding: quoted-printable

> Dear R Development Core Team,

> I've been trying to install R ver. 0.64.0 on a
> Dec-Alpha machine w/OSF1.

Can you please try the current R-devel snapshot instead?
Also, can you please use the function bug.report(), or provide detailed
information on what exactly you did and your environment is?

-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 19 10:38:41 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 19 Aug 1999 11:38:41 +0200
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at> (message
 from Friedrich Leisch on Thu, 19 Aug 1999 10:48:18 +0200 (CEST))
References: <199908190845.KAA24041@sophie.ethz.ch> <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
Message-ID: <199908190938.LAA24130@sophie.ethz.ch>


>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

    MM> Between R 0.63.2 and 0.64, the behavior of 
    MM> date()
    MM> has been changed in order to become platform independent.
    MM> It now uses POSIX calls, basically

    MM> time_t t;
    MM> time(&t);
    MM> return ctime(&t);


    MM> This currently returns (for me on Sun SPARC Solaris)

    >>> date()
    MM> [1] "Thu Aug 19 10:36:28 1999\n"

    MM> where I think the final "\n" is really UNdesired.

    FrL> Yes!

Okay,
I checked  Lewine (1991) "POSIX Programmer's Guide" :

POSIX specifies that ctime() has a final "\n" 
(before the string terminator \0)
and always length 26 (incl. terminator)

Hence, we have to drop the final "\n",
already in function R_Date() which is [in src/main/platform.c]
currently
    char *R_Date()
    {
	time_t t;
	time(&t);
	return ctime(&t);
    }

How can we drop is this done in the most elegant way?
(without having to allocate a  char[26] ?)


 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 19 10:43:46 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 19 Aug 1999 11:43:46 +0200 (CEST)
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <199908190938.LAA24130@sophie.ethz.ch>
References: <199908190845.KAA24041@sophie.ethz.ch>
 <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
 <199908190938.LAA24130@sophie.ethz.ch>
Message-ID: <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

MM> Between R 0.63.2 and 0.64, the behavior of 
MM> date()
MM> has been changed in order to become platform independent.
MM> It now uses POSIX calls, basically

MM> time_t t;
MM> time(&t);
MM> return ctime(&t);


MM> This currently returns (for me on Sun SPARC Solaris)

>>>> date()
MM> [1] "Thu Aug 19 10:36:28 1999\n"

MM> where I think the final "\n" is really UNdesired.

FrL> Yes!

> Okay,
> I checked  Lewine (1991) "POSIX Programmer's Guide" :

> POSIX specifies that ctime() has a final "\n" 
> (before the string terminator \0)
> and always length 26 (incl. terminator)

> Hence, we have to drop the final "\n",
> already in function R_Date() which is [in src/main/platform.c]
> currently
>     char *R_Date()
>     {
> 	time_t t;
> 	time(&t);
> 	return ctime(&t);
>     }

> How can we drop is this done in the most elegant way?
> (without having to allocate a  char[26] ?)

Be brutal, do

	date <- function() substring(.Internal(date()), 1, 24)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 19 10:48:08 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 19 Aug 1999 11:48:08 +0200
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at> (message from
 Kurt Hornik on Thu, 19 Aug 1999 11:43:46 +0200 (CEST))
References: <199908190845.KAA24041@sophie.ethz.ch>
 <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
 <199908190938.LAA24130@sophie.ethz.ch> <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at>
Message-ID: <199908190948.LAA24138@sophie.ethz.ch>

>>>>> On Thu, 19 Aug 1999 11:43:46 +0200 (CEST), Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> said:

>>>>> Martin Maechler writes:
>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

    MM> Between R 0.63.2 and 0.64, the behavior of 
    MM> date()
    MM> has been changed in order to become platform independent.
    MM> It now uses POSIX calls, basically

    MM> time_t t;
    MM> time(&t);
    MM> return ctime(&t);


    MM> This currently returns (for me on Sun SPARC Solaris)

    >>>>> date()
    MM> [1] "Thu Aug 19 10:36:28 1999\n"

    MM> where I think the final "\n" is really UNdesired.

    FrL> Yes!

    >> Okay,
    >> I checked  Lewine (1991) "POSIX Programmer's Guide" :

    >> POSIX specifies that ctime() has a final "\n" 
    >> (before the string terminator \0)
    >> and always length 26 (incl. terminator)

    >> Hence, we have to drop the final "\n",
    >> already in function R_Date() which is [in src/main/platform.c]
    >> currently
    >> char *R_Date()
    >> {
    >>   time_t t;
    >>   time(&t);
    >>   return ctime(&t);
    >> }

    >> How can we drop is this done in the most elegant way?
    >> (without having to allocate a  char[26] ?)

    KH> Be brutal, do

    KH> date <- function() substring(.Internal(date()), 1, 24)

Kurt, I said
		"most elegant way"
about 5 lines above..

And also for the C API, we want  R_Date() to be correct.

{{I really wonder that the POSIX people where thinking when they
  appended the "\n";  
  appending afterwards is always much easier than removing....
}}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 19 11:11:09 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 19 Aug 1999 12:11:09 +0200 (CEST)
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <199908190948.LAA24138@sophie.ethz.ch>
References: <199908190845.KAA24041@sophie.ethz.ch>
 <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
 <199908190938.LAA24130@sophie.ethz.ch>
 <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at>
 <199908190948.LAA24138@sophie.ethz.ch>
Message-ID: <14267.55357.387296.720135@fangorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

>>>>> On Thu, 19 Aug 1999 11:43:46 +0200 (CEST), Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> said:
>>>>> Martin Maechler writes:
>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

MM> Between R 0.63.2 and 0.64, the behavior of 
MM> date()
MM> has been changed in order to become platform independent.
MM> It now uses POSIX calls, basically

MM> time_t t;
MM> time(&t);
MM> return ctime(&t);


MM> This currently returns (for me on Sun SPARC Solaris)

>>>>>> date()
MM> [1] "Thu Aug 19 10:36:28 1999\n"

MM> where I think the final "\n" is really UNdesired.

FrL> Yes!

>>> Okay,
>>> I checked  Lewine (1991) "POSIX Programmer's Guide" :

>>> POSIX specifies that ctime() has a final "\n" 
>>> (before the string terminator \0)
>>> and always length 26 (incl. terminator)

>>> Hence, we have to drop the final "\n",
>>> already in function R_Date() which is [in src/main/platform.c]
>>> currently
>>> char *R_Date()
>>> {
>>> time_t t;
>>> time(&t);
>>> return ctime(&t);
>>> }

>>> How can we drop is this done in the most elegant way?
>>> (without having to allocate a  char[26] ?)

KH> Be brutal, do

KH> date <- function() substring(.Internal(date()), 1, 24)

> Kurt, I said
> 		"most elegant way"
> about 5 lines above..

But you did not define `elegant' ... :-)

> And also for the C API, we want  R_Date() to be correct.

Define `correct'.  That would be without the trailing newline?

> {{I really wonder that the POSIX people where thinking when they
>   appended the "\n";  
>   appending afterwards is always much easier than removing....
> }}


Suggestion:

	return strtok(ctime(&t), "\n");

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 19 18:05:23 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Aug 1999 19:05:23 +0200
Subject: date() should not append a final "\n" ?!?
In-Reply-To: Kurt Hornik's message of "Thu, 19 Aug 1999 12:11:09 +0200 (CEST)"
References: <199908190845.KAA24041@sophie.ethz.ch> 	<14267.50386.581977.851244@galadriel.ci.tuwien.ac.at> 	<199908190938.LAA24130@sophie.ethz.ch> 	<14267.53714.885909.438577@fangorn.ci.tuwien.ac.at> 	<199908190948.LAA24138@sophie.ethz.ch> <14267.55357.387
Message-ID: <x2aernsnu4.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> Suggestion:
> 
> 	return strtok(ctime(&t), "\n");

s<-ctime(&t); s[25] = '\0'; return s;

This won't work if s is read-only (which I don't think it is), but
neither will strtok since it pokes a null in the same spot....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 19 18:08:09 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 19 Aug 1999 19:08:09 +0200
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <14267.55357.387296.720135@fangorn.ci.tuwien.ac.at> (message from
 Kurt Hornik on Thu, 19 Aug 1999 12:11:09 +0200 (CEST))
References: <199908190845.KAA24041@sophie.ethz.ch>
 <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
 <199908190938.LAA24130@sophie.ethz.ch>
 <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at>
 <199908190948.LAA24138@sophie.ethz.ch> <14267.55357.387296.720135@fangorn.ci.tuwien.ac.at>
Message-ID: <199908191708.TAA08386@sophie.ethz.ch>

>>>>> On Thu, 19 Aug 1999 12:11:09 +0200 (CEST), Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> said:

>>>>> Martin Maechler writes:
...

    MM> Between R 0.63.2 and 0.64, the behavior of date() has been changed
    MM> in order to become platform independent.  It now uses POSIX calls,
    MM> basically

    MM> time_t t; time(&t); return ctime(&t);


    MM> This currently returns (for me on Sun SPARC Solaris)

    >>>>>>> date()
    MM> [1] "Thu Aug 19 10:36:28 1999\n"

    MM> where I think the final "\n" is really UNdesired.

    FrL> Yes!

    >>>> Okay, I checked Lewine (1991) "POSIX Programmer's Guide" :

    >>>> POSIX specifies that ctime() has a final "\n" (before the string
    >>>> terminator \0) and always length 26 (incl. terminator)

    >>>> Hence, we have to drop the final "\n", already in function
    >>>> R_Date() which is [in src/main/platform.c] currently char
    >>>> *R_Date() { time_t t; time(&t); return ctime(&t); }

    >>>> How can we drop is this done in the most elegant way?  (without
    >>>> having to allocate a char[26] ?)

 <...>

    KH> Suggestion:

    KH> 	return strtok(ctime(&t), "\n");

Thanks Kurt, 
this works (and *is* elegant!);  

I've applied and committed it for 0.65.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Aug 20 13:18:04 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 20 Aug 1999 14:18:04 +0200 (MET DST)
Subject: seg.fault for some illegal .Random.seed (new since 0.64) (PR#253)
Message-ID: <199908201218.OAA26837@pubhealth.ku.dk>


This is already in 0.64, but was okay in 0.63

In R version <= 0.63 :

    > .Random.seed <- c(111,2,3)
    > rnorm(1)
    Warning: Wrong length .Random.seed; forgot initial RNGkind? set to Wichmann-Hill
    [1] -0.4811529
    > .Random.seed
    [1]     0  6968 28861 26054
    > 

Now in 0.65 (pre-release) and both versions of 0.64 :

    > .Random.seed <- c(111,2,3)
    > rnorm(1)

  ----> Segmentation Fault

---
{I know that maybe, I should fix this; however, I don't have time just now,
 and in order not to forget this one...
}
Martin

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.5.1
 arch = sparc
 os = solaris2.5.1
 system = sparc, solaris2.5.1
 status = Under development (unstable)
 status.rev = 0
 major = 0
 minor = 65.0
 year = 1999
 month = August
 day = 20
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sat Aug 21 06:15:04 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sat, 21 Aug 1999 07:15:04 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199908210515.HAA22381@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

* PR# 137 *
Subject: funfits
From: "Alvaro A. Novo" <novo@uiuc.edu>
Date: Tue, 9 Mar 1999 22:24:54 -0600
--Not our problem. Dubious whether a bug at all.

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 61 *
Subject: points(...,  cex = ..)  is pretty wrong...
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 2 Nov 1998 19:15:06 +0100
--Symbols getting decentered when too large cex for X. Still there 22feb99  
* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 123 *
Subject: Text in plot
From: Ennapadam Venkatraman <venkat@biosta.mskcc.org>
Date: Thu, 18 Feb 1999 13:05:37 -0500
--Multiline text not working
* PR# 130 *
Subject: lty=0 -- shouldn't it give an invisible line?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Feb 1999 21:45:43 +0100
--Strange effect on barplot
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 229 *
Subject: dev.print scaling bug?
From: John.Peters@tip.csiro.au (John Peters)
Date: Fri, 16 Jul 1999 12:10:48 +1000 (EST)
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 238 *
Subject: EPS compliance of postscript device: initclip operator
From: David Middleton <dajm@deeq.demon.co.uk>
Date: Tue, 03 Aug 1999 17:51:47 -0300
--initclip is removed. Still need new argument onefile/onepage to ensure one page
--and use %!PS-Adobe-3.0 EPSF-3.0 header

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 207 *
Subject: Lines longer than ~1000 chars truncated at parsing
From: msa@biostat.mgh.harvard.edu
Date: Mon, 7 Jun 1999 22:27:10 +0200 (MET DST)
--Fixed buffer used during input.
--Not fixable without major changes to readline lib.

Directory:  Installation

none

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 239 *
Subject: cbind is not generic as claimed, omits labels where S has them 
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 12:29:58 +0100 (BST)
--Cbind is now generic, still labelling issues. See also PR#240 and PR#241.
* PR# 240 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
--See PR#239
* PR# 241 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 6 Aug 1999 06:52:35 +0100 (BST)
--See PR#239

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 210 *
Subject: definition of R_problem_buf in S.h
From: vogels@ieee.org
Date: Mon, 14 Jun 1999 17:56:04 +0200 (MET DST)
--Same as #185
* PR# 235 *
Subject:  round(numeric(0)) 
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 29 Jul 1999 15:20:21 +0100 (BST)
--Some followup of this on R-devel not sent here.

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

* PR# 121 *
Subject:  model.frame mangles time series 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Thu, 18 Feb 1999 15:47:24 +0100
--Subset in C code + attributes = mess
--Switch to interpreted ("[")

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 222 *
Subject: Use of R-Coda
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Fri, 9 Jul 1999 10:54:16 +0200 
--In Danish (?)  Looks as if PR#246 is the same in English
* PR# 234 *
Subject: R-bugs
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Tue, 27 Jul 1999 13:49:31 +0200
--Looks like PR#222 again, in Danish. See PR#246 for English version
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200
* PR# 249 *
Subject: axis ignores srt/crt
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 16 Aug 1999 15:51:49 -0700 (PDT)
* PR# 250 *
From: Peter Malewski <peter@tu-bs.de>
Date: Tue, 17 Aug 1999 12:21:38 +0200 (CEST)
* PR# 251 *
From: Peter Malewski <peter@tu-bs.de>
Date: Tue, 17 Aug 1999 12:21:45 +0200 (CEST)
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 253 *
Subject: seg.fault for some illegal .Random.seed (new since 0.64)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 20 Aug 1999 14:17:31 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tbmzuotvux@white-star.com  Mon Aug 23 07:24:48 1999
From: tbmzuotvux@white-star.com (tbmzuotvux@white-star.com)
Date: Mon, 23 Aug 1999 08:24:48 +0200 (MET DST)
Subject: For Serious Marketers ONLY                                                   zovbs
Message-ID: <199908230624.IAA22363@stat.math.ethz.ch>

Are you making more money than ever?
Are You getting all the sales that you want?
Is your inbox filled with fresh orders every day?

If you answered YES to all of the above questions, 
then you probably don't need our services.

However, If you answered No to ANY of them, 
then try these questions:

Do You:
Want a Direct Email Service that delivers?
Want access to the best e-mail lists available?
DO YOU NEED? 
Full version Direct Email Software at a discount? 

If you answered YES to ANY of the above questions, 
then try:

Warhorse Promotions....   Discount Direct Email
SIMPLY THE VERY BEST!

We have Contract Mailing, Mailing Software and List 
Management Tools at Discount Prices. We also have 
general internet lists and Biz Opp targeted lists, 
that have been cleaned and verified. 
These lists get 90% plus deliverables. 

For info on any of the above, Call 954 527-7155
and leave your name, phone # and time zone.

Thanx,  Warhorse

********************************************************
***You WILL NOT be removed by calling the above phone #. 
To be removed from future mailings, Click Here 
http://www.spamnomore.com/ This is a global remove list 
which I run my lists against before mailing.

********************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From prechelt@ira.uka.de  Mon Aug 23 19:27:00 1999
From: prechelt@ira.uka.de (prechelt@ira.uka.de)
Date: Mon, 23 Aug 1999 20:27:00 +0200 (MET DST)
Subject: Strange 'Unimplemented feature in rep' error (PR#254)
Message-ID: <199908231827.UAA15353@pubhealth.ku.dk>

I have a large computation that performs various bootstrap resampling
loops over pairs of samples using lapply().
After a few seconds it stops like this

> do.summarize.effects(compute.power=T)
...
Error: Unimplemented feature in rep
> .Traceback
[[1]]
[1] "rep(no, length = length(ans))"

[[2]]
[1] "ifelse(t.howto == \"n\", boot.result, l.meanboot.test(onew.x, onew.y, " "    samples = boot.test.samples, expect = makezero, return.htest = T, "
[3] "    alt = \"t\"))"                                                     

[[3]]
[1] "measure.power(firstset, secondset, t.howto = t.howto, var.equal = var.equal)"

[[4]]
[1] "FUN(X[[i]], ...)"

[[5]]
[1] "lapply(split(X, group), FUN, ...)"

[[6]]
[1] "tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power)"

[[7]]
[1] "as.list(X)"

[[8]]
[1] "lapply(as.list(X), FUN, ...)"

[[9]]
[1] "sapply(tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power), " "    rbind)"                                                                             

[[10]]
[1] "t(sapply(tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power), " "    rbind))"                                                                             

[[11]]
[1] "do.summarize.effects(compute.power = T)"

My problems are the following:

1. I cannot find the line
     rep(no, length = length(ans))
   anywhere in my own code

2. The R source code of 'rep' does not contain the error message
   "unimplemented feature" (I have not checked the .Internal)

3. I've had similar strange errors before and could not find the problem
   in my own code. The problem finally went away after I renamed two
   of the groups in my data such that the factor ordering changed and
   the computations were performed in a different order...
   
4. I've also previously had the effect that my function that reads the data
   using read.table(), which is not part of the above call,
   reproducibly came up with the second column being NULL instead
   of 1451 items as the other colums. A second call to the same function
   reliably came back with the correct result. I am not sure whether
   these problems are related but I think both were not my fault.

Any suggestions where to look for the above problem?
Both my data and my computations are somewhat lengthy so the 
stepwise-stripping-down approach is cumbersome.
The new problem appeared using the same data as in (3) above, but
after some extensions to the code (none of them introducing a new
call to rep()).
The problem does also appear if I use only the small subset of the 
data used in the respective part of the computation that fails.

Thanks in advance for your help

  Lutz

Lutz Prechelt  http://wwwipd.ira.uka.de/~prechelt/   | Whenever you 
Institut f. Programmstrukturen und Datenorganisation | complicate things,
Universitaet Karlsruhe;  D-76128 Karlsruhe;  Germany | they get
(Phone: +49/721/608-4068, FAX: +49/721/608-7343)     | less simple.
>>> Ever had negative research results?  http://wwwipd.ira.uka.de/fnr <<<

--please do not edit the information below--

Version:
 platform = alpha-dec-osf4.0
 arch = alpha
 os = osf4.0
 system = alpha, osf4.0
 status = 
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 8
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 23 21:19:24 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 23 Aug 1999 21:19:24 +0100 (BST)
Subject: Strange 'Unimplemented feature in rep' error (PR#254)
In-Reply-To: <199908231827.UAA15353@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9908232101100.3583-100000@auk.stats>

On Mon, 23 Aug 1999 prechelt@ira.uka.de wrote:

> I have a large computation that performs various bootstrap resampling
> loops over pairs of samples using lapply().
> After a few seconds it stops like this
> 
> > do.summarize.effects(compute.power=T)
> ...
> Error: Unimplemented feature in rep
> > .Traceback

(use traceback(): it is easier to read)

> [[1]]
> [1] "rep(no, length = length(ans))"
> 
> [[2]]
> [1] "ifelse(t.howto == \"n\", boot.result, l.meanboot.test(onew.x, onew.y, " "    samples = boot.test.samples, expect = makezero, return.htest = T, "
> [3] "    alt = \"t\"))"                                                     
> 
> [[3]]
> [1] "measure.power(firstset, secondset, t.howto = t.howto, var.equal = var.equal)"
> 
> [[4]]
> [1] "FUN(X[[i]], ...)"
> 
> [[5]]
> [1] "lapply(split(X, group), FUN, ...)"
> 
> [[6]]
> [1] "tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power)"
> 
> [[7]]
> [1] "as.list(X)"
> 
> [[8]]
> [1] "lapply(as.list(X), FUN, ...)"
> 
> [[9]]
> [1] "sapply(tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power), " "    rbind)"                                                                             
> 
> [[10]]
> [1] "t(sapply(tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power), " "    rbind))"                                                                             
> 
> [[11]]
> [1] "do.summarize.effects(compute.power = T)"
> 
> My problems are the following:
> 
> 1. I cannot find the line
>      rep(no, length = length(ans))
>    anywhere in my own code

Look at the line below in the traceback: it is in ifelse.

> 2. The R source code of 'rep' does not contain the error message
>    "unimplemented feature" (I have not checked the .Internal)

Look in src/main/seq.c. It means that the first arg of rep is an
unimplemented type of SEXP. It is hard to guess what: it checks that it is
a vector or list.

> 3. I've had similar strange errors before and could not find the problem
>    in my own code. The problem finally went away after I renamed two
>    of the groups in my data such that the factor ordering changed and
>    the computations were performed in a different order...

Usually these indicate a problem with something being empty. What exactly
does l.meanboot.test return, under all possible inputs?  Your code is
trying to replicate whatever it does return (omitting NAs), and failing.

In the absence of a post-mortem debugger in R, traceback() is a very useful
tool, worth getting to grips with. I grepped the sources to find the
error message, something I resort to not infrequently.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tian@chico.ma.adfa.edu.au  Tue Aug 24 04:39:23 1999
From: tian@chico.ma.adfa.edu.au (tian@chico.ma.adfa.edu.au)
Date: Tue, 24 Aug 1999 05:39:23 +0200 (MET DST)
Subject: broken link in R FAQ page? (PR#255)
Message-ID: <199908240339.FAA16586@pubhealth.ku.dk>

When clicking "What machines does R run on" 
in the R FAQ page (http://lib.stat.cmu.edu/R/CRAN/doc/FAQ/R-FAQ.html)
what shows on the screen has nothing with the topic.

Is it a broken link?

Tian.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 24 10:43:06 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Aug 1999 11:43:06 +0200
Subject: broken link in R FAQ page? (PR#255)
In-Reply-To: tian@chico.ma.adfa.edu.au's message of "Tue, 24 Aug 1999 05:39:23 +0200 (MET DST)"
References: <199908240339.FAA16586@pubhealth.ku.dk>
Message-ID: <x2iu654iqd.fsf@blueberry.kubism.ku.dk>

tian@chico.ma.adfa.edu.au writes:

> When clicking "What machines does R run on" 
> in the R FAQ page (http://lib.stat.cmu.edu/R/CRAN/doc/FAQ/R-FAQ.html)
> what shows on the screen has nothing with the topic.
> 
> Is it a broken link?
> 
> Tian.

Hardly, it's in the same file... But something funny seems to be up
with HTML links ending in a '?'-mark. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 24 10:46:33 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Aug 1999 11:46:33 +0200
Subject: broken link in R FAQ page? (PR#255)
In-Reply-To: Peter Dalgaard BSA's message of "24 Aug 1999 11:43:06 +0200"
References: <199908240339.FAA16586@pubhealth.ku.dk> <x2iu654iqd.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2hflp4ikm.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > When clicking "What machines does R run on" 
...> 
> Hardly, it's in the same file... But something funny seems to be up
> with HTML links ending in a '?'-mark. 

...which lynx can handle, but Netscape not, apparently.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug 25 08:05:36 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 25 Aug 1999 09:05:36 +0200 (CEST)
Subject: broken link in R FAQ page? (PR#255)
In-Reply-To: <x2iu654iqd.fsf@blueberry.kubism.ku.dk>
References: <199908240339.FAA16586@pubhealth.ku.dk>
 <x2iu654iqd.fsf@blueberry.kubism.ku.dk>
Message-ID: <14275.38336.894809.677851@fangorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> tian@chico.ma.adfa.edu.au writes:
>> When clicking "What machines does R run on" 
>> in the R FAQ page (http://lib.stat.cmu.edu/R/CRAN/doc/FAQ/R-FAQ.html)
>> what shows on the screen has nothing with the topic.
>> 
>> Is it a broken link?
>> 
>> Tian.

> Hardly, it's in the same file... But something funny seems to be up
> with HTML links ending in a '?'-mark.

The HTML files are produced using recent versions of Texinfo's makeinfo
--html.  Karl Berry and I have had some discussions on what HTML output
without explicit info-like node structuring should be like, but we are
not there yet (apparently).  I will turn the `--no-headers' flag off
again when building the html version.

NOTE: in any case, this should not be a bug report on R.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Aug 25 10:00:29 1999
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Wed, 25 Aug 1999 11:00:29 +0200 (MET DST)
Subject: Error in ?text (PR#256)
Message-ID: <199908250900.LAA02396@pubhealth.ku.dk>

Just a minor point, but the adj argument in ?text is described wrongly
(0.64.1).  Perhaps the following might be added to the details.

     Values of 0, 0.5, and 1 specify left/top, middle and right/bottom,
     respectively.  The default is for centred text, ie \code{adj = c(0.5,
     0.5)}.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From weingessel@ci.tuwien.ac.at  Wed Aug 25 11:46:08 1999
From: weingessel@ci.tuwien.ac.at (weingessel@ci.tuwien.ac.at)
Date: Wed, 25 Aug 1999 12:46:08 +0200 (MET DST)
Subject: dimnames names lost when subscripting (PR#257)
Message-ID: <199908251046.MAA03884@pubhealth.ku.dk>

When subscripting an array with dimnames names, these names are lost.

For example:
> a <- array(0,c(2,2,2));
> dimnames(a)<-list(hansi=1:2, pepi=c("a","b"), karli=3:4)
> dimnames(a)
$hansi
[1] "1" "2"

$pepi
[1] "a" "b"

$karli
[1] "3" "4"

BUT

>  dimnames(a[,,1])
[[1]]
[1] "1" "2"

[[2]]
[1] "a" "b"




--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 status.rev = 0
 major = 0
 minor = 65.0
 year = 1999
 month = July
 day = 08
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 25 12:44:44 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 25 Aug 1999 13:44:44 +0200
Subject: Error in ?text (PR#256)
In-Reply-To: <199908250900.LAA02396@pubhealth.ku.dk>
 (J.C.Rougier@durham.ac.uk)
References: <199908250900.LAA02396@pubhealth.ku.dk>
Message-ID: <199908251144.NAA00485@sophie.ethz.ch>

>>>>> On Wed, 25 Aug 1999 11:00 (MET DST), J.C.Rougier@durham.ac.uk said:

    JonR> Just a minor point, but the adj argument in ?text is described
    JonR> wrongly (0.64.1).
What is wrong?
pre-0.65 has

 \arguments{
     ....

   \item{adj}{one or two numeric values which specify the x
     (and optionally y) adjustment of the labels.}

     ....
 }

    JonR> Perhaps the following might be added to the
    JonR> details.

okay, I'm about to add this:

    JonR>      Values of 0, 0.5, and 1 specify left/top, middle and
    JonR> right/bottom, respectively.  The default is for centred text, ie
    JonR> \code{adj = c(0.5, 0.5)}.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From BXC@NOVO.dk  Thu Aug 26 11:09:56 1999
From: BXC@NOVO.dk (BXC@NOVO.dk)
Date: Thu, 26 Aug 1999 12:09:56 +0200 (MET DST)
Subject: Greek letters in outer margins. (PR#258)
Message-ID: <199908261009.MAA13630@pubhealth.ku.dk>

When doing:

par(mfrow=c(2,2),mgp=c(2,1,0),mai=c(1,1,0.3,0.3)/1.5,oma=c(2,2,0,0))

for (i in 1:4) plot(rnorm(200),rnorm(200),ylab=" ",xlab=" ")

mtext(paste(expression(beta-alpha)),outer=T,side=1,line=0.5)
mtext(paste(expression(beta-gamma)),outer=T,side=2,line=0.5)
mtext("beta-alpha",outer=T,side=1,line=0.5)
mtext("beta-gamma",outer=T,side=2,line=0.5)

the greek letters appear in the margins of the last plot
whereas the plain text appear correctly in the outer margins.


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 status.rev = 0
 major = 0
 minor = 64.2
 year = 1999
 month = July
 day = 3
 language = R

Windows NT 4.0 (build 1381) Service Pack 4

Search Path:
 .GlobalEnv, Autoloads, package:base


                      \\\|///
                     \\ - - /
                     (  @ @ )  
+------------------o00o-(_)-o00o----------------------+
| Bendix Carstensen              tel: +45 44 43 87 38 |
| Senior Statistician            SDC: +45 44 43 90 42 |
| Steno Diabetes Center          fax: +45 44 43 82 32 |
| Niels Steensens Vej 2       e-mail: bxc@novo.dk     |
| DK - 2820 Gentofte                                  |
| Denmark                   Ooooo                     |
+------------------ooooO----(   )---------------------+
                   (   )     ) /
                    \ (     (_/
                     \_)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Aug 26 12:44:35 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 26 Aug 1999 13:44:35 +0200 (MET DST)
Subject: Error in ?text (PR#256)
Message-ID: <199908261144.NAA15003@pubhealth.ku.dk>

>>>>> On Thu, 26 Aug 1999 11:45:08 +0100 (BST), Jonathan Rougier <J.C.Rougier@durham.ac.uk> said:

    JonR> Hi Martin,
    JonR> On Wed, 25 Aug 1999, Martin Maechler wrote:

    JonR> Just a minor point, but the adj argument in ?text is described
    JonR> wrongly (0.64.1).
    >> What is wrong?
    >> pre-0.65 has
    >> 
    >> \arguments{
    >> ....
    >> 
    >> \item{adj}{one or two numeric values which specify the x
    >> (and optionally y) adjustment of the labels.}
    >> 
    >> ....
    >> }

    JonR> That's odd, because my ?text has the Arguments:

Well, it's not really odd.
As I said my version is "pre 0.65"  which is very much newer than
0.64.1.

This just means that the documentation for  text has been fixed since the
release of 0.64.1...

Thank you anyway for reporting it!
Martin

    JonR> x, y: numeric vectors of coordinates where the text
    JonR> `labels' should be written.  If the length of `x'
    JonR> and `y' differs, the shorter one is recycled.
 
    JonR> labels: character or expression with the text to be writ-
    JonR> ten.

    JonR> adj: character or expression with the text to be writ-
    JonR> ten.

    JonR> ...: further graphical parameters (from `par'), such as
    JonR> `cex', etc.
 
    JonR> Here's the spec. ...

    JonR> platform   sparc-sun-solaris2.5.1
    JonR> arch       sparc                 
    JonR> os         solaris2.5.1          
    JonR> system     sparc, solaris2.5.1   
    JonR> status                           
    JonR> status.rev 0                     
    JonR> major      0                     
    JonR> minor      64.1                  
    JonR> year       1999                  
    JonR> month      May                   
    JonR> day        8                     
    JonR> language   R                     

    JonR> Cheers, Jonathan.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jnf@pcisys.net  Sat Aug 28 22:23:27 1999
From: jnf@pcisys.net (jnf@pcisys.net)
Date: Sat, 28 Aug 1999 23:23:27 +0200 (MET DST)
Subject: R without X11? (PR#259)
Message-ID: <199908282123.XAA02173@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------DD49957419D60BCA65CC41EE
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
KDE installed but not gnome.  When I ran configure, it correctly
indicated that gnome is not installed.  However when I then ran make, I
received errors complaining that  the include file X11/X.h and similar
are not found.  Is X11 required for R?  If not, how can a work around
this?

I have attached the output of the configure and make commands with more
information.

Thanks for your help.

--

Jack Fenner

  I am life that wills to live in the midst of life that wills to live.
             - Albert Schweitzer, "Out of my Life and Thought"



--------------DD49957419D60BCA65CC41EE
Content-Type: text/plain; charset=us-ascii;
 name="create_R.script"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="create_R.script"

Script started on Sat Aug 28 09:13:36 1999
[root@noname R-0.64.2]# ./configure
loading cache ./config.cache
checking for a BSD compatible install... (cached) /usr/bin/install -c
checking whether ln -s works... (cached) yes
checking for ranlib... (cached) ranlib
checking for bison... no
checking for byacc... no
checking for ar... (cached) ar
checking for latex... (cached) /opt/teTeX/bin/latex
checking for dvips... (cached) /opt/teTeX/bin/dvips
checking for makeindex... (cached) /opt/teTeX/bin/makeindex
checking for unzip... (cached) /usr/bin/unzip
checking for zip... (cached) /usr/bin/zip
checking for perl... (cached) /usr/bin/perl
checking whether perl is perl 5... yes
checking for gcc... (cached) gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... (cached) yes
checking whether gcc accepts -g... (cached) yes
checking for g77... (cached) /usr/bin/g77
checking for underscore after Fortran symbols... yes
checking for sin in -lm... (cached) yes
checking for sin in -lmoto... (cached) no
checking for main in -lncurses... (cached) yes
checking for dlopen in -ldl... (cached) yes
checking for main in -lz... (cached) no
checking for main in -lhdf5... (cached) no
checking for main in -ldxml... (cached) no
checking for main in -lblas... (cached) no
checking for rl_callback_read_char in -lreadline... (cached) no
checking how to run the C preprocessor... (cached) gcc -E
checking for ANSI C header files... (cached) yes
checking for pid_t... (cached) yes
checking for vfork.h... (cached) no
checking for working vfork... (cached) yes
checking for vprintf... (cached) yes
checking for acosh... (cached) yes
checking for asinh... (cached) yes
checking for atanh... (cached) yes
checking for bcopy... (cached) yes
checking for finite... (cached) yes
checking for isfinite... (cached) no
checking for isnan... (cached) yes
checking for matherr... (cached) yes
checking for memcpy... (cached) yes
checking for memmove... (cached) yes
checking for regcomp... (cached) yes
checking for rint... (cached) yes
checking for strcoll... (cached) yes
checking for strtod... (cached) yes
checking for strtol... (cached) yes
checking for system... (cached) yes
checking for times... (cached) yes
checking for sigsetjmp... (cached) no
checking for siglongjmp... (cached) yes
checking for __setfpucw... (cached) no
checking for ANSI C header files... (cached) yes
checking for dl.h... (cached) no
checking for dlfcn.h... (cached) yes
checking for elf.h... (cached) yes
checking for locale.h... (cached) yes
checking for readline/history.h... (cached) no
checking for rpc/xdr.h... (cached) yes
checking for sys/times.h... (cached) yes
checking for time.h... (cached) yes
checking for ieeefp.h... (cached) no
checking for ieee754.h... (cached) yes
checking for unistd.h... (cached) yes
checking for hdf5.h... (cached) no
checking return type of signal handlers... (cached) void
checking for working const... (cached) yes
checking size of long... (cached) 4
checking for xmkmf... (cached) /usr/X11R6/bin/xmkmf
checking how to make shared libraries... done
checking for X... (cached) no
checking for lpr... (cached) lpr
creating ./config.status
creating Makeconf
creating Makefile
creating afm/Makefile
creating demos/Makefile
creating doc/Makefile
creating doc/keyword-test
creating doc/manual/Makefile
creating doc/manual/lib2tex
creating doc/manual/Reference.tex
creating doc/manual/Manual.tex
creating etc/Makefile
creating etc/Makeconf
creating src/Makefile
creating src/appl/Makefile
creating src/include/Makefile
creating src/library/Makefile
creating src/main/Makefile
creating src/nmath/Makefile
creating src/scripts/Makefile
creating src/unix/Makefile
creating src/gnome/Makefile
creating src/library/base/Makefile
creating src/library/profile/Makefile
creating src/library/eda/Makefile
creating src/library/eda/src/Makefile
creating src/library/lqs/Makefile
creating src/library/lqs/src/Makefile
creating src/library/modreg/Makefile
creating src/library/modreg/src/Makefile
creating src/library/mva/Makefile
creating src/library/mva/src/Makefile
creating src/library/stepfun/Makefile
creating src/scripts/COMPILE
creating src/scripts/INSTALL
creating src/scripts/REMOVE
creating src/scripts/R.sh
creating src/scripts/Rdconv
creating src/scripts/Rdindex
creating src/scripts/Rman2Rd
creating src/scripts/SHLIB
creating src/scripts/Sd2Rd
creating src/scripts/build-help
creating src/scripts/fwf2table
creating src/scripts/help.pretty
creating src/scripts/html2dos
creating src/scripts/Rd2contents
creating tests/Makefile
creating tests/Examples/Makefile
creating src/include/Platform.h
src/include/Platform.h is unchanged


R is now configured for i586-unknown-linux

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc -g -O2
  FORTRAN compiler:         g77 -O2
  Gnome support:            no

[root@noname R-0.64.2]# make
make[1]: Entering directory `/home/jack/R-0.64.2/afm'
make[1]: Leaving directory `/home/jack/R-0.64.2/afm'
make[1]: Entering directory `/home/jack/R-0.64.2/demos'
make[1]: Leaving directory `/home/jack/R-0.64.2/demos'
make[1]: Entering directory `/home/jack/R-0.64.2/doc'
make[1]: Leaving directory `/home/jack/R-0.64.2/doc'
make[1]: Entering directory `/home/jack/R-0.64.2/etc'
make[1]: Leaving directory `/home/jack/R-0.64.2/etc'
make[1]: Entering directory `/home/jack/R-0.64.2/src'
make[2]: Entering directory `/home/jack/R-0.64.2/src/include'
make[2]: Leaving directory `/home/jack/R-0.64.2/src/include'
make[2]: Entering directory `/home/jack/R-0.64.2/src/appl'
make[2]: Nothing to be done for `R'.
make[2]: Leaving directory `/home/jack/R-0.64.2/src/appl'
make[2]: Entering directory `/home/jack/R-0.64.2/src/nmath'
make[2]: Nothing to be done for `R'.
make[2]: Leaving directory `/home/jack/R-0.64.2/src/nmath'
make[2]: Entering directory `/home/jack/R-0.64.2/src/unix'
gcc -g -O2  -I../include -I../../src/include  -c dataentry.c
In file included from dataentry.c:24:
dataentry.h:22: X11/X.h: No such file or directory
dataentry.h:23: X11/Xlib.h: No such file or directory
dataentry.h:24: X11/Xutil.h: No such file or directory
dataentry.h:25: X11/keysym.h: No such file or directory
dataentry.h:26: X11/cursorfont.h: No such file or directory
make[2]: *** [dataentry.o] Error 1
make[2]: Leaving directory `/home/jack/R-0.64.2/src/unix'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/home/jack/R-0.64.2/src'
make: *** [R] Error 1
[root@noname R-0.64.2]# exit
exit

Script done on Sat Aug 28 09:14:32 1999

--------------DD49957419D60BCA65CC41EE--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sat Aug 28 23:38:25 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Sat, 28 Aug 1999 15:38:25 -0700 (PDT)
Subject: R without X11? (PR#259)
In-Reply-To: <199908282123.XAA02173@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9908281505420.597-100000@wompom.biostat.washington.edu>

On Sat, 28 Aug 1999 jnf@pcisys.net wrote:
> 
> 
> I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
> KDE installed but not gnome.  When I ran configure, it correctly
> indicated that gnome is not installed.  However when I then ran make, I
> received errors complaining that  the include file X11/X.h and similar
> are not found.  Is X11 required for R?  If not, how can a work around
> this?


X11 does seem to be required for R. Although there is a configure
option --without-x or --with-x=no, it doesn't appear to work.  

However, you do have X11 on your machine if you have KDE, and you
definitely do want to use X11 in R to get graphics.

 You may not have the X11 header files installed -- they should be
somewhere under /usr/X11 or /usr/include/X11.  If the header files aren't
installed then you will need to install them. They will be on your
distribution CD, perhaps in a package called something like x-devel.


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun Aug 29 05:44:18 1999
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Sun, 29 Aug 1999 14:44:18 +1000 (EST)
Subject: Compilation of R under Caldera OpenLinux 2.2
Message-ID: <199908290444.OAA03376@leonard.anu.edu.au>

On Sat, 28 Aug 1999 15:38:25 Thomas Lumley <thomas@biostat.washington.edu>
wrote:

> On Sat, 28 Aug 1999 jnf@pcisys.net wrote:
> > 
> > 
> > I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
> > KDE installed but not gnome.  When I ran configure, it correctly
> > indicated that gnome is not installed.  However when I then ran make, I
> > received errors complaining that  the include file X11/X.h and similar
> > are not found.
...

> However, you do have X11 on your machine if you have KDE, and you
> definitely do want to use X11 in R to get graphics.
> 
>  You may not have the X11 header files installed -- they should be
> somewhere under /usr/X11 or /usr/include/X11.  If the header files aren't
> installed then you will need to install them. They will be on your
> distribution CD, perhaps in a package called something like x-devel.

The needed files are in
  cdrom/Packages/RPMS/XFree86-devel-3.3.3.1-4.i386.rpm
This is also where one finds them under RedHat, except that the
file is XFree86-devel-3.3.3.1-49.i386.rpm and one needs the
path that is relevant to the RedHat distribution.

I have yet to check whether installing this package (as well as
g77-2.91.66-5.i386.rpm, which I installed earlier) is enough to
allow make to run to completion.  
[The XFree86-devel-3.3.3.1-4.i386.rpm on my home CD is corrupt.
Fortunately I have another disk at work, where the file seems
ok.]

Caldera OpenLinux 2.2 seems, aside from these immediate difficulties,
a product that is relatively novice-friendly.  It is a lot more
straightforward than RedHat to install and configure.  So it will
be useful to sort out how to set up R under it.

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun Aug 29 10:38:13 1999
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
Subject: Compiling R under Caldera Open Linux 2.2
Message-ID: <199908290938.TAA07841@leonard.anu.edu.au>

To: jnf@pcisys.net
Subject: Compilation of R under Caldera OpenLinux 2.2

> On Sat, 28 Aug 1999 jnf@pcisys.net wrote:
> > 
> > I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
> > KDE installed but not gnome.  When I ran configure, it correctly
> > indicated that gnome is not installed.  However when I then ran make, I
> > received errors complaining that  the include file X11/X.h and similar
> > are not found.
....
> However, you do have X11 on your machine if you have KDE, and you
> definitely do want to use X11 in R to get graphics.
> 
>  You may not have the X11 header files installed -- they should be
> somewhere under /usr/X11 or /usr/include/X11.  If the header files aren't
> installed then you will need to install them. They will be on your
> distribution CD, perhaps in a package called something like x-devel.

They are in the file Packages/RPMS/XFree86-devel-3.3.3.1-4.i386.rpm

(On the RedHat 6.0 distribution, there is
XFree86-devel-3.3.3.1-49.i386.rpm
which seems to be a later version.)

----------------------------------------------------------------
I have been wrestling with this also.  I had to install g77 from
the distribution CD, then the above rpm.
Having got this in order, I then received extensive output,
terminated by the following (which I have formatted on to
multiple lines):

gcc -export-dynamic -o ../../bin/R.X11 arithmetic.o array.o attrib.o
 bind.o builtin.o character.o coerce.o colors.o complex.o context.o
 cov.o cum.o debug.o devPS.o devPicTeX.o deparse.o deriv.o devices.o
 dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o format.o
 fourier.o gram.o gram-ex.o graphics.o iosupport.o list.o logic.o
 main.o match.o memory.o model.o names.o objects.o optimize.o
 options.o par.o paste.o platform.o plot.o plot3d.o plotmath.o
 print.o printarray.o printvector.o printutils.o random.o relop.o
 saveload.o scan.o seq.o sort.o source.o split.o subassign.o
 subscript.o subset.o summary.o unique.o util.o version.o
 ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE
 -L/usr/X11R6/lib -lX11 -L/usr/lib/gcc-lib/i386-linux/egcs-2.91.66
 -L/usr/i386-linux/lib -lg2c -lm -lg2c: -ldl -lm
 /usr/i386-linux/bin/ld: cannot open -lg2c: No such file or directory
make[3]: *** [../../bin/R.X11] Error 1 make[3]: Leaving directory
`/home/john/BUILD/src/main' make[2]: *** [R] Error 2 make[2]:
Leaving directory `/home/john/BUILD/src/main' make[1]: *** [R] Error
1 make[1]: Leaving directory `/home/john/BUILD/src' make: *** [R]
Error 1 

I have been unable to find anything on the distribution CD that
might answer to the lg2c.  Any clues would be welcome.

These difficulties aside, the Caldera OpenLinux 2.2 distribution
is much more novice-friendly than RedHat 6.0.  Configuration is
much quicker and more straightforward.


John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun Aug 29 10:38:49 1999
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sun, 29 Aug 1999 11:38:49 +0200 (MET DST)
Subject: Compiling R under Caldera Open Linux 2.2 (PR#260)
Message-ID: <199908290938.LAA03259@pubhealth.ku.dk>

To: jnf@pcisys.net
Subject: Compilation of R under Caldera OpenLinux 2.2

> On Sat, 28 Aug 1999 jnf@pcisys.net wrote:
> > 
> > I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
> > KDE installed but not gnome.  When I ran configure, it correctly
> > indicated that gnome is not installed.  However when I then ran make, I
> > received errors complaining that  the include file X11/X.h and similar
> > are not found.
....
> However, you do have X11 on your machine if you have KDE, and you
> definitely do want to use X11 in R to get graphics.
> 
>  You may not have the X11 header files installed -- they should be
> somewhere under /usr/X11 or /usr/include/X11.  If the header files aren't
> installed then you will need to install them. They will be on your
> distribution CD, perhaps in a package called something like x-devel.

They are in the file Packages/RPMS/XFree86-devel-3.3.3.1-4.i386.rpm

(On the RedHat 6.0 distribution, there is
XFree86-devel-3.3.3.1-49.i386.rpm
which seems to be a later version.)

----------------------------------------------------------------
I have been wrestling with this also.  I had to install g77 from
the distribution CD, then the above rpm.
Having got this in order, I then received extensive output,
terminated by the following (which I have formatted on to
multiple lines):

gcc -export-dynamic -o ../../bin/R.X11 arithmetic.o array.o attrib.o
 bind.o builtin.o character.o coerce.o colors.o complex.o context.o
 cov.o cum.o debug.o devPS.o devPicTeX.o deparse.o deriv.o devices.o
 dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o format.o
 fourier.o gram.o gram-ex.o graphics.o iosupport.o list.o logic.o
 main.o match.o memory.o model.o names.o objects.o optimize.o
 options.o par.o paste.o platform.o plot.o plot3d.o plotmath.o
 print.o printarray.o printvector.o printutils.o random.o relop.o
 saveload.o scan.o seq.o sort.o source.o split.o subassign.o
 subscript.o subset.o summary.o unique.o util.o version.o
 ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE
 -L/usr/X11R6/lib -lX11 -L/usr/lib/gcc-lib/i386-linux/egcs-2.91.66
 -L/usr/i386-linux/lib -lg2c -lm -lg2c: -ldl -lm
 /usr/i386-linux/bin/ld: cannot open -lg2c: No such file or directory
make[3]: *** [../../bin/R.X11] Error 1 make[3]: Leaving directory
`/home/john/BUILD/src/main' make[2]: *** [R] Error 2 make[2]:
Leaving directory `/home/john/BUILD/src/main' make[1]: *** [R] Error
1 make[1]: Leaving directory `/home/john/BUILD/src' make: *** [R]
Error 1 

I have been unable to find anything on the distribution CD that
might answer to the lg2c.  Any clues would be welcome.

These difficulties aside, the Caldera OpenLinux 2.2 distribution
is much more novice-friendly than RedHat 6.0.  Configuration is
much quicker and more straightforward.


John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Aug 29 11:59:06 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Aug 1999 12:59:06 +0200
Subject: Compiling R under Caldera Open Linux 2.2 (PR#260)
In-Reply-To: john.maindonald@anu.edu.au's message of "Sun, 29 Aug 1999 11:38:49 +0200 (MET DST)"
References: <199908290938.LAA03259@pubhealth.ku.dk>
Message-ID: <x2emgmua2t.fsf@blueberry.kubism.ku.dk>

john.maindonald@anu.edu.au writes:

>  -L/usr/X11R6/lib -lX11 -L/usr/lib/gcc-lib/i386-linux/egcs-2.91.66
>  -L/usr/i386-linux/lib -lg2c -lm -lg2c: -ldl -lm
>  /usr/i386-linux/bin/ld: cannot open -lg2c: No such file or directory
...
> I have been unable to find anything on the distribution CD that
> might answer to the lg2c.  Any clues would be welcome.

Hmm. Redhat has the g2c stuff in 

/usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/include/g2c.h
/usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/libg2c.a

Generally, the file comes with the EGCS g77 (egcs-g77-1.1.2-12 here).
Try 'locate g2c' and if that fails go through the RPMS on the CD with

rpm -qlp /path/to/RPMS/*.rpm | grep g2c

> These difficulties aside, the Caldera OpenLinux 2.2 distribution
> is much more novice-friendly than RedHat 6.0.  Configuration is
> much quicker and more straightforward.

- except for developers, it would seem....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gautier@lion-ag.de  Mon Aug 30 12:28:54 1999
From: gautier@lion-ag.de (gautier@lion-ag.de)
Date: Mon, 30 Aug 1999 13:28:54 +0200 (MET DST)
Subject: interface w/ emacs (PR#261)
Message-ID: <199908301128.NAA11318@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: 0.65.0
OS: mips SGI-Irix 6.5
Submission from: (NULL) (195.110.4.98)


Using R through emacs with ess5.1.8, I cannot set R workspace (--vsize and
--nsize).

So far I was using R0.64.2 without such a problem. I am aware my bug report is a
bit light,
but just let me know if anything I could do with my R and emacs would be of any
help for\
specifying better what is the bug (if there is a bug...)


To reproduce the problem :
with emacs 20.3.3

C-u M-x R
(when asked the arguments) --nsize whatever --vsize whatever

(check in R what is the workspace)

gc()





Laurent

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 30 13:08:44 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Aug 1999 14:08:44 +0200
Subject: interface w/ emacs (PR#261)
In-Reply-To: gautier@lion-ag.de's message of "Mon, 30 Aug 1999 13:28:54 +0200 (MET DST)"
References: <199908301128.NAA11318@pubhealth.ku.dk>
Message-ID: <x2vh9xjws3.fsf@blueberry.kubism.ku.dk>

gautier@lion-ag.de writes:

> So far I was using R0.64.2 without such a problem. I am aware my bug report is a
> bit light,
> but just let me know if anything I could do with my R and emacs would be of any
> help for\
> specifying better what is the bug (if there is a bug...)

There's a bug alright...

The problem is also displayed when starting from the command line with

 R --no-readline --vsize 10M 

(but not with --no-readline last) 

A passable workaround would seem to be to 'M-x setenv' R_VSIZE and
R_NSIZE before 'M-x R'.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 30 13:25:56 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 30 Aug 1999 13:25:56 +0100 (BST)
Subject: interface w/ emacs (PR#261)
In-Reply-To: <x2vh9xjws3.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9908301322200.23731-100000@auk.stats>

On 30 Aug 1999, Peter Dalgaard BSA wrote:

> gautier@lion-ag.de writes:
> 
> > So far I was using R0.64.2 without such a problem. I am aware my bug report is a
> > bit light,
> > but just let me know if anything I could do with my R and emacs would be of any
> > help for\
> > specifying better what is the bug (if there is a bug...)
> 
> There's a bug alright...

Yes, will commit a patch for R-release shortly

> The problem is also displayed when starting from the command line with
> 
>  R --no-readline --vsize 10M 
> 
> (but not with --no-readline last) 
> 
> A passable workaround would seem to be to 'M-x setenv' R_VSIZE and
> R_NSIZE before 'M-x R'.

It might be easier to use .Renviron to set these.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 30 13:50:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 30 Aug 1999 13:50:47 +0100 (BST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <XFMail.990830135718.awol@xs4all.nl>
Message-ID: <Pine.GSO.4.05.9908301344510.25686-100000@auk.stats>

On Mon, 30 Aug 1999, Alexander Volovics wrote:

> Have just compiled and installed R-65.0 on RH 6.0 with all the latest
> updates for RH and Gnome (including `libglade-0.3-1.i386.rpm' and
> `libglade-devel-0.3-1.i386.rpm' from RH ftp).
> 
> R.X11 works OK.
> 
> But when I try `R --gnome' I get a segmentation fault/core dump
> with the messages:
> 
> Gdk-CRITICAL **: file gdkfont.c: line 174 (gdk_font_id): assertion `font
> != NULL' failed.
> 
> Gdk-CRITICAL **: file gdkfont.c: line 133 (gdk_font_ref): assertion `font
> != NULL' failed.
> 
> .................etc., etc.
> 
> 1) `gdb' shows (for what it is worth):
>    Core was generated by `/usr/local/R65/lib/R/bin/R.gnome'
>    #0  0x4024034d in gtk_text_size_request ()
> 
> 2) I can't find the file `gdkfont.c' anywhere on my system.
>    Should I be able to and if so can anybody tell me which package/library
>    contains `gdkfont.c' ?

(it is in the source for libgdk).

> Is this my stupidity or worth reporting as a bug or already known?

Have you upgraded all the rpms mentioned in the INSTALL? It is possible
I suppose that you have too recent versions, as well as possible that
you have too old ones.  That does work on both my RH6.0 systems, and it
was critical that I upgraded the gtk+ packages; before I did I got similar
problems.

I have moved this to R-devel, as a more appropriate place IMHO.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From awol@xs4all.nl  Mon Aug 30 15:32:08 1999
From: awol@xs4all.nl (Alexander Volovics)
Date: Mon, 30 Aug 1999 16:32:08 +0200 (CEST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <Pine.GSO.4.05.9908301344510.25686-100000@auk.stats>
Message-ID: <XFMail.990830163208.awol@xs4all.nl>


On 30-Aug-99 Prof Brian D Ripley wrote:

>> 2) I can't find the file `gdkfont.c' anywhere on my system.
>>    Should I be able to and if so can anybody tell me which
>>    package/library contains `gdkfont.c' ?
 
> (it is in the source for libgdk).

Thanks for your quick reply.

Libgdk? 
The only packages I know of with gdk/libgdk files
are `gtk+' and `gtk+10' and neither contain `gdkfont.c'.

> Have you upgraded all the rpms mentioned in the INSTALL? It is possible
> I suppose that you have too recent versions, as well as possible that
> you have too old ones.  That does work on both my RH6.0 systems, and it
> was critical that I upgraded the gtk+ packages; before I did I got
> similar problems.

This is what I have:

gnome-libs-1.0.12-1 & gnome-libs-devel-1.0.12-1
gtk+-1.2.3-1 & gtk+-devel-1.2.3-1
gtk+10-1.0.6-5
glib-1.2.3-1 & glib-devel-1.2.3-1
libglade-0.3-1 & libglade-devel-0.3-1
libxml-1.4.0-1 & libxml-devel-1.4.0-1


On 30-Aug-99 Peter Dalgaard wrote:

> Didn't happen for me. Almost identical setup, except that I had a
> libglade straight from 
> ftp://ftp.daa.com.au/pub/james/gnome/
> there's a 0.4 version of libglade as of last Wednesday.

I had already downloaded that one. If nothing else is wrong I will
try that.
 

*************************************
Alexander Volovics
Dept of Methodology & Statistics
Maastricht University, Maastricht, NL
*************************************
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 30 16:12:01 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 30 Aug 1999 16:12:01 +0100 (BST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <XFMail.990830163208.awol@xs4all.nl>
Message-ID: <Pine.GSO.4.05.9908301605150.25844-100000@auk.stats>

On Mon, 30 Aug 1999, Alexander Volovics wrote:

> 
> On 30-Aug-99 Prof Brian D Ripley wrote:
> 
> >> 2) I can't find the file `gdkfont.c' anywhere on my system.
> >>    Should I be able to and if so can anybody tell me which
> >>    package/library contains `gdkfont.c' ?
>  
> > (it is in the source for libgdk).
> 
> Thanks for your quick reply.
> 
> Libgdk? 
> The only packages I know of with gdk/libgdk files
> are `gtk+' and `gtk+10' and neither contain `gdkfont.c'.

No, binary rpms will not contain source files, will they?

> > Have you upgraded all the rpms mentioned in the INSTALL? It is possible
> > I suppose that you have too recent versions, as well as possible that
> > you have too old ones.  That does work on both my RH6.0 systems, and it
> > was critical that I upgraded the gtk+ packages; before I did I got
> > similar problems.
> 
> This is what I have:
> 
> gnome-libs-1.0.12-1 & gnome-libs-devel-1.0.12-1
> gtk+-1.2.3-1 & gtk+-devel-1.2.3-1
> gtk+10-1.0.6-5
> glib-1.2.3-1 & glib-devel-1.2.3-1
> libglade-0.3-1 & libglade-devel-0.3-1
> libxml-1.4.0-1 & libxml-devel-1.4.0-1

That's a later gnome-libs than I have.

> On 30-Aug-99 Peter Dalgaard wrote:
> 
> > Didn't happen for me. Almost identical setup, except that I had a
> > libglade straight from 
> > ftp://ftp.daa.com.au/pub/james/gnome/
> > there's a 0.4 version of libglade as of last Wednesday.
> 
> I had already downloaded that one. If nothing else is wrong I will
> try that.

libglade is not actually used in 0.65.0, I believe. I was using the
libglade-0.3 straight from the source.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 30 16:16:23 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Aug 1999 17:16:23 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Mon, 30 Aug 1999 16:32:08 +0200 (CEST)"
References: <XFMail.990830163208.awol@xs4all.nl>
Message-ID: <x2ogfpjo3c.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> Libgdk? 
> The only packages I know of with gdk/libgdk files
> are `gtk+' and `gtk+10' and neither contain `gdkfont.c'.

Try 'nm /usr/lib/libgdk.a | grep font' and I think you will see the light...

> > Have you upgraded all the rpms mentioned in the INSTALL? It is possible
> > I suppose that you have too recent versions, as well as possible that
> > you have too old ones.  That does work on both my RH6.0 systems, and it
> > was critical that I upgraded the gtk+ packages; before I did I got
> > similar problems.
> 
> This is what I have:
> 
> gnome-libs-1.0.12-1 & gnome-libs-devel-1.0.12-1
> gtk+-1.2.3-1 & gtk+-devel-1.2.3-1
> gtk+10-1.0.6-5
> glib-1.2.3-1 & glib-devel-1.2.3-1
> libglade-0.3-1 & libglade-devel-0.3-1
> libxml-1.4.0-1 & libxml-devel-1.4.0-1

Builds and runs (i.e. doesn't crash at startup and runs
demo(graphics)) for me with

gnome-libs-1.0.11-1
gnome-libs-devel-1.0.11-1
gtk+-1.2.3-1
gtk+-1.2.3-1
gtk+10-1.0.6-5
glib-1.2.3-1
glib-devel-1.2.3-1
libglade-0.4-SNAP
libglade-devel-0.4-SNAP
libxml-1.4.0-1
libxml-devel-1.4.0-1
libxml10-1.0.0-1

I'd say libglade is the culprit...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From awol@xs4all.nl  Tue Aug 31 10:46:27 1999
From: awol@xs4all.nl (Alexander Volovics)
Date: Tue, 31 Aug 1999 11:46:27 +0200 (CEST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
Message-ID: <XFMail.990831114627.awol@xs4all.nl>

On 30-Aug-99 I wrote: 

>> Libgdk? 
>> The only packages I know of with gdk/libgdk files
>> are `gtk+' and `gtk+10' and neither contain `gdkfont.c'.

To which Prof Brian D Ripley and Peter Dalgaard replied:

> No, binary rpms will not contain source files, will they?

> Try 'nm /usr/lib/libgdk.a | grep font' and I think you will see the
> light...

I (just barely, as a non programmer) know the differences between
foo.c, foo.o, foo.h, foo.a files but I got carried away (non thinkingly)
by the error messages:

  Gdk-CRITICAL **: file gdkfont.c: line 174 (gdk_font_id): assertion
  `font != NULL' failed.

However what has `gdkfont.c' got to do with it in THIS context?

Further I wrote:

>> This is what I have:
>> gnome-libs-1.0.12-1 & gnome-libs-devel-1.0.12-1
>> gtk+-1.2.3-1 & gtk+-devel-1.2.3-1
>> gtk+10-1.0.6-5
>> glib-1.2.3-1 & glib-devel-1.2.3-1
>> libglade-0.3-1 & libglade-devel-0.3-1
>> libxml-1.4.0-1 & libxml-devel-1.4.0-1

To which Prof Brian D Ripley and Peter Dalgaard replied:

> That's a later gnome-libs than I have.
 
> libglade-0.4-SNAP
> libglade-devel-0.4-SNAP
> I'd say libglade is the culprit...

I have just made the libglade-0.4-SNAP and libglade-devel-0.4-SNAP rpm's
and recompiled R-0.65.0. The same thing happens with `R --gnome', namely:
Segmentation fault (core dumped), with the same error messages.

So the culprit is not libglade but maybe `gnome-libs-1.0.12-1' given that
you both have an earlier gnome-libs. Or maybe even something else.

I am not going to pursue this further as it takes too much time. I was just
curious how the R gnome interface had progressed.

Thank you both very much for taking the time to respond.

Should I report it as a bug or is it not worth it given the
`moving target' status of the gnome libs and the `work in progress'
status of the R gnome interface?


*************************************
Alexander Volovics
Dept of Methodology & Statistics
Maastricht University, Maastricht, NL
*************************************
  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 11:03:28 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 12:03:28 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 11:46:27 +0200 (CEST)"
References: <XFMail.990831114627.awol@xs4all.nl>
Message-ID: <x2671w9si7.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> Should I report it as a bug or is it not worth it given the
> `moving target' status of the gnome libs and the `work in progress'
> status of the R gnome interface?

Probably the latter. A note to R-devel should suffice to get the
immediate attention. When we get around to working through the bug
repository, the world may look completely different. 

One thing, btw. What happens if you run

bin/R -d gdb
(gdb) run --gnome
<<crash>>
(gdb) bt
<<stack trace telling us what was the call>>
(gdb) up
<<possibly repeat until inside R>>
(gdb) l

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Tue Aug 31 13:47:23 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 31 Aug 1999 05:47:23 -0700
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 11:46:27 +0200 (CEST)"
References: <XFMail.990831114627.awol@xs4all.nl>
Message-ID: <87pv042k2s.fsf@alpha.cfas.washington.edu>


>>>>> "AV" == Alexander Volovics <awol@xs4all.nl> writes:

    AV> I (just barely, as a non programmer) know the differences
    AV> between foo.c, foo.o, foo.h, foo.a files but I got carried
    AV> away (non thinkingly) by the error messages:

    AV>   Gdk-CRITICAL **: file gdkfont.c: line 174 (gdk_font_id):
    AV>   assertion `font != NULL' failed.

    AV> However what has `gdkfont.c' got to do with it in THIS
    AV> context?

This says that it couldn't find a font it was looking for.  

Gnome is pretty half-hazard.  It's nice when it works, but can't be
trusted -- for instance, out of 6 identically configured Debian
machines, I can run gnome-session on startup on 4, but I _always_ get
name-service errors (with fatal halts) on the other 2.    (Debian's
slightly behind, but problem and bug reports on the Gnome list are
still a bit too often for my liking).

Even though I'm using it as my default GUI, I'd trust gnome about as
far as I can throw it (the bits, not the machines :-)...  It's still
somewhat unstable.

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From awol@xs4all.nl  Tue Aug 31 14:03:06 1999
From: awol@xs4all.nl (Alexander Volovics)
Date: Tue, 31 Aug 1999 15:03:06 +0200 (CEST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <x2671w9si7.fsf@blueberry.kubism.ku.dk>
Message-ID: <XFMail.990831150306.awol@xs4all.nl>


On 31-Aug-99 Peter Dalgaard BSA wrote:

> One thing, btw. What happens if you run
> 
> bin/R -d gdb
> (gdb) run --gnome
> <<crash>>
> (gdb) bt
> <<stack trace telling us what was the call>>
> (gdb) up
> <<possibly repeat until inside R>>
> (gdb) l


This does not work.

`R -d gdb' opens in gdb allright but then you get:
(gdb) run --gnome
Starting program: /usr/local/R65/lib/R/bin/R.X11 --gnome
WARNING: unknown option --gnome

I have not found a way to start R.gnome with `-d gdb' yet.


*************************************
Alexander Volovics
Dept of Methodology & Statistics
Maastricht University, Maastricht, NL
*************************************
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 31 14:42:48 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 31 Aug 1999 15:42:48 +0200
Subject: Suggestion for  qqplot() improvement
In-Reply-To: <199908311257.OAA00978@erna-w.ethz.ch> (message from Werner
 Stahel on Tue, 31 Aug 1999 14:57:21 +0200)
References: <199908311257.OAA00978@erna-w.ethz.ch>
Message-ID: <199908311342.PAA01425@sophie.ethz.ch>

>>>>> On Tue, 31 Aug 1999 14:57, Werner Stahel <stahel@stat.math.ethz.ch> said:

    WSt> Here is a suggestion.  It seems that qqplots, comparing a sample
    WSt> to a distribution other than the normal, are not explicitly
    WSt> available in S or R. I found

(in S-plus / Trellis it is, see below)

    WSt>	   qqplot(y, rt(300, df = 5))

    WSt> as an example in the help file to  qqplot .
    WSt> This is not very sensible. 

(it only tried to show that you can QQ-plot two datasets 
 of *different* length, rather than anything else)

    WSt> I would prefer

    WSt>   n <- length(y)
    WSt>   qqplot(qt((1:n)/(n+1), df=5), y, xlab='quantiles', ylab='data')

yes, for comparison with a theoretical distribution.

Maybe even
      qqplot(qt(ppoints(n), df=5), y, 
	     xlab='quantiles of t(* ,df=5)', ylab='data')

    WSt> and this could be shortened to

    WSt>   qqplot(y, distribution='t', df=5)

    WSt> with an easy extension of the function.

I found:

   Trellis in S-plus has
	    qqmath(formula, distribution = qnorm, f.value = ppoints, ...),
   for your example
        qqmath( ~ y, distribution = function(p) qt(p, df=5), ...)

which is slightly more general (also works with panels, banking to 45
deg,..) but quite a bit more complicated to use for non-sophisticated users.

What should we do / would we want for R?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 15:00:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 16:00:55 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 15:03:06 +0200 (CEST)"
References: <XFMail.990831150306.awol@xs4all.nl>
Message-ID: <x21zck9hig.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> On 31-Aug-99 Peter Dalgaard BSA wrote:
> 
> > One thing, btw. What happens if you run
> > 
> > bin/R -d gdb
> > (gdb) run --gnome
> > <<crash>>
> > (gdb) bt
> > <<stack trace telling us what was the call>>
> > (gdb) up
> > <<possibly repeat until inside R>>
> > (gdb) l
> 
> 
> This does not work.
> 
> `R -d gdb' opens in gdb allright but then you get:
> (gdb) run --gnome
> Starting program: /usr/local/R65/lib/R/bin/R.X11 --gnome
> WARNING: unknown option --gnome

D**n. I forgot that --gnome is processed by the startup script, not the
binary. Sorry.

> I have not found a way to start R.gnome with `-d gdb' yet.

R --gnome -d gdb 

seems to work.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 15:56:48 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 16:56:48 +0200
Subject: Suggestion for  qqplot() improvement
In-Reply-To: Martin Maechler's message of "Tue, 31 Aug 1999 15:42:48 +0200"
References: <199908311257.OAA00978@erna-w.ethz.ch> <199908311342.PAA01425@sophie.ethz.ch>
Message-ID: <x2zoz880cv.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> Maybe even
>       qqplot(qt(ppoints(n), df=5), y, 
> 	     xlab='quantiles of t(* ,df=5)', ylab='data')
> 
>     WSt> and this could be shortened to
> 
>     WSt>   qqplot(y, distribution='t', df=5)
> 
>     WSt> with an easy extension of the function.
> 
> I found:
> 
>    Trellis in S-plus has
> 	    qqmath(formula, distribution = qnorm, f.value = ppoints, ...),
>    for your example
>         qqmath( ~ y, distribution = function(p) qt(p, df=5), ...)
> 
> which is slightly more general (also works with panels, banking to 45
> deg,..) but quite a bit more complicated to use for non-sophisticated users.
> 
> What should we do / would we want for R?

Lets see. "qqplot(qt, y, df=5)" would be tempting save for the
complexities of separating parts of ... intended for the quantile
function from those intended for the plotting. 


We could "easily" have qqplot(y, distrib=qt(p,df=5)), here's a
simplified variant:
                       
f <- function(y,distrib){
    p <- ppoints(length(y))
    x <- eval(eval(substitute(substitute(distrib)),list(p=p)))
    qqplot(x,y,
        xlab=deparse(substitute(distrib)),
        ylab=deparse(substitute(y)))
}

f(rnorm(100), distrib=qt(p,df=2))

The form, e.g., qqplot(qt, y, df=5, lty=3) may not be *all* that hard
to set up. It's just necessary to manipulate the argument list,
somewhat along the lines of

g <- function(p,...){
    l<-list(...)
    m<-match(names(l), names(formals(qt)))
    do.call("qt", c(list(p=p), l[!is.na(m)]))    
}

which is just a long-winded version of qt, except that it strips off
unused arguments. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 31 16:12:39 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 31 Aug 1999 16:12:39 +0100 (BST)
Subject: Suggestion for  qqplot() improvement
In-Reply-To: <x2zoz880cv.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9908311605490.7922-100000@auk.stats>

On 31 Aug 1999, Peter Dalgaard BSA wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > Maybe even
> >       qqplot(qt(ppoints(n), df=5), y, 
> > 	     xlab='quantiles of t(* ,df=5)', ylab='data')
> > 
> >     WSt> and this could be shortened to
> > 
> >     WSt>   qqplot(y, distribution='t', df=5)
> > 
> >     WSt> with an easy extension of the function.
> > 
> > I found:
> > 
> >    Trellis in S-plus has
> > 	    qqmath(formula, distribution = qnorm, f.value = ppoints, ...),
> >    for your example
> >         qqmath( ~ y, distribution = function(p) qt(p, df=5), ...)
> > 
> > which is slightly more general (also works with panels, banking to 45
> > deg,..) but quite a bit more complicated to use for non-sophisticated users.
> > 
> > What should we do / would we want for R?
> 
> Lets see. "qqplot(qt, y, df=5)" would be tempting save for the
> complexities of separating parts of ... intended for the quantile
> function from those intended for the plotting. 
> 
> 
> We could "easily" have qqplot(y, distrib=qt(p,df=5)), here's a
> simplified variant:
>                        
> f <- function(y,distrib){
>     p <- ppoints(length(y))
>     x <- eval(eval(substitute(substitute(distrib)),list(p=p)))
>     qqplot(x,y,
>         xlab=deparse(substitute(distrib)),
>         ylab=deparse(substitute(y)))
> }
> 
> f(rnorm(100), distrib=qt(p,df=2))
> 
> The form, e.g., qqplot(qt, y, df=5, lty=3) may not be *all* that hard
> to set up. It's just necessary to manipulate the argument list,
> somewhat along the lines of
> 
> g <- function(p,...){
>     l<-list(...)
>     m<-match(names(l), names(formals(qt)))
>     do.call("qt", c(list(p=p), l[!is.na(m)]))    
> }
> 
> which is just a long-winded version of qt, except that it strips off
> unused arguments. 

If it helps, surf.gls in my spatial library does almost precisely that in
the parent, that is matches up those arguments that apply to the (here)
distrib argument and packages a function to do the work. (It is a bit more
than is needed here, as that needs to return the function for future use or
(once) to pass to call_S.)  So I don't think it is hard (the second time).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 16:15:47 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 17:15:47 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 16:40:30 +0200 (CEST)"
References: <XFMail.990831164030.awol@xs4all.nl>
Message-ID: <x2yaes7zh8.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> Program received signal SIGSEGV, Segmentation fault.
> 0x4024034d in gtk_text_size_request ()
> (gdb) bt
> #0  0x4024034d in gtk_text_size_request ()
> #1  0x40266695 in gtk_marshal_NONE__POINTER ()
> #2  0x4022d2ab in gtk_signal_real_emit ()
> #3  0x4022b6c0 in gtk_signal_emit ()
> #4  0x4025d298 in gtk_widget_size_request ()
> #5  0x4023ca3a in gtk_table_size_request_init ()
> #6  0x4023c569 in gtk_table_size_request ()
> #7  0x40266695 in gtk_marshal_NONE__POINTER ()
> #8  0x4022d2ab in gtk_signal_real_emit ()
> #9  0x4022b6c0 in gtk_signal_emit ()
> #10 0x4025d298 in gtk_widget_size_request ()
> #11 0x400af7d0 in gnome_dock_size_request ()
> #12 0x40266695 in gtk_marshal_NONE__POINTER ()
> #13 0x4022d2ab in gtk_signal_real_emit ()
> #14 0x4022b6c0 in gtk_signal_emit ()
> #15 0x4025d298 in gtk_widget_size_request ()
> #16 0x4025366e in gtk_vbox_size_request ()
> #17 0x40266695 in gtk_marshal_NONE__POINTER ()
> #18 0x4022d2ab in gtk_signal_real_emit ()
> #19 0x4022b6c0 in gtk_signal_emit ()
> #20 0x4025d298 in gtk_widget_size_request ()
> #21 0x40264c77 in gtk_window_size_request ()
> #22 0x40266695 in gtk_marshal_NONE__POINTER ()
> #23 0x4022d2ab in gtk_signal_real_emit ()
> #24 0x4022b6c0 in gtk_signal_emit ()
> #25 0x4025d298 in gtk_widget_size_request ()
> #26 0x402659fc in gtk_window_move_resize ()
> #27 0x4026591e in gtk_window_check_resize ()
> #28 0x402667eb in gtk_marshal_NONE__NONE ()
> #29 0x4022d428 in gtk_signal_real_emit ()
> #30 0x4022b6c0 in gtk_signal_emit ()
> #31 0x401c5df8 in gtk_container_check_resize ()
> #32 0x40264744 in gtk_window_show ()
> #33 0x4008a7b0 in gnome_app_show ()
> #34 0x402667eb in gtk_marshal_NONE__NONE ()
> #35 0x4022d2ab in gtk_signal_real_emit ()
> #36 0x4022b6c0 in gtk_signal_emit ()
> #37 0x4025b230 in gtk_widget_show ()
> #38 0x401c78d4 in gtk_container_show_all ()
> ---Type <return> to continue, or q <return> to quit---
> #39 0x4025b7d6 in gtk_widget_show_all ()
> #40 0x80cd79b in R_gtk_terminal_new () at terminal.c:112
> #41 0x80c8481 in main (ac=1, av=0xbffffbc4) at system.c:314
> #42 0x4042acb3 in __libc_start_main (main=0x80c831c <main>, argc=1, 
>     argv=0xbffffbc4, init=0x8058934 <_init>, fini=0x810319c <_fini>, 
>     rtld_fini=0x4000a350 <_dl_fini>, stack_end=0xbffffbbc)
>     at ../sysdeps/generic/libc-start.c:78
> (gdb) up
> #1  0x40266695 in gtk_marshal_NONE__POINTER ()
> (gdb) up
> #2  0x4022d2ab in gtk_signal_real_emit ()
> (gdb) up
> #3  0x4022b6c0 in gtk_signal_emit ()
> (gdb) up
....
> #40 0x80cd79b in R_gtk_terminal_new () at terminal.c:112
> 112       gtk_widget_show_all(R_gtk_main_window);
> (gdb) up
> #41 0x80c8481 in main (ac=1, av=0xbffffbc4) at system.c:314
> 314         R_gtk_terminal_new();
> (gdb) up
> #42 0x4042acb3 in __libc_start_main (main=0x80c831c <main>, argc=1, 
>     argv=0xbffffbc4, init=0x8058934 <_init>, fini=0x810319c <_fini>, 
>     rtld_fini=0x4000a350 <_dl_fini>, stack_end=0xbffffbbc)
>     at ../sysdeps/generic/libc-start.c:78
> ../sysdeps/generic/libc-start.c:78: No such file or directory.
> (gdb) up
> Initial frame selected; you cannot go up.
> (gdb) l
> ../sysdeps/generic/libc-start.c:73: No such file or directory.
.
> What is the meaning of `up'. It just goes all the way back to the
> `beginning' and does not `reenter' R ?

It goes back through the list of function calls. This allows you to
inspect variables, etc.

> Does this tell you anything. No core file was produced this way.
> 
> If I have done it wrong please ask again. I have no real understanding
> of how gdb works.

What would interest me is what the content of R_gnome_userprefs.font
if you go up to #40 (in R_gtk_terminal_new () at terminal.c:112). Just
type 

p R_gnome_userprefs.font

if it's NULL, then we might have a lead on the problem. But Lyndon
Drake is the guy who knows his way around the Gnome stuff, not me.

What is in your .gnome/R.gnome file, by the way?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 31 17:24:18 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 31 Aug 1999 17:24:18 +0100 (BST)
Subject: Suggestion for  qqplot() improvement
In-Reply-To: <Pine.GSO.4.05.9908311605490.7922-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.9908311713310.8158-100000@auk.stats>

(Martin Maechler quoting Werner Stahel, I think)

> Maybe even
>       qqplot(qt(ppoints(n), df=5), y, 
> 	     xlab='quantiles of t(* ,df=5)', ylab='data')
> 
>     WSt> and this could be shortened to
> 
>     WSt>   qqplot(y, distribution='t', df=5)
> 
>     WSt> with an easy extension of the function.

Would qqplot(qt, y, df=5) or qqplot("t", y, df=5) with the following do
what you want?  As plot warns about surplus arguments, I have removed them
from the ... in its call.

qqplot <- function (x, y, plot.it = TRUE, xlab = deparse(substitute(x)), 
    ylab = deparse(substitute(y)), ...) 
{
    xlab
    sy <- sort(y)
    leny <- length(sy)
    dots <- list(...)
    if(is.character(x)) x <- get(paste("q", x, sep=""))
    if(is.function(x)) {
        fn <- x
        formals(fn) <- c(formals(fn), "..." = list(NULL))
        sx <- fn(ppoints(leny), ...)
        dots <- dots[!match(names(dots), names(formals(x)), FALSE)]
    } else {    
        sx <- sort(x)
        lenx <- length(sx)
        if (leny < lenx) sx <- approx(1:lenx, sx, n = leny)$y
        if (leny > lenx) sy <- approx(1:leny, sy, n = lenx)$y
    }
    if (plot.it) 
        do.call("plot", c(list(sx, sy, xlab = xlab, ylab = ylab), dots))
    invisible(list(x = sx, y = sy))
}


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 17:48:42 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 18:48:42 +0200
Subject: Suggestion for  qqplot() improvement
In-Reply-To: Prof Brian D Ripley's message of "Tue, 31 Aug 1999 17:24:18 +0100 (BST)"
References: <Pine.GSO.4.05.9908311713310.8158-100000@auk.stats>
Message-ID: <x2vh9v99qt.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

>         formals(fn) <- c(formals(fn), "..." = list(NULL))

This will break if fn already has a "..." argument, will it not? (If
it doesn't, it should...). I'd prefer

  formals(fn)["..."] <- alist(...=)

(And its a good thing that Robert is on that secluded island off of
Gothenburg. This would really make him cringe.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From awol@xs4all.nl  Tue Aug 31 22:21:31 1999
From: awol@xs4all.nl (Alexander Volovics)
Date: Tue, 31 Aug 1999 23:21:31 +0200 (CEST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <x2yaes7zh8.fsf@blueberry.kubism.ku.dk>
Message-ID: <XFMail.990831232131.awol@xs4all.nl>


On 31-Aug-99 Peter Dalgaard BSA wrote:

> What would interest me is what the content of R_gnome_userprefs.font
> if you go up to #40 (in R_gtk_terminal_new () at terminal.c:112). Just
> type 
> p R_gnome_userprefs.font
> if it's NULL, then we might have a lead on the problem. But Lyndon
> Drake is the guy who knows his way around the Gnome stuff, not me.


Here is the result:

#40 0x80cd79b in R_gtk_terminal_new () at terminal.c:112
112       gtk_widget_show_all(R_gtk_main_window);
(gdb) p R_gnome_userprefs.font
$1 = (gchar *) 0x814cbf0 ""


> What is in your .gnome/R.gnome file, by the way?

Here is my R.gnome:

[Placement]
Dock=Toolbar\\0,1,0,0\\Menubar\\0,0,0,0

[Text]
textcolor=rgb:0000/0000/0000
bgcolor=rgb:ffff/ffff/ffff
font=

[Pager]
title_font=-adobe-helvetica-bold-r-normal-*-*-100-*-*-p-*-iso8859-1
title_textcolor=rgb:0000/0000/0000
title_bgcolor=rgb:ffff/ffff/ffff
text_font=-misc-fixed-medium-r-normal-*-*-120-*-*-c-*-iso8859-1
em_font=-misc-fixed-bold-r-normal-*-*-120-*-*-c-*-iso8859-1
text_textcolor=rgb:0000/0000/0000
text_bgcolor=rgb:ffff/ffff/ffff

HA. The solution is often very simple. I should have thought of
looking here myself. Under [Text] there is no entry for font!
Enter a font and R.gnome works.

This means that it would also have worked with libglade-0.3-1.
Is this an ommision in configure/make/make install?

Thanks for taking the time to respond and the suggestions.


*************************************
Alexander Volovics
Dept of Methodology & Statistics
Maastricht University, Maastricht, NL
*************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 22:54:12 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 23:54:12 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 23:21:31 +0200 (CEST)"
References: <XFMail.990831232131.awol@xs4all.nl>
Message-ID: <x2zoz7wr97.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> HA. The solution is often very simple. I should have thought of
> looking here myself. Under [Text] there is no entry for font!
> Enter a font and R.gnome works.
> 
> This means that it would also have worked with libglade-0.3-1.
> Is this an ommision in configure/make/make install?

It's not supposed to happen. Mine certainly got filled in without any
help. Perhaps a default font used to get inserted? With a font entry
like yours, my version also burns to cinders in a flurry of

Gdk-CRITICAL **: file gdkfont.c: line 360 (gdk_char_width): assertion
`font != NULL' failed.

(And as Brian remarked, the libglade seems not to be actually used in
0.65. We just wouldn't tamper any more with the configure program...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.csiro.au  Mon Aug  2 08:50:52 1999
From: Richard.Beare@cmis.csiro.au (Richard Beare)
Date: Mon, 02 Aug 1999 17:50:52 +1000
Subject: Advice interfacing to an imaging library
Message-ID: <37A54DDC.2B830881@cmis.csiro.au>

Hi All,
I've done some work recently making some of our image analysis library
callable from R and Splus. Most of the C image functions use an abstract
data type, and R only sees a pointer to this. All memory allocation is
done by the library. This leads to some interesting problems. I'm
interested in your views about possible solutions.

1) assignment. something like a<-b, where a and b are image pointers
will only copy the pointer, not the image. We'd like to overload the <-
operator to call the library copy routine.

2) garbage collection. It is now easy to lose track of memory, and this
is likely to be significant because images are usually quite big. There
is a delete function in the library, so it is possible to dispose of
images manually, but an automated method would be nice. One option is to
keep a global list of all pointers returned from C function calls,
generate a list of all image class objects visible in R and compare the
two. Any pointers not on the image class list can be disposed. Does
anyone have any other ideas?

All advice welcome.


-- 
Richard Beare
Richard.Beare@cmis.csiro.au
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From naras@stat.stanford.edu  Mon Aug  2 18:27:21 1999
From: naras@stat.stanford.edu (Balasubramanian Narasimhan)
Date: Mon, 02 Aug 1999 10:27:21 -0700 (PDT)
Subject: Advice interfacing to an imaging library
In-Reply-To: Your message of "Mon, 02 Aug 1999 17:50:52 +1000"
 <37A54DDC.2B830881@cmis.csiro.au>
References: <37A54DDC.2B830881@cmis.csiro.au>
Message-ID: <19990802102721C.naras@stat.Stanford.EDU>

>>>>> "Richard" == Richard Beare <Richard.Beare@cmis.csiro.au> writes:

    Richard> 2) garbage collection. It is now easy to lose track of
    Richard> memory, and this is likely to be significant because
    Richard> images are usually quite big. There is a delete function
    Richard> in the library, so it is possible to dispose of images
    Richard> manually, but an automated method would be nice. One
    Richard> option is to keep a global list of all pointers returned
    Richard> from C function calls, generate a list of all image class
    Richard> objects visible in R and compare the two. Any pointers
    Richard> not on the image class list can be disposed. Does anyone
    Richard> have any other ideas?

I'd look to embed a JVM into R and use all the power of Java for image
processing and garbage collection. I've done it with xlispstat but not
with R.
________________________________________________________________
B. Narasimhan                            naras@stat.stanford.edu
                             http://www-stat.stanford.edu/~naras





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Mon Aug  2 18:43:13 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 2 Aug 1999 13:43:13 -0400
Subject: Advice interfacing to an imaging library
Message-ID: <199908021744.TAA02445@stat.math.ethz.ch>


> >>>>> "Richard" == Richard Beare <Richard.Beare@cmis.csiro.au> writes:
> 
>     Richard> 2) garbage collection. It is now easy to lose track of
>     Richard> memory, and this is likely to be significant because
>     Richard> images are usually quite big. There is a delete function
>     Richard> in the library, so it is possible to dispose of images
>     Richard> manually, but an automated method would be nice. One
>     Richard> option is to keep a global list of all pointers returned
>     Richard> from C function calls, generate a list of all image class
>     Richard> objects visible in R and compare the two. Any pointers
>     Richard> not on the image class list can be disposed. Does anyone
>     Richard> have any other ideas?
> 
> I'd look to embed a JVM into R and use all the power of Java for image
> processing and garbage collection. I've done it with xlispstat but not
> with R.
> ________________________________________________________________
> B. Narasimhan                            naras@stat.stanford.edu


My guess is that that would involve rewriting the existing library
written in C. Similarly, embedding the JVM still requires some
communication with the Java classes, etc. and conversion between the
R and Java data structures. This is where the meat of the interface lies.

However, on a more positive note, the embedding of the JVM into R and
S4/Splus5, John Chambers and I have been playing with, is getting very
close to being finished. I have been putting some of the final details
to it over the weekend. So the dynamic communication with Java
(i.e. dynamic method lookup and invocation) would not be that hard.

D.


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dajm@deeq.demon.co.uk  Tue Aug  3 23:22:50 1999
From: dajm@deeq.demon.co.uk (dajm@deeq.demon.co.uk)
Date: Wed, 4 Aug 1999 00:22:50 +0200 (MET DST)
Subject: EPS compliance of postscript device: initclip operator (PR#238)
Message-ID: <199908032222.AAA13347@pubhealth.ku.dk>


Dear R-bugs

The help for the R postscript() device states:

        The postscript produced by R is EPS (Encapsulated
        PostScript) compatible, and can be included into other
        documents...

However, postscript produced by R uses the "initclip" operator to
define the operator "cl":

	/cl  { initclip newpath 3 index 3 index moveto 1 index
		4 -1 roll lineto  exch 1 index lineto lineto
		closepath clip newpath } def

initclip is one of the postscript operators that the EPS file specification
(at http://partners.adobe.com/asn/developer/PDFS/5002.EPSF_Spec_v3.0.pdf -
see page 6) states should not be used in EPS files.

For true EPS compliance the R postscript device should not therefore use
initclip.

Under S-PLUS (v3.3 Solaris is the latest I have experience of, Brian Ripley
notes the same is NOT true under S-PLUS for windows) the onefile=T argument to
the postscript device causes the output file to be structured as an EPS file.
It would be desirable if R supported a similar option.  As under S-PLUS, it
could
probably be left to the user to ensure that only a single page of graphics
is output
to a file intended to be EPS compliant (or an error could be returned if
starting
a second page could be detected with ease).

Thanks

David Middleton
dajm@deeq.demon.co.uk

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 8
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@stat.auckland.ac.nz  Tue Aug  3 22:32:20 1999
From: lyndon@stat.auckland.ac.nz (Lyndon Drake)
Date: Wed, 4 Aug 1999 09:32:20 +1200
Subject: Memory profiling/benchmarking
In-Reply-To: <379DC75D.DFFAFBC6@bank-banque-canada.ca>; from Paul Gilbert on Tue, Jul 27, 1999 at 10:51:10AM -0400
References: <19990727171758.A2622@stat1.stat.auckland.ac.nz> <379DC75D.DFFAFBC6@bank-banque-canada.ca>
Message-ID: <19990804093220.A14758@stat1.stat.auckland.ac.nz>

On Tue, Jul 27, 1999 at 10:51:10AM -0400, Paul Gilbert wrote:
> Lyndon
> 
> There are several test scripts with my DSE library available at
> <http://www.bank-banque-canada.ca/pgilbert>. (Please don't make the mistake of
> trying to install the version on CRAN - it installs with  R 0.61 but there have
> been a lot of changes to R since then.)
> 

The latest DSE tar.gz file seems to be corrupt.  The file I am looking at is
ftp://www.bank-banque-canada.ca/pub/pgilbert/dse/dse.1999.07alphaR.tar.gz

I get an unexpected EOF from tar.

Thanks for the info, 
Lyndon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.csiro.au  Wed Aug  4 00:00:28 1999
From: Richard.Beare@cmis.csiro.au (Richard Beare)
Date: Wed, 04 Aug 1999 09:00:28 +1000
Subject: R internals
Message-ID: <37A7748C.AC3E268D@cmis.csiro.au>

Hi,
I'm interested in hooking into the garbage collection mechanisms in R to
enable R to manage the garbage collection in an imaging package that
does its own memory allocation. This would require R to call a
destructor when it disposes of objects of a certain class. Is this a
practical approach? I've been looking for documentation about the R
internals, but haven't found any yet - where should I be looking.

Thanks, any advice is welcome.
-- 
Richard Beare
Richard.Beare@cmis.csiro.au
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  5 12:28:05 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 5 Aug 1999 13:28:05 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908051128.NAA28801@pubhealth.ku.dk>

(1) ?cbind claims

     The generic functions `cbind' and `rbind' take a
     sequence of vector and/or matrix arguments and combine
     them as the columns or rows, respectively, of a matrix.

Note:

     The method dispatching is not done via `UseMethod(..)',
     but by C-internal dispatching.  Therefore, there's no
     need for, e.g., `rbind.default'.

but my cbind.ts does not get called, and try the following:

cbind.my <- function(...)
{
    stop("used cbind.my")
}
a <- b <- 1:3
cbind(a, b)
class(a) <- "my"
cbind(a, b)
     [,1] [,2]
[1,]    1    1
[2,]    2    2
[3,]    3    3

This is incorrect.

(2) S would give 
     a b 
[1,] 1 1
[2,] 2 2
[3,] 3 3
(and stop on the second cbind call).

and this discrepancy is hardly an improvement!

Could someone who can understands the c/rbind code please sort this out.
(It looks pretty arcane to me, and surely should not be special-casing data
frames.)

I used both of 

> R.version
           _                   
platform   sparc-sun-solaris2.6
arch       sparc               
os         solaris2.6          
system     sparc, solaris2.6   
status                         
status.rev 0                   
major      0                   
minor      64.2                
year       1999                
month      July                
day        3                   
language   R                   

> R.version
           _                           
platform   sparc-sun-solaris2.6        
arch       sparc                       
os         solaris2.6                  
system     sparc, solaris2.6           
status     Under development (unstable)
status.rev 0                           
major      0                           
minor      65.0                        
year       1999                        
month      August                      
day        05                          
language   R                           



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  5 14:57:27 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Aug 1999 15:57:27 +0200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Thu, 5 Aug 1999 13:28:05 +0200 (MET DST)"
References: <199908051128.NAA28801@pubhealth.ku.dk>
Message-ID: <x2lnbqgwjc.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> (1) ?cbind claims
> 
>      The generic functions `cbind' and `rbind' take a
>      sequence of vector and/or matrix arguments and combine
>      them as the columns or rows, respectively, of a matrix.
> 
> Note:
> 
>      The method dispatching is not done via `UseMethod(..)',
>      but by C-internal dispatching.  Therefore, there's no
>      need for, e.g., `rbind.default'.
> 
> but my cbind.ts does not get called, and try the following:
> 
> cbind.my <- function(...)
> {
>     stop("used cbind.my")
> }
> a <- b <- 1:3
> cbind(a, b)
> class(a) <- "my"
> cbind(a, b)
>      [,1] [,2]
> [1,]    1    1
> [2,]    2    2
> [3,]    3    3
> 
> This is incorrect.
> 
> (2) S would give 
>      a b 
> [1,] 1 1
> [2,] 2 2
> [3,] 3 3
> (and stop on the second cbind call).
> 
> and this discrepancy is hardly an improvement!
> 
> Could someone who can understands the c/rbind code please sort this out.
> (It looks pretty arcane to me, and surely should not be special-casing data
> frames.)

Hmm. 

(1) The docs are clearly wrong (or perhaps rather, wishful thinking)

(2) Cbind should be generic as in Splus

(3) For the labels, one needs essentially to implement deparse.level
    or face the horrors of
    eval(substitute(cbind(a,b,deparse.level=2),list(a=rnorm(10),b=rnorm(10))))

(4) The dataframe special casing seems to be an evasion. The sticky
    bit is that one needs to dispatch on *any* argument. For Splus (3.4)
    compatibility, one has to check each argument for its class
    method, and if all arguments agree - in the sense that all the
    arguments that have class methods must have the same one, dispatch
    to that method. If they disagree, print error message and try
    default method. 

    Whoever wrote the code seems to have decided that things would be
    easier if one assumed that the only method for cbind was
    cbind.data.frame...

    Note that by the above logic, if you make a cbind.ts, you can't
    cbind a time series to a data frame!
 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  5 17:17:14 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 5 Aug 1999 18:17:14 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#240)
Message-ID: <199908051617.SAA02592@pubhealth.ku.dk>

On 5 Aug 1999, Peter Dalgaard BSA wrote:

> (1) The docs are clearly wrong (or perhaps rather, wishful thinking)

Sorry, but always the docs are right and the implementation wrong.
That's an axiom of professional computer programming (so I am told
by several ex-professional computer programmers.)

> (2) Cbind should be generic as in Splus
> 
> (3) For the labels, one needs essentially to implement deparse.level
>     or face the horrors of
>     eval(substitute(cbind(a,b,deparse.level=2),list(a=rnorm(10),b=rnorm(10))))

Really? Or try a bit less hard?  Getting the common cases right is not
too hard -- ts.union etc seem normally to be about right, and they have
simple code.

> (4) The dataframe special casing seems to be an evasion. The sticky
>     bit is that one needs to dispatch on *any* argument. For Splus (3.4)
>     compatibility, one has to check each argument for its class
>     method, and if all arguments agree - in the sense that all the
>     arguments that have class methods must have the same one, dispatch
>     to that method. If they disagree, print error message and try
>     default method. 
> 
>     Whoever wrote the code seems to have decided that things would be
>     easier if one assumed that the only method for cbind was
>     cbind.data.frame...
> 
>     Note that by the above logic, if you make a cbind.ts, you can't
>     cbind a time series to a data frame!

That's OK, as I can coerce a data frame to a ts, but in general I want to
cbind ts objects with non-trivial time bases.

I don't think documenting what we have is a good way out here....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  5 17:19:08 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
Subject: cbind is not generic as claimed, omits labels where S has them
 (PR#239)
In-Reply-To: <x2lnbqgwjc.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9908051705140.2936-100000@auk.stats>

On 5 Aug 1999, Peter Dalgaard BSA wrote:

> (1) The docs are clearly wrong (or perhaps rather, wishful thinking)

Sorry, but always the docs are right and the implementation wrong.
That's an axiom of professional computer programming (so I am told
by several ex-professional computer programmers.)

> (2) Cbind should be generic as in Splus
> 
> (3) For the labels, one needs essentially to implement deparse.level
>     or face the horrors of
>     eval(substitute(cbind(a,b,deparse.level=2),list(a=rnorm(10),b=rnorm(10))))

Really? Or try a bit less hard?  Getting the common cases right is not
too hard -- ts.union etc seem normally to be about right, and they have
simple code.

> (4) The dataframe special casing seems to be an evasion. The sticky
>     bit is that one needs to dispatch on *any* argument. For Splus (3.4)
>     compatibility, one has to check each argument for its class
>     method, and if all arguments agree - in the sense that all the
>     arguments that have class methods must have the same one, dispatch
>     to that method. If they disagree, print error message and try
>     default method. 
> 
>     Whoever wrote the code seems to have decided that things would be
>     easier if one assumed that the only method for cbind was
>     cbind.data.frame...
> 
>     Note that by the above logic, if you make a cbind.ts, you can't
>     cbind a time series to a data frame!

That's OK, as I can coerce a data frame to a ts, but in general I want to
cbind ts objects with non-trivial time bases.

I don't think documenting what we have is a good way out here....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  5 18:04:16 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Aug 1999 19:04:16 +0200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#240)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Thu, 5 Aug 1999 18:17:14 +0200 (MET DST)"
References: <199908051617.SAA02592@pubhealth.ku.dk>
Message-ID: <x2emhignvz.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> On 5 Aug 1999, Peter Dalgaard BSA wrote:
> 
> > (1) The docs are clearly wrong (or perhaps rather, wishful thinking)
> 
> Sorry, but always the docs are right and the implementation wrong.
> That's an axiom of professional computer programming (so I am told
> by several ex-professional computer programmers.)

Hmm. I think there are counterexamples...

> 
> > (2) Cbind should be generic as in Splus
> > 
> > (3) For the labels, one needs essentially to implement deparse.level
> >     or face the horrors of
> >     eval(substitute(cbind(a,b,deparse.level=2),list(a=rnorm(10),b=rnorm(10))))
> 
> Really? Or try a bit less hard?  Getting the common cases right is not
> too hard -- ts.union etc seem normally to be about right, and they have
> simple code.

I don't think it's hard to implement deparse.level. The main
difficulty is figuring out who does the deparsing. The generic, the
default, or the specific method? 

> > (4) The dataframe special casing seems to be an evasion. The sticky
> >     bit is that one needs to dispatch on *any* argument. For Splus (3.4)
> >     compatibility, one has to check each argument for its class
> >     method, and if all arguments agree - in the sense that all the
> >     arguments that have class methods must have the same one, dispatch
> >     to that method. If they disagree, print error message and try
> >     default method. 
> > 
> >     Whoever wrote the code seems to have decided that things would be
> >     easier if one assumed that the only method for cbind was
> >     cbind.data.frame...
> > 
> >     Note that by the above logic, if you make a cbind.ts, you can't
> >     cbind a time series to a data frame!
> 
> That's OK, as I can coerce a data frame to a ts, but in general I want to
> cbind ts objects with non-trivial time bases.
> 
> I don't think documenting what we have is a good way out here....

Agreed. But if you want it in 0.65 don't expect me to do it. I'll be
away for the weekend and fly to ISI/Helsinki on Tuesday.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Aug  5 22:53:12 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 6 Aug 1999 09:53:12 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <199908051128.NAA28801@pubhealth.ku.dk>; from ripley@stats.ox.ac.uk on Thu, Aug 05, 1999 at 01:28:05PM +0200
References: <199908051128.NAA28801@pubhealth.ku.dk>
Message-ID: <19990806095312.A15303@stat1.stat.auckland.ac.nz>

On Thu, Aug 05, 1999 at 01:28:05PM +0200, ripley@stats.ox.ac.uk wrote:
> Could someone who can understands the c/rbind code please sort this out.
> (It looks pretty arcane to me, and surely should not be special-casing data
> frames.)

[ That would be a member of an empty subset of the developers. :-) ]

I can see what the problem is - we don't have the generic dispatch
mechanism in place.  I will add it.

I think that the special casing of data frames is needed because this
appears to be the (undocumented) S behaviour.  A data frame anywhere in
the argument list causes the result to be a data frame.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  5 23:08:05 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Aug 1999 00:08:05 +0200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: Ross Ihaka's message of "Fri, 6 Aug 1999 09:53:12 +1200"
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz>
Message-ID: <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>

Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

> I can see what the problem is - we don't have the generic dispatch
> mechanism in place.  I will add it.
> 
> I think that the special casing of data frames is needed because this
> appears to be the (undocumented) S behaviour.  A data frame anywhere in
> the argument list causes the result to be a data frame.

I played around with this earlier today. There's nothing special about
dataframes, S does the same with any classed object. I.e.

class(b)<-"my"
cbind.my<-function(...)match.call()

cbind(a,b)

will dispatch cbind.my

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Aug  5 23:29:14 1999
From: ihaka@stat.auckland.ac.nz (ihaka@stat.auckland.ac.nz)
Date: Fri, 6 Aug 1999 00:29:14 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908052229.AAA03662@pubhealth.ku.dk>

On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> 
> > I can see what the problem is - we don't have the generic dispatch
> > mechanism in place.  I will add it.
> > 
> > I think that the special casing of data frames is needed because this
> > appears to be the (undocumented) S behaviour.  A data frame anywhere in
> > the argument list causes the result to be a data frame.
> 
> I played around with this earlier today. There's nothing special about
> dataframes, S does the same with any classed object. I.e.
> 
> class(b)<-"my"
> cbind.my<-function(...)match.call()
> 
> cbind(a,b)
> 
> will dispatch cbind.my

Yetch!  What happens when there are conflicting classes I wonder.
[ Rhetorical question. ]

It sounds like this might make things easier.

	Ross

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Aug  5 23:30:31 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 6 Aug 1999 10:30:31 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Fri, Aug 06, 1999 at 12:08:05AM +0200
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz> <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>
Message-ID: <19990806103031.A17464@stat1.stat.auckland.ac.nz>

On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> 
> > I can see what the problem is - we don't have the generic dispatch
> > mechanism in place.  I will add it.
> > 
> > I think that the special casing of data frames is needed because this
> > appears to be the (undocumented) S behaviour.  A data frame anywhere in
> > the argument list causes the result to be a data frame.
> 
> I played around with this earlier today. There's nothing special about
> dataframes, S does the same with any classed object. I.e.
> 
> class(b)<-"my"
> cbind.my<-function(...)match.call()
> 
> cbind(a,b)
> 
> will dispatch cbind.my

Yetch!  What happens when there are conflicting classes I wonder.
[ Rhetorical question. ]

It sounds like this might make things easier.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Aug  6 03:55:34 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 6 Aug 1999 14:55:34 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Fri, Aug 06, 1999 at 12:08:05AM +0200
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz> <x2lnbp7uey.fsf@blueberry.kubism.ku.dk>
Message-ID: <19990806145534.A3584@stat1.stat.auckland.ac.nz>

On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> 
> I played around with this earlier today. There's nothing special about
> dataframes, S does the same with any classed object. I.e.
> 
> class(b)<-"my"
> cbind.my<-function(...)match.call()
> 
> cbind(a,b)
> 
> will dispatch cbind.my

I played some more.  I think data frames are special somehow.

	S> x <- factor(1:10)
	S> y <- data.frame(1:10)
	> class(x)
	[1] "factor"
	S> class(y)
	[1] "data.frame"
	S> class(cbind(x,y))
	[1] "data.frame"
	S> class(cbind(y,x))
	[1] "data.frame"

They seem to overpower other class arguments too.

	Ross

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Aug  6 03:54:27 1999
From: ihaka@stat.auckland.ac.nz (ihaka@stat.auckland.ac.nz)
Date: Fri, 6 Aug 1999 04:54:27 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908060254.EAA04395@pubhealth.ku.dk>

On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> 
> I played around with this earlier today. There's nothing special about
> dataframes, S does the same with any classed object. I.e.
> 
> class(b)<-"my"
> cbind.my<-function(...)match.call()
> 
> cbind(a,b)
> 
> will dispatch cbind.my

I played some more.  I think data frames are special somehow.

	S> x <- factor(1:10)
	S> y <- data.frame(1:10)
	> class(x)
	[1] "factor"
	S> class(y)
	[1] "data.frame"
	S> class(cbind(x,y))
	[1] "data.frame"
	S> class(cbind(y,x))
	[1] "data.frame"

They seem to overpower other class arguments too.

	Ross


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 06:50:50 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 6 Aug 1999 07:50:50 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#241)
Message-ID: <199908060550.HAA04696@pubhealth.ku.dk>

On Fri, 6 Aug 1999 ihaka@stat.auckland.ac.nz wrote:

> On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> > Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> > 
> > I played around with this earlier today. There's nothing special about
> > dataframes, S does the same with any classed object. I.e.
> > 
> > class(b)<-"my"
> > cbind.my<-function(...)match.call()
> > 
> > cbind(a,b)
> > 
> > will dispatch cbind.my
> 
> I played some more.  I think data frames are special somehow.
> 
> 	S> x <- factor(1:10)
> 	S> y <- data.frame(1:10)
> 	> class(x)
> 	[1] "factor"
> 	S> class(y)
> 	[1] "data.frame"
> 	S> class(cbind(x,y))
> 	[1] "data.frame"
> 	S> class(cbind(y,x))
> 	[1] "data.frame"
> 
> They seem to overpower other class arguments too.

Once again, there is a difference between what S documents it does and what
it actually does. The on-line help says:

       Returns a matrix that  is  pieced  together  from  several
       vectors and/or matrices. The functions cbind and rbind are
       generic (relative to their first argument). In particular,
       there  are  cbind  and  rbind  methods  for classes in the
       Matrix library.

I would settle for that. I think what in part is going is that the 
one method, in particular the default method, may use another method.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug  6 08:42:23 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Aug 1999 09:42:23 +0200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: Ross Ihaka's message of "Fri, 6 Aug 1999 14:55:34 +1200"
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz> <x2lnbp7uey.fsf@blueberry.kubism.ku.dk> <19990806145534.A3584@stat1.stat.auckland.ac.nz>
Message-ID: <x2u2qd8ie8.fsf@blueberry.kubism.ku.dk>

Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

> On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> > Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> > 
> > I played around with this earlier today. There's nothing special about
> > dataframes, S does the same with any classed object. I.e.
> > 
> > class(b)<-"my"
> > cbind.my<-function(...)match.call()
> > 
> > cbind(a,b)
> > 
> > will dispatch cbind.my
> 
> I played some more.  I think data frames are special somehow.
> 
> 	S> x <- factor(1:10)
> 	S> y <- data.frame(1:10)
> 	> class(x)
> 	[1] "factor"
> 	S> class(y)
> 	[1] "data.frame"
> 	S> class(cbind(x,y))
> 	[1] "data.frame"
> 	S> class(cbind(y,x))
> 	[1] "data.frame"
> 
> They seem to overpower other class arguments too.

This is because there's no cbind.factor:

S> cbind.factor<-function(...) match.call()
S> cbind(x,y)
      x           y 
X1.10 1 numeric, 10
attr(, "names"):
[1] ""      "X1.10"
Warning messages:
1: Incompatible methods ("cbind.factor", "cbind.data.frame") for "cbind"
2: Number of rows of result is not a multiple of vector length (arg 1) in: cbin
	d(x, y)

(and cbind.data.frame just calls data.frame(...) so it's little wonder
that the result is always a data frame)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug  6 08:34:04 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 6 Aug 1999 09:34:04 +0200 (MET DST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908060734.JAA06002@pubhealth.ku.dk>

Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

> On Fri, Aug 06, 1999 at 12:08:05AM +0200, Peter Dalgaard BSA wrote:
> > Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:
> > 
> > I played around with this earlier today. There's nothing special about
> > dataframes, S does the same with any classed object. I.e.
> > 
> > class(b)<-"my"
> > cbind.my<-function(...)match.call()
> > 
> > cbind(a,b)
> > 
> > will dispatch cbind.my
> 
> I played some more.  I think data frames are special somehow.
> 
> 	S> x <- factor(1:10)
> 	S> y <- data.frame(1:10)
> 	> class(x)
> 	[1] "factor"
> 	S> class(y)
> 	[1] "data.frame"
> 	S> class(cbind(x,y))
> 	[1] "data.frame"
> 	S> class(cbind(y,x))
> 	[1] "data.frame"
> 
> They seem to overpower other class arguments too.

This is because there's no cbind.factor:

S> cbind.factor<-function(...) match.call()
S> cbind(x,y)
      x           y 
X1.10 1 numeric, 10
attr(, "names"):
[1] ""      "X1.10"
Warning messages:
1: Incompatible methods ("cbind.factor", "cbind.data.frame") for "cbind"
2: Number of rows of result is not a multiple of vector length (arg 1) in: cbin
	d(x, y)

(and cbind.data.frame just calls data.frame(...) so it's little wonder
that the result is always a data frame)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Aug  6 19:35:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 06 Aug 1999 14:35:14 -0400
Subject: ts and defaults
Message-ID: <37AB2AE2.1DA7D784@bank-banque-canada.ca>

Brian

The example below may be helpful to further illustrate the concern I have with
the effects of your ts library on defaults. According to the "Blue Book", in
Splus, in R up to 0.64.2, and in today's snapshot of 0.65 without the "ts"
library attached

> end(ts(rnorm(10), start=c(1991,1), frequency=1))

gives
[1] 2000    1

However, with the "ts" library attached the result is

[1] 2000

This change in the default behavior will break a lot of user code, effectively
meaning that many people who do a lot of time series work will not use the
library. Hopeful that is not what you intend. Even casual users, I believe, will
be confused by the change in behavior depending on whether  ts is attached or
not.

Possibly a much better way to define a new improved class is to give it a new
name, rather than a name that introduces conflicts with the old defaults.

I hope that you will have time to consider changing this before 0.65 is
released. I will be away for the next two week, but will be happy to continue
testing when I return.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 20:55:21 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 6 Aug 1999 20:55:21 +0100 (BST)
Subject: ts and defaults
In-Reply-To: <37AB2AE2.1DA7D784@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.9908062019540.20236-100000@auk.stats>

On Fri, 6 Aug 1999, Paul Gilbert wrote:

> Brian
> 
> The example below may be helpful to further illustrate the concern I have with
> the effects of your ts library on defaults. According to the "Blue Book", in
> Splus, in R up to 0.64.2, and in today's snapshot of 0.65 without the "ts"
> library attached
> 
> > end(ts(rnorm(10), start=c(1991,1), frequency=1))
> 
> gives
> [1] 2000    1

How is anyone supposed to know that means 2000 not 2001 without reading
the help page?

> However, with the "ts" library attached the result is
> 
> [1] 2000

Isn't that much more readable?

> This change in the default behavior will break a lot of user code [ ... ]

Statistical evidence, please.

Note that all the S (and R) code is written to accept start=1991, so this
user code must depart from that convention. Maybe it would be a good
opportunity to re-write that code to conform to the standard conventions?
As in

start:    starting date for the series, e.g., in years, February,
       1970  would  be  1970+(1/12)  or  1970.083.  If start is a
       vector with  at  least  two  data  values,  the  first  is
       interpreted  as  the  time  unit,  e.g., the year, and the
       second as  the  number  of  positions  into  the  sampling
       period;  e.g., February, 1970 could be c(1970,2).

Note the two possibilities, and that the one you advocate is the
alternate. I at least find c(1970, 2) = 1970+(1/12) a _very_ confusing
notation, fortunately one that can be avoided.

The problem here is that ts in R is fundamentally incompatible with S, as R
has a ts class and S does not. I believe start.default should not be 
implemented in terms of class ts (and any user can change the
behaviour of a class), and I trust the `lots of user code' does not do
things like that. The plan is to separate the the default methods from the
ts class methods.  We do not consider that S compatibility applies 
to class ts, which S does not have.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Aug  6 21:06:20 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 06 Aug 1999 16:06:20 -0400
Subject: ts and defaults
References: <Pine.GSO.4.05.9908062019540.20236-100000@auk.stats>
Message-ID: <37AB403C.86D179AB@bank-banque-canada.ca>

>The plan is to separate the the default methods from the
>ts class methods.  We do not consider that S compatibility applies
>to class ts, which S does not have.

The other part of the problem is that the function name ts() has already been
appropriated as the constructor for the default, so you can't use ts() as the
constructor for your "ts" class. Ditto for is.ts, as.ts, etc.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 21:10:58 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 6 Aug 1999 21:10:58 +0100 (BST)
Subject: ts and defaults
In-Reply-To: <37AB403C.86D179AB@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.9908062108170.20236-100000@auk.stats>

On Fri, 6 Aug 1999, Paul Gilbert wrote:

> >The plan is to separate the the default methods from the
> >ts class methods.  We do not consider that S compatibility applies
> >to class ts, which S does not have.
> 
> The other part of the problem is that the function name ts() has already been
> appropriated as the constructor for the default, so you can't use ts() as the
> constructor for your "ts" class. Ditto for is.ts, as.ts, etc.

Or to put it another way, as I said before, ts() in R is incompatible
with ts() in S, and the name has already been taken for the constructor
of the R ts class. (In case you still do not get it, there is already
an R ts class.) Do you want us to change ts in R not to be the constructor
of the ts class, and thereby `break a lot of user code' in R?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Aug  6 22:12:42 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 7 Aug 1999 09:12:42 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <x2u2qd8ie8.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Fri, Aug 06, 1999 at 09:42:23AM +0200
References: <199908051128.NAA28801@pubhealth.ku.dk> <19990806095312.A15303@stat1.stat.auckland.ac.nz> <x2lnbp7uey.fsf@blueberry.kubism.ku.dk> <19990806145534.A3584@stat1.stat.auckland.ac.nz> <x2u2qd8ie8.fsf@blueberry.kubism.ku.dk>
Message-ID: <19990807091242.A15242@stat1.stat.auckland.ac.nz>

Ok, I have made some changes to cbind/rbind which will support dispatch
to other methods.  As part of this I have changed things so that the
values passed on are packaged up as (evaluated) promises so that any
closure they invoke will be able to use substitute to get text values
to use as labels.  What I need is a clear idea of the rules for doing
the dispatch.  The picture I have at present is:

	dispatch.class <- "default"
	for (arg in arg.list) {
		if (arg is an object) {
			arg.class <- class(arg)[1]
			if (there is a method for arg.class) {
				if (dispatch.class == "default")
					class <- arg.class
				else if (args.class != dispatch.class)
					drop through to dispatch
			}
		}
	}
    dispatch:
	if (dispatch.class != "default")
		dispatch to appropriate closure
	else
		carry out default actions

This also looks like it sufficiently generic that it could be packaged
as a useful function along the lines of "DespatchOrEval" -- perhaps
MultiDespatchOrEval.

Does this sound right?

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Aug  6 22:15:37 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 06 Aug 1999 17:15:37 -0400
Subject: ts and defaults
References: <Pine.GSO.4.05.9908062108170.20236-100000@auk.stats>
Message-ID: <37AB5078.E7151CD1@bank-banque-canada.ca>

>ts() in R is incompatible
>with ts() in S, and the name has already been taken for the constructor
>of the R ts class. (In case you still do not get it, there is already
>an R ts class.)

I have a very large set of test and ts() in R is suprisingly compatible with S,
even though it is implemented in a very different way. A lot of S time series
code runs directly in R with no changes. This does not affect my own code very
much, since I define my own classes too. In fact, most everyone who works much
with time series probably defines their own classes. You are not the first to
notice how bad the defaults are. But it does affect a lot of code which users
have, and for which they might want to use R, or even contribute.

>Do you want us to change ts in R not to be the constructor
>of the ts class, and thereby `break a lot of user code' in R?

No, I want you to change the name of your new improved class of time series and
leave "ts" alone or make it even more compatible with S.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 22:24:13 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 6 Aug 1999 22:24:13 +0100 (GMT Daylight Time)
Subject: ts and defaults
In-Reply-To: <37AB5078.E7151CD1@bank-banque-canada.ca>
Message-ID: <Pine.WNT.4.05.9908062220240.18403-100000@tern.stats>

On Fri, 6 Aug 1999, Paul Gilbert wrote:

[quoting me without attribution]

> >Do you want us to change ts in R not to be the constructor
> >of the ts class, and thereby `break a lot of user code' in R?
> 
> No, I want you to change the name of your new improved class of time series and
> leave "ts" alone or make it even more compatible with S.
> 
I asked a very specific question and got an ambiguous answer. `make it
even more compatible with S' means `yes', not `no', as in S ts() is not the
constructor of a ts class. Which do you want?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  6 22:49:07 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 6 Aug 1999 22:49:07 +0100 (GMT Daylight Time)
Subject: cbind is not generic as claimed, omits labels where S has them
 (PR#239)
In-Reply-To: <19990807091242.A15242@stat1.stat.auckland.ac.nz>
Message-ID: <Pine.WNT.4.05.9908062235120.18403-100000@tern.stats>

On Sat, 7 Aug 1999, Ross Ihaka wrote:

> Ok, I have made some changes to cbind/rbind which will support dispatch
> to other methods.  As part of this I have changed things so that the
> values passed on are packaged up as (evaluated) promises so that any
> closure they invoke will be able to use substitute to get text values

Sorry, are you using `closure' to mean `method' in S (and I thought R)
terminology? (I thought a function closure involved the environment....)

> to use as labels.  What I need is a clear idea of the rules for doing
> the dispatch.  The picture I have at present is:
> 
> 	dispatch.class <- "default"
> 	for (arg in arg.list) {
> 		if (arg is an object) {
> 			arg.class <- class(arg)[1]
> 			if (there is a method for arg.class) {
> 				if (dispatch.class == "default")
> 					class <- arg.class
> 				else if (args.class != dispatch.class)
> 					drop through to dispatch
> 			}
> 		}
> 	}
>     dispatch:
> 	if (dispatch.class != "default")
> 		dispatch to appropriate closure
> 	else
> 		carry out default actions
> 
> This also looks like it sufficiently generic that it could be packaged
> as a useful function along the lines of "DespatchOrEval" -- perhaps
> MultiDespatchOrEval.
> 
> Does this sound right?

`right', huh?  That's hard. I had been thinking about multiple classes,
which bedevil all this (and JMC got rid of for that reason, I guess). I
think your rules says choose the class of the leading argument whose first
class has a method, and I think that is wrong. Suppose my two args both
have class c("mts", "ts") and there is no cbind.mts. Then you will dispatch
the default, even though the normal rules for dispatching on the first arg
would dispatch cbind.ts.

I suspect we need to try more than the first method, but have no clear
picture of what is right. I would dispatch on the first arg that had a 
usable method.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyndon@kcbbs.gen.nz  Sat Aug  7 01:03:42 1999
From: lyndon@kcbbs.gen.nz (lyndon@kcbbs.gen.nz)
Date: Sat, 7 Aug 1999 02:03:42 +0200 (MET DST)
Subject: INSTALL script does not handle spaces in pathnames correctly (PR#242)
Message-ID: <199908070003.CAA02356@pubhealth.ku.dk>

Full_Name: Lyndon Drake
Version: Version 0.65.0 Under development (unstable) (August 07, 1999)
OS: Linux 2.2.2
Submission from: (NULL) (202.14.102.52)


I was attempting to install the DSE package from a directory whose
pathname includes spaces.  The INSTALL script interprets spaces in
the pathname as a separator.  For example:

[lyndon@beat Rdse]$ pwd
/home/lyndon/doc/uni/415.704 Computer Systems Peformance Analysis/R/Rdse
[lyndon@beat Rdse]$ ~/src/cvs-stuff/R/bin/R INSTALL --no-docs -l ../lib/
syskern
/home/lyndon/src/cvs-stuff/R/bin/INSTALL: /home/lyndon/doc/uni/415.704: No such
file or directory
Installing package `415.704' ...
  No man pages found in package `415.704'
 DONE (415.704)

Installing package `Computer' ...
  No man pages found in package `Computer'
 DONE (Computer)

Installing package `Systems' ...
  No man pages found in package `Systems'
 DONE (Systems)

Installing package `Peformance' ...
  No man pages found in package `Peformance'
 DONE (Peformance)

/home/lyndon/src/cvs-stuff/R/bin/INSTALL: Analysis/R/Rdse/syskern: No such file
or directory
Installing package `syskern' ...
  No man pages found in package `syskern'
 DONE (syskern)

DONE (INSTALL)

One possibility would be to change the separator used in the install
script from a space to a colon.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ATurpin@discoveriesinsight.org  Sat Aug  7 01:09:31 1999
From: ATurpin@discoveriesinsight.org (ATurpin@discoveriesinsight.org)
Date: Sat, 7 Aug 1999 02:09:31 +0200 (MET DST)
Subject: bug ? wilcox() (PR#243)
Message-ID: <199908070009.CAA02388@pubhealth.ku.dk>

> Hi,
> 
> I am getting a strange result from the wilcox function in the code below.
> This code has worked for many other wilcox's, but not this particular one.
> The p-value printed should be much higher (consistent with the p-value
> for the t-test).
> 
> I am using R Version 0.64.2 under Debian Linux.
> 
> I hope it is not me being stupid...
> 
> Regards,
> 
> Andrew Turpin
> aturpin@discoveriesinsight.org
> 
> --------------------------------------------------------------------------
> ----
> 
> library(ctest)
> x <- vector(length=50)
> y <- vector(length=50)
> x <- c(0.624200,0.252100
> ,0.404500
> ,0.465000
> ,0.033500
> ,0.565500
> ,0.316000
> ,0.469800
> ,0.590200
> ,0.420200
> ,0.609800
> ,0.577800
> ,0.854200
> ,0.284800
> ,0.243600
> ,0.596100
> ,0.213200
> ,0.369800
> ,0.281400
> ,0.754500
> ,0.135200
> ,0.041900
> ,0.640900
> ,0.547000
> ,0.214300
> ,0.212000
> ,0.325200
> ,0.400700
> ,0.115400
> ,0.248800
> ,0.211500
> ,0.540200
> ,0.282100
> ,0.131700
> ,0.757500
> ,0.136500
> ,0.391500
> ,0.293500
> ,0.275400
> ,0.048700
> ,0.308400
> ,0.140900
> ,0.624100
> ,0.042600
> ,0.158100
> ,0.631300
> ,0.279200
> ,0.623100
> ,0.042600
> ,0.477200
> )
> y <- c(0.606500,0.252100
> ,0.404500
> ,0.465000
> ,0.033500
> ,0.565500
> ,0.316000
> ,0.469800
> ,0.591700
> ,0.420200
> ,0.608700
> ,0.577800
> ,0.854200
> ,0.284800
> ,0.244700
> ,0.596100
> ,0.213200
> ,0.369800
> ,0.281400
> ,0.754500
> ,0.135200
> ,0.041900
> ,0.640900
> ,0.683500
> ,0.214300
> ,0.192100
> ,0.304800
> ,0.400700
> ,0.115400
> ,0.248800
> ,0.211500
> ,0.540200
> ,0.282100
> ,0.131700
> ,0.757500
> ,0.137200
> ,0.391500
> ,0.293500
> ,0.275400
> ,0.048700
> ,0.308400
> ,0.140900
> ,0.624100
> ,0.042600
> ,0.158100
> ,0.631300
> ,0.282900
> ,0.620100
> ,0.030800
> ,0.471700
> )
>         #
>         # some functions for formatting output
>         #
>      f    <- function (x) { formatC(x,digits=4,width=10,format="f") }
>      mydiff<-function (x,y) {
> formatC((y-x)/y*100,digits=2,width=10,format="f")}
>      line <- function (d,x,y) { cat(d,f(x),f(y),mydiff(x,y),"\n")}
> 
>         #
>         # print basic stats
>         #
>      line("n           ",length(x),length(y))
>      line("Mean        ",mean(x),mean(y))
>      line("Median      ",median(x),median(y))
>      line("Var         ",var(x),var(y))
> 
>      cat("\n")
> 
>         #
>         # Perform basic tests
>         #
>      w  <- wilcox.test(x,y,paired=TRUE)
>      t  <- t.test(x,y,paired=TRUE)
> 
>      cat("t-test   p =", f(t$p.value),
> ifelse(t$p.value<0.05,"(Significant)","(Not significant)"), "\n")
>      cat("Wilcoxon p =",
> f(w$p.value),ifelse(w$p.value<0.05,"(Significant)","(Not significant)"),
> "\n")
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Sat Aug  7 01:37:59 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 7 Aug 1999 12:37:59 +1200 (NZST)
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
Message-ID: <199908070037.MAA18569@stat1.stat.auckland.ac.nz>

	From ripley@stats.ox.ac.uk  Sat Aug  7 09:49:12 1999
	Date: Fri, 6 Aug 1999 22:49:07 +0100 (GMT Daylight Time)
	From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
	To: Ross Ihaka <ihaka@stat.auckland.ac.nz>
	cc: r-devel@stat.math.ethz.ch
	Subject: Re: cbind is not generic as claimed, omits labels where S has them
	 (PR#239)
	MIME-Version: 1.0

	On Sat, 7 Aug 1999, Ross Ihaka wrote:

	> Ok, I have made some changes to cbind/rbind which will support
	> dispatch to other methods.  As part of this I have changed
	> things so that the values passed on are packaged up as
	> (evaluated) promises so that any closure they invoke will
	> be able to use substitute to get text values

	Sorry, are you using `closure' to mean `method' in S (and I thought R)
	terminology? (I thought a function closure involved the environment....)

Technicality : I mean interpreted function.  I'm disallowing dispatch
to functions without at least an interpreted wrapper.  I don't think
this is a real restriction.

	> to use as labels.  What I need is a clear idea of the rules for doing
	> the dispatch.  The picture I have at present is:
	> 
	> 	dispatch.class <- "default"
	> 	for (arg in arg.list) {
	> 		if (arg is an object) {
	> 			arg.class <- class(arg)[1]
	> 			if (there is a method for arg.class) {
	> 				if (dispatch.class == "default")
	> 					class <- arg.class
	> 				else if (args.class != dispatch.class)
	> 					drop through to dispatch
	> 			}
	> 		}
	> 	}
	>     dispatch:
	> 	if (dispatch.class != "default")
	> 		dispatch to appropriate closure
	> 	else
	> 		carry out default actions
	> 
	> This also looks like it sufficiently generic that it could be packaged
	> as a useful function along the lines of "DespatchOrEval" -- perhaps
	> MultiDespatchOrEval.
	> 
	> Does this sound right?

	`right', huh?  That's hard. I had been thinking about multiple
	classes, which bedevil all this (and JMC got rid of for that
	reason, I guess). I think your rules says choose the class of
	the leading argument whose first class has a method, and I
	think that is wrong. Suppose my two args both have class
	c("mts", "ts") and there is no cbind.mts. Then you will
	dispatch the default, even though the normal rules for
	dispatching on the first arg would dispatch cbind.ts.

	I suspect we need to try more than the first method, but have
	no clear picture of what is right. I would dispatch on the
	first arg that had a usable method.

I think I'm shooting for S compatibility here (I'm firmly in both the
compatible and non-compatible camps -- trying to please everyone I
guess).  I believe Peter described what S3 appears to do, and the
above  is my interpretation of what he said.

I think trying to do inheritance by traversing the class vectors
might be asking for trouble.  It would certainly be significantly
more complex and probably slower.

Taking the first arg with a usable method means that cbind(a, b)
could be a significantly different class of object from cbind(b, a).
This is sometimes a nasty surprise for people.  The S3 philosophy
seems to be that in cases of conflict you ignore classes entirely.
That does give a symmetric result.

	Ross


[ Duncan and I talked about implementing a new kind of object system
  -- different from either S3 or S4.  It would look a little more like
  Java.  Definitely a Version 2 project. ]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Sat Aug  7 03:52:37 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 7 Aug 1999 14:52:37 +1200
Subject: cbind is not generic as claimed, omits labels where S has them (PR#239)
In-Reply-To: <199908070037.MAA18569@stat1.stat.auckland.ac.nz>; from Ross Ihaka on Sat, Aug 07, 1999 at 12:37:59PM +1200
References: <199908070037.MAA18569@stat1.stat.auckland.ac.nz>
Message-ID: <19990807145237.A19953@stat1.stat.auckland.ac.nz>

I've modified rbind/cbind so that they dispatch as follows:

1) For each argument we get the list of possible class memberships from
   the class attribute.

2) We inspect each class in turn to see if there is an an applicable
   method.

3) If we find an applicable method we make sure that it is identical to
   any method determined from prior arguments.  If it is identical, we
   proceed, otherwise we immediately drop through to the default code.

This is commited in the development version.  Are there any other
functions which should behave this way.

(Sorry for any obtuseness.  Sleep is in short supply at present.)

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Aug  9 09:02:11 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 09 Aug 1999 10:02:11 +0200 (CEST)
Subject: ts and defaults
In-Reply-To: <Pine.GSO.4.05.9908062019540.20236-100000@auk.stats>
Message-ID: <XFMail.990809100211.plummer@iarc.fr>

I think the c(base, offset) notation is appropriate when
1) Frequency is an integer, and
2) The time dimension refers to an interval.
whereas the scalar representation of time is appropriate when the time
dimension refers to a precise point in time.  There is no unambiguous
way of translating between the two since they are not measuring the same
thing, and it is a bit unfortunate that the two are mixed up.

The c(base,offset) notation is impossible to interpret without
reference to the frequency. So whereas
[1] 2000    1
refers to the whole of 2000 if frequency=1, it means the first 1/12
of 2000 (i.e. January) if frequency=12. This is another source of confusion.

I note in passing that the R base library allows the c(base,offset) notation
for non-integer frequency, e.g.

R> x_ts(1:10,start=c(2,1), freq=2.5)
R> start(x)
[1] 2 1

which is disallowed by S-PLUS.

Martyn


On 06-Aug-99 Prof Brian D Ripley wrote:
> On Fri, 6 Aug 1999, Paul Gilbert wrote:
> 
>> Brian
>> 
>> The example below may be helpful to further illustrate the concern I have
>> with
>> the effects of your ts library on defaults. According to the "Blue Book", in
>> Splus, in R up to 0.64.2, and in today's snapshot of 0.65 without the "ts"
>> library attached
>> 
>> > end(ts(rnorm(10), start=c(1991,1), frequency=1))
>> 
>> gives
>> [1] 2000    1
> 
> How is anyone supposed to know that means 2000 not 2001 without reading
> the help page?
> 
>> However, with the "ts" library attached the result is
>> 
>> [1] 2000
> 
> Isn't that much more readable?
> 
>> This change in the default behavior will break a lot of user code [ ... ]
> 
> Statistical evidence, please.
> 
> Note that all the S (and R) code is written to accept start=1991, so this
> user code must depart from that convention. Maybe it would be a good
> opportunity to re-write that code to conform to the standard conventions?
> As in
> 
> start:    starting date for the series, e.g., in years, February,
>        1970  would  be  1970+(1/12)  or  1970.083.  If start is a
>        vector with  at  least  two  data  values,  the  first  is
>        interpreted  as  the  time  unit,  e.g., the year, and the
>        second as  the  number  of  positions  into  the  sampling
>        period;  e.g., February, 1970 could be c(1970,2).
> 
> Note the two possibilities, and that the one you advocate is the
> alternate. I at least find c(1970, 2) = 1970+(1/12) a _very_ confusing
> notation, fortunately one that can be avoided.
> 
> The problem here is that ts in R is fundamentally incompatible with S, as R
> has a ts class and S does not. I believe start.default should not be 
> implemented in terms of class ts (and any user can change the
> behaviour of a class), and I trust the `lots of user code' does not do
> things like that. The plan is to separate the the default methods from the
> ts class methods.  We do not consider that S compatibility applies 
> to class ts, which S does not have.
> 
> Brian
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david_m_potter@groton.pfizer.com  Mon Aug  9 16:47:57 1999
From: david_m_potter@groton.pfizer.com (david_m_potter@groton.pfizer.com)
Date: Mon, 9 Aug 1999 17:47:57 +0200 (MET DST)
Subject: cm.colors bug (PR#244)
Message-ID: <199908091547.RAA16601@pubhealth.ku.dk>

Full_Name: David M. Potter
Version: 0.64.1
OS: solaris 2.6
Submission from: (NULL) (12.18.36.220)


cm.colors() returns an extra element "1":

> cm.colors(10)
                                                                               

"#7FFFFF" "#99FFFF" "#B2FFFF" "#CCFFFF" "#E5FFFF" "#FFE5FF" "#FFCCFF" "#FFB2FF"

                            v 
"#FF99FF" "#FF7FFF"       "1" 
> 

Why I think it happens

The function has an unnecessary right parentheses
immediately preceding ", v=1" which causes the "v=1" to
be added to the vector rather than being interpreted as an
argument to hsv().

> cm.colors
function (n) 
{
    k <- n%/%2
    if (2 * k == n) {
        c(hsv(h = 6/12, s = seq(0.5, 0, length = k + 1)[-k - 
            1], v = 1), hsv(h = 10/12, s = seq(0, 0.5, length = n - 
            k + 1)[-1]), v = 1)
    }
    else {
        c(hsv(h = 6/12, s = seq(0.5, 0, length = k + 1), v = 1), 
            hsv(h = 10/12, s = seq(0, 0.5, length = n - k)[-1]), 
            v = 1)
    }
}
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug  9 17:29:55 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 9 Aug 1999 18:29:55 +0200
Subject: cm.colors bug (PR#244)
In-Reply-To: <199908091547.RAA16601@pubhealth.ku.dk>
 (david_m_potter@groton.pfizer.com)
References: <199908091547.RAA16601@pubhealth.ku.dk>
Message-ID: <199908091629.SAA11554@sophie.ethz.ch>


    david> Full_Name: David M. Potter Version: 0.64.1 OS: solaris 2.6
    david> Submission from: (NULL) (12.18.36.220)

    david> cm.colors() returns an extra element "1":

Yes, this is a bug
    ....

    david> Why I think it happens

    david> The function has an unnecessary right parentheses immediately
    david> preceding ", v=1" which causes the "v=1" to be added to the
    david> vector rather than being interpreted as an argument to hsv().

   david> > cm.colors
   david> function (n) 
   david> {
   david>     k <- n%/%2
   david>     if (2 * k == n) {
   david>         c(hsv(h = 6/12, s = seq(0.5, 0, length = k + 1)[-k - 
   david>             1], v = 1), hsv(h = 10/12, s = seq(0, 0.5, length = n - 
   david>             k + 1)[-1]), v = 1)
   david>     }
   david>     else {
   david>         c(hsv(h = 6/12, s = seq(0.5, 0, length = k + 1), v = 1), 
   david>             hsv(h = 10/12, s = seq(0, 0.5, length = n - k)[-1]), 
   david>             v = 1)
   david>     }
   david> }


Correct.
There were more problems :
cm.colors(1) {and cm.colors(0)} both failed as well.

The following seems to be correct in all cases

cm.colors <- function (n)
{
    if ((n <- as.integer(n[1])) > 0) {
	even.n <- n %% 2 == 0
	k <- n%/%2
	l1 <- k + 1 - even.n
	l2 <- n - k + even.n
	c(if(l1 > 0)
	  hsv(h =  6/12, s= seq(.5, ifelse(even.n,.5/k,0), length = l1), v = 1),
	  if(l2 > 1)
	  hsv(h = 10/12, s= seq(0, 0.5, length = l2)[-1], v = 1))
    } else character(0)
}

I'll commit it for the R-devel [daily snapshot] and hence 0.65.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug  9 17:45:39 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Aug 1999 18:45:39 +0200
Subject: bug ? wilcox() (PR#243)
In-Reply-To: ATurpin@discoveriesinsight.org's message of "Sat, 7 Aug 1999 02:09:31 +0200 (MET DST)"
References: <199908070009.CAA02388@pubhealth.ku.dk>
Message-ID: <x2hfm8kimk.fsf@blueberry.kubism.ku.dk>

ATurpin@discoveriesinsight.org writes:

> > Hi,
> > 
> > I am getting a strange result from the wilcox function in the code below.
> > This code has worked for many other wilcox's, but not this particular one.
> > The p-value printed should be much higher (consistent with the p-value
> > for the t-test).
> > 
> > I am using R Version 0.64.2 under Debian Linux.
> > 
> > I hope it is not me being stupid...

This *was* a bug in older versions of ctest. Your example has a huge
number of cases with x==y and the test was based on 

	STATISTIC <- sum(r[x > 0])

(x being x-y at that stage) 

The current version at CRAN removes the zeros first...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 10 17:06:15 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 10 Aug 1999 18:06:15 +0200 (MET DST)
Subject: Is a ts of length one a ts? (PR#245)
Message-ID: <199908101606.SAA27541@pubhealth.ku.dk>

The following seems confused (0.65 snapshot)

> x <- ts(1:20)
> window(x, 1, 1)
Time Series:
Start = c(1, 1) 
End = c(1, 1) 
Frequency = 1 
[1] 1
Warning message: 
Not returning a time series object in: [.ts(x, i) 

(it of class ts, as the print method shows). Under 0.64.2 it is even more
confusing:

> x <- ts(1:20)
> window(x, 1, 1)
Warning: Not returning a time series object
Time Series:
Start = c(1, 1) 
End = c(1, 1) 
Frequency = 1 
[1] 1

sic!

> x[1]
[1] 1
Warning message: 
Not returning a time series object in: [.ts(x, 1) 

Is there any good reason why a time series of length one is not
allowed by [.ts (you can certainly create one with ts)?

How about one of length 0:

> ts(numeric(0))
Time Series:
Start = c(1, 1) 
End = c(0, 1) 
Frequency = 1 
numeric(0)

(which is surely a bug in print.ts if length 0 objects are allowed).

> x[0]
numeric(0)
Warning message: 
Not returning a time series object in: [.ts(x, 0) 

I suggest we should allow time series of length 1 but not of length 0
(as they have no start).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Aug 11 08:23:38 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 11 Aug 1999 09:23:38 +0200 (CEST)
Subject: Is a ts of length one a ts? (PR#245)
In-Reply-To: <199908101606.SAA27541@pubhealth.ku.dk>
Message-ID: <XFMail.990811092338.plummer@iarc.fr>

On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
> Is there any good reason why a time series of length one is not
> allowed by [.ts (you can certainly create one with ts)?

It certainly has a start and an end value, but what's the
frequency?  If you want the tsp attribute of a time series
to be well defined, then maybe you should disallow series
of length 1.

"[.ts" certainly needs fixing.  There has been some discussion
about this and I think the consensus was that "[.ts" should
not attempt to return a time series when taking row subsets
(computationally expensive, and quite difficult to cover
all cases, see PR#216, PR#217).  The window() function is more
appropriate for taking subseries IMHO.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 11 09:37:36 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 11 Aug 1999 09:37:36 +0100 (BST)
Subject: Is a ts of length one a ts? (PR#245)
In-Reply-To: <XFMail.990811092338.plummer@iarc.fr>
Message-ID: <Pine.GSO.4.05.9908110928000.12494-100000@auk.stats>

On Wed, 11 Aug 1999, Martyn Plummer wrote:

> On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
> > Is there any good reason why a time series of length one is not
> > allowed by [.ts (you can certainly create one with ts)?
> 
> It certainly has a start and an end value, but what's the
> frequency?  If you want the tsp attribute of a time series
> to be well defined, then maybe you should disallow series
> of length 1.

I think the frequency is perfectly well defined, as that of the series you
subsetted.  How can extracting one observation change the frequency of
observation? Similarly, it is defined by ts, as it is an argument.

> "[.ts" certainly needs fixing.  There has been some discussion
> about this and I think the consensus was that "[.ts" should
> not attempt to return a time series when taking row subsets
> (computationally expensive, and quite difficult to cover
> all cases, see PR#216, PR#217).  The window() function is more
> appropriate for taking subseries IMHO.

You can't control this. Once you have [.ts, it gets used in all sorts
of places deep inside other functions.  For example, in

boxplot(split(nottem, cycle(nottem))

the subsetting in boxplot.stats uses [.ts (in 0.65 where split
preserves classes). So we have to get this right.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Aug 11 12:52:51 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 11 Aug 1999 13:52:51 +0200 (CEST)
Subject: Is a ts of length one a ts? (PR#245)
In-Reply-To: <Pine.GSO.4.05.9908110928000.12494-100000@auk.stats>
Message-ID: <XFMail.990811135251.plummer@iarc.fr>

On 11-Aug-99 Prof Brian D Ripley wrote:
> On Wed, 11 Aug 1999, Martyn Plummer wrote:
> 
>> On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
>> > Is there any good reason why a time series of length one is not
>> > allowed by [.ts (you can certainly create one with ts)?
>> 
>> It certainly has a start and an end value, but what's the
>> frequency?  If you want the tsp attribute of a time series
>> to be well defined, then maybe you should disallow series
>> of length 1.
> 
> I think the frequency is perfectly well defined, as that of the series you
> subsetted.

Is it?

R 0.64.2:

R> x <- ts(1:10)
R> frequency(x)
[1] 1
R> y <- x[c(2,4,6,8,10)]
R> frequency(y)
[1] 0.5

This agrees with the S-PLUS treatment of "regular" time series:

S> x <- rts(1:10)
S> frequency(x)
 frequency 
         1
S> y <- x[c(2,4,6,8,10)]
S> frequency(y)
 frequency 
       0.5

By this logic, the frequency of a single element selected from
a time series is undefined. S-PLUS can get round this problem
because it has the richer time series class "its":

S> z <- x[1]
S> class(z)
[1] "its"

So although z still has a time dimension, it has no frequency.

S-PLUS does allow you to create an "rts" object of length one.  There is
a certain logic to this. The time series parameters must satisfy the
equation

frequency * (end - start) = length - 1

For a series of length 1:

frequency * 0 = 0

which is satisfied by any user-specified value of the frequency.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug 11 13:49:09 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 11 Aug 1999 14:49:09 +0200 (CEST)
Subject: INSTALL script does not handle spaces in pathnames correctly (PR#242)
In-Reply-To: <199908070003.CAA02356@pubhealth.ku.dk>
References: <199908070003.CAA02356@pubhealth.ku.dk>
Message-ID: <14257.28997.662692.683681@fangorn.ci.tuwien.ac.at>

>>>>> lyndon  writes:

> Full_Name: Lyndon Drake
> Version: Version 0.65.0 Under development (unstable) (August 07, 1999)
> OS: Linux 2.2.2
> Submission from: (NULL) (202.14.102.52)


> I was attempting to install the DSE package from a directory whose
> pathname includes spaces.  The INSTALL script interprets spaces in
> the pathname as a separator.  For example:

I think I fixed the problem.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Aug 11 13:57:01 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 11 Aug 1999 13:57:01 +0100 (BST)
Subject: Is a ts of length one a ts? (PR#245)
Message-ID: <199908111257.NAA24100@toucan.stats.ox.ac.uk>

> Date: Wed, 11 Aug 1999 13:52:51 +0200 (CEST)
> From: Martyn Plummer <plummer@iarc.fr>
> To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> Subject: RE: Is a ts of length one a ts? (PR#245)
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> 
> On 11-Aug-99 Prof Brian D Ripley wrote:
> > On Wed, 11 Aug 1999, Martyn Plummer wrote:
> > 
> >> On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
> >> > Is there any good reason why a time series of length one is not
> >> > allowed by [.ts (you can certainly create one with ts)?
> >> 
> >> It certainly has a start and an end value, but what's the
> >> frequency?  If you want the tsp attribute of a time series
> >> to be well defined, then maybe you should disallow series
> >> of length 1.
> > 
> > I think the frequency is perfectly well defined, as that of the series you
> > subsetted.
> 
> Is it?
> 
> R 0.64.2:
> 
> R> x <- ts(1:10)
> R> frequency(x)
> [1] 1
> R> y <- x[c(2,4,6,8,10)]
> R> frequency(y)
> [1] 0.5
> 

I was only discussing the case of a subset of one, but you omitted
the next sentence. What I actually said was

`I think the frequency is perfectly well defined, as that of the series you
subsetted.  How can extracting one observation change the frequency of
observation?'

Obviously, subsetting a regularly spaced series can change the frequency.
 
-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Aug 11 18:08:40 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 11 Aug 1999 19:08:40 +0200 (CEST)
Subject: Is a ts of length one a ts? (PR#245)
In-Reply-To: <199908111257.NAA24100@toucan.stats.ox.ac.uk>
Message-ID: <XFMail.990811190840.plummer@iarc.fr>

On 11-Aug-99 Prof Brian Ripley wrote:
>> Date: Wed, 11 Aug 1999 13:52:51 +0200 (CEST)
>> From: Martyn Plummer <plummer@iarc.fr>
>> To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
>> Subject: RE: Is a ts of length one a ts? (PR#245)
>> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
>> 
>> On 11-Aug-99 Prof Brian D Ripley wrote:
>> > On Wed, 11 Aug 1999, Martyn Plummer wrote:
>> > 
>> >> On 10-Aug-99 ripley@stats.ox.ac.uk wrote:
>> >> > Is there any good reason why a time series of length one is not
>> >> > allowed by [.ts (you can certainly create one with ts)?
>> >> 
>> >> It certainly has a start and an end value, but what's the
>> >> frequency?  If you want the tsp attribute of a time series
>> >> to be well defined, then maybe you should disallow series
>> >> of length 1.
>> > 
>> > I think the frequency is perfectly well defined, as that of the series you
>> > subsetted.
>> 
>> Is it?
>> 
>> R 0.64.2:
>> 
>> R> x <- ts(1:10)
>> R> frequency(x)
>> [1] 1
>> R> y <- x[c(2,4,6,8,10)]
>> R> frequency(y)
>> [1] 0.5
>> 
> 
> I was only discussing the case of a subset of one, but you omitted
> the next sentence. What I actually said was
> 
> `I think the frequency is perfectly well defined, as that of the series you
> subsetted.  How can extracting one observation change the frequency of
> observation?'
> 
> Obviously, subsetting a regularly spaced series can change the frequency.

Yes, I am sorry for clipping too much of your e-mail in my reply.
I didn't develop my argument properly and it looks facetious.
Let me try again.

x <- ts(1:10)
y <- x[c(1,3,5,7,9)]
 
x1 <- x[1]
y1 <- y[1]

The question we disagree on, I think, is "Are x1 and y1 the same?".
I would say yes.  I don't think that the attributes of a subset should
depend on the sequence of commands used to derive it, and I can't think of
another example in R or S where this is the case.  Although R 0.64.2 and
S-PLUS behave differently here, they both conform to this notion.

Underlying my argument is the notion that two time series with a single
observation and the same start value are identical.  The fact that ts()
can construct two such time series with different frequencies blows a
large hole in my argument so I'll stop.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 12 11:10:53 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 12 Aug 1999 12:10:53 +0200
Subject: weighted.residuals() ?
Message-ID: <199908121010.MAA07648@sophie.ethz.ch>

This function is not documented (and not available in S-plus).
I do think it is a useful utility (and should be documented).
However, currently

    weighted.residuals <- function(obj)
    {
	w <- weights(obj)
	if(is.null(w)) residuals(obj)
	else (sqrt(w)*residuals(obj))[w!=0]
    }

where I think the "[w!=0]" is really not at all desired.
It makes sum(weighted.residuals(..)^2) slightly faster, 
however,  weighted.residuals() should return a residual vector of proper
length!

I'm about to drop the above "[w!=0]", document weighted.residuals
and fix  deviance.lm(.) according to John Maindonald's bug report
(and use his suggestion to make cooks.distance() work for glm()'s ..).

Any objections ? [please in the next 5 hours or so...]

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 12 11:42:18 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 12 Aug 1999 12:42:18 +0200 (CEST)
Subject: R Add-on Packages
Message-ID: <14258.42250.271149.861624@fangorn.ci.tuwien.ac.at>

As the 0.65 release should happen within the next few weeks, now would
be a good time for updating/improving our impressive collection of add
on packages.

Issues to look look into include:

* Valid and complete DESCRIPTION, TITLE and INDEX files.

* Complete data/00Index files (if applicable).

* All examples should be executable to that R CMD check passes.

* src/Makefile (if there, most likely not needed) should be correct
(FLIBS etc).  Follow the etc/Makeconf rules ...

Minor issues:

* The formatting of TITLE files is still not consistent.  Please follow
the format of the add-ons in the R distribution.

* It would be nice if compilation with `-Wall' would not give any
warnings ...

* Please watch the Rdconv messages when building the help files from the
Rd sources, and try to fix problems with missing links.  Note that Fritz
is planning on extending the \link{} command so that it can point to an
entry in a different package, but this is still WIP.

* Note that INSTALL now runs configure and cleanup scripts.  If your
package needs something that may not be available, then please use
configure.  Package e1071 may serve as an example.

Fritz and I are planning on writing a script that automates the process
of building CORRECT packages.  But again, WIP ...

I am looking forward to all improvements ...

-k

PS.  Now that we have a ts package in 0.65, should we get rid of bats
and tseries?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 12 12:56:39 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 12 Aug 1999 12:56:39 +0100 (BST)
Subject: R Add-on Packages
In-Reply-To: <14258.42250.271149.861624@fangorn.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.05.9908121254020.14956-100000@auk.stats>

On Thu, 12 Aug 1999, Kurt Hornik wrote:

> PS.  Now that we have a ts package in 0.65, should we get rid of bats
> and tseries?

There are valuable things in tseries not in ts (deliberately, because
they are specialized or there are special copyright issues). I know
Adrian Trapletti is planning a new version of tseries that works with
0.65's ts, when that is final.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Adrian.Trapletti@wu-wien.ac.at  Thu Aug 12 13:04:13 1999
From: Adrian.Trapletti@wu-wien.ac.at (Adrian Trapletti)
Date: Thu, 12 Aug 1999 12:04:13 +0000
Subject: R Add-on Packages
References: <14258.42250.271149.861624@fangorn.ci.tuwien.ac.at>
Message-ID: <37B2B83D.924CB317@wu-wien.ac.at>

Kurt Hornik wrote:

> PS.  Now that we have a ts package in 0.65, should we get rid of bats
> and tseries?

Concerning tseries. I will update tseries as soon as the official ts in R-0.65 is
released, i.e., remove the already implemented functions and so on. I already have
some new functions such as White's and Terasvirta's test for neglected
non-linearity and a few other useful routines will be implemented such as
Johanson's VAR methodology, i.e. we can remove the old tseries and I will post the
new version as soon I have finished my work.

Adrian

>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--
Adrian Trapletti, Vienna University of Economics and Business
Administration, Augasse 2-6, A-1090 Vienna, Austria
Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
Email: adrian.trapletti@wu-wien.ac.at



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 12 15:03:56 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Aug 1999 16:03:56 +0200
Subject: weighted.residuals() ?
In-Reply-To: Martin Maechler's message of "Thu, 12 Aug 1999 12:10:53 +0200"
References: <199908121010.MAA07648@sophie.ethz.ch>
Message-ID: <x2g11pjdtf.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> I'm about to drop the above "[w!=0]", document weighted.residuals
> and fix  deviance.lm(.) according to John Maindonald's bug report
> (and use his suggestion to make cooks.distance() work for glm()'s ..).
> 
> Any objections ? [please in the next 5 hours or so...]

Be *very* careful! The zero-weight issue has bitten us several times
before. Check whether your change would be consistent with what lm/glm
does in such cases. (In particular, degrees of freedom calculations can
get in trouble).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 12 17:42:43 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 12 Aug 1999 18:42:43 +0200
Subject: weighted.residuals() ?
In-Reply-To: <x2g11pjdtf.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 12 Aug 1999 16:03:56 +0200)
References: <199908121010.MAA07648@sophie.ethz.ch> <x2g11pjdtf.fsf@blueberry.kubism.ku.dk>
Message-ID: <199908121642.SAA21912@sophie.ethz.ch>

>>>>> On 12 Aug 1999 16:03, Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> said:

    PD> Martin Maechler <maechler@stat.math.ethz.ch> writes:
    >> I'm about to drop the above "[w!=0]", document weighted.residuals
    >> and fix deviance.lm(.) according to John Maindonald's bug report
    >> (and use his suggestion to make cooks.distance() work for glm()'s
    >> ..).
    >> 
    >> Any objections ? [please in the next 5 hours or so...]

    PD> Be *very* careful! The zero-weight issue has bitten us several
    PD> times before. Check whether your change would be consistent with
    PD> what lm/glm does in such cases. (In particular, degrees of freedom
    PD> calculations can get in trouble).

weighted.residuals() is currently really only used in lm.influence.R;
but the `trouble' is that these {lm diagnostics functions} really all drop
the cases with weight=0.

I'm currently updating documentation {still using fixed deviance.lm() etc}.
weighted.residuals() now has

    \title{Computed Weighted Residuals}
    \usage{
    weighted.residuals(obj, drop0 = TRUE)
    }
    \arguments{
     \item{obj}{\R object, typically of class \code{\link{lm}} or \code{\link{glm}}.}
     \item{drop0}{logical.  If \code{TRUE}, drop all cases with
	 \code{\link{weights} == 0}.}
    }

--
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rprice@honlab.nmfs.hawaii.edu  Thu Aug 12 22:27:20 1999
From: rprice@honlab.nmfs.hawaii.edu (rprice@honlab.nmfs.hawaii.edu)
Date: Thu, 12 Aug 1999 23:27:20 +0200 (MET DST)
Subject: Installation problem on Redhat 6.0 (PR#247)
Message-ID: <199908122127.XAA19789@pubhealth.ku.dk>

Full_Name: Russell Price
Version: 0.64.2
OS: Redhat 6.0
Submission from: (NULL) (128.171.242.1)


When attempting to compile, I get the following error message:

gcc -g -O2 -I../include -I../../src/include  -c d1mach.c -o d1mach.o
gcc: Internal compiler error: program cc1 got fatal signal 6
make[2]: *** [d1mach.o] Error 1
make[2]: Leaving directory `/usr/local/src/R-0.64.2/src/nmath'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/usr/local/src/R-0.64.2/src'
make: *** [R] Error 1

Compiler is gcc 2.8.1 / g77 0.5.23

Have you seen this before?

Thank you for your help.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 12 23:13:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 12 Aug 1999 23:13:47 +0100 (BST)
Subject: Installation problem on Redhat 6.0 (PR#247)
In-Reply-To: <199908122127.XAA19789@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9908122306430.588-100000@auk.stats>

On Thu, 12 Aug 1999 rprice@honlab.nmfs.hawaii.edu wrote:

> Full_Name: Russell Price
> Version: 0.64.2
> OS: Redhat 6.0
> Submission from: (NULL) (128.171.242.1)
> 
> 
> When attempting to compile, I get the following error message:
> 
> gcc -g -O2 -I../include -I../../src/include  -c d1mach.c -o d1mach.o
> gcc: Internal compiler error: program cc1 got fatal signal 6
> make[2]: *** [d1mach.o] Error 1
> make[2]: Leaving directory `/usr/local/src/R-0.64.2/src/nmath'
> make[1]: *** [R] Error 1
> make[1]: Leaving directory `/usr/local/src/R-0.64.2/src'
> make: *** [R] Error 1
> 
> Compiler is gcc 2.8.1 / g77 0.5.23
> 
> Have you seen this before?

No, but those are not the compilers that came with my version of RH6.0.
I have no problems with

blackcap% gcc --version
egcs-2.91.66
blackcap% g77 --version
GNU Fortran 0.5.24-19981002

the latter being from the egcs-g77 rpm, if I recall correctly. We ahve
seem similar problems with people using the compilers for RH5.1 on RH6.0.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 13 00:27:13 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 13 Aug 1999 00:27:13 +0100 (BST)
Subject: ts in R (again)
Message-ID: <Pine.GSO.4.05.9908130015590.21254-100000@auk.stats>

I have done a re-working of the time series code in base R and library
ts that will appear in Friday's snapshot. I am sure at least one
person will be dissatisfied, but I am convinced there are fewer
errors than there were before (I found more than 20, as well as several
documented features that did not exist.)

The principles in the code are:

tsp attributes can only go on vectors of length at least one, must
have a positive frequency, start and end consistent with length. This
is all S-compatible (with the implementation, if not the
documentation).

Default methods and ts methods will where possible make use of the tsp
attribute information (as in S), but ts methods will return class
"ts".  In general R code is expected to use class "ts" (and class
"mts" which inherits from it for multivariate time series), but the
scheme is intended to allow more general classes using the tsp attribute
that may or may not inherit from "ts".  To facilitate this, the
function ts() has argument `class' that governs the class of the
returned object. For strict S compatibility this should be "none".

start.default and end.default were quite unreliable: I had Jan 1995
reported as c(1994, 13), for example. I have tried to make them more
robust. For example, try
> y <- ts(1:120, end=10-1e-7, frequency=12)
> end(y)
[1] 9 13
in S3 (with a warning) and R0.64.2 (which fails to print y). 
This does not seem worth copying (or does Paul Gilbert so instruct?)

"ts" class is only added by ts() and as.ts() (makes use of a tsp
attribute, as in S and unlike current R).  There seems no reason for
diff.default() or window.default() to change the class to "ts" (only),
for example.  I think they should preserve the class, and they do in
my versions.

"ts" class is only removed by tsp(x) <- NULL and by using subsets.  I
have taken Martyn Plummer's advice (PR#217) and made subsetting except
x[, blah] remove the "ts" class. In principle I would like to have
kept it, but at least code works this way!  There were too many problems
with the existing code, for example with matrix indices. (If "[.ts"
is to be special, it has to work in all cases.)  window() can now extract
regular sub-samples. 

There is one change that occurs if library(ts) is used, which is that
simple arithmetic (+ - * /) works on time-aligned series, so that
e.g.

x - 0.8*lag(x, -3)

does what you would expect (otherwise you get 0.2*x).  It is currently
optional, as I am unsure what this might break (although I can find
nothing, and it has been silently there for a week). Should this become
standard?

Two other things I would like opinions on:

1) Given multiple series, plot.ts plots them on a single y scale, and
plot.mts uses separate plots with a common x. Each has disadvantages.
Should we try to switch between the styles depending on the inputs,
and if so how?

2) I think the current R style of

>  y <- ts(1:120, end=10-1e-7,frequency=12)
> y
   Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
0   NA   1   2   3   4   5   6   7   8   9  10  11
1   12  13  14  15  16  17  18  19  20  21  22  23
2   24  25  26  27  28  29  30  31  32  33  34  35
3   36  37  38  39  40  41  42  43  44  45  46  47
4   48  49  50  51  52  53  54  55  56  57  58  59
5   60  61  62  63  64  65  66  67  68  69  70  71
6   72  73  74  75  76  77  78  79  80  81  82  83
7   84  85  86  87  88  89  90  91  92  93  94  95
8   96  97  98  99 100 101 102 103 104 105 106 107
9  108 109 110 111 112 113 114 115 116 117 118 119
10 120  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA

is confusing, not least as it is it impossible to distinguish NAs at the
ends from NAs generated by printing. I had a variant in library ts that
used format to get blanks. Should I make that the default?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 13 07:24:41 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Aug 1999 08:24:41 +0200
Subject: Installation problem on Redhat 6.0 (PR#247)
In-Reply-To: Prof Brian D Ripley's message of "Thu, 12 Aug 1999 23:13:47 +0100 (BST)"
References: <Pine.GSO.4.05.9908122306430.588-100000@auk.stats>
Message-ID: <x2n1vwdwpi.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> > Compiler is gcc 2.8.1 / g77 0.5.23
> > 
> > Have you seen this before?
> 
> No, but those are not the compilers that came with my version of RH6.0.

...and there have been previous reports of trouble with gcc 2.8.x.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Adrian.Trapletti@wu-wien.ac.at  Fri Aug 13 14:15:42 1999
From: Adrian.Trapletti@wu-wien.ac.at (Adrian Trapletti)
Date: Fri, 13 Aug 1999 13:15:42 +0000
Subject: strange scan, count.fields
Message-ID: <37B41A7E.53104D7D@wu-wien.ac.at>

Does anybody understand what's going on here:

I have the following ascii file called "y.txt"


"USD-DEM" "USD-JPY" "DEM-JPY"
 0.344901 4.78712 4.442
 0.345715 4.7882 4.44189
 0.350657 4.79065 4.44177
 0.35347 4.79065 4.43616
 0.35368 4.78957 4.43622
 0.35361 4.78982 4.43669
 0.353821 4.79036 4.43622
 0.352767 4.78899 4.43634
 0.353119 4.78916 4.43545


In R I do the following:


wu161215{adrian}28: R

R : Copyright 1999, The R Development Core Team
Version 0.64.2  (July 3, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> x<-scan("y.txt")
Error: "scan" expected a real got ""USD-DEM""
> row.lens <- count.fields("y.txt")
> any(row.lens != row.lens[1])
[1] TRUE
>
> x<-scan("y.txt", skip=1)
Read 27 items
> row.lens <- count.fields("y.txt")
> any(row.lens != row.lens[1])
[1] FALSE
>


scan seems to produce some side-effect (not properly close the file?)
I am using Redhat 5.2 and in general R seems to be rather stable...

Thanks
Adrian

--
Adrian Trapletti, Vienna University of Economics and Business
Administration, Augasse 2-6, A-1090 Vienna, Austria
Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
Email: adrian.trapletti@wu-wien.ac.at



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Aug 13 16:02:33 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 13 Aug 1999 17:02:33 +0200
Subject: strange scan, count.fields --> BUG
In-Reply-To: <37B41A7E.53104D7D@wu-wien.ac.at> (message from Adrian Trapletti
 on Fri, 13 Aug 1999 13:15:42 +0000)
References: <37B41A7E.53104D7D@wu-wien.ac.at>
Message-ID: <199908131502.RAA12663@sophie.ethz.ch>

Adrian, you seem to report several things at once,...

I think, first you really don't want scan but rather read.table
with your file 

>> I have the following ascii file called "y.txt"
>> 
>> "USD-DEM" "USD-JPY" "DEM-JPY"
>>  0.344901 4.78712 4.442
>>  0.345715 4.7882 4.44189
>>  0.350657 4.79065 4.44177
>>  0.35347 4.79065 4.43616
>>  0.35368 4.78957 4.43622
>>  0.35361 4.78982 4.43669
>>  0.353821 4.79036 4.43622
>>  0.352767 4.78899 4.43634
>>  0.353119 4.78916 4.43545

which gives

R> str(read.table("y.txt",head=T))
`data.frame':  9 obs. of  3 variables:
 $ USD-DEM: num  0.345 0.346 0.351 0.353 0.354 ...
 $ USD-JPY: num  4.79 4.79 4.79 4.79 4.79 ...
 $ DEM-JPY: num  4.44 4.44 4.44 4.44 4.44 ...

---------

Then you report that  scan() leaves something ``behind'' {open file, ??}
after stopping with an error.
This is clearly a bug and is still present in the current 0.65 snapshot.
After a few tests, I see that the problem seems to happen only
(sometimes) when the text leading to the error contains a ` " ' .
The following is even simpler :

 write(c(paste("\"", LETTERS[1:3],"\"", sep=""),1:3), nc=3)
 scan("data")         # gives error as it should
 count.fields("data") # will be wrong
 count.fields("data") # is now ok : 3 3

Gives (in 0.65 snapshot)

    >  write(c(paste("\"", LETTERS[1:3],"\"", sep=""),1:3), nc=3)
    >  scan("data")         # gives error as it should
    Error: "scan" expected a real got ""A""
    >  count.fields("data") # will be wrong
    [1] 4 3
    >  count.fields("data") # is now ok : 3 3
    [1] 3 3

--> I'll report to R-bugs
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Aug 13 16:43:48 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 13 Aug 1999 17:43:48 +0200 (MET DST)
Subject: scan() + error interferes with count.fields() in some cases (PR#248)
Message-ID: <199908131543.RAA28991@pubhealth.ku.dk>

As just mentioned on R-devel,
and originally reported (somewhat less concisely) by Adrian Trapletti,

This code

 write(c(paste("\"", LETTERS[1:3],"\"", sep=""),1:3), nc=3)
 scan("data")         # gives error as it should
 count.fields("data") # will be wrong
 count.fields("data") # is now ok : 3 3

gives (in 0.64.2 and in 0.65 snapshot)

    >  write(c(paste("\"", LETTERS[1:3],"\"", sep=""),1:3), nc=3)
    >  scan("data")         # gives error as it should
    Error: "scan" expected a real got ""A""
    >  count.fields("data") # will be wrong
    [1] 4 3
    >  count.fields("data") # is now ok : 3 3
    [1] 3 3

>From my experiments, the problem seems to be the leading `` " '' ,
since the following also fails  {and btw mixes up ESS ...}

  write(c("\"A", "B", "C",1:3), nc=3)
  scan("data")         # gives error as it should
  count.fields("data") # 3 3
  count.fields("data") # >> Error in count.fields..: string terminated by nl..

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug 16 08:05:15 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 16 Aug 1999 09:05:15 +0200
Subject: configure / linking problem when using hdf5
Message-ID: <199908160705.JAA04507@sophie.ethz.ch>


I've installed hdf5 [library & includes] here locally, last week.
[see ?hdf5save in R]

There is a remaining compilation / linking problem  for me:

The hdf5 library uses "compress2" a routine defined in Gnu's zlib,
but not available in the zlib that comes with X11R6.3 (which we have installed).

Now unfortunately,
the final link statement for R (0.65) [for me, with hdf5 enabled] is 

 gcc -o ../../bin/R.X11 arithmetic.o ....[omitted]  version.o  \
 ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE -L/usr/local/X11R6.3/lib -R/usr/local/X11R6.3/lib -lX11 -lsocket  -lnsl -R/opt/SUNWspro/lib  -L/opt/SUNWspro/lib -L/opt/SUNWspro/SC4.2/lib -L/usr/ccs/lib -L/usr/lib /opt/SUNWspro/SC4.2/lib/libM77.a -lF77 -lsunmath -lm -lcx  -lreadline -lhdf5 -lz -ldl -ltermcap -lm

Undefined			first referenced
 symbol  			    in file
compress2                           /usr/local/lib/libhdf5.a(H5Z.o)
ld: fatal: Symbol referencing errors. No output written to ../../bin/R.X11

-------------
Which happens because there was an  -L/usr/local/X11R6.3/lib 
before the "-lhdf5 -lz".
In the local LD_LIBRARY_PATH,  
   /usr/local/lib (which has the proper libz.a  *with* compress2)
   comes before the X11/lib (which has the wrong  libz.a).

Of course, I can manually 
put -L/usr/local/lib  BEFORE the -L/usr/local/X11R6.3/lib,
but I wonder what would be recommended, "officially".

Putting " -lhdf5 -lz "  BEFORE  "-L/usr/local/X11R6.3/lib"
simply fails as well [undefined symbol "compress2"].

Having two different "libz.a" in LD_LIBRARY_PATH doesn't make sense anyway.
Would any of you know if I can safely get rid of X11's one now that I have
GNU's ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 16 08:19:59 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 16 Aug 1999 09:19:59 +0200 (CEST)
Subject: configure / linking problem when using hdf5
In-Reply-To: <199908160705.JAA04507@sophie.ethz.ch>
References: <199908160705.JAA04507@sophie.ethz.ch>
Message-ID: <14263.48031.406276.341146@fangorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

> I've installed hdf5 [library & includes] here locally, last week.
> [see ?hdf5save in R]

> There is a remaining compilation / linking problem  for me:

> The hdf5 library uses "compress2" a routine defined in Gnu's zlib,
> but not available in the zlib that comes with X11R6.3 (which we have installed).

> Now unfortunately,
> the final link statement for R (0.65) [for me, with hdf5 enabled] is 

>  gcc -o ../../bin/R.X11 arithmetic.o ....[omitted]  version.o  \
>  ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE -L/usr/local/X11R6.3/lib -R/usr/local/X11R6.3/lib -lX11 -lsocket  -lnsl -R/opt/SUNWspro/lib  -L/opt/SUNWspro/lib -L/opt/SUNWspro/SC4.2/lib -L/usr/ccs/lib -L/usr/lib /opt/SUNWspro/SC4.2/lib/libM77.a -lF77 -lsunmath -lm -lcx  -lreadline -lhdf5 -lz -ldl -ltermcap -lm

> Undefined			first referenced
>  symbol  			    in file
> compress2                           /usr/local/lib/libhdf5.a(H5Z.o)
> ld: fatal: Symbol referencing errors. No output written to ../../bin/R.X11

> -------------
> Which happens because there was an  -L/usr/local/X11R6.3/lib 
> before the "-lhdf5 -lz".
> In the local LD_LIBRARY_PATH,  
>    /usr/local/lib (which has the proper libz.a  *with* compress2)
>    comes before the X11/lib (which has the wrong  libz.a).

> Of course, I can manually 
> put -L/usr/local/lib  BEFORE the -L/usr/local/X11R6.3/lib,
> but I wonder what would be recommended, "officially".

> Putting " -lhdf5 -lz "  BEFORE  "-L/usr/local/X11R6.3/lib"
> simply fails as well [undefined symbol "compress2"].

> Having two different "libz.a" in LD_LIBRARY_PATH doesn't make sense
> anyway.  Would any of you know if I can safely get rid of X11's one
> now that I have GNU's ?

We currently have

  ALL_LIBS = $(RLIBS) $(ALL_X_LIBS) $(FLIBS) $(R_XTRA_LIBS) $(LIBS)

I assume that the order is mostly for historic reasons.  You could try
putting ALL_X_LIBS last and see what happens ...e.g.,

  ALL_LIBS = $(RLIBS) $(R_XTRA_LIBS) $(FLIBS) $(LIBS) $(ALL_X_LIBS)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Aug 16 21:49:07 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Tue, 17 Aug 1999 08:49:07 +1200
Subject: ts in R (again)
In-Reply-To: <Pine.GSO.4.05.9908130015590.21254-100000@auk.stats>; from Prof Brian D Ripley on Fri, Aug 13, 1999 at 12:27:13AM +0100
References: <Pine.GSO.4.05.9908130015590.21254-100000@auk.stats>
Message-ID: <19990817084907.A5910@stat1.stat.auckland.ac.nz>

On Fri, Aug 13, 1999 at 12:27:13AM +0100, Prof Brian D Ripley wrote:
> Two other things I would like opinions on:
> 
> 1) Given multiple series, plot.ts plots them on a single y scale, and
> plot.mts uses separate plots with a common x. Each has disadvantages.
> Should we try to switch between the styles depending on the inputs,
> and if so how?

Genuine query:  How do I do I get a simple lagged variable plot like

	plot(lag(x), x)
	lines(lowess(lag(x), x))

We don't seem to have any simple way of doing this.  Do we need a special
function for this (with a panel function for effects like lowess/loess)?


> 2) I think the current R style of
> 
> >  y <- ts(1:120, end=10-1e-7,frequency=12)
> > y
>    Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
> 0   NA   1   2   3   4   5   6   7   8   9  10  11
> 1   12  13  14  15  16  17  18  19  20  21  22  23
> 2   24  25  26  27  28  29  30  31  32  33  34  35
> 3   36  37  38  39  40  41  42  43  44  45  46  47
> 4   48  49  50  51  52  53  54  55  56  57  58  59
> 5   60  61  62  63  64  65  66  67  68  69  70  71
> 6   72  73  74  75  76  77  78  79  80  81  82  83
> 7   84  85  86  87  88  89  90  91  92  93  94  95
> 8   96  97  98  99 100 101 102 103 104 105 106 107
> 9  108 109 110 111 112 113 114 115 116 117 118 119
> 10 120  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA
> 
> is confusing, not least as it is it impossible to distinguish NAs at the
> ends from NAs generated by printing. I had a variant in library ts that
> used format to get blanks. Should I make that the default?

Yes.

I'm a little bit worried about having libraries overide "base"
methods.  For efficiency reasons it would be better to attach libraries
after the "base" libraries.  That would mean that attempted overrides
would not work.

We can't attach libraries after "base" at present, but I would like to
make it the default behaviour (if politically possible).  That makes it 
important to get agreement of what the "right" basic methods are and to
get them into the base.

-- 
+----------------------------------------------------------------------+
| Ross Ihaka                         Email:  ihaka@stat.auckland.ac.nz |
| Department of Statistics           Phone:  (64-9) 373-7599 x 5054    |
| University of Auckland             Fax:    (64-9) 373-7018           |
| Private Bag 92019                                                    |
| Auckland, New Zealand                                                |
+----------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 16 22:50:52 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 16 Aug 1999 22:50:52 +0100 (BST)
Subject: ts in R (again)
In-Reply-To: <19990817084907.A5910@stat1.stat.auckland.ac.nz>
Message-ID: <Pine.GSO.4.05.9908162225540.29169-100000@auk.stats>

On Tue, 17 Aug 1999, Ross Ihaka wrote:

> On Fri, Aug 13, 1999 at 12:27:13AM +0100, Prof Brian D Ripley wrote:
> > Two other things I would like opinions on:
> > 
> > 1) Given multiple series, plot.ts plots them on a single y scale, and
> > plot.mts uses separate plots with a common x. Each has disadvantages.
> > Should we try to switch between the styles depending on the inputs,
> > and if so how?
> 
> Genuine query:  How do I do I get a simple lagged variable plot like
> 
> 	plot(lag(x), x)
> 	lines(lowess(lag(x), x))
> 
> We don't seem to have any simple way of doing this.  Do we need a special
> function for this (with a panel function for effects like lowess/loess)?

As of a few days ago, you can do precisely plot(lag(x), x), as plot.ts has
a `scatterplot' method, and that aligns the time bases. You probably want
plot(lag(x), x, type="p"), but I have not changed the previous default.

The lowess thing is a little more difficult. I think you want

xy <- ts.intersect(z=lag(x), x)
lines(lowess(xy[,1], xy[,2]))

That's the trick: set up all the objects you want, ts.intersect them
and unpick.  Some functions like plot.ts and Ops.ts do this for you.

> > 2) I think the current R style of
> > 
> > >  y <- ts(1:120, end=10-1e-7,frequency=12)
> > > y
> >    Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
> > 0   NA   1   2   3   4   5   6   7   8   9  10  11
> > 1   12  13  14  15  16  17  18  19  20  21  22  23
> > 2   24  25  26  27  28  29  30  31  32  33  34  35
> > 3   36  37  38  39  40  41  42  43  44  45  46  47
> > 4   48  49  50  51  52  53  54  55  56  57  58  59
> > 5   60  61  62  63  64  65  66  67  68  69  70  71
> > 6   72  73  74  75  76  77  78  79  80  81  82  83
> > 7   84  85  86  87  88  89  90  91  92  93  94  95
> > 8   96  97  98  99 100 101 102 103 104 105 106 107
> > 9  108 109 110 111 112 113 114 115 116 117 118 119
> > 10 120  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA
> > 
> > is confusing, not least as it is it impossible to distinguish NAs at the
> > ends from NAs generated by printing. I had a variant in library ts that
> > used format to get blanks. Should I make that the default?
> 
> Yes.

Done on Saturday.

> I'm a little bit worried about having libraries overide "base"
> methods.  For efficiency reasons it would be better to attach libraries
> after the "base" libraries.  That would mean that attempted overrides
> would not work.

There are now no overrides in library(ts), but it was very useful to have
them when testing things out. S has the `first' flag which is normally
false, but can be used to force overrides. I find this useful, not least to
ensure that my library comes in front of a broken one. (Someone out there
with a package on CRAN thinks plot.profile is not the name of a plot method
for profile objects, for example, even though that is in the White Book.)

On the basis of feedback so far, I have altered plot.ts to have a plot.type
flag that defaults to the plot.mts style, and altered print.ts to use
blanks not NAs.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Aug 16 23:52:29 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Tue, 17 Aug 1999 00:52:29 +0200 (MET DST)
Subject: axis ignores srt/crt (PR#249)
Message-ID: <199908162252.AAA18622@pubhealth.ku.dk>


Rotated text for axis labels should be possible with one of 
par(srt=90)
axis(1,at,labels)
par(srt=0)

or 

axis(1,at,labels,srt=90)

(or similar with crt instead of srt)

None of these works in pre0.65 or in 0.64.2

           _                           
platform   sparc-sun-solaris2.7        
arch       sparc                       
os         solaris2.7                  
system     sparc, solaris2.7           
status     Under development (unstable)
status.rev 0                           
major      0                           
minor      65.0                        
year       1999                        
month      August                      
day        13                          
language   R            


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 17 09:53:01 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 17 Aug 1999 10:53:01 +0200
Subject: axis ignores srt/crt (PR#249)
In-Reply-To: <199908162252.AAA18622@pubhealth.ku.dk>
 (thomas@biostat.washington.edu)
References: <199908162252.AAA18622@pubhealth.ku.dk>
Message-ID: <199908170853.KAA00649@sophie.ethz.ch>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> Rotated text for axis labels should be possible with one of
    TL> par(srt=90) axis(1,at,labels) par(srt=0)

    TL> or

    TL> axis(1,at,labels,srt=90)

    TL> (or similar with crt instead of srt)

    TL> None of these works in pre0.65 or in 0.64.2

I'm not sure if you are right...

The standard way to get rotated axis labels used to be
    par(las = {0,1,2,3})

The doc (?par) has

     las: numeric in {0,1,2,3}; the style of axis labels.  0 =
          always parallel to the axis [default], 1 = always
          horizontal, 2 = always perpendicular to the axis,
          3 = always vertical.

Try
	par(mfrow=c(2,2))
	for(las in 0:3) plot(1, las = las, main = paste("las =",las))

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Aug 17 16:21:08 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 17 Aug 1999 08:21:08 -0700 (PDT)
Subject: axis ignores srt/crt (PR#249)
In-Reply-To: <199908170853.KAA00649@sophie.ethz.ch>
Message-ID: <Pine.GSO.4.10.9908170819300.15758-100000@wompom.biostat.washington.edu>

On Tue, 17 Aug 1999, Martin Maechler wrote:
> 
> The standard way to get rotated axis labels used to be
>     par(las = {0,1,2,3})
> 

Ok. It's not a bug, it's an incompatibility -- I was trying to port some
code from S-PLUS.  I'll use par(las).

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Aug 18 09:26:42 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 18 Aug 1999 09:26:42 +0100 (BST)
Subject: diag()
Message-ID: <Pine.GSO.3.96.990818091901.648B-100000@laplace>

I would like to suggest a slight modification to diag().  In the case
where x is a matrix with both row names and column names the same, it
would be reasonable if the resulting vector also had those names.  I often
use diag() on variance matrices, where this modification is helpful. 

The modification requires replacing 

    if (is.matrix(x) && nargs() == 1) 
        return(c(x)[1 + 0:(min(dim(x)) - 1) * (dim(x)[1] + 1)])

the first two lines, with something like

    if (is.matrix(x) && nargs() == 1) {
        y <- c(x)[1 + 0:(min(dim(x)) - 1) * (dim(x)[1] + 1)]
        if (!is.null(nms <- dimnames(x)) && all(nms[[1]]==nms[[2]]))
          names(y) <- nms[[1]]
        return(y)
    }

Just a thought,  Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 18 09:48:04 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 18 Aug 1999 10:48:04 +0200
Subject: diag(); feature freeze; please beta-test..
In-Reply-To: <Pine.GSO.3.96.990818091901.648B-100000@laplace> (message from
 Jonathan Rougier on Wed, 18 Aug 1999 09:26:42 +0100 (BST))
References: <Pine.GSO.3.96.990818091901.648B-100000@laplace>
Message-ID: <199908180848.KAA03018@sophie.ethz.ch>

>>>>> On Wed, 18 Aug 1999 09:26:42 +0100 (BST), Jonathan Rougier <J.C.Rougier@durham.ac.uk> said:

    JonR> I would like to suggest a slight modification to diag().  In the
    JonR> case where x is a matrix with both row names and column names the
    JonR> same, it would be reasonable if the resulting vector also had
    JonR> those names.  I often use diag() on variance matrices, where this
    JonR> modification is helpful.

    JonR> The modification requires replacing 

    JonR> if (is.matrix(x) && nargs() == 1) 
    JonR>    return(c(x)[1 + 0:(min(dim(x)) - 1) * (dim(x)[1] + 1)])

    JonR> the first two lines, with something like

    JonR> if (is.matrix(x) && nargs() == 1) {
    JonR>   y <- c(x)[1 + 0:(min(dim(x)) - 1) * (dim(x)[1] + 1)]
    JonR>   if (!is.null(nms <- dimnames(x)) && all(nms[[1]]==nms[[2]]))
    JonR>     names(y) <- nms[[1]]
    JonR>   return(y)
    JonR> }

    JonR> Just a thought,  Jonathan.

    JonR> Jonathan Rougier                       Science Laboratories
    JonR> Department of Mathematical Sciences    South Road
    JonR> University of Durham                   Durham DH1 3LE


This seems like a good idea [ and I think I vaguely remember that I would
			      have wanted that myself, some time],
however,  R 0.65 is in ``feature freeze'' now
(and release date is scheduled for Aug.27 ..)

Yes, please ``everyone'' : 
Now is pre-tester time,
     Get "R-devel.tar.gz" from a CRAN site near you,
unpack and install {from source!!},
and send bug reports to R-core or R-devel,
*not* to R-bugs -- since bugs in non-released versions shouldn't make it
into the R repository I think.

{I hope to not forget to put the above diag() improvement into the next
  release after 0.65(.0)..}

Martin.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Aug 18 11:14:56 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 18 Aug 1999 11:14:56 +0100 (BST)
Subject: feature freeze; please beta-test..
Message-ID: <199908181014.LAA08544@toucan.stats.ox.ac.uk>

> From: Martin Maechler <maechler@stat.math.ethz.ch>

[... about something else]

> R 0.65 is in ``feature freeze'' now
> (and release date is scheduled for Aug.27 ..)
> 
> Yes, please ``everyone'' : 
> Now is pre-tester time,
>      Get "R-devel.tar.gz" from a CRAN site near you,
> unpack and install {from source!!},
> and send bug reports to R-core or R-devel,
> *not* to R-bugs -- since bugs in non-released versions shouldn't make it
> into the R repository I think.

Can we also ask that you fill in the form in the PLATFORMS file and
send it in (to R-core) if you successfully run make check.  That file
is getting outdated, and we are proposing to remove all entries for
pre-0.65 versions. We are particularly interested in reports for less
common systems, i.e. not i386-GNU/Linux nor Solaris, and also of
builds of the gnome version.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman.buyukisik@ae.ge.com  Wed Aug 18 16:47:29 1999
From: osman.buyukisik@ae.ge.com (U-E59264-Osman F Buyukisik)
Date: Wed, 18 Aug 1999 11:47:29 -0400 (EDT)
Subject: R-devel Aug18 version on hpux10.20
Message-ID: <14266.52770.150464.86932@c1186.ae.ge.com>

Hello,

 configured with  gcc-2.95, hpux ld, hpux fort77, --with-readline

 I had three problems:

1. changed f77 to fort77 in Makeconf files/Makefile (I had
--with-f77=fort77 in the configure line)

2. readline : picked up that I had readline, but the include location
was inserted into the CFLAGS, and history was marked as
unavailable. Made changes to Makeconf  and etc/Makeconf 

3. LDFLAGS = -g -Wl,xx   was not acceptable to the hpux "ld" (both
have to go) Changed Makefile.

Then had a clean build.  Seems to able to load dynamic libs. 
Check fails at two locations:

is.infinite(.Machine$double.base ^ .Machine$double.max.exp)# overflow
[1] FALSE

 x <- 1:99/100
 all(abs(1 - x / asin(sin(x))) <= Meps)
[1] FALSE

Second one :
 [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[49]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE
[61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[97]  TRUE  TRUE  TRUE

Flaky math routines in hpux or gcc libc.


Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Aug 19 03:56:10 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 19 Aug 1999 14:56:10 +1200
Subject: axis ignores srt/crt (PR#249)
In-Reply-To: <199908162252.AAA18622@pubhealth.ku.dk>; from thomas@biostat.washington.edu on Tue, Aug 17, 1999 at 12:52:29AM +0200
References: <199908162252.AAA18622@pubhealth.ku.dk>
Message-ID: <19990819145610.A6868@stat1.stat.auckland.ac.nz>

On Tue, Aug 17, 1999 at 12:52:29AM +0200, thomas@biostat.washington.edu wrote:
> 
> Rotated text for axis labels should be possible with one of 
> par(srt=90)
> axis(1,at,labels)
> par(srt=0)
> 
> or 
> 
> axis(1,at,labels,srt=90)
> 
> (or similar with crt instead of srt)
> 
> None of these works in pre0.65 or in 0.64.2

This seems like a useful feature, but the S implementation seems
sightly odd.

	axis(1,at,srt=45,adj=1)

does rotate the labels, but

	axis(1,srt=45,adj=1)

does not.  Do you want this exact behaviour, or would always obeying
the srt= option make more sense?

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 19 06:54:27 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 19 Aug 1999 06:54:27 +0100 (BST)
Subject: R-devel Aug18 version on hpux10.20
In-Reply-To: <14266.52770.150464.86932@c1186.ae.ge.com>
Message-ID: <Pine.GSO.4.05.9908190648020.10425-100000@auk.stats>

On Wed, 18 Aug 1999, U-E59264-Osman F Buyukisik wrote:

> Hello,
> 
>  configured with  gcc-2.95, hpux ld, hpux fort77, --with-readline
> 
>  I had three problems:
> 
> 1. changed f77 to fort77 in Makeconf files/Makefile (I had
> --with-f77=fort77 in the configure line)
> 
> 2. readline : picked up that I had readline, but the include location
> was inserted into the CFLAGS, and history was marked as
> unavailable. Made changes to Makeconf  and etc/Makeconf 

That might be gcc-2.95. I found that its default include path is set up to
include prefix/include but not /usr/local/include, which are of course the
same only if you install in /usr/local (and that is where 2.8.1 is). This
means that for me readline is only found correctly when I use 2.95 if I
have CPPFLAGS set to -I/usr/local/include in config.site (readline was
installed in /usr/local).


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 19 08:18:49 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 19 Aug 1999 09:18:49 +0200 (CEST)
Subject: R-devel Aug18 version on hpux10.20
In-Reply-To: <14266.52770.150464.86932@c1186.ae.ge.com>
References: <14266.52770.150464.86932@c1186.ae.ge.com>
Message-ID: <14267.45017.588791.524861@fangorn.ci.tuwien.ac.at>

>>>>> U-E59264-Osman F Buyukisik writes:

> Hello,
>  configured with  gcc-2.95, hpux ld, hpux fort77, --with-readline

>  I had three problems:

> 1. changed f77 to fort77 in Makeconf files/Makefile (I had
> --with-f77=fort77 in the configure line)

What is the problem here?  You do --with-f77=fort77 but FC is set to
f77?

> 2. readline : picked up that I had readline, but the include location
> was inserted into the CFLAGS, and history was marked as
> unavailable. Made changes to Makeconf  and etc/Makeconf 

> 3. LDFLAGS = -g -Wl,xx   was not acceptable to the hpux "ld" (both
> have to go) Changed Makefile.

Which version is that?  What is the problem?  Works for me as detailed
in PLATFORMS (note that the configure setting is -Wl,-E).

> Then had a clean build.  Seems to able to load dynamic libs. 
> Check fails at two locations:

> ...

> Flaky math routines in hpux or gcc libc.

Not gcc, I would assume, as I get the same with cc.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 19 09:45:35 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 19 Aug 1999 10:45:35 +0200
Subject: date() should not append a final "\n" ?!?
Message-ID: <199908190845.KAA24041@sophie.ethz.ch>

Between R 0.63.2 and 0.64, the behavior of 
  date()
has been changed in order to become platform independent.
It now uses POSIX calls, basically

    time_t t;
    time(&t);
    return ctime(&t);


This currently returns (for me on Sun SPARC Solaris)

  > date()
  [1] "Thu Aug 19 10:36:28 1999\n"

where I think the final "\n" is really UNdesired.

---
Is this just my (Sun's) version of ctime(), i.e.,
does anyone *NOT* get the final new line ?

Thanks for your feedback.
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Aug 19 09:48:18 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 19 Aug 1999 10:48:18 +0200 (CEST)
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <199908190845.KAA24041@sophie.ethz.ch>
References: <199908190845.KAA24041@sophie.ethz.ch>
Message-ID: <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

MM> Between R 0.63.2 and 0.64, the behavior of 
MM>   date()
MM> has been changed in order to become platform independent.
MM> It now uses POSIX calls, basically

MM>     time_t t;
MM>     time(&t);
MM>     return ctime(&t);


MM> This currently returns (for me on Sun SPARC Solaris)

>> date()
MM>   [1] "Thu Aug 19 10:36:28 1999\n"

MM> where I think the final "\n" is really UNdesired.

Yes!


MM> ---
MM> Is this just my (Sun's) version of ctime(), i.e.,
MM> does anyone *NOT* get the final new line ?


Debian Linux:

R> date()
[1] "Thu Aug 19 10:47:17 1999\n"


.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mlthomps@yayoi.mt.m-kagaku.co.jp  Thu Aug 19 10:03:48 1999
From: mlthomps@yayoi.mt.m-kagaku.co.jp (mlthomps@yayoi.mt.m-kagaku.co.jp)
Date: Thu, 19 Aug 1999 11:03:48 +0200 (MET DST)
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1 (PR#252)
Message-ID: <199908190903.LAA12321@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0007_01BEEA08.8191B340
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Dear R Development Core Team,

I've been trying to install R ver. 0.64.0 on a
Dec-Alpha machine w/OSF1.

A couple of things go wrong.

After I type "make", the installation process
bombs while trying to compile the R.binary.
It reports the following:

     f77   -o ../../bin/R.binary {*** for brevity, I've deleted the =
filenames printed here ***}
     ld:  ../unix/libunix.a(system.o): main: multiply defined
     fort: Severe: Failed while trying to link.

I got around this by adding the "-nofor_main" option to the=20
compile statement in the Makefile in ../src/main directory.
Thus, make issues the command:
     f77  -nofor_main -o ../../bin/R.binary {*** again, deleted printed =
filenames ***}
That allowed the compilation to complete smoothly.

However, when I tried to run R, I got the following result:
----------------------------------------------------------------------
> R
ARGUMENT '' __ignored__

R : Copyright 1999, The R Development Core Team
Version 0.64.0  (April 8, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

Floating exception (core dumped)
----------------------------------------------------------------------


So, I tried it with the debugger dbx and got this output:
----------------------------------------------------------------------
> R --debugger dbx
dbx version 3.11.8
Type 'help' for help.


"system.c" not defined or not active
(dbx) run

R : Copyright 1999, The R Development Core Team
Version 0.64.0  (April 8, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

signal Floating point exception at   [InitArithmetic:5 =
+0x17c,0x120018ddc]       Source not available
(dbx) quit
----------------------------------------------------------------------


Any ideas what might be wrong and how I can get around it?

By the way, I use R on my PC without any glitches.
I'm impressed with the work you have done.

Thanks for providing such useful software,
-Mike

------------------------------------------------------------------
Michael L. Thompson, Ph.D.  | Phone:  (0)86-457-2805  |
Senior Consultant on Modeling & Statistics     | Fax:      =
(0)86-457-2027  |
Development and Engineering Research Center =20
E-mail: mlthomps@seigi2.mt.m-kagaku.co.jp
               mlthomps@alum.mit.edu
Mitsubishi Chemical Corporation, Mizushima Plant
3-10 Ushiodori, Kurashiki, Okayama 712  JAPAN
-------------------------------------------------------------------

------=_NextPart_000_0007_01BEEA08.8191B340
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD W3 HTML//EN">
<HTML>
<HEAD>

<META content=3Dtext/html;charset=3Diso-8859-1 =
http-equiv=3DContent-Type>
<META content=3D'"MSHTML 4.72.3110.7"' name=3DGENERATOR>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT color=3D#000000 size=3D2>Dear R Development Core =
Team,</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>I've been trying to install R ver. 0.64.0 on =
a</FONT></DIV>
<DIV><FONT size=3D2>Dec-Alpha machine w/OSF1.</FONT></DIV>
<DIV><FONT size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>A couple of things go wrong.</FONT></DIV>
<DIV><FONT size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>After I type &quot;make&quot;, the installation=20
process</FONT></DIV>
<DIV><FONT size=3D2>bombs while trying to compile the =
R.binary.</FONT></DIV>
<DIV><FONT size=3D2>It reports the following:</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp;&nbsp; f77&nbsp;&nbsp; -o =
.../../bin/R.binary=20
{*** for brevity, I've deleted the filenames printed here =
***}</FONT></DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp;&nbsp; ld:&nbsp;=20
.../unix/libunix.a(system.o): main: multiply =
defined<BR>&nbsp;&nbsp;&nbsp;&nbsp;=20
fort: Severe: Failed while trying to link.</FONT></DIV>
<DIV><FONT size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>I got around this by adding the =
&quot;-nofor_main&quot; option=20
to the </FONT></DIV>
<DIV><FONT size=3D2>compile statement </FONT><FONT size=3D2>in the =
Makefile in=20
.../src/main directory.</FONT></DIV>
<DIV><FONT size=3D2>Thus, make issues the command:</FONT></DIV>
<DIV><FONT size=3D2>&nbsp;&nbsp;&nbsp;&nbsp; f77&nbsp; -nofor_main -o=20
../../bin/R.binary {*** again, deleted printed filenames =
***}</FONT></DIV>
<DIV><FONT size=3D2>That allowed the compilation to complete=20
smoothly.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>However, when I tried to run R, I =
got the=20
following result:</FONT></DIV>
<DIV><FONT color=3D#000000=20
size=3D2>----------------------------------------------------------------=
------</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2>&gt; R<BR>ARGUMENT '' =
__ignored__</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R : Copyright 1999, The R =
Development Core=20
Team<BR>Version 0.64.0&nbsp; (April 8, 1999)</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R is free software and comes with =
ABSOLUTELY NO=20
WARRANTY.<BR>You are welcome to redistribute it under certain=20
conditions.<BR>Type&nbsp;&nbsp;&nbsp; &quot;?license&quot; or=20
&quot;?licence&quot; for distribution details.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R is a collaborative project with =
many=20
contributors.<BR>Type&nbsp;&nbsp;&nbsp; &quot;?contributors&quot; for a=20
list.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>Type&nbsp;&nbsp;&nbsp; =
&quot;demo()&quot; for=20
some demos, &quot;help()&quot; for on-line help,=20
or<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
&quot;help.start()&quot; for a=20
HTML browser interface to help.<BR>Type&nbsp;&nbsp;&nbsp; =
&quot;q()&quot; to=20
quit R.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>Floating exception (core=20
dumped)<BR></FONT>-------------------------------------------------------=
---------------</DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>So, I tried it with the debugger dbx =
and got=20
this output:</FONT></DIV>
<DIV><FONT color=3D#000000=20
size=3D2></FONT>---------------------------------------------------------=
-------------</DIV>
<DIV><FONT color=3D#000000 size=3D2>&gt; R --debugger dbx<BR>dbx version =

3.11.8<BR>Type 'help' for help.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2><BR>&quot;system.c&quot; not defined =
or not=20
active<BR>(dbx) run</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R : Copyright 1999, The R =
Development Core=20
Team<BR>Version 0.64.0&nbsp; (April 8, 1999)</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R is free software and comes with =
ABSOLUTELY NO=20
WARRANTY.<BR>You are welcome to redistribute it under certain=20
conditions.<BR>Type&nbsp;&nbsp;&nbsp; &quot;?license&quot; or=20
&quot;?licence&quot; for distribution details.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>R is a collaborative project with =
many=20
contributors.<BR>Type&nbsp;&nbsp;&nbsp; &quot;?contributors&quot; for a=20
list.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>Type&nbsp;&nbsp;&nbsp; =
&quot;demo()&quot; for=20
some demos, &quot;help()&quot; for on-line help,=20
or<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
&quot;help.start()&quot; for a=20
HTML browser interface to help.<BR>Type&nbsp;&nbsp;&nbsp; =
&quot;q()&quot; to=20
quit R.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>signal Floating point exception =
at&nbsp;&nbsp;=20
[InitArithmetic:5 =
+0x17c,0x120018ddc]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Source=20
not available<BR>(dbx)=20
quit<BR></FONT>----------------------------------------------------------=
------------</DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>Any ideas what might be wrong and =
how I can get=20
around it?</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT color=3D#000000 size=3D2>By the way, I use R on my PC without =
any=20
glitches.</FONT></DIV>
<DIV><FONT color=3D#000000 size=3D2></FONT><FONT size=3D2>I'm impressed =
with the work=20
you have done.</FONT></DIV>
<DIV><FONT size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2>Thanks for providing such useful =
software,</FONT></DIV>
<DIV><FONT size=3D2>-Mike</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT color=3D#000000=20
size=3D2>----------------------------------------------------------------=
--<BR>Michael=20
L. Thompson, Ph.D.&nbsp; | Phone:&nbsp; (0)86-457-2805&nbsp; |<BR>Senior =

Consultant on Modeling &amp; Statistics&nbsp;&nbsp;&nbsp;&nbsp; |=20
Fax:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (0)86-457-2027&nbsp; |<BR>Development =
and=20
Engineering Research Center&nbsp; <BR>E-mail: <A=20
href=3D"mailto:mlthomps@seigi2.mt.m-kagaku.co.jp">mlthomps@seigi2.mt.m-ka=
gaku.co.jp</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
<A =
href=3D"mailto:mlthomps@alum.mit.edu">mlthomps@alum.mit.edu</A><BR>Mitsub=
ishi=20
Chemical Corporation, Mizushima Plant<BR>3-10 Ushiodori, Kurashiki, =
Okayama=20
712&nbsp;=20
JAPAN<BR>----------------------------------------------------------------=
---</FONT></DIV></BODY></HTML>

------=_NextPart_000_0007_01BEEA08.8191B340--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 19 10:32:03 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 19 Aug 1999 11:32:03 +0200 (CEST)
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1 (PR#252)
In-Reply-To: <199908190903.LAA12321@pubhealth.ku.dk>
References: <199908190903.LAA12321@pubhealth.ku.dk>
Message-ID: <14267.53011.7435.122041@fangorn.ci.tuwien.ac.at>

>>>>> mlthomps  writes:

> This is a multi-part message in MIME format.
> ------=_NextPart_000_0007_01BEEA08.8191B340
> Content-Type: text/plain;
> 	charset="iso-8859-1"
> Content-Transfer-Encoding: quoted-printable

> Dear R Development Core Team,

> I've been trying to install R ver. 0.64.0 on a
> Dec-Alpha machine w/OSF1.

Can you please try the current R-devel snapshot instead?
Also, can you please use the function bug.report(), or provide detailed
information on what exactly you did and your environment is?

-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 19 10:38:41 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 19 Aug 1999 11:38:41 +0200
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at> (message
 from Friedrich Leisch on Thu, 19 Aug 1999 10:48:18 +0200 (CEST))
References: <199908190845.KAA24041@sophie.ethz.ch> <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
Message-ID: <199908190938.LAA24130@sophie.ethz.ch>


>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

    MM> Between R 0.63.2 and 0.64, the behavior of 
    MM> date()
    MM> has been changed in order to become platform independent.
    MM> It now uses POSIX calls, basically

    MM> time_t t;
    MM> time(&t);
    MM> return ctime(&t);


    MM> This currently returns (for me on Sun SPARC Solaris)

    >>> date()
    MM> [1] "Thu Aug 19 10:36:28 1999\n"

    MM> where I think the final "\n" is really UNdesired.

    FrL> Yes!

Okay,
I checked  Lewine (1991) "POSIX Programmer's Guide" :

POSIX specifies that ctime() has a final "\n" 
(before the string terminator \0)
and always length 26 (incl. terminator)

Hence, we have to drop the final "\n",
already in function R_Date() which is [in src/main/platform.c]
currently
    char *R_Date()
    {
	time_t t;
	time(&t);
	return ctime(&t);
    }

How can we drop is this done in the most elegant way?
(without having to allocate a  char[26] ?)


 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 19 10:43:46 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 19 Aug 1999 11:43:46 +0200 (CEST)
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <199908190938.LAA24130@sophie.ethz.ch>
References: <199908190845.KAA24041@sophie.ethz.ch>
 <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
 <199908190938.LAA24130@sophie.ethz.ch>
Message-ID: <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

MM> Between R 0.63.2 and 0.64, the behavior of 
MM> date()
MM> has been changed in order to become platform independent.
MM> It now uses POSIX calls, basically

MM> time_t t;
MM> time(&t);
MM> return ctime(&t);


MM> This currently returns (for me on Sun SPARC Solaris)

>>>> date()
MM> [1] "Thu Aug 19 10:36:28 1999\n"

MM> where I think the final "\n" is really UNdesired.

FrL> Yes!

> Okay,
> I checked  Lewine (1991) "POSIX Programmer's Guide" :

> POSIX specifies that ctime() has a final "\n" 
> (before the string terminator \0)
> and always length 26 (incl. terminator)

> Hence, we have to drop the final "\n",
> already in function R_Date() which is [in src/main/platform.c]
> currently
>     char *R_Date()
>     {
> 	time_t t;
> 	time(&t);
> 	return ctime(&t);
>     }

> How can we drop is this done in the most elegant way?
> (without having to allocate a  char[26] ?)

Be brutal, do

	date <- function() substring(.Internal(date()), 1, 24)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 19 10:48:08 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 19 Aug 1999 11:48:08 +0200
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at> (message from
 Kurt Hornik on Thu, 19 Aug 1999 11:43:46 +0200 (CEST))
References: <199908190845.KAA24041@sophie.ethz.ch>
 <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
 <199908190938.LAA24130@sophie.ethz.ch> <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at>
Message-ID: <199908190948.LAA24138@sophie.ethz.ch>

>>>>> On Thu, 19 Aug 1999 11:43:46 +0200 (CEST), Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> said:

>>>>> Martin Maechler writes:
>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

    MM> Between R 0.63.2 and 0.64, the behavior of 
    MM> date()
    MM> has been changed in order to become platform independent.
    MM> It now uses POSIX calls, basically

    MM> time_t t;
    MM> time(&t);
    MM> return ctime(&t);


    MM> This currently returns (for me on Sun SPARC Solaris)

    >>>>> date()
    MM> [1] "Thu Aug 19 10:36:28 1999\n"

    MM> where I think the final "\n" is really UNdesired.

    FrL> Yes!

    >> Okay,
    >> I checked  Lewine (1991) "POSIX Programmer's Guide" :

    >> POSIX specifies that ctime() has a final "\n" 
    >> (before the string terminator \0)
    >> and always length 26 (incl. terminator)

    >> Hence, we have to drop the final "\n",
    >> already in function R_Date() which is [in src/main/platform.c]
    >> currently
    >> char *R_Date()
    >> {
    >>   time_t t;
    >>   time(&t);
    >>   return ctime(&t);
    >> }

    >> How can we drop is this done in the most elegant way?
    >> (without having to allocate a  char[26] ?)

    KH> Be brutal, do

    KH> date <- function() substring(.Internal(date()), 1, 24)

Kurt, I said
		"most elegant way"
about 5 lines above..

And also for the C API, we want  R_Date() to be correct.

{{I really wonder that the POSIX people where thinking when they
  appended the "\n";  
  appending afterwards is always much easier than removing....
}}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 19 11:11:09 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 19 Aug 1999 12:11:09 +0200 (CEST)
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <199908190948.LAA24138@sophie.ethz.ch>
References: <199908190845.KAA24041@sophie.ethz.ch>
 <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
 <199908190938.LAA24130@sophie.ethz.ch>
 <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at>
 <199908190948.LAA24138@sophie.ethz.ch>
Message-ID: <14267.55357.387296.720135@fangorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

>>>>> On Thu, 19 Aug 1999 11:43:46 +0200 (CEST), Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> said:
>>>>> Martin Maechler writes:
>>>>> On Thu, 19 Aug 1999 10:45:35 +0200,
>>>>> Martin Maechler (MM) wrote:

MM> Between R 0.63.2 and 0.64, the behavior of 
MM> date()
MM> has been changed in order to become platform independent.
MM> It now uses POSIX calls, basically

MM> time_t t;
MM> time(&t);
MM> return ctime(&t);


MM> This currently returns (for me on Sun SPARC Solaris)

>>>>>> date()
MM> [1] "Thu Aug 19 10:36:28 1999\n"

MM> where I think the final "\n" is really UNdesired.

FrL> Yes!

>>> Okay,
>>> I checked  Lewine (1991) "POSIX Programmer's Guide" :

>>> POSIX specifies that ctime() has a final "\n" 
>>> (before the string terminator \0)
>>> and always length 26 (incl. terminator)

>>> Hence, we have to drop the final "\n",
>>> already in function R_Date() which is [in src/main/platform.c]
>>> currently
>>> char *R_Date()
>>> {
>>> time_t t;
>>> time(&t);
>>> return ctime(&t);
>>> }

>>> How can we drop is this done in the most elegant way?
>>> (without having to allocate a  char[26] ?)

KH> Be brutal, do

KH> date <- function() substring(.Internal(date()), 1, 24)

> Kurt, I said
> 		"most elegant way"
> about 5 lines above..

But you did not define `elegant' ... :-)

> And also for the C API, we want  R_Date() to be correct.

Define `correct'.  That would be without the trailing newline?

> {{I really wonder that the POSIX people where thinking when they
>   appended the "\n";  
>   appending afterwards is always much easier than removing....
> }}


Suggestion:

	return strtok(ctime(&t), "\n");

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 19 18:05:23 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Aug 1999 19:05:23 +0200
Subject: date() should not append a final "\n" ?!?
In-Reply-To: Kurt Hornik's message of "Thu, 19 Aug 1999 12:11:09 +0200 (CEST)"
References: <199908190845.KAA24041@sophie.ethz.ch> 	<14267.50386.581977.851244@galadriel.ci.tuwien.ac.at> 	<199908190938.LAA24130@sophie.ethz.ch> 	<14267.53714.885909.438577@fangorn.ci.tuwien.ac.at> 	<199908190948.LAA24138@sophie.ethz.ch> <14267.55357.387
Message-ID: <x2aernsnu4.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> Suggestion:
> 
> 	return strtok(ctime(&t), "\n");

s<-ctime(&t); s[25] = '\0'; return s;

This won't work if s is read-only (which I don't think it is), but
neither will strtok since it pokes a null in the same spot....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 19 18:08:09 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 19 Aug 1999 19:08:09 +0200
Subject: date() should not append a final "\n" ?!?
In-Reply-To: <14267.55357.387296.720135@fangorn.ci.tuwien.ac.at> (message from
 Kurt Hornik on Thu, 19 Aug 1999 12:11:09 +0200 (CEST))
References: <199908190845.KAA24041@sophie.ethz.ch>
 <14267.50386.581977.851244@galadriel.ci.tuwien.ac.at>
 <199908190938.LAA24130@sophie.ethz.ch>
 <14267.53714.885909.438577@fangorn.ci.tuwien.ac.at>
 <199908190948.LAA24138@sophie.ethz.ch> <14267.55357.387296.720135@fangorn.ci.tuwien.ac.at>
Message-ID: <199908191708.TAA08386@sophie.ethz.ch>

>>>>> On Thu, 19 Aug 1999 12:11:09 +0200 (CEST), Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> said:

>>>>> Martin Maechler writes:
...

    MM> Between R 0.63.2 and 0.64, the behavior of date() has been changed
    MM> in order to become platform independent.  It now uses POSIX calls,
    MM> basically

    MM> time_t t; time(&t); return ctime(&t);


    MM> This currently returns (for me on Sun SPARC Solaris)

    >>>>>>> date()
    MM> [1] "Thu Aug 19 10:36:28 1999\n"

    MM> where I think the final "\n" is really UNdesired.

    FrL> Yes!

    >>>> Okay, I checked Lewine (1991) "POSIX Programmer's Guide" :

    >>>> POSIX specifies that ctime() has a final "\n" (before the string
    >>>> terminator \0) and always length 26 (incl. terminator)

    >>>> Hence, we have to drop the final "\n", already in function
    >>>> R_Date() which is [in src/main/platform.c] currently char
    >>>> *R_Date() { time_t t; time(&t); return ctime(&t); }

    >>>> How can we drop is this done in the most elegant way?  (without
    >>>> having to allocate a char[26] ?)

 <...>

    KH> Suggestion:

    KH> 	return strtok(ctime(&t), "\n");

Thanks Kurt, 
this works (and *is* elegant!);  

I've applied and committed it for 0.65.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Aug 20 13:18:04 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 20 Aug 1999 14:18:04 +0200 (MET DST)
Subject: seg.fault for some illegal .Random.seed (new since 0.64) (PR#253)
Message-ID: <199908201218.OAA26837@pubhealth.ku.dk>


This is already in 0.64, but was okay in 0.63

In R version <= 0.63 :

    > .Random.seed <- c(111,2,3)
    > rnorm(1)
    Warning: Wrong length .Random.seed; forgot initial RNGkind? set to Wichmann-Hill
    [1] -0.4811529
    > .Random.seed
    [1]     0  6968 28861 26054
    > 

Now in 0.65 (pre-release) and both versions of 0.64 :

    > .Random.seed <- c(111,2,3)
    > rnorm(1)

  ----> Segmentation Fault

---
{I know that maybe, I should fix this; however, I don't have time just now,
 and in order not to forget this one...
}
Martin

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.5.1
 arch = sparc
 os = solaris2.5.1
 system = sparc, solaris2.5.1
 status = Under development (unstable)
 status.rev = 0
 major = 0
 minor = 65.0
 year = 1999
 month = August
 day = 20
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sat Aug 21 06:15:04 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sat, 21 Aug 1999 07:15:04 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199908210515.HAA22381@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

* PR# 137 *
Subject: funfits
From: "Alvaro A. Novo" <novo@uiuc.edu>
Date: Tue, 9 Mar 1999 22:24:54 -0600
--Not our problem. Dubious whether a bug at all.

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 61 *
Subject: points(...,  cex = ..)  is pretty wrong...
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 2 Nov 1998 19:15:06 +0100
--Symbols getting decentered when too large cex for X. Still there 22feb99  
* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 123 *
Subject: Text in plot
From: Ennapadam Venkatraman <venkat@biosta.mskcc.org>
Date: Thu, 18 Feb 1999 13:05:37 -0500
--Multiline text not working
* PR# 130 *
Subject: lty=0 -- shouldn't it give an invisible line?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Feb 1999 21:45:43 +0100
--Strange effect on barplot
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 229 *
Subject: dev.print scaling bug?
From: John.Peters@tip.csiro.au (John Peters)
Date: Fri, 16 Jul 1999 12:10:48 +1000 (EST)
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 238 *
Subject: EPS compliance of postscript device: initclip operator
From: David Middleton <dajm@deeq.demon.co.uk>
Date: Tue, 03 Aug 1999 17:51:47 -0300
--initclip is removed. Still need new argument onefile/onepage to ensure one page
--and use %!PS-Adobe-3.0 EPSF-3.0 header

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 207 *
Subject: Lines longer than ~1000 chars truncated at parsing
From: msa@biostat.mgh.harvard.edu
Date: Mon, 7 Jun 1999 22:27:10 +0200 (MET DST)
--Fixed buffer used during input.
--Not fixable without major changes to readline lib.

Directory:  Installation

none

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 239 *
Subject: cbind is not generic as claimed, omits labels where S has them 
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 12:29:58 +0100 (BST)
--Cbind is now generic, still labelling issues. See also PR#240 and PR#241.
* PR# 240 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
--See PR#239
* PR# 241 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 6 Aug 1999 06:52:35 +0100 (BST)
--See PR#239

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 210 *
Subject: definition of R_problem_buf in S.h
From: vogels@ieee.org
Date: Mon, 14 Jun 1999 17:56:04 +0200 (MET DST)
--Same as #185
* PR# 235 *
Subject:  round(numeric(0)) 
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 29 Jul 1999 15:20:21 +0100 (BST)
--Some followup of this on R-devel not sent here.

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

* PR# 121 *
Subject:  model.frame mangles time series 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Thu, 18 Feb 1999 15:47:24 +0100
--Subset in C code + attributes = mess
--Switch to interpreted ("[")

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 222 *
Subject: Use of R-Coda
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Fri, 9 Jul 1999 10:54:16 +0200 
--In Danish (?)  Looks as if PR#246 is the same in English
* PR# 234 *
Subject: R-bugs
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Tue, 27 Jul 1999 13:49:31 +0200
--Looks like PR#222 again, in Danish. See PR#246 for English version
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200
* PR# 249 *
Subject: axis ignores srt/crt
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 16 Aug 1999 15:51:49 -0700 (PDT)
* PR# 250 *
From: Peter Malewski <peter@tu-bs.de>
Date: Tue, 17 Aug 1999 12:21:38 +0200 (CEST)
* PR# 251 *
From: Peter Malewski <peter@tu-bs.de>
Date: Tue, 17 Aug 1999 12:21:45 +0200 (CEST)
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 253 *
Subject: seg.fault for some illegal .Random.seed (new since 0.64)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 20 Aug 1999 14:17:31 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tbmzuotvux@white-star.com  Mon Aug 23 07:24:48 1999
From: tbmzuotvux@white-star.com (tbmzuotvux@white-star.com)
Date: Mon, 23 Aug 1999 08:24:48 +0200 (MET DST)
Subject: For Serious Marketers ONLY                                                   zovbs
Message-ID: <199908230624.IAA22363@stat.math.ethz.ch>

Are you making more money than ever?
Are You getting all the sales that you want?
Is your inbox filled with fresh orders every day?

If you answered YES to all of the above questions, 
then you probably don't need our services.

However, If you answered No to ANY of them, 
then try these questions:

Do You:
Want a Direct Email Service that delivers?
Want access to the best e-mail lists available?
DO YOU NEED? 
Full version Direct Email Software at a discount? 

If you answered YES to ANY of the above questions, 
then try:

Warhorse Promotions....   Discount Direct Email
SIMPLY THE VERY BEST!

We have Contract Mailing, Mailing Software and List 
Management Tools at Discount Prices. We also have 
general internet lists and Biz Opp targeted lists, 
that have been cleaned and verified. 
These lists get 90% plus deliverables. 

For info on any of the above, Call 954 527-7155
and leave your name, phone # and time zone.

Thanx,  Warhorse

********************************************************
***You WILL NOT be removed by calling the above phone #. 
To be removed from future mailings, Click Here 
http://www.spamnomore.com/ This is a global remove list 
which I run my lists against before mailing.

********************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From prechelt@ira.uka.de  Mon Aug 23 19:27:00 1999
From: prechelt@ira.uka.de (prechelt@ira.uka.de)
Date: Mon, 23 Aug 1999 20:27:00 +0200 (MET DST)
Subject: Strange 'Unimplemented feature in rep' error (PR#254)
Message-ID: <199908231827.UAA15353@pubhealth.ku.dk>

I have a large computation that performs various bootstrap resampling
loops over pairs of samples using lapply().
After a few seconds it stops like this

> do.summarize.effects(compute.power=T)
...
Error: Unimplemented feature in rep
> .Traceback
[[1]]
[1] "rep(no, length = length(ans))"

[[2]]
[1] "ifelse(t.howto == \"n\", boot.result, l.meanboot.test(onew.x, onew.y, " "    samples = boot.test.samples, expect = makezero, return.htest = T, "
[3] "    alt = \"t\"))"                                                     

[[3]]
[1] "measure.power(firstset, secondset, t.howto = t.howto, var.equal = var.equal)"

[[4]]
[1] "FUN(X[[i]], ...)"

[[5]]
[1] "lapply(split(X, group), FUN, ...)"

[[6]]
[1] "tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power)"

[[7]]
[1] "as.list(X)"

[[8]]
[1] "lapply(as.list(X), FUN, ...)"

[[9]]
[1] "sapply(tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power), " "    rbind)"                                                                             

[[10]]
[1] "t(sapply(tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power), " "    rbind))"                                                                             

[[11]]
[1] "do.summarize.effects(compute.power = T)"

My problems are the following:

1. I cannot find the line
     rep(no, length = length(ans))
   anywhere in my own code

2. The R source code of 'rep' does not contain the error message
   "unimplemented feature" (I have not checked the .Internal)

3. I've had similar strange errors before and could not find the problem
   in my own code. The problem finally went away after I renamed two
   of the groups in my data such that the factor ordering changed and
   the computations were performed in a different order...
   
4. I've also previously had the effect that my function that reads the data
   using read.table(), which is not part of the above call,
   reproducibly came up with the second column being NULL instead
   of 1451 items as the other colums. A second call to the same function
   reliably came back with the correct result. I am not sure whether
   these problems are related but I think both were not my fault.

Any suggestions where to look for the above problem?
Both my data and my computations are somewhat lengthy so the 
stepwise-stripping-down approach is cumbersome.
The new problem appeared using the same data as in (3) above, but
after some extensions to the code (none of them introducing a new
call to rep()).
The problem does also appear if I use only the small subset of the 
data used in the respective part of the computation that fails.

Thanks in advance for your help

  Lutz

Lutz Prechelt  http://wwwipd.ira.uka.de/~prechelt/   | Whenever you 
Institut f. Programmstrukturen und Datenorganisation | complicate things,
Universitaet Karlsruhe;  D-76128 Karlsruhe;  Germany | they get
(Phone: +49/721/608-4068, FAX: +49/721/608-7343)     | less simple.
>>> Ever had negative research results?  http://wwwipd.ira.uka.de/fnr <<<

--please do not edit the information below--

Version:
 platform = alpha-dec-osf4.0
 arch = alpha
 os = osf4.0
 system = alpha, osf4.0
 status = 
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 8
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 23 21:19:24 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 23 Aug 1999 21:19:24 +0100 (BST)
Subject: Strange 'Unimplemented feature in rep' error (PR#254)
In-Reply-To: <199908231827.UAA15353@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9908232101100.3583-100000@auk.stats>

On Mon, 23 Aug 1999 prechelt@ira.uka.de wrote:

> I have a large computation that performs various bootstrap resampling
> loops over pairs of samples using lapply().
> After a few seconds it stops like this
> 
> > do.summarize.effects(compute.power=T)
> ...
> Error: Unimplemented feature in rep
> > .Traceback

(use traceback(): it is easier to read)

> [[1]]
> [1] "rep(no, length = length(ans))"
> 
> [[2]]
> [1] "ifelse(t.howto == \"n\", boot.result, l.meanboot.test(onew.x, onew.y, " "    samples = boot.test.samples, expect = makezero, return.htest = T, "
> [3] "    alt = \"t\"))"                                                     
> 
> [[3]]
> [1] "measure.power(firstset, secondset, t.howto = t.howto, var.equal = var.equal)"
> 
> [[4]]
> [1] "FUN(X[[i]], ...)"
> 
> [[5]]
> [1] "lapply(split(X, group), FUN, ...)"
> 
> [[6]]
> [1] "tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power)"
> 
> [[7]]
> [1] "as.list(X)"
> 
> [[8]]
> [1] "lapply(as.list(X), FUN, ...)"
> 
> [[9]]
> [1] "sapply(tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power), " "    rbind)"                                                                             
> 
> [[10]]
> [1] "t(sapply(tapply(1:nrow(dd), grouping, summarize.effects, compute.power = compute.power), " "    rbind))"                                                                             
> 
> [[11]]
> [1] "do.summarize.effects(compute.power = T)"
> 
> My problems are the following:
> 
> 1. I cannot find the line
>      rep(no, length = length(ans))
>    anywhere in my own code

Look at the line below in the traceback: it is in ifelse.

> 2. The R source code of 'rep' does not contain the error message
>    "unimplemented feature" (I have not checked the .Internal)

Look in src/main/seq.c. It means that the first arg of rep is an
unimplemented type of SEXP. It is hard to guess what: it checks that it is
a vector or list.

> 3. I've had similar strange errors before and could not find the problem
>    in my own code. The problem finally went away after I renamed two
>    of the groups in my data such that the factor ordering changed and
>    the computations were performed in a different order...

Usually these indicate a problem with something being empty. What exactly
does l.meanboot.test return, under all possible inputs?  Your code is
trying to replicate whatever it does return (omitting NAs), and failing.

In the absence of a post-mortem debugger in R, traceback() is a very useful
tool, worth getting to grips with. I grepped the sources to find the
error message, something I resort to not infrequently.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tian@chico.ma.adfa.edu.au  Tue Aug 24 04:39:23 1999
From: tian@chico.ma.adfa.edu.au (tian@chico.ma.adfa.edu.au)
Date: Tue, 24 Aug 1999 05:39:23 +0200 (MET DST)
Subject: broken link in R FAQ page? (PR#255)
Message-ID: <199908240339.FAA16586@pubhealth.ku.dk>

When clicking "What machines does R run on" 
in the R FAQ page (http://lib.stat.cmu.edu/R/CRAN/doc/FAQ/R-FAQ.html)
what shows on the screen has nothing with the topic.

Is it a broken link?

Tian.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 24 10:43:06 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Aug 1999 11:43:06 +0200
Subject: broken link in R FAQ page? (PR#255)
In-Reply-To: tian@chico.ma.adfa.edu.au's message of "Tue, 24 Aug 1999 05:39:23 +0200 (MET DST)"
References: <199908240339.FAA16586@pubhealth.ku.dk>
Message-ID: <x2iu654iqd.fsf@blueberry.kubism.ku.dk>

tian@chico.ma.adfa.edu.au writes:

> When clicking "What machines does R run on" 
> in the R FAQ page (http://lib.stat.cmu.edu/R/CRAN/doc/FAQ/R-FAQ.html)
> what shows on the screen has nothing with the topic.
> 
> Is it a broken link?
> 
> Tian.

Hardly, it's in the same file... But something funny seems to be up
with HTML links ending in a '?'-mark. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 24 10:46:33 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Aug 1999 11:46:33 +0200
Subject: broken link in R FAQ page? (PR#255)
In-Reply-To: Peter Dalgaard BSA's message of "24 Aug 1999 11:43:06 +0200"
References: <199908240339.FAA16586@pubhealth.ku.dk> <x2iu654iqd.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2hflp4ikm.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > When clicking "What machines does R run on" 
...> 
> Hardly, it's in the same file... But something funny seems to be up
> with HTML links ending in a '?'-mark. 

...which lynx can handle, but Netscape not, apparently.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug 25 08:05:36 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 25 Aug 1999 09:05:36 +0200 (CEST)
Subject: broken link in R FAQ page? (PR#255)
In-Reply-To: <x2iu654iqd.fsf@blueberry.kubism.ku.dk>
References: <199908240339.FAA16586@pubhealth.ku.dk>
 <x2iu654iqd.fsf@blueberry.kubism.ku.dk>
Message-ID: <14275.38336.894809.677851@fangorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> tian@chico.ma.adfa.edu.au writes:
>> When clicking "What machines does R run on" 
>> in the R FAQ page (http://lib.stat.cmu.edu/R/CRAN/doc/FAQ/R-FAQ.html)
>> what shows on the screen has nothing with the topic.
>> 
>> Is it a broken link?
>> 
>> Tian.

> Hardly, it's in the same file... But something funny seems to be up
> with HTML links ending in a '?'-mark.

The HTML files are produced using recent versions of Texinfo's makeinfo
--html.  Karl Berry and I have had some discussions on what HTML output
without explicit info-like node structuring should be like, but we are
not there yet (apparently).  I will turn the `--no-headers' flag off
again when building the html version.

NOTE: in any case, this should not be a bug report on R.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Aug 25 10:00:29 1999
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Wed, 25 Aug 1999 11:00:29 +0200 (MET DST)
Subject: Error in ?text (PR#256)
Message-ID: <199908250900.LAA02396@pubhealth.ku.dk>

Just a minor point, but the adj argument in ?text is described wrongly
(0.64.1).  Perhaps the following might be added to the details.

     Values of 0, 0.5, and 1 specify left/top, middle and right/bottom,
     respectively.  The default is for centred text, ie \code{adj = c(0.5,
     0.5)}.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From weingessel@ci.tuwien.ac.at  Wed Aug 25 11:46:08 1999
From: weingessel@ci.tuwien.ac.at (weingessel@ci.tuwien.ac.at)
Date: Wed, 25 Aug 1999 12:46:08 +0200 (MET DST)
Subject: dimnames names lost when subscripting (PR#257)
Message-ID: <199908251046.MAA03884@pubhealth.ku.dk>

When subscripting an array with dimnames names, these names are lost.

For example:
> a <- array(0,c(2,2,2));
> dimnames(a)<-list(hansi=1:2, pepi=c("a","b"), karli=3:4)
> dimnames(a)
$hansi
[1] "1" "2"

$pepi
[1] "a" "b"

$karli
[1] "3" "4"

BUT

>  dimnames(a[,,1])
[[1]]
[1] "1" "2"

[[2]]
[1] "a" "b"




--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 status.rev = 0
 major = 0
 minor = 65.0
 year = 1999
 month = July
 day = 08
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 25 12:44:44 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 25 Aug 1999 13:44:44 +0200
Subject: Error in ?text (PR#256)
In-Reply-To: <199908250900.LAA02396@pubhealth.ku.dk>
 (J.C.Rougier@durham.ac.uk)
References: <199908250900.LAA02396@pubhealth.ku.dk>
Message-ID: <199908251144.NAA00485@sophie.ethz.ch>

>>>>> On Wed, 25 Aug 1999 11:00 (MET DST), J.C.Rougier@durham.ac.uk said:

    JonR> Just a minor point, but the adj argument in ?text is described
    JonR> wrongly (0.64.1).
What is wrong?
pre-0.65 has

 \arguments{
     ....

   \item{adj}{one or two numeric values which specify the x
     (and optionally y) adjustment of the labels.}

     ....
 }

    JonR> Perhaps the following might be added to the
    JonR> details.

okay, I'm about to add this:

    JonR>      Values of 0, 0.5, and 1 specify left/top, middle and
    JonR> right/bottom, respectively.  The default is for centred text, ie
    JonR> \code{adj = c(0.5, 0.5)}.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From BXC@NOVO.dk  Thu Aug 26 11:09:56 1999
From: BXC@NOVO.dk (BXC@NOVO.dk)
Date: Thu, 26 Aug 1999 12:09:56 +0200 (MET DST)
Subject: Greek letters in outer margins. (PR#258)
Message-ID: <199908261009.MAA13630@pubhealth.ku.dk>

When doing:

par(mfrow=c(2,2),mgp=c(2,1,0),mai=c(1,1,0.3,0.3)/1.5,oma=c(2,2,0,0))

for (i in 1:4) plot(rnorm(200),rnorm(200),ylab=" ",xlab=" ")

mtext(paste(expression(beta-alpha)),outer=T,side=1,line=0.5)
mtext(paste(expression(beta-gamma)),outer=T,side=2,line=0.5)
mtext("beta-alpha",outer=T,side=1,line=0.5)
mtext("beta-gamma",outer=T,side=2,line=0.5)

the greek letters appear in the margins of the last plot
whereas the plain text appear correctly in the outer margins.


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 status.rev = 0
 major = 0
 minor = 64.2
 year = 1999
 month = July
 day = 3
 language = R

Windows NT 4.0 (build 1381) Service Pack 4

Search Path:
 .GlobalEnv, Autoloads, package:base


                      \\\|///
                     \\ - - /
                     (  @ @ )  
+------------------o00o-(_)-o00o----------------------+
| Bendix Carstensen              tel: +45 44 43 87 38 |
| Senior Statistician            SDC: +45 44 43 90 42 |
| Steno Diabetes Center          fax: +45 44 43 82 32 |
| Niels Steensens Vej 2       e-mail: bxc@novo.dk     |
| DK - 2820 Gentofte                                  |
| Denmark                   Ooooo                     |
+------------------ooooO----(   )---------------------+
                   (   )     ) /
                    \ (     (_/
                     \_)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Aug 26 12:44:35 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 26 Aug 1999 13:44:35 +0200 (MET DST)
Subject: Error in ?text (PR#256)
Message-ID: <199908261144.NAA15003@pubhealth.ku.dk>

>>>>> On Thu, 26 Aug 1999 11:45:08 +0100 (BST), Jonathan Rougier <J.C.Rougier@durham.ac.uk> said:

    JonR> Hi Martin,
    JonR> On Wed, 25 Aug 1999, Martin Maechler wrote:

    JonR> Just a minor point, but the adj argument in ?text is described
    JonR> wrongly (0.64.1).
    >> What is wrong?
    >> pre-0.65 has
    >> 
    >> \arguments{
    >> ....
    >> 
    >> \item{adj}{one or two numeric values which specify the x
    >> (and optionally y) adjustment of the labels.}
    >> 
    >> ....
    >> }

    JonR> That's odd, because my ?text has the Arguments:

Well, it's not really odd.
As I said my version is "pre 0.65"  which is very much newer than
0.64.1.

This just means that the documentation for  text has been fixed since the
release of 0.64.1...

Thank you anyway for reporting it!
Martin

    JonR> x, y: numeric vectors of coordinates where the text
    JonR> `labels' should be written.  If the length of `x'
    JonR> and `y' differs, the shorter one is recycled.
 
    JonR> labels: character or expression with the text to be writ-
    JonR> ten.

    JonR> adj: character or expression with the text to be writ-
    JonR> ten.

    JonR> ...: further graphical parameters (from `par'), such as
    JonR> `cex', etc.
 
    JonR> Here's the spec. ...

    JonR> platform   sparc-sun-solaris2.5.1
    JonR> arch       sparc                 
    JonR> os         solaris2.5.1          
    JonR> system     sparc, solaris2.5.1   
    JonR> status                           
    JonR> status.rev 0                     
    JonR> major      0                     
    JonR> minor      64.1                  
    JonR> year       1999                  
    JonR> month      May                   
    JonR> day        8                     
    JonR> language   R                     

    JonR> Cheers, Jonathan.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jnf@pcisys.net  Sat Aug 28 22:23:27 1999
From: jnf@pcisys.net (jnf@pcisys.net)
Date: Sat, 28 Aug 1999 23:23:27 +0200 (MET DST)
Subject: R without X11? (PR#259)
Message-ID: <199908282123.XAA02173@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------DD49957419D60BCA65CC41EE
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
KDE installed but not gnome.  When I ran configure, it correctly
indicated that gnome is not installed.  However when I then ran make, I
received errors complaining that  the include file X11/X.h and similar
are not found.  Is X11 required for R?  If not, how can a work around
this?

I have attached the output of the configure and make commands with more
information.

Thanks for your help.

--

Jack Fenner

  I am life that wills to live in the midst of life that wills to live.
             - Albert Schweitzer, "Out of my Life and Thought"



--------------DD49957419D60BCA65CC41EE
Content-Type: text/plain; charset=us-ascii;
 name="create_R.script"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="create_R.script"

Script started on Sat Aug 28 09:13:36 1999
[root@noname R-0.64.2]# ./configure
loading cache ./config.cache
checking for a BSD compatible install... (cached) /usr/bin/install -c
checking whether ln -s works... (cached) yes
checking for ranlib... (cached) ranlib
checking for bison... no
checking for byacc... no
checking for ar... (cached) ar
checking for latex... (cached) /opt/teTeX/bin/latex
checking for dvips... (cached) /opt/teTeX/bin/dvips
checking for makeindex... (cached) /opt/teTeX/bin/makeindex
checking for unzip... (cached) /usr/bin/unzip
checking for zip... (cached) /usr/bin/zip
checking for perl... (cached) /usr/bin/perl
checking whether perl is perl 5... yes
checking for gcc... (cached) gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... (cached) yes
checking whether gcc accepts -g... (cached) yes
checking for g77... (cached) /usr/bin/g77
checking for underscore after Fortran symbols... yes
checking for sin in -lm... (cached) yes
checking for sin in -lmoto... (cached) no
checking for main in -lncurses... (cached) yes
checking for dlopen in -ldl... (cached) yes
checking for main in -lz... (cached) no
checking for main in -lhdf5... (cached) no
checking for main in -ldxml... (cached) no
checking for main in -lblas... (cached) no
checking for rl_callback_read_char in -lreadline... (cached) no
checking how to run the C preprocessor... (cached) gcc -E
checking for ANSI C header files... (cached) yes
checking for pid_t... (cached) yes
checking for vfork.h... (cached) no
checking for working vfork... (cached) yes
checking for vprintf... (cached) yes
checking for acosh... (cached) yes
checking for asinh... (cached) yes
checking for atanh... (cached) yes
checking for bcopy... (cached) yes
checking for finite... (cached) yes
checking for isfinite... (cached) no
checking for isnan... (cached) yes
checking for matherr... (cached) yes
checking for memcpy... (cached) yes
checking for memmove... (cached) yes
checking for regcomp... (cached) yes
checking for rint... (cached) yes
checking for strcoll... (cached) yes
checking for strtod... (cached) yes
checking for strtol... (cached) yes
checking for system... (cached) yes
checking for times... (cached) yes
checking for sigsetjmp... (cached) no
checking for siglongjmp... (cached) yes
checking for __setfpucw... (cached) no
checking for ANSI C header files... (cached) yes
checking for dl.h... (cached) no
checking for dlfcn.h... (cached) yes
checking for elf.h... (cached) yes
checking for locale.h... (cached) yes
checking for readline/history.h... (cached) no
checking for rpc/xdr.h... (cached) yes
checking for sys/times.h... (cached) yes
checking for time.h... (cached) yes
checking for ieeefp.h... (cached) no
checking for ieee754.h... (cached) yes
checking for unistd.h... (cached) yes
checking for hdf5.h... (cached) no
checking return type of signal handlers... (cached) void
checking for working const... (cached) yes
checking size of long... (cached) 4
checking for xmkmf... (cached) /usr/X11R6/bin/xmkmf
checking how to make shared libraries... done
checking for X... (cached) no
checking for lpr... (cached) lpr
creating ./config.status
creating Makeconf
creating Makefile
creating afm/Makefile
creating demos/Makefile
creating doc/Makefile
creating doc/keyword-test
creating doc/manual/Makefile
creating doc/manual/lib2tex
creating doc/manual/Reference.tex
creating doc/manual/Manual.tex
creating etc/Makefile
creating etc/Makeconf
creating src/Makefile
creating src/appl/Makefile
creating src/include/Makefile
creating src/library/Makefile
creating src/main/Makefile
creating src/nmath/Makefile
creating src/scripts/Makefile
creating src/unix/Makefile
creating src/gnome/Makefile
creating src/library/base/Makefile
creating src/library/profile/Makefile
creating src/library/eda/Makefile
creating src/library/eda/src/Makefile
creating src/library/lqs/Makefile
creating src/library/lqs/src/Makefile
creating src/library/modreg/Makefile
creating src/library/modreg/src/Makefile
creating src/library/mva/Makefile
creating src/library/mva/src/Makefile
creating src/library/stepfun/Makefile
creating src/scripts/COMPILE
creating src/scripts/INSTALL
creating src/scripts/REMOVE
creating src/scripts/R.sh
creating src/scripts/Rdconv
creating src/scripts/Rdindex
creating src/scripts/Rman2Rd
creating src/scripts/SHLIB
creating src/scripts/Sd2Rd
creating src/scripts/build-help
creating src/scripts/fwf2table
creating src/scripts/help.pretty
creating src/scripts/html2dos
creating src/scripts/Rd2contents
creating tests/Makefile
creating tests/Examples/Makefile
creating src/include/Platform.h
src/include/Platform.h is unchanged


R is now configured for i586-unknown-linux

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc -g -O2
  FORTRAN compiler:         g77 -O2
  Gnome support:            no

[root@noname R-0.64.2]# make
make[1]: Entering directory `/home/jack/R-0.64.2/afm'
make[1]: Leaving directory `/home/jack/R-0.64.2/afm'
make[1]: Entering directory `/home/jack/R-0.64.2/demos'
make[1]: Leaving directory `/home/jack/R-0.64.2/demos'
make[1]: Entering directory `/home/jack/R-0.64.2/doc'
make[1]: Leaving directory `/home/jack/R-0.64.2/doc'
make[1]: Entering directory `/home/jack/R-0.64.2/etc'
make[1]: Leaving directory `/home/jack/R-0.64.2/etc'
make[1]: Entering directory `/home/jack/R-0.64.2/src'
make[2]: Entering directory `/home/jack/R-0.64.2/src/include'
make[2]: Leaving directory `/home/jack/R-0.64.2/src/include'
make[2]: Entering directory `/home/jack/R-0.64.2/src/appl'
make[2]: Nothing to be done for `R'.
make[2]: Leaving directory `/home/jack/R-0.64.2/src/appl'
make[2]: Entering directory `/home/jack/R-0.64.2/src/nmath'
make[2]: Nothing to be done for `R'.
make[2]: Leaving directory `/home/jack/R-0.64.2/src/nmath'
make[2]: Entering directory `/home/jack/R-0.64.2/src/unix'
gcc -g -O2  -I../include -I../../src/include  -c dataentry.c
In file included from dataentry.c:24:
dataentry.h:22: X11/X.h: No such file or directory
dataentry.h:23: X11/Xlib.h: No such file or directory
dataentry.h:24: X11/Xutil.h: No such file or directory
dataentry.h:25: X11/keysym.h: No such file or directory
dataentry.h:26: X11/cursorfont.h: No such file or directory
make[2]: *** [dataentry.o] Error 1
make[2]: Leaving directory `/home/jack/R-0.64.2/src/unix'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/home/jack/R-0.64.2/src'
make: *** [R] Error 1
[root@noname R-0.64.2]# exit
exit

Script done on Sat Aug 28 09:14:32 1999

--------------DD49957419D60BCA65CC41EE--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sat Aug 28 23:38:25 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Sat, 28 Aug 1999 15:38:25 -0700 (PDT)
Subject: R without X11? (PR#259)
In-Reply-To: <199908282123.XAA02173@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9908281505420.597-100000@wompom.biostat.washington.edu>

On Sat, 28 Aug 1999 jnf@pcisys.net wrote:
> 
> 
> I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
> KDE installed but not gnome.  When I ran configure, it correctly
> indicated that gnome is not installed.  However when I then ran make, I
> received errors complaining that  the include file X11/X.h and similar
> are not found.  Is X11 required for R?  If not, how can a work around
> this?


X11 does seem to be required for R. Although there is a configure
option --without-x or --with-x=no, it doesn't appear to work.  

However, you do have X11 on your machine if you have KDE, and you
definitely do want to use X11 in R to get graphics.

 You may not have the X11 header files installed -- they should be
somewhere under /usr/X11 or /usr/include/X11.  If the header files aren't
installed then you will need to install them. They will be on your
distribution CD, perhaps in a package called something like x-devel.


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun Aug 29 05:44:18 1999
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Sun, 29 Aug 1999 14:44:18 +1000 (EST)
Subject: Compilation of R under Caldera OpenLinux 2.2
Message-ID: <199908290444.OAA03376@leonard.anu.edu.au>

On Sat, 28 Aug 1999 15:38:25 Thomas Lumley <thomas@biostat.washington.edu>
wrote:

> On Sat, 28 Aug 1999 jnf@pcisys.net wrote:
> > 
> > 
> > I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
> > KDE installed but not gnome.  When I ran configure, it correctly
> > indicated that gnome is not installed.  However when I then ran make, I
> > received errors complaining that  the include file X11/X.h and similar
> > are not found.
...

> However, you do have X11 on your machine if you have KDE, and you
> definitely do want to use X11 in R to get graphics.
> 
>  You may not have the X11 header files installed -- they should be
> somewhere under /usr/X11 or /usr/include/X11.  If the header files aren't
> installed then you will need to install them. They will be on your
> distribution CD, perhaps in a package called something like x-devel.

The needed files are in
  cdrom/Packages/RPMS/XFree86-devel-3.3.3.1-4.i386.rpm
This is also where one finds them under RedHat, except that the
file is XFree86-devel-3.3.3.1-49.i386.rpm and one needs the
path that is relevant to the RedHat distribution.

I have yet to check whether installing this package (as well as
g77-2.91.66-5.i386.rpm, which I installed earlier) is enough to
allow make to run to completion.  
[The XFree86-devel-3.3.3.1-4.i386.rpm on my home CD is corrupt.
Fortunately I have another disk at work, where the file seems
ok.]

Caldera OpenLinux 2.2 seems, aside from these immediate difficulties,
a product that is relatively novice-friendly.  It is a lot more
straightforward than RedHat to install and configure.  So it will
be useful to sort out how to set up R under it.

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun Aug 29 10:38:13 1999
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
Subject: Compiling R under Caldera Open Linux 2.2
Message-ID: <199908290938.TAA07841@leonard.anu.edu.au>

To: jnf@pcisys.net
Subject: Compilation of R under Caldera OpenLinux 2.2

> On Sat, 28 Aug 1999 jnf@pcisys.net wrote:
> > 
> > I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
> > KDE installed but not gnome.  When I ran configure, it correctly
> > indicated that gnome is not installed.  However when I then ran make, I
> > received errors complaining that  the include file X11/X.h and similar
> > are not found.
....
> However, you do have X11 on your machine if you have KDE, and you
> definitely do want to use X11 in R to get graphics.
> 
>  You may not have the X11 header files installed -- they should be
> somewhere under /usr/X11 or /usr/include/X11.  If the header files aren't
> installed then you will need to install them. They will be on your
> distribution CD, perhaps in a package called something like x-devel.

They are in the file Packages/RPMS/XFree86-devel-3.3.3.1-4.i386.rpm

(On the RedHat 6.0 distribution, there is
XFree86-devel-3.3.3.1-49.i386.rpm
which seems to be a later version.)

----------------------------------------------------------------
I have been wrestling with this also.  I had to install g77 from
the distribution CD, then the above rpm.
Having got this in order, I then received extensive output,
terminated by the following (which I have formatted on to
multiple lines):

gcc -export-dynamic -o ../../bin/R.X11 arithmetic.o array.o attrib.o
 bind.o builtin.o character.o coerce.o colors.o complex.o context.o
 cov.o cum.o debug.o devPS.o devPicTeX.o deparse.o deriv.o devices.o
 dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o format.o
 fourier.o gram.o gram-ex.o graphics.o iosupport.o list.o logic.o
 main.o match.o memory.o model.o names.o objects.o optimize.o
 options.o par.o paste.o platform.o plot.o plot3d.o plotmath.o
 print.o printarray.o printvector.o printutils.o random.o relop.o
 saveload.o scan.o seq.o sort.o source.o split.o subassign.o
 subscript.o subset.o summary.o unique.o util.o version.o
 ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE
 -L/usr/X11R6/lib -lX11 -L/usr/lib/gcc-lib/i386-linux/egcs-2.91.66
 -L/usr/i386-linux/lib -lg2c -lm -lg2c: -ldl -lm
 /usr/i386-linux/bin/ld: cannot open -lg2c: No such file or directory
make[3]: *** [../../bin/R.X11] Error 1 make[3]: Leaving directory
`/home/john/BUILD/src/main' make[2]: *** [R] Error 2 make[2]:
Leaving directory `/home/john/BUILD/src/main' make[1]: *** [R] Error
1 make[1]: Leaving directory `/home/john/BUILD/src' make: *** [R]
Error 1 

I have been unable to find anything on the distribution CD that
might answer to the lg2c.  Any clues would be welcome.

These difficulties aside, the Caldera OpenLinux 2.2 distribution
is much more novice-friendly than RedHat 6.0.  Configuration is
much quicker and more straightforward.


John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun Aug 29 10:38:49 1999
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sun, 29 Aug 1999 11:38:49 +0200 (MET DST)
Subject: Compiling R under Caldera Open Linux 2.2 (PR#260)
Message-ID: <199908290938.LAA03259@pubhealth.ku.dk>

To: jnf@pcisys.net
Subject: Compilation of R under Caldera OpenLinux 2.2

> On Sat, 28 Aug 1999 jnf@pcisys.net wrote:
> > 
> > I am attempting to compile R-0.64.2 under Caldera OpenLinux 2.2.  I have
> > KDE installed but not gnome.  When I ran configure, it correctly
> > indicated that gnome is not installed.  However when I then ran make, I
> > received errors complaining that  the include file X11/X.h and similar
> > are not found.
....
> However, you do have X11 on your machine if you have KDE, and you
> definitely do want to use X11 in R to get graphics.
> 
>  You may not have the X11 header files installed -- they should be
> somewhere under /usr/X11 or /usr/include/X11.  If the header files aren't
> installed then you will need to install them. They will be on your
> distribution CD, perhaps in a package called something like x-devel.

They are in the file Packages/RPMS/XFree86-devel-3.3.3.1-4.i386.rpm

(On the RedHat 6.0 distribution, there is
XFree86-devel-3.3.3.1-49.i386.rpm
which seems to be a later version.)

----------------------------------------------------------------
I have been wrestling with this also.  I had to install g77 from
the distribution CD, then the above rpm.
Having got this in order, I then received extensive output,
terminated by the following (which I have formatted on to
multiple lines):

gcc -export-dynamic -o ../../bin/R.X11 arithmetic.o array.o attrib.o
 bind.o builtin.o character.o coerce.o colors.o complex.o context.o
 cov.o cum.o debug.o devPS.o devPicTeX.o deparse.o deriv.o devices.o
 dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o format.o
 fourier.o gram.o gram-ex.o graphics.o iosupport.o list.o logic.o
 main.o match.o memory.o model.o names.o objects.o optimize.o
 options.o par.o paste.o platform.o plot.o plot3d.o plotmath.o
 print.o printarray.o printvector.o printutils.o random.o relop.o
 saveload.o scan.o seq.o sort.o source.o split.o subassign.o
 subscript.o subset.o summary.o unique.o util.o version.o
 ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE
 -L/usr/X11R6/lib -lX11 -L/usr/lib/gcc-lib/i386-linux/egcs-2.91.66
 -L/usr/i386-linux/lib -lg2c -lm -lg2c: -ldl -lm
 /usr/i386-linux/bin/ld: cannot open -lg2c: No such file or directory
make[3]: *** [../../bin/R.X11] Error 1 make[3]: Leaving directory
`/home/john/BUILD/src/main' make[2]: *** [R] Error 2 make[2]:
Leaving directory `/home/john/BUILD/src/main' make[1]: *** [R] Error
1 make[1]: Leaving directory `/home/john/BUILD/src' make: *** [R]
Error 1 

I have been unable to find anything on the distribution CD that
might answer to the lg2c.  Any clues would be welcome.

These difficulties aside, the Caldera OpenLinux 2.2 distribution
is much more novice-friendly than RedHat 6.0.  Configuration is
much quicker and more straightforward.


John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Aug 29 11:59:06 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Aug 1999 12:59:06 +0200
Subject: Compiling R under Caldera Open Linux 2.2 (PR#260)
In-Reply-To: john.maindonald@anu.edu.au's message of "Sun, 29 Aug 1999 11:38:49 +0200 (MET DST)"
References: <199908290938.LAA03259@pubhealth.ku.dk>
Message-ID: <x2emgmua2t.fsf@blueberry.kubism.ku.dk>

john.maindonald@anu.edu.au writes:

>  -L/usr/X11R6/lib -lX11 -L/usr/lib/gcc-lib/i386-linux/egcs-2.91.66
>  -L/usr/i386-linux/lib -lg2c -lm -lg2c: -ldl -lm
>  /usr/i386-linux/bin/ld: cannot open -lg2c: No such file or directory
...
> I have been unable to find anything on the distribution CD that
> might answer to the lg2c.  Any clues would be welcome.

Hmm. Redhat has the g2c stuff in 

/usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/include/g2c.h
/usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/libg2c.a

Generally, the file comes with the EGCS g77 (egcs-g77-1.1.2-12 here).
Try 'locate g2c' and if that fails go through the RPMS on the CD with

rpm -qlp /path/to/RPMS/*.rpm | grep g2c

> These difficulties aside, the Caldera OpenLinux 2.2 distribution
> is much more novice-friendly than RedHat 6.0.  Configuration is
> much quicker and more straightforward.

- except for developers, it would seem....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gautier@lion-ag.de  Mon Aug 30 12:28:54 1999
From: gautier@lion-ag.de (gautier@lion-ag.de)
Date: Mon, 30 Aug 1999 13:28:54 +0200 (MET DST)
Subject: interface w/ emacs (PR#261)
Message-ID: <199908301128.NAA11318@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: 0.65.0
OS: mips SGI-Irix 6.5
Submission from: (NULL) (195.110.4.98)


Using R through emacs with ess5.1.8, I cannot set R workspace (--vsize and
--nsize).

So far I was using R0.64.2 without such a problem. I am aware my bug report is a
bit light,
but just let me know if anything I could do with my R and emacs would be of any
help for\
specifying better what is the bug (if there is a bug...)


To reproduce the problem :
with emacs 20.3.3

C-u M-x R
(when asked the arguments) --nsize whatever --vsize whatever

(check in R what is the workspace)

gc()





Laurent

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 30 13:08:44 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Aug 1999 14:08:44 +0200
Subject: interface w/ emacs (PR#261)
In-Reply-To: gautier@lion-ag.de's message of "Mon, 30 Aug 1999 13:28:54 +0200 (MET DST)"
References: <199908301128.NAA11318@pubhealth.ku.dk>
Message-ID: <x2vh9xjws3.fsf@blueberry.kubism.ku.dk>

gautier@lion-ag.de writes:

> So far I was using R0.64.2 without such a problem. I am aware my bug report is a
> bit light,
> but just let me know if anything I could do with my R and emacs would be of any
> help for\
> specifying better what is the bug (if there is a bug...)

There's a bug alright...

The problem is also displayed when starting from the command line with

 R --no-readline --vsize 10M 

(but not with --no-readline last) 

A passable workaround would seem to be to 'M-x setenv' R_VSIZE and
R_NSIZE before 'M-x R'.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 30 13:25:56 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 30 Aug 1999 13:25:56 +0100 (BST)
Subject: interface w/ emacs (PR#261)
In-Reply-To: <x2vh9xjws3.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9908301322200.23731-100000@auk.stats>

On 30 Aug 1999, Peter Dalgaard BSA wrote:

> gautier@lion-ag.de writes:
> 
> > So far I was using R0.64.2 without such a problem. I am aware my bug report is a
> > bit light,
> > but just let me know if anything I could do with my R and emacs would be of any
> > help for\
> > specifying better what is the bug (if there is a bug...)
> 
> There's a bug alright...

Yes, will commit a patch for R-release shortly

> The problem is also displayed when starting from the command line with
> 
>  R --no-readline --vsize 10M 
> 
> (but not with --no-readline last) 
> 
> A passable workaround would seem to be to 'M-x setenv' R_VSIZE and
> R_NSIZE before 'M-x R'.

It might be easier to use .Renviron to set these.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 30 13:50:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 30 Aug 1999 13:50:47 +0100 (BST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <XFMail.990830135718.awol@xs4all.nl>
Message-ID: <Pine.GSO.4.05.9908301344510.25686-100000@auk.stats>

On Mon, 30 Aug 1999, Alexander Volovics wrote:

> Have just compiled and installed R-65.0 on RH 6.0 with all the latest
> updates for RH and Gnome (including `libglade-0.3-1.i386.rpm' and
> `libglade-devel-0.3-1.i386.rpm' from RH ftp).
> 
> R.X11 works OK.
> 
> But when I try `R --gnome' I get a segmentation fault/core dump
> with the messages:
> 
> Gdk-CRITICAL **: file gdkfont.c: line 174 (gdk_font_id): assertion `font
> != NULL' failed.
> 
> Gdk-CRITICAL **: file gdkfont.c: line 133 (gdk_font_ref): assertion `font
> != NULL' failed.
> 
> .................etc., etc.
> 
> 1) `gdb' shows (for what it is worth):
>    Core was generated by `/usr/local/R65/lib/R/bin/R.gnome'
>    #0  0x4024034d in gtk_text_size_request ()
> 
> 2) I can't find the file `gdkfont.c' anywhere on my system.
>    Should I be able to and if so can anybody tell me which package/library
>    contains `gdkfont.c' ?

(it is in the source for libgdk).

> Is this my stupidity or worth reporting as a bug or already known?

Have you upgraded all the rpms mentioned in the INSTALL? It is possible
I suppose that you have too recent versions, as well as possible that
you have too old ones.  That does work on both my RH6.0 systems, and it
was critical that I upgraded the gtk+ packages; before I did I got similar
problems.

I have moved this to R-devel, as a more appropriate place IMHO.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From awol@xs4all.nl  Mon Aug 30 15:32:08 1999
From: awol@xs4all.nl (Alexander Volovics)
Date: Mon, 30 Aug 1999 16:32:08 +0200 (CEST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <Pine.GSO.4.05.9908301344510.25686-100000@auk.stats>
Message-ID: <XFMail.990830163208.awol@xs4all.nl>


On 30-Aug-99 Prof Brian D Ripley wrote:

>> 2) I can't find the file `gdkfont.c' anywhere on my system.
>>    Should I be able to and if so can anybody tell me which
>>    package/library contains `gdkfont.c' ?
 
> (it is in the source for libgdk).

Thanks for your quick reply.

Libgdk? 
The only packages I know of with gdk/libgdk files
are `gtk+' and `gtk+10' and neither contain `gdkfont.c'.

> Have you upgraded all the rpms mentioned in the INSTALL? It is possible
> I suppose that you have too recent versions, as well as possible that
> you have too old ones.  That does work on both my RH6.0 systems, and it
> was critical that I upgraded the gtk+ packages; before I did I got
> similar problems.

This is what I have:

gnome-libs-1.0.12-1 & gnome-libs-devel-1.0.12-1
gtk+-1.2.3-1 & gtk+-devel-1.2.3-1
gtk+10-1.0.6-5
glib-1.2.3-1 & glib-devel-1.2.3-1
libglade-0.3-1 & libglade-devel-0.3-1
libxml-1.4.0-1 & libxml-devel-1.4.0-1


On 30-Aug-99 Peter Dalgaard wrote:

> Didn't happen for me. Almost identical setup, except that I had a
> libglade straight from 
> ftp://ftp.daa.com.au/pub/james/gnome/
> there's a 0.4 version of libglade as of last Wednesday.

I had already downloaded that one. If nothing else is wrong I will
try that.
 

*************************************
Alexander Volovics
Dept of Methodology & Statistics
Maastricht University, Maastricht, NL
*************************************
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 30 16:12:01 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 30 Aug 1999 16:12:01 +0100 (BST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <XFMail.990830163208.awol@xs4all.nl>
Message-ID: <Pine.GSO.4.05.9908301605150.25844-100000@auk.stats>

On Mon, 30 Aug 1999, Alexander Volovics wrote:

> 
> On 30-Aug-99 Prof Brian D Ripley wrote:
> 
> >> 2) I can't find the file `gdkfont.c' anywhere on my system.
> >>    Should I be able to and if so can anybody tell me which
> >>    package/library contains `gdkfont.c' ?
>  
> > (it is in the source for libgdk).
> 
> Thanks for your quick reply.
> 
> Libgdk? 
> The only packages I know of with gdk/libgdk files
> are `gtk+' and `gtk+10' and neither contain `gdkfont.c'.

No, binary rpms will not contain source files, will they?

> > Have you upgraded all the rpms mentioned in the INSTALL? It is possible
> > I suppose that you have too recent versions, as well as possible that
> > you have too old ones.  That does work on both my RH6.0 systems, and it
> > was critical that I upgraded the gtk+ packages; before I did I got
> > similar problems.
> 
> This is what I have:
> 
> gnome-libs-1.0.12-1 & gnome-libs-devel-1.0.12-1
> gtk+-1.2.3-1 & gtk+-devel-1.2.3-1
> gtk+10-1.0.6-5
> glib-1.2.3-1 & glib-devel-1.2.3-1
> libglade-0.3-1 & libglade-devel-0.3-1
> libxml-1.4.0-1 & libxml-devel-1.4.0-1

That's a later gnome-libs than I have.

> On 30-Aug-99 Peter Dalgaard wrote:
> 
> > Didn't happen for me. Almost identical setup, except that I had a
> > libglade straight from 
> > ftp://ftp.daa.com.au/pub/james/gnome/
> > there's a 0.4 version of libglade as of last Wednesday.
> 
> I had already downloaded that one. If nothing else is wrong I will
> try that.

libglade is not actually used in 0.65.0, I believe. I was using the
libglade-0.3 straight from the source.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 30 16:16:23 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Aug 1999 17:16:23 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Mon, 30 Aug 1999 16:32:08 +0200 (CEST)"
References: <XFMail.990830163208.awol@xs4all.nl>
Message-ID: <x2ogfpjo3c.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> Libgdk? 
> The only packages I know of with gdk/libgdk files
> are `gtk+' and `gtk+10' and neither contain `gdkfont.c'.

Try 'nm /usr/lib/libgdk.a | grep font' and I think you will see the light...

> > Have you upgraded all the rpms mentioned in the INSTALL? It is possible
> > I suppose that you have too recent versions, as well as possible that
> > you have too old ones.  That does work on both my RH6.0 systems, and it
> > was critical that I upgraded the gtk+ packages; before I did I got
> > similar problems.
> 
> This is what I have:
> 
> gnome-libs-1.0.12-1 & gnome-libs-devel-1.0.12-1
> gtk+-1.2.3-1 & gtk+-devel-1.2.3-1
> gtk+10-1.0.6-5
> glib-1.2.3-1 & glib-devel-1.2.3-1
> libglade-0.3-1 & libglade-devel-0.3-1
> libxml-1.4.0-1 & libxml-devel-1.4.0-1

Builds and runs (i.e. doesn't crash at startup and runs
demo(graphics)) for me with

gnome-libs-1.0.11-1
gnome-libs-devel-1.0.11-1
gtk+-1.2.3-1
gtk+-1.2.3-1
gtk+10-1.0.6-5
glib-1.2.3-1
glib-devel-1.2.3-1
libglade-0.4-SNAP
libglade-devel-0.4-SNAP
libxml-1.4.0-1
libxml-devel-1.4.0-1
libxml10-1.0.0-1

I'd say libglade is the culprit...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From awol@xs4all.nl  Tue Aug 31 10:46:27 1999
From: awol@xs4all.nl (Alexander Volovics)
Date: Tue, 31 Aug 1999 11:46:27 +0200 (CEST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
Message-ID: <XFMail.990831114627.awol@xs4all.nl>

On 30-Aug-99 I wrote: 

>> Libgdk? 
>> The only packages I know of with gdk/libgdk files
>> are `gtk+' and `gtk+10' and neither contain `gdkfont.c'.

To which Prof Brian D Ripley and Peter Dalgaard replied:

> No, binary rpms will not contain source files, will they?

> Try 'nm /usr/lib/libgdk.a | grep font' and I think you will see the
> light...

I (just barely, as a non programmer) know the differences between
foo.c, foo.o, foo.h, foo.a files but I got carried away (non thinkingly)
by the error messages:

  Gdk-CRITICAL **: file gdkfont.c: line 174 (gdk_font_id): assertion
  `font != NULL' failed.

However what has `gdkfont.c' got to do with it in THIS context?

Further I wrote:

>> This is what I have:
>> gnome-libs-1.0.12-1 & gnome-libs-devel-1.0.12-1
>> gtk+-1.2.3-1 & gtk+-devel-1.2.3-1
>> gtk+10-1.0.6-5
>> glib-1.2.3-1 & glib-devel-1.2.3-1
>> libglade-0.3-1 & libglade-devel-0.3-1
>> libxml-1.4.0-1 & libxml-devel-1.4.0-1

To which Prof Brian D Ripley and Peter Dalgaard replied:

> That's a later gnome-libs than I have.
 
> libglade-0.4-SNAP
> libglade-devel-0.4-SNAP
> I'd say libglade is the culprit...

I have just made the libglade-0.4-SNAP and libglade-devel-0.4-SNAP rpm's
and recompiled R-0.65.0. The same thing happens with `R --gnome', namely:
Segmentation fault (core dumped), with the same error messages.

So the culprit is not libglade but maybe `gnome-libs-1.0.12-1' given that
you both have an earlier gnome-libs. Or maybe even something else.

I am not going to pursue this further as it takes too much time. I was just
curious how the R gnome interface had progressed.

Thank you both very much for taking the time to respond.

Should I report it as a bug or is it not worth it given the
`moving target' status of the gnome libs and the `work in progress'
status of the R gnome interface?


*************************************
Alexander Volovics
Dept of Methodology & Statistics
Maastricht University, Maastricht, NL
*************************************
  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 11:03:28 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 12:03:28 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 11:46:27 +0200 (CEST)"
References: <XFMail.990831114627.awol@xs4all.nl>
Message-ID: <x2671w9si7.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> Should I report it as a bug or is it not worth it given the
> `moving target' status of the gnome libs and the `work in progress'
> status of the R gnome interface?

Probably the latter. A note to R-devel should suffice to get the
immediate attention. When we get around to working through the bug
repository, the world may look completely different. 

One thing, btw. What happens if you run

bin/R -d gdb
(gdb) run --gnome
<<crash>>
(gdb) bt
<<stack trace telling us what was the call>>
(gdb) up
<<possibly repeat until inside R>>
(gdb) l

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Tue Aug 31 13:47:23 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 31 Aug 1999 05:47:23 -0700
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 11:46:27 +0200 (CEST)"
References: <XFMail.990831114627.awol@xs4all.nl>
Message-ID: <87pv042k2s.fsf@alpha.cfas.washington.edu>


>>>>> "AV" == Alexander Volovics <awol@xs4all.nl> writes:

    AV> I (just barely, as a non programmer) know the differences
    AV> between foo.c, foo.o, foo.h, foo.a files but I got carried
    AV> away (non thinkingly) by the error messages:

    AV>   Gdk-CRITICAL **: file gdkfont.c: line 174 (gdk_font_id):
    AV>   assertion `font != NULL' failed.

    AV> However what has `gdkfont.c' got to do with it in THIS
    AV> context?

This says that it couldn't find a font it was looking for.  

Gnome is pretty half-hazard.  It's nice when it works, but can't be
trusted -- for instance, out of 6 identically configured Debian
machines, I can run gnome-session on startup on 4, but I _always_ get
name-service errors (with fatal halts) on the other 2.    (Debian's
slightly behind, but problem and bug reports on the Gnome list are
still a bit too often for my liking).

Even though I'm using it as my default GUI, I'd trust gnome about as
far as I can throw it (the bits, not the machines :-)...  It's still
somewhat unstable.

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From awol@xs4all.nl  Tue Aug 31 14:03:06 1999
From: awol@xs4all.nl (Alexander Volovics)
Date: Tue, 31 Aug 1999 15:03:06 +0200 (CEST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <x2671w9si7.fsf@blueberry.kubism.ku.dk>
Message-ID: <XFMail.990831150306.awol@xs4all.nl>


On 31-Aug-99 Peter Dalgaard BSA wrote:

> One thing, btw. What happens if you run
> 
> bin/R -d gdb
> (gdb) run --gnome
> <<crash>>
> (gdb) bt
> <<stack trace telling us what was the call>>
> (gdb) up
> <<possibly repeat until inside R>>
> (gdb) l


This does not work.

`R -d gdb' opens in gdb allright but then you get:
(gdb) run --gnome
Starting program: /usr/local/R65/lib/R/bin/R.X11 --gnome
WARNING: unknown option --gnome

I have not found a way to start R.gnome with `-d gdb' yet.


*************************************
Alexander Volovics
Dept of Methodology & Statistics
Maastricht University, Maastricht, NL
*************************************
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 31 14:42:48 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 31 Aug 1999 15:42:48 +0200
Subject: Suggestion for  qqplot() improvement
In-Reply-To: <199908311257.OAA00978@erna-w.ethz.ch> (message from Werner
 Stahel on Tue, 31 Aug 1999 14:57:21 +0200)
References: <199908311257.OAA00978@erna-w.ethz.ch>
Message-ID: <199908311342.PAA01425@sophie.ethz.ch>

>>>>> On Tue, 31 Aug 1999 14:57, Werner Stahel <stahel@stat.math.ethz.ch> said:

    WSt> Here is a suggestion.  It seems that qqplots, comparing a sample
    WSt> to a distribution other than the normal, are not explicitly
    WSt> available in S or R. I found

(in S-plus / Trellis it is, see below)

    WSt>	   qqplot(y, rt(300, df = 5))

    WSt> as an example in the help file to  qqplot .
    WSt> This is not very sensible. 

(it only tried to show that you can QQ-plot two datasets 
 of *different* length, rather than anything else)

    WSt> I would prefer

    WSt>   n <- length(y)
    WSt>   qqplot(qt((1:n)/(n+1), df=5), y, xlab='quantiles', ylab='data')

yes, for comparison with a theoretical distribution.

Maybe even
      qqplot(qt(ppoints(n), df=5), y, 
	     xlab='quantiles of t(* ,df=5)', ylab='data')

    WSt> and this could be shortened to

    WSt>   qqplot(y, distribution='t', df=5)

    WSt> with an easy extension of the function.

I found:

   Trellis in S-plus has
	    qqmath(formula, distribution = qnorm, f.value = ppoints, ...),
   for your example
        qqmath( ~ y, distribution = function(p) qt(p, df=5), ...)

which is slightly more general (also works with panels, banking to 45
deg,..) but quite a bit more complicated to use for non-sophisticated users.

What should we do / would we want for R?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 15:00:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 16:00:55 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 15:03:06 +0200 (CEST)"
References: <XFMail.990831150306.awol@xs4all.nl>
Message-ID: <x21zck9hig.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> On 31-Aug-99 Peter Dalgaard BSA wrote:
> 
> > One thing, btw. What happens if you run
> > 
> > bin/R -d gdb
> > (gdb) run --gnome
> > <<crash>>
> > (gdb) bt
> > <<stack trace telling us what was the call>>
> > (gdb) up
> > <<possibly repeat until inside R>>
> > (gdb) l
> 
> 
> This does not work.
> 
> `R -d gdb' opens in gdb allright but then you get:
> (gdb) run --gnome
> Starting program: /usr/local/R65/lib/R/bin/R.X11 --gnome
> WARNING: unknown option --gnome

D**n. I forgot that --gnome is processed by the startup script, not the
binary. Sorry.

> I have not found a way to start R.gnome with `-d gdb' yet.

R --gnome -d gdb 

seems to work.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 15:56:48 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 16:56:48 +0200
Subject: Suggestion for  qqplot() improvement
In-Reply-To: Martin Maechler's message of "Tue, 31 Aug 1999 15:42:48 +0200"
References: <199908311257.OAA00978@erna-w.ethz.ch> <199908311342.PAA01425@sophie.ethz.ch>
Message-ID: <x2zoz880cv.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> Maybe even
>       qqplot(qt(ppoints(n), df=5), y, 
> 	     xlab='quantiles of t(* ,df=5)', ylab='data')
> 
>     WSt> and this could be shortened to
> 
>     WSt>   qqplot(y, distribution='t', df=5)
> 
>     WSt> with an easy extension of the function.
> 
> I found:
> 
>    Trellis in S-plus has
> 	    qqmath(formula, distribution = qnorm, f.value = ppoints, ...),
>    for your example
>         qqmath( ~ y, distribution = function(p) qt(p, df=5), ...)
> 
> which is slightly more general (also works with panels, banking to 45
> deg,..) but quite a bit more complicated to use for non-sophisticated users.
> 
> What should we do / would we want for R?

Lets see. "qqplot(qt, y, df=5)" would be tempting save for the
complexities of separating parts of ... intended for the quantile
function from those intended for the plotting. 


We could "easily" have qqplot(y, distrib=qt(p,df=5)), here's a
simplified variant:
                       
f <- function(y,distrib){
    p <- ppoints(length(y))
    x <- eval(eval(substitute(substitute(distrib)),list(p=p)))
    qqplot(x,y,
        xlab=deparse(substitute(distrib)),
        ylab=deparse(substitute(y)))
}

f(rnorm(100), distrib=qt(p,df=2))

The form, e.g., qqplot(qt, y, df=5, lty=3) may not be *all* that hard
to set up. It's just necessary to manipulate the argument list,
somewhat along the lines of

g <- function(p,...){
    l<-list(...)
    m<-match(names(l), names(formals(qt)))
    do.call("qt", c(list(p=p), l[!is.na(m)]))    
}

which is just a long-winded version of qt, except that it strips off
unused arguments. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 31 16:12:39 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 31 Aug 1999 16:12:39 +0100 (BST)
Subject: Suggestion for  qqplot() improvement
In-Reply-To: <x2zoz880cv.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9908311605490.7922-100000@auk.stats>

On 31 Aug 1999, Peter Dalgaard BSA wrote:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > Maybe even
> >       qqplot(qt(ppoints(n), df=5), y, 
> > 	     xlab='quantiles of t(* ,df=5)', ylab='data')
> > 
> >     WSt> and this could be shortened to
> > 
> >     WSt>   qqplot(y, distribution='t', df=5)
> > 
> >     WSt> with an easy extension of the function.
> > 
> > I found:
> > 
> >    Trellis in S-plus has
> > 	    qqmath(formula, distribution = qnorm, f.value = ppoints, ...),
> >    for your example
> >         qqmath( ~ y, distribution = function(p) qt(p, df=5), ...)
> > 
> > which is slightly more general (also works with panels, banking to 45
> > deg,..) but quite a bit more complicated to use for non-sophisticated users.
> > 
> > What should we do / would we want for R?
> 
> Lets see. "qqplot(qt, y, df=5)" would be tempting save for the
> complexities of separating parts of ... intended for the quantile
> function from those intended for the plotting. 
> 
> 
> We could "easily" have qqplot(y, distrib=qt(p,df=5)), here's a
> simplified variant:
>                        
> f <- function(y,distrib){
>     p <- ppoints(length(y))
>     x <- eval(eval(substitute(substitute(distrib)),list(p=p)))
>     qqplot(x,y,
>         xlab=deparse(substitute(distrib)),
>         ylab=deparse(substitute(y)))
> }
> 
> f(rnorm(100), distrib=qt(p,df=2))
> 
> The form, e.g., qqplot(qt, y, df=5, lty=3) may not be *all* that hard
> to set up. It's just necessary to manipulate the argument list,
> somewhat along the lines of
> 
> g <- function(p,...){
>     l<-list(...)
>     m<-match(names(l), names(formals(qt)))
>     do.call("qt", c(list(p=p), l[!is.na(m)]))    
> }
> 
> which is just a long-winded version of qt, except that it strips off
> unused arguments. 

If it helps, surf.gls in my spatial library does almost precisely that in
the parent, that is matches up those arguments that apply to the (here)
distrib argument and packages a function to do the work. (It is a bit more
than is needed here, as that needs to return the function for future use or
(once) to pass to call_S.)  So I don't think it is hard (the second time).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 16:15:47 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 17:15:47 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 16:40:30 +0200 (CEST)"
References: <XFMail.990831164030.awol@xs4all.nl>
Message-ID: <x2yaes7zh8.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> Program received signal SIGSEGV, Segmentation fault.
> 0x4024034d in gtk_text_size_request ()
> (gdb) bt
> #0  0x4024034d in gtk_text_size_request ()
> #1  0x40266695 in gtk_marshal_NONE__POINTER ()
> #2  0x4022d2ab in gtk_signal_real_emit ()
> #3  0x4022b6c0 in gtk_signal_emit ()
> #4  0x4025d298 in gtk_widget_size_request ()
> #5  0x4023ca3a in gtk_table_size_request_init ()
> #6  0x4023c569 in gtk_table_size_request ()
> #7  0x40266695 in gtk_marshal_NONE__POINTER ()
> #8  0x4022d2ab in gtk_signal_real_emit ()
> #9  0x4022b6c0 in gtk_signal_emit ()
> #10 0x4025d298 in gtk_widget_size_request ()
> #11 0x400af7d0 in gnome_dock_size_request ()
> #12 0x40266695 in gtk_marshal_NONE__POINTER ()
> #13 0x4022d2ab in gtk_signal_real_emit ()
> #14 0x4022b6c0 in gtk_signal_emit ()
> #15 0x4025d298 in gtk_widget_size_request ()
> #16 0x4025366e in gtk_vbox_size_request ()
> #17 0x40266695 in gtk_marshal_NONE__POINTER ()
> #18 0x4022d2ab in gtk_signal_real_emit ()
> #19 0x4022b6c0 in gtk_signal_emit ()
> #20 0x4025d298 in gtk_widget_size_request ()
> #21 0x40264c77 in gtk_window_size_request ()
> #22 0x40266695 in gtk_marshal_NONE__POINTER ()
> #23 0x4022d2ab in gtk_signal_real_emit ()
> #24 0x4022b6c0 in gtk_signal_emit ()
> #25 0x4025d298 in gtk_widget_size_request ()
> #26 0x402659fc in gtk_window_move_resize ()
> #27 0x4026591e in gtk_window_check_resize ()
> #28 0x402667eb in gtk_marshal_NONE__NONE ()
> #29 0x4022d428 in gtk_signal_real_emit ()
> #30 0x4022b6c0 in gtk_signal_emit ()
> #31 0x401c5df8 in gtk_container_check_resize ()
> #32 0x40264744 in gtk_window_show ()
> #33 0x4008a7b0 in gnome_app_show ()
> #34 0x402667eb in gtk_marshal_NONE__NONE ()
> #35 0x4022d2ab in gtk_signal_real_emit ()
> #36 0x4022b6c0 in gtk_signal_emit ()
> #37 0x4025b230 in gtk_widget_show ()
> #38 0x401c78d4 in gtk_container_show_all ()
> ---Type <return> to continue, or q <return> to quit---
> #39 0x4025b7d6 in gtk_widget_show_all ()
> #40 0x80cd79b in R_gtk_terminal_new () at terminal.c:112
> #41 0x80c8481 in main (ac=1, av=0xbffffbc4) at system.c:314
> #42 0x4042acb3 in __libc_start_main (main=0x80c831c <main>, argc=1, 
>     argv=0xbffffbc4, init=0x8058934 <_init>, fini=0x810319c <_fini>, 
>     rtld_fini=0x4000a350 <_dl_fini>, stack_end=0xbffffbbc)
>     at ../sysdeps/generic/libc-start.c:78
> (gdb) up
> #1  0x40266695 in gtk_marshal_NONE__POINTER ()
> (gdb) up
> #2  0x4022d2ab in gtk_signal_real_emit ()
> (gdb) up
> #3  0x4022b6c0 in gtk_signal_emit ()
> (gdb) up
....
> #40 0x80cd79b in R_gtk_terminal_new () at terminal.c:112
> 112       gtk_widget_show_all(R_gtk_main_window);
> (gdb) up
> #41 0x80c8481 in main (ac=1, av=0xbffffbc4) at system.c:314
> 314         R_gtk_terminal_new();
> (gdb) up
> #42 0x4042acb3 in __libc_start_main (main=0x80c831c <main>, argc=1, 
>     argv=0xbffffbc4, init=0x8058934 <_init>, fini=0x810319c <_fini>, 
>     rtld_fini=0x4000a350 <_dl_fini>, stack_end=0xbffffbbc)
>     at ../sysdeps/generic/libc-start.c:78
> ../sysdeps/generic/libc-start.c:78: No such file or directory.
> (gdb) up
> Initial frame selected; you cannot go up.
> (gdb) l
> ../sysdeps/generic/libc-start.c:73: No such file or directory.
.
> What is the meaning of `up'. It just goes all the way back to the
> `beginning' and does not `reenter' R ?

It goes back through the list of function calls. This allows you to
inspect variables, etc.

> Does this tell you anything. No core file was produced this way.
> 
> If I have done it wrong please ask again. I have no real understanding
> of how gdb works.

What would interest me is what the content of R_gnome_userprefs.font
if you go up to #40 (in R_gtk_terminal_new () at terminal.c:112). Just
type 

p R_gnome_userprefs.font

if it's NULL, then we might have a lead on the problem. But Lyndon
Drake is the guy who knows his way around the Gnome stuff, not me.

What is in your .gnome/R.gnome file, by the way?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 31 17:24:18 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 31 Aug 1999 17:24:18 +0100 (BST)
Subject: Suggestion for  qqplot() improvement
In-Reply-To: <Pine.GSO.4.05.9908311605490.7922-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.9908311713310.8158-100000@auk.stats>

(Martin Maechler quoting Werner Stahel, I think)

> Maybe even
>       qqplot(qt(ppoints(n), df=5), y, 
> 	     xlab='quantiles of t(* ,df=5)', ylab='data')
> 
>     WSt> and this could be shortened to
> 
>     WSt>   qqplot(y, distribution='t', df=5)
> 
>     WSt> with an easy extension of the function.

Would qqplot(qt, y, df=5) or qqplot("t", y, df=5) with the following do
what you want?  As plot warns about surplus arguments, I have removed them
from the ... in its call.

qqplot <- function (x, y, plot.it = TRUE, xlab = deparse(substitute(x)), 
    ylab = deparse(substitute(y)), ...) 
{
    xlab
    sy <- sort(y)
    leny <- length(sy)
    dots <- list(...)
    if(is.character(x)) x <- get(paste("q", x, sep=""))
    if(is.function(x)) {
        fn <- x
        formals(fn) <- c(formals(fn), "..." = list(NULL))
        sx <- fn(ppoints(leny), ...)
        dots <- dots[!match(names(dots), names(formals(x)), FALSE)]
    } else {    
        sx <- sort(x)
        lenx <- length(sx)
        if (leny < lenx) sx <- approx(1:lenx, sx, n = leny)$y
        if (leny > lenx) sy <- approx(1:leny, sy, n = lenx)$y
    }
    if (plot.it) 
        do.call("plot", c(list(sx, sy, xlab = xlab, ylab = ylab), dots))
    invisible(list(x = sx, y = sy))
}


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 17:48:42 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 18:48:42 +0200
Subject: Suggestion for  qqplot() improvement
In-Reply-To: Prof Brian D Ripley's message of "Tue, 31 Aug 1999 17:24:18 +0100 (BST)"
References: <Pine.GSO.4.05.9908311713310.8158-100000@auk.stats>
Message-ID: <x2vh9v99qt.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

>         formals(fn) <- c(formals(fn), "..." = list(NULL))

This will break if fn already has a "..." argument, will it not? (If
it doesn't, it should...). I'd prefer

  formals(fn)["..."] <- alist(...=)

(And its a good thing that Robert is on that secluded island off of
Gothenburg. This would really make him cringe.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From awol@xs4all.nl  Tue Aug 31 22:21:31 1999
From: awol@xs4all.nl (Alexander Volovics)
Date: Tue, 31 Aug 1999 23:21:31 +0200 (CEST)
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: <x2yaes7zh8.fsf@blueberry.kubism.ku.dk>
Message-ID: <XFMail.990831232131.awol@xs4all.nl>


On 31-Aug-99 Peter Dalgaard BSA wrote:

> What would interest me is what the content of R_gnome_userprefs.font
> if you go up to #40 (in R_gtk_terminal_new () at terminal.c:112). Just
> type 
> p R_gnome_userprefs.font
> if it's NULL, then we might have a lead on the problem. But Lyndon
> Drake is the guy who knows his way around the Gnome stuff, not me.


Here is the result:

#40 0x80cd79b in R_gtk_terminal_new () at terminal.c:112
112       gtk_widget_show_all(R_gtk_main_window);
(gdb) p R_gnome_userprefs.font
$1 = (gchar *) 0x814cbf0 ""


> What is in your .gnome/R.gnome file, by the way?

Here is my R.gnome:

[Placement]
Dock=Toolbar\\0,1,0,0\\Menubar\\0,0,0,0

[Text]
textcolor=rgb:0000/0000/0000
bgcolor=rgb:ffff/ffff/ffff
font=

[Pager]
title_font=-adobe-helvetica-bold-r-normal-*-*-100-*-*-p-*-iso8859-1
title_textcolor=rgb:0000/0000/0000
title_bgcolor=rgb:ffff/ffff/ffff
text_font=-misc-fixed-medium-r-normal-*-*-120-*-*-c-*-iso8859-1
em_font=-misc-fixed-bold-r-normal-*-*-120-*-*-c-*-iso8859-1
text_textcolor=rgb:0000/0000/0000
text_bgcolor=rgb:ffff/ffff/ffff

HA. The solution is often very simple. I should have thought of
looking here myself. Under [Text] there is no entry for font!
Enter a font and R.gnome works.

This means that it would also have worked with libglade-0.3-1.
Is this an ommision in configure/make/make install?

Thanks for taking the time to respond and the suggestions.


*************************************
Alexander Volovics
Dept of Methodology & Statistics
Maastricht University, Maastricht, NL
*************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 31 22:54:12 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 1999 23:54:12 +0200
Subject: [R] R --gnome segfaults on RH 6.0 with R-0.65.0
In-Reply-To: Alexander Volovics's message of "Tue, 31 Aug 1999 23:21:31 +0200 (CEST)"
References: <XFMail.990831232131.awol@xs4all.nl>
Message-ID: <x2zoz7wr97.fsf@blueberry.kubism.ku.dk>

Alexander Volovics <awol@xs4all.nl> writes:

> HA. The solution is often very simple. I should have thought of
> looking here myself. Under [Text] there is no entry for font!
> Enter a font and R.gnome works.
> 
> This means that it would also have worked with libglade-0.3-1.
> Is this an ommision in configure/make/make install?

It's not supposed to happen. Mine certainly got filled in without any
help. Perhaps a default font used to get inserted? With a font entry
like yours, my version also burns to cinders in a flurry of

Gdk-CRITICAL **: file gdkfont.c: line 360 (gdk_char_width): assertion
`font != NULL' failed.

(And as Brian remarked, the libglade seems not to be actually used in
0.65. We just wouldn't tamper any more with the configure program...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

