From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun  2 14:53:51 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 2 Jun 1998 15:53:51 +0200
Subject: "fgrep" for help \\  IBM PowerPC AIX
In-Reply-To: <Pine.LNX.3.96.980529093038.23645E-100000@buffy> (message from
 Thomas Lumley on Fri, 29 May 1998 09:33:53 -0700 (PDT))
Message-ID: <199806021353.PAA08413@sophie.ethz.ch>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> ......
    TL> Currently "%*%" doesn't have any help but help
    TL> requests get routed to Arith, because "%*%" as a regular expression
    TL> matches "%%". I will add this to the special cases in help(), but
    TL> should we use fgrep instead of grep in cmd/help?

Yes --- if  "fgrep" is available as widely as "grep".

	[can you check on your machine(s), dear R-develers?
	 any that doesn't have fgrep ??
	 Test:
		echo 'abcdef*' | fgrep 'c*d'
	 should NOT return anything]

I think it should be..  
just checked: it *is* available even on AIX 4.2;
a (PowerPC) system I got an account about ten days ago, because it's
owner and part-time maintainer wanted to run R.

  -  R 0.61.3   configure finds gcc and installs without any warning,
     BUT
	R>  max(1)
	[1]NaNQ
	R> min(1:10)
	[1]NaNQ
	R> range(pi)
	[1]NaNQNaNQ

     which breaks almost everything.

  - R 0.62 configure finds  "xlc" a compiler which ``is said'' to be good,
    at least one of its warnings lead to me to look at src/appl/eigen.c
    and remove some extraneous definitions there....

    However, I haven't been able to compile there (link problems), and
    don't really have documentation about AIX, xlc, etc.

Has anyone have better knowledge and/or experiences with AIX?
Of course, I can give more details on how compilation fails.

I'm particularly interested in compilation success of 0.62 (development
version). 

Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun  2 15:41:42 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 2 Jun 1998 10:41:42 -0400
Subject: "as.numeric" / "As.numeric" [was "R-beta: bugs and problems"]
References: <199806021002.MAA00877@sophie.ethz.ch>
Message-ID: <98Jun2.105400edt.13497@mailgate.bank-banque-canada.ca>

>User functions written for both R and S should get the same
>thing for as.numeric(.).

I would like the same result here. As for the "As." functions, I would not be
inclined to encourage people too much to program things at this level in a way
that would not also work in S. The result may be that they decide they must make
a choice between the languages, and I don't think that would be a good thing.
One way around that is to include the "As." functions in a set of compatability
functions which can be used as programming tools in both S and R. (I have a
small set of these, but there are lots of things that could be added.)

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Wed Jun  3 18:39:43 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Wed, 3 Jun 1998 12:39:43 -0500 (CDT)
Subject: lty
Message-ID: <Pine.OSF.3.95.980603123254.32361A-100000@io.uwinnipeg.ca>

I find, viewing the output with ghostview, that lty="2","3", or "4" gives
the same dashed line. So basically you have choice of solid ("1") or
dashed ("2","3","4").

If this is not implemented yet, maybe the docs should reflect it?

Hmm now I tried plotting with both lty="2" and lty="3" for two separate
functions on one plot, and the lty="2" one is invisible now.  This looks
like a bug in the snapshot.

Thanks for any help.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Wed Jun  3 18:46:49 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Wed, 3 Jun 1998 12:46:49 -0500 (CDT)
Subject: lty
Message-ID: <Pine.OSF.3.95.980603124425.726A-100000@io.uwinnipeg.ca>

Sorry, my previous message said using lty="2" made line disappear.  Wrong.

What happens is that
"2" is dots
"3" is dashes

BUT docs say
"2" is dashes
"3" is dots

So there is an error in the docs.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  3 20:19:00 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Jun 1998 21:19:00 +0200
Subject: lty
In-Reply-To: Bill Simpson's message of Wed, 3 Jun 1998 12:46:49 -0500 (CDT)
References: <Pine.OSF.3.95.980603124425.726A-100000@io.uwinnipeg.ca>
Message-ID: <x2g1hms38b.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsimpson@uwinnipeg.ca> writes:

> 
> Sorry, my previous message said using lty="2" made line disappear.  Wrong.
> 
> What happens is that
> "2" is dots
> "3" is dashes
> 
> BUT docs say
> "2" is dashes
> "3" is dots
> 
> So there is an error in the docs.

Nope:
	lty=1 solid
	lty=2 dashed
	lty=3 dotted
	lty=4 dotdashed
	lty="1" pattern: 1 "dot" on, 1 "dot" off
	lty="2" pattern: 2 "dots" on, 2 "dots" off
	lty="3" pattern: 3 "dots" on, 3 "dots" off
	lty="32" pattern: 3 "dots" on, 2 "dots" off
	lty="124" pattern: 1 on, 2 off, 4 on, 1 off, 2 on, 4 off, 
	...and so forth...

You can see this clearly if you start with par(lwd=5). As far as I can
see without actually digging into the source,

2 == "4"
3 == "13"
4 == "3134"

So the docs are OK, but perhaps we need to distinguish more clearly
between integer and character lty's.

The dot-dash pattern on X11 looks wrong, though. I think it should
have been "1343", i.e. same pattern, reverse colors.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill Simpson <wsimpson@uwinnipeg.ca>  Wed Jun  3 20:32:37 1998
From: Bill Simpson <wsimpson@uwinnipeg.ca> (Bill Simpson)
Date: Wed, 3 Jun 1998 14:32:37 -0500 (CDT)
Subject: lty
In-Reply-To: <x2g1hms38b.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.3.95.980603142647.5513A-100000@io.uwinnipeg.ca>

> > Sorry, my previous message said using lty="2" made line disappear.  Wrong.
> > 
> > What happens is that
> > "2" is dots
> > "3" is dashes
> > 
> > BUT docs say
> > "2" is dashes
> > "3" is dots
> > 
> > So there is an error in the docs.
> 
> Nope:
> 	lty=1 solid
> 	lty=2 dashed
> 	lty=3 dotted
> 	lty=4 dotdashed
> 	lty="1" pattern: 1 "dot" on, 1 "dot" off
> 	lty="2" pattern: 2 "dots" on, 2 "dots" off
> 	lty="3" pattern: 3 "dots" on, 3 "dots" off
> 	lty="32" pattern: 3 "dots" on, 2 "dots" off
> 	lty="124" pattern: 1 on, 2 off, 4 on, 1 off, 2 on, 4 off, 
> 	...and so forth...

Peter, to me (and this is English language) "dot" is shorter than "dash"!
.-.--
dot dash dot dash dash.

So "dot" SHOULD be label for lty="2" pattern: 2 "dots" on, 2 "dots" off
And "dash" SHOULD be label for lty="3" pattern: 3 "dots" on, 3 "dots" off.
Since dot is shorter than dash.

> 
> You can see this clearly if you start with par(lwd=5). As far as I can
> see without actually digging into the source,
This is answer to previous posting on lwd.  So it is there, just not
documented. Thanks.

> The dot-dash pattern on X11 looks wrong, though. I think it should
> have been "1343", i.e. same pattern, reverse colors.
My comments above were based on viewing saved plot with ghostview and
actually printing it with ghostscript.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  3 20:58:32 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Jun 1998 21:58:32 +0200
Subject: lty
In-Reply-To: Bill Simpson's message of Wed, 3 Jun 1998 14:32:37 -0500 (CDT)
References: <Pine.OSF.3.95.980603142647.5513A-100000@io.uwinnipeg.ca>
Message-ID: <x2btsas1ef.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsimpson@uwinnipeg.ca> writes:

> > 	lty=1 solid
> > 	lty=2 dashed
> > 	lty=3 dotted
> > 	lty=4 dotdashed
> > 	lty="1" pattern: 1 "dot" on, 1 "dot" off
> > 	lty="2" pattern: 2 "dots" on, 2 "dots" off
> > 	lty="3" pattern: 3 "dots" on, 3 "dots" off
> > 	lty="32" pattern: 3 "dots" on, 2 "dots" off
> > 	lty="124" pattern: 1 on, 2 off, 4 on, 1 off, 2 on, 4 off, 
> > 	...and so forth...
> 
> Peter, to me (and this is English language) "dot" is shorter than "dash"!
> .-.--
> dot dash dot dash dash.

Sure

> So "dot" SHOULD be label for lty="2" pattern: 2 "dots" on, 2 "dots" off
> And "dash" SHOULD be label for lty="3" pattern: 3 "dots" on, 3 "dots" off.
> Since dot is shorter than dash.
> 

Look again: 2 is a number, selecting one of 4 preset patterns, "2" is
a character, specifying the pattern directly.

Try
 plot(1:10,type='l',lty=2,lwd=4)
 plot(1:10,type='l',lty=3,lwd=4)
 plot(1:10,type='l',lty='2',lwd=4)
 plot(1:10,type='l',lty='3',lwd=4)

> This is answer to previous posting on lwd.  So it is there, just not
> documented. Thanks.

In the snapshots, it is there... Don't know if it works on postscript
yet, though.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Wed Jun  3 21:18:10 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Wed, 3 Jun 1998 15:18:10 -0500 (CDT)
Subject: lty
In-Reply-To: <x2g1hms38b.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.3.95.980603151645.6058A-100000@io.uwinnipeg.ca>

OK now I get it.  Sorry for cluttering the list with nonsense.

BTW lwd works in R Graphics window but not when printed. (in my version of
snapshot)

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun  4 07:40:41 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 4 Jun 1998 08:40:41 +0200
Subject: lty
In-Reply-To: <Pine.OSF.3.95.980603123254.32361A-100000@io.uwinnipeg.ca>
 (message from Bill Simpson on Wed, 3 Jun 1998 12:39:43 -0500 (CDT))
Message-ID: <199806040640.IAA12039@sophie.ethz.ch>

Thank you, Bill, for your reports ("lwd" and "lty").
In the future, would you please indicate exactly which version of R you are
using?

"lwd":  in 0.61.x, it only works for x11/X11, not for postscript.
	in 0.62.x  it should work in all cases, also in combination with lty.

 lty :  Could n't your problem of seeing just one kind of dot-dashes
	be a problem of screen / device resolution alone?

Thanks again for these bug reports; at the moment we are interested
increasingly more and more for report about 0.62. But even there
-- since we are now in a "fixing" mode -- you have to indicate the version
  (date) that you are using.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Jun  4 14:03:58 1998
From: gb@stat.umu.se (Goran Brostrom)
Date: Thu, 4 Jun 1998 15:03:58 +0200 (MET DST)
Subject: Readline and 0.62
In-Reply-To: <199806031414.KAA17990@desire.stat.cmu.edu>
Message-ID: <Pine.LNX.3.95.980604144040.23957B-100000@capa.stat.umu.se>

Developers,

today I installed R-snapshot (June 2) on my Redhat Sparc/Linux 4.2,
with no problems, but obviously this version of R was compiled 
without 'readline' (I also have R-0.61.3, which works as expected 
with readline). Output from './configure', related to readline:
...
checking for rl_callback_read_char in -lreadline... (cached) no
...
checking for readline/history.h... (cached) yes
...
I have 'readline-2.0-10' according to 'rpm ...'. Does 0.62 need a
more recent version of readline than 0.61? Or is the problem
somewhere else?

Goran
---------------------------------------------------------
Goran Brostrom
Department of Statistics              tel: +46 90 786-5223
Umea University                       fax: +46 90 786-6614
S-90187 Umea, Sweden               e-mail: gb@stat.umu.se
----------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Thu Jun  4 14:39:03 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Thu, 4 Jun 1998 08:39:03 -0500 (CDT)
Subject: lwd
In-Reply-To: <199806040640.IAA12039@sophie.ethz.ch>
Message-ID: <Pine.OSF.3.95.980604082537.24785B-100000@io.uwinnipeg.ca>

I am using
[1] "Unstable-snapshot"

$status.rev
[1] "0"

$major
[1] "0"

$minor
[1] "62.0"

$year
[1] "1998"

$month
[1] "April"

$day
[1] "12"

If I do:
plot(x,y, type="l")
par(lwd=4)
lines(tt,pts)

The 2nd curve does appear to be heavy (correct line width) in X11 window,
however saved plot (dev.print) uses just single pixel line width (as seen
when viewed in ghostview or when printed out).

So if lwd is supposed to work in version .62.0, then there is a bug.
Or else I need a newer snapshot.

As for lty, this was just a confusion of lty="2" and lty=2, etc, as
Peter said.  Yes as you say Martin the screen resolution does enter into
it, but I was basing my comments on printouts.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun  4 15:02:36 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jun 1998 16:02:36 +0200
Subject: Readline and 0.62
In-Reply-To: Goran Brostrom's message of Thu, 4 Jun 1998 15:03:58 +0200 (MET DST)
References: <Pine.LNX.3.95.980604144040.23957B-100000@capa.stat.umu.se>
Message-ID: <x290ndw9hf.fsf@blueberry.kubism.ku.dk>

Goran Brostrom <gb@stat.umu.se> writes:

> 
> Developers,
> 
> today I installed R-snapshot (June 2) on my Redhat Sparc/Linux 4.2,
> with no problems, but obviously this version of R was compiled 
> without 'readline' (I also have R-0.61.3, which works as expected 
> with readline). Output from './configure', related to readline:
> ...
> checking for rl_callback_read_char in -lreadline... (cached) no
> ...
> checking for readline/history.h... (cached) yes
> ...
> I have 'readline-2.0-10' according to 'rpm ...'. Does 0.62 need a
> more recent version of readline than 0.61? Or is the problem
> somewhere else?

Yes, No.

You need readline 2.1 for 0.62. This is because of some new event
handling stuff necessary for the multiple graphics devices. This
requires the "alternate readline interface" (keypress-based) which
isn't there in 2.0. There's an rpm of the newer readline in the
contrib directory at redhat (or mirrors).

(Note to self: remember to put this into the release notes...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.Princeton.EDU  Thu Jun  4 15:25:11 1998
From: ben@eno.Princeton.EDU (Ben Bolker)
Date: Thu, 4 Jun 1998 10:25:11 -0400 (EDT)
Subject: lwd
In-Reply-To: <Pine.OSF.3.95.980604082537.24785B-100000@io.uwinnipeg.ca>
Message-ID: <Pine.SUN.3.95.980604102301.2730A-100000@paca>

On Thu, 4 Jun 1998, Bill Simpson wrote:

  [ ... snipping lots of stuff ... ]
> 
> As for lty, this was just a confusion of lty="2" and lty=2, etc, as
> Peter said.  Yes as you say Martin the screen resolution does enter into
> it, but I was basing my comments on printouts.
> 

  This certainly seems as though it has great potential for confusion!
I don't know if there is any feasible change to the plot command itself to
minimize this confusion, but may I ask (maybe someone has already done it)
that a few lines be added to the documentation ... ?

Benjamin Bolker          Dep't of Ecology and Evolutionary Biology,
ben@eno.princeton.edu    Princeton University
tel: (609) 258-6886,     fax: (609) 258-1334

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimrc@mathfs.math.montana.edu  Thu Jun  4 18:28:41 1998
From: jimrc@mathfs.math.montana.edu (Jim Robison-Cox)
Date: Thu, 4 Jun 1998 11:28:41 -0600 (MDT)
Subject: Snapshot won't configure on SunOS 5.3
Message-ID: <Pine.ULT.3.91.980604112642.8392I@mathfs.math.montana.edu>

R-crew,

   I'm trying to install the R-Snapshot which I downloaded a few hours
ago and I'm having a problem I can't trace.  My system is

 Sun SPARC, SunOS 5.3 : 1996

>From running ./configure:***************************************
loading cache ./config.cache
checking for a BSD compatible install... /opt/local/R/R-snapshot/etc/install-sh -c
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for bison... bison -y
checking for ar... ar
checking for ratfor... no
checking for perl... /usr/local/bin/perl
checking whether perl is perl 5... yes
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for ranlib... (cached) ranlib
checking for g77... g77
checking for underscore after Fortran symbols... configure: error: Nothing worked - cannot use FORTRAN
*******End of ./configure output *********************************************

And make will not work.

Has anyone else had trouble with a Sun install?


Previous versions have configured and complied beautifully, as
this partial screen summary for ./configure on R-0.61 shows:

# checking for ranlib... (cached) ranlib
# checking for ar... (cached) ar
# checking for lpr... (cached) lpr
# checking how to run the C preprocessor... (cached) gcc -E

I also updated R-0.61 to 0.61.2 and 0.61.3 without any problem. It seems
this line in the older configure file returned true:
if test -z "$FC"
  Since it skipped from ar to lpr without comment.


The new configure seems quite different.  Any pointers?

TIA,
  Jim

Jim Robison-Cox                 ____________            
Department of Math Sciences    |            |           phone: (406)994-5340
2-214 Wilson Hall               \   BZN, MT |           FAX:   (406)994-1789
Montana State University         |  *_______|
Bozeman, MT 59717                 \_|         e-mail: jimrc@math.montana.edu 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Jun  4 18:42:45 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 4 Jun 1998 10:42:45 -0700 (PDT)
Subject: Snapshot won't configure on SunOS 5.3
In-Reply-To: <Pine.ULT.3.91.980604112642.8392I@mathfs.math.montana.edu>
Message-ID: <Pine.SUN.3.95.980604103652.11242B-100000@chekov>

On Thu, 4 Jun 1998, Jim Robison-Cox wrote:
>    I'm trying to install the R-Snapshot which I downloaded a few hours
> ago and I'm having a problem I can't trace.  My system is
> 
>  Sun SPARC, SunOS 5.3 : 1996
> 

> checking for g77... g77
> checking for underscore after Fortran symbols... configure: error: Nothing worked - cannot use FORTRAN
> *******End of ./configure output *********************************************
> 
> And make will not work.
> 

> 
> The new configure seems quite different.  Any pointers?
> 

It is very different -- we now _require_ a FORTRAN compiler.  It appears
that configure found g77 (which is the first one it looks for) and then
couldn't get it to work properly. You can edit the file config.site to
specify the name of your FORTRAN compiler (presumably you have f77).


Thomas Lumley
UW Biostatistics


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimrc@mathfs.math.montana.edu  Thu Jun  4 18:47:54 1998
From: jimrc@mathfs.math.montana.edu (Jim Robison-Cox)
Date: Thu, 4 Jun 1998 11:47:54 -0600 (MDT)
Subject: Snapshot won't configure on SunOS 5.3
In-Reply-To: <Pine.SUN.3.95.980604103652.11242B-100000@chekov>
Message-ID: <Pine.ULT.3.91.980604114658.8392J-100000@mathfs.math.montana.edu>


Thanks, Thomas,  It's going to town now.

On Thu, 4 Jun 1998, Thomas Lumley wrote:
> It is very different -- we now _require_ a FORTRAN compiler.  It appears
> that configure found g77 (which is the first one it looks for) and then
> couldn't get it to work properly. You can edit the file config.site to
> specify the name of your FORTRAN compiler (presumably you have f77).
> 

Jim Robison-Cox                 ____________            
Department of Math Sciences    |            |           phone: (406)994-5340
2-214 Wilson Hall               \   BZN, MT |           FAX:   (406)994-1789
Montana State University         |  *_______|
Bozeman, MT 59717                 \_|         e-mail: jimrc@math.montana.edu 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun  4 21:01:24 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jun 1998 22:01:24 +0200
Subject: Snapshot won't configure on SunOS 5.3
In-Reply-To: Jim Robison-Cox's message of Thu, 4 Jun 1998 11:47:54 -0600 (MDT)
References: <Pine.ULT.3.91.980604114658.8392J-100000@mathfs.math.montana.edu>
Message-ID: <x24sy1hr6z.fsf@blueberry.kubism.ku.dk>

Jim Robison-Cox <jimrc@mathfs.math.montana.edu> writes:

> 
> 
> Thanks, Thomas,  It's going to town now.
> 
> On Thu, 4 Jun 1998, Thomas Lumley wrote:
> > It is very different -- we now _require_ a FORTRAN compiler.  It appears
> > that configure found g77 (which is the first one it looks for) and then
> > couldn't get it to work properly. You can edit the file config.site to
> > specify the name of your FORTRAN compiler (presumably you have f77).
> > 

Also, the exact same symptoms arise if you have previously configured
the same sources for another system. Made that blunder myself
yesterday. "make distclean" is recommended first in that case.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimrc@mathfs.math.montana.edu  Fri Jun  5 00:38:27 1998
From: jimrc@mathfs.math.montana.edu (Jim Robison-Cox)
Date: Thu, 4 Jun 1998 17:38:27 -0600 (MDT)
Subject: aov
Message-ID: <Pine.ULT.3.91.980604173048.8392M-100000@mathfs.math.montana.edu>

R developers,

  Last week I asked several questions which I think I can now answer
myself in large part.

>
> Q 1)  Is aov supposed to avoid qr decomposition and matrix inversion?
>       In S it is claimed to be faster than lm() for large datasets.  Is
>       that due to avoidance of qr()? 
>       (My main goal is to get the Error strata working.)

   My use of matrix manipulation to avoid qr decompositon takes more
time than the complied solver build into lm.fit. It seems that the real
reason for doing aov differently would be if the determination of Error
strata and which factors to evaluate in any given error statum requires
a different approach from lm.fit.  I'm not going to worry about speed of
lm.fit anymore, so that avoids most of the other questions I had posed.

  Douglas Bates has suggested:
DB> I think that a general approach via maximum likelihood or REML to
DB> anova models with random effects in them will eventually be superior
DB> to approaches based on sum-of-squares decompositions.

  Perhaps one could make an aov function which fit using lme and then
repackaged the output a bit.  I intend to look into that possibility.

    In pursuit of a sum-of-squares decomp, I have looked at the C code
in  model.c, particularly the  do_termsform definition. I see
these comments (line 821 in June 2 snapshot)
		/* Step 2: Recode the model terms in binary form */
		/* and at the same time, expand the model formula. */

		/* FIXME: this includes specials in the model */
		/* There perhaps needs to be a an extra pass */
		/* through the model to delete any terms which */
		/* contain specials.  Actually, specials should */
		/* only enter additively so this should also be */
		/* checked and abort forced if not. */

		/* FIXME: this is also the point where nesting */
		/* needs to be taken care of. */

To continue on this approach, and follow up on these FIXMEs, I need to
understand some of the internal functions like CAR, CDR, and
combinations thereof.  I found the definition of CAR in
src/include/Defn.h as:

#define CAR(e)          ((e)->u.listsxp.carval)

But where is u.listsxp.carval defined?  For that matter, where is the
Scheme/LISP interpreter?
Is there a roadmap? list of where the different pieces of R reside?


Jim Robison-Cox                 ____________            
Department of Math Sciences    |            |           phone: (406)994-5340
2-214 Wilson Hall               \   BZN, MT |           FAX:   (406)994-1789
Montana State University         |  *_______|
Bozeman, MT 59717                 \_|         e-mail: jimrc@math.montana.edu 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Fri Jun  5 01:21:34 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Fri, 5 Jun 1998 12:21:34 +1200 (NZST)
Subject: aov
Message-ID: <199806050021.MAA03779@stat1.stat.auckland.ac.nz>


> To continue on this approach, and follow up on these FIXMEs, I need to
> understand some of the internal functions like CAR, CDR, and
> combinations thereof.  I found the definition of CAR in
> src/include/Defn.h as:
> 
> #define CAR(e)          ((e)->u.listsxp.carval)
> 
> But where is u.listsxp.carval defined?  For that matter, where is the
> Scheme/LISP interpreter?
> Is there a roadmap? list of where the different pieces of R reside?
> 
> 

  Well there isn't a road map but there probably oughta be.
  Everything (almost) in R is a SEXPREC, and one of the mor common of these
  is the LISTSXP,
  
  it is basically a triple- the car, the cdr and the tag
  
   a list is a connected group of LISTSXP's,
    the car is a pointer to the "value" in that element of the list,
    the cdr is a pointer to the next LISTSXP (in the list)
    the tag is a place to keep things like the name associated with the
    list element.
    
    the first element of a list l is obtained by CAR(l)
    the second element by CADR(l) (CAR(CDR(l)))
    in the lisp world one cdr's down the list;
    
    the name for the first element is TAG(l)
    for the second TAG(CDR(l))
    and so on
    
    SEXPREC's (our basic building block) can be one of 20 different types,
    but they are all similar enough to be contained in one C union.
    First in the union is the info slot (32 bits), this is used for all sorts
    of nasty things
    
    then comes a slot for an SEXPREC that contains the attributes (this is 
    where the S-style attributes are stuck)
    
    then the actual data structures - notice that most of these are triples
    (vectors, primitives and environments are exceptions).
    
    hope this helps....
    robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun  5 07:35:08 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 5 Jun 1998 08:35:08 +0200
Subject: lwd -- for PostScript -- only in very recent snapshots
In-Reply-To: <Pine.OSF.3.95.980604082537.24785B-100000@io.uwinnipeg.ca>
 (message from Bill Simpson on Thu, 4 Jun 1998 08:39:03 -0500 (CDT))
Message-ID: <199806050635.IAA14305@sophie.ethz.ch>

>>>>> "Bill" == Bill Simpson <wsimpson@uwinnipeg.ca> writes:

    Bill> I am using [1] "Unstable-snapshot"

    Bill> $status.rev [1] "0"
    Bill> $major [1] "0"
    Bill> $minor [1] "62.0"
    Bill> $year [1] "1998"
    Bill> $month [1] "April"
    Bill> $day [1] "12"

    Bill> If I do: plot(x,y, type="l") par(lwd=4) lines(tt,pts)

    Bill> The 2nd curve does appear to be heavy (correct line width) in X11
    Bill> window, however saved plot (dev.print) uses just single pixel
    Bill> line width (as seen when viewed in ghostview or when printed
    Bill> out).

    Bill> So if lwd is supposed to work in version .62.0, then there is a
    Bill> bug.  Or else I need a newer snapshot.
			^^^^^^^^^^^^^^^^^^^^^^^
exactly.  "lwd" for PostScript only works for a week or so:

On May 27, Paul Murrell wrote to  R-core

  PM> The Postscript device driver has been modified so that it now takes
  PM> notice of the current line width
  PM> 
  PM> Also, the line texture specification (or line type) is now scaled for
  PM> the current line width for both X11 and PostScript graphics
  PM> 
  PM> the best way to see the difference is to do 
  PM> 
  PM> 	plot(1:10, lty=3, lwd=3, type="l")  # to see X11 version
  PM> 	dev.print() # to get postscript version
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun  5 15:33:11 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 5 Jun 1998 10:33:11 -0400
Subject: R-beta: characters to Fortran
References: <9806050810.AA05095@alpha.luc.ac.be>
Message-ID: <98Jun5.104708edt.13452@mailgate.bank-banque-canada.ca>

>I am having trouble sending character strings to Fortran. Even in a
>simple program, I only receive gibberish.

In my experience that is consistent with S.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Fri Jun  5 17:37:12 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Fri, 5 Jun 1998 11:37:12 -0500 (CDT)
Subject: help on R primitives
Message-ID: <Pine.OSF.3.95.980605113348.26754A-100000@io.uwinnipeg.ca>

Not sure if primitives is the right word, but look at this:

> help(for)
Error: syntax error
> ?for
+ 
[hit ctrl-c to get out at this pt]

Either way I try I can't get help on for. Can the help mechanism be
modified so it is possible to get help on these guys?  Another example:
> help(if)
Error: syntax error

But ?(ifelse) works.

I am using version .62, release from April or so.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun  5 17:47:13 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 5 Jun 1998 18:47:13 +0200
Subject: help on R primitives
In-Reply-To: <Pine.OSF.3.95.980605113348.26754A-100000@io.uwinnipeg.ca>
 (message from Bill Simpson on Fri, 5 Jun 1998 11:37:12 -0500 (CDT))
Message-ID: <199806051647.SAA02459@sophie.ethz.ch>

>>>>> "Bill" == Bill Simpson <wsimpson@uwinnipeg.ca> writes:

    Bill> Not sure if primitives is the right word, but look at this:
    >> help(for)
    Bill> Error: syntax error
    >> ?for
    Bill> + [hit ctrl-c to get out at this pt]

    Bill> Either way I try I can't get help on for. Can the help mechanism
    Bill> be modified so it is possible to get help on these guys?  Another
    Bill> example:
    >> help(if)
    Bill> Error: syntax error

I'm not sure if we can prevent these cases, without a lot of special case
coding ((it is pretty delicate to improve help(.)  [argument deparsing...]))

However, 

	" help on 'help' helps "  in this case :
	  ~~~~~~~~~~~~~~~~~~~~

> help()

Online Documentation

     help(topic, package = c(.packages(),.Autoloaded), lib.loc = .lib.loc)

     ?topic

Arguments:

   topic: a name or character string on which documentation
          is sought (but not a variable containing a charac-
          ter string!).


	..................

	..................

Examples:

     help()
     help(help)              # the same

     help(lapply)
     ?lapply                 # the same

     help("for")             # or ?"for", but the quotes are needed
     ?"+"


Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Fri Jun  5 18:10:37 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Fri, 5 Jun 1998 12:10:37 -0500 (CDT)
Subject: help on R primitives
In-Reply-To: <199806051647.SAA02459@sophie.ethz.ch>
Message-ID: <Pine.OSF.3.95.980605120953.28917A-100000@io.uwinnipeg.ca>

 
> 	" help on 'help' helps "  in this case :
	  ~~~~~~~~~~~~~~~~~~~~
OK Martin, thanks for your help :-)

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Jun  6 14:08:37 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 6 Jun 1998 15:08:37 +0200
Subject: Strange Error on AIX
In-Reply-To: <XFMail.980605140429.jkawczak@fisher.stats.uwo.ca> (message from
 Janusz Kawczak on Fri, 05 Jun 1998 14:04:29 -0400 (EDT))
Message-ID: <199806061308.PAA25110@florence.ethz.ch>

>>>>> "Janusz" == Janusz Kawczak <jkawczak@fisher.stats.uwo.ca> writes:

[You wrote to "owner-r-help@...."  -- that's just me (MM);
 why did you not use the mailing list ? (R-devel or R-help)]

    Janusz> Hello, I am getting this 'strange' message when running the R
    Janusz> program on AIX 4.2.1. I have not had any problems with the
    Janusz> compilation of the program. Does anyone have an idea due to
    Janusz> what is the following error present:

    Janusz> R : Copyright 1998, Robert Gentleman and Ross Ihaka Version
    Janusz> 0.61.3 (May 3, 1998)

    >> plot(rnorm(100),rnorm(100))
    Janusz> Gpretty(NaNQ,NaNQ,5): cell=NaNQ, ndiv= -2 <=0;
    Janusz> (ns,nu)=(-2147483647,2147483647); dx=NaNQ, unit=NaNQ, ismall=0.
    Janusz> Gpretty(NaNQ,NaNQ,5): cell=NaNQ, ndiv= -2 <=0;
    Janusz> (ns,nu)=(-2147483647,2147483647); dx=NaNQ, unit=NaNQ, ismall=0.
    Janusz> Error: Length cannot be negative

    Janusz> In addition to the above, I've tried the latest snapshot
    Janusz> version of R; the same problem occurs.

Janusz, this *IS* a problem that I recently reported to  R-devel.
Ive also access to an AIX 4.2 (older than 4.2.1 ?) with the same problem:

I've tracked the bug to

	> min(1)
	NaNQ
	
(the same for max(.) for any number, and hence for range(.) ..)
The Gpretty(.) message is a direct consequence of this broken arithmetic.

Peter Dalgaard recommended using a debugger and seeing where in the source
code things go haywire..
I haven't had time yet...

Are you also using gcc for compilation?
Could it be a gcc--AIX misconfiguration?

If you can start debugging (e.g. R --debugger gdb )
we'd be glad if you worked with a recent snapshot (0.62), since quite a few
things have changed, notably the IEEE arithmetic (Inf, -Inf and NaN).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun  8 09:52:53 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 8 Jun 1998 10:52:53 +0200
Subject: IBM AIX problems
Message-ID: <199806080852.KAA02502@sophie.ethz.ch>

Heiner Schwarte has helped me with the AIX problem that I 
and Janusz Kawczak recently reported here.

Heiner had found out earlier that there was a problem with the 
'finite' c-library function [Heiner's test code see below] when gcc 
(and older versions of xlc) is used.
He also found that instead, AIX defines a  FINITE(.) macro itself
in fp.h  and that this would work in any case.

Interestingly,  xlc (the "standard IBM AIX compiler")  has no problem 
with both  finite(.) and FINITE(.).

BUT:  I have never been successful compiling R with xlc:
      Compilation of the current snapshot stops with 

       $ xlc -DANSI -D_XOPEN_SOURCE -I/usr/local/vni/.include -I../include \
	    -c system.c
       "system.c", line 150.16: 1506-275 (S) Unexpected text readMask ignored.
       "system.c", line 150.9: 1506-045 (S) Undeclared identifier fd_set.
       "system.c", line 151.9: 1506-275 (S) Unexpected text 'int' ignored.
       "system.c", line 151.13: 1506-045 (S) Undeclared identifier stdinfd.
       "system.c", line 152.9: 1506-275 (S) Unexpected text 'int' ignored.
       "system.c", line 152.13: 1506-045 (S) Undeclared identifier connectionfd.
       "system.c", line 154.18: 1506-045 (S) Undeclared identifier readMask.
       $ xlc -DANSI -D_XOPEN_SOURCE  -I../include -c system.c
       "system.c", line 150.16: 1506-275 (S) Unexpected text readMask ignored.
       "system.c", line 150.9: 1506-045 (S) Undeclared identifier fd_set.
       "system.c", line 151.9: 1506-275 (S) Unexpected text 'int' ignored.
       "system.c", line 151.13: 1506-045 (S) Undeclared identifier stdinfd.
       "system.c", line 152.9: 1506-275 (S) Unexpected text 'int' ignored.
       "system.c", line 152.13: 1506-045 (S) Undeclared identifier connectionfd.
       "system.c", line 154.18: 1506-045 (S) Undeclared identifier readMask.
       $ 

There are several possible solutions to this problem.
One of them might be: 

1.
 >>>>	In all C code of R, use FINITE(.) only 
 >>>>	AND make sure that R is *not* redefining the  FINITE(.) macro
	in the case of AIX (or maybe whenever FINITE(.) is already defined).

or 

2.
 >>>>   In all C code of R, use  finite(.), never FINITE.
 >>>>   For the case of AIX, make finite(.) a macro calling FINITE(.)
	(this was Heiner's solution).

This might be relatively easy.
However, both Heiner and I don't know if the intermixing of
FINITE(.) and finite(.) in the R source is just ``accidental'' or
rather on purpose.
	Anyone knows?
	Are there ANSI/POSIX/...? standards for FINITE(.) ?


Note:  Maybe really configure should figure out if  finite(.) works
	and then take appropriate measures...


----------------------- Here is a Transcript from AIX : ----------------

$ date
Mon Jun  8 10:35:02 MEST 1998
$ uname -a
AIX percol 2 4 000004894600
$ cat finite-tst.c
/* Date: Sun, 07 Jun 1998 19:00:04 +0200
 * From: Heiner Schwarte <h.schwarte@bluewin.ch>
 * To: Martin Maechler <maechler@stat.math.ethz.ch>
 */

#include <stdio.h>
#include <math.h>
#include <fp.h>

main() {
  double x;
  x=1./0.;
  printf("%f\n",x);
  printf("%d\n",finite(x));
  printf("%d\n",FINITE(x));
}

$ gcc -v
Reading specs from /usr/local/lib/gcc-lib/powerpc-ibm-aix4.2.0.0/2.7.2.3/specs
gcc version 2.7.2.3
$ gcc -o finite-tst finite-tst.c
$ xlc -o finite-tst-xlc finite-tst.c
"finite-tst.c", line 22.8: 1506-232 (W) Divisor for modulus or division operator cannot be zero.
$ 
$ finite-tst # gcc
INF
1
0
$ finite-tst-xlc
INF
0
0
----------------------- End of Transcript from AIX : ----------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Jun  8 21:42:49 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Tue, 9 Jun 1998 08:42:49 +1200 (NZST)
Subject: IBM AIX problems
Message-ID: <199806082042.IAA18050@stat1.stat.auckland.ac.nz>

Hmmm.  I think all the code in R should use the FINITE macro rather than
the finite function.  On non IEEE platforms FINITE can be defined to check
for a special NA pattern.

It would be possible to rename the macro to something more obscure if
that would help.  E.g. R_FINITE.

Medium-term this whole area needs some work.  It may be that we will have
to have an R_specific implementation of functions like "finite"  and
"isnan".  This is because there are just too many platforms which seem
to screw them up.

The prize (as usual) goes to Windows, where (0.0 == NaN) is true.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun 14 20:48:51 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 1998 21:48:51 +0200
Subject: R-beta: R-0.62 is released
In-Reply-To: 's message of Sun, 14 Jun 1998 19:55:18 +0100 (BST)
References: <XFMail.980614195518.Ted.Harding@nessie.mcc.ac.uk>
Message-ID: <x2vhq3wyqk.fsf@blueberry.kubism.ku.dk>

(Ted Harding) <Ted.Harding@nessie.mcc.ac.uk> writes:

> 
> On 14-Jun-98 Peter Dalgaard BSA wrote:
> > I've put up R-0.62.0.tgz up for FTP from Auckland some minutes ago.
> > As usual, don't get it from there unless you are desperate, but wait
> > for it to be mirrored at a CRAN site near you within a day or two.
> 
> You didn't expect us to be THAT patient, did you?!
> 

Heh. But it serves you right when you realise the mistake that I made
in it. ("tests" directory gone AWOL, 0.62.1 due out shortly)

And seriously: Auckland is paying through its nose per MB for
Internet, irrespective of direction, so please use CRAN whenever
possible. For the not-quite-so impatient, the Austrian CRAN site will
pick it up some time during the night.

(Of course, ONE impatient user is not a problem, but...)

>    Despite trying every obvious config option, the "R" script had insisted
>    on setting RHOME as the directory it was compiled from: /depot/R-0.62/R-0.62/
> 
>    It took some time to suss out that this needed to be edited to read
>    RHOME=/usr/local/R-0.62/lib/R
> 
>    After this was done, it seems fine. The above is NOT obvious from the INSTALL
>    document.

That might be because it shouldn't happen. For me:

$ more /usr/local/bin/R
#!/bin/sh
# Shell wrapper for R executable.

RHOME=/usr/local/lib/R
export RHOME
...

Even though I compiled out of ~pd/R-official/R-0.62 .  Are you sure
you are picking up the correct R script? 

> 
> 2. The "help" browser seems to be hard-wired to be netscape. This can of course

No comment on this.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 15 08:33:49 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 15 Jun 1998 09:33:49 +0200
Subject: R-beta: Literal "&" in help index
In-Reply-To: <XFMail.980615011606.Ted.Harding@nessie.mcc.ac.uk>
Message-ID: <199806150733.JAA03032@sophie.ethz.ch>

Dear Ted,
thank you for your quick and valuable feedback!
However, as Peter Dalgaard has already pointed out,
	
	PLEASE STOP posting to  R-announce.

	R-announce is ONLY for *IMPORTANT* announcements
	of software releases, and the like.

Please use  R-help for generally relevant questions/answers
and use  R-devel for long, technically oriented bug reports, fixes, etc.

Martin Maechler
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Tue Jun 16 00:20:23 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Tue, 16 Jun 1998 11:20:23 +1200 (NZST)
Subject: Windows
Message-ID: <199806152320.LAA20600@stat1.stat.auckland.ac.nz>

 I've just put up a new Windows version; it's about 1 week behind 0.62
 (the graphics still need some work but it appears to be useable).
 Most of the menu interface has changed. I would appreciate it if some of
 you could have a look at it before I make an announcement.
 
 robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 16 17:23:04 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 16 Jun 1998 12:23:04 -0400
Subject: 62.1 make problems
Message-ID: <98Jun16.124344edt.13444@mailgate.bank-banque-canada.ca>

I'm just trying to install 62.1 under Solaris. Making the program reports no
errors, but when I try to run R I get

ld.so.1: /home/res8/gilp/R-versions/R-0.62.1/bin/R.binary: fatal: libF77.so.2:
can't open file: errno=2

Is there any standard place where I should be looking to find libF77?

When make moves on to building the documents I get the errors below. (Is this
because configure did not find perl?)

Paul Gilbert

...
DONE (INSTALL)
Creating front-end shell script

You should
        make docs
now, or at least
        make help

Building ALL documentation (help, HTML, LaTeX)
./build-alldocs
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: syntax error at line 15: `('
unexpected
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: syntax error at line 15: `('
unexpected
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: syntax error at line 15: `('
unexpected
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: syntax error at line 15: `('
unexpected
*** Error code 2
make: Fatal error: Command failed for target `stamp-docs'
Current working directory /home/res8/gilp/R-versions/R-0.62.1/etc


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jun 16 17:45:39 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jun 1998 11:45:39 -0500
Subject: 62.1 make problems
In-Reply-To: Paul Gilbert's message of Tue, 16 Jun 1998 12:23:04 -0400
References: <98Jun16.124344edt.13444@mailgate.bank-banque-canada.ca>
Message-ID: <6rg1h570ss.fsf@verdi.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I'm just trying to install 62.1 under Solaris. Making the program reports no
> errors, but when I try to run R I get
> 
> ld.so.1: /home/res8/gilp/R-versions/R-0.62.1/bin/R.binary: fatal: libF77.so.2:
> can't open file: errno=2
> 
> Is there any standard place where I should be looking to find libF77?

Sounds like you will have to modify the path searched by the loader
for shared libraries.  Solaris tends to make this difficult because of
the weird locations for compilers and standard pieces of software.
Someone who uses Solaris more should advise you on this.  I think
these libraries are located in /opt/SUNWspro/lib but I haven't
bothered to figure out the logic of the places that Sun locates these.

> When make moves on to building the documents I get the errors below. (Is this
> because configure did not find perl?)

These are definitely errors from perl scripts.  What is the first line
of the script /home/res8/gilp/R-versions/R-0.62.1/etc/build-help?  If
it doesn't point to a perl interpreter then these scripts are not
going to work at all.  You will have to find a way to get configure to
determine the location of the perl interpreter.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 16 17:55:56 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jun 1998 18:55:56 +0200
Subject: 62.1 make problems
In-Reply-To: Paul Gilbert's message of Tue, 16 Jun 1998 12:23:04 -0400
References: <98Jun16.124344edt.13444@mailgate.bank-banque-canada.ca>
Message-ID: <x2sol5z3oj.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I'm just trying to install 62.1 under Solaris. Making the program reports no
> errors, but when I try to run R I get
> 
> ld.so.1: /home/res8/gilp/R-versions/R-0.62.1/bin/R.binary: fatal: libF77.so.2:
> can't open file: errno=2

Works OK here with f77 == g77. Which Fortran are you on?

> Is there any standard place where I should be looking to find
> libF77?

You could try something like 

find /usr -name \*77\* -print
find /opt -name \*77\* -print

but I'm somewhat confused as to why the linker seems to be picking up
the shared library (mine links static) when it isn't there.

> When make moves on to building the documents I get the errors below. (Is this
> because configure did not find perl?)

That, or wrong version of perl.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Jun 17 16:38:22 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 17 Jun 1998 15:38:22 -0000 ()
Subject: bug in functions of form "mcpar<-"
Message-ID: <XFMail.980617162415.plummer@iarc.fr>

This fairly harmless looking piece of code, which worked in
0.61 (and in S-PLUS) fails  in 0.62.1. 

R> "mcpar<-" <- function(x,mcpar) {attr(x,"mcpar") <- mcpar; x}
R> mcpar(x) <- c(1,100,1)
Error in mcpar<-(*tmp*, value = c(1, 100, 1)) : unused argument to function

The error message gives a hint about how to work around the problem -
just replace the argument "mcpar" with "value". 

R> "mcpar<-" <- function(x,value) {attr(x,"mcpar") <- value; x}
R> mcpar(x) <- c(1,100,1)
R> 

This breaks release 0.3-3 of my "coda" package, but I will fix it.
Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 17 18:37:41 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 1998 19:37:41 +0200
Subject: bug in functions of form "mcpar<-"
In-Reply-To: Martyn Plummer's message of Wed, 17 Jun 1998 15:38:22 -0000 ()
References: <XFMail.980617162415.plummer@iarc.fr>
Message-ID: <x2n2bcnd3u.fsf@blueberry.kubism.ku.dk>

Martyn Plummer <plummer@iarc.fr> writes:

> 
> This fairly harmless looking piece of code, which worked in
> 0.61 (and in S-PLUS) fails  in 0.62.1. 
> 
> R> "mcpar<-" <- function(x,mcpar) {attr(x,"mcpar") <- mcpar; x}
> R> mcpar(x) <- c(1,100,1)
> Error in mcpar<-(*tmp*, value = c(1, 100, 1)) : unused argument to function
> 
> The error message gives a hint about how to work around the problem -
> just replace the argument "mcpar" with "value". 
> 
> R> "mcpar<-" <- function(x,value) {attr(x,"mcpar") <- value; x}
> R> mcpar(x) <- c(1,100,1)
> R> 
> 
> This breaks release 0.3-3 of my "coda" package, but I will fix it.
> Martyn

Hmm. We had some pretty antisocial consequences from *not* using the
value= form with John Chambers' [<-.data.frame code, which assumes
that it is used that way in order to see whether i,j, or both are
absent. 

So Splus is using value= on indexing operations only?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 17 18:48:00 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 17 Jun 1998 13:48:00 -0400
Subject: bug in functions of form "mcpar<-"
References: <XFMail.980617162415.plummer@iarc.fr>
Message-ID: <98Jun17.140814edt.13494@mailgate.bank-banque-canada.ca>

I'm having the same problem without a clue to a work around. (Mind you, the work
around for mcpar wasn't so obvious to me.)

Paul Gilbert
____

R : Copyright 1998, The R Development Core Team
Version 0.62.1  (June 15, 1998)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.

> search()
[1] ".GlobalEnv"   "Autoloads"    "package:base"
> "tframe<-" <-function(x, tf)
{
 attr(x, "tframe") <- tf
 x
}

+ + + + > >
> x <- 1:10
> tframe(x) <- c(1,1000,1)
Error in tframe<-(*tmp*, value = c(1, 1000, 1)) : unused argument to function
>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 17 18:58:16 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 17 Jun 1998 13:58:16 -0400
Subject: bug in functions of form "mcpar<-"
References: <XFMail.980617162415.plummer@iarc.fr>
Message-ID: <98Jun17.141830edt.13505@mailgate.bank-banque-canada.ca>

The light came on. I was thinking the problem with mcpar was that the argument
had the same name as the function, but it is that the argument must be called
"value".  If R is intended to be like this it seems like a pretty serious
incompatibility with S (not to mention that I will have to make a lot of
changes).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimrc@mathfs.math.montana.edu  Wed Jun 17 19:22:04 1998
From: jimrc@mathfs.math.montana.edu (Jim Robison-Cox)
Date: Wed, 17 Jun 1998 12:22:04 -0600 (MDT)
Subject: extra arguments to generic functions & bug in model.frame
Message-ID: <Pine.ULT.3.91.980617115505.3906G-100000@mathfs.math.montana.edu>

R developers,

2 things:  a bug in model.frame and a question about setup of generic 
functions. 
 
   I don't understand the following behavior for generic functions:
Suppose I'm working with the cats data in the MASS library and I want to 
create a formula object to model Hwt on Sex:
  # This works:
> formula(Hwt ~ Sex)
Hwt ~ Sex
  # But the following does not:
> formula(Hwt ~ Sex, data = cats)
Error in formula.formula(Hwt ~ Sex, cats) : unused argument to function
  # because I used an extra argument.

The odd thing to me, is that formula() itself allows the argument:
> formula
function (x, ...) 
UseMethod("formula")

But formula.default does not:

> args(formula.default)
function (x) 

The same thing happens with terms:
> args(terms)
function (x, ...) 
> args(terms.default)
function (x) 

And this caused me a problem when using model.frame() since 
model.frame.default includes the lines:

	    if (!inherits(formula, "terms")) 
	    	    formula <- terms(formula, data = data)

Using 2 arguments in term() is a bug since hitting the line 
will cause an error:

Error in terms.default(formula, data = data) : unused argument to function

  Summary:

1.  There seems to be a bug in model.frame() using terms() with 2 arguments.

2.  What is standard practice for setting up instances of a generic function?
    It seems sensible to me that argument lists should not shrink when 
    going from the generic function to an instance of that function.

Cheers,
Jim

Jim Robison-Cox                 ____________            
Department of Math Sciences    |            |           phone: (406)994-5340
2-214 Wilson Hall               \   BZN, MT |           FAX:   (406)994-1789
Montana State University         |  *_______|
Bozeman, MT 59717                 \_|         e-mail: jimrc@math.montana.edu 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 17 19:41:35 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 1998 20:41:35 +0200
Subject: extra arguments to generic functions & bug in model.frame
In-Reply-To: Jim Robison-Cox's message of Wed, 17 Jun 1998 12:22:04 -0600 (MDT)
References: <Pine.ULT.3.91.980617115505.3906G-100000@mathfs.math.montana.edu>
Message-ID: <x2g1h3oops.fsf@blueberry.kubism.ku.dk>

Jim Robison-Cox <jimrc@mathfs.math.montana.edu> writes:

> 1.  There seems to be a bug in model.frame() using terms() with 2 arguments.

Yes.

> 2.  What is standard practice for setting up instances of a generic function?
>     It seems sensible to me that argument lists should not shrink when 
>     going from the generic function to an instance of that function.

No. There's no limit to what special parameters a specific instance of
a function may implement. So the generic one is generally (x,...).
There's no reason not to allow a specific function to check that it is
getting called with parameters that make sense.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jun 17 19:44:52 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 17 Jun 1998 13:44:52 -0500
Subject: extra arguments to generic functions & bug in model.frame
In-Reply-To: Jim Robison-Cox's message of Wed, 17 Jun 1998 12:22:04 -0600 (MDT)
References: <Pine.ULT.3.91.980617115505.3906G-100000@mathfs.math.montana.edu>
Message-ID: <6riulzuau3.fsf@verdi.stat.wisc.edu>

Jim Robison-Cox <jimrc@mathfs.math.montana.edu> writes:

> The odd thing to me, is that formula() itself allows the argument:
> > formula
> function (x, ...) 
> UseMethod("formula")
> 
> But formula.default does not:
> 
> > args(formula.default)
> function (x) 
> 
> The same thing happens with terms:
> > args(terms)
> function (x, ...) 
> > args(terms.default)
> function (x) 

I would say this is a mistake in the definition of terms.default and
formula.default.

It is a good programming practice to ensure that the generic and any
methods have exactly the same calling sequence.  Any such
incompatibilities will have to be eliminated from S-PLUS because S
version 4, the language on which S-PLUS 5.0 will be based, requires
that they have exactly the same calling sequence.  S4 doesn't produce
an error if you define an "old-style" method with a different calling
sequence because it is not recognized as a method.  However, when you
try to use such a method you get an error if the calling sequence does
not match the calling sequence of the generic.

BTW, my version of S-PLUS defines the formula function as
 > formula
 function(object, ...)
 UseMethod("formula")
 > formula.default
 function(object)
We should change the name "x" to "object" to make it easier for people
to port code.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 17 22:06:22 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 17 Jun 1998 17:06:22 -0400
Subject: .First.lib
Message-ID: <98Jun17.172642edt.13467@mailgate.bank-banque-canada.ca>

There seems to be a minor problem in .First.lib: the library argument is all of
$RLIBS. I think it should be just the one directory from which the package is
being taken.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 17 22:13:58 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 17 Jun 1998 17:13:58 -0400
Subject: Warning in par(args)
Message-ID: <98Jun17.173418edt.13462@mailgate.bank-banque-canada.ca>

I'm getting a lot of warning having to do with setting graphic parameters. I
don't recall actually setting any of these, so I would guess they are being set
by something I am calling. Has anyone already figured out where this is
happening?

Paul Gilbert
_____

All dse3 tests ... ok
All dse4 tests ...Warning: skipping test 4 (requires stepwise).
 ok
dse2 graphics tests ...completed
dse3 graphics tests ...completed
dse4 graphics tests ...completed
All Brief User Guide example part 1 tests ...Read 1820 items
Warning in par(args) : parameter "cin" can't be set
Warning in par(args) : parameter "cra" can't be set
Warning in par(args) : parameter "csi" can't be set
Warning in par(args) : parameter "din" can't be set
Warning in par(args) : parameter "cin" can't be set
Warning in par(args) : parameter "cra" can't be set
Warning in par(args) : parameter "csi" can't be set
Warning in par(args) : parameter "din" can't be set
Warning in par(args) : parameter "cin" can't be set
Warning in par(args) : parameter "cra" can't be set
.....

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jun 17 23:24:54 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Wed, 17 Jun 1998 17:24:54 -0500 (CDT)
Subject: Scalar operations dropping matrix attributes
Message-ID: <m0ymQdS-0000Y8C@verdi.stat.wisc.edu>

In 0.62.1 I found that code like t(mat/vec)/vec seems to drop the
matrix attributes of the result.  In this case the matrix is 1x1.
Here is something tracked inside a debug-induced browser.

 Browse[1]> data.class(Var)
 [1] "matrix"
 Browse[1]> Var
	     (Intercept)
 (Intercept)      31.662
 Browse[1]> 
 debug: stdDev <- sqrt(diag(Var))
 Browse[1]> 
 debug: names(stdDev) <- dimnames(Var)[[2]]
 Browse[1]> 
 debug: value <- t(Var/stdDev)/stdDev
 Browse[1]> data.class(stdDev)
 [1] "numeric"
 Browse[1]> 
 debug: attr(value, "stdDev") <- stdDev
 Browse[1]> data.class(value)
 [1] "numeric"

(As you might guess this code takes a variance-covariance matrix and
creates a correlation matrix with the standard deviations as an
attribute.)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 17 23:41:39 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Jun 1998 00:41:39 +0200
Subject: Warning in par(args)
In-Reply-To: Paul Gilbert's message of Wed, 17 Jun 1998 17:13:58 -0400
References: <98Jun17.173418edt.13462@mailgate.bank-banque-canada.ca>
Message-ID: <x2hg1jfy70.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I'm getting a lot of warning having to do with setting graphic parameters. I
> don't recall actually setting any of these, so I would guess they are being set
> by something I am calling. Has anyone already figured out where this is
> happening?
...
> Warning in par(args) : parameter "cin" can't be set
> Warning in par(args) : parameter "cra" can't be set
> Warning in par(args) : parameter "csi" can't be set
> Warning in par(args) : parameter "din" can't be set
...

This comes from constructions of the type

opar<-par()
work.work.work()
par(opar)

This gives complaints from unsettable items. Splus quietly omits them,
so I suppose that we really should do the same.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 18 07:43:12 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 18 Jun 1998 08:43:12 +0200
Subject: Re^2: Warning in par(args)
In-Reply-To: <x2hg1jfy70.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 18 Jun 1998 00:41:39 +0200)
Message-ID: <199806180643.IAA14504@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

      Paul> I'm getting a lot of warning having to do with setting graphic
      Paul> parameters. I don't recall actually setting any of these, so I
      Paul> would guess they are being set by something I am calling. Has
      Paul> anyone already figured out where this is happening?  ...

      >> Warning in par(args) : parameter "cin" can't be set
      >> Warning in par(args) : parameter "cra" can't be set
      >> Warning in par(args) : parameter "csi" can't be set
      >> Warning in par(args) : parameter "din" can't be set
      Paul> ...

    PD> This comes from constructions of the type

    PD> opar<-par()
    PD> work.work.work()
    PD> par(opar)
Yes.

    PD> This gives complaints from unsettable items. Splus quietly omits them,
    PD> so I suppose that we really should do the same.

By the way, I am the one who made this warning reappear (in src/main/par.c).
It was thought for all the other situations where users
have typos in the "tag" (argument) names, e.g.,

	par(lqd = 3)
or really try to set unsettable par()'s.

I think that currently there's no other easy way to detect user
errors like the above.
However, I agree that we should find a better solution.

I myself am using the (``recommended'' ?) way of

 work.work1()
   on.exit(par(op))
   op <- par(xyx = ...,  brd = ...)
 work.work2()
   op <- c(op, par(ghj = ...,  klm = ...))
 work.work3()

which can be slightly more tedious but is ``preciser'' and doesn't lead to
the above error messages.  

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Jun 18 08:44:21 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 18 Jun 1998 09:44:21 +0200
Subject: bug in functions of form "mcpar<-"
References: <XFMail.980617162415.plummer@iarc.fr> <x2n2bcnd3u.fsf@blueberry.kubism.ku.dk>
Message-ID: <3588C555.288AEF94@iarc.fr>

Peter Dalgaard BSA wrote:

> Hmm. We had some pretty antisocial consequences from *not* using the
> value= form with John Chambers' [<-.data.frame code, which assumes
> that it is used that way in order to see whether i,j, or both are
> absent.
> 
> So Splus is using value= on indexing operations only?

Looks like it.  As I said, my other example works in S-PLUS, but try
doing
the same thing with an assignment on an index and you get an error:
(This examples is obviously silly in order to distinguish it from the
default
indexing function).

S> "[<-.foo" <-
function(x,i,value){y<-unclass(x);y[i]<-value+1;class(y)<-"foo";y}
S> x <- 1:10
S> class(x) <- "foo"
S> x[1]<-100
S> x
 [1] 101   2   3   4   5   6   7   8   9  10
attr(, "class"):
[1] "foo"
S> "[<-.foo" <-
function(x,i,bar){y<-unclass(x);y[i]<-bar+1;class(y)<-"foo";y}
S> x[1]<-200
Error in call to [<-.foo(): Argument value= not matched
Dumped

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 18 15:00:50 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 18 Jun 1998 10:00:50 -0400
Subject: bug in functions of form "mcpar<-"
References: <XFMail.980617162415.plummer@iarc.fr> <x2n2bcnd3u.fsf@blueberry.kubism.ku.dk> <3588C555.288AEF94@iarc.fr>
Message-ID: <98Jun18.102135edt.13451@mailgate.bank-banque-canada.ca>

> >So Splus is using value= on indexing operations only?

>Looks like it.  As I said, my other example works in S-PLUS,

Definitely Splus does not in general require "value" as the name of the
argument. I've changed about a dozen instances of this in my code. It turned out
not to be as bad a job as I expected, debugging because of the one change I
missed was the worst part. But everything was working fine in Splus.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 18 15:41:41 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 18 Jun 1998 10:41:41 -0400
Subject: Re^2: Warning in par(args)
References: <199806180643.IAA14504@sophie.ethz.ch>
Message-ID: <98Jun18.110225edt.13458@mailgate.bank-banque-canada.ca>

>I myself am using the (``recommended'' ?) way of
 >work.work1()
 >  on.exit(par(op))
 >  op <- par(xyx = ...,  brd = ...)
 >work.work2()
 >  op <- c(op, par(ghj = ...,  klm = ...))
 >work.work3()
>which can be slightly more tedious but is ``preciser'' and doesn't lead to
>the above error messages.

Martin

Could you please explain the more precise nature of this and why it doesn't give
the error message. I typically use on.exit(par(op)), but perhaps not everywhere.
Is it  on.exit that prevents the message?

Also, my initial reaction was that in the above example the on.exit values would
be set to those in effect during work.work2 rather than those in effect during
work.work1. Perhaps this is not the case, as the following example may
illustrate:

> c(list(a="a"), b=2, a=1)$a
[1] "a"
> c(list(a="a"), b=2, a=1)
$a
[1] "a"
$b
[1] 2
$a
[1] 1

Perhaps this is a case where we may want incompatibility with S in order to
enforce good programming and unintentional errors. I cannot think of a case
where I would want a list with two elements having the same name.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 18 19:44:17 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 18 Jun 1998 13:44:17 -0500 (CDT)
Subject: name "reSt" in debugger
Message-ID: <m0ymjfV-0000Y9C@verdi.stat.wisc.edu>

I keep getting an error message about "return" inside the debugger
when I try to work with an object called reSt.  Here is a transcript
 R> debug( createConLin )
 R> createConLin( distance ~ age, Orthodont, ~ 1 | Subject )
 debugging in: createConLin(distance ~ age, Orthodont, ~1 | Subject)
 debug: Call <- match.call()
 Browse[1]> 
 debug: if (!inherits(fixed, "formula") || length(fixed) != 3) {
	     stop("\nFixed-effects model must be a formula of the form \"resp ~ pred\"")
 }
 Browse[1]> 
 debug: REML <- FALSE
 Browse[1]> 
 debug: reSt <- reStruct(random, REML = REML, data = NULL)
 Browse[1]> 
 debug: groups <- getGroupsFormula(reSt)
 Browse[1]> reSt
 Error: No function to return from, jumping to top level
 Browse[1]> class(reSt)
 [1] "reStruct"
 Browse[1]> print(reSt)
 Error: No function to return from, jumping to top level
 Browse[1]> print(get("reSt"))
 Error: No function to return from, jumping to top level
 Browse[1]> length(reSt)
 [1] 1
 Browse[1]> formula(reSt)
 Error: No function to return from, jumping to top level

Is there something magical about "re" inside the debugger in the same
way that "c" means continue and "n" means next?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 18 22:08:38 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 18 Jun 1998 16:08:38 -0500 (CDT)
Subject: Compiling under Digital Unix
Message-ID: <m0ymlvC-0000Y8C@verdi.stat.wisc.edu>

I tried a compilation of R-0.62.1 on a DEC Alpha that identifies
itself as
 Digital UNIX V4.0A  (Rev. 464); Thu May 14 14:08:00 CDT 1998 
 $ uname -a
 OSF1 atlas.stat.wisc.edu V4.0 464 alpha

I got to the final link step then got an error with 
 gcc -ieee_with_inexact -g -O2 -I../include -c version.c
 f77  -o R.binary arithmetic.o array.o attrib.o bind.o builtin.o character.o coerce.o colors.o complex.o context.o cov.o cum.o debug.o deparse.o deriv.o devices.o dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o format.o fourier.o iosupport.o gram.o list.o logic.o main.o match.o memory.o model.o names.o objects.o optimize.o options.o par.o paste.o plot.o plot3d.o plotmath.o print.o printarray.o printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o sort.o source.o split.o subassign.o subscript.o subset.o summary.o unique.o util.o version.o ../lib/libgraphics.a ../lib/libunix.a ../lib/libappl.a ../lib/libmath.a -lSM -lICE -L/s/X11R6.3-1/lib -lX11 -ldnet_stub -ltermcap -lm 
 ld:
 ../lib/libunix.a(system.o): main: multiply defined
 fort: Severe: Failed while trying to link.

Is anyone familiar enough with Digital Unix to decide why it is
defining main in unix/system.o.  I checked and the symbol is indeed
defined there.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 18 22:52:38 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 18 Jun 1998 16:52:38 -0500 (CDT)
Subject: minor incompatibility in model.matrix
Message-ID: <m0ymmbm-0000c2C@verdi.stat.wisc.edu>

The S and S-PLUS versions of model.matrix will ignore elements of a
contrasts argument that do not correspond to factors.  R does not.  It
produces and error of
 Error: contrasts apply only to factors
even if the contrasts themselves are NULL.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 18 23:09:21 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 1998 00:09:21 +0200
Subject: Compiling under Digital Unix
In-Reply-To: Douglas Bates's message of Thu, 18 Jun 1998 16:08:38 -0500 (CDT)
References: <m0ymlvC-0000Y8C@verdi.stat.wisc.edu>
Message-ID: <x2btrqs6pa.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:


>  f77  -o R.binary arithmetic.o array.o attrib.o bind.o builtin.o character.o coerce.o colors.o complex.o context.o cov.o cum.o debug.o deparse.o deriv.o devices.o dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o format.o fourier.o iosupport.o gram.o list.o logic.o main.o match.o memory.o model.o names.o objects.o optimize.o options.o par.o paste.o plot.o plot3d.o plotmath.o print.o printarray.o printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o sort.o source.o split.o subassign.o subscript.o subset.o summary.o unique.o util.o version.o ../lib/libgraphics.a ../lib/libunix.a ../lib/libappl.a ../lib/libmath.a -lSM -lICE -L/s/X11R6.3-1/lib -lX11 -ldnet_stub -ltermcap -lm 
>  ld:
>  ../lib/libunix.a(system.o): main: multiply defined
>  fort: Severe: Failed while trying to link.
> 
> Is anyone familiar enough with Digital Unix to decide why it is
> defining main in unix/system.o.  I checked and the symbol is indeed
> defined there.

We *always* define main there... However, we do not generally use f77
to link, so my guess would be that the Fortran compiler supplies a
main() of its own. So perhaps you need to link with (g)cc and add in
some Fortran libraries?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 18 23:08:39 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 18 Jun 1998 17:08:39 -0500
Subject: Compiling under Digital Unix
In-Reply-To: Peter Dalgaard BSA's message of 19 Jun 1998 00:09:21 +0200
References: <m0ymlvC-0000Y8C@verdi.stat.wisc.edu> <x2btrqs6pa.fsf@blueberry.kubism.ku.dk>
Message-ID: <6rogvq1hy0.fsf@verdi.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Douglas Bates <bates@stat.wisc.edu> writes:

> > Is anyone familiar enough with Digital Unix to decide why it is
> > defining main in unix/system.o.  I checked and the symbol is indeed
> > defined there.
> 
> We *always* define main there... However, we do not generally use f77
> to link, so my guess would be that the Fortran compiler supplies a
> main() of its own. So perhaps you need to link with (g)cc and add in
> some Fortran libraries?

Of course.  My brain is not functioning it seems.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From C.Farrow@geology.gla.ac.uk  Fri Jun 19 10:28:58 1998
From: C.Farrow@geology.gla.ac.uk (Colin Farrow)
Date: Fri, 19 Jun 1998 10:28:58 +0100
Subject: problem with sub in graphs
Message-ID: <E0ymxTe-00007K-00@alligin>


Use of the graphical parameter 'sub' in a high level graphics function is 
inconsistent, and incompatible with the blue book

> plot(1:10, main="test", sub="demo")
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function

... and why so many warnings?

> hist(1:10, main="test", sub="demo")
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function

... despite the warnings the sub title is drawn !

I think the problem existed in earlier releases of R but the warnings were not 
printed.
 
Above with R-0.62.1 under Solaris 2.5.1.

--------------------
                     \
Colin Farrow          \
                       \---------------------------------------
                        \                                       \
Department of Geology,   \ E-mail: colin@geology.gla.ac.uk       \
University of Glasgow,    \                                       \
Glasgow, G12 8QQ. Scotland \ Tel: +44 (0)41 339 8855 x5466         \
                            \ Fax: +44 (0)41 330 4817               \
`````````````````````````````````````````````````````````````````````````

                                         
                                               
                                               
 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun 19 14:10:41 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 19 Jun 1998 15:10:41 +0200
Subject: problem with sub in graphs
In-Reply-To: <E0ymxTe-00007K-00@alligin> (message from Colin Farrow on Fri, 19
 Jun 1998 10:28:58 +0100)
Message-ID: <199806191310.PAA18120@sophie.ethz.ch>

>>>>> "Colin" == Colin Farrow <C.Farrow@geology.gla.ac.uk> writes:

   Colin>  with R-0.62.1 under Solaris 2.5.1.

    Colin> Use of the graphical parameter 'sub' in a high level graphics
    Colin> function is inconsistent, and incompatible with the blue book

    >> plot(1:10, main="test", sub="demo")

   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function

   Colin> ... and why so many warnings?

Because sub is part of the "..." which are passed down from  plot.default()
to several lower-level functions,
each of which creates (at least) one warning.

     >> hist(1:10, main="test", sub="demo")

   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function

The same here:  hist.default() passes "..." to

	title(..) -- where it works
and to	axis(1,..) \
and	axis(2,..) / where it fails and produces the two warnings.

   Colin> ... despite the warnings the sub title is drawn !


   Colin> I think the problem existed in earlier releases of R but the
   Colin> warnings were not printed.

Exactly.  And because the problem existed, I liked the warnings to appear.
The idea is that the R code (not the low level C graphics) should be fixed;
This would mean that R functions must make sure to only path
valid "..." stuff to C.

Usefully, 
we would have a global option to turn off these warnings.
(as the other graphics warnings ! ==>   
 ``par(err = -1)'' would be the thing
)

Martin 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From C.Farrow@geology.gla.ac.uk  Fri Jun 19 15:36:56 1998
From: C.Farrow@geology.gla.ac.uk (Colin Farrow)
Date: Fri, 19 Jun 1998 15:36:56 +0100
Subject: problem with sub in graphs
Message-ID: <E0yn2Hg-0000Cc-00@alligin>


I understand the problem now. 

Clearly a more systematic approach to the use of ... is required.
In the current example with plot and hist the problem arises because parameters 
of the title function are being passed to other low level graphical functions. 
The solution therefore is that only global graphical parameters such as col, are 
passed via ... and function specific parameters like sub need to be specified in 
the function definition. Hence in the current situation plot.default and 
hist.default require a sub= argument which should be passed only to the title 
function. It currently is not, and yes it would be handy to be able to turn off 
the warnings.


Colin
> 
>     Colin> Use of the graphical parameter 'sub' in a high level graphics
>     Colin> function is inconsistent, and incompatible with the blue book
> 
>     >> plot(1:10, main="test", sub="demo")
> 
>    Colin> Warning: parameter "sub" couldn't be set in high-level plot() 
function
> 
> Exactly.  And because the problem existed, I liked the warnings to appear.
> The idea is that the R code (not the low level C graphics) should be fixed;
> This would mean that R functions must make sure to only path
> valid "..." stuff to C.
> 
> Usefully, 
> we would have a global option to turn off these warnings.
> (as the other graphics warnings ! ==>   
>  ``par(err = -1)'' would be the thing
> )

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 19 16:38:38 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 1998 17:38:38 +0200
Subject: problem with sub in graphs
In-Reply-To: Colin Farrow's message of Fri, 19 Jun 1998 15:36:56 +0100
References: <E0yn2Hg-0000Cc-00@alligin>
Message-ID: <x21zslmmf5.fsf@blueberry.kubism.ku.dk>

Colin Farrow <C.Farrow@geology.gla.ac.uk> writes:

> I understand the problem now. 
> 
> Clearly a more systematic approach to the use of ... is required.
> In the current example with plot and hist the problem arises because parameters 
> of the title function are being passed to other low level graphical functions. 
> The solution therefore is that only global graphical parameters such as col, are 
> passed via ... and function specific parameters like sub need to be specified in 
> the function definition. Hence in the current situation plot.default and 
> hist.default require a sub= argument which should be passed only to the title 
> function. It currently is not, and yes it would be handy to be able to turn off 
> the warnings.

Wait a minute.

Am I the only one sensing that something is badly amiss with that
logic? I agree that that is the essence of the problem, but the
solution seems wrong.

The purpose of '...' is that a function does not be need to know
about certain parameters that are being handled by lower level
routines. It can just pass them along. 

This is very practical for modular programming in that you can just
(e.g.) add an option to a low level function without having to register
it with all other 'upstreams' functions (in different packages and
whatnot). Of course, you still have to be careful about the argument
names but that's fairly easy in practice.

Suppose that a function needs to call *two* such routines. Then why
should it suddenly be made responsible for keeping track of which
arguments make sense to which routine? I'd say that the only sensible
paradigm is that routines that get called with '...' should simply
disregard any arguments they do not understand what to do with.

(I'm also not very happy with the news that S-4 will be enforcing
identical calling sequences for generic methods, but that's another
matter)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 19 16:55:19 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 19 Jun 1998 11:55:19 -0400
Subject: DSE status
Message-ID: <98Jun19.121635edt.13446@mailgate.bank-banque-canada.ca>

I have my DSE library working fairly well now with 0.62.1. It required a few
changes because of the changes to R INSTALL and  "xxx<-" functions. I would like
to tar up a new version soon but

1/ for testing I have been using a kludge in .First.lib to select the first
element of section - since I happen to know that is the element I need given the
way I have  $RLIBS set. This argument to .First.lib should indicate only the
section from which the library comes, so
   paste(library, "/", section, sep="")
gives me the location. Is a fix to this forthcoming or should I work on a better
kludge?

2/ I like the fancy help facility but I am not likely to get around to
converting from my html anytime soon. In the meantime I will make a simple .Rd
file with a general description and hopefully I can get the html version to
point to the link to my full html help. However, I am unclear on the mechanism
for getting the link to a package included into R/doc/html/packages.html with R
INSTALL. Can someone explain how I do this?

3/ I get a lot of
       Warning in par(args) : parameter "cin" can't be set
       Warning in par(args) : parameter "cra" can't be set
        ...
  even using on.exit(old.pars). These are annoying but not serious.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jun 19 18:08:41 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Fri, 19 Jun 1998 12:08:41 -0500 (CDT)
Subject: Compilation of R-0.62.1 on DEC Alpha
Message-ID: <m0yn4eX-0000b2C@verdi.stat.wisc.edu>

I have compiled R-0.62.1 on a DEC Alpha system that is running Digital
Unix 4.0.  I had to change some settings in Makeconf from those
generated by configure.  I changed the LDCMD to gcc and the LIBS to
include -lFutil and -lfor.  (I wonder if they realized how close their
name for the Fortran utilities is to the word "futile".)  I also had
to force it to use the GNU version of the install program as the DEC
version is not as fully featured.

I get a compilation but it creates a floating point exception as soon
as you try to run it.
 $ /unsup/R-0.62.1/bin/R

 R : Copyright 1998, The R Development Core Team
 Version 0.62.1  (June 15, 1998)

 R is free software and comes with ABSOLUTELY NO WARRANTY.
 You are welcome to redistribute it under certain conditions.
 Type    "?license" or "?licence" for distribution details.

 R is a collaborative project with many contributors.
 Type    "?contributors" for a list.

 Type    "demo()" for some demos, "help()" for on-line help, or
	 "help.start()" for a HTML browser interface to help.

 Floating exception(coredump)
 $ 

Has anyone been successful building R-0.62.1 (and running it) on this
platform?

Builds on Solaris/SPARC and Solaris/Intel and Debian GNU/Linux Intel
went smoothly.  I may try to see if I can get a person running Debian
GNU/Linux on an Alpha to try a build there.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 19 18:21:11 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 1998 19:21:11 +0200
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: Douglas Bates's message of Fri, 19 Jun 1998 12:08:41 -0500 (CDT)
References: <m0yn4eX-0000b2C@verdi.stat.wisc.edu>
Message-ID: <x2wwadl33s.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> I get a compilation but it creates a floating point exception as soon
> as you try to run it.
..
>  Floating exception(coredump)
>  $ 

There are two things to this: What on earth is causing a floating
exception at that stage (it might actually be normal)? and why is it
dumping core? The latter sounds as if you might need to put in some
option to force IEEE behaviour.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jun 19 18:33:30 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 19 Jun 1998 12:33:30 -0500
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: Peter Dalgaard BSA's message of 19 Jun 1998 19:21:11 +0200
References: <m0yn4eX-0000b2C@verdi.stat.wisc.edu> <x2wwadl33s.fsf@blueberry.kubism.ku.dk>
Message-ID: <6rvhpxe1p1.fsf@verdi.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> There are two things to this: What on earth is causing a floating
> exception at that stage (it might actually be normal)? and why is it
> dumping core? The latter sounds as if you might need to put in some
> option to force IEEE behaviour.

Is there anything done before the first prompt to initialize the IEEE
NaN, Inf and -Inf?

I do have the -ieee_with_no_inexact flag being passed to gcc.  The end
of the configure output shows

 R is now configured for alpha-dec-osf4.0

   Source directory:         .
   Installation directory:   /usr/local
   C compiler:               gcc -ieee_with_inexact -g -O2
   FORTRAN compiler:         f77 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jun 19 18:44:35 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 19 Jun 1998 12:44:35 -0500
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: Douglas Bates's message of 19 Jun 1998 12:33:30 -0500
References: <m0yn4eX-0000b2C@verdi.stat.wisc.edu> <x2wwadl33s.fsf@blueberry.kubism.ku.dk> <6rvhpxe1p1.fsf@verdi.stat.wisc.edu>
Message-ID: <6ru35he16k.fsf@verdi.stat.wisc.edu>

I see I contradicted myself.

Douglas Bates <bates@cs.wisc.edu> writes:

> I do have the -ieee_with_no_inexact flag being passed to gcc.  The end
                          xxx
...
>    C compiler:               gcc -ieee_with_inexact -g -O2

Strike the "_no"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 19 19:02:35 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 1998 20:02:35 +0200
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: Douglas Bates's message of 19 Jun 1998 12:44:35 -0500
References: <m0yn4eX-0000b2C@verdi.stat.wisc.edu>
 <x2wwadl33s.fsf@blueberry.kubism.ku.dk>
 <6rvhpxe1p1.fsf@verdi.stat.wisc.edu>
 <6ru35he16k.fsf@verdi.stat.wisc.edu>
Message-ID: <x2ra0ll16s.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> 
> I see I contradicted myself.
> 
> Douglas Bates <bates@cs.wisc.edu> writes:
> 
> > I do have the -ieee_with_no_inexact flag being passed to gcc.  The end
>                           xxx
> ...
> >    C compiler:               gcc -ieee_with_inexact -g -O2
> 
> Strike the "_no"
> 

Never mind. The strange thing is that it isn't behaving according to
IEEE specs, because according to those, default behaviour on fp
exceptions is to set a flag and continue. 

I bet the exception is happening in InitArithmetic() in
src/main/arithmetic.c which does some division by zero *before*
setting a signal handler for SIGFPE. Tried running it under the
debugger? (or debugging the core file?)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun 19 18:59:38 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 19 Jun 1998 19:59:38 +0200
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: <6rvhpxe1p1.fsf@verdi.stat.wisc.edu> (message from Douglas Bates
 on 19 Jun 1998 12:33:30 -0500)
Message-ID: <199806191759.TAA27948@sophie.ethz.ch>

>>>>> "DougB" == Douglas Bates <bates@stat.wisc.edu> writes:

    DougB> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
    >> There are two things to this: What on earth is causing a floating
    >> exception at that stage (it might actually be normal)? and why is it
    >> dumping core? The latter sounds as if you might need to put in some
    >> option to force IEEE behaviour.

    DougB> Is there anything done before the first prompt to initialize the
    DougB> IEEE NaN, Inf and -Inf?

Yes!
Look at  ML_POSINF, ML_NAN, etc in  src/include/Mathlib.h

    DougB> I do have the -ieee_with_(..)_inexact flag being passed to gcc.

    DougB> The end of the configure output shows

    DougB>	 R is now configured for alpha-dec-osf4.0

    DougB>	 Source directory:         .
    DougB>	 Installation directory:   /usr/local
    DougB>	 C compiler:               gcc -ieee_with_inexact -g -O2
    DougB>	 FORTRAN compiler:         f77 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 19 18:59:48 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 19 Jun 1998 13:59:48 -0400
Subject: R INSTALL doc woes
Message-ID: <98Jun19.142109edt.13452@mailgate.bank-banque-canada.ca>

I put some documentation in a file dse/man/dse.Rd in and did

R INSTALL -l rlibs dse

This built the copies of dse.Rd in rlibs/dse/{help latex html}.
It also wrote over  R/doc/html/function.html  and  R/doc/html/packages.html,
effectively clobbering all the R documentation.

Also, the link that gets put in R/doc/html/packages.html points to
    R/library/dse/html/00Index.html
rather than
          rlibs/dse/html/00Index.html


Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From arossini@biostat.washington.edu  Sat Jun 20 18:04:21 1998
From: arossini@biostat.washington.edu (Anthony Rossini)
Date: Sat, 20 Jun 1998 10:04:21 -0700 (PDT)
Subject: ["Eric S. Raymond" <esr@snark.thyrsus.com>] The Trove project -- next-generation Internet software archiving (fwd)
Message-ID: <Pine.SUN.3.91.980620100329.6767A-110000@chekov>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--1918950298-1868141776-898362261=:6767
Content-Type: TEXT/PLAIN; charset=US-ASCII


Something to think about for CRAN's future.

best,
-tony

--1918950298-1868141776-898362261=:6767
Content-Type: MESSAGE/RFC822
Content-ID: <Pine.SUN.3.91.980620100329.6767C@chekov>

=====BEGIN PGP SIGNED MESSAGE=====


The Trove project is aimed at producing the next-generation Internet
software archive facility.  Its objective is to replace the ad-hoc
hacks now used at Sunsite, CPAN, PSA, the Red Hat contrib directory
and elsewhere with a flexible and powerful Web-accessible database
that will, among other things, support unified searches across all
Trove archives.

As the person who does most of the package-filing work on Sunsite, I
became convinced some months ago that the classical FTP-tree model of
Internet software archive just doesn't cut it any more.  It's way too
intensive of maintainer time, making it unsustainable as Linux
explodes in popularity.  It also makes software excessively hard to
find unless you're a regular archive user with a map of the site in
your head.

The thin WWW wrappers in place at Sunsite and CPAN make those archives
a little prettier, but don't solve the underlying scaling problems.
The Python guys over at PSA do a bit better on the user side through
effective leveraging of free-text searching, but haven't solved the
maintainer-intensiveness problem.  And none of the ad-hoc archives
talk to or can search each other.

We need a fundamentally new approach, and we need it before these
vital pieces of community infrastructure collapse under their own
weight.  I consider a solution to this problem critical enough that
Trove is now my top priority after continuing the public push for
the open-source development mode.

The Trove project has been up and running for month or so.  The design
has firmed up nicely and working code is beginning to appear.  If you
think you might be interested in helping solve these problems, please
look over the Trove project page at:

        http://www.tuxedo.org/~esr/trove

There's a design document accessible in HTML there that describes the
project's objectives and present status in detail.  

I'm aiming high.  I want the maintainers of the major existing
archives to buy in early, so that by year-end the present creaking
infrastructure can be replaced with something better.  I can deliver
Sunsite myself.  The Python community's leaders are already on board,
and so is Red Hat.  And we've had an expression of interest from
CPAN's maintainer.  Anybody else running an archive site is urged to
join now so we can be sure to accomodate your community's needs in the
design.

We could use more design input (especially from people running archives now),
and we'll need a fair bit of implementation and testing help.  CGI and Web
experts would be particularly welcome, also people who grok PGP and
web-session-authentication problems.
- -- 
                <a href="http://www.tuxedo.org/~esr">Eric S. Raymond</a>

Hoplophobia (n.): The irrational fear of weapons, correctly described by 
Freud as "a sign of emotional and sexual immaturity".  Hoplophobia, like
homophobia, is a displacement symptom; hoplophobes fear their own
"forbidden" feelings and urges to commit violence.  This would be
harmless, except that they project these feelings onto others.  The
sequelae of this neurosis include irrational and dangerous behaviors
such as passing "gun-control" laws and trashing the Constitution.



- -- 
This article has been digitally signed by the moderator, using PGP.
http://www.iki.fi/mjr/cola-public-key.asc has PGP key for validating signature.
Send submissions for comp.os.linux.announce to: linux-announce@news.ornl.gov
PLEASE remember a short description of the software and the LOCATION.
This group is archived at http://www.iki.fi/mjr/linux/cola.html

=====BEGIN PGP SIGNATURE=====
Version: 2.6.3i
Charset: latin1

iQCVAgUBNYfCyVrUI/eHXJZ5AQEBYgP+KfEOmBIqEtnCVElbqNgnz37mpsAbI8ci
nrzFrlesIauq27Wf4ON5Bbv2psS6IzePNI9D3G64QNTYUFbyHnB2fEPd98n5rpMl
JoWjxG1JPIAzE9pPqBZ1Ak6UtGn3MTqPB7GKu9v9DSj6I9rJRF0zRP21Y612Mw9V
XfTMRXPnwkM=
=qIr6
=====END PGP SIGNATURE=====

------------------------------



--1918950298-1868141776-898362261=:6767--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sun Jun 21 04:43:56 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 20 Jun 1998 22:43:56 -0500
Subject: R-0.62.1 on DEC Alpha
Message-ID: <6rpvg3whab.fsf@verdi.stat.wisc.edu>

The good news is that Christopher Chimelis has compiled and
successfully run R-0.62.1 on a DEC Alpha running Linux (Debian
GNU/Linux 2.0 for Alpha).  He needed to set the -mieee flag to the
compiler which, for that system, is the egcc compiler from the egcs
system.

The bad news is that I can get R-0.62.1 to compile on a DEC Alpha
running Digital Unix 4.0 with the gcc 2.7.2 compiler and using the
-ieee flag but it still generates a floating point exception before it
gets to the first prompt.

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jun 22 08:35:30 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 22 Jun 1998 09:35:30 +0200 (CEST)
Subject: DSE status
In-Reply-To: <98Jun19.121635edt.13446@mailgate.bank-banque-canada.ca>
References: <98Jun19.121635edt.13446@mailgate.bank-banque-canada.ca>
Message-ID: <13710.2370.668615.396199@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 19 Jun 1998 11:55:19 -0400,
>>>>> Paul Gilbert (PG) wrote:


PG> 2/ I like the fancy help facility but I am not likely to get around to
PG> converting from my html anytime soon. In the meantime I will make a simple .Rd
PG> file with a general description and hopefully I can get the html version to
PG> point to the link to my full html help. However, I am unclear on the mechanism
PG> for getting the link to a package included into R/doc/html/packages.html with R
PG> INSTALL. Can someone explain how I do this?

The file is built from the directories in $RHOME/library: For each
directory I look if  $RHOME/library/$pkg/TITLE exists and use the
contents of the TITLE file as entry for the package list.

You can build the also by calling

	${RHOME}/etc/build-help --htmllists

The entry points always to

	$RHOME/library/$pkg/html/00Index.$HTML

so by replacing this file you can provide your own HTML documentation.

Hope this helps,
Fritz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jun 22 08:54:49 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 22 Jun 1998 09:54:49 +0200 (CEST)
Subject: R INSTALL doc woes
In-Reply-To: <98Jun19.142109edt.13452@mailgate.bank-banque-canada.ca>
References: <98Jun19.142109edt.13452@mailgate.bank-banque-canada.ca>
Message-ID: <13710.3529.158559.899687@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 19 Jun 1998 13:59:48 -0400,
>>>>> Paul Gilbert (PG) wrote:

PG> I put some documentation in a file dse/man/dse.Rd in and did
PG> R INSTALL -l rlibs dse

PG> This built the copies of dse.Rd in rlibs/dse/{help latex html}.
PG> It also wrote over  R/doc/html/function.html  and  R/doc/html/packages.html,
PG> effectively clobbering all the R documentation.

PG> Also, the link that gets put in R/doc/html/packages.html points to
PG>     R/library/dse/html/00Index.html
PG> rather than
PG>           rlibs/dse/html/00Index.html


The html documentation currently does not support non-standard
library locations, i.e., the packages must be in $RHOME library. Of
course I consider this as a massive bug, but upon fixing it I want to
make it completely right ... which includes building the packages.html
file at runtime from the current .lib.loc. The main problem is that
there seems to be no way of using environment variables such as $USER
or $HOME in html code ... hence I cannot access any file the user is
allowed to write to.

The typical use of
	R INSTALL -l xxx mypkg

IMO is with xxx=$HOME/lib/something and that can't work easily ...

If anybody can help me out with this, please let me know!

I want to build a packages.html file in R and then send the resulting
HTML code to the browser ... how should I call the file such that

*)	the user is allowed to write to it
*)	the file has a name I can reference from systemwide html files
*)	it is on a per-user basis, i.e. /tmp/packages.html is out of
	question.  

fritz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 22 09:43:49 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 Jun 1998 10:43:49 +0200
Subject: problem with sub in graphs
In-Reply-To: <x21zslmmf5.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 19 Jun 1998 17:38:38 +0200)
Message-ID: <199806220843.KAA01498@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Colin Farrow <C.Farrow@geology.gla.ac.uk> writes:
    >> I understand the problem now.  Clearly a more systematic approach to
    >> the use of ... is required.  In the current example with plot and
    >> hist the problem arises because parameters of the title function are
    >> being passed to other low level graphical functions.  The solution
    >> therefore is that only global graphical parameters such as col, are
    >> passed via ... and function specific parameters like sub need to be
    >> specified in the function definition. Hence in the current situation
    >> plot.default and hist.default require a sub= argument which should
    >> be passed only to the title function. It currently is not, and yes
    >> it would be handy to be able to turn off the warnings.

    PD> Wait a minute.

    PD> Am I the only one sensing that something is badly amiss with that
    PD> logic? I agree that that is the essence of the problem, but the
    PD> solution seems wrong.

hmm, maybe not for the particular case.
In the light of my story below, I am convinced that code can be made less
error prone and more robust by using as little "..." as possible
inside basic R functions.

    PD> The purpose of '...' is that a function does not  need to know
    PD> about certain parameters that are being handled by lower level
    PD> routines. It can just pass them along.

Yes,  but......

The problem here is really about catching user typos.
S-plus has been  quite lazy here which has driven people into despair, 
more than once in my epxerience:

Consider the person (especially non-pro statistician) who does

	summary(glm(y~x,familiy=poisson(link="identity")))

and then tries to make sense from what [s]he gets.
	(This is a real story, not made up!  
	 I don't remember how many man hours were lost, but > 2)

In R, a more or less helpful error message ("... unused argument to function"),
whereas in S-plus, there's NO error message and a result that looks quite
reasonable  --- but is just wrong:
Since S has  glm <- function(..........,  ...)
				          ###
the  ``familiy'' is just put into the  "..." part,
	    ^
passed on to glm.fit and never seen there ---
resulting in the default family, i.e. gaussian, being used  which can give
quite reasonably looking results...  but the un-experienced user will
VERY hardly find out.

Note: The above behavior is not a basic merit of R of S(-plus),
      it just happens that glm() in R was written  WITHOUT "..."
      and glm() in S-plus has a "..."

My own lesson learned from the above story:

	1) Use "..." sparingly in functions you write
	2) Still use "<arg>=NULL" arguments which you pass to lower-level
	   functions in order only use "..." once, if possible.
	3) If you pass "..." to lower level functions,
	   they SHOULD be checking  ALL of "..." eventually
	   and tell if there were arguments there with ``wrong'' tags (/names).

	Otherwise, typos in argument names will not be detected and the
	arguments silently dropped.  
	I think this would be too lazy for ``robust'' programming..

    PD> This is very practical for modular programming in that you can just
    PD> (e.g.) add an option to a low level function without having to
    PD> register it with all other 'upstreams' functions (in different
    PD> packages and whatnot). Of course, you still have to be careful
    PD> about the argument names but that's fairly easy in practice.

    PD> Suppose that a function needs to call *two* such routines. Then why
    PD> should it suddenly be made responsible for keeping track of which
    PD> arguments make sense to which routine? I'd say that the only
    PD> sensible paradigm is that routines that get called with '...'
    PD> should simply disregard any arguments they do not understand what
    PD> to do with.

I agree that this is very handy in several cases.
However, in the light of my point "3)" above,
I think we should be more particular here.

Maybe, the lowest level functions  (R or C, I'm not so sure anymore),
should check the names / tags of "..."
and only silently disregard the names if the belong to a subset of
``registered'' names.

In the case of graphics and plot(...),  par(...);
this could be made in a well defined and accessible set.

    PD> (I'm also not very happy with the news that S-4 will be enforcing
    PD> identical calling sequences for generic methods, but that's another
    PD> matter)
yes, indeed  [2 x]

Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 22 11:33:52 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Jun 1998 12:33:52 +0200
Subject: problem with sub in graphs
In-Reply-To: Martin Maechler's message of Mon, 22 Jun 1998 10:43:49 +0200
References: <199806220843.KAA01498@sophie.ethz.ch>
Message-ID: <x2yaupwwrz.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

>     PD> The purpose of '...' is that a function does not  need to know
>     PD> about certain parameters that are being handled by lower level
>     PD> routines. It can just pass them along.
> 
> Yes,  but......
> 
> The problem here is really about catching user typos.
> S-plus has been  quite lazy here which has driven people into despair, 
> more than once in my epxerience:
> 
> Consider the person (especially non-pro statistician) who does
> 
> 	summary(glm(y~x,familiy=poisson(link="identity")))
> 

Point taken, but I still have reservations, mainly in the
division-of-labour department. 

The obvious counterargument is that in Splus, glm internally calls its
method= argument (glm.fitter) with the ..., and there is no way for
glm to know that "familiy" is not a valid argument for a user-supplied
method (-short of some kind of AI proximity testing, I suppose).
Conversely, *if* argument checking was performed in glm, and a user
wanted to use his own supersmart fitting method with some special
arguments, he'd have to modify glm as well. Now take *two* packages,
each modifying glm in their own way...

One way out - but this requires considerable changes - could be to
implement a convention that routines using ... returns a component
called $unmatched. The caller could then take the intersection of
those and if it is non-empty, complain. (If a routine does not
return $unmatched one must assume that everything *is* matched.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 22 14:32:56 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Jun 1998 09:32:56 -0400
Subject: .First.lib
References: <98Jun17.172642edt.13467@mailgate.bank-banque-canada.ca> <13710.2598.967181.382367@pc87.maho.magnaeu.com>
Message-ID: <98Jun22.095547edt.13452@mailgate.bank-banque-canada.ca>

> > There seems to be a minor problem in .First.lib: the library argument
> > is all of $RLIBS. I think it should be just the one directory from
> > which the package is being taken.

> `all of $RLIBS' meaning the full path to the element of lib.loc where
> the package was found?  This is definitely right.  Otherwise, you do not
> have enough information to find e.g. an `.so' file to be loaded by
> library.dynam().

By "all of  $RLIBS" I meant all of the paths in $RLIBS, in my case

> .lib.loc
[1] "/home/res/gilp/dse/pub/Rdse/rlibs"
[2] "/home/res/gilp/padi/my.production/rlibs"
[3] "/home/res8/gilp/R-versions/R-0.62.1/library"
>
However, when I do library("dse") it is using a package in [1] and when
.First.lib for dse is executed I would like the "library" argument to be set to
.lib.loc[1] (in this case) not to  the three element vector .lib.loc.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 22 16:03:56 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Jun 1998 11:03:56 -0400
Subject: R INSTALL doc woes
References: <98Jun19.142109edt.13452@mailgate.bank-banque-canada.ca> <13710.3529.158559.899687@galadriel.ci.tuwien.ac.at>
Message-ID: <98Jun22.112649edt.13453@mailgate.bank-banque-canada.ca>

>The html documentation currently does not support non-standard
>library locations, i.e., the packages must be in $RHOME library. Of
>course I consider this as a massive bug, but upon fixing it I want tomake it
>completely right ... which includes building the packages.html
>file at runtime from the current .lib.loc. The main problem is that
>there seems to be no way of using environment variables such as $USER
>or $HOME in html code ... hence I cannot access any file the user is
>allowed to write to.

If you consider the possibility that a package may not belong to the owner of R
then you rule out a lot of ways for doing this. One possibility might be a set
of links in /tmp (e.g  R.packages and R.package.xxx ). I don't think you could
write these with HTML, you would need to do that with the R startup script, but
an HTML browser can certainly follow them. There is, however, the problem you
alluded to: one user might clobber another one. As far as I know the only
"official HTML" way around this is with cookies, which I don't know much about
and I'm not sure how you would do it.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Jun 22 17:34:56 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Mon, 22 Jun 1998 11:34:56 -0500 (CDT)
Subject: lme_2.9-2.tar.gz available soon on CRAN
Message-ID: <m0yo9YW-0000Y0C@verdi.stat.wisc.edu>

I recently uploaded a new version of the lme contributed library to
the main CRAN site.  It should be available on mirrors within the next
24 hours.

This version matches the beta version of NLME 3.0 for S-PLUS.  It only
provides methods for linear mixed-effects models in R so it is called
lme rather than nlme.  The other big thing that is missing in the R
version is all the graphics because they rely on trellis graphics
functions.

Even with these things missing it is a big step forward for Jose'
Pinheiro and me to have this running under R.  This version can handle
a substantial portion of the models fit by SAS PROC MIXED.  It
computes either maximum likelihood (ML) or restricted maximum
likelihood (REML) estimates for linear mixed-effects models with
single or multiple nested levels of random effects.

The library includes a SAS_Mixed directory with R transcripts of
analyses paralleling those in the book "SAS System for Mixed Models"
by Littell, Milliken, Stroup and Wolfinger.

Please ensure that you get the lme_2.9-2.tar.gz file.  The
lme_2.9-1.tar.gz file has problems with installation of the help files
and has the wrong version listed in the DESCRIPTION file.  (If you
really want to install lme_2.9-1.tar.gz you can do so by removing the
file lme/man/[.pdMat.Rd before trying to run R INSTALL.)

This is still work in progress.  It seems right now that the
variance-covariance matrices with compound symmetry structure are not
behaving properly but I haven't tracked down the problem there yet.

The speed is quite good and can be improved when we get the hooks into
the underlying optimization code in R.  Here is a speed comparison
used in the "SAS Sytems for Mixed Models" book.

> library( lme )
> data( SIMS )
> ### Analysis of the Second International Mathematics Study (SIMS)
> ### described in section 7.2 of "SAS System for Mixed Models"
> unix.time(assign("fm1RSIMS", lme(Gain ~ Pretot, SIMS, ~ Pretot | Class, 
+         REML = TRUE)))
[1] 14.25  0.10 15.00  0.00  0.00
> ### Timing was done on a Pentium Pro 200 MHz system running Linux
> ### Your mileage may vary.
> summary(fm1RSIMS)              # compare to output 7.4, p. 262, "SAS System ..."
Linear mixed-effects model fit by REML
 Data: SIMS 
       AIC      BIC    logLik
  22392.57 22429.85 -11190.29

Random effects:
 Formula: ~Pretot | Class
 Structure: General positive-definite
            StdDev    Corr  
(Intercept) 3.8065218 (Intr)
Pretot      0.0959321 -0.641
Residual    4.7154814       

Fixed effects: Gain ~ Pretot 
                Value Std.Error   z-value p-value
(Intercept)  7.059605  0.365898  19.29390       0
Pretot      -0.186031  0.016098 -11.55592       0
 Correlation: 
       (Intr)
Pretot -0.76 

Standardized Within-Group Residuals:
         Min           Q1          Med           Q3          Max 
-5.377621209 -0.595534211  0.009876494  0.640990584  3.718249985 

Number of Observations: 3691
Number of Groups: 190 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 23 15:45:43 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 23 Jun 1998 10:45:43 -0400
Subject: redundant names
Message-ID: <98Jun23.110915edt.13445@mailgate.bank-banque-canada.ca>

I don't often suggest an incompatibility with S, but I think this behavior in S
and R is very dangerous:

> c(list(a="a"), b=2, a=1)$a
[1] "a"
> c(list(a="a"), b=2, a=1)
$a
[1] "a"
$b
[1] 2
$a
[1] 1

I think this is a case where we may want incompatibility with S in order to
enforce good programming and catch unintentional errors. I cannot think of a
case
where I would want a list with two elements having the same name. I would
suggest  eliminating all but the first of any redundant names (and issuing a
warning?).

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun 24 07:21:36 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Jun 1998 08:21:36 +0200 (CEST)
Subject: redundant names
In-Reply-To: <98Jun23.110915edt.13445@mailgate.bank-banque-canada.ca>
References: <98Jun23.110915edt.13445@mailgate.bank-banque-canada.ca>
Message-ID: <13712.39664.226966.564351@pc87.maho.magnaeu.com>

>>>>> Paul Gilbert writes:

> I don't often suggest an incompatibility with S, but I think this behavior in S
> and R is very dangerous:

>> c(list(a="a"), b=2, a=1)$a
> [1] "a"
>> c(list(a="a"), b=2, a=1)
> $a
> [1] "a"
> $b
> [1] 2
> $a
> [1] 1

> I think this is a case where we may want incompatibility with S in
> order to enforce good programming and catch unintentional errors. I
> cannot think of a case where I would want a list with two elements
> having the same name. I would suggest eliminating all but the first of
> any redundant names (and issuing a warning?).

I am not saying that I have a good example (see below), but some may
want it this way.  Suppose you have a list of complicated records and
you (for some admittedly strange reason) decide you want to store labels
directly as the list names.

E.g.,
	x <- list(a = 3, b = 2, a = 4)
which you later use with
	x[names(x) == "a"]
to work on the records you want.

So I think we should not rule this out in c() (or e.g. [rc]bind()).

But we need to spend more time on how we want list assignment to be in
any case.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jun 24 09:47:51 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 24 Jun 1998 10:47:51 +0200
Subject: Warning in par(args)
In-Reply-To: <98Jun18.110225edt.13458@mailgate.bank-banque-canada.ca> (message
 from Paul Gilbert on Thu, 18 Jun 1998 10:41:41 -0400)
Message-ID: <199806240847.KAA25236@sophie.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    MM> I myself am using the (``recommended'' ?) way of
    MM>    work.work1()
    MM>    on.exit(par(op))
    MM>    op <- par(xyx = ...,  brd = ...)
    MM>    work.work2()
    MM>    op <- c(op, par(ghj = ...,  klm = ...))
    MM>    work.work3()

    MM> which can be slightly more tedious but is ``preciser'' and
    MM> doesn't lead to the above error messages.

    PaulG> Could you please explain the more precise nature of this and why
    PaulG> it doesn't give the error message. I typically use
    PaulG> on.exit(par(op)), but perhaps not everywhere.  Is it on.exit
    PaulG> that prevents the message?

No, it's not the on.exit;
it's the fact the I don't put the *whole* par() into op but rather only
the parts which I change;
e.g.
	> op <- par(mfrow= c(2,2))
	> op
	$mfrow:
	[1] 1 1

Therefore, a later  par(op)  [called by on.exit(.)] only calls par(.) with
arguments that make sens to be changed.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 23 15:53:07 1998
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Tue, 23 Jun 1998 10:53:07 -0400
Subject: un-settable pars
Message-ID: <98Jun23.111627edt.13457@mailgate.bank-banque-canada.ca>


      >> Warning in par(args) : parameter "cin" can't be set
      >> Warning in par(args) : parameter "cra" can't be set
      >> Warning in par(args) : parameter "csi" can't be set
      >> Warning in par(args) : parameter "din" can't be set
    PD> This comes from constructions of the type
    PD>   opar<-par()
    PD>   work.work.work()
    PD>   par(opar)
    PD> This gives complaints from unsettable items. Splus quietly omits them,
    PD> so I suppose that we really should do the same.

One solution here might be to set some attribute on unsettable items,
effectively indicating that it is not to be set and no warning is necessary.

Paul Gilbert


	[This was bounced by majordomo because of the match
	  /^subject:\s*uns\w*b/i [[= "u*su*scribe" with possible typos]]
	 that's why I made "unsettable" to "un-settable".

	 MM, list maintainer]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 24 11:09:37 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Jun 1998 12:09:37 +0200
Subject: Warning in par(args)
In-Reply-To: Martin Maechler's message of Wed, 24 Jun 1998 10:47:51 +0200
References: <199806240847.KAA25236@sophie.ethz.ch>
Message-ID: <x2vhprt8ke.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

>     MM>    on.exit(par(op))
>     MM>    op <- par(xyx = ...,  brd = ...)
>     MM>    work.work2()
>     MM>    op <- c(op, par(ghj = ...,  klm = ...))
>     MM>    work.work3()
...
> Therefore, a later  par(op)  [called by on.exit(.)] only calls par(.) with
> arguments that make sens to be changed.

Yup, but as has been pointed out there's a problem: If you change the
same parameter twice, you actually get the wrong result:

> opar<-par(cex=2)
> opar<-c(opar,par(cex=4))
> par(opar)
> par()$cex
[1] 2

which happens because

> opar
$cex
[1] 1

$cex
[1] 2

and par() sets parameters in the order it finds them. Of course one
could get the first item of each name by using

> opar[unique(names(opar))]
$cex
[1] 1

or let par(opar) do that internally, but I'm not sure that it is
really such a good idea.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 24 17:30:24 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 24 Jun 1998 12:30:24 -0400
Subject: rbind(NULL, matrix("a", 5,3))
Message-ID: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>

I'm get the following anti social behavior from R 0.62.1

Paul
_____
R : Copyright 1998, The R Development Core Team
Version 0.62.1  (June 15, 1998)
...
> rbind(NULL, matrix("a", 5,3))
Arithmetic Exception - core dumped
$ $

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 24 22:46:01 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Jun 1998 23:46:01 +0200
Subject: rbind(NULL, matrix("a", 5,3))
In-Reply-To: Paul Gilbert's message of Wed, 24 Jun 1998 12:30:24 -0400
References: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>
Message-ID: <x2u35aiicm.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I'm get the following anti social behavior from R 0.62.1
> 
> Paul
> _____
> R : Copyright 1998, The R Development Core Team
> Version 0.62.1  (June 15, 1998)
> ...
> > rbind(NULL, matrix("a", 5,3))
> Arithmetic Exception - core dumped
> $ $

Same thing happens here. What's that supposed to do anyway? 
Should be fixable with a bit of defensive coding. (The one good thing
about core dumps is that it is fairly easily to pinpoint where the
problem is...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 25 00:19:51 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 1998 01:19:51 +0200
Subject: rbind(NULL, matrix("a", 5,3))
In-Reply-To: Peter Dalgaard BSA's message of 24 Jun 1998 23:46:01 +0200
References: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>
 <x2u35aiicm.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ogvi75gn.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Same thing happens here. What's that supposed to do anyway? 
> Should be fixable with a bit of defensive coding. (The one good thing
> about core dumps is that it is fairly easily to pinpoint where the
> problem is...)

Fixed now. 

[In src/main/bind.c, just after line 913, insert

                               if ( k == 0 )
                                       mrows = 0;

]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 25 07:46:32 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 25 Jun 1998 08:46:32 +0200
Subject: Warning in par(args) -- the(?) solution
In-Reply-To: <x2vhprt8ke.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 24 Jun 1998 12:09:37 +0200)
Message-ID: <199806250646.IAA27094@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Martin Maechler <maechler@stat.math.ethz.ch> writes:

      MM>   on.exit(par(op))
      MM>   op <- par(xyx = ...,  brd = ...)
      MM>   work.work2()
      MM>   op <- c(op, par(ghj = ...,  klm = ...))
      MM>   work.work3()
      MM> ...

      MM> Therefore, a later par(op) [called by on.exit(.)] only calls par(.)
      MM> with arguments that make sens to be changed.

    PD> Yup, but as has been pointed out there's a problem: If you change the
    PD> same parameter twice, you actually get the wrong result:

    >> opar<-par(cex=2)
    >> opar<-c(opar,par(cex=4))
    >> par(opar)
    >> par()$cex
    PD> [1] 2

    PD> which happens because

    >> opar
    PD> $cex
    PD> [1] 1

    PD> $cex
    PD> [1] 2

    PD> and par() sets parameters in the order it finds them. Of course one
    PD> could get the first item of each name by using

    >> opar[unique(names(opar))]
    PD> $cex
    PD> [1] 1

    PD> or let par(opar) do that internally, but I'm not sure that it is
    PD> really such a good idea.

Wouldn't the ``easy'' solution be 
to use a FILO instead of a FIFO stack :

      >   on.exit(par(op))
      >   op <- par(xyx = ...,  brd = ...)
      >   work.work2()
      >   op <- c(par(ghj = ...,  klm = ...), op) ##--- PREPEND new par() --- !
	                                    #####
      >   work.work3()
      > ...

Of course this also depends on the (current) behavior of par() 
	(``setting parameters in the order it finds them''),
but we could "standardize" par() that way ((and document it!)) 
(and it is S compatible ..).

Martin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 25 16:01:22 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 25 Jun 1998 11:01:22 -0400
Subject: rbind(NULL, matrix("a", 5,3))
References: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>
 <x2u35aiicm.fsf@blueberry.kubism.ku.dk> <x2ogvi75gn.fsf@blueberry.kubism.ku.dk>
Message-ID: <98Jun25.112550edt.13441@mailgate.bank-banque-canada.ca>

>Fixed now.
>[In src/main/bind.c, just after line 913, insert
>                               if ( k == 0 )
>                                      mrows = 0;

I made this change, so the lines around 913 are now

     STRING(result)[i + n + (j * rows)] = STRING(u)[(i + j * mrows) % k];
    n += mrows;
                              if ( k == 0 )
                                       mrows = 0;
   }


and recompiled, but I still get the same problem:

> rbind(NULL, matrix("a", 5,3))
Arithmetic Exception - core dumped

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 25 16:17:11 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 1998 17:17:11 +0200
Subject: rbind(NULL, matrix("a", 5,3))
In-Reply-To: Paul Gilbert's message of Thu, 25 Jun 1998 11:01:22 -0400
References: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>
 <x2u35aiicm.fsf@blueberry.kubism.ku.dk>
 <x2ogvi75gn.fsf@blueberry.kubism.ku.dk>
 <98Jun25.112550edt.13441@mailgate.bank-banque-canada.ca>
Message-ID: <x2soktlde0.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> >Fixed now.
> >[In src/main/bind.c, just after line 913, insert
> >                               if ( k == 0 )
> >                                      mrows = 0;
> 
> I made this change, so the lines around 913 are now
> 
>      STRING(result)[i + n + (j * rows)] = STRING(u)[(i + j * mrows) % k];
>     n += mrows;
>                               if ( k == 0 )
>                                        mrows = 0;
>    }
> 
> 
> and recompiled, but I still get the same problem:
> 
> > rbind(NULL, matrix("a", 5,3))
> Arithmetic Exception - core dumped
> 

Aw, darn ...

Someone must have been adding stuff to my version but not yours...

The lines need to go  *before* the outer for loop. After line 909,
that is. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 25 20:55:46 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 25 Jun 1998 14:55:46 -0500 (CWT)
Subject: Difference in behaviour of model.matrix
Message-ID: <m0ypI7W-000n2IC@jenkins.stat.wisc.edu>

This is an obscure R/S incompatibility but it is tripping up some code
for us in the lme library.  If you specify the contrasts argument in a
call to model.matrix, that seems to take precedence over the
interpretation of the formula.  In S if the formula contains a "- 1",
that will cause the contrasts to be suppressed.

 S> foo <- data.frame(bar = factor(rep(1:3, rep(2,3))))
 S> foo
   bar 
 1   1
 2   1
 3   2
 4   2
 5   3
 6   3
 S> model.matrix(~bar - 1, model.frame(~ bar - 1, data = foo))
   bar1 bar2 bar3 
 1    1    0    0
 2    1    0    0
 3    0    1    0
 4    0    1    0
 5    0    0    1
 6    0    0    1
 S> model.matrix(~bar - 1, model.frame(~ bar - 1, data = foo), 
 +    contr = list(bar = contr.treatment(3)))
   bar1 bar2 bar3 
 1    1    0    0
 2    1    0    0
 3    0    1    0
 4    0    1    0
 5    0    0    1
 6    0    0    1

whereas 

 R> foo <- data.frame(bar = factor(rep(1:3, rep(2,3))))
 R> model.matrix(~bar - 1, model.frame(~ bar - 1, data = foo))
      bar1 bar2 bar3
 [1,]    1    0    0
 [2,]    1    0    0
 [3,]    0    1    0
 [4,]    0    1    0
 [5,]    0    0    1
 [6,]    0    0    1
 attr(,"assign")
 [1] 1 1 1
 R> model.matrix(~bar - 1, model.frame(~ bar - 1, data = foo), 
 +    contr = list(bar=contr.treatment(3)))
      bar2 bar3
 [1,]    0    0
 [2,]    0    0
 [3,]    1    0
 [4,]    1    0
 [5,]    0    1
 [6,]    0    1
 attr(,"assign")
 [1] 1 1

I would be willing to admit that our code should perhaps be redesigned
to avoid this unfortunate construction.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 25 21:37:36 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 1998 22:37:36 +0200
Subject: Difference in behaviour of model.matrix
In-Reply-To: Douglas Bates's message of Thu, 25 Jun 1998 14:55:46 -0500 (CWT)
References: <m0ypI7W-000n2IC@jenkins.stat.wisc.edu>
Message-ID: <x2ogvhxlnz.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> I would be willing to admit that our code should perhaps be redesigned
> to avoid this unfortunate construction.

On the other hand, the R model.xxx code has been in for a rewrite for
quite some time...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 25 22:16:34 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 25 Jun 1998 17:16:34 -0400
Subject: all.equal
Message-ID: <98Jun25.174107edt.13448@mailgate.bank-banque-canada.ca>

I'm not sure what the process is for this, but can I get the following all.equal
function put in the R base?

Paul Gilbert
____

all.equal <- function(obj1, obj2,...) {UseMethod("all.equal")}

all.equal.default <- function(obj1, obj2, tolerance=.Machine$double.eps)
  {if(mode(obj1)      != mode(obj2) )               return("modes differ.")
   if (length(obj1) != length(obj2) )               return("lengths differ")

   if(is.null(class(obj1)) != is.null(class(obj2))) return("classes differ.")
   else if(!is.null(class(obj1))
           && any(class(obj1) != class(obj2)) )     return("classes differ.")


   if(is.null(attributes(obj1)) != is.null(attributes(obj2)))
                                                    return("attributes differ.")

   else if(!is.null(attributes(obj1))
           && any(unlist(attributes(obj1)) != unlist(attributes(obj2))))
                                                    return("attributes differ.")

   cull.numeric  <- function(obj, r=NULL) {
      if (is.null(obj) | (length(obj) == 0)) return(r)
      else if (is.numeric(obj)) return(c(r,obj))
      else if (is.list(obj))
           return( c(cull.numeric(obj[[1]], r), cull.numeric(obj[-1])) )
      else return(r)
     }

   z1 <- cull.numeric(obj1)
   if(! is.null(z1))
      {z2 <- cull.numeric(obj2)
       if (length(z1) != length(z2) )  return("length of numeric parts differ")
       M <- pmax(abs(z1), abs(z2))
       # next line results in absolute rather than relative comparison for
       # very small numbers.
       M[ M < 100 *tolerance] <- 1
       if (any(abs(z1 -z2) > tolerance * M))
                       return("numeric value differences exceed tolerance.")
      }
  # next comparison is really for non-numeric values but also compares
  # numeric values to the tolerance of the character representation in unlist.
   if (! all(unlist(obj1) == unlist(obj2)))     return("values differ.")
   T
  }



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun 26 13:45:11 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Jun 1998 12:45:11 -0000 ()
Subject: R-beta: PostScript tick marks in 62.1
In-Reply-To: <Pine.3.87.9806251017.A16855-0100000@superh.hg.med.umich.edu>
Message-ID: <XFMail.980626130136.plummer@iarc.fr>

[Moved over from R-help - MTP]

On 25-Jun-98 Matthew R. Nelson wrote:
>I should have added that the plot was generated with log="xy".  On my 
>computer, this simple example recreates the problem:
>
>> postscript("tmp.ps", width=6, height=6, family="Times") 
>> plot((1:10)^2, (1:10)^3, log="xy") 
>> dev.off()
>
>With this simple plot function, I get 2 x-axis tick marks and 1 y axis 
>tick mark, but the expected number of axis labels.

I get the same thing. Sorry for doubting you, but a concrete example
helps to locate the problem.  The missing tick marks are being clipped
because somewhere in the graphics code, the information that we are
using the log scale for the axes is being lost.

Here's a patch for src/graphics/graphics.c

M.

--- graphics.c  Fri Jun 26 14:29:04 1998
+++ graphics.new        Fri Jun 26 14:30:42 1998
@@ -999,13 +999,19 @@
 double xDevtoUsr(double x, DevDesc *dd)
 {
   double nfc = xDevtoNFC(x, dd);
-  return (nfc - dd->gp.win2fig.ax)/dd->gp.win2fig.bx;
+  if (dd->gp.xlog)
+     return pow(10, (nfc - dd->gp.win2fig.ax)/dd->gp.win2fig.bx);
+  else
+     return (nfc - dd->gp.win2fig.ax)/dd->gp.win2fig.bx;
 }

 double yDevtoUsr(double y, DevDesc *dd)
 {
   double nfc = yDevtoNFC(y, dd);
-  return (nfc - dd->gp.win2fig.ay)/dd->gp.win2fig.by;
+  if (dd->gp.ylog)
+    return pow(10, (nfc - dd->gp.win2fig.ay)/dd->gp.win2fig.by);
+  else
+    return (nfc - dd->gp.win2fig.ay)/dd->gp.win2fig.by;
 }
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 26 14:57:41 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Jun 1998 15:57:41 +0200
Subject: R-beta: PostScript tick marks in 62.1
In-Reply-To: Martyn Plummer's message of Fri, 26 Jun 1998 12:45:11 -0000 ()
References: <XFMail.980626130136.plummer@iarc.fr>
Message-ID: <x2yauki7u2.fsf@blueberry.kubism.ku.dk>

Martyn Plummer <plummer@iarc.fr> writes:

> I get the same thing. Sorry for doubting you, but a concrete example
> helps to locate the problem.  The missing tick marks are being clipped
> because somewhere in the graphics code, the information that we are
> using the log scale for the axes is being lost.
> 
> Here's a patch for src/graphics/graphics.c
...

Now applied to the bugfix branch. Thank you.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 26 16:41:12 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 26 Jun 1998 11:41:12 -0400
Subject: scoping
Message-ID: <98Jun26.120612edt.13454@mailgate.bank-banque-canada.ca>

Can Luke Tierney's recent S-new post on scoping be included in the R FAQ?

I'm just going through my package and eliminating a few instances of "eval" as I
hadn't realized the dangers. I noticed that one way I've used eval is for
prompting, as in

n <- eval(parse(prompt="Enter the number of singular values to use: "))

I presume this is not too dangerous, but this has never really seemed like the
right way to do this. Can someone suggest a better alternative?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun 26 17:19:16 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Jun 1998 16:19:16 -0000 ()
Subject: scoping
In-Reply-To: <98Jun26.120612edt.13454@mailgate.bank-banque-canada.ca>
Message-ID: <XFMail.980626163001.plummer@iarc.fr>

On 26-Jun-98 Paul Gilbert wrote:
>Can Luke Tierney's recent S-new post on scoping be included in the R FAQ?

Could this be cross-posted?

>I'm just going through my package and eliminating a few instances of "eval" as
>I
>hadn't realized the dangers. I noticed that one way I've used eval is for
>prompting, as in
>
>n <- eval(parse(prompt="Enter the number of singular values to use: "))
>
>I presume this is not too dangerous, but this has never really seemed like the
>right way to do this. Can someone suggest a better alternative?

If you just want to read in a number, I think it's a lot safer to read
the input as character data with "readline" and then coerce it to numeric.
I wrote a utility function called "read.and.check" which does this. It
also checks that the user input satisfies certain conditions (mode,
lower and upper limit for numeric data, or set of allowed values), looping
until it gets an acceptable answer. It's in the coda package, with a help page.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Jun 26 18:27:05 1998
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 26 Jun 1998 12:27:05 -0500 (CDT)
Subject: scoping
In-Reply-To: <XFMail.980626163001.plummer@iarc.fr> from "Martyn Plummer" at Jun 26, 98 04:19:16 pm
Message-ID: <9806261727.AA29516@nokomis.stat.umn.edu>

Martyn Plummer wrote:
> 
> On 26-Jun-98 Paul Gilbert wrote:
> >Can Luke Tierney's recent S-new post on scoping be included in the R FAQ?
> 
> Could this be cross-posted?
> 

Here is the posting -- it was part of a thread on scoping in S.

John Maindonald wrote:
> 
> Jens Oehlschlaegel-Akiyoshi wrote, in response to John Thaden
> 
> > in S+ no function has automatic access to any local variables of any
> > parent functions FOR SECURITY REASONS (except for objects in frames 0+1). 
> There must of course be some scoping rules, and what scoping rules]
> are at the end of the day preferable is a matter for debate.

This debate has been pretty much settled in computer
science. Virtually all modern functional and near functional languages
use lexical scope. This includes all modern Lisp variants, the ML
family, Haskell, Miranda, etc. The theoretical underpinnings for these
languages is provided by the lambda calculus, which uses lexical
scope. Lexical scope is now considered essential for a higher level
functional language (i.e. a functional language that uses functions as
first-class values). This is the main reason S, even though it has
first class function values, is rarely used as a higher order
functional language. (Another reason is that most S users do not come
to S with a background of using a functional style, and with the lack
of lexical scoping it is probably not worth learning in the context of
S.)

In lexical scope, the meaning of a free variable in a function is
determined by the context in which the function is defined. For
example, in R (which Doug Bates mentioned in this thread and which is
lexically scoped)

	poisson.loglik<-function(x) {
				xbar<-mean(x)
				n<-length(x)
				function(lambda){
					n * (xbar * log(lambda) - lambda)
				}
			}
	pl<-poisson.loglik(rpois(10,2))

the value of pl is a log-likelihood function for the poisson sample
created by rpois(10,2). This was the value of the free variable x in
the inner function's definition when it was created, and this value is
locked into the function object (or closure) at creation time along
with the function definition. It does not matter what variables named
x are around when the function pl is called.

Another common scoping rule is dynamic scoping, where values of free
variables are determined by the environment in which they are
used. The log-likelihood example would not work at all with dynamic
scope since the x used would depend on what x was available each place
pl is called. Dynamic scope is what you get with macro languages and
was in effect what you had with S Version 1 where you only had macros,
not functions, available. Dynamic scoping is very occasionally useful,
but as a general rule it is much more error-prone and much less
powerful than lexical scope.

S uses a different rule: If a variable is not a local variable (a
function argument or a variable created by an <- assignment) then it
is global. This rule is much less error-prone than dynamic scoping but
also much less powerful than lexical scope. Some scripting languages
also use this rule (I think Tcl and Python do, though I haven't double
checked). There are probably several reasons why S chose to use this
rule, but the most important one is probably that lexical scope,
together with the ability to change a variable's value by assignment,
means you cannot save functions to separate files by writing out their
definitions.  Functions can be interrelated in arbitrary ways through
their defining environments, and the only easy safe way to preserve
these relationships when saving to disk is to save an entire workspace
(as R does). S's approach to persistent storage is incompatible with
lexical scope for its functions. I'm sure at the time the price of
changing the approach to storage just to accommodate lexical scope
seemed far too expensive, so the simpler scoping rule was adopted.

But the simple rule is not as expressive as lexical scope, and there
are certain things that cannot be done if only this standard scoping
rule is used; the modeling functions are one example. So S provides an
alternative: By using eval/frame access/get/assign in conjunction with
S's version of lazy evaluation (I'll call this eval for short) you can
write functions whose calls behave almost any way you want to. This is
a major difference from almost all other languages I am familiar
with. In other languages the scoping rules are absolute. In S, they
can be circumvented. This ability adds a great deal of power but it
also provides an enormous amount of rope with which to hang yourself.

Most of the time you can ignore this added power of S. If you write a
function and

	only use functions whose calls follow the standard scope rules

	don't use eval (or related things)

then the S language will guarantee that calls to your function will
follow the standard scope rules. You don't need to do anything special.

If on the other hand, you use eval, or one of the functions you call
does not follow the standard scope rules, then all bets are off. If it
is your intent to write a function that follows standard scope rules,
or if you plan to deviate from those rules in some particular way (as
the modeling functions do) then it is now your responsibility as the
programmer, instead of the language's responsibility, to make sure
things work right. This makes writing the function correctly much
harder. Therefore, if you are writing a function that follows standard
scope rules and find yourself using eval because it seems like a quick
fix, you should probably back off and see if you can avoid using
eval. In very rare cases you can't, but in almost all cases you can
and should.

There was a nice example of this issue in this list about a week
ago. Someone had written a function that called trellis.device.  The
function didn't work right even though the trellis.device call worked
right at top level. It was suggested that the poster had
miss-interpreted S's scope rules. In fact, if trellis.device were a
function following standard scope rules (as the poster had every right
to expect since the documentation does not suggest that it is not)
then the poster's function would have worked correctly. It turns out
that the author of trellis.device used eval in a way that caused a
departure from standard scope rules for calls to the function.  This
use of eval seems convenient on the surface but was not
necessary---direct manipulation of a captured ... argument list
followed by do.call, which is safe, would have done the job and made
it impossible for this kind of error to occur in the first place (but
see the **** note at the bottom). The bottom line again: If you are
using eval and you are not trying to do something that departs form
standard scope rules, you probably shouldn't.

All that said, there are cases where, given the limited expressive
power of S's standard scope rules, you really do have to use eval to
achieve certain result. The modeling functions are such a case.  The
convention adopted for the modeling functions is to use dynamic
scoping for determining values for variables in formulas if explicit
data are not provided. This is a debatable choice. Dynamic scope has
its uses, but since inadvertent variable capture is so easy to fall
into and so hard to prevent, it is probably not such a good idea.
An example: 

> x<-1:10
> y<-x+rnorm(10)
> f<-function(m) lm(m)
> g<-function(x) lm(x)

The functions f and g look equivalent, but they aren't:

> f(y~x)
Call:
lm(formula = m)
...
> g(y~x)
Error in g(y ~ x): Length of variable 2 is 3 != length of row names (10)

The local variable x in g, the formula, shadows the global one and
causes lm to fail. Of course if the formula contained a variable m
then f would be in trouble. I have discussed this issue with several
individuals close to the S developers who argued that this behavior is
a feature. I do not think it is the best design choice. But it is the
design choice in use, and one can live with it if this is understood.
But since eval is needed to accomplish this behavior it is up to the
programmer to insure that this design is adhered to, rather than being
guaranteed by language design features.

A better design choice, in my view, would have been to insure that
formulas are always interpreted in the context in which they are
created, so that lm would automatically see the global x and y as the
values relevant to the formula even though it is called inside f or g
in these examples. Put another way, instead of thinking of ~ as merely
a quoting operation like it is now, it should be viewed as a
closure-creating operation that follows lexical scope rules. The
resulting formula should contain not only the expression but also (at
least conceptually) the current values of the variables referenced in
the expression, if there are any available. This approach would
produce results closer to what most users would tend to expect until
they read the fine print (the example above would work properly). It
would also eliminate the need to use eval in this context, thus
eliminating a serious source of possible programming errors.

But of course this approach comes at a price: it is essentially
introducing lexical scope, with all the old issues of separate data
storage. The design choice made in S was clearly the easier one to
implement. On the other hand, a language like R that already has
lexical scope could implement this approach quite easily, but at the
cost of losing compatibility with S.

(The idea described by Rod Ball of adjusting the frame to use for
variable lookup, if I understand it correctly, is intended to achieve
similar results. But it has two drawbacks. One, it would be very
expensive in runtime overhead, but more importantly it would only work
within the dynamic extent of the call. If a fit is created in a nested
call, stored, and then reused later in an unrelated call, things will
no longer work right. Proper lexical scope avoids this.)

(**** Actually things are not quite so simple with do.call. What the
trellis.device function needed is the ability to construct an argument
list at run time, obtain a function at run time, and then call the
function with the argument list. This is almost what do.call does,
except it expects its function argument to be a string naming the
function, not an expression whose value is a function. This seems like
a strange design, but there is probably a good reason for it. It is possible
to use the current do.call by using something like

	tmpfun<- ... expression making function ...
   	do.call("tmpfun", args)

but this is awkward. It would be cleaner to define a version of
do.call, say do.call.expr, that allows its function to be specified as
an expression. This does of course require the use of eval again, as
does the definition of do.call, but it can be done carefully once and
for all to produce a function that obeys standard scope rules, as
do.call does, and then this function can be used safely whenever this
type of operation needs to be performed. If and when there is a real
need to use eval this is a good strategy: abstract out the core that
needs eval into function, and make the function use standard scoping
or carefully document how and why it doesn't. Then you can always use
this abstraction when you need it instead of manually inserting the
corresponding code with the associated risks of errors.)

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
206 Church Street                            email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Jun 26 19:01:30 1998
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 26 Jun 1998 13:01:30 -0500 (CDT)
Subject: scoping
In-Reply-To: <98Jun26.120612edt.13454@mailgate.bank-banque-canada.ca> from "Paul Gilbert" at Jun 26, 98 11:41:12 am
Message-ID: <9806261801.AA29578@nokomis.stat.umn.edu>

Paul Gilbert wrote:
> 
> 
> n <- eval(parse(prompt="Enter the number of singular values to use: "))
> 

As Martyn suggested, if you just want a number it is better to use
someting that just deals with numbers. If you do want the user to be
able to respond with an arbitrary S expression, then this is one case
where eval does make sense, but it should be used with caution. The
default behavior of eval is to use evaluate in the calling environment,

> p<-function(x) eval(parse(prompt="Enter an expression: "))
> p(3)
Enter an expression: x
[1] 3

This is probably not what you want. In S the official way to get eval
to use the global environment/frame is eval(expr,F) (this is what the
try.S example in the help page does). In R you seem to need
eval(expr,0). I *think* this works in S too, but I'm always a bit
confused about frames 0 and 1. There may be another approach that
works cleanly in both.

If you have need for this kind of thing in several places it would be
a good idea to abstact it out as a utility function,
prompt.for.expression say, carefully get that function right, and then
only access this facility through that function.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
206 Church Street                            email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 26 19:12:32 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 26 Jun 1998 14:12:32 -0400
Subject: all.equal
References: <199806261638.SAA00754@sophie.ethz.ch>
Message-ID: <98Jun26.143732edt.13446@mailgate.bank-banque-canada.ca>

>I don't have time to look at your new version,
>however, I *did* look at the last one and tried to replace

>However, your version wasn't good enough to "work" for  'make tests'
>[[ even after fixing the default tolerance which should be
>   changed from
>                .Machine$double.eps
>to              sqrt(.Machine$double.eps)

Martin

The version I just posted is the same as the last one (called cut three). I'm
not sure what 'make tests' is suppose to do. I just ran it and it gave me a
bunch of error messages. It also looks like it may have changed some things to
mess up my working copy of R, but I'm not sure.

If you can be more specific about how this all.equal is not good enough for
'make tests' then I will try to fix it. I'm not sure what the general wisdom is
and I realize that .Machine$double.eps is a fairly tight comparison, but I
routinely test things to tighter tolerances than sqrt(.Machine$double.eps). The
change in C libraries between Splus 3.1 and 3.2 made large cumulative
differences in some of my simulations and I never would have found the problem
if I had only been checking calculations to sqrt(.Machine$double.eps).

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun 30 09:45:38 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 30 Jun 1998 10:45:38 +0200
Subject: gl() in S -- puzzle
Message-ID: <199806300845.KAA04635@sophie.ethz.ch>

In order to run some  R examples in  S & Splus,
I want the gl() function in S.

In R, it is

gl <- function (n, k, length = n * k, labels = 1:n, ordered = FALSE) 
	factor(rep(rep(1:n, rep(k, n)), length = length), labels = labels, 
	      ordered = ordered)

Since S's  factor() has no "ordered= F" argument,
in S we need to call ordered() instead of factor() in the case of
ordered=T.

I came up with the following definition

gl <- function (n, k, length = n * k, labels = 1:n, ordered = FALSE) 
  (if(ordered) get("ordered",mode="function") else factor)(
                               rep(rep(1:n, rep(k, n)), length = length),
                               labels = labels)

which works both in R and S,
as long as you keep ordered = FALSE), e.g.

	gl(3,2,12)
	gl(2,8,32, label=c("Ctnrl","Treat"))

Then, in R (with the above definition of gl() [and with the builtin one]):

    R> gl(3,4,24, ordered=T)
     [1] 1 1 1 1 2 2 2 2 3 3 3 3 1 1 1 1 2 2 2 2 3 3 3 3
    Levels:  1 < 2 < 3 

However, in S

	S> gl(3,4,24, ordered=T)

	Error in gl: object of mode ( and length 2 used as string value: (if(ordered) get("ordered", mode = "function") else factor)
		. . .
	Dumped
	S> 

If you do

	S> rr <- (if(T) get("ordered", mode = "function") else factor)
	S> rr
is the  ordered(.) function as it should and there doesn't seem to be a
problem if I do the things in  top-level [i.e. on the command line].

---
what's the problem in S ?

Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 30 10:13:13 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Jun 1998 11:13:13 +0200
Subject: gl() in S -- puzzle
In-Reply-To: Martin Maechler's message of Tue, 30 Jun 1998 10:45:38 +0200
References: <199806300845.KAA04635@sophie.ethz.ch>
Message-ID: <x2u3536ymu.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:


> gl <- function (n, k, length = n * k, labels = 1:n, ordered = FALSE) 
>   (if(ordered) get("ordered",mode="function") else factor)(
>                                rep(rep(1:n, rep(k, n)), length = length),
>                                labels = labels)
...
> 	S> gl(3,4,24, ordered=T)
> 
> 	Error in gl: object of mode ( and length 2 used as string value: (if(ordered) get("ordered", mode = "function") else factor)
> 		. . .
...
> ---
> what's the problem in S ?

A bug, probably. It might help to eval() the if(ordered)... bit
explicitly or split the expression i two steps {FUN<-if(ordered); FUN(...)}

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 30 11:28:09 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Jun 1998 12:28:09 +0200
Subject: gl() in S -- puzzle
In-Reply-To: Martin Maechler's message of Tue, 30 Jun 1998 10:45:38 +0200
References: <199806300845.KAA04635@sophie.ethz.ch>
Message-ID: <x27m1zyyiu.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> gl <- function (n, k, length = n * k, labels = 1:n, ordered = FALSE) 
>   (if(ordered) get("ordered",mode="function") else factor)(
>                                rep(rep(1:n, rep(k, n)), length = length),
>                                labels = labels)

Tried following my own advice and it didn't work... However, after a
bit of fiddling, I realised that this boils down a bug that I've
stumbled across before:

> test<-function(sin)get("sin",mode="function") 
> test()
.Argument(, sin = )
> test(2)
[1] 2

I.e. get() is ignoring its mode= argument when used inside a function!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun 30 16:56:40 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 30 Jun 1998 17:56:40 +0200
Subject: stable / R-announce
Message-ID: <199806301556.RAA06217@sophie.ethz.ch>

Dear Philippe,
thank you for the  ``stable''  package.

I think we should include the four  probability/RNG function into
base R.
	[Maybe also the "stableglm"  part (haven't yet looked at it),
	 especially if it could be made to work with  glm() and family().]
Would this be okay with you?

All of R base follows GNU Copyleft.
But your contribution can also have your own Copyright if desired.

--------------------------

You posted to R-announce;
	R-announce autmatically ``forks'' to R-help,
	and the R-announce list proper.

For some spammer protection, I have "R-announce" only accepting postings
from its members, i.e. you must be in either 
R-help or R-announce in order to post to R-announce.

Now I see that you belong to R-help (even to R-devel)  *BUT*
not with the same e-mail with which you posted to R-announce.
You posted with the address I use above,
but you are in r-help with
	Philippe Lambert <phlamber@luc.ac.be>

That's why the mailing list software, majordomo, decided that you are *not*
part of ``R-announce'' (= R-help + R-announce proper)  and
bounced your mail...

To change this, you must re-subscribe
(unsubscribe old e-mail and subscribe new e-mail  (in 1 message if you want..)).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun  2 14:53:51 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 2 Jun 1998 15:53:51 +0200
Subject: "fgrep" for help \\  IBM PowerPC AIX
In-Reply-To: <Pine.LNX.3.96.980529093038.23645E-100000@buffy> (message from
 Thomas Lumley on Fri, 29 May 1998 09:33:53 -0700 (PDT))
Message-ID: <199806021353.PAA08413@sophie.ethz.ch>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> ......
    TL> Currently "%*%" doesn't have any help but help
    TL> requests get routed to Arith, because "%*%" as a regular expression
    TL> matches "%%". I will add this to the special cases in help(), but
    TL> should we use fgrep instead of grep in cmd/help?

Yes --- if  "fgrep" is available as widely as "grep".

	[can you check on your machine(s), dear R-develers?
	 any that doesn't have fgrep ??
	 Test:
		echo 'abcdef*' | fgrep 'c*d'
	 should NOT return anything]

I think it should be..  
just checked: it *is* available even on AIX 4.2;
a (PowerPC) system I got an account about ten days ago, because it's
owner and part-time maintainer wanted to run R.

  -  R 0.61.3   configure finds gcc and installs without any warning,
     BUT
	R>  max(1)
	[1]NaNQ
	R> min(1:10)
	[1]NaNQ
	R> range(pi)
	[1]NaNQNaNQ

     which breaks almost everything.

  - R 0.62 configure finds  "xlc" a compiler which ``is said'' to be good,
    at least one of its warnings lead to me to look at src/appl/eigen.c
    and remove some extraneous definitions there....

    However, I haven't been able to compile there (link problems), and
    don't really have documentation about AIX, xlc, etc.

Has anyone have better knowledge and/or experiences with AIX?
Of course, I can give more details on how compilation fails.

I'm particularly interested in compilation success of 0.62 (development
version). 

Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun  2 15:41:42 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 2 Jun 1998 10:41:42 -0400
Subject: "as.numeric" / "As.numeric" [was "R-beta: bugs and problems"]
References: <199806021002.MAA00877@sophie.ethz.ch>
Message-ID: <98Jun2.105400edt.13497@mailgate.bank-banque-canada.ca>

>User functions written for both R and S should get the same
>thing for as.numeric(.).

I would like the same result here. As for the "As." functions, I would not be
inclined to encourage people too much to program things at this level in a way
that would not also work in S. The result may be that they decide they must make
a choice between the languages, and I don't think that would be a good thing.
One way around that is to include the "As." functions in a set of compatability
functions which can be used as programming tools in both S and R. (I have a
small set of these, but there are lots of things that could be added.)

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Wed Jun  3 18:39:43 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Wed, 3 Jun 1998 12:39:43 -0500 (CDT)
Subject: lty
Message-ID: <Pine.OSF.3.95.980603123254.32361A-100000@io.uwinnipeg.ca>

I find, viewing the output with ghostview, that lty="2","3", or "4" gives
the same dashed line. So basically you have choice of solid ("1") or
dashed ("2","3","4").

If this is not implemented yet, maybe the docs should reflect it?

Hmm now I tried plotting with both lty="2" and lty="3" for two separate
functions on one plot, and the lty="2" one is invisible now.  This looks
like a bug in the snapshot.

Thanks for any help.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Wed Jun  3 18:46:49 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Wed, 3 Jun 1998 12:46:49 -0500 (CDT)
Subject: lty
Message-ID: <Pine.OSF.3.95.980603124425.726A-100000@io.uwinnipeg.ca>

Sorry, my previous message said using lty="2" made line disappear.  Wrong.

What happens is that
"2" is dots
"3" is dashes

BUT docs say
"2" is dashes
"3" is dots

So there is an error in the docs.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  3 20:19:00 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Jun 1998 21:19:00 +0200
Subject: lty
In-Reply-To: Bill Simpson's message of Wed, 3 Jun 1998 12:46:49 -0500 (CDT)
References: <Pine.OSF.3.95.980603124425.726A-100000@io.uwinnipeg.ca>
Message-ID: <x2g1hms38b.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsimpson@uwinnipeg.ca> writes:

> 
> Sorry, my previous message said using lty="2" made line disappear.  Wrong.
> 
> What happens is that
> "2" is dots
> "3" is dashes
> 
> BUT docs say
> "2" is dashes
> "3" is dots
> 
> So there is an error in the docs.

Nope:
	lty=1 solid
	lty=2 dashed
	lty=3 dotted
	lty=4 dotdashed
	lty="1" pattern: 1 "dot" on, 1 "dot" off
	lty="2" pattern: 2 "dots" on, 2 "dots" off
	lty="3" pattern: 3 "dots" on, 3 "dots" off
	lty="32" pattern: 3 "dots" on, 2 "dots" off
	lty="124" pattern: 1 on, 2 off, 4 on, 1 off, 2 on, 4 off, 
	...and so forth...

You can see this clearly if you start with par(lwd=5). As far as I can
see without actually digging into the source,

2 == "4"
3 == "13"
4 == "3134"

So the docs are OK, but perhaps we need to distinguish more clearly
between integer and character lty's.

The dot-dash pattern on X11 looks wrong, though. I think it should
have been "1343", i.e. same pattern, reverse colors.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill Simpson <wsimpson@uwinnipeg.ca>  Wed Jun  3 20:32:37 1998
From: Bill Simpson <wsimpson@uwinnipeg.ca> (Bill Simpson)
Date: Wed, 3 Jun 1998 14:32:37 -0500 (CDT)
Subject: lty
In-Reply-To: <x2g1hms38b.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.3.95.980603142647.5513A-100000@io.uwinnipeg.ca>

> > Sorry, my previous message said using lty="2" made line disappear.  Wrong.
> > 
> > What happens is that
> > "2" is dots
> > "3" is dashes
> > 
> > BUT docs say
> > "2" is dashes
> > "3" is dots
> > 
> > So there is an error in the docs.
> 
> Nope:
> 	lty=1 solid
> 	lty=2 dashed
> 	lty=3 dotted
> 	lty=4 dotdashed
> 	lty="1" pattern: 1 "dot" on, 1 "dot" off
> 	lty="2" pattern: 2 "dots" on, 2 "dots" off
> 	lty="3" pattern: 3 "dots" on, 3 "dots" off
> 	lty="32" pattern: 3 "dots" on, 2 "dots" off
> 	lty="124" pattern: 1 on, 2 off, 4 on, 1 off, 2 on, 4 off, 
> 	...and so forth...

Peter, to me (and this is English language) "dot" is shorter than "dash"!
.-.--
dot dash dot dash dash.

So "dot" SHOULD be label for lty="2" pattern: 2 "dots" on, 2 "dots" off
And "dash" SHOULD be label for lty="3" pattern: 3 "dots" on, 3 "dots" off.
Since dot is shorter than dash.

> 
> You can see this clearly if you start with par(lwd=5). As far as I can
> see without actually digging into the source,
This is answer to previous posting on lwd.  So it is there, just not
documented. Thanks.

> The dot-dash pattern on X11 looks wrong, though. I think it should
> have been "1343", i.e. same pattern, reverse colors.
My comments above were based on viewing saved plot with ghostview and
actually printing it with ghostscript.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  3 20:58:32 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Jun 1998 21:58:32 +0200
Subject: lty
In-Reply-To: Bill Simpson's message of Wed, 3 Jun 1998 14:32:37 -0500 (CDT)
References: <Pine.OSF.3.95.980603142647.5513A-100000@io.uwinnipeg.ca>
Message-ID: <x2btsas1ef.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsimpson@uwinnipeg.ca> writes:

> > 	lty=1 solid
> > 	lty=2 dashed
> > 	lty=3 dotted
> > 	lty=4 dotdashed
> > 	lty="1" pattern: 1 "dot" on, 1 "dot" off
> > 	lty="2" pattern: 2 "dots" on, 2 "dots" off
> > 	lty="3" pattern: 3 "dots" on, 3 "dots" off
> > 	lty="32" pattern: 3 "dots" on, 2 "dots" off
> > 	lty="124" pattern: 1 on, 2 off, 4 on, 1 off, 2 on, 4 off, 
> > 	...and so forth...
> 
> Peter, to me (and this is English language) "dot" is shorter than "dash"!
> .-.--
> dot dash dot dash dash.

Sure

> So "dot" SHOULD be label for lty="2" pattern: 2 "dots" on, 2 "dots" off
> And "dash" SHOULD be label for lty="3" pattern: 3 "dots" on, 3 "dots" off.
> Since dot is shorter than dash.
> 

Look again: 2 is a number, selecting one of 4 preset patterns, "2" is
a character, specifying the pattern directly.

Try
 plot(1:10,type='l',lty=2,lwd=4)
 plot(1:10,type='l',lty=3,lwd=4)
 plot(1:10,type='l',lty='2',lwd=4)
 plot(1:10,type='l',lty='3',lwd=4)

> This is answer to previous posting on lwd.  So it is there, just not
> documented. Thanks.

In the snapshots, it is there... Don't know if it works on postscript
yet, though.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Wed Jun  3 21:18:10 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Wed, 3 Jun 1998 15:18:10 -0500 (CDT)
Subject: lty
In-Reply-To: <x2g1hms38b.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.3.95.980603151645.6058A-100000@io.uwinnipeg.ca>

OK now I get it.  Sorry for cluttering the list with nonsense.

BTW lwd works in R Graphics window but not when printed. (in my version of
snapshot)

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun  4 07:40:41 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 4 Jun 1998 08:40:41 +0200
Subject: lty
In-Reply-To: <Pine.OSF.3.95.980603123254.32361A-100000@io.uwinnipeg.ca>
 (message from Bill Simpson on Wed, 3 Jun 1998 12:39:43 -0500 (CDT))
Message-ID: <199806040640.IAA12039@sophie.ethz.ch>

Thank you, Bill, for your reports ("lwd" and "lty").
In the future, would you please indicate exactly which version of R you are
using?

"lwd":  in 0.61.x, it only works for x11/X11, not for postscript.
	in 0.62.x  it should work in all cases, also in combination with lty.

 lty :  Could n't your problem of seeing just one kind of dot-dashes
	be a problem of screen / device resolution alone?

Thanks again for these bug reports; at the moment we are interested
increasingly more and more for report about 0.62. But even there
-- since we are now in a "fixing" mode -- you have to indicate the version
  (date) that you are using.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Jun  4 14:03:58 1998
From: gb@stat.umu.se (Goran Brostrom)
Date: Thu, 4 Jun 1998 15:03:58 +0200 (MET DST)
Subject: Readline and 0.62
In-Reply-To: <199806031414.KAA17990@desire.stat.cmu.edu>
Message-ID: <Pine.LNX.3.95.980604144040.23957B-100000@capa.stat.umu.se>

Developers,

today I installed R-snapshot (June 2) on my Redhat Sparc/Linux 4.2,
with no problems, but obviously this version of R was compiled 
without 'readline' (I also have R-0.61.3, which works as expected 
with readline). Output from './configure', related to readline:
...
checking for rl_callback_read_char in -lreadline... (cached) no
...
checking for readline/history.h... (cached) yes
...
I have 'readline-2.0-10' according to 'rpm ...'. Does 0.62 need a
more recent version of readline than 0.61? Or is the problem
somewhere else?

Goran
---------------------------------------------------------
Goran Brostrom
Department of Statistics              tel: +46 90 786-5223
Umea University                       fax: +46 90 786-6614
S-90187 Umea, Sweden               e-mail: gb@stat.umu.se
----------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Thu Jun  4 14:39:03 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Thu, 4 Jun 1998 08:39:03 -0500 (CDT)
Subject: lwd
In-Reply-To: <199806040640.IAA12039@sophie.ethz.ch>
Message-ID: <Pine.OSF.3.95.980604082537.24785B-100000@io.uwinnipeg.ca>

I am using
[1] "Unstable-snapshot"

$status.rev
[1] "0"

$major
[1] "0"

$minor
[1] "62.0"

$year
[1] "1998"

$month
[1] "April"

$day
[1] "12"

If I do:
plot(x,y, type="l")
par(lwd=4)
lines(tt,pts)

The 2nd curve does appear to be heavy (correct line width) in X11 window,
however saved plot (dev.print) uses just single pixel line width (as seen
when viewed in ghostview or when printed out).

So if lwd is supposed to work in version .62.0, then there is a bug.
Or else I need a newer snapshot.

As for lty, this was just a confusion of lty="2" and lty=2, etc, as
Peter said.  Yes as you say Martin the screen resolution does enter into
it, but I was basing my comments on printouts.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun  4 15:02:36 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jun 1998 16:02:36 +0200
Subject: Readline and 0.62
In-Reply-To: Goran Brostrom's message of Thu, 4 Jun 1998 15:03:58 +0200 (MET DST)
References: <Pine.LNX.3.95.980604144040.23957B-100000@capa.stat.umu.se>
Message-ID: <x290ndw9hf.fsf@blueberry.kubism.ku.dk>

Goran Brostrom <gb@stat.umu.se> writes:

> 
> Developers,
> 
> today I installed R-snapshot (June 2) on my Redhat Sparc/Linux 4.2,
> with no problems, but obviously this version of R was compiled 
> without 'readline' (I also have R-0.61.3, which works as expected 
> with readline). Output from './configure', related to readline:
> ...
> checking for rl_callback_read_char in -lreadline... (cached) no
> ...
> checking for readline/history.h... (cached) yes
> ...
> I have 'readline-2.0-10' according to 'rpm ...'. Does 0.62 need a
> more recent version of readline than 0.61? Or is the problem
> somewhere else?

Yes, No.

You need readline 2.1 for 0.62. This is because of some new event
handling stuff necessary for the multiple graphics devices. This
requires the "alternate readline interface" (keypress-based) which
isn't there in 2.0. There's an rpm of the newer readline in the
contrib directory at redhat (or mirrors).

(Note to self: remember to put this into the release notes...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.Princeton.EDU  Thu Jun  4 15:25:11 1998
From: ben@eno.Princeton.EDU (Ben Bolker)
Date: Thu, 4 Jun 1998 10:25:11 -0400 (EDT)
Subject: lwd
In-Reply-To: <Pine.OSF.3.95.980604082537.24785B-100000@io.uwinnipeg.ca>
Message-ID: <Pine.SUN.3.95.980604102301.2730A-100000@paca>

On Thu, 4 Jun 1998, Bill Simpson wrote:

  [ ... snipping lots of stuff ... ]
> 
> As for lty, this was just a confusion of lty="2" and lty=2, etc, as
> Peter said.  Yes as you say Martin the screen resolution does enter into
> it, but I was basing my comments on printouts.
> 

  This certainly seems as though it has great potential for confusion!
I don't know if there is any feasible change to the plot command itself to
minimize this confusion, but may I ask (maybe someone has already done it)
that a few lines be added to the documentation ... ?

Benjamin Bolker          Dep't of Ecology and Evolutionary Biology,
ben@eno.princeton.edu    Princeton University
tel: (609) 258-6886,     fax: (609) 258-1334

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimrc@mathfs.math.montana.edu  Thu Jun  4 18:28:41 1998
From: jimrc@mathfs.math.montana.edu (Jim Robison-Cox)
Date: Thu, 4 Jun 1998 11:28:41 -0600 (MDT)
Subject: Snapshot won't configure on SunOS 5.3
Message-ID: <Pine.ULT.3.91.980604112642.8392I@mathfs.math.montana.edu>

R-crew,

   I'm trying to install the R-Snapshot which I downloaded a few hours
ago and I'm having a problem I can't trace.  My system is

 Sun SPARC, SunOS 5.3 : 1996

>From running ./configure:***************************************
loading cache ./config.cache
checking for a BSD compatible install... /opt/local/R/R-snapshot/etc/install-sh -c
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for bison... bison -y
checking for ar... ar
checking for ratfor... no
checking for perl... /usr/local/bin/perl
checking whether perl is perl 5... yes
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for ranlib... (cached) ranlib
checking for g77... g77
checking for underscore after Fortran symbols... configure: error: Nothing worked - cannot use FORTRAN
*******End of ./configure output *********************************************

And make will not work.

Has anyone else had trouble with a Sun install?


Previous versions have configured and complied beautifully, as
this partial screen summary for ./configure on R-0.61 shows:

# checking for ranlib... (cached) ranlib
# checking for ar... (cached) ar
# checking for lpr... (cached) lpr
# checking how to run the C preprocessor... (cached) gcc -E

I also updated R-0.61 to 0.61.2 and 0.61.3 without any problem. It seems
this line in the older configure file returned true:
if test -z "$FC"
  Since it skipped from ar to lpr without comment.


The new configure seems quite different.  Any pointers?

TIA,
  Jim

Jim Robison-Cox                 ____________            
Department of Math Sciences    |            |           phone: (406)994-5340
2-214 Wilson Hall               \   BZN, MT |           FAX:   (406)994-1789
Montana State University         |  *_______|
Bozeman, MT 59717                 \_|         e-mail: jimrc@math.montana.edu 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Jun  4 18:42:45 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 4 Jun 1998 10:42:45 -0700 (PDT)
Subject: Snapshot won't configure on SunOS 5.3
In-Reply-To: <Pine.ULT.3.91.980604112642.8392I@mathfs.math.montana.edu>
Message-ID: <Pine.SUN.3.95.980604103652.11242B-100000@chekov>

On Thu, 4 Jun 1998, Jim Robison-Cox wrote:
>    I'm trying to install the R-Snapshot which I downloaded a few hours
> ago and I'm having a problem I can't trace.  My system is
> 
>  Sun SPARC, SunOS 5.3 : 1996
> 

> checking for g77... g77
> checking for underscore after Fortran symbols... configure: error: Nothing worked - cannot use FORTRAN
> *******End of ./configure output *********************************************
> 
> And make will not work.
> 

> 
> The new configure seems quite different.  Any pointers?
> 

It is very different -- we now _require_ a FORTRAN compiler.  It appears
that configure found g77 (which is the first one it looks for) and then
couldn't get it to work properly. You can edit the file config.site to
specify the name of your FORTRAN compiler (presumably you have f77).


Thomas Lumley
UW Biostatistics


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimrc@mathfs.math.montana.edu  Thu Jun  4 18:47:54 1998
From: jimrc@mathfs.math.montana.edu (Jim Robison-Cox)
Date: Thu, 4 Jun 1998 11:47:54 -0600 (MDT)
Subject: Snapshot won't configure on SunOS 5.3
In-Reply-To: <Pine.SUN.3.95.980604103652.11242B-100000@chekov>
Message-ID: <Pine.ULT.3.91.980604114658.8392J-100000@mathfs.math.montana.edu>


Thanks, Thomas,  It's going to town now.

On Thu, 4 Jun 1998, Thomas Lumley wrote:
> It is very different -- we now _require_ a FORTRAN compiler.  It appears
> that configure found g77 (which is the first one it looks for) and then
> couldn't get it to work properly. You can edit the file config.site to
> specify the name of your FORTRAN compiler (presumably you have f77).
> 

Jim Robison-Cox                 ____________            
Department of Math Sciences    |            |           phone: (406)994-5340
2-214 Wilson Hall               \   BZN, MT |           FAX:   (406)994-1789
Montana State University         |  *_______|
Bozeman, MT 59717                 \_|         e-mail: jimrc@math.montana.edu 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun  4 21:01:24 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jun 1998 22:01:24 +0200
Subject: Snapshot won't configure on SunOS 5.3
In-Reply-To: Jim Robison-Cox's message of Thu, 4 Jun 1998 11:47:54 -0600 (MDT)
References: <Pine.ULT.3.91.980604114658.8392J-100000@mathfs.math.montana.edu>
Message-ID: <x24sy1hr6z.fsf@blueberry.kubism.ku.dk>

Jim Robison-Cox <jimrc@mathfs.math.montana.edu> writes:

> 
> 
> Thanks, Thomas,  It's going to town now.
> 
> On Thu, 4 Jun 1998, Thomas Lumley wrote:
> > It is very different -- we now _require_ a FORTRAN compiler.  It appears
> > that configure found g77 (which is the first one it looks for) and then
> > couldn't get it to work properly. You can edit the file config.site to
> > specify the name of your FORTRAN compiler (presumably you have f77).
> > 

Also, the exact same symptoms arise if you have previously configured
the same sources for another system. Made that blunder myself
yesterday. "make distclean" is recommended first in that case.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimrc@mathfs.math.montana.edu  Fri Jun  5 00:38:27 1998
From: jimrc@mathfs.math.montana.edu (Jim Robison-Cox)
Date: Thu, 4 Jun 1998 17:38:27 -0600 (MDT)
Subject: aov
Message-ID: <Pine.ULT.3.91.980604173048.8392M-100000@mathfs.math.montana.edu>

R developers,

  Last week I asked several questions which I think I can now answer
myself in large part.

>
> Q 1)  Is aov supposed to avoid qr decomposition and matrix inversion?
>       In S it is claimed to be faster than lm() for large datasets.  Is
>       that due to avoidance of qr()? 
>       (My main goal is to get the Error strata working.)

   My use of matrix manipulation to avoid qr decompositon takes more
time than the complied solver build into lm.fit. It seems that the real
reason for doing aov differently would be if the determination of Error
strata and which factors to evaluate in any given error statum requires
a different approach from lm.fit.  I'm not going to worry about speed of
lm.fit anymore, so that avoids most of the other questions I had posed.

  Douglas Bates has suggested:
DB> I think that a general approach via maximum likelihood or REML to
DB> anova models with random effects in them will eventually be superior
DB> to approaches based on sum-of-squares decompositions.

  Perhaps one could make an aov function which fit using lme and then
repackaged the output a bit.  I intend to look into that possibility.

    In pursuit of a sum-of-squares decomp, I have looked at the C code
in  model.c, particularly the  do_termsform definition. I see
these comments (line 821 in June 2 snapshot)
		/* Step 2: Recode the model terms in binary form */
		/* and at the same time, expand the model formula. */

		/* FIXME: this includes specials in the model */
		/* There perhaps needs to be a an extra pass */
		/* through the model to delete any terms which */
		/* contain specials.  Actually, specials should */
		/* only enter additively so this should also be */
		/* checked and abort forced if not. */

		/* FIXME: this is also the point where nesting */
		/* needs to be taken care of. */

To continue on this approach, and follow up on these FIXMEs, I need to
understand some of the internal functions like CAR, CDR, and
combinations thereof.  I found the definition of CAR in
src/include/Defn.h as:

#define CAR(e)          ((e)->u.listsxp.carval)

But where is u.listsxp.carval defined?  For that matter, where is the
Scheme/LISP interpreter?
Is there a roadmap? list of where the different pieces of R reside?


Jim Robison-Cox                 ____________            
Department of Math Sciences    |            |           phone: (406)994-5340
2-214 Wilson Hall               \   BZN, MT |           FAX:   (406)994-1789
Montana State University         |  *_______|
Bozeman, MT 59717                 \_|         e-mail: jimrc@math.montana.edu 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Fri Jun  5 01:21:34 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Fri, 5 Jun 1998 12:21:34 +1200 (NZST)
Subject: aov
Message-ID: <199806050021.MAA03779@stat1.stat.auckland.ac.nz>


> To continue on this approach, and follow up on these FIXMEs, I need to
> understand some of the internal functions like CAR, CDR, and
> combinations thereof.  I found the definition of CAR in
> src/include/Defn.h as:
> 
> #define CAR(e)          ((e)->u.listsxp.carval)
> 
> But where is u.listsxp.carval defined?  For that matter, where is the
> Scheme/LISP interpreter?
> Is there a roadmap? list of where the different pieces of R reside?
> 
> 

  Well there isn't a road map but there probably oughta be.
  Everything (almost) in R is a SEXPREC, and one of the mor common of these
  is the LISTSXP,
  
  it is basically a triple- the car, the cdr and the tag
  
   a list is a connected group of LISTSXP's,
    the car is a pointer to the "value" in that element of the list,
    the cdr is a pointer to the next LISTSXP (in the list)
    the tag is a place to keep things like the name associated with the
    list element.
    
    the first element of a list l is obtained by CAR(l)
    the second element by CADR(l) (CAR(CDR(l)))
    in the lisp world one cdr's down the list;
    
    the name for the first element is TAG(l)
    for the second TAG(CDR(l))
    and so on
    
    SEXPREC's (our basic building block) can be one of 20 different types,
    but they are all similar enough to be contained in one C union.
    First in the union is the info slot (32 bits), this is used for all sorts
    of nasty things
    
    then comes a slot for an SEXPREC that contains the attributes (this is 
    where the S-style attributes are stuck)
    
    then the actual data structures - notice that most of these are triples
    (vectors, primitives and environments are exceptions).
    
    hope this helps....
    robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun  5 07:35:08 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 5 Jun 1998 08:35:08 +0200
Subject: lwd -- for PostScript -- only in very recent snapshots
In-Reply-To: <Pine.OSF.3.95.980604082537.24785B-100000@io.uwinnipeg.ca>
 (message from Bill Simpson on Thu, 4 Jun 1998 08:39:03 -0500 (CDT))
Message-ID: <199806050635.IAA14305@sophie.ethz.ch>

>>>>> "Bill" == Bill Simpson <wsimpson@uwinnipeg.ca> writes:

    Bill> I am using [1] "Unstable-snapshot"

    Bill> $status.rev [1] "0"
    Bill> $major [1] "0"
    Bill> $minor [1] "62.0"
    Bill> $year [1] "1998"
    Bill> $month [1] "April"
    Bill> $day [1] "12"

    Bill> If I do: plot(x,y, type="l") par(lwd=4) lines(tt,pts)

    Bill> The 2nd curve does appear to be heavy (correct line width) in X11
    Bill> window, however saved plot (dev.print) uses just single pixel
    Bill> line width (as seen when viewed in ghostview or when printed
    Bill> out).

    Bill> So if lwd is supposed to work in version .62.0, then there is a
    Bill> bug.  Or else I need a newer snapshot.
			^^^^^^^^^^^^^^^^^^^^^^^
exactly.  "lwd" for PostScript only works for a week or so:

On May 27, Paul Murrell wrote to  R-core

  PM> The Postscript device driver has been modified so that it now takes
  PM> notice of the current line width
  PM> 
  PM> Also, the line texture specification (or line type) is now scaled for
  PM> the current line width for both X11 and PostScript graphics
  PM> 
  PM> the best way to see the difference is to do 
  PM> 
  PM> 	plot(1:10, lty=3, lwd=3, type="l")  # to see X11 version
  PM> 	dev.print() # to get postscript version
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun  5 15:33:11 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 5 Jun 1998 10:33:11 -0400
Subject: R-beta: characters to Fortran
References: <9806050810.AA05095@alpha.luc.ac.be>
Message-ID: <98Jun5.104708edt.13452@mailgate.bank-banque-canada.ca>

>I am having trouble sending character strings to Fortran. Even in a
>simple program, I only receive gibberish.

In my experience that is consistent with S.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Fri Jun  5 17:37:12 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Fri, 5 Jun 1998 11:37:12 -0500 (CDT)
Subject: help on R primitives
Message-ID: <Pine.OSF.3.95.980605113348.26754A-100000@io.uwinnipeg.ca>

Not sure if primitives is the right word, but look at this:

> help(for)
Error: syntax error
> ?for
+ 
[hit ctrl-c to get out at this pt]

Either way I try I can't get help on for. Can the help mechanism be
modified so it is possible to get help on these guys?  Another example:
> help(if)
Error: syntax error

But ?(ifelse) works.

I am using version .62, release from April or so.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun  5 17:47:13 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 5 Jun 1998 18:47:13 +0200
Subject: help on R primitives
In-Reply-To: <Pine.OSF.3.95.980605113348.26754A-100000@io.uwinnipeg.ca>
 (message from Bill Simpson on Fri, 5 Jun 1998 11:37:12 -0500 (CDT))
Message-ID: <199806051647.SAA02459@sophie.ethz.ch>

>>>>> "Bill" == Bill Simpson <wsimpson@uwinnipeg.ca> writes:

    Bill> Not sure if primitives is the right word, but look at this:
    >> help(for)
    Bill> Error: syntax error
    >> ?for
    Bill> + [hit ctrl-c to get out at this pt]

    Bill> Either way I try I can't get help on for. Can the help mechanism
    Bill> be modified so it is possible to get help on these guys?  Another
    Bill> example:
    >> help(if)
    Bill> Error: syntax error

I'm not sure if we can prevent these cases, without a lot of special case
coding ((it is pretty delicate to improve help(.)  [argument deparsing...]))

However, 

	" help on 'help' helps "  in this case :
	  ~~~~~~~~~~~~~~~~~~~~

> help()

Online Documentation

     help(topic, package = c(.packages(),.Autoloaded), lib.loc = .lib.loc)

     ?topic

Arguments:

   topic: a name or character string on which documentation
          is sought (but not a variable containing a charac-
          ter string!).


	..................

	..................

Examples:

     help()
     help(help)              # the same

     help(lapply)
     ?lapply                 # the same

     help("for")             # or ?"for", but the quotes are needed
     ?"+"


Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Fri Jun  5 18:10:37 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Fri, 5 Jun 1998 12:10:37 -0500 (CDT)
Subject: help on R primitives
In-Reply-To: <199806051647.SAA02459@sophie.ethz.ch>
Message-ID: <Pine.OSF.3.95.980605120953.28917A-100000@io.uwinnipeg.ca>

 
> 	" help on 'help' helps "  in this case :
	  ~~~~~~~~~~~~~~~~~~~~
OK Martin, thanks for your help :-)

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Jun  6 14:08:37 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 6 Jun 1998 15:08:37 +0200
Subject: Strange Error on AIX
In-Reply-To: <XFMail.980605140429.jkawczak@fisher.stats.uwo.ca> (message from
 Janusz Kawczak on Fri, 05 Jun 1998 14:04:29 -0400 (EDT))
Message-ID: <199806061308.PAA25110@florence.ethz.ch>

>>>>> "Janusz" == Janusz Kawczak <jkawczak@fisher.stats.uwo.ca> writes:

[You wrote to "owner-r-help@...."  -- that's just me (MM);
 why did you not use the mailing list ? (R-devel or R-help)]

    Janusz> Hello, I am getting this 'strange' message when running the R
    Janusz> program on AIX 4.2.1. I have not had any problems with the
    Janusz> compilation of the program. Does anyone have an idea due to
    Janusz> what is the following error present:

    Janusz> R : Copyright 1998, Robert Gentleman and Ross Ihaka Version
    Janusz> 0.61.3 (May 3, 1998)

    >> plot(rnorm(100),rnorm(100))
    Janusz> Gpretty(NaNQ,NaNQ,5): cell=NaNQ, ndiv= -2 <=0;
    Janusz> (ns,nu)=(-2147483647,2147483647); dx=NaNQ, unit=NaNQ, ismall=0.
    Janusz> Gpretty(NaNQ,NaNQ,5): cell=NaNQ, ndiv= -2 <=0;
    Janusz> (ns,nu)=(-2147483647,2147483647); dx=NaNQ, unit=NaNQ, ismall=0.
    Janusz> Error: Length cannot be negative

    Janusz> In addition to the above, I've tried the latest snapshot
    Janusz> version of R; the same problem occurs.

Janusz, this *IS* a problem that I recently reported to  R-devel.
Ive also access to an AIX 4.2 (older than 4.2.1 ?) with the same problem:

I've tracked the bug to

	> min(1)
	NaNQ
	
(the same for max(.) for any number, and hence for range(.) ..)
The Gpretty(.) message is a direct consequence of this broken arithmetic.

Peter Dalgaard recommended using a debugger and seeing where in the source
code things go haywire..
I haven't had time yet...

Are you also using gcc for compilation?
Could it be a gcc--AIX misconfiguration?

If you can start debugging (e.g. R --debugger gdb )
we'd be glad if you worked with a recent snapshot (0.62), since quite a few
things have changed, notably the IEEE arithmetic (Inf, -Inf and NaN).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun  8 09:52:53 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 8 Jun 1998 10:52:53 +0200
Subject: IBM AIX problems
Message-ID: <199806080852.KAA02502@sophie.ethz.ch>

Heiner Schwarte has helped me with the AIX problem that I 
and Janusz Kawczak recently reported here.

Heiner had found out earlier that there was a problem with the 
'finite' c-library function [Heiner's test code see below] when gcc 
(and older versions of xlc) is used.
He also found that instead, AIX defines a  FINITE(.) macro itself
in fp.h  and that this would work in any case.

Interestingly,  xlc (the "standard IBM AIX compiler")  has no problem 
with both  finite(.) and FINITE(.).

BUT:  I have never been successful compiling R with xlc:
      Compilation of the current snapshot stops with 

       $ xlc -DANSI -D_XOPEN_SOURCE -I/usr/local/vni/.include -I../include \
	    -c system.c
       "system.c", line 150.16: 1506-275 (S) Unexpected text readMask ignored.
       "system.c", line 150.9: 1506-045 (S) Undeclared identifier fd_set.
       "system.c", line 151.9: 1506-275 (S) Unexpected text 'int' ignored.
       "system.c", line 151.13: 1506-045 (S) Undeclared identifier stdinfd.
       "system.c", line 152.9: 1506-275 (S) Unexpected text 'int' ignored.
       "system.c", line 152.13: 1506-045 (S) Undeclared identifier connectionfd.
       "system.c", line 154.18: 1506-045 (S) Undeclared identifier readMask.
       $ xlc -DANSI -D_XOPEN_SOURCE  -I../include -c system.c
       "system.c", line 150.16: 1506-275 (S) Unexpected text readMask ignored.
       "system.c", line 150.9: 1506-045 (S) Undeclared identifier fd_set.
       "system.c", line 151.9: 1506-275 (S) Unexpected text 'int' ignored.
       "system.c", line 151.13: 1506-045 (S) Undeclared identifier stdinfd.
       "system.c", line 152.9: 1506-275 (S) Unexpected text 'int' ignored.
       "system.c", line 152.13: 1506-045 (S) Undeclared identifier connectionfd.
       "system.c", line 154.18: 1506-045 (S) Undeclared identifier readMask.
       $ 

There are several possible solutions to this problem.
One of them might be: 

1.
 >>>>	In all C code of R, use FINITE(.) only 
 >>>>	AND make sure that R is *not* redefining the  FINITE(.) macro
	in the case of AIX (or maybe whenever FINITE(.) is already defined).

or 

2.
 >>>>   In all C code of R, use  finite(.), never FINITE.
 >>>>   For the case of AIX, make finite(.) a macro calling FINITE(.)
	(this was Heiner's solution).

This might be relatively easy.
However, both Heiner and I don't know if the intermixing of
FINITE(.) and finite(.) in the R source is just ``accidental'' or
rather on purpose.
	Anyone knows?
	Are there ANSI/POSIX/...? standards for FINITE(.) ?


Note:  Maybe really configure should figure out if  finite(.) works
	and then take appropriate measures...


----------------------- Here is a Transcript from AIX : ----------------

$ date
Mon Jun  8 10:35:02 MEST 1998
$ uname -a
AIX percol 2 4 000004894600
$ cat finite-tst.c
/* Date: Sun, 07 Jun 1998 19:00:04 +0200
 * From: Heiner Schwarte <h.schwarte@bluewin.ch>
 * To: Martin Maechler <maechler@stat.math.ethz.ch>
 */

#include <stdio.h>
#include <math.h>
#include <fp.h>

main() {
  double x;
  x=1./0.;
  printf("%f\n",x);
  printf("%d\n",finite(x));
  printf("%d\n",FINITE(x));
}

$ gcc -v
Reading specs from /usr/local/lib/gcc-lib/powerpc-ibm-aix4.2.0.0/2.7.2.3/specs
gcc version 2.7.2.3
$ gcc -o finite-tst finite-tst.c
$ xlc -o finite-tst-xlc finite-tst.c
"finite-tst.c", line 22.8: 1506-232 (W) Divisor for modulus or division operator cannot be zero.
$ 
$ finite-tst # gcc
INF
1
0
$ finite-tst-xlc
INF
0
0
----------------------- End of Transcript from AIX : ----------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Jun  8 21:42:49 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Tue, 9 Jun 1998 08:42:49 +1200 (NZST)
Subject: IBM AIX problems
Message-ID: <199806082042.IAA18050@stat1.stat.auckland.ac.nz>

Hmmm.  I think all the code in R should use the FINITE macro rather than
the finite function.  On non IEEE platforms FINITE can be defined to check
for a special NA pattern.

It would be possible to rename the macro to something more obscure if
that would help.  E.g. R_FINITE.

Medium-term this whole area needs some work.  It may be that we will have
to have an R_specific implementation of functions like "finite"  and
"isnan".  This is because there are just too many platforms which seem
to screw them up.

The prize (as usual) goes to Windows, where (0.0 == NaN) is true.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun 14 20:48:51 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 1998 21:48:51 +0200
Subject: R-beta: R-0.62 is released
In-Reply-To: 's message of Sun, 14 Jun 1998 19:55:18 +0100 (BST)
References: <XFMail.980614195518.Ted.Harding@nessie.mcc.ac.uk>
Message-ID: <x2vhq3wyqk.fsf@blueberry.kubism.ku.dk>

(Ted Harding) <Ted.Harding@nessie.mcc.ac.uk> writes:

> 
> On 14-Jun-98 Peter Dalgaard BSA wrote:
> > I've put up R-0.62.0.tgz up for FTP from Auckland some minutes ago.
> > As usual, don't get it from there unless you are desperate, but wait
> > for it to be mirrored at a CRAN site near you within a day or two.
> 
> You didn't expect us to be THAT patient, did you?!
> 

Heh. But it serves you right when you realise the mistake that I made
in it. ("tests" directory gone AWOL, 0.62.1 due out shortly)

And seriously: Auckland is paying through its nose per MB for
Internet, irrespective of direction, so please use CRAN whenever
possible. For the not-quite-so impatient, the Austrian CRAN site will
pick it up some time during the night.

(Of course, ONE impatient user is not a problem, but...)

>    Despite trying every obvious config option, the "R" script had insisted
>    on setting RHOME as the directory it was compiled from: /depot/R-0.62/R-0.62/
> 
>    It took some time to suss out that this needed to be edited to read
>    RHOME=/usr/local/R-0.62/lib/R
> 
>    After this was done, it seems fine. The above is NOT obvious from the INSTALL
>    document.

That might be because it shouldn't happen. For me:

$ more /usr/local/bin/R
#!/bin/sh
# Shell wrapper for R executable.

RHOME=/usr/local/lib/R
export RHOME
...

Even though I compiled out of ~pd/R-official/R-0.62 .  Are you sure
you are picking up the correct R script? 

> 
> 2. The "help" browser seems to be hard-wired to be netscape. This can of course

No comment on this.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 15 08:33:49 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 15 Jun 1998 09:33:49 +0200
Subject: R-beta: Literal "&" in help index
In-Reply-To: <XFMail.980615011606.Ted.Harding@nessie.mcc.ac.uk>
Message-ID: <199806150733.JAA03032@sophie.ethz.ch>

Dear Ted,
thank you for your quick and valuable feedback!
However, as Peter Dalgaard has already pointed out,
	
	PLEASE STOP posting to  R-announce.

	R-announce is ONLY for *IMPORTANT* announcements
	of software releases, and the like.

Please use  R-help for generally relevant questions/answers
and use  R-devel for long, technically oriented bug reports, fixes, etc.

Martin Maechler
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Tue Jun 16 00:20:23 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Tue, 16 Jun 1998 11:20:23 +1200 (NZST)
Subject: Windows
Message-ID: <199806152320.LAA20600@stat1.stat.auckland.ac.nz>

 I've just put up a new Windows version; it's about 1 week behind 0.62
 (the graphics still need some work but it appears to be useable).
 Most of the menu interface has changed. I would appreciate it if some of
 you could have a look at it before I make an announcement.
 
 robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 16 17:23:04 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 16 Jun 1998 12:23:04 -0400
Subject: 62.1 make problems
Message-ID: <98Jun16.124344edt.13444@mailgate.bank-banque-canada.ca>

I'm just trying to install 62.1 under Solaris. Making the program reports no
errors, but when I try to run R I get

ld.so.1: /home/res8/gilp/R-versions/R-0.62.1/bin/R.binary: fatal: libF77.so.2:
can't open file: errno=2

Is there any standard place where I should be looking to find libF77?

When make moves on to building the documents I get the errors below. (Is this
because configure did not find perl?)

Paul Gilbert

...
DONE (INSTALL)
Creating front-end shell script

You should
        make docs
now, or at least
        make help

Building ALL documentation (help, HTML, LaTeX)
./build-alldocs
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: syntax error at line 15: `('
unexpected
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: syntax error at line 15: `('
unexpected
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: syntax error at line 15: `('
unexpected
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: syntax error at line 15: `('
unexpected
*** Error code 2
make: Fatal error: Command failed for target `stamp-docs'
Current working directory /home/res8/gilp/R-versions/R-0.62.1/etc


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jun 16 17:45:39 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jun 1998 11:45:39 -0500
Subject: 62.1 make problems
In-Reply-To: Paul Gilbert's message of Tue, 16 Jun 1998 12:23:04 -0400
References: <98Jun16.124344edt.13444@mailgate.bank-banque-canada.ca>
Message-ID: <6rg1h570ss.fsf@verdi.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I'm just trying to install 62.1 under Solaris. Making the program reports no
> errors, but when I try to run R I get
> 
> ld.so.1: /home/res8/gilp/R-versions/R-0.62.1/bin/R.binary: fatal: libF77.so.2:
> can't open file: errno=2
> 
> Is there any standard place where I should be looking to find libF77?

Sounds like you will have to modify the path searched by the loader
for shared libraries.  Solaris tends to make this difficult because of
the weird locations for compilers and standard pieces of software.
Someone who uses Solaris more should advise you on this.  I think
these libraries are located in /opt/SUNWspro/lib but I haven't
bothered to figure out the logic of the places that Sun locates these.

> When make moves on to building the documents I get the errors below. (Is this
> because configure did not find perl?)

These are definitely errors from perl scripts.  What is the first line
of the script /home/res8/gilp/R-versions/R-0.62.1/etc/build-help?  If
it doesn't point to a perl interpreter then these scripts are not
going to work at all.  You will have to find a way to get configure to
determine the location of the perl interpreter.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 16 17:55:56 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jun 1998 18:55:56 +0200
Subject: 62.1 make problems
In-Reply-To: Paul Gilbert's message of Tue, 16 Jun 1998 12:23:04 -0400
References: <98Jun16.124344edt.13444@mailgate.bank-banque-canada.ca>
Message-ID: <x2sol5z3oj.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I'm just trying to install 62.1 under Solaris. Making the program reports no
> errors, but when I try to run R I get
> 
> ld.so.1: /home/res8/gilp/R-versions/R-0.62.1/bin/R.binary: fatal: libF77.so.2:
> can't open file: errno=2

Works OK here with f77 == g77. Which Fortran are you on?

> Is there any standard place where I should be looking to find
> libF77?

You could try something like 

find /usr -name \*77\* -print
find /opt -name \*77\* -print

but I'm somewhat confused as to why the linker seems to be picking up
the shared library (mine links static) when it isn't there.

> When make moves on to building the documents I get the errors below. (Is this
> because configure did not find perl?)

That, or wrong version of perl.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Jun 17 16:38:22 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 17 Jun 1998 15:38:22 -0000 ()
Subject: bug in functions of form "mcpar<-"
Message-ID: <XFMail.980617162415.plummer@iarc.fr>

This fairly harmless looking piece of code, which worked in
0.61 (and in S-PLUS) fails  in 0.62.1. 

R> "mcpar<-" <- function(x,mcpar) {attr(x,"mcpar") <- mcpar; x}
R> mcpar(x) <- c(1,100,1)
Error in mcpar<-(*tmp*, value = c(1, 100, 1)) : unused argument to function

The error message gives a hint about how to work around the problem -
just replace the argument "mcpar" with "value". 

R> "mcpar<-" <- function(x,value) {attr(x,"mcpar") <- value; x}
R> mcpar(x) <- c(1,100,1)
R> 

This breaks release 0.3-3 of my "coda" package, but I will fix it.
Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 17 18:37:41 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 1998 19:37:41 +0200
Subject: bug in functions of form "mcpar<-"
In-Reply-To: Martyn Plummer's message of Wed, 17 Jun 1998 15:38:22 -0000 ()
References: <XFMail.980617162415.plummer@iarc.fr>
Message-ID: <x2n2bcnd3u.fsf@blueberry.kubism.ku.dk>

Martyn Plummer <plummer@iarc.fr> writes:

> 
> This fairly harmless looking piece of code, which worked in
> 0.61 (and in S-PLUS) fails  in 0.62.1. 
> 
> R> "mcpar<-" <- function(x,mcpar) {attr(x,"mcpar") <- mcpar; x}
> R> mcpar(x) <- c(1,100,1)
> Error in mcpar<-(*tmp*, value = c(1, 100, 1)) : unused argument to function
> 
> The error message gives a hint about how to work around the problem -
> just replace the argument "mcpar" with "value". 
> 
> R> "mcpar<-" <- function(x,value) {attr(x,"mcpar") <- value; x}
> R> mcpar(x) <- c(1,100,1)
> R> 
> 
> This breaks release 0.3-3 of my "coda" package, but I will fix it.
> Martyn

Hmm. We had some pretty antisocial consequences from *not* using the
value= form with John Chambers' [<-.data.frame code, which assumes
that it is used that way in order to see whether i,j, or both are
absent. 

So Splus is using value= on indexing operations only?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 17 18:48:00 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 17 Jun 1998 13:48:00 -0400
Subject: bug in functions of form "mcpar<-"
References: <XFMail.980617162415.plummer@iarc.fr>
Message-ID: <98Jun17.140814edt.13494@mailgate.bank-banque-canada.ca>

I'm having the same problem without a clue to a work around. (Mind you, the work
around for mcpar wasn't so obvious to me.)

Paul Gilbert
____

R : Copyright 1998, The R Development Core Team
Version 0.62.1  (June 15, 1998)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.

> search()
[1] ".GlobalEnv"   "Autoloads"    "package:base"
> "tframe<-" <-function(x, tf)
{
 attr(x, "tframe") <- tf
 x
}

+ + + + > >
> x <- 1:10
> tframe(x) <- c(1,1000,1)
Error in tframe<-(*tmp*, value = c(1, 1000, 1)) : unused argument to function
>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 17 18:58:16 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 17 Jun 1998 13:58:16 -0400
Subject: bug in functions of form "mcpar<-"
References: <XFMail.980617162415.plummer@iarc.fr>
Message-ID: <98Jun17.141830edt.13505@mailgate.bank-banque-canada.ca>

The light came on. I was thinking the problem with mcpar was that the argument
had the same name as the function, but it is that the argument must be called
"value".  If R is intended to be like this it seems like a pretty serious
incompatibility with S (not to mention that I will have to make a lot of
changes).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimrc@mathfs.math.montana.edu  Wed Jun 17 19:22:04 1998
From: jimrc@mathfs.math.montana.edu (Jim Robison-Cox)
Date: Wed, 17 Jun 1998 12:22:04 -0600 (MDT)
Subject: extra arguments to generic functions & bug in model.frame
Message-ID: <Pine.ULT.3.91.980617115505.3906G-100000@mathfs.math.montana.edu>

R developers,

2 things:  a bug in model.frame and a question about setup of generic 
functions. 
 
   I don't understand the following behavior for generic functions:
Suppose I'm working with the cats data in the MASS library and I want to 
create a formula object to model Hwt on Sex:
  # This works:
> formula(Hwt ~ Sex)
Hwt ~ Sex
  # But the following does not:
> formula(Hwt ~ Sex, data = cats)
Error in formula.formula(Hwt ~ Sex, cats) : unused argument to function
  # because I used an extra argument.

The odd thing to me, is that formula() itself allows the argument:
> formula
function (x, ...) 
UseMethod("formula")

But formula.default does not:

> args(formula.default)
function (x) 

The same thing happens with terms:
> args(terms)
function (x, ...) 
> args(terms.default)
function (x) 

And this caused me a problem when using model.frame() since 
model.frame.default includes the lines:

	    if (!inherits(formula, "terms")) 
	    	    formula <- terms(formula, data = data)

Using 2 arguments in term() is a bug since hitting the line 
will cause an error:

Error in terms.default(formula, data = data) : unused argument to function

  Summary:

1.  There seems to be a bug in model.frame() using terms() with 2 arguments.

2.  What is standard practice for setting up instances of a generic function?
    It seems sensible to me that argument lists should not shrink when 
    going from the generic function to an instance of that function.

Cheers,
Jim

Jim Robison-Cox                 ____________            
Department of Math Sciences    |            |           phone: (406)994-5340
2-214 Wilson Hall               \   BZN, MT |           FAX:   (406)994-1789
Montana State University         |  *_______|
Bozeman, MT 59717                 \_|         e-mail: jimrc@math.montana.edu 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 17 19:41:35 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 1998 20:41:35 +0200
Subject: extra arguments to generic functions & bug in model.frame
In-Reply-To: Jim Robison-Cox's message of Wed, 17 Jun 1998 12:22:04 -0600 (MDT)
References: <Pine.ULT.3.91.980617115505.3906G-100000@mathfs.math.montana.edu>
Message-ID: <x2g1h3oops.fsf@blueberry.kubism.ku.dk>

Jim Robison-Cox <jimrc@mathfs.math.montana.edu> writes:

> 1.  There seems to be a bug in model.frame() using terms() with 2 arguments.

Yes.

> 2.  What is standard practice for setting up instances of a generic function?
>     It seems sensible to me that argument lists should not shrink when 
>     going from the generic function to an instance of that function.

No. There's no limit to what special parameters a specific instance of
a function may implement. So the generic one is generally (x,...).
There's no reason not to allow a specific function to check that it is
getting called with parameters that make sense.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jun 17 19:44:52 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 17 Jun 1998 13:44:52 -0500
Subject: extra arguments to generic functions & bug in model.frame
In-Reply-To: Jim Robison-Cox's message of Wed, 17 Jun 1998 12:22:04 -0600 (MDT)
References: <Pine.ULT.3.91.980617115505.3906G-100000@mathfs.math.montana.edu>
Message-ID: <6riulzuau3.fsf@verdi.stat.wisc.edu>

Jim Robison-Cox <jimrc@mathfs.math.montana.edu> writes:

> The odd thing to me, is that formula() itself allows the argument:
> > formula
> function (x, ...) 
> UseMethod("formula")
> 
> But formula.default does not:
> 
> > args(formula.default)
> function (x) 
> 
> The same thing happens with terms:
> > args(terms)
> function (x, ...) 
> > args(terms.default)
> function (x) 

I would say this is a mistake in the definition of terms.default and
formula.default.

It is a good programming practice to ensure that the generic and any
methods have exactly the same calling sequence.  Any such
incompatibilities will have to be eliminated from S-PLUS because S
version 4, the language on which S-PLUS 5.0 will be based, requires
that they have exactly the same calling sequence.  S4 doesn't produce
an error if you define an "old-style" method with a different calling
sequence because it is not recognized as a method.  However, when you
try to use such a method you get an error if the calling sequence does
not match the calling sequence of the generic.

BTW, my version of S-PLUS defines the formula function as
 > formula
 function(object, ...)
 UseMethod("formula")
 > formula.default
 function(object)
We should change the name "x" to "object" to make it easier for people
to port code.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 17 22:06:22 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 17 Jun 1998 17:06:22 -0400
Subject: .First.lib
Message-ID: <98Jun17.172642edt.13467@mailgate.bank-banque-canada.ca>

There seems to be a minor problem in .First.lib: the library argument is all of
$RLIBS. I think it should be just the one directory from which the package is
being taken.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 17 22:13:58 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 17 Jun 1998 17:13:58 -0400
Subject: Warning in par(args)
Message-ID: <98Jun17.173418edt.13462@mailgate.bank-banque-canada.ca>

I'm getting a lot of warning having to do with setting graphic parameters. I
don't recall actually setting any of these, so I would guess they are being set
by something I am calling. Has anyone already figured out where this is
happening?

Paul Gilbert
_____

All dse3 tests ... ok
All dse4 tests ...Warning: skipping test 4 (requires stepwise).
 ok
dse2 graphics tests ...completed
dse3 graphics tests ...completed
dse4 graphics tests ...completed
All Brief User Guide example part 1 tests ...Read 1820 items
Warning in par(args) : parameter "cin" can't be set
Warning in par(args) : parameter "cra" can't be set
Warning in par(args) : parameter "csi" can't be set
Warning in par(args) : parameter "din" can't be set
Warning in par(args) : parameter "cin" can't be set
Warning in par(args) : parameter "cra" can't be set
Warning in par(args) : parameter "csi" can't be set
Warning in par(args) : parameter "din" can't be set
Warning in par(args) : parameter "cin" can't be set
Warning in par(args) : parameter "cra" can't be set
.....

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jun 17 23:24:54 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Wed, 17 Jun 1998 17:24:54 -0500 (CDT)
Subject: Scalar operations dropping matrix attributes
Message-ID: <m0ymQdS-0000Y8C@verdi.stat.wisc.edu>

In 0.62.1 I found that code like t(mat/vec)/vec seems to drop the
matrix attributes of the result.  In this case the matrix is 1x1.
Here is something tracked inside a debug-induced browser.

 Browse[1]> data.class(Var)
 [1] "matrix"
 Browse[1]> Var
	     (Intercept)
 (Intercept)      31.662
 Browse[1]> 
 debug: stdDev <- sqrt(diag(Var))
 Browse[1]> 
 debug: names(stdDev) <- dimnames(Var)[[2]]
 Browse[1]> 
 debug: value <- t(Var/stdDev)/stdDev
 Browse[1]> data.class(stdDev)
 [1] "numeric"
 Browse[1]> 
 debug: attr(value, "stdDev") <- stdDev
 Browse[1]> data.class(value)
 [1] "numeric"

(As you might guess this code takes a variance-covariance matrix and
creates a correlation matrix with the standard deviations as an
attribute.)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 17 23:41:39 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Jun 1998 00:41:39 +0200
Subject: Warning in par(args)
In-Reply-To: Paul Gilbert's message of Wed, 17 Jun 1998 17:13:58 -0400
References: <98Jun17.173418edt.13462@mailgate.bank-banque-canada.ca>
Message-ID: <x2hg1jfy70.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I'm getting a lot of warning having to do with setting graphic parameters. I
> don't recall actually setting any of these, so I would guess they are being set
> by something I am calling. Has anyone already figured out where this is
> happening?
...
> Warning in par(args) : parameter "cin" can't be set
> Warning in par(args) : parameter "cra" can't be set
> Warning in par(args) : parameter "csi" can't be set
> Warning in par(args) : parameter "din" can't be set
...

This comes from constructions of the type

opar<-par()
work.work.work()
par(opar)

This gives complaints from unsettable items. Splus quietly omits them,
so I suppose that we really should do the same.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 18 07:43:12 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 18 Jun 1998 08:43:12 +0200
Subject: Re^2: Warning in par(args)
In-Reply-To: <x2hg1jfy70.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 18 Jun 1998 00:41:39 +0200)
Message-ID: <199806180643.IAA14504@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

      Paul> I'm getting a lot of warning having to do with setting graphic
      Paul> parameters. I don't recall actually setting any of these, so I
      Paul> would guess they are being set by something I am calling. Has
      Paul> anyone already figured out where this is happening?  ...

      >> Warning in par(args) : parameter "cin" can't be set
      >> Warning in par(args) : parameter "cra" can't be set
      >> Warning in par(args) : parameter "csi" can't be set
      >> Warning in par(args) : parameter "din" can't be set
      Paul> ...

    PD> This comes from constructions of the type

    PD> opar<-par()
    PD> work.work.work()
    PD> par(opar)
Yes.

    PD> This gives complaints from unsettable items. Splus quietly omits them,
    PD> so I suppose that we really should do the same.

By the way, I am the one who made this warning reappear (in src/main/par.c).
It was thought for all the other situations where users
have typos in the "tag" (argument) names, e.g.,

	par(lqd = 3)
or really try to set unsettable par()'s.

I think that currently there's no other easy way to detect user
errors like the above.
However, I agree that we should find a better solution.

I myself am using the (``recommended'' ?) way of

 work.work1()
   on.exit(par(op))
   op <- par(xyx = ...,  brd = ...)
 work.work2()
   op <- c(op, par(ghj = ...,  klm = ...))
 work.work3()

which can be slightly more tedious but is ``preciser'' and doesn't lead to
the above error messages.  

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Jun 18 08:44:21 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 18 Jun 1998 09:44:21 +0200
Subject: bug in functions of form "mcpar<-"
References: <XFMail.980617162415.plummer@iarc.fr> <x2n2bcnd3u.fsf@blueberry.kubism.ku.dk>
Message-ID: <3588C555.288AEF94@iarc.fr>

Peter Dalgaard BSA wrote:

> Hmm. We had some pretty antisocial consequences from *not* using the
> value= form with John Chambers' [<-.data.frame code, which assumes
> that it is used that way in order to see whether i,j, or both are
> absent.
> 
> So Splus is using value= on indexing operations only?

Looks like it.  As I said, my other example works in S-PLUS, but try
doing
the same thing with an assignment on an index and you get an error:
(This examples is obviously silly in order to distinguish it from the
default
indexing function).

S> "[<-.foo" <-
function(x,i,value){y<-unclass(x);y[i]<-value+1;class(y)<-"foo";y}
S> x <- 1:10
S> class(x) <- "foo"
S> x[1]<-100
S> x
 [1] 101   2   3   4   5   6   7   8   9  10
attr(, "class"):
[1] "foo"
S> "[<-.foo" <-
function(x,i,bar){y<-unclass(x);y[i]<-bar+1;class(y)<-"foo";y}
S> x[1]<-200
Error in call to [<-.foo(): Argument value= not matched
Dumped

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 18 15:00:50 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 18 Jun 1998 10:00:50 -0400
Subject: bug in functions of form "mcpar<-"
References: <XFMail.980617162415.plummer@iarc.fr> <x2n2bcnd3u.fsf@blueberry.kubism.ku.dk> <3588C555.288AEF94@iarc.fr>
Message-ID: <98Jun18.102135edt.13451@mailgate.bank-banque-canada.ca>

> >So Splus is using value= on indexing operations only?

>Looks like it.  As I said, my other example works in S-PLUS,

Definitely Splus does not in general require "value" as the name of the
argument. I've changed about a dozen instances of this in my code. It turned out
not to be as bad a job as I expected, debugging because of the one change I
missed was the worst part. But everything was working fine in Splus.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 18 15:41:41 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 18 Jun 1998 10:41:41 -0400
Subject: Re^2: Warning in par(args)
References: <199806180643.IAA14504@sophie.ethz.ch>
Message-ID: <98Jun18.110225edt.13458@mailgate.bank-banque-canada.ca>

>I myself am using the (``recommended'' ?) way of
 >work.work1()
 >  on.exit(par(op))
 >  op <- par(xyx = ...,  brd = ...)
 >work.work2()
 >  op <- c(op, par(ghj = ...,  klm = ...))
 >work.work3()
>which can be slightly more tedious but is ``preciser'' and doesn't lead to
>the above error messages.

Martin

Could you please explain the more precise nature of this and why it doesn't give
the error message. I typically use on.exit(par(op)), but perhaps not everywhere.
Is it  on.exit that prevents the message?

Also, my initial reaction was that in the above example the on.exit values would
be set to those in effect during work.work2 rather than those in effect during
work.work1. Perhaps this is not the case, as the following example may
illustrate:

> c(list(a="a"), b=2, a=1)$a
[1] "a"
> c(list(a="a"), b=2, a=1)
$a
[1] "a"
$b
[1] 2
$a
[1] 1

Perhaps this is a case where we may want incompatibility with S in order to
enforce good programming and unintentional errors. I cannot think of a case
where I would want a list with two elements having the same name.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 18 19:44:17 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 18 Jun 1998 13:44:17 -0500 (CDT)
Subject: name "reSt" in debugger
Message-ID: <m0ymjfV-0000Y9C@verdi.stat.wisc.edu>

I keep getting an error message about "return" inside the debugger
when I try to work with an object called reSt.  Here is a transcript
 R> debug( createConLin )
 R> createConLin( distance ~ age, Orthodont, ~ 1 | Subject )
 debugging in: createConLin(distance ~ age, Orthodont, ~1 | Subject)
 debug: Call <- match.call()
 Browse[1]> 
 debug: if (!inherits(fixed, "formula") || length(fixed) != 3) {
	     stop("\nFixed-effects model must be a formula of the form \"resp ~ pred\"")
 }
 Browse[1]> 
 debug: REML <- FALSE
 Browse[1]> 
 debug: reSt <- reStruct(random, REML = REML, data = NULL)
 Browse[1]> 
 debug: groups <- getGroupsFormula(reSt)
 Browse[1]> reSt
 Error: No function to return from, jumping to top level
 Browse[1]> class(reSt)
 [1] "reStruct"
 Browse[1]> print(reSt)
 Error: No function to return from, jumping to top level
 Browse[1]> print(get("reSt"))
 Error: No function to return from, jumping to top level
 Browse[1]> length(reSt)
 [1] 1
 Browse[1]> formula(reSt)
 Error: No function to return from, jumping to top level

Is there something magical about "re" inside the debugger in the same
way that "c" means continue and "n" means next?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 18 22:08:38 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 18 Jun 1998 16:08:38 -0500 (CDT)
Subject: Compiling under Digital Unix
Message-ID: <m0ymlvC-0000Y8C@verdi.stat.wisc.edu>

I tried a compilation of R-0.62.1 on a DEC Alpha that identifies
itself as
 Digital UNIX V4.0A  (Rev. 464); Thu May 14 14:08:00 CDT 1998 
 $ uname -a
 OSF1 atlas.stat.wisc.edu V4.0 464 alpha

I got to the final link step then got an error with 
 gcc -ieee_with_inexact -g -O2 -I../include -c version.c
 f77  -o R.binary arithmetic.o array.o attrib.o bind.o builtin.o character.o coerce.o colors.o complex.o context.o cov.o cum.o debug.o deparse.o deriv.o devices.o dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o format.o fourier.o iosupport.o gram.o list.o logic.o main.o match.o memory.o model.o names.o objects.o optimize.o options.o par.o paste.o plot.o plot3d.o plotmath.o print.o printarray.o printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o sort.o source.o split.o subassign.o subscript.o subset.o summary.o unique.o util.o version.o ../lib/libgraphics.a ../lib/libunix.a ../lib/libappl.a ../lib/libmath.a -lSM -lICE -L/s/X11R6.3-1/lib -lX11 -ldnet_stub -ltermcap -lm 
 ld:
 ../lib/libunix.a(system.o): main: multiply defined
 fort: Severe: Failed while trying to link.

Is anyone familiar enough with Digital Unix to decide why it is
defining main in unix/system.o.  I checked and the symbol is indeed
defined there.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 18 22:52:38 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 18 Jun 1998 16:52:38 -0500 (CDT)
Subject: minor incompatibility in model.matrix
Message-ID: <m0ymmbm-0000c2C@verdi.stat.wisc.edu>

The S and S-PLUS versions of model.matrix will ignore elements of a
contrasts argument that do not correspond to factors.  R does not.  It
produces and error of
 Error: contrasts apply only to factors
even if the contrasts themselves are NULL.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 18 23:09:21 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 1998 00:09:21 +0200
Subject: Compiling under Digital Unix
In-Reply-To: Douglas Bates's message of Thu, 18 Jun 1998 16:08:38 -0500 (CDT)
References: <m0ymlvC-0000Y8C@verdi.stat.wisc.edu>
Message-ID: <x2btrqs6pa.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:


>  f77  -o R.binary arithmetic.o array.o attrib.o bind.o builtin.o character.o coerce.o colors.o complex.o context.o cov.o cum.o debug.o deparse.o deriv.o devices.o dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o format.o fourier.o iosupport.o gram.o list.o logic.o main.o match.o memory.o model.o names.o objects.o optimize.o options.o par.o paste.o plot.o plot3d.o plotmath.o print.o printarray.o printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o sort.o source.o split.o subassign.o subscript.o subset.o summary.o unique.o util.o version.o ../lib/libgraphics.a ../lib/libunix.a ../lib/libappl.a ../lib/libmath.a -lSM -lICE -L/s/X11R6.3-1/lib -lX11 -ldnet_stub -ltermcap -lm 
>  ld:
>  ../lib/libunix.a(system.o): main: multiply defined
>  fort: Severe: Failed while trying to link.
> 
> Is anyone familiar enough with Digital Unix to decide why it is
> defining main in unix/system.o.  I checked and the symbol is indeed
> defined there.

We *always* define main there... However, we do not generally use f77
to link, so my guess would be that the Fortran compiler supplies a
main() of its own. So perhaps you need to link with (g)cc and add in
some Fortran libraries?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 18 23:08:39 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 18 Jun 1998 17:08:39 -0500
Subject: Compiling under Digital Unix
In-Reply-To: Peter Dalgaard BSA's message of 19 Jun 1998 00:09:21 +0200
References: <m0ymlvC-0000Y8C@verdi.stat.wisc.edu> <x2btrqs6pa.fsf@blueberry.kubism.ku.dk>
Message-ID: <6rogvq1hy0.fsf@verdi.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Douglas Bates <bates@stat.wisc.edu> writes:

> > Is anyone familiar enough with Digital Unix to decide why it is
> > defining main in unix/system.o.  I checked and the symbol is indeed
> > defined there.
> 
> We *always* define main there... However, we do not generally use f77
> to link, so my guess would be that the Fortran compiler supplies a
> main() of its own. So perhaps you need to link with (g)cc and add in
> some Fortran libraries?

Of course.  My brain is not functioning it seems.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From C.Farrow@geology.gla.ac.uk  Fri Jun 19 10:28:58 1998
From: C.Farrow@geology.gla.ac.uk (Colin Farrow)
Date: Fri, 19 Jun 1998 10:28:58 +0100
Subject: problem with sub in graphs
Message-ID: <E0ymxTe-00007K-00@alligin>


Use of the graphical parameter 'sub' in a high level graphics function is 
inconsistent, and incompatible with the blue book

> plot(1:10, main="test", sub="demo")
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function

... and why so many warnings?

> hist(1:10, main="test", sub="demo")
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function

... despite the warnings the sub title is drawn !

I think the problem existed in earlier releases of R but the warnings were not 
printed.
 
Above with R-0.62.1 under Solaris 2.5.1.

--------------------
                     \
Colin Farrow          \
                       \---------------------------------------
                        \                                       \
Department of Geology,   \ E-mail: colin@geology.gla.ac.uk       \
University of Glasgow,    \                                       \
Glasgow, G12 8QQ. Scotland \ Tel: +44 (0)41 339 8855 x5466         \
                            \ Fax: +44 (0)41 330 4817               \
`````````````````````````````````````````````````````````````````````````

                                         
                                               
                                               
 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun 19 14:10:41 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 19 Jun 1998 15:10:41 +0200
Subject: problem with sub in graphs
In-Reply-To: <E0ymxTe-00007K-00@alligin> (message from Colin Farrow on Fri, 19
 Jun 1998 10:28:58 +0100)
Message-ID: <199806191310.PAA18120@sophie.ethz.ch>

>>>>> "Colin" == Colin Farrow <C.Farrow@geology.gla.ac.uk> writes:

   Colin>  with R-0.62.1 under Solaris 2.5.1.

    Colin> Use of the graphical parameter 'sub' in a high level graphics
    Colin> function is inconsistent, and incompatible with the blue book

    >> plot(1:10, main="test", sub="demo")

   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function

   Colin> ... and why so many warnings?

Because sub is part of the "..." which are passed down from  plot.default()
to several lower-level functions,
each of which creates (at least) one warning.

     >> hist(1:10, main="test", sub="demo")

   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function

The same here:  hist.default() passes "..." to

	title(..) -- where it works
and to	axis(1,..) \
and	axis(2,..) / where it fails and produces the two warnings.

   Colin> ... despite the warnings the sub title is drawn !


   Colin> I think the problem existed in earlier releases of R but the
   Colin> warnings were not printed.

Exactly.  And because the problem existed, I liked the warnings to appear.
The idea is that the R code (not the low level C graphics) should be fixed;
This would mean that R functions must make sure to only path
valid "..." stuff to C.

Usefully, 
we would have a global option to turn off these warnings.
(as the other graphics warnings ! ==>   
 ``par(err = -1)'' would be the thing
)

Martin 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From C.Farrow@geology.gla.ac.uk  Fri Jun 19 15:36:56 1998
From: C.Farrow@geology.gla.ac.uk (Colin Farrow)
Date: Fri, 19 Jun 1998 15:36:56 +0100
Subject: problem with sub in graphs
Message-ID: <E0yn2Hg-0000Cc-00@alligin>


I understand the problem now. 

Clearly a more systematic approach to the use of ... is required.
In the current example with plot and hist the problem arises because parameters 
of the title function are being passed to other low level graphical functions. 
The solution therefore is that only global graphical parameters such as col, are 
passed via ... and function specific parameters like sub need to be specified in 
the function definition. Hence in the current situation plot.default and 
hist.default require a sub= argument which should be passed only to the title 
function. It currently is not, and yes it would be handy to be able to turn off 
the warnings.


Colin
> 
>     Colin> Use of the graphical parameter 'sub' in a high level graphics
>     Colin> function is inconsistent, and incompatible with the blue book
> 
>     >> plot(1:10, main="test", sub="demo")
> 
>    Colin> Warning: parameter "sub" couldn't be set in high-level plot() 
function
> 
> Exactly.  And because the problem existed, I liked the warnings to appear.
> The idea is that the R code (not the low level C graphics) should be fixed;
> This would mean that R functions must make sure to only path
> valid "..." stuff to C.
> 
> Usefully, 
> we would have a global option to turn off these warnings.
> (as the other graphics warnings ! ==>   
>  ``par(err = -1)'' would be the thing
> )

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 19 16:38:38 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 1998 17:38:38 +0200
Subject: problem with sub in graphs
In-Reply-To: Colin Farrow's message of Fri, 19 Jun 1998 15:36:56 +0100
References: <E0yn2Hg-0000Cc-00@alligin>
Message-ID: <x21zslmmf5.fsf@blueberry.kubism.ku.dk>

Colin Farrow <C.Farrow@geology.gla.ac.uk> writes:

> I understand the problem now. 
> 
> Clearly a more systematic approach to the use of ... is required.
> In the current example with plot and hist the problem arises because parameters 
> of the title function are being passed to other low level graphical functions. 
> The solution therefore is that only global graphical parameters such as col, are 
> passed via ... and function specific parameters like sub need to be specified in 
> the function definition. Hence in the current situation plot.default and 
> hist.default require a sub= argument which should be passed only to the title 
> function. It currently is not, and yes it would be handy to be able to turn off 
> the warnings.

Wait a minute.

Am I the only one sensing that something is badly amiss with that
logic? I agree that that is the essence of the problem, but the
solution seems wrong.

The purpose of '...' is that a function does not be need to know
about certain parameters that are being handled by lower level
routines. It can just pass them along. 

This is very practical for modular programming in that you can just
(e.g.) add an option to a low level function without having to register
it with all other 'upstreams' functions (in different packages and
whatnot). Of course, you still have to be careful about the argument
names but that's fairly easy in practice.

Suppose that a function needs to call *two* such routines. Then why
should it suddenly be made responsible for keeping track of which
arguments make sense to which routine? I'd say that the only sensible
paradigm is that routines that get called with '...' should simply
disregard any arguments they do not understand what to do with.

(I'm also not very happy with the news that S-4 will be enforcing
identical calling sequences for generic methods, but that's another
matter)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 19 16:55:19 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 19 Jun 1998 11:55:19 -0400
Subject: DSE status
Message-ID: <98Jun19.121635edt.13446@mailgate.bank-banque-canada.ca>

I have my DSE library working fairly well now with 0.62.1. It required a few
changes because of the changes to R INSTALL and  "xxx<-" functions. I would like
to tar up a new version soon but

1/ for testing I have been using a kludge in .First.lib to select the first
element of section - since I happen to know that is the element I need given the
way I have  $RLIBS set. This argument to .First.lib should indicate only the
section from which the library comes, so
   paste(library, "/", section, sep="")
gives me the location. Is a fix to this forthcoming or should I work on a better
kludge?

2/ I like the fancy help facility but I am not likely to get around to
converting from my html anytime soon. In the meantime I will make a simple .Rd
file with a general description and hopefully I can get the html version to
point to the link to my full html help. However, I am unclear on the mechanism
for getting the link to a package included into R/doc/html/packages.html with R
INSTALL. Can someone explain how I do this?

3/ I get a lot of
       Warning in par(args) : parameter "cin" can't be set
       Warning in par(args) : parameter "cra" can't be set
        ...
  even using on.exit(old.pars). These are annoying but not serious.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jun 19 18:08:41 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Fri, 19 Jun 1998 12:08:41 -0500 (CDT)
Subject: Compilation of R-0.62.1 on DEC Alpha
Message-ID: <m0yn4eX-0000b2C@verdi.stat.wisc.edu>

I have compiled R-0.62.1 on a DEC Alpha system that is running Digital
Unix 4.0.  I had to change some settings in Makeconf from those
generated by configure.  I changed the LDCMD to gcc and the LIBS to
include -lFutil and -lfor.  (I wonder if they realized how close their
name for the Fortran utilities is to the word "futile".)  I also had
to force it to use the GNU version of the install program as the DEC
version is not as fully featured.

I get a compilation but it creates a floating point exception as soon
as you try to run it.
 $ /unsup/R-0.62.1/bin/R

 R : Copyright 1998, The R Development Core Team
 Version 0.62.1  (June 15, 1998)

 R is free software and comes with ABSOLUTELY NO WARRANTY.
 You are welcome to redistribute it under certain conditions.
 Type    "?license" or "?licence" for distribution details.

 R is a collaborative project with many contributors.
 Type    "?contributors" for a list.

 Type    "demo()" for some demos, "help()" for on-line help, or
	 "help.start()" for a HTML browser interface to help.

 Floating exception(coredump)
 $ 

Has anyone been successful building R-0.62.1 (and running it) on this
platform?

Builds on Solaris/SPARC and Solaris/Intel and Debian GNU/Linux Intel
went smoothly.  I may try to see if I can get a person running Debian
GNU/Linux on an Alpha to try a build there.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 19 18:21:11 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 1998 19:21:11 +0200
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: Douglas Bates's message of Fri, 19 Jun 1998 12:08:41 -0500 (CDT)
References: <m0yn4eX-0000b2C@verdi.stat.wisc.edu>
Message-ID: <x2wwadl33s.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> I get a compilation but it creates a floating point exception as soon
> as you try to run it.
..
>  Floating exception(coredump)
>  $ 

There are two things to this: What on earth is causing a floating
exception at that stage (it might actually be normal)? and why is it
dumping core? The latter sounds as if you might need to put in some
option to force IEEE behaviour.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jun 19 18:33:30 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 19 Jun 1998 12:33:30 -0500
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: Peter Dalgaard BSA's message of 19 Jun 1998 19:21:11 +0200
References: <m0yn4eX-0000b2C@verdi.stat.wisc.edu> <x2wwadl33s.fsf@blueberry.kubism.ku.dk>
Message-ID: <6rvhpxe1p1.fsf@verdi.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> There are two things to this: What on earth is causing a floating
> exception at that stage (it might actually be normal)? and why is it
> dumping core? The latter sounds as if you might need to put in some
> option to force IEEE behaviour.

Is there anything done before the first prompt to initialize the IEEE
NaN, Inf and -Inf?

I do have the -ieee_with_no_inexact flag being passed to gcc.  The end
of the configure output shows

 R is now configured for alpha-dec-osf4.0

   Source directory:         .
   Installation directory:   /usr/local
   C compiler:               gcc -ieee_with_inexact -g -O2
   FORTRAN compiler:         f77 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jun 19 18:44:35 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 19 Jun 1998 12:44:35 -0500
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: Douglas Bates's message of 19 Jun 1998 12:33:30 -0500
References: <m0yn4eX-0000b2C@verdi.stat.wisc.edu> <x2wwadl33s.fsf@blueberry.kubism.ku.dk> <6rvhpxe1p1.fsf@verdi.stat.wisc.edu>
Message-ID: <6ru35he16k.fsf@verdi.stat.wisc.edu>

I see I contradicted myself.

Douglas Bates <bates@cs.wisc.edu> writes:

> I do have the -ieee_with_no_inexact flag being passed to gcc.  The end
                          xxx
...
>    C compiler:               gcc -ieee_with_inexact -g -O2

Strike the "_no"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 19 19:02:35 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 1998 20:02:35 +0200
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: Douglas Bates's message of 19 Jun 1998 12:44:35 -0500
References: <m0yn4eX-0000b2C@verdi.stat.wisc.edu>
 <x2wwadl33s.fsf@blueberry.kubism.ku.dk>
 <6rvhpxe1p1.fsf@verdi.stat.wisc.edu>
 <6ru35he16k.fsf@verdi.stat.wisc.edu>
Message-ID: <x2ra0ll16s.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> 
> I see I contradicted myself.
> 
> Douglas Bates <bates@cs.wisc.edu> writes:
> 
> > I do have the -ieee_with_no_inexact flag being passed to gcc.  The end
>                           xxx
> ...
> >    C compiler:               gcc -ieee_with_inexact -g -O2
> 
> Strike the "_no"
> 

Never mind. The strange thing is that it isn't behaving according to
IEEE specs, because according to those, default behaviour on fp
exceptions is to set a flag and continue. 

I bet the exception is happening in InitArithmetic() in
src/main/arithmetic.c which does some division by zero *before*
setting a signal handler for SIGFPE. Tried running it under the
debugger? (or debugging the core file?)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun 19 18:59:38 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 19 Jun 1998 19:59:38 +0200
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: <6rvhpxe1p1.fsf@verdi.stat.wisc.edu> (message from Douglas Bates
 on 19 Jun 1998 12:33:30 -0500)
Message-ID: <199806191759.TAA27948@sophie.ethz.ch>

>>>>> "DougB" == Douglas Bates <bates@stat.wisc.edu> writes:

    DougB> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
    >> There are two things to this: What on earth is causing a floating
    >> exception at that stage (it might actually be normal)? and why is it
    >> dumping core? The latter sounds as if you might need to put in some
    >> option to force IEEE behaviour.

    DougB> Is there anything done before the first prompt to initialize the
    DougB> IEEE NaN, Inf and -Inf?

Yes!
Look at  ML_POSINF, ML_NAN, etc in  src/include/Mathlib.h

    DougB> I do have the -ieee_with_(..)_inexact flag being passed to gcc.

    DougB> The end of the configure output shows

    DougB>	 R is now configured for alpha-dec-osf4.0

    DougB>	 Source directory:         .
    DougB>	 Installation directory:   /usr/local
    DougB>	 C compiler:               gcc -ieee_with_inexact -g -O2
    DougB>	 FORTRAN compiler:         f77 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 19 18:59:48 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 19 Jun 1998 13:59:48 -0400
Subject: R INSTALL doc woes
Message-ID: <98Jun19.142109edt.13452@mailgate.bank-banque-canada.ca>

I put some documentation in a file dse/man/dse.Rd in and did

R INSTALL -l rlibs dse

This built the copies of dse.Rd in rlibs/dse/{help latex html}.
It also wrote over  R/doc/html/function.html  and  R/doc/html/packages.html,
effectively clobbering all the R documentation.

Also, the link that gets put in R/doc/html/packages.html points to
    R/library/dse/html/00Index.html
rather than
          rlibs/dse/html/00Index.html


Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From arossini@biostat.washington.edu  Sat Jun 20 18:04:21 1998
From: arossini@biostat.washington.edu (Anthony Rossini)
Date: Sat, 20 Jun 1998 10:04:21 -0700 (PDT)
Subject: ["Eric S. Raymond" <esr@snark.thyrsus.com>] The Trove project -- next-generation Internet software archiving (fwd)
Message-ID: <Pine.SUN.3.91.980620100329.6767A-110000@chekov>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--1918950298-1868141776-898362261=:6767
Content-Type: TEXT/PLAIN; charset=US-ASCII


Something to think about for CRAN's future.

best,
-tony

--1918950298-1868141776-898362261=:6767
Content-Type: MESSAGE/RFC822
Content-ID: <Pine.SUN.3.91.980620100329.6767C@chekov>

=====BEGIN PGP SIGNED MESSAGE=====


The Trove project is aimed at producing the next-generation Internet
software archive facility.  Its objective is to replace the ad-hoc
hacks now used at Sunsite, CPAN, PSA, the Red Hat contrib directory
and elsewhere with a flexible and powerful Web-accessible database
that will, among other things, support unified searches across all
Trove archives.

As the person who does most of the package-filing work on Sunsite, I
became convinced some months ago that the classical FTP-tree model of
Internet software archive just doesn't cut it any more.  It's way too
intensive of maintainer time, making it unsustainable as Linux
explodes in popularity.  It also makes software excessively hard to
find unless you're a regular archive user with a map of the site in
your head.

The thin WWW wrappers in place at Sunsite and CPAN make those archives
a little prettier, but don't solve the underlying scaling problems.
The Python guys over at PSA do a bit better on the user side through
effective leveraging of free-text searching, but haven't solved the
maintainer-intensiveness problem.  And none of the ad-hoc archives
talk to or can search each other.

We need a fundamentally new approach, and we need it before these
vital pieces of community infrastructure collapse under their own
weight.  I consider a solution to this problem critical enough that
Trove is now my top priority after continuing the public push for
the open-source development mode.

The Trove project has been up and running for month or so.  The design
has firmed up nicely and working code is beginning to appear.  If you
think you might be interested in helping solve these problems, please
look over the Trove project page at:

        http://www.tuxedo.org/~esr/trove

There's a design document accessible in HTML there that describes the
project's objectives and present status in detail.  

I'm aiming high.  I want the maintainers of the major existing
archives to buy in early, so that by year-end the present creaking
infrastructure can be replaced with something better.  I can deliver
Sunsite myself.  The Python community's leaders are already on board,
and so is Red Hat.  And we've had an expression of interest from
CPAN's maintainer.  Anybody else running an archive site is urged to
join now so we can be sure to accomodate your community's needs in the
design.

We could use more design input (especially from people running archives now),
and we'll need a fair bit of implementation and testing help.  CGI and Web
experts would be particularly welcome, also people who grok PGP and
web-session-authentication problems.
- -- 
                <a href="http://www.tuxedo.org/~esr">Eric S. Raymond</a>

Hoplophobia (n.): The irrational fear of weapons, correctly described by 
Freud as "a sign of emotional and sexual immaturity".  Hoplophobia, like
homophobia, is a displacement symptom; hoplophobes fear their own
"forbidden" feelings and urges to commit violence.  This would be
harmless, except that they project these feelings onto others.  The
sequelae of this neurosis include irrational and dangerous behaviors
such as passing "gun-control" laws and trashing the Constitution.



- -- 
This article has been digitally signed by the moderator, using PGP.
http://www.iki.fi/mjr/cola-public-key.asc has PGP key for validating signature.
Send submissions for comp.os.linux.announce to: linux-announce@news.ornl.gov
PLEASE remember a short description of the software and the LOCATION.
This group is archived at http://www.iki.fi/mjr/linux/cola.html

=====BEGIN PGP SIGNATURE=====
Version: 2.6.3i
Charset: latin1

iQCVAgUBNYfCyVrUI/eHXJZ5AQEBYgP+KfEOmBIqEtnCVElbqNgnz37mpsAbI8ci
nrzFrlesIauq27Wf4ON5Bbv2psS6IzePNI9D3G64QNTYUFbyHnB2fEPd98n5rpMl
JoWjxG1JPIAzE9pPqBZ1Ak6UtGn3MTqPB7GKu9v9DSj6I9rJRF0zRP21Y612Mw9V
XfTMRXPnwkM=
=qIr6
=====END PGP SIGNATURE=====

------------------------------



--1918950298-1868141776-898362261=:6767--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sun Jun 21 04:43:56 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 20 Jun 1998 22:43:56 -0500
Subject: R-0.62.1 on DEC Alpha
Message-ID: <6rpvg3whab.fsf@verdi.stat.wisc.edu>

The good news is that Christopher Chimelis has compiled and
successfully run R-0.62.1 on a DEC Alpha running Linux (Debian
GNU/Linux 2.0 for Alpha).  He needed to set the -mieee flag to the
compiler which, for that system, is the egcc compiler from the egcs
system.

The bad news is that I can get R-0.62.1 to compile on a DEC Alpha
running Digital Unix 4.0 with the gcc 2.7.2 compiler and using the
-ieee flag but it still generates a floating point exception before it
gets to the first prompt.

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jun 22 08:35:30 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 22 Jun 1998 09:35:30 +0200 (CEST)
Subject: DSE status
In-Reply-To: <98Jun19.121635edt.13446@mailgate.bank-banque-canada.ca>
References: <98Jun19.121635edt.13446@mailgate.bank-banque-canada.ca>
Message-ID: <13710.2370.668615.396199@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 19 Jun 1998 11:55:19 -0400,
>>>>> Paul Gilbert (PG) wrote:


PG> 2/ I like the fancy help facility but I am not likely to get around to
PG> converting from my html anytime soon. In the meantime I will make a simple .Rd
PG> file with a general description and hopefully I can get the html version to
PG> point to the link to my full html help. However, I am unclear on the mechanism
PG> for getting the link to a package included into R/doc/html/packages.html with R
PG> INSTALL. Can someone explain how I do this?

The file is built from the directories in $RHOME/library: For each
directory I look if  $RHOME/library/$pkg/TITLE exists and use the
contents of the TITLE file as entry for the package list.

You can build the also by calling

	${RHOME}/etc/build-help --htmllists

The entry points always to

	$RHOME/library/$pkg/html/00Index.$HTML

so by replacing this file you can provide your own HTML documentation.

Hope this helps,
Fritz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jun 22 08:54:49 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 22 Jun 1998 09:54:49 +0200 (CEST)
Subject: R INSTALL doc woes
In-Reply-To: <98Jun19.142109edt.13452@mailgate.bank-banque-canada.ca>
References: <98Jun19.142109edt.13452@mailgate.bank-banque-canada.ca>
Message-ID: <13710.3529.158559.899687@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 19 Jun 1998 13:59:48 -0400,
>>>>> Paul Gilbert (PG) wrote:

PG> I put some documentation in a file dse/man/dse.Rd in and did
PG> R INSTALL -l rlibs dse

PG> This built the copies of dse.Rd in rlibs/dse/{help latex html}.
PG> It also wrote over  R/doc/html/function.html  and  R/doc/html/packages.html,
PG> effectively clobbering all the R documentation.

PG> Also, the link that gets put in R/doc/html/packages.html points to
PG>     R/library/dse/html/00Index.html
PG> rather than
PG>           rlibs/dse/html/00Index.html


The html documentation currently does not support non-standard
library locations, i.e., the packages must be in $RHOME library. Of
course I consider this as a massive bug, but upon fixing it I want to
make it completely right ... which includes building the packages.html
file at runtime from the current .lib.loc. The main problem is that
there seems to be no way of using environment variables such as $USER
or $HOME in html code ... hence I cannot access any file the user is
allowed to write to.

The typical use of
	R INSTALL -l xxx mypkg

IMO is with xxx=$HOME/lib/something and that can't work easily ...

If anybody can help me out with this, please let me know!

I want to build a packages.html file in R and then send the resulting
HTML code to the browser ... how should I call the file such that

*)	the user is allowed to write to it
*)	the file has a name I can reference from systemwide html files
*)	it is on a per-user basis, i.e. /tmp/packages.html is out of
	question.  

fritz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 22 09:43:49 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 Jun 1998 10:43:49 +0200
Subject: problem with sub in graphs
In-Reply-To: <x21zslmmf5.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 19 Jun 1998 17:38:38 +0200)
Message-ID: <199806220843.KAA01498@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Colin Farrow <C.Farrow@geology.gla.ac.uk> writes:
    >> I understand the problem now.  Clearly a more systematic approach to
    >> the use of ... is required.  In the current example with plot and
    >> hist the problem arises because parameters of the title function are
    >> being passed to other low level graphical functions.  The solution
    >> therefore is that only global graphical parameters such as col, are
    >> passed via ... and function specific parameters like sub need to be
    >> specified in the function definition. Hence in the current situation
    >> plot.default and hist.default require a sub= argument which should
    >> be passed only to the title function. It currently is not, and yes
    >> it would be handy to be able to turn off the warnings.

    PD> Wait a minute.

    PD> Am I the only one sensing that something is badly amiss with that
    PD> logic? I agree that that is the essence of the problem, but the
    PD> solution seems wrong.

hmm, maybe not for the particular case.
In the light of my story below, I am convinced that code can be made less
error prone and more robust by using as little "..." as possible
inside basic R functions.

    PD> The purpose of '...' is that a function does not  need to know
    PD> about certain parameters that are being handled by lower level
    PD> routines. It can just pass them along.

Yes,  but......

The problem here is really about catching user typos.
S-plus has been  quite lazy here which has driven people into despair, 
more than once in my epxerience:

Consider the person (especially non-pro statistician) who does

	summary(glm(y~x,familiy=poisson(link="identity")))

and then tries to make sense from what [s]he gets.
	(This is a real story, not made up!  
	 I don't remember how many man hours were lost, but > 2)

In R, a more or less helpful error message ("... unused argument to function"),
whereas in S-plus, there's NO error message and a result that looks quite
reasonable  --- but is just wrong:
Since S has  glm <- function(..........,  ...)
				          ###
the  ``familiy'' is just put into the  "..." part,
	    ^
passed on to glm.fit and never seen there ---
resulting in the default family, i.e. gaussian, being used  which can give
quite reasonably looking results...  but the un-experienced user will
VERY hardly find out.

Note: The above behavior is not a basic merit of R of S(-plus),
      it just happens that glm() in R was written  WITHOUT "..."
      and glm() in S-plus has a "..."

My own lesson learned from the above story:

	1) Use "..." sparingly in functions you write
	2) Still use "<arg>=NULL" arguments which you pass to lower-level
	   functions in order only use "..." once, if possible.
	3) If you pass "..." to lower level functions,
	   they SHOULD be checking  ALL of "..." eventually
	   and tell if there were arguments there with ``wrong'' tags (/names).

	Otherwise, typos in argument names will not be detected and the
	arguments silently dropped.  
	I think this would be too lazy for ``robust'' programming..

    PD> This is very practical for modular programming in that you can just
    PD> (e.g.) add an option to a low level function without having to
    PD> register it with all other 'upstreams' functions (in different
    PD> packages and whatnot). Of course, you still have to be careful
    PD> about the argument names but that's fairly easy in practice.

    PD> Suppose that a function needs to call *two* such routines. Then why
    PD> should it suddenly be made responsible for keeping track of which
    PD> arguments make sense to which routine? I'd say that the only
    PD> sensible paradigm is that routines that get called with '...'
    PD> should simply disregard any arguments they do not understand what
    PD> to do with.

I agree that this is very handy in several cases.
However, in the light of my point "3)" above,
I think we should be more particular here.

Maybe, the lowest level functions  (R or C, I'm not so sure anymore),
should check the names / tags of "..."
and only silently disregard the names if the belong to a subset of
``registered'' names.

In the case of graphics and plot(...),  par(...);
this could be made in a well defined and accessible set.

    PD> (I'm also not very happy with the news that S-4 will be enforcing
    PD> identical calling sequences for generic methods, but that's another
    PD> matter)
yes, indeed  [2 x]

Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 22 11:33:52 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Jun 1998 12:33:52 +0200
Subject: problem with sub in graphs
In-Reply-To: Martin Maechler's message of Mon, 22 Jun 1998 10:43:49 +0200
References: <199806220843.KAA01498@sophie.ethz.ch>
Message-ID: <x2yaupwwrz.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

>     PD> The purpose of '...' is that a function does not  need to know
>     PD> about certain parameters that are being handled by lower level
>     PD> routines. It can just pass them along.
> 
> Yes,  but......
> 
> The problem here is really about catching user typos.
> S-plus has been  quite lazy here which has driven people into despair, 
> more than once in my epxerience:
> 
> Consider the person (especially non-pro statistician) who does
> 
> 	summary(glm(y~x,familiy=poisson(link="identity")))
> 

Point taken, but I still have reservations, mainly in the
division-of-labour department. 

The obvious counterargument is that in Splus, glm internally calls its
method= argument (glm.fitter) with the ..., and there is no way for
glm to know that "familiy" is not a valid argument for a user-supplied
method (-short of some kind of AI proximity testing, I suppose).
Conversely, *if* argument checking was performed in glm, and a user
wanted to use his own supersmart fitting method with some special
arguments, he'd have to modify glm as well. Now take *two* packages,
each modifying glm in their own way...

One way out - but this requires considerable changes - could be to
implement a convention that routines using ... returns a component
called $unmatched. The caller could then take the intersection of
those and if it is non-empty, complain. (If a routine does not
return $unmatched one must assume that everything *is* matched.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 22 14:32:56 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Jun 1998 09:32:56 -0400
Subject: .First.lib
References: <98Jun17.172642edt.13467@mailgate.bank-banque-canada.ca> <13710.2598.967181.382367@pc87.maho.magnaeu.com>
Message-ID: <98Jun22.095547edt.13452@mailgate.bank-banque-canada.ca>

> > There seems to be a minor problem in .First.lib: the library argument
> > is all of $RLIBS. I think it should be just the one directory from
> > which the package is being taken.

> `all of $RLIBS' meaning the full path to the element of lib.loc where
> the package was found?  This is definitely right.  Otherwise, you do not
> have enough information to find e.g. an `.so' file to be loaded by
> library.dynam().

By "all of  $RLIBS" I meant all of the paths in $RLIBS, in my case

> .lib.loc
[1] "/home/res/gilp/dse/pub/Rdse/rlibs"
[2] "/home/res/gilp/padi/my.production/rlibs"
[3] "/home/res8/gilp/R-versions/R-0.62.1/library"
>
However, when I do library("dse") it is using a package in [1] and when
.First.lib for dse is executed I would like the "library" argument to be set to
.lib.loc[1] (in this case) not to  the three element vector .lib.loc.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 22 16:03:56 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Jun 1998 11:03:56 -0400
Subject: R INSTALL doc woes
References: <98Jun19.142109edt.13452@mailgate.bank-banque-canada.ca> <13710.3529.158559.899687@galadriel.ci.tuwien.ac.at>
Message-ID: <98Jun22.112649edt.13453@mailgate.bank-banque-canada.ca>

>The html documentation currently does not support non-standard
>library locations, i.e., the packages must be in $RHOME library. Of
>course I consider this as a massive bug, but upon fixing it I want tomake it
>completely right ... which includes building the packages.html
>file at runtime from the current .lib.loc. The main problem is that
>there seems to be no way of using environment variables such as $USER
>or $HOME in html code ... hence I cannot access any file the user is
>allowed to write to.

If you consider the possibility that a package may not belong to the owner of R
then you rule out a lot of ways for doing this. One possibility might be a set
of links in /tmp (e.g  R.packages and R.package.xxx ). I don't think you could
write these with HTML, you would need to do that with the R startup script, but
an HTML browser can certainly follow them. There is, however, the problem you
alluded to: one user might clobber another one. As far as I know the only
"official HTML" way around this is with cookies, which I don't know much about
and I'm not sure how you would do it.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Jun 22 17:34:56 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Mon, 22 Jun 1998 11:34:56 -0500 (CDT)
Subject: lme_2.9-2.tar.gz available soon on CRAN
Message-ID: <m0yo9YW-0000Y0C@verdi.stat.wisc.edu>

I recently uploaded a new version of the lme contributed library to
the main CRAN site.  It should be available on mirrors within the next
24 hours.

This version matches the beta version of NLME 3.0 for S-PLUS.  It only
provides methods for linear mixed-effects models in R so it is called
lme rather than nlme.  The other big thing that is missing in the R
version is all the graphics because they rely on trellis graphics
functions.

Even with these things missing it is a big step forward for Jose'
Pinheiro and me to have this running under R.  This version can handle
a substantial portion of the models fit by SAS PROC MIXED.  It
computes either maximum likelihood (ML) or restricted maximum
likelihood (REML) estimates for linear mixed-effects models with
single or multiple nested levels of random effects.

The library includes a SAS_Mixed directory with R transcripts of
analyses paralleling those in the book "SAS System for Mixed Models"
by Littell, Milliken, Stroup and Wolfinger.

Please ensure that you get the lme_2.9-2.tar.gz file.  The
lme_2.9-1.tar.gz file has problems with installation of the help files
and has the wrong version listed in the DESCRIPTION file.  (If you
really want to install lme_2.9-1.tar.gz you can do so by removing the
file lme/man/[.pdMat.Rd before trying to run R INSTALL.)

This is still work in progress.  It seems right now that the
variance-covariance matrices with compound symmetry structure are not
behaving properly but I haven't tracked down the problem there yet.

The speed is quite good and can be improved when we get the hooks into
the underlying optimization code in R.  Here is a speed comparison
used in the "SAS Sytems for Mixed Models" book.

> library( lme )
> data( SIMS )
> ### Analysis of the Second International Mathematics Study (SIMS)
> ### described in section 7.2 of "SAS System for Mixed Models"
> unix.time(assign("fm1RSIMS", lme(Gain ~ Pretot, SIMS, ~ Pretot | Class, 
+         REML = TRUE)))
[1] 14.25  0.10 15.00  0.00  0.00
> ### Timing was done on a Pentium Pro 200 MHz system running Linux
> ### Your mileage may vary.
> summary(fm1RSIMS)              # compare to output 7.4, p. 262, "SAS System ..."
Linear mixed-effects model fit by REML
 Data: SIMS 
       AIC      BIC    logLik
  22392.57 22429.85 -11190.29

Random effects:
 Formula: ~Pretot | Class
 Structure: General positive-definite
            StdDev    Corr  
(Intercept) 3.8065218 (Intr)
Pretot      0.0959321 -0.641
Residual    4.7154814       

Fixed effects: Gain ~ Pretot 
                Value Std.Error   z-value p-value
(Intercept)  7.059605  0.365898  19.29390       0
Pretot      -0.186031  0.016098 -11.55592       0
 Correlation: 
       (Intr)
Pretot -0.76 

Standardized Within-Group Residuals:
         Min           Q1          Med           Q3          Max 
-5.377621209 -0.595534211  0.009876494  0.640990584  3.718249985 

Number of Observations: 3691
Number of Groups: 190 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 23 15:45:43 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 23 Jun 1998 10:45:43 -0400
Subject: redundant names
Message-ID: <98Jun23.110915edt.13445@mailgate.bank-banque-canada.ca>

I don't often suggest an incompatibility with S, but I think this behavior in S
and R is very dangerous:

> c(list(a="a"), b=2, a=1)$a
[1] "a"
> c(list(a="a"), b=2, a=1)
$a
[1] "a"
$b
[1] 2
$a
[1] 1

I think this is a case where we may want incompatibility with S in order to
enforce good programming and catch unintentional errors. I cannot think of a
case
where I would want a list with two elements having the same name. I would
suggest  eliminating all but the first of any redundant names (and issuing a
warning?).

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun 24 07:21:36 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Jun 1998 08:21:36 +0200 (CEST)
Subject: redundant names
In-Reply-To: <98Jun23.110915edt.13445@mailgate.bank-banque-canada.ca>
References: <98Jun23.110915edt.13445@mailgate.bank-banque-canada.ca>
Message-ID: <13712.39664.226966.564351@pc87.maho.magnaeu.com>

>>>>> Paul Gilbert writes:

> I don't often suggest an incompatibility with S, but I think this behavior in S
> and R is very dangerous:

>> c(list(a="a"), b=2, a=1)$a
> [1] "a"
>> c(list(a="a"), b=2, a=1)
> $a
> [1] "a"
> $b
> [1] 2
> $a
> [1] 1

> I think this is a case where we may want incompatibility with S in
> order to enforce good programming and catch unintentional errors. I
> cannot think of a case where I would want a list with two elements
> having the same name. I would suggest eliminating all but the first of
> any redundant names (and issuing a warning?).

I am not saying that I have a good example (see below), but some may
want it this way.  Suppose you have a list of complicated records and
you (for some admittedly strange reason) decide you want to store labels
directly as the list names.

E.g.,
	x <- list(a = 3, b = 2, a = 4)
which you later use with
	x[names(x) == "a"]
to work on the records you want.

So I think we should not rule this out in c() (or e.g. [rc]bind()).

But we need to spend more time on how we want list assignment to be in
any case.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jun 24 09:47:51 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 24 Jun 1998 10:47:51 +0200
Subject: Warning in par(args)
In-Reply-To: <98Jun18.110225edt.13458@mailgate.bank-banque-canada.ca> (message
 from Paul Gilbert on Thu, 18 Jun 1998 10:41:41 -0400)
Message-ID: <199806240847.KAA25236@sophie.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    MM> I myself am using the (``recommended'' ?) way of
    MM>    work.work1()
    MM>    on.exit(par(op))
    MM>    op <- par(xyx = ...,  brd = ...)
    MM>    work.work2()
    MM>    op <- c(op, par(ghj = ...,  klm = ...))
    MM>    work.work3()

    MM> which can be slightly more tedious but is ``preciser'' and
    MM> doesn't lead to the above error messages.

    PaulG> Could you please explain the more precise nature of this and why
    PaulG> it doesn't give the error message. I typically use
    PaulG> on.exit(par(op)), but perhaps not everywhere.  Is it on.exit
    PaulG> that prevents the message?

No, it's not the on.exit;
it's the fact the I don't put the *whole* par() into op but rather only
the parts which I change;
e.g.
	> op <- par(mfrow= c(2,2))
	> op
	$mfrow:
	[1] 1 1

Therefore, a later  par(op)  [called by on.exit(.)] only calls par(.) with
arguments that make sens to be changed.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 23 15:53:07 1998
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Tue, 23 Jun 1998 10:53:07 -0400
Subject: un-settable pars
Message-ID: <98Jun23.111627edt.13457@mailgate.bank-banque-canada.ca>


      >> Warning in par(args) : parameter "cin" can't be set
      >> Warning in par(args) : parameter "cra" can't be set
      >> Warning in par(args) : parameter "csi" can't be set
      >> Warning in par(args) : parameter "din" can't be set
    PD> This comes from constructions of the type
    PD>   opar<-par()
    PD>   work.work.work()
    PD>   par(opar)
    PD> This gives complaints from unsettable items. Splus quietly omits them,
    PD> so I suppose that we really should do the same.

One solution here might be to set some attribute on unsettable items,
effectively indicating that it is not to be set and no warning is necessary.

Paul Gilbert


	[This was bounced by majordomo because of the match
	  /^subject:\s*uns\w*b/i [[= "u*su*scribe" with possible typos]]
	 that's why I made "unsettable" to "un-settable".

	 MM, list maintainer]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 24 11:09:37 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Jun 1998 12:09:37 +0200
Subject: Warning in par(args)
In-Reply-To: Martin Maechler's message of Wed, 24 Jun 1998 10:47:51 +0200
References: <199806240847.KAA25236@sophie.ethz.ch>
Message-ID: <x2vhprt8ke.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

>     MM>    on.exit(par(op))
>     MM>    op <- par(xyx = ...,  brd = ...)
>     MM>    work.work2()
>     MM>    op <- c(op, par(ghj = ...,  klm = ...))
>     MM>    work.work3()
...
> Therefore, a later  par(op)  [called by on.exit(.)] only calls par(.) with
> arguments that make sens to be changed.

Yup, but as has been pointed out there's a problem: If you change the
same parameter twice, you actually get the wrong result:

> opar<-par(cex=2)
> opar<-c(opar,par(cex=4))
> par(opar)
> par()$cex
[1] 2

which happens because

> opar
$cex
[1] 1

$cex
[1] 2

and par() sets parameters in the order it finds them. Of course one
could get the first item of each name by using

> opar[unique(names(opar))]
$cex
[1] 1

or let par(opar) do that internally, but I'm not sure that it is
really such a good idea.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 24 17:30:24 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 24 Jun 1998 12:30:24 -0400
Subject: rbind(NULL, matrix("a", 5,3))
Message-ID: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>

I'm get the following anti social behavior from R 0.62.1

Paul
_____
R : Copyright 1998, The R Development Core Team
Version 0.62.1  (June 15, 1998)
...
> rbind(NULL, matrix("a", 5,3))
Arithmetic Exception - core dumped
$ $

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 24 22:46:01 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Jun 1998 23:46:01 +0200
Subject: rbind(NULL, matrix("a", 5,3))
In-Reply-To: Paul Gilbert's message of Wed, 24 Jun 1998 12:30:24 -0400
References: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>
Message-ID: <x2u35aiicm.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I'm get the following anti social behavior from R 0.62.1
> 
> Paul
> _____
> R : Copyright 1998, The R Development Core Team
> Version 0.62.1  (June 15, 1998)
> ...
> > rbind(NULL, matrix("a", 5,3))
> Arithmetic Exception - core dumped
> $ $

Same thing happens here. What's that supposed to do anyway? 
Should be fixable with a bit of defensive coding. (The one good thing
about core dumps is that it is fairly easily to pinpoint where the
problem is...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 25 00:19:51 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 1998 01:19:51 +0200
Subject: rbind(NULL, matrix("a", 5,3))
In-Reply-To: Peter Dalgaard BSA's message of 24 Jun 1998 23:46:01 +0200
References: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>
 <x2u35aiicm.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ogvi75gn.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Same thing happens here. What's that supposed to do anyway? 
> Should be fixable with a bit of defensive coding. (The one good thing
> about core dumps is that it is fairly easily to pinpoint where the
> problem is...)

Fixed now. 

[In src/main/bind.c, just after line 913, insert

                               if ( k == 0 )
                                       mrows = 0;

]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 25 07:46:32 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 25 Jun 1998 08:46:32 +0200
Subject: Warning in par(args) -- the(?) solution
In-Reply-To: <x2vhprt8ke.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 24 Jun 1998 12:09:37 +0200)
Message-ID: <199806250646.IAA27094@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Martin Maechler <maechler@stat.math.ethz.ch> writes:

      MM>   on.exit(par(op))
      MM>   op <- par(xyx = ...,  brd = ...)
      MM>   work.work2()
      MM>   op <- c(op, par(ghj = ...,  klm = ...))
      MM>   work.work3()
      MM> ...

      MM> Therefore, a later par(op) [called by on.exit(.)] only calls par(.)
      MM> with arguments that make sens to be changed.

    PD> Yup, but as has been pointed out there's a problem: If you change the
    PD> same parameter twice, you actually get the wrong result:

    >> opar<-par(cex=2)
    >> opar<-c(opar,par(cex=4))
    >> par(opar)
    >> par()$cex
    PD> [1] 2

    PD> which happens because

    >> opar
    PD> $cex
    PD> [1] 1

    PD> $cex
    PD> [1] 2

    PD> and par() sets parameters in the order it finds them. Of course one
    PD> could get the first item of each name by using

    >> opar[unique(names(opar))]
    PD> $cex
    PD> [1] 1

    PD> or let par(opar) do that internally, but I'm not sure that it is
    PD> really such a good idea.

Wouldn't the ``easy'' solution be 
to use a FILO instead of a FIFO stack :

      >   on.exit(par(op))
      >   op <- par(xyx = ...,  brd = ...)
      >   work.work2()
      >   op <- c(par(ghj = ...,  klm = ...), op) ##--- PREPEND new par() --- !
	                                    #####
      >   work.work3()
      > ...

Of course this also depends on the (current) behavior of par() 
	(``setting parameters in the order it finds them''),
but we could "standardize" par() that way ((and document it!)) 
(and it is S compatible ..).

Martin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 25 16:01:22 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 25 Jun 1998 11:01:22 -0400
Subject: rbind(NULL, matrix("a", 5,3))
References: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>
 <x2u35aiicm.fsf@blueberry.kubism.ku.dk> <x2ogvi75gn.fsf@blueberry.kubism.ku.dk>
Message-ID: <98Jun25.112550edt.13441@mailgate.bank-banque-canada.ca>

>Fixed now.
>[In src/main/bind.c, just after line 913, insert
>                               if ( k == 0 )
>                                      mrows = 0;

I made this change, so the lines around 913 are now

     STRING(result)[i + n + (j * rows)] = STRING(u)[(i + j * mrows) % k];
    n += mrows;
                              if ( k == 0 )
                                       mrows = 0;
   }


and recompiled, but I still get the same problem:

> rbind(NULL, matrix("a", 5,3))
Arithmetic Exception - core dumped

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 25 16:17:11 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 1998 17:17:11 +0200
Subject: rbind(NULL, matrix("a", 5,3))
In-Reply-To: Paul Gilbert's message of Thu, 25 Jun 1998 11:01:22 -0400
References: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>
 <x2u35aiicm.fsf@blueberry.kubism.ku.dk>
 <x2ogvi75gn.fsf@blueberry.kubism.ku.dk>
 <98Jun25.112550edt.13441@mailgate.bank-banque-canada.ca>
Message-ID: <x2soktlde0.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> >Fixed now.
> >[In src/main/bind.c, just after line 913, insert
> >                               if ( k == 0 )
> >                                      mrows = 0;
> 
> I made this change, so the lines around 913 are now
> 
>      STRING(result)[i + n + (j * rows)] = STRING(u)[(i + j * mrows) % k];
>     n += mrows;
>                               if ( k == 0 )
>                                        mrows = 0;
>    }
> 
> 
> and recompiled, but I still get the same problem:
> 
> > rbind(NULL, matrix("a", 5,3))
> Arithmetic Exception - core dumped
> 

Aw, darn ...

Someone must have been adding stuff to my version but not yours...

The lines need to go  *before* the outer for loop. After line 909,
that is. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 25 20:55:46 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 25 Jun 1998 14:55:46 -0500 (CWT)
Subject: Difference in behaviour of model.matrix
Message-ID: <m0ypI7W-000n2IC@jenkins.stat.wisc.edu>

This is an obscure R/S incompatibility but it is tripping up some code
for us in the lme library.  If you specify the contrasts argument in a
call to model.matrix, that seems to take precedence over the
interpretation of the formula.  In S if the formula contains a "- 1",
that will cause the contrasts to be suppressed.

 S> foo <- data.frame(bar = factor(rep(1:3, rep(2,3))))
 S> foo
   bar 
 1   1
 2   1
 3   2
 4   2
 5   3
 6   3
 S> model.matrix(~bar - 1, model.frame(~ bar - 1, data = foo))
   bar1 bar2 bar3 
 1    1    0    0
 2    1    0    0
 3    0    1    0
 4    0    1    0
 5    0    0    1
 6    0    0    1
 S> model.matrix(~bar - 1, model.frame(~ bar - 1, data = foo), 
 +    contr = list(bar = contr.treatment(3)))
   bar1 bar2 bar3 
 1    1    0    0
 2    1    0    0
 3    0    1    0
 4    0    1    0
 5    0    0    1
 6    0    0    1

whereas 

 R> foo <- data.frame(bar = factor(rep(1:3, rep(2,3))))
 R> model.matrix(~bar - 1, model.frame(~ bar - 1, data = foo))
      bar1 bar2 bar3
 [1,]    1    0    0
 [2,]    1    0    0
 [3,]    0    1    0
 [4,]    0    1    0
 [5,]    0    0    1
 [6,]    0    0    1
 attr(,"assign")
 [1] 1 1 1
 R> model.matrix(~bar - 1, model.frame(~ bar - 1, data = foo), 
 +    contr = list(bar=contr.treatment(3)))
      bar2 bar3
 [1,]    0    0
 [2,]    0    0
 [3,]    1    0
 [4,]    1    0
 [5,]    0    1
 [6,]    0    1
 attr(,"assign")
 [1] 1 1

I would be willing to admit that our code should perhaps be redesigned
to avoid this unfortunate construction.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 25 21:37:36 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 1998 22:37:36 +0200
Subject: Difference in behaviour of model.matrix
In-Reply-To: Douglas Bates's message of Thu, 25 Jun 1998 14:55:46 -0500 (CWT)
References: <m0ypI7W-000n2IC@jenkins.stat.wisc.edu>
Message-ID: <x2ogvhxlnz.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> I would be willing to admit that our code should perhaps be redesigned
> to avoid this unfortunate construction.

On the other hand, the R model.xxx code has been in for a rewrite for
quite some time...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 25 22:16:34 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 25 Jun 1998 17:16:34 -0400
Subject: all.equal
Message-ID: <98Jun25.174107edt.13448@mailgate.bank-banque-canada.ca>

I'm not sure what the process is for this, but can I get the following all.equal
function put in the R base?

Paul Gilbert
____

all.equal <- function(obj1, obj2,...) {UseMethod("all.equal")}

all.equal.default <- function(obj1, obj2, tolerance=.Machine$double.eps)
  {if(mode(obj1)      != mode(obj2) )               return("modes differ.")
   if (length(obj1) != length(obj2) )               return("lengths differ")

   if(is.null(class(obj1)) != is.null(class(obj2))) return("classes differ.")
   else if(!is.null(class(obj1))
           && any(class(obj1) != class(obj2)) )     return("classes differ.")


   if(is.null(attributes(obj1)) != is.null(attributes(obj2)))
                                                    return("attributes differ.")

   else if(!is.null(attributes(obj1))
           && any(unlist(attributes(obj1)) != unlist(attributes(obj2))))
                                                    return("attributes differ.")

   cull.numeric  <- function(obj, r=NULL) {
      if (is.null(obj) | (length(obj) == 0)) return(r)
      else if (is.numeric(obj)) return(c(r,obj))
      else if (is.list(obj))
           return( c(cull.numeric(obj[[1]], r), cull.numeric(obj[-1])) )
      else return(r)
     }

   z1 <- cull.numeric(obj1)
   if(! is.null(z1))
      {z2 <- cull.numeric(obj2)
       if (length(z1) != length(z2) )  return("length of numeric parts differ")
       M <- pmax(abs(z1), abs(z2))
       # next line results in absolute rather than relative comparison for
       # very small numbers.
       M[ M < 100 *tolerance] <- 1
       if (any(abs(z1 -z2) > tolerance * M))
                       return("numeric value differences exceed tolerance.")
      }
  # next comparison is really for non-numeric values but also compares
  # numeric values to the tolerance of the character representation in unlist.
   if (! all(unlist(obj1) == unlist(obj2)))     return("values differ.")
   T
  }



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun 26 13:45:11 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Jun 1998 12:45:11 -0000 ()
Subject: R-beta: PostScript tick marks in 62.1
In-Reply-To: <Pine.3.87.9806251017.A16855-0100000@superh.hg.med.umich.edu>
Message-ID: <XFMail.980626130136.plummer@iarc.fr>

[Moved over from R-help - MTP]

On 25-Jun-98 Matthew R. Nelson wrote:
>I should have added that the plot was generated with log="xy".  On my 
>computer, this simple example recreates the problem:
>
>> postscript("tmp.ps", width=6, height=6, family="Times") 
>> plot((1:10)^2, (1:10)^3, log="xy") 
>> dev.off()
>
>With this simple plot function, I get 2 x-axis tick marks and 1 y axis 
>tick mark, but the expected number of axis labels.

I get the same thing. Sorry for doubting you, but a concrete example
helps to locate the problem.  The missing tick marks are being clipped
because somewhere in the graphics code, the information that we are
using the log scale for the axes is being lost.

Here's a patch for src/graphics/graphics.c

M.

--- graphics.c  Fri Jun 26 14:29:04 1998
+++ graphics.new        Fri Jun 26 14:30:42 1998
@@ -999,13 +999,19 @@
 double xDevtoUsr(double x, DevDesc *dd)
 {
   double nfc = xDevtoNFC(x, dd);
-  return (nfc - dd->gp.win2fig.ax)/dd->gp.win2fig.bx;
+  if (dd->gp.xlog)
+     return pow(10, (nfc - dd->gp.win2fig.ax)/dd->gp.win2fig.bx);
+  else
+     return (nfc - dd->gp.win2fig.ax)/dd->gp.win2fig.bx;
 }

 double yDevtoUsr(double y, DevDesc *dd)
 {
   double nfc = yDevtoNFC(y, dd);
-  return (nfc - dd->gp.win2fig.ay)/dd->gp.win2fig.by;
+  if (dd->gp.ylog)
+    return pow(10, (nfc - dd->gp.win2fig.ay)/dd->gp.win2fig.by);
+  else
+    return (nfc - dd->gp.win2fig.ay)/dd->gp.win2fig.by;
 }
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 26 14:57:41 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Jun 1998 15:57:41 +0200
Subject: R-beta: PostScript tick marks in 62.1
In-Reply-To: Martyn Plummer's message of Fri, 26 Jun 1998 12:45:11 -0000 ()
References: <XFMail.980626130136.plummer@iarc.fr>
Message-ID: <x2yauki7u2.fsf@blueberry.kubism.ku.dk>

Martyn Plummer <plummer@iarc.fr> writes:

> I get the same thing. Sorry for doubting you, but a concrete example
> helps to locate the problem.  The missing tick marks are being clipped
> because somewhere in the graphics code, the information that we are
> using the log scale for the axes is being lost.
> 
> Here's a patch for src/graphics/graphics.c
...

Now applied to the bugfix branch. Thank you.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 26 16:41:12 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 26 Jun 1998 11:41:12 -0400
Subject: scoping
Message-ID: <98Jun26.120612edt.13454@mailgate.bank-banque-canada.ca>

Can Luke Tierney's recent S-new post on scoping be included in the R FAQ?

I'm just going through my package and eliminating a few instances of "eval" as I
hadn't realized the dangers. I noticed that one way I've used eval is for
prompting, as in

n <- eval(parse(prompt="Enter the number of singular values to use: "))

I presume this is not too dangerous, but this has never really seemed like the
right way to do this. Can someone suggest a better alternative?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun 26 17:19:16 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Jun 1998 16:19:16 -0000 ()
Subject: scoping
In-Reply-To: <98Jun26.120612edt.13454@mailgate.bank-banque-canada.ca>
Message-ID: <XFMail.980626163001.plummer@iarc.fr>

On 26-Jun-98 Paul Gilbert wrote:
>Can Luke Tierney's recent S-new post on scoping be included in the R FAQ?

Could this be cross-posted?

>I'm just going through my package and eliminating a few instances of "eval" as
>I
>hadn't realized the dangers. I noticed that one way I've used eval is for
>prompting, as in
>
>n <- eval(parse(prompt="Enter the number of singular values to use: "))
>
>I presume this is not too dangerous, but this has never really seemed like the
>right way to do this. Can someone suggest a better alternative?

If you just want to read in a number, I think it's a lot safer to read
the input as character data with "readline" and then coerce it to numeric.
I wrote a utility function called "read.and.check" which does this. It
also checks that the user input satisfies certain conditions (mode,
lower and upper limit for numeric data, or set of allowed values), looping
until it gets an acceptable answer. It's in the coda package, with a help page.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Jun 26 18:27:05 1998
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 26 Jun 1998 12:27:05 -0500 (CDT)
Subject: scoping
In-Reply-To: <XFMail.980626163001.plummer@iarc.fr> from "Martyn Plummer" at Jun 26, 98 04:19:16 pm
Message-ID: <9806261727.AA29516@nokomis.stat.umn.edu>

Martyn Plummer wrote:
> 
> On 26-Jun-98 Paul Gilbert wrote:
> >Can Luke Tierney's recent S-new post on scoping be included in the R FAQ?
> 
> Could this be cross-posted?
> 

Here is the posting -- it was part of a thread on scoping in S.

John Maindonald wrote:
> 
> Jens Oehlschlaegel-Akiyoshi wrote, in response to John Thaden
> 
> > in S+ no function has automatic access to any local variables of any
> > parent functions FOR SECURITY REASONS (except for objects in frames 0+1). 
> There must of course be some scoping rules, and what scoping rules]
> are at the end of the day preferable is a matter for debate.

This debate has been pretty much settled in computer
science. Virtually all modern functional and near functional languages
use lexical scope. This includes all modern Lisp variants, the ML
family, Haskell, Miranda, etc. The theoretical underpinnings for these
languages is provided by the lambda calculus, which uses lexical
scope. Lexical scope is now considered essential for a higher level
functional language (i.e. a functional language that uses functions as
first-class values). This is the main reason S, even though it has
first class function values, is rarely used as a higher order
functional language. (Another reason is that most S users do not come
to S with a background of using a functional style, and with the lack
of lexical scoping it is probably not worth learning in the context of
S.)

In lexical scope, the meaning of a free variable in a function is
determined by the context in which the function is defined. For
example, in R (which Doug Bates mentioned in this thread and which is
lexically scoped)

	poisson.loglik<-function(x) {
				xbar<-mean(x)
				n<-length(x)
				function(lambda){
					n * (xbar * log(lambda) - lambda)
				}
			}
	pl<-poisson.loglik(rpois(10,2))

the value of pl is a log-likelihood function for the poisson sample
created by rpois(10,2). This was the value of the free variable x in
the inner function's definition when it was created, and this value is
locked into the function object (or closure) at creation time along
with the function definition. It does not matter what variables named
x are around when the function pl is called.

Another common scoping rule is dynamic scoping, where values of free
variables are determined by the environment in which they are
used. The log-likelihood example would not work at all with dynamic
scope since the x used would depend on what x was available each place
pl is called. Dynamic scope is what you get with macro languages and
was in effect what you had with S Version 1 where you only had macros,
not functions, available. Dynamic scoping is very occasionally useful,
but as a general rule it is much more error-prone and much less
powerful than lexical scope.

S uses a different rule: If a variable is not a local variable (a
function argument or a variable created by an <- assignment) then it
is global. This rule is much less error-prone than dynamic scoping but
also much less powerful than lexical scope. Some scripting languages
also use this rule (I think Tcl and Python do, though I haven't double
checked). There are probably several reasons why S chose to use this
rule, but the most important one is probably that lexical scope,
together with the ability to change a variable's value by assignment,
means you cannot save functions to separate files by writing out their
definitions.  Functions can be interrelated in arbitrary ways through
their defining environments, and the only easy safe way to preserve
these relationships when saving to disk is to save an entire workspace
(as R does). S's approach to persistent storage is incompatible with
lexical scope for its functions. I'm sure at the time the price of
changing the approach to storage just to accommodate lexical scope
seemed far too expensive, so the simpler scoping rule was adopted.

But the simple rule is not as expressive as lexical scope, and there
are certain things that cannot be done if only this standard scoping
rule is used; the modeling functions are one example. So S provides an
alternative: By using eval/frame access/get/assign in conjunction with
S's version of lazy evaluation (I'll call this eval for short) you can
write functions whose calls behave almost any way you want to. This is
a major difference from almost all other languages I am familiar
with. In other languages the scoping rules are absolute. In S, they
can be circumvented. This ability adds a great deal of power but it
also provides an enormous amount of rope with which to hang yourself.

Most of the time you can ignore this added power of S. If you write a
function and

	only use functions whose calls follow the standard scope rules

	don't use eval (or related things)

then the S language will guarantee that calls to your function will
follow the standard scope rules. You don't need to do anything special.

If on the other hand, you use eval, or one of the functions you call
does not follow the standard scope rules, then all bets are off. If it
is your intent to write a function that follows standard scope rules,
or if you plan to deviate from those rules in some particular way (as
the modeling functions do) then it is now your responsibility as the
programmer, instead of the language's responsibility, to make sure
things work right. This makes writing the function correctly much
harder. Therefore, if you are writing a function that follows standard
scope rules and find yourself using eval because it seems like a quick
fix, you should probably back off and see if you can avoid using
eval. In very rare cases you can't, but in almost all cases you can
and should.

There was a nice example of this issue in this list about a week
ago. Someone had written a function that called trellis.device.  The
function didn't work right even though the trellis.device call worked
right at top level. It was suggested that the poster had
miss-interpreted S's scope rules. In fact, if trellis.device were a
function following standard scope rules (as the poster had every right
to expect since the documentation does not suggest that it is not)
then the poster's function would have worked correctly. It turns out
that the author of trellis.device used eval in a way that caused a
departure from standard scope rules for calls to the function.  This
use of eval seems convenient on the surface but was not
necessary---direct manipulation of a captured ... argument list
followed by do.call, which is safe, would have done the job and made
it impossible for this kind of error to occur in the first place (but
see the **** note at the bottom). The bottom line again: If you are
using eval and you are not trying to do something that departs form
standard scope rules, you probably shouldn't.

All that said, there are cases where, given the limited expressive
power of S's standard scope rules, you really do have to use eval to
achieve certain result. The modeling functions are such a case.  The
convention adopted for the modeling functions is to use dynamic
scoping for determining values for variables in formulas if explicit
data are not provided. This is a debatable choice. Dynamic scope has
its uses, but since inadvertent variable capture is so easy to fall
into and so hard to prevent, it is probably not such a good idea.
An example: 

> x<-1:10
> y<-x+rnorm(10)
> f<-function(m) lm(m)
> g<-function(x) lm(x)

The functions f and g look equivalent, but they aren't:

> f(y~x)
Call:
lm(formula = m)
...
> g(y~x)
Error in g(y ~ x): Length of variable 2 is 3 != length of row names (10)

The local variable x in g, the formula, shadows the global one and
causes lm to fail. Of course if the formula contained a variable m
then f would be in trouble. I have discussed this issue with several
individuals close to the S developers who argued that this behavior is
a feature. I do not think it is the best design choice. But it is the
design choice in use, and one can live with it if this is understood.
But since eval is needed to accomplish this behavior it is up to the
programmer to insure that this design is adhered to, rather than being
guaranteed by language design features.

A better design choice, in my view, would have been to insure that
formulas are always interpreted in the context in which they are
created, so that lm would automatically see the global x and y as the
values relevant to the formula even though it is called inside f or g
in these examples. Put another way, instead of thinking of ~ as merely
a quoting operation like it is now, it should be viewed as a
closure-creating operation that follows lexical scope rules. The
resulting formula should contain not only the expression but also (at
least conceptually) the current values of the variables referenced in
the expression, if there are any available. This approach would
produce results closer to what most users would tend to expect until
they read the fine print (the example above would work properly). It
would also eliminate the need to use eval in this context, thus
eliminating a serious source of possible programming errors.

But of course this approach comes at a price: it is essentially
introducing lexical scope, with all the old issues of separate data
storage. The design choice made in S was clearly the easier one to
implement. On the other hand, a language like R that already has
lexical scope could implement this approach quite easily, but at the
cost of losing compatibility with S.

(The idea described by Rod Ball of adjusting the frame to use for
variable lookup, if I understand it correctly, is intended to achieve
similar results. But it has two drawbacks. One, it would be very
expensive in runtime overhead, but more importantly it would only work
within the dynamic extent of the call. If a fit is created in a nested
call, stored, and then reused later in an unrelated call, things will
no longer work right. Proper lexical scope avoids this.)

(**** Actually things are not quite so simple with do.call. What the
trellis.device function needed is the ability to construct an argument
list at run time, obtain a function at run time, and then call the
function with the argument list. This is almost what do.call does,
except it expects its function argument to be a string naming the
function, not an expression whose value is a function. This seems like
a strange design, but there is probably a good reason for it. It is possible
to use the current do.call by using something like

	tmpfun<- ... expression making function ...
   	do.call("tmpfun", args)

but this is awkward. It would be cleaner to define a version of
do.call, say do.call.expr, that allows its function to be specified as
an expression. This does of course require the use of eval again, as
does the definition of do.call, but it can be done carefully once and
for all to produce a function that obeys standard scope rules, as
do.call does, and then this function can be used safely whenever this
type of operation needs to be performed. If and when there is a real
need to use eval this is a good strategy: abstract out the core that
needs eval into function, and make the function use standard scoping
or carefully document how and why it doesn't. Then you can always use
this abstraction when you need it instead of manually inserting the
corresponding code with the associated risks of errors.)

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
206 Church Street                            email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Jun 26 19:01:30 1998
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 26 Jun 1998 13:01:30 -0500 (CDT)
Subject: scoping
In-Reply-To: <98Jun26.120612edt.13454@mailgate.bank-banque-canada.ca> from "Paul Gilbert" at Jun 26, 98 11:41:12 am
Message-ID: <9806261801.AA29578@nokomis.stat.umn.edu>

Paul Gilbert wrote:
> 
> 
> n <- eval(parse(prompt="Enter the number of singular values to use: "))
> 

As Martyn suggested, if you just want a number it is better to use
someting that just deals with numbers. If you do want the user to be
able to respond with an arbitrary S expression, then this is one case
where eval does make sense, but it should be used with caution. The
default behavior of eval is to use evaluate in the calling environment,

> p<-function(x) eval(parse(prompt="Enter an expression: "))
> p(3)
Enter an expression: x
[1] 3

This is probably not what you want. In S the official way to get eval
to use the global environment/frame is eval(expr,F) (this is what the
try.S example in the help page does). In R you seem to need
eval(expr,0). I *think* this works in S too, but I'm always a bit
confused about frames 0 and 1. There may be another approach that
works cleanly in both.

If you have need for this kind of thing in several places it would be
a good idea to abstact it out as a utility function,
prompt.for.expression say, carefully get that function right, and then
only access this facility through that function.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
206 Church Street                            email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 26 19:12:32 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 26 Jun 1998 14:12:32 -0400
Subject: all.equal
References: <199806261638.SAA00754@sophie.ethz.ch>
Message-ID: <98Jun26.143732edt.13446@mailgate.bank-banque-canada.ca>

>I don't have time to look at your new version,
>however, I *did* look at the last one and tried to replace

>However, your version wasn't good enough to "work" for  'make tests'
>[[ even after fixing the default tolerance which should be
>   changed from
>                .Machine$double.eps
>to              sqrt(.Machine$double.eps)

Martin

The version I just posted is the same as the last one (called cut three). I'm
not sure what 'make tests' is suppose to do. I just ran it and it gave me a
bunch of error messages. It also looks like it may have changed some things to
mess up my working copy of R, but I'm not sure.

If you can be more specific about how this all.equal is not good enough for
'make tests' then I will try to fix it. I'm not sure what the general wisdom is
and I realize that .Machine$double.eps is a fairly tight comparison, but I
routinely test things to tighter tolerances than sqrt(.Machine$double.eps). The
change in C libraries between Splus 3.1 and 3.2 made large cumulative
differences in some of my simulations and I never would have found the problem
if I had only been checking calculations to sqrt(.Machine$double.eps).

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun 30 09:45:38 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 30 Jun 1998 10:45:38 +0200
Subject: gl() in S -- puzzle
Message-ID: <199806300845.KAA04635@sophie.ethz.ch>

In order to run some  R examples in  S & Splus,
I want the gl() function in S.

In R, it is

gl <- function (n, k, length = n * k, labels = 1:n, ordered = FALSE) 
	factor(rep(rep(1:n, rep(k, n)), length = length), labels = labels, 
	      ordered = ordered)

Since S's  factor() has no "ordered= F" argument,
in S we need to call ordered() instead of factor() in the case of
ordered=T.

I came up with the following definition

gl <- function (n, k, length = n * k, labels = 1:n, ordered = FALSE) 
  (if(ordered) get("ordered",mode="function") else factor)(
                               rep(rep(1:n, rep(k, n)), length = length),
                               labels = labels)

which works both in R and S,
as long as you keep ordered = FALSE), e.g.

	gl(3,2,12)
	gl(2,8,32, label=c("Ctnrl","Treat"))

Then, in R (with the above definition of gl() [and with the builtin one]):

    R> gl(3,4,24, ordered=T)
     [1] 1 1 1 1 2 2 2 2 3 3 3 3 1 1 1 1 2 2 2 2 3 3 3 3
    Levels:  1 < 2 < 3 

However, in S

	S> gl(3,4,24, ordered=T)

	Error in gl: object of mode ( and length 2 used as string value: (if(ordered) get("ordered", mode = "function") else factor)
		. . .
	Dumped
	S> 

If you do

	S> rr <- (if(T) get("ordered", mode = "function") else factor)
	S> rr
is the  ordered(.) function as it should and there doesn't seem to be a
problem if I do the things in  top-level [i.e. on the command line].

---
what's the problem in S ?

Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 30 10:13:13 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Jun 1998 11:13:13 +0200
Subject: gl() in S -- puzzle
In-Reply-To: Martin Maechler's message of Tue, 30 Jun 1998 10:45:38 +0200
References: <199806300845.KAA04635@sophie.ethz.ch>
Message-ID: <x2u3536ymu.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:


> gl <- function (n, k, length = n * k, labels = 1:n, ordered = FALSE) 
>   (if(ordered) get("ordered",mode="function") else factor)(
>                                rep(rep(1:n, rep(k, n)), length = length),
>                                labels = labels)
...
> 	S> gl(3,4,24, ordered=T)
> 
> 	Error in gl: object of mode ( and length 2 used as string value: (if(ordered) get("ordered", mode = "function") else factor)
> 		. . .
...
> ---
> what's the problem in S ?

A bug, probably. It might help to eval() the if(ordered)... bit
explicitly or split the expression i two steps {FUN<-if(ordered); FUN(...)}

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 30 11:28:09 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Jun 1998 12:28:09 +0200
Subject: gl() in S -- puzzle
In-Reply-To: Martin Maechler's message of Tue, 30 Jun 1998 10:45:38 +0200
References: <199806300845.KAA04635@sophie.ethz.ch>
Message-ID: <x27m1zyyiu.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> gl <- function (n, k, length = n * k, labels = 1:n, ordered = FALSE) 
>   (if(ordered) get("ordered",mode="function") else factor)(
>                                rep(rep(1:n, rep(k, n)), length = length),
>                                labels = labels)

Tried following my own advice and it didn't work... However, after a
bit of fiddling, I realised that this boils down a bug that I've
stumbled across before:

> test<-function(sin)get("sin",mode="function") 
> test()
.Argument(, sin = )
> test(2)
[1] 2

I.e. get() is ignoring its mode= argument when used inside a function!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun 30 16:56:40 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 30 Jun 1998 17:56:40 +0200
Subject: stable / R-announce
Message-ID: <199806301556.RAA06217@sophie.ethz.ch>

Dear Philippe,
thank you for the  ``stable''  package.

I think we should include the four  probability/RNG function into
base R.
	[Maybe also the "stableglm"  part (haven't yet looked at it),
	 especially if it could be made to work with  glm() and family().]
Would this be okay with you?

All of R base follows GNU Copyleft.
But your contribution can also have your own Copyright if desired.

--------------------------

You posted to R-announce;
	R-announce autmatically ``forks'' to R-help,
	and the R-announce list proper.

For some spammer protection, I have "R-announce" only accepting postings
from its members, i.e. you must be in either 
R-help or R-announce in order to post to R-announce.

Now I see that you belong to R-help (even to R-devel)  *BUT*
not with the same e-mail with which you posted to R-announce.
You posted with the address I use above,
but you are in r-help with
	Philippe Lambert <phlamber@luc.ac.be>

That's why the mailing list software, majordomo, decided that you are *not*
part of ``R-announce'' (= R-help + R-announce proper)  and
bounced your mail...

To change this, you must re-subscribe
(unsubscribe old e-mail and subscribe new e-mail  (in 1 message if you want..)).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun  2 14:53:51 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 2 Jun 1998 15:53:51 +0200
Subject: "fgrep" for help \\  IBM PowerPC AIX
In-Reply-To: <Pine.LNX.3.96.980529093038.23645E-100000@buffy> (message from
 Thomas Lumley on Fri, 29 May 1998 09:33:53 -0700 (PDT))
Message-ID: <199806021353.PAA08413@sophie.ethz.ch>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> ......
    TL> Currently "%*%" doesn't have any help but help
    TL> requests get routed to Arith, because "%*%" as a regular expression
    TL> matches "%%". I will add this to the special cases in help(), but
    TL> should we use fgrep instead of grep in cmd/help?

Yes --- if  "fgrep" is available as widely as "grep".

	[can you check on your machine(s), dear R-develers?
	 any that doesn't have fgrep ??
	 Test:
		echo 'abcdef*' | fgrep 'c*d'
	 should NOT return anything]

I think it should be..  
just checked: it *is* available even on AIX 4.2;
a (PowerPC) system I got an account about ten days ago, because it's
owner and part-time maintainer wanted to run R.

  -  R 0.61.3   configure finds gcc and installs without any warning,
     BUT
	R>  max(1)
	[1]NaNQ
	R> min(1:10)
	[1]NaNQ
	R> range(pi)
	[1]NaNQNaNQ

     which breaks almost everything.

  - R 0.62 configure finds  "xlc" a compiler which ``is said'' to be good,
    at least one of its warnings lead to me to look at src/appl/eigen.c
    and remove some extraneous definitions there....

    However, I haven't been able to compile there (link problems), and
    don't really have documentation about AIX, xlc, etc.

Has anyone have better knowledge and/or experiences with AIX?
Of course, I can give more details on how compilation fails.

I'm particularly interested in compilation success of 0.62 (development
version). 

Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun  2 15:41:42 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 2 Jun 1998 10:41:42 -0400
Subject: "as.numeric" / "As.numeric" [was "R-beta: bugs and problems"]
References: <199806021002.MAA00877@sophie.ethz.ch>
Message-ID: <98Jun2.105400edt.13497@mailgate.bank-banque-canada.ca>

>User functions written for both R and S should get the same
>thing for as.numeric(.).

I would like the same result here. As for the "As." functions, I would not be
inclined to encourage people too much to program things at this level in a way
that would not also work in S. The result may be that they decide they must make
a choice between the languages, and I don't think that would be a good thing.
One way around that is to include the "As." functions in a set of compatability
functions which can be used as programming tools in both S and R. (I have a
small set of these, but there are lots of things that could be added.)

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Wed Jun  3 18:39:43 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Wed, 3 Jun 1998 12:39:43 -0500 (CDT)
Subject: lty
Message-ID: <Pine.OSF.3.95.980603123254.32361A-100000@io.uwinnipeg.ca>

I find, viewing the output with ghostview, that lty="2","3", or "4" gives
the same dashed line. So basically you have choice of solid ("1") or
dashed ("2","3","4").

If this is not implemented yet, maybe the docs should reflect it?

Hmm now I tried plotting with both lty="2" and lty="3" for two separate
functions on one plot, and the lty="2" one is invisible now.  This looks
like a bug in the snapshot.

Thanks for any help.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Wed Jun  3 18:46:49 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Wed, 3 Jun 1998 12:46:49 -0500 (CDT)
Subject: lty
Message-ID: <Pine.OSF.3.95.980603124425.726A-100000@io.uwinnipeg.ca>

Sorry, my previous message said using lty="2" made line disappear.  Wrong.

What happens is that
"2" is dots
"3" is dashes

BUT docs say
"2" is dashes
"3" is dots

So there is an error in the docs.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  3 20:19:00 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Jun 1998 21:19:00 +0200
Subject: lty
In-Reply-To: Bill Simpson's message of Wed, 3 Jun 1998 12:46:49 -0500 (CDT)
References: <Pine.OSF.3.95.980603124425.726A-100000@io.uwinnipeg.ca>
Message-ID: <x2g1hms38b.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsimpson@uwinnipeg.ca> writes:

> 
> Sorry, my previous message said using lty="2" made line disappear.  Wrong.
> 
> What happens is that
> "2" is dots
> "3" is dashes
> 
> BUT docs say
> "2" is dashes
> "3" is dots
> 
> So there is an error in the docs.

Nope:
	lty=1 solid
	lty=2 dashed
	lty=3 dotted
	lty=4 dotdashed
	lty="1" pattern: 1 "dot" on, 1 "dot" off
	lty="2" pattern: 2 "dots" on, 2 "dots" off
	lty="3" pattern: 3 "dots" on, 3 "dots" off
	lty="32" pattern: 3 "dots" on, 2 "dots" off
	lty="124" pattern: 1 on, 2 off, 4 on, 1 off, 2 on, 4 off, 
	...and so forth...

You can see this clearly if you start with par(lwd=5). As far as I can
see without actually digging into the source,

2 == "4"
3 == "13"
4 == "3134"

So the docs are OK, but perhaps we need to distinguish more clearly
between integer and character lty's.

The dot-dash pattern on X11 looks wrong, though. I think it should
have been "1343", i.e. same pattern, reverse colors.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill Simpson <wsimpson@uwinnipeg.ca>  Wed Jun  3 20:32:37 1998
From: Bill Simpson <wsimpson@uwinnipeg.ca> (Bill Simpson)
Date: Wed, 3 Jun 1998 14:32:37 -0500 (CDT)
Subject: lty
In-Reply-To: <x2g1hms38b.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.3.95.980603142647.5513A-100000@io.uwinnipeg.ca>

> > Sorry, my previous message said using lty="2" made line disappear.  Wrong.
> > 
> > What happens is that
> > "2" is dots
> > "3" is dashes
> > 
> > BUT docs say
> > "2" is dashes
> > "3" is dots
> > 
> > So there is an error in the docs.
> 
> Nope:
> 	lty=1 solid
> 	lty=2 dashed
> 	lty=3 dotted
> 	lty=4 dotdashed
> 	lty="1" pattern: 1 "dot" on, 1 "dot" off
> 	lty="2" pattern: 2 "dots" on, 2 "dots" off
> 	lty="3" pattern: 3 "dots" on, 3 "dots" off
> 	lty="32" pattern: 3 "dots" on, 2 "dots" off
> 	lty="124" pattern: 1 on, 2 off, 4 on, 1 off, 2 on, 4 off, 
> 	...and so forth...

Peter, to me (and this is English language) "dot" is shorter than "dash"!
.-.--
dot dash dot dash dash.

So "dot" SHOULD be label for lty="2" pattern: 2 "dots" on, 2 "dots" off
And "dash" SHOULD be label for lty="3" pattern: 3 "dots" on, 3 "dots" off.
Since dot is shorter than dash.

> 
> You can see this clearly if you start with par(lwd=5). As far as I can
> see without actually digging into the source,
This is answer to previous posting on lwd.  So it is there, just not
documented. Thanks.

> The dot-dash pattern on X11 looks wrong, though. I think it should
> have been "1343", i.e. same pattern, reverse colors.
My comments above were based on viewing saved plot with ghostview and
actually printing it with ghostscript.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  3 20:58:32 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Jun 1998 21:58:32 +0200
Subject: lty
In-Reply-To: Bill Simpson's message of Wed, 3 Jun 1998 14:32:37 -0500 (CDT)
References: <Pine.OSF.3.95.980603142647.5513A-100000@io.uwinnipeg.ca>
Message-ID: <x2btsas1ef.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsimpson@uwinnipeg.ca> writes:

> > 	lty=1 solid
> > 	lty=2 dashed
> > 	lty=3 dotted
> > 	lty=4 dotdashed
> > 	lty="1" pattern: 1 "dot" on, 1 "dot" off
> > 	lty="2" pattern: 2 "dots" on, 2 "dots" off
> > 	lty="3" pattern: 3 "dots" on, 3 "dots" off
> > 	lty="32" pattern: 3 "dots" on, 2 "dots" off
> > 	lty="124" pattern: 1 on, 2 off, 4 on, 1 off, 2 on, 4 off, 
> > 	...and so forth...
> 
> Peter, to me (and this is English language) "dot" is shorter than "dash"!
> .-.--
> dot dash dot dash dash.

Sure

> So "dot" SHOULD be label for lty="2" pattern: 2 "dots" on, 2 "dots" off
> And "dash" SHOULD be label for lty="3" pattern: 3 "dots" on, 3 "dots" off.
> Since dot is shorter than dash.
> 

Look again: 2 is a number, selecting one of 4 preset patterns, "2" is
a character, specifying the pattern directly.

Try
 plot(1:10,type='l',lty=2,lwd=4)
 plot(1:10,type='l',lty=3,lwd=4)
 plot(1:10,type='l',lty='2',lwd=4)
 plot(1:10,type='l',lty='3',lwd=4)

> This is answer to previous posting on lwd.  So it is there, just not
> documented. Thanks.

In the snapshots, it is there... Don't know if it works on postscript
yet, though.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Wed Jun  3 21:18:10 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Wed, 3 Jun 1998 15:18:10 -0500 (CDT)
Subject: lty
In-Reply-To: <x2g1hms38b.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.3.95.980603151645.6058A-100000@io.uwinnipeg.ca>

OK now I get it.  Sorry for cluttering the list with nonsense.

BTW lwd works in R Graphics window but not when printed. (in my version of
snapshot)

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun  4 07:40:41 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 4 Jun 1998 08:40:41 +0200
Subject: lty
In-Reply-To: <Pine.OSF.3.95.980603123254.32361A-100000@io.uwinnipeg.ca>
 (message from Bill Simpson on Wed, 3 Jun 1998 12:39:43 -0500 (CDT))
Message-ID: <199806040640.IAA12039@sophie.ethz.ch>

Thank you, Bill, for your reports ("lwd" and "lty").
In the future, would you please indicate exactly which version of R you are
using?

"lwd":  in 0.61.x, it only works for x11/X11, not for postscript.
	in 0.62.x  it should work in all cases, also in combination with lty.

 lty :  Could n't your problem of seeing just one kind of dot-dashes
	be a problem of screen / device resolution alone?

Thanks again for these bug reports; at the moment we are interested
increasingly more and more for report about 0.62. But even there
-- since we are now in a "fixing" mode -- you have to indicate the version
  (date) that you are using.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Jun  4 14:03:58 1998
From: gb@stat.umu.se (Goran Brostrom)
Date: Thu, 4 Jun 1998 15:03:58 +0200 (MET DST)
Subject: Readline and 0.62
In-Reply-To: <199806031414.KAA17990@desire.stat.cmu.edu>
Message-ID: <Pine.LNX.3.95.980604144040.23957B-100000@capa.stat.umu.se>

Developers,

today I installed R-snapshot (June 2) on my Redhat Sparc/Linux 4.2,
with no problems, but obviously this version of R was compiled 
without 'readline' (I also have R-0.61.3, which works as expected 
with readline). Output from './configure', related to readline:
...
checking for rl_callback_read_char in -lreadline... (cached) no
...
checking for readline/history.h... (cached) yes
...
I have 'readline-2.0-10' according to 'rpm ...'. Does 0.62 need a
more recent version of readline than 0.61? Or is the problem
somewhere else?

Goran
---------------------------------------------------------
Goran Brostrom
Department of Statistics              tel: +46 90 786-5223
Umea University                       fax: +46 90 786-6614
S-90187 Umea, Sweden               e-mail: gb@stat.umu.se
----------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Thu Jun  4 14:39:03 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Thu, 4 Jun 1998 08:39:03 -0500 (CDT)
Subject: lwd
In-Reply-To: <199806040640.IAA12039@sophie.ethz.ch>
Message-ID: <Pine.OSF.3.95.980604082537.24785B-100000@io.uwinnipeg.ca>

I am using
[1] "Unstable-snapshot"

$status.rev
[1] "0"

$major
[1] "0"

$minor
[1] "62.0"

$year
[1] "1998"

$month
[1] "April"

$day
[1] "12"

If I do:
plot(x,y, type="l")
par(lwd=4)
lines(tt,pts)

The 2nd curve does appear to be heavy (correct line width) in X11 window,
however saved plot (dev.print) uses just single pixel line width (as seen
when viewed in ghostview or when printed out).

So if lwd is supposed to work in version .62.0, then there is a bug.
Or else I need a newer snapshot.

As for lty, this was just a confusion of lty="2" and lty=2, etc, as
Peter said.  Yes as you say Martin the screen resolution does enter into
it, but I was basing my comments on printouts.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun  4 15:02:36 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jun 1998 16:02:36 +0200
Subject: Readline and 0.62
In-Reply-To: Goran Brostrom's message of Thu, 4 Jun 1998 15:03:58 +0200 (MET DST)
References: <Pine.LNX.3.95.980604144040.23957B-100000@capa.stat.umu.se>
Message-ID: <x290ndw9hf.fsf@blueberry.kubism.ku.dk>

Goran Brostrom <gb@stat.umu.se> writes:

> 
> Developers,
> 
> today I installed R-snapshot (June 2) on my Redhat Sparc/Linux 4.2,
> with no problems, but obviously this version of R was compiled 
> without 'readline' (I also have R-0.61.3, which works as expected 
> with readline). Output from './configure', related to readline:
> ...
> checking for rl_callback_read_char in -lreadline... (cached) no
> ...
> checking for readline/history.h... (cached) yes
> ...
> I have 'readline-2.0-10' according to 'rpm ...'. Does 0.62 need a
> more recent version of readline than 0.61? Or is the problem
> somewhere else?

Yes, No.

You need readline 2.1 for 0.62. This is because of some new event
handling stuff necessary for the multiple graphics devices. This
requires the "alternate readline interface" (keypress-based) which
isn't there in 2.0. There's an rpm of the newer readline in the
contrib directory at redhat (or mirrors).

(Note to self: remember to put this into the release notes...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.Princeton.EDU  Thu Jun  4 15:25:11 1998
From: ben@eno.Princeton.EDU (Ben Bolker)
Date: Thu, 4 Jun 1998 10:25:11 -0400 (EDT)
Subject: lwd
In-Reply-To: <Pine.OSF.3.95.980604082537.24785B-100000@io.uwinnipeg.ca>
Message-ID: <Pine.SUN.3.95.980604102301.2730A-100000@paca>

On Thu, 4 Jun 1998, Bill Simpson wrote:

  [ ... snipping lots of stuff ... ]
> 
> As for lty, this was just a confusion of lty="2" and lty=2, etc, as
> Peter said.  Yes as you say Martin the screen resolution does enter into
> it, but I was basing my comments on printouts.
> 

  This certainly seems as though it has great potential for confusion!
I don't know if there is any feasible change to the plot command itself to
minimize this confusion, but may I ask (maybe someone has already done it)
that a few lines be added to the documentation ... ?

Benjamin Bolker          Dep't of Ecology and Evolutionary Biology,
ben@eno.princeton.edu    Princeton University
tel: (609) 258-6886,     fax: (609) 258-1334

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimrc@mathfs.math.montana.edu  Thu Jun  4 18:28:41 1998
From: jimrc@mathfs.math.montana.edu (Jim Robison-Cox)
Date: Thu, 4 Jun 1998 11:28:41 -0600 (MDT)
Subject: Snapshot won't configure on SunOS 5.3
Message-ID: <Pine.ULT.3.91.980604112642.8392I@mathfs.math.montana.edu>

R-crew,

   I'm trying to install the R-Snapshot which I downloaded a few hours
ago and I'm having a problem I can't trace.  My system is

 Sun SPARC, SunOS 5.3 : 1996

>From running ./configure:***************************************
loading cache ./config.cache
checking for a BSD compatible install... /opt/local/R/R-snapshot/etc/install-sh -c
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for bison... bison -y
checking for ar... ar
checking for ratfor... no
checking for perl... /usr/local/bin/perl
checking whether perl is perl 5... yes
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for ranlib... (cached) ranlib
checking for g77... g77
checking for underscore after Fortran symbols... configure: error: Nothing worked - cannot use FORTRAN
*******End of ./configure output *********************************************

And make will not work.

Has anyone else had trouble with a Sun install?


Previous versions have configured and complied beautifully, as
this partial screen summary for ./configure on R-0.61 shows:

# checking for ranlib... (cached) ranlib
# checking for ar... (cached) ar
# checking for lpr... (cached) lpr
# checking how to run the C preprocessor... (cached) gcc -E

I also updated R-0.61 to 0.61.2 and 0.61.3 without any problem. It seems
this line in the older configure file returned true:
if test -z "$FC"
  Since it skipped from ar to lpr without comment.


The new configure seems quite different.  Any pointers?

TIA,
  Jim

Jim Robison-Cox                 ____________            
Department of Math Sciences    |            |           phone: (406)994-5340
2-214 Wilson Hall               \   BZN, MT |           FAX:   (406)994-1789
Montana State University         |  *_______|
Bozeman, MT 59717                 \_|         e-mail: jimrc@math.montana.edu 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Jun  4 18:42:45 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 4 Jun 1998 10:42:45 -0700 (PDT)
Subject: Snapshot won't configure on SunOS 5.3
In-Reply-To: <Pine.ULT.3.91.980604112642.8392I@mathfs.math.montana.edu>
Message-ID: <Pine.SUN.3.95.980604103652.11242B-100000@chekov>

On Thu, 4 Jun 1998, Jim Robison-Cox wrote:
>    I'm trying to install the R-Snapshot which I downloaded a few hours
> ago and I'm having a problem I can't trace.  My system is
> 
>  Sun SPARC, SunOS 5.3 : 1996
> 

> checking for g77... g77
> checking for underscore after Fortran symbols... configure: error: Nothing worked - cannot use FORTRAN
> *******End of ./configure output *********************************************
> 
> And make will not work.
> 

> 
> The new configure seems quite different.  Any pointers?
> 

It is very different -- we now _require_ a FORTRAN compiler.  It appears
that configure found g77 (which is the first one it looks for) and then
couldn't get it to work properly. You can edit the file config.site to
specify the name of your FORTRAN compiler (presumably you have f77).


Thomas Lumley
UW Biostatistics


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimrc@mathfs.math.montana.edu  Thu Jun  4 18:47:54 1998
From: jimrc@mathfs.math.montana.edu (Jim Robison-Cox)
Date: Thu, 4 Jun 1998 11:47:54 -0600 (MDT)
Subject: Snapshot won't configure on SunOS 5.3
In-Reply-To: <Pine.SUN.3.95.980604103652.11242B-100000@chekov>
Message-ID: <Pine.ULT.3.91.980604114658.8392J-100000@mathfs.math.montana.edu>


Thanks, Thomas,  It's going to town now.

On Thu, 4 Jun 1998, Thomas Lumley wrote:
> It is very different -- we now _require_ a FORTRAN compiler.  It appears
> that configure found g77 (which is the first one it looks for) and then
> couldn't get it to work properly. You can edit the file config.site to
> specify the name of your FORTRAN compiler (presumably you have f77).
> 

Jim Robison-Cox                 ____________            
Department of Math Sciences    |            |           phone: (406)994-5340
2-214 Wilson Hall               \   BZN, MT |           FAX:   (406)994-1789
Montana State University         |  *_______|
Bozeman, MT 59717                 \_|         e-mail: jimrc@math.montana.edu 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun  4 21:01:24 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Jun 1998 22:01:24 +0200
Subject: Snapshot won't configure on SunOS 5.3
In-Reply-To: Jim Robison-Cox's message of Thu, 4 Jun 1998 11:47:54 -0600 (MDT)
References: <Pine.ULT.3.91.980604114658.8392J-100000@mathfs.math.montana.edu>
Message-ID: <x24sy1hr6z.fsf@blueberry.kubism.ku.dk>

Jim Robison-Cox <jimrc@mathfs.math.montana.edu> writes:

> 
> 
> Thanks, Thomas,  It's going to town now.
> 
> On Thu, 4 Jun 1998, Thomas Lumley wrote:
> > It is very different -- we now _require_ a FORTRAN compiler.  It appears
> > that configure found g77 (which is the first one it looks for) and then
> > couldn't get it to work properly. You can edit the file config.site to
> > specify the name of your FORTRAN compiler (presumably you have f77).
> > 

Also, the exact same symptoms arise if you have previously configured
the same sources for another system. Made that blunder myself
yesterday. "make distclean" is recommended first in that case.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimrc@mathfs.math.montana.edu  Fri Jun  5 00:38:27 1998
From: jimrc@mathfs.math.montana.edu (Jim Robison-Cox)
Date: Thu, 4 Jun 1998 17:38:27 -0600 (MDT)
Subject: aov
Message-ID: <Pine.ULT.3.91.980604173048.8392M-100000@mathfs.math.montana.edu>

R developers,

  Last week I asked several questions which I think I can now answer
myself in large part.

>
> Q 1)  Is aov supposed to avoid qr decomposition and matrix inversion?
>       In S it is claimed to be faster than lm() for large datasets.  Is
>       that due to avoidance of qr()? 
>       (My main goal is to get the Error strata working.)

   My use of matrix manipulation to avoid qr decompositon takes more
time than the complied solver build into lm.fit. It seems that the real
reason for doing aov differently would be if the determination of Error
strata and which factors to evaluate in any given error statum requires
a different approach from lm.fit.  I'm not going to worry about speed of
lm.fit anymore, so that avoids most of the other questions I had posed.

  Douglas Bates has suggested:
DB> I think that a general approach via maximum likelihood or REML to
DB> anova models with random effects in them will eventually be superior
DB> to approaches based on sum-of-squares decompositions.

  Perhaps one could make an aov function which fit using lme and then
repackaged the output a bit.  I intend to look into that possibility.

    In pursuit of a sum-of-squares decomp, I have looked at the C code
in  model.c, particularly the  do_termsform definition. I see
these comments (line 821 in June 2 snapshot)
		/* Step 2: Recode the model terms in binary form */
		/* and at the same time, expand the model formula. */

		/* FIXME: this includes specials in the model */
		/* There perhaps needs to be a an extra pass */
		/* through the model to delete any terms which */
		/* contain specials.  Actually, specials should */
		/* only enter additively so this should also be */
		/* checked and abort forced if not. */

		/* FIXME: this is also the point where nesting */
		/* needs to be taken care of. */

To continue on this approach, and follow up on these FIXMEs, I need to
understand some of the internal functions like CAR, CDR, and
combinations thereof.  I found the definition of CAR in
src/include/Defn.h as:

#define CAR(e)          ((e)->u.listsxp.carval)

But where is u.listsxp.carval defined?  For that matter, where is the
Scheme/LISP interpreter?
Is there a roadmap? list of where the different pieces of R reside?


Jim Robison-Cox                 ____________            
Department of Math Sciences    |            |           phone: (406)994-5340
2-214 Wilson Hall               \   BZN, MT |           FAX:   (406)994-1789
Montana State University         |  *_______|
Bozeman, MT 59717                 \_|         e-mail: jimrc@math.montana.edu 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Fri Jun  5 01:21:34 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Fri, 5 Jun 1998 12:21:34 +1200 (NZST)
Subject: aov
Message-ID: <199806050021.MAA03779@stat1.stat.auckland.ac.nz>


> To continue on this approach, and follow up on these FIXMEs, I need to
> understand some of the internal functions like CAR, CDR, and
> combinations thereof.  I found the definition of CAR in
> src/include/Defn.h as:
> 
> #define CAR(e)          ((e)->u.listsxp.carval)
> 
> But where is u.listsxp.carval defined?  For that matter, where is the
> Scheme/LISP interpreter?
> Is there a roadmap? list of where the different pieces of R reside?
> 
> 

  Well there isn't a road map but there probably oughta be.
  Everything (almost) in R is a SEXPREC, and one of the mor common of these
  is the LISTSXP,
  
  it is basically a triple- the car, the cdr and the tag
  
   a list is a connected group of LISTSXP's,
    the car is a pointer to the "value" in that element of the list,
    the cdr is a pointer to the next LISTSXP (in the list)
    the tag is a place to keep things like the name associated with the
    list element.
    
    the first element of a list l is obtained by CAR(l)
    the second element by CADR(l) (CAR(CDR(l)))
    in the lisp world one cdr's down the list;
    
    the name for the first element is TAG(l)
    for the second TAG(CDR(l))
    and so on
    
    SEXPREC's (our basic building block) can be one of 20 different types,
    but they are all similar enough to be contained in one C union.
    First in the union is the info slot (32 bits), this is used for all sorts
    of nasty things
    
    then comes a slot for an SEXPREC that contains the attributes (this is 
    where the S-style attributes are stuck)
    
    then the actual data structures - notice that most of these are triples
    (vectors, primitives and environments are exceptions).
    
    hope this helps....
    robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun  5 07:35:08 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 5 Jun 1998 08:35:08 +0200
Subject: lwd -- for PostScript -- only in very recent snapshots
In-Reply-To: <Pine.OSF.3.95.980604082537.24785B-100000@io.uwinnipeg.ca>
 (message from Bill Simpson on Thu, 4 Jun 1998 08:39:03 -0500 (CDT))
Message-ID: <199806050635.IAA14305@sophie.ethz.ch>

>>>>> "Bill" == Bill Simpson <wsimpson@uwinnipeg.ca> writes:

    Bill> I am using [1] "Unstable-snapshot"

    Bill> $status.rev [1] "0"
    Bill> $major [1] "0"
    Bill> $minor [1] "62.0"
    Bill> $year [1] "1998"
    Bill> $month [1] "April"
    Bill> $day [1] "12"

    Bill> If I do: plot(x,y, type="l") par(lwd=4) lines(tt,pts)

    Bill> The 2nd curve does appear to be heavy (correct line width) in X11
    Bill> window, however saved plot (dev.print) uses just single pixel
    Bill> line width (as seen when viewed in ghostview or when printed
    Bill> out).

    Bill> So if lwd is supposed to work in version .62.0, then there is a
    Bill> bug.  Or else I need a newer snapshot.
			^^^^^^^^^^^^^^^^^^^^^^^
exactly.  "lwd" for PostScript only works for a week or so:

On May 27, Paul Murrell wrote to  R-core

  PM> The Postscript device driver has been modified so that it now takes
  PM> notice of the current line width
  PM> 
  PM> Also, the line texture specification (or line type) is now scaled for
  PM> the current line width for both X11 and PostScript graphics
  PM> 
  PM> the best way to see the difference is to do 
  PM> 
  PM> 	plot(1:10, lty=3, lwd=3, type="l")  # to see X11 version
  PM> 	dev.print() # to get postscript version
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun  5 15:33:11 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 5 Jun 1998 10:33:11 -0400
Subject: R-beta: characters to Fortran
References: <9806050810.AA05095@alpha.luc.ac.be>
Message-ID: <98Jun5.104708edt.13452@mailgate.bank-banque-canada.ca>

>I am having trouble sending character strings to Fortran. Even in a
>simple program, I only receive gibberish.

In my experience that is consistent with S.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Fri Jun  5 17:37:12 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Fri, 5 Jun 1998 11:37:12 -0500 (CDT)
Subject: help on R primitives
Message-ID: <Pine.OSF.3.95.980605113348.26754A-100000@io.uwinnipeg.ca>

Not sure if primitives is the right word, but look at this:

> help(for)
Error: syntax error
> ?for
+ 
[hit ctrl-c to get out at this pt]

Either way I try I can't get help on for. Can the help mechanism be
modified so it is possible to get help on these guys?  Another example:
> help(if)
Error: syntax error

But ?(ifelse) works.

I am using version .62, release from April or so.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun  5 17:47:13 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 5 Jun 1998 18:47:13 +0200
Subject: help on R primitives
In-Reply-To: <Pine.OSF.3.95.980605113348.26754A-100000@io.uwinnipeg.ca>
 (message from Bill Simpson on Fri, 5 Jun 1998 11:37:12 -0500 (CDT))
Message-ID: <199806051647.SAA02459@sophie.ethz.ch>

>>>>> "Bill" == Bill Simpson <wsimpson@uwinnipeg.ca> writes:

    Bill> Not sure if primitives is the right word, but look at this:
    >> help(for)
    Bill> Error: syntax error
    >> ?for
    Bill> + [hit ctrl-c to get out at this pt]

    Bill> Either way I try I can't get help on for. Can the help mechanism
    Bill> be modified so it is possible to get help on these guys?  Another
    Bill> example:
    >> help(if)
    Bill> Error: syntax error

I'm not sure if we can prevent these cases, without a lot of special case
coding ((it is pretty delicate to improve help(.)  [argument deparsing...]))

However, 

	" help on 'help' helps "  in this case :
	  ~~~~~~~~~~~~~~~~~~~~

> help()

Online Documentation

     help(topic, package = c(.packages(),.Autoloaded), lib.loc = .lib.loc)

     ?topic

Arguments:

   topic: a name or character string on which documentation
          is sought (but not a variable containing a charac-
          ter string!).


	..................

	..................

Examples:

     help()
     help(help)              # the same

     help(lapply)
     ?lapply                 # the same

     help("for")             # or ?"for", but the quotes are needed
     ?"+"


Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Fri Jun  5 18:10:37 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Fri, 5 Jun 1998 12:10:37 -0500 (CDT)
Subject: help on R primitives
In-Reply-To: <199806051647.SAA02459@sophie.ethz.ch>
Message-ID: <Pine.OSF.3.95.980605120953.28917A-100000@io.uwinnipeg.ca>

 
> 	" help on 'help' helps "  in this case :
	  ~~~~~~~~~~~~~~~~~~~~
OK Martin, thanks for your help :-)

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Jun  6 14:08:37 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 6 Jun 1998 15:08:37 +0200
Subject: Strange Error on AIX
In-Reply-To: <XFMail.980605140429.jkawczak@fisher.stats.uwo.ca> (message from
 Janusz Kawczak on Fri, 05 Jun 1998 14:04:29 -0400 (EDT))
Message-ID: <199806061308.PAA25110@florence.ethz.ch>

>>>>> "Janusz" == Janusz Kawczak <jkawczak@fisher.stats.uwo.ca> writes:

[You wrote to "owner-r-help@...."  -- that's just me (MM);
 why did you not use the mailing list ? (R-devel or R-help)]

    Janusz> Hello, I am getting this 'strange' message when running the R
    Janusz> program on AIX 4.2.1. I have not had any problems with the
    Janusz> compilation of the program. Does anyone have an idea due to
    Janusz> what is the following error present:

    Janusz> R : Copyright 1998, Robert Gentleman and Ross Ihaka Version
    Janusz> 0.61.3 (May 3, 1998)

    >> plot(rnorm(100),rnorm(100))
    Janusz> Gpretty(NaNQ,NaNQ,5): cell=NaNQ, ndiv= -2 <=0;
    Janusz> (ns,nu)=(-2147483647,2147483647); dx=NaNQ, unit=NaNQ, ismall=0.
    Janusz> Gpretty(NaNQ,NaNQ,5): cell=NaNQ, ndiv= -2 <=0;
    Janusz> (ns,nu)=(-2147483647,2147483647); dx=NaNQ, unit=NaNQ, ismall=0.
    Janusz> Error: Length cannot be negative

    Janusz> In addition to the above, I've tried the latest snapshot
    Janusz> version of R; the same problem occurs.

Janusz, this *IS* a problem that I recently reported to  R-devel.
Ive also access to an AIX 4.2 (older than 4.2.1 ?) with the same problem:

I've tracked the bug to

	> min(1)
	NaNQ
	
(the same for max(.) for any number, and hence for range(.) ..)
The Gpretty(.) message is a direct consequence of this broken arithmetic.

Peter Dalgaard recommended using a debugger and seeing where in the source
code things go haywire..
I haven't had time yet...

Are you also using gcc for compilation?
Could it be a gcc--AIX misconfiguration?

If you can start debugging (e.g. R --debugger gdb )
we'd be glad if you worked with a recent snapshot (0.62), since quite a few
things have changed, notably the IEEE arithmetic (Inf, -Inf and NaN).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun  8 09:52:53 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 8 Jun 1998 10:52:53 +0200
Subject: IBM AIX problems
Message-ID: <199806080852.KAA02502@sophie.ethz.ch>

Heiner Schwarte has helped me with the AIX problem that I 
and Janusz Kawczak recently reported here.

Heiner had found out earlier that there was a problem with the 
'finite' c-library function [Heiner's test code see below] when gcc 
(and older versions of xlc) is used.
He also found that instead, AIX defines a  FINITE(.) macro itself
in fp.h  and that this would work in any case.

Interestingly,  xlc (the "standard IBM AIX compiler")  has no problem 
with both  finite(.) and FINITE(.).

BUT:  I have never been successful compiling R with xlc:
      Compilation of the current snapshot stops with 

       $ xlc -DANSI -D_XOPEN_SOURCE -I/usr/local/vni/.include -I../include \
	    -c system.c
       "system.c", line 150.16: 1506-275 (S) Unexpected text readMask ignored.
       "system.c", line 150.9: 1506-045 (S) Undeclared identifier fd_set.
       "system.c", line 151.9: 1506-275 (S) Unexpected text 'int' ignored.
       "system.c", line 151.13: 1506-045 (S) Undeclared identifier stdinfd.
       "system.c", line 152.9: 1506-275 (S) Unexpected text 'int' ignored.
       "system.c", line 152.13: 1506-045 (S) Undeclared identifier connectionfd.
       "system.c", line 154.18: 1506-045 (S) Undeclared identifier readMask.
       $ xlc -DANSI -D_XOPEN_SOURCE  -I../include -c system.c
       "system.c", line 150.16: 1506-275 (S) Unexpected text readMask ignored.
       "system.c", line 150.9: 1506-045 (S) Undeclared identifier fd_set.
       "system.c", line 151.9: 1506-275 (S) Unexpected text 'int' ignored.
       "system.c", line 151.13: 1506-045 (S) Undeclared identifier stdinfd.
       "system.c", line 152.9: 1506-275 (S) Unexpected text 'int' ignored.
       "system.c", line 152.13: 1506-045 (S) Undeclared identifier connectionfd.
       "system.c", line 154.18: 1506-045 (S) Undeclared identifier readMask.
       $ 

There are several possible solutions to this problem.
One of them might be: 

1.
 >>>>	In all C code of R, use FINITE(.) only 
 >>>>	AND make sure that R is *not* redefining the  FINITE(.) macro
	in the case of AIX (or maybe whenever FINITE(.) is already defined).

or 

2.
 >>>>   In all C code of R, use  finite(.), never FINITE.
 >>>>   For the case of AIX, make finite(.) a macro calling FINITE(.)
	(this was Heiner's solution).

This might be relatively easy.
However, both Heiner and I don't know if the intermixing of
FINITE(.) and finite(.) in the R source is just ``accidental'' or
rather on purpose.
	Anyone knows?
	Are there ANSI/POSIX/...? standards for FINITE(.) ?


Note:  Maybe really configure should figure out if  finite(.) works
	and then take appropriate measures...


----------------------- Here is a Transcript from AIX : ----------------

$ date
Mon Jun  8 10:35:02 MEST 1998
$ uname -a
AIX percol 2 4 000004894600
$ cat finite-tst.c
/* Date: Sun, 07 Jun 1998 19:00:04 +0200
 * From: Heiner Schwarte <h.schwarte@bluewin.ch>
 * To: Martin Maechler <maechler@stat.math.ethz.ch>
 */

#include <stdio.h>
#include <math.h>
#include <fp.h>

main() {
  double x;
  x=1./0.;
  printf("%f\n",x);
  printf("%d\n",finite(x));
  printf("%d\n",FINITE(x));
}

$ gcc -v
Reading specs from /usr/local/lib/gcc-lib/powerpc-ibm-aix4.2.0.0/2.7.2.3/specs
gcc version 2.7.2.3
$ gcc -o finite-tst finite-tst.c
$ xlc -o finite-tst-xlc finite-tst.c
"finite-tst.c", line 22.8: 1506-232 (W) Divisor for modulus or division operator cannot be zero.
$ 
$ finite-tst # gcc
INF
1
0
$ finite-tst-xlc
INF
0
0
----------------------- End of Transcript from AIX : ----------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Jun  8 21:42:49 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Tue, 9 Jun 1998 08:42:49 +1200 (NZST)
Subject: IBM AIX problems
Message-ID: <199806082042.IAA18050@stat1.stat.auckland.ac.nz>

Hmmm.  I think all the code in R should use the FINITE macro rather than
the finite function.  On non IEEE platforms FINITE can be defined to check
for a special NA pattern.

It would be possible to rename the macro to something more obscure if
that would help.  E.g. R_FINITE.

Medium-term this whole area needs some work.  It may be that we will have
to have an R_specific implementation of functions like "finite"  and
"isnan".  This is because there are just too many platforms which seem
to screw them up.

The prize (as usual) goes to Windows, where (0.0 == NaN) is true.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun 14 20:48:51 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 1998 21:48:51 +0200
Subject: R-beta: R-0.62 is released
In-Reply-To: 's message of Sun, 14 Jun 1998 19:55:18 +0100 (BST)
References: <XFMail.980614195518.Ted.Harding@nessie.mcc.ac.uk>
Message-ID: <x2vhq3wyqk.fsf@blueberry.kubism.ku.dk>

(Ted Harding) <Ted.Harding@nessie.mcc.ac.uk> writes:

> 
> On 14-Jun-98 Peter Dalgaard BSA wrote:
> > I've put up R-0.62.0.tgz up for FTP from Auckland some minutes ago.
> > As usual, don't get it from there unless you are desperate, but wait
> > for it to be mirrored at a CRAN site near you within a day or two.
> 
> You didn't expect us to be THAT patient, did you?!
> 

Heh. But it serves you right when you realise the mistake that I made
in it. ("tests" directory gone AWOL, 0.62.1 due out shortly)

And seriously: Auckland is paying through its nose per MB for
Internet, irrespective of direction, so please use CRAN whenever
possible. For the not-quite-so impatient, the Austrian CRAN site will
pick it up some time during the night.

(Of course, ONE impatient user is not a problem, but...)

>    Despite trying every obvious config option, the "R" script had insisted
>    on setting RHOME as the directory it was compiled from: /depot/R-0.62/R-0.62/
> 
>    It took some time to suss out that this needed to be edited to read
>    RHOME=/usr/local/R-0.62/lib/R
> 
>    After this was done, it seems fine. The above is NOT obvious from the INSTALL
>    document.

That might be because it shouldn't happen. For me:

$ more /usr/local/bin/R
#!/bin/sh
# Shell wrapper for R executable.

RHOME=/usr/local/lib/R
export RHOME
...

Even though I compiled out of ~pd/R-official/R-0.62 .  Are you sure
you are picking up the correct R script? 

> 
> 2. The "help" browser seems to be hard-wired to be netscape. This can of course

No comment on this.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 15 08:33:49 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 15 Jun 1998 09:33:49 +0200
Subject: R-beta: Literal "&" in help index
In-Reply-To: <XFMail.980615011606.Ted.Harding@nessie.mcc.ac.uk>
Message-ID: <199806150733.JAA03032@sophie.ethz.ch>

Dear Ted,
thank you for your quick and valuable feedback!
However, as Peter Dalgaard has already pointed out,
	
	PLEASE STOP posting to  R-announce.

	R-announce is ONLY for *IMPORTANT* announcements
	of software releases, and the like.

Please use  R-help for generally relevant questions/answers
and use  R-devel for long, technically oriented bug reports, fixes, etc.

Martin Maechler
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Tue Jun 16 00:20:23 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Tue, 16 Jun 1998 11:20:23 +1200 (NZST)
Subject: Windows
Message-ID: <199806152320.LAA20600@stat1.stat.auckland.ac.nz>

 I've just put up a new Windows version; it's about 1 week behind 0.62
 (the graphics still need some work but it appears to be useable).
 Most of the menu interface has changed. I would appreciate it if some of
 you could have a look at it before I make an announcement.
 
 robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 16 17:23:04 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 16 Jun 1998 12:23:04 -0400
Subject: 62.1 make problems
Message-ID: <98Jun16.124344edt.13444@mailgate.bank-banque-canada.ca>

I'm just trying to install 62.1 under Solaris. Making the program reports no
errors, but when I try to run R I get

ld.so.1: /home/res8/gilp/R-versions/R-0.62.1/bin/R.binary: fatal: libF77.so.2:
can't open file: errno=2

Is there any standard place where I should be looking to find libF77?

When make moves on to building the documents I get the errors below. (Is this
because configure did not find perl?)

Paul Gilbert

...
DONE (INSTALL)
Creating front-end shell script

You should
        make docs
now, or at least
        make help

Building ALL documentation (help, HTML, LaTeX)
./build-alldocs
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: syntax error at line 15: `('
unexpected
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: syntax error at line 15: `('
unexpected
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: syntax error at line 15: `('
unexpected
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: use: not found
/home/res8/gilp/R-versions/R-0.62.1/etc/build-help: syntax error at line 15: `('
unexpected
*** Error code 2
make: Fatal error: Command failed for target `stamp-docs'
Current working directory /home/res8/gilp/R-versions/R-0.62.1/etc


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jun 16 17:45:39 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jun 1998 11:45:39 -0500
Subject: 62.1 make problems
In-Reply-To: Paul Gilbert's message of Tue, 16 Jun 1998 12:23:04 -0400
References: <98Jun16.124344edt.13444@mailgate.bank-banque-canada.ca>
Message-ID: <6rg1h570ss.fsf@verdi.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I'm just trying to install 62.1 under Solaris. Making the program reports no
> errors, but when I try to run R I get
> 
> ld.so.1: /home/res8/gilp/R-versions/R-0.62.1/bin/R.binary: fatal: libF77.so.2:
> can't open file: errno=2
> 
> Is there any standard place where I should be looking to find libF77?

Sounds like you will have to modify the path searched by the loader
for shared libraries.  Solaris tends to make this difficult because of
the weird locations for compilers and standard pieces of software.
Someone who uses Solaris more should advise you on this.  I think
these libraries are located in /opt/SUNWspro/lib but I haven't
bothered to figure out the logic of the places that Sun locates these.

> When make moves on to building the documents I get the errors below. (Is this
> because configure did not find perl?)

These are definitely errors from perl scripts.  What is the first line
of the script /home/res8/gilp/R-versions/R-0.62.1/etc/build-help?  If
it doesn't point to a perl interpreter then these scripts are not
going to work at all.  You will have to find a way to get configure to
determine the location of the perl interpreter.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 16 17:55:56 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jun 1998 18:55:56 +0200
Subject: 62.1 make problems
In-Reply-To: Paul Gilbert's message of Tue, 16 Jun 1998 12:23:04 -0400
References: <98Jun16.124344edt.13444@mailgate.bank-banque-canada.ca>
Message-ID: <x2sol5z3oj.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I'm just trying to install 62.1 under Solaris. Making the program reports no
> errors, but when I try to run R I get
> 
> ld.so.1: /home/res8/gilp/R-versions/R-0.62.1/bin/R.binary: fatal: libF77.so.2:
> can't open file: errno=2

Works OK here with f77 == g77. Which Fortran are you on?

> Is there any standard place where I should be looking to find
> libF77?

You could try something like 

find /usr -name \*77\* -print
find /opt -name \*77\* -print

but I'm somewhat confused as to why the linker seems to be picking up
the shared library (mine links static) when it isn't there.

> When make moves on to building the documents I get the errors below. (Is this
> because configure did not find perl?)

That, or wrong version of perl.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Jun 17 16:38:22 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 17 Jun 1998 15:38:22 -0000 ()
Subject: bug in functions of form "mcpar<-"
Message-ID: <XFMail.980617162415.plummer@iarc.fr>

This fairly harmless looking piece of code, which worked in
0.61 (and in S-PLUS) fails  in 0.62.1. 

R> "mcpar<-" <- function(x,mcpar) {attr(x,"mcpar") <- mcpar; x}
R> mcpar(x) <- c(1,100,1)
Error in mcpar<-(*tmp*, value = c(1, 100, 1)) : unused argument to function

The error message gives a hint about how to work around the problem -
just replace the argument "mcpar" with "value". 

R> "mcpar<-" <- function(x,value) {attr(x,"mcpar") <- value; x}
R> mcpar(x) <- c(1,100,1)
R> 

This breaks release 0.3-3 of my "coda" package, but I will fix it.
Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 17 18:37:41 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 1998 19:37:41 +0200
Subject: bug in functions of form "mcpar<-"
In-Reply-To: Martyn Plummer's message of Wed, 17 Jun 1998 15:38:22 -0000 ()
References: <XFMail.980617162415.plummer@iarc.fr>
Message-ID: <x2n2bcnd3u.fsf@blueberry.kubism.ku.dk>

Martyn Plummer <plummer@iarc.fr> writes:

> 
> This fairly harmless looking piece of code, which worked in
> 0.61 (and in S-PLUS) fails  in 0.62.1. 
> 
> R> "mcpar<-" <- function(x,mcpar) {attr(x,"mcpar") <- mcpar; x}
> R> mcpar(x) <- c(1,100,1)
> Error in mcpar<-(*tmp*, value = c(1, 100, 1)) : unused argument to function
> 
> The error message gives a hint about how to work around the problem -
> just replace the argument "mcpar" with "value". 
> 
> R> "mcpar<-" <- function(x,value) {attr(x,"mcpar") <- value; x}
> R> mcpar(x) <- c(1,100,1)
> R> 
> 
> This breaks release 0.3-3 of my "coda" package, but I will fix it.
> Martyn

Hmm. We had some pretty antisocial consequences from *not* using the
value= form with John Chambers' [<-.data.frame code, which assumes
that it is used that way in order to see whether i,j, or both are
absent. 

So Splus is using value= on indexing operations only?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 17 18:48:00 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 17 Jun 1998 13:48:00 -0400
Subject: bug in functions of form "mcpar<-"
References: <XFMail.980617162415.plummer@iarc.fr>
Message-ID: <98Jun17.140814edt.13494@mailgate.bank-banque-canada.ca>

I'm having the same problem without a clue to a work around. (Mind you, the work
around for mcpar wasn't so obvious to me.)

Paul Gilbert
____

R : Copyright 1998, The R Development Core Team
Version 0.62.1  (June 15, 1998)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.

> search()
[1] ".GlobalEnv"   "Autoloads"    "package:base"
> "tframe<-" <-function(x, tf)
{
 attr(x, "tframe") <- tf
 x
}

+ + + + > >
> x <- 1:10
> tframe(x) <- c(1,1000,1)
Error in tframe<-(*tmp*, value = c(1, 1000, 1)) : unused argument to function
>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 17 18:58:16 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 17 Jun 1998 13:58:16 -0400
Subject: bug in functions of form "mcpar<-"
References: <XFMail.980617162415.plummer@iarc.fr>
Message-ID: <98Jun17.141830edt.13505@mailgate.bank-banque-canada.ca>

The light came on. I was thinking the problem with mcpar was that the argument
had the same name as the function, but it is that the argument must be called
"value".  If R is intended to be like this it seems like a pretty serious
incompatibility with S (not to mention that I will have to make a lot of
changes).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimrc@mathfs.math.montana.edu  Wed Jun 17 19:22:04 1998
From: jimrc@mathfs.math.montana.edu (Jim Robison-Cox)
Date: Wed, 17 Jun 1998 12:22:04 -0600 (MDT)
Subject: extra arguments to generic functions & bug in model.frame
Message-ID: <Pine.ULT.3.91.980617115505.3906G-100000@mathfs.math.montana.edu>

R developers,

2 things:  a bug in model.frame and a question about setup of generic 
functions. 
 
   I don't understand the following behavior for generic functions:
Suppose I'm working with the cats data in the MASS library and I want to 
create a formula object to model Hwt on Sex:
  # This works:
> formula(Hwt ~ Sex)
Hwt ~ Sex
  # But the following does not:
> formula(Hwt ~ Sex, data = cats)
Error in formula.formula(Hwt ~ Sex, cats) : unused argument to function
  # because I used an extra argument.

The odd thing to me, is that formula() itself allows the argument:
> formula
function (x, ...) 
UseMethod("formula")

But formula.default does not:

> args(formula.default)
function (x) 

The same thing happens with terms:
> args(terms)
function (x, ...) 
> args(terms.default)
function (x) 

And this caused me a problem when using model.frame() since 
model.frame.default includes the lines:

	    if (!inherits(formula, "terms")) 
	    	    formula <- terms(formula, data = data)

Using 2 arguments in term() is a bug since hitting the line 
will cause an error:

Error in terms.default(formula, data = data) : unused argument to function

  Summary:

1.  There seems to be a bug in model.frame() using terms() with 2 arguments.

2.  What is standard practice for setting up instances of a generic function?
    It seems sensible to me that argument lists should not shrink when 
    going from the generic function to an instance of that function.

Cheers,
Jim

Jim Robison-Cox                 ____________            
Department of Math Sciences    |            |           phone: (406)994-5340
2-214 Wilson Hall               \   BZN, MT |           FAX:   (406)994-1789
Montana State University         |  *_______|
Bozeman, MT 59717                 \_|         e-mail: jimrc@math.montana.edu 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 17 19:41:35 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jun 1998 20:41:35 +0200
Subject: extra arguments to generic functions & bug in model.frame
In-Reply-To: Jim Robison-Cox's message of Wed, 17 Jun 1998 12:22:04 -0600 (MDT)
References: <Pine.ULT.3.91.980617115505.3906G-100000@mathfs.math.montana.edu>
Message-ID: <x2g1h3oops.fsf@blueberry.kubism.ku.dk>

Jim Robison-Cox <jimrc@mathfs.math.montana.edu> writes:

> 1.  There seems to be a bug in model.frame() using terms() with 2 arguments.

Yes.

> 2.  What is standard practice for setting up instances of a generic function?
>     It seems sensible to me that argument lists should not shrink when 
>     going from the generic function to an instance of that function.

No. There's no limit to what special parameters a specific instance of
a function may implement. So the generic one is generally (x,...).
There's no reason not to allow a specific function to check that it is
getting called with parameters that make sense.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jun 17 19:44:52 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 17 Jun 1998 13:44:52 -0500
Subject: extra arguments to generic functions & bug in model.frame
In-Reply-To: Jim Robison-Cox's message of Wed, 17 Jun 1998 12:22:04 -0600 (MDT)
References: <Pine.ULT.3.91.980617115505.3906G-100000@mathfs.math.montana.edu>
Message-ID: <6riulzuau3.fsf@verdi.stat.wisc.edu>

Jim Robison-Cox <jimrc@mathfs.math.montana.edu> writes:

> The odd thing to me, is that formula() itself allows the argument:
> > formula
> function (x, ...) 
> UseMethod("formula")
> 
> But formula.default does not:
> 
> > args(formula.default)
> function (x) 
> 
> The same thing happens with terms:
> > args(terms)
> function (x, ...) 
> > args(terms.default)
> function (x) 

I would say this is a mistake in the definition of terms.default and
formula.default.

It is a good programming practice to ensure that the generic and any
methods have exactly the same calling sequence.  Any such
incompatibilities will have to be eliminated from S-PLUS because S
version 4, the language on which S-PLUS 5.0 will be based, requires
that they have exactly the same calling sequence.  S4 doesn't produce
an error if you define an "old-style" method with a different calling
sequence because it is not recognized as a method.  However, when you
try to use such a method you get an error if the calling sequence does
not match the calling sequence of the generic.

BTW, my version of S-PLUS defines the formula function as
 > formula
 function(object, ...)
 UseMethod("formula")
 > formula.default
 function(object)
We should change the name "x" to "object" to make it easier for people
to port code.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 17 22:06:22 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 17 Jun 1998 17:06:22 -0400
Subject: .First.lib
Message-ID: <98Jun17.172642edt.13467@mailgate.bank-banque-canada.ca>

There seems to be a minor problem in .First.lib: the library argument is all of
$RLIBS. I think it should be just the one directory from which the package is
being taken.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 17 22:13:58 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 17 Jun 1998 17:13:58 -0400
Subject: Warning in par(args)
Message-ID: <98Jun17.173418edt.13462@mailgate.bank-banque-canada.ca>

I'm getting a lot of warning having to do with setting graphic parameters. I
don't recall actually setting any of these, so I would guess they are being set
by something I am calling. Has anyone already figured out where this is
happening?

Paul Gilbert
_____

All dse3 tests ... ok
All dse4 tests ...Warning: skipping test 4 (requires stepwise).
 ok
dse2 graphics tests ...completed
dse3 graphics tests ...completed
dse4 graphics tests ...completed
All Brief User Guide example part 1 tests ...Read 1820 items
Warning in par(args) : parameter "cin" can't be set
Warning in par(args) : parameter "cra" can't be set
Warning in par(args) : parameter "csi" can't be set
Warning in par(args) : parameter "din" can't be set
Warning in par(args) : parameter "cin" can't be set
Warning in par(args) : parameter "cra" can't be set
Warning in par(args) : parameter "csi" can't be set
Warning in par(args) : parameter "din" can't be set
Warning in par(args) : parameter "cin" can't be set
Warning in par(args) : parameter "cra" can't be set
.....

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jun 17 23:24:54 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Wed, 17 Jun 1998 17:24:54 -0500 (CDT)
Subject: Scalar operations dropping matrix attributes
Message-ID: <m0ymQdS-0000Y8C@verdi.stat.wisc.edu>

In 0.62.1 I found that code like t(mat/vec)/vec seems to drop the
matrix attributes of the result.  In this case the matrix is 1x1.
Here is something tracked inside a debug-induced browser.

 Browse[1]> data.class(Var)
 [1] "matrix"
 Browse[1]> Var
	     (Intercept)
 (Intercept)      31.662
 Browse[1]> 
 debug: stdDev <- sqrt(diag(Var))
 Browse[1]> 
 debug: names(stdDev) <- dimnames(Var)[[2]]
 Browse[1]> 
 debug: value <- t(Var/stdDev)/stdDev
 Browse[1]> data.class(stdDev)
 [1] "numeric"
 Browse[1]> 
 debug: attr(value, "stdDev") <- stdDev
 Browse[1]> data.class(value)
 [1] "numeric"

(As you might guess this code takes a variance-covariance matrix and
creates a correlation matrix with the standard deviations as an
attribute.)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 17 23:41:39 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Jun 1998 00:41:39 +0200
Subject: Warning in par(args)
In-Reply-To: Paul Gilbert's message of Wed, 17 Jun 1998 17:13:58 -0400
References: <98Jun17.173418edt.13462@mailgate.bank-banque-canada.ca>
Message-ID: <x2hg1jfy70.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I'm getting a lot of warning having to do with setting graphic parameters. I
> don't recall actually setting any of these, so I would guess they are being set
> by something I am calling. Has anyone already figured out where this is
> happening?
...
> Warning in par(args) : parameter "cin" can't be set
> Warning in par(args) : parameter "cra" can't be set
> Warning in par(args) : parameter "csi" can't be set
> Warning in par(args) : parameter "din" can't be set
...

This comes from constructions of the type

opar<-par()
work.work.work()
par(opar)

This gives complaints from unsettable items. Splus quietly omits them,
so I suppose that we really should do the same.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 18 07:43:12 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 18 Jun 1998 08:43:12 +0200
Subject: Re^2: Warning in par(args)
In-Reply-To: <x2hg1jfy70.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 18 Jun 1998 00:41:39 +0200)
Message-ID: <199806180643.IAA14504@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

      Paul> I'm getting a lot of warning having to do with setting graphic
      Paul> parameters. I don't recall actually setting any of these, so I
      Paul> would guess they are being set by something I am calling. Has
      Paul> anyone already figured out where this is happening?  ...

      >> Warning in par(args) : parameter "cin" can't be set
      >> Warning in par(args) : parameter "cra" can't be set
      >> Warning in par(args) : parameter "csi" can't be set
      >> Warning in par(args) : parameter "din" can't be set
      Paul> ...

    PD> This comes from constructions of the type

    PD> opar<-par()
    PD> work.work.work()
    PD> par(opar)
Yes.

    PD> This gives complaints from unsettable items. Splus quietly omits them,
    PD> so I suppose that we really should do the same.

By the way, I am the one who made this warning reappear (in src/main/par.c).
It was thought for all the other situations where users
have typos in the "tag" (argument) names, e.g.,

	par(lqd = 3)
or really try to set unsettable par()'s.

I think that currently there's no other easy way to detect user
errors like the above.
However, I agree that we should find a better solution.

I myself am using the (``recommended'' ?) way of

 work.work1()
   on.exit(par(op))
   op <- par(xyx = ...,  brd = ...)
 work.work2()
   op <- c(op, par(ghj = ...,  klm = ...))
 work.work3()

which can be slightly more tedious but is ``preciser'' and doesn't lead to
the above error messages.  

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Jun 18 08:44:21 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 18 Jun 1998 09:44:21 +0200
Subject: bug in functions of form "mcpar<-"
References: <XFMail.980617162415.plummer@iarc.fr> <x2n2bcnd3u.fsf@blueberry.kubism.ku.dk>
Message-ID: <3588C555.288AEF94@iarc.fr>

Peter Dalgaard BSA wrote:

> Hmm. We had some pretty antisocial consequences from *not* using the
> value= form with John Chambers' [<-.data.frame code, which assumes
> that it is used that way in order to see whether i,j, or both are
> absent.
> 
> So Splus is using value= on indexing operations only?

Looks like it.  As I said, my other example works in S-PLUS, but try
doing
the same thing with an assignment on an index and you get an error:
(This examples is obviously silly in order to distinguish it from the
default
indexing function).

S> "[<-.foo" <-
function(x,i,value){y<-unclass(x);y[i]<-value+1;class(y)<-"foo";y}
S> x <- 1:10
S> class(x) <- "foo"
S> x[1]<-100
S> x
 [1] 101   2   3   4   5   6   7   8   9  10
attr(, "class"):
[1] "foo"
S> "[<-.foo" <-
function(x,i,bar){y<-unclass(x);y[i]<-bar+1;class(y)<-"foo";y}
S> x[1]<-200
Error in call to [<-.foo(): Argument value= not matched
Dumped

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 18 15:00:50 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 18 Jun 1998 10:00:50 -0400
Subject: bug in functions of form "mcpar<-"
References: <XFMail.980617162415.plummer@iarc.fr> <x2n2bcnd3u.fsf@blueberry.kubism.ku.dk> <3588C555.288AEF94@iarc.fr>
Message-ID: <98Jun18.102135edt.13451@mailgate.bank-banque-canada.ca>

> >So Splus is using value= on indexing operations only?

>Looks like it.  As I said, my other example works in S-PLUS,

Definitely Splus does not in general require "value" as the name of the
argument. I've changed about a dozen instances of this in my code. It turned out
not to be as bad a job as I expected, debugging because of the one change I
missed was the worst part. But everything was working fine in Splus.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 18 15:41:41 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 18 Jun 1998 10:41:41 -0400
Subject: Re^2: Warning in par(args)
References: <199806180643.IAA14504@sophie.ethz.ch>
Message-ID: <98Jun18.110225edt.13458@mailgate.bank-banque-canada.ca>

>I myself am using the (``recommended'' ?) way of
 >work.work1()
 >  on.exit(par(op))
 >  op <- par(xyx = ...,  brd = ...)
 >work.work2()
 >  op <- c(op, par(ghj = ...,  klm = ...))
 >work.work3()
>which can be slightly more tedious but is ``preciser'' and doesn't lead to
>the above error messages.

Martin

Could you please explain the more precise nature of this and why it doesn't give
the error message. I typically use on.exit(par(op)), but perhaps not everywhere.
Is it  on.exit that prevents the message?

Also, my initial reaction was that in the above example the on.exit values would
be set to those in effect during work.work2 rather than those in effect during
work.work1. Perhaps this is not the case, as the following example may
illustrate:

> c(list(a="a"), b=2, a=1)$a
[1] "a"
> c(list(a="a"), b=2, a=1)
$a
[1] "a"
$b
[1] 2
$a
[1] 1

Perhaps this is a case where we may want incompatibility with S in order to
enforce good programming and unintentional errors. I cannot think of a case
where I would want a list with two elements having the same name.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 18 19:44:17 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 18 Jun 1998 13:44:17 -0500 (CDT)
Subject: name "reSt" in debugger
Message-ID: <m0ymjfV-0000Y9C@verdi.stat.wisc.edu>

I keep getting an error message about "return" inside the debugger
when I try to work with an object called reSt.  Here is a transcript
 R> debug( createConLin )
 R> createConLin( distance ~ age, Orthodont, ~ 1 | Subject )
 debugging in: createConLin(distance ~ age, Orthodont, ~1 | Subject)
 debug: Call <- match.call()
 Browse[1]> 
 debug: if (!inherits(fixed, "formula") || length(fixed) != 3) {
	     stop("\nFixed-effects model must be a formula of the form \"resp ~ pred\"")
 }
 Browse[1]> 
 debug: REML <- FALSE
 Browse[1]> 
 debug: reSt <- reStruct(random, REML = REML, data = NULL)
 Browse[1]> 
 debug: groups <- getGroupsFormula(reSt)
 Browse[1]> reSt
 Error: No function to return from, jumping to top level
 Browse[1]> class(reSt)
 [1] "reStruct"
 Browse[1]> print(reSt)
 Error: No function to return from, jumping to top level
 Browse[1]> print(get("reSt"))
 Error: No function to return from, jumping to top level
 Browse[1]> length(reSt)
 [1] 1
 Browse[1]> formula(reSt)
 Error: No function to return from, jumping to top level

Is there something magical about "re" inside the debugger in the same
way that "c" means continue and "n" means next?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 18 22:08:38 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 18 Jun 1998 16:08:38 -0500 (CDT)
Subject: Compiling under Digital Unix
Message-ID: <m0ymlvC-0000Y8C@verdi.stat.wisc.edu>

I tried a compilation of R-0.62.1 on a DEC Alpha that identifies
itself as
 Digital UNIX V4.0A  (Rev. 464); Thu May 14 14:08:00 CDT 1998 
 $ uname -a
 OSF1 atlas.stat.wisc.edu V4.0 464 alpha

I got to the final link step then got an error with 
 gcc -ieee_with_inexact -g -O2 -I../include -c version.c
 f77  -o R.binary arithmetic.o array.o attrib.o bind.o builtin.o character.o coerce.o colors.o complex.o context.o cov.o cum.o debug.o deparse.o deriv.o devices.o dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o format.o fourier.o iosupport.o gram.o list.o logic.o main.o match.o memory.o model.o names.o objects.o optimize.o options.o par.o paste.o plot.o plot3d.o plotmath.o print.o printarray.o printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o sort.o source.o split.o subassign.o subscript.o subset.o summary.o unique.o util.o version.o ../lib/libgraphics.a ../lib/libunix.a ../lib/libappl.a ../lib/libmath.a -lSM -lICE -L/s/X11R6.3-1/lib -lX11 -ldnet_stub -ltermcap -lm 
 ld:
 ../lib/libunix.a(system.o): main: multiply defined
 fort: Severe: Failed while trying to link.

Is anyone familiar enough with Digital Unix to decide why it is
defining main in unix/system.o.  I checked and the symbol is indeed
defined there.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 18 22:52:38 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 18 Jun 1998 16:52:38 -0500 (CDT)
Subject: minor incompatibility in model.matrix
Message-ID: <m0ymmbm-0000c2C@verdi.stat.wisc.edu>

The S and S-PLUS versions of model.matrix will ignore elements of a
contrasts argument that do not correspond to factors.  R does not.  It
produces and error of
 Error: contrasts apply only to factors
even if the contrasts themselves are NULL.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 18 23:09:21 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 1998 00:09:21 +0200
Subject: Compiling under Digital Unix
In-Reply-To: Douglas Bates's message of Thu, 18 Jun 1998 16:08:38 -0500 (CDT)
References: <m0ymlvC-0000Y8C@verdi.stat.wisc.edu>
Message-ID: <x2btrqs6pa.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:


>  f77  -o R.binary arithmetic.o array.o attrib.o bind.o builtin.o character.o coerce.o colors.o complex.o context.o cov.o cum.o debug.o deparse.o deriv.o devices.o dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o format.o fourier.o iosupport.o gram.o list.o logic.o main.o match.o memory.o model.o names.o objects.o optimize.o options.o par.o paste.o plot.o plot3d.o plotmath.o print.o printarray.o printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o sort.o source.o split.o subassign.o subscript.o subset.o summary.o unique.o util.o version.o ../lib/libgraphics.a ../lib/libunix.a ../lib/libappl.a ../lib/libmath.a -lSM -lICE -L/s/X11R6.3-1/lib -lX11 -ldnet_stub -ltermcap -lm 
>  ld:
>  ../lib/libunix.a(system.o): main: multiply defined
>  fort: Severe: Failed while trying to link.
> 
> Is anyone familiar enough with Digital Unix to decide why it is
> defining main in unix/system.o.  I checked and the symbol is indeed
> defined there.

We *always* define main there... However, we do not generally use f77
to link, so my guess would be that the Fortran compiler supplies a
main() of its own. So perhaps you need to link with (g)cc and add in
some Fortran libraries?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 18 23:08:39 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 18 Jun 1998 17:08:39 -0500
Subject: Compiling under Digital Unix
In-Reply-To: Peter Dalgaard BSA's message of 19 Jun 1998 00:09:21 +0200
References: <m0ymlvC-0000Y8C@verdi.stat.wisc.edu> <x2btrqs6pa.fsf@blueberry.kubism.ku.dk>
Message-ID: <6rogvq1hy0.fsf@verdi.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Douglas Bates <bates@stat.wisc.edu> writes:

> > Is anyone familiar enough with Digital Unix to decide why it is
> > defining main in unix/system.o.  I checked and the symbol is indeed
> > defined there.
> 
> We *always* define main there... However, we do not generally use f77
> to link, so my guess would be that the Fortran compiler supplies a
> main() of its own. So perhaps you need to link with (g)cc and add in
> some Fortran libraries?

Of course.  My brain is not functioning it seems.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From C.Farrow@geology.gla.ac.uk  Fri Jun 19 10:28:58 1998
From: C.Farrow@geology.gla.ac.uk (Colin Farrow)
Date: Fri, 19 Jun 1998 10:28:58 +0100
Subject: problem with sub in graphs
Message-ID: <E0ymxTe-00007K-00@alligin>


Use of the graphical parameter 'sub' in a high level graphics function is 
inconsistent, and incompatible with the blue book

> plot(1:10, main="test", sub="demo")
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function

... and why so many warnings?

> hist(1:10, main="test", sub="demo")
Warning: parameter "sub" couldn't be set in high-level plot() function
Warning: parameter "sub" couldn't be set in high-level plot() function

... despite the warnings the sub title is drawn !

I think the problem existed in earlier releases of R but the warnings were not 
printed.
 
Above with R-0.62.1 under Solaris 2.5.1.

--------------------
                     \
Colin Farrow          \
                       \---------------------------------------
                        \                                       \
Department of Geology,   \ E-mail: colin@geology.gla.ac.uk       \
University of Glasgow,    \                                       \
Glasgow, G12 8QQ. Scotland \ Tel: +44 (0)41 339 8855 x5466         \
                            \ Fax: +44 (0)41 330 4817               \
`````````````````````````````````````````````````````````````````````````

                                         
                                               
                                               
 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun 19 14:10:41 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 19 Jun 1998 15:10:41 +0200
Subject: problem with sub in graphs
In-Reply-To: <E0ymxTe-00007K-00@alligin> (message from Colin Farrow on Fri, 19
 Jun 1998 10:28:58 +0100)
Message-ID: <199806191310.PAA18120@sophie.ethz.ch>

>>>>> "Colin" == Colin Farrow <C.Farrow@geology.gla.ac.uk> writes:

   Colin>  with R-0.62.1 under Solaris 2.5.1.

    Colin> Use of the graphical parameter 'sub' in a high level graphics
    Colin> function is inconsistent, and incompatible with the blue book

    >> plot(1:10, main="test", sub="demo")

   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function

   Colin> ... and why so many warnings?

Because sub is part of the "..." which are passed down from  plot.default()
to several lower-level functions,
each of which creates (at least) one warning.

     >> hist(1:10, main="test", sub="demo")

   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function
   Colin> Warning: parameter "sub" couldn't be set in high-level plot() function

The same here:  hist.default() passes "..." to

	title(..) -- where it works
and to	axis(1,..) \
and	axis(2,..) / where it fails and produces the two warnings.

   Colin> ... despite the warnings the sub title is drawn !


   Colin> I think the problem existed in earlier releases of R but the
   Colin> warnings were not printed.

Exactly.  And because the problem existed, I liked the warnings to appear.
The idea is that the R code (not the low level C graphics) should be fixed;
This would mean that R functions must make sure to only path
valid "..." stuff to C.

Usefully, 
we would have a global option to turn off these warnings.
(as the other graphics warnings ! ==>   
 ``par(err = -1)'' would be the thing
)

Martin 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From C.Farrow@geology.gla.ac.uk  Fri Jun 19 15:36:56 1998
From: C.Farrow@geology.gla.ac.uk (Colin Farrow)
Date: Fri, 19 Jun 1998 15:36:56 +0100
Subject: problem with sub in graphs
Message-ID: <E0yn2Hg-0000Cc-00@alligin>


I understand the problem now. 

Clearly a more systematic approach to the use of ... is required.
In the current example with plot and hist the problem arises because parameters 
of the title function are being passed to other low level graphical functions. 
The solution therefore is that only global graphical parameters such as col, are 
passed via ... and function specific parameters like sub need to be specified in 
the function definition. Hence in the current situation plot.default and 
hist.default require a sub= argument which should be passed only to the title 
function. It currently is not, and yes it would be handy to be able to turn off 
the warnings.


Colin
> 
>     Colin> Use of the graphical parameter 'sub' in a high level graphics
>     Colin> function is inconsistent, and incompatible with the blue book
> 
>     >> plot(1:10, main="test", sub="demo")
> 
>    Colin> Warning: parameter "sub" couldn't be set in high-level plot() 
function
> 
> Exactly.  And because the problem existed, I liked the warnings to appear.
> The idea is that the R code (not the low level C graphics) should be fixed;
> This would mean that R functions must make sure to only path
> valid "..." stuff to C.
> 
> Usefully, 
> we would have a global option to turn off these warnings.
> (as the other graphics warnings ! ==>   
>  ``par(err = -1)'' would be the thing
> )

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 19 16:38:38 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 1998 17:38:38 +0200
Subject: problem with sub in graphs
In-Reply-To: Colin Farrow's message of Fri, 19 Jun 1998 15:36:56 +0100
References: <E0yn2Hg-0000Cc-00@alligin>
Message-ID: <x21zslmmf5.fsf@blueberry.kubism.ku.dk>

Colin Farrow <C.Farrow@geology.gla.ac.uk> writes:

> I understand the problem now. 
> 
> Clearly a more systematic approach to the use of ... is required.
> In the current example with plot and hist the problem arises because parameters 
> of the title function are being passed to other low level graphical functions. 
> The solution therefore is that only global graphical parameters such as col, are 
> passed via ... and function specific parameters like sub need to be specified in 
> the function definition. Hence in the current situation plot.default and 
> hist.default require a sub= argument which should be passed only to the title 
> function. It currently is not, and yes it would be handy to be able to turn off 
> the warnings.

Wait a minute.

Am I the only one sensing that something is badly amiss with that
logic? I agree that that is the essence of the problem, but the
solution seems wrong.

The purpose of '...' is that a function does not be need to know
about certain parameters that are being handled by lower level
routines. It can just pass them along. 

This is very practical for modular programming in that you can just
(e.g.) add an option to a low level function without having to register
it with all other 'upstreams' functions (in different packages and
whatnot). Of course, you still have to be careful about the argument
names but that's fairly easy in practice.

Suppose that a function needs to call *two* such routines. Then why
should it suddenly be made responsible for keeping track of which
arguments make sense to which routine? I'd say that the only sensible
paradigm is that routines that get called with '...' should simply
disregard any arguments they do not understand what to do with.

(I'm also not very happy with the news that S-4 will be enforcing
identical calling sequences for generic methods, but that's another
matter)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 19 16:55:19 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 19 Jun 1998 11:55:19 -0400
Subject: DSE status
Message-ID: <98Jun19.121635edt.13446@mailgate.bank-banque-canada.ca>

I have my DSE library working fairly well now with 0.62.1. It required a few
changes because of the changes to R INSTALL and  "xxx<-" functions. I would like
to tar up a new version soon but

1/ for testing I have been using a kludge in .First.lib to select the first
element of section - since I happen to know that is the element I need given the
way I have  $RLIBS set. This argument to .First.lib should indicate only the
section from which the library comes, so
   paste(library, "/", section, sep="")
gives me the location. Is a fix to this forthcoming or should I work on a better
kludge?

2/ I like the fancy help facility but I am not likely to get around to
converting from my html anytime soon. In the meantime I will make a simple .Rd
file with a general description and hopefully I can get the html version to
point to the link to my full html help. However, I am unclear on the mechanism
for getting the link to a package included into R/doc/html/packages.html with R
INSTALL. Can someone explain how I do this?

3/ I get a lot of
       Warning in par(args) : parameter "cin" can't be set
       Warning in par(args) : parameter "cra" can't be set
        ...
  even using on.exit(old.pars). These are annoying but not serious.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jun 19 18:08:41 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Fri, 19 Jun 1998 12:08:41 -0500 (CDT)
Subject: Compilation of R-0.62.1 on DEC Alpha
Message-ID: <m0yn4eX-0000b2C@verdi.stat.wisc.edu>

I have compiled R-0.62.1 on a DEC Alpha system that is running Digital
Unix 4.0.  I had to change some settings in Makeconf from those
generated by configure.  I changed the LDCMD to gcc and the LIBS to
include -lFutil and -lfor.  (I wonder if they realized how close their
name for the Fortran utilities is to the word "futile".)  I also had
to force it to use the GNU version of the install program as the DEC
version is not as fully featured.

I get a compilation but it creates a floating point exception as soon
as you try to run it.
 $ /unsup/R-0.62.1/bin/R

 R : Copyright 1998, The R Development Core Team
 Version 0.62.1  (June 15, 1998)

 R is free software and comes with ABSOLUTELY NO WARRANTY.
 You are welcome to redistribute it under certain conditions.
 Type    "?license" or "?licence" for distribution details.

 R is a collaborative project with many contributors.
 Type    "?contributors" for a list.

 Type    "demo()" for some demos, "help()" for on-line help, or
	 "help.start()" for a HTML browser interface to help.

 Floating exception(coredump)
 $ 

Has anyone been successful building R-0.62.1 (and running it) on this
platform?

Builds on Solaris/SPARC and Solaris/Intel and Debian GNU/Linux Intel
went smoothly.  I may try to see if I can get a person running Debian
GNU/Linux on an Alpha to try a build there.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 19 18:21:11 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 1998 19:21:11 +0200
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: Douglas Bates's message of Fri, 19 Jun 1998 12:08:41 -0500 (CDT)
References: <m0yn4eX-0000b2C@verdi.stat.wisc.edu>
Message-ID: <x2wwadl33s.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> I get a compilation but it creates a floating point exception as soon
> as you try to run it.
..
>  Floating exception(coredump)
>  $ 

There are two things to this: What on earth is causing a floating
exception at that stage (it might actually be normal)? and why is it
dumping core? The latter sounds as if you might need to put in some
option to force IEEE behaviour.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jun 19 18:33:30 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 19 Jun 1998 12:33:30 -0500
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: Peter Dalgaard BSA's message of 19 Jun 1998 19:21:11 +0200
References: <m0yn4eX-0000b2C@verdi.stat.wisc.edu> <x2wwadl33s.fsf@blueberry.kubism.ku.dk>
Message-ID: <6rvhpxe1p1.fsf@verdi.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> There are two things to this: What on earth is causing a floating
> exception at that stage (it might actually be normal)? and why is it
> dumping core? The latter sounds as if you might need to put in some
> option to force IEEE behaviour.

Is there anything done before the first prompt to initialize the IEEE
NaN, Inf and -Inf?

I do have the -ieee_with_no_inexact flag being passed to gcc.  The end
of the configure output shows

 R is now configured for alpha-dec-osf4.0

   Source directory:         .
   Installation directory:   /usr/local
   C compiler:               gcc -ieee_with_inexact -g -O2
   FORTRAN compiler:         f77 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jun 19 18:44:35 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 19 Jun 1998 12:44:35 -0500
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: Douglas Bates's message of 19 Jun 1998 12:33:30 -0500
References: <m0yn4eX-0000b2C@verdi.stat.wisc.edu> <x2wwadl33s.fsf@blueberry.kubism.ku.dk> <6rvhpxe1p1.fsf@verdi.stat.wisc.edu>
Message-ID: <6ru35he16k.fsf@verdi.stat.wisc.edu>

I see I contradicted myself.

Douglas Bates <bates@cs.wisc.edu> writes:

> I do have the -ieee_with_no_inexact flag being passed to gcc.  The end
                          xxx
...
>    C compiler:               gcc -ieee_with_inexact -g -O2

Strike the "_no"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 19 19:02:35 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Jun 1998 20:02:35 +0200
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: Douglas Bates's message of 19 Jun 1998 12:44:35 -0500
References: <m0yn4eX-0000b2C@verdi.stat.wisc.edu>
 <x2wwadl33s.fsf@blueberry.kubism.ku.dk>
 <6rvhpxe1p1.fsf@verdi.stat.wisc.edu>
 <6ru35he16k.fsf@verdi.stat.wisc.edu>
Message-ID: <x2ra0ll16s.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> 
> I see I contradicted myself.
> 
> Douglas Bates <bates@cs.wisc.edu> writes:
> 
> > I do have the -ieee_with_no_inexact flag being passed to gcc.  The end
>                           xxx
> ...
> >    C compiler:               gcc -ieee_with_inexact -g -O2
> 
> Strike the "_no"
> 

Never mind. The strange thing is that it isn't behaving according to
IEEE specs, because according to those, default behaviour on fp
exceptions is to set a flag and continue. 

I bet the exception is happening in InitArithmetic() in
src/main/arithmetic.c which does some division by zero *before*
setting a signal handler for SIGFPE. Tried running it under the
debugger? (or debugging the core file?)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun 19 18:59:38 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 19 Jun 1998 19:59:38 +0200
Subject: Compilation of R-0.62.1 on DEC Alpha
In-Reply-To: <6rvhpxe1p1.fsf@verdi.stat.wisc.edu> (message from Douglas Bates
 on 19 Jun 1998 12:33:30 -0500)
Message-ID: <199806191759.TAA27948@sophie.ethz.ch>

>>>>> "DougB" == Douglas Bates <bates@stat.wisc.edu> writes:

    DougB> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
    >> There are two things to this: What on earth is causing a floating
    >> exception at that stage (it might actually be normal)? and why is it
    >> dumping core? The latter sounds as if you might need to put in some
    >> option to force IEEE behaviour.

    DougB> Is there anything done before the first prompt to initialize the
    DougB> IEEE NaN, Inf and -Inf?

Yes!
Look at  ML_POSINF, ML_NAN, etc in  src/include/Mathlib.h

    DougB> I do have the -ieee_with_(..)_inexact flag being passed to gcc.

    DougB> The end of the configure output shows

    DougB>	 R is now configured for alpha-dec-osf4.0

    DougB>	 Source directory:         .
    DougB>	 Installation directory:   /usr/local
    DougB>	 C compiler:               gcc -ieee_with_inexact -g -O2
    DougB>	 FORTRAN compiler:         f77 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 19 18:59:48 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 19 Jun 1998 13:59:48 -0400
Subject: R INSTALL doc woes
Message-ID: <98Jun19.142109edt.13452@mailgate.bank-banque-canada.ca>

I put some documentation in a file dse/man/dse.Rd in and did

R INSTALL -l rlibs dse

This built the copies of dse.Rd in rlibs/dse/{help latex html}.
It also wrote over  R/doc/html/function.html  and  R/doc/html/packages.html,
effectively clobbering all the R documentation.

Also, the link that gets put in R/doc/html/packages.html points to
    R/library/dse/html/00Index.html
rather than
          rlibs/dse/html/00Index.html


Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From arossini@biostat.washington.edu  Sat Jun 20 18:04:21 1998
From: arossini@biostat.washington.edu (Anthony Rossini)
Date: Sat, 20 Jun 1998 10:04:21 -0700 (PDT)
Subject: ["Eric S. Raymond" <esr@snark.thyrsus.com>] The Trove project -- next-generation Internet software archiving (fwd)
Message-ID: <Pine.SUN.3.91.980620100329.6767A-110000@chekov>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--1918950298-1868141776-898362261=:6767
Content-Type: TEXT/PLAIN; charset=US-ASCII


Something to think about for CRAN's future.

best,
-tony

--1918950298-1868141776-898362261=:6767
Content-Type: MESSAGE/RFC822
Content-ID: <Pine.SUN.3.91.980620100329.6767C@chekov>

=====BEGIN PGP SIGNED MESSAGE=====


The Trove project is aimed at producing the next-generation Internet
software archive facility.  Its objective is to replace the ad-hoc
hacks now used at Sunsite, CPAN, PSA, the Red Hat contrib directory
and elsewhere with a flexible and powerful Web-accessible database
that will, among other things, support unified searches across all
Trove archives.

As the person who does most of the package-filing work on Sunsite, I
became convinced some months ago that the classical FTP-tree model of
Internet software archive just doesn't cut it any more.  It's way too
intensive of maintainer time, making it unsustainable as Linux
explodes in popularity.  It also makes software excessively hard to
find unless you're a regular archive user with a map of the site in
your head.

The thin WWW wrappers in place at Sunsite and CPAN make those archives
a little prettier, but don't solve the underlying scaling problems.
The Python guys over at PSA do a bit better on the user side through
effective leveraging of free-text searching, but haven't solved the
maintainer-intensiveness problem.  And none of the ad-hoc archives
talk to or can search each other.

We need a fundamentally new approach, and we need it before these
vital pieces of community infrastructure collapse under their own
weight.  I consider a solution to this problem critical enough that
Trove is now my top priority after continuing the public push for
the open-source development mode.

The Trove project has been up and running for month or so.  The design
has firmed up nicely and working code is beginning to appear.  If you
think you might be interested in helping solve these problems, please
look over the Trove project page at:

        http://www.tuxedo.org/~esr/trove

There's a design document accessible in HTML there that describes the
project's objectives and present status in detail.  

I'm aiming high.  I want the maintainers of the major existing
archives to buy in early, so that by year-end the present creaking
infrastructure can be replaced with something better.  I can deliver
Sunsite myself.  The Python community's leaders are already on board,
and so is Red Hat.  And we've had an expression of interest from
CPAN's maintainer.  Anybody else running an archive site is urged to
join now so we can be sure to accomodate your community's needs in the
design.

We could use more design input (especially from people running archives now),
and we'll need a fair bit of implementation and testing help.  CGI and Web
experts would be particularly welcome, also people who grok PGP and
web-session-authentication problems.
- -- 
                <a href="http://www.tuxedo.org/~esr">Eric S. Raymond</a>

Hoplophobia (n.): The irrational fear of weapons, correctly described by 
Freud as "a sign of emotional and sexual immaturity".  Hoplophobia, like
homophobia, is a displacement symptom; hoplophobes fear their own
"forbidden" feelings and urges to commit violence.  This would be
harmless, except that they project these feelings onto others.  The
sequelae of this neurosis include irrational and dangerous behaviors
such as passing "gun-control" laws and trashing the Constitution.



- -- 
This article has been digitally signed by the moderator, using PGP.
http://www.iki.fi/mjr/cola-public-key.asc has PGP key for validating signature.
Send submissions for comp.os.linux.announce to: linux-announce@news.ornl.gov
PLEASE remember a short description of the software and the LOCATION.
This group is archived at http://www.iki.fi/mjr/linux/cola.html

=====BEGIN PGP SIGNATURE=====
Version: 2.6.3i
Charset: latin1

iQCVAgUBNYfCyVrUI/eHXJZ5AQEBYgP+KfEOmBIqEtnCVElbqNgnz37mpsAbI8ci
nrzFrlesIauq27Wf4ON5Bbv2psS6IzePNI9D3G64QNTYUFbyHnB2fEPd98n5rpMl
JoWjxG1JPIAzE9pPqBZ1Ak6UtGn3MTqPB7GKu9v9DSj6I9rJRF0zRP21Y612Mw9V
XfTMRXPnwkM=
=qIr6
=====END PGP SIGNATURE=====

------------------------------



--1918950298-1868141776-898362261=:6767--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sun Jun 21 04:43:56 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 20 Jun 1998 22:43:56 -0500
Subject: R-0.62.1 on DEC Alpha
Message-ID: <6rpvg3whab.fsf@verdi.stat.wisc.edu>

The good news is that Christopher Chimelis has compiled and
successfully run R-0.62.1 on a DEC Alpha running Linux (Debian
GNU/Linux 2.0 for Alpha).  He needed to set the -mieee flag to the
compiler which, for that system, is the egcc compiler from the egcs
system.

The bad news is that I can get R-0.62.1 to compile on a DEC Alpha
running Digital Unix 4.0 with the gcc 2.7.2 compiler and using the
-ieee flag but it still generates a floating point exception before it
gets to the first prompt.

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jun 22 08:35:30 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 22 Jun 1998 09:35:30 +0200 (CEST)
Subject: DSE status
In-Reply-To: <98Jun19.121635edt.13446@mailgate.bank-banque-canada.ca>
References: <98Jun19.121635edt.13446@mailgate.bank-banque-canada.ca>
Message-ID: <13710.2370.668615.396199@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 19 Jun 1998 11:55:19 -0400,
>>>>> Paul Gilbert (PG) wrote:


PG> 2/ I like the fancy help facility but I am not likely to get around to
PG> converting from my html anytime soon. In the meantime I will make a simple .Rd
PG> file with a general description and hopefully I can get the html version to
PG> point to the link to my full html help. However, I am unclear on the mechanism
PG> for getting the link to a package included into R/doc/html/packages.html with R
PG> INSTALL. Can someone explain how I do this?

The file is built from the directories in $RHOME/library: For each
directory I look if  $RHOME/library/$pkg/TITLE exists and use the
contents of the TITLE file as entry for the package list.

You can build the also by calling

	${RHOME}/etc/build-help --htmllists

The entry points always to

	$RHOME/library/$pkg/html/00Index.$HTML

so by replacing this file you can provide your own HTML documentation.

Hope this helps,
Fritz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jun 22 08:54:49 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 22 Jun 1998 09:54:49 +0200 (CEST)
Subject: R INSTALL doc woes
In-Reply-To: <98Jun19.142109edt.13452@mailgate.bank-banque-canada.ca>
References: <98Jun19.142109edt.13452@mailgate.bank-banque-canada.ca>
Message-ID: <13710.3529.158559.899687@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 19 Jun 1998 13:59:48 -0400,
>>>>> Paul Gilbert (PG) wrote:

PG> I put some documentation in a file dse/man/dse.Rd in and did
PG> R INSTALL -l rlibs dse

PG> This built the copies of dse.Rd in rlibs/dse/{help latex html}.
PG> It also wrote over  R/doc/html/function.html  and  R/doc/html/packages.html,
PG> effectively clobbering all the R documentation.

PG> Also, the link that gets put in R/doc/html/packages.html points to
PG>     R/library/dse/html/00Index.html
PG> rather than
PG>           rlibs/dse/html/00Index.html


The html documentation currently does not support non-standard
library locations, i.e., the packages must be in $RHOME library. Of
course I consider this as a massive bug, but upon fixing it I want to
make it completely right ... which includes building the packages.html
file at runtime from the current .lib.loc. The main problem is that
there seems to be no way of using environment variables such as $USER
or $HOME in html code ... hence I cannot access any file the user is
allowed to write to.

The typical use of
	R INSTALL -l xxx mypkg

IMO is with xxx=$HOME/lib/something and that can't work easily ...

If anybody can help me out with this, please let me know!

I want to build a packages.html file in R and then send the resulting
HTML code to the browser ... how should I call the file such that

*)	the user is allowed to write to it
*)	the file has a name I can reference from systemwide html files
*)	it is on a per-user basis, i.e. /tmp/packages.html is out of
	question.  

fritz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 22 09:43:49 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 Jun 1998 10:43:49 +0200
Subject: problem with sub in graphs
In-Reply-To: <x21zslmmf5.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 19 Jun 1998 17:38:38 +0200)
Message-ID: <199806220843.KAA01498@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Colin Farrow <C.Farrow@geology.gla.ac.uk> writes:
    >> I understand the problem now.  Clearly a more systematic approach to
    >> the use of ... is required.  In the current example with plot and
    >> hist the problem arises because parameters of the title function are
    >> being passed to other low level graphical functions.  The solution
    >> therefore is that only global graphical parameters such as col, are
    >> passed via ... and function specific parameters like sub need to be
    >> specified in the function definition. Hence in the current situation
    >> plot.default and hist.default require a sub= argument which should
    >> be passed only to the title function. It currently is not, and yes
    >> it would be handy to be able to turn off the warnings.

    PD> Wait a minute.

    PD> Am I the only one sensing that something is badly amiss with that
    PD> logic? I agree that that is the essence of the problem, but the
    PD> solution seems wrong.

hmm, maybe not for the particular case.
In the light of my story below, I am convinced that code can be made less
error prone and more robust by using as little "..." as possible
inside basic R functions.

    PD> The purpose of '...' is that a function does not  need to know
    PD> about certain parameters that are being handled by lower level
    PD> routines. It can just pass them along.

Yes,  but......

The problem here is really about catching user typos.
S-plus has been  quite lazy here which has driven people into despair, 
more than once in my epxerience:

Consider the person (especially non-pro statistician) who does

	summary(glm(y~x,familiy=poisson(link="identity")))

and then tries to make sense from what [s]he gets.
	(This is a real story, not made up!  
	 I don't remember how many man hours were lost, but > 2)

In R, a more or less helpful error message ("... unused argument to function"),
whereas in S-plus, there's NO error message and a result that looks quite
reasonable  --- but is just wrong:
Since S has  glm <- function(..........,  ...)
				          ###
the  ``familiy'' is just put into the  "..." part,
	    ^
passed on to glm.fit and never seen there ---
resulting in the default family, i.e. gaussian, being used  which can give
quite reasonably looking results...  but the un-experienced user will
VERY hardly find out.

Note: The above behavior is not a basic merit of R of S(-plus),
      it just happens that glm() in R was written  WITHOUT "..."
      and glm() in S-plus has a "..."

My own lesson learned from the above story:

	1) Use "..." sparingly in functions you write
	2) Still use "<arg>=NULL" arguments which you pass to lower-level
	   functions in order only use "..." once, if possible.
	3) If you pass "..." to lower level functions,
	   they SHOULD be checking  ALL of "..." eventually
	   and tell if there were arguments there with ``wrong'' tags (/names).

	Otherwise, typos in argument names will not be detected and the
	arguments silently dropped.  
	I think this would be too lazy for ``robust'' programming..

    PD> This is very practical for modular programming in that you can just
    PD> (e.g.) add an option to a low level function without having to
    PD> register it with all other 'upstreams' functions (in different
    PD> packages and whatnot). Of course, you still have to be careful
    PD> about the argument names but that's fairly easy in practice.

    PD> Suppose that a function needs to call *two* such routines. Then why
    PD> should it suddenly be made responsible for keeping track of which
    PD> arguments make sense to which routine? I'd say that the only
    PD> sensible paradigm is that routines that get called with '...'
    PD> should simply disregard any arguments they do not understand what
    PD> to do with.

I agree that this is very handy in several cases.
However, in the light of my point "3)" above,
I think we should be more particular here.

Maybe, the lowest level functions  (R or C, I'm not so sure anymore),
should check the names / tags of "..."
and only silently disregard the names if the belong to a subset of
``registered'' names.

In the case of graphics and plot(...),  par(...);
this could be made in a well defined and accessible set.

    PD> (I'm also not very happy with the news that S-4 will be enforcing
    PD> identical calling sequences for generic methods, but that's another
    PD> matter)
yes, indeed  [2 x]

Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 22 11:33:52 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Jun 1998 12:33:52 +0200
Subject: problem with sub in graphs
In-Reply-To: Martin Maechler's message of Mon, 22 Jun 1998 10:43:49 +0200
References: <199806220843.KAA01498@sophie.ethz.ch>
Message-ID: <x2yaupwwrz.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

>     PD> The purpose of '...' is that a function does not  need to know
>     PD> about certain parameters that are being handled by lower level
>     PD> routines. It can just pass them along.
> 
> Yes,  but......
> 
> The problem here is really about catching user typos.
> S-plus has been  quite lazy here which has driven people into despair, 
> more than once in my epxerience:
> 
> Consider the person (especially non-pro statistician) who does
> 
> 	summary(glm(y~x,familiy=poisson(link="identity")))
> 

Point taken, but I still have reservations, mainly in the
division-of-labour department. 

The obvious counterargument is that in Splus, glm internally calls its
method= argument (glm.fitter) with the ..., and there is no way for
glm to know that "familiy" is not a valid argument for a user-supplied
method (-short of some kind of AI proximity testing, I suppose).
Conversely, *if* argument checking was performed in glm, and a user
wanted to use his own supersmart fitting method with some special
arguments, he'd have to modify glm as well. Now take *two* packages,
each modifying glm in their own way...

One way out - but this requires considerable changes - could be to
implement a convention that routines using ... returns a component
called $unmatched. The caller could then take the intersection of
those and if it is non-empty, complain. (If a routine does not
return $unmatched one must assume that everything *is* matched.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 22 14:32:56 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Jun 1998 09:32:56 -0400
Subject: .First.lib
References: <98Jun17.172642edt.13467@mailgate.bank-banque-canada.ca> <13710.2598.967181.382367@pc87.maho.magnaeu.com>
Message-ID: <98Jun22.095547edt.13452@mailgate.bank-banque-canada.ca>

> > There seems to be a minor problem in .First.lib: the library argument
> > is all of $RLIBS. I think it should be just the one directory from
> > which the package is being taken.

> `all of $RLIBS' meaning the full path to the element of lib.loc where
> the package was found?  This is definitely right.  Otherwise, you do not
> have enough information to find e.g. an `.so' file to be loaded by
> library.dynam().

By "all of  $RLIBS" I meant all of the paths in $RLIBS, in my case

> .lib.loc
[1] "/home/res/gilp/dse/pub/Rdse/rlibs"
[2] "/home/res/gilp/padi/my.production/rlibs"
[3] "/home/res8/gilp/R-versions/R-0.62.1/library"
>
However, when I do library("dse") it is using a package in [1] and when
.First.lib for dse is executed I would like the "library" argument to be set to
.lib.loc[1] (in this case) not to  the three element vector .lib.loc.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 22 16:03:56 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 22 Jun 1998 11:03:56 -0400
Subject: R INSTALL doc woes
References: <98Jun19.142109edt.13452@mailgate.bank-banque-canada.ca> <13710.3529.158559.899687@galadriel.ci.tuwien.ac.at>
Message-ID: <98Jun22.112649edt.13453@mailgate.bank-banque-canada.ca>

>The html documentation currently does not support non-standard
>library locations, i.e., the packages must be in $RHOME library. Of
>course I consider this as a massive bug, but upon fixing it I want tomake it
>completely right ... which includes building the packages.html
>file at runtime from the current .lib.loc. The main problem is that
>there seems to be no way of using environment variables such as $USER
>or $HOME in html code ... hence I cannot access any file the user is
>allowed to write to.

If you consider the possibility that a package may not belong to the owner of R
then you rule out a lot of ways for doing this. One possibility might be a set
of links in /tmp (e.g  R.packages and R.package.xxx ). I don't think you could
write these with HTML, you would need to do that with the R startup script, but
an HTML browser can certainly follow them. There is, however, the problem you
alluded to: one user might clobber another one. As far as I know the only
"official HTML" way around this is with cookies, which I don't know much about
and I'm not sure how you would do it.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Jun 22 17:34:56 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Mon, 22 Jun 1998 11:34:56 -0500 (CDT)
Subject: lme_2.9-2.tar.gz available soon on CRAN
Message-ID: <m0yo9YW-0000Y0C@verdi.stat.wisc.edu>

I recently uploaded a new version of the lme contributed library to
the main CRAN site.  It should be available on mirrors within the next
24 hours.

This version matches the beta version of NLME 3.0 for S-PLUS.  It only
provides methods for linear mixed-effects models in R so it is called
lme rather than nlme.  The other big thing that is missing in the R
version is all the graphics because they rely on trellis graphics
functions.

Even with these things missing it is a big step forward for Jose'
Pinheiro and me to have this running under R.  This version can handle
a substantial portion of the models fit by SAS PROC MIXED.  It
computes either maximum likelihood (ML) or restricted maximum
likelihood (REML) estimates for linear mixed-effects models with
single or multiple nested levels of random effects.

The library includes a SAS_Mixed directory with R transcripts of
analyses paralleling those in the book "SAS System for Mixed Models"
by Littell, Milliken, Stroup and Wolfinger.

Please ensure that you get the lme_2.9-2.tar.gz file.  The
lme_2.9-1.tar.gz file has problems with installation of the help files
and has the wrong version listed in the DESCRIPTION file.  (If you
really want to install lme_2.9-1.tar.gz you can do so by removing the
file lme/man/[.pdMat.Rd before trying to run R INSTALL.)

This is still work in progress.  It seems right now that the
variance-covariance matrices with compound symmetry structure are not
behaving properly but I haven't tracked down the problem there yet.

The speed is quite good and can be improved when we get the hooks into
the underlying optimization code in R.  Here is a speed comparison
used in the "SAS Sytems for Mixed Models" book.

> library( lme )
> data( SIMS )
> ### Analysis of the Second International Mathematics Study (SIMS)
> ### described in section 7.2 of "SAS System for Mixed Models"
> unix.time(assign("fm1RSIMS", lme(Gain ~ Pretot, SIMS, ~ Pretot | Class, 
+         REML = TRUE)))
[1] 14.25  0.10 15.00  0.00  0.00
> ### Timing was done on a Pentium Pro 200 MHz system running Linux
> ### Your mileage may vary.
> summary(fm1RSIMS)              # compare to output 7.4, p. 262, "SAS System ..."
Linear mixed-effects model fit by REML
 Data: SIMS 
       AIC      BIC    logLik
  22392.57 22429.85 -11190.29

Random effects:
 Formula: ~Pretot | Class
 Structure: General positive-definite
            StdDev    Corr  
(Intercept) 3.8065218 (Intr)
Pretot      0.0959321 -0.641
Residual    4.7154814       

Fixed effects: Gain ~ Pretot 
                Value Std.Error   z-value p-value
(Intercept)  7.059605  0.365898  19.29390       0
Pretot      -0.186031  0.016098 -11.55592       0
 Correlation: 
       (Intr)
Pretot -0.76 

Standardized Within-Group Residuals:
         Min           Q1          Med           Q3          Max 
-5.377621209 -0.595534211  0.009876494  0.640990584  3.718249985 

Number of Observations: 3691
Number of Groups: 190 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 23 15:45:43 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 23 Jun 1998 10:45:43 -0400
Subject: redundant names
Message-ID: <98Jun23.110915edt.13445@mailgate.bank-banque-canada.ca>

I don't often suggest an incompatibility with S, but I think this behavior in S
and R is very dangerous:

> c(list(a="a"), b=2, a=1)$a
[1] "a"
> c(list(a="a"), b=2, a=1)
$a
[1] "a"
$b
[1] 2
$a
[1] 1

I think this is a case where we may want incompatibility with S in order to
enforce good programming and catch unintentional errors. I cannot think of a
case
where I would want a list with two elements having the same name. I would
suggest  eliminating all but the first of any redundant names (and issuing a
warning?).

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun 24 07:21:36 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Jun 1998 08:21:36 +0200 (CEST)
Subject: redundant names
In-Reply-To: <98Jun23.110915edt.13445@mailgate.bank-banque-canada.ca>
References: <98Jun23.110915edt.13445@mailgate.bank-banque-canada.ca>
Message-ID: <13712.39664.226966.564351@pc87.maho.magnaeu.com>

>>>>> Paul Gilbert writes:

> I don't often suggest an incompatibility with S, but I think this behavior in S
> and R is very dangerous:

>> c(list(a="a"), b=2, a=1)$a
> [1] "a"
>> c(list(a="a"), b=2, a=1)
> $a
> [1] "a"
> $b
> [1] 2
> $a
> [1] 1

> I think this is a case where we may want incompatibility with S in
> order to enforce good programming and catch unintentional errors. I
> cannot think of a case where I would want a list with two elements
> having the same name. I would suggest eliminating all but the first of
> any redundant names (and issuing a warning?).

I am not saying that I have a good example (see below), but some may
want it this way.  Suppose you have a list of complicated records and
you (for some admittedly strange reason) decide you want to store labels
directly as the list names.

E.g.,
	x <- list(a = 3, b = 2, a = 4)
which you later use with
	x[names(x) == "a"]
to work on the records you want.

So I think we should not rule this out in c() (or e.g. [rc]bind()).

But we need to spend more time on how we want list assignment to be in
any case.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jun 24 09:47:51 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 24 Jun 1998 10:47:51 +0200
Subject: Warning in par(args)
In-Reply-To: <98Jun18.110225edt.13458@mailgate.bank-banque-canada.ca> (message
 from Paul Gilbert on Thu, 18 Jun 1998 10:41:41 -0400)
Message-ID: <199806240847.KAA25236@sophie.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    MM> I myself am using the (``recommended'' ?) way of
    MM>    work.work1()
    MM>    on.exit(par(op))
    MM>    op <- par(xyx = ...,  brd = ...)
    MM>    work.work2()
    MM>    op <- c(op, par(ghj = ...,  klm = ...))
    MM>    work.work3()

    MM> which can be slightly more tedious but is ``preciser'' and
    MM> doesn't lead to the above error messages.

    PaulG> Could you please explain the more precise nature of this and why
    PaulG> it doesn't give the error message. I typically use
    PaulG> on.exit(par(op)), but perhaps not everywhere.  Is it on.exit
    PaulG> that prevents the message?

No, it's not the on.exit;
it's the fact the I don't put the *whole* par() into op but rather only
the parts which I change;
e.g.
	> op <- par(mfrow= c(2,2))
	> op
	$mfrow:
	[1] 1 1

Therefore, a later  par(op)  [called by on.exit(.)] only calls par(.) with
arguments that make sens to be changed.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 23 15:53:07 1998
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Tue, 23 Jun 1998 10:53:07 -0400
Subject: un-settable pars
Message-ID: <98Jun23.111627edt.13457@mailgate.bank-banque-canada.ca>


      >> Warning in par(args) : parameter "cin" can't be set
      >> Warning in par(args) : parameter "cra" can't be set
      >> Warning in par(args) : parameter "csi" can't be set
      >> Warning in par(args) : parameter "din" can't be set
    PD> This comes from constructions of the type
    PD>   opar<-par()
    PD>   work.work.work()
    PD>   par(opar)
    PD> This gives complaints from unsettable items. Splus quietly omits them,
    PD> so I suppose that we really should do the same.

One solution here might be to set some attribute on unsettable items,
effectively indicating that it is not to be set and no warning is necessary.

Paul Gilbert


	[This was bounced by majordomo because of the match
	  /^subject:\s*uns\w*b/i [[= "u*su*scribe" with possible typos]]
	 that's why I made "unsettable" to "un-settable".

	 MM, list maintainer]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 24 11:09:37 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Jun 1998 12:09:37 +0200
Subject: Warning in par(args)
In-Reply-To: Martin Maechler's message of Wed, 24 Jun 1998 10:47:51 +0200
References: <199806240847.KAA25236@sophie.ethz.ch>
Message-ID: <x2vhprt8ke.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

>     MM>    on.exit(par(op))
>     MM>    op <- par(xyx = ...,  brd = ...)
>     MM>    work.work2()
>     MM>    op <- c(op, par(ghj = ...,  klm = ...))
>     MM>    work.work3()
...
> Therefore, a later  par(op)  [called by on.exit(.)] only calls par(.) with
> arguments that make sens to be changed.

Yup, but as has been pointed out there's a problem: If you change the
same parameter twice, you actually get the wrong result:

> opar<-par(cex=2)
> opar<-c(opar,par(cex=4))
> par(opar)
> par()$cex
[1] 2

which happens because

> opar
$cex
[1] 1

$cex
[1] 2

and par() sets parameters in the order it finds them. Of course one
could get the first item of each name by using

> opar[unique(names(opar))]
$cex
[1] 1

or let par(opar) do that internally, but I'm not sure that it is
really such a good idea.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 24 17:30:24 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 24 Jun 1998 12:30:24 -0400
Subject: rbind(NULL, matrix("a", 5,3))
Message-ID: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>

I'm get the following anti social behavior from R 0.62.1

Paul
_____
R : Copyright 1998, The R Development Core Team
Version 0.62.1  (June 15, 1998)
...
> rbind(NULL, matrix("a", 5,3))
Arithmetic Exception - core dumped
$ $

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 24 22:46:01 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Jun 1998 23:46:01 +0200
Subject: rbind(NULL, matrix("a", 5,3))
In-Reply-To: Paul Gilbert's message of Wed, 24 Jun 1998 12:30:24 -0400
References: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>
Message-ID: <x2u35aiicm.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I'm get the following anti social behavior from R 0.62.1
> 
> Paul
> _____
> R : Copyright 1998, The R Development Core Team
> Version 0.62.1  (June 15, 1998)
> ...
> > rbind(NULL, matrix("a", 5,3))
> Arithmetic Exception - core dumped
> $ $

Same thing happens here. What's that supposed to do anyway? 
Should be fixable with a bit of defensive coding. (The one good thing
about core dumps is that it is fairly easily to pinpoint where the
problem is...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 25 00:19:51 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 1998 01:19:51 +0200
Subject: rbind(NULL, matrix("a", 5,3))
In-Reply-To: Peter Dalgaard BSA's message of 24 Jun 1998 23:46:01 +0200
References: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>
 <x2u35aiicm.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ogvi75gn.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Same thing happens here. What's that supposed to do anyway? 
> Should be fixable with a bit of defensive coding. (The one good thing
> about core dumps is that it is fairly easily to pinpoint where the
> problem is...)

Fixed now. 

[In src/main/bind.c, just after line 913, insert

                               if ( k == 0 )
                                       mrows = 0;

]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun 25 07:46:32 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 25 Jun 1998 08:46:32 +0200
Subject: Warning in par(args) -- the(?) solution
In-Reply-To: <x2vhprt8ke.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 24 Jun 1998 12:09:37 +0200)
Message-ID: <199806250646.IAA27094@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Martin Maechler <maechler@stat.math.ethz.ch> writes:

      MM>   on.exit(par(op))
      MM>   op <- par(xyx = ...,  brd = ...)
      MM>   work.work2()
      MM>   op <- c(op, par(ghj = ...,  klm = ...))
      MM>   work.work3()
      MM> ...

      MM> Therefore, a later par(op) [called by on.exit(.)] only calls par(.)
      MM> with arguments that make sens to be changed.

    PD> Yup, but as has been pointed out there's a problem: If you change the
    PD> same parameter twice, you actually get the wrong result:

    >> opar<-par(cex=2)
    >> opar<-c(opar,par(cex=4))
    >> par(opar)
    >> par()$cex
    PD> [1] 2

    PD> which happens because

    >> opar
    PD> $cex
    PD> [1] 1

    PD> $cex
    PD> [1] 2

    PD> and par() sets parameters in the order it finds them. Of course one
    PD> could get the first item of each name by using

    >> opar[unique(names(opar))]
    PD> $cex
    PD> [1] 1

    PD> or let par(opar) do that internally, but I'm not sure that it is
    PD> really such a good idea.

Wouldn't the ``easy'' solution be 
to use a FILO instead of a FIFO stack :

      >   on.exit(par(op))
      >   op <- par(xyx = ...,  brd = ...)
      >   work.work2()
      >   op <- c(par(ghj = ...,  klm = ...), op) ##--- PREPEND new par() --- !
	                                    #####
      >   work.work3()
      > ...

Of course this also depends on the (current) behavior of par() 
	(``setting parameters in the order it finds them''),
but we could "standardize" par() that way ((and document it!)) 
(and it is S compatible ..).

Martin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 25 16:01:22 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 25 Jun 1998 11:01:22 -0400
Subject: rbind(NULL, matrix("a", 5,3))
References: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>
 <x2u35aiicm.fsf@blueberry.kubism.ku.dk> <x2ogvi75gn.fsf@blueberry.kubism.ku.dk>
Message-ID: <98Jun25.112550edt.13441@mailgate.bank-banque-canada.ca>

>Fixed now.
>[In src/main/bind.c, just after line 913, insert
>                               if ( k == 0 )
>                                      mrows = 0;

I made this change, so the lines around 913 are now

     STRING(result)[i + n + (j * rows)] = STRING(u)[(i + j * mrows) % k];
    n += mrows;
                              if ( k == 0 )
                                       mrows = 0;
   }


and recompiled, but I still get the same problem:

> rbind(NULL, matrix("a", 5,3))
Arithmetic Exception - core dumped

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 25 16:17:11 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 1998 17:17:11 +0200
Subject: rbind(NULL, matrix("a", 5,3))
In-Reply-To: Paul Gilbert's message of Thu, 25 Jun 1998 11:01:22 -0400
References: <98Jun24.125419edt.13441@mailgate.bank-banque-canada.ca>
 <x2u35aiicm.fsf@blueberry.kubism.ku.dk>
 <x2ogvi75gn.fsf@blueberry.kubism.ku.dk>
 <98Jun25.112550edt.13441@mailgate.bank-banque-canada.ca>
Message-ID: <x2soktlde0.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> >Fixed now.
> >[In src/main/bind.c, just after line 913, insert
> >                               if ( k == 0 )
> >                                      mrows = 0;
> 
> I made this change, so the lines around 913 are now
> 
>      STRING(result)[i + n + (j * rows)] = STRING(u)[(i + j * mrows) % k];
>     n += mrows;
>                               if ( k == 0 )
>                                        mrows = 0;
>    }
> 
> 
> and recompiled, but I still get the same problem:
> 
> > rbind(NULL, matrix("a", 5,3))
> Arithmetic Exception - core dumped
> 

Aw, darn ...

Someone must have been adding stuff to my version but not yours...

The lines need to go  *before* the outer for loop. After line 909,
that is. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 25 20:55:46 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 25 Jun 1998 14:55:46 -0500 (CWT)
Subject: Difference in behaviour of model.matrix
Message-ID: <m0ypI7W-000n2IC@jenkins.stat.wisc.edu>

This is an obscure R/S incompatibility but it is tripping up some code
for us in the lme library.  If you specify the contrasts argument in a
call to model.matrix, that seems to take precedence over the
interpretation of the formula.  In S if the formula contains a "- 1",
that will cause the contrasts to be suppressed.

 S> foo <- data.frame(bar = factor(rep(1:3, rep(2,3))))
 S> foo
   bar 
 1   1
 2   1
 3   2
 4   2
 5   3
 6   3
 S> model.matrix(~bar - 1, model.frame(~ bar - 1, data = foo))
   bar1 bar2 bar3 
 1    1    0    0
 2    1    0    0
 3    0    1    0
 4    0    1    0
 5    0    0    1
 6    0    0    1
 S> model.matrix(~bar - 1, model.frame(~ bar - 1, data = foo), 
 +    contr = list(bar = contr.treatment(3)))
   bar1 bar2 bar3 
 1    1    0    0
 2    1    0    0
 3    0    1    0
 4    0    1    0
 5    0    0    1
 6    0    0    1

whereas 

 R> foo <- data.frame(bar = factor(rep(1:3, rep(2,3))))
 R> model.matrix(~bar - 1, model.frame(~ bar - 1, data = foo))
      bar1 bar2 bar3
 [1,]    1    0    0
 [2,]    1    0    0
 [3,]    0    1    0
 [4,]    0    1    0
 [5,]    0    0    1
 [6,]    0    0    1
 attr(,"assign")
 [1] 1 1 1
 R> model.matrix(~bar - 1, model.frame(~ bar - 1, data = foo), 
 +    contr = list(bar=contr.treatment(3)))
      bar2 bar3
 [1,]    0    0
 [2,]    0    0
 [3,]    1    0
 [4,]    1    0
 [5,]    0    1
 [6,]    0    1
 attr(,"assign")
 [1] 1 1

I would be willing to admit that our code should perhaps be redesigned
to avoid this unfortunate construction.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 25 21:37:36 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 1998 22:37:36 +0200
Subject: Difference in behaviour of model.matrix
In-Reply-To: Douglas Bates's message of Thu, 25 Jun 1998 14:55:46 -0500 (CWT)
References: <m0ypI7W-000n2IC@jenkins.stat.wisc.edu>
Message-ID: <x2ogvhxlnz.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> I would be willing to admit that our code should perhaps be redesigned
> to avoid this unfortunate construction.

On the other hand, the R model.xxx code has been in for a rewrite for
quite some time...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 25 22:16:34 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 25 Jun 1998 17:16:34 -0400
Subject: all.equal
Message-ID: <98Jun25.174107edt.13448@mailgate.bank-banque-canada.ca>

I'm not sure what the process is for this, but can I get the following all.equal
function put in the R base?

Paul Gilbert
____

all.equal <- function(obj1, obj2,...) {UseMethod("all.equal")}

all.equal.default <- function(obj1, obj2, tolerance=.Machine$double.eps)
  {if(mode(obj1)      != mode(obj2) )               return("modes differ.")
   if (length(obj1) != length(obj2) )               return("lengths differ")

   if(is.null(class(obj1)) != is.null(class(obj2))) return("classes differ.")
   else if(!is.null(class(obj1))
           && any(class(obj1) != class(obj2)) )     return("classes differ.")


   if(is.null(attributes(obj1)) != is.null(attributes(obj2)))
                                                    return("attributes differ.")

   else if(!is.null(attributes(obj1))
           && any(unlist(attributes(obj1)) != unlist(attributes(obj2))))
                                                    return("attributes differ.")

   cull.numeric  <- function(obj, r=NULL) {
      if (is.null(obj) | (length(obj) == 0)) return(r)
      else if (is.numeric(obj)) return(c(r,obj))
      else if (is.list(obj))
           return( c(cull.numeric(obj[[1]], r), cull.numeric(obj[-1])) )
      else return(r)
     }

   z1 <- cull.numeric(obj1)
   if(! is.null(z1))
      {z2 <- cull.numeric(obj2)
       if (length(z1) != length(z2) )  return("length of numeric parts differ")
       M <- pmax(abs(z1), abs(z2))
       # next line results in absolute rather than relative comparison for
       # very small numbers.
       M[ M < 100 *tolerance] <- 1
       if (any(abs(z1 -z2) > tolerance * M))
                       return("numeric value differences exceed tolerance.")
      }
  # next comparison is really for non-numeric values but also compares
  # numeric values to the tolerance of the character representation in unlist.
   if (! all(unlist(obj1) == unlist(obj2)))     return("values differ.")
   T
  }



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun 26 13:45:11 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Jun 1998 12:45:11 -0000 ()
Subject: R-beta: PostScript tick marks in 62.1
In-Reply-To: <Pine.3.87.9806251017.A16855-0100000@superh.hg.med.umich.edu>
Message-ID: <XFMail.980626130136.plummer@iarc.fr>

[Moved over from R-help - MTP]

On 25-Jun-98 Matthew R. Nelson wrote:
>I should have added that the plot was generated with log="xy".  On my 
>computer, this simple example recreates the problem:
>
>> postscript("tmp.ps", width=6, height=6, family="Times") 
>> plot((1:10)^2, (1:10)^3, log="xy") 
>> dev.off()
>
>With this simple plot function, I get 2 x-axis tick marks and 1 y axis 
>tick mark, but the expected number of axis labels.

I get the same thing. Sorry for doubting you, but a concrete example
helps to locate the problem.  The missing tick marks are being clipped
because somewhere in the graphics code, the information that we are
using the log scale for the axes is being lost.

Here's a patch for src/graphics/graphics.c

M.

--- graphics.c  Fri Jun 26 14:29:04 1998
+++ graphics.new        Fri Jun 26 14:30:42 1998
@@ -999,13 +999,19 @@
 double xDevtoUsr(double x, DevDesc *dd)
 {
   double nfc = xDevtoNFC(x, dd);
-  return (nfc - dd->gp.win2fig.ax)/dd->gp.win2fig.bx;
+  if (dd->gp.xlog)
+     return pow(10, (nfc - dd->gp.win2fig.ax)/dd->gp.win2fig.bx);
+  else
+     return (nfc - dd->gp.win2fig.ax)/dd->gp.win2fig.bx;
 }

 double yDevtoUsr(double y, DevDesc *dd)
 {
   double nfc = yDevtoNFC(y, dd);
-  return (nfc - dd->gp.win2fig.ay)/dd->gp.win2fig.by;
+  if (dd->gp.ylog)
+    return pow(10, (nfc - dd->gp.win2fig.ay)/dd->gp.win2fig.by);
+  else
+    return (nfc - dd->gp.win2fig.ay)/dd->gp.win2fig.by;
 }
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun 26 14:57:41 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Jun 1998 15:57:41 +0200
Subject: R-beta: PostScript tick marks in 62.1
In-Reply-To: Martyn Plummer's message of Fri, 26 Jun 1998 12:45:11 -0000 ()
References: <XFMail.980626130136.plummer@iarc.fr>
Message-ID: <x2yauki7u2.fsf@blueberry.kubism.ku.dk>

Martyn Plummer <plummer@iarc.fr> writes:

> I get the same thing. Sorry for doubting you, but a concrete example
> helps to locate the problem.  The missing tick marks are being clipped
> because somewhere in the graphics code, the information that we are
> using the log scale for the axes is being lost.
> 
> Here's a patch for src/graphics/graphics.c
...

Now applied to the bugfix branch. Thank you.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 26 16:41:12 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 26 Jun 1998 11:41:12 -0400
Subject: scoping
Message-ID: <98Jun26.120612edt.13454@mailgate.bank-banque-canada.ca>

Can Luke Tierney's recent S-new post on scoping be included in the R FAQ?

I'm just going through my package and eliminating a few instances of "eval" as I
hadn't realized the dangers. I noticed that one way I've used eval is for
prompting, as in

n <- eval(parse(prompt="Enter the number of singular values to use: "))

I presume this is not too dangerous, but this has never really seemed like the
right way to do this. Can someone suggest a better alternative?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun 26 17:19:16 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Jun 1998 16:19:16 -0000 ()
Subject: scoping
In-Reply-To: <98Jun26.120612edt.13454@mailgate.bank-banque-canada.ca>
Message-ID: <XFMail.980626163001.plummer@iarc.fr>

On 26-Jun-98 Paul Gilbert wrote:
>Can Luke Tierney's recent S-new post on scoping be included in the R FAQ?

Could this be cross-posted?

>I'm just going through my package and eliminating a few instances of "eval" as
>I
>hadn't realized the dangers. I noticed that one way I've used eval is for
>prompting, as in
>
>n <- eval(parse(prompt="Enter the number of singular values to use: "))
>
>I presume this is not too dangerous, but this has never really seemed like the
>right way to do this. Can someone suggest a better alternative?

If you just want to read in a number, I think it's a lot safer to read
the input as character data with "readline" and then coerce it to numeric.
I wrote a utility function called "read.and.check" which does this. It
also checks that the user input satisfies certain conditions (mode,
lower and upper limit for numeric data, or set of allowed values), looping
until it gets an acceptable answer. It's in the coda package, with a help page.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Jun 26 18:27:05 1998
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 26 Jun 1998 12:27:05 -0500 (CDT)
Subject: scoping
In-Reply-To: <XFMail.980626163001.plummer@iarc.fr> from "Martyn Plummer" at Jun 26, 98 04:19:16 pm
Message-ID: <9806261727.AA29516@nokomis.stat.umn.edu>

Martyn Plummer wrote:
> 
> On 26-Jun-98 Paul Gilbert wrote:
> >Can Luke Tierney's recent S-new post on scoping be included in the R FAQ?
> 
> Could this be cross-posted?
> 

Here is the posting -- it was part of a thread on scoping in S.

John Maindonald wrote:
> 
> Jens Oehlschlaegel-Akiyoshi wrote, in response to John Thaden
> 
> > in S+ no function has automatic access to any local variables of any
> > parent functions FOR SECURITY REASONS (except for objects in frames 0+1). 
> There must of course be some scoping rules, and what scoping rules]
> are at the end of the day preferable is a matter for debate.

This debate has been pretty much settled in computer
science. Virtually all modern functional and near functional languages
use lexical scope. This includes all modern Lisp variants, the ML
family, Haskell, Miranda, etc. The theoretical underpinnings for these
languages is provided by the lambda calculus, which uses lexical
scope. Lexical scope is now considered essential for a higher level
functional language (i.e. a functional language that uses functions as
first-class values). This is the main reason S, even though it has
first class function values, is rarely used as a higher order
functional language. (Another reason is that most S users do not come
to S with a background of using a functional style, and with the lack
of lexical scoping it is probably not worth learning in the context of
S.)

In lexical scope, the meaning of a free variable in a function is
determined by the context in which the function is defined. For
example, in R (which Doug Bates mentioned in this thread and which is
lexically scoped)

	poisson.loglik<-function(x) {
				xbar<-mean(x)
				n<-length(x)
				function(lambda){
					n * (xbar * log(lambda) - lambda)
				}
			}
	pl<-poisson.loglik(rpois(10,2))

the value of pl is a log-likelihood function for the poisson sample
created by rpois(10,2). This was the value of the free variable x in
the inner function's definition when it was created, and this value is
locked into the function object (or closure) at creation time along
with the function definition. It does not matter what variables named
x are around when the function pl is called.

Another common scoping rule is dynamic scoping, where values of free
variables are determined by the environment in which they are
used. The log-likelihood example would not work at all with dynamic
scope since the x used would depend on what x was available each place
pl is called. Dynamic scope is what you get with macro languages and
was in effect what you had with S Version 1 where you only had macros,
not functions, available. Dynamic scoping is very occasionally useful,
but as a general rule it is much more error-prone and much less
powerful than lexical scope.

S uses a different rule: If a variable is not a local variable (a
function argument or a variable created by an <- assignment) then it
is global. This rule is much less error-prone than dynamic scoping but
also much less powerful than lexical scope. Some scripting languages
also use this rule (I think Tcl and Python do, though I haven't double
checked). There are probably several reasons why S chose to use this
rule, but the most important one is probably that lexical scope,
together with the ability to change a variable's value by assignment,
means you cannot save functions to separate files by writing out their
definitions.  Functions can be interrelated in arbitrary ways through
their defining environments, and the only easy safe way to preserve
these relationships when saving to disk is to save an entire workspace
(as R does). S's approach to persistent storage is incompatible with
lexical scope for its functions. I'm sure at the time the price of
changing the approach to storage just to accommodate lexical scope
seemed far too expensive, so the simpler scoping rule was adopted.

But the simple rule is not as expressive as lexical scope, and there
are certain things that cannot be done if only this standard scoping
rule is used; the modeling functions are one example. So S provides an
alternative: By using eval/frame access/get/assign in conjunction with
S's version of lazy evaluation (I'll call this eval for short) you can
write functions whose calls behave almost any way you want to. This is
a major difference from almost all other languages I am familiar
with. In other languages the scoping rules are absolute. In S, they
can be circumvented. This ability adds a great deal of power but it
also provides an enormous amount of rope with which to hang yourself.

Most of the time you can ignore this added power of S. If you write a
function and

	only use functions whose calls follow the standard scope rules

	don't use eval (or related things)

then the S language will guarantee that calls to your function will
follow the standard scope rules. You don't need to do anything special.

If on the other hand, you use eval, or one of the functions you call
does not follow the standard scope rules, then all bets are off. If it
is your intent to write a function that follows standard scope rules,
or if you plan to deviate from those rules in some particular way (as
the modeling functions do) then it is now your responsibility as the
programmer, instead of the language's responsibility, to make sure
things work right. This makes writing the function correctly much
harder. Therefore, if you are writing a function that follows standard
scope rules and find yourself using eval because it seems like a quick
fix, you should probably back off and see if you can avoid using
eval. In very rare cases you can't, but in almost all cases you can
and should.

There was a nice example of this issue in this list about a week
ago. Someone had written a function that called trellis.device.  The
function didn't work right even though the trellis.device call worked
right at top level. It was suggested that the poster had
miss-interpreted S's scope rules. In fact, if trellis.device were a
function following standard scope rules (as the poster had every right
to expect since the documentation does not suggest that it is not)
then the poster's function would have worked correctly. It turns out
that the author of trellis.device used eval in a way that caused a
departure from standard scope rules for calls to the function.  This
use of eval seems convenient on the surface but was not
necessary---direct manipulation of a captured ... argument list
followed by do.call, which is safe, would have done the job and made
it impossible for this kind of error to occur in the first place (but
see the **** note at the bottom). The bottom line again: If you are
using eval and you are not trying to do something that departs form
standard scope rules, you probably shouldn't.

All that said, there are cases where, given the limited expressive
power of S's standard scope rules, you really do have to use eval to
achieve certain result. The modeling functions are such a case.  The
convention adopted for the modeling functions is to use dynamic
scoping for determining values for variables in formulas if explicit
data are not provided. This is a debatable choice. Dynamic scope has
its uses, but since inadvertent variable capture is so easy to fall
into and so hard to prevent, it is probably not such a good idea.
An example: 

> x<-1:10
> y<-x+rnorm(10)
> f<-function(m) lm(m)
> g<-function(x) lm(x)

The functions f and g look equivalent, but they aren't:

> f(y~x)
Call:
lm(formula = m)
...
> g(y~x)
Error in g(y ~ x): Length of variable 2 is 3 != length of row names (10)

The local variable x in g, the formula, shadows the global one and
causes lm to fail. Of course if the formula contained a variable m
then f would be in trouble. I have discussed this issue with several
individuals close to the S developers who argued that this behavior is
a feature. I do not think it is the best design choice. But it is the
design choice in use, and one can live with it if this is understood.
But since eval is needed to accomplish this behavior it is up to the
programmer to insure that this design is adhered to, rather than being
guaranteed by language design features.

A better design choice, in my view, would have been to insure that
formulas are always interpreted in the context in which they are
created, so that lm would automatically see the global x and y as the
values relevant to the formula even though it is called inside f or g
in these examples. Put another way, instead of thinking of ~ as merely
a quoting operation like it is now, it should be viewed as a
closure-creating operation that follows lexical scope rules. The
resulting formula should contain not only the expression but also (at
least conceptually) the current values of the variables referenced in
the expression, if there are any available. This approach would
produce results closer to what most users would tend to expect until
they read the fine print (the example above would work properly). It
would also eliminate the need to use eval in this context, thus
eliminating a serious source of possible programming errors.

But of course this approach comes at a price: it is essentially
introducing lexical scope, with all the old issues of separate data
storage. The design choice made in S was clearly the easier one to
implement. On the other hand, a language like R that already has
lexical scope could implement this approach quite easily, but at the
cost of losing compatibility with S.

(The idea described by Rod Ball of adjusting the frame to use for
variable lookup, if I understand it correctly, is intended to achieve
similar results. But it has two drawbacks. One, it would be very
expensive in runtime overhead, but more importantly it would only work
within the dynamic extent of the call. If a fit is created in a nested
call, stored, and then reused later in an unrelated call, things will
no longer work right. Proper lexical scope avoids this.)

(**** Actually things are not quite so simple with do.call. What the
trellis.device function needed is the ability to construct an argument
list at run time, obtain a function at run time, and then call the
function with the argument list. This is almost what do.call does,
except it expects its function argument to be a string naming the
function, not an expression whose value is a function. This seems like
a strange design, but there is probably a good reason for it. It is possible
to use the current do.call by using something like

	tmpfun<- ... expression making function ...
   	do.call("tmpfun", args)

but this is awkward. It would be cleaner to define a version of
do.call, say do.call.expr, that allows its function to be specified as
an expression. This does of course require the use of eval again, as
does the definition of do.call, but it can be done carefully once and
for all to produce a function that obeys standard scope rules, as
do.call does, and then this function can be used safely whenever this
type of operation needs to be performed. If and when there is a real
need to use eval this is a good strategy: abstract out the core that
needs eval into function, and make the function use standard scoping
or carefully document how and why it doesn't. Then you can always use
this abstraction when you need it instead of manually inserting the
corresponding code with the associated risks of errors.)

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
206 Church Street                            email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Jun 26 19:01:30 1998
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 26 Jun 1998 13:01:30 -0500 (CDT)
Subject: scoping
In-Reply-To: <98Jun26.120612edt.13454@mailgate.bank-banque-canada.ca> from "Paul Gilbert" at Jun 26, 98 11:41:12 am
Message-ID: <9806261801.AA29578@nokomis.stat.umn.edu>

Paul Gilbert wrote:
> 
> 
> n <- eval(parse(prompt="Enter the number of singular values to use: "))
> 

As Martyn suggested, if you just want a number it is better to use
someting that just deals with numbers. If you do want the user to be
able to respond with an arbitrary S expression, then this is one case
where eval does make sense, but it should be used with caution. The
default behavior of eval is to use evaluate in the calling environment,

> p<-function(x) eval(parse(prompt="Enter an expression: "))
> p(3)
Enter an expression: x
[1] 3

This is probably not what you want. In S the official way to get eval
to use the global environment/frame is eval(expr,F) (this is what the
try.S example in the help page does). In R you seem to need
eval(expr,0). I *think* this works in S too, but I'm always a bit
confused about frames 0 and 1. There may be another approach that
works cleanly in both.

If you have need for this kind of thing in several places it would be
a good idea to abstact it out as a utility function,
prompt.for.expression say, carefully get that function right, and then
only access this facility through that function.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
206 Church Street                            email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 26 19:12:32 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 26 Jun 1998 14:12:32 -0400
Subject: all.equal
References: <199806261638.SAA00754@sophie.ethz.ch>
Message-ID: <98Jun26.143732edt.13446@mailgate.bank-banque-canada.ca>

>I don't have time to look at your new version,
>however, I *did* look at the last one and tried to replace

>However, your version wasn't good enough to "work" for  'make tests'
>[[ even after fixing the default tolerance which should be
>   changed from
>                .Machine$double.eps
>to              sqrt(.Machine$double.eps)

Martin

The version I just posted is the same as the last one (called cut three). I'm
not sure what 'make tests' is suppose to do. I just ran it and it gave me a
bunch of error messages. It also looks like it may have changed some things to
mess up my working copy of R, but I'm not sure.

If you can be more specific about how this all.equal is not good enough for
'make tests' then I will try to fix it. I'm not sure what the general wisdom is
and I realize that .Machine$double.eps is a fairly tight comparison, but I
routinely test things to tighter tolerances than sqrt(.Machine$double.eps). The
change in C libraries between Splus 3.1 and 3.2 made large cumulative
differences in some of my simulations and I never would have found the problem
if I had only been checking calculations to sqrt(.Machine$double.eps).

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun 30 09:45:38 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 30 Jun 1998 10:45:38 +0200
Subject: gl() in S -- puzzle
Message-ID: <199806300845.KAA04635@sophie.ethz.ch>

In order to run some  R examples in  S & Splus,
I want the gl() function in S.

In R, it is

gl <- function (n, k, length = n * k, labels = 1:n, ordered = FALSE) 
	factor(rep(rep(1:n, rep(k, n)), length = length), labels = labels, 
	      ordered = ordered)

Since S's  factor() has no "ordered= F" argument,
in S we need to call ordered() instead of factor() in the case of
ordered=T.

I came up with the following definition

gl <- function (n, k, length = n * k, labels = 1:n, ordered = FALSE) 
  (if(ordered) get("ordered",mode="function") else factor)(
                               rep(rep(1:n, rep(k, n)), length = length),
                               labels = labels)

which works both in R and S,
as long as you keep ordered = FALSE), e.g.

	gl(3,2,12)
	gl(2,8,32, label=c("Ctnrl","Treat"))

Then, in R (with the above definition of gl() [and with the builtin one]):

    R> gl(3,4,24, ordered=T)
     [1] 1 1 1 1 2 2 2 2 3 3 3 3 1 1 1 1 2 2 2 2 3 3 3 3
    Levels:  1 < 2 < 3 

However, in S

	S> gl(3,4,24, ordered=T)

	Error in gl: object of mode ( and length 2 used as string value: (if(ordered) get("ordered", mode = "function") else factor)
		. . .
	Dumped
	S> 

If you do

	S> rr <- (if(T) get("ordered", mode = "function") else factor)
	S> rr
is the  ordered(.) function as it should and there doesn't seem to be a
problem if I do the things in  top-level [i.e. on the command line].

---
what's the problem in S ?

Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 30 10:13:13 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Jun 1998 11:13:13 +0200
Subject: gl() in S -- puzzle
In-Reply-To: Martin Maechler's message of Tue, 30 Jun 1998 10:45:38 +0200
References: <199806300845.KAA04635@sophie.ethz.ch>
Message-ID: <x2u3536ymu.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:


> gl <- function (n, k, length = n * k, labels = 1:n, ordered = FALSE) 
>   (if(ordered) get("ordered",mode="function") else factor)(
>                                rep(rep(1:n, rep(k, n)), length = length),
>                                labels = labels)
...
> 	S> gl(3,4,24, ordered=T)
> 
> 	Error in gl: object of mode ( and length 2 used as string value: (if(ordered) get("ordered", mode = "function") else factor)
> 		. . .
...
> ---
> what's the problem in S ?

A bug, probably. It might help to eval() the if(ordered)... bit
explicitly or split the expression i two steps {FUN<-if(ordered); FUN(...)}

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 30 11:28:09 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Jun 1998 12:28:09 +0200
Subject: gl() in S -- puzzle
In-Reply-To: Martin Maechler's message of Tue, 30 Jun 1998 10:45:38 +0200
References: <199806300845.KAA04635@sophie.ethz.ch>
Message-ID: <x27m1zyyiu.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> gl <- function (n, k, length = n * k, labels = 1:n, ordered = FALSE) 
>   (if(ordered) get("ordered",mode="function") else factor)(
>                                rep(rep(1:n, rep(k, n)), length = length),
>                                labels = labels)

Tried following my own advice and it didn't work... However, after a
bit of fiddling, I realised that this boils down a bug that I've
stumbled across before:

> test<-function(sin)get("sin",mode="function") 
> test()
.Argument(, sin = )
> test(2)
[1] 2

I.e. get() is ignoring its mode= argument when used inside a function!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun 30 16:56:40 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 30 Jun 1998 17:56:40 +0200
Subject: stable / R-announce
Message-ID: <199806301556.RAA06217@sophie.ethz.ch>

Dear Philippe,
thank you for the  ``stable''  package.

I think we should include the four  probability/RNG function into
base R.
	[Maybe also the "stableglm"  part (haven't yet looked at it),
	 especially if it could be made to work with  glm() and family().]
Would this be okay with you?

All of R base follows GNU Copyleft.
But your contribution can also have your own Copyright if desired.

--------------------------

You posted to R-announce;
	R-announce autmatically ``forks'' to R-help,
	and the R-announce list proper.

For some spammer protection, I have "R-announce" only accepting postings
from its members, i.e. you must be in either 
R-help or R-announce in order to post to R-announce.

Now I see that you belong to R-help (even to R-devel)  *BUT*
not with the same e-mail with which you posted to R-announce.
You posted with the address I use above,
but you are in r-help with
	Philippe Lambert <phlamber@luc.ac.be>

That's why the mailing list software, majordomo, decided that you are *not*
part of ``R-announce'' (= R-help + R-announce proper)  and
bounced your mail...

To change this, you must re-subscribe
(unsubscribe old e-mail and subscribe new e-mail  (in 1 message if you want..)).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

