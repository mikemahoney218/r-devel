From maechler at stat.math.ethz.ch  Fri Feb  1 09:01:57 2008
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 1 Feb 2008 09:01:57 +0100
Subject: [Rd] Pb with lapply()
In-Reply-To: <971536df0801311244k33ee6f1bod0d1f496fd32c3b4@mail.gmail.com>
References: <1201803991.47a212d790acf@webmail.fhcrc.org>
	<971536df0801311033x6819be68l6e97658a3e844c96@mail.gmail.com>
	<1201808038.47a222a606da2@webmail.fhcrc.org>
	<971536df0801311244k33ee6f1bod0d1f496fd32c3b4@mail.gmail.com>
Message-ID: <18338.53749.871997.968913@stat.math.ethz.ch>

>>>>> "GaGr" == Gabor Grothendieck <ggrothendieck at gmail.com>
>>>>>     on Thu, 31 Jan 2008 15:44:26 -0500 writes:

    GaGr> I just checked and the code that previously triggered
    GaGr> the promises in lists bug seems to work now so I guess
    GaGr> it is a different problem.

*very* different indeed.

I'm replying to Herve's initial post separately
(since it's no longer cited in this thread).

Martin


From maechler at stat.math.ethz.ch  Fri Feb  1 09:50:23 2008
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 1 Feb 2008 09:50:23 +0100
Subject: [Rd] Pb with lapply()
In-Reply-To: <1201803991.47a212d790acf@webmail.fhcrc.org>
References: <1201803991.47a212d790acf@webmail.fhcrc.org>
Message-ID: <18338.56655.821827.434654@stat.math.ethz.ch>

>>>>> "HP" == Herve Pages <hpages at fhcrc.org>
>>>>>     on Thu, 31 Jan 2008 10:26:31 -0800 writes:

    HP> Hi, If needed, lapply() tries to convert its first
    HP> argument into a list before it starts doing something
    HP> with it:

    >> lapply
    HP> function (X, FUN, ...) 
    HP> {
    HP>   FUN <- match.fun(FUN)
    HP>   if (!is.vector(X) || is.object(X)) 
    HP>       X <- as.list(X)
    HP>   .Internal(lapply(X, FUN))
    HP> }

    HP> But in practice, things don't always seem to "work" as suggested by
    HP> this code (at least to the eyes of a naive user).

Yes.  That is the infamous problem of what I'd call a mental conflict
between namespaces and function-centered OOP (as in S3 or S4),
or put differently, the problem that not all R functions are
S4 generics right from the start :
 
Both lapply() and as.list() are in the base namespace.
Consequently, lapply() will always call base::as.list() and
unfortunately  base::as.list() is not becoming an S4 generic by your

    >> setClass("A", representation(data="list"))
    HP> [1] "A"
    >> setMethod("as.list", "A", function(x, ...) x at data)
    HP> Creating a new generic function for "as.list" in ".GlobalEnv"
    HP> [1] "as.list"

See: it's an S4 generic only in .GlobalEnv, but to really work
it should be an S4 generic in base.


    HP> Seems like using force() inside lapply() would solve the problem:

Well, it's not force() that makes it work,
it's the fact that you define a version of lapply outside "base"
and that of course does see your as.list() generic in .GlobalEnv ..

    HP> lapply2 <- function(X, FUN, ...)
    HP> {
    HP> FUN <- match.fun(FUN)
    HP> if (!is.vector(X) || is.object(X))
    HP> X <- force(as.list(X))
    HP> .Internal(lapply(X, FUN))
    HP> }

    HP> It works now:

    [...........]


Now one "solution" to the problem is to redefine  base::as.list()
to be your S4 generic.  Most smart useRs I know would call this
a terrible hack though...
and yes, I'm guilty of committing that hack -- inside the Matrix package, 
not for as.list() but for as.matrix():

The consequence of that is that e.g.  eigen() *does* work for
all our matrices, because eigen starts with as.matrix() and that
needs to work as a proper (i.e. S4) generic in order to work as
it should. 

A much better solution to the underlying deeper problem would be
to find a way where ___ conceptually ___ part (or all of)
'methods' would be inside of 'base', and  as.list(), as.matrix()
etc all S4 (and S3 simultaneously) generics. 
[and we have pondered of using  'base4' for that,
 which would contain part of current base and part of current methods;
 but there have been different ideas].

One workaround/solution used recently (notably for the group generics)
was to make more of these functions into
*primitive* functions with C-internal S3 and S4 method dispatch.
That maybe a desideratum for "now".

Martin Maechler, ETH Zurich (and R core team)


From Anja.Eggert at uni-rostock.de  Fri Feb  1 11:05:08 2008
From: Anja.Eggert at uni-rostock.de (Anja.Eggert at uni-rostock.de)
Date: Fri,  1 Feb 2008 11:05:08 +0100 (CET)
Subject: [Rd] pheno package (PR#10674)
Message-ID: <20080201100508.CFC482834153@mail.pubhealth.ku.dk>

Full_Name: Anja Eggert
Version: 2.4.1
OS: 
Submission from: (NULL) (139.30.70.203)


I want to install the pheno package. This is not working. What can I do?
Thank you very much,
Anja


From cori at u707.jussieu.fr  Fri Feb  1 16:20:03 2008
From: cori at u707.jussieu.fr (cori at u707.jussieu.fr)
Date: Fri,  1 Feb 2008 16:20:03 +0100 (CET)
Subject: [Rd] bug using matplot (PR#10676)
Message-ID: <20080201152003.2847B2834848@mail.pubhealth.ku.dk>

Full_Name: Anne CORI
Version: 2.6.1
OS: windows
Submission from: (NULL) (134.157.220.19)


let A be a mtrix with n lines and p columns, p>36 ;

matplot(A) will only draw the plot of the first 36 columns of A.

This is due to a bug in the definition of pch in the function : 

pch <- c(paste(c(1:9, 0)), letters)[1:k]

should be replaced by 

pch <- c(paste(c(1:9, 0)), letters)

I hope this is clear, 

All the best, 

Anne


From maechler at stat.math.ethz.ch  Fri Feb  1 18:35:24 2008
From: maechler at stat.math.ethz.ch (maechler at stat.math.ethz.ch)
Date: Fri,  1 Feb 2008 18:35:24 +0100 (CET)
Subject: [Rd] pheno package (PR#10674)
Message-ID: <20080201173524.E3B3C2834844@mail.pubhealth.ku.dk>

>>>>> "AE" == Anja Eggert <Anja.Eggert at uni-rostock.de>
>>>>>     on Fri,  1 Feb 2008 11:05:08 +0100 (CET) writes:

    AE> Full_Name: Anja Eggert
    AE> Version: 2.4.1
    AE> OS: 
    AE> Submission from: (NULL) (139.30.70.203)

    AE> I want to install the pheno package. This is not working. What can I do?

MANY things,
but definitely  *NOT*  submit a bug report!


From gavin.simpson at ucl.ac.uk  Fri Feb  1 18:51:24 2008
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Fri, 01 Feb 2008 17:51:24 +0000
Subject: [Rd] pheno package (PR#10674)
In-Reply-To: <20080201100508.CFC482834153@mail.pubhealth.ku.dk>
References: <20080201100508.CFC482834153@mail.pubhealth.ku.dk>
Message-ID: <1201888284.20085.48.camel@prometheus.geog.ucl.ac.uk>

hits=-2.6 tests=BAYES_00
X-USF-Spam-Flag: NO

On Fri, 2008-02-01 at 11:05 +0100, Anja.Eggert at uni-rostock.de wrote:
> Full_Name: Anja Eggert
> Version: 2.4.1
> OS: 
> Submission from: (NULL) (139.30.70.203)
> 
> 
> I want to install the pheno package. This is not working. What can I do?
> Thank you very much,
> Anja

Anja,

The only bug here (apparent to us anyway) is the bug in your
understanding[*see below]! Why do you think this is a bug in R? pheno is
a contributed package and *nothing* to do with R.

Please consult the posting guide
( http://www.r-project.org/posting-guide.html ). Then read section 6.3
of the R Admin and Installation manual that can be found here:
http://cran.r-project.org/doc/manuals/R-admin.html

After checking that you have followed the instructions for installing
packages correctly, paste the errors you get upon trying to install the
package into an email and send it to the maintainer of pheno, details of
whom you'll find on the CRAN web page for the pheno package.

If you fail to get an answer in a reasonable amount of time, say 1-2
weeks, only then try sending the message to R-Help, stating *all* the
relevant information that the posting guide asks you to. Do *not* file a
bug against R unless you know for certain that the reason the package
won't install is due to a problem with R.

For starters, try updating your version of R (2.4.1 is very old - we are
on 2.6.1 with 2.6.2 due any day now) and then try to install the package
again.

G

[*] You are likely to get emails from annoyed people because by filing a
totally inappropriate bug report you've just caused an amount of
unnecessary work for someone in the R Core Development Team who will
have to go in and remove your erroneous bug. Given that they give their
time for free you can understand they might be a bit miffed that you
appear to have failed to heed any of the advice and requests in the
posting guide and instructions on what is and is not a bug in R from the
FAQ.

-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
 Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
 ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
 Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
 Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
 UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From gavin.simpson at ucl.ac.uk  Fri Feb  1 19:08:54 2008
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Fri, 01 Feb 2008 18:08:54 +0000
Subject: [Rd] bug using matplot (PR#10676)
In-Reply-To: <20080201152003.2847B2834848@mail.pubhealth.ku.dk>
References: <20080201152003.2847B2834848@mail.pubhealth.ku.dk>
Message-ID: <1201889334.20085.62.camel@prometheus.geog.ucl.ac.uk>

hits=-2.6 tests=BAYES_00
X-USF-Spam-Flag: NO

On Fri, 2008-02-01 at 16:20 +0100, cori at u707.jussieu.fr wrote:
> Full_Name: Anne CORI
> Version: 2.6.1
> OS: windows
> Submission from: (NULL) (134.157.220.19)
> 
> 
> let A be a mtrix with n lines and p columns, p>36 ;
> 
> matplot(A) will only draw the plot of the first 36 columns of A.
> 
> This is due to a bug in the definition of pch in the function : 
> 
> pch <- c(paste(c(1:9, 0)), letters)[1:k]

You need this here, the issue is that the default is only length 36 and
you aren't warned if you have more variables than that *if* you rely
upon the default and don't specify pch in you call to matplot.

This works fine for example:

dat <- matrix(rnorm(400), ncol = 40)
matplot(dat, pch = c(paste(1:9, 0, letters, LETTERS)))

> 
> should be replaced by 
> 
> pch <- c(paste(c(1:9, 0)), letters)

That won't help. The vector, pch, will get recycled so you won't be able
to tell the difference between vars 1,2,3 etc and 37,38,39 etc. (See the
series of if(length(.....) < k) statements towards the end of the
function definition for matplot.

This is working as documented, although one might consider it an
infelicity in the implementation that it doesn't warn you that k is > 36
and suggest you pass your own set of plotting characters.

G

> 
> I hope this is clear, 
> 
> All the best, 
> 
> Anne
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
 Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
 ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
 Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
 Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
 UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From maechler at stat.math.ethz.ch  Sat Feb  2 13:00:32 2008
From: maechler at stat.math.ethz.ch (maechler at stat.math.ethz.ch)
Date: Sat,  2 Feb 2008 13:00:32 +0100 (CET)
Subject: [Rd] bug using matplot (PR#10676)
Message-ID: <20080202120032.A4902283484B@mail.pubhealth.ku.dk>

>>>>> "GS" == Gavin Simpson <gavin.simpson at ucl.ac.uk>
>>>>>     on Fri, 01 Feb 2008 18:08:54 +0000 writes:

    GS> On Fri, 2008-02-01 at 16:20 +0100, cori at u707.jussieu.fr
    GS> wrote:
    >> Full_Name: Anne CORI Version: 2.6.1 OS: windows
    >> Submission from: (NULL) (134.157.220.19)
    >> 
    >> 
    >> let A be a mtrix with n lines and p columns, p>36 ;
    >> 
    >> matplot(A) will only draw the plot of the first 36
    >> columns of A.
    >> 
    >> This is due to a bug in the definition of pch in the
    >> function :
    >> 
    >> pch <- c(paste(c(1:9, 0)), letters)[1:k]

    GS> You need this here,

actually not (anymore; porbably it *was* needed in amuch older
version of R),
because of the later  rep(u, length.out=k) which also works when
u is longer than k

    GS> the issue is that the default is only length 36 and you
    GS> aren't warned if you have more variables than that *if*
    GS> you rely upon the default and don't specify pch in you
    GS> call to matplot.

    GS> This works fine for example:

    GS> dat <- matrix(rnorm(400), ncol = 40) 
    GS> matplot(dat, pch = c(paste(1:9, 0, letters, LETTERS)))

yes.

    >> should be replaced by
    >> 
    >> pch <- c(paste(c(1:9, 0)), letters)

    GS> That won't help.

well, it does help insofar as columns (>= 37) are then plotted
at all.

But you are right about this :

    GS>  The vector, pch, will get recycled so
    GS> you won't be able to tell the difference between vars
    GS> 1,2,3 etc and 37,38,39 etc. (See the series of
    GS> if(length(.....) < k) statements towards the end of the
    GS> function definition for matplot.

    GS> This is working as documented, although one might
    GS> consider it an infelicity in the implementation that it
    GS> doesn't warn you that k is > 36 and suggest you pass
    GS> your own set of plotting characters.

yes.

I do agree with Anne that there is a bug.
Following Gavin (and Anne, too),
I'm proposing to do the following :

1) recycle pch when it's too short;  this already happens for
  user specified pch, so should also happen for the default pch.

2) warn then the default pch is too short (and hence recycled by
   "1)"), I wouldn't add an explicit suggestion to use your own.

   My current working proposal would say

 >>   Warning message:
 >>   In matplot(1:100, m, type = "o") :
 >>     default 'pch' is smaller than number of columns and hence recycled

   and the useR  would understand that she can specify her
   own pch, right?


3) extend the default pch to include LETTERS, i.e., to  
   c(1:9,0, letters, LETTERS)

Thanks to Anne and Gavin for the report and analysis!

Martin


From ben.hansen at umich.edu  Sat Feb  2 00:35:03 2008
From: ben.hansen at umich.edu (ben.hansen at umich.edu)
Date: Sat,  2 Feb 2008 00:35:03 +0100 (CET)
Subject: [Rd] argument order for Math2 group functions in R 2.6.x (PR#10679)
Message-ID: <20080201233503.ABD1E2834632@mail.pubhealth.ku.dk>

Full_Name: Ben Hansen
Version: 2.6.1
OS: Windows
Submission from: (NULL) (66.93.3.101)


Hi, 

In R 2.6.0 or 2.6.1 on Windows, I get the following upon opening the GUI (no
previous commands or special settings):
> signif(digits=4, x=1/3)
[1] 4

It seems to be taking 4 to be the "x" argument, the number to be rounded. 
However, my understanding (perhaps mistaken) was that it should respond as
follows:
> signif(digits=4, x=1/3)
[1] 0.3333

(This last is what I get from R 2.5.0 running on the same machine, and what I'm
used to getting using earlier versions.)  Similar things happen with round().

I haven't yet had the opportunity to investigate whether I'd see the same
behavior on other platforms.  

Best wishes,
Ben


From jfox at mcmaster.ca  Sat Feb  2 15:32:19 2008
From: jfox at mcmaster.ca (John Fox)
Date: Sat, 02 Feb 2008 09:32:19 -0500
Subject: [Rd] argument order for Math2 group functions in R 2.6.x
 (PR#10679)
In-Reply-To: <20080201233503.ABD1E2834632@mail.pubhealth.ku.dk>
References: <20080201233503.ABD1E2834632@mail.pubhealth.ku.dk>
Message-ID: <web-199992018@cgpsrv2.cis.mcmaster.ca>

NO

Dear Ben,

If you take a look at the definition of signif() in R 2.6.1 and, e.g.,
in R 2.5.1 you'll see the source of the problem:

R 2.6.1:

> signif
function (x, digits = 6)  .Primitive("signif")

R 2.5.1:

> signif
function (x, digits = 6) 
.Internal(signif(x, digits))
<environment: namespace:base>

>From ?Primitive:

"The advantage of .Primitive over .Internal functions is the potential
efficiency of argument passing. However, this is done by ignoring
argument names and using positional matching of arguments (unless
arranged differently for specific primitives such as rep), so this is
discouraged for functions of more than one argument."

I guess that in recoding signif() for efficiency, the warning about
multiple arguments was ignored.

Regards,
 John

On Sat,  2 Feb 2008 00:35:03 +0100 (CET)
 ben.hansen at umich.edu wrote:
> Full_Name: Ben Hansen
> Version: 2.6.1
> OS: Windows
> Submission from: (NULL) (66.93.3.101)
> 
> 
> Hi, 
> 
> In R 2.6.0 or 2.6.1 on Windows, I get the following upon opening the
> GUI (no
> previous commands or special settings):
> > signif(digits=4, x=1/3)
> [1] 4
> 
> It seems to be taking 4 to be the "x" argument, the number to be
> rounded. 
> However, my understanding (perhaps mistaken) was that it should
> respond as
> follows:
> > signif(digits=4, x=1/3)
> [1] 0.3333
> 
> (This last is what I get from R 2.5.0 running on the same machine,
> and what I'm
> used to getting using earlier versions.)  Similar things happen with
> round().
> 
> I haven't yet had the opportunity to investigate whether I'd see the
> same
> behavior on other platforms.  
> 
> Best wishes,
> Ben
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

--------------------------------
John Fox, Professor
Department of Sociology
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/


From jfox at mcmaster.ca  Sat Feb  2 15:35:08 2008
From: jfox at mcmaster.ca (jfox at mcmaster.ca)
Date: Sat,  2 Feb 2008 15:35:08 +0100 (CET)
Subject: [Rd] argument order for Math2 group functions in R 2.6.x
	(PR#10681)
Message-ID: <20080202143508.D10DA283416B@mail.pubhealth.ku.dk>

Dear Ben,

If you take a look at the definition of signif() in R 2.6.1 and, e.g.,
in R 2.5.1 you'll see the source of the problem:

R 2.6.1:

> signif
function (x, digits = 6)  .Primitive("signif")

R 2.5.1:

> signif
function (x, digits = 6) 
.Internal(signif(x, digits))
<environment: namespace:base>

>From ?Primitive:

"The advantage of .Primitive over .Internal functions is the potential
efficiency of argument passing. However, this is done by ignoring
argument names and using positional matching of arguments (unless
arranged differently for specific primitives such as rep), so this is
discouraged for functions of more than one argument."

I guess that in recoding signif() for efficiency, the warning about
multiple arguments was ignored.

Regards,
 John

On Sat,  2 Feb 2008 00:35:03 +0100 (CET)
 ben.hansen at umich.edu wrote:
> Full_Name: Ben Hansen
> Version: 2.6.1
> OS: Windows
> Submission from: (NULL) (66.93.3.101)
> 
> 
> Hi, 
> 
> In R 2.6.0 or 2.6.1 on Windows, I get the following upon opening the
> GUI (no
> previous commands or special settings):
> > signif(digits=4, x=1/3)
> [1] 4
> 
> It seems to be taking 4 to be the "x" argument, the number to be
> rounded. 
> However, my understanding (perhaps mistaken) was that it should
> respond as
> follows:
> > signif(digits=4, x=1/3)
> [1] 0.3333
> 
> (This last is what I get from R 2.5.0 running on the same machine,
> and what I'm
> used to getting using earlier versions.)  Similar things happen with
> round().
> 
> I haven't yet had the opportunity to investigate whether I'd see the
> same
> behavior on other platforms.  
> 
> Best wishes,
> Ben
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

--------------------------------
John Fox, Professor
Department of Sociology
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/


From ripley at stats.ox.ac.uk  Sat Feb  2 18:45:19 2008
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Sat,  2 Feb 2008 18:45:19 +0100 (CET)
Subject: [Rd] argument order for Math2 group functions in R 2.6.x
	(PR#10683)
Message-ID: <20080202174519.3769E283416B@mail.pubhealth.ku.dk>

signif() is primitive in 2.6.x, and so uses positional matching (almost 
all primitives do).

See the NEWS file for the announcement of the change.


On Sat, 2 Feb 2008, ben.hansen at umich.edu wrote:

> Full_Name: Ben Hansen
> Version: 2.6.1
> OS: Windows
> Submission from: (NULL) (66.93.3.101)
>
>
> Hi,
>
> In R 2.6.0 or 2.6.1 on Windows, I get the following upon opening the GUI (no
> previous commands or special settings):
>> signif(digits=4, x=1/3)
> [1] 4
>
> It seems to be taking 4 to be the "x" argument, the number to be rounded.
> However, my understanding (perhaps mistaken) was that it should respond as
> follows:
>> signif(digits=4, x=1/3)
> [1] 0.3333
>
> (This last is what I get from R 2.5.0 running on the same machine, and what I'm
> used to getting using earlier versions.)  Similar things happen with round().
>
> I haven't yet had the opportunity to investigate whether I'd see the same
> behavior on other platforms.
>
> Best wishes,
> Ben
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From vapniks at yahoo.com  Sun Feb  3 02:08:51 2008
From: vapniks at yahoo.com (Joe Bloggs)
Date: Sun, 03 Feb 2008 01:08:51 +0000
Subject: [Rd] gdb
Message-ID: <871w7ualss.fsf@DEBLAP1.BeNet>

I am using gdb to debug a c++ library I made for R using Rcpp.
However, when I step through the code it seems to go all over the place, and some of the variables have been optimized out so I can't see their values.
How can I compile without optimization?
Also, is there any neat way to run R with gdb through emacs?
Thanks.


From jfox at mcmaster.ca  Sun Feb  3 16:04:19 2008
From: jfox at mcmaster.ca (John Fox)
Date: Sun, 3 Feb 2008 10:04:19 -0500
Subject: [Rd] argument order for Math2 group functions in R
	2.6.x	(PR#10683)
In-Reply-To: <20080202174519.3769E283416B@mail.pubhealth.ku.dk>
References: <20080202174519.3769E283416B@mail.pubhealth.ku.dk>
Message-ID: <003301c86676$0d1b82e0$275288a0$@ca>

Dear Brian,

Are there many primitives that take more than one argument? I see, for
example, that round() is another. Might it not be a good idea to provide a
warning in the help file(s) that arguments must be supplied in the correct
order?

Regards,
 John


> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-
> project.org] On Behalf Of ripley at stats.ox.ac.uk
> Sent: February-02-08 12:45 PM
> To: r-devel at stat.math.ethz.ch
> Cc: R-bugs at biostat.ku.dk
> Subject: Re: [Rd] argument order for Math2 group functions in R 2.6.x
> (PR#10683)
> 
> signif() is primitive in 2.6.x, and so uses positional matching (almost
> all primitives do).
> 
> See the NEWS file for the announcement of the change.
> 
> 
> On Sat, 2 Feb 2008, ben.hansen at umich.edu wrote:
> 
> > Full_Name: Ben Hansen
> > Version: 2.6.1
> > OS: Windows
> > Submission from: (NULL) (66.93.3.101)
> >
> >
> > Hi,
> >
> > In R 2.6.0 or 2.6.1 on Windows, I get the following upon opening the
> GUI (no
> > previous commands or special settings):
> >> signif(digits=4, x=1/3)
> > [1] 4
> >
> > It seems to be taking 4 to be the "x" argument, the number to be
> rounded.
> > However, my understanding (perhaps mistaken) was that it should
> respond as
> > follows:
> >> signif(digits=4, x=1/3)
> > [1] 0.3333
> >
> > (This last is what I get from R 2.5.0 running on the same machine,
> and what I'm
> > used to getting using earlier versions.)  Similar things happen with
> round().
> >
> > I haven't yet had the opportunity to investigate whether I'd see the
> same
> > behavior on other platforms.
> >
> > Best wishes,
> > Ben
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> 
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From jfox at mcmaster.ca  Sun Feb  3 16:05:15 2008
From: jfox at mcmaster.ca (jfox at mcmaster.ca)
Date: Sun,  3 Feb 2008 16:05:15 +0100 (CET)
Subject: [Rd] argument order for Math2 group functions in R
	2.6.x	(PR#10683)
Message-ID: <20080203150515.6F43A282EF48@mail.pubhealth.ku.dk>

Dear Brian,

Are there many primitives that take more than one argument? I see, for
example, that round() is another. Might it not be a good idea to provide a
warning in the help file(s) that arguments must be supplied in the correct
order?

Regards,
 John


> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-
> project.org] On Behalf Of ripley at stats.ox.ac.uk
> Sent: February-02-08 12:45 PM
> To: r-devel at stat.math.ethz.ch
> Cc: R-bugs at biostat.ku.dk
> Subject: Re: [Rd] argument order for Math2 group functions in R 2.6.x
> (PR#10683)
> 
> signif() is primitive in 2.6.x, and so uses positional matching (almost
> all primitives do).
> 
> See the NEWS file for the announcement of the change.
> 
> 
> On Sat, 2 Feb 2008, ben.hansen at umich.edu wrote:
> 
> > Full_Name: Ben Hansen
> > Version: 2.6.1
> > OS: Windows
> > Submission from: (NULL) (66.93.3.101)
> >
> >
> > Hi,
> >
> > In R 2.6.0 or 2.6.1 on Windows, I get the following upon opening the
> GUI (no
> > previous commands or special settings):
> >> signif(digits=4, x=1/3)
> > [1] 4
> >
> > It seems to be taking 4 to be the "x" argument, the number to be
> rounded.
> > However, my understanding (perhaps mistaken) was that it should
> respond as
> > follows:
> >> signif(digits=4, x=1/3)
> > [1] 0.3333
> >
> > (This last is what I get from R 2.5.0 running on the same machine,
> and what I'm
> > used to getting using earlier versions.)  Similar things happen with
> round().
> >
> > I haven't yet had the opportunity to investigate whether I'd see the
> same
> > behavior on other platforms.
> >
> > Best wishes,
> > Ben
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> 
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From edd at debian.org  Sun Feb  3 17:04:14 2008
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 3 Feb 2008 10:04:14 -0600
Subject: [Rd] gdb
In-Reply-To: <871w7ualss.fsf@DEBLAP1.BeNet>
References: <871w7ualss.fsf@DEBLAP1.BeNet>
Message-ID: <18341.58878.423585.780727@ron.nulle.part>


On 3 February 2008 at 01:08, Joe Bloggs wrote:
| I am using gdb to debug a c++ library I made for R using Rcpp.
| However, when I step through the code it seems to go all over the place, and some of the variables have been optimized out so I can't see their values.
| How can I compile without optimization?

Set MAKEFLAGS accordingly, possibly by editing R's Makeconf.  This is
documented in the 'R Extensions' manual.

| Also, is there any neat way to run R with gdb through emacs?

Yes, using 'M-x gdb' to launcg the gdb frontend. I also use ddd on Linux.

Using the debugger is also described in the 'R Extensions' manual.

Hope this helps, Dirk

-- 
Three out of two people have difficulties with fractions.


From ripley at stats.ox.ac.uk  Sun Feb  3 17:08:27 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 3 Feb 2008 16:08:27 +0000 (GMT)
Subject: [Rd] argument order for Math2 group functions in R 2.6.x
	(PR#10683)
In-Reply-To: <003301c86676$0d1b82e0$275288a0$@ca>
References: <20080202174519.3769E283416B@mail.pubhealth.ku.dk>
	<003301c86676$0d1b82e0$275288a0$@ca>
Message-ID: <Pine.LNX.4.64.0802031605390.358@auk.stats>

On Sun, 3 Feb 2008, John Fox wrote:

> Dear Brian,
>
> Are there many primitives that take more than one argument?

Quite a few: see the list in the 'R Internals' manual.  But most involve 
'...' .

> I see, for example, that round() is another. Might it not be a good idea 
> to provide a warning in the help file(s) that arguments must be supplied 
> in the correct order?

You mean as in

      All except 'zapsmall' are primitive, so positional argument
      matching is used for the default methods of 'round' and 'signif'.

in 2.6.2 RC?

Brian


>
> Regards,
> John
>
>
>> -----Original Message-----
>> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-
>> project.org] On Behalf Of ripley at stats.ox.ac.uk
>> Sent: February-02-08 12:45 PM
>> To: r-devel at stat.math.ethz.ch
>> Cc: R-bugs at biostat.ku.dk
>> Subject: Re: [Rd] argument order for Math2 group functions in R 2.6.x
>> (PR#10683)
>>
>> signif() is primitive in 2.6.x, and so uses positional matching (almost
>> all primitives do).
>>
>> See the NEWS file for the announcement of the change.
>>
>>
>> On Sat, 2 Feb 2008, ben.hansen at umich.edu wrote:
>>
>>> Full_Name: Ben Hansen
>>> Version: 2.6.1
>>> OS: Windows
>>> Submission from: (NULL) (66.93.3.101)
>>>
>>>
>>> Hi,
>>>
>>> In R 2.6.0 or 2.6.1 on Windows, I get the following upon opening the
>> GUI (no
>>> previous commands or special settings):
>>>> signif(digits=4, x=1/3)
>>> [1] 4
>>>
>>> It seems to be taking 4 to be the "x" argument, the number to be
>> rounded.
>>> However, my understanding (perhaps mistaken) was that it should
>> respond as
>>> follows:
>>>> signif(digits=4, x=1/3)
>>> [1] 0.3333
>>>
>>> (This last is what I get from R 2.5.0 running on the same machine,
>> and what I'm
>>> used to getting using earlier versions.)  Similar things happen with
>> round().
>>>
>>> I haven't yet had the opportunity to investigate whether I'd see the
>> same
>>> behavior on other platforms.
>>>
>>> Best wishes,
>>> Ben
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>> --
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From vapniks at yahoo.com  Mon Feb  4 02:51:35 2008
From: vapniks at yahoo.com (Joe Bloggs)
Date: Mon, 04 Feb 2008 01:51:35 +0000
Subject: [Rd] gdb
References: <871w7ualss.fsf@DEBLAP1.BeNet>
	<18341.58878.423585.780727@ron.nulle.part>
Message-ID: <878x21cwuw.fsf@DEBLAP1.BeNet>

Dirk Eddelbuettel <edd at debian.org> writes:

> On 3 February 2008 at 01:08, Joe Bloggs wrote:
> | I am using gdb to debug a c++ library I made for R using Rcpp.
> | However, when I step through the code it seems to go all over the place, and some of the variables have been optimized out so I can't see their values.
> | How can I compile without optimization?
>
> Set MAKEFLAGS accordingly, possibly by editing R's Makeconf.  This is
> documented in the 'R Extensions' manual.
>

Thanks, for the benefit of others..

I changed the CXXFLAGS line in /etc/R/Makeconf from:

CXXFLAGS = -g -O2

to:

CXXFLAGS = -ggdb -O2

which seems to work. Changing -O2 to just -O would remove compiler optimizations, but it turns out this wasn't necessary.
Alternatively I could compile my package with

MAKEFLAGS="CXXFLAGS=-ggdb -O2" R CMD INSTALL ...

to temporarily change the flags.


> | Also, is there any neat way to run R with gdb through emacs?
>
> Yes, using 'M-x gdb' to launcg the gdb frontend. I also use ddd on Linux.
>
> Using the debugger is also described in the 'R Extensions' manual.
>

In the manual it says to run R through gdb by: R -d gdb
how can I do this in emacs?
Alternatively how do I run R through gdb after alreay starting gdb?

> Hope this helps, Dirk
>
> -- 
> Three out of two people have difficulties with fractions.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From edd at debian.org  Mon Feb  4 03:22:30 2008
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 3 Feb 2008 20:22:30 -0600
Subject: [Rd] gdb
In-Reply-To: <878x21cwuw.fsf@DEBLAP1.BeNet>
References: <871w7ualss.fsf@DEBLAP1.BeNet>
	<18341.58878.423585.780727@ron.nulle.part>
	<878x21cwuw.fsf@DEBLAP1.BeNet>
Message-ID: <18342.30438.828619.519320@ron.nulle.part>


On 4 February 2008 at 01:51, Joe Bloggs wrote:
| Dirk Eddelbuettel <edd at debian.org> writes:
| 
| > On 3 February 2008 at 01:08, Joe Bloggs wrote:
| > | I am using gdb to debug a c++ library I made for R using Rcpp.
| > | However, when I step through the code it seems to go all over the place, and some of the variables have been optimized out so I can't see their values.
| > | How can I compile without optimization?
| >
| > Set MAKEFLAGS accordingly, possibly by editing R's Makeconf.  This is
| > documented in the 'R Extensions' manual.
| >
| 
| Thanks, for the benefit of others..
| 
| I changed the CXXFLAGS line in /etc/R/Makeconf from:
| 
| CXXFLAGS = -g -O2
| 
| to:
| 
| CXXFLAGS = -ggdb -O2

Hm, I never seem to have needed -ggdb, for me -g was usually suffcient. Any
idea why you needed -ggdb ?
 
| which seems to work. Changing -O2 to just -O would remove compiler optimizations, but it turns out this wasn't necessary.
| Alternatively I could compile my package with
| 
| MAKEFLAGS="CXXFLAGS=-ggdb -O2" R CMD INSTALL ...
| 
| to temporarily change the flags.
| 
| 
| > | Also, is there any neat way to run R with gdb through emacs?
| >
| > Yes, using 'M-x gdb' to launcg the gdb frontend. I also use ddd on Linux.
| >
| > Using the debugger is also described in the 'R Extensions' manual.
| >
| 
| In the manual it says to run R through gdb by: R -d gdb
| how can I do this in emacs?
| Alternatively how do I run R through gdb after alreay starting gdb?

I thought that was in the manual, but it seems it isn't.  Doug Bates
describes it once or twice a few years back; one quick Google search leads to

	http://tolstoy.newcastle.edu.au/R/help/03a/0566.html

Hope this helps, Dirk

| 
| > Hope this helps, Dirk
| >
| > -- 
| > Three out of two people have difficulties with fractions.
| >
| > ______________________________________________
| > R-devel at r-project.org mailing list
| > https://stat.ethz.ch/mailman/listinfo/r-devel
| 
| ______________________________________________
| R-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Three out of two people have difficulties with fractions.


From maechler at stat.math.ethz.ch  Mon Feb  4 09:57:41 2008
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 4 Feb 2008 09:57:41 +0100
Subject: [Rd] gdb
In-Reply-To: <18342.30438.828619.519320@ron.nulle.part>
References: <871w7ualss.fsf@DEBLAP1.BeNet>
	<18341.58878.423585.780727@ron.nulle.part>
	<878x21cwuw.fsf@DEBLAP1.BeNet>
	<18342.30438.828619.519320@ron.nulle.part>
Message-ID: <18342.54149.107916.215412@deb2.ethz.ch>

>>>>> "DE" == Dirk Eddelbuettel <edd at debian.org>
>>>>>     on Sun, 3 Feb 2008 20:22:30 -0600 writes:

    DE> On 4 February 2008 at 01:51, Joe Bloggs wrote:
    DE> | Dirk Eddelbuettel <edd at debian.org> writes:
    DE> | 
    DE> | > On 3 February 2008 at 01:08, Joe Bloggs wrote:
    DE> | > | I am using gdb to debug a c++ library I made for R using Rcpp.
    DE> | > | However, when I step through the code it seems to go all over the place, and some of the variables have been optimized out so I can't see their values.
    DE> | > | How can I compile without optimization?
    DE> | >
    DE> | > Set MAKEFLAGS accordingly, possibly by editing R's Makeconf.  This is
    DE> | > documented in the 'R Extensions' manual.
    DE> | >
    DE> | 
    DE> | Thanks, for the benefit of others..
    DE> | 
    DE> | I changed the CXXFLAGS line in /etc/R/Makeconf from:
    DE> | 
    DE> | CXXFLAGS = -g -O2
    DE> | 
    DE> | to:
    DE> | 
    DE> | CXXFLAGS = -ggdb -O2

    DE> Hm, I never seem to have needed -ggdb, for me -g was usually suffcient. Any
    DE> idea why you needed -ggdb ?
 
    DE> | which seems to work. Changing -O2 to just -O would remove compiler optimizations, but it turns out this wasn't necessary.
    DE> | Alternatively I could compile my package with
    DE> | 
    DE> | MAKEFLAGS="CXXFLAGS=-ggdb -O2" R CMD INSTALL ...
    DE> | 
    DE> | to temporarily change the flags.
    DE> | 
    DE> | 
    DE> | > | Also, is there any neat way to run R with gdb through emacs?
    DE> | >
    DE> | > Yes, using 'M-x gdb' to launcg the gdb frontend. I also use ddd on Linux.
    DE> | >
    DE> | > Using the debugger is also described in the 'R Extensions' manual.
    DE> | >
    DE> | 
    DE> | In the manual it says to run R through gdb by: R -d gdb
    DE> | how can I do this in emacs?

C-u M-x R [Enter] -d gdb [Enter]
===

C-u: == Emacs "Prefix" 
        allows you to specify command line arguments to R



    DE> | Alternatively how do I run R through gdb after alreay starting gdb?

    DE> I thought that was in the manual, but it seems it isn't.  Doug Bates
    DE> describes it once or twice a few years back; one quick Google search leads to

    DE> http://tolstoy.newcastle.edu.au/R/help/03a/0566.html



    DE> Hope this helps, Dirk


From vapniks at yahoo.com  Mon Feb  4 13:56:26 2008
From: vapniks at yahoo.com (Joe Bloggs)
Date: Mon, 04 Feb 2008 12:56:26 +0000
Subject: [Rd] gdb
References: <871w7ualss.fsf@DEBLAP1.BeNet>
	<18341.58878.423585.780727@ron.nulle.part>
	<878x21cwuw.fsf@DEBLAP1.BeNet>
	<18342.30438.828619.519320@ron.nulle.part>
Message-ID: <87fxw8q3r9.fsf@DEBLAP1.BeNet>

>Dirk Eddelbuettel <edd at debian.org> writes:
>
> On 4 February 2008 at 01:51, Joe Bloggs wrote:
> | Dirk Eddelbuettel <edd at debian.org> writes:
> | 
> | > On 3 February 2008 at 01:08, Joe Bloggs wrote:
> | > | I am using gdb to debug a c++ library I made for R using Rcpp.
> | > | However, when I step through the code it seems to go all over the place, and some of the variables have been optimized out so I can't see their values.
> | > | How can I compile without optimization?
> | >
> | > Set MAKEFLAGS accordingly, possibly by editing R's Makeconf.  This is
> | > documented in the 'R Extensions' manual.
> | >
> | 
> | Thanks, for the benefit of others..
> | 
> | I changed the CXXFLAGS line in /etc/R/Makeconf from:
> | 
> | CXXFLAGS = -g -O2
> | 
> | to:
> | 
> | CXXFLAGS = -ggdb -O2
>
> Hm, I never seem to have needed -ggdb, for me -g was usually suffcient. Any
> idea why you needed -ggdb ?
> 
> | which seems to work. Changing -O2 to just -O would remove compiler optimizations, but it turns out this wasn't necessary.

Oops, sorry, I must have made a mistake. Tried it again this morning and realize that I do need to remove compiler optimizations. So probably -g will work just as well as -ggdb, but -O is needed instead of -O2.

> | Alternatively I could compile my package with
> | 
> | MAKEFLAGS="CXXFLAGS=-ggdb -O2" R CMD INSTALL ...
> | 
> | to temporarily change the flags.
> | 
> | 
> | > | Also, is there any neat way to run R with gdb through emacs?
> | >
> | > Yes, using 'M-x gdb' to launcg the gdb frontend. I also use ddd on Linux.
> | >
> | > Using the debugger is also described in the 'R Extensions' manual.
> | >
> | 
> | In the manual it says to run R through gdb by: R -d gdb
> | how can I do this in emacs?
> | Alternatively how do I run R through gdb after alreay starting gdb?
>
> I thought that was in the manual, but it seems it isn't.  Doug Bates
> describes it once or twice a few years back; one quick Google search leads to
>
> 	http://tolstoy.newcastle.edu.au/R/help/03a/0566.html
>
> Hope this helps, Dirk
>

Thanks for the link, I also found this: 
http://cran.r-project.org/doc/FAQ/R-FAQ.html#Debugging-R-from-within-Emacs
(should have checked earlier!)
However, I can't seem to get both R & gdb working together in emacs. 
I start R in emacs, load the library to be debugged, then start gdb in emacs, attach it to the R process, set the breakpoint, type "signal 0" in gdb to let R take control, then run the R function I am debugging and... emacs hangs up on me :(

I can get it to work if I run R in a seperate shell, and run gdb from emacs, attaching it to the R process as before. 
If I also load the source for the package I'm debugging then it also shows me whereabouts in that file I am which is very nice.
 
> | 
> | > Hope this helps, Dirk
> | >
> | > -- 
> | > Three out of two people have difficulties with fractions.
> | >
> | > ______________________________________________
> | > R-devel at r-project.org mailing list
> | > https://stat.ethz.ch/mailman/listinfo/r-devel
> | 
> | ______________________________________________
> | R-devel at r-project.org mailing list
> | https://stat.ethz.ch/mailman/listinfo/r-devel
>
> -- 
> Three out of two people have difficulties with fractions.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From r.hankin at noc.soton.ac.uk  Mon Feb  4 15:25:49 2008
From: r.hankin at noc.soton.ac.uk (Robin Hankin)
Date: Mon, 4 Feb 2008 14:25:49 +0000
Subject: [Rd] a != a*1  != a+0 != +a
Message-ID: <AE7B33FB-AFBC-40BD-9503-5C25ACFD4E23@noc.soton.ac.uk>

hits=1.0 tests=MANY_EXCLAMATIONS
X-USF-Spam-Flag: NO

Hi

I am writing a package for multivariate polynomials ('multipols')
using S3 methods.

The package includes a Ops.multipol()  function for the
arithmetic methods;  I would like
to define some sort of user-specified Boolean option which, if
set,  would force results to be simplified as they are produced.

Call this option "trim".  Trimming a multipol results in
a smaller array that is more manageable.

Mostly one wants to trim, sometimes not.


Would options() be a good way to manage this?

One issue is the behaviour of unary operators "+" and "-".

If trim is TRUE, then  "a"   is one thing,  but "+a"  returns
"trim(a)", which might be different.

Also "1*a" would be different from "a" and "a+0"



Does the List consider this to be Good Practice?

Has anyone got comments?



--
Robin Hankin
Uncertainty Analyst and Neutral Theorist,
National Oceanography Centre, Southampton
European Way, Southampton SO14 3ZH, UK
  tel  023-8059-7743


From ari at ciet.org  Mon Feb  4 11:20:06 2008
From: ari at ciet.org (ari at ciet.org)
Date: Mon,  4 Feb 2008 11:20:06 +0100 (CET)
Subject: [Rd] Error in La.svd(x, nu,
	nv) : error code 1 from Lapack routine 'dgesdd' (PR#10694)
Message-ID: <20080204102006.CFAF52834611@mail.pubhealth.ku.dk>

Full_Name: A Ho-Foster
Version: R 2.6.1
OS: Win XP Home
Submission from: (NULL) (168.167.180.199)


Hi 

I am using a package called Amelia, and it gives this error while it is
performing  bootstrapping:

     Error in La.svd(x, nu, nv) : error code 1 from Lapack routine 'dgesdd'

I have consulted Amelia archives, and users have commented it is an issue with
R, to do with optimising commands. They suggest I can try executing the same
commands on an installation of R on another machine. 

I have tried three different machines, and encounter the same error. I do not
have any machines running anything other than Win XP, so I am now looking for
another strategy for overcoming this error. 

Is there anyone familiar with Lapack that might be able to assist?


Any assistance would be greatly appreciated.

Ari.


From donaldcallen at gmail.com  Mon Feb  4 14:55:12 2008
From: donaldcallen at gmail.com (donaldcallen at gmail.com)
Date: Mon,  4 Feb 2008 14:55:12 +0100 (CET)
Subject: [Rd] strftime fails on POSIXct objects (PR#10695)
Message-ID: <20080204135512.48ED7283416A@mail.pubhealth.ku.dk>

R 2.6.1 on a Thinkpad T60 running up-to-date Gentoo:

Despite the documentation, which says:

     'strftime' is an alias for 'format.POSIXlt', and 'format.POSIXct'
     first converts to class '"POSIXlt"' by calling 'as.POSIXlt'.  Note
     that only that conversion depends on the time zone.

strftime fails on POSIXct objects:

> foo <- as.POSIXct(strptime(x='2007-09-22', format='%Y-%m-%d'))
> strftime(x=foo, format='%Y-%m-%d')
Error in strftime(x = foo, format = "%Y-%m-%d") : wrong class

It's pretty clear why, given the first two lines of the function:
> strftime
function (x, format = "", usetz = FALSE, ...)
{
    if (!inherits(x, "POSIXlt"))
        stop("wrong class")
    if (format == "") {
        times <- unlist(unclass(x)[1:3])
        secs <- x$sec
        secs <- secs[!is.na(secs)]
        np <- getOption("digits.secs")
        if (is.null(np))
            np <- 0
        else np <- min(6, np)
        if (np >= 1) {
            for (i in (1:np) - 1) if (all(abs(secs - round(secs,
                i)) < 1e-06)) {
                np <- i
                break
            }
        }
        format <- if (all(times[!is.na(times)] == 0))
            "%Y-%m-%d"
        else if (np == 0)
            "%Y-%m-%d %H:%M:%S"
        else paste("%Y-%m-%d %H:%M:%OS", np, sep = "")
    }
    .Internal(format.POSIXlt(x, format, usetz))
}
<environment: namespace:base>
>

/Don Allen


From P.Dalgaard at biostat.ku.dk  Mon Feb  4 15:49:47 2008
From: P.Dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Mon, 04 Feb 2008 15:49:47 +0100
Subject: [Rd] strftime fails on POSIXct objects (PR#10695)
In-Reply-To: <20080204135512.48ED7283416A@mail.pubhealth.ku.dk>
References: <20080204135512.48ED7283416A@mail.pubhealth.ku.dk>
Message-ID: <47A7260B.6070702@biostat.ku.dk>

donaldcallen at gmail.com wrote:
> R 2.6.1 on a Thinkpad T60 running up-to-date Gentoo:
>
> Despite the documentation, which says:
>
>      'strftime' is an alias for 'format.POSIXlt', and 'format.POSIXct'
>      first converts to class '"POSIXlt"' by calling 'as.POSIXlt'.  Note
>      that only that conversion depends on the time zone.
>
> strftime fails on POSIXct objects:
>
>   
I think the author of those lines would point out that they do NOT imply
that it shouldn't fail.... In fact, why would you expect
format.POSIXlt(x) to work on anything but POSIXlt objects?

    -p


>> foo <- as.POSIXct(strptime(x='2007-09-22', format='%Y-%m-%d'))
>> strftime(x=foo, format='%Y-%m-%d')
>>     
> Error in strftime(x = foo, format = "%Y-%m-%d") : wrong class
>
> It's pretty clear why, given the first two lines of the function:
>   
>> strftime
>>     
> function (x, format = "", usetz = FALSE, ...)
> {
>     if (!inherits(x, "POSIXlt"))
>         stop("wrong class")
>     if (format == "") {
>         times <- unlist(unclass(x)[1:3])
>         secs <- x$sec
>         secs <- secs[!is.na(secs)]
>         np <- getOption("digits.secs")
>         if (is.null(np))
>             np <- 0
>         else np <- min(6, np)
>         if (np >= 1) {
>             for (i in (1:np) - 1) if (all(abs(secs - round(secs,
>                 i)) < 1e-06)) {
>                 np <- i
>                 break
>             }
>         }
>         format <- if (all(times[!is.na(times)] == 0))
>             "%Y-%m-%d"
>         else if (np == 0)
>             "%Y-%m-%d %H:%M:%S"
>         else paste("%Y-%m-%d %H:%M:%OS", np, sep = "")
>     }
>     .Internal(format.POSIXlt(x, format, usetz))
> }
> <environment: namespace:base>
>   
>
> /Don Allen
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>   


-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From ggrothendieck at gmail.com  Mon Feb  4 16:42:17 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 4 Feb 2008 10:42:17 -0500
Subject: [Rd] a != a*1 != a+0 != +a
In-Reply-To: <AE7B33FB-AFBC-40BD-9503-5C25ACFD4E23@noc.soton.ac.uk>
References: <AE7B33FB-AFBC-40BD-9503-5C25ACFD4E23@noc.soton.ac.uk>
Message-ID: <971536df0802040742n25269f5esf583617a0e12a9a2@mail.gmail.com>

I don't think global options are desirable.

I would make your operators work in a single way and if the user
wants a different way he can call whatever functions you provide
directly instead of using the operators.

If you really need two ways with operators I would define a subclass
with operators working in the alternative way and have as.whatever
methods that converts back and forth.

Another possibility is to have the way it works be a special
attribute of the object itself (other than "class").

On Feb 4, 2008 9:25 AM, Robin Hankin <r.hankin at noc.soton.ac.uk> wrote:
> hits=1.0 tests=MANY_EXCLAMATIONS
> X-USF-Spam-Flag: NO
>
> Hi
>
> I am writing a package for multivariate polynomials ('multipols')
> using S3 methods.
>
> The package includes a Ops.multipol()  function for the
> arithmetic methods;  I would like
> to define some sort of user-specified Boolean option which, if
> set,  would force results to be simplified as they are produced.
>
> Call this option "trim".  Trimming a multipol results in
> a smaller array that is more manageable.
>
> Mostly one wants to trim, sometimes not.
>
>
> Would options() be a good way to manage this?
>
> One issue is the behaviour of unary operators "+" and "-".
>
> If trim is TRUE, then  "a"   is one thing,  but "+a"  returns
> "trim(a)", which might be different.
>
> Also "1*a" would be different from "a" and "a+0"
>
>
>
> Does the List consider this to be Good Practice?
>
> Has anyone got comments?
>
>
>
> --
> Robin Hankin
> Uncertainty Analyst and Neutral Theorist,
> National Oceanography Centre, Southampton
> European Way, Southampton SO14 3ZH, UK
>  tel  023-8059-7743
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From h.wickham at gmail.com  Mon Feb  4 16:57:07 2008
From: h.wickham at gmail.com (hadley wickham)
Date: Mon, 4 Feb 2008 09:57:07 -0600
Subject: [Rd] a != a*1 != a+0 != +a
In-Reply-To: <AE7B33FB-AFBC-40BD-9503-5C25ACFD4E23@noc.soton.ac.uk>
References: <AE7B33FB-AFBC-40BD-9503-5C25ACFD4E23@noc.soton.ac.uk>
Message-ID: <f8e6ff050802040757t5569dea3tdbe22a8d28e5b76b@mail.gmail.com>

> One issue is the behaviour of unary operators "+" and "-".
>
> If trim is TRUE, then  "a"   is one thing,  but "+a"  returns
> "trim(a)", which might be different.
>
> Also "1*a" would be different from "a" and "a+0"

I think this is ok.  In the ggplot2 package I use + to join together
multiple plots, where a + b != b + a, and a + b + c (sometimes) = a.
This doesn't seem to cause much confusion for users.

Hadley

-- 
http://had.co.nz/


From donaldcallen at gmail.com  Mon Feb  4 16:07:06 2008
From: donaldcallen at gmail.com (Donald Allen)
Date: Mon, 4 Feb 2008 10:07:06 -0500
Subject: [Rd] strftime fails on POSIXct objects (PR#10695)
In-Reply-To: <47A7260B.6070702@biostat.ku.dk>
References: <20080204135512.48ED7283416A@mail.pubhealth.ku.dk>
	<47A7260B.6070702@biostat.ku.dk>
Message-ID: <d484362e0802040707u2d1815a0uf611da1721ef0fd5@mail.gmail.com>

On Feb 4, 2008 9:49 AM, Peter Dalgaard <P.Dalgaard at biostat.ku.dk> wrote:
> donaldcallen at gmail.com wrote:
> > R 2.6.1 on a Thinkpad T60 running up-to-date Gentoo:
> >
> > Despite the documentation, which says:
> >
> >      'strftime' is an alias for 'format.POSIXlt', and 'format.POSIXct'
> >      first converts to class '"POSIXlt"' by calling 'as.POSIXlt'.  Note
> >      that only that conversion depends on the time zone.
> >
> > strftime fails on POSIXct objects:
> >
> >
> I think the author of those lines would point out that they do NOT imply
> that it shouldn't fail.... In fact, why would you expect
> format.POSIXlt(x) to work on anything but POSIXlt objects?

Ah, you are quite right -- I mis-read the documentation.

Thanks --
/Don Allen




>
>     -p
>
>
> >> foo <- as.POSIXct(strptime(x='2007-09-22', format='%Y-%m-%d'))
> >> strftime(x=foo, format='%Y-%m-%d')
> >>
> > Error in strftime(x = foo, format = "%Y-%m-%d") : wrong class
> >
> > It's pretty clear why, given the first two lines of the function:
> >
> >> strftime
> >>
> > function (x, format = "", usetz = FALSE, ...)
> > {
> >     if (!inherits(x, "POSIXlt"))
> >         stop("wrong class")
> >     if (format == "") {
> >         times <- unlist(unclass(x)[1:3])
> >         secs <- x$sec
> >         secs <- secs[!is.na(secs)]
> >         np <- getOption("digits.secs")
> >         if (is.null(np))
> >             np <- 0
> >         else np <- min(6, np)
> >         if (np >= 1) {
> >             for (i in (1:np) - 1) if (all(abs(secs - round(secs,
> >                 i)) < 1e-06)) {
> >                 np <- i
> >                 break
> >             }
> >         }
> >         format <- if (all(times[!is.na(times)] == 0))
> >             "%Y-%m-%d"
> >         else if (np == 0)
> >             "%Y-%m-%d %H:%M:%S"
> >         else paste("%Y-%m-%d %H:%M:%OS", np, sep = "")
> >     }
> >     .Internal(format.POSIXlt(x, format, usetz))
> > }
> > <environment: namespace:base>
> >
> >
> > /Don Allen
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
>
>
> --
>    O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
>   c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
>  (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907
>
>
>


From iacob at ceremade.dauphine.fr  Mon Feb  4 16:45:04 2008
From: iacob at ceremade.dauphine.fr (iacob at ceremade.dauphine.fr)
Date: Mon,  4 Feb 2008 16:45:04 +0100 (CET)
Subject: [Rd] maybe a bug in the system.time() function? (PR#10696)
Message-ID: <20080204154504.1BC812834612@mail.pubhealth.ku.dk>

Full_Name: Alessandra Iacobucci
Version: 2.5.1
OS: Mac OS X 10.4.11
Submission from: (NULL) (193.48.71.92)


Hi,
I am making some intensive simulations for the testing of a Population Monte
Carlo algorithm. This involves also a study of the CPU times in two different
case.
What I am trying to measure is the "real" CPU time, the one which is independent
on the %CPU. 

I'm using the "system.time" function with gcFirst=TRUE and I realized that all
of the output values (user, system and elapsed) depend on the percentage of the
CPU, meaning that if your program is the only one running on the machine,
system.time() gives you  certain values, and if there are many programs running
at the same time, for the exact same simulation system.time() gives you much
higher values.

Thanks for you answer.

Best regards,

Alessandra Iacobucci


From pgilbert at bank-banque-canada.ca  Mon Feb  4 17:32:30 2008
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 04 Feb 2008 11:32:30 -0500
Subject: [Rd] r-release Windows x86_64
Message-ID: <47A73E1E.1040701@bank-banque-canada.ca>

I was just looking at the daily checks and it seems the "r-release 
Windows x86_64 (32-bit)" column is running R2.6.0.  Is that correct? 

Possibly related,  an error is being flagged in that column for 
TSMySQL,  which appears to be a problem that should be caught in the 
other columns too.  It is something that has been fixed in my sources 
for awhile. (I think it was fixed in the version on CRAN too, but I'm 
not certain.)

Paul Gilbert
====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential in...{{dropped:26}}


From ligges at statistik.tu-dortmund.de  Mon Feb  4 17:41:49 2008
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 04 Feb 2008 17:41:49 +0100
Subject: [Rd] r-release Windows x86_64
In-Reply-To: <47A73E1E.1040701@bank-banque-canada.ca>
References: <47A73E1E.1040701@bank-banque-canada.ca>
Message-ID: <47A7404D.6080601@statistik.tu-dortmund.de>



Paul Gilbert wrote:
> I was just looking at the daily checks and it seems the "r-release 
> Windows x86_64 (32-bit)" column is running R2.6.0.  Is that correct? 

Paul,

well, currently it is not checking daily, but new checks are done in 
R-2.6.2 RC.
I'll rerun all check today and tomorrow and we will have R-2.6.2 results 
on Thursday.


> Possibly related,  an error is being flagged in that column for 
> TSMySQL,  which appears to be a problem that should be caught in the 
> other columns too.  It is something that has been fixed in my sources 
> for awhile. (I think it was fixed in the version on CRAN too, but I'm 
> not certain.)

I'll rerun that check at once and you will see if you get a message 
reporting the error again.

Best wishes,
Uwe




> 
> Paul Gilbert
> ====================================================================================
> 
> La version fran?aise suit le texte anglais.
> 
> ------------------------------------------------------------------------------------
> 
> This email may contain privileged and/or confidential in...{{dropped:26}}
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From hin-tak.leung at cimr.cam.ac.uk  Mon Feb  4 19:22:34 2008
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Mon, 04 Feb 2008 18:22:34 +0000
Subject: [Rd] (PR#10696) maybe a bug in the system.time() function?
In-Reply-To: <20080204154504.1BC812834612@mail.pubhealth.ku.dk>
References: <20080204154504.1BC812834612@mail.pubhealth.ku.dk>
Message-ID: <47A757EA.6070503@cimr.cam.ac.uk>

You will get yelled at by others for posting a question as a bug... 
(sigh). See FAQ.

That said, your understanding of the output of system.time() is wrong.
The value you are after is simply user+system. %CPU is essentially
user+system/elapsed. It is elapsed which is dependent on system
load, not the other two (usually).

Back into replying more in the usual R-devel sarcastic style... if you 
don't understand what user/system/elapsed means, you really have no
place studying CPU loads...

iacob at ceremade.dauphine.fr wrote:
> Full_Name: Alessandra Iacobucci
> Version: 2.5.1
> OS: Mac OS X 10.4.11
> Submission from: (NULL) (193.48.71.92)
> 
> 
> Hi,
> I am making some intensive simulations for the testing of a Population Monte
> Carlo algorithm. This involves also a study of the CPU times in two different
> case.
> What I am trying to measure is the "real" CPU time, the one which is independent
> on the %CPU. 
> 
> I'm using the "system.time" function with gcFirst=TRUE and I realized that all
> of the output values (user, system and elapsed) depend on the percentage of the
> CPU, meaning that if your program is the only one running on the machine,
> system.time() gives you  certain values, and if there are many programs running
> at the same time, for the exact same simulation system.time() gives you much
> higher values.
> 
> Thanks for you answer.
> 
> Best regards,
> 
> Alessandra Iacobucci
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From daniel.oberski at gmail.com  Mon Feb  4 21:21:35 2008
From: daniel.oberski at gmail.com (Daniel Oberski)
Date: Mon, 4 Feb 2008 21:21:35 +0100
Subject: [Rd] R valgrind question
Message-ID: <817e25730802041221t70ec6378i5e045b57330fa6c6@mail.gmail.com>

Dear R developers


I am running an instrumented build of R 2.6.1 on ubuntu, compiled with
option configure --with-valgrind-instrumentation=3.

If run valgrind R then I get all sorts of warnings. I was wondering
whether I should worry about them or not.

First, when I open R as follows:

  $R -d "valgrind --tool=memcheck --leak-check=full
--show-reachable=yes" --vanilla

 I get a whole bunch of


==888== Invalid read of size 4
==888==    at 0x4014787: (within /lib/ld-2.5.so)
...
==888==  Address 0x50794A4 is 44 bytes inside a block of size 47 alloc'd
==888==    at 0x4021620: malloc (vg_replace_malloc.c:149)
==888==    by 0x4006EB4: (within /lib/ld-2.5.so)
...

Second, when I exit R I get memory leak reports:

==888== LEAK SUMMARY:
==888==    definitely lost: 132 bytes in 17 blocks.
==888==    indirectly lost: 240 bytes in 20 blocks.
==888==      possibly lost: 0 bytes in 0 blocks.
==888==    still reachable: 13,110,032 bytes in 6,340 blocks.
==888==         suppressed: 0 bytes in 0 blocks.


I am sorry if this is a stupid question, please be gentle. What should
I make of this?

I was trying to check my own C program (as a standalone program it
does not produce any valgrind warnings), but now I am not sure what is
going on when using valgrind on R..


Best regards,
  daniel


From daniel.oberski at gmail.com  Mon Feb  4 21:23:58 2008
From: daniel.oberski at gmail.com (Daniel Oberski)
Date: Mon, 4 Feb 2008 21:23:58 +0100
Subject: [Rd] R valgrind question
In-Reply-To: <817e25730802041221t70ec6378i5e045b57330fa6c6@mail.gmail.com>
References: <817e25730802041221t70ec6378i5e045b57330fa6c6@mail.gmail.com>
Message-ID: <817e25730802041223x59b6b7ffrf33e8df7fc9a0b4@mail.gmail.com>

Sorry I forgot to mention this happens just starting and then stopping
R. I am not running any other commands or loading any packages.


> I was trying to check my own C program (as a standalone program it
> does not produce any valgrind warnings), but now I am not sure what is
> going on when using valgrind on R..
>
>
> Best regards,
>   daniel
>


From jeff.horner at vanderbilt.edu  Mon Feb  4 21:29:40 2008
From: jeff.horner at vanderbilt.edu (Jeffrey Horner)
Date: Mon, 04 Feb 2008 14:29:40 -0600
Subject: [Rd] R valgrind question
In-Reply-To: <817e25730802041221t70ec6378i5e045b57330fa6c6@mail.gmail.com>
References: <817e25730802041221t70ec6378i5e045b57330fa6c6@mail.gmail.com>
Message-ID: <47A775B4.8070606@vanderbilt.edu>

Daniel Oberski wrote on 02/04/2008 02:21 PM:
> Dear R developers
> 
> 
> I am running an instrumented build of R 2.6.1 on ubuntu, compiled with
> option configure --with-valgrind-instrumentation=3.
> 
> If run valgrind R then I get all sorts of warnings. I was wondering
> whether I should worry about them or not.

Don't worry about them. Those are benign issues with the system 
libraries.. insofar as you trust those libraries, which you should... in 
general.

Jeff

> 
> First, when I open R as follows:
> 
>   $R -d "valgrind --tool=memcheck --leak-check=full
> --show-reachable=yes" --vanilla
> 
>  I get a whole bunch of
> 
> 
> ==888== Invalid read of size 4
> ==888==    at 0x4014787: (within /lib/ld-2.5.so)
> ...
> ==888==  Address 0x50794A4 is 44 bytes inside a block of size 47 alloc'd
> ==888==    at 0x4021620: malloc (vg_replace_malloc.c:149)
> ==888==    by 0x4006EB4: (within /lib/ld-2.5.so)
> ...
> 
> Second, when I exit R I get memory leak reports:
> 
> ==888== LEAK SUMMARY:
> ==888==    definitely lost: 132 bytes in 17 blocks.
> ==888==    indirectly lost: 240 bytes in 20 blocks.
> ==888==      possibly lost: 0 bytes in 0 blocks.
> ==888==    still reachable: 13,110,032 bytes in 6,340 blocks.
> ==888==         suppressed: 0 bytes in 0 blocks.
> 
> 
> I am sorry if this is a stupid question, please be gentle. What should
> I make of this?
> 
> I was trying to check my own C program (as a standalone program it
> does not produce any valgrind warnings), but now I am not sure what is
> going on when using valgrind on R..
> 
> 
> Best regards,
>   daniel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
http://biostat.mc.vanderbilt.edu/JeffreyHorner


From redmond at stat.wisc.edu  Mon Feb  4 22:14:02 2008
From: redmond at stat.wisc.edu (M Redmond)
Date: Mon, 4 Feb 2008 21:14:02 +0000 (UTC)
Subject: [Rd] Problem building R with Intel MKL v10 BLAS
References: <47993905.9000206@mit.edu>
	<dc41e1260801300003w58da8908k7b73e694f8fa76e1@mail.gmail.com>
Message-ID: <loom.20080204T210139-815@post.gmane.org>

Ei-ji Nakama <nakama <at> ki.rim.or.jp> writes:

> 
> Hi.
> 
> 2008/1/25, Michael Braun <braunm <at> mit.edu>:
> > NO
> >
> > Hi.  I'm not sure if this is an R-help or R-devel problem, so I'm
> > starting here in the hope that someone can help (and willing to go to
> > the other list if it's more appropriate).  I think I am following all of
> > the instructions in the various manuals, but clearly I am missing something.
> >
> > I have an Intel EM64T Dell with 2 dual-core Xeon processors running Red
> > Hat EL5.  I would like to build R 2.6.1 with lots of debugging and
> > profiling options, and link it to the processor-specific Intel MKL blas.
> > The problem is that after I compile R, and do R CMD config BLAS_LIBS,
> > the response is
> > -L/usr/local/lib64/R/lib -lRblas.
> >
> > This tells me that R is not linked to the Intel BLAS at all.
> >
> > My config.site file for R is:
> >
> > #! /bin/sh
> >
> > R_PAPERSIZE=letter
> > CFLAGS="-g -O2 -p -pg"
> > CPPFLAGS="-I/opt/intel/mkl/10.0.1.014/include -I/usr/include
> > -I/usr/local/include"
> > LIBnn=lib64
> > BLAS_LIBS="-L/opt/intel/mkl/10.0.1.014/lib/em64t -Wl,--start-group
> > -lmkl_gf_lp64.so -lmkl_gnu_thread.so -lmkl_core.so -l -l -l -Wl,
> > --end-group -lguide -lpthread -lm"
> 
> I have an AMD 64x2 Debian(etch)
> $ gcc-4.2 -v
> Using built-in specs.
> Target: x86_64-linux-gnu
> Configured with: ../gcc-4.2.2/configure -v
> --enable-languages=c,c++,fortran,objc,obj-c++,treelang
> --prefix=/usr/local/gcc-4.2.2 --enable-shared --disable-multilib
> --with-system-zlib --without-included-gettext --enable-threads=posix
> --enable-nls --program-suffix=-4.2 --enable-__cxa_atexit
> --enable-clocale=gnu --enable-libstdcxx-debug --enable-mpfr
> --enable-checking=release x86_64-linux-gnu
> Thread model: posix
> gcc version 4.2.2
> 
> MKL_LIB_PATH=/opt/intel/mkl/10.0.1.014/lib/em64t
> MKL="   -L${MKL_LIB_PATH}                               \
>         -Wl,--start-group                               \
>                 ${MKL_LIB_PATH}/libmkl_gf_lp64.a        \
>                 ${MKL_LIB_PATH}/libmkl_gnu_thread.a     \
>                 ${MKL_LIB_PATH}/libmkl_core.a           \
>         -Wl,--end-group                                 \
>         -liomp5 -lguide -lpthread -lgomp"
> 
> ./configure CC=gcc-4.2\
>         CXX=g++-4.2\
>         F77=gfortran-4.2\
>         FC=gfortran-4.2\
>         --with-lapack="$MKL" --with-blas="$MKL"
> 
> mkl_core seemed to want to cause libiomp5. dgemm gave a funny result
> in matrix of 1000x1000 if I did not link with real libiomp5.
> 
---
According to Intel, the V10 MKL is modular and therefore requires that all the
needed modules be on the library path in the correct order. This differs from V9
in that the single BLAS and LAPACK libraries could be directly substituted
(linked from) libRblas.so and libRlapack.so. To build, I needed to add the paths
into the  config.sh and make sure all the tests worked during R build. These are
the config.sh entries. I think the result is similar to what is noted above,
though I use the intel thread rather than the gnu thread. I tried both, and
don't recall that it made a difference:

--with-blas="-L/.../intel/mkl/10.0.1.014/lib/em64t -lRblas -lmkl_intel_thread
-lguide -lmkl_lapack -lmkl_core -lpthread" \
--with-lapack="-L/.../intel/mkl/10.0.1.014/lib/em64t -lRlapack
-lmkl_intel_thread -lguide -lmkl_lapack -lmkl_core -lpthread" \

where ... is the absolute path to your Intel MKL installation.

Hope that helps...

MJR


From redmond at stat.wisc.edu  Mon Feb  4 23:34:00 2008
From: redmond at stat.wisc.edu (M Redmond)
Date: Mon, 4 Feb 2008 22:34:00 +0000 (UTC)
Subject: [Rd] Problem building R with Intel MKL v10 BLAS
References: <47993905.9000206@mit.edu>
Message-ID: <loom.20080204T222206-746@post.gmane.org>

Michael Braun <braunm <at> MIT.EDU> writes:

> 
> NO
> 
> Hi.  I'm not sure if this is an R-help or R-devel problem, so I'm 
> starting here in the hope that someone can help (and willing to go to 
> the other list if it's more appropriate).  I think I am following all of 
> the instructions in the various manuals, but clearly I am missing something.
> 
> I have an Intel EM64T Dell with 2 dual-core Xeon processors running Red 
> Hat EL5.  I would like to build R 2.6.1 with lots of debugging and 
> profiling options, and link it to the processor-specific Intel MKL blas. 
> The problem is that after I compile R, and do R CMD config BLAS_LIBS, 
> the response is
> -L/usr/local/lib64/R/lib -lRblas.
> 
> This tells me that R is not linked to the Intel BLAS at all.
> 
> My config.site file for R is:
> 
> #! /bin/sh
> 
> R_PAPERSIZE=letter
> CFLAGS="-g -O2 -p -pg"
> CPPFLAGS="-I/opt/intel/mkl/10.0.1.014/include -I/usr/include 
> -I/usr/local/include"
> LIBnn=lib64
> BLAS_LIBS="-L/opt/intel/mkl/10.0.1.014/lib/em64t -Wl,--start-group 
> -lmkl_gf_lp64.so -lmkl_gnu_thread.so -lmkl_core.so -l -l -l -Wl, 
> --end-group -lguide -lpthread -lm"
> 
> I have set the CONFIG_SITE environment variable to the location of the 
> config.site.file.
> I am doing everything as superuser.
> 
> The command I am using for configure is
> 
> ./configure --disable-R-profiling --with-blas=no
> 
> following the instructions in the R-admin file regarding enabling 
> C-level profiling and linking to the external BLAS libraries referenced 
> in the config.site file.
> 
> The BLAS_LIBS files are different than in the R-admin manual because of 
> changes in the Intel MKL for version 10.  These libraries, in this 
> order, were taken from the Intel MKL for Linux User's Guide, chapter 5.
> 
> So, still no luck linking to the optimized BLAS.  I'd appreciate any 
> suggestions.
> 
> Thanks,
> 
> Michael
> 
---
I now recall a similar problem with my install of MKL V10. Here is the info:

I got the 10.X, layered library version of MKL 10.X working on R-2.6.1a. I 
set the full path information for the R configuration blas and lapack
option:

--with-blas="-L/.../intel/mkl/10.0.011/lib/em64t -lRblas -lmkl_sequential
-lmkl_lapack -lmkl_core -lpthread"
--with-lapack="-L/.../intel/mkl/10.0.011/lib/em64t -lRlapack -lmkl_sequential
-lmkl_lapack -lmkl_core -lpthread"

In this case, libRblas.so and libRlapack.so are both linked to 
libmkl_gf_lp64.so in the em64t directory. There must be some internal error
in the R configuration and make processing, because it would not pick up the
primary path specification for the mkl libraries location. Instead, I was 
able to define:

*******critical step to get around a possible R bug*******
sh-3.00$ export LD_RUN_PATH=/.../intel/mkl/10.0.011/lib/em64t

After that, I was able to perform the R configure with no errors. Then the
make also worked with no errors. The BLAS_LIBS and LAPACK_LIBS variables
were properly defined, and the path to the MKL libraries was properly
defined in ldpaths:

sh-3.00$ /.../R-2.6.1a/bin/R CMD config BLAS_LIBS
-L/.../intel/mkl/10.0.011/lib/em64t -lRblas -lmkl_sequential -lmkl_lapack
-lmkl_core -lpthread
sh-3.00$ /.../R-2.6.1a/bin/R CMD config LAPACK_LIBS
-L/.../R-2.6.1a/intel/mkl/10.0.011/lib/em64t -lRlapack -lmkl_sequential
-lmkl_lapack -lmkl_core -lpthread
sh-3.00$

power02(43)% more ldpaths
...
${R_LD_LIBRARY_PATH=${R_HOME}/lib:/s/gcc-4.2.1/lib64:
/.../intel/mkl/10.0.011/lib/em64t:/usr/X11R6/lib64:
/.../tcl-8.4.2/i386_rh72/lib:/.../XFree86-4.2.1/i386_rh72/lib}

(... are the various local paths to the objects of interest)

Hope that helps (maybe more than my other post)
MJR


From nakama at ki.rim.or.jp  Tue Feb  5 10:23:23 2008
From: nakama at ki.rim.or.jp (Ei-ji Nakama)
Date: Tue, 5 Feb 2008 18:23:23 +0900
Subject: [Rd] Problem building R with Intel MKL v10 BLAS
In-Reply-To: <loom.20080204T210139-815@post.gmane.org>
References: <47993905.9000206@mit.edu>
	<dc41e1260801300003w58da8908k7b73e694f8fa76e1@mail.gmail.com>
	<loom.20080204T210139-815@post.gmane.org>
Message-ID: <dc41e1260802050123g2ab459aalfb1e8b0f8dfb4c8d@mail.gmail.com>

hi.

2008/2/5, M Redmond <redmond at stat.wisc.edu>:
> --with-blas="-L/.../intel/mkl/10.0.1.014/lib/em64t -lRblas -lmkl_intel_thread
> -lguide -lmkl_lapack -lmkl_core -lpthread" \
> --with-lapack="-L/.../intel/mkl/10.0.1.014/lib/em64t -lRlapack
> -lmkl_intel_thread -lguide -lmkl_lapack -lmkl_core -lpthread" \

Did libRblas and libRlapack make it with manual operation?

I see.../opt/intel/mkl/10.0.1.014/doc/userguide.pdf(Building Custom
Shared Objects)

awk '/F77_SYMBOL\([a-z]+\)\(\)/{FS="[()\t]";if(length($2)){print $2
"_"}}' m4/R.m4 > blas_list
MKL_ROOT=/opt/intel/mkl/10.0.1.014
make -f ${MKL_ROOT}/tools/builder/makefile \
            em64t export=blas_list xerbra=xerbla.o \
            name=/usr/local/lib/libmkl_myblas MKL_ROOT=${MKL_ROOT}

However, zdotu did not move even if I linked at this point in time....

-- 
EI-JI Nakama  <nakama at ki.rim.or.jp>
"\u4e2d\u9593\u6804\u6cbb"  <nakama at ki.rim.or.jp>


From nakama at ki.rim.or.jp  Tue Feb  5 10:23:27 2008
From: nakama at ki.rim.or.jp (Ei-ji Nakama)
Date: Tue, 5 Feb 2008 18:23:27 +0900
Subject: [Rd] Problem building R with Intel MKL v10 BLAS
In-Reply-To: <loom.20080204T210139-815@post.gmane.org>
References: <47993905.9000206@mit.edu>
	<dc41e1260801300003w58da8908k7b73e694f8fa76e1@mail.gmail.com>
	<loom.20080204T210139-815@post.gmane.org>
Message-ID: <dc41e1260802050123m23615c95o29433f682cb2ebb7@mail.gmail.com>

hi.

2008/2/5, M Redmond <redmond at stat.wisc.edu>:
> --with-blas="-L/.../intel/mkl/10.0.1.014/lib/em64t -lRblas -lmkl_intel_thread
> -lguide -lmkl_lapack -lmkl_core -lpthread" \
> --with-lapack="-L/.../intel/mkl/10.0.1.014/lib/em64t -lRlapack
> -lmkl_intel_thread -lguide -lmkl_lapack -lmkl_core -lpthread" \

Did libRblas and libRlapack make it with manual operation?

I see.../opt/intel/mkl/10.0.1.014/doc/userguide.pdf(Building Custom
Shared Objects)

awk '/F77_SYMBOL\([a-z]+\)\(\)/{FS="[()\t]";if(length($2)){print $2
"_"}}' m4/R.m4 > blas_list
MKL_ROOT=/opt/intel/mkl/10.0.1.014
make -f ${MKL_ROOT}/tools/builder/makefile \
            em64t export=blas_list xerbra=xerbla.o \
            name=/usr/local/lib/libmkl_myblas MKL_ROOT=${MKL_ROOT}

However, zdotu did not move even if I linked at this point in time....

-- 
EI-JI Nakama  <nakama at ki.rim.or.jp>
"\u4e2d\u9593\u6804\u6cbb"  <nakama at ki.rim.or.jp>


From scott.yonker at gmail.com  Mon Feb  4 23:35:07 2008
From: scott.yonker at gmail.com (scott.yonker at gmail.com)
Date: Mon,  4 Feb 2008 23:35:07 +0100 (CET)
Subject: [Rd] garchFit (PR#10698)
Message-ID: <20080204223507.83F9D282EFF0@mail.pubhealth.ku.dk>

Full_Name: Scott Yonker
Version: R for OSX Cocoa
OS: Mac OSX
Submission from: (NULL) (24.208.185.211)


The garchFit function in the Rmetrics libray cannot estimate ARCH models,
meaning that the number of beta terms in the model must be greater than zero. 
For this function neither p nor q can be set to zero without an error.  The
problem lies in both the specification of the objective function and in the
function that determines the initial parameter estimates.  A simple if statement
setting alpha=0 if p=0 and beta=0 if q=0 (I don't remember which is p or q I
might have these reversed) in both of these functions solves the problem.


From huangce at gmail.com  Tue Feb  5 10:25:28 2008
From: huangce at gmail.com (huangce at gmail.com)
Date: Tue,  5 Feb 2008 10:25:28 +0100 (CET)
Subject: [Rd] Got *** caught segfault *** with Quantreg on Mac (PR#10699)
Message-ID: <20080205092528.B8D63283462B@mail.pubhealth.ku.dk>

Full_Name: Edward Huang
Version: 2.6.1
OS: Mac OS 10.5.1 Leopard
Submission from: (NULL) (71.198.106.232)


I'm trying to run quantile regression on my data. I just couldn't make it work.
The same dataset ran okay on STATA 10, tho.

Would you please take a look at it?

Here is the error message:



 *** caught segfault ***
address 0x3ff00008, cause 'memory not mapped'

Traceback:
 1: .Fortran("rqbr", as.integer(n), as.integer(p), as.integer(n +     5),
as.integer(p + 3), as.integer(p + 4), as.double(x), as.double(y),    
as.double(tau), as.double(tol), flag = as.integer(1), coef = double(p),    
resid = double(n), integer(n), double((n + 5) * (p + 4)),     double(n),
as.integer(nsol), as.integer(ndsol), sol = double((p +         3) * nsol), dsol
= double(n * ndsol), lsol = as.integer(0),     h = integer(p * nsol), qn =
as.double(qn), cutoff = as.double(cutoff),     ci = double(4 * p), tnmat =
double(4 * p), as.double(big),     as.logical(lci1), PACKAGE = "quantreg")
 2: rq.fit.br(x, y, tau = tau, ...)
 3: switch(method, fn = rq.fit.fn(x, y, tau = tau, ...), fnb = rq.fit.fnb(x,    
y, tau = tau, ...), fnc = rq.fit.fnc(x, y, tau = tau, ...),     pfn =
rq.fit.pfn(x, y, tau = tau, ...), br = rq.fit.br(x,         y, tau = tau, ...),
fcen = rq.fit.fcen(x, y, tau = tau,         ...), lasso = rq.fit.lasso(x, y, tau
= tau, ...), scad = rq.fit.scad(x,         y, tau = tau, ...), {        what <-
paste("rq.fit.", method, sep = "")        if (exists(what, mode = "function"))  
          (get(what, mode = "function"))(x, y, ...)        else
stop(paste("unimplemented method:", method))    })
 4: rq.fit(X, Y, tau = tau, method, ...)

 5: rq(PAX ~ PFC + AA + UA + DL + CO + NW + US + Q931 + Q932 + Q933 +     Q934 +
Q941 + Q942 + Q943 + Q944 + Q951 + Q952 + Q953 + Q954 +     Q961 + Q962 + Q963 +
Q964 + ATLBOS + ATLDEN + ATLDFW + ATLDTW +     ATLEWR + ATLIAH + ATLJFK + ATLLAS
+ ATLLAX + ATLLGA + ATLMCO +     ATLMIA + ATLMSP + ATLORD + ATLPHX + ATLPIT +
ATLSEA + ATLSFO +     ATLSTL + BOSDEN + BOSDFW + BOSDTW + BOSEWR + BOSIAH +
BOSJFK +     BOSLAS + BOSLAX + BOSLGA + BOSMCO + BOSMIA + BOSMSP + BOSORD +    
BOSPHX + BOSPIT + BOSSEA + BOSSFO + BOSSTL + DENDFW + DENDTW +     DENEWR +
DENIAH + DENJFK + DENLAS + DENLAX + DENLGA + DENMCO +     DENMIA + DENMSP +
DENORD + DENPHX + DENPIT + DENSEA + DENSFO +     DENSTL + DFWDTW + DFWEWR +
DFWIAH + DFWJFK + DFWLAS + DFWLAX +     DFWLGA + DFWMCO + DFWMIA + DFWMSP +
DFWORD + DFWPHX + DFWPIT +     DFWSEA + DFWSFO + DFWSTL + DTWEWR + DTWIAH +
DTWJFK + DTWLAS +     DTWLAX + DTWLGA + DTWMCO + DTWMIA + DTWMSP + DTWORD +
DTWPHX +     DTWPIT + DTWSEA + DTWSFO + DTWSTL + EWRIAH + EWRJFK + EWRLAS +    
EWRLAX + EWRLGA + EWRMCO + EWRMIA + EWRMSP + EWRORD + EWRPHX +     EWRPIT +
EWRSEA + EWRSFO + EWRSTL + IAHJFK + IAHLAS + IAHLAX +     IAHLGA + IAHMCO +
IAHMIA + IAHMSP + IAHORD + IAHPHX + IAHPIT +     IAHSEA + IAHSFO + IAHSTL +
JFKLAS + JFKLAX + JFKLGA + JFKMCO +     JFKMIA + JFKMSP + JFKORD + JFKPHX +
JFKPIT + JFKSEA + JFKSFO +     JFKSTL + LASLAX + LASLGA + LASMCO + LASMIA +
LASMSP + LASORD +     LASPHX + LASPIT + LASSEA + LASSFO + LASSTL + LAXLGA +
LAXMCO +     LAXMIA + LAXMSP + LAXORD + LAXPHX + LAXPIT + LAXSEA + LAXSFO +    
LAXSTL + LGAMCO + LGAMIA + LGAMSP + LGAORD + LGAPHX + LGAPIT +     LGASEA +
LGASFO + LGASTL + MCOMIA + MCOMSP + MCOORD + MCOPHX +     MCOPIT + MCOSEA +
MCOSFO + MCOSTL + MIAMSP + MIAORD + MIAPHX +     MIAPIT + MIASEA + MIASFO +
MIASTL + MSPORD + MSPPHX + MSPPIT +     MSPSEA + MSPSFO + MSPSTL + ORDPHX +
ORDPIT + ORDSEA + ORDSFO +     ORDSTL + PHXPIT + PHXSEA + PHXSFO + PHXSTL +
PITSEA + PITSFO +     PITSTL + SEASFO + SEASTL + SFOSTL, tau = 0.5)

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace


From chalabi at phys.ethz.ch  Tue Feb  5 12:53:25 2008
From: chalabi at phys.ethz.ch (Yohan Chalabi)
Date: Tue, 5 Feb 2008 12:53:25 +0100
Subject: [Rd] garchFit (PR#10698)
In-Reply-To: <20080204223507.83F9D282EFF0@mail.pubhealth.ku.dk>
References: <20080204223507.83F9D282EFF0@mail.pubhealth.ku.dk>
Message-ID: <20080205125325.087ec83f@yankee-laptop>

>>>> "SYC" == scott.yonker at gmail.com
>>>> on Mon,  4 Feb 2008 23:35:07 +0100 (CET)

   SYC> The garchFit function in the Rmetrics libray cannot estimate
   SYC> ARCH models,
   SYC> meaning that the number of beta terms in the model must be
   SYC> greater than zero.
   SYC> For this function neither p nor q can be set to zero without
   SYC> an error.  The
   SYC> problem lies in both the specification of the objective function
   SYC> and in the
   SYC> function that determines the initial parameter estimates.
   SYC> A simple if statement
   SYC> setting alpha=0 if p=0 and beta=0 if q=0 (I don't remember
   SYC> which is p or q I
   SYC> might have these reversed) in both of these functions solves
   SYC> the problem.

Hi Scott,

Thank you for this information. I will care about it.

But please use the Rmetrics core team list (rmetrics-core at r-project.org) to send
bugs related to Rmetrics.

Regards,
Yohan


From iago.mosqueira at gmail.com  Tue Feb  5 17:01:18 2008
From: iago.mosqueira at gmail.com (Iago Mosqueira)
Date: Tue, 05 Feb 2008 17:01:18 +0100
Subject: [Rd] Need for garbage collection after creating object
Message-ID: <47A8884E.4080609@gmail.com>

Hello,

After experiencing some difficulties with large arrays, I was surprised 
to see the apparent need for class to gc() after creating fairly large 
arrays. For example, calling

a<-array(2, dim=c(10,10,10,10,10,100))

makes the memory usage of a fresh session of R jump from 13.8 Mb to 
166.4 Mb. A call to gc() brought it down to 90.8 Mb,

 > gc()
            used (Mb) gc trigger  (Mb) max used  (Mb)
Ncells   132619  3.6     350000   9.4   350000   9.4
Vcells 10086440 77.0   21335887 162.8 20086792 153.3

as expected by

 > object.size(a)

[1] 80000136

Do I need to call gc() after creating every large array, or can I setup 
the system to do this more often or efficiently?

Thanks very much,


Iago


$platform
[1] "i686-pc-linux-gnu"
$version.string
[1] "R version 2.6.1 (2007-11-26)"


From hb at stat.berkeley.edu  Tue Feb  5 19:12:52 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Tue, 5 Feb 2008 10:12:52 -0800
Subject: [Rd] Need for garbage collection after creating object
In-Reply-To: <47A8884E.4080609@gmail.com>
References: <47A8884E.4080609@gmail.com>
Message-ID: <59d7961d0802051012s45969d58t68864c8f2f5e6e20@mail.gmail.com>

On Feb 5, 2008 8:01 AM, Iago Mosqueira <iago.mosqueira at gmail.com> wrote:
> Hello,
>
> After experiencing some difficulties with large arrays, I was surprised
> to see the apparent need for class to gc() after creating fairly large
> arrays. For example, calling
>
> a<-array(2, dim=c(10,10,10,10,10,100))
>
> makes the memory usage of a fresh session of R jump from 13.8 Mb to
> 166.4 Mb. A call to gc() brought it down to 90.8 Mb,
>
>  > gc()
>             used (Mb) gc trigger  (Mb) max used  (Mb)
> Ncells   132619  3.6     350000   9.4   350000   9.4
> Vcells 10086440 77.0   21335887 162.8 20086792 153.3
>
> as expected by
>
>  > object.size(a)
>
> [1] 80000136

I think the reason for this is that array() has to "expand" the input
data to the right length internally;

 data <- rep(data, length.out = vl)

That is a so called "NAMED" object internally and when the following call to

  dim(data) <- dim

occurs, the safest thing R can do is to create a copy. [Anyone,
correct me if I'm wrong].

If you expand the input data yourself, you won't see that extra copy, e.g.

  data <- 2
  dim <- c(10,10,10,10,10,100)
  data <- rep(data, length.out=prod(dim))
  a <- array(data, dim=dim)

>
> Do I need to call gc() after creating every large array, or can I setup
> the system to do this more often or efficiently?

The R garbage collector will free/deallocate that memory when
"needed".  However, calling gc() explicitly should minimize the risk
for over-fragmented memory.  Basically, if there are several blocks of
garbage memory hanging around, you might end up with a situation where
you a lot of *total* memory available, but you will only be able to
allocate small chunks of memory at any time.  Even calling gc() at
that situation will not help; there is no mechanism that defragments
memory in R.  So calling gc() after large allocations will add some
protection against that.

/Henrik

>
> Thanks very much,
>
>
> Iago
>
>
> $platform
> [1] "i686-pc-linux-gnu"
> $version.string
> [1] "R version 2.6.1 (2007-11-26)"
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From hb at stat.berkeley.edu  Tue Feb  5 19:45:34 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Tue, 5 Feb 2008 10:45:34 -0800
Subject: [Rd] Need for garbage collection after creating object
In-Reply-To: <59d7961d0802051012s45969d58t68864c8f2f5e6e20@mail.gmail.com>
References: <47A8884E.4080609@gmail.com>
	<59d7961d0802051012s45969d58t68864c8f2f5e6e20@mail.gmail.com>
Message-ID: <59d7961d0802051045g35004aa8w63c067b89815dea5@mail.gmail.com>

On Feb 5, 2008 10:12 AM, Henrik Bengtsson <hb at stat.berkeley.edu> wrote:
> On Feb 5, 2008 8:01 AM, Iago Mosqueira <iago.mosqueira at gmail.com> wrote:
> > Hello,
> >
> > After experiencing some difficulties with large arrays, I was surprised
> > to see the apparent need for class to gc() after creating fairly large
> > arrays. For example, calling
> >
> > a<-array(2, dim=c(10,10,10,10,10,100))
> >
> > makes the memory usage of a fresh session of R jump from 13.8 Mb to
> > 166.4 Mb. A call to gc() brought it down to 90.8 Mb,
> >
> >  > gc()
> >             used (Mb) gc trigger  (Mb) max used  (Mb)
> > Ncells   132619  3.6     350000   9.4   350000   9.4
> > Vcells 10086440 77.0   21335887 162.8 20086792 153.3
> >
> > as expected by
> >
> >  > object.size(a)
> >
> > [1] 80000136
>
> I think the reason for this is that array() has to "expand" the input
> data to the right length internally;
>
>  data <- rep(data, length.out = vl)
>
> That is a so called "NAMED" object internally and when the following call to
>
>   dim(data) <- dim
>
> occurs, the safest thing R can do is to create a copy. [Anyone,
> correct me if I'm wrong].
>
> If you expand the input data yourself, you won't see that extra copy, e.g.
>
>   data <- 2
>   dim <- c(10,10,10,10,10,100)
>   data <- rep(data, length.out=prod(dim))
>   a <- array(data, dim=dim)

My bad here; that does indeed create an extra copy; rep() is the
problem and you see that when you gc() after rep().  It seems to be
hard to allocate an array with values without creating an extra copy,
e.g.

dim <- c(10,10,10,10,10,100)
data <- numeric(prod(dim))
dim(data) <- dim

will not create an extra copy, but as soon as you try to set a value
it will happen, e.g.

data[1,2,3,4,5,6] <- 2

Again, I believe this has to do with the fact that R is taking the
safest path possible and not risking overwriting an existing object in
memory (R is copy by value).  Note that when you do a second
assignment, that "safety copy" is already created so no more copies
will be created, e.g. calling

data[1,2,3,4,5,7] <- 3

after the above will not create an extra copy.

/Henrik

>
> >
> > Do I need to call gc() after creating every large array, or can I setup
> > the system to do this more often or efficiently?
>
> The R garbage collector will free/deallocate that memory when
> "needed".  However, calling gc() explicitly should minimize the risk
> for over-fragmented memory.  Basically, if there are several blocks of
> garbage memory hanging around, you might end up with a situation where
> you a lot of *total* memory available, but you will only be able to
> allocate small chunks of memory at any time.  Even calling gc() at
> that situation will not help; there is no mechanism that defragments
> memory in R.  So calling gc() after large allocations will add some
> protection against that.
>
> /Henrik
>
>
> >
> > Thanks very much,
> >
> >
> > Iago
> >
> >
> > $platform
> > [1] "i686-pc-linux-gnu"
> > $version.string
> > [1] "R version 2.6.1 (2007-11-26)"
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
>


From simon.urbanek at r-project.org  Tue Feb  5 20:16:04 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 5 Feb 2008 14:16:04 -0500
Subject: [Rd] Got *** caught segfault *** with Quantreg on Mac (PR#10699)
In-Reply-To: <20080205092528.B8D63283462B@mail.pubhealth.ku.dk>
References: <20080205092528.B8D63283462B@mail.pubhealth.ku.dk>
Message-ID: <20A187E8-51D2-4667-A0D1-710B67E8D49C@r-project.org>

Edward,

On Feb 5, 2008, at 4:25 AM, huangce at gmail.com wrote:

> Full_Name: Edward Huang
> Version: 2.6.1
> OS: Mac OS 10.5.1 Leopard
> Submission from: (NULL) (71.198.106.232)
>
>
> I'm trying to run quantile regression on my data. I just couldn't  
> make it work.
> The same dataset ran okay on STATA 10, tho.
>
> Would you please take a look at it?
>

sure, gladly, if you send us the data (or any other way to reproduce  
it) ...

BTW: this is a crash in a contributed package, so you should ask the  
maintainer of the package and not file an R bug report.

Thanks,
Simon


> Here is the error message:
>
>
>
> *** caught segfault ***
> address 0x3ff00008, cause 'memory not mapped'
>
> Traceback:
> 1: .Fortran("rqbr", as.integer(n), as.integer(p), as.integer(n +      
> 5),
> as.integer(p + 3), as.integer(p + 4), as.double(x), as.double(y),
> as.double(tau), as.double(tol), flag = as.integer(1), coef =  
> double(p),
> resid = double(n), integer(n), double((n + 5) * (p + 4)),      
> double(n),
> as.integer(nsol), as.integer(ndsol), sol = double((p +         3) *  
> nsol), dsol
> = double(n * ndsol), lsol = as.integer(0),     h = integer(p *  
> nsol), qn =
> as.double(qn), cutoff = as.double(cutoff),     ci = double(4 * p),  
> tnmat =
> double(4 * p), as.double(big),     as.logical(lci1), PACKAGE =  
> "quantreg")
> 2: rq.fit.br(x, y, tau = tau, ...)
> 3: switch(method, fn = rq.fit.fn(x, y, tau = tau, ...), fnb =  
> rq.fit.fnb(x,
> y, tau = tau, ...), fnc = rq.fit.fnc(x, y, tau = tau, ...),     pfn =
> rq.fit.pfn(x, y, tau = tau, ...), br = rq.fit.br(x,         y, tau =  
> tau, ...),
> fcen = rq.fit.fcen(x, y, tau = tau,         ...), lasso =  
> rq.fit.lasso(x, y, tau
> = tau, ...), scad = rq.fit.scad(x,         y, tau = tau, ...),  
> {        what <-
> paste("rq.fit.", method, sep = "")        if (exists(what, mode =  
> "function"))
>          (get(what, mode = "function"))(x, y, ...)        else
> stop(paste("unimplemented method:", method))    })
> 4: rq.fit(X, Y, tau = tau, method, ...)
>
> 5: rq(PAX ~ PFC + AA + UA + DL + CO + NW + US + Q931 + Q932 + Q933  
> +     Q934 +
> Q941 + Q942 + Q943 + Q944 + Q951 + Q952 + Q953 + Q954 +     Q961 +  
> Q962 + Q963 +
> Q964 + ATLBOS + ATLDEN + ATLDFW + ATLDTW +     ATLEWR + ATLIAH +  
> ATLJFK + ATLLAS
> + ATLLAX + ATLLGA + ATLMCO +     ATLMIA + ATLMSP + ATLORD + ATLPHX +  
> ATLPIT +
> ATLSEA + ATLSFO +     ATLSTL + BOSDEN + BOSDFW + BOSDTW + BOSEWR +  
> BOSIAH +
> BOSJFK +     BOSLAS + BOSLAX + BOSLGA + BOSMCO + BOSMIA + BOSMSP +  
> BOSORD +
> BOSPHX + BOSPIT + BOSSEA + BOSSFO + BOSSTL + DENDFW + DENDTW +      
> DENEWR +
> DENIAH + DENJFK + DENLAS + DENLAX + DENLGA + DENMCO +     DENMIA +  
> DENMSP +
> DENORD + DENPHX + DENPIT + DENSEA + DENSFO +     DENSTL + DFWDTW +  
> DFWEWR +
> DFWIAH + DFWJFK + DFWLAS + DFWLAX +     DFWLGA + DFWMCO + DFWMIA +  
> DFWMSP +
> DFWORD + DFWPHX + DFWPIT +     DFWSEA + DFWSFO + DFWSTL + DTWEWR +  
> DTWIAH +
> DTWJFK + DTWLAS +     DTWLAX + DTWLGA + DTWMCO + DTWMIA + DTWMSP +  
> DTWORD +
> DTWPHX +     DTWPIT + DTWSEA + DTWSFO + DTWSTL + EWRIAH + EWRJFK +  
> EWRLAS +
> EWRLAX + EWRLGA + EWRMCO + EWRMIA + EWRMSP + EWRORD + EWRPHX +      
> EWRPIT +
> EWRSEA + EWRSFO + EWRSTL + IAHJFK + IAHLAS + IAHLAX +     IAHLGA +  
> IAHMCO +
> IAHMIA + IAHMSP + IAHORD + IAHPHX + IAHPIT +     IAHSEA + IAHSFO +  
> IAHSTL +
> JFKLAS + JFKLAX + JFKLGA + JFKMCO +     JFKMIA + JFKMSP + JFKORD +  
> JFKPHX +
> JFKPIT + JFKSEA + JFKSFO +     JFKSTL + LASLAX + LASLGA + LASMCO +  
> LASMIA +
> LASMSP + LASORD +     LASPHX + LASPIT + LASSEA + LASSFO + LASSTL +  
> LAXLGA +
> LAXMCO +     LAXMIA + LAXMSP + LAXORD + LAXPHX + LAXPIT + LAXSEA +  
> LAXSFO +
> LAXSTL + LGAMCO + LGAMIA + LGAMSP + LGAORD + LGAPHX + LGAPIT +      
> LGASEA +
> LGASFO + LGASTL + MCOMIA + MCOMSP + MCOORD + MCOPHX +     MCOPIT +  
> MCOSEA +
> MCOSFO + MCOSTL + MIAMSP + MIAORD + MIAPHX +     MIAPIT + MIASEA +  
> MIASFO +
> MIASTL + MSPORD + MSPPHX + MSPPIT +     MSPSEA + MSPSFO + MSPSTL +  
> ORDPHX +
> ORDPIT + ORDSEA + ORDSFO +     ORDSTL + PHXPIT + PHXSEA + PHXSFO +  
> PHXSTL +
> PITSEA + PITSFO +     PITSTL + SEASFO + SEASTL + SFOSTL, tau = 0.5)
>
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From bolker at ufl.edu  Tue Feb  5 21:00:53 2008
From: bolker at ufl.edu (Ben Bolker)
Date: Tue, 05 Feb 2008 15:00:53 -0500
Subject: [Rd] fortune() candidate?
Message-ID: <47A8C075.1060200@ufl.edu>

hits=-2.6 tests=BAYES_00,SPF_HELO_PASS,SPF_PASS
X-USF-Spam-Flag: NO

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


From: Bert Gunter <gunter.berton <at> gene.com>
Subject: Re: Maximum number of variables allowed in a multiple
linearregression model
Newsgroups: gmane.comp.lang.r.general
Date: 2008-02-05 18:00:40 GMT (1 hour and 59 minutes ago)

I strongly suggest you collaborate with a local statistician. I can think of
no circumstance where multiple regression on "hundreds of thousands of
variables" is anything more than a fancy random number generator.

- -- Bert Gunter
Genentech Nonclinical Statistics

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFHqMB1c5UpGjwzenMRArTBAJ90RXYOwfeOVFf+6cfat3fQUz6/RQCeJQ4T
e2Dt12s8ZI17Zqnq/4x+1hM=
=LfLS
-----END PGP SIGNATURE-----


From iverson at biostat.wisc.edu  Tue Feb  5 21:18:17 2008
From: iverson at biostat.wisc.edu (Erik Iverson)
Date: Tue, 05 Feb 2008 14:18:17 -0600
Subject: [Rd] Error in grid.text after tcltk package loaded
Message-ID: <47A8C489.4050607@biostat.wisc.edu>

Hello -

I am noticing some strange errors when using the grid package, but 
(apparently) only after loading the tcltk package.  The interaction here 
does not make sense to me, and I'm wondering if anyone else can 
reproduce this, or if it is specific to my setup.  Here is my sessionInfo:

sessionInfo()
R version 2.6.2 RC (2008-02-04 r44332)
i686-pc-linux-gnu

locale:
LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C

attached base packages:
[1] tcltk     grid      stats     graphics  grDevices utils     datasets
[8] methods   base

This also happens to me in R 2.6.1. I'm running Linux (RHEL 4) on a 
32-bit Intel CPU and using KDE.  These are R versions that I have 
compiled myself.

I try the following in R (started with --vanilla), this is the simplest 
code I have to reproduce the problem on my end.

## Start R Code

library(grid)
library(tcltk)
grid.text("a", x = seq(0,1, by = .001))

## End R Code

The graphic draws to my X11 device, however, when I try to move the X11 
R Graphics Device window with my mouse and 'drop' it somewhere by 
releasing the mouse button, I get errors like the following:

 > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
  : invalid color name
 > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
  : REAL() can only be applied to a 'numeric', not a 'NULL'
 > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
  : VECTOR_ELT() can only be applied to a 'list', not a 'integer'
 > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
  : REAL() can only be applied to a 'numeric', not a 'character'
 > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
  : REAL() can only be applied to a 'numeric', not a 'NULL'
 > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
  : REAL() can only be applied to a 'numeric', not a 'char'
In addition: Warning message:
In grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x,  :
   supplied color is not numeric nor character

My traceback always looks like this:
 > traceback()
5: .Call.graphics(fnname, ..., PACKAGE = "grid")
4: grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x,
        x$y, resolveHJust(x$just, x$hjust), resolveVJust(x$just,
            x$vjust), x$rot, x$check.overlap)
3: drawDetails.text(x, recording = FALSE)
2: drawDetails(x, recording = FALSE)
1: drawGrob(x)

I can only get these messages to happen after loading the tcltk package, 
using grid.text, with 'many' text strings (happens rarely with 100, 
almost every move with 1000 strings as in my example).

I found just one reference to a similar error message in the archives, 
although not to do with grid. Here's a link:

https://stat.ethz.ch/pipermail/r-devel/2008-January/048117.html

Can anyone else replicate this? Any ideas on what's going on?

Best,
Erik Iverson


From p.dalgaard at biostat.ku.dk  Tue Feb  5 22:23:54 2008
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Tue, 05 Feb 2008 22:23:54 +0100
Subject: [Rd] Error in grid.text after tcltk package loaded
In-Reply-To: <47A8C489.4050607@biostat.wisc.edu>
References: <47A8C489.4050607@biostat.wisc.edu>
Message-ID: <47A8D3EA.5030508@biostat.ku.dk>

Erik Iverson wrote:
> Hello -
>
> I am noticing some strange errors when using the grid package, but 
> (apparently) only after loading the tcltk package.  The interaction here 
> does not make sense to me, and I'm wondering if anyone else can 
> reproduce this, or if it is specific to my setup.  Here is my sessionInfo:
>
> sessionInfo()
> R version 2.6.2 RC (2008-02-04 r44332)
> i686-pc-linux-gnu
>
> locale:
> LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C
>
> attached base packages:
> [1] tcltk     grid      stats     graphics  grDevices utils     datasets
> [8] methods   base
>
> This also happens to me in R 2.6.1. I'm running Linux (RHEL 4) on a 
> 32-bit Intel CPU and using KDE.  These are R versions that I have 
> compiled myself.
>
> I try the following in R (started with --vanilla), this is the simplest 
> code I have to reproduce the problem on my end.
>
> ## Start R Code
>
> library(grid)
> library(tcltk)
> grid.text("a", x = seq(0,1, by = .001))
>
> ## End R Code
>
> The graphic draws to my X11 device, however, when I try to move the X11 
> R Graphics Device window with my mouse and 'drop' it somewhere by 
> releasing the mouse button, I get errors like the following:
>
>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>   : invalid color name
>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>   : REAL() can only be applied to a 'numeric', not a 'NULL'
>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>   : VECTOR_ELT() can only be applied to a 'list', not a 'integer'
>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>   : REAL() can only be applied to a 'numeric', not a 'character'
>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>   : REAL() can only be applied to a 'numeric', not a 'NULL'
>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>   : REAL() can only be applied to a 'numeric', not a 'char'
> In addition: Warning message:
> In grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x,  :
>    supplied color is not numeric nor character
>
> My traceback always looks like this:
>  > traceback()
> 5: .Call.graphics(fnname, ..., PACKAGE = "grid")
> 4: grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x,
>         x$y, resolveHJust(x$just, x$hjust), resolveVJust(x$just,
>             x$vjust), x$rot, x$check.overlap)
> 3: drawDetails.text(x, recording = FALSE)
> 2: drawDetails(x, recording = FALSE)
> 1: drawGrob(x)
>
> I can only get these messages to happen after loading the tcltk package, 
> using grid.text, with 'many' text strings (happens rarely with 100, 
> almost every move with 1000 strings as in my example).
>
> I found just one reference to a similar error message in the archives, 
> although not to do with grid. Here's a link:
>
> https://stat.ethz.ch/pipermail/r-devel/2008-January/048117.html
>
> Can anyone else replicate this? Any ideas on what's going on?
>
>   
Hmm, I couldn't reproduce this with Fedora 2.6.1 nor 2.6.2 RC 44192. I 
take it this is not a very recent thing?

It sounds like an event loop mixup, like the BadWindow issue that some 
people see sometimes. Some kind of callback getting lost?

Hmm, I do actually see something like it when _resizing_ the window:

 > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x,  :
  REAL() can only be applied to a 'numeric', not a 'char'
In addition: Warning message:
In grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x,  :
  supplied color is not numeric nor character

> Best,
> Erik Iverson
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>   


-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From iverson at biostat.wisc.edu  Tue Feb  5 22:58:08 2008
From: iverson at biostat.wisc.edu (Erik Iverson)
Date: Tue, 05 Feb 2008 15:58:08 -0600
Subject: [Rd] Error in grid.text after tcltk package loaded
In-Reply-To: <47A8C489.4050607@biostat.wisc.edu>
References: <47A8C489.4050607@biostat.wisc.edu>
Message-ID: <47A8DBF0.1020908@biostat.wisc.edu>



Erik Iverson wrote:
> Hello -
> 
> I am noticing some strange errors when using the grid package, but 
> (apparently) only after loading the tcltk package.  The interaction here 
> does not make sense to me, and I'm wondering if anyone else can 
> reproduce this, or if it is specific to my setup.  Here is my sessionInfo:
> 
> sessionInfo()
> R version 2.6.2 RC (2008-02-04 r44332)
> i686-pc-linux-gnu
> 
> locale:
> LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C
> 
> attached base packages:
> [1] tcltk     grid      stats     graphics  grDevices utils     datasets
> [8] methods   base
> 
> This also happens to me in R 2.6.1. I'm running Linux (RHEL 4) on a 
> 32-bit Intel CPU and using KDE.  These are R versions that I have 
> compiled myself.
> 
> I try the following in R (started with --vanilla), this is the simplest 
> code I have to reproduce the problem on my end.
> 
> ## Start R Code
> 
> library(grid)
> library(tcltk)
> grid.text("a", x = seq(0,1, by = .001))
> 
> ## End R Code
> 
> The graphic draws to my X11 device, however, when I try to move the X11 
> R Graphics Device window with my mouse and 'drop' it somewhere by 
> releasing the mouse button, I get errors like the following:
> 
>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>   : invalid color name
>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>   : REAL() can only be applied to a 'numeric', not a 'NULL'
>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>   : VECTOR_ELT() can only be applied to a 'list', not a 'integer'
>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>   : REAL() can only be applied to a 'numeric', not a 'character'
>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>   : REAL() can only be applied to a 'numeric', not a 'NULL'
>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>   : REAL() can only be applied to a 'numeric', not a 'char'
> In addition: Warning message:
> In grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x,  :
>    supplied color is not numeric nor character
> 
> My traceback always looks like this:
>  > traceback()
> 5: .Call.graphics(fnname, ..., PACKAGE = "grid")
> 4: grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x,
>         x$y, resolveHJust(x$just, x$hjust), resolveVJust(x$just,
>             x$vjust), x$rot, x$check.overlap)
> 3: drawDetails.text(x, recording = FALSE)
> 2: drawDetails(x, recording = FALSE)
> 1: drawGrob(x)
> 
> I can only get these messages to happen after loading the tcltk package, 
> using grid.text, with 'many' text strings (happens rarely with 100, 
> almost every move with 1000 strings as in my example).
> 
> I found just one reference to a similar error message in the archives, 
> although not to do with grid. Here's a link:
> 
> https://stat.ethz.ch/pipermail/r-devel/2008-January/048117.html
> 
> Can anyone else replicate this? Any ideas on what's going on?

One more piece of information.  In Gnome, I noticed the messages only 
when I'd drag the window part of the way off the visible desktop, and 
then drag it back on and drop it.  You could see the X11 window 'flash' 
white quickly and then redraw (sorry for imprecise terminology here).
On KDE, I have it set to show the X11 geometry when moving windows, 
which means it must 'redraw' for each move, since the geometry window 
obscures the device contents.  Once I took off the geometry setting, I 
had to drag the windows part of the way off the screen, and then back on 
to cause this behavior.


> 
> Best,
> Erik Iverson
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From daniel.oberski at gmail.com  Wed Feb  6 00:32:16 2008
From: daniel.oberski at gmail.com (Daniel Oberski)
Date: Wed, 6 Feb 2008 00:32:16 +0100
Subject: [Rd] R valgrind question
In-Reply-To: <47A775B4.8070606@vanderbilt.edu>
References: <817e25730802041221t70ec6378i5e045b57330fa6c6@mail.gmail.com>
	<47A775B4.8070606@vanderbilt.edu>
Message-ID: <817e25730802051532t5459c89p500d580e77a98ae0@mail.gmail.com>

> >
> > If run valgrind R then I get all sorts of warnings. I was wondering
> > whether I should worry about them or not.
>
> Don't worry about them. Those are benign issues with the system
> libraries.. insofar as you trust those libraries, which you should... in
> general.
>
> Jeff


Jeff,

Thanks for your (reassuring) answer. I can see that you are right,
especially about the warnings at the beginning, all of which come from
ld-2.5.so.

I think the memory leak warnings (which do come from libR.so) may have
something to do with the apparent fact that valgrind stops before the
main loop of R is over, so the memory is freed after that point. Or is
this not true?

- daniel


From p.murrell at auckland.ac.nz  Wed Feb  6 02:16:02 2008
From: p.murrell at auckland.ac.nz (Paul Murrell)
Date: Wed, 06 Feb 2008 14:16:02 +1300
Subject: [Rd] Error in grid.text after tcltk package loaded
In-Reply-To: <47A8DBF0.1020908@biostat.wisc.edu>
References: <47A8C489.4050607@biostat.wisc.edu>
	<47A8DBF0.1020908@biostat.wisc.edu>
Message-ID: <47A90A52.7000602@stat.auckland.ac.nz>

Hi

This looks like a problem with some unPROTECTed memory that is getting
grabage collected.  A gpar object that is passed down is being corrupted.

I can make the problem go away by PROTECTing currentgp in gridText() (in
grid.c), but I can't see yet why that needs PROTECTing (if it really
does, then LOTS of similar variables also need PROTECTing).

Thanks for nailing the problem down Erik.

In case anyone else is investigating, I could explore this a little by
putting a gdb break in name2col() and then forcing redraws (resize or
reveal new parts of the window) until one of the redraws triggered the
'invalid color name' error.  (I couldn't see how to trap the 'REAL() can
only ...' errors.)

Paul


Erik Iverson wrote:
> 
> Erik Iverson wrote:
>> Hello -
>>
>> I am noticing some strange errors when using the grid package, but 
>> (apparently) only after loading the tcltk package.  The interaction here 
>> does not make sense to me, and I'm wondering if anyone else can 
>> reproduce this, or if it is specific to my setup.  Here is my sessionInfo:
>>
>> sessionInfo()
>> R version 2.6.2 RC (2008-02-04 r44332)
>> i686-pc-linux-gnu
>>
>> locale:
>> LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] tcltk     grid      stats     graphics  grDevices utils     datasets
>> [8] methods   base
>>
>> This also happens to me in R 2.6.1. I'm running Linux (RHEL 4) on a 
>> 32-bit Intel CPU and using KDE.  These are R versions that I have 
>> compiled myself.
>>
>> I try the following in R (started with --vanilla), this is the simplest 
>> code I have to reproduce the problem on my end.
>>
>> ## Start R Code
>>
>> library(grid)
>> library(tcltk)
>> grid.text("a", x = seq(0,1, by = .001))
>>
>> ## End R Code
>>
>> The graphic draws to my X11 device, however, when I try to move the X11 
>> R Graphics Device window with my mouse and 'drop' it somewhere by 
>> releasing the mouse button, I get errors like the following:
>>
>>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>>   : invalid color name
>>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>>   : REAL() can only be applied to a 'numeric', not a 'NULL'
>>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>>   : VECTOR_ELT() can only be applied to a 'list', not a 'integer'
>>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>>   : REAL() can only be applied to a 'numeric', not a 'character'
>>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>>   : REAL() can only be applied to a 'numeric', not a 'NULL'
>>  > Error in grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x, 
>>   : REAL() can only be applied to a 'numeric', not a 'char'
>> In addition: Warning message:
>> In grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x,  :
>>    supplied color is not numeric nor character
>>
>> My traceback always looks like this:
>>  > traceback()
>> 5: .Call.graphics(fnname, ..., PACKAGE = "grid")
>> 4: grid.Call.graphics("L_text", as.graphicsAnnot(x$label), x$x,
>>         x$y, resolveHJust(x$just, x$hjust), resolveVJust(x$just,
>>             x$vjust), x$rot, x$check.overlap)
>> 3: drawDetails.text(x, recording = FALSE)
>> 2: drawDetails(x, recording = FALSE)
>> 1: drawGrob(x)
>>
>> I can only get these messages to happen after loading the tcltk package, 
>> using grid.text, with 'many' text strings (happens rarely with 100, 
>> almost every move with 1000 strings as in my example).
>>
>> I found just one reference to a similar error message in the archives, 
>> although not to do with grid. Here's a link:
>>
>> https://stat.ethz.ch/pipermail/r-devel/2008-January/048117.html
>>
>> Can anyone else replicate this? Any ideas on what's going on?
> 
> One more piece of information.  In Gnome, I noticed the messages only 
> when I'd drag the window part of the way off the visible desktop, and 
> then drag it back on and drop it.  You could see the X11 window 'flash' 
> white quickly and then redraw (sorry for imprecise terminology here).
> On KDE, I have it set to show the X11 geometry when moving windows, 
> which means it must 'redraw' for each move, since the geometry window 
> obscures the device contents.  Once I took off the geometry setting, I 
> had to drag the windows part of the way off the screen, and then back on 
> to cause this behavior.
> 
> 
>> Best,
>> Erik Iverson
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/


From timh at insightful.com  Wed Feb  6 04:05:27 2008
From: timh at insightful.com (timh at insightful.com)
Date: Wed,  6 Feb 2008 04:05:27 +0100 (CET)
Subject: [Rd] Suggestions for R-intro manual (PR#10701)
Message-ID: <20080206030527.8EFDA2834615@mail.pubhealth.ku.dk>

Some suggestions for R-intro:

--------------------------------------------------
Section 9.2.2, change:
(Note the function split() which produces a list of vectors obtained
by splitting a larger vector according to the classes specified by a
factor. This is a useful function, mostly used in connection with
boxplots. See the help facility for further details.)

    Warning: for() loops are used in R code much less often than in
    compiled languages. Code that takes a `whole object' view is
    likely to be both clearer and faster in R.

to:

    Warning: for() loops are used in R code much less often than in
    compiled languages. Code that takes a `whole object' view is
    likely to be both clearer and faster in R.

(Note the function split() which produces a list of vectors obtained
by splitting a larger vector according to the classes specified by a
factor.  It can also split data frames.  This is a useful function,
often used in combination with lapply to avoid for() loops.  See
help(split) and help(lapply) for further details.)

--------------------------------------------------
Section 10.1

The current twosam is for a pooled-variance t-statistic.
Give the unpooled version instead (for consistency with t.test,
and because it is better statistical practice).


Give initial comments in functions twosam:
# compute a two-sample t-statistic for the difference in means

and bslash:
# Compute least-squares regression coefficients (X'X)^{-}(X'y)


Add initial comments to later functions; even if they are not needed,
this sets a good example.

--------------------------------------------------
Section 11.1.1

This contains outdated information about contrasts in S-PLUS.
For version 8.0.4:
> options("contrasts")
$contrasts:
            factor      ordered 
 "contr.treatment" "contr.poly"

--------------------------------------------------
Section 11.3

In this text:
predict(object, newdata=data.frame)
    The data frame supplied must have variables specified with the
    same labels as the original. The value is a vector or matrix of
    predicted values corresponding to the

it is unclear what "labels" means - same variable names, or same
levels for factor variables.  Change
"variables specified with the same labels" to
"variables with the same names".

--------------------------------------------------
Section 11.6

There is a newer version of Dobson, 2002, second edition.

Dobson is referenced later, in Section 11.7.2.
I don't have the new copy, can't tell you new page numbers.

--------------------------------------------------
Section 12.1

Change
"High-level plotting commands always start a new plot, erasing the
current plot if necessary."
to
"High-level plotting commands start a new plot, erasing the current
plot if necessary.  This can be prevented using 'add=TRUE', see
section 12.1.4"
or
"High-level plotting commands start a new plot, erasing the current
plot if necessary."

--------------------------------------------------
Section 13.3

The last part of this sentence seems irrelevant to this section:
Packages can have namespaces, and currently all of the base and
recommended packages do expect the datasets package.

--------------------------------------------------
Appendix A

Preface comments with #.  I'm looking at the web
version of the manual, and there is nothing to distinguish
continuations of long commands from comments.
Using comments would also allow a user to paste a block
of code into R.

--------------------------------------------------

Tim Hesterberg


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 2
 minor = 6.1
 year = 2007
 month = 11
 day = 26
 svn rev = 43537
 language = R
 version.string = R version 2.6.1 (2007-11-26)

Windows XP (build 2600) Service Pack 2.0

Locale:
LC_COLLATE=English_United States.1252;LC_CTYPE=English_United States.1252;LC_MONETARY=English_United States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252

Search Path:
 .GlobalEnv, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, package:methods, Autoloads, package:base


From ripley at stats.ox.ac.uk  Wed Feb  6 07:39:22 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 6 Feb 2008 06:39:22 +0000 (GMT)
Subject: [Rd] R valgrind question
In-Reply-To: <817e25730802051532t5459c89p500d580e77a98ae0@mail.gmail.com>
References: <817e25730802041221t70ec6378i5e045b57330fa6c6@mail.gmail.com>
	<47A775B4.8070606@vanderbilt.edu>
	<817e25730802051532t5459c89p500d580e77a98ae0@mail.gmail.com>
Message-ID: <alpine.LFD.1.00.0802060635370.12016@gannet.stats.ox.ac.uk>

On Wed, 6 Feb 2008, Daniel Oberski wrote:

>>>
>>> If run valgrind R then I get all sorts of warnings. I was wondering
>>> whether I should worry about them or not.
>>
>> Don't worry about them. Those are benign issues with the system
>> libraries.. insofar as you trust those libraries, which you should... in
>> general.
>>
>> Jeff
>
>
> Jeff,
>
> Thanks for your (reassuring) answer. I can see that you are right,
> especially about the warnings at the beginning, all of which come from
> ld-2.5.so.
>
> I think the memory leak warnings (which do come from libR.so) may have
> something to do with the apparent fact that valgrind stops before the
> main loop of R is over, so the memory is freed after that point. Or is
> this not true?

Various blocks of memory are not freed until the program is shut down, but 
are in use up to that point so it is not a 'leak'.  Most of the warnings 
are not from R itself but from e.g. readline or X11, and all are tiny.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jo.irisson at gmail.com  Wed Feb  6 15:45:04 2008
From: jo.irisson at gmail.com (jo.irisson at gmail.com)
Date: Wed,  6 Feb 2008 15:45:04 +0100 (CET)
Subject: [Rd] Incomplete ouput with sink and split=TRUE e.g. with writeLines
	(PR#10713)
Message-ID: <20080206144504.9442D2834615@mail.pubhealth.ku.dk>

Full_Name: Jean-Olivier Irisson
Version: 2.6.1
OS: OS X 10.5.1, Linux FC 8
Submission from: (NULL) (194.167.139.32)


Example steps:

> sink("test1.txt")
> cat("foo\n")
> writeLines("bar\n")
> sink()
> sink("test2.txt", split=T)
> cat("foo\n")
foo
> writeLines("bar\n")
> sink()

And the content of the files are:

$ head test*
==> test1.txt <==
foo
bar


==> test2.txt <==
foo
bar

So all the output is correctly directed to the file connection but only some of
it is directed to the console (cat but not writeLines). This can be a problem
with writeLines but Duncan Murdoch on R-help stated that: "it is probably a sign
of a bigger problem in sink()".

Real life example:
> sink("test3.txt", split=T)
> t.test(runif(10),round(runif(10)*2))


data:  runif(10) and round(runif(10) * 2) 
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -0.9403446  0.2048443 
sample estimates:
mean of x mean of y 
0.5322499 0.9000000 

> sink()

$ head test3.txt 

	Welch Two Sample t-test

data:  runif(10) and round(runif(10) * 2) 
t = -1.3766, df = 14.103, p-value = 0.1901
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -0.9403446  0.2048443 
sample estimates:
mean of x mean of y 

Thank you in advance for your help.


From jhallman at frb.gov  Wed Feb  6 17:25:40 2008
From: jhallman at frb.gov (Jeffrey J. Hallman)
Date: Wed, 06 Feb 2008 11:25:40 -0500
Subject: [Rd] argument order for Math2 group functions in R 2.6.x
	(PR#10679)
References: <20080201233503.ABD1E2834632@mail.pubhealth.ku.dk>
	<web-199992018@cgpsrv2.cis.mcmaster.ca>
Message-ID: <xmrsl06aw6z.fsf@mralx1.rsma.frb.gov>

You could always define your own signif() as

signif <- function(x, digits = 6){
   base::signif(x, digits)
}

I do something like this for signif() and round() because economists don't
like the round-to-even convention R uses.  My round() function, for example,
is:

round <- function(x, digits = 0, round.to.even = FALSE){
  ## Fixed to always round 0.5 to 1.  The S "round to even" convention
  ## can be switched on via the round.to.even argument. -- JJH
  xclass <- class(x)
  if(is.matrix(x)){
    digits <- rep(digits, length=ncol(x))
    for(j in 1:ncol(x))
      x[,j] <- round(x[,j], digits = digits[j], round.to.even = round.to.even)
  }
  else {
    if(round.to.even)
      return(base::round(x, digits))
    ten.to.digits <- 10^digits
    x <- trunc((x * ten.to.digits) + (sign(x[]) * 0.5))/ten.to.digits
  }
  class(x) <- xclass
  return(x)
}

Sure, it's a lot slower.  It still saves me several hours a year from not
having to explain what round-to-even does, and why my users should learn to
like it.  They violently object to the idea that

1 + round(1.5) != round(1 + 1.5)


-- 
Jeff


From daniel.oberski at gmail.com  Wed Feb  6 20:44:46 2008
From: daniel.oberski at gmail.com (Daniel Oberski)
Date: Wed, 6 Feb 2008 20:44:46 +0100
Subject: [Rd] R valgrind question
In-Reply-To: <alpine.LFD.1.00.0802060635370.12016@gannet.stats.ox.ac.uk>
References: <817e25730802041221t70ec6378i5e045b57330fa6c6@mail.gmail.com>
	<47A775B4.8070606@vanderbilt.edu>
	<817e25730802051532t5459c89p500d580e77a98ae0@mail.gmail.com>
	<alpine.LFD.1.00.0802060635370.12016@gannet.stats.ox.ac.uk>
Message-ID: <817e25730802061144rd9c4a30id21cb8cb9c4b4bdd@mail.gmail.com>

> Various blocks of memory are not freed until the program is shut down, but
> are in use up to that point so it is not a 'leak'.  Most of the warnings
> are not from R itself but from e.g. readline or X11, and all are tiny.

That makes sense, thank you for clarifying.

best regards,
daniel


From hin-tak.leung at cimr.cam.ac.uk  Wed Feb  6 21:37:22 2008
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Wed, 06 Feb 2008 20:37:22 +0000
Subject: [Rd] (PR#10696) maybe a bug in the system.time() function?
In-Reply-To: <5F250875-8866-4155-8413-CA4E90DCC171@ceremade.dauphine.fr>
References: <20080204154504.1BC812834612@mail.pubhealth.ku.dk>
	<47A757EA.6070503@cimr.cam.ac.uk>
	<5F250875-8866-4155-8413-CA4E90DCC171@ceremade.dauphine.fr>
Message-ID: <47AA1A82.1030108@cimr.cam.ac.uk>

Alessandra Iacobucci wrote:
> 
> On Feb 4, 2008, at 7:22 PM, Hin-Tak Leung wrote:
> 
>> You will get yelled at by others for posting a question as a bug... 
>> (sigh). See FAQ.
> 
> I am a non-member so my message should normally pass through a moderator.

Your understanding is again wrong - AFAIK, R-devel/R-user don't moderate 
against mon-members - *and* the point of the FAQ is that it *wastes*
core R member's time to clear up non-bugs on the bug tracking system,
so you are wrong on 3 counts there (wrong for posting non-bugs as bug
reports, wrong for assuming that non-bug reports are moderated, and
wrong to assume that moderator/R-core member's time are not valuable).

A simple question like yours to R-devel/R-user can be answered by
non-R-core people who is experienced in R, and more of them, that's the
difference.

Please read the FAQ, and read the spirit behind it as well.

>> That said, your understanding of the output of system.time() is wrong.
>> The value you are after is simply user+system. %CPU is essentially
>> user+system/elapsed. It is elapsed which is dependent on system
>> load, not the other two (usually).
> 
> Usually. By running a given simulation I got
> 
>     user        system      elapsed
>       6.161       0.066       6.608
> 
> By running the same exact simulation (same set of parameters, same 
> seeds, same everything)  and running contemporaneously other two 
> processes this is what I got
> 
>       7.515       0.084      11.062
> 
> As you can see, and this is what it strikes me and push me to that 
> wretched action, it is not only the elapsed time that depends on %CPU. I 
> would have expected the same value for user or system time.
> 
>>
>> Back into replying more in the usual R-devel sarcastic style... if you 
>> don't understand what user/system/elapsed means, you really have no
>> place studying CPU loads...
> 
> I surely have no place in studying CPU loads. Now, could you tell me why 
> I do not get the same values?
> 
> Is it possible to get or how could one calculate just the amount of time 
> that the machine spends in doing just this simulation and nothing else, 
> without asking the entire department not to use it?
> 
> Thanks in advance for you answer.

First, for something like <10 sec you are going to have uncertainty from
the garbage collection, and the granularity of sampling - you need to 
time something that's a bit longer to get out of both of these; 2nd, you
never mention anything about your machine/architecture of your Mac OS X box.

Your system is probably running on multi-core CPUs, which looks like
more than 1 CPU from some applications, but certain kind of applications
do interfere with each other on multi-core CPUs (it is really just one 
pretending to be two), and there is not much you can do about it, other
than, as you said, ask others not to use it.

>> iacob at ceremade.dauphine.fr wrote:
>>> Full_Name: Alessandra Iacobucci
>>> Version: 2.5.1
>>> OS: Mac OS X 10.4.11
>>> Submission from: (NULL) (193.48.71.92)
>>> Hi,
>>> I am making some intensive simulations for the testing of a 
>>> Population Monte
>>> Carlo algorithm. This involves also a study of the CPU times in two 
>>> different
>>> case.
>>> What I am trying to measure is the "real" CPU time, the one which is 
>>> independent
>>> on the %CPU. I'm using the "system.time" function with gcFirst=TRUE 
>>> and I realized that all
>>> of the output values (user, system and elapsed) depend on the 
>>> percentage of the
>>> CPU, meaning that if your program is the only one running on the 
>>> machine,
>>> system.time() gives you  certain values, and if there are many 
>>> programs running
>>> at the same time, for the exact same simulation system.time() gives 
>>> you much
>>> higher values.
>>> Thanks for you answer.
>>> Best regards,
>>> Alessandra Iacobucci
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>


From bill at insightful.com  Thu Feb  7 00:40:03 2008
From: bill at insightful.com (bill at insightful.com)
Date: Thu,  7 Feb 2008 00:40:03 +0100 (CET)
Subject: [Rd] codetools::checkUsage should ignore expression in Quote(expr)
	(PR#10719)
Message-ID: <20080206234004.0D9B2283462B@mail.pubhealth.ku.dk>

Full_Name: Bill Dunlap
Version: R version 2.7.0 Under development (unstable) (2008-02-05 r44340)
OS: Linux
Submission from: (NULL) (76.28.245.14)


codetools::checkUsage() should treat the Quote() function
just as it does the quote() and expression() functions: by
ignoring its argument.  Currently 'R CMD check pkg' complains
if pkg's R code calls Quote(unknownName) but is quiet about
quote(unknownName).  quote() and Quote() are identical, but
Quote is provided for compatibility with Splus (and version
4 of S).

I would expect all the following to make no complaints.

> codetools::checkUsage(function(x=Quote(hello(world)))x)
<anonymous>: no visible global function definition for 'hello'
<anonymous>: no visible binding for global variable 'world'
> codetools::checkUsage(function(x=quote(hello(world)))x)
> codetools::checkUsage(function(x=expression(hello(world)))x)


From efg at stowers-institute.org  Thu Feb  7 00:46:27 2008
From: efg at stowers-institute.org (Earl F. Glynn)
Date: Wed, 6 Feb 2008 17:46:27 -0600
Subject: [Rd] Building R for Windows
Message-ID: <fodgsk$95r$1@ger.gmane.org>

I have some C code (using an old Borland compiler)  that calls a DLL that 
I'd like to get working from Windows and R (so I can read ABF files -- Axon 
Binary Files -- directly in R).

I thought a good first approach would be able to build  R in Windows, so 
that's what I'm trying to do.  [I've done test builds of R under Linux 
before, and that seemed fairly simple.]

I've tried to follow the instructions "Building R for Windows" from here:
http://www.murdoch-sutherland.com/Rtools/

I installed Rtools27.exe and the other tools suggested here:
http://www.murdoch-sutherland.com/Rtools/Rtools.txt

I followed the instructions in first Rtools link "Obtaining the R source 
code" and have a directory with the latest C:\R\R-2-6-1.

Should the "Building R for Windows" document say something about what should 
be done next?

Section 2.1 Simple compilation
http://cran.r-project.org/doc/manuals/R-admin.html#The-Windows-toolset
says:

./configure
make

These two statements work find on Linux, but I must be missing something 
under Windows XP Pro?  Any suggestions?

Also, what changes must be made to build R on a 64-bit Windows box?  Do R 
Tools work for a 64-bit environment?

Thanks for any help on this.

Earl F. Glynn
Bioinformatics
Stowers Institute for Medical Research


From murdoch at stats.uwo.ca  Thu Feb  7 02:19:05 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed, 06 Feb 2008 20:19:05 -0500
Subject: [Rd] Building R for Windows
In-Reply-To: <fodgsk$95r$1@ger.gmane.org>
References: <fodgsk$95r$1@ger.gmane.org>
Message-ID: <47AA5C89.6030303@stats.uwo.ca>

On 06/02/2008 6:46 PM, Earl F. Glynn wrote:
> I have some C code (using an old Borland compiler)  that calls a DLL that 
> I'd like to get working from Windows and R (so I can read ABF files -- Axon 
> Binary Files -- directly in R).
> 
> I thought a good first approach would be able to build  R in Windows, so 
> that's what I'm trying to do.  [I've done test builds of R under Linux 
> before, and that seemed fairly simple.]
> 
> I've tried to follow the instructions "Building R for Windows" from here:
> http://www.murdoch-sutherland.com/Rtools/
> 
> I installed Rtools27.exe and the other tools suggested here:
> http://www.murdoch-sutherland.com/Rtools/Rtools.txt
> 
> I followed the instructions in first Rtools link "Obtaining the R source 
> code" and have a directory with the latest C:\R\R-2-6-1.
> 
> Should the "Building R for Windows" document say something about what should 
> be done next?
> 
> Section 2.1 Simple compilation
> http://cran.r-project.org/doc/manuals/R-admin.html#The-Windows-toolset
> says:
> 
> ./configure
> make
> 
> These two statements work find on Linux, but I must be missing something 
> under Windows XP Pro?  Any suggestions?

Those are Unix instructions.  You want to follow the Windows 
instructions, in section 3.1.2 of that document:

> Open a command window at R_HOME/src/gnuwin32. Edit MkRules to set the appropriate paths as needed and to set the type(s) of help that you want built. Beware: MkRules contains tabs and some editors (e.g., WinEdt) silently remove them. Then run
> 
>      make all recommended
> 
> and sit back and wait while the basic compile takes place. 


Duncan Murdoch

> 
> Also, what changes must be made to build R on a 64-bit Windows box?  Do R 
> Tools work for a 64-bit environment?
> 
> Thanks for any help on this.
> 
> Earl F. Glynn
> Bioinformatics
> Stowers Institute for Medical Research
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From p.dalgaard at biostat.ku.dk  Thu Feb  7 10:13:44 2008
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Thu, 07 Feb 2008 10:13:44 +0100
Subject: [Rd] [R] 2.6.2 RC
In-Reply-To: <5abc11d80802070008q48c4d0b5k37599c1de7fd499f@mail.gmail.com>
References: <5abc11d80802070008q48c4d0b5k37599c1de7fd499f@mail.gmail.com>
Message-ID: <47AACBC8.9090409@biostat.ku.dk>

??? wrote:
> Hi,
>
> I noticed that the 2.6.2 tar ball did not update, is it a good sign that no
> bugs have been found and it is ready to go?
>
>   
No. It's a sign that I can't type. The crontab was set for making builds 
on Feb 1-6.... I have initiated a manual build which should show up on 
www.biostat.ku.dk/~pd/R-pre in a short while.

    -p

(Moved to r-devel, please follow up there)
> Shige
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>   


-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From jinghuazhao at hotmail.com  Thu Feb  7 18:00:40 2008
From: jinghuazhao at hotmail.com (jing hua zhao)
Date: Thu, 7 Feb 2008 17:00:40 +0000
Subject: [Rd] pnorm
Message-ID: <BAY127-W15EFA85D9E6F501736E0CFA52E0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080207/cc29da67/attachment.pl 

From martin.becker at mx.uni-saarland.de  Thu Feb  7 18:08:05 2008
From: martin.becker at mx.uni-saarland.de (Martin Becker)
Date: Thu, 07 Feb 2008 18:08:05 +0100
Subject: [Rd] pnorm
In-Reply-To: <BAY127-W15EFA85D9E6F501736E0CFA52E0@phx.gbl>
References: <BAY127-W15EFA85D9E6F501736E0CFA52E0@phx.gbl>
Message-ID: <47AB3AF5.3060605@mx.uni-saarland.de>

I guess that you destroy the accuracy of the calculation by the 
subtraction. Try
  2*(pnorm(8.104474,lower=FALSE))
instead, which results in
  5.29742e-16
for me.

Regards,
  Martin



jing hua zhao schrieb:
> Dear R list,
>
> I calculated a two-sided p values according to 2*(1-pnorm(8.104474)), which gives  4.440892e-16. However, it appears to be  5.30E-16 by a colleague and 5.2974E-16 from SAS. I tried to get around with mvtnorm package but it turns out to be using pnorm for univariate case. I should have missed some earlier discussions, but for the moment is there any short answer for a higher precision? Somehow these days, statistical geneticists are infatuated with such tiny p values!
>
> Many thanks in advance,
>
>
> Jing Hua
>
> _________________________________________________________________
> Telly addicts unite!
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From murdoch at stats.uwo.ca  Thu Feb  7 18:11:06 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Thu, 07 Feb 2008 12:11:06 -0500
Subject: [Rd] pnorm
In-Reply-To: <BAY127-W15EFA85D9E6F501736E0CFA52E0@phx.gbl>
References: <BAY127-W15EFA85D9E6F501736E0CFA52E0@phx.gbl>
Message-ID: <47AB3BAA.3050101@stats.uwo.ca>

On 2/7/2008 12:00 PM, jing hua zhao wrote:
> Dear R list,
> 
> I calculated a two-sided p values according to 2*(1-pnorm(8.104474)), which gives  4.440892e-16. However, it appears to be  5.30E-16 by a colleague and 5.2974E-16 from SAS. I tried to get around with mvtnorm package but it turns out to be using pnorm for univariate case. I should have missed some earlier discussions, but for the moment is there any short answer for a higher precision? 

You are taking the difference between two numbers, 1 and a number that 
is almost equal to 1.  Don't do that, it results in a catastrophic loss 
of precision.

Evaluate the upper tail probability directly:

 > 2*(pnorm(8.104474, lower=FALSE))
[1] 5.29742e-16

Duncan Murdoch

Somehow these days, statistical geneticists are infatuated with such 
tiny p values!
> 
> Many thanks in advance,
> 
> 
> Jing Hua
> 
> _________________________________________________________________
> Telly addicts unite!
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Thu Feb  7 18:11:16 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 7 Feb 2008 17:11:16 +0000 (GMT)
Subject: [Rd] pnorm
In-Reply-To: <BAY127-W15EFA85D9E6F501736E0CFA52E0@phx.gbl>
References: <BAY127-W15EFA85D9E6F501736E0CFA52E0@phx.gbl>
Message-ID: <alpine.LFD.1.00.0802071706580.20935@gannet.stats.ox.ac.uk>

On Thu, 7 Feb 2008, jing hua zhao wrote:

>
> Dear R list,
>
> I calculated a two-sided p values according to 2*(1-pnorm(8.104474)), 
> which gives 4.440892e-16. However, it appears to be 5.30E-16 by a 
> colleague and 5.2974E-16 from SAS. I tried to get around with mvtnorm 
> package but it turns out to be using pnorm for univariate case. I should 
> have missed some earlier discussions, but for the moment is there any 
> short answer for a higher precision? Somehow these days, statistical 
> geneticists are infatuated with such tiny p values!

2*pnorm(8.104474, lower=FALSE)

You can't find a small number accurately by subtraction: pnorm(8.104474) 
is being returned as the number the second smaller than one in IEC60559 
arithmetic.

>
> Many thanks in advance,
>
>
> Jing Hua
>
> _________________________________________________________________
> Telly addicts unite!
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From dimitris.rizopoulos at med.kuleuven.be  Thu Feb  7 18:16:32 2008
From: dimitris.rizopoulos at med.kuleuven.be (Dimitris Rizopoulos)
Date: Thu, 7 Feb 2008 18:16:32 +0100
Subject: [Rd] pnorm
References: <BAY127-W15EFA85D9E6F501736E0CFA52E0@phx.gbl>
Message-ID: <00bb01c869ad$2f8197e0$0e40210a@www.domain>

you should use the 'lower.tail' argument of pnorm(), e.g., check the 
following:

2 * (1 - pnorm(8.104474))
2 * pnorm(8.104474, lower.tail = FALSE)


I hope it helps.

Best,
Dimitris

----
Dimitris Rizopoulos
Ph.D. Student
Biostatistical Centre
School of Public Health
Catholic University of Leuven

Address: Kapucijnenvoer 35, Leuven, Belgium
Tel: +32/(0)16/336899
Fax: +32/(0)16/337015
Web: http://med.kuleuven.be/biostat/
     http://www.student.kuleuven.be/~m0390867/dimitris.htm

----- Original Message ----- 
From: "jing hua zhao" <jinghuazhao at hotmail.com>
To: <r-devel at stat.math.ethz.ch>
Sent: Thursday, February 07, 2008 6:00 PM
Subject: [Rd] pnorm


>
> Dear R list,
>
> I calculated a two-sided p values according to 
> 2*(1-pnorm(8.104474)), which gives  4.440892e-16. However, it 
> appears to be  5.30E-16 by a colleague and 5.2974E-16 from SAS. I 
> tried to get around with mvtnorm package but it turns out to be 
> using pnorm for univariate case. I should have missed some earlier 
> discussions, but for the moment is there any short answer for a 
> higher precision? Somehow these days, statistical geneticists are 
> infatuated with such tiny p values!
>
> Many thanks in advance,
>
>
> Jing Hua
>
> _________________________________________________________________
> Telly addicts unite!
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


Disclaimer: http://www.kuleuven.be/cwis/email_disclaimer.htm


From timh at insightful.com  Thu Feb  7 20:39:57 2008
From: timh at insightful.com (Tim Hesterberg)
Date: Thu, 07 Feb 2008 11:39:57 -0800
Subject: [Rd] Sampling with unequal probabilities
Message-ID: <u4pckh7xu.fsf@insightful.com>

This is in followup to a thread on R-help with subject "Sampling".
I claim that R does the wrong thing by default when
sampling with unequal probabilities without replacement -
the selection probabilities are not proportional to 'prob',
for any draw after the first: I suggest that R do what S-PLUS now does
(though you're free to choose a better implementation).

What S-PLUS now does is:
If 'replace==TRUE' then sample with replacement.
Otherwise, sample without replacement or with minimal replacement,
according to the value of argument 'minimal'.
The default is 'minimal = length(prob) > 1'.
One can specify 'minimal = FALSE' for backward compatibility.

In the case of sampling with minimal replacement, duplicates
may occur whenever 'max(size*prob) > 1', and are guaranteed if
'max(size*prob) >= 2'.  You can think of drawing
'trunc(size*prob)' observations deterministically,
then drawing the remaining 'size - sum(trunc(size*prob))' observations
without replacement, with an adjusted prob vector.

The algorithm I used is relatively simple.  It is one of the
Brewer and Hanif algorithms (though I don't recall if they used
the final random shuffle).  Here's one description, or you
may prefer the description in
Pedro J. Saavedra (2005)
Comparison of Two Weighting Schemes for Sampling with Minimal Replacement 
http://www.amstat.org/Sections/Srms/Proceedings/y2005/Files/JSM2005-000882.pdf

In the case of minimal = TRUE (sampling with minimal replacement),
with unequal probabilities:
* scale prob to sum to 1,
* randomly sort the observations along with prob
* let cprob = cumsum(prob), 
* draw a systematic sample of size 'size' in (0,1):
  uniformVector <- (1:size - runif(1))/size
* observation i is selected if cprob[i-1] < uniformVector[j] <= cprob[i]
  for any j
  In the case (size*max(prob) > 1), the number of times the observation
  is selected is the number of j's for which the inequalities hold.
* the selected observations are randomly sorted again.

Tim Hesterberg
Disclaimer - these are my opinions, not Insightful's.


From ojohnson at progress.com  Wed Feb  6 23:57:09 2008
From: ojohnson at progress.com (Oran Johnson)
Date: Wed, 6 Feb 2008 17:57:09 -0500
Subject: [Rd] The standalone Rmath library and VC++ 2003
In-Reply-To: <alpine.LFD.1.00.0801301830520.5664@gannet.stats.ox.ac.uk>
References: <427B18C08050B745B13ADA8EE5A99D9A019769FC@MAIL03.bedford.progress.com>
	<alpine.LFD.1.00.0801301754240.4291@gannet.stats.ox.ac.uk>
	<427B18C08050B745B13ADA8EE5A99D9A01976C32@MAIL03.bedford.progress.com>
	<alpine.LFD.1.00.0801301830520.5664@gannet.stats.ox.ac.uk>
Message-ID: <427B18C08050B745B13ADA8EE5A99D9A019CC1B5@MAIL03.bedford.progress.com>

Where is "double	rnbeta(double, double, double);" ?

It's in Rmath.h, but in the source or supporting libs.

Oran

-----Original Message-----
From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk] 
Sent: Wednesday, January 30, 2008 1:36 PM
To: Oran Johnson
Cc: r-devel at r-project.org
Subject: RE: [Rd] The standalone Rmath library and VC++ 2003

On Wed, 30 Jan 2008, Oran Johnson wrote:

> Yes, I used Rtools to compile the standalone Rmath library. However,
> C:\Rtools\MinGW\lib\libm.a does not contain log1p;
> C:\Rtools\MinGW\lib\libmingwex.a does. Once I replaced libm.a with
> libmingwex.a, the application linked successfully and the following
test
> program was successful:

MinGW's loader will pick up the correct set of default libraries, which 
does include -lmingwex and much else, so if you build a DLL, these entry

points are compiled in already.

Otherwise, it is down to you to figure out how to link, and it may
change 
from time to time. Just the same experience as when you mix-and-match 
compilers on a Unix-alike (try mixing gcc3 and gcc4, or gcc and Sun 
Studio).


>
> #include <iostream>
> #define MATHLIB_STANDALONE
> #include <Rmath.h>
>
> int main()
> {
> 	double d = dbeta(0.5, 2.0, 3.0, 1);
> 	double q = qbeta(0.5, 2.0, 3.0, 1, 0);
> 	double p = pbeta(0.5, 2.0, 3.0, 1, 0);
> 	double r = rbeta(0.5, 2.0);
>
> 	std::cout << "dbeta = " << d << "\n";
> 	std::cout << "qbeta = " << q << "\n";
> 	std::cout << "pbeta = " << p << "\n";
> 	std::cout << "rbeta = " << r << "\n";
> }
>
>
> dbeta = 0.405465
> qbeta = 0.385728
> pbeta = 0.6875
> rbeta = 0.422286
> Press any key to continue
>
> Thanks
> Oran
>
> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> Sent: Wednesday, January 30, 2008 1:06 PM
> To: Oran Johnson
> Cc: r-devel at r-project.org
> Subject: Re: [Rd] The standalone Rmath library and VC++ 2003
>
> On Tue, 29 Jan 2008, Oran Johnson wrote:
>
>> Linking my VC++ application with the standalone Rmath library yields
> the
>> following;
>
> Looks like you compiled the standalone Rmath library with MinGW.  You
> can't expect to mix-and-match compilers and link together a static
> library
> built under another compiler.
>
> It is possible that this will work if you try linking to Rmath.dll:
> WIndows' DLLs are fairly portable (although parameter passing
> conventions
> do differ, and we know 'double complex' is not portable).  I assume
you
> know how to make a VC++ import library from a DLL, which you would
need
> to
> do.
>
> If you compiled standalone Rmath under VC++, you would not have got a
.a
>
> but a lib, at least by default.  You are welcome to try that: it has
> been
> done in the past but is not something we support (nor even would want
to
>
> answer questions about).
>
>
>> ------ Build started: Project: Complex plugin, Configuration: Debug
>> Win32 ------
>>
>>
>>
>> Linking...
>>
>>   Creating library .\../Debug/complex_plugin.lib and object
>> .\../Debug/complex_plugin.exp
>>
>> libRmath.a(mlutils.o) : warning LNK4217: locally defined symbol __iob
>> imported in function _REprintf
>>
>> libRmath.a(dbeta.o) : error LNK2019: unresolved external symbol
_log1p
>> referenced in function _dbeta
>>
>> libRmath.a(qbeta.o) : error LNK2019: unresolved external symbol
_log1p
>> referenced in function _qbeta
>>
>> libRmath.a(lbeta.o) : error LNK2019: unresolved external symbol
_log1p
>> referenced in function _lbeta
>>
>> libRmath.a(toms708.o) : error LNK2001: unresolved external symbol
> _log1p
>>
>> libRmath.a(qbeta.o) : error LNK2019: unresolved external symbol
_expm1
>> referenced in function _qbeta
>>
>> libRmath.a(mlutils.o) : error LNK2019: unresolved external symbol
>> ___fpclassify referenced in function _R_pow
>>
>> ../Debug/complex_plugin.dll : fatal error LNK1120: 3 unresolved
>> externals
>>
>>
>>
>> Build log was saved at "file://c:\starting point\Debug\BuildLog.htm"
>>
>> Complex plugin - 7 error(s), 1 warning(s)
>>
>>
>>
>>
>>
>> ---------------------- Done ----------------------
>>
>>
>>
>>    Build: 0 succeeded, 1 failed, 0 skipped
>>
>>
>>
>> At first glance, it looks like C:\Rtools\MinGW\lib\libm.a is missing.
>> After adding it to my project properties, the results are the same.
It
>> looks like VC++ is OK with GNU libraries because it appears to accept
>> libRmath which was built on the same machine using Rtools. Also it
> does
>> not appear to be a configuration issue, because it's only found
>> 'C:\Rtools\MinGW\lib' and VC+ is complaining about not finding it.
>>
>>
>>
>> Any ideas?
>>
>>
>>
>> Oran
>>
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From tlumley at u.washington.edu  Thu Feb  7 22:04:58 2008
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu, 7 Feb 2008 13:04:58 -0800 (PST)
Subject: [Rd] pnorm
In-Reply-To: <BAY127-W15EFA85D9E6F501736E0CFA52E0@phx.gbl>
References: <BAY127-W15EFA85D9E6F501736E0CFA52E0@phx.gbl>
Message-ID: <Pine.LNX.4.64.0802071300070.21946@homer22.u.washington.edu>

On Thu, 7 Feb 2008, jing hua zhao wrote:
>
> I calculated a two-sided p values according to 2*(1-pnorm(8.104474)), 
> which gives 4.440892e-16. However, it appears to be 5.30E-16 by a 
> colleague and 5.2974E-16 from SAS. I tried to get around with mvtnorm 
> package but it turns out to be using pnorm for univariate case. I should 
> have missed some earlier discussions, but for the moment is there any 
> short answer for a higher precision?

pnorm(8.104474,lower.tail=FALSE)*2 gives the same answer as SAS, and
pnorm(8.104474,lower.tail=FALSE,log=TRUE)/log(10)+log(2,10)
gives the (base-10) logarithm of the p-value, which is often the preferred 
genetics scale. These are much more accurate.


>					Somehow these days, statistical 
> geneticists are infatuated with such tiny p values!

Yes, but in my experience they are at least fairly realistic about the 
lack of difference between 4e-16 and 5e-16.

 	-thomas

Thomas Lumley			Assoc. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle


From mwkimpel at gmail.com  Thu Feb  7 23:49:29 2008
From: mwkimpel at gmail.com (Mark W Kimpel)
Date: Thu, 07 Feb 2008 17:49:29 -0500
Subject: [Rd] help with R rendering engine
Message-ID: <47AB8AF9.5000202@gmail.com>

I'm doing some work on a potential patch to the Bioconductor package 
Rgraphviz and have some questions on code that is contained in engine.c. 
In particular, I am developing some custom shapes using polygon and need 
to make sure that, with rendering, the line connecting the centers of 
two polygons stops at the border of each polygon. The polygons can be 
transparent, so the option of just rendering the lines first won't work.

Is there some help for me with an R internal or perhaps a higher level 
function?

Thanks,
Mark
-- 

Mark W. Kimpel MD  ** Neuroinformatics ** Dept. of Psychiatry
Indiana University School of Medicine

15032 Hunter Court, Westfield, IN  46074

(317) 490-5129 Work, & Mobile & VoiceMail
(317) 204-4202 Home (no voice mail please)

mwkimpel<at>gmail<dot>com


From ggrothendieck at gmail.com  Fri Feb  8 00:55:18 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 7 Feb 2008 18:55:18 -0500
Subject: [Rd] Choosing CRAN Mirror in Windows GUI
Message-ID: <971536df0802071555y6c286b13idb1e56a0c6827985@mail.gmail.com>

When you choose the CRAN Mirror in the Windows
GUI Packages menu in "R version 2.6.2 alpha (2008-01-26 r44181)"
the first mirror is highlighted when you open it even
if the mirror had been set.  If the mirror had previously been
set then that previously set mirror should be highlighted rather
than the first mirror.


From hpages at fhcrc.org  Fri Feb  8 05:29:39 2008
From: hpages at fhcrc.org (Herve Pages)
Date: Thu, 07 Feb 2008 20:29:39 -0800
Subject: [Rd] Pb with lapply()
In-Reply-To: <18338.56655.821827.434654@stat.math.ethz.ch>
References: <1201803991.47a212d790acf@webmail.fhcrc.org>
	<18338.56655.821827.434654@stat.math.ethz.ch>
Message-ID: <47ABDAB3.7010000@fhcrc.org>

Thanks Martin for your patient and detailed explanations!

So with the base4 solution, base would import base4 so lapply() could
call base4::as.list()? Sounds good.
Making as.list() a *primitive* function with C-internal S3 and S4
method dispatch: like for length(), etc...? Sounds good too.

I'm wondering why can't as.list() just be made an S4 generic in base.
Or in methods, which seems to be a more appropriate place for S4 generics.
But then I guess lapply() would have to be moved to methods too and that
would break code importing base but not methods...

Sounds like there is no simple solution indeed.

Cheers,
H.


Martin Maechler wrote:
>>>>>> "HP" == Herve Pages <hpages at fhcrc.org>
>>>>>>     on Thu, 31 Jan 2008 10:26:31 -0800 writes:
> 
>     HP> Hi, If needed, lapply() tries to convert its first
>     HP> argument into a list before it starts doing something
>     HP> with it:
> 
>     >> lapply
>     HP> function (X, FUN, ...) 
>     HP> {
>     HP>   FUN <- match.fun(FUN)
>     HP>   if (!is.vector(X) || is.object(X)) 
>     HP>       X <- as.list(X)
>     HP>   .Internal(lapply(X, FUN))
>     HP> }
> 
>     HP> But in practice, things don't always seem to "work" as suggested by
>     HP> this code (at least to the eyes of a naive user).
> 
> Yes.  That is the infamous problem of what I'd call a mental conflict
> between namespaces and function-centered OOP (as in S3 or S4),
> or put differently, the problem that not all R functions are
> S4 generics right from the start :
>  
> Both lapply() and as.list() are in the base namespace.
> Consequently, lapply() will always call base::as.list() and
> unfortunately  base::as.list() is not becoming an S4 generic by your
> 
>     >> setClass("A", representation(data="list"))
>     HP> [1] "A"
>     >> setMethod("as.list", "A", function(x, ...) x at data)
>     HP> Creating a new generic function for "as.list" in ".GlobalEnv"
>     HP> [1] "as.list"
> 
> See: it's an S4 generic only in .GlobalEnv, but to really work
> it should be an S4 generic in base.
> 
> 
>     HP> Seems like using force() inside lapply() would solve the problem:
> 
> Well, it's not force() that makes it work,
> it's the fact that you define a version of lapply outside "base"
> and that of course does see your as.list() generic in .GlobalEnv ..
> 
>     HP> lapply2 <- function(X, FUN, ...)
>     HP> {
>     HP> FUN <- match.fun(FUN)
>     HP> if (!is.vector(X) || is.object(X))
>     HP> X <- force(as.list(X))
>     HP> .Internal(lapply(X, FUN))
>     HP> }
> 
>     HP> It works now:
> 
>     [...........]
> 
> 
> Now one "solution" to the problem is to redefine  base::as.list()
> to be your S4 generic.  Most smart useRs I know would call this
> a terrible hack though...
> and yes, I'm guilty of committing that hack -- inside the Matrix package, 
> not for as.list() but for as.matrix():
> 
> The consequence of that is that e.g.  eigen() *does* work for
> all our matrices, because eigen starts with as.matrix() and that
> needs to work as a proper (i.e. S4) generic in order to work as
> it should. 
> 
> A much better solution to the underlying deeper problem would be
> to find a way where ___ conceptually ___ part (or all of)
> 'methods' would be inside of 'base', and  as.list(), as.matrix()
> etc all S4 (and S3 simultaneously) generics. 
> [and we have pondered of using  'base4' for that,
>  which would contain part of current base and part of current methods;
>  but there have been different ideas].
> 
> One workaround/solution used recently (notably for the group generics)
> was to make more of these functions into
> *primitive* functions with C-internal S3 and S4 method dispatch.
> That maybe a desideratum for "now".
> 
> Martin Maechler, ETH Zurich (and R core team)
>


From jinghuazhao at hotmail.com  Fri Feb  8 10:17:30 2008
From: jinghuazhao at hotmail.com (jing hua zhao)
Date: Fri, 8 Feb 2008 09:17:30 +0000
Subject: [Rd] pnorm
In-Reply-To: <Pine.LNX.4.64.0802071300070.21946@homer22.u.washington.edu>
References: <BAY127-W15EFA85D9E6F501736E0CFA52E0@phx.gbl>
	<Pine.LNX.4.64.0802071300070.21946@homer22.u.washington.edu>
Message-ID: <BAY127-W4A8F1CDAE437FD33BAA66A52F0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080208/510905c3/attachment.pl 

From jari.oksanen at oulu.fi  Fri Feb  8 10:45:27 2008
From: jari.oksanen at oulu.fi (jari.oksanen at oulu.fi)
Date: Fri,  8 Feb 2008 10:45:27 +0100 (CET)
Subject: [Rd] xspline(...,
	draw=FALSE) fails if there is no open device (PR#10727)
Message-ID: <20080208094527.ED730283460D@mail.pubhealth.ku.dk>

Full_Name: Jari Oksanen
Version:  2.6.2 RC (2008-02-07 r44369)
OS: Linux
Submission from: (NULL) (130.231.102.145)


Even if function xspline() is called with argument draw=FALSE, it requires a
graphics device (that it won't use since it was draw=FALSE). I run into this
because I intended to use xspline within a function (that does not yet draw:
there is plot method for that), and the function failed when called in a virgin
environment. 

Here is an example in a virgin environemt just after starting R:

> out <- xspline(c(0,1,0), c(1,0,1), draw=FALSE)
Error in xspline(c(0, 1, 0), c(1, 0, 1), draw = FALSE) : 
  plot.new has not been called yet
> str(out)
Error in str(out) : object "out" not found

This works:

> plot(0)
> out <- xspline(c(0,1,0), c(1,0,1), draw=FALSE)
> str(out)
List of 2
 $ x: num [1:3] 0 1 0
 $ y: num [1:3] 1 0 1

This won't:

> dev.off()
null device 
          1 
> xspline(c(0,1,0), c(1,0,1), draw=FALSE)
Error in xspline(c(0, 1, 0), c(1, 0, 1), draw = FALSE) : 
  plot.new has not been called yet

R graphics internal are black magic to me. However, it seems that the error
messge comes from function GCheckState(DevDesc *dd) in graphics.c, which is
called by do_xspline(SEXP call, SEXP op, SEXP args, SEXP env) in plot.c even
when xspline was called with draw = FALSE (and even before getting the argument
draw into do_xspline). It seems that graphics device is needed somewhere even
with draw = FALSE, since moving the  GCheckState() test after findig the value
draw, and executing the test only if draw=TRUE gave NaN as the numeric output. 

If this is documented behaviour, the documentation escaped my attention and beg
for pardon. It may be useful to add a comment on the help page saying that an
open graphics device is needed even when unused with draw=FALSE.

Cheers, Jari Oksanen

 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = RC
 major = 2
 minor = 6.2
 year = 2008
 month = 02
 day = 07
 svn rev = 44369
 language = R
 version.string = R version 2.6.2 RC (2008-02-07 r44369)

Locale:
LC_CTYPE=en_GB.UTF-8;LC_NUMERIC=C;LC_TIME=en_GB.UTF-8;LC_COLLATE=en_GB.UTF-8;LC_MONETARY=en_GB.UTF-8;LC_MESSAGES=en_GB.UTF-8;LC_PAPER=en_GB.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_GB.UTF-8;LC_IDENTIFICATION=C

Search Path:
 .GlobalEnv, package:stats, package:graphics, package:grDevices, package:utils,
package:datasets, package:methods, Autoloads, package:base


From p.dalgaard at biostat.ku.dk  Fri Feb  8 15:42:52 2008
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Fri, 08 Feb 2008 15:42:52 +0100
Subject: [Rd] xspline(...,
 draw=FALSE) fails if there is no open device (PR#10727)
In-Reply-To: <20080208094527.ED730283460D@mail.pubhealth.ku.dk>
References: <20080208094527.ED730283460D@mail.pubhealth.ku.dk>
Message-ID: <47AC6A6C.6010605@biostat.ku.dk>

jari.oksanen at oulu.fi wrote:
> Full_Name: Jari Oksanen
> Version:  2.6.2 RC (2008-02-07 r44369)
> OS: Linux
> Submission from: (NULL) (130.231.102.145)
>
>
> Even if function xspline() is called with argument draw=FALSE, it requires a
> graphics device (that it won't use since it was draw=FALSE). I run into this
> because I intended to use xspline within a function (that does not yet draw:
> there is plot method for that), and the function failed when called in a virgin
> environment. 
>
> Here is an example in a virgin environemt just after starting R:
>
>   
>> out <- xspline(c(0,1,0), c(1,0,1), draw=FALSE)
>>     
> Error in xspline(c(0, 1, 0), c(1, 0, 1), draw = FALSE) : 
>   plot.new has not been called yet
>   
>> str(out)
>>     
> Error in str(out) : object "out" not found
>
> This works:
>
>   
>> plot(0)
>> out <- xspline(c(0,1,0), c(1,0,1), draw=FALSE)
>> str(out)
>>     
> List of 2
>  $ x: num [1:3] 0 1 0
>  $ y: num [1:3] 1 0 1
>
> This won't:
>
>   
>> dev.off()
>>     
> null device 
>           1 
>   
>> xspline(c(0,1,0), c(1,0,1), draw=FALSE)
>>     
> Error in xspline(c(0, 1, 0), c(1, 0, 1), draw = FALSE) : 
>   plot.new has not been called yet
>
> R graphics internal are black magic to me. However, it seems that the error
> messge comes from function GCheckState(DevDesc *dd) in graphics.c, which is
> called by do_xspline(SEXP call, SEXP op, SEXP args, SEXP env) in plot.c even
> when xspline was called with draw = FALSE (and even before getting the argument
> draw into do_xspline). It seems that graphics device is needed somewhere even
> with draw = FALSE, since moving the  GCheckState() test after findig the value
> draw, and executing the test only if draw=TRUE gave NaN as the numeric output. 
>
> If this is documented behaviour, the documentation escaped my attention and beg
> for pardon. It may be useful to add a comment on the help page saying that an
> open graphics device is needed even when unused with draw=FALSE.
>
>   

I think the reason is that 2d splines are aspect ratio dependent.  
There's this loop inside,

    for (i = 0; i < nx; i++) {
        xx[i] = x[i];
        yy[i] = y[i];
        GConvert(&(xx[i]), &(yy[i]), USER, DEVICE, dd);
    }
 
and that will not work without knowing how to convert to device 
coordinates. The default for "border" may get you first, though.  That 
seems to be documented incorrectly, by the way.

    -p

> Cheers, Jari Oksanen
>
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = RC
>  major = 2
>  minor = 6.2
>  year = 2008
>  month = 02
>  day = 07
>  svn rev = 44369
>  language = R
>  version.string = R version 2.6.2 RC (2008-02-07 r44369)
>
> Locale:
> LC_CTYPE=en_GB.UTF-8;LC_NUMERIC=C;LC_TIME=en_GB.UTF-8;LC_COLLATE=en_GB.UTF-8;LC_MONETARY=en_GB.UTF-8;LC_MESSAGES=en_GB.UTF-8;LC_PAPER=en_GB.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_GB.UTF-8;LC_IDENTIFICATION=C
>
> Search Path:
>  .GlobalEnv, package:stats, package:graphics, package:grDevices, package:utils,
> package:datasets, package:methods, Autoloads, package:base
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>   


-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From p.dalgaard at biostat.ku.dk  Fri Feb  8 15:45:08 2008
From: p.dalgaard at biostat.ku.dk (p.dalgaard at biostat.ku.dk)
Date: Fri,  8 Feb 2008 15:45:08 +0100 (CET)
Subject: [Rd] xspline(...,
	draw=FALSE) fails if there is no open device (PR#10728)
Message-ID: <20080208144508.AFF9C2834620@mail.pubhealth.ku.dk>

jari.oksanen at oulu.fi wrote:
> Full_Name: Jari Oksanen
> Version:  2.6.2 RC (2008-02-07 r44369)
> OS: Linux
> Submission from: (NULL) (130.231.102.145)
>
>
> Even if function xspline() is called with argument draw=3DFALSE, it req=
uires a
> graphics device (that it won't use since it was draw=3DFALSE). I run in=
to this
> because I intended to use xspline within a function (that does not yet =
draw:
> there is plot method for that), and the function failed when called in =
a virgin
> environment.=20
>
> Here is an example in a virgin environemt just after starting R:
>
>  =20
>> out <- xspline(c(0,1,0), c(1,0,1), draw=3DFALSE)
>>    =20
> Error in xspline(c(0, 1, 0), c(1, 0, 1), draw =3D FALSE) :=20
>   plot.new has not been called yet
>  =20
>> str(out)
>>    =20
> Error in str(out) : object "out" not found
>
> This works:
>
>  =20
>> plot(0)
>> out <- xspline(c(0,1,0), c(1,0,1), draw=3DFALSE)
>> str(out)
>>    =20
> List of 2
>  $ x: num [1:3] 0 1 0
>  $ y: num [1:3] 1 0 1
>
> This won't:
>
>  =20
>> dev.off()
>>    =20
> null device=20
>           1=20
>  =20
>> xspline(c(0,1,0), c(1,0,1), draw=3DFALSE)
>>    =20
> Error in xspline(c(0, 1, 0), c(1, 0, 1), draw =3D FALSE) :=20
>   plot.new has not been called yet
>
> R graphics internal are black magic to me. However, it seems that the e=
rror
> messge comes from function GCheckState(DevDesc *dd) in graphics.c, whic=
h is
> called by do_xspline(SEXP call, SEXP op, SEXP args, SEXP env) in plot.c=
 even
> when xspline was called with draw =3D FALSE (and even before getting th=
e argument
> draw into do_xspline). It seems that graphics device is needed somewher=
e even
> with draw =3D FALSE, since moving the  GCheckState() test after findig =
the value
> draw, and executing the test only if draw=3DTRUE gave NaN as the numeri=
c output.=20
>
> If this is documented behaviour, the documentation escaped my attention=
 and beg
> for pardon. It may be useful to add a comment on the help page saying t=
hat an
> open graphics device is needed even when unused with draw=3DFALSE.
>
>  =20

I think the reason is that 2d splines are aspect ratio dependent. =20
There's this loop inside,

    for (i =3D 0; i < nx; i++) {
        xx[i] =3D x[i];
        yy[i] =3D y[i];
        GConvert(&(xx[i]), &(yy[i]), USER, DEVICE, dd);
    }
=20
and that will not work without knowing how to convert to device=20
coordinates. The default for "border" may get you first, though.  That=20
seems to be documented incorrectly, by the way.

    -p

> Cheers, Jari Oksanen
>
>  platform =3D i686-pc-linux-gnu
>  arch =3D i686
>  os =3D linux-gnu
>  system =3D i686, linux-gnu
>  status =3D RC
>  major =3D 2
>  minor =3D 6.2
>  year =3D 2008
>  month =3D 02
>  day =3D 07
>  svn rev =3D 44369
>  language =3D R
>  version.string =3D R version 2.6.2 RC (2008-02-07 r44369)
>
> Locale:
> LC_CTYPE=3Den_GB.UTF-8;LC_NUMERIC=3DC;LC_TIME=3Den_GB.UTF-8;LC_COLLATE=3D=
en_GB.UTF-8;LC_MONETARY=3Den_GB.UTF-8;LC_MESSAGES=3Den_GB.UTF-8;LC_PAPER=3D=
en_GB.UTF-8;LC_NAME=3DC;LC_ADDRESS=3DC;LC_TELEPHONE=3DC;LC_MEASUREMENT=3D=
en_GB.UTF-8;LC_IDENTIFICATION=3DC
>
> Search Path:
>  .GlobalEnv, package:stats, package:graphics, package:grDevices, packag=
e:utils,
> package:datasets, package:methods, Autoloads, package:base
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>  =20


--=20
   O__  ---- Peter Dalgaard             =D8ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327=
918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327=
907


From timh at insightful.com  Sat Feb  9 01:50:08 2008
From: timh at insightful.com (timh at insightful.com)
Date: Sat,  9 Feb 2008 01:50:08 +0100 (CET)
Subject: [Rd] bad variable names when printing a data frame containing a
	matrix (PR#10730)
Message-ID: <20080209005009.1D620283460E@mail.pubhealth.ku.dk>

library(glmpath)
data(heart.data)
# heart.data is a list, $y a vector, $x a matrix
data <- data.frame(x=I(heart.data$x), y = heart.data$y)
> data[1:2,]
    x.1   x.2   x.3   x.4   x.5   x.6   x.7   x.8   x.9 y
1   160    12  5.73 23.11     1    49  25.3  97.2    52 1
2   144  0.01  4.41 28.61     0    55 28.87  2.06    63 1
> dimnames(heart.data$x)[[2]]
[1] "sbp"       "tobacco"   "ldl"       "adiposity" "famhist"   "typea"    
[7] "obesity"   "alcohol"   "age"      

Note that the printed variable names do not use the column names
of the matrix.

In contrast, in S-PLUS the names are used; the printout begins:
   x.sbp x.tobacco  x.ldl x.adiposity x.famhist x.typea x.obesity x.alcohol 


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 2
 minor = 6.1
 year = 2007
 month = 11
 day = 26
 svn rev = 43537
 language = R
 version.string = R version 2.6.1 (2007-11-26)

Windows XP (build 2600) Service Pack 2.0

Locale:
LC_COLLATE=English_United States.1252;LC_CTYPE=English_United States.1252;LC_MONETARY=English_United States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252

Search Path:
 .GlobalEnv, package:glmpath, package:survival, package:splines, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, package:methods, Autoloads, package:base


From ggrothendieck at gmail.com  Sat Feb  9 04:54:07 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 8 Feb 2008 22:54:07 -0500
Subject: [Rd] lm with factors for which only one level occurs
Message-ID: <971536df0802081954o6725fc7bk8fa392b88da3fbba@mail.gmail.com>

Consider the following:

> lm(conc ~ Type, CO2, subset = Plant == "Quebec")
Error in `contrasts<-`(`*tmp*`, value = "contr.treatment") :
  contrasts can be applied only to factors with 2 or more levels

Here Type is a factor for which only one level occurs
within the "Quebec" subset.   This is something that
one would think would be possible to handle in lm.  (Note
that singular.ok = TRUE is the default.)

I came across this when automatically performing lm's
on the levels of a conditioning variable, such as Plant in the above
example, and found I had to unexpectedly special case situations
like the above.

lmList() in lme4 is likely adversely affected by this as well.


From p.dalgaard at biostat.ku.dk  Sat Feb  9 09:46:55 2008
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sat, 09 Feb 2008 09:46:55 +0100
Subject: [Rd] bad variable names when printing a data frame containing
 a	matrix (PR#10730)
In-Reply-To: <20080209005009.1D620283460E@mail.pubhealth.ku.dk>
References: <20080209005009.1D620283460E@mail.pubhealth.ku.dk>
Message-ID: <47AD687F.40104@biostat.ku.dk>

timh at insightful.com wrote:
> library(glmpath)
> data(heart.data)
> # heart.data is a list, $y a vector, $x a matrix
> data <- data.frame(x=I(heart.data$x), y = heart.data$y)
>   
>> data[1:2,]
>>     
>     x.1   x.2   x.3   x.4   x.5   x.6   x.7   x.8   x.9 y
> 1   160    12  5.73 23.11     1    49  25.3  97.2    52 1
> 2   144  0.01  4.41 28.61     0    55 28.87  2.06    63 1
>   
>> dimnames(heart.data$x)[[2]]
>>     
> [1] "sbp"       "tobacco"   "ldl"       "adiposity" "famhist"   "typea"    
> [7] "obesity"   "alcohol"   "age"      
>
> Note that the printed variable names do not use the column names
> of the matrix.
>
> In contrast, in S-PLUS the names are used; the printout begins:
>    x.sbp x.tobacco  x.ldl x.adiposity x.famhist x.typea x.obesity x.alcohol 
>   
The reason seems to be that format.AsIs is losing dimnames. That could 
be easily fixed -- unless I'm overlooking something?

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From p.dalgaard at biostat.ku.dk  Sat Feb  9 09:50:04 2008
From: p.dalgaard at biostat.ku.dk (p.dalgaard at biostat.ku.dk)
Date: Sat,  9 Feb 2008 09:50:04 +0100 (CET)
Subject: [Rd] bad variable names when printing a data frame containing
	(PR#10732)
Message-ID: <20080209085004.525C5282EFF7@mail.pubhealth.ku.dk>

timh at insightful.com wrote:
> library(glmpath)
> data(heart.data)
> # heart.data is a list, $y a vector, $x a matrix
> data <- data.frame(x=3DI(heart.data$x), y =3D heart.data$y)
>  =20
>> data[1:2,]
>>    =20
>     x.1   x.2   x.3   x.4   x.5   x.6   x.7   x.8   x.9 y
> 1   160    12  5.73 23.11     1    49  25.3  97.2    52 1
> 2   144  0.01  4.41 28.61     0    55 28.87  2.06    63 1
>  =20
>> dimnames(heart.data$x)[[2]]
>>    =20
> [1] "sbp"       "tobacco"   "ldl"       "adiposity" "famhist"   "typea"=
   =20
> [7] "obesity"   "alcohol"   "age"     =20
>
> Note that the printed variable names do not use the column names
> of the matrix.
>
> In contrast, in S-PLUS the names are used; the printout begins:
>    x.sbp x.tobacco  x.ldl x.adiposity x.famhist x.typea x.obesity x.alc=
ohol=20
>  =20
The reason seems to be that format.AsIs is losing dimnames. That could=20
be easily fixed -- unless I'm overlooking something?

--=20
   O__  ---- Peter Dalgaard             =D8ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327=
918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327=
907


From aswadgurjar at gmail.com  Sat Feb  9 10:28:10 2008
From: aswadgurjar at gmail.com (Aswad Gurjar)
Date: Sat, 9 Feb 2008 14:58:10 +0530
Subject: [Rd] Problem with fitdistr function while estimating parameters
Message-ID: <86d768f00802090128q5b696ae1n68b0bdf0f4d39419@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080209/c9773df3/attachment.pl 

From p.dalgaard at biostat.ku.dk  Sat Feb  9 10:41:31 2008
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sat, 09 Feb 2008 10:41:31 +0100
Subject: [Rd] Problem with fitdistr function while estimating parameters
In-Reply-To: <86d768f00802090128q5b696ae1n68b0bdf0f4d39419@mail.gmail.com>
References: <86d768f00802090128q5b696ae1n68b0bdf0f4d39419@mail.gmail.com>
Message-ID: <47AD754B.7060004@biostat.ku.dk>

Aswad Gurjar wrote:
>  Hello,
>
> I am using fitdistr function for parameter estimation.
>  When I use
> fd<-fitdistr(V2,"gamma")
> I get following error:
>   
Please do not post to multiple lists. This is a usage question, not a 
development one.

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From lawremi at iastate.edu  Sat Feb  9 14:15:48 2008
From: lawremi at iastate.edu (Michael Lawrence)
Date: Sat, 9 Feb 2008 07:15:48 -0600
Subject: [Rd] help with R rendering engine
In-Reply-To: <47AB8AF9.5000202@gmail.com>
References: <47AB8AF9.5000202@gmail.com>
Message-ID: <509e0620802090515l5e6618act40b4a0befc2fc547@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080209/27fd4285/attachment.pl 

From p.dalgaard at biostat.ku.dk  Sat Feb  9 17:22:44 2008
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sat, 09 Feb 2008 17:22:44 +0100
Subject: [Rd] .. printing a data frame containing a matrix (PR#10730)
In-Reply-To: <47AD687F.40104@biostat.ku.dk>
References: <20080209005009.1D620283460E@mail.pubhealth.ku.dk>
	<47AD687F.40104@biostat.ku.dk>
Message-ID: <47ADD354.2050108@biostat.ku.dk>

Peter Dalgaard wrote:
> timh at insightful.com wrote:
>   
>> library(glmpath)
>> data(heart.data)
>> # heart.data is a list, $y a vector, $x a matrix
>> data <- data.frame(x=I(heart.data$x), y = heart.data$y)
>>   
>>     
>>> data[1:2,]
>>>     
>>>       
>>     x.1   x.2   x.3   x.4   x.5   x.6   x.7   x.8   x.9 y
>> 1   160    12  5.73 23.11     1    49  25.3  97.2    52 1
>> 2   144  0.01  4.41 28.61     0    55 28.87  2.06    63 1
>>   
>>     
>>> dimnames(heart.data$x)[[2]]
>>>     
>>>       
>> [1] "sbp"       "tobacco"   "ldl"       "adiposity" "famhist"   "typea"    
>> [7] "obesity"   "alcohol"   "age"      
>>
>> Note that the printed variable names do not use the column names
>> of the matrix.
>>
>> In contrast, in S-PLUS the names are used; the printout begins:
>>    x.sbp x.tobacco  x.ldl x.adiposity x.famhist x.typea x.obesity x.alcohol 
>>   
>>     
> The reason seems to be that format.AsIs is losing dimnames. That could 
> be easily fixed -- unless I'm overlooking something?
>
>   
Fixed in R-devel.


-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From enrico.a.rossi at gmail.com  Sat Feb  9 17:33:59 2008
From: enrico.a.rossi at gmail.com (Enrico Rossi)
Date: Sat, 9 Feb 2008 11:33:59 -0500
Subject: [Rd] print.fitdistr buglet
Message-ID: <e303ddae0802090833u6b9b99e2k60382628e9924ab0@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080209/06275a66/attachment.pl 

From murdoch at stats.uwo.ca  Sun Feb 10 00:08:13 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sat, 09 Feb 2008 18:08:13 -0500
Subject: [Rd] print.fitdistr buglet
In-Reply-To: <e303ddae0802090833u6b9b99e2k60382628e9924ab0@mail.gmail.com>
References: <e303ddae0802090833u6b9b99e2k60382628e9924ab0@mail.gmail.com>
Message-ID: <47AE325D.1090907@stats.uwo.ca>

On 09/02/2008 11:33 AM, Enrico Rossi wrote:
> Dear developers,
> 
> There's a small bug in print.fitdistr that can cause output to be printed
> twice, but only if print is called explicitly:
> 
>> fit<-fitdistr(rt(1000,3),"t")
> There were 11 warnings (use warnings() to see them)
>> fit
>         m             s            df
>   -0.02181723    1.00145296    3.13723878
>  ( 0.03865057) ( 0.03999447) ( 0.33298377)
>> print(fit)
>         m             s            df
>   -0.02181723    1.00145296    3.13723878
>  ( 0.03865057) ( 0.03999447) ( 0.33298377)
>         m             s            df
>   -0.02181723    1.00145296    3.13723878
>  ( 0.03865057) ( 0.03999447) ( 0.33298377)
> 
> Most likely, the function print.fitdistr doesn't return the input invisibly.

That's a correct analysis, but fitdistr is in MASS, so the report should 
go to Brian Ripley, the maintainer.  I've cc'd him.

I did a quick look through other print methods using this code:

for (name in methods("print")) {
   fn <- do.call("getAnywhere", list(name))$objs[[1]]
   body <- body(fn)
   len <- length(body)
   cat(name, ":  ", deparse(body[[len]]), "\n")
}

and turned up a few other cases in base packages; I'll fix them as 
appropriate.

Duncan Murdoch


From erich.neuwirth at univie.ac.at  Sun Feb 10 00:44:56 2008
From: erich.neuwirth at univie.ac.at (Erich Neuwirth)
Date: Sun, 10 Feb 2008 00:44:56 +0100
Subject: [Rd] Rprofile.site in Windows version
Message-ID: <47AE3AF8.4000906@univie.ac.at>

I think Rprofile.site as installed with R-2.6.2
contains some misleading information.
It contains the following lines

# set a CRAN mirror
# local({r <- getOption("repos")
#       r["CRAN"] <- "http://my.local.cran"
#       options(repos=r)})'.

Uncommenting these lines and changing the URL
will not work.

'. at the end of the last line will break the execution.
Furthermore
library(tools)
needs to be run before these lines can be run.



-- 
Erich Neuwirth, University of Vienna
Faculty of Computer Science
Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-39464 Fax: +43-1-4277-39459


From bolker at ufl.edu  Sun Feb 10 03:45:21 2008
From: bolker at ufl.edu (Ben Bolker)
Date: Sat, 09 Feb 2008 21:45:21 -0500
Subject: [Rd] View() + "End" key on Ubuntu=segfault
Message-ID: <47AE6541.2000106@ufl.edu>


   I can repeatably crash R (segfault)

  by doing

n <- 10
z <- data.frame(a=1:n,b=1:n)
View(z)

  and then hitting the "End" key on my keyboard.

   I haven't got debugging going yet, but running under
gdb (without debugging symbols) does give this:

0xb7b63583 in strlen () from /lib/tls/i686/cmov/libc.so.6

R version 2.6.2 (2008-02-08)
i486-pc-linux-gnu

[Ubuntu Gutsy]

locale:
LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base


From murdoch at stats.uwo.ca  Sun Feb 10 04:02:58 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sat, 09 Feb 2008 22:02:58 -0500
Subject: [Rd] Rprofile.site in Windows version
In-Reply-To: <47AE3AF8.4000906@univie.ac.at>
References: <47AE3AF8.4000906@univie.ac.at>
Message-ID: <47AE6962.30707@stats.uwo.ca>

On 09/02/2008 6:44 PM, Erich Neuwirth wrote:
> I think Rprofile.site as installed with R-2.6.2
> contains some misleading information.
> It contains the following lines
> 
> # set a CRAN mirror
> # local({r <- getOption("repos")
> #       r["CRAN"] <- "http://my.local.cran"
> #       options(repos=r)})'.
> 
> Uncommenting these lines and changing the URL
> will not work.
> 
> '. at the end of the last line will break the execution.

Yes, those shouldn't be there.

> Furthermore
> library(tools)
> needs to be run before these lines can be run.

Why?  local, getOption, and options are all in the base package.

Duncan Murdoch


From p.dalgaard at biostat.ku.dk  Sun Feb 10 09:43:59 2008
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sun, 10 Feb 2008 09:43:59 +0100
Subject: [Rd] View() + "End" key on Ubuntu=segfault
In-Reply-To: <47AE6541.2000106@ufl.edu>
References: <47AE6541.2000106@ufl.edu>
Message-ID: <47AEB94F.1040609@biostat.ku.dk>

Ben Bolker wrote:
>    I can repeatably crash R (segfault)
>
>   by doing
>
> n <- 10
> z <- data.frame(a=1:n,b=1:n)
> View(z)
>
>   and then hitting the "End" key on my keyboard.
>
>    I haven't got debugging going yet, but running under
> gdb (without debugging symbols) does give this:
>
> 0xb7b63583 in strlen () from /lib/tls/i686/cmov/libc.so.6
>   
AArrgh.... There's always one more, isn't there?

Same thing with Fedora, and you don't even have to create the data 
frame: View(airquality), press End suffices. I have

(gdb) bt
#0  0x009c2153 in strlen () from /lib/libc.so.6
#1  0x001d9289 in drawwindow (DE=0x96ca3e8)
    at ../../../../R/src/modules/X11/dataentry.c:1380
#2  0x001da0ec in doSpreadKey (DE=0x96ca3e8, key=<value optimized out>,
    event=<value optimized out>)
    at ../../../../R/src/modules/X11/dataentry.c:1701
#3  0x001dc93a in R_ProcessX11Events (data=0x0)

    at ../../../../R/src/modules/X11/dataentry.c:1380
1380            printstring(DE, p, strlen(p), 0, i - DE->colmin + 1, 0);
(gdb) p p
No symbol "p" in current context.
(gdb) l
1375        const char *p;
1376        int i;
1377
1378        for (i = DE->colmin; i <= DE->colmax; i++) {
1379            p = get_col_name(DE, i);
1380            printstring(DE, p, strlen(p), 0, i - DE->colmin + 1, 0);
1381        }
1382        for (i = DE->rowmin; i <= DE->rowmax; i++) {
1383            sprintf(clab, DE->labform, i);
1384            printstring(DE, clab, strlen(clab), i - DE->rowmin + 1, 
0, 0);

at which point the optimizer seems to have messed things up too much for 
further tracing.


> R version 2.6.2 (2008-02-08)
> i486-pc-linux-gnu
>
> [Ubuntu Gutsy]
>
> locale:
> LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>   


-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From ripley at stats.ox.ac.uk  Sun Feb 10 09:52:56 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 10 Feb 2008 08:52:56 +0000 (GMT)
Subject: [Rd] View() + "End" key on Ubuntu=segfault
In-Reply-To: <47AE6541.2000106@ufl.edu>
References: <47AE6541.2000106@ufl.edu>
Message-ID: <Pine.LNX.4.64.0802100852070.31983@auk.stats>

It's a generic problem with the X11 dataeditor using End.  It was trying 
to start at column 0.

Fixed now.

On Sat, 9 Feb 2008, Ben Bolker wrote:

>
>   I can repeatably crash R (segfault)
>
>  by doing
>
> n <- 10
> z <- data.frame(a=1:n,b=1:n)
> View(z)
>
>  and then hitting the "End" key on my keyboard.
>
>   I haven't got debugging going yet, but running under
> gdb (without debugging symbols) does give this:
>
> 0xb7b63583 in strlen () from /lib/tls/i686/cmov/libc.so.6
>
> R version 2.6.2 (2008-02-08)
> i486-pc-linux-gnu
>
> [Ubuntu Gutsy]
>
> locale:
> LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From murdoch at stats.uwo.ca  Sun Feb 10 16:18:42 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sun, 10 Feb 2008 10:18:42 -0500
Subject: [Rd] print.fitdistr buglet
In-Reply-To: <e303ddae0802090833u6b9b99e2k60382628e9924ab0@mail.gmail.com>
References: <e303ddae0802090833u6b9b99e2k60382628e9924ab0@mail.gmail.com>
Message-ID: <47AF15D2.5070506@stats.uwo.ca>

On 09/02/2008 11:33 AM, Enrico Rossi wrote:
> Dear developers,
> 
> There's a small bug in print.fitdistr that can cause output to be printed
> twice, but only if print is called explicitly:
> 
>> fit<-fitdistr(rt(1000,3),"t")
> There were 11 warnings (use warnings() to see them)
>> fit
>         m             s            df
>   -0.02181723    1.00145296    3.13723878
>  ( 0.03865057) ( 0.03999447) ( 0.33298377)
>> print(fit)
>         m             s            df
>   -0.02181723    1.00145296    3.13723878
>  ( 0.03865057) ( 0.03999447) ( 0.33298377)
>         m             s            df
>   -0.02181723    1.00145296    3.13723878
>  ( 0.03865057) ( 0.03999447) ( 0.33298377)
> 
> Most likely, the function print.fitdistr doesn't return the input invisibly.

I've fixed a number of instances of this kind of thing in the base 
packages now.  A related kind of error I also fixed were print methods 
that returned an invisible NULL, or something other than what was 
printed.  I didn't touch the recommended packages.

These fixes are in R-patched now.

Duncan Murdoch


From p.murrell at auckland.ac.nz  Sun Feb 10 21:37:41 2008
From: p.murrell at auckland.ac.nz (Paul Murrell)
Date: Mon, 11 Feb 2008 09:37:41 +1300
Subject: [Rd] help with R rendering engine
In-Reply-To: <509e0620802090515l5e6618act40b4a0befc2fc547@mail.gmail.com>
References: <47AB8AF9.5000202@gmail.com>
	<509e0620802090515l5e6618act40b4a0befc2fc547@mail.gmail.com>
Message-ID: <47AF6095.4010504@stat.auckland.ac.nz>

Hi


Michael Lawrence wrote:
> On Feb 7, 2008 4:49 PM, Mark W Kimpel <mwkimpel at gmail.com> wrote:
> 
>> I'm doing some work on a potential patch to the Bioconductor package
>> Rgraphviz and have some questions on code that is contained in engine.c.
>> In particular, I am developing some custom shapes using polygon and need
>> to make sure that, with rendering, the line connecting the centers of
>> two polygons stops at the border of each polygon. The polygons can be
>> transparent, so the option of just rendering the lines first won't work.
>>
>> Is there some help for me with an R internal or perhaps a higher level
>> function?
>>
> 
> I have to admit I am not that familiar with R graphics, but a very common
> way to achieve this in general is to use clipping. That is, you would set
> the regions covered by your node polygons as the "clip" and then draw your
> edges. Anything drawn onto the clip region is discarded. You would then
> reset the clip and continue drawing.
> 
> I'm pretty sure that base R does not support the complex clip regions you
> would require. However, it would be possible to do this in R by rendering to


That's right.  R's graphics engine only copes with rectangular clipping
regions.

OTOH, the 'grid' package does have a facility to determine locations on
the edges of objects (see grobX() abnd grobY()).  This is not
fully-featured, but for convex polygons it might give you what you want.
There's an example or two in
http://www.stat.auckland.ac.nz/~paul/Talks/rgraphs.pdf

Paul


> pixmaps in memory and then compositing the pixmaps. The first part is
> supported by the cairoDevice package and the latter part by RGtk2 (in
> particular its binding to GDK). I'm sure you'd rather not introduce such a
> dependency on Rgraphviz, but it's an option. I think the graphviz developers
> are moving towards GTK+/Cairo in terms of plugins and other work.
> 
> I checked libgd (already a dependency of graphviz) but found that it only
> supports a single rectangle for clipping.
> 
> Anyway, I hope this helps a little and good luck,
> Michael
> 
> 
>> Thanks,
>> Mark
>> --
>>
>> Mark W. Kimpel MD  ** Neuroinformatics ** Dept. of Psychiatry
>> Indiana University School of Medicine
>>
>> 15032 Hunter Court, Westfield, IN  46074
>>
>> (317) 490-5129 Work, & Mobile & VoiceMail
>> (317) 204-4202 Home (no voice mail please)
>>
>> mwkimpel<at>gmail<dot>com
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/


From mwkimpel at gmail.com  Mon Feb 11 05:42:39 2008
From: mwkimpel at gmail.com (Mark W Kimpel)
Date: Sun, 10 Feb 2008 23:42:39 -0500
Subject: [Rd] help with R rendering engine
In-Reply-To: <47AF6095.4010504@stat.auckland.ac.nz>
References: <47AB8AF9.5000202@gmail.com>
	<509e0620802090515l5e6618act40b4a0befc2fc547@mail.gmail.com>
	<47AF6095.4010504@stat.auckland.ac.nz>
Message-ID: <47AFD23F.6080001@gmail.com>

Paul and Michael,

Thanks for the information. Yes, it appears that what I want is to be 
able to present R with a convex polygon for the clipping path. As I 
waited for comments (for some reason Michael's email did not get to me), 
I began working on my own methods. I am essentially using a matrix in R 
to represent pixel-space and using my own edge-detection algorithm. As I 
write this, I believe I am almost there, but testing awaits tomorrow. 
The real question will be how fast it actually runs. I'll report back 
later this week.

Mark

Mark W. Kimpel MD  ** Neuroinformatics ** Dept. of Psychiatry
Indiana University School of Medicine

15032 Hunter Court, Westfield, IN  46074

(317) 490-5129 Work, & Mobile & VoiceMail
(317) 204-4202 Home (no voice mail please)

mwkimpel<at>gmail<dot>com

******************************************************************


Paul Murrell wrote:
> Hi
> 
> 
> Michael Lawrence wrote:
>> On Feb 7, 2008 4:49 PM, Mark W Kimpel <mwkimpel at gmail.com> wrote:
>>
>>> I'm doing some work on a potential patch to the Bioconductor package
>>> Rgraphviz and have some questions on code that is contained in engine.c.
>>> In particular, I am developing some custom shapes using polygon and need
>>> to make sure that, with rendering, the line connecting the centers of
>>> two polygons stops at the border of each polygon. The polygons can be
>>> transparent, so the option of just rendering the lines first won't work.
>>>
>>> Is there some help for me with an R internal or perhaps a higher level
>>> function?
>>>
>> I have to admit I am not that familiar with R graphics, but a very common
>> way to achieve this in general is to use clipping. That is, you would set
>> the regions covered by your node polygons as the "clip" and then draw your
>> edges. Anything drawn onto the clip region is discarded. You would then
>> reset the clip and continue drawing.
>>
>> I'm pretty sure that base R does not support the complex clip regions you
>> would require. However, it would be possible to do this in R by rendering to
> 
> 
> That's right.  R's graphics engine only copes with rectangular clipping
> regions.
> 
> OTOH, the 'grid' package does have a facility to determine locations on
> the edges of objects (see grobX() abnd grobY()).  This is not
> fully-featured, but for convex polygons it might give you what you want.
> There's an example or two in
> http://www.stat.auckland.ac.nz/~paul/Talks/rgraphs.pdf
> 
> Paul
> 
> 
>> pixmaps in memory and then compositing the pixmaps. The first part is
>> supported by the cairoDevice package and the latter part by RGtk2 (in
>> particular its binding to GDK). I'm sure you'd rather not introduce such a
>> dependency on Rgraphviz, but it's an option. I think the graphviz developers
>> are moving towards GTK+/Cairo in terms of plugins and other work.
>>
>> I checked libgd (already a dependency of graphviz) but found that it only
>> supports a single rectangle for clipping.
>>
>> Anyway, I hope this helps a little and good luck,
>> Michael
>>
>>
>>> Thanks,
>>> Mark
>>> --
>>>
>>> Mark W. Kimpel MD  ** Neuroinformatics ** Dept. of Psychiatry
>>> Indiana University School of Medicine
>>>
>>> 15032 Hunter Court, Westfield, IN  46074
>>>
>>> (317) 490-5129 Work, & Mobile & VoiceMail
>>> (317) 204-4202 Home (no voice mail please)
>>>
>>> mwkimpel<at>gmail<dot>com
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From phenomenal at wp.pl  Mon Feb 11 14:01:42 2008
From: phenomenal at wp.pl (Tomasz =?UTF-8?B?UGF3ZcWC?= Gajc)
Date: Mon, 11 Feb 2008 14:01:42 +0100
Subject: [Rd] Use xdg-open ?
Message-ID: <20080211140142.54e81773@wp.pl>

Hi,

are there any plas to implement xdg-open feature along with old
"hardcode" style ?

Not all people likes to use xpdf or firefox, switching to xdg-open
would be a great enchancement.

Cheers.
-- 
Regards,
TPG - MandrivaLinux's contributor

www.mandriva.com
  _
 ( )
  X	ascii ribbon campaign - against html e-mail
 / \	www.asciiribbon.org   - against proprietary attachments
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-devel/attachments/20080211/ff56cf40/attachment.bin 

From ripley at stats.ox.ac.uk  Mon Feb 11 14:54:05 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 11 Feb 2008 13:54:05 +0000 (GMT)
Subject: [Rd] Use xdg-open ?
In-Reply-To: <20080211140142.54e81773@wp.pl>
References: <20080211140142.54e81773@wp.pl>
Message-ID: <alpine.LFD.1.00.0802111352090.31850@gannet.stats.ox.ac.uk>

On Mon, 11 Feb 2008, Tomasz Pawe? Gajc wrote:

> Hi,
>
> are there any plas to implement xdg-open feature along with old
> "hardcode" style ?
>
> Not all people likes to use xpdf or firefox, switching to xdg-open
> would be a great enchancement.

It has been discussed, but there are other styles too.  E.g. the switcher 
in F8 is not using xdg-open to choose a browser/html viewer.

So it will be added as a choice, but probably not above firefox in the 
priority order.

>
> Cheers.
> --
> Regards,
> TPG - MandrivaLinux's contributor
>
> www.mandriva.com
>  _
> ( )
>  X	ascii ribbon campaign - against html e-mail
> / \	www.asciiribbon.org   - against proprietary attachments
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From phenomenal at wp.pl  Mon Feb 11 15:53:06 2008
From: phenomenal at wp.pl (Tomasz =?UTF-8?B?UGF3ZcWC?= Gajc)
Date: Mon, 11 Feb 2008 15:53:06 +0100
Subject: [Rd] Use xdg-open ?
In-Reply-To: <alpine.LFD.1.00.0802111352090.31850@gannet.stats.ox.ac.uk>
References: <20080211140142.54e81773@wp.pl>
	<alpine.LFD.1.00.0802111352090.31850@gannet.stats.ox.ac.uk>
Message-ID: <20080211155306.2cd81e77@wp.pl>

Dnia 2008-02-11, o godz. 13:54:05
Prof Brian Ripley <ripley at stats.ox.ac.uk> napisa?(a):

> On Mon, 11 Feb 2008, Tomasz Pawe? Gajc wrote:
> 
> > Hi,
> >
> > are there any plas to implement xdg-open feature along with old
> > "hardcode" style ?
> >
> > Not all people likes to use xpdf or firefox, switching to xdg-open
> > would be a great enchancement.
> 
> It has been discussed, but there are other styles too.  E.g. the
> switcher in F8 is not using xdg-open to choose a browser/html viewer.
> 
> So it will be added as a choice, but probably not above firefox in
> the priority order.
> 

Ok, thanks for the clarification.

I've do some exports, 

	export R_BROWSER="$(type -p xdg-open)"
	export R_PDFVIEWER="$(type -p xdg-open)"

i just wonder hot this will work.
> >
> > Cheers.
> > --
> > Regards,
> > TPG - MandrivaLinux's contributor
> >
> > www.mandriva.com
> >  _
> > ( )
> >  X	ascii ribbon campaign - against html e-mail
> > / \	www.asciiribbon.org   - against proprietary attachments
> >
> 


-- 
Regards,
TPG - MandrivaLinux's contributor

www.mandriva.com
  _
 ( )
  X	ascii ribbon campaign - against html e-mail
 / \	www.asciiribbon.org   - against proprietary attachments
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-devel/attachments/20080211/05a3e91f/attachment.bin 

From osklyar at ebi.ac.uk  Tue Feb 12 12:06:59 2008
From: osklyar at ebi.ac.uk (Oleg Sklyar)
Date: Tue, 12 Feb 2008 11:06:59 +0000
Subject: [Rd] assigning NULLs to elements of a list
Message-ID: <47B17DD3.1080100@ebi.ac.uk>

Dear developers:

I have just came across an (unexpected to me) behaviour of lists when 
assigning NULLs to list elements. I understand that a NULL is a valid R 
object, thus assigning a NULL to a list element should yield exactly the 
same result as assigning any other object. So I was surprised when 
assigning a NULL in fact removed the element from the list. Is this an 
intended behaviour? If so, does anybody know where is it documented and 
what is a good way around?

Thanks for help,
Oleg Sklyar

Here goes an example, the inline C-code does exactly what I would prefer 
R were doing, but both R examples do remove the element 'b':

x = list(a=c(1L,2L), b=matrix(runif(4),2,2), c=LETTERS[1:3])

library(inline)
code="
   SEXP res;
   PROTECT(res = Rf_duplicate(x));
   SET_VECTOR_ELT(res,1,R_NilValue);
   UNPROTECT(1);
   return res;
"
setnull = cfunction(signature(x="list"),code)
setnull(x)

# $a
# [1] 1 2
# $b
# NULL
# $c
# [1] "A" "B" "C"

y = x
x[[2]] = NULL
x
# $a
# [1] 1 2
# $c
# [1] "A" "B" "C"

x = y
x$b = NULL
x
# $a
# [1] 1 2
# $c
# [1] "A" "B" "C"

 > sessionInfo()
R version 2.6.1 (2007-11-26)
i686-pc-linux-gnu

locale:
LC_CTYPE=en_GB.UTF-8;LC_NUMERIC=C;LC_TIME=en_GB.UTF-8;LC_COLLATE=en_GB.UTF-8;LC_MONETARY=en_GB.UTF-8;LC_MESSAGES=en_GB.UTF-8;LC_PAPER=en_GB.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_GB.UTF-8;LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] inline_0.3.3

loaded via a namespace (and not attached):
[1] rcompgen_0.1-17


-- 
Dr Oleg Sklyar * EBI-EMBL, Cambridge CB10 1SD, UK * +44-1223-494466


From ripley at stats.ox.ac.uk  Tue Feb 12 12:52:30 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 12 Feb 2008 11:52:30 +0000 (GMT)
Subject: [Rd] assigning NULLs to elements of a list
In-Reply-To: <47B17DD3.1080100@ebi.ac.uk>
References: <47B17DD3.1080100@ebi.ac.uk>
Message-ID: <alpine.LFD.1.00.0802121143210.31632@gannet.stats.ox.ac.uk>

On Tue, 12 Feb 2008, Oleg Sklyar wrote:

> Dear developers:
>
> I have just came across an (unexpected to me) behaviour of lists when
> assigning NULLs to list elements. I understand that a NULL is a valid R
> object, thus assigning a NULL to a list element should yield exactly the
> same result as assigning any other object. So I was surprised when
> assigning a NULL in fact removed the element from the list. Is this an
> intended behaviour? If so, does anybody know where is it documented and
> what is a good way around?

Yes, it was apparently intended: R has long done this.

x <- list(a=c(1L,2L), b=matrix(runif(4),2,2), c=LETTERS[1:3])
x[2] <- list(NULL)

is what I think you are intending.

See e.g. the comment in subassign.c

 	    /* If "val" is NULL, this is an element deletion */
 	    /* if there is a match to "nlist" otherwise "x" */
 	    /* is unchanged.  The attributes need adjustment. */


>
> Thanks for help,
> Oleg Sklyar
>
> Here goes an example, the inline C-code does exactly what I would prefer
> R were doing, but both R examples do remove the element 'b':
>
> x = list(a=c(1L,2L), b=matrix(runif(4),2,2), c=LETTERS[1:3])
>
> library(inline)
> code="
>   SEXP res;
>   PROTECT(res = Rf_duplicate(x));
>   SET_VECTOR_ELT(res,1,R_NilValue);
>   UNPROTECT(1);
>   return res;
> "
> setnull = cfunction(signature(x="list"),code)
> setnull(x)
>
> # $a
> # [1] 1 2
> # $b
> # NULL
> # $c
> # [1] "A" "B" "C"
>
> y = x
> x[[2]] = NULL
> x
> # $a
> # [1] 1 2
> # $c
> # [1] "A" "B" "C"
>
> x = y
> x$b = NULL
> x
> # $a
> # [1] 1 2
> # $c
> # [1] "A" "B" "C"
>
> > sessionInfo()
> R version 2.6.1 (2007-11-26)
> i686-pc-linux-gnu
>
> locale:
> LC_CTYPE=en_GB.UTF-8;LC_NUMERIC=C;LC_TIME=en_GB.UTF-8;LC_COLLATE=en_GB.UTF-8;LC_MONETARY=en_GB.UTF-8;LC_MESSAGES=en_GB.UTF-8;LC_PAPER=en_GB.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_GB.UTF-8;LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] inline_0.3.3
>
> loaded via a namespace (and not attached):
> [1] rcompgen_0.1-17
>
>
> --
> Dr Oleg Sklyar * EBI-EMBL, Cambridge CB10 1SD, UK * +44-1223-494466
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From davison at stats.ox.ac.uk  Tue Feb 12 12:52:43 2008
From: davison at stats.ox.ac.uk (Dan Davison)
Date: Tue, 12 Feb 2008 11:52:43 +0000
Subject: [Rd] assigning NULLs to elements of a list
In-Reply-To: <47B17DD3.1080100@ebi.ac.uk>
References: <47B17DD3.1080100@ebi.ac.uk>
Message-ID: <20080212115243.GB16711@stats.ox.ac.uk>

On Tue, Feb 12, 2008 at 11:06:59AM +0000, Oleg Sklyar wrote:
> Dear developers:
> 
> I have just came across an (unexpected to me) behaviour of lists when 
> assigning NULLs to list elements. I understand that a NULL is a valid R 
> object, thus assigning a NULL to a list element should yield exactly the 
> same result as assigning any other object. So I was surprised when 
> assigning a NULL in fact removed the element from the list. Is this an 
> intended behaviour? If so, does anybody know where is it documented and 
> what is a good way around?
> 
> Thanks for help,
> Oleg Sklyar
> 
> Here goes an example, the inline C-code does exactly what I would prefer 
> R were doing, but both R examples do remove the element 'b':
> 
> x = list(a=c(1L,2L), b=matrix(runif(4),2,2), c=LETTERS[1:3])
> 
> library(inline)
> code="
>    SEXP res;
>    PROTECT(res = Rf_duplicate(x));
>    SET_VECTOR_ELT(res,1,R_NilValue);
>    UNPROTECT(1);
>    return res;
> "
> setnull = cfunction(signature(x="list"),code)
> setnull(x)
> 
> # $a
> # [1] 1 2
> # $b
> # NULL
> # $c
> # [1] "A" "B" "C"
> 
> y = x
> x[[2]] = NULL

Hi Oleg,

To do this I use

x[2] <- list(NULL)

In particular I do this when constructing lists to act as the 'what' argument for scan(), where
a NULL element means that the column should be skipped, whereas obviously a non-existent element
won't serve that purpose. I would be interested to hear whether this is the 'proper' way to construct
such lists.

Dan



> x
> # $a
> # [1] 1 2
> # $c
> # [1] "A" "B" "C"
> 
> x = y
> x$b = NULL
> x
> # $a
> # [1] 1 2
> # $c
> # [1] "A" "B" "C"
> 
>  > sessionInfo()
> R version 2.6.1 (2007-11-26)
> i686-pc-linux-gnu
> 
> locale:
> LC_CTYPE=en_GB.UTF-8;LC_NUMERIC=C;LC_TIME=en_GB.UTF-8;LC_COLLATE=en_GB.UTF-8;LC_MONETARY=en_GB.UTF-8;LC_MESSAGES=en_GB.UTF-8;LC_PAPER=en_GB.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_GB.UTF-8;LC_IDENTIFICATION=C
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] inline_0.3.3
> 
> loaded via a namespace (and not attached):
> [1] rcompgen_0.1-17
> 
> 
> -- 
> Dr Oleg Sklyar * EBI-EMBL, Cambridge CB10 1SD, UK * +44-1223-494466
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From labonne at st-pee.inra.fr  Tue Feb 12 15:35:09 2008
From: labonne at st-pee.inra.fr (labonne at st-pee.inra.fr)
Date: Tue, 12 Feb 2008 15:35:09 +0100 (CET)
Subject: [Rd] 0.45<0.45 = TRUE (PR#10744)
Message-ID: <20080212143509.6B40F282EF48@mail.pubhealth.ku.dk>

Dear developer,

in my version of R (2.4.0) as weel as in a more recent version (2.6.0) 
on different computers, we found this problem :

 > a<-(58/40-1)
 > a
[1] 0.45
 > b<-(18/40)
 > b
[1] 0.45
 > a<b
[1] TRUE
 > a==b
[1] FALSE
 >
Something seems wrong here.
but if we do

 > c<-0.45
 > d<-0.45
 > c<d
[1] FALSE

then everything is ok.
If we use 59 and 19 instead of 58 and 18, the error is not here anymore. 
I guess there is a problem with the envelop object for the comparisons 
between different types in R (as in JAVA maybe) but I am not familiar 
with the R language.
I hope this helps, and that this is a real bug, if not, I am sorry to 
have bothered you.

Cheers!

Jacques.


-- 

___________________________________________

Jacques Labonne, Charg? de Recherches
UMR ECOBIOP
"Ecologie Comportementale et Biologie des Populations de Poissons"
P?le d'Hydrobiologie de Saint P?e sur Nivelle, INRA
Quartier Ibarron
64310 Saint P?e sur Nivelle
T?l : (0)5 59 51 59 80
...................................
site web http://www.st-pee.inra.fr


From csardi at rmki.kfki.hu  Tue Feb 12 15:47:56 2008
From: csardi at rmki.kfki.hu (Gabor Csardi)
Date: Tue, 12 Feb 2008 15:47:56 +0100
Subject: [Rd] 0.45<0.45 = TRUE (PR#10744)
In-Reply-To: <20080212143509.6B40F282EF48@mail.pubhealth.ku.dk>
References: <20080212143509.6B40F282EF48@mail.pubhealth.ku.dk>
Message-ID: <20080212144633.GA29059@localdomain>

OMG, not again please!

FAQ 7.31.

Thanks!

On Tue, Feb 12, 2008 at 03:35:09PM +0100, labonne at st-pee.inra.fr wrote:
> Dear developer,
> 
> in my version of R (2.4.0) as weel as in a more recent version (2.6.0) 
> on different computers, we found this problem :
> 
>  > a<-(58/40-1)
>  > a
> [1] 0.45
>  > b<-(18/40)
>  > b
> [1] 0.45
>  > a<b
> [1] TRUE
>  > a==b
> [1] FALSE
>  >
> Something seems wrong here.
> but if we do
> 
>  > c<-0.45
>  > d<-0.45
>  > c<d
> [1] FALSE
> 
> then everything is ok.
> If we use 59 and 19 instead of 58 and 18, the error is not here anymore. 
> I guess there is a problem with the envelop object for the comparisons 
> between different types in R (as in JAVA maybe) but I am not familiar 
> with the R language.
> I hope this helps, and that this is a real bug, if not, I am sorry to 
> have bothered you.
> 
> Cheers!
> 
> Jacques.
> 
> 
> -- 
> 
> ___________________________________________
> 
> Jacques Labonne, Charg? de Recherches
> UMR ECOBIOP
> "Ecologie Comportementale et Biologie des Populations de Poissons"
> P?le d'Hydrobiologie de Saint P?e sur Nivelle, INRA
> Quartier Ibarron
> 64310 Saint P?e sur Nivelle
> T?l : (0)5 59 51 59 80
> ...................................
> site web http://www.st-pee.inra.fr
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Csardi Gabor <csardi at rmki.kfki.hu>    UNIL DGM


From murdoch at stats.uwo.ca  Tue Feb 12 15:49:52 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 12 Feb 2008 09:49:52 -0500
Subject: [Rd] 0.45<0.45 = TRUE (PR#10744)
In-Reply-To: <20080212143509.6B40F282EF48@mail.pubhealth.ku.dk>
References: <20080212143509.6B40F282EF48@mail.pubhealth.ku.dk>
Message-ID: <47B1B210.6080306@stats.uwo.ca>

On 2/12/2008 9:35 AM, labonne at st-pee.inra.fr wrote:
> Dear developer,
> 
> in my version of R (2.4.0) as weel as in a more recent version (2.6.0) 
> on different computers, we found this problem :

This is not a bug, it's a limitation of finite precision arithmetic, and 
it's FAQ 7.31.

Duncan Murdoch


> 
>  > a<-(58/40-1)
>  > a
> [1] 0.45
>  > b<-(18/40)
>  > b
> [1] 0.45
>  > a<b
> [1] TRUE
>  > a==b
> [1] FALSE
>  >
> Something seems wrong here.
> but if we do
> 
>  > c<-0.45
>  > d<-0.45
>  > c<d
> [1] FALSE
> 
> then everything is ok.
> If we use 59 and 19 instead of 58 and 18, the error is not here anymore. 
> I guess there is a problem with the envelop object for the comparisons 
> between different types in R (as in JAVA maybe) but I am not familiar 
> with the R language.
> I hope this helps, and that this is a real bug, if not, I am sorry to 
> have bothered you.
> 
> Cheers!
> 
> Jacques.
> 
>


From gavin.simpson at ucl.ac.uk  Tue Feb 12 15:53:19 2008
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Tue, 12 Feb 2008 14:53:19 +0000
Subject: [Rd] 0.45<0.45 = TRUE (PR#10744)
In-Reply-To: <20080212143509.6B40F282EF48@mail.pubhealth.ku.dk>
References: <20080212143509.6B40F282EF48@mail.pubhealth.ku.dk>
Message-ID: <1202827999.2701.19.camel@prometheus.geog.ucl.ac.uk>

On Tue, 2008-02-12 at 15:35 +0100, labonne at st-pee.inra.fr wrote:
> Dear developer,
> 
> in my version of R (2.4.0) as weel as in a more recent version (2.6.0) 
> on different computers, we found this problem :

No problem in R. This is the FAQ of all FAQs (Type III SS is probably up
there as well).

See the R FAQ, 7.31, for further information:
http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f

For your example:

> all.equal(a, b)
[1] TRUE

<snip />

> I hope this helps, and that this is a real bug, if not, I am sorry to 
> have bothered you.

In future - if you aren't sure that you have found a bug in R, and
you've done your home work (as per the Posting Guide), post a
comment/question on the R Devel list. You'd have gotten the same
response (not a bug, read R FAQ 7.31) but you wouldn't have created
additional work for one the the R Core Development Team who will now
have to deal with your bug report in the R bug tracker.

HTH

G

> 
> Cheers!
> 
> Jacques.
> 
> 
-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
 Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
 ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
 Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
 Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
 UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From weston at lindaspaces.com  Tue Feb 12 16:00:54 2008
From: weston at lindaspaces.com (Stephen B. Weston)
Date: Tue, 12 Feb 2008 10:00:54 -0500
Subject: [Rd] assigning NULLs to elements of a list
In-Reply-To: <47B17DD3.1080100@ebi.ac.uk>
References: <47B17DD3.1080100@ebi.ac.uk>
Message-ID: <47B1B4A6.8010108@lindaspaces.com>

Oleg Sklyar wrote:
> Dear developers:
> 
> I have just came across an (unexpected to me) behaviour of lists when 
> assigning NULLs to list elements. I understand that a NULL is a valid R 
> object, thus assigning a NULL to a list element should yield exactly the 
> same result as assigning any other object. So I was surprised when 
> assigning a NULL in fact removed the element from the list. Is this an 
> intended behaviour? If so, does anybody know where is it documented and 
> what is a good way around?

This topic is discussed in the R FAQ, in section 7.1 "How can I set 
components of a list to NULL?"  It also shows up in section 3.3.3,
in the context of incompatibilities with S.

- Steve


From berwin at maths.uwa.edu.au  Tue Feb 12 16:13:36 2008
From: berwin at maths.uwa.edu.au (Berwin A Turlach)
Date: Tue, 12 Feb 2008 23:13:36 +0800
Subject: [Rd] 0.45<0.45 = TRUE (PR#10744)
In-Reply-To: <20080212144633.GA29059@localdomain>
References: <20080212143509.6B40F282EF48@mail.pubhealth.ku.dk>
	<20080212144633.GA29059@localdomain>
Message-ID: <20080212231336.2b665ab7@absentia>

On Tue, 12 Feb 2008 15:47:56 +0100
Gabor Csardi <csardi at rmki.kfki.hu> wrote:

> OMG, not again please!
> 
> FAQ 7.31.

Yeah, there seems to be a cluster of that type of questions at the
moment.

Perhaps it is time to introduce a global option "HaveReadFAQ7.31" whose
default is "FALSE" but can be changed via the normal mechanism to
"TRUE".

Any comparison of numeric values/vectors should print a warning message
"You are comparing numbers calculated using finite precision
arithmetic, have you read FAQ 7.31."  while the value of this option is
FALSE.  

Perhaps that will help. :)

Cheers,

	Berwin

=========================== Full address =============================
Berwin A Turlach                            Tel.: +65 6516 4416 (secr)
Dept of Statistics and Applied Probability        +65 6516 6650 (self)
Faculty of Science                          FAX : +65 6872 3919       
National University of Singapore     
6 Science Drive 2, Blk S16, Level 7          e-mail: statba at nus.edu.sg
Singapore 117546                    http://www.stat.nus.edu.sg/~statba


From csardi at rmki.kfki.hu  Tue Feb 12 16:19:58 2008
From: csardi at rmki.kfki.hu (Gabor Csardi)
Date: Tue, 12 Feb 2008 16:19:58 +0100
Subject: [Rd] 0.45<0.45 = TRUE (PR#10744)
In-Reply-To: <20080212231336.2b665ab7@absentia>
References: <20080212143509.6B40F282EF48@mail.pubhealth.ku.dk>
	<20080212144633.GA29059@localdomain>
	<20080212231336.2b665ab7@absentia>
Message-ID: <20080212151958.GC29059@localdomain>

:) It is a good idea, but i don't it would work. We'd have hundreds of 
emails on R-help and R-devel complaining about mysterious warning
messages for code that had been working just fine for two years....

Gabor

On Tue, Feb 12, 2008 at 11:13:36PM +0800, Berwin A Turlach wrote:
> On Tue, 12 Feb 2008 15:47:56 +0100
> Gabor Csardi <csardi at rmki.kfki.hu> wrote:
> 
> > OMG, not again please!
> > 
> > FAQ 7.31.
> 
> Yeah, there seems to be a cluster of that type of questions at the
> moment.
> 
> Perhaps it is time to introduce a global option "HaveReadFAQ7.31" whose
> default is "FALSE" but can be changed via the normal mechanism to
> "TRUE".
> 
> Any comparison of numeric values/vectors should print a warning message
> "You are comparing numbers calculated using finite precision
> arithmetic, have you read FAQ 7.31."  while the value of this option is
> FALSE.  
> 
> Perhaps that will help. :)
> 
> Cheers,
> 
> 	Berwin
> 
> =========================== Full address =============================
> Berwin A Turlach                            Tel.: +65 6516 4416 (secr)
> Dept of Statistics and Applied Probability        +65 6516 6650 (self)
> Faculty of Science                          FAX : +65 6872 3919       
> National University of Singapore     
> 6 Science Drive 2, Blk S16, Level 7          e-mail: statba at nus.edu.sg
> Singapore 117546                    http://www.stat.nus.edu.sg/~statba

-- 
Csardi Gabor <csardi at rmki.kfki.hu>    UNIL DGM


From Ted.Harding at manchester.ac.uk  Tue Feb 12 16:31:30 2008
From: Ted.Harding at manchester.ac.uk ( (Ted Harding))
Date: Tue, 12 Feb 2008 15:31:30 -0000 (GMT)
Subject: [Rd] 0.45<0.45 = TRUE (PR#10744)
In-Reply-To: <1202827999.2701.19.camel@prometheus.geog.ucl.ac.uk>
Message-ID: <XFMail.080212153130.Ted.Harding@manchester.ac.uk>

On 12-Feb-08 14:53:19, Gavin Simpson wrote:
> On Tue, 2008-02-12 at 15:35 +0100, labonne at st-pee.inra.fr wrote:
>> Dear developer,
>> 
>> in my version of R (2.4.0) as weel as in a more recent version
>> (2.6.0) on different computers, we found this problem :
> 
> No problem in R. This is the FAQ of all FAQs (Type III SS is
> probably up there as well).

I'm thinking (by now quite strongly) that there is a place
in "Introduction to R" (and maybe other basic documentation)
for an account of arithmetic precision in R (and in digital
computation generally).

A section "Arithmetic Precision in R" near the beginning
would alert people to this issue (there is nothing about it in
"Introduction to R", "R Language Definition", or "R internals").

Once upon a time, poeple who did arithmetic knew about this
from hands-on experience (just when do you break out of the
loop when you are dividing 1 by 3 on a sheet of paper?) -- but
now people press buttons on black boxes, and when they find
that 1/3 calculated in two "mathematically equivalent" ways
comes out with two different values, they believe that there
is a bug in the software.

It would not occur to them, spontaneously, that the computer
is doing the right thing and that they should look in a FAQ
for an explanation of how they do not understand!

I would be willing to contribute to such an explanation;
and probably many others would too. But I feel it should be
coordinated by people who are experts in the internals
of how R handles such things.

Best wishes to all,
Ted.

--------------------------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding at manchester.ac.uk>
Fax-to-email: +44 (0)870 094 0861
Date: 12-Feb-08                                       Time: 15:31:26
------------------------------ XFMail ------------------------------


From jhallman at frb.gov  Tue Feb 12 16:58:28 2008
From: jhallman at frb.gov (Jeffrey J. Hallman)
Date: Tue, 12 Feb 2008 10:58:28 -0500
Subject: [Rd] assigning NULLs to elements of a list
References: <47B17DD3.1080100@ebi.ac.uk>
	<alpine.LFD.1.00.0802121143210.31632@gannet.stats.ox.ac.uk>
Message-ID: <xmrve4u180r.fsf@mralx1.rsma.frb.gov>

>From your tone, I gather you don't much like this behavior, and I can see your
point, as it not very intuitive that setting a list element to NULL deletes
any existing element at that index.  But is there a better way to delete an
element from a list?  Maybe there should be. 

Jeff

Prof Brian Ripley <ripley at stats.ox.ac.uk> writes:
>> I have just came across an (unexpected to me) behaviour of lists when
>> assigning NULLs to list elements. I understand that a NULL is a valid R
>> object, thus assigning a NULL to a list element should yield exactly the
>> same result as assigning any other object. So I was surprised when
>> assigning a NULL in fact removed the element from the list. Is this an
>> intended behaviour? If so, does anybody know where is it documented and
>> what is a good way around?
>
> Yes, it was apparently intended: R has long done this.
>
> x <- list(a=c(1L,2L), b=matrix(runif(4),2,2), c=LETTERS[1:3])
> x[2] <- list(NULL)
>
> is what I think you are intending.
>
> See e.g. the comment in subassign.c
>
>  	    /* If "val" is NULL, this is an element deletion */
>  	    /* if there is a match to "nlist" otherwise "x" */
>  	    /* is unchanged.  The attributes need adjustment. */

-- 
Jeff


From Gerhard.Thallinger at tugraz.at  Tue Feb 12 17:20:03 2008
From: Gerhard.Thallinger at tugraz.at (Gerhard.Thallinger at tugraz.at)
Date: Tue, 12 Feb 2008 17:20:03 +0100 (CET)
Subject: [Rd] Uninstall registry key the same for all versions (PR#10746)
Message-ID: <20080212162003.5532E283460F@mail.pubhealth.ku.dk>

Full_Name: Gerhard Thallinger
Version: R 2.2.0 through R 2.6.2
OS: Windows XP
Submission from: (NULL) (129.27.145.220)


The uninstall key in the Windows Registry
(HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\) 
is the same ("R for Windows_is1") for all R versions 
(at least from 2.2.0 to 2.6.2). 

This prohibits managing multiple R versions in a clean way, since 
the installation of a new R versions overwrites the uninstall key
of the previous installed version. This makes an uninstall of
a previous version via "Add/Remove Software" impossible.

The uninstall key should also contain the R version number 
(e.g. "R for Windows 2.6.2_is1"). The name of the registry key can 
be set in the Inno Setup definition file using the "AppId" directive.
At the moment "AppId" is not set, therefor "AppName" is used as the
key name.


From tlumley at u.washington.edu  Tue Feb 12 18:07:41 2008
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 12 Feb 2008 09:07:41 -0800 (PST)
Subject: [Rd] assigning NULLs to elements of a list
In-Reply-To: <47B17DD3.1080100@ebi.ac.uk>
Message-ID: <Pine.LNX.4.43.0802120907410.21155@hymn33.u.washington.edu>

On Tue, 12 Feb 2008, Oleg Sklyar wrote:

> Dear developers:
>
> I have just came across an (unexpected to me) behaviour of lists when
> assigning NULLs to list elements. I understand that a NULL is a valid R
> object, thus assigning a NULL to a list element should yield exactly the
> same result as assigning any other object. So I was surprised when
> assigning a NULL in fact removed the element from the list. Is this an
> intended behaviour?

Yes.

>      If so, does anybody know where is it documented and
> what is a good way around?
>

One place is FAQ 7.1

       -thomas


Thomas Lumley			Assoc. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle


From murdoch at stats.uwo.ca  Tue Feb 12 18:41:17 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 12 Feb 2008 12:41:17 -0500
Subject: [Rd] Uninstall registry key the same for all versions (PR#10746)
In-Reply-To: <20080212162003.5532E283460F@mail.pubhealth.ku.dk>
References: <20080212162003.5532E283460F@mail.pubhealth.ku.dk>
Message-ID: <47B1DA3D.8070206@stats.uwo.ca>

On 2/12/2008 11:20 AM, Gerhard.Thallinger at tugraz.at wrote:
> Full_Name: Gerhard Thallinger
> Version: R 2.2.0 through R 2.6.2
> OS: Windows XP
> Submission from: (NULL) (129.27.145.220)
> 
> 
> The uninstall key in the Windows Registry
> (HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\) 
> is the same ("R for Windows_is1") for all R versions 
> (at least from 2.2.0 to 2.6.2). 
> 
> This prohibits managing multiple R versions in a clean way, since 
> the installation of a new R versions overwrites the uninstall key
> of the previous installed version. This makes an uninstall of
> a previous version via "Add/Remove Software" impossible.

That's true, but it is still easy to uninstall, just by using the start 
menu entry.

> The uninstall key should also contain the R version number 
> (e.g. "R for Windows 2.6.2_is1"). The name of the registry key can 
> be set in the Inno Setup definition file using the "AppId" directive.
> At the moment "AppId" is not set, therefor "AppName" is used as the
> key name.

Thanks for the suggestion.

Duncan Murdoch


From Greg.Snow at imail.org  Tue Feb 12 18:44:10 2008
From: Greg.Snow at imail.org (Greg Snow)
Date: Tue, 12 Feb 2008 10:44:10 -0700
Subject: [Rd] 0.45<0.45 = TRUE (PR#10744)
In-Reply-To: <XFMail.080212153130.Ted.Harding@manchester.ac.uk>
References: <1202827999.2701.19.camel@prometheus.geog.ucl.ac.uk>
	<XFMail.080212153130.Ted.Harding@manchester.ac.uk>
Message-ID: <07E228A5BE53C24CAD490193A7381BBBEE04BE@LP-EXCHVS07.CO.IHC.COM>

I don't think that we need a full discussion in the Introduction, but
how about early on it shows an example of 2 floating point numbers not
being equal (and one of the work arounds like all.equal) along with a
note (bright, bold, etc.) that says that if the reader did not expect
the FALSE result then they should read FAQ 7.31 (and maybe even include
a link they can click on right then).

-- 
Gregory (Greg) L. Snow Ph.D.
Statistical Data Center
Intermountain Healthcare
greg.snow at imail.org
(801) 408-8111
 
 

> -----Original Message-----
> From: r-devel-bounces at r-project.org 
> [mailto:r-devel-bounces at r-project.org] On Behalf Of 
> Ted.Harding at manchester.ac.uk
> Sent: Tuesday, February 12, 2008 8:32 AM
> To: r-devel at stat.math.ethz.ch
> Subject: Re: [Rd] 0.45<0.45 = TRUE (PR#10744)
> 
> On 12-Feb-08 14:53:19, Gavin Simpson wrote:
> > On Tue, 2008-02-12 at 15:35 +0100, labonne at st-pee.inra.fr wrote:
> >> Dear developer,
> >> 
> >> in my version of R (2.4.0) as weel as in a more recent version
> >> (2.6.0) on different computers, we found this problem :
> > 
> > No problem in R. This is the FAQ of all FAQs (Type III SS 
> is probably 
> > up there as well).
> 
> I'm thinking (by now quite strongly) that there is a place in 
> "Introduction to R" (and maybe other basic documentation) for 
> an account of arithmetic precision in R (and in digital 
> computation generally).
> 
> A section "Arithmetic Precision in R" near the beginning 
> would alert people to this issue (there is nothing about it 
> in "Introduction to R", "R Language Definition", or "R internals").
> 
> Once upon a time, poeple who did arithmetic knew about this 
> from hands-on experience (just when do you break out of the 
> loop when you are dividing 1 by 3 on a sheet of paper?) -- 
> but now people press buttons on black boxes, and when they 
> find that 1/3 calculated in two "mathematically equivalent" 
> ways comes out with two different values, they believe that 
> there is a bug in the software.
> 
> It would not occur to them, spontaneously, that the computer 
> is doing the right thing and that they should look in a FAQ 
> for an explanation of how they do not understand!
> 
> I would be willing to contribute to such an explanation; and 
> probably many others would too. But I feel it should be 
> coordinated by people who are experts in the internals of how 
> R handles such things.
> 
> Best wishes to all,
> Ted.
> 
> --------------------------------------------------------------------
> E-Mail: (Ted Harding) <Ted.Harding at manchester.ac.uk>
> Fax-to-email: +44 (0)870 094 0861
> Date: 12-Feb-08                                       Time: 15:31:26
> ------------------------------ XFMail ------------------------------
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


From hb at stat.berkeley.edu  Tue Feb 12 18:45:02 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Tue, 12 Feb 2008 09:45:02 -0800
Subject: [Rd] Uninstall registry key the same for all versions (PR#10746)
In-Reply-To: <20080212162003.5532E283460F@mail.pubhealth.ku.dk>
References: <20080212162003.5532E283460F@mail.pubhealth.ku.dk>
Message-ID: <59d7961d0802120945u7af8d83r8fe6058470c9198f@mail.gmail.com>

This is a beautiful example on how an added feature matures into a bug
over time :)

I let the Windows developers argue with the pro's and con's of your
suggestion.  I just wanna add a related suggestion that when you have
multiple installations and you run "Unistall R 2.6.0" the first dialog
('R for Windows Uninstall') you see says "Are you sure you want to
completely remove R for Windows and all of its components?"  This
message does not specify the version being uninstalled, so without
previous experience you certainly wonder if this is going to install
all of your R installations or just one.

My $0.02

/Henrik

On Feb 12, 2008 8:20 AM,  <Gerhard.Thallinger at tugraz.at> wrote:
> Full_Name: Gerhard Thallinger
> Version: R 2.2.0 through R 2.6.2
> OS: Windows XP
> Submission from: (NULL) (129.27.145.220)
>
>
> The uninstall key in the Windows Registry
> (HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\)
> is the same ("R for Windows_is1") for all R versions
> (at least from 2.2.0 to 2.6.2).
>
> This prohibits managing multiple R versions in a clean way, since
> the installation of a new R versions overwrites the uninstall key
> of the previous installed version. This makes an uninstall of
> a previous version via "Add/Remove Software" impossible.
>
> The uninstall key should also contain the R version number
> (e.g. "R for Windows 2.6.2_is1"). The name of the registry key can
> be set in the Inno Setup definition file using the "AppId" directive.
> At the moment "AppId" is not set, therefor "AppName" is used as the
> key name.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From murdoch at stats.uwo.ca  Tue Feb 12 19:02:24 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 12 Feb 2008 13:02:24 -0500
Subject: [Rd] Uninstall registry key the same for all versions (PR#10746)
In-Reply-To: <59d7961d0802120945u7af8d83r8fe6058470c9198f@mail.gmail.com>
References: <20080212162003.5532E283460F@mail.pubhealth.ku.dk>
	<59d7961d0802120945u7af8d83r8fe6058470c9198f@mail.gmail.com>
Message-ID: <47B1DF30.3040804@stats.uwo.ca>

On 2/12/2008 12:45 PM, Henrik Bengtsson wrote:
> This is a beautiful example on how an added feature matures into a bug
> over time :)
> 
> I let the Windows developers argue with the pro's and con's of your
> suggestion.  I just wanna add a related suggestion that when you have
> multiple installations and you run "Unistall R 2.6.0" the first dialog
> ('R for Windows Uninstall') you see says "Are you sure you want to
> completely remove R for Windows and all of its components?"  This
> message does not specify the version being uninstalled, so without
> previous experience you certainly wonder if this is going to install
> all of your R installations or just one.

I'm just testing now, but I suspect Gerhard's suggestion of specifying 
AppID will fix this too.

Duncan Murdoch

> 
> My $0.02
> 
> /Henrik
> 
> On Feb 12, 2008 8:20 AM,  <Gerhard.Thallinger at tugraz.at> wrote:
>> Full_Name: Gerhard Thallinger
>> Version: R 2.2.0 through R 2.6.2
>> OS: Windows XP
>> Submission from: (NULL) (129.27.145.220)
>>
>>
>> The uninstall key in the Windows Registry
>> (HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\)
>> is the same ("R for Windows_is1") for all R versions
>> (at least from 2.2.0 to 2.6.2).
>>
>> This prohibits managing multiple R versions in a clean way, since
>> the installation of a new R versions overwrites the uninstall key
>> of the previous installed version. This makes an uninstall of
>> a previous version via "Add/Remove Software" impossible.
>>
>> The uninstall key should also contain the R version number
>> (e.g. "R for Windows 2.6.2_is1"). The name of the registry key can
>> be set in the Inno Setup definition file using the "AppId" directive.
>> At the moment "AppId" is not set, therefor "AppName" is used as the
>> key name.
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From P.Dalgaard at biostat.ku.dk  Tue Feb 12 19:07:09 2008
From: P.Dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Tue, 12 Feb 2008 19:07:09 +0100
Subject: [Rd] Namespace/method oddity
Message-ID: <47B1E04D.1050104@biostat.ku.dk>

I stumbled on the following:

> library(stats4)
> example(mle)
> confint.default(fit2)
Error in UseMethod("vcov") : no applicable method for "vcov"
In addition: Warning message:
In object$coefficients :
  $ operator not defined for this S4 class, returning NULL
> vcov(fit2)
             lymax      lxhalf
lymax   0.02857612 -0.04870231
lxhalf -0.04870231  0.11457338
> coef(fit2)
   lymax   lxhalf
3.218870 1.117006


And confint.default does indeed use the generic extractors vcov() and
coef().
Q: is this to be expected? and why? (I kind of suspect that this has in
fact been discussed at some point and that I just wasn't paying
attention...)

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From murdoch at stats.uwo.ca  Tue Feb 12 19:16:17 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 12 Feb 2008 13:16:17 -0500
Subject: [Rd] Uninstall registry key the same for all versions (PR#10746)
In-Reply-To: <47B1DF30.3040804@stats.uwo.ca>
References: <20080212162003.5532E283460F@mail.pubhealth.ku.dk>	<59d7961d0802120945u7af8d83r8fe6058470c9198f@mail.gmail.com>
	<47B1DF30.3040804@stats.uwo.ca>
Message-ID: <47B1E271.5010407@stats.uwo.ca>

On 2/12/2008 1:02 PM, Duncan Murdoch wrote:
> On 2/12/2008 12:45 PM, Henrik Bengtsson wrote:
>> This is a beautiful example on how an added feature matures into a bug
>> over time :)
>> 
>> I let the Windows developers argue with the pro's and con's of your
>> suggestion.  I just wanna add a related suggestion that when you have
>> multiple installations and you run "Unistall R 2.6.0" the first dialog
>> ('R for Windows Uninstall') you see says "Are you sure you want to
>> completely remove R for Windows and all of its components?"  This
>> message does not specify the version being uninstalled, so without
>> previous experience you certainly wonder if this is going to install
>> all of your R installations or just one.
> 
> I'm just testing now, but I suspect Gerhard's suggestion of specifying 
> AppID will fix this too.

No, it doesn't.  I'll look for something else.

Duncan Murdoch

> 
> Duncan Murdoch
> 
>> 
>> My $0.02
>> 
>> /Henrik
>> 
>> On Feb 12, 2008 8:20 AM,  <Gerhard.Thallinger at tugraz.at> wrote:
>>> Full_Name: Gerhard Thallinger
>>> Version: R 2.2.0 through R 2.6.2
>>> OS: Windows XP
>>> Submission from: (NULL) (129.27.145.220)
>>>
>>>
>>> The uninstall key in the Windows Registry
>>> (HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\)
>>> is the same ("R for Windows_is1") for all R versions
>>> (at least from 2.2.0 to 2.6.2).
>>>
>>> This prohibits managing multiple R versions in a clean way, since
>>> the installation of a new R versions overwrites the uninstall key
>>> of the previous installed version. This makes an uninstall of
>>> a previous version via "Add/Remove Software" impossible.
>>>
>>> The uninstall key should also contain the R version number
>>> (e.g. "R for Windows 2.6.2_is1"). The name of the registry key can
>>> be set in the Inno Setup definition file using the "AppId" directive.
>>> At the moment "AppId" is not set, therefor "AppName" is used as the
>>> key name.
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From roger.bos at us.rothschild.com  Tue Feb 12 19:16:26 2008
From: roger.bos at us.rothschild.com (Bos, Roger)
Date: Tue, 12 Feb 2008 13:16:26 -0500
Subject: [Rd] Uninstall registry key the same for all versions (PR#10746)
In-Reply-To: <47B1DF30.3040804@stats.uwo.ca>
References: <20080212162003.5532E283460F@mail.pubhealth.ku.dk><59d7961d0802120945u7af8d83r8fe6058470c9198f@mail.gmail.com>
	<47B1DF30.3040804@stats.uwo.ca>
Message-ID: <D8C95B444AD6EE4AAD638D818A9CFD340123D910@RINNYCSE000.rth.ad.rothschild.com>

I consider this a feature because when I am done testing the new
version, I just delete the old directory.  Deleting the directory is
usually easier than uninstalling.

 

-----Original Message-----
From: r-devel-bounces at r-project.org
[mailto:r-devel-bounces at r-project.org] On Behalf Of Duncan Murdoch
Sent: Tuesday, February 12, 2008 1:02 PM
To: Henrik Bengtsson
Cc: r-devel at stat.math.ethz.ch; Gerhard.Thallinger at tugraz.at
Subject: Re: [Rd] Uninstall registry key the same for all versions
(PR#10746)

On 2/12/2008 12:45 PM, Henrik Bengtsson wrote:
> This is a beautiful example on how an added feature matures into a bug

> over time :)
> 
> I let the Windows developers argue with the pro's and con's of your 
> suggestion.  I just wanna add a related suggestion that when you have 
> multiple installations and you run "Unistall R 2.6.0" the first dialog

> ('R for Windows Uninstall') you see says "Are you sure you want to 
> completely remove R for Windows and all of its components?"  This 
> message does not specify the version being uninstalled, so without 
> previous experience you certainly wonder if this is going to install 
> all of your R installations or just one.

I'm just testing now, but I suspect Gerhard's suggestion of specifying
AppID will fix this too.

Duncan Murdoch

> 
> My $0.02
> 
> /Henrik
> 
> On Feb 12, 2008 8:20 AM,  <Gerhard.Thallinger at tugraz.at> wrote:
>> Full_Name: Gerhard Thallinger
>> Version: R 2.2.0 through R 2.6.2
>> OS: Windows XP
>> Submission from: (NULL) (129.27.145.220)
>>
>>
>> The uninstall key in the Windows Registry
>> (HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\)
>> is the same ("R for Windows_is1") for all R versions (at least from 
>> 2.2.0 to 2.6.2).
>>
>> This prohibits managing multiple R versions in a clean way, since the

>> installation of a new R versions overwrites the uninstall key of the 
>> previous installed version. This makes an uninstall of a previous 
>> version via "Add/Remove Software" impossible.
>>
>> The uninstall key should also contain the R version number (e.g. "R 
>> for Windows 2.6.2_is1"). The name of the registry key can be set in 
>> the Inno Setup definition file using the "AppId" directive.
>> At the moment "AppId" is not set, therefor "AppName" is used as the 
>> key name.
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel

********************************************************************** *
This message is for the named person's use only. It may 
contain confidential, proprietary or legally privileged 
information. No right to confidential or privileged treatment 
of this message is waived or lost by any error in 
transmission. If you have received this message in error, 
please immediately notify the sender by e-mail, 
delete the message and all copies from your system and destroy 
any hard copies. You must not, directly or indirectly, use, 
disclose, distribute, print or copy any part of this message 
if you are not the intended recipient. 


From murdoch at stats.uwo.ca  Tue Feb 12 19:23:29 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 12 Feb 2008 13:23:29 -0500
Subject: [Rd] Uninstall registry key the same for all versions (PR#10746)
In-Reply-To: <D8C95B444AD6EE4AAD638D818A9CFD340123D910@RINNYCSE000.rth.ad.rothschild.com>
References: <20080212162003.5532E283460F@mail.pubhealth.ku.dk><59d7961d0802120945u7af8d83r8fe6058470c9198f@mail.gmail.com>
	<47B1DF30.3040804@stats.uwo.ca>
	<D8C95B444AD6EE4AAD638D818A9CFD340123D910@RINNYCSE000.rth.ad.rothschild.com>
Message-ID: <47B1E421.9050906@stats.uwo.ca>

On 2/12/2008 1:16 PM, Bos, Roger wrote:
> I consider this a feature because when I am done testing the new
> version, I just delete the old directory.  Deleting the directory is
> usually easier than uninstalling.

If you ran the installer with the default settings, just deleting the 
old directory will leave start menu entries in place, so it's better to 
do a proper uninstall.

It also has the advantage of leaving behind files that weren't part of 
the installation:  you never know what lost files you might find there.

Duncan Murdoch


> 
>  
> 
> -----Original Message-----
> From: r-devel-bounces at r-project.org
> [mailto:r-devel-bounces at r-project.org] On Behalf Of Duncan Murdoch
> Sent: Tuesday, February 12, 2008 1:02 PM
> To: Henrik Bengtsson
> Cc: r-devel at stat.math.ethz.ch; Gerhard.Thallinger at tugraz.at
> Subject: Re: [Rd] Uninstall registry key the same for all versions
> (PR#10746)
> 
> On 2/12/2008 12:45 PM, Henrik Bengtsson wrote:
>> This is a beautiful example on how an added feature matures into a bug
> 
>> over time :)
>> 
>> I let the Windows developers argue with the pro's and con's of your 
>> suggestion.  I just wanna add a related suggestion that when you have 
>> multiple installations and you run "Unistall R 2.6.0" the first dialog
> 
>> ('R for Windows Uninstall') you see says "Are you sure you want to 
>> completely remove R for Windows and all of its components?"  This 
>> message does not specify the version being uninstalled, so without 
>> previous experience you certainly wonder if this is going to install 
>> all of your R installations or just one.
> 
> I'm just testing now, but I suspect Gerhard's suggestion of specifying
> AppID will fix this too.
> 
> Duncan Murdoch
> 
>> 
>> My $0.02
>> 
>> /Henrik
>> 
>> On Feb 12, 2008 8:20 AM,  <Gerhard.Thallinger at tugraz.at> wrote:
>>> Full_Name: Gerhard Thallinger
>>> Version: R 2.2.0 through R 2.6.2
>>> OS: Windows XP
>>> Submission from: (NULL) (129.27.145.220)
>>>
>>>
>>> The uninstall key in the Windows Registry
>>> (HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\)
>>> is the same ("R for Windows_is1") for all R versions (at least from 
>>> 2.2.0 to 2.6.2).
>>>
>>> This prohibits managing multiple R versions in a clean way, since the
> 
>>> installation of a new R versions overwrites the uninstall key of the 
>>> previous installed version. This makes an uninstall of a previous 
>>> version via "Add/Remove Software" impossible.
>>>
>>> The uninstall key should also contain the R version number (e.g. "R 
>>> for Windows 2.6.2_is1"). The name of the registry key can be set in 
>>> the Inno Setup definition file using the "AppId" directive.
>>> At the moment "AppId" is not set, therefor "AppName" is used as the 
>>> key name.
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> ********************************************************************** * 
> This message is for the named person's use only. It ma...{{dropped:12}}


From h.wickham at gmail.com  Tue Feb 12 19:25:33 2008
From: h.wickham at gmail.com (hadley wickham)
Date: Tue, 12 Feb 2008 12:25:33 -0600
Subject: [Rd] 0.45<0.45 = TRUE (PR#10744)
In-Reply-To: <XFMail.080212153130.Ted.Harding@manchester.ac.uk>
References: <1202827999.2701.19.camel@prometheus.geog.ucl.ac.uk>
	<XFMail.080212153130.Ted.Harding@manchester.ac.uk>
Message-ID: <f8e6ff050802121025w717ef902q7d186d0e1664845f@mail.gmail.com>

> I'm thinking (by now quite strongly) that there is a place
> in "Introduction to R" (and maybe other basic documentation)
> for an account of arithmetic precision in R (and in digital
> computation generally).
>
> A section "Arithmetic Precision in R" near the beginning
> would alert people to this issue (there is nothing about it in
> "Introduction to R", "R Language Definition", or "R internals").
>
> Once upon a time, poeple who did arithmetic knew about this
> from hands-on experience (just when do you break out of the
> loop when you are dividing 1 by 3 on a sheet of paper?) -- but
> now people press buttons on black boxes, and when they find
> that 1/3 calculated in two "mathematically equivalent" ways
> comes out with two different values, they believe that there
> is a bug in the software.

It's more than that as though, as floating point addition is no longer
guaranteed to be commutative or associative, and multiplication does
not distribute over addition.  Many concepts that are clear cut in
pure math become fuzzy in floating point math - equality, singularity
of matrices etc etc.

Hadley

-- 
http://had.co.nz/


From ripley at stats.ox.ac.uk  Tue Feb 12 19:43:05 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 12 Feb 2008 18:43:05 +0000 (GMT)
Subject: [Rd] Namespace/method oddity
In-Reply-To: <47B1E04D.1050104@biostat.ku.dk>
References: <47B1E04D.1050104@biostat.ku.dk>
Message-ID: <alpine.LFD.1.00.0802121833130.23632@gannet.stats.ox.ac.uk>

On Tue, 12 Feb 2008, Peter Dalgaard wrote:

> I stumbled on the following:
>
>> library(stats4)
>> example(mle)
>> confint.default(fit2)
> Error in UseMethod("vcov") : no applicable method for "vcov"
> In addition: Warning message:
> In object$coefficients :
>  $ operator not defined for this S4 class, returning NULL
>> vcov(fit2)
>             lymax      lxhalf
> lymax   0.02857612 -0.04870231
> lxhalf -0.04870231  0.11457338
>> coef(fit2)
>   lymax   lxhalf
> 3.218870 1.117006
>
>
> And confint.default does indeed use the generic extractors vcov() and
> coef().
> Q: is this to be expected? and why? (I kind of suspect that this has in
> fact been discussed at some point and that I just wasn't paying
> attention...)

Yes.  stats4 contains an object called vcov.  confint.default is in the 
stats namespace and correctly uses stats::vcov not stats4::vcov, which is 
what you were looking for.

It's discussed most weeks, and at R-core in Vienna in 2006 and before 
that.  It is 'issue' 11 in http://developer.r-project.org/BDR_S4issues.txt

Brian


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From berwin at maths.uwa.edu.au  Wed Feb 13 11:58:18 2008
From: berwin at maths.uwa.edu.au (Berwin A Turlach)
Date: Wed, 13 Feb 2008 18:58:18 +0800
Subject: [Rd] On Section 2.5:Sub-architectures in the R Installation and
 Administration manual
Message-ID: <20080213185818.37426740@berwin-nus1>

Dear all,

there are a few issues regarding Section 2.5: Sub-architectures in the
R Installation and Administration manual (referring to Version 2.6.2)
that I would like to raise:

1.)  The manual states:

    @code{R CMD INSTALL} will detect if more that one build is installed
    and try to install packages with the appropriate library objects
    for each. This will not be done if the package has an executable
    @code{configure} script or a @file{src/Makefile} file.  In such
    cases you can install for extra builds by

    @example
    R --arch=@var{name} CMD INSTALL --libs-only @var{pkg}(s)
    @end example

My experience with the --libs-only flag is that if the installation of
the package fails, then the package is removed.  Is this really desired
behaviour?  If yes, then the manual should perhaps warn that this might
happen.  However, in my opinion, this behaviour is undesirable.  As I
understand it, `--libs-only' would only be used if the package was
already successfully installed for (at least) one sub-architecture.
Why should the failure to install it for another sub-architecture
remove the complete package, including the successful build for another
sub-architecture.

2.) On my machines (running Kubuntu Linux (gutsy)), I usually install a
32 bit version, by specifying r_arch=32 to the configure line, and a 64
version, by specifying r_arch=64 to the configure line. This seems to
be in line with the following recommendation in the manual:

   If you want to mix sub-architectures compiled on different
   platforms (for example @cputype{x86_64} Linux and @cputype{i686}
   Linux), it is wise to use explicit names for each, and you may
   also need to set @option{libdir} to ensure that they
   install into the same place.

However, after installing R 2.6.2 in such manner, trying to start R
resulted in the following error message:

	Error: R executable not found

As far as I can tell, this is due to the code that was added at the
beginning of the bash script R (to support parallel 32/64-bit
installations using multilib on Linux?) which tries to locate the R
executable but does not search deep enough into the directory structure
if multiple architectures are installed using the r_arch option to the
configure line (for both/all architectures).

3) The manual also states in that section:

    On Linux, there is an alternative mechanism for mixing 32-bit and
    64-bit libraries known as @emph{multilib}. If a Linux distribution
    supports multilib, then parallel builds of @R{} may be installed in
    the sub-directories @file{lib} (32-bit) and @file{lib64} (64-bit).
    [...]

As far as I can tell, Kubuntu Linux distributions support multilib.
However on these distributions /lib64 and /usr/lib64 are links to /lib
and /usr/lib, respectively, where the 64-bit libraries reside and the
32-bit libraries reside in /lib32 and /usr/lib32.  Thus, the above
paragraph is somewhat confusing to somebody who is running a Kubuntu
Linux distribution.  (Presumably the same holds for Debian and all
other distributions derived from Debian.)

Cheers,

	Berwin

=========================== Full address =============================
Berwin A Turlach                            Tel.: +65 6515 4416 (secr)
Dept of Statistics and Applied Probability        +65 6515 6650 (self)
Faculty of Science                          FAX : +65 6872 3919       
National University of Singapore     
6 Science Drive 2, Blk S16, Level 7          e-mail: statba at nus.edu.sg
Singapore 117546                    http://www.stat.nus.edu.sg/~statba


From kas.hei at nbl.fi  Wed Feb 13 02:15:34 2008
From: kas.hei at nbl.fi (Heikki Kaskelma)
Date: Wed, 13 Feb 2008 03:15:34 +0200
Subject: [Rd] 0.45<0.45 = TRUE (PR#10744)
References: <1202827999.2701.19.camel@prometheus.geog.ucl.ac.uk><XFMail.080212153130.Ted.Harding@manchester.ac.uk>
	<f8e6ff050802121025w717ef902q7d186d0e1664845f@mail.gmail.com>
Message-ID: <fotgbo$n7m$2@ger.gmane.org>

hadley wickham:
> It's more than that as though, as floating point addition is no longer
> guaranteed to be commutative or associative, and multiplication does
> not distribute over addition.  Many concepts that are clear cut in
> pure math become fuzzy in floating point math - equality, singularity
> of matrices etc etc.

Even simple averages may be complicated:

eps=1
while(1-eps != 1) eps=eps/2
eps=eps*2

(1-1*eps+1-2*eps+1-3*eps)/3 == 1-1:3*eps    #  TRUE FALSE FALSE
mean(1-1:3*eps) == 1-1:3*eps    # FALSE  TRUE FALSE
sum(1-1:3*eps)/3 == 1-1:3*eps   # FALSE FALSE  TRUE
((1-1*eps)+(1-2*eps)+(1-3*eps))/3 == 1-1:3*eps   # FALSE FALSE  TRUE

so sometimes all the values may lie on the same side of the "average".

[Win R 2.6.1]


Heikki Kaskelma
Munkkiniemi, Finland


From Gerhard.Thallinger at tugraz.at  Wed Feb 13 09:27:00 2008
From: Gerhard.Thallinger at tugraz.at (Gerhard Thallinger)
Date: Wed, 13 Feb 2008 09:27:00 +0100
Subject: [Rd] Uninstall registry key the same for all versions (PR#10746)
In-Reply-To: <47B1DF30.3040804@stats.uwo.ca>
References: <20080212162003.5532E283460F@mail.pubhealth.ku.dk>
	<59d7961d0802120945u7af8d83r8fe6058470c9198f@mail.gmail.com>
	<47B1DF30.3040804@stats.uwo.ca>
Message-ID: <001d01c86e1a$34ca5720$3a00020a@AGILIX>

Hi Duncan,

>> I just wanna add a related suggestion that when you have multiple 
>> installations and you run "Unistall R 2.6.0" the first dialog
>> ('R for Windows Uninstall') you see says "Are you sure you want to
>> completely remove R for Windows and all of its components?"  This
>> message does not specify the version being uninstalled, so without
>> previous experience you certainly wonder if this is going to install
>> all of your R installations or just one.
>
> I'm just testing now, but I suspect Gerhard's suggestion of 
> specifying AppID will fix this too.

 Thanks for looking into this. I think setting "AppName" to the same
 as "AppVerName" (which includes the version number) should cover both
 Henrik's and my suggestion. 

Regards

Gerhard


From murdoch at stats.uwo.ca  Wed Feb 13 14:36:06 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed, 13 Feb 2008 08:36:06 -0500
Subject: [Rd] Uninstall registry key the same for all versions (PR#10746)
In-Reply-To: <001d01c86e1a$34ca5720$3a00020a@AGILIX>
References: <20080212162003.5532E283460F@mail.pubhealth.ku.dk>	<59d7961d0802120945u7af8d83r8fe6058470c9198f@mail.gmail.com>	<47B1DF30.3040804@stats.uwo.ca>
	<001d01c86e1a$34ca5720$3a00020a@AGILIX>
Message-ID: <47B2F246.4090604@stats.uwo.ca>

On 2/13/2008 3:27 AM, Gerhard Thallinger wrote:
> Hi Duncan,
> 
>>> I just wanna add a related suggestion that when you have multiple 
>>> installations and you run "Unistall R 2.6.0" the first dialog
>>> ('R for Windows Uninstall') you see says "Are you sure you want to
>>> completely remove R for Windows and all of its components?"  This
>>> message does not specify the version being uninstalled, so without
>>> previous experience you certainly wonder if this is going to install
>>> all of your R installations or just one.
>>
>> I'm just testing now, but I suspect Gerhard's suggestion of 
>> specifying AppID will fix this too.
> 
>  Thanks for looking into this. I think setting "AppName" to the same
>  as "AppVerName" (which includes the version number) should cover both
>  Henrik's and my suggestion. 

Yes, that looks like the easiest solution.  The Inno Setup docs tell you 
not to do that; I'm just trying it now to see if it produces really ugly 
messages somewhere.

An alternative solution is to override the ConfirmUninstall message, but 
that has to be done separately in all the languages we support, so I 
like the AppVerName solution better.

Duncan Murdoch


From ripley at stats.ox.ac.uk  Wed Feb 13 14:37:10 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 13 Feb 2008 13:37:10 +0000 (GMT)
Subject: [Rd] 0.45<0.45 = TRUE (PR#10744)
In-Reply-To: <fotgbo$n7m$2@ger.gmane.org>
References: <1202827999.2701.19.camel@prometheus.geog.ucl.ac.uk><XFMail.080212153130.Ted.Harding@manchester.ac.uk>
	<f8e6ff050802121025w717ef902q7d186d0e1664845f@mail.gmail.com>
	<fotgbo$n7m$2@ger.gmane.org>
Message-ID: <alpine.LFD.1.00.0802131204220.13146@gannet.stats.ox.ac.uk>

On Wed, 13 Feb 2008, Heikki Kaskelma wrote:

> hadley wickham:
>> It's more than that as though, as floating point addition is no longer
>> guaranteed to be commutative or associative, and multiplication does
>> not distribute over addition.  Many concepts that are clear cut in
>> pure math become fuzzy in floating point math - equality, singularity
>> of matrices etc etc.
>
> Even simple averages may be complicated:
>
> eps=1
> while(1-eps != 1) eps=eps/2
> eps=eps*2

Such calculations are dangerous: we provide .Machine to avoid the need for 
them.  (They have plagued various LAPACK implementations, for example.)

Most R implementations these days use higher-precision registers for 
intermediate internal calculations such as those in mean() and sum().

> (1-1*eps+1-2*eps+1-3*eps)/3 == 1-1:3*eps    #  TRUE FALSE FALSE

Which is not an average, and the difference from the last line below just 
illustrates Hadley's point.

> mean(1-1:3*eps) == 1-1:3*eps    # FALSE  TRUE FALSE
> sum(1-1:3*eps)/3 == 1-1:3*eps   # FALSE FALSE  TRUE
> ((1-1*eps)+(1-2*eps)+(1-3*eps))/3 == 1-1:3*eps   # FALSE FALSE  TRUE
>
> so sometimes all the values may lie on the same side of the "average".

Only if you DIY average!  Note that mean() does a better job than you 
managed, because it uses a higher-precision accumulator.

I think the moral is to rely on the work of those to whom this is not at 
all 'complicated' (you should check out some of the rest of the R 
internals to see 'complicated').

> [Win R 2.6.1]
>
>
> Heikki Kaskelma
> Munkkiniemi, Finland
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Wed Feb 13 15:01:54 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 13 Feb 2008 14:01:54 +0000 (GMT)
Subject: [Rd] Perils of R_LIBRARY_PATH
Message-ID: <Pine.LNX.4.64.0802131346450.10778@auk.stats>

The R front end sets (via etc/ldpath) R_LIBRARY_PATH, including 
R_JAVA_LD_LIBRARY_PATH.  Perhaps the later is too obliging, as I've just 
be caught by it in a way that took me a while to track down.

One of my machines has a Sun jdk1.6.0* JDK installed, and as a result
we have

${R_JAVA_LD_LIBRARY_PATH=${JAVA_HOME}/lib/amd64/server:${JAVA_HOME}/lib/amd64:
${JAVA_HOME}/../lib/amd64}

What I was not aware of was that the Sun JDK contains Gtk+ libraries such 
as cairo and pango, and those were older than the ones whose headers I 
had compiled against which eventually resulted in a crash.

It seems to be an issue only for a JDK: perhaps Simon can tweak his 
incantations to use only the JRE library path (and avoid the 
'../lib/amd64' above)?

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From osklyar at ebi.ac.uk  Wed Feb 13 15:39:47 2008
From: osklyar at ebi.ac.uk (Oleg Sklyar)
Date: Wed, 13 Feb 2008 14:39:47 +0000
Subject: [Rd] assigning NULLs to elements of a list
In-Reply-To: <xmrve4u180r.fsf@mralx1.rsma.frb.gov>
References: <47B17DD3.1080100@ebi.ac.uk>	<alpine.LFD.1.00.0802121143210.31632@gannet.stats.ox.ac.uk>
	<xmrve4u180r.fsf@mralx1.rsma.frb.gov>
Message-ID: <47B30133.8020802@ebi.ac.uk>

Hmm, I think the pretty traditional R style does the job...

a = list(1,2,3)
a[-2]

So I really do not see a good reason for doing a[2] = NULL instead of a 
= a[-2]

Jeffrey J. Hallman wrote:
>>From your tone, I gather you don't much like this behavior, and I can see your
> point, as it not very intuitive that setting a list element to NULL deletes
> any existing element at that index.  But is there a better way to delete an
> element from a list?  Maybe there should be. 
> 
> Jeff
> 
> Prof Brian Ripley <ripley at stats.ox.ac.uk> writes:
>>> I have just came across an (unexpected to me) behaviour of lists when
>>> assigning NULLs to list elements. I understand that a NULL is a valid R
>>> object, thus assigning a NULL to a list element should yield exactly the
>>> same result as assigning any other object. So I was surprised when
>>> assigning a NULL in fact removed the element from the list. Is this an
>>> intended behaviour? If so, does anybody know where is it documented and
>>> what is a good way around?
>> Yes, it was apparently intended: R has long done this.
>>
>> x <- list(a=c(1L,2L), b=matrix(runif(4),2,2), c=LETTERS[1:3])
>> x[2] <- list(NULL)
>>
>> is what I think you are intending.
>>
>> See e.g. the comment in subassign.c
>>
>>  	    /* If "val" is NULL, this is an element deletion */
>>  	    /* if there is a match to "nlist" otherwise "x" */
>>  	    /* is unchanged.  The attributes need adjustment. */
> 

-- 
Dr Oleg Sklyar * EBI-EMBL, Cambridge CB10 1SD, UK * +44-1223-494466


From ggrothendieck at gmail.com  Wed Feb 13 15:42:20 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 13 Feb 2008 09:42:20 -0500
Subject: [Rd] assigning NULLs to elements of a list
In-Reply-To: <47B30133.8020802@ebi.ac.uk>
References: <47B17DD3.1080100@ebi.ac.uk>
	<alpine.LFD.1.00.0802121143210.31632@gannet.stats.ox.ac.uk>
	<xmrve4u180r.fsf@mralx1.rsma.frb.gov> <47B30133.8020802@ebi.ac.uk>
Message-ID: <971536df0802130642jb6557b2rf660817081389d15@mail.gmail.com>

But what about by name?

a <- list(a = 1, b = 2, c = 3)

a$b <- NULL


On Feb 13, 2008 9:39 AM, Oleg Sklyar <osklyar at ebi.ac.uk> wrote:
> Hmm, I think the pretty traditional R style does the job...
>
> a = list(1,2,3)
> a[-2]
>
> So I really do not see a good reason for doing a[2] = NULL instead of a
> = a[-2]
>
>
> Jeffrey J. Hallman wrote:
> >>From your tone, I gather you don't much like this behavior, and I can see your
> > point, as it not very intuitive that setting a list element to NULL deletes
> > any existing element at that index.  But is there a better way to delete an
> > element from a list?  Maybe there should be.
> >
> > Jeff
> >
> > Prof Brian Ripley <ripley at stats.ox.ac.uk> writes:
> >>> I have just came across an (unexpected to me) behaviour of lists when
> >>> assigning NULLs to list elements. I understand that a NULL is a valid R
> >>> object, thus assigning a NULL to a list element should yield exactly the
> >>> same result as assigning any other object. So I was surprised when
> >>> assigning a NULL in fact removed the element from the list. Is this an
> >>> intended behaviour? If so, does anybody know where is it documented and
> >>> what is a good way around?
> >> Yes, it was apparently intended: R has long done this.
> >>
> >> x <- list(a=c(1L,2L), b=matrix(runif(4),2,2), c=LETTERS[1:3])
> >> x[2] <- list(NULL)
> >>
> >> is what I think you are intending.
> >>
> >> See e.g. the comment in subassign.c
> >>
> >>          /* If "val" is NULL, this is an element deletion */
> >>          /* if there is a match to "nlist" otherwise "x" */
> >>          /* is unchanged.  The attributes need adjustment. */
> >
>
> --
> Dr Oleg Sklyar * EBI-EMBL, Cambridge CB10 1SD, UK * +44-1223-494466
>
> ______________________________________________
>
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From b.rowlingson at lancaster.ac.uk  Wed Feb 13 13:40:48 2008
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 13 Feb 2008 12:40:48 +0000
Subject: [Rd] 0.45<0.45 = TRUE (PR#10744)
In-Reply-To: <f8e6ff050802121025w717ef902q7d186d0e1664845f@mail.gmail.com>
References: <1202827999.2701.19.camel@prometheus.geog.ucl.ac.uk>	<XFMail.080212153130.Ted.Harding@manchester.ac.uk>
	<f8e6ff050802121025w717ef902q7d186d0e1664845f@mail.gmail.com>
Message-ID: <47B2E550.2020604@lancaster.ac.uk>

hadley wickham wrote:

> It's more than that as though, as floating point addition is no longer
> guaranteed to be commutative or associative, and multiplication does
> not distribute over addition.  Many concepts that are clear cut in
> pure math become fuzzy in floating point math - equality, singularity
> of matrices etc etc.

  I've just noticed that R doesn't calculate e^pi - pi as equal to 20:

  > exp(pi)-pi == 20
  [1] FALSE

  See: http://www.xkcd.com/217/

Barry


From osklyar at ebi.ac.uk  Wed Feb 13 15:57:34 2008
From: osklyar at ebi.ac.uk (Oleg Sklyar)
Date: Wed, 13 Feb 2008 14:57:34 +0000
Subject: [Rd] assigning NULLs to elements of a list
In-Reply-To: <971536df0802130642jb6557b2rf660817081389d15@mail.gmail.com>
References: <47B17DD3.1080100@ebi.ac.uk>	
	<alpine.LFD.1.00.0802121143210.31632@gannet.stats.ox.ac.uk>	
	<xmrve4u180r.fsf@mralx1.rsma.frb.gov> <47B30133.8020802@ebi.ac.uk>
	<971536df0802130642jb6557b2rf660817081389d15@mail.gmail.com>
Message-ID: <47B3055E.2040301@ebi.ac.uk>

:) Well, yes, but what do you do with a named vector if you want to 
remove an element by name?

It is not general: you cannot do that on vectors, matrices, arrays and 
all inherited objects anyway. Using a negative index is a standard and 
throughout practice of deleting elements in R. Surely one can have 
exceptions or extended behaviour for different classes, like list and 
data.frame here, but I cannot say it is really necessary to have it in 
order to produce a clean, easily readable and reliable code. Yes, I know 
now, this NULL assignment has existed there for long time and I am not 
about to propose its removal, but I really do not see a good reason for 
having it either. I would never use it in my code either. After all you 
do not assign NULLs to elements of a non-list vector or matrix or array.

Best,
Oleg

Gabor Grothendieck wrote:
> But what about by name?
> 
> a <- list(a = 1, b = 2, c = 3)
> 
> a$b <- NULL
> 
> 
> On Feb 13, 2008 9:39 AM, Oleg Sklyar <osklyar at ebi.ac.uk> wrote:
>> Hmm, I think the pretty traditional R style does the job...
>>
>> a = list(1,2,3)
>> a[-2]
>>
>> So I really do not see a good reason for doing a[2] = NULL instead of a
>> = a[-2]
>>
>>
>> Jeffrey J. Hallman wrote:
>>> >From your tone, I gather you don't much like this behavior, and I can see your
>>> point, as it not very intuitive that setting a list element to NULL deletes
>>> any existing element at that index.  But is there a better way to delete an
>>> element from a list?  Maybe there should be.
>>>
>>> Jeff
>>>
>>> Prof Brian Ripley <ripley at stats.ox.ac.uk> writes:
>>>>> I have just came across an (unexpected to me) behaviour of lists when
>>>>> assigning NULLs to list elements. I understand that a NULL is a valid R
>>>>> object, thus assigning a NULL to a list element should yield exactly the
>>>>> same result as assigning any other object. So I was surprised when
>>>>> assigning a NULL in fact removed the element from the list. Is this an
>>>>> intended behaviour? If so, does anybody know where is it documented and
>>>>> what is a good way around?
>>>> Yes, it was apparently intended: R has long done this.
>>>>
>>>> x <- list(a=c(1L,2L), b=matrix(runif(4),2,2), c=LETTERS[1:3])
>>>> x[2] <- list(NULL)
>>>>
>>>> is what I think you are intending.
>>>>
>>>> See e.g. the comment in subassign.c
>>>>
>>>>          /* If "val" is NULL, this is an element deletion */
>>>>          /* if there is a match to "nlist" otherwise "x" */
>>>>          /* is unchanged.  The attributes need adjustment. */
>> --
>> Dr Oleg Sklyar * EBI-EMBL, Cambridge CB10 1SD, UK * +44-1223-494466
>>
>> ______________________________________________
>>
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>

-- 
Dr Oleg Sklyar * EBI-EMBL, Cambridge CB10 1SD, UK * +44-1223-494466


From Ted.Harding at manchester.ac.uk  Wed Feb 13 16:57:07 2008
From: Ted.Harding at manchester.ac.uk ( (Ted Harding))
Date: Wed, 13 Feb 2008 15:57:07 -0000 (GMT)
Subject: [Rd] 0.45<0.45 = TRUE (PR#10744)
In-Reply-To: <47B2E550.2020604@lancaster.ac.uk>
Message-ID: <XFMail.080213155707.Ted.Harding@manchester.ac.uk>

On 13-Feb-08 12:40:48, Barry Rowlingson wrote:
> hadley wickham wrote:
> 
>> It's more than that as though, as floating point addition is
>> no longer guaranteed to be commutative or associative, and
>> multiplication does not distribute over addition. Many concepts
>> that are clear cut in pure math become fuzzy in floating point
>> math - equality, singularity of matrices etc etc.
> 
>   I've just noticed that R doesn't calculate e^pi - pi as equal to 20:
> 
>   > exp(pi)-pi == 20
>   [1] FALSE
> 
>   See: http://www.xkcd.com/217/
> 
> Barry

Barry,
These things fluctuate. Once upon a time (sometime in 1915 will do)
you could get $[US]4.81 for ?1.00 sterling.

One of the rare brief periods when the folks on opposite side
of the Atlantic saw i^i (to within .Machine$double.eps, which
at the time was about 0.001, if you were lucky and didn't
make a slip of the pen).

R still gets it approximately right:

  1/(1i^1i)
  [1] 4.810477+0i

$i^i = ?1

Best wishes,
Ted.

--------------------------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding at manchester.ac.uk>
Fax-to-email: +44 (0)870 094 0861
Date: 13-Feb-08                                       Time: 15:57:02
------------------------------ XFMail ------------------------------


From huber at ebi.ac.uk  Wed Feb 13 17:17:32 2008
From: huber at ebi.ac.uk (Wolfgang Huber)
Date: Wed, 13 Feb 2008 16:17:32 +0000
Subject: [Rd] Surprising behaviour of levelplot in lattice package
Message-ID: <47B3181C.3090508@ebi.ac.uk>

Hi Deepayan,

levelplot from the lattice package produces a peculiar output when
called on a matrix whose column or row names contained duplicated
elements. In particular, the plot contains white stripes, and the
arrangement of data regions and axes labels seems messed up. I did not
see this documented (my apologies if this is an oversight) and guess
that it is unintended:


library("lattice")
m = matrix(runif(12L), ncol=3L)
colnames(m) = c("A", "A", "B")
rownames(m) = c("x", "y", "y", "z")
print(levelplot(m))



Best wishes
 Wolfgang

------------------------------------------------------------------
Wolfgang Huber  EBI/EMBL  Cambridge UK  http://www.ebi.ac.uk/huber



> sessionInfo()
R version 2.7.0 Under development (unstable) (2008-02-13 r44450)
x86_64-unknown-linux-gnu

locale:
LC_CTYPE=it_IT.UTF-8;LC_NUMERIC=C;LC_TIME=it_IT.UTF-8;LC_COLLATE=it_IT.UTF-8;LC_MONETARY=it_IT.UTF-8;LC_MESSAGES=it_IT.UTF-8;LC_PAPER=it_IT.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=it_IT.UTF-8;LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] lattice_0.17-4 fortunes_1.3-4

loaded via a namespace (and not attached):
[1] grid_2.7.0
>


From hb at stat.berkeley.edu  Wed Feb 13 17:57:23 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Wed, 13 Feb 2008 08:57:23 -0800
Subject: [Rd] Best way to reset random seed when using set.seed() in a
	function?
Message-ID: <59d7961d0802130857l7b4abcfcu891c066bcbe3d21a@mail.gmail.com>

Hi,

this is related to a question just raised on Bioconductor where one
function sets the random seed internally but never resets it, which
results in enforced down streams random samples being deterministic.

What is the best way to reset the random seed when you use set.seed()
within a function?  Is it still to re-assign '.Random.seed' in the
global environment as following example illustrates?  I'm not too kind
of having function modifying the global environment, if not really
necessary.

foo <- function(n) {
  # Pop random seed
  if (!exists(".Random.seed", mode="numeric"))
    sample(NA);
  oldSeed <- .Random.seed;

  # Fixed seed to get reproducible samples here
  set.seed(0xbeef);
  x <- sample(5);

  # Proof of concept: 'x' should be the same all the time
  stopifnot(identical( x, as.integer(c(4,2,5,1,3)) ));

  # Push random seed to old state
  assign(".Random.seed", oldSeed, envir=globalenv())

  # Continue as nothing happened
  sample(n);
}

> foo(5)
[1] 4 2 3 5 1
> foo(5)
[1] 4 2 3 1 5
> foo(5)
[1] 5 3 1 4 2
> foo(5)
[1] 5 3 2 4 1
> foo(5)

Is this the way to do it?

Thanks

Henrik


From ripley at stats.ox.ac.uk  Wed Feb 13 18:32:10 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 13 Feb 2008 17:32:10 +0000 (GMT)
Subject: [Rd] Best way to reset random seed when using set.seed() in a
 function?
In-Reply-To: <59d7961d0802130857l7b4abcfcu891c066bcbe3d21a@mail.gmail.com>
References: <59d7961d0802130857l7b4abcfcu891c066bcbe3d21a@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0802131726060.15124@auk.stats>

On Wed, 13 Feb 2008, Henrik Bengtsson wrote:

> Hi,
>
> this is related to a question just raised on Bioconductor where one
> function sets the random seed internally but never resets it, which
> results in enforced down streams random samples being deterministic.
>
> What is the best way to reset the random seed when you use set.seed()
> within a function?  Is it still to re-assign '.Random.seed' in the
> global environment as following example illustrates?  I'm not too kind
> of having function modifying the global environment, if not really
> necessary.

It is necessary.  Of course, any use of random numbers modifies this 
variable in the global environment, so many, many functions already do.

There is a write-up in 'R Internals' of what is permissible in 
modifying the base and global environments.

> foo <- function(n) {
>  # Pop random seed
>  if (!exists(".Random.seed", mode="numeric"))
>    sample(NA);
>  oldSeed <- .Random.seed;
>
>  # Fixed seed to get reproducible samples here
>  set.seed(0xbeef);
>  x <- sample(5);
>
>  # Proof of concept: 'x' should be the same all the time
>  stopifnot(identical( x, as.integer(c(4,2,5,1,3)) ));
>
>  # Push random seed to old state
>  assign(".Random.seed", oldSeed, envir=globalenv())
>
>  # Continue as nothing happened
>  sample(n);
> }
>
>> foo(5)
> [1] 4 2 3 5 1
>> foo(5)
> [1] 4 2 3 1 5
>> foo(5)
> [1] 5 3 1 4 2
>> foo(5)
> [1] 5 3 2 4 1
>> foo(5)
>
> Is this the way to do it?
>
> Thanks
>
> Henrik
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hb at stat.berkeley.edu  Wed Feb 13 18:58:55 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Wed, 13 Feb 2008 09:58:55 -0800
Subject: [Rd] Best way to reset random seed when using set.seed() in a
	function?
In-Reply-To: <Pine.LNX.4.64.0802131726060.15124@auk.stats>
References: <59d7961d0802130857l7b4abcfcu891c066bcbe3d21a@mail.gmail.com>
	<Pine.LNX.4.64.0802131726060.15124@auk.stats>
Message-ID: <59d7961d0802130958g9548bf8y589e80bb4a37fec0@mail.gmail.com>

On Feb 13, 2008 9:32 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> On Wed, 13 Feb 2008, Henrik Bengtsson wrote:
>
> > Hi,
> >
> > this is related to a question just raised on Bioconductor where one
> > function sets the random seed internally but never resets it, which
> > results in enforced down streams random samples being deterministic.
> >
> > What is the best way to reset the random seed when you use set.seed()
> > within a function?  Is it still to re-assign '.Random.seed' in the
> > global environment as following example illustrates?  I'm not too kind
> > of having function modifying the global environment, if not really
> > necessary.
>
> It is necessary.  Of course, any use of random numbers modifies this
> variable in the global environment, so many, many functions already do.
>
> There is a write-up in 'R Internals' of what is permissible in
> modifying the base and global environments.

Thank you, and thanks for the pointer.  I had another question if
'.Random.seed' can end up somewhere else than in the global
environment, but 'R Internals' clearly states that .Random.seed
belongs in the global environment.  My short example was not explicit
about that (and hence to bullet proof).  Here is an update version:

foo <- function(n) {
  # Store old random state
  if (!exists(".Random.seed", mode="numeric", envir=globalenv()))
    sample(NA);
  oldSeed <- get(".Random.seed", mode="numeric", envir=globalenv());

  # Fixed seed to get reproducible samples here
  set.seed(0xbeef);
  x <- sample(5);

  # Proof of concept: 'x' should be the same all the time
  stopifnot(identical( x, as.integer(c(4,2,5,1,3)) ));

  # Reset random seed to old state
  assign(".Random.seed", oldSeed, envir=globalenv());

  # Continue as nothing happened
  sample(n);
}

Cheers

Henrik


>
>
> > foo <- function(n) {
> >  # Pop random seed
> >  if (!exists(".Random.seed", mode="numeric"))
> >    sample(NA);
> >  oldSeed <- .Random.seed;
> >
> >  # Fixed seed to get reproducible samples here
> >  set.seed(0xbeef);
> >  x <- sample(5);
> >
> >  # Proof of concept: 'x' should be the same all the time
> >  stopifnot(identical( x, as.integer(c(4,2,5,1,3)) ));
> >
> >  # Push random seed to old state
> >  assign(".Random.seed", oldSeed, envir=globalenv())
> >
> >  # Continue as nothing happened
> >  sample(n);
> > }
> >
> >> foo(5)
> > [1] 4 2 3 5 1
> >> foo(5)
> > [1] 4 2 3 1 5
> >> foo(5)
> > [1] 5 3 1 4 2
> >> foo(5)
> > [1] 5 3 2 4 1
> >> foo(5)
> >
> > Is this the way to do it?
> >
> > Thanks
> >
> > Henrik
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>


From cetpaine at gmail.com  Wed Feb 13 19:05:12 2008
From: cetpaine at gmail.com (cetpaine at gmail.com)
Date: Wed, 13 Feb 2008 19:05:12 +0100 (CET)
Subject: [Rd] ESC key crashes R (PR#10753)
Message-ID: <20080213180512.9C936282EF48@mail.pubhealth.ku.dk>

Full_Name: C. E. Timothy Paine
Version: 2.6.2
OS: MAC 10.5.2
Submission from: (NULL) (193.51.118.233)


Pressing the ESC key, at any time, will cause R to hang. Please help!

details follow...


Date/Time:      2008-02-13 15:01:11 -0300
OS Version:     10.5.2 (Build 9C31)
Architecture:   i386
Report Version: 4

Command:        R
Path:           /Applications/R.app/Contents/MacOS/R
Version:        R 2.6.2 GUI 1.23 (4932) (4932)
Parent:         launchd [113]

PID:            2418
Event:          hang
Time:           5.07s
Steps:          26


Process:        R [2418]
Path:           /Applications/R.app/Contents/MacOS/R

  ADDRESS         BINARY
  00001000        /Applications/R.app/Contents/MacOS/R
  00059000        /System/Library/Frameworks/ExceptionHandling.framework/Versions/A/ExceptionHandling
  00062000        /Library/Frameworks/R.framework/Versions/2.6/Resources/lib/libRblas.dylib
  002f4000        /Library/Frameworks/R.framework/Versions/2.6/Resources/lib/libR.dylib
  005e8000        /Library/Frameworks/R.framework/Versions/2.6/Resources/lib/libgfortran.2.dylib
  007e8000        /Library/Frameworks/R.framework/Versions/2.6/Resources/lib/libgcc_s.1.dylib
  00812000        /Library/Frameworks/R.framework/Versions/2.6/Resources/lib/libreadline.5.2.dylib
  0c8bb000        /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera
  0d9db000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/Contents/MacOS/Inquisitor
  0ea5e000        /Library/Frameworks/R.framework/Resources/library/methods/libs/i386/methods.so
  0eac1000        /Library/Frameworks/R.framework/Resources/library/grDevices/libs/i386/grDevices.so
  0eb8f000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
  0ec33000        /Library/Frameworks/R.framework/Resources/library/stats/libs/i386/stats.so

  Thread id:      77fcc80
  User stack:
    26 start + 41 (in R) [0x2231]
      26 __start + 216 (in R) [0x230a]
        26 _main + 1135 (in R) [0x2795]
          26 -[REngine runREPL] + 406 (in R) [0xf336]
            26 _run_REngineRmainloop + 271 (in R) [0x16362]
              5 _Re_ReadConsole + 86 (in R) [0xcd2d]
                2 _CFArrayGetCount + 96 (in CoreFoundation) [0x9129e470]
                1 -[RController doProcessEvents:] + 28 (in R) [0x7e09]
                1 -[RController doProcessEvents:] + 4 (in R) [0x7df1]
                1 _CFArrayGetCount + 82 (in CoreFoundation) [0x9129e462]
              3 _objc_msgSend + 0 (in libobjc.A.dylib) [0x96ce76d0]
              3 _objc_msgSend + 16 (in libobjc.A.dylib) [0x96ce76e0]
              2 _objc_msgSend + 44 (in libobjc.A.dylib) [0x96ce76fc]
              2 _objc_msgSend + 80 (in libobjc.A.dylib) [0x96ce7720]
              2 ??? [0xa0a685d7]
              2 ??? [0x41228]
              2 -[RController handleReadConsole:] + 92 (in R) [0x5690]
              1 _CFArrayGetCount + 0 (in CoreFoundation) [0x9129e410]
              1 -[RController handleReadConsole:] + 51 (in R) [0x5667]
              1 _objc_msgSend + 41 (in libobjc.A.dylib) [0x96ce76f9]
              1 -[RController handleReadConsole:] + 100 (in R) [0x5698]
              1 -[NSCFArray count] + 4 (in Foundation) [0x94bf00e4]
  Kernel stack:
    26 _z_errmsg + 33 [0x445d61]
      26 _panic_dialog_test + 1459 [0x1af6ee]
        26 _commpage_set_nanotime + 4042 [0x1a7f5e]

  Thread id:      aa4f790
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __Z22CFURLCacheWorkerThreadPv + 396 (in CFNetwork) [0x9438c6cc]
          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5c49998
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 ___select_nocancel + 10 (in libSystem.B.dylib) [0x96bab72e]

  Thread id:      72af8b8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 -[NSUIHeartBeat _heartBeatThread:] + 753 (in AppKit)
[0x963d87f0]
              26 -[NSConditionLock lockWhenCondition:] + 69 (in Foundation)
[0x94c3b275]
                26 -[NSConditionLock lockWhenCondition:beforeDate:] + 144 (in
Foundation) [0x94c3b310]
                  26 -[NSCondition waitUntilDate:] + 236 (in Foundation)
[0x94c3b4fc]
                    26 _semaphore_timedwait_signal_trap + 10 (in
libSystem.B.dylib) [0x96b73a46]

  Thread id:      77f9f20
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _fe_fragment_thread + 54 (in QuartzCore) [0x95fe1121]
          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]


Process:        ATSServer [127]
Path:           /System/Library/Frameworks/ApplicationServices.framework/Frameworks/ATS.framework/Support/ATSServer

  ADDRESS         BINARY
  00001000        /System/Library/Frameworks/ApplicationServices.framework/Frameworks/ATS.framework/Support/ATSServer

  Thread id:      59c2998
  User stack:
    26 ??? [0x4e26]
      26 ??? [0xdd24f]
        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5287790
  User stack:
    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]


Process:        AirPort Base Station Agent [141]
Path:           /System/Library/CoreServices/AirPort Base Station
Agent.app/Contents/MacOS/AirPort Base Station Agent

  ADDRESS         BINARY
  00001000        /System/Library/CoreServices/AirPort Base Station
Agent.app/Contents/MacOS/AirPort Base Station Agent
  000b4000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/Contents/MacOS/Inquisitor

  Thread id:      6670048
  User stack:
    26 ??? [0x2c25]
      26 ??? [0x2cfe]
        26 _NSApplicationMain + 574 (in AppKit) [0x9633830a]
          26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
            26 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:]
+ 128 (in AppKit) [0x9637208e]
              26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
                26 _BlockUntilNextEventMatchingListInMode + 106 (in HIToolbox)
[0x952be32d]
                  26 _ReceiveNextEventCommon + 374 (in HIToolbox) [0x952be4b9]
                    26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
[0x952be6a0]
                      26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
[0x9130fd18]
                        26 _mach_msg_trap + 10 (in libSystem.B.dylib)
[0x96b739e6]

  Thread id:      666e5d0
  User stack:
    26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]

  Thread id:      6b9b048
  User stack:
    26 _semaphore_timedwait_signal_trap + 10 (in libSystem.B.dylib)
[0x96b73a46]


Process:        AppleSpell [455]
Path:           /System/Library/Services/AppleSpell.service/Contents/MacOS/AppleSpell

  ADDRESS         BINARY
  00001000        /System/Library/Services/AppleSpell.service/Contents/MacOS/AppleSpell
  000f9000        /usr/lib/liblangid.dylib

  Thread id:      77fd410
  User stack:
    26 ??? [0x1f22]
      26 ??? [0x2229]
        26 -[NSSpellServer run] + 198 (in Foundation) [0x94c6c9a6]
          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]


Process:        Console [2407]
Path:           /Applications/Utilities/Console.app/Contents/MacOS/Console

  ADDRESS         BINARY
  00001000        /Applications/Utilities/Console.app/Contents/MacOS/Console
  0003d000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/Contents/MacOS/Inquisitor
  0079a000        /System/Library/Frameworks/OpenGL.framework/Versions/A/Resources/GLRendererFloat.bundle/GLRendererFloat
  0d4e8000        /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera
  0d7a7000        /System/Library/Frameworks/OpenGL.framework/Resources/GLEngine.bundle/GLEngine
  0d956000        /System/Library/Extensions/GeForce8xxxGLDriver.bundle/Contents/MacOS/GeForce8xxxGLDriver
  0f84a000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib

  Thread id:      6b98e40
  User stack:
    26 ??? [0x2ac2]
      26 _NSApplicationMain + 574 (in AppKit) [0x9633830a]
        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
          26 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] +
128 (in AppKit) [0x9637208e]
            26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
              26 _BlockUntilNextEventMatchingListInMode + 106 (in HIToolbox)
[0x952be32d]
                26 _ReceiveNextEventCommon + 374 (in HIToolbox) [0x952be4b9]
                  26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
[0x952be6a0]
                    26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
[0x9130fd18]
                      26 _mach_msg_trap + 10 (in libSystem.B.dylib)
[0x96b739e6]

  Thread id:      9bbac80
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]

  Thread id:      7ea7f20
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _glvmDoWork + 162 (in libGLProgrammability.dylib) [0x92a67f32]
          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      4b29e40
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _fe_fragment_thread + 54 (in QuartzCore) [0x95fe1121]
          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      59c1a78
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___read + 10 (in libSystem.B.dylib) [0x96b9771a]
  Kernel stack:
    26 _deflate_copyright + 8631 [0x3dbe77]
      26 __ZN9IOService21unregisterAllInterestEv + 9 [0x389fd9]
        26 __ZN9IOService14messageClientsEmPvj + 3 [0x389d99]
          26 _journal_is_clean + 1748 [0x1eabf4]
            26 _union_mkdir + 164 [0x1f5229]
              26 _bpfioctl + 332 [0x201088]
                26 __ZN25IOGeneralMemoryDescriptor7prepareE11IODirection + 27
[0x3a516f]
                  26
__ZN12_IOMemoryMap14copyCompatibleEP18IOMemoryDescriptorP4taskjmmm + 173
[0x3a65b9]
                    26 _IOHibernateSystemInit + 294 [0x37eb5a]
                      26 _IOHibernateSystemSleep + 1493 [0x37e7a9]
                        26 _pmsSetStep + 313 [0x130a08]
                          26 _stack_collect + 142 [0x1369e5]
                            26 _stack_free + 28 [0x136778]


Process:        DashboardClient [605]
Path:           /System/Library/CoreServices/Dock.app/Contents/Resources/DashboardClient.app/Contents/MacOS/DashboardClient

  ADDRESS         BINARY
  00001000        /System/Library/CoreServices/Dock.app/Contents/Resources/DashboardClient.app/Contents/MacOS/DashboardClient
  0002d000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/Contents/MacOS/Inquisitor
  000c4000        /Library/Widgets/Dictionary.wdgt/Dictionary.widgetplugin/Contents/MacOS/Dictionary
  00300000        /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera
  00450000        /Library/Internet
Plug-Ins/JavaPluginCocoa.bundle/Contents/MacOS/JavaPluginCocoa
  0074a000        /System/Library/Frameworks/JavaVM.framework/Versions/A/JavaVM
  0075b000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/ATSHI.dylib
  00795000        /Library/Widgets/Web
Clip.wdgt/WebClip.plugin/Contents/MacOS/WebClip
  0fb01000        /System/Library/PrivateFrameworks/Calculate.framework/Calculate
  109ee000        /System/Library/Frameworks/CoreAudioKit.framework/Versions/A/CoreAudioKit
  10ace000        /Library/QuickTime/DivX Decoder.component/Contents/MacOS/DivX
Decoder
  10f00000        /Library/Internet Plug-Ins/Flash
Player.plugin/Contents/MacOS/Flash Player
  12c18000        /System/Library/CoreServices/Encodings/libTraditionalChineseConverter.dylib
  ba900000        /System/Library/CoreServices/Encodings/libJapaneseConverter.dylib

  Thread id:      6b97000
  User stack:
    26 ??? [0x2b7a]
      26 ??? [0xa545]
        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
          26 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] +
128 (in AppKit) [0x9637208e]
            26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
              26 _BlockUntilNextEventMatchingListInMode + 106 (in HIToolbox)
[0x952be32d]
                26 _ReceiveNextEventCommon + 374 (in HIToolbox) [0x952be4b9]
                  26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
[0x952be6a0]
                    26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
[0x9130fd18]
                      25 _mach_msg_trap + 10 (in libSystem.B.dylib)
[0x96b739e6]
                      1 _CFRunLoopRunSpecific + 4494 (in CoreFoundation)
[0x9130fb5e]
                        1 ___NSFireTimer + 147 (in Foundation) [0x94c29bc3]
                          1 -[WebBaseNetscapePluginView sendNullEvent] + 161 (in
WebKit) [0x9497d161]
                            1 -[WebBaseNetscapePluginView sendEvent:] + 347 (in
WebKit) [0x9497b5fb]
                              1 _Flash_EnforceLocalSecurity + 354 (in Flash
Player) [0x112a878a]
                                1 _Flash_EnforceLocalSecurity + 81841 (in Flash
Player) [0x112bc5d9]
                                  1 ??? [0x1114a016]
                                    1 _swtch_pri + 10 (in libSystem.B.dylib)
[0x96b73aca]

  Thread id:      5a942e8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __Z22CFURLCacheWorkerThreadPv + 396 (in CFNetwork) [0x9438c6cc]
          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      7ea8a78
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 +[NSURLConnection(NSURLConnectionReallyInternal)
_resourceLoadLoop:] + 320 (in Foundation) [0x94c58ac0]
              26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      6b986b0
  User stack:
    26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]

  Thread id:      9bbb7d8
  User stack:
    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      4b2bc80
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0x1128f81c]
          26 _Flash_EnforceLocalSecurity + 124992 (in Flash Player)
[0x112c6e68]
            26 ??? [0x1128f572]
              26 _semaphore_wait_signal_trap + 10 (in libSystem.B.dylib)
[0x96b73a2e]

  Thread id:      7eaa8b8
  User stack:
    26 _semaphore_wait_signal_trap + 10 (in libSystem.B.dylib) [0x96b73a2e]


Process:        DashboardClient [606]
Path:           /System/Library/CoreServices/Dock.app/Contents/Resources/DashboardClient.app/Contents/MacOS/DashboardClient

  ADDRESS         BINARY
  00001000        /System/Library/CoreServices/Dock.app/Contents/Resources/DashboardClient.app/Contents/MacOS/DashboardClient
  0002d000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/Contents/MacOS/Inquisitor
  000d8000        /Library/Widgets/Unit
Converter.wdgt/ConverterPlugin.widgetplugin/Contents/MacOS/ConverterPlugin
  00300000        /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera

  Thread id:      7ea7000
  User stack:
    26 ??? [0x2b7a]
      26 ??? [0xa545]
        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
          26 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] +
128 (in AppKit) [0x9637208e]
            26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
              26 _BlockUntilNextEventMatchingListInMode + 106 (in HIToolbox)
[0x952be32d]
                26 _ReceiveNextEventCommon + 374 (in HIToolbox) [0x952be4b9]
                  26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
[0x952be6a0]
                    26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
[0x9130fd18]
                      26 _mach_msg_trap + 10 (in libSystem.B.dylib)
[0x96b739e6]

  Thread id:      6b99208
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __Z22CFURLCacheWorkerThreadPv + 396 (in CFNetwork) [0x9438c6cc]
          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      6b973c8
  User stack:
    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      6b9a128
  User stack:
    26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]


Process:        DirectoryService [33]
Path:           /usr/sbin/DirectoryService

  ADDRESS         BINARY
  00001000        /usr/sbin/DirectoryService
  0015a000        /System/Library/PrivateFrameworks/DirectoryServiceCore.framework/Versions/A/DirectoryServiceCore

  Thread id:      5199128
  User stack:
    26 start + 54 (in DirectoryService) [0x165ca]
      26 _main + 2569 (in DirectoryService) [0x16ff1]
        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      51998b8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __ZN9DSLThread11_RunWrapperEPv + 84 (in DirectoryServiceCore)
[0x162196]
          26 __ZN9DSCThread3RunEv + 39 (in DirectoryServiceCore) [0x161f8b]
            26 __ZN20CPluginRunLoopThread10ThreadMainEv + 222 (in
DirectoryService) [0x23126]
              26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
                26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      4b28f20
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __ZN9DSLThread11_RunWrapperEPv + 84 (in DirectoryServiceCore)
[0x162196]
          26 __ZN9DSCThread3RunEv + 39 (in DirectoryServiceCore) [0x161f8b]
            26 __ZN17CMigHandlerThread10ThreadMainEv + 303 (in DirectoryService)
[0x2335f]
              26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
  Kernel stack:
    26 _cpuid_features + 84 [0x19714c]
      26 _mach_port_extract_right + 67 [0x126e12]
        26 _ipc_port_dngrow + 318 [0x120e9a]
          26 _stack_collect + 142 [0x1369e5]
            26 _stack_free + 28 [0x136778]

  Thread id:      5289998
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]

  Thread id:      9bb95d0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __ZN9DSLThread11_RunWrapperEPv + 84 (in DirectoryServiceCore)
[0x162196]
          26 _syscall + 5 (in libSystem.B.dylib) [0x96bb6725]


Process:        Dock [126]
Path:           /System/Library/CoreServices/Dock.app/Contents/MacOS/Dock

  ADDRESS         BINARY
  00001000        /System/Library/CoreServices/Dock.app/Contents/MacOS/Dock
  00400000        /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera
  ba500000        /System/Library/CoreServices/Encodings/libGreekConverter.dylib

  Thread id:      550cb58
  User stack:
    26 ??? [0x5472]
      26 ??? [0x95c85]
        26 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 213 (in Foundation)
[0x94c29b15]
          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5a946b0
  User stack:
    26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      5a93790
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      25 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        25 ??? [0x12d8a]
          25 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
      1 _clock_sleep_trap + 10 (in libSystem.B.dylib) [0x96b73aee]
  Kernel stack:
    1 _cpuid_features + 84 [0x19714c]
      1 _ipc_processor_disable + 32 [0x12a6f7]
        1 _stack_collect + 142 [0x1369e5]
          1 _stack_free + 28 [0x136778]

  Thread id:      5a955d0
  User stack:
    26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]


Process:        Finder [130]
Path:           /System/Library/CoreServices/Finder.app/Contents/MacOS/Finder

  ADDRESS         BINARY
  00001000        /System/Library/CoreServices/Finder.app/Contents/MacOS/Finder
  004e4000        /System/Library/Frameworks/Collaboration.framework/Versions/A/Collaboration
  0060a000        /System/Library/TextEncodings/Unicode
Encodings.bundle/Contents/MacOS/Unicode Encodings
  00686000        /System/Library/PrivateFrameworks/URLMount.framework/URLMount
  0a1f5000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/Contents/MacOS/Inquisitor
  0a22f000        /System/Library/PrivateFrameworks/QuickLookUI.framework/Versions/A/Resources/DisplayBundles/PDF.qldisplay/Contents/MacOS/PDF
  0a262000        /System/Library/PrivateFrameworks/QuickLookUI.framework/Versions/A/Resources/DisplayBundles/NSImage.qldisplay/Contents/MacOS/NSImage
  0a27a000        /System/Library/PrivateFrameworks/QuickLookUI.framework/Versions/A/Resources/DisplayBundles/Generic.qldisplay/Contents/MacOS/Generic
  0a292000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libFontStreams.A.dylib
  0a4af000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
  0db2d000        /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera
  ba500000        /System/Library/CoreServices/Encodings/libGreekConverter.dylib

  Thread id:      666f4f0
  User stack:
    26 ??? [0x94e6]
      26 ??? [0xf37d9]
        26 ??? [0x23605]
          26 _RunApplicationEventLoop + 207 (in HIToolbox) [0x9531b95b]
            26 __AcquireNextEvent + 58 (in HIToolbox) [0x9531d1fe]
              26 _ReceiveNextEventCommon + 374 (in HIToolbox) [0x952be4b9]
                26 _RunCurrentEventLoopInMode + 283 (in HIToolbox) [0x952be6a0]
                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      666de40
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
          26 __ZN23TSystemNotificationTask26SystemNotificationTaskProcEPv + 123
(in DesktopServicesPriv) [0x957c846f]
            26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
              26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      666da78
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
          26 __ZN25TFSEventsNotificationTask28FSEventsNotificationTaskProcEPv +
216 (in DesktopServicesPriv) [0x957c85e8]
            26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
              26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      666d2e8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
          26 __ZN13TNodeSyncTask12SyncTaskProcEPv + 84 (in DesktopServicesPriv)
[0x957d3a7a]
            26 _MPWaitOnQueue + 208 (in CarbonCore) [0x918d0654]
              26 _TSWaitOnConditionTimedRelative + 202 (in CarbonCore)
[0x918af8fe]
                26 _TSWaitOnCondition + 126 (in CarbonCore) [0x918d09d7]
                  26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      666cb58
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]

  Thread id:      666c790
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]

  Thread id:      519a048
  User stack:
    26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      72b07d8
  User stack:
    26 _semaphore_timedwait_signal_trap + 10 (in libSystem.B.dylib)
[0x96b73a46]

  Thread id:      5c4b410
  User stack:
    25 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      25 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        25 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
          25 __ZN15TFolderSizeTask18FolderSizeTaskProcEPv + 104 (in
DesktopServicesPriv) [0x957d59c4]
            25 _MPWaitOnQueue + 208 (in CarbonCore) [0x918d0654]
              25 _TSWaitOnConditionTimedRelative + 246 (in CarbonCore)
[0x918af92a]
                25 _semaphore_timedwait_signal_trap + 10 (in libSystem.B.dylib)
[0x96b73a46]


Process:        Firewall [262]
Path:           /usr/libexec/ApplicationFirewall/Firewall

  ADDRESS         BINARY
  00001000        /usr/libexec/ApplicationFirewall/Firewall

  Thread id:      7eaa4f0
  User stack:
    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]


Process:        KernelEventAgent [25]
Path:           /usr/sbin/KernelEventAgent

  ADDRESS         BINARY
  00001000        /usr/sbin/KernelEventAgent

  Thread id:      4b28000
  User stack:
    26 start + 54 (in KernelEventAgent) [0x1bfe]
      26 _main + 1126 (in KernelEventAgent) [0x3b7f]
        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      51972e8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]


Process:        Mail [451]
Path:           /Applications/Mail.app/Contents/MacOS/Mail

  ADDRESS         BINARY
  00001000        /Applications/Mail.app/Contents/MacOS/Mail
  002da000        /System/Library/Frameworks/Message.framework/Versions/B/Message
  0067c000        /System/Library/Frameworks/ExceptionHandling.framework/Versions/A/ExceptionHandling
  00685000        /System/Library/Frameworks/LatentSemanticMapping.framework/Versions/A/LatentSemanticMapping
  006c5000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/Contents/MacOS/Inquisitor
  0100c000        /usr/lib/liblangid.dylib
  0ab7c000        /System/Library/Contextual Menu
Items/BluetoothContextualMenu.plugin/Contents/MacOS/BluetoothContextualMenu
  0ab86000        /System/Library/Contextual Menu
Items/AutomatorCMM.plugin/Contents/MacOS/AutomatorCMM
  0ab93000        /System/Library/PrivateFrameworks/BezelServices.framework/Versions/A/BezelServices
  0ab9d000        /System/Library/Contextual Menu
Items/FolderActionsMenu.plugin/Contents/MacOS/FolderActionsMenu
  0abba000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/ATSHI.dylib
  0d3ef000        /System/Library/Frameworks/IOBluetooth.framework/Versions/A/IOBluetooth
  0d4f4000        /System/Library/CoreServices/Encodings/libTraditionalChineseConverter.dylib
  0d70d000        /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera
  0ddb9000        /System/Library/Frameworks/OpenGL.framework/Versions/A/Resources/GLRendererFloat.bundle/GLRendererFloat
  0e0af000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
  0e9b6000        /System/Library/TextEncodings/Unicode
Encodings.bundle/Contents/MacOS/Unicode Encodings
  0f70f000        /Library/Internet
Plug-Ins/JavaPluginCocoa.bundle/Contents/MacOS/JavaPluginCocoa
  0f78a000        /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn
  0f793000        /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn
  0f815000        /Library/QuickTime/DivX Decoder.component/Contents/MacOS/DivX
Decoder
  0f902000        /System/Library/Frameworks/JavaVM.framework/Versions/A/JavaVM
  0fb5f000        /System/Library/Frameworks/Message.framework/Versions/B/Resources/Syncer.syncschema/Contents/MacOS/Syncer
  0fb90000        /System/Library/PrivateFrameworks/SyncServicesUI.framework/Versions/A/SyncServicesUI
  0fdcd000        /Applications/Mail.app/Contents/PlugIns/MailWebPlugIn.bundle/Contents/MacOS/MailWebPlugIn
  10700000        /System/Library/Frameworks/OpenGL.framework/Resources/GLEngine.bundle/GLEngine
  10bcc000        /System/Library/Extensions/GeForce8xxxGLDriver.bundle/Contents/MacOS/GeForce8xxxGLDriver
  1116e000        /usr/lib/libmecab.1.0.0.dylib
  70000000        /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio
  ba300000        /System/Library/CoreServices/Encodings/libCyrillicConverter.dylib
  ba900000        /System/Library/CoreServices/Encodings/libJapaneseConverter.dylib

  Thread id:      6b97f20
  User stack:
    26 ??? [0xfa206]
      26 _NSApplicationMain + 574 (in AppKit) [0x9633830a]
        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
          26 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] +
128 (in AppKit) [0x9637208e]
            26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
              26 _BlockUntilNextEventMatchingListInMode + 106 (in HIToolbox)
[0x952be32d]
                26 _ReceiveNextEventCommon + 374 (in HIToolbox) [0x952be4b9]
                  26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
[0x952be6a0]
                    26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
[0x9130fd18]
                      26 _mach_msg_trap + 10 (in libSystem.B.dylib)
[0x96b739e6]

  Thread id:      6b9a4f0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 -[RSSInterchange _runManager] + 2140 (in Message) [0x3ce0a0]
              26 -[NSRunLoop(NSRunLoop) run] + 84 (in Foundation) [0x94c35c34]
                26 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 213 (in
Foundation) [0x94c29b15]
                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      9bb9998
  User stack:
    26 ___workq_ops + 10 (in libSystem.B.dylib) [0x96bdd5c6]

  Thread id:      77f93c8
  User stack:
    26 ??? [0x0]

  Thread id:      77fc128
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _fe_fragment_thread + 54 (in QuartzCore) [0x95fe1121]
          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      6b99998
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __Z22CFURLCacheWorkerThreadPv + 396 (in CFNetwork) [0x9438c6cc]
          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      77fdba0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 +[NSURLConnection(NSURLConnectionReallyInternal)
_resourceLoadLoop:] + 320 (in Foundation) [0x94c58ac0]
              26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      7eaa128
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 +[_NSSocket _runIOThread] + 98 (in Message) [0x2f4871]
              26 -[NSRunLoop(NSRunLoop) run] + 84 (in Foundation) [0x94c35c34]
                26 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 213 (in
Foundation) [0x94c29b15]
                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5510410
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]

  Thread id:      7ea82e8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __ZN9CAPThread5EntryEPS_ + 96 (in CoreAudio) [0x91d99300]
          26 __ZN10HALRunLoop9OwnThreadEPv + 160 (in CoreAudio) [0x91d99464]
            26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
              26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5288a78
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 -[NSUIHeartBeat _heartBeatThread:] + 753 (in AppKit)
[0x963d87f0]
              26 -[NSConditionLock lockWhenCondition:] + 69 (in Foundation)
[0x94c3b275]
                26 -[NSConditionLock lockWhenCondition:beforeDate:] + 144 (in
Foundation) [0x94c3b310]
                  26 -[NSCondition waitUntilDate:] + 236 (in Foundation)
[0x94c3b4fc]
                    26 _semaphore_timedwait_signal_trap + 10 (in
libSystem.B.dylib) [0x96b73a46]

  Thread id:      c79a410
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __Z11CMMConvTaskPv + 54 (in ColorSync) [0x95dd1d92]
          26 __Z20pthreadSemaphoreWaitP18t_pthreadSemaphore + 42 (in ColorSync)
[0x95dbf460]
            26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      48843c8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _glvmDoWork + 162 (in libGLProgrammability.dylib) [0x92a67f32]
          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]


Process:        Safari [1142]
Path:           /Applications/Safari.app/Contents/MacOS/Safari

  ADDRESS         BINARY
  00001000        /Applications/Safari.app/Contents/MacOS/Safari
  00176000        /System/Library/PrivateFrameworks/SyndicationUI.framework/Versions/A/SyndicationUI
  0019a000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/Contents/MacOS/Inquisitor
  001b0000        /System/Library/Contextual Menu
Items/FolderActionsMenu.plugin/Contents/MacOS/FolderActionsMenu
  00400000        /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera
  004ff000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/Contents/Resources/InquisitorCore.bundle/Contents/MacOS/InquisitorCore
  01b70000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/ATSHI.dylib
  09b83000        /usr/lib/libcurl.3.dylib
  0db54000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
  0e0aa000        /Library/Internet
Plug-Ins/JavaPluginCocoa.bundle/Contents/MacOS/JavaPluginCocoa
  0e0c0000        /System/Library/Frameworks/JavaVM.framework/Versions/A/JavaVM
  0f096000        /System/Library/Contextual Menu
Items/BluetoothContextualMenu.plugin/Contents/MacOS/BluetoothContextualMenu
  0f622000        /System/Library/Frameworks/CoreAudioKit.framework/Versions/A/CoreAudioKit
  0fa94000        /Library/QuickTime/DivX Decoder.component/Contents/MacOS/DivX
Decoder
  0fbc3000        /Library/Internet Plug-Ins/Flash
Player.plugin/Contents/MacOS/Flash Player
  11a01000        /System/Library/CoreServices/Encodings/libTraditionalChineseConverter.dylib
  11ad9000        /System/Library/Contextual Menu
Items/AutomatorCMM.plugin/Contents/MacOS/AutomatorCMM
  12cca000        /System/Library/PrivateFrameworks/BezelServices.framework/Versions/A/BezelServices
  12e5f000        /Library/Internet
Plug-Ins/AdobePDFViewer.plugin/Contents/MacOS/AdobePDFViewer
  14bcd000        /System/Library/TextEncodings/Unicode
Encodings.bundle/Contents/MacOS/Unicode Encodings
  1545e000        /System/Library/PrivateFrameworks/URLMount.framework/URLMount
  154b6000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Frameworks/AdobeSelfHealing.framework/AdobeSelfHealing
  16840000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/Updater.acroplugin/Contents/Frameworks/AdobeUpdater.framework/AdobeUpdater
  16a00000        /System/Library/Frameworks/IOBluetooth.framework/Versions/A/IOBluetooth
  40000000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Frameworks/Acrobat.framework/../AdobeJP2K.framework/Versions/A/AdobeJP2K
  83f8c000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Frameworks/Acrobat.framework/Acrobat
  869f5000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/WebLink.acroplugin/Contents/MacOS/WebLink
  86cab000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/Updater.acroplugin/Contents/MacOS/Updater
  87361000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/Spelling.acroplugin/Contents/MacOS/Spelling
  87567000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/SendMail.acroplugin/Contents/MacOS/SendMail
  875bd000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/Search.acroplugin/Contents/MacOS/Search
  879bd000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/SaveAsRTF.acroplugin/Contents/MacOS/SaveAsRTF
  87aba000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/Reflow.acroplugin/Contents/MacOS/Reflow
  87bd1000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/ReadOutLoud.acroplugin/Contents/MacOS/ReadOutLoud
  87c12000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/PPKLite.acroplugin/Contents/MacOS/PPKLite
  88f4f000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/PDDom.acroplugin/Contents/MacOS/PDDom
  8916e000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/Multimedia.acroplugin/Contents/MacOS/Multimedia
  897a8000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/MakeAccessible.acroplugin/Contents/MacOS/MakeAccessible
  8b128000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/HLS.acroplugin/Contents/MacOS/HLS
  8b140000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/EWH.acroplugin/Contents/MacOS/EWH
  8b1b4000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/EScript.acroplugin/Contents/MacOS/EScript
  8b57a000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/EFS.acroplugin/Contents/MacOS/EFS
  8c18d000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/eBook.acroplugin/Contents/MacOS/eBook
  8c1b0000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/DVA.acroplugin/Contents/MacOS/DVA
  8c224000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/DigSig.acroplugin/Contents/MacOS/DigSig
  8c563000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/Comments.acroplugin/Contents/MacOS/Comments
  8cfe9000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/Checkers.acroplugin/Contents/MacOS/Checkers
  8d28a000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/AcroForm.acroplugin/Contents/MacOS/AcroForm
  8e956000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Plug-ins/Accessibility.acroplugin/Contents/MacOS/Accessibility
  8ea27000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Frameworks/Acrobat.framework/../AdobeCoolType.framework/Versions/A/AdobeCoolType
  8efdd000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Frameworks/Acrobat.framework/../AdobeBIB.framework/Versions/A/AdobeBIB
  8f03c000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Frameworks/Acrobat.framework/../AdobeAGM.framework/Versions/A/AdobeAGM
  8fc37000        /Applications/Adobe Reader 8/Adobe
Reader.app/Contents/Frameworks/Acrobat.framework/../AdobeACE.framework/Versions/A/AdobeACE
  ba900000        /System/Library/CoreServices/Encodings/libJapaneseConverter.dylib

  Thread id:      5289208
  User stack:
    26 ??? [0x2456]
      26 _NSApplicationMain + 574 (in AppKit) [0x9633830a]
        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
          26 ??? [0x997e]
            26 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:]
+ 128 (in AppKit) [0x9637208e]
              26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
                26 _BlockUntilNextEventMatchingListInMode + 106 (in HIToolbox)
[0x952be32d]
                  26 _ReceiveNextEventCommon + 374 (in HIToolbox) [0x952be4b9]
                    26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
[0x952be6a0]
                      26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
[0x9130fd18]
                        26 _mach_msg_trap + 10 (in libSystem.B.dylib)
[0x96b739e6]

  Thread id:      7ea9d60
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __ZN7WebCore12IconDatabase22iconDatabaseSyncThreadEv + 181 (in
WebCore) [0x944373e5]
          26 __ZN7WebCore12IconDatabase18syncThreadMainLoopEv + 239 (in WebCore)
[0x9443bdef]
            26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      72af4f0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]

  Thread id:      59c12e8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __Z22CFURLCacheWorkerThreadPv + 396 (in CFNetwork) [0x9438c6cc]
          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      9bb7000
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 +[NSURLConnection(NSURLConnectionReallyInternal)
_resourceLoadLoop:] + 320 (in Foundation) [0x94c58ac0]
              26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      72ada78
  User stack:
    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      72afc80
  User stack:
    26 ___workq_ops + 10 (in libSystem.B.dylib) [0x96bdd5c6]

  Thread id:      77fd7d8
  User stack:
    26 ??? [0x0]

  Thread id:      9bba4f0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 -[NSUIHeartBeat _heartBeatThread:] + 753 (in AppKit)
[0x963d87f0]
              26 -[NSConditionLock lockWhenCondition:] + 69 (in Foundation)
[0x94c3b275]
                26 -[NSConditionLock lockWhenCondition:beforeDate:] + 144 (in
Foundation) [0x94c3b310]
                  26 -[NSCondition waitUntilDate:] + 236 (in Foundation)
[0x94c3b4fc]
                    26 _semaphore_timedwait_signal_trap + 10 (in
libSystem.B.dylib) [0x96b73a46]

  Thread id:      6b97790
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
          26 _ACEInitialize + 6249 (in AdobeACE) [0x8fc39527]
            26 _ACEInitialize + 6389 (in AdobeACE) [0x8fc395b3]
              26 _MPWaitOnQueue + 208 (in CarbonCore) [0x918d0654]
                26 _TSWaitOnConditionTimedRelative + 202 (in CarbonCore)
[0x918af8fe]
                  26 _TSWaitOnCondition + 126 (in CarbonCore) [0x918d09d7]
                    26 ___semwait_signal + 10 (in libSystem.B.dylib)
[0x96b7abce]

  Thread id:      59c2208
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
          26 ??? [0x8c6708fb]
            26 ??? [0x8c66fd2b]
              26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      9bb7b58
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
          26 __ZN23TSystemNotificationTask26SystemNotificationTaskProcEPv + 123
(in DesktopServicesPriv) [0x957c846f]
            26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
              26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      9bb7790
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
          26 __ZN25TFSEventsNotificationTask28FSEventsNotificationTaskProcEPv +
216 (in DesktopServicesPriv) [0x957c85e8]
            26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
              26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      7eab410
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
          26 __ZN13TNodeSyncTask12SyncTaskProcEPv + 84 (in DesktopServicesPriv)
[0x957d3a7a]
            26 _MPWaitOnQueue + 208 (in CarbonCore) [0x918d0654]
              26 _TSWaitOnConditionTimedRelative + 202 (in CarbonCore)
[0x918af8fe]
                26 _TSWaitOnCondition + 126 (in CarbonCore) [0x918d09d7]
                  26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      77faa78
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]

  Thread id:      7ea8e40
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      9bb73c8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0xff5281c]
          26 _Flash_EnforceLocalSecurity + 124992 (in Flash Player) [0xff89e68]
            26 ??? [0xff52572]
              26 _semaphore_wait_signal_trap + 10 (in libSystem.B.dylib)
[0x96b73a2e]

  Thread id:      550f128
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0xff5281c]
          26 _Flash_EnforceLocalSecurity + 124992 (in Flash Player) [0xff89e68]
            26 ??? [0xff52572]
              26 _semaphore_wait_signal_trap + 10 (in libSystem.B.dylib)
[0x96b73a2e]

  Thread id:      7ea7790
  User stack:
    25 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      25 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        25 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
          25 __ZN15TFolderSizeTask18FolderSizeTaskProcEPv + 104 (in
DesktopServicesPriv) [0x957d59c4]
            25 _MPWaitOnQueue + 208 (in CarbonCore) [0x918d0654]
              25 _TSWaitOnConditionTimedRelative + 246 (in CarbonCore)
[0x918af92a]
                25 _semaphore_timedwait_signal_trap + 10 (in libSystem.B.dylib)
[0x96b73a46]


Process:        Spotlight [120]
Path:           /System/Library/CoreServices/Spotlight.app/Contents/MacOS/Spotlight

  ADDRESS         BINARY
  00001000        /System/Library/CoreServices/Spotlight.app/Contents/MacOS/Spotlight
  00057000        /System/Library/PrivateFrameworks/Calculate.framework/Versions/A/Calculate
  00068000        /System/Library/PrivateFrameworks/URLMount.framework/Versions/A/URLMount
  00097000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/Contents/MacOS/Inquisitor
  000d6000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
  00314000        /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera

  Thread id:      666fc80
  User stack:
    26 ??? [0x2a82]
      26 _NSApplicationMain + 574 (in AppKit) [0x9633830a]
        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
          26 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] +
128 (in AppKit) [0x9637208e]
            26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
              26 _BlockUntilNextEventMatchingListInMode + 106 (in HIToolbox)
[0x952be32d]
                26 _ReceiveNextEventCommon + 374 (in HIToolbox) [0x952be4b9]
                  26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
[0x952be6a0]
                    26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
[0x9130fd18]
                      26 _mach_msg_trap + 10 (in libSystem.B.dylib)
[0x96b739e6]

  Thread id:      52882e8
  User stack:
    26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]


Process:        SystemUIServer [129]
Path:           /System/Library/CoreServices/SystemUIServer.app/Contents/MacOS/SystemUIServer

  ADDRESS         BINARY
  00001000        /System/Library/CoreServices/SystemUIServer.app/Contents/MacOS/SystemUIServer
  00069000        /System/Library/PrivateFrameworks/SystemUIPlugin.framework/Versions/A/SystemUIPlugin
  00077000        /System/Library/PrivateFrameworks/NetworkConfig.framework/Versions/A/NetworkConfig
  000cb000        /System/Library/PrivateFrameworks/ICANotifications.framework/Versions/A/ICANotifications
  000f5000        /System/Library/PrivateFrameworks/iPod.framework/Versions/A/iPod
  00100000        /System/Library/PrivateFrameworks/BezelServices.framework/Versions/A/BezelServices
  0010a000        /System/Library/Frameworks/DiscRecording.framework/Versions/A/DiscRecording
  0023e000        /System/Library/PrivateFrameworks/DiskImages.framework/Versions/A/DiskImages
  0039c000        /System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Apple80211
  003d4000        /System/Library/Frameworks/AppleTalk.framework/Versions/A/AppleTalk
  003e5000        /System/Library/PrivateFrameworks/MediaKit.framework/Versions/A/MediaKit
  0042c000        /usr/lib/libcurl.4.dylib
  00477000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/Contents/MacOS/Inquisitor
  004d9000        /Applications/iCal.app/Contents/Resources/iCalDockExtra.bundle/Contents/MacOS/iCalDockExtra
  004e7000        /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn
  004f0000        /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn
  00700000        /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera
  0b1a2000        /System/Library/CoreServices/Menu
Extras/AirPort.menu/Contents/MacOS/AirPort
  0b1d1000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
  0b218000        /System/Library/CoreServices/Menu
Extras/TimeMachine.menu/Contents/MacOS/TimeMachine
  0b263000        /System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Resources/ClientController.bundle/Contents/MacOS/ClientController
  0b284000        /System/Library/PrivateFrameworks/EAP8021X.framework/Versions/A/EAP8021X
  0d463000        /System/Library/Extensions/IOFireWireFamily.kext/Contents/PlugIns/IOFireWireLib.plugin/Contents/MacOS/IOFireWireLib
  0d99d000        /System/Library/PrivateFrameworks/InternetConnect.framework/Versions/A/InternetConnect

  Thread id:      5a93b58
  User stack:
    26 ??? [0x52c6]
      26 ??? [0x57c4]
        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
          26 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] +
128 (in AppKit) [0x9637208e]
            26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
              26 _BlockUntilNextEventMatchingListInMode + 106 (in HIToolbox)
[0x952be32d]
                26 _ReceiveNextEventCommon + 374 (in HIToolbox) [0x952be4b9]
                  26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
[0x952be6a0]
                    26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
[0x9130fd18]
                      26 _mach_msg_trap + 10 (in libSystem.B.dylib)
[0x96b739e6]

  Thread id:      666f128
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __StaticProcessIOObjectsArray + 95 (in ICANotifications) [0xd3eaa]
          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      666ed60
  User stack:
    26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]

  Thread id:      666e208
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 ??? [0x25e43]
              26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      666c000
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __ZN9CAPThread5EntryEPS_ + 96 (in CoreAudio) [0x91d99300]
          26 __ZN10HALRunLoop9OwnThreadEPv + 160 (in CoreAudio) [0x91d99464]
            26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
              26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      528b7d8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _fe_fragment_thread + 54 (in QuartzCore) [0x95fe1121]
          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      6b9ac80
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]

  Thread id:      c79a7d8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 -[NSUIHeartBeat _heartBeatThread:] + 753 (in AppKit)
[0x963d87f0]
              26 -[NSConditionLock lockWhenCondition:] + 69 (in Foundation)
[0x94c3b275]
                26 -[NSConditionLock lockWhenCondition:beforeDate:] + 144 (in
Foundation) [0x94c3b310]
                  26 -[NSCondition waitUntilDate:] + 236 (in Foundation)
[0x94c3b4fc]
                    26 _semaphore_timedwait_signal_trap + 10 (in
libSystem.B.dylib) [0x96b73a46]


Process:        UserEventAgent [121]
Path:           /usr/sbin/UserEventAgent

  ADDRESS         BINARY
  00001000        /usr/sbin/UserEventAgent
  00014000        /System/Library/UserEventPlugins/AirPortUserAgent.plugin/Contents/MacOS/AirPortUserAgent
  0001d000        /System/Library/UserEventPlugins/alfUIplugin.plugin/Contents/MacOS/alfUIplugin
  00022000        /System/Library/UserEventPlugins/AppleHIDMouseAgent.plugin/Contents/MacOS/AppleHIDMouseAgent
  00038000        /System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Apple80211
  00070000        /System/Library/UserEventPlugins/BluetoothUserAgent-Plugin.plugin/Contents/MacOS/BluetoothUserAgent-Plugin
  0007a000        /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn
  00083000        /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn
  0008e000        /System/Library/UserEventPlugins/BTMMPortInUseAgent.plugin/Contents/MacOS/BTMMPortInUseAgent
  00095000        /System/Library/UserEventPlugins/iCalAlarmAgent.plugin/Contents/MacOS/iCalAlarmAgent
  000a0000        /System/Library/UserEventPlugins/ParentalControlsUEAPlugin.plugin/Contents/MacOS/ParentalControlsUEAPlugin
  000aa000        /System/Library/UserEventPlugins/SCMonitor.plugin/Contents/MacOS/SCMonitor

  Thread id:      666f8b8
  User stack:
    26 ??? [0x1afa]
      26 ??? [0x29d7]
        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5a93000
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __ZN9CAPThread5EntryEPS_ + 96 (in CoreAudio) [0x91d99300]
          26 __ZN10HALRunLoop9OwnThreadEPv + 160 (in CoreAudio) [0x91d99464]
            26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
              26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]


Process:        WindowServer [93]
Path:           /System/Library/Frameworks/ApplicationServices.framework/Frameworks/CoreGraphics.framework/Resources/WindowServer

  ADDRESS         BINARY
  00001000        /System/Library/Frameworks/ApplicationServices.framework/Frameworks/CoreGraphics.framework/Resources/WindowServer
  00019000        /System/Library/Extensions/GeForceGA.plugin/Contents/MacOS/GeForceGA
  00400000        /System/Library/Frameworks/OpenGL.framework/Resources/GLEngine.bundle/GLEngine
  0a000000        /System/Library/Extensions/GeForce8xxxGLDriver.bundle/Contents/MacOS/GeForce8xxxGLDriver
  0bc35000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib

  Thread id:      59c0f20
  User stack:
    26 start + 54 (in WindowServer) [0x1fbe]
      26 _main + 24 (in WindowServer) [0x1ff4]
        26 _CGXGetRootAdminCredentials + 0 (in CoreGraphics) [0x93b7d0e9]
          26 _CGXServerLoop + 161 (in CoreGraphics) [0x93bedc9a]
            26 _CGXRunOneServicesPass + 377 (in CoreGraphics) [0x93be2d33]
              25 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
              1 _mach_msg_overwrite_trap + 10 (in libSystem.B.dylib)
[0x96b739f2]

  Thread id:      4886208
  User stack:
    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5a96128
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _eventThread + 499 (in CoreGraphics) [0x93bd07d9]
          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      59c3c80
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _glvmDoWork + 162 (in libGLProgrammability.dylib) [0x92a67f32]
          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      550e208
  User stack:
    26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]


Process:        autofsd [38]
Path:           /usr/libexec/autofsd

  ADDRESS         BINARY
  00001000        /usr/libexec/autofsd

  Thread id:      5197e40
  User stack:
    26 ??? [0x1752]
      26 ??? [0x1d8b]
        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]


Process:        blued [89]
Path:           /usr/sbin/blued

  ADDRESS         BINARY
  00001000        /usr/sbin/blued
  00039000        /System/Library/PrivateFrameworks/BezelServices.framework/Versions/A/BezelServices
  0004d000        /System/Library/Extensions/IOHIDFamily.kext/Contents/PlugIns/IOHIDLib.plugin/Contents/MacOS/IOHIDLib
  000ba000        /System/Library/Frameworks/IOBluetooth.framework/Versions/A/IOBluetooth

  Thread id:      59c1e40
  User stack:
    26 ??? [0x2cf6]
      26 ??? [0x1ffe6]
        26 -[NSRunLoop(NSRunLoop) run] + 84 (in Foundation) [0x94c35c34]
          26 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 213 (in Foundation)
[0x94c29b15]
            26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
              26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]


Process:        configd [35]
Path:           /usr/sbin/configd

  ADDRESS         BINARY
  00001000        /usr/sbin/configd
  0003e000        /System/Library/SystemConfiguration/PrinterNotifications.bundle/Contents/MacOS/PrinterNotifications
  00043000        /System/Library/SystemConfiguration/PowerManagement.bundle/Contents/MacOS/PowerManagement
  00052000        /System/Library/SystemConfiguration/DynamicPowerStep.bundle/Contents/MacOS/DynamicPowerStep
  00057000        /System/Library/SystemConfiguration/Bluetooth.bundle/Contents/MacOS/Bluetooth
  0005d000        /System/Library/SystemConfiguration/BatteryUpdater.bundle/Contents/MacOS/BatteryUpdater
  00062000        /System/Library/SystemConfiguration/Apple80211Monitor.bundle/Contents/MacOS/Apple80211Monitor
  0007a000        /System/Library/SystemConfiguration/EAPOLController.bundle/EAPOLController
  00083000        /System/Library/SystemConfiguration/IP6Configuration.bundle/Contents/MacOS/IP6Configuration
  00095000        /System/Library/SystemConfiguration/IPConfiguration.bundle/Contents/MacOS/IPConfiguration
  000c1000        /System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Apple80211
  00200000        /System/Library/SystemConfiguration/PPPController.bundle/Contents/MacOS/PPPController

  Thread id:      5198998
  User stack:
    26 start + 54 (in configd) [0x22a6]
      26 _main + 2394 (in configd) [0x2cd7]
        26 _server_loop + 70 (in configd) [0x3a82]
          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5196000
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _plugin_exec + 1562 (in configd) [0x4d61]
          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5287f20
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]


Process:        coreaudiod [107]
Path:           /usr/sbin/coreaudiod

  ADDRESS         BINARY
  00001000        /usr/sbin/coreaudiod
  0002e000        /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn
  00037000        /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn
  00200000        /Library/QuickTime/DivX Decoder.component/Contents/MacOS/DivX
Decoder
  70000000        /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio

  Thread id:      5a95998
  User stack:
    26 ??? [0x1e22]
      26 ??? [0xaecb]
        26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      4b1e2e8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __ZN9CAPThread5EntryEPS_ + 96 (in CoreAudio) [0x91d99300]
          26 __ZN10HALRunLoop9OwnThreadEPv + 160 (in CoreAudio) [0x91d99464]
            26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
              26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]


Process:        coreservicesd [44]
Path:           /System/Library/CoreServices/coreservicesd

  ADDRESS         BINARY
  00001000        /System/Library/CoreServices/coreservicesd

  Thread id:      5288e40
  User stack:
    26 ??? [0x1f6e]
      26 __CoreServicesServerMain + 795 (in CarbonCore) [0x918ea29f]
        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      550fc80
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _fmodWatchConsumer + 407 (in CarbonCore) [0x918f00bf]
          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      59c0000
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 ___read + 10 (in libSystem.B.dylib) [0x96b9771a]
  Kernel stack:
    26 _deflate_copyright + 8631 [0x3dbe77]
      26 __ZN9IOService21unregisterAllInterestEv + 9 [0x389fd9]
        26 __ZN9IOService14messageClientsEmPvj + 3 [0x389d99]
          26 _cd9660_fhtovp + 41 [0x1fe3db]
            26 _IOHibernateSystemInit + 470 [0x37ec0a]
              26 _IOHibernateSystemWake + 138 [0x37e922]
                26 _stack_collect + 142 [0x1369e5]
                  26 _stack_free + 28 [0x136778]

  Thread id:      5a97048
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]


Process:        cron [15]
Path:           /usr/sbin/cron

  ADDRESS         BINARY
  00001000        /usr/sbin/cron
  0000c000        /usr/lib/libutil.dylib

  Thread id:      4b1ee40
  User stack:
    26 ??? [0x1d12]
      26 ??? [0x224d]
        26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]


Process:        cupsd [14]
Path:           /usr/sbin/cupsd

  ADDRESS         BINARY
  00001000        /usr/sbin/cupsd
  0005d000        /usr/lib/libpam.1.dylib
  00300000        /usr/lib/libPrintServiceQuota.dylib

  Thread id:      4b1f208
  User stack:
    26 start + 54 (in cupsd) [0x234a]
      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]

  Thread id:      550de40
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _cupsdUpdateSystemMonitor + 2174 (in cupsd) [0x41af7]
          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]


Process:        diskarbitrationd [32]
Path:           /usr/sbin/diskarbitrationd

  ADDRESS         BINARY
  00001000        /usr/sbin/diskarbitrationd

  Thread id:      51994f0
  User stack:
    26 ??? [0x1a5a]
      26 ??? [0x8a7a]
        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]


Process:        distnoted [41]
Path:           /usr/sbin/distnoted

  ADDRESS         BINARY
  00001000        /usr/sbin/distnoted

  Thread id:      4b296b0
  User stack:
    26 ??? [0x1ef6]
      26 ??? [0x1f95]
        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]


Process:        dynamic_pager [30]
Path:           /sbin/dynamic_pager

  ADDRESS         BINARY

  Thread id:      5199c80
  User stack:
    26 ??? [0x178a]
      26 ??? [0x2a11]
        26 ??? [0x2224]
          26 ??? [0x1efd]
            26 ??? [0x96b739e6]


Process:        fseventsd [28]
Path:           /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/Support/fseventsd

  ADDRESS         BINARY
  00001000        /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/Support/fseventsd

  Thread id:      519a410
  User stack:
    26 ??? [0x25a2]
      26 ??? [0x2fcc]
        26 _mach_msg_overwrite_trap + 10 (in libSystem.B.dylib) [0x96b739f2]
  Kernel stack:
    26 _cpuid_features + 84 [0x19714c]
      26 _mach_port_extract_right + 67 [0x126e12]
        26 _ipc_port_dngrow + 318 [0x120e9a]
          26 _stack_collect + 142 [0x1369e5]
            26 _stack_free + 28 [0x136778]

  Thread id:      5196f20
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0xbbd9]
          26 ??? [0xb92d]
            26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      528ac80
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0x44d6]
          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      528a8b8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 ___read + 10 (in libSystem.B.dylib) [0x96b9771a]
  Kernel stack:
    26 _deflate_copyright + 8631 [0x3dbe77]
      26 __ZN9IOService21unregisterAllInterestEv + 9 [0x389fd9]
        26 __ZN9IOService14messageClientsEmPvj + 3 [0x389d99]
          26 _cd9660_fhtovp + 41 [0x1fe3db]
            26 _IOHibernateSystemInit + 470 [0x37ec0a]
              26 _IOHibernateSystemWake + 138 [0x37e922]
                26 _stack_collect + 142 [0x1369e5]
                  26 _stack_free + 28 [0x136778]

  Thread id:      528a4f0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0x9834]
          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      5289d60
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]

  Thread id:      5198208
  User stack:
    26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      52895d0
  User stack:
    26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      59c4048
  User stack:
    26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      666d6b0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0x9834]
          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      9bb8a78
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0x9834]
          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      5c4a4f0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0x9834]
          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]


Process:        hidd [27]
Path:           /usr/libexec/hidd

  ADDRESS         BINARY
  00001000        /usr/libexec/hidd

  Thread id:      519a7d8
  User stack:
    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5a964f0
  User stack:
    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]


Process:        iTunes [1796]
Path:           /Applications/iTunes.app/Contents/MacOS/iTunes

  ADDRESS         BINARY
  00001000        /Applications/iTunes.app/Contents/MacOS/iTunes
  00fdd000        /System/Library/PrivateFrameworks/iPod.framework/Versions/A/iPod
  00fe8000        /System/Library/PrivateFrameworks/iPodSync.framework/Versions/A/iPodSync
  00ff8000        /Applications/iTunes.app/Contents/MacOS/../Frameworks/iPodUpdater.framework/Versions/A/iPodUpdater
  010dc000        /System/Library/Frameworks/DiscRecording.framework/Versions/A/DiscRecording
  01210000        /System/Library/PrivateFrameworks/vmutils.framework/Versions/A/vmutils
  0a000000        /Library/QuickTime/DivX Decoder.component/Contents/MacOS/DivX
Decoder
  0bffc000        /Library/QuickTime/Flip4Mac WMV
Import.component/Contents/MacOS/Flip4Mac WMV Import
  0c274000        /Library/QuickTime/Flip4Mac WMV
Advanced.component/Contents/MacOS/Flip4Mac WMV Advanced
  0c47a000        /System/Library/QuickTime/QuickTimeFireWireDV.component/Contents/MacOS/QuickTimeFireWireDV
  0c4c0000        /Library/QuickTime/AppleIntermediateCodec.component/Contents/MacOS/AppleIntermediateCodec
  0c4de000        /System/Library/QuickTime/ApplePixletVideo.component/Contents/MacOS/ApplePixletVideo
  0cc06000        /System/Library/TextEncodings/Unicode
Encodings.bundle/Contents/MacOS/Unicode Encodings
  0de14000        /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn
  0de1d000        /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn
  0e04c000        /Library/iTunes/iTunes Plug-ins/Quartz Composer
Visualizer.bundle/Contents/MacOS/Quartz Composer Visualizer
  0eca5000        /System/Library/Components/AudioCodecs.component/Contents/MacOS/AudioCodecs
  0fef0000        /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera
  104ef000        /System/Library/Components/PDFImporter.component/Contents/MacOS/PDFImporter
  3c390000        /System/Library/PrivateFrameworks/MobileDevice.framework/MobileDevice
  70000000        /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio

  Thread id:      aa528b8
  User stack:
    26 ??? [0x2269]
      26 ??? [0x2342]
        26 ??? [0x269eba]
          26 ??? [0x396ff]
            26 ??? [0x26aafc]
              26 ??? [0x26a44a]
                26 ??? [0x1c8262]
                  26 _WaitNextEvent + 54 (in HIToolbox) [0x95371ef5]
                    26 _WNEInternal + 151 (in HIToolbox) [0x95371f96]
                      26 _GetNextEventMatchingMask + 447 (in HIToolbox)
[0x9537228f]
                        26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
[0x952be6a0]
                          26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
[0x9130fd18]
                            26 _mach_msg_trap + 10 (in libSystem.B.dylib)
[0x96b739e6]

  Thread id:      aa515d0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __ZN9CAPThread5EntryEPS_ + 96 (in CoreAudio) [0x91d99300]
          26 __ZN10HALRunLoop9OwnThreadEPv + 160 (in CoreAudio) [0x91d99464]
            26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
              26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      aa53048
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0x33df9d]
          26 ??? [0x251742]
            26 _semaphore_wait_signal_trap + 10 (in libSystem.B.dylib)
[0x96b73a2e]

  Thread id:      aa506b0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]

  Thread id:      aa4f000
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0x2d9df4]
          26 ??? [0x2d9d8b]
            26 _accept$NOCANCEL$UNIX2003 + 10 (in libSystem.B.dylib)
[0x96bd3036]
  Kernel stack:
    26 _deflate_copyright + 8631 [0x3dbe77]
      26 __ZN16IORangeAllocator8allocateEmPmm + 118 [0x3a8f18]
        26 _IOHibernateSystemInit + 294 [0x37eb5a]
          26 _IOHibernateSystemSleep + 1493 [0x37e7a9]
            26 _pmsSetStep + 313 [0x130a08]
              26 _stack_collect + 142 [0x1369e5]
                26 _stack_free + 28 [0x136778]

  Thread id:      aa52c80
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0x2372ee]
          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5c4ac80
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __Z11CMMConvTaskPv + 54 (in ColorSync) [0x95dd1d92]
          26 __Z20pthreadSemaphoreWaitP18t_pthreadSemaphore + 42 (in ColorSync)
[0x95dbf460]
            26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]


Process:        kextd [10]
Path:           /usr/libexec/kextd

  ADDRESS         BINARY
  00001000        /usr/libexec/kextd

  Thread id:      4b204f0
  User stack:
    26 ??? [0x1c2a]
      26 ??? [0x3647]
        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      51985d0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0x3ced]
          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
  Kernel stack:
    26 _cpuid_features + 84 [0x19714c]
      26 _mach_port_allocate_full + 78 [0x126247]
        26 _thread_swap_exception_ports + 426 [0x12d165]
          26 _lock_set_server_routine + 1626 [0x147b74]
            26 _serial_keyboard_init + 11 [0x18f310]
              26 _kernel_bootstrap + 64 [0x136ed8]
                26 _stack_free + 28 [0x136778]


Process:        launchd [113]
Path:           /sbin/launchd

  ADDRESS         BINARY
  00001000        /sbin/launchd

  Thread id:      5a94a78
  User stack:
    26 start + 54 (in launchd) [0x1a7a]
      26 _main + 960 (in launchd) [0x24bf]
        26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
  Kernel stack:
    26 _cpuid_features + 84 [0x19714c]
      26 _mach_port_extract_right + 67 [0x126e12]
        26 _ipc_port_dngrow + 318 [0x120e9a]
          26 _stack_collect + 142 [0x1369e5]
            26 _stack_free + 28 [0x136778]

  Thread id:      6670ba0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]

  Thread id:      5a933c8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]


Process:        launchd [1]
Path:           /sbin/launchd

  ADDRESS         BINARY
  00001000        /sbin/launchd

  Thread id:      4b1fd60
  User stack:
    26 start + 54 (in launchd) [0x1a7a]
      26 _main + 960 (in launchd) [0x24bf]
        26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
  Kernel stack:
    26 _cpuid_features + 84 [0x19714c]
      26 _mach_port_extract_right + 67 [0x126e12]
        26 _ipc_port_dngrow + 318 [0x120e9a]
          26 _stack_collect + 142 [0x1369e5]
            26 _stack_free + 28 [0x136778]

  Thread id:      4b1f5d0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]

  Thread id:      48874f0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]


Process:        loginwindow [24]
Path:           /System/Library/CoreServices/loginwindow.app/Contents/MacOS/loginwindow

  ADDRESS         BINARY
  00001000        /System/Library/CoreServices/loginwindow.app/Contents/MacOS/loginwindow
  00074000        /System/Library/PrivateFrameworks/Admin.framework/Versions/A/Admin
  000be000        /System/Library/PrivateFrameworks/URLMount.framework/Versions/A/URLMount
  000ec000        /System/Library/LoginPlugins/FSDisconnect.loginPlugin/Contents/MacOS/FSDisconnect
  0015e000        /System/Library/PrivateFrameworks/DiskImages.framework/Versions/A/DiskImages
  002bc000        /System/Library/PrivateFrameworks/MediaKit.framework/Versions/A/MediaKit
  00303000        /System/Library/Frameworks/DiscRecording.framework/Versions/A/DiscRecording
  00437000        /usr/lib/libcurl.4.dylib
  0046c000        /System/Library/LoginPlugins/DisplayServices.loginPlugin/Contents/MacOS/DisplayServices
  0048a000        /System/Library/LoginPlugins/BezelServices.loginPlugin/Contents/MacOS/BezelServices
  004b7000        /System/Library/PrivateFrameworks/MachineSettings.framework/Versions/A/MachineSettings
  004bf000        /System/Library/Extensions/IOHIDFamily.kext/Contents/PlugIns/IOHIDLib.plugin/Contents/MacOS/IOHIDLib
  004dd000        /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn
  004e6000        /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn
  007af000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/ATSHI.dylib
  099df000        /Library/QuickTime/DivX Decoder.component/Contents/MacOS/DivX
Decoder
  0df7c000        /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera
  70000000        /System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio
  ba500000        /System/Library/CoreServices/Encodings/libGreekConverter.dylib

  Thread id:      4b283c8
  User stack:
    26 ??? [0x5cbe]
      26 ??? [0x1bc74]
        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
          26 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] +
128 (in AppKit) [0x9637208e]
            26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
              26 _BlockUntilNextEventMatchingListInMode + 106 (in HIToolbox)
[0x952be32d]
                26 _ReceiveNextEventCommon + 374 (in HIToolbox) [0x952be4b9]
                  26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
[0x952be6a0]
                    26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
[0x9130fd18]
                      26 _mach_msg_trap + 10 (in libSystem.B.dylib)
[0x96b739e6]

  Thread id:      5a94e40
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 __ZN9CAPThread5EntryEPS_ + 96 (in CoreAudio) [0x91d99300]
          26 __ZN10HALRunLoop9OwnThreadEPv + 160 (in CoreAudio) [0x91d99464]
            26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
              26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5a93f20
  User stack:
    26 _mach_msg_overwrite_trap + 10 (in libSystem.B.dylib) [0x96b739f2]

  Thread id:      6b98a78
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 -[NSUIHeartBeat _heartBeatThread:] + 753 (in AppKit)
[0x963d87f0]
              26 -[NSConditionLock lockWhenCondition:] + 69 (in Foundation)
[0x94c3b275]
                26 -[NSConditionLock lockWhenCondition:beforeDate:] + 144 (in
Foundation) [0x94c3b310]
                  26 -[NSCondition waitUntilDate:] + 236 (in Foundation)
[0x94c3b4fc]
                    26 _semaphore_timedwait_signal_trap + 10 (in
libSystem.B.dylib) [0x96b73a46]


Process:        mDNSResponder [23]
Path:           /usr/sbin/mDNSResponder

  ADDRESS         BINARY
  00001000        /usr/sbin/mDNSResponder

  Thread id:      4b28790
  User stack:
    26 start + 41 (in mDNSResponder) [0x1b69]
      26 __start + 210 (in mDNSResponder) [0x1c3c]
        26 _main + 2584 (in mDNSResponder) [0x34e91]
          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      550e5d0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]


Process:        mds [22]
Path:           /System/Library/Frameworks/CoreServices.framework/Frameworks/Metadata.framework/Support/mds

  ADDRESS         BINARY
  00001000        /System/Library/Frameworks/CoreServices.framework/Frameworks/Metadata.framework/Support/mds
  000d6000        /System/Library/PrivateFrameworks/MDSChannel.framework/Versions/A/MDSChannel
  00149000        /System/Library/PrivateFrameworks/SpotlightIndex.framework/Versions/A/SpotlightIndex
  04290000        /usr/lib/liblangid.dylib
  05151000        /usr/lib/libmecab.1.0.0.dylib
  05550000        /usr/lib/libgermantok.dylib

  Thread id:      4b28b58
  User stack:
    26 ??? [0x5af6]
      26 ??? [0xe048]
        26 ??? [0x57de1]
          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      550c790
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 ??? [0x57baf]
              26 ??? [0xcfa2]
                26 ??? [0x57de1]
                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      550cf20
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 ??? [0x57baf]
              26 ??? [0xcfc5]
                26 ??? [0x57de1]
                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      550d2e8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 ??? [0x57baf]
              26 ??? [0xcfe8]
                26 ??? [0x57de1]
                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      550d6b0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 ??? [0x57baf]
              26 ??? [0xd00b]
                26 ??? [0x57de1]
                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      59c3128
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 ??? [0x57baf]
              26 ??? [0xd02e]
                26 ??? [0x57de1]
                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      550da78
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        23 ??? [0x9d8e]
          23 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
        2 ??? [0x9cf1]
          2 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
        1 ??? [0x9e0f]
          1 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      59c16b0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 ___read + 10 (in libSystem.B.dylib) [0x96b9771a]
  Kernel stack:
    26 _deflate_copyright + 8631 [0x3dbe77]
      26 __ZN9IOService21unregisterAllInterestEv + 9 [0x389fd9]
        26 __ZN9IOService14messageClientsEmPvj + 3 [0x389d99]
          26 _cd9660_fhtovp + 41 [0x1fe3db]
            26 _IOHibernateSystemInit + 470 [0x37ec0a]
              26 _IOHibernateSystemWake + 138 [0x37e922]
                26 _stack_collect + 142 [0x1369e5]
                  26 _stack_free + 28 [0x136778]

  Thread id:      528bba0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]

  Thread id:      59c0790
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 ??? [0x57baf]
              26 ??? [0x865ee]
                26 ??? [0x57de1]
                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      59c4410
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 ??? [0x57baf]
              26 ??? [0x53a34]
                26 ??? [0x57de1]
                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      550ed60
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 ??? [0x57baf]
              26 ??? [0x53a34]
                26 ??? [0x57de1]
                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5a977d8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 ??? [0x57baf]
              26 ??? [0x53a34]
                26 ??? [0x57de1]
                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5a97410
  User stack:
    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5a95d60
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
            26 ??? [0x57baf]
              26 ??? [0x440cf]
                26 ??? [0x57de1]
                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
                    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      7eab048
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _setattr_runLoop + 68 (in SpotlightIndex) [0x17634e]
          26 _runLoop + 77 (in SpotlightIndex) [0x176262]
            26 _si_scheduler_run_waiting_timeout + 163 (in SpotlightIndex)
[0x189954]
              26 _semaphore_timedwait_signal_trap + 10 (in libSystem.B.dylib)
[0x96b73a46]

  Thread id:      aa4ff20
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _flush_runLoop + 65 (in SpotlightIndex) [0x17646f]
          26 _runLoop + 77 (in SpotlightIndex) [0x176262]
            26 _si_scheduler_run_waiting_timeout + 163 (in SpotlightIndex)
[0x189954]
              26 _semaphore_timedwait_signal_trap + 10 (in libSystem.B.dylib)
[0x96b73a46]


Process:        mdworker [2246]
Path:           /System/Library/Frameworks/CoreServices.framework/Frameworks/Metadata.framework/Versions/A/Support/mdworker

  ADDRESS         BINARY
  00001000        /System/Library/Frameworks/CoreServices.framework/Frameworks/Metadata.framework/Versions/A/Support/mdworker
  00050000        /System/Library/Spotlight/Mail.mdimporter/Contents/MacOS/Mail
  00057000        /System/Library/Frameworks/ExceptionHandling.framework/Versions/A/ExceptionHandling
  00060000        /System/Library/Frameworks/LatentSemanticMapping.framework/Versions/A/LatentSemanticMapping
  00099000        /System/Library/Spotlight/Bookmarks.mdimporter/Contents/MacOS/Bookmarks
  0009f000        /System/Library/Spotlight/Application.mdimporter/Contents/MacOS/Application
  000b3000        /System/Library/Spotlight/RichText.mdimporter/Contents/MacOS/RichText
  019c3000        /System/Library/Frameworks/Message.framework/Versions/B/Message
  ba300000        /System/Library/CoreServices/Encodings/libCyrillicConverter.dylib
  ba500000        /System/Library/CoreServices/Encodings/libGreekConverter.dylib

  Thread id:      72b0ba0
  User stack:
    26 ??? [0x27ea]
      26 ??? [0x8b8b]
        26 ??? [0xbd76]
          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      9bb9208
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0xa625]
          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      9bba128
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]

  Thread id:      550e998
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]


Process:        mdworker [2406]
Path:           /System/Library/Frameworks/CoreServices.framework/Frameworks/Metadata.framework/Versions/A/Support/mdworker

  ADDRESS         BINARY
  00001000        /System/Library/Frameworks/CoreServices.framework/Frameworks/Metadata.framework/Versions/A/Support/mdworker

  Thread id:      aa50a78
  User stack:
    26 ??? [0x27ea]
      26 ??? [0x8b8b]
        26 ??? [0xbd76]
          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5c4bba0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0xa625]
          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      9bbb410
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
          26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]


Process:        nmbd [2288]
Path:           /usr/sbin/nmbd

  ADDRESS         BINARY
  00001000        /usr/sbin/nmbd
  000fe000        /System/Library/PrivateFrameworks/ByteRangeLocking.framework/Versions/A/ByteRangeLocking

  Thread id:      528b048
  User stack:
    26 start + 54 (in nmbd) [0x274a]
      26 _main + 2581 (in nmbd) [0x422e]
        26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]


Process:        notifyd [11]
Path:           /usr/sbin/notifyd

  ADDRESS         BINARY

  Thread id:      4b1df20
  User stack:
    26 ??? [0x1fc6]
      26 ??? [0x96ba44c6]

  Thread id:      4b1e6b0
  User stack:
    26 ??? [0x96ba4b12]
      26 ??? [0x96ba4c55]
        26 ??? [0x96b739e6]


Process:        ntpd [13]
Path:           /usr/sbin/ntpd

  ADDRESS         BINARY
  00001000        /usr/sbin/ntpd

  Thread id:      4b2a5d0
  User stack:
    26 ??? [0x203a]
      26 ___sigsuspend + 10 (in libSystem.B.dylib) [0x96bcf89a]


Process:        pboard [123]
Path:           /usr/sbin/pboard

  ADDRESS         BINARY
  00001000        /usr/sbin/pboard

  Thread id:      6670410
  User stack:
    26 ___sigsuspend + 10 (in libSystem.B.dylib) [0x96bcf89a]


Process:        securityd [20]
Path:           /usr/sbin/securityd

  ADDRESS         BINARY
  00001000        /usr/sbin/securityd
  000ba000        /System/Library/Frameworks/PCSC.framework/Versions/A/PCSC

  Thread id:      4b292e8
  User stack:
    26 ??? [0x11b4e]
      26 ??? [0x239c]
        26 ??? [0x3970]
          26 _mach_msg_overwrite_trap + 10 (in libSystem.B.dylib) [0x96b739f2]

  Thread id:      72acf20
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 ??? [0xa3fc]
          26 ??? [0xa44e]
            26 _mach_msg_overwrite_trap + 10 (in libSystem.B.dylib)
[0x96b739f2]


Process:        socketfilterfw [39]
Path:           /usr/libexec/ApplicationFirewall/socketfilterfw

  ADDRESS         BINARY
  00001000        /usr/libexec/ApplicationFirewall/socketfilterfw

  Thread id:      5197a78
  User stack:
    26 ??? [0x20f2]
      26 ??? [0x77ae]
        26 ??? [0x591a]
          26 ??? [0x721d]
            26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
              26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5198d60
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]

  Thread id:      52886b0
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]


Process:        syslogd [18]
Path:           /usr/sbin/syslogd

  ADDRESS         BINARY
  00001000        /usr/sbin/syslogd

  Thread id:      4b29a78
  User stack:
    26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]

  Thread id:      5196b58
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      5196790
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _db_worker + 144 (in syslogd) [0x65d3]
          26 _db_dequeue + 56 (in syslogd) [0x64e3]
            26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]

  Thread id:      51963c8
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
        26 _launchd_drain + 73 (in syslogd) [0x5617]
          26 __vprocmgr_log_drain + 75 (in libSystem.B.dylib) [0x96c96606]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]


Process:        update [16]
Path:           /usr/sbin/update

  ADDRESS         BINARY
  00001000        /usr/sbin/update

  Thread id:      4b2a208
  User stack:
    26 ??? [0x1f3a]
      26 ??? [0x1fd9]
        26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]


Process:        usbmuxd [1803]
Path:           /System/Library/PrivateFrameworks/MobileDevice.framework/Versions/A/Resources/usbmuxd

  ADDRESS         BINARY
  00001000        /System/Library/PrivateFrameworks/MobileDevice.framework/Versions/A/Resources/usbmuxd

  Thread id:      72b0048
  User stack:
    26 ??? [0x2435]
      26 ??? [0x250e]
        26 ??? [0x2acb]
          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]

  Thread id:      aa51998
  User stack:
    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]


Process:        vi [2377]
Path:           /usr/bin/vi

  ADDRESS         BINARY
  00001000        /usr/bin/vi

  Thread id:      72b0410
  User stack:
    26 ??? [0x2302]
      26 ??? [0x6dc6b]
        26 ??? [0x6b9ce]
          26 ??? [0x96a3d]
            26 ??? [0x63edd]
              26 ??? [0x63ae7]
                26 ??? [0x638f7]
                  26 ??? [0x609b7]
                    26 ??? [0xfa559]
                      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib)
[0x96bc3b3a]


Process:        kernel_task [0]
Path:           kernel_task

  ADDRESS         BINARY

  Thread id:      516120

  Thread id:      4888ba0

  Thread id:      48887d8

  Thread id:      4888410

  Thread id:      4888048

  Thread id:      4887c80

  Thread id:      48878b8

  Thread id:      4887128

  Thread id:      48856b0
  Kernel stack:
    26 com.apple.driver.AppleIntelCPUPowerManagement (9.33.0) + 28059
[0x2f20cd9b]
      26 _stack_collect + 142 [0x1369e5]
        26 _stack_free + 28 [0x136778]

  Thread id:      48852e8

  Thread id:      4884f20
  Kernel stack:
    26 _advisory_read + 1216 [0x1c6eb9]
      26 _IOHibernateSystemInit + 294 [0x37eb5a]
        26 _IOHibernateSystemSleep + 1493 [0x37e7a9]
          26 _pmsSetStep + 313 [0x130a08]
            26 _stack_collect + 142 [0x1369e5]
              26 _stack_free + 28 [0x136778]

  Thread id:      4884b58

  Thread id:      4884790

  Thread id:      4885e40

  Thread id:      4b2cba0

  Thread id:      4b21048

  Thread id:      4b1d000

  Thread id:      4b1db58

  Thread id:      48865d0

  Thread id:      4b2c410

  Thread id:      4b20128
  Kernel stack:
    26 _rt_newmaddrmsg + 707 [0x21471a]
      26 _IOHibernateSystemInit + 294 [0x37eb5a]
        26 _IOHibernateSystemSleep + 1493 [0x37e7a9]
          26 _pmsSetStep + 313 [0x130a08]
            26 _stack_collect + 142 [0x1369e5]
              26 _stack_free + 28 [0x136778]

  Thread id:      4b21410

  Thread id:      4b21ba0

  Thread id:      4886998

  Thread id:      4b2b8b8

  Thread id:      4884000

  Thread id:      4b208b8

  Thread id:      4b2c7d8

  Thread id:      4b1d3c8

  Thread id:      4b2c048

  Thread id:      4b20c80

  Thread id:      4b2b4f0

  Thread id:      4b217d8

  Thread id:      4b2b128

  Thread id:      4b1ea78
  Kernel stack:
    26 __ZN9OSBooleanD1Ev + 2 [0x3bfed2]
      26 _mach_port_names + 713 [0x125f12]
        26 _ipc_port_dngrow + 318 [0x120e9a]
          26 _stack_collect + 142 [0x1369e5]
            26 _stack_free + 28 [0x136778]

  Thread id:      4b1d790

  Thread id:      4b1f998

  Thread id:      4886d60

  Thread id:      4b2ad60

  Thread id:      4b2a998

  Thread id:      528a128
  Kernel stack:
    26 _rt_newmaddrmsg + 707 [0x21471a]
      26 _IOHibernateSystemInit + 294 [0x37eb5a]
        26 _IOHibernateSystemSleep + 1493 [0x37e7a9]
          26 _pmsSetStep + 313 [0x130a08]
            26 _stack_collect + 142 [0x1369e5]
              26 _stack_free + 28 [0x136778]

  Thread id:      5287b58

  Thread id:      59c38b8

  Thread id:      59c2d60
  Kernel stack:
    26 _rt_newmaddrmsg + 707 [0x21471a]
      26 _IOHibernateSystemInit + 294 [0x37eb5a]
        26 _IOHibernateSystemSleep + 1493 [0x37e7a9]
          26 _pmsSetStep + 313 [0x130a08]
            26 _stack_collect + 142 [0x1369e5]
              26 _stack_free + 28 [0x136778]

  Thread id:      51976b0

  Thread id:      59c47d8

  Thread id:      59c4ba0

  Thread id:      550c3c8

  Thread id:      550c000

  Thread id:      59c03c8

  Thread id:      5a97ba0

  Thread id:      59c0b58
  Kernel stack:
    26 com.apple.filesystems.autofs (2.0.0d1) + 24885 [0x36a00135]
      26 _IOHibernateSystemInit + 294 [0x37eb5a]
        26 _IOHibernateSystemSleep + 1448 [0x37e77c]
          26 _pmsSetStep + 463 [0x130a9e]
            26 _stack_collect + 142 [0x1369e5]
              26 _stack_free + 28 [0x136778]

  Thread id:      5a968b8

  Thread id:      7eabba0

  Thread id:      5c4b7d8

  Thread id:      59c34f0

  Thread id:      77fa6b0


SHARED FRAMEWORK AREA
ADDRESS         BINARY
90003000        /System/Library/Frameworks/InstantMessage.framework/Frameworks/IMUtils.framework/Versions/A/IMUtils
90017000        /System/Library/Frameworks/CoreVideo.framework/Versions/A/CoreVideo
9002e000        /System/Library/PrivateFrameworks/PasswordServer.framework/Versions/A/PasswordServer
90073000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
90084000        /System/Library/PrivateFrameworks/ISSupport.framework/Versions/A/ISSupport
900ea000        /System/Library/Frameworks/SyncServices.framework/Versions/A/SyncServices
901ca000        /usr/lib/libbsm.dylib
901d2000        /System/Library/QuickTime/QuickTimeComponents.component/Contents/MacOS/QuickTimeComponents
9115a000        /System/Library/Frameworks/QuickLook.framework/Versions/A/QuickLook
91178000        /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox
9129d000        /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
913d0000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreText.framework/Versions/A/CoreText
9142b000        /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib
91469000        /System/Library/PrivateFrameworks/DotMacLegacy.framework/Versions/A/DotMacLegacy
91475000        /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib
91834000        /System/Library/PrivateFrameworks/DataDetectorsCore.framework/Versions/A/DataDetectorsCore
91883000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib
91886000        /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore
91b60000        /System/Library/PrivateFrameworks/CrashReporterSupport.framework/Versions/A/CrashReporterSupport
91b63000        /System/Library/PrivateFrameworks/FileSync.framework/Versions/A/FileSync
91b6d000        /usr/lib/libgcc_s.1.dylib
91b75000        /usr/lib/libsasl2.2.dylib
91b85000        /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
91c11000        /System/Library/Frameworks/Quartz.framework/Versions/A/Frameworks/PDFKit.framework/Versions/A/PDFKit
91c84000        /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib
91c91000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGATS.A.dylib
91c99000        /System/Library/PrivateFrameworks/DisplayServices.framework/Versions/A/DisplayServices
91c9f000        /System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate
91ca0000        /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
91ca1000        /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Ink.framework/Versions/A/Ink
91d35000        /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata
91d7b000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices
91d7c000        /System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio
91df9000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD
91ea1000        /System/Library/Frameworks/AddressBook.framework/Versions/A/AddressBook
92020000        /System/Library/PrivateFrameworks/DMNotification.framework/Versions/A/DMNotification
9202e000        /System/Library/PrivateFrameworks/Backup.framework/Versions/A/Backup
92034000        /System/Library/Frameworks/QuickTime.framework/Versions/A/QuickTime
92349000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis
9235a000        /usr/lib/libiconv.2.dylib
9244f000        /usr/lib/system/libmathCommon.A.dylib
92454000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libPng.dylib
92470000        /System/Library/Frameworks/Quartz.framework/Versions/A/Frameworks/ImageKit.framework/Versions/A/ImageKit
925a8000        /System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit
925a9000        /System/Library/PrivateFrameworks/MonitorPanel.framework/Versions/A/MonitorPanel
925aa000        /System/Library/PrivateFrameworks/FamilyControls.framework/Versions/A/FamilyControls
925fb000        /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ImageCapture.framework/Versions/A/ImageCapture
92610000        /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
92a21000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib
92a41000        /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLProgrammability.dylib
92f0e000        /System/Library/PrivateFrameworks/WhitePages.framework/Versions/A/WhitePages
92f7b000        /usr/lib/libncurses.5.4.dylib
92fab000        /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/CommonPanels.framework/Versions/A/CommonPanels
92fb1000        /System/Library/PrivateFrameworks/Shortcut.framework/Versions/A/Shortcut
92fda000        /System/Library/PrivateFrameworks/QuickLookUI.framework/Versions/A/QuickLookUI
9302a000        /System/Library/PrivateFrameworks/CoreMediaAuthoringPrivate.framework/Versions/A/CoreMediaAuthoringPrivate
9302e000        /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Help.framework/Versions/A/Help
93032000        /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SecurityHI.framework/Versions/A/SecurityHI
93035000        /usr/lib/libssl.0.9.7.dylib
9305a000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/ImageIO
931a0000        /System/Library/Frameworks/InstantMessage.framework/Versions/A/InstantMessage
931bd000        /usr/lib/libstdc++.6.dylib
9321b000        /usr/lib/libicucore.A.dylib
93354000        /System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration
9335d000        /System/Library/PrivateFrameworks/CoreMediaPrivate.framework/Versions/A/CoreMediaPrivate
93388000        /System/Library/Frameworks/SecurityFoundation.framework/Versions/A/SecurityFoundation
933c2000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices
93413000        /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices
934a0000        /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/OpenScripting.framework/Versions/A/OpenScripting
93722000        /System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
93723000        /System/Library/PrivateFrameworks/OpenDirectory.framework/Versions/A/Frameworks/CFOpenDirectory.framework/Versions/A/CFOpenDirectory
93735000        /System/Library/PrivateFrameworks/InstallServer.framework/Versions/A/InstallServer
93736000        /System/Library/PrivateFrameworks/Bom.framework/Versions/A/Bom
9376b000        /System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration
937a3000        /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib
937d1000        /System/Library/Frameworks/CoreData.framework/Versions/A/CoreData
938b7000        /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices
93972000        /System/Library/Frameworks/PubSub.framework/Versions/A/PubSub
93a74000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics
9410e000        /System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
9410f000        /System/Library/Frameworks/JavaScriptCore.framework/Versions/A/JavaScriptCore
941b9000        /System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos
9426a000        /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/NavigationServices.framework/Versions/A/NavigationServices
942ad000        /System/Library/QuickTime/QuickTimeH264.component/Contents/MacOS/QuickTimeH264
94381000        /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CFNetwork.framework/Versions/A/CFNetwork
943f9000        /System/Library/PrivateFrameworks/CoreUI.framework/Versions/A/CoreUI
94434000        /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/WebCore
9494b000        /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/CarbonSound.framework/Versions/A/CarbonSound
94956000        /System/Library/Frameworks/WebKit.framework/Versions/A/WebKit
94a12000        /usr/lib/libcrypto.0.9.7.dylib
94ac5000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libTIFF.dylib
94b05000        /System/Library/PrivateFrameworks/DataDetectors.framework/Versions/A/DataDetectors
94b1d000        /usr/lib/libz.1.dylib
94b2c000        /usr/lib/libbz2.1.0.dylib
94b39000        /usr/lib/libtidy.A.dylib
94b70000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore
94beb000        /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
94e66000        /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage
94f2e000        /usr/lib/libresolv.9.dylib
94f4d000        /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE
94f7d000        /usr/lib/libauto.dylib
94fa9000        /System/Library/PrivateFrameworks/iLifeMediaBrowser.framework/Versions/A/iLifeMediaBrowser
9501c000        /System/Library/PrivateFrameworks/DSObjCWrappers.framework/Versions/A/DSObjCWrappers
9502c000        /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib
950aa000        /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib
950ab000        /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/DictionaryServices.framework/Versions/A/DictionaryServices
950c2000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS
95156000        /System/Library/Frameworks/SecurityInterface.framework/Versions/A/SecurityInterface
951a1000        /System/Library/QuickTime/QuickTimeMPEG4.component/Contents/MacOS/QuickTimeMPEG4
95269000        /usr/lib/libxslt.1.dylib
9528e000        /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/HIToolbox
95597000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
955a3000        /System/Library/PrivateFrameworks/DotMacSyncManager.framework/Versions/A/DotMacSyncManager
955d4000        /usr/lib/libcups.2.dylib
955fb000        /System/Library/Frameworks/Security.framework/Versions/A/Security
957c7000        /System/Library/PrivateFrameworks/DesktopServicesPriv.framework/Versions/A/DesktopServicesPriv
95851000        /usr/lib/libffi.dylib
95853000        /System/Library/Frameworks/AGL.framework/Versions/A/AGL
9585b000        /usr/lib/libsqlite3.0.dylib
958e3000        /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HTMLRendering.framework/Versions/A/HTMLRendering
95940000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libGIF.dylib
95945000        /System/Library/Frameworks/Quartz.framework/Versions/A/Quartz
95946000        /System/Library/Frameworks/Quartz.framework/Versions/A/Frameworks/QuartzComposer.framework/Versions/A/QuartzComposer
95b02000        /System/Library/PrivateFrameworks/CoreMediaIOServicesPrivate.framework/Versions/A/CoreMediaIOServicesPrivate
95b40000        /System/Library/Frameworks/LDAP.framework/Versions/A/LDAP
95b73000        /usr/lib/libxml2.2.dylib
95c55000        /System/Library/PrivateFrameworks/HelpData.framework/Versions/A/HelpData
95c61000        /System/Library/Frameworks/Quartz.framework/Versions/A/Frameworks/QuartzFilters.framework/Versions/A/QuartzFilters
95c93000        /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLU.dylib
95ced000        /System/Library/QuickTime/QuickTimeImporters.component/Contents/MacOS/QuickTimeImporters
95d8c000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync.framework/Versions/A/ColorSync
95e58000        /System/Library/Frameworks/QTKit.framework/Versions/A/QTKit
95ee5000        /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Print.framework/Versions/A/Print
95eec000        /System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore
96283000        /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SpeechRecognition.framework/Versions/A/SpeechRecognition
9628d000        /System/Library/Frameworks/DirectoryService.framework/Versions/A/DirectoryService
962ac000        /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit
9632c000        /System/Library/PrivateFrameworks/KerberosHelper.framework/Versions/A/KerberosHelper
96332000        /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit
96b30000        /System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices
96b31000        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libRIP.A.dylib
96b73000        /usr/lib/libSystem.B.dylib
96cd3000        /usr/lib/libobjc.A.dylib
96db3000        /System/Library/PrivateFrameworks/DAVKit.framework/Versions/A/DAVKit
96df1000        /System/Library/PrivateFrameworks/OpenDirectory.framework/Versions/A/OpenDirectory
96df6000        /System/Library/Frameworks/CalendarStore.framework/Versions/A/CalendarStore
96f4f000        /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL


From khansen at stat.Berkeley.EDU  Wed Feb 13 19:44:02 2008
From: khansen at stat.Berkeley.EDU (Kasper Daniel Hansen)
Date: Wed, 13 Feb 2008 10:44:02 -0800
Subject: [Rd] Best way to reset random seed when using set.seed() in a
	function?
In-Reply-To: <59d7961d0802130857l7b4abcfcu891c066bcbe3d21a@mail.gmail.com>
References: <59d7961d0802130857l7b4abcfcu891c066bcbe3d21a@mail.gmail.com>
Message-ID: <86164ACE-3AA1-4DE7-AF6A-DA6A25186E6B@stat.berkeley.edu>

When is this really necessary? I have seen functions that do this, I  
have never seen any usage where I think it is necessary. Usually it  
is because the functions do say mcmc or cross-validation and wants  
repeatable behaviour. But if the user really wants that, he/she can  
just do it outside the functions. On the other hand, if functions  
play with the random generator they are in peril or destroying a  
possible outer loop which also uses random numbers.

Kasper

On Feb 13, 2008, at 8:57 AM, Henrik Bengtsson wrote:

> Hi,
>
> this is related to a question just raised on Bioconductor where one
> function sets the random seed internally but never resets it, which
> results in enforced down streams random samples being deterministic.
>
> What is the best way to reset the random seed when you use set.seed()
> within a function?  Is it still to re-assign '.Random.seed' in the
> global environment as following example illustrates?  I'm not too kind
> of having function modifying the global environment, if not really
> necessary.
>
> foo <- function(n) {
>   # Pop random seed
>   if (!exists(".Random.seed", mode="numeric"))
>     sample(NA);
>   oldSeed <- .Random.seed;
>
>   # Fixed seed to get reproducible samples here
>   set.seed(0xbeef);
>   x <- sample(5);
>
>   # Proof of concept: 'x' should be the same all the time
>   stopifnot(identical( x, as.integer(c(4,2,5,1,3)) ));
>
>   # Push random seed to old state
>   assign(".Random.seed", oldSeed, envir=globalenv())
>
>   # Continue as nothing happened
>   sample(n);
> }
>
>> foo(5)
> [1] 4 2 3 5 1
>> foo(5)
> [1] 4 2 3 1 5
>> foo(5)
> [1] 5 3 1 4 2
>> foo(5)
> [1] 5 3 2 4 1
>> foo(5)
>
> Is this the way to do it?
>
> Thanks
>
> Henrik
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From iverson at biostat.wisc.edu  Wed Feb 13 19:59:49 2008
From: iverson at biostat.wisc.edu (Erik Iverson)
Date: Wed, 13 Feb 2008 12:59:49 -0600
Subject: [Rd] removing last piece of grid graphical output with grid.remove
Message-ID: <47B33E25.5090307@biostat.wisc.edu>

Hello -

If I create multiple pieces of output in grid, and use grid.remove() to
try to remove the output from the graphics device, I cannot seem to
remove the final piece of output from the device until I 'refresh' the 
graphics device by giving it focus.  The function grid.remove() does 
appear to remove the grob from the display list, however.

I noticed this when the example on page 200-201 in Paul Murrell's R 
Graphics book did not work as expected when using 
grid.remove("circles").  Can anyone replicate this?

## Example
library(grid)

## Create two circles
grid.circle(name = "redcircle",  r = .20, gp = gpar(col = "red"))
grid.circle(name = "bluecircle", r = .25, gp = gpar(col = "blue"))

## removes the blue circle
grid.remove("bluecircle")

## the red circle will be deleted from the grid display list, but
## the graphics device will still show it until I 'refresh' the
## device by giving it focus via mouse or alt+tab, or producing
## more grid output
grid.remove("redcircle") ## still on my X11 device!

## more grid output
grid.text("Now the circle is gone!", name = "txt")

## But I can't get rid of this text on the device
## until I refresh device or do another grid call
grid.remove("txt")  ## still on my X1 device!


 > sessionInfo()
R version 2.6.2 (2008-02-08)
i686-pc-linux-gnu

locale:
LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets  methods
[8] base


From pgilbert at bank-banque-canada.ca  Wed Feb 13 20:07:21 2008
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 13 Feb 2008 14:07:21 -0500
Subject: [Rd] Best way to reset random seed when using set.seed() in a
 function?
In-Reply-To: <59d7961d0802130857l7b4abcfcu891c066bcbe3d21a@mail.gmail.com>
References: <59d7961d0802130857l7b4abcfcu891c066bcbe3d21a@mail.gmail.com>
Message-ID: <47B33FE9.2090301@bank-banque-canada.ca>

I think in general it is a good idea to use  on.exit()  to reset the 
seed if you mess with it. Otherwise you can generate unintended 
consequences for other programs. Something like:
    old.seed <- setRNG(kind = "default", seed = test.seed, normal.kind = 
"default")
    on.exit(setRNG(old.seed))

(BTW, setRNG is a simple little utility in the setRNG package, to help 
set and save some of the other things you need besides the seed, if you 
are going to try to reproduce results.)

Paul

Henrik Bengtsson wrote:
> Hi,
>
> this is related to a question just raised on Bioconductor where one
> function sets the random seed internally but never resets it, which
> results in enforced down streams random samples being deterministic.
>
> What is the best way to reset the random seed when you use set.seed()
> within a function?  Is it still to re-assign '.Random.seed' in the
> global environment as following example illustrates?  I'm not too kind
> of having function modifying the global environment, if not really
> necessary.
>
> foo <- function(n) {
>   # Pop random seed
>   if (!exists(".Random.seed", mode="numeric"))
>     sample(NA);
>   oldSeed <- .Random.seed;
>
>   # Fixed seed to get reproducible samples here
>   set.seed(0xbeef);
>   x <- sample(5);
>
>   # Proof of concept: 'x' should be the same all the time
>   stopifnot(identical( x, as.integer(c(4,2,5,1,3)) ));
>
>   # Push random seed to old state
>   assign(".Random.seed", oldSeed, envir=globalenv())
>
>   # Continue as nothing happened
>   sample(n);
> }
>
>   
>> foo(5)
>>     
> [1] 4 2 3 5 1
>   
>> foo(5)
>>     
> [1] 4 2 3 1 5
>   
>> foo(5)
>>     
> [1] 5 3 1 4 2
>   
>> foo(5)
>>     
> [1] 5 3 2 4 1
>   
>> foo(5)
>>     
>
> Is this the way to do it?
>
> Thanks
>
> Henrik
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>   
====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential in...{{dropped:26}}


From simon.urbanek at r-project.org  Wed Feb 13 20:16:39 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 13 Feb 2008 14:16:39 -0500
Subject: [Rd] ESC key crashes R (PR#10753)
In-Reply-To: <20080213180512.9C936282EF48@mail.pubhealth.ku.dk>
References: <20080213180512.9C936282EF48@mail.pubhealth.ku.dk>
Message-ID: <B360A53F-2822-4119-9E12-3CBB9C13F6A5@r-project.org>


On Feb 13, 2008, at 1:05 PM, cetpaine at gmail.com wrote:

> Full_Name: C. E. Timothy Paine
> Version: 2.6.2
> OS: MAC 10.5.2
> Submission from: (NULL) (193.51.118.233)
>
>
> Pressing the ESC key, at any time, will cause R to hang. Please help!
>

Please update to the most current GUI from
http://r.research.att.com/
which solves the problem (it was also discussed on R-SIG-Mac yesterday).

Thanks,
Simon


>
> Date/Time:      2008-02-13 15:01:11 -0300
> OS Version:     10.5.2 (Build 9C31)
> Architecture:   i386
> Report Version: 4
>
> Command:        R
> Path:           /Applications/R.app/Contents/MacOS/R
> Version:        R 2.6.2 GUI 1.23 (4932) (4932)
> Parent:         launchd [113]
>
> PID:            2418
> Event:          hang
> Time:           5.07s
> Steps:          26
>
>
> Process:        R [2418]
> Path:           /Applications/R.app/Contents/MacOS/R
>
>  ADDRESS         BINARY
>  00001000        /Applications/R.app/Contents/MacOS/R
>  00059000        /System/Library/Frameworks/ 
> ExceptionHandling.framework/Versions/A/ExceptionHandling
>  00062000        /Library/Frameworks/R.framework/Versions/2.6/ 
> Resources/lib/libRblas.dylib
>  002f4000        /Library/Frameworks/R.framework/Versions/2.6/ 
> Resources/lib/libR.dylib
>  005e8000        /Library/Frameworks/R.framework/Versions/2.6/ 
> Resources/lib/libgfortran.2.dylib
>  007e8000        /Library/Frameworks/R.framework/Versions/2.6/ 
> Resources/lib/libgcc_s.1.dylib
>  00812000        /Library/Frameworks/R.framework/Versions/2.6/ 
> Resources/lib/libreadline.5.2.dylib
>  0c8bb000        /System/Library/CoreServices/RawCamera.bundle/ 
> Contents/MacOS/RawCamera
>  0d9db000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/ 
> Contents/MacOS/Inquisitor
>  0ea5e000        /Library/Frameworks/R.framework/Resources/library/ 
> methods/libs/i386/methods.so
>  0eac1000        /Library/Frameworks/R.framework/Resources/library/ 
> grDevices/libs/i386/grDevices.so
>  0eb8f000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
>  0ec33000        /Library/Frameworks/R.framework/Resources/library/ 
> stats/libs/i386/stats.so
>
>  Thread id:      77fcc80
>  User stack:
>    26 start + 41 (in R) [0x2231]
>      26 __start + 216 (in R) [0x230a]
>        26 _main + 1135 (in R) [0x2795]
>          26 -[REngine runREPL] + 406 (in R) [0xf336]
>            26 _run_REngineRmainloop + 271 (in R) [0x16362]
>              5 _Re_ReadConsole + 86 (in R) [0xcd2d]
>                2 _CFArrayGetCount + 96 (in CoreFoundation)  
> [0x9129e470]
>                1 -[RController doProcessEvents:] + 28 (in R) [0x7e09]
>                1 -[RController doProcessEvents:] + 4 (in R) [0x7df1]
>                1 _CFArrayGetCount + 82 (in CoreFoundation)  
> [0x9129e462]
>              3 _objc_msgSend + 0 (in libobjc.A.dylib) [0x96ce76d0]
>              3 _objc_msgSend + 16 (in libobjc.A.dylib) [0x96ce76e0]
>              2 _objc_msgSend + 44 (in libobjc.A.dylib) [0x96ce76fc]
>              2 _objc_msgSend + 80 (in libobjc.A.dylib) [0x96ce7720]
>              2 ??? [0xa0a685d7]
>              2 ??? [0x41228]
>              2 -[RController handleReadConsole:] + 92 (in R) [0x5690]
>              1 _CFArrayGetCount + 0 (in CoreFoundation) [0x9129e410]
>              1 -[RController handleReadConsole:] + 51 (in R) [0x5667]
>              1 _objc_msgSend + 41 (in libobjc.A.dylib) [0x96ce76f9]
>              1 -[RController handleReadConsole:] + 100 (in R) [0x5698]
>              1 -[NSCFArray count] + 4 (in Foundation) [0x94bf00e4]
>  Kernel stack:
>    26 _z_errmsg + 33 [0x445d61]
>      26 _panic_dialog_test + 1459 [0x1af6ee]
>        26 _commpage_set_nanotime + 4042 [0x1a7f5e]
>
>  Thread id:      aa4f790
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __Z22CFURLCacheWorkerThreadPv + 396 (in CFNetwork)  
> [0x9438c6cc]
>          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      5c49998
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 ___select_nocancel + 10 (in libSystem.B.dylib)  
> [0x96bab72e]
>
>  Thread id:      72af8b8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 -[NSUIHeartBeat _heartBeatThread:] + 753 (in AppKit)
> [0x963d87f0]
>              26 -[NSConditionLock lockWhenCondition:] + 69 (in  
> Foundation)
> [0x94c3b275]
>                26 -[NSConditionLock lockWhenCondition:beforeDate:] +  
> 144 (in
> Foundation) [0x94c3b310]
>                  26 -[NSCondition waitUntilDate:] + 236 (in  
> Foundation)
> [0x94c3b4fc]
>                    26 _semaphore_timedwait_signal_trap + 10 (in
> libSystem.B.dylib) [0x96b73a46]
>
>  Thread id:      77f9f20
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _fe_fragment_thread + 54 (in QuartzCore) [0x95fe1121]
>          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>
> Process:        ATSServer [127]
> Path:           /System/Library/Frameworks/ 
> ApplicationServices.framework/Frameworks/ATS.framework/Support/ 
> ATSServer
>
>  ADDRESS         BINARY
>  00001000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Frameworks/ATS.framework/Support/ 
> ATSServer
>
>  Thread id:      59c2998
>  User stack:
>    26 ??? [0x4e26]
>      26 ??? [0xdd24f]
>        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      5287790
>  User stack:
>    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>
> Process:        AirPort Base Station Agent [141]
> Path:           /System/Library/CoreServices/AirPort Base Station
> Agent.app/Contents/MacOS/AirPort Base Station Agent
>
>  ADDRESS         BINARY
>  00001000        /System/Library/CoreServices/AirPort Base Station
> Agent.app/Contents/MacOS/AirPort Base Station Agent
>  000b4000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/ 
> Contents/MacOS/Inquisitor
>
>  Thread id:      6670048
>  User stack:
>    26 ??? [0x2c25]
>      26 ??? [0x2cfe]
>        26 _NSApplicationMain + 574 (in AppKit) [0x9633830a]
>          26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
>            26 -[NSApplication  
> nextEventMatchingMask:untilDate:inMode:dequeue:]
> + 128 (in AppKit) [0x9637208e]
>              26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
>                26 _BlockUntilNextEventMatchingListInMode + 106 (in  
> HIToolbox)
> [0x952be32d]
>                  26 _ReceiveNextEventCommon + 374 (in HIToolbox)  
> [0x952be4b9]
>                    26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
> [0x952be6a0]
>                      26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
> [0x9130fd18]
>                        26 _mach_msg_trap + 10 (in libSystem.B.dylib)
> [0x96b739e6]
>
>  Thread id:      666e5d0
>  User stack:
>    26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>  Thread id:      6b9b048
>  User stack:
>    26 _semaphore_timedwait_signal_trap + 10 (in libSystem.B.dylib)
> [0x96b73a46]
>
>
> Process:        AppleSpell [455]
> Path:           /System/Library/Services/AppleSpell.service/Contents/ 
> MacOS/AppleSpell
>
>  ADDRESS         BINARY
>  00001000        /System/Library/Services/AppleSpell.service/ 
> Contents/MacOS/AppleSpell
>  000f9000        /usr/lib/liblangid.dylib
>
>  Thread id:      77fd410
>  User stack:
>    26 ??? [0x1f22]
>      26 ??? [0x2229]
>        26 -[NSSpellServer run] + 198 (in Foundation) [0x94c6c9a6]
>          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>
> Process:        Console [2407]
> Path:           /Applications/Utilities/Console.app/Contents/MacOS/ 
> Console
>
>  ADDRESS         BINARY
>  00001000        /Applications/Utilities/Console.app/Contents/MacOS/ 
> Console
>  0003d000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/ 
> Contents/MacOS/Inquisitor
>  0079a000        /System/Library/Frameworks/OpenGL.framework/ 
> Versions/A/Resources/GLRendererFloat.bundle/GLRendererFloat
>  0d4e8000        /System/Library/CoreServices/RawCamera.bundle/ 
> Contents/MacOS/RawCamera
>  0d7a7000        /System/Library/Frameworks/OpenGL.framework/ 
> Resources/GLEngine.bundle/GLEngine
>  0d956000        /System/Library/Extensions/ 
> GeForce8xxxGLDriver.bundle/Contents/MacOS/GeForce8xxxGLDriver
>  0f84a000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
>
>  Thread id:      6b98e40
>  User stack:
>    26 ??? [0x2ac2]
>      26 _NSApplicationMain + 574 (in AppKit) [0x9633830a]
>        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
>          26 -[NSApplication  
> nextEventMatchingMask:untilDate:inMode:dequeue:] +
> 128 (in AppKit) [0x9637208e]
>            26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
>              26 _BlockUntilNextEventMatchingListInMode + 106 (in  
> HIToolbox)
> [0x952be32d]
>                26 _ReceiveNextEventCommon + 374 (in HIToolbox)  
> [0x952be4b9]
>                  26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
> [0x952be6a0]
>                    26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
> [0x9130fd18]
>                      26 _mach_msg_trap + 10 (in libSystem.B.dylib)
> [0x96b739e6]
>
>  Thread id:      9bbac80
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>  Thread id:      7ea7f20
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _glvmDoWork + 162 (in libGLProgrammability.dylib)  
> [0x92a67f32]
>          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      4b29e40
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _fe_fragment_thread + 54 (in QuartzCore) [0x95fe1121]
>          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      59c1a78
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___read + 10 (in libSystem.B.dylib) [0x96b9771a]
>  Kernel stack:
>    26 _deflate_copyright + 8631 [0x3dbe77]
>      26 __ZN9IOService21unregisterAllInterestEv + 9 [0x389fd9]
>        26 __ZN9IOService14messageClientsEmPvj + 3 [0x389d99]
>          26 _journal_is_clean + 1748 [0x1eabf4]
>            26 _union_mkdir + 164 [0x1f5229]
>              26 _bpfioctl + 332 [0x201088]
>                26  
> __ZN25IOGeneralMemoryDescriptor7prepareE11IODirection + 27
> [0x3a516f]
>                  26
> __ZN12_IOMemoryMap14copyCompatibleEP18IOMemoryDescriptorP4taskjmmm +  
> 173
> [0x3a65b9]
>                    26 _IOHibernateSystemInit + 294 [0x37eb5a]
>                      26 _IOHibernateSystemSleep + 1493 [0x37e7a9]
>                        26 _pmsSetStep + 313 [0x130a08]
>                          26 _stack_collect + 142 [0x1369e5]
>                            26 _stack_free + 28 [0x136778]
>
>
> Process:        DashboardClient [605]
> Path:           /System/Library/CoreServices/Dock.app/Contents/ 
> Resources/DashboardClient.app/Contents/MacOS/DashboardClient
>
>  ADDRESS         BINARY
>  00001000        /System/Library/CoreServices/Dock.app/Contents/ 
> Resources/DashboardClient.app/Contents/MacOS/DashboardClient
>  0002d000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/ 
> Contents/MacOS/Inquisitor
>  000c4000        /Library/Widgets/Dictionary.wdgt/ 
> Dictionary.widgetplugin/Contents/MacOS/Dictionary
>  00300000        /System/Library/CoreServices/RawCamera.bundle/ 
> Contents/MacOS/RawCamera
>  00450000        /Library/Internet
> Plug-Ins/JavaPluginCocoa.bundle/Contents/MacOS/JavaPluginCocoa
>  0074a000        /System/Library/Frameworks/JavaVM.framework/ 
> Versions/A/JavaVM
>  0075b000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/ 
> Versions/A/Resources/ATSHI.dylib
>  00795000        /Library/Widgets/Web
> Clip.wdgt/WebClip.plugin/Contents/MacOS/WebClip
>  0fb01000        /System/Library/PrivateFrameworks/ 
> Calculate.framework/Calculate
>  109ee000        /System/Library/Frameworks/CoreAudioKit.framework/ 
> Versions/A/CoreAudioKit
>  10ace000        /Library/QuickTime/DivX Decoder.component/Contents/ 
> MacOS/DivX
> Decoder
>  10f00000        /Library/Internet Plug-Ins/Flash
> Player.plugin/Contents/MacOS/Flash Player
>  12c18000        /System/Library/CoreServices/Encodings/ 
> libTraditionalChineseConverter.dylib
>  ba900000        /System/Library/CoreServices/Encodings/ 
> libJapaneseConverter.dylib
>
>  Thread id:      6b97000
>  User stack:
>    26 ??? [0x2b7a]
>      26 ??? [0xa545]
>        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
>          26 -[NSApplication  
> nextEventMatchingMask:untilDate:inMode:dequeue:] +
> 128 (in AppKit) [0x9637208e]
>            26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
>              26 _BlockUntilNextEventMatchingListInMode + 106 (in  
> HIToolbox)
> [0x952be32d]
>                26 _ReceiveNextEventCommon + 374 (in HIToolbox)  
> [0x952be4b9]
>                  26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
> [0x952be6a0]
>                    26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
> [0x9130fd18]
>                      25 _mach_msg_trap + 10 (in libSystem.B.dylib)
> [0x96b739e6]
>                      1 _CFRunLoopRunSpecific + 4494 (in  
> CoreFoundation)
> [0x9130fb5e]
>                        1 ___NSFireTimer + 147 (in Foundation)  
> [0x94c29bc3]
>                          1 -[WebBaseNetscapePluginView  
> sendNullEvent] + 161 (in
> WebKit) [0x9497d161]
>                            1 -[WebBaseNetscapePluginView sendEvent:]  
> + 347 (in
> WebKit) [0x9497b5fb]
>                              1 _Flash_EnforceLocalSecurity + 354 (in  
> Flash
> Player) [0x112a878a]
>                                1 _Flash_EnforceLocalSecurity + 81841  
> (in Flash
> Player) [0x112bc5d9]
>                                  1 ??? [0x1114a016]
>                                    1 _swtch_pri + 10 (in  
> libSystem.B.dylib)
> [0x96b73aca]
>
>  Thread id:      5a942e8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __Z22CFURLCacheWorkerThreadPv + 396 (in CFNetwork)  
> [0x9438c6cc]
>          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      7ea8a78
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 +[NSURLConnection(NSURLConnectionReallyInternal)
> _resourceLoadLoop:] + 320 (in Foundation) [0x94c58ac0]
>              26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      6b986b0
>  User stack:
>    26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>  Thread id:      9bbb7d8
>  User stack:
>    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      4b2bc80
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0x1128f81c]
>          26 _Flash_EnforceLocalSecurity + 124992 (in Flash Player)
> [0x112c6e68]
>            26 ??? [0x1128f572]
>              26 _semaphore_wait_signal_trap + 10 (in  
> libSystem.B.dylib)
> [0x96b73a2e]
>
>  Thread id:      7eaa8b8
>  User stack:
>    26 _semaphore_wait_signal_trap + 10 (in libSystem.B.dylib)  
> [0x96b73a2e]
>
>
> Process:        DashboardClient [606]
> Path:           /System/Library/CoreServices/Dock.app/Contents/ 
> Resources/DashboardClient.app/Contents/MacOS/DashboardClient
>
>  ADDRESS         BINARY
>  00001000        /System/Library/CoreServices/Dock.app/Contents/ 
> Resources/DashboardClient.app/Contents/MacOS/DashboardClient
>  0002d000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/ 
> Contents/MacOS/Inquisitor
>  000d8000        /Library/Widgets/Unit
> Converter.wdgt/ConverterPlugin.widgetplugin/Contents/MacOS/ 
> ConverterPlugin
>  00300000        /System/Library/CoreServices/RawCamera.bundle/ 
> Contents/MacOS/RawCamera
>
>  Thread id:      7ea7000
>  User stack:
>    26 ??? [0x2b7a]
>      26 ??? [0xa545]
>        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
>          26 -[NSApplication  
> nextEventMatchingMask:untilDate:inMode:dequeue:] +
> 128 (in AppKit) [0x9637208e]
>            26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
>              26 _BlockUntilNextEventMatchingListInMode + 106 (in  
> HIToolbox)
> [0x952be32d]
>                26 _ReceiveNextEventCommon + 374 (in HIToolbox)  
> [0x952be4b9]
>                  26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
> [0x952be6a0]
>                    26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
> [0x9130fd18]
>                      26 _mach_msg_trap + 10 (in libSystem.B.dylib)
> [0x96b739e6]
>
>  Thread id:      6b99208
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __Z22CFURLCacheWorkerThreadPv + 396 (in CFNetwork)  
> [0x9438c6cc]
>          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      6b973c8
>  User stack:
>    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      6b9a128
>  User stack:
>    26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>
> Process:        DirectoryService [33]
> Path:           /usr/sbin/DirectoryService
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/DirectoryService
>  0015a000        /System/Library/PrivateFrameworks/ 
> DirectoryServiceCore.framework/Versions/A/DirectoryServiceCore
>
>  Thread id:      5199128
>  User stack:
>    26 start + 54 (in DirectoryService) [0x165ca]
>      26 _main + 2569 (in DirectoryService) [0x16ff1]
>        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      51998b8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __ZN9DSLThread11_RunWrapperEPv + 84 (in  
> DirectoryServiceCore)
> [0x162196]
>          26 __ZN9DSCThread3RunEv + 39 (in DirectoryServiceCore)  
> [0x161f8b]
>            26 __ZN20CPluginRunLoopThread10ThreadMainEv + 222 (in
> DirectoryService) [0x23126]
>              26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>                26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      4b28f20
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __ZN9DSLThread11_RunWrapperEPv + 84 (in  
> DirectoryServiceCore)
> [0x162196]
>          26 __ZN9DSCThread3RunEv + 39 (in DirectoryServiceCore)  
> [0x161f8b]
>            26 __ZN17CMigHandlerThread10ThreadMainEv + 303 (in  
> DirectoryService)
> [0x2335f]
>              26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>  Kernel stack:
>    26 _cpuid_features + 84 [0x19714c]
>      26 _mach_port_extract_right + 67 [0x126e12]
>        26 _ipc_port_dngrow + 318 [0x120e9a]
>          26 _stack_collect + 142 [0x1369e5]
>            26 _stack_free + 28 [0x136778]
>
>  Thread id:      5289998
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>  Thread id:      9bb95d0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __ZN9DSLThread11_RunWrapperEPv + 84 (in  
> DirectoryServiceCore)
> [0x162196]
>          26 _syscall + 5 (in libSystem.B.dylib) [0x96bb6725]
>
>
> Process:        Dock [126]
> Path:           /System/Library/CoreServices/Dock.app/Contents/MacOS/ 
> Dock
>
>  ADDRESS         BINARY
>  00001000        /System/Library/CoreServices/Dock.app/Contents/ 
> MacOS/Dock
>  00400000        /System/Library/CoreServices/RawCamera.bundle/ 
> Contents/MacOS/RawCamera
>  ba500000        /System/Library/CoreServices/Encodings/ 
> libGreekConverter.dylib
>
>  Thread id:      550cb58
>  User stack:
>    26 ??? [0x5472]
>      26 ??? [0x95c85]
>        26 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 213 (in  
> Foundation)
> [0x94c29b15]
>          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      5a946b0
>  User stack:
>    26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      5a93790
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      25 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        25 ??? [0x12d8a]
>          25 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>      1 _clock_sleep_trap + 10 (in libSystem.B.dylib) [0x96b73aee]
>  Kernel stack:
>    1 _cpuid_features + 84 [0x19714c]
>      1 _ipc_processor_disable + 32 [0x12a6f7]
>        1 _stack_collect + 142 [0x1369e5]
>          1 _stack_free + 28 [0x136778]
>
>  Thread id:      5a955d0
>  User stack:
>    26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>
> Process:        Finder [130]
> Path:           /System/Library/CoreServices/Finder.app/Contents/ 
> MacOS/Finder
>
>  ADDRESS         BINARY
>  00001000        /System/Library/CoreServices/Finder.app/Contents/ 
> MacOS/Finder
>  004e4000        /System/Library/Frameworks/Collaboration.framework/ 
> Versions/A/Collaboration
>  0060a000        /System/Library/TextEncodings/Unicode
> Encodings.bundle/Contents/MacOS/Unicode Encodings
>  00686000        /System/Library/PrivateFrameworks/ 
> URLMount.framework/URLMount
>  0a1f5000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/ 
> Contents/MacOS/Inquisitor
>  0a22f000        /System/Library/PrivateFrameworks/ 
> QuickLookUI.framework/Versions/A/Resources/DisplayBundles/ 
> PDF.qldisplay/Contents/MacOS/PDF
>  0a262000        /System/Library/PrivateFrameworks/ 
> QuickLookUI.framework/Versions/A/Resources/DisplayBundles/ 
> NSImage.qldisplay/Contents/MacOS/NSImage
>  0a27a000        /System/Library/PrivateFrameworks/ 
> QuickLookUI.framework/Versions/A/Resources/DisplayBundles/ 
> Generic.qldisplay/Contents/MacOS/Generic
>  0a292000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libFontStreams.A.dylib
>  0a4af000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
>  0db2d000        /System/Library/CoreServices/RawCamera.bundle/ 
> Contents/MacOS/RawCamera
>  ba500000        /System/Library/CoreServices/Encodings/ 
> libGreekConverter.dylib
>
>  Thread id:      666f4f0
>  User stack:
>    26 ??? [0x94e6]
>      26 ??? [0xf37d9]
>        26 ??? [0x23605]
>          26 _RunApplicationEventLoop + 207 (in HIToolbox) [0x9531b95b]
>            26 __AcquireNextEvent + 58 (in HIToolbox) [0x9531d1fe]
>              26 _ReceiveNextEventCommon + 374 (in HIToolbox)  
> [0x952be4b9]
>                26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)  
> [0x952be6a0]
>                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                    26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      666de40
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
>          26  
> __ZN23TSystemNotificationTask26SystemNotificationTaskProcEPv + 123
> (in DesktopServicesPriv) [0x957c846f]
>            26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>              26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      666da78
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
>          26  
> __ZN25TFSEventsNotificationTask28FSEventsNotificationTaskProcEPv +
> 216 (in DesktopServicesPriv) [0x957c85e8]
>            26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>              26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      666d2e8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
>          26 __ZN13TNodeSyncTask12SyncTaskProcEPv + 84 (in  
> DesktopServicesPriv)
> [0x957d3a7a]
>            26 _MPWaitOnQueue + 208 (in CarbonCore) [0x918d0654]
>              26 _TSWaitOnConditionTimedRelative + 202 (in CarbonCore)
> [0x918af8fe]
>                26 _TSWaitOnCondition + 126 (in CarbonCore)  
> [0x918d09d7]
>                  26 ___semwait_signal + 10 (in libSystem.B.dylib)  
> [0x96b7abce]
>
>  Thread id:      666cb58
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>  Thread id:      666c790
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>  Thread id:      519a048
>  User stack:
>    26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      72b07d8
>  User stack:
>    26 _semaphore_timedwait_signal_trap + 10 (in libSystem.B.dylib)
> [0x96b73a46]
>
>  Thread id:      5c4b410
>  User stack:
>    25 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      25 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        25 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
>          25 __ZN15TFolderSizeTask18FolderSizeTaskProcEPv + 104 (in
> DesktopServicesPriv) [0x957d59c4]
>            25 _MPWaitOnQueue + 208 (in CarbonCore) [0x918d0654]
>              25 _TSWaitOnConditionTimedRelative + 246 (in CarbonCore)
> [0x918af92a]
>                25 _semaphore_timedwait_signal_trap + 10 (in  
> libSystem.B.dylib)
> [0x96b73a46]
>
>
> Process:        Firewall [262]
> Path:           /usr/libexec/ApplicationFirewall/Firewall
>
>  ADDRESS         BINARY
>  00001000        /usr/libexec/ApplicationFirewall/Firewall
>
>  Thread id:      7eaa4f0
>  User stack:
>    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>
> Process:        KernelEventAgent [25]
> Path:           /usr/sbin/KernelEventAgent
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/KernelEventAgent
>
>  Thread id:      4b28000
>  User stack:
>    26 start + 54 (in KernelEventAgent) [0x1bfe]
>      26 _main + 1126 (in KernelEventAgent) [0x3b7f]
>        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      51972e8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>
> Process:        Mail [451]
> Path:           /Applications/Mail.app/Contents/MacOS/Mail
>
>  ADDRESS         BINARY
>  00001000        /Applications/Mail.app/Contents/MacOS/Mail
>  002da000        /System/Library/Frameworks/Message.framework/ 
> Versions/B/Message
>  0067c000        /System/Library/Frameworks/ 
> ExceptionHandling.framework/Versions/A/ExceptionHandling
>  00685000        /System/Library/Frameworks/ 
> LatentSemanticMapping.framework/Versions/A/LatentSemanticMapping
>  006c5000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/ 
> Contents/MacOS/Inquisitor
>  0100c000        /usr/lib/liblangid.dylib
>  0ab7c000        /System/Library/Contextual Menu
> Items/BluetoothContextualMenu.plugin/Contents/MacOS/ 
> BluetoothContextualMenu
>  0ab86000        /System/Library/Contextual Menu
> Items/AutomatorCMM.plugin/Contents/MacOS/AutomatorCMM
>  0ab93000        /System/Library/PrivateFrameworks/ 
> BezelServices.framework/Versions/A/BezelServices
>  0ab9d000        /System/Library/Contextual Menu
> Items/FolderActionsMenu.plugin/Contents/MacOS/FolderActionsMenu
>  0abba000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/ 
> Versions/A/Resources/ATSHI.dylib
>  0d3ef000        /System/Library/Frameworks/IOBluetooth.framework/ 
> Versions/A/IOBluetooth
>  0d4f4000        /System/Library/CoreServices/Encodings/ 
> libTraditionalChineseConverter.dylib
>  0d70d000        /System/Library/CoreServices/RawCamera.bundle/ 
> Contents/MacOS/RawCamera
>  0ddb9000        /System/Library/Frameworks/OpenGL.framework/ 
> Versions/A/Resources/GLRendererFloat.bundle/GLRendererFloat
>  0e0af000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
>  0e9b6000        /System/Library/TextEncodings/Unicode
> Encodings.bundle/Contents/MacOS/Unicode Encodings
>  0f70f000        /Library/Internet
> Plug-Ins/JavaPluginCocoa.bundle/Contents/MacOS/JavaPluginCocoa
>  0f78a000        /System/Library/Extensions/AudioIPCDriver.kext/ 
> Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn
>  0f793000        /System/Library/Extensions/AppleHDA.kext/Contents/ 
> PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn
>  0f815000        /Library/QuickTime/DivX Decoder.component/Contents/ 
> MacOS/DivX
> Decoder
>  0f902000        /System/Library/Frameworks/JavaVM.framework/ 
> Versions/A/JavaVM
>  0fb5f000        /System/Library/Frameworks/Message.framework/ 
> Versions/B/Resources/Syncer.syncschema/Contents/MacOS/Syncer
>  0fb90000        /System/Library/PrivateFrameworks/ 
> SyncServicesUI.framework/Versions/A/SyncServicesUI
>  0fdcd000        /Applications/Mail.app/Contents/PlugIns/ 
> MailWebPlugIn.bundle/Contents/MacOS/MailWebPlugIn
>  10700000        /System/Library/Frameworks/OpenGL.framework/ 
> Resources/GLEngine.bundle/GLEngine
>  10bcc000        /System/Library/Extensions/ 
> GeForce8xxxGLDriver.bundle/Contents/MacOS/GeForce8xxxGLDriver
>  1116e000        /usr/lib/libmecab.1.0.0.dylib
>  70000000        /System/Library/Components/CoreAudio.component/ 
> Contents/MacOS/CoreAudio
>  ba300000        /System/Library/CoreServices/Encodings/ 
> libCyrillicConverter.dylib
>  ba900000        /System/Library/CoreServices/Encodings/ 
> libJapaneseConverter.dylib
>
>  Thread id:      6b97f20
>  User stack:
>    26 ??? [0xfa206]
>      26 _NSApplicationMain + 574 (in AppKit) [0x9633830a]
>        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
>          26 -[NSApplication  
> nextEventMatchingMask:untilDate:inMode:dequeue:] +
> 128 (in AppKit) [0x9637208e]
>            26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
>              26 _BlockUntilNextEventMatchingListInMode + 106 (in  
> HIToolbox)
> [0x952be32d]
>                26 _ReceiveNextEventCommon + 374 (in HIToolbox)  
> [0x952be4b9]
>                  26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
> [0x952be6a0]
>                    26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
> [0x9130fd18]
>                      26 _mach_msg_trap + 10 (in libSystem.B.dylib)
> [0x96b739e6]
>
>  Thread id:      6b9a4f0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 -[RSSInterchange _runManager] + 2140 (in Message)  
> [0x3ce0a0]
>              26 -[NSRunLoop(NSRunLoop) run] + 84 (in Foundation)  
> [0x94c35c34]
>                26 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 213  
> (in
> Foundation) [0x94c29b15]
>                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                    26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      9bb9998
>  User stack:
>    26 ___workq_ops + 10 (in libSystem.B.dylib) [0x96bdd5c6]
>
>  Thread id:      77f93c8
>  User stack:
>    26 ??? [0x0]
>
>  Thread id:      77fc128
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _fe_fragment_thread + 54 (in QuartzCore) [0x95fe1121]
>          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      6b99998
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __Z22CFURLCacheWorkerThreadPv + 396 (in CFNetwork)  
> [0x9438c6cc]
>          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      77fdba0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 +[NSURLConnection(NSURLConnectionReallyInternal)
> _resourceLoadLoop:] + 320 (in Foundation) [0x94c58ac0]
>              26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      7eaa128
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 +[_NSSocket _runIOThread] + 98 (in Message) [0x2f4871]
>              26 -[NSRunLoop(NSRunLoop) run] + 84 (in Foundation)  
> [0x94c35c34]
>                26 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 213  
> (in
> Foundation) [0x94c29b15]
>                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                    26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      5510410
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>  Thread id:      7ea82e8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __ZN9CAPThread5EntryEPS_ + 96 (in CoreAudio) [0x91d99300]
>          26 __ZN10HALRunLoop9OwnThreadEPv + 160 (in CoreAudio)  
> [0x91d99464]
>            26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>              26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      5288a78
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 -[NSUIHeartBeat _heartBeatThread:] + 753 (in AppKit)
> [0x963d87f0]
>              26 -[NSConditionLock lockWhenCondition:] + 69 (in  
> Foundation)
> [0x94c3b275]
>                26 -[NSConditionLock lockWhenCondition:beforeDate:] +  
> 144 (in
> Foundation) [0x94c3b310]
>                  26 -[NSCondition waitUntilDate:] + 236 (in  
> Foundation)
> [0x94c3b4fc]
>                    26 _semaphore_timedwait_signal_trap + 10 (in
> libSystem.B.dylib) [0x96b73a46]
>
>  Thread id:      c79a410
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __Z11CMMConvTaskPv + 54 (in ColorSync) [0x95dd1d92]
>          26 __Z20pthreadSemaphoreWaitP18t_pthreadSemaphore + 42 (in  
> ColorSync)
> [0x95dbf460]
>            26 ___semwait_signal + 10 (in libSystem.B.dylib)  
> [0x96b7abce]
>
>  Thread id:      48843c8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _glvmDoWork + 162 (in libGLProgrammability.dylib)  
> [0x92a67f32]
>          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>
> Process:        Safari [1142]
> Path:           /Applications/Safari.app/Contents/MacOS/Safari
>
>  ADDRESS         BINARY
>  00001000        /Applications/Safari.app/Contents/MacOS/Safari
>  00176000        /System/Library/PrivateFrameworks/ 
> SyndicationUI.framework/Versions/A/SyndicationUI
>  0019a000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/ 
> Contents/MacOS/Inquisitor
>  001b0000        /System/Library/Contextual Menu
> Items/FolderActionsMenu.plugin/Contents/MacOS/FolderActionsMenu
>  00400000        /System/Library/CoreServices/RawCamera.bundle/ 
> Contents/MacOS/RawCamera
>  004ff000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/ 
> Contents/Resources/InquisitorCore.bundle/Contents/MacOS/InquisitorCore
>  01b70000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/ 
> Versions/A/Resources/ATSHI.dylib
>  09b83000        /usr/lib/libcurl.3.dylib
>  0db54000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
>  0e0aa000        /Library/Internet
> Plug-Ins/JavaPluginCocoa.bundle/Contents/MacOS/JavaPluginCocoa
>  0e0c0000        /System/Library/Frameworks/JavaVM.framework/ 
> Versions/A/JavaVM
>  0f096000        /System/Library/Contextual Menu
> Items/BluetoothContextualMenu.plugin/Contents/MacOS/ 
> BluetoothContextualMenu
>  0f622000        /System/Library/Frameworks/CoreAudioKit.framework/ 
> Versions/A/CoreAudioKit
>  0fa94000        /Library/QuickTime/DivX Decoder.component/Contents/ 
> MacOS/DivX
> Decoder
>  0fbc3000        /Library/Internet Plug-Ins/Flash
> Player.plugin/Contents/MacOS/Flash Player
>  11a01000        /System/Library/CoreServices/Encodings/ 
> libTraditionalChineseConverter.dylib
>  11ad9000        /System/Library/Contextual Menu
> Items/AutomatorCMM.plugin/Contents/MacOS/AutomatorCMM
>  12cca000        /System/Library/PrivateFrameworks/ 
> BezelServices.framework/Versions/A/BezelServices
>  12e5f000        /Library/Internet
> Plug-Ins/AdobePDFViewer.plugin/Contents/MacOS/AdobePDFViewer
>  14bcd000        /System/Library/TextEncodings/Unicode
> Encodings.bundle/Contents/MacOS/Unicode Encodings
>  1545e000        /System/Library/PrivateFrameworks/ 
> URLMount.framework/URLMount
>  154b6000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Frameworks/AdobeSelfHealing.framework/ 
> AdobeSelfHealing
>  16840000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/Updater.acroplugin/Contents/Frameworks/ 
> AdobeUpdater.framework/AdobeUpdater
>  16a00000        /System/Library/Frameworks/IOBluetooth.framework/ 
> Versions/A/IOBluetooth
>  40000000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Frameworks/Acrobat.framework/../ 
> AdobeJP2K.framework/Versions/A/AdobeJP2K
>  83f8c000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Frameworks/Acrobat.framework/Acrobat
>  869f5000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/WebLink.acroplugin/Contents/MacOS/WebLink
>  86cab000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/Updater.acroplugin/Contents/MacOS/Updater
>  87361000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/Spelling.acroplugin/Contents/MacOS/ 
> Spelling
>  87567000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/SendMail.acroplugin/Contents/MacOS/ 
> SendMail
>  875bd000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/Search.acroplugin/Contents/MacOS/Search
>  879bd000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/SaveAsRTF.acroplugin/Contents/MacOS/ 
> SaveAsRTF
>  87aba000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/Reflow.acroplugin/Contents/MacOS/Reflow
>  87bd1000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/ReadOutLoud.acroplugin/Contents/MacOS/ 
> ReadOutLoud
>  87c12000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/PPKLite.acroplugin/Contents/MacOS/PPKLite
>  88f4f000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/PDDom.acroplugin/Contents/MacOS/PDDom
>  8916e000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/Multimedia.acroplugin/Contents/MacOS/ 
> Multimedia
>  897a8000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/MakeAccessible.acroplugin/Contents/ 
> MacOS/MakeAccessible
>  8b128000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/HLS.acroplugin/Contents/MacOS/HLS
>  8b140000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/EWH.acroplugin/Contents/MacOS/EWH
>  8b1b4000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/EScript.acroplugin/Contents/MacOS/EScript
>  8b57a000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/EFS.acroplugin/Contents/MacOS/EFS
>  8c18d000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/eBook.acroplugin/Contents/MacOS/eBook
>  8c1b0000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/DVA.acroplugin/Contents/MacOS/DVA
>  8c224000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/DigSig.acroplugin/Contents/MacOS/DigSig
>  8c563000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/Comments.acroplugin/Contents/MacOS/ 
> Comments
>  8cfe9000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/Checkers.acroplugin/Contents/MacOS/ 
> Checkers
>  8d28a000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/AcroForm.acroplugin/Contents/MacOS/ 
> AcroForm
>  8e956000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Plug-ins/Accessibility.acroplugin/Contents/MacOS/ 
> Accessibility
>  8ea27000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Frameworks/Acrobat.framework/../ 
> AdobeCoolType.framework/Versions/A/AdobeCoolType
>  8efdd000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Frameworks/Acrobat.framework/../ 
> AdobeBIB.framework/Versions/A/AdobeBIB
>  8f03c000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Frameworks/Acrobat.framework/../ 
> AdobeAGM.framework/Versions/A/AdobeAGM
>  8fc37000        /Applications/Adobe Reader 8/Adobe
> Reader.app/Contents/Frameworks/Acrobat.framework/../ 
> AdobeACE.framework/Versions/A/AdobeACE
>  ba900000        /System/Library/CoreServices/Encodings/ 
> libJapaneseConverter.dylib
>
>  Thread id:      5289208
>  User stack:
>    26 ??? [0x2456]
>      26 _NSApplicationMain + 574 (in AppKit) [0x9633830a]
>        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
>          26 ??? [0x997e]
>            26 -[NSApplication  
> nextEventMatchingMask:untilDate:inMode:dequeue:]
> + 128 (in AppKit) [0x9637208e]
>              26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
>                26 _BlockUntilNextEventMatchingListInMode + 106 (in  
> HIToolbox)
> [0x952be32d]
>                  26 _ReceiveNextEventCommon + 374 (in HIToolbox)  
> [0x952be4b9]
>                    26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
> [0x952be6a0]
>                      26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
> [0x9130fd18]
>                        26 _mach_msg_trap + 10 (in libSystem.B.dylib)
> [0x96b739e6]
>
>  Thread id:      7ea9d60
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __ZN7WebCore12IconDatabase22iconDatabaseSyncThreadEv + 181  
> (in
> WebCore) [0x944373e5]
>          26 __ZN7WebCore12IconDatabase18syncThreadMainLoopEv + 239  
> (in WebCore)
> [0x9443bdef]
>            26 ___semwait_signal + 10 (in libSystem.B.dylib)  
> [0x96b7abce]
>
>  Thread id:      72af4f0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>  Thread id:      59c12e8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __Z22CFURLCacheWorkerThreadPv + 396 (in CFNetwork)  
> [0x9438c6cc]
>          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      9bb7000
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 +[NSURLConnection(NSURLConnectionReallyInternal)
> _resourceLoadLoop:] + 320 (in Foundation) [0x94c58ac0]
>              26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      72ada78
>  User stack:
>    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      72afc80
>  User stack:
>    26 ___workq_ops + 10 (in libSystem.B.dylib) [0x96bdd5c6]
>
>  Thread id:      77fd7d8
>  User stack:
>    26 ??? [0x0]
>
>  Thread id:      9bba4f0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 -[NSUIHeartBeat _heartBeatThread:] + 753 (in AppKit)
> [0x963d87f0]
>              26 -[NSConditionLock lockWhenCondition:] + 69 (in  
> Foundation)
> [0x94c3b275]
>                26 -[NSConditionLock lockWhenCondition:beforeDate:] +  
> 144 (in
> Foundation) [0x94c3b310]
>                  26 -[NSCondition waitUntilDate:] + 236 (in  
> Foundation)
> [0x94c3b4fc]
>                    26 _semaphore_timedwait_signal_trap + 10 (in
> libSystem.B.dylib) [0x96b73a46]
>
>  Thread id:      6b97790
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
>          26 _ACEInitialize + 6249 (in AdobeACE) [0x8fc39527]
>            26 _ACEInitialize + 6389 (in AdobeACE) [0x8fc395b3]
>              26 _MPWaitOnQueue + 208 (in CarbonCore) [0x918d0654]
>                26 _TSWaitOnConditionTimedRelative + 202 (in  
> CarbonCore)
> [0x918af8fe]
>                  26 _TSWaitOnCondition + 126 (in CarbonCore)  
> [0x918d09d7]
>                    26 ___semwait_signal + 10 (in libSystem.B.dylib)
> [0x96b7abce]
>
>  Thread id:      59c2208
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
>          26 ??? [0x8c6708fb]
>            26 ??? [0x8c66fd2b]
>              26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      9bb7b58
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
>          26  
> __ZN23TSystemNotificationTask26SystemNotificationTaskProcEPv + 123
> (in DesktopServicesPriv) [0x957c846f]
>            26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>              26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      9bb7790
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
>          26  
> __ZN25TFSEventsNotificationTask28FSEventsNotificationTaskProcEPv +
> 216 (in DesktopServicesPriv) [0x957c85e8]
>            26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>              26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      7eab410
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
>          26 __ZN13TNodeSyncTask12SyncTaskProcEPv + 84 (in  
> DesktopServicesPriv)
> [0x957d3a7a]
>            26 _MPWaitOnQueue + 208 (in CarbonCore) [0x918d0654]
>              26 _TSWaitOnConditionTimedRelative + 202 (in CarbonCore)
> [0x918af8fe]
>                26 _TSWaitOnCondition + 126 (in CarbonCore)  
> [0x918d09d7]
>                  26 ___semwait_signal + 10 (in libSystem.B.dylib)  
> [0x96b7abce]
>
>  Thread id:      77faa78
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>  Thread id:      7ea8e40
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      9bb73c8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0xff5281c]
>          26 _Flash_EnforceLocalSecurity + 124992 (in Flash Player)  
> [0xff89e68]
>            26 ??? [0xff52572]
>              26 _semaphore_wait_signal_trap + 10 (in  
> libSystem.B.dylib)
> [0x96b73a2e]
>
>  Thread id:      550f128
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0xff5281c]
>          26 _Flash_EnforceLocalSecurity + 124992 (in Flash Player)  
> [0xff89e68]
>            26 ??? [0xff52572]
>              26 _semaphore_wait_signal_trap + 10 (in  
> libSystem.B.dylib)
> [0x96b73a2e]
>
>  Thread id:      7ea7790
>  User stack:
>    25 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      25 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        25 _PrivateMPEntryPoint + 56 (in CarbonCore) [0x918cebeb]
>          25 __ZN15TFolderSizeTask18FolderSizeTaskProcEPv + 104 (in
> DesktopServicesPriv) [0x957d59c4]
>            25 _MPWaitOnQueue + 208 (in CarbonCore) [0x918d0654]
>              25 _TSWaitOnConditionTimedRelative + 246 (in CarbonCore)
> [0x918af92a]
>                25 _semaphore_timedwait_signal_trap + 10 (in  
> libSystem.B.dylib)
> [0x96b73a46]
>
>
> Process:        Spotlight [120]
> Path:           /System/Library/CoreServices/Spotlight.app/Contents/ 
> MacOS/Spotlight
>
>  ADDRESS         BINARY
>  00001000        /System/Library/CoreServices/Spotlight.app/Contents/ 
> MacOS/Spotlight
>  00057000        /System/Library/PrivateFrameworks/ 
> Calculate.framework/Versions/A/Calculate
>  00068000        /System/Library/PrivateFrameworks/ 
> URLMount.framework/Versions/A/URLMount
>  00097000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/ 
> Contents/MacOS/Inquisitor
>  000d6000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
>  00314000        /System/Library/CoreServices/RawCamera.bundle/ 
> Contents/MacOS/RawCamera
>
>  Thread id:      666fc80
>  User stack:
>    26 ??? [0x2a82]
>      26 _NSApplicationMain + 574 (in AppKit) [0x9633830a]
>        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
>          26 -[NSApplication  
> nextEventMatchingMask:untilDate:inMode:dequeue:] +
> 128 (in AppKit) [0x9637208e]
>            26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
>              26 _BlockUntilNextEventMatchingListInMode + 106 (in  
> HIToolbox)
> [0x952be32d]
>                26 _ReceiveNextEventCommon + 374 (in HIToolbox)  
> [0x952be4b9]
>                  26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
> [0x952be6a0]
>                    26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
> [0x9130fd18]
>                      26 _mach_msg_trap + 10 (in libSystem.B.dylib)
> [0x96b739e6]
>
>  Thread id:      52882e8
>  User stack:
>    26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>
> Process:        SystemUIServer [129]
> Path:           /System/Library/CoreServices/SystemUIServer.app/ 
> Contents/MacOS/SystemUIServer
>
>  ADDRESS         BINARY
>  00001000        /System/Library/CoreServices/SystemUIServer.app/ 
> Contents/MacOS/SystemUIServer
>  00069000        /System/Library/PrivateFrameworks/ 
> SystemUIPlugin.framework/Versions/A/SystemUIPlugin
>  00077000        /System/Library/PrivateFrameworks/ 
> NetworkConfig.framework/Versions/A/NetworkConfig
>  000cb000        /System/Library/PrivateFrameworks/ 
> ICANotifications.framework/Versions/A/ICANotifications
>  000f5000        /System/Library/PrivateFrameworks/iPod.framework/ 
> Versions/A/iPod
>  00100000        /System/Library/PrivateFrameworks/ 
> BezelServices.framework/Versions/A/BezelServices
>  0010a000        /System/Library/Frameworks/DiscRecording.framework/ 
> Versions/A/DiscRecording
>  0023e000        /System/Library/PrivateFrameworks/ 
> DiskImages.framework/Versions/A/DiskImages
>  0039c000        /System/Library/PrivateFrameworks/ 
> Apple80211.framework/Versions/A/Apple80211
>  003d4000        /System/Library/Frameworks/AppleTalk.framework/ 
> Versions/A/AppleTalk
>  003e5000        /System/Library/PrivateFrameworks/ 
> MediaKit.framework/Versions/A/MediaKit
>  0042c000        /usr/lib/libcurl.4.dylib
>  00477000        /Library/InputManagers/Inquisitor/Inquisitor.bundle/ 
> Contents/MacOS/Inquisitor
>  004d9000        /Applications/iCal.app/Contents/Resources/ 
> iCalDockExtra.bundle/Contents/MacOS/iCalDockExtra
>  004e7000        /System/Library/Extensions/AudioIPCDriver.kext/ 
> Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn
>  004f0000        /System/Library/Extensions/AppleHDA.kext/Contents/ 
> PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn
>  00700000        /System/Library/CoreServices/RawCamera.bundle/ 
> Contents/MacOS/RawCamera
>  0b1a2000        /System/Library/CoreServices/Menu
> Extras/AirPort.menu/Contents/MacOS/AirPort
>  0b1d1000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
>  0b218000        /System/Library/CoreServices/Menu
> Extras/TimeMachine.menu/Contents/MacOS/TimeMachine
>  0b263000        /System/Library/PrivateFrameworks/ 
> Apple80211.framework/Versions/A/Resources/ClientController.bundle/ 
> Contents/MacOS/ClientController
>  0b284000        /System/Library/PrivateFrameworks/ 
> EAP8021X.framework/Versions/A/EAP8021X
>  0d463000        /System/Library/Extensions/IOFireWireFamily.kext/ 
> Contents/PlugIns/IOFireWireLib.plugin/Contents/MacOS/IOFireWireLib
>  0d99d000        /System/Library/PrivateFrameworks/ 
> InternetConnect.framework/Versions/A/InternetConnect
>
>  Thread id:      5a93b58
>  User stack:
>    26 ??? [0x52c6]
>      26 ??? [0x57c4]
>        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
>          26 -[NSApplication  
> nextEventMatchingMask:untilDate:inMode:dequeue:] +
> 128 (in AppKit) [0x9637208e]
>            26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
>              26 _BlockUntilNextEventMatchingListInMode + 106 (in  
> HIToolbox)
> [0x952be32d]
>                26 _ReceiveNextEventCommon + 374 (in HIToolbox)  
> [0x952be4b9]
>                  26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
> [0x952be6a0]
>                    26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
> [0x9130fd18]
>                      26 _mach_msg_trap + 10 (in libSystem.B.dylib)
> [0x96b739e6]
>
>  Thread id:      666f128
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __StaticProcessIOObjectsArray + 95 (in ICANotifications)  
> [0xd3eaa]
>          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      666ed60
>  User stack:
>    26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>  Thread id:      666e208
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 ??? [0x25e43]
>              26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      666c000
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __ZN9CAPThread5EntryEPS_ + 96 (in CoreAudio) [0x91d99300]
>          26 __ZN10HALRunLoop9OwnThreadEPv + 160 (in CoreAudio)  
> [0x91d99464]
>            26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>              26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      528b7d8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _fe_fragment_thread + 54 (in QuartzCore) [0x95fe1121]
>          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      6b9ac80
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>  Thread id:      c79a7d8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 -[NSUIHeartBeat _heartBeatThread:] + 753 (in AppKit)
> [0x963d87f0]
>              26 -[NSConditionLock lockWhenCondition:] + 69 (in  
> Foundation)
> [0x94c3b275]
>                26 -[NSConditionLock lockWhenCondition:beforeDate:] +  
> 144 (in
> Foundation) [0x94c3b310]
>                  26 -[NSCondition waitUntilDate:] + 236 (in  
> Foundation)
> [0x94c3b4fc]
>                    26 _semaphore_timedwait_signal_trap + 10 (in
> libSystem.B.dylib) [0x96b73a46]
>
>
> Process:        UserEventAgent [121]
> Path:           /usr/sbin/UserEventAgent
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/UserEventAgent
>  00014000        /System/Library/UserEventPlugins/ 
> AirPortUserAgent.plugin/Contents/MacOS/AirPortUserAgent
>  0001d000        /System/Library/UserEventPlugins/alfUIplugin.plugin/ 
> Contents/MacOS/alfUIplugin
>  00022000        /System/Library/UserEventPlugins/ 
> AppleHIDMouseAgent.plugin/Contents/MacOS/AppleHIDMouseAgent
>  00038000        /System/Library/PrivateFrameworks/ 
> Apple80211.framework/Versions/A/Apple80211
>  00070000        /System/Library/UserEventPlugins/BluetoothUserAgent- 
> Plugin.plugin/Contents/MacOS/BluetoothUserAgent-Plugin
>  0007a000        /System/Library/Extensions/AudioIPCDriver.kext/ 
> Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn
>  00083000        /System/Library/Extensions/AppleHDA.kext/Contents/ 
> PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn
>  0008e000        /System/Library/UserEventPlugins/ 
> BTMMPortInUseAgent.plugin/Contents/MacOS/BTMMPortInUseAgent
>  00095000        /System/Library/UserEventPlugins/ 
> iCalAlarmAgent.plugin/Contents/MacOS/iCalAlarmAgent
>  000a0000        /System/Library/UserEventPlugins/ 
> ParentalControlsUEAPlugin.plugin/Contents/MacOS/ 
> ParentalControlsUEAPlugin
>  000aa000        /System/Library/UserEventPlugins/SCMonitor.plugin/ 
> Contents/MacOS/SCMonitor
>
>  Thread id:      666f8b8
>  User stack:
>    26 ??? [0x1afa]
>      26 ??? [0x29d7]
>        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      5a93000
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __ZN9CAPThread5EntryEPS_ + 96 (in CoreAudio) [0x91d99300]
>          26 __ZN10HALRunLoop9OwnThreadEPv + 160 (in CoreAudio)  
> [0x91d99464]
>            26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>              26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>
> Process:        WindowServer [93]
> Path:           /System/Library/Frameworks/ 
> ApplicationServices.framework/Frameworks/CoreGraphics.framework/ 
> Resources/WindowServer
>
>  ADDRESS         BINARY
>  00001000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Frameworks/CoreGraphics.framework/ 
> Resources/WindowServer
>  00019000        /System/Library/Extensions/GeForceGA.plugin/ 
> Contents/MacOS/GeForceGA
>  00400000        /System/Library/Frameworks/OpenGL.framework/ 
> Resources/GLEngine.bundle/GLEngine
>  0a000000        /System/Library/Extensions/ 
> GeForce8xxxGLDriver.bundle/Contents/MacOS/GeForce8xxxGLDriver
>  0bc35000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
>
>  Thread id:      59c0f20
>  User stack:
>    26 start + 54 (in WindowServer) [0x1fbe]
>      26 _main + 24 (in WindowServer) [0x1ff4]
>        26 _CGXGetRootAdminCredentials + 0 (in CoreGraphics)  
> [0x93b7d0e9]
>          26 _CGXServerLoop + 161 (in CoreGraphics) [0x93bedc9a]
>            26 _CGXRunOneServicesPass + 377 (in CoreGraphics)  
> [0x93be2d33]
>              25 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>              1 _mach_msg_overwrite_trap + 10 (in libSystem.B.dylib)
> [0x96b739f2]
>
>  Thread id:      4886208
>  User stack:
>    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      5a96128
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _eventThread + 499 (in CoreGraphics) [0x93bd07d9]
>          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      59c3c80
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _glvmDoWork + 162 (in libGLProgrammability.dylib)  
> [0x92a67f32]
>          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      550e208
>  User stack:
>    26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>
> Process:        autofsd [38]
> Path:           /usr/libexec/autofsd
>
>  ADDRESS         BINARY
>  00001000        /usr/libexec/autofsd
>
>  Thread id:      5197e40
>  User stack:
>    26 ??? [0x1752]
>      26 ??? [0x1d8b]
>        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>
> Process:        blued [89]
> Path:           /usr/sbin/blued
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/blued
>  00039000        /System/Library/PrivateFrameworks/ 
> BezelServices.framework/Versions/A/BezelServices
>  0004d000        /System/Library/Extensions/IOHIDFamily.kext/ 
> Contents/PlugIns/IOHIDLib.plugin/Contents/MacOS/IOHIDLib
>  000ba000        /System/Library/Frameworks/IOBluetooth.framework/ 
> Versions/A/IOBluetooth
>
>  Thread id:      59c1e40
>  User stack:
>    26 ??? [0x2cf6]
>      26 ??? [0x1ffe6]
>        26 -[NSRunLoop(NSRunLoop) run] + 84 (in Foundation)  
> [0x94c35c34]
>          26 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 213 (in  
> Foundation)
> [0x94c29b15]
>            26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>              26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>
> Process:        configd [35]
> Path:           /usr/sbin/configd
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/configd
>  0003e000        /System/Library/SystemConfiguration/ 
> PrinterNotifications.bundle/Contents/MacOS/PrinterNotifications
>  00043000        /System/Library/SystemConfiguration/ 
> PowerManagement.bundle/Contents/MacOS/PowerManagement
>  00052000        /System/Library/SystemConfiguration/ 
> DynamicPowerStep.bundle/Contents/MacOS/DynamicPowerStep
>  00057000        /System/Library/SystemConfiguration/ 
> Bluetooth.bundle/Contents/MacOS/Bluetooth
>  0005d000        /System/Library/SystemConfiguration/ 
> BatteryUpdater.bundle/Contents/MacOS/BatteryUpdater
>  00062000        /System/Library/SystemConfiguration/ 
> Apple80211Monitor.bundle/Contents/MacOS/Apple80211Monitor
>  0007a000        /System/Library/SystemConfiguration/ 
> EAPOLController.bundle/EAPOLController
>  00083000        /System/Library/SystemConfiguration/ 
> IP6Configuration.bundle/Contents/MacOS/IP6Configuration
>  00095000        /System/Library/SystemConfiguration/ 
> IPConfiguration.bundle/Contents/MacOS/IPConfiguration
>  000c1000        /System/Library/PrivateFrameworks/ 
> Apple80211.framework/Versions/A/Apple80211
>  00200000        /System/Library/SystemConfiguration/ 
> PPPController.bundle/Contents/MacOS/PPPController
>
>  Thread id:      5198998
>  User stack:
>    26 start + 54 (in configd) [0x22a6]
>      26 _main + 2394 (in configd) [0x2cd7]
>        26 _server_loop + 70 (in configd) [0x3a82]
>          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      5196000
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _plugin_exec + 1562 (in configd) [0x4d61]
>          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      5287f20
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>
> Process:        coreaudiod [107]
> Path:           /usr/sbin/coreaudiod
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/coreaudiod
>  0002e000        /System/Library/Extensions/AudioIPCDriver.kext/ 
> Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn
>  00037000        /System/Library/Extensions/AppleHDA.kext/Contents/ 
> PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn
>  00200000        /Library/QuickTime/DivX Decoder.component/Contents/ 
> MacOS/DivX
> Decoder
>  70000000        /System/Library/Components/CoreAudio.component/ 
> Contents/MacOS/CoreAudio
>
>  Thread id:      5a95998
>  User stack:
>    26 ??? [0x1e22]
>      26 ??? [0xaecb]
>        26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
>          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      4b1e2e8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __ZN9CAPThread5EntryEPS_ + 96 (in CoreAudio) [0x91d99300]
>          26 __ZN10HALRunLoop9OwnThreadEPv + 160 (in CoreAudio)  
> [0x91d99464]
>            26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>              26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>
> Process:        coreservicesd [44]
> Path:           /System/Library/CoreServices/coreservicesd
>
>  ADDRESS         BINARY
>  00001000        /System/Library/CoreServices/coreservicesd
>
>  Thread id:      5288e40
>  User stack:
>    26 ??? [0x1f6e]
>      26 __CoreServicesServerMain + 795 (in CarbonCore) [0x918ea29f]
>        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      550fc80
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _fmodWatchConsumer + 407 (in CarbonCore) [0x918f00bf]
>          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      59c0000
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 ___read + 10 (in libSystem.B.dylib) [0x96b9771a]
>  Kernel stack:
>    26 _deflate_copyright + 8631 [0x3dbe77]
>      26 __ZN9IOService21unregisterAllInterestEv + 9 [0x389fd9]
>        26 __ZN9IOService14messageClientsEmPvj + 3 [0x389d99]
>          26 _cd9660_fhtovp + 41 [0x1fe3db]
>            26 _IOHibernateSystemInit + 470 [0x37ec0a]
>              26 _IOHibernateSystemWake + 138 [0x37e922]
>                26 _stack_collect + 142 [0x1369e5]
>                  26 _stack_free + 28 [0x136778]
>
>  Thread id:      5a97048
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>
> Process:        cron [15]
> Path:           /usr/sbin/cron
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/cron
>  0000c000        /usr/lib/libutil.dylib
>
>  Thread id:      4b1ee40
>  User stack:
>    26 ??? [0x1d12]
>      26 ??? [0x224d]
>        26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>
> Process:        cupsd [14]
> Path:           /usr/sbin/cupsd
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/cupsd
>  0005d000        /usr/lib/libpam.1.dylib
>  00300000        /usr/lib/libPrintServiceQuota.dylib
>
>  Thread id:      4b1f208
>  User stack:
>    26 start + 54 (in cupsd) [0x234a]
>      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>  Thread id:      550de40
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _cupsdUpdateSystemMonitor + 2174 (in cupsd) [0x41af7]
>          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>
> Process:        diskarbitrationd [32]
> Path:           /usr/sbin/diskarbitrationd
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/diskarbitrationd
>
>  Thread id:      51994f0
>  User stack:
>    26 ??? [0x1a5a]
>      26 ??? [0x8a7a]
>        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>
> Process:        distnoted [41]
> Path:           /usr/sbin/distnoted
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/distnoted
>
>  Thread id:      4b296b0
>  User stack:
>    26 ??? [0x1ef6]
>      26 ??? [0x1f95]
>        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>
> Process:        dynamic_pager [30]
> Path:           /sbin/dynamic_pager
>
>  ADDRESS         BINARY
>
>  Thread id:      5199c80
>  User stack:
>    26 ??? [0x178a]
>      26 ??? [0x2a11]
>        26 ??? [0x2224]
>          26 ??? [0x1efd]
>            26 ??? [0x96b739e6]
>
>
> Process:        fseventsd [28]
> Path:           /System/Library/Frameworks/CoreServices.framework/ 
> Versions/A/Frameworks/CarbonCore.framework/Versions/A/Support/ 
> fseventsd
>
>  ADDRESS         BINARY
>  00001000        /System/Library/Frameworks/CoreServices.framework/ 
> Versions/A/Frameworks/CarbonCore.framework/Versions/A/Support/ 
> fseventsd
>
>  Thread id:      519a410
>  User stack:
>    26 ??? [0x25a2]
>      26 ??? [0x2fcc]
>        26 _mach_msg_overwrite_trap + 10 (in libSystem.B.dylib)  
> [0x96b739f2]
>  Kernel stack:
>    26 _cpuid_features + 84 [0x19714c]
>      26 _mach_port_extract_right + 67 [0x126e12]
>        26 _ipc_port_dngrow + 318 [0x120e9a]
>          26 _stack_collect + 142 [0x1369e5]
>            26 _stack_free + 28 [0x136778]
>
>  Thread id:      5196f20
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0xbbd9]
>          26 ??? [0xb92d]
>            26 ___semwait_signal + 10 (in libSystem.B.dylib)  
> [0x96b7abce]
>
>  Thread id:      528ac80
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0x44d6]
>          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      528a8b8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 ___read + 10 (in libSystem.B.dylib) [0x96b9771a]
>  Kernel stack:
>    26 _deflate_copyright + 8631 [0x3dbe77]
>      26 __ZN9IOService21unregisterAllInterestEv + 9 [0x389fd9]
>        26 __ZN9IOService14messageClientsEmPvj + 3 [0x389d99]
>          26 _cd9660_fhtovp + 41 [0x1fe3db]
>            26 _IOHibernateSystemInit + 470 [0x37ec0a]
>              26 _IOHibernateSystemWake + 138 [0x37e922]
>                26 _stack_collect + 142 [0x1369e5]
>                  26 _stack_free + 28 [0x136778]
>
>  Thread id:      528a4f0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0x9834]
>          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      5289d60
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>  Thread id:      5198208
>  User stack:
>    26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      52895d0
>  User stack:
>    26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      59c4048
>  User stack:
>    26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      666d6b0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0x9834]
>          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      9bb8a78
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0x9834]
>          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      5c4a4f0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0x9834]
>          26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>
> Process:        hidd [27]
> Path:           /usr/libexec/hidd
>
>  ADDRESS         BINARY
>  00001000        /usr/libexec/hidd
>
>  Thread id:      519a7d8
>  User stack:
>    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      5a964f0
>  User stack:
>    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>
> Process:        iTunes [1796]
> Path:           /Applications/iTunes.app/Contents/MacOS/iTunes
>
>  ADDRESS         BINARY
>  00001000        /Applications/iTunes.app/Contents/MacOS/iTunes
>  00fdd000        /System/Library/PrivateFrameworks/iPod.framework/ 
> Versions/A/iPod
>  00fe8000        /System/Library/PrivateFrameworks/ 
> iPodSync.framework/Versions/A/iPodSync
>  00ff8000        /Applications/iTunes.app/Contents/MacOS/../ 
> Frameworks/iPodUpdater.framework/Versions/A/iPodUpdater
>  010dc000        /System/Library/Frameworks/DiscRecording.framework/ 
> Versions/A/DiscRecording
>  01210000        /System/Library/PrivateFrameworks/vmutils.framework/ 
> Versions/A/vmutils
>  0a000000        /Library/QuickTime/DivX Decoder.component/Contents/ 
> MacOS/DivX
> Decoder
>  0bffc000        /Library/QuickTime/Flip4Mac WMV
> Import.component/Contents/MacOS/Flip4Mac WMV Import
>  0c274000        /Library/QuickTime/Flip4Mac WMV
> Advanced.component/Contents/MacOS/Flip4Mac WMV Advanced
>  0c47a000        /System/Library/QuickTime/ 
> QuickTimeFireWireDV.component/Contents/MacOS/QuickTimeFireWireDV
>  0c4c0000        /Library/QuickTime/AppleIntermediateCodec.component/ 
> Contents/MacOS/AppleIntermediateCodec
>  0c4de000        /System/Library/QuickTime/ 
> ApplePixletVideo.component/Contents/MacOS/ApplePixletVideo
>  0cc06000        /System/Library/TextEncodings/Unicode
> Encodings.bundle/Contents/MacOS/Unicode Encodings
>  0de14000        /System/Library/Extensions/AudioIPCDriver.kext/ 
> Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn
>  0de1d000        /System/Library/Extensions/AppleHDA.kext/Contents/ 
> PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn
>  0e04c000        /Library/iTunes/iTunes Plug-ins/Quartz Composer
> Visualizer.bundle/Contents/MacOS/Quartz Composer Visualizer
>  0eca5000        /System/Library/Components/AudioCodecs.component/ 
> Contents/MacOS/AudioCodecs
>  0fef0000        /System/Library/CoreServices/RawCamera.bundle/ 
> Contents/MacOS/RawCamera
>  104ef000        /System/Library/Components/PDFImporter.component/ 
> Contents/MacOS/PDFImporter
>  3c390000        /System/Library/PrivateFrameworks/ 
> MobileDevice.framework/MobileDevice
>  70000000        /System/Library/Components/CoreAudio.component/ 
> Contents/MacOS/CoreAudio
>
>  Thread id:      aa528b8
>  User stack:
>    26 ??? [0x2269]
>      26 ??? [0x2342]
>        26 ??? [0x269eba]
>          26 ??? [0x396ff]
>            26 ??? [0x26aafc]
>              26 ??? [0x26a44a]
>                26 ??? [0x1c8262]
>                  26 _WaitNextEvent + 54 (in HIToolbox) [0x95371ef5]
>                    26 _WNEInternal + 151 (in HIToolbox) [0x95371f96]
>                      26 _GetNextEventMatchingMask + 447 (in HIToolbox)
> [0x9537228f]
>                        26 _RunCurrentEventLoopInMode + 283 (in  
> HIToolbox)
> [0x952be6a0]
>                          26 _CFRunLoopRunInMode + 88 (in  
> CoreFoundation)
> [0x9130fd18]
>                            26 _mach_msg_trap + 10 (in  
> libSystem.B.dylib)
> [0x96b739e6]
>
>  Thread id:      aa515d0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __ZN9CAPThread5EntryEPS_ + 96 (in CoreAudio) [0x91d99300]
>          26 __ZN10HALRunLoop9OwnThreadEPv + 160 (in CoreAudio)  
> [0x91d99464]
>            26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>              26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      aa53048
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0x33df9d]
>          26 ??? [0x251742]
>            26 _semaphore_wait_signal_trap + 10 (in libSystem.B.dylib)
> [0x96b73a2e]
>
>  Thread id:      aa506b0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>  Thread id:      aa4f000
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0x2d9df4]
>          26 ??? [0x2d9d8b]
>            26 _accept$NOCANCEL$UNIX2003 + 10 (in libSystem.B.dylib)
> [0x96bd3036]
>  Kernel stack:
>    26 _deflate_copyright + 8631 [0x3dbe77]
>      26 __ZN16IORangeAllocator8allocateEmPmm + 118 [0x3a8f18]
>        26 _IOHibernateSystemInit + 294 [0x37eb5a]
>          26 _IOHibernateSystemSleep + 1493 [0x37e7a9]
>            26 _pmsSetStep + 313 [0x130a08]
>              26 _stack_collect + 142 [0x1369e5]
>                26 _stack_free + 28 [0x136778]
>
>  Thread id:      aa52c80
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0x2372ee]
>          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      5c4ac80
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __Z11CMMConvTaskPv + 54 (in ColorSync) [0x95dd1d92]
>          26 __Z20pthreadSemaphoreWaitP18t_pthreadSemaphore + 42 (in  
> ColorSync)
> [0x95dbf460]
>            26 ___semwait_signal + 10 (in libSystem.B.dylib)  
> [0x96b7abce]
>
>
> Process:        kextd [10]
> Path:           /usr/libexec/kextd
>
>  ADDRESS         BINARY
>  00001000        /usr/libexec/kextd
>
>  Thread id:      4b204f0
>  User stack:
>    26 ??? [0x1c2a]
>      26 ??? [0x3647]
>        26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      51985d0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0x3ced]
>          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>  Kernel stack:
>    26 _cpuid_features + 84 [0x19714c]
>      26 _mach_port_allocate_full + 78 [0x126247]
>        26 _thread_swap_exception_ports + 426 [0x12d165]
>          26 _lock_set_server_routine + 1626 [0x147b74]
>            26 _serial_keyboard_init + 11 [0x18f310]
>              26 _kernel_bootstrap + 64 [0x136ed8]
>                26 _stack_free + 28 [0x136778]
>
>
> Process:        launchd [113]
> Path:           /sbin/launchd
>
>  ADDRESS         BINARY
>  00001000        /sbin/launchd
>
>  Thread id:      5a94a78
>  User stack:
>    26 start + 54 (in launchd) [0x1a7a]
>      26 _main + 960 (in launchd) [0x24bf]
>        26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>  Kernel stack:
>    26 _cpuid_features + 84 [0x19714c]
>      26 _mach_port_extract_right + 67 [0x126e12]
>        26 _ipc_port_dngrow + 318 [0x120e9a]
>          26 _stack_collect + 142 [0x1369e5]
>            26 _stack_free + 28 [0x136778]
>
>  Thread id:      6670ba0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>  Thread id:      5a933c8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>
> Process:        launchd [1]
> Path:           /sbin/launchd
>
>  ADDRESS         BINARY
>  00001000        /sbin/launchd
>
>  Thread id:      4b1fd60
>  User stack:
>    26 start + 54 (in launchd) [0x1a7a]
>      26 _main + 960 (in launchd) [0x24bf]
>        26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>  Kernel stack:
>    26 _cpuid_features + 84 [0x19714c]
>      26 _mach_port_extract_right + 67 [0x126e12]
>        26 _ipc_port_dngrow + 318 [0x120e9a]
>          26 _stack_collect + 142 [0x1369e5]
>            26 _stack_free + 28 [0x136778]
>
>  Thread id:      4b1f5d0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>  Thread id:      48874f0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>
> Process:        loginwindow [24]
> Path:           /System/Library/CoreServices/loginwindow.app/ 
> Contents/MacOS/loginwindow
>
>  ADDRESS         BINARY
>  00001000        /System/Library/CoreServices/loginwindow.app/ 
> Contents/MacOS/loginwindow
>  00074000        /System/Library/PrivateFrameworks/Admin.framework/ 
> Versions/A/Admin
>  000be000        /System/Library/PrivateFrameworks/ 
> URLMount.framework/Versions/A/URLMount
>  000ec000        /System/Library/LoginPlugins/ 
> FSDisconnect.loginPlugin/Contents/MacOS/FSDisconnect
>  0015e000        /System/Library/PrivateFrameworks/ 
> DiskImages.framework/Versions/A/DiskImages
>  002bc000        /System/Library/PrivateFrameworks/ 
> MediaKit.framework/Versions/A/MediaKit
>  00303000        /System/Library/Frameworks/DiscRecording.framework/ 
> Versions/A/DiscRecording
>  00437000        /usr/lib/libcurl.4.dylib
>  0046c000        /System/Library/LoginPlugins/ 
> DisplayServices.loginPlugin/Contents/MacOS/DisplayServices
>  0048a000        /System/Library/LoginPlugins/ 
> BezelServices.loginPlugin/Contents/MacOS/BezelServices
>  004b7000        /System/Library/PrivateFrameworks/ 
> MachineSettings.framework/Versions/A/MachineSettings
>  004bf000        /System/Library/Extensions/IOHIDFamily.kext/ 
> Contents/PlugIns/IOHIDLib.plugin/Contents/MacOS/IOHIDLib
>  004dd000        /System/Library/Extensions/AudioIPCDriver.kext/ 
> Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn
>  004e6000        /System/Library/Extensions/AppleHDA.kext/Contents/ 
> PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn
>  007af000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/ 
> Versions/A/Resources/ATSHI.dylib
>  099df000        /Library/QuickTime/DivX Decoder.component/Contents/ 
> MacOS/DivX
> Decoder
>  0df7c000        /System/Library/CoreServices/RawCamera.bundle/ 
> Contents/MacOS/RawCamera
>  70000000        /System/Library/Components/CoreAudio.component/ 
> Contents/MacOS/CoreAudio
>  ba500000        /System/Library/CoreServices/Encodings/ 
> libGreekConverter.dylib
>
>  Thread id:      4b283c8
>  User stack:
>    26 ??? [0x5cbe]
>      26 ??? [0x1bc74]
>        26 -[NSApplication run] + 795 (in AppKit) [0x9636b0c5]
>          26 -[NSApplication  
> nextEventMatchingMask:untilDate:inMode:dequeue:] +
> 128 (in AppKit) [0x9637208e]
>            26 __DPSNextEvent + 657 (in AppKit) [0x963727d9]
>              26 _BlockUntilNextEventMatchingListInMode + 106 (in  
> HIToolbox)
> [0x952be32d]
>                26 _ReceiveNextEventCommon + 374 (in HIToolbox)  
> [0x952be4b9]
>                  26 _RunCurrentEventLoopInMode + 283 (in HIToolbox)
> [0x952be6a0]
>                    26 _CFRunLoopRunInMode + 88 (in CoreFoundation)
> [0x9130fd18]
>                      26 _mach_msg_trap + 10 (in libSystem.B.dylib)
> [0x96b739e6]
>
>  Thread id:      5a94e40
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 __ZN9CAPThread5EntryEPS_ + 96 (in CoreAudio) [0x91d99300]
>          26 __ZN10HALRunLoop9OwnThreadEPv + 160 (in CoreAudio)  
> [0x91d99464]
>            26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>              26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      5a93f20
>  User stack:
>    26 _mach_msg_overwrite_trap + 10 (in libSystem.B.dylib)  
> [0x96b739f2]
>
>  Thread id:      6b98a78
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 -[NSUIHeartBeat _heartBeatThread:] + 753 (in AppKit)
> [0x963d87f0]
>              26 -[NSConditionLock lockWhenCondition:] + 69 (in  
> Foundation)
> [0x94c3b275]
>                26 -[NSConditionLock lockWhenCondition:beforeDate:] +  
> 144 (in
> Foundation) [0x94c3b310]
>                  26 -[NSCondition waitUntilDate:] + 236 (in  
> Foundation)
> [0x94c3b4fc]
>                    26 _semaphore_timedwait_signal_trap + 10 (in
> libSystem.B.dylib) [0x96b73a46]
>
>
> Process:        mDNSResponder [23]
> Path:           /usr/sbin/mDNSResponder
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/mDNSResponder
>
>  Thread id:      4b28790
>  User stack:
>    26 start + 41 (in mDNSResponder) [0x1b69]
>      26 __start + 210 (in mDNSResponder) [0x1c3c]
>        26 _main + 2584 (in mDNSResponder) [0x34e91]
>          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      550e5d0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>
> Process:        mds [22]
> Path:           /System/Library/Frameworks/CoreServices.framework/ 
> Frameworks/Metadata.framework/Support/mds
>
>  ADDRESS         BINARY
>  00001000        /System/Library/Frameworks/CoreServices.framework/ 
> Frameworks/Metadata.framework/Support/mds
>  000d6000        /System/Library/PrivateFrameworks/ 
> MDSChannel.framework/Versions/A/MDSChannel
>  00149000        /System/Library/PrivateFrameworks/ 
> SpotlightIndex.framework/Versions/A/SpotlightIndex
>  04290000        /usr/lib/liblangid.dylib
>  05151000        /usr/lib/libmecab.1.0.0.dylib
>  05550000        /usr/lib/libgermantok.dylib
>
>  Thread id:      4b28b58
>  User stack:
>    26 ??? [0x5af6]
>      26 ??? [0xe048]
>        26 ??? [0x57de1]
>          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      550c790
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 ??? [0x57baf]
>              26 ??? [0xcfa2]
>                26 ??? [0x57de1]
>                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                    26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      550cf20
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 ??? [0x57baf]
>              26 ??? [0xcfc5]
>                26 ??? [0x57de1]
>                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                    26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      550d2e8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 ??? [0x57baf]
>              26 ??? [0xcfe8]
>                26 ??? [0x57de1]
>                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                    26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      550d6b0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 ??? [0x57baf]
>              26 ??? [0xd00b]
>                26 ??? [0x57de1]
>                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                    26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      59c3128
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 ??? [0x57baf]
>              26 ??? [0xd02e]
>                26 ??? [0x57de1]
>                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                    26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      550da78
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        23 ??? [0x9d8e]
>          23 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>        2 ??? [0x9cf1]
>          2 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>        1 ??? [0x9e0f]
>          1 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>  Thread id:      59c16b0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 ___read + 10 (in libSystem.B.dylib) [0x96b9771a]
>  Kernel stack:
>    26 _deflate_copyright + 8631 [0x3dbe77]
>      26 __ZN9IOService21unregisterAllInterestEv + 9 [0x389fd9]
>        26 __ZN9IOService14messageClientsEmPvj + 3 [0x389d99]
>          26 _cd9660_fhtovp + 41 [0x1fe3db]
>            26 _IOHibernateSystemInit + 470 [0x37ec0a]
>              26 _IOHibernateSystemWake + 138 [0x37e922]
>                26 _stack_collect + 142 [0x1369e5]
>                  26 _stack_free + 28 [0x136778]
>
>  Thread id:      528bba0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>  Thread id:      59c0790
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 ??? [0x57baf]
>              26 ??? [0x865ee]
>                26 ??? [0x57de1]
>                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                    26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      59c4410
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 ??? [0x57baf]
>              26 ??? [0x53a34]
>                26 ??? [0x57de1]
>                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                    26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      550ed60
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 ??? [0x57baf]
>              26 ??? [0x53a34]
>                26 ??? [0x57de1]
>                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                    26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      5a977d8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 ??? [0x57baf]
>              26 ??? [0x53a34]
>                26 ??? [0x57de1]
>                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                    26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      5a97410
>  User stack:
>    26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      5a95d60
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 -[NSThread main] + 45 (in Foundation) [0x94bf55ad]
>            26 ??? [0x57baf]
>              26 ??? [0x440cf]
>                26 ??? [0x57de1]
>                  26 _CFRunLoopRunInMode + 88 (in CoreFoundation)  
> [0x9130fd18]
>                    26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      7eab048
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _setattr_runLoop + 68 (in SpotlightIndex) [0x17634e]
>          26 _runLoop + 77 (in SpotlightIndex) [0x176262]
>            26 _si_scheduler_run_waiting_timeout + 163 (in  
> SpotlightIndex)
> [0x189954]
>              26 _semaphore_timedwait_signal_trap + 10 (in  
> libSystem.B.dylib)
> [0x96b73a46]
>
>  Thread id:      aa4ff20
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _flush_runLoop + 65 (in SpotlightIndex) [0x17646f]
>          26 _runLoop + 77 (in SpotlightIndex) [0x176262]
>            26 _si_scheduler_run_waiting_timeout + 163 (in  
> SpotlightIndex)
> [0x189954]
>              26 _semaphore_timedwait_signal_trap + 10 (in  
> libSystem.B.dylib)
> [0x96b73a46]
>
>
> Process:        mdworker [2246]
> Path:           /System/Library/Frameworks/CoreServices.framework/ 
> Frameworks/Metadata.framework/Versions/A/Support/mdworker
>
>  ADDRESS         BINARY
>  00001000        /System/Library/Frameworks/CoreServices.framework/ 
> Frameworks/Metadata.framework/Versions/A/Support/mdworker
>  00050000        /System/Library/Spotlight/Mail.mdimporter/Contents/ 
> MacOS/Mail
>  00057000        /System/Library/Frameworks/ 
> ExceptionHandling.framework/Versions/A/ExceptionHandling
>  00060000        /System/Library/Frameworks/ 
> LatentSemanticMapping.framework/Versions/A/LatentSemanticMapping
>  00099000        /System/Library/Spotlight/Bookmarks.mdimporter/ 
> Contents/MacOS/Bookmarks
>  0009f000        /System/Library/Spotlight/Application.mdimporter/ 
> Contents/MacOS/Application
>  000b3000        /System/Library/Spotlight/RichText.mdimporter/ 
> Contents/MacOS/RichText
>  019c3000        /System/Library/Frameworks/Message.framework/ 
> Versions/B/Message
>  ba300000        /System/Library/CoreServices/Encodings/ 
> libCyrillicConverter.dylib
>  ba500000        /System/Library/CoreServices/Encodings/ 
> libGreekConverter.dylib
>
>  Thread id:      72b0ba0
>  User stack:
>    26 ??? [0x27ea]
>      26 ??? [0x8b8b]
>        26 ??? [0xbd76]
>          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      9bb9208
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0xa625]
>          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      9bba128
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>  Thread id:      550e998
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>
> Process:        mdworker [2406]
> Path:           /System/Library/Frameworks/CoreServices.framework/ 
> Frameworks/Metadata.framework/Versions/A/Support/mdworker
>
>  ADDRESS         BINARY
>  00001000        /System/Library/Frameworks/CoreServices.framework/ 
> Frameworks/Metadata.framework/Versions/A/Support/mdworker
>
>  Thread id:      aa50a78
>  User stack:
>    26 ??? [0x27ea]
>      26 ??? [0x8b8b]
>        26 ??? [0xbd76]
>          26 _CFRunLoopRunInMode + 88 (in CoreFoundation) [0x9130fd18]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      5c4bba0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0xa625]
>          26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      9bbb410
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ___NSThread__main__ + 308 (in Foundation) [0x94bf5154]
>          26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>
> Process:        nmbd [2288]
> Path:           /usr/sbin/nmbd
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/nmbd
>  000fe000        /System/Library/PrivateFrameworks/ 
> ByteRangeLocking.framework/Versions/A/ByteRangeLocking
>
>  Thread id:      528b048
>  User stack:
>    26 start + 54 (in nmbd) [0x274a]
>      26 _main + 2581 (in nmbd) [0x422e]
>        26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib)  
> [0x96bc3b3a]
>
>
> Process:        notifyd [11]
> Path:           /usr/sbin/notifyd
>
>  ADDRESS         BINARY
>
>  Thread id:      4b1df20
>  User stack:
>    26 ??? [0x1fc6]
>      26 ??? [0x96ba44c6]
>
>  Thread id:      4b1e6b0
>  User stack:
>    26 ??? [0x96ba4b12]
>      26 ??? [0x96ba4c55]
>        26 ??? [0x96b739e6]
>
>
> Process:        ntpd [13]
> Path:           /usr/sbin/ntpd
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/ntpd
>
>  Thread id:      4b2a5d0
>  User stack:
>    26 ??? [0x203a]
>      26 ___sigsuspend + 10 (in libSystem.B.dylib) [0x96bcf89a]
>
>
> Process:        pboard [123]
> Path:           /usr/sbin/pboard
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/pboard
>
>  Thread id:      6670410
>  User stack:
>    26 ___sigsuspend + 10 (in libSystem.B.dylib) [0x96bcf89a]
>
>
> Process:        securityd [20]
> Path:           /usr/sbin/securityd
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/securityd
>  000ba000        /System/Library/Frameworks/PCSC.framework/Versions/ 
> A/PCSC
>
>  Thread id:      4b292e8
>  User stack:
>    26 ??? [0x11b4e]
>      26 ??? [0x239c]
>        26 ??? [0x3970]
>          26 _mach_msg_overwrite_trap + 10 (in libSystem.B.dylib)  
> [0x96b739f2]
>
>  Thread id:      72acf20
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 ??? [0xa3fc]
>          26 ??? [0xa44e]
>            26 _mach_msg_overwrite_trap + 10 (in libSystem.B.dylib)
> [0x96b739f2]
>
>
> Process:        socketfilterfw [39]
> Path:           /usr/libexec/ApplicationFirewall/socketfilterfw
>
>  ADDRESS         BINARY
>  00001000        /usr/libexec/ApplicationFirewall/socketfilterfw
>
>  Thread id:      5197a78
>  User stack:
>    26 ??? [0x20f2]
>      26 ??? [0x77ae]
>        26 ??? [0x591a]
>          26 ??? [0x721d]
>            26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>              26 _mach_msg_trap + 10 (in libSystem.B.dylib)  
> [0x96b739e6]
>
>  Thread id:      5198d60
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>  Thread id:      52886b0
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 ___kevent + 10 (in libSystem.B.dylib) [0x96ba44c6]
>
>
> Process:        syslogd [18]
> Path:           /usr/sbin/syslogd
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/syslogd
>
>  Thread id:      4b29a78
>  User stack:
>    26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>  Thread id:      5196b58
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      5196790
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _db_worker + 144 (in syslogd) [0x65d3]
>          26 _db_dequeue + 56 (in syslogd) [0x64e3]
>            26 ___semwait_signal + 10 (in libSystem.B.dylib)  
> [0x96b7abce]
>
>  Thread id:      51963c8
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 __pthread_start + 321 (in libSystem.B.dylib) [0x96ba4c55]
>        26 _launchd_drain + 73 (in syslogd) [0x5617]
>          26 __vprocmgr_log_drain + 75 (in libSystem.B.dylib)  
> [0x96c96606]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>
> Process:        update [16]
> Path:           /usr/sbin/update
>
>  ADDRESS         BINARY
>  00001000        /usr/sbin/update
>
>  Thread id:      4b2a208
>  User stack:
>    26 ??? [0x1f3a]
>      26 ??? [0x1fd9]
>        26 ___semwait_signal + 10 (in libSystem.B.dylib) [0x96b7abce]
>
>
> Process:        usbmuxd [1803]
> Path:           /System/Library/PrivateFrameworks/ 
> MobileDevice.framework/Versions/A/Resources/usbmuxd
>
>  ADDRESS         BINARY
>  00001000        /System/Library/PrivateFrameworks/ 
> MobileDevice.framework/Versions/A/Resources/usbmuxd
>
>  Thread id:      72b0048
>  User stack:
>    26 ??? [0x2435]
>      26 ??? [0x250e]
>        26 ??? [0x2acb]
>          26 _CFRunLoopRun + 84 (in CoreFoundation) [0x9130fd74]
>            26 _mach_msg_trap + 10 (in libSystem.B.dylib) [0x96b739e6]
>
>  Thread id:      aa51998
>  User stack:
>    26 _thread_start + 34 (in libSystem.B.dylib) [0x96ba4b12]
>      26 _select$DARWIN_EXTSN + 10 (in libSystem.B.dylib) [0x96bc3b3a]
>
>
> Process:        vi [2377]
> Path:           /usr/bin/vi
>
>  ADDRESS         BINARY
>  00001000        /usr/bin/vi
>
>  Thread id:      72b0410
>  User stack:
>    26 ??? [0x2302]
>      26 ??? [0x6dc6b]
>        26 ??? [0x6b9ce]
>          26 ??? [0x96a3d]
>            26 ??? [0x63edd]
>              26 ??? [0x63ae7]
>                26 ??? [0x638f7]
>                  26 ??? [0x609b7]
>                    26 ??? [0xfa559]
>                      26 _select$DARWIN_EXTSN + 10 (in  
> libSystem.B.dylib)
> [0x96bc3b3a]
>
>
> Process:        kernel_task [0]
> Path:           kernel_task
>
>  ADDRESS         BINARY
>
>  Thread id:      516120
>
>  Thread id:      4888ba0
>
>  Thread id:      48887d8
>
>  Thread id:      4888410
>
>  Thread id:      4888048
>
>  Thread id:      4887c80
>
>  Thread id:      48878b8
>
>  Thread id:      4887128
>
>  Thread id:      48856b0
>  Kernel stack:
>    26 com.apple.driver.AppleIntelCPUPowerManagement (9.33.0) + 28059
> [0x2f20cd9b]
>      26 _stack_collect + 142 [0x1369e5]
>        26 _stack_free + 28 [0x136778]
>
>  Thread id:      48852e8
>
>  Thread id:      4884f20
>  Kernel stack:
>    26 _advisory_read + 1216 [0x1c6eb9]
>      26 _IOHibernateSystemInit + 294 [0x37eb5a]
>        26 _IOHibernateSystemSleep + 1493 [0x37e7a9]
>          26 _pmsSetStep + 313 [0x130a08]
>            26 _stack_collect + 142 [0x1369e5]
>              26 _stack_free + 28 [0x136778]
>
>  Thread id:      4884b58
>
>  Thread id:      4884790
>
>  Thread id:      4885e40
>
>  Thread id:      4b2cba0
>
>  Thread id:      4b21048
>
>  Thread id:      4b1d000
>
>  Thread id:      4b1db58
>
>  Thread id:      48865d0
>
>  Thread id:      4b2c410
>
>  Thread id:      4b20128
>  Kernel stack:
>    26 _rt_newmaddrmsg + 707 [0x21471a]
>      26 _IOHibernateSystemInit + 294 [0x37eb5a]
>        26 _IOHibernateSystemSleep + 1493 [0x37e7a9]
>          26 _pmsSetStep + 313 [0x130a08]
>            26 _stack_collect + 142 [0x1369e5]
>              26 _stack_free + 28 [0x136778]
>
>  Thread id:      4b21410
>
>  Thread id:      4b21ba0
>
>  Thread id:      4886998
>
>  Thread id:      4b2b8b8
>
>  Thread id:      4884000
>
>  Thread id:      4b208b8
>
>  Thread id:      4b2c7d8
>
>  Thread id:      4b1d3c8
>
>  Thread id:      4b2c048
>
>  Thread id:      4b20c80
>
>  Thread id:      4b2b4f0
>
>  Thread id:      4b217d8
>
>  Thread id:      4b2b128
>
>  Thread id:      4b1ea78
>  Kernel stack:
>    26 __ZN9OSBooleanD1Ev + 2 [0x3bfed2]
>      26 _mach_port_names + 713 [0x125f12]
>        26 _ipc_port_dngrow + 318 [0x120e9a]
>          26 _stack_collect + 142 [0x1369e5]
>            26 _stack_free + 28 [0x136778]
>
>  Thread id:      4b1d790
>
>  Thread id:      4b1f998
>
>  Thread id:      4886d60
>
>  Thread id:      4b2ad60
>
>  Thread id:      4b2a998
>
>  Thread id:      528a128
>  Kernel stack:
>    26 _rt_newmaddrmsg + 707 [0x21471a]
>      26 _IOHibernateSystemInit + 294 [0x37eb5a]
>        26 _IOHibernateSystemSleep + 1493 [0x37e7a9]
>          26 _pmsSetStep + 313 [0x130a08]
>            26 _stack_collect + 142 [0x1369e5]
>              26 _stack_free + 28 [0x136778]
>
>  Thread id:      5287b58
>
>  Thread id:      59c38b8
>
>  Thread id:      59c2d60
>  Kernel stack:
>    26 _rt_newmaddrmsg + 707 [0x21471a]
>      26 _IOHibernateSystemInit + 294 [0x37eb5a]
>        26 _IOHibernateSystemSleep + 1493 [0x37e7a9]
>          26 _pmsSetStep + 313 [0x130a08]
>            26 _stack_collect + 142 [0x1369e5]
>              26 _stack_free + 28 [0x136778]
>
>  Thread id:      51976b0
>
>  Thread id:      59c47d8
>
>  Thread id:      59c4ba0
>
>  Thread id:      550c3c8
>
>  Thread id:      550c000
>
>  Thread id:      59c03c8
>
>  Thread id:      5a97ba0
>
>  Thread id:      59c0b58
>  Kernel stack:
>    26 com.apple.filesystems.autofs (2.0.0d1) + 24885 [0x36a00135]
>      26 _IOHibernateSystemInit + 294 [0x37eb5a]
>        26 _IOHibernateSystemSleep + 1448 [0x37e77c]
>          26 _pmsSetStep + 463 [0x130a9e]
>            26 _stack_collect + 142 [0x1369e5]
>              26 _stack_free + 28 [0x136778]
>
>  Thread id:      5a968b8
>
>  Thread id:      7eabba0
>
>  Thread id:      5c4b7d8
>
>  Thread id:      59c34f0
>
>  Thread id:      77fa6b0
>
>
> SHARED FRAMEWORK AREA
> ADDRESS         BINARY
> 90003000        /System/Library/Frameworks/InstantMessage.framework/ 
> Frameworks/IMUtils.framework/Versions/A/IMUtils
> 90017000        /System/Library/Frameworks/CoreVideo.framework/ 
> Versions/A/CoreVideo
> 9002e000        /System/Library/PrivateFrameworks/ 
> PasswordServer.framework/Versions/A/PasswordServer
> 90073000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> SpeechSynthesis.framework/Versions/A/SpeechSynthesis
> 90084000        /System/Library/PrivateFrameworks/ 
> ISSupport.framework/Versions/A/ISSupport
> 900ea000        /System/Library/Frameworks/SyncServices.framework/ 
> Versions/A/SyncServices
> 901ca000        /usr/lib/libbsm.dylib
> 901d2000        /System/Library/QuickTime/ 
> QuickTimeComponents.component/Contents/MacOS/QuickTimeComponents
> 9115a000        /System/Library/Frameworks/QuickLook.framework/ 
> Versions/A/QuickLook
> 91178000        /System/Library/Frameworks/AudioToolbox.framework/ 
> Versions/A/AudioToolbox
> 9129d000        /System/Library/Frameworks/CoreFoundation.framework/ 
> Versions/A/CoreFoundation
> 913d0000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreText.framework/Versions/A/CoreText
> 9142b000        /System/Library/Frameworks/OpenGL.framework/Versions/ 
> A/Libraries/libGLImage.dylib
> 91469000        /System/Library/PrivateFrameworks/ 
> DotMacLegacy.framework/Versions/A/DotMacLegacy
> 91475000        /System/Library/Frameworks/Accelerate.framework/ 
> Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib
> 91834000        /System/Library/PrivateFrameworks/ 
> DataDetectorsCore.framework/Versions/A/DataDetectorsCore
> 91883000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> ImageIO.framework/Versions/A/Resources/libRadiance.dylib
> 91886000        /System/Library/Frameworks/CoreServices.framework/ 
> Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore
> 91b60000        /System/Library/PrivateFrameworks/ 
> CrashReporterSupport.framework/Versions/A/CrashReporterSupport
> 91b63000        /System/Library/PrivateFrameworks/FileSync.framework/ 
> Versions/A/FileSync
> 91b6d000        /usr/lib/libgcc_s.1.dylib
> 91b75000        /usr/lib/libsasl2.2.dylib
> 91b85000        /System/Library/Frameworks/IOKit.framework/Versions/ 
> A/IOKit
> 91c11000        /System/Library/Frameworks/Quartz.framework/Versions/ 
> A/Frameworks/PDFKit.framework/Versions/A/PDFKit
> 91c84000        /System/Library/Frameworks/OpenGL.framework/Versions/ 
> A/Libraries/libGL.dylib
> 91c91000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libCGATS.A.dylib
> 91c99000        /System/Library/PrivateFrameworks/ 
> DisplayServices.framework/Versions/A/DisplayServices
> 91c9f000        /System/Library/Frameworks/Accelerate.framework/ 
> Versions/A/Accelerate
> 91ca0000        /System/Library/Frameworks/Cocoa.framework/Versions/ 
> A/Cocoa
> 91ca1000        /System/Library/Frameworks/Carbon.framework/Versions/ 
> A/Frameworks/Ink.framework/Versions/A/Ink
> 91d35000        /System/Library/Frameworks/CoreServices.framework/ 
> Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata
> 91d7b000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/ApplicationServices
> 91d7c000        /System/Library/Frameworks/CoreAudio.framework/ 
> Versions/A/CoreAudio
> 91df9000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/QD.framework/ 
> Versions/A/QD
> 91ea1000        /System/Library/Frameworks/AddressBook.framework/ 
> Versions/A/AddressBook
> 92020000        /System/Library/PrivateFrameworks/ 
> DMNotification.framework/Versions/A/DMNotification
> 9202e000        /System/Library/PrivateFrameworks/Backup.framework/ 
> Versions/A/Backup
> 92034000        /System/Library/Frameworks/QuickTime.framework/ 
> Versions/A/QuickTime
> 92349000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> LangAnalysis.framework/Versions/A/LangAnalysis
> 9235a000        /usr/lib/libiconv.2.dylib
> 9244f000        /usr/lib/system/libmathCommon.A.dylib
> 92454000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> ImageIO.framework/Versions/A/Resources/libPng.dylib
> 92470000        /System/Library/Frameworks/Quartz.framework/Versions/ 
> A/Frameworks/ImageKit.framework/Versions/A/ImageKit
> 925a8000        /System/Library/Frameworks/AudioUnit.framework/ 
> Versions/A/AudioUnit
> 925a9000        /System/Library/PrivateFrameworks/ 
> MonitorPanel.framework/Versions/A/MonitorPanel
> 925aa000        /System/Library/PrivateFrameworks/ 
> FamilyControls.framework/Versions/A/FamilyControls
> 925fb000        /System/Library/Frameworks/Carbon.framework/Versions/ 
> A/Frameworks/ImageCapture.framework/Versions/A/ImageCapture
> 92610000        /System/Library/Frameworks/Accelerate.framework/ 
> Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
> 92a21000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> ImageIO.framework/Versions/A/Resources/libJPEG.dylib
> 92a41000        /System/Library/Frameworks/OpenGL.framework/Versions/ 
> A/Libraries/libGLProgrammability.dylib
> 92f0e000        /System/Library/PrivateFrameworks/ 
> WhitePages.framework/Versions/A/WhitePages
> 92f7b000        /usr/lib/libncurses.5.4.dylib
> 92fab000        /System/Library/Frameworks/Carbon.framework/Versions/ 
> A/Frameworks/CommonPanels.framework/Versions/A/CommonPanels
> 92fb1000        /System/Library/PrivateFrameworks/Shortcut.framework/ 
> Versions/A/Shortcut
> 92fda000        /System/Library/PrivateFrameworks/ 
> QuickLookUI.framework/Versions/A/QuickLookUI
> 9302a000        /System/Library/PrivateFrameworks/ 
> CoreMediaAuthoringPrivate.framework/Versions/A/ 
> CoreMediaAuthoringPrivate
> 9302e000        /System/Library/Frameworks/Carbon.framework/Versions/ 
> A/Frameworks/Help.framework/Versions/A/Help
> 93032000        /System/Library/Frameworks/Carbon.framework/Versions/ 
> A/Frameworks/SecurityHI.framework/Versions/A/SecurityHI
> 93035000        /usr/lib/libssl.0.9.7.dylib
> 9305a000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> ImageIO.framework/Versions/A/ImageIO
> 931a0000        /System/Library/Frameworks/InstantMessage.framework/ 
> Versions/A/InstantMessage
> 931bd000        /usr/lib/libstdc++.6.dylib
> 9321b000        /usr/lib/libicucore.A.dylib
> 93354000        /System/Library/Frameworks/DiskArbitration.framework/ 
> Versions/A/DiskArbitration
> 9335d000        /System/Library/PrivateFrameworks/ 
> CoreMediaPrivate.framework/Versions/A/CoreMediaPrivate
> 93388000        /System/Library/Frameworks/ 
> SecurityFoundation.framework/Versions/A/SecurityFoundation
> 933c2000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> HIServices.framework/Versions/A/HIServices
> 93413000        /System/Library/Frameworks/CoreServices.framework/ 
> Versions/A/Frameworks/LaunchServices.framework/Versions/A/ 
> LaunchServices
> 934a0000        /System/Library/Frameworks/Carbon.framework/Versions/ 
> A/Frameworks/OpenScripting.framework/Versions/A/OpenScripting
> 93722000        /System/Library/Frameworks/Carbon.framework/Versions/ 
> A/Carbon
> 93723000        /System/Library/PrivateFrameworks/ 
> OpenDirectory.framework/Versions/A/Frameworks/ 
> CFOpenDirectory.framework/Versions/A/CFOpenDirectory
> 93735000        /System/Library/PrivateFrameworks/ 
> InstallServer.framework/Versions/A/InstallServer
> 93736000        /System/Library/PrivateFrameworks/Bom.framework/ 
> Versions/A/Bom
> 9376b000        /System/Library/Frameworks/ 
> SystemConfiguration.framework/Versions/A/SystemConfiguration
> 937a3000        /System/Library/Frameworks/Accelerate.framework/ 
> Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib
> 937d1000        /System/Library/Frameworks/CoreData.framework/ 
> Versions/A/CoreData
> 938b7000        /System/Library/Frameworks/CoreServices.framework/ 
> Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices
> 93972000        /System/Library/Frameworks/PubSub.framework/Versions/ 
> A/PubSub
> 93a74000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/CoreGraphics
> 9410e000        /System/Library/Frameworks/vecLib.framework/Versions/ 
> A/vecLib
> 9410f000        /System/Library/Frameworks/JavaScriptCore.framework/ 
> Versions/A/JavaScriptCore
> 941b9000        /System/Library/Frameworks/Kerberos.framework/ 
> Versions/A/Kerberos
> 9426a000        /System/Library/Frameworks/Carbon.framework/Versions/ 
> A/Frameworks/NavigationServices.framework/Versions/A/ 
> NavigationServices
> 942ad000        /System/Library/QuickTime/QuickTimeH264.component/ 
> Contents/MacOS/QuickTimeH264
> 94381000        /System/Library/Frameworks/CoreServices.framework/ 
> Versions/A/Frameworks/CFNetwork.framework/Versions/A/CFNetwork
> 943f9000        /System/Library/PrivateFrameworks/CoreUI.framework/ 
> Versions/A/CoreUI
> 94434000        /System/Library/Frameworks/WebKit.framework/Versions/ 
> A/Frameworks/WebCore.framework/Versions/A/WebCore
> 9494b000        /System/Library/Frameworks/Carbon.framework/Versions/ 
> A/Frameworks/CarbonSound.framework/Versions/A/CarbonSound
> 94956000        /System/Library/Frameworks/WebKit.framework/Versions/ 
> A/WebKit
> 94a12000        /usr/lib/libcrypto.0.9.7.dylib
> 94ac5000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> ImageIO.framework/Versions/A/Resources/libTIFF.dylib
> 94b05000        /System/Library/PrivateFrameworks/ 
> DataDetectors.framework/Versions/A/DataDetectors
> 94b1d000        /usr/lib/libz.1.dylib
> 94b2c000        /usr/lib/libbz2.1.0.dylib
> 94b39000        /usr/lib/libtidy.A.dylib
> 94b70000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> PrintCore.framework/Versions/A/PrintCore
> 94beb000        /System/Library/Frameworks/Foundation.framework/ 
> Versions/C/Foundation
> 94e66000        /System/Library/Frameworks/Accelerate.framework/ 
> Versions/A/Frameworks/vImage.framework/Versions/A/vImage
> 94f2e000        /usr/lib/libresolv.9.dylib
> 94f4d000        /System/Library/Frameworks/CoreServices.framework/ 
> Versions/A/Frameworks/AE.framework/Versions/A/AE
> 94f7d000        /usr/lib/libauto.dylib
> 94fa9000        /System/Library/PrivateFrameworks/ 
> iLifeMediaBrowser.framework/Versions/A/iLifeMediaBrowser
> 9501c000        /System/Library/PrivateFrameworks/ 
> DSObjCWrappers.framework/Versions/A/DSObjCWrappers
> 9502c000        /System/Library/Frameworks/Accelerate.framework/ 
> Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib
> 950aa000        /System/Library/Frameworks/Accelerate.framework/ 
> Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib
> 950ab000        /System/Library/Frameworks/CoreServices.framework/ 
> Versions/A/Frameworks/DictionaryServices.framework/Versions/A/ 
> DictionaryServices
> 950c2000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/ 
> Versions/A/ATS
> 95156000        /System/Library/Frameworks/ 
> SecurityInterface.framework/Versions/A/SecurityInterface
> 951a1000        /System/Library/QuickTime/QuickTimeMPEG4.component/ 
> Contents/MacOS/QuickTimeMPEG4
> 95269000        /usr/lib/libxslt.1.dylib
> 9528e000        /System/Library/Frameworks/Carbon.framework/Versions/ 
> A/Frameworks/HIToolbox.framework/Versions/A/HIToolbox
> 95597000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
> 955a3000        /System/Library/PrivateFrameworks/ 
> DotMacSyncManager.framework/Versions/A/DotMacSyncManager
> 955d4000        /usr/lib/libcups.2.dylib
> 955fb000        /System/Library/Frameworks/Security.framework/ 
> Versions/A/Security
> 957c7000        /System/Library/PrivateFrameworks/ 
> DesktopServicesPriv.framework/Versions/A/DesktopServicesPriv
> 95851000        /usr/lib/libffi.dylib
> 95853000        /System/Library/Frameworks/AGL.framework/Versions/A/ 
> AGL
> 9585b000        /usr/lib/libsqlite3.0.dylib
> 958e3000        /System/Library/Frameworks/Carbon.framework/Versions/ 
> A/Frameworks/HTMLRendering.framework/Versions/A/HTMLRendering
> 95940000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> ImageIO.framework/Versions/A/Resources/libGIF.dylib
> 95945000        /System/Library/Frameworks/Quartz.framework/Versions/ 
> A/Quartz
> 95946000        /System/Library/Frameworks/Quartz.framework/Versions/ 
> A/Frameworks/QuartzComposer.framework/Versions/A/QuartzComposer
> 95b02000        /System/Library/PrivateFrameworks/ 
> CoreMediaIOServicesPrivate.framework/Versions/A/ 
> CoreMediaIOServicesPrivate
> 95b40000        /System/Library/Frameworks/LDAP.framework/Versions/A/ 
> LDAP
> 95b73000        /usr/lib/libxml2.2.dylib
> 95c55000        /System/Library/PrivateFrameworks/HelpData.framework/ 
> Versions/A/HelpData
> 95c61000        /System/Library/Frameworks/Quartz.framework/Versions/ 
> A/Frameworks/QuartzFilters.framework/Versions/A/QuartzFilters
> 95c93000        /System/Library/Frameworks/OpenGL.framework/Versions/ 
> A/Libraries/libGLU.dylib
> 95ced000        /System/Library/QuickTime/ 
> QuickTimeImporters.component/Contents/MacOS/QuickTimeImporters
> 95d8c000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> ColorSync.framework/Versions/A/ColorSync
> 95e58000        /System/Library/Frameworks/QTKit.framework/Versions/ 
> A/QTKit
> 95ee5000        /System/Library/Frameworks/Carbon.framework/Versions/ 
> A/Frameworks/Print.framework/Versions/A/Print
> 95eec000        /System/Library/Frameworks/QuartzCore.framework/ 
> Versions/A/QuartzCore
> 96283000        /System/Library/Frameworks/Carbon.framework/Versions/ 
> A/Frameworks/SpeechRecognition.framework/Versions/A/SpeechRecognition
> 9628d000        /System/Library/Frameworks/ 
> DirectoryService.framework/Versions/A/DirectoryService
> 962ac000        /System/Library/Frameworks/CoreServices.framework/ 
> Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit
> 9632c000        /System/Library/PrivateFrameworks/ 
> KerberosHelper.framework/Versions/A/KerberosHelper
> 96332000        /System/Library/Frameworks/AppKit.framework/Versions/ 
> C/AppKit
> 96b30000        /System/Library/Frameworks/CoreServices.framework/ 
> Versions/A/CoreServices
> 96b31000        /System/Library/Frameworks/ 
> ApplicationServices.framework/Versions/A/Frameworks/ 
> CoreGraphics.framework/Versions/A/Resources/libRIP.A.dylib
> 96b73000        /usr/lib/libSystem.B.dylib
> 96cd3000        /usr/lib/libobjc.A.dylib
> 96db3000        /System/Library/PrivateFrameworks/DAVKit.framework/ 
> Versions/A/DAVKit
> 96df1000        /System/Library/PrivateFrameworks/ 
> OpenDirectory.framework/Versions/A/OpenDirectory
> 96df6000        /System/Library/Frameworks/CalendarStore.framework/ 
> Versions/A/CalendarStore
> 96f4f000        /System/Library/Frameworks/OpenGL.framework/Versions/ 
> A/OpenGL
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From hb at stat.berkeley.edu  Wed Feb 13 20:23:48 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Wed, 13 Feb 2008 11:23:48 -0800
Subject: [Rd] Best way to reset random seed when using set.seed() in a
	function?
In-Reply-To: <47B33FE9.2090301@bank-banque-canada.ca>
References: <59d7961d0802130857l7b4abcfcu891c066bcbe3d21a@mail.gmail.com>
	<47B33FE9.2090301@bank-banque-canada.ca>
Message-ID: <59d7961d0802131123m6bd8fb9fx2efbf4c709a397be@mail.gmail.com>

On Feb 13, 2008 11:07 AM, Paul Gilbert <pgilbert at bank-banque-canada.ca> wrote:
> I think in general it is a good idea to use  on.exit()  to reset the
> seed if you mess with it. Otherwise you can generate unintended
> consequences for other programs. Something like:
>     old.seed <- setRNG(kind = "default", seed = test.seed, normal.kind =
> "default")
>     on.exit(setRNG(old.seed))

Yes, agree; on.exit() should always be used when you want to cleanup
after yourself.  Much better.

>
> (BTW, setRNG is a simple little utility in the setRNG package, to help
> set and save some of the other things you need besides the seed, if you
> are going to try to reproduce results.)

Thanks for this note.  This seems much more natural to work with than
'.Random.seed'.

/Henrik


>
> Paul
>
>
> Henrik Bengtsson wrote:
> > Hi,
> >
> > this is related to a question just raised on Bioconductor where one
> > function sets the random seed internally but never resets it, which
> > results in enforced down streams random samples being deterministic.
> >
> > What is the best way to reset the random seed when you use set.seed()
> > within a function?  Is it still to re-assign '.Random.seed' in the
> > global environment as following example illustrates?  I'm not too kind
> > of having function modifying the global environment, if not really
> > necessary.
> >
> > foo <- function(n) {
> >   # Pop random seed
> >   if (!exists(".Random.seed", mode="numeric"))
> >     sample(NA);
> >   oldSeed <- .Random.seed;
> >
> >   # Fixed seed to get reproducible samples here
> >   set.seed(0xbeef);
> >   x <- sample(5);
> >
> >   # Proof of concept: 'x' should be the same all the time
> >   stopifnot(identical( x, as.integer(c(4,2,5,1,3)) ));
> >
> >   # Push random seed to old state
> >   assign(".Random.seed", oldSeed, envir=globalenv())
> >
> >   # Continue as nothing happened
> >   sample(n);
> > }
> >
> >
> >> foo(5)
> >>
> > [1] 4 2 3 5 1
> >
> >> foo(5)
> >>
> > [1] 4 2 3 1 5
> >
> >> foo(5)
> >>
> > [1] 5 3 1 4 2
> >
> >> foo(5)
> >>
> > [1] 5 3 2 4 1
> >
> >> foo(5)
> >>
> >
> > Is this the way to do it?
> >
> > Thanks
> >
> > Henrik
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> ====================================================================================
>
> La version fran?aise suit le texte anglais.
>
> ------------------------------------------------------------------------------------
>
> This email may contain privileged and/or confidential information, and the Bank of
> Canada does not waive any related rights. Any distribution, use, or copying of this
> email or the information it contains by other than the intended recipient is
> unauthorized. If you received this email in error please delete it immediately from
> your system and notify the sender promptly by email that you have done so.
>
> ------------------------------------------------------------------------------------
>
> Le pr?sent courriel peut contenir de l'information privil?gi?e ou confidentielle.
> La Banque du Canada ne renonce pas aux droits qui s'y rapportent. Toute diffusion,
> utilisation ou copie de ce courriel ou des renseignements qu'il contient par une
> personne autre que le ou les destinataires d?sign?s est interdite. Si vous recevez
> ce courriel par erreur, veuillez le supprimer imm?diatement et envoyer sans d?lai ?
> l'exp?diteur un message ?lectronique pour l'aviser que vous avez ?limin? de votre
> ordinateur toute copie du courriel re?u.
>


From p.murrell at auckland.ac.nz  Wed Feb 13 20:25:19 2008
From: p.murrell at auckland.ac.nz (Paul Murrell)
Date: Thu, 14 Feb 2008 08:25:19 +1300
Subject: [Rd] removing last piece of grid graphical output with
	grid.remove
In-Reply-To: <47B33E25.5090307@biostat.wisc.edu>
References: <47B33E25.5090307@biostat.wisc.edu>
Message-ID: <47B3441F.3030707@stat.auckland.ac.nz>

Hi


Erik Iverson wrote:
> Hello -
> 
> If I create multiple pieces of output in grid, and use grid.remove() to
> try to remove the output from the graphics device, I cannot seem to
> remove the final piece of output from the device until I 'refresh' the 
> graphics device by giving it focus.  The function grid.remove() does 
> appear to remove the grob from the display list, however.
> 
> I noticed this when the example on page 200-201 in Paul Murrell's R 
> Graphics book did not work as expected when using 
> grid.remove("circles").  Can anyone replicate this?


I've seen this type of behaviour on X11 before, but I think it is
specific to that device (e.g., you get the "right" behaviour on Windows).

I have not yet attempted to seek out the source of the X11 problem.

Paul


> ## Example
> library(grid)
> 
> ## Create two circles
> grid.circle(name = "redcircle",  r = .20, gp = gpar(col = "red"))
> grid.circle(name = "bluecircle", r = .25, gp = gpar(col = "blue"))
> 
> ## removes the blue circle
> grid.remove("bluecircle")
> 
> ## the red circle will be deleted from the grid display list, but
> ## the graphics device will still show it until I 'refresh' the
> ## device by giving it focus via mouse or alt+tab, or producing
> ## more grid output
> grid.remove("redcircle") ## still on my X11 device!
> 
> ## more grid output
> grid.text("Now the circle is gone!", name = "txt")
> 
> ## But I can't get rid of this text on the device
> ## until I refresh device or do another grid call
> grid.remove("txt")  ## still on my X1 device!
> 
> 
>  > sessionInfo()
> R version 2.6.2 (2008-02-08)
> i686-pc-linux-gnu
> 
> locale:
> LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C
> 
> attached base packages:
> [1] grid      stats     graphics  grDevices utils     datasets  methods
> [8] base
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/


From deepayan.sarkar at gmail.com  Wed Feb 13 20:44:08 2008
From: deepayan.sarkar at gmail.com (Deepayan Sarkar)
Date: Wed, 13 Feb 2008 11:44:08 -0800
Subject: [Rd] Surprising behaviour of levelplot in lattice package
In-Reply-To: <47B3181C.3090508@ebi.ac.uk>
References: <47B3181C.3090508@ebi.ac.uk>
Message-ID: <eb555e660802131144t72d31cdbkb3c264466ce798a9@mail.gmail.com>

On 2/13/08, Wolfgang Huber <huber at ebi.ac.uk> wrote:
> Hi Deepayan,
>
> levelplot from the lattice package produces a peculiar output when
> called on a matrix whose column or row names contained duplicated
> elements. In particular, the plot contains white stripes, and the
> arrangement of data regions and axes labels seems messed up. I did not
> see this documented (my apologies if this is an oversight) and guess
> that it is unintended:

Yes, the current design does not anticipate the possibility of
duplicated row and column names. A fix may or may not be simple; I
will look into it.

-Deepayan


>
>
> library("lattice")
> m = matrix(runif(12L), ncol=3L)
> colnames(m) = c("A", "A", "B")
> rownames(m) = c("x", "y", "y", "z")
> print(levelplot(m))
>
>
>
> Best wishes
>  Wolfgang
>
> ------------------------------------------------------------------
> Wolfgang Huber  EBI/EMBL  Cambridge UK  http://www.ebi.ac.uk/huber
>
>
>
> > sessionInfo()
> R version 2.7.0 Under development (unstable) (2008-02-13 r44450)
> x86_64-unknown-linux-gnu
>
> locale:
> LC_CTYPE=it_IT.UTF-8;LC_NUMERIC=C;LC_TIME=it_IT.UTF-8;LC_COLLATE=it_IT.UTF-8;LC_MONETARY=it_IT.UTF-8;LC_MESSAGES=it_IT.UTF-8;LC_PAPER=it_IT.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=it_IT.UTF-8;LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] lattice_0.17-4 fortunes_1.3-4
>
> loaded via a namespace (and not attached):
> [1] grid_2.7.0
> >
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From deepayan.sarkar at gmail.com  Wed Feb 13 20:47:06 2008
From: deepayan.sarkar at gmail.com (Deepayan Sarkar)
Date: Wed, 13 Feb 2008 11:47:06 -0800
Subject: [Rd] Surprising behaviour of levelplot in lattice package
In-Reply-To: <eb555e660802131144t72d31cdbkb3c264466ce798a9@mail.gmail.com>
References: <47B3181C.3090508@ebi.ac.uk>
	<eb555e660802131144t72d31cdbkb3c264466ce798a9@mail.gmail.com>
Message-ID: <eb555e660802131147o139708f2q5e7a846f075e3a2a@mail.gmail.com>

On 2/13/08, Deepayan Sarkar <deepayan.sarkar at gmail.com> wrote:
> On 2/13/08, Wolfgang Huber <huber at ebi.ac.uk> wrote:
> > Hi Deepayan,
> >
> > levelplot from the lattice package produces a peculiar output when
> > called on a matrix whose column or row names contained duplicated
> > elements. In particular, the plot contains white stripes, and the
> > arrangement of data regions and axes labels seems messed up. I did not
> > see this documented (my apologies if this is an oversight) and guess
> > that it is unintended:
>
> Yes, the current design does not anticipate the possibility of
> duplicated row and column names. A fix may or may not be simple; I
> will look into it.

Actually, the fix should be easy. A workaround is

levelplot(m, ylim = colnames(m), xlim = rownames(m))

-Deepayan


From Kurt.Hornik at wu-wien.ac.at  Wed Feb 13 21:28:33 2008
From: Kurt.Hornik at wu-wien.ac.at (Kurt Hornik)
Date: Wed, 13 Feb 2008 21:28:33 +0100
Subject: [Rd] Perils of R_LIBRARY_PATH
In-Reply-To: <Pine.LNX.4.64.0802131346450.10778@auk.stats>
References: <Pine.LNX.4.64.0802131346450.10778@auk.stats>
Message-ID: <18355.21233.59094.855150@fangorn.hornik.net>

>>>>> Prof Brian Ripley writes:

> The R front end sets (via etc/ldpath) R_LIBRARY_PATH, including 
> R_JAVA_LD_LIBRARY_PATH.  Perhaps the later is too obliging, as I've just 
> be caught by it in a way that took me a while to track down.

> One of my machines has a Sun jdk1.6.0* JDK installed, and as a result
> we have

> ${R_JAVA_LD_LIBRARY_PATH=${JAVA_HOME}/lib/amd64/server:${JAVA_HOME}/lib/amd64:
> ${JAVA_HOME}/../lib/amd64}

> What I was not aware of was that the Sun JDK contains Gtk+ libraries such 
> as cairo and pango, and those were older than the ones whose headers I 
> had compiled against which eventually resulted in a crash.

> It seems to be an issue only for a JDK: perhaps Simon can tweak his 
> incantations to use only the JRE library path (and avoid the 
> '../lib/amd64' above)?

Along with doing this, can we perhaps change JAVA_HOME to something like
R_JAVA_HOME?  Apparently some applications require JAVA_HOME to be set
which in turn overrides the configured values for R ...

Best
-k


From ripley at stats.ox.ac.uk  Wed Feb 13 22:36:26 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 13 Feb 2008 21:36:26 +0000 (GMT)
Subject: [Rd] removing last piece of grid graphical output with
	grid.remove
In-Reply-To: <47B3441F.3030707@stat.auckland.ac.nz>
References: <47B33E25.5090307@biostat.wisc.edu>
	<47B3441F.3030707@stat.auckland.ac.nz>
Message-ID: <Pine.LNX.4.64.0802132117200.23931@auk.stats>

On Thu, 14 Feb 2008, Paul Murrell wrote:

> Hi
>
>
> Erik Iverson wrote:
>> Hello -
>>
>> If I create multiple pieces of output in grid, and use grid.remove() to
>> try to remove the output from the graphics device, I cannot seem to
>> remove the final piece of output from the device until I 'refresh' the
>> graphics device by giving it focus.  The function grid.remove() does
>> appear to remove the grob from the display list, however.
>>
>> I noticed this when the example on page 200-201 in Paul Murrell's R
>> Graphics book did not work as expected when using
>> grid.remove("circles").  Can anyone replicate this?
>
>
> I've seen this type of behaviour on X11 before, but I think it is
> specific to that device (e.g., you get the "right" behaviour on Windows).
>
> I have not yet attempted to seek out the source of the X11 problem.

The source is the behaviour of grid.newpage.  I think you are expecting it 
to clear the plot, but it doesn't (although a subsequent refresh will). 
Here's a simpler example

library(grid)
grid.circle(name = "redcircle",  r = .20, gp = gpar(col = "red"))
grid.newpage()

or in old money

plot(1:10)
plot.new()

As I suggested to Paul privately, it is a missing XSync call (and in fact 
the second one I have found today).  Will be fixed in R-patched shortly.

>
> Paul
>
>
>> ## Example
>> library(grid)
>>
>> ## Create two circles
>> grid.circle(name = "redcircle",  r = .20, gp = gpar(col = "red"))
>> grid.circle(name = "bluecircle", r = .25, gp = gpar(col = "blue"))
>>
>> ## removes the blue circle
>> grid.remove("bluecircle")
>>
>> ## the red circle will be deleted from the grid display list, but
>> ## the graphics device will still show it until I 'refresh' the
>> ## device by giving it focus via mouse or alt+tab, or producing
>> ## more grid output
>> grid.remove("redcircle") ## still on my X11 device!
>>
>> ## more grid output
>> grid.text("Now the circle is gone!", name = "txt")
>>
>> ## But I can't get rid of this text on the device
>> ## until I refresh device or do another grid call
>> grid.remove("txt")  ## still on my X1 device!
>>
>>
>> > sessionInfo()
>> R version 2.6.2 (2008-02-08)
>> i686-pc-linux-gnu
>>
>> locale:
>> LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] grid      stats     graphics  grDevices utils     datasets  methods
>> [8] base
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jeff.horner at vanderbilt.edu  Wed Feb 13 23:31:33 2008
From: jeff.horner at vanderbilt.edu (Jeffrey Horner)
Date: Wed, 13 Feb 2008 16:31:33 -0600
Subject: [Rd] RFC for package PopCon: a popularity contest for R and packages
Message-ID: <47B36FC5.8060202@vanderbilt.edu>

Hello all,

I've developed a prototype package called PopCon (short for popularity 
contest), a package for tracking the popularity of R and its packages. 
I'd like this work to be similar in spirit to the Debian package 
popularity-contest: http://popcon.debian.org/.

Once Popcon is loaded, it captures two kinds of information from the 
user and stores it into a cache: the names of the libraries he/she 
loads, and the names of symbols requested from his/her code. Once the 
cache is full, the goal is to flush the data to a central server for 
storage, free for anyone to download and analyze. That's it. Pretty 
simple use and works behind the scenes. You can get the prototype here:

http://biostat.mc.vanderbilt.edu/twiki/pub/Main/JeffreyHorner/PopCon_0.1.tar.gz

And note that flushing of the cache is NOT TURNED ON and IT WON'T 
FORWARD ANY DATA ANYWHERE! It only gets deleted.

So, I envision all the software and data generated and stored to be 
licensed under a GPL and a Creative Commons license, or even public domain.

Thoughts? I'm looking for volunteers, because there are many issues to 
hash out. Here's a few of them:

1. Obviously storing IP addresses or any bit of personal information is 
out, but I'm interested in generating a permanent random key of some 
sort so that data from the same R installs can be tracked. I'm wondering 
if just md5 hashing the combination of R version, platform, and IP 
address would be appropriate and reproducible per R install. The debian 
package popularity-contest has the benefit of installing an '/etc' 
config file and generating the key once, while I'd like PopCon users to 
just call 'library(PopCon)' and do nothing else.

2. I'm willing to maintain the central server and work on the 
infrastructure, but help will definitely be needed. Also, if there's 
significant interested, maybe R core would be interested in this.

3. What exactly is PopCon tracking as far as symbol names go? It 
currently used an R_ObjectTable object attached to the search path to 
capture names, but is this the best way? see 
http://www.omegahat.org/RObjectTables/. It's also replacing 
base::getHook to trap library loads.

4. What else would be interesting to track? Some folks have suggested 
various bits of R.Version() output.

Here's what PopCon can currently do:

 > library(PopCon)
 > search()
  [1] ".GlobalEnv"        "package:PopCon"    ".pcUDB"
  [4] "package:stats"     "package:graphics"  "package:grDevices"
  [7] "package:utils"     "package:datasets"  "package:methods"
[10] "Autoloads"         "package:base"

# Notice the above search entry .pcUDB. That's the R Object Table

 > typeof(PopCon::getCache())
[1] "character"
 > PopCon::getCache()
[1] ".conflicts.OK" "search"        "::"

# Now the cache contains the name 'search', which I called above,
# and the double colon operator.

 > library(cluster)
 >  any(PopCon::getCache()=='package:cluster')
[1] TRUE

# Package names are represented in the PopCon cache just like
# their name on the search path.


 > PopCon::getCache()
   [1] ".conflicts.OK"            "search"
   [3] "::"                       "$.data.frame"
   [5] "$.default"                "$.data.frame"
   [7] "$.default"                "unique.integer"
   [9] "unique.numeric"           "$.data.frame"
  [11] "$.default"                "unique.integer"
  [13] "unique.numeric"           "unique.character"
  [15] "unique.integer"           "unique.numeric"
  [17] "close.gzfile"             "$.packageDescription2"
  [19] "$.default"                "$.data.frame"
  [21] "$.default"                "unique.integer"
  [23] "unique.numeric"           "unique.character"
  [25] "unique.integer"           "unique.numeric"
  [27] "close.gzfile"             "$.packageDescription2"
  [29] "$.default"                "unique.integer"
  [31] "unique.numeric"           "close.gzfile"
  [33] "names.simple.list"        "names.default"
  [35] "[.default"                "as.character.simple.list"
  [37] "as.vector.simple.list"    "as.vector.default"
  [39] "unique.character"         "$.packageDescription2"
  [41] "$.default"                ">=.R_system_version"
  [43] "Ops.R_system_version"     ">=.package_version"
  [45] "Ops.package_version"      ">=.numeric_version"
  [47] ">=.package_version"       "Ops.package_version"
  [49] ">=.numeric_version"       "unlist.R_system_version"
  [51] "unlist.package_version"   "unlist.numeric_version"
  [53] "unlist.default"           "unlist.package_version"
  [55] "unlist.numeric_version"   "unlist.default"
  [57] "as.list.R_system_version" "as.list.package_version"
  [59] "unique.integer"           "unique.numeric"
  [61] "as.list.R_system_version" "as.list.package_version"
  [63] "unique.integer"           "unique.numeric"
  [65] "as.list.package_version"  "unique.integer"
  [67] "unique.numeric"           "as.list.package_version"
  [69] "unique.integer"           "unique.numeric"
  [71] ">=.default"               "$.packageDescription2"
  [73] "$.default"                "<.R_system_version"
  [75] "Ops.R_system_version"     "<.package_version"
  [77] "Ops.package_version"      "<.numeric_version"
  [79] "unique.character"         "unlist.R_system_version"
  [81] "unlist.package_version"   "unlist.numeric_version"
  [83] "unlist.default"           "unlist.numeric_version"
  [85] "unlist.default"           "as.list.R_system_version"
...
# I've truncated the output here.

But you get the idea. Any and all comments welcome.

Jeff
-- 
http://biostat.mc.vanderbilt.edu/JeffreyHorner


From erich.neuwirth at univie.ac.at  Thu Feb 14 01:15:56 2008
From: erich.neuwirth at univie.ac.at (Erich Neuwirth)
Date: Thu, 14 Feb 2008 01:15:56 +0100
Subject: [Rd] Rprofile.site in Windows version
In-Reply-To: <47AE6962.30707@stats.uwo.ca>
References: <47AE3AF8.4000906@univie.ac.at> <47AE6962.30707@stats.uwo.ca>
Message-ID: <47B3883C.5020005@univie.ac.at>

You are of course right, library(tools) is not necessary.

Duncan Murdoch wrote:
> On 09/02/2008 6:44 PM, Erich Neuwirth wrote:
>> I think Rprofile.site as installed with R-2.6.2
>> contains some misleading information.
>> It contains the following lines
>>
>> # set a CRAN mirror
>> # local({r <- getOption("repos")
>> #       r["CRAN"] <- "http://my.local.cran"
>> #       options(repos=r)})'.
>>
>> Uncommenting these lines and changing the URL
>> will not work.
>>
>> '. at the end of the last line will break the execution.
> 
> Yes, those shouldn't be there.
> 
>> Furthermore
>> library(tools)
>> needs to be run before these lines can be run.
> 
> Why?  local, getOption, and options are all in the base package.
> 
> Duncan Murdoch
> 
> 

-- 
Erich Neuwirth, University of Vienna
Faculty of Computer Science
Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-39464 Fax: +43-1-4277-39459


From A.Robinson at ms.unimelb.edu.au  Thu Feb 14 01:40:11 2008
From: A.Robinson at ms.unimelb.edu.au (A.Robinson at ms.unimelb.edu.au)
Date: Thu, 14 Feb 2008 01:40:11 +0100 (CET)
Subject: [Rd] GCV in lm.ridge (MASS) (PR#10755)
Message-ID: <20080214004011.D08AD2834613@mail.pubhealth.ku.dk>

Full_Name: Andrew Robinson
Version: 2.6.2 Patched (2008-02-12 r44439)
OS: FreeBSD 6.3-RC1
Submission from: (NULL) (211.28.206.186)


I believe that the computation for GCV is incorrect in the lm.ridge function in
MASS. 

>From lm.ridge:

GCV <- colSums((Y - X %*% coef)^2)/
    (n - colSums(matrix(d^2/div, dx)))^2
  
The denominator does not tally with the formula on p. 141 of Ripley's Pattern
Recognition & Neural Networks.  I think that it should be

GCV <- colSums((Y - X %*% coef)^2)/
    (1 - colSums(matrix(d^2/div, dx))/n)^2 / n

Also, neither formula (above) counts the intercept amongst the parameters
This makes sense from the point of view that the intercept is not
shrunk in ridge regression, but if it has been conditioned on for
computing the residual sum of squares, then there is an argument that
it should be included in the trace of the mapping matrix anyway.

Thanks

Andrew


> sessionInfo()
R version 2.6.2 Patched (2008-02-12 r44439) 
i386-unknown-freebsd6.3 

locale:
C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] MASS_7.2-40

loaded via a namespace (and not attached):
[1] rcompgen_0.1-17


From cyrix333 at gmx.net  Thu Feb 14 11:20:03 2008
From: cyrix333 at gmx.net (cyrix333 at gmx.net)
Date: Thu, 14 Feb 2008 11:20:03 +0100 (CET)
Subject: [Rd] RGtk2 : Using GtkImage with GIF (PR#10757)
Message-ID: <20080214102003.9E6982834612@mail.pubhealth.ku.dk>

Full_Name: Hans Dieter
Version: 2.6.1
OS: Windows
Submission from: (NULL) (217.93.95.129)


Hi,
I build a GUI with RGtk2 and used an GtkImage to display pictures like jpegs and
others. This works but if I load a gif-Image it's not animated. It show's only
the first picture, in general an GtkImage can display an animated gif.


Greetings


From Cyrix333 at gmx.net  Thu Feb 14 12:32:14 2008
From: Cyrix333 at gmx.net (_)
Date: Thu, 14 Feb 2008 12:32:14 +0100
Subject: [Rd] Vector binding on harddisk
Message-ID: <47B426BE.9010606@gmx.net>

Hi all,
Using big vectors (more than 4GB) is unfortunately not possible under 
Windows or other OS's if not enough RAM exists.
Could it be possible to implement an a new data type in R, like a 
vector, but instead holding the information in memory, the data lies on 
an file. If data is accessed, the data type vector get the information 
automatically from the file.
There is a package out there (named ff) but the accessed boundary have 
to be declared by the user this is a disadvantage.

Greetings.


From rkoenker at uiuc.edu  Thu Feb 14 14:52:23 2008
From: rkoenker at uiuc.edu (roger koenker)
Date: Thu, 14 Feb 2008 07:52:23 -0600
Subject: [Rd] reordering combn(n,p)
Message-ID: <F6549C9D-EA81-4A86-A32E-F1DE6A63FB9B@uiuc.edu>

I found the following slightly surprising and thought that it might
(eventually) be useful to someone to document it:

Problem:  I wanted to reorder the columns of the matrix produced
by combn(n,p) so that adjacent columns only differed by one  element.

I assumed that this was a problem known to the Assyrians and
resisted the temptation to write to r-help, and through assiduous
googling finally discovered that this was still a topic of current
research in computer science.

Solution:   Limin Xiang and Kazuo Ushijima (2001) "On O(1) Time  
Algorithms for
Combinatorial Generation," Computer Journal, 44(4), 292-302.
provides a nice algorithm (in Pascal) which I then translated into
ratfor and plan to incorporate eventually into quantreg.  It manages
to do n=500 p = 3 in about 3 secs on my old G5.  It probably
isn't of interest to do problems too much bigger than this since
we are already at 20 x 10^6 columns.

url:    www.econ.uiuc.edu/~roger            Roger Koenker
email    rkoenker at uiuc.edu            Department of Economics
vox:     217-333-4558                University of Illinois
fax:       217-244-6678                Champaign, IL 61820


From pgilbert at bank-banque-canada.ca  Thu Feb 14 16:14:05 2008
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 14 Feb 2008 10:14:05 -0500
Subject: [Rd] Vector binding on harddisk
In-Reply-To: <47B426BE.9010606@gmx.net>
References: <47B426BE.9010606@gmx.net>
Message-ID: <47B45ABD.4010304@bank-banque-canada.ca>



_ wrote:
> Hi all,
> Using big vectors (more than 4GB) is unfortunately not possible under 
> Windows or other OS's if not enough RAM exists.

This is NOT true. It is not limited by RAM, but rather by RAM and swap 
space.  With 500G hard disks at about $100, the more serious limitation 
is a 32bit OS.  Speed is a different consideration, but I doubt that 
taking over what the OS is suppose to do will be the real answer.

Paul

> Could it be possible to implement an a new data type in R, like a 
> vector, but instead holding the information in memory, the data lies on 
> an file. If data is accessed, the data type vector get the information 
> automatically from the file.
> There is a package out there (named ff) but the accessed boundary have 
> to be declared by the user this is a disadvantage.
> 
> Greetings.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential information, and the Bank of
Canada does not waive any related rights. Any distribution, use, or copying of this
email or the information it contains by other than the intended recipient is
unauthorized. If you received this email in error please delete it immediately from
your system and notify the sender promptly by email that you have done so. 

------------------------------------------------------------------------------------

Le pr?sent courriel peut contenir de l'information privil?gi?e ou confidentielle.
La Banque du Canada ne renonce pas aux droits qui s'y rapportent. Toute diffusion,
utilisation ou copie de ce courriel ou des renseignements qu'il contient par une
personne autre que le ou les destinataires d?sign?s est interdite. Si vous recevez
ce courriel par erreur, veuillez le supprimer imm?diatement et envoyer sans d?lai ?
l'exp?diteur un message ?lectronique pour l'aviser que vous avez ?limin? de votre
ordinateur toute copie du courriel re?u.

From jeff.horner at vanderbilt.edu  Thu Feb 14 16:23:08 2008
From: jeff.horner at vanderbilt.edu (Jeffrey Horner)
Date: Thu, 14 Feb 2008 09:23:08 -0600
Subject: [Rd] Vector binding on harddisk
In-Reply-To: <47B45ABD.4010304@bank-banque-canada.ca>
References: <47B426BE.9010606@gmx.net> <47B45ABD.4010304@bank-banque-canada.ca>
Message-ID: <47B45CDC.2060803@vanderbilt.edu>

Paul Gilbert wrote on 02/14/2008 09:14 AM:
> 
> _ wrote:
>> Hi all,
>> Using big vectors (more than 4GB) is unfortunately not possible under 
>> Windows or other OS's if not enough RAM exists.
> 
> This is NOT true. It is not limited by RAM, but rather by RAM and swap 
> space.  With 500G hard disks at about $100, the more serious limitation 
> is a 32bit OS.  Speed is a different consideration, but I doubt that 
> taking over what the OS is suppose to do will be the real answer.

Umm... swap... yeah... My experience with any code that I write that 
needs to use swap is to reboot the machine and rewrite my code NOT to 
use swap.

Jeff

> 
> Paul
> 
>> Could it be possible to implement an a new data type in R, like a 
>> vector, but instead holding the information in memory, the data lies on 
>> an file. If data is accessed, the data type vector get the information 
>> automatically from the file.
>> There is a package out there (named ff) but the accessed boundary have 
>> to be declared by the user this is a disadvantage.
>>
>> Greetings.
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> ====================================================================================
> 
> La version fran?aise suit le texte anglais.
> 
> ------------------------------------------------------------------------------------
> 
> This email may contain privileged and/or confidential ...{{dropped:23}}


From simon.urbanek at r-project.org  Thu Feb 14 16:32:08 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 14 Feb 2008 10:32:08 -0500
Subject: [Rd] Vector binding on harddisk
In-Reply-To: <47B426BE.9010606@gmx.net>
References: <47B426BE.9010606@gmx.net>
Message-ID: <D58CCC8F-8231-4159-AB43-DF7324301DCB@r-project.org>


On Feb 14, 2008, at 6:32 AM, _ wrote:

> Hi all,
> Using big vectors (more than 4GB) is unfortunately not possible under
> Windows or other OS's if not enough RAM exists.
> Could it be possible to implement an a new data type in R, like a
> vector, but instead holding the information in memory, the data lies  
> on
> an file. If data is accessed, the data type vector get the information
> automatically from the file.
> There is a package out there (named ff) but the accessed boundary have
> to be declared by the user this is a disadvantage.
>

I don't think you have been reading the documentation carefully enough  
- it doesn't impose any limits itself. Whatever limits you hit with it  
are due to the OS and/or R, so you cannot write a package that you  
describe without hitting those limits. They are as follows: size of an  
integer in R which limits the length of a single vector (2^31-1 ~ 2G  
entries on 32-bit machines) and file size limit of your OS. The former  
is a really hard limit, the only way to overcome it (without modifying  
R) is to use multiple indices (which the ff package suggests). You can  
overcome the file size limit by simply using multiple files (or using  
a more reasonable OS).

Cheers,
Simon


From hb at stat.berkeley.edu  Thu Feb 14 16:54:38 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Thu, 14 Feb 2008 07:54:38 -0800
Subject: [Rd] Vector binding on harddisk
In-Reply-To: <47B45CDC.2060803@vanderbilt.edu>
References: <47B426BE.9010606@gmx.net> <47B45ABD.4010304@bank-banque-canada.ca>
	<47B45CDC.2060803@vanderbilt.edu>
Message-ID: <59d7961d0802140754x216c9753la5ebcfa415439a39@mail.gmail.com>

On Thu, Feb 14, 2008 at 7:23 AM, Jeffrey Horner
<jeff.horner at vanderbilt.edu> wrote:
> Paul Gilbert wrote on 02/14/2008 09:14 AM:
>
> >
>  > _ wrote:
>  >> Hi all,
>  >> Using big vectors (more than 4GB) is unfortunately not possible under
>  >> Windows or other OS's if not enough RAM exists.
>  >
>  > This is NOT true. It is not limited by RAM, but rather by RAM and swap
>  > space.  With 500G hard disks at about $100, the more serious limitation
>  > is a 32bit OS.  Speed is a different consideration, but I doubt that
>  > taking over what the OS is suppose to do will be the real answer.
>
>  Umm... swap... yeah... My experience with any code that I write that
>  needs to use swap is to reboot the machine and rewrite my code NOT to
>  use swap.

...and the OS can never predict how you are going to access the data -
as a developer you will always be able to write a much faster
file-based "database" compared with a generic swap that you have
little control over.

/Henrik

>
>  Jeff
>
>
>  >
>  > Paul
>  >
>  >> Could it be possible to implement an a new data type in R, like a
>  >> vector, but instead holding the information in memory, the data lies on
>  >> an file. If data is accessed, the data type vector get the information
>  >> automatically from the file.
>  >> There is a package out there (named ff) but the accessed boundary have
>  >> to be declared by the user this is a disadvantage.
>  >>
>  >> Greetings.
>  >>
>  >> ______________________________________________
>  >> R-devel at r-project.org mailing list
>  >> https://stat.ethz.ch/mailman/listinfo/r-devel
>  > ====================================================================================
>  >
>  > La version fran?aise suit le texte anglais.
>  >
>  > ------------------------------------------------------------------------------------
>  >
>  > This email may contain privileged and/or confidential ...{{dropped:23}}
>
>
>
>  ______________________________________________
>  R-devel at r-project.org mailing list
>  https://stat.ethz.ch/mailman/listinfo/r-devel
>


From csardi at rmki.kfki.hu  Thu Feb 14 17:02:40 2008
From: csardi at rmki.kfki.hu (Gabor Csardi)
Date: Thu, 14 Feb 2008 17:02:40 +0100
Subject: [Rd] Vector binding on harddisk
In-Reply-To: <59d7961d0802140754x216c9753la5ebcfa415439a39@mail.gmail.com>
References: <47B426BE.9010606@gmx.net> <47B45ABD.4010304@bank-banque-canada.ca>
	<47B45CDC.2060803@vanderbilt.edu>
	<59d7961d0802140754x216c9753la5ebcfa415439a39@mail.gmail.com>
Message-ID: <20080214160240.GK10523@localdomain>

On Thu, Feb 14, 2008 at 07:54:38AM -0800, Henrik Bengtsson wrote:
> On Thu, Feb 14, 2008 at 7:23 AM, Jeffrey Horner
> <jeff.horner at vanderbilt.edu> wrote:
> > Paul Gilbert wrote on 02/14/2008 09:14 AM:
> >
> > >
> >  > _ wrote:
> >  >> Hi all,
> >  >> Using big vectors (more than 4GB) is unfortunately not possible under
> >  >> Windows or other OS's if not enough RAM exists.
> >  >
> >  > This is NOT true. It is not limited by RAM, but rather by RAM and swap
> >  > space.  With 500G hard disks at about $100, the more serious limitation
> >  > is a 32bit OS.  Speed is a different consideration, but I doubt that
> >  > taking over what the OS is suppose to do will be the real answer.
> >
> >  Umm... swap... yeah... My experience with any code that I write that
> >  needs to use swap is to reboot the machine and rewrite my code NOT to
> >  use swap.
> 
> ...and the OS can never predict how you are going to access the data -

Actually that is not necessarily true. It might be worth looking 
for patterns in data (say memory pages) access and then create a 
smart OS which predicts the needed pages. Different programs would 
have different patterns, i guess.

Ok, i might be dreaming.

Gabor

> as a developer you will always be able to write a much faster
> file-based "database" compared with a generic swap that you have
> little control over.
> 
> /Henrik
> 

-- 
Csardi Gabor <csardi at rmki.kfki.hu>    UNIL DGM


From murdoch at stats.uwo.ca  Thu Feb 14 17:18:17 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Thu, 14 Feb 2008 11:18:17 -0500
Subject: [Rd] Vector binding on harddisk
In-Reply-To: <59d7961d0802140754x216c9753la5ebcfa415439a39@mail.gmail.com>
References: <47B426BE.9010606@gmx.net>
	<47B45ABD.4010304@bank-banque-canada.ca>	<47B45CDC.2060803@vanderbilt.edu>
	<59d7961d0802140754x216c9753la5ebcfa415439a39@mail.gmail.com>
Message-ID: <47B469C9.2040505@stats.uwo.ca>

On 2/14/2008 10:54 AM, Henrik Bengtsson wrote:
> On Thu, Feb 14, 2008 at 7:23 AM, Jeffrey Horner
> <jeff.horner at vanderbilt.edu> wrote:
>> Paul Gilbert wrote on 02/14/2008 09:14 AM:
>>
>> >
>>  > _ wrote:
>>  >> Hi all,
>>  >> Using big vectors (more than 4GB) is unfortunately not possible under
>>  >> Windows or other OS's if not enough RAM exists.
>>  >
>>  > This is NOT true. It is not limited by RAM, but rather by RAM and swap
>>  > space.  With 500G hard disks at about $100, the more serious limitation
>>  > is a 32bit OS.  Speed is a different consideration, but I doubt that
>>  > taking over what the OS is suppose to do will be the real answer.
>>
>>  Umm... swap... yeah... My experience with any code that I write that
>>  needs to use swap is to reboot the machine and rewrite my code NOT to
>>  use swap.
> 
> ...and the OS can never predict how you are going to access the data -
> as a developer you will always be able to write a much faster
> file-based "database" compared with a generic swap that you have
> little control over.

The original request from "_" was for R to provide a generic swap 
mechanism.  Why would R be better at it than Linux, say?

It might make sense for "_" to write his own solution, but any general 
purpose solution in R is likely to have "disadvantages".  Either it will 
require too much work from the user (as he claims ff does), or it will 
be too generic and slow (as the OS swap mechanism is).

Duncan Murdoch

> 
> /Henrik
> 
>>
>>  Jeff
>>
>>
>>  >
>>  > Paul
>>  >
>>  >> Could it be possible to implement an a new data type in R, like a
>>  >> vector, but instead holding the information in memory, the data lies on
>>  >> an file. If data is accessed, the data type vector get the information
>>  >> automatically from the file.
>>  >> There is a package out there (named ff) but the accessed boundary have
>>  >> to be declared by the user this is a disadvantage.
>>  >>
>>  >> Greetings.
>>  >>
>>  >> ______________________________________________
>>  >> R-devel at r-project.org mailing list
>>  >> https://stat.ethz.ch/mailman/listinfo/r-devel
>>  > ====================================================================================
>>  >
>>  > La version fran?aise suit le texte anglais.
>>  >
>>  > ------------------------------------------------------------------------------------
>>  >
>>  > This email may contain privileged and/or confidential ...{{dropped:23}}
>>
>>
>>
>>  ______________________________________________
>>  R-devel at r-project.org mailing list
>>  https://stat.ethz.ch/mailman/listinfo/r-devel
>>
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From vincent.goulet at act.ulaval.ca  Thu Feb 14 17:21:22 2008
From: vincent.goulet at act.ulaval.ca (Vincent Goulet)
Date: Thu, 14 Feb 2008 11:21:22 -0500
Subject: [Rd] Small encoding question
Message-ID: <600C44D2-A4F2-4997-BD51-DCC1AFB9DCB0@act.ulaval.ca>

Dear developeRs,

Compilation of the latest version (0.9-5) of my actuar package fails  
with r-release MacOS_X ix86 on CRAN; see

	http://www.R-project.org/nosvn/R.check/r-release-macosx-ix86/actuar-00check.html

All errors come from accented letters in comments in latin-1 encoded  
files (except hierarc.R which is in UTF-8, my bad). Encoding is  
declared as latin-1 in DESCRIPTION.

The package checks and compiles fine on Windows, Linux and,  
ironically, my MacOS X main development machine. I realize using non- 
ASCII characters in source files is not a good idea and I removed  
them, but I would appreciate any clue as to what went wrong with the  
compilation on CRAN.

FWIW,

 > sessionInfo()
R version 2.6.2 (2008-02-08)
i386-apple-darwin8.10.1

locale:
fr_CA.UTF-8/fr_CA.UTF-8/fr_CA.UTF-8/C/fr_CA.UTF-8/fr_CA.UTF-8

attached base packages:
[1] stats     utils     datasets  grDevices graphics  methods   base

other attached packages:
[1] CarbonEL_0.1-4

loaded via a namespace (and not attached):
[1] tools_2.6.2

Thanks in advance!

---
   Vincent Goulet, Associate Professor
   ?cole d'actuariat
   Universit? Laval, Qu?bec
   Vincent.Goulet at act.ulaval.ca   http://vgoulet.act.ulaval.ca


From Greg.Snow at imail.org  Thu Feb 14 17:43:17 2008
From: Greg.Snow at imail.org (Greg Snow)
Date: Thu, 14 Feb 2008 09:43:17 -0700
Subject: [Rd] Vector binding on harddisk
In-Reply-To: <47B426BE.9010606@gmx.net>
References: <47B426BE.9010606@gmx.net>
Message-ID: <07E228A5BE53C24CAD490193A7381BBBEE07D6@LP-EXCHVS07.CO.IHC.COM>

You may want to look at the SQLiteDF package, this allows you to put
your data into an SQLite database and treat that like a normal vector or
data frame inside of R.

Hope this helps,

-- 
Gregory (Greg) L. Snow Ph.D.
Statistical Data Center
Intermountain Healthcare
greg.snow at imail.org
(801) 408-8111
 
 

> -----Original Message-----
> From: r-devel-bounces at r-project.org 
> [mailto:r-devel-bounces at r-project.org] On Behalf Of _
> Sent: Thursday, February 14, 2008 4:32 AM
> To: r-devel at r-project.org
> Subject: [Rd] Vector binding on harddisk
> 
> Hi all,
> Using big vectors (more than 4GB) is unfortunately not 
> possible under Windows or other OS's if not enough RAM exists.
> Could it be possible to implement an a new data type in R, 
> like a vector, but instead holding the information in memory, 
> the data lies on an file. If data is accessed, the data type 
> vector get the information automatically from the file.
> There is a package out there (named ff) but the accessed 
> boundary have to be declared by the user this is a disadvantage.
> 
> Greetings.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


From hb at stat.berkeley.edu  Thu Feb 14 17:57:32 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Thu, 14 Feb 2008 08:57:32 -0800
Subject: [Rd] Vector binding on harddisk
In-Reply-To: <47B469C9.2040505@stats.uwo.ca>
References: <47B426BE.9010606@gmx.net> <47B45ABD.4010304@bank-banque-canada.ca>
	<47B45CDC.2060803@vanderbilt.edu>
	<59d7961d0802140754x216c9753la5ebcfa415439a39@mail.gmail.com>
	<47B469C9.2040505@stats.uwo.ca>
Message-ID: <59d7961d0802140857r4432163ej1cd0c550a0f75585@mail.gmail.com>

On Thu, Feb 14, 2008 at 8:18 AM, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
> On 2/14/2008 10:54 AM, Henrik Bengtsson wrote:
>  > On Thu, Feb 14, 2008 at 7:23 AM, Jeffrey Horner
>  > <jeff.horner at vanderbilt.edu> wrote:
>  >> Paul Gilbert wrote on 02/14/2008 09:14 AM:
>  >>
>  >> >
>  >>  > _ wrote:
>  >>  >> Hi all,
>  >>  >> Using big vectors (more than 4GB) is unfortunately not possible under
>  >>  >> Windows or other OS's if not enough RAM exists.
>  >>  >
>  >>  > This is NOT true. It is not limited by RAM, but rather by RAM and swap
>  >>  > space.  With 500G hard disks at about $100, the more serious limitation
>  >>  > is a 32bit OS.  Speed is a different consideration, but I doubt that
>  >>  > taking over what the OS is suppose to do will be the real answer.
>  >>
>  >>  Umm... swap... yeah... My experience with any code that I write that
>  >>  needs to use swap is to reboot the machine and rewrite my code NOT to
>  >>  use swap.
>  >
>  > ...and the OS can never predict how you are going to access the data -
>  > as a developer you will always be able to write a much faster
>  > file-based "database" compared with a generic swap that you have
>  > little control over.
>
>  The original request from "_" was for R to provide a generic swap
>  mechanism.  Why would R be better at it than Linux, say?
>
>  It might make sense for "_" to write his own solution, but any general
>  purpose solution in R is likely to have "disadvantages".  Either it will
>  require too much work from the user (as he claims ff does), or it will
>  be too generic and slow (as the OS swap mechanism is).

But sometimes you don't have the option to store data in memory.
There is always an upper hardware limit and today most people hit that
either at 2/3/4GB or 64GB.

Databases are the most straightforward way to expand, but again it is
hard to beat a framework that stores (contiguous) data that is
optimize for reading and/or writing, for accessing the data by columns
or by row, or by chunks of subtables and so on.

But yes, the time to set this up from scratch can be substantial, but
if you plan to work with that amount of data for a while it is
probably worth investing the time sooner than later.  And don't get me
wrong, some database systems are fast, so make sure to look at those
options as well.

My $0.02

/Henrik

>
>  Duncan Murdoch
>
>
>
>  >
>  > /Henrik
>  >
>  >>
>  >>  Jeff
>  >>
>  >>
>  >>  >
>  >>  > Paul
>  >>  >
>  >>  >> Could it be possible to implement an a new data type in R, like a
>  >>  >> vector, but instead holding the information in memory, the data lies on
>  >>  >> an file. If data is accessed, the data type vector get the information
>  >>  >> automatically from the file.
>  >>  >> There is a package out there (named ff) but the accessed boundary have
>  >>  >> to be declared by the user this is a disadvantage.
>  >>  >>
>  >>  >> Greetings.
>  >>  >>
>  >>  >> ______________________________________________
>  >>  >> R-devel at r-project.org mailing list
>  >>  >> https://stat.ethz.ch/mailman/listinfo/r-devel
>  >>  > ====================================================================================
>  >>  >
>  >>  > La version fran?aise suit le texte anglais.
>  >>  >
>  >>  > ------------------------------------------------------------------------------------
>  >>  >
>  >>  > This email may contain privileged and/or confidential ...{{dropped:23}}
>  >>
>  >>
>  >>
>  >>  ______________________________________________
>  >>  R-devel at r-project.org mailing list
>  >>  https://stat.ethz.ch/mailman/listinfo/r-devel
>  >>
>  >
>  > ______________________________________________
>  > R-devel at r-project.org mailing list
>  > https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From cstrato at aon.at  Thu Feb 14 19:36:46 2008
From: cstrato at aon.at (cstrato)
Date: Thu, 14 Feb 2008 19:36:46 +0100
Subject: [Rd]  Vector binding on harddisk
References: 47B469C9.2040505@stats.uwo.ca
Message-ID: <47B48A3E.1010606@aon.at>

Dear Henrik

Please allow me to add also my opinion:
Databases may be the most straightforward way to expand, but in my 
opinion there is a better solution, which was developed for high energy 
physics, where people need to work with huge amounts of data including 
very large vectors.

The solution is called ROOT (see: http://root.cern.ch/), especially 
objects, called TTree, were developed for this purpose. A TTree loads 
only a defined subset into memory, but given enough space can be stored 
completely in memory (see: http://root.cern.ch/root/html/TTree.html).

Thus, ROOT is exactly the framework, from which you say: "it is hard to 
beat a framework that stores (contiguous) data that is optimized for 
reading and/or writing".

Best regards
Christian
_._._._._._._._._._._._._._._._
C.h.i.s.t.i.a.n S.t.r.a.t.o.w.a
V.i.e.n.n.a       A.u.s.t.r.i.a
e.m.a.i.l:    cstrato at aon.at
_._._._._._._._._._._._._._._._


From bcarvalh at jhsph.edu  Thu Feb 14 19:58:57 2008
From: bcarvalh at jhsph.edu (Benilton Carvalho)
Date: Thu, 14 Feb 2008 13:58:57 -0500
Subject: [Rd] Vector binding on harddisk
In-Reply-To: <07E228A5BE53C24CAD490193A7381BBBEE07D6@LP-EXCHVS07.CO.IHC.COM>
References: <47B426BE.9010606@gmx.net>
	<07E228A5BE53C24CAD490193A7381BBBEE07D6@LP-EXCHVS07.CO.IHC.COM>
Message-ID: <F234D5F2-CD67-47A6-B90A-50F87C2363E0@jhsph.edu>

also, take a look at the "ff" package.
b

On Feb 14, 2008, at 11:43 AM, Greg Snow wrote:

> You may want to look at the SQLiteDF package, this allows you to put
> your data into an SQLite database and treat that like a normal  
> vector or
> data frame inside of R.
>
> Hope this helps,
>
> -- 
> Gregory (Greg) L. Snow Ph.D.
> Statistical Data Center
> Intermountain Healthcare
> greg.snow at imail.org
> (801) 408-8111
>
>
>
>> -----Original Message-----
>> From: r-devel-bounces at r-project.org
>> [mailto:r-devel-bounces at r-project.org] On Behalf Of _
>> Sent: Thursday, February 14, 2008 4:32 AM
>> To: r-devel at r-project.org
>> Subject: [Rd] Vector binding on harddisk
>>
>> Hi all,
>> Using big vectors (more than 4GB) is unfortunately not
>> possible under Windows or other OS's if not enough RAM exists.
>> Could it be possible to implement an a new data type in R,
>> like a vector, but instead holding the information in memory,
>> the data lies on an file. If data is accessed, the data type
>> vector get the information automatically from the file.
>> There is a package out there (named ff) but the accessed
>> boundary have to be declared by the user this is a disadvantage.
>>
>> Greetings.
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From Kurt.Hornik at wu-wien.ac.at  Thu Feb 14 20:45:11 2008
From: Kurt.Hornik at wu-wien.ac.at (Kurt Hornik)
Date: Thu, 14 Feb 2008 20:45:11 +0100
Subject: [Rd] Small encoding question
In-Reply-To: <600C44D2-A4F2-4997-BD51-DCC1AFB9DCB0@act.ulaval.ca>
References: <600C44D2-A4F2-4997-BD51-DCC1AFB9DCB0@act.ulaval.ca>
Message-ID: <18356.39495.201156.757047@fangorn.hornik.net>

>>>>> Vincent Goulet writes:

> Dear developeRs,
> Compilation of the latest version (0.9-5) of my actuar package fails  
> with r-release MacOS_X ix86 on CRAN; see

> 	http://www.R-project.org/nosvn/R.check/r-release-macosx-ix86/actuar-00check.html

> All errors come from accented letters in comments in latin-1 encoded  
> files (except hierarc.R which is in UTF-8, my bad). Encoding is  
> declared as latin-1 in DESCRIPTION.

> The package checks and compiles fine on Windows, Linux and,  
> ironically, my MacOS X main development machine. I realize using non- 
> ASCII characters in source files is not a good idea and I removed  
> them, but I would appreciate any clue as to what went wrong with the  
> compilation on CRAN.

I assume that the MacOS X builds are done in a C locale?

Best
-k

> FWIW,

>> sessionInfo()
> R version 2.6.2 (2008-02-08)
> i386-apple-darwin8.10.1

> locale:
> fr_CA.UTF-8/fr_CA.UTF-8/fr_CA.UTF-8/C/fr_CA.UTF-8/fr_CA.UTF-8

> attached base packages:
> [1] stats     utils     datasets  grDevices graphics  methods   base

> other attached packages:
> [1] CarbonEL_0.1-4

> loaded via a namespace (and not attached):
> [1] tools_2.6.2

> Thanks in advance!

> ---
>    Vincent Goulet, Associate Professor
>    ?cole d'actuariat
>    Universit? Laval, Qu?bec
>    Vincent.Goulet at act.ulaval.ca   http://vgoulet.act.ulaval.ca

> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From simon.urbanek at r-project.org  Thu Feb 14 21:09:21 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 14 Feb 2008 15:09:21 -0500
Subject: [Rd] Small encoding question
In-Reply-To: <18356.39495.201156.757047@fangorn.hornik.net>
References: <600C44D2-A4F2-4997-BD51-DCC1AFB9DCB0@act.ulaval.ca>
	<18356.39495.201156.757047@fangorn.hornik.net>
Message-ID: <0137C480-C423-49B8-824D-40A71469442B@r-project.org>


On Feb 14, 2008, at 2:45 PM, Kurt Hornik wrote:

>>>>>> Vincent Goulet writes:
>
>> Dear developeRs,
>> Compilation of the latest version (0.9-5) of my actuar package fails
>> with r-release MacOS_X ix86 on CRAN; see
>
>> 	http://www.R-project.org/nosvn/R.check/r-release-macosx-ix86/actuar-00check.html
>
>> All errors come from accented letters in comments in latin-1 encoded
>> files (except hierarc.R which is in UTF-8, my bad). Encoding is
>> declared as latin-1 in DESCRIPTION.
>
>> The package checks and compiles fine on Windows, Linux and,
>> ironically, my MacOS X main development machine. I realize using non-
>> ASCII characters in source files is not a good idea and I removed
>> them, but I would appreciate any clue as to what went wrong with the
>> compilation on CRAN.
>
> I assume that the MacOS X builds are done in a C locale?
>

Yes - but isn't this very similar to the problem we have been talking  
about a while back? The check analyses were reporting an error  
although the code was fine (I think it boiled down to text connection  
I/O in the check scripts failing mysteriously due to the fact that it  
was using the wrong encoding) I'll have to check later today ...

Cheers,
S


>
>> FWIW,
>
>>> sessionInfo()
>> R version 2.6.2 (2008-02-08)
>> i386-apple-darwin8.10.1
>
>> locale:
>> fr_CA.UTF-8/fr_CA.UTF-8/fr_CA.UTF-8/C/fr_CA.UTF-8/fr_CA.UTF-8
>
>> attached base packages:
>> [1] stats     utils     datasets  grDevices graphics  methods   base
>
>> other attached packages:
>> [1] CarbonEL_0.1-4
>
>> loaded via a namespace (and not attached):
>> [1] tools_2.6.2
>
>> Thanks in advance!
>
>> ---
>>   Vincent Goulet, Associate Professor
>>   ?cole d'actuariat
>>   Universit? Laval, Qu?bec
>>   Vincent.Goulet at act.ulaval.ca   http://vgoulet.act.ulaval.ca
>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From ripley at stats.ox.ac.uk  Thu Feb 14 21:51:07 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 14 Feb 2008 20:51:07 +0000 (GMT)
Subject: [Rd] Small encoding question
In-Reply-To: <0137C480-C423-49B8-824D-40A71469442B@r-project.org>
References: <600C44D2-A4F2-4997-BD51-DCC1AFB9DCB0@act.ulaval.ca>
	<18356.39495.201156.757047@fangorn.hornik.net>
	<0137C480-C423-49B8-824D-40A71469442B@r-project.org>
Message-ID: <alpine.LFD.1.00.0802142048010.27234@gannet.stats.ox.ac.uk>

On Thu, 14 Feb 2008, Simon Urbanek wrote:

>
> On Feb 14, 2008, at 2:45 PM, Kurt Hornik wrote:
>
>>>>>>> Vincent Goulet writes:
>>
>>> Dear developeRs,
>>> Compilation of the latest version (0.9-5) of my actuar package fails
>>> with r-release MacOS_X ix86 on CRAN; see
>>
>>> 	http://www.R-project.org/nosvn/R.check/r-release-macosx-ix86/actuar-00check.html
>>
>>> All errors come from accented letters in comments in latin-1 encoded
>>> files (except hierarc.R which is in UTF-8, my bad). Encoding is
>>> declared as latin-1 in DESCRIPTION.
>>
>>> The package checks and compiles fine on Windows, Linux and,
>>> ironically, my MacOS X main development machine. I realize using non-
>>> ASCII characters in source files is not a good idea and I removed
>>> them, but I would appreciate any clue as to what went wrong with the
>>> compilation on CRAN.
>>
>> I assume that the MacOS X builds are done in a C locale?

That was my first thought, but it worked in a C locale for me, even on Mac 
OS X.  But then we know there are C locales and C locales ....

I think R-devel is somewhat less prone to such issues, and it was R-devel 
I checked.

> Yes - but isn't this very similar to the problem we have been talking
> about a while back? The check analyses were reporting an error
> although the code was fine (I think it boiled down to text connection
> I/O in the check scripts failing mysteriously due to the fact that it
> was using the wrong encoding) I'll have to check later today ...
>
> Cheers,
> S
>
>
>>
>>> FWIW,
>>
>>>> sessionInfo()
>>> R version 2.6.2 (2008-02-08)
>>> i386-apple-darwin8.10.1
>>
>>> locale:
>>> fr_CA.UTF-8/fr_CA.UTF-8/fr_CA.UTF-8/C/fr_CA.UTF-8/fr_CA.UTF-8
>>
>>> attached base packages:
>>> [1] stats     utils     datasets  grDevices graphics  methods   base
>>
>>> other attached packages:
>>> [1] CarbonEL_0.1-4
>>
>>> loaded via a namespace (and not attached):
>>> [1] tools_2.6.2
>>
>>> Thanks in advance!
>>
>>> ---
>>>   Vincent Goulet, Associate Professor
>>>   ?cole d'actuariat
>>>   Universit? Laval, Qu?bec
>>>   Vincent.Goulet at act.ulaval.ca   http://vgoulet.act.ulaval.ca
>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From susie at sapphire.phys.unm.edu  Thu Feb 14 22:06:32 2008
From: susie at sapphire.phys.unm.edu (Susan R. Atlas)
Date: Thu, 14 Feb 2008 14:06:32 -0700
Subject: [Rd] R on AIX?
Message-ID: <47B4AD58.2010006@sapphire.phys.unm.edu>

Hi,
   Last year our systems group tried to install R on an IBM
p5-570 machine (16 nodes, 256 GB shared RAM), running AIX 5.3.   They
ran into all sorts of difficulties and finally gave up.
   I am interested in trying again (and working with an IBM support
group if necessary), but before embarking on this odyssey I was
wondering if anyone on this list has ever successfully run
R on a similar architecture/AIX OS?   If so, is there any
kind of cribsheet or other underground documentation that we could
consult to get around any AIX peculiarities?
   Given IBM's long-term interest in the Life Sciences, it seems hard to
believe that R would not be supported on this platform, but
that is what we heard through the grapevine.
   Thanks for any thoughts/help with this.
    - Susan

-- 
 
 ------------------------------------------------------------------
 Susan R. Atlas
 Research Associate Professor, Physics and Astronomy
 Director, Cancer Research and Treatment Center Shared Resource for
    Bioinformatics and Computational Biology
 
 Department of Physics & Astronomy
 MSC07 4220                       p: 505.277.1509
 1 University of New Mexico       e: susie at sapphire.phys.unm.edu
 Albuquerque, NM 87131-0001       n: www.phys.unm.edu/CompMaterials


From bates at stat.wisc.edu  Thu Feb 14 22:44:16 2008
From: bates at stat.wisc.edu (Douglas Bates)
Date: Thu, 14 Feb 2008 15:44:16 -0600
Subject: [Rd] 0.45<0.45 = TRUE (PR#10744)
In-Reply-To: <XFMail.080213155707.Ted.Harding@manchester.ac.uk>
References: <47B2E550.2020604@lancaster.ac.uk>
	<XFMail.080213155707.Ted.Harding@manchester.ac.uk>
Message-ID: <40e66e0b0802141344t7a53088flba241b7ec68d3201@mail.gmail.com>

In the "R Programming Style" thread on R-help Ronald Rau gave a list
of aphorisms from "Elements of Programming Style" by Kernighan and
Plauger.  These include

10.0 times 0.1 is hardly ever 1.0

I think that should be included in FAQ 7.31


From deepayan.sarkar at gmail.com  Thu Feb 14 22:52:38 2008
From: deepayan.sarkar at gmail.com (Deepayan Sarkar)
Date: Thu, 14 Feb 2008 13:52:38 -0800
Subject: [Rd] R on AIX?
In-Reply-To: <47B4AD58.2010006@sapphire.phys.unm.edu>
References: <47B4AD58.2010006@sapphire.phys.unm.edu>
Message-ID: <eb555e660802141352s58e1ca75of8f5474353ffd81b@mail.gmail.com>

On 2/14/08, Susan R. Atlas <susie at sapphire.phys.unm.edu> wrote:
> Hi,
>    Last year our systems group tried to install R on an IBM
>  p5-570 machine (16 nodes, 256 GB shared RAM), running AIX 5.3.   They
>  ran into all sorts of difficulties and finally gave up.
>    I am interested in trying again (and working with an IBM support
>  group if necessary), but before embarking on this odyssey I was
>  wondering if anyone on this list has ever successfully run
>  R on a similar architecture/AIX OS?   If so, is there any
>  kind of cribsheet or other underground documentation that we could
>  consult to get around any AIX peculiarities?

Have you read the "R Installation and Administration" manual? [1] It
has a couple of paragraphs on AIX and suggests that installing R
should be possible at least on AIX 5.x 'powerpc'.

-Deepayan

[1] http://cran.us.r-project.org/doc/manuals/R-admin.html


From hill0093 at umn.edu  Thu Feb 14 23:43:58 2008
From: hill0093 at umn.edu (hill0093)
Date: Thu, 14 Feb 2008 14:43:58 -0800 (PST)
Subject: [Rd]  number formsat
Message-ID: <15470234.post@talk.nabble.com>


PROBLEM ONE
In my way of using R in print and plots,
R severely ignores formatting requests for numbers.
E.g.,
> n1=2008021323595999
> n1
[1] 2.008021e+15
> print(n1,digits=16)
[1] 2008021323595999
> print(n1,digits=18)
[1] 2008021323595999
> print(n1,digits=15)
[1] 2008021323595999
The e+15 form for similar numbers also 
appears in the tic mark labels in plots, 
but with yet other counts of significant digits.
PROBLEM TWO
I need to use a function that I could write,
since I have done it in several other languages,
to convert my calendar times of various 
lengths into linear time as I read the data.
Then I need to use an inverse function to 
convert the linear time for the tic mark labels
of plots of the data, and for printouts.
Where do I look to learn how to do this in R?


-- 
View this message in context: http://www.nabble.com/number-formsat-tp15470234p15470234.html
Sent from the R devel mailing list archive at Nabble.com.


From simon.urbanek at r-project.org  Thu Feb 14 23:59:53 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 14 Feb 2008 17:59:53 -0500
Subject: [Rd] number formsat
In-Reply-To: <15470234.post@talk.nabble.com>
References: <15470234.post@talk.nabble.com>
Message-ID: <4F69D69D-CF6F-43D9-82D1-30C6322F7E03@r-project.org>

Hill0093,

On Feb 14, 2008, at 5:43 PM, hill0093 wrote:

> PROBLEM ONE
> In my way of using R in print and plots,
> R severely ignores formatting requests for numbers.
> E.g.,
>> n1=2008021323595999
>> n1
> [1] 2.008021e+15
>> print(n1,digits=16)
> [1] 2008021323595999
>> print(n1,digits=18)
> [1] 2008021323595999
>> print(n1,digits=15)
> [1] 2008021323595999

You are not requesting specific formatting, you are requesting  
*significant digits* hence the above is as expected. For output  
formatting, see ?sprintf and ?formatC.


> The e+15 form for similar numbers also  appears in the tic mark  
> labels in plots,  but with yet other counts of significant digits.
> PROBLEM TWO
> I need to use a function that I could write, since I have done it in  
> several other languages, to convert my calendar times of various   
> lengths into linear time as I read the data. Then I need to use an  
> inverse function to  convert the linear time for the tic mark labels  
> of plots of the data, and for printouts.
> Where do I look to learn how to do this in R?
>

Time types in R are linear, try using them (see ?DateTimeClasses and ? 
as.POSIXct).

Please post help requests to R-help in the future.

Thanks,
Simon


From roland.rau at duke.edu  Fri Feb 15 00:30:25 2008
From: roland.rau at duke.edu (roland.rau at duke.edu)
Date: Fri, 15 Feb 2008 00:30:25 +0100 (CET)
Subject: [Rd] Documentation in merge() in base package: mistake and fix
	(PR#10761)
Message-ID: <20080214233026.06B092834170@mail.pubhealth.ku.dk>

Full_Name: Roland Rau
Version: 2.6.0
OS: mingw32
Submission from: (NULL) (152.3.243.170)


There is a minor problem in the documentation of the function merge in the base
package. The corresponding file is .../src/library/base/man/merge.Rd

?merge states
[...]
all logical; all = L is shorthand for all.x = L and all.y = L. 
[...]

Although I am pretty sure it should be:
[...]
all logical; all = T is shorthand for all.x = T and all.y = T. 
[...]

Should be simple to fix:
sed -i 's/ = L/ = T/g' merge.Rd

Although I don't use the latest version of R, I checked the source code of the
latest version (2.6.2) and also the page https://svn.r-project.org/R/trunk/NEWS
to check if it has been fixed already.

I hope this helps,
Roland


From simon.urbanek at r-project.org  Fri Feb 15 01:17:54 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 14 Feb 2008 19:17:54 -0500
Subject: [Rd] Small encoding question
In-Reply-To: <0137C480-C423-49B8-824D-40A71469442B@r-project.org>
References: <600C44D2-A4F2-4997-BD51-DCC1AFB9DCB0@act.ulaval.ca>
	<18356.39495.201156.757047@fangorn.hornik.net>
	<0137C480-C423-49B8-824D-40A71469442B@r-project.org>
Message-ID: <515F46B7-937F-441A-A2AE-FEF4E180464E@r-project.org>

I think I found the cause, but fixing it may be more complicated  
(other than a hot fix for this particular case).

What it boils down to is that the code for .check_package_code_syntax  
is trying to change the locale in a manner that doesn't work. In  
addition to that, the output of l10n_info() is wrong (for some  
definition of wrong), which complicates things even further.

To top it all, if run in a UTF-8 locale, everything is just fine -  
that's why the package will pass check on "regular" OS X, because  
UTF-8 locale is the default since Leopard.

.check_package_code_syntax() sees that the source requires Latin1, so  
it is checking whether the locale is utf-8, but it's not (because we  
force C) so it uses en_US. This may be the first problem, because  
en_US is not necessarily a latin1 locale at all (en_US.ISO8859-1 would  
be latin1 on OS X). However, the next problem is that l10n_info() is  
returning FALSE even for the (correct) latin1 locale and  
consequently(?) the reading fails.

ginaz:~$ echo 'Sys.getlocale(); l10n_info()'|LANG=en_US.ISO8859-1 R -- 
vanilla --slave
[1] "en_US.ISO8859-1/en_US.ISO8859-1/en_US.ISO8859-1/C/en_US.ISO8859-1/ 
en_US.ISO8859-1"
$MBCS
[1] FALSE

$`UTF-8`
[1] FALSE

$`Latin-1`
[1] FALSE

en_US.ISO8859-1 *is* a latin-1 locale ... I was looking hard and found  
no way how to link (installed) locales to encodings - there is no  
official mapping and POSIX allows arbitrary locales (and names) ..  
Hence all locale names are merely loose conventions... so I'm not sure  
how can R even make such a decision (other than parse the name?).

Anyway - a quick fix would be to force en_US.UTF-8  locale in that  
check for Mac OS X, but I think that doesn't fix the underlying  
problems ...

Cheers,
Simon


On Feb 14, 2008, at 3:09 PM, Simon Urbanek wrote:

>
> On Feb 14, 2008, at 2:45 PM, Kurt Hornik wrote:
>
>>>>>>> Vincent Goulet writes:
>>
>>> Dear developeRs,
>>> Compilation of the latest version (0.9-5) of my actuar package fails
>>> with r-release MacOS_X ix86 on CRAN; see
>>
>>> 	http://www.R-project.org/nosvn/R.check/r-release-macosx-ix86/actuar-00check.html
>>
>>> All errors come from accented letters in comments in latin-1 encoded
>>> files (except hierarc.R which is in UTF-8, my bad). Encoding is
>>> declared as latin-1 in DESCRIPTION.
>>
>>> The package checks and compiles fine on Windows, Linux and,
>>> ironically, my MacOS X main development machine. I realize using  
>>> non-
>>> ASCII characters in source files is not a good idea and I removed
>>> them, but I would appreciate any clue as to what went wrong with the
>>> compilation on CRAN.
>>
>> I assume that the MacOS X builds are done in a C locale?
>>
>
> Yes - but isn't this very similar to the problem we have been talking
> about a while back? The check analyses were reporting an error
> although the code was fine (I think it boiled down to text connection
> I/O in the check scripts failing mysteriously due to the fact that it
> was using the wrong encoding) I'll have to check later today ...
>
> Cheers,
> S
>
>
>>
>>> FWIW,
>>
>>>> sessionInfo()
>>> R version 2.6.2 (2008-02-08)
>>> i386-apple-darwin8.10.1
>>
>>> locale:
>>> fr_CA.UTF-8/fr_CA.UTF-8/fr_CA.UTF-8/C/fr_CA.UTF-8/fr_CA.UTF-8
>>
>>> attached base packages:
>>> [1] stats     utils     datasets  grDevices graphics  methods   base
>>
>>> other attached packages:
>>> [1] CarbonEL_0.1-4
>>
>>> loaded via a namespace (and not attached):
>>> [1] tools_2.6.2
>>
>>> Thanks in advance!
>>
>>> ---
>>>  Vincent Goulet, Associate Professor
>>>  ?cole d'actuariat
>>>  Universit? Laval, Qu?bec
>>>  Vincent.Goulet at act.ulaval.ca   http://vgoulet.act.ulaval.ca
>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From ripley at stats.ox.ac.uk  Fri Feb 15 04:53:31 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 15 Feb 2008 03:53:31 +0000 (GMT)
Subject: [Rd] Small encoding question
In-Reply-To: <515F46B7-937F-441A-A2AE-FEF4E180464E@r-project.org>
References: <600C44D2-A4F2-4997-BD51-DCC1AFB9DCB0@act.ulaval.ca>
	<18356.39495.201156.757047@fangorn.hornik.net>
	<0137C480-C423-49B8-824D-40A71469442B@r-project.org>
	<515F46B7-937F-441A-A2AE-FEF4E180464E@r-project.org>
Message-ID: <alpine.LFD.1.00.0802150328030.3841@gannet.stats.ox.ac.uk>

Have you set R_ENCODING_LOCALES?  That's how you tell R what locale to use 
for latin1 and UTF-8 when checking.  Details in R-exts.texi.

As it works for me in 'C' on Leopard with R-devel without setting this, I 
can't reproduce the problem to check if setting works.

For l10n_info, it is asking the nl_langinfo system.  Looks like Darwin 
is using unusual charset names: it reports ISO8859-1 and we are 
looking for (the more correct) ISO-8859-1: I've 'hot fixed' that.


On Thu, 14 Feb 2008, Simon Urbanek wrote:

> I think I found the cause, but fixing it may be more complicated
> (other than a hot fix for this particular case).
>
> What it boils down to is that the code for .check_package_code_syntax
> is trying to change the locale in a manner that doesn't work. In
> addition to that, the output of l10n_info() is wrong (for some
> definition of wrong), which complicates things even further.
>
> To top it all, if run in a UTF-8 locale, everything is just fine -
> that's why the package will pass check on "regular" OS X, because
> UTF-8 locale is the default since Leopard.
>
> .check_package_code_syntax() sees that the source requires Latin1, so
> it is checking whether the locale is utf-8, but it's not (because we
> force C) so it uses en_US. This may be the first problem, because
> en_US is not necessarily a latin1 locale at all (en_US.ISO8859-1 would
> be latin1 on OS X). However, the next problem is that l10n_info() is
> returning FALSE even for the (correct) latin1 locale and
> consequently(?) the reading fails.
>
> ginaz:~$ echo 'Sys.getlocale(); l10n_info()'|LANG=en_US.ISO8859-1 R --
> vanilla --slave
> [1] "en_US.ISO8859-1/en_US.ISO8859-1/en_US.ISO8859-1/C/en_US.ISO8859-1/
> en_US.ISO8859-1"
> $MBCS
> [1] FALSE
>
> $`UTF-8`
> [1] FALSE
>
> $`Latin-1`
> [1] FALSE
>
> en_US.ISO8859-1 *is* a latin-1 locale ... I was looking hard and found
> no way how to link (installed) locales to encodings - there is no
> official mapping and POSIX allows arbitrary locales (and names) ..
> Hence all locale names are merely loose conventions... so I'm not sure
> how can R even make such a decision (other than parse the name?).
>
> Anyway - a quick fix would be to force en_US.UTF-8  locale in that
> check for Mac OS X, but I think that doesn't fix the underlying
> problems ...
>
> Cheers,
> Simon
>
>
> On Feb 14, 2008, at 3:09 PM, Simon Urbanek wrote:
>
>>
>> On Feb 14, 2008, at 2:45 PM, Kurt Hornik wrote:
>>
>>>>>>>> Vincent Goulet writes:
>>>
>>>> Dear developeRs,
>>>> Compilation of the latest version (0.9-5) of my actuar package fails
>>>> with r-release MacOS_X ix86 on CRAN; see
>>>
>>>> 	http://www.R-project.org/nosvn/R.check/r-release-macosx-ix86/actuar-00check.html
>>>
>>>> All errors come from accented letters in comments in latin-1 encoded
>>>> files (except hierarc.R which is in UTF-8, my bad). Encoding is
>>>> declared as latin-1 in DESCRIPTION.
>>>
>>>> The package checks and compiles fine on Windows, Linux and,
>>>> ironically, my MacOS X main development machine. I realize using
>>>> non-
>>>> ASCII characters in source files is not a good idea and I removed
>>>> them, but I would appreciate any clue as to what went wrong with the
>>>> compilation on CRAN.
>>>
>>> I assume that the MacOS X builds are done in a C locale?
>>>
>>
>> Yes - but isn't this very similar to the problem we have been talking
>> about a while back? The check analyses were reporting an error
>> although the code was fine (I think it boiled down to text connection
>> I/O in the check scripts failing mysteriously due to the fact that it
>> was using the wrong encoding) I'll have to check later today ...
>>
>> Cheers,
>> S
>>
>>
>>>
>>>> FWIW,
>>>
>>>>> sessionInfo()
>>>> R version 2.6.2 (2008-02-08)
>>>> i386-apple-darwin8.10.1
>>>
>>>> locale:
>>>> fr_CA.UTF-8/fr_CA.UTF-8/fr_CA.UTF-8/C/fr_CA.UTF-8/fr_CA.UTF-8
>>>
>>>> attached base packages:
>>>> [1] stats     utils     datasets  grDevices graphics  methods   base
>>>
>>>> other attached packages:
>>>> [1] CarbonEL_0.1-4
>>>
>>>> loaded via a namespace (and not attached):
>>>> [1] tools_2.6.2
>>>
>>>> Thanks in advance!
>>>
>>>> ---
>>>>  Vincent Goulet, Associate Professor
>>>>  ?cole d'actuariat
>>>>  Universit? Laval, Qu?bec
>>>>  Vincent.Goulet at act.ulaval.ca   http://vgoulet.act.ulaval.ca
>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Fri Feb 15 05:04:14 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 15 Feb 2008 04:04:14 +0000 (GMT)
Subject: [Rd] R on AIX?
In-Reply-To: <47B4AD58.2010006@sapphire.phys.unm.edu>
References: <47B4AD58.2010006@sapphire.phys.unm.edu>
Message-ID: <alpine.LFD.1.00.0802150353540.3841@gannet.stats.ox.ac.uk>

A few people have reported success on AIX 5.2, and their experiences are 
in the 'R Installation and Administration Manual'.  At least one of those 
people has reported success on AIX 5.3 as well.  Of course, we tend only 
to hear about failures.


On Thu, 14 Feb 2008, Susan R. Atlas wrote:

> Hi,
>   Last year our systems group tried to install R on an IBM
> p5-570 machine (16 nodes, 256 GB shared RAM), running AIX 5.3.   They
> ran into all sorts of difficulties and finally gave up.
>   I am interested in trying again (and working with an IBM support
> group if necessary), but before embarking on this odyssey I was
> wondering if anyone on this list has ever successfully run
> R on a similar architecture/AIX OS?   If so, is there any
> kind of cribsheet or other underground documentation that we could
> consult to get around any AIX peculiarities?
>   Given IBM's long-term interest in the Life Sciences, it seems hard to
> believe that R would not be supported on this platform, but
> that is what we heard through the grapevine.
>   Thanks for any thoughts/help with this.
>    - Susan
>
> --
>
> ------------------------------------------------------------------
> Susan R. Atlas
> Research Associate Professor, Physics and Astronomy
> Director, Cancer Research and Treatment Center Shared Resource for
>    Bioinformatics and Computational Biology
>
> Department of Physics & Astronomy
> MSC07 4220                       p: 505.277.1509
> 1 University of New Mexico       e: susie at sapphire.phys.unm.edu
> Albuquerque, NM 87131-0001       n: www.phys.unm.edu/CompMaterials
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Jerry.Lewis at biogenidec.com  Fri Feb 15 06:25:03 2008
From: Jerry.Lewis at biogenidec.com (Jerry.Lewis at biogenidec.com)
Date: Fri, 15 Feb 2008 06:25:03 +0100 (CET)
Subject: [Rd] Overly restrictive conditions to evaluate beta (PR#10763)
Message-ID: <20080215052503.E74FA2834170@mail.pubhealth.ku.dk>

Full_Name: Jerry W. Lewis
Version: 2.6.2
OS: Windows XP Professional
Submission from: (NULL) (96.233.108.117)


Currently, beta(a,b) returns NaN if either a or b is negative, but the current
calculation 
  beta(a,b) = gamma(a)*gamma(b)/gamma(a+b)
works equally well if either or both arguments are negative, provided that none
of a, b, a+b is a negative integer.

Also, if n>m>0 are integers, then 
  B(m,-n) = (-1)^m * B(m,n-m+1)


From schmidb at ibe.med.uni-muenchen.de  Fri Feb 15 15:47:16 2008
From: schmidb at ibe.med.uni-muenchen.de (Markus Schmidberger)
Date: Fri, 15 Feb 2008 15:47:16 +0100
Subject: [Rd] Namespace and function open
Message-ID: <47B5A5F4.7080809@ibe.med.uni-muenchen.de>

Hello,

I built a package, everything was working very well. Now I included a 
NAMESPACE to export only some variables. (export(f, g, ...) )
Everything is working fine, except one function. There I get an error:

Fehler in UseMethod("open") : keine anwendbare Methode f?r "open"

In this function I use the function "open" to generate an output bar.

*    if (verbose) {
      pbt <- new("ProgressBarText", length(ids), barsteps = as.integer(20))
      open(pbt)
    }
   
    for (i in seq(along=ids)) {
   
      if (verbose) {
        update(pbt)
      }

How I have to change my NAMESPACE file to fix this problem?

Thanks
Markus Schmidberger


*


From albert at hjarta.is  Fri Feb 15 16:05:28 2008
From: albert at hjarta.is (albert at hjarta.is)
Date: Fri, 15 Feb 2008 16:05:28 +0100 (CET)
Subject: [Rd] Mac crash with installing packages (PR#10764)
Message-ID: <20080215150528.731122834615@mail.pubhealth.ku.dk>

Full_Name: Albert Vernon Smith
Version: R 2.6.2
OS: MacOSX 10.4.11
Submission from: (NULL) (143.48.31.42)


Whenever I install a package in R 2.6.2 via the "R Package Installer"
functionality (Mac OS X 10.4.11), R crashes after the installation.  When I
restart, the installed package seems to be installed fine, just the annoying
crash with each install.


From jerry.lewis at biogenidec.com  Fri Feb 15 16:20:07 2008
From: jerry.lewis at biogenidec.com (jerry.lewis at biogenidec.com)
Date: Fri, 15 Feb 2008 16:20:07 +0100 (CET)
Subject: [Rd] pt inaccurate when x is close to 0 (PR#9945)
Message-ID: <20080215152008.0C4D8283462C@mail.pubhealth.ku.dk>

While I agree that the reported results from Mathematica have only 10-13 
correct digits, that does not mean that pt() in R is any better for these 
calculations.  For instance the following three calculations are 
mathematically equivalent, but pt() disagrees at the 13th figure in R 
v2.6.2
  pt(1e-4,13)
  pf(1e-8,1,13)/2+0.5
  pbeta(1/(1+13/1e-8),.5,6.5)/2+0.5
Using 1/(1+n/x^2) and reversing the shape parameters avoids the accuracy 
loss that Thomas Lumley was concerned about.

The following reference values for pt(1e-4,1:100) were computed in Maple 
to 400 figures and then rounded to 17.  To 17 figures, there was no 
difference in the results whether I used the exact value of 10^(-4) or the 
exact binary double precision approximation of 7378697629483821*2^(-66). 
Compared to these reference values, log relative errors (LRE, essentially 
the number of correct figures) for pt ranged from 10.7 to 13.4, while
  pf(1e-8,1,df)/2+0.5
and
  pbeta(1/(1+df/1e-8),.5,df/2)/2+0.5
agreed exactly with Maple, except for 21 and 90 df, where the LRE was 
15.65.  Clearly it would be quite easy to improve pt() for small values of 
x.


Jerry W. Lewis
Lead Statistician
Biogen Idec
Cambridge, MA  USA


z<-c(0.50003183098851228, 0.50003535533897094, 0.50003675525961311, 
0.50003749999992188, 0.50003796066890633, 0.50003827327715657, 
0.50003849914500990, 0.50003866990202363, 0.50003880349081531, 
0.50003891083832527, 0.50003899897563476, 0.50003907263045176, 
0.50003913509812855, 0.50003918874550927, 0.50003923531621426, 
0.50003927612297732, 0.50003931217293135, 0.50003934425160310, 
0.50003937298066018, 0.50003939885850220, 0.50003942228935944, 
0.50003944360452316, 0.50003946307808180, 0.50003948093875281, 
0.50003949737889518, 0.50003951256145633, 0.50003952662538506, 
0.50003953968989187, 0.50003955185783298, 0.50003956321842127, 
0.50003957384941549, 0.50003958381890103, 0.50003959318674852, 
0.50003960200581637, 0.50003961032294799, 0.50003961817980360, 
0.50003962561355779, 0.50003963265748728, 0.50003963934146876, 
0.50003964569240221, 0.50003965173457262, 0.50003965748996017, 
0.50003966297850729, 0.50003966821834945, 0.50003967322601522, 
0.50003967801660046, 0.50003968260392016, 0.50003968700064152, 
0.50003969121840071, 0.50003969526790563, 0.50003969915902671, 
0.50003970290087718, 0.50003970650188431, 0.50003970996985278, 
0.50003971331202108, 0.50003971653511200, 0.50003971964537768, 
0.50003972264864014, 0.50003972555032763, 0.50003972835550734, 
0.50003973106891495, 0.50003973369498129, 0.50003973623785651, 
0.50003973870143192, 0.50003974108935987, 0.50003974340507184, 
0.50003974565179484, 0.50003974783256646, 0.50003974995024854, 
0.50003975200753972, 0.50003975400698688, 0.50003975595099569, 
0.50003975784184024, 0.50003975968167193, 0.50003976147252762, 
0.50003976321633717, 0.50003976491493036, 0.50003976657004330, 
0.50003976818332434, 0.50003976975633955, 0.50003977129057782, 
0.50003977278745549, 0.50003977424832079, 0.50003977567445783, 
0.50003977706709040, 0.50003977842738546, 0.50003977975645637, 
0.50003978105536601, 0.50003978232512953, 0.50003978356671702, 
0.50003978478105603, 0.50003978596903380, 0.50003978713149950, 
0.50003978826926618, 0.50003978938311274, 0.50003979047378564, 
0.50003979154200064, 0.50003979258844427, 0.50003979361377541, 
0.50003979461862660)
	[[alternative HTML version deleted]]


From ripley at stats.ox.ac.uk  Fri Feb 15 17:06:23 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 15 Feb 2008 16:06:23 +0000 (GMT)
Subject: [Rd] pt inaccurate when x is close to 0 (PR#9945)
In-Reply-To: <20080215152008.0C4D8283462C@mail.pubhealth.ku.dk>
References: <20080215152008.0C4D8283462C@mail.pubhealth.ku.dk>
Message-ID: <alpine.LFD.1.00.0802151603390.4041@gannet.stats.ox.ac.uk>

Please do as the FAQ asked you to, and check the NEWS file at

 	https://svn.R-project.org/R/trunk/NEWS

R 2.6.2 is not the '_next_ release of R', and that pre-release behaves 
differently as documented in the NEWS file.


On Fri, 15 Feb 2008, jerry.lewis at biogenidec.com wrote:

> While I agree that the reported results from Mathematica have only 10-13
> correct digits, that does not mean that pt() in R is any better for these
> calculations.  For instance the following three calculations are
> mathematically equivalent, but pt() disagrees at the 13th figure in R
> v2.6.2
>  pt(1e-4,13)
>  pf(1e-8,1,13)/2+0.5
>  pbeta(1/(1+13/1e-8),.5,6.5)/2+0.5
> Using 1/(1+n/x^2) and reversing the shape parameters avoids the accuracy
> loss that Thomas Lumley was concerned about.
>
> The following reference values for pt(1e-4,1:100) were computed in Maple
> to 400 figures and then rounded to 17.  To 17 figures, there was no
> difference in the results whether I used the exact value of 10^(-4) or the
> exact binary double precision approximation of 7378697629483821*2^(-66).
> Compared to these reference values, log relative errors (LRE, essentially
> the number of correct figures) for pt ranged from 10.7 to 13.4, while
>  pf(1e-8,1,df)/2+0.5
> and
>  pbeta(1/(1+df/1e-8),.5,df/2)/2+0.5
> agreed exactly with Maple, except for 21 and 90 df, where the LRE was
> 15.65.  Clearly it would be quite easy to improve pt() for small values of
> x.
>
>
> Jerry W. Lewis
> Lead Statistician
> Biogen Idec
> Cambridge, MA  USA
>
>
> z<-c(0.50003183098851228, 0.50003535533897094, 0.50003675525961311,
> 0.50003749999992188, 0.50003796066890633, 0.50003827327715657,
> 0.50003849914500990, 0.50003866990202363, 0.50003880349081531,
> 0.50003891083832527, 0.50003899897563476, 0.50003907263045176,
> 0.50003913509812855, 0.50003918874550927, 0.50003923531621426,
> 0.50003927612297732, 0.50003931217293135, 0.50003934425160310,
> 0.50003937298066018, 0.50003939885850220, 0.50003942228935944,
> 0.50003944360452316, 0.50003946307808180, 0.50003948093875281,
> 0.50003949737889518, 0.50003951256145633, 0.50003952662538506,
> 0.50003953968989187, 0.50003955185783298, 0.50003956321842127,
> 0.50003957384941549, 0.50003958381890103, 0.50003959318674852,
> 0.50003960200581637, 0.50003961032294799, 0.50003961817980360,
> 0.50003962561355779, 0.50003963265748728, 0.50003963934146876,
> 0.50003964569240221, 0.50003965173457262, 0.50003965748996017,
> 0.50003966297850729, 0.50003966821834945, 0.50003967322601522,
> 0.50003967801660046, 0.50003968260392016, 0.50003968700064152,
> 0.50003969121840071, 0.50003969526790563, 0.50003969915902671,
> 0.50003970290087718, 0.50003970650188431, 0.50003970996985278,
> 0.50003971331202108, 0.50003971653511200, 0.50003971964537768,
> 0.50003972264864014, 0.50003972555032763, 0.50003972835550734,
> 0.50003973106891495, 0.50003973369498129, 0.50003973623785651,
> 0.50003973870143192, 0.50003974108935987, 0.50003974340507184,
> 0.50003974565179484, 0.50003974783256646, 0.50003974995024854,
> 0.50003975200753972, 0.50003975400698688, 0.50003975595099569,
> 0.50003975784184024, 0.50003975968167193, 0.50003976147252762,
> 0.50003976321633717, 0.50003976491493036, 0.50003976657004330,
> 0.50003976818332434, 0.50003976975633955, 0.50003977129057782,
> 0.50003977278745549, 0.50003977424832079, 0.50003977567445783,
> 0.50003977706709040, 0.50003977842738546, 0.50003977975645637,
> 0.50003978105536601, 0.50003978232512953, 0.50003978356671702,
> 0.50003978478105603, 0.50003978596903380, 0.50003978713149950,
> 0.50003978826926618, 0.50003978938311274, 0.50003979047378564,
> 0.50003979154200064, 0.50003979258844427, 0.50003979361377541,
> 0.50003979461862660)
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From simon.urbanek at r-project.org  Fri Feb 15 17:20:41 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 15 Feb 2008 11:20:41 -0500
Subject: [Rd] Mac crash with installing packages (PR#10764)
In-Reply-To: <20080215150528.731122834615@mail.pubhealth.ku.dk>
References: <20080215150528.731122834615@mail.pubhealth.ku.dk>
Message-ID: <A3EF66B9-D8BA-40F1-BD8A-368B979E6360@r-project.org>


On Feb 15, 2008, at 10:05 AM, albert at hjarta.is wrote:

> Full_Name: Albert Vernon Smith
> Version: R 2.6.2
> OS: MacOSX 10.4.11
> Submission from: (NULL) (143.48.31.42)
>
>
> Whenever I install a package in R 2.6.2 via the "R Package  
> Installer" functionality (Mac OS X 10.4.11), R crashes after the  
> installation.  When I restart, the installed package seems to be  
> installed fine, just the annoying crash with each install.
>

I cannot reproduce the problem. When you see a crash, please send us  
the full crash information.

Thanks,
Simon


From lawremi at iastate.edu  Fri Feb 15 17:59:38 2008
From: lawremi at iastate.edu (Michael Lawrence)
Date: Fri, 15 Feb 2008 10:59:38 -0600
Subject: [Rd] RGtk2 : Using GtkImage with GIF (PR#10757)
In-Reply-To: <20080214102003.9E6982834612@mail.pubhealth.ku.dk>
References: <20080214102003.9E6982834612@mail.pubhealth.ku.dk>
Message-ID: <509e0620802150859u4f0df7cfu2d0bf21ad0f64700@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080215/7085cc53/attachment.pl 

From albert at hjarta.is  Fri Feb 15 17:45:51 2008
From: albert at hjarta.is (Albert Vernon Smith)
Date: Fri, 15 Feb 2008 16:45:51 +0000
Subject: [Rd] Mac crash with installing packages (PR#10764)
In-Reply-To: <A3EF66B9-D8BA-40F1-BD8A-368B979E6360@r-project.org>
References: <20080215150528.731122834615@mail.pubhealth.ku.dk> 
	<A3EF66B9-D8BA-40F1-BD8A-368B979E6360@r-project.org>
Message-ID: <F7C23FE9-3545-4471-A592-BE2D32FECB54@hjarta.is>

My original description was not full enough.  I only get the crash  
when I'm installing from source.  If I install precompiled binaries,  
I seem to be fine.  Also, if I install via the command  
'install.packages(type="source")', I don't get a crash.  It is  
specific to the "Package Installer" menu option with "source" installs.

I still think this could be something specific to me, though I saw it  
immediately upon upgrading to 2.6.2.  The crash is completely silent  
w.r.t. what appears in R.  If I choose the "report" option of what  
should be sent to Apple, I get the report below.

-albert

=======

Date/Time:      2008-02-15 16:28:25.523 +0000
OS Version:     10.4.11 (Build 8S2167)
Report Version: 4

Command: R
Path:    /Applications/R.app/Contents/MacOS/R
Parent:  WindowServer [378]

Version: R 2.6.2 GUI 1.23 (4932) (4932)

PID:    10466
Thread: 2

Exception:  EXC_BREAKPOINT (0x0006)
Code[0]:    0x00000002
Code[1]:    0x00000000


Thread 0:
0   libSystem.B.dylib        	0x90037b57 mach_wait_until + 7
1   org.R-project.R          	0x000060dd -[RController  
handleSystemCommand:] + 602
2   org.R-project.R          	0x0000d1cb Re_system + 86
3   libR.dylib               	0x00457366 R_system + 82
4   libR.dylib               	0x004b0066 do_system + 656
5   libR.dylib               	0x003ba55c do_internal + 336
6   libR.dylib               	0x0038518e Rf_eval + 1182
7   libR.dylib               	0x00385f3f do_begin + 58
8   libR.dylib               	0x0038518e Rf_eval + 1182
9   libR.dylib               	0x003874a4 Rf_applyClosure + 663
10  libR.dylib               	0x00385085 Rf_eval + 917
11  libR.dylib               	0x00389576 do_set + 592
12  libR.dylib               	0x0038518e Rf_eval + 1182
13  libR.dylib               	0x00385f3f do_begin + 58
14  libR.dylib               	0x0038518e Rf_eval + 1182
15  libR.dylib               	0x00388deb do_for + 585
16  libR.dylib               	0x0038518e Rf_eval + 1182
17  libR.dylib               	0x00385f3f do_begin + 58
18  libR.dylib               	0x0038518e Rf_eval + 1182
19  libR.dylib               	0x0038518e Rf_eval + 1182
20  libR.dylib               	0x00385f3f do_begin + 58
21  libR.dylib               	0x0038518e Rf_eval + 1182
22  libR.dylib               	0x003874a4 Rf_applyClosure + 663
23  libR.dylib               	0x00385085 Rf_eval + 917
24  libR.dylib               	0x0034657a protectedEval + 44
25  libR.dylib               	0x00346beb R_ToplevelExec + 234
26  libR.dylib               	0x00346c2a R_tryEval + 56
27  org.R-project.R          	0x0000f624 -[REngine  
evaluateExpressions:] + 168
28  org.R-project.R          	0x0000fa08 -[REngine executeString:] +
202
29  org.R-project.R          	0x00013a09 -[PackageInstaller  
installSelected:] + 2978
30  com.apple.AppKit         	0x93383dbc -[NSApplication  
sendAction:to:from:] + 107
31  com.apple.AppKit         	0x93383d15 -[NSControl sendAction:to:]  
+ 101
32  com.apple.AppKit         	0x93385ec1 -[NSCell _sendActionFrom:] +
168
33  com.apple.AppKit         	0x933986a1 -[NSCell  
trackMouse:inRect:ofView:untilMouseUp:] + 1271
34  com.apple.AppKit         	0x933b6289 -[NSButtonCell  
trackMouse:inRect:ofView:untilMouseUp:] + 848
35  com.apple.AppKit         	0x933b5b39 -[NSControl mouseDown:] + 757
36  com.apple.AppKit         	0x933733e3 -[NSWindow sendEvent:] + 5279
37  com.apple.AppKit         	0x93365384 -[NSApplication sendEvent:]  
+ 5023
38  org.R-project.R          	0x00007ff2 -[RController  
doProcessEvents:] + 517
39  org.R-project.R          	0x00005680 -[RController  
handleReadConsole:] + 76
40  org.R-project.R          	0x0000cd2d Re_ReadConsole + 86
41  org.R-project.R          	0x00016362 run_REngineRmainloop + 271
42  org.R-project.R          	0x0000f336 -[REngine runREPL] + 406
43  org.R-project.R          	0x00002795 main + 1135
44  org.R-project.R          	0x0000230a _start + 216
45  org.R-project.R          	0x00002231 start + 41

Thread 1:
0   libSystem.B.dylib        	0x90009cd7 mach_msg_trap + 7
1   com.apple.CoreFoundation 	0x9082d23b CFRunLoopRunSpecific + 2014
2   com.apple.CoreFoundation 	0x9082ca56 CFRunLoopRunInMode + 61
3   com.apple.Foundation     	0x92854bca +[NSURLCache  
_diskCacheSyncLoop:] + 206
4   com.apple.Foundation     	0x927f82c0 forkThreadForFunction + 123
5   libSystem.B.dylib        	0x90024227 _pthread_body + 84

Thread 2 Crashed:
0   com.apple.Foundation     	0x9282b45f _NSRaiseError + 227
1   com.apple.Foundation     	0x9284747d -[NSConnection  
sendInvocation:] + 1378
2   com.apple.Foundation     	0x927fe448 -[NSObject 
(NSForwardInvocation) forward::] + 469
3   libobjc.A.dylib          	0x90a5ccc1 _objc_msgForward + 49
4   org.R-project.R          	0x0000483d -[RController readThread:] +
1508
5   com.apple.Foundation     	0x927f82c0 forkThreadForFunction + 123
6   libSystem.B.dylib        	0x90024227 _pthread_body + 84

Thread 3:
0   libSystem.B.dylib        	0x9003f6cf syscall_thread_switch + 7
1   com.apple.AppKit         	0x9336d6a2 -[NSUIHeartBeat  
_heartBeatThread:] + 1399
2   com.apple.Foundation     	0x927f82c0 forkThreadForFunction + 123
3   libSystem.B.dylib        	0x90024227 _pthread_body + 84

Thread 2 crashed with X86 Thread State (32-bit):
   eax: 0x010fc000  ebx: 0x9282b38a  ecx: 0x90a66b30  edx: 0x011e2920
   edi: 0x0d2633f0  esi: 0x0d263500  ebp: 0xb019f968  esp: 0xb019f900
    ss: 0x0000001f  efl: 0x00000246  eip: 0x9282b45f   cs: 0x00000017
    ds: 0x0000001f   es: 0x0000001f   fs: 0x00000000   gs: 0x00000037

Binary Images Description:
     0x1000 -    0x3dfff org.R-project.R R 2.6.2 GUI 1.23 (4932)  
(4932)	/Applications/R.app/Contents/MacOS/R
    0x59000 -    0x5afff libRblas.dylib 	/Library/Frameworks/ 
R.framework/Versions/2.6/Resources/lib/libRblas.dylib
    0x5f000 -    0x66fff libgcc_s.1.dylib 	/Library/Frameworks/ 
R.framework/Versions/2.6/Resources/lib/libgcc_s.1.dylib
    0x8d000 -    0xb3fff libreadline.5.2.dylib 	/Library/Frameworks/ 
R.framework/Versions/2.6/Resources/lib/libreadline.5.2.dylib
   0x2f4000 -   0x50cfff libR.dylib 	/Library/Frameworks/R.framework/
Versions/2.6/Resources/lib/libR.dylib
   0x5e8000 -   0x673fff libgfortran.2.dylib 	/Library/Frameworks/ 
R.framework/Versions/2.6/Resources/lib/libgfortran.2.dylib
  0xd496000 -  0xd49afff methods.so 	/Library/Frameworks/R.framework/
Versions/2.6/Resources/library/methods/libs/i386/methods.so
  0xd4f9000 -  0xd515fff grDevices.so 	/Library/Frameworks/ 
R.framework/Versions/2.6/Resources/library/grDevices/libs/i386/ 
grDevices.so
  0xe6e1000 -  0xe733fff stats.so 	/Library/Frameworks/R.framework/
Versions/2.6/Resources/library/stats/libs/i386/stats.so
  0xf7f6000 -  0xf7f9fff tools.so 	/Library/Frameworks/R.framework/
Versions/2.6/Resources/library/tools/libs/i386/tools.so
0x106ae000 - 0x106b7fff internet.so 	/Library/Frameworks/R.framework/
Versions/2.6/Resources/modules/i386/internet.so
0x8fe00000 - 0x8fe4afff dyld 46.16	/usr/lib/dyld
0x90000000 - 0x90171fff libSystem.B.dylib
/usr/lib/libSystem.B.dylib
0x901c1000 - 0x901c3fff libmathCommon.A.dylib 	/usr/lib/system/ 
libmathCommon.A.dylib
0x901c5000 - 0x90202fff com.apple.CoreText 1.1.3 (???)	/System/ 
Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/CoreText.framework/Versions/A/CoreText
0x90229000 - 0x902fffff ATS 	/System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/ 
Versions/A/ATS
0x9031f000 - 0x90774fff com.apple.CoreGraphics 1.258.77 (???)	/System/
Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics
0x9080b000 - 0x908d3fff com.apple.CoreFoundation 6.4.9 (368.31)	/ 
System/Library/Frameworks/CoreFoundation.framework/Versions/A/ 
CoreFoundation
0x90911000 - 0x90911fff com.apple.CoreServices 10.4 (???)	/System/
Library/Frameworks/CoreServices.framework/Versions/A/CoreServices
0x90913000 - 0x90a07fff libicucore.A.dylib
/usr/lib/libicucore.A.dylib
0x90a57000 - 0x90ad6fff libobjc.A.dylib 	/usr/lib/libobjc.A.dylib
0x90aff000 - 0x90b63fff libstdc++.6.dylib
/usr/lib/libstdc++.6.dylib
0x90bd2000 - 0x90bd9fff libgcc_s.1.dylib
/usr/lib/libgcc_s.1.dylib
0x90bde000 - 0x90c51fff com.apple.framework.IOKit 1.4.8 (???)	/System/
Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x90c66000 - 0x90c78fff libauto.dylib 	/usr/lib/libauto.dylib
0x90c7e000 - 0x90f24fff com.apple.CoreServices.CarbonCore 682.28
/ 
System/Library/Frameworks/CoreServices.framework/Versions/A/ 
Frameworks/CarbonCore.framework/Versions/A/CarbonCore
0x90f67000 - 0x90fcffff com.apple.CoreServices.OSServices 4.1	/System/
Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/ 
OSServices.framework/Versions/A/OSServices
0x91008000 - 0x91047fff com.apple.CFNetwork 129.22	/System/Library/
Frameworks/CoreServices.framework/Versions/A/Frameworks/ 
CFNetwork.framework/Versions/A/CFNetwork
0x9105a000 - 0x9106afff com.apple.WebServices 1.1.3 (1.1.0)	/System/
Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/ 
WebServicesCore.framework/Versions/A/WebServicesCore
0x91075000 - 0x910f4fff com.apple.SearchKit 1.0.7	/System/Library/
Frameworks/CoreServices.framework/Versions/A/Frameworks/ 
SearchKit.framework/Versions/A/SearchKit
0x9112e000 - 0x9114cfff com.apple.Metadata 10.4.4 (121.36)	/System/
Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/ 
Metadata.framework/Versions/A/Metadata
0x91158000 - 0x91166fff libz.1.dylib 	/usr/lib/libz.1.dylib
0x91169000 - 0x91308fff com.apple.security 4.5.2 (29774)	/System/
Library/Frameworks/Security.framework/Versions/A/Security
0x91406000 - 0x9140efff com.apple.DiskArbitration 2.1.2	/System/ 
Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration
0x91415000 - 0x9141cfff libbsm.dylib 	/usr/lib/libbsm.dylib
0x91420000 - 0x91446fff com.apple.SystemConfiguration 1.8.6	/System/
Library/Frameworks/SystemConfiguration.framework/Versions/A/ 
SystemConfiguration
0x91458000 - 0x914cefff com.apple.audio.CoreAudio 3.0.5	/System/ 
Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio
0x9151f000 - 0x9151ffff com.apple.ApplicationServices 10.4 (???)
/ 
System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
ApplicationServices
0x91521000 - 0x9154dfff com.apple.AE 314 (313)	/System/Library/ 
Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
AE.framework/Versions/A/AE
0x91560000 - 0x91634fff com.apple.ColorSync 4.4.10	/System/Library/
Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
ColorSync.framework/Versions/A/ColorSync
0x9166f000 - 0x916e2fff com.apple.print.framework.PrintCore 4.6  
(177.13)
/System/Library/Frameworks/ApplicationServices.framework/ 
Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore
0x91710000 - 0x917b9fff com.apple.QD 3.10.25 (???)	/System/Library/
Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
QD.framework/Versions/A/QD
0x917df000 - 0x9182afff com.apple.HIServices 1.5.2 (???)	/System/
Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/HIServices.framework/Versions/A/HIServices
0x91849000 - 0x9185ffff com.apple.LangAnalysis 1.6.3	/System/Library/
Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
LangAnalysis.framework/Versions/A/LangAnalysis
0x9186b000 - 0x91886fff com.apple.FindByContent 1.5	/System/Library/
Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
FindByContent.framework/Versions/A/FindByContent
0x91891000 - 0x918cefff com.apple.LaunchServices 182	/System/Library/
Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ 
LaunchServices.framework/Versions/A/LaunchServices
0x918e2000 - 0x918eefff com.apple.speech.synthesis.framework 3.5
/ 
System/Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
0x918f5000 - 0x91935fff com.apple.ImageIO.framework 1.5.6	/System/
Library/Frameworks/ApplicationServices.framework/Versions/A/ 
Frameworks/ImageIO.framework/Versions/A/ImageIO
0x91948000 - 0x919fafff libcrypto.0.9.7.dylib 	/usr/lib/libcrypto. 
0.9.7.dylib
0x91a40000 - 0x91a56fff libcups.2.dylib 	/usr/lib/libcups.2.dylib
0x91a5b000 - 0x91a79fff libJPEG.dylib 	/System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/ 
Versions/A/Resources/libJPEG.dylib
0x91a7e000 - 0x91addfff libJP2.dylib 	/System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/ 
Versions/A/Resources/libJP2.dylib
0x91aef000 - 0x91af3fff libGIF.dylib 	/System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/ 
Versions/A/Resources/libGIF.dylib
0x91af5000 - 0x91b7dfff libRaw.dylib 	/System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/ 
Versions/A/Resources/libRaw.dylib
0x91b81000 - 0x91bbefff libTIFF.dylib 	/System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/ 
Versions/A/Resources/libTIFF.dylib
0x91bc4000 - 0x91bdefff libPng.dylib 	/System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/ 
Versions/A/Resources/libPng.dylib
0x91be3000 - 0x91be5fff libRadiance.dylib
/System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/ 
Versions/A/Resources/libRadiance.dylib
0x91be7000 - 0x91cc5fff libxml2.2.dylib 	/usr/lib/libxml2.2.dylib
0x91ce2000 - 0x91ce2fff com.apple.Accelerate 1.3.1 (Accelerate  
1.3.1)	/System/Library/Frameworks/Accelerate.framework/Versions/A/ 
Accelerate
0x91ce4000 - 0x91d72fff com.apple.vImage 2.5	/System/Library/ 
Frameworks/Accelerate.framework/Versions/A/Frameworks/ 
vImage.framework/Versions/A/vImage
0x91d79000 - 0x91d79fff com.apple.Accelerate.vecLib 3.3.1 (vecLib  
3.3.1)	/System/Library/Frameworks/Accelerate.framework/Versions/A/ 
Frameworks/vecLib.framework/Versions/A/vecLib
0x91d7b000 - 0x91dd4fff libvMisc.dylib 	/System/Library/Frameworks/ 
Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/ 
A/libvMisc.dylib
0x91ddd000 - 0x91e01fff libvDSP.dylib 	/System/Library/Frameworks/ 
Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/ 
A/libvDSP.dylib
0x91e09000 - 0x92212fff libBLAS.dylib 	/System/Library/Frameworks/ 
Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/ 
A/libBLAS.dylib
0x9224c000 - 0x92600fff libLAPACK.dylib
/System/Library/Frameworks/ 
Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/ 
A/libLAPACK.dylib
0x9262d000 - 0x9271afff libiconv.2.dylib
/usr/lib/libiconv.2.dylib
0x9271c000 - 0x9279afff com.apple.DesktopServices 1.3.7	/System/ 
Library/PrivateFrameworks/DesktopServicesPriv.framework/Versions/A/ 
DesktopServicesPriv
0x927db000 - 0x92a0bfff com.apple.Foundation 6.4.9 (567.36)	/System/
Library/Frameworks/Foundation.framework/Versions/C/Foundation
0x92b25000 - 0x92b3cfff libGL.dylib 	/System/Library/Frameworks/ 
OpenGL.framework/Versions/A/Libraries/libGL.dylib
0x92b47000 - 0x92b9ffff libGLU.dylib 	/System/Library/Frameworks/ 
OpenGL.framework/Versions/A/Libraries/libGLU.dylib
0x92bb3000 - 0x92bb3fff com.apple.Carbon 10.4 (???)	/System/Library/
Frameworks/Carbon.framework/Versions/A/Carbon
0x92bb5000 - 0x92bc5fff com.apple.ImageCapture 3.0.4	/System/Library/
Frameworks/Carbon.framework/Versions/A/Frameworks/ 
ImageCapture.framework/Versions/A/ImageCapture
0x92bd4000 - 0x92bdcfff com.apple.speech.recognition.framework 3.6
/ 
System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
SpeechRecognition.framework/Versions/A/SpeechRecognition
0x92be2000 - 0x92be8fff com.apple.securityhi 2.0.1 (24742)	/System/
Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
SecurityHI.framework/Versions/A/SecurityHI
0x92bee000 - 0x92c7ffff com.apple.ink.framework 101.2.1 (71)	/System/
Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
Ink.framework/Versions/A/Ink
0x92c93000 - 0x92c97fff com.apple.help 1.0.3 (32.1)	/System/Library/
Frameworks/Carbon.framework/Versions/A/Frameworks/Help.framework/ 
Versions/A/Help
0x92c9a000 - 0x92cb8fff com.apple.openscripting 1.2.5 (???)	/System/
Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
OpenScripting.framework/Versions/A/OpenScripting
0x92cca000 - 0x92cd0fff com.apple.print.framework.Print 5.2 (192.4)
/ 
System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
Print.framework/Versions/A/Print
0x92cd6000 - 0x92d39fff com.apple.htmlrendering 66.1 (1.1.3)	/System/
Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
HTMLRendering.framework/Versions/A/HTMLRendering
0x92d60000 - 0x92da1fff com.apple.NavigationServices 3.4.4 (3.4.3)
/ 
System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
NavigationServices.framework/Versions/A/NavigationServices
0x92dc8000 - 0x92dd6fff com.apple.audio.SoundManager 3.9.1	/System/
Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
CarbonSound.framework/Versions/A/CarbonSound
0x92ddd000 - 0x92de2fff com.apple.CommonPanels 1.2.3 (73)	/System/
Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
CommonPanels.framework/Versions/A/CommonPanels
0x92de7000 - 0x930dcfff com.apple.HIToolbox 1.4.10 (???)	/System/
Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ 
HIToolbox.framework/Versions/A/HIToolbox
0x931e2000 - 0x931edfff com.apple.opengl 1.4.16	/System/Library/ 
Frameworks/OpenGL.framework/Versions/A/OpenGL
0x9327d000 - 0x9327dfff com.apple.Cocoa 6.4 (???)	/System/Library/
Frameworks/Cocoa.framework/Versions/A/Cocoa
0x9327f000 - 0x93935fff com.apple.AppKit 6.4.9 (824.44)	/System/ 
Library/Frameworks/AppKit.framework/Versions/C/AppKit
0x93cb6000 - 0x93d31fff com.apple.CoreData 91 (92.1)	/System/Library/
Frameworks/CoreData.framework/Versions/A/CoreData
0x93d6a000 - 0x93e23fff com.apple.audio.toolbox.AudioToolbox 1.4.7
/ 
System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox
0x93e66000 - 0x93e66fff com.apple.audio.units.AudioUnit 1.4.2	/System/
Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit
0x93e68000 - 0x94029fff com.apple.QuartzCore 1.4.12	/System/Library/
Frameworks/QuartzCore.framework/Versions/A/QuartzCore
0x9406f000 - 0x940b0fff libsqlite3.0.dylib
/usr/lib/libsqlite3.0.dylib
0x940b8000 - 0x940f2fff libGLImage.dylib
/System/Library/Frameworks/ 
OpenGL.framework/Versions/A/Libraries/libGLImage.dylib
0x940f7000 - 0x9410dfff com.apple.CoreVideo 1.4.2	/System/Library/
Frameworks/CoreVideo.framework/Versions/A/CoreVideo
0x942a1000 - 0x942b0fff libCGATS.A.dylib
/System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ 
CoreGraphics.framework/Versions/A/Resources/libCGATS.A.dylib
0x942b7000 - 0x942c2fff libCSync.A.dylib
/System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ 
CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
0x9430e000 - 0x94328fff libRIP.A.dylib 	/System/Library/Frameworks/ 
ApplicationServices.framework/Versions/A/Frameworks/ 
CoreGraphics.framework/Versions/A/Resources/libRIP.A.dylib
0x951f3000 - 0x952a3fff com.apple.WebKit 523.12.2	/System/Library/
Frameworks/WebKit.framework/Versions/A/WebKit
0x95309000 - 0x953acfff com.apple.JavaScriptCore 523.12	/System/ 
Library/Frameworks/JavaScriptCore.framework/Versions/A/JavaScriptCore
0x953d4000 - 0x95899fff com.apple.WebCore 523.12.2	/System/Library/
Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/ 
Versions/A/WebCore
0x95e2d000 - 0x95e2ffff com.apple.ExceptionHandling 1.2 (???)	/System/
Library/Frameworks/ExceptionHandling.framework/Versions/A/ 
ExceptionHandling
0x9632d000 - 0x9635bfff libncurses.5.4.dylib 	/usr/lib/libncurses. 
5.4.dylib
0x96da2000 - 0x96da2fff com.apple.vecLib 3.3.1 (vecLib 3.3.1)	/System/
Library/Frameworks/vecLib.framework/Versions/A/vecLib

Model: MacBookPro2,2, BootROM MBP22.00A5.B07, 2 processors, Intel  
Core 2 Duo, 2.16 GHz, 2 GB
Graphics: ATI Radeon X1600, ATY,RadeonX1600, PCIe, 128 MB
Memory Module: BANK 0/DIMM0, 1 GB, DDR2 SDRAM, 667 MHz
Memory Module: BANK 1/DIMM1, 1 GB, DDR2 SDRAM, 667 MHz
AirPort: AirPort Extreme, 1.2.2
Bluetooth: Version 1.9.5f4, 2 service, 0 devices, 1 incoming serial  
ports
Network Service: Built-in Ethernet, Ethernet, en0
Serial ATA Device: FUJITSU MHW2120BH, 111.79 GB
Parallel ATA Device: HL-DT-ST DVDRW GWA4080MA
USB Device: Built-in iSight, Micron, Up to 480 Mb/sec, 500 mA
USB Device: Hub, Up to 480 Mb/sec, 500 mA
USB Device: Hub in Apple Pro Keyboard, Mitsumi Electric, Up to 12 Mb/ 
sec, 500 mA
USB Device: Apple Optical USB Mouse, Primax Electronics, Up to 1.5 Mb/ 
sec, 100 mA
USB Device: CP2102 USB to UART Bridge Controller, Silicon Labs, Up to  
12 Mb/sec, 100 mA
USB Device: Apple Pro Keyboard, Mitsumi Electric, Up to 12 Mb/sec,  
250 mA
USB Device: Apple Cinema HD Display, Apple Computer, Inc., Up to 12  
Mb/sec, 500 mA
USB Device: Apple Internal Keyboard / Trackpad, Apple Computer, Up to  
12 Mb/sec, 500 mA
USB Device: IR Receiver, Apple Computer, Inc., Up to 12 Mb/sec, 500 mA
USB Device: Bluetooth USB Host Controller, Apple, Inc., Up to 12 Mb/ 
sec, 500 mA
FireWire Device: unknown_device, unknown_value, Unknown

=========


On Feb 15, 2008, at 4:20 PM, Simon Urbanek wrote:

>
> On Feb 15, 2008, at 10:05 AM, albert at hjarta.is wrote:
>
>> Full_Name: Albert Vernon Smith
>> Version: R 2.6.2
>> OS: MacOSX 10.4.11
>> Submission from: (NULL) (143.48.31.42)
>>
>>
>> Whenever I install a package in R 2.6.2 via the "R Package  
>> Installer" functionality (Mac OS X 10.4.11), R crashes after the  
>> installation.  When I restart, the installed package seems to be  
>> installed fine, just the annoying crash with each install.
>>
>
> I cannot reproduce the problem. When you see a crash, please send  
> us the full crash information.
>
> Thanks,
> Simon
>
>
 
 






 
Ahattureiknivel Hjartaverndar
<http://www.hjarta.is/index.aspx?GroupId=411> , veist ?u ?ina ahattu ?

________________________________

?essi tolvupostur og vi?hengi gati innihaldi? truna?arupplysingar og/e?a
einkamal og er eingongu atla?ur ?eim sem hann er stila?ur a. 

Efni hans og innihald er a abyrg??ess starfsmanns sem sendir hann ef ?a?
tengist ekki starfsemi Hjartaverndar
Ef sending ?essi hefur ranglega borist y?ur vinsamlega gati? fyllsta
truna?ar,tilkynni? sendanda og ey?ileggi? sendinguna eins og skylt er
skv. 
5. mgr. 47. gr. laga um fjarskipti nr. 81/2003 um fjarskipti.

The information transmitted, including any attachment, may contain
confidential and/or privileged material and is intended only for the 
addressee only. The contents of the message are the individual senders
responsibility if it is not related to the operation of Hjartavernd
If you receive this in error, please keep the information confidential,
contact the sender and delete the material from your system.


From btyner at gmail.com  Fri Feb 15 21:01:09 2008
From: btyner at gmail.com (Benjamin Tyner)
Date: Fri, 15 Feb 2008 15:01:09 -0500
Subject: [Rd] data frame with NA in names
Message-ID: <5f88b2c50802151201i26c9025bi8858a9170df688f7@mail.gmail.com>

When calling read.table() and supplying colClasses and header=FALSE,
it is possible for the resulting data frame to have NA in the names.
(The warning "not all columns named in 'colClasses' exist" is
returned)

Here is such a data frame:

x <- structure(list(a = 1:10,
                    "NA" = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)),
                    .Names = c("a", NA_character_),
                    row.names = c(NA, -10L),
                    class = "data.frame")

One undesirable property of such a data frame is that subset() has
trouble with it:

subset(x, a > 5)

Error in `[.data.frame`(x, r, vars, drop = drop) :
  undefined columns selected


Is this a bug in read.table() ?

Thanks
Ben


From vogranovich at jumptrading.com  Fri Feb 15 21:29:02 2008
From: vogranovich at jumptrading.com (Vadim Organovich)
Date: Fri, 15 Feb 2008 14:29:02 -0600
Subject: [Rd] Rscript temp file
Message-ID: <22D850BC39A25742977325ADDE208E7702669562E2@chiexchange02.w2k.jumptrading.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080215/015437a5/attachment.pl 

From dominik.locher at bondsearch.ch  Fri Feb 15 22:25:11 2008
From: dominik.locher at bondsearch.ch (dominik.locher at bondsearch.ch)
Date: Fri, 15 Feb 2008 22:25:11 +0100 (CET)
Subject: [Rd] dir.create in 2.7.0dev (PR#10765)
Message-ID: <20080215212511.9102A2834611@mail.pubhealth.ku.dk>

Hi

I have some problems to create severeal directories at the same time

dir2 = "C:/00test000/test/test1"
dir.create(dir2, showWarnings = TRUE, recursive = TRUE)

It works in 2.6.2 but not in 2.7.0dev
I use Windows, R 2.7.0 (2008-02-15 r44484)

Best regards
Dominik


From Jerry.Lewis at biogenidec.com  Fri Feb 15 22:45:03 2008
From: Jerry.Lewis at biogenidec.com (Jerry.Lewis at biogenidec.com)
Date: Fri, 15 Feb 2008 22:45:03 +0100 (CET)
Subject: [Rd] choose incorrect for fractional and some negative integer
	values (PR#10766)
Message-ID: <20080215214503.5D115283416B@mail.pubhealth.ku.dk>

Full_Name: Jerry W. Lewis
Version: 2.6.2
OS: Windows XP Professional
Submission from: (NULL) (198.180.131.16)


choose() returns incorrect values for all fractional arguments, regardless of
sign.  It returns 0 when both arguments are negative integers, which is not
always correct (as in some formulations of the negative hypergeometric).

Examples (correct answers from Maple's binomial function):

choose( 4.75,2.75)  # should be 8.90625
choose(-0.75,-0.5)  # should be 1.6692536833481464
choose(-1.75,-0.5)  # should be 0.55641789444938212
choose(-2.75,-1.5)  # should be 0.15897654127125204
choose(-5,   -7)    # should be 15

The correct answers for first two can be verified easily since choose(n,k)
should equal
  1/beta(n-k+1,k+1)/(n+1)
but does not for fractional arguments.  The latter three are instances where
beta incorrectly returns NaN, as noted in PR#10763


From ripley at stats.ox.ac.uk  Fri Feb 15 23:27:12 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 15 Feb 2008 22:27:12 +0000 (GMT)
Subject: [Rd] dir.create in 2.7.0dev (PR#10765)
In-Reply-To: <20080215212511.9102A2834611@mail.pubhealth.ku.dk>
References: <20080215212511.9102A2834611@mail.pubhealth.ku.dk>
Message-ID: <alpine.LFD.1.00.0802152219580.23181@gannet.stats.ox.ac.uk>

1) You were expressly asked not to use R-bugs for unreleased versions of 
R. See e.g. http://cran.r-project.org/bin/windows/base/rdevel.html

2) This does work, but at the moment you have to use Windows ("\\") file 
separators.

You really shouldn't expect all the convenience features to be working in 
development versions of R which are well off release.  A note to R-devel 
that you missed something is fine: to misuse R-bugs is 'unkind'.


On Fri, 15 Feb 2008, dominik.locher at bondsearch.ch wrote:

> Hi
>
> I have some problems to create severeal directories at the same time
>
> dir2 = "C:/00test000/test/test1"
> dir.create(dir2, showWarnings = TRUE, recursive = TRUE)

And without knowing what existed before, this is not reproducible.

>
> It works in 2.6.2 but not in 2.7.0dev
> I use Windows, R 2.7.0 (2008-02-15 r44484)
>
> Best regards
> Dominik
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jeff.horner at vanderbilt.edu  Fri Feb 15 23:29:40 2008
From: jeff.horner at vanderbilt.edu (Jeffrey Horner)
Date: Fri, 15 Feb 2008 16:29:40 -0600
Subject: [Rd] R crashes with debug()
Message-ID: <47B61254.20602@vanderbilt.edu>

I know this may be a pathological case, but I found it while debugging 
PopCon:

Invoking a debugged function prior to the conclusion of 
setup_Rmainloop() will cause R to crash because R_ConsoleIob is not 
initialized until run_Rmainloop().

Tested in R-2-6-branch and trunk on Linux.

Crash it like this from a shell command line:

$ cat >> ~/.Rprofile <<EOF
foo <- function() x<-1
debug(foo)
foo()
EOF

$ $R

R version 2.7.0 Under development (unstable) (2008-02-15 r44481)
Copyright (C) 2008 The R Foundation for Statistical Computing
ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

   Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

debugging in: foo()
debug: x <- 1
Browse[1]> q

  *** caught segfault ***
address (nil), cause 'memory not mapped'

Traceback:
  1: foo()

Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace
Selection:

Jeff
-- 
http://biostat.mc.vanderbilt.edu/JeffreyHorner


From vogranovich at jumptrading.com  Sat Feb 16 00:37:26 2008
From: vogranovich at jumptrading.com (Vadim Organovich)
Date: Fri, 15 Feb 2008 17:37:26 -0600
Subject: [Rd] crash in library(gbm) was:  Rscript temp file
Message-ID: <22D850BC39A25742977325ADDE208E7702669562E4@chiexchange02.w2k.jumptrading.com>

The crashes turned out to have nothing to do with the temp files. They seem to be caused by loading library(gbm). That is when many R sessions nearly simultaneously load the library R crashes with the message "The instruction at '0x63422398' referenced memory at '0x63422398'. The required data was not placed into memory because of an I/O error status of '0xc000020c'".

Does anyone have an idea what that might mean?

I am not able to reproduce it in controlled environment. This is Windows.

Thanks,
Vadim


________________________________________
From: r-devel-bounces at r-project.org [r-devel-bounces at r-project.org] On Behalf Of Vadim Organovich [vogranovich at jumptrading.com]
Sent: Friday, February 15, 2008 2:29 PM
To: r-devel at r-project.org
Subject: [Rd] Rscript temp file

Hi,

It seems that Rscript creates a temporary file to store the commands passed with the -e  option, under normal circumstances the temp  file gets deleted at some point.

Here is an example of a call I use:
q:/R/R-2.6.1/bin/Rscript.exe -e ".libPaths(\"q:/R/vogranovich/library\"); params <- list(a=1); source(foo)"

The temp files seem to be a problem when multiple jobs are run simultaneously. I suspect that when two Rscripts are run at almost the same time they try to create the same tepm file and clash over it, which causes one or both of them to die.

Is my guesswork corect? If yes, is there a way to avoid the clash, say by specifying which directory to use for temp files?

Thanks,
Vadim

        [[alternative HTML version deleted]]

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel


From hin-tak.leung at cimr.cam.ac.uk  Sat Feb 16 04:09:33 2008
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Sat, 16 Feb 2008 03:09:33 +0000
Subject: [Rd] Perils of R_LIBRARY_PATH
In-Reply-To: <Pine.LNX.4.64.0802131346450.10778@auk.stats>
References: <Pine.LNX.4.64.0802131346450.10778@auk.stats>
Message-ID: <47B653ED.5040800@cimr.cam.ac.uk>

Hi,

Just for interest, may I ask which platform are you referring to?
You are on a commercial unix platform such as solaris, right?

Older JDK/JRE on unices uses motif as the the AWT peer implementation.
The motif toolkit libraries are always found on commercial unices, but
for the same reason, not found on linux (and Sun JDK for linux used to
link to motif statically, I think). Recent JDK/JRE uses a Gtk AWT peer
(also the case for gcj). I have Sun JDK 1.4, 1.5, 1.6 and the newly
open-sourced 1.7 (this comes with fedora 8) on linux (as well as gcj),
but none of them have gtk libs bundled... but I can imagine Sun need to
ship gtk libs with jdk for older commercial unices - newer commercial 
unices may or may not have the gtk libs. (some do, I believe).

Cheers,
Hin-Tak

Prof Brian Ripley wrote:
> The R front end sets (via etc/ldpath) R_LIBRARY_PATH, including 
> R_JAVA_LD_LIBRARY_PATH.  Perhaps the later is too obliging, as I've just 
> be caught by it in a way that took me a while to track down.
> 
> One of my machines has a Sun jdk1.6.0* JDK installed, and as a result
> we have
> 
> ${R_JAVA_LD_LIBRARY_PATH=${JAVA_HOME}/lib/amd64/server:${JAVA_HOME}/lib/amd64:
> ${JAVA_HOME}/../lib/amd64}
> 
> What I was not aware of was that the Sun JDK contains Gtk+ libraries such 
> as cairo and pango, and those were older than the ones whose headers I 
> had compiled against which eventually resulted in a crash.
> 
> It seems to be an issue only for a JDK: perhaps Simon can tweak his 
> incantations to use only the JRE library path (and avoid the 
> '../lib/amd64' above)?
>


From ripley at stats.ox.ac.uk  Sat Feb 16 08:25:11 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 16 Feb 2008 07:25:11 +0000 (GMT)
Subject: [Rd] Perils of R_LIBRARY_PATH
In-Reply-To: <47B653ED.5040800@cimr.cam.ac.uk>
References: <Pine.LNX.4.64.0802131346450.10778@auk.stats>
	<47B653ED.5040800@cimr.cam.ac.uk>
Message-ID: <alpine.LFD.1.00.0802160714090.4940@gannet.stats.ox.ac.uk>

On Sat, 16 Feb 2008, Hin-Tak Leung wrote:

> Hi,
>
> Just for interest, may I ask which platform are you referring to?
> You are on a commercial unix platform such as solaris, right?

amd64 Linux -- a bit of tracing shows that to be from a jpackage-d version 
of the Sun SDK.  So my guess is that the packaging picked up the libs (I 
didn't install that particular JDK).

> Older JDK/JRE on unices uses motif as the the AWT peer implementation.
> The motif toolkit libraries are always found on commercial unices, but
> for the same reason, not found on linux (and Sun JDK for linux used to
> link to motif statically, I think). Recent JDK/JRE uses a Gtk AWT peer
> (also the case for gcj). I have Sun JDK 1.4, 1.5, 1.6 and the newly
> open-sourced 1.7 (this comes with fedora 8) on linux (as well as gcj),
> but none of them have gtk libs bundled... but I can imagine Sun need to
> ship gtk libs with jdk for older commercial unices - newer commercial unices 
> may or may not have the gtk libs. (some do, I believe).

Solaris 10 has Gtk2 but not cairo (which is relevant as R will have a 
cairo-based version of X11).

> Cheers,
> Hin-Tak
>
> Prof Brian Ripley wrote:
>> The R front end sets (via etc/ldpath) R_LIBRARY_PATH, including 
>> R_JAVA_LD_LIBRARY_PATH.  Perhaps the later is too obliging, as I've just be 
>> caught by it in a way that took me a while to track down.
>> 
>> One of my machines has a Sun jdk1.6.0* JDK installed, and as a result
>> we have
>> 
>> ${R_JAVA_LD_LIBRARY_PATH=${JAVA_HOME}/lib/amd64/server:${JAVA_HOME}/lib/amd64:
>> ${JAVA_HOME}/../lib/amd64}
>> 
>> What I was not aware of was that the Sun JDK contains Gtk+ libraries such 
>> as cairo and pango, and those were older than the ones whose headers I had 
>> compiled against which eventually resulted in a crash.
>> 
>> It seems to be an issue only for a JDK: perhaps Simon can tweak his 
>> incantations to use only the JRE library path (and avoid the '../lib/amd64' 
>> above)?
>> 
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From gmail at kubism.ku.dk  Sat Feb 16 19:05:15 2008
From: gmail at kubism.ku.dk (gmail at kubism.ku.dk)
Date: Sat, 16 Feb 2008 19:05:15 +0100 (CET)
Subject: [Rd] Arithmetic bug? (found when use POSIXct) (PR#10776)
Message-ID: <20080216180515.6EB6D2834619@mail.pubhealth.ku.dk>

Full_Name: Bo Zhou
Version: 2.6.1 (2007-11-26)
OS: Windows XP
Submission from: (NULL) (207.237.54.242)


Hi,

I found an arithmetic problem when I'm doing something with POSIXct
The code to reproduce it is as follows (This is the recommended way of finding
out time zone difference on R News 2004-1 Page 32 URL
http://cran.r-project.org/doc/Rnews/Rnews_2004-1.pdf)

a=Sys.time()
b<-as.POSIXct(format(a,tz="GMT"))
a-b
unclass(a)
unclass(b)
unclass(a)-unclass(b)
as.numeric(a)
as.numeric(b)
as.numeric(a)-as.numeric(b)

The result on my machine

> a=Sys.time()
> b<-as.POSIXct(format(a,tz="GMT"))
> a-b
Time difference of -4.999969 hours
> unclass(a)
[1] 1203184447
> unclass(b)
[1] 1203202447
attr(,"tzone")
[1] ""
> unclass(a)-unclass(b)
[1] -17999.89
attr(,"tzone")
[1] ""
> as.numeric(a)
[1] 1203184447
> as.numeric(b)
[1] 1203202447
> as.numeric(a)-as.numeric(b)
[1] -17999.89
>


From ggrothendieck at gmail.com  Sat Feb 16 19:42:16 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 16 Feb 2008 13:42:16 -0500
Subject: [Rd] Arithmetic bug? (found when use POSIXct) (PR#10776)
In-Reply-To: <20080216180515.6EB6D2834619@mail.pubhealth.ku.dk>
References: <20080216180515.6EB6D2834619@mail.pubhealth.ku.dk>
Message-ID: <971536df0802161042r46f4dd8dqe164c05f3360f399@mail.gmail.com>

See FAQ 7.31 or explain what you believe to be the problem.

On Feb 16, 2008 1:05 PM,  <gmail at kubism.ku.dk> wrote:
> Full_Name: Bo Zhou
> Version: 2.6.1 (2007-11-26)
> OS: Windows XP
> Submission from: (NULL) (207.237.54.242)
>
>
> Hi,
>
> I found an arithmetic problem when I'm doing something with POSIXct
> The code to reproduce it is as follows (This is the recommended way of finding
> out time zone difference on R News 2004-1 Page 32 URL
> http://cran.r-project.org/doc/Rnews/Rnews_2004-1.pdf)
>
> a=Sys.time()
> b<-as.POSIXct(format(a,tz="GMT"))
> a-b
> unclass(a)
> unclass(b)
> unclass(a)-unclass(b)
> as.numeric(a)
> as.numeric(b)
> as.numeric(a)-as.numeric(b)
>
> The result on my machine
>
> > a=Sys.time()
> > b<-as.POSIXct(format(a,tz="GMT"))
> > a-b
> Time difference of -4.999969 hours
> > unclass(a)
> [1] 1203184447
> > unclass(b)
> [1] 1203202447
> attr(,"tzone")
> [1] ""
> > unclass(a)-unclass(b)
> [1] -17999.89
> attr(,"tzone")
> [1] ""
> > as.numeric(a)
> [1] 1203184447
> > as.numeric(b)
> [1] 1203202447
> > as.numeric(a)-as.numeric(b)
> [1] -17999.89


From vogranovich at jumptrading.com  Sun Feb 17 01:56:55 2008
From: vogranovich at jumptrading.com (Vadim Organovich)
Date: Sat, 16 Feb 2008 18:56:55 -0600
Subject: [Rd] forcing gc() to do its work
Message-ID: <22D850BC39A25742977325ADDE208E7702669562E6@chiexchange02.w2k.jumptrading.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080216/34601173/attachment.pl 

From murdoch at stats.uwo.ca  Sun Feb 17 02:05:06 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sat, 16 Feb 2008 20:05:06 -0500
Subject: [Rd] forcing gc() to do its work
In-Reply-To: <22D850BC39A25742977325ADDE208E7702669562E6@chiexchange02.w2k.jumptrading.com>
References: <22D850BC39A25742977325ADDE208E7702669562E6@chiexchange02.w2k.jumptrading.com>
Message-ID: <47B78842.9050008@stats.uwo.ca>

On 16/02/2008 7:56 PM, Vadim Organovich wrote:
> Hi,
> 
> At some points of my computations I want gc() to try really hard and collect as many objects as possible even though the triggering limits are not hit. Will it help if I temporarily set the limits to some small values, call gc() and then reset them back to their original values? What variables exactly need to be set?  Does anyone have a prototype of such function?
> 
> I tried to read the R help, e.g. Memory and memory.limits(), but I am not sure I understand how this applies to my case.

See the R Internals manual, or the comments in memory.c.  Calling gc() 
makes it try as hard as it can (a level 2 collection).  You can't make 
it try harder.

Duncan Murdoch


From bolker at ufl.edu  Sun Feb 17 03:12:21 2008
From: bolker at ufl.edu (Ben Bolker)
Date: Sun, 17 Feb 2008 02:12:21 +0000 (UTC)
Subject: [Rd]
	=?utf-8?q?choose_incorrect_for_fractional_and_some_negative_?=
	=?utf-8?q?integer=09values_=28PR=2310766=29?=
References: <20080215214503.5D115283416B@mail.pubhealth.ku.dk>
Message-ID: <loom.20080217T021036-101@post.gmane.org>

 <Jerry.Lewis <at> biogenidec.com> writes:

> 
> Full_Name: Jerry W. Lewis
> Version: 2.6.2
> OS: Windows XP Professional
> Submission from: (NULL) (198.180.131.16)
> 
> choose() returns incorrect values for all fractional arguments, regardless of
> sign.  It returns 0 when both arguments are negative integers, which is not
> always correct (as in some formulations of the negative hypergeometric).
> 
> Examples (correct answers from Maple's binomial function):
> 
> choose( 4.75,2.75)  # should be 8.90625

  [snip]

  The help page does say that k is supposed to be an integer -- so
I don't think this is a bug.
  Should the function either (a) test for k == (or close to ==) an integer
or (b) be rewritten to work more generally?

  Ben


From lefevrol at yahoo.com  Sun Feb 17 04:00:30 2008
From: lefevrol at yahoo.com (lefevrol at yahoo.com)
Date: Sun, 17 Feb 2008 04:00:30 +0100 (CET)
Subject: [Rd] Probable bug in "An Introduction to R" (PR#10777)
Message-ID: <20080217030031.03459283416A@mail.pubhealth.ku.dk>

Both the document and R itself are at 2.6.2 (2008-02-08). When I run in 
the Windows R console the command 

   lines(density(eruptions, bw=0.1))

found in ? 8.2, I get:

   Error in plot.xy(xy.coords(x, y), type = type, ...) : 
   plot.new has not been called yet

Regards,

Olivier Lefevre


From ripley at stats.ox.ac.uk  Sun Feb 17 07:10:13 2008
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Sun, 17 Feb 2008 07:10:13 +0100 (CET)
Subject: [Rd] Probable bug in "An Introduction to R" (PR#10777)
Message-ID: <20080217061013.DD04E283416A@mail.pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.

--27464147-1806382895-1203228439=:29265
Content-Type: TEXT/PLAIN; charset=iso-8859-1; format=flowed
Content-Transfer-Encoding: 8BIT

You can't just pick out lines and expect them to run on their own.  The 
context is

# make the bins smaller, make a plot of density
hist(eruptions, seq(1.6, 5.2, 0.2), prob=TRUE)
lines(density(eruptions, bw=0.1))
rug(eruptions) # show the actual data points

We do arrange to run the code from that manual to test every release.
And that block of lines does work.


On Sun, 17 Feb 2008, lefevrol at yahoo.com wrote:

> Both the document and R itself are at 2.6.2 (2008-02-08). When I run in
> the Windows R console the command
>
>   lines(density(eruptions, bw=0.1))
>
> found in ? 8.2, I get:
>
>   Error in plot.xy(xy.coords(x, y), type = type, ...) :
>   plot.new has not been called yet
>
> Regards,
>
> Olivier Lefevre
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595
--27464147-1806382895-1203228439=:29265--


From A.R.Runnalls at kent.ac.uk  Sun Feb 17 14:35:08 2008
From: A.R.Runnalls at kent.ac.uk (A.R.Runnalls at kent.ac.uk)
Date: Sun, 17 Feb 2008 14:35:08 +0100 (CET)
Subject: [Rd] Mac OS X 2.5.1 / reg-plot.R / tr (PR#10781)
Message-ID: <20080217133508.48BD3282EFF7@mail.pubhealth.ku.dk>

In building R 2.6.2 from source for Mac OS X 2.5.1 (with
i686-apple-darwin9-gcc-4.0.1), 'make check' fails.  The failure is in
reg-plot.R, and occurs because Mac OS X's 'tr' command (invoked by Rdiff
to strip carriage returns) regards the dagger sign in reg-plot.ps as an
illegal byte sequence.

I'm surprised that this doesn't seem to have been reported before, but
it was already present at least in R 2.6.1

Incidentally, couldn't the handling of line endings now be left to
svn:eol-style?

Andrew Runnalls

-- 
Dr Andrew Runnalls,
Computing Laboratory,
University of Kent,
CANTERBURY CT2 7NF, UK

Tel: (0)1227 823821


From murdoch at stats.uwo.ca  Sun Feb 17 14:54:08 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sun, 17 Feb 2008 08:54:08 -0500
Subject: [Rd] Mac OS X 2.5.1 / reg-plot.R / tr (PR#10781)
In-Reply-To: <20080217133508.48BD3282EFF7@mail.pubhealth.ku.dk>
References: <20080217133508.48BD3282EFF7@mail.pubhealth.ku.dk>
Message-ID: <47B83C80.5010101@stats.uwo.ca>

On 17/02/2008 8:35 AM, A.R.Runnalls at kent.ac.uk wrote:
> In building R 2.6.2 from source for Mac OS X 2.5.1 (with
> i686-apple-darwin9-gcc-4.0.1), 'make check' fails.  The failure is in
> reg-plot.R, and occurs because Mac OS X's 'tr' command (invoked by Rdiff
> to strip carriage returns) regards the dagger sign in reg-plot.ps as an
> illegal byte sequence.
> 
> I'm surprised that this doesn't seem to have been reported before, but
> it was already present at least in R 2.6.1
> 
> Incidentally, couldn't the handling of line endings now be left to
> svn:eol-style?

svn:eol-style assumes that the machine which checks out the working copy 
is the same as the machine doing the editing.  You get really horrible 
messes when you do something like mounting a Unix drive on a PC, or 
emailing a file from one system to another, etc.  I've worked with it 
and without it, and I much prefer working without it.

Duncan Murdoch


From ripley at stats.ox.ac.uk  Sun Feb 17 15:55:14 2008
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Sun, 17 Feb 2008 15:55:14 +0100 (CET)
Subject: [Rd] Mac OS X 2.5.1 / reg-plot.R / tr (PR#10781)
Message-ID: <20080217145514.0E225282EFF7@mail.pubhealth.ku.dk>

Please do as we ask in both the FAQ and posting guide and check the 
current working copy of R, which does this differently.

On Sun, 17 Feb 2008, A.R.Runnalls at kent.ac.uk wrote:

> In building R 2.6.2 from source for Mac OS X 2.5.1 (with
> i686-apple-darwin9-gcc-4.0.1), 'make check' fails.  The failure is in
> reg-plot.R, and occurs because Mac OS X's 'tr' command (invoked by Rdiff
> to strip carriage returns) regards the dagger sign in reg-plot.ps as an
> illegal byte sequence.

Known for certain locales: we do ask you to report yours (part of the 'at 
a minimum' information requested in the posting guide).

> I'm surprised that this doesn't seem to have been reported before, but
> it was already present at least in R 2.6.1

It has been, and fixed before!  From the svn logs

r44231 | ripley | 2008-01-29 12:45:00 +0000 (Tue, 29 Jan 2008) | 1 line

MacOS tr does not cope with Latin-1 chars in a UTF-8 locale

> Incidentally, couldn't the handling of line endings now be left to
> svn:eol-style?

Have you read the code concerned?  It says

## some packages ship .Rout.save with CRLF endings

and we have no control over what line-endings third-party packages ship 
with.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jack200519 at yahoo.ie  Sun Feb 17 15:35:17 2008
From: jack200519 at yahoo.ie (hoogeebear)
Date: Sun, 17 Feb 2008 06:35:17 -0800 (PST)
Subject: [Rd]  An R SPAM Filter
Message-ID: <15530304.post@talk.nabble.com>


Hi,

I'm just wondering does anyone know of a good site that would assist me in
creating a spam filter through R? It is for a college project. I have
searched the net but cannot find anything of relevance. Any help would be
greatly appreciated....

Regards,

-- 
View this message in context: http://www.nabble.com/An-R-SPAM-Filter-tp15530304p15530304.html
Sent from the R devel mailing list archive at Nabble.com.


From edd at debian.org  Sun Feb 17 17:36:32 2008
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 17 Feb 2008 10:36:32 -0600
Subject: [Rd] An R SPAM Filter
In-Reply-To: <15530304.post@talk.nabble.com>
References: <15530304.post@talk.nabble.com>
Message-ID: <18360.25232.781122.484055@ron.nulle.part>


On 17 February 2008 at 06:35, hoogeebear wrote:
| I'm just wondering does anyone know of a good site that would assist me in
| creating a spam filter through R? It is for a college project. I have
| searched the net but cannot find anything of relevance. Any help would be
| greatly appreciated....

a) You are using the wrong mailing list. This is a question for r-help.

b) One starting point may be the (generally recommeded) Friedman / Hastie /
   Tibshirani book at 
	http://www-stat.stanford.edu/~tibs/ElemStatLearn/ 
   and in Google Book Search at 
	http://books.google.com/books?id=VRzITwgNV2UC&dq=elements+of+statistical+learning
   which also has a matching CRAN package
	http://cran.r-project.org/web/packages/ElemStatLearn/index.html
   as it uses Spam detection as a running example. Start with code therein.

Hope this helps, Dirk

-- 
Three out of two people have difficulties with fractions.


From mtmorgan at fhcrc.org  Sun Feb 17 18:21:17 2008
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Sun, 17 Feb 2008 09:21:17 -0800
Subject: [Rd] NAMESPACEs and S4 classes
Message-ID: <6ph4pc7jy7m.fsf@gopher4.fhcrc.org>

I'd like to have two packages with S4 classes with the same name but
different implementation. To that end I create a package tmpA with

setClass("A",
         representation=representation(
           x="numeric"),
         sealed=TRUE)
setClass("B",
         representation=representation(
           x="numeric"))
B <- function(...) new("B", ...)

and a NAMESPACE having only

import(methods)
export(B)

I duplicate this package source directory structure, renaming the
duplicate package tmpB in its Description file. After R CMD
INSTALL'ing both, I

> library(tmpA)
> library(tmpB)
Error in setClass("A", representation = representation(x = "numeric"),  : 
  "A" has a sealed class definition and cannot be redefined
Error : unable to load R code in package 'tmpB'
Error: package/namespace load failed for 'tmpB'
> setClass("A", prototype(y="numeric"))
Error in setClass("A", c(y = "numeric")) : 
  "A" has a sealed class definition and cannot be redefined

It appears that, although 'where' in setClass influences the location
of the class definition, there is a global class table that means only
one class of a particular name can ever be defined. Is that the
intended behavior? 

If I create a class B in the global environment

> setClass("B", representation(y="numeric"))
[1] "B"

and then use the constructor from tmpA, I end up with an instance of
the globally defined class B, rather than the one defined in the
constructor's name space:

> B()
An object of class "B"
Slot "y":
numeric(0)

How would I write B to return an instance of B as defined in tmpA?

Thanks,

Martin

> sessionInfo()
R version 2.7.0 Under development (unstable) (2008-02-09 r44397) 
x86_64-unknown-linux-gnu 

locale:
LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base     

other attached packages:
[1] tmpA_1.0

-- 
Martin Morgan
Computational Biology / Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N.
PO Box 19024 Seattle, WA 98109

Location: Arnold Building M2 B169
Phone: (206) 667-2793


From bozhou1981 at hotmail.com  Sun Feb 17 21:50:13 2008
From: bozhou1981 at hotmail.com (bozhou1981 at hotmail.com)
Date: Sun, 17 Feb 2008 21:50:13 +0100 (CET)
Subject: [Rd]  Arithmetic bug? (found when use POSIXct) (PR#10776)
Message-ID: <20080217205013.9349E282EFF7@mail.pubhealth.ku.dk>


Hi Gabo,

FAQ 7.31 does not apply to this. "numeric" in R is 64bit which is large eno=
ugh to handle this.

I
figured out the cause is that Sys.time() gives millisecond value while
b<-as.POSIXct(format(a,tz=3D"GMT")) cuts off that part.=20

Then of course a-b is not 5 hours!

Do it again with "options(digits=3D22)" and you will see what actually happ=
ened there.

The recommended code from R News is not aware the truth that POSIXlt can re=
present sub-second time.

Cheers,

B
_________________________________________________________________
Helping your favorite cause is as easy as instant messaging.=A0You IM, we g=
ive.

	[[alternative HTML version deleted]]


From ggrothendieck at gmail.com  Sun Feb 17 22:15:27 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sun, 17 Feb 2008 16:15:27 -0500
Subject: [Rd] Arithmetic bug? (found when use POSIXct) (PR#10776)
In-Reply-To: <20080217205013.9349E282EFF7@mail.pubhealth.ku.dk>
References: <20080217205013.9349E282EFF7@mail.pubhealth.ku.dk>
Message-ID: <971536df0802171315s1bdba2e3p6f3492b60aa249d2@mail.gmail.com>

OK.  Good point.

Note that that article was written 4 years ago
when R was at version 1.9 and POSIXt did not fully support
subseconds.  At that time, POSIXct could represent subseconds
internally but it was not used as POSIXlt did not yet support it
and that and the associated digits.sec option did not come until
R version 2.3, released two years after the article was written.

Try setting the digits.secs option before you run the command
like this:

> options(digits.secs = 3)
> dp <- Sys.time()
> dp-as.POSIXct(format(dp,tz="GMT"))
Time difference of -5 hours

On Feb 17, 2008 3:50 PM,  <bozhou1981 at hotmail.com> wrote:
>
> Hi Gabo,
>
> FAQ 7.31 does not apply to this. "numeric" in R is 64bit which is large eno=
> ugh to handle this.
>
> I
> figured out the cause is that Sys.time() gives millisecond value while
> b<-as.POSIXct(format(a,tz=3D"GMT")) cuts off that part.=20
>
> Then of course a-b is not 5 hours!
>
> Do it again with "options(digits=3D22)" and you will see what actually happ=
> ened there.
>
> The recommended code from R News is not aware the truth that POSIXlt can re=
> present sub-second time.
>
> Cheers,
>
> B
> _________________________________________________________________
> Helping your favorite cause is as easy as instant messaging.=A0You IM, we g=
> ive.
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From bozhou1981 at hotmail.com  Sun Feb 17 22:31:53 2008
From: bozhou1981 at hotmail.com (Bo Zhou)
Date: Sun, 17 Feb 2008 21:31:53 +0000
Subject: [Rd] Arithmetic bug? (found when use POSIXct) (PR#10776)
In-Reply-To: <971536df0802171315s1bdba2e3p6f3492b60aa249d2@mail.gmail.com>
References: <20080217205013.9349E282EFF7@mail.pubhealth.ku.dk>
	<971536df0802171315s1bdba2e3p6f3492b60aa249d2@mail.gmail.com>
Message-ID: <BLU126-W3239CA2B3EC302ED4F1EFACB200@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080217/cdddb159/attachment.pl 

From ggrothendieck at gmail.com  Mon Feb 18 16:19:05 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 18 Feb 2008 10:19:05 -0500
Subject: [Rd] NEWS and ChangeLog in available.packages()
Message-ID: <971536df0802180719n4d2cf766wa84e0d0e3f38029d@mail.gmail.com>

With the newly available NEWS and ChangeLog links on the CRAN
pages for packages it would be nice if available.packages()
gave information on those.


From hin-tak.leung at cimr.cam.ac.uk  Mon Feb 18 17:21:26 2008
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Mon, 18 Feb 2008 16:21:26 +0000
Subject: [Rd] Perils of R_LIBRARY_PATH
In-Reply-To: <alpine.LFD.1.00.0802160714090.4940@gannet.stats.ox.ac.uk>
References: <Pine.LNX.4.64.0802131346450.10778@auk.stats>
	<47B653ED.5040800@cimr.cam.ac.uk>
	<alpine.LFD.1.00.0802160714090.4940@gannet.stats.ox.ac.uk>
Message-ID: <47B9B086.5070308@cimr.cam.ac.uk>

Prof Brian Ripley wrote:
> On Sat, 16 Feb 2008, Hin-Tak Leung wrote:
> 
>> Hi,
>>
>> Just for interest, may I ask which platform are you referring to?
>> You are on a commercial unix platform such as solaris, right?
> 
> amd64 Linux -- a bit of tracing shows that to be from a jpackage-d 
> version of the Sun SDK.  So my guess is that the packaging picked up the 
> libs (I didn't install that particular JDK).

Hmm, maybe you should file a bug to the jpackage people. My 1.4/1.5/1.6 
came from http://java.sun.com/ - 1.5 and 1.6 are x86_64, 1.4 is i686,
and they don't have any gtk/cairo shared libraries.
The sun jdk's from sun don't play nice with the "alternative" system
though (whereas the jpackage does).

As a long term strategy , sun jdk 1.7 and gcj came with fedora 8.
gcj starts to work quite well, so it might be a good idea to support
that too.

<snipped>
> Solaris 10 has Gtk2 but not cairo (which is relevant as R will have a 
> cairo-based version of X11).

Gtk(2?) is an "offical" optional add-on to Tru64. (mostly just because 
mozilla needs it, I think...)

Hin-Tak


From maechler at stat.math.ethz.ch  Mon Feb 18 17:59:43 2008
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 18 Feb 2008 17:59:43 +0100
Subject: [Rd] NEWS and ChangeLog in available.packages()
In-Reply-To: <971536df0802180719n4d2cf766wa84e0d0e3f38029d@mail.gmail.com>
References: <971536df0802180719n4d2cf766wa84e0d0e3f38029d@mail.gmail.com>
Message-ID: <18361.47487.326615.601393@stat.math.ethz.ch>

>>>>> "GaGr" == Gabor Grothendieck <ggrothendieck at gmail.com>
>>>>>     on Mon, 18 Feb 2008 10:19:05 -0500 writes:

    GaGr> With the newly available NEWS and ChangeLog links on
    GaGr> the CRAN pages for packages it would be nice if
    GaGr> available.packages() gave information on those.

how would you propose?

It returns a character matrix, and that probably  should  not be
changed.

Regards,
Martin


From ggrothendieck at gmail.com  Mon Feb 18 18:12:49 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 18 Feb 2008 12:12:49 -0500
Subject: [Rd] NEWS and ChangeLog in available.packages()
In-Reply-To: <18361.47487.326615.601393@stat.math.ethz.ch>
References: <971536df0802180719n4d2cf766wa84e0d0e3f38029d@mail.gmail.com>
	<18361.47487.326615.601393@stat.math.ethz.ch>
Message-ID: <971536df0802180912v5257a2e4q97c1cf5a8e928cc@mail.gmail.com>

On Feb 18, 2008 11:59 AM, Martin Maechler <maechler at stat.math.ethz.ch> wrote:
> >>>>> "GaGr" == Gabor Grothendieck <ggrothendieck at gmail.com>
> >>>>>     on Mon, 18 Feb 2008 10:19:05 -0500 writes:
>
>    GaGr> With the newly available NEWS and ChangeLog links on
>    GaGr> the CRAN pages for packages it would be nice if
>    GaGr> available.packages() gave information on those.
>
> how would you propose?
>
> It returns a character matrix, and that probably  should  not be
> changed.
>

Currently the Depends (and Imports, Contains and Suggests)
are character strings containing components to form
one large string so maybe there could be a Docs whose
substrings could include NEWS, ChangeLog and the vignette
and demo names or maybe separate ones for NEWS/ChangeLog,
vignettes and demos.


From maechler at stat.math.ethz.ch  Mon Feb 18 18:22:45 2008
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 18 Feb 2008 18:22:45 +0100
Subject: [Rd] Namespace and function open
In-Reply-To: <47B5A5F4.7080809@ibe.med.uni-muenchen.de>
References: <47B5A5F4.7080809@ibe.med.uni-muenchen.de>
Message-ID: <18361.48869.656651.59207@stat.math.ethz.ch>

>>>>> "MS" == Markus Schmidberger <schmidb at ibe.med.uni-muenchen.de>
>>>>>     on Fri, 15 Feb 2008 15:47:16 +0100 writes:

    MS> Hello, I built a package, everything was working very
    MS> well. Now I included a NAMESPACE to export only some
    MS> variables. (export(f, g, ...) ) Everything is working
    MS> fine, except one function. There I get an error:

    MS> Fehler in UseMethod("open") : keine anwendbare Methode
    MS> f?r "open"

    MS> In this function I use the function "open" to generate
    MS> an output bar.

    MS> * if (verbose) { pbt <- new("ProgressBarText",
    MS> length(ids), barsteps = as.integer(20)) open(pbt) }
   
    MS>     for (i in seq(along=ids)) {
   
    MS>       if (verbose) { update(pbt) }

    MS> How I have to change my NAMESPACE file to fix this
    MS> problem?

You also have to export the *methods* for the open() generic:

exportMethods("open")


    MS> Thanks Markus Schmidberger

you're welcome,
Martin M?chler


From jmc at r-project.org  Mon Feb 18 19:00:34 2008
From: jmc at r-project.org (John Chambers)
Date: Mon, 18 Feb 2008 10:00:34 -0800
Subject: [Rd] NAMESPACEs and S4 classes
In-Reply-To: <6ph4pc7jy7m.fsf@gopher4.fhcrc.org>
References: <6ph4pc7jy7m.fsf@gopher4.fhcrc.org>
Message-ID: <47B9C7C2.6080709@r-project.org>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080218/7e268ab7/attachment.pl 

From ripley at stats.ox.ac.uk  Mon Feb 18 19:15:49 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 18 Feb 2008 18:15:49 +0000 (GMT)
Subject: [Rd] Namespace and function open
In-Reply-To: <18361.48869.656651.59207@stat.math.ethz.ch>
References: <47B5A5F4.7080809@ibe.med.uni-muenchen.de>
	<18361.48869.656651.59207@stat.math.ethz.ch>
Message-ID: <Pine.LNX.4.64.0802181808570.2809@auk.stats>

On Mon, 18 Feb 2008, Martin Maechler wrote:

>>>>>> "MS" == Markus Schmidberger <schmidb at ibe.med.uni-muenchen.de>
>>>>>>     on Fri, 15 Feb 2008 15:47:16 +0100 writes:
>
>    MS> Hello, I built a package, everything was working very
>    MS> well. Now I included a NAMESPACE to export only some
>    MS> variables. (export(f, g, ...) ) Everything is working
>    MS> fine, except one function. There I get an error:
>
>    MS> Fehler in UseMethod("open") : keine anwendbare Methode
>    MS> f?r "open"
>
>    MS> In this function I use the function "open" to generate
>    MS> an output bar.
>
>    MS> * if (verbose) { pbt <- new("ProgressBarText",
>    MS> length(ids), barsteps = as.integer(20)) open(pbt) }
>
>    MS>     for (i in seq(along=ids)) {
>
>    MS>       if (verbose) { update(pbt) }
>
>    MS> How I have to change my NAMESPACE file to fix this
>    MS> problem?
>
> You also have to export the *methods* for the open() generic:
>
> exportMethods("open")

He doesn't say he created any.  I think more likely he did not import the 
S4 generics & methods from the BioC package 'affy'.  Since open() is in 
the base namespace, it will be found instead of any such-named function 
in another package unless imported.

But really we need a lot more information: package 'affy' is not even 
mentioned, if it is indeed the source of class "ProgressBarText".
As so often, the output of sessionInfo() (as mentioned in the posting 
guide) is the 'at a minimum' information needed.

>
>
>    MS> Thanks Markus Schmidberger
>
> you're welcome,
> Martin M?chler
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jmacdon at med.umich.edu  Mon Feb 18 21:54:22 2008
From: jmacdon at med.umich.edu (James MacDonald)
Date: Mon, 18 Feb 2008 15:54:22 -0500
Subject: [Rd] Is rcompgen still recommended?
Message-ID: <47B9F07E.20700@med.umich.edu>

I just built R-devel from source on OS X (Tiger), using the subversion 
sources. Running ./tools/rsync-recommended didn't download rcompgen. I 
checked

http://cran.r-project/src/contrib/2.7.0/Recommended

and indeed, this package is not there. If I try to install using 
install.packages I get

 > install.packages("rcompgen", type="source")
--- Please select a CRAN mirror for use in this session ---
Loading Tcl/Tk interface ... done
trying URL 'http://cran.fhcrc.org/src/contrib/rcompgen_0.1-17.tar.gz'
Content type 'application/x-gzip' length 29240 bytes (28 Kb)
opened URL
==================================================
downloaded 28 Kb

* Installing *source* package 'rcompgen' ...
Error: Invalid DESCRIPTION file

Invalid Priority field.
Packages with priorities 'base' or 'recommended' or 'defunct-base' must
already be known to R.

See the information on DESCRIPTION files in section 'Creating R
packages' of the 'Writing R Extensions' manual.
Execution halted
ERROR: installing package DESCRIPTION failed
** Removing '/Users/jmacdon/R-devel/library/rcompgen'

The downloaded packages are in
	/private/tmp/Rtmpb0Refs/downloaded_packages
Updating HTML index of packages in '.Library'
Warning message:
In install.packages("rcompgen", type = "source") :
   installation of package 'rcompgen' had non-zero exit status


I assume I am missing something obvious, but don't know what it is. Any 
pointers?

Best,

Jim



 > sessionInfo()
R version 2.7.0 Under development (unstable) (2008-02-18 r44516)
i386-apple-darwin8.11.1

locale:
C

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base

loaded via a namespace (and not attached):
[1] tcltk_2.7.0 tools_2.7.0
-- 
James W. MacDonald, MS
Biostatistician
UMCCC cDNA and Affymetrix Core
University of Michigan
1500 E Medical Center Drive
7410 CCGC
Ann Arbor MI 48109
734-647-5623


From p.dalgaard at biostat.ku.dk  Mon Feb 18 23:40:17 2008
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Mon, 18 Feb 2008 23:40:17 +0100
Subject: [Rd] Is rcompgen still recommended?
In-Reply-To: <47B9F07E.20700@med.umich.edu>
References: <47B9F07E.20700@med.umich.edu>
Message-ID: <47BA0951.6020709@biostat.ku.dk>

James MacDonald wrote:
> I just built R-devel from source on OS X (Tiger), using the subversion 
> sources. Running ./tools/rsync-recommended didn't download rcompgen. I 
> checked
>
> http://cran.r-project/src/contrib/2.7.0/Recommended
>
> and indeed, this package is not there. If I try to install using 
> install.packages I get
>
>  > install.packages("rcompgen", type="source")
> --- Please select a CRAN mirror for use in this session ---
> Loading Tcl/Tk interface ... done
> trying URL 'http://cran.fhcrc.org/src/contrib/rcompgen_0.1-17.tar.gz'
> Content type 'application/x-gzip' length 29240 bytes (28 Kb)
> opened URL
> ==================================================
> downloaded 28 Kb
>
> * Installing *source* package 'rcompgen' ...
> Error: Invalid DESCRIPTION file
>
> Invalid Priority field.
> Packages with priorities 'base' or 'recommended' or 'defunct-base' must
> already be known to R.
>
> See the information on DESCRIPTION files in section 'Creating R
> packages' of the 'Writing R Extensions' manual.
> Execution halted
> ERROR: installing package DESCRIPTION failed
> ** Removing '/Users/jmacdon/R-devel/library/rcompgen'
>
> The downloaded packages are in
> 	/private/tmp/Rtmpb0Refs/downloaded_packages
> Updating HTML index of packages in '.Library'
> Warning message:
> In install.packages("rcompgen", type = "source") :
>    installation of package 'rcompgen' had non-zero exit status
>
>
> I assume I am missing something obvious, but don't know what it is. Any 
> pointers?
>   
utils::rc.<TAB><TAB>


-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From ripley at stats.ox.ac.uk  Tue Feb 19 06:30:09 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 19 Feb 2008 05:30:09 +0000 (GMT)
Subject: [Rd] Is rcompgen still recommended?
In-Reply-To: <47B9F07E.20700@med.umich.edu>
References: <47B9F07E.20700@med.umich.edu>
Message-ID: <alpine.LFD.1.00.0802190528050.25863@gannet.stats.ox.ac.uk>

>From NEWS

     o	Command-line completion has been moved from package 'rcompgen'
 	to package 'utils': the former no longer exists as a separate
 	package in the R distribution.

It was always intended that it be merged into utils when finished and 
stable (and it helps that Deepayan in a member of R-core now).

On Mon, 18 Feb 2008, James MacDonald wrote:

> I just built R-devel from source on OS X (Tiger), using the subversion
> sources. Running ./tools/rsync-recommended didn't download rcompgen. I
> checked
>
> http://cran.r-project/src/contrib/2.7.0/Recommended
>
> and indeed, this package is not there. If I try to install using
> install.packages I get
>
> > install.packages("rcompgen", type="source")
> --- Please select a CRAN mirror for use in this session ---
> Loading Tcl/Tk interface ... done
> trying URL 'http://cran.fhcrc.org/src/contrib/rcompgen_0.1-17.tar.gz'
> Content type 'application/x-gzip' length 29240 bytes (28 Kb)
> opened URL
> ==================================================
> downloaded 28 Kb
>
> * Installing *source* package 'rcompgen' ...
> Error: Invalid DESCRIPTION file
>
> Invalid Priority field.
> Packages with priorities 'base' or 'recommended' or 'defunct-base' must
> already be known to R.
>
> See the information on DESCRIPTION files in section 'Creating R
> packages' of the 'Writing R Extensions' manual.
> Execution halted
> ERROR: installing package DESCRIPTION failed
> ** Removing '/Users/jmacdon/R-devel/library/rcompgen'
>
> The downloaded packages are in
> 	/private/tmp/Rtmpb0Refs/downloaded_packages
> Updating HTML index of packages in '.Library'
> Warning message:
> In install.packages("rcompgen", type = "source") :
>   installation of package 'rcompgen' had non-zero exit status
>
>
> I assume I am missing something obvious, but don't know what it is. Any
> pointers?
>
> Best,
>
> Jim
>
>
>
> > sessionInfo()
> R version 2.7.0 Under development (unstable) (2008-02-18 r44516)
> i386-apple-darwin8.11.1
>
> locale:
> C
>
> attached base packages:
> [1] stats     graphics  grDevices datasets  utils     methods   base
>
> loaded via a namespace (and not attached):
> [1] tcltk_2.7.0 tools_2.7.0
> --
> James W. MacDonald, MS
> Biostatistician
> UMCCC cDNA and Affymetrix Core
> University of Michigan
> 1500 E Medical Center Drive
> 7410 CCGC
> Ann Arbor MI 48109
> 734-647-5623
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From mtmorgan at fhcrc.org  Tue Feb 19 07:41:49 2008
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Mon, 18 Feb 2008 22:41:49 -0800
Subject: [Rd] NAMESPACEs and S4 classes
In-Reply-To: <47B9C7C2.6080709@r-project.org> (John Chambers's message of
	"Mon, 18 Feb 2008 10:00:34 -0800")
References: <6ph4pc7jy7m.fsf@gopher4.fhcrc.org>
	<47B9C7C2.6080709@r-project.org>
Message-ID: <6phfxvpxxaq.fsf@gopher4.fhcrc.org>

Thank you for the explanation; I saw that class definitions were
stored in package-level .__C__* and in a global cache
methods:::.classTable, but was not sure which was meant to be
definitive.

I'm hoping your bug fix will address identically named sealed classes
in different packages -- I hope to use 'sealed' as a way to reduce
programming errors associated with unintentionally overwriting
existing class definitions (the classes are generated
programmatically, and a name conflict escaped my notice; I thought a
'better practice' would be to seal class definitions that I did not
intend to change).

The class hierarchies I am working with are large. I hope to avoid
regenerating them each time the package is loaded, e.g., using a lazy
load data base built when the package is installed. I can see how this
might work when class definitions are in package-level variables
.__C__*, but am less clear about how lazy loaded class definitions
might be added to a globally cached class table.

My more ambitious hope is to manage identically named classes from
separate hierarchies in the same package, e.g., by placing each
hierarchy in a separate environment (with attribute 'name' set, so
environmentName() returns something sensible). I realize this does not
work with the current implementation, but offer it as a potential use
case.

Thank you again for your help.

Martin

John Chambers <jmc at r-project.org> writes:

> Let's start from a simpler description,? because the use of "sealed" adds some
> confusion.? Here's a basic version. ? I have two packages, P2 and P3, with
> different definitions of "myClass".
> Classes with the same name on two packages are supposed to work, at least for
> generating objects.? There is a bug (see below) and a workaround, but with or
> without the workaround you need to apply new() to a class _object_, not just a
> name, if you want to generate objects in the global environment.
> Here's what currently works, using the workaround:
>> c2 = get(classMetaName("myClass"), envir = asNamespace("P2"))
>> c3 = get(classMetaName("myClass"), envir = asNamespace("P3"))
>> x2 = new(c2)
>> x3 = new(c3)
>> class(x2)
> [1] "myClass"
> attr(,"package")
> [1] "P2"
>> class(x3)
> [1] "myClass"
> attr(,"package")
> [1] "P3"
> By using asNamespace(), it's not necessary to export the class definitions,
> and possibly better not to.
> Two comments:
> - The bug is that you should be able to use
> ?? c2 = getClass("myClass", asNamespace("P2"))
> instead of the call to get().? But a current misuse of cached definitions
> means that only the first definition is known.? Hence the need for a
> workaround using classMetaName() to get the class definition directly.? I
> think the fix is easy & will try to add it to r-devel fairly soon.
> - There are limitations to using duplicated class names, because not all
> computations will carry the appropriate package information to say which
> "myClass" we mean.? So if one can avoid duplicating class names, life will be
> easier, and I suspect that duplicated classes that are _not_ exported will
> work better, because computations will be forced into the individual
> namespaces with less chance for getting the wrong definition.
> Martin Morgan wrote:
>
>           I'd like to have two packages with S4 classes with the same name but
> different implementation. To that end I create a package tmpA with
>
> setClass("A",
>          representation=representation(
>            x="numeric"),
>          sealed=TRUE)
> setClass("B",
>          representation=representation(
>            x="numeric"))
> B <- function(...) new("B", ...)
>
> and a NAMESPACE having only
>
> import(methods)
> export(B)
>
> I duplicate this package source directory structure, renaming the
> duplicate package tmpB in its Description file. After R CMD
> INSTALL'ing both, I
>
>   
>
>                     library(tmpA)
> library(tmpB)
>     
>
>
>      Error in setClass("A", representation = representation(x = "numeric"),  : 
>   "A" has a sealed class definition and cannot be redefined
> Error : unable to load R code in package 'tmpB'
> Error: package/namespace load failed for 'tmpB'
>   
>
>                     setClass("A", prototype(y="numeric"))
>     
>
>
>      Error in setClass("A", c(y = "numeric")) : 
>   "A" has a sealed class definition and cannot be redefined
>
> It appears that, although 'where' in setClass influences the location
> of the class definition, there is a global class table that means only
> one class of a particular name can ever be defined. Is that the
> intended behavior? 
>
> If I create a class B in the global environment
>
>   
>
>                     setClass("B", representation(y="numeric"))
>     
>
>
>      [1] "B"
>
> and then use the constructor from tmpA, I end up with an instance of
> the globally defined class B, rather than the one defined in the
> constructor's name space:
>
>   
>
>                     B()
>     
>
>
>      An object of class "B"
> Slot "y":
> numeric(0)
>
> How would I write B to return an instance of B as defined in tmpA?
>
> Thanks,
>
> Martin
>
>   
>
>                     sessionInfo()
>     
>
>
>      R version 2.7.0 Under development (unstable) (2008-02-09 r44397) 
> x86_64-unknown-linux-gnu 
>
> locale:
> LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices datasets  utils     methods   base     
>
> other attached packages:
> [1] tmpA_1.0
>
>   
>

-- 
Martin Morgan
Computational Biology / Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N.
PO Box 19024 Seattle, WA 98109

Location: Arnold Building M2 B169
Phone: (206) 667-2793


From christophe.lo at gmail.com  Mon Feb 18 22:21:29 2008
From: christophe.lo at gmail.com (Keizer_71)
Date: Mon, 18 Feb 2008 13:21:29 -0800 (PST)
Subject: [Rd]  Distance Metrics using Euclidean
Message-ID: <15549109.post@talk.nabble.com>


I am trying to calculate the distance metrics, but i keep getting this error.
I am very new with R. Am i doing something wrong.


> dim(data.sub)
[1] 10000   140

> dist(data.sub, method = "euclidean", diag = FALSE, upper = FALSE, p = 2)
Error: cannot allocate vector of size 781250 Kb
In addition: Warning messages:
1: Reached total allocation of 1014Mb: see help(memory.size) 
2: Reached total allocation of 1014Mb: see help(memory.size) 
-- 
View this message in context: http://www.nabble.com/Distance-Metrics-using-Euclidean-tp15549109p15549109.html
Sent from the R devel mailing list archive at Nabble.com.


From ripley at stats.ox.ac.uk  Tue Feb 19 11:41:02 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 19 Feb 2008 10:41:02 +0000 (GMT)
Subject: [Rd] Distance Metrics using Euclidean
In-Reply-To: <15549109.post@talk.nabble.com>
References: <15549109.post@talk.nabble.com>
Message-ID: <alpine.LFD.1.00.0802191037060.14016@gannet.stats.ox.ac.uk>

Please ask help questions on R-help.

You are asking for a distance matrix of 10000 points. That has almost 100 
million entries, too large for your 1Gb computer (even if only half of it 
is stored).  What can you usefully do with such a matrix?

On Mon, 18 Feb 2008, Keizer_71 wrote:

>
> I am trying to calculate the distance metrics, but i keep getting this error.
> I am very new with R. Am i doing something wrong.
>
>
>> dim(data.sub)
> [1] 10000   140
>
>> dist(data.sub, method = "euclidean", diag = FALSE, upper = FALSE, p = 2)
> Error: cannot allocate vector of size 781250 Kb
> In addition: Warning messages:
> 1: Reached total allocation of 1014Mb: see help(memory.size)
> 2: Reached total allocation of 1014Mb: see help(memory.size)
> --
> View this message in context: http://www.nabble.com/Distance-Metrics-using-Euclidean-tp15549109p15549109.html
> Sent from the R devel mailing list archive at Nabble.com.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From lgautier at gmail.com  Tue Feb 19 13:40:14 2008
From: lgautier at gmail.com (Laurent Gautier)
Date: Tue, 19 Feb 2008 13:40:14 +0100
Subject: [Rd] level of mutability for the type of a SEXP
Message-ID: <27d1e6020802190440p4f51b6bai53010d1dec33c3a@mail.gmail.com>

Dear list,

I am writing C code to interface with R, and I would like to know the
level of mutability for the type of a SEXP.

I see that there is a macro/function TYPEOF(), and that it can be used
as an l-value, as well as a macro/function SET_TYPEOF().

My question is "should the type be considered immutable, or it can it
change after the SEXP has been created and used for a while ?".

I understand that a call to TYPEOF will not perform any conversion,
and my question is only about being sure that once the type of a given
SEXP is set it cannot change.


Laurent


From asfe at di.fc.ul.pt  Tue Feb 19 15:50:09 2008
From: asfe at di.fc.ul.pt (asfe at di.fc.ul.pt)
Date: Tue, 19 Feb 2008 15:50:09 +0100 (CET)
Subject: [Rd] Incorrect paste() output (PR#10801)
Message-ID: <20080219145009.A3B95282EF48@mail.pubhealth.ku.dk>

Hello,

I am writing this message because of an incorrect output by paste(). 
Please try the following script to see if the evidence I collected is 
reproducible:

x <- c(10152, 28177);
y <- c(9576, 26625);
d <- y - x;

d;
[1]  -576 -1552

paste(d, collapse = ", ");
[1] "-576, -1552"

x <- x / 1000;
y <- y / 1000;
d <- y - x;

d;
[1] -0.576 -1.552

paste(d, collapse = ", ");
[1] "-0.575999999999999, -1.552"

The output of the last paste() is incorrect. I am using R version 2.6.1.

Thank you.

-- 
Ant?nio Ferreira - http://www.di.fc.ul.pt/~asfe
Assistant Lecturer - Department of Informatics
Faculty of Sciences - University of Lisbon - PT


From david at opsi.co.za  Tue Feb 19 13:50:24 2008
From: david at opsi.co.za (david at opsi.co.za)
Date: Tue, 19 Feb 2008 13:50:24 +0100 (CET)
Subject: [Rd] Assigning a sub-matrix from a data frame to a regular matrix
	causes strange behaviour (version 2.6.1) (PR#10799)
Message-ID: <20080219125025.0B974282EF48@mail.pubhealth.ku.dk>

See below:

 

> d = data.frame(v1=1:2,v2=1:2)

> x = matrix(0,2,2)

> x[,1:2] = d[,1:2]

> x

[[1]]

[1] 1 2

 

[[2]]

[1] 1 2

 

[[3]]

[1] 1 2

 

[[4]]

[1] 1 2

 

> 

 

Thanks for all the work in R. Still love it.

 

David

 

 

David Lubinsky

Director

OPSI Systems

 

Phone:  +27 11 880 7951

Cell: +27 82 452 9556

URL:  <http://www.opsi.co.za> www.opsi.co.za

Email:  <mailto:david at opsi.co.za> david at opsi.co.za

 


	[[alternative HTML version deleted]]


From bonneaud at enib.fr  Tue Feb 19 14:25:04 2008
From: bonneaud at enib.fr (bonneaud at enib.fr)
Date: Tue, 19 Feb 2008 14:25:04 +0100 (CET)
Subject: [Rd] Bug using X11 on mac osx (for jpeg or png creation) (PR#10800)
Message-ID: <20080219132504.21885283416C@mail.pubhealth.ku.dk>

Full_Name: Stephane Bonneaud
Version: 2.6.2 
OS: OSX - Leopard 10.5.2
Submission from: (NULL) (195.221.233.130)


Hello,

I have a R code file containing the following code:

-------
# This code is in r2jpg.r
# myData is filled here with some data from a file 
jpeg(filename="test.jpg",width=960,height=720,pointsize=16,quality=100)
plot(myData,xlab="anything", ylab="whatever",type="b",col="red", lwd=4)
dev.off()
-------

I executed this code within both the R GUI and the command line. When launched
through the R GUI (Mac OS X Cocoa GUI - GUI 1.22-devel (4844) (4844)),
everything works just fine. The JPEG file is generated just I want. Great!
The problem is when I try to execute the code through the command line in
Terminal (OSX).
I execute my code using the following command :
cat r2jpg.r | R --silent --no-restore --no-save

And I get the following error:

> jpeg(filename="test.jpg",width=960,height=720,pointsize=16,quality=100)
can't find X11 font
Error in X11(paste("jpeg::", quality, ":", filename, sep = ""), width,  : 
  impossible to start the peripheral JPEG
Calls: jpeg

(Sorry, I translated the error messages from french so it might be a little
different in english. If needed I can print it in english though)

I saw that several persons had this problem, but did not find any proper
solution. Therefore, I tried to launch my command from xterm (still in OSX) and
not in Terminal, and it worked. There is definitely an issue with R getting the
proper environment variables for X11 or something like that when launched from
the command line in Terminal.
When you launch the GUI, OSX detects it will need X11 (or something like this
:b), therefore all proper env variables are charged. From xterm, obviously the
proper env variables are set.

How could R tell OSX to link with X11 when launched from command line in
Terminal?

PS: sorry, it might be a leopard bug, but I thought somebody could be interested
in the R community. And maybe R developers might actually be able to do
something.


From murdoch at stats.uwo.ca  Tue Feb 19 18:23:50 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 19 Feb 2008 12:23:50 -0500
Subject: [Rd] Incorrect paste() output (PR#10801)
In-Reply-To: <20080219145009.A3B95282EF48@mail.pubhealth.ku.dk>
References: <20080219145009.A3B95282EF48@mail.pubhealth.ku.dk>
Message-ID: <47BB10A6.2090008@stats.uwo.ca>

On 2/19/2008 9:50 AM, asfe at di.fc.ul.pt wrote:
> Hello,
> 
> I am writing this message because of an incorrect output by paste(). 
> Please try the following script to see if the evidence I collected is 
> reproducible:
> 
> x <- c(10152, 28177);
> y <- c(9576, 26625);
> d <- y - x;
> 
> d;
> [1]  -576 -1552
> 
> paste(d, collapse = ", ");
> [1] "-576, -1552"
> 
> x <- x / 1000;
> y <- y / 1000;
> d <- y - x;
> 
> d;
> [1] -0.576 -1.552
> 
> paste(d, collapse = ", ");
> [1] "-0.575999999999999, -1.552"
> 
> The output of the last paste() is incorrect. I am using R version 2.6.1.

It looks correct to me.  paste() doesn't use the same formatting rules 
as print() uses.  print() rounded the first number to 7 digits, but 
paste() uses as.character(), which gives

 > as.character(d)
[1] "-0.575999999999999" "-1.552"

If you want output formatted in a particular way, you should use sprintf 
or one of the format* functions.

Duncan Murdoch


From ripley at stats.ox.ac.uk  Tue Feb 19 18:30:17 2008
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Tue, 19 Feb 2008 18:30:17 +0100 (CET)
Subject: [Rd] Incorrect paste() output (PR#10801)
Message-ID: <20080219173017.9A953282EFF6@mail.pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.

--27464147-598378112-1203442115=:3205
Content-Type: TEXT/PLAIN; charset=iso-8859-1; format=flowed
Content-Transfer-Encoding: 8BIT

On Tue, 19 Feb 2008, asfe at di.fc.ul.pt wrote:

> Hello,
>
> I am writing this message because of an incorrect output by paste().
> Please try the following script to see if the evidence I collected is
> reproducible:
>
> x <- c(10152, 28177);
> y <- c(9576, 26625);
> d <- y - x;
>
> d;
> [1]  -576 -1552
>
> paste(d, collapse = ", ");
> [1] "-576, -1552"
>
> x <- x / 1000;
> y <- y / 1000;
> d <- y - x;
>
> d;
> [1] -0.576 -1.552
>
> paste(d, collapse = ", ");
> [1] "-0.575999999999999, -1.552"
>
> The output of the last paste() is incorrect. I am using R version 2.6.1.

Why do you think it is incorrect?

?paste says

      'paste' converts its arguments (_via_ 'as.character') to character
      strings, and concatenates them (separating them by the string
      given by 'sep').

and

> as.character(d)
[1] "-0.575999999999999" "-1.552"

so this is correctly documented.  From as.character()

      'as.character' represents real and complex numbers to 15
      significant digits (technically the compiler's setting of the ISO
      C constant 'DBL_DIG', which will be 15 on machines supporting
      IEC60559 arithmetic according to the C99 standard).

and note

> print(d, digits=15)
[1] -0.575999999999999 -1.552000000000000

If you want a limited number of significant figures in paste(), use 
format() to convert the number yourself.

This is another manifestation of FAQ Q7.31: computer calculations on 
non-representable numbers are subject to rounding and representation 
errors.


> --
> Ant?nio Ferreira - http://www.di.fc.ul.pt/~asfe
> Assistant Lecturer - Department of Informatics
> Faculty of Sciences - University of Lisbon - PT
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595
--27464147-598378112-1203442115=:3205--


From bcarvalh at jhsph.edu  Tue Feb 19 18:33:19 2008
From: bcarvalh at jhsph.edu (Benilton Carvalho)
Date: Tue, 19 Feb 2008 12:33:19 -0500
Subject: [Rd] Bug using X11 on mac osx (for jpeg or png creation)
	(PR#10800)
In-Reply-To: <20080219132504.21885283416C@mail.pubhealth.ku.dk>
References: <20080219132504.21885283416C@mail.pubhealth.ku.dk>
Message-ID: <52FFB593-8F64-4A14-AA72-61D710DF0616@jhsph.edu>

It's not a bug and it is my understanding that it's documented.

 From the man page on jpeg:

     They may not be usable unless the X11 display is available to the  
owner of the R process.

and later:

      'bitmap' provides an alternative way to generate PNG and JPEG
      plots that does not depend on accessing the X11 display but does
      depend on having GhostScript installed.  (Devices 'GDD' in CRAN
      package 'GDD' and 'CairoJPEG' / 'CairoPNG' in CRAN package 'Cairo'
      are alternatives using several other additional pieces of
      software.)

So, the idea is to replace your jpeg() call by bitmap() (with the  
appropriate "type" argument.

b

On Feb 19, 2008, at 8:25 AM, bonneaud at enib.fr wrote:

> Full_Name: Stephane Bonneaud
> Version: 2.6.2
> OS: OSX - Leopard 10.5.2
> Submission from: (NULL) (195.221.233.130)
>
>
> Hello,
>
> I have a R code file containing the following code:
>
> -------
> # This code is in r2jpg.r
> # myData is filled here with some data from a file
> jpeg 
> (filename="test.jpg",width=960,height=720,pointsize=16,quality=100)
> plot(myData,xlab="anything", ylab="whatever",type="b",col="red",  
> lwd=4)
> dev.off()
> -------
>
> I executed this code within both the R GUI and the command line.  
> When launched
> through the R GUI (Mac OS X Cocoa GUI - GUI 1.22-devel (4844) (4844)),
> everything works just fine. The JPEG file is generated just I want.  
> Great!
> The problem is when I try to execute the code through the command  
> line in
> Terminal (OSX).
> I execute my code using the following command :
> cat r2jpg.r | R --silent --no-restore --no-save
>
> And I get the following error:
>
>> jpeg 
>> (filename="test.jpg",width=960,height=720,pointsize=16,quality=100)
> can't find X11 font
> Error in X11(paste("jpeg::", quality, ":", filename, sep = ""),  
> width,  :
>  impossible to start the peripheral JPEG
> Calls: jpeg
>
> (Sorry, I translated the error messages from french so it might be a  
> little
> different in english. If needed I can print it in english though)
>
> I saw that several persons had this problem, but did not find any  
> proper
> solution. Therefore, I tried to launch my command from xterm (still  
> in OSX) and
> not in Terminal, and it worked. There is definitely an issue with R  
> getting the
> proper environment variables for X11 or something like that when  
> launched from
> the command line in Terminal.
> When you launch the GUI, OSX detects it will need X11 (or something  
> like this
> :b), therefore all proper env variables are charged. From xterm,  
> obviously the
> proper env variables are set.
>
> How could R tell OSX to link with X11 when launched from command  
> line in
> Terminal?
>
> PS: sorry, it might be a leopard bug, but I thought somebody could  
> be interested
> in the R community. And maybe R developers might actually be able to  
> do
> something.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Tue Feb 19 18:40:16 2008
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Tue, 19 Feb 2008 18:40:16 +0100 (CET)
Subject: [Rd] (PR#10799) Assigning a sub-matrix from a data frame to a
Message-ID: <20080219174016.12500282EFF6@mail.pubhealth.ku.dk>

Where precisely is the bug here?  If you assign a list (d[,1:2] is a list: 
it is the whole data frame) to a numeric matrix you coerce the latter to 
mode list, and that is what happened.

If we have the simpler version

d <- data.frame(v1=1:2,v2=3:4)
x <- matrix(0, 2, 2)
x[] <- d

it may be easier to see what happened.

I think the problem is in your subject line: d[,1:2] is _not_ a 
sub-matrix.

Reproting behaviour as 'strange' without explaining what you thought 
should have happened and why leaves us guessing as to what you think the 
'bug' might be.


On Tue, 19 Feb 2008, david at opsi.co.za wrote:

> See below:
>
>
>
>> d = data.frame(v1=1:2,v2=1:2)
>
>> x = matrix(0,2,2)
>
>> x[,1:2] = d[,1:2]
>
>> x
>
> [[1]]
>
> [1] 1 2
>
>
>
> [[2]]
>
> [1] 1 2
>
>
>
> [[3]]
>
> [1] 1 2
>
>
>
> [[4]]
>
> [1] 1 2
>
>
>
>>
>
>
>
> Thanks for all the work in R. Still love it.
>
>
>
> David
>
>
>
>
>
> David Lubinsky
>
> Director
>
> OPSI Systems
>
>
>
> Phone:  +27 11 880 7951
>
> Cell: +27 82 452 9556
>
> URL:  <http://www.opsi.co.za> www.opsi.co.za
>
> Email:  <mailto:david at opsi.co.za> david at opsi.co.za
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Tue Feb 19 18:48:03 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 19 Feb 2008 17:48:03 +0000 (GMT)
Subject: [Rd] Bug using X11 on mac osx (for jpeg or png creation)
 (PR#10800)
In-Reply-To: <52FFB593-8F64-4A14-AA72-61D710DF0616@jhsph.edu>
References: <20080219132504.21885283416C@mail.pubhealth.ku.dk>
	<52FFB593-8F64-4A14-AA72-61D710DF0616@jhsph.edu>
Message-ID: <alpine.LFD.1.00.0802191740450.3205@gannet.stats.ox.ac.uk>

On Tue, 19 Feb 2008, Benilton Carvalho wrote:

> It's not a bug and it is my understanding that it's documented.
>
> From the man page on jpeg:
>
>   They may not be usable unless the X11 display is available to the owner of 
> the R process.
>
> and later:
>
>    'bitmap' provides an alternative way to generate PNG and JPEG
>    plots that does not depend on accessing the X11 display but does
>    depend on having GhostScript installed.  (Devices 'GDD' in CRAN
>    package 'GDD' and 'CairoJPEG' / 'CairoPNG' in CRAN package 'Cairo'
>    are alternatives using several other additional pieces of
>    software.)
>
> So, the idea is to replace your jpeg() call by bitmap() (with the appropriate 
> "type" argument.

He may have a slightly different version: he seems to have access to X11 
but no fonts available.  That is not an R bug: it may well be an Apple 
bug (we've seen similar things on Ubuntu, and there are lots of known 
issues with Apple's X11).

[BTW: it is better to report the exact French messages: we can look them 
up in the translations database.  Or even better, start R with LANGUAGE=en 
and report the English message.  I suspect this one is

     could not find any X11 fonts\nCheck that the Font Path is correct.

as that seems the closest match.  And if so the advice in that English 
message is the key to solving this.]

>
> b
>
> On Feb 19, 2008, at 8:25 AM, bonneaud at enib.fr wrote:
>
>> Full_Name: Stephane Bonneaud
>> Version: 2.6.2
>> OS: OSX - Leopard 10.5.2
>> Submission from: (NULL) (195.221.233.130)
>> 
>> 
>> Hello,
>> 
>> I have a R code file containing the following code:
>> 
>> -------
>> # This code is in r2jpg.r
>> # myData is filled here with some data from a file
>> jpeg(filename="test.jpg",width=960,height=720,pointsize=16,quality=100)
>> plot(myData,xlab="anything", ylab="whatever",type="b",col="red", lwd=4)
>> dev.off()
>> -------
>> 
>> I executed this code within both the R GUI and the command line. When 
>> launched
>> through the R GUI (Mac OS X Cocoa GUI - GUI 1.22-devel (4844) (4844)),
>> everything works just fine. The JPEG file is generated just I want. Great!
>> The problem is when I try to execute the code through the command line in
>> Terminal (OSX).
>> I execute my code using the following command :
>> cat r2jpg.r | R --silent --no-restore --no-save
>> 
>> And I get the following error:
>> 
>>> jpeg(filename="test.jpg",width=960,height=720,pointsize=16,quality=100)
>> can't find X11 font
>> Error in X11(paste("jpeg::", quality, ":", filename, sep = ""), width,  :
>> impossible to start the peripheral JPEG
>> Calls: jpeg
>> 
>> (Sorry, I translated the error messages from french so it might be a little
>> different in english. If needed I can print it in english though)
>> 
>> I saw that several persons had this problem, but did not find any proper
>> solution. Therefore, I tried to launch my command from xterm (still in OSX) 
>> and
>> not in Terminal, and it worked. There is definitely an issue with R getting 
>> the
>> proper environment variables for X11 or something like that when launched 
>> from
>> the command line in Terminal.
>> When you launch the GUI, OSX detects it will need X11 (or something like 
>> this
>> :b), therefore all proper env variables are charged. From xterm, obviously 
>> the
>> proper env variables are set.
>> 
>> How could R tell OSX to link with X11 when launched from command line in
>> Terminal?
>> 
>> PS: sorry, it might be a leopard bug, but I thought somebody could be 
>> interested
>> in the R community. And maybe R developers might actually be able to do
>> something.
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hb at stat.berkeley.edu  Wed Feb 20 13:25:34 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Wed, 20 Feb 2008 04:25:34 -0800
Subject: [Rd] Reference: A Legal Issues Primer for Open Source and Free
	Software Projects
Message-ID: <59d7961d0802200425y10129eedqdb172332025ce2ad@mail.gmail.com>

FYI,

I found the following to give a useful introduction to what
copyright/left is, the ideas behind open-source licenses, and more:

Fontana R. et al. 2008. A Legal Issues Primer for Open Source and Free
Software Projects. Version 1.5.  Software Freedom Law Center, February
14, 2008.
URL: http://www.softwarefreedom.org/resources/2008/foss-primer.html

/Henrik


From jbrzusto at fastmail.fm  Wed Feb 20 18:25:11 2008
From: jbrzusto at fastmail.fm (jbrzusto at fastmail.fm)
Date: Wed, 20 Feb 2008 18:25:11 +0100 (CET)
Subject: [Rd] minor bug and patch: attr(x,
	"names")<-y when y is a pairlist (PR#10807)
Message-ID: <20080220172511.2F0D8282EFF8@mail.pubhealth.ku.dk>

Full_Name: John Brzustowski
Version: R-devel trunk and R 2.4.0
OS: linux
Submission from: (NULL) (76.10.152.79)


# Bug: 
> x<-1:3
> attr(x, "names")<-pairlist("a", "b", "c")
> x
a a a 
1 2 3 
# Note that the simpler alternative does work:
> names(x)<-pairlist("a", "b", "c")
> x
a b c 
1 2 3 

# After applying the patch:
> x<-1:3
> attr(x, "names")<-pairlist("a", "b", "c")
> x
a b c 
1 2 3 

# The problem is in src/main/attrib.c: namesgets(), where
# the pointer to the pairlist of names is not advanced.

# Here is a simple patch against R-devel trunk.  A cleaner
# but more complicated approach would be 
# to refactor namesgets() and do_namesgets().
#
# Note that the name list need not be as long as the LHS,
# because subsequent code pads the name list with NAs, if needed.

 Index: trunk/src/main/attrib.c
===================================================================
--- trunk/src/main/attrib.c	(revision 44547)
+++ trunk/src/main/attrib.c	(working copy)
@@ -681,7 +681,7 @@
 SEXP namesgets(SEXP vec, SEXP val)
 {
     int i;
-    SEXP s, rval;
+    SEXP s, rval, tval;
 
     PROTECT(vec);
     PROTECT(val);
@@ -695,8 +695,8 @@
 	else {
 	    rval = allocVector(STRSXP, length(vec));
 	    PROTECT(rval);
-	    for (i = 0; i < length(vec); i++) {
-		s = coerceVector(CAR(val), STRSXP);
+	    for (i = 0, tval=val; i < length(vec) && tval != R_NilValue; i++,
tval=CDR(tval)) {
+		s = coerceVector(CAR(tval), STRSXP);
 		SET_STRING_ELT(rval, i, STRING_ELT(s, 0));
 	    }
 	    UNPROTECT(1);


From davison at stats.ox.ac.uk  Wed Feb 20 20:04:13 2008
From: davison at stats.ox.ac.uk (Dan Davison)
Date: Wed, 20 Feb 2008 19:04:13 +0000
Subject: [Rd] allow NAs in upper tri for eigen(x,symmetric=TRUE)?
In-Reply-To: <18254.60654.667672.388353@stat.math.ethz.ch>
References: <20071129113418.GA11773@stats.ox.ac.uk>
	<18254.60654.667672.388353@stat.math.ethz.ch>
Message-ID: <20080220190413.GA24547@stats.ox.ac.uk>

Thanks for acting on my original quibble; I had never questioned whether the diagonal
was part of the lower triangle. However, I'm afraid I now have another related quibble.

Seeing as ?eigen says that if(symmetric) 'only its lower triangle is used', it's seems a
bit unfair of it to complain when there are NAs in the upper triangle. For example, when 
computing a covariance/distance matrix between a large number of individuals, one might
be tempted to only compute the lower.tri values and leave the upper.tri NA.

Do you see any justification for changing eigen() along the lines of

will.use <- if(symmetric) lower.tri(x, diag=TRUE) else TRUE
if (any(!is.finite(x[will.use])))
        stop("infinite or missing values in 'x'")
?

Thanks,

Dan

On Thu, Nov 29, 2007 at 05:46:38PM +0100, Martin Maechler wrote:
> >>>>> "DD" == Dan Davison <davison at stats.ox.ac.uk>
> >>>>>     on Thu, 29 Nov 2007 11:34:18 +0000 writes:
> 
>     DD> from ?eigen
>     DD> symmetric: if 'TRUE', the matrix is assumed to be symmetric (or
>     DD> Hermitian if complex) and only its lower triangle is used. If
>     DD> 'symmetric' is not specified, the matrix is inspected for
>     DD> symmetry.
> 
> 
>     DD> I think that could mislead a naive reader as it suggests that, with symmetric=TRUE,
>     DD> the result of eigen() (vectors and values) depends only on the lower-triangular values, 
>     DD> and thus not on the values on the diagonal (that's not true for the eigenvalues).
> 
> Well, that all depends on what you think when you read 
> "lower triangle".
> 
> For many of us, this can include the diagonal or not, and we
> don't know if it is not specified further.
> 
> ?lower.tri  -- shows the option to include the diagonal.
> 
> Consequently, I'd suggest to replace
> 
>        "only its lower triangle is used"
> with   "only its lower triangle (diagonal included) is used"
> 
> Martin Maechler, ETH Zurich
> 
>     DD> I suggest that changing it to 
> 
>     DD> "... and only its lower triangle is used when computing the eigenvectors."
> 
>     DD> would be more accurate, perhaps even with a reminder about the trace - sum of eigenvalues
>     DD> relationship.
> 
>     DD> Dan
> 
>     DD> ______________________________________________
>     DD> R-devel at r-project.org mailing list
>     DD> https://stat.ethz.ch/mailman/listinfo/r-devel


From vmakarov at pace.edu  Wed Feb 20 22:51:34 2008
From: vmakarov at pace.edu (Vladmir Makarov)
Date: Wed, 20 Feb 2008 16:51:34 -0500
Subject: [Rd] DNAcopy package output data
Message-ID: <7cac4bd80802201351i6c5f87fao2e076a47b05c65ed@mail.gmail.com>

Hello R Developers

I am using DNACopy package
http://bioconductor.org/packages/1.9/bioc/html/DNAcopy.html

I am not able to figure out how to (if at all possible) to modify
output format, namely, I am getting the following:
"ID"	"chrom"	"loc.start"	"loc.end"	"num.mark"	"seg.mean"

Is it a way to get also median and standard deviation?

Thanks in advance,
Vlad

-- 
***********************************
 Dr. Vladimir Makarov
 Instructor, Computer Science Department
 School of Computer Science and Information Systems
 Pace University
 163 Williams Street
 New York, NY 10038
 Phone: (212) 639 - 7422
 eMail: vmakarov at pace.edu
 http://matrix.csis.pace.edu/~vmakarov/

***********************************

####################################################################
The information contained in this email message and any files
transmitted with it are confidential and intended solely for the use
by the individual(s) originally addressed. Please disregard and delete
this email if you are not the intended recipient.
####################################################################


From hin-tak.leung at cimr.cam.ac.uk  Wed Feb 20 23:33:47 2008
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Wed, 20 Feb 2008 22:33:47 +0000
Subject: [Rd] Bug using X11 on mac osx (for jpeg or png creation)
	(PR#10800)
In-Reply-To: <alpine.LFD.1.00.0802191740450.3205@gannet.stats.ox.ac.uk>
References: <20080219132504.21885283416C@mail.pubhealth.ku.dk>	<52FFB593-8F64-4A14-AA72-61D710DF0616@jhsph.edu>
	<alpine.LFD.1.00.0802191740450.3205@gannet.stats.ox.ac.uk>
Message-ID: <47BCAACB.2030402@cimr.cam.ac.uk>

That being documented behavior, I still find the documented behavior
somewhat inconvenient: the fact that some code I interactively tested
does not run in the same way in batch mode.

My own solution involves running a separate semi-permanent Xvfb process
and let R CMD BATCH uses the virtual X server; but I do wish that
jpeg()/png() would work the same way - or at least in a similiar way
transparently with or without X11. I know of the bitmap(), but my wish
would be to *using the exact same functions* in interactive/batch mode.
bitmap() doesn't quite work the same as jpeg()/png(), nor is Xvfb
gives identical result to the console X server (due to resolution/dpi 
configuation differences). The thing is, WYSIWYG, matching font sizes
relative to plots, etc, can only be done visually, and then everything
changes in batch mode... so in the end, I do pdf's in interactive 
sessions and look at them with a separate viewer (pdf/ps not dependent 
on X11), and if there are too many dots, etc I rasterize it through 
ghostscript to keep the file size down. None of these are too convenient.

Prof Brian Ripley wrote:
> On Tue, 19 Feb 2008, Benilton Carvalho wrote:
> 
>> It's not a bug and it is my understanding that it's documented.
>>
>> From the man page on jpeg:
>>
>>   They may not be usable unless the X11 display is available to the owner of 
>> the R process.
>>
>> and later:
>>
>>    'bitmap' provides an alternative way to generate PNG and JPEG
>>    plots that does not depend on accessing the X11 display but does
>>    depend on having GhostScript installed.  (Devices 'GDD' in CRAN
>>    package 'GDD' and 'CairoJPEG' / 'CairoPNG' in CRAN package 'Cairo'
>>    are alternatives using several other additional pieces of
>>    software.)
>>
>> So, the idea is to replace your jpeg() call by bitmap() (with the appropriate 
>> "type" argument.
> 
> He may have a slightly different version: he seems to have access to X11 
> but no fonts available.  That is not an R bug: it may well be an Apple 
> bug (we've seen similar things on Ubuntu, and there are lots of known 
> issues with Apple's X11).
> 
> [BTW: it is better to report the exact French messages: we can look them 
> up in the translations database.  Or even better, start R with LANGUAGE=en 
> and report the English message.  I suspect this one is
> 
>      could not find any X11 fonts\nCheck that the Font Path is correct.
> 
> as that seems the closest match.  And if so the advice in that English 
> message is the key to solving this.]
> 
>> b
>>
>> On Feb 19, 2008, at 8:25 AM, bonneaud at enib.fr wrote:
>>
>>> Full_Name: Stephane Bonneaud
>>> Version: 2.6.2
>>> OS: OSX - Leopard 10.5.2
>>> Submission from: (NULL) (195.221.233.130)
>>>
>>>
>>> Hello,
>>>
>>> I have a R code file containing the following code:
>>>
>>> -------
>>> # This code is in r2jpg.r
>>> # myData is filled here with some data from a file
>>> jpeg(filename="test.jpg",width=960,height=720,pointsize=16,quality=100)
>>> plot(myData,xlab="anything", ylab="whatever",type="b",col="red", lwd=4)
>>> dev.off()
>>> -------
>>>
>>> I executed this code within both the R GUI and the command line. When 
>>> launched
>>> through the R GUI (Mac OS X Cocoa GUI - GUI 1.22-devel (4844) (4844)),
>>> everything works just fine. The JPEG file is generated just I want. Great!
>>> The problem is when I try to execute the code through the command line in
>>> Terminal (OSX).
>>> I execute my code using the following command :
>>> cat r2jpg.r | R --silent --no-restore --no-save
>>>
>>> And I get the following error:
>>>
>>>> jpeg(filename="test.jpg",width=960,height=720,pointsize=16,quality=100)
>>> can't find X11 font
>>> Error in X11(paste("jpeg::", quality, ":", filename, sep = ""), width,  :
>>> impossible to start the peripheral JPEG
>>> Calls: jpeg
>>>
>>> (Sorry, I translated the error messages from french so it might be a little
>>> different in english. If needed I can print it in english though)
>>>
>>> I saw that several persons had this problem, but did not find any proper
>>> solution. Therefore, I tried to launch my command from xterm (still in OSX) 
>>> and
>>> not in Terminal, and it worked. There is definitely an issue with R getting 
>>> the
>>> proper environment variables for X11 or something like that when launched 
>>> from
>>> the command line in Terminal.
>>> When you launch the GUI, OSX detects it will need X11 (or something like 
>>> this
>>> :b), therefore all proper env variables are charged. From xterm, obviously 
>>> the
>>> proper env variables are set.
>>>
>>> How could R tell OSX to link with X11 when launched from command line in
>>> Terminal?
>>>
>>> PS: sorry, it might be a leopard bug, but I thought somebody could be 
>>> interested
>>> in the R community. And maybe R developers might actually be able to do
>>> something.
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From mtmorgan at fhcrc.org  Wed Feb 20 23:36:41 2008
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Wed, 20 Feb 2008 14:36:41 -0800
Subject: [Rd] DNAcopy package output data
In-Reply-To: <7cac4bd80802201351i6c5f87fao2e076a47b05c65ed@mail.gmail.com>
	(Vladmir Makarov's message of "Wed, 20 Feb 2008 16:51:34 -0500")
References: <7cac4bd80802201351i6c5f87fao2e076a47b05c65ed@mail.gmail.com>
Message-ID: <6phzltvcl1i.fsf@gopher4.fhcrc.org>

This is a Bioconductor package, so please address questions to the
Bioconductor list (instructions at
http://www.bioconductor.org/docs/mailList.html). This is not a
question related to 'development' but to use, so you do not need to
ask on the '-devel' mailing list.

Do you mean the result of 'segment'? It's always helpful to provide a
reproducible (e.g., using the example data provided with the package)
example!

I think the easy answer to your question is 'no', there are no
documented arguments influencing how statistics on the segment are
calculated. The longer answer is 'yes', since the source of the
function is readily available (typing

> segment

) and the segment boundaries are returned and hence other statistics
can be calculated by the user.

Hope that helps,

Martin

"Vladmir Makarov" <vmakarov at pace.edu> writes:

> Hello R Developers
>
> I am using DNACopy package
> http://bioconductor.org/packages/1.9/bioc/html/DNAcopy.html
>
> I am not able to figure out how to (if at all possible) to modify
> output format, namely, I am getting the following:
> "ID"	"chrom"	"loc.start"	"loc.end"	"num.mark"	"seg.mean"
>
> Is it a way to get also median and standard deviation?
>
> Thanks in advance,
> Vlad
>
> -- 
> ***********************************
>  Dr. Vladimir Makarov
>  Instructor, Computer Science Department
>  School of Computer Science and Information Systems
>  Pace University
>  163 Williams Street
>  New York, NY 10038
>  Phone: (212) 639 - 7422
>  eMail: vmakarov at pace.edu
>  http://matrix.csis.pace.edu/~vmakarov/
>
> ***********************************
>
> ####################################################################
> The information contained in this email message and any files
> transmitted with it are confidential and intended solely for the use
> by the individual(s) originally addressed. Please disregard and delete
> this email if you are not the intended recipient.
> ####################################################################
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Martin Morgan
Computational Biology / Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N.
PO Box 19024 Seattle, WA 98109

Location: Arnold Building M2 B169
Phone: (206) 667-2793


From ripley at stats.ox.ac.uk  Thu Feb 21 00:21:14 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 20 Feb 2008 23:21:14 +0000 (GMT)
Subject: [Rd] Tcl/Tk extensions
Message-ID: <Pine.LNX.4.64.0802202249080.31278@auk.stats>

This is a word of warning to those package authors who want to make use of 
Tcl/Tk extensions.

First, please document them in the DESCRIPTION file, in the 
SystemRequirements field.

Second, people have been recommending ActiveTcl.  The latest ActiveTcl 
releases are much smaller, and it seems this is because the extensions 
are not included so those recommendations will need to be changed.

I am contemplating adding a few extensions to the R 2.7.0 Windows 
distribution -- certainly BWidget and Tktable seem fairly easy to do. The 
only other Tcl/Tk extensions I have found are Iwidgets, which might not be 
so easy (it requires itcl and itk) and Img (not easy).  (There are some 
mentioned in packages which I have not found.)

There are a number of additional widgets in Tk 8.5 that might be easier to 
make use of (R 2.7.0 for Windows will ship with Tcl/Tk 8.5.x).

Ideally someone who wants to make use of these extensions will volunteer 
to distribute Windows versions of them -- I expect Duncan Murdoch would 
be happy to include them in Rtools.exe if the licence conditions allow.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From pburns at pburns.seanet.com  Thu Feb 21 11:02:40 2008
From: pburns at pburns.seanet.com (Patrick Burns)
Date: Thu, 21 Feb 2008 10:02:40 +0000
Subject: [Rd] ar on a constant series
Message-ID: <47BD4C40.2010100@pburns.seanet.com>

Apparently it is quite rare to be as stupid as me and
want to predict a constant time series with 'ar'.

 > ar(rep(4, 60))
Error in if (order > 0) coefs[order, 1:order] else numeric(0) :
  missing value where TRUE/FALSE needed
In addition: Warning message:
In if (order > 0) coefs[order, 1:order] else numeric(0) :
  the condition has length > 1 and only the first element will be used


A fix for the multivariate case looks quite daunting, but
the univariate case can be improved (in my opinion at least)
with not much effort.

The definition of 'order' in 'ar.yw.default' can be changed from:

         order <- if (aic)
             (0:order.max)[xaic == 0]
         else order.max

to:

      if(any(var.pred <= 0)) {
        order <- which(var.pred <= 0)[1] - 1
      } else {
            order <- if (aic)
                (0:order.max)[xaic == 0]
            else order.max
      }

I presume something similar can be done in 'ar.burg',
but I haven't looked.  'ar.ols' and 'ar.mle' look problematic
for fixes.


Patrick Burns
patrick at burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")


From asfe at di.fc.ul.pt  Thu Feb 21 00:45:39 2008
From: asfe at di.fc.ul.pt (asfe at di.fc.ul.pt)
Date: Thu, 21 Feb 2008 00:45:39 +0100 (CET)
Subject: [Rd] Incorrect paste() output (PR#10801)
Message-ID: <20080220234540.0637B282EF48@mail.pubhealth.ku.dk>

Thank you for your kind answers and sorry for the noise I created.

-- 
Ant?nio Ferreira - http://www.di.fc.ul.pt/~asfe
Assistant Lecturer - Department of Informatics
Faculty of Sciences - University of Lisbon - PT


From vmakarov at pace.edu  Thu Feb 21 16:22:14 2008
From: vmakarov at pace.edu (Vladmir Makarov)
Date: Thu, 21 Feb 2008 10:22:14 -0500
Subject: [Rd] DNAcopy package output data
In-Reply-To: <6phzltvcl1i.fsf@gopher4.fhcrc.org>
References: <7cac4bd80802201351i6c5f87fao2e076a47b05c65ed@mail.gmail.com>
	<6phzltvcl1i.fsf@gopher4.fhcrc.org>
Message-ID: <7cac4bd80802210722w6bab51c7lb89a91e4667cf9aa@mail.gmail.com>

>The longer answer is 'yes', since the source of the
> function is readily available (typing segment)

Hello,
That is exactly why I have posted this question at the development
forum - there was no way of specifying output parameters in the
"segment" function
Thank you
Vlad

On 2/20/08, Martin Morgan <mtmorgan at fhcrc.org> wrote:
> This is a Bioconductor package, so please address questions to the
> Bioconductor list (instructions at
> http://www.bioconductor.org/docs/mailList.html). This is not a
> question related to 'development' but to use, so you do not need to
> ask on the '-devel' mailing list.
>
> Do you mean the result of 'segment'? It's always helpful to provide a
> reproducible (e.g., using the example data provided with the package)
> example!
>
> I think the easy answer to your question is 'no', there are no
> documented arguments influencing how statistics on the segment are
> calculated. The longer answer is 'yes', since the source of the
> function is readily available (typing
>
> > segment
>
> ) and the segment boundaries are returned and hence other statistics
> can be calculated by the user.
>
> Hope that helps,
>
> Martin
>
> "Vladmir Makarov" <vmakarov at pace.edu> writes:
>
> > Hello R Developers
> >
> > I am using DNACopy package
> > http://bioconductor.org/packages/1.9/bioc/html/DNAcopy.html
> >
> > I am not able to figure out how to (if at all possible) to modify
> > output format, namely, I am getting the following:
> > "ID"  "chrom" "loc.start"     "loc.end"       "num.mark"      "seg.mean"
> >
> > Is it a way to get also median and standard deviation?
> >
> > Thanks in advance,
> > Vlad
> >
> > --
> > ***********************************
> >  Dr. Vladimir Makarov
> >  Instructor, Computer Science Department
> >  School of Computer Science and Information Systems
> >  Pace University
> >  163 Williams Street
> >  New York, NY 10038
> >  Phone: (212) 639 - 7422
> >  eMail: vmakarov at pace.edu
> >  http://matrix.csis.pace.edu/~vmakarov/
> >
> > ***********************************
> >
> > ####################################################################
> > The information contained in this email message and any files
> > transmitted with it are confidential and intended solely for the use
> > by the individual(s) originally addressed. Please disregard and delete
> > this email if you are not the intended recipient.
> > ####################################################################
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
>
> --
> Martin Morgan
> Computational Biology / Fred Hutchinson Cancer Research Center
> 1100 Fairview Ave. N.
> PO Box 19024 Seattle, WA 98109
>
> Location: Arnold Building M2 B169
> Phone: (206) 667-2793
>


-- 
***********************************
  Dr. Vladimir Makarov
  Instructor, Computer Science Department
  School of Computer Science and Information Systems
  Pace University
  163 Williams Street
  New York, NY 10038
  Phone: (212) 639 - 7422
  eMail: vmakarov at pace.edu
  http://matrix.csis.pace.edu/~vmakarov/

***********************************

####################################################################
The information contained in this email message and any files
transmitted with it are confidential and intended solely for the use
by the individual(s) originally addressed. Please disregard and delete
this email if you are not the intended recipient.
####################################################################


From hb at stat.berkeley.edu  Thu Feb 21 18:56:22 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Thu, 21 Feb 2008 09:56:22 -0800
Subject: [Rd] Feedback on a colClasses() generator function in progress?
Message-ID: <59d7961d0802210956s713f46b7oa2b8500edb080fe9@mail.gmail.com>

I'm working on colClasses() function that generates "colClasses"
vectors for read.table() using a compact format string (see below).
The below is what I got right now.  Before adding it to R.utils, I
would like to check with you if I'm missing something obvious such as
certain column classes, if there are use cases it cannot handle, or if
there is another way to achieve the same.  I appreciate any feedback.

Cheers

Henrik


library(R.oo)
source("http://www.braju.com/R/tmp/colClasses.R")

# All predefined types
print(colClasses("-?cdfilnrzDP"))
## [1] "NULL"      "NA"        "character" "double"
## [5] "factor"    "integer"   "logical"   "numeric"
## [9] "raw"       "complex"   "Date"      "POSIXct"

# A string in column 1, integers in column 4 and 5, rest skipped
print(colClasses("c--ii----"))
## [1] "character" "NULL"      "NULL"      "integer"
## [5] "integer"   "NULL"      "NULL"      "NULL"
## [9] "NULL"

# Repeats and custom column classes
c1 <- colClasses("3c{MyClass}3{foo}")
print(c1)
## [1] "character" "character" "character" "MyClass"
## [5] "foo"       "foo"       "foo"

# Passing repeats and class names using sprintf() syntax
c2 <- colClasses("%dc{%s}%d{foo}", 3, "MyClass", 3)
stopifnot(identical(c1, c2))


From Greg.Snow at imail.org  Thu Feb 21 22:31:24 2008
From: Greg.Snow at imail.org (Greg Snow)
Date: Thu, 21 Feb 2008 14:31:24 -0700
Subject: [Rd] Assigning a sub-matrix from a data frame to a regular
 matrixcauses strange behaviour (version 2.6.1) (PR#10799)
In-Reply-To: <20080219125025.0B974282EF48@mail.pubhealth.ku.dk>
References: <20080219125025.0B974282EF48@mail.pubhealth.ku.dk>
Message-ID: <07E228A5BE53C24CAD490193A7381BBBEE0FE9@LP-EXCHVS07.CO.IHC.COM>

Part of the problem is that you are not adjusting for the fact that you
are smarter than the computer.

Realize that the way you are doing the assignment requires a lot of
different things behind the scenes and remember that data frames are
basically lists with some extra attributes and matricies are vectors
with some extra attributes.  

So in your case the left hand side of the assignment is a vector with 4
slots to fill and the right side is a list with 2 element that need to
be put into the 4 slots.

You realize that each of the 2 elements of the list have 2 elements for
a total of 4 and being the smart human that you are (assuming your not a
turing machine) you think, that is a total of 4 elements, one for each
slot.  But the computer is not smart and unless someone tells it to look
for this type of case and convert, it is not smart enough to do it on
its own and instead puts a list element into each slot of the vector
(changing it to a list in the process).  

Since the programmers of these routines did not anticipate you asking
the computer to do such things, you can tell the computer how you really
want the assignment to take place by turning the 4 numbers into
something the computer knows about.  Wrap the d[,1:2] in either
as.matrix or unlist and it does what I expect you expect it to do.

Hope this helps,

-- 
Gregory (Greg) L. Snow Ph.D.
Statistical Data Center
Intermountain Healthcare
greg.snow at imail.org
(801) 408-8111
 
 

> -----Original Message-----
> From: r-devel-bounces at r-project.org 
> [mailto:r-devel-bounces at r-project.org] On Behalf Of david at opsi.co.za
> Sent: Tuesday, February 19, 2008 5:50 AM
> To: r-devel at stat.math.ethz.ch
> Cc: R-bugs at biostat.ku.dk
> Subject: [Rd] Assigning a sub-matrix from a data frame to a 
> regular matrixcauses strange behaviour (version 2.6.1) (PR#10799)
> 
> See below:
> 
>  
> 
> > d = data.frame(v1=1:2,v2=1:2)
> 
> > x = matrix(0,2,2)
> 
> > x[,1:2] = d[,1:2]
> 
> > x
> 
> [[1]]
> 
> [1] 1 2
> 
>  
> 
> [[2]]
> 
> [1] 1 2
> 
>  
> 
> [[3]]
> 
> [1] 1 2
> 
>  
> 
> [[4]]
> 
> [1] 1 2
> 
>  
> 
> > 
> 
>  
> 
> Thanks for all the work in R. Still love it.
> 
>  
> 
> David
> 
>  
> 
>  
> 
> David Lubinsky
> 
> Director
> 
> OPSI Systems
> 
>  
> 
> Phone:  +27 11 880 7951
> 
> Cell: +27 82 452 9556
> 
> URL:  <http://www.opsi.co.za> www.opsi.co.za
> 
> Email:  <mailto:david at opsi.co.za> david at opsi.co.za
> 
>  
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


From Greg.Snow at imail.org  Thu Feb 21 22:35:08 2008
From: Greg.Snow at imail.org (Greg.Snow at imail.org)
Date: Thu, 21 Feb 2008 22:35:08 +0100 (CET)
Subject: [Rd] Assigning a sub-matrix from a data frame to a regular
	(PR#10822)
Message-ID: <20080221213508.B4A87282EFF6@mail.pubhealth.ku.dk>

Part of the problem is that you are not adjusting for the fact that you
are smarter than the computer.

Realize that the way you are doing the assignment requires a lot of
different things behind the scenes and remember that data frames are
basically lists with some extra attributes and matricies are vectors
with some extra attributes. =20

So in your case the left hand side of the assignment is a vector with 4
slots to fill and the right side is a list with 2 element that need to
be put into the 4 slots.

You realize that each of the 2 elements of the list have 2 elements for
a total of 4 and being the smart human that you are (assuming your not a
turing machine) you think, that is a total of 4 elements, one for each
slot.  But the computer is not smart and unless someone tells it to look
for this type of case and convert, it is not smart enough to do it on
its own and instead puts a list element into each slot of the vector
(changing it to a list in the process). =20

Since the programmers of these routines did not anticipate you asking
the computer to do such things, you can tell the computer how you really
want the assignment to take place by turning the 4 numbers into
something the computer knows about.  Wrap the d[,1:2] in either
as.matrix or unlist and it does what I expect you expect it to do.

Hope this helps,

--=20
Gregory (Greg) L. Snow Ph.D.
Statistical Data Center
Intermountain Healthcare
greg.snow at imail.org
(801) 408-8111
=20
=20

> -----Original Message-----
> From: r-devel-bounces at r-project.org=20
> [mailto:r-devel-bounces at r-project.org] On Behalf Of david at opsi.co.za
> Sent: Tuesday, February 19, 2008 5:50 AM
> To: r-devel at stat.math.ethz.ch
> Cc: R-bugs at biostat.ku.dk
> Subject: [Rd] Assigning a sub-matrix from a data frame to a=20
> regular matrixcauses strange behaviour (version 2.6.1) (PR#10799)
>=20
> See below:
>=20
> =20
>=20
> > d =3D data.frame(v1=3D1:2,v2=3D1:2)
>=20
> > x =3D matrix(0,2,2)
>=20
> > x[,1:2] =3D d[,1:2]
>=20
> > x
>=20
> [[1]]
>=20
> [1] 1 2
>=20
> =20
>=20
> [[2]]
>=20
> [1] 1 2
>=20
> =20
>=20
> [[3]]
>=20
> [1] 1 2
>=20
> =20
>=20
> [[4]]
>=20
> [1] 1 2
>=20
> =20
>=20
> >=20
>=20
> =20
>=20
> Thanks for all the work in R. Still love it.
>=20
> =20
>=20
> David
>=20
> =20
>=20
> =20
>=20
> David Lubinsky
>=20
> Director
>=20
> OPSI Systems
>=20
> =20
>=20
> Phone:  +27 11 880 7951
>=20
> Cell: +27 82 452 9556
>=20
> URL:  <http://www.opsi.co.za> www.opsi.co.za
>=20
> Email:  <mailto:david at opsi.co.za> david at opsi.co.za
>=20
> =20
>=20
>=20
> 	[[alternative HTML version deleted]]
>=20
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>=20


From hb at stat.berkeley.edu  Thu Feb 21 23:57:46 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Thu, 21 Feb 2008 14:57:46 -0800
Subject: [Rd] Suggestion: isLoaded() to test if a package is loaded (without
	loading it)
Message-ID: <59d7961d0802211457s42e3ac82r6a2ea73af701ea82@mail.gmail.com>

Hi,

for 'affxparser' (Bioconductor), we needed a function to test if a
certain package was loaded or not, but we did not want to load it if
it wasn't, which is why we couldn't use require().  We came up with
the following solution:

  isPackageLoaded <- function(package, version=NULL, ...) {
    s <- search();
    if (is.null(version)) {
      s <- sub("_[0-9.-]*", "", s);
    } else {
      package <- manglePackageName(package, version);
    }
    pattern <- sprintf("package:%s", package);
    (pattern %in% s);
  }

Example:  isPackageLoaded("base")

As I see that require() and library() is using similar code for
testing if a package is loaded or not, feel free to have the above
added to the 'base' package.

/Henrik


From seth at userprimary.net  Fri Feb 22 02:27:32 2008
From: seth at userprimary.net (Seth Falcon)
Date: Thu, 21 Feb 2008 17:27:32 -0800
Subject: [Rd] Suggestion: isLoaded() to test if a package is loaded
	(without loading it)
In-Reply-To: <59d7961d0802211457s42e3ac82r6a2ea73af701ea82@mail.gmail.com>
	(Henrik Bengtsson's message of "Thu\,
	21 Feb 2008 14\:57\:46 -0800")
References: <59d7961d0802211457s42e3ac82r6a2ea73af701ea82@mail.gmail.com>
Message-ID: <m28x1d3hmj.fsf@userprimary.net>

"Henrik Bengtsson" <hb at stat.berkeley.edu> writes:
> Hi,
>
> for 'affxparser' (Bioconductor), we needed a function to test if a
> certain package was loaded or not, but we did not want to load it if
> it wasn't, which is why we couldn't use require().  We came up with
> the following solution:
>
>   isPackageLoaded <- function(package, version=NULL, ...) {
>     s <- search();
>     if (is.null(version)) {
>       s <- sub("_[0-9.-]*", "", s);
>     } else {
>       package <- manglePackageName(package, version);
>     }
>     pattern <- sprintf("package:%s", package);
>     (pattern %in% s);
>   }

This only tests whether or not the given package is attached to the
search path.  You also (I think) want to search loaded namespaces.

But I think such a helper would be useful in general.

+ seth

-- 
Seth Falcon | seth at userprimary.net | blog: http://userprimary.net/user/


From ripley at stats.ox.ac.uk  Fri Feb 22 08:45:32 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 22 Feb 2008 07:45:32 +0000 (GMT)
Subject: [Rd] level of mutability for the type of a SEXP
In-Reply-To: <27d1e6020802190440p4f51b6bai53010d1dec33c3a@mail.gmail.com>
References: <27d1e6020802190440p4f51b6bai53010d1dec33c3a@mail.gmail.com>
Message-ID: <alpine.LFD.1.00.0802191244250.13928@gannet.stats.ox.ac.uk>

On Tue, 19 Feb 2008, Laurent Gautier wrote:

> Dear list,
>
> I am writing C code to interface with R, and I would like to know the
> level of mutability for the type of a SEXP.
>
> I see that there is a macro/function TYPEOF(), and that it can be used
> as an l-value, as well as a macro/function SET_TYPEOF().

The macros are not available to user code, so TYPEOF is not available to 
use as an l-value.

> My question is "should the type be considered immutable, or it can it
> change after the SEXP has been created and used for a while ?".
>
> I understand that a call to TYPEOF will not perform any conversion,
> and my question is only about being sure that once the type of a given
> SEXP is set it cannot change.

It is SEXPRECs that have types, and their type can be changed and in a few 
cases is in R's internal code.  You should only change type between 
SEXPREC types with the same structure, e.g. from VECSXP to EXPRSXP or 
DOTSXP to LISTSXP.  I am unaware of any examples where this happens that 
involve a SEXPREC pointed to by a SEXP not in the internal code concerned.

Since a SEXP is a pointer, the type of the SEXPREC it points to can change 
(as which SEXPREC it is can) and frequently does -- that is one way 
arguments are coerced.

The R Internals manual has the details of the SEXPRECs and their 
structure.

I don't see the value of knowing though.  Anyone who needs to ask about R 
internals should regard the arguments passed to .Call/.External calls as 
read-only and also assume that there is no simultaneous evaluation going 
on that might change them.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From tmaravin at insightful.com  Fri Feb 22 01:10:08 2008
From: tmaravin at insightful.com (tmaravin at insightful.com)
Date: Fri, 22 Feb 2008 01:10:08 +0100 (CET)
Subject: [Rd] R CMD check for glmpath on Windows (PR#10823)
Message-ID: <20080222001008.A541E282EFF6@mail.pubhealth.ku.dk>

This is a multi-part message in MIME format.

------_=_NextPart_001_01C874E6.BBFFB95E
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

The problem first appeared in R 2.6.1 and is still there in R 2.6.2

On Windows running R CMD check command for glmpath package fails. The =
reason
seems to be that when R is running the examples file (glmpath-Ex.R), it =
skips
about 50 lines and as a result gives a syntax error.=20

I'm working with a modified version of the CRAN glmpath 0.94. My version
happens to give a more clear example of a problem than the original one. =



Lines 86-89 of glmpath-Ex.R:
bootstrap.a <- bootstrap.path(heart.data$x, heart.data$y,
  B=3D10, method=3D"bic")
## End Don't show
bootstrap.a

Lines 130-133 of glmpath-Ex.R:
### Name: cv.coxpath
### Title: Computes cross-validated (minus) log-partial-likelihoods for
###   coxpath
### Aliases: cv.coxpath


The end of glmpath-Ex.Rout:
> bootstrap.a <- bootstrap.path(heart.data$x, heart.data$y,
+   B=3D10, method=3D"bic")

> al-likelihoods for

Error: unexpected 'for' in "al-likelihoods for"

Execution halted



I've contacted Mee Young who replied: "It failed for some obscure =
reasons,
but CRAN admins thought that the issue was Fortran's I/O interfering =
with C.=20
However, the glmpath windows binary from any earlier version of R works
under the current version of R."


We've never observed this problem on LINUX.


--please do not edit the information below--

Version:
 platform =3D i386-pc-mingw32
 arch =3D i386
 os =3D mingw32
 system =3D i386, mingw32
 status =3D=20
 major =3D 2
 minor =3D 6.1
 year =3D 2007
 month =3D 11
 day =3D 26
 svn rev =3D 43537
 language =3D R
 version.string =3D R version 2.6.1 (2007-11-26)

Windows XP (build 2600) Service Pack 2.0

Locale:
LC_COLLATE=3DEnglish_United States.1252;LC_CTYPE=3DEnglish_United
States.1252;LC_MONETARY=3DEnglish_United
States.1252;LC_NUMERIC=3DC;LC_TIME=3DEnglish_United States.1252

Search Path:
 .GlobalEnv, package:stats, package:graphics, package:grDevices,
package:utils, package:datasets, package:methods, Autoloads, =
package:base

------_=_NextPart_001_01C874E6.BBFFB95E
Content-Type: application/octet-stream;
	name="glmpath-Ex.Rout"
Content-Transfer-Encoding: base64
Content-Description: glmpath-Ex.Rout
Content-Disposition: attachment;
	filename="glmpath-Ex.Rout"

DQpSIHZlcnNpb24gMi42LjIgKDIwMDgtMDItMDgpDQpDb3B5cmlnaHQgKEMpIDIwMDggVGhlIFIg
Rm91bmRhdGlvbiBmb3IgU3RhdGlzdGljYWwgQ29tcHV0aW5nDQpJU0JOIDMtOTAwMDUxLTA3LTAN
Cg0KUiBpcyBmcmVlIHNvZnR3YXJlIGFuZCBjb21lcyB3aXRoIEFCU09MVVRFTFkgTk8gV0FSUkFO
VFkuDQpZb3UgYXJlIHdlbGNvbWUgdG8gcmVkaXN0cmlidXRlIGl0IHVuZGVyIGNlcnRhaW4gY29u
ZGl0aW9ucy4NClR5cGUgJ2xpY2Vuc2UoKScgb3IgJ2xpY2VuY2UoKScgZm9yIGRpc3RyaWJ1dGlv
biBkZXRhaWxzLg0KDQpSIGlzIGEgY29sbGFib3JhdGl2ZSBwcm9qZWN0IHdpdGggbWFueSBjb250
cmlidXRvcnMuDQpUeXBlICdjb250cmlidXRvcnMoKScgZm9yIG1vcmUgaW5mb3JtYXRpb24gYW5k
DQonY2l0YXRpb24oKScgb24gaG93IHRvIGNpdGUgUiBvciBSIHBhY2thZ2VzIGluIHB1YmxpY2F0
aW9ucy4NCg0KVHlwZSAnZGVtbygpJyBmb3Igc29tZSBkZW1vcywgJ2hlbHAoKScgZm9yIG9uLWxp
bmUgaGVscCwgb3INCidoZWxwLnN0YXJ0KCknIGZvciBhbiBIVE1MIGJyb3dzZXIgaW50ZXJmYWNl
IHRvIGhlbHAuDQpUeXBlICdxKCknIHRvIHF1aXQgUi4NCg0KPiAjIyMgKiA8SEVBREVSPg0KPiAj
IyMNCj4gYXR0YWNoKE5VTEwsIG5hbWUgPSAiQ2hlY2tFeEVudiIpDQo+IGFzc2lnbigibmFtZUV4
IiwgDQorICAgICAgICBsb2NhbCh7DQorIAkgICBzIDwtICJfX3ttdXN0IHJlbWFrZSBSLWV4Lyou
Un1fXyINCisgICAgICAgICAgICBmdW5jdGlvbihuZXcpIHsNCisgICAgICAgICAgICAgICAgaWYo
IW1pc3NpbmcobmV3KSkgcyA8PC0gbmV3IGVsc2Ugcw0KKyAgICAgICAgICAgIH0NCisgICAgICAg
IH0pLA0KKyAgICAgICAgcG9zID0gIkNoZWNrRXhFbnYiKQ0KPiAjIyBBZGQgc29tZSBob29rcyB0
byBsYWJlbCBwbG90IHBhZ2VzIGZvciBiYXNlIGFuZCBncmlkIGdyYXBoaWNzDQo+IGFzc2lnbigi
YmFzZV9wbG90X2hvb2siLA0KKyAgICAgICAgZnVuY3Rpb24oKSB7DQorICAgICAgICAgICAgcHAg
PC0gcGFyKGMoIm1mZyIsIm1mY29sIiwib21hIiwibWFyIikpDQorICAgICAgICAgICAgaWYoYWxs
KHBwJG1mZ1sxOjJdID09IGMoMSwgcHAkbWZjb2xbMl0pKSkgew0KKyAgICAgICAgICAgICAgICBv
dXRlciA8LSAob21hNCA8LSBwcCRvbWFbNF0pID4gMDsgbWFyNCA8LSBwcCRtYXJbNF0NCisgICAg
ICAgICAgICAgICAgbXRleHQoc3ByaW50ZigiaGVscChcIiVzXCIpIiwgbmFtZUV4KCkpLCBzaWRl
ID0gNCwNCisgICAgICAgICAgICAgICAgICAgICAgbGluZSA9IGlmKG91dGVyKW1heCgxLCBvbWE0
IC0gMSkgZWxzZSBtaW4oMSwgbWFyNCAtIDEpLA0KKyAgICAgICAgICAgICAgIG91dGVyID0gb3V0
ZXIsIGFkaiA9IDEsIGNleCA9IC44LCBjb2wgPSAib3JjaGlkIiwgbGFzPTMpDQorICAgICAgICAg
ICAgfQ0KKyAgICAgICAgfSwNCisgICAgICAgIHBvcyA9ICJDaGVja0V4RW52IikNCj4gYXNzaWdu
KCJncmlkX3Bsb3RfaG9vayIsDQorICAgICAgICBmdW5jdGlvbigpIHsNCisgICAgICAgICAgICBw
dXNoVmlld3BvcnQodmlld3BvcnQod2lkdGg9dW5pdCgxLCAibnBjIikgLSB1bml0KDEsICJsaW5l
cyIpLA0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4PTAsIGp1c3Q9ImxlZnQi
KSkNCisgICAgICAgICAgICBncmlkLnRleHQoc3ByaW50ZigiaGVscChcIiVzXCIpIiwgbmFtZUV4
KCkpLA0KKyAgICAgICAgICAgICAgICAgICAgICB4PXVuaXQoMSwgIm5wYyIpICsgdW5pdCgwLjUs
ICJsaW5lcyIpLA0KKyAgICAgICAgICAgICAgICAgICAgICB5PXVuaXQoMC44LCAibnBjIiksIHJv
dD05MCwNCisgICAgICAgICAgICAgICAgICAgICAgZ3A9Z3Bhcihjb2w9Im9yY2hpZCIpKQ0KKyAg
ICAgICAgfSwNCisgICAgICAgIHBvcyA9ICJDaGVja0V4RW52IikNCj4gc2V0SG9vaygicGxvdC5u
ZXciLCAgICAgZ2V0KCJiYXNlX3Bsb3RfaG9vayIsIHBvcyA9ICJDaGVja0V4RW52IikpDQo+IHNl
dEhvb2soInBlcnNwIiwgICAgICAgIGdldCgiYmFzZV9wbG90X2hvb2siLCBwb3MgPSAiQ2hlY2tF
eEVudiIpKQ0KPiBzZXRIb29rKCJncmlkLm5ld3BhZ2UiLCBnZXQoImdyaWRfcGxvdF9ob29rIiwg
cG9zID0gIkNoZWNrRXhFbnYiKSkNCj4gYXNzaWduKCJjbGVhbkV4IiwNCisgICAgICAgIGZ1bmN0
aW9uKGVudiA9IC5HbG9iYWxFbnYpIHsNCisgCSAgIHJtKGxpc3QgPSBscyhlbnZpciA9IGVudiwg
YWxsLm5hbWVzID0gVFJVRSksIGVudmlyID0gZW52KQ0KKyAgICAgICAgICAgIFJOR2tpbmQoImRl
ZmF1bHQiLCAiZGVmYXVsdCIpDQorIAkgICBzZXQuc2VlZCgxKQ0KKyAgICAJICAgb3B0aW9ucyh3
YXJuID0gMSkNCisgCSAgIC5DaGVja0V4RW52IDwtIGFzLmVudmlyb25tZW50KCJDaGVja0V4RW52
IikNCisgCSAgIGRlbGF5ZWRBc3NpZ24oIlQiLCBzdG9wKCJUIHVzZWQgaW5zdGVhZCBvZiBUUlVF
IiksDQorIAkJICBhc3NpZ24uZW52ID0gLkNoZWNrRXhFbnYpDQorIAkgICBkZWxheWVkQXNzaWdu
KCJGIiwgc3RvcCgiRiB1c2VkIGluc3RlYWQgb2YgRkFMU0UiKSwNCisgCQkgIGFzc2lnbi5lbnYg
PSAuQ2hlY2tFeEVudikNCisgCSAgIHNjaCA8LSBzZWFyY2goKQ0KKyAJICAgbmV3aXRlbXMgPC0g
c2NoWyEgc2NoICVpbiUgLm9sZFNlYXJjaF0NCisgCSAgIGZvcihpdGVtIGluIHJldihuZXdpdGVt
cykpDQorICAgICAgICAgICAgICAgIGV2YWwoc3Vic3RpdHV0ZShkZXRhY2goaXRlbSksIGxpc3Qo
aXRlbT1pdGVtKSkpDQorIAkgICBtaXNzaXRlbXMgPC0gLm9sZFNlYXJjaFshIC5vbGRTZWFyY2gg
JWluJSBzY2hdDQorIAkgICBpZihsZW5ndGgobWlzc2l0ZW1zKSkNCisgCSAgICAgICB3YXJuaW5n
KCJpdGVtcyAiLCBwYXN0ZShtaXNzaXRlbXMsIGNvbGxhcHNlPSIsICIpLA0KKyAJCSAgICAgICAi
IGhhdmUgYmVlbiByZW1vdmVkIGZyb20gdGhlIHNlYXJjaCBwYXRoIikNCisgICAgICAgIH0sDQor
ICAgICAgICBwb3MgPSAiQ2hlY2tFeEVudiIpDQo+IGFzc2lnbigicHRpbWUiLCBwcm9jLnRpbWUo
KSwgcG9zID0gIkNoZWNrRXhFbnYiKQ0KPiBnckRldmljZXM6OnBvc3RzY3JpcHQoImdsbXBhdGgt
RXgucHMiKQ0KPiBhc3NpZ24oInBhci5wb3N0c2NyaXB0IiwgZ3JhcGhpY3M6OnBhcihuby5yZWFk
b25seSA9IFRSVUUpLCBwb3MgPSAiQ2hlY2tFeEVudiIpDQo+IG9wdGlvbnMoY29udHJhc3RzID0g
Yyh1bm9yZGVyZWQgPSAiY29udHIudHJlYXRtZW50Iiwgb3JkZXJlZCA9ICJjb250ci5wb2x5Iiks
IHBhZ2VyPSJjb25zb2xlIikNCj4gb3B0aW9ucyh3YXJuID0gMSkgICAgDQo+IGxpYnJhcnkoJ2ds
bXBhdGgnKQ0KTG9hZGluZyByZXF1aXJlZCBwYWNrYWdlOiBzdXJ2aXZhbA0KTG9hZGluZyByZXF1
aXJlZCBwYWNrYWdlOiBzcGxpbmVzDQo+IAo+IGFzc2lnbigiLm9sZFNlYXJjaCIsIHNlYXJjaCgp
LCBwb3MgPSAnQ2hlY2tFeEVudicpCj4gYXNzaWduKCIub2xkTlMiLCBsb2FkZWROYW1lc3BhY2Vz
KCksIHBvcyA9ICdDaGVja0V4RW52JykKPiBjbGVhbkV4KCk7IG5hbWVFeCgiYm9vdHN0cmFwLnBh
dGgiKQo+ICMjIyAqIGJvb3RzdHJhcC5wYXRoCj4gCj4gZmx1c2goc3RkZXJyKCkpOyBmbHVzaChz
dGRvdXQoKSkKPiAKPiAjIyMgTmFtZTogYm9vdHN0cmFwLnBhdGgKPiAjIyMgVGl0bGU6IEdlbmVy
YXRlcyBhIHNldCBvZiBib290c3RyYXAgY29lZmZpY2llbnRzIGZvciBlaXRoZXIgZ2xtcGF0aCBv
cgo+ICMjIyAgIGNveHBhdGgKPiAjIyMgQWxpYXNlczogYm9vdHN0cmFwLnBhdGgKPiAjIyMgS2V5
d29yZHM6IG1vZGVscyByZWdyZXNzaW9uCj4gCj4gIyMjICoqIEV4YW1wbGVzCj4gCj4gaWYoaXMu
UigpKSBkYXRhKGhlYXJ0LmRhdGEpCj4gIyMgTm90IHJ1bjogCj4gIyNEIGJvb3RzdHJhcC5hIDwt
IGJvb3RzdHJhcC5wYXRoKGhlYXJ0LmRhdGEkeCwgaGVhcnQuZGF0YSR5LAo+ICMjRCAgIEI9MTAw
LCBtZXRob2Q9ImJpYyIpCj4gIyMgRW5kKE5vdCBydW4pCj4gIyMgRG9uJ3Qgc2hvdzogCj4gYm9v
dHN0cmFwLmEgPC0gYm9vdHN0cmFwLnBhdGgoaGVhcnQuZGF0YSR4LCBoZWFydC5kYXRhJHksCisg
ICBCPTEwLCBtZXRob2Q9ImJpYyIpDQo+IGFsLWxpa2VsaWhvb2RzIGZvcg0KRXJyb3I6IHVuZXhw
ZWN0ZWQgJ2ZvcicgaW4gImFsLWxpa2VsaWhvb2RzIGZvciINCkV4ZWN1dGlvbiBoYWx0ZWQNCg==

------_=_NextPart_001_01C874E6.BBFFB95E
Content-Type: application/octet-stream;
	name="glmpath-Ex.R"
Content-Transfer-Encoding: base64
Content-Description: glmpath-Ex.R
Content-Disposition: attachment;
	filename="glmpath-Ex.R"

IyMjICogPEhFQURFUj4NCiMjIw0KYXR0YWNoKE5VTEwsIG5hbWUgPSAiQ2hlY2tFeEVudiIpDQph
c3NpZ24oIm5hbWVFeCIsIA0KICAgICAgIGxvY2FsKHsNCgkgICBzIDwtICJfX3ttdXN0IHJlbWFr
ZSBSLWV4LyouUn1fXyINCiAgICAgICAgICAgZnVuY3Rpb24obmV3KSB7DQogICAgICAgICAgICAg
ICBpZighbWlzc2luZyhuZXcpKSBzIDw8LSBuZXcgZWxzZSBzDQogICAgICAgICAgIH0NCiAgICAg
ICB9KSwNCiAgICAgICBwb3MgPSAiQ2hlY2tFeEVudiIpDQojIyBBZGQgc29tZSBob29rcyB0byBs
YWJlbCBwbG90IHBhZ2VzIGZvciBiYXNlIGFuZCBncmlkIGdyYXBoaWNzDQphc3NpZ24oImJhc2Vf
cGxvdF9ob29rIiwNCiAgICAgICBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgcHAgPC0gcGFyKGMo
Im1mZyIsIm1mY29sIiwib21hIiwibWFyIikpDQogICAgICAgICAgIGlmKGFsbChwcCRtZmdbMToy
XSA9PSBjKDEsIHBwJG1mY29sWzJdKSkpIHsNCiAgICAgICAgICAgICAgIG91dGVyIDwtIChvbWE0
IDwtIHBwJG9tYVs0XSkgPiAwOyBtYXI0IDwtIHBwJG1hcls0XQ0KICAgICAgICAgICAgICAgbXRl
eHQoc3ByaW50ZigiaGVscChcIiVzXCIpIiwgbmFtZUV4KCkpLCBzaWRlID0gNCwNCiAgICAgICAg
ICAgICAgICAgICAgIGxpbmUgPSBpZihvdXRlciltYXgoMSwgb21hNCAtIDEpIGVsc2UgbWluKDEs
IG1hcjQgLSAxKSwNCiAgICAgICAgICAgICAgb3V0ZXIgPSBvdXRlciwgYWRqID0gMSwgY2V4ID0g
LjgsIGNvbCA9ICJvcmNoaWQiLCBsYXM9MykNCiAgICAgICAgICAgfQ0KICAgICAgIH0sDQogICAg
ICAgcG9zID0gIkNoZWNrRXhFbnYiKQ0KYXNzaWduKCJncmlkX3Bsb3RfaG9vayIsDQogICAgICAg
ZnVuY3Rpb24oKSB7DQogICAgICAgICAgIHB1c2hWaWV3cG9ydCh2aWV3cG9ydCh3aWR0aD11bml0
KDEsICJucGMiKSAtIHVuaXQoMSwgImxpbmVzIiksDQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB4PTAsIGp1c3Q9ImxlZnQiKSkNCiAgICAgICAgICAgZ3JpZC50ZXh0KHNwcmludGYo
ImhlbHAoXCIlc1wiKSIsIG5hbWVFeCgpKSwNCiAgICAgICAgICAgICAgICAgICAgIHg9dW5pdCgx
LCAibnBjIikgKyB1bml0KDAuNSwgImxpbmVzIiksDQogICAgICAgICAgICAgICAgICAgICB5PXVu
aXQoMC44LCAibnBjIiksIHJvdD05MCwNCiAgICAgICAgICAgICAgICAgICAgIGdwPWdwYXIoY29s
PSJvcmNoaWQiKSkNCiAgICAgICB9LA0KICAgICAgIHBvcyA9ICJDaGVja0V4RW52IikNCnNldEhv
b2soInBsb3QubmV3IiwgICAgIGdldCgiYmFzZV9wbG90X2hvb2siLCBwb3MgPSAiQ2hlY2tFeEVu
diIpKQ0Kc2V0SG9vaygicGVyc3AiLCAgICAgICAgZ2V0KCJiYXNlX3Bsb3RfaG9vayIsIHBvcyA9
ICJDaGVja0V4RW52IikpDQpzZXRIb29rKCJncmlkLm5ld3BhZ2UiLCBnZXQoImdyaWRfcGxvdF9o
b29rIiwgcG9zID0gIkNoZWNrRXhFbnYiKSkNCmFzc2lnbigiY2xlYW5FeCIsDQogICAgICAgZnVu
Y3Rpb24oZW52ID0gLkdsb2JhbEVudikgew0KCSAgIHJtKGxpc3QgPSBscyhlbnZpciA9IGVudiwg
YWxsLm5hbWVzID0gVFJVRSksIGVudmlyID0gZW52KQ0KICAgICAgICAgICBSTkdraW5kKCJkZWZh
dWx0IiwgImRlZmF1bHQiKQ0KCSAgIHNldC5zZWVkKDEpDQogICAJICAgb3B0aW9ucyh3YXJuID0g
MSkNCgkgICAuQ2hlY2tFeEVudiA8LSBhcy5lbnZpcm9ubWVudCgiQ2hlY2tFeEVudiIpDQoJICAg
ZGVsYXllZEFzc2lnbigiVCIsIHN0b3AoIlQgdXNlZCBpbnN0ZWFkIG9mIFRSVUUiKSwNCgkJICBh
c3NpZ24uZW52ID0gLkNoZWNrRXhFbnYpDQoJICAgZGVsYXllZEFzc2lnbigiRiIsIHN0b3AoIkYg
dXNlZCBpbnN0ZWFkIG9mIEZBTFNFIiksDQoJCSAgYXNzaWduLmVudiA9IC5DaGVja0V4RW52KQ0K
CSAgIHNjaCA8LSBzZWFyY2goKQ0KCSAgIG5ld2l0ZW1zIDwtIHNjaFshIHNjaCAlaW4lIC5vbGRT
ZWFyY2hdDQoJICAgZm9yKGl0ZW0gaW4gcmV2KG5ld2l0ZW1zKSkNCiAgICAgICAgICAgICAgIGV2
YWwoc3Vic3RpdHV0ZShkZXRhY2goaXRlbSksIGxpc3QoaXRlbT1pdGVtKSkpDQoJICAgbWlzc2l0
ZW1zIDwtIC5vbGRTZWFyY2hbISAub2xkU2VhcmNoICVpbiUgc2NoXQ0KCSAgIGlmKGxlbmd0aCht
aXNzaXRlbXMpKQ0KCSAgICAgICB3YXJuaW5nKCJpdGVtcyAiLCBwYXN0ZShtaXNzaXRlbXMsIGNv
bGxhcHNlPSIsICIpLA0KCQkgICAgICAgIiBoYXZlIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBzZWFy
Y2ggcGF0aCIpDQogICAgICAgfSwNCiAgICAgICBwb3MgPSAiQ2hlY2tFeEVudiIpDQphc3NpZ24o
InB0aW1lIiwgcHJvYy50aW1lKCksIHBvcyA9ICJDaGVja0V4RW52IikNCmdyRGV2aWNlczo6cG9z
dHNjcmlwdCgiZ2xtcGF0aC1FeC5wcyIpDQphc3NpZ24oInBhci5wb3N0c2NyaXB0IiwgZ3JhcGhp
Y3M6OnBhcihuby5yZWFkb25seSA9IFRSVUUpLCBwb3MgPSAiQ2hlY2tFeEVudiIpDQpvcHRpb25z
KGNvbnRyYXN0cyA9IGModW5vcmRlcmVkID0gImNvbnRyLnRyZWF0bWVudCIsIG9yZGVyZWQgPSAi
Y29udHIucG9seSIpLCBwYWdlcj0iY29uc29sZSIpDQpvcHRpb25zKHdhcm4gPSAxKSAgICANCmxp
YnJhcnkoJ2dsbXBhdGgnKQ0KDQphc3NpZ24oIi5vbGRTZWFyY2giLCBzZWFyY2goKSwgcG9zID0g
J0NoZWNrRXhFbnYnKQ0KYXNzaWduKCIub2xkTlMiLCBsb2FkZWROYW1lc3BhY2VzKCksIHBvcyA9
ICdDaGVja0V4RW52JykNCmNsZWFuRXgoKTsgbmFtZUV4KCJib290c3RyYXAucGF0aCIpDQojIyMg
KiBib290c3RyYXAucGF0aA0KDQpmbHVzaChzdGRlcnIoKSk7IGZsdXNoKHN0ZG91dCgpKQ0KDQoj
IyMgTmFtZTogYm9vdHN0cmFwLnBhdGgNCiMjIyBUaXRsZTogR2VuZXJhdGVzIGEgc2V0IG9mIGJv
b3RzdHJhcCBjb2VmZmljaWVudHMgZm9yIGVpdGhlciBnbG1wYXRoIG9yDQojIyMgICBjb3hwYXRo
DQojIyMgQWxpYXNlczogYm9vdHN0cmFwLnBhdGgNCiMjIyBLZXl3b3JkczogbW9kZWxzIHJlZ3Jl
c3Npb24NCg0KIyMjICoqIEV4YW1wbGVzDQoNCmlmKGlzLlIoKSkgZGF0YShoZWFydC5kYXRhKQ0K
IyMgTm90IHJ1bjogDQojI0QgYm9vdHN0cmFwLmEgPC0gYm9vdHN0cmFwLnBhdGgoaGVhcnQuZGF0
YSR4LCBoZWFydC5kYXRhJHksDQojI0QgICBCPTEwMCwgbWV0aG9kPSJiaWMiKQ0KIyMgRW5kKE5v
dCBydW4pDQojIyBEb24ndCBzaG93OiANCmJvb3RzdHJhcC5hIDwtIGJvb3RzdHJhcC5wYXRoKGhl
YXJ0LmRhdGEkeCwgaGVhcnQuZGF0YSR5LA0KICBCPTEwLCBtZXRob2Q9ImJpYyIpDQojIyBFbmQg
RG9uJ3Qgc2hvdw0KYm9vdHN0cmFwLmENCg0KaWYoaXMuUigpKSBkYXRhKGx1bmcuZGF0YSkNCiMj
IE5vdCBydW46IA0KIyNEIGJvb3RzdHJhcC5iIDwtIGJvb3RzdHJhcC5wYXRoKGRhdGE9bHVuZy5k
YXRhLCBCPTEwMCwNCiMjRCBwYXRoPSJjb3hwYXRoIikNCiMjIEVuZChOb3QgcnVuKQ0KIyMgRG9u
J3Qgc2hvdzogDQpib290c3RyYXAuYiA8LSBib290c3RyYXAucGF0aChkYXRhPWx1bmcuZGF0YSwg
Qj0xMCwNCnBhdGg9ImNveHBhdGgiKQ0KIyMgRW5kIERvbid0IHNob3cNCmJvb3RzdHJhcC5iDQoN
Cg0KDQpjbGVhbkV4KCk7IG5hbWVFeCgiY294cGF0aCIpDQojIyMgKiBjb3hwYXRoDQoNCmZsdXNo
KHN0ZGVycigpKTsgZmx1c2goc3Rkb3V0KCkpDQoNCiMjIyBOYW1lOiBjb3hwYXRoDQojIyMgVGl0
bGU6IEZpdHMgdGhlIGVudGlyZSBMMSByZWd1bGFyaXphdGlvbiBwYXRoIGZvciBDb3ggcHJvcG9y
dGlvbmFsDQojIyMgICBoYXphcmRzIG1vZGVsDQojIyMgQWxpYXNlczogY294cGF0aA0KIyMjIEtl
eXdvcmRzOiBtb2RlbHMgcmVncmVzc2lvbg0KDQojIyMgKiogRXhhbXBsZXMNCg0KaWYoaXMuUigp
KSBkYXRhKGx1bmcuZGF0YSkNCmZpdC5hIDwtIGNveHBhdGgobHVuZy5kYXRhKQ0KZml0LmIgPC0g
Y294cGF0aChsdW5nLmRhdGEsIG1ldGhvZD0iZWZyb24iKQ0KZml0LmENCmZpdC5iDQoNCg0KDQpj
bGVhbkV4KCk7IG5hbWVFeCgiY3YuY294cGF0aCIpDQojIyMgKiBjdi5jb3hwYXRoDQoNCmZsdXNo
KHN0ZGVycigpKTsgZmx1c2goc3Rkb3V0KCkpDQoNCiMjIyBOYW1lOiBjdi5jb3hwYXRoDQojIyMg
VGl0bGU6IENvbXB1dGVzIGNyb3NzLXZhbGlkYXRlZCAobWludXMpIGxvZy1wYXJ0aWFsLWxpa2Vs
aWhvb2RzIGZvcg0KIyMjICAgY294cGF0aA0KIyMjIEFsaWFzZXM6IGN2LmNveHBhdGgNCiMjIyBL
ZXl3b3JkczogbW9kZWxzIHJlZ3Jlc3Npb24NCg0KIyMjICoqIEV4YW1wbGVzDQoNCmlmKGlzLlIo
KSkgZGF0YShsdW5nLmRhdGEpDQpjdiA8LSBjdi5jb3hwYXRoKGx1bmcuZGF0YSkNCmN2DQoNCg0K
DQpjbGVhbkV4KCk7IG5hbWVFeCgiY3YuZ2xtcGF0aCIpDQojIyMgKiBjdi5nbG1wYXRoDQoNCmZs
dXNoKHN0ZGVycigpKTsgZmx1c2goc3Rkb3V0KCkpDQoNCiMjIyBOYW1lOiBjdi5nbG1wYXRoDQoj
IyMgVGl0bGU6IENvbXB1dGVzIGNyb3NzLXZhbGlkYXRlZCAobWludXMpIGxvZy1saWtlbGlob29k
cyBvciBwcmVkaWN0aW9uDQojIyMgICBlcnJvcnMgZm9yIGdsbXBhdGgNCiMjIyBBbGlhc2VzOiBj
di5nbG1wYXRoDQojIyMgS2V5d29yZHM6IG1vZGVscyByZWdyZXNzaW9uDQoNCiMjIyAqKiBFeGFt
cGxlcw0KDQppZihpcy5SKCkpIGRhdGEoaGVhcnQuZGF0YSkNCmN2LmEgPC0gY3YuZ2xtcGF0aCho
ZWFydC5kYXRhJHgsIGhlYXJ0LmRhdGEkeSwgZmFtaWx5PWJpbm9taWFsKQ0KY3YuYiA8LSBjdi5n
bG1wYXRoKGhlYXJ0LmRhdGEkeCwgaGVhcnQuZGF0YSR5LCBmYW1pbHk9Ymlub21pYWwsDQogICAg
ICAgICAgICAgICAgICAgdHlwZT0icmVzcG9uc2UiKQ0KY3YuYQ0KY3YuYg0KDQoNCg0KY2xlYW5F
eCgpOyBuYW1lRXgoImdsbXBhdGgiKQ0KIyMjICogZ2xtcGF0aA0KDQpmbHVzaChzdGRlcnIoKSk7
IGZsdXNoKHN0ZG91dCgpKQ0KDQojIyMgTmFtZTogZ2xtcGF0aA0KIyMjIFRpdGxlOiBGaXRzIHRo
ZSBlbnRpcmUgTDEgcmVndWxhcml6YXRpb24gcGF0aCBmb3IgZ2VuZXJhbGl6ZWQgbGluZWFyDQoj
IyMgICBtb2RlbHMNCiMjIyBBbGlhc2VzOiBnbG1wYXRoDQojIyMgS2V5d29yZHM6IG1vZGVscyBy
ZWdyZXNzaW9uDQoNCiMjIyAqKiBFeGFtcGxlcw0KDQppZihpcy5SKCkpIGRhdGEoaGVhcnQuZGF0
YSkNCmZpdC5hIDwtIGdsbXBhdGgoaGVhcnQuZGF0YSR4LCBoZWFydC5kYXRhJHksIGZhbWlseT1i
aW5vbWlhbCkNCmZpdC5iIDwtIGdsbXBhdGgoaGVhcnQuZGF0YSR4LCBoZWFydC5kYXRhJHksIGZh
bWlseT1nYXVzc2lhbikNCmZpdC5hDQpmaXQuYg0KDQoNCg0KY2xlYW5FeCgpOyBuYW1lRXgoImhl
YXJ0LmRhdGEiKQ0KIyMjICogaGVhcnQuZGF0YQ0KDQpmbHVzaChzdGRlcnIoKSk7IGZsdXNoKHN0
ZG91dCgpKQ0KDQojIyMgTmFtZTogaGVhcnQuZGF0YQ0KIyMjIFRpdGxlOiBEYXRhc2V0IGZvciBn
bG1wYXRoDQojIyMgQWxpYXNlczogaGVhcnQuZGF0YQ0KIyMjIEtleXdvcmRzOiBkYXRhc2V0cw0K
DQojIyMgKiogRXhhbXBsZXMNCg0KaWYoaXMuUigpKSBkYXRhKGhlYXJ0LmRhdGEpDQpmaXQgPC0g
Z2xtcGF0aChoZWFydC5kYXRhJHgsIGhlYXJ0LmRhdGEkeSwgZmFtaWx5PWJpbm9taWFsKQ0KZml0
DQoNCg0KDQpjbGVhbkV4KCk7IG5hbWVFeCgibHVuZy5kYXRhIikNCiMjIyAqIGx1bmcuZGF0YQ0K
DQpmbHVzaChzdGRlcnIoKSk7IGZsdXNoKHN0ZG91dCgpKQ0KDQojIyMgTmFtZTogbHVuZy5kYXRh
DQojIyMgVGl0bGU6IERhdGFzZXQgZm9yIGNveHBhdGgNCiMjIyBBbGlhc2VzOiBsdW5nLmRhdGEN
CiMjIyBLZXl3b3JkczogZGF0YXNldHMNCg0KIyMjICoqIEV4YW1wbGVzDQoNCmlmKGlzLlIoKSkg
ZGF0YShsdW5nLmRhdGEpDQpmaXQgPC0gY294cGF0aChsdW5nLmRhdGEpDQpmaXQNCg0KDQoNCmNs
ZWFuRXgoKTsgbmFtZUV4KCJwbG90LmJvb3RwYXRoIikNCiMjIyAqIHBsb3QuYm9vdHBhdGgNCg0K
Zmx1c2goc3RkZXJyKCkpOyBmbHVzaChzdGRvdXQoKSkNCg0KIyMjIE5hbWU6IHBsb3QuYm9vdHBh
dGgNCiMjIyBUaXRsZTogR2VuZXJhdGVzIHRoZSBoaXN0b2dyYW1zIG9yIHRoZSBwYWlyd2lzZSBz
Y2F0dGVyIHBsb3RzIG9mIHRoZQ0KIyMjICAgYm9vdHN0cmFwIGNvZWZmaWNpZW50cyBjb21wdXRl
ZCBmcm9tIGJvb3RzdHJhcC5wYXRoDQojIyMgQWxpYXNlczogcGxvdC5ib290cGF0aA0KIyMjIEtl
eXdvcmRzOiBtb2RlbHMgcmVncmVzc2lvbg0KDQojIyMgKiogRXhhbXBsZXMNCg0KaWYoaXMuUigp
KSBkYXRhKGhlYXJ0LmRhdGEpDQojIyBEb24ndCBzaG93OiANCmJvb3RzdHJhcC5hIDwtIGJvb3Rz
dHJhcC5wYXRoKGhlYXJ0LmRhdGEkeCwgaGVhcnQuZGF0YSR5LCBCPTEwKQ0KIyMgRW5kIERvbid0
IHNob3cNCiMjIE5vdCBydW46IGJvb3RzdHJhcC5hIDwtIGJvb3RzdHJhcC5wYXRoKGhlYXJ0LmRh
dGEkeCwgaGVhcnQuZGF0YSR5LCBCPTEwMCkNCnBsb3QoYm9vdHN0cmFwLmEpDQpwbG90KGJvb3Rz
dHJhcC5hLCB0eXBlPSJwYWlycGxvdCIpDQoNCg0KDQpjbGVhbkV4KCk7IG5hbWVFeCgicGxvdC5j
b3hwYXRoIikNCiMjIyAqIHBsb3QuY294cGF0aA0KDQpmbHVzaChzdGRlcnIoKSk7IGZsdXNoKHN0
ZG91dCgpKQ0KDQojIyMgTmFtZTogcGxvdC5jb3hwYXRoDQojIyMgVGl0bGU6IFBsb3RzIHRoZSBy
ZWd1bGFyaXphdGlvbiBwYXRoIGNvbXB1dGVkIGZyb20gY294cGF0aA0KIyMjIEFsaWFzZXM6IHBs
b3QuY294cGF0aA0KIyMjIEtleXdvcmRzOiBtb2RlbHMgcmVncmVzc2lvbg0KDQojIyMgKiogRXhh
bXBsZXMNCg0KaWYoaXMuUigpKSBkYXRhKGx1bmcuZGF0YSkNCmZpdCA8LSBjb3hwYXRoKGx1bmcu
ZGF0YSkNCnBhcihtZnJvdz1jKDMsMikpDQpwbG90KGZpdCkNCnBsb3QoZml0LCB4dmFyPSJsYW1i
ZGEiKQ0KcGxvdChmaXQsIHh2YXI9InN0ZXAiKQ0KcGxvdChmaXQsIHh2YXI9InN0ZXAiLCB4bGlt
aXQ9OCkNCnBsb3QoZml0LCB0eXBlPSJhaWMiKQ0KcGxvdChmaXQsIHR5cGU9ImJpYyIpDQpwYXIo
bWZyb3c9YygxLDEpKQ0KDQoNCg0KZ3JhcGhpY3M6OnBhcihnZXQoInBhci5wb3N0c2NyaXB0Iiwg
cG9zID0gJ0NoZWNrRXhFbnYnKSkNCmNsZWFuRXgoKTsgbmFtZUV4KCJwbG90LmdsbXBhdGgiKQ0K
IyMjICogcGxvdC5nbG1wYXRoDQoNCmZsdXNoKHN0ZGVycigpKTsgZmx1c2goc3Rkb3V0KCkpDQoN
CiMjIyBOYW1lOiBwbG90LmdsbXBhdGgNCiMjIyBUaXRsZTogUGxvdHMgdGhlIHJlZ3VsYXJpemF0
aW9uIHBhdGggY29tcHV0ZWQgZnJvbSBnbG1wYXRoDQojIyMgQWxpYXNlczogcGxvdC5nbG1wYXRo
DQojIyMgS2V5d29yZHM6IG1vZGVscyByZWdyZXNzaW9uDQoNCiMjIyAqKiBFeGFtcGxlcw0KDQpp
Zihpcy5SKCkpIGRhdGEoaGVhcnQuZGF0YSkNCmZpdCA8LSBnbG1wYXRoKGhlYXJ0LmRhdGEkeCwg
aGVhcnQuZGF0YSR5LCBmYW1pbHk9Ymlub21pYWwpDQpwYXIobWZyb3c9YygzLDIpKQ0KcGxvdChm
aXQpDQpwbG90KGZpdCwgeHZhcj0ibGFtYmRhIikNCnBsb3QoZml0LCB4dmFyPSJzdGVwIikNCnBs
b3QoZml0LCB4dmFyPSJzdGVwIix4bGltaXQ9OCkNCnBsb3QoZml0LCB0eXBlPSJhaWMiKQ0KcGxv
dChmaXQsIHR5cGU9ImJpYyIpDQpwYXIobWZyb3c9YygxLDEpKQ0KDQoNCg0KZ3JhcGhpY3M6OnBh
cihnZXQoInBhci5wb3N0c2NyaXB0IiwgcG9zID0gJ0NoZWNrRXhFbnYnKSkNCmNsZWFuRXgoKTsg
bmFtZUV4KCJwcmVkaWN0LmNveHBhdGgiKQ0KIyMjICogcHJlZGljdC5jb3hwYXRoDQoNCmZsdXNo
KHN0ZGVycigpKTsgZmx1c2goc3Rkb3V0KCkpDQoNCiMjIyBOYW1lOiBwcmVkaWN0LmNveHBhdGgN
CiMjIyBUaXRsZTogTWFrZXMgcHJlZGljdGlvbnMgYXQgcGFydGljdWxhciBwb2ludHMgYWxvbmcg
dGhlIGZpdHRlZCBjb3hwYXRoDQojIyMgQWxpYXNlczogcHJlZGljdC5jb3hwYXRoDQojIyMgS2V5
d29yZHM6IG1vZGVscyByZWdyZXNzaW9uDQoNCiMjIyAqKiBFeGFtcGxlcw0KDQppZihpcy5SKCkp
IGRhdGEobHVuZy5kYXRhKQ0KZml0IDwtIGNveHBhdGgobHVuZy5kYXRhKQ0KcHJlZC5hIDwtIHBy
ZWRpY3QoZml0LCBsdW5nLmRhdGEkeCwgcyA9IHNlcSgwLCAxLCBsZW5ndGg9MTApLA0KICAgICAg
ICAgICAgICAgICAgbW9kZSA9ICJub3JtLmZyYWN0aW9uIikNCnByZWQuYQ0KaWYoaXMuUigpKSB7
DQogICMgdHlwZT0iY294cGgiIGlzIG5vdCBzdXBwb3J0ZWQgaW4gUy1QTFVTDQogIHByZWQuYiA8
LSBwcmVkaWN0KGZpdCwgbHVuZy5kYXRhLCBzID0gMC41LCB0eXBlID0gImNveHBoIiwNCiAgICAg
ICAgICAgICAgICAgIG1vZGUgPSAibGFtYmRhLmZyYWN0aW9uIikNCiAgcHJlZC5zIDwtIHN1cnZm
aXQocHJlZC5iKQ0KICBwcmVkLmINCiAgcHJlZC5zDQogIHBsb3QocHJlZC5zKQ0KfQ0KDQoNCg0K
Y2xlYW5FeCgpOyBuYW1lRXgoInByZWRpY3QuZ2xtcGF0aCIpDQojIyMgKiBwcmVkaWN0LmdsbXBh
dGgNCg0KZmx1c2goc3RkZXJyKCkpOyBmbHVzaChzdGRvdXQoKSkNCg0KIyMjIE5hbWU6IHByZWRp
Y3QuZ2xtcGF0aA0KIyMjIFRpdGxlOiBNYWtlcyBwcmVkaWN0aW9ucyBhdCBwYXJ0aWN1bGFyIHBv
aW50cyBhbG9uZyB0aGUgZml0dGVkIGdsbXBhdGgNCiMjIyBBbGlhc2VzOiBwcmVkaWN0LmdsbXBh
dGgNCiMjIyBLZXl3b3JkczogbW9kZWxzIHJlZ3Jlc3Npb24NCg0KIyMjICoqIEV4YW1wbGVzDQoN
CmlmKGlzLlIoKSkgZGF0YShoZWFydC5kYXRhKQ0KZml0IDwtIGdsbXBhdGgoaGVhcnQuZGF0YSR4
LCBoZWFydC5kYXRhJHksIGZhbWlseT1iaW5vbWlhbCkNCnByZWQgPC0gcHJlZGljdChmaXQsIGhl
YXJ0LmRhdGEkeCwgcyA9IHNlcSgwLCAxLCBsZW5ndGg9MTApLA0KICAgICAgICAgICAgICAgIG1v
ZGU9Im5vcm0uZnJhY3Rpb24iKQ0KZml0DQpwcmVkDQoNCg0KDQpjbGVhbkV4KCk7IG5hbWVFeCgi
c3VtbWFyeS5jb3hwYXRoIikNCiMjIyAqIHN1bW1hcnkuY294cGF0aA0KDQpmbHVzaChzdGRlcnIo
KSk7IGZsdXNoKHN0ZG91dCgpKQ0KDQojIyMgTmFtZTogc3VtbWFyeS5jb3hwYXRoDQojIyMgVGl0
bGU6IFByb2R1Y2VzIGFuIGFub3ZhLXR5cGUgc3VtbWFyeSBmb3IgYSBjb3hwYXRoIG9iamVjdA0K
IyMjIEFsaWFzZXM6IHN1bW1hcnkuY294cGF0aA0KIyMjIEtleXdvcmRzOiBtb2RlbHMgcmVncmVz
c2lvbg0KDQojIyMgKiogRXhhbXBsZXMNCg0KaWYgKGlzLlIoKSkgZGF0YShsdW5nLmRhdGEpDQpm
aXQgPC0gY294cGF0aChsdW5nLmRhdGEpDQpzdW1tYXJ5KGZpdCkNCg0KDQoNCmNsZWFuRXgoKTsg
bmFtZUV4KCJzdW1tYXJ5LmdsbXBhdGgiKQ0KIyMjICogc3VtbWFyeS5nbG1wYXRoDQoNCmZsdXNo
KHN0ZGVycigpKTsgZmx1c2goc3Rkb3V0KCkpDQoNCiMjIyBOYW1lOiBzdW1tYXJ5LmdsbXBhdGgN
CiMjIyBUaXRsZTogUHJvZHVjZXMgYW4gYW5vdmEtdHlwZSBzdW1tYXJ5IGZvciBhIGdsbXBhdGgg
b2JqZWN0DQojIyMgQWxpYXNlczogc3VtbWFyeS5nbG1wYXRoDQojIyMgS2V5d29yZHM6IG1vZGVs
cyByZWdyZXNzaW9uDQoNCiMjIyAqKiBFeGFtcGxlcw0KDQppZiAoaXMuUigpKSBkYXRhKGhlYXJ0
LmRhdGEpDQpmaXQgPC0gZ2xtcGF0aChoZWFydC5kYXRhJHgsIGhlYXJ0LmRhdGEkeSkNCnN1bW1h
cnkoZml0KQ0KDQoNCg0KIyMjICogPEZPT1RFUj4NCiMjIw0KY2F0KCJUaW1lIGVsYXBzZWQ6ICIs
IHByb2MudGltZSgpIC0gZ2V0KCJwdGltZSIsIHBvcyA9ICdDaGVja0V4RW52JyksIlxuIikNCmdy
RGV2aWNlczo6ZGV2Lm9mZigpDQojIyMNCiMjIyBMb2NhbCB2YXJpYWJsZXM6ICoqKg0KIyMjIG1v
ZGU6IG91dGxpbmUtbWlub3IgKioqDQojIyMgb3V0bGluZS1yZWdleHA6ICJcXCg+IFxcKT8jIyMg
WypdKyIgKioqDQojIyMgRW5kOiAqKioNCnF1aXQoJ25vJykNCg==

------_=_NextPart_001_01C874E6.BBFFB95E--


From mrubi at fibertel.com.ar  Fri Feb 22 18:44:53 2008
From: mrubi at fibertel.com.ar (Martin Rubi)
Date: Fri, 22 Feb 2008 15:44:53 -0200
Subject: [Rd] Calling R_PreserveObject from embedded R
Message-ID: <000d01c8757a$a15a9ff0$0201a8c0@codedev>

Hello. This is my first post to the list, so first I'd like to thank 
everybody for making and mantaining such a great product as R.
I'm writting a native binding to R from Dolphin Smalltalk. I've followed up 
the examples of the documentation showing how to run R embedded, and I got 
it partially working. However, I have a problem with the reference handling 
of the R objects.
I've followed this strategy: every time I call a function in R and it 
answers me a SEXP, I called R_PreserveObject(sexp), and wrap it with a 
Smalltalk object. Whenever the Smalltalk object dies, I release the R object 
by calling R_ReleaseObject(sexp).
This seems to handle well the life cycle, but makes the running process to 
use a growing and a never ending amount of memory. Actually, after 
experimenting a while, I isolated the problem to iterate over a loop which 
all it does is create an expresion for a number, call PreserveObject and 
call ReleaseObject, and that alone makes the memory to grow indefinitely.
I couldn't find any comment about this behaviour. Is there something I'm 
missing ?
I'm running the embedded R-2.6.2 binaries for Windows in a WindowsXP sp2 
environment.

I've also implemented another strategy, which keeps a global list in R, and 
instead of calling R_PreserveObject, it inserts the SEXP in the list. This 
made the memory usage problem to go away, but the performance is noticeably 
worst compared with the other strategy, and is not as elegant as the first 
one neither, so I was hoping to be able to use the first strategy.

I'll appreciate any comment about what might be going on.
Thanks in advance.

Best regards.
martin


From Greg.Snow at imail.org  Fri Feb 22 20:09:03 2008
From: Greg.Snow at imail.org (Greg Snow)
Date: Fri, 22 Feb 2008 12:09:03 -0700
Subject: [Rd] Clipping using par(plt=..., xpd=FALSE) inconsistencies
Message-ID: <07E228A5BE53C24CAD490193A7381BBBEE1114@LP-EXCHVS07.CO.IHC.COM>

Here is a demonstration of behaviour that is probably an optimization by
someone far smarter than me that did not anticipate anyone wanting to do
this, but for my purposes it looks more like a bug than a feature.

I have tested this with R2.6.2 on Windows, no additional packages loaded
(beyond the default), I have tested using the default graphics object,
pdf, jpeg, and cairoDevice (ok I loaded a package for that) and all show
the same behavior.

Run the following set of commands:

x <- rnorm(1000)
hist(x, xlim=c(-4,4))

tmp <- par('plt')

box(col='#00000000')
tmp2 <- tmp
tmp2[2] <- tmp2[1] + 0.3
par(xpd = FALSE, plt=tmp2)
hist(x, col='red', add=TRUE)

box(col='#00000000')
tmp3 <- tmp
tmp3[1] <- tmp3[2] - 0.3
par(xpd=FALSE, plt=tmp3)
hist(x, col='blue', add=TRUE)
par(plt=tmp)


This gives me the plot that I want and expect (a histogram with the left
section red, the middle white/background, and the right blue).

Now comment out or delete the 2 box commands and rerun everything.  The
clipping does not happen this time and the final result is a full blue
histogram.

Is this a bug? Feature? Something else?
Does anyone have a better work around than drawing transparent boxes?

Thanks,



-- 
Gregory (Greg) L. Snow Ph.D.
Statistical Data Center
Intermountain Healthcare
greg.snow at imail.org
(801) 408-8111
 


From ripley at stats.ox.ac.uk  Fri Feb 22 22:06:15 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 22 Feb 2008 21:06:15 +0000 (GMT)
Subject: [Rd] Clipping using par(plt=..., xpd=FALSE) inconsistencies
In-Reply-To: <07E228A5BE53C24CAD490193A7381BBBEE1114@LP-EXCHVS07.CO.IHC.COM>
References: <07E228A5BE53C24CAD490193A7381BBBEE1114@LP-EXCHVS07.CO.IHC.COM>
Message-ID: <Pine.LNX.4.64.0802222050040.11702@auk.stats>

I think you misunderstand what par("plt") is supposed to do.  The 
documentation says

      'plt' A vector of the form 'c(x1, x2, y1, y2)' giving the
           coordinates of the plot region as fractions of the current
           figure region.

You haven't subsequently made a new plot, so why do you expect the 
clipping region to be changed to that you indicated for the next plot?

I'd say the bug was that box() changed it, and that happens because it 
internally sets xpd and so resetting xpd sets the clipping region next 
time it is used.  Because of

void GClip(pGEDevDesc dd)
{
     if (gpptr(dd)->xpd != gpptr(dd)->oldxpd) {
 	double x1, y1, x2, y2;
 	setClipRect(&x1, &y1, &x2, &y2, DEVICE, dd);
 	GESetClip(x1, y1, x2, y2, dd);
 	gpptr(dd)->oldxpd = gpptr(dd)->xpd;
     }
}

Maybe we should have user-level code to set the clipping region?


On Fri, 22 Feb 2008, Greg Snow wrote:

> Here is a demonstration of behaviour that is probably an optimization by
> someone far smarter than me that did not anticipate anyone wanting to do
> this, but for my purposes it looks more like a bug than a feature.
>
> I have tested this with R2.6.2 on Windows, no additional packages loaded
> (beyond the default), I have tested using the default graphics object,
> pdf, jpeg, and cairoDevice (ok I loaded a package for that) and all show
> the same behavior.
>
> Run the following set of commands:
>
> x <- rnorm(1000)
> hist(x, xlim=c(-4,4))
>
> tmp <- par('plt')
>
> box(col='#00000000')
> tmp2 <- tmp
> tmp2[2] <- tmp2[1] + 0.3
> par(xpd = FALSE, plt=tmp2)
> hist(x, col='red', add=TRUE)
>
> box(col='#00000000')
> tmp3 <- tmp
> tmp3[1] <- tmp3[2] - 0.3
> par(xpd=FALSE, plt=tmp3)
> hist(x, col='blue', add=TRUE)
> par(plt=tmp)
>
>
> This gives me the plot that I want and expect (a histogram with the left
> section red, the middle white/background, and the right blue).
>
> Now comment out or delete the 2 box commands and rerun everything.  The
> clipping does not happen this time and the final result is a full blue
> histogram.
>
> Is this a bug? Feature? Something else?
> Does anyone have a better work around than drawing transparent boxes?
>
> Thanks,
>
>
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jayuan2008 at yahoo.com  Sat Feb 23 10:18:24 2008
From: jayuan2008 at yahoo.com (Yuan Jian)
Date: Sat, 23 Feb 2008 01:18:24 -0800 (PST)
Subject: [Rd] .net and R
Message-ID: <279846.64145.qm@web46011.mail.sp1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080223/dfc78b4e/attachment.pl 

From ripley at stats.ox.ac.uk  Sat Feb 23 10:40:23 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 23 Feb 2008 09:40:23 +0000 (GMT)
Subject: [Rd] .net and R
In-Reply-To: <279846.64145.qm@web46011.mail.sp1.yahoo.com>
References: <279846.64145.qm@web46011.mail.sp1.yahoo.com>
Message-ID: <Pine.LNX.4.64.0802230924290.31577@auk.stats>

On Sat, 23 Feb 2008, Yuan Jian wrote:

> Hi,
>  is it possible to call R functions from visual studio .net such as c#?

Yes.

[If you want to know 'how', please study 'Writing R Extensions'.]

> ---------------------------------
>
> 	[[alternative HTML version deleted]]

Please study the posting guide which asked you not to send HTML.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From lgautier at gmail.com  Sat Feb 23 15:07:37 2008
From: lgautier at gmail.com (Laurent Gautier)
Date: Sat, 23 Feb 2008 22:07:37 +0800
Subject: [Rd] Calling R_PreserveObject from embedded R
Message-ID: <27d1e6020802230607t72e317abv3218f4530185c3c8@mail.gmail.com>

>  Hello. This is my first post to the list, so first I'd like to thank
>  everybody for making and mantaining such a great product as R.
>  I'm writting a native binding to R from Dolphin Smalltalk. I've followed up
>  the examples of the documentation showing how to run R embedded, and I got
>  it partially working. However, I have a problem with the reference handling
>  of the R objects.
>  I've followed this strategy: every time I call a function in R and it
>  answers me a SEXP, I called R_PreserveObject(sexp), and wrap it with a
>  Smalltalk object. Whenever the Smalltalk object dies, I release the R object
>  by calling R_ReleaseObject(sexp).
>  This seems to handle well the life cycle, but makes the running process to
>  use a growing and a never ending amount of memory. Actually, after
>  experimenting a while, I isolated the problem to iterate over a loop which
>  all it does is create an expresion for a number, call PreserveObject and
>  call ReleaseObject, and that alone makes the memory to grow indefinitely.
>  I couldn't find any comment about this behaviour. Is there something I'm
>  missing ?

Martin,

I am working with code taking a similar approach (from Python), and
I do not seem to observe what you are experiencing.

When I initialize the embeded R with the "--verbose" flag, and initialize
disposable objects from a loop in Python, R outputs lines such as the
ones below:
11.8 Mbytes of vectors used (40%)
Garbage collection 536 = 307+159+70 (level 0) ...
7.1 Mbytes of cons cells used (38%)
19.4 Mbytes of vectors used (65%)
Garbage collection 537 = 307+160+70 (level 1) ...
7.1 Mbytes of cons cells used (38%)
11.8 Mbytes of vectors used (40%)

>  I'm running the embedded R-2.6.2 binaries for Windows in a WindowsXP sp2
>  environment.

I am currently working on Linux.

>  I've also implemented another strategy, which keeps a global list in R, and
>  instead of calling R_PreserveObject, it inserts the SEXP in the list. This
>  made the memory usage problem to go away, but the performance is noticeably
>  worst compared with the other strategy, and is not as elegant as the first
>  one neither, so I was hoping to be able to use the first strategy.

The first strategy appears is something similar, if I understood it right
(there is a global SEXP object called R_PreciousList in memory.c).

>  I'll appreciate any comment about what might be going on.

May be try  the "--verbose" flag ?

>  Thanks in advance.
>
>  Best regards.
>  martin
>


From lgautier at gmail.com  Sat Feb 23 15:39:03 2008
From: lgautier at gmail.com (Laurent Gautier)
Date: Sat, 23 Feb 2008 22:39:03 +0800
Subject: [Rd] level of mutability for the type of a SEXP
In-Reply-To: <alpine.LFD.1.00.0802191244250.13928@gannet.stats.ox.ac.uk>
References: <27d1e6020802190440p4f51b6bai53010d1dec33c3a@mail.gmail.com>
	<alpine.LFD.1.00.0802191244250.13928@gannet.stats.ox.ac.uk>
Message-ID: <27d1e6020802230639t48ca6b79j9457c3b4929c0847@mail.gmail.com>

2008/2/22, Prof Brian Ripley <ripley at stats.ox.ac.uk>:
> On Tue, 19 Feb 2008, Laurent Gautier wrote:
>
>  > Dear list,
>  >
>  > I am writing C code to interface with R, and I would like to know the
>  > level of mutability for the type of a SEXP.
>  >
>  > I see that there is a macro/function TYPEOF(), and that it can be used
>  > as an l-value, as well as a macro/function SET_TYPEOF().
>
>
> The macros are not available to user code, so TYPEOF is not available to
>  use as an l-value.
>

Is the general rule that no macro is available to user code ?

>  > My question is "should the type be considered immutable, or it can it
>  > change after the SEXP has been created and used for a while ?".
>  >
>  > I understand that a call to TYPEOF will not perform any conversion,
>  > and my question is only about being sure that once the type of a given
>  > SEXP is set it cannot change.
>
>
> It is SEXPRECs that have types, and their type can be changed and in a few
>  cases is in R's internal code.  You should only change type between
>  SEXPREC types with the same structure, e.g. from VECSXP to EXPRSXP or
>  DOTSXP to LISTSXP.  I am unaware of any examples where this happens that
>  involve a SEXPREC pointed to by a SEXP not in the internal code concerned.

Thanks for your answer.

As you point it out, I overlooked the fact that a SEXP is merely a pointer,
and therefore will not change type.

I systematically looked for usages of TYPEOF/SET_TYPEOF in the base code,
and I could only find use of the macros beyond shortly after the
instantiation of a new object.


>  Since a SEXP is a pointer, the type of the SEXPREC it points to can change
>  (as which SEXPREC it is can) and frequently does -- that is one way
>  arguments are coerced.
>
>  The R Internals manual has the details of the SEXPRECs and their
>  structure.

I will read more about them.

>  I don't see the value of knowing though.  Anyone who needs to ask about R
>  internals should regard the arguments passed to .Call/.External calls as
>  read-only and also assume that there is no simultaneous evaluation going
>  on that might change them.

My purpose is not to write C code called from R, but to make an
interface between a scripting language and an embedded R.
The reason for my question is that I would like to type a little R
objects accessed from that foreign language, and would not like to see
their type change along the evaluation of R code, and without the
pointer from the scripting language knowing.

The pass-by-value paradigm should not make such things possible, but I
was considering that C-level memory optimization tricks could be
recycling part of object structures (I may or may not be worth the
effort, my little knowledge of SEXPRECs did not give any hint).


Thanks,


Laurent


>
>  --
>  Brian D. Ripley,                  ripley at stats.ox.ac.uk
>  Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>  University of Oxford,             Tel:  +44 1865 272861 (self)
>  1 South Parks Road,                     +44 1865 272866 (PA)
>  Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>


From roger at ysidro.econ.uiuc.edu  Sat Feb 23 17:34:41 2008
From: roger at ysidro.econ.uiuc.edu (roger koenker)
Date: Sat, 23 Feb 2008 10:34:41 -0600
Subject: [Rd] print.logLik
Message-ID: <C6F63B08-2597-458C-B2D0-795D1A35971A@ysidro.econ.uiuc.edu>

I have a vector of logLik values that I'd like to return and it would  
be nice
if the the print method didn't run them together.  Could I make a plea  
for
using sep = " ", rather than sep = "" in print.logLik?

url:    www.econ.uiuc.edu/~roger                Roger Koenker
email   rkoenker at uiuc.edu                       Department of Economics
vox:    217-333-4558                            University of Illinois
fax:    217-244-6678                            Champaign, IL 61820


From jbrzusto at fastmail.fm  Sat Feb 23 18:10:04 2008
From: jbrzusto at fastmail.fm (jbrzusto at fastmail.fm)
Date: Sat, 23 Feb 2008 18:10:04 +0100 (CET)
Subject: [Rd] patch: two minor debugging-related pointer protection stack
	issues (PR#10832)
Message-ID: <20080223171004.A0C562834156@mail.pubhealth.ku.dk>

Full_Name: John Brzustowski
Version: R-devel trunk and R-2.4.0
OS: linux
Submission from: (NULL) (76.10.152.79)


Here are two minor potential issues in pointer protection stack (PPS) code which
could arise in debugging R with valgrind.  Only the second could possibly cause
a problem in normal use of R, and only under laughably implausible
circumstances.

(1) valgrind is given a wrong address when it is told to mark the reserved "red
zone" portion of the PPS as "no access".   This might generate spurious access
errors while debugging under valgrind.

(2) unprotect_ptr always does one more copy than necessary when collapsing the
slot of the pointer it is unprotecting.  This is but a trivial performance
penalty unless the PPS is full, in which case it causes a read of the first word
in the PPS red zone. If issue (1) were corrected, that would trigger a spurious
valgrind error.

If all of the following were to occur:

  a) the PPS overflowed 
  b) the cleanup code filled the PPS red zone
  c) unprotect_ptr was called from the cleanup code while the PPS red zone was
full
and 
  d) the memory malloc'd for the PPS occupied the very end of a readable
segment
     with fewer than sizeof(SEXP) trailing guard bytes

then a segfault would result.  (You are laughing at this point, right?)

In any case, here is a patch against R-devel trunk:

Index: trunk/src/main/memory.c
===================================================================
--- trunk/src/main/memory.c	(revision 44589)
+++ trunk/src/main/memory.c	(working copy)
@@ -1557,7 +1557,7 @@
 	R_Suicide("couldn't allocate memory for pointer stack");
     R_PPStackTop = 0;
 #if VALGRIND_LEVEL > 1
-    VALGRIND_MAKE_NOACCESS(R_PPStackTop+R_PPStackSize,PP_REDZONE_SIZE);
+    VALGRIND_MAKE_NOACCESS(R_PPStack+R_PPStackSize,PP_REDZONE_SIZE);
 #endif
     vsfac = sizeof(VECREC);
     R_VSize = (((R_VSize + 1)/ vsfac));
@@ -2329,11 +2329,11 @@
     } while ( R_PPStack[--i] != s );
 
     /* OK, got it, and  i  is indexing its location */
-    /* Now drop stack above it */
+    /* Now drop stack above it, if any */
 
-    do {
-    	R_PPStack[i] = R_PPStack[i + 1];
-    } while ( i++ < R_PPStackTop );
+    while (++i < R_PPStackTop) {
+    	R_PPStack[i - 1] = R_PPStack[i];
+    }
 
     R_PPStackTop--;
 }


From maechler at stat.math.ethz.ch  Sat Feb 23 18:21:33 2008
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Sat, 23 Feb 2008 18:21:33 +0100
Subject: [Rd] print.logLik
In-Reply-To: <C6F63B08-2597-458C-B2D0-795D1A35971A@ysidro.econ.uiuc.edu>
References: <C6F63B08-2597-458C-B2D0-795D1A35971A@ysidro.econ.uiuc.edu>
Message-ID: <18368.22045.94117.692769@cmath-5.math.ethz.ch>

>>>>> "rk" == roger koenker <roger at ysidro.econ.uiuc.edu>
>>>>>     on Sat, 23 Feb 2008 10:34:41 -0600 writes:

    rk> I have a vector of logLik values that I'd like to return and it would  
    rk> be nice
    rk> if the the print method didn't run them together.  Could I make a plea  
    rk> for
    rk> using sep = " ", rather than sep = "" in print.logLik?

well, "yes" to the plea to make the method ameanable to better
printing of *several* values,
but "no" to just changing sep there:
We'd want to implement a change which is compatible
for the usual cases of having only one value 
and your propsal would change all those outputs as well.

Wouldn't you even prefer to see something like

	 'log.Lik' 12.3, 7.89, 34.2  (df = 3)

i.e., with "," between the values?

Regards,
Martin


From roger at ysidro.econ.uiuc.edu  Sat Feb 23 18:40:26 2008
From: roger at ysidro.econ.uiuc.edu (roger koenker)
Date: Sat, 23 Feb 2008 11:40:26 -0600
Subject: [Rd] print.logLik
In-Reply-To: <18368.22045.94117.692769@cmath-5.math.ethz.ch>
References: <C6F63B08-2597-458C-B2D0-795D1A35971A@ysidro.econ.uiuc.edu>
	<18368.22045.94117.692769@cmath-5.math.ethz.ch>
Message-ID: <13B07722-A9FB-422B-8194-2783CBE1EDFC@ysidro.econ.uiuc.edu>

Commas would be fine especially if there were  spaces too,
as in your example.  I was just trying to suggest something
mimimalist ;-)

Cheers,
Roger

On Feb 23, 2008, at 11:21 AM, Martin Maechler wrote:

>>>>>> "rk" == roger koenker <roger at ysidro.econ.uiuc.edu>
>>>>>>    on Sat, 23 Feb 2008 10:34:41 -0600 writes:
>
>    rk> I have a vector of logLik values that I'd like to return and  
> it would
>    rk> be nice
>    rk> if the the print method didn't run them together.  Could I  
> make a plea
>    rk> for
>    rk> using sep = " ", rather than sep = "" in print.logLik?
>
> well, "yes" to the plea to make the method ameanable to better
> printing of *several* values,
> but "no" to just changing sep there:
> We'd want to implement a change which is compatible
> for the usual cases of having only one value
> and your propsal would change all those outputs as well.
>
> Wouldn't you even prefer to see something like
>
> 	 'log.Lik' 12.3, 7.89, 34.2  (df = 3)
>
> i.e., with "," between the values?
>
> Regards,
> Martin


From h.wickham at gmail.com  Sat Feb 23 23:40:17 2008
From: h.wickham at gmail.com (hadley wickham)
Date: Sat, 23 Feb 2008 16:40:17 -0600
Subject: [Rd] Aliasing a function
Message-ID: <f8e6ff050802231440xcbe8597yf99b2fb83e9c2ca3@mail.gmail.com>

A simple way to alias a function is to do :

g <- function(a = 1, b = 2, c = 3) a + b * c
f <- function(...) g(...)

but formals (etc) is no longer very helpful.  Is there an easy way to
programmatically create:

f <- function(a=1, b=2, c=3) g(a=a, b=b, c=c)

This comes up in ggplot2 where I alias many functions to hide the fact
that I'm using proto in the background, and I'd like the aliased
functions to be a little more user friendly in terms of revealing what
are valid arguments (and also to match up with the rdoc files which I
am building).

Any ideas?

Thanks,

Hadley

-- 
http://had.co.nz/


From jfox at mcmaster.ca  Sun Feb 24 00:32:01 2008
From: jfox at mcmaster.ca (John Fox)
Date: Sat, 23 Feb 2008 18:32:01 -0500
Subject: [Rd] Aliasing a function
In-Reply-To: <f8e6ff050802231440xcbe8597yf99b2fb83e9c2ca3@mail.gmail.com>
References: <f8e6ff050802231440xcbe8597yf99b2fb83e9c2ca3@mail.gmail.com>
Message-ID: <000001c87674$4cd1a230$e674e690$@ca>

Dear Hadley,

Why not just f <- g ?

Regards,
 John

--------------------------------
John Fox, Professor
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
905-525-9140x23604
http://socserv.mcmaster.ca/jfox


> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-
> project.org] On Behalf Of hadley wickham
> Sent: February-23-08 5:40 PM
> To: R-devel
> Subject: [Rd] Aliasing a function
> 
> A simple way to alias a function is to do :
> 
> g <- function(a = 1, b = 2, c = 3) a + b * c
> f <- function(...) g(...)
> 
> but formals (etc) is no longer very helpful.  Is there an easy way to
> programmatically create:
> 
> f <- function(a=1, b=2, c=3) g(a=a, b=b, c=c)
> 
> This comes up in ggplot2 where I alias many functions to hide the fact
> that I'm using proto in the background, and I'd like the aliased
> functions to be a little more user friendly in terms of revealing what
> are valid arguments (and also to match up with the rdoc files which I
> am building).
> 
> Any ideas?
> 
> Thanks,
> 
> Hadley
> 
> --
> http://had.co.nz/
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ggrothendieck at gmail.com  Sun Feb 24 00:36:02 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 23 Feb 2008 18:36:02 -0500
Subject: [Rd] Aliasing a function
In-Reply-To: <f8e6ff050802231440xcbe8597yf99b2fb83e9c2ca3@mail.gmail.com>
References: <f8e6ff050802231440xcbe8597yf99b2fb83e9c2ca3@mail.gmail.com>
Message-ID: <971536df0802231536p1819e333o6309c186ef5dffa@mail.gmail.com>

formals can be used like this:

f <- g
formals(f) <- pairlist(a=1,b=2,c=3)


On Sat, Feb 23, 2008 at 5:40 PM, hadley wickham <h.wickham at gmail.com> wrote:
> A simple way to alias a function is to do :
>
> g <- function(a = 1, b = 2, c = 3) a + b * c
> f <- function(...) g(...)
>
> but formals (etc) is no longer very helpful.  Is there an easy way to
> programmatically create:
>
> f <- function(a=1, b=2, c=3) g(a=a, b=b, c=c)
>
> This comes up in ggplot2 where I alias many functions to hide the fact
> that I'm using proto in the background, and I'd like the aliased
> functions to be a little more user friendly in terms of revealing what
> are valid arguments (and also to match up with the rdoc files which I
> am building).
>
> Any ideas?
>
> Thanks,
>
> Hadley
>
> --
> http://had.co.nz/
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ggrothendieck at gmail.com  Sun Feb 24 00:52:22 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 23 Feb 2008 18:52:22 -0500
Subject: [Rd] Aliasing a function
In-Reply-To: <000001c87674$4cd1a230$e674e690$@ca>
References: <f8e6ff050802231440xcbe8597yf99b2fb83e9c2ca3@mail.gmail.com>
	<000001c87674$4cd1a230$e674e690$@ca>
Message-ID: <971536df0802231552r3295c86n95cd5322aaa18d3b@mail.gmail.com>

I assume he wants to be able to change the
formals although its confusing since the example
uses the same formals in both cases.

On Sat, Feb 23, 2008 at 6:32 PM, John Fox <jfox at mcmaster.ca> wrote:
> Dear Hadley,
>
> Why not just f <- g ?
>
> Regards,
>  John
>
> --------------------------------
> John Fox, Professor
> Department of Sociology
> McMaster University
> Hamilton, Ontario, Canada L8S 4M4
> 905-525-9140x23604
> http://socserv.mcmaster.ca/jfox
>
>
>
> > -----Original Message-----
> > From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-
> > project.org] On Behalf Of hadley wickham
> > Sent: February-23-08 5:40 PM
> > To: R-devel
> > Subject: [Rd] Aliasing a function
> >
> > A simple way to alias a function is to do :
> >
> > g <- function(a = 1, b = 2, c = 3) a + b * c
> > f <- function(...) g(...)
> >
> > but formals (etc) is no longer very helpful.  Is there an easy way to
> > programmatically create:
> >
> > f <- function(a=1, b=2, c=3) g(a=a, b=b, c=c)
> >
> > This comes up in ggplot2 where I alias many functions to hide the fact
> > that I'm using proto in the background, and I'd like the aliased
> > functions to be a little more user friendly in terms of revealing what
> > are valid arguments (and also to match up with the rdoc files which I
> > am building).
> >
> > Any ideas?
> >
> > Thanks,
> >
> > Hadley
> >
> > --
> > http://had.co.nz/
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From h.wickham at gmail.com  Sun Feb 24 01:41:42 2008
From: h.wickham at gmail.com (hadley wickham)
Date: Sat, 23 Feb 2008 18:41:42 -0600
Subject: [Rd] Aliasing a function
In-Reply-To: <971536df0802231552r3295c86n95cd5322aaa18d3b@mail.gmail.com>
References: <f8e6ff050802231440xcbe8597yf99b2fb83e9c2ca3@mail.gmail.com>
	<000001c87674$4cd1a230$e674e690$@ca>
	<971536df0802231552r3295c86n95cd5322aaa18d3b@mail.gmail.com>
Message-ID: <f8e6ff050802231641w6435b514i6c50c6448d72e531@mail.gmail.com>

On Sat, Feb 23, 2008 at 5:52 PM, Gabor Grothendieck
<ggrothendieck at gmail.com> wrote:
> I assume he wants to be able to change the
>  formals although its confusing since the example
>  uses the same formals in both cases.

Yes, that was an important point that I forgot to mention!  Thanks for
the pointer to formals but it doesn't work in this case:

function (a = 1, b = 2, c = 3)
g(...)
> f(c=5)
Error in f(c = 5) : '...' used in an incorrect context

Hadley


-- 
http://had.co.nz/


From Roger.Bivand at nhh.no  Sun Feb 24 12:13:56 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 24 Feb 2008 12:13:56 +0100 (CET)
Subject: [Rd] R for Windows FAQ 2.8 suggestion
Message-ID: <Pine.LNX.4.64.0802241140560.8272@reclus.nhh.no>

The current text for: 2.8 What's the best way to upgrade? says:

"That's a matter of taste. For most people the best thing to do is to 
uninstall R (see the previous Q), install the new version, copy any 
installed packages to the library folder in the new installation, run 
update.packages() in the new R (`Update packages...' from the Packages 
menu, if you prefer) and then delete anything left of the old 
installation. Different versions of R are quite deliberately installed in 
parallel folders so you can keep old versions around if you wish."

The second paragraph can probably be dropped.

Following the 2.5/2.6 changes in primitive functions, as publicised in:

https://stat.ethz.ch/pipermail/r-help/2007-October/142367.html

I have found that users are confused, and that the advice to "copy any 
installed packages to the library folder in the new installation" is now 
unhelpful. The FAQ does mention (in various places) the benefits of having 
an installation library and one or more user libraries, but 2.8 seems to 
miss this. Could I suggest modifying it to something like:

"That's a matter of taste. If you do not have your own library where you 
have installed packages, you may want to record which there are before 
uninstalling the old version of R. This will return a character vector of 
package names:

z <- installed.packages(priority = "NA")[, "Package"]

which can be exported using save() to a safe place. Next uninstall the 
old version of R, install the new version, load your list of packages, and 
pass it to install.packages().

This can be tedious, involving more work than the alternative of having 
your own library for installing contributed packages - see references to 
setting the R_LIBS environment variable elsewhere in this document (e.g. 
4.2), and/or the help page for the .libPaths() function for help on 
creating and using such a library. If you have your own library, upgrading 
R is much simpler: uninstall the old version of R, install the new 
version, and run:

update.packages(checkBuilt=TRUE, ask=FALSE)

which will see whether packages in your own library need updating for the 
R build you have installed."

The text could be made more aggressive, by swapping the order and 
indicating that, in a Vista-esque world, installing in the release library 
directory is asking for trouble and deprecated. But I'm not sure about 
that.

Of course, I'm being very optimistic, hoping that users will read the FAQ, 
but at least they can be pointed to it when they get into trouble.

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From mflawren at fhcrc.org  Sun Feb 24 13:17:03 2008
From: mflawren at fhcrc.org (Michael Lawrence)
Date: Sun, 24 Feb 2008 06:17:03 -0600
Subject: [Rd] .net and R
In-Reply-To: <279846.64145.qm@web46011.mail.sp1.yahoo.com>
References: <279846.64145.qm@web46011.mail.sp1.yahoo.com>
Message-ID: <509e0620802240417n1f1dba51w1bfabc5828671b22@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080224/7a463804/attachment.pl 

From cgenolin at u-paris10.fr  Sat Feb 23 20:07:54 2008
From: cgenolin at u-paris10.fr (Christophe Genolini)
Date: Sat, 23 Feb 2008 20:07:54 +0100
Subject: [Rd] Standard method for S4 object
Message-ID: <47C06F0A.4090505@u-paris10.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080223/35504b8d/attachment.pl 

From kate at few.vu.nl  Sun Feb 24 19:00:58 2008
From: kate at few.vu.nl (Katharine Mullen)
Date: Sun, 24 Feb 2008 19:00:58 +0100 (CET)
Subject: [Rd] Standard method for S4 object
In-Reply-To: <47C06F0A.4090505@u-paris10.fr>
References: <47C06F0A.4090505@u-paris10.fr>
Message-ID: <Pine.GSO.4.56.0802241851210.17681@laurel.few.vu.nl>

I don't know of any  '"non official list" of what method a new S4 object
should have' - such a list would have to depend on what the object
represents.  If it represents the output of fitting a model, then methods
for 'residuals', 'fitted' and 'coefficients' would probably be nice.

Also, out of curiosity, what do your methods for `get' and `set' for each
slot look like?  Is there any advantage to using such methods over using

slot(objectOfYourClass, "aSlotName") # for get, and
slot(objectOfYourClass, "aSlotName") <- aValue # for set

On Sat, 23 Feb 2008, Christophe Genolini wrote:

> Hi the list,
>
> I am defining a new class. Shortly, I will submit a package with it.
> Before, I would like to know if there is a kind of "non official list"
> of what method a new S4 object should have.
> More precisely, personally, I use 'print', 'summary' and 'plot' a lot.
> So for my new class, I define these 3 methods and of course, a get and a
> set for each slot. What else? Is there some other methods that a R user
> can reasonably expect? Some "minimum basic tools"...
>
> Thanks
>
> Christophe
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From abond at mun.ca  Sun Feb 24 19:35:13 2008
From: abond at mun.ca (abond at mun.ca)
Date: Sun, 24 Feb 2008 19:35:13 +0100 (CET)
Subject: [Rd] 'Esc' crashes R in MacOX 10.5.2 (PR#10839)
Message-ID: <20080224183513.DED4E2834617@mail.pubhealth.ku.dk>

Full_Name: Alex Bond
Version: 2.6.2
OS: MacOSX 10.5.2
Submission from: (NULL) (142.163.207.86)


Pressing 'esc' while typing any (e.g., aov, lm, etc.) command line causes the
program to become non-responsive resulting in "Force Quit" to use the program
again.


From cgenolin at u-paris10.fr  Sun Feb 24 19:28:30 2008
From: cgenolin at u-paris10.fr (Christophe Genolini)
Date: Sun, 24 Feb 2008 19:28:30 +0100
Subject: [Rd] Standard method for S4 object
In-Reply-To: <Pine.GSO.4.56.0802241851210.17681@laurel.few.vu.nl>
References: <47C06F0A.4090505@u-paris10.fr>
	<Pine.GSO.4.56.0802241851210.17681@laurel.few.vu.nl>
Message-ID: <47C1B74E.7070909@u-paris10.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080224/e2ae9282/attachment.pl 

From ligges at statistik.tu-dortmund.de  Sun Feb 24 19:58:51 2008
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sun, 24 Feb 2008 19:58:51 +0100
Subject: [Rd] 'Esc' crashes R in MacOX 10.5.2 (PR#10839)
In-Reply-To: <20080224183513.DED4E2834617@mail.pubhealth.ku.dk>
References: <20080224183513.DED4E2834617@mail.pubhealth.ku.dk>
Message-ID: <47C1BE6B.9090203@statistik.tu-dortmund.de>



abond at mun.ca wrote:
> Full_Name: Alex Bond
> Version: 2.6.2
> OS: MacOSX 10.5.2
> Submission from: (NULL) (142.163.207.86)
> 
> 
> Pressing 'esc' while typing any (e.g., aov, lm, etc.) command line causes the
> program to become non-responsive resulting in "Force Quit" to use the program
> again.

... and this is the xxx-th bug report about it!
Please check the archives on solutions.

Uwe Ligges


From p.murrell at auckland.ac.nz  Sun Feb 24 20:45:31 2008
From: p.murrell at auckland.ac.nz (Paul Murrell)
Date: Mon, 25 Feb 2008 08:45:31 +1300
Subject: [Rd] Clipping using par(plt=..., xpd=FALSE) inconsistencies
In-Reply-To: <Pine.LNX.4.64.0802222050040.11702@auk.stats>
References: <07E228A5BE53C24CAD490193A7381BBBEE1114@LP-EXCHVS07.CO.IHC.COM>
	<Pine.LNX.4.64.0802222050040.11702@auk.stats>
Message-ID: <47C1C95B.8070200@stat.auckland.ac.nz>

Hi


Prof Brian Ripley wrote:
> I think you misunderstand what par("plt") is supposed to do.  The 
> documentation says
> 
>       'plt' A vector of the form 'c(x1, x2, y1, y2)' giving the
>            coordinates of the plot region as fractions of the current
>            figure region.
> 
> You haven't subsequently made a new plot, so why do you expect the 
> clipping region to be changed to that you indicated for the next plot?
> 
> I'd say the bug was that box() changed it, and that happens because it 
> internally sets xpd and so resetting xpd sets the clipping region next 
> time it is used.  Because of
> 
> void GClip(pGEDevDesc dd)
> {
>      if (gpptr(dd)->xpd != gpptr(dd)->oldxpd) {
>  	double x1, y1, x2, y2;
>  	setClipRect(&x1, &y1, &x2, &y2, DEVICE, dd);
>  	GESetClip(x1, y1, x2, y2, dd);
>  	gpptr(dd)->oldxpd = gpptr(dd)->xpd;
>      }
> }
> 
> Maybe we should have user-level code to set the clipping region?


I think that would be reasonable.  I added grid.clip() to grid for
situations like this.

Paul


> On Fri, 22 Feb 2008, Greg Snow wrote:
> 
>> Here is a demonstration of behaviour that is probably an optimization by
>> someone far smarter than me that did not anticipate anyone wanting to do
>> this, but for my purposes it looks more like a bug than a feature.
>>
>> I have tested this with R2.6.2 on Windows, no additional packages loaded
>> (beyond the default), I have tested using the default graphics object,
>> pdf, jpeg, and cairoDevice (ok I loaded a package for that) and all show
>> the same behavior.
>>
>> Run the following set of commands:
>>
>> x <- rnorm(1000)
>> hist(x, xlim=c(-4,4))
>>
>> tmp <- par('plt')
>>
>> box(col='#00000000')
>> tmp2 <- tmp
>> tmp2[2] <- tmp2[1] + 0.3
>> par(xpd = FALSE, plt=tmp2)
>> hist(x, col='red', add=TRUE)
>>
>> box(col='#00000000')
>> tmp3 <- tmp
>> tmp3[1] <- tmp3[2] - 0.3
>> par(xpd=FALSE, plt=tmp3)
>> hist(x, col='blue', add=TRUE)
>> par(plt=tmp)
>>
>>
>> This gives me the plot that I want and expect (a histogram with the left
>> section red, the middle white/background, and the right blue).
>>
>> Now comment out or delete the 2 box commands and rerun everything.  The
>> clipping does not happen this time and the final result is a full blue
>> histogram.
>>
>> Is this a bug? Feature? Something else?
>> Does anyone have a better work around than drawing transparent boxes?
>>
>> Thanks,
>>
>>
>>
>>
> 

-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/


From simon.urbanek at r-project.org  Sun Feb 24 21:25:51 2008
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sun, 24 Feb 2008 15:25:51 -0500
Subject: [Rd] 'Esc' crashes R in MacOX 10.5.2 (PR#10839)
In-Reply-To: <47C1BE6B.9090203@statistik.tu-dortmund.de>
References: <20080224183513.DED4E2834617@mail.pubhealth.ku.dk>
	<47C1BE6B.9090203@statistik.tu-dortmund.de>
Message-ID: <43E1AA53-E960-476E-9B44-8C0975CC3107@r-project.org>


On Feb 24, 2008, at 1:58 PM, Uwe Ligges wrote:

>
>
> abond at mun.ca wrote:
>> Full_Name: Alex Bond
>> Version: 2.6.2
>> OS: MacOSX 10.5.2
>> Submission from: (NULL) (142.163.207.86)
>>
>>
>> Pressing 'esc' while typing any (e.g., aov, lm, etc.) command line  
>> causes the
>> program to become non-responsive resulting in "Force Quit" to use  
>> the program
>> again.
>
> ... and this is the xxx-th bug report about it!
> Please check the archives on solutions.
>

... and use the latest version - the fix is on CRAN for a while now ...

Simon


From tplate at acm.org  Mon Feb 25 07:24:43 2008
From: tplate at acm.org (Tony Plate)
Date: Sun, 24 Feb 2008 23:24:43 -0700
Subject: [Rd] Aliasing a function
In-Reply-To: <f8e6ff050802231641w6435b514i6c50c6448d72e531@mail.gmail.com>
References: <f8e6ff050802231440xcbe8597yf99b2fb83e9c2ca3@mail.gmail.com>	<000001c87674$4cd1a230$e674e690$@ca>	<971536df0802231552r3295c86n95cd5322aaa18d3b@mail.gmail.com>
	<f8e6ff050802231641w6435b514i6c50c6448d72e531@mail.gmail.com>
Message-ID: <47C25F2B.7020704@acm.org>

Maybe something like this? (though it seems like it might be more 
straightforward to do this sort of thing by text-processing a source 
file then source'ing it in R).

 > f <- function(a, b, c) c(a=a,b=b,c=c)
 > attr(f, "source") <- NULL
 > f
function (a, b, c)
c(a = a, b = b, c = c)
 > g1 <- f
 > ff <- formals(f)
 > argtrans <- c(a="d", b="e", c="f")
 > names(ff) <- argtrans
 > g2 <- as.function(c(ff, as.call(c(list(as.name("f")), 
lapply(argtrans, as.name)))))
 > g2
function (d, e, f)
f(a = d, b = e, c = f)
 > f(1,2,3)
a b c
1 2 3
 > g1(a=1,b=2,c=3)
a b c
1 2 3
 > g2(d=1,e=2,f=3)
a b c
1 2 3
 >

-- Tony Plate


hadley wickham wrote:
> On Sat, Feb 23, 2008 at 5:52 PM, Gabor Grothendieck
> <ggrothendieck at gmail.com> wrote:
>   
>> I assume he wants to be able to change the
>>  formals although its confusing since the example
>>  uses the same formals in both cases.
>>     
>
> Yes, that was an important point that I forgot to mention!  Thanks for
> the pointer to formals but it doesn't work in this case:
>
> function (a = 1, b = 2, c = 3)
> g(...)
>   
>> f(c=5)
>>     
> Error in f(c = 5) : '...' used in an incorrect context
>
> Hadley
>
>
>


From christophe.genolini at free.fr  Mon Feb 25 15:16:17 2008
From: christophe.genolini at free.fr (christophe.genolini at free.fr)
Date: Mon, 25 Feb 2008 15:16:17 +0100
Subject: [Rd] S4 : declaration of inheritance
In-Reply-To: <mailman.25.1203937206.11666.r-devel@r-project.org>
References: <mailman.25.1203937206.11666.r-devel@r-project.org>
Message-ID: <1203948977.47c2cdb18dc3c@imp.free.fr>

Hi the list,

There is two way to declare a new object with inheritence : one can do

setMethod("myClass",
  representation("fatherClass",x="numeric")
  ....

or

setMethod("myClass",
  representation(x="numeric"),
  containt="fatherClass"
  ....

Is there any difference ? What is the usal way ?

Christophe


From osklyar at ebi.ac.uk  Mon Feb 25 15:29:11 2008
From: osklyar at ebi.ac.uk (Oleg Sklyar)
Date: Mon, 25 Feb 2008 14:29:11 +0000
Subject: [Rd] S4 : declaration of inheritance
In-Reply-To: <1203948977.47c2cdb18dc3c@imp.free.fr>
References: <mailman.25.1203937206.11666.r-devel@r-project.org>
	<1203948977.47c2cdb18dc3c@imp.free.fr>
Message-ID: <47C2D0B7.7080801@ebi.ac.uk>

setClass("myClass",
   representation(x="numeric"),
   contains="fartherClass")

seems more logical to me in sense of syntax (pay attention to setClass 
instead of setMethod and contains instead of containt), but both work 
apparently.

Oleg

christophe.genolini at free.fr wrote:
> Hi the list,
> 
> There is two way to declare a new object with inheritence : one can do
> 
> setMethod("myClass",
>   representation("fatherClass",x="numeric")
>   ....
> 
> or
> 
> setMethod("myClass",
>   representation(x="numeric"),
>   containt="fatherClass"
>   ....
> 
> Is there any difference ? What is the usal way ?
> 
> Christophe
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Dr Oleg Sklyar * EBI-EMBL, Cambridge CB10 1SD, UK * +44-1223-494466


From christophe.genolini at free.fr  Mon Feb 25 15:39:17 2008
From: christophe.genolini at free.fr (christophe.genolini at free.fr)
Date: Mon, 25 Feb 2008 15:39:17 +0100
Subject: [Rd] S4 : declaration of inheritance
In-Reply-To: <47C2D0B7.7080801@ebi.ac.uk>
References: <mailman.25.1203937206.11666.r-devel@r-project.org>
	<1203948977.47c2cdb18dc3c@imp.free.fr> <47C2D0B7.7080801@ebi.ac.uk>
Message-ID: <1203950357.47c2d3152cf86@imp.free.fr>

Sorry, I make a mistake... I meant :
what the difference between

setClass("myClass",
   representation("fatherClass",x="numeric")
   ....

or

setClass("myClass",
   representation(x="numeric"),
   contains="fatherClass"
   ....



> setClass("myClass",
>    representation(x="numeric"),
>    contains="fartherClass")
>
> seems more logical to me in sense of syntax (pay attention to setClass
> instead of setMethod and contains instead of containt), but both work
> apparently.
>
> Oleg
>
> christophe.genolini at free.fr wrote:
> > Hi the list,
> >
> > There is two way to declare a new object with inheritence : one can do
> >
> > setMethod("myClass",
> >   representation("fatherClass",x="numeric")
> >   ....
> >
> > or
> >
> > setMethod("myClass",
> >   representation(x="numeric"),
> >   containt="fatherClass"
> >   ....
> >
> > Is there any difference ? What is the usal way ?
> >
> > Christophe
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
>
> --
> Dr Oleg Sklyar * EBI-EMBL, Cambridge CB10 1SD, UK * +44-1223-494466
>


From mrubi at fibertel.com.ar  Mon Feb 25 17:04:10 2008
From: mrubi at fibertel.com.ar (Martin Rubi)
Date: Mon, 25 Feb 2008 14:04:10 -0200
Subject: [Rd] Calling R_PreserveObject from embedded R
References: <27d1e6020802230607t72e317abv3218f4530185c3c8@mail.gmail.com>
Message-ID: <001d01c877c8$0efb8bb0$0201a8c0@codedev>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080225/0eee0764/attachment.pl 

From timh at insightful.com  Mon Feb 25 17:28:17 2008
From: timh at insightful.com (Tim Hesterberg)
Date: Mon, 25 Feb 2008 08:28:17 -0800
Subject: [Rd] Standard method for S4 object
In-Reply-To: <47C06F0A.4090505@u-paris10.fr> (message from Christophe Genolini
	on Sat, 23 Feb 2008 20:07:54 +0100)
References: <47C06F0A.4090505@u-paris10.fr>
Message-ID: <uy79957by.fsf@insightful.com>

It depends on what the object is to be used for.

If you want users to be able to operate with the object as if it
were a normal vector, to do things like mean(x), cos(x), etc.
then the list would be very long indeed; for example, there are
225 methods for the S4 'bdVector' class (in S-PLUS), plus additional
methods defined for inheriting classes.

In cases like this you might prefer using an S3 class, using
attributes rather than slots for auxiliary information, so that
you don't need to write so many methods.

Tim Hesterberg

>I am defining a new class. Shortly, I will submit a package with it. 
>Before, I would like to know if there is a kind of "non official list" 
>of what method a new S4 object should have.
>More precisely, personally, I use 'print', 'summary' and 'plot' a lot. 
>So for my new class, I define these 3 methods and of course, a get and a 
>set for each slot. What else? Is there some other methods that a R user 
>can reasonably expect? Some "minimum basic tools"...
>
>Thanks
>
>Christophe


From ripley at stats.ox.ac.uk  Mon Feb 25 17:56:53 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 25 Feb 2008 16:56:53 +0000 (GMT)
Subject: [Rd] New version of X11, png and jpeg
Message-ID: <alpine.LFD.1.00.0802201933470.25534@gannet.stats.ox.ac.uk>

R-devel has new versions of the X11(), png() and jpeg() devices on 
Unix-alikes.  The intention is that these are used identically to the 
previous versions (which remain available) but will produce higher-quality 
output with more features.

Pros:

Antialiasing of text and lines (can be turned off) but no blurring of 
fills.

Buffering of the X11 display and fast repainting from a backing image. 
(The intention is to emulate the timer-based buffering of the windows() 
device in due course, but not for 2.7.0.)

Ability to use translucent colours, including backgrounds, and produce
partially transparent PNG files.

Scalable text, including to sizes like 4.5 pt. This allows more accurate 
sizing on non-standard screen sizes (e.g. my home machine has a 90dpi 
1650x1024 display whereas standard X11 fonts are set up for 75 or 100 
dpi).

Full support for UTF-8, so on systems with suitable fonts you can plot in 
many languages on a single figure (and this will work even in non-UTF-8 
locales).  The output should be locale-independent (unlike the current 
devices where even English text is rendered slightly differently in 
Latin-1 and UTF-8 locales).

A utility function savePlot() to make a PNG/JPEG/TIFF copy of the current 
plot.

The new png() and jpeg() devices do not require an X server to be running.

Cons:

Needs more software installed - cairo, pango and support packages (which 
on all the systems we have looked at are pulled in by the packages checked 
for).  You will see something like

   Additional capabilities:   PNG, JPEG, iconv, MBCS, NLS, cairo
                                                           ^^^^^
if configure finds the software we are looking for.

Slower under some circumstances (although on the test systems much faster 
than packages Cairo and cairoDevice).  This will be particularly true for 
X11() with a slow connection between the machine running R and the X 
server.

The additional software might not work correctly.


The new versions are not currently the default, but can be made so by 
setting X11.options(type="Cairo"), e.g. as a load hook for package 
grDevices.  I am using

setHook(packageEvent("grDevices", "onLoad"),
     function(...) {
         grDevices::ps.options(horizontal=FALSE)
         if(getRversion() >= '2.7.0') grDevices::X11.options(type="Cairo")
     })


Please try these out and let us know how you get on.  As a check, try the 
TestChars() examples in ?points - on one Solaris 10 system a few of the 
symbol font characters were incorrect.  It worked on an FC5 system with

auk% pkg-config --modversion pango
1.12.4
auk% pkg-config --modversion cairo
1.0.4

so the versions required are not all recent.

Although these devices would in principle work on Mac OS X, neither cairo 
nor pango is readily available.  We are working on other versions for 
Mac OS (X11 based on cairo/freetype, png/jpeg based on Quartz).

There are also new svg() and tiff() devices.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From osklyar at ebi.ac.uk  Mon Feb 25 18:00:18 2008
From: osklyar at ebi.ac.uk (Oleg Sklyar)
Date: Mon, 25 Feb 2008 17:00:18 +0000
Subject: [Rd] Standard method for S4 object
In-Reply-To: <uy79957by.fsf@insightful.com>
References: <47C06F0A.4090505@u-paris10.fr> <uy79957by.fsf@insightful.com>
Message-ID: <47C2F422.6040608@ebi.ac.uk>

Hi Tim

Tim Hesterberg wrote:
> It depends on what the object is to be used for.
> 
> If you want users to be able to operate with the object as if it
> were a normal vector, to do things like mean(x), cos(x), etc.
> then the list would be very long indeed; for example, there are
> 225 methods for the S4 'bdVector' class (in S-PLUS), plus additional
> methods defined for inheriting classes.

This somehow undermines the whole idea of inheritance. If you do not 
inherit, then you are just implementing a class that mimics another one 
from scratch. However, the question then is not about standard methods 
any more, it's about the methods of the class that you mimic.

As an example, in my EBImage (image analysis, Bioconductor) the class 
"Image" is derived from "array" using contains="array", thus providing 
all the functionality of arrays on top of that of images without extra 
code. What I needed in this case was to redefine the [ operators and 
"Arith" ones as I wanted them to return objects of class "Image" instead 
of "array"; the [<- are actually fine. Print or plot work exactly the 
same as in arrays printing additional slots where appropriate if not 
redefined, as well as most of the ones you listed above like mean, cos, 
hist etc, just as the following example shows (the Math group NOT redefined)

> library(EBImage)
> x = Image(0.5,c(10,10))
> cos(x)

'Image'
   colorMode()   : Grayscale
   storage class : numeric 3D array, writable images in range [0..1]
   dim()         : 10x10
...

Surprisingly, there are things that didn't work out of the box, like for 
example median: I had to redefine it to work on the .Data slot directly, 
otherwise it took ages, but that was about the only problem.

> In cases like this you might prefer using an S3 class, using
> attributes rather than slots for auxiliary information, so that
> you don't need to write so many methods.

The reasoning here is not really clear. Could you please explain why is 
this better?

Best,
Oleg

> 
> Tim Hesterberg
> 
>> I am defining a new class. Shortly, I will submit a package with it. 
>> Before, I would like to know if there is a kind of "non official list" 
>> of what method a new S4 object should have.
>> More precisely, personally, I use 'print', 'summary' and 'plot' a lot. 
>> So for my new class, I define these 3 methods and of course, a get and a 
>> set for each slot. What else? Is there some other methods that a R user 
>> can reasonably expect? Some "minimum basic tools"...
>>
>> Thanks
>>
>> Christophe
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Dr Oleg Sklyar * EBI-EMBL, Cambridge CB10 1SD, UK * +44-1223-494466


From vogranovich at jumptrading.com  Mon Feb 25 18:47:40 2008
From: vogranovich at jumptrading.com (Vadim Organovich)
Date: Mon, 25 Feb 2008 11:47:40 -0600
Subject: [Rd] how to write dput-able objects
Message-ID: <22D850BC39A25742977325ADDE208E7702669562ED@chiexchange02.w2k.jumptrading.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080225/42cc849f/attachment.pl 

From timh at insightful.com  Mon Feb 25 18:59:16 2008
From: timh at insightful.com (Tim Hesterberg)
Date: Mon, 25 Feb 2008 09:59:16 -0800
Subject: [Rd] Standard method for S4 object
In-Reply-To: <47C2F422.6040608@ebi.ac.uk> (message from Oleg Sklyar on Mon, 25
	Feb 2008 17:00:18 +0000)
References: <47C06F0A.4090505@u-paris10.fr> <uy79957by.fsf@insightful.com>
	<47C2F422.6040608@ebi.ac.uk>
Message-ID: <uve4c6hor.fsf@insightful.com>

>Tim Hesterberg wrote:
>> It depends on what the object is to be used for.
>> 
>> If you want users to be able to operate with the object as if it
>> were a normal vector, to do things like mean(x), cos(x), etc.
>> then the list would be very long indeed; for example, there are
>> 225 methods for the S4 'bdVector' class (in S-PLUS), plus additional
>> methods defined for inheriting classes.
>
>This somehow undermines the whole idea of inheritance. If you do not 
>inherit, then you are just implementing a class that mimics another one 
>from scratch. However, the question then is not about standard methods 
>any more, it's about the methods of the class that you mimic.

My experience with S4 classes is primarily with classes that had
to be implemented from scratch, there was nothing one could inherit
from - bdFrame and bdVector in library(bigdata), miVariable in
library(missing)  (sorry, these are S-PLUS only).  

Actually, for miVariable we considered S3 class + attributes, but
in this case we decided that we did NOT want operations like mean(x)
to work without going through a method specifically for the class.

>... example of "Image" class omitted here 
>
>> In cases like this you might prefer using an S3 class, using
>> attributes rather than slots for auxiliary information, so that
>> you don't need to write so many methods.
>
>The reasoning here is not really clear. Could you please explain why is 
>this better?

Three examples.  First is "bs":
> library(splines)
> bsx <- bs(1:99, knots = 10 * 2:6)
> showStructure(bsx)
numeric[99,8]  S3 class: bs basis 
 attributes: dimnames 
 &degree           scalar  class: integer 
 &knots            numeric[ length 5]  class: numeric 
 &Boundary.knots   numeric[ length 2]  class: integer 
 &intercept        logical[ length 1]  class: logical 

(I plan to add showStructure to library(splus2R) shortly.)

This is an S3 class, a matrix plus some additional attributes.
Everything that works for a matrix works for this object,
without needing additional classes.

A second example is "label":
> library(Hmisc)
>      age <- c(21,65,43)
>      label(age) <- "Age in Years"
> showStructure(age)
numeric[ length 3]  S3 class: labelled 
 &label   character[ length 1]  class: character 
> cos(age)
Age in Years 
[1] -0.5477293 -0.5624539  0.5551133

Another S3 class, basically any object plus a label attribute.
There are a few methods for this class, otherwise it works
out of the box.

The third is "lm" - a list with an S3 class.  Functions that
operate on lists work fine without extra methods.  And you can
add extra components without needing to define a new class
(I've done this in library(resample)).


From gavin.simpson at ucl.ac.uk  Mon Feb 25 19:15:05 2008
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Mon, 25 Feb 2008 18:15:05 +0000
Subject: [Rd] r44608 fails make check-all in scatter.smooth example
Message-ID: <1203963305.2432.25.camel@prometheus.geog.ucl.ac.uk>

Dear List,

Having had my appetite sufficiently whetted by Prof. Ripley's email
about the new graphics capabilities in Unixes, I wanted to try them out.
I updated to svn r44608, configured with the following options:

R is now configured for x86_64-unknown-linux-gnu

  Source directory:          ..
  Installation directory:    /usr/local

  C compiler:                gcc  -O3 -g -std=gnu99 -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
  Fortran 77 compiler:       gfortran  -O3 -g -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron

  C++ compiler:              g++  -O3 -g -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
  Fortran 90/95 compiler:    gfortran -O3 -g -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
  Obj-C compiler:            gcc -g -O2

  Interfaces supported:      X11, tcltk
  External libraries:        readline
  Additional capabilities:   PNG, JPEG, iconv, MBCS, NLS, cairo
  Options enabled:           shared BLAS, R profiling, Java

  Recommended packages:      yes

R compiled OK, but make check-all fails running the scatter.smooth example:

running code in 'stats-Ex.R' ...make[4]: *** [stats-Ex.Rout] Error 1
make[4]: Leaving directory `/home/gavin/R/devel/build/tests/Examples'
make[3]: *** [test-Examples-Base] Error 2
make[3]: Leaving directory `/home/gavin/R/devel/build/tests/Examples'
make[2]: *** [test-Examples] Error 2
make[2]: Leaving directory `/home/gavin/R/devel/build/tests'
make[1]: *** [test-all-basics] Error 1
make[1]: Leaving directory `/home/gavin/R/devel/build/tests'
make: *** [check-all] Error 2

And the Rout file contains this at the failure:

$ tail -n 20 tests/Examples/stats-Ex.Rout.fail
> 
> cleanEx(); nameEx("scatter.smooth")
> ### * scatter.smooth
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: scatter.smooth
> ### Title: Scatter Plot with Smooth Curve Fitted by Loess
> ### Aliases: scatter.smooth loess.smooth
> ### Keywords: smooth
> 
> ### ** Examples
> 
> require(graphics)
> 
> with(cars, scatter.smooth(speed, dist))
Error in .Fortran(R_lowesw, as.double(fitted.residuals), as.integer(N),  : 
  Incorrect number of arguments (4), expecting 7 for lowesw
Calls: with ... scatter.smooth -> loess.smooth -> simpleLoess -> .Fortran
Execution halted

This is on Fedora 8.

Plots on the new X11() device look very nice though!

Cheers,

G
-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
 Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
 ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
 Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
 Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
 UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From osklyar at ebi.ac.uk  Mon Feb 25 19:18:19 2008
From: osklyar at ebi.ac.uk (Oleg Sklyar)
Date: Mon, 25 Feb 2008 18:18:19 +0000
Subject: [Rd] Standard method for S4 object
In-Reply-To: <uve4c6hor.fsf@insightful.com>
References: <47C06F0A.4090505@u-paris10.fr> <uy79957by.fsf@insightful.com>
	<47C2F422.6040608@ebi.ac.uk> <uve4c6hor.fsf@insightful.com>
Message-ID: <47C3066B.8030804@ebi.ac.uk>

Hi Tim,

well, I am not arguing that there are situation when one needs to 
rewrite everything from scratch. However it is always worth at least 
considering inheritance if there is a candidate to inherit from. It 
saves a lot of work.

Anyway, your examples of S3 class usage are obviously valid in sense 
that they are indeed S3 methods providing desired functionality. 
However, I still do not see WHY using attributes with S3 is better than 
slots and S4 for structures like those inherited from 'array' or 
similar. S3 gives more freedom in assigning new attributes, but this 
freedom also means that one has little control over the structure of an 
object making it, for example, more difficult to use with C/C++ code. 
Are there any specific benefits in not using S4 and slots (apart from 
some known performance issues)?

Best,
Oleg

Tim Hesterberg wrote:
>> Tim Hesterberg wrote:
>>> It depends on what the object is to be used for.
>>>
>>> If you want users to be able to operate with the object as if it
>>> were a normal vector, to do things like mean(x), cos(x), etc.
>>> then the list would be very long indeed; for example, there are
>>> 225 methods for the S4 'bdVector' class (in S-PLUS), plus additional
>>> methods defined for inheriting classes.
>> This somehow undermines the whole idea of inheritance. If you do not 
>> inherit, then you are just implementing a class that mimics another one 
>>from scratch. However, the question then is not about standard methods 
>> any more, it's about the methods of the class that you mimic.
> 
> My experience with S4 classes is primarily with classes that had
> to be implemented from scratch, there was nothing one could inherit
> from - bdFrame and bdVector in library(bigdata), miVariable in
> library(missing)  (sorry, these are S-PLUS only).  
> 
> Actually, for miVariable we considered S3 class + attributes, but
> in this case we decided that we did NOT want operations like mean(x)
> to work without going through a method specifically for the class.
> 
>> ... example of "Image" class omitted here 
>>
>>> In cases like this you might prefer using an S3 class, using
>>> attributes rather than slots for auxiliary information, so that
>>> you don't need to write so many methods.
>> The reasoning here is not really clear. Could you please explain why is 
>> this better?
> 
> Three examples.  First is "bs":
>> library(splines)
>> bsx <- bs(1:99, knots = 10 * 2:6)
>> showStructure(bsx)
> numeric[99,8]  S3 class: bs basis 
>  attributes: dimnames 
>  &degree           scalar  class: integer 
>  &knots            numeric[ length 5]  class: numeric 
>  &Boundary.knots   numeric[ length 2]  class: integer 
>  &intercept        logical[ length 1]  class: logical 
> 
> (I plan to add showStructure to library(splus2R) shortly.)
> 
> This is an S3 class, a matrix plus some additional attributes.
> Everything that works for a matrix works for this object,
> without needing additional classes.
> 
> A second example is "label":
>> library(Hmisc)
>>      age <- c(21,65,43)
>>      label(age) <- "Age in Years"
>> showStructure(age)
> numeric[ length 3]  S3 class: labelled 
>  &label   character[ length 1]  class: character 
>> cos(age)
> Age in Years 
> [1] -0.5477293 -0.5624539  0.5551133
> 
> Another S3 class, basically any object plus a label attribute.
> There are a few methods for this class, otherwise it works
> out of the box.
> 
> The third is "lm" - a list with an S3 class.  Functions that
> operate on lists work fine without extra methods.  And you can
> add extra components without needing to define a new class
> (I've done this in library(resample)).

-- 
Dr Oleg Sklyar * EBI-EMBL, Cambridge CB10 1SD, UK * +44-1223-494466


From ggrothendieck at gmail.com  Mon Feb 25 19:16:49 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 25 Feb 2008 13:16:49 -0500
Subject: [Rd] how to write dput-able objects
In-Reply-To: <22D850BC39A25742977325ADDE208E7702669562ED@chiexchange02.w2k.jumptrading.com>
References: <22D850BC39A25742977325ADDE208E7702669562ED@chiexchange02.w2k.jumptrading.com>
Message-ID: <971536df0802251016x6c879761wa6f1cb3d5a5b75ee@mail.gmail.com>

You might want to look at the proto package.  proto objects won't
immediately dput either but it would not be hard to convert them to
restorable character strings because the proto methods normally
have their object as their parent environment so its implicit in the
definition.  First define a proto object p with one variable 'a' and one
method 'f' and a child object, q, whose 'a' component overrides the
'a' in its parent.

> library(proto)
> p <- proto(a=1, f = function(.) .$a <- .$a + 1)
> q <- p$proto(a = 2)
> p$as.list()
$a
[1] 1

$f
function(.) .$a <- .$a + 1
<environment: 0x01d6e284>

> name.proto(p)
[1] "p"
> name.proto(p$parent.env())
[1] "R_GlobalEnv"
> q$as.list()
$a
[1] 2

> name.proto(q)
[1] "q"
> name.proto(q$parent.env())
[1] "p"

Note that the strings above have everything
you would need to restore them.  We don't
need the environment since we already know that
f's environment must be p as it belongs to p.

On Mon, Feb 25, 2008 at 12:47 PM, Vadim Organovich
<vogranovich at jumptrading.com> wrote:
> Hi,
>
> One way of doing object-oriented programming in R is to use function environment to hold object's data, see for example
> @Article{Rnews:Chambers+Lang:2001a,
>  author       = {John M. Chambers and Duncan Temple Lang},
>  title        = {Object-Oriented Programming in {R}},
>  journal      = {R News},
>  year        = 2001,
>  volume       = 1,
>  number       = 3,
>  pages        = {17--19},
>  month        = {September},
>  url        = http,
>  pdf        = Rnews2001-3
> }
>
> One deficiency of this approach is that dput() does not export all data pertained to the object. For example
>
> > objfactory <- function(nm) {
> +   list(name = function() nm)
> + }
> >
> >
> > obj <- objfactory('foo')
> >
> > obj$name()
> [1] "foo"
> > dput(obj)
> structure(list(name = function ()
> nm), .Names = "name")
> As one can see the data piece of the obj, nm='foo', is not exported. Is there a way to modify the original approach so that dput() will produce a self-sufficient dump of the object?
>
> Thanks,
> Vadim
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From timh at insightful.com  Mon Feb 25 19:44:43 2008
From: timh at insightful.com (Tim Hesterberg)
Date: Mon, 25 Feb 2008 10:44:43 -0800
Subject: [Rd] Standard method for S4 object
In-Reply-To: <47C3066B.8030804@ebi.ac.uk> (message from Oleg Sklyar on Mon, 25
	Feb 2008 18:18:19 +0000)
References: <47C06F0A.4090505@u-paris10.fr> <uy79957by.fsf@insightful.com>
	<47C2F422.6040608@ebi.ac.uk> <uve4c6hor.fsf@insightful.com>
	<47C3066B.8030804@ebi.ac.uk>
Message-ID: <uskzg6fl0.fsf@insightful.com>

Hi Oleg,

If there as a class to inherit from, then my point about an S4 class
requiring lots of methods is moot.  I think it would come down then to
whether one prefers flexibility (advantage S3) or a definite structure
for use with C/C++ (advantage S4).

Tim

>well, I am not arguing that there are situation when one needs to 
>rewrite everything from scratch. However it is always worth at least 
>considering inheritance if there is a candidate to inherit from. It 
>saves a lot of work.
>
>Anyway, your examples of S3 class usage are obviously valid in sense 
>that they are indeed S3 methods providing desired functionality. 
>However, I still do not see WHY using attributes with S3 is better than 
>slots and S4 for structures like those inherited from 'array' or 
>similar. S3 gives more freedom in assigning new attributes, but this 
>freedom also means that one has little control over the structure of an 
>object making it, for example, more difficult to use with C/C++ code. 
>Are there any specific benefits in not using S4 and slots (apart from 
>some known performance issues)?


From rdpeng at gmail.com  Mon Feb 25 19:55:59 2008
From: rdpeng at gmail.com (Roger Peng)
Date: Mon, 25 Feb 2008 13:55:59 -0500
Subject: [Rd] New version of X11, png and jpeg
In-Reply-To: <alpine.LFD.1.00.0802201933470.25534@gannet.stats.ox.ac.uk>
References: <alpine.LFD.1.00.0802201933470.25534@gannet.stats.ox.ac.uk>
Message-ID: <66f3bd910802251055m818e1c2kb0056e729b8e5a11@mail.gmail.com>

(Apologies, I meant to 'Reply to all' the first time but forgot).

I built r44608 of R-devel with (I think) cairo support.   At least,
that's what the configure script told me.  In addition,
'capabilities("cairo")' is TRUE.  Calling X11(type = "Cairo") gives me
the error:

Error in X11() : X11 module cannot be loaded
In addition: Warning message:
In X11() :
 unable to load shared library
'/home/rpeng/install/R-devel/lib64/R/modules//R_X11.so':
 /home/rpeng/install/R-devel/lib64/R/modules//R_X11.so: undefined
symbol: cairo_image_surface_get_data


I figured I must be missing a library somewhere, but I'm not sure how
to track down which one.  Any thoughts here?

I'm on a FC5 system with:

cairo-devel-1.0.4-1
cairo-1.0.4-1
cairo-1.0.4-1

and

pango-1.12.4-4
pango-devel-1.12.4-4
pango-1.12.4-4

Also, I have

[rpeng at audrey R-source]$ pkg-config --modversion pango
1.12.4
[rpeng at audrey R-source]$ pkg-config --modversion cairo
1.0.4

-roger

On Mon, Feb 25, 2008 at 11:56 AM, Prof Brian Ripley
<ripley at stats.ox.ac.uk> wrote:
> R-devel has new versions of the X11(), png() and jpeg() devices on
>  Unix-alikes.  The intention is that these are used identically to the
>  previous versions (which remain available) but will produce higher-quality
>  output with more features.
>
>  Pros:
>
>  Antialiasing of text and lines (can be turned off) but no blurring of
>  fills.
>
>  Buffering of the X11 display and fast repainting from a backing image.
>  (The intention is to emulate the timer-based buffering of the windows()
>  device in due course, but not for 2.7.0.)
>
>  Ability to use translucent colours, including backgrounds, and produce
>  partially transparent PNG files.
>
>  Scalable text, including to sizes like 4.5 pt. This allows more accurate
>  sizing on non-standard screen sizes (e.g. my home machine has a 90dpi
>  1650x1024 display whereas standard X11 fonts are set up for 75 or 100
>  dpi).
>
>  Full support for UTF-8, so on systems with suitable fonts you can plot in
>  many languages on a single figure (and this will work even in non-UTF-8
>  locales).  The output should be locale-independent (unlike the current
>  devices where even English text is rendered slightly differently in
>  Latin-1 and UTF-8 locales).
>
>  A utility function savePlot() to make a PNG/JPEG/TIFF copy of the current
>  plot.
>
>  The new png() and jpeg() devices do not require an X server to be running.
>
>  Cons:
>
>  Needs more software installed - cairo, pango and support packages (which
>  on all the systems we have looked at are pulled in by the packages checked
>  for).  You will see something like
>
>    Additional capabilities:   PNG, JPEG, iconv, MBCS, NLS, cairo
>                                                            ^^^^^
>  if configure finds the software we are looking for.
>
>  Slower under some circumstances (although on the test systems much faster
>  than packages Cairo and cairoDevice).  This will be particularly true for
>  X11() with a slow connection between the machine running R and the X
>  server.
>
>  The additional software might not work correctly.
>
>
>  The new versions are not currently the default, but can be made so by
>  setting X11.options(type="Cairo"), e.g. as a load hook for package
>  grDevices.  I am using
>
>  setHook(packageEvent("grDevices", "onLoad"),
>      function(...) {
>          grDevices::ps.options(horizontal=FALSE)
>          if(getRversion() >= '2.7.0') grDevices::X11.options(type="Cairo")
>      })
>
>
>  Please try these out and let us know how you get on.  As a check, try the
>  TestChars() examples in ?points - on one Solaris 10 system a few of the
>  symbol font characters were incorrect.  It worked on an FC5 system with
>
>  auk% pkg-config --modversion pango
>  1.12.4
>  auk% pkg-config --modversion cairo
>  1.0.4
>
>  so the versions required are not all recent.
>
>  Although these devices would in principle work on Mac OS X, neither cairo
>  nor pango is readily available.  We are working on other versions for
>  Mac OS (X11 based on cairo/freetype, png/jpeg based on Quartz).
>
>  There are also new svg() and tiff() devices.
>
>  --
>  Brian D. Ripley,                  ripley at stats.ox.ac.uk
>  Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>  University of Oxford,             Tel:  +44 1865 272861 (self)
>  1 South Parks Road,                     +44 1865 272866 (PA)
>  Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>  ______________________________________________
>  R-devel at r-project.org mailing list
>  https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Roger D. Peng  |  http://www.biostat.jhsph.edu/~rpeng/


From ripley at stats.ox.ac.uk  Mon Feb 25 20:08:05 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 25 Feb 2008 19:08:05 +0000 (GMT)
Subject: [Rd] New version of X11, png and jpeg
In-Reply-To: <66f3bd910802251055m818e1c2kb0056e729b8e5a11@mail.gmail.com>
References: <alpine.LFD.1.00.0802201933470.25534@gannet.stats.ox.ac.uk>
	<66f3bd910802251055m818e1c2kb0056e729b8e5a11@mail.gmail.com>
Message-ID: <alpine.LFD.1.00.0802251858380.1885@gannet.stats.ox.ac.uk>

That call is from Cairo 1.2, so looks like our test FC5 box had a later 
version of the cairo libraries than the one pkg-config reported.

You should be able to build with --without-cairo until such a time as we 
can add a suitable configure test.

Thank you for the report.

On Mon, 25 Feb 2008, Roger Peng wrote:

> (Apologies, I meant to 'Reply to all' the first time but forgot).
>
> I built r44608 of R-devel with (I think) cairo support.   At least,
> that's what the configure script told me.  In addition,
> 'capabilities("cairo")' is TRUE.  Calling X11(type = "Cairo") gives me
> the error:
>
> Error in X11() : X11 module cannot be loaded
> In addition: Warning message:
> In X11() :
> unable to load shared library
> '/home/rpeng/install/R-devel/lib64/R/modules//R_X11.so':
> /home/rpeng/install/R-devel/lib64/R/modules//R_X11.so: undefined
> symbol: cairo_image_surface_get_data
>
>
> I figured I must be missing a library somewhere, but I'm not sure how
> to track down which one.  Any thoughts here?
>
> I'm on a FC5 system with:
>
> cairo-devel-1.0.4-1
> cairo-1.0.4-1
> cairo-1.0.4-1
>
> and
>
> pango-1.12.4-4
> pango-devel-1.12.4-4
> pango-1.12.4-4
>
> Also, I have
>
> [rpeng at audrey R-source]$ pkg-config --modversion pango
> 1.12.4
> [rpeng at audrey R-source]$ pkg-config --modversion cairo
> 1.0.4
>
> -roger
>
> On Mon, Feb 25, 2008 at 11:56 AM, Prof Brian Ripley
> <ripley at stats.ox.ac.uk> wrote:
>> R-devel has new versions of the X11(), png() and jpeg() devices on
>>  Unix-alikes.  The intention is that these are used identically to the
>>  previous versions (which remain available) but will produce higher-quality
>>  output with more features.
>>
>>  Pros:
>>
>>  Antialiasing of text and lines (can be turned off) but no blurring of
>>  fills.
>>
>>  Buffering of the X11 display and fast repainting from a backing image.
>>  (The intention is to emulate the timer-based buffering of the windows()
>>  device in due course, but not for 2.7.0.)
>>
>>  Ability to use translucent colours, including backgrounds, and produce
>>  partially transparent PNG files.
>>
>>  Scalable text, including to sizes like 4.5 pt. This allows more accurate
>>  sizing on non-standard screen sizes (e.g. my home machine has a 90dpi
>>  1650x1024 display whereas standard X11 fonts are set up for 75 or 100
>>  dpi).
>>
>>  Full support for UTF-8, so on systems with suitable fonts you can plot in
>>  many languages on a single figure (and this will work even in non-UTF-8
>>  locales).  The output should be locale-independent (unlike the current
>>  devices where even English text is rendered slightly differently in
>>  Latin-1 and UTF-8 locales).
>>
>>  A utility function savePlot() to make a PNG/JPEG/TIFF copy of the current
>>  plot.
>>
>>  The new png() and jpeg() devices do not require an X server to be running.
>>
>>  Cons:
>>
>>  Needs more software installed - cairo, pango and support packages (which
>>  on all the systems we have looked at are pulled in by the packages checked
>>  for).  You will see something like
>>
>>    Additional capabilities:   PNG, JPEG, iconv, MBCS, NLS, cairo
>>                                                            ^^^^^
>>  if configure finds the software we are looking for.
>>
>>  Slower under some circumstances (although on the test systems much faster
>>  than packages Cairo and cairoDevice).  This will be particularly true for
>>  X11() with a slow connection between the machine running R and the X
>>  server.
>>
>>  The additional software might not work correctly.
>>
>>
>>  The new versions are not currently the default, but can be made so by
>>  setting X11.options(type="Cairo"), e.g. as a load hook for package
>>  grDevices.  I am using
>>
>>  setHook(packageEvent("grDevices", "onLoad"),
>>      function(...) {
>>          grDevices::ps.options(horizontal=FALSE)
>>          if(getRversion() >= '2.7.0') grDevices::X11.options(type="Cairo")
>>      })
>>
>>
>>  Please try these out and let us know how you get on.  As a check, try the
>>  TestChars() examples in ?points - on one Solaris 10 system a few of the
>>  symbol font characters were incorrect.  It worked on an FC5 system with
>>
>>  auk% pkg-config --modversion pango
>>  1.12.4
>>  auk% pkg-config --modversion cairo
>>  1.0.4
>>
>>  so the versions required are not all recent.
>>
>>  Although these devices would in principle work on Mac OS X, neither cairo
>>  nor pango is readily available.  We are working on other versions for
>>  Mac OS (X11 based on cairo/freetype, png/jpeg based on Quartz).
>>
>>  There are also new svg() and tiff() devices.
>>
>>  --
>>  Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>  Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>  University of Oxford,             Tel:  +44 1865 272861 (self)
>>  1 South Parks Road,                     +44 1865 272866 (PA)
>>  Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>
>>  ______________________________________________
>>  R-devel at r-project.org mailing list
>>  https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
>
>
> --
> Roger D. Peng  |  http://www.biostat.jhsph.edu/~rpeng/
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Mon Feb 25 20:10:07 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 25 Feb 2008 19:10:07 +0000 (GMT)
Subject: [Rd] r44608 fails make check-all in scatter.smooth example
In-Reply-To: <1203963305.2432.25.camel@prometheus.geog.ucl.ac.uk>
References: <1203963305.2432.25.camel@prometheus.geog.ucl.ac.uk>
Message-ID: <alpine.LFD.1.00.0802251844340.1885@gannet.stats.ox.ac.uk>

The cause is this:

r44607 | maechler | 2008-02-25 14:01:52 +0000 (Mon, 25 Feb 2008) | 2 lines

add Fortran type declarations in two cases, mainly for didactical reasons

The two declarations have been interchanged.  Fixed in 44609, I hope.


On Mon, 25 Feb 2008, Gavin Simpson wrote:

> Dear List,
>
> Having had my appetite sufficiently whetted by Prof. Ripley's email
> about the new graphics capabilities in Unixes, I wanted to try them out.
> I updated to svn r44608, configured with the following options:
>
> R is now configured for x86_64-unknown-linux-gnu
>
>  Source directory:          ..
>  Installation directory:    /usr/local
>
>  C compiler:                gcc  -O3 -g -std=gnu99 -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
>  Fortran 77 compiler:       gfortran  -O3 -g -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
>
>  C++ compiler:              g++  -O3 -g -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
>  Fortran 90/95 compiler:    gfortran -O3 -g -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
>  Obj-C compiler:            gcc -g -O2
>
>  Interfaces supported:      X11, tcltk
>  External libraries:        readline
>  Additional capabilities:   PNG, JPEG, iconv, MBCS, NLS, cairo
>  Options enabled:           shared BLAS, R profiling, Java
>
>  Recommended packages:      yes
>
> R compiled OK, but make check-all fails running the scatter.smooth example:
>
> running code in 'stats-Ex.R' ...make[4]: *** [stats-Ex.Rout] Error 1
> make[4]: Leaving directory `/home/gavin/R/devel/build/tests/Examples'
> make[3]: *** [test-Examples-Base] Error 2
> make[3]: Leaving directory `/home/gavin/R/devel/build/tests/Examples'
> make[2]: *** [test-Examples] Error 2
> make[2]: Leaving directory `/home/gavin/R/devel/build/tests'
> make[1]: *** [test-all-basics] Error 1
> make[1]: Leaving directory `/home/gavin/R/devel/build/tests'
> make: *** [check-all] Error 2
>
> And the Rout file contains this at the failure:
>
> $ tail -n 20 tests/Examples/stats-Ex.Rout.fail
>>
>> cleanEx(); nameEx("scatter.smooth")
>> ### * scatter.smooth
>>
>> flush(stderr()); flush(stdout())
>>
>> ### Name: scatter.smooth
>> ### Title: Scatter Plot with Smooth Curve Fitted by Loess
>> ### Aliases: scatter.smooth loess.smooth
>> ### Keywords: smooth
>>
>> ### ** Examples
>>
>> require(graphics)
>>
>> with(cars, scatter.smooth(speed, dist))
> Error in .Fortran(R_lowesw, as.double(fitted.residuals), as.integer(N),  :
>  Incorrect number of arguments (4), expecting 7 for lowesw
> Calls: with ... scatter.smooth -> loess.smooth -> simpleLoess -> .Fortran
> Execution halted
>
> This is on Fedora 8.
>
> Plots on the new X11() device look very nice though!
>
> Cheers,
>
> G
> --
> %~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
> Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
> ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
> Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
> Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
> UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
> %~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From vogranovich at jumptrading.com  Mon Feb 25 20:17:14 2008
From: vogranovich at jumptrading.com (Vadim Organovich)
Date: Mon, 25 Feb 2008 13:17:14 -0600
Subject: [Rd] how to write dput-able objects
In-Reply-To: <971536df0802251016x6c879761wa6f1cb3d5a5b75ee@mail.gmail.com>
References: <22D850BC39A25742977325ADDE208E7702669562ED@chiexchange02.w2k.jumptrading.com>,
	<971536df0802251016x6c879761wa6f1cb3d5a5b75ee@mail.gmail.com>
Message-ID: <22D850BC39A25742977325ADDE208E7702669562EE@chiexchange02.w2k.jumptrading.com>

Thank you Gabor! This is very close indeed to what I need. If dput() were generic one could code dput.proto() and that would be it.

Anyway, it is so close to what I need that I should be able to hack someting to make it work for my purposes. Thanks again!

Vadim

________________________________________
From: Gabor Grothendieck [ggrothendieck at gmail.com]
Sent: Monday, February 25, 2008 12:16 PM
To: Vadim Organovich
Cc: r-devel at r-project.org
Subject: Re: [Rd] how to write dput-able objects

You might want to look at the proto package.  proto objects won't
immediately dput either but it would not be hard to convert them to
restorable character strings because the proto methods normally
have their object as their parent environment so its implicit in the
definition.  First define a proto object p with one variable 'a' and one
method 'f' and a child object, q, whose 'a' component overrides the
'a' in its parent.

> library(proto)
> p <- proto(a=1, f = function(.) .$a <- .$a + 1)
> q <- p$proto(a = 2)
> p$as.list()
$a
[1] 1

$f
function(.) .$a <- .$a + 1
<environment: 0x01d6e284>

> name.proto(p)
[1] "p"
> name.proto(p$parent.env())
[1] "R_GlobalEnv"
> q$as.list()
$a
[1] 2

> name.proto(q)
[1] "q"
> name.proto(q$parent.env())
[1] "p"

Note that the strings above have everything
you would need to restore them.  We don't
need the environment since we already know that
f's environment must be p as it belongs to p.

On Mon, Feb 25, 2008 at 12:47 PM, Vadim Organovich
<vogranovich at jumptrading.com> wrote:
> Hi,
>
> One way of doing object-oriented programming in R is to use function environment to hold object's data, see for example
> @Article{Rnews:Chambers+Lang:2001a,
>  author       = {John M. Chambers and Duncan Temple Lang},
>  title        = {Object-Oriented Programming in {R}},
>  journal      = {R News},
>  year        = 2001,
>  volume       = 1,
>  number       = 3,
>  pages        = {17--19},
>  month        = {September},
>  url        = http,
>  pdf        = Rnews2001-3
> }
>
> One deficiency of this approach is that dput() does not export all data pertained to the object. For example
>
> > objfactory <- function(nm) {
> +   list(name = function() nm)
> + }
> >
> >
> > obj <- objfactory('foo')
> >
> > obj$name()
> [1] "foo"
> > dput(obj)
> structure(list(name = function ()
> nm), .Names = "name")
> As one can see the data piece of the obj, nm='foo', is not exported. Is there a way to modify the original approach so that dput() will produce a self-sufficient dump of the object?
>
> Thanks,
> Vadim
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ggrothendieck at gmail.com  Mon Feb 25 20:58:36 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 25 Feb 2008 14:58:36 -0500
Subject: [Rd] how to write dput-able objects
In-Reply-To: <22D850BC39A25742977325ADDE208E7702669562EE@chiexchange02.w2k.jumptrading.com>
References: <22D850BC39A25742977325ADDE208E7702669562ED@chiexchange02.w2k.jumptrading.com>
	<971536df0802251016x6c879761wa6f1cb3d5a5b75ee@mail.gmail.com>
	<22D850BC39A25742977325ADDE208E7702669562EE@chiexchange02.w2k.jumptrading.com>
Message-ID: <971536df0802251158h9c70240xb2b0b8120b933d6e@mail.gmail.com>

Try something like this.  If ..Name exists in the proto object
it uses that as the name; otherwise, it uses the name.proto()
heuristic to find the name.

library(proto)
dput.proto <- function(x, ...) {
    y <- as.list(x, all = TRUE)
    if (!exists("..Name", x)) y$..Name <- name.proto(x, parent.frame())
    y$.parent.Name <- name.proto(parent.env(x), parent.frame())
    dput(y, ...)
}
p <- proto(a = 1, f = function(.) { .$a <- .$a + 1})
q <- p$proto(a = 2)
dput.proto(p)
dput.proto(q)

Output:

> library(proto)
> p <- proto(a = 1, f = function(.) { .$a <- .$a + 1})
> q <- p$proto(a = 2)
> dput.proto(p)
structure(list(.super = <environment>, .that = <environment>,
    a = 1, f = function (.)
    {
        .$a <- .$a + 1
    }, ..Name = "p", .parent.Name = "R_GlobalEnv"), .Names = c(".super",
".that", "a", "f", "..Name", ".parent.Name"))
> dput.proto(q)
structure(list(.super = <environment>, .that = <environment>,
    a = 2, ..Name = "q", .parent.Name = "p"), .Names = c(".super",
".that", "a", "..Name", ".parent.Name"))



On Mon, Feb 25, 2008 at 2:17 PM, Vadim Organovich
<vogranovich at jumptrading.com> wrote:
> Thank you Gabor! This is very close indeed to what I need. If dput() were generic one could code dput.proto() and that would be it.
>
> Anyway, it is so close to what I need that I should be able to hack someting to make it work for my purposes. Thanks again!
>
> Vadim
>
> ________________________________________
> From: Gabor Grothendieck [ggrothendieck at gmail.com]
> Sent: Monday, February 25, 2008 12:16 PM
> To: Vadim Organovich
> Cc: r-devel at r-project.org
> Subject: Re: [Rd] how to write dput-able objects
>
>
> You might want to look at the proto package.  proto objects won't
> immediately dput either but it would not be hard to convert them to
> restorable character strings because the proto methods normally
> have their object as their parent environment so its implicit in the
> definition.  First define a proto object p with one variable 'a' and one
> method 'f' and a child object, q, whose 'a' component overrides the
> 'a' in its parent.
>
> > library(proto)
> > p <- proto(a=1, f = function(.) .$a <- .$a + 1)
> > q <- p$proto(a = 2)
> > p$as.list()
> $a
> [1] 1
>
> $f
> function(.) .$a <- .$a + 1
> <environment: 0x01d6e284>
>
> > name.proto(p)
> [1] "p"
> > name.proto(p$parent.env())
> [1] "R_GlobalEnv"
> > q$as.list()
> $a
> [1] 2
>
> > name.proto(q)
> [1] "q"
> > name.proto(q$parent.env())
> [1] "p"
>
> Note that the strings above have everything
> you would need to restore them.  We don't
> need the environment since we already know that
> f's environment must be p as it belongs to p.
>
> On Mon, Feb 25, 2008 at 12:47 PM, Vadim Organovich
> <vogranovich at jumptrading.com> wrote:
> > Hi,
> >
> > One way of doing object-oriented programming in R is to use function environment to hold object's data, see for example
> > @Article{Rnews:Chambers+Lang:2001a,
> >  author       = {John M. Chambers and Duncan Temple Lang},
> >  title        = {Object-Oriented Programming in {R}},
> >  journal      = {R News},
> >  year        = 2001,
> >  volume       = 1,
> >  number       = 3,
> >  pages        = {17--19},
> >  month        = {September},
> >  url        = http,
> >  pdf        = Rnews2001-3
> > }
> >
> > One deficiency of this approach is that dput() does not export all data pertained to the object. For example
> >
> > > objfactory <- function(nm) {
> > +   list(name = function() nm)
> > + }
> > >
> > >
> > > obj <- objfactory('foo')
> > >
> > > obj$name()
> > [1] "foo"
> > > dput(obj)
> > structure(list(name = function ()
> > nm), .Names = "name")
> > As one can see the data piece of the obj, nm='foo', is not exported. Is there a way to modify the original approach so that dput() will produce a self-sufficient dump of the object?
> >
> > Thanks,
> > Vadim
> >
> >        [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ripley at stats.ox.ac.uk  Mon Feb 25 22:06:00 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 25 Feb 2008 21:06:00 +0000 (GMT)
Subject: [Rd] Clipping using par(plt=..., xpd=FALSE) inconsistencies
In-Reply-To: <Pine.LNX.4.64.0802222050040.11702@auk.stats>
References: <07E228A5BE53C24CAD490193A7381BBBEE1114@LP-EXCHVS07.CO.IHC.COM>
	<Pine.LNX.4.64.0802222050040.11702@auk.stats>
Message-ID: <alpine.LFD.1.00.0802252103290.18007@gannet.stats.ox.ac.uk>

The following works in R-devel

      x <- rnorm(1000)
      hist(x, xlim=c(-4,4))
      usr <- par("usr")
      clip(usr[1], -2, usr[3], usr[4])
      hist(x, col = 'red', add = TRUE)
      clip(2, usr[2], usr[3], usr[4])
      hist(x, col = 'blue', add = TRUE)
      do.call("clip", as.list(usr))  # reset to plot region

I think that is a general enough mechanism -- see its help page for how 
long one can expect a clipping region to persist.

On Fri, 22 Feb 2008, Prof Brian Ripley wrote:

> I think you misunderstand what par("plt") is supposed to do.  The 
> documentation says
>
>     'plt' A vector of the form 'c(x1, x2, y1, y2)' giving the
>          coordinates of the plot region as fractions of the current
>          figure region.
>
> You haven't subsequently made a new plot, so why do you expect the clipping 
> region to be changed to that you indicated for the next plot?
>
> I'd say the bug was that box() changed it, and that happens because it 
> internally sets xpd and so resetting xpd sets the clipping region next time 
> it is used.  Because of
>
> void GClip(pGEDevDesc dd)
> {
>    if (gpptr(dd)->xpd != gpptr(dd)->oldxpd) {
> 	double x1, y1, x2, y2;
> 	setClipRect(&x1, &y1, &x2, &y2, DEVICE, dd);
> 	GESetClip(x1, y1, x2, y2, dd);
> 	gpptr(dd)->oldxpd = gpptr(dd)->xpd;
>    }
> }
>
> Maybe we should have user-level code to set the clipping region?
>
>
> On Fri, 22 Feb 2008, Greg Snow wrote:
>
>> Here is a demonstration of behaviour that is probably an optimization by
>> someone far smarter than me that did not anticipate anyone wanting to do
>> this, but for my purposes it looks more like a bug than a feature.
>> 
>> I have tested this with R2.6.2 on Windows, no additional packages loaded
>> (beyond the default), I have tested using the default graphics object,
>> pdf, jpeg, and cairoDevice (ok I loaded a package for that) and all show
>> the same behavior.
>> 
>> Run the following set of commands:
>> 
>> x <- rnorm(1000)
>> hist(x, xlim=c(-4,4))
>> 
>> tmp <- par('plt')
>> 
>> box(col='#00000000')
>> tmp2 <- tmp
>> tmp2[2] <- tmp2[1] + 0.3
>> par(xpd = FALSE, plt=tmp2)
>> hist(x, col='red', add=TRUE)
>> 
>> box(col='#00000000')
>> tmp3 <- tmp
>> tmp3[1] <- tmp3[2] - 0.3
>> par(xpd=FALSE, plt=tmp3)
>> hist(x, col='blue', add=TRUE)
>> par(plt=tmp)
>> 
>> 
>> This gives me the plot that I want and expect (a histogram with the left
>> section red, the middle white/background, and the right blue).
>> 
>> Now comment out or delete the 2 box commands and rerun everything.  The
>> clipping does not happen this time and the final result is a full blue
>> histogram.
>> 
>> Is this a bug? Feature? Something else?
>> Does anyone have a better work around than drawing transparent boxes?
>> 
>> Thanks,
>> 
>> 
>> 
>> 
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From gavin.simpson at ucl.ac.uk  Mon Feb 25 22:17:26 2008
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Mon, 25 Feb 2008 21:17:26 +0000
Subject: [Rd] r44608 fails make check-all in scatter.smooth example
In-Reply-To: <alpine.LFD.1.00.0802251844340.1885@gannet.stats.ox.ac.uk>
References: <1203963305.2432.25.camel@prometheus.geog.ucl.ac.uk>
	<alpine.LFD.1.00.0802251844340.1885@gannet.stats.ox.ac.uk>
Message-ID: <1203974246.3169.0.camel@localhost.localdomain>

On Mon, 2008-02-25 at 19:10 +0000, Prof Brian Ripley wrote:
> The cause is this:
> 
> r44607 | maechler | 2008-02-25 14:01:52 +0000 (Mon, 25 Feb 2008) | 2 lines
> 
> add Fortran type declarations in two cases, mainly for didactical reasons
> 
> The two declarations have been interchanged.  Fixed in 44609, I hope.

Dear Prof. Ripley,

Yep, works for me.

Cheers,

Gavin

> 
> 
> On Mon, 25 Feb 2008, Gavin Simpson wrote:
> 
> > Dear List,
> >
> > Having had my appetite sufficiently whetted by Prof. Ripley's email
> > about the new graphics capabilities in Unixes, I wanted to try them out.
> > I updated to svn r44608, configured with the following options:
> >
> > R is now configured for x86_64-unknown-linux-gnu
> >
> >  Source directory:          ..
> >  Installation directory:    /usr/local
> >
> >  C compiler:                gcc  -O3 -g -std=gnu99 -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
> >  Fortran 77 compiler:       gfortran  -O3 -g -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
> >
> >  C++ compiler:              g++  -O3 -g -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
> >  Fortran 90/95 compiler:    gfortran -O3 -g -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
> >  Obj-C compiler:            gcc -g -O2
> >
> >  Interfaces supported:      X11, tcltk
> >  External libraries:        readline
> >  Additional capabilities:   PNG, JPEG, iconv, MBCS, NLS, cairo
> >  Options enabled:           shared BLAS, R profiling, Java
> >
> >  Recommended packages:      yes
> >
> > R compiled OK, but make check-all fails running the scatter.smooth example:
> >
> > running code in 'stats-Ex.R' ...make[4]: *** [stats-Ex.Rout] Error 1
> > make[4]: Leaving directory `/home/gavin/R/devel/build/tests/Examples'
> > make[3]: *** [test-Examples-Base] Error 2
> > make[3]: Leaving directory `/home/gavin/R/devel/build/tests/Examples'
> > make[2]: *** [test-Examples] Error 2
> > make[2]: Leaving directory `/home/gavin/R/devel/build/tests'
> > make[1]: *** [test-all-basics] Error 1
> > make[1]: Leaving directory `/home/gavin/R/devel/build/tests'
> > make: *** [check-all] Error 2
> >
> > And the Rout file contains this at the failure:
> >
> > $ tail -n 20 tests/Examples/stats-Ex.Rout.fail
> >>
> >> cleanEx(); nameEx("scatter.smooth")
> >> ### * scatter.smooth
> >>
> >> flush(stderr()); flush(stdout())
> >>
> >> ### Name: scatter.smooth
> >> ### Title: Scatter Plot with Smooth Curve Fitted by Loess
> >> ### Aliases: scatter.smooth loess.smooth
> >> ### Keywords: smooth
> >>
> >> ### ** Examples
> >>
> >> require(graphics)
> >>
> >> with(cars, scatter.smooth(speed, dist))
> > Error in .Fortran(R_lowesw, as.double(fitted.residuals), as.integer(N),  :
> >  Incorrect number of arguments (4), expecting 7 for lowesw
> > Calls: with ... scatter.smooth -> loess.smooth -> simpleLoess -> .Fortran
> > Execution halted
> >
> > This is on Fedora 8.
> >
> > Plots on the new X11() device look very nice though!
> >
> > Cheers,
> >
> > G
> > --
> > %~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
> > Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
> > ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
> > Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
> > Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
> > UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
> > %~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> 
-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
 Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
 ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
 Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
 Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
 UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From p.dalgaard at biostat.ku.dk  Mon Feb 25 23:48:17 2008
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Mon, 25 Feb 2008 23:48:17 +0100
Subject: [Rd] r44608 fails make check-all in scatter.smooth example
In-Reply-To: <1203974246.3169.0.camel@localhost.localdomain>
References: <1203963305.2432.25.camel@prometheus.geog.ucl.ac.uk>	<alpine.LFD.1.00.0802251844340.1885@gannet.stats.ox.ac.uk>
	<1203974246.3169.0.camel@localhost.localdomain>
Message-ID: <47C345B1.3080009@biostat.ku.dk>

Gavin Simpson wrote:
> On Mon, 2008-02-25 at 19:10 +0000, Prof Brian Ripley wrote:
>   
>> The cause is this:
>>
>> r44607 | maechler | 2008-02-25 14:01:52 +0000 (Mon, 25 Feb 2008) | 2 lines
>>
>> add Fortran type declarations in two cases, mainly for didactical reasons
>>
>> The two declarations have been interchanged.  Fixed in 44609, I hope.
>>     
>
> Dear Prof. Ripley,
>
> Yep, works for me
Me too, also F8 but i386, and SUSE (10.2) x86_64 as well.

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From mflawren at fhcrc.org  Tue Feb 26 02:36:01 2008
From: mflawren at fhcrc.org (Michael Lawrence)
Date: Mon, 25 Feb 2008 19:36:01 -0600
Subject: [Rd] New version of X11, png and jpeg
In-Reply-To: <alpine.LFD.1.00.0802201933470.25534@gannet.stats.ox.ac.uk>
References: <alpine.LFD.1.00.0802201933470.25534@gannet.stats.ox.ac.uk>
Message-ID: <509e0620802251736q6427b796ycdc4068d1d849b5a@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080225/7563de7a/attachment.pl 

From ripley at stats.ox.ac.uk  Tue Feb 26 08:00:47 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 26 Feb 2008 07:00:47 +0000 (GMT)
Subject: [Rd] New version of X11, png and jpeg
In-Reply-To: <509e0620802251736q6427b796ycdc4068d1d849b5a@mail.gmail.com>
References: <alpine.LFD.1.00.0802201933470.25534@gannet.stats.ox.ac.uk>
	<509e0620802251736q6427b796ycdc4068d1d849b5a@mail.gmail.com>
Message-ID: <alpine.LFD.1.00.0802260624460.22361@gannet.stats.ox.ac.uk>

Michael,

> Would it be at all feasible to make the cairo backend available on
> all platforms and have it provide a public API through which an
> arbitrary cairo context could be passed as the drawing target?

Offering an API is something I have considered for the TODO for 2.8.0. 
However, we are at the stage of finding out how widely this can be got to 
work and how well it works.

Simon and I are working on MacOS X, and should have this working via a 
static cairo build (without pango) shortly.  I don't think cairo on 
Windows works well enough: e.g. your Cairo() device has more than half the 
glyphs missing in the symbol font.

Brian


On Mon, 25 Feb 2008, Michael Lawrence wrote:

> On Mon, Feb 25, 2008 at 10:56 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
> wrote:
>
>> R-devel has new versions of the X11(), png() and jpeg() devices on
>> Unix-alikes.  The intention is that these are used identically to the
>> previous versions (which remain available) but will produce higher-quality
>> output with more features.
>>
>> Pros:
>>
>> Antialiasing of text and lines (can be turned off) but no blurring of
>> fills.
>>
>> Buffering of the X11 display and fast repainting from a backing image.
>> (The intention is to emulate the timer-based buffering of the windows()
>> device in due course, but not for 2.7.0.)
>>
>> Ability to use translucent colours, including backgrounds, and produce
>> partially transparent PNG files.
>>
>> Scalable text, including to sizes like 4.5 pt. This allows more accurate
>> sizing on non-standard screen sizes (e.g. my home machine has a 90dpi
>> 1650x1024 display whereas standard X11 fonts are set up for 75 or 100
>> dpi).
>>
>> Full support for UTF-8, so on systems with suitable fonts you can plot in
>> many languages on a single figure (and this will work even in non-UTF-8
>> locales).  The output should be locale-independent (unlike the current
>> devices where even English text is rendered slightly differently in
>> Latin-1 and UTF-8 locales).
>>
>> A utility function savePlot() to make a PNG/JPEG/TIFF copy of the current
>> plot.
>>
>> The new png() and jpeg() devices do not require an X server to be running.
>>
>> Cons:
>>
>> Needs more software installed - cairo, pango and support packages
>
>
> Would it be at all feasible to make the cairo backend available on all
> platforms and have it provide a public API through which an arbitrary cairo
> context could be passed as the drawing target? That would allow e.g.
> cairoDevice to be a much simpler module that draws the cairo context to a
> GTK+ window and manages the window and events. In that case, it would need
> to be renamed to 'gtkDevice2' or something.
>
> Michael
>
> (which
>> on all the systems we have looked at are pulled in by the packages checked
>> for).  You will see something like
>>
>>   Additional capabilities:   PNG, JPEG, iconv, MBCS, NLS, cairo
>>                                                           ^^^^^
>> if configure finds the software we are looking for.
>>
>> Slower under some circumstances (although on the test systems much faster
>> than packages Cairo and cairoDevice).  This will be particularly true for
>> X11() with a slow connection between the machine running R and the X
>> server.
>>
>> The additional software might not work correctly.
>>
>>
>> The new versions are not currently the default, but can be made so by
>> setting X11.options(type="Cairo"), e.g. as a load hook for package
>> grDevices.  I am using
>>
>> setHook(packageEvent("grDevices", "onLoad"),
>>     function(...) {
>>         grDevices::ps.options(horizontal=FALSE)
>>         if(getRversion() >= '2.7.0') grDevices::X11.options(type="Cairo")
>>     })
>>
>>
>> Please try these out and let us know how you get on.  As a check, try the
>> TestChars() examples in ?points - on one Solaris 10 system a few of the
>> symbol font characters were incorrect.  It worked on an FC5 system with
>>
>> auk% pkg-config --modversion pango
>> 1.12.4
>> auk% pkg-config --modversion cairo
>> 1.0.4
>>
>> so the versions required are not all recent.
>>
>> Although these devices would in principle work on Mac OS X, neither cairo
>> nor pango is readily available.  We are working on other versions for
>> Mac OS (X11 based on cairo/freetype, png/jpeg based on Quartz).
>>
>> There are also new svg() and tiff() devices.
>>
>> --
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/<http://www.stats.ox.ac.uk/%7Eripley/>
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jombart at biomserv.univ-lyon1.fr  Tue Feb 26 10:07:04 2008
From: jombart at biomserv.univ-lyon1.fr (Thibaut Jombart)
Date: Tue, 26 Feb 2008 10:07:04 +0100
Subject: [Rd] Standard method for S4 object
In-Reply-To: <47C3066B.8030804@ebi.ac.uk>
References: <47C06F0A.4090505@u-paris10.fr>
	<uy79957by.fsf@insightful.com>	<47C2F422.6040608@ebi.ac.uk>
	<uve4c6hor.fsf@insightful.com> <47C3066B.8030804@ebi.ac.uk>
Message-ID: <47C3D6B8.7040603@biomserv.univ-lyon1.fr>

Oleg Sklyar wrote:
> similar. S3 gives more freedom in assigning new attributes, but this 
> freedom also means that one has little control over the structure of an 
> object making it, for example, more difficult to use with C/C++ code. 
> Are there any specific benefits in not using S4 and slots (apart from 
> some known performance issues)?
>   
One could say there are, but not enough to make S3 prevail over S4. I am 
not sure performance issues matter that much, but debugging functions 
seems much easier to me with S3 methods. Plus, documenting objects and 
accessing documentation can be a pain with S4 (see my previous post 
about using example() 
[http://tolstoy.newcastle.edu.au/R/e3/devel/07/12/0801.html] ... still 
no answer).

Best,

Thibaut.
<http://adegenet.r-forge.r-project.org/>


From ripley at stats.ox.ac.uk  Tue Feb 26 15:18:26 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 26 Feb 2008 14:18:26 +0000 (GMT)
Subject: [Rd] New version of X11, png and jpeg
In-Reply-To: <alpine.LFD.1.00.0802251858380.1885@gannet.stats.ox.ac.uk>
References: <alpine.LFD.1.00.0802201933470.25534@gannet.stats.ox.ac.uk>
	<66f3bd910802251055m818e1c2kb0056e729b8e5a11@mail.gmail.com>
	<alpine.LFD.1.00.0802251858380.1885@gannet.stats.ox.ac.uk>
Message-ID: <alpine.LFD.1.00.0802261318300.29214@gannet.stats.ox.ac.uk>

Revision r44621 supports (in a limited way) cairo 1.0 and hence I believe 
vanilla FC5 -- I found what purports to be a vanilla FC5 box and it works 
quite well there.

Two people have reported that the svg(), cairo-pdf() and cairo-ps() 
devices produce blank (but not empty) files.  I was able to confirm that 
on Debian etch (cairo 1.2.4).  They do work on cairo 1.4.14 (F8) and 
better on a 1.5.10 snapshot.

We've got a working version on Mac OS X, but you need to install cairo.

Finally, the quality of the fonts you see will depend on what fonts you 
have installed: if you only have X11 bitmapped fonts, that is what you 
will get (and I am getting on our minimally configured Debian etch 
machine).  Our Fedora installations are mainly using the URW Type 1 fonts 
in the urw-fonts RPM.  One of the alternatives is RH's liberation fonts 
(https://www.redhat.com/promo/fonts/).

On Mon, 25 Feb 2008, Prof Brian Ripley wrote:

> That call is from Cairo 1.2, so looks like our test FC5 box had a later 
> version of the cairo libraries than the one pkg-config reported.
>
> You should be able to build with --without-cairo until such a time as we can 
> add a suitable configure test.
>
> Thank you for the report.
>
> On Mon, 25 Feb 2008, Roger Peng wrote:
>
>> (Apologies, I meant to 'Reply to all' the first time but forgot).
>> 
>> I built r44608 of R-devel with (I think) cairo support.   At least,
>> that's what the configure script told me.  In addition,
>> 'capabilities("cairo")' is TRUE.  Calling X11(type = "Cairo") gives me
>> the error:
>> 
>> Error in X11() : X11 module cannot be loaded
>> In addition: Warning message:
>> In X11() :
>> unable to load shared library
>> '/home/rpeng/install/R-devel/lib64/R/modules//R_X11.so':
>> /home/rpeng/install/R-devel/lib64/R/modules//R_X11.so: undefined
>> symbol: cairo_image_surface_get_data
>> 
>> 
>> I figured I must be missing a library somewhere, but I'm not sure how
>> to track down which one.  Any thoughts here?
>> 
>> I'm on a FC5 system with:
>> 
>> cairo-devel-1.0.4-1
>> cairo-1.0.4-1
>> cairo-1.0.4-1
>> 
>> and
>> 
>> pango-1.12.4-4
>> pango-devel-1.12.4-4
>> pango-1.12.4-4
>> 
>> Also, I have
>> 
>> [rpeng at audrey R-source]$ pkg-config --modversion pango
>> 1.12.4
>> [rpeng at audrey R-source]$ pkg-config --modversion cairo
>> 1.0.4
>> 
>> -roger
>> 
>> On Mon, Feb 25, 2008 at 11:56 AM, Prof Brian Ripley
>> <ripley at stats.ox.ac.uk> wrote:
>>> R-devel has new versions of the X11(), png() and jpeg() devices on
>>>  Unix-alikes.  The intention is that these are used identically to the
>>>  previous versions (which remain available) but will produce 
>>> higher-quality
>>>  output with more features.
>>>
>>>  Pros:
>>>
>>>  Antialiasing of text and lines (can be turned off) but no blurring of
>>>  fills.
>>>
>>>  Buffering of the X11 display and fast repainting from a backing image.
>>>  (The intention is to emulate the timer-based buffering of the windows()
>>>  device in due course, but not for 2.7.0.)
>>>
>>>  Ability to use translucent colours, including backgrounds, and produce
>>>  partially transparent PNG files.
>>>
>>>  Scalable text, including to sizes like 4.5 pt. This allows more accurate
>>>  sizing on non-standard screen sizes (e.g. my home machine has a 90dpi
>>>  1650x1024 display whereas standard X11 fonts are set up for 75 or 100
>>>  dpi).
>>>
>>>  Full support for UTF-8, so on systems with suitable fonts you can plot in
>>>  many languages on a single figure (and this will work even in non-UTF-8
>>>  locales).  The output should be locale-independent (unlike the current
>>>  devices where even English text is rendered slightly differently in
>>>  Latin-1 and UTF-8 locales).
>>>
>>>  A utility function savePlot() to make a PNG/JPEG/TIFF copy of the current
>>>  plot.
>>>
>>>  The new png() and jpeg() devices do not require an X server to be 
>>> running.
>>>
>>>  Cons:
>>>
>>>  Needs more software installed - cairo, pango and support packages (which
>>>  on all the systems we have looked at are pulled in by the packages 
>>> checked
>>>  for).  You will see something like
>>>
>>>    Additional capabilities:   PNG, JPEG, iconv, MBCS, NLS, cairo
>>>                                                            ^^^^^
>>>  if configure finds the software we are looking for.
>>>
>>>  Slower under some circumstances (although on the test systems much faster
>>>  than packages Cairo and cairoDevice).  This will be particularly true for
>>>  X11() with a slow connection between the machine running R and the X
>>>  server.
>>>
>>>  The additional software might not work correctly.
>>> 
>>>
>>>  The new versions are not currently the default, but can be made so by
>>>  setting X11.options(type="Cairo"), e.g. as a load hook for package
>>>  grDevices.  I am using
>>>
>>>  setHook(packageEvent("grDevices", "onLoad"),
>>>      function(...) {
>>>          grDevices::ps.options(horizontal=FALSE)
>>>          if(getRversion() >= '2.7.0') grDevices::X11.options(type="Cairo")
>>>      })
>>> 
>>>
>>>  Please try these out and let us know how you get on.  As a check, try the
>>>  TestChars() examples in ?points - on one Solaris 10 system a few of the
>>>  symbol font characters were incorrect.  It worked on an FC5 system with
>>>
>>>  auk% pkg-config --modversion pango
>>>  1.12.4
>>>  auk% pkg-config --modversion cairo
>>>  1.0.4
>>>
>>>  so the versions required are not all recent.
>>>
>>>  Although these devices would in principle work on Mac OS X, neither cairo
>>>  nor pango is readily available.  We are working on other versions for
>>>  Mac OS (X11 based on cairo/freetype, png/jpeg based on Quartz).
>>>
>>>  There are also new svg() and tiff() devices.
>>>
>>>  --
>>>  Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>>  Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>>  University of Oxford,             Tel:  +44 1865 272861 (self)
>>>  1 South Parks Road,                     +44 1865 272866 (PA)
>>>  Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>
>>>  ______________________________________________
>>>  R-devel at r-project.org mailing list
>>>  https://stat.ethz.ch/mailman/listinfo/r-devel
>>> 
>> 
>> 
>> 
>> --
>> Roger D. Peng  |  http://www.biostat.jhsph.edu/~rpeng/
>> 
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From rpeng at jhsph.edu  Tue Feb 26 15:44:18 2008
From: rpeng at jhsph.edu (Roger D. Peng)
Date: Tue, 26 Feb 2008 09:44:18 -0500
Subject: [Rd] New version of X11, png and jpeg
In-Reply-To: <alpine.LFD.1.00.0802261318300.29214@gannet.stats.ox.ac.uk>
References: <alpine.LFD.1.00.0802201933470.25534@gannet.stats.ox.ac.uk>	<66f3bd910802251055m818e1c2kb0056e729b8e5a11@mail.gmail.com>	<alpine.LFD.1.00.0802251858380.1885@gannet.stats.ox.ac.uk>
	<alpine.LFD.1.00.0802261318300.29214@gannet.stats.ox.ac.uk>
Message-ID: <47C425C2.5000002@jhsph.edu>

Thanks, running r44621 works well (on my FC5 box) and I can make various plots 
(I just did some limited testing).

When I run the 'TestChars()' example in 'points' I get many warnings of the form:

1: In plot.xy(xy.coords(x, y), type = type, ...) :
   pch value '128' is invalid in this locale
2: In plot.xy(xy.coords(x, y), type = type, ...) :
   pch value '129' is invalid in this locale
3: In plot.xy(xy.coords(x, y), type = type, ...) :
   pch value '130' is invalid in this locale

The warnings go until

49: In plot.xy(xy.coords(x, y), type = type, ...) :
   pch value '176' is invalid in this locale
50: In plot.xy(xy.coords(x, y), type = type, ...) :
   pch value '177' is invalid in this locale

after which I think the warnings are not saved.  Given the note in 'points' I 
sense this is expected?

TestChars(sign = -1) and TestChars(font = 5) do not give any warnings but some 
odd looking characters do appear on the device.

Here is my sessionInfo:

 > sessionInfo()
R version 2.7.0 Under development (unstable) (--)
x86_64-unknown-linux-gnu

locale:
LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] lattice_0.17-6     RColorBrewer_1.0-2 cacher_0.1-1

loaded via a namespace (and not attached):
[1] digest_0.3.1 grid_2.7.0   tools_2.7.0


-roger

Prof Brian Ripley wrote:
> Revision r44621 supports (in a limited way) cairo 1.0 and hence I believe 
> vanilla FC5 -- I found what purports to be a vanilla FC5 box and it works 
> quite well there.
> 
> Two people have reported that the svg(), cairo-pdf() and cairo-ps() 
> devices produce blank (but not empty) files.  I was able to confirm that 
> on Debian etch (cairo 1.2.4).  They do work on cairo 1.4.14 (F8) and 
> better on a 1.5.10 snapshot.
> 
> We've got a working version on Mac OS X, but you need to install cairo.
> 
> Finally, the quality of the fonts you see will depend on what fonts you 
> have installed: if you only have X11 bitmapped fonts, that is what you 
> will get (and I am getting on our minimally configured Debian etch 
> machine).  Our Fedora installations are mainly using the URW Type 1 fonts 
> in the urw-fonts RPM.  One of the alternatives is RH's liberation fonts 
> (https://www.redhat.com/promo/fonts/).
> 
> On Mon, 25 Feb 2008, Prof Brian Ripley wrote:
> 
>> That call is from Cairo 1.2, so looks like our test FC5 box had a later 
>> version of the cairo libraries than the one pkg-config reported.
>>
>> You should be able to build with --without-cairo until such a time as we can 
>> add a suitable configure test.
>>
>> Thank you for the report.
>>
>> On Mon, 25 Feb 2008, Roger Peng wrote:
>>
>>> (Apologies, I meant to 'Reply to all' the first time but forgot).
>>>
>>> I built r44608 of R-devel with (I think) cairo support.   At least,
>>> that's what the configure script told me.  In addition,
>>> 'capabilities("cairo")' is TRUE.  Calling X11(type = "Cairo") gives me
>>> the error:
>>>
>>> Error in X11() : X11 module cannot be loaded
>>> In addition: Warning message:
>>> In X11() :
>>> unable to load shared library
>>> '/home/rpeng/install/R-devel/lib64/R/modules//R_X11.so':
>>> /home/rpeng/install/R-devel/lib64/R/modules//R_X11.so: undefined
>>> symbol: cairo_image_surface_get_data
>>>
>>>
>>> I figured I must be missing a library somewhere, but I'm not sure how
>>> to track down which one.  Any thoughts here?
>>>
>>> I'm on a FC5 system with:
>>>
>>> cairo-devel-1.0.4-1
>>> cairo-1.0.4-1
>>> cairo-1.0.4-1
>>>
>>> and
>>>
>>> pango-1.12.4-4
>>> pango-devel-1.12.4-4
>>> pango-1.12.4-4
>>>
>>> Also, I have
>>>
>>> [rpeng at audrey R-source]$ pkg-config --modversion pango
>>> 1.12.4
>>> [rpeng at audrey R-source]$ pkg-config --modversion cairo
>>> 1.0.4
>>>
>>> -roger
>>>
>>> On Mon, Feb 25, 2008 at 11:56 AM, Prof Brian Ripley
>>> <ripley at stats.ox.ac.uk> wrote:
>>>> R-devel has new versions of the X11(), png() and jpeg() devices on
>>>>  Unix-alikes.  The intention is that these are used identically to the
>>>>  previous versions (which remain available) but will produce 
>>>> higher-quality
>>>>  output with more features.
>>>>
>>>>  Pros:
>>>>
>>>>  Antialiasing of text and lines (can be turned off) but no blurring of
>>>>  fills.
>>>>
>>>>  Buffering of the X11 display and fast repainting from a backing image.
>>>>  (The intention is to emulate the timer-based buffering of the windows()
>>>>  device in due course, but not for 2.7.0.)
>>>>
>>>>  Ability to use translucent colours, including backgrounds, and produce
>>>>  partially transparent PNG files.
>>>>
>>>>  Scalable text, including to sizes like 4.5 pt. This allows more accurate
>>>>  sizing on non-standard screen sizes (e.g. my home machine has a 90dpi
>>>>  1650x1024 display whereas standard X11 fonts are set up for 75 or 100
>>>>  dpi).
>>>>
>>>>  Full support for UTF-8, so on systems with suitable fonts you can plot in
>>>>  many languages on a single figure (and this will work even in non-UTF-8
>>>>  locales).  The output should be locale-independent (unlike the current
>>>>  devices where even English text is rendered slightly differently in
>>>>  Latin-1 and UTF-8 locales).
>>>>
>>>>  A utility function savePlot() to make a PNG/JPEG/TIFF copy of the current
>>>>  plot.
>>>>
>>>>  The new png() and jpeg() devices do not require an X server to be 
>>>> running.
>>>>
>>>>  Cons:
>>>>
>>>>  Needs more software installed - cairo, pango and support packages (which
>>>>  on all the systems we have looked at are pulled in by the packages 
>>>> checked
>>>>  for).  You will see something like
>>>>
>>>>    Additional capabilities:   PNG, JPEG, iconv, MBCS, NLS, cairo
>>>>                                                            ^^^^^
>>>>  if configure finds the software we are looking for.
>>>>
>>>>  Slower under some circumstances (although on the test systems much faster
>>>>  than packages Cairo and cairoDevice).  This will be particularly true for
>>>>  X11() with a slow connection between the machine running R and the X
>>>>  server.
>>>>
>>>>  The additional software might not work correctly.
>>>>
>>>>
>>>>  The new versions are not currently the default, but can be made so by
>>>>  setting X11.options(type="Cairo"), e.g. as a load hook for package
>>>>  grDevices.  I am using
>>>>
>>>>  setHook(packageEvent("grDevices", "onLoad"),
>>>>      function(...) {
>>>>          grDevices::ps.options(horizontal=FALSE)
>>>>          if(getRversion() >= '2.7.0') grDevices::X11.options(type="Cairo")
>>>>      })
>>>>
>>>>
>>>>  Please try these out and let us know how you get on.  As a check, try the
>>>>  TestChars() examples in ?points - on one Solaris 10 system a few of the
>>>>  symbol font characters were incorrect.  It worked on an FC5 system with
>>>>
>>>>  auk% pkg-config --modversion pango
>>>>  1.12.4
>>>>  auk% pkg-config --modversion cairo
>>>>  1.0.4
>>>>
>>>>  so the versions required are not all recent.
>>>>
>>>>  Although these devices would in principle work on Mac OS X, neither cairo
>>>>  nor pango is readily available.  We are working on other versions for
>>>>  Mac OS (X11 based on cairo/freetype, png/jpeg based on Quartz).
>>>>
>>>>  There are also new svg() and tiff() devices.
>>>>
>>>>  --
>>>>  Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>>>  Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>>>  University of Oxford,             Tel:  +44 1865 272861 (self)
>>>>  1 South Parks Road,                     +44 1865 272866 (PA)
>>>>  Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>>
>>>>  ______________________________________________
>>>>  R-devel at r-project.org mailing list
>>>>  https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>
>>>
>>>
>>> --
>>> Roger D. Peng  |  http://www.biostat.jhsph.edu/~rpeng/
>>>
>> -- 
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>
> 

-- 
Roger D. Peng  |  http://www.biostat.jhsph.edu/~rpeng/


From ripley at stats.ox.ac.uk  Tue Feb 26 15:47:59 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 26 Feb 2008 14:47:59 +0000 (GMT)
Subject: [Rd] New version of X11, png and jpeg
In-Reply-To: <47C425C2.5000002@jhsph.edu>
References: <alpine.LFD.1.00.0802201933470.25534@gannet.stats.ox.ac.uk>
	<66f3bd910802251055m818e1c2kb0056e729b8e5a11@mail.gmail.com>
	<alpine.LFD.1.00.0802251858380.1885@gannet.stats.ox.ac.uk>
	<alpine.LFD.1.00.0802261318300.29214@gannet.stats.ox.ac.uk>
	<47C425C2.5000002@jhsph.edu>
Message-ID: <alpine.LFD.1.00.0802261445400.16674@gannet.stats.ox.ac.uk>

On Tue, 26 Feb 2008, Roger D. Peng wrote:

> Thanks, running r44621 works well (on my FC5 box) and I can make various 
> plots (I just did some limited testing).
>
> When I run the 'TestChars()' example in 'points' I get many warnings of the 
> form:
>
> 1: In plot.xy(xy.coords(x, y), type = type, ...) :
>  pch value '128' is invalid in this locale
> 2: In plot.xy(xy.coords(x, y), type = type, ...) :
>  pch value '129' is invalid in this locale
> 3: In plot.xy(xy.coords(x, y), type = type, ...) :
>  pch value '130' is invalid in this locale
>
> The warnings go until
>
> 49: In plot.xy(xy.coords(x, y), type = type, ...) :
>  pch value '176' is invalid in this locale
> 50: In plot.xy(xy.coords(x, y), type = type, ...) :
>  pch value '177' is invalid in this locale
>
> after which I think the warnings are not saved.  Given the note in 'points' I 
> sense this is expected?

In a UTF_8 locale, yes.  Not in a, say, Latin-1 locale.

> TestChars(sign = -1) and TestChars(font = 5) do not give any warnings but 
> some odd looking characters do appear on the device.
>
> Here is my sessionInfo:
>
>> sessionInfo()
> R version 2.7.0 Under development (unstable) (--)
> x86_64-unknown-linux-gnu
>
> locale:
> LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] lattice_0.17-6     RColorBrewer_1.0-2 cacher_0.1-1
>
> loaded via a namespace (and not attached):
> [1] digest_0.3.1 grid_2.7.0   tools_2.7.0
>
>
> -roger
>
> Prof Brian Ripley wrote:
>> Revision r44621 supports (in a limited way) cairo 1.0 and hence I believe 
>> vanilla FC5 -- I found what purports to be a vanilla FC5 box and it works 
>> quite well there.
>> 
>> Two people have reported that the svg(), cairo-pdf() and cairo-ps() devices 
>> produce blank (but not empty) files.  I was able to confirm that on Debian 
>> etch (cairo 1.2.4).  They do work on cairo 1.4.14 (F8) and better on a 
>> 1.5.10 snapshot.
>> 
>> We've got a working version on Mac OS X, but you need to install cairo.
>> 
>> Finally, the quality of the fonts you see will depend on what fonts you 
>> have installed: if you only have X11 bitmapped fonts, that is what you will 
>> get (and I am getting on our minimally configured Debian etch machine). 
>> Our Fedora installations are mainly using the URW Type 1 fonts in the 
>> urw-fonts RPM.  One of the alternatives is RH's liberation fonts 
>> (https://www.redhat.com/promo/fonts/).
>> 
>> On Mon, 25 Feb 2008, Prof Brian Ripley wrote:
>> 
>>> That call is from Cairo 1.2, so looks like our test FC5 box had a later 
>>> version of the cairo libraries than the one pkg-config reported.
>>> 
>>> You should be able to build with --without-cairo until such a time as we 
>>> can add a suitable configure test.
>>> 
>>> Thank you for the report.
>>> 
>>> On Mon, 25 Feb 2008, Roger Peng wrote:
>>> 
>>>> (Apologies, I meant to 'Reply to all' the first time but forgot).
>>>> 
>>>> I built r44608 of R-devel with (I think) cairo support.   At least,
>>>> that's what the configure script told me.  In addition,
>>>> 'capabilities("cairo")' is TRUE.  Calling X11(type = "Cairo") gives me
>>>> the error:
>>>> 
>>>> Error in X11() : X11 module cannot be loaded
>>>> In addition: Warning message:
>>>> In X11() :
>>>> unable to load shared library
>>>> '/home/rpeng/install/R-devel/lib64/R/modules//R_X11.so':
>>>> /home/rpeng/install/R-devel/lib64/R/modules//R_X11.so: undefined
>>>> symbol: cairo_image_surface_get_data
>>>> 
>>>> 
>>>> I figured I must be missing a library somewhere, but I'm not sure how
>>>> to track down which one.  Any thoughts here?
>>>> 
>>>> I'm on a FC5 system with:
>>>> 
>>>> cairo-devel-1.0.4-1
>>>> cairo-1.0.4-1
>>>> cairo-1.0.4-1
>>>> 
>>>> and
>>>> 
>>>> pango-1.12.4-4
>>>> pango-devel-1.12.4-4
>>>> pango-1.12.4-4
>>>> 
>>>> Also, I have
>>>> 
>>>> [rpeng at audrey R-source]$ pkg-config --modversion pango
>>>> 1.12.4
>>>> [rpeng at audrey R-source]$ pkg-config --modversion cairo
>>>> 1.0.4
>>>> 
>>>> -roger
>>>> 
>>>> On Mon, Feb 25, 2008 at 11:56 AM, Prof Brian Ripley
>>>> <ripley at stats.ox.ac.uk> wrote:
>>>>> R-devel has new versions of the X11(), png() and jpeg() devices on
>>>>>  Unix-alikes.  The intention is that these are used identically to the
>>>>>  previous versions (which remain available) but will produce 
>>>>> higher-quality
>>>>>  output with more features.
>>>>>
>>>>>  Pros:
>>>>>
>>>>>  Antialiasing of text and lines (can be turned off) but no blurring of
>>>>>  fills.
>>>>>
>>>>>  Buffering of the X11 display and fast repainting from a backing image.
>>>>>  (The intention is to emulate the timer-based buffering of the windows()
>>>>>  device in due course, but not for 2.7.0.)
>>>>>
>>>>>  Ability to use translucent colours, including backgrounds, and produce
>>>>>  partially transparent PNG files.
>>>>>
>>>>>  Scalable text, including to sizes like 4.5 pt. This allows more 
>>>>> accurate
>>>>>  sizing on non-standard screen sizes (e.g. my home machine has a 90dpi
>>>>>  1650x1024 display whereas standard X11 fonts are set up for 75 or 100
>>>>>  dpi).
>>>>>
>>>>>  Full support for UTF-8, so on systems with suitable fonts you can plot 
>>>>> in
>>>>>  many languages on a single figure (and this will work even in non-UTF-8
>>>>>  locales).  The output should be locale-independent (unlike the current
>>>>>  devices where even English text is rendered slightly differently in
>>>>>  Latin-1 and UTF-8 locales).
>>>>>
>>>>>  A utility function savePlot() to make a PNG/JPEG/TIFF copy of the 
>>>>> current
>>>>>  plot.
>>>>>
>>>>>  The new png() and jpeg() devices do not require an X server to be 
>>>>> running.
>>>>>
>>>>>  Cons:
>>>>>
>>>>>  Needs more software installed - cairo, pango and support packages 
>>>>> (which
>>>>>  on all the systems we have looked at are pulled in by the packages 
>>>>> checked
>>>>>  for).  You will see something like
>>>>>
>>>>>    Additional capabilities:   PNG, JPEG, iconv, MBCS, NLS, cairo
>>>>>                                                            ^^^^^
>>>>>  if configure finds the software we are looking for.
>>>>>
>>>>>  Slower under some circumstances (although on the test systems much 
>>>>> faster
>>>>>  than packages Cairo and cairoDevice).  This will be particularly true 
>>>>> for
>>>>>  X11() with a slow connection between the machine running R and the X
>>>>>  server.
>>>>>
>>>>>  The additional software might not work correctly.
>>>>> 
>>>>>
>>>>>  The new versions are not currently the default, but can be made so by
>>>>>  setting X11.options(type="Cairo"), e.g. as a load hook for package
>>>>>  grDevices.  I am using
>>>>>
>>>>>  setHook(packageEvent("grDevices", "onLoad"),
>>>>>      function(...) {
>>>>>          grDevices::ps.options(horizontal=FALSE)
>>>>>          if(getRversion() >= '2.7.0') 
>>>>> grDevices::X11.options(type="Cairo")
>>>>>      })
>>>>> 
>>>>>
>>>>>  Please try these out and let us know how you get on.  As a check, try 
>>>>> the
>>>>>  TestChars() examples in ?points - on one Solaris 10 system a few of the
>>>>>  symbol font characters were incorrect.  It worked on an FC5 system with
>>>>>
>>>>>  auk% pkg-config --modversion pango
>>>>>  1.12.4
>>>>>  auk% pkg-config --modversion cairo
>>>>>  1.0.4
>>>>>
>>>>>  so the versions required are not all recent.
>>>>>
>>>>>  Although these devices would in principle work on Mac OS X, neither 
>>>>> cairo
>>>>>  nor pango is readily available.  We are working on other versions for
>>>>>  Mac OS (X11 based on cairo/freetype, png/jpeg based on Quartz).
>>>>>
>>>>>  There are also new svg() and tiff() devices.
>>>>>
>>>>>  --
>>>>>  Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>>>>  Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>>>>  University of Oxford,             Tel:  +44 1865 272861 (self)
>>>>>  1 South Parks Road,                     +44 1865 272866 (PA)
>>>>>  Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>>>
>>>>>  ______________________________________________
>>>>>  R-devel at r-project.org mailing list
>>>>>  https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>> 
>>>> 
>>>> 
>>>> --
>>>> Roger D. Peng  |  http://www.biostat.jhsph.edu/~rpeng/
>>>> 
>>> -- 
>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>> 
>> 
>
> -- 
> Roger D. Peng  |  http://www.biostat.jhsph.edu/~rpeng/
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From mflawren at fhcrc.org  Tue Feb 26 15:50:21 2008
From: mflawren at fhcrc.org (Michael Lawrence)
Date: Tue, 26 Feb 2008 08:50:21 -0600
Subject: [Rd] New version of X11, png and jpeg
In-Reply-To: <alpine.LFD.1.00.0802260624460.22361@gannet.stats.ox.ac.uk>
References: <alpine.LFD.1.00.0802201933470.25534@gannet.stats.ox.ac.uk>
	<509e0620802251736q6427b796ycdc4068d1d849b5a@mail.gmail.com>
	<alpine.LFD.1.00.0802260624460.22361@gannet.stats.ox.ac.uk>
Message-ID: <509e0620802260650t6a1e4d80r1a81278cbe326ae7@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080226/6ff8b641/attachment.pl 

From mflawren at fhcrc.org  Tue Feb 26 15:55:16 2008
From: mflawren at fhcrc.org (Michael Lawrence)
Date: Tue, 26 Feb 2008 08:55:16 -0600
Subject: [Rd] New version of X11, png and jpeg
In-Reply-To: <alpine.LFD.1.00.0802261318300.29214@gannet.stats.ox.ac.uk>
References: <alpine.LFD.1.00.0802201933470.25534@gannet.stats.ox.ac.uk>
	<66f3bd910802251055m818e1c2kb0056e729b8e5a11@mail.gmail.com>
	<alpine.LFD.1.00.0802251858380.1885@gannet.stats.ox.ac.uk>
	<alpine.LFD.1.00.0802261318300.29214@gannet.stats.ox.ac.uk>
Message-ID: <509e0620802260655m107eb2e8wf8eb98f9d7caced2@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080226/090ae63c/attachment.pl 

From ripley at stats.ox.ac.uk  Tue Feb 26 16:09:59 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 26 Feb 2008 15:09:59 +0000 (GMT)
Subject: [Rd] New version of X11, png and jpeg
In-Reply-To: <509e0620802260655m107eb2e8wf8eb98f9d7caced2@mail.gmail.com>
References: <alpine.LFD.1.00.0802201933470.25534@gannet.stats.ox.ac.uk>
	<66f3bd910802251055m818e1c2kb0056e729b8e5a11@mail.gmail.com>
	<alpine.LFD.1.00.0802251858380.1885@gannet.stats.ox.ac.uk>
	<alpine.LFD.1.00.0802261318300.29214@gannet.stats.ox.ac.uk>
	<509e0620802260655m107eb2e8wf8eb98f9d7caced2@mail.gmail.com>
Message-ID: <alpine.LFD.1.00.0802261507110.17412@gannet.stats.ox.ac.uk>

On Tue, 26 Feb 2008, Michael Lawrence wrote:

> On Tue, Feb 26, 2008 at 8:18 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
> wrote:
>
>> Revision r44621 supports (in a limited way) cairo 1.0 and hence I believe
>> vanilla FC5 -- I found what purports to be a vanilla FC5 box and it works
>> quite well there.
>>
>> Two people have reported that the svg(), cairo-pdf() and cairo-ps()
>> devices produce blank (but not empty) files.  I was able to confirm that
>> on Debian etch (cairo 1.2.4).  They do work on cairo 1.4.14 (F8) and
>> better on a 1.5.10 snapshot.
>>
>
> My intuition is that there is a missing call to cairo_show_page(). I believe
> this became unnecessary in the 1.4.x series. This should probably be called
> any time there is new page (after the first) and when the device is closed.

Yes, you are quite right (and of course the 1.5.x docs I was reading 
didn't say it was needed).  Unfortunately, that only defers the problems 
as fonts are not handled correctly in 1.2.x, at least on my test machine.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From maechler at stat.math.ethz.ch  Tue Feb 26 17:48:07 2008
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue, 26 Feb 2008 17:48:07 +0100
Subject: [Rd] r44608 fails make check-all in scatter.smooth example
In-Reply-To: <alpine.LFD.1.00.0802251844340.1885@gannet.stats.ox.ac.uk>
References: <1203963305.2432.25.camel@prometheus.geog.ucl.ac.uk>
	<alpine.LFD.1.00.0802251844340.1885@gannet.stats.ox.ac.uk>
Message-ID: <18372.17095.935213.190829@stat.math.ethz.ch>

>>>>> "BDR" == Prof Brian Ripley <ripley at stats.ox.ac.uk>
>>>>>     on Mon, 25 Feb 2008 19:10:07 +0000 (GMT) writes:

    BDR> The cause is this:
    BDR> r44607 | maechler | 2008-02-25 14:01:52 +0000 (Mon, 25 Feb 2008) | 2 lines

    BDR> add Fortran type declarations in two cases, mainly for didactical reasons

    BDR> The two declarations have been interchanged.  Fixed in 44609, I hope.


Thank you, Brian.

Indeed, I'm sorry for that, and I am wondering how I could
overlook the problem when I 'make check'ed it *before*
committing....

Martin

    BDR> On Mon, 25 Feb 2008, Gavin Simpson wrote:

    >> Dear List,
    >> 
    >> Having had my appetite sufficiently whetted by Prof. Ripley's email
    >> about the new graphics capabilities in Unixes, I wanted to try them out.
    >> I updated to svn r44608, configured with the following options:
    >> 
    >> R is now configured for x86_64-unknown-linux-gnu
    >> 
    >> Source directory:          ..
    >> Installation directory:    /usr/local
    >> 
    >> C compiler:                gcc  -O3 -g -std=gnu99 -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
    >> Fortran 77 compiler:       gfortran  -O3 -g -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
    >> 
    >> C++ compiler:              g++  -O3 -g -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
    >> Fortran 90/95 compiler:    gfortran -O3 -g -pipe -Wall -fexceptions -fstack-protector -m64 -march=opteron -mtune=opteron
    >> Obj-C compiler:            gcc -g -O2
    >> 
    >> Interfaces supported:      X11, tcltk
    >> External libraries:        readline
    >> Additional capabilities:   PNG, JPEG, iconv, MBCS, NLS, cairo
    >> Options enabled:           shared BLAS, R profiling, Java
    >> 
    >> Recommended packages:      yes
    >> 
    >> R compiled OK, but make check-all fails running the scatter.smooth example:
    >> 
    >> running code in 'stats-Ex.R' ...make[4]: *** [stats-Ex.Rout] Error 1
    >> make[4]: Leaving directory `/home/gavin/R/devel/build/tests/Examples'
    >> make[3]: *** [test-Examples-Base] Error 2
    >> make[3]: Leaving directory `/home/gavin/R/devel/build/tests/Examples'
    >> make[2]: *** [test-Examples] Error 2
    >> make[2]: Leaving directory `/home/gavin/R/devel/build/tests'
    >> make[1]: *** [test-all-basics] Error 1
    >> make[1]: Leaving directory `/home/gavin/R/devel/build/tests'
    >> make: *** [check-all] Error 2
    >> 
    >> And the Rout file contains this at the failure:
    >> 
    >> $ tail -n 20 tests/Examples/stats-Ex.Rout.fail
    >>> 
    >>> cleanEx(); nameEx("scatter.smooth")
    >>> ### * scatter.smooth
    >>> 
    >>> flush(stderr()); flush(stdout())
    >>> 
    >>> ### Name: scatter.smooth
    >>> ### Title: Scatter Plot with Smooth Curve Fitted by Loess
    >>> ### Aliases: scatter.smooth loess.smooth
    >>> ### Keywords: smooth
    >>> 
    >>> ### ** Examples
    >>> 
    >>> require(graphics)
    >>> 
    >>> with(cars, scatter.smooth(speed, dist))
    >> Error in .Fortran(R_lowesw, as.double(fitted.residuals), as.integer(N),  :
    >> Incorrect number of arguments (4), expecting 7 for lowesw
    >> Calls: with ... scatter.smooth -> loess.smooth -> simpleLoess -> .Fortran
    >> Execution halted
    >> 
    >> This is on Fedora 8.
    >> 
    >> Plots on the new X11() device look very nice though!
    >> 
    >> Cheers,
    >> 
    >> G
    >> --
    >> %~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
    >> Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
    >> ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
    >> Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
    >> Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
    >> UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
    >> %~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
    >> 
    >> ______________________________________________
    >> R-devel at r-project.org mailing list
    >> https://stat.ethz.ch/mailman/listinfo/r-devel
    >> 

    BDR> -- 
    BDR> Brian D. Ripley,                  ripley at stats.ox.ac.uk
    BDR> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
    BDR> University of Oxford,             Tel:  +44 1865 272861 (self)
    BDR> 1 South Parks Road,                     +44 1865 272866 (PA)
    BDR> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

    BDR> ______________________________________________
    BDR> R-devel at r-project.org mailing list
    BDR> https://stat.ethz.ch/mailman/listinfo/r-devel


From h.wickham at gmail.com  Tue Feb 26 18:16:48 2008
From: h.wickham at gmail.com (hadley wickham)
Date: Tue, 26 Feb 2008 11:16:48 -0600
Subject: [Rd] Aliasing a function
In-Reply-To: <47C25F2B.7020704@acm.org>
References: <f8e6ff050802231440xcbe8597yf99b2fb83e9c2ca3@mail.gmail.com>
	<000001c87674$4cd1a230$e674e690$@ca>
	<971536df0802231552r3295c86n95cd5322aaa18d3b@mail.gmail.com>
	<f8e6ff050802231641w6435b514i6c50c6448d72e531@mail.gmail.com>
	<47C25F2B.7020704@acm.org>
Message-ID: <f8e6ff050802260916q34f73608qecad08acaad8fa43@mail.gmail.com>

Thanks Tony (and others), for getting me started.  I eventually ended up with:

TopLevel$build_accessor <- function(., extra_args = c()) {
  layer <- if (.$class() %in% c("geom","stat", "position")) c(
    list(mapping=NULL,data=NULL),
    compact(list(
      geom = if (exists("default_geom", .)) .$default_geom()$objname,
      stat = if (exists("default_stat", .)) .$default_stat()$objname,
      position = if (exists("default_pos", .)) .$default_pos()$objname
    ))
  )
  params <- .$params()
  params <- params[names(params) != "..."]
  args <- c(layer, params)

  body <- ps(
    .$myName(), "$", "new(",
    if (length(args) > 0) ps(names(args),"=", names(args), collase =", "),
    if (length(extra_args) > 0) ps(names(extra_args),"=", extra_args,
collase =", "),
    "...",
    ")"
  )
  f <- function() {}
  formals(f) <- as.pairlist(c(args, alist(... =)))
  body(f) <- parse(text = body)
  environment(f) <- globalenv()
  f
}

-- obviously there are far more ggplot details in there than I had
first anticipated.

Hadley

On Mon, Feb 25, 2008 at 12:24 AM, Tony Plate <tplate at acm.org> wrote:
> Maybe something like this? (though it seems like it might be more
>  straightforward to do this sort of thing by text-processing a source
>  file then source'ing it in R).
>
>   > f <- function(a, b, c) c(a=a,b=b,c=c)
>   > attr(f, "source") <- NULL
>   > f
>  function (a, b, c)
>
> c(a = a, b = b, c = c)
>   > g1 <- f
>   > ff <- formals(f)
>   > argtrans <- c(a="d", b="e", c="f")
>   > names(ff) <- argtrans
>   > g2 <- as.function(c(ff, as.call(c(list(as.name("f")),
>  lapply(argtrans, as.name)))))
>   > g2
>  function (d, e, f)
>  f(a = d, b = e, c = f)
>   > f(1,2,3)
>  a b c
>  1 2 3
>   > g1(a=1,b=2,c=3)
>  a b c
>  1 2 3
>   > g2(d=1,e=2,f=3)
>  a b c
>  1 2 3
>   >
>
>  -- Tony Plate
>
>
>
>
>  hadley wickham wrote:
>  > On Sat, Feb 23, 2008 at 5:52 PM, Gabor Grothendieck
>  > <ggrothendieck at gmail.com> wrote:
>  >
>  >> I assume he wants to be able to change the
>  >>  formals although its confusing since the example
>  >>  uses the same formals in both cases.
>  >>
>  >
>  > Yes, that was an important point that I forgot to mention!  Thanks for
>  > the pointer to formals but it doesn't work in this case:
>  >
>  > function (a = 1, b = 2, c = 3)
>  > g(...)
>  >
>  >> f(c=5)
>  >>
>  > Error in f(c = 5) : '...' used in an incorrect context
>  >
>  > Hadley
>  >
>  >
>  >
>
>



-- 
http://had.co.nz/


From vogranovich at jumptrading.com  Tue Feb 26 20:05:34 2008
From: vogranovich at jumptrading.com (Vadim Organovich)
Date: Tue, 26 Feb 2008 13:05:34 -0600
Subject: [Rd] error loading library
Message-ID: <22D850BC39A25742977325ADDE208E7702669562F1@chiexchange02.w2k.jumptrading.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080226/21b77bd5/attachment.pl 

From osklyar at ebi.ac.uk  Tue Feb 26 20:32:27 2008
From: osklyar at ebi.ac.uk (Oleg Sklyar)
Date: Tue, 26 Feb 2008 19:32:27 +0000
Subject: [Rd] error loading library
In-Reply-To: <22D850BC39A25742977325ADDE208E7702669562F1@chiexchange02.w2k.jumptrading.com>
References: <22D850BC39A25742977325ADDE208E7702669562F1@chiexchange02.w2k.jumptrading.com>
Message-ID: <47C4694B.6090406@ebi.ac.uk>

Could it be connected with the fact that each R session creates an 
Rtmp<smth> directory in tmp (at least on UNIX-alike) and that if started 
simultaneously on machines with the same time stamp they might want to 
use a directory with the same <smth>? It still does not explain the 
behaviour much as, first, loading a package (with a shared object and 
external dependencies) does not seem to cause creation of any files 
there, and, second, I have never experienced such problems of our Linux 
farm although there were situations where I launched about a hundred of 
R session on a farm at the same time. Maybe the external library itself 
uses this temp space and locks it?

Oleg

Vadim Organovich wrote:
> Hi,
> 
> I am debugging intermittent crashes of R that seem to happen when multiple R sessions nearly summaltaneously load same dll-based library.
> 
> I have R and my libraries installed on a network drive (everything is Windows). The drive is visible from a farm of servers. I have an R script, foo.R, that just loads a dll-based library (to be precise it loads a library that requires a dll-based library). When I start R (via Rscript --vanilla foo.R) from all of the farm computers summaltaneously some of the sessions often crash. It doesn't seem to be specific to the library, I was able to reproduce this with the gbm library as well as with my own library. It feels that the longer it takes to load the library the higher the probability of the crash.
> 
> foo.R :
> library(vmisc)
> 
> The most informative error message I've got so far looks like this, here vmisc dll is the required library that dynamically loads a dll.
> 
> Loading required package: vmiscdll
> Error in file(file, "r") : unable to open connection
> In addition: Warning message:
> In file(file, "r") :
>   cannot open file 'q:/R/vogranovich/library/vmisc/R/vmisc', reason 'Permission denied'
> Error : unable to load R code in package 'vmisc'
> Error: package/namespace load failed for 'vmisc'
> Execution halted
> Exit Code 1 - Process forcefully killed by the TestMaster
> In stand alone sessions, interactive or not, everything loads fine.
> 
> Does loading a library place some sort of a lock?
> 
> I would appreciate any help with this matter.
> 
> Regards,
> Vadim
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Dr Oleg Sklyar * EBI-EMBL, Cambridge CB10 1SD, UK * +44-1223-494466


From bolker at ufl.edu  Tue Feb 26 22:39:11 2008
From: bolker at ufl.edu (Ben Bolker)
Date: Tue, 26 Feb 2008 16:39:11 -0500
Subject: [Rd] tiny typo (sort of) in plot.c
Message-ID: <47C486FF.90301@ufl.edu>


    The warning in "identify" when no point is close enough
to the clicked point is

./src/main/plot.c:3190:             REprintf(_("warning: no point with 
%.2f inches\n"), tol);

   that should probably be "within" ...

   Ben Bolker


From Matthias.Kohl at stamats.de  Wed Feb 27 06:19:44 2008
From: Matthias.Kohl at stamats.de (Matthias Kohl)
Date: Wed, 27 Feb 2008 06:19:44 +0100
Subject: [Rd] d_fontdb.d, g_her_glyph.d
Message-ID: <47C4F2F0.5030409@stamats.de>

Dear Developers,

I'm updating my R installation via svn (currently: Revision 44626). For 
some time now (sorry don't know the exact revision number) make for R 
devel yields the following error

make[4]: *** Keine Regel vorhanden, um das Target 
?../../../src/include/R_ext/GraphicsBase.h?,
  ben?tigt von ?g_fontdb.o?, zu erstellen.  Schluss.

(translation: no rule to make target ... needed from ...)

The file "g_fontdb.d" (and also g_her_glyph.d) has the last line
../../../src/include/R_ext/GraphicsBase.h

Is this line obligate due to 1) in
https://svn.r-project.org/R-dev-web/trunk/270update.txt
?

At least, if I remove this last line in these two files make runs 
without an error.
Is there another explanation for this error?

Thanks for your help!
Matthias

#################################
My configure output is:
R is now configured for i686-pc-linux-gnu

  Source directory:          .
  Installation directory:    /usr/local

  C compiler:                gcc -std=gnu99  -g -O2
  Fortran 77 compiler:       g77  -g -O2

  C++ compiler:              g++  -g -O2
  Fortran 90/95 compiler:    g77 -g -O2
  Obj-C compiler:            

  Interfaces supported:      X11, tcltk
  External libraries:        readline
  Additional capabilities:   PNG, JPEG, iconv, MBCS, NLS, cairo
  Options enabled:           shared BLAS, R profiling, Java

  Recommended packages:      yes

#################################
my system is: (sessionInfo from R version 2.6.2 Patched (2008-02-10 r44423))
i686-pc-linux-gnu

locale:
LC_CTYPE=de_DE.UTF-8;LC_NUMERIC=C;LC_TIME=de_DE.UTF-8;LC_COLLATE=de_DE.UTF-8;LC_MONETARY=de_DE.UTF-8;LC_MESSAGES=de_DE.UTF-8;LC_PAPER=de_DE.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=de_DE.UTF-8;LC_IDENTIFICATION=C

-- 
Dr. Matthias Kohl
www.stamats.de


From hb at stat.berkeley.edu  Wed Feb 27 06:54:32 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Tue, 26 Feb 2008 21:54:32 -0800
Subject: [Rd] Unix-like touch to update modification timestamp of file?
Message-ID: <59d7961d0802262154r2e049998yf5ce8ea08ab5d249@mail.gmail.com>

Hi,

is it possible to update the modification time stamp of a file using R
(on file systems supporting it)?  It is sufficient to update the
modification time to the current time.  The best I can do for now is:

touchFile <- function(pathname, ...) {
  if (!file.exists(pathname))
    stop("No such file: ", pathname);

  info <- file.info(pathname);
  if (info$isdir)
    stop("Cannot change the timestamp of a directory: ", pathname);

  oldTimestamp <- info$mtime;

  con <- NULL;
  on.exit({
    if (!is.null(con))
      close(con);
  });

  # Zero-sized files have to be treated specially
  if (info$size == 0) {
    con <- file(pathname, open="w");
  } else {
    con <- file(pathname, open="r+b");
    seek(con=con, where=0, origin="start", rw="read");
    bfr <- readBin(con=con, what="raw", n=1);
    seek(con=con, where=0, origin="start", rw="write");
    writeBin(con=con, bfr);
  }

  invisible(oldTimestamp);
} # touchFile()


# 1. Create a file
pathname <- tempfile()
cat(file=pathname, "Hello world!")
md5a <- digest::digest(pathname, file=TRUE);

# 2. Current time stamp
print(file.info(pathname)$mtime)
## [1] "2008-02-26 21:41:23 Pacific Standard Time"

# 3. Update time stamp
Sys.sleep(1.2);
touchFile(pathname)
print(file.info(pathname)$mtime)
## [1] "2008-02-26 21:41:24 Pacific Standard Time"

# 4. Verify that the contents did not change
md5b <- digest::digest(pathname, file=TRUE);
stopifnot(identical(md5a, md5b))

/Henrik


From hb at stat.berkeley.edu  Wed Feb 27 07:03:24 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Tue, 26 Feb 2008 22:03:24 -0800
Subject: [Rd] Warnings generated by log2()/log10() are really large/takes a
	long time to display
Message-ID: <59d7961d0802262203y16b6b24dmebca4a29deca59f5@mail.gmail.com>

x <- rnorm(1e6);

y <- log(x);  # or logb(x) or log1p(x)
w <- warnings();
print(object.size(w));
## [1] 480
str(w);
 $ NaNs produced: language log(x)
 - attr(*, "dots")= list()
 - attr(*, "class")= chr "warnings"

y <- log2(x);  # or log10(x)
w <- warnings();
print(object.size(w));
## [1] 8000536
str(w);
## List of 1
##  $ NaNs produced: language log(c(2.12082478659910,
1.40263187453398, 1.574125429
## 83486, -0.816399069824751,  0.215940065840533, 1.20975177084379,
-0.340287874362
## 813, 0.117151537611550,  ...
##  - attr(*, "dots")= list()
##  - attr(*, "class")= chr "warnings"

Note also how long it takes to display and str() the warning.

I have observed this on R v2.6.2 and R v2.7.0 (2008-02-11 r44432) on
both WinXP and Linux.

/Henrik


From ripley at stats.ox.ac.uk  Wed Feb 27 07:32:45 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 27 Feb 2008 06:32:45 +0000 (GMT)
Subject: [Rd] d_fontdb.d, g_her_glyph.d
In-Reply-To: <47C4F2F0.5030409@stamats.de>
References: <47C4F2F0.5030409@stamats.de>
Message-ID: <alpine.LFD.1.00.0802270627560.14673@gannet.stats.ox.ac.uk>

On Wed, 27 Feb 2008, Matthias Kohl wrote:

> Dear Developers,
>
> I'm updating my R installation via svn (currently: Revision 44626). For
> some time now (sorry don't know the exact revision number) make for R
> devel yields the following error

You need to start a clean build: you are updating from a rather old one.
Try something like

make distclean
./configure
make

In some cases (and this was one) if you update every day it may work, but 
in a few cases you will need to rebuild from scratch after a change.

>
> make[4]: *** Keine Regel vorhanden, um das Target
> ?../../../src/include/R_ext/GraphicsBase.h?,
>  ben?tigt von ?g_fontdb.o?, zu erstellen.  Schluss.
>
> (translation: no rule to make target ... needed from ...)
>
> The file "g_fontdb.d" (and also g_her_glyph.d) has the last line
> ../../../src/include/R_ext/GraphicsBase.h
>
> Is this line obligate due to 1) in
> https://svn.r-project.org/R-dev-web/trunk/270update.txt
> ?
>
> At least, if I remove this last line in these two files make runs
> without an error.
> Is there another explanation for this error?
>
> Thanks for your help!
> Matthias
>
> #################################
> My configure output is:
> R is now configured for i686-pc-linux-gnu
>
>  Source directory:          .
>  Installation directory:    /usr/local
>
>  C compiler:                gcc -std=gnu99  -g -O2
>  Fortran 77 compiler:       g77  -g -O2
>
>  C++ compiler:              g++  -g -O2
>  Fortran 90/95 compiler:    g77 -g -O2
>  Obj-C compiler:
>
>  Interfaces supported:      X11, tcltk
>  External libraries:        readline
>  Additional capabilities:   PNG, JPEG, iconv, MBCS, NLS, cairo
>  Options enabled:           shared BLAS, R profiling, Java
>
>  Recommended packages:      yes
>
> #################################
> my system is: (sessionInfo from R version 2.6.2 Patched (2008-02-10 r44423))
> i686-pc-linux-gnu
>
> locale:
> LC_CTYPE=de_DE.UTF-8;LC_NUMERIC=C;LC_TIME=de_DE.UTF-8;LC_COLLATE=de_DE.UTF-8;LC_MONETARY=de_DE.UTF-8;LC_MESSAGES=de_DE.UTF-8;LC_PAPER=de_DE.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=de_DE.UTF-8;LC_IDENTIFICATION=C
>
> --
> Dr. Matthias Kohl
> www.stamats.de
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Matthias.Kohl at stamats.de  Wed Feb 27 07:45:56 2008
From: Matthias.Kohl at stamats.de (Matthias Kohl)
Date: Wed, 27 Feb 2008 07:45:56 +0100
Subject: [Rd] d_fontdb.d, g_her_glyph.d
In-Reply-To: <alpine.LFD.1.00.0802270627560.14673@gannet.stats.ox.ac.uk>
References: <47C4F2F0.5030409@stamats.de>
	<alpine.LFD.1.00.0802270627560.14673@gannet.stats.ox.ac.uk>
Message-ID: <47C50724.1030805@stamats.de>

now, it works ...
Thanks!

Prof Brian Ripley wrote:
> On Wed, 27 Feb 2008, Matthias Kohl wrote:
>
>> Dear Developers,
>>
>> I'm updating my R installation via svn (currently: Revision 44626). For
>> some time now (sorry don't know the exact revision number) make for R
>> devel yields the following error
>
> You need to start a clean build: you are updating from a rather old one.
> Try something like
>
> make distclean
> ./configure
> make
>
> In some cases (and this was one) if you update every day it may work, 
> but in a few cases you will need to rebuild from scratch after a change.
>
>>
>> make[4]: *** Keine Regel vorhanden, um das Target
>> ?../../../src/include/R_ext/GraphicsBase.h?,
>>  ben?tigt von ?g_fontdb.o?, zu erstellen.  Schluss.
>>
>> (translation: no rule to make target ... needed from ...)
>>
>> The file "g_fontdb.d" (and also g_her_glyph.d) has the last line
>> ../../../src/include/R_ext/GraphicsBase.h
>>
>> Is this line obligate due to 1) in
>> https://svn.r-project.org/R-dev-web/trunk/270update.txt
>> ?
>>
>> At least, if I remove this last line in these two files make runs
>> without an error.
>> Is there another explanation for this error?
>>
>> Thanks for your help!
>> Matthias
>>
>> #################################
>> My configure output is:
>> R is now configured for i686-pc-linux-gnu
>>
>>  Source directory:          .
>>  Installation directory:    /usr/local
>>
>>  C compiler:                gcc -std=gnu99  -g -O2
>>  Fortran 77 compiler:       g77  -g -O2
>>
>>  C++ compiler:              g++  -g -O2
>>  Fortran 90/95 compiler:    g77 -g -O2
>>  Obj-C compiler:
>>
>>  Interfaces supported:      X11, tcltk
>>  External libraries:        readline
>>  Additional capabilities:   PNG, JPEG, iconv, MBCS, NLS, cairo
>>  Options enabled:           shared BLAS, R profiling, Java
>>
>>  Recommended packages:      yes
>>
>> #################################
>> my system is: (sessionInfo from R version 2.6.2 Patched (2008-02-10 
>> r44423))
>> i686-pc-linux-gnu
>>
>> locale:
>> LC_CTYPE=de_DE.UTF-8;LC_NUMERIC=C;LC_TIME=de_DE.UTF-8;LC_COLLATE=de_DE.UTF-8;LC_MONETARY=de_DE.UTF-8;LC_MESSAGES=de_DE.UTF-8;LC_PAPER=de_DE.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=de_DE.UTF-8;LC_IDENTIFICATION=C 
>>
>>
>> -- 
>> Dr. Matthias Kohl
>> www.stamats.de
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>

-- 
Dr. Matthias Kohl
www.stamats.de


From anuar at uchicago.edu  Tue Feb 26 22:00:07 2008
From: anuar at uchicago.edu (anuar at uchicago.edu)
Date: Tue, 26 Feb 2008 22:00:07 +0100 (CET)
Subject: [Rd] MacOSX R.app do not save history (PR#10850)
Message-ID: <20080226210007.4D675282EFF0@mail.pubhealth.ku.dk>

Full_Name: Anuar Konkashbaev
Version: 2.6.2
OS: Mac OS X 10.4.11
Submission from: (NULL) (128.135.32.210)


R.app do not saves history while command line r does. When starting R.app
history from the command line session and all new commands from current session
are available, but when quiting R.app .Rhistory is overwritten but only commands
from command line session are saved in new file. Even if one will save history
explicitly with savehistory(".Rhistory") only commands from command line session
are saved in the .Rhistory file. .Rdata is saved correctly. History works just
fine in command line application.


From tdye at hawaii.edu  Wed Feb 27 09:05:07 2008
From: tdye at hawaii.edu (tdye at hawaii.edu)
Date: Wed, 27 Feb 2008 09:05:07 +0100 (CET)
Subject: [Rd] dhyper, phyper (PR#10853)
Message-ID: <20080227080508.3FC06282C786@mail.pubhealth.ku.dk>

Aloha all,

I know too little about what I'm about to write and hope I'm not  
wasting your time.

For a class I'm teaching in archaeological data analysis, I'm trying  
to put together a routine that calculates the so-called Petersen  
index and, especially, confidence intervals for the index.  This was  
introduced to archaeologists by N.R.J. Fieller and A. Turner in an  
article in Journal of Archaeological Science (1982) called Number  
Estimation in Vertebrate Samples.  They say that "calculation of  
precise confidence intervals for population sizes is, in principle at  
least, straightforward.  It involves calculation of cumulative  
hypergeometric probabilities (i.e. the summation of probabilities  
given by equation 3.1 of Seber, 1973)."  The reference is to G.A.F.  
Seber's book, The Estimation of Animal Abundance.

I went to equation 3.1 and wrote a small function to sum its  
probabilities, modeled after phyper() and taking the arguments in the  
same order (the names have changed to suit the archaeological  
situation):

> seber <- function(p,l,n,r)
>   {
>     y <- 0
>     for (x in 0:p)
>       y <- y + exp(lchoose(l,x) + lchoose(n-l,r-x) - lchoose(n,r))
>     y
>   }

When used in the larger routine, this yields results that very  
closely approximate the results in Fieller and Turner's table 1.

I initially thought I could use the function phyper() for this  
because, as I interpret the help files, this routine yields  
cumulative hypergeometric probabilities.  But I'm finding that it  
gives different results than seber().

I apologize if I am in too far over my head, but I am wondering if  
this is a bug in dhyper/phyper?  Perhaps I have misunderstood what  
phyper() actually does, or am calling it incorrectly?  Or, were  
Fieller and Turner in error?

All the best,
Tom

Thomas Dye
Dean Hall 201, Tuesday 1:00-1:55 pm


From maechler at stat.math.ethz.ch  Wed Feb 27 09:44:44 2008
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 27 Feb 2008 09:44:44 +0100
Subject: [Rd] Warnings generated by log2()/log10() are really
	large/takes a long time to display
In-Reply-To: <59d7961d0802262203y16b6b24dmebca4a29deca59f5@mail.gmail.com>
References: <59d7961d0802262203y16b6b24dmebca4a29deca59f5@mail.gmail.com>
Message-ID: <18373.8956.152890.662124@stat.math.ethz.ch>

Thank you Henrik,

>>>>> "HenrikB" == Henrik Bengtsson <hb at stat.berkeley.edu>
>>>>>     on Tue, 26 Feb 2008 22:03:24 -0800 writes:

{with many superfluous empty statements ( i.e., trailing ";" ):

    HenrikB> x <- rnorm(1e6);

    [................]


    HenrikB> y <- log2(x);  # or log10(x)
    HenrikB> w <- warnings();
    HenrikB> print(object.size(w));
    HenrikB> ## [1] 8000536
    HenrikB> str(w);
    HenrikB> ## List of 1
    HenrikB> ##  $ NaNs produced: language log(c(2.12082478659910,
    HenrikB> 1.40263187453398, 1.574125429
    HenrikB> ## 83486, -0.816399069824751,  0.215940065840533, 1.20975177084379,
    HenrikB> -0.340287874362
    HenrikB> ## 813, 0.117151537611550,  ...
    HenrikB> ##  - attr(*, "dots")= list()
    HenrikB> ##  - attr(*, "class")= chr "warnings"

    HenrikB> Note also how long it takes to display and str() the warning.

Yes, indeed.
It's a subtle problem and happens
because in do_log1arg() a new call is constructed in which 'x'
has already been evaluated.

A subtle fix to the subtle problem
is to replace  CAR(args) by CADR(call) in there

--- arithmetic.c	(Revision 44626)
+++ arithmetic.c	(working copy)
@@ -1372,7 +1372,9 @@
     if(PRIMVAL(op) == 10) tmp = ScalarReal(10.0);
     if(PRIMVAL(op) == 2)  tmp = ScalarReal(2.0);
 
-    PROTECT(Call = lang3(install("log"), CAR(args), tmp));
+    /* CADR(call) instead of CAR(args), since 'args' have been
+     * evaluated in Dispatch*(..) above : */
+    PROTECT(Call = lang3(install("log"), CADR(call), tmp));
     res = eval(Call, env);
     UNPROTECT(1);
     return res;

-----

That does fix the problem you've reported (and passes "make check")
but I'm not quite at ease with it, since it will lead to
effectively evaluate the argument *twice*.

A different approach that I'd find cleaner
would be to *not* construct and eval() a
new Call inside do_log1arg, but I assume there had been a good
reason for doing things they way they are now...

Martin Maechler, ETH Zurich


From ripley at stats.ox.ac.uk  Wed Feb 27 09:56:08 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 27 Feb 2008 08:56:08 +0000 (GMT)
Subject: [Rd] Warnings generated by log2()/log10() are really
 large/takes a long time to display
In-Reply-To: <18373.8956.152890.662124@stat.math.ethz.ch>
References: <59d7961d0802262203y16b6b24dmebca4a29deca59f5@mail.gmail.com>
	<18373.8956.152890.662124@stat.math.ethz.ch>
Message-ID: <alpine.LFD.1.00.0802270850350.17186@gannet.stats.ox.ac.uk>

On Wed, 27 Feb 2008, Martin Maechler wrote:

> Thank you Henrik,
>
>>>>>> "HenrikB" == Henrik Bengtsson <hb at stat.berkeley.edu>
>>>>>>     on Tue, 26 Feb 2008 22:03:24 -0800 writes:
>
> {with many superfluous empty statements ( i.e., trailing ";" ):

Indeed!

>    HenrikB> x <- rnorm(1e6);
>
>    [................]
>
>
>    HenrikB> y <- log2(x);  # or log10(x)
>    HenrikB> w <- warnings();
>    HenrikB> print(object.size(w));
>    HenrikB> ## [1] 8000536
>    HenrikB> str(w);
>    HenrikB> ## List of 1
>    HenrikB> ##  $ NaNs produced: language log(c(2.12082478659910,
>    HenrikB> 1.40263187453398, 1.574125429
>    HenrikB> ## 83486, -0.816399069824751,  0.215940065840533, 1.20975177084379,
>    HenrikB> -0.340287874362
>    HenrikB> ## 813, 0.117151537611550,  ...
>    HenrikB> ##  - attr(*, "dots")= list()
>    HenrikB> ##  - attr(*, "class")= chr "warnings"
>
>    HenrikB> Note also how long it takes to display and str() the warning.
>
> Yes, indeed.
> It's a subtle problem and happens
> because in do_log1arg() a new call is constructed in which 'x'
> has already been evaluated.
>
> A subtle fix to the subtle problem
> is to replace  CAR(args) by CADR(call) in there
>
> --- arithmetic.c	(Revision 44626)
> +++ arithmetic.c	(working copy)
> @@ -1372,7 +1372,9 @@
>     if(PRIMVAL(op) == 10) tmp = ScalarReal(10.0);
>     if(PRIMVAL(op) == 2)  tmp = ScalarReal(2.0);
>
> -    PROTECT(Call = lang3(install("log"), CAR(args), tmp));
> +    /* CADR(call) instead of CAR(args), since 'args' have been
> +     * evaluated in Dispatch*(..) above : */
> +    PROTECT(Call = lang3(install("log"), CADR(call), tmp));
>     res = eval(Call, env);
>     UNPROTECT(1);
>     return res;
>
> -----
>
> That does fix the problem you've reported (and passes "make check")
> but I'm not quite at ease with it, since it will lead to
> effectively evaluate the argument *twice*.
>
> A different approach that I'd find cleaner
> would be to *not* construct and eval() a
> new Call inside do_log1arg, but I assume there had been a good
> reason for doing things they way they are now...

There was (although possibly no longer -- there was a bug in S4 dispatch 
of primitives that failed to re-promise args).

The real issue is somewhere else entirely, the complete deparse in 
print.warnings.

>
> Martin Maechler, ETH Zurich
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hb at stat.berkeley.edu  Wed Feb 27 11:50:02 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Wed, 27 Feb 2008 02:50:02 -0800
Subject: [Rd] Warnings generated by log2()/log10() are really
	large/takes a long time to display
In-Reply-To: <alpine.LFD.1.00.0802270850350.17186@gannet.stats.ox.ac.uk>
References: <59d7961d0802262203y16b6b24dmebca4a29deca59f5@mail.gmail.com>
	<18373.8956.152890.662124@stat.math.ethz.ch>
	<alpine.LFD.1.00.0802270850350.17186@gannet.stats.ox.ac.uk>
Message-ID: <59d7961d0802270250u7edbf378s9ccc9282cdc22fdb@mail.gmail.com>

On Wed, Feb 27, 2008 at 12:56 AM, Prof Brian Ripley
<ripley at stats.ox.ac.uk> wrote:
> On Wed, 27 Feb 2008, Martin Maechler wrote:
>
>  > Thank you Henrik,
>  >
>  >>>>>> "HenrikB" == Henrik Bengtsson <hb at stat.berkeley.edu>
>  >>>>>>     on Tue, 26 Feb 2008 22:03:24 -0800 writes:
>  >
>  > {with many superfluous empty statements ( i.e., trailing ";" ):
>
>  Indeed!

I like to add a personal touch to the code I'm writing ;)

Seriously, I added them here as a bait in order to get a chance to say
that I finally found a good reason for adding the semicolons.  If you
cut'n'paste code from certain web pages it may happen that
newlines/carriage returns are not transferred and all code is pasted
into the same line at the R prompt.  With semicolons you still get a
valid syntax.  I cannot remember under what conditions this happened -
if it was for certain web browser, web page/blog, online page editor,
OS and so, but I'm quite sure it was while I've put online code
examples for my latest project.  Maybe someoneelse also has noticed
this?

>
>
>
>  >    HenrikB> x <- rnorm(1e6);
>  >
>  >    [................]
>  >
>  >
>  >    HenrikB> y <- log2(x);  # or log10(x)
>  >    HenrikB> w <- warnings();
>  >    HenrikB> print(object.size(w));
>  >    HenrikB> ## [1] 8000536
>  >    HenrikB> str(w);
>  >    HenrikB> ## List of 1
>  >    HenrikB> ##  $ NaNs produced: language log(c(2.12082478659910,
>  >    HenrikB> 1.40263187453398, 1.574125429
>  >    HenrikB> ## 83486, -0.816399069824751,  0.215940065840533, 1.20975177084379,
>  >    HenrikB> -0.340287874362
>  >    HenrikB> ## 813, 0.117151537611550,  ...
>  >    HenrikB> ##  - attr(*, "dots")= list()
>  >    HenrikB> ##  - attr(*, "class")= chr "warnings"
>  >
>  >    HenrikB> Note also how long it takes to display and str() the warning.
>  >
>  > Yes, indeed.
>  > It's a subtle problem and happens
>  > because in do_log1arg() a new call is constructed in which 'x'
>  > has already been evaluated.
>  >
>  > A subtle fix to the subtle problem
>  > is to replace  CAR(args) by CADR(call) in there
>  >
>  > --- arithmetic.c      (Revision 44626)
>  > +++ arithmetic.c      (working copy)
>  > @@ -1372,7 +1372,9 @@
>  >     if(PRIMVAL(op) == 10) tmp = ScalarReal(10.0);
>  >     if(PRIMVAL(op) == 2)  tmp = ScalarReal(2.0);
>  >
>  > -    PROTECT(Call = lang3(install("log"), CAR(args), tmp));
>  > +    /* CADR(call) instead of CAR(args), since 'args' have been
>  > +     * evaluated in Dispatch*(..) above : */
>  > +    PROTECT(Call = lang3(install("log"), CADR(call), tmp));
>  >     res = eval(Call, env);
>  >     UNPROTECT(1);
>  >     return res;
>  >
>  > -----
>  >
>  > That does fix the problem you've reported (and passes "make check")
>  > but I'm not quite at ease with it, since it will lead to
>  > effectively evaluate the argument *twice*.
>  >
>  > A different approach that I'd find cleaner
>  > would be to *not* construct and eval() a
>  > new Call inside do_log1arg, but I assume there had been a good
>  > reason for doing things they way they are now...
>
>  There was (although possibly no longer -- there was a bug in S4 dispatch
>  of primitives that failed to re-promise args).
>
>  The real issue is somewhere else entirely, the complete deparse in
>  print.warnings.

Thank you both for looking into this.

Henrik

>
>  >
>  > Martin Maechler, ETH Zurich
>  >
>  > ______________________________________________
>  > R-devel at r-project.org mailing list
>  > https://stat.ethz.ch/mailman/listinfo/r-devel
>  >
>
>  --
>  Brian D. Ripley,                  ripley at stats.ox.ac.uk
>  Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>  University of Oxford,             Tel:  +44 1865 272861 (self)
>  1 South Parks Road,                     +44 1865 272866 (PA)
>  Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>


From dominik.locher at bondsearch.ch  Wed Feb 27 10:20:28 2008
From: dominik.locher at bondsearch.ch (Dominik Locher)
Date: Wed, 27 Feb 2008 10:20:28 +0100
Subject: [Rd] Generic Functions
In-Reply-To: <6phfxvghnp3.fsf@gopher4.fhcrc.org>
References: <001c01c876e5$dc10dc60$2101a8c0@mobil><47C1A248.4090909@fhcrc.org>
	<01f101c877b5$7af4d230$6b0aa8c0@mobil>
	<6phfxvghnp3.fsf@gopher4.fhcrc.org>
Message-ID: <01c401c87921$fe233120$6b0aa8c0@mobil>

Thanks a lot for your explanation, which I higly appreciate. But I have
still a problem...

Think about 2 persons, each of them create their own package. Both define a
generic function "setType" with different arguments. 

Person 1: setType(obj, valX)
Person 2: setType(spec)

If I require the package of person 1, everything works fine.

If I call the second package afterwards, I will get an error, because the
generic function already exists.

How can I solve this conflict? How can I define a new generic function which
has different arguments without getting in trouble with the first package?
Is there a way to define functions, which belongs to a specific class
without getting in troubles with other packages?

Thanks a lot for your help.
Dominik


-----Urspr?ngliche Nachricht-----
Von: Martin Morgan [mailto:mtmorgan at fhcrc.org] 
Gesendet: Montag, 25. Februar 2008 19:54
An: Dominik Locher
Betreff: Re: AW: [R] Generic Functions

Things are different in R. You can't protect a new function from hiding your
function, just as

> print(1:10)
 [1]  1  2  3  4  5  6  7  8  9 10
> print <- function(x) "oops"
> print(1:10)
[1] "oops"
> rm(print)
> print(1:10)
 [1]  1  2  3  4  5  6  7  8  9 10

Note that the redefinition hides but does not remove 'print' function.

Generics don't really belong with classes, but if you think about it
something like

class Foo {
        function bar() {}
    }

foo = new Foo;
$foo->bar()

in php is very similar to

> setClass("Foo", "list")
> setGeneric("bar", function(x) standardGeneric("bar")) setMethod("bar", 
> "Foo", function(x) {}) foo = new("Foo")
> bar(foo)

i.e., set a method on the generic function. Someone could write another
method 'bar' operating on a different object, and it would coexist with your
method.

Martin

"Dominik Locher" <dominik.locher at bondsearch.ch> writes:

> Hi
>
> Many thanks for your explanation. Just another short question. How can 
> I make sure that if I greate a new class with functions, that nobody 
> can change this functions anymore or as you mentioned overwrite 
> unintended this function (setType).
>
> In OOP i.e. in php I have a class and specific functions belongs to 
> this class. How can I do the same in R with generic functions? or is 
> there another way?
>
> Thanks for your help.
>
> Dominik
>
>
> PS: I will send questions about S4 to R-devel at r-project.org in future.
;-).
>
> -----Urspr?ngliche Nachricht-----
> Von: Martin Morgan [mailto:mtmorgan at fhcrc.org]
> Gesendet: Sonntag, 24. Februar 2008 17:59
> An: Dominik Locher
> Cc: r-help at r-project.org
> Betreff: Re: [R] Generic Functions
>
> See the 'useAsDefault' argument to setGeneric.
>
> As an aside, if 'setType<-' is meant to be a 'setter' to change the 
> value of a slot 'type', then I find the syntax a little redundant -- 
> it's use
>
>  > setType(x) <- "foo"
>
> implies that it is already a 'setter' without 'set' at the front. Why 
> not just
>
>  > type(x) <- "foo"
>
> (though perhaps 'type' is not such a good name, either)?
>
> As a second aside, if you're writing code that you expect to be used 
> with fPortfolio, then having two functions with the same name but 
> different signatures or overall goals will confuse your user -- with 
> fPortfolio,
> setType<- works fine, but then for mysterious reasons (i.e., when your 
> package is loaded, with a different definition of setType<-) code that 
> worked before no longer works! So I'd either use setType in a way 
> consistent with it's use in fPortfolio, or define a new generic for 
> your own purposes
> (setType<- is not a generic in my version of fPortfolio,
>
>  > packageDescription('fPortfolio')$Version
> [1] "260.72"
>
> ).
>
> As a third aside, I think questions about S4 probably belong on 
> R-devel, as they seem to fall in the realm of 'questions likely to 
> prompt discussion unintelligible to non-programmers' (from the R-devel 
> mailing list description).
>
> Martin
>
> Dominik Locher wrote:
>> Hi
>> 
>> I have some problems in defining new generic functions and classes. 
>> Just have a look at the following example:
>> 
>> 
>> require(fPortfolio)
>> 
>> setClass("PROBECLASS",           
>>   representation(               
>>     type="character"            
>>   )                             
>> )       
>> 
>> isGeneric("setType<-")
>> #Returns
>> TRUE
>> 
>> #I would like to define a specific function for class PROBECLASS with 
>> other arguments than for the generic function "setType" of fPortfolio.
>> setGeneric("setType<-", function(object, value)
>> standardGeneric("setType<-"))
>> 
>> #Returns
>> Fehler in makeGeneric(name, fdef, fdeflt, group = group, valueClass = 
>> valueClass,  :
>>   the formal arguments of the generic function for "setType<-" 
>> (object,
>> value) differ from those of the non-generic to be used as the default 
>> (spec,
>> value)
>> 
>> setReplaceMethod("setType", "PROBECLASS", function(object, value){
>> 
>>   object at type <- value                           
>>   object
>> 
>> })           
>> 
>> #Example
>> obj = new("PROBECLASS")
>> setType(obj) = "test"
>> obj         
>> 
>> 
>> ######
>> If I don't require fPortfolio it works fine. However, is it not 
>> possible to create two generic functions with the same name but 
>> different
> arguments?
>> setType for fPortfolio may be differ completely from setType of 
>> PROBECLASS...
>> What's the best way to have functions which belongs to an object of a 
>> specific class? I had a look at the paper "S4 Classes in 15 pages, 
>> more or less" (feb12, 2003), however, I could not found what I did
> wrong...
>> 
>> Any help is highly appreciated. 
>> 
>> Thanks
>> Dominik
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>

-- 
Martin Morgan
Computational Biology / Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N.
PO Box 19024 Seattle, WA 98109

Location: Arnold Building M2 B169
Phone: (206) 667-2793


From murdoch at stats.uwo.ca  Wed Feb 27 12:52:06 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed, 27 Feb 2008 06:52:06 -0500
Subject: [Rd] dhyper, phyper (PR#10853)
In-Reply-To: <20080227080508.3FC06282C786@mail.pubhealth.ku.dk>
References: <20080227080508.3FC06282C786@mail.pubhealth.ku.dk>
Message-ID: <47C54EE6.8060402@stats.uwo.ca>

tdye at hawaii.edu wrote:
> Aloha all,
>
> I know too little about what I'm about to write and hope I'm not  
> wasting your time.
>
> For a class I'm teaching in archaeological data analysis, I'm trying  
> to put together a routine that calculates the so-called Petersen  
> index and, especially, confidence intervals for the index.  This was  
> introduced to archaeologists by N.R.J. Fieller and A. Turner in an  
> article in Journal of Archaeological Science (1982) called Number  
> Estimation in Vertebrate Samples.  They say that "calculation of  
> precise confidence intervals for population sizes is, in principle at  
> least, straightforward.  It involves calculation of cumulative  
> hypergeometric probabilities (i.e. the summation of probabilities  
> given by equation 3.1 of Seber, 1973)."  The reference is to G.A.F.  
> Seber's book, The Estimation of Animal Abundance.
>
> I went to equation 3.1 and wrote a small function to sum its  
> probabilities, modeled after phyper() and taking the arguments in the  
> same order (the names have changed to suit the archaeological  
> situation):
>
>   
>> seber <- function(p,l,n,r)
>>   {
>>     y <- 0
>>     for (x in 0:p)
>>       y <- y + exp(lchoose(l,x) + lchoose(n-l,r-x) - lchoose(n,r))
>>     y
>>   }
>>     
>
> When used in the larger routine, this yields results that very  
> closely approximate the results in Fieller and Turner's table 1.
>
> I initially thought I could use the function phyper() for this  
> because, as I interpret the help files, this routine yields  
> cumulative hypergeometric probabilities.  But I'm finding that it  
> gives different results than seber().
>   
Could you give an example?
> I apologize if I am in too far over my head, but I am wondering if  
> this is a bug in dhyper/phyper?  Perhaps I have misunderstood what  
> phyper() actually does, or am calling it incorrectly?  Or, were  
> Fieller and Turner in error?
I'd guess it's your error, but without seeing what you did can't really 
say for sure.

By the way, please don't post things like this to the R-bugs list unless 
you're reasonably sure it's a bug.  Entries on that list take work by 
busy people to clear up.

Duncan Murdoch


From murdoch at stats.uwo.ca  Wed Feb 27 12:53:11 2008
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed, 27 Feb 2008 06:53:11 -0500
Subject: [Rd] Generic Functions
In-Reply-To: <01c401c87921$fe233120$6b0aa8c0@mobil>
References: <001c01c876e5$dc10dc60$2101a8c0@mobil><47C1A248.4090909@fhcrc.org>	<01f101c877b5$7af4d230$6b0aa8c0@mobil>	<6phfxvghnp3.fsf@gopher4.fhcrc.org>
	<01c401c87921$fe233120$6b0aa8c0@mobil>
Message-ID: <47C54F27.1000808@stats.uwo.ca>

Dominik Locher wrote:
> Thanks a lot for your explanation, which I higly appreciate. But I have
> still a problem...
>
> Think about 2 persons, each of them create their own package. Both define a
> generic function "setType" with different arguments. 
>
> Person 1: setType(obj, valX)
> Person 2: setType(spec)
>
> If I require the package of person 1, everything works fine.
>
> If I call the second package afterwards, I will get an error, because the
> generic function already exists.
>
> How can I solve this conflict? How can I define a new generic function which
> has different arguments without getting in trouble with the first package?
> Is there a way to define functions, which belongs to a specific class
> without getting in troubles with other packages?
>   

Use a NAMESPACE. 

Duncan Murdoch
> Thanks a lot for your help.
> Dominik
>
>
> -----Urspr?ngliche Nachricht-----
> Von: Martin Morgan [mailto:mtmorgan at fhcrc.org] 
> Gesendet: Montag, 25. Februar 2008 19:54
> An: Dominik Locher
> Betreff: Re: AW: [R] Generic Functions
>
> Things are different in R. You can't protect a new function from hiding your
> function, just as
>
>   
>> print(1:10)
>>     
>  [1]  1  2  3  4  5  6  7  8  9 10
>   
>> print <- function(x) "oops"
>> print(1:10)
>>     
> [1] "oops"
>   
>> rm(print)
>> print(1:10)
>>     
>  [1]  1  2  3  4  5  6  7  8  9 10
>
> Note that the redefinition hides but does not remove 'print' function.
>
> Generics don't really belong with classes, but if you think about it
> something like
>
> class Foo {
>         function bar() {}
>     }
>
> foo = new Foo;
> $foo->bar()
>
> in php is very similar to
>
>   
>> setClass("Foo", "list")
>> setGeneric("bar", function(x) standardGeneric("bar")) setMethod("bar", 
>> "Foo", function(x) {}) foo = new("Foo")
>> bar(foo)
>>     
>
> i.e., set a method on the generic function. Someone could write another
> method 'bar' operating on a different object, and it would coexist with your
> method.
>
> Martin
>
> "Dominik Locher" <dominik.locher at bondsearch.ch> writes:
>
>   
>> Hi
>>
>> Many thanks for your explanation. Just another short question. How can 
>> I make sure that if I greate a new class with functions, that nobody 
>> can change this functions anymore or as you mentioned overwrite 
>> unintended this function (setType).
>>
>> In OOP i.e. in php I have a class and specific functions belongs to 
>> this class. How can I do the same in R with generic functions? or is 
>> there another way?
>>
>> Thanks for your help.
>>
>> Dominik
>>
>>
>> PS: I will send questions about S4 to R-devel at r-project.org in future.
>>     
> ;-).
>   
>> -----Urspr?ngliche Nachricht-----
>> Von: Martin Morgan [mailto:mtmorgan at fhcrc.org]
>> Gesendet: Sonntag, 24. Februar 2008 17:59
>> An: Dominik Locher
>> Cc: r-help at r-project.org
>> Betreff: Re: [R] Generic Functions
>>
>> See the 'useAsDefault' argument to setGeneric.
>>
>> As an aside, if 'setType<-' is meant to be a 'setter' to change the 
>> value of a slot 'type', then I find the syntax a little redundant -- 
>> it's use
>>
>>  > setType(x) <- "foo"
>>
>> implies that it is already a 'setter' without 'set' at the front. Why 
>> not just
>>
>>  > type(x) <- "foo"
>>
>> (though perhaps 'type' is not such a good name, either)?
>>
>> As a second aside, if you're writing code that you expect to be used 
>> with fPortfolio, then having two functions with the same name but 
>> different signatures or overall goals will confuse your user -- with 
>> fPortfolio,
>> setType<- works fine, but then for mysterious reasons (i.e., when your 
>> package is loaded, with a different definition of setType<-) code that 
>> worked before no longer works! So I'd either use setType in a way 
>> consistent with it's use in fPortfolio, or define a new generic for 
>> your own purposes
>> (setType<- is not a generic in my version of fPortfolio,
>>
>>  > packageDescription('fPortfolio')$Version
>> [1] "260.72"
>>
>> ).
>>
>> As a third aside, I think questions about S4 probably belong on 
>> R-devel, as they seem to fall in the realm of 'questions likely to 
>> prompt discussion unintelligible to non-programmers' (from the R-devel 
>> mailing list description).
>>
>> Martin
>>
>> Dominik Locher wrote:
>>     
>>> Hi
>>>
>>> I have some problems in defining new generic functions and classes. 
>>> Just have a look at the following example:
>>>
>>>
>>> require(fPortfolio)
>>>
>>> setClass("PROBECLASS",           
>>>   representation(               
>>>     type="character"            
>>>   )                             
>>> )       
>>>
>>> isGeneric("setType<-")
>>> #Returns
>>> TRUE
>>>
>>> #I would like to define a specific function for class PROBECLASS with 
>>> other arguments than for the generic function "setType" of fPortfolio.
>>> setGeneric("setType<-", function(object, value)
>>> standardGeneric("setType<-"))
>>>
>>> #Returns
>>> Fehler in makeGeneric(name, fdef, fdeflt, group = group, valueClass = 
>>> valueClass,  :
>>>   the formal arguments of the generic function for "setType<-" 
>>> (object,
>>> value) differ from those of the non-generic to be used as the default 
>>> (spec,
>>> value)
>>>
>>> setReplaceMethod("setType", "PROBECLASS", function(object, value){
>>>
>>>   object at type <- value                           
>>>   object
>>>
>>> })           
>>>
>>> #Example
>>> obj = new("PROBECLASS")
>>> setType(obj) = "test"
>>> obj         
>>>
>>>
>>> ######
>>> If I don't require fPortfolio it works fine. However, is it not 
>>> possible to create two generic functions with the same name but 
>>> different
>>>       
>> arguments?
>>     
>>> setType for fPortfolio may be differ completely from setType of 
>>> PROBECLASS...
>>> What's the best way to have functions which belongs to an object of a 
>>> specific class? I had a look at the paper "S4 Classes in 15 pages, 
>>> more or less" (feb12, 2003), however, I could not found what I did
>>>       
>> wrong...
>>     
>>> Any help is highly appreciated. 
>>>
>>> Thanks
>>> Dominik
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>       
>
>


From richard.pearson at postgrad.manchester.ac.uk  Wed Feb 27 14:28:00 2008
From: richard.pearson at postgrad.manchester.ac.uk (Richard Pearson)
Date: Wed, 27 Feb 2008 13:28:00 +0000
Subject: [Rd] Warnings generated by log2()/log10() are
 really	large/takes a long time to display
In-Reply-To: <59d7961d0802270250u7edbf378s9ccc9282cdc22fdb@mail.gmail.com>
References: <59d7961d0802262203y16b6b24dmebca4a29deca59f5@mail.gmail.com>	<18373.8956.152890.662124@stat.math.ethz.ch>	<alpine.LFD.1.00.0802270850350.17186@gannet.stats.ox.ac.uk>
	<59d7961d0802270250u7edbf378s9ccc9282cdc22fdb@mail.gmail.com>
Message-ID: <47C56560.5050008@postgrad.manchester.ac.uk>

Yes Henrik, I've also noticed this when cutting and pasting code from here:

http://ace.acadiau.ca/math/ACMMaC/Rmpi/sample.html

Try the .Last function for example.

Best wishes

Richard.


Henrik Bengtsson wrote:
> On Wed, Feb 27, 2008 at 12:56 AM, Prof Brian Ripley
> <ripley at stats.ox.ac.uk> wrote:
>   
>> On Wed, 27 Feb 2008, Martin Maechler wrote:
>>
>>  > Thank you Henrik,
>>  >
>>  >>>>>> "HenrikB" == Henrik Bengtsson <hb at stat.berkeley.edu>
>>  >>>>>>     on Tue, 26 Feb 2008 22:03:24 -0800 writes:
>>  >
>>  > {with many superfluous empty statements ( i.e., trailing ";" ):
>>
>>  Indeed!
>>     
>
> I like to add a personal touch to the code I'm writing ;)
>
> Seriously, I added them here as a bait in order to get a chance to say
> that I finally found a good reason for adding the semicolons.  If you
> cut'n'paste code from certain web pages it may happen that
> newlines/carriage returns are not transferred and all code is pasted
> into the same line at the R prompt.  With semicolons you still get a
> valid syntax.  I cannot remember under what conditions this happened -
> if it was for certain web browser, web page/blog, online page editor,
> OS and so, but I'm quite sure it was while I've put online code
> examples for my latest project.  Maybe someoneelse also has noticed
> this?
>
>   
>>
>>  >    HenrikB> x <- rnorm(1e6);
>>  >
>>  >    [................]
>>  >
>>  >
>>  >    HenrikB> y <- log2(x);  # or log10(x)
>>  >    HenrikB> w <- warnings();
>>  >    HenrikB> print(object.size(w));
>>  >    HenrikB> ## [1] 8000536
>>  >    HenrikB> str(w);
>>  >    HenrikB> ## List of 1
>>  >    HenrikB> ##  $ NaNs produced: language log(c(2.12082478659910,
>>  >    HenrikB> 1.40263187453398, 1.574125429
>>  >    HenrikB> ## 83486, -0.816399069824751,  0.215940065840533, 1.20975177084379,
>>  >    HenrikB> -0.340287874362
>>  >    HenrikB> ## 813, 0.117151537611550,  ...
>>  >    HenrikB> ##  - attr(*, "dots")= list()
>>  >    HenrikB> ##  - attr(*, "class")= chr "warnings"
>>  >
>>  >    HenrikB> Note also how long it takes to display and str() the warning.
>>  >
>>  > Yes, indeed.
>>  > It's a subtle problem and happens
>>  > because in do_log1arg() a new call is constructed in which 'x'
>>  > has already been evaluated.
>>  >
>>  > A subtle fix to the subtle problem
>>  > is to replace  CAR(args) by CADR(call) in there
>>  >
>>  > --- arithmetic.c      (Revision 44626)
>>  > +++ arithmetic.c      (working copy)
>>  > @@ -1372,7 +1372,9 @@
>>  >     if(PRIMVAL(op) == 10) tmp = ScalarReal(10.0);
>>  >     if(PRIMVAL(op) == 2)  tmp = ScalarReal(2.0);
>>  >
>>  > -    PROTECT(Call = lang3(install("log"), CAR(args), tmp));
>>  > +    /* CADR(call) instead of CAR(args), since 'args' have been
>>  > +     * evaluated in Dispatch*(..) above : */
>>  > +    PROTECT(Call = lang3(install("log"), CADR(call), tmp));
>>  >     res = eval(Call, env);
>>  >     UNPROTECT(1);
>>  >     return res;
>>  >
>>  > -----
>>  >
>>  > That does fix the problem you've reported (and passes "make check")
>>  > but I'm not quite at ease with it, since it will lead to
>>  > effectively evaluate the argument *twice*.
>>  >
>>  > A different approach that I'd find cleaner
>>  > would be to *not* construct and eval() a
>>  > new Call inside do_log1arg, but I assume there had been a good
>>  > reason for doing things they way they are now...
>>
>>  There was (although possibly no longer -- there was a bug in S4 dispatch
>>  of primitives that failed to re-promise args).
>>
>>  The real issue is somewhere else entirely, the complete deparse in
>>  print.warnings.
>>     
>
> Thank you both for looking into this.
>
> Henrik
>
>   
>>  >
>>  > Martin Maechler, ETH Zurich
>>  >
>>  > ______________________________________________
>>  > R-devel at r-project.org mailing list
>>  > https://stat.ethz.ch/mailman/listinfo/r-devel
>>  >
>>
>>  --
>>  Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>  Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>  University of Oxford,             Tel:  +44 1865 272861 (self)
>>  1 South Parks Road,                     +44 1865 272866 (PA)
>>  Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>
>>     
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From ggrothendieck at gmail.com  Wed Feb 27 14:39:47 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 27 Feb 2008 08:39:47 -0500
Subject: [Rd] Warnings generated by log2()/log10() are really
	large/takes a long time to display
In-Reply-To: <59d7961d0802270250u7edbf378s9ccc9282cdc22fdb@mail.gmail.com>
References: <59d7961d0802262203y16b6b24dmebca4a29deca59f5@mail.gmail.com>
	<18373.8956.152890.662124@stat.math.ethz.ch>
	<alpine.LFD.1.00.0802270850350.17186@gannet.stats.ox.ac.uk>
	<59d7961d0802270250u7edbf378s9ccc9282cdc22fdb@mail.gmail.com>
Message-ID: <971536df0802270539v44d9c99apa2e6db51941e2004@mail.gmail.com>

On Wed, Feb 27, 2008 at 5:50 AM, Henrik Bengtsson <hb at stat.berkeley.edu> wrote:
> On Wed, Feb 27, 2008 at 12:56 AM, Prof Brian Ripley
> <ripley at stats.ox.ac.uk> wrote:
> > On Wed, 27 Feb 2008, Martin Maechler wrote:
> >
> >  > Thank you Henrik,
> >  >
> >  >>>>>> "HenrikB" == Henrik Bengtsson <hb at stat.berkeley.edu>
> >  >>>>>>     on Tue, 26 Feb 2008 22:03:24 -0800 writes:
> >  >
> >  > {with many superfluous empty statements ( i.e., trailing ";" ):
> >
> >  Indeed!
>
> I like to add a personal touch to the code I'm writing ;)
>
> Seriously, I added them here as a bait in order to get a chance to say
> that I finally found a good reason for adding the semicolons.  If you
> cut'n'paste code from certain web pages it may happen that
> newlines/carriage returns are not transferred and all code is pasted
> into the same line at the R prompt.  With semicolons you still get a
> valid syntax.  I cannot remember under what conditions this happened -

I have seen that too and many others have as well since in some forums
(not related to R) its common to indent all source lines by two spaces.  Any
line appearing without indentation must have been wrapped.


From Ted.Harding at manchester.ac.uk  Wed Feb 27 15:36:05 2008
From: Ted.Harding at manchester.ac.uk ( (Ted Harding))
Date: Wed, 27 Feb 2008 14:36:05 -0000 (GMT)
Subject: [Rd] Warnings generated by log2()/log10() are really large/t
In-Reply-To: <971536df0802270539v44d9c99apa2e6db51941e2004@mail.gmail.com>
Message-ID: <XFMail.080227143605.Ted.Harding@manchester.ac.uk>

On 27-Feb-08 13:39:47, Gabor Grothendieck wrote:
> On Wed, Feb 27, 2008 at 5:50 AM, Henrik Bengtsson
> <hb at stat.berkeley.edu> wrote:
>> On Wed, Feb 27, 2008 at 12:56 AM, Prof Brian Ripley
>> <ripley at stats.ox.ac.uk> wrote:
>> > On Wed, 27 Feb 2008, Martin Maechler wrote:
>> >
>> >  > Thank you Henrik,
>> >  >
>> >  >>>>>> "HenrikB" == Henrik Bengtsson <hb at stat.berkeley.edu>
>> >  >>>>>>     on Tue, 26 Feb 2008 22:03:24 -0800 writes:
>> >  >
>> >  > {with many superfluous empty statements ( i.e., trailing ";" ):
>> >
>> >  Indeed!
>>
>> I like to add a personal touch to the code I'm writing ;)
>>
>> Seriously, I added them here as a bait in order to get a chance to say
>> that I finally found a good reason for adding the semicolons.  If you
>> cut'n'paste code from certain web pages it may happen that
>> newlines/carriage returns are not transferred and all code is pasted
>> into the same line at the R prompt.  With semicolons you still get a
>> valid syntax.  I cannot remember under what conditions this happened -
> 
> I have seen that too and many others have as well since in some forums
> (not related to R) its common to indent all source lines by two spaces.
> Any line appearing without indentation must have been wrapped.

A not-so-subtle solution to this (subtle or not) problem.

NEVER paste from a browser (or a Word doc, or anything similar)
into the R command interface. Paste only from pure plain text.

Therefore, if you must paste, then paste first into a window
where a pure-plain-text editor is running.

Then you can see what you're getting, and can clean it up.
After that, you can paste from this directly into R, or can
save the file and source() it.

Ted.


--------------------------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding at manchester.ac.uk>
Fax-to-email: +44 (0)870 094 0861
Date: 27-Feb-08                                       Time: 14:36:02
------------------------------ XFMail ------------------------------


From efg at stowers-institute.org  Wed Feb 27 17:12:14 2008
From: efg at stowers-institute.org (Earl F. Glynn)
Date: Wed, 27 Feb 2008 10:12:14 -0600
Subject: [Rd] Unix-like touch to update modification timestamp of file?
References: <59d7961d0802262154r2e049998yf5ce8ea08ab5d249@mail.gmail.com>
Message-ID: <fq4251$6jp$1@ger.gmane.org>

"Henrik Bengtsson" <hb at stat.berkeley.edu> wrote in message 
news:<59d7961d0802262154r2e049998yf5ce8ea08ab5d249 at mail.gmail.com>...


> is it possible to update the modification time stamp of a file using R
> (on file systems supporting it)?

For a Windows PC, if you have RTools in your path (from 
http://www.murdoch-sutherland.com/Rtools/installer.html), then you should be 
able to use the touch that's in the RTools\bin directory:

system("touch sample.dat")

efg

Earl F. Glynn
Bioinformatics
Stowers Institute for Medical Research


From ggrothendieck at gmail.com  Wed Feb 27 17:24:29 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 27 Feb 2008 11:24:29 -0500
Subject: [Rd] Unix-like touch to update modification timestamp of file?
In-Reply-To: <fq4251$6jp$1@ger.gmane.org>
References: <59d7961d0802262154r2e049998yf5ce8ea08ab5d249@mail.gmail.com>
	<fq4251$6jp$1@ger.gmane.org>
Message-ID: <971536df0802270824q2b1165f3seb6648db33337ebc@mail.gmail.com>

If you only need Windows then this will do it even without RTools:

shell("copy /b /v myfile +,,>nul")



On Wed, Feb 27, 2008 at 11:12 AM, Earl F. Glynn
<efg at stowers-institute.org> wrote:
> "Henrik Bengtsson" <hb at stat.berkeley.edu> wrote in message
> news:<59d7961d0802262154r2e049998yf5ce8ea08ab5d249 at mail.gmail.com>...
>
>
> > is it possible to update the modification time stamp of a file using R
> > (on file systems supporting it)?
>
> For a Windows PC, if you have RTools in your path (from
> http://www.murdoch-sutherland.com/Rtools/installer.html), then you should be
> able to use the touch that's in the RTools\bin directory:
>
> system("touch sample.dat")
>
> efg
>
> Earl F. Glynn
> Bioinformatics
> Stowers Institute for Medical Research
>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From hb at stat.berkeley.edu  Wed Feb 27 19:27:50 2008
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Wed, 27 Feb 2008 10:27:50 -0800
Subject: [Rd] Unix-like touch to update modification timestamp of file?
In-Reply-To: <971536df0802270824q2b1165f3seb6648db33337ebc@mail.gmail.com>
References: <59d7961d0802262154r2e049998yf5ce8ea08ab5d249@mail.gmail.com>
	<fq4251$6jp$1@ger.gmane.org>
	<971536df0802270824q2b1165f3seb6648db33337ebc@mail.gmail.com>
Message-ID: <59d7961d0802271027s14b6ee1av669d5b2f788fcc20@mail.gmail.com>

On Wed, Feb 27, 2008 at 8:24 AM, Gabor Grothendieck
<ggrothendieck at gmail.com> wrote:
> If you only need Windows then this will do it even without RTools:
>
>  shell("copy /b /v myfile +,,>nul")

Interesting.  Show I figured out that '+' is for "append", but how to
interpret the two commas?

Thanks to both you.

Henrik

>
>
>
>
>
>  On Wed, Feb 27, 2008 at 11:12 AM, Earl F. Glynn
>  <efg at stowers-institute.org> wrote:
>  > "Henrik Bengtsson" <hb at stat.berkeley.edu> wrote in message
>  > news:<59d7961d0802262154r2e049998yf5ce8ea08ab5d249 at mail.gmail.com>...
>  >
>  >
>  > > is it possible to update the modification time stamp of a file using R
>  > > (on file systems supporting it)?
>  >
>  > For a Windows PC, if you have RTools in your path (from
>  > http://www.murdoch-sutherland.com/Rtools/installer.html), then you should be
>  > able to use the touch that's in the RTools\bin directory:
>  >
>  > system("touch sample.dat")
>  >
>  > efg
>  >
>  > Earl F. Glynn
>  > Bioinformatics
>  > Stowers Institute for Medical Research
>  >
>  >
>  > ______________________________________________
>  > R-devel at r-project.org mailing list
>  > https://stat.ethz.ch/mailman/listinfo/r-devel
>  >
>
>  ______________________________________________
>  R-devel at r-project.org mailing list
>  https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ggrothendieck at gmail.com  Wed Feb 27 21:23:51 2008
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 27 Feb 2008 15:23:51 -0500
Subject: [Rd] Unix-like touch to update modification timestamp of file?
In-Reply-To: <59d7961d0802271027s14b6ee1av669d5b2f788fcc20@mail.gmail.com>
References: <59d7961d0802262154r2e049998yf5ce8ea08ab5d249@mail.gmail.com>
	<fq4251$6jp$1@ger.gmane.org>
	<971536df0802270824q2b1165f3seb6648db33337ebc@mail.gmail.com>
	<59d7961d0802271027s14b6ee1av669d5b2f788fcc20@mail.gmail.com>
Message-ID: <971536df0802271223s13462925w2b3fd5d7f90805b@mail.gmail.com>

On Wed, Feb 27, 2008 at 1:27 PM, Henrik Bengtsson <hb at stat.berkeley.edu> wrote:
> On Wed, Feb 27, 2008 at 8:24 AM, Gabor Grothendieck
> <ggrothendieck at gmail.com> wrote:
> > If you only need Windows then this will do it even without RTools:
> >
> >  shell("copy /b /v myfile +,,>nul")
>
> Interesting.  Show I figured out that '+' is for "append", but how to
> interpret the two commas?
>

Commas generally have various undocumented effects in Windows batch
and sometimes Microsoft mentions one:
http://support.microsoft.com/kb/69581


From r.turner at auckland.ac.nz  Wed Feb 27 20:50:24 2008
From: r.turner at auckland.ac.nz (r.turner at auckland.ac.nz)
Date: Wed, 27 Feb 2008 20:50:24 +0100 (CET)
Subject: [Rd] Bug in help(). (PR#10859)
Message-ID: <20080227195025.417502834153@mail.pubhealth.ku.dk>


There appears to be a bug in help() when there are multiple packages  
attached
containing functions with the same name, and offline=TRUE.

Example:

	library(mgcv)
	library(gam)

If one simply does:

	help(gam) # No ``offline=TRUE''

then the following message appears:

Help on topic 'gam' was found in the following packages:

   Package               Library
   mgcv                  /Library/Frameworks/R.framework/Resources/ 
library
   gam                   /Users/rturner/Rlib

and a small chooser-menu window pops up to permit one to select the  
package to be referred to.

However if one does

	help(gam,offline=TRUE)

then the message about multiple packages appears, immediately  
followed by

Error in titles[i] <- if (inherits(tmp, "try-error")) "unknown title"  
else tmp[tools::file_path_sans_ext(tmp$File) ==  :
   nothing to replace with

(and no chooser-menu window pops up).

Session info:

R version 2.6.2 (2008-02-08)
i386-apple-darwin8.10.1

locale:
C

attached base packages:
[1] splines   stats     graphics  grDevices utils     datasets  methods
[8] base

other attached packages:
[1] mgcv_1.3-29 gam_0.98    misc_0.0-2

loaded via a namespace (and not attached):
[1] rcompgen_0.1-17 tcltk_2.6.2     tools_2.6.2


		cheers,

			Rolf Turner



######################################################################
Attention:\ This e-mail message is privileged and confid...{{dropped:9}}


From paulponcet at yahoo.fr  Thu Feb 28 10:35:03 2008
From: paulponcet at yahoo.fr (paulponcet at yahoo.fr)
Date: Thu, 28 Feb 2008 10:35:03 +0100 (CET)
Subject: [Rd] mean (PR#10864)
Message-ID: <20080228093503.2742C282EFF8@mail.pubhealth.ku.dk>

Full_Name: Paul PONCET
Version: 2.6.0
OS: Windows 2000
Submission from: (NULL) (83.137.240.218)


Function 'mean.default' calls function 'stats::median' if 'trim >= 0.5'. In that
case the call should be 'stats::median(x, na.rm = na.rm)' instead of
'stats::median(x, na.rm = FALSE)'.


From ripley at stats.ox.ac.uk  Thu Feb 28 14:35:20 2008
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Thu, 28 Feb 2008 14:35:20 +0100 (CET)
Subject: [Rd] Bug in help(). (PR#10859)
Message-ID: <20080228133520.F09B6283417B@mail.pubhealth.ku.dk>

On Wed, 27 Feb 2008, r.turner at auckland.ac.nz wrote:

>
> There appears to be a bug in help() when there are multiple packages
> attached
> containing functions with the same name, and offline=TRUE.

It's in utils:::print.help_files_with_topic, now fixed in R-devel.

The simple workaround is to supply the package name in the help call.

>
> Example:
>
> 	library(mgcv)
> 	library(gam)
>
> If one simply does:
>
> 	help(gam) # No ``offline=TRUE''
>
> then the following message appears:
>
> Help on topic 'gam' was found in the following packages:
>
>   Package               Library
>   mgcv                  /Library/Frameworks/R.framework/Resources/
> library
>   gam                   /Users/rturner/Rlib
>
> and a small chooser-menu window pops up to permit one to select the
> package to be referred to.
>
> However if one does
>
> 	help(gam,offline=TRUE)
>
> then the message about multiple packages appears, immediately
> followed by
>
> Error in titles[i] <- if (inherits(tmp, "try-error")) "unknown title"
> else tmp[tools::file_path_sans_ext(tmp$File) ==  :
>   nothing to replace with
>
> (and no chooser-menu window pops up).
>
> Session info:
>
> R version 2.6.2 (2008-02-08)
> i386-apple-darwin8.10.1
>
> locale:
> C
>
> attached base packages:
> [1] splines   stats     graphics  grDevices utils     datasets  methods
> [8] base
>
> other attached packages:
> [1] mgcv_1.3-29 gam_0.98    misc_0.0-2
>
> loaded via a namespace (and not attached):
> [1] rcompgen_0.1-17 tcltk_2.6.2     tools_2.6.2
>
>
> 		cheers,
>
> 			Rolf Turner
>
>
>
> ######################################################################
> Attention:\ This e-mail message is privileged and confid...{{dropped:9}}
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From peter.kharchenko at gmail.com  Thu Feb 28 17:54:23 2008
From: peter.kharchenko at gmail.com (Peter Kharchenko)
Date: Thu, 28 Feb 2008 11:54:23 -0500
Subject: [Rd] looking for R_approx in 2.6
Message-ID: <47C6E73F.40002@gmail.com>

Hi there. I was wondering what happened to R_approx from 
R_ext/Applic.h   ... it seems to have dissapeared in 2.6.x, and I can't 
seem to find it simply listed in some other header file.
thanks,
-peter.


From Greg.Snow at imail.org  Thu Feb 28 18:47:05 2008
From: Greg.Snow at imail.org (Greg Snow)
Date: Thu, 28 Feb 2008 10:47:05 -0700
Subject: [Rd] mean (PR#10864)
In-Reply-To: <20080228093503.2742C282EFF8@mail.pubhealth.ku.dk>
References: <20080228093503.2742C282EFF8@mail.pubhealth.ku.dk>
Message-ID: <07E228A5BE53C24CAD490193A7381BBBF2A95D@LP-EXCHVS07.CO.IHC.COM>

Look again at the whole function of mean.default.  All of the missing
values have already been removed if na.rm==TRUE before the call to
stats::median, so why waste time looking for missing values that are not
there.

-- 
Gregory (Greg) L. Snow Ph.D.
Statistical Data Center
Intermountain Healthcare
greg.snow at imail.org
(801) 408-8111
 
 

> -----Original Message-----
> From: r-devel-bounces at r-project.org 
> [mailto:r-devel-bounces at r-project.org] On Behalf Of 
> paulponcet at yahoo.fr
> Sent: Thursday, February 28, 2008 2:35 AM
> To: r-devel at stat.math.ethz.ch
> Cc: R-bugs at biostat.ku.dk
> Subject: [Rd] mean (PR#10864)
> 
> Full_Name: Paul PONCET
> Version: 2.6.0
> OS: Windows 2000
> Submission from: (NULL) (83.137.240.218)
> 
> 
> Function 'mean.default' calls function 'stats::median' if 
> 'trim >= 0.5'. In that case the call should be 
> 'stats::median(x, na.rm = na.rm)' instead of 
> 'stats::median(x, na.rm = FALSE)'.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


From rpeng at jhsph.edu  Thu Feb 28 23:51:51 2008
From: rpeng at jhsph.edu (Roger D. Peng)
Date: Thu, 28 Feb 2008 17:51:51 -0500
Subject: [Rd] looking for R_approx in 2.6
In-Reply-To: <47C6E73F.40002@gmail.com>
References: <47C6E73F.40002@gmail.com>
Message-ID: <47C73B07.60601@jhsph.edu>

Looks like it was removed in r42551 and from the comment it appears it was not 
part of the R API anyway.

-roger

Peter Kharchenko wrote:
> Hi there. I was wondering what happened to R_approx from 
> R_ext/Applic.h   ... it seems to have dissapeared in 2.6.x, and I can't 
> seem to find it simply listed in some other header file.
> thanks,
> -peter.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Roger D. Peng  |  http://www.biostat.jhsph.edu/~rpeng/


From nikko at hailmail.net  Fri Feb 29 01:36:40 2008
From: nikko at hailmail.net (Nicholas Lewin-Koh)
Date: Thu, 28 Feb 2008 19:36:40 -0500
Subject: [Rd] Unix-like touch to update modification timestamp of file?
Message-ID: <1204245400.26045.1239731449@webmail.messagingengine.com>

Wow, this has to win the prize for some of the most obscure
documentation ever.
Kudos on your M$-archaeology.
Nicholas

Message: 9
Date: Wed, 27 Feb 2008 15:23:51 -0500
From: "Gabor Grothendieck" <ggrothendieck at gmail.com>
Subject: Re: [Rd] Unix-like touch to update modification timestamp of
        file?
To: "Henrik Bengtsson" <hb at stat.berkeley.edu>
Cc: r-devel at stat.math.ethz.ch
Message-ID:
        <971536df0802271223s13462925w2b3fd5d7f90805b at mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Wed, Feb 27, 2008 at 1:27 PM, Henrik Bengtsson <hb at stat.berkeley.edu>
wrote:
> On Wed, Feb 27, 2008 at 8:24 AM, Gabor Grothendieck
> <ggrothendieck at gmail.com> wrote:
> > If you only need Windows then this will do it even without RTools:
> >
> >  shell("copy /b /v myfile +,,>nul")
>
> Interesting.  Show I figured out that '+' is for "append", but how to
> interpret the two commas?
>

Commas generally have various undocumented effects in Windows batch
and sometimes Microsoft mentions one:
http://support.microsoft.com/kb/69581


From ripley at stats.ox.ac.uk  Fri Feb 29 06:23:17 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 29 Feb 2008 05:23:17 +0000 (GMT)
Subject: [Rd] Warnings generated by log2()/log10() are really
 large/takes a long time to display
In-Reply-To: <alpine.LFD.1.00.0802270850350.17186@gannet.stats.ox.ac.uk>
References: <59d7961d0802262203y16b6b24dmebca4a29deca59f5@mail.gmail.com>
	<18373.8956.152890.662124@stat.math.ethz.ch>
	<alpine.LFD.1.00.0802270850350.17186@gannet.stats.ox.ac.uk>
Message-ID: <alpine.LFD.1.00.0802281201350.31159@gannet.stats.ox.ac.uk>

Changing deparse (and internal uses) to only deparse as many lines as 
are needed solves this and seems to give a noticeable performance post 
(5-10% or more) on quite a few packages.

On Wed, 27 Feb 2008, Prof Brian Ripley wrote:

> On Wed, 27 Feb 2008, Martin Maechler wrote:
>
>> Thank you Henrik,
>>
>>>>>>> "HenrikB" == Henrik Bengtsson <hb at stat.berkeley.edu>
>>>>>>>     on Tue, 26 Feb 2008 22:03:24 -0800 writes:
>>
>> {with many superfluous empty statements ( i.e., trailing ";" ):
>
> Indeed!
>
>>    HenrikB> x <- rnorm(1e6);
>>
>>    [................]
>>
>>
>>    HenrikB> y <- log2(x);  # or log10(x)
>>    HenrikB> w <- warnings();
>>    HenrikB> print(object.size(w));
>>    HenrikB> ## [1] 8000536
>>    HenrikB> str(w);
>>    HenrikB> ## List of 1
>>    HenrikB> ##  $ NaNs produced: language log(c(2.12082478659910,
>>    HenrikB> 1.40263187453398, 1.574125429
>>    HenrikB> ## 83486, -0.816399069824751,  0.215940065840533, 1.20975177084379,
>>    HenrikB> -0.340287874362
>>    HenrikB> ## 813, 0.117151537611550,  ...
>>    HenrikB> ##  - attr(*, "dots")= list()
>>    HenrikB> ##  - attr(*, "class")= chr "warnings"
>>
>>    HenrikB> Note also how long it takes to display and str() the warning.
>>
>> Yes, indeed.
>> It's a subtle problem and happens
>> because in do_log1arg() a new call is constructed in which 'x'
>> has already been evaluated.
>>
>> A subtle fix to the subtle problem
>> is to replace  CAR(args) by CADR(call) in there
>>
>> --- arithmetic.c	(Revision 44626)
>> +++ arithmetic.c	(working copy)
>> @@ -1372,7 +1372,9 @@
>>     if(PRIMVAL(op) == 10) tmp = ScalarReal(10.0);
>>     if(PRIMVAL(op) == 2)  tmp = ScalarReal(2.0);
>>
>> -    PROTECT(Call = lang3(install("log"), CAR(args), tmp));
>> +    /* CADR(call) instead of CAR(args), since 'args' have been
>> +     * evaluated in Dispatch*(..) above : */
>> +    PROTECT(Call = lang3(install("log"), CADR(call), tmp));
>>     res = eval(Call, env);
>>     UNPROTECT(1);
>>     return res;
>>
>> -----
>>
>> That does fix the problem you've reported (and passes "make check")
>> but I'm not quite at ease with it, since it will lead to
>> effectively evaluate the argument *twice*.
>>
>> A different approach that I'd find cleaner
>> would be to *not* construct and eval() a
>> new Call inside do_log1arg, but I assume there had been a good
>> reason for doing things they way they are now...
>
> There was (although possibly no longer -- there was a bug in S4 dispatch
> of primitives that failed to re-promise args).
>
> The real issue is somewhere else entirely, the complete deparse in
> print.warnings.
>
>>
>> Martin Maechler, ETH Zurich
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From regetz at nceas.ucsb.edu  Fri Feb 29 08:43:44 2008
From: regetz at nceas.ucsb.edu (Jim Regetz)
Date: Thu, 28 Feb 2008 23:43:44 -0800
Subject: [Rd] Problems initializing an extended S4 class
Message-ID: <47C7B7B0.6070406@nceas.ucsb.edu>

Hi all,

I am having trouble extending S4 classes in cases where I'm using both 
validity and initialize methods. I've read as much S4 information as I 
can find, but I've yet to have that "a-ha" moment.

In my application, I am using validity methods to guard against 
inappropriate input data that my code has no way of handling, and 
initialize methods to detect and deal with fixable problems. As a toy 
example, consider classes A and B and associated methods as defined 
below. I use a validity method for A to complain about negative values, 
and an initialize method to "correct" small input values. B should 
simply extend A by adding an extra slot. The example is contrived, but 
it illustrates a key behavior that I also encounter in my real code:

setClass("A", representation(x="numeric"))
setClass("B", representation(y="character"), contains="A")

setValidity("A", function(object) {
     message("start validate A")
     retval <- NULL
     if (any(object at x<0))
         retval <- c(retval, "x must be positive")
     message("done validate A")
     if(is.null(retval)) return(TRUE) else return(retval)
})

setMethod("initialize", "A", function(.Object, ...) {
     message("start init A")
     .Object <- callNextMethod()
     x <- .Object at x
     .Object at x <- ifelse(log(x)<0, 1, x)
     message("done init A")
     .Object
})

setMethod("initialize", "B", function(.Object, ...) {
     message("start init B")
     callNextMethod()
})


# Creating an instance of A works just as I would expect
> a <- new("A", x=c(0.5, 2))
start init A
start validate A
done validate A
done init A
> a
An object of class ?A?
Slot "x":
[1] 1 2

# But subsequently creating a derived B object fails!
> new("B", a, y="foo")
start init B
start init A
start validate A
start init A
Error in checkSlotAssignment(object, name, value) :
   assignment of an object of class "logical" is not valid for slot "x"
in an object of class "A"; is(value, "numeric") is not TRUE

The two things I haven't quite figured out are:

1. Why is initialize invoked *twice* for A during instantiation of B?

2. The second time initialize is invoked for A, it appears .Object at x is 
only bound to its implicit prototype value of numeric(0). Why? Of 
course, this leads to an error because the ifelse expression 
subsequently evaluates to logical(0) rather than a numeric vector as 
intended. Again, this is a contrived example, but a very real problem in 
my code.

I suppose I could define a prototype for A that I know won't break my 
initialize method, but that seems inelegant and hard to maintain. Is 
there a better way to code this so that I can reliably instantiate B 
using a valid A object? Hopefully I've just got something wrong in the 
formals for my initialize methods or in my use of getNextMethod(), but 
I've had no luck trying some alternatives -- and ultimately I'd prefer 
to better understand the underlying behavior rather than stumble onto 
something that merely appears to work.

I'd be grateful for any suggestions...

Thanks,
Jim

------------------------------
James Regetz, Ph.D.
Scientific Programmer/Analyst
National Center for Ecological Analysis & Synthesis
735 State St, Suite 300
Santa Barbara, CA 93101


From A.R.Runnalls at kent.ac.uk  Fri Feb 29 10:51:47 2008
From: A.R.Runnalls at kent.ac.uk (Andrew Runnalls)
Date: Fri, 29 Feb 2008 09:51:47 +0000
Subject: [Rd] CXXR: Refactoring the R interpreter into C++
Message-ID: <47C7D5B3.70403@kent.ac.uk>

For a while now I have been working on a modified, but so far as
possible fully functional, version of R in which the interpreter is
progressively refactored (reengineered) from C to C++.  The work is
still at an early stage, but I think that sufficient progress has now
been made for it to be of interest to some readers of this list.

Further information is at http://www.cs.kent.ac.uk/projects/cxxr

Andrew Runnalls

-- 
Dr Andrew Runnalls,
Computing Laboratory,
University of Kent,
CANTERBURY CT2 7NF, UK

Tel: (0)1227 823821


From maechler at stat.math.ethz.ch  Fri Feb 29 11:32:53 2008
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 29 Feb 2008 11:32:53 +0100
Subject: [Rd] Warnings generated by log2()/log10() are really large/t
In-Reply-To: <XFMail.080227143605.Ted.Harding@manchester.ac.uk>
References: <971536df0802270539v44d9c99apa2e6db51941e2004@mail.gmail.com>
	<XFMail.080227143605.Ted.Harding@manchester.ac.uk>
Message-ID: <18375.57173.255800.520830@stat.math.ethz.ch>

>>>>> "TH" == Ted Harding <Ted.Harding at manchester.ac.uk>
>>>>>     on Wed, 27 Feb 2008 14:36:05 -0000 (GMT) writes:

    TH> On 27-Feb-08 13:39:47, Gabor Grothendieck wrote:
    >> On Wed, Feb 27, 2008 at 5:50 AM, Henrik Bengtsson
    >> <hb at stat.berkeley.edu> wrote:
    >>> On Wed, Feb 27, 2008 at 12:56 AM, Prof Brian Ripley
    >>> <ripley at stats.ox.ac.uk> wrote:
    >>> > On Wed, 27 Feb 2008, Martin Maechler wrote:
    >>> >
    >>> >  > Thank you Henrik,
    >>> >  >
    >>> >  >>>>>> "HenrikB" == Henrik Bengtsson <hb at stat.berkeley.edu>
    >>> >  >>>>>>     on Tue, 26 Feb 2008 22:03:24 -0800 writes:
    >>> >  >
    >>> >  > {with many superfluous empty statements ( i.e., trailing ";" ):
    >>> >
    >>> >  Indeed!
    >>> 
    >>> I like to add a personal touch to the code I'm writing ;)
    >>> 
    >>> Seriously, I added them here as a bait in order to get a chance to say
    >>> that I finally found a good reason for adding the semicolons.  If you
    >>> cut'n'paste code from certain web pages it may happen that
    >>> newlines/carriage returns are not transferred and all code is pasted
    >>> into the same line at the R prompt.  With semicolons you still get a
    >>> valid syntax.  I cannot remember under what conditions this happened -
    >> 
    >> I have seen that too and many others have as well since in some forums
    >> (not related to R) its common to indent all source lines by two spaces.
    >> Any line appearing without indentation must have been wrapped.

    TH> A not-so-subtle solution to this (subtle or not) problem.

:-)

    TH> NEVER paste from a browser (or a Word doc, or anything similar)
    TH> into the R command interface. Paste only from pure plain text.

Yes.  Thank you, Ted, for your good points which I'm just
re-iterating in the following:

    TH> Therefore, if you must paste, then paste first into a window
    TH> where a pure-plain-text editor is running.

Yes; or an R-aware editor (Tinn-R, Emacs(ESS), WinEDT, ....)

    TH> Then you can see what you're getting, and can clean it up.

Yes; this gets you an ``R script file'' (ending that in '.R' is
a good choice) that you also can comment further etc etc

    TH> After that, you can paste from this directly into R, or can
    TH> save the file and source() it.

    TH> Ted.
Yes, or (better :-) once you're using an R-aware editor, you can
send parts or all of the file to the running R also more quickly.


Using R code in *files* that you save, comment, re-evaluate, ...
IMO is still *the* way to do (almost) anything serious with R.

Using extraneous ";" at the end of lines, just to allow
something which is not at all recommendable
is not a good reason IMO.
Martin


From hilmar.berger at imise.uni-leipzig.de  Fri Feb 29 13:41:31 2008
From: hilmar.berger at imise.uni-leipzig.de (Hilmar Berger)
Date: Fri, 29 Feb 2008 13:41:31 +0100
Subject: [Rd] ifelse drops classes
Message-ID: <fq8ugo$9qm$1@ger.gmane.org>

Hi all,

I guess that this is rather a feature request than a bug report, but I'm 
not really sure:

I stumbled over this today (R 2.6.2, WinXP):

 > c=c(as.Date("2007-01-01"))
 > class(c)
[1] "Date"
 > ifelse(is.na(c),as.Date(Sys.time()), c)
[1] 13514
 > typeof(ifelse(is.na(c),as.Date(Sys.time()), c))
[1] "double"
 > class(ifelse(is.na(c),as.Date(Sys.time()), c))
[1] "numeric"
 > mode(ifelse(is.na(c),as.Date(Sys.time()), c))
[1] "numeric"

So - unexpected by me - ifelse drops the date class.

Afterwards I found in the Help page:

The mode of the result may depend on the value of test, and the class 
attribute of the result is taken from test and may be inappropriate for 
the values selected from yes and no.

So even I should expect that the class of the results might not "Date",

1. shouldn't it be 'logical' (class(TRUE)) instead of 'numeric' ?
2. Isn't it pretty useless to take the class from the test argument, 
given the fact that this will be usely class(TRUE/FALSE) ?
3. If we can take the mode from the value selected, why can't we take 
the class attribute as well ?

The Help page advices:
Sometimes it is better to use a construction such as (tmp <- yes; 
tmp[!test] <- no[!test]; tmp), possibly extended to handle missing 
values in test.

So - why doesn't ifelse use a similiar construction ?

In conclusion, I plead for changing ifelse() to not drop class attributes.

Regards,
Hilmar


From statba at nus.edu.sg  Fri Feb 29 11:19:40 2008
From: statba at nus.edu.sg (Berwin A Turlach)
Date: Fri, 29 Feb 2008 18:19:40 +0800
Subject: [Rd] patch for random.c
Message-ID: <20080229181940.457c9bf7@berwin-nus1>

Dear all,

while looking for some inspiration of how to organise some code, I
studied the code of random.c and noticed that for distributions with
2 or 3 parameters the user is not warned if NAs are created while such
a warning is issued for distributions with 1 parameter.  E.g:

R version 2.7.0 Under development (unstable) (2008-02-29 r44639)

[...]

> rexp(2, rate=Inf)
[1] NaN NaN
Warning message:
In rexp(2, rate = Inf) : NAs produced
> rnorm(2, mean=Inf)
[1] NaN NaN

Surprisingly, the code for issuing warnings for distributions with 2 or
3 parameters is essentially there, but does not seem to be used.  The
attached patch rectifies this.  With the patch the above command produce
the following output:

> rexp(2, rate=Inf)
[1] NaN NaN
Warning message:
In rexp(2, rate = Inf) : NAs produced
> rnorm(2, mean=Inf)
[1] NaN NaN
Warning message:
In rnorm(2, mean = Inf) : NAs produced

Please ignore the patch if the code that was designed to produce the
warning had been removed on purpose.  

BTW, there are other places in the code were NAs can be created but no
warning is issued.  E.g:

> rexp(2, rate=numeric())
[1] NA NA
> rnorm(2, mean=numeric())
[1] NA NA

I wonder whether a warning should be issued in this case too.  

Best wishes,

	Berwin

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: R-patch
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20080229/115e0cc2/attachment.pl 

From attenka at utu.fi  Fri Feb 29 11:28:40 2008
From: attenka at utu.fi (Atte Tenkanen)
Date: Fri, 29 Feb 2008 12:28:40 +0200
Subject: [Rd] Can't interrupt R-processes in R OSX 2.6.2
Message-ID: <f758f2fe4a787.47c7fa78@utu.fi>

Hello,

Before I was able to interrupt R-calculations by pushing ESC, but now with R 2.6.2 (OSX Intel) it doesn't work. Is it bug or not? 

Regards,

Atte Tenkanen
University of Turku, Finland
Department of Musicology
+023335278


From ripley at stats.ox.ac.uk  Fri Feb 29 15:00:02 2008
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 29 Feb 2008 14:00:02 +0000 (GMT)
Subject: [Rd] Can't interrupt R-processes in R OSX 2.6.2
In-Reply-To: <f758f2fe4a787.47c7fa78@utu.fi>
References: <f758f2fe4a787.47c7fa78@utu.fi>
Message-ID: <alpine.LFD.1.00.0802291355030.10556@auk.stats.ox.ac.uk>

On Fri, 29 Feb 2008, Atte Tenkanen wrote:

> Hello,
>
> Before I was able to interrupt R-calculations by pushing ESC, but now 
> with R 2.6.2 (OSX Intel) it doesn't work. Is it bug or not?

You mean from the R.app GUI?  This has been discussed on the R-sig-mac 
list (the appropriate place for this question), and the advice is to 
update your version of R.app. But please consult the list archives at 
https://stat.ethz.ch/pipermail/r-sig-mac/.

>
> Regards,
>
> Atte Tenkanen
> University of Turku, Finland
> Department of Musicology
> +023335278
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


