From jacobm@magnet.drcmr.dk  Wed Jun  2 09:58:47 1999
From: jacobm@magnet.drcmr.dk (jacobm@magnet.drcmr.dk)
Date: Wed, 2 Jun 1999 10:58:47 +0200 (MET DST)
Subject: RedHat Linux 6.0 Problems (PR#201)
Message-ID: <199906020858.KAA23520@pubhealth.ku.dk>

Full_Name: Jacob Rørbech Marstrand
Version: 63.3
OS: RedHat Linux 6.0
Submission from: (NULL) (129.142.179.3)


I had R running in RedHat Linux 5.2. After updating to RedHat Linux 6.0 I get
the 
following message when I try to start R.
/usr/lib/R/bin/R.binary: error in loading shared libraries:
/usr/lib/R/bin/R.binary: 
undefined symbol: __setfpucw

After that Ive tried to upgrade with the newest RPMS R-0.64.1-4.src.rpm, but it
doesnt 
solve the problem.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  2 10:27:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Jun 1999 11:27:54 +0200
Subject: RedHat Linux 6.0 Problems (PR#201)
In-Reply-To: jacobm@magnet.drcmr.dk's message of "Wed, 2 Jun 1999 10:58:47 +0200 (MET DST)"
References: <199906020858.KAA23520@pubhealth.ku.dk>
Message-ID: <x2wvxnuf39.fsf@blueberry.kubism.ku.dk>

jacobm@magnet.drcmr.dk writes:

> I had R running in RedHat Linux 5.2. After updating to RedHat Linux 6.0 I get
> the 
> following message when I try to start R.
> /usr/lib/R/bin/R.binary: error in loading shared libraries:
> /usr/lib/R/bin/R.binary: 
> undefined symbol: __setfpucw
> 
> After that Ive tried to upgrade with the newest RPMS R-0.64.1-4.src.rpm, but it
> doesnt 
> solve the problem.
> 

Hmmm. Compiling from raw sources might be easier (and is known to work
on at least one system!). 

Anyway, if you're still getting the __setfpucw message when
rebuilding, then I strongly suspect that the .src.rpm contain the
results of a run of "configure" on an RH5.x system, resulting in

/* Some Linux systems may need this */
#define HAVE___SETFPUCW 1

in .../src/include/Platform.h. Perhaps it works to remove that line
and rebuild.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Jun  2 11:24:43 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 02 Jun 1999 12:24:43 +0200 (CEST)
Subject: RedHat Linux 6.0 Problems (PR#201)
In-Reply-To: <x2wvxnuf39.fsf@blueberry.kubism.ku.dk>
Message-ID: <XFMail.990602122443.plummer@iarc.fr>


On 02-Jun-99 Peter Dalgaard BSA wrote:
> jacobm@magnet.drcmr.dk writes:
> 
>> I had R running in RedHat Linux 5.2. After updating to RedHat Linux 6.0 I
>> get
>> the 
>> following message when I try to start R.
>> /usr/lib/R/bin/R.binary: error in loading shared libraries:
>> /usr/lib/R/bin/R.binary: 
>> undefined symbol: __setfpucw
>> 
>> After that Ive tried to upgrade with the newest RPMS R-0.64.1-4.src.rpm, but
                                                                   ^^^

Did you really rebuild the source rpm, or is this a typo? If the latter, then
this is not an R bug, but a binary incompatibility between RedHat 5.* and 6.0.

> Hmmm. Compiling from raw sources might be easier (and is known to work
> on at least one system!). 
> 
> Anyway, if you're still getting the __setfpucw message when
> rebuilding, then I strongly suspect that the .src.rpm contain the
> results of a run of "configure" on an RH5.x system, resulting in
> 
> /* Some Linux systems may need this */
>#define HAVE___SETFPUCW 1
> 
> in .../src/include/Platform.h. Perhaps it works to remove that line
> and rebuild.

No it doesn't. If you rebuild the source rpm then you run configure.
In fact the build sequence is

./configure
make
make check
make dvi
make install

All the rpm package management stuff is just wrapped around this.
It should not be any different from rebuilding from the pristine source.
In fact I can't understand why the build didn't stop at the make
check stage (There used to be a bug in the Makefile, but I thought this
was fixed now).

I finally have a copy of RedHat 6.0 (although upgrading hasn't gone
too well so far, as usual...) so I should have RH6.0 RPMS out by the
end of the week.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Wed Jun  2 14:02:10 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Wed, 2 Jun 1999 15:02:10 +0200 (MET DST)
Subject: persp box occlusion bug (PR#202)
Message-ID: <199906021302.PAA27137@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Bug in persp() bounding box:
If the surface being plotted extends below the lower z-axis boundary, the box
is
drawn with the wrong occlusion. The box is shown as being occluded by the
surface
even though it should be in front of the surface.

The box is correct for surface extending above the box. Problem is only for
surface extending below the box.

This exhibits the bug:

std<-rep(seq(-32,32,8),9)/1000 * 60
cf<-rep(seq(-32,32,8),rep(9,9))/1000 *60 
dp<-(cf-std)/.6
std<-unique(std)
cf<-unique(cf)
dp<-t(matrix(dp,length(cf),length(std)))
persp(std,cf,dp, xlim=c(-2,2), ylim=c(-2,2), zlim=c(0,5),theta=-40,    
phi=45,
box=TRUE,ltheta=-120, lphi=120,
d=1.5, shade=.7)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun  2 18:23:45 1999
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Wed, 2 Jun 1999 19:23:45 +0200 (MET DST)
Subject: dput and options()$digits (PR#203)
Message-ID: <199906021723.TAA29613@pubhealth.ku.dk>

dput seems to rely on the setting of options()$digits to determine the precision

with which things are written, and the default digits does not seem adequate
(e.g. time series attributes can get truncated enough to make them invalid). A
default for dput of digits=16 would be better.

Paul Gilbert




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun  3 08:08:16 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 3 Jun 1999 09:08:16 +0200
Subject: dput and options()$digits (PR#203)
In-Reply-To: <199906021723.TAA29613@pubhealth.ku.dk>
 (pgilbert@bank-banque-canada.ca)
References: <199906021723.TAA29613@pubhealth.ku.dk>
Message-ID: <199906030708.JAA00438@sophie.ethz.ch>

>>>>> On Wed, 2 Jun 1999 19:23:45 +0200 (MET DST), pgilbert@bank-banque-canada.ca (Paul Gilbert) said:

    PaulG> dput seems to rely on the setting of options()$digits to
    PaulG> determine the precision with which things are written, and the
    PaulG> default digits does not seem adequate ....

Yes, thank you;
This has been fixed for a while now for the next release (0.65),
[always available as daily snapshot "R-devel..." from CRAN].

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fears@roycastle.liv.ac.uk  Thu Jun  3 14:09:49 1999
From: fears@roycastle.liv.ac.uk (fears@roycastle.liv.ac.uk)
Date: Thu, 3 Jun 1999 15:09:49 +0200 (MET DST)
Subject: very minor Rgui problem in rw0641 (PR#204)
Message-ID: <199906031309.PAA08974@pubhealth.ku.dk>

In Rgui (rw0641) the dialog boxes opened by Help->R(standard interface)
and Help->Apropos have to be closed by actually clicking on OK, rather
than by hitting return. (Once I'm at the keyboard typing in the search
term, return is more natural than going back to the mouse. But maybe I'm
just old-fashioned.)

Is it OK to mention two bugs in one report? After using bug.report('x')
which throws me into a Notepad screen, the Rgui is frozen. I can't
minimize the notepad document and carry on with R. (The main reason to
report this one is to apologise if I got the names of either of the
above menus wrong; I can't check while I'm writing this!). But I can
open other applications, such as Outlook, to copy/paste/send this. As
soon as I kill the notpad document, I'm back in R OK.

I'm using NT4 (that doesn't seem to be obvious from the automatic info
below?)



--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 8
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

********************************************
Dr S.C. Fear
Statistician         Hon. Lecturer
Roy Castle ICLCR     Dept Math. Sci.
200 London Road      University of Liverpool
Liverpool L3 9TA     Liverpool L69 3BX

fears@rc.liv.ac.uk   scf@liv.ac.uk

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fears@roycastle.liv.ac.uk  Thu Jun  3 14:56:15 1999
From: fears@roycastle.liv.ac.uk (fears@roycastle.liv.ac.uk)
Date: Thu, 3 Jun 1999 15:56:15 +0200 (MET DST)
Subject: IE5 html help search failure (PR#205)
Message-ID: <199906031356.PAA09762@pubhealth.ku.dk>

I hesitate to report this one because it is very likely system
dependent, and I have very little faith in my browser. Still, it may
point to something useful for someone to know.

On NT4, after help.start() brings up the web interface just fine
(despite the pessimistic warning on the terminal; is that still
necessary?), I can do apparaently anything in the help system, except
search.

If I'm on the top search page page
(E:\programs\R\rw0641\doc\html\search\SearchEngine.html) and click on
any topic, say 'aplot', I go to 'address'
javascript:searchInIndex%20('%20aplot') and Explorer says 'Done', but
nothing happens. Click on 'Go back' and I get 'No matches for aplot have
been found'.

I've tried several others, and also typing easy terms such as 'plot'
into the dialog box, all to no avail.

Now here's the bit where you might get cross with me. I'm using MS
Internet Explorer 5, and I can't readily confirm the same thing happens
with a standard release such as 4, since our local administrators
decided in their wisdom to remove 4 when they installed 5. And of course
it may be a problem with our local java installation too (or as well).
I'm not in charge of that, but if anyone  can guess as to what might be
set up wrong at least perhaps I can point the IT helpdesk in the right
direction.

Or maybe after all it is actually a bug in the release.

S


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 8
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

********************************************
Dr S.C. Fear
Statistician         Hon. Lecturer
Roy Castle ICLCR     Dept Math. Sci.
200 London Road      University of Liverpool
Liverpool L3 9TA     Liverpool L69 3BX

fears@rc.liv.ac.uk   scf@liv.ac.uk

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it  Thu Jun  3 21:51:15 1999
From: guido@hal.stat.unipd.it (guido@hal.stat.unipd.it)
Date: Thu, 3 Jun 1999 22:51:15 +0200 (MET DST)
Subject: very minor Rgui problem in rw0641 (PR#204)
Message-ID: <199906032051.WAA11959@pubhealth.ku.dk>

On Thu, Jun 03, 1999 at 03:09:49PM +0200, fears@roycastle.liv.ac.uk wrote:
> In Rgui (rw0641) the dialog boxes opened by Help->R(standard interface)
> and Help->Apropos have to be closed by actually clicking on OK, rather
> than by hitting return. (Once I'm at the keyboard typing in the search
> term, return is more natural than going back to the mouse. But maybe I'm
> just old-fashioned.)

  This is a limit ot the toolkit we are using (GraphApp) which
  doesn't let to define a "default button". Brian and I have plans
  to look into this but, please, don't ask when.
  Anyway, keep reporting also this minor points.

> 
> Is it OK to mention two bugs in one report? After using bug.report('x')
> which throws me into a Notepad screen, the Rgui is frozen. I can't
> minimize the notepad document and carry on with R. (The main reason to
> report this one is to apologise if I got the names of either of the
> above menus wrong; I can't check while I'm writing this!). But I can
> open other applications, such as Outlook, to copy/paste/send this. As
> soon as I kill the notpad document, I'm back in R OK.
> 
  In the actual Windows implementation of bug.report, R waits for the editor
  to complete. This is also the Unix behaviour.
  If you don't like it, you should edit the function changing the
  the 'system' call towards the end from
  system(paste(.Options$editor, file))    
  to
  system(paste(.Options$editor, file), wait=FALSE)
  
  The easiest way is to add the revised bug.report function to your 
  .Rprofile or to the system wide rwXXXX/etc/Rprofile so that it will
  replace the actual one (which lives in rwXXXX/library/base/R/base,
  but please, don't modify this file if you are not sure about what you
  are doing).

  Any opinion on making this the default behaviour for next releases ?
  


> I'm using NT4 (that doesn't seem to be obvious from the automatic info
> below?)

  You are right about this. Given the many flavours of Windows around
  Version, machine and friends should report more specific informations.
  This should be easy so, maybe, it will be in the next release.


  guido

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun  4 16:21:18 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 4 Jun 1999 17:21:18 +0200
Subject: dealing with large objects -- memory wasting ?
Message-ID: <199906041521.RAA14725@sophie.ethz.ch>

Consider the following:

    > gcinfo(TRUE)
    [1] FALSE
    > rm(list=ls()); gc()
	     free  total
    Ncells 135837 250000
    Vcells 747306 786432
	   ------
    > n <- 10000; p <- 20; X <- matrix(rnorm(n*p), n,p); gc()
    Garbage collection [nr. 23]...
    135839 cons cells free (54%)
    4275 Kbytes of heap free (69%)
	     free  total
    Ncells 135829 250000
    Vcells 547299 786432
	   ------
	   which is roughly 200000 less than before;
	   i.e. Vcells are 8-byte sized,
	   1 Vcell = 1 double or 2 integers

  Since we have 747 thousands of them , 
  constructing X the double size (400'000) shouldn't be a problem ...

    > rm(X); n <- 20000; p <- 20; X <- matrix(rnorm(n*p), n,p); gc()
    Garbage collection [nr. 25]...
    135823 cons cells free (54%)
    2713 Kbytes of heap free (44%)

    Error: heap memory (6144 Kb) exhausted [needed 3125 Kb more]
	   See "help(Memory)" on how to increase the heap size.

but it *is*, and it's
matrix' fault.  (it constructs  x, i.e. effectively doubles it's argument).

----

There seem to be worse problems when use 

      var(x)

and x is one of those huge  n x p  matrices...

--------
Of course there are problems like these to be optimized -- ``everywhere''.
Any proposals for a general approach?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun  4 18:14:46 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 04 Jun 1999 19:14:46 +0200 (CEST)
Subject: dealing with large objects -- memory wasting ?
In-Reply-To: <199906041521.RAA14725@sophie.ethz.ch>
Message-ID: <XFMail.990604191446.plummer@iarc.fr>

[Long example of matrix() wasting memory
 by Martin Maechler (MM) snipped]

A minor point perhaps, but  I think there is an error
in your calculations.

If I understand correctly, the problem is that matrix()
assigns a local copy of its answer before returning it.
So  a version which does not do this ...

function (data = NA, nrow = 1, ncol = 1, byrow = FALSE) 
{
    if (missing(nrow)) 
        nrow <- ceiling(length(data)/ncol)
    else if (missing(ncol)) 
        ncol <- ceiling(length(data)/nrow)
    .Internal(matrix(data, nrow, ncol, byrow))
}

should do better 

Using commands like

rm(X); n <- ... ; p <- 20; X <- matrix(rnorm(n*p), n,p); gc()

the largest value of n I could use successfully was about
18000, which still less than what you suggest,

MM> Since we have 747 thousands of them , 
MM> constructing X the double size (400'000) shouldn't be a problem ...

and only 50% greater than what you can do with the standard matrix()
function (n ~ 12000).

I think the answer is that your calculations did not take
into account the argument to matrix - rnorm(n*p) - which
also temporarily takes up as much memory as the final matrix.

With trivial data you can do better:

rm(X); n <- ... ; p <- 20; X <- matrix(0, n,p); gc()

You can assign up to n ~ 37000 with the standard matrix()
function and n ~ 74000 with the modified version, which
is the expected 100% improvement.

MM>There seem to be worse problems when use 
MM>
MM>     var(x)
MM>
MM>and x is one of those huge  n x p  matrices...

I couldn't assign a matrix that was big enough to crash var().
Is there a problem here? The fact that the default value of 
y is x is not a problem because of lazy evaluation.
If you assigned y in the body of the function ...

function (x, y, na.rm = FALSE, use) 
{
    if (missing(y)) 
        y <- x
    if (missing(use)) 
        use <- if (na.rm) 
            "complete.obs"
        else "all.obs"
    cov(x, y, use = use)
}

then you would have problems, but this isn't the case.
What am I missing?

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it  Sat Jun  5 11:01:34 1999
From: guido@hal.stat.unipd.it (guido@hal.stat.unipd.it)
Date: Sat, 5 Jun 1999 12:01:34 +0200 (MET DST)
Subject: IE5 html help search failure (PR#205)
Message-ID: <199906051001.MAA23947@pubhealth.ku.dk>

On Thu, Jun 03, 1999 at 03:56:15PM +0200, fears@roycastle.liv.ac.uk wrote:
> I hesitate to report this one because it is very likely system
> dependent, and I have very little faith in my browser. Still, it may
> point to something useful for someone to know.

  You did the right thing. It was one of my (many?) faults.
  I overlooked the effect of one of the last changes done before
  preparing the release.

> 
> On NT4, after help.start() brings up the web interface just fine
> (despite the pessimistic warning on the terminal; is that still
> necessary?), I can do apparaently anything in the help system, except
> search.

  help.start() uses standard Windows association between file type and
  application,i.e., if html files are not associate to a browser 
  it fails. This is the reason of the warning. I have not looked
  to the source but I suppose that we can modify actual behaviour
  to give the warning only when actual implementation fails.  
                      ~~~~

> 
> If I'm on the top search page page
> (E:\programs\R\rw0641\doc\html\search\SearchEngine.html) and click on
> any topic, say 'aplot', I go to 'address'
> javascript:searchInIndex%20('%20aplot') and Explorer says 'Done', but
> nothing happens. Click on 'Go back' and I get 'No matches for aplot have
> been found'.
> 

  The distribution misses a file used by the search engine. 
  However, at least on my system, it can be generated on the fly executing 
  > link.html.help()
  from a running R process (or from Rgui or from Rterm)
  Indeed, to reproduce the behaviour you reported, I had to
  do a fresh installation. On my "real' installation, since I
  added some packages and runned "link.html.help()", all went well. 


> I've tried several others, and also typing easy terms such as 'plot'
> into the dialog box, all to no avail.
> 
> Now here's the bit where you might get cross with me. I'm using MS
> Internet Explorer 5, and I can't readily confirm the same thing happens
> with a standard release such as 4, since our local administrators
> decided in their wisdom to remove 4 when they installed 5. And of course
> it may be a problem with our local java installation too (or as well).
> I'm not in charge of that, but if anyone  can guess as to what might be
> set up wrong at least perhaps I can point the IT helpdesk in the right
> direction.
> 

  Since we are on the topic (search and version of IE), I noted
  that using IE4 on a Win98 machine, when I click on 'aplot' or
  friends I get two html pages, the first with the rigth informations,
  the second blank. So, I have to click on the "previous page"
  button to look to the results. On the same machine and on the same 
  R installation, if I use Netscape 4.04 as the default browser
  all works as expected (i.e, no 'second' page). So, my
  conclusion in this moment is that the problem is due to the
  IE4 Java VM not to R. I haven't test IE5 but I would be glad to
  know what happens.

  guido










-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From P.Herkenrath@rrz.uni-koeln.de  Sat Jun  5 15:18:44 1999
From: P.Herkenrath@rrz.uni-koeln.de (P.Herkenrath@rrz.uni-koeln.de)
Date: Sat, 5 Jun 1999 16:18:44 +0200 (MET DST)
Subject: seg fault via text() (PR#206)
Message-ID: <199906051418.QAA24546@pubhealth.ku.dk>

Full_Name: Peter Herkenrath
Version: 0.63.1
OS: Linux
Submission from: (NULL) (134.95.88.203)


in *old* R version 0.63.1

foo <- function(...., label=NULL, .....) {
      ....
      plot(....)
      text(x,y,label)
      ....
}

results in a segmentation fault (if label is not initialized by the caller)
bug? 
title() for example is resistent.

best regards
Peter

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jun  5 19:00:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Jun 1999 20:00:53 +0200
Subject: seg fault via text() (PR#206)
In-Reply-To: P.Herkenrath@rrz.uni-koeln.de's message of "Sat, 5 Jun 1999 16:18:44 +0200 (MET DST)"
References: <199906051418.QAA24546@pubhealth.ku.dk>
Message-ID: <x21zfqmsru.fsf@blueberry.kubism.ku.dk>

P.Herkenrath@rrz.uni-koeln.de writes:

> Full_Name: Peter Herkenrath
> Version: 0.63.1
> OS: Linux
> Submission from: (NULL) (134.95.88.203)
> 
> 
> in *old* R version 0.63.1
> 
> foo <- function(...., label=NULL, .....) {
>       ....
>       plot(....)
>       text(x,y,label)
>       ....
> }
> 
> results in a segmentation fault (if label is not initialized by the caller)
> bug? 
> title() for example is resistent.

Still there in 0.64.1 and -patches. The development version has

> foo<-function(label=NULL){plot(0);text(1,0,label)}
> foo()
Error in text(xy.coords(x, y, recycle = TRUE), as.char.or.expr(labels),  : zero length "text" specified

I don't know if it is entended to move that to the patch release
sources.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman@cinternet.net  Sun Jun  6 16:43:34 1999
From: osman@cinternet.net (Osman Buyukisik)
Date: Sun, 6 Jun 1999 11:43:34 -0400
Subject: problem in make for R-devel and R-release
Message-ID: <99060611483600.14170@stargate>

Hello,
 I just got R-devel june3. My machine is  SuSE linux 6.1 pent2 with 64M Ram.
Configure goes well, but make stops and complains install-sh is not found in
tools. There is no "tools" directory! After looking around I found that "aux"
has those files and did sym link. Make worked. 
The same problem is also present the R-release bundle. 
Cheers,
Osman

 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun  6 22:41:26 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Jun 1999 23:41:26 +0200
Subject: problem in make for R-devel and R-release
In-Reply-To: Osman Buyukisik's message of "Sun, 6 Jun 1999 11:43:34 -0400"
References: <99060611483600.14170@stargate>
Message-ID: <x2g145f1mh.fsf@blueberry.kubism.ku.dk>

Osman Buyukisik <osman@cinternet.net> writes:

> Hello,
>  I just got R-devel june3. My machine is  SuSE linux 6.1 pent2 with 64M Ram.
> Configure goes well, but make stops and complains install-sh is not found in
> tools. There is no "tools" directory! After looking around I found that "aux"
> has those files and did sym link. Make worked. 
> The same problem is also present the R-release bundle. 
> Cheers,
> Osman

Sounds like Martin needs to fix his auto-update scripts...

We changed the name of "aux" because it was causing grief on Windows
platforms. I had to sneak sneak a little behind the back of CVS to do
it, and some manual intervention was needed to get the updates right.

Meanwhile, symlinking, or simply renaming aux to tools should work.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun  7 09:35:48 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 7 Jun 1999 10:35:48 +0200
Subject: problem in make for R-devel and R-release
In-Reply-To: <x2g145f1mh.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 06 Jun 1999 23:41:26 +0200)
References: <99060611483600.14170@stargate> <x2g145f1mh.fsf@blueberry.kubism.ku.dk>
Message-ID: <199906070835.KAA03041@sophie.ethz.ch>

>>>>> On 06 Jun 1999 23:41:26 +0200, Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> said:

    PD> Osman Buyukisik <osman@cinternet.net> writes:
    >> Hello, I just got R-devel june3. My machine is SuSE linux 6.1 pent2
    >> with 64M Ram.  Configure goes well, but make stops and complains
    >> install-sh is not found in tools. There is no "tools" directory!
    >> After looking around I found that "aux" has those files and did sym
    >> link. Make worked.  The same problem is also present the R-release
    >> bundle.  Cheers, Osman

    PD> Sounds like Martin needs to fix his auto-update scripts...

Yes, indeed!
things should be ok by tomorrow or so..
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From msa@biostat.mgh.harvard.edu  Mon Jun  7 21:27:11 1999
From: msa@biostat.mgh.harvard.edu (msa@biostat.mgh.harvard.edu)
Date: Mon, 7 Jun 1999 22:27:11 +0200 (MET DST)
Subject: Lines longer than ~1000 chars truncated at parsing (PR#207)
Message-ID: <199906072027.WAA08955@pubhealth.ku.dk>

Full_Name: Marek Ancukiewicz
Version: 0.64.1
OS: Linux (RH 6.0)
Submission from: (NULL) (132.183.12.87)


R seems to be able to parse only lines shorter than approximately 
1000 characters. Anything longer gets truncated:

> x<-c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,!
274,275,276,277,278,279,280,281,282,283)
+ )
> length(x)
[1] 282
> x[282]
[1] 2


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Wed Jun  9 01:17:06 1999
From: ntakebay@bio.indiana.edu (ntakebay@bio.indiana.edu)
Date: Wed, 9 Jun 1999 02:17:06 +0200 (MET DST)
Subject: R correct g77 flags for Linux/Alpha (PR#208)
Message-ID: <199906090017.CAA21185@pubhealth.ku.dk>

Hello,
I was trying to compile R-base-0.64.1 on Linux/Alpha (RedHat 6.0).

It compiled but it couldn't pass the make check (choked with
tests/Examples/modreg-Ex.R).

I used gdb, and it turned out that the src/library/modreg/src/sinerp.f was
the problem.
         else if(j.eq.nk)then
            c1 = 0d0
            c2 = 0d0
            c3 = 0d0
         endif
>         p1ip(1,j) = 0d0- (c1*wjm3(1)+c2*wjm3(2)+c3*wjm3(3))
         p1ip(2,j) = 0d0- (c1*wjm3(2)+c2*wjm2(1)+c3*wjm2(2))

I think wjm3(3) should be 0, but it was set to a really tiny value.

So I gave -mieee for g77, and it solved the problem.

The configure correctly identify the CFLAGS for alpha, but -mieee should
be given to g77, too.  So in configure.in and configure, you should add
the following (I included a patch below)

By the way, I compiled R on PC164SX + 21164PC/533 using egcs-1.1.2.  All
other libraries are Redhat-6.0 default.

--- R-0.64.1/configure.in.orig  Tue Jun  8 19:05:31 1999
+++ R-0.64.1/configure.in       Tue Jun  8 19:06:28 1999
@@ -575,6 +575,7 @@
     ;;
   alpha*linux)
     CFLAGS="-mieee ${CFLAGS}"
+    FFLAGS="-mieee ${FFLAGS}"
     DLLFLAGS=-export-dynamic
     ;;
   *linuxaout)



To the rpm maintainer: You can simply apply the following patch to the
spec file of R-base-0.64.1-5.src.rpm without patching the configure.in
patch.  I also do not know why CFLAGS need to be -O1 instead of -O2??

--- R-base.spec.orig    Tue Jun  8 18:39:31 1999
+++ R-base.spec Tue Jun  8 18:44:00 1999
@@ -70,6 +70,7 @@
 %ifarch alpha
    #Thanks to Nassib Nassar <nassar@etymon.com>
    export CFLAGS="-g -O1"
+   export FFLAGS="-mieee -g -O2"
 %endif
 %ifarch sparc
    export LIBS="-lieee"

Thanks,
Naoki

Naoki Takebayashi     <ntakebay@bio.indiana.edu>
--- Dept. of Biology, Indiana Univeristy, Jordan Hall 142
--- 1001 E. Third St. Bloomington,IN 47405-3700 USA


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun  9 08:46:04 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Jun 1999 09:46:04 +0200 (CEST)
Subject: packages with FORTRAN code
Message-ID: <14174.7100.302238.935889@pc87.maho.magnaeu.com>

Recent sensible changes to the dynload mechanism have made an old
problem resurface:  how should we deal with packages which contain
Fortran code and may need to be linked against additional libraries
such as -lf2c?

The current consensus is that extra Fortran libraries maybe needed are
handled via the make variable FLIBS, and that `-lf2c' or `-lg2c' are
added by default if g77 is used.

This will not solve problems in packages which use their own Makefile
if it does not use FLIBS for building the shared library.  Currently,
this seems to be the case with

	acepack
	akima
	funfits
	growth
	leaps
	tripack

It would be great if the package maintainers could update their pkgs
accordingly.  Most likely, the best solution is to remove the Makefile
altogether.

Thanks
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun  9 08:54:31 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Jun 1999 09:54:31 +0200 (CEST)
Subject: R correct g77 flags for Linux/Alpha (PR#208)
In-Reply-To: <199906090017.CAA21185@pubhealth.ku.dk>
References: <199906090017.CAA21185@pubhealth.ku.dk>
Message-ID: <14174.7607.461924.517034@pc87.maho.magnaeu.com>

>>>>> ntakebay  writes:

> Hello,
> I was trying to compile R-base-0.64.1 on Linux/Alpha (RedHat 6.0).

> It compiled but it couldn't pass the make check (choked with
> tests/Examples/modreg-Ex.R).

> I used gdb, and it turned out that the src/library/modreg/src/sinerp.f was
> the problem.
>          else if(j.eq.nk)then
>             c1 = 0d0
>             c2 = 0d0
>             c3 = 0d0
>          endif
>> p1ip(1,j) = 0d0- (c1*wjm3(1)+c2*wjm3(2)+c3*wjm3(3))
>          p1ip(2,j) = 0d0- (c1*wjm3(2)+c2*wjm2(1)+c3*wjm2(2))

> I think wjm3(3) should be 0, but it was set to a really tiny value.

> So I gave -mieee for g77, and it solved the problem.

> The configure correctly identify the CFLAGS for alpha, but -mieee should
> be given to g77, too.  So in configure.in and configure, you should add
> the following (I included a patch below)

> By the way, I compiled R on PC164SX + 21164PC/533 using egcs-1.1.2.  All
> other libraries are Redhat-6.0 default.

> --- R-0.64.1/configure.in.orig  Tue Jun  8 19:05:31 1999
> +++ R-0.64.1/configure.in       Tue Jun  8 19:06:28 1999
> @@ -575,6 +575,7 @@
>      ;;
>    alpha*linux)
>      CFLAGS="-mieee ${CFLAGS}"
> +    FFLAGS="-mieee ${FFLAGS}"
>      DLLFLAGS=-export-dynamic
>      ;;
>    *linuxaout)

Done for 0.65.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Wed Jun  9 14:18:47 1999
From: jlindsey@alpha.luc.ac.be (Jim Lindsey)
Date: Wed, 9 Jun 1999 15:18:47 +0200 (MET DST)
Subject: packages with FORTRAN code
In-Reply-To: <14174.23554.302077.914375@pc87.maho.magnaeu.com> from "Kurt Hornik" at Jun 9, 99 02:20:18 pm
Message-ID: <199906091318.PAA26169@alpha.luc.ac.be>

> Yes, sure.  You may simply want to include $(R_HOME)/etc/Makeconf which
> has the rule


The following, put in my Makefile, works without the include. (I had
the same without the final $(FLIBS) before.) Will this be OK on other
systems? (The mva and modreg libraries have both the include and the
following rule but without $(FLIBS)???)
  I'm afraid that I don't understand this at all. All of my libraries
have Fortran code. Why pick on growth? When I use $(FLIBS), it just
links f2c into my library whereas it is already linked into R. On my
son's computer with g77, FLIBS is defined, in etc/Makeconf, as a blank
so that nothing occurs for him. (My toms614.c function in my rmutil
library was obtained from f2c. It runs on my son's computer without
f2clib linked in, except for that part of the library built into R.)
  What is the point of all this?

Jim

> 
> $(SHLIB): $(OBJS)
>         $(SHLIBLD) $(SHLIBLDFLAGS) -o $@ $(OBJS) $(FLIBS)
> 
> so you only need to set SHLIB=growth and OBJS to the object files you
> have.
> 
> -k
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun  9 14:53:46 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Jun 1999 15:53:46 +0200 (CEST)
Subject: packages with FORTRAN code
In-Reply-To: <199906091318.PAA26169@alpha.luc.ac.be>
References: <14174.23554.302077.914375@pc87.maho.magnaeu.com>
 <199906091318.PAA26169@alpha.luc.ac.be>
Message-ID: <14174.29162.922143.362849@pc87.maho.magnaeu.com>

>>>>> Jim Lindsey writes:

>> Yes, sure.  You may simply want to include $(R_HOME)/etc/Makeconf which
>> has the rule


> The following, put in my Makefile, works without the include. (I had
> the same without the final $(FLIBS) before.) Will this be OK on other
> systems? (The mva and modreg libraries have both the include and the
> following rule but without $(FLIBS)???)

>   I'm afraid that I don't understand this at all. All of my libraries
> have Fortran code. Why pick on growth? When I use $(FLIBS), it just
> links f2c into my library whereas it is already linked into R. On my
> son's computer with g77, FLIBS is defined, in etc/Makeconf, as a blank
> so that nothing occurs for him. (My toms614.c function in my rmutil
> library was obtained from f2c. It runs on my son's computer without
> f2clib linked in, except for that part of the library built into R.)

>   What is the point of all this?

The point is that there are cases when compiling FORTRAN code with g77
results in unresolved symbols at (dynload) run-time.  What exactly is
going on is not really easy to determine, and e.g. the info pages on g77
are rather vague:

	   The `libf2c' library is distributed with GNU Fortran for the
	convenience of its users, but is not part of GNU Fortran.  It
	contains the procedures needed by Fortran programs while they
	are running. 

	   For example, while code generated by `g77' is likely to do
	additions, subtractions, and multiplications "in line"--in the
	actual compiled code--it is not likely to do trigonometric
	functions this way. 

	   Instead, operations like trigonometric functions are compiled
	by the `f771' compiler (invoked by `g77' when compiling Fortran
	code) into machine code that, when run, calls on functions in
	`libf2c', so `libf2c' must be linked with almost every useful
	program having any component compiled by GNU Fortran.  (As
	mentioned above, the `g77' command takes care of all this for
	you.)

Therefore, it seems to be a good idea to always add `-lf2c' (or `-lg2c')
to FLIBS when using g77.  The most recent 0.65 configure scripts already
do that, so it would be nice if packages were cooperative by simply
using FLIBS.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun  9 15:27:26 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 09 Jun 1999 10:27:26 -0400
Subject: packages with FORTRAN code
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com>
Message-ID: <375E79CE.351209E7@bank-banque-canada.ca>

>It would be great if the package maintainers could update their pkgs
>accordingly.  Most likely, the best solution is to remove the Makefile
>altogether.

I like the idea that I shouldn't have to specify a Makefile (which I mess up
regularly) and R INSTALL will magically work on all platforms. Is this available
already in 0.64.1 or should I wait for 0.65?

Currently with 0.64.1 in Solaris I'm getting    "g77: unrecognized option
`-PIC'" but things seem to work ok. I'm not specifying PIC so I think that it is
being mistakenly added by R INSTALL.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun  9 16:08:13 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Jun 1999 17:08:13 +0200 (CEST)
Subject: packages with FORTRAN code
In-Reply-To: <375E79CE.351209E7@bank-banque-canada.ca>
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com>
 <375E79CE.351209E7@bank-banque-canada.ca>
Message-ID: <14174.33629.902099.142359@pc87.maho.magnaeu.com>

>>>>> Paul Gilbert writes:

>> It would be great if the package maintainers could update their pkgs
>> accordingly.  Most likely, the best solution is to remove the Makefile
>> altogether.

> I like the idea that I shouldn't have to specify a Makefile (which I
> mess up regularly) and R INSTALL will magically work on all
> platforms. Is this available already in 0.64.1 or should I wait for
> 0.65?

That should work in 0.64.1.

> Currently with 0.64.1 in Solaris I'm getting "g77: unrecognized option
> `-PIC'" but things seem to work ok. I'm not specifying PIC so I think
> that it is being mistakenly added by R INSTALL.

Very strange.  The configure script has for solaris

    if ${f77_is_g77}; then
      FPICFLAGS=-fPIC
    else
      FPICFLAGS=-PIC
    fi

so maybe your g77 is not recognized as such.  What does

    g77 -v 2>&1

give?

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  9 19:00:14 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jun 1999 20:00:14 +0200
Subject: packages with FORTRAN code
In-Reply-To: Kurt Hornik's message of "Wed, 9 Jun 1999 17:08:13 +0200 (CEST)"
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com> 	<375E79CE.351209E7@bank-banque-canada.ca> <14174.33629.902099.142359@pc87.maho.magnaeu.com>
Message-ID: <x2d7z5l0ep.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> > Currently with 0.64.1 in Solaris I'm getting "g77: unrecognized option
> > `-PIC'" but things seem to work ok. I'm not specifying PIC so I think
> > that it is being mistakenly added by R INSTALL.
> 
> Very strange.  The configure script has for solaris
> 
>     if ${f77_is_g77}; then
>       FPICFLAGS=-fPIC
>     else
>       FPICFLAGS=-PIC
>     fi
> 
> so maybe your g77 is not recognized as such.  What does
> 
>     g77 -v 2>&1
> 
> give?

This is happening on the Auckland machine too, so...

(Methinks you misspelled egrep in:

f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`

which, incidentally looks better as 'GNU F77|egcs|g77')
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun  9 20:11:16 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 09 Jun 1999 15:11:16 -0400
Subject: packages with FORTRAN code
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com>
 <375E79CE.351209E7@bank-banque-canada.ca>
 <14174.33629.902099.142359@pc87.maho.magnaeu.com>
 <375E87FB.D0D60B4@bank-banque-canada.ca> <14174.36840.112601.494758@pc87.maho.magnaeu.com>
Message-ID: <375EBC53.7205FD5E@bank-banque-canada.ca>

Kurt

It seems the old version of f77 that previously caused me problems is now gone,
so I removed my link making f77 use g77, but the problem was not fixed. Also,
changing grep to egrep on the lines:

f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`

in configure and configure.in, as suggested by Peter,  does not seem to have
fixed it.

In re-configuring and re-making R I noticed that it is not just my package which
has this error. It also occurs while making R (bsplvd.f and elsewhere). Below is
my configure and make for R. Configure reports
  FORTRAN compiler:         g77 -O2
but that does not seem to be the way it always gets used.

(Also, configure reports
  C compiler:               gcc -g -O2
but some of the gcc calls add fPIC. That does not seem to generate error
messages.)

Paul
__________
[1] /home/res3/gilp : which egrep
/usr/bin/egrep
[2] /home/res3/gilp : cd R
[3] /home/res3/gilp/R : ls
aclocal.m4      config.status*  demos/          Makeconf.in     PROJECTS
afm/            configure*      doc/            Makefile        README
aux/            configure.in    etc/            Makefile.in     RESOURCES
bin/            configure.mac*  FAQ             Makefrag.etc    src/
BUGS            COPYING         include/        Makefrag.top    TASKS
config.cache    COPYRIGHTS      INSTALL         MIRROR-SITES    tests/
config.log      date-stamp      library/        NEWS            Y2K
config.site     debian/         Makeconf        PLATFORMS
[4] /home/res3/gilp/R : grep "f77_output" *
configure:    f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`
configure:    if test -n "${f77_output}"; then
configure.in:    f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`
configure.in:    if test -n "${f77_output}"; then
[5] /home/res3/gilp/R : cd ..
[6] /home/res3/gilp/R-versions : ls
R-0.63.1.tar        R-0.63.3.tar        R-0.64.1.f77tog77/  R-release.tar
R-0.63.2/           R-0.64.0/           R-0.64.1.tar
R-0.63.2.tar        R-0.64.0.tar        R-release/
R-0.63.3/           R-0.64.1/           R-release.old/
[7] /home/res3/gilp/R-versions : rm -rf R-0.64.1
[8] /home/res3/gilp/R-versions : tar -xf R-0.64.1.tar
[9] /home/res3/gilp/R-versions : cd ../R
[10] /home/res3/gilp/R : te configure &
[1] 1354
[11] /home/res3/gilp/R : te configure.in &
[2] 1355
[1]    Done                 textedit configure
[12] /home/res3/gilp/R :
[2]    Done                 textedit configure.in
[12] /home/res3/gilp/R :
[12] /home/res3/gilp/R :
[12] /home/res3/gilp/R : ./configure
creating cache ./config.cache
checking for a BSD compatible install... aux/install-sh -c
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for bison... no
checking for byacc... no
checking for ar... ar
checking for latex... /apps/res/bin/latex
checking for dvips... /apps/res/bin/dvips
checking for makeindex... false
checking for unzip... /apps/res/bin/unzip
checking for zip... no
checking for perl... /usr/bin/perl
checking whether perl is perl 5... yes
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for g77... /home/res/public/gnu/sun5.6/bin/g77
checking for underscore after Fortran symbols... yes
checking for sin in -lm... yes
checking for sin in -lmoto... no
checking for main in -lncurses... no
checking for main in -ltermcap... yes
checking for dlopen in -ldl... yes
checking for main in -lz... no
checking for main in -lhdf5... no
checking for main in -ldxml... no
checking for main in -lblas... no
checking for rl_callback_read_char in -lreadline... no
checking how to run the C preprocessor... gcc -E
checking for ANSI C header files... yes
checking for pid_t... yes
checking for vfork.h... no
checking for working vfork... yes
checking for vprintf... yes
checking for acosh... yes
checking for asinh... yes
checking for atanh... yes
checking for bcopy... yes
checking for finite... yes
checking for isfinite... no
checking for isnan... yes
checking for matherr... yes
checking for memcpy... yes
checking for memmove... yes
checking for regcomp... yes
checking for rint... yes
checking for strcoll... yes
checking for strtod... yes
checking for strtol... yes
checking for system... yes
checking for times... yes
checking for sigsetjmp... yes
checking for siglongjmp... yes
checking for __setfpucw... no
checking for ANSI C header files... (cached) yes
checking for dl.h... no
checking for dlfcn.h... yes
checking for elf.h... yes
checking for locale.h... yes
checking for readline/history.h... no
checking for rpc/xdr.h... yes
checking for sys/times.h... yes
checking for time.h... yes
checking for ieeefp.h... yes
checking for ieee754.h... no
checking for unistd.h... yes
checking for hdf5.h... no
checking return type of signal handlers... void
checking for working const... yes
checking size of long... 4
checking for xmkmf... /usr/openwin/bin/xmkmf
checking how to make shared libraries... done
checking for X... libraries /usr/openwin/lib, headers /usr/openwin/include
checking whether -R must be followed by a space... no
checking for dnet_ntoa in -ldnet... no
checking for dnet_ntoa in -ldnet_stub... no
checking for gethostbyname... no
checking for gethostbyname in -lnsl... yes
checking for connect... no
checking for connect in -lsocket... yes
checking for remove... yes
checking for shmat... yes
checking for IceConnectionNumber in -lICE... yes
checking for lpr... lpr
updating cache ./config.cache
creating ./config.status
creating Makeconf
creating Makefile
creating afm/Makefile
creating demos/Makefile
creating doc/Makefile
creating doc/keyword-test
creating doc/manual/Makefile
creating doc/manual/lib2tex
creating doc/manual/Reference.tex
creating doc/manual/Manual.tex
creating etc/Makefile
creating etc/Makeconf
creating src/Makefile
creating src/appl/Makefile
creating src/include/Makefile
creating src/library/Makefile
creating src/main/Makefile
creating src/nmath/Makefile
creating src/scripts/Makefile
creating src/unix/Makefile
creating src/gnome/Makefile
creating src/library/base/Makefile
creating src/library/profile/Makefile
creating src/library/eda/Makefile
creating src/library/eda/src/Makefile
creating src/library/lqs/Makefile
creating src/library/lqs/src/Makefile
creating src/library/modreg/Makefile
creating src/library/modreg/src/Makefile
creating src/library/mva/Makefile
creating src/library/mva/src/Makefile
creating src/library/stepfun/Makefile
creating src/scripts/COMPILE
creating src/scripts/INSTALL
creating src/scripts/REMOVE
creating src/scripts/R.sh
creating src/scripts/Rdconv
creating src/scripts/Rdindex
creating src/scripts/Rman2Rd
creating src/scripts/SHLIB
creating src/scripts/Sd2Rd
creating src/scripts/build-help
creating src/scripts/fwf2table
creating src/scripts/help.pretty
creating src/scripts/html2dos
creating src/scripts/Rd2contents
creating tests/Makefile
creating tests/Examples/Makefile
creating src/include/Platform.h


R is now configured for sparc-sun-solaris2.6

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc -g -O2
  FORTRAN compiler:         g77 -O2
  Gnome support:            no

[13] /home/res3/gilp/R : make
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/afm'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/afm'
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/demos'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/demos'
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/doc'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/doc'
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/etc'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/etc'
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/include'
../../aux/GETSYMBOLS
mkdir ../../include
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/include'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/appl'
gcc -g -O2 -I../include -I../../src/include  -c S_compat.c -o S_compat.o
gcc -g -O2 -I../include -I../../src/include  -c approx.c -o approx.o
gcc -g -O2 -I../include -I../../src/include  -c bakslv.c -o bakslv.o
gcc -g -O2 -I../include -I../../src/include  -c binning.c -o binning.o
g77 -O2 -c blas.f -o blas.o
g77 -O2 -c ch2inv.f -o ch2inv.o
g77 -O2 -c chol.f -o chol.o
gcc -g -O2 -I../include -I../../src/include  -c chull.c -o chull.o
gcc -g -O2 -I../include -I../../src/include  -c cpoly.c -o cpoly.o
gcc -g -O2 -I../include -I../../src/include  -c cumsum.c -o cumsum.o
gcc -g -O2 -I../include -I../../src/include  -c distance.c -o distance.o
g77 -O2 -c dpbfa.f -o dpbfa.o
g77 -O2 -c dpbsl.f -o dpbsl.o
g77 -O2 -c dpoco.f -o dpoco.o
g77 -O2 -c dpodi.f -o dpodi.o
g77 -O2 -c dpofa.f -o dpofa.o
g77 -O2 -c dposl.f -o dposl.o
g77 -O2 -c dqrdc.f -o dqrdc.o
g77 -O2 -c dqrdc2.f -o dqrdc2.o
g77 -O2 -c dqrls.f -o dqrls.o
g77 -O2 -c dqrsl.f -o dqrsl.o
g77 -O2 -c dqrutl.f -o dqrutl.o
g77 -O2 -c dsvdc.f -o dsvdc.o
g77 -O2 -c dtrco.f -o dtrco.o
g77 -O2 -c dtrsl.f -o dtrsl.o
g77 -O2 -c eigen.f -o eigen.o
gcc -g -O2 -I../include -I../../src/include  -c fortran.c -o fortran.o
gcc -g -O2 -I../include -I../../src/include  -c fft.c -o fft.o
g77 -O2 -c fmin.f -o fmin.o
g77 -O2 -c lminfl.f -o lminfl.o
gcc -g -O2 -I../include -I../../src/include  -c loglin.c -o loglin.o
gcc -g -O2 -I../include -I../../src/include  -c lowess.c -o lowess.o
gcc -g -O2 -I../include -I../../src/include  -c machar.c -o machar.o
gcc -g -O2 -I../include -I../../src/include  -c massdist.c -o massdist.o
gcc -g -O2 -I../include -I../../src/include  -c pretty.c -o pretty.o
gcc -g -O2 -I../include -I../../src/include  -c pythag.c -o pythag.o
gcc -g -O2 -I../include -I../../src/include  -c rowsum.c -o rowsum.o
gcc -g -O2 -I../include -I../../src/include  -c splines.c -o splines.o
gcc -g -O2 -I../include -I../../src/include  -c stem.c -o stem.o
gcc -g -O2 -I../include -I../../src/include  -c strsignif.c -o strsignif.o
gcc -g -O2 -I../include -I../../src/include  -c tabulate.c -o tabulate.o
g77 -O2 -c uncmin.f -o uncmin.o
g77 -O2 -c zeroin.f -o zeroin.o
ar cr libappl.a S_compat.o approx.o bakslv.o binning.o blas.o ch2inv.o chol.o
chull.o cpoly.o cumsum.o distance.o dpbfa.o dpbsl.o dpoco.o dpodi.o dpofa.o
dposl.o dqrdc.o dqrdc2.o dqrls.o dqrsl.o dqrutl.o dsvdc.o dtrco.o dtrsl.o
eigen.o fortran.o fft.o fmin.o lminfl.o loglin.o lowess.o machar.o massdist.o
pretty.o pythag.o rowsum.o splines.o stem.o strsignif.o tabulate.o uncmin.o
zeroin.o
ranlib libappl.a
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/appl'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/nmath'
gcc -g -O2 -I../include -I../../src/include  -c mlutils.c -o mlutils.o
...
gcc -g -O2 -I../include -I../../src/include  -c signrank.c -o signrank.o
ar cr libmath.a mlutils.o d1mach.o i1mach.o fmax2.o fmin2.o fmod.o fprec.o
fround.o ftrunc.o sign.o fsign.o fsquare.o fcube.o imax2.o imin2.o chebyshev.o
logrelerr.o lgammacor.o gammalims.o gamma.o lgamma.o gamma_cody.o beta.o lbeta.o
polygamma.o bessel_i.o bessel_j.o bessel_k.o bessel_y.o choose.o snorm.o sunif.o
sexp.o dgamma.o pgamma.o qgamma.o rgamma.o dbeta.o pbeta.o qbeta.o rbeta.o
dunif.o punif.o qunif.o runif.o dnorm.o pnorm.o qnorm.o rnorm.o dlnorm.o
plnorm.o qlnorm.o rlnorm.o df.o pf.o qf.o rf.o dt.o pt.o qt.o rt.o dchisq.o
pchisq.o qchisq.o rchisq.o dbinom.o pbinom.o qbinom.o rbinom.o dcauchy.o
pcauchy.o qcauchy.o rcauchy.o dexp.o pexp.o qexp.o rexp.o dgeom.o pgeom.o
qgeom.o rgeom.o dhyper.o phyper.o qhyper.o rhyper.o dnbinom.o pnbinom.o
qnbinom.o rnbinom.o dpois.o ppois.o qpois.o rpois.o dweibull.o pweibull.o
qweibull.o rweibull.o dlogis.o plogis.o qlogis.o rlogis.o dnchisq.o pnchisq.o
qnchisq.o dnbeta.o pnbeta.o pnf.o pnt.o ptukey.o qtukey.o wilcox.o signrank.o
ranlib libmath.a
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/nmath'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/unix'
gcc -g -O2 -I/usr/openwin/include -I../include -I../../src/include  -c
dataentry.c
gcc -g -O2 -I../include -I../../src/include  -c devPS.c -o devPS.o
gcc -g -O2 -I../include -I../../src/include  -c devPicTeX.c -o devPicTeX.o
gcc -g -O2 -I/usr/openwin/include -I../include -I../../src/include  -c devX11.c
gcc -g -O2 -I../include -I../../src/include  -c dynload.c -o dynload.o
gcc -g -O2 -I../include -I../../src/include  -c edit.c -o edit.o
gcc -g -O2 -I/usr/openwin/include -I../include -I../../src/include  -c rotated.c

gcc -g -O2 -I../include -I../../src/include  -c system.c -o system.o
gcc -g -O2 -I../include -I../../src/include  -c Rsock.c -o Rsock.o
gcc -g -O2 -I../include -I../../src/include  -c sock.c -o sock.o
ar cr libunix.a dataentry.o devPS.o devPicTeX.o devX11.o dynload.o edit.o
rotated.o system.o Rsock.o sock.o
ranlib libunix.a
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/unix'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/main'
gcc -g -O2 -I../include -I../../src/include  -c arithmetic.c -o arithmetic.o
...
gcc -g -O2 -I../include -I../../src/include  -c version.c -o version.o
mkdir ../../bin
g77  -o ../../bin/R.binary arithmetic.o array.o attrib.o bind.o builtin.o
character.o coerce.o colors.o complex.o context.o cov.o cum.o debug.o deparse.o
deriv.o devices.o dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o
format.o fourier.o gram.o gram-ex.o graphics.o iosupport.o list.o logic.o main.o
match.o memory.o model.o names.o objects.o optimize.o options.o par.o paste.o
platform.o plot.o plot3d.o plotmath.o print.o printarray.o printvector.o
printutils.o random.o relop.o saveload.o scan.o seq.o sort.o source.o split.o
subassign.o subscript.o subset.o summary.o unique.o util.o version.o
../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE
-L/usr/openwin/lib -R/usr/openwin/lib -lX11 -lsocket  -lnsl -ldl -ltermcap -lm
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/main'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/scripts'
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/scripts'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
mkdir ../../library
make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/base'
Building R base package
mkdir ../../../library/base
mkdir ../../../library/base/R
mkdir ../../../library/base/data
make[3]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/base'
make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/eda'
mkdir ../../../library/eda
mkdir ../../../library/eda/R
make[4]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/eda/src'
gcc -g -O2 -fPIC -I../../../../include -c line.c -o line.o
gcc -g -O2 -fPIC -I../../../../include -c smooth.c -o smooth.o
ld -G -o eda.so line.o smooth.o
mkdir ../../../../library/eda/libs
make[4]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/eda/src'
make[3]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library/eda'

make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/lqs'
mkdir ../../../library/lqs
mkdir ../../../library/lqs/R
make[4]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/lqs/src'
gcc -g -O2 -fPIC -I../../../../include -c lqs.c -o lqs.o
ld -G -o lqs.so lqs.o
mkdir ../../../../library/lqs/libs
make[4]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/lqs/src'
make[3]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library/lqs'

make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg'
mkdir ../../../library/modreg
mkdir ../../../library/modreg/R
mkdir ../../../library/modreg/data
make[4]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg/src'
g77 -O2 -PIC -c bsplvd.f -o bsplvd.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c bvalue.f -o bvalue.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c bvalus.f -o bvalus.o
g77: unrecognized option `-PIC'
gcc -g -O2 -fPIC -I../../../../include -c ksmooth.c -o ksmooth.o
gcc -g -O2 -fPIC -I../../../../include -c loessc.c -o loessc.o
g77 -O2 -PIC -c loessf.f -o loessf.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c ppr.f -o ppr.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c qsbart.f -o qsbart.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c sbart.f -o sbart.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c sgram.f -o sgram.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c sinerp.f -o sinerp.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c sslvrg.f -o sslvrg.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c stxwx.f -o stxwx.o
g77: unrecognized option `-PIC'
../../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o ksmooth.o
loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvrg.o stxwx.o
make[5]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg/src'
ld -G -o modreg.so bsplvd.o bvalue.o bvalus.o ksmooth.o loessc.o loessf.o ppr.o
qsbart.o sbart.o sgram.o sinerp.o sslvrg.o stxwx.o
make[5]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg/src'
mkdir ../../../../library/modreg/libs
make[4]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg/src'
make[3]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg'
make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/mva'
mkdir ../../../library/mva
mkdir ../../../library/mva/R
make[4]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/mva/src'
gcc -g -O2 -fPIC -I../../../../include -c dblcen.c -o dblcen.o
g77 -O2 -PIC -c hclust.f -o hclust.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c kmns.f -o kmns.o
g77: unrecognized option `-PIC'
ld -G -o mva.so dblcen.o hclust.o kmns.o
mkdir ../../../../library/mva/libs
make[4]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/mva/src'
make[3]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library/mva'

make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/stepfun'
mkdir ../../../library/stepfun
mkdir ../../../library/stepfun/R
make[3]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/stepfun'
make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/profile'
Building system startup profile
make[3]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/profile'
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src'
You should `make docs' now ...
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
Building ALL documentation (help, HTML, LaTeX, examples)
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
 >>> Building/Updating help pages for package `base'
     Formats: text html latex example
  Arithmetic                        text    html    latex   example
  BATCH                             text    html    latex
...
  stepfun                           text    html    latex   example
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
[14] /home/res3/gilp/R :

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  9 23:06:20 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Jun 1999 00:06:20 +0200
Subject: packages with FORTRAN code
In-Reply-To: Paul Gilbert's message of "Wed, 09 Jun 1999 15:11:16 -0400"
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com> 		<375E79CE.351209E7@bank-banque-canada.ca> 		<14174.33629.902099.142359@pc87.maho.magnaeu.com> 		<375E87FB.D0D60B4@bank-banque-canada.ca> <14174.36840.112601.494758@pc87.maho.magnaeu.com> <375E
Message-ID: <x2n1y9hvvn.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> It seems the old version of f77 that previously caused me problems is now gone,
> so I removed my link making f77 use g77, but the problem was not fixed. Also,
> changing grep to egrep on the lines:
> 
> f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`
> 
> in configure and configure.in, as suggested by Peter,  does not seem to have
> fixed it.
> 

One doesn't want the \-s in there either: egrep "GNU F77|egcs|g77"

This does seem to work giving  g77 -fPIC etc.

However, my checked-out sources at Auckland now tries to link .so's
with

ld -G  .... -lg2c

and fails because libg2c.a is located way down in the gcc-libs.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jun 10 08:09:08 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 10 Jun 1999 09:09:08 +0200 (CEST)
Subject: [R] R on AIX (>4.2)
In-Reply-To: <199906100647.IAA00865@sophie.ethz.ch>
References: <199906092155.RAA29434@infiniti.ece.cmu.edu>
 <199906100647.IAA00865@sophie.ethz.ch>
Message-ID: <14175.25748.342750.147064@galadriel.ci.tuwien.ac.at>



[Taken to r-devel]

I tried 1-2 months ago to get R running on AIX ... besides some minor
things which I fixed in the sources everything compiled fine except
the dynloading :-)

It also seemed feasible to get dynloading to work, but you need a text
file containing the names of all objects a .so file wants to
export. As I didn't see an easy way of doing this at INSTALL time for
all our extension packages and wasn't in desperate need of R on AIX I
gave up at that point. I had also contact with people from essen on
this, and they also had no automatic procedure (like a Makefile fix or
so).

Look in the devel mail archives around may, there is a thread on AIX
where Arne Kovac explains the proper linker flags ... you might also
want to contact him to get their dynload.c. 

Fritz




>>>>> On Thu, 10 Jun 1999 08:47:55 +0200,
>>>>> Martin Maechler (MM) wrote:

MM> [Subject above:  You probably mean, ">= 4.2" right ?]
>>>>> "TomV" == Thomas Vogels <tov@infiniti.ece.cmu.edu> writes:

TomV> I'm determined to get R compiling & running on a machine
TomV> running AIX 4.2.
MM> Great!   
MM> Thank you in advance.

TomV> I've seen previous emails in the archive about
TomV> this topic.  The main obstacle is getting dynamic loading to
TomV> work, but it works for Tcl and hence is feasable.

MM> yes and yes.

TomV> Questions:
TomV> - is anybody _currently_ working with R on AIX?  
MM> don't know
TomV> - why have previous fixes to the sources not been introduced into
TomV> the released versions?
MM> I think we have never seen fixes patchable into the main sources.
MM> The only place I've heard that got it working was  uni-essen.de
MM> and they seem to have used an almost completely different version of
MM> src/unix/dynload.c  from Heiner Schwarte
MM> (and I think I've never seen their version..).

MM> Yes, it would really be great if this problem could finally be solved!

MM> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
MM> Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
MM> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
MM> phone: x-41-1-632-3408		fax: ...-1086			<><
MM> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
MM> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
MM> Send "info", "help", or "[un]subscribe"
MM> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
MM> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Arne.Kovac@uni-essen.de  Thu Jun 10 08:23:10 1999
From: Arne.Kovac@uni-essen.de (Arne Kovac)
Date: Thu, 10 Jun 1999 09:23:10 +0200 (DFT)
Subject: [R] R on AIX (>4.2)
In-Reply-To: <199906100647.IAA00865@sophie.ethz.ch>
Message-ID: <Pine.A41.4.02.9906100918350.14566-100000@cauchy.mathematik.uni-essen.de>

On Thu, 10 Jun 1999, Martin Maechler wrote:

> I think we have never seen fixes patchable into the main sources.
> The only place I've heard that got it working was  uni-essen.de
> and they seem to have used an almost completely different version of
> src/unix/dynload.c  from Heiner Schwarte
> (and I think I've never seen their version..).
> 
> Yes, it would really be great if this problem could finally be solved!

I agree that this would really be great. I have sent a modified dynload.c
to r-devel recently. Does anybody want me to repost it (Tom?)?

Arne

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From beimfohr@statistik.uni-dortmund.de  Thu Jun 10 12:52:03 1999
From: beimfohr@statistik.uni-dortmund.de (beimfohr@statistik.uni-dortmund.de)
Date: Thu, 10 Jun 1999 13:52:03 +0200 (MET DST)
Subject: Compilation fails (PR#209)
Message-ID: <199906101152.NAA04445@pubhealth.ku.dk>

Full_Name: Frank Beimfohr
Version: 0.64.1, devel.
OS: Solaris 2.5.1
Submission from: (NULL) (129.217.131.31)


I try to compile R on my Sparc 4 (Solaris 2.5.1) but the compilation fails. I
tried 
the developer-version and the contributed 0.64.1-Version.
I start configure with the --g77-Option. During the compilation it stops with an

error, which says that the R/src/library/modreg/src/bsplvd.f isn't a valid 
Fortran77-File. Then, I installed f2c. But the compilation fails again with the
message:

gcc: unrecognized option `-PIC'
./../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o ksmooth.o
loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvrg.o stxwx.o
Usage : make [ -f makefile ]... [ -d ][ -dd ][ -D ][ -DD ][ -e ][ -i ][ -k ]
             [ -K statefile ][ -n ][ -p ][ -P ][ -q ][ -r ][ -s ][ -S ][ -t ]
             [ -V ][ target ... ][ macro=value... ]
make: Fatal error: Unknown option `-w'
gmake[4]: *** [modreg.so] Error 1
gmake[4]: Leaving directory `/sw/sun4_55/R-0.64.1a/src/library/modreg/src'

I don't know what to do now...

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Arne.Kovac@uni-essen.de  Thu Jun 10 15:02:31 1999
From: Arne.Kovac@uni-essen.de (Arne Kovac)
Date: Thu, 10 Jun 1999 16:02:31 +0200 (DFT)
Subject: dynload for R on AIX (>= 4.2)
In-Reply-To: <14175.31960.993123.79902@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.A41.4.02.9906101559040.12136-100000@cauchy.mathematik.uni-essen.de>

On Thu, 10 Jun 1999, Friedrich Leisch wrote:

> Yes, if I understood AIX workings correct you have to have a text file
> of to-be-exported symbols at the time of linking a shared library,
> i.e. the linker is called like (this is pasted from a mail by Arne)
> 
> $(F77) -o module.so -bM:SRE -bE:module.exp -bnoentry $(OBJECTS) $(LIBDIR) $(LIBS)
> 
> where module.exp is a text file containing the names of symbols to be
> exported by module.so

I think you can skip creating the text file by changing the command line
options to

$(F77) -o module.so -bM:SRE -bexpall -bnoentry $(OBJECTS) $(LIBDIR)
$(LIBS)

ie replacing the -bE:module.exp option by -bexpall. This option is only
available in AIX 4.2 and later. I have just tried it and it appears to
work for me.

Maybe we are really getting somewhere!!

Arne



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jun 10 15:56:32 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 10 Jun 1999 16:56:32 +0200 (CEST)
Subject: Compilation fails (PR#209)
In-Reply-To: <199906101152.NAA04445@pubhealth.ku.dk>
References: <199906101152.NAA04445@pubhealth.ku.dk>
Message-ID: <14175.53792.372453.501560@pc87.maho.magnaeu.com>

>>>>> beimfohr  writes:

> Full_Name: Frank Beimfohr
> Version: 0.64.1, devel.
> OS: Solaris 2.5.1
> Submission from: (NULL) (129.217.131.31)


> I try to compile R on my Sparc 4 (Solaris 2.5.1) but the compilation
> fails. I tried the developer-version and the contributed
> 0.64.1-Version.  I start configure with the --g77-Option. During the
> compilation it stops with an

> error, which says that the R/src/library/modreg/src/bsplvd.f isn't a
> valid Fortran77-File. Then, I installed f2c. But the compilation fails
> again with the message:

> gcc: unrecognized option `-PIC'

which should not be there.

Can you pls send

* the exact configure and make command you issued

* the final output of configure, such as

R is now configured for i586-unknown-linux

  Source directory:         /home/Hornik/src/apps/R/r-devel/R
  Installation directory:   /usr/local
  C compiler:               gcc -O2 -g -Wall
  FORTRAN compiler:         g77 -O2
  Gnome support:            no

Thanks

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 10 16:07:36 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Thu, 10 Jun 1999 11:07:36 -0400
Subject: running R on AIX (>= 4.2)
Message-ID: <199906101507.LAA03628@infiniti.ece.cmu.edu>


(Was: r-help -- dynload for R on AIX)

Thanks for all the responses.  Let's see:

  - I found the dynload.c posted by Arne (April 99, I believe).  If
    the difference to the current version of dynload.c is too big,
    then the current dynload.c is a better starting point.  Otherwise
    #ifdef's won't be feasible.

  - One problem appears to be the list of exported symbols.  Tcl's
    ldAix can do this job.  It needs a little help, however.

  - I'm unaware of weaknesses or strengths of the compilers shipped
    with AIX.  Any preference for the duo xlc/xlf or cc/f77?  (Yes,
    they look like they're same thing, but NO, they act differently.)

  - Hmm, why did I want to get R on AIX?  Ah, I couldn't get S-plus to
    load the VR library.  It's nice to have the sources...


  -tom


P.S. Due to my current setup, response to email is measured in hours.
So don't worry if you don't immediately hear from me.


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Arne.Kovac@uni-essen.de  Thu Jun 10 16:51:01 1999
From: Arne.Kovac@uni-essen.de (Arne Kovac)
Date: Thu, 10 Jun 1999 17:51:01 +0200 (DFT)
Subject: running R on AIX (>= 4.2)
In-Reply-To: <199906101507.LAA03628@infiniti.ece.cmu.edu>
Message-ID: <Pine.A41.4.02.9906101739520.15678-100000@cauchy.mathematik.uni-essen.de>

On Thu, 10 Jun 1999, Thomas Vogels wrote:

>   - One problem appears to be the list of exported symbols.  Tcl's
>     ldAix can do this job.  It needs a little help, however.

I don't think you need this anymore - just use -bexapll for the linker.

>   - I'm unaware of weaknesses or strengths of the compilers shipped
>     with AIX.  Any preference for the duo xlc/xlf or cc/f77?  (Yes,
>     they look like they're same thing, but NO, they act differently.)

There is a lot of discussion going on about the new library format in AIX
4.3.x. I have experienced a lot of problems with IBM's compiler duo and
usually use egcs. My impression is that using gcc or egcs might facilitate
porting anyway, since a lot of people compile R with these compilers on
other platforms.

>   - Hmm, why did I want to get R on AIX?  Ah, I couldn't get S-plus to
>     load the VR library.  It's nice to have the sources...

If my memories are right, then the shipping S-Plus for AIX was compiled on
a very old AIX version (3.2.5) with an odd version of the compiler. Thus,
there are some problems with loading object code dynamically.

Arne


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 10 20:56:16 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Thu, 10 Jun 1999 15:56:16 -0400
Subject: dynload for R on AIX (>= 4.2)
In-Reply-To: Your message of "Thu, 10 Jun 1999 16:02:31 EDT."
 <Pine.A41.4.02.9906101559040.12136-100000@cauchy.mathematik.uni-essen.de>
Message-ID: <199906101956.PAA23332@infiniti.ece.cmu.edu>


"Arne" == Arne Kovac <kovac@cauchy.mathematik.uni-essen.de> writes:

Arne> I think you can skip creating the text file by changing the command line
Arne> options to
Arne> 
Arne> $(F77) -o module.so -bM:SRE -bexpall -bnoentry $(OBJECTS) $(LIBDIR)
Arne> $(LIBS)

Uh, works, kind of... 

| build/src/library/eda/src $ f77 -o eda.so -bM:SRE -bexpall -bnoentry line.o smooth.o 
| ld: 0711-317 ERROR: Undefined symbol: .rsort
| ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more
| information.

The problem is that rsort is defined in sort.c.  So I put all the R
files in src/main into a library:

| build/src/main $ ar cr libR.a *.o

And run the linker again:

| build/src/library/eda/src $ f77 -o eda.so -bM:SRE -bexpall -bnoentry
| line.o smooth.o -L../../../main -lR  -L../../../unix -lunix
| -L../../../appl -lappl -L../../../nmath -lmath -lX11 -ldl -lblas

No error messages this time, but eda.so is big: 3020844 bytes.

Something ain't right here.  There should be a way of telling the
linker to not include the libs.  It should verify that all functions that
are referenced will be defined at runtime.  Comments?

  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Fri Jun 11 20:15:33 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Fri, 11 Jun 1999 15:15:33 -0400
Subject: dynload for R on AIX (>= 4.2)
Message-ID: <199906111915.PAA14180@infiniti.ece.cmu.edu>


Hi,

  since I've never used dlsym and friends before, I coded a test case
last night to understand what's going on.  I've put it at:
http://www.ece.cmu.edu/~tov/public/dltest.tar.gz

It should work out of the box for AIX 4.2 and Linux.  It's a simple
program that loads a shared object, uses it (with references back to
the main program), and then discards it.  Main point of the exercise
is to find out how to compile this stuff with AIX.

The "ugliness" that I encounter is that I need a file of the
exported symbols in R and the libraries (libappl.a, libmath.a, etc.).
Otherwise I get core dumps.  Any suggestions for when to build it or
where to patch the Makefiles?

If you have a machine with AIX, would you mind downloading the dltest
tarfile?  Just unzip it, untar it.  Then in the dltest directory,
start "make test".  Should print "OK" eventually...

Thanks,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 14 09:01:00 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 14 Jun 1999 10:01:00 +0200
Subject: dynload for R on AIX (>= 4.2)
In-Reply-To: <199906111915.PAA14180@infiniti.ece.cmu.edu> (message from Thomas
 Vogels on Fri, 11 Jun 1999 15:15:33 -0400)
References: <199906111915.PAA14180@infiniti.ece.cmu.edu>
Message-ID: <199906140801.KAA00561@sophie.ethz.ch>

>>>>> On Fri, 11 Jun 1999 15:15:33 -0400, Thomas Vogels <tov@infiniti.ece.cmu.edu> said:


    Thomas>   since I've never used dlsym and friends before, I coded a
    Thomas> test case last night to understand what's going on.  I've put
    Thomas> it at: http://www.ece.cmu.edu/~tov/public/dltest.tar.gz

got it

    Thomas> It should work out of the box for AIX 4.2 and Linux.  It's a
    Thomas> simple program that loads a shared object, uses it (with
    Thomas> references back to the main program), and then discards it.
    Thomas> Main point of the exercise is to find out how to compile this
    Thomas> stuff with AIX.

    Thomas> The "ugliness" that I encounter is that I need a file of the
    Thomas> exported symbols in R and the libraries (libappl.a, libmath.a,
    Thomas> etc.).  Otherwise I get core dumps.  Any suggestions for when
    Thomas> to build it or where to patch the Makefiles?

Couldn't you just 'nm' the  R.binary file?
That should be available *before* you start building  *.so's ?
Then it could happen in src/main/Makefile[.in].

The "tricky/tedious" part is to have "configure" produce that different
Makefile for the case of AIX only.
It seems, the FLAGS and the Makefile entry for the *.exp file (see below)
would also have to present in one of the two Makeconf  files or in every
Makefile that builds a *.so.

    Thomas> If you have a machine with AIX, would you mind downloading the
    Thomas> dltest tarfile?  Just unzip it, untar it.  Then in the dltest
    Thomas> directory, start "make test".  Should print "OK" eventually...

It did print "OK".  
I see in the "Makefile" that you're creating the list of exported objects
simply using  nm & awk :
(cited for those who haven't got your code ready):

    NM = nm
    NM_FLAGS = -g -h
    AWK = awk
    LD_FLAGS = -bdynamic -bE:main.exp
    LIBS = -ldl
    SHLIB_CFLAGS = 
    SHLIB_LD = /bin/ld
    SHLIB_LD_FLAGS = -bso -bM:SRE -H512 -T512 -bnoentry -bexpall -bI:main.exp

    <....>

    main.exp : main.o
	    $(NM) $(NM_FLAGS) main.o | $(AWK) ' \
	    BEGIN { print "#! ."; } \
	    $$2 == "T" && $$1 != ".main" { print substr ($$1, 2) } \
	    ' > $@

which looks very reasonable.
Now we just need configure build the proper Makeconf(s) and Makefile(s)
and things would hopefully work..

Could we short-cut E-mail ( R-core, Arne, TomV ) to get this going?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From beimfohr@Statistik.Uni-Dortmund.DE  Mon Jun 14 12:03:48 1999
From: beimfohr@Statistik.Uni-Dortmund.DE (Frank Beimfohr)
Date: Mon, 14 Jun 1999 13:03:48 +0200
Subject: Compilation fails (PR#209)
Message-ID: <199906141103.NAA28439@Statistik.Uni-Dortmund.DE>

> > I try to compile R on my Sparc 4 (Solaris 2.5.1) but the compilation
> > fails. I tried the developer-version and the contributed
> > 0.64.1-Version.  I start configure with the --g77-Option. During the
> > compilation it stops with an
> 
> > error, which says that the R/src/library/modreg/src/bsplvd.f isn't a
> > valid Fortran77-File. Then, I installed f2c. But the compilation fails
> > again with the message:
> 
> > gcc: unrecognized option `-PIC'
> 
> which should not be there.
> 
> Can you pls send
> 
> * the exact configure and make command you issued
> 
> * the final output of configure

Command:
configure --prefix=/sw/sun4_55/R-0.64.1a --exec-prefix=/sw/sun4_55/R-0.64.1a 
--with-x --with-g77 [--with-f2c]

Output (without and without f2c-Option):
R is now configured for sparc-sun-solaris2.5.1

  Source directory:         .
  Installation directory:   /sw/sun4_55/R-0.64.1a
  C compiler:               gcc -g -O2
  FORTRAN compiler:         g77 
  Gnome support:            no

Then I just type 'make' (using GNU-Make 3.76.1) and get the error messages 
descriped above...

gmake[4]: Entering directory `/sw/sun4_55/R-0.64.1a/src/library/modreg/src'
gcc -g -O2 -fPIC -I../../../../include -c bsplvd.c -o bsplvd.o
g77  -PIC -c bvalue.f -o bvalue.o
gcc: unrecognized option `-PIC'
../../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o ksmooth.o 
loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvrg.o stxwx.o
Usage : make [ -f makefile ]... [ -d ][ -dd ][ -D ][ -DD ][ -e ][ -i ][ -k ]
             [ -K statefile ][ -n ][ -p ][ -P ][ -q ][ -r ][ -s ][ -S ][ -t ]
             [ -V ][ target ... ][ macro=value... ]
make: Fatal error: Unknown option `-w'
gmake[4]: *** [modreg.so] Error 1


Frank Beimfohr
University of Dortmund, Germany




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jun 14 13:32:37 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 14 Jun 1999 08:32:37 -0400
Subject: Compilation fails (PR#209)
In-Reply-To: Your message of "Mon, 14 Jun 1999 13:03:48 EDT."
 <199906141103.NAA28439@Statistik.Uni-Dortmund.DE>
Message-ID: <199906141232.IAA23012@infiniti.ece.cmu.edu>


Hi,

  there are three different things going on here:
  (1) gmake by default has the option "-w" set, which is why you see
these "Entering/Leaving directory ..." messages.  This option finds a
way into the make flags when the system default make is called.  Not
quite sure how, but don't blame it on configure.  Makeconf et. al. is
more likely.
  (2) Very annoyingly, modreg doesn't use the $(SHLIBLD) command but
calls R with SHLIB as option.  Which is nothing you are interested in,
but is a bad thing, IMHO.
  (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
configure uses.  Try to find out, what the default is.  Follow this example:
  tmp $ touch Imakefile
  tmp $ xmkmf
  imake -DUseInstalled -I/usr/lib/X11/config
  "./Imakefile", line 1: 1506-229 (W) File is empty.
  tmp $ grep -i pic Makefile 
  PICFLAGS = -bM\:SRE
(Results are for an AIX box.  Your output should look different.)

| gmake[4]: Entering directory
| `/sw/sun4_55/R-0.64.1a/src/library/modreg/src'
| gcc -g -O2 -fPIC -I../../../../include -c bsplvd.c -o bsplvd.o
| g77  -PIC -c bvalue.f -o bvalue.o
| gcc: unrecognized option `-PIC'
| ../../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o
| ksmooth.o
| loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvrg.o
| stxwx.o
| Usage : make [ -f makefile ]... [ -d ][ -dd ][ -D ][ -DD ][ -e ][ -i
| ][ -k ]
|              [ -K statefile ][ -n ][ -p ][ -P ][ -q ][ -r ][ -s ][ -S
| ][ -t ]
|              [ -V ][ target ... ][ macro=value... ]
| make: Fatal error: Unknown option `-w'
| gmake[4]: *** [modreg.so] Error 1

  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From beimfohr@Statistik.Uni-Dortmund.DE  Mon Jun 14 14:42:15 1999
From: beimfohr@Statistik.Uni-Dortmund.DE (Frank Beimfohr)
Date: Mon, 14 Jun 1999 15:42:15 +0200
Subject: Compilation fails (PR#209)
Message-ID: <199906141342.PAA13446@Statistik.Uni-Dortmund.DE>

> Hi,
> 
>   there are three different things going on here:
>   (1) gmake by default has the option "-w" set, which is why you see
> these "Entering/Leaving directory ..." messages.  This option finds a
> way into the make flags when the system default make is called.  Not
> quite sure how, but don't blame it on configure.  Makeconf et. al. is
> more likely.
>   (2) Very annoyingly, modreg doesn't use the $(SHLIBLD) command but
> calls R with SHLIB as option.  Which is nothing you are interested in,
> but is a bad thing, IMHO.
>   (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
> configure uses.  Try to find out, what the default is.  Follow this example:
>   tmp $ touch Imakefile
>   tmp $ xmkmf
>   imake -DUseInstalled -I/usr/lib/X11/config
>   "./Imakefile", line 1: 1506-229 (W) File is empty.
>   tmp $ grep -i pic Makefile 
>   PICFLAGS = -bM\:SRE
> (Results are for an AIX box.  Your output should look different.)

I started 'configure' with the f2c- and without the g77-Option and used 
/usr/ccs/bin/make instead of gmake (very flexible, isn't it ;) 

  C compiler:               gcc -g -O2
  FORTRAN compiler:         f2c 

The modreg-directory is now compiled without any error.

But while processing the mva-directory:

mkdir ../../../library/mva/R
gcc -g -O2 -fPIC -I../../../../include -c dblcen.c -o dblcen.o
ld -G -o mva.so dblcen.o hclust.o kmns.o
ld: fatal: file hclust.o: cannot open file; errno=2
ld: fatal: file kmns.o: cannot open file; errno=2
ld: fatal: File processing errors.  No output written to mva.so
*** Error code 1
make: Fatal error: Command failed for target `mva.so'
Current working directory /sw/sun4_55/R-0.65.0/src/library/mva/src
*** Error code 1
make: Fatal error: Command failed for target `all'


What happens here? I compiled R 0.63.0 without any problem....

Frank Beimfohr
University of Dortmund

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jun 14 14:53:51 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 14 Jun 1999 09:53:51 -0400
Subject: dynload for R on AIX (>= 4.2)
In-Reply-To: Your message of "Mon, 14 Jun 1999 10:01:00 EDT."
 <199906140801.KAA00561@sophie.ethz.ch>
Message-ID: <199906141353.JAA29330@infiniti.ece.cmu.edu>


"Martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

Thomas> The "ugliness" that I encounter is that I need a file of the
Thomas> exported symbols in R and the libraries (libappl.a, libmath.a,

Martin> Couldn't you just 'nm' the  R.binary file?
Martin> That should be available *before* you start building  *.so's ?
Martin> Then it could happen in src/main/Makefile[.in].

nm on R.binary would include stuff from libc.a and libm.c as well
(e.g. printf & friends).  Much like Tcl/Tk, I'd like to misuse the
LDCMD to build an export file when R.binary is linked.  I've put a
script at: http://www.ece.cmu.edu/~tov/public/ldAIX4
(or in color: http://www.ece.cmu.edu/~tov/public/ldAIX4.html)
It's invoked with something like:
ldAIX4 f77 -bdynamic -o ../../bin/R.binary *.o \
../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lX11 -lblas -ldl -lm

Martin> I see in the "Makefile" that you're creating the list of exported objects
Martin> simply using  nm & awk :

For no particularly good reason, I've switched to nm & sed at the
moment :-)  The awk script is more readable, so I'll probly go back.
Are there concerns about non-availabilty of awk (plain awk, not gawk)?

Martin> main.exp : main.o
Martin> $(NM) $(NM_FLAGS) main.o | $(AWK) ' \
Martin> BEGIN { print "#! ."; } \
Martin> $$2 == "T" && $$1 != ".main" { print substr ($$1, 2) } \
Martin> ' > $@
Martin> 
Martin> which looks very reasonable.

... but is incomplete since I forgot about global vars (bummer, why
are there global vars? ;-)

Martin> Now we just need configure build the proper Makeconf(s) and Makefile(s)
Martin> and things would hopefully work..

Hope is a good choice of words.  I've patched configure (there is a
section with platform dependent overrides).  But now I have to patch
the Makefiles since things get confused.  More to follow.

Martin> Could we short-cut E-mail ( R-core, Arne, TomV ) to get this going?

Who is R-core?

Regards,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vogels@ieee.org  Mon Jun 14 16:56:06 1999
From: vogels@ieee.org (vogels@ieee.org)
Date: Mon, 14 Jun 1999 17:56:06 +0200 (MET DST)
Subject: definition of R_problem_buf in S.h (PR#210)
Message-ID: <199906141556.RAA00751@pubhealth.ku.dk>

Full_Name: Thomas Vogels
Version: 0.64.1
OS: AIX 4.2
Submission from: (NULL) (198.133.22.70)


R_problem_buf is defined, not just declared, in S.h:

#define R_PROBLEM_BUFSIZE 4096
char R_problem_buf[R_PROBLEM_BUFSIZE];

This is bad since every time S.h is included this buffer is defined.  The
linker
will eventually complain about multiple definitions of this symbol.

Solution: declare R_problem_buf to be extern in S.h, then allocate memory for
it
in a source file, like main.c with: char R_problem_buf[R_PROBLEM_BUFSIZE];



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jun 14 17:26:39 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 14 Jun 1999 18:26:39 +0200 (CEST)
Subject: Compilation fails (PR#209)
In-Reply-To: <199906141342.PAA13446@Statistik.Uni-Dortmund.DE>
References: <199906141342.PAA13446@Statistik.Uni-Dortmund.DE>
Message-ID: <14181.11583.323584.13254@pc87.maho.magnaeu.com>

>>>>> Frank Beimfohr writes:

>> Hi,
>>

(As an aside.  This thread is quickly becoming extremely inefficient.  I
am certainly willing to fix configuration/build problems, but if I ask
SPECIFIC questions then I really need specific answers.)

>> there are three different things going on here:
>> (1) gmake by default has the option "-w" set, which is why you see
>> these "Entering/Leaving directory ..." messages.  This option finds a
>> way into the make flags when the system default make is called.  Not
>> quite sure how, but don't blame it on configure.  Makeconf et. al. is
>> more likely.

I don't see how the system default could be called.  The instructions
say that if you want to use non-default make, then you need to do
(assuming a Bourne shell)

	MAKE=/the/make/you/want ./configure
	/the/make/you/want

>> (2) Very annoyingly, modreg doesn't use the $(SHLIBLD) command but
>> calls R with SHLIB as option.  Which is nothing you are interested in,
>> but is a bad thing, IMHO.

Good point.  Will have a look.

>> (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
>> configure uses.  Try to find out, what the default is.  Follow this example:
>> tmp $ touch Imakefile
>> tmp $ xmkmf
>> imake -DUseInstalled -I/usr/lib/X11/config
>> "./Imakefile", line 1: 1506-229 (W) File is empty.
>> tmp $ grep -i pic Makefile 
>> PICFLAGS = -bM\:SRE
>> (Results are for an AIX box.  Your output should look different.)

> I started 'configure' with the f2c- and without the g77-Option and used 
> /usr/ccs/bin/make instead of gmake (very flexible, isn't it ;) 

>   C compiler:               gcc -g -O2
>   FORTRAN compiler:         f2c 

> The modreg-directory is now compiled without any error.

> But while processing the mva-directory:

> mkdir ../../../library/mva/R
> gcc -g -O2 -fPIC -I../../../../include -c dblcen.c -o dblcen.o
> ld -G -o mva.so dblcen.o hclust.o kmns.o
> ld: fatal: file hclust.o: cannot open file; errno=2
> ld: fatal: file kmns.o: cannot open file; errno=2
> ld: fatal: File processing errors.  No output written to mva.so
> *** Error code 1
> make: Fatal error: Command failed for target `mva.so'
> Current working directory /sw/sun4_55/R-0.65.0/src/library/mva/src
> *** Error code 1
> make: Fatal error: Command failed for target `all'

What is the rule for .f.o?  Apparently, the Fortran sources did not get
compiled ...

> What happens here? I compiled R 0.63.0 without any problem....

The point is that, and I think I explained that on r-devel, we need to
find a solution for Fortran compilation.  Many compilers, such as g77,
typically produce objects which still need to be linked against other
libraries (libg2c.a for recent versions of g77).

The problem can be overcome in two ways:  either use the Fortran
compiler for linking, or use $CC/ld and get the extra flags right.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 14 17:30:42 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 14 Jun 1999 18:30:42 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <199906141556.RAA00751@pubhealth.ku.dk> (vogels@ieee.org)
References: <199906141556.RAA00751@pubhealth.ku.dk>
Message-ID: <199906141630.SAA07559@sophie.ethz.ch>

>>>>> On Mon, 14 Jun 1999 17:56:06 +0200 (MET DST), vogels@ieee.org said:

    vogels> Full_Name: Thomas Vogels Version: 0.64.1 OS: AIX 4.2 Submission
    vogels> from: (NULL) (198.133.22.70)


    vogels> R_problem_buf is defined, not just declared, in S.h:

    vogels> #define R_PROBLEM_BUFSIZE 4096 char
    vogels> R_problem_buf[R_PROBLEM_BUFSIZE];

    vogels> This is bad since every time S.h is included this buffer is
    vogels> defined.  The linker will eventually complain about multiple
    vogels> definitions of this symbol.
no.
All our include files ``idempotent'' : Including them multiple times
doesn't change anything.
This protection is *very* standard and is achieved by (for the case of S.h) 

#ifndef R_S_H
#define R_S_H
.................. everything ......
#endif

    vogels> Solution: declare R_problem_buf to be extern in S.h, then
    vogels> allocate memory for it in a source file, like main.c with: char
    vogels> R_problem_buf[R_PROBLEM_BUFSIZE];

Not the real solution, main.c does not even include S.h !

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jun 14 17:34:59 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 14 Jun 1999 18:34:59 +0200 (CEST)
Subject: Compilation fails (PR#209)
In-Reply-To: <199906141232.IAA23012@infiniti.ece.cmu.edu>
References: <199906141103.NAA28439@Statistik.Uni-Dortmund.DE>
 <199906141232.IAA23012@infiniti.ece.cmu.edu>
Message-ID: <14181.12083.82468.559759@pc87.maho.magnaeu.com>

>>>>> Thomas Vogels writes:

>   (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
> configure uses.  Try to find out, what the default is.  Follow this example:
>   tmp $ touch Imakefile
>   tmp $ xmkmf
>   imake -DUseInstalled -I/usr/lib/X11/config
>   "./Imakefile", line 1: 1506-229 (W) File is empty.
>   tmp $ grep -i pic Makefile 
>   PICFLAGS = -bM\:SRE
> (Results are for an AIX box.  Your output should look different.)

AIX is not a supported platform yet.  If you tell me which flags (cpic,
fpic, shlib, maybe something extra for producing the main binary) to use
for this platform and the NATIVE compilers, I will gladly tell configure
how to get things right on AIX.

Is it safe to assume that `-fPIC' will do the right thing on all
platforms for gcc and g77?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jun 14 17:41:39 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 14 Jun 1999 18:41:39 +0200 (CEST)
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <199906141630.SAA07559@sophie.ethz.ch>
References: <199906141556.RAA00751@pubhealth.ku.dk>
 <199906141630.SAA07559@sophie.ethz.ch>
Message-ID: <14181.12483.272614.786407@pc87.maho.magnaeu.com>

>>>>> Martin Maechler writes:

>>>>> On Mon, 14 Jun 1999 17:56:06 +0200 (MET DST), vogels@ieee.org said:
vogels> Full_Name: Thomas Vogels Version: 0.64.1 OS: AIX 4.2 Submission
vogels> from: (NULL) (198.133.22.70)


vogels> R_problem_buf is defined, not just declared, in S.h:

vogels> #define R_PROBLEM_BUFSIZE 4096 char
vogels> R_problem_buf[R_PROBLEM_BUFSIZE];

vogels> This is bad since every time S.h is included this buffer is
vogels> defined.  The linker will eventually complain about multiple
vogels> definitions of this symbol.
> no.
> All our include files ``idempotent'' : Including them multiple times
> doesn't change anything.
> This protection is *very* standard and is achieved by (for the case of S.h) 

> #ifndef R_S_H
> #define R_S_H
> .................. everything ......
> #endif

vogels> Solution: declare R_problem_buf to be extern in S.h, then
vogels> allocate memory for it in a source file, like main.c with: char
vogels> R_problem_buf[R_PROBLEM_BUFSIZE];

> Not the real solution, main.c does not even include S.h !

Right.

Is there a way we can suggest a better interface here?  I really hate
the PROBLEM xxx RECOVER(NULL_ENTRY) lines.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Mon Jun 14 17:46:38 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 14 Jun 1999 12:46:38 -0400
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <199906141630.SAA07559@sophie.ethz.ch> (message from Martin
 Maechler on Mon, 14 Jun 1999 18:30:42 +0200)
Message-ID: <199906141648.SAA12286@stat.math.ethz.ch>


I think Thomas is correct and that it is a problem.  I brought it up a
while back and Peter had some comments.  The problem is when 2 or more
user-level C source files include S.h. Then while each file has an
idempotent S.h, when linked together, there is a duplication of
symbols.  The problem is not within source file but across file.


D.

_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Mon Jun 14 19:30:48 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Mon, 14 Jun 1999 19:30:48 +0100
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <199906141630.SAA07559@sophie.ethz.ch>; from Martin Maechler on Mon, Jun 14, 1999 at 06:30:42PM +0200
References: <199906141556.RAA00751@pubhealth.ku.dk> <199906141630.SAA07559@sophie.ethz.ch>
Message-ID: <19990614193048.27035@hal.stat.unipd.it>

On Mon, Jun 14, 1999 at 06:30:42PM +0200, Martin Maechler wrote:
> >>>>> On Mon, 14 Jun 1999 17:56:06 +0200 (MET DST), vogels@ieee.org said:
> 
>     vogels> Full_Name: Thomas Vogels Version: 0.64.1 OS: AIX 4.2 Submission
>     vogels> from: (NULL) (198.133.22.70)
> 
> 
>     vogels> R_problem_buf is defined, not just declared, in S.h:
> 
>     vogels> #define R_PROBLEM_BUFSIZE 4096 char
>     vogels> R_problem_buf[R_PROBLEM_BUFSIZE];
> 
>     vogels> This is bad since every time S.h is included this buffer is
>     vogels> defined.  The linker will eventually complain about multiple
>     vogels> definitions of this symbol.
> no.
> All our include files ``idempotent'' : Including them multiple times
> doesn't change anything.
  
  Yes, but what happens if different files to be linked in the same
  shared library include S.h? If I understand the behaviour is
  linker dependent.


> 
>     vogels> Solution: declare R_problem_buf to be extern in S.h, then
>     vogels> allocate memory for it in a source file, like main.c with: char
>     vogels> R_problem_buf[R_PROBLEM_BUFSIZE];
> 
> Not the real solution, main.c does not even include S.h !
> 

  R.binary exports R_problem_buf since S.h is includes by appl/loglin.c.
  Anyway, going toward a multi-threaded R, I agree with Martin that 
  this is not the solution.
  What about declaring R_problem_buf static?
  
  guido



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 14 18:38:19 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 1999 19:38:19 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Duncan Temple Lang's message of "Mon, 14 Jun 1999 12:46:38 -0400"
References: <199906141648.SAA12286@stat.math.ethz.ch>
Message-ID: <x2wvx6el84.fsf@blueberry.kubism.ku.dk>

Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:

> I think Thomas is correct and that it is a problem.  I brought it up a
> while back and Peter had some comments.  The problem is when 2 or more
> user-level C source files include S.h. Then while each file has an
> idempotent S.h, when linked together, there is a duplication of
> symbols.  The problem is not within source file but across file.

Yes, exactly. I forgot which comment I had at the time, but...

There are two obvious solutions:
(1) Define it "static" in S.h (hey, what is 4K these days?)
(2) Declare it extern there and define it somewhere else.

Any preferences?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Mon Jun 14 18:37:22 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 14 Jun 1999 13:37:22 -0400
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <x2wvx6el84.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 14 Jun 1999 19:38:19 +0200)
Message-ID: <199906141738.TAA13141@stat.math.ethz.ch>


I would vote for (2). If we go to multiple evaluators as some of us
were discussing recently, evaluator-specific statics will need to be
removed.

D.


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Jun 14 18:58:20 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Tue, 15 Jun 1999 05:58:20 +1200 (NZST)
Subject: Include file changes
Message-ID: <199906141758.FAA05183@stat1.stat.auckland.ac.nz>

I think we are long overdue for a revision of the header files used in R.
This is going to be especially important for a clean build of the CORBA
and R/Java stuff which I have been looking over Duncan's shoulder at.
It will also let us integrate some of the features Duncan has had to
find creative ways around and also to let us integrate things like the
PROBLEM buffer problem.

I would propose that we cut down to a much smaller set of includes and
to put some thought about what goes in each.  Something along the lines
below.

        R.h / S.h
                This just serves to include Platform.h, RInternals.h and
                RUtilities.h below.

        Platform.h
                Platform specific definitions.

        RInternals.h
                R Data Structures & Access Macros
                Memory management
                Functions which manipulate R data structures

        RUtilities.h
                Functions which operate at the C level
                without special knowlege of R structures
                (But maybe not Math).

        RMath.h
                We probably need a separate set of declarations
                but maybe not.

        RGraphics.h
                This is big and is logically separate from
                other C code.  Some things which are not in
                here should be -- e.g. hsv2rgb.

(I think the rest of the code could also stand a bit of clean up too).

        Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 14 19:03:02 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 1999 20:03:02 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Duncan Temple Lang's message of "Mon, 14 Jun 1999 13:37:22 -0400"
References: <199906141736.TAA01099@pubhealth.ku.dk>
Message-ID: <x2vhcqek2x.fsf@blueberry.kubism.ku.dk>

Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:

> I would vote for (2). If we go to multiple evaluators as some of us
> were discussing recently, evaluator-specific statics will need to be
> removed.

Hm. That won't help, will it? We'd have one static object instead
of several. If threads try to step on eachothers toes it wouldn't
prevent it, just allow them to do it from within different functions!

What one would really need is a way to generate the buffer
dynamically *inside* the function call. Or setup PROBLEM to do some
kind of resource locking, in which case it doesn't really matter
whether we use (1) or (2)? Or...?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Mon Jun 14 19:18:58 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 14 Jun 1999 14:18:58 -0400
Subject: definition of R_problem_buf in S.h (PR#210)
Message-ID: <199906141820.UAA13830@stat.math.ethz.ch>


> 
> Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:
> 
> > I would vote for (2). If we go to multiple evaluators as some of us
> > were discussing recently, evaluator-specific statics will need to be
> > removed.
> 
> Hm. That won't help, will it? We'd have one static object instead
> of several. If threads try to step on eachothers toes it wouldn't
> prevent it, just allow them to do it from within different functions!
> 
> What one would really need is a way to generate the buffer
> dynamically *inside* the function call. Or setup PROBLEM to do some
> kind of resource locking, in which case it doesn't really matter
> whether we use (1) or (2)? Or...?
> 


Absolutely. I was just thinking of not having many statics but that we
could deal with a single one by adding it to the Evaluator
structure. In this way, there is a single one per evaluator and at
present this is adequate. If we need more, we introduce a stack or
linked list.  If we dynamically generate the buffer in the call, then
we will have to change the arguments, etc. to pass it out to other
routines. Otherwise, if we use the statics to communicate the new
buffer we are no better off, except for the dynamic allocation
avoiding the buffer overflow.


Robert will likely be doing things with all of this via
his exception/handler mechanism also.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Mon Jun 14 20:27:47 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Mon, 14 Jun 1999 20:27:47 +0100
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <x2vhcqek2x.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Mon, Jun 14, 1999 at 08:03:02PM +0200
References: <199906141736.TAA01099@pubhealth.ku.dk> <x2vhcqek2x.fsf@blueberry.kubism.ku.dk>
Message-ID: <19990614202747.48954@hal.stat.unipd.it>

On Mon, Jun 14, 1999 at 08:03:02PM +0200, Peter Dalgaard BSA wrote:
> Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:
> 
> > I would vote for (2). If we go to multiple evaluators as some of us
> > were discussing recently, evaluator-specific statics will need to be
> > removed.
> 
> Hm. That won't help, will it? We'd have one static object instead
> of several. If threads try to step on eachothers toes it wouldn't
> prevent it, just allow them to do it from within different functions!
> 
> What one would really need is a way to generate the buffer
> dynamically *inside* the function call. Or setup PROBLEM to do some
> kind of resource locking, in which case it doesn't really matter
> whether we use (1) or (2)? Or...?

  Allocating the buffer *inside* the function is easy if we insist
  on the PROBLEM ....RECOVER interface (but K. has another opinion):
  #define PROBLEM {char R_problem_buf[R_PROBLEM_BUFSIZE];\
                   sprintf(R_problem_buf,
  #define RECOVER(x)      ), error(R_problem_buf); }

  Same for WARNING
  Are there other use of the buffer?
  g.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jun 14 21:15:05 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 14 Jun 1999 16:15:05 -0400
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Your message of "Mon, 14 Jun 1999 14:18:58 EDT."
 <199906141820.UAA13830@stat.math.ethz.ch>
Message-ID: <199906142015.QAA03834@infiniti.ece.cmu.edu>


Hi all, 

  after I started it, allow me two comments:

1) as was pointed out, the problem of including S.h in different
places doesn't show up until you try to compile shared libraries (lqs,
modre) since the conditional include (#ifndef R_*) doesn't catch it in
this case.  IMHO, "static char R_problem_buf[R_PROBLEM_BUFSIZE];" is
no solution.  I gather from other comments that you want to be thread
safe.  This willl make any declaration of a variable as "static" (not
just R_problem_buf) dangerous.

2) "Philosophically" speaking, a good place for this buffer is the
same place where you'd put the results.  From my little viewpoint,
that would be the evaluation context?

Signing off,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 14 22:57:29 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 1999 23:57:29 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Guido Masarotto's message of "Mon, 14 Jun 1999 20:27:47 +0100"
References: <199906141736.TAA01099@pubhealth.ku.dk> <x2vhcqek2x.fsf@blueberry.kubism.ku.dk> <19990614202747.48954@hal.stat.unipd.it>
Message-ID: <x2btei8mye.fsf@blueberry.kubism.ku.dk>

Guido Masarotto <guido@hal.stat.unipd.it> writes:

>   Allocating the buffer *inside* the function is easy if we insist
>   on the PROBLEM ....RECOVER interface (but K. has another opinion):

Yes. I think Kurt is missing the point that S.h is a *compatibility*
item, so we're stuck with whatever ugliness that is present in S. It
is still allowed to do it neater.

>   #define PROBLEM {char R_problem_buf[R_PROBLEM_BUFSIZE];\
>                    sprintf(R_problem_buf,
>   #define RECOVER(x)      ), error(R_problem_buf); }
> 
>   Same for WARNING
>   Are there other use of the buffer?

I don't think so... 

Let's see: This would create R_problem_buf on the stack when PROBLEM
is encountered or when the function is called? (Forgetting my C
semantics...). In either case, we certainly avoid the reentrancy
problem. In the latter (unlikely) case, we waste 4k per potential
PROBLEM, which is hardly a problem unless the function is heavily
recursive. Sounds good.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From seniorr@teleport.com  Mon Jun 14 23:09:00 1999
From: seniorr@teleport.com (seniorr@teleport.com)
Date: Tue, 15 Jun 1999 00:09:00 +0200 (MET DST)
Subject: readline/history size (PR#211)
Message-ID: <199906142209.AAA02065@pubhealth.ku.dk>

Full_Name: Russell Senior
Version: 0.64.0
OS: linux-2.2.x
Submission from: (NULL) (198.107.133.11)


It appears that the GNU readline history size is limited to 50 entries.  This 
is apparently occurring because R is not bothering to override the readline 
default value (from readline-4.0):

  ./history.c:59:#define DEFAULT_HISTORY_GROW_SIZE 50

It appears that it ought to be possible to override this from R by setting the 
readline variable `history_size' to another value.  I request that a
command-line
option be added for doing this.  The following is an *untested* patch:

--- src/unix/system.c~  Wed Mar 31 12:53:18 1999
+++ src/unix/system.c   Mon Jun 14 15:05:50 1999
@@ -580,6 +580,35 @@
                else
                    R_NSize = value;
            }
+#ifdef HAVE_LIBREADLINE
+#ifdef HAVE_READLINE_HISTORY_H
+           else if((value = (*av)[1] == 'h') || !strcmp(*av, "--histsize")) {
+               if(value)
+                   REprintf("WARNING: option `-h' is deprecated.  "
+                            "Use `--histsize' instead.\n");
+               if(!value || (*av)[2] == '\0') {
+                   ac--; av++; p = *av;
+               }
+               else p = &(*av)[2];
+               if (p == NULL) {
+                   REprintf("WARNING: no hsize given");
+                   break;
+               }
+               value = Decode2Long(p,&ierr);
+               if(ierr) {
+                   if(ierr < 0) goto badargs;
+                   REprintf("--histsize %ld'%c': too large", value,
+                            (ierr == 1)?'M':((ierr == 2)?'K':'k'));
+               }
+               if(value < 0)
+                  REprintf("WARNING: invalid history (hist)size '%d' ignored,"
+                           " using default = %d\n", value, history_size);
+               else
+                   history_size = value;
+           }
+            
+#endif
+#endif
            else {
                REprintf("WARNING: unknown option %s\n", *av);
                break;


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jun 15 09:30:52 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 15 Jun 1999 10:30:52 +0200 (CEST)
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <x2btei8mye.fsf@blueberry.kubism.ku.dk>
References: <199906141736.TAA01099@pubhealth.ku.dk>
 <x2vhcqek2x.fsf@blueberry.kubism.ku.dk>
 <19990614202747.48954@hal.stat.unipd.it>
 <x2btei8mye.fsf@blueberry.kubism.ku.dk>
Message-ID: <14182.3900.762411.940864@pc87.maho.magnaeu.com>

>>>>> Peter Dalgaard BSA writes:

> Guido Masarotto <guido@hal.stat.unipd.it> writes:
>> Allocating the buffer *inside* the function is easy if we insist
>> on the PROBLEM ....RECOVER interface (but K. has another opinion):

> Yes. I think Kurt is missing the point that S.h is a *compatibility*
> item, so we're stuck with whatever ugliness that is present in S. It
> is still allowed to do it neater.

Hmm.  Is everyone trying to give me a hard time lately?  I am aware that
it is there for compatibility.  I was trying to say that even if we keep
the interface supported, we should still find a better way AND advertize
it accordingly.

>> #define PROBLEM {char R_problem_buf[R_PROBLEM_BUFSIZE];\
>> sprintf(R_problem_buf,
>> #define RECOVER(x)      ), error(R_problem_buf); }
>> 
>> Same for WARNING
>> Are there other use of the buffer?

> I don't think so... 

> Let's see: This would create R_problem_buf on the stack when PROBLEM
> is encountered or when the function is called? (Forgetting my C
> semantics...). In either case, we certainly avoid the reentrancy
> problem. In the latter (unlikely) case, we waste 4k per potential
> PROBLEM, which is hardly a problem unless the function is heavily
> recursive. Sounds good.

In any case, let me get rid of this in appl/loglin.c.  On a related
issue, what is the recommended way of allocating memory in such files,
via Calloc()?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jun 15 09:40:31 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 15 Jun 1999 10:40:31 +0200 (CEST)
Subject: Include file changes
In-Reply-To: <199906141758.FAA05183@stat1.stat.auckland.ac.nz>
References: <199906141758.FAA05183@stat1.stat.auckland.ac.nz>
Message-ID: <14182.4479.471950.899741@pc87.maho.magnaeu.com>

>>>>> Ross Ihaka writes:

> I think we are long overdue for a revision of the header files used in
> R.  This is going to be especially important for a clean build of the
> CORBA and R/Java stuff which I have been looking over Duncan's
> shoulder at.  It will also let us integrate some of the features
> Duncan has had to find creative ways around and also to let us
> integrate things like the PROBLEM buffer problem.

> I would propose that we cut down to a much smaller set of includes and
> to put some thought about what goes in each.  Something along the
> lines below.

>         R.h / S.h
>                 This just serves to include Platform.h, RInternals.h and
>                 RUtilities.h below.

>         Platform.h
>                 Platform specific definitions.

Maybe `RPlatform.h' then?

>         RInternals.h
>                 R Data Structures & Access Macros
>                 Memory management
>                 Functions which manipulate R data structures

>         RUtilities.h
>                 Functions which operate at the C level
>                 without special knowlege of R structures
>                 (But maybe not Math).

Such as the things currently in appl?

>         RMath.h
>                 We probably need a separate set of declarations
>                 but maybe not.

>         RGraphics.h
>                 This is big and is logically separate from
>                 other C code.  Some things which are not in
>                 here should be -- e.g. hsv2rgb.

Yes, good point.

> (I think the rest of the code could also stand a bit of clean up too).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 15 09:54:46 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Jun 1999 10:54:46 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Kurt Hornik's message of "Tue, 15 Jun 1999 10:30:52 +0200 (CEST)"
References: <199906141736.TAA01099@pubhealth.ku.dk> 	<x2vhcqek2x.fsf@blueberry.kubism.ku.dk> 	<19990614202747.48954@hal.stat.unipd.it> 	<x2btei8mye.fsf@blueberry.kubism.ku.dk> <14182.3900.762411.940864@pc87.maho.magnaeu.com>
Message-ID: <x2674ponc9.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >>>>> Peter Dalgaard BSA writes:
> 
> > Guido Masarotto <guido@hal.stat.unipd.it> writes:
> >> Allocating the buffer *inside* the function is easy if we insist
> >> on the PROBLEM ....RECOVER interface (but K. has another opinion):
> 
> > Yes. I think Kurt is missing the point that S.h is a *compatibility*
> > item, so we're stuck with whatever ugliness that is present in S. It
> > is still allowed to do it neater.
> 
> Hmm.  Is everyone trying to give me a hard time lately?  I am aware that
> it is there for compatibility.  I was trying to say that even if we keep
> the interface supported, we should still find a better way AND advertize
> it accordingly.

Sorry 'bout that... We still have to keep the old thing working - that
was my only point.

> 
> In any case, let me get rid of this in appl/loglin.c.  On a related
> issue, what is the recommended way of allocating memory in such files,
> via Calloc()?

I think so. However, notice that you need to free the storage
before error()-ing out (which is why it cannot be used in
PROBLEM---RECOVER constructs).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Tue Jun 15 10:13:25 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Tue, 15 Jun 1999 10:13:25 +0100 (BST)
Subject: Include file changes
In-Reply-To: <199906141758.FAA05183@stat1.stat.auckland.ac.nz>
Message-ID: <Pine.GSO.3.96.990615095114.17131E-100000@laplace>

On Tue, 15 Jun 1999, Ross Ihaka wrote:

> (I think the rest of the code could also stand a bit of clean up too).

Can I re-raise the issue of comments in functions?  There are in practice
four types of comment: (1) Those that appear in .R files but don't make it
through to the code; (2) Those that make it through but don't get printed; 
(3) Those that get printed in the `wrong' place; and (4) Those that get
printed in the right place.

>From my reading of the source code I think comments are always going to be
tricky to locate while they are treated as attributes.  I appreciate that
this is a feature of the Blue Book description, but I wonder if a simpler
arrangement might not be possible.  How about if comments were legitimate
expressions that evaluated to "invisible(.Last.value)", or, for those that
follow on on the line, "; invisible(.Last.value)".  Of course this would
slow the function down if implemented as is, but perhaps not if
implemented in the C code.

This may be a naive suggestion, and I am certainly not an expert in
comments, but I do find it frustrating to see all most of my helpful
asides coming out in the wrong place.  It seems to be Sod's Law that
comments are most useful after if() statements, when of course they are
promoted up the function.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jun 15 19:35:39 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Jun 1999 13:35:39 -0500
Subject: Accessing a function's environment
Message-ID: <6rpv2xs45g.fsf@verdi.stat.wisc.edu>

In a short course he is teaching here, Bill Venables has shown how to
cache the results of a recursive calculation so that later invocations
of the functions are speeded up.  His example is an ingenious way of
calculating all the subsets of size r from a set of size n.

His version of this function for R stored these cached values in the
global environment.  I suggested that it might be preferable to
declare the function in such a way that it carried an environment with
it and to use that environment for caching.

For illustration, I will show a factorial function that uses this
trick.  I use .env to store the environment in which the function was
defined then put the cached results in that environment.  Is there a
cleaner way to get the environment in which the currently executing
function was defined?  Sometimes (as below) you do not know the name
under which the function will be stored so you can't use something
like environment(Fact).  Just as "Recall" means to call myself again
regardless of the name, is there a way of a function getting the
environment in which it was defined without knowing its own name?

 > mkFact        # a function that constructs a factorial function
 function () 
 {
     .env <- environment()
     function(n) {
	 nm <- paste(".", n, sep = "/")
	 if (n <= 0) 
	     return(1)
	 if (exists(nm, envir = .env)) 
	     return(get(nm, envir = .env))
	 ans <- n * Recall(n - 1)
	 assign(nm, ans, envir = .env)
	 ans
     }
 }
 > Fact <- mkFact()
 > Fact         # the actual factorial function with an environment
 function (n) 
 {
     nm <- paste(".", n, sep = "/")
     if (n <= 0) 
	 return(1)
     if (exists(nm, envir = .env)) 
	 return(get(nm, envir = .env))
     ans <- n * Recall(n - 1)
     assign(nm, ans, envir = .env)
     ans
 }
 <environment: 0x406136e0>
 > Fact(4)
 [1] 24
 > objects(env = environment(Fact), all = TRUE)
 [1] "./1"  "./2"  "./3"  "./4"  ".env"
 > Fact(6)
 [1] 720
 > objects(env = environment(Fact), all = TRUE)
 [1] "./1"  "./2"  "./3"  "./4"  "./5"  "./6"  ".env"

If you use debug(Fact) and check what happens when Fact(6) is
evaluated, you will see that by the time it evaluates Fact(4), it
picks up the result from the environment.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 15 22:28:14 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Jun 1999 23:28:14 +0200
Subject: Accessing a function's environment
In-Reply-To: Douglas Bates's message of "15 Jun 1999 13:35:39 -0500"
References: <6rpv2xs45g.fsf@verdi.stat.wisc.edu>
Message-ID: <x2yahlqhld.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

>  > Fact <- mkFact()
>  > Fact         # the actual factorial function with an environment
>  function (n) 
>  {
>      nm <- paste(".", n, sep = "/")
>      if (n <= 0) 
> 	 return(1)
>      if (exists(nm, envir = .env)) 
> 	 return(get(nm, envir = .env))
>      ans <- n * Recall(n - 1)
>      assign(nm, ans, envir = .env)
>      ans
>  }
>  <environment: 0x406136e0>
>  > Fact(4)
>  [1] 24
>  > objects(env = environment(Fact), all = TRUE)
>  [1] "./1"  "./2"  "./3"  "./4"  ".env"
>  > Fact(6)
>  [1] 720
>  > objects(env = environment(Fact), all = TRUE)
>  [1] "./1"  "./2"  "./3"  "./4"  "./5"  "./6"  ".env"
> 
> If you use debug(Fact) and check what happens when Fact(6) is
> evaluated, you will see that by the time it evaluates Fact(4), it
> picks up the result from the environment.

Or (0.65 only):

> Fact<-local({
+   .env<-environment()
+   f<-function(n){     
+     nm <- paste(".", n, sep = "/")
+     if (n <= 0)
+       return(1)
+     if (exists(nm, envir = .env))
+       return(get(nm, envir = .env))
+     ans<-n*f(n-1)
+     assign(nm,ans,envir=.env)
+     ans
+   }
+ })
> Fact(6)
[1] 720
> objects(env = environment(Fact), all = TRUE)
[1] "./1"  "./2"  "./3"  "./4"  "./5"  "./6"  ".env" "f"   


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 16 13:20:37 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jun 1999 14:20:37 +0200
Subject: Comments - was Re: Include file changes
In-Reply-To: Jonathan Rougier's message of "Tue, 15 Jun 1999 10:13:25 +0100 (BST)"
References: <Pine.GSO.3.96.990615095114.17131E-100000@laplace>
Message-ID: <x2d7yw9w16.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> >From my reading of the source code I think comments are always going to be
> tricky to locate while they are treated as attributes.  I appreciate that
> this is a feature of the Blue Book description, but I wonder if a simpler
> arrangement might not be possible.  How about if comments were legitimate
> expressions that evaluated to "invisible(.Last.value)", or, for those that
> follow on on the line, "; invisible(.Last.value)".  Of course this would
> slow the function down if implemented as is, but perhaps not if
> implemented in the C code.
> 
> This may be a naive suggestion, and I am certainly not an expert in
> comments, but I do find it frustrating to see all most of my helpful
> asides coming out in the wrong place.  It seems to be Sod's Law that
> comments are most useful after if() statements, when of course they are
> promoted up the function.

I'm afraid that your idea would break on things like

if (blabla)
	# blabla is true
	do.something()

Another idea that has been put forward is to simply include the entire
source, as entered, with the function, but that has drawbacks in case
the function gets modified by directly accessing the parse tree and
whatnot. 

My current hunch is that one needs to have multiple attributes (e.g.
"pre-comment", "post-comment", "endline-comment", "else-comment",....)
and have deparse print them accordingly. Not quite sure how to keep
track of that during parsing, though....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Jun 17 10:14:17 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 17 Jun 1999 10:14:17 +0100 (BST)
Subject: save.image()
Message-ID: <Pine.GSO.3.96.990617100025.25104D-100000@laplace>

Would it be reasonable to suggest adding an `all' flag to save.image(),
i.e.

"save.image" <-
function (f = ".RData", all.names = F) 
eval(substitute(save(list = ls(all.names = all.names), file = f)),
    .GlobalEnv)

I only ask because I keep losing my .First() function.  I would like to
start R in a particular directory and have it configure according to the
First() function in .RData in that directory.  But every time I want to
update the objects in .RData at the end of a session by save.image(), the
.First() is lost.  I know I could use an .Rprofile in the directory, but
my understanding is that it executes before the .Rprofile in the home
directory, while a .First() would execute afterwards, which is better for
modifying my general settings.

Alternatively, perhaps save.image() might be modified to keep .First() and
Last() as the default. 

Many thanks, Jonathan (v. 0.63.2)

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 17 10:25:17 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 17 Jun 1999 11:25:17 +0200 (MET DST)
Subject: save.image() (PR#212)
Message-ID: <199906170925.LAA21831@pubhealth.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> Would it be reasonable to suggest adding an `all' flag to save.image(),
> i.e.
> 
> "save.image" <-
> function (f = ".RData", all.names = F) 
> eval(substitute(save(list = ls(all.names = all.names), file = f)),
>     .GlobalEnv)

I believe this is simply a bug. I see no reason to skip the
dot-objects. 

[current save.image has ...list=ls()...]

CC-ed to r-bugs.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 17 21:42:18 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Thu, 17 Jun 1999 16:42:18 -0400
Subject: changes in configure (Re: Compilation fails (PR#209))
In-Reply-To: Your message of "Mon, 14 Jun 1999 18:34:59 EDT."
 <14181.12083.82468.559759@pc87.maho.magnaeu.com>
Message-ID: <199906172042.QAA13472@infiniti.ece.cmu.edu>

> If you are reading this, your mail reader may not support MIME.
> Some parts of this message will be readable as plain text.

--17.Jun.1999mysteryboxofun
Content-Type: text/plain


Kurt,

  uh, my original suggestion to check the installed xmkmf was directed
to Frank who wasn't very lucky with his Fortran compiler.
Now for AIX, for which I'm actually compiling R at the moment.

"Kurt" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
Kurt> AIX is not a supported platform yet.  If you tell me which flags (cpic,
Kurt> fpic, shlib, maybe something extra for producing the main binary) to use
Kurt> for this platform and the NATIVE compilers, I will gladly tell configure
Kurt> how to get things right on AIX.

I'd like to take you up on your offer, especially since I can't create
the configure file out of configure.in.  
Attached is (hopefully) a patchfile that updates configure fo AIX.  It
also patches the Makefile.in in src/library/modreg/src and it contains
ldAIX4 which is a script for the aux (in R-0.64.1) directory.
(I've put the patch at: www.ece.cmu.edu/~tov/public/R-on-aix42.patch)

Something like the following in a clean R-0.64.1 directory should
work:
$ cd R-0.64.1
$ patch -b -u -p0 < ../R-on-aix42.patch
$ chmod +x aux/ldAIX4
$ mkdir build && cd build
$ # force native compilers:
$ CC=cc ../configure --with-f77 --with-x --without-gnome
$ make

This still leaves the problem with R SHLIB.  AIX needs a file with
symbols that are exported from the main program (R.binary).  A "make
install" should store this file in RHOME/etc/main.exp or somwhere
close.  Lemme think about how to work with in installed R.

A final "make test" runs smoothly up to ../../tests/print-tests.R.
There are some diffs with the length of printed doubles, like,
< [4,] 1.7976931348623157e+308
---
> [4,] 1.797693134862315708145e+308
So the printed number in AIX is shorter?  Any comments?

Thanks,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

--17.Jun.1999mysteryboxofun
Content-Type: application/octet-stream; name="R-on-aix42.patch.gz"
Content-Description: ~/public/R-on-aix42.patch.gz
Content-Transfer-Encoding: base64

H4sICLY8aTcAA1Itb24tYWl4NDIucGF0Y2gAlVZ7V9s2FP87+RR3xmfkZROHBBpDKO81PVB6
gO5FGFVsOdZwJM9yCFnLd9+V5JCEtut2jo8lX/3u+yFfOk13q+0S9gg2jEIWReBMwN0IBI/Y
aJJRV2RstEwoO47zBaB0mjE4JzOAbWh2/VbHbzfB63a75Xq9vowu/UJDeDvh4G3h4292/E7X
APf3wdnsdLcaW1DXq/cK9vfLsLYGfR6yBxZOSAJpQvJIZGMQDzTLWEilW4YyBERSsOxPsZD5
kwWMl+sANfSq7d60nO5traoIAGfHR+fHvXW7kov0TmZByLLqBpk8biThQf/X9rpBHZ+dnZ4d
/HTVW4+2t8EZhjNOxiwoTteO3vePzLkTpSwoqKdfo169Oesfnh33UM4KoRDvDM8H/tXlCThv
Ol4LnGv9HnJBeZ7NcEcfU5IkuOn7xubhhCWhthqt3xgTxjcSNnQRN7cO3hchcmOYMmSOyQOF
PKYQiSQRU8ZHkDBOocIpDTEbiAX0MBEkdIMiTgHJYW8PVNpCGkkUtbs7OLk4LdfX8Ftxvzn4
+eTu3cXd1W/nhxdndx/eHZ9cXh1doC9eua6RSs7OThnfJEljUhMywjQoKhSBshxGKb2bsjy+
Q5mPJMjB/mQOnywD/aYll9+oXBUXDElGstnGWIQZHWnSOblHwxPqMj4v6e8ji1r/jyJL1/EE
3hIOLQ88z29v+mqzaILvi1npDmyNV36zueiOVquxDXV8m8Yo7Qcp2BWspyq8LI65GruS3o/0
p1RtYtA+rheHb6+qZaf0knGIBXVpqhQcAfb+M7aO2KJ6lb7lQq6uQnE9xUPFs/Y/FKB9Y2zf
ZBYklHAf9FI2i//NdC+ad57WBaVI3wuISZMK8jZ4bb+55Xe2ltO0gJeuEKWRm+C98jttv7W5
SEez0YS619jaVNmor/0A2jcZl+v4BdcxkyCDjKU5xDRJJZbwOGWJaj8CqnEhzcQoI2PsTaxx
3aoTnGLFsFEyVEsi3gXo5+sSin4VHNA4kIwHpq9R5j3NsM8l5ALuuZhqMs4EkeVaDpM5iEhT
VzRPY8qX7FLnMiYZKlEVYwxDopKxyqeMVdZBRTUvhIlIUVKlWtW2QpBRklOJjqrCVuxWMaUs
qOC4maJgigMcZmICOUVhLFe2o+cUt0qKjp/iVq2fo3KpxCz8Mk6p2fWFVxXmUhcs16q6yKPY
TjVMJSQnIwpTCmSSizHJWYDjdQYkDMFyhif+3Eo04LQQbQJiwogxQYvXn4eqmHP2/YV/YzIb
og4VFwIpyeNnM7RP+AiOOjE+eTF9VTrbbsvVlSNpDs6j2k4kGtuzPqjFh49DvON0gOzmR7jB
3tlFfSpCe7eQhLBLspHU4vDDdd09S8lgEdzgTPUcy4mtJ+iBWuF2R7mGl2SJBrEAb+/HFt6e
Wp+liI+YDhzjETO1fBTT4F6L1vqxkoocmOzqy9f2ilsXsK3VtFApQVjP/tR6bUQ/IVXGLMqh
hTu8Ggp0bQXurfAWuzVHPHMv8a5wPpdYAaCSBC/tF8M/KV4yuCNZEDPMoXIBS0votWchc6RP
RzsQivllqPxDEnoINVdUYY62zUYfWjs7YFR+hYd8jycUnBbGqgufj0EK03+YijRjPC/KZpSI
If4Hydk4FYmEyoRLzAQNGzDdEDhpSEgzjAof9/hYLSLNUamTgjMCTL3RcUnxPwqnh+VGE65z
eo2VnHnq1bJM7VrFEbLgTUUfvd66bPwxcAeVG+L8feD8flusTad7d1sbVDEd1+DW7MbAa6i/
kSU1DyTTWg6/1DI/Gko519Qymv5Fz2GhR3FpXZhtVcgWTmHXgj2wi6Io120MpW3CAPPQfwaJ
nedwcNRPo/HOWvpA4z7DwCRSRRe/Jpz9pf5DFoKVg33+IO7nAxhteMDMWPa+ZYbJHKuDrnvK
fl3+BywP7vxxCwAA


--17.Jun.1999mysteryboxofun--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jun 18 07:07:15 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 18 Jun 1999 08:07:15 +0200 (CEST)
Subject: save.image() (PR#212)
In-Reply-To: <199906170925.LAA21831@pubhealth.ku.dk>
References: <199906170925.LAA21831@pubhealth.ku.dk>
Message-ID: <14185.57875.863375.292020@aragorn.ci.tuwien.ac.at>

>>>>> p dalgaard writes:

> Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
>> Would it be reasonable to suggest adding an `all' flag to save.image(),
>> i.e.
>> 
>> "save.image" <-
>> function (f = ".RData", all.names = F) 
>> eval(substitute(save(list = ls(all.names = all.names), file = f)),
>> .GlobalEnv)

> I believe this is simply a bug. I see no reason to skip the
> dot-objects. 

> [current save.image has ...list=ls()...]

> CC-ed to r-bugs.

Ok, changed to ls(all.names = TRUE).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pm254@medschl.cam.ac.uk  Fri Jun 18 08:05:06 1999
From: pm254@medschl.cam.ac.uk (Paul Murrell)
Date: Fri, 18 Jun 1999 08:05:06 +0100
Subject: graphics changes
Message-ID: <002c01beb958$e5664ce0$54566f83@capc03t.medlan.cam.ac.uk>

hi

i have just made a couple of graphics changes to R to make graphics clipping
more consistent and to make par(xpd) compatible with S.

as a result of these changes, there is a possibility that some graphics
output may "disappear" from existing R code
(i) because the output from rect() is now clipped in PostScript  and
(ii) because par(xpd=T) now means clip to figure region rather than clip to
device region.

the solution to the latter problem is to use par(xpd=NA) instead of
par(xpd=T) - if you have never used par(xpd) then nothing should change.
the solution to the former problem is to start using par(xpd) :)

these changes will only affect the R-release snapshots in the short term,
but ultimately they will be part of the R-devel prerelease and then release
0.65.

paul




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gonzalez@mppmu.mpg.de  Fri Jun 18 12:15:59 1999
From: gonzalez@mppmu.mpg.de (Jose Carlos Gonzalez)
Date: Fri, 18 Jun 1999 13:15:59 +0200 (MET DST)
Subject: Compilation fails (PR#209)
In-Reply-To: <14181.11583.323584.13254@pc87.maho.magnaeu.com>
Message-ID: <Pine.OSF.4.10.9906181251520.14280-200000@hegra9.mppmu.mpg.de>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--0-845171975-929704559=:14280
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Mon, 14 Jun 1999, Kurt Hornik wrote:

KH>>>>>> Frank Beimfohr writes:
KH>
KH>>> Hi,
KH>>>
KH>
KH>(As an aside.  This thread is quickly becoming extremely inefficient.  I
KH>am certainly willing to fix configuration/build problems, but if I ask
KH>SPECIFIC questions then I really need specific answers.)
KH>
KH>>> there are three different things going on here:
KH>>> (1) gmake by default has the option "-w" set, which is why you see
KH>>> these "Entering/Leaving directory ..." messages.  This option finds a
KH>>> way into the make flags when the system default make is called.  Not
KH>>> quite sure how, but don't blame it on configure.  Makeconf et. al. is
KH>>> more likely.
KH>
KH>I don't see how the system default could be called.  The instructions
KH>say that if you want to use non-default make, then you need to do
KH>(assuming a Bourne shell)
KH>
KH>	MAKE=/the/make/you/want ./configure
KH>	/the/make/you/want
KH>
KH>>> (2) Very annoyingly, modreg doesn't use the $(SHLIBLD) command but
KH>>> calls R with SHLIB as option.  Which is nothing you are interested in,
KH>>> but is a bad thing, IMHO.
KH>
KH>Good point.  Will have a look.
KH>

Did you get anything out of this problem? I'm trying to compile
the distributed source R-0.64.1 in my computer (Digital
AlphaStation, OSF1 V4.0 alpha) with gcc and g77. The standard cc
and f77 complain in this machine, and I thought that perhaps
with the GNU tools it would go fine. But it does not.

KH>>> (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
KH>>> configure uses.  Try to find out, what the default is.  Follow this example:
KH>>> tmp $ touch Imakefile
KH>>> tmp $ xmkmf
KH>>> imake -DUseInstalled -I/usr/lib/X11/config
KH>>> "./Imakefile", line 1: 1506-229 (W) File is empty.
KH>>> tmp $ grep -i pic Makefile 
KH>>> PICFLAGS = -bM\:SRE
KH>>> (Results are for an AIX box.  Your output should look different.)
KH>
KH>> I started 'configure' with the f2c- and without the g77-Option and used 
KH>> /usr/ccs/bin/make instead of gmake (very flexible, isn't it ;) 
KH>

Unfortunately, I cannot use f2c (well, I could install it, but I
would really prefer not to do it).

Attached I send, all together in one file:

- the command line and output of configure
- the Makeconf file
- the output after the compilation process starts... and fails

I still want to use R in this system. There are pre-compiled
binary distributions, but as I said in one previous e-mail, I
only find RPM packages for Alpha, and I would need a
"Gzipped+Tarred" distribution instead.

Cheers,

  J C 
--
470-"Don't worry! I still have a dagger attack."
	("FAMOUS LAST WORDS", collected by O.Rosenkranz)
====================================================================
   *    J. C. Gonzalez                   
  .     ------------------------------------------------------------  
  .     Max-Planck-Institut fuer Physik        Tel.: +49 89 32354445
   .    (Werner-Heisenberg-Institut)           Fax : +49 89 3226704   
     *  Foehringer Ring, 6          ... . .... . ..... ......... .. 
 .      D-80805 Muenchen  E-mail: gonzalez@mppmu.mpg.de
   .    Deutschland          WWW: hegra1.mppmu.mpg.de:8000/~gonzalez
====================================================================

--0-845171975-929704559=:14280
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=R-compil
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.OSF.4.10.9906181315590.14280@hegra9.mppmu.mpg.de>
Content-Description: 
Content-Disposition: attachment; filename=R-compil

IyBybSBjb25maWcuY2FjaGUNCiMgQ0M9Z2NjIEY3Nz1nNzcgLi9jb25maWd1
cmUgLS1wcmVmaXg9L2hkOTAvZ29uemFsZXovUiAtLXdpdGgtZzc3DQpjcmVh
dGluZyBjYWNoZSAuL2NvbmZpZy5jYWNoZQ0KY2hlY2tpbmcgZm9yIGEgQlNE
IGNvbXBhdGlibGUgaW5zdGFsbC4uLiAvYmluL2luc3RhbGxic2QgLWMNCmNo
ZWNraW5nIHdoZXRoZXIgbG4gLXMgd29ya3MuLi4geWVzDQpjaGVja2luZyBm
b3IgcmFubGliLi4uIHJhbmxpYg0KY2hlY2tpbmcgZm9yIGJpc29uLi4uIGJp
c29uIC15DQpjaGVja2luZyBmb3IgYXIuLi4gYXINCmNoZWNraW5nIGZvciBs
YXRleC4uLiAvdXNyL2xvY2FsL3RlVGV4L2Jpbi9hbHBoYS1vc2Y0LjAvbGF0
ZXgNCmNoZWNraW5nIGZvciBkdmlwcy4uLiAvdXNyL2xvY2FsL3RlVGV4L2Jp
bi9hbHBoYS1vc2Y0LjAvZHZpcHMNCmNoZWNraW5nIGZvciBtYWtlaW5kZXgu
Li4gL3Vzci9sb2NhbC90ZVRleC9iaW4vYWxwaGEtb3NmNC4wL21ha2VpbmRl
eA0KY2hlY2tpbmcgZm9yIHVuemlwLi4uIC91c3IvbG9jYWwvYmluL3Vuemlw
DQpjaGVja2luZyBmb3IgemlwLi4uIC91c3IvbG9jYWwvYmluL3ppcA0KY2hl
Y2tpbmcgZm9yIHBlcmwuLi4gL2Jpbi9wZXJsDQpjaGVja2luZyB3aGV0aGVy
IHBlcmwgaXMgcGVybCA1Li4uIHllcw0KY2hlY2tpbmcgZm9yIGdjYy4uLiBn
Y2MNCmRlZmluaW5nIEY3NyB0byBiZSBnNzcNCmNoZWNraW5nIGZvciB1bmRl
cnNjb3JlIGFmdGVyIEZvcnRyYW4gc3ltYm9scy4uLiB5ZXMNCmNoZWNraW5n
IGZvciBzaW4gaW4gLWxtLi4uIHllcw0KY2hlY2tpbmcgZm9yIHNpbiBpbiAt
bG1vdG8uLi4gbm8NCmNoZWNraW5nIGZvciBtYWluIGluIC1sbmN1cnNlcy4u
LiBubw0KY2hlY2tpbmcgZm9yIG1haW4gaW4gLWx0ZXJtY2FwLi4uIHllcw0K
Y2hlY2tpbmcgZm9yIGRsb3BlbiBpbiAtbGRsLi4uIG5vDQpjaGVja2luZyBm
b3IgbWFpbiBpbiAtbHouLi4geWVzDQpjaGVja2luZyBmb3IgbWFpbiBpbiAt
bGhkZjUuLi4gbm8NCmNoZWNraW5nIGZvciBtYWluIGluIC1sZHhtbC4uLiBu
bw0KY2hlY2tpbmcgZm9yIG1haW4gaW4gLWxibGFzLi4uIG5vDQpjaGVja2lu
ZyBmb3IgcmxfY2FsbGJhY2tfcmVhZF9jaGFyIGluIC1scmVhZGxpbmUuLi4g
bm8NCmNoZWNraW5nIGhvdyB0byBydW4gdGhlIEMgcHJlcHJvY2Vzc29yLi4u
IGdjYyAtRQ0KY2hlY2tpbmcgZm9yIEFOU0kgQyBoZWFkZXIgZmlsZXMuLi4g
eWVzDQpjaGVja2luZyBmb3IgcGlkX3QuLi4geWVzDQpjaGVja2luZyBmb3Ig
dmZvcmsuaC4uLiBubw0KY2hlY2tpbmcgZm9yIHdvcmtpbmcgdmZvcmsuLi4g
eWVzDQpjaGVja2luZyBmb3IgdnByaW50Zi4uLiB5ZXMNCmNoZWNraW5nIGZv
ciBhY29zaC4uLiB5ZXMNCmNoZWNraW5nIGZvciBhc2luaC4uLiB5ZXMNCmNo
ZWNraW5nIGZvciBhdGFuaC4uLiB5ZXMNCmNoZWNraW5nIGZvciBiY29weS4u
LiB5ZXMNCmNoZWNraW5nIGZvciBmaW5pdGUuLi4geWVzDQpjaGVja2luZyBm
b3IgaXNmaW5pdGUuLi4gbm8NCmNoZWNraW5nIGZvciBpc25hbi4uLiB5ZXMN
CmNoZWNraW5nIGZvciBtYXRoZXJyLi4uIG5vDQpjaGVja2luZyBmb3IgbWVt
Y3B5Li4uIHllcw0KY2hlY2tpbmcgZm9yIG1lbW1vdmUuLi4geWVzDQpjaGVj
a2luZyBmb3IgcmVnY29tcC4uLiB5ZXMNCmNoZWNraW5nIGZvciByaW50Li4u
IHllcw0KY2hlY2tpbmcgZm9yIHN0cmNvbGwuLi4geWVzDQpjaGVja2luZyBm
b3Igc3RydG9kLi4uIHllcw0KY2hlY2tpbmcgZm9yIHN0cnRvbC4uLiB5ZXMN
CmNoZWNraW5nIGZvciBzeXN0ZW0uLi4geWVzDQpjaGVja2luZyBmb3IgdGlt
ZXMuLi4geWVzDQpjaGVja2luZyBmb3Igc2lnc2V0am1wLi4uIHllcw0KY2hl
Y2tpbmcgZm9yIHNpZ2xvbmdqbXAuLi4geWVzDQpjaGVja2luZyBmb3IgX19z
ZXRmcHVjdy4uLiBubw0KY2hlY2tpbmcgZm9yIEFOU0kgQyBoZWFkZXIgZmls
ZXMuLi4gKGNhY2hlZCkgeWVzDQpjaGVja2luZyBmb3IgZGwuaC4uLiBubw0K
Y2hlY2tpbmcgZm9yIGRsZmNuLmguLi4geWVzDQpjaGVja2luZyBmb3IgZWxm
LmguLi4gbm8NCmNoZWNraW5nIGZvciBsb2NhbGUuaC4uLiB5ZXMNCmNoZWNr
aW5nIGZvciByZWFkbGluZS9oaXN0b3J5LmguLi4gbm8NCmNoZWNraW5nIGZv
ciBycGMveGRyLmguLi4geWVzDQpjaGVja2luZyBmb3Igc3lzL3RpbWVzLmgu
Li4geWVzDQpjaGVja2luZyBmb3IgdGltZS5oLi4uIHllcw0KY2hlY2tpbmcg
Zm9yIGllZWVmcC5oLi4uIG5vDQpjaGVja2luZyBmb3IgaWVlZTc1NC5oLi4u
IG5vDQpjaGVja2luZyBmb3IgdW5pc3RkLmguLi4geWVzDQpjaGVja2luZyBm
b3IgaGRmNS5oLi4uIG5vDQpjaGVja2luZyByZXR1cm4gdHlwZSBvZiBzaWdu
YWwgaGFuZGxlcnMuLi4gdm9pZA0KY2hlY2tpbmcgZm9yIHdvcmtpbmcgY29u
c3QuLi4geWVzDQpjaGVja2luZyBzaXplIG9mIGxvbmcuLi4gOA0KY2hlY2tp
bmcgZm9yIHhta21mLi4uIC91c3IvYmluL1gxMS94bWttZg0KY2hlY2tpbmcg
aG93IHRvIG1ha2Ugc2hhcmVkIGxpYnJhcmllcy4uLiBkb25lDQpjaGVja2lu
ZyBmb3IgWC4uLiBsaWJyYXJpZXMgLCBoZWFkZXJzIA0KY2hlY2tpbmcgZm9y
IGRuZXRfbnRvYSBpbiAtbGRuZXQuLi4gbm8NCmNoZWNraW5nIGZvciBkbmV0
X250b2EgaW4gLWxkbmV0X3N0dWIuLi4geWVzDQpjaGVja2luZyBmb3IgZ2V0
aG9zdGJ5bmFtZS4uLiB5ZXMNCmNoZWNraW5nIGZvciBjb25uZWN0Li4uIHll
cw0KY2hlY2tpbmcgZm9yIHJlbW92ZS4uLiB5ZXMNCmNoZWNraW5nIGZvciBz
aG1hdC4uLiB5ZXMNCmNoZWNraW5nIGZvciBJY2VDb25uZWN0aW9uTnVtYmVy
IGluIC1sSUNFLi4uIHllcw0KY2hlY2tpbmcgZm9yIGxwci4uLiBscHINCnVw
ZGF0aW5nIGNhY2hlIC4vY29uZmlnLmNhY2hlDQpjcmVhdGluZyAuL2NvbmZp
Zy5zdGF0dXMNCmNyZWF0aW5nIE1ha2Vjb25mDQpjcmVhdGluZyBNYWtlZmls
ZQ0KY3JlYXRpbmcgYWZtL01ha2VmaWxlDQpjcmVhdGluZyBkZW1vcy9NYWtl
ZmlsZQ0KY3JlYXRpbmcgZG9jL01ha2VmaWxlDQpjcmVhdGluZyBkb2Mva2V5
d29yZC10ZXN0DQpjcmVhdGluZyBkb2MvbWFudWFsL01ha2VmaWxlDQpjcmVh
dGluZyBkb2MvbWFudWFsL2xpYjJ0ZXgNCmNyZWF0aW5nIGRvYy9tYW51YWwv
UmVmZXJlbmNlLnRleA0KY3JlYXRpbmcgZG9jL21hbnVhbC9NYW51YWwudGV4
DQpjcmVhdGluZyBldGMvTWFrZWZpbGUNCmNyZWF0aW5nIGV0Yy9NYWtlY29u
Zg0KY3JlYXRpbmcgc3JjL01ha2VmaWxlDQpjcmVhdGluZyBzcmMvYXBwbC9N
YWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2luY2x1ZGUvTWFrZWZpbGUNCmNyZWF0
aW5nIHNyYy9saWJyYXJ5L01ha2VmaWxlDQpjcmVhdGluZyBzcmMvbWFpbi9N
YWtlZmlsZQ0KY3JlYXRpbmcgc3JjL25tYXRoL01ha2VmaWxlDQpjcmVhdGlu
ZyBzcmMvc2NyaXB0cy9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL3VuaXgvTWFr
ZWZpbGUNCmNyZWF0aW5nIHNyYy9nbm9tZS9NYWtlZmlsZQ0KY3JlYXRpbmcg
c3JjL2xpYnJhcnkvYmFzZS9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2xpYnJh
cnkvcHJvZmlsZS9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2xpYnJhcnkvZWRh
L01ha2VmaWxlDQpjcmVhdGluZyBzcmMvbGlicmFyeS9lZGEvc3JjL01ha2Vm
aWxlDQpjcmVhdGluZyBzcmMvbGlicmFyeS9scXMvTWFrZWZpbGUNCmNyZWF0
aW5nIHNyYy9saWJyYXJ5L2xxcy9zcmMvTWFrZWZpbGUNCmNyZWF0aW5nIHNy
Yy9saWJyYXJ5L21vZHJlZy9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2xpYnJh
cnkvbW9kcmVnL3NyYy9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2xpYnJhcnkv
bXZhL01ha2VmaWxlDQpjcmVhdGluZyBzcmMvbGlicmFyeS9tdmEvc3JjL01h
a2VmaWxlDQpjcmVhdGluZyBzcmMvbGlicmFyeS9zdGVwZnVuL01ha2VmaWxl
DQpjcmVhdGluZyBzcmMvc2NyaXB0cy9DT01QSUxFDQpjcmVhdGluZyBzcmMv
c2NyaXB0cy9JTlNUQUxMDQpjcmVhdGluZyBzcmMvc2NyaXB0cy9SRU1PVkUN
CmNyZWF0aW5nIHNyYy9zY3JpcHRzL1Iuc2gNCmNyZWF0aW5nIHNyYy9zY3Jp
cHRzL1JkY29udg0KY3JlYXRpbmcgc3JjL3NjcmlwdHMvUmRpbmRleA0KY3Jl
YXRpbmcgc3JjL3NjcmlwdHMvUm1hbjJSZA0KY3JlYXRpbmcgc3JjL3Njcmlw
dHMvU0hMSUINCmNyZWF0aW5nIHNyYy9zY3JpcHRzL1NkMlJkDQpjcmVhdGlu
ZyBzcmMvc2NyaXB0cy9idWlsZC1oZWxwDQpjcmVhdGluZyBzcmMvc2NyaXB0
cy9md2YydGFibGUNCmNyZWF0aW5nIHNyYy9zY3JpcHRzL2hlbHAucHJldHR5
DQpjcmVhdGluZyBzcmMvc2NyaXB0cy9odG1sMmRvcw0KY3JlYXRpbmcgc3Jj
L3NjcmlwdHMvUmQyY29udGVudHMNCmNyZWF0aW5nIHRlc3RzL01ha2VmaWxl
DQpjcmVhdGluZyB0ZXN0cy9FeGFtcGxlcy9NYWtlZmlsZQ0KY3JlYXRpbmcg
c3JjL2luY2x1ZGUvUGxhdGZvcm0uaA0Kc3JjL2luY2x1ZGUvUGxhdGZvcm0u
aCBpcyB1bmNoYW5nZWQNCg0KDQpSIGlzIG5vdyBjb25maWd1cmVkIGZvciBh
bHBoYS1kZWMtb3NmNC4wDQoNCiAgU291cmNlIGRpcmVjdG9yeTogICAgICAg
ICAuDQogIEluc3RhbGxhdGlvbiBkaXJlY3Rvcnk6ICAgL2hkOTAvZ29uemFs
ZXovUg0KICBDIGNvbXBpbGVyOiAgICAgICAgICAgICAgIGdjYyAtaWVlZV93
aXRoX2luZXhhY3QgLWcNCiAgRk9SVFJBTiBjb21waWxlcjogICAgICAgICBn
NzcgLU8yDQogIEdub21lIHN1cHBvcnQ6ICAgICAgICAgICAgbm8NCg0KIyBj
YXQgTWFrZWNvbmYNClBBQ0tBR0UgPSBSDQpWRVJTSU9OID0gMC42NC4xDQoN
CkFSID0gYXINCkJMQVMgPSBibGFzLm8NCkNDID0gZ2NjDQpDRkxBR1MgPSAt
aWVlZV93aXRoX2luZXhhY3QgLWcNCkNQSUNGTEFHUyA9IA0KQ1BQRkxBR1Mg
PSAtSS4uL2luY2x1ZGUgLUkkKHRvcF9zcmNkaXIpL3NyYy9pbmNsdWRlIA0K
RExMRkxBR1MgPSANCkRWSVBTID0gL3Vzci9sb2NhbC90ZVRleC9iaW4vYWxw
aGEtb3NmNC4wL2R2aXBzDQpGQyA9IGc3Nw0KRkZMQUdTID0gLU8yDQpGUElD
RkxBR1MgPSAtZnBpYw0KRjJDID0gDQpGMkNGTEFHUyA9IA0KR05PTUVVSV9M
SUJTID0gDQpHTk9NRV9MSUJESVIgPSANCkdOT01FX0lOQ0xVREVESVIgPSAN
CklOU1RBTEwgPSAvYmluL2luc3RhbGxic2QgLWMNCklOU1RBTExfREFUQSA9
ICR7SU5TVEFMTH0gLW0gNjQ0DQpJTlNUQUxMX1BST0dSQU0gPSAke0lOU1RB
TEx9DQpJTlNUQUxMX0RJUiA9ICR7SU5TVEFMTH0gLWQNCkxBVEVYID0gL3Vz
ci9sb2NhbC90ZVRleC9iaW4vYWxwaGEtb3NmNC4wL2xhdGV4DQpMRENNRCA9
IGc3Nw0KTERGTEFHUyA9IA0KTElCUyA9ICAtbHogLWx0ZXJtY2FwIC1sbSAN
CkxOX1MgPSBsbiAtcw0KTUFLRUlOREVYID0gL3Vzci9sb2NhbC90ZVRleC9i
aW4vYWxwaGEtb3NmNC4wL21ha2VpbmRleA0KTUtJTlNUQUxMRElSUyA9ICQo
dG9wX3NyY2RpcikvYXV4L21raW5zdGFsbGRpcnMNClJBTkxJQiA9IHJhbmxp
Yg0KU0hFTEwgPSAvYmluL3NoDQpTSExJQkVYVCA9IHNvDQpTSExJQkxEID0g
bGQNClNITElCTERGTEFHUyA9IC1zaGFyZWQNClRBUiA9IHRhcg0KWF9DRkxB
R1MgPSANClhfTElCUyA9ICAtbFgxMQ0KWF9QUkVfTElCUyA9ICAtbFNNIC1s
SUNFDQpYX0VYVFJBX0xJQlMgPSAgLWxkbmV0X3N0dWINCllBQ0MgPSBiaXNv
biAteQ0KDQouU1VGRklYRVM6DQouU1VGRklYRVM6IC5jIC5mIC5vDQouYy5v
Og0KCSQoQ0MpICQoQ0ZMQUdTKSAkKENQUEZMQUdTKSAtYyAkPCAtbyAkQA0K
DQouZi5jOg0KLmYubzoNCgkkKEZDKSAkKEZGTEFHUykgLWMgJDwgLW8gJEAN
Cg0KcHJlZml4ID0gL2hkOTAvZ29uemFsZXovUg0KZXhlY19wcmVmaXggPSAk
e3ByZWZpeH0NCmJpbmRpciA9ICR7ZXhlY19wcmVmaXh9L2Jpbg0KZGF0YWRp
ciA9ICR7cHJlZml4fS9zaGFyZQ0KbGliZGlyID0gJHtleGVjX3ByZWZpeH0v
bGliDQptYW5kaXIgPSAke3ByZWZpeH0vbWFuDQoNCnJob21lID0gJHtleGVj
X3ByZWZpeH0vbGliL1INCg0KIyBnbnVtYWtlDQpnbnVtYWtlWzFdOiBFbnRl
cmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL2FmbScN
CmdudW1ha2VbMV06IExlYXZpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxl
ei9SLTAuNjQuMS9hZm0nDQpnbnVtYWtlWzFdOiBFbnRlcmluZyBkaXJlY3Rv
cnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL2RlbW9zJw0KZ251bWFrZVsx
XTogTGVhdmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4x
L2RlbW9zJw0KZ251bWFrZVsxXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5
MC9nb256YWxlei9SLTAuNjQuMS9kb2MnDQpnbnVtYWtlWzFdOiBMZWF2aW5n
IGRpcmVjdG9yeSBgL2hkOTAvZ29uemFsZXovUi0wLjY0LjEvZG9jJw0KZ251
bWFrZVsxXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9S
LTAuNjQuMS9ldGMnDQpnbnVtYWtlWzFdOiBMZWF2aW5nIGRpcmVjdG9yeSBg
L2hkOTAvZ29uemFsZXovUi0wLjY0LjEvZXRjJw0KZ251bWFrZVsxXTogRW50
ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9SLTAuNjQuMS9zcmMn
DQpnbnVtYWtlWzJdOiBFbnRlcmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnph
bGV6L1ItMC42NC4xL3NyYy9pbmNsdWRlJw0KZ251bWFrZVsyXTogTGVhdmlu
ZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9pbmNs
dWRlJw0KZ251bWFrZVsyXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9n
b256YWxlei9SLTAuNjQuMS9zcmMvYXBwbCcNCmdudW1ha2VbMl06IE5vdGhp
bmcgdG8gYmUgZG9uZSBmb3IgYFInLg0KZ251bWFrZVsyXTogTGVhdmluZyBk
aXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9hcHBsJw0K
Z251bWFrZVsyXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxl
ei9SLTAuNjQuMS9zcmMvbm1hdGgnDQpnbnVtYWtlWzJdOiBOb3RoaW5nIHRv
IGJlIGRvbmUgZm9yIGBSJy4NCmdudW1ha2VbMl06IExlYXZpbmcgZGlyZWN0
b3J5IGAvaGQ5MC9nb256YWxlei9SLTAuNjQuMS9zcmMvbm1hdGgnDQpnbnVt
YWtlWzJdOiBFbnRlcmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1It
MC42NC4xL3NyYy91bml4Jw0KZ251bWFrZVsyXTogTm90aGluZyB0byBiZSBk
b25lIGZvciBgUicuDQpnbnVtYWtlWzJdOiBMZWF2aW5nIGRpcmVjdG9yeSBg
L2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL3VuaXgnDQpnbnVtYWtlWzJd
OiBFbnRlcmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4x
L3NyYy9tYWluJw0KZ251bWFrZVsyXTogTm90aGluZyB0byBiZSBkb25lIGZv
ciBgUicuDQpnbnVtYWtlWzJdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hkOTAv
Z29uemFsZXovUi0wLjY0LjEvc3JjL21haW4nDQpnbnVtYWtlWzJdOiBFbnRl
cmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9z
Y3JpcHRzJw0KZ251bWFrZVsyXTogTGVhdmluZyBkaXJlY3RvcnkgYC9oZDkw
L2dvbnphbGV6L1ItMC42NC4xL3NyYy9zY3JpcHRzJw0KZ251bWFrZVsyXTog
RW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9SLTAuNjQuMS9z
cmMvbGlicmFyeScNCmdudW1ha2VbM106IEVudGVyaW5nIGRpcmVjdG9yeSBg
L2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvYmFzZScNCkJ1
aWxkaW5nIFIgYmFzZSBwYWNrYWdlDQpnbnVtYWtlWzNdOiBMZWF2aW5nIGRp
cmVjdG9yeSBgL2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkv
YmFzZScNCmdudW1ha2VbM106IEVudGVyaW5nIGRpcmVjdG9yeSBgL2hkOTAv
Z29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvZWRhJw0KZ251bWFrZVs0
XTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9SLTAuNjQu
MS9zcmMvbGlicmFyeS9lZGEvc3JjJw0KZ251bWFrZVs0XTogTGVhdmluZyBk
aXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9saWJyYXJ5
L2VkYS9zcmMnDQpnbnVtYWtlWzNdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hk
OTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvZWRhJw0KZ251bWFr
ZVszXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9SLTAu
NjQuMS9zcmMvbGlicmFyeS9scXMnDQpnbnVtYWtlWzRdOiBFbnRlcmluZyBk
aXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9saWJyYXJ5
L2xxcy9zcmMnDQpnbnVtYWtlWzRdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hk
OTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvbHFzL3NyYycNCmdu
dW1ha2VbM106IExlYXZpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9S
LTAuNjQuMS9zcmMvbGlicmFyeS9scXMnDQpnbnVtYWtlWzNdOiBFbnRlcmlu
ZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9saWJy
YXJ5L21vZHJlZycNCmdudW1ha2VbNF06IEVudGVyaW5nIGRpcmVjdG9yeSBg
L2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvbW9kcmVnL3Ny
YycNCi4uLy4uLy4uLy4uL2Jpbi9SIFNITElCIC1vIG1vZHJlZy5zbyBic3Bs
dmQubyBidmFsdWUubyBidmFsdXMubyBrc21vb3RoLm8gbG9lc3NjLm8gbG9l
c3NmLm8gcHByLm8gcXNiYXJ0Lm8gc2JhcnQubyBzZ3JhbS5vIHNpbmVycC5v
IHNzbHZyZy5vIHN0eHd4Lm8NCk1ha2U6IFVua25vd24gZmxhZyBhcmd1bWVu
dCB3LiAgU3RvcC4NCmdudW1ha2VbNF06ICoqKiBbbW9kcmVnLnNvXSBFcnJv
ciAxDQpnbnVtYWtlWzRdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hkOTAvZ29u
emFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvbW9kcmVnL3NyYycNCmdudW1h
a2VbM106ICoqKiBbYWxsXSBFcnJvciAxDQpnbnVtYWtlWzNdOiBMZWF2aW5n
IGRpcmVjdG9yeSBgL2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJh
cnkvbW9kcmVnJw0KZ251bWFrZVsyXTogKioqIFtSXSBFcnJvciAxDQpnbnVt
YWtlWzJdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hkOTAvZ29uemFsZXovUi0w
LjY0LjEvc3JjL2xpYnJhcnknDQpnbnVtYWtlWzFdOiAqKiogW1JdIEVycm9y
IDENCmdudW1ha2VbMV06IExlYXZpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256
YWxlei9SLTAuNjQuMS9zcmMnDQpnbnVtYWtlOiAqKiogW1JdIEVycm9yIDEN
Cg==
--0-845171975-929704559=:14280--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From John.Peters@tip.csiro.au  Mon Jun 21 00:24:25 1999
From: John.Peters@tip.csiro.au (John.Peters@tip.csiro.au)
Date: Mon, 21 Jun 1999 01:24:25 +0200 (MET DST)
Subject: as.numeric with trailing spaces (PR#213)
Message-ID: <199906202324.BAA11356@pubhealth.ku.dk>

For R bugs:

"as.numeric" fails on strings with trailing spaces:
(OK in Splus 3.4).

> as.numeric(c("2"," 3","4 "," 5 "))
Warning: NAs introduced by coercion
[1]  2  3 NA NA
>

occurs in both "rw0641b" and "R-base-0.64.1-4-i386.rpm".

Thanks for R
----------------------------------------------------------------------------
John Peters
CSIRO National Measurement Laboratory
PO Box 218                                Phone:    +61 2 9413 7503
Lindfield NSW 2070                        Fax:      +61 2 9413 7202
Australia                                 Internet: John.Peters@tip.CSIRO.AU
----------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 21 10:12:31 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jun 1999 11:12:31 +0200
Subject: as.numeric with trailing spaces (PR#213)
In-Reply-To: John.Peters@tip.csiro.au's message of "Mon, 21 Jun 1999 01:24:25 +0200 (MET DST)"
References: <199906202324.BAA11356@pubhealth.ku.dk>
Message-ID: <x2lndd9atc.fsf@blueberry.kubism.ku.dk>

John.Peters@tip.csiro.au writes:

> For R bugs:
> 
> "as.numeric" fails on strings with trailing spaces:
> (OK in Splus 3.4).
> 
> > as.numeric(c("2"," 3","4 "," 5 "))
> Warning: NAs introduced by coercion
> [1]  2  3 NA NA
> >
> 
> occurs in both "rw0641b" and "R-base-0.64.1-4-i386.rpm".

Could probably be argued that one deserves what one gets in that case,
but it'll be easier just to change it.... (*endp == '\0' after strtod
needs to check for blank-or-empty string instead).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 21 13:48:52 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jun 1999 14:48:52 +0200
Subject: as.numeric with trailing spaces (PR#213)
In-Reply-To: Peter Dalgaard BSA's message of "21 Jun 1999 11:12:31 +0200"
References: <199906202324.BAA11356@pubhealth.ku.dk> <x2lndd9atc.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2hfo190sr.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > > as.numeric(c("2"," 3","4 "," 5 "))

> Could probably be argued that one deserves what one gets in that case,
> but it'll be easier just to change it.... (*endp == '\0' after strtod
> needs to check for blank-or-empty string instead).

Done.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jun 22 21:06:49 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 22 Jun 1999 22:06:49 +0200 (CEST)
Subject: readline/history size (PR#211)
In-Reply-To: <199906142209.AAA02065@pubhealth.ku.dk>
References: <199906142209.AAA02065@pubhealth.ku.dk>
Message-ID: <14191.60633.543672.981594@aragorn.ci.tuwien.ac.at>

>>>>> seniorr  writes:

> Full_Name: Russell Senior
> Version: 0.64.0
> OS: linux-2.2.x
> Submission from: (NULL) (198.107.133.11)


> It appears that the GNU readline history size is limited to 50
> entries.  This is apparently occurring because R is not bothering to
> override the readline default value (from readline-4.0):

>   ./history.c:59:#define DEFAULT_HISTORY_GROW_SIZE 50

> It appears that it ought to be possible to override this from R by
> setting the readline variable `history_size' to another value.  I
> request that a command-line option be added for doing this.  The
> following is an *untested* patch:

> ...

I cannot confirm that the history size is limited to 50.  In fact, on my
system the size of the .Rhistory files can grow indefinitely.

I have (in r-devel) introduced the environment variables R_HISTFILE and
R_HISTSIZE, with defaults ".Rhistory" and 512.  Upon saving, the hist
file is truncated to R_HISTSIZE lines, which I think is the right thing.

Btw, history_size is not in the history API.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jun 23 10:53:12 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 23 Jun 1999 11:53:12 +0200
Subject: make test/check ["changes in configure (for AIX; .....(PR#209)"]
In-Reply-To: <199906172042.QAA13472@infiniti.ece.cmu.edu> (message from Thomas
 Vogels on Thu, 17 Jun 1999 16:42:18 -0400)
References: <199906172042.QAA13472@infiniti.ece.cmu.edu>
Message-ID: <199906230953.LAA22019@sophie.ethz.ch>

If you have a few minutes time to help R development / testing,
*and* if have more than just a binary version of R, please read on..

>>>>> On Thu, 17 Jun 1999, Thomas Vogels <tov@infiniti.ece.cmu.edu> said:

      <....>

    ToV> "Kurt" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
    Kurt> AIX is not a supported platform yet.

      <....>

    ToV> A final "make test" runs smoothly up to ../../tests/print-tests.R.
    ToV> There are some diffs with the length of printed doubles, like, <
    ToV> [4,] 1.7976931348623157e+308 ---
      >> [4,] 1.797693134862315708145e+308
    ToV> So the printed number in AIX is shorter?  Any comments?


I have been mainly responsible for  print-tests (and other "make test"s w/ R).
Already in the past we have realized that the C libraries which are
implementing printf() *are* quite different in their behavior, unfortunately.
The above difference is from formatC()'s output, and
formatC uses C-formatting (as its name might suggest..).

There are other places which might give C-library-dependent output.
Before I change  tests/print-tests.R (and ...Rout.save) again
(such that "make test" == "make check" runs to completion on AIX),
I'd be very glad if many of you R-users installers could run

    make check

	 [I think this will only work from the top-level of the
	  Source/Installation tree; i.e. is not available for those who 
	  only installed a binary distribution.
	  Redhat/SuSe Speak: you need SRPMS, not only RPMS]

and report --- to me, not all of R-devel ---
in case you DON'T get the final OK of the line
------------------------------------------------------------------------
Comparing `print-tests.Rout' to `./print-tests.Rout.save' ... OK
------------------------------------------------------------------------
	{{In case you don't get OK, please send me the WHOLE FILE
	  tests/Examples/print-tests.Rout.fail }}

Other problems of "make check" should also be reported, 
probably to R-devel maybe to R-bugs (which forwards to R-devel).

On the other hand, if make check runs to completion,
you get something like a benchmark (with all flaws of every benchmark)
of your computer's speed in running R:

  grep '^Time elapsed:' tests/Examples/base-Ex.Rout

              (almost the last line of tests/Examples/base-Ex.Rout)

will give you the CPU (and total..) Time that was needed to execute 
*all* examples in the R base package.

Thank you in advance!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Jun 26 13:23:32 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 26 Jun 1999 14:23:32 +0200
Subject: What is "..."  when it's empty?  -- differences to S
Message-ID: <199906261223.OAA14628@sophie.ethz.ch>

i)       (function(x, ...) length(...))(1)

gives 0 in S (plus 3.4) and an error in R.
It also gives an error in Splus 5.0r3.
So we could well remain as we are... however

ii)	(function(x, ...) length(...))(1,2)

gives 1  in all dialects of S that I have available.
So by my `continuation logic', I'd argue that  "i)" above should give 0
(and R and S-plus 5.0r3 behave inconsistently.

Do we yet have any documentation on "..." ??

In both Splus 3.4 and 5.0r3,
   (function(x, ...) mode(...))(1)	returns "missing"
whereas R gives an interesting error:
    R> trace(mode)
    R> (function(x, ...) mode(...))(1)
    trace: mode(...)
    Error: Argument "x" is missing, with no default

---
What is desired for R?

BTW: Found the above problem when trying to use 
       C(<factor>) without a 2nd argument;  a patch for that will be in the 
       snapshots..

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jun 26 15:53:02 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Jun 1999 16:53:02 +0200
Subject: What is "..."  when it's empty?  -- differences to S
In-Reply-To: Martin Maechler's message of "Sat, 26 Jun 1999 14:23:32 +0200"
References: <199906261223.OAA14628@sophie.ethz.ch>
Message-ID: <x2674b57zl.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> i)       (function(x, ...) length(...))(1)
> 
> gives 0 in S (plus 3.4) and an error in R.
> It also gives an error in Splus 5.0r3.
> So we could well remain as we are... however
> 
> ii)	(function(x, ...) length(...))(1,2)
> 
> gives 1  in all dialects of S that I have available.
> So by my `continuation logic', I'd argue that  "i)" above should give 0
> (and R and S-plus 5.0r3 behave inconsistently.
> 
> Do we yet have any documentation on "..." ??
> 
> In both Splus 3.4 and 5.0r3,
>    (function(x, ...) mode(...))(1)	returns "missing"
> whereas R gives an interesting error:
>     R> trace(mode)
>     R> (function(x, ...) mode(...))(1)
>     trace: mode(...)
>     Error: Argument "x" is missing, with no default
> 
> ---
> What is desired for R?

I don't have S-plus 5.0r3 around, but the two others are consistent
with the result of length(), resp. mode() (with no arguments), both of
which have minor R/S incompatiblities. I see nothing wrong with "...",
but we might consider modifying length() and mode(), both of which
look like one-line if(is.missing(.... changes.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun 27 08:39:51 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 27 Jun 1999 08:39:51 +0100 (BST)
Subject: What is "..."  when it's empty?  -- differences to S
In-Reply-To: <199906261223.OAA14628@sophie.ethz.ch>
Message-ID: <Pine.GSO.4.05.9906270818300.14170-100000@auk.stats>

On Sat, 26 Jun 1999, Martin Maechler wrote:

> i)       (function(x, ...) length(...))(1)
> 
> gives 0 in S (plus 3.4) and an error in R.
> It also gives an error in Splus 5.0r3.
> So we could well remain as we are... however
> 
> ii)	(function(x, ...) length(...))(1,2)
> 
> gives 1  in all dialects of S that I have available.
> So by my `continuation logic', I'd argue that  "i)" above should give 0
> (and R and S-plus 5.0r3 behave inconsistently.

Try 

iii)   (function(x, ...) length(...))(1,2,3)

to see that the continuation logic is false.

I think function(x, ...) length(list(...)) is what one wants here, and they 
(R, 3.4, 5.1) are all consistent on that.  (I see that is what you put in
C.)

> Do we yet have any documentation on "..." ??
> 
> In both Splus 3.4 and 5.0r3,
>    (function(x, ...) mode(...))(1)	returns "missing"
> whereas R gives an interesting error:
>     R> trace(mode)
>     R> (function(x, ...) mode(...))(1)
>     trace: mode(...)
>     Error: Argument "x" is missing, with no default
> 
> ---
> What is desired for R?

I would leave these: none of them seem sensible uses of ... to me.

BTW, NEWS says

    o   C() didn't works (again?) for a single argument

which apart from grammar seems not entirely precise. It looks to me that
it failed if how.many _and_ ... were missing, and that was broken only
once, in 

revision 1.2.2.1
date: 1999/05/05 01:25:24;  author: ripley;  state: Exp;  lines: +4 -3
Add ... args to pass to contr.treatment etc

Also, I do not really like `didn't work': can we try to distinguish
between `failed' (gave an error) and `gave incorrect results'?  
Reason: the second is much more serious.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Jun 29 09:47:14 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 29 Jun 1999 10:47:14 +0200 (MET DST)
Subject: plot(..., lab=..) fails in axis() --- wrong "..." propagation (PR#215)
Message-ID: <199906290847.KAA19501@pubhealth.ku.dk>

> plot(1, lab=c(10,5,7))
Error in axis(side, at, labels, ...) : location and label lengths differ

Reason: lab is one of the "..."  which are passed down to all plots inside
	plot.default, including  axis(1, ...)
	"lab" in axis is interpreted as the "labels" argument
..
Different fixes seem possible,
an easy one:  Make `lab' a new explicit argument of  plot.default().

[I don't have time now]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Jun 29 16:31:40 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 29 Jun 1999 17:31:40 +0200 (CEST)
Subject: [R] Text in Plots
In-Reply-To: <006601bec21d$53f72ae0$54566f83@capc03t.medlan.cam.ac.uk>
References: <006601bec21d$53f72ae0$54566f83@capc03t.medlan.cam.ac.uk>
Message-ID: <14200.59100.382953.315832@galadriel.ci.tuwien.ac.at>


[ taken to r-devel ]

>>>>> On Tue, 29 Jun 1999 11:51:21 +0100,
>>>>> Paul Murrell (PM) wrote:

PM> hi
PM> ---snip---

PM> Dear R-users,
PM> I have two problems:
PM> 1) In producing mathematical notation in plots I can not produce the
PM> italic version of greek symbols. That is
PM>     mtext(text=expression(mu[i]))
PM> gives the same as
PM>     mtext(text=expression(italic(mu[i])))
PM> Is this a bug or a specifity of my machine (R 0.63.2, Linux 2.0.36,
PM> i686)?

PM> 2) I would like to add x and ylabels in boxplots. Is there a way to
PM> do this? I tried:
PM>     bxp(bpdata, xlab="Size Classes", ylab="Cash Flow")
PM> ---snip---

PM> 1)  this is a "feature";  the only available fonts at present are plain,
PM> bold, italic, bolditalic, and symbol.

Hmm, are we sure that this is a "feature"? The most common use for
greek symbols is in equation and the most common word processor for R
users is (hopefully/probably/maybe) LaTeX ... and greek letters in
LaTeX equations are italic ... hence shouldn't we make them available
(if possible)?

But I must admit that I obviously didn't need it before ... :-)


.f


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun 29 17:27:15 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 29 Jun 1999 18:27:15 +0200
Subject: typeof ( substitute(expression(),..) ) -- musings
In-Reply-To: <x290932h11.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 29 Jun 1999 16:55:06 +0200)
References: <199906291258.OAA10869@sophie.ethz.ch> <x290932h11.fsf@blueberry.kubism.ku.dk>
Message-ID: <199906291627.SAA11269@sophie.ethz.ch>

[Relates to  math text / normal text mixing in plots ..]

Peter, I knew you'd know the answer quickly...

Anyway, one needs to be somewhat careful here [R version  pre 0.64.2]:

    typeof(print( e1 <-            expression(a + b))) # expression 
    typeof(print(se1 <- substitute(expression(a + b), list(a = 1)))) # language

    length(e1) # == 1
    length(se1)# == 2

    text.e <- function(x,y,e) {
        text(x,y,paste(deparse(substitute(e)),": "),adj=c(1,0))
	text(x,y,e, adj=0)
    }
    plot(1,type="n", axes= F)
    text.e(1,1.4, e1); text.e(1,1.3, se1); text.e(1,1.2, se1[[2]])

Which shows that you can't use the result of `substitute' directly, but
rather the 2nd element [[which is *still* not an expression !!]]

This is all +- S-plus (3.4) compatible 
     {{some details are NOT compatible; e.g. 
	     as.expression(se1[[2]])
       gives `what you expect' in R, but not in S-plus 3.4 or 5.0r3
     }}

  e1 is an expression	whereas
 se1 is a  call (aka "language" in R).

----
Is this documented anywhere? [blue book; language reference; ?? ]

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 29 19:06:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Jun 1999 20:06:54 +0200
Subject: typeof ( substitute(expression(),..) ) -- musings
In-Reply-To: Martin Maechler's message of "Tue, 29 Jun 1999 18:27:15 +0200"
References: <199906291258.OAA10869@sophie.ethz.ch> <x290932h11.fsf@blueberry.kubism.ku.dk> <199906291627.SAA11269@sophie.ethz.ch>
Message-ID: <x2aeti285d.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> [Relates to  math text / normal text mixing in plots ..]
> 
> Peter, I knew you'd know the answer quickly...
> 
> Anyway, one needs to be somewhat careful here [R version  pre 0.64.2]:

..and the first thing to be careful with is the version, expressions
behave slightly different in 0.65!

> 
>     typeof(print( e1 <-            expression(a + b))) # expression 
>     typeof(print(se1 <- substitute(expression(a + b), list(a = 1)))) # language
> 
>     length(e1) # == 1
>     length(se1)# == 2
> 
>     text.e <- function(x,y,e) {
>         text(x,y,paste(deparse(substitute(e)),": "),adj=c(1,0))
> 	text(x,y,e, adj=0)
>     }
>     plot(1,type="n", axes= F)
>     text.e(1,1.4, e1); text.e(1,1.3, se1); text.e(1,1.2, se1[[2]])
> 
> Which shows that you can't use the result of `substitute' directly, but
> rather the 2nd element [[which is *still* not an expression !!]]

Yes. I forgot. se1 is not an expression object but a call to the
expression() - which evaluates to an expression object, i.e. one needs 

se2 <- eval(substitute(expression(a + b), list(a = 1)))

or you can ditch the expression() bit and use

sc2 <- substitute(a + b, list(a = 1))

which is 1 + b, mode "call" and will work with *most* graphics
operations, but there's a caveat: Sometimes language objects get
evaluated when you don't want them to. The notorious example is the
do.call construction in boxplot/bxp.

> This is all +- S-plus (3.4) compatible 
>      {{some details are NOT compatible; e.g. 
> 	     as.expression(se1[[2]])
>        gives `what you expect' in R, but not in S-plus 3.4 or 5.0r3
>      }}
> 
>   e1 is an expression	whereas
>  se1 is a  call (aka "language" in R).
> 
> ----
> Is this documented anywhere? [blue book; language reference; ?? ]

It will be... (It may be in the blue book, but my fading memory of it
says that it is not all that clear on this particular subject.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Jun 29 21:51:20 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 30 Jun 1999 08:51:20 +1200 (NZST)
Subject: [R] Text in Plots
In-Reply-To: <14200.59100.382953.315832@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.10.9906300837350.21611-100000@stat1.stat.auckland.ac.nz>


On Tue, 29 Jun 1999, Friedrich Leisch wrote:

> 
> [ taken to r-devel ]
> 
> >>>>> On Tue, 29 Jun 1999 11:51:21 +0100,
> >>>>> Paul Murrell (PM) wrote:
> 
> PM> hi
> PM> ---snip---
> 
> PM> Dear R-users,
> PM> I have two problems:
> PM> 1) In producing mathematical notation in plots I can not produce the
> PM> italic version of greek symbols. That is
> PM>     mtext(text=expression(mu[i]))
> PM> gives the same as
> PM>     mtext(text=expression(italic(mu[i])))
> PM> Is this a bug or a specifity of my machine (R 0.63.2, Linux 2.0.36,
> PM> i686)?
> 
> PM> 2) I would like to add x and ylabels in boxplots. Is there a way to
> PM> do this? I tried:
> PM>     bxp(bpdata, xlab="Size Classes", ylab="Cash Flow")
> PM> ---snip---
> 
> PM> 1)  this is a "feature";  the only available fonts at present are plain,
> PM> bold, italic, bolditalic, and symbol.
> 
> Hmm, are we sure that this is a "feature"? The most common use for
> greek symbols is in equation and the most common word processor for R
> users is (hopefully/probably/maybe) LaTeX ... and greek letters in
> LaTeX equations are italic ... hence shouldn't we make them available
> (if possible)?
> 
> But I must admit that I obviously didn't need it before ... :-)

The problem is that the two initial targets for the equation stuff (X11
and PostScript -- do not come with anything other than a plain symbol
font. In principle there is no problem adding italic and bold Greek (and
other symbols), but most devices don't support them (does windows have
bold and italic versions of its symbol font?).

XFig is in a similar situation.

There are publically available Adobe Type1 versions of the TeX computer
modern fonts and this may provide a way of doing math in plots, but I
suspect that plots annotated in computer modern would be pretty ugly.


	Ross

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 30 21:11:18 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 30 Jun 1999 21:11:18 +0100 (BST)
Subject: PLATFORMS
Message-ID: <Pine.GSO.4.05.9906302105320.14-100000@auk.stats>

I would like to get the PLATFORMS file updated: there are very few reports
of successful builds of 0.64.x.  In particular, if there are builds on SGI,
DEC Alpha OSF or AIX (and I believe we have heard of the latter two) please
complete the following (from the end of PLATFORMS) and email to me:

NAME
EMAIL
VERSION         
PLATFORM        
SYSTEM          
CC
FC
MAKE

We do know about Solaris and hpux10.20 and many varieties of Linux on
Intel, but other reports would be welcome. As R-0.64.2 is imminent,
replies today or tommorrow would be especially helpful.

Brian Ripley

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jacobm@magnet.drcmr.dk  Wed Jun  2 09:58:47 1999
From: jacobm@magnet.drcmr.dk (jacobm@magnet.drcmr.dk)
Date: Wed, 2 Jun 1999 10:58:47 +0200 (MET DST)
Subject: RedHat Linux 6.0 Problems (PR#201)
Message-ID: <199906020858.KAA23520@pubhealth.ku.dk>

Full_Name: Jacob Rørbech Marstrand
Version: 63.3
OS: RedHat Linux 6.0
Submission from: (NULL) (129.142.179.3)


I had R running in RedHat Linux 5.2. After updating to RedHat Linux 6.0 I get
the 
following message when I try to start R.
/usr/lib/R/bin/R.binary: error in loading shared libraries:
/usr/lib/R/bin/R.binary: 
undefined symbol: __setfpucw

After that Ive tried to upgrade with the newest RPMS R-0.64.1-4.src.rpm, but it
doesnt 
solve the problem.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  2 10:27:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Jun 1999 11:27:54 +0200
Subject: RedHat Linux 6.0 Problems (PR#201)
In-Reply-To: jacobm@magnet.drcmr.dk's message of "Wed, 2 Jun 1999 10:58:47 +0200 (MET DST)"
References: <199906020858.KAA23520@pubhealth.ku.dk>
Message-ID: <x2wvxnuf39.fsf@blueberry.kubism.ku.dk>

jacobm@magnet.drcmr.dk writes:

> I had R running in RedHat Linux 5.2. After updating to RedHat Linux 6.0 I get
> the 
> following message when I try to start R.
> /usr/lib/R/bin/R.binary: error in loading shared libraries:
> /usr/lib/R/bin/R.binary: 
> undefined symbol: __setfpucw
> 
> After that Ive tried to upgrade with the newest RPMS R-0.64.1-4.src.rpm, but it
> doesnt 
> solve the problem.
> 

Hmmm. Compiling from raw sources might be easier (and is known to work
on at least one system!). 

Anyway, if you're still getting the __setfpucw message when
rebuilding, then I strongly suspect that the .src.rpm contain the
results of a run of "configure" on an RH5.x system, resulting in

/* Some Linux systems may need this */
#define HAVE___SETFPUCW 1

in .../src/include/Platform.h. Perhaps it works to remove that line
and rebuild.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Jun  2 11:24:43 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 02 Jun 1999 12:24:43 +0200 (CEST)
Subject: RedHat Linux 6.0 Problems (PR#201)
In-Reply-To: <x2wvxnuf39.fsf@blueberry.kubism.ku.dk>
Message-ID: <XFMail.990602122443.plummer@iarc.fr>


On 02-Jun-99 Peter Dalgaard BSA wrote:
> jacobm@magnet.drcmr.dk writes:
> 
>> I had R running in RedHat Linux 5.2. After updating to RedHat Linux 6.0 I
>> get
>> the 
>> following message when I try to start R.
>> /usr/lib/R/bin/R.binary: error in loading shared libraries:
>> /usr/lib/R/bin/R.binary: 
>> undefined symbol: __setfpucw
>> 
>> After that Ive tried to upgrade with the newest RPMS R-0.64.1-4.src.rpm, but
                                                                   ^^^

Did you really rebuild the source rpm, or is this a typo? If the latter, then
this is not an R bug, but a binary incompatibility between RedHat 5.* and 6.0.

> Hmmm. Compiling from raw sources might be easier (and is known to work
> on at least one system!). 
> 
> Anyway, if you're still getting the __setfpucw message when
> rebuilding, then I strongly suspect that the .src.rpm contain the
> results of a run of "configure" on an RH5.x system, resulting in
> 
> /* Some Linux systems may need this */
>#define HAVE___SETFPUCW 1
> 
> in .../src/include/Platform.h. Perhaps it works to remove that line
> and rebuild.

No it doesn't. If you rebuild the source rpm then you run configure.
In fact the build sequence is

./configure
make
make check
make dvi
make install

All the rpm package management stuff is just wrapped around this.
It should not be any different from rebuilding from the pristine source.
In fact I can't understand why the build didn't stop at the make
check stage (There used to be a bug in the Makefile, but I thought this
was fixed now).

I finally have a copy of RedHat 6.0 (although upgrading hasn't gone
too well so far, as usual...) so I should have RH6.0 RPMS out by the
end of the week.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Wed Jun  2 14:02:10 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Wed, 2 Jun 1999 15:02:10 +0200 (MET DST)
Subject: persp box occlusion bug (PR#202)
Message-ID: <199906021302.PAA27137@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Bug in persp() bounding box:
If the surface being plotted extends below the lower z-axis boundary, the box
is
drawn with the wrong occlusion. The box is shown as being occluded by the
surface
even though it should be in front of the surface.

The box is correct for surface extending above the box. Problem is only for
surface extending below the box.

This exhibits the bug:

std<-rep(seq(-32,32,8),9)/1000 * 60
cf<-rep(seq(-32,32,8),rep(9,9))/1000 *60 
dp<-(cf-std)/.6
std<-unique(std)
cf<-unique(cf)
dp<-t(matrix(dp,length(cf),length(std)))
persp(std,cf,dp, xlim=c(-2,2), ylim=c(-2,2), zlim=c(0,5),theta=-40,    
phi=45,
box=TRUE,ltheta=-120, lphi=120,
d=1.5, shade=.7)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun  2 18:23:45 1999
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Wed, 2 Jun 1999 19:23:45 +0200 (MET DST)
Subject: dput and options()$digits (PR#203)
Message-ID: <199906021723.TAA29613@pubhealth.ku.dk>

dput seems to rely on the setting of options()$digits to determine the precision

with which things are written, and the default digits does not seem adequate
(e.g. time series attributes can get truncated enough to make them invalid). A
default for dput of digits=16 would be better.

Paul Gilbert




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun  3 08:08:16 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 3 Jun 1999 09:08:16 +0200
Subject: dput and options()$digits (PR#203)
In-Reply-To: <199906021723.TAA29613@pubhealth.ku.dk>
 (pgilbert@bank-banque-canada.ca)
References: <199906021723.TAA29613@pubhealth.ku.dk>
Message-ID: <199906030708.JAA00438@sophie.ethz.ch>

>>>>> On Wed, 2 Jun 1999 19:23:45 +0200 (MET DST), pgilbert@bank-banque-canada.ca (Paul Gilbert) said:

    PaulG> dput seems to rely on the setting of options()$digits to
    PaulG> determine the precision with which things are written, and the
    PaulG> default digits does not seem adequate ....

Yes, thank you;
This has been fixed for a while now for the next release (0.65),
[always available as daily snapshot "R-devel..." from CRAN].

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fears@roycastle.liv.ac.uk  Thu Jun  3 14:09:49 1999
From: fears@roycastle.liv.ac.uk (fears@roycastle.liv.ac.uk)
Date: Thu, 3 Jun 1999 15:09:49 +0200 (MET DST)
Subject: very minor Rgui problem in rw0641 (PR#204)
Message-ID: <199906031309.PAA08974@pubhealth.ku.dk>

In Rgui (rw0641) the dialog boxes opened by Help->R(standard interface)
and Help->Apropos have to be closed by actually clicking on OK, rather
than by hitting return. (Once I'm at the keyboard typing in the search
term, return is more natural than going back to the mouse. But maybe I'm
just old-fashioned.)

Is it OK to mention two bugs in one report? After using bug.report('x')
which throws me into a Notepad screen, the Rgui is frozen. I can't
minimize the notepad document and carry on with R. (The main reason to
report this one is to apologise if I got the names of either of the
above menus wrong; I can't check while I'm writing this!). But I can
open other applications, such as Outlook, to copy/paste/send this. As
soon as I kill the notpad document, I'm back in R OK.

I'm using NT4 (that doesn't seem to be obvious from the automatic info
below?)



--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 8
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

********************************************
Dr S.C. Fear
Statistician         Hon. Lecturer
Roy Castle ICLCR     Dept Math. Sci.
200 London Road      University of Liverpool
Liverpool L3 9TA     Liverpool L69 3BX

fears@rc.liv.ac.uk   scf@liv.ac.uk

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fears@roycastle.liv.ac.uk  Thu Jun  3 14:56:15 1999
From: fears@roycastle.liv.ac.uk (fears@roycastle.liv.ac.uk)
Date: Thu, 3 Jun 1999 15:56:15 +0200 (MET DST)
Subject: IE5 html help search failure (PR#205)
Message-ID: <199906031356.PAA09762@pubhealth.ku.dk>

I hesitate to report this one because it is very likely system
dependent, and I have very little faith in my browser. Still, it may
point to something useful for someone to know.

On NT4, after help.start() brings up the web interface just fine
(despite the pessimistic warning on the terminal; is that still
necessary?), I can do apparaently anything in the help system, except
search.

If I'm on the top search page page
(E:\programs\R\rw0641\doc\html\search\SearchEngine.html) and click on
any topic, say 'aplot', I go to 'address'
javascript:searchInIndex%20('%20aplot') and Explorer says 'Done', but
nothing happens. Click on 'Go back' and I get 'No matches for aplot have
been found'.

I've tried several others, and also typing easy terms such as 'plot'
into the dialog box, all to no avail.

Now here's the bit where you might get cross with me. I'm using MS
Internet Explorer 5, and I can't readily confirm the same thing happens
with a standard release such as 4, since our local administrators
decided in their wisdom to remove 4 when they installed 5. And of course
it may be a problem with our local java installation too (or as well).
I'm not in charge of that, but if anyone  can guess as to what might be
set up wrong at least perhaps I can point the IT helpdesk in the right
direction.

Or maybe after all it is actually a bug in the release.

S


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 8
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

********************************************
Dr S.C. Fear
Statistician         Hon. Lecturer
Roy Castle ICLCR     Dept Math. Sci.
200 London Road      University of Liverpool
Liverpool L3 9TA     Liverpool L69 3BX

fears@rc.liv.ac.uk   scf@liv.ac.uk

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it  Thu Jun  3 21:51:15 1999
From: guido@hal.stat.unipd.it (guido@hal.stat.unipd.it)
Date: Thu, 3 Jun 1999 22:51:15 +0200 (MET DST)
Subject: very minor Rgui problem in rw0641 (PR#204)
Message-ID: <199906032051.WAA11959@pubhealth.ku.dk>

On Thu, Jun 03, 1999 at 03:09:49PM +0200, fears@roycastle.liv.ac.uk wrote:
> In Rgui (rw0641) the dialog boxes opened by Help->R(standard interface)
> and Help->Apropos have to be closed by actually clicking on OK, rather
> than by hitting return. (Once I'm at the keyboard typing in the search
> term, return is more natural than going back to the mouse. But maybe I'm
> just old-fashioned.)

  This is a limit ot the toolkit we are using (GraphApp) which
  doesn't let to define a "default button". Brian and I have plans
  to look into this but, please, don't ask when.
  Anyway, keep reporting also this minor points.

> 
> Is it OK to mention two bugs in one report? After using bug.report('x')
> which throws me into a Notepad screen, the Rgui is frozen. I can't
> minimize the notepad document and carry on with R. (The main reason to
> report this one is to apologise if I got the names of either of the
> above menus wrong; I can't check while I'm writing this!). But I can
> open other applications, such as Outlook, to copy/paste/send this. As
> soon as I kill the notpad document, I'm back in R OK.
> 
  In the actual Windows implementation of bug.report, R waits for the editor
  to complete. This is also the Unix behaviour.
  If you don't like it, you should edit the function changing the
  the 'system' call towards the end from
  system(paste(.Options$editor, file))    
  to
  system(paste(.Options$editor, file), wait=FALSE)
  
  The easiest way is to add the revised bug.report function to your 
  .Rprofile or to the system wide rwXXXX/etc/Rprofile so that it will
  replace the actual one (which lives in rwXXXX/library/base/R/base,
  but please, don't modify this file if you are not sure about what you
  are doing).

  Any opinion on making this the default behaviour for next releases ?
  


> I'm using NT4 (that doesn't seem to be obvious from the automatic info
> below?)

  You are right about this. Given the many flavours of Windows around
  Version, machine and friends should report more specific informations.
  This should be easy so, maybe, it will be in the next release.


  guido

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun  4 16:21:18 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 4 Jun 1999 17:21:18 +0200
Subject: dealing with large objects -- memory wasting ?
Message-ID: <199906041521.RAA14725@sophie.ethz.ch>

Consider the following:

    > gcinfo(TRUE)
    [1] FALSE
    > rm(list=ls()); gc()
	     free  total
    Ncells 135837 250000
    Vcells 747306 786432
	   ------
    > n <- 10000; p <- 20; X <- matrix(rnorm(n*p), n,p); gc()
    Garbage collection [nr. 23]...
    135839 cons cells free (54%)
    4275 Kbytes of heap free (69%)
	     free  total
    Ncells 135829 250000
    Vcells 547299 786432
	   ------
	   which is roughly 200000 less than before;
	   i.e. Vcells are 8-byte sized,
	   1 Vcell = 1 double or 2 integers

  Since we have 747 thousands of them , 
  constructing X the double size (400'000) shouldn't be a problem ...

    > rm(X); n <- 20000; p <- 20; X <- matrix(rnorm(n*p), n,p); gc()
    Garbage collection [nr. 25]...
    135823 cons cells free (54%)
    2713 Kbytes of heap free (44%)

    Error: heap memory (6144 Kb) exhausted [needed 3125 Kb more]
	   See "help(Memory)" on how to increase the heap size.

but it *is*, and it's
matrix' fault.  (it constructs  x, i.e. effectively doubles it's argument).

----

There seem to be worse problems when use 

      var(x)

and x is one of those huge  n x p  matrices...

--------
Of course there are problems like these to be optimized -- ``everywhere''.
Any proposals for a general approach?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun  4 18:14:46 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 04 Jun 1999 19:14:46 +0200 (CEST)
Subject: dealing with large objects -- memory wasting ?
In-Reply-To: <199906041521.RAA14725@sophie.ethz.ch>
Message-ID: <XFMail.990604191446.plummer@iarc.fr>

[Long example of matrix() wasting memory
 by Martin Maechler (MM) snipped]

A minor point perhaps, but  I think there is an error
in your calculations.

If I understand correctly, the problem is that matrix()
assigns a local copy of its answer before returning it.
So  a version which does not do this ...

function (data = NA, nrow = 1, ncol = 1, byrow = FALSE) 
{
    if (missing(nrow)) 
        nrow <- ceiling(length(data)/ncol)
    else if (missing(ncol)) 
        ncol <- ceiling(length(data)/nrow)
    .Internal(matrix(data, nrow, ncol, byrow))
}

should do better 

Using commands like

rm(X); n <- ... ; p <- 20; X <- matrix(rnorm(n*p), n,p); gc()

the largest value of n I could use successfully was about
18000, which still less than what you suggest,

MM> Since we have 747 thousands of them , 
MM> constructing X the double size (400'000) shouldn't be a problem ...

and only 50% greater than what you can do with the standard matrix()
function (n ~ 12000).

I think the answer is that your calculations did not take
into account the argument to matrix - rnorm(n*p) - which
also temporarily takes up as much memory as the final matrix.

With trivial data you can do better:

rm(X); n <- ... ; p <- 20; X <- matrix(0, n,p); gc()

You can assign up to n ~ 37000 with the standard matrix()
function and n ~ 74000 with the modified version, which
is the expected 100% improvement.

MM>There seem to be worse problems when use 
MM>
MM>     var(x)
MM>
MM>and x is one of those huge  n x p  matrices...

I couldn't assign a matrix that was big enough to crash var().
Is there a problem here? The fact that the default value of 
y is x is not a problem because of lazy evaluation.
If you assigned y in the body of the function ...

function (x, y, na.rm = FALSE, use) 
{
    if (missing(y)) 
        y <- x
    if (missing(use)) 
        use <- if (na.rm) 
            "complete.obs"
        else "all.obs"
    cov(x, y, use = use)
}

then you would have problems, but this isn't the case.
What am I missing?

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it  Sat Jun  5 11:01:34 1999
From: guido@hal.stat.unipd.it (guido@hal.stat.unipd.it)
Date: Sat, 5 Jun 1999 12:01:34 +0200 (MET DST)
Subject: IE5 html help search failure (PR#205)
Message-ID: <199906051001.MAA23947@pubhealth.ku.dk>

On Thu, Jun 03, 1999 at 03:56:15PM +0200, fears@roycastle.liv.ac.uk wrote:
> I hesitate to report this one because it is very likely system
> dependent, and I have very little faith in my browser. Still, it may
> point to something useful for someone to know.

  You did the right thing. It was one of my (many?) faults.
  I overlooked the effect of one of the last changes done before
  preparing the release.

> 
> On NT4, after help.start() brings up the web interface just fine
> (despite the pessimistic warning on the terminal; is that still
> necessary?), I can do apparaently anything in the help system, except
> search.

  help.start() uses standard Windows association between file type and
  application,i.e., if html files are not associate to a browser 
  it fails. This is the reason of the warning. I have not looked
  to the source but I suppose that we can modify actual behaviour
  to give the warning only when actual implementation fails.  
                      ~~~~

> 
> If I'm on the top search page page
> (E:\programs\R\rw0641\doc\html\search\SearchEngine.html) and click on
> any topic, say 'aplot', I go to 'address'
> javascript:searchInIndex%20('%20aplot') and Explorer says 'Done', but
> nothing happens. Click on 'Go back' and I get 'No matches for aplot have
> been found'.
> 

  The distribution misses a file used by the search engine. 
  However, at least on my system, it can be generated on the fly executing 
  > link.html.help()
  from a running R process (or from Rgui or from Rterm)
  Indeed, to reproduce the behaviour you reported, I had to
  do a fresh installation. On my "real' installation, since I
  added some packages and runned "link.html.help()", all went well. 


> I've tried several others, and also typing easy terms such as 'plot'
> into the dialog box, all to no avail.
> 
> Now here's the bit where you might get cross with me. I'm using MS
> Internet Explorer 5, and I can't readily confirm the same thing happens
> with a standard release such as 4, since our local administrators
> decided in their wisdom to remove 4 when they installed 5. And of course
> it may be a problem with our local java installation too (or as well).
> I'm not in charge of that, but if anyone  can guess as to what might be
> set up wrong at least perhaps I can point the IT helpdesk in the right
> direction.
> 

  Since we are on the topic (search and version of IE), I noted
  that using IE4 on a Win98 machine, when I click on 'aplot' or
  friends I get two html pages, the first with the rigth informations,
  the second blank. So, I have to click on the "previous page"
  button to look to the results. On the same machine and on the same 
  R installation, if I use Netscape 4.04 as the default browser
  all works as expected (i.e, no 'second' page). So, my
  conclusion in this moment is that the problem is due to the
  IE4 Java VM not to R. I haven't test IE5 but I would be glad to
  know what happens.

  guido










-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From P.Herkenrath@rrz.uni-koeln.de  Sat Jun  5 15:18:44 1999
From: P.Herkenrath@rrz.uni-koeln.de (P.Herkenrath@rrz.uni-koeln.de)
Date: Sat, 5 Jun 1999 16:18:44 +0200 (MET DST)
Subject: seg fault via text() (PR#206)
Message-ID: <199906051418.QAA24546@pubhealth.ku.dk>

Full_Name: Peter Herkenrath
Version: 0.63.1
OS: Linux
Submission from: (NULL) (134.95.88.203)


in *old* R version 0.63.1

foo <- function(...., label=NULL, .....) {
      ....
      plot(....)
      text(x,y,label)
      ....
}

results in a segmentation fault (if label is not initialized by the caller)
bug? 
title() for example is resistent.

best regards
Peter

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jun  5 19:00:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Jun 1999 20:00:53 +0200
Subject: seg fault via text() (PR#206)
In-Reply-To: P.Herkenrath@rrz.uni-koeln.de's message of "Sat, 5 Jun 1999 16:18:44 +0200 (MET DST)"
References: <199906051418.QAA24546@pubhealth.ku.dk>
Message-ID: <x21zfqmsru.fsf@blueberry.kubism.ku.dk>

P.Herkenrath@rrz.uni-koeln.de writes:

> Full_Name: Peter Herkenrath
> Version: 0.63.1
> OS: Linux
> Submission from: (NULL) (134.95.88.203)
> 
> 
> in *old* R version 0.63.1
> 
> foo <- function(...., label=NULL, .....) {
>       ....
>       plot(....)
>       text(x,y,label)
>       ....
> }
> 
> results in a segmentation fault (if label is not initialized by the caller)
> bug? 
> title() for example is resistent.

Still there in 0.64.1 and -patches. The development version has

> foo<-function(label=NULL){plot(0);text(1,0,label)}
> foo()
Error in text(xy.coords(x, y, recycle = TRUE), as.char.or.expr(labels),  : zero length "text" specified

I don't know if it is entended to move that to the patch release
sources.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman@cinternet.net  Sun Jun  6 16:43:34 1999
From: osman@cinternet.net (Osman Buyukisik)
Date: Sun, 6 Jun 1999 11:43:34 -0400
Subject: problem in make for R-devel and R-release
Message-ID: <99060611483600.14170@stargate>

Hello,
 I just got R-devel june3. My machine is  SuSE linux 6.1 pent2 with 64M Ram.
Configure goes well, but make stops and complains install-sh is not found in
tools. There is no "tools" directory! After looking around I found that "aux"
has those files and did sym link. Make worked. 
The same problem is also present the R-release bundle. 
Cheers,
Osman

 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun  6 22:41:26 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Jun 1999 23:41:26 +0200
Subject: problem in make for R-devel and R-release
In-Reply-To: Osman Buyukisik's message of "Sun, 6 Jun 1999 11:43:34 -0400"
References: <99060611483600.14170@stargate>
Message-ID: <x2g145f1mh.fsf@blueberry.kubism.ku.dk>

Osman Buyukisik <osman@cinternet.net> writes:

> Hello,
>  I just got R-devel june3. My machine is  SuSE linux 6.1 pent2 with 64M Ram.
> Configure goes well, but make stops and complains install-sh is not found in
> tools. There is no "tools" directory! After looking around I found that "aux"
> has those files and did sym link. Make worked. 
> The same problem is also present the R-release bundle. 
> Cheers,
> Osman

Sounds like Martin needs to fix his auto-update scripts...

We changed the name of "aux" because it was causing grief on Windows
platforms. I had to sneak sneak a little behind the back of CVS to do
it, and some manual intervention was needed to get the updates right.

Meanwhile, symlinking, or simply renaming aux to tools should work.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun  7 09:35:48 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 7 Jun 1999 10:35:48 +0200
Subject: problem in make for R-devel and R-release
In-Reply-To: <x2g145f1mh.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 06 Jun 1999 23:41:26 +0200)
References: <99060611483600.14170@stargate> <x2g145f1mh.fsf@blueberry.kubism.ku.dk>
Message-ID: <199906070835.KAA03041@sophie.ethz.ch>

>>>>> On 06 Jun 1999 23:41:26 +0200, Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> said:

    PD> Osman Buyukisik <osman@cinternet.net> writes:
    >> Hello, I just got R-devel june3. My machine is SuSE linux 6.1 pent2
    >> with 64M Ram.  Configure goes well, but make stops and complains
    >> install-sh is not found in tools. There is no "tools" directory!
    >> After looking around I found that "aux" has those files and did sym
    >> link. Make worked.  The same problem is also present the R-release
    >> bundle.  Cheers, Osman

    PD> Sounds like Martin needs to fix his auto-update scripts...

Yes, indeed!
things should be ok by tomorrow or so..
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From msa@biostat.mgh.harvard.edu  Mon Jun  7 21:27:11 1999
From: msa@biostat.mgh.harvard.edu (msa@biostat.mgh.harvard.edu)
Date: Mon, 7 Jun 1999 22:27:11 +0200 (MET DST)
Subject: Lines longer than ~1000 chars truncated at parsing (PR#207)
Message-ID: <199906072027.WAA08955@pubhealth.ku.dk>

Full_Name: Marek Ancukiewicz
Version: 0.64.1
OS: Linux (RH 6.0)
Submission from: (NULL) (132.183.12.87)


R seems to be able to parse only lines shorter than approximately 
1000 characters. Anything longer gets truncated:

> x<-c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,!
274,275,276,277,278,279,280,281,282,283)
+ )
> length(x)
[1] 282
> x[282]
[1] 2


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Wed Jun  9 01:17:06 1999
From: ntakebay@bio.indiana.edu (ntakebay@bio.indiana.edu)
Date: Wed, 9 Jun 1999 02:17:06 +0200 (MET DST)
Subject: R correct g77 flags for Linux/Alpha (PR#208)
Message-ID: <199906090017.CAA21185@pubhealth.ku.dk>

Hello,
I was trying to compile R-base-0.64.1 on Linux/Alpha (RedHat 6.0).

It compiled but it couldn't pass the make check (choked with
tests/Examples/modreg-Ex.R).

I used gdb, and it turned out that the src/library/modreg/src/sinerp.f was
the problem.
         else if(j.eq.nk)then
            c1 = 0d0
            c2 = 0d0
            c3 = 0d0
         endif
>         p1ip(1,j) = 0d0- (c1*wjm3(1)+c2*wjm3(2)+c3*wjm3(3))
         p1ip(2,j) = 0d0- (c1*wjm3(2)+c2*wjm2(1)+c3*wjm2(2))

I think wjm3(3) should be 0, but it was set to a really tiny value.

So I gave -mieee for g77, and it solved the problem.

The configure correctly identify the CFLAGS for alpha, but -mieee should
be given to g77, too.  So in configure.in and configure, you should add
the following (I included a patch below)

By the way, I compiled R on PC164SX + 21164PC/533 using egcs-1.1.2.  All
other libraries are Redhat-6.0 default.

--- R-0.64.1/configure.in.orig  Tue Jun  8 19:05:31 1999
+++ R-0.64.1/configure.in       Tue Jun  8 19:06:28 1999
@@ -575,6 +575,7 @@
     ;;
   alpha*linux)
     CFLAGS="-mieee ${CFLAGS}"
+    FFLAGS="-mieee ${FFLAGS}"
     DLLFLAGS=-export-dynamic
     ;;
   *linuxaout)



To the rpm maintainer: You can simply apply the following patch to the
spec file of R-base-0.64.1-5.src.rpm without patching the configure.in
patch.  I also do not know why CFLAGS need to be -O1 instead of -O2??

--- R-base.spec.orig    Tue Jun  8 18:39:31 1999
+++ R-base.spec Tue Jun  8 18:44:00 1999
@@ -70,6 +70,7 @@
 %ifarch alpha
    #Thanks to Nassib Nassar <nassar@etymon.com>
    export CFLAGS="-g -O1"
+   export FFLAGS="-mieee -g -O2"
 %endif
 %ifarch sparc
    export LIBS="-lieee"

Thanks,
Naoki

Naoki Takebayashi     <ntakebay@bio.indiana.edu>
--- Dept. of Biology, Indiana Univeristy, Jordan Hall 142
--- 1001 E. Third St. Bloomington,IN 47405-3700 USA


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun  9 08:46:04 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Jun 1999 09:46:04 +0200 (CEST)
Subject: packages with FORTRAN code
Message-ID: <14174.7100.302238.935889@pc87.maho.magnaeu.com>

Recent sensible changes to the dynload mechanism have made an old
problem resurface:  how should we deal with packages which contain
Fortran code and may need to be linked against additional libraries
such as -lf2c?

The current consensus is that extra Fortran libraries maybe needed are
handled via the make variable FLIBS, and that `-lf2c' or `-lg2c' are
added by default if g77 is used.

This will not solve problems in packages which use their own Makefile
if it does not use FLIBS for building the shared library.  Currently,
this seems to be the case with

	acepack
	akima
	funfits
	growth
	leaps
	tripack

It would be great if the package maintainers could update their pkgs
accordingly.  Most likely, the best solution is to remove the Makefile
altogether.

Thanks
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun  9 08:54:31 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Jun 1999 09:54:31 +0200 (CEST)
Subject: R correct g77 flags for Linux/Alpha (PR#208)
In-Reply-To: <199906090017.CAA21185@pubhealth.ku.dk>
References: <199906090017.CAA21185@pubhealth.ku.dk>
Message-ID: <14174.7607.461924.517034@pc87.maho.magnaeu.com>

>>>>> ntakebay  writes:

> Hello,
> I was trying to compile R-base-0.64.1 on Linux/Alpha (RedHat 6.0).

> It compiled but it couldn't pass the make check (choked with
> tests/Examples/modreg-Ex.R).

> I used gdb, and it turned out that the src/library/modreg/src/sinerp.f was
> the problem.
>          else if(j.eq.nk)then
>             c1 = 0d0
>             c2 = 0d0
>             c3 = 0d0
>          endif
>> p1ip(1,j) = 0d0- (c1*wjm3(1)+c2*wjm3(2)+c3*wjm3(3))
>          p1ip(2,j) = 0d0- (c1*wjm3(2)+c2*wjm2(1)+c3*wjm2(2))

> I think wjm3(3) should be 0, but it was set to a really tiny value.

> So I gave -mieee for g77, and it solved the problem.

> The configure correctly identify the CFLAGS for alpha, but -mieee should
> be given to g77, too.  So in configure.in and configure, you should add
> the following (I included a patch below)

> By the way, I compiled R on PC164SX + 21164PC/533 using egcs-1.1.2.  All
> other libraries are Redhat-6.0 default.

> --- R-0.64.1/configure.in.orig  Tue Jun  8 19:05:31 1999
> +++ R-0.64.1/configure.in       Tue Jun  8 19:06:28 1999
> @@ -575,6 +575,7 @@
>      ;;
>    alpha*linux)
>      CFLAGS="-mieee ${CFLAGS}"
> +    FFLAGS="-mieee ${FFLAGS}"
>      DLLFLAGS=-export-dynamic
>      ;;
>    *linuxaout)

Done for 0.65.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Wed Jun  9 14:18:47 1999
From: jlindsey@alpha.luc.ac.be (Jim Lindsey)
Date: Wed, 9 Jun 1999 15:18:47 +0200 (MET DST)
Subject: packages with FORTRAN code
In-Reply-To: <14174.23554.302077.914375@pc87.maho.magnaeu.com> from "Kurt Hornik" at Jun 9, 99 02:20:18 pm
Message-ID: <199906091318.PAA26169@alpha.luc.ac.be>

> Yes, sure.  You may simply want to include $(R_HOME)/etc/Makeconf which
> has the rule


The following, put in my Makefile, works without the include. (I had
the same without the final $(FLIBS) before.) Will this be OK on other
systems? (The mva and modreg libraries have both the include and the
following rule but without $(FLIBS)???)
  I'm afraid that I don't understand this at all. All of my libraries
have Fortran code. Why pick on growth? When I use $(FLIBS), it just
links f2c into my library whereas it is already linked into R. On my
son's computer with g77, FLIBS is defined, in etc/Makeconf, as a blank
so that nothing occurs for him. (My toms614.c function in my rmutil
library was obtained from f2c. It runs on my son's computer without
f2clib linked in, except for that part of the library built into R.)
  What is the point of all this?

Jim

> 
> $(SHLIB): $(OBJS)
>         $(SHLIBLD) $(SHLIBLDFLAGS) -o $@ $(OBJS) $(FLIBS)
> 
> so you only need to set SHLIB=growth and OBJS to the object files you
> have.
> 
> -k
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun  9 14:53:46 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Jun 1999 15:53:46 +0200 (CEST)
Subject: packages with FORTRAN code
In-Reply-To: <199906091318.PAA26169@alpha.luc.ac.be>
References: <14174.23554.302077.914375@pc87.maho.magnaeu.com>
 <199906091318.PAA26169@alpha.luc.ac.be>
Message-ID: <14174.29162.922143.362849@pc87.maho.magnaeu.com>

>>>>> Jim Lindsey writes:

>> Yes, sure.  You may simply want to include $(R_HOME)/etc/Makeconf which
>> has the rule


> The following, put in my Makefile, works without the include. (I had
> the same without the final $(FLIBS) before.) Will this be OK on other
> systems? (The mva and modreg libraries have both the include and the
> following rule but without $(FLIBS)???)

>   I'm afraid that I don't understand this at all. All of my libraries
> have Fortran code. Why pick on growth? When I use $(FLIBS), it just
> links f2c into my library whereas it is already linked into R. On my
> son's computer with g77, FLIBS is defined, in etc/Makeconf, as a blank
> so that nothing occurs for him. (My toms614.c function in my rmutil
> library was obtained from f2c. It runs on my son's computer without
> f2clib linked in, except for that part of the library built into R.)

>   What is the point of all this?

The point is that there are cases when compiling FORTRAN code with g77
results in unresolved symbols at (dynload) run-time.  What exactly is
going on is not really easy to determine, and e.g. the info pages on g77
are rather vague:

	   The `libf2c' library is distributed with GNU Fortran for the
	convenience of its users, but is not part of GNU Fortran.  It
	contains the procedures needed by Fortran programs while they
	are running. 

	   For example, while code generated by `g77' is likely to do
	additions, subtractions, and multiplications "in line"--in the
	actual compiled code--it is not likely to do trigonometric
	functions this way. 

	   Instead, operations like trigonometric functions are compiled
	by the `f771' compiler (invoked by `g77' when compiling Fortran
	code) into machine code that, when run, calls on functions in
	`libf2c', so `libf2c' must be linked with almost every useful
	program having any component compiled by GNU Fortran.  (As
	mentioned above, the `g77' command takes care of all this for
	you.)

Therefore, it seems to be a good idea to always add `-lf2c' (or `-lg2c')
to FLIBS when using g77.  The most recent 0.65 configure scripts already
do that, so it would be nice if packages were cooperative by simply
using FLIBS.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun  9 15:27:26 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 09 Jun 1999 10:27:26 -0400
Subject: packages with FORTRAN code
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com>
Message-ID: <375E79CE.351209E7@bank-banque-canada.ca>

>It would be great if the package maintainers could update their pkgs
>accordingly.  Most likely, the best solution is to remove the Makefile
>altogether.

I like the idea that I shouldn't have to specify a Makefile (which I mess up
regularly) and R INSTALL will magically work on all platforms. Is this available
already in 0.64.1 or should I wait for 0.65?

Currently with 0.64.1 in Solaris I'm getting    "g77: unrecognized option
`-PIC'" but things seem to work ok. I'm not specifying PIC so I think that it is
being mistakenly added by R INSTALL.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun  9 16:08:13 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Jun 1999 17:08:13 +0200 (CEST)
Subject: packages with FORTRAN code
In-Reply-To: <375E79CE.351209E7@bank-banque-canada.ca>
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com>
 <375E79CE.351209E7@bank-banque-canada.ca>
Message-ID: <14174.33629.902099.142359@pc87.maho.magnaeu.com>

>>>>> Paul Gilbert writes:

>> It would be great if the package maintainers could update their pkgs
>> accordingly.  Most likely, the best solution is to remove the Makefile
>> altogether.

> I like the idea that I shouldn't have to specify a Makefile (which I
> mess up regularly) and R INSTALL will magically work on all
> platforms. Is this available already in 0.64.1 or should I wait for
> 0.65?

That should work in 0.64.1.

> Currently with 0.64.1 in Solaris I'm getting "g77: unrecognized option
> `-PIC'" but things seem to work ok. I'm not specifying PIC so I think
> that it is being mistakenly added by R INSTALL.

Very strange.  The configure script has for solaris

    if ${f77_is_g77}; then
      FPICFLAGS=-fPIC
    else
      FPICFLAGS=-PIC
    fi

so maybe your g77 is not recognized as such.  What does

    g77 -v 2>&1

give?

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  9 19:00:14 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jun 1999 20:00:14 +0200
Subject: packages with FORTRAN code
In-Reply-To: Kurt Hornik's message of "Wed, 9 Jun 1999 17:08:13 +0200 (CEST)"
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com> 	<375E79CE.351209E7@bank-banque-canada.ca> <14174.33629.902099.142359@pc87.maho.magnaeu.com>
Message-ID: <x2d7z5l0ep.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> > Currently with 0.64.1 in Solaris I'm getting "g77: unrecognized option
> > `-PIC'" but things seem to work ok. I'm not specifying PIC so I think
> > that it is being mistakenly added by R INSTALL.
> 
> Very strange.  The configure script has for solaris
> 
>     if ${f77_is_g77}; then
>       FPICFLAGS=-fPIC
>     else
>       FPICFLAGS=-PIC
>     fi
> 
> so maybe your g77 is not recognized as such.  What does
> 
>     g77 -v 2>&1
> 
> give?

This is happening on the Auckland machine too, so...

(Methinks you misspelled egrep in:

f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`

which, incidentally looks better as 'GNU F77|egcs|g77')
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun  9 20:11:16 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 09 Jun 1999 15:11:16 -0400
Subject: packages with FORTRAN code
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com>
 <375E79CE.351209E7@bank-banque-canada.ca>
 <14174.33629.902099.142359@pc87.maho.magnaeu.com>
 <375E87FB.D0D60B4@bank-banque-canada.ca> <14174.36840.112601.494758@pc87.maho.magnaeu.com>
Message-ID: <375EBC53.7205FD5E@bank-banque-canada.ca>

Kurt

It seems the old version of f77 that previously caused me problems is now gone,
so I removed my link making f77 use g77, but the problem was not fixed. Also,
changing grep to egrep on the lines:

f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`

in configure and configure.in, as suggested by Peter,  does not seem to have
fixed it.

In re-configuring and re-making R I noticed that it is not just my package which
has this error. It also occurs while making R (bsplvd.f and elsewhere). Below is
my configure and make for R. Configure reports
  FORTRAN compiler:         g77 -O2
but that does not seem to be the way it always gets used.

(Also, configure reports
  C compiler:               gcc -g -O2
but some of the gcc calls add fPIC. That does not seem to generate error
messages.)

Paul
__________
[1] /home/res3/gilp : which egrep
/usr/bin/egrep
[2] /home/res3/gilp : cd R
[3] /home/res3/gilp/R : ls
aclocal.m4      config.status*  demos/          Makeconf.in     PROJECTS
afm/            configure*      doc/            Makefile        README
aux/            configure.in    etc/            Makefile.in     RESOURCES
bin/            configure.mac*  FAQ             Makefrag.etc    src/
BUGS            COPYING         include/        Makefrag.top    TASKS
config.cache    COPYRIGHTS      INSTALL         MIRROR-SITES    tests/
config.log      date-stamp      library/        NEWS            Y2K
config.site     debian/         Makeconf        PLATFORMS
[4] /home/res3/gilp/R : grep "f77_output" *
configure:    f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`
configure:    if test -n "${f77_output}"; then
configure.in:    f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`
configure.in:    if test -n "${f77_output}"; then
[5] /home/res3/gilp/R : cd ..
[6] /home/res3/gilp/R-versions : ls
R-0.63.1.tar        R-0.63.3.tar        R-0.64.1.f77tog77/  R-release.tar
R-0.63.2/           R-0.64.0/           R-0.64.1.tar
R-0.63.2.tar        R-0.64.0.tar        R-release/
R-0.63.3/           R-0.64.1/           R-release.old/
[7] /home/res3/gilp/R-versions : rm -rf R-0.64.1
[8] /home/res3/gilp/R-versions : tar -xf R-0.64.1.tar
[9] /home/res3/gilp/R-versions : cd ../R
[10] /home/res3/gilp/R : te configure &
[1] 1354
[11] /home/res3/gilp/R : te configure.in &
[2] 1355
[1]    Done                 textedit configure
[12] /home/res3/gilp/R :
[2]    Done                 textedit configure.in
[12] /home/res3/gilp/R :
[12] /home/res3/gilp/R :
[12] /home/res3/gilp/R : ./configure
creating cache ./config.cache
checking for a BSD compatible install... aux/install-sh -c
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for bison... no
checking for byacc... no
checking for ar... ar
checking for latex... /apps/res/bin/latex
checking for dvips... /apps/res/bin/dvips
checking for makeindex... false
checking for unzip... /apps/res/bin/unzip
checking for zip... no
checking for perl... /usr/bin/perl
checking whether perl is perl 5... yes
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for g77... /home/res/public/gnu/sun5.6/bin/g77
checking for underscore after Fortran symbols... yes
checking for sin in -lm... yes
checking for sin in -lmoto... no
checking for main in -lncurses... no
checking for main in -ltermcap... yes
checking for dlopen in -ldl... yes
checking for main in -lz... no
checking for main in -lhdf5... no
checking for main in -ldxml... no
checking for main in -lblas... no
checking for rl_callback_read_char in -lreadline... no
checking how to run the C preprocessor... gcc -E
checking for ANSI C header files... yes
checking for pid_t... yes
checking for vfork.h... no
checking for working vfork... yes
checking for vprintf... yes
checking for acosh... yes
checking for asinh... yes
checking for atanh... yes
checking for bcopy... yes
checking for finite... yes
checking for isfinite... no
checking for isnan... yes
checking for matherr... yes
checking for memcpy... yes
checking for memmove... yes
checking for regcomp... yes
checking for rint... yes
checking for strcoll... yes
checking for strtod... yes
checking for strtol... yes
checking for system... yes
checking for times... yes
checking for sigsetjmp... yes
checking for siglongjmp... yes
checking for __setfpucw... no
checking for ANSI C header files... (cached) yes
checking for dl.h... no
checking for dlfcn.h... yes
checking for elf.h... yes
checking for locale.h... yes
checking for readline/history.h... no
checking for rpc/xdr.h... yes
checking for sys/times.h... yes
checking for time.h... yes
checking for ieeefp.h... yes
checking for ieee754.h... no
checking for unistd.h... yes
checking for hdf5.h... no
checking return type of signal handlers... void
checking for working const... yes
checking size of long... 4
checking for xmkmf... /usr/openwin/bin/xmkmf
checking how to make shared libraries... done
checking for X... libraries /usr/openwin/lib, headers /usr/openwin/include
checking whether -R must be followed by a space... no
checking for dnet_ntoa in -ldnet... no
checking for dnet_ntoa in -ldnet_stub... no
checking for gethostbyname... no
checking for gethostbyname in -lnsl... yes
checking for connect... no
checking for connect in -lsocket... yes
checking for remove... yes
checking for shmat... yes
checking for IceConnectionNumber in -lICE... yes
checking for lpr... lpr
updating cache ./config.cache
creating ./config.status
creating Makeconf
creating Makefile
creating afm/Makefile
creating demos/Makefile
creating doc/Makefile
creating doc/keyword-test
creating doc/manual/Makefile
creating doc/manual/lib2tex
creating doc/manual/Reference.tex
creating doc/manual/Manual.tex
creating etc/Makefile
creating etc/Makeconf
creating src/Makefile
creating src/appl/Makefile
creating src/include/Makefile
creating src/library/Makefile
creating src/main/Makefile
creating src/nmath/Makefile
creating src/scripts/Makefile
creating src/unix/Makefile
creating src/gnome/Makefile
creating src/library/base/Makefile
creating src/library/profile/Makefile
creating src/library/eda/Makefile
creating src/library/eda/src/Makefile
creating src/library/lqs/Makefile
creating src/library/lqs/src/Makefile
creating src/library/modreg/Makefile
creating src/library/modreg/src/Makefile
creating src/library/mva/Makefile
creating src/library/mva/src/Makefile
creating src/library/stepfun/Makefile
creating src/scripts/COMPILE
creating src/scripts/INSTALL
creating src/scripts/REMOVE
creating src/scripts/R.sh
creating src/scripts/Rdconv
creating src/scripts/Rdindex
creating src/scripts/Rman2Rd
creating src/scripts/SHLIB
creating src/scripts/Sd2Rd
creating src/scripts/build-help
creating src/scripts/fwf2table
creating src/scripts/help.pretty
creating src/scripts/html2dos
creating src/scripts/Rd2contents
creating tests/Makefile
creating tests/Examples/Makefile
creating src/include/Platform.h


R is now configured for sparc-sun-solaris2.6

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc -g -O2
  FORTRAN compiler:         g77 -O2
  Gnome support:            no

[13] /home/res3/gilp/R : make
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/afm'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/afm'
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/demos'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/demos'
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/doc'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/doc'
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/etc'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/etc'
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/include'
../../aux/GETSYMBOLS
mkdir ../../include
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/include'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/appl'
gcc -g -O2 -I../include -I../../src/include  -c S_compat.c -o S_compat.o
gcc -g -O2 -I../include -I../../src/include  -c approx.c -o approx.o
gcc -g -O2 -I../include -I../../src/include  -c bakslv.c -o bakslv.o
gcc -g -O2 -I../include -I../../src/include  -c binning.c -o binning.o
g77 -O2 -c blas.f -o blas.o
g77 -O2 -c ch2inv.f -o ch2inv.o
g77 -O2 -c chol.f -o chol.o
gcc -g -O2 -I../include -I../../src/include  -c chull.c -o chull.o
gcc -g -O2 -I../include -I../../src/include  -c cpoly.c -o cpoly.o
gcc -g -O2 -I../include -I../../src/include  -c cumsum.c -o cumsum.o
gcc -g -O2 -I../include -I../../src/include  -c distance.c -o distance.o
g77 -O2 -c dpbfa.f -o dpbfa.o
g77 -O2 -c dpbsl.f -o dpbsl.o
g77 -O2 -c dpoco.f -o dpoco.o
g77 -O2 -c dpodi.f -o dpodi.o
g77 -O2 -c dpofa.f -o dpofa.o
g77 -O2 -c dposl.f -o dposl.o
g77 -O2 -c dqrdc.f -o dqrdc.o
g77 -O2 -c dqrdc2.f -o dqrdc2.o
g77 -O2 -c dqrls.f -o dqrls.o
g77 -O2 -c dqrsl.f -o dqrsl.o
g77 -O2 -c dqrutl.f -o dqrutl.o
g77 -O2 -c dsvdc.f -o dsvdc.o
g77 -O2 -c dtrco.f -o dtrco.o
g77 -O2 -c dtrsl.f -o dtrsl.o
g77 -O2 -c eigen.f -o eigen.o
gcc -g -O2 -I../include -I../../src/include  -c fortran.c -o fortran.o
gcc -g -O2 -I../include -I../../src/include  -c fft.c -o fft.o
g77 -O2 -c fmin.f -o fmin.o
g77 -O2 -c lminfl.f -o lminfl.o
gcc -g -O2 -I../include -I../../src/include  -c loglin.c -o loglin.o
gcc -g -O2 -I../include -I../../src/include  -c lowess.c -o lowess.o
gcc -g -O2 -I../include -I../../src/include  -c machar.c -o machar.o
gcc -g -O2 -I../include -I../../src/include  -c massdist.c -o massdist.o
gcc -g -O2 -I../include -I../../src/include  -c pretty.c -o pretty.o
gcc -g -O2 -I../include -I../../src/include  -c pythag.c -o pythag.o
gcc -g -O2 -I../include -I../../src/include  -c rowsum.c -o rowsum.o
gcc -g -O2 -I../include -I../../src/include  -c splines.c -o splines.o
gcc -g -O2 -I../include -I../../src/include  -c stem.c -o stem.o
gcc -g -O2 -I../include -I../../src/include  -c strsignif.c -o strsignif.o
gcc -g -O2 -I../include -I../../src/include  -c tabulate.c -o tabulate.o
g77 -O2 -c uncmin.f -o uncmin.o
g77 -O2 -c zeroin.f -o zeroin.o
ar cr libappl.a S_compat.o approx.o bakslv.o binning.o blas.o ch2inv.o chol.o
chull.o cpoly.o cumsum.o distance.o dpbfa.o dpbsl.o dpoco.o dpodi.o dpofa.o
dposl.o dqrdc.o dqrdc2.o dqrls.o dqrsl.o dqrutl.o dsvdc.o dtrco.o dtrsl.o
eigen.o fortran.o fft.o fmin.o lminfl.o loglin.o lowess.o machar.o massdist.o
pretty.o pythag.o rowsum.o splines.o stem.o strsignif.o tabulate.o uncmin.o
zeroin.o
ranlib libappl.a
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/appl'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/nmath'
gcc -g -O2 -I../include -I../../src/include  -c mlutils.c -o mlutils.o
...
gcc -g -O2 -I../include -I../../src/include  -c signrank.c -o signrank.o
ar cr libmath.a mlutils.o d1mach.o i1mach.o fmax2.o fmin2.o fmod.o fprec.o
fround.o ftrunc.o sign.o fsign.o fsquare.o fcube.o imax2.o imin2.o chebyshev.o
logrelerr.o lgammacor.o gammalims.o gamma.o lgamma.o gamma_cody.o beta.o lbeta.o
polygamma.o bessel_i.o bessel_j.o bessel_k.o bessel_y.o choose.o snorm.o sunif.o
sexp.o dgamma.o pgamma.o qgamma.o rgamma.o dbeta.o pbeta.o qbeta.o rbeta.o
dunif.o punif.o qunif.o runif.o dnorm.o pnorm.o qnorm.o rnorm.o dlnorm.o
plnorm.o qlnorm.o rlnorm.o df.o pf.o qf.o rf.o dt.o pt.o qt.o rt.o dchisq.o
pchisq.o qchisq.o rchisq.o dbinom.o pbinom.o qbinom.o rbinom.o dcauchy.o
pcauchy.o qcauchy.o rcauchy.o dexp.o pexp.o qexp.o rexp.o dgeom.o pgeom.o
qgeom.o rgeom.o dhyper.o phyper.o qhyper.o rhyper.o dnbinom.o pnbinom.o
qnbinom.o rnbinom.o dpois.o ppois.o qpois.o rpois.o dweibull.o pweibull.o
qweibull.o rweibull.o dlogis.o plogis.o qlogis.o rlogis.o dnchisq.o pnchisq.o
qnchisq.o dnbeta.o pnbeta.o pnf.o pnt.o ptukey.o qtukey.o wilcox.o signrank.o
ranlib libmath.a
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/nmath'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/unix'
gcc -g -O2 -I/usr/openwin/include -I../include -I../../src/include  -c
dataentry.c
gcc -g -O2 -I../include -I../../src/include  -c devPS.c -o devPS.o
gcc -g -O2 -I../include -I../../src/include  -c devPicTeX.c -o devPicTeX.o
gcc -g -O2 -I/usr/openwin/include -I../include -I../../src/include  -c devX11.c
gcc -g -O2 -I../include -I../../src/include  -c dynload.c -o dynload.o
gcc -g -O2 -I../include -I../../src/include  -c edit.c -o edit.o
gcc -g -O2 -I/usr/openwin/include -I../include -I../../src/include  -c rotated.c

gcc -g -O2 -I../include -I../../src/include  -c system.c -o system.o
gcc -g -O2 -I../include -I../../src/include  -c Rsock.c -o Rsock.o
gcc -g -O2 -I../include -I../../src/include  -c sock.c -o sock.o
ar cr libunix.a dataentry.o devPS.o devPicTeX.o devX11.o dynload.o edit.o
rotated.o system.o Rsock.o sock.o
ranlib libunix.a
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/unix'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/main'
gcc -g -O2 -I../include -I../../src/include  -c arithmetic.c -o arithmetic.o
...
gcc -g -O2 -I../include -I../../src/include  -c version.c -o version.o
mkdir ../../bin
g77  -o ../../bin/R.binary arithmetic.o array.o attrib.o bind.o builtin.o
character.o coerce.o colors.o complex.o context.o cov.o cum.o debug.o deparse.o
deriv.o devices.o dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o
format.o fourier.o gram.o gram-ex.o graphics.o iosupport.o list.o logic.o main.o
match.o memory.o model.o names.o objects.o optimize.o options.o par.o paste.o
platform.o plot.o plot3d.o plotmath.o print.o printarray.o printvector.o
printutils.o random.o relop.o saveload.o scan.o seq.o sort.o source.o split.o
subassign.o subscript.o subset.o summary.o unique.o util.o version.o
../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE
-L/usr/openwin/lib -R/usr/openwin/lib -lX11 -lsocket  -lnsl -ldl -ltermcap -lm
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/main'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/scripts'
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/scripts'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
mkdir ../../library
make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/base'
Building R base package
mkdir ../../../library/base
mkdir ../../../library/base/R
mkdir ../../../library/base/data
make[3]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/base'
make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/eda'
mkdir ../../../library/eda
mkdir ../../../library/eda/R
make[4]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/eda/src'
gcc -g -O2 -fPIC -I../../../../include -c line.c -o line.o
gcc -g -O2 -fPIC -I../../../../include -c smooth.c -o smooth.o
ld -G -o eda.so line.o smooth.o
mkdir ../../../../library/eda/libs
make[4]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/eda/src'
make[3]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library/eda'

make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/lqs'
mkdir ../../../library/lqs
mkdir ../../../library/lqs/R
make[4]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/lqs/src'
gcc -g -O2 -fPIC -I../../../../include -c lqs.c -o lqs.o
ld -G -o lqs.so lqs.o
mkdir ../../../../library/lqs/libs
make[4]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/lqs/src'
make[3]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library/lqs'

make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg'
mkdir ../../../library/modreg
mkdir ../../../library/modreg/R
mkdir ../../../library/modreg/data
make[4]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg/src'
g77 -O2 -PIC -c bsplvd.f -o bsplvd.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c bvalue.f -o bvalue.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c bvalus.f -o bvalus.o
g77: unrecognized option `-PIC'
gcc -g -O2 -fPIC -I../../../../include -c ksmooth.c -o ksmooth.o
gcc -g -O2 -fPIC -I../../../../include -c loessc.c -o loessc.o
g77 -O2 -PIC -c loessf.f -o loessf.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c ppr.f -o ppr.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c qsbart.f -o qsbart.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c sbart.f -o sbart.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c sgram.f -o sgram.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c sinerp.f -o sinerp.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c sslvrg.f -o sslvrg.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c stxwx.f -o stxwx.o
g77: unrecognized option `-PIC'
../../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o ksmooth.o
loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvrg.o stxwx.o
make[5]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg/src'
ld -G -o modreg.so bsplvd.o bvalue.o bvalus.o ksmooth.o loessc.o loessf.o ppr.o
qsbart.o sbart.o sgram.o sinerp.o sslvrg.o stxwx.o
make[5]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg/src'
mkdir ../../../../library/modreg/libs
make[4]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg/src'
make[3]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg'
make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/mva'
mkdir ../../../library/mva
mkdir ../../../library/mva/R
make[4]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/mva/src'
gcc -g -O2 -fPIC -I../../../../include -c dblcen.c -o dblcen.o
g77 -O2 -PIC -c hclust.f -o hclust.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c kmns.f -o kmns.o
g77: unrecognized option `-PIC'
ld -G -o mva.so dblcen.o hclust.o kmns.o
mkdir ../../../../library/mva/libs
make[4]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/mva/src'
make[3]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library/mva'

make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/stepfun'
mkdir ../../../library/stepfun
mkdir ../../../library/stepfun/R
make[3]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/stepfun'
make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/profile'
Building system startup profile
make[3]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/profile'
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src'
You should `make docs' now ...
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
Building ALL documentation (help, HTML, LaTeX, examples)
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
 >>> Building/Updating help pages for package `base'
     Formats: text html latex example
  Arithmetic                        text    html    latex   example
  BATCH                             text    html    latex
...
  stepfun                           text    html    latex   example
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
[14] /home/res3/gilp/R :

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  9 23:06:20 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Jun 1999 00:06:20 +0200
Subject: packages with FORTRAN code
In-Reply-To: Paul Gilbert's message of "Wed, 09 Jun 1999 15:11:16 -0400"
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com> 		<375E79CE.351209E7@bank-banque-canada.ca> 		<14174.33629.902099.142359@pc87.maho.magnaeu.com> 		<375E87FB.D0D60B4@bank-banque-canada.ca> <14174.36840.112601.494758@pc87.maho.magnaeu.com> <375E
Message-ID: <x2n1y9hvvn.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> It seems the old version of f77 that previously caused me problems is now gone,
> so I removed my link making f77 use g77, but the problem was not fixed. Also,
> changing grep to egrep on the lines:
> 
> f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`
> 
> in configure and configure.in, as suggested by Peter,  does not seem to have
> fixed it.
> 

One doesn't want the \-s in there either: egrep "GNU F77|egcs|g77"

This does seem to work giving  g77 -fPIC etc.

However, my checked-out sources at Auckland now tries to link .so's
with

ld -G  .... -lg2c

and fails because libg2c.a is located way down in the gcc-libs.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jun 10 08:09:08 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 10 Jun 1999 09:09:08 +0200 (CEST)
Subject: [R] R on AIX (>4.2)
In-Reply-To: <199906100647.IAA00865@sophie.ethz.ch>
References: <199906092155.RAA29434@infiniti.ece.cmu.edu>
 <199906100647.IAA00865@sophie.ethz.ch>
Message-ID: <14175.25748.342750.147064@galadriel.ci.tuwien.ac.at>



[Taken to r-devel]

I tried 1-2 months ago to get R running on AIX ... besides some minor
things which I fixed in the sources everything compiled fine except
the dynloading :-)

It also seemed feasible to get dynloading to work, but you need a text
file containing the names of all objects a .so file wants to
export. As I didn't see an easy way of doing this at INSTALL time for
all our extension packages and wasn't in desperate need of R on AIX I
gave up at that point. I had also contact with people from essen on
this, and they also had no automatic procedure (like a Makefile fix or
so).

Look in the devel mail archives around may, there is a thread on AIX
where Arne Kovac explains the proper linker flags ... you might also
want to contact him to get their dynload.c. 

Fritz




>>>>> On Thu, 10 Jun 1999 08:47:55 +0200,
>>>>> Martin Maechler (MM) wrote:

MM> [Subject above:  You probably mean, ">= 4.2" right ?]
>>>>> "TomV" == Thomas Vogels <tov@infiniti.ece.cmu.edu> writes:

TomV> I'm determined to get R compiling & running on a machine
TomV> running AIX 4.2.
MM> Great!   
MM> Thank you in advance.

TomV> I've seen previous emails in the archive about
TomV> this topic.  The main obstacle is getting dynamic loading to
TomV> work, but it works for Tcl and hence is feasable.

MM> yes and yes.

TomV> Questions:
TomV> - is anybody _currently_ working with R on AIX?  
MM> don't know
TomV> - why have previous fixes to the sources not been introduced into
TomV> the released versions?
MM> I think we have never seen fixes patchable into the main sources.
MM> The only place I've heard that got it working was  uni-essen.de
MM> and they seem to have used an almost completely different version of
MM> src/unix/dynload.c  from Heiner Schwarte
MM> (and I think I've never seen their version..).

MM> Yes, it would really be great if this problem could finally be solved!

MM> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
MM> Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
MM> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
MM> phone: x-41-1-632-3408		fax: ...-1086			<><
MM> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
MM> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
MM> Send "info", "help", or "[un]subscribe"
MM> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
MM> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Arne.Kovac@uni-essen.de  Thu Jun 10 08:23:10 1999
From: Arne.Kovac@uni-essen.de (Arne Kovac)
Date: Thu, 10 Jun 1999 09:23:10 +0200 (DFT)
Subject: [R] R on AIX (>4.2)
In-Reply-To: <199906100647.IAA00865@sophie.ethz.ch>
Message-ID: <Pine.A41.4.02.9906100918350.14566-100000@cauchy.mathematik.uni-essen.de>

On Thu, 10 Jun 1999, Martin Maechler wrote:

> I think we have never seen fixes patchable into the main sources.
> The only place I've heard that got it working was  uni-essen.de
> and they seem to have used an almost completely different version of
> src/unix/dynload.c  from Heiner Schwarte
> (and I think I've never seen their version..).
> 
> Yes, it would really be great if this problem could finally be solved!

I agree that this would really be great. I have sent a modified dynload.c
to r-devel recently. Does anybody want me to repost it (Tom?)?

Arne

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From beimfohr@statistik.uni-dortmund.de  Thu Jun 10 12:52:03 1999
From: beimfohr@statistik.uni-dortmund.de (beimfohr@statistik.uni-dortmund.de)
Date: Thu, 10 Jun 1999 13:52:03 +0200 (MET DST)
Subject: Compilation fails (PR#209)
Message-ID: <199906101152.NAA04445@pubhealth.ku.dk>

Full_Name: Frank Beimfohr
Version: 0.64.1, devel.
OS: Solaris 2.5.1
Submission from: (NULL) (129.217.131.31)


I try to compile R on my Sparc 4 (Solaris 2.5.1) but the compilation fails. I
tried 
the developer-version and the contributed 0.64.1-Version.
I start configure with the --g77-Option. During the compilation it stops with an

error, which says that the R/src/library/modreg/src/bsplvd.f isn't a valid 
Fortran77-File. Then, I installed f2c. But the compilation fails again with the
message:

gcc: unrecognized option `-PIC'
./../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o ksmooth.o
loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvrg.o stxwx.o
Usage : make [ -f makefile ]... [ -d ][ -dd ][ -D ][ -DD ][ -e ][ -i ][ -k ]
             [ -K statefile ][ -n ][ -p ][ -P ][ -q ][ -r ][ -s ][ -S ][ -t ]
             [ -V ][ target ... ][ macro=value... ]
make: Fatal error: Unknown option `-w'
gmake[4]: *** [modreg.so] Error 1
gmake[4]: Leaving directory `/sw/sun4_55/R-0.64.1a/src/library/modreg/src'

I don't know what to do now...

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Arne.Kovac@uni-essen.de  Thu Jun 10 15:02:31 1999
From: Arne.Kovac@uni-essen.de (Arne Kovac)
Date: Thu, 10 Jun 1999 16:02:31 +0200 (DFT)
Subject: dynload for R on AIX (>= 4.2)
In-Reply-To: <14175.31960.993123.79902@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.A41.4.02.9906101559040.12136-100000@cauchy.mathematik.uni-essen.de>

On Thu, 10 Jun 1999, Friedrich Leisch wrote:

> Yes, if I understood AIX workings correct you have to have a text file
> of to-be-exported symbols at the time of linking a shared library,
> i.e. the linker is called like (this is pasted from a mail by Arne)
> 
> $(F77) -o module.so -bM:SRE -bE:module.exp -bnoentry $(OBJECTS) $(LIBDIR) $(LIBS)
> 
> where module.exp is a text file containing the names of symbols to be
> exported by module.so

I think you can skip creating the text file by changing the command line
options to

$(F77) -o module.so -bM:SRE -bexpall -bnoentry $(OBJECTS) $(LIBDIR)
$(LIBS)

ie replacing the -bE:module.exp option by -bexpall. This option is only
available in AIX 4.2 and later. I have just tried it and it appears to
work for me.

Maybe we are really getting somewhere!!

Arne



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jun 10 15:56:32 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 10 Jun 1999 16:56:32 +0200 (CEST)
Subject: Compilation fails (PR#209)
In-Reply-To: <199906101152.NAA04445@pubhealth.ku.dk>
References: <199906101152.NAA04445@pubhealth.ku.dk>
Message-ID: <14175.53792.372453.501560@pc87.maho.magnaeu.com>

>>>>> beimfohr  writes:

> Full_Name: Frank Beimfohr
> Version: 0.64.1, devel.
> OS: Solaris 2.5.1
> Submission from: (NULL) (129.217.131.31)


> I try to compile R on my Sparc 4 (Solaris 2.5.1) but the compilation
> fails. I tried the developer-version and the contributed
> 0.64.1-Version.  I start configure with the --g77-Option. During the
> compilation it stops with an

> error, which says that the R/src/library/modreg/src/bsplvd.f isn't a
> valid Fortran77-File. Then, I installed f2c. But the compilation fails
> again with the message:

> gcc: unrecognized option `-PIC'

which should not be there.

Can you pls send

* the exact configure and make command you issued

* the final output of configure, such as

R is now configured for i586-unknown-linux

  Source directory:         /home/Hornik/src/apps/R/r-devel/R
  Installation directory:   /usr/local
  C compiler:               gcc -O2 -g -Wall
  FORTRAN compiler:         g77 -O2
  Gnome support:            no

Thanks

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 10 16:07:36 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Thu, 10 Jun 1999 11:07:36 -0400
Subject: running R on AIX (>= 4.2)
Message-ID: <199906101507.LAA03628@infiniti.ece.cmu.edu>


(Was: r-help -- dynload for R on AIX)

Thanks for all the responses.  Let's see:

  - I found the dynload.c posted by Arne (April 99, I believe).  If
    the difference to the current version of dynload.c is too big,
    then the current dynload.c is a better starting point.  Otherwise
    #ifdef's won't be feasible.

  - One problem appears to be the list of exported symbols.  Tcl's
    ldAix can do this job.  It needs a little help, however.

  - I'm unaware of weaknesses or strengths of the compilers shipped
    with AIX.  Any preference for the duo xlc/xlf or cc/f77?  (Yes,
    they look like they're same thing, but NO, they act differently.)

  - Hmm, why did I want to get R on AIX?  Ah, I couldn't get S-plus to
    load the VR library.  It's nice to have the sources...


  -tom


P.S. Due to my current setup, response to email is measured in hours.
So don't worry if you don't immediately hear from me.


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Arne.Kovac@uni-essen.de  Thu Jun 10 16:51:01 1999
From: Arne.Kovac@uni-essen.de (Arne Kovac)
Date: Thu, 10 Jun 1999 17:51:01 +0200 (DFT)
Subject: running R on AIX (>= 4.2)
In-Reply-To: <199906101507.LAA03628@infiniti.ece.cmu.edu>
Message-ID: <Pine.A41.4.02.9906101739520.15678-100000@cauchy.mathematik.uni-essen.de>

On Thu, 10 Jun 1999, Thomas Vogels wrote:

>   - One problem appears to be the list of exported symbols.  Tcl's
>     ldAix can do this job.  It needs a little help, however.

I don't think you need this anymore - just use -bexapll for the linker.

>   - I'm unaware of weaknesses or strengths of the compilers shipped
>     with AIX.  Any preference for the duo xlc/xlf or cc/f77?  (Yes,
>     they look like they're same thing, but NO, they act differently.)

There is a lot of discussion going on about the new library format in AIX
4.3.x. I have experienced a lot of problems with IBM's compiler duo and
usually use egcs. My impression is that using gcc or egcs might facilitate
porting anyway, since a lot of people compile R with these compilers on
other platforms.

>   - Hmm, why did I want to get R on AIX?  Ah, I couldn't get S-plus to
>     load the VR library.  It's nice to have the sources...

If my memories are right, then the shipping S-Plus for AIX was compiled on
a very old AIX version (3.2.5) with an odd version of the compiler. Thus,
there are some problems with loading object code dynamically.

Arne


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 10 20:56:16 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Thu, 10 Jun 1999 15:56:16 -0400
Subject: dynload for R on AIX (>= 4.2)
In-Reply-To: Your message of "Thu, 10 Jun 1999 16:02:31 EDT."
 <Pine.A41.4.02.9906101559040.12136-100000@cauchy.mathematik.uni-essen.de>
Message-ID: <199906101956.PAA23332@infiniti.ece.cmu.edu>


"Arne" == Arne Kovac <kovac@cauchy.mathematik.uni-essen.de> writes:

Arne> I think you can skip creating the text file by changing the command line
Arne> options to
Arne> 
Arne> $(F77) -o module.so -bM:SRE -bexpall -bnoentry $(OBJECTS) $(LIBDIR)
Arne> $(LIBS)

Uh, works, kind of... 

| build/src/library/eda/src $ f77 -o eda.so -bM:SRE -bexpall -bnoentry line.o smooth.o 
| ld: 0711-317 ERROR: Undefined symbol: .rsort
| ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more
| information.

The problem is that rsort is defined in sort.c.  So I put all the R
files in src/main into a library:

| build/src/main $ ar cr libR.a *.o

And run the linker again:

| build/src/library/eda/src $ f77 -o eda.so -bM:SRE -bexpall -bnoentry
| line.o smooth.o -L../../../main -lR  -L../../../unix -lunix
| -L../../../appl -lappl -L../../../nmath -lmath -lX11 -ldl -lblas

No error messages this time, but eda.so is big: 3020844 bytes.

Something ain't right here.  There should be a way of telling the
linker to not include the libs.  It should verify that all functions that
are referenced will be defined at runtime.  Comments?

  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Fri Jun 11 20:15:33 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Fri, 11 Jun 1999 15:15:33 -0400
Subject: dynload for R on AIX (>= 4.2)
Message-ID: <199906111915.PAA14180@infiniti.ece.cmu.edu>


Hi,

  since I've never used dlsym and friends before, I coded a test case
last night to understand what's going on.  I've put it at:
http://www.ece.cmu.edu/~tov/public/dltest.tar.gz

It should work out of the box for AIX 4.2 and Linux.  It's a simple
program that loads a shared object, uses it (with references back to
the main program), and then discards it.  Main point of the exercise
is to find out how to compile this stuff with AIX.

The "ugliness" that I encounter is that I need a file of the
exported symbols in R and the libraries (libappl.a, libmath.a, etc.).
Otherwise I get core dumps.  Any suggestions for when to build it or
where to patch the Makefiles?

If you have a machine with AIX, would you mind downloading the dltest
tarfile?  Just unzip it, untar it.  Then in the dltest directory,
start "make test".  Should print "OK" eventually...

Thanks,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 14 09:01:00 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 14 Jun 1999 10:01:00 +0200
Subject: dynload for R on AIX (>= 4.2)
In-Reply-To: <199906111915.PAA14180@infiniti.ece.cmu.edu> (message from Thomas
 Vogels on Fri, 11 Jun 1999 15:15:33 -0400)
References: <199906111915.PAA14180@infiniti.ece.cmu.edu>
Message-ID: <199906140801.KAA00561@sophie.ethz.ch>

>>>>> On Fri, 11 Jun 1999 15:15:33 -0400, Thomas Vogels <tov@infiniti.ece.cmu.edu> said:


    Thomas>   since I've never used dlsym and friends before, I coded a
    Thomas> test case last night to understand what's going on.  I've put
    Thomas> it at: http://www.ece.cmu.edu/~tov/public/dltest.tar.gz

got it

    Thomas> It should work out of the box for AIX 4.2 and Linux.  It's a
    Thomas> simple program that loads a shared object, uses it (with
    Thomas> references back to the main program), and then discards it.
    Thomas> Main point of the exercise is to find out how to compile this
    Thomas> stuff with AIX.

    Thomas> The "ugliness" that I encounter is that I need a file of the
    Thomas> exported symbols in R and the libraries (libappl.a, libmath.a,
    Thomas> etc.).  Otherwise I get core dumps.  Any suggestions for when
    Thomas> to build it or where to patch the Makefiles?

Couldn't you just 'nm' the  R.binary file?
That should be available *before* you start building  *.so's ?
Then it could happen in src/main/Makefile[.in].

The "tricky/tedious" part is to have "configure" produce that different
Makefile for the case of AIX only.
It seems, the FLAGS and the Makefile entry for the *.exp file (see below)
would also have to present in one of the two Makeconf  files or in every
Makefile that builds a *.so.

    Thomas> If you have a machine with AIX, would you mind downloading the
    Thomas> dltest tarfile?  Just unzip it, untar it.  Then in the dltest
    Thomas> directory, start "make test".  Should print "OK" eventually...

It did print "OK".  
I see in the "Makefile" that you're creating the list of exported objects
simply using  nm & awk :
(cited for those who haven't got your code ready):

    NM = nm
    NM_FLAGS = -g -h
    AWK = awk
    LD_FLAGS = -bdynamic -bE:main.exp
    LIBS = -ldl
    SHLIB_CFLAGS = 
    SHLIB_LD = /bin/ld
    SHLIB_LD_FLAGS = -bso -bM:SRE -H512 -T512 -bnoentry -bexpall -bI:main.exp

    <....>

    main.exp : main.o
	    $(NM) $(NM_FLAGS) main.o | $(AWK) ' \
	    BEGIN { print "#! ."; } \
	    $$2 == "T" && $$1 != ".main" { print substr ($$1, 2) } \
	    ' > $@

which looks very reasonable.
Now we just need configure build the proper Makeconf(s) and Makefile(s)
and things would hopefully work..

Could we short-cut E-mail ( R-core, Arne, TomV ) to get this going?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From beimfohr@Statistik.Uni-Dortmund.DE  Mon Jun 14 12:03:48 1999
From: beimfohr@Statistik.Uni-Dortmund.DE (Frank Beimfohr)
Date: Mon, 14 Jun 1999 13:03:48 +0200
Subject: Compilation fails (PR#209)
Message-ID: <199906141103.NAA28439@Statistik.Uni-Dortmund.DE>

> > I try to compile R on my Sparc 4 (Solaris 2.5.1) but the compilation
> > fails. I tried the developer-version and the contributed
> > 0.64.1-Version.  I start configure with the --g77-Option. During the
> > compilation it stops with an
> 
> > error, which says that the R/src/library/modreg/src/bsplvd.f isn't a
> > valid Fortran77-File. Then, I installed f2c. But the compilation fails
> > again with the message:
> 
> > gcc: unrecognized option `-PIC'
> 
> which should not be there.
> 
> Can you pls send
> 
> * the exact configure and make command you issued
> 
> * the final output of configure

Command:
configure --prefix=/sw/sun4_55/R-0.64.1a --exec-prefix=/sw/sun4_55/R-0.64.1a 
--with-x --with-g77 [--with-f2c]

Output (without and without f2c-Option):
R is now configured for sparc-sun-solaris2.5.1

  Source directory:         .
  Installation directory:   /sw/sun4_55/R-0.64.1a
  C compiler:               gcc -g -O2
  FORTRAN compiler:         g77 
  Gnome support:            no

Then I just type 'make' (using GNU-Make 3.76.1) and get the error messages 
descriped above...

gmake[4]: Entering directory `/sw/sun4_55/R-0.64.1a/src/library/modreg/src'
gcc -g -O2 -fPIC -I../../../../include -c bsplvd.c -o bsplvd.o
g77  -PIC -c bvalue.f -o bvalue.o
gcc: unrecognized option `-PIC'
../../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o ksmooth.o 
loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvrg.o stxwx.o
Usage : make [ -f makefile ]... [ -d ][ -dd ][ -D ][ -DD ][ -e ][ -i ][ -k ]
             [ -K statefile ][ -n ][ -p ][ -P ][ -q ][ -r ][ -s ][ -S ][ -t ]
             [ -V ][ target ... ][ macro=value... ]
make: Fatal error: Unknown option `-w'
gmake[4]: *** [modreg.so] Error 1


Frank Beimfohr
University of Dortmund, Germany




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jun 14 13:32:37 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 14 Jun 1999 08:32:37 -0400
Subject: Compilation fails (PR#209)
In-Reply-To: Your message of "Mon, 14 Jun 1999 13:03:48 EDT."
 <199906141103.NAA28439@Statistik.Uni-Dortmund.DE>
Message-ID: <199906141232.IAA23012@infiniti.ece.cmu.edu>


Hi,

  there are three different things going on here:
  (1) gmake by default has the option "-w" set, which is why you see
these "Entering/Leaving directory ..." messages.  This option finds a
way into the make flags when the system default make is called.  Not
quite sure how, but don't blame it on configure.  Makeconf et. al. is
more likely.
  (2) Very annoyingly, modreg doesn't use the $(SHLIBLD) command but
calls R with SHLIB as option.  Which is nothing you are interested in,
but is a bad thing, IMHO.
  (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
configure uses.  Try to find out, what the default is.  Follow this example:
  tmp $ touch Imakefile
  tmp $ xmkmf
  imake -DUseInstalled -I/usr/lib/X11/config
  "./Imakefile", line 1: 1506-229 (W) File is empty.
  tmp $ grep -i pic Makefile 
  PICFLAGS = -bM\:SRE
(Results are for an AIX box.  Your output should look different.)

| gmake[4]: Entering directory
| `/sw/sun4_55/R-0.64.1a/src/library/modreg/src'
| gcc -g -O2 -fPIC -I../../../../include -c bsplvd.c -o bsplvd.o
| g77  -PIC -c bvalue.f -o bvalue.o
| gcc: unrecognized option `-PIC'
| ../../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o
| ksmooth.o
| loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvrg.o
| stxwx.o
| Usage : make [ -f makefile ]... [ -d ][ -dd ][ -D ][ -DD ][ -e ][ -i
| ][ -k ]
|              [ -K statefile ][ -n ][ -p ][ -P ][ -q ][ -r ][ -s ][ -S
| ][ -t ]
|              [ -V ][ target ... ][ macro=value... ]
| make: Fatal error: Unknown option `-w'
| gmake[4]: *** [modreg.so] Error 1

  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From beimfohr@Statistik.Uni-Dortmund.DE  Mon Jun 14 14:42:15 1999
From: beimfohr@Statistik.Uni-Dortmund.DE (Frank Beimfohr)
Date: Mon, 14 Jun 1999 15:42:15 +0200
Subject: Compilation fails (PR#209)
Message-ID: <199906141342.PAA13446@Statistik.Uni-Dortmund.DE>

> Hi,
> 
>   there are three different things going on here:
>   (1) gmake by default has the option "-w" set, which is why you see
> these "Entering/Leaving directory ..." messages.  This option finds a
> way into the make flags when the system default make is called.  Not
> quite sure how, but don't blame it on configure.  Makeconf et. al. is
> more likely.
>   (2) Very annoyingly, modreg doesn't use the $(SHLIBLD) command but
> calls R with SHLIB as option.  Which is nothing you are interested in,
> but is a bad thing, IMHO.
>   (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
> configure uses.  Try to find out, what the default is.  Follow this example:
>   tmp $ touch Imakefile
>   tmp $ xmkmf
>   imake -DUseInstalled -I/usr/lib/X11/config
>   "./Imakefile", line 1: 1506-229 (W) File is empty.
>   tmp $ grep -i pic Makefile 
>   PICFLAGS = -bM\:SRE
> (Results are for an AIX box.  Your output should look different.)

I started 'configure' with the f2c- and without the g77-Option and used 
/usr/ccs/bin/make instead of gmake (very flexible, isn't it ;) 

  C compiler:               gcc -g -O2
  FORTRAN compiler:         f2c 

The modreg-directory is now compiled without any error.

But while processing the mva-directory:

mkdir ../../../library/mva/R
gcc -g -O2 -fPIC -I../../../../include -c dblcen.c -o dblcen.o
ld -G -o mva.so dblcen.o hclust.o kmns.o
ld: fatal: file hclust.o: cannot open file; errno=2
ld: fatal: file kmns.o: cannot open file; errno=2
ld: fatal: File processing errors.  No output written to mva.so
*** Error code 1
make: Fatal error: Command failed for target `mva.so'
Current working directory /sw/sun4_55/R-0.65.0/src/library/mva/src
*** Error code 1
make: Fatal error: Command failed for target `all'


What happens here? I compiled R 0.63.0 without any problem....

Frank Beimfohr
University of Dortmund

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jun 14 14:53:51 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 14 Jun 1999 09:53:51 -0400
Subject: dynload for R on AIX (>= 4.2)
In-Reply-To: Your message of "Mon, 14 Jun 1999 10:01:00 EDT."
 <199906140801.KAA00561@sophie.ethz.ch>
Message-ID: <199906141353.JAA29330@infiniti.ece.cmu.edu>


"Martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

Thomas> The "ugliness" that I encounter is that I need a file of the
Thomas> exported symbols in R and the libraries (libappl.a, libmath.a,

Martin> Couldn't you just 'nm' the  R.binary file?
Martin> That should be available *before* you start building  *.so's ?
Martin> Then it could happen in src/main/Makefile[.in].

nm on R.binary would include stuff from libc.a and libm.c as well
(e.g. printf & friends).  Much like Tcl/Tk, I'd like to misuse the
LDCMD to build an export file when R.binary is linked.  I've put a
script at: http://www.ece.cmu.edu/~tov/public/ldAIX4
(or in color: http://www.ece.cmu.edu/~tov/public/ldAIX4.html)
It's invoked with something like:
ldAIX4 f77 -bdynamic -o ../../bin/R.binary *.o \
../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lX11 -lblas -ldl -lm

Martin> I see in the "Makefile" that you're creating the list of exported objects
Martin> simply using  nm & awk :

For no particularly good reason, I've switched to nm & sed at the
moment :-)  The awk script is more readable, so I'll probly go back.
Are there concerns about non-availabilty of awk (plain awk, not gawk)?

Martin> main.exp : main.o
Martin> $(NM) $(NM_FLAGS) main.o | $(AWK) ' \
Martin> BEGIN { print "#! ."; } \
Martin> $$2 == "T" && $$1 != ".main" { print substr ($$1, 2) } \
Martin> ' > $@
Martin> 
Martin> which looks very reasonable.

... but is incomplete since I forgot about global vars (bummer, why
are there global vars? ;-)

Martin> Now we just need configure build the proper Makeconf(s) and Makefile(s)
Martin> and things would hopefully work..

Hope is a good choice of words.  I've patched configure (there is a
section with platform dependent overrides).  But now I have to patch
the Makefiles since things get confused.  More to follow.

Martin> Could we short-cut E-mail ( R-core, Arne, TomV ) to get this going?

Who is R-core?

Regards,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vogels@ieee.org  Mon Jun 14 16:56:06 1999
From: vogels@ieee.org (vogels@ieee.org)
Date: Mon, 14 Jun 1999 17:56:06 +0200 (MET DST)
Subject: definition of R_problem_buf in S.h (PR#210)
Message-ID: <199906141556.RAA00751@pubhealth.ku.dk>

Full_Name: Thomas Vogels
Version: 0.64.1
OS: AIX 4.2
Submission from: (NULL) (198.133.22.70)


R_problem_buf is defined, not just declared, in S.h:

#define R_PROBLEM_BUFSIZE 4096
char R_problem_buf[R_PROBLEM_BUFSIZE];

This is bad since every time S.h is included this buffer is defined.  The
linker
will eventually complain about multiple definitions of this symbol.

Solution: declare R_problem_buf to be extern in S.h, then allocate memory for
it
in a source file, like main.c with: char R_problem_buf[R_PROBLEM_BUFSIZE];



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jun 14 17:26:39 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 14 Jun 1999 18:26:39 +0200 (CEST)
Subject: Compilation fails (PR#209)
In-Reply-To: <199906141342.PAA13446@Statistik.Uni-Dortmund.DE>
References: <199906141342.PAA13446@Statistik.Uni-Dortmund.DE>
Message-ID: <14181.11583.323584.13254@pc87.maho.magnaeu.com>

>>>>> Frank Beimfohr writes:

>> Hi,
>>

(As an aside.  This thread is quickly becoming extremely inefficient.  I
am certainly willing to fix configuration/build problems, but if I ask
SPECIFIC questions then I really need specific answers.)

>> there are three different things going on here:
>> (1) gmake by default has the option "-w" set, which is why you see
>> these "Entering/Leaving directory ..." messages.  This option finds a
>> way into the make flags when the system default make is called.  Not
>> quite sure how, but don't blame it on configure.  Makeconf et. al. is
>> more likely.

I don't see how the system default could be called.  The instructions
say that if you want to use non-default make, then you need to do
(assuming a Bourne shell)

	MAKE=/the/make/you/want ./configure
	/the/make/you/want

>> (2) Very annoyingly, modreg doesn't use the $(SHLIBLD) command but
>> calls R with SHLIB as option.  Which is nothing you are interested in,
>> but is a bad thing, IMHO.

Good point.  Will have a look.

>> (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
>> configure uses.  Try to find out, what the default is.  Follow this example:
>> tmp $ touch Imakefile
>> tmp $ xmkmf
>> imake -DUseInstalled -I/usr/lib/X11/config
>> "./Imakefile", line 1: 1506-229 (W) File is empty.
>> tmp $ grep -i pic Makefile 
>> PICFLAGS = -bM\:SRE
>> (Results are for an AIX box.  Your output should look different.)

> I started 'configure' with the f2c- and without the g77-Option and used 
> /usr/ccs/bin/make instead of gmake (very flexible, isn't it ;) 

>   C compiler:               gcc -g -O2
>   FORTRAN compiler:         f2c 

> The modreg-directory is now compiled without any error.

> But while processing the mva-directory:

> mkdir ../../../library/mva/R
> gcc -g -O2 -fPIC -I../../../../include -c dblcen.c -o dblcen.o
> ld -G -o mva.so dblcen.o hclust.o kmns.o
> ld: fatal: file hclust.o: cannot open file; errno=2
> ld: fatal: file kmns.o: cannot open file; errno=2
> ld: fatal: File processing errors.  No output written to mva.so
> *** Error code 1
> make: Fatal error: Command failed for target `mva.so'
> Current working directory /sw/sun4_55/R-0.65.0/src/library/mva/src
> *** Error code 1
> make: Fatal error: Command failed for target `all'

What is the rule for .f.o?  Apparently, the Fortran sources did not get
compiled ...

> What happens here? I compiled R 0.63.0 without any problem....

The point is that, and I think I explained that on r-devel, we need to
find a solution for Fortran compilation.  Many compilers, such as g77,
typically produce objects which still need to be linked against other
libraries (libg2c.a for recent versions of g77).

The problem can be overcome in two ways:  either use the Fortran
compiler for linking, or use $CC/ld and get the extra flags right.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 14 17:30:42 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 14 Jun 1999 18:30:42 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <199906141556.RAA00751@pubhealth.ku.dk> (vogels@ieee.org)
References: <199906141556.RAA00751@pubhealth.ku.dk>
Message-ID: <199906141630.SAA07559@sophie.ethz.ch>

>>>>> On Mon, 14 Jun 1999 17:56:06 +0200 (MET DST), vogels@ieee.org said:

    vogels> Full_Name: Thomas Vogels Version: 0.64.1 OS: AIX 4.2 Submission
    vogels> from: (NULL) (198.133.22.70)


    vogels> R_problem_buf is defined, not just declared, in S.h:

    vogels> #define R_PROBLEM_BUFSIZE 4096 char
    vogels> R_problem_buf[R_PROBLEM_BUFSIZE];

    vogels> This is bad since every time S.h is included this buffer is
    vogels> defined.  The linker will eventually complain about multiple
    vogels> definitions of this symbol.
no.
All our include files ``idempotent'' : Including them multiple times
doesn't change anything.
This protection is *very* standard and is achieved by (for the case of S.h) 

#ifndef R_S_H
#define R_S_H
.................. everything ......
#endif

    vogels> Solution: declare R_problem_buf to be extern in S.h, then
    vogels> allocate memory for it in a source file, like main.c with: char
    vogels> R_problem_buf[R_PROBLEM_BUFSIZE];

Not the real solution, main.c does not even include S.h !

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jun 14 17:34:59 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 14 Jun 1999 18:34:59 +0200 (CEST)
Subject: Compilation fails (PR#209)
In-Reply-To: <199906141232.IAA23012@infiniti.ece.cmu.edu>
References: <199906141103.NAA28439@Statistik.Uni-Dortmund.DE>
 <199906141232.IAA23012@infiniti.ece.cmu.edu>
Message-ID: <14181.12083.82468.559759@pc87.maho.magnaeu.com>

>>>>> Thomas Vogels writes:

>   (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
> configure uses.  Try to find out, what the default is.  Follow this example:
>   tmp $ touch Imakefile
>   tmp $ xmkmf
>   imake -DUseInstalled -I/usr/lib/X11/config
>   "./Imakefile", line 1: 1506-229 (W) File is empty.
>   tmp $ grep -i pic Makefile 
>   PICFLAGS = -bM\:SRE
> (Results are for an AIX box.  Your output should look different.)

AIX is not a supported platform yet.  If you tell me which flags (cpic,
fpic, shlib, maybe something extra for producing the main binary) to use
for this platform and the NATIVE compilers, I will gladly tell configure
how to get things right on AIX.

Is it safe to assume that `-fPIC' will do the right thing on all
platforms for gcc and g77?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jun 14 17:41:39 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 14 Jun 1999 18:41:39 +0200 (CEST)
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <199906141630.SAA07559@sophie.ethz.ch>
References: <199906141556.RAA00751@pubhealth.ku.dk>
 <199906141630.SAA07559@sophie.ethz.ch>
Message-ID: <14181.12483.272614.786407@pc87.maho.magnaeu.com>

>>>>> Martin Maechler writes:

>>>>> On Mon, 14 Jun 1999 17:56:06 +0200 (MET DST), vogels@ieee.org said:
vogels> Full_Name: Thomas Vogels Version: 0.64.1 OS: AIX 4.2 Submission
vogels> from: (NULL) (198.133.22.70)


vogels> R_problem_buf is defined, not just declared, in S.h:

vogels> #define R_PROBLEM_BUFSIZE 4096 char
vogels> R_problem_buf[R_PROBLEM_BUFSIZE];

vogels> This is bad since every time S.h is included this buffer is
vogels> defined.  The linker will eventually complain about multiple
vogels> definitions of this symbol.
> no.
> All our include files ``idempotent'' : Including them multiple times
> doesn't change anything.
> This protection is *very* standard and is achieved by (for the case of S.h) 

> #ifndef R_S_H
> #define R_S_H
> .................. everything ......
> #endif

vogels> Solution: declare R_problem_buf to be extern in S.h, then
vogels> allocate memory for it in a source file, like main.c with: char
vogels> R_problem_buf[R_PROBLEM_BUFSIZE];

> Not the real solution, main.c does not even include S.h !

Right.

Is there a way we can suggest a better interface here?  I really hate
the PROBLEM xxx RECOVER(NULL_ENTRY) lines.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Mon Jun 14 17:46:38 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 14 Jun 1999 12:46:38 -0400
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <199906141630.SAA07559@sophie.ethz.ch> (message from Martin
 Maechler on Mon, 14 Jun 1999 18:30:42 +0200)
Message-ID: <199906141648.SAA12286@stat.math.ethz.ch>


I think Thomas is correct and that it is a problem.  I brought it up a
while back and Peter had some comments.  The problem is when 2 or more
user-level C source files include S.h. Then while each file has an
idempotent S.h, when linked together, there is a duplication of
symbols.  The problem is not within source file but across file.


D.

_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Mon Jun 14 19:30:48 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Mon, 14 Jun 1999 19:30:48 +0100
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <199906141630.SAA07559@sophie.ethz.ch>; from Martin Maechler on Mon, Jun 14, 1999 at 06:30:42PM +0200
References: <199906141556.RAA00751@pubhealth.ku.dk> <199906141630.SAA07559@sophie.ethz.ch>
Message-ID: <19990614193048.27035@hal.stat.unipd.it>

On Mon, Jun 14, 1999 at 06:30:42PM +0200, Martin Maechler wrote:
> >>>>> On Mon, 14 Jun 1999 17:56:06 +0200 (MET DST), vogels@ieee.org said:
> 
>     vogels> Full_Name: Thomas Vogels Version: 0.64.1 OS: AIX 4.2 Submission
>     vogels> from: (NULL) (198.133.22.70)
> 
> 
>     vogels> R_problem_buf is defined, not just declared, in S.h:
> 
>     vogels> #define R_PROBLEM_BUFSIZE 4096 char
>     vogels> R_problem_buf[R_PROBLEM_BUFSIZE];
> 
>     vogels> This is bad since every time S.h is included this buffer is
>     vogels> defined.  The linker will eventually complain about multiple
>     vogels> definitions of this symbol.
> no.
> All our include files ``idempotent'' : Including them multiple times
> doesn't change anything.
  
  Yes, but what happens if different files to be linked in the same
  shared library include S.h? If I understand the behaviour is
  linker dependent.


> 
>     vogels> Solution: declare R_problem_buf to be extern in S.h, then
>     vogels> allocate memory for it in a source file, like main.c with: char
>     vogels> R_problem_buf[R_PROBLEM_BUFSIZE];
> 
> Not the real solution, main.c does not even include S.h !
> 

  R.binary exports R_problem_buf since S.h is includes by appl/loglin.c.
  Anyway, going toward a multi-threaded R, I agree with Martin that 
  this is not the solution.
  What about declaring R_problem_buf static?
  
  guido



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 14 18:38:19 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 1999 19:38:19 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Duncan Temple Lang's message of "Mon, 14 Jun 1999 12:46:38 -0400"
References: <199906141648.SAA12286@stat.math.ethz.ch>
Message-ID: <x2wvx6el84.fsf@blueberry.kubism.ku.dk>

Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:

> I think Thomas is correct and that it is a problem.  I brought it up a
> while back and Peter had some comments.  The problem is when 2 or more
> user-level C source files include S.h. Then while each file has an
> idempotent S.h, when linked together, there is a duplication of
> symbols.  The problem is not within source file but across file.

Yes, exactly. I forgot which comment I had at the time, but...

There are two obvious solutions:
(1) Define it "static" in S.h (hey, what is 4K these days?)
(2) Declare it extern there and define it somewhere else.

Any preferences?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Mon Jun 14 18:37:22 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 14 Jun 1999 13:37:22 -0400
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <x2wvx6el84.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 14 Jun 1999 19:38:19 +0200)
Message-ID: <199906141738.TAA13141@stat.math.ethz.ch>


I would vote for (2). If we go to multiple evaluators as some of us
were discussing recently, evaluator-specific statics will need to be
removed.

D.


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Jun 14 18:58:20 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Tue, 15 Jun 1999 05:58:20 +1200 (NZST)
Subject: Include file changes
Message-ID: <199906141758.FAA05183@stat1.stat.auckland.ac.nz>

I think we are long overdue for a revision of the header files used in R.
This is going to be especially important for a clean build of the CORBA
and R/Java stuff which I have been looking over Duncan's shoulder at.
It will also let us integrate some of the features Duncan has had to
find creative ways around and also to let us integrate things like the
PROBLEM buffer problem.

I would propose that we cut down to a much smaller set of includes and
to put some thought about what goes in each.  Something along the lines
below.

        R.h / S.h
                This just serves to include Platform.h, RInternals.h and
                RUtilities.h below.

        Platform.h
                Platform specific definitions.

        RInternals.h
                R Data Structures & Access Macros
                Memory management
                Functions which manipulate R data structures

        RUtilities.h
                Functions which operate at the C level
                without special knowlege of R structures
                (But maybe not Math).

        RMath.h
                We probably need a separate set of declarations
                but maybe not.

        RGraphics.h
                This is big and is logically separate from
                other C code.  Some things which are not in
                here should be -- e.g. hsv2rgb.

(I think the rest of the code could also stand a bit of clean up too).

        Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 14 19:03:02 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 1999 20:03:02 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Duncan Temple Lang's message of "Mon, 14 Jun 1999 13:37:22 -0400"
References: <199906141736.TAA01099@pubhealth.ku.dk>
Message-ID: <x2vhcqek2x.fsf@blueberry.kubism.ku.dk>

Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:

> I would vote for (2). If we go to multiple evaluators as some of us
> were discussing recently, evaluator-specific statics will need to be
> removed.

Hm. That won't help, will it? We'd have one static object instead
of several. If threads try to step on eachothers toes it wouldn't
prevent it, just allow them to do it from within different functions!

What one would really need is a way to generate the buffer
dynamically *inside* the function call. Or setup PROBLEM to do some
kind of resource locking, in which case it doesn't really matter
whether we use (1) or (2)? Or...?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Mon Jun 14 19:18:58 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 14 Jun 1999 14:18:58 -0400
Subject: definition of R_problem_buf in S.h (PR#210)
Message-ID: <199906141820.UAA13830@stat.math.ethz.ch>


> 
> Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:
> 
> > I would vote for (2). If we go to multiple evaluators as some of us
> > were discussing recently, evaluator-specific statics will need to be
> > removed.
> 
> Hm. That won't help, will it? We'd have one static object instead
> of several. If threads try to step on eachothers toes it wouldn't
> prevent it, just allow them to do it from within different functions!
> 
> What one would really need is a way to generate the buffer
> dynamically *inside* the function call. Or setup PROBLEM to do some
> kind of resource locking, in which case it doesn't really matter
> whether we use (1) or (2)? Or...?
> 


Absolutely. I was just thinking of not having many statics but that we
could deal with a single one by adding it to the Evaluator
structure. In this way, there is a single one per evaluator and at
present this is adequate. If we need more, we introduce a stack or
linked list.  If we dynamically generate the buffer in the call, then
we will have to change the arguments, etc. to pass it out to other
routines. Otherwise, if we use the statics to communicate the new
buffer we are no better off, except for the dynamic allocation
avoiding the buffer overflow.


Robert will likely be doing things with all of this via
his exception/handler mechanism also.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Mon Jun 14 20:27:47 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Mon, 14 Jun 1999 20:27:47 +0100
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <x2vhcqek2x.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Mon, Jun 14, 1999 at 08:03:02PM +0200
References: <199906141736.TAA01099@pubhealth.ku.dk> <x2vhcqek2x.fsf@blueberry.kubism.ku.dk>
Message-ID: <19990614202747.48954@hal.stat.unipd.it>

On Mon, Jun 14, 1999 at 08:03:02PM +0200, Peter Dalgaard BSA wrote:
> Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:
> 
> > I would vote for (2). If we go to multiple evaluators as some of us
> > were discussing recently, evaluator-specific statics will need to be
> > removed.
> 
> Hm. That won't help, will it? We'd have one static object instead
> of several. If threads try to step on eachothers toes it wouldn't
> prevent it, just allow them to do it from within different functions!
> 
> What one would really need is a way to generate the buffer
> dynamically *inside* the function call. Or setup PROBLEM to do some
> kind of resource locking, in which case it doesn't really matter
> whether we use (1) or (2)? Or...?

  Allocating the buffer *inside* the function is easy if we insist
  on the PROBLEM ....RECOVER interface (but K. has another opinion):
  #define PROBLEM {char R_problem_buf[R_PROBLEM_BUFSIZE];\
                   sprintf(R_problem_buf,
  #define RECOVER(x)      ), error(R_problem_buf); }

  Same for WARNING
  Are there other use of the buffer?
  g.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jun 14 21:15:05 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 14 Jun 1999 16:15:05 -0400
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Your message of "Mon, 14 Jun 1999 14:18:58 EDT."
 <199906141820.UAA13830@stat.math.ethz.ch>
Message-ID: <199906142015.QAA03834@infiniti.ece.cmu.edu>


Hi all, 

  after I started it, allow me two comments:

1) as was pointed out, the problem of including S.h in different
places doesn't show up until you try to compile shared libraries (lqs,
modre) since the conditional include (#ifndef R_*) doesn't catch it in
this case.  IMHO, "static char R_problem_buf[R_PROBLEM_BUFSIZE];" is
no solution.  I gather from other comments that you want to be thread
safe.  This willl make any declaration of a variable as "static" (not
just R_problem_buf) dangerous.

2) "Philosophically" speaking, a good place for this buffer is the
same place where you'd put the results.  From my little viewpoint,
that would be the evaluation context?

Signing off,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 14 22:57:29 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 1999 23:57:29 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Guido Masarotto's message of "Mon, 14 Jun 1999 20:27:47 +0100"
References: <199906141736.TAA01099@pubhealth.ku.dk> <x2vhcqek2x.fsf@blueberry.kubism.ku.dk> <19990614202747.48954@hal.stat.unipd.it>
Message-ID: <x2btei8mye.fsf@blueberry.kubism.ku.dk>

Guido Masarotto <guido@hal.stat.unipd.it> writes:

>   Allocating the buffer *inside* the function is easy if we insist
>   on the PROBLEM ....RECOVER interface (but K. has another opinion):

Yes. I think Kurt is missing the point that S.h is a *compatibility*
item, so we're stuck with whatever ugliness that is present in S. It
is still allowed to do it neater.

>   #define PROBLEM {char R_problem_buf[R_PROBLEM_BUFSIZE];\
>                    sprintf(R_problem_buf,
>   #define RECOVER(x)      ), error(R_problem_buf); }
> 
>   Same for WARNING
>   Are there other use of the buffer?

I don't think so... 

Let's see: This would create R_problem_buf on the stack when PROBLEM
is encountered or when the function is called? (Forgetting my C
semantics...). In either case, we certainly avoid the reentrancy
problem. In the latter (unlikely) case, we waste 4k per potential
PROBLEM, which is hardly a problem unless the function is heavily
recursive. Sounds good.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From seniorr@teleport.com  Mon Jun 14 23:09:00 1999
From: seniorr@teleport.com (seniorr@teleport.com)
Date: Tue, 15 Jun 1999 00:09:00 +0200 (MET DST)
Subject: readline/history size (PR#211)
Message-ID: <199906142209.AAA02065@pubhealth.ku.dk>

Full_Name: Russell Senior
Version: 0.64.0
OS: linux-2.2.x
Submission from: (NULL) (198.107.133.11)


It appears that the GNU readline history size is limited to 50 entries.  This 
is apparently occurring because R is not bothering to override the readline 
default value (from readline-4.0):

  ./history.c:59:#define DEFAULT_HISTORY_GROW_SIZE 50

It appears that it ought to be possible to override this from R by setting the 
readline variable `history_size' to another value.  I request that a
command-line
option be added for doing this.  The following is an *untested* patch:

--- src/unix/system.c~  Wed Mar 31 12:53:18 1999
+++ src/unix/system.c   Mon Jun 14 15:05:50 1999
@@ -580,6 +580,35 @@
                else
                    R_NSize = value;
            }
+#ifdef HAVE_LIBREADLINE
+#ifdef HAVE_READLINE_HISTORY_H
+           else if((value = (*av)[1] == 'h') || !strcmp(*av, "--histsize")) {
+               if(value)
+                   REprintf("WARNING: option `-h' is deprecated.  "
+                            "Use `--histsize' instead.\n");
+               if(!value || (*av)[2] == '\0') {
+                   ac--; av++; p = *av;
+               }
+               else p = &(*av)[2];
+               if (p == NULL) {
+                   REprintf("WARNING: no hsize given");
+                   break;
+               }
+               value = Decode2Long(p,&ierr);
+               if(ierr) {
+                   if(ierr < 0) goto badargs;
+                   REprintf("--histsize %ld'%c': too large", value,
+                            (ierr == 1)?'M':((ierr == 2)?'K':'k'));
+               }
+               if(value < 0)
+                  REprintf("WARNING: invalid history (hist)size '%d' ignored,"
+                           " using default = %d\n", value, history_size);
+               else
+                   history_size = value;
+           }
+            
+#endif
+#endif
            else {
                REprintf("WARNING: unknown option %s\n", *av);
                break;


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jun 15 09:30:52 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 15 Jun 1999 10:30:52 +0200 (CEST)
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <x2btei8mye.fsf@blueberry.kubism.ku.dk>
References: <199906141736.TAA01099@pubhealth.ku.dk>
 <x2vhcqek2x.fsf@blueberry.kubism.ku.dk>
 <19990614202747.48954@hal.stat.unipd.it>
 <x2btei8mye.fsf@blueberry.kubism.ku.dk>
Message-ID: <14182.3900.762411.940864@pc87.maho.magnaeu.com>

>>>>> Peter Dalgaard BSA writes:

> Guido Masarotto <guido@hal.stat.unipd.it> writes:
>> Allocating the buffer *inside* the function is easy if we insist
>> on the PROBLEM ....RECOVER interface (but K. has another opinion):

> Yes. I think Kurt is missing the point that S.h is a *compatibility*
> item, so we're stuck with whatever ugliness that is present in S. It
> is still allowed to do it neater.

Hmm.  Is everyone trying to give me a hard time lately?  I am aware that
it is there for compatibility.  I was trying to say that even if we keep
the interface supported, we should still find a better way AND advertize
it accordingly.

>> #define PROBLEM {char R_problem_buf[R_PROBLEM_BUFSIZE];\
>> sprintf(R_problem_buf,
>> #define RECOVER(x)      ), error(R_problem_buf); }
>> 
>> Same for WARNING
>> Are there other use of the buffer?

> I don't think so... 

> Let's see: This would create R_problem_buf on the stack when PROBLEM
> is encountered or when the function is called? (Forgetting my C
> semantics...). In either case, we certainly avoid the reentrancy
> problem. In the latter (unlikely) case, we waste 4k per potential
> PROBLEM, which is hardly a problem unless the function is heavily
> recursive. Sounds good.

In any case, let me get rid of this in appl/loglin.c.  On a related
issue, what is the recommended way of allocating memory in such files,
via Calloc()?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jun 15 09:40:31 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 15 Jun 1999 10:40:31 +0200 (CEST)
Subject: Include file changes
In-Reply-To: <199906141758.FAA05183@stat1.stat.auckland.ac.nz>
References: <199906141758.FAA05183@stat1.stat.auckland.ac.nz>
Message-ID: <14182.4479.471950.899741@pc87.maho.magnaeu.com>

>>>>> Ross Ihaka writes:

> I think we are long overdue for a revision of the header files used in
> R.  This is going to be especially important for a clean build of the
> CORBA and R/Java stuff which I have been looking over Duncan's
> shoulder at.  It will also let us integrate some of the features
> Duncan has had to find creative ways around and also to let us
> integrate things like the PROBLEM buffer problem.

> I would propose that we cut down to a much smaller set of includes and
> to put some thought about what goes in each.  Something along the
> lines below.

>         R.h / S.h
>                 This just serves to include Platform.h, RInternals.h and
>                 RUtilities.h below.

>         Platform.h
>                 Platform specific definitions.

Maybe `RPlatform.h' then?

>         RInternals.h
>                 R Data Structures & Access Macros
>                 Memory management
>                 Functions which manipulate R data structures

>         RUtilities.h
>                 Functions which operate at the C level
>                 without special knowlege of R structures
>                 (But maybe not Math).

Such as the things currently in appl?

>         RMath.h
>                 We probably need a separate set of declarations
>                 but maybe not.

>         RGraphics.h
>                 This is big and is logically separate from
>                 other C code.  Some things which are not in
>                 here should be -- e.g. hsv2rgb.

Yes, good point.

> (I think the rest of the code could also stand a bit of clean up too).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 15 09:54:46 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Jun 1999 10:54:46 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Kurt Hornik's message of "Tue, 15 Jun 1999 10:30:52 +0200 (CEST)"
References: <199906141736.TAA01099@pubhealth.ku.dk> 	<x2vhcqek2x.fsf@blueberry.kubism.ku.dk> 	<19990614202747.48954@hal.stat.unipd.it> 	<x2btei8mye.fsf@blueberry.kubism.ku.dk> <14182.3900.762411.940864@pc87.maho.magnaeu.com>
Message-ID: <x2674ponc9.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >>>>> Peter Dalgaard BSA writes:
> 
> > Guido Masarotto <guido@hal.stat.unipd.it> writes:
> >> Allocating the buffer *inside* the function is easy if we insist
> >> on the PROBLEM ....RECOVER interface (but K. has another opinion):
> 
> > Yes. I think Kurt is missing the point that S.h is a *compatibility*
> > item, so we're stuck with whatever ugliness that is present in S. It
> > is still allowed to do it neater.
> 
> Hmm.  Is everyone trying to give me a hard time lately?  I am aware that
> it is there for compatibility.  I was trying to say that even if we keep
> the interface supported, we should still find a better way AND advertize
> it accordingly.

Sorry 'bout that... We still have to keep the old thing working - that
was my only point.

> 
> In any case, let me get rid of this in appl/loglin.c.  On a related
> issue, what is the recommended way of allocating memory in such files,
> via Calloc()?

I think so. However, notice that you need to free the storage
before error()-ing out (which is why it cannot be used in
PROBLEM---RECOVER constructs).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Tue Jun 15 10:13:25 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Tue, 15 Jun 1999 10:13:25 +0100 (BST)
Subject: Include file changes
In-Reply-To: <199906141758.FAA05183@stat1.stat.auckland.ac.nz>
Message-ID: <Pine.GSO.3.96.990615095114.17131E-100000@laplace>

On Tue, 15 Jun 1999, Ross Ihaka wrote:

> (I think the rest of the code could also stand a bit of clean up too).

Can I re-raise the issue of comments in functions?  There are in practice
four types of comment: (1) Those that appear in .R files but don't make it
through to the code; (2) Those that make it through but don't get printed; 
(3) Those that get printed in the `wrong' place; and (4) Those that get
printed in the right place.

>From my reading of the source code I think comments are always going to be
tricky to locate while they are treated as attributes.  I appreciate that
this is a feature of the Blue Book description, but I wonder if a simpler
arrangement might not be possible.  How about if comments were legitimate
expressions that evaluated to "invisible(.Last.value)", or, for those that
follow on on the line, "; invisible(.Last.value)".  Of course this would
slow the function down if implemented as is, but perhaps not if
implemented in the C code.

This may be a naive suggestion, and I am certainly not an expert in
comments, but I do find it frustrating to see all most of my helpful
asides coming out in the wrong place.  It seems to be Sod's Law that
comments are most useful after if() statements, when of course they are
promoted up the function.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jun 15 19:35:39 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Jun 1999 13:35:39 -0500
Subject: Accessing a function's environment
Message-ID: <6rpv2xs45g.fsf@verdi.stat.wisc.edu>

In a short course he is teaching here, Bill Venables has shown how to
cache the results of a recursive calculation so that later invocations
of the functions are speeded up.  His example is an ingenious way of
calculating all the subsets of size r from a set of size n.

His version of this function for R stored these cached values in the
global environment.  I suggested that it might be preferable to
declare the function in such a way that it carried an environment with
it and to use that environment for caching.

For illustration, I will show a factorial function that uses this
trick.  I use .env to store the environment in which the function was
defined then put the cached results in that environment.  Is there a
cleaner way to get the environment in which the currently executing
function was defined?  Sometimes (as below) you do not know the name
under which the function will be stored so you can't use something
like environment(Fact).  Just as "Recall" means to call myself again
regardless of the name, is there a way of a function getting the
environment in which it was defined without knowing its own name?

 > mkFact        # a function that constructs a factorial function
 function () 
 {
     .env <- environment()
     function(n) {
	 nm <- paste(".", n, sep = "/")
	 if (n <= 0) 
	     return(1)
	 if (exists(nm, envir = .env)) 
	     return(get(nm, envir = .env))
	 ans <- n * Recall(n - 1)
	 assign(nm, ans, envir = .env)
	 ans
     }
 }
 > Fact <- mkFact()
 > Fact         # the actual factorial function with an environment
 function (n) 
 {
     nm <- paste(".", n, sep = "/")
     if (n <= 0) 
	 return(1)
     if (exists(nm, envir = .env)) 
	 return(get(nm, envir = .env))
     ans <- n * Recall(n - 1)
     assign(nm, ans, envir = .env)
     ans
 }
 <environment: 0x406136e0>
 > Fact(4)
 [1] 24
 > objects(env = environment(Fact), all = TRUE)
 [1] "./1"  "./2"  "./3"  "./4"  ".env"
 > Fact(6)
 [1] 720
 > objects(env = environment(Fact), all = TRUE)
 [1] "./1"  "./2"  "./3"  "./4"  "./5"  "./6"  ".env"

If you use debug(Fact) and check what happens when Fact(6) is
evaluated, you will see that by the time it evaluates Fact(4), it
picks up the result from the environment.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 15 22:28:14 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Jun 1999 23:28:14 +0200
Subject: Accessing a function's environment
In-Reply-To: Douglas Bates's message of "15 Jun 1999 13:35:39 -0500"
References: <6rpv2xs45g.fsf@verdi.stat.wisc.edu>
Message-ID: <x2yahlqhld.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

>  > Fact <- mkFact()
>  > Fact         # the actual factorial function with an environment
>  function (n) 
>  {
>      nm <- paste(".", n, sep = "/")
>      if (n <= 0) 
> 	 return(1)
>      if (exists(nm, envir = .env)) 
> 	 return(get(nm, envir = .env))
>      ans <- n * Recall(n - 1)
>      assign(nm, ans, envir = .env)
>      ans
>  }
>  <environment: 0x406136e0>
>  > Fact(4)
>  [1] 24
>  > objects(env = environment(Fact), all = TRUE)
>  [1] "./1"  "./2"  "./3"  "./4"  ".env"
>  > Fact(6)
>  [1] 720
>  > objects(env = environment(Fact), all = TRUE)
>  [1] "./1"  "./2"  "./3"  "./4"  "./5"  "./6"  ".env"
> 
> If you use debug(Fact) and check what happens when Fact(6) is
> evaluated, you will see that by the time it evaluates Fact(4), it
> picks up the result from the environment.

Or (0.65 only):

> Fact<-local({
+   .env<-environment()
+   f<-function(n){     
+     nm <- paste(".", n, sep = "/")
+     if (n <= 0)
+       return(1)
+     if (exists(nm, envir = .env))
+       return(get(nm, envir = .env))
+     ans<-n*f(n-1)
+     assign(nm,ans,envir=.env)
+     ans
+   }
+ })
> Fact(6)
[1] 720
> objects(env = environment(Fact), all = TRUE)
[1] "./1"  "./2"  "./3"  "./4"  "./5"  "./6"  ".env" "f"   


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 16 13:20:37 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jun 1999 14:20:37 +0200
Subject: Comments - was Re: Include file changes
In-Reply-To: Jonathan Rougier's message of "Tue, 15 Jun 1999 10:13:25 +0100 (BST)"
References: <Pine.GSO.3.96.990615095114.17131E-100000@laplace>
Message-ID: <x2d7yw9w16.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> >From my reading of the source code I think comments are always going to be
> tricky to locate while they are treated as attributes.  I appreciate that
> this is a feature of the Blue Book description, but I wonder if a simpler
> arrangement might not be possible.  How about if comments were legitimate
> expressions that evaluated to "invisible(.Last.value)", or, for those that
> follow on on the line, "; invisible(.Last.value)".  Of course this would
> slow the function down if implemented as is, but perhaps not if
> implemented in the C code.
> 
> This may be a naive suggestion, and I am certainly not an expert in
> comments, but I do find it frustrating to see all most of my helpful
> asides coming out in the wrong place.  It seems to be Sod's Law that
> comments are most useful after if() statements, when of course they are
> promoted up the function.

I'm afraid that your idea would break on things like

if (blabla)
	# blabla is true
	do.something()

Another idea that has been put forward is to simply include the entire
source, as entered, with the function, but that has drawbacks in case
the function gets modified by directly accessing the parse tree and
whatnot. 

My current hunch is that one needs to have multiple attributes (e.g.
"pre-comment", "post-comment", "endline-comment", "else-comment",....)
and have deparse print them accordingly. Not quite sure how to keep
track of that during parsing, though....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Jun 17 10:14:17 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 17 Jun 1999 10:14:17 +0100 (BST)
Subject: save.image()
Message-ID: <Pine.GSO.3.96.990617100025.25104D-100000@laplace>

Would it be reasonable to suggest adding an `all' flag to save.image(),
i.e.

"save.image" <-
function (f = ".RData", all.names = F) 
eval(substitute(save(list = ls(all.names = all.names), file = f)),
    .GlobalEnv)

I only ask because I keep losing my .First() function.  I would like to
start R in a particular directory and have it configure according to the
First() function in .RData in that directory.  But every time I want to
update the objects in .RData at the end of a session by save.image(), the
.First() is lost.  I know I could use an .Rprofile in the directory, but
my understanding is that it executes before the .Rprofile in the home
directory, while a .First() would execute afterwards, which is better for
modifying my general settings.

Alternatively, perhaps save.image() might be modified to keep .First() and
Last() as the default. 

Many thanks, Jonathan (v. 0.63.2)

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 17 10:25:17 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 17 Jun 1999 11:25:17 +0200 (MET DST)
Subject: save.image() (PR#212)
Message-ID: <199906170925.LAA21831@pubhealth.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> Would it be reasonable to suggest adding an `all' flag to save.image(),
> i.e.
> 
> "save.image" <-
> function (f = ".RData", all.names = F) 
> eval(substitute(save(list = ls(all.names = all.names), file = f)),
>     .GlobalEnv)

I believe this is simply a bug. I see no reason to skip the
dot-objects. 

[current save.image has ...list=ls()...]

CC-ed to r-bugs.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 17 21:42:18 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Thu, 17 Jun 1999 16:42:18 -0400
Subject: changes in configure (Re: Compilation fails (PR#209))
In-Reply-To: Your message of "Mon, 14 Jun 1999 18:34:59 EDT."
 <14181.12083.82468.559759@pc87.maho.magnaeu.com>
Message-ID: <199906172042.QAA13472@infiniti.ece.cmu.edu>

> If you are reading this, your mail reader may not support MIME.
> Some parts of this message will be readable as plain text.

--17.Jun.1999mysteryboxofun
Content-Type: text/plain


Kurt,

  uh, my original suggestion to check the installed xmkmf was directed
to Frank who wasn't very lucky with his Fortran compiler.
Now for AIX, for which I'm actually compiling R at the moment.

"Kurt" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
Kurt> AIX is not a supported platform yet.  If you tell me which flags (cpic,
Kurt> fpic, shlib, maybe something extra for producing the main binary) to use
Kurt> for this platform and the NATIVE compilers, I will gladly tell configure
Kurt> how to get things right on AIX.

I'd like to take you up on your offer, especially since I can't create
the configure file out of configure.in.  
Attached is (hopefully) a patchfile that updates configure fo AIX.  It
also patches the Makefile.in in src/library/modreg/src and it contains
ldAIX4 which is a script for the aux (in R-0.64.1) directory.
(I've put the patch at: www.ece.cmu.edu/~tov/public/R-on-aix42.patch)

Something like the following in a clean R-0.64.1 directory should
work:
$ cd R-0.64.1
$ patch -b -u -p0 < ../R-on-aix42.patch
$ chmod +x aux/ldAIX4
$ mkdir build && cd build
$ # force native compilers:
$ CC=cc ../configure --with-f77 --with-x --without-gnome
$ make

This still leaves the problem with R SHLIB.  AIX needs a file with
symbols that are exported from the main program (R.binary).  A "make
install" should store this file in RHOME/etc/main.exp or somwhere
close.  Lemme think about how to work with in installed R.

A final "make test" runs smoothly up to ../../tests/print-tests.R.
There are some diffs with the length of printed doubles, like,
< [4,] 1.7976931348623157e+308
---
> [4,] 1.797693134862315708145e+308
So the printed number in AIX is shorter?  Any comments?

Thanks,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

--17.Jun.1999mysteryboxofun
Content-Type: application/octet-stream; name="R-on-aix42.patch.gz"
Content-Description: ~/public/R-on-aix42.patch.gz
Content-Transfer-Encoding: base64

H4sICLY8aTcAA1Itb24tYWl4NDIucGF0Y2gAlVZ7V9s2FP87+RR3xmfkZROHBBpDKO81PVB6
gO5FGFVsOdZwJM9yCFnLd9+V5JCEtut2jo8lX/3u+yFfOk13q+0S9gg2jEIWReBMwN0IBI/Y
aJJRV2RstEwoO47zBaB0mjE4JzOAbWh2/VbHbzfB63a75Xq9vowu/UJDeDvh4G3h4292/E7X
APf3wdnsdLcaW1DXq/cK9vfLsLYGfR6yBxZOSAJpQvJIZGMQDzTLWEilW4YyBERSsOxPsZD5
kwWMl+sANfSq7d60nO5traoIAGfHR+fHvXW7kov0TmZByLLqBpk8biThQf/X9rpBHZ+dnZ4d
/HTVW4+2t8EZhjNOxiwoTteO3vePzLkTpSwoqKdfo169Oesfnh33UM4KoRDvDM8H/tXlCThv
Ol4LnGv9HnJBeZ7NcEcfU5IkuOn7xubhhCWhthqt3xgTxjcSNnQRN7cO3hchcmOYMmSOyQOF
PKYQiSQRU8ZHkDBOocIpDTEbiAX0MBEkdIMiTgHJYW8PVNpCGkkUtbs7OLk4LdfX8Ftxvzn4
+eTu3cXd1W/nhxdndx/eHZ9cXh1doC9eua6RSs7OThnfJEljUhMywjQoKhSBshxGKb2bsjy+
Q5mPJMjB/mQOnywD/aYll9+oXBUXDElGstnGWIQZHWnSOblHwxPqMj4v6e8ji1r/jyJL1/EE
3hIOLQ88z29v+mqzaILvi1npDmyNV36zueiOVquxDXV8m8Yo7Qcp2BWspyq8LI65GruS3o/0
p1RtYtA+rheHb6+qZaf0knGIBXVpqhQcAfb+M7aO2KJ6lb7lQq6uQnE9xUPFs/Y/FKB9Y2zf
ZBYklHAf9FI2i//NdC+ad57WBaVI3wuISZMK8jZ4bb+55Xe2ltO0gJeuEKWRm+C98jttv7W5
SEez0YS619jaVNmor/0A2jcZl+v4BdcxkyCDjKU5xDRJJZbwOGWJaj8CqnEhzcQoI2PsTaxx
3aoTnGLFsFEyVEsi3gXo5+sSin4VHNA4kIwHpq9R5j3NsM8l5ALuuZhqMs4EkeVaDpM5iEhT
VzRPY8qX7FLnMiYZKlEVYwxDopKxyqeMVdZBRTUvhIlIUVKlWtW2QpBRklOJjqrCVuxWMaUs
qOC4maJgigMcZmICOUVhLFe2o+cUt0qKjp/iVq2fo3KpxCz8Mk6p2fWFVxXmUhcs16q6yKPY
TjVMJSQnIwpTCmSSizHJWYDjdQYkDMFyhif+3Eo04LQQbQJiwogxQYvXn4eqmHP2/YV/YzIb
og4VFwIpyeNnM7RP+AiOOjE+eTF9VTrbbsvVlSNpDs6j2k4kGtuzPqjFh49DvON0gOzmR7jB
3tlFfSpCe7eQhLBLspHU4vDDdd09S8lgEdzgTPUcy4mtJ+iBWuF2R7mGl2SJBrEAb+/HFt6e
Wp+liI+YDhzjETO1fBTT4F6L1vqxkoocmOzqy9f2ilsXsK3VtFApQVjP/tR6bUQ/IVXGLMqh
hTu8Ggp0bQXurfAWuzVHPHMv8a5wPpdYAaCSBC/tF8M/KV4yuCNZEDPMoXIBS0votWchc6RP
RzsQivllqPxDEnoINVdUYY62zUYfWjs7YFR+hYd8jycUnBbGqgufj0EK03+YijRjPC/KZpSI
If4Hydk4FYmEyoRLzAQNGzDdEDhpSEgzjAof9/hYLSLNUamTgjMCTL3RcUnxPwqnh+VGE65z
eo2VnHnq1bJM7VrFEbLgTUUfvd66bPwxcAeVG+L8feD8flusTad7d1sbVDEd1+DW7MbAa6i/
kSU1DyTTWg6/1DI/Gko519Qymv5Fz2GhR3FpXZhtVcgWTmHXgj2wi6Io120MpW3CAPPQfwaJ
nedwcNRPo/HOWvpA4z7DwCRSRRe/Jpz9pf5DFoKVg33+IO7nAxhteMDMWPa+ZYbJHKuDrnvK
fl3+BywP7vxxCwAA


--17.Jun.1999mysteryboxofun--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jun 18 07:07:15 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 18 Jun 1999 08:07:15 +0200 (CEST)
Subject: save.image() (PR#212)
In-Reply-To: <199906170925.LAA21831@pubhealth.ku.dk>
References: <199906170925.LAA21831@pubhealth.ku.dk>
Message-ID: <14185.57875.863375.292020@aragorn.ci.tuwien.ac.at>

>>>>> p dalgaard writes:

> Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
>> Would it be reasonable to suggest adding an `all' flag to save.image(),
>> i.e.
>> 
>> "save.image" <-
>> function (f = ".RData", all.names = F) 
>> eval(substitute(save(list = ls(all.names = all.names), file = f)),
>> .GlobalEnv)

> I believe this is simply a bug. I see no reason to skip the
> dot-objects. 

> [current save.image has ...list=ls()...]

> CC-ed to r-bugs.

Ok, changed to ls(all.names = TRUE).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pm254@medschl.cam.ac.uk  Fri Jun 18 08:05:06 1999
From: pm254@medschl.cam.ac.uk (Paul Murrell)
Date: Fri, 18 Jun 1999 08:05:06 +0100
Subject: graphics changes
Message-ID: <002c01beb958$e5664ce0$54566f83@capc03t.medlan.cam.ac.uk>

hi

i have just made a couple of graphics changes to R to make graphics clipping
more consistent and to make par(xpd) compatible with S.

as a result of these changes, there is a possibility that some graphics
output may "disappear" from existing R code
(i) because the output from rect() is now clipped in PostScript  and
(ii) because par(xpd=T) now means clip to figure region rather than clip to
device region.

the solution to the latter problem is to use par(xpd=NA) instead of
par(xpd=T) - if you have never used par(xpd) then nothing should change.
the solution to the former problem is to start using par(xpd) :)

these changes will only affect the R-release snapshots in the short term,
but ultimately they will be part of the R-devel prerelease and then release
0.65.

paul




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gonzalez@mppmu.mpg.de  Fri Jun 18 12:15:59 1999
From: gonzalez@mppmu.mpg.de (Jose Carlos Gonzalez)
Date: Fri, 18 Jun 1999 13:15:59 +0200 (MET DST)
Subject: Compilation fails (PR#209)
In-Reply-To: <14181.11583.323584.13254@pc87.maho.magnaeu.com>
Message-ID: <Pine.OSF.4.10.9906181251520.14280-200000@hegra9.mppmu.mpg.de>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--0-845171975-929704559=:14280
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Mon, 14 Jun 1999, Kurt Hornik wrote:

KH>>>>>> Frank Beimfohr writes:
KH>
KH>>> Hi,
KH>>>
KH>
KH>(As an aside.  This thread is quickly becoming extremely inefficient.  I
KH>am certainly willing to fix configuration/build problems, but if I ask
KH>SPECIFIC questions then I really need specific answers.)
KH>
KH>>> there are three different things going on here:
KH>>> (1) gmake by default has the option "-w" set, which is why you see
KH>>> these "Entering/Leaving directory ..." messages.  This option finds a
KH>>> way into the make flags when the system default make is called.  Not
KH>>> quite sure how, but don't blame it on configure.  Makeconf et. al. is
KH>>> more likely.
KH>
KH>I don't see how the system default could be called.  The instructions
KH>say that if you want to use non-default make, then you need to do
KH>(assuming a Bourne shell)
KH>
KH>	MAKE=/the/make/you/want ./configure
KH>	/the/make/you/want
KH>
KH>>> (2) Very annoyingly, modreg doesn't use the $(SHLIBLD) command but
KH>>> calls R with SHLIB as option.  Which is nothing you are interested in,
KH>>> but is a bad thing, IMHO.
KH>
KH>Good point.  Will have a look.
KH>

Did you get anything out of this problem? I'm trying to compile
the distributed source R-0.64.1 in my computer (Digital
AlphaStation, OSF1 V4.0 alpha) with gcc and g77. The standard cc
and f77 complain in this machine, and I thought that perhaps
with the GNU tools it would go fine. But it does not.

KH>>> (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
KH>>> configure uses.  Try to find out, what the default is.  Follow this example:
KH>>> tmp $ touch Imakefile
KH>>> tmp $ xmkmf
KH>>> imake -DUseInstalled -I/usr/lib/X11/config
KH>>> "./Imakefile", line 1: 1506-229 (W) File is empty.
KH>>> tmp $ grep -i pic Makefile 
KH>>> PICFLAGS = -bM\:SRE
KH>>> (Results are for an AIX box.  Your output should look different.)
KH>
KH>> I started 'configure' with the f2c- and without the g77-Option and used 
KH>> /usr/ccs/bin/make instead of gmake (very flexible, isn't it ;) 
KH>

Unfortunately, I cannot use f2c (well, I could install it, but I
would really prefer not to do it).

Attached I send, all together in one file:

- the command line and output of configure
- the Makeconf file
- the output after the compilation process starts... and fails

I still want to use R in this system. There are pre-compiled
binary distributions, but as I said in one previous e-mail, I
only find RPM packages for Alpha, and I would need a
"Gzipped+Tarred" distribution instead.

Cheers,

  J C 
--
470-"Don't worry! I still have a dagger attack."
	("FAMOUS LAST WORDS", collected by O.Rosenkranz)
====================================================================
   *    J. C. Gonzalez                   
  .     ------------------------------------------------------------  
  .     Max-Planck-Institut fuer Physik        Tel.: +49 89 32354445
   .    (Werner-Heisenberg-Institut)           Fax : +49 89 3226704   
     *  Foehringer Ring, 6          ... . .... . ..... ......... .. 
 .      D-80805 Muenchen  E-mail: gonzalez@mppmu.mpg.de
   .    Deutschland          WWW: hegra1.mppmu.mpg.de:8000/~gonzalez
====================================================================

--0-845171975-929704559=:14280
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=R-compil
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.OSF.4.10.9906181315590.14280@hegra9.mppmu.mpg.de>
Content-Description: 
Content-Disposition: attachment; filename=R-compil

IyBybSBjb25maWcuY2FjaGUNCiMgQ0M9Z2NjIEY3Nz1nNzcgLi9jb25maWd1
cmUgLS1wcmVmaXg9L2hkOTAvZ29uemFsZXovUiAtLXdpdGgtZzc3DQpjcmVh
dGluZyBjYWNoZSAuL2NvbmZpZy5jYWNoZQ0KY2hlY2tpbmcgZm9yIGEgQlNE
IGNvbXBhdGlibGUgaW5zdGFsbC4uLiAvYmluL2luc3RhbGxic2QgLWMNCmNo
ZWNraW5nIHdoZXRoZXIgbG4gLXMgd29ya3MuLi4geWVzDQpjaGVja2luZyBm
b3IgcmFubGliLi4uIHJhbmxpYg0KY2hlY2tpbmcgZm9yIGJpc29uLi4uIGJp
c29uIC15DQpjaGVja2luZyBmb3IgYXIuLi4gYXINCmNoZWNraW5nIGZvciBs
YXRleC4uLiAvdXNyL2xvY2FsL3RlVGV4L2Jpbi9hbHBoYS1vc2Y0LjAvbGF0
ZXgNCmNoZWNraW5nIGZvciBkdmlwcy4uLiAvdXNyL2xvY2FsL3RlVGV4L2Jp
bi9hbHBoYS1vc2Y0LjAvZHZpcHMNCmNoZWNraW5nIGZvciBtYWtlaW5kZXgu
Li4gL3Vzci9sb2NhbC90ZVRleC9iaW4vYWxwaGEtb3NmNC4wL21ha2VpbmRl
eA0KY2hlY2tpbmcgZm9yIHVuemlwLi4uIC91c3IvbG9jYWwvYmluL3Vuemlw
DQpjaGVja2luZyBmb3IgemlwLi4uIC91c3IvbG9jYWwvYmluL3ppcA0KY2hl
Y2tpbmcgZm9yIHBlcmwuLi4gL2Jpbi9wZXJsDQpjaGVja2luZyB3aGV0aGVy
IHBlcmwgaXMgcGVybCA1Li4uIHllcw0KY2hlY2tpbmcgZm9yIGdjYy4uLiBn
Y2MNCmRlZmluaW5nIEY3NyB0byBiZSBnNzcNCmNoZWNraW5nIGZvciB1bmRl
cnNjb3JlIGFmdGVyIEZvcnRyYW4gc3ltYm9scy4uLiB5ZXMNCmNoZWNraW5n
IGZvciBzaW4gaW4gLWxtLi4uIHllcw0KY2hlY2tpbmcgZm9yIHNpbiBpbiAt
bG1vdG8uLi4gbm8NCmNoZWNraW5nIGZvciBtYWluIGluIC1sbmN1cnNlcy4u
LiBubw0KY2hlY2tpbmcgZm9yIG1haW4gaW4gLWx0ZXJtY2FwLi4uIHllcw0K
Y2hlY2tpbmcgZm9yIGRsb3BlbiBpbiAtbGRsLi4uIG5vDQpjaGVja2luZyBm
b3IgbWFpbiBpbiAtbHouLi4geWVzDQpjaGVja2luZyBmb3IgbWFpbiBpbiAt
bGhkZjUuLi4gbm8NCmNoZWNraW5nIGZvciBtYWluIGluIC1sZHhtbC4uLiBu
bw0KY2hlY2tpbmcgZm9yIG1haW4gaW4gLWxibGFzLi4uIG5vDQpjaGVja2lu
ZyBmb3IgcmxfY2FsbGJhY2tfcmVhZF9jaGFyIGluIC1scmVhZGxpbmUuLi4g
bm8NCmNoZWNraW5nIGhvdyB0byBydW4gdGhlIEMgcHJlcHJvY2Vzc29yLi4u
IGdjYyAtRQ0KY2hlY2tpbmcgZm9yIEFOU0kgQyBoZWFkZXIgZmlsZXMuLi4g
eWVzDQpjaGVja2luZyBmb3IgcGlkX3QuLi4geWVzDQpjaGVja2luZyBmb3Ig
dmZvcmsuaC4uLiBubw0KY2hlY2tpbmcgZm9yIHdvcmtpbmcgdmZvcmsuLi4g
eWVzDQpjaGVja2luZyBmb3IgdnByaW50Zi4uLiB5ZXMNCmNoZWNraW5nIGZv
ciBhY29zaC4uLiB5ZXMNCmNoZWNraW5nIGZvciBhc2luaC4uLiB5ZXMNCmNo
ZWNraW5nIGZvciBhdGFuaC4uLiB5ZXMNCmNoZWNraW5nIGZvciBiY29weS4u
LiB5ZXMNCmNoZWNraW5nIGZvciBmaW5pdGUuLi4geWVzDQpjaGVja2luZyBm
b3IgaXNmaW5pdGUuLi4gbm8NCmNoZWNraW5nIGZvciBpc25hbi4uLiB5ZXMN
CmNoZWNraW5nIGZvciBtYXRoZXJyLi4uIG5vDQpjaGVja2luZyBmb3IgbWVt
Y3B5Li4uIHllcw0KY2hlY2tpbmcgZm9yIG1lbW1vdmUuLi4geWVzDQpjaGVj
a2luZyBmb3IgcmVnY29tcC4uLiB5ZXMNCmNoZWNraW5nIGZvciByaW50Li4u
IHllcw0KY2hlY2tpbmcgZm9yIHN0cmNvbGwuLi4geWVzDQpjaGVja2luZyBm
b3Igc3RydG9kLi4uIHllcw0KY2hlY2tpbmcgZm9yIHN0cnRvbC4uLiB5ZXMN
CmNoZWNraW5nIGZvciBzeXN0ZW0uLi4geWVzDQpjaGVja2luZyBmb3IgdGlt
ZXMuLi4geWVzDQpjaGVja2luZyBmb3Igc2lnc2V0am1wLi4uIHllcw0KY2hl
Y2tpbmcgZm9yIHNpZ2xvbmdqbXAuLi4geWVzDQpjaGVja2luZyBmb3IgX19z
ZXRmcHVjdy4uLiBubw0KY2hlY2tpbmcgZm9yIEFOU0kgQyBoZWFkZXIgZmls
ZXMuLi4gKGNhY2hlZCkgeWVzDQpjaGVja2luZyBmb3IgZGwuaC4uLiBubw0K
Y2hlY2tpbmcgZm9yIGRsZmNuLmguLi4geWVzDQpjaGVja2luZyBmb3IgZWxm
LmguLi4gbm8NCmNoZWNraW5nIGZvciBsb2NhbGUuaC4uLiB5ZXMNCmNoZWNr
aW5nIGZvciByZWFkbGluZS9oaXN0b3J5LmguLi4gbm8NCmNoZWNraW5nIGZv
ciBycGMveGRyLmguLi4geWVzDQpjaGVja2luZyBmb3Igc3lzL3RpbWVzLmgu
Li4geWVzDQpjaGVja2luZyBmb3IgdGltZS5oLi4uIHllcw0KY2hlY2tpbmcg
Zm9yIGllZWVmcC5oLi4uIG5vDQpjaGVja2luZyBmb3IgaWVlZTc1NC5oLi4u
IG5vDQpjaGVja2luZyBmb3IgdW5pc3RkLmguLi4geWVzDQpjaGVja2luZyBm
b3IgaGRmNS5oLi4uIG5vDQpjaGVja2luZyByZXR1cm4gdHlwZSBvZiBzaWdu
YWwgaGFuZGxlcnMuLi4gdm9pZA0KY2hlY2tpbmcgZm9yIHdvcmtpbmcgY29u
c3QuLi4geWVzDQpjaGVja2luZyBzaXplIG9mIGxvbmcuLi4gOA0KY2hlY2tp
bmcgZm9yIHhta21mLi4uIC91c3IvYmluL1gxMS94bWttZg0KY2hlY2tpbmcg
aG93IHRvIG1ha2Ugc2hhcmVkIGxpYnJhcmllcy4uLiBkb25lDQpjaGVja2lu
ZyBmb3IgWC4uLiBsaWJyYXJpZXMgLCBoZWFkZXJzIA0KY2hlY2tpbmcgZm9y
IGRuZXRfbnRvYSBpbiAtbGRuZXQuLi4gbm8NCmNoZWNraW5nIGZvciBkbmV0
X250b2EgaW4gLWxkbmV0X3N0dWIuLi4geWVzDQpjaGVja2luZyBmb3IgZ2V0
aG9zdGJ5bmFtZS4uLiB5ZXMNCmNoZWNraW5nIGZvciBjb25uZWN0Li4uIHll
cw0KY2hlY2tpbmcgZm9yIHJlbW92ZS4uLiB5ZXMNCmNoZWNraW5nIGZvciBz
aG1hdC4uLiB5ZXMNCmNoZWNraW5nIGZvciBJY2VDb25uZWN0aW9uTnVtYmVy
IGluIC1sSUNFLi4uIHllcw0KY2hlY2tpbmcgZm9yIGxwci4uLiBscHINCnVw
ZGF0aW5nIGNhY2hlIC4vY29uZmlnLmNhY2hlDQpjcmVhdGluZyAuL2NvbmZp
Zy5zdGF0dXMNCmNyZWF0aW5nIE1ha2Vjb25mDQpjcmVhdGluZyBNYWtlZmls
ZQ0KY3JlYXRpbmcgYWZtL01ha2VmaWxlDQpjcmVhdGluZyBkZW1vcy9NYWtl
ZmlsZQ0KY3JlYXRpbmcgZG9jL01ha2VmaWxlDQpjcmVhdGluZyBkb2Mva2V5
d29yZC10ZXN0DQpjcmVhdGluZyBkb2MvbWFudWFsL01ha2VmaWxlDQpjcmVh
dGluZyBkb2MvbWFudWFsL2xpYjJ0ZXgNCmNyZWF0aW5nIGRvYy9tYW51YWwv
UmVmZXJlbmNlLnRleA0KY3JlYXRpbmcgZG9jL21hbnVhbC9NYW51YWwudGV4
DQpjcmVhdGluZyBldGMvTWFrZWZpbGUNCmNyZWF0aW5nIGV0Yy9NYWtlY29u
Zg0KY3JlYXRpbmcgc3JjL01ha2VmaWxlDQpjcmVhdGluZyBzcmMvYXBwbC9N
YWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2luY2x1ZGUvTWFrZWZpbGUNCmNyZWF0
aW5nIHNyYy9saWJyYXJ5L01ha2VmaWxlDQpjcmVhdGluZyBzcmMvbWFpbi9N
YWtlZmlsZQ0KY3JlYXRpbmcgc3JjL25tYXRoL01ha2VmaWxlDQpjcmVhdGlu
ZyBzcmMvc2NyaXB0cy9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL3VuaXgvTWFr
ZWZpbGUNCmNyZWF0aW5nIHNyYy9nbm9tZS9NYWtlZmlsZQ0KY3JlYXRpbmcg
c3JjL2xpYnJhcnkvYmFzZS9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2xpYnJh
cnkvcHJvZmlsZS9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2xpYnJhcnkvZWRh
L01ha2VmaWxlDQpjcmVhdGluZyBzcmMvbGlicmFyeS9lZGEvc3JjL01ha2Vm
aWxlDQpjcmVhdGluZyBzcmMvbGlicmFyeS9scXMvTWFrZWZpbGUNCmNyZWF0
aW5nIHNyYy9saWJyYXJ5L2xxcy9zcmMvTWFrZWZpbGUNCmNyZWF0aW5nIHNy
Yy9saWJyYXJ5L21vZHJlZy9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2xpYnJh
cnkvbW9kcmVnL3NyYy9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2xpYnJhcnkv
bXZhL01ha2VmaWxlDQpjcmVhdGluZyBzcmMvbGlicmFyeS9tdmEvc3JjL01h
a2VmaWxlDQpjcmVhdGluZyBzcmMvbGlicmFyeS9zdGVwZnVuL01ha2VmaWxl
DQpjcmVhdGluZyBzcmMvc2NyaXB0cy9DT01QSUxFDQpjcmVhdGluZyBzcmMv
c2NyaXB0cy9JTlNUQUxMDQpjcmVhdGluZyBzcmMvc2NyaXB0cy9SRU1PVkUN
CmNyZWF0aW5nIHNyYy9zY3JpcHRzL1Iuc2gNCmNyZWF0aW5nIHNyYy9zY3Jp
cHRzL1JkY29udg0KY3JlYXRpbmcgc3JjL3NjcmlwdHMvUmRpbmRleA0KY3Jl
YXRpbmcgc3JjL3NjcmlwdHMvUm1hbjJSZA0KY3JlYXRpbmcgc3JjL3Njcmlw
dHMvU0hMSUINCmNyZWF0aW5nIHNyYy9zY3JpcHRzL1NkMlJkDQpjcmVhdGlu
ZyBzcmMvc2NyaXB0cy9idWlsZC1oZWxwDQpjcmVhdGluZyBzcmMvc2NyaXB0
cy9md2YydGFibGUNCmNyZWF0aW5nIHNyYy9zY3JpcHRzL2hlbHAucHJldHR5
DQpjcmVhdGluZyBzcmMvc2NyaXB0cy9odG1sMmRvcw0KY3JlYXRpbmcgc3Jj
L3NjcmlwdHMvUmQyY29udGVudHMNCmNyZWF0aW5nIHRlc3RzL01ha2VmaWxl
DQpjcmVhdGluZyB0ZXN0cy9FeGFtcGxlcy9NYWtlZmlsZQ0KY3JlYXRpbmcg
c3JjL2luY2x1ZGUvUGxhdGZvcm0uaA0Kc3JjL2luY2x1ZGUvUGxhdGZvcm0u
aCBpcyB1bmNoYW5nZWQNCg0KDQpSIGlzIG5vdyBjb25maWd1cmVkIGZvciBh
bHBoYS1kZWMtb3NmNC4wDQoNCiAgU291cmNlIGRpcmVjdG9yeTogICAgICAg
ICAuDQogIEluc3RhbGxhdGlvbiBkaXJlY3Rvcnk6ICAgL2hkOTAvZ29uemFs
ZXovUg0KICBDIGNvbXBpbGVyOiAgICAgICAgICAgICAgIGdjYyAtaWVlZV93
aXRoX2luZXhhY3QgLWcNCiAgRk9SVFJBTiBjb21waWxlcjogICAgICAgICBn
NzcgLU8yDQogIEdub21lIHN1cHBvcnQ6ICAgICAgICAgICAgbm8NCg0KIyBj
YXQgTWFrZWNvbmYNClBBQ0tBR0UgPSBSDQpWRVJTSU9OID0gMC42NC4xDQoN
CkFSID0gYXINCkJMQVMgPSBibGFzLm8NCkNDID0gZ2NjDQpDRkxBR1MgPSAt
aWVlZV93aXRoX2luZXhhY3QgLWcNCkNQSUNGTEFHUyA9IA0KQ1BQRkxBR1Mg
PSAtSS4uL2luY2x1ZGUgLUkkKHRvcF9zcmNkaXIpL3NyYy9pbmNsdWRlIA0K
RExMRkxBR1MgPSANCkRWSVBTID0gL3Vzci9sb2NhbC90ZVRleC9iaW4vYWxw
aGEtb3NmNC4wL2R2aXBzDQpGQyA9IGc3Nw0KRkZMQUdTID0gLU8yDQpGUElD
RkxBR1MgPSAtZnBpYw0KRjJDID0gDQpGMkNGTEFHUyA9IA0KR05PTUVVSV9M
SUJTID0gDQpHTk9NRV9MSUJESVIgPSANCkdOT01FX0lOQ0xVREVESVIgPSAN
CklOU1RBTEwgPSAvYmluL2luc3RhbGxic2QgLWMNCklOU1RBTExfREFUQSA9
ICR7SU5TVEFMTH0gLW0gNjQ0DQpJTlNUQUxMX1BST0dSQU0gPSAke0lOU1RB
TEx9DQpJTlNUQUxMX0RJUiA9ICR7SU5TVEFMTH0gLWQNCkxBVEVYID0gL3Vz
ci9sb2NhbC90ZVRleC9iaW4vYWxwaGEtb3NmNC4wL2xhdGV4DQpMRENNRCA9
IGc3Nw0KTERGTEFHUyA9IA0KTElCUyA9ICAtbHogLWx0ZXJtY2FwIC1sbSAN
CkxOX1MgPSBsbiAtcw0KTUFLRUlOREVYID0gL3Vzci9sb2NhbC90ZVRleC9i
aW4vYWxwaGEtb3NmNC4wL21ha2VpbmRleA0KTUtJTlNUQUxMRElSUyA9ICQo
dG9wX3NyY2RpcikvYXV4L21raW5zdGFsbGRpcnMNClJBTkxJQiA9IHJhbmxp
Yg0KU0hFTEwgPSAvYmluL3NoDQpTSExJQkVYVCA9IHNvDQpTSExJQkxEID0g
bGQNClNITElCTERGTEFHUyA9IC1zaGFyZWQNClRBUiA9IHRhcg0KWF9DRkxB
R1MgPSANClhfTElCUyA9ICAtbFgxMQ0KWF9QUkVfTElCUyA9ICAtbFNNIC1s
SUNFDQpYX0VYVFJBX0xJQlMgPSAgLWxkbmV0X3N0dWINCllBQ0MgPSBiaXNv
biAteQ0KDQouU1VGRklYRVM6DQouU1VGRklYRVM6IC5jIC5mIC5vDQouYy5v
Og0KCSQoQ0MpICQoQ0ZMQUdTKSAkKENQUEZMQUdTKSAtYyAkPCAtbyAkQA0K
DQouZi5jOg0KLmYubzoNCgkkKEZDKSAkKEZGTEFHUykgLWMgJDwgLW8gJEAN
Cg0KcHJlZml4ID0gL2hkOTAvZ29uemFsZXovUg0KZXhlY19wcmVmaXggPSAk
e3ByZWZpeH0NCmJpbmRpciA9ICR7ZXhlY19wcmVmaXh9L2Jpbg0KZGF0YWRp
ciA9ICR7cHJlZml4fS9zaGFyZQ0KbGliZGlyID0gJHtleGVjX3ByZWZpeH0v
bGliDQptYW5kaXIgPSAke3ByZWZpeH0vbWFuDQoNCnJob21lID0gJHtleGVj
X3ByZWZpeH0vbGliL1INCg0KIyBnbnVtYWtlDQpnbnVtYWtlWzFdOiBFbnRl
cmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL2FmbScN
CmdudW1ha2VbMV06IExlYXZpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxl
ei9SLTAuNjQuMS9hZm0nDQpnbnVtYWtlWzFdOiBFbnRlcmluZyBkaXJlY3Rv
cnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL2RlbW9zJw0KZ251bWFrZVsx
XTogTGVhdmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4x
L2RlbW9zJw0KZ251bWFrZVsxXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5
MC9nb256YWxlei9SLTAuNjQuMS9kb2MnDQpnbnVtYWtlWzFdOiBMZWF2aW5n
IGRpcmVjdG9yeSBgL2hkOTAvZ29uemFsZXovUi0wLjY0LjEvZG9jJw0KZ251
bWFrZVsxXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9S
LTAuNjQuMS9ldGMnDQpnbnVtYWtlWzFdOiBMZWF2aW5nIGRpcmVjdG9yeSBg
L2hkOTAvZ29uemFsZXovUi0wLjY0LjEvZXRjJw0KZ251bWFrZVsxXTogRW50
ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9SLTAuNjQuMS9zcmMn
DQpnbnVtYWtlWzJdOiBFbnRlcmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnph
bGV6L1ItMC42NC4xL3NyYy9pbmNsdWRlJw0KZ251bWFrZVsyXTogTGVhdmlu
ZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9pbmNs
dWRlJw0KZ251bWFrZVsyXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9n
b256YWxlei9SLTAuNjQuMS9zcmMvYXBwbCcNCmdudW1ha2VbMl06IE5vdGhp
bmcgdG8gYmUgZG9uZSBmb3IgYFInLg0KZ251bWFrZVsyXTogTGVhdmluZyBk
aXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9hcHBsJw0K
Z251bWFrZVsyXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxl
ei9SLTAuNjQuMS9zcmMvbm1hdGgnDQpnbnVtYWtlWzJdOiBOb3RoaW5nIHRv
IGJlIGRvbmUgZm9yIGBSJy4NCmdudW1ha2VbMl06IExlYXZpbmcgZGlyZWN0
b3J5IGAvaGQ5MC9nb256YWxlei9SLTAuNjQuMS9zcmMvbm1hdGgnDQpnbnVt
YWtlWzJdOiBFbnRlcmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1It
MC42NC4xL3NyYy91bml4Jw0KZ251bWFrZVsyXTogTm90aGluZyB0byBiZSBk
b25lIGZvciBgUicuDQpnbnVtYWtlWzJdOiBMZWF2aW5nIGRpcmVjdG9yeSBg
L2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL3VuaXgnDQpnbnVtYWtlWzJd
OiBFbnRlcmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4x
L3NyYy9tYWluJw0KZ251bWFrZVsyXTogTm90aGluZyB0byBiZSBkb25lIGZv
ciBgUicuDQpnbnVtYWtlWzJdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hkOTAv
Z29uemFsZXovUi0wLjY0LjEvc3JjL21haW4nDQpnbnVtYWtlWzJdOiBFbnRl
cmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9z
Y3JpcHRzJw0KZ251bWFrZVsyXTogTGVhdmluZyBkaXJlY3RvcnkgYC9oZDkw
L2dvbnphbGV6L1ItMC42NC4xL3NyYy9zY3JpcHRzJw0KZ251bWFrZVsyXTog
RW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9SLTAuNjQuMS9z
cmMvbGlicmFyeScNCmdudW1ha2VbM106IEVudGVyaW5nIGRpcmVjdG9yeSBg
L2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvYmFzZScNCkJ1
aWxkaW5nIFIgYmFzZSBwYWNrYWdlDQpnbnVtYWtlWzNdOiBMZWF2aW5nIGRp
cmVjdG9yeSBgL2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkv
YmFzZScNCmdudW1ha2VbM106IEVudGVyaW5nIGRpcmVjdG9yeSBgL2hkOTAv
Z29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvZWRhJw0KZ251bWFrZVs0
XTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9SLTAuNjQu
MS9zcmMvbGlicmFyeS9lZGEvc3JjJw0KZ251bWFrZVs0XTogTGVhdmluZyBk
aXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9saWJyYXJ5
L2VkYS9zcmMnDQpnbnVtYWtlWzNdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hk
OTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvZWRhJw0KZ251bWFr
ZVszXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9SLTAu
NjQuMS9zcmMvbGlicmFyeS9scXMnDQpnbnVtYWtlWzRdOiBFbnRlcmluZyBk
aXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9saWJyYXJ5
L2xxcy9zcmMnDQpnbnVtYWtlWzRdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hk
OTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvbHFzL3NyYycNCmdu
dW1ha2VbM106IExlYXZpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9S
LTAuNjQuMS9zcmMvbGlicmFyeS9scXMnDQpnbnVtYWtlWzNdOiBFbnRlcmlu
ZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9saWJy
YXJ5L21vZHJlZycNCmdudW1ha2VbNF06IEVudGVyaW5nIGRpcmVjdG9yeSBg
L2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvbW9kcmVnL3Ny
YycNCi4uLy4uLy4uLy4uL2Jpbi9SIFNITElCIC1vIG1vZHJlZy5zbyBic3Bs
dmQubyBidmFsdWUubyBidmFsdXMubyBrc21vb3RoLm8gbG9lc3NjLm8gbG9l
c3NmLm8gcHByLm8gcXNiYXJ0Lm8gc2JhcnQubyBzZ3JhbS5vIHNpbmVycC5v
IHNzbHZyZy5vIHN0eHd4Lm8NCk1ha2U6IFVua25vd24gZmxhZyBhcmd1bWVu
dCB3LiAgU3RvcC4NCmdudW1ha2VbNF06ICoqKiBbbW9kcmVnLnNvXSBFcnJv
ciAxDQpnbnVtYWtlWzRdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hkOTAvZ29u
emFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvbW9kcmVnL3NyYycNCmdudW1h
a2VbM106ICoqKiBbYWxsXSBFcnJvciAxDQpnbnVtYWtlWzNdOiBMZWF2aW5n
IGRpcmVjdG9yeSBgL2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJh
cnkvbW9kcmVnJw0KZ251bWFrZVsyXTogKioqIFtSXSBFcnJvciAxDQpnbnVt
YWtlWzJdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hkOTAvZ29uemFsZXovUi0w
LjY0LjEvc3JjL2xpYnJhcnknDQpnbnVtYWtlWzFdOiAqKiogW1JdIEVycm9y
IDENCmdudW1ha2VbMV06IExlYXZpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256
YWxlei9SLTAuNjQuMS9zcmMnDQpnbnVtYWtlOiAqKiogW1JdIEVycm9yIDEN
Cg==
--0-845171975-929704559=:14280--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From John.Peters@tip.csiro.au  Mon Jun 21 00:24:25 1999
From: John.Peters@tip.csiro.au (John.Peters@tip.csiro.au)
Date: Mon, 21 Jun 1999 01:24:25 +0200 (MET DST)
Subject: as.numeric with trailing spaces (PR#213)
Message-ID: <199906202324.BAA11356@pubhealth.ku.dk>

For R bugs:

"as.numeric" fails on strings with trailing spaces:
(OK in Splus 3.4).

> as.numeric(c("2"," 3","4 "," 5 "))
Warning: NAs introduced by coercion
[1]  2  3 NA NA
>

occurs in both "rw0641b" and "R-base-0.64.1-4-i386.rpm".

Thanks for R
----------------------------------------------------------------------------
John Peters
CSIRO National Measurement Laboratory
PO Box 218                                Phone:    +61 2 9413 7503
Lindfield NSW 2070                        Fax:      +61 2 9413 7202
Australia                                 Internet: John.Peters@tip.CSIRO.AU
----------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 21 10:12:31 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jun 1999 11:12:31 +0200
Subject: as.numeric with trailing spaces (PR#213)
In-Reply-To: John.Peters@tip.csiro.au's message of "Mon, 21 Jun 1999 01:24:25 +0200 (MET DST)"
References: <199906202324.BAA11356@pubhealth.ku.dk>
Message-ID: <x2lndd9atc.fsf@blueberry.kubism.ku.dk>

John.Peters@tip.csiro.au writes:

> For R bugs:
> 
> "as.numeric" fails on strings with trailing spaces:
> (OK in Splus 3.4).
> 
> > as.numeric(c("2"," 3","4 "," 5 "))
> Warning: NAs introduced by coercion
> [1]  2  3 NA NA
> >
> 
> occurs in both "rw0641b" and "R-base-0.64.1-4-i386.rpm".

Could probably be argued that one deserves what one gets in that case,
but it'll be easier just to change it.... (*endp == '\0' after strtod
needs to check for blank-or-empty string instead).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 21 13:48:52 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jun 1999 14:48:52 +0200
Subject: as.numeric with trailing spaces (PR#213)
In-Reply-To: Peter Dalgaard BSA's message of "21 Jun 1999 11:12:31 +0200"
References: <199906202324.BAA11356@pubhealth.ku.dk> <x2lndd9atc.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2hfo190sr.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > > as.numeric(c("2"," 3","4 "," 5 "))

> Could probably be argued that one deserves what one gets in that case,
> but it'll be easier just to change it.... (*endp == '\0' after strtod
> needs to check for blank-or-empty string instead).

Done.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jun 22 21:06:49 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 22 Jun 1999 22:06:49 +0200 (CEST)
Subject: readline/history size (PR#211)
In-Reply-To: <199906142209.AAA02065@pubhealth.ku.dk>
References: <199906142209.AAA02065@pubhealth.ku.dk>
Message-ID: <14191.60633.543672.981594@aragorn.ci.tuwien.ac.at>

>>>>> seniorr  writes:

> Full_Name: Russell Senior
> Version: 0.64.0
> OS: linux-2.2.x
> Submission from: (NULL) (198.107.133.11)


> It appears that the GNU readline history size is limited to 50
> entries.  This is apparently occurring because R is not bothering to
> override the readline default value (from readline-4.0):

>   ./history.c:59:#define DEFAULT_HISTORY_GROW_SIZE 50

> It appears that it ought to be possible to override this from R by
> setting the readline variable `history_size' to another value.  I
> request that a command-line option be added for doing this.  The
> following is an *untested* patch:

> ...

I cannot confirm that the history size is limited to 50.  In fact, on my
system the size of the .Rhistory files can grow indefinitely.

I have (in r-devel) introduced the environment variables R_HISTFILE and
R_HISTSIZE, with defaults ".Rhistory" and 512.  Upon saving, the hist
file is truncated to R_HISTSIZE lines, which I think is the right thing.

Btw, history_size is not in the history API.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jun 23 10:53:12 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 23 Jun 1999 11:53:12 +0200
Subject: make test/check ["changes in configure (for AIX; .....(PR#209)"]
In-Reply-To: <199906172042.QAA13472@infiniti.ece.cmu.edu> (message from Thomas
 Vogels on Thu, 17 Jun 1999 16:42:18 -0400)
References: <199906172042.QAA13472@infiniti.ece.cmu.edu>
Message-ID: <199906230953.LAA22019@sophie.ethz.ch>

If you have a few minutes time to help R development / testing,
*and* if have more than just a binary version of R, please read on..

>>>>> On Thu, 17 Jun 1999, Thomas Vogels <tov@infiniti.ece.cmu.edu> said:

      <....>

    ToV> "Kurt" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
    Kurt> AIX is not a supported platform yet.

      <....>

    ToV> A final "make test" runs smoothly up to ../../tests/print-tests.R.
    ToV> There are some diffs with the length of printed doubles, like, <
    ToV> [4,] 1.7976931348623157e+308 ---
      >> [4,] 1.797693134862315708145e+308
    ToV> So the printed number in AIX is shorter?  Any comments?


I have been mainly responsible for  print-tests (and other "make test"s w/ R).
Already in the past we have realized that the C libraries which are
implementing printf() *are* quite different in their behavior, unfortunately.
The above difference is from formatC()'s output, and
formatC uses C-formatting (as its name might suggest..).

There are other places which might give C-library-dependent output.
Before I change  tests/print-tests.R (and ...Rout.save) again
(such that "make test" == "make check" runs to completion on AIX),
I'd be very glad if many of you R-users installers could run

    make check

	 [I think this will only work from the top-level of the
	  Source/Installation tree; i.e. is not available for those who 
	  only installed a binary distribution.
	  Redhat/SuSe Speak: you need SRPMS, not only RPMS]

and report --- to me, not all of R-devel ---
in case you DON'T get the final OK of the line
------------------------------------------------------------------------
Comparing `print-tests.Rout' to `./print-tests.Rout.save' ... OK
------------------------------------------------------------------------
	{{In case you don't get OK, please send me the WHOLE FILE
	  tests/Examples/print-tests.Rout.fail }}

Other problems of "make check" should also be reported, 
probably to R-devel maybe to R-bugs (which forwards to R-devel).

On the other hand, if make check runs to completion,
you get something like a benchmark (with all flaws of every benchmark)
of your computer's speed in running R:

  grep '^Time elapsed:' tests/Examples/base-Ex.Rout

              (almost the last line of tests/Examples/base-Ex.Rout)

will give you the CPU (and total..) Time that was needed to execute 
*all* examples in the R base package.

Thank you in advance!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Jun 26 13:23:32 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 26 Jun 1999 14:23:32 +0200
Subject: What is "..."  when it's empty?  -- differences to S
Message-ID: <199906261223.OAA14628@sophie.ethz.ch>

i)       (function(x, ...) length(...))(1)

gives 0 in S (plus 3.4) and an error in R.
It also gives an error in Splus 5.0r3.
So we could well remain as we are... however

ii)	(function(x, ...) length(...))(1,2)

gives 1  in all dialects of S that I have available.
So by my `continuation logic', I'd argue that  "i)" above should give 0
(and R and S-plus 5.0r3 behave inconsistently.

Do we yet have any documentation on "..." ??

In both Splus 3.4 and 5.0r3,
   (function(x, ...) mode(...))(1)	returns "missing"
whereas R gives an interesting error:
    R> trace(mode)
    R> (function(x, ...) mode(...))(1)
    trace: mode(...)
    Error: Argument "x" is missing, with no default

---
What is desired for R?

BTW: Found the above problem when trying to use 
       C(<factor>) without a 2nd argument;  a patch for that will be in the 
       snapshots..

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jun 26 15:53:02 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Jun 1999 16:53:02 +0200
Subject: What is "..."  when it's empty?  -- differences to S
In-Reply-To: Martin Maechler's message of "Sat, 26 Jun 1999 14:23:32 +0200"
References: <199906261223.OAA14628@sophie.ethz.ch>
Message-ID: <x2674b57zl.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> i)       (function(x, ...) length(...))(1)
> 
> gives 0 in S (plus 3.4) and an error in R.
> It also gives an error in Splus 5.0r3.
> So we could well remain as we are... however
> 
> ii)	(function(x, ...) length(...))(1,2)
> 
> gives 1  in all dialects of S that I have available.
> So by my `continuation logic', I'd argue that  "i)" above should give 0
> (and R and S-plus 5.0r3 behave inconsistently.
> 
> Do we yet have any documentation on "..." ??
> 
> In both Splus 3.4 and 5.0r3,
>    (function(x, ...) mode(...))(1)	returns "missing"
> whereas R gives an interesting error:
>     R> trace(mode)
>     R> (function(x, ...) mode(...))(1)
>     trace: mode(...)
>     Error: Argument "x" is missing, with no default
> 
> ---
> What is desired for R?

I don't have S-plus 5.0r3 around, but the two others are consistent
with the result of length(), resp. mode() (with no arguments), both of
which have minor R/S incompatiblities. I see nothing wrong with "...",
but we might consider modifying length() and mode(), both of which
look like one-line if(is.missing(.... changes.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun 27 08:39:51 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 27 Jun 1999 08:39:51 +0100 (BST)
Subject: What is "..."  when it's empty?  -- differences to S
In-Reply-To: <199906261223.OAA14628@sophie.ethz.ch>
Message-ID: <Pine.GSO.4.05.9906270818300.14170-100000@auk.stats>

On Sat, 26 Jun 1999, Martin Maechler wrote:

> i)       (function(x, ...) length(...))(1)
> 
> gives 0 in S (plus 3.4) and an error in R.
> It also gives an error in Splus 5.0r3.
> So we could well remain as we are... however
> 
> ii)	(function(x, ...) length(...))(1,2)
> 
> gives 1  in all dialects of S that I have available.
> So by my `continuation logic', I'd argue that  "i)" above should give 0
> (and R and S-plus 5.0r3 behave inconsistently.

Try 

iii)   (function(x, ...) length(...))(1,2,3)

to see that the continuation logic is false.

I think function(x, ...) length(list(...)) is what one wants here, and they 
(R, 3.4, 5.1) are all consistent on that.  (I see that is what you put in
C.)

> Do we yet have any documentation on "..." ??
> 
> In both Splus 3.4 and 5.0r3,
>    (function(x, ...) mode(...))(1)	returns "missing"
> whereas R gives an interesting error:
>     R> trace(mode)
>     R> (function(x, ...) mode(...))(1)
>     trace: mode(...)
>     Error: Argument "x" is missing, with no default
> 
> ---
> What is desired for R?

I would leave these: none of them seem sensible uses of ... to me.

BTW, NEWS says

    o   C() didn't works (again?) for a single argument

which apart from grammar seems not entirely precise. It looks to me that
it failed if how.many _and_ ... were missing, and that was broken only
once, in 

revision 1.2.2.1
date: 1999/05/05 01:25:24;  author: ripley;  state: Exp;  lines: +4 -3
Add ... args to pass to contr.treatment etc

Also, I do not really like `didn't work': can we try to distinguish
between `failed' (gave an error) and `gave incorrect results'?  
Reason: the second is much more serious.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Jun 29 09:47:14 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 29 Jun 1999 10:47:14 +0200 (MET DST)
Subject: plot(..., lab=..) fails in axis() --- wrong "..." propagation (PR#215)
Message-ID: <199906290847.KAA19501@pubhealth.ku.dk>

> plot(1, lab=c(10,5,7))
Error in axis(side, at, labels, ...) : location and label lengths differ

Reason: lab is one of the "..."  which are passed down to all plots inside
	plot.default, including  axis(1, ...)
	"lab" in axis is interpreted as the "labels" argument
..
Different fixes seem possible,
an easy one:  Make `lab' a new explicit argument of  plot.default().

[I don't have time now]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Jun 29 16:31:40 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 29 Jun 1999 17:31:40 +0200 (CEST)
Subject: [R] Text in Plots
In-Reply-To: <006601bec21d$53f72ae0$54566f83@capc03t.medlan.cam.ac.uk>
References: <006601bec21d$53f72ae0$54566f83@capc03t.medlan.cam.ac.uk>
Message-ID: <14200.59100.382953.315832@galadriel.ci.tuwien.ac.at>


[ taken to r-devel ]

>>>>> On Tue, 29 Jun 1999 11:51:21 +0100,
>>>>> Paul Murrell (PM) wrote:

PM> hi
PM> ---snip---

PM> Dear R-users,
PM> I have two problems:
PM> 1) In producing mathematical notation in plots I can not produce the
PM> italic version of greek symbols. That is
PM>     mtext(text=expression(mu[i]))
PM> gives the same as
PM>     mtext(text=expression(italic(mu[i])))
PM> Is this a bug or a specifity of my machine (R 0.63.2, Linux 2.0.36,
PM> i686)?

PM> 2) I would like to add x and ylabels in boxplots. Is there a way to
PM> do this? I tried:
PM>     bxp(bpdata, xlab="Size Classes", ylab="Cash Flow")
PM> ---snip---

PM> 1)  this is a "feature";  the only available fonts at present are plain,
PM> bold, italic, bolditalic, and symbol.

Hmm, are we sure that this is a "feature"? The most common use for
greek symbols is in equation and the most common word processor for R
users is (hopefully/probably/maybe) LaTeX ... and greek letters in
LaTeX equations are italic ... hence shouldn't we make them available
(if possible)?

But I must admit that I obviously didn't need it before ... :-)


.f


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun 29 17:27:15 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 29 Jun 1999 18:27:15 +0200
Subject: typeof ( substitute(expression(),..) ) -- musings
In-Reply-To: <x290932h11.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 29 Jun 1999 16:55:06 +0200)
References: <199906291258.OAA10869@sophie.ethz.ch> <x290932h11.fsf@blueberry.kubism.ku.dk>
Message-ID: <199906291627.SAA11269@sophie.ethz.ch>

[Relates to  math text / normal text mixing in plots ..]

Peter, I knew you'd know the answer quickly...

Anyway, one needs to be somewhat careful here [R version  pre 0.64.2]:

    typeof(print( e1 <-            expression(a + b))) # expression 
    typeof(print(se1 <- substitute(expression(a + b), list(a = 1)))) # language

    length(e1) # == 1
    length(se1)# == 2

    text.e <- function(x,y,e) {
        text(x,y,paste(deparse(substitute(e)),": "),adj=c(1,0))
	text(x,y,e, adj=0)
    }
    plot(1,type="n", axes= F)
    text.e(1,1.4, e1); text.e(1,1.3, se1); text.e(1,1.2, se1[[2]])

Which shows that you can't use the result of `substitute' directly, but
rather the 2nd element [[which is *still* not an expression !!]]

This is all +- S-plus (3.4) compatible 
     {{some details are NOT compatible; e.g. 
	     as.expression(se1[[2]])
       gives `what you expect' in R, but not in S-plus 3.4 or 5.0r3
     }}

  e1 is an expression	whereas
 se1 is a  call (aka "language" in R).

----
Is this documented anywhere? [blue book; language reference; ?? ]

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 29 19:06:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Jun 1999 20:06:54 +0200
Subject: typeof ( substitute(expression(),..) ) -- musings
In-Reply-To: Martin Maechler's message of "Tue, 29 Jun 1999 18:27:15 +0200"
References: <199906291258.OAA10869@sophie.ethz.ch> <x290932h11.fsf@blueberry.kubism.ku.dk> <199906291627.SAA11269@sophie.ethz.ch>
Message-ID: <x2aeti285d.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> [Relates to  math text / normal text mixing in plots ..]
> 
> Peter, I knew you'd know the answer quickly...
> 
> Anyway, one needs to be somewhat careful here [R version  pre 0.64.2]:

..and the first thing to be careful with is the version, expressions
behave slightly different in 0.65!

> 
>     typeof(print( e1 <-            expression(a + b))) # expression 
>     typeof(print(se1 <- substitute(expression(a + b), list(a = 1)))) # language
> 
>     length(e1) # == 1
>     length(se1)# == 2
> 
>     text.e <- function(x,y,e) {
>         text(x,y,paste(deparse(substitute(e)),": "),adj=c(1,0))
> 	text(x,y,e, adj=0)
>     }
>     plot(1,type="n", axes= F)
>     text.e(1,1.4, e1); text.e(1,1.3, se1); text.e(1,1.2, se1[[2]])
> 
> Which shows that you can't use the result of `substitute' directly, but
> rather the 2nd element [[which is *still* not an expression !!]]

Yes. I forgot. se1 is not an expression object but a call to the
expression() - which evaluates to an expression object, i.e. one needs 

se2 <- eval(substitute(expression(a + b), list(a = 1)))

or you can ditch the expression() bit and use

sc2 <- substitute(a + b, list(a = 1))

which is 1 + b, mode "call" and will work with *most* graphics
operations, but there's a caveat: Sometimes language objects get
evaluated when you don't want them to. The notorious example is the
do.call construction in boxplot/bxp.

> This is all +- S-plus (3.4) compatible 
>      {{some details are NOT compatible; e.g. 
> 	     as.expression(se1[[2]])
>        gives `what you expect' in R, but not in S-plus 3.4 or 5.0r3
>      }}
> 
>   e1 is an expression	whereas
>  se1 is a  call (aka "language" in R).
> 
> ----
> Is this documented anywhere? [blue book; language reference; ?? ]

It will be... (It may be in the blue book, but my fading memory of it
says that it is not all that clear on this particular subject.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Jun 29 21:51:20 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 30 Jun 1999 08:51:20 +1200 (NZST)
Subject: [R] Text in Plots
In-Reply-To: <14200.59100.382953.315832@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.10.9906300837350.21611-100000@stat1.stat.auckland.ac.nz>


On Tue, 29 Jun 1999, Friedrich Leisch wrote:

> 
> [ taken to r-devel ]
> 
> >>>>> On Tue, 29 Jun 1999 11:51:21 +0100,
> >>>>> Paul Murrell (PM) wrote:
> 
> PM> hi
> PM> ---snip---
> 
> PM> Dear R-users,
> PM> I have two problems:
> PM> 1) In producing mathematical notation in plots I can not produce the
> PM> italic version of greek symbols. That is
> PM>     mtext(text=expression(mu[i]))
> PM> gives the same as
> PM>     mtext(text=expression(italic(mu[i])))
> PM> Is this a bug or a specifity of my machine (R 0.63.2, Linux 2.0.36,
> PM> i686)?
> 
> PM> 2) I would like to add x and ylabels in boxplots. Is there a way to
> PM> do this? I tried:
> PM>     bxp(bpdata, xlab="Size Classes", ylab="Cash Flow")
> PM> ---snip---
> 
> PM> 1)  this is a "feature";  the only available fonts at present are plain,
> PM> bold, italic, bolditalic, and symbol.
> 
> Hmm, are we sure that this is a "feature"? The most common use for
> greek symbols is in equation and the most common word processor for R
> users is (hopefully/probably/maybe) LaTeX ... and greek letters in
> LaTeX equations are italic ... hence shouldn't we make them available
> (if possible)?
> 
> But I must admit that I obviously didn't need it before ... :-)

The problem is that the two initial targets for the equation stuff (X11
and PostScript -- do not come with anything other than a plain symbol
font. In principle there is no problem adding italic and bold Greek (and
other symbols), but most devices don't support them (does windows have
bold and italic versions of its symbol font?).

XFig is in a similar situation.

There are publically available Adobe Type1 versions of the TeX computer
modern fonts and this may provide a way of doing math in plots, but I
suspect that plots annotated in computer modern would be pretty ugly.


	Ross

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 30 21:11:18 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 30 Jun 1999 21:11:18 +0100 (BST)
Subject: PLATFORMS
Message-ID: <Pine.GSO.4.05.9906302105320.14-100000@auk.stats>

I would like to get the PLATFORMS file updated: there are very few reports
of successful builds of 0.64.x.  In particular, if there are builds on SGI,
DEC Alpha OSF or AIX (and I believe we have heard of the latter two) please
complete the following (from the end of PLATFORMS) and email to me:

NAME
EMAIL
VERSION         
PLATFORM        
SYSTEM          
CC
FC
MAKE

We do know about Solaris and hpux10.20 and many varieties of Linux on
Intel, but other reports would be welcome. As R-0.64.2 is imminent,
replies today or tommorrow would be especially helpful.

Brian Ripley

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jacobm@magnet.drcmr.dk  Wed Jun  2 09:58:47 1999
From: jacobm@magnet.drcmr.dk (jacobm@magnet.drcmr.dk)
Date: Wed, 2 Jun 1999 10:58:47 +0200 (MET DST)
Subject: RedHat Linux 6.0 Problems (PR#201)
Message-ID: <199906020858.KAA23520@pubhealth.ku.dk>

Full_Name: Jacob Rørbech Marstrand
Version: 63.3
OS: RedHat Linux 6.0
Submission from: (NULL) (129.142.179.3)


I had R running in RedHat Linux 5.2. After updating to RedHat Linux 6.0 I get
the 
following message when I try to start R.
/usr/lib/R/bin/R.binary: error in loading shared libraries:
/usr/lib/R/bin/R.binary: 
undefined symbol: __setfpucw

After that Ive tried to upgrade with the newest RPMS R-0.64.1-4.src.rpm, but it
doesnt 
solve the problem.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  2 10:27:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Jun 1999 11:27:54 +0200
Subject: RedHat Linux 6.0 Problems (PR#201)
In-Reply-To: jacobm@magnet.drcmr.dk's message of "Wed, 2 Jun 1999 10:58:47 +0200 (MET DST)"
References: <199906020858.KAA23520@pubhealth.ku.dk>
Message-ID: <x2wvxnuf39.fsf@blueberry.kubism.ku.dk>

jacobm@magnet.drcmr.dk writes:

> I had R running in RedHat Linux 5.2. After updating to RedHat Linux 6.0 I get
> the 
> following message when I try to start R.
> /usr/lib/R/bin/R.binary: error in loading shared libraries:
> /usr/lib/R/bin/R.binary: 
> undefined symbol: __setfpucw
> 
> After that Ive tried to upgrade with the newest RPMS R-0.64.1-4.src.rpm, but it
> doesnt 
> solve the problem.
> 

Hmmm. Compiling from raw sources might be easier (and is known to work
on at least one system!). 

Anyway, if you're still getting the __setfpucw message when
rebuilding, then I strongly suspect that the .src.rpm contain the
results of a run of "configure" on an RH5.x system, resulting in

/* Some Linux systems may need this */
#define HAVE___SETFPUCW 1

in .../src/include/Platform.h. Perhaps it works to remove that line
and rebuild.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed Jun  2 11:24:43 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 02 Jun 1999 12:24:43 +0200 (CEST)
Subject: RedHat Linux 6.0 Problems (PR#201)
In-Reply-To: <x2wvxnuf39.fsf@blueberry.kubism.ku.dk>
Message-ID: <XFMail.990602122443.plummer@iarc.fr>


On 02-Jun-99 Peter Dalgaard BSA wrote:
> jacobm@magnet.drcmr.dk writes:
> 
>> I had R running in RedHat Linux 5.2. After updating to RedHat Linux 6.0 I
>> get
>> the 
>> following message when I try to start R.
>> /usr/lib/R/bin/R.binary: error in loading shared libraries:
>> /usr/lib/R/bin/R.binary: 
>> undefined symbol: __setfpucw
>> 
>> After that Ive tried to upgrade with the newest RPMS R-0.64.1-4.src.rpm, but
                                                                   ^^^

Did you really rebuild the source rpm, or is this a typo? If the latter, then
this is not an R bug, but a binary incompatibility between RedHat 5.* and 6.0.

> Hmmm. Compiling from raw sources might be easier (and is known to work
> on at least one system!). 
> 
> Anyway, if you're still getting the __setfpucw message when
> rebuilding, then I strongly suspect that the .src.rpm contain the
> results of a run of "configure" on an RH5.x system, resulting in
> 
> /* Some Linux systems may need this */
>#define HAVE___SETFPUCW 1
> 
> in .../src/include/Platform.h. Perhaps it works to remove that line
> and rebuild.

No it doesn't. If you rebuild the source rpm then you run configure.
In fact the build sequence is

./configure
make
make check
make dvi
make install

All the rpm package management stuff is just wrapped around this.
It should not be any different from rebuilding from the pristine source.
In fact I can't understand why the build didn't stop at the make
check stage (There used to be a bug in the Makefile, but I thought this
was fixed now).

I finally have a copy of RedHat 6.0 (although upgrading hasn't gone
too well so far, as usual...) so I should have RH6.0 RPMS out by the
end of the week.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Wed Jun  2 14:02:10 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Wed, 2 Jun 1999 15:02:10 +0200 (MET DST)
Subject: persp box occlusion bug (PR#202)
Message-ID: <199906021302.PAA27137@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Bug in persp() bounding box:
If the surface being plotted extends below the lower z-axis boundary, the box
is
drawn with the wrong occlusion. The box is shown as being occluded by the
surface
even though it should be in front of the surface.

The box is correct for surface extending above the box. Problem is only for
surface extending below the box.

This exhibits the bug:

std<-rep(seq(-32,32,8),9)/1000 * 60
cf<-rep(seq(-32,32,8),rep(9,9))/1000 *60 
dp<-(cf-std)/.6
std<-unique(std)
cf<-unique(cf)
dp<-t(matrix(dp,length(cf),length(std)))
persp(std,cf,dp, xlim=c(-2,2), ylim=c(-2,2), zlim=c(0,5),theta=-40,    
phi=45,
box=TRUE,ltheta=-120, lphi=120,
d=1.5, shade=.7)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun  2 18:23:45 1999
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Wed, 2 Jun 1999 19:23:45 +0200 (MET DST)
Subject: dput and options()$digits (PR#203)
Message-ID: <199906021723.TAA29613@pubhealth.ku.dk>

dput seems to rely on the setting of options()$digits to determine the precision

with which things are written, and the default digits does not seem adequate
(e.g. time series attributes can get truncated enough to make them invalid). A
default for dput of digits=16 would be better.

Paul Gilbert




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jun  3 08:08:16 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 3 Jun 1999 09:08:16 +0200
Subject: dput and options()$digits (PR#203)
In-Reply-To: <199906021723.TAA29613@pubhealth.ku.dk>
 (pgilbert@bank-banque-canada.ca)
References: <199906021723.TAA29613@pubhealth.ku.dk>
Message-ID: <199906030708.JAA00438@sophie.ethz.ch>

>>>>> On Wed, 2 Jun 1999 19:23:45 +0200 (MET DST), pgilbert@bank-banque-canada.ca (Paul Gilbert) said:

    PaulG> dput seems to rely on the setting of options()$digits to
    PaulG> determine the precision with which things are written, and the
    PaulG> default digits does not seem adequate ....

Yes, thank you;
This has been fixed for a while now for the next release (0.65),
[always available as daily snapshot "R-devel..." from CRAN].

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fears@roycastle.liv.ac.uk  Thu Jun  3 14:09:49 1999
From: fears@roycastle.liv.ac.uk (fears@roycastle.liv.ac.uk)
Date: Thu, 3 Jun 1999 15:09:49 +0200 (MET DST)
Subject: very minor Rgui problem in rw0641 (PR#204)
Message-ID: <199906031309.PAA08974@pubhealth.ku.dk>

In Rgui (rw0641) the dialog boxes opened by Help->R(standard interface)
and Help->Apropos have to be closed by actually clicking on OK, rather
than by hitting return. (Once I'm at the keyboard typing in the search
term, return is more natural than going back to the mouse. But maybe I'm
just old-fashioned.)

Is it OK to mention two bugs in one report? After using bug.report('x')
which throws me into a Notepad screen, the Rgui is frozen. I can't
minimize the notepad document and carry on with R. (The main reason to
report this one is to apologise if I got the names of either of the
above menus wrong; I can't check while I'm writing this!). But I can
open other applications, such as Outlook, to copy/paste/send this. As
soon as I kill the notpad document, I'm back in R OK.

I'm using NT4 (that doesn't seem to be obvious from the automatic info
below?)



--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 8
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

********************************************
Dr S.C. Fear
Statistician         Hon. Lecturer
Roy Castle ICLCR     Dept Math. Sci.
200 London Road      University of Liverpool
Liverpool L3 9TA     Liverpool L69 3BX

fears@rc.liv.ac.uk   scf@liv.ac.uk

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fears@roycastle.liv.ac.uk  Thu Jun  3 14:56:15 1999
From: fears@roycastle.liv.ac.uk (fears@roycastle.liv.ac.uk)
Date: Thu, 3 Jun 1999 15:56:15 +0200 (MET DST)
Subject: IE5 html help search failure (PR#205)
Message-ID: <199906031356.PAA09762@pubhealth.ku.dk>

I hesitate to report this one because it is very likely system
dependent, and I have very little faith in my browser. Still, it may
point to something useful for someone to know.

On NT4, after help.start() brings up the web interface just fine
(despite the pessimistic warning on the terminal; is that still
necessary?), I can do apparaently anything in the help system, except
search.

If I'm on the top search page page
(E:\programs\R\rw0641\doc\html\search\SearchEngine.html) and click on
any topic, say 'aplot', I go to 'address'
javascript:searchInIndex%20('%20aplot') and Explorer says 'Done', but
nothing happens. Click on 'Go back' and I get 'No matches for aplot have
been found'.

I've tried several others, and also typing easy terms such as 'plot'
into the dialog box, all to no avail.

Now here's the bit where you might get cross with me. I'm using MS
Internet Explorer 5, and I can't readily confirm the same thing happens
with a standard release such as 4, since our local administrators
decided in their wisdom to remove 4 when they installed 5. And of course
it may be a problem with our local java installation too (or as well).
I'm not in charge of that, but if anyone  can guess as to what might be
set up wrong at least perhaps I can point the IT helpdesk in the right
direction.

Or maybe after all it is actually a bug in the release.

S


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 8
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

********************************************
Dr S.C. Fear
Statistician         Hon. Lecturer
Roy Castle ICLCR     Dept Math. Sci.
200 London Road      University of Liverpool
Liverpool L3 9TA     Liverpool L69 3BX

fears@rc.liv.ac.uk   scf@liv.ac.uk

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it  Thu Jun  3 21:51:15 1999
From: guido@hal.stat.unipd.it (guido@hal.stat.unipd.it)
Date: Thu, 3 Jun 1999 22:51:15 +0200 (MET DST)
Subject: very minor Rgui problem in rw0641 (PR#204)
Message-ID: <199906032051.WAA11959@pubhealth.ku.dk>

On Thu, Jun 03, 1999 at 03:09:49PM +0200, fears@roycastle.liv.ac.uk wrote:
> In Rgui (rw0641) the dialog boxes opened by Help->R(standard interface)
> and Help->Apropos have to be closed by actually clicking on OK, rather
> than by hitting return. (Once I'm at the keyboard typing in the search
> term, return is more natural than going back to the mouse. But maybe I'm
> just old-fashioned.)

  This is a limit ot the toolkit we are using (GraphApp) which
  doesn't let to define a "default button". Brian and I have plans
  to look into this but, please, don't ask when.
  Anyway, keep reporting also this minor points.

> 
> Is it OK to mention two bugs in one report? After using bug.report('x')
> which throws me into a Notepad screen, the Rgui is frozen. I can't
> minimize the notepad document and carry on with R. (The main reason to
> report this one is to apologise if I got the names of either of the
> above menus wrong; I can't check while I'm writing this!). But I can
> open other applications, such as Outlook, to copy/paste/send this. As
> soon as I kill the notpad document, I'm back in R OK.
> 
  In the actual Windows implementation of bug.report, R waits for the editor
  to complete. This is also the Unix behaviour.
  If you don't like it, you should edit the function changing the
  the 'system' call towards the end from
  system(paste(.Options$editor, file))    
  to
  system(paste(.Options$editor, file), wait=FALSE)
  
  The easiest way is to add the revised bug.report function to your 
  .Rprofile or to the system wide rwXXXX/etc/Rprofile so that it will
  replace the actual one (which lives in rwXXXX/library/base/R/base,
  but please, don't modify this file if you are not sure about what you
  are doing).

  Any opinion on making this the default behaviour for next releases ?
  


> I'm using NT4 (that doesn't seem to be obvious from the automatic info
> below?)

  You are right about this. Given the many flavours of Windows around
  Version, machine and friends should report more specific informations.
  This should be easy so, maybe, it will be in the next release.


  guido

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jun  4 16:21:18 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 4 Jun 1999 17:21:18 +0200
Subject: dealing with large objects -- memory wasting ?
Message-ID: <199906041521.RAA14725@sophie.ethz.ch>

Consider the following:

    > gcinfo(TRUE)
    [1] FALSE
    > rm(list=ls()); gc()
	     free  total
    Ncells 135837 250000
    Vcells 747306 786432
	   ------
    > n <- 10000; p <- 20; X <- matrix(rnorm(n*p), n,p); gc()
    Garbage collection [nr. 23]...
    135839 cons cells free (54%)
    4275 Kbytes of heap free (69%)
	     free  total
    Ncells 135829 250000
    Vcells 547299 786432
	   ------
	   which is roughly 200000 less than before;
	   i.e. Vcells are 8-byte sized,
	   1 Vcell = 1 double or 2 integers

  Since we have 747 thousands of them , 
  constructing X the double size (400'000) shouldn't be a problem ...

    > rm(X); n <- 20000; p <- 20; X <- matrix(rnorm(n*p), n,p); gc()
    Garbage collection [nr. 25]...
    135823 cons cells free (54%)
    2713 Kbytes of heap free (44%)

    Error: heap memory (6144 Kb) exhausted [needed 3125 Kb more]
	   See "help(Memory)" on how to increase the heap size.

but it *is*, and it's
matrix' fault.  (it constructs  x, i.e. effectively doubles it's argument).

----

There seem to be worse problems when use 

      var(x)

and x is one of those huge  n x p  matrices...

--------
Of course there are problems like these to be optimized -- ``everywhere''.
Any proposals for a general approach?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun  4 18:14:46 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 04 Jun 1999 19:14:46 +0200 (CEST)
Subject: dealing with large objects -- memory wasting ?
In-Reply-To: <199906041521.RAA14725@sophie.ethz.ch>
Message-ID: <XFMail.990604191446.plummer@iarc.fr>

[Long example of matrix() wasting memory
 by Martin Maechler (MM) snipped]

A minor point perhaps, but  I think there is an error
in your calculations.

If I understand correctly, the problem is that matrix()
assigns a local copy of its answer before returning it.
So  a version which does not do this ...

function (data = NA, nrow = 1, ncol = 1, byrow = FALSE) 
{
    if (missing(nrow)) 
        nrow <- ceiling(length(data)/ncol)
    else if (missing(ncol)) 
        ncol <- ceiling(length(data)/nrow)
    .Internal(matrix(data, nrow, ncol, byrow))
}

should do better 

Using commands like

rm(X); n <- ... ; p <- 20; X <- matrix(rnorm(n*p), n,p); gc()

the largest value of n I could use successfully was about
18000, which still less than what you suggest,

MM> Since we have 747 thousands of them , 
MM> constructing X the double size (400'000) shouldn't be a problem ...

and only 50% greater than what you can do with the standard matrix()
function (n ~ 12000).

I think the answer is that your calculations did not take
into account the argument to matrix - rnorm(n*p) - which
also temporarily takes up as much memory as the final matrix.

With trivial data you can do better:

rm(X); n <- ... ; p <- 20; X <- matrix(0, n,p); gc()

You can assign up to n ~ 37000 with the standard matrix()
function and n ~ 74000 with the modified version, which
is the expected 100% improvement.

MM>There seem to be worse problems when use 
MM>
MM>     var(x)
MM>
MM>and x is one of those huge  n x p  matrices...

I couldn't assign a matrix that was big enough to crash var().
Is there a problem here? The fact that the default value of 
y is x is not a problem because of lazy evaluation.
If you assigned y in the body of the function ...

function (x, y, na.rm = FALSE, use) 
{
    if (missing(y)) 
        y <- x
    if (missing(use)) 
        use <- if (na.rm) 
            "complete.obs"
        else "all.obs"
    cov(x, y, use = use)
}

then you would have problems, but this isn't the case.
What am I missing?

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it  Sat Jun  5 11:01:34 1999
From: guido@hal.stat.unipd.it (guido@hal.stat.unipd.it)
Date: Sat, 5 Jun 1999 12:01:34 +0200 (MET DST)
Subject: IE5 html help search failure (PR#205)
Message-ID: <199906051001.MAA23947@pubhealth.ku.dk>

On Thu, Jun 03, 1999 at 03:56:15PM +0200, fears@roycastle.liv.ac.uk wrote:
> I hesitate to report this one because it is very likely system
> dependent, and I have very little faith in my browser. Still, it may
> point to something useful for someone to know.

  You did the right thing. It was one of my (many?) faults.
  I overlooked the effect of one of the last changes done before
  preparing the release.

> 
> On NT4, after help.start() brings up the web interface just fine
> (despite the pessimistic warning on the terminal; is that still
> necessary?), I can do apparaently anything in the help system, except
> search.

  help.start() uses standard Windows association between file type and
  application,i.e., if html files are not associate to a browser 
  it fails. This is the reason of the warning. I have not looked
  to the source but I suppose that we can modify actual behaviour
  to give the warning only when actual implementation fails.  
                      ~~~~

> 
> If I'm on the top search page page
> (E:\programs\R\rw0641\doc\html\search\SearchEngine.html) and click on
> any topic, say 'aplot', I go to 'address'
> javascript:searchInIndex%20('%20aplot') and Explorer says 'Done', but
> nothing happens. Click on 'Go back' and I get 'No matches for aplot have
> been found'.
> 

  The distribution misses a file used by the search engine. 
  However, at least on my system, it can be generated on the fly executing 
  > link.html.help()
  from a running R process (or from Rgui or from Rterm)
  Indeed, to reproduce the behaviour you reported, I had to
  do a fresh installation. On my "real' installation, since I
  added some packages and runned "link.html.help()", all went well. 


> I've tried several others, and also typing easy terms such as 'plot'
> into the dialog box, all to no avail.
> 
> Now here's the bit where you might get cross with me. I'm using MS
> Internet Explorer 5, and I can't readily confirm the same thing happens
> with a standard release such as 4, since our local administrators
> decided in their wisdom to remove 4 when they installed 5. And of course
> it may be a problem with our local java installation too (or as well).
> I'm not in charge of that, but if anyone  can guess as to what might be
> set up wrong at least perhaps I can point the IT helpdesk in the right
> direction.
> 

  Since we are on the topic (search and version of IE), I noted
  that using IE4 on a Win98 machine, when I click on 'aplot' or
  friends I get two html pages, the first with the rigth informations,
  the second blank. So, I have to click on the "previous page"
  button to look to the results. On the same machine and on the same 
  R installation, if I use Netscape 4.04 as the default browser
  all works as expected (i.e, no 'second' page). So, my
  conclusion in this moment is that the problem is due to the
  IE4 Java VM not to R. I haven't test IE5 but I would be glad to
  know what happens.

  guido










-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From P.Herkenrath@rrz.uni-koeln.de  Sat Jun  5 15:18:44 1999
From: P.Herkenrath@rrz.uni-koeln.de (P.Herkenrath@rrz.uni-koeln.de)
Date: Sat, 5 Jun 1999 16:18:44 +0200 (MET DST)
Subject: seg fault via text() (PR#206)
Message-ID: <199906051418.QAA24546@pubhealth.ku.dk>

Full_Name: Peter Herkenrath
Version: 0.63.1
OS: Linux
Submission from: (NULL) (134.95.88.203)


in *old* R version 0.63.1

foo <- function(...., label=NULL, .....) {
      ....
      plot(....)
      text(x,y,label)
      ....
}

results in a segmentation fault (if label is not initialized by the caller)
bug? 
title() for example is resistent.

best regards
Peter

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jun  5 19:00:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Jun 1999 20:00:53 +0200
Subject: seg fault via text() (PR#206)
In-Reply-To: P.Herkenrath@rrz.uni-koeln.de's message of "Sat, 5 Jun 1999 16:18:44 +0200 (MET DST)"
References: <199906051418.QAA24546@pubhealth.ku.dk>
Message-ID: <x21zfqmsru.fsf@blueberry.kubism.ku.dk>

P.Herkenrath@rrz.uni-koeln.de writes:

> Full_Name: Peter Herkenrath
> Version: 0.63.1
> OS: Linux
> Submission from: (NULL) (134.95.88.203)
> 
> 
> in *old* R version 0.63.1
> 
> foo <- function(...., label=NULL, .....) {
>       ....
>       plot(....)
>       text(x,y,label)
>       ....
> }
> 
> results in a segmentation fault (if label is not initialized by the caller)
> bug? 
> title() for example is resistent.

Still there in 0.64.1 and -patches. The development version has

> foo<-function(label=NULL){plot(0);text(1,0,label)}
> foo()
Error in text(xy.coords(x, y, recycle = TRUE), as.char.or.expr(labels),  : zero length "text" specified

I don't know if it is entended to move that to the patch release
sources.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman@cinternet.net  Sun Jun  6 16:43:34 1999
From: osman@cinternet.net (Osman Buyukisik)
Date: Sun, 6 Jun 1999 11:43:34 -0400
Subject: problem in make for R-devel and R-release
Message-ID: <99060611483600.14170@stargate>

Hello,
 I just got R-devel june3. My machine is  SuSE linux 6.1 pent2 with 64M Ram.
Configure goes well, but make stops and complains install-sh is not found in
tools. There is no "tools" directory! After looking around I found that "aux"
has those files and did sym link. Make worked. 
The same problem is also present the R-release bundle. 
Cheers,
Osman

 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun  6 22:41:26 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Jun 1999 23:41:26 +0200
Subject: problem in make for R-devel and R-release
In-Reply-To: Osman Buyukisik's message of "Sun, 6 Jun 1999 11:43:34 -0400"
References: <99060611483600.14170@stargate>
Message-ID: <x2g145f1mh.fsf@blueberry.kubism.ku.dk>

Osman Buyukisik <osman@cinternet.net> writes:

> Hello,
>  I just got R-devel june3. My machine is  SuSE linux 6.1 pent2 with 64M Ram.
> Configure goes well, but make stops and complains install-sh is not found in
> tools. There is no "tools" directory! After looking around I found that "aux"
> has those files and did sym link. Make worked. 
> The same problem is also present the R-release bundle. 
> Cheers,
> Osman

Sounds like Martin needs to fix his auto-update scripts...

We changed the name of "aux" because it was causing grief on Windows
platforms. I had to sneak sneak a little behind the back of CVS to do
it, and some manual intervention was needed to get the updates right.

Meanwhile, symlinking, or simply renaming aux to tools should work.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun  7 09:35:48 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 7 Jun 1999 10:35:48 +0200
Subject: problem in make for R-devel and R-release
In-Reply-To: <x2g145f1mh.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 06 Jun 1999 23:41:26 +0200)
References: <99060611483600.14170@stargate> <x2g145f1mh.fsf@blueberry.kubism.ku.dk>
Message-ID: <199906070835.KAA03041@sophie.ethz.ch>

>>>>> On 06 Jun 1999 23:41:26 +0200, Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> said:

    PD> Osman Buyukisik <osman@cinternet.net> writes:
    >> Hello, I just got R-devel june3. My machine is SuSE linux 6.1 pent2
    >> with 64M Ram.  Configure goes well, but make stops and complains
    >> install-sh is not found in tools. There is no "tools" directory!
    >> After looking around I found that "aux" has those files and did sym
    >> link. Make worked.  The same problem is also present the R-release
    >> bundle.  Cheers, Osman

    PD> Sounds like Martin needs to fix his auto-update scripts...

Yes, indeed!
things should be ok by tomorrow or so..
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From msa@biostat.mgh.harvard.edu  Mon Jun  7 21:27:11 1999
From: msa@biostat.mgh.harvard.edu (msa@biostat.mgh.harvard.edu)
Date: Mon, 7 Jun 1999 22:27:11 +0200 (MET DST)
Subject: Lines longer than ~1000 chars truncated at parsing (PR#207)
Message-ID: <199906072027.WAA08955@pubhealth.ku.dk>

Full_Name: Marek Ancukiewicz
Version: 0.64.1
OS: Linux (RH 6.0)
Submission from: (NULL) (132.183.12.87)


R seems to be able to parse only lines shorter than approximately 
1000 characters. Anything longer gets truncated:

> x<-c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,!
274,275,276,277,278,279,280,281,282,283)
+ )
> length(x)
[1] 282
> x[282]
[1] 2


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Wed Jun  9 01:17:06 1999
From: ntakebay@bio.indiana.edu (ntakebay@bio.indiana.edu)
Date: Wed, 9 Jun 1999 02:17:06 +0200 (MET DST)
Subject: R correct g77 flags for Linux/Alpha (PR#208)
Message-ID: <199906090017.CAA21185@pubhealth.ku.dk>

Hello,
I was trying to compile R-base-0.64.1 on Linux/Alpha (RedHat 6.0).

It compiled but it couldn't pass the make check (choked with
tests/Examples/modreg-Ex.R).

I used gdb, and it turned out that the src/library/modreg/src/sinerp.f was
the problem.
         else if(j.eq.nk)then
            c1 = 0d0
            c2 = 0d0
            c3 = 0d0
         endif
>         p1ip(1,j) = 0d0- (c1*wjm3(1)+c2*wjm3(2)+c3*wjm3(3))
         p1ip(2,j) = 0d0- (c1*wjm3(2)+c2*wjm2(1)+c3*wjm2(2))

I think wjm3(3) should be 0, but it was set to a really tiny value.

So I gave -mieee for g77, and it solved the problem.

The configure correctly identify the CFLAGS for alpha, but -mieee should
be given to g77, too.  So in configure.in and configure, you should add
the following (I included a patch below)

By the way, I compiled R on PC164SX + 21164PC/533 using egcs-1.1.2.  All
other libraries are Redhat-6.0 default.

--- R-0.64.1/configure.in.orig  Tue Jun  8 19:05:31 1999
+++ R-0.64.1/configure.in       Tue Jun  8 19:06:28 1999
@@ -575,6 +575,7 @@
     ;;
   alpha*linux)
     CFLAGS="-mieee ${CFLAGS}"
+    FFLAGS="-mieee ${FFLAGS}"
     DLLFLAGS=-export-dynamic
     ;;
   *linuxaout)



To the rpm maintainer: You can simply apply the following patch to the
spec file of R-base-0.64.1-5.src.rpm without patching the configure.in
patch.  I also do not know why CFLAGS need to be -O1 instead of -O2??

--- R-base.spec.orig    Tue Jun  8 18:39:31 1999
+++ R-base.spec Tue Jun  8 18:44:00 1999
@@ -70,6 +70,7 @@
 %ifarch alpha
    #Thanks to Nassib Nassar <nassar@etymon.com>
    export CFLAGS="-g -O1"
+   export FFLAGS="-mieee -g -O2"
 %endif
 %ifarch sparc
    export LIBS="-lieee"

Thanks,
Naoki

Naoki Takebayashi     <ntakebay@bio.indiana.edu>
--- Dept. of Biology, Indiana Univeristy, Jordan Hall 142
--- 1001 E. Third St. Bloomington,IN 47405-3700 USA


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun  9 08:46:04 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Jun 1999 09:46:04 +0200 (CEST)
Subject: packages with FORTRAN code
Message-ID: <14174.7100.302238.935889@pc87.maho.magnaeu.com>

Recent sensible changes to the dynload mechanism have made an old
problem resurface:  how should we deal with packages which contain
Fortran code and may need to be linked against additional libraries
such as -lf2c?

The current consensus is that extra Fortran libraries maybe needed are
handled via the make variable FLIBS, and that `-lf2c' or `-lg2c' are
added by default if g77 is used.

This will not solve problems in packages which use their own Makefile
if it does not use FLIBS for building the shared library.  Currently,
this seems to be the case with

	acepack
	akima
	funfits
	growth
	leaps
	tripack

It would be great if the package maintainers could update their pkgs
accordingly.  Most likely, the best solution is to remove the Makefile
altogether.

Thanks
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun  9 08:54:31 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Jun 1999 09:54:31 +0200 (CEST)
Subject: R correct g77 flags for Linux/Alpha (PR#208)
In-Reply-To: <199906090017.CAA21185@pubhealth.ku.dk>
References: <199906090017.CAA21185@pubhealth.ku.dk>
Message-ID: <14174.7607.461924.517034@pc87.maho.magnaeu.com>

>>>>> ntakebay  writes:

> Hello,
> I was trying to compile R-base-0.64.1 on Linux/Alpha (RedHat 6.0).

> It compiled but it couldn't pass the make check (choked with
> tests/Examples/modreg-Ex.R).

> I used gdb, and it turned out that the src/library/modreg/src/sinerp.f was
> the problem.
>          else if(j.eq.nk)then
>             c1 = 0d0
>             c2 = 0d0
>             c3 = 0d0
>          endif
>> p1ip(1,j) = 0d0- (c1*wjm3(1)+c2*wjm3(2)+c3*wjm3(3))
>          p1ip(2,j) = 0d0- (c1*wjm3(2)+c2*wjm2(1)+c3*wjm2(2))

> I think wjm3(3) should be 0, but it was set to a really tiny value.

> So I gave -mieee for g77, and it solved the problem.

> The configure correctly identify the CFLAGS for alpha, but -mieee should
> be given to g77, too.  So in configure.in and configure, you should add
> the following (I included a patch below)

> By the way, I compiled R on PC164SX + 21164PC/533 using egcs-1.1.2.  All
> other libraries are Redhat-6.0 default.

> --- R-0.64.1/configure.in.orig  Tue Jun  8 19:05:31 1999
> +++ R-0.64.1/configure.in       Tue Jun  8 19:06:28 1999
> @@ -575,6 +575,7 @@
>      ;;
>    alpha*linux)
>      CFLAGS="-mieee ${CFLAGS}"
> +    FFLAGS="-mieee ${FFLAGS}"
>      DLLFLAGS=-export-dynamic
>      ;;
>    *linuxaout)

Done for 0.65.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Wed Jun  9 14:18:47 1999
From: jlindsey@alpha.luc.ac.be (Jim Lindsey)
Date: Wed, 9 Jun 1999 15:18:47 +0200 (MET DST)
Subject: packages with FORTRAN code
In-Reply-To: <14174.23554.302077.914375@pc87.maho.magnaeu.com> from "Kurt Hornik" at Jun 9, 99 02:20:18 pm
Message-ID: <199906091318.PAA26169@alpha.luc.ac.be>

> Yes, sure.  You may simply want to include $(R_HOME)/etc/Makeconf which
> has the rule


The following, put in my Makefile, works without the include. (I had
the same without the final $(FLIBS) before.) Will this be OK on other
systems? (The mva and modreg libraries have both the include and the
following rule but without $(FLIBS)???)
  I'm afraid that I don't understand this at all. All of my libraries
have Fortran code. Why pick on growth? When I use $(FLIBS), it just
links f2c into my library whereas it is already linked into R. On my
son's computer with g77, FLIBS is defined, in etc/Makeconf, as a blank
so that nothing occurs for him. (My toms614.c function in my rmutil
library was obtained from f2c. It runs on my son's computer without
f2clib linked in, except for that part of the library built into R.)
  What is the point of all this?

Jim

> 
> $(SHLIB): $(OBJS)
>         $(SHLIBLD) $(SHLIBLDFLAGS) -o $@ $(OBJS) $(FLIBS)
> 
> so you only need to set SHLIB=growth and OBJS to the object files you
> have.
> 
> -k
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun  9 14:53:46 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Jun 1999 15:53:46 +0200 (CEST)
Subject: packages with FORTRAN code
In-Reply-To: <199906091318.PAA26169@alpha.luc.ac.be>
References: <14174.23554.302077.914375@pc87.maho.magnaeu.com>
 <199906091318.PAA26169@alpha.luc.ac.be>
Message-ID: <14174.29162.922143.362849@pc87.maho.magnaeu.com>

>>>>> Jim Lindsey writes:

>> Yes, sure.  You may simply want to include $(R_HOME)/etc/Makeconf which
>> has the rule


> The following, put in my Makefile, works without the include. (I had
> the same without the final $(FLIBS) before.) Will this be OK on other
> systems? (The mva and modreg libraries have both the include and the
> following rule but without $(FLIBS)???)

>   I'm afraid that I don't understand this at all. All of my libraries
> have Fortran code. Why pick on growth? When I use $(FLIBS), it just
> links f2c into my library whereas it is already linked into R. On my
> son's computer with g77, FLIBS is defined, in etc/Makeconf, as a blank
> so that nothing occurs for him. (My toms614.c function in my rmutil
> library was obtained from f2c. It runs on my son's computer without
> f2clib linked in, except for that part of the library built into R.)

>   What is the point of all this?

The point is that there are cases when compiling FORTRAN code with g77
results in unresolved symbols at (dynload) run-time.  What exactly is
going on is not really easy to determine, and e.g. the info pages on g77
are rather vague:

	   The `libf2c' library is distributed with GNU Fortran for the
	convenience of its users, but is not part of GNU Fortran.  It
	contains the procedures needed by Fortran programs while they
	are running. 

	   For example, while code generated by `g77' is likely to do
	additions, subtractions, and multiplications "in line"--in the
	actual compiled code--it is not likely to do trigonometric
	functions this way. 

	   Instead, operations like trigonometric functions are compiled
	by the `f771' compiler (invoked by `g77' when compiling Fortran
	code) into machine code that, when run, calls on functions in
	`libf2c', so `libf2c' must be linked with almost every useful
	program having any component compiled by GNU Fortran.  (As
	mentioned above, the `g77' command takes care of all this for
	you.)

Therefore, it seems to be a good idea to always add `-lf2c' (or `-lg2c')
to FLIBS when using g77.  The most recent 0.65 configure scripts already
do that, so it would be nice if packages were cooperative by simply
using FLIBS.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun  9 15:27:26 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 09 Jun 1999 10:27:26 -0400
Subject: packages with FORTRAN code
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com>
Message-ID: <375E79CE.351209E7@bank-banque-canada.ca>

>It would be great if the package maintainers could update their pkgs
>accordingly.  Most likely, the best solution is to remove the Makefile
>altogether.

I like the idea that I shouldn't have to specify a Makefile (which I mess up
regularly) and R INSTALL will magically work on all platforms. Is this available
already in 0.64.1 or should I wait for 0.65?

Currently with 0.64.1 in Solaris I'm getting    "g77: unrecognized option
`-PIC'" but things seem to work ok. I'm not specifying PIC so I think that it is
being mistakenly added by R INSTALL.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jun  9 16:08:13 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 Jun 1999 17:08:13 +0200 (CEST)
Subject: packages with FORTRAN code
In-Reply-To: <375E79CE.351209E7@bank-banque-canada.ca>
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com>
 <375E79CE.351209E7@bank-banque-canada.ca>
Message-ID: <14174.33629.902099.142359@pc87.maho.magnaeu.com>

>>>>> Paul Gilbert writes:

>> It would be great if the package maintainers could update their pkgs
>> accordingly.  Most likely, the best solution is to remove the Makefile
>> altogether.

> I like the idea that I shouldn't have to specify a Makefile (which I
> mess up regularly) and R INSTALL will magically work on all
> platforms. Is this available already in 0.64.1 or should I wait for
> 0.65?

That should work in 0.64.1.

> Currently with 0.64.1 in Solaris I'm getting "g77: unrecognized option
> `-PIC'" but things seem to work ok. I'm not specifying PIC so I think
> that it is being mistakenly added by R INSTALL.

Very strange.  The configure script has for solaris

    if ${f77_is_g77}; then
      FPICFLAGS=-fPIC
    else
      FPICFLAGS=-PIC
    fi

so maybe your g77 is not recognized as such.  What does

    g77 -v 2>&1

give?

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  9 19:00:14 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jun 1999 20:00:14 +0200
Subject: packages with FORTRAN code
In-Reply-To: Kurt Hornik's message of "Wed, 9 Jun 1999 17:08:13 +0200 (CEST)"
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com> 	<375E79CE.351209E7@bank-banque-canada.ca> <14174.33629.902099.142359@pc87.maho.magnaeu.com>
Message-ID: <x2d7z5l0ep.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> > Currently with 0.64.1 in Solaris I'm getting "g77: unrecognized option
> > `-PIC'" but things seem to work ok. I'm not specifying PIC so I think
> > that it is being mistakenly added by R INSTALL.
> 
> Very strange.  The configure script has for solaris
> 
>     if ${f77_is_g77}; then
>       FPICFLAGS=-fPIC
>     else
>       FPICFLAGS=-PIC
>     fi
> 
> so maybe your g77 is not recognized as such.  What does
> 
>     g77 -v 2>&1
> 
> give?

This is happening on the Auckland machine too, so...

(Methinks you misspelled egrep in:

f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`

which, incidentally looks better as 'GNU F77|egcs|g77')
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun  9 20:11:16 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 09 Jun 1999 15:11:16 -0400
Subject: packages with FORTRAN code
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com>
 <375E79CE.351209E7@bank-banque-canada.ca>
 <14174.33629.902099.142359@pc87.maho.magnaeu.com>
 <375E87FB.D0D60B4@bank-banque-canada.ca> <14174.36840.112601.494758@pc87.maho.magnaeu.com>
Message-ID: <375EBC53.7205FD5E@bank-banque-canada.ca>

Kurt

It seems the old version of f77 that previously caused me problems is now gone,
so I removed my link making f77 use g77, but the problem was not fixed. Also,
changing grep to egrep on the lines:

f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`

in configure and configure.in, as suggested by Peter,  does not seem to have
fixed it.

In re-configuring and re-making R I noticed that it is not just my package which
has this error. It also occurs while making R (bsplvd.f and elsewhere). Below is
my configure and make for R. Configure reports
  FORTRAN compiler:         g77 -O2
but that does not seem to be the way it always gets used.

(Also, configure reports
  C compiler:               gcc -g -O2
but some of the gcc calls add fPIC. That does not seem to generate error
messages.)

Paul
__________
[1] /home/res3/gilp : which egrep
/usr/bin/egrep
[2] /home/res3/gilp : cd R
[3] /home/res3/gilp/R : ls
aclocal.m4      config.status*  demos/          Makeconf.in     PROJECTS
afm/            configure*      doc/            Makefile        README
aux/            configure.in    etc/            Makefile.in     RESOURCES
bin/            configure.mac*  FAQ             Makefrag.etc    src/
BUGS            COPYING         include/        Makefrag.top    TASKS
config.cache    COPYRIGHTS      INSTALL         MIRROR-SITES    tests/
config.log      date-stamp      library/        NEWS            Y2K
config.site     debian/         Makeconf        PLATFORMS
[4] /home/res3/gilp/R : grep "f77_output" *
configure:    f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`
configure:    if test -n "${f77_output}"; then
configure.in:    f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`
configure.in:    if test -n "${f77_output}"; then
[5] /home/res3/gilp/R : cd ..
[6] /home/res3/gilp/R-versions : ls
R-0.63.1.tar        R-0.63.3.tar        R-0.64.1.f77tog77/  R-release.tar
R-0.63.2/           R-0.64.0/           R-0.64.1.tar
R-0.63.2.tar        R-0.64.0.tar        R-release/
R-0.63.3/           R-0.64.1/           R-release.old/
[7] /home/res3/gilp/R-versions : rm -rf R-0.64.1
[8] /home/res3/gilp/R-versions : tar -xf R-0.64.1.tar
[9] /home/res3/gilp/R-versions : cd ../R
[10] /home/res3/gilp/R : te configure &
[1] 1354
[11] /home/res3/gilp/R : te configure.in &
[2] 1355
[1]    Done                 textedit configure
[12] /home/res3/gilp/R :
[2]    Done                 textedit configure.in
[12] /home/res3/gilp/R :
[12] /home/res3/gilp/R :
[12] /home/res3/gilp/R : ./configure
creating cache ./config.cache
checking for a BSD compatible install... aux/install-sh -c
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for bison... no
checking for byacc... no
checking for ar... ar
checking for latex... /apps/res/bin/latex
checking for dvips... /apps/res/bin/dvips
checking for makeindex... false
checking for unzip... /apps/res/bin/unzip
checking for zip... no
checking for perl... /usr/bin/perl
checking whether perl is perl 5... yes
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for g77... /home/res/public/gnu/sun5.6/bin/g77
checking for underscore after Fortran symbols... yes
checking for sin in -lm... yes
checking for sin in -lmoto... no
checking for main in -lncurses... no
checking for main in -ltermcap... yes
checking for dlopen in -ldl... yes
checking for main in -lz... no
checking for main in -lhdf5... no
checking for main in -ldxml... no
checking for main in -lblas... no
checking for rl_callback_read_char in -lreadline... no
checking how to run the C preprocessor... gcc -E
checking for ANSI C header files... yes
checking for pid_t... yes
checking for vfork.h... no
checking for working vfork... yes
checking for vprintf... yes
checking for acosh... yes
checking for asinh... yes
checking for atanh... yes
checking for bcopy... yes
checking for finite... yes
checking for isfinite... no
checking for isnan... yes
checking for matherr... yes
checking for memcpy... yes
checking for memmove... yes
checking for regcomp... yes
checking for rint... yes
checking for strcoll... yes
checking for strtod... yes
checking for strtol... yes
checking for system... yes
checking for times... yes
checking for sigsetjmp... yes
checking for siglongjmp... yes
checking for __setfpucw... no
checking for ANSI C header files... (cached) yes
checking for dl.h... no
checking for dlfcn.h... yes
checking for elf.h... yes
checking for locale.h... yes
checking for readline/history.h... no
checking for rpc/xdr.h... yes
checking for sys/times.h... yes
checking for time.h... yes
checking for ieeefp.h... yes
checking for ieee754.h... no
checking for unistd.h... yes
checking for hdf5.h... no
checking return type of signal handlers... void
checking for working const... yes
checking size of long... 4
checking for xmkmf... /usr/openwin/bin/xmkmf
checking how to make shared libraries... done
checking for X... libraries /usr/openwin/lib, headers /usr/openwin/include
checking whether -R must be followed by a space... no
checking for dnet_ntoa in -ldnet... no
checking for dnet_ntoa in -ldnet_stub... no
checking for gethostbyname... no
checking for gethostbyname in -lnsl... yes
checking for connect... no
checking for connect in -lsocket... yes
checking for remove... yes
checking for shmat... yes
checking for IceConnectionNumber in -lICE... yes
checking for lpr... lpr
updating cache ./config.cache
creating ./config.status
creating Makeconf
creating Makefile
creating afm/Makefile
creating demos/Makefile
creating doc/Makefile
creating doc/keyword-test
creating doc/manual/Makefile
creating doc/manual/lib2tex
creating doc/manual/Reference.tex
creating doc/manual/Manual.tex
creating etc/Makefile
creating etc/Makeconf
creating src/Makefile
creating src/appl/Makefile
creating src/include/Makefile
creating src/library/Makefile
creating src/main/Makefile
creating src/nmath/Makefile
creating src/scripts/Makefile
creating src/unix/Makefile
creating src/gnome/Makefile
creating src/library/base/Makefile
creating src/library/profile/Makefile
creating src/library/eda/Makefile
creating src/library/eda/src/Makefile
creating src/library/lqs/Makefile
creating src/library/lqs/src/Makefile
creating src/library/modreg/Makefile
creating src/library/modreg/src/Makefile
creating src/library/mva/Makefile
creating src/library/mva/src/Makefile
creating src/library/stepfun/Makefile
creating src/scripts/COMPILE
creating src/scripts/INSTALL
creating src/scripts/REMOVE
creating src/scripts/R.sh
creating src/scripts/Rdconv
creating src/scripts/Rdindex
creating src/scripts/Rman2Rd
creating src/scripts/SHLIB
creating src/scripts/Sd2Rd
creating src/scripts/build-help
creating src/scripts/fwf2table
creating src/scripts/help.pretty
creating src/scripts/html2dos
creating src/scripts/Rd2contents
creating tests/Makefile
creating tests/Examples/Makefile
creating src/include/Platform.h


R is now configured for sparc-sun-solaris2.6

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc -g -O2
  FORTRAN compiler:         g77 -O2
  Gnome support:            no

[13] /home/res3/gilp/R : make
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/afm'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/afm'
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/demos'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/demos'
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/doc'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/doc'
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/etc'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/etc'
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/include'
../../aux/GETSYMBOLS
mkdir ../../include
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/include'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/appl'
gcc -g -O2 -I../include -I../../src/include  -c S_compat.c -o S_compat.o
gcc -g -O2 -I../include -I../../src/include  -c approx.c -o approx.o
gcc -g -O2 -I../include -I../../src/include  -c bakslv.c -o bakslv.o
gcc -g -O2 -I../include -I../../src/include  -c binning.c -o binning.o
g77 -O2 -c blas.f -o blas.o
g77 -O2 -c ch2inv.f -o ch2inv.o
g77 -O2 -c chol.f -o chol.o
gcc -g -O2 -I../include -I../../src/include  -c chull.c -o chull.o
gcc -g -O2 -I../include -I../../src/include  -c cpoly.c -o cpoly.o
gcc -g -O2 -I../include -I../../src/include  -c cumsum.c -o cumsum.o
gcc -g -O2 -I../include -I../../src/include  -c distance.c -o distance.o
g77 -O2 -c dpbfa.f -o dpbfa.o
g77 -O2 -c dpbsl.f -o dpbsl.o
g77 -O2 -c dpoco.f -o dpoco.o
g77 -O2 -c dpodi.f -o dpodi.o
g77 -O2 -c dpofa.f -o dpofa.o
g77 -O2 -c dposl.f -o dposl.o
g77 -O2 -c dqrdc.f -o dqrdc.o
g77 -O2 -c dqrdc2.f -o dqrdc2.o
g77 -O2 -c dqrls.f -o dqrls.o
g77 -O2 -c dqrsl.f -o dqrsl.o
g77 -O2 -c dqrutl.f -o dqrutl.o
g77 -O2 -c dsvdc.f -o dsvdc.o
g77 -O2 -c dtrco.f -o dtrco.o
g77 -O2 -c dtrsl.f -o dtrsl.o
g77 -O2 -c eigen.f -o eigen.o
gcc -g -O2 -I../include -I../../src/include  -c fortran.c -o fortran.o
gcc -g -O2 -I../include -I../../src/include  -c fft.c -o fft.o
g77 -O2 -c fmin.f -o fmin.o
g77 -O2 -c lminfl.f -o lminfl.o
gcc -g -O2 -I../include -I../../src/include  -c loglin.c -o loglin.o
gcc -g -O2 -I../include -I../../src/include  -c lowess.c -o lowess.o
gcc -g -O2 -I../include -I../../src/include  -c machar.c -o machar.o
gcc -g -O2 -I../include -I../../src/include  -c massdist.c -o massdist.o
gcc -g -O2 -I../include -I../../src/include  -c pretty.c -o pretty.o
gcc -g -O2 -I../include -I../../src/include  -c pythag.c -o pythag.o
gcc -g -O2 -I../include -I../../src/include  -c rowsum.c -o rowsum.o
gcc -g -O2 -I../include -I../../src/include  -c splines.c -o splines.o
gcc -g -O2 -I../include -I../../src/include  -c stem.c -o stem.o
gcc -g -O2 -I../include -I../../src/include  -c strsignif.c -o strsignif.o
gcc -g -O2 -I../include -I../../src/include  -c tabulate.c -o tabulate.o
g77 -O2 -c uncmin.f -o uncmin.o
g77 -O2 -c zeroin.f -o zeroin.o
ar cr libappl.a S_compat.o approx.o bakslv.o binning.o blas.o ch2inv.o chol.o
chull.o cpoly.o cumsum.o distance.o dpbfa.o dpbsl.o dpoco.o dpodi.o dpofa.o
dposl.o dqrdc.o dqrdc2.o dqrls.o dqrsl.o dqrutl.o dsvdc.o dtrco.o dtrsl.o
eigen.o fortran.o fft.o fmin.o lminfl.o loglin.o lowess.o machar.o massdist.o
pretty.o pythag.o rowsum.o splines.o stem.o strsignif.o tabulate.o uncmin.o
zeroin.o
ranlib libappl.a
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/appl'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/nmath'
gcc -g -O2 -I../include -I../../src/include  -c mlutils.c -o mlutils.o
...
gcc -g -O2 -I../include -I../../src/include  -c signrank.c -o signrank.o
ar cr libmath.a mlutils.o d1mach.o i1mach.o fmax2.o fmin2.o fmod.o fprec.o
fround.o ftrunc.o sign.o fsign.o fsquare.o fcube.o imax2.o imin2.o chebyshev.o
logrelerr.o lgammacor.o gammalims.o gamma.o lgamma.o gamma_cody.o beta.o lbeta.o
polygamma.o bessel_i.o bessel_j.o bessel_k.o bessel_y.o choose.o snorm.o sunif.o
sexp.o dgamma.o pgamma.o qgamma.o rgamma.o dbeta.o pbeta.o qbeta.o rbeta.o
dunif.o punif.o qunif.o runif.o dnorm.o pnorm.o qnorm.o rnorm.o dlnorm.o
plnorm.o qlnorm.o rlnorm.o df.o pf.o qf.o rf.o dt.o pt.o qt.o rt.o dchisq.o
pchisq.o qchisq.o rchisq.o dbinom.o pbinom.o qbinom.o rbinom.o dcauchy.o
pcauchy.o qcauchy.o rcauchy.o dexp.o pexp.o qexp.o rexp.o dgeom.o pgeom.o
qgeom.o rgeom.o dhyper.o phyper.o qhyper.o rhyper.o dnbinom.o pnbinom.o
qnbinom.o rnbinom.o dpois.o ppois.o qpois.o rpois.o dweibull.o pweibull.o
qweibull.o rweibull.o dlogis.o plogis.o qlogis.o rlogis.o dnchisq.o pnchisq.o
qnchisq.o dnbeta.o pnbeta.o pnf.o pnt.o ptukey.o qtukey.o wilcox.o signrank.o
ranlib libmath.a
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/nmath'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/unix'
gcc -g -O2 -I/usr/openwin/include -I../include -I../../src/include  -c
dataentry.c
gcc -g -O2 -I../include -I../../src/include  -c devPS.c -o devPS.o
gcc -g -O2 -I../include -I../../src/include  -c devPicTeX.c -o devPicTeX.o
gcc -g -O2 -I/usr/openwin/include -I../include -I../../src/include  -c devX11.c
gcc -g -O2 -I../include -I../../src/include  -c dynload.c -o dynload.o
gcc -g -O2 -I../include -I../../src/include  -c edit.c -o edit.o
gcc -g -O2 -I/usr/openwin/include -I../include -I../../src/include  -c rotated.c

gcc -g -O2 -I../include -I../../src/include  -c system.c -o system.o
gcc -g -O2 -I../include -I../../src/include  -c Rsock.c -o Rsock.o
gcc -g -O2 -I../include -I../../src/include  -c sock.c -o sock.o
ar cr libunix.a dataentry.o devPS.o devPicTeX.o devX11.o dynload.o edit.o
rotated.o system.o Rsock.o sock.o
ranlib libunix.a
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/unix'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/main'
gcc -g -O2 -I../include -I../../src/include  -c arithmetic.c -o arithmetic.o
...
gcc -g -O2 -I../include -I../../src/include  -c version.c -o version.o
mkdir ../../bin
g77  -o ../../bin/R.binary arithmetic.o array.o attrib.o bind.o builtin.o
character.o coerce.o colors.o complex.o context.o cov.o cum.o debug.o deparse.o
deriv.o devices.o dotcode.o dstruct.o duplicate.o envir.o errors.o eval.o
format.o fourier.o gram.o gram-ex.o graphics.o iosupport.o list.o logic.o main.o
match.o memory.o model.o names.o objects.o optimize.o options.o par.o paste.o
platform.o plot.o plot3d.o plotmath.o print.o printarray.o printvector.o
printutils.o random.o relop.o saveload.o scan.o seq.o sort.o source.o split.o
subassign.o subscript.o subset.o summary.o unique.o util.o version.o
../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE
-L/usr/openwin/lib -R/usr/openwin/lib -lX11 -lsocket  -lnsl -ldl -ltermcap -lm
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/main'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/scripts'
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/scripts'
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
mkdir ../../library
make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/base'
Building R base package
mkdir ../../../library/base
mkdir ../../../library/base/R
mkdir ../../../library/base/data
make[3]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/base'
make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/eda'
mkdir ../../../library/eda
mkdir ../../../library/eda/R
make[4]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/eda/src'
gcc -g -O2 -fPIC -I../../../../include -c line.c -o line.o
gcc -g -O2 -fPIC -I../../../../include -c smooth.c -o smooth.o
ld -G -o eda.so line.o smooth.o
mkdir ../../../../library/eda/libs
make[4]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/eda/src'
make[3]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library/eda'

make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/lqs'
mkdir ../../../library/lqs
mkdir ../../../library/lqs/R
make[4]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/lqs/src'
gcc -g -O2 -fPIC -I../../../../include -c lqs.c -o lqs.o
ld -G -o lqs.so lqs.o
mkdir ../../../../library/lqs/libs
make[4]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/lqs/src'
make[3]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library/lqs'

make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg'
mkdir ../../../library/modreg
mkdir ../../../library/modreg/R
mkdir ../../../library/modreg/data
make[4]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg/src'
g77 -O2 -PIC -c bsplvd.f -o bsplvd.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c bvalue.f -o bvalue.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c bvalus.f -o bvalus.o
g77: unrecognized option `-PIC'
gcc -g -O2 -fPIC -I../../../../include -c ksmooth.c -o ksmooth.o
gcc -g -O2 -fPIC -I../../../../include -c loessc.c -o loessc.o
g77 -O2 -PIC -c loessf.f -o loessf.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c ppr.f -o ppr.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c qsbart.f -o qsbart.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c sbart.f -o sbart.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c sgram.f -o sgram.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c sinerp.f -o sinerp.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c sslvrg.f -o sslvrg.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c stxwx.f -o stxwx.o
g77: unrecognized option `-PIC'
../../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o ksmooth.o
loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvrg.o stxwx.o
make[5]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg/src'
ld -G -o modreg.so bsplvd.o bvalue.o bvalus.o ksmooth.o loessc.o loessf.o ppr.o
qsbart.o sbart.o sgram.o sinerp.o sslvrg.o stxwx.o
make[5]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg/src'
mkdir ../../../../library/modreg/libs
make[4]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg/src'
make[3]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/modreg'
make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/mva'
mkdir ../../../library/mva
mkdir ../../../library/mva/R
make[4]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/mva/src'
gcc -g -O2 -fPIC -I../../../../include -c dblcen.c -o dblcen.o
g77 -O2 -PIC -c hclust.f -o hclust.o
g77: unrecognized option `-PIC'
g77 -O2 -PIC -c kmns.f -o kmns.o
g77: unrecognized option `-PIC'
ld -G -o mva.so dblcen.o hclust.o kmns.o
mkdir ../../../../library/mva/libs
make[4]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/mva/src'
make[3]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library/mva'

make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/stepfun'
mkdir ../../../library/stepfun
mkdir ../../../library/stepfun/R
make[3]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/stepfun'
make[3]: Entering directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/profile'
Building system startup profile
make[3]: Leaving directory
`/home/res3/gilp/R-versions/R-0.64.1/src/library/profile'
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src'
You should `make docs' now ...
make[1]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
Building ALL documentation (help, HTML, LaTeX, examples)
make[2]: Entering directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
 >>> Building/Updating help pages for package `base'
     Formats: text html latex example
  Arithmetic                        text    html    latex   example
  BATCH                             text    html    latex
...
  stepfun                           text    html    latex   example
make[2]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
make[1]: Leaving directory `/home/res3/gilp/R-versions/R-0.64.1/src/library'
[14] /home/res3/gilp/R :

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  9 23:06:20 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Jun 1999 00:06:20 +0200
Subject: packages with FORTRAN code
In-Reply-To: Paul Gilbert's message of "Wed, 09 Jun 1999 15:11:16 -0400"
References: <14174.7100.302238.935889@pc87.maho.magnaeu.com> 		<375E79CE.351209E7@bank-banque-canada.ca> 		<14174.33629.902099.142359@pc87.maho.magnaeu.com> 		<375E87FB.D0D60B4@bank-banque-canada.ca> <14174.36840.112601.494758@pc87.maho.magnaeu.com> <375E
Message-ID: <x2n1y9hvvn.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> It seems the old version of f77 that previously caused me problems is now gone,
> so I removed my link making f77 use g77, but the problem was not fixed. Also,
> changing grep to egrep on the lines:
> 
> f77_output=`${F77} -v 2>&1 | grep "GNU F77\|egcs\|g77"`
> 
> in configure and configure.in, as suggested by Peter,  does not seem to have
> fixed it.
> 

One doesn't want the \-s in there either: egrep "GNU F77|egcs|g77"

This does seem to work giving  g77 -fPIC etc.

However, my checked-out sources at Auckland now tries to link .so's
with

ld -G  .... -lg2c

and fails because libg2c.a is located way down in the gcc-libs.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jun 10 08:09:08 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 10 Jun 1999 09:09:08 +0200 (CEST)
Subject: [R] R on AIX (>4.2)
In-Reply-To: <199906100647.IAA00865@sophie.ethz.ch>
References: <199906092155.RAA29434@infiniti.ece.cmu.edu>
 <199906100647.IAA00865@sophie.ethz.ch>
Message-ID: <14175.25748.342750.147064@galadriel.ci.tuwien.ac.at>



[Taken to r-devel]

I tried 1-2 months ago to get R running on AIX ... besides some minor
things which I fixed in the sources everything compiled fine except
the dynloading :-)

It also seemed feasible to get dynloading to work, but you need a text
file containing the names of all objects a .so file wants to
export. As I didn't see an easy way of doing this at INSTALL time for
all our extension packages and wasn't in desperate need of R on AIX I
gave up at that point. I had also contact with people from essen on
this, and they also had no automatic procedure (like a Makefile fix or
so).

Look in the devel mail archives around may, there is a thread on AIX
where Arne Kovac explains the proper linker flags ... you might also
want to contact him to get their dynload.c. 

Fritz




>>>>> On Thu, 10 Jun 1999 08:47:55 +0200,
>>>>> Martin Maechler (MM) wrote:

MM> [Subject above:  You probably mean, ">= 4.2" right ?]
>>>>> "TomV" == Thomas Vogels <tov@infiniti.ece.cmu.edu> writes:

TomV> I'm determined to get R compiling & running on a machine
TomV> running AIX 4.2.
MM> Great!   
MM> Thank you in advance.

TomV> I've seen previous emails in the archive about
TomV> this topic.  The main obstacle is getting dynamic loading to
TomV> work, but it works for Tcl and hence is feasable.

MM> yes and yes.

TomV> Questions:
TomV> - is anybody _currently_ working with R on AIX?  
MM> don't know
TomV> - why have previous fixes to the sources not been introduced into
TomV> the released versions?
MM> I think we have never seen fixes patchable into the main sources.
MM> The only place I've heard that got it working was  uni-essen.de
MM> and they seem to have used an almost completely different version of
MM> src/unix/dynload.c  from Heiner Schwarte
MM> (and I think I've never seen their version..).

MM> Yes, it would really be great if this problem could finally be solved!

MM> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
MM> Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
MM> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
MM> phone: x-41-1-632-3408		fax: ...-1086			<><
MM> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
MM> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
MM> Send "info", "help", or "[un]subscribe"
MM> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
MM> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Arne.Kovac@uni-essen.de  Thu Jun 10 08:23:10 1999
From: Arne.Kovac@uni-essen.de (Arne Kovac)
Date: Thu, 10 Jun 1999 09:23:10 +0200 (DFT)
Subject: [R] R on AIX (>4.2)
In-Reply-To: <199906100647.IAA00865@sophie.ethz.ch>
Message-ID: <Pine.A41.4.02.9906100918350.14566-100000@cauchy.mathematik.uni-essen.de>

On Thu, 10 Jun 1999, Martin Maechler wrote:

> I think we have never seen fixes patchable into the main sources.
> The only place I've heard that got it working was  uni-essen.de
> and they seem to have used an almost completely different version of
> src/unix/dynload.c  from Heiner Schwarte
> (and I think I've never seen their version..).
> 
> Yes, it would really be great if this problem could finally be solved!

I agree that this would really be great. I have sent a modified dynload.c
to r-devel recently. Does anybody want me to repost it (Tom?)?

Arne

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From beimfohr@statistik.uni-dortmund.de  Thu Jun 10 12:52:03 1999
From: beimfohr@statistik.uni-dortmund.de (beimfohr@statistik.uni-dortmund.de)
Date: Thu, 10 Jun 1999 13:52:03 +0200 (MET DST)
Subject: Compilation fails (PR#209)
Message-ID: <199906101152.NAA04445@pubhealth.ku.dk>

Full_Name: Frank Beimfohr
Version: 0.64.1, devel.
OS: Solaris 2.5.1
Submission from: (NULL) (129.217.131.31)


I try to compile R on my Sparc 4 (Solaris 2.5.1) but the compilation fails. I
tried 
the developer-version and the contributed 0.64.1-Version.
I start configure with the --g77-Option. During the compilation it stops with an

error, which says that the R/src/library/modreg/src/bsplvd.f isn't a valid 
Fortran77-File. Then, I installed f2c. But the compilation fails again with the
message:

gcc: unrecognized option `-PIC'
./../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o ksmooth.o
loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvrg.o stxwx.o
Usage : make [ -f makefile ]... [ -d ][ -dd ][ -D ][ -DD ][ -e ][ -i ][ -k ]
             [ -K statefile ][ -n ][ -p ][ -P ][ -q ][ -r ][ -s ][ -S ][ -t ]
             [ -V ][ target ... ][ macro=value... ]
make: Fatal error: Unknown option `-w'
gmake[4]: *** [modreg.so] Error 1
gmake[4]: Leaving directory `/sw/sun4_55/R-0.64.1a/src/library/modreg/src'

I don't know what to do now...

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Arne.Kovac@uni-essen.de  Thu Jun 10 15:02:31 1999
From: Arne.Kovac@uni-essen.de (Arne Kovac)
Date: Thu, 10 Jun 1999 16:02:31 +0200 (DFT)
Subject: dynload for R on AIX (>= 4.2)
In-Reply-To: <14175.31960.993123.79902@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.A41.4.02.9906101559040.12136-100000@cauchy.mathematik.uni-essen.de>

On Thu, 10 Jun 1999, Friedrich Leisch wrote:

> Yes, if I understood AIX workings correct you have to have a text file
> of to-be-exported symbols at the time of linking a shared library,
> i.e. the linker is called like (this is pasted from a mail by Arne)
> 
> $(F77) -o module.so -bM:SRE -bE:module.exp -bnoentry $(OBJECTS) $(LIBDIR) $(LIBS)
> 
> where module.exp is a text file containing the names of symbols to be
> exported by module.so

I think you can skip creating the text file by changing the command line
options to

$(F77) -o module.so -bM:SRE -bexpall -bnoentry $(OBJECTS) $(LIBDIR)
$(LIBS)

ie replacing the -bE:module.exp option by -bexpall. This option is only
available in AIX 4.2 and later. I have just tried it and it appears to
work for me.

Maybe we are really getting somewhere!!

Arne



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jun 10 15:56:32 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 10 Jun 1999 16:56:32 +0200 (CEST)
Subject: Compilation fails (PR#209)
In-Reply-To: <199906101152.NAA04445@pubhealth.ku.dk>
References: <199906101152.NAA04445@pubhealth.ku.dk>
Message-ID: <14175.53792.372453.501560@pc87.maho.magnaeu.com>

>>>>> beimfohr  writes:

> Full_Name: Frank Beimfohr
> Version: 0.64.1, devel.
> OS: Solaris 2.5.1
> Submission from: (NULL) (129.217.131.31)


> I try to compile R on my Sparc 4 (Solaris 2.5.1) but the compilation
> fails. I tried the developer-version and the contributed
> 0.64.1-Version.  I start configure with the --g77-Option. During the
> compilation it stops with an

> error, which says that the R/src/library/modreg/src/bsplvd.f isn't a
> valid Fortran77-File. Then, I installed f2c. But the compilation fails
> again with the message:

> gcc: unrecognized option `-PIC'

which should not be there.

Can you pls send

* the exact configure and make command you issued

* the final output of configure, such as

R is now configured for i586-unknown-linux

  Source directory:         /home/Hornik/src/apps/R/r-devel/R
  Installation directory:   /usr/local
  C compiler:               gcc -O2 -g -Wall
  FORTRAN compiler:         g77 -O2
  Gnome support:            no

Thanks

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 10 16:07:36 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Thu, 10 Jun 1999 11:07:36 -0400
Subject: running R on AIX (>= 4.2)
Message-ID: <199906101507.LAA03628@infiniti.ece.cmu.edu>


(Was: r-help -- dynload for R on AIX)

Thanks for all the responses.  Let's see:

  - I found the dynload.c posted by Arne (April 99, I believe).  If
    the difference to the current version of dynload.c is too big,
    then the current dynload.c is a better starting point.  Otherwise
    #ifdef's won't be feasible.

  - One problem appears to be the list of exported symbols.  Tcl's
    ldAix can do this job.  It needs a little help, however.

  - I'm unaware of weaknesses or strengths of the compilers shipped
    with AIX.  Any preference for the duo xlc/xlf or cc/f77?  (Yes,
    they look like they're same thing, but NO, they act differently.)

  - Hmm, why did I want to get R on AIX?  Ah, I couldn't get S-plus to
    load the VR library.  It's nice to have the sources...


  -tom


P.S. Due to my current setup, response to email is measured in hours.
So don't worry if you don't immediately hear from me.


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Arne.Kovac@uni-essen.de  Thu Jun 10 16:51:01 1999
From: Arne.Kovac@uni-essen.de (Arne Kovac)
Date: Thu, 10 Jun 1999 17:51:01 +0200 (DFT)
Subject: running R on AIX (>= 4.2)
In-Reply-To: <199906101507.LAA03628@infiniti.ece.cmu.edu>
Message-ID: <Pine.A41.4.02.9906101739520.15678-100000@cauchy.mathematik.uni-essen.de>

On Thu, 10 Jun 1999, Thomas Vogels wrote:

>   - One problem appears to be the list of exported symbols.  Tcl's
>     ldAix can do this job.  It needs a little help, however.

I don't think you need this anymore - just use -bexapll for the linker.

>   - I'm unaware of weaknesses or strengths of the compilers shipped
>     with AIX.  Any preference for the duo xlc/xlf or cc/f77?  (Yes,
>     they look like they're same thing, but NO, they act differently.)

There is a lot of discussion going on about the new library format in AIX
4.3.x. I have experienced a lot of problems with IBM's compiler duo and
usually use egcs. My impression is that using gcc or egcs might facilitate
porting anyway, since a lot of people compile R with these compilers on
other platforms.

>   - Hmm, why did I want to get R on AIX?  Ah, I couldn't get S-plus to
>     load the VR library.  It's nice to have the sources...

If my memories are right, then the shipping S-Plus for AIX was compiled on
a very old AIX version (3.2.5) with an odd version of the compiler. Thus,
there are some problems with loading object code dynamically.

Arne


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 10 20:56:16 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Thu, 10 Jun 1999 15:56:16 -0400
Subject: dynload for R on AIX (>= 4.2)
In-Reply-To: Your message of "Thu, 10 Jun 1999 16:02:31 EDT."
 <Pine.A41.4.02.9906101559040.12136-100000@cauchy.mathematik.uni-essen.de>
Message-ID: <199906101956.PAA23332@infiniti.ece.cmu.edu>


"Arne" == Arne Kovac <kovac@cauchy.mathematik.uni-essen.de> writes:

Arne> I think you can skip creating the text file by changing the command line
Arne> options to
Arne> 
Arne> $(F77) -o module.so -bM:SRE -bexpall -bnoentry $(OBJECTS) $(LIBDIR)
Arne> $(LIBS)

Uh, works, kind of... 

| build/src/library/eda/src $ f77 -o eda.so -bM:SRE -bexpall -bnoentry line.o smooth.o 
| ld: 0711-317 ERROR: Undefined symbol: .rsort
| ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more
| information.

The problem is that rsort is defined in sort.c.  So I put all the R
files in src/main into a library:

| build/src/main $ ar cr libR.a *.o

And run the linker again:

| build/src/library/eda/src $ f77 -o eda.so -bM:SRE -bexpall -bnoentry
| line.o smooth.o -L../../../main -lR  -L../../../unix -lunix
| -L../../../appl -lappl -L../../../nmath -lmath -lX11 -ldl -lblas

No error messages this time, but eda.so is big: 3020844 bytes.

Something ain't right here.  There should be a way of telling the
linker to not include the libs.  It should verify that all functions that
are referenced will be defined at runtime.  Comments?

  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Fri Jun 11 20:15:33 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Fri, 11 Jun 1999 15:15:33 -0400
Subject: dynload for R on AIX (>= 4.2)
Message-ID: <199906111915.PAA14180@infiniti.ece.cmu.edu>


Hi,

  since I've never used dlsym and friends before, I coded a test case
last night to understand what's going on.  I've put it at:
http://www.ece.cmu.edu/~tov/public/dltest.tar.gz

It should work out of the box for AIX 4.2 and Linux.  It's a simple
program that loads a shared object, uses it (with references back to
the main program), and then discards it.  Main point of the exercise
is to find out how to compile this stuff with AIX.

The "ugliness" that I encounter is that I need a file of the
exported symbols in R and the libraries (libappl.a, libmath.a, etc.).
Otherwise I get core dumps.  Any suggestions for when to build it or
where to patch the Makefiles?

If you have a machine with AIX, would you mind downloading the dltest
tarfile?  Just unzip it, untar it.  Then in the dltest directory,
start "make test".  Should print "OK" eventually...

Thanks,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 14 09:01:00 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 14 Jun 1999 10:01:00 +0200
Subject: dynload for R on AIX (>= 4.2)
In-Reply-To: <199906111915.PAA14180@infiniti.ece.cmu.edu> (message from Thomas
 Vogels on Fri, 11 Jun 1999 15:15:33 -0400)
References: <199906111915.PAA14180@infiniti.ece.cmu.edu>
Message-ID: <199906140801.KAA00561@sophie.ethz.ch>

>>>>> On Fri, 11 Jun 1999 15:15:33 -0400, Thomas Vogels <tov@infiniti.ece.cmu.edu> said:


    Thomas>   since I've never used dlsym and friends before, I coded a
    Thomas> test case last night to understand what's going on.  I've put
    Thomas> it at: http://www.ece.cmu.edu/~tov/public/dltest.tar.gz

got it

    Thomas> It should work out of the box for AIX 4.2 and Linux.  It's a
    Thomas> simple program that loads a shared object, uses it (with
    Thomas> references back to the main program), and then discards it.
    Thomas> Main point of the exercise is to find out how to compile this
    Thomas> stuff with AIX.

    Thomas> The "ugliness" that I encounter is that I need a file of the
    Thomas> exported symbols in R and the libraries (libappl.a, libmath.a,
    Thomas> etc.).  Otherwise I get core dumps.  Any suggestions for when
    Thomas> to build it or where to patch the Makefiles?

Couldn't you just 'nm' the  R.binary file?
That should be available *before* you start building  *.so's ?
Then it could happen in src/main/Makefile[.in].

The "tricky/tedious" part is to have "configure" produce that different
Makefile for the case of AIX only.
It seems, the FLAGS and the Makefile entry for the *.exp file (see below)
would also have to present in one of the two Makeconf  files or in every
Makefile that builds a *.so.

    Thomas> If you have a machine with AIX, would you mind downloading the
    Thomas> dltest tarfile?  Just unzip it, untar it.  Then in the dltest
    Thomas> directory, start "make test".  Should print "OK" eventually...

It did print "OK".  
I see in the "Makefile" that you're creating the list of exported objects
simply using  nm & awk :
(cited for those who haven't got your code ready):

    NM = nm
    NM_FLAGS = -g -h
    AWK = awk
    LD_FLAGS = -bdynamic -bE:main.exp
    LIBS = -ldl
    SHLIB_CFLAGS = 
    SHLIB_LD = /bin/ld
    SHLIB_LD_FLAGS = -bso -bM:SRE -H512 -T512 -bnoentry -bexpall -bI:main.exp

    <....>

    main.exp : main.o
	    $(NM) $(NM_FLAGS) main.o | $(AWK) ' \
	    BEGIN { print "#! ."; } \
	    $$2 == "T" && $$1 != ".main" { print substr ($$1, 2) } \
	    ' > $@

which looks very reasonable.
Now we just need configure build the proper Makeconf(s) and Makefile(s)
and things would hopefully work..

Could we short-cut E-mail ( R-core, Arne, TomV ) to get this going?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From beimfohr@Statistik.Uni-Dortmund.DE  Mon Jun 14 12:03:48 1999
From: beimfohr@Statistik.Uni-Dortmund.DE (Frank Beimfohr)
Date: Mon, 14 Jun 1999 13:03:48 +0200
Subject: Compilation fails (PR#209)
Message-ID: <199906141103.NAA28439@Statistik.Uni-Dortmund.DE>

> > I try to compile R on my Sparc 4 (Solaris 2.5.1) but the compilation
> > fails. I tried the developer-version and the contributed
> > 0.64.1-Version.  I start configure with the --g77-Option. During the
> > compilation it stops with an
> 
> > error, which says that the R/src/library/modreg/src/bsplvd.f isn't a
> > valid Fortran77-File. Then, I installed f2c. But the compilation fails
> > again with the message:
> 
> > gcc: unrecognized option `-PIC'
> 
> which should not be there.
> 
> Can you pls send
> 
> * the exact configure and make command you issued
> 
> * the final output of configure

Command:
configure --prefix=/sw/sun4_55/R-0.64.1a --exec-prefix=/sw/sun4_55/R-0.64.1a 
--with-x --with-g77 [--with-f2c]

Output (without and without f2c-Option):
R is now configured for sparc-sun-solaris2.5.1

  Source directory:         .
  Installation directory:   /sw/sun4_55/R-0.64.1a
  C compiler:               gcc -g -O2
  FORTRAN compiler:         g77 
  Gnome support:            no

Then I just type 'make' (using GNU-Make 3.76.1) and get the error messages 
descriped above...

gmake[4]: Entering directory `/sw/sun4_55/R-0.64.1a/src/library/modreg/src'
gcc -g -O2 -fPIC -I../../../../include -c bsplvd.c -o bsplvd.o
g77  -PIC -c bvalue.f -o bvalue.o
gcc: unrecognized option `-PIC'
../../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o ksmooth.o 
loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvrg.o stxwx.o
Usage : make [ -f makefile ]... [ -d ][ -dd ][ -D ][ -DD ][ -e ][ -i ][ -k ]
             [ -K statefile ][ -n ][ -p ][ -P ][ -q ][ -r ][ -s ][ -S ][ -t ]
             [ -V ][ target ... ][ macro=value... ]
make: Fatal error: Unknown option `-w'
gmake[4]: *** [modreg.so] Error 1


Frank Beimfohr
University of Dortmund, Germany




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jun 14 13:32:37 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 14 Jun 1999 08:32:37 -0400
Subject: Compilation fails (PR#209)
In-Reply-To: Your message of "Mon, 14 Jun 1999 13:03:48 EDT."
 <199906141103.NAA28439@Statistik.Uni-Dortmund.DE>
Message-ID: <199906141232.IAA23012@infiniti.ece.cmu.edu>


Hi,

  there are three different things going on here:
  (1) gmake by default has the option "-w" set, which is why you see
these "Entering/Leaving directory ..." messages.  This option finds a
way into the make flags when the system default make is called.  Not
quite sure how, but don't blame it on configure.  Makeconf et. al. is
more likely.
  (2) Very annoyingly, modreg doesn't use the $(SHLIBLD) command but
calls R with SHLIB as option.  Which is nothing you are interested in,
but is a bad thing, IMHO.
  (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
configure uses.  Try to find out, what the default is.  Follow this example:
  tmp $ touch Imakefile
  tmp $ xmkmf
  imake -DUseInstalled -I/usr/lib/X11/config
  "./Imakefile", line 1: 1506-229 (W) File is empty.
  tmp $ grep -i pic Makefile 
  PICFLAGS = -bM\:SRE
(Results are for an AIX box.  Your output should look different.)

| gmake[4]: Entering directory
| `/sw/sun4_55/R-0.64.1a/src/library/modreg/src'
| gcc -g -O2 -fPIC -I../../../../include -c bsplvd.c -o bsplvd.o
| g77  -PIC -c bvalue.f -o bvalue.o
| gcc: unrecognized option `-PIC'
| ../../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o
| ksmooth.o
| loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvrg.o
| stxwx.o
| Usage : make [ -f makefile ]... [ -d ][ -dd ][ -D ][ -DD ][ -e ][ -i
| ][ -k ]
|              [ -K statefile ][ -n ][ -p ][ -P ][ -q ][ -r ][ -s ][ -S
| ][ -t ]
|              [ -V ][ target ... ][ macro=value... ]
| make: Fatal error: Unknown option `-w'
| gmake[4]: *** [modreg.so] Error 1

  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From beimfohr@Statistik.Uni-Dortmund.DE  Mon Jun 14 14:42:15 1999
From: beimfohr@Statistik.Uni-Dortmund.DE (Frank Beimfohr)
Date: Mon, 14 Jun 1999 15:42:15 +0200
Subject: Compilation fails (PR#209)
Message-ID: <199906141342.PAA13446@Statistik.Uni-Dortmund.DE>

> Hi,
> 
>   there are three different things going on here:
>   (1) gmake by default has the option "-w" set, which is why you see
> these "Entering/Leaving directory ..." messages.  This option finds a
> way into the make flags when the system default make is called.  Not
> quite sure how, but don't blame it on configure.  Makeconf et. al. is
> more likely.
>   (2) Very annoyingly, modreg doesn't use the $(SHLIBLD) command but
> calls R with SHLIB as option.  Which is nothing you are interested in,
> but is a bad thing, IMHO.
>   (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
> configure uses.  Try to find out, what the default is.  Follow this example:
>   tmp $ touch Imakefile
>   tmp $ xmkmf
>   imake -DUseInstalled -I/usr/lib/X11/config
>   "./Imakefile", line 1: 1506-229 (W) File is empty.
>   tmp $ grep -i pic Makefile 
>   PICFLAGS = -bM\:SRE
> (Results are for an AIX box.  Your output should look different.)

I started 'configure' with the f2c- and without the g77-Option and used 
/usr/ccs/bin/make instead of gmake (very flexible, isn't it ;) 

  C compiler:               gcc -g -O2
  FORTRAN compiler:         f2c 

The modreg-directory is now compiled without any error.

But while processing the mva-directory:

mkdir ../../../library/mva/R
gcc -g -O2 -fPIC -I../../../../include -c dblcen.c -o dblcen.o
ld -G -o mva.so dblcen.o hclust.o kmns.o
ld: fatal: file hclust.o: cannot open file; errno=2
ld: fatal: file kmns.o: cannot open file; errno=2
ld: fatal: File processing errors.  No output written to mva.so
*** Error code 1
make: Fatal error: Command failed for target `mva.so'
Current working directory /sw/sun4_55/R-0.65.0/src/library/mva/src
*** Error code 1
make: Fatal error: Command failed for target `all'


What happens here? I compiled R 0.63.0 without any problem....

Frank Beimfohr
University of Dortmund

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jun 14 14:53:51 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 14 Jun 1999 09:53:51 -0400
Subject: dynload for R on AIX (>= 4.2)
In-Reply-To: Your message of "Mon, 14 Jun 1999 10:01:00 EDT."
 <199906140801.KAA00561@sophie.ethz.ch>
Message-ID: <199906141353.JAA29330@infiniti.ece.cmu.edu>


"Martin" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

Thomas> The "ugliness" that I encounter is that I need a file of the
Thomas> exported symbols in R and the libraries (libappl.a, libmath.a,

Martin> Couldn't you just 'nm' the  R.binary file?
Martin> That should be available *before* you start building  *.so's ?
Martin> Then it could happen in src/main/Makefile[.in].

nm on R.binary would include stuff from libc.a and libm.c as well
(e.g. printf & friends).  Much like Tcl/Tk, I'd like to misuse the
LDCMD to build an export file when R.binary is linked.  I've put a
script at: http://www.ece.cmu.edu/~tov/public/ldAIX4
(or in color: http://www.ece.cmu.edu/~tov/public/ldAIX4.html)
It's invoked with something like:
ldAIX4 f77 -bdynamic -o ../../bin/R.binary *.o \
../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lX11 -lblas -ldl -lm

Martin> I see in the "Makefile" that you're creating the list of exported objects
Martin> simply using  nm & awk :

For no particularly good reason, I've switched to nm & sed at the
moment :-)  The awk script is more readable, so I'll probly go back.
Are there concerns about non-availabilty of awk (plain awk, not gawk)?

Martin> main.exp : main.o
Martin> $(NM) $(NM_FLAGS) main.o | $(AWK) ' \
Martin> BEGIN { print "#! ."; } \
Martin> $$2 == "T" && $$1 != ".main" { print substr ($$1, 2) } \
Martin> ' > $@
Martin> 
Martin> which looks very reasonable.

... but is incomplete since I forgot about global vars (bummer, why
are there global vars? ;-)

Martin> Now we just need configure build the proper Makeconf(s) and Makefile(s)
Martin> and things would hopefully work..

Hope is a good choice of words.  I've patched configure (there is a
section with platform dependent overrides).  But now I have to patch
the Makefiles since things get confused.  More to follow.

Martin> Could we short-cut E-mail ( R-core, Arne, TomV ) to get this going?

Who is R-core?

Regards,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vogels@ieee.org  Mon Jun 14 16:56:06 1999
From: vogels@ieee.org (vogels@ieee.org)
Date: Mon, 14 Jun 1999 17:56:06 +0200 (MET DST)
Subject: definition of R_problem_buf in S.h (PR#210)
Message-ID: <199906141556.RAA00751@pubhealth.ku.dk>

Full_Name: Thomas Vogels
Version: 0.64.1
OS: AIX 4.2
Submission from: (NULL) (198.133.22.70)


R_problem_buf is defined, not just declared, in S.h:

#define R_PROBLEM_BUFSIZE 4096
char R_problem_buf[R_PROBLEM_BUFSIZE];

This is bad since every time S.h is included this buffer is defined.  The
linker
will eventually complain about multiple definitions of this symbol.

Solution: declare R_problem_buf to be extern in S.h, then allocate memory for
it
in a source file, like main.c with: char R_problem_buf[R_PROBLEM_BUFSIZE];



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jun 14 17:26:39 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 14 Jun 1999 18:26:39 +0200 (CEST)
Subject: Compilation fails (PR#209)
In-Reply-To: <199906141342.PAA13446@Statistik.Uni-Dortmund.DE>
References: <199906141342.PAA13446@Statistik.Uni-Dortmund.DE>
Message-ID: <14181.11583.323584.13254@pc87.maho.magnaeu.com>

>>>>> Frank Beimfohr writes:

>> Hi,
>>

(As an aside.  This thread is quickly becoming extremely inefficient.  I
am certainly willing to fix configuration/build problems, but if I ask
SPECIFIC questions then I really need specific answers.)

>> there are three different things going on here:
>> (1) gmake by default has the option "-w" set, which is why you see
>> these "Entering/Leaving directory ..." messages.  This option finds a
>> way into the make flags when the system default make is called.  Not
>> quite sure how, but don't blame it on configure.  Makeconf et. al. is
>> more likely.

I don't see how the system default could be called.  The instructions
say that if you want to use non-default make, then you need to do
(assuming a Bourne shell)

	MAKE=/the/make/you/want ./configure
	/the/make/you/want

>> (2) Very annoyingly, modreg doesn't use the $(SHLIBLD) command but
>> calls R with SHLIB as option.  Which is nothing you are interested in,
>> but is a bad thing, IMHO.

Good point.  Will have a look.

>> (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
>> configure uses.  Try to find out, what the default is.  Follow this example:
>> tmp $ touch Imakefile
>> tmp $ xmkmf
>> imake -DUseInstalled -I/usr/lib/X11/config
>> "./Imakefile", line 1: 1506-229 (W) File is empty.
>> tmp $ grep -i pic Makefile 
>> PICFLAGS = -bM\:SRE
>> (Results are for an AIX box.  Your output should look different.)

> I started 'configure' with the f2c- and without the g77-Option and used 
> /usr/ccs/bin/make instead of gmake (very flexible, isn't it ;) 

>   C compiler:               gcc -g -O2
>   FORTRAN compiler:         f2c 

> The modreg-directory is now compiled without any error.

> But while processing the mva-directory:

> mkdir ../../../library/mva/R
> gcc -g -O2 -fPIC -I../../../../include -c dblcen.c -o dblcen.o
> ld -G -o mva.so dblcen.o hclust.o kmns.o
> ld: fatal: file hclust.o: cannot open file; errno=2
> ld: fatal: file kmns.o: cannot open file; errno=2
> ld: fatal: File processing errors.  No output written to mva.so
> *** Error code 1
> make: Fatal error: Command failed for target `mva.so'
> Current working directory /sw/sun4_55/R-0.65.0/src/library/mva/src
> *** Error code 1
> make: Fatal error: Command failed for target `all'

What is the rule for .f.o?  Apparently, the Fortran sources did not get
compiled ...

> What happens here? I compiled R 0.63.0 without any problem....

The point is that, and I think I explained that on r-devel, we need to
find a solution for Fortran compilation.  Many compilers, such as g77,
typically produce objects which still need to be linked against other
libraries (libg2c.a for recent versions of g77).

The problem can be overcome in two ways:  either use the Fortran
compiler for linking, or use $CC/ld and get the extra flags right.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun 14 17:30:42 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 14 Jun 1999 18:30:42 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <199906141556.RAA00751@pubhealth.ku.dk> (vogels@ieee.org)
References: <199906141556.RAA00751@pubhealth.ku.dk>
Message-ID: <199906141630.SAA07559@sophie.ethz.ch>

>>>>> On Mon, 14 Jun 1999 17:56:06 +0200 (MET DST), vogels@ieee.org said:

    vogels> Full_Name: Thomas Vogels Version: 0.64.1 OS: AIX 4.2 Submission
    vogels> from: (NULL) (198.133.22.70)


    vogels> R_problem_buf is defined, not just declared, in S.h:

    vogels> #define R_PROBLEM_BUFSIZE 4096 char
    vogels> R_problem_buf[R_PROBLEM_BUFSIZE];

    vogels> This is bad since every time S.h is included this buffer is
    vogels> defined.  The linker will eventually complain about multiple
    vogels> definitions of this symbol.
no.
All our include files ``idempotent'' : Including them multiple times
doesn't change anything.
This protection is *very* standard and is achieved by (for the case of S.h) 

#ifndef R_S_H
#define R_S_H
.................. everything ......
#endif

    vogels> Solution: declare R_problem_buf to be extern in S.h, then
    vogels> allocate memory for it in a source file, like main.c with: char
    vogels> R_problem_buf[R_PROBLEM_BUFSIZE];

Not the real solution, main.c does not even include S.h !

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jun 14 17:34:59 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 14 Jun 1999 18:34:59 +0200 (CEST)
Subject: Compilation fails (PR#209)
In-Reply-To: <199906141232.IAA23012@infiniti.ece.cmu.edu>
References: <199906141103.NAA28439@Statistik.Uni-Dortmund.DE>
 <199906141232.IAA23012@infiniti.ece.cmu.edu>
Message-ID: <14181.12083.82468.559759@pc87.maho.magnaeu.com>

>>>>> Thomas Vogels writes:

>   (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
> configure uses.  Try to find out, what the default is.  Follow this example:
>   tmp $ touch Imakefile
>   tmp $ xmkmf
>   imake -DUseInstalled -I/usr/lib/X11/config
>   "./Imakefile", line 1: 1506-229 (W) File is empty.
>   tmp $ grep -i pic Makefile 
>   PICFLAGS = -bM\:SRE
> (Results are for an AIX box.  Your output should look different.)

AIX is not a supported platform yet.  If you tell me which flags (cpic,
fpic, shlib, maybe something extra for producing the main binary) to use
for this platform and the NATIVE compilers, I will gladly tell configure
how to get things right on AIX.

Is it safe to assume that `-fPIC' will do the right thing on all
platforms for gcc and g77?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jun 14 17:41:39 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 14 Jun 1999 18:41:39 +0200 (CEST)
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <199906141630.SAA07559@sophie.ethz.ch>
References: <199906141556.RAA00751@pubhealth.ku.dk>
 <199906141630.SAA07559@sophie.ethz.ch>
Message-ID: <14181.12483.272614.786407@pc87.maho.magnaeu.com>

>>>>> Martin Maechler writes:

>>>>> On Mon, 14 Jun 1999 17:56:06 +0200 (MET DST), vogels@ieee.org said:
vogels> Full_Name: Thomas Vogels Version: 0.64.1 OS: AIX 4.2 Submission
vogels> from: (NULL) (198.133.22.70)


vogels> R_problem_buf is defined, not just declared, in S.h:

vogels> #define R_PROBLEM_BUFSIZE 4096 char
vogels> R_problem_buf[R_PROBLEM_BUFSIZE];

vogels> This is bad since every time S.h is included this buffer is
vogels> defined.  The linker will eventually complain about multiple
vogels> definitions of this symbol.
> no.
> All our include files ``idempotent'' : Including them multiple times
> doesn't change anything.
> This protection is *very* standard and is achieved by (for the case of S.h) 

> #ifndef R_S_H
> #define R_S_H
> .................. everything ......
> #endif

vogels> Solution: declare R_problem_buf to be extern in S.h, then
vogels> allocate memory for it in a source file, like main.c with: char
vogels> R_problem_buf[R_PROBLEM_BUFSIZE];

> Not the real solution, main.c does not even include S.h !

Right.

Is there a way we can suggest a better interface here?  I really hate
the PROBLEM xxx RECOVER(NULL_ENTRY) lines.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Mon Jun 14 17:46:38 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 14 Jun 1999 12:46:38 -0400
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <199906141630.SAA07559@sophie.ethz.ch> (message from Martin
 Maechler on Mon, 14 Jun 1999 18:30:42 +0200)
Message-ID: <199906141648.SAA12286@stat.math.ethz.ch>


I think Thomas is correct and that it is a problem.  I brought it up a
while back and Peter had some comments.  The problem is when 2 or more
user-level C source files include S.h. Then while each file has an
idempotent S.h, when linked together, there is a duplication of
symbols.  The problem is not within source file but across file.


D.

_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Mon Jun 14 19:30:48 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Mon, 14 Jun 1999 19:30:48 +0100
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <199906141630.SAA07559@sophie.ethz.ch>; from Martin Maechler on Mon, Jun 14, 1999 at 06:30:42PM +0200
References: <199906141556.RAA00751@pubhealth.ku.dk> <199906141630.SAA07559@sophie.ethz.ch>
Message-ID: <19990614193048.27035@hal.stat.unipd.it>

On Mon, Jun 14, 1999 at 06:30:42PM +0200, Martin Maechler wrote:
> >>>>> On Mon, 14 Jun 1999 17:56:06 +0200 (MET DST), vogels@ieee.org said:
> 
>     vogels> Full_Name: Thomas Vogels Version: 0.64.1 OS: AIX 4.2 Submission
>     vogels> from: (NULL) (198.133.22.70)
> 
> 
>     vogels> R_problem_buf is defined, not just declared, in S.h:
> 
>     vogels> #define R_PROBLEM_BUFSIZE 4096 char
>     vogels> R_problem_buf[R_PROBLEM_BUFSIZE];
> 
>     vogels> This is bad since every time S.h is included this buffer is
>     vogels> defined.  The linker will eventually complain about multiple
>     vogels> definitions of this symbol.
> no.
> All our include files ``idempotent'' : Including them multiple times
> doesn't change anything.
  
  Yes, but what happens if different files to be linked in the same
  shared library include S.h? If I understand the behaviour is
  linker dependent.


> 
>     vogels> Solution: declare R_problem_buf to be extern in S.h, then
>     vogels> allocate memory for it in a source file, like main.c with: char
>     vogels> R_problem_buf[R_PROBLEM_BUFSIZE];
> 
> Not the real solution, main.c does not even include S.h !
> 

  R.binary exports R_problem_buf since S.h is includes by appl/loglin.c.
  Anyway, going toward a multi-threaded R, I agree with Martin that 
  this is not the solution.
  What about declaring R_problem_buf static?
  
  guido



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 14 18:38:19 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 1999 19:38:19 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Duncan Temple Lang's message of "Mon, 14 Jun 1999 12:46:38 -0400"
References: <199906141648.SAA12286@stat.math.ethz.ch>
Message-ID: <x2wvx6el84.fsf@blueberry.kubism.ku.dk>

Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:

> I think Thomas is correct and that it is a problem.  I brought it up a
> while back and Peter had some comments.  The problem is when 2 or more
> user-level C source files include S.h. Then while each file has an
> idempotent S.h, when linked together, there is a duplication of
> symbols.  The problem is not within source file but across file.

Yes, exactly. I forgot which comment I had at the time, but...

There are two obvious solutions:
(1) Define it "static" in S.h (hey, what is 4K these days?)
(2) Declare it extern there and define it somewhere else.

Any preferences?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Mon Jun 14 18:37:22 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 14 Jun 1999 13:37:22 -0400
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <x2wvx6el84.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 14 Jun 1999 19:38:19 +0200)
Message-ID: <199906141738.TAA13141@stat.math.ethz.ch>


I would vote for (2). If we go to multiple evaluators as some of us
were discussing recently, evaluator-specific statics will need to be
removed.

D.


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Jun 14 18:58:20 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Tue, 15 Jun 1999 05:58:20 +1200 (NZST)
Subject: Include file changes
Message-ID: <199906141758.FAA05183@stat1.stat.auckland.ac.nz>

I think we are long overdue for a revision of the header files used in R.
This is going to be especially important for a clean build of the CORBA
and R/Java stuff which I have been looking over Duncan's shoulder at.
It will also let us integrate some of the features Duncan has had to
find creative ways around and also to let us integrate things like the
PROBLEM buffer problem.

I would propose that we cut down to a much smaller set of includes and
to put some thought about what goes in each.  Something along the lines
below.

        R.h / S.h
                This just serves to include Platform.h, RInternals.h and
                RUtilities.h below.

        Platform.h
                Platform specific definitions.

        RInternals.h
                R Data Structures & Access Macros
                Memory management
                Functions which manipulate R data structures

        RUtilities.h
                Functions which operate at the C level
                without special knowlege of R structures
                (But maybe not Math).

        RMath.h
                We probably need a separate set of declarations
                but maybe not.

        RGraphics.h
                This is big and is logically separate from
                other C code.  Some things which are not in
                here should be -- e.g. hsv2rgb.

(I think the rest of the code could also stand a bit of clean up too).

        Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 14 19:03:02 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 1999 20:03:02 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Duncan Temple Lang's message of "Mon, 14 Jun 1999 13:37:22 -0400"
References: <199906141736.TAA01099@pubhealth.ku.dk>
Message-ID: <x2vhcqek2x.fsf@blueberry.kubism.ku.dk>

Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:

> I would vote for (2). If we go to multiple evaluators as some of us
> were discussing recently, evaluator-specific statics will need to be
> removed.

Hm. That won't help, will it? We'd have one static object instead
of several. If threads try to step on eachothers toes it wouldn't
prevent it, just allow them to do it from within different functions!

What one would really need is a way to generate the buffer
dynamically *inside* the function call. Or setup PROBLEM to do some
kind of resource locking, in which case it doesn't really matter
whether we use (1) or (2)? Or...?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@rice.research.bell-labs.com  Mon Jun 14 19:18:58 1999
From: duncan@rice.research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 14 Jun 1999 14:18:58 -0400
Subject: definition of R_problem_buf in S.h (PR#210)
Message-ID: <199906141820.UAA13830@stat.math.ethz.ch>


> 
> Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:
> 
> > I would vote for (2). If we go to multiple evaluators as some of us
> > were discussing recently, evaluator-specific statics will need to be
> > removed.
> 
> Hm. That won't help, will it? We'd have one static object instead
> of several. If threads try to step on eachothers toes it wouldn't
> prevent it, just allow them to do it from within different functions!
> 
> What one would really need is a way to generate the buffer
> dynamically *inside* the function call. Or setup PROBLEM to do some
> kind of resource locking, in which case it doesn't really matter
> whether we use (1) or (2)? Or...?
> 


Absolutely. I was just thinking of not having many statics but that we
could deal with a single one by adding it to the Evaluator
structure. In this way, there is a single one per evaluator and at
present this is adequate. If we need more, we introduce a stack or
linked list.  If we dynamically generate the buffer in the call, then
we will have to change the arguments, etc. to pass it out to other
routines. Otherwise, if we use the statics to communicate the new
buffer we are no better off, except for the dynamic allocation
avoiding the buffer overflow.


Robert will likely be doing things with all of this via
his exception/handler mechanism also.

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      Languages shape the way we think, and determine what 
      we can think about -- Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Mon Jun 14 20:27:47 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Mon, 14 Jun 1999 20:27:47 +0100
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <x2vhcqek2x.fsf@blueberry.kubism.ku.dk>; from Peter Dalgaard BSA on Mon, Jun 14, 1999 at 08:03:02PM +0200
References: <199906141736.TAA01099@pubhealth.ku.dk> <x2vhcqek2x.fsf@blueberry.kubism.ku.dk>
Message-ID: <19990614202747.48954@hal.stat.unipd.it>

On Mon, Jun 14, 1999 at 08:03:02PM +0200, Peter Dalgaard BSA wrote:
> Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:
> 
> > I would vote for (2). If we go to multiple evaluators as some of us
> > were discussing recently, evaluator-specific statics will need to be
> > removed.
> 
> Hm. That won't help, will it? We'd have one static object instead
> of several. If threads try to step on eachothers toes it wouldn't
> prevent it, just allow them to do it from within different functions!
> 
> What one would really need is a way to generate the buffer
> dynamically *inside* the function call. Or setup PROBLEM to do some
> kind of resource locking, in which case it doesn't really matter
> whether we use (1) or (2)? Or...?

  Allocating the buffer *inside* the function is easy if we insist
  on the PROBLEM ....RECOVER interface (but K. has another opinion):
  #define PROBLEM {char R_problem_buf[R_PROBLEM_BUFSIZE];\
                   sprintf(R_problem_buf,
  #define RECOVER(x)      ), error(R_problem_buf); }

  Same for WARNING
  Are there other use of the buffer?
  g.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jun 14 21:15:05 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Mon, 14 Jun 1999 16:15:05 -0400
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Your message of "Mon, 14 Jun 1999 14:18:58 EDT."
 <199906141820.UAA13830@stat.math.ethz.ch>
Message-ID: <199906142015.QAA03834@infiniti.ece.cmu.edu>


Hi all, 

  after I started it, allow me two comments:

1) as was pointed out, the problem of including S.h in different
places doesn't show up until you try to compile shared libraries (lqs,
modre) since the conditional include (#ifndef R_*) doesn't catch it in
this case.  IMHO, "static char R_problem_buf[R_PROBLEM_BUFSIZE];" is
no solution.  I gather from other comments that you want to be thread
safe.  This willl make any declaration of a variable as "static" (not
just R_problem_buf) dangerous.

2) "Philosophically" speaking, a good place for this buffer is the
same place where you'd put the results.  From my little viewpoint,
that would be the evaluation context?

Signing off,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 14 22:57:29 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 1999 23:57:29 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Guido Masarotto's message of "Mon, 14 Jun 1999 20:27:47 +0100"
References: <199906141736.TAA01099@pubhealth.ku.dk> <x2vhcqek2x.fsf@blueberry.kubism.ku.dk> <19990614202747.48954@hal.stat.unipd.it>
Message-ID: <x2btei8mye.fsf@blueberry.kubism.ku.dk>

Guido Masarotto <guido@hal.stat.unipd.it> writes:

>   Allocating the buffer *inside* the function is easy if we insist
>   on the PROBLEM ....RECOVER interface (but K. has another opinion):

Yes. I think Kurt is missing the point that S.h is a *compatibility*
item, so we're stuck with whatever ugliness that is present in S. It
is still allowed to do it neater.

>   #define PROBLEM {char R_problem_buf[R_PROBLEM_BUFSIZE];\
>                    sprintf(R_problem_buf,
>   #define RECOVER(x)      ), error(R_problem_buf); }
> 
>   Same for WARNING
>   Are there other use of the buffer?

I don't think so... 

Let's see: This would create R_problem_buf on the stack when PROBLEM
is encountered or when the function is called? (Forgetting my C
semantics...). In either case, we certainly avoid the reentrancy
problem. In the latter (unlikely) case, we waste 4k per potential
PROBLEM, which is hardly a problem unless the function is heavily
recursive. Sounds good.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From seniorr@teleport.com  Mon Jun 14 23:09:00 1999
From: seniorr@teleport.com (seniorr@teleport.com)
Date: Tue, 15 Jun 1999 00:09:00 +0200 (MET DST)
Subject: readline/history size (PR#211)
Message-ID: <199906142209.AAA02065@pubhealth.ku.dk>

Full_Name: Russell Senior
Version: 0.64.0
OS: linux-2.2.x
Submission from: (NULL) (198.107.133.11)


It appears that the GNU readline history size is limited to 50 entries.  This 
is apparently occurring because R is not bothering to override the readline 
default value (from readline-4.0):

  ./history.c:59:#define DEFAULT_HISTORY_GROW_SIZE 50

It appears that it ought to be possible to override this from R by setting the 
readline variable `history_size' to another value.  I request that a
command-line
option be added for doing this.  The following is an *untested* patch:

--- src/unix/system.c~  Wed Mar 31 12:53:18 1999
+++ src/unix/system.c   Mon Jun 14 15:05:50 1999
@@ -580,6 +580,35 @@
                else
                    R_NSize = value;
            }
+#ifdef HAVE_LIBREADLINE
+#ifdef HAVE_READLINE_HISTORY_H
+           else if((value = (*av)[1] == 'h') || !strcmp(*av, "--histsize")) {
+               if(value)
+                   REprintf("WARNING: option `-h' is deprecated.  "
+                            "Use `--histsize' instead.\n");
+               if(!value || (*av)[2] == '\0') {
+                   ac--; av++; p = *av;
+               }
+               else p = &(*av)[2];
+               if (p == NULL) {
+                   REprintf("WARNING: no hsize given");
+                   break;
+               }
+               value = Decode2Long(p,&ierr);
+               if(ierr) {
+                   if(ierr < 0) goto badargs;
+                   REprintf("--histsize %ld'%c': too large", value,
+                            (ierr == 1)?'M':((ierr == 2)?'K':'k'));
+               }
+               if(value < 0)
+                  REprintf("WARNING: invalid history (hist)size '%d' ignored,"
+                           " using default = %d\n", value, history_size);
+               else
+                   history_size = value;
+           }
+            
+#endif
+#endif
            else {
                REprintf("WARNING: unknown option %s\n", *av);
                break;


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jun 15 09:30:52 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 15 Jun 1999 10:30:52 +0200 (CEST)
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: <x2btei8mye.fsf@blueberry.kubism.ku.dk>
References: <199906141736.TAA01099@pubhealth.ku.dk>
 <x2vhcqek2x.fsf@blueberry.kubism.ku.dk>
 <19990614202747.48954@hal.stat.unipd.it>
 <x2btei8mye.fsf@blueberry.kubism.ku.dk>
Message-ID: <14182.3900.762411.940864@pc87.maho.magnaeu.com>

>>>>> Peter Dalgaard BSA writes:

> Guido Masarotto <guido@hal.stat.unipd.it> writes:
>> Allocating the buffer *inside* the function is easy if we insist
>> on the PROBLEM ....RECOVER interface (but K. has another opinion):

> Yes. I think Kurt is missing the point that S.h is a *compatibility*
> item, so we're stuck with whatever ugliness that is present in S. It
> is still allowed to do it neater.

Hmm.  Is everyone trying to give me a hard time lately?  I am aware that
it is there for compatibility.  I was trying to say that even if we keep
the interface supported, we should still find a better way AND advertize
it accordingly.

>> #define PROBLEM {char R_problem_buf[R_PROBLEM_BUFSIZE];\
>> sprintf(R_problem_buf,
>> #define RECOVER(x)      ), error(R_problem_buf); }
>> 
>> Same for WARNING
>> Are there other use of the buffer?

> I don't think so... 

> Let's see: This would create R_problem_buf on the stack when PROBLEM
> is encountered or when the function is called? (Forgetting my C
> semantics...). In either case, we certainly avoid the reentrancy
> problem. In the latter (unlikely) case, we waste 4k per potential
> PROBLEM, which is hardly a problem unless the function is heavily
> recursive. Sounds good.

In any case, let me get rid of this in appl/loglin.c.  On a related
issue, what is the recommended way of allocating memory in such files,
via Calloc()?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jun 15 09:40:31 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 15 Jun 1999 10:40:31 +0200 (CEST)
Subject: Include file changes
In-Reply-To: <199906141758.FAA05183@stat1.stat.auckland.ac.nz>
References: <199906141758.FAA05183@stat1.stat.auckland.ac.nz>
Message-ID: <14182.4479.471950.899741@pc87.maho.magnaeu.com>

>>>>> Ross Ihaka writes:

> I think we are long overdue for a revision of the header files used in
> R.  This is going to be especially important for a clean build of the
> CORBA and R/Java stuff which I have been looking over Duncan's
> shoulder at.  It will also let us integrate some of the features
> Duncan has had to find creative ways around and also to let us
> integrate things like the PROBLEM buffer problem.

> I would propose that we cut down to a much smaller set of includes and
> to put some thought about what goes in each.  Something along the
> lines below.

>         R.h / S.h
>                 This just serves to include Platform.h, RInternals.h and
>                 RUtilities.h below.

>         Platform.h
>                 Platform specific definitions.

Maybe `RPlatform.h' then?

>         RInternals.h
>                 R Data Structures & Access Macros
>                 Memory management
>                 Functions which manipulate R data structures

>         RUtilities.h
>                 Functions which operate at the C level
>                 without special knowlege of R structures
>                 (But maybe not Math).

Such as the things currently in appl?

>         RMath.h
>                 We probably need a separate set of declarations
>                 but maybe not.

>         RGraphics.h
>                 This is big and is logically separate from
>                 other C code.  Some things which are not in
>                 here should be -- e.g. hsv2rgb.

Yes, good point.

> (I think the rest of the code could also stand a bit of clean up too).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 15 09:54:46 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Jun 1999 10:54:46 +0200
Subject: definition of R_problem_buf in S.h (PR#210)
In-Reply-To: Kurt Hornik's message of "Tue, 15 Jun 1999 10:30:52 +0200 (CEST)"
References: <199906141736.TAA01099@pubhealth.ku.dk> 	<x2vhcqek2x.fsf@blueberry.kubism.ku.dk> 	<19990614202747.48954@hal.stat.unipd.it> 	<x2btei8mye.fsf@blueberry.kubism.ku.dk> <14182.3900.762411.940864@pc87.maho.magnaeu.com>
Message-ID: <x2674ponc9.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >>>>> Peter Dalgaard BSA writes:
> 
> > Guido Masarotto <guido@hal.stat.unipd.it> writes:
> >> Allocating the buffer *inside* the function is easy if we insist
> >> on the PROBLEM ....RECOVER interface (but K. has another opinion):
> 
> > Yes. I think Kurt is missing the point that S.h is a *compatibility*
> > item, so we're stuck with whatever ugliness that is present in S. It
> > is still allowed to do it neater.
> 
> Hmm.  Is everyone trying to give me a hard time lately?  I am aware that
> it is there for compatibility.  I was trying to say that even if we keep
> the interface supported, we should still find a better way AND advertize
> it accordingly.

Sorry 'bout that... We still have to keep the old thing working - that
was my only point.

> 
> In any case, let me get rid of this in appl/loglin.c.  On a related
> issue, what is the recommended way of allocating memory in such files,
> via Calloc()?

I think so. However, notice that you need to free the storage
before error()-ing out (which is why it cannot be used in
PROBLEM---RECOVER constructs).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Tue Jun 15 10:13:25 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Tue, 15 Jun 1999 10:13:25 +0100 (BST)
Subject: Include file changes
In-Reply-To: <199906141758.FAA05183@stat1.stat.auckland.ac.nz>
Message-ID: <Pine.GSO.3.96.990615095114.17131E-100000@laplace>

On Tue, 15 Jun 1999, Ross Ihaka wrote:

> (I think the rest of the code could also stand a bit of clean up too).

Can I re-raise the issue of comments in functions?  There are in practice
four types of comment: (1) Those that appear in .R files but don't make it
through to the code; (2) Those that make it through but don't get printed; 
(3) Those that get printed in the `wrong' place; and (4) Those that get
printed in the right place.

>From my reading of the source code I think comments are always going to be
tricky to locate while they are treated as attributes.  I appreciate that
this is a feature of the Blue Book description, but I wonder if a simpler
arrangement might not be possible.  How about if comments were legitimate
expressions that evaluated to "invisible(.Last.value)", or, for those that
follow on on the line, "; invisible(.Last.value)".  Of course this would
slow the function down if implemented as is, but perhaps not if
implemented in the C code.

This may be a naive suggestion, and I am certainly not an expert in
comments, but I do find it frustrating to see all most of my helpful
asides coming out in the wrong place.  It seems to be Sod's Law that
comments are most useful after if() statements, when of course they are
promoted up the function.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jun 15 19:35:39 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Jun 1999 13:35:39 -0500
Subject: Accessing a function's environment
Message-ID: <6rpv2xs45g.fsf@verdi.stat.wisc.edu>

In a short course he is teaching here, Bill Venables has shown how to
cache the results of a recursive calculation so that later invocations
of the functions are speeded up.  His example is an ingenious way of
calculating all the subsets of size r from a set of size n.

His version of this function for R stored these cached values in the
global environment.  I suggested that it might be preferable to
declare the function in such a way that it carried an environment with
it and to use that environment for caching.

For illustration, I will show a factorial function that uses this
trick.  I use .env to store the environment in which the function was
defined then put the cached results in that environment.  Is there a
cleaner way to get the environment in which the currently executing
function was defined?  Sometimes (as below) you do not know the name
under which the function will be stored so you can't use something
like environment(Fact).  Just as "Recall" means to call myself again
regardless of the name, is there a way of a function getting the
environment in which it was defined without knowing its own name?

 > mkFact        # a function that constructs a factorial function
 function () 
 {
     .env <- environment()
     function(n) {
	 nm <- paste(".", n, sep = "/")
	 if (n <= 0) 
	     return(1)
	 if (exists(nm, envir = .env)) 
	     return(get(nm, envir = .env))
	 ans <- n * Recall(n - 1)
	 assign(nm, ans, envir = .env)
	 ans
     }
 }
 > Fact <- mkFact()
 > Fact         # the actual factorial function with an environment
 function (n) 
 {
     nm <- paste(".", n, sep = "/")
     if (n <= 0) 
	 return(1)
     if (exists(nm, envir = .env)) 
	 return(get(nm, envir = .env))
     ans <- n * Recall(n - 1)
     assign(nm, ans, envir = .env)
     ans
 }
 <environment: 0x406136e0>
 > Fact(4)
 [1] 24
 > objects(env = environment(Fact), all = TRUE)
 [1] "./1"  "./2"  "./3"  "./4"  ".env"
 > Fact(6)
 [1] 720
 > objects(env = environment(Fact), all = TRUE)
 [1] "./1"  "./2"  "./3"  "./4"  "./5"  "./6"  ".env"

If you use debug(Fact) and check what happens when Fact(6) is
evaluated, you will see that by the time it evaluates Fact(4), it
picks up the result from the environment.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 15 22:28:14 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Jun 1999 23:28:14 +0200
Subject: Accessing a function's environment
In-Reply-To: Douglas Bates's message of "15 Jun 1999 13:35:39 -0500"
References: <6rpv2xs45g.fsf@verdi.stat.wisc.edu>
Message-ID: <x2yahlqhld.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

>  > Fact <- mkFact()
>  > Fact         # the actual factorial function with an environment
>  function (n) 
>  {
>      nm <- paste(".", n, sep = "/")
>      if (n <= 0) 
> 	 return(1)
>      if (exists(nm, envir = .env)) 
> 	 return(get(nm, envir = .env))
>      ans <- n * Recall(n - 1)
>      assign(nm, ans, envir = .env)
>      ans
>  }
>  <environment: 0x406136e0>
>  > Fact(4)
>  [1] 24
>  > objects(env = environment(Fact), all = TRUE)
>  [1] "./1"  "./2"  "./3"  "./4"  ".env"
>  > Fact(6)
>  [1] 720
>  > objects(env = environment(Fact), all = TRUE)
>  [1] "./1"  "./2"  "./3"  "./4"  "./5"  "./6"  ".env"
> 
> If you use debug(Fact) and check what happens when Fact(6) is
> evaluated, you will see that by the time it evaluates Fact(4), it
> picks up the result from the environment.

Or (0.65 only):

> Fact<-local({
+   .env<-environment()
+   f<-function(n){     
+     nm <- paste(".", n, sep = "/")
+     if (n <= 0)
+       return(1)
+     if (exists(nm, envir = .env))
+       return(get(nm, envir = .env))
+     ans<-n*f(n-1)
+     assign(nm,ans,envir=.env)
+     ans
+   }
+ })
> Fact(6)
[1] 720
> objects(env = environment(Fact), all = TRUE)
[1] "./1"  "./2"  "./3"  "./4"  "./5"  "./6"  ".env" "f"   


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 16 13:20:37 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jun 1999 14:20:37 +0200
Subject: Comments - was Re: Include file changes
In-Reply-To: Jonathan Rougier's message of "Tue, 15 Jun 1999 10:13:25 +0100 (BST)"
References: <Pine.GSO.3.96.990615095114.17131E-100000@laplace>
Message-ID: <x2d7yw9w16.fsf@blueberry.kubism.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> >From my reading of the source code I think comments are always going to be
> tricky to locate while they are treated as attributes.  I appreciate that
> this is a feature of the Blue Book description, but I wonder if a simpler
> arrangement might not be possible.  How about if comments were legitimate
> expressions that evaluated to "invisible(.Last.value)", or, for those that
> follow on on the line, "; invisible(.Last.value)".  Of course this would
> slow the function down if implemented as is, but perhaps not if
> implemented in the C code.
> 
> This may be a naive suggestion, and I am certainly not an expert in
> comments, but I do find it frustrating to see all most of my helpful
> asides coming out in the wrong place.  It seems to be Sod's Law that
> comments are most useful after if() statements, when of course they are
> promoted up the function.

I'm afraid that your idea would break on things like

if (blabla)
	# blabla is true
	do.something()

Another idea that has been put forward is to simply include the entire
source, as entered, with the function, but that has drawbacks in case
the function gets modified by directly accessing the parse tree and
whatnot. 

My current hunch is that one needs to have multiple attributes (e.g.
"pre-comment", "post-comment", "endline-comment", "else-comment",....)
and have deparse print them accordingly. Not quite sure how to keep
track of that during parsing, though....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Jun 17 10:14:17 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 17 Jun 1999 10:14:17 +0100 (BST)
Subject: save.image()
Message-ID: <Pine.GSO.3.96.990617100025.25104D-100000@laplace>

Would it be reasonable to suggest adding an `all' flag to save.image(),
i.e.

"save.image" <-
function (f = ".RData", all.names = F) 
eval(substitute(save(list = ls(all.names = all.names), file = f)),
    .GlobalEnv)

I only ask because I keep losing my .First() function.  I would like to
start R in a particular directory and have it configure according to the
First() function in .RData in that directory.  But every time I want to
update the objects in .RData at the end of a session by save.image(), the
.First() is lost.  I know I could use an .Rprofile in the directory, but
my understanding is that it executes before the .Rprofile in the home
directory, while a .First() would execute afterwards, which is better for
modifying my general settings.

Alternatively, perhaps save.image() might be modified to keep .First() and
Last() as the default. 

Many thanks, Jonathan (v. 0.63.2)

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 17 10:25:17 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 17 Jun 1999 11:25:17 +0200 (MET DST)
Subject: save.image() (PR#212)
Message-ID: <199906170925.LAA21831@pubhealth.ku.dk>

Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

> Would it be reasonable to suggest adding an `all' flag to save.image(),
> i.e.
> 
> "save.image" <-
> function (f = ".RData", all.names = F) 
> eval(substitute(save(list = ls(all.names = all.names), file = f)),
>     .GlobalEnv)

I believe this is simply a bug. I see no reason to skip the
dot-objects. 

[current save.image has ...list=ls()...]

CC-ed to r-bugs.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 17 21:42:18 1999
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: Thu, 17 Jun 1999 16:42:18 -0400
Subject: changes in configure (Re: Compilation fails (PR#209))
In-Reply-To: Your message of "Mon, 14 Jun 1999 18:34:59 EDT."
 <14181.12083.82468.559759@pc87.maho.magnaeu.com>
Message-ID: <199906172042.QAA13472@infiniti.ece.cmu.edu>

> If you are reading this, your mail reader may not support MIME.
> Some parts of this message will be readable as plain text.

--17.Jun.1999mysteryboxofun
Content-Type: text/plain


Kurt,

  uh, my original suggestion to check the installed xmkmf was directed
to Frank who wasn't very lucky with his Fortran compiler.
Now for AIX, for which I'm actually compiling R at the moment.

"Kurt" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
Kurt> AIX is not a supported platform yet.  If you tell me which flags (cpic,
Kurt> fpic, shlib, maybe something extra for producing the main binary) to use
Kurt> for this platform and the NATIVE compilers, I will gladly tell configure
Kurt> how to get things right on AIX.

I'd like to take you up on your offer, especially since I can't create
the configure file out of configure.in.  
Attached is (hopefully) a patchfile that updates configure fo AIX.  It
also patches the Makefile.in in src/library/modreg/src and it contains
ldAIX4 which is a script for the aux (in R-0.64.1) directory.
(I've put the patch at: www.ece.cmu.edu/~tov/public/R-on-aix42.patch)

Something like the following in a clean R-0.64.1 directory should
work:
$ cd R-0.64.1
$ patch -b -u -p0 < ../R-on-aix42.patch
$ chmod +x aux/ldAIX4
$ mkdir build && cd build
$ # force native compilers:
$ CC=cc ../configure --with-f77 --with-x --without-gnome
$ make

This still leaves the problem with R SHLIB.  AIX needs a file with
symbols that are exported from the main program (R.binary).  A "make
install" should store this file in RHOME/etc/main.exp or somwhere
close.  Lemme think about how to work with in installed R.

A final "make test" runs smoothly up to ../../tests/print-tests.R.
There are some diffs with the length of printed doubles, like,
< [4,] 1.7976931348623157e+308
---
> [4,] 1.797693134862315708145e+308
So the printed number in AIX is shorter?  Any comments?

Thanks,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

--17.Jun.1999mysteryboxofun
Content-Type: application/octet-stream; name="R-on-aix42.patch.gz"
Content-Description: ~/public/R-on-aix42.patch.gz
Content-Transfer-Encoding: base64

H4sICLY8aTcAA1Itb24tYWl4NDIucGF0Y2gAlVZ7V9s2FP87+RR3xmfkZROHBBpDKO81PVB6
gO5FGFVsOdZwJM9yCFnLd9+V5JCEtut2jo8lX/3u+yFfOk13q+0S9gg2jEIWReBMwN0IBI/Y
aJJRV2RstEwoO47zBaB0mjE4JzOAbWh2/VbHbzfB63a75Xq9vowu/UJDeDvh4G3h4292/E7X
APf3wdnsdLcaW1DXq/cK9vfLsLYGfR6yBxZOSAJpQvJIZGMQDzTLWEilW4YyBERSsOxPsZD5
kwWMl+sANfSq7d60nO5traoIAGfHR+fHvXW7kov0TmZByLLqBpk8biThQf/X9rpBHZ+dnZ4d
/HTVW4+2t8EZhjNOxiwoTteO3vePzLkTpSwoqKdfo169Oesfnh33UM4KoRDvDM8H/tXlCThv
Ol4LnGv9HnJBeZ7NcEcfU5IkuOn7xubhhCWhthqt3xgTxjcSNnQRN7cO3hchcmOYMmSOyQOF
PKYQiSQRU8ZHkDBOocIpDTEbiAX0MBEkdIMiTgHJYW8PVNpCGkkUtbs7OLk4LdfX8Ftxvzn4
+eTu3cXd1W/nhxdndx/eHZ9cXh1doC9eua6RSs7OThnfJEljUhMywjQoKhSBshxGKb2bsjy+
Q5mPJMjB/mQOnywD/aYll9+oXBUXDElGstnGWIQZHWnSOblHwxPqMj4v6e8ji1r/jyJL1/EE
3hIOLQ88z29v+mqzaILvi1npDmyNV36zueiOVquxDXV8m8Yo7Qcp2BWspyq8LI65GruS3o/0
p1RtYtA+rheHb6+qZaf0knGIBXVpqhQcAfb+M7aO2KJ6lb7lQq6uQnE9xUPFs/Y/FKB9Y2zf
ZBYklHAf9FI2i//NdC+ad57WBaVI3wuISZMK8jZ4bb+55Xe2ltO0gJeuEKWRm+C98jttv7W5
SEez0YS619jaVNmor/0A2jcZl+v4BdcxkyCDjKU5xDRJJZbwOGWJaj8CqnEhzcQoI2PsTaxx
3aoTnGLFsFEyVEsi3gXo5+sSin4VHNA4kIwHpq9R5j3NsM8l5ALuuZhqMs4EkeVaDpM5iEhT
VzRPY8qX7FLnMiYZKlEVYwxDopKxyqeMVdZBRTUvhIlIUVKlWtW2QpBRklOJjqrCVuxWMaUs
qOC4maJgigMcZmICOUVhLFe2o+cUt0qKjp/iVq2fo3KpxCz8Mk6p2fWFVxXmUhcs16q6yKPY
TjVMJSQnIwpTCmSSizHJWYDjdQYkDMFyhif+3Eo04LQQbQJiwogxQYvXn4eqmHP2/YV/YzIb
og4VFwIpyeNnM7RP+AiOOjE+eTF9VTrbbsvVlSNpDs6j2k4kGtuzPqjFh49DvON0gOzmR7jB
3tlFfSpCe7eQhLBLspHU4vDDdd09S8lgEdzgTPUcy4mtJ+iBWuF2R7mGl2SJBrEAb+/HFt6e
Wp+liI+YDhzjETO1fBTT4F6L1vqxkoocmOzqy9f2ilsXsK3VtFApQVjP/tR6bUQ/IVXGLMqh
hTu8Ggp0bQXurfAWuzVHPHMv8a5wPpdYAaCSBC/tF8M/KV4yuCNZEDPMoXIBS0votWchc6RP
RzsQivllqPxDEnoINVdUYY62zUYfWjs7YFR+hYd8jycUnBbGqgufj0EK03+YijRjPC/KZpSI
If4Hydk4FYmEyoRLzAQNGzDdEDhpSEgzjAof9/hYLSLNUamTgjMCTL3RcUnxPwqnh+VGE65z
eo2VnHnq1bJM7VrFEbLgTUUfvd66bPwxcAeVG+L8feD8flusTad7d1sbVDEd1+DW7MbAa6i/
kSU1DyTTWg6/1DI/Gko519Qymv5Fz2GhR3FpXZhtVcgWTmHXgj2wi6Io120MpW3CAPPQfwaJ
nedwcNRPo/HOWvpA4z7DwCRSRRe/Jpz9pf5DFoKVg33+IO7nAxhteMDMWPa+ZYbJHKuDrnvK
fl3+BywP7vxxCwAA


--17.Jun.1999mysteryboxofun--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jun 18 07:07:15 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 18 Jun 1999 08:07:15 +0200 (CEST)
Subject: save.image() (PR#212)
In-Reply-To: <199906170925.LAA21831@pubhealth.ku.dk>
References: <199906170925.LAA21831@pubhealth.ku.dk>
Message-ID: <14185.57875.863375.292020@aragorn.ci.tuwien.ac.at>

>>>>> p dalgaard writes:

> Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
>> Would it be reasonable to suggest adding an `all' flag to save.image(),
>> i.e.
>> 
>> "save.image" <-
>> function (f = ".RData", all.names = F) 
>> eval(substitute(save(list = ls(all.names = all.names), file = f)),
>> .GlobalEnv)

> I believe this is simply a bug. I see no reason to skip the
> dot-objects. 

> [current save.image has ...list=ls()...]

> CC-ed to r-bugs.

Ok, changed to ls(all.names = TRUE).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pm254@medschl.cam.ac.uk  Fri Jun 18 08:05:06 1999
From: pm254@medschl.cam.ac.uk (Paul Murrell)
Date: Fri, 18 Jun 1999 08:05:06 +0100
Subject: graphics changes
Message-ID: <002c01beb958$e5664ce0$54566f83@capc03t.medlan.cam.ac.uk>

hi

i have just made a couple of graphics changes to R to make graphics clipping
more consistent and to make par(xpd) compatible with S.

as a result of these changes, there is a possibility that some graphics
output may "disappear" from existing R code
(i) because the output from rect() is now clipped in PostScript  and
(ii) because par(xpd=T) now means clip to figure region rather than clip to
device region.

the solution to the latter problem is to use par(xpd=NA) instead of
par(xpd=T) - if you have never used par(xpd) then nothing should change.
the solution to the former problem is to start using par(xpd) :)

these changes will only affect the R-release snapshots in the short term,
but ultimately they will be part of the R-devel prerelease and then release
0.65.

paul




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gonzalez@mppmu.mpg.de  Fri Jun 18 12:15:59 1999
From: gonzalez@mppmu.mpg.de (Jose Carlos Gonzalez)
Date: Fri, 18 Jun 1999 13:15:59 +0200 (MET DST)
Subject: Compilation fails (PR#209)
In-Reply-To: <14181.11583.323584.13254@pc87.maho.magnaeu.com>
Message-ID: <Pine.OSF.4.10.9906181251520.14280-200000@hegra9.mppmu.mpg.de>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--0-845171975-929704559=:14280
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Mon, 14 Jun 1999, Kurt Hornik wrote:

KH>>>>>> Frank Beimfohr writes:
KH>
KH>>> Hi,
KH>>>
KH>
KH>(As an aside.  This thread is quickly becoming extremely inefficient.  I
KH>am certainly willing to fix configuration/build problems, but if I ask
KH>SPECIFIC questions then I really need specific answers.)
KH>
KH>>> there are three different things going on here:
KH>>> (1) gmake by default has the option "-w" set, which is why you see
KH>>> these "Entering/Leaving directory ..." messages.  This option finds a
KH>>> way into the make flags when the system default make is called.  Not
KH>>> quite sure how, but don't blame it on configure.  Makeconf et. al. is
KH>>> more likely.
KH>
KH>I don't see how the system default could be called.  The instructions
KH>say that if you want to use non-default make, then you need to do
KH>(assuming a Bourne shell)
KH>
KH>	MAKE=/the/make/you/want ./configure
KH>	/the/make/you/want
KH>
KH>>> (2) Very annoyingly, modreg doesn't use the $(SHLIBLD) command but
KH>>> calls R with SHLIB as option.  Which is nothing you are interested in,
KH>>> but is a bad thing, IMHO.
KH>
KH>Good point.  Will have a look.
KH>

Did you get anything out of this problem? I'm trying to compile
the distributed source R-0.64.1 in my computer (Digital
AlphaStation, OSF1 V4.0 alpha) with gcc and g77. The standard cc
and f77 complain in this machine, and I thought that perhaps
with the GNU tools it would go fine. But it does not.

KH>>> (3) g77 croaks on -PIC: for this you may have to blame xmkmf (which
KH>>> configure uses.  Try to find out, what the default is.  Follow this example:
KH>>> tmp $ touch Imakefile
KH>>> tmp $ xmkmf
KH>>> imake -DUseInstalled -I/usr/lib/X11/config
KH>>> "./Imakefile", line 1: 1506-229 (W) File is empty.
KH>>> tmp $ grep -i pic Makefile 
KH>>> PICFLAGS = -bM\:SRE
KH>>> (Results are for an AIX box.  Your output should look different.)
KH>
KH>> I started 'configure' with the f2c- and without the g77-Option and used 
KH>> /usr/ccs/bin/make instead of gmake (very flexible, isn't it ;) 
KH>

Unfortunately, I cannot use f2c (well, I could install it, but I
would really prefer not to do it).

Attached I send, all together in one file:

- the command line and output of configure
- the Makeconf file
- the output after the compilation process starts... and fails

I still want to use R in this system. There are pre-compiled
binary distributions, but as I said in one previous e-mail, I
only find RPM packages for Alpha, and I would need a
"Gzipped+Tarred" distribution instead.

Cheers,

  J C 
--
470-"Don't worry! I still have a dagger attack."
	("FAMOUS LAST WORDS", collected by O.Rosenkranz)
====================================================================
   *    J. C. Gonzalez                   
  .     ------------------------------------------------------------  
  .     Max-Planck-Institut fuer Physik        Tel.: +49 89 32354445
   .    (Werner-Heisenberg-Institut)           Fax : +49 89 3226704   
     *  Foehringer Ring, 6          ... . .... . ..... ......... .. 
 .      D-80805 Muenchen  E-mail: gonzalez@mppmu.mpg.de
   .    Deutschland          WWW: hegra1.mppmu.mpg.de:8000/~gonzalez
====================================================================

--0-845171975-929704559=:14280
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=R-compil
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.OSF.4.10.9906181315590.14280@hegra9.mppmu.mpg.de>
Content-Description: 
Content-Disposition: attachment; filename=R-compil

IyBybSBjb25maWcuY2FjaGUNCiMgQ0M9Z2NjIEY3Nz1nNzcgLi9jb25maWd1
cmUgLS1wcmVmaXg9L2hkOTAvZ29uemFsZXovUiAtLXdpdGgtZzc3DQpjcmVh
dGluZyBjYWNoZSAuL2NvbmZpZy5jYWNoZQ0KY2hlY2tpbmcgZm9yIGEgQlNE
IGNvbXBhdGlibGUgaW5zdGFsbC4uLiAvYmluL2luc3RhbGxic2QgLWMNCmNo
ZWNraW5nIHdoZXRoZXIgbG4gLXMgd29ya3MuLi4geWVzDQpjaGVja2luZyBm
b3IgcmFubGliLi4uIHJhbmxpYg0KY2hlY2tpbmcgZm9yIGJpc29uLi4uIGJp
c29uIC15DQpjaGVja2luZyBmb3IgYXIuLi4gYXINCmNoZWNraW5nIGZvciBs
YXRleC4uLiAvdXNyL2xvY2FsL3RlVGV4L2Jpbi9hbHBoYS1vc2Y0LjAvbGF0
ZXgNCmNoZWNraW5nIGZvciBkdmlwcy4uLiAvdXNyL2xvY2FsL3RlVGV4L2Jp
bi9hbHBoYS1vc2Y0LjAvZHZpcHMNCmNoZWNraW5nIGZvciBtYWtlaW5kZXgu
Li4gL3Vzci9sb2NhbC90ZVRleC9iaW4vYWxwaGEtb3NmNC4wL21ha2VpbmRl
eA0KY2hlY2tpbmcgZm9yIHVuemlwLi4uIC91c3IvbG9jYWwvYmluL3Vuemlw
DQpjaGVja2luZyBmb3IgemlwLi4uIC91c3IvbG9jYWwvYmluL3ppcA0KY2hl
Y2tpbmcgZm9yIHBlcmwuLi4gL2Jpbi9wZXJsDQpjaGVja2luZyB3aGV0aGVy
IHBlcmwgaXMgcGVybCA1Li4uIHllcw0KY2hlY2tpbmcgZm9yIGdjYy4uLiBn
Y2MNCmRlZmluaW5nIEY3NyB0byBiZSBnNzcNCmNoZWNraW5nIGZvciB1bmRl
cnNjb3JlIGFmdGVyIEZvcnRyYW4gc3ltYm9scy4uLiB5ZXMNCmNoZWNraW5n
IGZvciBzaW4gaW4gLWxtLi4uIHllcw0KY2hlY2tpbmcgZm9yIHNpbiBpbiAt
bG1vdG8uLi4gbm8NCmNoZWNraW5nIGZvciBtYWluIGluIC1sbmN1cnNlcy4u
LiBubw0KY2hlY2tpbmcgZm9yIG1haW4gaW4gLWx0ZXJtY2FwLi4uIHllcw0K
Y2hlY2tpbmcgZm9yIGRsb3BlbiBpbiAtbGRsLi4uIG5vDQpjaGVja2luZyBm
b3IgbWFpbiBpbiAtbHouLi4geWVzDQpjaGVja2luZyBmb3IgbWFpbiBpbiAt
bGhkZjUuLi4gbm8NCmNoZWNraW5nIGZvciBtYWluIGluIC1sZHhtbC4uLiBu
bw0KY2hlY2tpbmcgZm9yIG1haW4gaW4gLWxibGFzLi4uIG5vDQpjaGVja2lu
ZyBmb3IgcmxfY2FsbGJhY2tfcmVhZF9jaGFyIGluIC1scmVhZGxpbmUuLi4g
bm8NCmNoZWNraW5nIGhvdyB0byBydW4gdGhlIEMgcHJlcHJvY2Vzc29yLi4u
IGdjYyAtRQ0KY2hlY2tpbmcgZm9yIEFOU0kgQyBoZWFkZXIgZmlsZXMuLi4g
eWVzDQpjaGVja2luZyBmb3IgcGlkX3QuLi4geWVzDQpjaGVja2luZyBmb3Ig
dmZvcmsuaC4uLiBubw0KY2hlY2tpbmcgZm9yIHdvcmtpbmcgdmZvcmsuLi4g
eWVzDQpjaGVja2luZyBmb3IgdnByaW50Zi4uLiB5ZXMNCmNoZWNraW5nIGZv
ciBhY29zaC4uLiB5ZXMNCmNoZWNraW5nIGZvciBhc2luaC4uLiB5ZXMNCmNo
ZWNraW5nIGZvciBhdGFuaC4uLiB5ZXMNCmNoZWNraW5nIGZvciBiY29weS4u
LiB5ZXMNCmNoZWNraW5nIGZvciBmaW5pdGUuLi4geWVzDQpjaGVja2luZyBm
b3IgaXNmaW5pdGUuLi4gbm8NCmNoZWNraW5nIGZvciBpc25hbi4uLiB5ZXMN
CmNoZWNraW5nIGZvciBtYXRoZXJyLi4uIG5vDQpjaGVja2luZyBmb3IgbWVt
Y3B5Li4uIHllcw0KY2hlY2tpbmcgZm9yIG1lbW1vdmUuLi4geWVzDQpjaGVj
a2luZyBmb3IgcmVnY29tcC4uLiB5ZXMNCmNoZWNraW5nIGZvciByaW50Li4u
IHllcw0KY2hlY2tpbmcgZm9yIHN0cmNvbGwuLi4geWVzDQpjaGVja2luZyBm
b3Igc3RydG9kLi4uIHllcw0KY2hlY2tpbmcgZm9yIHN0cnRvbC4uLiB5ZXMN
CmNoZWNraW5nIGZvciBzeXN0ZW0uLi4geWVzDQpjaGVja2luZyBmb3IgdGlt
ZXMuLi4geWVzDQpjaGVja2luZyBmb3Igc2lnc2V0am1wLi4uIHllcw0KY2hl
Y2tpbmcgZm9yIHNpZ2xvbmdqbXAuLi4geWVzDQpjaGVja2luZyBmb3IgX19z
ZXRmcHVjdy4uLiBubw0KY2hlY2tpbmcgZm9yIEFOU0kgQyBoZWFkZXIgZmls
ZXMuLi4gKGNhY2hlZCkgeWVzDQpjaGVja2luZyBmb3IgZGwuaC4uLiBubw0K
Y2hlY2tpbmcgZm9yIGRsZmNuLmguLi4geWVzDQpjaGVja2luZyBmb3IgZWxm
LmguLi4gbm8NCmNoZWNraW5nIGZvciBsb2NhbGUuaC4uLiB5ZXMNCmNoZWNr
aW5nIGZvciByZWFkbGluZS9oaXN0b3J5LmguLi4gbm8NCmNoZWNraW5nIGZv
ciBycGMveGRyLmguLi4geWVzDQpjaGVja2luZyBmb3Igc3lzL3RpbWVzLmgu
Li4geWVzDQpjaGVja2luZyBmb3IgdGltZS5oLi4uIHllcw0KY2hlY2tpbmcg
Zm9yIGllZWVmcC5oLi4uIG5vDQpjaGVja2luZyBmb3IgaWVlZTc1NC5oLi4u
IG5vDQpjaGVja2luZyBmb3IgdW5pc3RkLmguLi4geWVzDQpjaGVja2luZyBm
b3IgaGRmNS5oLi4uIG5vDQpjaGVja2luZyByZXR1cm4gdHlwZSBvZiBzaWdu
YWwgaGFuZGxlcnMuLi4gdm9pZA0KY2hlY2tpbmcgZm9yIHdvcmtpbmcgY29u
c3QuLi4geWVzDQpjaGVja2luZyBzaXplIG9mIGxvbmcuLi4gOA0KY2hlY2tp
bmcgZm9yIHhta21mLi4uIC91c3IvYmluL1gxMS94bWttZg0KY2hlY2tpbmcg
aG93IHRvIG1ha2Ugc2hhcmVkIGxpYnJhcmllcy4uLiBkb25lDQpjaGVja2lu
ZyBmb3IgWC4uLiBsaWJyYXJpZXMgLCBoZWFkZXJzIA0KY2hlY2tpbmcgZm9y
IGRuZXRfbnRvYSBpbiAtbGRuZXQuLi4gbm8NCmNoZWNraW5nIGZvciBkbmV0
X250b2EgaW4gLWxkbmV0X3N0dWIuLi4geWVzDQpjaGVja2luZyBmb3IgZ2V0
aG9zdGJ5bmFtZS4uLiB5ZXMNCmNoZWNraW5nIGZvciBjb25uZWN0Li4uIHll
cw0KY2hlY2tpbmcgZm9yIHJlbW92ZS4uLiB5ZXMNCmNoZWNraW5nIGZvciBz
aG1hdC4uLiB5ZXMNCmNoZWNraW5nIGZvciBJY2VDb25uZWN0aW9uTnVtYmVy
IGluIC1sSUNFLi4uIHllcw0KY2hlY2tpbmcgZm9yIGxwci4uLiBscHINCnVw
ZGF0aW5nIGNhY2hlIC4vY29uZmlnLmNhY2hlDQpjcmVhdGluZyAuL2NvbmZp
Zy5zdGF0dXMNCmNyZWF0aW5nIE1ha2Vjb25mDQpjcmVhdGluZyBNYWtlZmls
ZQ0KY3JlYXRpbmcgYWZtL01ha2VmaWxlDQpjcmVhdGluZyBkZW1vcy9NYWtl
ZmlsZQ0KY3JlYXRpbmcgZG9jL01ha2VmaWxlDQpjcmVhdGluZyBkb2Mva2V5
d29yZC10ZXN0DQpjcmVhdGluZyBkb2MvbWFudWFsL01ha2VmaWxlDQpjcmVh
dGluZyBkb2MvbWFudWFsL2xpYjJ0ZXgNCmNyZWF0aW5nIGRvYy9tYW51YWwv
UmVmZXJlbmNlLnRleA0KY3JlYXRpbmcgZG9jL21hbnVhbC9NYW51YWwudGV4
DQpjcmVhdGluZyBldGMvTWFrZWZpbGUNCmNyZWF0aW5nIGV0Yy9NYWtlY29u
Zg0KY3JlYXRpbmcgc3JjL01ha2VmaWxlDQpjcmVhdGluZyBzcmMvYXBwbC9N
YWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2luY2x1ZGUvTWFrZWZpbGUNCmNyZWF0
aW5nIHNyYy9saWJyYXJ5L01ha2VmaWxlDQpjcmVhdGluZyBzcmMvbWFpbi9N
YWtlZmlsZQ0KY3JlYXRpbmcgc3JjL25tYXRoL01ha2VmaWxlDQpjcmVhdGlu
ZyBzcmMvc2NyaXB0cy9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL3VuaXgvTWFr
ZWZpbGUNCmNyZWF0aW5nIHNyYy9nbm9tZS9NYWtlZmlsZQ0KY3JlYXRpbmcg
c3JjL2xpYnJhcnkvYmFzZS9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2xpYnJh
cnkvcHJvZmlsZS9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2xpYnJhcnkvZWRh
L01ha2VmaWxlDQpjcmVhdGluZyBzcmMvbGlicmFyeS9lZGEvc3JjL01ha2Vm
aWxlDQpjcmVhdGluZyBzcmMvbGlicmFyeS9scXMvTWFrZWZpbGUNCmNyZWF0
aW5nIHNyYy9saWJyYXJ5L2xxcy9zcmMvTWFrZWZpbGUNCmNyZWF0aW5nIHNy
Yy9saWJyYXJ5L21vZHJlZy9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2xpYnJh
cnkvbW9kcmVnL3NyYy9NYWtlZmlsZQ0KY3JlYXRpbmcgc3JjL2xpYnJhcnkv
bXZhL01ha2VmaWxlDQpjcmVhdGluZyBzcmMvbGlicmFyeS9tdmEvc3JjL01h
a2VmaWxlDQpjcmVhdGluZyBzcmMvbGlicmFyeS9zdGVwZnVuL01ha2VmaWxl
DQpjcmVhdGluZyBzcmMvc2NyaXB0cy9DT01QSUxFDQpjcmVhdGluZyBzcmMv
c2NyaXB0cy9JTlNUQUxMDQpjcmVhdGluZyBzcmMvc2NyaXB0cy9SRU1PVkUN
CmNyZWF0aW5nIHNyYy9zY3JpcHRzL1Iuc2gNCmNyZWF0aW5nIHNyYy9zY3Jp
cHRzL1JkY29udg0KY3JlYXRpbmcgc3JjL3NjcmlwdHMvUmRpbmRleA0KY3Jl
YXRpbmcgc3JjL3NjcmlwdHMvUm1hbjJSZA0KY3JlYXRpbmcgc3JjL3Njcmlw
dHMvU0hMSUINCmNyZWF0aW5nIHNyYy9zY3JpcHRzL1NkMlJkDQpjcmVhdGlu
ZyBzcmMvc2NyaXB0cy9idWlsZC1oZWxwDQpjcmVhdGluZyBzcmMvc2NyaXB0
cy9md2YydGFibGUNCmNyZWF0aW5nIHNyYy9zY3JpcHRzL2hlbHAucHJldHR5
DQpjcmVhdGluZyBzcmMvc2NyaXB0cy9odG1sMmRvcw0KY3JlYXRpbmcgc3Jj
L3NjcmlwdHMvUmQyY29udGVudHMNCmNyZWF0aW5nIHRlc3RzL01ha2VmaWxl
DQpjcmVhdGluZyB0ZXN0cy9FeGFtcGxlcy9NYWtlZmlsZQ0KY3JlYXRpbmcg
c3JjL2luY2x1ZGUvUGxhdGZvcm0uaA0Kc3JjL2luY2x1ZGUvUGxhdGZvcm0u
aCBpcyB1bmNoYW5nZWQNCg0KDQpSIGlzIG5vdyBjb25maWd1cmVkIGZvciBh
bHBoYS1kZWMtb3NmNC4wDQoNCiAgU291cmNlIGRpcmVjdG9yeTogICAgICAg
ICAuDQogIEluc3RhbGxhdGlvbiBkaXJlY3Rvcnk6ICAgL2hkOTAvZ29uemFs
ZXovUg0KICBDIGNvbXBpbGVyOiAgICAgICAgICAgICAgIGdjYyAtaWVlZV93
aXRoX2luZXhhY3QgLWcNCiAgRk9SVFJBTiBjb21waWxlcjogICAgICAgICBn
NzcgLU8yDQogIEdub21lIHN1cHBvcnQ6ICAgICAgICAgICAgbm8NCg0KIyBj
YXQgTWFrZWNvbmYNClBBQ0tBR0UgPSBSDQpWRVJTSU9OID0gMC42NC4xDQoN
CkFSID0gYXINCkJMQVMgPSBibGFzLm8NCkNDID0gZ2NjDQpDRkxBR1MgPSAt
aWVlZV93aXRoX2luZXhhY3QgLWcNCkNQSUNGTEFHUyA9IA0KQ1BQRkxBR1Mg
PSAtSS4uL2luY2x1ZGUgLUkkKHRvcF9zcmNkaXIpL3NyYy9pbmNsdWRlIA0K
RExMRkxBR1MgPSANCkRWSVBTID0gL3Vzci9sb2NhbC90ZVRleC9iaW4vYWxw
aGEtb3NmNC4wL2R2aXBzDQpGQyA9IGc3Nw0KRkZMQUdTID0gLU8yDQpGUElD
RkxBR1MgPSAtZnBpYw0KRjJDID0gDQpGMkNGTEFHUyA9IA0KR05PTUVVSV9M
SUJTID0gDQpHTk9NRV9MSUJESVIgPSANCkdOT01FX0lOQ0xVREVESVIgPSAN
CklOU1RBTEwgPSAvYmluL2luc3RhbGxic2QgLWMNCklOU1RBTExfREFUQSA9
ICR7SU5TVEFMTH0gLW0gNjQ0DQpJTlNUQUxMX1BST0dSQU0gPSAke0lOU1RB
TEx9DQpJTlNUQUxMX0RJUiA9ICR7SU5TVEFMTH0gLWQNCkxBVEVYID0gL3Vz
ci9sb2NhbC90ZVRleC9iaW4vYWxwaGEtb3NmNC4wL2xhdGV4DQpMRENNRCA9
IGc3Nw0KTERGTEFHUyA9IA0KTElCUyA9ICAtbHogLWx0ZXJtY2FwIC1sbSAN
CkxOX1MgPSBsbiAtcw0KTUFLRUlOREVYID0gL3Vzci9sb2NhbC90ZVRleC9i
aW4vYWxwaGEtb3NmNC4wL21ha2VpbmRleA0KTUtJTlNUQUxMRElSUyA9ICQo
dG9wX3NyY2RpcikvYXV4L21raW5zdGFsbGRpcnMNClJBTkxJQiA9IHJhbmxp
Yg0KU0hFTEwgPSAvYmluL3NoDQpTSExJQkVYVCA9IHNvDQpTSExJQkxEID0g
bGQNClNITElCTERGTEFHUyA9IC1zaGFyZWQNClRBUiA9IHRhcg0KWF9DRkxB
R1MgPSANClhfTElCUyA9ICAtbFgxMQ0KWF9QUkVfTElCUyA9ICAtbFNNIC1s
SUNFDQpYX0VYVFJBX0xJQlMgPSAgLWxkbmV0X3N0dWINCllBQ0MgPSBiaXNv
biAteQ0KDQouU1VGRklYRVM6DQouU1VGRklYRVM6IC5jIC5mIC5vDQouYy5v
Og0KCSQoQ0MpICQoQ0ZMQUdTKSAkKENQUEZMQUdTKSAtYyAkPCAtbyAkQA0K
DQouZi5jOg0KLmYubzoNCgkkKEZDKSAkKEZGTEFHUykgLWMgJDwgLW8gJEAN
Cg0KcHJlZml4ID0gL2hkOTAvZ29uemFsZXovUg0KZXhlY19wcmVmaXggPSAk
e3ByZWZpeH0NCmJpbmRpciA9ICR7ZXhlY19wcmVmaXh9L2Jpbg0KZGF0YWRp
ciA9ICR7cHJlZml4fS9zaGFyZQ0KbGliZGlyID0gJHtleGVjX3ByZWZpeH0v
bGliDQptYW5kaXIgPSAke3ByZWZpeH0vbWFuDQoNCnJob21lID0gJHtleGVj
X3ByZWZpeH0vbGliL1INCg0KIyBnbnVtYWtlDQpnbnVtYWtlWzFdOiBFbnRl
cmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL2FmbScN
CmdudW1ha2VbMV06IExlYXZpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxl
ei9SLTAuNjQuMS9hZm0nDQpnbnVtYWtlWzFdOiBFbnRlcmluZyBkaXJlY3Rv
cnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL2RlbW9zJw0KZ251bWFrZVsx
XTogTGVhdmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4x
L2RlbW9zJw0KZ251bWFrZVsxXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5
MC9nb256YWxlei9SLTAuNjQuMS9kb2MnDQpnbnVtYWtlWzFdOiBMZWF2aW5n
IGRpcmVjdG9yeSBgL2hkOTAvZ29uemFsZXovUi0wLjY0LjEvZG9jJw0KZ251
bWFrZVsxXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9S
LTAuNjQuMS9ldGMnDQpnbnVtYWtlWzFdOiBMZWF2aW5nIGRpcmVjdG9yeSBg
L2hkOTAvZ29uemFsZXovUi0wLjY0LjEvZXRjJw0KZ251bWFrZVsxXTogRW50
ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9SLTAuNjQuMS9zcmMn
DQpnbnVtYWtlWzJdOiBFbnRlcmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnph
bGV6L1ItMC42NC4xL3NyYy9pbmNsdWRlJw0KZ251bWFrZVsyXTogTGVhdmlu
ZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9pbmNs
dWRlJw0KZ251bWFrZVsyXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9n
b256YWxlei9SLTAuNjQuMS9zcmMvYXBwbCcNCmdudW1ha2VbMl06IE5vdGhp
bmcgdG8gYmUgZG9uZSBmb3IgYFInLg0KZ251bWFrZVsyXTogTGVhdmluZyBk
aXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9hcHBsJw0K
Z251bWFrZVsyXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxl
ei9SLTAuNjQuMS9zcmMvbm1hdGgnDQpnbnVtYWtlWzJdOiBOb3RoaW5nIHRv
IGJlIGRvbmUgZm9yIGBSJy4NCmdudW1ha2VbMl06IExlYXZpbmcgZGlyZWN0
b3J5IGAvaGQ5MC9nb256YWxlei9SLTAuNjQuMS9zcmMvbm1hdGgnDQpnbnVt
YWtlWzJdOiBFbnRlcmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1It
MC42NC4xL3NyYy91bml4Jw0KZ251bWFrZVsyXTogTm90aGluZyB0byBiZSBk
b25lIGZvciBgUicuDQpnbnVtYWtlWzJdOiBMZWF2aW5nIGRpcmVjdG9yeSBg
L2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL3VuaXgnDQpnbnVtYWtlWzJd
OiBFbnRlcmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4x
L3NyYy9tYWluJw0KZ251bWFrZVsyXTogTm90aGluZyB0byBiZSBkb25lIGZv
ciBgUicuDQpnbnVtYWtlWzJdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hkOTAv
Z29uemFsZXovUi0wLjY0LjEvc3JjL21haW4nDQpnbnVtYWtlWzJdOiBFbnRl
cmluZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9z
Y3JpcHRzJw0KZ251bWFrZVsyXTogTGVhdmluZyBkaXJlY3RvcnkgYC9oZDkw
L2dvbnphbGV6L1ItMC42NC4xL3NyYy9zY3JpcHRzJw0KZ251bWFrZVsyXTog
RW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9SLTAuNjQuMS9z
cmMvbGlicmFyeScNCmdudW1ha2VbM106IEVudGVyaW5nIGRpcmVjdG9yeSBg
L2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvYmFzZScNCkJ1
aWxkaW5nIFIgYmFzZSBwYWNrYWdlDQpnbnVtYWtlWzNdOiBMZWF2aW5nIGRp
cmVjdG9yeSBgL2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkv
YmFzZScNCmdudW1ha2VbM106IEVudGVyaW5nIGRpcmVjdG9yeSBgL2hkOTAv
Z29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvZWRhJw0KZ251bWFrZVs0
XTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9SLTAuNjQu
MS9zcmMvbGlicmFyeS9lZGEvc3JjJw0KZ251bWFrZVs0XTogTGVhdmluZyBk
aXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9saWJyYXJ5
L2VkYS9zcmMnDQpnbnVtYWtlWzNdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hk
OTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvZWRhJw0KZ251bWFr
ZVszXTogRW50ZXJpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9SLTAu
NjQuMS9zcmMvbGlicmFyeS9scXMnDQpnbnVtYWtlWzRdOiBFbnRlcmluZyBk
aXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9saWJyYXJ5
L2xxcy9zcmMnDQpnbnVtYWtlWzRdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hk
OTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvbHFzL3NyYycNCmdu
dW1ha2VbM106IExlYXZpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256YWxlei9S
LTAuNjQuMS9zcmMvbGlicmFyeS9scXMnDQpnbnVtYWtlWzNdOiBFbnRlcmlu
ZyBkaXJlY3RvcnkgYC9oZDkwL2dvbnphbGV6L1ItMC42NC4xL3NyYy9saWJy
YXJ5L21vZHJlZycNCmdudW1ha2VbNF06IEVudGVyaW5nIGRpcmVjdG9yeSBg
L2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvbW9kcmVnL3Ny
YycNCi4uLy4uLy4uLy4uL2Jpbi9SIFNITElCIC1vIG1vZHJlZy5zbyBic3Bs
dmQubyBidmFsdWUubyBidmFsdXMubyBrc21vb3RoLm8gbG9lc3NjLm8gbG9l
c3NmLm8gcHByLm8gcXNiYXJ0Lm8gc2JhcnQubyBzZ3JhbS5vIHNpbmVycC5v
IHNzbHZyZy5vIHN0eHd4Lm8NCk1ha2U6IFVua25vd24gZmxhZyBhcmd1bWVu
dCB3LiAgU3RvcC4NCmdudW1ha2VbNF06ICoqKiBbbW9kcmVnLnNvXSBFcnJv
ciAxDQpnbnVtYWtlWzRdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hkOTAvZ29u
emFsZXovUi0wLjY0LjEvc3JjL2xpYnJhcnkvbW9kcmVnL3NyYycNCmdudW1h
a2VbM106ICoqKiBbYWxsXSBFcnJvciAxDQpnbnVtYWtlWzNdOiBMZWF2aW5n
IGRpcmVjdG9yeSBgL2hkOTAvZ29uemFsZXovUi0wLjY0LjEvc3JjL2xpYnJh
cnkvbW9kcmVnJw0KZ251bWFrZVsyXTogKioqIFtSXSBFcnJvciAxDQpnbnVt
YWtlWzJdOiBMZWF2aW5nIGRpcmVjdG9yeSBgL2hkOTAvZ29uemFsZXovUi0w
LjY0LjEvc3JjL2xpYnJhcnknDQpnbnVtYWtlWzFdOiAqKiogW1JdIEVycm9y
IDENCmdudW1ha2VbMV06IExlYXZpbmcgZGlyZWN0b3J5IGAvaGQ5MC9nb256
YWxlei9SLTAuNjQuMS9zcmMnDQpnbnVtYWtlOiAqKiogW1JdIEVycm9yIDEN
Cg==
--0-845171975-929704559=:14280--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From John.Peters@tip.csiro.au  Mon Jun 21 00:24:25 1999
From: John.Peters@tip.csiro.au (John.Peters@tip.csiro.au)
Date: Mon, 21 Jun 1999 01:24:25 +0200 (MET DST)
Subject: as.numeric with trailing spaces (PR#213)
Message-ID: <199906202324.BAA11356@pubhealth.ku.dk>

For R bugs:

"as.numeric" fails on strings with trailing spaces:
(OK in Splus 3.4).

> as.numeric(c("2"," 3","4 "," 5 "))
Warning: NAs introduced by coercion
[1]  2  3 NA NA
>

occurs in both "rw0641b" and "R-base-0.64.1-4-i386.rpm".

Thanks for R
----------------------------------------------------------------------------
John Peters
CSIRO National Measurement Laboratory
PO Box 218                                Phone:    +61 2 9413 7503
Lindfield NSW 2070                        Fax:      +61 2 9413 7202
Australia                                 Internet: John.Peters@tip.CSIRO.AU
----------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 21 10:12:31 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jun 1999 11:12:31 +0200
Subject: as.numeric with trailing spaces (PR#213)
In-Reply-To: John.Peters@tip.csiro.au's message of "Mon, 21 Jun 1999 01:24:25 +0200 (MET DST)"
References: <199906202324.BAA11356@pubhealth.ku.dk>
Message-ID: <x2lndd9atc.fsf@blueberry.kubism.ku.dk>

John.Peters@tip.csiro.au writes:

> For R bugs:
> 
> "as.numeric" fails on strings with trailing spaces:
> (OK in Splus 3.4).
> 
> > as.numeric(c("2"," 3","4 "," 5 "))
> Warning: NAs introduced by coercion
> [1]  2  3 NA NA
> >
> 
> occurs in both "rw0641b" and "R-base-0.64.1-4-i386.rpm".

Could probably be argued that one deserves what one gets in that case,
but it'll be easier just to change it.... (*endp == '\0' after strtod
needs to check for blank-or-empty string instead).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 21 13:48:52 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jun 1999 14:48:52 +0200
Subject: as.numeric with trailing spaces (PR#213)
In-Reply-To: Peter Dalgaard BSA's message of "21 Jun 1999 11:12:31 +0200"
References: <199906202324.BAA11356@pubhealth.ku.dk> <x2lndd9atc.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2hfo190sr.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > > as.numeric(c("2"," 3","4 "," 5 "))

> Could probably be argued that one deserves what one gets in that case,
> but it'll be easier just to change it.... (*endp == '\0' after strtod
> needs to check for blank-or-empty string instead).

Done.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jun 22 21:06:49 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 22 Jun 1999 22:06:49 +0200 (CEST)
Subject: readline/history size (PR#211)
In-Reply-To: <199906142209.AAA02065@pubhealth.ku.dk>
References: <199906142209.AAA02065@pubhealth.ku.dk>
Message-ID: <14191.60633.543672.981594@aragorn.ci.tuwien.ac.at>

>>>>> seniorr  writes:

> Full_Name: Russell Senior
> Version: 0.64.0
> OS: linux-2.2.x
> Submission from: (NULL) (198.107.133.11)


> It appears that the GNU readline history size is limited to 50
> entries.  This is apparently occurring because R is not bothering to
> override the readline default value (from readline-4.0):

>   ./history.c:59:#define DEFAULT_HISTORY_GROW_SIZE 50

> It appears that it ought to be possible to override this from R by
> setting the readline variable `history_size' to another value.  I
> request that a command-line option be added for doing this.  The
> following is an *untested* patch:

> ...

I cannot confirm that the history size is limited to 50.  In fact, on my
system the size of the .Rhistory files can grow indefinitely.

I have (in r-devel) introduced the environment variables R_HISTFILE and
R_HISTSIZE, with defaults ".Rhistory" and 512.  Upon saving, the hist
file is truncated to R_HISTSIZE lines, which I think is the right thing.

Btw, history_size is not in the history API.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jun 23 10:53:12 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 23 Jun 1999 11:53:12 +0200
Subject: make test/check ["changes in configure (for AIX; .....(PR#209)"]
In-Reply-To: <199906172042.QAA13472@infiniti.ece.cmu.edu> (message from Thomas
 Vogels on Thu, 17 Jun 1999 16:42:18 -0400)
References: <199906172042.QAA13472@infiniti.ece.cmu.edu>
Message-ID: <199906230953.LAA22019@sophie.ethz.ch>

If you have a few minutes time to help R development / testing,
*and* if have more than just a binary version of R, please read on..

>>>>> On Thu, 17 Jun 1999, Thomas Vogels <tov@infiniti.ece.cmu.edu> said:

      <....>

    ToV> "Kurt" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
    Kurt> AIX is not a supported platform yet.

      <....>

    ToV> A final "make test" runs smoothly up to ../../tests/print-tests.R.
    ToV> There are some diffs with the length of printed doubles, like, <
    ToV> [4,] 1.7976931348623157e+308 ---
      >> [4,] 1.797693134862315708145e+308
    ToV> So the printed number in AIX is shorter?  Any comments?


I have been mainly responsible for  print-tests (and other "make test"s w/ R).
Already in the past we have realized that the C libraries which are
implementing printf() *are* quite different in their behavior, unfortunately.
The above difference is from formatC()'s output, and
formatC uses C-formatting (as its name might suggest..).

There are other places which might give C-library-dependent output.
Before I change  tests/print-tests.R (and ...Rout.save) again
(such that "make test" == "make check" runs to completion on AIX),
I'd be very glad if many of you R-users installers could run

    make check

	 [I think this will only work from the top-level of the
	  Source/Installation tree; i.e. is not available for those who 
	  only installed a binary distribution.
	  Redhat/SuSe Speak: you need SRPMS, not only RPMS]

and report --- to me, not all of R-devel ---
in case you DON'T get the final OK of the line
------------------------------------------------------------------------
Comparing `print-tests.Rout' to `./print-tests.Rout.save' ... OK
------------------------------------------------------------------------
	{{In case you don't get OK, please send me the WHOLE FILE
	  tests/Examples/print-tests.Rout.fail }}

Other problems of "make check" should also be reported, 
probably to R-devel maybe to R-bugs (which forwards to R-devel).

On the other hand, if make check runs to completion,
you get something like a benchmark (with all flaws of every benchmark)
of your computer's speed in running R:

  grep '^Time elapsed:' tests/Examples/base-Ex.Rout

              (almost the last line of tests/Examples/base-Ex.Rout)

will give you the CPU (and total..) Time that was needed to execute 
*all* examples in the R base package.

Thank you in advance!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Jun 26 13:23:32 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 26 Jun 1999 14:23:32 +0200
Subject: What is "..."  when it's empty?  -- differences to S
Message-ID: <199906261223.OAA14628@sophie.ethz.ch>

i)       (function(x, ...) length(...))(1)

gives 0 in S (plus 3.4) and an error in R.
It also gives an error in Splus 5.0r3.
So we could well remain as we are... however

ii)	(function(x, ...) length(...))(1,2)

gives 1  in all dialects of S that I have available.
So by my `continuation logic', I'd argue that  "i)" above should give 0
(and R and S-plus 5.0r3 behave inconsistently.

Do we yet have any documentation on "..." ??

In both Splus 3.4 and 5.0r3,
   (function(x, ...) mode(...))(1)	returns "missing"
whereas R gives an interesting error:
    R> trace(mode)
    R> (function(x, ...) mode(...))(1)
    trace: mode(...)
    Error: Argument "x" is missing, with no default

---
What is desired for R?

BTW: Found the above problem when trying to use 
       C(<factor>) without a 2nd argument;  a patch for that will be in the 
       snapshots..

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jun 26 15:53:02 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Jun 1999 16:53:02 +0200
Subject: What is "..."  when it's empty?  -- differences to S
In-Reply-To: Martin Maechler's message of "Sat, 26 Jun 1999 14:23:32 +0200"
References: <199906261223.OAA14628@sophie.ethz.ch>
Message-ID: <x2674b57zl.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> i)       (function(x, ...) length(...))(1)
> 
> gives 0 in S (plus 3.4) and an error in R.
> It also gives an error in Splus 5.0r3.
> So we could well remain as we are... however
> 
> ii)	(function(x, ...) length(...))(1,2)
> 
> gives 1  in all dialects of S that I have available.
> So by my `continuation logic', I'd argue that  "i)" above should give 0
> (and R and S-plus 5.0r3 behave inconsistently.
> 
> Do we yet have any documentation on "..." ??
> 
> In both Splus 3.4 and 5.0r3,
>    (function(x, ...) mode(...))(1)	returns "missing"
> whereas R gives an interesting error:
>     R> trace(mode)
>     R> (function(x, ...) mode(...))(1)
>     trace: mode(...)
>     Error: Argument "x" is missing, with no default
> 
> ---
> What is desired for R?

I don't have S-plus 5.0r3 around, but the two others are consistent
with the result of length(), resp. mode() (with no arguments), both of
which have minor R/S incompatiblities. I see nothing wrong with "...",
but we might consider modifying length() and mode(), both of which
look like one-line if(is.missing(.... changes.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun 27 08:39:51 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 27 Jun 1999 08:39:51 +0100 (BST)
Subject: What is "..."  when it's empty?  -- differences to S
In-Reply-To: <199906261223.OAA14628@sophie.ethz.ch>
Message-ID: <Pine.GSO.4.05.9906270818300.14170-100000@auk.stats>

On Sat, 26 Jun 1999, Martin Maechler wrote:

> i)       (function(x, ...) length(...))(1)
> 
> gives 0 in S (plus 3.4) and an error in R.
> It also gives an error in Splus 5.0r3.
> So we could well remain as we are... however
> 
> ii)	(function(x, ...) length(...))(1,2)
> 
> gives 1  in all dialects of S that I have available.
> So by my `continuation logic', I'd argue that  "i)" above should give 0
> (and R and S-plus 5.0r3 behave inconsistently.

Try 

iii)   (function(x, ...) length(...))(1,2,3)

to see that the continuation logic is false.

I think function(x, ...) length(list(...)) is what one wants here, and they 
(R, 3.4, 5.1) are all consistent on that.  (I see that is what you put in
C.)

> Do we yet have any documentation on "..." ??
> 
> In both Splus 3.4 and 5.0r3,
>    (function(x, ...) mode(...))(1)	returns "missing"
> whereas R gives an interesting error:
>     R> trace(mode)
>     R> (function(x, ...) mode(...))(1)
>     trace: mode(...)
>     Error: Argument "x" is missing, with no default
> 
> ---
> What is desired for R?

I would leave these: none of them seem sensible uses of ... to me.

BTW, NEWS says

    o   C() didn't works (again?) for a single argument

which apart from grammar seems not entirely precise. It looks to me that
it failed if how.many _and_ ... were missing, and that was broken only
once, in 

revision 1.2.2.1
date: 1999/05/05 01:25:24;  author: ripley;  state: Exp;  lines: +4 -3
Add ... args to pass to contr.treatment etc

Also, I do not really like `didn't work': can we try to distinguish
between `failed' (gave an error) and `gave incorrect results'?  
Reason: the second is much more serious.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Jun 29 09:47:14 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 29 Jun 1999 10:47:14 +0200 (MET DST)
Subject: plot(..., lab=..) fails in axis() --- wrong "..." propagation (PR#215)
Message-ID: <199906290847.KAA19501@pubhealth.ku.dk>

> plot(1, lab=c(10,5,7))
Error in axis(side, at, labels, ...) : location and label lengths differ

Reason: lab is one of the "..."  which are passed down to all plots inside
	plot.default, including  axis(1, ...)
	"lab" in axis is interpreted as the "labels" argument
..
Different fixes seem possible,
an easy one:  Make `lab' a new explicit argument of  plot.default().

[I don't have time now]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Jun 29 16:31:40 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 29 Jun 1999 17:31:40 +0200 (CEST)
Subject: [R] Text in Plots
In-Reply-To: <006601bec21d$53f72ae0$54566f83@capc03t.medlan.cam.ac.uk>
References: <006601bec21d$53f72ae0$54566f83@capc03t.medlan.cam.ac.uk>
Message-ID: <14200.59100.382953.315832@galadriel.ci.tuwien.ac.at>


[ taken to r-devel ]

>>>>> On Tue, 29 Jun 1999 11:51:21 +0100,
>>>>> Paul Murrell (PM) wrote:

PM> hi
PM> ---snip---

PM> Dear R-users,
PM> I have two problems:
PM> 1) In producing mathematical notation in plots I can not produce the
PM> italic version of greek symbols. That is
PM>     mtext(text=expression(mu[i]))
PM> gives the same as
PM>     mtext(text=expression(italic(mu[i])))
PM> Is this a bug or a specifity of my machine (R 0.63.2, Linux 2.0.36,
PM> i686)?

PM> 2) I would like to add x and ylabels in boxplots. Is there a way to
PM> do this? I tried:
PM>     bxp(bpdata, xlab="Size Classes", ylab="Cash Flow")
PM> ---snip---

PM> 1)  this is a "feature";  the only available fonts at present are plain,
PM> bold, italic, bolditalic, and symbol.

Hmm, are we sure that this is a "feature"? The most common use for
greek symbols is in equation and the most common word processor for R
users is (hopefully/probably/maybe) LaTeX ... and greek letters in
LaTeX equations are italic ... hence shouldn't we make them available
(if possible)?

But I must admit that I obviously didn't need it before ... :-)


.f


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jun 29 17:27:15 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 29 Jun 1999 18:27:15 +0200
Subject: typeof ( substitute(expression(),..) ) -- musings
In-Reply-To: <x290932h11.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 29 Jun 1999 16:55:06 +0200)
References: <199906291258.OAA10869@sophie.ethz.ch> <x290932h11.fsf@blueberry.kubism.ku.dk>
Message-ID: <199906291627.SAA11269@sophie.ethz.ch>

[Relates to  math text / normal text mixing in plots ..]

Peter, I knew you'd know the answer quickly...

Anyway, one needs to be somewhat careful here [R version  pre 0.64.2]:

    typeof(print( e1 <-            expression(a + b))) # expression 
    typeof(print(se1 <- substitute(expression(a + b), list(a = 1)))) # language

    length(e1) # == 1
    length(se1)# == 2

    text.e <- function(x,y,e) {
        text(x,y,paste(deparse(substitute(e)),": "),adj=c(1,0))
	text(x,y,e, adj=0)
    }
    plot(1,type="n", axes= F)
    text.e(1,1.4, e1); text.e(1,1.3, se1); text.e(1,1.2, se1[[2]])

Which shows that you can't use the result of `substitute' directly, but
rather the 2nd element [[which is *still* not an expression !!]]

This is all +- S-plus (3.4) compatible 
     {{some details are NOT compatible; e.g. 
	     as.expression(se1[[2]])
       gives `what you expect' in R, but not in S-plus 3.4 or 5.0r3
     }}

  e1 is an expression	whereas
 se1 is a  call (aka "language" in R).

----
Is this documented anywhere? [blue book; language reference; ?? ]

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jun 29 19:06:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Jun 1999 20:06:54 +0200
Subject: typeof ( substitute(expression(),..) ) -- musings
In-Reply-To: Martin Maechler's message of "Tue, 29 Jun 1999 18:27:15 +0200"
References: <199906291258.OAA10869@sophie.ethz.ch> <x290932h11.fsf@blueberry.kubism.ku.dk> <199906291627.SAA11269@sophie.ethz.ch>
Message-ID: <x2aeti285d.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> [Relates to  math text / normal text mixing in plots ..]
> 
> Peter, I knew you'd know the answer quickly...
> 
> Anyway, one needs to be somewhat careful here [R version  pre 0.64.2]:

..and the first thing to be careful with is the version, expressions
behave slightly different in 0.65!

> 
>     typeof(print( e1 <-            expression(a + b))) # expression 
>     typeof(print(se1 <- substitute(expression(a + b), list(a = 1)))) # language
> 
>     length(e1) # == 1
>     length(se1)# == 2
> 
>     text.e <- function(x,y,e) {
>         text(x,y,paste(deparse(substitute(e)),": "),adj=c(1,0))
> 	text(x,y,e, adj=0)
>     }
>     plot(1,type="n", axes= F)
>     text.e(1,1.4, e1); text.e(1,1.3, se1); text.e(1,1.2, se1[[2]])
> 
> Which shows that you can't use the result of `substitute' directly, but
> rather the 2nd element [[which is *still* not an expression !!]]

Yes. I forgot. se1 is not an expression object but a call to the
expression() - which evaluates to an expression object, i.e. one needs 

se2 <- eval(substitute(expression(a + b), list(a = 1)))

or you can ditch the expression() bit and use

sc2 <- substitute(a + b, list(a = 1))

which is 1 + b, mode "call" and will work with *most* graphics
operations, but there's a caveat: Sometimes language objects get
evaluated when you don't want them to. The notorious example is the
do.call construction in boxplot/bxp.

> This is all +- S-plus (3.4) compatible 
>      {{some details are NOT compatible; e.g. 
> 	     as.expression(se1[[2]])
>        gives `what you expect' in R, but not in S-plus 3.4 or 5.0r3
>      }}
> 
>   e1 is an expression	whereas
>  se1 is a  call (aka "language" in R).
> 
> ----
> Is this documented anywhere? [blue book; language reference; ?? ]

It will be... (It may be in the blue book, but my fading memory of it
says that it is not all that clear on this particular subject.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Jun 29 21:51:20 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 30 Jun 1999 08:51:20 +1200 (NZST)
Subject: [R] Text in Plots
In-Reply-To: <14200.59100.382953.315832@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.10.9906300837350.21611-100000@stat1.stat.auckland.ac.nz>


On Tue, 29 Jun 1999, Friedrich Leisch wrote:

> 
> [ taken to r-devel ]
> 
> >>>>> On Tue, 29 Jun 1999 11:51:21 +0100,
> >>>>> Paul Murrell (PM) wrote:
> 
> PM> hi
> PM> ---snip---
> 
> PM> Dear R-users,
> PM> I have two problems:
> PM> 1) In producing mathematical notation in plots I can not produce the
> PM> italic version of greek symbols. That is
> PM>     mtext(text=expression(mu[i]))
> PM> gives the same as
> PM>     mtext(text=expression(italic(mu[i])))
> PM> Is this a bug or a specifity of my machine (R 0.63.2, Linux 2.0.36,
> PM> i686)?
> 
> PM> 2) I would like to add x and ylabels in boxplots. Is there a way to
> PM> do this? I tried:
> PM>     bxp(bpdata, xlab="Size Classes", ylab="Cash Flow")
> PM> ---snip---
> 
> PM> 1)  this is a "feature";  the only available fonts at present are plain,
> PM> bold, italic, bolditalic, and symbol.
> 
> Hmm, are we sure that this is a "feature"? The most common use for
> greek symbols is in equation and the most common word processor for R
> users is (hopefully/probably/maybe) LaTeX ... and greek letters in
> LaTeX equations are italic ... hence shouldn't we make them available
> (if possible)?
> 
> But I must admit that I obviously didn't need it before ... :-)

The problem is that the two initial targets for the equation stuff (X11
and PostScript -- do not come with anything other than a plain symbol
font. In principle there is no problem adding italic and bold Greek (and
other symbols), but most devices don't support them (does windows have
bold and italic versions of its symbol font?).

XFig is in a similar situation.

There are publically available Adobe Type1 versions of the TeX computer
modern fonts and this may provide a way of doing math in plots, but I
suspect that plots annotated in computer modern would be pretty ugly.


	Ross

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 30 21:11:18 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 30 Jun 1999 21:11:18 +0100 (BST)
Subject: PLATFORMS
Message-ID: <Pine.GSO.4.05.9906302105320.14-100000@auk.stats>

I would like to get the PLATFORMS file updated: there are very few reports
of successful builds of 0.64.x.  In particular, if there are builds on SGI,
DEC Alpha OSF or AIX (and I believe we have heard of the latter two) please
complete the following (from the end of PLATFORMS) and email to me:

NAME
EMAIL
VERSION         
PLATFORM        
SYSTEM          
CC
FC
MAKE

We do know about Solaris and hpux10.20 and many varieties of Linux on
Intel, but other reports would be welcome. As R-0.64.2 is imminent,
replies today or tommorrow would be especially helpful.

Brian Ripley

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

