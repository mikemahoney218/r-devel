From p.dalgaard@biostat.ku.dk  Thu Jan  2 13:54:37 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu Jan  2 13:54:37 2003
Subject: [Rd] R-1.6.2 on Jan.10
Message-ID: <x21y3v201c.fsf@biostat.ku.dk>

In case you haven't already noticed, daily beta versions of R 1.6.2
are being made available via

http://cran.us.r-project.org/src/base/

(also on the rest of CRAN, but the mirroring delays may make that less
useful) 

The plan is to have the final release on January 10, so we are now
entering the deep-freeze stage where only critical bugs will get
fixed. As usual, it would be a good thing to learn about build
troubles and "make check" failures before the release rather than the
day after.

Maintainers of recommended packages are kindly requested to abstain
from making API changes or functionality additions until after the
release.

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From phgrosjean@sciviews.org  Thu Jan  2 14:21:05 2003
From: phgrosjean@sciviews.org (Philippe Grosjean)
Date: Thu Jan  2 14:21:05 2003
Subject: [Rd] rounding errors in max.col()
Message-ID: <MABBLJDICACNFOLGIHJOCEDKDCAA.phgrosjean@sciviews.org>

Hello,

I suppose this is a general behavior with external function calls, so I do
not post (yet) a specific bug report. Could someone explain this?

a <- rep(1, 20) + rnorm(20, mean=0.00001, sd=0.0001)
b <- embed(a, 3)
# I want to know where the item in column 2 is greated than both col 1 and 3
(peak)
test1 <- max.col(b) == 2
# ... or I could use a less optimal code
test2 <- apply(b, 1, max) == b[, 2]
any(test1 != test2)	# both are equivalent

# but when numbers are very close
a <- rep(1, 20) + rnorm(20, mean=0.0000001, sd=0.0000001)
b <- embed(a, 3)
test1 <- max.col(b) == 2
test2 <- apply(b, 1, max) == b[, 2]
any(test1 != test2)	# tests are now DIFFERENT!
# Indeed, test2 is correct, and test1 suffers from wrong calculations due
probably to rounding errors in max.col()

Best,

Philippe Grosjean

...........]<(({°<...............<°}))><...............................
 ) ) ) ) )
( ( ( ( (       Dr. Philippe Grosjean
 ) ) ) ) )
( ( ( ( (       LOV, UMR 7093
 ) ) ) ) )      Station Zoologique
( ( ( ( (       Observatoire Océanologique
 ) ) ) ) )      BP 28
( ( ( ( (       06234 Villefranche sur mer cedex
 ) ) ) ) )      France
( ( ( ( (
 ) ) ) ) )      tel: +33.4.93.76.38.16, fax: +33.4.93.76.38.34
( ( ( ( (
 ) ) ) ) )      e-mail: phgrosjean@sciviews.org
( ( ( ( (       SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )
.......................................................................


From ripley@stats.ox.ac.uk  Thu Jan  2 14:41:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu Jan  2 14:41:02 2003
Subject: [Rd] rounding errors in max.col()
In-Reply-To: <MABBLJDICACNFOLGIHJOCEDKDCAA.phgrosjean@sciviews.org>
Message-ID: <Pine.LNX.4.31.0301021335200.21240-100000@gannet.stats>

Do read the help page:

     Ties are broken at random.  The determination of ``tie'' assumes
     that the entries are probabilities.

and then don't blame your tools when you misuse them ....

On Thu, 2 Jan 2003, Philippe Grosjean wrote:

> I suppose this is a general behavior with external function calls, so I do
> not post (yet) a specific bug report. Could someone explain this?
>
> a <- rep(1, 20) + rnorm(20, mean=0.00001, sd=0.0001)
> b <- embed(a, 3)
> # I want to know where the item in column 2 is greated than both col 1 and 3
> (peak)
> test1 <- max.col(b) == 2
> # ... or I could use a less optimal code
> test2 <- apply(b, 1, max) == b[, 2]
> any(test1 != test2)	# both are equivalent
>
> # but when numbers are very close
> a <- rep(1, 20) + rnorm(20, mean=0.0000001, sd=0.0000001)
> b <- embed(a, 3)
> test1 <- max.col(b) == 2
> test2 <- apply(b, 1, max) == b[, 2]
> any(test1 != test2)	# tests are now DIFFERENT!
> # Indeed, test2 is correct, and test1 suffers from wrong calculations due
> probably to rounding errors in max.col()

No, to max.col working as documented.

[Large waste of bandwidth deleted]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From deleeuw@stat.ucla.edu  Thu Jan  2 21:57:06 2003
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu Jan  2 21:57:06 2003
Subject: [Rd] Re: [R-SIG-Mac]4. Exit Gifi Gnome problem
In-Reply-To: <45253811-1E92-11D7-9EDE-00039376D51E@bio.umass.edu>
Message-ID: <9623C536-1E94-11D7-B68B-000393BB6D36@stat.ucla.edu>

Confirmed. It is not your version of R or environment or the window  
manager
(happens in OroborOSX, sawfish, blackbox). So it must be R-gnome, or
gnome from fink, or gnome itself. Would be good if it could be  
verified/falsified
on other gnome systems.

On Thursday, January 2, 2003, at 12:39 PM, Joseph Kunkel wrote:

> Following from R-Sig-Mac digest #238 ...
> I installed R as suggested in R.pdf "4. Exit Gifi".
> On starting R with
>
> R --gui=gnome
>
> The system works reasonably but demo(graph) plots several demo graphs  
> and their labeling off its window and the problem can not be cured by  
> simple resizing the screen.  This is only a bug when using gnome.   
> When using the regular Xterm invocation of R all demo(graphs) behave  
> as they should.
>
> I assume this is a problem with gnome?  Is this problem catalogued and  
> solved yet?
>
> Joe
> -----------------------------------------
> Joseph G. Kunkel, Professor
> Biology Department
> University of Massachusetts Amherst
> Amherst MA 01003
> http://www.bio.umass.edu/biology/kunkel/
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> http://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------


From phgrosjean@sciviews.org  Fri Jan  3 11:46:02 2003
From: phgrosjean@sciviews.org (Philippe Grosjean)
Date: Fri Jan  3 11:46:02 2003
Subject: [Rd] rounding errors in max.col()
In-Reply-To: <Pine.LNX.4.31.0301021335200.21240-100000@gannet.stats>
Message-ID: <MABBLJDICACNFOLGIHJOEEDPDCAA.phgrosjean@sciviews.org>

Prof. Brian Ripley wrote:

>Do read the help page:

>     Ties are broken at random.  The determination of ``tie'' assumes
>     that the entries are probabilities.

>and then don't blame your tools when you misuse them ....

Yes, I did read this. So, I know why items are randomly selected in case of
`ties'.
But then, I reformulate the question: what are the criteria for deciding two
values are `ties' in max.col?
I know, the answer is certainly somewhere (at least in the code), however,
if someone knows it, it would help save time.
Thanks,

Philippe Grosjean


On Thu, 2 Jan 2003, Philippe Grosjean wrote:

> I suppose this is a general behavior with external function calls, so I do
> not post (yet) a specific bug report. Could someone explain this?
>
> a <- rep(1, 20) + rnorm(20, mean=0.00001, sd=0.0001)
> b <- embed(a, 3)
> # I want to know where the item in column 2 is greated than both col 1 and
3
> (peak)
> test1 <- max.col(b) == 2
> # ... or I could use a less optimal code
> test2 <- apply(b, 1, max) == b[, 2]
> any(test1 != test2)	# both are equivalent
>
> # but when numbers are very close
> a <- rep(1, 20) + rnorm(20, mean=0.0000001, sd=0.0000001)
> b <- embed(a, 3)
> test1 <- max.col(b) == 2
> test2 <- apply(b, 1, max) == b[, 2]
> any(test1 != test2)	# tests are now DIFFERENT!
> # Indeed, test2 is correct, and test1 suffers from wrong calculations due
> probably to rounding errors in max.col()

No, to max.col working as documented.

[Large waste of bandwidth deleted]

--
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

______________________________________________
R-devel@stat.math.ethz.ch mailing list
http://www.stat.math.ethz.ch/mailman/listinfo/r-devel


From ripley@stats.ox.ac.uk  Fri Jan  3 11:59:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Jan  3 11:59:02 2003
Subject: [Rd] rounding errors in max.col()
In-Reply-To: <MABBLJDICACNFOLGIHJOEEDPDCAA.phgrosjean@sciviews.org>
Message-ID: <Pine.LNX.4.31.0301031054550.27475-100000@gannet.stats>

On Fri, 3 Jan 2003, Philippe Grosjean wrote:

> Prof. Brian Ripley wrote:
>
> >Do read the help page:
>
> >     Ties are broken at random.  The determination of ``tie'' assumes
> >     that the entries are probabilities.
>
> >and then don't blame your tools when you misuse them ....
>
> Yes, I did read this. So, I know why items are randomly selected in case of
> `ties'.
> But then, I reformulate the question: what are the criteria for deciding two
> values are `ties' in max.col?
> I know, the answer is certainly somewhere (at least in the code), however,
> if someone knows it, it would help save time.

In maxcol.c, of course.

#define RELTOL 1e-5
            tol = RELTOL * fmax2(fabs(a), fabs(b));


> Thanks,
>
> Philippe Grosjean
>
>
> On Thu, 2 Jan 2003, Philippe Grosjean wrote:
>
> > I suppose this is a general behavior with external function calls, so I do
> > not post (yet) a specific bug report. Could someone explain this?
> >
> > a <- rep(1, 20) + rnorm(20, mean=0.00001, sd=0.0001)
> > b <- embed(a, 3)
> > # I want to know where the item in column 2 is greated than both col 1 and
> 3
> > (peak)
> > test1 <- max.col(b) == 2
> > # ... or I could use a less optimal code
> > test2 <- apply(b, 1, max) == b[, 2]
> > any(test1 != test2)	# both are equivalent
> >
> > # but when numbers are very close
> > a <- rep(1, 20) + rnorm(20, mean=0.0000001, sd=0.0000001)
> > b <- embed(a, 3)
> > test1 <- max.col(b) == 2
> > test2 <- apply(b, 1, max) == b[, 2]
> > any(test1 != test2)	# tests are now DIFFERENT!
> > # Indeed, test2 is correct, and test1 suffers from wrong calculations due
> > probably to rounding errors in max.col()
>
> No, to max.col working as documented.
>
> [Large waste of bandwidth deleted]
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>
>
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From murdoch@stats.uwo.ca  Fri Jan  3 15:15:07 2003
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri Jan  3 15:15:07 2003
Subject: [Rd] R-1.6.2 on Jan.10
In-Reply-To: <x21y3v201c.fsf@biostat.ku.dk>
References: <x21y3v201c.fsf@biostat.ku.dk>
Message-ID: <bi6b1v4qr4ppk8mhjgsri6n25sp4nocu29@4ax.com>

On 02 Jan 2003 13:45:03 +0100, you wrote in message
<x21y3v201c.fsf@biostat.ku.dk>:

>
>In case you haven't already noticed, daily beta versions of R 1.6.2
>are being made available via
>
>http://cran.us.r-project.org/src/base/
>
>(also on the rest of CRAN, but the mirroring delays may make that less
>useful) 

And for Windows users, I am putting binary builds online at 

 http://www.stats.uwo.ca/faculty/murdoch/software/r-devel

as time permits.  They won't be daily, but there should be a few more
before the 10th.

Duncan Murdoch


From askom2@kaluga.ru  Fri Jan  3 15:46:27 2003
From: askom2@kaluga.ru (Kaluga)
Date: Fri Jan  3 15:46:27 2003
Subject: [Rd] APL?
References: <Pine.LNX.4.21.0212091021480.7780-100000@artemis>
Message-ID: <025701c2b336$a58ccff0$0200a8c0@suse>

Hi,

It's probably too late, but I know APL. My resent paper is about joint use 
of APL and R via DCOM interface.

Regards,
Alexander.

----- Original Message ----- 
From: "Torsten Hothorn" <Torsten.Hothorn@rzmail.uni-erlangen.de>
To: <r-devel@stat.math.ethz.ch>
Sent: Monday, December 09, 2002 12:25 PM
Subject: [Rd] APL?


> 
> Hi, 
> 
> is anybody out there who knows APL and would help me to translate 52
> lines of APL code into propper R? 
> 
> best, 
> 
> Torsten
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
>


From bert_gunter@merck.com  Fri Jan  3 18:35:03 2003
From: bert_gunter@merck.com (bert_gunter@merck.com)
Date: Fri Jan  3 18:35:03 2003
Subject: [Rd] save bug (PR#2418)
Message-ID: <200301031734.SAA25523@pubhealth.ku.dk>

My apologies if these are known -- I'm new to R (moved over from S-Plus).

All on Windows NT GUI, R1.6.1 and associated packages.

1. save(x) gives the following error message:
Error in save(x) : `file' must be non-empty string

According to the save() help file, the empty string is the default.


2. In the file>Display file GUI menu, if you try to display a file that is
in use by another application -- or at least one particular application I
use -- R crashes.

3. I also have noticed that for ** SOME ** data sets I have, the relation=
argument of the scales= option for xyplot (in Lattice) only works for
relation='same' -- both 'free' and 'sliced' give error messages.
Unfortunately, it's not handy for me to go reproduce the error at the
moment, so I can't give the specifics. I'll send more details in future
unless told that this is already known about.

NEVERTHELESS -- I am hooked on R. I moved over from S-Plus because I was
bothered by their failure to address known bugs and fix their documentation,
which is appalling for the new object oriented features. Why should I pay
for poor quality? As free and open source software, R has no obligation to
do these things (or anything else, for that matter) better than its
commercial cousin. But it does! This is just crazy!

Aside from the mostly improved qualityand stability, there are lots more
cool features,but that you know about.. Also, there aren't all the stupid
S-Plus GUI features that I have to remove or ignore (although I did like the
Object Explorer for keeping track of my objects and attached directories).

Cheers,
Bert Gunter
Biometrics Research RY 84-16
Merck & Company
P.O. Box 2000
Rahway, NJ 07065-0900
Phone: (732) 594-7765
mailto: bert_gunter@merck.com

"The business of the statistician is to catalyze the scientific learning
process."      -- George E.P. Box


------------------------------------------------------------------------------


From ripley@stats.ox.ac.uk  Fri Jan  3 18:52:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Jan  3 18:52:02 2003
Subject: [Rd] save bug (PR#2418)
In-Reply-To: <200301031734.SAA25523@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0301031744270.1795-100000@gannet.stats>

On Fri, 3 Jan 2003 bert_gunter@merck.com wrote:

> My apologies if these are known -- I'm new to R (moved over from S-Plus).
>
> All on Windows NT GUI, R1.6.1 and associated packages.
>
> 1. save(x) gives the following error message:
> Error in save(x) : `file' must be non-empty string
>
> According to the save() help file, the empty string is the default.

Indeed it is.  And the default is to generate an error.  That's
deliberate, I understand.  The help file does say

    file: a connection or the name of the file where the data will be
          saved.  Must be a file name for workspace format version 1.

Since "" is none of the above, it is clearly erroneous.

I am not sure what to do to improve this: do you have any suggestions?

[That dump() chooses a meaningless filename and people persist in using in
(e.g. in S library sections) seems counter-productive to me.]


> 2. In the file>Display file GUI menu, if you try to display a file that is
> in use by another application -- or at least one particular application I
> use -- R crashes.

That's hard to debug. Do you get any useful feedback from a Dr.Mingw
or other dump?  My guess is that is a problem in msvcrt.dll, but I will
see if I can trigger it.  What Windows version, BTW?


> 3. I also have noticed that for ** SOME ** data sets I have, the relation=
> argument of the scales= option for xyplot (in Lattice) only works for
> relation='same' -- both 'free' and 'sliced' give error messages.
> Unfortunately, it's not handy for me to go reproduce the error at the
> moment, so I can't give the specifics. I'll send more details in future
> unless told that this is already known about.

Lattice has been updated a couple of times recently.  If this persists
once R 1.6.2 is out (due in a week's time) we would want to see the
details.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From andy_liaw@merck.com  Fri Jan  3 19:09:02 2003
From: andy_liaw@merck.com (Liaw, Andy)
Date: Fri Jan  3 19:09:02 2003
Subject: [Rd] save bug (PR#2418)
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFCA12@usrymx10.merck.com>

I know that Bert has used something like the following in his S code in the
past:

myfunction <- function(..., requiredArg = stop("requiredArg not supplied",
...)

Wouldn't this work?  This would be a problem if somehow the requiredArg is
not evaluated, but then it wouldn't be a required agrument...

We are still on NT4sp6.  Scheduled to move to XP this year.

Cheers,
Andy

> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> Sent: Friday, January 03, 2003 12:52 PM
> To: bert_gunter@merck.com
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: Re: [Rd] save bug (PR#2418)
> 
> 
> On Fri, 3 Jan 2003 bert_gunter@merck.com wrote:
> 
> > My apologies if these are known -- I'm new to R (moved over 
> from S-Plus).
> >
> > All on Windows NT GUI, R1.6.1 and associated packages.
> >
> > 1. save(x) gives the following error message:
> > Error in save(x) : `file' must be non-empty string
> >
> > According to the save() help file, the empty string is the default.
> 
> Indeed it is.  And the default is to generate an error.  That's
> deliberate, I understand.  The help file does say
> 
>     file: a connection or the name of the file where the data will be
>           saved.  Must be a file name for workspace format version 1.
> 
> Since "" is none of the above, it is clearly erroneous.
> 
> I am not sure what to do to improve this: do you have any suggestions?
> 
> [That dump() chooses a meaningless filename and people 
> persist in using in
> (e.g. in S library sections) seems counter-productive to me.]
> 
> 
> > 2. In the file>Display file GUI menu, if you try to display 
> a file that is
> > in use by another application -- or at least one particular 
> application I
> > use -- R crashes.
> 
> That's hard to debug. Do you get any useful feedback from a Dr.Mingw
> or other dump?  My guess is that is a problem in msvcrt.dll, 
> but I will
> see if I can trigger it.  What Windows version, BTW?
> 
> 
> > 3. I also have noticed that for ** SOME ** data sets I 
> have, the relation=
> > argument of the scales= option for xyplot (in Lattice) only 
> works for
> > relation='same' -- both 'free' and 'sliced' give error messages.
> > Unfortunately, it's not handy for me to go reproduce the 
> error at the
> > moment, so I can't give the specifics. I'll send more 
> details in future
> > unless told that this is already known about.
> 
> Lattice has been updated a couple of times recently.  If this persists
> once R 1.6.2 is out (due in a week's time) we would want to see the
> details.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

------------------------------------------------------------------------------


From Laurens.Leerink@tudor.com  Fri Jan  3 22:22:03 2003
From: Laurens.Leerink@tudor.com (Laurens Leerink)
Date: Fri Jan  3 22:22:03 2003
Subject: [Rd] lm.fit peak memory usage
Message-ID: <39EBAFB53FAAD611AEB800065B3D5ABF780DF1@tudor.com>

Hi,

I've been running out of memory while using the lm.fit function - have
solved the problem and thought there might be interest in incorporating some
of the changes.  Looked at the source and changed the following lines

    storage.mode(x) <- "double"
    storage.mode(y) <- "double"
    z <- .Fortran("dqrls", qr = x, n = n, p = p, y = y, ny = ny,
        tol = as.double(tol), coefficients = mat.or.vec(p, ny),
        residuals = y, effects = y, rank = integer(1), pivot = 1:p,
        qraux = double(p), work = double(2 * p), PACKAGE = "base")

to

    if (storage.mode(x) != "double")
        storage.mode(x) <- "double"
    if (storage.mode(y) != "double")
        storage.mode(y) <- "double"
    z <- .Fortran("dqrls", qr = x, n = n, p = p, y = y, ny = ny,
        tol = as.double(tol), coefficients = mat.or.vec(p, ny),
        residuals = y, effects = y, rank = integer(1), pivot = 1:p,
        qraux = double(p), work = double(2 * p), PACKAGE = "base", DUP=F)

and I'm now able to call the function with data that is more than 4x larger
than before.  Have read the manuals and am aware of the dangers of DUP=F,
but thought that if there was ever a fortran function that has been well
debugged this is a likely candidate.  Will leave that up to the judgment of
those of you who actually know how it works.

The tests for storage.mode are probably less controversial, and actually
make a big difference in peak memory usage when the matrices are large.

Regards,
Laurens Leerink


From dmurdoch@pair.com  Sat Jan  4 13:12:02 2003
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sat Jan  4 13:12:02 2003
Subject: [Rd] save bug (PR#2418)
In-Reply-To: <Pine.LNX.4.31.0301031744270.1795-100000@gannet.stats>
References: <200301031734.SAA25523@pubhealth.ku.dk> <Pine.LNX.4.31.0301031744270.1795-100000@gannet.stats>
Message-ID: <o1jd1vond94fgg2ui6uaf5h7e462aldl2o@4ax.com>

On Fri, 3 Jan 2003 17:51:52 +0000 (GMT), you wrote:

>> 2. In the file>Display file GUI menu, if you try to display a file that is
>> in use by another application -- or at least one particular application I
>> use -- R crashes.
>
>That's hard to debug. Do you get any useful feedback from a Dr.Mingw
>or other dump?  My guess is that is a problem in msvcrt.dll, but I will
>see if I can trigger it.  What Windows version, BTW?

I think I know what's happening here.  If the other application has
opened the file in an exclusive mode (e.g. whatever mode MS Word uses
when it opens a file), then rgui crashes. 

I'll fix this.

Duncan Murdoch


From dmurdoch@pair.com  Sat Jan  4 14:30:02 2003
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sat Jan  4 14:30:02 2003
Subject: [Rd] save bug (PR#2418)
In-Reply-To: <200301031734.SAA25523@pubhealth.ku.dk>
References: <200301031734.SAA25523@pubhealth.ku.dk>
Message-ID: <55od1vkp716fsuta8eqe6t6aufmg2v48bd@4ax.com>

On Fri, 3 Jan 2003 18:34:49 +0100 (MET), you wrote:

>2. In the file>Display file GUI menu, if you try to display a file that is
>in use by another application -- or at least one particular application I
>use -- R crashes.

I've fixed this (it'll show up in 1.6.2).  It's not in the beta build
on my web page
<http://www.stats.uwo.ca/faculty/murdoch/software/r-devel>, but will
be soon.  Check the date on the file to see when I've updated it.

Duncan Murdoch


From jyan@stat.wisc.edu  Mon Jan  6 01:16:03 2003
From: jyan@stat.wisc.edu (Jun Yan)
Date: Mon Jan  6 01:16:03 2003
Subject: [Rd] R-devel cross-building
Message-ID: <Pine.LNX.4.21.0301051722180.6408-100000@gstat307.stat.wisc.edu>

I was cross-building R-devel (1.7.0). The tail of the error message
from running make on a machine with makeinfo (GNU texinfo 3.12) 1.68
is at the end of this email. The same procedure went fine on a machine
with makeinfo (GNU texinfo) 4.1. 

My first guess is that the version of makeinfo is causing this. However,
this didn't happen with R-1.6.2beta. Please advise.

Jun


## tail of error message
make -f Makefile.docfiles
make[2]: Entering directory `/scratch/rcb/WinR/R-devel/src/gnuwin32'
sed -e s/@RVER@/`cut -d' ' -f1 ../../VERSION | sed -n 1p`/g -e
s/@RWVER@/rw1070/g rw-FAQ.texi | \
  makeinfo --no-headers --number-sections -o rw-FAQ
makeinfo: unrecognized option `--number-sections'
Try `makeinfo --help' for more information.
make[2]: *** [rw-FAQ] Error 4
make[2]: Leaving directory `/scratch/rcb/WinR/R-devel/src/gnuwin32'
make[1]: *** [docfiles] Error 2
make[1]: Leaving directory `/scratch/rcb/WinR/R-devel/src/gnuwin32'


From ripley@stats.ox.ac.uk  Mon Jan  6 09:34:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon Jan  6 09:34:02 2003
Subject: [Rd] R-devel cross-building
In-Reply-To: <Pine.LNX.4.21.0301051722180.6408-100000@gstat307.stat.wisc.edu>
Message-ID: <Pine.LNX.4.31.0301060827280.27241-100000@gannet.stats>

Makeinfo >= 4.0 is required to build R's documentation under Linux, and to
cross-build you have to be able to build R.  The INSTALL file does say you
need makeinfo (and I will add a version requirement).

That applies to 1.6.2beta (and 1.6.1) as well, but in those versions a
current rw-FAQ.html is shipped so you only need makeinfo to re-make the
file.

Texinfo 3.12 is really rather old.

On Sun, 5 Jan 2003, Jun Yan wrote:

> I was cross-building R-devel (1.7.0). The tail of the error message
> from running make on a machine with makeinfo (GNU texinfo 3.12) 1.68
> is at the end of this email. The same procedure went fine on a machine
> with makeinfo (GNU texinfo) 4.1.
>
> My first guess is that the version of makeinfo is causing this. However,
> this didn't happen with R-1.6.2beta. Please advise.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jerome@hivnet.ubc.ca  Mon Jan  6 21:01:05 2003
From: jerome@hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Mon Jan  6 21:01:05 2003
Subject: [Rd] degrees of freedom in nlme() (PR#2384)
Message-ID: <200301062000.VAA11138@pubhealth.ku.dk>

I believe that a round-off error is causing nlme() to provide a wrong number 
of degrees of freedom. In the example below, getFixDF() returns 2 degrees
of freedom, but it should be 12 degrees of freedom according to lme().

R 1.6.1 on RedHat Linux 7.2
Package: nlme
Version: 3.1-36
Date: 2002-12-28

library(nlme)
set.seed(14)

a <- 2
x <- rep(rnorm(3),rep(5,3))
id <- rep(c("a","b","c"),rep(5,3))
y <- a+x+rnorm(15)
data <- data.frame(y=y,id=id)
initx <- matrix(x[c(1,6,11)],dimnames=list(c("a","b","c"),"x"))
rm(a,x,id,y)

summary(fit.lme <-
              lme(y ~ 1,data=data,random=~1|id,method="ML"))
debug(getFixDF)
summary(fit.nlme <-
              nlme(y ~ a + x, fixed= a~1, random=x~1|id,
              data=data, start=list(fixed=c(a=2),
              random=list(id=initx)),method="ML"))

# From within getFixDF(), do the following check...
Browse[1]> apply(X, 2, function(el) any(el != el[1])) #Round-off error here!!
   a
TRUE
Browse[1]> X
   a
1  1
2  1
3  1
4  1
5  1
6  1
7  1
8  1
9  1
10 1
11 1
12 1
13 1
14 1
15 1

# If I force X[ ] <- X[1] in this case, then the result of nlme() is 
concordant with that of lme().


# Below is what I get with the current version of the nlme package.

> summary(fit.lme <-
+               lme(y ~ 1,data=data,random=~1|id,method="ML"))
Linear mixed-effects model fit by maximum likelihood
 Data: data
       AIC      BIC    logLik
  46.09706 48.22121 -20.04853

Random effects:
 Formula: ~1 | id
        (Intercept)  Residual
StdDev:   0.5019741 0.8299741

Fixed effects: y ~ 1
               Value Std.Error DF  t-value p-value
(Intercept) 1.671345 0.3730901 12 4.479736   8e-04

Standardized Within-Group Residuals:
       Min         Q1        Med         Q3        Max
-2.1912914 -0.5408147 -0.1515690  0.7275933  1.3373572

Number of Observations: 15
Number of Groups: 3

> summary(fit.nlme <-
+               nlme(y ~ a + x, fixed= a~1, random=x~1|id,
+               data=data, start=list(fixed=c(a=2),
+               random=list(id=initx)),method="ML"))
Nonlinear mixed-effects model fit by maximum likelihood
  Model: y ~ a + x
 Data: data
       AIC      BIC    logLik
  46.09706 48.22121 -20.04853

Random effects:
 Formula: x ~ 1 | id
                x  Residual
StdDev: 0.5019711 0.8299748

Fixed effects: a ~ 1
     Value Std.Error DF  t-value p-value
a 1.671345 0.3730888  2 4.479752  0.0464

Standardized Within-Group Residuals:
       Min         Q1        Med         Q3        Max
-2.1912919 -0.5408166 -0.1515696  0.7275931  1.3373593

Number of Observations: 15
Number of Groups: 3


From pd@pubhealth.ku.dk  Tue Jan  7 07:15:03 2003
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Tue Jan  7 07:15:03 2003
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200301070615.h076F5GX026734@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
..Strange interaction between "Marsaglia-Multicarry" generator and
.."Kinderman-Ramage" 
..method for normal variates. Apparently, switching either of them will help.
* PR# 2214 *
Subject: qgamma precision
From: terra@diku.dk
Date: Fri, 25 Oct 2002 16:50:17 +0200 (MET DST)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
..The warning is standard S and R behaviour.
..Probably xyplot needs to avoid it (by unclassing?)
..Still there in lattice 0.3-0.
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
..seems to be about Matrix package, not solve
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
..The supplementary (table of sum one) is fixed for 1.5.1.
..Detection code for the first problem has been added to 1.5.1 which will stop
..the crash, but the underlying cause is still open.
* PR# 1716 *
Subject: rdiscrete in e1071 fails when n==1
From: "John Aitchison" <jaitchis@hwy.com.au>
Date: Fri, 28 Jun 2002 10:28:17 +1000
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
..A report on lattice
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1901 *
Subject: svm seg faults
From: stefan.boehringer+science@uni-bochum.de
Date: Tue, 13 Aug 2002 14:12:17 +0200 (MET DST)
..Seem to be due to gcc `2.96' from RH7.3
* PR# 1974 *
Subject: Rwave installation problem
From: ld-temp-qt3i@pobox.com
Date: Mon, 2 Sep 2002 09:27:36 +0200 (MET DST)
..Instead, this should use ISO C headers, namely <stdlib.h>
* PR# 2173 *
Subject: xlim in plot.survfit() [with a discussion on "..."]
From: jerome@hivnet.ubc.ca
Date: Wed, 16 Oct 2002 18:46:11 +0200 (MET DST)
* PR# 2252 *
Subject: Ansari-Bradley test
From: wex00002@uconn.edu
Date: Sun, 3 Nov 2002 23:38:20 +0100 (MET)
* PR# 2302 *
Subject: Package tseries: crash for Windows version
From: Fan <xiao.gang.fan1@libertysurf.fr>
Date: Sun, 17 Nov 2002 15:28:14 +0100
..Actually, there is a mismatch between the R call and the 
..C code in pred_garch, so this is not Windows-specific.
* PR# 2320 *
Subject: Segmentation fault using "survival" package
From: jerome@hivnet.ubc.ca
Date: Sat, 23 Nov 2002 00:51:50 +0100 (MET)
* PR# 2322 *
Subject: simplex
From: george@lecompte.org
Date: Sat, 23 Nov 2002 17:30:37 +0100 (MET)
..report on boot, I think (not mentioned, though)
* PR# 2349 *
Subject: [R] NA in first panel of xyplot causes error
From: Wolfram Fischer <wolfram@fischer-zim.ch>
Date: Thu, 5 Dec 2002 15:32:32 +0100
..Lattice
* PR# 2352 *
Subject: avas: segmentation fault on empty args
From: vograno@arbitrade.com
Date: Fri, 6 Dec 2002 19:41:48 +0100 (MET)
* PR# 2363 *
Subject: nlme() and parameters "model", "fixed" and "random"
From: jerome@hivnet.ubc.ca
Date: Wed, 11 Dec 2002 22:29:47 +0100 (MET)
* PR# 2369 *
Subject: convergence problem with nlme()
From: jerome@hivnet.ubc.ca
Date: Thu, 12 Dec 2002 23:43:14 +0100 (MET)
* PR# 2374 *
Subject: quantreg package - predict method for rq objects
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Sat, 14 Dec 2002 20:46:34 +1100 (EST)
* PR# 2384 *
Subject: degrees of freedom in nlme()
From: jerome@hivnet.ubc.ca
Date: Fri, 20 Dec 2002 01:40:06 +0100 (MET)
* PR# 2385 *
Subject: read.xport and lookup.xport in foreign
From: Frank E Harrell Jr <fharrell@virginia.edu>
Date: Fri, 20 Dec 2002 12:47:58 -0500
* PR# 2386 *
Subject: ace and avas in acepack
From: Frank E Harrell Jr <fharrell@virginia.edu>
Date: Fri, 20 Dec 2002 12:59:07 -0500

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
..MM:actually the documentation still could elaborate a bit..
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
..The persp algorithm does not apply the occlusion rules to the frame, 
..which is always plotted first. 
..A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
..This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
..Suggested fix is incorporated in 1.2.2.
..
..There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
..To see the problem try:  par(cex=.5); mtext("hi")
..Paul thinks the right fix is to change the argument list for mtext so that
..cex=par(cex) by default rather than cex=NA by default (plus corresponding
..internal changes to  do_mtext in plot.c).
..This needs to be done very carefully because (i) the change suggested above 
..mayhave side-effects in many other pieces of interpreted code 
..(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
..and anything to do with cexbase needs extreme care.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
..Still there. Suggested fix included in followups, but we didn't get around to
..try it in time for 1.2.3.
..
..Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
..xaxp before xlog, and the new value of xaxp may only be valid under the new
..value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
..This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1933 *
Subject: dev2eps() prints ticks with wrong length!
From: Timur Elzhov <Timur.Elzhov@jinr.ru>
Date: Fri, 23 Aug 2002 17:22:15 +0400
..dev.copy problem
* PR# 1972 *
Subject: lattice install
From: robert.king@newcastle.edu.au
Date: Mon, 2 Sep 2002 04:55:41 +0200 (MET DST)
..Perhaps lattice should require(grid) and print a clearer message?
* PR# 2069 *
Subject: split.screen problem
From: cbodily@att.net
Date: Thu, 26 Sep 2002 19:37:40 +0200 (MET DST)
* PR# 2283 *
Subject: Wandering usr values in par(no.readonly=TRUW)
From: Jari Oksanen <jarioksa@sun3.oulu.fi>
Date: Tue, 12 Nov 2002 13:50:44 +0200

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
..I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
..problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
..Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
..looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
..Was gcc 2.95.2 in private followup.
..Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
..problems with g++ not finding -lstdc++
..Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
..Looks like a conspiracy between a shell problem and an oddity in Tk 8.0 rather
..than an R problem. Good to know for the workaround though. The comment in
..TK_XINCLUDES has since disappeared, at least in Tk 8.3.3.
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
..Tried to use fort77 on RedHat, should likely try g77 instead.
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
..Missing perl??
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
..Probably fixed in 1.5.1
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
..Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000
..Missing info on R version and compilers.
* PR# 1937 *
Subject:  Inconsistent use of Perl? 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Sat, 24 Aug 2002 18:41:09 +0800
..Some packages require Perl v 5.005
* PR# 1995 *
Subject:  2002-09-08 1.6.0 build fails in Recommended 
From: <stvjc@channing.harvard.edu>
Date: Sun, 8 Sep 2002 23:57:39 -0400 (EDT)
..I think this got cleared up...
* PR# 1996 *
Subject:  config checks for --with-gnome need update 
From: <stvjc@channing.harvard.edu>
Date: Mon, 9 Sep 2002 00:08:59 -0400 (EDT)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
..status of AsIs columns
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
..see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
..part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
..Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1891 *
Subject: summary.data.frame with compound elements problem
From: b.rowlingson@lancaster.ac.uk
Date: Fri, 9 Aug 2002 10:35:43 +0200 (MET DST)

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
..see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
..part of PR#1068
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
..The bug is that we get as far as mkCLOSXP before an error is reported
* PR# 2253 *
Subject: [R] CTRL-C suspends echo of shell (R versions 1.6.0 and 1.6.1)
From: Wolfram Fischer - Z/I/M <wolfram@fischer-zim.ch>
Date: Mon, 4 Nov 2002 10:18:48 +0100

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
..In fact, as.POSIXct is off by 66 years. See
..   http://developer.apple.com/qa/ops/ops23.html
..This is semifixed, but timezones still don't work
* PR# 1991 *
Subject: Mac Save As... bug
From: Tim Cole <tjc1@cam.ac.uk>
Date: Sun, 8 Sep 2002 13:47:00 +0100
* PR# 2276 *
Subject: Mac specific - quartz leads to crash
From: h95mr@mun.ca
Date: Fri, 8 Nov 2002 16:28:50 +0100 (MET)

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
..1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
..2) system() needs a new version for GNOME.

Directory:  Models

* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
..The problem is actually deeper than this.
..
..Sometime update() wants to evaluate arguments in the environment where the model
..was defined, as here. 
..
..Sometimes it wants to use the current environment, eg this snippet from MASS 
..ph.fun <- function(data, i) {
..  d <- data
..  d$calls <- d$fitted + d$res[i]
..  coef(update(fit, data=d))
..}
* PR# 2206 *
Subject: model.matrix (via predict)
From: Glenn.Stone@csiro.au
Date: Thu, 24 Oct 2002 06:33:02 +0200 (MET DST)
..strange model used!

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
..problem with symbol names only on Mandrake 8.0, not 7.2
..needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
..This platform turned out to have badly broken FPU behaviour. Given up, at 
..least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
..MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
..error from using SGI libblas (not reported on other systems?)
..use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
..Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
..Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
..Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)
* PR# 2144 *
Subject: Save() with ascii=TRUE may corrupt numeric values
From: "Efthymiou, Nick" <Nick.Efthymiou@schwab.com>
Date: Thu, 10 Oct 2002 14:09:21 -0700
..Only on systems without vsnprintf

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
..A crash that is *very* hard to trigger (after several
..minutes of continuous resizing)

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 2094 *
Subject: Mean and var inconsistency
From: Kevin.Wright@pioneer.com
Date: Wed, 2 Oct 2002 16:19:27 +0200 (MET DST)
* PR# 2366 *
Subject: R -g gnome has graphics bugs
From: chris-public@math.uu.se
Date: Thu, 12 Dec 2002 14:19:43 +0100 (MET)
* PR# 2421 *
Subject: [±¤°í] ÀÒ¾î ¹ö¸° Çàº¹À» Ã£¾Æ¼­... 
From: ·º¼­½º<bigscale@bigscale.com>
Date: Mon, 6 Jan 2003 01:35:53 +0900
* PR# 2422 *
Subject: STOCK MARKET ALERT - TBIN REPORTS RECORD REVENUES.99737
From: Bloomfield & Goldman99488 <Bloomfield_Goldman_99541@444.net>
Date: Mon, 6 Jan 2003 12:46:05 -0600
* PR# 2423 *
Subject: C:\share\TBIN\SubjectLine.txt
From: INVESTMENT ALERT - 99622 <INVESTMENT_ALERT---99662@erols.com>
Date: Mon, 6 Jan 2003 17:18:05 -0600
* PR# 2424 *
Subject: STOCK MARKET ALERT - TBIN REPORTS RECORD REVENUES.99995
From: INVESTMENT ALERT - 99648 <INVESTMENT_ALERT---99680@sprintmail.com>
Date: Mon, 6 Jan 2003 20:18:41 -0600
* PR# 2425 *
Subject: {¯f¬r?} Known to GrapphApp (
From: Amy_Lin <Amy_Lin@mail.trans-tec.com.tw>
Date: Tue, 7 Jan 2003 09:21:04 +0800
* PR# 2426 *
Subject: KENNETH!!!
From: Eloho kenneth <kenneth.eloho@caramail.com>
Date: Tue, 07 Jan 2003 04:20:44 GMT+1
* PR# 2427 *
Subject: C:\share\TBIN\SubjectLine.txt
From: INVESTMENT ALERT - 99324 <INVESTMENT_ALERT---99400@pacbell.net>
Date: Mon, 6 Jan 2003 21:38:42 -0600


From maeder@iac.umnw.ethz.ch  Tue Jan  7 10:30:03 2003
From: maeder@iac.umnw.ethz.ch (maeder@iac.umnw.ethz.ch)
Date: Tue Jan  7 10:30:03 2003
Subject: [Rd] plot.ts don't accept ylab (PR#2428)
Message-ID: <200301070930.KAA14146@pubhealth.ku.dk>

Full_Name: Joerg Maeder
Version: R-1.6.1
OS: Solaris
Submission from: (NULL) (129.132.77.42)


plot.ts crashs when you have a multi-dimensional time series and you try to
define 
the ylab argument.

#Test Data: simple 2dimensional time series
testdata <- ts(cbind(runif(24),runif(24),freq=4))
#this command works well
plot.ts(testdata)
#this command don't work
plot.ts(testdata,ylab="CRASH")


From ripley@stats.ox.ac.uk  Tue Jan  7 11:09:05 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue Jan  7 11:09:05 2003
Subject: [Rd] plot.ts don't accept ylab (PR#2428)
Message-ID: <200301071008.LAA14839@pubhealth.ku.dk>

1) It does *NOT* crash, it returns a meaningful error message:

Error in plot.ts(x[, i], axes = FALSE, xlab = "", ylab = "", log = log,  :
        formal argument "ylab" matched by multiple actual arguments

[`Crash' means an unrecoverable error, not a message telling the user not
to be so silly.]

And given that there are three separate plots, what exactly did you
expect `ylab' to do?


2) `ylab' is not a documented argument to plot.ts.  `...' says
*additional* graphics arguments, but does not say which are valid
(as is the S/R convention).


3) You are actually using plot.mts, and you would do better to call the
generic function, not a specific method.


4) You've specified your example incorrectly.  I think you meant

testdata <- ts(cbind(a=runif(24), b=runif(24)), freq=4)
plot(testdata)


So where exactly is the bug *in R* (as distinct from those in your
report)?



On Tue, 7 Jan 2003 maeder@iac.umnw.ethz.ch wrote:

> Full_Name: Joerg Maeder
> Version: R-1.6.1
> OS: Solaris
> Submission from: (NULL) (129.132.77.42)
>
>
> plot.ts crashs when you have a multi-dimensional time series and you try to
> define
> the ylab argument.
>
> #Test Data: simple 2dimensional time series
> testdata <- ts(cbind(runif(24),runif(24),freq=4))
> #this command works well
> plot.ts(testdata)
> #this command don't work
> plot.ts(testdata,ylab="CRASH")
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley@stats.ox.ac.uk  Wed Jan  8 09:23:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Jan  8 09:23:02 2003
Subject: [Rd] Re: [R-SIG-Mac]4. Exit Gifi Gnome problem
In-Reply-To: <9623C536-1E94-11D7-B68B-000393BB6D36@stat.ucla.edu>
Message-ID: <Pine.LNX.4.31.0301080820450.2914-100000@gannet.stats>

It is bug PR#2366.  That describes the fix too.

Please do make use of the R-bugs database!

On Thu, 2 Jan 2003, Jan de Leeuw wrote:

> Confirmed. It is not your version of R or environment or the window
> manager
> (happens in OroborOSX, sawfish, blackbox). So it must be R-gnome, or
> gnome from fink, or gnome itself. Would be good if it could be
> verified/falsified
> on other gnome systems.
>
> On Thursday, January 2, 2003, at 12:39 PM, Joseph Kunkel wrote:
>
> > Following from R-Sig-Mac digest #238 ...
> > I installed R as suggested in R.pdf "4. Exit Gifi".
> > On starting R with
> >
> > R --gui=gnome
> >
> > The system works reasonably but demo(graph) plots several demo graphs
> > and their labeling off its window and the problem can not be cured by
> > simple resizing the screen.  This is only a bug when using gnome.
> > When using the regular Xterm invocation of R all demo(graphs) behave
> > as they should.
> >
> > I assume this is a problem with gnome?  Is this problem catalogued and
> > solved yet?
> >
> > Joe
> > -----------------------------------------
> > Joseph G. Kunkel, Professor
> > Biology Department
> > University of Massachusetts Amherst
> > Amherst MA 01003
> > http://www.bio.umass.edu/biology/kunkel/
> >
> > _______________________________________________
> > R-SIG-Mac mailing list
> > R-SIG-Mac@stat.math.ethz.ch
> > http://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac
> >
> >
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical
> Software
> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>
> ------------------------------------------------------------------------
> -------------------------
>            No matter where you go, there you are. --- Buckaroo Banzai
>                     http://gifi.stat.ucla.edu/sounds/nomatter.au
>
> ------------------------------------------------------------------------
> -------------------------
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From phgrosjean@sciviews.org  Wed Jan  8 11:25:03 2003
From: phgrosjean@sciviews.org (phgrosjean@sciviews.org)
Date: Wed Jan  8 11:25:03 2003
Subject: [Rd] Undocumented bahavior of as.integer() (PR#2430)
Message-ID: <200301081024.LAA24951@pubhealth.ku.dk>

as.integer() truncates doubles toward zero, as Splus does (at least v. 6.1
under Windows does). Thus:

> look <- (10 * seq(14)) - 76
> 10 * (73.1 + look)
 [1]   71  171  271  371  491  586  681  791  886  981 1101 1201 1301 1401
> as.integer(10 * (73.1 + look))
 [1]   70  170  270  370  490  586  681  791  886  981 1101 1201 1301 1401

... It is not documented in R! I propose appending the following to
as.integer.Rd:

\section{ WARNING }{ During coercion of doubles, real numbers are not
rounded but truncated (the closest integer towards zero is returned).
Attributes are deleted.}

And I suggest adding the previous exemple in the corresponding section in
as.integer.Rd. Moreover, the subset operation [] uses as.integer() and
consequently, can suffer from the same syndrome. A WARNING section in
Extract.Rd would be welcome too.


Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status =
 major = 1
 minor = 6.1
 year = 2002
 month = 11
 day = 01
 language = R

Windows XP Professional (build 2600) Service Pack 0.0

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


...........]<(({°<...............<°}))><...............................
 ) ) ) ) )
( ( ( ( (       Dr. Philippe Grosjean
 ) ) ) ) )
( ( ( ( (       LOV, UMR 7093
 ) ) ) ) )      Station Zoologique
( ( ( ( (       Observatoire Océanologique
 ) ) ) ) )      BP 28
( ( ( ( (       06234 Villefranche sur mer cedex
 ) ) ) ) )      France
( ( ( ( (
 ) ) ) ) )      tel: +33.4.93.76.38.16, fax: +33.4.93.76.38.34
( ( ( ( (
 ) ) ) ) )      e-mail: phgrosjean@sciviews.org
( ( ( ( (       SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )
.......................................................................


From maechler@stat.math.ethz.ch  Wed Jan  8 11:51:03 2003
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed Jan  8 11:51:03 2003
Subject: [Rd] Undocumented bahavior of as.integer() (PR#2430)
Message-ID: <200301081051.LAA25597@pubhealth.ku.dk>

>>>>> "PhGr" == Philippe Grosjean <phgrosjean@sciviews.org>
>>>>>     on Wed, 8 Jan 2003 11:24:40 +0100 (MET) writes:

    PhGr> as.integer() truncates doubles toward zero, as Splus
    PhGr> does (at least v. 6.1 under Windows does). Thus:

(fortunately this is not OS dependent!)

    >> look <- (10 * seq(14)) - 76
    >> 10 * (73.1 + look)
    PhGr>[1] 71 171  271  371  491  586  681  791  886  981 1101 1201 1301 1401
    >> as.integer(10 * (73.1 + look))
    PhGr>[1] 70 170  270  370  490  586  681  791  886  981 1101 1201 1301 1401

    PhGr> ... It is not documented in R! I propose appending the following to
    PhGr> as.integer.Rd:

I agree the doc should mention it.
I disagree with the warning section.
In R, our code really just uses something like

   int asInt(double x) { return x; }

which makes use of C's  "implicit casting".  
I know looked in Kernighan & Ritchie (2nd Ed.; {3rd Ed would be better})
and found (p.197)

   >>  "A6.3 Integer and Floating"
   >>  
   >>  When a value of floating type is converted to integral type,
   >>  the fractional part is discarded. ...................

Hence this is (fortunately!) part of the C standard.
But I really think any decent programming language would do it
like that (many would not allow implicit coercion though..).
That's the reason I think the warning is not necessary; I'd
rather mention it by the way.

    PhGr> \section{ WARNING }{ During coercion of doubles, real
    PhGr> numbers are not rounded but truncated (the closest
    PhGr> integer towards zero is returned).  Attributes are
    PhGr> deleted.}

    PhGr> And I suggest adding the previous exemple in the
    PhGr> corresponding section in as.integer.Rd. Moreover, the
    PhGr> subset operation [] uses as.integer() and
    PhGr> consequently, can suffer from the same syndrome. A
    PhGr> WARNING section in Extract.Rd would be welcome too.

"suffer" and "syndrome"  are not appropriate here IMHO.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


From dmurdoch@pair.com  Wed Jan  8 13:01:02 2003
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Wed Jan  8 13:01:02 2003
Subject: [Rd] Undocumented bahavior of as.integer() (PR#2430)
In-Reply-To: <200301081051.LAA25597@pubhealth.ku.dk>
References: <200301081051.LAA25597@pubhealth.ku.dk>
Message-ID: <0k4o1v4rvtfrhsj6546fujmdvrfpsogc4k@4ax.com>

On Wed, 8 Jan 2003 11:51:22 +0100 (MET), you wrote:

>   >>  "A6.3 Integer and Floating"
>   >>  
>   >>  When a value of floating type is converted to integral type,
>   >>  the fractional part is discarded. ...................
>
>Hence this is (fortunately!) part of the C standard.
>But I really think any decent programming language would do it
>like that (many would not allow implicit coercion though..).

The dialects of Pascal that I use are pretty decent, but they don't
allow casting of floats to integers because of this ambiguity.  You
need to say round() or trunc() explicitly.  I'd think any decent
programming language would do that :-)

Duncan Murdoch


From maechler@stat.math.ethz.ch  Wed Jan  8 14:07:04 2003
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed Jan  8 14:07:04 2003
Subject: [Rd] integer coercion when indexing and subsetting (PR#2430)
Message-ID: <200301081301.OAA28001@pubhealth.ku.dk>

At the end of his bug report, Philippe says

    PhGr> ..... Moreover, the subset operation [] uses as.integer() and
    PhGr> consequently, can suffer from the same syndrome. A WARNING section in
    PhGr> Extract.Rd would be welcome too.

[BTW: Thank you Philippe! ]

Currently, "Extract.Rd" does not say anything on the kind of
indices `i' that can be used in things like x[i].

OTOH, the R language reference has a nice section

>>    Indexing by vectors
>>    -------------------
>>      R allows some powerful constructions using vectors as indices.  We
>>   shall discuss indexing of simple vectors first.  For simplicity, assume
>>   that the expression is `x[i]'.  Then the following possibilities exist
>>   according to the type of `i'.
>> 
>>      *Integer* ...............
>>      ........................    
>> 
>> 
>>      * *Other numeric*.  Non-integer values are converted to integer
>>        before use.
>> 
>>       <<........>>

I agree with Philippe that  help(Extract) should say more.

1) point to the "R Language Reference"

  BTW: we should think on how to do this with links that work
     with HTML/PDF and also with ESS and Info (I read all R
      manuals in info most of the time).
    
  For the moment, just could use \url{....}, right?

2) Tell about `i' = names or integers or as.integer(numeric)
   at least, right?


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


From reinhold.koch@unibas.ch  Wed Jan  8 14:08:09 2003
From: reinhold.koch@unibas.ch (reinhold.koch@unibas.ch)
Date: Wed Jan  8 14:08:09 2003
Subject: [Rd] weird breaks in hist (PR#2431)
Message-ID: <200301081306.OAA28111@pubhealth.ku.dk>

Full_Name: Reinhold Koch
Version: 1.6.1
OS: redhat 8.0
Submission from: (NULL) (131.152.84.111)


I came across rather weird behavior of the breaks in hist:

hist(1:3)

gives the expected result, besides an unnecessary gap between 2nd and 3rd
column

hist(1:4)

always merges up the first two columns, also if I resort to
hist.default(1:4,breaks=1:4). hist.default(1:4, include.lowest=F) gives an
error:

Error in hist.default(1:4, include.lowest = F) :
        some `x' not counted; maybe `breaks' do not span range of `x'


From phgrosjean@sciviews.org  Wed Jan  8 14:21:02 2003
From: phgrosjean@sciviews.org (Philippe Grosjean)
Date: Wed Jan  8 14:21:02 2003
Subject: [Rd] Undocumented bahavior of as.integer() (PR#2430)
In-Reply-To: <15900.623.369015.370021@gargle.gargle.HOWL>
Message-ID: <MABBLJDICACNFOLGIHJOOEGCDCAA.phgrosjean@sciviews.org>

The problem is that it can lead to bugs in code using X[y] with y being a
vector of doubles, and these bugs are very difficult to track. It is teach
to R users that they do not need to bother too much about the storage mode.
For instance, in the 'Introduction to R' manual, p.8:

"For most purposes the user will not be concerned if the "numbers" in a
numeric vector are integers, reals or even complex. Internally calculations
are done as double precision real numbers, or double precision complex
numbers if the input data are complex."

This is correct: "for _most_ purposes". A language that manages type
conversion automatically is nice, but it is fair also to place warnings
where there are exceptions to those "_most_ purposes". That is why I
consider a warning is required... An example to illustrate it should be
useful too (but perhaps more useful in Extract.Rd than in as.integer.Rd).
Something like:

>ind <- 10 * 73.1 + (10 * seq(14)) - 76)
>ind
>mat <- seq(1420)
>submat1 <- mat[ind]        #  NOT what I expected
>submat2 <- mat[round(ind)] #  much better

which is derived from Tom Blackwell's example discussed on R-help a few days
ago.

Best,

Philippe

-----Original Message-----
From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
Sent: mercredi 8 janvier 2003 11:50
To: phgrosjean@sciviews.org
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] Undocumented bahavior of as.integer() (PR#2430)


>>>>> "PhGr" == Philippe Grosjean <phgrosjean@sciviews.org>
>>>>>     on Wed, 8 Jan 2003 11:24:40 +0100 (MET) writes:

    PhGr> as.integer() truncates doubles toward zero, as Splus
    PhGr> does (at least v. 6.1 under Windows does). Thus:

(fortunately this is not OS dependent!)

    >> look <- (10 * seq(14)) - 76
    >> 10 * (73.1 + look)
    PhGr>[1] 71 171  271  371  491  586  681  791  886  981 1101 1201 1301
1401
    >> as.integer(10 * (73.1 + look))
    PhGr>[1] 70 170  270  370  490  586  681  791  886  981 1101 1201 1301
1401

    PhGr> ... It is not documented in R! I propose appending the following
to
    PhGr> as.integer.Rd:

I agree the doc should mention it.
I disagree with the warning section.
In R, our code really just uses something like

   int asInt(double x) { return x; }

which makes use of C's  "implicit casting".
I know looked in Kernighan & Ritchie (2nd Ed.; {3rd Ed would be better})
and found (p.197)

   >>  "A6.3 Integer and Floating"
   >>
   >>  When a value of floating type is converted to integral type,
   >>  the fractional part is discarded. ...................

Hence this is (fortunately!) part of the C standard.
But I really think any decent programming language would do it
like that (many would not allow implicit coercion though..).
That's the reason I think the warning is not necessary; I'd
rather mention it by the way.

    PhGr> \section{ WARNING }{ During coercion of doubles, real
    PhGr> numbers are not rounded but truncated (the closest
    PhGr> integer towards zero is returned).  Attributes are
    PhGr> deleted.}

    PhGr> And I suggest adding the previous exemple in the
    PhGr> corresponding section in as.integer.Rd. Moreover, the
    PhGr> subset operation [] uses as.integer() and
    PhGr> consequently, can suffer from the same syndrome. A
    PhGr> WARNING section in Extract.Rd would be welcome too.

"suffer" and "syndrome"  are not appropriate here IMHO.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


From ripley@stats.ox.ac.uk  Wed Jan  8 14:45:04 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Jan  8 14:45:04 2003
Subject: [Rd] weird breaks in hist (PR#2431)
Message-ID: <200301081344.OAA28396@pubhealth.ku.dk>

I am baffled as to why you think there is a bug in R here!

On Wed, 8 Jan 2003 reinhold.koch@unibas.ch wrote:

> Full_Name: Reinhold Koch
> Version: 1.6.1
> OS: redhat 8.0
> Submission from: (NULL) (131.152.84.111)
>
>
> I came across rather weird behavior of the breaks in hist:
>
> hist(1:3)
>
> gives the expected result, besides an unnecessary gap between 2nd and 3rd
> column

It gives the expected result, period.  There is no gap, but there is a bin
with count zero.

> hist(1:4)
>
> always merges up the first two columns,

Why is that wierd?  You requested three bins and that's what you got.
(If you didn't know you had done that, please read the help page.)

> also if I resort to
> hist.default(1:4,breaks=1:4). hist.default(1:4, include.lowest=F) gives an
> error:
>
> Error in hist.default(1:4, include.lowest = F) :
>         some `x' not counted; maybe `breaks' do not span range of `x'

Why do you even mention that?  It's correct!  The breaks chosen are
to cover a prettified range of x.  You explicitly asked for left-open
intervals, so you got

(1,2], (2,3], (3,4]

and those do not cover the data.

Perhaps as idiot-proofing, include.lowest should not be allowed unless
`breaks' is a sequence of breakpoints.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley@stats.ox.ac.uk  Wed Jan  8 14:46:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Jan  8 14:46:02 2003
Subject: [Rd] weird breaks in hist (PR#2431)
Message-ID: <200301081345.OAA28417@pubhealth.ku.dk>

I am baffled as to why you think there is a bug in R here!

On Wed, 8 Jan 2003 reinhold.koch@unibas.ch wrote:

> Full_Name: Reinhold Koch
> Version: 1.6.1
> OS: redhat 8.0
> Submission from: (NULL) (131.152.84.111)
>
>
> I came across rather weird behavior of the breaks in hist:
>
> hist(1:3)
>
> gives the expected result, besides an unnecessary gap between 2nd and 3rd
> column

It gives the expected result, period.  There is no gap, but there is a bin
with count zero.

> hist(1:4)
>
> always merges up the first two columns,

Why is that wierd?  You requested three bins and that's what you got.
(If you didn't know you had done that, please read the help page.)

> also if I resort to
> hist.default(1:4,breaks=1:4). hist.default(1:4, include.lowest=F) gives an
> error:
>
> Error in hist.default(1:4, include.lowest = F) :
>         some `x' not counted; maybe `breaks' do not span range of `x'

Why do you even mention that?  It's correct!  The breaks chosen are
to cover a prettified range of x.  You explicitly asked for left-open
intervals, so you got

(1,2], (2,3], (3,4]

and those do not cover the data.

Perhaps as idiot-proofing, include.lowest should not be allowed unless
`breaks' is a sequence of breakpoints.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley@stats.ox.ac.uk  Wed Jan  8 14:48:05 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Jan  8 14:48:05 2003
Subject: [Rd] Undocumented bahavior of as.integer() (PR#2430)
In-Reply-To: <MABBLJDICACNFOLGIHJOOEGCDCAA.phgrosjean@sciviews.org>
Message-ID: <Pine.LNX.4.31.0301081333290.6586-100000@gannet.stats>

You are (still) confusing type with value.  That statement is about type
(as in typeof).  Nowhere can I find documented that X[y], y non-integral
(as in value) has y rounded.  The problem is your use of such values. For
example, R-lang says

   Other numeric. Non-integer values are converted to integer before use.

You are assuming that the coversion is by rounding, but that is not
stated, and is not what happens.  If you want an integral value, plese
write code that ensures that you get it.

I agree with Martin there is no need for a WARNING section, and BTW, no
other section name is in capitals, so why did you suggest this extra
emphasis?  (I see a couple of other exceptions in the R sources that
need fixing.)

?as.integer already tells you to look at round/ceiling/floor to
convert to integral values.


On Wed, 8 Jan 2003, Philippe Grosjean wrote:

> The problem is that it can lead to bugs in code using X[y] with y being a
> vector of doubles, and these bugs are very difficult to track. It is teach
> to R users that they do not need to bother too much about the storage mode.
> For instance, in the 'Introduction to R' manual, p.8:
>
> "For most purposes the user will not be concerned if the "numbers" in a
> numeric vector are integers, reals or even complex. Internally calculations
> are done as double precision real numbers, or double precision complex
> numbers if the input data are complex."
>
> This is correct: "for _most_ purposes". A language that manages type
> conversion automatically is nice, but it is fair also to place warnings
> where there are exceptions to those "_most_ purposes". That is why I
> consider a warning is required... An example to illustrate it should be
> useful too (but perhaps more useful in Extract.Rd than in as.integer.Rd).
> Something like:
>
> >ind <- 10 * 73.1 + (10 * seq(14)) - 76)
> >ind
> >mat <- seq(1420)
> >submat1 <- mat[ind]        #  NOT what I expected
> >submat2 <- mat[round(ind)] #  much better
>
> which is derived from Tom Blackwell's example discussed on R-help a few days
> ago.
>
> Best,
>
> Philippe
>
> -----Original Message-----
> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> Sent: mercredi 8 janvier 2003 11:50
> To: phgrosjean@sciviews.org
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] Undocumented bahavior of as.integer() (PR#2430)
>
>
> >>>>> "PhGr" == Philippe Grosjean <phgrosjean@sciviews.org>
> >>>>>     on Wed, 8 Jan 2003 11:24:40 +0100 (MET) writes:
>
>     PhGr> as.integer() truncates doubles toward zero, as Splus
>     PhGr> does (at least v. 6.1 under Windows does). Thus:
>
> (fortunately this is not OS dependent!)
>
>     >> look <- (10 * seq(14)) - 76
>     >> 10 * (73.1 + look)
>     PhGr>[1] 71 171  271  371  491  586  681  791  886  981 1101 1201 1301
> 1401
>     >> as.integer(10 * (73.1 + look))
>     PhGr>[1] 70 170  270  370  490  586  681  791  886  981 1101 1201 1301
> 1401
>
>     PhGr> ... It is not documented in R! I propose appending the following
> to
>     PhGr> as.integer.Rd:
>
> I agree the doc should mention it.
> I disagree with the warning section.
> In R, our code really just uses something like
>
>    int asInt(double x) { return x; }
>
> which makes use of C's  "implicit casting".
> I know looked in Kernighan & Ritchie (2nd Ed.; {3rd Ed would be better})
> and found (p.197)
>
>    >>  "A6.3 Integer and Floating"
>    >>
>    >>  When a value of floating type is converted to integral type,
>    >>  the fractional part is discarded. ...................
>
> Hence this is (fortunately!) part of the C standard.
> But I really think any decent programming language would do it
> like that (many would not allow implicit coercion though..).
> That's the reason I think the warning is not necessary; I'd
> rather mention it by the way.
>
>     PhGr> \section{ WARNING }{ During coercion of doubles, real
>     PhGr> numbers are not rounded but truncated (the closest
>     PhGr> integer towards zero is returned).  Attributes are
>     PhGr> deleted.}
>
>     PhGr> And I suggest adding the previous exemple in the
>     PhGr> corresponding section in as.integer.Rd. Moreover, the
>     PhGr> subset operation [] uses as.integer() and
>     PhGr> consequently, can suffer from the same syndrome. A
>     PhGr> WARNING section in Extract.Rd would be welcome too.
>
> "suffer" and "syndrome"  are not appropriate here IMHO.
>
> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From murdoch@stats.uwo.ca  Wed Jan  8 14:49:05 2003
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed Jan  8 14:49:05 2003
Subject: [Rd] Undocumented bahavior of as.integer() (PR#2430)
In-Reply-To: <MABBLJDICACNFOLGIHJOOEGCDCAA.phgrosjean@sciviews.org>
References: <15900.623.369015.370021@gargle.gargle.HOWL> <MABBLJDICACNFOLGIHJOOEGCDCAA.phgrosjean@sciviews.org>
Message-ID: <faao1vckacru52gd5j9po3af58psoepoh9@4ax.com>

On Wed, 8 Jan 2003 14:19:20 +0100, you wrote in message
<MABBLJDICACNFOLGIHJOOEGCDCAA.phgrosjean@sciviews.org>:

>The problem is that it can lead to bugs in code using X[y] with y being a
>vector of doubles, and these bugs are very difficult to track. It is teach
>to R users that they do not need to bother too much about the storage mode.
>For instance, in the 'Introduction to R' manual, p.8:

I agree that this should be mentioned in the help page, but I don't
know any real code where it's likely to be a problem.  The main place
where people calculate indices is in array indexing schemes, and those
calculations work only on integers.  Even if they're stored as
doubles, integer calculations are exact, so the truncation wouldn't be
a problem.

The other place where floating point values might be used as indices
would be in interpolation schemes, and there it probably doesn't
matter much whether you use i-1, i, or i+1 as the index, as long as
identities like

   as.integer(x)  - 1 == as.integer(x-1)

hold.  That particular identity fails for x in (0, 1), but I think it
holds everywhere else that as.integer works; variations on it also
hold just about everywhere except near 0.

Do you know real examples where this really matters?

Duncan Murdoch


From reinhold.koch@unibas.ch  Wed Jan  8 16:07:06 2003
From: reinhold.koch@unibas.ch (reinhold.koch@unibas.ch)
Date: Wed Jan  8 16:07:06 2003
Subject: [Rd] weird breaks in hist (PR#2431)
Message-ID: <200301081506.QAA29533@pubhealth.ku.dk>

Thanks for the details of this feature,

I wanted all values been treated equally. I now achieved this through

hist(1:4, br=0:4,include.lowest=F)

quote:
> > hist(1:4)
> >
> > always merges up the first two columns,
> 
> Why is that wierd?  You requested three bins and that's what you got.
> (If you didn't know you had done that, please read the help page.)

In the help pages I could not find this; the default bin number
algorithm nclass.Sturges gives for 1:3 3 bins as a result, but hist(1:3)
draws 4.


From phgrosjean@sciviews.org  Wed Jan  8 16:08:00 2003
From: phgrosjean@sciviews.org (Philippe Grosjean)
Date: Wed Jan  8 16:08:00 2003
Subject: [Rd] Undocumented bahavior of as.integer() (PR#2430)
In-Reply-To: <Pine.LNX.4.31.0301081333290.6586-100000@gannet.stats>
Message-ID: <MABBLJDICACNFOLGIHJOIEGHDCAA.phgrosjean@sciviews.org>

OK, no need to emphasize too much... sorry for my ignorance on the R help
sections. To answer Duncan Murdoch, I do not have _real_ example because the
example was provided by someone else in R-help. By the way, the example was
mispelled in my previous mail and is (under R 1.6.1 and Win 2000):

> ind <- 10 * (73.1 + (10 * seq(14)) - 76)
> ind
 [1]   71  171  271  371  471  571  671  771  871  971 1071 1171 1271 1371
> as.integer(ind)
 [1]   70  170  270  370  470  571  671  771  871  971 1071 1171 1271 1371
># thus:
>mat <- seq(1420)
>submat1 <- mat[ind]        #  NOT what I expected
>submat2 <- mat[round(ind)] #  much better

I suppose that such a complicated construction of "ind" had some meanings in
the initial application.
Again, I do not complain for a bug. There is no bug. I just suggest to
mention this behavior in help files...
Best,

Philippe Grosjean

...........]<(({?<...............<?}))><...............................
 ) ) ) ) )
( ( ( ( (       Dr. Philippe Grosjean
 ) ) ) ) )
( ( ( ( (       LOV, UMR 7093
 ) ) ) ) )      Station Zoologique
( ( ( ( (       Observatoire Oceanologique
 ) ) ) ) )      BP 28
( ( ( ( (       06234 Villefranche sur mer cedex
 ) ) ) ) )      France
( ( ( ( (
 ) ) ) ) )      tel: +33.4.93.76.38.16, fax: +33.4.93.76.38.34
( ( ( ( (
 ) ) ) ) )      e-mail: phgrosjean@sciviews.org
( ( ( ( (       SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )
.......................................................................


From paulojus@est.ufpr.br  Wed Jan  8 16:12:01 2003
From: paulojus@est.ufpr.br (Paulo Justiniano Ribeiro Jr)
Date: Wed Jan  8 16:12:01 2003
Subject: [Rd] try.Silent
In-Reply-To: <200301081446.h08EkPgt022719@hypatia.math.ethz.ch>
Message-ID: <Pine.LNX.4.44.0301081253140.11942-100000@gauss.est.ufpr.br>

In an email to the help list John Chambers 
wrote about the function helpSilent which is in the methods package, 
pointing out that there is no restrictive reason to be in this package.

I did not know about this function and just incorporate it in several 
functions of the geoR package where a much less elegant solution was 
being used.

I guess other packages could use it as well.
Therefore, would be an idea to move trySilent() to `base' ?

Cheers
P.J.

-- 
Paulo Justiniano Ribeiro Jr
Departamento de Estatística
Universidade Federal do Paraná
Caixa Postal 19.081
CEP 81.531-990
Curitiba, PR  -  Brasil

Tel: (+55) 41 361 3471
Fax: (+55) 41 361 3141

e-mail: Paulo.Ribeiro@est.ufpr.br
http://www.est.ufpr.br/~paulojus (portugues)
http://www.maths.lancs.ac.uk/~ribeiro (english)


From ripley@stats.ox.ac.uk  Wed Jan  8 16:28:05 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Jan  8 16:28:05 2003
Subject: [Rd] weird breaks in hist (PR#2431)
Message-ID: <200301081527.QAA29763@pubhealth.ku.dk>

On Wed, 8 Jan 2003, Reinhold Koch wrote:

> Thanks for the details of this feature,
>
> I wanted all values been treated equally. I now achieved this through
>
> hist(1:4, br=0:4,include.lowest=F)
>
> quote:
> > > hist(1:4)
> > >
> > > always merges up the first two columns,
> >
> > Why is that wierd?  You requested three bins and that's what you got.
> > (If you didn't know you had done that, please read the help page.)
>
> In the help pages I could not find this; the default bin number
> algorithm nclass.Sturges gives for 1:3 3 bins as a result, but hist(1:3)
> draws 4.

It says

          In the last three cases the number is a suggestion only.

so what about that sentence do you fail to comprehend?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley@stats.ox.ac.uk  Wed Jan  8 16:49:28 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Jan  8 16:49:28 2003
Subject: [Rd] trySilent (was try.Silent)
In-Reply-To: <Pine.LNX.4.44.0301081253140.11942-100000@gauss.est.ufpr.br>
Message-ID: <Pine.LNX.4.31.0301081529370.16172-100000@gannet.stats>

We could, and it had crossed my mind.  Thanky ou for raising it.
However, we could not do that before 1.7.0 (new feature, and
anyway 1.6.2 is in final testing for release in a couple of days).

We have been considering having package methods in the default package
list for 1.7.0, which would provide this.  However, my preference would be
to have this as an argument to try, as in try(..., silent=TRUE)
Note that trySilent actually does two things:

i) it sets options(show.error.messages = FALSE)
ii) it sets options(error = empty.dump) (or equivalently) to suppress
any error handler

and one might just want just one of those two.  Do perhaps

try(..., silent = FALSE, nodump= TRUE)

(or defaulting nodump to silent) might be a comprehensive interface.

Any preferences?


On Wed, 8 Jan 2003, Paulo Justiniano Ribeiro Jr wrote:

> In an email to the help list John Chambers
> wrote about the function helpSilent which is in the methods package,
> pointing out that there is no restrictive reason to be in this package.
>
> I did not know about this function and just incorporate it in several
> functions of the geoR package where a much less elegant solution was
> being used.
>
> I guess other packages could use it as well.
> Therefore, would be an idea to move trySilent() to `base' ?
>
> Cheers
> P.J.
>
> --
> Paulo Justiniano Ribeiro Jr
> Departamento de Estatística
> Universidade Federal do Paraná
> Caixa Postal 19.081
> CEP 81.531-990
> Curitiba, PR  -  Brasil
>
> Tel: (+55) 41 361 3471
> Fax: (+55) 41 361 3141
>
> e-mail: Paulo.Ribeiro@est.ufpr.br
> http://www.est.ufpr.br/~paulojus (portugues)
> http://www.maths.lancs.ac.uk/~ribeiro (english)
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Kurt.Hornik@wu-wien.ac.at  Wed Jan  8 17:34:02 2003
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed Jan  8 17:34:02 2003
Subject: [Rd] trySilent (was try.Silent)
In-Reply-To: <Pine.LNX.4.31.0301081529370.16172-100000@gannet.stats>
References: <Pine.LNX.4.44.0301081253140.11942-100000@gauss.est.ufpr.br>
 <Pine.LNX.4.31.0301081529370.16172-100000@gannet.stats>
Message-ID: <15900.20185.235507.241102@mithrandir.hornik.net>

>>>>>   writes:

> We could, and it had crossed my mind.  Thanky ou for raising it.
> However, we could not do that before 1.7.0 (new feature, and
> anyway 1.6.2 is in final testing for release in a couple of days).

> We have been considering having package methods in the default package
> list for 1.7.0, which would provide this.  However, my preference would be
> to have this as an argument to try, as in try(..., silent=TRUE)
> Note that trySilent actually does two things:

> i) it sets options(show.error.messages = FALSE)
> ii) it sets options(error = empty.dump) (or equivalently) to suppress
> any error handler

> and one might just want just one of those two.  Do perhaps

> try(..., silent = FALSE, nodump= TRUE)

> (or defaulting nodump to silent) might be a comprehensive interface.

> Any preferences?

[Anticipating Luke's comment, or at least trying to ...]

Wouldn't it be better to more generally have a way of executing with
options temporarily reset in a 'safe' way, a la

	withOptions(EXPR, list(show.error.messages = FALSE, ...))

-k

> On Wed, 8 Jan 2003, Paulo Justiniano Ribeiro Jr wrote:

>> In an email to the help list John Chambers
>> wrote about the function helpSilent which is in the methods package,
>> pointing out that there is no restrictive reason to be in this package.
>> 
>> I did not know about this function and just incorporate it in several
>> functions of the geoR package where a much less elegant solution was
>> being used.
>> 
>> I guess other packages could use it as well.
>> Therefore, would be an idea to move trySilent() to `base' ?
>> 
>> Cheers
>> P.J.
>> 
>> --
>> Paulo Justiniano Ribeiro Jr
>> Departamento de Estatística
>> Universidade Federal do Paraná
>> Caixa Postal 19.081
>> CEP 81.531-990
>> Curitiba, PR  -  Brasil
>> 
>> Tel: (+55) 41 361 3471
>> Fax: (+55) 41 361 3141
>> 
>> e-mail: Paulo.Ribeiro@est.ufpr.br
>> http://www.est.ufpr.br/~paulojus (portugues)
>> http://www.maths.lancs.ac.uk/~ribeiro (english)
>> 
>> ______________________________________________
>> R-devel@stat.math.ethz.ch mailing list
>> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>> 

> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel


From paulojus@est.ufpr.br  Wed Jan  8 18:22:03 2003
From: paulojus@est.ufpr.br (Paulo Justiniano Ribeiro Jr)
Date: Wed Jan  8 18:22:03 2003
Subject: [Rd] trySilent (was try.Silent)
In-Reply-To: <Pine.LNX.4.31.0301081529370.16172-100000@gannet.stats>
Message-ID: <Pine.LNX.4.44.0301081512570.12812-100000@gauss.est.ufpr.br>

Hi Brian

> 
> try(..., silent = FALSE, nodump= TRUE)
> 
> (or defaulting nodump to silent) might be a comprehensive interface.
> 
> Any preferences?
> 

This looks better,  nice and simple!
Not sure about what's the best default for nodump
In my case I use only the options(show.error.messages = FALSE)


Cheers
P.J.


From volker.franz@tuebingen.mpg.de  Wed Jan  8 19:12:03 2003
From: volker.franz@tuebingen.mpg.de (volker.franz@tuebingen.mpg.de)
Date: Wed Jan  8 19:12:03 2003
Subject: [Rd] Determining the break points by hist() leads to errors (PR#2432)
Message-ID: <200301081812.TAA00944@pubhealth.ku.dk>

Hi,

if I dermine the break points using the hist() function and then try
to re-use these in a new histogram, R fails. Here is an example of the
problem:

##First, plot a histogram: 
data(islands)
foo <- hist(islands,freq=T)

##Now, try plot it again, with the previously determined break points:
hist(islands,breaks=foo$breaks,freq=T)

##... this lead to the warning message:
Warning message: 
the AREAS in the plot are wrong -- rather use `freq=FALSE'!
in: plot.histogram(r, freq = freq, col = col, border = border, angle = 

##The reason for this seems to be, that the breaks are NOT 
##equidistant (despite foo$equidist being TRUE!):

> foo$breaks
[1]    -0.0018  2000.0018  4000.0018  6000.0018  8000.0018 10000.0018
[7] 12000.0018 14000.0018 16000.0018 18000.0018

##Correcting this (by changing the first element of foo$breaks):
corr.breaks <- c(+0.0018,2000.0018,4000.0018,6000.0018,8000.0018,
                 10000.0018,12000.0018,14000.0018,16000.0018,18000.0018)

##...leads to the desired result:
hist(islands,breaks=corr.breaks,freq=T)

Best
Volker

--please do not edit the information below--
Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


From p.dalgaard@biostat.ku.dk  Wed Jan  8 19:59:02 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Wed Jan  8 19:59:02 2003
Subject: [Rd] Determining the break points by hist() leads to errors (PR#2432)
In-Reply-To: <200301081812.TAA00944@pubhealth.ku.dk>
References: <200301081812.TAA00944@pubhealth.ku.dk>
Message-ID: <x2iswzpiyc.fsf@biostat.ku.dk>

volker.franz@tuebingen.mpg.de writes:

> Hi,
> 
> if I dermine the break points using the hist() function and then try
> to re-use these in a new histogram, R fails. Here is an example of the
> problem:
> 
> ##First, plot a histogram: 
> data(islands)
> foo <- hist(islands,freq=T)
> 
> ##Now, try plot it again, with the previously determined break points:
> hist(islands,breaks=foo$breaks,freq=T)
> 
> ##... this lead to the warning message:
> Warning message: 
> the AREAS in the plot are wrong -- rather use `freq=FALSE'!
> in: plot.histogram(r, freq = freq, col = col, border = border, angle = 
> 
> ##The reason for this seems to be, that the breaks are NOT 
> ##equidistant (despite foo$equidist being TRUE!):
> 
> > foo$breaks
> [1]    -0.0018  2000.0018  4000.0018  6000.0018  8000.0018 10000.0018
> [7] 12000.0018 14000.0018 16000.0018 18000.0018
> 
> ##Correcting this (by changing the first element of foo$breaks):
> corr.breaks <- c(+0.0018,2000.0018,4000.0018,6000.0018,8000.0018,
>                  10000.0018,12000.0018,14000.0018,16000.0018,18000.0018)
> 
> ##...leads to the desired result:
> hist(islands,breaks=corr.breaks,freq=T)
> 

...for your data. There's a reason why the first breakpoint is
adjusted in the opposite direction, namely to get exact zeros counted
into the first bin. Of course since x in theory has a continuous
distribution, you in theory don't have observations on the boundary,
but in practice, theory and practice is not the same.

So the proper fix would be different. Currently we have

    h <- diff(breaks)
    equidist <- !use.br || diff(range(h)) < 1e-07 * mean(h)

which likely needs a larger tolerance since 

    diddle <- 1e-07 * max(abs(range(breaks)))

goes in both directions.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From simardr@IRO.UMontreal.CA  Thu Jan  9 23:32:04 2003
From: simardr@IRO.UMontreal.CA (simardr@IRO.UMontreal.CA)
Date: Thu Jan  9 23:32:04 2003
Subject: [Rd] RNG.c: unif_rand, MARSAGLIA_MULTICARRY (PR#2437)
Message-ID: <200301092232.XAA12842@pubhealth.ku.dk>

Full_Name: Richard Simard
Version: 
OS: Linux
Submission from: (NULL) (132.204.25.139)


In the random number generator MARSAGLIA_MULTICARRY, your algorithm is
different than the one in the original reference that you give in the R manual:
Marsaglia in his post to the mailing list {\it sci.stat.math} on September 29,
1997.
The last line in the R program has a ^
while Marsaglia's algorithm has a +.
This gives very different random number generators.

The full line in RNG.c is:
    return ((I1 << 16)^(I2 & 0177777)) * i2_32m1; /* in [0,1) */


From p.dalgaard@biostat.ku.dk  Thu Jan  9 23:49:02 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu Jan  9 23:49:02 2003
Subject: [Rd] RNG.c: unif_rand, MARSAGLIA_MULTICARRY (PR#2437)
In-Reply-To: <200301092232.XAA12842@pubhealth.ku.dk>
References: <200301092232.XAA12842@pubhealth.ku.dk>
Message-ID: <x2k7he7xd6.fsf@biostat.ku.dk>

simardr@IRO.UMontreal.CA writes:

> Full_Name: Richard Simard
> Version: 
> OS: Linux
> Submission from: (NULL) (132.204.25.139)
> 
> 
> In the random number generator MARSAGLIA_MULTICARRY, your algorithm is
> different than the one in the original reference that you give in the R manual:
> Marsaglia in his post to the mailing list {\it sci.stat.math} on September 29,
> 1997.
> The last line in the R program has a ^
> while Marsaglia's algorithm has a +.
> This gives very different random number generators.
> 
> The full line in RNG.c is:
>     return ((I1 << 16)^(I2 & 0177777)) * i2_32m1; /* in [0,1) */

Did you actually try that? 

As far as I can see the first operand will be (32-bit binary)

xxxxxxxxxxxxxxxx0000000000000000

and the other one is

0000000000000000xxxxxxxxxxxxxxxx

so it is the same whether you add them or use bitwise OR or
bitwise XOR.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From htang@hpl.hp.com  Fri Jan 10 00:07:03 2003
From: htang@hpl.hp.com (htang@hpl.hp.com)
Date: Fri Jan 10 00:07:03 2003
Subject: [Rd] typo in documentation for lda in MASS (PR#2438)
Message-ID: <200301092307.AAA13009@pubhealth.ku.dk>

Full_Name: Hsiu-Khuern Tang
Version: 1.6.1
OS: Linux
Submission from: (NULL) (192.6.19.190)


In the description of the `CV' argument to lda in package MASS, "leave-out-out"
should be "leave-one-out".


From kevin.wright@pioneer.com  Fri Jan 10 00:31:02 2003
From: kevin.wright@pioneer.com (Wright, Kevin)
Date: Fri Jan 10 00:31:02 2003
Subject: [Rd] Suggested modification to shell command
Message-ID: <BCB409391040E040A3B7F77238076C6F0BE5D6@leo.phibred.com>

I'm using R 1.6.1 on Windows 95 with cygwin bash as my shell.

The 'shell' command tries to determine which shell the user prefers via the
following steps:

      shell <- Sys.getenv("R_SHELL")
      if (!nchar(shell)) 
          shell <- Sys.getenv("SHELL")
      if (!nchar(shell)) 
          shell <- Sys.getenv("COMSPEC")

For me, shell evaluates to "c:/cygwin/bin/bash.exe" .

The 'shell' command then tries to determine the proper flag to use:

if (missing(flag) && any(!is.na(match(c("bash", "tcsh"), 
    shell)))) 
    flag <- "-c"

For anyone who is using MS Windows (with .exe file extensions) or has the
path name in the SHELL environment variable (as appears to be the cygwin
default), the following modification to the matching may be more general in
determining the proper flag to use:

is.na(pmatch(c("bash","tcsh"),basename(shell)))

Thank you for considering this suggestion.


Kevin Wright, Research Scientist
Pioneer Hi-Bred Int'l, x4054.




This communication is for use by the intended recipient and cont ... [[dropped]]


From Nasdaq_Newsdesk_5@xo.com  Fri Jan 10 01:25:03 2003
From: Nasdaq_Newsdesk_5@xo.com (Nasdaq_Newsdesk_5@xo.com)
Date: Fri Jan 10 01:25:03 2003
Subject: [Rd] NASDAQ ALERT - NATK Revenues UP 1594% - Signs $55 Million Deal................... sjyga (PR#2439)
Message-ID: <200301100025.BAA13238@pubhealth.ku.dk>

<html>
<head>
</head>
<body>
<p align="center"><font style="font-size: 11pt" face="Courier">NATK Revenues UP 1594% For 2001- Signs $55 Million Deal%</font></p>
<p align="center"><font style="font-size: 11pt" face="Courier">Get the whole story from "Live From the Street"</font></p>
<p align="center"><b><a href="http://www.marketingnewsletter.net/Live_From_the_Street_NATK.htm">ENTER HERE</a></b></p>
<p align="center"><img border="0" src="http://www.marketingnewsletter.net/bm01.gif"></p>
<p align="left">&nbsp;</p>
<p align="left">&nbsp;</p>
<p align="center"><font size="2"><A href="http://www.beenteresting.com/remove/cstremove.htm">Click here to unsubscribe</A>
</body>
</html>

wnborrgwpwsucinymhlqi


From ripley@stats.ox.ac.uk  Fri Jan 10 09:21:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Jan 10 09:21:02 2003
Subject: [Rd] Suggested modification to shell command
In-Reply-To: <BCB409391040E040A3B7F77238076C6F0BE5D6@leo.phibred.com>
Message-ID: <Pine.LNX.4.31.0301100801460.31264-100000@gannet.stats>

Why not set R_SHELL to "bash" as in

export R_SHELL=bash

?  That's the intention, and should work (it does for me), whereas your
suggestion does not work here.  I think a variable (COMSPEC) has been set
anyway, so setting this in e.g. .bashrc should be no hardship.

Despite my inability to verify this, I'll make the change in R-devel as at
least the basename() part may come in handy.

On Thu, 9 Jan 2003, Wright, Kevin wrote:

> I'm using R 1.6.1 on Windows 95 with cygwin bash as my shell.
>
> The 'shell' command tries to determine which shell the user prefers via the
> following steps:
>
>       shell <- Sys.getenv("R_SHELL")
>       if (!nchar(shell))
>           shell <- Sys.getenv("SHELL")
>       if (!nchar(shell))
>           shell <- Sys.getenv("COMSPEC")
>
> For me, shell evaluates to "c:/cygwin/bin/bash.exe" .

Not for me, though (under XP).  I think something is strange if under
cygwin you are getting a Windows path with forward slashes.  The current
cygwin bash (for me) sets SHELL to /bin/sh but does not export it, so
COMSPEC is used (and that is not what you want).

> The 'shell' command then tries to determine the proper flag to use:
>
> if (missing(flag) && any(!is.na(match(c("bash", "tcsh"),
>     shell))))
>     flag <- "-c"
>
> For anyone who is using MS Windows (with .exe file extensions) or has the
> path name in the SHELL environment variable (as appears to be the cygwin
> default),

I am sure it is not what cygwin does by default, as it does not understand
drives specifed by c:/.

> the following modification to the matching may be more general in
> determining the proper flag to use:
>
> is.na(pmatch(c("bash","tcsh"),basename(shell)))
>
> Thank you for considering this suggestion.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From simardr@IRO.UMontreal.CA  Fri Jan 10 16:51:02 2003
From: simardr@IRO.UMontreal.CA (Richard Simard)
Date: Fri Jan 10 16:51:02 2003
Subject: [Rd] RNG.c: unif_rand, MARSAGLIA_MULTICARRY (PR#2437)
In-Reply-To: <x2k7he7xd6.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0301101046230.15976-100000@moisie.IRO.UMontreal.CA>

On 9 Jan 2003, Peter Dalgaard BSA wrote:

> simardr@IRO.UMontreal.CA writes:
> 
> > Full_Name: Richard Simard
> > Version: 
> > OS: Linux
> > Submission from: (NULL) (132.204.25.139)
> > 
> > 
> > In the random number generator MARSAGLIA_MULTICARRY, your algorithm is
> > different than the one in the original reference that you give in the R manual:
> > Marsaglia in his post to the mailing list {\it sci.stat.math} on September 29,
> > 1997.
> > The last line in the R program has a ^
> > while Marsaglia's algorithm has a +.
> > This gives very different random number generators.
> > 
> > The full line in RNG.c is:
> >     return ((I1 << 16)^(I2 & 0177777)) * i2_32m1; /* in [0,1) */
> 
> Did you actually try that? 
> 
> As far as I can see the first operand will be (32-bit binary)
> 
> xxxxxxxxxxxxxxxx0000000000000000
> 
> and the other one is
> 
> 0000000000000000xxxxxxxxxxxxxxxx
> 
> so it is the same whether you add them or use bitwise OR or
> bitwise XOR.
> 
> 

Very sorry, you are right. 

Still it is a very bad generator. It would be better to use the
Mersenne-Twister or the Knuth-TAOCP-2002 as the default generator in R.

=================================================
  Richard Simard    <simardr@IRO.UMontreal.CA>
  Laboratoire de simulation et d'optimisation 
  Université de Montréal, Dépt. IRO
  local: 3342;    tél: 514-343-6111 #3549


From big@boss.com  Fri Jan 10 21:51:22 2003
From: big@boss.com (big@boss.com)
Date: Fri Jan 10 21:51:22 2003
Subject: [Rd] Re: Movies (PR#2442)
Message-ID: <200301102051.VAA23176@pubhealth.ku.dk>

This is a multipart message in MIME format

--CSmtpMsgPart123X456_000_0024CD53
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Attached file:
--CSmtpMsgPart123X456_000_0024CD53--


From luke@stat.uiowa.edu  Sat Jan 11 15:16:02 2003
From: luke@stat.uiowa.edu (Luke Tierney)
Date: Sat Jan 11 15:16:02 2003
Subject: [Rd] trySilent (was try.Silent)
In-Reply-To: <15900.20185.235507.241102@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.44.0301110808230.3086-100000@nokomis2.stat.umn.edu>

On Wed, 8 Jan 2003, Kurt Hornik wrote:

> >>>>>   writes:
> 
> > We could, and it had crossed my mind.  Thanky ou for raising it.
> > However, we could not do that before 1.7.0 (new feature, and
> > anyway 1.6.2 is in final testing for release in a couple of days).
> 
> > We have been considering having package methods in the default package
> > list for 1.7.0, which would provide this.  However, my preference would be
> > to have this as an argument to try, as in try(..., silent=TRUE)
> > Note that trySilent actually does two things:
> 
> > i) it sets options(show.error.messages = FALSE)
> > ii) it sets options(error = empty.dump) (or equivalently) to suppress
> > any error handler
> 
> > and one might just want just one of those two.  Do perhaps
> 
> > try(..., silent = FALSE, nodump= TRUE)
> 
> > (or defaulting nodump to silent) might be a comprehensive interface.
> 
> > Any preferences?
> 
> [Anticipating Luke's comment, or at least trying to ...]
> 
> Wouldn't it be better to more generally have a way of executing with
> options temporarily reset in a 'safe' way, a la
> 
> 	withOptions(EXPR, list(show.error.messages = FALSE, ...))
> 

In the (probably not so) longer run we need that; we will also need to
think through how try and try(...,silent=TRUE) should work within a
more sophisticated error handling system.  But I think the simpler
interface that allows just try(..., silent=TRUE) is fine and can be
implemented in a way that works reasonably now and also later when we
have better options management and better error handling.  (In writing
the documentation we should make sure not to commit to implementation
details, just the funtionality.) I would prefer not to add separate
control over frame dumping; fine control like that is I think better
left to the error handling system.

luke

-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From bert_gunter@merck.com  Mon Jan 13 16:23:17 2003
From: bert_gunter@merck.com (bert_gunter@merck.com)
Date: Mon Jan 13 16:23:17 2003
Subject: [Rd] Rprofile.site assignments occur in base package (PR#2448)
Message-ID: <200301131517.QAA08420@pubhealth.ku.dk>

Not sure whether this is a feature or bug -- but it does not appear to be
documented.

R1.6.1 on Windows NT 4.00.1381

Objects assigned in the Rprofile.site file (e.g. foo<-'something') are put
into package:base not .GlobalEnv on startup. Objects assigned in the
.Rprofile file are put into .GlobalEnv. This doesn't seem consistent to me.
The objects exist in base only for the duration of the session -- they are
not written permanently (of course). Anything in the (saved) .GlobalEnv will
persist.

The workaround(?) is trivial: source() in a file with the assignments in the
Rprofile.site file. Assignments in the sourced file are done in .GlobalEnv.

Cheers,
Bert Gunter
Biometrics Research RY 84-16
Merck & Company
P.O. Box 2000
Rahway, NJ 07065-0900
Phone: (732) 594-7765
mailto: bert_gunter@merck.com

"The business of the statistician is to catalyze the scientific learning
process."      -- George E.P. Box





------------------------------------------------------------------------------


From ligges@statistik.uni-dortmund.de  Mon Jan 13 16:37:03 2003
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Mon Jan 13 16:37:03 2003
Subject: [Rd] Rprofile.site assignments occur in base package (PR#2448)
Message-ID: <200301131535.QAA08674@pubhealth.ku.dk>

bert_gunter@merck.com wrote:
> Not sure whether this is a feature or bug -- but it does not appear to be
> documented.
> 
> R1.6.1 on Windows NT 4.00.1381
> 
> Objects assigned in the Rprofile.site file (e.g. foo<-'something') are put
> into package:base not .GlobalEnv on startup. Objects assigned in the
> .Rprofile file are put into .GlobalEnv. This doesn't seem consistent to me.
> The objects exist in base only for the duration of the session -- they are
> not written permanently (of course). Anything in the (saved) .GlobalEnv will
> persist.


It *is* documented in, e.g., ?Rprofile:

"Then R searches for the site-wide startup profile unless the command 
line option --no-site-file was given. The name of this file is taken 
from the value of the R_PROFILE environment variable. If this variable 
is unset, the default is `$R_HOME/etc/Rprofile.site', which is used if 
it exists (which it does not in a ``factory-fresh'' installation). This 
code is loaded into package base.

Then, unless --no-init-file was given, R searches for a file called 
`.Rprofile' in the current directory or in the user's home directory (in 
that order) and sources it into the user workspace."

Uwe Ligges

> The workaround(?) is trivial: source() in a file with the assignments in the
> Rprofile.site file. Assignments in the sourced file are done in .GlobalEnv.
> 
> Cheers,
> Bert Gunter
> Biometrics Research RY 84-16
> Merck & Company
> P.O. Box 2000
> Rahway, NJ 07065-0900
> Phone: (732) 594-7765
> mailto: bert_gunter@merck.com
> 
> "The business of the statistician is to catalyze the scientific learning
> process."      -- George E.P. Box


From kjetil@entelnet.bo  Tue Jan 14 03:34:03 2003
From: kjetil@entelnet.bo (kjetil@entelnet.bo)
Date: Tue Jan 14 03:34:03 2003
Subject: [Rd] Docu buglet in stripchart.Rd (PR#2450)
Message-ID: <200301140232.DAA11504@pubhealth.ku.dk>

In the description it says:

stripchart produces one dimensional scatter plots (or dot plots) of 
the given data. These plots are are good 

should probably only be one time   are


Kjetil Halvorsen


From bates@stat.wisc.edu  Tue Jan 14 18:11:05 2003
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Tue Jan 14 18:11:05 2003
Subject: [Rd] ctest package: wilcox.test() produces integer overflow (PR#2453)
Message-ID: <200301141710.SAA20726@pubhealth.ku.dk>

This was filed as a bug report on the Debian r-base package.  It is
more properly a bug report on the ctest package in R.  

The default method for wilcox.test manipulates x and y without
checking the class or data.class of these objects.  Possible solutions
are
 - create wilcox.test.factor (if appropriate)
 - check the class and/or data.class of x and y in wilcox.test.default
   and produce error messages or warnings for inappropriate objects
 - coerce to numeric unconditionally (probably not a good idea)

Martin Michlmayr <tbm@cyrius.com> writes:

> Package: r-base
> Version: 1.5.0-2 / 1.6.1.cvs.20030103-1
> Severity: normal
> 
> I have some ordinal data and I wanted to perform an u-test.  However,
> a problem occured:
> 
> > x <- read.table("spss-3.txt", header=TRUE)
> > a = factor(x$a)
> > b = factor(x$b)
> > summary(a)
>     1     2     3     4     5     6 
> 23900 20362 15238 10007  3399   472 
> > summary(b)
>     1     2     3     4     5     6 
> 23809 20649 15069  9952  3415   484 
> > wilcox.test(a, b)
> 
>         Wilcoxon rank sum test with continuity correction
> 
> data:  a and b 
> W = 5384330884, p-value = NA
> alternative hypothesis: true mu is not equal to 0 
> 
> Warning messages: 
> 1: "-" not meaningful for factors in: Ops.factor(x, mu) 
> 2: NAs produced by integer overflow in: n.x * n.y 
> 3: NAs produced by integer overflow in: n.x * n.y 
> > 
> 
> Now there appear to be two issues: First of all, the NAs produced by
> integer overflow.  Since they go away when I use less data, this looks
> like an R bug with big data sets.  When I use less data, the warning
> goes away:
> 
> 57:tbm@arborlon: ~] wc -l s
>   40000 s
> 
> > summary(a)
>     1     2     3     4     5     6 
> 13034 11086  8341  5412  1869   257 
> > summary(b)
>     1     2     3     4     5     6 
> 13034 11086  8341  5412  1869   257 
> > wilcox.test(a, b)
> 
>         Wilcoxon rank sum test with continuity correction
> 
> data:  a and b 
> W = 1599920001, p-value = < 2.2e-16
> alternative hypothesis: true mu is not equal to 0 
> 
> Warning message: 
> "-" not meaningful for factors in: Ops.factor(x, mu) 
> > 
> 
> 
> However, I still don't know what the other warning is.  I dont have an
> "-" in my data.  I reduced the data to 2 lines and the problem still
> occurs:
> 
> > summary(a)
> 2 3 
> 1 1 
> > summary(b)
> 2 3 
> 1 1 
> > wilcox.test(a, b)
> 
>         Wilcoxon rank sum test
> 
> data:  a and b 
> W = 4, p-value = 0.3333
> alternative hypothesis: true mu is not equal to 0 
> 
> Warning message: 
> "-" not meaningful for factors in: Ops.factor(x, mu) 
> > 
> 
> The file is:
> 
> 67:tbm@arborlon: ~] cat s
> a   b
> 2   4
> 3   1
> 68:tbm@arborlon: ~] 
> 
> 
> I'm not an R expert, so this might be a pilot error; but I don't see
> where.
> 
> 
> -- System Information:
> Debian Release: 3.0
> Architecture: i386
> Kernel: Linux regression 2.4.19-686 #1 Thu Aug 8 21:30:09 EST 2002 i686
> Locale: LANG=en_US, LC_CTYPE=en_US
> 
> Versions of packages r-base depends on:
> ii  r-base-core                   1.5.0-2    GNU R core of statistical computin
> ii  r-base-html                   1.5.0-2    GNU R html docs for statistical co
> ii  r-base-latex                  1.5.0-2    GNU R LaTeX docs for statistical c
> 
> -- no debconf information
> 
> 
> -- 
> Martin Michlmayr
> tbm@cyrius.com
> 
> 

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/


From Kurt.Hornik@wu-wien.ac.at  Tue Jan 14 18:48:08 2003
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue Jan 14 18:48:08 2003
Subject: [Rd] ctest package: wilcox.test() produces integer overflow (PR#2453)
In-Reply-To: <200301141710.SAA20726@pubhealth.ku.dk>
References: <200301141710.SAA20726@pubhealth.ku.dk>
Message-ID: <15908.18622.392294.895467@mithrandir.hornik.net>

>>>>> bates  writes:

> This was filed as a bug report on the Debian r-base package.  It is
> more properly a bug report on the ctest package in R.  

> The default method for wilcox.test manipulates x and y without
> checking the class or data.class of these objects.  Possible solutions
> are
>  - create wilcox.test.factor (if appropriate)
>  - check the class and/or data.class of x and y in wilcox.test.default
>    and produce error messages or warnings for inappropriate objects
>  - coerce to numeric unconditionally (probably not a good idea)

Hmm, but the documentation clearly says

  \item{x}{numeric vector of data values.}
  \item{y}{an optional numeric vector of data values.}

-k

> Martin Michlmayr <tbm@cyrius.com> writes:

>> Package: r-base
>> Version: 1.5.0-2 / 1.6.1.cvs.20030103-1
>> Severity: normal
>> 
>> I have some ordinal data and I wanted to perform an u-test.  However,
>> a problem occured:
>> 
>> > x <- read.table("spss-3.txt", header=TRUE)
>> > a = factor(x$a)
>> > b = factor(x$b)
>> > summary(a)
>> 1     2     3     4     5     6 
>> 23900 20362 15238 10007  3399   472 
>> > summary(b)
>> 1     2     3     4     5     6 
>> 23809 20649 15069  9952  3415   484 
>> > wilcox.test(a, b)
>> 
>> Wilcoxon rank sum test with continuity correction
>> 
>> data:  a and b 
>> W = 5384330884, p-value = NA
>> alternative hypothesis: true mu is not equal to 0 
>> 
>> Warning messages: 
>> 1: "-" not meaningful for factors in: Ops.factor(x, mu) 
>> 2: NAs produced by integer overflow in: n.x * n.y 
>> 3: NAs produced by integer overflow in: n.x * n.y 
>> > 
>> 
>> Now there appear to be two issues: First of all, the NAs produced by
>> integer overflow.  Since they go away when I use less data, this looks
>> like an R bug with big data sets.  When I use less data, the warning
>> goes away:
>> 
>> 57:tbm@arborlon: ~] wc -l s
>> 40000 s
>> 
>> > summary(a)
>> 1     2     3     4     5     6 
>> 13034 11086  8341  5412  1869   257 
>> > summary(b)
>> 1     2     3     4     5     6 
>> 13034 11086  8341  5412  1869   257 
>> > wilcox.test(a, b)
>> 
>> Wilcoxon rank sum test with continuity correction
>> 
>> data:  a and b 
>> W = 1599920001, p-value = < 2.2e-16
>> alternative hypothesis: true mu is not equal to 0 
>> 
>> Warning message: 
>> "-" not meaningful for factors in: Ops.factor(x, mu) 
>> > 
>> 
>> 
>> However, I still don't know what the other warning is.  I dont have an
>> "-" in my data.  I reduced the data to 2 lines and the problem still
>> occurs:
>> 
>> > summary(a)
>> 2 3 
>> 1 1 
>> > summary(b)
>> 2 3 
>> 1 1 
>> > wilcox.test(a, b)
>> 
>> Wilcoxon rank sum test
>> 
>> data:  a and b 
>> W = 4, p-value = 0.3333
>> alternative hypothesis: true mu is not equal to 0 
>> 
>> Warning message: 
>> "-" not meaningful for factors in: Ops.factor(x, mu) 
>> > 
>> 
>> The file is:
>> 
>> 67:tbm@arborlon: ~] cat s
>> a   b
>> 2   4
>> 3   1
>> 68:tbm@arborlon: ~] 
>> 
>> 
>> I'm not an R expert, so this might be a pilot error; but I don't see
>> where.
>> 
>> 
>> -- System Information:
>> Debian Release: 3.0
>> Architecture: i386
>> Kernel: Linux regression 2.4.19-686 #1 Thu Aug 8 21:30:09 EST 2002 i686
>> Locale: LANG=en_US, LC_CTYPE=en_US
>> 
>> Versions of packages r-base depends on:
>> ii  r-base-core                   1.5.0-2    GNU R core of statistical computin
>> ii  r-base-html                   1.5.0-2    GNU R html docs for statistical co
>> ii  r-base-latex                  1.5.0-2    GNU R LaTeX docs for statistical c
>> 
>> -- no debconf information
>> 
>> 
>> -- 
>> Martin Michlmayr
>> tbm@cyrius.com
>> 
>> 

> -- 
> Douglas Bates                            bates@stat.wisc.edu
> Statistics Department                    608/262-2598
> University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel


From ripley@stats.ox.ac.uk  Tue Jan 14 18:51:05 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue Jan 14 18:51:05 2003
Subject: (PR#2453) [Rd] ctest package: wilcox.test() produces integer
Message-ID: <200301141751.SAA20967@pubhealth.ku.dk>

We've seen the integer overflow problem in ks.test before, easily solved.

The help page says x and y must be numeric, so this is user error.  I've
added tests to the code.

Why do people file bug reports without reading the help/man page?

On Tue, 14 Jan 2003 bates@stat.wisc.edu wrote:

> This was filed as a bug report on the Debian r-base package.  It is
> more properly a bug report on the ctest package in R.  
> 
> The default method for wilcox.test manipulates x and y without
> checking the class or data.class of these objects.  Possible solutions
> are
>  - create wilcox.test.factor (if appropriate)
>  - check the class and/or data.class of x and y in wilcox.test.default
>    and produce error messages or warnings for inappropriate objects
>  - coerce to numeric unconditionally (probably not a good idea)
> 
> Martin Michlmayr <tbm@cyrius.com> writes:
> 
> > Package: r-base
> > Version: 1.5.0-2 / 1.6.1.cvs.20030103-1
> > Severity: normal
> > 
> > I have some ordinal data and I wanted to perform an u-test.  However,
> > a problem occured:
> > 
> > > x <- read.table("spss-3.txt", header=TRUE)
> > > a = factor(x$a)
> > > b = factor(x$b)
> > > summary(a)
> >     1     2     3     4     5     6 
> > 23900 20362 15238 10007  3399   472 
> > > summary(b)
> >     1     2     3     4     5     6 
> > 23809 20649 15069  9952  3415   484 
> > > wilcox.test(a, b)
> > 
> >         Wilcoxon rank sum test with continuity correction
> > 
> > data:  a and b 
> > W = 5384330884, p-value = NA
> > alternative hypothesis: true mu is not equal to 0 
> > 
> > Warning messages: 
> > 1: "-" not meaningful for factors in: Ops.factor(x, mu) 
> > 2: NAs produced by integer overflow in: n.x * n.y 
> > 3: NAs produced by integer overflow in: n.x * n.y 
> > > 
> > 
> > Now there appear to be two issues: First of all, the NAs produced by
> > integer overflow.  Since they go away when I use less data, this looks
> > like an R bug with big data sets.  When I use less data, the warning
> > goes away:
> > 
> > 57:tbm@arborlon: ~] wc -l s
> >   40000 s
> > 
> > > summary(a)
> >     1     2     3     4     5     6 
> > 13034 11086  8341  5412  1869   257 
> > > summary(b)
> >     1     2     3     4     5     6 
> > 13034 11086  8341  5412  1869   257 
> > > wilcox.test(a, b)
> > 
> >         Wilcoxon rank sum test with continuity correction
> > 
> > data:  a and b 
> > W = 1599920001, p-value = < 2.2e-16
> > alternative hypothesis: true mu is not equal to 0 
> > 
> > Warning message: 
> > "-" not meaningful for factors in: Ops.factor(x, mu) 
> > > 
> > 
> > 
> > However, I still don't know what the other warning is.  I dont have an
> > "-" in my data.  I reduced the data to 2 lines and the problem still
> > occurs:
> > 
> > > summary(a)
> > 2 3 
> > 1 1 
> > > summary(b)
> > 2 3 
> > 1 1 
> > > wilcox.test(a, b)
> > 
> >         Wilcoxon rank sum test
> > 
> > data:  a and b 
> > W = 4, p-value = 0.3333
> > alternative hypothesis: true mu is not equal to 0 
> > 
> > Warning message: 
> > "-" not meaningful for factors in: Ops.factor(x, mu) 
> > > 
> > 
> > The file is:
> > 
> > 67:tbm@arborlon: ~] cat s
> > a   b
> > 2   4
> > 3   1
> > 68:tbm@arborlon: ~] 
> > 
> > 
> > I'm not an R expert, so this might be a pilot error; but I don't see
> > where.
> > 
> > 
> > -- System Information:
> > Debian Release: 3.0
> > Architecture: i386
> > Kernel: Linux regression 2.4.19-686 #1 Thu Aug 8 21:30:09 EST 2002 i686
> > Locale: LANG=en_US, LC_CTYPE=en_US
> > 
> > Versions of packages r-base depends on:
> > ii  r-base-core                   1.5.0-2    GNU R core of statistical computin
> > ii  r-base-html                   1.5.0-2    GNU R html docs for statistical co
> > ii  r-base-latex                  1.5.0-2    GNU R LaTeX docs for statistical c
> > 
> > -- no debconf information
> > 
> > 
> > -- 
> > Martin Michlmayr
> > tbm@cyrius.com
> > 
> > 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From dfrgh@allesklar.de  Tue Jan 14 19:10:03 2003
From: dfrgh@allesklar.de (dfrgh@allesklar.de)
Date: Tue Jan 14 19:10:03 2003
Subject: [Rd] Account wird gelöscht (PR#2455)
Message-ID: <200301141810.TAA21044@pubhealth.ku.dk>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Unbenanntes Dokument</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body link="#FF0000" vlink="#FF0000" alink="#FF0000">
<table width="408" border="0" cellpadding="0" cellspacing="0">
  <!--DWLayoutTable-->
  <tr> 
    <td width="9" height="30">&nbsp;</td>
    <td width="399">&nbsp;</td>
  </tr>
  <tr> 
    <td height="304">&nbsp;</td>
    <td valign="top">Hallo Du, <p>suchst Du einen Neuen Partner der dich liebevoll 
        <br>
        verw&ouml;hnt und alles f&uuml;r Dich macht?</p>
      <p>Dann bist Du bei uns richtig.<br>
        Wir sind der gr&ouml;&szlig;te Kontaktmarkt im Internet.<br>
        Es sind st&auml;ndig neue Frauen und M&auml;nner in unserer Datenbank 
        <br>
        vorhanden. Wir f&uuml;hren derzeit 60.000 Frauen und M&auml;nner.<br>
        Schau doch mal vorbei.</p>
      <p>M&ouml;chtest Du Sie kennenlehrnen dann<strong> <a href="http://medlem.spray.se/kontakt1234/">BITTE 
        HIER KLICKEN</a><br>
        </strong> </p>
      <p>Mit freundlichen Gr&uuml;&szlig;en <br>
        Kontakt 2003</p></td>
  </tr>
</table>
</body>
</html>




4395CjMP0-374FOXR9740qeXa1-397IhvA8347LfIo9-717xjLl47


From jerome@hivnet.ubc.ca  Wed Jan 15 19:50:06 2003
From: jerome@hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Wed Jan 15 19:50:06 2003
Subject: [Rd] chron package: delimiter for dates (PR#2458)
Message-ID: <200301151846.TAA02822@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.6.1
OS: redhat linux 7.2
Submission from: (NULL) (142.103.173.179)



The option <<format="day-month-year">> fails.

Package: chron
Version: 2.2-22

> library(chron)
> chron("01 May 2002",format="day month year")
[1] 01 May 2002
> chron("01-May-2002",format="day-month-year")
Error in "names<-.default"(*tmp*, value = fnames) :
        names attribute must be the same length as the vector
In addition: Warning message:
wrong number of fields in entry(ies) 1 in: unpaste(dates., sep = fmt$sep, fnames
= fmt$periods, nfields = 3)


From jdiaz-saiz@uh.edu  Wed Jan 15 22:42:02 2003
From: jdiaz-saiz@uh.edu (jdiaz-saiz@uh.edu)
Date: Wed Jan 15 22:42:02 2003
Subject: [Rd] Warning appears after update.packages() (PR#2459)
Message-ID: <200301152141.WAA03590@pubhealth.ku.dk>

Full_Name: Joaquin Diaz-Saiz
Version: 1.6.2
OS: Windows 98
Submission from: (NULL) (129.7.121.92)


> update.packages()
trying URL `http://cran.r-project.org/bin/windows/contrib/PACKAGES'
Content type `text/plain; charset=iso-8859-1' length 8721 bytes
opened URL
downloaded 8721 bytes

Warning message: 
DLL attempted to change FPU control word from 8001f to 9001f 


NOTE: IS THIS OF ANY IMPORTANCE? IT DID NOT APPEAR IN VERSION 1.6.1.


From u9801539@leonard.anu.edu.au  Thu Jan 16 10:24:05 2003
From: u9801539@leonard.anu.edu.au (u9801539@leonard.anu.edu.au)
Date: Thu Jan 16 10:24:05 2003
Subject: [Rd] apropos() with partial name (PR#2461)
Message-ID: <200301160924.KAA06752@pubhealth.ku.dk>

> apropos(sort)
[1] "is.unsorted" "sort"        "sort.list"  
> apropos(sor)
Error in apropos(sor) : Object "sor" not found
> sor <- 0
> apropos(sor)
[1] "sor"         "is.unsorted" "sort"        "sort.list"  

Thus the behaviour of apropos() can depend on what objects
are in the workspace, which is surely not intended!

There are some weird consequences:
apropos(b) generates an error, while apropos(c) finds a
huge number of partial matches.

The problem is with the first line of the function, i.e.,
    if (!is.character(what)) 
        what <- as.character(substitute(what))

I suggest replacing this with:
    if (!is.character(substitute(what))) 
        what <- as.character(substitute(what))

apropos("sor") works fine.

I have checked this also on Darwin/X11, version 1.6.1

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 6.2
 year = 2003
 month = 01
 day = 10
 language = R

Windows XP Home Edition (build 2600) Service Pack 1.0

Search Path:
 .GlobalEnv, package:DAAG, package:ctest, Autoloads, package:base
John Maindonald                     email : john.maindonald@anu.edu.au
Centre for Bioinformation Science,  phone : (6125)3473        
c/o MSI,                            fax   : (6125)5549 
John Dedman Mathematical Sciences Building (Building 27)
Australian National University
Canberra ACT 0200
Australia


From dmurdoch@pair.com  Thu Jan 16 12:44:02 2003
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu Jan 16 12:44:02 2003
Subject: [Rd] Warning appears after update.packages() (PR#2459)
In-Reply-To: <200301152141.WAA03590@pubhealth.ku.dk>
References: <200301152141.WAA03590@pubhealth.ku.dk>
Message-ID: <n86d2v051jlpv0q1v4e8ds45pvbb327cbs@4ax.com>

On Wed, 15 Jan 2003 22:41:49 +0100 (MET), you wrote:

>Full_Name: Joaquin Diaz-Saiz
>Version: 1.6.2
>OS: Windows 98
>Submission from: (NULL) (129.7.121.92)
>
>
>> update.packages()
>trying URL `http://cran.r-project.org/bin/windows/contrib/PACKAGES'
>Content type `text/plain; charset=iso-8859-1' length 8721 bytes
>opened URL
>downloaded 8721 bytes
>
>Warning message: 
>DLL attempted to change FPU control word from 8001f to 9001f 
>
>
>NOTE: IS THIS OF ANY IMPORTANCE? IT DID NOT APPEAR IN VERSION 1.6.1.

Thanks for posting that. It tells you that an external dll has caused
the floating point precision to change, but R has changed it back.
It's a sign of a bug that needs fixing.  I'll look into it.

This change in mentioned in the CHANGES file.  You can read more about
it in the dyn.load help page.

Duncan Murdoch


From bert_gunter@merck.com  Thu Jan 16 14:52:14 2003
From: bert_gunter@merck.com (bert_gunter@merck.com)
Date: Thu Jan 16 14:52:14 2003
Subject: [Rd] file.choose (PR#2465)
Message-ID: <200301161352.OAA11813@pubhealth.ku.dk>

R1.6.2 winnt.

file.choose() gives an error if the dialog is cancelled without choosing a
file. This can be easily dealt with via try(), but I would have thought that
a NULL or NA return would be the expected behavior.

Cheers,

Bert Gunter
Biometrics Research RY 84-16
Merck & Company
P.O. Box 2000
Rahway, NJ 07065-0900
Phone: (732) 594-7765
mailto: bert_gunter@merck.com

"The business of the statistician is to catalyze the scientific learning
process."      -- George E.P. Box




------------------------------------------------------------------------------


From jechacon@unex.es  Thu Jan 16 18:04:06 2003
From: jechacon@unex.es (jechacon@unex.es)
Date: Thu Jan 16 18:04:06 2003
Subject: [Rd] Wrong constants in sj function (sm library) (PR#2467)
Message-ID: <200301161704.SAA14084@pubhealth.ku.dk>

Full_Name: J. E. Chacón
Version: 1.6.2
OS: Windows Millenium
Submission from: (NULL) (158.49.28.155)


Dear reader,
   I am studying the bandwidth selection problem for density estimation. I have
read the popular Sheather & Jones (1991) article, in which this sj function is
based, to obtain (through function hsj) the bandwidth selector which appears in
that article. The problem is that the constants appearing in Sheather & Jones
paper are wrong, and this same (wrong) constants are used in the implementation
of the method for R. The (wrong) values are a=0.92*IQR*n^(-1/7) and
b=0.912*IQR*n^(-1/9). The constants there are wrong, the correct ones are:
- For a, (16*sqrt(2)/5)^(1/7)=~1.24   and
- For b, (32*sqrt(2)/7)^(1/9)=~1.23
These corrected values appear, for instance, in the function width.SJ of MASS
library.
I hope this helps for improving this wonderful sm library.
Yours sincerely,
    J.E. Chacón
P.S.: Greetings from here for Professor Azzalini, who I met at his Smoothing
Methods course in Girona (Spain), last November, 2001.


From ripley@stats.ox.ac.uk  Thu Jan 16 18:23:03 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu Jan 16 18:23:03 2003
Subject: [Rd] Wrong constants in sj function (sm library) (PR#2467)
In-Reply-To: <200301161704.SAA14084@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0301161716310.1209-100000@gannet.stats>

Bugs in packages are better sent to the maintainer than to R-bugs, as 
package maintainers do not in general have access to R-bugs.

This seems to me not to be a bug at all: the method has been correctly
implemented.  That the method is less then perfect is something you need 
to take up with the *authors* -- it would be wrong for me to change their 
code (especially since R itself has the Sheather-Jones method implemented, 
as well as MASS).  If they want to change their S code the changes will 
percolate through to the R port eventually, but they may prefer to use the 
method they (I presume) give in their book.

On Thu, 16 Jan 2003 jechacon@unex.es wrote:

> Full_Name: J. E. Chacón
> Version: 1.6.2
> OS: Windows Millenium
> Submission from: (NULL) (158.49.28.155)
> 
> 
> Dear reader,
>    I am studying the bandwidth selection problem for density estimation. I have
> read the popular Sheather & Jones (1991) article, in which this sj function is
> based, to obtain (through function hsj) the bandwidth selector which appears in
> that article. The problem is that the constants appearing in Sheather & Jones
> paper are wrong, and this same (wrong) constants are used in the implementation
> of the method for R. The (wrong) values are a=0.92*IQR*n^(-1/7) and
> b=0.912*IQR*n^(-1/9). The constants there are wrong, the correct ones are:
> - For a, (16*sqrt(2)/5)^(1/7)=~1.24   and
> - For b, (32*sqrt(2)/7)^(1/9)=~1.23
> These corrected values appear, for instance, in the function width.SJ of MASS
> library.
> I hope this helps for improving this wonderful sm library.
> Yours sincerely,
>     J.E. Chacón
> P.S.: Greetings from here for Professor Azzalini, who I met at his Smoothing
> Methods course in Girona (Spain), last November, 2001.
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From murdoch@stats.uwo.ca  Thu Jan 16 19:55:03 2003
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Thu Jan 16 19:55:03 2003
Subject: [Rd] Warning appears after update.packages() (PR#2459)
Message-ID: <200301161855.TAA14524@pubhealth.ku.dk>

On Thu, 16 Jan 2003 11:37:26 -0600, you wrote in message
<20030116113726.3e562214.JDiaz-Saiz@UH.EDU>:

>I just did what you suggested. I even turned the computer off and started from scratch. The first time that I call update.packages() I get the warning. It does not appear when calling the function again.
>
>My OS is Windows 98SE.

I've got some more information now.  The first time you do any
internet operation, R loads "internet2.dll" or "internet.dll", which
are part of Internet Explorer.  Whichever one of those that you're
using has a bug in it:  it is changing the floating point precision
from 64 bit to 53 bit precision.  (This is a common bug in Microsoft C
and other DLLs.)

Versions of R previous to 1.6.2 would not correct this bug, and would
proceed to give you erroneous results.  You probably wouldn't notice
in most calculations, since 53 bits is still enough precision for most
purposes.  Version 1.6.2 corrects it by changing the precision back to
64 bits and giving you the warning, so R should be safe.

If something in the DLL relies on 53 bit precision, you might find
that it doesn't work any more.  This seems pretty unlikely:  after
all, 64 bit precision is better than 53 bit precision, and an Internet
browser doesn't do much with floating point in any case.  It'll likely
just run a tiny bit slower.

So my advice would be to ignore the error.  If you don't like that,
you could try upgrading to a newer version of Internet Explorer, and
the error might go away.  I'm using IE 5.50 in Win98 and I don't see
the message.

Duncan Murdoch


From deleeuw@stat.ucla.edu  Thu Jan 16 19:56:03 2003
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu Jan 16 19:56:03 2003
Subject: [Rd] Re: [R] Announce: pmg -- menu driven GUI using RGtk
In-Reply-To: <15910.62004.627497.532307@levy.math.csi.cuny.edu>
Message-ID: <084D5237-2984-11D7-9B85-000393BB6D36@stat.ucla.edu>

This build and runs fine in the Darwin/X11 version for Mac OS X. It  
does require some
hacking of RGtk. Basically, you need to build RGtk both as the bundle  
RGtk.so
and as the static archive libRGtk.a This is necessary to be able to  
build
RGtkExtras and RGtkGlade and so on. Binaries will be in the next  
archive on
gifi.

On Thursday, January 16, 2003, at 09:56 AM, verzani@math.csi.cuny.edu  
wrote:

> Hello all,
>
> I've put together a quick and dirty menubar + dialogs + spreadsheet
> GUI for R using the RGtk package. Performance is not great (OOP is a
> real memory hog?), the design may be worse, but the hope is that it
> will be useful in an introductory stats course while we await the
> arrival of a real gui with ObveRsive and SciViews.
>
> The package can be found at
>
> http://www.math.csi.cuny.edu/Statistics/R/pmg/
>
> Feedback welcome.
>
> --  
> o---------------------------------------------------------------------o
> |  John Verzani                            verzani@math.csi.cuny.edu  |
> |  CUNY/CSI			       www.math.csi.cuny.edu/verzani  |
> |  Dept. of Mathematics, 1S-215	                        718 982 3623  |
> |  Staten Island, NY 10314	       	          (fax) 718 982 3631  |
> o---------------------------------------------------------------------o
>
> ______________________________________________
> R-help@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-help
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------


From ripley@stats.ox.ac.uk  Fri Jan 17 10:31:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Jan 17 10:31:02 2003
Subject: [Rd] password-protected HTTP proxies
Message-ID: <Pine.LNX.4.44.0301170924550.5875-100000@gannet.stats>

I have added code to R-devel to handle HTTP proxies which require 
username/password (basic) authentication.  I read the HTTP/1.0 (and /1.1) 
specs and looked at the user interface of wget, but I have no such proxy 
to try.

If anyone can try such a proxy, I would appreciate a report on

(1) does it work and

(2) if you are already using wget, do the environment variables you set 
for wget work unchanged for my code?

and of course if not, the code patches needed to make it work.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From dmurdoch@pair.com  Fri Jan 17 14:18:07 2003
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Fri Jan 17 14:18:07 2003
Subject: [Rd] file.choose (PR#2465)
In-Reply-To: <200301161352.OAA11813@pubhealth.ku.dk>
References: <200301161352.OAA11813@pubhealth.ku.dk>
Message-ID: <atuf2vsdaitpo7an37dd2tug7b90a05n6m@4ax.com>

On Thu, 16 Jan 2003 14:52:24 +0100 (MET), you wrote:

>R1.6.2 winnt.
>
>file.choose() gives an error if the dialog is cancelled without choosing a
>file. This can be easily dealt with via try(), but I would have thought that
>a NULL or NA return would be the expected behavior.

I'd be worried that a change like that would lead to bugs downstream.
Routines that make use of file.choose results would now have to check
for invalid input.

On the other hand, file.choose() could be more flexible.  For example,
the other day someone suggested to me that "install library from local
zip file" should be able to install multiple packages at once, and
that makes sense, but it requires multiple selections to be enabled in
the file selection menu.  There are a lot of other options to standard
Windows file dialogs, but I can't spot any that would really be
appropriate here.  Can anyone else?

Duncan Murdoch


From ripley@stats.ox.ac.uk  Fri Jan 17 14:41:03 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Jan 17 14:41:03 2003
Subject: [Rd] file.choose (PR#2465)
In-Reply-To: <atuf2vsdaitpo7an37dd2tug7b90a05n6m@4ax.com>
Message-ID: <Pine.LNX.4.44.0301171330010.6214-100000@gannet.stats>

On Fri, 17 Jan 2003, Duncan Murdoch wrote:

> On Thu, 16 Jan 2003 14:52:24 +0100 (MET), you wrote:
> 
> >R1.6.2 winnt.
> >
> >file.choose() gives an error if the dialog is cancelled without choosing a
> >file. This can be easily dealt with via try(), but I would have thought that
> >a NULL or NA return would be the expected behavior.
> 
> I'd be worried that a change like that would lead to bugs downstream.
> Routines that make use of file.choose results would now have to check
> for invalid input.

I agre..

> 
> On the other hand, file.choose() could be more flexible.  For example,
> the other day someone suggested to me that "install library from local
> zip file" should be able to install multiple packages at once, and
> that makes sense, but it requires multiple selections to be enabled in
> the file selection menu.  There are a lot of other options to standard
> Windows file dialogs, but I can't spot any that would really be
> appropriate here.  Can anyone else?

Unfortunately file.choose() is a cross-platform function documented to 
return just one file name.  It's a legacy of the MacOS beginnings, and no 
one has ever told me what the `new' argument was intended to do.

I think we might to start again with choose.files(), with an argument that 
allowed multiple choices, and hope it can really be implemented on all the 
GUI-based interfaces (on Unix file.choose is not even based on choosing 
from a text list).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From gwgilc@wm.edu  Fri Jan 17 16:23:05 2003
From: gwgilc@wm.edu (gwgilc@wm.edu)
Date: Fri Jan 17 16:23:05 2003
Subject: [Rd] read.table bug in Mac OS X (PR#2469)
Message-ID: <200301171523.QAA23065@pubhealth.ku.dk>

Full_Name: George W. Gilchrist
Version: 1.6.2
OS: OS X
Submission from: (NULL) (128.239.124.126)


Start with a tab-delimited or comma-delimited text file created on the Mac and
use read.table("filename.txt", header=T) to read it in. When the first column of
the file contains a character vector, and there is a header line, the first
letter of the first column of the fifth row is appended to the start of the
column name and is omitted from the data entry. See the example below. This
appears to have something to do with the way text files are encoded on the Mac.
Text flies created in Excel, emacs, Word, and TextEdit on OS X all seem to do
this, even when you copy the text file over to a PC and run R 1.6.2 there under
Windows. If you open the Mac text file in a text editor on the PC and save it
under a different name, the problem goes away. I have tried this with a half
dozen different files. 

> tmp1<-read.table("deadFly.txt", header=T)
> tmp1[1:10,]
   VTrt Dead.X Dead.C Live.X Live.C N.X N.C P.Live.X P.Live.C
1    Vg      2      0      7     10   9  10     0.78    1.000
2    Vg      5      1      5      8  10   9     0.50    0.890
3    Vg      0      0      8     10   8  10     1.00    1.000
4    Vg      0      0      9      9   9   9     1.00    1.000
5     g      1      1      9      7  10   8     0.90    0.875
6    Vg      4      1      6      9  10  10     0.60    0.900
7    Vg      2      1      7      9   9  10     0.78    0.900
8    Vg      0      0      9      8   9   8     1.00    1.000
9    Vg      0      0     10     10  10  10     1.00    1.000
10   Vg      0      0      8      9   8   9     1.00    1.000

> tmp2<-read.table("musselJen.txt", header=T)
> tmp2[1:10,]
   LLoc  Size ID Bac Sec    N   PC
1    LS 120.0  1   T   1 32.7 92.0
2    LS 120.0  1   T   2 33.3 92.5
3    LS 120.0  1   T   3 39.3 96.9
4    LS 120.0  2   T   1 36.1 94.3
5     S 120.0  2   T   2 38.3 94.5
6    LS 120.0  2   T   3 34.3 94.1
7    LS 120.0  3   T   1 22.1 83.9
8    LS 120.0  3   T   2 25.5 93.1
9    LS 120.0  3   T   3 28.7 94.6
10   LS   4.2  1   T   1 48.5 93.7
>


From ripley@stats.ox.ac.uk  Fri Jan 17 16:33:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Jan 17 16:33:02 2003
Subject: [Rd] read.table bug in Mac OS X (PR#2469)
In-Reply-To: <200301171523.QAA23065@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0301171530570.7835-100000@gannet.stats>

If you can put such a file somewhere those of us on more normal OSes may 
be able to debug it.  I am guessing line endings, but it's only a guess.
Or email me directly (attachments don't work on R-bugs).

On Fri, 17 Jan 2003 gwgilc@wm.edu wrote:

> Full_Name: George W. Gilchrist
> Version: 1.6.2
> OS: OS X
> Submission from: (NULL) (128.239.124.126)
> 
> 
> Start with a tab-delimited or comma-delimited text file created on the Mac and
> use read.table("filename.txt", header=T) to read it in. When the first column of
> the file contains a character vector, and there is a header line, the first
> letter of the first column of the fifth row is appended to the start of the
> column name and is omitted from the data entry. See the example below. This
> appears to have something to do with the way text files are encoded on the Mac.
> Text flies created in Excel, emacs, Word, and TextEdit on OS X all seem to do
> this, even when you copy the text file over to a PC and run R 1.6.2 there under
> Windows. If you open the Mac text file in a text editor on the PC and save it
> under a different name, the problem goes away. I have tried this with a half
> dozen different files. 
> 
> > tmp1<-read.table("deadFly.txt", header=T)
> > tmp1[1:10,]
>    VTrt Dead.X Dead.C Live.X Live.C N.X N.C P.Live.X P.Live.C
> 1    Vg      2      0      7     10   9  10     0.78    1.000
> 2    Vg      5      1      5      8  10   9     0.50    0.890
> 3    Vg      0      0      8     10   8  10     1.00    1.000
> 4    Vg      0      0      9      9   9   9     1.00    1.000
> 5     g      1      1      9      7  10   8     0.90    0.875
> 6    Vg      4      1      6      9  10  10     0.60    0.900
> 7    Vg      2      1      7      9   9  10     0.78    0.900
> 8    Vg      0      0      9      8   9   8     1.00    1.000
> 9    Vg      0      0     10     10  10  10     1.00    1.000
> 10   Vg      0      0      8      9   8   9     1.00    1.000
> 
> > tmp2<-read.table("musselJen.txt", header=T)
> > tmp2[1:10,]
>    LLoc  Size ID Bac Sec    N   PC
> 1    LS 120.0  1   T   1 32.7 92.0
> 2    LS 120.0  1   T   2 33.3 92.5
> 3    LS 120.0  1   T   3 39.3 96.9
> 4    LS 120.0  2   T   1 36.1 94.3
> 5     S 120.0  2   T   2 38.3 94.5
> 6    LS 120.0  2   T   3 34.3 94.1
> 7    LS 120.0  3   T   1 22.1 83.9
> 8    LS 120.0  3   T   2 25.5 93.1
> 9    LS 120.0  3   T   3 28.7 94.6
> 10   LS   4.2  1   T   1 48.5 93.7
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley@stats.ox.ac.uk  Fri Jan 17 19:40:03 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Jan 17 19:40:03 2003
Subject: [Rd] read.table bug in Mac OS X (PR#2469)
In-Reply-To: <200301171523.QAA23065@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0301171821220.11823-100000@gannet.stats>

George has supplied an example file which is CR-terminated.

As far as I can see this is an error when using classic MacOS files on an 
foreign OS, and is I presume about the Darwin port of R (confirmation 
please) where the native files are LF terminated and the example file was 
CR terminated.

It's a bit of a wonder that it ever worked, but it was broken in fixing 
PR#2396.  I've added a test example and a fix that covers this and 
PR#2396, and they will be in R-patched and R-devel shortly.

It does make me wonder about the testing process: do the testers of the 
Darwin port never use classic MacOS files?  How does emacs manage to 
create CR-terminated files on a unix-based OS?  Or is this a case of using 
Carbon MacOS application with Darwin R, and that's rare?

On Fri, 17 Jan 2003 gwgilc@wm.edu wrote:

> Full_Name: George W. Gilchrist
> Version: 1.6.2
> OS: OS X
> Submission from: (NULL) (128.239.124.126)
> 
> 
> Start with a tab-delimited or comma-delimited text file created on the Mac and
> use read.table("filename.txt", header=T) to read it in. When the first column of
> the file contains a character vector, and there is a header line, the first
> letter of the first column of the fifth row is appended to the start of the
> column name and is omitted from the data entry. See the example below. This
> appears to have something to do with the way text files are encoded on the Mac.
> Text flies created in Excel, emacs, Word, and TextEdit on OS X all seem to do
> this, even when you copy the text file over to a PC and run R 1.6.2 there under
> Windows. If you open the Mac text file in a text editor on the PC and save it
> under a different name, the problem goes away. I have tried this with a half
> dozen different files. 
> 
> > tmp1<-read.table("deadFly.txt", header=T)
> > tmp1[1:10,]
>    VTrt Dead.X Dead.C Live.X Live.C N.X N.C P.Live.X P.Live.C
> 1    Vg      2      0      7     10   9  10     0.78    1.000
> 2    Vg      5      1      5      8  10   9     0.50    0.890
> 3    Vg      0      0      8     10   8  10     1.00    1.000
> 4    Vg      0      0      9      9   9   9     1.00    1.000
> 5     g      1      1      9      7  10   8     0.90    0.875
> 6    Vg      4      1      6      9  10  10     0.60    0.900
> 7    Vg      2      1      7      9   9  10     0.78    0.900
> 8    Vg      0      0      9      8   9   8     1.00    1.000
> 9    Vg      0      0     10     10  10  10     1.00    1.000
> 10   Vg      0      0      8      9   8   9     1.00    1.000
> 
> > tmp2<-read.table("musselJen.txt", header=T)
> > tmp2[1:10,]
>    LLoc  Size ID Bac Sec    N   PC
> 1    LS 120.0  1   T   1 32.7 92.0
> 2    LS 120.0  1   T   2 33.3 92.5
> 3    LS 120.0  1   T   3 39.3 96.9
> 4    LS 120.0  2   T   1 36.1 94.3
> 5     S 120.0  2   T   2 38.3 94.5
> 6    LS 120.0  2   T   3 34.3 94.1
> 7    LS 120.0  3   T   1 22.1 83.9
> 8    LS 120.0  3   T   2 25.5 93.1
> 9    LS 120.0  3   T   3 28.7 94.6
> 10   LS   4.2  1   T   1 48.5 93.7
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From rpeng@stat.ucla.edu  Fri Jan 17 22:06:03 2003
From: rpeng@stat.ucla.edu (Roger Peng)
Date: Fri Jan 17 22:06:03 2003
Subject: [Rd] supplying gradient to constrOptim()
Message-ID: <Pine.GSO.4.10.10301171256220.27871-100000@fisher.stat.ucla.edu>

Hi, I'm very interested in using the constrOptim() function currently in
the R-devel sources.  In particular, I'm trying to fit point process
conditional intensity models via maximum likelihood.  However, I noticed
that the gradient of the objective function must be supplied for all but
the Nelder-Mead method.  I was wondering why this was because optim()
itself does not require a gradient function for the BFGS or Conjugate
Gradient methods.

Thanks,

-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng


From jmc@research.bell-labs.com  Fri Jan 17 23:02:07 2003
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri Jan 17 23:02:07 2003
Subject: [Rd] Methods package is now attached by default
Message-ID: <3E287D10.8692826A@research.bell-labs.com>

The current r-devel (aka R 1.7.0) now attaches the package "methods" by
default at startup.

A new option, "defaultPackages", is set to c("methods", "ctest") by
default, causing the .First in package base to require those two
packages at startup.

There are two main known differences from having methods attached:

- the definition of class() changes, in particular no object ever has a
NULL class.  If you have code that depends on test such as
`if(is.null(class(x)))...', there may be problems.

Usually code with those sort of tests is doing a workaround of the fact
that not all objects had a class before.  The best solution is usually
to ask what the code really wants to do.  If you do have to retain
exactly the old behavior, one solution is to copy the version of class
and class<- from the base package and use those (as baseClass and
baseClass<-, e.g.) instead of class and class<-).

- the function plot has arguments (x,y,...) (to allow methods for the
y-axis argument) instead of (x, ...) in package base.  S3-style plot
methods are still dispatched, but there are possible incompatibilities
from calls to plot() with _unnamed_ arguments (other than x) intended
for these methods.

See ?Startup for how the defaultPackages option affects startup (& for
ways to change the packages attached at startup).
-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc


From jgentry@jimmy.harvard.edu  Fri Jan 17 23:58:02 2003
From: jgentry@jimmy.harvard.edu (Jeff Gentry)
Date: Fri Jan 17 23:58:02 2003
Subject: [Rd] Methods package is now attached by default
Message-ID: <Pine.SOL.4.20.0301171754560.8835-100000@santiam.dfci.harvard.edu>

> The current r-devel (aka R 1.7.0) now attaches the package "methods" by
> default at startup.

There's either a problem here or something is wrong on my end as I just
did a rsync to R-devel and the build bombed out with:

gcc -shared -L/usr/local/lib -o methods.so do_substitute_direct.o
methods_list_dispatch.o method_meta_data.o slot.o class_support.o tests.o
-L../../../../bin -lR
../../../../library/methods/libs/methods.so is unchanged
make[5]: Leaving directory `/home/jgentry/R-devel/src/library/methods/src'
make[4]: Leaving directory `/home/jgentry/R-devel/src/library/methods/src'
make[4]: Entering directory `/home/jgentry/R-devel/src/library/methods'
dumping R code in package 'methods'
initializing class and method definitions now ...Error in
setClass("VIRTUAL", sealed = TRUE, where = envir) : 
	"VIRTUAL" has a sealed class definition and cannot be redefined
Execution halted
make[4]: *** [../../../library/methods/R/all.rda] Error 1

-Jeff


From ripley@stats.ox.ac.uk  Sat Jan 18 00:31:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat Jan 18 00:31:02 2003
Subject: [Rd] Methods package is now attached by default
In-Reply-To: <Pine.SOL.4.20.0301171754560.8835-100000@santiam.dfci.harvard.edu>
Message-ID: <Pine.LNX.4.44.0301172326150.22833-100000@gannet.stats>

On Fri, 17 Jan 2003, Jeff Gentry wrote:

> > The current r-devel (aka R 1.7.0) now attaches the package "methods" by
> > default at startup.
> 
> There's either a problem here or something is wrong on my end as I just
> did a rsync to R-devel and the build bombed out with:

Try make clean and/or removing library/methods?

There should be an error message, as now the R used to dump methods
expects methods to exist and it is only partially constructed.  We need to
revisit what --vanilla does: it is now urgent to be able to run R without
running the .First.  Or at least that's what I find on a clean build.

> 
> gcc -shared -L/usr/local/lib -o methods.so do_substitute_direct.o
> methods_list_dispatch.o method_meta_data.o slot.o class_support.o tests.o
> -L../../../../bin -lR
> ../../../../library/methods/libs/methods.so is unchanged
> make[5]: Leaving directory `/home/jgentry/R-devel/src/library/methods/src'
> make[4]: Leaving directory `/home/jgentry/R-devel/src/library/methods/src'
> make[4]: Entering directory `/home/jgentry/R-devel/src/library/methods'
> dumping R code in package 'methods'
> initializing class and method definitions now ...Error in
> setClass("VIRTUAL", sealed = TRUE, where = envir) : 
> 	"VIRTUAL" has a sealed class definition and cannot be redefined
> Execution halted
> make[4]: *** [../../../library/methods/R/all.rda] Error 1
> 
> -Jeff
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jgentry@jimmy.harvard.edu  Sat Jan 18 02:24:02 2003
From: jgentry@jimmy.harvard.edu (Jeff Gentry)
Date: Sat Jan 18 02:24:02 2003
Subject: [Rd] Methods package is now attached by default
In-Reply-To: <Pine.LNX.4.44.0301172326150.22833-100000@gannet.stats>
Message-ID: <Pine.SOL.4.20.0301172022000.8835-100000@santiam.dfci.harvard.edu>

On Fri, 17 Jan 2003 ripley@stats.ox.ac.uk wrote:
> > There's either a problem here or something is wrong on my end as I just
> > did a rsync to R-devel and the build bombed out with:
> Try make clean and/or removing library/methods?

It actually turned out to be the latter - removing R/library/methods
before building worked perfectly.

-Jeff


From jago@mclink.it  Sat Jan 18 10:33:02 2003
From: jago@mclink.it (Stefano Iacus)
Date: Sat Jan 18 10:33:02 2003
Subject: [Rd] read.table bug in Mac OS X (PR#2469)
In-Reply-To: <Pine.LNX.4.44.0301171821220.11823-100000@gannet.stats>
Message-ID: <EBF7E5BF-2AC7-11D7-9DEF-003065CC4CB8@mclink.it>

Brian and George, with the following file

A.2	B	C
uno	10	100
due	20	200
tre	30	300
quattro	40	400
cinque	50	500
sei	60	600


which is tab-delim, saved as MacOS file (CR) I can read it with Darwin 
R (1.6.1) as follows

 > read.table("prova.txt",header=TRUE)
       A.2  B   C
1     uno 10 100
2     due 20 200
3     tre 30 300
4 quattro 40 400
5  cinque 50 500
6     sei 60 600
 > read.table("prova.txt")
        V1 V2  V3
1     A.2  B   C
2     uno 10 100
3     due 20 200
4     tre 30 300
5 quattro 40 400
6  cinque 50 500
7     sei 60 600

Can someone send me the critical files?
stefano


On Venerdì, gen 17, 2003, at 19:39 Europe/Rome, ripley@stats.ox.ac.uk 
wrote:

> George has supplied an example file which is CR-terminated.
>
> As far as I can see this is an error when using classic MacOS files on 
> an
> foreign OS, and is I presume about the Darwin port of R (confirmation
> please) where the native files are LF terminated and the example file 
> was
> CR terminated.
>
> It's a bit of a wonder that it ever worked, but it was broken in fixing
> PR#2396.  I've added a test example and a fix that covers this and
> PR#2396, and they will be in R-patched and R-devel shortly.
>
> It does make me wonder about the testing process: do the testers of the
> Darwin port never use classic MacOS files?
why should they?

>  How does emacs manage to
> create CR-terminated files on a unix-based OS?
there is a standard (unix)Emacs and a Carbon Emacs. The second one 
behaves as a "Classic" application under OSX, i.e. it is carbonized but 
does not use unix features almost like Carbon R.

> Or is this a case of using
> Carbon MacOS application with Darwin R, and that's rare?
>
I think so.
stefano

> On Fri, 17 Jan 2003 gwgilc@wm.edu wrote:
>
>> Full_Name: George W. Gilchrist
>> Version: 1.6.2
>> OS: OS X
>> Submission from: (NULL) (128.239.124.126)
>>
>>
>> Start with a tab-delimited or comma-delimited text file created on 
>> the Mac and
>> use read.table("filename.txt", header=T) to read it in. When the 
>> first column of
>> the file contains a character vector, and there is a header line, the 
>> first
>> letter of the first column of the fifth row is appended to the start 
>> of the
>> column name and is omitted from the data entry. See the example 
>> below. This
>> appears to have something to do with the way text files are encoded 
>> on the Mac.
>> Text flies created in Excel, emacs, Word, and TextEdit on OS X all 
>> seem to do
>> this, even when you copy the text file over to a PC and run R 1.6.2 
>> there under
>> Windows. If you open the Mac text file in a text editor on the PC and 
>> save it
>> under a different name, the problem goes away. I have tried this with 
>> a half
>> dozen different files.
>>
>>> tmp1<-read.table("deadFly.txt", header=T)
>>> tmp1[1:10,]
>>    VTrt Dead.X Dead.C Live.X Live.C N.X N.C P.Live.X P.Live.C
>> 1    Vg      2      0      7     10   9  10     0.78    1.000
>> 2    Vg      5      1      5      8  10   9     0.50    0.890
>> 3    Vg      0      0      8     10   8  10     1.00    1.000
>> 4    Vg      0      0      9      9   9   9     1.00    1.000
>> 5     g      1      1      9      7  10   8     0.90    0.875
>> 6    Vg      4      1      6      9  10  10     0.60    0.900
>> 7    Vg      2      1      7      9   9  10     0.78    0.900
>> 8    Vg      0      0      9      8   9   8     1.00    1.000
>> 9    Vg      0      0     10     10  10  10     1.00    1.000
>> 10   Vg      0      0      8      9   8   9     1.00    1.000
>>
>>> tmp2<-read.table("musselJen.txt", header=T)
>>> tmp2[1:10,]
>>    LLoc  Size ID Bac Sec    N   PC
>> 1    LS 120.0  1   T   1 32.7 92.0
>> 2    LS 120.0  1   T   2 33.3 92.5
>> 3    LS 120.0  1   T   3 39.3 96.9
>> 4    LS 120.0  2   T   1 36.1 94.3
>> 5     S 120.0  2   T   2 38.3 94.5
>> 6    LS 120.0  2   T   3 34.3 94.1
>> 7    LS 120.0  3   T   1 22.1 83.9
>> 8    LS 120.0  3   T   2 25.5 93.1
>> 9    LS 120.0  3   T   3 28.7 94.6
>> 10   LS   4.2  1   T   1 48.5 93.7
>>>
>>
>> ______________________________________________
>> R-devel@stat.math.ethz.ch mailing list
>> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>>
>
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>


From ripley@stats.ox.ac.uk  Sat Jan 18 11:51:02 2003
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat Jan 18 11:51:02 2003
Subject: [Rd] Methods package is now attached by default
In-Reply-To: <3E287D10.8692826A@research.bell-labs.com>
Message-ID: <Pine.WNT.4.44.0301181044480.1088-100000@petrel>

On Fri, 17 Jan 2003, John Chambers wrote:

> There are two main known differences from having methods attached:
>
> - the definition of class() changes, in particular no object ever has a
> NULL class.  If you have code that depends on test such as
> `if(is.null(class(x)))...', there may be problems.
>
> Usually code with those sort of tests is doing a workaround of the fact
> that not all objects had a class before.  The best solution is usually
> to ask what the code really wants to do.  If you do have to retain
> exactly the old behavior, one solution is to copy the version of class
> and class<- from the base package and use those (as baseClass and
> baseClass<-, e.g.) instead of class and class<-).

Here is one example, which makes the MASS scripts fail.

> library(MASS)
> corresp
function (x, ...)
{
    if (is.null(class(x)))
        class(x) <- data.class(x)
    UseMethod("corresp", x, ...)
}

That used to work with matrices, and dispatch to corresp.matrix.
Now a matrix has reported class "matrix" but dispatch occurs to
corresp.default.  The temporary fix is to remove the is.null condition.

That's quite a common construction, and I think I should expect UseMethod
to dispatch on the class class() reports.  So it looks to me as if
UseMethod needs to be altered to do so.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley@stats.ox.ac.uk  Sat Jan 18 12:07:04 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat Jan 18 12:07:04 2003
Subject: [Rd] Methods package is now attached by default
In-Reply-To: <Pine.LNX.4.44.0301172326150.22833-100000@gannet.stats>
Message-ID: <Pine.LNX.4.44.0301181102260.16984-100000@gannet.stats>

This should now build without errors: methods is dumped by R running
without .First and hence library(methods).  I've tried both a clean build
and updating one that was a week old.

On Fri, 17 Jan 2003 ripley@stats.ox.ac.uk wrote:

> On Fri, 17 Jan 2003, Jeff Gentry wrote:
> 
> > > The current r-devel (aka R 1.7.0) now attaches the package "methods" by
> > > default at startup.
> > 
> > There's either a problem here or something is wrong on my end as I just
> > did a rsync to R-devel and the build bombed out with:
> 
> Try make clean and/or removing library/methods?
> 
> There should be an error message, as now the R used to dump methods
> expects methods to exist and it is only partially constructed.  We need to
> revisit what --vanilla does: it is now urgent to be able to run R without
> running the .First.  Or at least that's what I find on a clean build.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jmc@research.bell-labs.com  Sat Jan 18 15:12:02 2003
From: jmc@research.bell-labs.com (John Chambers)
Date: Sat Jan 18 15:12:02 2003
Subject: [Rd] Methods package is now attached by default
References: <Pine.WNT.4.44.0301181044480.1088-100000@petrel>
Message-ID: <3E29609B.D76E32A5@research.bell-labs.com>

Prof Brian D Ripley wrote:
> 
> On Fri, 17 Jan 2003, John Chambers wrote:
> 
> > There are two main known differences from having methods attached:
> >
> > - the definition of class() changes, in particular no object ever has a
> > NULL class.  If you have code that depends on test such as
> > `if(is.null(class(x)))...', there may be problems.
> >
> > Usually code with those sort of tests is doing a workaround of the fact
> > that not all objects had a class before.  The best solution is usually
> > to ask what the code really wants to do.  If you do have to retain
> > exactly the old behavior, one solution is to copy the version of class
> > and class<- from the base package and use those (as baseClass and
> > baseClass<-, e.g.) instead of class and class<-).
> 
> Here is one example, which makes the MASS scripts fail.
> 
> > library(MASS)
> > corresp
> function (x, ...)
> {
>     if (is.null(class(x)))
>         class(x) <- data.class(x)
>     UseMethod("corresp", x, ...)
> }
> 
> That used to work with matrices, and dispatch to corresp.matrix.
> Now a matrix has reported class "matrix" but dispatch occurs to
> corresp.default.  The temporary fix is to remove the is.null condition.
> 
> That's quite a common construction, and I think I should expect UseMethod
> to dispatch on the class class() reports.  So it looks to me as if
> UseMethod needs to be altered to do so.

I agree.  This seems an example of the workaround to dispatch on
"classes" that didn't have a class attribute in the old style.

The only situation I can see immediately that would be broken by a
change to UseMethod on these lines would be a case that, e.g., a
foo.matrix existed but the programmer wanted to dispatch foo.default on
matrix objects without an explicit class attribute.  Seems rather
bizarre.

Can anyone think of other situations that would break?

John

> 
> Brian
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc


From tlumley@u.washington.edu  Sat Jan 18 19:43:05 2003
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Sat Jan 18 19:43:05 2003
Subject: [Rd] supplying gradient to constrOptim()
In-Reply-To: <Pine.GSO.4.10.10301171256220.27871-100000@fisher.stat.ucla.edu>
Message-ID: <Pine.A41.4.44.0301181030160.96526-100000@homer11.u.washington.edu>

On Fri, 17 Jan 2003, Roger Peng wrote:

> Hi, I'm very interested in using the constrOptim() function currently in
> the R-devel sources.  In particular, I'm trying to fit point process
> conditional intensity models via maximum likelihood.  However, I noticed
> that the gradient of the objective function must be supplied for all but
> the Nelder-Mead method.  I was wondering why this was because optim()
> itself does not require a gradient function for the BFGS or Conjugate
> Gradient methods.
>

In order not to need explicit gradients you need to be able to compute
them with finite differences. For general constrained optimisation the
points used for the finite differences should be inside the constraint
region (and problems will occur with the log barrier if they aren't).
With the built-in L-BFGS-B this isn't a problem -- you can find points
inside the `box' constraints to compute finite differences.  With
arbitrary linear constraints it is hard to find points in the feasible
region to compute finite difference approximations to the gradient.

If you knew that the unconstrained objective function was well-defined
just outside the constraint region it would be possible to compute a
gradient using finite differences for the objective function and
analytical gradients for the constraint part. Patches to do this would be
welcome, and it shouldn't be too hard.

	-thoms


From markafterdark@aol.com  Sat Jan 18 20:30:03 2003
From: markafterdark@aol.com (markafterdark)
Date: Sat Jan 18 20:30:03 2003
Subject: [Rd] BANDS WANTED FOR NEW YORK TV MUSIC SHOW
Message-ID: <E18ZyeT-0005X9-00@bernie.ethz.ch>

This is a multi-part message in MIME format
--6f88b282-23dc-47b8-886f-a4a514afc9b9
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

 The  MARKafterDARK cable rock show is currently seeking bands to feature on =
the new spring season of shows.      
For more details please go to      http://www.markafterdark.com          (no =
emails please)
   
Please note this mail is intended for musicians and bands who have  openly =
posted their contact email address for the purpose of receiving enquiries.
Should you receive this mail and do not fall into this catagory, please =
accept our apologies.  
--6f88b282-23dc-47b8-886f-a4a514afc9b9--


From markafterdark@aol.com  Sat Jan 18 20:32:03 2003
From: markafterdark@aol.com (markafterdark@aol.com)
Date: Sat Jan 18 20:32:03 2003
Subject: [Rd] BANDS WANTED FOR NEW YORK TV MUSIC SHOW (PR#2472)
Message-ID: <200301181931.UAA26778@pubhealth.ku.dk>

This is a multi-part message in MIME format
--012dcbc0-4b25-434c-bd90-953c6824e784
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

 The  MARKafterDARK cable rock show is currently seeking bands to feature on =
the new spring season of shows.      
For more details please go to      http://www.markafterdark.com          (no =
emails please)
   
Please note this mail is intended for musicians and bands who have  openly =
posted their contact email address for the purpose of receiving enquiries.
Should you receive this mail and do not fall into this catagory, please =
accept our apologies.  
--012dcbc0-4b25-434c-bd90-953c6824e784--


From Kurt.Hornik@wu-wien.ac.at  Mon Jan 20 00:05:03 2003
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon Jan 20 00:05:03 2003
Subject: [Rd] Methods package is now attached by default
In-Reply-To: <Pine.WNT.4.44.0301181044480.1088-100000@petrel>
References: <3E287D10.8692826A@research.bell-labs.com>
 <Pine.WNT.4.44.0301181044480.1088-100000@petrel>
Message-ID: <15915.7358.236309.327617@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> On Fri, 17 Jan 2003, John Chambers wrote:
>> There are two main known differences from having methods attached:
>> 
>> - the definition of class() changes, in particular no object ever has a
>> NULL class.  If you have code that depends on test such as
>> `if(is.null(class(x)))...', there may be problems.
>> 
>> Usually code with those sort of tests is doing a workaround of the fact
>> that not all objects had a class before.  The best solution is usually
>> to ask what the code really wants to do.  If you do have to retain
>> exactly the old behavior, one solution is to copy the version of class
>> and class<- from the base package and use those (as baseClass and
>> baseClass<-, e.g.) instead of class and class<-).

> Here is one example, which makes the MASS scripts fail.

>> library(MASS)
>> corresp
> function (x, ...)
> {
>     if (is.null(class(x)))
>         class(x) <- data.class(x)
>     UseMethod("corresp", x, ...)
> }

> That used to work with matrices, and dispatch to corresp.matrix.  Now
> a matrix has reported class "matrix" but dispatch occurs to
> corresp.default.  The temporary fix is to remove the is.null
> condition.

> That's quite a common construction, and I think I should expect
> UseMethod to dispatch on the class class() reports.  So it looks to me
> as if UseMethod needs to be altered to do so.

> ...

The daily check process on all CRAN packages shows that the packages

	StatDataML geoR ipred xtable

now fail running their examples with methods loaded by default.  The
three latter can be traced immediately to variations on the above; the
first fails in

    if (is.factor(x)) {
      attr(xtmp, "levels") <- NULL
      class(xtmp) <- class(xtmp)[!class(xtmp) %in% c("ordered","factor")]
    }

with the error message

Error in "class<-"(*tmp*,
                   value = class(xtmp)[!class(xtmp) %in% c("ordered",  : 
        Invalid replacement object to be a class string

I think I can tell David how to fix this, but wasn't quite sure about
the wording in the error message ...

I assume I should wait before contacting the authors of the other 3
packages for changing their code---or do we already have an official
recommendation?

-k


From jmc@research.bell-labs.com  Mon Jan 20 02:14:03 2003
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon Jan 20 02:14:03 2003
Subject: [Rd] Methods package is now attached by default
References: <3E287D10.8692826A@research.bell-labs.com>
 <Pine.WNT.4.44.0301181044480.1088-100000@petrel> <15915.7358.236309.327617@mithrandir.hornik.net>
Message-ID: <3E2B4CFB.31C0E55F@research.bell-labs.com>

I implemented the change in usemethods that Brian and I discussed, but
was waiting to commit it to give people a chance to protest.  The change
passes "make fullcheck"  and may avoid some of the conflicts, perhaps
the three packages you mentioned.

If no one objects, I'll commit the modification tomorrow am, New York
time.

John

Kurt Hornik wrote:
> 
> >>>>> Prof Brian D Ripley writes:
> 
> > On Fri, 17 Jan 2003, John Chambers wrote:
> >> There are two main known differences from having methods attached:
> >>
> >> - the definition of class() changes, in particular no object ever has a
> >> NULL class.  If you have code that depends on test such as
> >> `if(is.null(class(x)))...', there may be problems.
> >>
> >> Usually code with those sort of tests is doing a workaround of the fact
> >> that not all objects had a class before.  The best solution is usually
> >> to ask what the code really wants to do.  If you do have to retain
> >> exactly the old behavior, one solution is to copy the version of class
> >> and class<- from the base package and use those (as baseClass and
> >> baseClass<-, e.g.) instead of class and class<-).
> 
> > Here is one example, which makes the MASS scripts fail.
> 
> >> library(MASS)
> >> corresp
> > function (x, ...)
> > {
> >     if (is.null(class(x)))
> >         class(x) <- data.class(x)
> >     UseMethod("corresp", x, ...)
> > }
> 
> > That used to work with matrices, and dispatch to corresp.matrix.  Now
> > a matrix has reported class "matrix" but dispatch occurs to
> > corresp.default.  The temporary fix is to remove the is.null
> > condition.
> 
> > That's quite a common construction, and I think I should expect
> > UseMethod to dispatch on the class class() reports.  So it looks to me
> > as if UseMethod needs to be altered to do so.
> 
> > ...
> 
> The daily check process on all CRAN packages shows that the packages
> 
>         StatDataML geoR ipred xtable
> 
> now fail running their examples with methods loaded by default.  The
> three latter can be traced immediately to variations on the above; the
> first fails in
> 
>     if (is.factor(x)) {
>       attr(xtmp, "levels") <- NULL
>       class(xtmp) <- class(xtmp)[!class(xtmp) %in% c("ordered","factor")]
>     }
> 
> with the error message
> 
> Error in "class<-"(*tmp*,
>                    value = class(xtmp)[!class(xtmp) %in% c("ordered",  :
>         Invalid replacement object to be a class string
> 
> I think I can tell David how to fix this, but wasn't quite sure about
> the wording in the error message ...
> 
> I assume I should wait before contacting the authors of the other 3
> packages for changing their code---or do we already have an official
> recommendation?
> 
> -k
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc


From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Jan 20 10:34:02 2003
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon Jan 20 10:34:02 2003
Subject: [Rd] Methods package is now attached by default
In-Reply-To: <15915.7358.236309.327617@mithrandir.hornik.net>
References: <3E287D10.8692826A@research.bell-labs.com>
 <Pine.WNT.4.44.0301181044480.1088-100000@petrel> <15915.7358.236309.327617@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.51.0301201020390.25042@artemis.imbe.med.uni-erlangen.de>

On Sun, 19 Jan 2003, Kurt Hornik wrote:

> >>>>> Prof Brian D Ripley writes:
>
> > On Fri, 17 Jan 2003, John Chambers wrote:
> >> There are two main known differences from having methods attached:
> >>
> >> - the definition of class() changes, in particular no object ever has a
> >> NULL class.  If you have code that depends on test such as
> >> `if(is.null(class(x)))...', there may be problems.
> >>
> >> Usually code with those sort of tests is doing a workaround of the fact
> >> that not all objects had a class before.  The best solution is usually
> >> to ask what the code really wants to do.  If you do have to retain
> >> exactly the old behavior, one solution is to copy the version of class
> >> and class<- from the base package and use those (as baseClass and
> >> baseClass<-, e.g.) instead of class and class<-).
>
> > Here is one example, which makes the MASS scripts fail.
>
> >> library(MASS)
> >> corresp
> > function (x, ...)
> > {
> >     if (is.null(class(x)))
> >         class(x) <- data.class(x)
> >     UseMethod("corresp", x, ...)
> > }
>
> > That used to work with matrices, and dispatch to corresp.matrix.  Now
> > a matrix has reported class "matrix" but dispatch occurs to
> > corresp.default.  The temporary fix is to remove the is.null
> > condition.
>
> > That's quite a common construction, and I think I should expect
> > UseMethod to dispatch on the class class() reports.  So it looks to me
> > as if UseMethod needs to be altered to do so.
>

same happens e.g. with class "numeric":

ipredbagg <- function(y, ...) UseMethod("ipredbagg")

does NOT dispatch to ipredbagg.numeric if y IS of class "numeric". With
the "old" class(), this one worked:

ipredbagg.default <- function(y, ...) {
  # "numeric" is not an S3 class: check for regression problems and
  # the method dispatch should work for class(y) == "numeric"
  if (is.numeric(y)) {
    class(y) <- "numeric"
    return(ipredbagg(y, ...))
  } else {
    stop(paste("Do not know how to handle objects of class", class(y)))
  }
}

but now I need to call

return(ipredbagg.numeric(y, ...))

I think Brian is right with altering UseMethod() in a way taking care of
what class() tells us.

> > ...
>
> The daily check process on all CRAN packages shows that the packages
>
> 	StatDataML geoR ipred xtable
>
> now fail running their examples with methods loaded by default.  The
> three latter can be traced immediately to variations on the above; the
> first fails in
>
>     if (is.factor(x)) {
>       attr(xtmp, "levels") <- NULL
>       class(xtmp) <- class(xtmp)[!class(xtmp) %in% c("ordered","factor")]
>     }
>
> with the error message
>
> Error in "class<-"(*tmp*,
>                    value = class(xtmp)[!class(xtmp) %in% c("ordered",  :
>         Invalid replacement object to be a class string
>
> I think I can tell David how to fix this, but wasn't quite sure about
> the wording in the error message ...
>
> I assume I should wait before contacting the authors of the other 3
> packages for changing their code---or do we already have an official
> recommendation?

I can fix the code for ipred. The only problem is making it work for both
R-1.6.2  AND  R-devel :-)

Torsten

>
> -k
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>
>


From ripley@stats.ox.ac.uk  Mon Jan 20 10:41:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon Jan 20 10:41:02 2003
Subject: [Rd] Methods package is now attached by default
In-Reply-To: <Pine.LNX.4.51.0301201020390.25042@artemis.imbe.med.uni-erlangen.de>
Message-ID: <Pine.LNX.4.44.0301200935370.2333-100000@gannet.stats>

On Mon, 20 Jan 2003, Torsten Hothorn wrote:

> I think Brian is right with altering UseMethod() in a way taking care of
> what class() tells us.

We have agreed to do that.

> I can fix the code for ipred. The only problem is making it work for both
> R-1.6.2  AND  R-devel :-)

Use

  attr(x, "class") <- data.class(x)

*but* please don't fix anything until we decide what 1.7.0 is going to do.
That's despite my having fixed MASS but that is part of the R-devel 
checking process.

(Incidentally, we need to ensure that 1.7.0 acts consistently with and 
without methods loaded, so code like this may still be needed.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jmc@research.bell-labs.com  Mon Jan 20 16:18:29 2003
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon Jan 20 16:18:29 2003
Subject: [Rd] UseMethod change; isas-tests; all.equal
Message-ID: <3E2C11BA.E5869091@research.bell-labs.com>

I was a little optimistic that the modified version passed _all_ the
tests.  When I installed the complete change, all the fullcheck tests
passed except two, demos and isas-tests.

There is a tiny difference in the output of the demos test, where the
previous demos.Rout had what looks like an unwanted piece of output,
printing an attribute "legend" after doing 
  symnum(summary(detg.mod, correlation = TRUE)$corr)

There are a slew of differences in the isas-tests output.

There are two issues here, one a real inconsistency from the change in
UseMethod, the other a problem with the isas-tests.

1. Part or all of the changes come from a real example of the behavior I
optimistically called "bizarre":  having a foo.numeric that you DON'T
want to be dispatched on numeric objects.

The example is all.equal.numeric (and .list, .character).  With the
change to UseMethod, this gets dispatched when the first argument to
all.equal is a numeric vector (list, character). So:

R> x <- "abc"
R> y <- as.matrix(x)
R> all.equal(x, y)
[1] TRUE
R> all.equal(y, x)
[1] "Attributes: < Modes: list, NULL >"                                
[2] "Attributes: < Lengths: 1, 0 >"                                    
[3] "Attributes: < names for target but not for current >"             
[4] "Attributes: < Length mismatch: comparison on first 0 components >"
[5] "target is matrix, current is character"                           

The fix seems to be to check is.numeric(current),etc. in each of the
"methods", unless someone has a better suggestion.  An alternative would
renaming all.equal.numeric to all.equalNumeric, etc., but that seems
likely to break somebody's code.

Thoughts??

2.  But the isas-tests seem basically flawed.

Many of the differences in the output come from tests such as
  f <- as.data.frame.POSIXct( x );  all.equal(f, as.data.frame.POSIXct(
f ), tol=0)
This and many more seem as if they should generate TRUE, but they
produce differences & have done for some time (certainly in 1.6.2).  The
change to UseMethod (i.e., to usemethod in objects.c) alters the content
of the reported differences in some cases.se come from tests such as
  f <- as.data.frame.POSIXct( x );  all.equal(f, as.data.frame.POSIXct(
f ), tol=0)
This and many more seem as if they should generate TRUE, but they
produce differences & have done for some time (certainly in 1.6.2).  The
change to UseMethod (i.e., to usemethod in objects.c) alters the content
of the reported differences in some cases.

There is all this output from all.equal tests that "fail".
There are also a number of actual errors generated along the way (these
seem unchanged by the usemethod modification).

These seem to be part of a bunch of tests for idempotent behavior of the
as.* functions--the notion that as.foo(as.foo(x)) and as.foo(x) should
be identical.  But clearly they aren't always.

It's not clear what should be done here.  Does anyone recall how we got
to the current state?  My feeling is that the current setup is
fundamentally bad.  The essence of the desired test would seem to be
something like:
	identical(try(as.foo(as.foo(x))), try(as.foo(x)))
which allows for some of the as.* expressions to fail. Comparing on the
exact output of all.equal when it finds differences has got to be
unstable.

There are some other inconsistencies that point to difficulties with
all.equal.  I don't think one should use all.equal in tests of this
sort, you really want to insist on identical objects.   But should we be
leaving in tests whose result seem to point to bugs?

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc


From jvv@cs.umd.edu  Tue Jan 21 00:38:02 2003
From: jvv@cs.umd.edu (jvv@cs.umd.edu)
Date: Tue Jan 21 00:38:02 2003
Subject: [Rd] infinite loop in make for src/unix (PR#2477)
Message-ID: <200301202337.AAA12604@pubhealth.ku.dk>

Full_Name: John Van Voorhis
Version: 1.6.2
OS: SunOS 5.8
Submission from: (NULL) (128.8.130.192)


While running initial 'make' everything went fine until src/unix. At which point

it kept entering and exiting src/unix without doing anything. I fixed the
problem
by deleting the dependencies on Makefile for the Makedeps and R targets.

I am using gnu Make 3.79, gcc 2.95.3, Solaris SunOS5.8 on an UltraSparc.

I double checked that I had found the problem by rerunning make with the
distributed
makefile restored, but the looping behavior did not recur.

When I ran make check, everything semed to be OK.


From pgilbert@bank-banque-canada.ca  Tue Jan 21 01:03:02 2003
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue Jan 21 01:03:02 2003
Subject: [Rd] infinite loop in make for src/unix (PR#2477)
References: <200301202337.AAA12604@pubhealth.ku.dk>
Message-ID: <3E2C8E62.D2DCE7EC@bank-banque-canada.ca>

I've had this kind of problem (but I don't remember if it was with R) when my
workstation and file server's clocks were not syncronized closely enough. I
think make builds a makefile in src, which is immediately out of date because of
the clock skew, but I'm not sure why the workstation clock enters the
calculation.

Paul Gilbert

jvv@cs.umd.edu wrote:
> 
> Full_Name: John Van Voorhis
> Version: 1.6.2
> OS: SunOS 5.8
> Submission from: (NULL) (128.8.130.192)
> 
> While running initial 'make' everything went fine until src/unix. At which point
> 
> it kept entering and exiting src/unix without doing anything. I fixed the
> problem
> by deleting the dependencies on Makefile for the Makedeps and R targets.
> 
> I am using gnu Make 3.79, gcc 2.95.3, Solaris SunOS5.8 on an UltraSparc.
> 
> I double checked that I had found the problem by rerunning make with the
> distributed
> makefile restored, but the looping behavior did not recur.
> 
> When I ran make check, everything semed to be OK.
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel


From p.dalgaard@biostat.ku.dk  Tue Jan 21 01:09:05 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue Jan 21 01:09:05 2003
Subject: [Rd] infinite loop in make for src/unix (PR#2477)
In-Reply-To: <200301202337.AAA12604@pubhealth.ku.dk>
References: <200301202337.AAA12604@pubhealth.ku.dk>
Message-ID: <x27kcz74ah.fsf@biostat.ku.dk>

jvv@cs.umd.edu writes:

> Full_Name: John Van Voorhis
> Version: 1.6.2
> OS: SunOS 5.8
> Submission from: (NULL) (128.8.130.192)
> 
> 
> While running initial 'make' everything went fine until src/unix. At which point
> 
> it kept entering and exiting src/unix without doing anything. I fixed the
> problem
> by deleting the dependencies on Makefile for the Makedeps and R targets.
> 
> I am using gnu Make 3.79, gcc 2.95.3, Solaris SunOS5.8 on an UltraSparc.
> 
> I double checked that I had found the problem by rerunning make with the
> distributed
> makefile restored, but the looping behavior did not recur.
> 
> When I ran make check, everything semed to be OK.

Hmm, I don't see that with Solaris 9 and the same tools. I've seen the
looping behaviour a couple of times earlier, typically triggered by
make actions of the type

        for ( i in $SUBDIRS ) ; do cd $i ; make ; done 

if one of the cd commands fails silently you end up calling make in the
current directory...

Could you please see if you can reproduce the effect in a clean
directory? Notice that to avoid running Sun's make, you need

export MAKE=gmake
gmake

Also, the shell might play a part so tell us what yours is. And
whether you are building in the source tree or in a separate build
directory. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From jerome@hivnet.ubc.ca  Tue Jan 21 01:43:05 2003
From: jerome@hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Tue Jan 21 01:43:05 2003
Subject: [Rd] package mvtnorm: sigma parameter in pmvnorm() (PR#2478)
Message-ID: <200301210043.BAA12795@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.6.2
OS: RedHat Linux 7.2
Submission from: (NULL) (142.103.173.179)



pmvnorm() may fail for a univariate distribution when
its parameter "sigma" is defined as a matrix. It will
fail if sigma < 1.

library(mvtnorm)

#THIS WORKS
> pmvnorm(lower=-Inf,upper=2,mean=0,sigma=matrix(1.5))
[1] 0.9487648
attr(,"error")
[1] 0
attr(,"msg")
[1] "univariate: using pnorm"

#THIS FAILS
> pmvnorm(lower=-Inf,upper=2,mean=0,sigma=matrix(.5))
Error in checkmvArgs(lower = lower, upper = upper, mean = mean, corr = corr,  :
        diag(sigma) and lower are of different length

#THIS WORKS
> pmvnorm(lower=-Inf,upper=2,mean=0,sigma=.5)
[1] 0.9976611
attr(,"error")
[1] 0
attr(,"msg")
[1] "univariate: using pnorm"


From jvv@cs.umd.edu  Tue Jan 21 02:22:02 2003
From: jvv@cs.umd.edu (John Van Voorhis)
Date: Tue Jan 21 02:22:02 2003
Subject: [Rd] infinite loop in make for src/unix (PR#2477)
References: <200301202337.AAA12604@pubhealth.ku.dk> <x27kcz74ah.fsf@biostat.ku.dk>
Message-ID: <00d701c2c0eb$55667220$c0820880@cs.umd.edu>

----- Original Message -----
From: "Peter Dalgaard BSA" <p.dalgaard@biostat.ku.dk>
Subject: Re: [Rd] infinite loop in make for src/unix (PR#2477)


> jvv@cs.umd.edu writes:
>
> > Full_Name: John Van Voorhis
> > Version: 1.6.2
> > OS: SunOS 5.8
> > Submission from: (NULL) (128.8.130.192)
> >
> >
> > While running initial 'make' everything went fine until src/unix. At
which point
> >
> > it kept entering and exiting src/unix without doing anything. I fixed
the problem
> > by deleting the dependencies on Makefile for the Makedeps and R targets.
> >
> > I am using gnu Make 3.79, gcc 2.95.3, Solaris SunOS5.8 on an UltraSparc.
> >
> > I double checked that I had found the problem by rerunning make with the
> > distributed makefile restored, but the looping behavior did not recur.
> >
> > When I ran make check, everything semed to be OK.
>
> Hmm, I don't see that with Solaris 9 and the same tools. I've seen the
> looping behaviour a couple of times earlier, typically triggered by
> make actions of the type
>
>         for ( i in $SUBDIRS ) ; do cd $i ; make ; done
>
> if one of the cd commands fails silently you end up calling make in the
> current directory...
>
> Could you please see if you can reproduce the effect in a clean
> directory? Notice that to avoid running Sun's make, you need
>
> export MAKE=gmake
> gmake
>
> Also, the shell might play a part so tell us what yours is. And
> whether you are building in the source tree or in a separate build
> directory.
>

gmake has the same looping behavior. When I just run make in the problem
direcrtory, no weird behavior.  And then the top level make runs properly
again with unix built independently.

I think Paul's explanation is probably right:
>I've had this kind of problem (but I don't remember if it was with R) when
my
>workstation and file server's clocks were not syncronized closely enough. I
>think make builds a makefile in src, which is immediately out of date
because of
>the clock skew, but I'm not sure why the workstation clock enters the
>calculation.

I am building on a different machine from the filesystem.


From rpeng@stat.ucla.edu  Tue Jan 21 03:15:04 2003
From: rpeng@stat.ucla.edu (Roger Peng)
Date: Tue Jan 21 03:15:04 2003
Subject: [Rd] Typo in ?Startup documentation
Message-ID: <Pine.GSO.4.10.10301201811300.27885-100000@quetelet.stat.ucla.edu>

Thers's appears to be a typo in the help page for Startup.  I
believe the following paragraph

     A function `.First' (and `.Last') can be defined in appropriate
     `.Rprofile' or `Rprofile.site' files or have been saved in
     `.RData'.  If you want a different set of packages than `methods'
     and `ctest' when you start, insert a call to `options' in the
     `.Rprofile' or `Rprofile.site' file.  For example,
     `options(defaultPakages = character())' will attach no extra
     packages on startup.

should have `options(defaultPackages = character())'



> version
         _                           
platform i686-pc-linux-gnu           
arch     i686                        
os       linux-gnu                   
system   i686, linux-gnu             
status   Under development (unstable)
major    1                           
minor    7.0                         
year     2003                        
month    01                          
day      20                          
language R                           


-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng


From pd@pubhealth.ku.dk  Tue Jan 21 07:15:05 2003
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Tue Jan 21 07:15:05 2003
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200301210615.h0L6F3kZ023453@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
..Strange interaction between "Marsaglia-Multicarry" generator and
.."Kinderman-Ramage" 
..method for normal variates. Apparently, switching either of them will help.
* PR# 2214 *
Subject: qgamma precision
From: terra@diku.dk
Date: Fri, 25 Oct 2002 16:50:17 +0200 (MET DST)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
..The warning is standard S and R behaviour.
..Probably xyplot needs to avoid it (by unclassing?)
..Still there in lattice 0.3-0, 0.6-8
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
..seems to be about Matrix package, not solve
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
..The supplementary (table of sum one) is fixed for 1.5.1.
..Detection code for the first problem has been added to 1.5.1 which will stop
..the crash, but the underlying cause is still open.
* PR# 1716 *
Subject: rdiscrete in e1071 fails when n==1
From: "John Aitchison" <jaitchis@hwy.com.au>
Date: Fri, 28 Jun 2002 10:28:17 +1000
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
..A report on lattice
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1901 *
Subject: svm seg faults
From: stefan.boehringer+science@uni-bochum.de
Date: Tue, 13 Aug 2002 14:12:17 +0200 (MET DST)
..Seem to be due to gcc `2.96' from RH7.3
* PR# 1972 *
Subject: lattice install
From: robert.king@newcastle.edu.au
Date: Mon, 2 Sep 2002 04:55:41 +0200 (MET DST)
..Perhaps lattice should require(grid) and print a clearer message?
* PR# 1974 *
Subject: Rwave installation problem
From: ld-temp-qt3i@pobox.com
Date: Mon, 2 Sep 2002 09:27:36 +0200 (MET DST)
..Instead, this should use ISO C headers, namely <stdlib.h>
* PR# 2173 *
Subject: xlim in plot.survfit() [with a discussion on "..."]
From: jerome@hivnet.ubc.ca
Date: Wed, 16 Oct 2002 18:46:11 +0200 (MET DST)
* PR# 2320 *
Subject: Segmentation fault using "survival" package
From: jerome@hivnet.ubc.ca
Date: Sat, 23 Nov 2002 00:51:50 +0100 (MET)
* PR# 2322 *
Subject: simplex
From: george@lecompte.org
Date: Sat, 23 Nov 2002 17:30:37 +0100 (MET)
..report on boot, I think (not mentioned, though)
* PR# 2352 *
Subject: avas: segmentation fault on empty args
From: vograno@arbitrade.com
Date: Fri, 6 Dec 2002 19:41:48 +0100 (MET)
* PR# 2363 *
Subject: nlme() and parameters "model", "fixed" and "random"
From: jerome@hivnet.ubc.ca
Date: Wed, 11 Dec 2002 22:29:47 +0100 (MET)
* PR# 2369 *
Subject: convergence problem with nlme()
From: jerome@hivnet.ubc.ca
Date: Thu, 12 Dec 2002 23:43:14 +0100 (MET)
* PR# 2374 *
Subject: quantreg package - predict method for rq objects
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Sat, 14 Dec 2002 20:46:34 +1100 (EST)
* PR# 2384 *
Subject: degrees of freedom in nlme()
From: jerome@hivnet.ubc.ca
Date: Fri, 20 Dec 2002 01:40:06 +0100 (MET)
* PR# 2385 *
Subject: read.xport and lookup.xport in foreign
From: Frank E Harrell Jr <fharrell@virginia.edu>
Date: Fri, 20 Dec 2002 12:47:58 -0500
* PR# 2386 *
Subject: ace and avas in acepack
From: Frank E Harrell Jr <fharrell@virginia.edu>
Date: Fri, 20 Dec 2002 12:59:07 -0500

Directory:  Analyses

* PR# 2432 *
Subject: Determining the break points by hist() leads to errors
From: Volker Franz <volker.franz@tuebingen.mpg.de>
Date: Wed, 8 Jan 2003 19:11:13 +0100
..will fix for 1.7.0 by returning un-fuzzed breakpoints.

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
..The persp algorithm does not apply the occlusion rules to the frame, 
..which is always plotted first. 
..A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
..This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
..Suggested fix is incorporated in 1.2.2.
..
..There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
..To see the problem try:  par(cex=.5); mtext("hi")
..Paul thinks the right fix is to change the argument list for mtext so that
..cex=par(cex) by default rather than cex=NA by default (plus corresponding
..internal changes to  do_mtext in plot.c).
..This needs to be done very carefully because (i) the change suggested above 
..mayhave side-effects in many other pieces of interpreted code 
..(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
..and anything to do with cexbase needs extreme care.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
..Still there. Suggested fix included in followups, but we didn't get around to
..try it in time for 1.2.3.
..
..Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
..xaxp before xlog, and the new value of xaxp may only be valid under the new
..value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
..This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1933 *
Subject: dev2eps() prints ticks with wrong length!
From: Timur Elzhov <Timur.Elzhov@jinr.ru>
Date: Fri, 23 Aug 2002 17:22:15 +0400
..dev.copy problem
* PR# 2069 *
Subject: split.screen problem
From: cbodily@att.net
Date: Thu, 26 Sep 2002 19:37:40 +0200 (MET DST)
* PR# 2283 *
Subject: Wandering usr values in par(no.readonly=TRUW)
From: Jari Oksanen <jarioksa@sun3.oulu.fi>
Date: Tue, 12 Nov 2002 13:50:44 +0200

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
..I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
..problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
..Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
..looks like gcc compiled under different OS version.
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
..Looks like a conspiracy between a shell problem and an oddity in Tk 8.0 rather
..than an R problem. Good to know for the workaround though. The comment in
..TK_XINCLUDES has since disappeared, at least in Tk 8.3.3.
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
..Missing perl??
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
..Probably fixed in 1.5.1
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
..Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000
..Missing info on R version and compilers.

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
..status of AsIs columns
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
..see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
..part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
..Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1891 *
Subject: summary.data.frame with compound elements problem
From: b.rowlingson@lancaster.ac.uk
Date: Fri, 9 Aug 2002 10:35:43 +0200 (MET DST)

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
..see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
..part of PR#1068
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
..The bug is that we get as far as mkCLOSXP before an error is reported
* PR# 2253 *
Subject: [R] CTRL-C suspends echo of shell (R versions 1.6.0 and 1.6.1)
From: Wolfram Fischer - Z/I/M <wolfram@fischer-zim.ch>
Date: Mon, 4 Nov 2002 10:18:48 +0100

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
..In fact, as.POSIXct is off by 66 years. See
..   http://developer.apple.com/qa/ops/ops23.html
..This is semifixed, but timezones still don't work
* PR# 1991 *
Subject: Mac Save As... bug
From: Tim Cole <tjc1@cam.ac.uk>
Date: Sun, 8 Sep 2002 13:47:00 +0100
* PR# 2276 *
Subject: Mac specific - quartz leads to crash
From: h95mr@mun.ca
Date: Fri, 8 Nov 2002 16:28:50 +0100 (MET)

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
..1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
..2) system() needs a new version for GNOME.

Directory:  Models

* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
..The problem is actually deeper than this.
..
..Sometime update() wants to evaluate arguments in the environment where the model
..was defined, as here. 
..
..Sometimes it wants to use the current environment, eg this snippet from MASS 
..ph.fun <- function(data, i) {
..  d <- data
..  d$calls <- d$fitted + d$res[i]
..  coef(update(fit, data=d))
..}
* PR# 2206 *
Subject: model.matrix (via predict)
From: Glenn.Stone@csiro.au
Date: Thu, 24 Oct 2002 06:33:02 +0200 (MET DST)
..strange model used!

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
..problem with symbol names only on Mandrake 8.0, not 7.2
..needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
..This platform turned out to have badly broken FPU behaviour. Given up, at 
..least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
..MacOS X: Doesn't happen on Solaris or Linux
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
..Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
..Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
..Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
..A crash that is *very* hard to trigger (after several
..minutes of continuous resizing)

Directory:  incoming

* PR# 2094 *
Subject: Mean and var inconsistency
From: Kevin.Wright@pioneer.com
Date: Wed, 2 Oct 2002 16:19:27 +0200 (MET DST)
* PR# 2461 *
Subject: apropos() with partial name
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Thu, 16 Jan 2003 20:22:23 +1100 (EST)
* PR# 2470 *
Subject: Re: Sample
From: big@boss.com
Date: Sat, 18 Jan 2003 13:12:20 -0000
* PR# 2471 *
Subject: " Need Holiday Cash? DID YOU SEE  THIS  ON OPRAH 20/20 , BARBARA WALTERS Or National TV ?? ##"                                                        6267OlwH4-18-11
From: "yr6578" <yr6578crhu@mailmint.com>
Date: Sat, 18 Jan 2003 23:58:19 -0600
* PR# 2472 *
Subject: BANDS WANTED FOR NEW YORK TV MUSIC SHOW
From: markafterdark <markafterdark@aol.com>
Date: Sat, 18 Jan 2003 14:30:42 -0500
* PR# 2473 *
Subject: Re: Here is that sample
From: big@boss.com
Date: Sat, 18 Jan 2003 19:12:58 --0500
* PR# 2474 *
Subject: bugs.r-project.org
From: Sarah Williams <bounce@trafficmagnet.com>
Date: Mon, 20 Jan 2003 07:31:21 +0800 (CST)
* PR# 2475 *
Subject: ASSISTANCE REQUIRED
From: "MR.  TIMI  ALABI" <timi_alabi5@zwallet.com>
Date: Mon, 20 Jan 2003 11:56:06 +0100
* PR# 2476 *
Subject: ASSISTANCE REQUIRED
From: "MR.  TIMI  ALABI" <timi_alabi6@zwallet.com>
Date: Mon, 20 Jan 2003 13:00:12 +0100
* PR# 2477 *
Subject: infinite loop in make for src/unix
From: jvv@cs.umd.edu
Date: Tue, 21 Jan 2003 00:37:37 +0100 (MET)
* PR# 2478 *
Subject: package mvtnorm: sigma parameter in pmvnorm()
From: jerome@hivnet.ubc.ca
Date: Tue, 21 Jan 2003 01:43:08 +0100 (MET)


From Torsten.Hothorn@rzmail.uni-erlangen.de  Tue Jan 21 09:33:49 2003
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Tue Jan 21 09:33:49 2003
Subject: [Rd] package mvtnorm: sigma parameter in pmvnorm() (PR#2478)
In-Reply-To: <200301210043.BAA12795@pubhealth.ku.dk>
References: <200301210043.BAA12795@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.51.0301210908230.29335@artemis.imbe.med.uni-erlangen.de>

On Tue, 21 Jan 2003 jerome@hivnet.ubc.ca wrote:

> Full_Name: Jerome Asselin
> Version: 1.6.2
> OS: RedHat Linux 7.2
> Submission from: (NULL) (142.103.173.179)
>
>
>
> pmvnorm() may fail for a univariate distribution when
> its parameter "sigma" is defined as a matrix. It will
> fail if sigma < 1.
>

confirmed and fixed in mvtnorm_0.5-8, soon at CRAN. Thanks for the report!

Please do NOT file a bug report for contributed packages with priority
less  than "recommended" since the package maintainers do not have write
access to the bugs-database anyway. Moreover, cc the report to the
maintainer (which is the default way of reporting bugs in packages).

Best,

Torsten

> library(mvtnorm)
>
> #THIS WORKS
> > pmvnorm(lower=-Inf,upper=2,mean=0,sigma=matrix(1.5))
> [1] 0.9487648
> attr(,"error")
> [1] 0
> attr(,"msg")
> [1] "univariate: using pnorm"
>
> #THIS FAILS
> > pmvnorm(lower=-Inf,upper=2,mean=0,sigma=matrix(.5))
> Error in checkmvArgs(lower = lower, upper = upper, mean = mean, corr = corr,  :
>         diag(sigma) and lower are of different length
>
> #THIS WORKS
> > pmvnorm(lower=-Inf,upper=2,mean=0,sigma=.5)
> [1] 0.9976611
> attr(,"error")
> [1] 0
> attr(,"msg")
> [1] "univariate: using pnorm"
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>
>


From ligges@statistik.uni-dortmund.de  Tue Jan 21 09:49:10 2003
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue Jan 21 09:49:10 2003
Subject: [Rd] package mvtnorm: sigma parameter in pmvnorm() (PR#2478)
Message-ID: <200301210826.JAA13940@pubhealth.ku.dk>

jerome@hivnet.ubc.ca wrote:
> Full_Name: Jerome Asselin
> Version: 1.6.2
> OS: RedHat Linux 7.2
> Submission from: (NULL) (142.103.173.179)
> 
> 
> 
> pmvnorm() may fail for a univariate distribution when
> its parameter "sigma" is defined as a matrix. It will
> fail if sigma < 1.
> 
> library(mvtnorm)
> 
> #THIS WORKS
> 
>>pmvnorm(lower=-Inf,upper=2,mean=0,sigma=matrix(1.5))
> 
> [1] 0.9487648
> attr(,"error")
> [1] 0
> attr(,"msg")
> [1] "univariate: using pnorm"
> 
> #THIS FAILS
> 
>>pmvnorm(lower=-Inf,upper=2,mean=0,sigma=matrix(.5))
> 
> Error in checkmvArgs(lower = lower, upper = upper, mean = mean, corr = corr,  :
>         diag(sigma) and lower are of different length
> 
> #THIS WORKS
> 
>>pmvnorm(lower=-Inf,upper=2,mean=0,sigma=.5)
> 
> [1] 0.9976611
> attr(,"error")
> [1] 0
> attr(,"msg")
> [1] "univariate: using pnorm"

The bug is in checkmvArgs():

  if (!is.null(sigma)) {
          if (!is.matrix(sigma)) {
             if (length(sigma) == 1)
                 UNI <- TRUE
             if (length(sigma) != length(lower))
                stop("diag(sigma) and lower are of different length")
          } else {
+           if (length(diag(sigma)) != length(lower))
+              stop("diag(sigma) and lower are of different length")
             if (length(sigma) == 1) {
                 UNI <- TRUE
                 sigma <- sigma[1,1]
             }
-           if (length(diag(sigma)) != length(lower))
-              stop("diag(sigma) and lower are of different length")

          }
     }


The fix is to change the position of the validation, i.e. before the 
matrix is coerced to a vector of length 1.

Uwe Ligges


From John_Hendrickx@yahoo.com  Tue Jan 21 13:51:03 2003
From: John_Hendrickx@yahoo.com (John_Hendrickx@yahoo.com)
Date: Tue Jan 21 13:51:03 2003
Subject: [Rd] bug in CrossTable (package:gregmisc) (PR#2480)
Message-ID: <200301211251.NAA17691@pubhealth.ku.dk>

Full_Name: John Hendrickx
Version: 1.6.0
OS: Windows 98
Submission from: (NULL) (137.224.174.216)


CrossTable in the "gregmisc" package fails when the fisher.exact test produces
an error (I suspect this is because the number of cases is too large). This can
be fixed using "FTt <- try(fisher.test(t, alternative = "two.sided"))" or by
making the test optional.

bugtab <- array(c(
24,  31,  2,  50,
 4, 101, 16, 130,
 0,  29,  3,  52,
 3,  39, 11, 210))
dim(bugtab)<-c(4,4)
bugtab<-t(bugtab)
rownames(bugtab)<-c("a","b","c","d")
colnames(bugtab)<-c("A","B","C","D")
bugtab

thisworks<-trunc(bugtab/10)
thisworks

library(gregmisc)
# fisher.exact test works fine on small tables
CrossTable(thisworks)
# I suspect the bugtab table is too large
CrossTable(bugtab)


From jmc@research.bell-labs.com  Tue Jan 21 15:38:05 2003
From: jmc@research.bell-labs.com (John Chambers)
Date: Tue Jan 21 15:38:05 2003
Subject: [Rd] UseMethod; all.equal; isas-tests
Message-ID: <3E2D5B06.96BD53DF@research.bell-labs.com>

1. UseMethod (via usemethod in objects.c) now uses the definition of
class() to dispatch, with the methods package attached (dataClass(x))
and without (attr(x, "class")).

Packages using a construction of the form
	if(is.null(class(x))) class(x) <- data.class(x)
	UseMethod("foo")
should now get similar dispatch with the methods package attached.

2. all.equal and some of its pseudo-methods have been modified to work
when those methods (all.equal.numeric, all.equal.character) are in fact
dispatched.

"Work" may not extend to identical character string output when the
arguments don't match equal (though it does in some simple cases).  But
it's not a good idea to rely on that output for testing, better to use
one of
	identical(target, current)
	identical(all.equal(target, current, ...), TRUE))

3. The isas-tests have been modified to use identical() rather than
all.equal for the tests that have produced voluminous output.  We should
eventually examine why various of these tests "fail", but at least the
volume of the output is much less and the test should be more stable.

John
-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc


From wolfram@fischer-zim.ch  Tue Jan 21 16:10:09 2003
From: wolfram@fischer-zim.ch (Wolfram Fischer - Z/I/M)
Date: Tue Jan 21 16:10:09 2003
Subject: [Rd] [R] proposal: lattice/levelplot: panel.catlevelplot
Message-ID: <20030121154922.A2866@s1x.zimnet.ch>

I suggest to add a panel function to levelplot (or perhaps 
to an other 3d lattice function) which is able to translate
the z values into the size of the rectangles.

It could be used to display categorical data.

I append the proposed code and two examples:
- panel.catlevelplot()
- example1.catlevelplot.esoph()
- example2.catlevelplot.esoph()

Wolfram Fischer

#------ CODE --------------------------------------------------------------
panel.catlevelplot <- function (x, y, z, wx, wy, zcol, col.regions, subscripts
    , ...
    , z.factor.min      = 0.02  # factor for z range expansion
                                # -> little cells become visible
    , col.x     = NULL  # colors for categories in x direction
    , col.y     = NULL  # colors for categories in y direction
    , prop.width= TRUE  # calculate width of cells proportionally to z position
    , prop.height= TRUE # calculate height of cells proportionally to z position
    , col.border.cells  = NULL  # color of borders of levelplot cells
    , lwd.border.cells  = NULL  # linewidth of borders of levelplot cells
){
    axis.line <- trellis.par.get('axis.line')
    if( is.null( col.border.cells ) )  col.border.cells = axis.line$col
    if( is.null( lwd.border.cells ) )  lwd.border.cells = axis.line$lwd

    x <- as.numeric( x )
    y <- as.numeric( y )
    z <- as.numeric( z )

# <--- It would be better to do the following calculations
#      of z.x.factor and z.y.factor in the main function (levelplot).

    z.min <- min( z, na.rm=TRUE )
    z.range <- max( z, na.rm=TRUE ) - z.min 
    z.factor <- ( z - z.min + z.range * z.factor.min ) /
        ( z.range * ( 1 + z.factor.min ) )
    z.x.factor <- if( prop.width ) z.factor else rep( 1, length(z) )
    z.y.factor <- if( prop.height ) z.factor else rep( 1, length(z) )
# --->

    fe.grid.rect <- function( sel, fill ){
        grid.rect(
              x = x[subscripts][sel]
            , y = y[subscripts][sel]
            , width = wx[subscripts][sel] * 
                z.x.factor[subscripts][sel]
            , height = wy[subscripts][sel] * 
                z.y.factor[subscripts][sel]
            , default.units = "native"
            , gp = gpar(
                  fill = fill
                , col = col.border.cells
                , lwd = lwd.border.cells
                )
            )
    }

    if( any(subscripts) ){
        if( ! is.null( col.x ) ){
            x.levels <- unique( x )
            col.x <- rep( col.x, length = length(x.levels) )
            for( i.col in seq( along = x.levels ) ){
                fe.grid.rect(
                      sel = ( x[subscripts] == viq.x.levels[i.col] )
                    , fill = col.x[i.col]
                    )
            }
        }else if( ! is.null( col.y ) ){
            y.levels <- unique( y )
            col.y <- rep( col.y, length = length(y.levels) )
            for( i.col in seq( along = y.levels ) ){
                fe.grid.rect(
                      sel = ( y[subscripts] == y.levels[i.col] )
                    , fill = col.y[i.col]
                    )
            }
        }else{
            for( i.col in seq( along = col.regions ) ){
                fe.grid.rect(
                      sel = ( zcol[subscripts] == i.col )
                    , fill = col.regions[i.col]
                    )
            }
        }
    }
}

#------ EXAMPLE -----------------------------------------------------------
data(esoph)
library(lattice)

example1.catlevelplot.esoph <- function( ... ){
    ncolors <- nlevels( esoph$alcgp )
    print( levelplot( ncases ~ agegp * alcgp | tobgp, data=esoph
        , main      = 'esoph data set'
        , sub       = 'tobgp'
        , cuts      = ncolors
        , layout    = c( 4, 4 )
        , scales=list(
              x = list( labels = levels( esoph$agegp ), rot=90, alternating=F )
            , y = list( labels = levels( esoph$alcgp ) )
            )
        , panel     = panel.catlevelplot
        , colorkey  = NULL
        , col.y = rainbow(ncolors)
#       , prop.height   = F
        , ...
    ))
}

example2.catlevelplot.esoph <- function( ... ){
    cuts <- 15
    print( levelplot( ncases ~ agegp * alcgp | tobgp, data=esoph
        , main      = 'esoph data set'
        , sub       = 'tobgp'
        , cuts      = cuts
        , layout    = c( 4, 4 )
        , scales=list(
              x = list( labels = levels( esoph$agegp ), rot=90, alternating=F )
            , y = list( labels = levels( esoph$alcgp ) )
            )
        , panel     = panel.catlevelplot
        , col.regions = rev( heat.colors(cuts+1) )
        , col.border.cells  = trellis.par.get('background')$col
        , lwd.border.cells  = 3
        , prop.height   = F
        , prop.width    = F
        , ...
    ))
}

#------ -------------------------------------------------------------------


From rpeng@stat.ucla.edu  Tue Jan 21 23:07:03 2003
From: rpeng@stat.ucla.edu (Roger Peng)
Date: Tue Jan 21 23:07:03 2003
Subject: [Rd] Methods package is now attached by default
In-Reply-To: <Pine.LNX.4.44.0301200935370.2333-100000@gannet.stats>
Message-ID: <Pine.GSO.4.10.10301211356280.15902-100000@quetelet.stat.ucla.edu>

I was looking at the examples in the `optim' help page and I think one of
them does not quite work.  In particular, this example:

## "wild" function , global minimum at about -15.81515
fw <- function (x)
     10*sin(0.3*x)*sin(1.3*x^2) + 0.00001*x^4 + 0.2*x+80
plot(fw, -50, 50, n=1000, main = "optim() minimising `wild function'")

While it executes, I think it produces the wrong plot.  The call to plot
indicates that it should be plotted from x values of -50 to 50 but the
resulting plot goes from 0 to 50.  However, if I call

plot.function(fw, -50, 50, n = 1000, 
              main = "optim() minimising `wild function'")


then that plot appears to be correct.  I figured this had something to do
with the method dispatching on functions.

This occurs when I do a --vanilla startup.

> version
         _                           
platform i686-pc-linux-gnu           
arch     i686                        
os       linux-gnu                   
system   i686, linux-gnu             
status   Under development (unstable)
major    1                           
minor    7.0                         
year     2003                        
month    01                          
day      21                          
language R                           


-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng


From tlumley@u.washington.edu  Tue Jan 21 23:51:02 2003
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue Jan 21 23:51:02 2003
Subject: [Rd] Methods package is now attached by default
In-Reply-To: <Pine.GSO.4.10.10301211356280.15902-100000@quetelet.stat.ucla.edu>
Message-ID: <Pine.A41.4.44.0301211438000.144514-100000@homer07.u.washington.edu>

On Tue, 21 Jan 2003, Roger Peng wrote:

> I was looking at the examples in the `optim' help page and I think one of
> them does not quite work.  In particular, this example:
>
> ## "wild" function , global minimum at about -15.81515
> fw <- function (x)
>      10*sin(0.3*x)*sin(1.3*x^2) + 0.00001*x^4 + 0.2*x+80
> plot(fw, -50, 50, n=1000, main = "optim() minimising `wild function'")
>
> While it executes, I think it produces the wrong plot.  The call to plot
> indicates that it should be plotted from x values of -50 to 50 but the
> resulting plot goes from 0 to 50.  However, if I call
>
> plot.function(fw, -50, 50, n = 1000,
>               main = "optim() minimising `wild function'")
>
>
> then that plot appears to be correct.  I figured this had something to do
> with the method dispatching on functions.

Not quite, because it doesn't use method dispatching -- it calls
plot.function explicitly.

I think it's a thinko in editing.  plot() went from
 plot<- function (x, ...)
 {
    if (is.null(attr(x, "class")) && is.function(x)) {
        if ("ylab" %in% names(list(...)))
            plot.function(x, ...)
        else plot.function(x, ylab = paste(deparse(substitute(x)),
            "(x)"), ...)
    }
    else UseMethod("plot")
 }
to
 plot<-function (x, y, ...)
{
    if (is.null(attr(x, "class")) && is.function(x)) {
        if ("ylab" %in% names(list(...)))
            plot.function(x, ...)
        else plot.function(x, ylab = paste(deparse(substitute(x)),
            "(x)"), ...)
    }
    else UseMethod("plot")
}

but the extra argument `y' never got passed down to plot.function. It
should be something like
function (x, y, ...)
{
    if (is.null(attr(x, "class")) && is.function(x)) {
        if ("ylab" %in% names(list(...)))
            plot.function(x,y, ...)
        else plot.function(x, y, ylab = paste(deparse(substitute(x)),
            "(x)"), ...)
    }
    else UseMethod("plot")
}


	-thomas


From iceman@prado.com  Wed Jan 22 02:07:02 2003
From: iceman@prado.com (iceman@prado.com)
Date: Wed Jan 22 02:07:02 2003
Subject: [Rd] Macintosh rm162 fails read.table() from sample (PR#2485)
Message-ID: <200301220107.CAA21995@pubhealth.ku.dk>

Full_Name: Chris Yager
Version: rm162
OS: Mac OS 9.2.2
Submission from: (NULL) (67.117.145.197)


As a new user I was running A sample session  from Appendix A  of  An
Introduction  to R.  'mm<-read.table("morley.tab")'  failed.  Note that the 
prior command, 'file.show("morley.tab")', succeeded.  Problem does NOT occur in
version rm161.  
NO other bug reports seem relevant.  
Contents of my window follow, then contents of 'R.bug.report' follows that. 
#======

R : Copyright 2003, The R Development Core Team
Version 1.6.2  (2003-01-10)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> getwd()
[1] "Macintosh HD:Users:Bio:Documents:Intro BioStat:R:sample:"
> file.show("morley.tab")
> mm<-read.table("morley.tab")
Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,  :

	line 1 did not have 4 elements
> help.start()
If nothing happens, you have to open ` Macintosh HD:Applications (Mac OS
9):R:rm162:doc:html:index.html ' yourself
> bug.report()
Error in system(call, intern) : 
 The function "system" is not implemented on Macintosh
> 

#======

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################



<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = ppc-apple-macos
 arch = ppc
 os = MacOS
 system = ppc, MacOS
 status = 
 major = 1
 minor = 6.2
 year = 2003
 month = 01
 day = 10
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

#=====

Your faithful frog,
Chris Yager
"Love 'dem bugs"


From deepayan@stat.wisc.edu  Wed Jan 22 04:29:02 2003
From: deepayan@stat.wisc.edu (Deepayan Sarkar)
Date: Wed Jan 22 04:29:02 2003
Subject: [Rd] [R] proposal: lattice/levelplot: panel.catlevelplot
In-Reply-To: <20030121154922.A2866@s1x.zimnet.ch>
References: <20030121154922.A2866@s1x.zimnet.ch>
Message-ID: <200301212127.50102.deepayan@stat.wisc.edu>

On Tuesday 21 January 2003 08:49 am, Wolfram Fischer - Z/I/M wrote:
> I suggest to add a panel function to levelplot (or perhaps
> to an other 3d lattice function) which is able to translate
> the z values into the size of the rectangles.

Cool.

> It could be used to display categorical data.
>
> I append the proposed code and two examples:
> - panel.catlevelplot()
> - example1.catlevelplot.esoph()
> - example2.catlevelplot.esoph()

The second example gives an error for me. Do you have the latest grid 
installed ? I think changing fe.grid.rect below would solve it.

> Wolfram Fischer
>
> #------ CODE --------------------------------------------------------------
> panel.catlevelplot <- function (x, y, z, wx, wy, zcol, col.regions,
> subscripts , ...
>     , z.factor.min      = 0.02  # factor for z range expansion
>                                 # -> little cells become visible
>     , col.x     = NULL  # colors for categories in x direction
>     , col.y     = NULL  # colors for categories in y direction
>     , prop.width= TRUE  # calculate width of cells proportionally to z
> position , prop.height= TRUE # calculate height of cells proportionally to
> z position , col.border.cells  = NULL  # color of borders of levelplot
> cells , lwd.border.cells  = NULL  # linewidth of borders of levelplot cells
> ){
>     axis.line <- trellis.par.get('axis.line')
>     if( is.null( col.border.cells ) )  col.border.cells = axis.line$col
>     if( is.null( lwd.border.cells ) )  lwd.border.cells = axis.line$lwd
>
>     x <- as.numeric( x )
>     y <- as.numeric( y )
>     z <- as.numeric( z )
>
> # <--- It would be better to do the following calculations
> #      of z.x.factor and z.y.factor in the main function (levelplot).
>
>     z.min <- min( z, na.rm=TRUE )
>     z.range <- max( z, na.rm=TRUE ) - z.min
>     z.factor <- ( z - z.min + z.range * z.factor.min ) /
>         ( z.range * ( 1 + z.factor.min ) )
>     z.x.factor <- if( prop.width ) z.factor else rep( 1, length(z) )
>     z.y.factor <- if( prop.height ) z.factor else rep( 1, length(z) )
> # --->
>
>     fe.grid.rect <- function( sel, fill ){


        if (any(sel)) ## ADDED


>         grid.rect(
>               x = x[subscripts][sel]
>             , y = y[subscripts][sel]
>             , width = wx[subscripts][sel] *
>                 z.x.factor[subscripts][sel]
>             , height = wy[subscripts][sel] *
>                 z.y.factor[subscripts][sel]
>             , default.units = "native"
>             , gp = gpar(
>                   fill = fill
>                 , col = col.border.cells
>                 , lwd = lwd.border.cells
>                 )
>             )
>     }
>
>     if( any(subscripts) ){
>         if( ! is.null( col.x ) ){
>             x.levels <- unique( x )
>             col.x <- rep( col.x, length = length(x.levels) )
>             for( i.col in seq( along = x.levels ) ){
>                 fe.grid.rect(
>                       sel = ( x[subscripts] == viq.x.levels[i.col] )
>                     , fill = col.x[i.col]
>                     )
>             }
>         }else if( ! is.null( col.y ) ){
>             y.levels <- unique( y )
>             col.y <- rep( col.y, length = length(y.levels) )
>             for( i.col in seq( along = y.levels ) ){
>                 fe.grid.rect(
>                       sel = ( y[subscripts] == y.levels[i.col] )
>                     , fill = col.y[i.col]
>                     )
>             }
>         }else{
>             for( i.col in seq( along = col.regions ) ){
>                 fe.grid.rect(
>                       sel = ( zcol[subscripts] == i.col )
>                     , fill = col.regions[i.col]
>                     )
>             }
>         }
>     }
> }
>
> #------ EXAMPLE -----------------------------------------------------------
> data(esoph)
> library(lattice)
>
> example1.catlevelplot.esoph <- function( ... ){
>     ncolors <- nlevels( esoph$alcgp )
>     print( levelplot( ncases ~ agegp * alcgp | tobgp, data=esoph
>         , main      = 'esoph data set'
>         , sub       = 'tobgp'
>         , cuts      = ncolors
>         , layout    = c( 4, 4 )
>         , scales=list(
>               x = list( labels = levels( esoph$agegp ), rot=90,
> alternating=F ) , y = list( labels = levels( esoph$alcgp ) )
>             )
>         , panel     = panel.catlevelplot
>         , colorkey  = NULL
>         , col.y = rainbow(ncolors)
> #       , prop.height   = F
>         , ...
>     ))
> }
>
> example2.catlevelplot.esoph <- function( ... ){
>     cuts <- 15
>     print( levelplot( ncases ~ agegp * alcgp | tobgp, data=esoph
>         , main      = 'esoph data set'
>         , sub       = 'tobgp'
>         , cuts      = cuts
>         , layout    = c( 4, 4 )
>         , scales=list(
>               x = list( labels = levels( esoph$agegp ), rot=90,
> alternating=F ) , y = list( labels = levels( esoph$alcgp ) )
>             )
>         , panel     = panel.catlevelplot
>         , col.regions = rev( heat.colors(cuts+1) )
>         , col.border.cells  = trellis.par.get('background')$col
>         , lwd.border.cells  = 3
>         , prop.height   = F
>         , prop.width    = F
>         , ...
>     ))
> }
>
> #------ -------------------------------------------------------------------
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel


From mschwartz@medanalytics.com  Wed Jan 22 05:23:02 2003
From: mschwartz@medanalytics.com (Marc Schwartz)
Date: Wed Jan 22 05:23:02 2003
Subject: [Rd] bug in CrossTable (package:gregmisc) (PR#2480)
In-Reply-To: <200301211251.NAA17691@pubhealth.ku.dk>
Message-ID: <009801c2c1cd$eaebe5e0$0201a8c0@MARC>

> -----Original Message-----
> From: r-devel-admin@stat.math.ethz.ch 
> [mailto:r-devel-admin@stat.math.ethz.ch] On Behalf Of 
> John_Hendrickx@yahoo.com
> Sent: Tuesday, January 21, 2003 6:51 AM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] bug in CrossTable (package:gregmisc) (PR#2480)
> 
> 
> Full_Name: John Hendrickx
> Version: 1.6.0
> OS: Windows 98
> Submission from: (NULL) (137.224.174.216)
> 
> 
> CrossTable in the "gregmisc" package fails when the 
> fisher.exact test produces an error (I suspect this is 
> because the number of cases is too large). This can be fixed 
> using "FTt <- try(fisher.test(t, alternative = "two.sided"))" 
> or by making the test optional.
> 
> bugtab <- array(c(
> 24,  31,  2,  50,
>  4, 101, 16, 130,
>  0,  29,  3,  52,
>  3,  39, 11, 210))
> dim(bugtab)<-c(4,4)
> bugtab<-t(bugtab)
> rownames(bugtab)<-c("a","b","c","d")
> colnames(bugtab)<-c("A","B","C","D")
> bugtab
> 
> thisworks<-trunc(bugtab/10)
> thisworks
> 
> library(gregmisc)
> # fisher.exact test works fine on small tables
> CrossTable(thisworks)
> # I suspect the bugtab table is too large
> CrossTable(bugtab)

John,

Thank you for bringing this to my attention. I was out of town all day
on a business trip and will look at this issue further with fresh eyes
in the morning. I'll get an update to Greg as soon as I have a chance
to incorporate a fix.  I also have some pending updates for
barplot2(), so I will coordinate the updates with Greg to conserve his
time.

Best regards,

Marc Schwartz


From ripley@stats.ox.ac.uk  Wed Jan 22 08:55:06 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Jan 22 08:55:06 2003
Subject: [Rd] Macintosh rm162 fails read.table() from sample (PR#2485)
Message-ID: <200301220754.IAA22950@pubhealth.ku.dk>

This is already reported and already fixed in R-patched.
The relevant report is PR#2469.

Neither that nor your report specified which Mac port this is, although I 
could guess from you use of `rm162'.
If it is happening in the classic MacOS port then perhaps Stefano could 
patch it: he is aware of the problem.

On Wed, 22 Jan 2003 iceman@prado.com wrote:

> Full_Name: Chris Yager
> Version: rm162
> OS: Mac OS 9.2.2
> Submission from: (NULL) (67.117.145.197)
> 
> 
> As a new user I was running A sample session  from Appendix A  of  An
> Introduction  to R.  'mm<-read.table("morley.tab")'  failed.  Note that the 
> prior command, 'file.show("morley.tab")', succeeded.  Problem does NOT occur in
> version rm161.  
> NO other bug reports seem relevant.  
> Contents of my window follow, then contents of 'R.bug.report' follows that. 
> #======
> 
> R : Copyright 2003, The R Development Core Team
> Version 1.6.2  (2003-01-10)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> > getwd()
> [1] "Macintosh HD:Users:Bio:Documents:Intro BioStat:R:sample:"
> > file.show("morley.tab")
> > mm<-read.table("morley.tab")
> Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,  :
> 
> 	line 1 did not have 4 elements
> > help.start()
> If nothing happens, you have to open ` Macintosh HD:Applications (Mac OS
> 9):R:rm162:doc:html:index.html ' yourself
> > bug.report()
> Error in system(call, intern) : 
>  The function "system" is not implemented on Macintosh
> > 
> 
> #======
> 
> # Your mailer is set to "none" (default on Windows),
> # hence we cannot send the bug report directly from R.
> # Please copy the bug report (after finishing it) to
> # your favorite email program and send it to
> #
> #       r-bugs@r-project.org
> #
> ######################################################
> 
> 
> 
> <<insert bug report here>>
> 
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = ppc-apple-macos
>  arch = ppc
>  os = MacOS
>  system = ppc, MacOS
>  status = 
>  major = 1
>  minor = 6.2
>  year = 2003
>  month = 01
>  day = 10
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> 
> #=====
> 
> Your faithful frog,
> Chris Yager
> "Love 'dem bugs"
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jago@mclink.it  Wed Jan 22 09:31:03 2003
From: jago@mclink.it (Stefano Iacus)
Date: Wed Jan 22 09:31:03 2003
Subject: [Rd] Macintosh rm162 fails read.table() from sample (PR#2485)
In-Reply-To: <200301220107.CAA21995@pubhealth.ku.dk>
Message-ID: <388E2242-2DE3-11D7-A4CF-003065CC4CB8@mclink.it>

On Mercoledì, gen 22, 2003, at 02:07 Europe/Rome, iceman@prado.com 
wrote:

> Full_Name: Chris Yager
> Version: rm162
> OS: Mac OS 9.2.2
> Submission from: (NULL) (67.117.145.197)
>
>
> As a new user I was running A sample session  from Appendix A  of  An
> Introduction  to R.  'mm<-read.table("morley.tab")'  failed.  Note 
> that the
> prior command, 'file.show("morley.tab")', succeeded.  Problem does NOT 
> occur in
> version rm161.

This is a known bug introduced in R 1.6.2 and it is cross-platform (see 
PR#2469 as Brian pointed out).

I'll provide a patch for this soon.

Stefano

> NO other bug reports seem relevant.
> Contents of my window follow, then contents of 'R.bug.report' follows 
> that.
> #======
>
> R : Copyright 2003, The R Development Core Team
> Version 1.6.2  (2003-01-10)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
>> getwd()
> [1] "Macintosh HD:Users:Bio:Documents:Intro BioStat:R:sample:"
>> file.show("morley.tab")
>> mm<-read.table("morley.tab")
> Error in scan(file = file, what = what, sep = sep, quote = quote, dec 
> = dec,  :
>
> 	line 1 did not have 4 elements
>> help.start()
> If nothing happens, you have to open ` Macintosh HD:Applications (Mac 
> OS
> 9):R:rm162:doc:html:index.html ' yourself
>> bug.report()
> Error in system(call, intern) :
>  The function "system" is not implemented on Macintosh
>>
>
> #======
>
> # Your mailer is set to "none" (default on Windows),
> # hence we cannot send the bug report directly from R.
> # Please copy the bug report (after finishing it) to
> # your favorite email program and send it to
> #
> #       r-bugs@r-project.org
> #
> ######################################################
>
>
>
> <<insert bug report here>>
>
>
>
> --please do not edit the information below--
>
> Version:
>  platform = ppc-apple-macos
>  arch = ppc
>  os = MacOS
>  system = ppc, MacOS
>  status =
>  major = 1
>  minor = 6.2
>  year = 2003
>  month = 01
>  day = 10
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> #=====
>
> Your faithful frog,
> Chris Yager
> "Love 'dem bugs"
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>


From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 22 10:41:02 2003
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed Jan 22 10:41:02 2003
Subject: [Rd] Methods package is now attached by default
In-Reply-To: <Pine.A41.4.44.0301211438000.144514-100000@homer07.u.washington.edu>
References: <Pine.GSO.4.10.10301211356280.15902-100000@quetelet.stat.ucla.edu>
 <Pine.A41.4.44.0301211438000.144514-100000@homer07.u.washington.edu>
Message-ID: <15918.26387.343935.156038@gargle.gargle.HOWL>

>>>>> "TL" == Thomas Lumley <tlumley@u.washington.edu>
>>>>>     on Tue, 21 Jan 2003 14:49:58 -0800 (PST) writes:

    TL> On Tue, 21 Jan 2003, Roger Peng wrote:
    >> I was looking at the examples in the `optim' help page
    >> and I think one of them does not quite work.  In
    >> particular, this example:

(Note to all readers : We are talking about "R-devel" (aka R-pre-pre-1.7.0)


    >> ## "wild" function , global minimum at about -15.81515 
    >> fw <- function (x) 10*sin(0.3*x)*sin(1.3*x^2) + 0.00001*x^4
    >> + 0.2*x+80 
    >> plot(fw, -50, 50, n=1000, main = "optim() minimising `wild function'")
    >> 
    >> While it executes, I think it produces the wrong plot.
    >> The call to plot indicates that it should be plotted from
    >> x values of -50 to 50 but the resulting plot goes from 0
    >> to 50.  However, if I call
    >> 
    >> plot.function(fw,-50,50, n=1000, main="optim() minimising ..")
    >> 
    >> then that plot appears to be correct.  I figured this had
    >> something to do with the method dispatching on functions.

    TL> Not quite, because it doesn't use method dispatching --
    TL> it calls plot.function explicitly.

   { yeah, but Roger is right "in spirit":  The reason it is called
     explicitly from the generic, is the fact that plot.function()'s
     arg.list doesn't match the generic at all... 
   }

    TL> I think it's a thinko in editing.  plot() went from

   plot<- function (x, ...)
   {
      if (is.null(attr(x, "class")) && is.function(x)) {
	  if ("ylab" %in% names(list(...)))
	      plot.function(x, ...)
	  else plot.function(x, ylab = paste(deparse(substitute(x)),
	      "(x)"), ...)
      }
      else UseMethod("plot")
   }

   TL> to

  plot<-function (x, y, ...)
  {
      if (is.null(attr(x, "class")) && is.function(x)) {
	  if ("ylab" %in% names(list(...)))
	      plot.function(x, ...)
	  else plot.function(x, ylab = paste(deparse(substitute(x)),
	      "(x)"), ...)
      }
      else UseMethod("plot")
  }

>> but the extra argument `y' never got passed down to plot.function. It
>> should be something like

  plot <- function (x, y, ...)
  {
      if (is.null(attr(x, "class")) && is.function(x)) {
	  if ("ylab" %in% names(list(...)))
	      plot.function(x,y, ...)
	  else plot.function(x, y, ylab = paste(deparse(substitute(x)),
	      "(x)"), ...)
      }
      else UseMethod("plot")
  }

----
Good idea  {been there, tried other stuff many months ago...}
but it doesn't solve the compatibility problem completely:

Try, e.g.,

plot(sin, 4, 6)
plot(sin, to = 10) ## old behavior would have plotted from 0 to 10

and I think John Chambers and/or I found out quite a while ago that
it's almost impossible to become really compatible to the old behavior
when you include the automatically generated `ylab' and consider 
named and positional arguments their defaults.

Since March 2002, I have the following 
in src/library/methods/R/plot.R
and I think found to work it (almost ? entirely?) correctly,
but had never committed it since I always found it was really an
ugly hack for a generic function definition:


## 2-argument (dispatching)
plot <- function (x, y, ...)
{
    if (is.null(attr(x, "class")) && is.function(x)) {
        nms <- names(list(...))
        ## need to pass `y' to plot.function() when positionally matched
        if(missing(y)) # set to defaults {could use formals(plot.default)}:
            y <- { if (!"from" %in% nms) 0 else
                   if (!"to"   %in% nms) 1 else
                   if (!"xlim" %in% nms) NULL }
        if ("ylab" %in% nms)
            plot.function(x,  y, ...)
        else plot.function(x, y,
                           ylab = paste(deparse(substitute(x)), "(x)"), ...)
    }
    else UseMethod("plot")
}

---

maybe I should commit this version to R-devel after all?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


From wolfram@fischer-zim.ch  Wed Jan 22 14:53:05 2003
From: wolfram@fischer-zim.ch (wolfram@fischer-zim.ch)
Date: Wed Jan 22 14:53:05 2003
Subject: [Rd] text() does not accept data of type POSIXlt (PR#2487)
Message-ID: <200301221353.OAA28926@pubhealth.ku.dk>

[R 1.6.1]

PROBLEM
    If text() is called with an argument of type POSIXlt,
    I get the following error message:

        "Error in as.double.default(x) :
        (list) object cannot be coerced to vector type 14"

REMARK
    plot() accepts this data.

EXAMPLE
    data( Lifeboats, package='vcd' )
    attach(Lifeboats)
    plot( launch, total )
    text( launch, total, labels=seq( along=as.vector( launch ) ) )
    detach(Lifeboats)


Wolfram Fischer


From ripley@stats.ox.ac.uk  Wed Jan 22 15:14:06 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Jan 22 15:14:06 2003
Subject: [Rd] text() does not accept data of type POSIXlt (PR#2487)
In-Reply-To: <200301221353.OAA28926@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0301221406240.4682-100000@gannet.stats>

Where is the R bug here?

The dates are *NOT* `of type POSIXlt': they are of type list but
class c("POSIXt", "POSIXlt")

plot() is a generic function with a POSIXlt method.
text() has no POSIXt nor POSIXlt method.

Nothing says that an arbitrary function you choose will accept arbitrary 
input, nor that plot and points, lines, text etc will have compatible 
methods: there are dozens of exceptions.

On Wed, 22 Jan 2003 wolfram@fischer-zim.ch wrote:

> [R 1.6.1]
> 
> PROBLEM
>     If text() is called with an argument of type POSIXlt,
>     I get the following error message:
> 
>         "Error in as.double.default(x) :
>         (list) object cannot be coerced to vector type 14"
> 
> REMARK
>     plot() accepts this data.
> 
> EXAMPLE
>     data( Lifeboats, package='vcd' )
>     attach(Lifeboats)
>     plot( launch, total )
>     text( launch, total, labels=seq( along=as.vector( launch ) ) )
>     detach(Lifeboats)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From wolfram@fischer-zim.ch  Wed Jan 22 17:49:02 2003
From: wolfram@fischer-zim.ch (Wolfram Fischer - Z/I/M)
Date: Wed Jan 22 17:49:02 2003
Subject: [Rd] vcd: mosaicplot() with labels written into cells
Message-ID: <20030122174305.A3438@s1x.zimnet.ch>

PROPOSAL (a)
    I would like to propose an argument to mosaicplot.default()
    which allows to inscribe the label of the last dimension
	into each cell of the mosaicplot.
	This could make mosaicplots more easily interpretable.


PROPOSAL (b)
	There could be an argument which defines one or more dimensions
	of which the label(s) are token and inscribed into the cells.
	There could be an additional argument for the separator in the
	case of multiple labels.
	[For this proposal I was not yet able to add a code.]
	

CODE FOR PROPOSAL (a)

#==== ADDITIONAL ARGUMENT FOR mosaic.default() =====================

    labels.in.cells = FALSE,  # labels of last dim are written in the cells


#==== NEW FUNCTION IN mosaic.default() =============================

    add.labels.to.cells <- function( x1, x2, y1, y2, i, label ){
        t <- label[[1]][[i]]
        if( 1.1 * strwidth( t, cex=cex ) < x2-x1
        &&  1.1 * strheight( t, cex=cex ) < y2-y1
        )
            text( (x1+x2)/2, (y1+y2)/2 , t, cex=cex )
    }


#==== ADDITIONAL CODE (1) IN FUNCTION mosaic.cell() ================

      if (XP[i] > 0) {
        polygon(c(x.l[i], x.r[i], x.r[i], x.l[i]), 
          c(y1, y1, y2, y2), lty = if (shade) 
            X[i, p + 1]
          else 1, col = if (shade) {
            color[X[i, p + 2]]
          }
          else color[i])
#--- NEW
        if( labels.in.cells )
            add.labels.to.cells( x.l[i], x.r[i], y1, y2, i, label )
#---
      }


#==== ADDITIONAL CODE (2) IN FUNCTION mosaic.cell() ================

      if (YP[j] > 0) {
        polygon(c(x1, x2, x2, x1), c(y.b[j], y.b[j], 
          y.t[j], y.t[j]), lty = if (shade) 
          X[j, p + 1]
        else 1, col = if (shade) {
          color[X[j, p + 2]]
        }
        else color[j])
#--- NEW
        if( labels.in.cells )
            add.labels.to.cells( x1, x2, y.b[j], y.t[j], j, label )
#---
      }

#===================================================================


From wolfram@fischer-zim.ch  Wed Jan 22 18:32:02 2003
From: wolfram@fischer-zim.ch (Wolfram Fischer - Z/I/M)
Date: Wed Jan 22 18:32:02 2003
Subject: [Rd] text() does not accept data of type POSIXlt (PR#2487)
In-Reply-To: <Pine.LNX.4.44.0301221406240.4682-100000@gannet.stats>
References: <200301221353.OAA28926@pubhealth.ku.dk> <Pine.LNX.4.44.0301221406240.4682-100000@gannet.stats>
Message-ID: <20030122182450.A3678@s1x.zimnet.ch>

Thanks for your hint about POSIXt and POSIXlt.

Excuse me that I bothered you with my message.

I thought that text() is a function which is used often in 
combination with plot(). I have the opinion that it would be
helpful if such functions are harmonised as good as possible. -
Therefore I took the time to inform about my observation.

Wolfram Fischer

--- In reply to: ---
>Date:    22.01.03 14:13 (+0000)
>From:    ripley@stats.ox.ac.uk
>To:      To wolfram@fischer-zim.ch
>Subject: Re: [Rd] text() does not accept data of type POSIXlt (PR#2487)
>
> Where is the R bug here?
> 
> The dates are *NOT* `of type POSIXlt': they are of type list but
> class c("POSIXt", "POSIXlt")
> 
> plot() is a generic function with a POSIXlt method.
> text() has no POSIXt nor POSIXlt method.
> 
> Nothing says that an arbitrary function you choose will accept arbitrary 
> input, nor that plot and points, lines, text etc will have compatible 
> methods: there are dozens of exceptions.
> 
> On Wed, 22 Jan 2003 wolfram@fischer-zim.ch wrote:
> 
> > [R 1.6.1]
> > 
> > PROBLEM
> >     If text() is called with an argument of type POSIXlt,
> >     I get the following error message:
> > 
> >         "Error in as.double.default(x) :
> >         (list) object cannot be coerced to vector type 14"
> > 
> > REMARK
> >     plot() accepts this data.
> > 
> > EXAMPLE
> >     data( Lifeboats, package='vcd' )
> >     attach(Lifeboats)
> >     plot( launch, total )
> >     text( launch, total, labels=seq( along=as.vector( launch ) ) )
> >     detach(Lifeboats)
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From wolfram@fischer-zim.ch  Thu Jan 23 13:33:03 2003
From: wolfram@fischer-zim.ch (Wolfram Fischer - Z/I/M)
Date: Thu Jan 23 13:33:03 2003
Subject: [Rd] [R] proposal: lattice/levelplot: panel.catlevelplot
In-Reply-To: <200301212127.50102.deepayan@stat.wisc.edu>
References: <20030121154922.A2866@s1x.zimnet.ch> <200301212127.50102.deepayan@stat.wisc.edu>
Message-ID: <20030123121735.A2387@s1x.zimnet.ch>

Thanks for your comments/corrections.

An addition:

If levelplot is called with panel=panel.catlevelplot
the labels of the scales should be set to the names of
the categories by default, so that it is not necessary
any more to set (in the example of my proposal):

    scales=list(
          x = list( labels = levels( esoph$agegp ) )
        , y = list( labels = levels( esoph$alcgp ) )
        )

I do not yet have a code for that.

Wolfram

--- In reply to: ---
>Date:    21.01.03 21:27 (-0600)
>From:    Deepayan Sarkar <deepayan@stat.wisc.edu>
>To:      To Wolfram Fischer - Z/I/M
>Subject: Re: [Rd] [R] proposal: lattice/levelplot: panel.catlevelplot
>
> On Tuesday 21 January 2003 08:49 am, Wolfram Fischer - Z/I/M wrote:
> > I suggest to add a panel function to levelplot (or perhaps
> > to an other 3d lattice function) which is able to translate
> > the z values into the size of the rectangles.
> 
> Cool.
> 
> > It could be used to display categorical data.
> >
> > I append the proposed code and two examples:
> > - panel.catlevelplot()
> > - example1.catlevelplot.esoph()
> > - example2.catlevelplot.esoph()
> 
> The second example gives an error for me. Do you have the latest grid 
> installed ? I think changing fe.grid.rect below would solve it.
> 
> > Wolfram Fischer
> >
> > #------ CODE --------------------------------------------------------------
> > panel.catlevelplot <- function (x, y, z, wx, wy, zcol, col.regions,
> > subscripts , ...
> >     , z.factor.min      = 0.02  # factor for z range expansion
> >                                 # -> little cells become visible
> >     , col.x     = NULL  # colors for categories in x direction
> >     , col.y     = NULL  # colors for categories in y direction
> >     , prop.width= TRUE  # calculate width of cells proportionally
> >                         # to z position
> >     , prop.height= TRUE # calculate height of cells proportionally
> >                         # to z position
> >     , col.border.cells  = NULL  # color of borders of levelplot cells
> >     , lwd.border.cells  = NULL  # linewidth of borders of levelplot cells
> > ){
> >     axis.line <- trellis.par.get('axis.line')
> >     if( is.null( col.border.cells ) )  col.border.cells = axis.line$col
> >     if( is.null( lwd.border.cells ) )  lwd.border.cells = axis.line$lwd
> >
> >     x <- as.numeric( x )
> >     y <- as.numeric( y )
> >     z <- as.numeric( z )
> >
> > # <--- It would be better to do the following calculations
> > #      of z.x.factor and z.y.factor in the main function (levelplot).
> >
> >     z.min <- min( z, na.rm=TRUE )
> >     z.range <- max( z, na.rm=TRUE ) - z.min
> >     z.factor <- ( z - z.min + z.range * z.factor.min ) /
> >         ( z.range * ( 1 + z.factor.min ) )
> >     z.x.factor <- if( prop.width ) z.factor else rep( 1, length(z) )
> >     z.y.factor <- if( prop.height ) z.factor else rep( 1, length(z) )
> > # --->
> >
> >     fe.grid.rect <- function( sel, fill ){
> 
> 
>         if (any(sel)) ## ADDED
> 
> 
> >         grid.rect(
> >               x = x[subscripts][sel]
> >             , y = y[subscripts][sel]
> >             , width = wx[subscripts][sel] *
> >                 z.x.factor[subscripts][sel]
> >             , height = wy[subscripts][sel] *
> >                 z.y.factor[subscripts][sel]
> >             , default.units = "native"
> >             , gp = gpar(
> >                   fill = fill
> >                 , col = col.border.cells
> >                 , lwd = lwd.border.cells
> >                 )
> >             )
> >     }
> >
> >     if( any(subscripts) ){
> >         if( ! is.null( col.x ) ){
> >             x.levels <- unique( x )
> >             col.x <- rep( col.x, length = length(x.levels) )
> >             for( i.col in seq( along = x.levels ) ){
> >                 fe.grid.rect(
> >                       sel = ( x[subscripts] == viq.x.levels[i.col] )
> >                     , fill = col.x[i.col]
> >                     )
> >             }
> >         }else if( ! is.null( col.y ) ){
> >             y.levels <- unique( y )
> >             col.y <- rep( col.y, length = length(y.levels) )
> >             for( i.col in seq( along = y.levels ) ){
> >                 fe.grid.rect(
> >                       sel = ( y[subscripts] == y.levels[i.col] )
> >                     , fill = col.y[i.col]
> >                     )
> >             }
> >         }else{
> >             for( i.col in seq( along = col.regions ) ){
> >                 fe.grid.rect(
> >                       sel = ( zcol[subscripts] == i.col )
> >                     , fill = col.regions[i.col]
> >                     )
> >             }
> >         }
> >     }
> > }
> >
> > #------ EXAMPLE -----------------------------------------------------------
> > data(esoph)
> > library(lattice)
> >
> > example1.catlevelplot.esoph <- function( ... ){
> >     ncolors <- nlevels( esoph$alcgp )
> >     print( levelplot( ncases ~ agegp * alcgp | tobgp, data=esoph
> >         , main      = 'esoph data set'
> >         , sub       = 'tobgp'
> >         , cuts      = ncolors
> >         , layout    = c( 4, 4 )
> >         , scales=list(
> >               x = list( labels = levels( esoph$agegp ), rot=90,
> > alternating=F ) , y = list( labels = levels( esoph$alcgp ) )
> >             )
> >         , panel     = panel.catlevelplot
> >         , colorkey  = NULL
> >         , col.y = rainbow(ncolors)
> > #       , prop.height   = F
> >         , ...
> >     ))
> > }
> >
> > example2.catlevelplot.esoph <- function( ... ){
> >     cuts <- 15
> >     print( levelplot( ncases ~ agegp * alcgp | tobgp, data=esoph
> >         , main      = 'esoph data set'
> >         , sub       = 'tobgp'
> >         , cuts      = cuts
> >         , layout    = c( 4, 4 )
> >         , scales=list(
> >               x = list( labels = levels( esoph$agegp ), rot=90,
> > alternating=F ) , y = list( labels = levels( esoph$alcgp ) )
> >             )
> >         , panel     = panel.catlevelplot
> >         , col.regions = rev( heat.colors(cuts+1) )
> >         , col.border.cells  = trellis.par.get('background')$col
> >         , lwd.border.cells  = 3
> >         , prop.height   = F
> >         , prop.width    = F
> >         , ...
> >     ))
> > }
> >
> > #------ -------------------------------------------------------------------
> >
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > http://www.stat.math.ethz.ch/mailman/listinfo/r-devel


From wolfram@fischer-zim.ch  Thu Jan 23 17:24:19 2003
From: wolfram@fischer-zim.ch (Wolfram Fischer - Z/I/M)
Date: Thu Jan 23 17:24:19 2003
Subject: [Rd] proposal: lattice/levelplot with zlim
Message-ID: <20030123171623.A3027@s1x.zimnet.ch>

I suggest to add an argument zlim to levelplot().

This would be a help e.g. to plot a sort of correlogram
(or corrgram, how Micheal Friendly named it, c.f.:
http://euclid.psych.yorku.ca/SCS/Papers/corrgram.pdf)

When using panel.catlevelplot which I suggested yesterday
the graphic becomes even nicer.

Wolfram



#---- ADDITIONAL ARGUMENT FOR levelplot() --------------------------

    zlim = range(z[!is.na(z)]),


#---- ADDITIONAL CODE IN levelplot() -------------------------------

                #--- ORIGINAL ---
#   zrng <- extend.limits(range(z[!is.na(z)]))
                #--- NEW ---
    zrng <- extend.limits( zlim )


#---- EXAMPLE ------------------------------------------------------

library(EMV)
data(swiss)
example.corplot.swiss <- function( ... ){
    x.cor <- cor( knn( as.matrix( swiss ) )$data )
    diag( x.cor ) <- 0
    x.names <- colnames( swiss )
    x.cor.data  <- data.frame(
          x     = rep( x.names, length( x.names ) )
        , y     = rep( x.names, each=length( x.names ) )
        , val   = as.vector( x.cor )
        )
    print( levelplot( val ~ x + y, data = x.cor.data
## --- omit next argument if panel.catlevelplot is not yet defined ---
        , panel = panel.catlevelplot
        , scales= list(
              x = list( labels = x.names, rot=90, alternating=F
                  , at = 1 : length( x.names ) )
            , y = list( labels = x.names, alternating=F
                  , at = 1 : length( x.names ) )
            )
        , zlim  = c( -1, 1 )
        , ...
        ))
}

#---- --------------------------------------------------------------


From wolfram@fischer-zim.ch  Thu Jan 23 17:57:02 2003
From: wolfram@fischer-zim.ch (Wolfram Fischer - Z/I/M)
Date: Thu Jan 23 17:57:02 2003
Subject: [Rd] proposal: lattice/panel.levelplot with show.z.values
Message-ID: <20030123175949.A3269@s1x.zimnet.ch>

I suggest to add an argument to levelplot
which displays the z values in the cells.

In the special case of a correlogram the correlation values could
be rotated by 45 degres when the correlation is positive and by
-45 degress when the correlation is negative (see example).

Wolfram

NB: The same code should be to panel.catlevelplot if this panel
function will be implemented.


#---- ADDITIONAL ARGUMENTS FOR panel.levelplot() -------------------

	show.z.values = FALSE,		# display z values in the cells
								# if -1:  if( srt == 0 ) srt <- 45
								#         if( z < 0 )  srt <- -srt
	cex			= 1,			# size of z values
	signif		= 2,			# number of significant digits of z values
	srt			= 0,			# rotation of z values


#---- ADDITIONAL CODE AT THE END OF panel.levelplot() --------------

		if( show.z.values ){
			if( show.z.values < 0 )
				srt <- ifelse( srt==0, 45, srt ) * sign( z[subscripts] )
			ltext(
				  x = x[subscripts]
				, y = y[subscripts]
				, labels = signif( z[subscripts], signif )
				, cex = cex
				, srt = srt
				)
		}

#---- EXAMPLE ------------------------------------------------------

library(EMV)
data(swiss)
example.corplot.swiss <- function( show.z.values=-1, ... ){
	x.cor <- cor( knn( as.matrix( swiss ) )$data )
	diag( x.cor ) <- 0
	x.names <- colnames( swiss )
	x.cor.data	<- data.frame(
		  x		= rep( x.names, length( x.names ) )
		, y		= rep( x.names, each=length( x.names ) )
		, val	= as.vector( x.cor )
		)
	print( levelplot( val ~ x + y, data = x.cor.data
		, show.z.values = show.z.values
        , scales= list(
              x = list( labels = x.names, rot=90, alternating=F
                  , at = 1 : length( x.names ) )
            , y = list( labels = x.names, alternating=F
                  , at = 1 : length( x.names ) )
            )
        , zlim  = c( -1, 1 )
        , ...
		))
}


From deepayan@stat.wisc.edu  Thu Jan 23 20:00:03 2003
From: deepayan@stat.wisc.edu (Deepayan Sarkar)
Date: Thu Jan 23 20:00:03 2003
Subject: [Rd] [R] proposal: lattice/levelplot: panel.catlevelplot
In-Reply-To: <20030123121735.A2387@s1x.zimnet.ch>
References: <20030121154922.A2866@s1x.zimnet.ch> <200301212127.50102.deepayan@stat.wisc.edu> <20030123121735.A2387@s1x.zimnet.ch>
Message-ID: <200301231258.52857.deepayan@stat.wisc.edu>

On Thursday 23 January 2003 05:17 am, Wolfram Fischer - Z/I/M wrote:
> Thanks for your comments/corrections.
>
> An addition:
>
> If levelplot is called with panel=panel.catlevelplot
> the labels of the scales should be set to the names of
> the categories by default, so that it is not necessary
> any more to set (in the example of my proposal):
>
>     scales=list(
>           x = list( labels = levels( esoph$agegp ) )
>         , y = list( labels = levels( esoph$alcgp ) )
>         )

Actually, that's almost done. All the pieces are in place, and xyplot, for 
example, already does this since lattice 0.6. I'll just have to make some 
minor adjustments to get this behaviour working in the 3D functions.

Deepayan


From wolfram@fischer-zim.ch  Fri Jan 24 10:24:02 2003
From: wolfram@fischer-zim.ch (Wolfram Fischer - Z/I/M)
Date: Fri Jan 24 10:24:02 2003
Subject: [Rd] new function: showcolors {base}
Message-ID: <20030124102209.A1920@s1x.zimnet.ch>

I propose to add a function that allows
to display colors selected by a text pattern
or by color vectors in a plot.

Wolfram Fischer

#--- showcolors.R

showcolors <-
function(
	  col	= "red"
	, index	= NULL
	, pie	= TRUE
	, lwd	= 6
	, cex	= 1.0
	, main	= NULL
	, sub	= NULL
	, ...
){
	n.colors <- length( col )
	if( n.colors > 1 ){
		main <- deparse( substitute( col ) )
		title <- qt.colors <- col
	}else{
		qx.colors <- grep( col, colors() )
		if( ! is.null( index ) ) qx.colors = qx.colors[ index ]
		else index = seq( along=qx.colors )
		if( is.null( main ) )  main <- paste( sep="", col
				, ' [', min(index), ':', max(index), ']' )
		qt.colors <- colors()[ qx.colors ]
		n.colors <- length( qt.colors )
	}

	if( pie ){
		pie( x = rep( 1, n.colors ), col = qt.colors, labels = qt.colors
			, main	= main, sub = sub, cex = cex, ... )
	}else{
		plot( type='n', x = c( -3, 3 ), y = c( 1, n.colors )
			, main = main, sub = sub, axes = FALSE, xlab = '', ylab = '' )
		segments(
			  x0 = rep( -0.5, n.colors ), y0 = 1 : n.colors
			, x1 = rep(  0.5, n.colors ), y1 = 1 : n.colors
			, col = qt.colors, lwd = lwd, ... )
		text( x = rep( -0.55, n.colors ), y  = 1 : n.colors
			, labels= qt.colors, cex = cex, pos = 2 )
	}
}

#--- showcolors.Rd

\name{showcolors}
\title{Displaying Colors}
\alias{showcolors}
\synopsis{
showcolors(col="red", \dots)
}
\description{
  \code{showcolors} displays selected colors
  (by searching color names containing a text pattern
  or by a vector of colors)
  in a pie or as bars.}
}
\usage{
showcolors(col="red", index=NULL, pie=TRUE, lwd=6, cex=1,
           main=NULL, sub=NULL, \dots)
}
\arguments{
  \item{col}{pattern string for search in \code{colors}.
	  	Alternatively, a vector of colors.}
  \item{index}{a numeric index for subselection
  		in the result of \code{col}.}
  \item{pie}{display colors in a pie.
  		Alternatively: display colors as bars.}
  \item{lwd}{line width for bars.}
  \item{main}{an overall title for the plot.}
  \item{sub}{a sub title for the plot.}
  \item{\dots}{graphical parameters can be given as arguments
  	to \code{plot}.}
}
\details{
	If \code{col} has length of 1 then all colors a displayed
	with names containing the text string \code{col}.
	The search is done by \code{grep}.
}
\seealso{
  \code{\link{colors}},
  \code{\link{palette}},
  \code{\link{rainbow}},
  \code{\link{grep}}.
}
\author{
	Wolfram Fischer
}
\examples{
showcolors()
showcolors( palette() )
showcolors( rainbow(24) )
showcolors( "yellow" )
showcolors( "yellow", pie=FALSE )
showcolors( "blue", index=26:50 )
}
\keyword{color}
\keyword{dplot}

#---


From wolfram@fischer-zim.ch  Fri Jan 24 10:25:23 2003
From: wolfram@fischer-zim.ch (Wolfram Fischer - Z/I/M)
Date: Fri Jan 24 10:25:23 2003
Subject: [Rd] new function: twotailed.colors {base}
Message-ID: <20030124102641.A1935@s1x.zimnet.ch>

I suggest to add a new function to create a vector of
n ``contiguous'' colors with tails in two colors.
This function is similar to `cm.colors' but the colors
can be choosen by hsv values.

This function could be used e.g. as alternative to
the default ``col.regions'' in `levelplot'.

Perhaps the arguments in the following code could be 
simplified.

Wolfram Fischer

#--- twotailed.colors.R

twotailed.colors <-
function(
      n			= 7			# number of colors to be in the palette
	, n5		= n %% 2	# number of colors between the two tails
	, h1		= 0.02		# 0|1 = rot
	, h2		= 0.15		# 0.7 = blau, 0.15 = samtgelb, 0.35 = grün
	, s0		= 1			# saturation: begin and end
	, s5		= 1/n*1.4	# saturation: in the middle
	, v0		= 1			# value: begin and end
	, v5		= 1			# value: in the middle
	, s01		= s0		# beginning saturation of first tail
	, s02		= s0		# ending saturation of second tail
	, s51		= s5		# middle saturation on of first tail
	, s52		= s5		# middle saturation on of second tail
	, v01		= v0		# beginning value of first tail
	, v02		= v0		# ending value of second tail
	, v51		= v5		# middle value on of first tail
	, v52		= v5		# middle value on of second tail
	, n.tail	= ( n - n5 ) %/% 2
							# number of colors in each tail
	, s1		= seq( s01, s51, length = n.tail )
	, s2		= seq( s52, s02, length = n.tail )
	, v1		= seq( v01, v51, length = n.tail )
	, v2		= seq( v52, v02, length = n.tail )
){
	c(	hsv( h1, s1, v1 )
	,	rep( hsv( h1, round(s5,0), v5 ), n5 )
	,	hsv( h2, s2, v2 )
	)
}

#--- twotailed.colors.Rd

\name{twotailed.colors}
\alias{twotailed.colors}
\title{Two tailed color palette}
\description{
  Create a vector of \code{n} ``contiguous'' colors
  with tails in two colors.
}
\usage{
twotailed.colors( n = 7, n5 = n %% 2, h1 = 0.02, h2 = 0.15
	, s0 = 1, s5 = 1/n*1.4, v0 = 1, v5 = 1
	, s01 = s0, s02 = s0, s51 = s5, s52 = s5
	, v01 = v0, v02 = v0, v51 = v5, v52 = v5
	, n.tail = ( n - n5 ) %/% 2
	, s1 = seq( s01, s51, length = n.tail )
	, s2 = seq( s52, s02, length = n.tail )
	, v1 = seq( v01, v51, length = n.tail )
	, v2 = seq( v52, v02, length = n.tail )
	)
}
\arguments{
	\item{n}{ number of colors to be in the palette.}
	\item{n5}{ number of colors between the two tails.}
	\item{h1,h2}{values in the range \code{[0,1]} for the
		``hue'' of the color of each tail, e.g.:
		0 for red,
		0.15 for yellow,
		0.35 for green,
		0.7 for blue.}
	\item{s0}{ saturation: begin and end.}
	\item{s5}{ saturation: in the middle.}
	\item{v0}{ value: begin and end.}
	\item{v5}{ value: in the middle.}
	\item{s01}{ beginning saturation of the first tail.}
	\item{s02}{ ending saturation of the second tail.}
	\item{s51,s52}{ middle saturation on of the first and the second tail.}
	\item{v01}{ beginning value of the first tail.}
	\item{v02}{ ending value of the second tail.}
	\item{v51,v52}{ middle value on of the first and the second tail.}
	\item{n.tail}{ number of colors in each tail.}
	\item{s1,s2}{ vector of saturations of first and the second tail.}
	\item{v1,v2}{ vector of values of the first and the tail.}
}
\details{
}
\value{A character vector, \code{cv}, of color names.  This can be used
  either to create a user--defined color palette for subsequent
  graphics by \code{\link{palette}(cv)}, a \code{col=} specification
  in graphics functions or in \code{par}.
}
\seealso{
  \code{\link{cm.colors}},
  \code{\link{colors}}, \code{\link{palette}}, \code{\link{hsv}},
  \code{\link{rgb}}, \code{\link{gray}} and \code{\link{col2rgb}} for
  translating to RGB numbers.
}
\author{
	Wolfram Fischer
}
\examples{
twotailed.colors(12)
twotailed.colors(24,12)
showcolors( twotailed.colors(24,12) )

}
\keyword{color}
\keyword{dplot}

#---


From dmurdoch@pair.com  Fri Jan 24 13:07:04 2003
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Fri Jan 24 13:07:04 2003
Subject: [Rd] new function: showcolors {base}
In-Reply-To: <20030124102209.A1920@s1x.zimnet.ch>
References: <20030124102209.A1920@s1x.zimnet.ch>
Message-ID: <f6a23v0bdiujtcpk2vobscq0j8iqsarubp@4ax.com>

On Fri, 24 Jan 2003 10:22:09 +0100, you wrote:

>I propose to add a function that allows
>to display colors selected by a text pattern
>or by color vectors in a plot.
>

That's a nice function.  I'd suggest some small changes:

1.  Return the vector of colour names (invisibly), and have a plot =
TRUE argument to control whether the plot is drawn or not, i.e.
  reds <- showcolors("red", plot = FALSE) would be just a grep of the
colour list.

2.  Change the description of the pie = FALSE option to say it
displays "lines", not "bars", or add a separate "lines" option.
Otherwise it's not obvious that lty would do anything.

Duncan Murdoch


From nikko@hailmail.net  Fri Jan 24 16:05:03 2003
From: nikko@hailmail.net (Nicholas Lewin-Koh)
Date: Fri Jan 24 16:05:03 2003
Subject: [Rd] new function: showcolors {base}
In-Reply-To: <20030124102209.A1920@s1x.zimnet.ch>
References: <20030124102209.A1920@s1x.zimnet.ch>
Message-ID: <20030124150150.05C8E20A8A@www.fastmail.fm>

Hi,
I also think this is a neat function. I might suggest adding a stop error
for dislexics like me. Something like 
if(length(qx.colors)==0) stop(paste("No colors match query color
",col,".\n"))

Then there are no obscure error messages like
showcolors( col="gren",pie=FALSE)
Error in segments(x0, y0, x1, y1, col = col, lty = lty, lwd = lwd, ...) : 
        first argument invalid
In addition: Warning messages: 
1: no finite arguments to min; returning Inf 
2: no finite arguments to max; returning -Inf 


Nicholas

On Fri, 24 Jan 2003 10:22:09 +0100, "Wolfram Fischer - Z/I/M"
<wolfram@fischer-zim.ch> said:
> I propose to add a function that allows
> to display colors selected by a text pattern
> or by color vectors in a plot.
>


From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 24 16:50:04 2003
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri Jan 24 16:50:04 2003
Subject: [Rd] new function: showcolors {base}
In-Reply-To: <20030124102209.A1920@s1x.zimnet.ch>
References: <20030124102209.A1920@s1x.zimnet.ch>
Message-ID: <15921.24432.751078.665976@gargle.gargle.HOWL>

>>>>> "Wolfram" == Wolfram Fischer <- Z/I/M <wolfram@fischer-zim.ch>>
>>>>>     on Fri, 24 Jan 2003 10:22:09 +0100 writes:

    Wolfram> I propose to add a function that allows
    Wolfram> to display colors selected by a text pattern
    Wolfram> or by color vectors in a plot.

    Wolfram> Wolfram Fischer

    Wolfram> #--- showcolors.R

I had a much simpler idea
added to  example(palettes) for R-devel (aka "pre-1.7.0") about
2 weeks ago:

Maybe one could combine some of the underlying ideas...
---
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


 ##------ Some palettes ------------
 demo.pal <-
   function(n, border = if (n<32) "light gray" else NA,
	    main = paste("color palettes;  n=",n),
	    ch.col = c("rainbow(n, start=.7, end=.1)", "heat.colors(n)",
		       "terrain.colors(n)", "topo.colors(n)", "cm.colors(n)"))
 {
     nt <- length(ch.col)
     i <- 1:n; j <- n / nt; d <- j/6; dy <- 2*d
     plot(i,i+d, type="n", yaxt="n", ylab="", main=main)
     for (k in 1:nt) {
	 rect(i-.5, (k-1)*j+ dy, i+.4, k*j,
	      col = eval(parse(text=ch.col[k])), border = border)
	 text(2*j,  k * j +dy/4, ch.col[k])
     }
 }
 n <- if(.Device == "postscript") 64 else 16
      # Since for screen, larger n may give color allocation problem
 demo.pal(n)

    Wolfram> showcolors <-  function(

    ......


From jerome@hivnet.ubc.ca  Fri Jan 24 20:10:13 2003
From: jerome@hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Fri Jan 24 20:10:13 2003
Subject: [Rd] table() with option "exclude=NULL" (PR#2491)
Message-ID: <200301241906.UAA16145@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.6.2
OS: redhat linux 7.2
Submission from: (NULL) (142.103.173.179)



Bug or feature? Hard to say...
But it sure would be nice if table()
would label the frequency of NA's as
it does for NaN's.

Regards,
Jerome

> table(c(2,NA,1,1,1),exclude=NULL)

1 2
3 1 1
> table(c(2,NA,1,1,1,NaN),exclude=NULL)

  1   2  NaN
  3   1   1   1

#For sake of comparison, Splus returns:
> table(c(2,NA,1,1,1,NaN),exclude=NULL)
 1 2 NA NaN
 3 1  1   1


From ripley@stats.ox.ac.uk  Fri Jan 24 20:22:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Jan 24 20:22:02 2003
Subject: [Rd] table() with option "exclude=NULL" (PR#2491)
Message-ID: <200301241922.UAA16243@pubhealth.ku.dk>

It's a feature, as a few seconds' exploration would have confirmed.

> x <- table(c(2,NA,1,1,1,NaN),exclude=NULL)
> names(x)
[1] "1"   "2"   NA    "NaN"

so R *does* label them, and as (unlike NaNs) it does not know what they 
are, it *prints* them as blanks.  (I wanted to change that but there was
resistance.)

Remember S does not have missing values in character strings.

On Fri, 24 Jan 2003 jerome@hivnet.ubc.ca wrote:

> Full_Name: Jerome Asselin
> Version: 1.6.2
> OS: redhat linux 7.2
> Submission from: (NULL) (142.103.173.179)
> 
> 
> 
> Bug or feature? Hard to say...
> But it sure would be nice if table()
> would label the frequency of NA's as
> it does for NaN's.

It does, so isn't R nice to you!

> Regards,
> Jerome
> 
> > table(c(2,NA,1,1,1),exclude=NULL)
> 
> 1 2
> 3 1 1
> > table(c(2,NA,1,1,1,NaN),exclude=NULL)
> 
>   1   2  NaN
>   3   1   1   1
> 
> #For sake of comparison, Splus returns:
> > table(c(2,NA,1,1,1,NaN),exclude=NULL)
>  1 2 NA NaN
>  3 1  1   1
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jerome@hivnet.ubc.ca  Fri Jan 24 20:39:02 2003
From: jerome@hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Fri Jan 24 20:39:02 2003
Subject: [Rd] hist() with option "sub" (PR#2492)
Message-ID: <200301241939.UAA16327@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.6.2
OS: redhat linux 7.2
Submission from: (NULL) (142.103.173.179)



This is certainly not a big problem, but should there really
be a warning message when I run this?

> x <- c(1,1,2,2,2,2,3,3)
> hist(x,sub="Sub Title")
Warning messages:
1: parameter "sub" couldn't be set in high-level plot() function
2: parameter "sub" couldn't be set in high-level plot() function

The sub title DOES show on the graph. I believe the warning
message is generated by axis() which does not deal with the
parameter "sub".

The hist() help file says:
     ...: further graphical parameters to `title' and `axis'.

I am aware of the challenges of dealing with dots (...) in
functions. Perhaps just a note in the help file about this
would be the best way to keep the code simple.

Regards,
Jerome


From kjetil@entelnet.bo  Sat Jan 25 00:46:02 2003
From: kjetil@entelnet.bo (kjetil brinchmann halvorsen)
Date: Sat Jan 25 00:46:02 2003
Subject: [Rd] table() with option "exclude=NULL" (PR#2491)
In-Reply-To: <200301241922.UAA16243@pubhealth.ku.dk>
Message-ID: <3E3197A1.17565.2D4897@localhost>

On 24 Jan 2003 at 20:22, ripley@stats.ox.ac.uk wrote:

> It's a feature, as a few seconds' exploration would have confirmed.
> 
> > x <- table(c(2,NA,1,1,1,NaN),exclude=NULL)
> > names(x)
> [1] "1"   "2"   NA    "NaN"
> 
> so R *does* label them, and as (unlike NaNs) it does not know what they 
> are, it *prints* them as blanks.  (I wanted to change that but there was
> resistance.)

Why there were resistance? This seems like an obvious betterment!

Kjetil Halvorsen


From ligges@statistik.uni-dortmund.de  Sat Jan 25 15:59:05 2003
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sat Jan 25 15:59:05 2003
Subject: [Rd] hist() with option "sub" (PR#2492)
Message-ID: <200301251115.MAA19304@pubhealth.ku.dk>

jerome@hivnet.ubc.ca wrote:
> 
> Full_Name: Jerome Asselin
> Version: 1.6.2
> OS: redhat linux 7.2
> Submission from: (NULL) (142.103.173.179)
> 
> This is certainly not a big problem, but should there really
> be a warning message when I run this?
> 
> > x <- c(1,1,2,2,2,2,3,3)
> > hist(x,sub="Sub Title")
> Warning messages:
> 1: parameter "sub" couldn't be set in high-level plot() function
> 2: parameter "sub" couldn't be set in high-level plot() function
> 
> The sub title DOES show on the graph. I believe the warning
> message is generated by axis() which does not deal with the
> parameter "sub".
> 
> The hist() help file says:
>      ...: further graphical parameters to `title' and `axis'.
> 
> I am aware of the challenges of dealing with dots (...) in
> functions. Perhaps just a note in the help file about this
> would be the best way to keep the code simple.
> 
> Regards,
> Jerome
> 

This is very common. You will see similar warnings (Note: warnings, not
errors!)  for many high-level plot functions with many graphical
arguments. It would be a bad idea to mention that on almost every
high-level plot funtion's help page, I think. Nevertheless, it might be
worth to mention it in the FAQs (Kurt ?), because we see questions
(rather than bug reports without apparent reason) on R-help quite
regularly (about once a month, I guess).

BTW: Martin Maechler addressed the underlying "problem" in his R-devel
message:

 Subject: [Rd] Changing "..." inside a function: impossible? desirable?
    Date: Tue, 17 Dec 2002 19:07:08

where "problem" means that it is impossible (at least not easily with a
reasonable amount of code) to write code using "..." that avoids the
warning messages.

Uwe Ligges


From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Jan 25 17:08:58 2003
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat Jan 25 17:08:58 2003
Subject: [Rd] hist() with option "sub" (PR#2492)
In-Reply-To: <200301251115.MAA19304@pubhealth.ku.dk>
References: <200301251115.MAA19304@pubhealth.ku.dk>
Message-ID: <15922.46299.332945.769765@gargle.gargle.HOWL>

>>>>> "UweL" == Uwe Ligges <ligges@statistik.uni-dortmund.de>
>>>>>     on Sat, 25 Jan 2003 12:15:52 +0100 (MET) writes:

    UweL> jerome@hivnet.ubc.ca wrote:
    >> 
    >> Full_Name: Jerome Asselin
    >> Version: 1.6.2
    >> OS: redhat linux 7.2
    >> Submission from: (NULL) (142.103.173.179)
    >> 
    >> This is certainly not a big problem, but should there really
    >> be a warning message when I run this?
    >> 
    >> > x <- c(1,1,2,2,2,2,3,3)
    >> > hist(x,sub="Sub Title")
    >> Warning messages:
    >> 1: parameter "sub" couldn't be set in high-level plot() function
    >> 2: parameter "sub" couldn't be set in high-level plot() function
    >> 
    >> The sub title DOES show on the graph. I believe the warning
    >> message is generated by axis() which does not deal with the
    >> parameter "sub".
    >> 
    >> The hist() help file says:
    >> ...: further graphical parameters to `title' and `axis'.
    >> 
    >> I am aware of the challenges of dealing with dots (...) in
    >> functions. Perhaps just a note in the help file about this
    >> would be the best way to keep the code simple.
    >> 
    >> Regards,
    >> Jerome
    >> 

    UweL> This is very common. You will see similar warnings (Note: warnings, not
    UweL> errors!)  for many high-level plot functions with many graphical
    UweL> arguments. It would be a bad idea to mention that on almost every
    UweL> high-level plot funtion's help page, I think. Nevertheless, it might be
    UweL> worth to mention it in the FAQs (Kurt ?), because we see questions
    UweL> (rather than bug reports without apparent reason) on R-help quite
    UweL> regularly (about once a month, I guess).

    UweL> BTW: Martin Maechler addressed the underlying "problem" in his R-devel
    UweL> message:

    UweL> Subject: [Rd] Changing "..." inside a function: impossible? desirable?
    UweL> Date: Tue, 17 Dec 2002 19:07:08

    UweL> where "problem" means that it is impossible (at least not easily with a
    UweL> reasonable amount of code) to write code using "..." that avoids the
    UweL> warning messages.


Thank you, Uwe.
As you know, Luke Tierney has remarked in that same thread that often the
problem can be solved by introducing an explicit argument (and
you know well that one can end up with two many arguments ! :-).

However, `sub' would really be a natural argument -- less for hist() than
for plot.histogram(), the plotting method called  by hist() when
it's plot argument is TRUE.  
Adding it there and pass it explictly to axis() solves this problem.
--> for "R-devel"


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


From maechler@stat.math.ethz.ch  Sat Jan 25 17:33:02 2003
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Sat Jan 25 17:33:02 2003
Subject: [Rd] hist() with option "sub" (PR#2492)
Message-ID: <200301251633.RAA20292@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch>
>>>>>     on Sat, 25 Jan 2003 17:01:31 +0100 writes:

	  .....

    MM> However, `sub' would really be a natural argument -- less for hist() than
    MM> for plot.histogram(), the plotting method called  by hist() when
    MM> it's plot argument is TRUE.  
    MM> Adding it there and pass it explictly to axis() solves this problem.

Oops, "thinko":  I meant  `title()', not `axis()'.

Martin


From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 27 14:43:10 2003
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon Jan 27 14:43:10 2003
Subject: [Rd] rmultinom() -- how \\ via own C code?
Message-ID: <15925.13729.635531.38039@gargle.gargle.HOWL>

I've had a need for multinomial "random number generation"
occasionally. And other people too.
The following code is currently in the 
(very small ``not very high importance'') CRAN package normix
 --- which I will rename to "nor1mix" very seen because of a 
    ``name registration'' problem

I want to add "this" (well the functionality) to a standard
package -- "mva" probably.

The reason for my post is to ask about importance for C code
(and a an official API to that).  
1) I think we have no clear precedence of a C interface to
   **multivariate** random numbers, and
2) It might be of too marginal importance.

If you (discussants) conclude that a C interface is not at all
desired, I consider using the R code as it is now -- which is
not optimal --- and most importantly:
If this should ever be changed, the change would hardly be
back-compatible. 
In other words, calling the not-yet existing C interface would
produce different random numbers... 

----

- Opinions ?

- Is there already C code around to do this ``in one step'' ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><




## This is based on rmultz2() from S-news by Alan Zaslavsky & Scott Chasalow;
## in R available from library(combinat) -- but it has
## Arg.names like  rbinom();  returns  n x p matrix
rmultinom <- function(n, size, prob) {

    K <- length(prob) # #{classes}
    matrix(tabulate(sample(K, n * size, repl = TRUE, prob) + K * 0:(n - 1),
                    nbins = n * K),
           nrow = n, ncol = K, byrow = TRUE)
}


From bolker@zoo.ufl.edu  Mon Jan 27 17:22:05 2003
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon Jan 27 17:22:05 2003
Subject: [Rd] rmultinom() -- how \\ via own C code?
In-Reply-To: <15925.13729.635531.38039@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.44.0301271121560.14293-100000@bolker.zoo.ufl.edu>

  I use multivariate random values frequently -- multinomial (using code
contributed to the R-list by Ian Wilson), Dirichlet (using ratios of
gamma/sum(gamma)), multivariate normal (using mvrnorm() from MASS, which I
wish were called rmvnorm instead!)  I have functions for them in some of
my home-brewed packages.  I would vote for adding some of them to the
recommended packages.

  Many multinomial distributions have matrices or vectors of arguments: if
one wants to generate multiple variates with different parameters, how
should these arguments be stacked?  e.g. for multinomial deviates, should
one be able to specify an m by p matrix for "prob" where m is a divisor of
n?

  The other minor point is that I usually give d- and r-functions for 
these distributions but not p- and q- (since I don't really want to think 
about defining, much less computing, multidimensional cumulative 
distributions ...)

  Ben

On Mon, 27 Jan 2003, Martin Maechler wrote:

> I've had a need for multinomial "random number generation"
> occasionally. And other people too.
> The following code is currently in the 
> (very small ``not very high importance'') CRAN package normix
>  --- which I will rename to "nor1mix" very seen because of a 
>     ``name registration'' problem
> 
> I want to add "this" (well the functionality) to a standard
> package -- "mva" probably.
> 
> The reason for my post is to ask about importance for C code
> (and a an official API to that).  
> 1) I think we have no clear precedence of a C interface to
>    **multivariate** random numbers, and
> 2) It might be of too marginal importance.
> 
> If you (discussants) conclude that a C interface is not at all
> desired, I consider using the R code as it is now -- which is
> not optimal --- and most importantly:
> If this should ever be changed, the change would hardly be
> back-compatible. 
> In other words, calling the not-yet existing C interface would
> produce different random numbers... 
> 
> ----
> 
> - Opinions ?
> 
> - Is there already C code around to do this ``in one step'' ?
> 
> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><
> 
> 
> 
> 
> ## This is based on rmultz2() from S-news by Alan Zaslavsky & Scott Chasalow;
> ## in R available from library(combinat) -- but it has
> ## Arg.names like  rbinom();  returns  n x p matrix
> rmultinom <- function(n, size, prob) {
> 
>     K <- length(prob) # #{classes}
>     matrix(tabulate(sample(K, n * size, repl = TRUE, prob) + K * 0:(n - 1),
>                     nbins = n * K),
>            nrow = n, ncol = K, byrow = TRUE)
> }
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


From korner@eco.umnw.ethz.ch  Mon Jan 27 17:28:09 2003
From: korner@eco.umnw.ethz.ch (korner@eco.umnw.ethz.ch)
Date: Mon Jan 27 17:28:09 2003
Subject: [Rd] survival bug? (PR#2499)
Message-ID: <200301271628.RAA07676@pubhealth.ku.dk>

--Apple-Mail-27-953181986
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

a possible bug with survival analysis - either in R or in SPSS...

find more details in bug.doc, and the data in bug.txt

best
Pius Korner



--Apple-Mail-27-953181986
Content-Disposition: attachment
Content-Type: multipart/appledouble;
	boundary=Apple-Mail-28-953181987


--Apple-Mail-28-953181987
Content-Disposition: attachment;
	filename=bug.doc
Content-Transfer-Encoding: base64
Content-Type: application/applefile;
	name="bug.doc"

AAUWBwACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAJAAAAPgAAAAoAAAADAAAASAAAAAcAAAACAAAA
TwAAAR5XOEJOTVNXRAAAYnVnLmRvYwAAAQAAAAEAAAAAAAAAAB4AAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAB
AAAAAAAAAAAeAAAAAAAAAAAAHAAe//8=

--Apple-Mail-28-953181987
Content-Disposition: attachment;
	filename=bug.doc
Content-Transfer-Encoding: base64
Content-Type: application/msword;
	x-mac-creator=4D535744;
	x-unix-mode=0644;
	x-mac-type=5738424E;
	name="bug.doc"

0M8R4KGxGuEAAAAAAAAAAAAAAAAAAAAAPgADAP7/CQAGAAAAAAAAAAAAAAABAAAAJQAAAAAAAAAA
EAAAJwAAAAEAAAD+////AAAAACQAAAD/////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////s
pcEAsUAJBAAA8BK/AAAAAAABEQABAAEABgAAUwkAAA4AamJqYpgKmAoAAAAAAAAAAAAAAAAAAAAA
AAAJBBYAHhYAAPJoAQDyaAEAUwMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//w8AAAAA
AAAAAAD//w8AAAAAAAAAAAD//w8AAAAAAAAAAAAAAAAAAAAAAGwAAAAAAKIAAAAAAAAAogAAAKIA
AAAAAAAAogAAAAAAAACiAAAAAAAAAKIAAAAAAAAAogAAABQAAAAAAAAAAAAAANIAAAAAAAAA0gAA
AAAAAADSAAAAAAAAANIAAAAAAAAA0gAAAAwAAADeAAAAFAAAANIAAAAAAAAAswEAAGACAAD+AAAA
AAAAAP4AAAAAAAAA/gAAAAAAAAD+AAAAAAAAAP4AAAAAAAAA/gAAAAAAAAD+AAAAAAAAAP4AAAAA
AAAAcAEAAAIAAAByAQAAAAAAAHIBAAAAAAAAcgEAAAAAAAByAQAAAAAAAHIBAAAAAAAAcgEAACwA
AAATBAAAIAIAADMGAABiAAAAngEAABUAAAAAAAAAAAAAAAAAAAAAAAAAogAAAAAAAAD+AAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAD+AAAAAAAAAP4AAAAAAAAA/gAAAAAAAAD+AAAAAAAAAJ4BAAAAAAAA
/gAAAAAAAACiAAAAAAAAAKIAAAAAAAAA/gAAAAAAAAAAAAAAAAAAAP4AAAAAAAAA/gAAAAAAAAD+
AAAAAAAAAP4AAAAAAAAA/gAAAAAAAAD+AAAAAAAAAKIAAAAAAAAA/gAAAAAAAACiAAAAAAAAAP4A
AAAAAAAAcAEAAAAAAAAAAAAAAAAAAP4AAAAAAAAAtgAAAA4AAADEAAAADgAAAKIAAAAAAAAAogAA
AAAAAACiAAAAAAAAAKIAAAAAAAAA/gAAAAAAAABwAQAAAAAAAP4AAAByAAAA/gAAAAAAAAAAAAAA
AAAAAHABAAAAAAAAogAAAAAAAACiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAEAAAAAAAAAAAAAAAAAAPIAAAAMAAAAiw1bugAA
AADSAAAAAAAAANIAAAAAAAAA/gAAAAAAAABwAQAAAAAAAAAAAAAAAAAAcAEAAAAAAACzAQAAAAAA
ALMBAAAAAAAAcAEAAAAAAACVBgAAAAAAAP4AAAAAAAAAlQYAAAAAAABwAQAAAAAAAP4AAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABADDAA8A5QAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEZWFy
IFINDWlzIHRoYXQgYSBidWc/PzoNDVItY29kZToNIyBkYXRhIHByZXBhcmF0aW9uDWQuZGF0YTwt
cmVhZC50YWJsZSgiYnVnLnR4dCIsaGVhZGVyPVQpDWQuZGF0YSRmYWN0MTwtYXMuZmFjdG9yKGQu
RjEkZmFjdDEpDWQuZGF0YSRmYWN0MjwtYXMuZmFjdG9yKGQuRjEkZmFjdDIpDWxpYnJhcnkoc3Vy
dml2YWwpDSMgQ294IFByb3BvcnRpb25hbCBIYXphcmQNci5jb3g8LWNveHBoKFN1cnYodGltZSxk
ZWx0YSl+ZmFjdDErZmFjdDIrY292YXIsZGF0YT1kLmRhdGEpDWRyb3AxKHIuY294LHRlc3Q9IkNo
aXNxIikNDW91dHB1dDoNU2luZ2xlIHRlcm0gZGVsZXRpb25zDQ1Nb2RlbDoNU3Vydih0aW1lLCBk
ZWx0YSkgfiBmYWN0MSArIGZhY3QyICsgY292YXINICAgICAgIERmICAgIEFJQyAgICBMUlQgICBQ
cihDaGkpICAgIA08bm9uZT4gICAgODI3LjkwICAgICAgICAgICAgICAgICAgICAgDWZhY3QxICAg
NyA4MjguNDkgIDE0LjU4ICAgMC4wNDE3MiAqICANZmFjdDIgICA0IDg0My41NCAgMjMuNjMgOS40
NTVlLTA1ICoqKg1jb3ZhciAgIDEgODI1Ljk4ICAgMC4wOCAgIDAuNzc3NjkgICAgDS0tLQ1TaWdu
aWYuIGNvZGVzOiAgMCBgKioqJyAwLjAwMSBgKionIDAuMDEgYConIDAuMDUgYC4nIDAuMSBgICcg
MQ0NDWlmIEkgZG8gdGhlIHNhbWUgb24gc3BzcywgdGhlIHAtdmFsdWUgZm9yIGZhY3QxIGlzIDAu
MDIsIGZvciBmYWN0MiwgaXRzIDAuMDAxLiBJcyB0aGF0IGEgYnVnIG9yIGp1c3QgZGlmZmVyZW50
IHByb2NlZHVyZXM/DQ1hbHNvLCBpZiBOQSdzIGFyZSBpbiB0aGUgZmlsZSwgdGhlIHAtdmFsdWVz
IHNlZW0gdG8gYmUgY29tcGxldGVseSBpbXBvc3NpYmxlLi4uDQ1iZXN0DVBpdXMNDQAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAAAiBgAA
JAYAADQGAABQBgAAtgYAAM8GAAAnBwAAMAcAAFIJAABTCQAAAPnx+eri6gDZ1AAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAIT0oHAFFKBwAAEUIqAU9KBwBRSgcAcGgAAAAADzUIgU9KBgBQSgAA
UUoGAAxPSgUAUEoAAFFKBQAADzUIgU9KBABQSgAAUUoEAAxPSgMAUEoAAFFKAwAKAAYAAAcGAAAI
BgAAGQYAABoGAAAiBgAANQYAAFwGAACABgAApAYAALYGAADQBgAADQcAACcHAAAoBwAAMAcAAEYH
AABHBwAATgcAAHgHAACeBwAAxAcAAOoHAAAQCAAANggAADoIAAB5CAAA/QAAAAAAAAAAAAAAAP0A
AAAAAAAAAAAAAAD9AAAAAAAAAAAAAAAA/QAAAAAAAAAAAAAAAP0AAAAAAAAAAAAAAADhAAAAAAAA
AAAAAAAA4QAAAAAAAAAAAAAAAOEAAAAAAAAAAAAAAADhAAAAAAAAAAAAAAAA4QAAAAAAAAAAAAAA
AOEAAAAAAAAAAAAAAADhAAAAAAAAAAAAAAAA4QAAAAAAAAAAAAAAAP0AAAAAAAAAAAAAAAD9AAAA
AAAAAAAAAAAA/QAAAAAAAAAAAAAAAP0AAAAAAAAAAAAAAAD9AAAAAAAAAAAAAAAA/QAAAAAAAAAA
AAAAAP0AAAAAAAAAAAAAAAD9AAAAAAAAAAAAAAAA/QAAAAAAAAAAAAAAAP0AAAAAAAAAAAAAAAD9
AAAAAAAAAAAAAAAA/QAAAAAAAAAAAAAAAP0AAAAAAAAAAAAAAAAAAAAAHAAAMSQANyQAOCQASCQA
DcYmAAzQAqAFcAhACxAO4BCwE4AWUBkgHPAewCEAAAAAAAAAAAAAAAAAAQAAABoABgAABwYAAAgG
AAAZBgAAGgYAACIGAAA1BgAAXAYAAIAGAACkBgAAtgYAANAGAAANBwAAJwcAACgHAAAwBwAARgcA
AEcHAABOBwAAeAcAAJ4HAADEBwAA6gcAABAIAAA2CAAAOggAAHkIAAB6CAAAewgAAPYIAAD3CAAA
RwkAAEgJAABNCQAAUgkAAFMJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAI3kIAAB6CAAAewgA
APYIAAD3CAAARwkAAEgJAABNCQAAUgkAAFMJAAD9AAAAAAAAAAAAAAAA/QAAAAAAAAAAAAAAAP0A
AAAAAAAAAAAAAAD9AAAAAAAAAAAAAAAA/QAAAAAAAAAAAAAAAP0AAAAAAAAAAAAAAAD9AAAAAAAA
AAAAAAAA/QAAAAAAAAAAAAAAAP0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAJHAAfsNAvILDgPSGw
CAcisAgHI5CgBSSQoAUlsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAA8ACgABAGkADwAC
AAgACAAIADQAAEDx/wIANAAAAAYATgBvAHIAbQBhAGwAAAACAAAAFABDShgAT0oIAFBKCABRSggA
bUgJBAAAAAAAAAAAAAAAAAAAAAAAADwAQUDy/6EAPAAAABYARABlAGYAYQB1AGwAdAAgAFAAYQBy
AGEAZwByAGEAcABoACAARgBvAG4AdAAAAAAAAAAAAAAAAAAAAAAAUwMAAAUAABYAAAAA/////wEA
AAAEIP//AQCgepkAAAAAAFMDAAAAAAAAAAAABgAAUwkAAAcAAAAABgAAeQgAAFMJAAAIAAAACgAA
AAAGAABTCQAACQAAAP//AgAAAAsAcABpAHUAcwAgAGsAbwByAG4AZQByACkAVABvAHAAbwBsAGkA
bgBvACAASABEACAAOgBVAHMAZQByAHMAOgBrAG8AcgBuAGUAcgA6AEQAZQBzAGsAdABvAHAAOgBi
AHUAZwAuAGQAbwBjAP9AA4ABAFIDAABSAwAA3GOyAwEAAQBSAwAAAAAAAHgCAAAAAAAAAwADACMD
owICEAAAAAAAAABTAwAAUAAADABAAAAJAAAARwaQAQAAAAICBgMFBAUCAwAAAAMAAAAAAAAAAAAA
AAABAAAAAAAAAFQAaQBtAGUAcwAgAE4AZQB3ACAAUgBvAG0AYQBuAAAANQaQAQIAAAIABQAAAAAA
AAAAAAAQAAAAAAAAAAAAAAAAAACAAAAAAFMAeQBtAGIAbwBsAAAAMwaQAQAAAAILBgQCAgICAgAA
AAMAAAAAAAAAAAAAAAABAAAAAAAAAEEAcgBpAGEAbAAAADsGkAEAAAACAAUAAAAAAAAAAAADAAAA
AAAAAAAAAAAAAQAAAAAAAABIAGUAbAB2AGUAdABpAGMAYQAAAFEgkAFNDwAAAAAAAAAAAAAAAAAD
AAAAAAAAAAAAAAAAAQAAAAAAAABIAGUAbAB2AGUAdABpAGMAYQAtAEIAbwBsAGQAAABUAGkAbQBl
AHMAAABNAJABTQ0AAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAEAAAAAAAAATAB1AGMAaQBkAGEA
RwByAGEAbgBkAGUAAABUAGkAbQBlAHMAAABXAJABTRIAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAA
AAEAAAAAAAAATAB1AGMAaQBkAGEARwByAGEAbgBkAGUALQBCAG8AbABkAAAAVABpAG0AZQBzAAAA
QQaQAQAAAAILBQYCAgIDAgAAAAMAAAAAAAAAAAAAAAABAAAAAAAAAEEAcgBpAGEAbAAgAE4AYQBy
AHIAbwB3AAAAMwaQAQAAAAIABQAAAAAAAAAAAAMAAAAAAAAAAAAAAAABAAAAAAAAAFQAaQBtAGUA
cwAAACAABAAxCIwYAPDQAgAAaAEAAAAAVNxxJlfccSYAAAAAAQADAAAAAAAAAAAAAAABAAEAAAAE
AAMQAQAAAAAAAAAAAAAAAQABAAAAAQAAAAAAAADpAwDwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAClBsAHtAC0AIAAEjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAHICAAAAAAgAAEAA
8BAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//xIAAAAAAAAABgBEAGUAYQByACAA
UgAAAAAAAAALAHAAaQB1AHMAIABrAG8AcgBuAGUAcgALAHAAaQB1AHMAIABrAG8AcgBuAGUAcgAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/v8AAAMKAQAAAAAAAAAAAAAAAAAA
AAAAAQAAAOCFn/L5T2gQq5EIACsns9kwAAAAXAEAABAAAAABAAAAiAAAAAIAAACQAAAAAwAAAKAA
AAAEAAAArAAAAAUAAADAAAAABwAAAMwAAAAIAAAA3AAAAAkAAADwAAAAEgAAAPwAAAAKAAAAGAEA
AAwAAAAkAQAADQAAADABAAAOAAAAPAEAAA8AAABEAQAAEAAAAEwBAAATAAAAVAEAAAIAAAAQJwAA
HgAAAAcAAABEZWFyIFIAZh4AAAABAAAAAGVhch4AAAAMAAAAcGl1cyBrb3JuZXIAHgAAAAEAAAAA
aXVzHgAAAAcAAABOb3JtYWwAch4AAAAMAAAAcGl1cyBrb3JuZXIAHgAAAAIAAAAxAHVzHgAAABQA
AABNaWNyb3NvZnQgV29yZCAxMC4xAEAAAAAA0klrAAAAAEAAAAAAuHDwH8bCAUAAAAAAirpbIMbC
AQMAAAABAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7/AAADCgEAAAAAAAAAAAAAAAAAAAAAAAEAAAAC
1c3VnC4bEJOXCAArLPmuMAAAAPQAAAAMAAAAAQAAAGgAAAAPAAAAcAAAAAUAAACAAAAABgAAAIgA
AAARAAAAkAAAABcAAACYAAAACwAAAKAAAAAQAAAAqAAAABMAAACwAAAAFgAAALgAAAANAAAAwAAA
AAwAAADTAAAAAgAAABAnAAAeAAAABQAAAGV0aHoAAERlAwAAAAEAAAADAAAAAQAAAAMAAAAAAAAA
AwAAAHIJCgALAAAAAAAAAAsAAAAAAAAACwAAAAAAAAALAAAAAAAAAB4QAAABAAAABwAAAERlYXIg
UgAMEAAAAgAAAB4AAAAGAAAAVGl0bGUAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAK
AAAACwAAAP7///8NAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAA/v///xUAAAAWAAAAFwAAABgA
AAAZAAAAGgAAABsAAAD+////HQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAAP7////9////JgAA
AP7////+/////v//////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
/////////////////////////1IAbwBvAHQAIABFAG4AdAByAHkAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWAAUB//////////8DAAAABgkCAAAAAADAAAAAAAAA
RgAAAAAAAAAAAAAAAIDfvdQoxsIBKAAAAIAAAAAAAAAAMQBUAGEAYgBsAGUAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAgD///////////////8A
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAABAAAAAAAABXAG8AcgBkAEQA
bwBjAHUAbQBlAG4AdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGgAC
AQUAAAD//////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeFgAA
AAAAAAUAUwB1AG0AbQBhAHIAeQBJAG4AZgBvAHIAbQBhAHQAaQBvAG4AAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAoAAIBAgAAAAQAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAFAAAAAAQAAAAAAAABQBEAG8AYwB1AG0AZQBuAHQAUwB1AG0AbQBhAHIAeQBJAG4AZgBv
AHIAbQBhAHQAaQBvAG4AAAAAAAAAAAAAADgAAgH///////////////8AAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAABAAAAAAAAABAEMAbwBtAHAATwBiAGoAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgACAQEAAAAGAAAA/////wAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYAAAAAAAAAE8AYgBqAGUAYwB0
AFAAbwBvAGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWAAEA
////////////////AAAAAAAAAAAAAAAAAAAAAAAAAACA373UKMbCAYDfvdQoxsIBAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAD///////////////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAABAAAA/v//////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
/////////////////////wEA/v8CAAEA/////wYJAgAAAAAAwAAAAAAAAEYYAAAATWljcm9zb2Z0
IFdvcmQgRG9jdW1lbnQA/v///05CNlcQAAAAV29yZC5Eb2N1bWVudC44AAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAA

--Apple-Mail-28-953181987--

--Apple-Mail-27-953181986
Content-Disposition: attachment;
	filename=bug.txt
Content-Transfer-Encoding: quoted-printable
Content-Type: text/tab-separated-values;
	x-mac-creator=5843454C;
	x-unix-mode=0644;
	x-mac-type=54455854;
	name="bug.txt"

fact1	fact2	covar	time	delta=0D57	1	71	100	=
0=0D24	27	73	100	0=0D54	42	74	46	1=0D24	=
27	77	100	0=0D60	42	78	100	0=0D33	1	=
78	100	0=0D60	42	79	100	0=0D54	42	79	=
100	0=0D24	1	79	100	0=0D48	27	80	78	=
1=0D54	1	80	100	0=0D54	42	81	34	1=0D24	=
27	81	48	1=0D24	1	81	100	0=0D48	40	=
81	100	0=0D58	1	82	13	1=0D60	27	82	=
100	0=0D24	27	82	100	0=0D60	1	83	14	=
1=0D24	1	83	45	1=0D54	42	83	100	0=0D60	=
42	83	100	0=0D33	1	84	41	1=0D54	42	=
84	45	1=0D60	1	84	74	1=0D57	42	84	=
100	0=0D24	27	84	100	0=0D24	27	84	100	=
0=0D24	42	84	100	0=0D60	42	85	100	0=0D57	=
42	85	100	0=0D54	1	85	100	0=0D58	27	=
86	3	1=0D60	1	86	41	1=0D54	1	86	=
58	1=0D54	1	86	100	0=0D60	27	86	100	=
0=0D24	1	86	100	0=0D24	1	86	100	0=0D24	=
27	87	25	1=0D54	1	87	100	0=0D54	42	=
87	100	0=0D54	42	87	100	0=0D57	27	87	=
100	0=0D54	40	87	100	0=0D24	42	87	100	=
0=0D24	42	87	100	0=0D24	42	87	100	0=0D24	=
40	88	63	1=0D24	42	88	68	1=0D54	42	=
88	89	1=0D54	42	88	100	0=0D54	40	88	=
100	0=0D33	27	88	100	0=0D54	1	88	100	=
0=0D54	40	88	100	0=0D54	27	88	100	0=0D54	=
1	88	100	0=0D24	1	88	100	0=0D24	27	=
88	100	0=0D24	42	88	100	0=0D24	49	88	=
100	0=0D54	40	89	10	1=0D54	1	89	43	=
1=0D60	27	89	58	1=0D60	42	89	100	0=0D54	=
42	89	100	0=0D54	40	89	100	0=0D54	1	=
89	100	0=0D54	40	89	100	0=0D54	49	89	=
100	0=0D54	42	89	100	0=0D54	1	89	100	=
0=0D24	1	89	100	0=0D33	40	89	100	0=0D24	=
49	89	100	0=0D7	42	89	100	0=0D24	27	=
89	100	0=0D24	1	89	100	0=0D33	1	90	=
3	1=0D48	42	90	7	1=0D24	42	90	7	=
1=0D24	1	90	35	1=0D48	1	90	45	1=0D24	=
40	90	52	1=0D60	1	90	58	1=0D58	42	=
90	61	1=0D60	42	90	62	1=0D60	1	90	=
63	1=0D24	42	90	82	1=0D54	27	90	100	=
0=0D60	42	90	100	0=0D54	1	90	100	0=0D54	=
27	90	100	0=0D60	40	90	100	0=0D54	27	=
90	100	0=0D54	40	90	100	0=0D33	40	90	=
100	0=0D24	40	90	100	0=0D58	42	90	100	=
0=0D24	40	90	100	0=0D7	1	90	100	0=0D24	=
1	90	100	0=0D24	49	90	100	0=0D48	27	=
90	100	0=0D54	1	91	1	1=0D48	1	91	=
5	1=0D24	42	91	41	1=0D54	1	91	42	=
1=0D54	27	91	45	1=0D60	27	91	56	1=0D54	=
27	91	67	1=0D57	27	91	69	1=0D24	27	=
91	71	1=0D60	40	91	74	1=0D60	27	91	=
74	1=0D24	27	91	89	1=0D33	40	91	100	=
0=0D60	40	91	100	0=0D54	1	91	100	0=0D54	=
27	91	100	0=0D54	1	91	100	0=0D54	40	=
91	100	0=0D57	1	91	100	0=0D57	42	91	=
100	0=0D54	27	91	100	0=0D54	27	91	100	=
0=0D60	40	91	100	0=0D33	40	91	100	0=0D24	=
42	91	100	0=0D58	42	91	100	0=0D48	1	=
91	100	0=0D48	27	91	100	0=0D24	49	91	=
100	0=0D57	1	92	11	1=0D24	1	92	41	=
1=0D54	27	92	48	1=0D24	27	92	48	1=0D60	=
27	92	66	1=0D60	1	92	78	1=0D54	27	=
92	88	1=0D57	1	92	91	1=0D60	40	92	=
100	0=0D60	1	92	100	0=0D54	1	92	100	=
0=0D54	40	92	100	0=0D57	49	92	100	0=0D54	=
27	92	100	0=0D54	40	92	100	0=0D54	40	=
92	100	0=0D54	40	92	100	0=0D24	42	92	=
100	0=0D24	40	92	100	0=0D24	49	92	100	=
0=0D24	49	92	100	0=0D24	49	92	100	0=0D7	=
27	92	100	0=0D7	49	92	100	0=0D48	1	=
92	100	0=0D24	49	92	100	0=0D58	49	93	=
4	1=0D54	27	93	31	1=0D54	40	93	33	=
1=0D60	27	93	46	1=0D7	40	93	63	1=0D48	=
27	93	71	1=0D60	1	93	72	1=0D60	42	=
93	74	1=0D54	27	93	100	0=0D54	49	93	=
100	0=0D54	40	93	100	0=0D54	27	93	100	=
0=0D54	40	93	100	0=0D57	40	93	100	0=0D33	=
40	93	100	0=0D54	40	93	100	0=0D60	49	=
93	100	0=0D54	49	93	100	0=0D24	42	93	=
100	0=0D24	27	93	100	0=0D24	49	93	100	=
0=0D24	42	93	100	0=0D24	42	93	100	0=0D24	=
1	93	100	0=0D48	40	93	100	0=0D54	27	=
94	41	1=0D24	42	94	75	1=0D60	1	94	=
100	0=0D54	1	94	100	0=0D60	40	94	100	=
0=0D54	1	94	100	0=0D54	49	94	100	0=0D54	=
49	94	100	0=0D54	27	94	100	0=0D54	40	=
94	100	0=0D60	40	94	100	0=0D57	40	94	=
100	0=0D24	49	94	100	0=0D24	49	94	100	=
0=0D24	1	94	100	0=0D24	40	94	100	0=0D24	=
27	94	100	0=0D24	40	94	100	0=0D58	40	=
95	4	1=0D60	1	95	41	1=0D60	27	95	=
54	1=0D54	40	95	71	1=0D54	1	95	76	=
1=0D60	49	95	100	0=0D54	1	95	100	0=0D54	=
27	95	100	0=0D54	49	95	100	0=0D57	42	=
95	100	0=0D54	49	95	100	0=0D33	1	95	=
100	0=0D33	49	95	100	0=0D7	42	95	100	=
0=0D58	42	95	100	0=0D24	49	95	100	0=0D24	=
42	95	100	0=0D54	42	96	63	1=0D60	1	=
96	76	1=0D54	49	96	91	1=0D60	40	96	=
100	0=0D60	27	96	100	0=0D60	40	96	100	=
0=0D60	27	96	100	0=0D54	49	96	100	0=0D54	=
1	96	100	0=0D54	27	96	100	0=0D54	40	=
96	100	0=0D54	49	96	100	0=0D54	49	96	=
100	0=0D57	49	96	100	0=0D57	49	96	100	=
0=0D60	49	96	100	0=0D54	42	96	100	0=0D24	=
49	96	100	0=0D24	49	96	100	0=0D33	49	=
96	100	0=0D48	42	96	100	0=0D24	27	96	=
100	0=0D24	42	96	100	0=0D24	49	96	100	=
0=0D24	42	96	100	0=0D60	40	97	58	1=0D24	=
42	97	71	1=0D24	42	97	77	1=0D54	40	=
97	100	0=0D54	49	97	100	0=0D60	49	97	=
100	0=0D60	49	97	100	0=0D60	27	97	100	=
0=0D54	49	97	100	0=0D48	27	97	100	0=0D24	=
49	97	100	0=0D48	49	97	100	0=0D60	49	=
98	43	1=0D60	27	98	60	1=0D60	27	98	=
91	1=0D33	27	98	100	0=0D54	27	98	100	=
0=0D54	40	98	100	0=0D54	40	98	100	0=0D60	=
49	98	100	0=0D54	49	98	100	0=0D54	49	=
98	100	0=0D24	49	98	100	0=0D24	49	98	=
100	0=0D54	49	99	87	1=0D54	40	99	90	=
1=0D60	49	99	100	0=0D54	49	99	100	0=0D54	=
49	99	100	0=0D60	49	100	100	0=0D33	49	=
100	100	0=0D24	42	100	100	0=0D54	49	101	=
100	0=0D54	40	101	100	0=0D60	49	101	100	=
0=0D60	49	102	100	0=

--Apple-Mail-27-953181986
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed



-----
Pius Korner-Nievergelt
Ecology & Evolution
ETH-Zentrum NW
8092 Zurich
Switzerland

phone (w) ++1 6336035
phone (h) ++1 7411646
fax (w) ++1 6321271
email korner@eco.umnw.ethz.ch
--Apple-Mail-27-953181986--


From p.dalgaard@biostat.ku.dk  Mon Jan 27 17:40:03 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Mon Jan 27 17:40:03 2003
Subject: [Rd] survival bug? (PR#2499)
In-Reply-To: <200301271628.RAA07676@pubhealth.ku.dk>
References: <200301271628.RAA07676@pubhealth.ku.dk>
Message-ID: <x2adhmbl6q.fsf@biostat.ku.dk>

korner@eco.umnw.ethz.ch writes:

> --Apple-Mail-27-953181986
> Content-Transfer-Encoding: 7bit
> Content-Type: text/plain;
> 	charset=US-ASCII;
> 	format=flowed
> 
> a possible bug with survival analysis - either in R or in SPSS...
> 
> find more details in bug.doc, and the data in bug.txt
> 
> best
> Pius Korner


Attachments do not survive the bug repository gateway and some of us
will have difficulty reading proprietary formats. Please give us
a cleartext explanation of the problem, possibly with the data at a
web address.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From bolker@zoo.ufl.edu  Mon Jan 27 18:50:04 2003
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon Jan 27 18:50:04 2003
Subject: [Rd] help page for anova.glm/variation between S-PLUS and R behavior
Message-ID: <Pine.LNX.4.44.0301271249080.17354-100000@bolker.zoo.ufl.edu>

   When using test="F" in stat.anova() / anova.glm(), R uses the assumed 
dispersion parameter for the specified family (e.g. scale=1 for binomial), 
while S-PLUS automatically uses the estimated dispersion parameter 
(residual deviance/residual df).  I think there are good reasons for the 
behavior in R -- it fits with the "you get what you actually asked for" 
philosophy -- and there are hints in the documentation (anova.glm(): "for 
[models] with dispersion estimated by moments ... the F test is most 
appropriate"; family/binomial(): "The behaviour of S-PLUS is closer to the 
quasi- variants").
   Would R-core consider it reasonable to add yet another sentence to the
anova.glm() documentation, e.g. after the "... F test is most appropriate"  
sentence above, adding: "(Note: unlike R, S-PLUS automatically uses the
moment-estimated dispersion for F-tests even for the binomial and Poisson
families:  see ?quasibinomial.)"  ?

  Ben Bolker

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


From ripley@stats.ox.ac.uk  Mon Jan 27 19:16:16 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon Jan 27 19:16:16 2003
Subject: [Rd] help page for anova.glm/variation between S-PLUS and R
 behavior
In-Reply-To: <Pine.LNX.4.44.0301271249080.17354-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.44.0301271804320.17520-100000@gannet.stats>

Not really!

I don't think it is our job to describe the inconsistencies of S-PLUS,
especially since that might change from version to version. It would be
really messy, as S-PLUS ignores the scale for the Chisq test (which seems
perverse), and lacks the dispersion argument.

On Mon, 27 Jan 2003, Ben Bolker wrote:

> 
>    When using test="F" in stat.anova() / anova.glm(), R uses the assumed 
> dispersion parameter for the specified family (e.g. scale=1 for binomial), 
> while S-PLUS automatically uses the estimated dispersion parameter 
> (residual deviance/residual df).  I think there are good reasons for the 
> behavior in R -- it fits with the "you get what you actually asked for" 
> philosophy -- and there are hints in the documentation (anova.glm(): "for 
> [models] with dispersion estimated by moments ... the F test is most 
> appropriate"; family/binomial(): "The behaviour of S-PLUS is closer to the 
> quasi- variants").
>    Would R-core consider it reasonable to add yet another sentence to the
> anova.glm() documentation, e.g. after the "... F test is most appropriate"  
> sentence above, adding: "(Note: unlike R, S-PLUS automatically uses the
> moment-estimated dispersion for F-tests even for the binomial and Poisson
> families:  see ?quasibinomial.)"  ?
> 
>   Ben Bolker
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From bolker@zoo.ufl.edu  Mon Jan 27 19:27:03 2003
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon Jan 27 19:27:03 2003
Subject: [Rd] help page for anova.glm/variation between S-PLUS and R
 behavior
In-Reply-To: <Pine.LNX.4.44.0301271804320.17520-100000@gannet.stats>
Message-ID: <Pine.LNX.4.44.0301271330110.18915-100000@bolker.zoo.ufl.edu>

  OK, then, what about adding a note to section 3.3.3 (Other differences
between R and S-PLUS) of the R FAQ ?  I just want to minimize confusion 
for people crossing over -- at least point to the fact that S-PLUS handles 
it differently.

  Ben

On Mon, 27 Jan 2003 ripley@stats.ox.ac.uk wrote:

> Not really!
> 
> I don't think it is our job to describe the inconsistencies of S-PLUS,
> especially since that might change from version to version. It would be
> really messy, as S-PLUS ignores the scale for the Chisq test (which seems
> perverse), and lacks the dispersion argument.
> 
> On Mon, 27 Jan 2003, Ben Bolker wrote:
> 
> > 
> >    When using test="F" in stat.anova() / anova.glm(), R uses the assumed 
> > dispersion parameter for the specified family (e.g. scale=1 for binomial), 
> > while S-PLUS automatically uses the estimated dispersion parameter 
> > (residual deviance/residual df).  I think there are good reasons for the 
> > behavior in R -- it fits with the "you get what you actually asked for" 
> > philosophy -- and there are hints in the documentation (anova.glm(): "for 
> > [models] with dispersion estimated by moments ... the F test is most 
> > appropriate"; family/binomial(): "The behaviour of S-PLUS is closer to the 
> > quasi- variants").
> >    Would R-core consider it reasonable to add yet another sentence to the
> > anova.glm() documentation, e.g. after the "... F test is most appropriate"  
> > sentence above, adding: "(Note: unlike R, S-PLUS automatically uses the
> > moment-estimated dispersion for F-tests even for the binomial and Poisson
> > families:  see ?quasibinomial.)"  ?
> > 
> >   Ben Bolker
> > 
> > 
> 
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


From Kurt.Hornik@wu-wien.ac.at  Mon Jan 27 23:31:03 2003
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon Jan 27 23:31:03 2003
Subject: [Rd] rmultinom() -- how \\ via own C code?
In-Reply-To: <Pine.LNX.4.44.0301271121560.14293-100000@bolker.zoo.ufl.edu>
References: <15925.13729.635531.38039@gargle.gargle.HOWL>
 <Pine.LNX.4.44.0301271121560.14293-100000@bolker.zoo.ufl.edu>
Message-ID: <15925.44341.656262.735049@mithrandir.hornik.net>

>>>>> Ben Bolker writes:

>   I use multivariate random values frequently -- multinomial (using
> code contributed to the R-list by Ian Wilson), Dirichlet (using ratios
> of gamma/sum(gamma)), multivariate normal (using mvrnorm() from MASS,
> which I wish were called rmvnorm instead!)  I have functions for them
> in some of my home-brewed packages.  I would vote for adding some of
> them to the recommended packages.

>   Many multinomial distributions have matrices or vectors of
> arguments: if one wants to generate multiple variates with different
> parameters, how should these arguments be stacked?  e.g. for
> multinomial deviates, should one be able to specify an m by p matrix
> for "prob" where m is a divisor of n?

I have recently added code to r-devel to generate random two-way tables
with given row and column totals.  This works as

	r2dtable(n, r, c)

where r and c are the row and column totals, and returns a *list* of
length n.  If each draw gives a random 'vector' one can stack the
results into a matrix as does e.g. mvrnorm in MASS, or one could return
a list; in the general case, I think we always want a list of random
objects.

>   The other minor point is that I usually give d- and r-functions for
> these distributions but not p- and q- (since I don't really want to
> think about defining, much less computing, multidimensional cumulative
> distributions ...)

[Although e.g. simulating the distribution of random tables with given
marginals and doing computations on that would be rather nice ...]

Best
-k


From hb@maths.lth.se  Tue Jan 28 02:29:02 2003
From: hb@maths.lth.se (Henrik Bengtsson)
Date: Tue Jan 28 02:29:02 2003
Subject: [Rd] Name spaces and behavior of overloaded functions?
Message-ID: <000301c2c66c$95afa8c0$7341a8c0@alpha.wehi.edu.au>

First of all, I haven't followed the discussion about the new/upcoming
name space support in R so I do not know the purposes or requirements
for it, neither its design, and I can only guess. I found the (initial?)
notes by Luke Tierney on the Developers Page. Are there any other
references?

Since it seems that the current implementation (R v1.6.2) of name spaces
is a "trial" version and not really officially announced I though it
would be better to ask my questions on this list:

hist() is internally creating an object of class 'histogram' and calling
plot() on this object, which will (through the S3/UseMethod mechanism)
call plot.histogram(). In pre Rv1.6.x I used to overload the
plot.histogram() with my own backward compatible version, which added
two arguments specifying the width and offset of the bars, making it
easier to have two  or more histograms in the same plot.

However, I noticed that since R v1.6.x the hist() -> plot() ->
plot.histogram() sequence is now restricted to hist() -> plot() ->
base::plot.histogram() (not explicitly). Where ever I put my redefined
plot.histogram() function, i.e. before the 'base' package in the
search() path, including .GlobalEnv, it is ignored when calling hist().

Question 1: Is this due to the new name space support?

Question 2: Is this the intendent behavior? 

Question 3: If yes of Q2, then should plot.histogram() be considered a
private function of the 'base' package?

Of course it works if I use h <- hist(..., plot=FALSE) and call plot(h,
...) explicitly. However, I am not really interested in a workaround for
this specific problem, but more in how name spaces are going to change R
and if there is a well defined plan/specification at the moment.

Best wishes

Henrik Bengtsson

Home: 201/445 Royal Parade, 3052 Parkville
Office: Bioinformatics, WEHI, Parkville
+61 (0)412 269 734 (cell), +61 (0)3 9345 2324 (lab),
+1 (508) 464 6644 (global fax)
hb@maths.lth.se, http://www.maths.lth.se/~hb/
Time zone: +11h UTC (Sweden +1h UTC, Calif. -8h UTC)


From Michael.Jacob@bruker-axs.de  Tue Jan 28 15:28:02 2003
From: Michael.Jacob@bruker-axs.de (Michael.Jacob@bruker-axs.de)
Date: Tue Jan 28 15:28:02 2003
Subject: [Rd] Timezone (PR#2501)
Message-ID: <200301281412.PAA18847@pubhealth.ku.dk>

Full_Name: Michael Jacob
Version: 1.6.2
OS: Win 2000 SP3 US
Submission from: (NULL) (217.110.64.179)


I reported in #1332 that at least on my computer, julian() does not work because
of the parsing of the default argument 'origin'.
It seems that it works, when I set the TZ environment variable.
I tried setting it to 'Europe/Berlin', 'MET' and 'MST'.
All works, but now Sys.time() reports the time one hour off, e.g system time is
15:10 (3:10 pm), and calling Sys.time() yields 
[1] "2003-01-28 14:10:25 Eur"    (here TZ=Europe/Berlin)

Does anybody know, what value TZ has to be, so that this works?

Regards,

Michael


From louisept@pweh.com  Wed Jan 29 01:09:03 2003
From: louisept@pweh.com (louisept@pweh.com)
Date: Wed Jan 29 01:09:03 2003
Subject: [Rd] The function 'any' (PR#2503)
Message-ID: <200301290009.BAA23221@pubhealth.ku.dk>

Full_Name: Paul Louisell
Version: 1.6.2
OS: Windows NT
Submission from: (NULL) (192.249.47.9)


There is a slight bug in the function 'any'. Given a logical vector (possibly
including values of 'NA'), the default action of any should be as follows:

(i) at least one value = T should return T
(ii) NO values = T
     (a) at least one value = 'NA' should return 'NA'
     (b) all values = F should return F

The problem is that the default action of 'any' is using the following rule:

(i) at least one value = 'NA' returns 'NA'
(ii) NO values = 'NA'
     (a) at least one value = T returns T
     (b) all values = F returns F

This is illustrated in the code below

> test=1:5
> is.na(test)[5]=T
> test
[1]  1  2  3  4 NA
> any(test==3)
[1] NA
> any(test==5)
[1] NA
> any(test[1:4]==5)
[1] FALSE
> any(test[1:4]==3)
[1] TRUE

The bug is easily fixed by the user, but someone may want to correct this if
he/she can find time.


From tlumley@u.washington.edu  Wed Jan 29 01:23:02 2003
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed Jan 29 01:23:02 2003
Subject: [Rd] The function 'any' (PR#2503)
In-Reply-To: <200301290009.BAA23221@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0301281615080.157244-100000@homer04.u.washington.edu>

On Wed, 29 Jan 2003 louisept@pweh.com wrote:

> Full_Name: Paul Louisell
> Version: 1.6.2
> OS: Windows NT
> Submission from: (NULL) (192.249.47.9)
>
>
> There is a slight bug in the function 'any'. Given a logical vector (possibly
> including values of 'NA'), the default action of any should be as follows:
>
> (i) at least one value = T should return T
> (ii) NO values = T
>      (a) at least one value = 'NA' should return 'NA'
>      (b) all values = F should return F
>
> The problem is that the default action of 'any' is using the following rule:
>
> (i) at least one value = 'NA' returns 'NA'
> (ii) NO values = 'NA'
>      (a) at least one value = T returns T
>      (b) all values = F returns F
>

Yes, and the wrong logic is sitting there clearly in logic.c

    if (PRIMVAL(op) == 1) {	/* ALL */
	LOGICAL(s)[0] = haveNA ? NA_LOGICAL : !haveFalse;
    } else {			/* ANY */
	LOGICAL(s)[0] = haveNA ? NA_LOGICAL : haveTrue;
    }

Should be easy to fix.

	-thomas


From allegro1978@hotmail.com  Wed Jan 29 11:56:05 2003
From: allegro1978@hotmail.com (Steve S)
Date: Wed Jan 29 11:56:05 2003
Subject: [Rd] (no subject)
Message-ID: <F488yfogkJXrRjbDt3H0000020f@hotmail.com>

Dear All,

Has there been a function inspect (in S+) being installed in R? It appears 
this question was asked before but at that time it was not available?

Thank you for your attention.

Steve.


From jussi.makinen@valtiokonttori.fi  Wed Jan 29 12:56:02 2003
From: jussi.makinen@valtiokonttori.fi (jussi.makinen@valtiokonttori.fi)
Date: Wed Jan 29 12:56:02 2003
Subject: [Rd] Add-on bug? Win fracdiff failed from http://www.stat.unipg.it/stat/statlib/R/CRAN/ (PR#2504)
Message-ID: <200301291155.MAA29857@pubhealth.ku.dk>

Full_Name: Jussi Mäkinen
Version: 1.6.2
OS: Win2000
Submission from: (NULL) (193.210.145.2)


I tried to download fracdiff from http://www.stat.unipg.it/stat/statlib/R/CRAN/
but I got the messages box:

The procedure entry point daxpy_ could not be located in the dynamic link
library R.dll

and the following lines to RGui:

Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library
"C:/PROGRA~1/R/rw1062/library/fracdiff/libs/fracdiff.dll":
  LoadLibrary failure:  The specified procedure could not be found.
In addition: Warning message: 
The use of _ is deprecated: you will be warned only once per session 
Error in library(fracdiff) : .First.lib failed

when trying to command library(fracdiff)

INSTALL went without problems (I always got a message: "`pgks' does not exist:
skipping", though. But the `pgks' still works in R)

C:/PROGRA~1/R/rw1062/library/fracdiff/libs/fracdiff.dll seems to be in place and
has size of 31,232 bytes.

Running command dyn.load("C://PROGRA~1//R//rw1062//library//fracdiff//libs//fracdiff.dll")
gives the same messages.

I downloaded fracdiff from http://cran.at.r-project.org/ and it worked (same
size 31,232 bytes).

Thx. for great software,

Jussi Mäkinen

version
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    6.2            
year     2003           
month    01             
day      10             
language R


From ligges@statistik.uni-dortmund.de  Wed Jan 29 13:22:06 2003
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Wed Jan 29 13:22:06 2003
Subject: [Rd] Add-on bug? Win fracdiff failed from http://www.stat.unipg.it/stat/statlib/R/CRAN/ (PR#2505)
Message-ID: <200301291219.NAA00389@pubhealth.ku.dk>

jussi.makinen@valtiokonttori.fi wrote:
> Full_Name: Jussi M?kinen
> Version: 1.6.2
> OS: Win2000
> Submission from: (NULL) (193.210.145.2)
> 
> 
> I tried to download fracdiff from http://www.stat.unipg.it/stat/statlib/R/CRAN/
> but I got the messages box:


That's not a current mirror of CRAN (see the CRAN Master for recent 
mirrors), it's last update seems to be dated 18-Dec-2001.
Thus you got an extremely outdated version of that package. Try to 
download again from a recent mirror.

Uwe Ligges


> The procedure entry point daxpy_ could not be located in the dynamic link
> library R.dll
> 
> and the following lines to RGui:
> 
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>         unable to load shared library
> "C:/PROGRA~1/R/rw1062/library/fracdiff/libs/fracdiff.dll":
>   LoadLibrary failure:  The specified procedure could not be found.
> In addition: Warning message: 
> The use of _ is deprecated: you will be warned only once per session 
> Error in library(fracdiff) : .First.lib failed
> 
> when trying to command library(fracdiff)
> 
> INSTALL went without problems (I always got a message: "`pgks' does not exist:
> skipping", though. But the `pgks' still works in R)
> 
> C:/PROGRA~1/R/rw1062/library/fracdiff/libs/fracdiff.dll seems to be in place and
> has size of 31,232 bytes.
> 
> Running command dyn.load("C://PROGRA~1//R//rw1062//library//fracdiff//libs//fracdiff.dll")
> gives the same messages.
> 
> I downloaded fracdiff from http://cran.at.r-project.org/ and it worked (same
> size 31,232 bytes).
> 
> Thx. for great software,
> 
> Jussi M?kinen
> 
> version
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    1              
> minor    6.2            
> year     2003           
> month    01             
> day      10             
> language R
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel


From luke@stat.uiowa.edu  Wed Jan 29 13:36:21 2003
From: luke@stat.uiowa.edu (Luke Tierney)
Date: Wed Jan 29 13:36:21 2003
Subject: [Rd] Name spaces and behavior of overloaded functions?
In-Reply-To: <000301c2c66c$95afa8c0$7341a8c0@alpha.wehi.edu.au>
Message-ID: <Pine.LNX.4.44.0301290602440.13014-100000@nokomis2.stat.umn.edu>

On Tue, 28 Jan 2003, Henrik Bengtsson wrote:

> First of all, I haven't followed the discussion about the new/upcoming
> name space support in R so I do not know the purposes or requirements
> for it, neither its design, and I can only guess. I found the (initial?)
> notes by Luke Tierney on the Developers Page. Are there any other
> references?

Not yet.

> Since it seems that the current implementation (R v1.6.2) of name spaces
> is a "trial" version and not really officially announced I though it
> would be better to ask my questions on this list:
> 
> hist() is internally creating an object of class 'histogram' and calling
> plot() on this object, which will (through the S3/UseMethod mechanism)
> call plot.histogram(). In pre Rv1.6.x I used to overload the
> plot.histogram() with my own backward compatible version, which added
> two arguments specifying the width and offset of the bars, making it
> easier to have two  or more histograms in the same plot.
> 
> However, I noticed that since R v1.6.x the hist() -> plot() ->
> plot.histogram() sequence is now restricted to hist() -> plot() ->
> base::plot.histogram() (not explicitly). Where ever I put my redefined
> plot.histogram() function, i.e. before the 'base' package in the
> search() path, including .GlobalEnv, it is ignored when calling hist().
> 
> Question 1: Is this due to the new name space support?

Yes

> Question 2: Is this the intendent behavior? 

Yes

> Question 3: If yes of Q2, then should plot.histogram() be considered a
> private function of the 'base' package?

No, it is public, but it is defined in 'base', as is 'hist'.

With any function call the search of the function begins at the
environment of the call site.  The first function found is used.  When
a call site is in a function defined in a name space (the call to plot
is in the function hist defined in 'base') and that name space
provides a definition of the function, then that definition is used.
The assumption is that the package authors knew what they were doing
when they created the two functions together.  Since S3 method
dispatch (simplified a bit) turns a call of plot(x) with
class(x)=="histogram" into a call of plot.histogram(x), it follows the
same rules.

If for functions in package 'base' you feel you have a definiiton that
is more suitable for you than the one provided then you can arrange
for your own version to be used but you have to work at it: you have
to explicitly assign your version into the 'base' environment.  This
may be made a bit more difficult in the future by locking bindings in
'base', but it will pobably always be possible at least for most
functions.

S3-style method dispatch is not a good fit with name spaces, and there
are scenarios where the current approach to dispatching could not find
any method even though one exists in a place that would seem
reasonable.  One way of dealing with this under consideration is to
provide an optional explicit method registration mechanism to augment
the existing dispatch process.  The current experimental
implementation checks for explicitly registered methods after doing
the usual search.  This was done to minimize changes from the current
setup.  But it may make sense to think about checking for explicit
registrations first.  This would allow you to use that mechanism to
register your plot.histogram method.  It is likely that by default
there will be at least a warning when attempting to replace an already
registered method.

Hope that helps.

luke

-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From ripley@stats.ox.ac.uk  Wed Jan 29 13:38:31 2003
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed Jan 29 13:38:31 2003
Subject: [Rd] Re: (PR#2504) User error in trying a non-CRAN site which is way old
In-Reply-To: <200301291155.MAA29857@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.44.0301291213220.1364-100000@gannet.stats.ox.ac.uk>

The version on the master CRAN site is fine.  The version on that site is
over two years' old!

What has http://www.stat.unipg.it/stat/statlib/R/CRAN/ got to do with
R-bugs?  It is not part of CRAN.  Report problems to that site if you wish,
but don't waste the R-developers' time.  It is this sort of behaviour which
sometimes make me wish to withdraw all support from Windows R users.

Note that the rw-FAQ does point out that you should recompile packages from
source if you have problems, and that would have solved this for you, I
expect.

On Wed, 29 Jan 2003 jussi.makinen@valtiokonttori.fi wrote:

> Full_Name: Jussi Mäkinen
> Version: 1.6.2
> OS: Win2000
> Submission from: (NULL) (193.210.145.2)
>
>
> I tried to download fracdiff from http://www.stat.unipg.it/stat/statlib/R/CRAN/
> but I got the messages box:
>
> The procedure entry point daxpy_ could not be located in the dynamic link
> library R.dll
>
> and the following lines to RGui:
>
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library
> "C:/PROGRA~1/R/rw1062/library/fracdiff/libs/fracdiff.dll":
>   LoadLibrary failure:  The specified procedure could not be found.
> In addition: Warning message:
> The use of _ is deprecated: you will be warned only once per session
> Error in library(fracdiff) : .First.lib failed
>
> when trying to command library(fracdiff)
>
> INSTALL went without problems (I always got a message: "`pgks' does not exist:
> skipping", though. But the `pgks' still works in R)
>
> C:/PROGRA~1/R/rw1062/library/fracdiff/libs/fracdiff.dll seems to be in place and
> has size of 31,232 bytes.
>
> Running command dyn.load("C://PROGRA~1//R//rw1062//library//fracdiff//libs//fracdiff.dll")
> gives the same messages.
>
> I downloaded fracdiff from http://cran.at.r-project.org/ and it worked (same
> size 31,232 bytes).
>
> Thx. for great software,
>
> Jussi Mäkinen
>
> version
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    6.2
> year     2003
> month    01
> day      10
> language R
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Mark.Bravington@csiro.au  Thu Jan 30 06:17:03 2003
From: Mark.Bravington@csiro.au (Mark.Bravington@csiro.au)
Date: Thu Jan 30 06:17:03 2003
Subject: [Rd] print.default and attributes
Message-ID: <A8877251964B294BAB5BA1FC58B43FED025B44A4@molly.tas.csiro.au>

When something gets printed by the "print.default" function, any extra
attributes are printed without regard to their class attribute (if any). For
example:

> x <- 1:3
> attr( x, 'other') <- factor( c( 'cat', 'dog'))
> attr( x, 'other')
[1] cat dog
Levels: cat dog
> x
[1] 1 2 3
attr(,"other")
[1] 1 2

which is perhaps surprising. Would it be preferable for "print.default" to
call the generic "print" for each attribute, so that any class-specific
print methods are respected?

BTW, the same applies to "print.matrix" (which doesn't rely on "print"), and
perhaps to other print methods. Of course, it will also apply to any
class-specific print method which invokes "print" or "NextMethod", too.

[ Lest this seem incredibly arcane, here's some context: I'm experimenting
(as others have done) with storing documentation in a "doc" attribute. I'd
like to be able to give the "doc" attribute a class so I can control how
it's displayed by a default print, without having to derive a new class &
print method for the object-being-documented. ]

cheers
Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au


From ripley@stats.ox.ac.uk  Thu Jan 30 08:43:03 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu Jan 30 08:43:03 2003
Subject: [Rd] print.default and attributes
In-Reply-To: <A8877251964B294BAB5BA1FC58B43FED025B44A4@molly.tas.csiro.au>
Message-ID: <Pine.LNX.4.44.0301300737300.27042-100000@gannet.stats>

On Thu, 30 Jan 2003 Mark.Bravington@csiro.au wrote:

> When something gets printed by the "print.default" function, any extra
> attributes are printed without regard to their class attribute (if any). For
> example:
> 
> > x <- 1:3
> > attr( x, 'other') <- factor( c( 'cat', 'dog'))
> > attr( x, 'other')
> [1] cat dog
> Levels: cat dog
> > x
> [1] 1 2 3
> attr(,"other")
> [1] 1 2
> 
> which is perhaps surprising. Would it be preferable for "print.default" to
> call the generic "print" for each attribute, so that any class-specific
> print methods are respected?

That does seem unintentional, and not what S does.

> BTW, the same applies to "print.matrix" (which doesn't rely on "print"), and
> perhaps to other print methods. Of course, it will also apply to any
> class-specific print method which invokes "print" or "NextMethod", too.

In R-devel print.matrix *does* rely on print, and *is* a print method.
But the old-style prmatrix aka print.matrix does not print attributes 
normally:

> x <- matrix(1:4, 2, 2)
> attr( x, 'other') <- factor( c( 'cat', 'dog'))
> prmatrix(x)
     [,1] [,2]
[1,]    1    3
[2,]    2    4

So how did you make it print attributes?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hb@maths.lth.se  Thu Jan 30 09:26:05 2003
From: hb@maths.lth.se (Henrik Bengtsson)
Date: Thu Jan 30 09:26:05 2003
Subject: Suggestion for improvement of the plot.histogram() function (Was: FW: [Rd] Name spaces and behavior of overloaded functions?)
Message-ID: <000e01c2c839$2a65a230$7341a8c0@alpha.wehi.edu.au>

On request from Martin Maechler I suggest the following improvement to
base::plot.histogram(), which makes it possible to plot several
histograms next to each other in the same plot by making them sharing
space. You can set the width and the offset the bars should have.
Example:

x1 <- rnorm(1000,  0.4, 0.8)
x2 <- rnorm(1000,  0.0, 1.0)
x3 <- rnorm(1000, -1.0, 1.0)
hist(x1, width=0.33, offset=0.00, col="blue", xlim=c(-4,4),
main="Histogram of x1, x2 & x3", xlab="x1 - blue, x2 - red, x3 - green")
hist(x2, width=0.33, offset=0.33, col="red", add=TRUE) hist(x3,
width=0.33, offset=0.66, col="green", add=TRUE)

More info and code can be found (for a couple of weeks) at 

  http://www.maths.lth.se/help/R/plot.histogram/

Best wishes

Henrik Bengtsson


From ripley@stats.ox.ac.uk  Thu Jan 30 10:54:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu Jan 30 10:54:02 2003
Subject: [Rd] printing of attributes does not dispatch on class (PR#2506)
Message-ID: <200301300953.KAA10841@pubhealth.ku.dk>

Forwarded to R-bugs to log this.  It may or may not be a bug, but it is a 
desirable enhancement, if a tricky one.

Note that this is not simple: in R-devel it may be show() not print()  
that was called (and needs to be dispatched on, although print.default
will do that) and the print functionality can be called directly from C
code, e.g. by PrintValue.

Also, auto-printing as in the example does not call print.default at all
(put a trace on it to see). but the C function PrintValueEnv()!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

---------- Forwarded message ----------
Date: Thu, 30 Jan 2003 16:15:14 +1100
From: Mark.Bravington@csiro.au
To: r-devel@stat.math.ethz.ch
Subject: [Rd] print.default and attributes

When something gets printed by the "print.default" function, any extra
attributes are printed without regard to their class attribute (if any). For
example:

> x <- 1:3
> attr( x, 'other') <- factor( c( 'cat', 'dog'))
> attr( x, 'other')
[1] cat dog
Levels: cat dog
> x
[1] 1 2 3
attr(,"other")
[1] 1 2

which is perhaps surprising. Would it be preferable for "print.default" to
call the generic "print" for each attribute, so that any class-specific
print methods are respected?


From Friedrich.Leisch@univie.ac.at  Thu Jan 30 12:30:04 2003
From: Friedrich.Leisch@univie.ac.at (Friedrich.Leisch@univie.ac.at)
Date: Thu Jan 30 12:30:04 2003
Subject: [Rd] Re: [R] calling sweave function from latex
In-Reply-To: <20030129121729.671e9344.fharrell@virginia.edu>
References: <3E372A6F.50900@niwa.cri.nz>
 <15927.43499.805617.950194@galadriel.ci.tuwien.ac.at>
 <20030129121729.671e9344.fharrell@virginia.edu>
Message-ID: <15929.3238.320497.131855@ci.tuwien.ac.at>

[ Moved to r-devel ]


>>>>> On Wed, 29 Jan 2003 12:17:29 -0500,
>>>>> Frank E Harrell (FEH) wrote:


  > Before I discovered Sweave, I used methods that are detailed in Chapter 13 of http://hesweb1.med.virginia.edu/biostat/s/doc/splus.pdf for managing large analysis projects.  The do function in the Hmisc library (not yet tested for R) was created to manage code chunks that each create their own series of output listings and postscript graphics files.  For conditional execution of chunks, it helps me to set flags at the start of the document so that I don't have to hunt for any flags or if statements.  I do things like

  > importdata    <- FALSE
  > fitmodel      <- FALSE
  > validatemodel <- TRUE

  > if(importdata) {
  >  ...
  > }
  > if(fitmodel) {
  >  ...
  > }
  > if(validatemodel) {
  >  ... time-consuming bootstrap code ...
  > }

  > or use

  > do(importdata, { ... code chunk ...})
  > do(fitmodel, {... code chunk ...})
  > do(validatemodel, {... code chunk ...})

  > where the keys such as 'importdata' are used as root names of files created by that code chunk.  The 'validatemodel' chunk creates by default 'validatemodel.lst' to contain the printed output, and files such as 'validatemodel.ps' for graphics.

  > It would be nice if Sweave could implement this type of model.  In LaTeX I find it invaluable to set flags for conditional text insertion using \def and \ifnum \fi.  For a report, the text might always be included but S chunks only condionally run, with previous output used when a chunk is bypassed.

  > Please take a look at Chapter 13 of the above referenced document if you have time, to see if it gives you any ideas worth pursuing.

Thanks a lot, I'll add it to my pile of weekend reading material.

The code you give above looks similar to what I have in mind. Each
chunk can list previous chunks that it depends on (by default all
previous chunks). Sweave will only re-run the chunk if (the parsed
version of) the code has changed, and otherwise re-use the existing
material. Additionally I want to have a hook that allows turning off
evaluation based on chunk names.

I already have an S4 representation of parsed Sweave files, currently
I am working on a representation of the evaluated object (and
functions to get it).

Best,
Fritz

-- 
-------------------------------------------------------------------
                        Friedrich Leisch 
Institut für Statistik & DSS                Tel: (+43 1) 4277 38613
Universität Wien  		            Fax: (+43 1) 4277 38639
Universitätsstraße 5                  Friedrich.Leisch@univie.ac.at
A-1010 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
-------------------------------------------------------------------


From bates@stat.wisc.edu  Thu Jan 30 17:34:03 2003
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu Jan 30 17:34:03 2003
Subject: [Rd] Re: Matrix Package for R
In-Reply-To: <20030130161654.41276.qmail@web21406.mail.yahoo.com>
References: <20030130161654.41276.qmail@web21406.mail.yahoo.com>
Message-ID: <6risw6k37w.fsf@bates4.stat.wisc.edu>

You will need both the Basic Linear Algebra Subroutines (BLAS) and a
version of Lapack to install the Matrix package.  I'm not sure if
pre-compiled versions are available for Solaris 7.  I believe that is
a rather old version of the Sun OS.

After R-1.7.0 is released in April, 2003 it should be possible to use
the Matrix package on any platform with R as Brian Ripley has
incorporated Lapack sources into the development version of R.

I am sending a copy of this reply to the R-devel@R-project.org list in
case someone reading that list can advise you on how to install Lapack
and BLAS on Solaris 7

Tao Hou <thou_69@yahoo.com> writes:

> I try to install Matrix package for R on my Sun Machine. The OS is Solaris 7
> Sparc Version.
> 
> I conduct the following error message:
> 
> bash-2.05# R INSTALL Matrix_0.3-21.tar.gz 
> * Installing *source* package 'Matrix' ...
> checking for gcc... gcc
...
> ng for sgemm_... no
> checking for ATL_xerbla in -latlas... no
> checking for sgemm_ in -lblas... no
> checking for sgemm_ in -lcxml... no
> checking for sgemm_ in -ldxml... no
> checking for sgemm_ in -lscs... no
> checking for sgemm_ in -lcomplib.sgimath... no
> checking for sgemm_ in -lblas... (cached) no
> checking for sgemm_ in -lblas... (cached) no
> configure: error: could not find your BLAS library
> ERROR: configuration failed for package 'Matrix'
> 
> could you tell me what is BLAS libray?


From maechler@stat.math.ethz.ch  Thu Jan 30 18:14:17 2003
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu Jan 30 18:14:17 2003
Subject: [Rd] empty array indexing with dimnames -> erroneous error (PR#2507)
Message-ID: <200301301714.SAA18101@pubhealth.ku.dk>

This is a bug that will not often trigger, and only happens for arrays
(but not matrices) ending up with 0 dimensions:

The following code also shows two 'buglets' (the first even for
matrix indexing) where "drop = TRUE/FALSE" is not correctly obeyed.
One can argue that since all these arrays have length zero, it
shouldn't matter what dimensions they get.
[But this shouldn't distract from the real bug giving errors
 where it shouldn't!]


##-- this kind of indexing works with matrices (with dimnames):
m <- cbind(x = 1, y = 1:3)
str(m[1,  0])# drops dimension
str(m[1:2,0])# doesn't drop  <<< ? buglet
str(m[1,  0, drop=FALSE])
str(m[1:2,0, drop=FALSE])


## these apply (not too relevant here)
stopifnot(identical(m[1,         0],
                    m[1, integer(0)]))
stopifnot(identical(m[1,         0, drop=FALSE],
                    m[1, integer(0), drop=FALSE]))

###--- but it fails with arrays ---

dn <- list(LETTERS[1:2], letters[1:3], paste("t",1:4,sep=""))
A. <- array(1:24, dim = 2:4) # no dimnames
Ad <- A.; dimnames(Ad) <- dn # with dimnames

## works `ok', if no dimnames --- not always obeying "drop=" --> 2nd buglet!
for(O in list(0, integer(0))) {
  str(A.[1, O, 2 ]) # int(0)
  str(A.[O,-1, O ])# int[0, 1:2, 0]
  str(A.[O, O,2:3])# int[0, 0, 1:2]

  ## with drop = FALSE:
  str(A.[1, O, 2 , drop=FALSE])# int[1, 0, 1]
  str(A.[O,-1, O , drop=FALSE])# int[0, 1:2, 0]
  str(A.[O, O,2:3, drop=FALSE])# int[0, 0, 1:2]
  cat("---\n")
}

##-- identical with `Ad' instead of `A.', i.e., *with* dimnames:
##--> All 6 statements fail :

O <- 0##__for(O in list(0, integer(0))) {

  try(Ad[1, O, 2 ]) # int(0)
  try(Ad[O,-1, O ])# int[0, 1:2, 0]
  try(Ad[O, O,2:3])# int[0, 0, 1:2]

  ## with drop = FALSE:
  try(Ad[1, O, 2 , drop=FALSE])# int[1, 0, 1]
  try(Ad[O,-1, O , drop=FALSE])# int[0, 1:2, 0]
  try(Ad[O, O,2:3, drop=FALSE])# int[0, 0, 1:2]
  cat("---\n")
##__}


From ripley@stats.ox.ac.uk  Thu Jan 30 18:16:02 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu Jan 30 18:16:02 2003
Subject: [Rd] Re: Matrix Package for R
In-Reply-To: <6risw6k37w.fsf@bates4.stat.wisc.edu>
Message-ID: <Pine.LNX.4.44.0301301708500.29536-100000@gannet.stats>

On 30 Jan 2003, Douglas Bates wrote:

> You will need both the Basic Linear Algebra Subroutines (BLAS) and a
> version of Lapack to install the Matrix package.  I'm not sure if
> pre-compiled versions are available for Solaris 7.  I believe that is
> a rather old version of the Sun OS.

No, it's not.  It's a currently supported version.

> 
> After R-1.7.0 is released in April, 2003 it should be possible to use
> the Matrix package on any platform with R as Brian Ripley has
> incorporated Lapack sources into the development version of R.
> 
> I am sending a copy of this reply to the R-devel@R-project.org list in
> case someone reading that list can advise you on how to install Lapack
> and BLAS on Solaris 7

1) Use the SunPro compiler (if you have it) and -lsunperf, and skip the 
configure steps.

2) get the sources from netlib and compile them: it works out of the box.


It will be much easier come 1.7.0, as Doug says.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From rpeng@stat.ucla.edu  Thu Jan 30 21:43:02 2003
From: rpeng@stat.ucla.edu (Roger Peng)
Date: Thu Jan 30 21:43:02 2003
Subject: [Rd] vector passed to `if' in `pgamma'
Message-ID: <Pine.GSO.4.10.10301301228220.23275-100000@quetelet.stat.ucla.edu>

In the current R-devel sources, the `pgamma' function gives a warning when
the `shape' argument is passed as a vector of length > 1.  That is,

> pgamma(3, 1)
[1] 0.950213
> pgamma(3, c(1, 2))
[1] 0.9502129 0.8008517
Warning message: 
the condition has length > 1 and only the first element will be used in:
if (shape <= 0) stop("shape must be strictly positive") 

Maybe something like

if(identical(any(shape <= 0), TRUE))
  ....

?


> version
         _                           
platform i686-pc-linux-gnu           
arch     i686                        
os       linux-gnu                   
system   i686, linux-gnu             
status   Under development (unstable)
major    1                           
minor    7.0                         
year     2003                        
month    01                          
day      29                          
language R                           


-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng


From ripley@stats.ox.ac.uk  Thu Jan 30 21:59:03 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu Jan 30 21:59:03 2003
Subject: [Rd] vector passed to `if' in `pgamma'
In-Reply-To: <Pine.GSO.4.10.10301301228220.23275-100000@quetelet.stat.ucla.edu>
Message-ID: <Pine.LNX.4.44.0301302057240.22460-100000@gannet.stats>

thanks, but that's way overkill: if (any(shape <= 0)) will do.


On Thu, 30 Jan 2003, Roger Peng wrote:

> In the current R-devel sources, the `pgamma' function gives a warning when
> the `shape' argument is passed as a vector of length > 1.  That is,
> 
> > pgamma(3, 1)
> [1] 0.950213
> > pgamma(3, c(1, 2))
> [1] 0.9502129 0.8008517
> Warning message: 
> the condition has length > 1 and only the first element will be used in:
> if (shape <= 0) stop("shape must be strictly positive") 
> 
> Maybe something like
> 
> if(identical(any(shape <= 0), TRUE))
>   ....
> 
> ?
> 
> 
> > version
>          _                           
> platform i686-pc-linux-gnu           
> arch     i686                        
> os       linux-gnu                   
> system   i686, linux-gnu             
> status   Under development (unstable)
> major    1                           
> minor    7.0                         
> year     2003                        
> month    01                          
> day      29                          
> language R                           
> 
> 
> -roger
> _______________________________
> UCLA Department of Statistics
> rpeng@stat.ucla.edu
> http://www.stat.ucla.edu/~rpeng
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Mark.Bravington@csiro.au  Thu Jan 30 23:50:02 2003
From: Mark.Bravington@csiro.au (Mark.Bravington@csiro.au)
Date: Thu Jan 30 23:50:02 2003
Subject: [Rd] print.default and attributes
Message-ID: <A8877251964B294BAB5BA1FC58B43FED025B44A5@molly.tas.csiro.au>

#-----Original Message-----
#From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
#Sent: Thursday, 30 January 2003 6:42 PM
#To: Mark.Bravington@csiro.au
#Cc: r-devel@stat.math.ethz.ch
#Subject: Re: [Rd] print.default and attributes
#
#
#On Thu, 30 Jan 2003 Mark.Bravington@csiro.au wrote:
#
#> When something gets printed by the "print.default" function, 
#any extra
#> attributes are printed without regard to their class 
#attribute (if any). 

<< snipped >>

#
#> BTW, the same applies to "print.matrix" (which doesn't rely 
#on "print"), and
#> perhaps to other print methods. Of course, it will also apply to any
#> class-specific print method which invokes "print" or 
#"NextMethod", too.
#
#In R-devel print.matrix *does* rely on print, and *is* a print method.
#But the old-style prmatrix aka print.matrix does not print attributes 
#normally:
#
#> x <- matrix(1:4, 2, 2)
#> attr( x, 'other') <- factor( c( 'cat', 'dog'))
#> prmatrix(x)
#     [,1] [,2]
#[1,]    1    3
#[2,]    2    4
#
#So how did you make it print attributes?

Ummm... good point; I guess I didn't, despite thinking I had. All I did was
type "x" instead of "prmatrix( x)" in what you've given above; in that case,
the attributes are printed (albeit without regard to class).

My assumption was that, if "x" was a matrix (i.e. had a "dim" attribute),
then "x" would be printed using "print.matrix" rather than "print.default".
Evidently, more is going on. The R1.6.2 code for "print.default" and
"print.matrix" is mostly .Internal, so I can't tell what's happening. But in
S2000, FWIW, what happens is that "print.default" spots the presence of
attributes and therefore calls "print.structure", which (i) spots the "dim"
and therefore calls "print.matrix" (no attributes displayed) and then (ii)
explicitly prints any extra attributes (by calling "print", so that
attribute classes are respected).

cheers
Mark

#
#-- 
#Brian D. Ripley,                  ripley@stats.ox.ac.uk
#Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
#University of Oxford,             Tel:  +44 1865 272861 (self)
#1 South Parks Road,                     +44 1865 272866 (PA)
#Oxford OX1 3TG, UK                Fax:  +44 1865 272595
#



*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au


From ripley@stats.ox.ac.uk  Thu Jan 30 23:56:56 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu Jan 30 23:56:56 2003
Subject: [Rd] empty array indexing with dimnames (PR#2507)
Message-ID: <200301302249.XAA19673@pubhealth.ku.dk>

On Thu, 30 Jan 2003 maechler@stat.math.ethz.ch wrote:

> This is a bug that will not often trigger, and only happens for arrays
> (but not matrices) ending up with 0 dimensions:

The bug is a missing else branch of an if condition at line 431 of 
subset.c.

I don't think the buglets are wrong.  You don't drop length 0 dimensions.
If you did, the object would be of the wrong length.  You only drop length 
1 dimensions.

> 
> The following code also shows two 'buglets' (the first even for
> matrix indexing) where "drop = TRUE/FALSE" is not correctly obeyed.
> One can argue that since all these arrays have length zero, it
> shouldn't matter what dimensions they get.
> [But this shouldn't distract from the real bug giving errors
>  where it shouldn't!]
> 
> 
> ##-- this kind of indexing works with matrices (with dimnames):
> m <- cbind(x = 1, y = 1:3)
> str(m[1,  0])# drops dimension
> str(m[1:2,0])# doesn't drop  <<< ? buglet
> str(m[1,  0, drop=FALSE])
> str(m[1:2,0, drop=FALSE])
> 
> 
> ## these apply (not too relevant here)
> stopifnot(identical(m[1,         0],
>                     m[1, integer(0)]))
> stopifnot(identical(m[1,         0, drop=FALSE],
>                     m[1, integer(0), drop=FALSE]))
> 
> ###--- but it fails with arrays ---
> 
> dn <- list(LETTERS[1:2], letters[1:3], paste("t",1:4,sep=""))
> A. <- array(1:24, dim = 2:4) # no dimnames
> Ad <- A.; dimnames(Ad) <- dn # with dimnames
> 
> ## works `ok', if no dimnames --- not always obeying "drop=" --> 2nd buglet!
> for(O in list(0, integer(0))) {
>   str(A.[1, O, 2 ]) # int(0)
>   str(A.[O,-1, O ])# int[0, 1:2, 0]
>   str(A.[O, O,2:3])# int[0, 0, 1:2]
> 
>   ## with drop = FALSE:
>   str(A.[1, O, 2 , drop=FALSE])# int[1, 0, 1]
>   str(A.[O,-1, O , drop=FALSE])# int[0, 1:2, 0]
>   str(A.[O, O,2:3, drop=FALSE])# int[0, 0, 1:2]
>   cat("---\n")
> }
> 
> ##-- identical with `Ad' instead of `A.', i.e., *with* dimnames:
> ##--> All 6 statements fail :
> 
> O <- 0##__for(O in list(0, integer(0))) {
> 
>   try(Ad[1, O, 2 ]) # int(0)
>   try(Ad[O,-1, O ])# int[0, 1:2, 0]
>   try(Ad[O, O,2:3])# int[0, 0, 1:2]
> 
>   ## with drop = FALSE:
>   try(Ad[1, O, 2 , drop=FALSE])# int[1, 0, 1]
>   try(Ad[O,-1, O , drop=FALSE])# int[0, 1:2, 0]
>   try(Ad[O, O,2:3, drop=FALSE])# int[0, 0, 1:2]
>   cat("---\n")
> ##__}
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley@stats.ox.ac.uk  Fri Jan 31 00:02:05 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Jan 31 00:02:05 2003
Subject: [Rd] print.default and attributes
In-Reply-To: <A8877251964B294BAB5BA1FC58B43FED025B44A5@molly.tas.csiro.au>
Message-ID: <Pine.LNX.4.44.0301302258320.9705-100000@gannet.stats>

As far as I can tell S2000 is a Honda sports car.  This is *R*-devel,
and in R typing x does not call print.default, let alone print.matrix.
Can you please check your facts a little?

The models that R considers are S-PLUS 3.4, and these days more often 6.1 
as R adopts ideas from S4.  S-PLUS 2000 (I guess you meant) is not very 
like either of those.

On Fri, 31 Jan 2003 Mark.Bravington@csiro.au wrote:

> #-----Original Message-----
> #From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> #Sent: Thursday, 30 January 2003 6:42 PM
> #To: Mark.Bravington@csiro.au
> #Cc: r-devel@stat.math.ethz.ch
> #Subject: Re: [Rd] print.default and attributes
> #
> #
> #On Thu, 30 Jan 2003 Mark.Bravington@csiro.au wrote:
> #
> #> When something gets printed by the "print.default" function, 
> #any extra
> #> attributes are printed without regard to their class 
> #attribute (if any). 
> 
> << snipped >>
> 
> #
> #> BTW, the same applies to "print.matrix" (which doesn't rely 
> #on "print"), and
> #> perhaps to other print methods. Of course, it will also apply to any
> #> class-specific print method which invokes "print" or 
> #"NextMethod", too.
> #
> #In R-devel print.matrix *does* rely on print, and *is* a print method.
> #But the old-style prmatrix aka print.matrix does not print attributes 
> #normally:
> #
> #> x <- matrix(1:4, 2, 2)
> #> attr( x, 'other') <- factor( c( 'cat', 'dog'))
> #> prmatrix(x)
> #     [,1] [,2]
> #[1,]    1    3
> #[2,]    2    4
> #
> #So how did you make it print attributes?
> 
> Ummm... good point; I guess I didn't, despite thinking I had. All I did was
> type "x" instead of "prmatrix( x)" in what you've given above; in that case,
> the attributes are printed (albeit without regard to class).
> 
> My assumption was that, if "x" was a matrix (i.e. had a "dim" attribute),
> then "x" would be printed using "print.matrix" rather than "print.default".
> Evidently, more is going on. The R1.6.2 code for "print.default" and
> "print.matrix" is mostly .Internal, so I can't tell what's happening. But in
> S2000, FWIW, what happens is that "print.default" spots the presence of
> attributes and therefore calls "print.structure", which (i) spots the "dim"
> and therefore calls "print.matrix" (no attributes displayed) and then (ii)
> explicitly prints any extra attributes (by calling "print", so that
> attribute classes are respected).
> 
> cheers
> Mark
> 
> #
> #-- 
> #Brian D. Ripley,                  ripley@stats.ox.ac.uk
> #Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> #University of Oxford,             Tel:  +44 1865 272861 (self)
> #1 South Parks Road,                     +44 1865 272866 (PA)
> #Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> #
> 
> 
> 
> *******************************
> 
> Mark Bravington
> CSIRO (CMIS)
> PO Box 1538
> Castray Esplanade
> Hobart
> TAS 7001
> 
> phone (61) 3 6232 5118
> fax (61) 3 6232 5012
> Mark.Bravington@csiro.au 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From zedshaw@zedshaw.com  Fri Jan 31 09:22:03 2003
From: zedshaw@zedshaw.com (Zed A. Shaw)
Date: Fri Jan 31 09:22:03 2003
Subject: [Rd] Embedding R in C++
Message-ID: <101F2E8E-34F5-11D7-AD1D-00039391E298@zedshaw.com>

Hi Folks,

Alright, so I'm figuring out how to embed from the various docs and 
other nuggets of hidden information, and I've managed to get a nice 
little C++ framework going which is supposed to make working with R 
embedded stuff much easier.  The problem is, R likes to define things 
that other libraries also like to define.  For example, the libg++-v3 
library has a macro called length, and so does R.  This causes ALL 
iostream uses to fail.  R also defines PI, which is defined in another 
toolkit.  We also use a set of debugging macros named TRACE, 
UNIMPLEMENTED, and so on, but we can work around those problems.

The work around to the iostream problem is to order the includes so 
that C++ stuff comes before R stuff.  This works in most cases, but 
some don't (like with PI, TRACE, and UNIMPLEMENTED).

Has anyone else run into these kinds of problems mixing R with C++?  
I'm curious how you worked around it.  Thanks in advance.

-----
Zed A. Shaw
http://www.zedshaw.com/


From maechler@stat.math.ethz.ch  Fri Jan 31 09:24:03 2003
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri Jan 31 09:24:03 2003
Subject: [Rd] empty array indexing with dimnames (PR#2507)
Message-ID: <200301310824.JAA22244@pubhealth.ku.dk>

>>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk>
>>>>>     on Thu, 30 Jan 2003 23:49:22 +0100 (MET) writes:

    BDR> On Thu, 30 Jan 2003 maechler@stat.math.ethz.ch wrote:
    >> This is a bug that will not often trigger, and only
    >> happens for arrays (but not matrices) ending up with 0
    >> dimensions:

    BDR> The bug is a missing else branch of an if condition at
    BDR> line 431 of subset.c.

and you have already fixed it for 1.7.0

    BDR> I don't think the buglets are wrong.  You don't drop
    BDR> length 0 dimensions.  If you did, the object would be
    BDR> of the wrong length.  You only drop length 1 dimensions.

Yes, of course, you are right!

     <....>

    BDR> -- Brian D. Ripley, ripley@stats.ox.ac.uk Professor of
    BDR> Applied Statistics, http://www.stats.ox.ac.uk/~ripley/
    BDR> University of Oxford, Tel: +44 1865 272861 (self) 1
    BDR> South Parks Road, +44 1865 272866 (PA) Oxford OX1 3TG,
    BDR> UK Fax: +44 1865 272595

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


From DEd@novonordisk.com  Fri Jan 31 11:04:02 2003
From: DEd@novonordisk.com (DEd@novonordisk.com)
Date: Fri Jan 31 11:04:02 2003
Subject: [Rd] Possible bug in socketConnection (PR#2511)
Message-ID: <200301311004.LAA24044@pubhealth.ku.dk>

Full_Name: David Edwards
Version: 1.6.2
OS: Windows 2000
Submission from: (NULL) (152.73.1.129)


I am trying to communicate with another program (MIM 3.1), that has a
non-blocking socket server connection using port 50. The first call to
socketConnection gives an error but after repeating the call it works fine. 

 MIM <- socketConnection(port=50)
Error in socketConnection(port = 50) : unable to open connection
In addition: Warning message: 
localhost:50 cannot be opened 
> MIM <- socketConnection(port=50)

Thereafter ok.

Is this a bug?


From ripley@stats.ox.ac.uk  Fri Jan 31 11:37:05 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Jan 31 11:37:05 2003
Subject: [Rd] Embedding R in C++
In-Reply-To: <101F2E8E-34F5-11D7-AD1D-00039391E298@zedshaw.com>
Message-ID: <Pine.LNX.4.44.0301310913320.15799-100000@gannet.stats>

It's a problem with e.g. the Matrix package, and has been with others.
Careful use of #undef is needed; see the code there.

Another problem is mixing with Windows headers, which g++ has now in its
wisdom decided to include from some C++ headers.  #under ERROR is
sometimes needed, for example, as well as length, append and Free.

It's worth noting that almost all these problems have emerged with
libg++-v3 and/or mingw-runtime-2.x.  So another version might be

     'Other libraries like to define things which R has already defined.'

which is intended to help explain why projects such as R cannot suddenly 
jump to the tune of g++ or glibc or mingw ... as our API has customers 
too.

In the case of PI, there is a standard define, M_PI, but according to
R-exts this is included in R's headers for compatibility with S (and so is
ERROR).  I do wonder if we should not have a define that removes these
compatibility defines.  What might be a good name: NO_S_DEFINES?
STRICT_R_HEADERS?

In the cases of length and append we ought to bite the bullet and stop
re-defining them.

On Fri, 31 Jan 2003, Zed A. Shaw wrote:

> Hi Folks,
> 
> Alright, so I'm figuring out how to embed from the various docs and 
> other nuggets of hidden information, and I've managed to get a nice 
> little C++ framework going which is supposed to make working with R 
> embedded stuff much easier.  The problem is, R likes to define things 
> that other libraries also like to define.  For example, the libg++-v3 
> library has a macro called length, and so does R.  This causes ALL 
> iostream uses to fail.  R also defines PI, which is defined in another 
> toolkit.  We also use a set of debugging macros named TRACE, 
> UNIMPLEMENTED, and so on, but we can work around those problems.
> 
> The work around to the iostream problem is to order the includes so 
> that C++ stuff comes before R stuff.  This works in most cases, but 
> some don't (like with PI, TRACE, and UNIMPLEMENTED).
> 
> Has anyone else run into these kinds of problems mixing R with C++?  
> I'm curious how you worked around it.  Thanks in advance.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 31 12:08:03 2003
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri Jan 31 12:08:03 2003
Subject: [Rd] Embedding R in C++
In-Reply-To: <Pine.LNX.4.44.0301310913320.15799-100000@gannet.stats>
References: <101F2E8E-34F5-11D7-AD1D-00039391E298@zedshaw.com>
 <Pine.LNX.4.44.0301310913320.15799-100000@gannet.stats>
Message-ID: <15930.22607.388452.133011@gargle.gargle.HOWL>

>>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk>
>>>>>     on Fri, 31 Jan 2003 10:36:12 +0000 (GMT) writes:

    BDR> It's a problem with e.g. the Matrix package, and has
    BDR> been with others.  Careful use of #undef is needed; see
    BDR> the code there.

    BDR> Another problem is mixing with Windows headers, which
    BDR> g++ has now in its wisdom decided to include from some
    BDR> C++ headers.  #under ERROR is sometimes needed, for
    BDR> example, as well as length, append and Free.

    BDR> It's worth noting that almost all these problems have
    BDR> emerged with libg++-v3 and/or mingw-runtime-2.x.  So
    BDR> another version might be

    BDR>      'Other libraries like to define things which R has
    BDR> already defined.'

    BDR> which is intended to help explain why projects such as
    BDR> R cannot suddenly jump to the tune of g++ or glibc or
    BDR> mingw ... as our API has customers too.

    BDR> In the case of PI, there is a standard define, M_PI,
    BDR> but according to R-exts this is included in R's headers
    BDR> for compatibility with S (and so is ERROR).  I do
    BDR> wonder if we should not have a define that removes
    BDR> these compatibility defines.  What might be a good
    BDR> name: NO_S_DEFINES?  STRICT_R_HEADERS?

I'd prefer the 2nd (but not strongly)

    BDR> In the cases of length and append we ought to bite the
    BDR> bullet and stop re-defining them.

Yes, I tend to agree on all points.
Martin.

    <...Zed Shaw's message in thread...>


From p.dalgaard@biostat.ku.dk  Fri Jan 31 16:06:03 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri Jan 31 16:06:03 2003
Subject: [Rd] r-bugs web site temporarily down
Message-ID: <x2wuklwe9z.fsf@biostat.ku.dk>

The machine that serves r-bugs.biostat.ku.dk has been taken off the
net. A new machine is planned to replace it, but we need to
reconfigure the DNS, which is not going to happen until Monday. The
mail interface should still work.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From surko@salk.edu  Fri Jan 31 18:20:03 2003
From: surko@salk.edu (surko@salk.edu)
Date: Fri Jan 31 18:20:03 2003
Subject: [Rd] hist (PR#2512)
Message-ID: <200301311720.SAA00284@pubhealth.ku.dk>

The command hist(c(2,2,2,4,5,6)) returns a histogram that looks incorrect -- 3 in the bin labeled 2 on the left, but 1 each in the bins labeled 3,4,5 on the left.

Thanks!
Pam Surko

--------------------

> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    6.2            
year     2003           
month    01             
day      10             
language R              


Pam Surko
Visiting Scientist, Ecker Plant Bio Lab
Salk Institute, 10010 N. Torrey Pines Rd. 
La Jolla CA  92037 
858 453-4100  X1796


	[[alternate HTML version deleted]]


From p.dalgaard@biostat.ku.dk  Fri Jan 31 18:33:02 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri Jan 31 18:33:02 2003
Subject: [Rd] hist (PR#2512)
In-Reply-To: <200301311720.SAA00284@pubhealth.ku.dk>
References: <200301311720.SAA00284@pubhealth.ku.dk>
Message-ID: <x2u1fp8bvz.fsf@biostat.ku.dk>

surko@salk.edu writes:

> The command hist(c(2,2,2,4,5,6)) returns a histogram that looks
> incorrect -- 3 in the bin labeled 2 on the left, but 1 each in the
> bins labeled 3,4,5 on the left.
> 
> Thanks!
> Pam Surko

As documented (notice the include.lowest argument), so not a bug. Also S-PLUS
compatible.

Histogramming of integers has these pitfalls. For an alternative, you
might want to look up truehist() in the MASS package.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


From ripley@stats.ox.ac.uk  Fri Jan 31 18:36:05 2003
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Jan 31 18:36:05 2003
Subject: [Rd] hist (PR#2512)
Message-ID: <200301311736.SAA00361@pubhealth.ku.dk>

hist() does not label bins: it is not a barplot.  It labels an x axis,
from which you can read the boundaries of the bins, in this case [2,3],
(3,4], (4,5], (5,6].  That's what the help page says it does, so where is
the bug in R?

On Fri, 31 Jan 2003 surko@salk.edu wrote:

> The command hist(c(2,2,2,4,5,6)) returns a histogram that 
looks incorrect -- 3 in the bin labeled 2 on the left, but 
1 each in the bins labeled 3,4,5 on the left.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From baron@cattell.psych.upenn.edu  Fri Jan 31 18:37:03 2003
From: baron@cattell.psych.upenn.edu (baron@cattell.psych.upenn.edu)
Date: Fri Jan 31 18:37:03 2003
Subject: [Rd] minor error in documentation of pmax in base (PR#2513)
Message-ID: <200301311737.SAA00372@pubhealth.ku.dk>

The documentation says, "pmax and pmin take several vectors as
arguments and return a single vector giving the parallel maxima
(or minima) of the vectors."

I discovered that, if you use a matrix or array instead of a
vector, pmax returns a matrix or array, respectively.

This makes pmax and pmin much more useful, and should not be left
to people to discover on their own!

For example:
m1 <- array(1:24,c(2,3,4))
m2 <- array(24:1,c(2,3,4))
pmax(m1,m2)
pmin(m1,m2)

Jon Baron


From andy_liaw@merck.com  Fri Jan 31 18:47:03 2003
From: andy_liaw@merck.com (Liaw, Andy)
Date: Fri Jan 31 18:47:03 2003
Subject: [Rd] minor error in documentation of pmax in base (PR#2513)
Message-ID: <3A822319EB35174CA3714066D590DCD534BC0D@usrymx25.merck.com>

If I'm not mistaken, matrices and arrays are just vectors with dim
attribute.  so I'm not surprised that pmax and pmin work as they do.  You
get the same answer by the following:

array(pmax(1:24, 24:1), c(2, 3, 4))
array(pmin(1:24, 24:1), c(2, 3, 4))


Cheers,
Andy

> -----Original Message-----
> From: baron@cattell.psych.upenn.edu
> [mailto:baron@cattell.psych.upenn.edu]
> Sent: Friday, January 31, 2003 12:37 PM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] minor error in documentation of pmax in base (PR#2513)
> 
> 
> The documentation says, "pmax and pmin take several vectors as
> arguments and return a single vector giving the parallel maxima
> (or minima) of the vectors."
> 
> I discovered that, if you use a matrix or array instead of a
> vector, pmax returns a matrix or array, respectively.
> 
> This makes pmax and pmin much more useful, and should not be left
> to people to discover on their own!
> 
> For example:
> m1 <- array(1:24,c(2,3,4))
> m2 <- array(24:1,c(2,3,4))
> pmax(m1,m2)
> pmin(m1,m2)
> 
> Jon Baron
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

------------------------------------------------------------------------------


From baron@cattell.psych.upenn.edu  Fri Jan 31 18:58:48 2003
From: baron@cattell.psych.upenn.edu (Jonathan Baron)
Date: Fri Jan 31 18:58:48 2003
Subject: [Rd] minor error in documentation of pmax in base (PR#2513)
In-Reply-To: <3A822319EB35174CA3714066D590DCD534BC0D@usrymx25.merck.com>; from andy_liaw@merck.com on Fri, Jan 31, 2003 at 12:42:43PM -0500
References: <3A822319EB35174CA3714066D590DCD534BC0D@usrymx25.merck.com>
Message-ID: <20030131125423.A9921@cattell.psych.upenn.edu>

In a way it is not surprising, but some functions that operate on
vectors will coerce their outputs into vectors and others won't.
For example, try

m1 <- array(1:24,c(2,3,4))
sort(m1)
order(m1)

It would be nice to say when each of these things will happen.

For example, in the documentaition for ifelse, it says, "returns
a value with the same shape as".  This sort of language would be
helpful.

Jon

On 01/31/03 12:42, Liaw, Andy wrote:
>If I'm not mistaken, matrices and arrays are just vectors with dim
>attribute.  so I'm not surprised that pmax and pmin work as they do.  You
>get the same answer by the following:
>
>array(pmax(1:24, 24:1), c(2, 3, 4))
>array(pmin(1:24, 24:1), c(2, 3, 4))
>
>
>Cheers,
>Andy
>
>> -----Original Message-----
>> From: baron@cattell.psych.upenn.edu
>> [mailto:baron@cattell.psych.upenn.edu]
>> Sent: Friday, January 31, 2003 12:37 PM
>> To: r-devel@stat.math.ethz.ch
>> Cc: R-bugs@biostat.ku.dk
>> Subject: [Rd] minor error in documentation of pmax in base (PR#2513)
>> 
>> 
>> The documentation says, "pmax and pmin take several vectors as
>> arguments and return a single vector giving the parallel maxima
>> (or minima) of the vectors."
>> 
>> I discovered that, if you use a matrix or array instead of a
>> vector, pmax returns a matrix or array, respectively.
>> 
>> This makes pmax and pmin much more useful, and should not be left
>> to people to discover on their own!
>> 
>> For example:
>> m1 <- array(1:24,c(2,3,4))
>> m2 <- array(24:1,c(2,3,4))
>> pmax(m1,m2)
>> pmin(m1,m2)
>> 
>> Jon Baron
>> 
>> ______________________________________________
>> R-devel@stat.math.ethz.ch mailing list
>> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>> 
>
>------------------------------------------------------------------------------
>Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.
>
>==============================================================================
>

-- 
Jonathan Baron, Professor of Psychology, University of Pennsylvania
Home page:            http://www.sas.upenn.edu/~baron
Psychology webmaster: http://www.psych.upenn.edu/
R page:               http://finzi.psych.upenn.edu/
Questionnaires:       http://www.psych.upenn.edu/~baron/qs.html


From andy_liaw@merck.com  Fri Jan 31 19:04:08 2003
From: andy_liaw@merck.com (Liaw, Andy)
Date: Fri Jan 31 19:04:08 2003
Subject: [Rd] minor error in documentation of pmax in base (PR#2513)
Message-ID: <3A822319EB35174CA3714066D590DCD534BC0F@usrymx25.merck.com>

> From: Jonathan Baron [mailto:baron@cattell.psych.upenn.edu]
> 
> In a way it is not surprising, but some functions that operate on
> vectors will coerce their outputs into vectors and others won't.
> For example, try
> 
> m1 <- array(1:24,c(2,3,4))
> sort(m1)
> order(m1)

Now that I think a bit more about this example, I'm not sure if I like pmax
and pmin to work as they do now.  What if one does the following:

a1 <- array(1:24, 2:4)
a2 <- array(24:1, 4:2)
pmax(a1, a2)
pmin(a1, a2)

I don't know if there's a "natural" way to dimension the result in this
case.  Seen from this perspective, my preference would actually be what
sort() and order() do: drop the attribute.  If array is what's intended,
then the user can do that coercion explicitly.

Just my $0.02...
Andy

> 
> It would be nice to say when each of these things will happen.
> 
> For example, in the documentaition for ifelse, it says, "returns
> a value with the same shape as".  This sort of language would be
> helpful.
> 
> Jon
> 
> On 01/31/03 12:42, Liaw, Andy wrote:
> >If I'm not mistaken, matrices and arrays are just vectors with dim
> >attribute.  so I'm not surprised that pmax and pmin work as 
> they do.  You
> >get the same answer by the following:
> >
> >array(pmax(1:24, 24:1), c(2, 3, 4))
> >array(pmin(1:24, 24:1), c(2, 3, 4))
> >
> >
> >Cheers,
> >Andy
> >
> >> -----Original Message-----
> >> From: baron@cattell.psych.upenn.edu
> >> [mailto:baron@cattell.psych.upenn.edu]
> >> Sent: Friday, January 31, 2003 12:37 PM
> >> To: r-devel@stat.math.ethz.ch
> >> Cc: R-bugs@biostat.ku.dk
> >> Subject: [Rd] minor error in documentation of pmax in base 
> (PR#2513)
> >> 
> >> 
> >> The documentation says, "pmax and pmin take several vectors as
> >> arguments and return a single vector giving the parallel maxima
> >> (or minima) of the vectors."
> >> 
> >> I discovered that, if you use a matrix or array instead of a
> >> vector, pmax returns a matrix or array, respectively.
> >> 
> >> This makes pmax and pmin much more useful, and should not be left
> >> to people to discover on their own!
> >> 
> >> For example:
> >> m1 <- array(1:24,c(2,3,4))
> >> m2 <- array(24:1,c(2,3,4))
> >> pmax(m1,m2)
> >> pmin(m1,m2)
> >> 
> >> Jon Baron
> >> 
> >> ______________________________________________
> >> R-devel@stat.math.ethz.ch mailing list
> >> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> >> 
> >
> >-------------------------------------------------------------
> -----------------
> >Notice: This e-mail message, together with any attachments, 
> contains information of Merck & Co., Inc. (Whitehouse 
> Station, New Jersey, USA) that may be confidential, 
> proprietary copyrighted and/or legally privileged, and is 
> intended solely for the use of the individual or entity named 
> on this message.  If you are not the intended recipient, and 
> have received this message in error, please immediately 
> return this by e-mail and then delete it.
> >
> >=============================================================
> =================
> >
> 
> -- 
> Jonathan Baron, Professor of Psychology, University of Pennsylvania
> Home page:            http://www.sas.upenn.edu/~baron
> Psychology webmaster: http://www.psych.upenn.edu/
> R page:               http://finzi.psych.upenn.edu/
> Questionnaires:       http://www.psych.upenn.edu/~baron/qs.html
> 

------------------------------------------------------------------------------


From baron@cattell.psych.upenn.edu  Fri Jan 31 19:24:02 2003
From: baron@cattell.psych.upenn.edu (Jonathan Baron)
Date: Fri Jan 31 19:24:02 2003
Subject: [Rd] minor error in documentation of pmax in base (PR#2513)
In-Reply-To: <3A822319EB35174CA3714066D590DCD534BC0F@usrymx25.merck.com>; from andy_liaw@merck.com on Fri, Jan 31, 2003 at 01:02:51PM -0500
References: <3A822319EB35174CA3714066D590DCD534BC0F@usrymx25.merck.com>
Message-ID: <20030131132010.A17691@cattell.psych.upenn.edu>

On 01/31/03 13:02, Liaw, Andy wrote:
>> From: Jonathan Baron [mailto:baron@cattell.psych.upenn.edu]
>> 
>> In a way it is not surprising, but some functions that operate on
>> vectors will coerce their outputs into vectors and others won't.
>> For example, try
>> 
>> m1 <- array(1:24,c(2,3,4))
>> sort(m1)
>> order(m1)
>
>Now that I think a bit more about this example, I'm not sure if I like pmax
>and pmin to work as they do now.  What if one does the following:
>
>a1 <- array(1:24, 2:4)
>a2 <- array(24:1, 4:2)
>pmax(a1, a2)
>pmin(a1, a2)

The mind boggles!

>I don't know if there's a "natural" way to dimension the result in this
>case.  Seen from this perspective, my preference would actually be what
>sort() and order() do: drop the attribute.  If array is what's intended,
>then the user can do that coercion explicitly.
>
>Just my $0.02...
>Andy

order() drops the attributes, sort() does not!

Although I see the problem, my own preference is to keep pmax and
pmin as they are, and document it.  It took me a while to trust
my ability to put arrays back together after they became
vectors.  I think novices might appreciate not having to do this.

Jon


From kleiweg@let.rug.nl  Fri Jan 31 19:59:02 2003
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Fri Jan 31 19:59:02 2003
Subject: [Rd] hist (PR#2512)
In-Reply-To: <200301311720.SAA00284@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0301311953290.1139-100000@kleigh.nl>

__ aldus surko@salk.edu __

> The command hist(c(2,2,2,4,5,6)) returns a histogram that looks incorrect -- 3 in the bin labeled 2 on the left, but 1 each in the bins labeled 3,4,5 on the left.


That looks as it is supposed to look, according to the help
page. However, if I run this example with include.lowest=FALSE,
I get an error:

    > hist(c(2,2,2,4,5,6),include.lowest=FALSE)
    Error in hist.default(c(2, 2, 2, 4, 5, 6), include.lowest = FALSE) :
        some `x' not counted; maybe `breaks' do not span range of `x'

Similar if I add right=FALSE:

    > hist(c(2,2,2,4,5,6),include.lowest=FALSE,right=FALSE)
    Error in hist.default(c(2, 2, 2, 4, 5, 6), include.lowest = FALSE, right = FALSE) :
        some `x' not counted; maybe `breaks' do not span range of `x'


Is this supposed to happen?

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


From ripley@stats.ox.ac.uk  Fri Jan 31 20:40:03 2003
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri Jan 31 20:40:03 2003
Subject: [Rd] hist (PR#2512)
In-Reply-To: <Pine.LNX.4.44.0301311953290.1139-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.44.0301311934370.9551-100000@auk.stats>

On Fri, 31 Jan 2003, Peter Kleiweg wrote:

> __ aldus surko@salk.edu __
>
> > The command hist(c(2,2,2,4,5,6)) returns a histogram that looks incorrect -- 3 in the bin labeled 2 on the left, but 1 each in the bins labeled 3,4,5 on the left.
>
>
> That looks as it is supposed to look, according to the help
> page. However, if I run this example with include.lowest=FALSE,
> I get an error:
>
>     > hist(c(2,2,2,4,5,6),include.lowest=FALSE)
>     Error in hist.default(c(2, 2, 2, 4, 5, 6), include.lowest = FALSE) :
>         some `x' not counted; maybe `breaks' do not span range of `x'
>
> Similar if I add right=FALSE:
>
>     > hist(c(2,2,2,4,5,6),include.lowest=FALSE,right=FALSE)
>     Error in hist.default(c(2, 2, 2, 4, 5, 6), include.lowest = FALSE, right = FALSE) :
>         some `x' not counted; maybe `breaks' do not span range of `x'
>
>
> Is this supposed to happen?

Yes.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From rreeve@liposcience.com  Fri Jan 31 23:00:04 2003
From: rreeve@liposcience.com (rreeve@liposcience.com)
Date: Fri Jan 31 23:00:04 2003
Subject: [Rd] summary.table parameter bug (PR#2514)
Message-ID: <200301312155.WAA01337@pubhealth.ku.dk>

summary.table has a bug in the parameter line. It currently gives 

df = (K1 - 1) * (K2 - 1) * .. * (Kp - 1)                       (1)

where Ki is the number of categories of variable i. The documentation and the expected counts say that the test is for independence among the variables (equivalent to a loglinear model [1][2]...[p]). So equation (1) is incorrect for this hypothesis, except for 2-way tables. The df line should be


parameter <- prod(sapply(m, length)) - (sum(sapply(m, length) - 1) + 1)

Running Version 1.5-0, 2002-04-28 for Windows.

Russell Reeve, Ph.D.
Dir of Experimental Design, Analysis, and Quality
rreeve@liposcience.com
(919) 256-1300


From ripley@stats.ox.ac.uk  Fri Jan 31 23:10:03 2003
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri Jan 31 23:10:03 2003
Subject: [Rd] summary.table parameter bug (PR#2514)
In-Reply-To: <200301312155.WAA01337@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0301312158310.4637-100000@auk.stats>

On Fri, 31 Jan 2003 rreeve@liposcience.com wrote:

> summary.table has a bug in the parameter line. It currently gives
>
> df = (K1 - 1) * (K2 - 1) * .. * (Kp - 1)                       (1)
>
> where Ki is the number of categories of variable i. The documentation and the expected counts say that the test is for independence among the variables (equivalent to a loglinear model [1][2]...[p]). So equation (1) is incorrect for this hypothesis, except for 2-way tables. The df line should be
>
>
> parameter <- prod(sapply(m, length)) - (sum(sapply(m, length) - 1) + 1)
>
> Running Version 1.5-0, 2002-04-28 for Windows.

So that's 4 versions old already. I don't know if this has changed (you
don't make it easy for us by providing an example), but I do know that
around 170 bugs have been fixed, so please update.

We do expect people to test the latest version before filing a bug report.
It takes you less time that it takes the volunteers to process the report.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From p.dalgaard@biostat.ku.dk  Fri Jan 31 23:44:02 2003
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri Jan 31 23:44:02 2003
Subject: [Rd] summary.table parameter bug (PR#2514)
In-Reply-To: <Pine.GSO.4.44.0301312158310.4637-100000@auk.stats>
References: <Pine.GSO.4.44.0301312158310.4637-100000@auk.stats>
Message-ID: <x2vg05aqk8.fsf@biostat.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> > parameter <- prod(sapply(m, length)) - (sum(sapply(m, length) - 1) + 1)
> >
> > Running Version 1.5-0, 2002-04-28 for Windows.
> 
> So that's 4 versions old already. I don't know if this has changed (you
> don't make it easy for us by providing an example), but I do know that
> around 170 bugs have been fixed, so please update.
> 
> We do expect people to test the latest version before filing a bug report.
> It takes you less time that it takes the volunteers to process the report.

In this case reading the code will do and it is still wrong. Not that
I disagree with Brian's remark in general.

[I think it has been reported before too, but today is not the day to
ask people to check the bug repository.]

I don't feel altogether happy with summary.table generating that test
in the first place. Tables are not statistical model fits - not
necessarily, anyway - so something descriptive might be better. 

Wouldn't it be more obvious anyway to have a separate
independence.test() (or so) for generating the test of independence?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


