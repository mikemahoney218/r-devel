From dj@@mper| @end|ng |rom gm@||@com  Sun Apr  2 07:18:42 2023
From: dj@@mper| @end|ng |rom gm@||@com (Dominick Samperi)
Date: Sun, 2 Apr 2023 01:18:42 -0400
Subject: [Rd] setulb() from lbfgsb.c not exported
Message-ID: <CADUbQ5hECxnNQiNutZ+RKikh2aHMfh1_CRmH=XpNT1ipqCUG4g@mail.gmail.com>

Hello,

It appears that the file ./appl/lbfgsb.c defines setulb() as a static
function, and it is included in optim.c, so setulb() is not exported
by the R library. I have some sofware that uses setulb() directly,
and I would prefer to avoid having to recompile this sofware to
export that function.

Is there any way to get access to setulb(), or must I use
the lower and upper params in optimix?

Thanks,
Dominick

	[[alternative HTML version deleted]]


From k@||now@k|t @end|ng |rom gm@||@com  Sat Apr  1 16:02:37 2023
From: k@||now@k|t @end|ng |rom gm@||@com (Tomasz Kalinowski)
Date: Sat, 1 Apr 2023 10:02:37 -0400
Subject: [Rd] Autocompletion for the new S3 generic @ method?
In-Reply-To: <AEF74F63-9E94-4130-B4B4-9D2CD0C3D468@gmail.com>
References: <AEF74F63-9E94-4130-B4B4-9D2CD0C3D468@gmail.com>
Message-ID: <1F47AC51-9E95-495D-9D54-49057289ACC4@gmail.com>

I agree, this is a good idea and would be very helpful in interactive contexts. 

I have a draft patch implementing this feature here: https://github.com/r-devel/r-svn/pull/122
(Append  ?.patch? to the URL to get a raw patch.)

Regards,
Tomasz

> On Mar 31, 2023, at 2:11 PM, Karolis K <karolis.koncevicius at gmail.com> wrote:
> 
> Hello,
> 
> In the current R-devel @ is S3 generic, so we can do things like - for example - use it to extract matrix rows by name:
> 
>    .S3method("@", "mm", function(object, name) object[name,])
>    m <- structure(matrix(rnorm(20), ncol=2), dimnames=list(paste0("row", 1:10), paste("col", 1:2)), class="mm")
> 
>    m at row1
> 
> However, seems like currently it does not support autocompletion.
> 
> Wouldn?t it make sense to add a method like .EtaNames() which would provide tab autocompletions for x@<tab> in the same way current .DollarNames() does for x$<tab>?
> 
> Regards,
> Karolis K.
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From g@bembecker @end|ng |rom gm@||@com  Mon Apr  3 00:50:39 2023
From: g@bembecker @end|ng |rom gm@||@com (Gabriel Becker)
Date: Sun, 2 Apr 2023 15:50:39 -0700
Subject: [Rd] Autocompletion for the new S3 generic @ method?
In-Reply-To: <1F47AC51-9E95-495D-9D54-49057289ACC4@gmail.com>
References: <AEF74F63-9E94-4130-B4B4-9D2CD0C3D468@gmail.com>
 <1F47AC51-9E95-495D-9D54-49057289ACC4@gmail.com>
Message-ID: <CAD4oTHGtGh8xPv8YrHg-jowgqSjVwNYrd2yVe5F7HndgEgSJYw@mail.gmail.com>

Hi Tomasz,

I haven't had a chance to look at your patch yet (also I can't accept it as
I'm not on R-core), but patches for consideration should be submitted to
bugzilla (https://bugs.r-project.org), not the unofficial github mirror of
the the SVN repo.

Best,
~G

On Sun, Apr 2, 2023 at 6:09?AM Tomasz Kalinowski <kalinowskit at gmail.com>
wrote:

> I agree, this is a good idea and would be very helpful in interactive
> contexts.
>
> I have a draft patch implementing this feature here:
> https://github.com/r-devel/r-svn/pull/122
> (Append  ?.patch? to the URL to get a raw patch.)
>
> Regards,
> Tomasz
>
> > On Mar 31, 2023, at 2:11 PM, Karolis K <karolis.koncevicius at gmail.com>
> wrote:
> >
> > Hello,
> >
> > In the current R-devel @ is S3 generic, so we can do things like - for
> example - use it to extract matrix rows by name:
> >
> >    .S3method("@", "mm", function(object, name) object[name,])
> >    m <- structure(matrix(rnorm(20), ncol=2), dimnames=list(paste0("row",
> 1:10), paste("col", 1:2)), class="mm")
> >
> >    m at row1
> >
> > However, seems like currently it does not support autocompletion.
> >
> > Wouldn?t it make sense to add a method like .EtaNames() which would
> provide tab autocompletions for x@<tab> in the same way current
> .DollarNames() does for x$<tab>?
> >
> > Regards,
> > Karolis K.
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

	[[alternative HTML version deleted]]


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Mon Apr  3 06:07:09 2023
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Mon, 3 Apr 2023 09:37:09 +0530
Subject: [Rd] Autocompletion for the new S3 generic @ method?
In-Reply-To: <1F47AC51-9E95-495D-9D54-49057289ACC4@gmail.com>
References: <AEF74F63-9E94-4130-B4B4-9D2CD0C3D468@gmail.com>
 <1F47AC51-9E95-495D-9D54-49057289ACC4@gmail.com>
Message-ID: <CADfFDC7k2pKxBtx6aLzL=VZa96jGtt8jvJ8dmOU=0YCZD9d97Q@mail.gmail.com>

Thanks, we are discussing the details, but we will definitely add
something along those lines before 4.3.0 is released.

Best,
-Deepayan

On Sun, Apr 2, 2023 at 6:39?PM Tomasz Kalinowski <kalinowskit at gmail.com> wrote:
>
> I agree, this is a good idea and would be very helpful in interactive contexts.
>
> I have a draft patch implementing this feature here: https://github.com/r-devel/r-svn/pull/122
> (Append  ?.patch? to the URL to get a raw patch.)
>
> Regards,
> Tomasz
>
> > On Mar 31, 2023, at 2:11 PM, Karolis K <karolis.koncevicius at gmail.com> wrote:
> >
> > Hello,
> >
> > In the current R-devel @ is S3 generic, so we can do things like - for example - use it to extract matrix rows by name:
> >
> >    .S3method("@", "mm", function(object, name) object[name,])
> >    m <- structure(matrix(rnorm(20), ncol=2), dimnames=list(paste0("row", 1:10), paste("col", 1:2)), class="mm")
> >
> >    m at row1
> >
> > However, seems like currently it does not support autocompletion.
> >
> > Wouldn?t it make sense to add a method like .EtaNames() which would provide tab autocompletions for x@<tab> in the same way current .DollarNames() does for x$<tab>?
> >
> > Regards,
> > Karolis K.
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From @teuer @end|ng |rom h@u-hh@de  Mon Apr  3 15:07:08 2023
From: @teuer @end|ng |rom h@u-hh@de (Detlef Steuer)
Date: Mon, 3 Apr 2023 15:07:08 +0200
Subject: [Rd] Let R compile for libcurl8 ?
Message-ID: <20230403150708.6d753245@gaia.unibw-hamburg.de>

Hi!

The same Inar reported for rawhide
(https://stat.ethz.ch/pipermail/r-devel/2023-March/082482.html)
is true for SuSE's distros.

Right now R does not compile with libcurl8, but SuSE Tumbleweed/Factory 
switched to 8 a week ago.

Would be great, if the patch Inar provided could be applied to 
main.

Detlef

-- 
"Wozu leben wir, wenn nicht dazu, uns gegenseitig das Leben 
 einfacher zu machen. (George Eliot)" 

Dr. Detlef Steuer
Helmut-Schmidt-Universit?t
Fakult?t WiSo
Holstenhofweg 85
22043 Hamburg

Tel:  040/6541-2819
mail: steuer at hsu-hh.de


From ttm|gue|tt @end|ng |rom gm@||@com  Mon Apr  3 14:07:00 2023
From: ttm|gue|tt @end|ng |rom gm@||@com (Michael Milton)
Date: Mon, 3 Apr 2023 22:07:00 +1000
Subject: [Rd] Breaking Change in Rcomplex Layout?
Message-ID: <CAPZyOoLG7Bgt0D_Nz-pdBv5k0_SmpFN9UuFE1-mKQxX76L=21g@mail.gmail.com>

Hi all,

There seems to have been a breaking change in the R trunk caused by a fix
to bug 18430 <https://bugs.r-project.org/show_bug.cgi?id=18430> that
relates to the layout of the Rcomplex typedef. Previously it was a struct,
but now it's a union by default
<https://github.com/r-devel/r-svn/commit/862f9f816ff3ff3cb3f851603f19e99f60a98475#diff-e9b09a44d9dc69444eca2300325e790a0cc6d2c8c3960f47519c7f8ef896f9e4>,
which breaks downstream code that relied on this layout. I'm aware of
the R_LEGACY_RCOMPLEX variable, but I still wouldn't expect an unreported
breaking change especially if it's aimed at R 4.3 (although I'm not sure if
it is). I believe src/include/R_ext/Complex.h, which this patch affects, is
considered part of the public R ABI since it's included by R.h.

What should I, as a downstream package developer, do about this change?

Cheers.

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Apr  3 15:24:18 2023
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 3 Apr 2023 08:24:18 -0500
Subject: [Rd] Let R compile for libcurl8 ?
In-Reply-To: <20230403150708.6d753245@gaia.unibw-hamburg.de>
References: <20230403150708.6d753245@gaia.unibw-hamburg.de>
Message-ID: <25642.54146.546165.832105@rob.eddelbuettel.com>


On 3 April 2023 at 15:07, Detlef Steuer wrote:
| The same Inar reported for rawhide
| (https://stat.ethz.ch/pipermail/r-devel/2023-March/082482.html)
| is true for SuSE's distros.
| 
| Right now R does not compile with libcurl8, but SuSE Tumbleweed/Factory 
| switched to 8 a week ago.
| 
| Would be great, if the patch Inar provided could be applied to 
| main.

+1

For completeness, and in case someone wants to test on a Debian system,
version 8.0.1 is in Debian experimental (likely for the dual reasons of a
release freeze and the presumably rather wide impact of a rebuild). 

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Mon Apr  3 15:39:07 2023
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Mon, 3 Apr 2023 15:39:07 +0200
Subject: [Rd] Breaking Change in Rcomplex Layout?
In-Reply-To: <CAPZyOoLG7Bgt0D_Nz-pdBv5k0_SmpFN9UuFE1-mKQxX76L=21g@mail.gmail.com>
References: <CAPZyOoLG7Bgt0D_Nz-pdBv5k0_SmpFN9UuFE1-mKQxX76L=21g@mail.gmail.com>
Message-ID: <e8c052d6-50ae-002d-71ba-5e160b56d419@gmail.com>


On 4/3/23 14:07, Michael Milton wrote:
> Hi all,
>
> There seems to have been a breaking change in the R trunk caused by a fix
> to bug 18430 <https://bugs.r-project.org/show_bug.cgi?id=18430> that
> relates to the layout of the Rcomplex typedef. Previously it was a struct,
> but now it's a union by default
> <https://github.com/r-devel/r-svn/commit/862f9f816ff3ff3cb3f851603f19e99f60a98475#diff-e9b09a44d9dc69444eca2300325e790a0cc6d2c8c3960f47519c7f8ef896f9e4>,
> which breaks downstream code that relied on this layout. I'm aware of
> the R_LEGACY_RCOMPLEX variable, but I still wouldn't expect an unreported
> breaking change especially if it's aimed at R 4.3 (although I'm not sure if
> it is). I believe src/include/R_ext/Complex.h, which this patch affects, is
> considered part of the public R ABI since it's included by R.h.
>
> What should I, as a downstream package developer, do about this change?

Please report the actual problem you have ran into.

Thanks
Tomas

>
> Cheers.
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ttm|gue|tt @end|ng |rom gm@||@com  Mon Apr  3 15:50:03 2023
From: ttm|gue|tt @end|ng |rom gm@||@com (Michael Milton)
Date: Mon, 3 Apr 2023 23:50:03 +1000
Subject: [Rd] Breaking Change in Rcomplex Layout?
In-Reply-To: <e8c052d6-50ae-002d-71ba-5e160b56d419@gmail.com>
References: <CAPZyOoLG7Bgt0D_Nz-pdBv5k0_SmpFN9UuFE1-mKQxX76L=21g@mail.gmail.com>
 <e8c052d6-50ae-002d-71ba-5e160b56d419@gmail.com>
Message-ID: <CAPZyOoL7rLbLHwQMziADwg_Dy-UGNScdwi3wf_RawWyU2Y4v-Q@mail.gmail.com>

Okay, but I'm afraid this will only mean something to Rust users. The
reason being that we encountered this issue in extendr: a Rust extension
library for R. The specific compiler errors we encounter happen because
bindgen (the Rust code generation library) read the changed R header files,
and generated a new type definition for Rcomplex. Then, our downstream code
that uses that bindgen-generated code caused rustc compiler errors such as:

error[E0560]: union `libR_sys::Rcomplex` has no field named `r`
  --> extendr-api\src\robj\into_robj.rs:93:20
   |
93 |         Rcomplex { r: 0., i: 0. }
   |                    ^ `libR_sys::Rcomplex` does not have this field
   |
   = note: available fields are: `__bindgen_anon_1`, `private_data_c`

and

error[E0609]: no field `i` on type `libR_sys::Rcomplex`
   --> extendr-api\src\scalar\rcplx_default.rs:105:35
    |
105 |         Rcplx(c64::new(val.r, val.i))
    |                                   ^ unknown field
    |
    = note: available fields are: `__bindgen_anon_1`, `private_data_c`
help: one of the expressions' fields has a field of the same name
    |
105 |         Rcplx(c64::new(val.r, val.__bindgen_anon_1.i))
    |                                   +++++++++++++++++

However, to put this into context, I would expect that C, C++ packages
would encounter a similar issue if they tried to access or modify specific
Rcomplex fields in the same way.

On Mon, Apr 3, 2023 at 11:39?PM Tomas Kalibera <tomas.kalibera at gmail.com>
wrote:

>
> On 4/3/23 14:07, Michael Milton wrote:
> > Hi all,
> >
> > There seems to have been a breaking change in the R trunk caused by a fix
> > to bug 18430 <https://bugs.r-project.org/show_bug.cgi?id=18430> that
> > relates to the layout of the Rcomplex typedef. Previously it was a
> struct,
> > but now it's a union by default
> > <
> https://github.com/r-devel/r-svn/commit/862f9f816ff3ff3cb3f851603f19e99f60a98475#diff-e9b09a44d9dc69444eca2300325e790a0cc6d2c8c3960f47519c7f8ef896f9e4
> >,
> > which breaks downstream code that relied on this layout. I'm aware of
> > the R_LEGACY_RCOMPLEX variable, but I still wouldn't expect an unreported
> > breaking change especially if it's aimed at R 4.3 (although I'm not sure
> if
> > it is). I believe src/include/R_ext/Complex.h, which this patch affects,
> is
> > considered part of the public R ABI since it's included by R.h.
> >
> > What should I, as a downstream package developer, do about this change?
>
> Please report the actual problem you have ran into.
>
> Thanks
> Tomas
>
> >
> > Cheers.
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
>

	[[alternative HTML version deleted]]


From r|p|ey @end|ng |rom @t@t@@ox@@c@uk  Mon Apr  3 16:13:58 2023
From: r|p|ey @end|ng |rom @t@t@@ox@@c@uk (Prof Brian Ripley)
Date: Mon, 3 Apr 2023 15:13:58 +0100
Subject: [Rd] Let R compile for libcurl8 ?
In-Reply-To: <20230403150708.6d753245@gaia.unibw-hamburg.de>
References: <20230403150708.6d753245@gaia.unibw-hamburg.de>
Message-ID: <094dbb74-9caf-c146-d13e-65add776cf21@stats.ox.ac.uk>

On 03/04/2023 14:07, Detlef Steuer wrote:
> Hi!
> 
> The same Inar reported for rawhide
> (https://stat.ethz.ch/pipermail/r-devel/2023-March/082482.html)
> is true for SuSE's distros.
> 
> Right now R does not compile with libcurl8, but SuSE Tumbleweed/Factory
> switched to 8 a week ago.
> 
> Would be great, if the patch Inar provided could be applied to
> main.
> 
> Detlef
> 

As in

CHANGES IN R 4.3.0:
...
     ? libcurl 8.x is now accepted by configure: despite a change in
       major version number it changes neither API nor ABI.

?

What version of R are you looking at?  (This has also been backported to 
R 4.2.3 patched although possibly untested there.)

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Mon Apr  3 16:15:13 2023
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Mon, 3 Apr 2023 16:15:13 +0200
Subject: [Rd] Breaking Change in Rcomplex Layout?
In-Reply-To: <CAPZyOoL7rLbLHwQMziADwg_Dy-UGNScdwi3wf_RawWyU2Y4v-Q@mail.gmail.com>
References: <CAPZyOoLG7Bgt0D_Nz-pdBv5k0_SmpFN9UuFE1-mKQxX76L=21g@mail.gmail.com>
 <e8c052d6-50ae-002d-71ba-5e160b56d419@gmail.com>
 <CAPZyOoL7rLbLHwQMziADwg_Dy-UGNScdwi3wf_RawWyU2Y4v-Q@mail.gmail.com>
Message-ID: <c90c269e-1fdd-b12d-263c-e8c4a92e08db@gmail.com>


On 4/3/23 15:50, Michael Milton wrote:
> Okay, but I'm afraid this will only mean something to Rust users. The 
> reason being that we encountered this issue in extendr: a Rust 
> extension library for R. The specific compiler errors we encounter 
> happen because bindgen (the Rust code generation library) read the 
> changed R header files, and generated a new type definition for 
> Rcomplex. Then, our downstream code that uses that bindgen-generated 
> code caused rustc compiler errors such as:
> |error[E0560]: union `libR_sys::Rcomplex` has no field named `r` --> 
> extendr-api\src\robj\into_robj.rs:93:20 | 93 | Rcomplex { r: 0., i: 0. 
> } | ^ `libR_sys::Rcomplex` does not have this field | = note: 
> available fields are: `__bindgen_anon_1`, `private_data_c`|
> and
> |error[E0609]: no field `i` on type `libR_sys::Rcomplex` --> 
> extendr-api\src\scalar\rcplx_default.rs:105:35 | 105 | 
> Rcplx(c64::new(val.r, val.i)) | ^ unknown field | = note: available 
> fields are: `__bindgen_anon_1`, `private_data_c` help: one of the 
> expressions' fields has a field of the same name | 105 | 
> Rcplx(c64::new(val.r, val.__bindgen_anon_1.i)) | +++++++++++++++++|
That seems like the generator does not support anonymous structures. 
Thanks for letting me know, but I am afraid it is not something that 
could be fixed on the R end.
> However, to put this into context, I would expect that C, C++ packages 
> would encounter a similar issue if they tried to access or modify 
> specific Rcomplex?fields in the same way.

No, you can access the fields as before in C (C11):

Rcomplex z;

z.r = 1; z.i = 2

this is what anonymous structures allow, this is why the structure is 
anonymous, not to break existing code.? The union there is to tell the 
compiler about the aliasing, to prevent it from misoptimizing the code. 
As far as I can tell this is valid C code, not a breaking change.

The only issues I know about so far are that you get a warning for 
initializations such as "z = {1, 2}", but still, they will be 
interpreted correctly by the compiler within the standard. However, "z = 
{ .r = 1, .i = 2}" worked before and works with the change.

The definition unfortunately is not valid C++, but works with C++ 
language extensions supported at least by GCC and clang, yet you may see 
warnings. R itself doesn't use C++, but some packages do.

Please note your subject is not quite right: the layout of Rcomplex did 
not change, at least not on systems supported by R. The layout is the 
same on systems which use self-alignment of structures.

Also please keep in mind R-devel is meant for unstable changes, it may 
not work, things may be reverted, it is partially used for testing. I've 
still tested this on all CRAN and Bioconductor packages before 
committing even to R-devel, but this is not always done and cannot be 
due to how much resources it takes. Obviously this will get a NEWS entry 
when/if it gets ported to 4.3.0 branch, in the form it would have at 
that point.

Best
Tomas


>
> On Mon, Apr 3, 2023 at 11:39?PM Tomas Kalibera 
> <tomas.kalibera at gmail.com> wrote:
>
>
>     On 4/3/23 14:07, Michael Milton wrote:
>     > Hi all,
>     >
>     > There seems to have been a breaking change in the R trunk caused
>     by a fix
>     > to bug 18430 <https://bugs.r-project.org/show_bug.cgi?id=18430> that
>     > relates to the layout of the Rcomplex typedef. Previously it was
>     a struct,
>     > but now it's a union by default
>     >
>     <https://github.com/r-devel/r-svn/commit/862f9f816ff3ff3cb3f851603f19e99f60a98475#diff-e9b09a44d9dc69444eca2300325e790a0cc6d2c8c3960f47519c7f8ef896f9e4>,
>     > which breaks downstream code that relied on this layout. I'm
>     aware of
>     > the R_LEGACY_RCOMPLEX variable, but I still wouldn't expect an
>     unreported
>     > breaking change especially if it's aimed at R 4.3 (although I'm
>     not sure if
>     > it is). I believe src/include/R_ext/Complex.h, which this patch
>     affects, is
>     > considered part of the public R ABI since it's included by R.h.
>     >
>     > What should I, as a downstream package developer, do about this
>     change?
>
>     Please report the actual problem you have ran into.
>
>     Thanks
>     Tomas
>
>     >
>     > Cheers.
>     >
>     >? ? ? ?[[alternative HTML version deleted]]
>     >
>     > ______________________________________________
>     > R-devel at r-project.org mailing list
>     > https://stat.ethz.ch/mailman/listinfo/r-devel
>
	[[alternative HTML version deleted]]


From @teuer @end|ng |rom h@u-hh@de  Mon Apr  3 16:24:31 2023
From: @teuer @end|ng |rom h@u-hh@de (Detlef Steuer)
Date: Mon, 3 Apr 2023 16:24:31 +0200
Subject: [Rd] Let R compile for libcurl8 ?
In-Reply-To: <094dbb74-9caf-c146-d13e-65add776cf21@stats.ox.ac.uk>
References: <20230403150708.6d753245@gaia.unibw-hamburg.de>
 <094dbb74-9caf-c146-d13e-65add776cf21@stats.ox.ac.uk>
Message-ID: <20230403162431.1bc23cb5@gaia.unibw-hamburg.de>

Am Mon, 3 Apr 2023 15:13:58 +0100
schrieb Prof Brian Ripley <ripley at stats.ox.ac.uk>:

> On 03/04/2023 14:07, Detlef Steuer wrote:
> > Hi!
> > 
> > The same Inar reported for rawhide
> > (https://stat.ethz.ch/pipermail/r-devel/2023-March/082482.html)
> > is true for SuSE's distros.
> > 
> > Right now R does not compile with libcurl8, but SuSE
> > Tumbleweed/Factory switched to 8 a week ago.
> > 
> > Would be great, if the patch Inar provided could be applied to
> > main.
> > 
> > Detlef
> >   
> 
> As in
> 
> CHANGES IN R 4.3.0:
> ...
>      ? libcurl 8.x is now accepted by configure: despite a change in
>        major version number it changes neither API nor ABI.
> 
> ?
> 
> What version of R are you looking at?  (This has also been backported
> to R 4.2.3 patched although possibly untested there.)
> 

I was looking on R-patched, with diff from this morning.

Still fails:
....
[  260s] checking for curl-config... /usr/bin/curl-config
[  260s] checking libcurl version ... 8.0.1
[  260s] checking for curl/curl.h... yes
[  260s] checking if libcurl is version 7 and >= 7.28.0... no
[  260s] configure: error: libcurl >= 7.28.0 library and headers are
required with support for https [  261s] error: Bad exit status from
/var/tmp/rpm-tmp.PUUqtM (%build) [  261s] 
[  261s] RPM build errors:
[  261s]     Bad exit status from /var/tmp/rpm-tmp.PUUqtM (%build)
[  261s] ### VM INTERACTION START ###
[  261s] [  234.216368][    T1] sysrq: Power Off
[  261s] [  234.218303][  T267] reboot: Power down
[  261s] ### VM INTERACTION END ###
[  261s] 
[  261s] cloud124 failed "build R-patched.spec" at Mon Apr  3 10:46:27
UTC 2023. [  261s] 

If it should build, I'll take a look, but because of that log it seemed
to me nothing had changed in the meantime.

Detlef

-- 
"Wozu leben wir, wenn nicht dazu, uns gegenseitig das Leben 
 einfacher zu machen. (George Eliot)" 

Dr. Detlef Steuer
Helmut-Schmidt-Universit?t
Fakult?t WiSo
Holstenhofweg 85
22043 Hamburg

Tel:  040/6541-2819
mail: steuer at hsu-hh.de


From r|p|ey @end|ng |rom @t@t@@ox@@c@uk  Mon Apr  3 16:46:52 2023
From: r|p|ey @end|ng |rom @t@t@@ox@@c@uk (Prof Brian Ripley)
Date: Mon, 3 Apr 2023 15:46:52 +0100
Subject: [Rd] Let R compile for libcurl8 ?
In-Reply-To: <20230403162431.1bc23cb5@gaia.unibw-hamburg.de>
References: <20230403150708.6d753245@gaia.unibw-hamburg.de>
 <094dbb74-9caf-c146-d13e-65add776cf21@stats.ox.ac.uk>
 <20230403162431.1bc23cb5@gaia.unibw-hamburg.de>
Message-ID: <8647fbc6-9277-385f-9310-5c0f104901bc@stats.ox.ac.uk>

On 03/04/2023 15:24, Detlef Steuer wrote:
> Am Mon, 3 Apr 2023 15:13:58 +0100
> schrieb Prof Brian Ripley <ripley at stats.ox.ac.uk>:
> 
>> On 03/04/2023 14:07, Detlef Steuer wrote:
>>> Hi!
>>>
>>> The same Inar reported for rawhide
>>> (https://stat.ethz.ch/pipermail/r-devel/2023-March/082482.html)
>>> is true for SuSE's distros.
>>>
>>> Right now R does not compile with libcurl8, but SuSE
>>> Tumbleweed/Factory switched to 8 a week ago.
>>>
>>> Would be great, if the patch Inar provided could be applied to
>>> main.
>>>
>>> Detlef
>>>    
>>
>> As in
>>
>> CHANGES IN R 4.3.0:
>> ...
>>       ? libcurl 8.x is now accepted by configure: despite a change in
>>         major version number it changes neither API nor ABI.
>>
>> ?
>>
>> What version of R are you looking at?  (This has also been backported
>> to R 4.2.3 patched although possibly untested there.)
>>
> 
> I was looking on R-patched, with diff from this morning.
> 
> Still fails:
> ....
> [  260s] checking for curl-config... /usr/bin/curl-config
> [  260s] checking libcurl version ... 8.0.1
> [  260s] checking for curl/curl.h... yes
> [  260s] checking if libcurl is version 7 and >= 7.28.0... no
> [  260s] configure: error: libcurl >= 7.28.0 library and headers are
> required with support for https [  261s] error: Bad exit status from
> /var/tmp/rpm-tmp.PUUqtM (%build) [  261s]
> [  261s] RPM build errors:
> [  261s]     Bad exit status from /var/tmp/rpm-tmp.PUUqtM (%build)
> [  261s] ### VM INTERACTION START ###
> [  261s] [  234.216368][    T1] sysrq: Power Off
> [  261s] [  234.218303][  T267] reboot: Power down
> [  261s] ### VM INTERACTION END ###
> [  261s]
> [  261s] cloud124 failed "build R-patched.spec" at Mon Apr  3 10:46:27
> UTC 2023. [  261s]
> 
> If it should build, I'll take a look, but because of that log it seemed
> to me nothing had changed in the meantime.

Again, what exactly is 'R-patched'?  The latest daily tarball

https://stat.ethz.ch/R/daily/R-patched_2023-03-29.tar.bz2

just built for me with

checking for curl-config... /usr/local/bin/curl-config
checking libcurl version ... 8.0.1
checking for curl/curl.h... yes
checking if libcurl is >= 7.28.0... yes
checking if libcurl supports https... yes

and reports itself as

R version 4.2.3 Patched (2023-03-29 r84146) -- "Shortstop Beagle"

Although as I mentioned, I had not tested it against curl 8.0.1 and did 
not know if anyone else had.

See also https://bugs.r-project.org/show_bug.cgi?id=18497

The patch has been in R-4-2-branch since

r84053 2023-03-25 12:37:42 +0000 (Sat, 25 Mar 2023)

At this time of year one has to be very careful about 'R-patched' -- for 
example CRAN check results labelled 'r-patched' are at least mainly for 
4.3.0 alpha.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


From @teuer @end|ng |rom h@u-hh@de  Mon Apr  3 16:53:47 2023
From: @teuer @end|ng |rom h@u-hh@de (Detlef Steuer)
Date: Mon, 3 Apr 2023 16:53:47 +0200
Subject: [Rd] Let R compile for libcurl8 ?
In-Reply-To: <8647fbc6-9277-385f-9310-5c0f104901bc@stats.ox.ac.uk>
References: <20230403150708.6d753245@gaia.unibw-hamburg.de>
 <094dbb74-9caf-c146-d13e-65add776cf21@stats.ox.ac.uk>
 <20230403162431.1bc23cb5@gaia.unibw-hamburg.de>
 <8647fbc6-9277-385f-9310-5c0f104901bc@stats.ox.ac.uk>
Message-ID: <20230403165347.57e4ec41@gaia.unibw-hamburg.de>

Am Mon, 3 Apr 2023 15:46:52 +0100
schrieb Prof Brian Ripley <ripley at stats.ox.ac.uk>:

> Again, what exactly is 'R-patched'?

R-4.2.3 with R-release.diff from Martin Maechler's machine applied.

Downloaded via curl(!) and cron every morning :-)

I'll take a look, what went wrong.

Thank you
Detlef

-- 
"Wozu leben wir, wenn nicht dazu, uns gegenseitig das Leben 
 einfacher zu machen. (George Eliot)" 

Dr. Detlef Steuer
Helmut-Schmidt-Universit?t
Fakult?t WiSo
Holstenhofweg 85
22043 Hamburg

Tel:  040/6541-2819
mail: steuer at hsu-hh.de


