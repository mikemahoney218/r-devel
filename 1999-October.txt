From p.dalgaard@biostat.ku.dk  Sat Oct  2 19:13:13 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Oct 1999 20:13:13 +0200
Subject: Macro-like for-loops
Message-ID: <x2d7uxr5qe.fsf@blueberry.kubism.ku.dk>


>From the silly-tricks department:

"foreach" <-
function (...) 
{
    Args <- match.call()[-1]
    N <- length(Args)
    Body <- Args[[N]]
    Args <- Args[-N]
    Tags <- names(Args)
    Lists <- lapply(Args, function(a) as.list(a)[-1])
    Lengths <- sapply(Lists, length)
    for ( i in 1:max(Lengths))
    {
        ix <- (i - 1) %% Lengths + 1
        l <- lapply(seq(along=ix), function(j) Lists[[j]][[ix[j]]])
        names(l) <- Tags
        bb <- eval(substitute(substitute(body,l),list(body=Body)))
        eval(bb,parent.frame())
    }
}

huey<-rnorm(50); dewey<-rnorm(50); louie<-rnorm(50)
par(mfcol=c(3,1))

foreach(x=list(huey,dewey,louie), hist(x))

Notice that in contrast to an ordinary for-loop, this kind of loop
automatically gets the titles right on the plots. It is a purely
lexical substitution, equivalent to

hist(huey) ; hist(dewey) ; hist(louie)

In this case, you save -4 keypresses..., but one can easily imagine
the usefulness for eliminating cut+paste errors in more complicated
cases. 

As written, it is possible to have several list-arguments which are
treated in parallel, recycled to the length of the longest one (as it
was possible to do in good ol' Genstat).

One potential drawback is that (as written, anyway) the function is
playing a bit too many tricks with its arguments. It actually takes
the list expression apart to get at the list of variable names. It
wouldn't work to put an actual list in there, i.e.

l <- list(huey,dewey,louie)
foreach(x=l, hist(x))

cannot work. It obviously never could, because l does not contain the
variable names, but it might be desirable to have some alternate
syntax that worked with stored namelist.

Would it be useful to put something like this in forthcoming versions
of R?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Oct  4 11:59:44 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 4 Oct 1999 11:59:44 +0100 (BST)
Subject: bitmap copies of plots
Message-ID: <199910041059.LAA01871@toucan.stats.ox.ac.uk>

Michael Lapsley was suggesting on R-help direct copies to gif/png/jpeg.

The following seems to do a sensible job for me of copying the current
device to any bitmap format supported by gs. The manipulation is needed
to work around assumptions made by postscript(), and I think better fixed
in postscript() (but not a couple of days before a release).

I want to make onefile=FALSE work on postscript() (it needs to start
a file for each page, and give it a EPSF-3.0 header), and to allow
user-specified paper sizes and the option of not centring on the page.

Oh, and I do know it is gswin32c on Windows: that is easy to incorporate
but I have not tested it.

One could attempt to retrieve height and width from the current device,
but I don't see that information is presently available from R code.

Any comments?


dev2bitmap <- function(file, type="png256", height=6, width=6, res=72,
                      pointsize, ...)
{
    rc <- system("gs -help > /dev/null")
    if(rc != 0) stop("Sorry, gs cannot be found")
    gs <- system("gs -help", intern=TRUE)
    st <- grep("^Available", gs)
    en <- grep("^Search", gs)
    gs <- gs[(st+1):(en-1)]
    devs <- c(strsplit(gs, " "), recursive=T)
    if(match(type, devs, 0) == 0)
        stop(paste(paste("Device ", type, "is not available"),
                   "Available devices are",
                   paste(gs, collapse="\n"), sep="\n"))
    if(missing(pointsize)) pointsize <- 1.5*min(width, height)
    tmp <- tempfile("Rbit")
    on.exit(unlink(tmp))
    dev.print(device=postscript, file=tmp, width=width,
              height=height, pointsize=pointsize, horizontal=F, ...)
    psfile <- scan(tmp, what="", sep="\n", quiet=TRUE)
    bb <- strsplit(psfile[9], " ")[[1]]
    ep <- grep("^%%EndProlog", psfile)
    unlink(tmp)
    tmp2 <- tempfile("Rbit")
    on.exit(unlink(tmp2))
    cat(psfile[1:ep], file=tmp2, sep="\n")
    cat(paste("-",bb[2], " -", bb[3], " translate\n", sep=""),
        file=tmp2, append=TRUE)
    cat(psfile[(ep+1):length(psfile)], file=tmp2, sep="\n", append=TRUE)
    cmd <- paste("gs -dNOPAUSE -dBATCH -q -sDEVICE=", type,
                 " -r", res,
                 " -g", ceiling(res*width), "x", ceiling(res*height),
                 " -sOutputFile=", file, " ", tmp2, sep="")
    system(cmd)
    invisible()
}

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Mon Oct  4 16:41:12 1999
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Mon, 04 Oct 1999 17:41:12 +0200
Subject: New Version of R Server
References: <199910041422.PAA05564@toucan.stats.ox.ac.uk>
Message-ID: <37F8CA98.89048D8E@univie.ac.at>



Prof Brian Ripley wrote:
> 
> Yes, we need one. I am having problems with Erich's latest add-in:
> it works about every other time, I think because is has some memory of the
> previous one. I don't think Excel 2000 removes add-ins cleanly.
> 

brian, we had a stress test of the addin yesterday
election ight forecast, the systen was running about 8 hours
without any problems.

win95+excel97

i have to start testing in excel2000 now.
i dod some very simple first tetst, and so far,
no problems.

uninstalling might be a a problem.
a relatively secure way of uninstalling found is:
first delete the xla file, with excel NOT running.
then start excel, it will complain about the missing addin.
then go to teh addin menu,
and click on the missing but still displayed
addin.
you will get the choice of completely removing it.

please try this once and tell me if the problems persist.

your excel2000 statments sound rather bad.

erich


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Oct  5 13:21:02 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 5 Oct 1999 14:21:02 +0200
Subject: bitmap copies of plots
In-Reply-To: <199910041059.LAA01871@toucan.stats.ox.ac.uk> (message from Prof
 Brian Ripley on Mon, 4 Oct 1999 11:59:44 +0100 (BST))
References: <199910041059.LAA01871@toucan.stats.ox.ac.uk>
Message-ID: <199910051221.OAA08391@sophie.ethz.ch>

I think your dev2bitmap() is a really neat idea!
Thank you
Further, I didn't know that (newer flavors of) gs  allows for so many 
different output formats
[for the unaware (as I was till now):
     gs --help
		 (1997 Aladdin Ghostscript 5.1)
 gives 69 devices (not all useful for dev2bitmap), 
 such as jpeg, tiff, png, pbm, pgm, pcx,...
]	
 
I think something like it should make it into the distribution
(shall I quickly write docu for it, saying it is somewhat experimental,
 even for 0.65.1 ?)

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct  5 13:56:50 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 5 Oct 1999 13:56:50 +0100 (BST)
Subject: bitmap copies of plots
In-Reply-To: <199910051221.OAA08391@sophie.ethz.ch>
Message-ID: <Pine.GSO.4.05.9910051352510.25038-100000@auk.stats>

On Tue, 5 Oct 1999, Martin Maechler wrote:

> I think your dev2bitmap() is a really neat idea!
> Thank you
> Further, I didn't know that (newer flavors of) gs  allows for so many 
> different output formats
> [for the unaware (as I was till now):
>      gs --help
> 		 (1997 Aladdin Ghostscript 5.1)
>  gives 69 devices (not all useful for dev2bitmap), 
>  such as jpeg, tiff, png, pbm, pgm, pcx,...

(5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is in test)

> ]	
>  
> I think something like it should make it into the distribution
> (shall I quickly write docu for it, saying it is somewhat experimental,
>  even for 0.65.1 ?)

I am going to put the postscript patches I need in for 0.65.1 today: I can
then put a cleaned up version in the distribution.

Basically, the pending changes make onefile actually do something, and a
`special' paper size allows arbitrary paper sizes (and no special borders).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  5 14:07:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Oct 1999 15:07:55 +0200
Subject: bitmap copies of plots
In-Reply-To: Prof Brian D Ripley's message of "Tue, 5 Oct 1999 13:56:50 +0100 (BST)"
References: <Pine.GSO.4.05.9910051352510.25038-100000@auk.stats>
Message-ID: <x27ll2t0pg.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:


> > 		 (1997 Aladdin Ghostscript 5.1)
> >  gives 69 devices (not all useful for dev2bitmap), 
> >  such as jpeg, tiff, png, pbm, pgm, pcx,...
> 
> (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is in test)

...but 5.10 is the one that still ships with RedHat (newer ones are
not GPL yet, I presume). Installed 6.1 yesterday, so I should know.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct  5 14:06:34 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 5 Oct 1999 14:06:34 +0100 (BST)
Subject: bitmap copies of plots
In-Reply-To: <x27ll2t0pg.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9910051403530.25038-100000@auk.stats>

On 5 Oct 1999, Peter Dalgaard BSA wrote:

> Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
> 
> > > 		 (1997 Aladdin Ghostscript 5.1)
> > >  gives 69 devices (not all useful for dev2bitmap), 
> > >  such as jpeg, tiff, png, pbm, pgm, pcx,...
> > 
> > (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is in test)
> 
> ...but 5.10 is the one that still ships with RedHat (newer ones are
> not GPL yet, I presume). Installed 6.1 yesterday, so I should know.

Yes, that is true. But if you want to use gs for PDF or to drive the
current colour inkjets you need something later than 5.10. (Even if
5.10 appears to work on small colour inkjet prints, it crashed on
production jobs here.)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Tue Oct  5 14:58:33 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 05 Oct 1999 06:58:33 -0700
Subject: bitmap copies of plots
In-Reply-To: Prof Brian D Ripley's message of "Tue, 5 Oct 1999 14:06:34 +0100 (BST)"
References: <Pine.GSO.4.05.9910051403530.25038-100000@auk.stats>
Message-ID: <87aepxhpti.fsf@alpha.cfas.washington.edu>



    >> >
    >> > (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is
    >> > in test)
    >>
    >> ...but 5.10 is the one that still ships with RedHat (newer ones
    >> are not GPL yet, I presume). Installed 6.1 yesterday, so I
    >> should know.

There are Debian packages... one of the good reasons to use Debian
:-).

But seriously, alien would import it, or I'm sure someone must have
done a contributed rpm for it?

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  5 15:29:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Oct 1999 16:29:55 +0200
Subject: bitmap copies of plots
In-Reply-To: rossini@biostat.washington.edu's message of "05 Oct 1999 06:58:33 -0700"
References: <Pine.GSO.4.05.9910051403530.25038-100000@auk.stats> <87aepxhpti.fsf@alpha.cfas.washington.edu>
Message-ID: <x2yadhswws.fsf@blueberry.kubism.ku.dk>

rossini@biostat.washington.edu (A.J. Rossini) writes:

>     >> >
>     >> > (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is
>     >> > in test)
>     >>
>     >> ...but 5.10 is the one that still ships with RedHat (newer ones
>     >> are not GPL yet, I presume). Installed 6.1 yesterday, so I
>     >> should know.
> 
> There are Debian packages... one of the good reasons to use Debian
> :-).
> 
> But seriously, alien would import it, or I'm sure someone must have
> done a contributed rpm for it?


Sure,

-----
[pd@blueberry pd]$ rpmfind --latest ghostscript
Installing ghostscript will require 4078 KBytes

### To Transfer:
ftp://ftp.mpi-sb.mpg.de/pub/linux/mirror/ftp.redhat.com/contrib/hurricane/i386/ghostscript-5.50-3.i386.rpm
Do you want to download these files to /tmp [Y/n/a] ? : n
-----

However, the point was that we need to be a little careful when
relying on non-free (or semi-free) items, because they don't travel on
CD releases, etc. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct  5 16:16:57 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 5 Oct 1999 16:16:57 +0100 (BST)
Subject: gs5.xx (was bitmap copies of plots)
In-Reply-To: <x2yadhswws.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9910051608320.10682-100000@auk.stats>

On 5 Oct 1999, Peter Dalgaard BSA wrote:

> rossini@biostat.washington.edu (A.J. Rossini) writes:
> 
> >     >> >
> >     >> > (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is
> >     >> > in test)
> >     >>
> >     >> ...but 5.10 is the one that still ships with RedHat (newer ones
> >     >> are not GPL yet, I presume). Installed 6.1 yesterday, so I
> >     >> should know.
> > 
> > There are Debian packages... one of the good reasons to use Debian
> > :-).
> > 
> > But seriously, alien would import it, or I'm sure someone must have
> > done a contributed rpm for it?
> 
> 
> Sure,
> 
> -----
> [pd@blueberry pd]$ rpmfind --latest ghostscript
> Installing ghostscript will require 4078 KBytes
> 
> ### To Transfer:
> ftp://ftp.mpi-sb.mpg.de/pub/linux/mirror/ftp.redhat.com/contrib/hurricane/i386/ghostscript-5.50-3.i386.rpm
> Do you want to download these files to /tmp [Y/n/a] ? : n

(There are gs5.93 rpms too.)
 
> However, the point was that we need to be a little careful when
> relying on non-free (or semi-free) items, because they don't travel on
> CD releases, etc. 

Right. I appreciated that. My point is that you may not be able use
dev2bitmap as a PDF driver without using GhostScript 6.0 or pre-test,
unless you restrict what you plot.  GNU-licensed gs6.xx is a year away (it
says in the pre-test). So either you accept the shackles or you get
inferior plots.

Unfortunately Aladdin and FSF seem to be having a spat, which is why
5.94 was put out with support for linking in readline removed.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Thu Oct  7 06:15:03 1999
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Oct 1999 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199910070515.HAA05575@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 130 *
Subject: lty=0 -- shouldn't it give an invisible line?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Feb 1999 21:45:43 +0100
--Strange effect on barplot
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 229 *
Subject: dev.print scaling bug?
From: John.Peters@tip.csiro.au (John Peters)
Date: Fri, 16 Jul 1999 12:10:48 +1000 (EST)
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 249 *
Subject: axis ignores srt/crt
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 16 Aug 1999 15:51:49 -0700 (PDT)
--`its's not a bug it is an imcomptibility'
* PR# 258 *
Subject: Greek letters in outer margins.
From: "BXC (Bendix Carstensen)" <BXC@NOVO.dk>
Date: Thu, 26 Aug 1999 12:09:17 +0200
--Uses *current* plot margins. 
--
--remove paste() from repro. instr.
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 281 *
Subject: mtext(. col = ...) stopped working in 0.65.0
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 17 Sep 1999 15:10:40 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
--Have put note in help file, at least.
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200

Directory:  Installation

* PR# 290 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Thu, 30 Sep 1999 21:18:49 +0200 (MET DST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 239 *
Subject: cbind is not generic as claimed, omits labels where S has them 
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 12:29:58 +0100 (BST)
--Cbind is now generic, still labelling issues. See also PR#240 and PR#241.
* PR# 240 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
--See PR#239
* PR# 241 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 6 Aug 1999 06:52:35 +0100 (BST)
--See PR#239
* PR# 257 *
Subject:  dimnames names lost when subscripting 
From: Andreas Weingessel <weingessel@ci.tuwien.ac.at>
Date: Wed, 25 Aug 1999 12:45:28 +0200
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file
--Should we not make the buffer static?
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 210 *
Subject: definition of R_problem_buf in S.h
From: vogels@ieee.org
Date: Mon, 14 Jun 1999 17:56:04 +0200 (MET DST)
--Same as #185

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 222 *
Subject: Use of R-Coda
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Fri, 9 Jul 1999 10:54:16 +0200 
--In Danish (?)  Looks as if PR#246 is the same in English
* PR# 234 *
Subject: R-bugs
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Tue, 27 Jul 1999 13:49:31 +0200
--Looks like PR#222 again, in Danish. See PR#246 for English version
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 260 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
Subject: Compilation of R under Caldera OpenLinux 2.2
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
--workaround is to install missing libg2c.a. See also PR#268 for sucess report
* PR# 268 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
From: "Jack N." <jnf@pcisys.net>
Date: Mon, 06 Sep 1999 08:03:02 -0600
--Followup: See PR#260

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

none
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Fri Oct  8 03:57:44 1999
From: ntakebay@bio.indiana.edu (ntakebay@bio.indiana.edu)
Date: Fri, 8 Oct 1999 04:57:44 +0200 (MET DST)
Subject: floor(NaN) problem fixed in massdist.c (PR#291)
Message-ID: <199910080257.EAA06625@pubhealth.ku.dk>

Full_Name: Naoki Takebayashi
Version: 0.65.0+R-release.diff (Oct 6, 1999)
OS: Linux/Alpha
Submission from: (NULL) (129.79.224.171)


This will fix the "problem 2 (crash in fft)" in Bug ID #277

On Linux/Alpha, make check failed because R could not handle the following
example in base-Ex.R

##___ Examples ___:

# The Old Faithful geyser data
data(faithful)
 :
 :
## Missing values:
x <- xx <- faithful$eruptions
x[i.out <- sample(length(x), 10)] <- NA
doR <- density(x, bw=0.15, na.rm = TRUE)
doN <- density(x, bw=0.15, na.rm = FALSE)
	### it fails at this statement ###
lines(doR, col="blue")
lines(doN, col="red")
points(xx[i.out], rep(.01,10))


The following statement in density() was not getting the right output:
       
    y <- .C("massdist", x = as.double(x), nx = N, xlo = as.double(lo), 
        xhi = as.double(up), y = double(2 * n), ny = as.integer(n), 
        NAOK = has.na, PACKAGE = "base")$y

y[1] and y[2] should be 0 and 0 but both of them became NaN after this
statement.

So I looked at src/appl/masdist.c with a debugger.  The bug is caused
by floor().  On Alpha/Linux, floot(NaN) returns 0.  x[i] in the
following code is the list passed from the above statement in
density().  The array x contains a couple of NaN.  When x[i] is NaN,
xpos become NaN.  Then ix = floor(xpos) returns an unexpected result.
On linux/i386, ix become -2147483648 when xpos = NaN(0x80000000007a2).
However ix become 0 on Linux/Alpha when xpos=NaN.  When xpos = NaN, it
shouldn't go into the following "if" statement.  But it goes inside on
Alpha/Linux (because ixmin is 0), and set y[0] and y[1] to NaN.

Following is extracted from massdist.c

    for(i=0 ; i<*nx ; i++) {
    	xpos = (x[i] - *xlow) / xdelta;
    	ix = floor(xpos);
    	fx = xpos - ix;
    	if(ixmin <= ix && ix <= ixmax) {
    	    y[ix] += (1.0 - fx);
    	    y[ix + 1] += fx;
    	}
    	else if(ix == -1) {
    	    y[0] += fx;
    	}
    	else if(ix == ixmax + 1) {
    	    y[ixmax + 1] += (1.0 - fx);
    	}
    }


So I think the statement

	if(ixmin <= ix && ix <= ixmax) {

should be changed to 

    	if((! isnan(ix)) && ixmin <= ix && ix <= ixmax) {

or 

everything inside of this for loop should be encolsed with 

    for(i=0 ; i<*nx ; i++) {
	if ( ! isnan( x[i] ) ) {
		:
		:
       }
    }

A patch to fix this bug is included.

--- R-0.65.0/src/appl/massdist.c.orig	Thu Oct  7 21:26:53 1999
+++ R-0.65.0/src/appl/massdist.c	Thu Oct  7 21:47:55 1999
@@ -38,6 +38,7 @@
 	y[i] = 0;
 
     for(i=0 ; i<*nx ; i++) {
+      if ( ! isnan( x[i] ) ) {
 	xpos = (x[i] - *xlow) / xdelta;
 	ix = floor(xpos);
 	fx = xpos - ix;
@@ -51,6 +52,7 @@
 	else if(ix == ixmax + 1) {
 	    y[ixmax + 1] += (1.0 - fx);
 	}
+      }
     }
 
     for(i=0 ; i<*ny ; i++)






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Oct  8 08:56:14 1999
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Fri, 8 Oct 1999 09:56:14 +0200 (MET DST)
Subject: Check script (PR#292)
Message-ID: <199910080756.JAA08367@pubhealth.ku.dk>

There is a syntax error in the "check" script in R 0.65.1, due to an
unescaped ` character. Line 96 should read

    echo " Results of \`check' are available in directory ../${CHECK_DIR}"

not

    echo " Results of `check' are available in directory ../${CHECK_DIR}"

Martyn

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct  8 09:43:53 1999
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 8 Oct 1999 10:43:53 +0200 (MET DST)
Subject: dimnames and subscripting (PR#293)
Message-ID: <199910080843.KAA09091@pubhealth.ku.dk>

I am not sure that this is a bug, but it was unexpected -- of course my
expectations are fallible, eg column ordering in model.matrix()!  When an
array is subscripted the names of the dimnames list are lost (v 64.1). 

fred <- array(1:12, 2:4, list(A = letters[1:2], B = letters[3:5], C =
    letters[6:9]))

dimnames(fred)
dimnames(fred[1, , ])
dimnames(fred[1, , , drop=FALSE])

In the first case I expected names B and C to be preserved; in the second
case, not quite so clear-cut, I also expected B and C to be preserved.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Oct  8 10:36:22 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 8 Oct 1999 11:36:22 +0200 (CEST)
Subject: Check script (PR#292)
In-Reply-To: <199910080756.JAA08367@pubhealth.ku.dk>
References: <199910080756.JAA08367@pubhealth.ku.dk>
Message-ID: <14333.47894.381498.830864@fangorn.ci.tuwien.ac.at>

>>>>> plummer  writes:

> There is a syntax error in the "check" script in R 0.65.1, due to an
> unescaped ` character. Line 96 should read

>     echo " Results of \`check' are available in directory ../${CHECK_DIR}"

> not

>     echo " Results of `check' are available in directory ../${CHECK_DIR}"

Fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct  8 11:32:10 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Oct 1999 12:32:10 +0200
Subject: dimnames and subscripting (PR#293)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Fri, 8 Oct 1999 10:43:53 +0200 (MET DST)"
References: <199910080843.KAA09091@pubhealth.ku.dk>
Message-ID: <x27lkycfdh.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I am not sure that this is a bug, but it was unexpected -- of course my
> expectations are fallible, eg column ordering in model.matrix()!  When an
> array is subscripted the names of the dimnames list are lost (v 64.1). 
> 
> fred <- array(1:12, 2:4, list(A = letters[1:2], B = letters[3:5], C =
>     letters[6:9]))
> 
> dimnames(fred)
> dimnames(fred[1, , ])
> dimnames(fred[1, , , drop=FALSE])
> 
> In the first case I expected names B and C to be preserved; in the second
> case, not quite so clear-cut, I also expected B and C to be preserved.

Yep, it's a bug. Same as reported as PR#257 by Andreas W. Still
pending investigation...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Oct  8 15:00:16 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 8 Oct 1999 16:00:16 +0200
Subject: [R] ts package on CRAN ?
In-Reply-To: <37FDF1E3.2A9B9C80@bank-banque-canada.ca> (message from Paul
 Gilbert on Fri, 08 Oct 1999 09:30:12 -0400)
References: <Pine.GSO.4.05.9910081003590.10042-100000@auk.stats> <99100812411306.00949@ida> <199910081306.PAA14669@sophie.ethz.ch> <37FDF1E3.2A9B9C80@bank-banque-canada.ca>
Message-ID: <199910081400.QAA14714@sophie.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
(privately to me,
 I'm cc'ing to R-devel since this should be of a wider interest)

    MM> However, if "tseries" would just contain a
    MM> require(ts)

    PaulG> So this is how this is suppose to be done. I guess I should read
    PaulG> some documentation somewhere. 

help(library)

 (especially the last sections) should give quite a bit of info on this.

    PaulG> Should this be "in line" in the
    PaulG> library file or should it be in the .First.lib file?

There's no such thing as a ".First.lib" file; of course,
you mean the commonly used  zzz.R  file (containing the  .First.lib <- .... )

Answer: Well, it depends.. :
Usually it doesn't matter where the require() is;
Current practice 
 (grep'ing in my directory tree of all the source of all the CRAN packages)
reveals that people have adopted several different ways of doing this.

The zzz.R (which should also contain the .First.lib definition)
is good place to put such a general require().
Recently, we had a case where using
aaa.R (I think, even "Aaa.R") instead was recommended  
{Idea: aaa.R would come at the very beginning of the installed package source}

If only very little functionality of a package depends on another
(non-standard) package, I'd consider to put the  require(..)
only inside the function requiring the package, something like

  if(!require(<pkg>))
   stop("The function `...' can only be used when package <pkg> is available!")

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Oct  8 17:54:09 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 8 Oct 1999 18:54:09 +0200 (MET DST)
Subject: floor(NaN) problem fixed in massdist.c (PR#291)
Message-ID: <199910081654.SAA16942@pubhealth.ku.dk>

Dear Naoki,
Thank you very much,

for your detailed bug report and your proposed patch.

>> This will fix the "problem 2 (crash in fft)" in Bug ID #277
>> 
>> On Linux/Alpha, make check failed because R could not handle the following
>> example in base-Ex.R
>> 
>> ##___ Examples ___:
>> 
>> # The Old Faithful geyser data
>> data(faithful)
>>  :
>>  :
>> ## Missing values:
>> x <- xx <- faithful$eruptions
>> x[i.out <- sample(length(x), 10)] <- NA
>> doR <- density(x, bw=0.15, na.rm = TRUE)
>> doN <- density(x, bw=0.15, na.rm = FALSE)
>> 	### it fails at this statement ###
>> lines(doR, col="blue")
>> ...

>> The following statement in density() was not getting the right output:
>>        
>>     y <- .C("massdist", x = as.double(x), nx = N, xlo = as.double(lo), 
>>         xhi = as.double(up), y = double(2 * n), ny = as.integer(n), 
>>         NAOK = has.na, PACKAGE = "base")$y
>> 
>> y[1] and y[2] should be 0 and 0 but both of them became NaN after this
>> statement.
>> 
>> So I looked at src/appl/masdist.c with a debugger.  The bug is caused
>> by floor().  On Alpha/Linux, floor(NaN) returns 0.

Thank you so much for finding this!

However, this is clearly a bug of (your version of) gcc, respectively libm
on Alpha/Linux.
In general, we do rely on IEEE Arithmetic working correctly.

>>  x[i] in the
>> following code is the list passed from the above statement in
>> density().  The array x contains a couple of NaN.  When x[i] is NaN,
>> xpos become NaN.  Then ix = floor(xpos) returns an unexpected result.
>> On linux/i386, ix become -2147483648 when xpos = NaN(0x80000000007a2).
>> However ix become 0 on Linux/Alpha when xpos=NaN.  When xpos = NaN, it
>> shouldn't go into the following "if" statement.  But it goes inside on
>> Alpha/Linux (because ixmin is 0), and set y[0] and y[1] to NaN.
>> 
>> Following is extracted from massdist.c
>> 
>>     for(i=0 ; i<*nx ; i++) {
>>     	xpos = (x[i] - *xlow) / xdelta;
>>     	ix = floor(xpos);
>>     	fx = xpos - ix;
>>     	if(ixmin <= ix && ix <= ixmax) {
>>     	    y[ix] += (1.0 - fx);
>>     	    y[ix + 1] += fx;
>>     	}
>>     	else if(ix == -1) {
>>     	    y[0] += fx;
>>     	}
>>     	else if(ix == ixmax + 1) {
>>     	    y[ixmax + 1] += (1.0 - fx);
>>     	}
>>     }
>> 
>> 
>> So I think the statement
>> 
>> 	if(ixmin <= ix && ix <= ixmax) {
>> 
>> should be changed to 
>> 
>>     	if((! isnan(ix)) && ixmin <= ix && ix <= ixmax) {
>> 
>> or 
>> ........

Instead of  isnan () , it should rather be ISNAN() [an R defined macro]
which is true for both NaN and NA.
(note that we also try to have a working ISNAN() when there's no isnan()
available from C
  (note that ANSI or POSIX C  unfortunately do NOT require IEEE arithmetic!)

I'll have a look at the code and your proposed patch.

Thanks again!

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Sun Oct 10 12:00:53 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Sun, 10 Oct 1999 12:00:53 +0100
Subject: msvrt.dll (was R-0.65.1 for WinNT/9X)
In-Reply-To: <000201bf12fa$1b5f0800$e3109d3e@fenris>; from Karl M. Syring on Sun, Oct 10, 1999 at 10:33:19AM +0200
References: <x2hfk0r1ft.fsf@blueberry.kubism.ku.dk> <000201bf12fa$1b5f0800$e3109d3e@fenris>
Message-ID: <19991010120052.19823@hal.stat.unipd.it>

On Sun, Oct 10, 1999 at 10:33:19AM +0200, Karl M. Syring wrote:
> I think, we have now a good reason to make the binary distributions to load
> msvrt.dll. Otherwise, you would probably get both crtdll and msvcrt loaded
> if you use COM/ActiveX. As we already now, this is a safe way into difficult
> and hard to diagnose problems.
> 

 [Cross-posted to  r-devel not to r-help]

 Karl,
 my idea is to switch to msvrt.dll soon. However. some more tests
 are needed.

 guido
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 10 12:03:05 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 10 Oct 1999 12:03:05 +0100 (BST)
Subject: msvrt.dll (was R-0.65.1 for WinNT/9X)
In-Reply-To: <19991010120052.19823@hal.stat.unipd.it>
Message-ID: <Pine.GSO.4.05.9910101135570.4687-100000@auk.stats>

On Sun, 10 Oct 1999, Guido Masarotto wrote:

> On Sun, Oct 10, 1999 at 10:33:19AM +0200, Karl M. Syring wrote:
> > I think, we have now a good reason to make the binary distributions to load
> > msvrt.dll. Otherwise, you would probably get both crtdll and msvcrt loaded
> > if you use COM/ActiveX. As we already now, this is a safe way into difficult
> > and hard to diagnose problems.

Nothing in the (unreleased) (D)COM stuff makes any use of msvcrt.dll.
I have just checked by removing from my system and re-running the tests.
It is all ATL based.

>  Karl,
>  my idea is to switch to msvrt.dll soon. However. some more tests
>  are needed.

In particular, we have to resolve what to do about machines without
msvcrt.dll.  Not all Windows machines have it, and I have read the
redistribution conditions on my copy of Visual Studio. I am not clear we
have any right to redistribute it with an application not compiled under
VC++6 (it might depend where we got it from) and if we do there seem to be
complex conditions on checking version numbers which will demand a quite
complex updater to be written.  It looks like having a local copy for the
application is not approved of.  (All I know is that the redistibution
conditions do depend on which of the many VS licences one has.)

Karl: it would be a great help if you could look into this for us, and
if the way looks clear provide us with a suitable updater, or point us
to a suitable ready-made one.

Another side effect of requiring msvcrt.dll appears to be to stop the
possibilities of using the cygwin and cross-compiling routes, since AFAIK
only the binaries for the mingw32 compiler are available to use msvcrt.dll.
Again, if you know more it would be very helpful if you could test this for
us.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From szimeras@irisa.fr  Tue Oct 12 17:38:44 1999
From: szimeras@irisa.fr (Stelios Zimeras)
Date: Tue, 12 Oct 1999 18:38:44 +0200
Subject: Compilation problem with R
Message-ID: <38036414.DDA145DF@irisa.fr>

Dear Sirs,

I try to compile the R ver 65.1 in my UNIX machine, but I have some
difficulties. In particular
running the ./configure I have the following results  (I give only the
no, all the others are yes)

checking whether gcc needs -traditional... no
checking for g77... no
checking for sin in -lmoto... no
chechecking for main in -lhdf5... no
cking for main in -lncurses... no
checking for main in -ldxml... no
checking for main in -lblas_risc... no
checking for rl_callback_read_char in -lreadline... no
checking for ANSI C header files... no
checking for vfork.h... no
checking for working vfork... no
checking for __setfpucw... no
checking for dl.h... no
checking for fpu_control.h... no
checking for hdf5.h... no
checking for ieee754.h... no
checking for readline/history.h... no
checking for blkcnt_t... no
checking how to deal with shared libraries...
"/usr/openwin/lib/config/sun.cf", line 154: macro ExtraLoadOptions
redefines previous macro at "/usr/openwin/lib/config/site.def", line 64
"/usr/openwin/lib/config/site.def", line 64: macro ExtraLoadOptions
redefines previous macro at "/usr/openwin/lib/config/sun.cf", line 154
done
checking whether -R must be followed by a space... no
checking for dnet_ntoa in -ldnet... no
checking for dnet_ntoa in -ldnet_stub... no
checking for gethostbyname... no
checking for connect... no
checking for IceConnectionNumber in -lICE... no

R is now configured for sparc-sun-solaris2.5

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc  -g -O2
  FORTRAN compiler:         f2c
  Gnome support:            no

and when I run the make command I have the following  (after all the
lines)

drotg.o(.text+0x170): undefined reference to `__d_sign'
*** Error code 1
make: Fatal error: Command failed for target `../../bin/R.X11'
Current working directory /udd/szimeras/rhome/R-0.65.1/src/main
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /udd/szimeras/rhome/R-0.65.1/src/main
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /udd/szimeras/rhome/R-0.65.1/src
*** Error code 1
make: Fatal error: Command failed for target `R'

Ofcourse I can run R.

Could you give me some directions about the problem?
Many thanks

Stelios Zimeras


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 12 23:45:42 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 1999 00:45:42 +0200
Subject: Compilation problem with R
In-Reply-To: Stelios Zimeras's message of "Tue, 12 Oct 1999 18:38:44 +0200"
References: <38036414.DDA145DF@irisa.fr>
Message-ID: <x2emf0fbah.fsf@blueberry.kubism.ku.dk>

Stelios Zimeras <szimeras@irisa.fr> writes:

> R is now configured for sparc-sun-solaris2.5
                          ^^^^^^^^^^^^^^^^^^^^
Aha. Now you're telling us...

> 
>   Source directory:         .
>   Installation directory:   /usr/local
>   C compiler:               gcc  -g -O2
>   FORTRAN compiler:         f2c
                              ^^^
>   Gnome support:            no
> 
> and when I run the make command I have the following  (after all the
> lines)
> 
> drotg.o(.text+0x170): undefined reference to `__d_sign'
> *** Error code 1

This looks like a fortran library gone missing. Perhaps the linker
doesn't know where to find it? You may need to hand-edit the Makeconf
file to tell it where to look (-L/opt/local/lib in FLIBS is a guess,
but it is completely dependent on your setup). 

Another option could be to install a g77 compiler.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Wed Oct 13 14:58:38 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (Thomas Hoffmann)
Date: Wed, 13 Oct 1999 15:58:38 +0200 (METDST)
Subject: formatReal()-bug (or Is there anybody out there w/o IEEE754?)
Message-ID: <199910131358.PAA06386@ehmgs2.et.tu-dresden.de>

On a system with IEEE_754 undefined, I run into an bug, when the value
of an element of the first argument (e.g., x[0]) of formatReal() is NA:

1. (format.c:235) if (!R_FINITE ..) gives nanflag=1 (!naflag remains 0)
2. (format.c:272..288) *m gets an value of -2147483643 (from the format 
                       fiddling, should not matter to us)
3. (format.c:289) because naflag is zero, m does not get the value of
                  R_print.na_width and we get back the unbelievable value 
                  from 2.

This crashes R in commands as 
	as.vector(NA,mode="double")
.

(Please reply to my mail address too, because I do not read r-devel regularly).
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 13 16:05:10 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 1999 17:05:10 +0200
Subject: [R] main/character.c (et.al): dangerous AllocBuffer()
In-Reply-To: Thomas Hoffmann's message of "Wed, 13 Oct 1999 15:21:11 +0200 (METDST)"
References: <199910131321.PAA06250@ehmgs2.et.tu-dresden.de>
Message-ID: <x2vh8b8fo9.fsf@blueberry.kubism.ku.dk>

Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:

> When called with len<0 the code is assumed to re-size buff to MAXELTSIZE:
> 
> 	realloc(buff, 0);
> 	buff = (char *) realloc(buff, MAXELTSIZE);
> 	bufsize = MAXELTSIZE;
--etc--

Fixed as suggested (free+malloc)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 13 16:17:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 1999 17:17:53 +0200
Subject: formatReal()-bug (or Is there anybody out there w/o IEEE754?)
In-Reply-To: Thomas Hoffmann's message of "Wed, 13 Oct 1999 15:58:38 +0200 (METDST)"
References: <199910131358.PAA06386@ehmgs2.et.tu-dresden.de>
Message-ID: <x2so3f8f31.fsf@blueberry.kubism.ku.dk>

Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:

> On a system with IEEE_754 undefined, I run into an bug, when the value
> of an element of the first argument (e.g., x[0]) of formatReal() is NA:
> 
> 1. (format.c:235) if (!R_FINITE ..) gives nanflag=1 (!naflag remains 0)
> 2. (format.c:272..288) *m gets an value of -2147483643 (from the format 
>                        fiddling, should not matter to us)
> 3. (format.c:289) because naflag is zero, m does not get the value of
>                   R_print.na_width and we get back the unbelievable value 
>                   from 2.
> 
> This crashes R in commands as 
> 	as.vector(NA,mode="double")
> .

If a system isn't IEEE, it might not know about NaN either, so I
suspect that one wants naflag = 1 rather than nanflag = 1.

Could you try it and report back?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From William.Venables@cmis.CSIRO.AU  Thu Oct 14 07:58:00 1999
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Thu, 14 Oct 1999 16:58:00 +1000
Subject: [R] Regression on non linear model
In-Reply-To: Your message of "Thu, 14 Oct 1999 07:38:39 +0100."
 <Pine.GSO.4.05.9910140730380.9722-100000@auk.stats>
Message-ID: <199910140700.RAA23011@snowy.nsw.cmis.CSIRO.AU>

> > 
> > The preferred way to do this is to use the I() function to protect
> > the ^2 and ^3 from being evaluated as part of the linear model
> > formula.  That is, write the call to lm with
> > 
> >  formula = Response ~ Var1 + I(Var1^2) + I(Var1^3)
> 
> I was doing this in a practical class yesterday. There is another way,
> 
> Response ~ poly(Var1, 3)
> 
> which fits the same cubic model by using orthogonal polynomials, and
> that has a number of numerical and statistical advantages. The fitted
> values will be the same, but the coefficients are those of the orthogonal
> polynomials, not the terms in the polynomial.  As I was telling my
> students, you might like to compare the two approaches.

One further advantage of doing it this way (in S-PLUS at least) is that you can
plot that component of the fitted curve very simply using plot.gam.  Now I know
we don't have a gam() in R yet, but I hope we plan to do so sometime and my
suggestion would be to start with a plot.gam and release that first.  It could
be done in a wet weekend (but I regret to say the weekends here are simply
beautiful.... :-)

-- 
-----------------------------------------------------------------
Bill Venables, Statistician, CMIS Environmetrics Project.

Physical address:                            Postal address:
CSIRO Marine Laboratories,                   PO Box 120,       
233 Middle St, Cleveland, Queensland         Cleveland, Qld, 4163
AUSTRALIA                                    AUSTRALIA

Telephone: +61 7 3826 7251     Email: Bill.Venables@cmis.csiro.au     
      Fax: +61 7 3826 7304


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 14 16:36:17 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 14 Oct 1999 08:36:17 -0700 (PDT)
Subject: [R] Regression on non linear model
In-Reply-To: <199910140700.RAA23011@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <Pine.GSO.4.10.9910140833150.2421-100000@wompom.biostat.washington.edu>

On Thu, 14 Oct 1999, Bill Venables wrote:

> One further advantage of doing it this way (in S-PLUS at least) is that you can
> plot that component of the fitted curve very simply using plot.gam.  Now I know
> we don't have a gam() in R yet, but I hope we plan to do so sometime and my
> suggestion would be to start with a plot.gam and release that first.  It could
> be done in a wet weekend (but I regret to say the weekends here are simply
> beautiful.... :-)

I have a predict(, type="terms") and also resid(,type="partial") for glms
which are the main part of these plots. I wrote it a few versions ago, so
I will probably have to update a bit. 

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Fri Oct 15 09:25:09 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (Thomas Hoffmann)
Date: Fri, 15 Oct 1999 10:25:09 +0200 (METDST)
Subject: IEEE_754 logic
Message-ID: <199910150825.KAA08308@ehmgs2.et.tu-dresden.de>

Can anybody of the architects of R enlighten me about the reasoning behind the selection of the IEEE 754 
mode for the building of R, please?

Special points of interest are:

1. The selection seems to be based on the availability of isnan() and finite(). Is this a common way 
to test for IEEE 754?

2. The C9x draft introduces isfinite() instead of finite() (and as I see, some systems, e.g. the 
macintosh, use this naming already). This is a deviation from the old ieee754 C mapping. I do not 
know, where we are in this transformation process now (most compilers seem to use finite(), still).

3. The C9x draft introduces the is*() functionality under the name of "classification MACROS". If an 
implementation implements this standard, autoconf misses isnan() and isfinite().

=============================================================================
Thomas Hoffmann, Institut fuer Halbleiter- und Mikrosystemtechnik, TU Dresden 
E-mail: hoffmann@ehmgs2.et.tu-dresden.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 15 16:03:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Oct 1999 17:03:54 +0200
Subject: IEEE_754 logic
In-Reply-To: Thomas Hoffmann's message of "Fri, 15 Oct 1999 10:25:09 +0200 (METDST)"
References: <199910150825.KAA08308@ehmgs2.et.tu-dresden.de>
Message-ID: <x2puyg4qed.fsf@blueberry.kubism.ku.dk>

Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:

> Can anybody of the architects of R enlighten me about the reasoning behind the selection of the IEEE 754 
> mode for the building of R, please?
> 
> Special points of interest are:
> 
> 1. The selection seems to be based on the availability of isnan() and finite(). Is this a common way 
> to test for IEEE 754?
> 
> 2. The C9x draft introduces isfinite() instead of finite() (and as I see, some systems, e.g. the 
> macintosh, use this naming already). This is a deviation from the old ieee754 C mapping. I do not 
> know, where we are in this transformation process now (most compilers seem to use finite(), still).
> 
> 3. The C9x draft introduces the is*() functionality under the name of "classification MACROS". If an 
> implementation implements this standard, autoconf misses isnan() and isfinite().
> 

Thanks for your comments. If you have suggestions for a safer way of
detecting the functionality in a platform-dependent way, we'd be happy
to know about it. However, one has to be careful; e.g., Solaris has
only finite() and no isfinite(), linux has both. There seems to be
almost no consistency in how different systems signal the precence of
IEEE compatibility. 

The heuristics in autoconf are more or less lifted  off of other
packages like Octave (right, Kurt?) and are by no means failsafe. 

I don't think it is a big deal to insert a check for finite() *or*
isfinite(), if that helps with some of your problems.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From szimeras@irisa.fr  Fri Oct 15 16:07:37 1999
From: szimeras@irisa.fr (Stelios Zimeras)
Date: Fri, 15 Oct 1999 17:07:37 +0200
Subject: R-suggestion
Message-ID: <38074338.E03B1107@irisa.fr>

Dear All,

Few days ago, I ask some informations that how I can solve my problem
with R installation due to fortran links. I have some interesting
suggestions and I thanks everyone for the quick reply. But the main
problem that I have is I need to do the link between the ./configure
program and the fortran libraries due to my quota space. Looking the
script of  the ./configure I found quite difficult to include any
command link inside the program . The question is, how I can do this
link?
I appreciate any suggestion for this problem, because I need to do some
experiments with this package.
Many thanks for your time

Stelios Zimeras

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Oct 18 09:08:14 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 18 Oct 1999 10:08:14 +0200 (CEST)
Subject: IEEE_754 logic
In-Reply-To: <x2puyg4qed.fsf@blueberry.kubism.ku.dk>
References: <199910150825.KAA08308@ehmgs2.et.tu-dresden.de>
 <x2puyg4qed.fsf@blueberry.kubism.ku.dk>
Message-ID: <14346.54638.829489.764648@fangorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:
>> Can anybody of the architects of R enlighten me about the reasoning behind the selection of the IEEE 754 
>> mode for the building of R, please?
>> 
>> Special points of interest are:
>> 
>> 1. The selection seems to be based on the availability of isnan() and finite(). Is this a common way 
>> to test for IEEE 754?
>> 
>> 2. The C9x draft introduces isfinite() instead of finite() (and as I see, some systems, e.g. the 
>> macintosh, use this naming already). This is a deviation from the old ieee754 C mapping. I do not 
>> know, where we are in this transformation process now (most compilers seem to use finite(), still).
>> 
>> 3. The C9x draft introduces the is*() functionality under the name of "classification MACROS". If an 
>> implementation implements this standard, autoconf misses isnan() and isfinite().
>> 

> Thanks for your comments. If you have suggestions for a safer way of
> detecting the functionality in a platform-dependent way, we'd be happy
> to know about it. However, one has to be careful; e.g., Solaris has
> only finite() and no isfinite(), linux has both. There seems to be
> almost no consistency in how different systems signal the precence of
> IEEE compatibility. 

> The heuristics in autoconf are more or less lifted  off of other
> packages like Octave (right, Kurt?) and are by no means failsafe.

Not quite.  I don't think Octave worries about isfinite() at all.  We
check for finite() as a library function in autoconf.  In addition, we
do the following in `Arith.h':

#include <math.h>
#ifdef Macintosh
# define finite(x)      isfinite(x)
#else
# ifndef HAVE_FINITE
#  ifndef finite                /* Do not declare if macro! */
#   ifdef isfinite              /* HPUX math.h */
#     define finite(x)  isfinite(x)
#   else
      int finite(double);
#   endif
#  endif
# endif
#endif

which seems to give what we want, no?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Mon Oct 18 09:30:15 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (Thomas Hoffmann)
Date: Mon, 18 Oct 1999 10:30:15 +0200 (METDST)
Subject: IEEE_754 logic
Message-ID: <199910180830.KAA01996@ehmgs2.et.tu-dresden.de>

> >>>>> Peter Dalgaard BSA writes:  
> > > Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:  
> >> 3.  The C9x draft introduces
the is*() functionality under the name of "classification MACROS".  If an 
> >>implementation implements this standard, autoconf misses isnan() and isfinite().
> >>

The problem for me is, that if isnan and isfinite are the way C9x says (i.e.
are MACROS), then configure concludes "not there" (AC_FUNCS misses macros
(intentionally)).

>From this it reasons "not IEEE 754".

Then I get back to a native finite() in Arith.h, but IEEE 754 mode was switched
off.

So I see two topics:

1.  Maybe not to (only) check if isnan/isfinite are library functions, but also
to check for working macros (I have not found a predefined macro in Autoconf for
this).

This seems of some importance to me, because it is not only an idiosyncracy of a
singular system, but may become a more widespread problem if systems become C9x
compliant someday.

2.  Introduce a more bulletproof check for IEEE 754.

Is there possibly a computation we can carry out and conclude from its result to
IEEE 754?  I just have no idea.

=============================================================================
Thomas Hoffmann, Institut fuer Halbleiter- und Mikrosystemtechnik, TU Dresden
E-mail:  hoffmann@ehmgs2.et.tu-dresden.de
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct 20 20:07:17 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 20 Oct 1999 21:07:17 +0200 (MET DST)
Subject: Sun's make "almost" works
Message-ID: <14350.4837.785625.139546@gargle.gargle.HOWL>

I don't know if we still strive for  non-GNU make capability..

Anyway, here a report:

I was using the builddir != srcdir approach on Sun Solaris 2.6,
and normal Sun make (/usr/ccs/bin/make) worked up to producing a correct
R.X11 binary.

It failed when trying to make the first  src/library/<pkg>/src/<pkg>.so,
namely in eda/src  with

make: Fatal error: Don't know how to make target `line.o'

where GNU make then did

gcc -I../../../../include  -DHAVE_CONFIG_H  -fPIC -g -O2 -c ../../../../../SRC/src/library/eda/src/line.c -o line.o
.......

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Oct 21 01:16:10 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 20 Oct 1999 17:16:10 -0700
Subject: error in split?
Message-ID: <87zoxd36wl.fsf@alpha.cfas.washington.edu>



Just saw the following which looked strange (Thomas, I'll bug you
about it tommorow...):

(ctl and group are factors, vectors of strings; ddna is a vector of
#'s) 

Does it have to do with the number of quotes?

best,
-tony
	
> ctl.x.group <- interaction(ctl,group)
> my.list <- split(ddna,ctl.x.group)
Error in split(x, f) : second argument must be a factor
> is.factor(ctl.x.group)
[1] TRUE
> ### Thoughts?  here's ctl and group (trimmed for space):
> ctl
   [1] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
   [7] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
  [13] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
[1783] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1789] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1795] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1801] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1807] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1813] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1819] \"NONCTL\" \"NONCTL\"
Levels:  "CTL" "NONCTL" 
> 
> group
   [1] \"L\" \"P\" \"L\" \"P\" \"L\" \"R\" \"L\" \"L\" \"R\" \"R\" \"A\" \"L\"
  [13] \"R\" \"R\" \"R\" \"L\" \"R\" \"R\" \"R\" \"L\" \"L\" \"L\" \"A\" \"P\"
  [25] \"R\" \"P\" \"P\" \"L\" \"L\" \"R\" \"L\" \"R\" \"L\" \"P\" \"P\" \"P\"
  [37] \"P\" \"R\" \"A\" \"L\" \"A\" \"P\" \"P\" \"L\" \"R\" \"P\" \"R\" \"P\"
  [49] \"R\" \"P\" \"R\" \"R\" \"R\" \"A\" \"R\" \"L\" \"R\" \"L\" \"R\" \"A\"
  [61] \"P\" \"R\" \"R\" \"R\" \"R\" \"R\" \"P\" \"P\" \"P\" \"L\" \"R\" \"A\"
[1765] \"L\" \"P\" \"P\" \"P\" \"L\" \"L\" \"L\" \"P\" \"L\" \"P\" \"L\" \"L\"
[1777] \"P\" \"R\" \"L\" \"P\" \"L\" \"R\" \"R\" \"L\" \"A\" \"L\" \"A\" \"P\"
[1789] \"P\" \"P\" \"A\" \"A\" \"L\" \"L\" \"L\" \"P\" \"L\" \"P\" \"R\" \"L\"
[1801] \"L\" \"A\" \"R\" \"P\" \"L\" \"P\" \"L\" \"L\" \"L\" \"L\" \"L\" \"L\"
[1813] \"R\" \"P\" \"L\" \"R\" \"A\" \"L\" \"A\" \"L\"
Levels:  "A" "L" "P" "R" 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Oct 21 01:19:02 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: Wed, 20 Oct 1999 17:19:02 -0700 (PDT)
Subject: error in split...
Message-ID: <m11e5wc-000ox5C@alpha.cfas.washington.edu>

Date: 20 Oct 1999 17:19:02 -0700
Message-ID: <87yacx36rt.fsf@alpha.cfas.washington.edu>
Lines: 62


(repeated: 
> version
         _                 
platform i686-unknown-linux
arch     i686              
os       linux             
system   i686, linux       
status   Release           
major    0                 
minor    65.1              
year     1999              
month    October           
day      07                
language R                 
> 
)

Just saw the following which looked strange (Thomas, I'll bug you
about it tommorow...):

(ctl and group are factors, vectors of strings; ddna is a vector of
#'s) 

Does it have to do with the number of quotes?

best,
-tony
	
> ctl.x.group <- interaction(ctl,group)
> my.list <- split(ddna,ctl.x.group)
Error in split(x, f) : second argument must be a factor
> is.factor(ctl.x.group)
[1] TRUE
> ### Thoughts?  here's ctl and group (trimmed for space):
> ctl
   [1] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
   [7] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
  [13] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
[1783] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1789] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1795] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1801] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1807] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1813] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1819] \"NONCTL\" \"NONCTL\"
Levels:  "CTL" "NONCTL" 
> 
> group
   [1] \"L\" \"P\" \"L\" \"P\" \"L\" \"R\" \"L\" \"L\" \"R\" \"R\" \"A\" \"L\"
  [13] \"R\" \"R\" \"R\" \"L\" \"R\" \"R\" \"R\" \"L\" \"L\" \"L\" \"A\" \"P\"
  [25] \"R\" \"P\" \"P\" \"L\" \"L\" \"R\" \"L\" \"R\" \"L\" \"P\" \"P\" \"P\"
  [37] \"P\" \"R\" \"A\" \"L\" \"A\" \"P\" \"P\" \"L\" \"R\" \"P\" \"R\" \"P\"
  [49] \"R\" \"P\" \"R\" \"R\" \"R\" \"A\" \"R\" \"L\" \"R\" \"L\" \"R\" \"A\"
  [61] \"P\" \"R\" \"R\" \"R\" \"R\" \"R\" \"P\" \"P\" \"P\" \"L\" \"R\" \"A\"
[1765] \"L\" \"P\" \"P\" \"P\" \"L\" \"L\" \"L\" \"P\" \"L\" \"P\" \"L\" \"L\"
[1777] \"P\" \"R\" \"L\" \"P\" \"L\" \"R\" \"R\" \"L\" \"A\" \"L\" \"A\" \"P\"
[1789] \"P\" \"P\" \"A\" \"A\" \"L\" \"L\" \"L\" \"P\" \"L\" \"P\" \"R\" \"L\"
[1801] \"L\" \"A\" \"R\" \"P\" \"L\" \"P\" \"L\" \"L\" \"L\" \"L\" \"L\" \"L\"
[1813] \"R\" \"P\" \"L\" \"R\" \"A\" \"L\" \"A\" \"L\"
Levels:  "A" "L" "P" "R" 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Thu Oct 21 06:15:02 1999
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Oct 1999 07:15:02 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199910210515.HAA03403@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 229 *
Subject: dev.print scaling bug?
From: John.Peters@tip.csiro.au (John Peters)
Date: Fri, 16 Jul 1999 12:10:48 +1000 (EST)
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 249 *
Subject: axis ignores srt/crt
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 16 Aug 1999 15:51:49 -0700 (PDT)
--`its's not a bug it is an imcomptibility'
* PR# 258 *
Subject: Greek letters in outer margins.
From: "BXC (Bendix Carstensen)" <BXC@NOVO.dk>
Date: Thu, 26 Aug 1999 12:09:17 +0200
--Uses *current* plot margins. 
--
--remove paste() from repro. instr.
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
--Have put note in help file, at least.
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200

Directory:  Installation

* PR# 290 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Thu, 30 Sep 1999 21:18:49 +0200 (MET DST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 239 *
Subject: cbind is not generic as claimed, omits labels where S has them 
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 12:29:58 +0100 (BST)
--Cbind is now generic, still labelling issues. See also PR#240 and PR#241.
* PR# 240 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
--See PR#239
* PR# 241 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 6 Aug 1999 06:52:35 +0100 (BST)
--See PR#239
* PR# 257 *
Subject:  dimnames names lost when subscripting 
From: Andreas Weingessel <weingessel@ci.tuwien.ac.at>
Date: Wed, 25 Aug 1999 12:45:28 +0200
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file
--Should we not make the buffer static?
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 210 *
Subject: definition of R_problem_buf in S.h
From: vogels@ieee.org
Date: Mon, 14 Jun 1999 17:56:04 +0200 (MET DST)
--Same as #185

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 222 *
Subject: Use of R-Coda
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Fri, 9 Jul 1999 10:54:16 +0200 
--In Danish (?)  Looks as if PR#246 is the same in English
* PR# 234 *
Subject: R-bugs
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Tue, 27 Jul 1999 13:49:31 +0200
--Looks like PR#222 again, in Danish. See PR#246 for English version
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 260 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
Subject: Compilation of R under Caldera OpenLinux 2.2
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
--workaround is to install missing libg2c.a. See also PR#268 for sucess report
* PR# 268 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
From: "Jack N." <jnf@pcisys.net>
Date: Mon, 06 Sep 1999 08:03:02 -0600
--Followup: See PR#260

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 291 *
Subject: floor(NaN) problem fixed in massdist.c
From: ntakebay@bio.indiana.edu
Date: Fri, 8 Oct 1999 04:57:42 +0200 (MET DST)
* PR# 292 *
Subject: Check script
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 08 Oct 1999 09:59:04 +0200 (CEST)
* PR# 293 *
Subject: dimnames and subscripting
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Fri, 8 Oct 1999 09:43:51 +0100 (BST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Oct 21 07:48:28 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 21 Oct 1999 08:48:28 +0200 (CEST)
Subject: Sun's make "almost" works
In-Reply-To: <14350.4837.785625.139546@gargle.gargle.HOWL>
References: <14350.4837.785625.139546@gargle.gargle.HOWL>
Message-ID: <14350.46908.819883.590823@fangorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

> I don't know if we still strive for  non-GNU make capability..

Yes.  However, my experience is that for non-GNU make we typically need
builddir == srcdir.

> Anyway, here a report:

> I was using the builddir != srcdir approach on Sun Solaris 2.6, and
> normal Sun make (/usr/ccs/bin/make) worked up to producing a correct
> R.X11 binary.

> It failed when trying to make the first
> src/library/<pkg>/src/<pkg>.so, namely in eda/src with

> make: Fatal error: Don't know how to make target `line.o'

> where GNU make then did

> gcc -I../../../../include  -DHAVE_CONFIG_H  -fPIC -g -O2 -c ../../../../../SRC/src/library/eda/src/line.c -o line.o
> .......

Hmm, what is different between the rules in src and the library ones?
Can you try replacing $(SHLIB) by its value in eda's src/Makefile and
then see what happens?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Oct 21 09:20:44 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Oct 1999 10:20:44 +0200 (MET DST)
Subject: error in split... (R 0.65.1) -- and patch (PR#294)
Message-ID: <199910210820.KAA00945@pubhealth.ku.dk>

Thanks for the report.

It is *not* a problem of the quotes  (but how on earth do you get such
			 horrible factor levels with these extra quotes ?)

As a matter of fact, (and as  ?bug.report tries to say)
the bug report should go to  R-bugs, not R-devel;
and preferrably be completely reproducible (using builtin or constructed data)

Here it is, in its reproducible form

a <- gl(3,2,11, lab=LETTERS[1:3])
(aa   <- interaction( a,a))

> split(seq(a), aa)
Error in split(x, f) : second argument must be a factor

The following is a patch (not fully tested, yet):

--- split.R	1999/07/30 14:25:56	1.3
+++ split.R	1999/10/21 08:18:34
@@ -5,7 +5,7 @@
 split.default <-
     function( x, f )
 {
-    f <- as.factor(f)
+    f <- factor(f) # drop extraneous levels
     if(is.null(class(x)))
     {
         retval <- .Internal(split(x, f))


    tony> Just saw the following which looked strange (Thomas, I'll bug you
    tony> about it tommorow...):

    tony> (ctl and group are factors, vectors of strings; ddna is a vector of
    tony> #'s) 

    tony> Does it have to do with the number of quotes?

	
    tony> ctl.x.group <- interaction(ctl,group)
    tony> my.list <- split(ddna,ctl.x.group)
    tony> Error in split(x, f) : second argument must be a factor
    tony> is.factor(ctl.x.group)
    tony> [1] TRUE
    tony> ### Thoughts?  here's ctl and group (trimmed for space):
    tony> ctl
    tony> [1] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
    tony> [7] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
	      ...

    tony> [1813] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
    tony> [1819] \"NONCTL\" \"NONCTL\"
    tony> Levels:  "CTL" "NONCTL" 
    tony> 
    tony> group
    tony> [1] \"L\" \"P\" \"L\" \"P\" \"L\" \"R\" \"L\" \"L\" \"R\" \"R\" ..
    tony> [13] \"R\" \"R\" \"R\" \"L\" \"R\" \"R\" \"R\" \"L\" \"L\" \"L\"..
    .....
    tony> Levels:  "A" "L" "P" "R" 
    tony> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Oct 21 10:20:46 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 21 Oct 1999 11:20:46 +0200 (CEST)
Subject: IEEE_754 logic
In-Reply-To: <199910180830.KAA01996@ehmgs2.et.tu-dresden.de>
References: <199910180830.KAA01996@ehmgs2.et.tu-dresden.de>
Message-ID: <14350.56046.340864.856611@fangorn.ci.tuwien.ac.at>

>>>>> Thomas Hoffmann writes:

>> >>>>> Peter Dalgaard BSA writes:  
>> > > Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:  
>> >> 3.  The C9x draft introduces
> the is*() functionality under the name of "classification MACROS".  If an 
>> >>implementation implements this standard, autoconf misses isnan() and isfinite().
>> >>

> The problem for me is, that if isnan and isfinite are the way C9x says
> (i.e.  are MACROS), then configure concludes "not there" (AC_FUNCS
> misses macros (intentionally)).

> From this it reasons "not IEEE 754".

> Then I get back to a native finite() in Arith.h, but IEEE 754 mode was
> switched off.

> So I see two topics:

> 1.  Maybe not to (only) check if isnan/isfinite are library functions,
> but also to check for working macros (I have not found a predefined
> macro in Autoconf for this).

> This seems of some importance to me, because it is not only an
> idiosyncracy of a singular system, but may become a more widespread
> problem if systems become C9x compliant someday.

This should be doable.  In fact, this is what the code in Arith.h does
for one case, sort of.  I don't think that there is a macro in autoconf
that checks whether FOO exists as a library function or is defined as a
preprocessor symbol for another library function.

(We used to have a similar problem with sigsetjmp, which e.g. under
GNU/Linux is a macro ... so code which later tests for HAVE_SIGSETJMP
would not do the right thing.  I ended up writing a test which uses
AC_EGREP_HEADER.)

Question: does IEEE 754 require the `#include <math.h>'?  (And do all
implementations conform?)  Then we could use AC_EGREP_HEADER tests for
finite and isfinite ...

> 2.  Introduce a more bulletproof check for IEEE 754.

> Is there possibly a computation we can carry out and conclude from its
> result to IEEE 754?  I just have no idea.

(Don't think so.  Does anyone know?)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 21 16:36:37 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 21 Oct 1999 17:36:37 +0200 (MET DST)
Subject: free heap < 0 (PR#295)
Message-ID: <199910211536.RAA06300@pubhealth.ku.dk>


I allocated --vsize 250M (on a machine with 512Mb physical memory) and ran
> gcinfo(T)
> repeat{mean(rnorm(100))}
Garbage collection [nr. 2]...
129352 cons cells free (51%)
255636 Kbytes of heap free (-31%)


The percentage of heap free is less than 0.



--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Patched (unreleased)
 major = 0
 minor = 65.0
 year = 1999
 month = September
 day = 21
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Oct 21 16:40:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 21 Oct 1999 11:40:14 -0400
Subject: require - warn.conflicts
Message-ID: <380F33DE.4B06BAC3@bank-banque-canada.ca>

I am trying to straighten up my DSE package to use require() as that seems to be
a good mechanism. I have several packages:  dse requires tframe which requires
syskern which masks a few methods in base ( RNGkind rnorm runif).

If  I do require(dse) I get 3 copies of a six line warning (lots of white space)
about syskern methods masking base methods. If I use library(dse) I only get 2.
(I've simplified the situation somewhat,  I really have five or six levels of
requires and lots and lots of warning messages.) It would be nice if a single
warning could be produced, but at least could require() please be modified with
a warn.conflicts argument which is passed to library. Below is a fixed version.

Paul Gilbert
_______

 require <- function (name, quietly = FALSE, warn.conflicts=TRUE)
{
    name <- as.character(substitute(name))
    if (!exists(".Provided", inherits = TRUE))
        assign(".Provided", character(0), envir = .GlobalEnv)
    if (is.na(match(paste("package", name, sep = ":"), search())) &&
        is.na(match(name, .Provided))) {
        if (!quietly)
            cat("Loading required package:", name, "\n")
        library(name, char = TRUE, logical = TRUE,
warn.conflicts=warn.conflicts)
    }
    else TRUE
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 21 16:59:24 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 21 Oct 1999 17:59:24 +0200 (MET DST)
Subject: source(,echo=T) doesn't echo comments (PR#296)
Message-ID: <199910211559.RAA06428@pubhealth.ku.dk>


I don't know if this is a bug report or a feature request, but a colleague
complained that source(,echo=T) doesn't echo the comments from the source
file.

	
Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Oct 21 17:42:51 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Oct 1999 18:42:51 +0200 (MET DST)
Subject: source(,echo=T) doesn't echo comments (PR#296)
Message-ID: <199910211642.SAA06551@pubhealth.ku.dk>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> I don't know if this is a bug report or a feature request, but a
    TL> colleague complained that source(,echo=T) doesn't echo the comments
    TL> from the source file.

This is what the new comment treatment brought us
{I hate it as well;  also applies to   example(.)}.

It seemed very hard to correctly attach comments to expressions,
(remember all the misplaced comments in 0.63.x ?).
so now the parser already throws all comments into the trash can.
No way to see them anymore.
AFAIK, we only see them with functions that have "keep.source"
Peter Dalgaard will be able to elaborate.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 21 18:30:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Oct 1999 19:30:53 +0200
Subject: source(,echo=T) doesn't echo comments (PR#296)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Thu, 21 Oct 1999 18:42:51 +0200 (MET DST)"
References: <199910211642.SAA06551@pubhealth.ku.dk>
Message-ID: <x2yacwk4du.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> >>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:
> 
>     TL> I don't know if this is a bug report or a feature request, but a
>     TL> colleague complained that source(,echo=T) doesn't echo the comments
>     TL> from the source file.
> 
> This is what the new comment treatment brought us
> {I hate it as well;  also applies to   example(.)}.
> 
> It seemed very hard to correctly attach comments to expressions,
> (remember all the misplaced comments in 0.63.x ?).
> so now the parser already throws all comments into the trash can.
> No way to see them anymore.
> AFAIK, we only see them with functions that have "keep.source"
> Peter Dalgaard will be able to elaborate.

There's not much more to say. If anyone can think of a better
scheme (perhaps keeping line numbers with the parsed expressions and
rereading the file?)...

The keep.source functionality is also a mixed blessing. It prevents
the system from throwing away things that were commented out and
messing up carefully formatted code, but is also leaves you stuck with
that which was sloppily writte to begin with.

Otherwise we have to rethink the parser. 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eli@ce.berkeley.edu  Fri Oct 22 21:19:12 1999
From: eli@ce.berkeley.edu (Eli Ateljevich)
Date: Fri, 22 Oct 1999 13:19:12 -0700
Subject: No subject
Message-ID: <4.1.19991022114553.00a91820@alpha-5.ce.berkeley.edu>

Hi.
I love R. I have had two compatibility issues in shifting my code over from
Splus

cts,rts, its:    are there any plans to incorporate these classes?

regexpr: R does not seem to have any regular expression matching function,
although that capability seems like it would be fairly simple to add for
someone who knew what they were doing, since the internal code is already
there and someone would just have to write a wrapper. If someone explained
the steps to adding an internal function I would give it a shot.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Oct 22 21:40:36 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 22 Oct 1999 15:40:36 -0500
Subject: none
In-Reply-To: Eli Ateljevich's message of "Fri, 22 Oct 1999 13:19:12 -0700"
References: <4.1.19991022114553.00a91820@alpha-5.ce.berkeley.edu>
Message-ID: <6rhfjjuo1n.fsf@franz.stat.wisc.edu>

Eli Ateljevich <eli@ce.berkeley.edu> writes:

> regexpr: R does not seem to have any regular expression matching function,
> although that capability seems like it would be fairly simple to add for
> someone who knew what they were doing, since the internal code is already
> there and someone would just have to write a wrapper. If someone explained
> the steps to adding an internal function I would give it a shot.

check 
 help(grep)
in R.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Mon Oct 25 08:37:16 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (Thomas Hoffmann)
Date: Mon, 25 Oct 1999 09:37:16 +0200 (METDST)
Subject: gc_inhibit_torture definition twice?
Message-ID: <199910250737.JAA01900@ehmgs2.et.tu-dresden.de>

I have a problem to understand the way gc_inhibit_torture is defined.

In include/Defn.h it is declared as extern, using the __MAIN__ trick this leads to
a definition in main/main.c.

But in main/memory.c you define (and initialize) gc_inhibit_torture again:

    int gc_inhibit_torture = 1; /* gets set to zero after initialisations */

Then, in e.g. unix/system.c immediately at the beginning of main() you initialize 
gc_inhibit_torture once more:

int main(int ac, char **av)
{
    int value, ierr;
    char *p, msg[1024];
    structRstart rstart;
    Rstart Rp = &rstart;

    gc_inhibit_torture = 1;
    
Can anybody explain the reason for this implementation?

=============================================================================
Thomas Hoffmann, Institut fuer Halbleiter- und Mikrosystemtechnik, TU Dresden 
E-mail: hoffmann@ehmgs2.et.tu-dresden.de
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Adrian.Trapletti@wu-wien.ac.at  Mon Oct 25 09:51:50 1999
From: Adrian.Trapletti@wu-wien.ac.at (Adrian Trapletti)
Date: Mon, 25 Oct 1999 08:51:50 +0000
Subject: GARCH models available
Message-ID: <38141A26.A4094946@wu-wien.ac.at>

tseries_0.3-0 at CRAN now contains the following new features:

NelPlo                   Nelson-Plosser Macroeconomic Time Series
garch                    Fit GARCH Models to Time Series
get.hist.quote           Download Historical Finance Data
jarque.bera.test         Jarque-Bera Test
na.remove                NA Handling Routines for Time Series

garch contains a GARCH estimation routine together with some of the
usual methods (print, plot, summary etc.). I plan to further implement a
simulate.garch() and to extend predict.garch() for multi-step forecasts.

For those who like to play with stock market data, get.hist.quote()
allows to download yahoo-finance data directly over the www into R time
series.

Testing, suggestions, and comments are welcome!

Adrian

--
Adrian Trapletti, Vienna University of Economics and Business
Administration, Augasse 2-6, A-1090 Vienna, Austria
Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
Email: adrian.trapletti@wu-wien.ac.at



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 25 10:03:22 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Oct 1999 11:03:22 +0200
Subject: gc_inhibit_torture definition twice?
In-Reply-To: Thomas Hoffmann's message of "Mon, 25 Oct 1999 09:37:16 +0200 (METDST)"
References: <199910250737.JAA01900@ehmgs2.et.tu-dresden.de>
Message-ID: <x23duzlsmd.fsf@blueberry.kubism.ku.dk>

Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:

> I have a problem to understand the way gc_inhibit_torture is defined.
> 
> In include/Defn.h it is declared as extern, using the __MAIN__ trick this leads to
> a definition in main/main.c.
> 
> But in main/memory.c you define (and initialize) gc_inhibit_torture again:
> 
>     int gc_inhibit_torture = 1; /* gets set to zero after initialisations */
> 
> Then, in e.g. unix/system.c immediately at the beginning of main() you initialize 
> gc_inhibit_torture once more:
> 
> int main(int ac, char **av)
> {
>     int value, ierr;
>     char *p, msg[1024];
>     structRstart rstart;
>     Rstart Rp = &rstart;
> 
>     gc_inhibit_torture = 1;
>     
> Can anybody explain the reason for this implementation?

It's a debugging aid, something that got hacked in to scare up some
deep memory protection bugs. The only reason for that implementation is
most likely that my mind was on other things at the time....

I believe it predates the __MAIN__ trick, but nowadays it would seem
that one can safely lose the definition in memory.c. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From syring@email.com  Mon Oct 25 18:10:31 1999
From: syring@email.com (Karl M. Syring)
Date: Mon, 25 Oct 1999 19:10:31 +0200
Subject: [R] GARCH models available
In-Reply-To: <38141A26.A4094946@wu-wien.ac.at>
Message-ID: <000101bf1f0b$d7abb900$bfc29e3e@fenris>

Adrian,
could you please use less unixish temporary file name in get.hist.quote(). I
get some thing like "/tmp/^spc17:54:32" which will fail on Windows because
/tmp might not exist and because the colon is not an acceptable character in
file names.

Karl


> -----Original Message-----
> From: owner-r-help@stat.math.ethz.ch
> [mailto:owner-r-help@stat.math.ethz.ch]On Behalf Of Adrian Trapletti
> Sent: Montag, 25. Oktober 1999 10:52
> To: R-Help
> Cc: R-Devel
> Subject: [R] GARCH models available
>
>
> tseries_0.3-0 at CRAN now contains the following new features:
>
> NelPlo                   Nelson-Plosser Macroeconomic Time Series
> garch                    Fit GARCH Models to Time Series
> get.hist.quote           Download Historical Finance Data
> jarque.bera.test         Jarque-Bera Test
> na.remove                NA Handling Routines for Time Series
>
> garch contains a GARCH estimation routine together with some of the
> usual methods (print, plot, summary etc.). I plan to further implement a
> simulate.garch() and to extend predict.garch() for multi-step forecasts.
>
> For those who like to play with stock market data, get.hist.quote()
> allows to download yahoo-finance data directly over the www into R time
> series.
>
> Testing, suggestions, and comments are welcome!
>
> Adrian
>
> --
> Adrian Trapletti, Vienna University of Economics and Business
> Administration, Augasse 2-6, A-1090 Vienna, Austria
> Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
> Email: adrian.trapletti@wu-wien.ac.at
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info",
> "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Oct 25 18:34:29 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Mon, 25 Oct 1999 19:34:29 +0200 (MET DST)
Subject: explicit weights=NULL fails in glm,lm (PR#297)
Message-ID: <199910251734.TAA01255@pubhealth.ku.dk>


example(glm)
glm(formula = counts ~ outcome + treatment, family =poisson(),weights=NULL)


This is because model.frame() doesn't treat explicit NULLs the same as
missings. 


version: 
         _                   
platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status   Patched (unreleased)
major    0                   
minor    65.1                
year     1999                
month    October             
day      07                  
language R                   

and

version:
platform sparc-sun-solaris2.7        
arch     sparc                       
os       solaris2.7                  
system   sparc, solaris2.7           
status   Under development (unstable)
major    0                           
minor    90.0                        
year     1999                        
month    October                     
day      23                          
language R                           



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Adrian.Trapletti@wu-wien.ac.at  Tue Oct 26 10:27:52 1999
From: Adrian.Trapletti@wu-wien.ac.at (Adrian Trapletti)
Date: Tue, 26 Oct 1999 09:27:52 +0000
Subject: [Fwd: [R] GARCH models available]
Message-ID: <38157418.CBA980F7@wu-wien.ac.at>

This is a multi-part message in MIME format.
--------------D2161430B449144163620941
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit




--------------D2161430B449144163620941
Content-Type: message/rfc822
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

X-Mozilla-Status2: 00000000
Message-ID: <38157347.F2F6333E@wu-wien.ac.at>
Date: Tue, 26 Oct 1999 09:24:23 +0000
From: Adrian Trapletti <Adrian.Trapletti@wu-wien.ac.at>
X-Mailer: Mozilla 4.5 [en] (X11; I; Linux 2.0.36 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: "Karl M. Syring" <syring@email.com>
Subject: Re: [R] GARCH models available
References: <000101bf1f0b$d7abb900$bfc29e3e@fenris>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

"Karl M. Syring" wrote:

> Adrian,
> could you please use less unixish temporary file name in get.hist.quote(). I
> get some thing like "/tmp/^spc17:54:32" which will fail on Windows because
> /tmp might not exist and because the colon is not an acceptable character in
> file names.

Is that ok if I introduce an additional argument for the directory to save the
temporary file with default /tmp

(..., dir = "/tmp", ...),

and I remove the colon from the file name, e.g. ^spc175432"?

Adrian

--
Adrian Trapletti, Vienna University of Economics and Business
Administration, Augasse 2-6, A-1090 Vienna, Austria
Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
Email: adrian.trapletti@wu-wien.ac.at




--------------D2161430B449144163620941--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Oct 26 14:46:21 1999
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 26 Oct 1999 15:46:21 +0200 (MET DST)
Subject: dodgy list operation (PR#298)
Message-ID: <199910261346.PAA10545@pubhealth.ku.dk>

I can generate a segmentation fault as follows, where I would expect a
syntax error:

fred <- as.list(1:10)
lapply(fred, "[[")

platform   sparc-sun-solaris2.5.1
arch       sparc                 
os         solaris2.5.1          
system     sparc, solaris2.5.1   
status                           
status.rev 0                     
major      0                     
minor      64.1                  
year       1999                  
month      May                   
day        8                     
language   R                     

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 26 15:01:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Oct 1999 16:01:55 +0200
Subject: dodgy list operation (PR#298)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Tue, 26 Oct 1999 15:46:21 +0200 (MET DST)"
References: <199910261346.PAA10545@pubhealth.ku.dk>
Message-ID: <x2ln8q8bl8.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I can generate a segmentation fault as follows, where I would expect a
> syntax error:
> 
> fred <- as.list(1:10)
> lapply(fred, "[[")
> 
...
> status.rev 0                     
> major      0                     
> minor      64.1                  
             ^^^^
Ahem. That bug is certainly not present in 0.65.1 or later:

R> fred <- as.list(1:10)
R> lapply(fred, "[[")
Error in FUN(X[[i]], ...) : no index specified

> year       1999                  
> month      May                   
> day        8                     
> language   R                     


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Oct 26 16:14:07 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 26 Oct 1999 16:14:07 +0100 (BST)
Subject: Your Message Sent on Fri, 22 Oct 1999 13:19:12 -0700
Message-ID: <199910261514.QAA28411@toucan.stats.ox.ac.uk>


> Date: Fri, 22 Oct 1999 13:19:12 -0700
> To: r-devel@stat.math.ethz.ch
> From: Eli Ateljevich <eli@ce.berkeley.edu>
> 
> Hi.
> I love R. I have had two compatibility issues in shifting my code over from
> Splus
> 
> cts,rts, its:    are there any plans to incorporate these classes?

No. R is not S-PLUS, and is `not unlike S'. Those are S-PLUS proprietary
extensions to S.  Given how little depends on them, I suggest you
look hard at the R `ts' class (which S does not have) as it does
much of what rts does in S-PLUS.

> regexpr: R does not seem to have any regular expression matching function,
> although that capability seems like it would be fairly simple to add for
> someone who knew what they were doing, since the internal code is already
> there and someone would just have to write a wrapper. If someone explained
> the steps to adding an internal function I would give it a shot.

It does have sub and gsub that will do a lot of what you want, but I do
plan to add a version of regexpr fairly soon, as I miss it too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct 26 18:57:17 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 26 Oct 1999 19:57:17 +0200 (MET DST)
Subject: Wrong text() adjustment with (math)expression and "\n" (PR#299)
Message-ID: <199910261757.TAA12834@pubhealth.ku.dk>

This is adapted from  partha_bagchi@hgsi.com 's report on R-help:

     plot(0); title(expression("Bad\n with much much more text")))

gives something like 

      Bad
          with much much more text

(``newline w/o carriage return'') instead of centering both lines such as

               Bad
     with much much more text

which is produced by (just dropping `expression' from the above)

      plot(0); title(("Bad\n with much much more text"))

By the way, the following would need even more attention if one insists on 
correct behavior:

plot(0)
title(expression(paste("Still works with math\n", "with", 
                       frac(1,sum(x[i], i==1,n)), " and more text")))

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct 27 10:36:05 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 27 Oct 1999 11:36:05 +0200 (MET DST)
Subject: [R] par(uin)
In-Reply-To: <D5A7D734C9C5D211B9E30008C7892302DEE76B@exdkba03.novo.dk>
References: <D5A7D734C9C5D211B9E30008C7892302DEE76B@exdkba03.novo.dk>
Message-ID: <14358.51077.874153.394381@gargle.gargle.HOWL>

Thank you Bendix, 
{I hope it's okay if I CC my answer to your private mail to R-devel ..}

>>>>> On Wed, 27 Oct 1999 08:55:28 +0200, BXC@novo.dk (Bendix Carstensen) said:

    >> -----Original Message----- 
    >> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
    >>  Sent: 25. oktober 1999 14:58 To:Gregory R. Warnes 
    >> Cc: R-help@stat.math.ethz.ch Subject: Re: [R]

    MM> par(uin)

    Bendix> (deleted)

    MM> BTW: "uin" gives ``inches per usr unit'' (not the reverse as you
    MM> suggest).
    MM> 
    MM> Should `R' provide "uin" (as read-only) par() ?

RFC:  Should we have it? or is it unnecessary featurism ?

    Bendix> Yes, but call it "ipu" if it returns inches per unit!


No, not "ipu" for two reasons:

1) 
   np <- names(par()); np[substring(np,2,3)=="in"]

currently gives

   [1] "cin" "din" "fin" "pin"

   (and S-plus has "uin" additionally)

And all of these give  
    ``<something> in inches''

For "uin" these would be

    ``user units in inches''
which *is* the same as
    ``inches per usr unit'' 

2) S compatibility..

 We don't want 100% S-compatibility in par() treatment,  
 {not repeating problematic behavior},
 but for things like this,  compatibility is an issue.


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bturlach@stats.adelaide.edu.au  Wed Oct 27 12:03:36 1999
From: bturlach@stats.adelaide.edu.au (Berwin Turlach)
Date: Wed, 27 Oct 1999 20:33:36 +0930 (CST)
Subject: Rdefines.h
Message-ID: <14358.56328.738238.339073@amoeba.stats.adelaide.edu.au>

Hi all,

may I request the following two changes to Rdefines.h (R 0.65.1)?

1.) Change line 106 from
        #define Free(p)        R_chk_free( (void *)(p) )
to
        #define Free(p)        R_chk_free( (void *)(p) ) , p=NULL

2.)  Add after line 79:
#define PROBLEM	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,

a new line 80:
#define PROBLEM	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,
#define MESSAGE	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,

The rationale behind both changes is to become more compatible with
S.h from S-PLUS.  

Additionally, I am porting some C code that I developed under S-PLUS
to R and that code has PROBLEM...RECOVER and MESSAGE...WARNING pairs
in it.  So the absence of the MESSAE macro is a small nuisance.

The way Free(p) is currently defined simply leads to R crashing when
the C code is called a second time.  (I am running R on a linux box.)
Below I include a simple .c file that demonstrates the problem and two
sample sessions with R using that code.  Once the code was compiled
with the original Rdefines.h and the other time with the modification
proposed above.

The problem seems to be that I adopted the following style of
programming: (static) global pointers are initialised to NULL and when
free'd they are reset to NULL.  The macro Free() from S-PLUS' S.h
ensures that and the same is done by the macro of Free() that I use if
the C code is not compiled for use with S-PLUS.  If the code is
compiled for linkage with S-PLUS then I check before I allocate space
to a (static) global pointer whether it is NULL.  If not, then I
assume that the C code was called earlier but that the calculations
have been interrupted, say, by the user hitting contol-c.  In that
case, I give a warning that there may be a memory leak, free the
memory to which the pointer points and allocate the memory needed for
this call to C.  Since Free() from Rdefines.h does not reset the
pointer to NULL, the test whether the pointer is NULL fails when the C
code is called the second time and the ensuing call to free() leads to
R crashing.

I am aware that the question how to handle dynamic memory allocation
in code dynamically liked to S-PLUS (and R?) is a bit controversial.
And the programming style just described makes some obvious assumption
about the behaviour of (static) global pointers in dynamically linked
code between calls to that code.  I had no problems with this strategy
with S-PLUS on Solaris and SunOS4.1.x or R on linux (after changing
Rdefines.h).  And from what I read on the s-news are r-* mailing list,
it seems as if it would work on other platforms too.  Or is anybody
aware of a platform on which this strategy might fail?

Cheers,

        Berwin

==================== test.c =========================
=== compiled via:  R SHLIB test.c ===================
#define S_Plus

#if defined(S_Plus)
#include <S.h>
#if defined(SPLUS_VERSION) && SPLUS_VERSION >= 4000
#  include <newredef.h>
#endif
#endif

static longint *p=NULL;

void BT_demo(longint n){

#if defined(S_Plus)
  if( p != NULL ){
    PROBLEM "Possible memory corruption or memory leak.\n  We"
      "advise to restart your S+ session"  WARNING(NULL_ENTRY); 
     Free(p);
  }
#endif
  p = Calloc(n,longint);
  if (p == NULL){
    PROBLEM "Could not allocate memory" ERROR;
  }
  printf("Everything fine\n");
  Free(p);
}

=============== Compiled with original Rdefines.h ==========
R : Copyright 1999, The R Development Core Team
Version 0.65.1 Release (October 07, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type	"?contributors" for a list.

Type	"demo()" for some demos, "help()" for on-line help, or
    	"help.start()" for a HTML browser interface to help.
Type	"q()" to quit R.

> dyn.load("test.so")
> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> .C("BT_demo",5)

Process R segmentation fault (core dumped) at Wed Oct 27 17:42:05 1999


=============== Compiled with modified Rdefines.h ==========
R : Copyright 1999, The R Development Core Team
Version 0.65.1 Release (October 07, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type	"?contributors" for a list.

Type	"demo()" for some demos, "help()" for on-line help, or
    	"help.start()" for a HTML browser interface to help.
Type	"q()" to quit R.

> dyn.load("test.so")
> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> q()
Save workspace image? [y/n/c]: n

Process R finished at Wed Oct 27 17:43:17 1999

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sret1@cam.ac.uk  Wed Oct 27 17:31:03 1999
From: sret1@cam.ac.uk (sret1@cam.ac.uk)
Date: Wed, 27 Oct 1999 18:31:03 +0200 (MET DST)
Subject: Plotting bug in R (PR#300)
Message-ID: <199910271631.SAA22902@pubhealth.ku.dk>

** Symptom:

  plot(1:1000,1:1000,xlim=c(10,11),type="l")

makes a plot with lots of (nearly) horizontal lines, not just the intended
one from (10,10) to (11,11). So do lots of similar commands where the xlim
or ylim is much shorter than the range of the data.

** R version:
           _                 
platform   i686-unknown-linux
arch       i686              
os         linux             
system     i686, linux       
status     in progress       
status.rev 0                 
major      0                 
minor      62.5              
year       1998              
month      November          
day        2                 
language   R                 

** OS:

Debian Linux 2.1, Linux kernel 2.0.36.

Thanks.

-- 
Stephen Turner    sret1@cam.ac.uk    http://www.statslab.cam.ac.uk/~sret1/
  Statistical Laboratory, 16 Mill Lane, Cambridge CB2 1SB, England
  "Due to the conflict in Kosovo, we will not be showing the movie Wag the
   Dog. Instead, we will show Mortal Kombat: Annihilation." Cable & Wireless


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 27 17:47:16 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Oct 1999 18:47:16 +0200
Subject: Plotting bug in R (PR#300)
In-Reply-To: sret1@cam.ac.uk's message of "Wed, 27 Oct 1999 18:31:03 +0200 (MET DST)"
References: <199910271631.SAA22902@pubhealth.ku.dk>
Message-ID: <x24sfcsqcr.fsf@blueberry.kubism.ku.dk>

sret1@cam.ac.uk writes:

> ** Symptom:
> 
>   plot(1:1000,1:1000,xlim=c(10,11),type="l")
> 
> makes a plot with lots of (nearly) horizontal lines, not just the intended
> one from (10,10) to (11,11). So do lots of similar commands where the xlim
> or ylim is much shorter than the range of the data.
> 
> ** R version:

> status     in progress       
> status.rev 0                 
> major      0                 
> minor      62.5              
> year       1998              
> month      November          
> day        2                 

I.e. in an unreleased version, nearly a full year old...

Doesn't happen nowadays.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Oct 27 18:14:26 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 27 Oct 1999 12:14:26 -0500
Subject: Plotting bug in R (PR#300)
In-Reply-To: Peter Dalgaard BSA's message of "27 Oct 1999 18:47:16 +0200"
References: <199910271631.SAA22902@pubhealth.ku.dk> <x24sfcsqcr.fsf@blueberry.kubism.ku.dk>
Message-ID: <6rg0yw7mkt.fsf@franz.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> sret1@cam.ac.uk writes:
> 
> > ** Symptom:
> > 
> >   plot(1:1000,1:1000,xlim=c(10,11),type="l")
> > 
> > makes a plot with lots of (nearly) horizontal lines, not just the intended
> > one from (10,10) to (11,11). So do lots of similar commands where the xlim
> > or ylim is much shorter than the range of the data.
> > 
> > ** R version:
> 
> > status     in progress       
> > status.rev 0                 
> > major      0                 
> > minor      62.5              
> > year       1998              
> > month      November          
> > day        2                 
> 
> I.e. in an unreleased version, nearly a full year old...

There is an r-base_0.65.1 package for Debian Linux 2.1 on the CRAN
(Comprehensive R Archive Network) sites.  See, for example,
	  http://www.ci.tuwien.ac.at/R/bin/linux/debian/2.1/

Because the update.packages and install.packages functions are
available in this latest version of R, we no longer provide Debian
packages of the contributed packages on CRAN.  You can simply set the
option "CRAN" to the URL of a CRAN archive near you and use these
functions to install or update R packages.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gilb@home.com  Wed Oct 27 21:52:38 1999
From: gilb@home.com (Paul Gilbert)
Date: Wed, 27 Oct 1999 16:52:38 -0400
Subject: install.packages() update.packages()
Message-ID: <38176616.4B959498@home.com>

WOW neat! but...

1/ I tried install.packages("tseries", lib) on a machine which didn't
have a fortran compiler and I happened to notice the error message fly
by, but  install.packages() mostly gave the appearance that everything
suceeded, and the library was available. Is there a way to give a more
obvious report (maybe even remove the library) in the event of failure.
(It does work great on my other  machine with g77.)

2/ Wishlist: Could lib have a default like R_HOME/library (if I own it)
and otherwise something like  ~/Rlibs?

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From qed@ornl.gov  Thu Oct 28 13:19:44 1999
From: qed@ornl.gov (Dennis Wolf)
Date: Thu, 28 Oct 1999 08:19:44 -0400
Subject: Creating gif files using R
Message-ID: <38183F60.79CCD7E7@ornl.gov>

Greetings,
    I am a new user of R but a long time fan of S (Splus) and have
installed R version 0.65.1 on a
Windows NT machine. I would like to save plots as gif files and have
been using savePlot()
with some success. I found that savePlot would not work without
modification, namely
decrementing the device by 1 before calling the internal routine that
does the conversion. Once
that change was made it worked as advertised. I am wondering now whether
I could generate
the gif files in a batch job. I am wanting to do a web-based analysis
that includes a call to
R which would return a gif file for display in a browser. Is this
possible directly with R?

Thanks in advance for any help,
Dennis

--
Dennis A. Wolf
Oak Ridge National Laboratory
POB 2008, Building 6011, MS 6418
Oak Ridge, TN  37831-6418

ph: (423) 574-6326
email: qed@ornl.gov



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Oct 28 13:32:37 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 28 Oct 1999 13:32:37 +0100 (BST)
Subject: Creating gif files using R
Message-ID: <199910281232.NAA16471@toucan.stats.ox.ac.uk>


> Date: Thu, 28 Oct 1999 08:19:44 -0400
> From: Dennis Wolf <qed@ornl.gov>
> To: r-devel@stat.math.ethz.ch
> Subject: Creating gif files using R
> 
> Greetings,
>     I am a new user of R but a long time fan of S (Splus) and have
> installed R version 0.65.1 on a
> Windows NT machine. I would like to save plots as gif files and have
> been using savePlot()
> with some success. I found that savePlot would not work without
> modification, namely
> decrementing the device by 1 before calling the internal routine that
> does the conversion. 

I will look into this. It did work as advertised when it was released,
but something may have changed en route to rw0651 (for example
a correction may have got lost).

> Once
> that change was made it worked as advertised. I am wondering now whether
> I could generate
> the gif files in a batch job. 

You can call the windows() device and then savePlot() from a batch job.

> I am wanting to do a web-based analysis
> that includes a call to
> R which would return a gif file for display in a browser. Is this
> possible directly with R?

>From NEWS for 0.65.1:

    o   Experimental function dev2bitmap() to copy to a bitmap graphics format.

It won't do gif unless your version of ghostscript will, but it will do
png and jpeg.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Thu Oct 28 14:40:47 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Thu, 28 Oct 1999 14:40:47 +0100
Subject: Creating gif files using R
In-Reply-To: <38183F60.79CCD7E7@ornl.gov>; from Dennis Wolf on Thu, Oct 28, 1999 at 08:19:44AM -0400
References: <38183F60.79CCD7E7@ornl.gov>
Message-ID: <19991028144047.63671@hal.stat.unipd.it>

On Thu, Oct 28, 1999 at 08:19:44AM -0400, Dennis Wolf wrote:
> Greetings,
>     I am a new user of R but a long time fan of S (Splus) and have
> installed R version 0.65.1 on a
> Windows NT machine. I would like to save plots as gif files and have
> been using savePlot()
> with some success. I found that savePlot would not work without
> modification, namely
> decrementing the device by 1 before calling the internal routine that
> does the conversion. Once
> that change was made it worked as advertised. I am wondering now whether
> I could generate
> the gif files in a batch job. I am wanting to do a web-based analysis
> that includes a call to
> R which would return a gif file for display in a browser. Is this
> possible directly with R?
> 


  savePlot + Rterm should do the work. 
  However, we will probably withdraw support to direct generation
  of gif to avoid some legal problems. Hence, give a try
  also to 'dev2bitmap' (which however require ghostscript installed).

  guido 

  
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 28 15:33:40 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Oct 1999 16:33:40 +0200
Subject: Wrong text() adjustment with (math)expression and "\n" (PR#299)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 26 Oct 1999 19:57:17 +0200 (MET DST)"
References: <199910261757.TAA12834@pubhealth.ku.dk>
Message-ID: <x2n1t35zcr.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> This is adapted from  partha_bagchi@hgsi.com 's report on R-help:
> 
>      plot(0); title(expression("Bad\n with much much more text")))
> 
> gives something like 
> 
>       Bad
>           with much much more text
> 
> (``newline w/o carriage return'') instead of centering both lines such as
> 
>                Bad
>      with much much more text
> 
> which is produced by (just dropping `expression' from the above)
> 
>       plot(0); title(("Bad\n with much much more text"))
> 
> By the way, the following would need even more attention if one insists on 
> correct behavior:
> 
> plot(0)
> title(expression(paste("Still works with math\n", "with", 
>                        frac(1,sum(x[i], i==1,n)), " and more text")))

I'm not sure I'm buying that this is a bug. To see what is really
going on try something like:

 plot(0);title(expression(mu*"a\nbc"*eta*"ab\nc"*xi))

what happens is that the strings get set *individually* as multiline
text with (left,bottom) adjustment. If you look closer, Martin's
example really gives

      Bad
      with much much more text

We could relatively easily make the adjustment (center,center) I think,
but that isn't very useful, and Partha was expecting the whole thing to
continue on a new line. I think that is rather difficult to achieve
because the relation between the expression as text and as a parse
tree is not linear and things mean different things in different
positions (consider "a\nb"+"a\nb"^"a\nb"). To actually have a formula
title split over several lines, I'd suggest fiddling with mtext().


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Oct 28 17:23:06 1999
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Thu, 28 Oct 1999 18:23:06 +0200 (MET DST)
Subject: expand.grid() (PR#301)
Message-ID: <199910281623.SAA03652@pubhealth.ku.dk>

This is a very minor point and I hesitate to call it a bug, but might I
suggest modifying the nargs=1 return statement in expand.grid() from

    if (nargs == 1)
      return(args[[1]])        

to 

    if (nargs == 1)
      return(data.frame(args))

so that the result of expand.grid is always a data frame (as indicated in
the help file).  This also preserves the variable name if it exists.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Oct 29 15:45:34 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 29 Oct 1999 16:45:34 +0200 (MET DST)
Subject: expand.grid() (PR#301)
Message-ID: <199910291445.QAA13256@pubhealth.ku.dk>

>>>>> "JonR" == J C Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> This is a very minor point and I hesitate to call it a bug, but
    JonR> might I suggest modifying the nargs=1 return statement in
    JonR> expand.grid() from

    JonR>     if (nargs == 1) return(args[[1]])

    JonR> to

    JonR>     if (nargs == 1) return(data.frame(args))

    JonR> so that the result of expand.grid is always a data frame (as
    JonR> indicated in the help file).  This also preserves the variable
    JonR> name if it exists.

Well, that is not quite true,

      expand.grid(NULL)  

gives NULL  without your change 
but gives an error with your change...
since
	data.frame(NULL)  
fails.

The following (only this one of all 4 possibilities  as/no-as  x NULL/list() )
would work

> as.data.frame(list())
NULL data frame with 0 rows

---
Better patch ? (and what does S do ?)

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 29 16:38:30 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 29 Oct 1999 16:38:30 +0100 (BST)
Subject: expand.grid() (PR#301)
In-Reply-To: <199910291445.QAA13256@pubhealth.ku.dk>
Message-ID: <Pine.GSO.3.96.991029162251.1534F-100000@laplace>

On Fri, 29 Oct 1999 maechler@stat.math.ethz.ch wrote:

> Well, that is not quite true,
> 
>       expand.grid(NULL)  
> 
> gives NULL  without your change 
> but gives an error with your change...
> since
> 	data.frame(NULL)  
> fails.
> 
> The following (only this one of all 4 possibilities  as/no-as  x NULL/list() )
> would work
> 
> > as.data.frame(list())
> NULL data frame with 0 rows
> 
> ---
> Better patch ? (and what does S do ?)

Hmm ... Splus returns a data frame for a single variables or for a NULL
variable, the latter looking a bit strange:

> expand.grid(factor(c("L", "H")))
  Var1 
1    L
2    H
> expand.grid(NULL)                   
  Var1 
1   NA
0   NA

I think your patch is a good one.  So you would suggest

	if (nargs == 1)
	  return(if (is.null(args[[1]])) as.data.frame(list()) else
	    data.frame(args))

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thoffman@zappa.sax.de  Sat Oct 30 12:33:04 1999
From: thoffman@zappa.sax.de (thoffman@zappa.sax.de)
Date: Sat, 30 Oct 1999 13:33:04 +0200 (MET DST)
Subject: modreg buggy: uninitialized variable in sinerp.f (PR#302)
Message-ID: <199910301133.NAA16105@pubhealth.ku.dk>

I had some strange problems with modreg: sometimes functions
hang in an infinite loop, consuming 100% CPU time. Especially
when update()ing models (as in example(ppr)) with sm.method="gcv"
I found that if I repeated the call after I did interrupt the hang,
it ran to completion.

After some lengthy debugging I could track down this problem:

sinerp.f, line 22--24 read:

      wjm3(1)=0d0
      wjm3(2)=0d0
      wjm3(1)=0d0

This leaves wjm3(3) uninitialized. So after changing these lines to

      wjm3(1)=0d0
      wjm3(2)=0d0
      wjm3(3)=0d0

the bug was gone.

Thomas Hoffmann.

--please do not edit the information below--

Version:
 platform = i386-pc-os2_emx
 arch = i386
 os = os2_emx
 system = i386, os2_emx
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Oct 30 19:00:05 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 30 Oct 1999 19:00:05 +0100 (BST)
Subject: modreg buggy: uninitialized variable in sinerp.f (PR#302)
In-Reply-To: <199910301133.NAA16105@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9910301855240.11052-100000@auk.stats>

On Sat, 30 Oct 1999 thoffman@zappa.sax.de wrote:

> I had some strange problems with modreg: sometimes functions
> hang in an infinite loop, consuming 100% CPU time. Especially
> when update()ing models (as in example(ppr)) with sm.method="gcv"
> I found that if I repeated the call after I did interrupt the hang,
> it ran to completion.
> 
> After some lengthy debugging I could track down this problem:
> 
> sinerp.f, line 22--24 read:
> 
>       wjm3(1)=0d0
>       wjm3(2)=0d0
>       wjm3(1)=0d0
> 
> This leaves wjm3(3) uninitialized. So after changing these lines to
> 
>       wjm3(1)=0d0
>       wjm3(2)=0d0
>       wjm3(3)=0d0
> 
> the bug was gone.

Thank you very much!  We were aware of occasional problems (but only on
gcc), but had not managed to track them down. In all cases using
-ffloat-store had solved the problem.

I have committed this change for the next release.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Sun Oct 31 00:29:06 1999
From: ntakebay@bio.indiana.edu (ntakebay@bio.indiana.edu)
Date: Sun, 31 Oct 1999 01:29:06 +0200 (MET DST)
Subject: read.table problem on Linux/Alpha (seg faults caused by isspace(R_EOF)) (PR#303)
Message-ID: <199910302329.BAA17382@pubhealth.ku.dk>

Full_Name: Naoki Takebayashi
Version: 0.65.1
OS: Linux/Alpha
Submission from: (NULL) (129.79.224.171)


When I was reading a file with read.table("junk.data"), it seg-faulted.
I found out that it seg-faulted when the last line of data file didn't
have the newline char.  For example, file like this:

23	3
31	2
24	1<EOF>


Here is a fix.

--- R-0.65.1/src/main/scan.c.orig       Wed Sep 29 11:11:45 1999
+++ R-0.65.1/src/main/scan.c    Fri Oct 29 17:34:22 1999
@@ -124,7 +124,7 @@
                if (bufp >= &buffer[MAXELTSIZE - 2])
                    continue;
                *bufp++ = c;
-           } while (!isspace(c = scanchar()) && c != R_EOF);
+           } while ((c = scanchar()) != R_EOF && !isspace(c));
            while (c==' ' || c=='\t')
                c=scanchar();
            if (c=='\n' || c=='\r' || c==R_EOF)
@@ -647,7 +647,7 @@
                }
            }
            else {
-               while (!isspace(c=scanchar()) && c != R_EOF)
+               while ( (c=scanchar()) != R_EOF && !isspace(c))
                    ;
                if (c==R_EOF) c='\n';
                unscanchar(c);



When the scanchar() returns R_EOF (=65535 #defined in src/include/Defn.h),
isspace(R_EOF) seq-faults.  By switching the order of two conditions, I could
get around with it.  I just made a test to see the behavior of isspace() by
giving
isspace(65535).  It seg-faults in both Linux/alpha and i386 (is it supposed
to??).
However, R on i386 doesn't seg-faults when the last line does not have newline.

Naoki


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Oct 31 12:30:01 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Oct 1999 13:30:01 +0100
Subject: read.table problem on Linux/Alpha (seg faults caused by isspace(R_EOF)) (PR#303)
In-Reply-To: ntakebay@bio.indiana.edu's message of "Sun, 31 Oct 1999 01:29:06 +0200 (MET DST)"
References: <199910302329.BAA17382@pubhealth.ku.dk>
Message-ID: <x24sf7lnli.fsf@blueberry.kubism.ku.dk>

ntakebay@bio.indiana.edu writes:

> Here is a fix.
> 
> --- R-0.65.1/src/main/scan.c.orig       Wed Sep 29 11:11:45 1999
> +++ R-0.65.1/src/main/scan.c    Fri Oct 29 17:34:22 1999
> @@ -124,7 +124,7 @@
>                 if (bufp >= &buffer[MAXELTSIZE - 2])
>                     continue;
>                 *bufp++ = c;
> -           } while (!isspace(c = scanchar()) && c != R_EOF);
> +           } while ((c = scanchar()) != R_EOF && !isspace(c));
....
> When the scanchar() returns R_EOF (=65535 #defined in src/include/Defn.h),
> isspace(R_EOF) seq-faults.  By switching the order of two conditions, I could
> get around with it.  I just made a test to see the behavior of isspace() by
> giving
> isspace(65535).  It seg-faults in both Linux/alpha and i386 (is it supposed
> to??).
> However, R on i386 doesn't seg-faults when the last line does not have newline.

Thanks. However, perhaps a better fix would be to change R_EOF? All
the isxxx macros/functions work by indexing an array designed to take
values between -128 and +255, so passing 65535 is playing with fire,
and we have many more instances littered all over the code, where I
don't feel absolutely sure that R_EOF couldn't sneak in.

Any one remember why R_EOF is different from the customary EOF of -1??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 31 16:36:33 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 31 Oct 1999 16:36:33 +0000 (GMT)
Subject: diag
Message-ID: <Pine.GSO.4.05.9910311620090.12623-100000@auk.stats>

A change to diag() between 0.65.0 and 0.65.1 which seems undocumented in
the logs (apparently revision 1.3.2.1, `diag names') introduced

    if (is.array(x)) 
        stop("first argument is array, but not matrix.")

which has broken the code in rpart. This looks wrong to me, as diag used to
cope happily with a single-dimensional array. Such things occur quite
often as the output from table().

Is there any reason not to make this

    if (length(dim(x)) > 2)

which seems the intention?  Martin (if I have decoded the cvs diffs
correctly)?

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Sun Oct 31 17:12:38 1999
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Sun, 31 Oct 1999 12:12:38 -0500
Subject: diag
In-Reply-To: <Pine.GSO.4.05.9910311620090.12623-100000@auk.stats>; from Prof Brian D Ripley on Sun, Oct 31, 1999 at 04:36:33PM +0000
References: <Pine.GSO.4.05.9910311620090.12623-100000@auk.stats>
Message-ID: <19991031121238.A10461@jimmy.harvard.edu>

On Sun, Oct 31, 1999 at 04:36:33PM +0000, Prof Brian D Ripley wrote:
> A change to diag() between 0.65.0 and 0.65.1 which seems undocumented in
> the logs (apparently revision 1.3.2.1, `diag names') introduced
> 
>     if (is.array(x)) 
>         stop("first argument is array, but not matrix.")
> 
> which has broken the code in rpart. This looks wrong to me, as diag used to
> cope happily with a single-dimensional array. Such things occur quite
> often as the output from table().
> 
> Is there any reason not to make this
> 
>     if (length(dim(x)) > 2)
> 
> which seems the intention?  Martin (if I have decoded the cvs diffs
> correctly)?
> 
  I think it was me. I think that this is fine (the old version
complained about matrices at this point and they should be allowed).
  It was a bug report off of R-help but I can't recall who...
robert
-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              voice: (617) 632-5045                     |
| Senior Lecturer               fax:   (617) 632-2444                     |
| University of Auckland	email1: rgentlem@jimmy.harvard.edu        |
| on leave at:                                                            |
| Dana-Farber Cancer Institute  email2: rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Sun Oct 31 23:20:56 1999
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Mon, 1 Nov 1999 00:20:56 +0100 (MET)
Subject: bugs in scan() (PR#304)
Message-ID: <199910312320.AAA20291@pubhealth.ku.dk>

System: Sun Solaris 2.5.1

There seem to be at least 2 bugs associated with the use of flush=T in
the scan function.

1) If flush=T is used, scan() will only ask for 1 line from standard input.
Repeat by:
>  R

R : Copyright 1999, The R Development Core Team
Version 0.65.1 Release (October 07, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> scan(what=list(c1=0,c2=0,c3=0), flush=T)
1: 1 2 3 4
Read 1 lines
$c1
[1] 1

$c2
[1] 2

$c3
[1] 3

> 
1a) If the 'correct' number of fields are supplied, then two lines are
read, but only 1 is 'registered':
> scan( what=list(c1=0,c2=0,c3=0),flush=T)
1: 1 2 3
1: 4 5 6
Read 1 lines
$c1
[1] 1

$c2
[1] 2

$c3
[1] 3

> 

2) When reading from a file, the first line is processed correctly, but
the second and subsequent lines do not have the extraneous data flushed
correctly.  Repeat by:
> write(t(matrix(1:15, ncol=5, byrow=T)), "tmp")
> system("cat tmp")
1 2 3 4 5
6 7 8 9 10
11 12 13 14 15
> scan("tmp", what=list(c1=0,c2=0,c3=0), flush=T)
Read 4 lines
$c1
[1]  1  6 10  3

$c2
[1]  2  7 11 14

$c3
[1]  3  8 12 15

Warning message:
line 3 did not have 3 elements
> 
Notice that on lines 2 and 3 the first character of the "flushable
data" (after the field separator) does get flushed, but then scanning
continues.  Pehaps an end-of-line indication is not reset?

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lopi8954@moscowoffice.com  Thu Oct  7 03:37:26 1999
From: lopi8954@moscowoffice.com (lopi8954@moscowoffice.com)
Date: Wed, 06 Oct 1999 22:37:26 -0400
Subject: [Rd] Win a Palm Pilot for visiting our website!!!!                         24621
Message-ID: <00004b363164$00004b9f$0000602d@mail2.wuzzlenorple.com>

<html>

<body>


<p align=3D"center"><a href=3D"http://dis39887.checkchange100.com/palm1.ht=
m"><img border=3D"0" src=3D"http://pic3847.checkchange100.com/images/palm_=
ad4.gif" width=3D"197" height=3D"153"></a></p>


</body>

</html>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark7853@flashmail.com  Mon Oct 11 10:55:18 1999
From: mark7853@flashmail.com (mark7853@flashmail.com)
Date: Mon, 11 Oct 1999 05:55:18 -0400
Subject: [Rd] Win a Palm Pilot!!                         26606
Message-ID: <0000384f0ff0$00004d5a$000067ee@mail3.wuzzlenorple.com>

<html>

<body>


<p align=3D"center"><a href=3D"http://dis39887.checkchange100.com/palm1.ht=
m"><img border=3D"0" src=3D"http://pic3847.checkchange100.com/images/palm_=
ad4.gif" width=3D"197" height=3D"153"></a></p>


</body>

</html>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From daan6354@acmemail.net  Sat Oct 16 07:57:24 1999
From: daan6354@acmemail.net (daan6354@acmemail.net)
Date: Sat, 16 Oct 1999 02:57:24 -0400
Subject: [Rd] Win a Palm Pilot!!!                         26204
Message-ID: <00003edf5660$0000030d$0000665c@mail3.wuzzlenorple.com>

<html>

<body>


<p align=3D"center"><a href=3D"http://dis29jfndin.beebeatwo.com/palm1.htm"=
><img border=3D"0" src=3D"http://fdfn32ie9j.beebeatwo.com/images/palm_ad4.=
gif" width=3D"197" height=3D"153"></a></p>


</body>

</html>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Oct  2 19:13:13 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Oct 1999 20:13:13 +0200
Subject: Macro-like for-loops
Message-ID: <x2d7uxr5qe.fsf@blueberry.kubism.ku.dk>


>From the silly-tricks department:

"foreach" <-
function (...) 
{
    Args <- match.call()[-1]
    N <- length(Args)
    Body <- Args[[N]]
    Args <- Args[-N]
    Tags <- names(Args)
    Lists <- lapply(Args, function(a) as.list(a)[-1])
    Lengths <- sapply(Lists, length)
    for ( i in 1:max(Lengths))
    {
        ix <- (i - 1) %% Lengths + 1
        l <- lapply(seq(along=ix), function(j) Lists[[j]][[ix[j]]])
        names(l) <- Tags
        bb <- eval(substitute(substitute(body,l),list(body=Body)))
        eval(bb,parent.frame())
    }
}

huey<-rnorm(50); dewey<-rnorm(50); louie<-rnorm(50)
par(mfcol=c(3,1))

foreach(x=list(huey,dewey,louie), hist(x))

Notice that in contrast to an ordinary for-loop, this kind of loop
automatically gets the titles right on the plots. It is a purely
lexical substitution, equivalent to

hist(huey) ; hist(dewey) ; hist(louie)

In this case, you save -4 keypresses..., but one can easily imagine
the usefulness for eliminating cut+paste errors in more complicated
cases. 

As written, it is possible to have several list-arguments which are
treated in parallel, recycled to the length of the longest one (as it
was possible to do in good ol' Genstat).

One potential drawback is that (as written, anyway) the function is
playing a bit too many tricks with its arguments. It actually takes
the list expression apart to get at the list of variable names. It
wouldn't work to put an actual list in there, i.e.

l <- list(huey,dewey,louie)
foreach(x=l, hist(x))

cannot work. It obviously never could, because l does not contain the
variable names, but it might be desirable to have some alternate
syntax that worked with stored namelist.

Would it be useful to put something like this in forthcoming versions
of R?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Oct  4 11:59:44 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 4 Oct 1999 11:59:44 +0100 (BST)
Subject: bitmap copies of plots
Message-ID: <199910041059.LAA01871@toucan.stats.ox.ac.uk>

Michael Lapsley was suggesting on R-help direct copies to gif/png/jpeg.

The following seems to do a sensible job for me of copying the current
device to any bitmap format supported by gs. The manipulation is needed
to work around assumptions made by postscript(), and I think better fixed
in postscript() (but not a couple of days before a release).

I want to make onefile=FALSE work on postscript() (it needs to start
a file for each page, and give it a EPSF-3.0 header), and to allow
user-specified paper sizes and the option of not centring on the page.

Oh, and I do know it is gswin32c on Windows: that is easy to incorporate
but I have not tested it.

One could attempt to retrieve height and width from the current device,
but I don't see that information is presently available from R code.

Any comments?


dev2bitmap <- function(file, type="png256", height=6, width=6, res=72,
                      pointsize, ...)
{
    rc <- system("gs -help > /dev/null")
    if(rc != 0) stop("Sorry, gs cannot be found")
    gs <- system("gs -help", intern=TRUE)
    st <- grep("^Available", gs)
    en <- grep("^Search", gs)
    gs <- gs[(st+1):(en-1)]
    devs <- c(strsplit(gs, " "), recursive=T)
    if(match(type, devs, 0) == 0)
        stop(paste(paste("Device ", type, "is not available"),
                   "Available devices are",
                   paste(gs, collapse="\n"), sep="\n"))
    if(missing(pointsize)) pointsize <- 1.5*min(width, height)
    tmp <- tempfile("Rbit")
    on.exit(unlink(tmp))
    dev.print(device=postscript, file=tmp, width=width,
              height=height, pointsize=pointsize, horizontal=F, ...)
    psfile <- scan(tmp, what="", sep="\n", quiet=TRUE)
    bb <- strsplit(psfile[9], " ")[[1]]
    ep <- grep("^%%EndProlog", psfile)
    unlink(tmp)
    tmp2 <- tempfile("Rbit")
    on.exit(unlink(tmp2))
    cat(psfile[1:ep], file=tmp2, sep="\n")
    cat(paste("-",bb[2], " -", bb[3], " translate\n", sep=""),
        file=tmp2, append=TRUE)
    cat(psfile[(ep+1):length(psfile)], file=tmp2, sep="\n", append=TRUE)
    cmd <- paste("gs -dNOPAUSE -dBATCH -q -sDEVICE=", type,
                 " -r", res,
                 " -g", ceiling(res*width), "x", ceiling(res*height),
                 " -sOutputFile=", file, " ", tmp2, sep="")
    system(cmd)
    invisible()
}

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Mon Oct  4 16:41:12 1999
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Mon, 04 Oct 1999 17:41:12 +0200
Subject: New Version of R Server
References: <199910041422.PAA05564@toucan.stats.ox.ac.uk>
Message-ID: <37F8CA98.89048D8E@univie.ac.at>



Prof Brian Ripley wrote:
> 
> Yes, we need one. I am having problems with Erich's latest add-in:
> it works about every other time, I think because is has some memory of the
> previous one. I don't think Excel 2000 removes add-ins cleanly.
> 

brian, we had a stress test of the addin yesterday
election ight forecast, the systen was running about 8 hours
without any problems.

win95+excel97

i have to start testing in excel2000 now.
i dod some very simple first tetst, and so far,
no problems.

uninstalling might be a a problem.
a relatively secure way of uninstalling found is:
first delete the xla file, with excel NOT running.
then start excel, it will complain about the missing addin.
then go to teh addin menu,
and click on the missing but still displayed
addin.
you will get the choice of completely removing it.

please try this once and tell me if the problems persist.

your excel2000 statments sound rather bad.

erich


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Oct  5 13:21:02 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 5 Oct 1999 14:21:02 +0200
Subject: bitmap copies of plots
In-Reply-To: <199910041059.LAA01871@toucan.stats.ox.ac.uk> (message from Prof
 Brian Ripley on Mon, 4 Oct 1999 11:59:44 +0100 (BST))
References: <199910041059.LAA01871@toucan.stats.ox.ac.uk>
Message-ID: <199910051221.OAA08391@sophie.ethz.ch>

I think your dev2bitmap() is a really neat idea!
Thank you
Further, I didn't know that (newer flavors of) gs  allows for so many 
different output formats
[for the unaware (as I was till now):
     gs --help
		 (1997 Aladdin Ghostscript 5.1)
 gives 69 devices (not all useful for dev2bitmap), 
 such as jpeg, tiff, png, pbm, pgm, pcx,...
]	
 
I think something like it should make it into the distribution
(shall I quickly write docu for it, saying it is somewhat experimental,
 even for 0.65.1 ?)

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct  5 13:56:50 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 5 Oct 1999 13:56:50 +0100 (BST)
Subject: bitmap copies of plots
In-Reply-To: <199910051221.OAA08391@sophie.ethz.ch>
Message-ID: <Pine.GSO.4.05.9910051352510.25038-100000@auk.stats>

On Tue, 5 Oct 1999, Martin Maechler wrote:

> I think your dev2bitmap() is a really neat idea!
> Thank you
> Further, I didn't know that (newer flavors of) gs  allows for so many 
> different output formats
> [for the unaware (as I was till now):
>      gs --help
> 		 (1997 Aladdin Ghostscript 5.1)
>  gives 69 devices (not all useful for dev2bitmap), 
>  such as jpeg, tiff, png, pbm, pgm, pcx,...

(5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is in test)

> ]	
>  
> I think something like it should make it into the distribution
> (shall I quickly write docu for it, saying it is somewhat experimental,
>  even for 0.65.1 ?)

I am going to put the postscript patches I need in for 0.65.1 today: I can
then put a cleaned up version in the distribution.

Basically, the pending changes make onefile actually do something, and a
`special' paper size allows arbitrary paper sizes (and no special borders).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  5 14:07:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Oct 1999 15:07:55 +0200
Subject: bitmap copies of plots
In-Reply-To: Prof Brian D Ripley's message of "Tue, 5 Oct 1999 13:56:50 +0100 (BST)"
References: <Pine.GSO.4.05.9910051352510.25038-100000@auk.stats>
Message-ID: <x27ll2t0pg.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:


> > 		 (1997 Aladdin Ghostscript 5.1)
> >  gives 69 devices (not all useful for dev2bitmap), 
> >  such as jpeg, tiff, png, pbm, pgm, pcx,...
> 
> (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is in test)

...but 5.10 is the one that still ships with RedHat (newer ones are
not GPL yet, I presume). Installed 6.1 yesterday, so I should know.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct  5 14:06:34 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 5 Oct 1999 14:06:34 +0100 (BST)
Subject: bitmap copies of plots
In-Reply-To: <x27ll2t0pg.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9910051403530.25038-100000@auk.stats>

On 5 Oct 1999, Peter Dalgaard BSA wrote:

> Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
> 
> > > 		 (1997 Aladdin Ghostscript 5.1)
> > >  gives 69 devices (not all useful for dev2bitmap), 
> > >  such as jpeg, tiff, png, pbm, pgm, pcx,...
> > 
> > (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is in test)
> 
> ...but 5.10 is the one that still ships with RedHat (newer ones are
> not GPL yet, I presume). Installed 6.1 yesterday, so I should know.

Yes, that is true. But if you want to use gs for PDF or to drive the
current colour inkjets you need something later than 5.10. (Even if
5.10 appears to work on small colour inkjet prints, it crashed on
production jobs here.)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Tue Oct  5 14:58:33 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 05 Oct 1999 06:58:33 -0700
Subject: bitmap copies of plots
In-Reply-To: Prof Brian D Ripley's message of "Tue, 5 Oct 1999 14:06:34 +0100 (BST)"
References: <Pine.GSO.4.05.9910051403530.25038-100000@auk.stats>
Message-ID: <87aepxhpti.fsf@alpha.cfas.washington.edu>



    >> >
    >> > (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is
    >> > in test)
    >>
    >> ...but 5.10 is the one that still ships with RedHat (newer ones
    >> are not GPL yet, I presume). Installed 6.1 yesterday, so I
    >> should know.

There are Debian packages... one of the good reasons to use Debian
:-).

But seriously, alien would import it, or I'm sure someone must have
done a contributed rpm for it?

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  5 15:29:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Oct 1999 16:29:55 +0200
Subject: bitmap copies of plots
In-Reply-To: rossini@biostat.washington.edu's message of "05 Oct 1999 06:58:33 -0700"
References: <Pine.GSO.4.05.9910051403530.25038-100000@auk.stats> <87aepxhpti.fsf@alpha.cfas.washington.edu>
Message-ID: <x2yadhswws.fsf@blueberry.kubism.ku.dk>

rossini@biostat.washington.edu (A.J. Rossini) writes:

>     >> >
>     >> > (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is
>     >> > in test)
>     >>
>     >> ...but 5.10 is the one that still ships with RedHat (newer ones
>     >> are not GPL yet, I presume). Installed 6.1 yesterday, so I
>     >> should know.
> 
> There are Debian packages... one of the good reasons to use Debian
> :-).
> 
> But seriously, alien would import it, or I'm sure someone must have
> done a contributed rpm for it?


Sure,

-----
[pd@blueberry pd]$ rpmfind --latest ghostscript
Installing ghostscript will require 4078 KBytes

### To Transfer:
ftp://ftp.mpi-sb.mpg.de/pub/linux/mirror/ftp.redhat.com/contrib/hurricane/i386/ghostscript-5.50-3.i386.rpm
Do you want to download these files to /tmp [Y/n/a] ? : n
-----

However, the point was that we need to be a little careful when
relying on non-free (or semi-free) items, because they don't travel on
CD releases, etc. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct  5 16:16:57 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 5 Oct 1999 16:16:57 +0100 (BST)
Subject: gs5.xx (was bitmap copies of plots)
In-Reply-To: <x2yadhswws.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9910051608320.10682-100000@auk.stats>

On 5 Oct 1999, Peter Dalgaard BSA wrote:

> rossini@biostat.washington.edu (A.J. Rossini) writes:
> 
> >     >> >
> >     >> > (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is
> >     >> > in test)
> >     >>
> >     >> ...but 5.10 is the one that still ships with RedHat (newer ones
> >     >> are not GPL yet, I presume). Installed 6.1 yesterday, so I
> >     >> should know.
> > 
> > There are Debian packages... one of the good reasons to use Debian
> > :-).
> > 
> > But seriously, alien would import it, or I'm sure someone must have
> > done a contributed rpm for it?
> 
> 
> Sure,
> 
> -----
> [pd@blueberry pd]$ rpmfind --latest ghostscript
> Installing ghostscript will require 4078 KBytes
> 
> ### To Transfer:
> ftp://ftp.mpi-sb.mpg.de/pub/linux/mirror/ftp.redhat.com/contrib/hurricane/i386/ghostscript-5.50-3.i386.rpm
> Do you want to download these files to /tmp [Y/n/a] ? : n

(There are gs5.93 rpms too.)
 
> However, the point was that we need to be a little careful when
> relying on non-free (or semi-free) items, because they don't travel on
> CD releases, etc. 

Right. I appreciated that. My point is that you may not be able use
dev2bitmap as a PDF driver without using GhostScript 6.0 or pre-test,
unless you restrict what you plot.  GNU-licensed gs6.xx is a year away (it
says in the pre-test). So either you accept the shackles or you get
inferior plots.

Unfortunately Aladdin and FSF seem to be having a spat, which is why
5.94 was put out with support for linking in readline removed.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Thu Oct  7 06:15:03 1999
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Oct 1999 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199910070515.HAA05575@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 130 *
Subject: lty=0 -- shouldn't it give an invisible line?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Feb 1999 21:45:43 +0100
--Strange effect on barplot
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 229 *
Subject: dev.print scaling bug?
From: John.Peters@tip.csiro.au (John Peters)
Date: Fri, 16 Jul 1999 12:10:48 +1000 (EST)
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 249 *
Subject: axis ignores srt/crt
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 16 Aug 1999 15:51:49 -0700 (PDT)
--`its's not a bug it is an imcomptibility'
* PR# 258 *
Subject: Greek letters in outer margins.
From: "BXC (Bendix Carstensen)" <BXC@NOVO.dk>
Date: Thu, 26 Aug 1999 12:09:17 +0200
--Uses *current* plot margins. 
--
--remove paste() from repro. instr.
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 281 *
Subject: mtext(. col = ...) stopped working in 0.65.0
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 17 Sep 1999 15:10:40 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
--Have put note in help file, at least.
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200

Directory:  Installation

* PR# 290 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Thu, 30 Sep 1999 21:18:49 +0200 (MET DST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 239 *
Subject: cbind is not generic as claimed, omits labels where S has them 
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 12:29:58 +0100 (BST)
--Cbind is now generic, still labelling issues. See also PR#240 and PR#241.
* PR# 240 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
--See PR#239
* PR# 241 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 6 Aug 1999 06:52:35 +0100 (BST)
--See PR#239
* PR# 257 *
Subject:  dimnames names lost when subscripting 
From: Andreas Weingessel <weingessel@ci.tuwien.ac.at>
Date: Wed, 25 Aug 1999 12:45:28 +0200
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file
--Should we not make the buffer static?
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 210 *
Subject: definition of R_problem_buf in S.h
From: vogels@ieee.org
Date: Mon, 14 Jun 1999 17:56:04 +0200 (MET DST)
--Same as #185

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 222 *
Subject: Use of R-Coda
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Fri, 9 Jul 1999 10:54:16 +0200 
--In Danish (?)  Looks as if PR#246 is the same in English
* PR# 234 *
Subject: R-bugs
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Tue, 27 Jul 1999 13:49:31 +0200
--Looks like PR#222 again, in Danish. See PR#246 for English version
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 260 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
Subject: Compilation of R under Caldera OpenLinux 2.2
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
--workaround is to install missing libg2c.a. See also PR#268 for sucess report
* PR# 268 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
From: "Jack N." <jnf@pcisys.net>
Date: Mon, 06 Sep 1999 08:03:02 -0600
--Followup: See PR#260

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

none
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Fri Oct  8 03:57:44 1999
From: ntakebay@bio.indiana.edu (ntakebay@bio.indiana.edu)
Date: Fri, 8 Oct 1999 04:57:44 +0200 (MET DST)
Subject: floor(NaN) problem fixed in massdist.c (PR#291)
Message-ID: <199910080257.EAA06625@pubhealth.ku.dk>

Full_Name: Naoki Takebayashi
Version: 0.65.0+R-release.diff (Oct 6, 1999)
OS: Linux/Alpha
Submission from: (NULL) (129.79.224.171)


This will fix the "problem 2 (crash in fft)" in Bug ID #277

On Linux/Alpha, make check failed because R could not handle the following
example in base-Ex.R

##___ Examples ___:

# The Old Faithful geyser data
data(faithful)
 :
 :
## Missing values:
x <- xx <- faithful$eruptions
x[i.out <- sample(length(x), 10)] <- NA
doR <- density(x, bw=0.15, na.rm = TRUE)
doN <- density(x, bw=0.15, na.rm = FALSE)
	### it fails at this statement ###
lines(doR, col="blue")
lines(doN, col="red")
points(xx[i.out], rep(.01,10))


The following statement in density() was not getting the right output:
       
    y <- .C("massdist", x = as.double(x), nx = N, xlo = as.double(lo), 
        xhi = as.double(up), y = double(2 * n), ny = as.integer(n), 
        NAOK = has.na, PACKAGE = "base")$y

y[1] and y[2] should be 0 and 0 but both of them became NaN after this
statement.

So I looked at src/appl/masdist.c with a debugger.  The bug is caused
by floor().  On Alpha/Linux, floot(NaN) returns 0.  x[i] in the
following code is the list passed from the above statement in
density().  The array x contains a couple of NaN.  When x[i] is NaN,
xpos become NaN.  Then ix = floor(xpos) returns an unexpected result.
On linux/i386, ix become -2147483648 when xpos = NaN(0x80000000007a2).
However ix become 0 on Linux/Alpha when xpos=NaN.  When xpos = NaN, it
shouldn't go into the following "if" statement.  But it goes inside on
Alpha/Linux (because ixmin is 0), and set y[0] and y[1] to NaN.

Following is extracted from massdist.c

    for(i=0 ; i<*nx ; i++) {
    	xpos = (x[i] - *xlow) / xdelta;
    	ix = floor(xpos);
    	fx = xpos - ix;
    	if(ixmin <= ix && ix <= ixmax) {
    	    y[ix] += (1.0 - fx);
    	    y[ix + 1] += fx;
    	}
    	else if(ix == -1) {
    	    y[0] += fx;
    	}
    	else if(ix == ixmax + 1) {
    	    y[ixmax + 1] += (1.0 - fx);
    	}
    }


So I think the statement

	if(ixmin <= ix && ix <= ixmax) {

should be changed to 

    	if((! isnan(ix)) && ixmin <= ix && ix <= ixmax) {

or 

everything inside of this for loop should be encolsed with 

    for(i=0 ; i<*nx ; i++) {
	if ( ! isnan( x[i] ) ) {
		:
		:
       }
    }

A patch to fix this bug is included.

--- R-0.65.0/src/appl/massdist.c.orig	Thu Oct  7 21:26:53 1999
+++ R-0.65.0/src/appl/massdist.c	Thu Oct  7 21:47:55 1999
@@ -38,6 +38,7 @@
 	y[i] = 0;
 
     for(i=0 ; i<*nx ; i++) {
+      if ( ! isnan( x[i] ) ) {
 	xpos = (x[i] - *xlow) / xdelta;
 	ix = floor(xpos);
 	fx = xpos - ix;
@@ -51,6 +52,7 @@
 	else if(ix == ixmax + 1) {
 	    y[ixmax + 1] += (1.0 - fx);
 	}
+      }
     }
 
     for(i=0 ; i<*ny ; i++)






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Oct  8 08:56:14 1999
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Fri, 8 Oct 1999 09:56:14 +0200 (MET DST)
Subject: Check script (PR#292)
Message-ID: <199910080756.JAA08367@pubhealth.ku.dk>

There is a syntax error in the "check" script in R 0.65.1, due to an
unescaped ` character. Line 96 should read

    echo " Results of \`check' are available in directory ../${CHECK_DIR}"

not

    echo " Results of `check' are available in directory ../${CHECK_DIR}"

Martyn

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct  8 09:43:53 1999
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 8 Oct 1999 10:43:53 +0200 (MET DST)
Subject: dimnames and subscripting (PR#293)
Message-ID: <199910080843.KAA09091@pubhealth.ku.dk>

I am not sure that this is a bug, but it was unexpected -- of course my
expectations are fallible, eg column ordering in model.matrix()!  When an
array is subscripted the names of the dimnames list are lost (v 64.1). 

fred <- array(1:12, 2:4, list(A = letters[1:2], B = letters[3:5], C =
    letters[6:9]))

dimnames(fred)
dimnames(fred[1, , ])
dimnames(fred[1, , , drop=FALSE])

In the first case I expected names B and C to be preserved; in the second
case, not quite so clear-cut, I also expected B and C to be preserved.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Oct  8 10:36:22 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 8 Oct 1999 11:36:22 +0200 (CEST)
Subject: Check script (PR#292)
In-Reply-To: <199910080756.JAA08367@pubhealth.ku.dk>
References: <199910080756.JAA08367@pubhealth.ku.dk>
Message-ID: <14333.47894.381498.830864@fangorn.ci.tuwien.ac.at>

>>>>> plummer  writes:

> There is a syntax error in the "check" script in R 0.65.1, due to an
> unescaped ` character. Line 96 should read

>     echo " Results of \`check' are available in directory ../${CHECK_DIR}"

> not

>     echo " Results of `check' are available in directory ../${CHECK_DIR}"

Fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct  8 11:32:10 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Oct 1999 12:32:10 +0200
Subject: dimnames and subscripting (PR#293)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Fri, 8 Oct 1999 10:43:53 +0200 (MET DST)"
References: <199910080843.KAA09091@pubhealth.ku.dk>
Message-ID: <x27lkycfdh.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I am not sure that this is a bug, but it was unexpected -- of course my
> expectations are fallible, eg column ordering in model.matrix()!  When an
> array is subscripted the names of the dimnames list are lost (v 64.1). 
> 
> fred <- array(1:12, 2:4, list(A = letters[1:2], B = letters[3:5], C =
>     letters[6:9]))
> 
> dimnames(fred)
> dimnames(fred[1, , ])
> dimnames(fred[1, , , drop=FALSE])
> 
> In the first case I expected names B and C to be preserved; in the second
> case, not quite so clear-cut, I also expected B and C to be preserved.

Yep, it's a bug. Same as reported as PR#257 by Andreas W. Still
pending investigation...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Oct  8 15:00:16 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 8 Oct 1999 16:00:16 +0200
Subject: [R] ts package on CRAN ?
In-Reply-To: <37FDF1E3.2A9B9C80@bank-banque-canada.ca> (message from Paul
 Gilbert on Fri, 08 Oct 1999 09:30:12 -0400)
References: <Pine.GSO.4.05.9910081003590.10042-100000@auk.stats> <99100812411306.00949@ida> <199910081306.PAA14669@sophie.ethz.ch> <37FDF1E3.2A9B9C80@bank-banque-canada.ca>
Message-ID: <199910081400.QAA14714@sophie.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
(privately to me,
 I'm cc'ing to R-devel since this should be of a wider interest)

    MM> However, if "tseries" would just contain a
    MM> require(ts)

    PaulG> So this is how this is suppose to be done. I guess I should read
    PaulG> some documentation somewhere. 

help(library)

 (especially the last sections) should give quite a bit of info on this.

    PaulG> Should this be "in line" in the
    PaulG> library file or should it be in the .First.lib file?

There's no such thing as a ".First.lib" file; of course,
you mean the commonly used  zzz.R  file (containing the  .First.lib <- .... )

Answer: Well, it depends.. :
Usually it doesn't matter where the require() is;
Current practice 
 (grep'ing in my directory tree of all the source of all the CRAN packages)
reveals that people have adopted several different ways of doing this.

The zzz.R (which should also contain the .First.lib definition)
is good place to put such a general require().
Recently, we had a case where using
aaa.R (I think, even "Aaa.R") instead was recommended  
{Idea: aaa.R would come at the very beginning of the installed package source}

If only very little functionality of a package depends on another
(non-standard) package, I'd consider to put the  require(..)
only inside the function requiring the package, something like

  if(!require(<pkg>))
   stop("The function `...' can only be used when package <pkg> is available!")

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Oct  8 17:54:09 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 8 Oct 1999 18:54:09 +0200 (MET DST)
Subject: floor(NaN) problem fixed in massdist.c (PR#291)
Message-ID: <199910081654.SAA16942@pubhealth.ku.dk>

Dear Naoki,
Thank you very much,

for your detailed bug report and your proposed patch.

>> This will fix the "problem 2 (crash in fft)" in Bug ID #277
>> 
>> On Linux/Alpha, make check failed because R could not handle the following
>> example in base-Ex.R
>> 
>> ##___ Examples ___:
>> 
>> # The Old Faithful geyser data
>> data(faithful)
>>  :
>>  :
>> ## Missing values:
>> x <- xx <- faithful$eruptions
>> x[i.out <- sample(length(x), 10)] <- NA
>> doR <- density(x, bw=0.15, na.rm = TRUE)
>> doN <- density(x, bw=0.15, na.rm = FALSE)
>> 	### it fails at this statement ###
>> lines(doR, col="blue")
>> ...

>> The following statement in density() was not getting the right output:
>>        
>>     y <- .C("massdist", x = as.double(x), nx = N, xlo = as.double(lo), 
>>         xhi = as.double(up), y = double(2 * n), ny = as.integer(n), 
>>         NAOK = has.na, PACKAGE = "base")$y
>> 
>> y[1] and y[2] should be 0 and 0 but both of them became NaN after this
>> statement.
>> 
>> So I looked at src/appl/masdist.c with a debugger.  The bug is caused
>> by floor().  On Alpha/Linux, floor(NaN) returns 0.

Thank you so much for finding this!

However, this is clearly a bug of (your version of) gcc, respectively libm
on Alpha/Linux.
In general, we do rely on IEEE Arithmetic working correctly.

>>  x[i] in the
>> following code is the list passed from the above statement in
>> density().  The array x contains a couple of NaN.  When x[i] is NaN,
>> xpos become NaN.  Then ix = floor(xpos) returns an unexpected result.
>> On linux/i386, ix become -2147483648 when xpos = NaN(0x80000000007a2).
>> However ix become 0 on Linux/Alpha when xpos=NaN.  When xpos = NaN, it
>> shouldn't go into the following "if" statement.  But it goes inside on
>> Alpha/Linux (because ixmin is 0), and set y[0] and y[1] to NaN.
>> 
>> Following is extracted from massdist.c
>> 
>>     for(i=0 ; i<*nx ; i++) {
>>     	xpos = (x[i] - *xlow) / xdelta;
>>     	ix = floor(xpos);
>>     	fx = xpos - ix;
>>     	if(ixmin <= ix && ix <= ixmax) {
>>     	    y[ix] += (1.0 - fx);
>>     	    y[ix + 1] += fx;
>>     	}
>>     	else if(ix == -1) {
>>     	    y[0] += fx;
>>     	}
>>     	else if(ix == ixmax + 1) {
>>     	    y[ixmax + 1] += (1.0 - fx);
>>     	}
>>     }
>> 
>> 
>> So I think the statement
>> 
>> 	if(ixmin <= ix && ix <= ixmax) {
>> 
>> should be changed to 
>> 
>>     	if((! isnan(ix)) && ixmin <= ix && ix <= ixmax) {
>> 
>> or 
>> ........

Instead of  isnan () , it should rather be ISNAN() [an R defined macro]
which is true for both NaN and NA.
(note that we also try to have a working ISNAN() when there's no isnan()
available from C
  (note that ANSI or POSIX C  unfortunately do NOT require IEEE arithmetic!)

I'll have a look at the code and your proposed patch.

Thanks again!

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Sun Oct 10 12:00:53 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Sun, 10 Oct 1999 12:00:53 +0100
Subject: msvrt.dll (was R-0.65.1 for WinNT/9X)
In-Reply-To: <000201bf12fa$1b5f0800$e3109d3e@fenris>; from Karl M. Syring on Sun, Oct 10, 1999 at 10:33:19AM +0200
References: <x2hfk0r1ft.fsf@blueberry.kubism.ku.dk> <000201bf12fa$1b5f0800$e3109d3e@fenris>
Message-ID: <19991010120052.19823@hal.stat.unipd.it>

On Sun, Oct 10, 1999 at 10:33:19AM +0200, Karl M. Syring wrote:
> I think, we have now a good reason to make the binary distributions to load
> msvrt.dll. Otherwise, you would probably get both crtdll and msvcrt loaded
> if you use COM/ActiveX. As we already now, this is a safe way into difficult
> and hard to diagnose problems.
> 

 [Cross-posted to  r-devel not to r-help]

 Karl,
 my idea is to switch to msvrt.dll soon. However. some more tests
 are needed.

 guido
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 10 12:03:05 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 10 Oct 1999 12:03:05 +0100 (BST)
Subject: msvrt.dll (was R-0.65.1 for WinNT/9X)
In-Reply-To: <19991010120052.19823@hal.stat.unipd.it>
Message-ID: <Pine.GSO.4.05.9910101135570.4687-100000@auk.stats>

On Sun, 10 Oct 1999, Guido Masarotto wrote:

> On Sun, Oct 10, 1999 at 10:33:19AM +0200, Karl M. Syring wrote:
> > I think, we have now a good reason to make the binary distributions to load
> > msvrt.dll. Otherwise, you would probably get both crtdll and msvcrt loaded
> > if you use COM/ActiveX. As we already now, this is a safe way into difficult
> > and hard to diagnose problems.

Nothing in the (unreleased) (D)COM stuff makes any use of msvcrt.dll.
I have just checked by removing from my system and re-running the tests.
It is all ATL based.

>  Karl,
>  my idea is to switch to msvrt.dll soon. However. some more tests
>  are needed.

In particular, we have to resolve what to do about machines without
msvcrt.dll.  Not all Windows machines have it, and I have read the
redistribution conditions on my copy of Visual Studio. I am not clear we
have any right to redistribute it with an application not compiled under
VC++6 (it might depend where we got it from) and if we do there seem to be
complex conditions on checking version numbers which will demand a quite
complex updater to be written.  It looks like having a local copy for the
application is not approved of.  (All I know is that the redistibution
conditions do depend on which of the many VS licences one has.)

Karl: it would be a great help if you could look into this for us, and
if the way looks clear provide us with a suitable updater, or point us
to a suitable ready-made one.

Another side effect of requiring msvcrt.dll appears to be to stop the
possibilities of using the cygwin and cross-compiling routes, since AFAIK
only the binaries for the mingw32 compiler are available to use msvcrt.dll.
Again, if you know more it would be very helpful if you could test this for
us.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From szimeras@irisa.fr  Tue Oct 12 17:38:44 1999
From: szimeras@irisa.fr (Stelios Zimeras)
Date: Tue, 12 Oct 1999 18:38:44 +0200
Subject: Compilation problem with R
Message-ID: <38036414.DDA145DF@irisa.fr>

Dear Sirs,

I try to compile the R ver 65.1 in my UNIX machine, but I have some
difficulties. In particular
running the ./configure I have the following results  (I give only the
no, all the others are yes)

checking whether gcc needs -traditional... no
checking for g77... no
checking for sin in -lmoto... no
chechecking for main in -lhdf5... no
cking for main in -lncurses... no
checking for main in -ldxml... no
checking for main in -lblas_risc... no
checking for rl_callback_read_char in -lreadline... no
checking for ANSI C header files... no
checking for vfork.h... no
checking for working vfork... no
checking for __setfpucw... no
checking for dl.h... no
checking for fpu_control.h... no
checking for hdf5.h... no
checking for ieee754.h... no
checking for readline/history.h... no
checking for blkcnt_t... no
checking how to deal with shared libraries...
"/usr/openwin/lib/config/sun.cf", line 154: macro ExtraLoadOptions
redefines previous macro at "/usr/openwin/lib/config/site.def", line 64
"/usr/openwin/lib/config/site.def", line 64: macro ExtraLoadOptions
redefines previous macro at "/usr/openwin/lib/config/sun.cf", line 154
done
checking whether -R must be followed by a space... no
checking for dnet_ntoa in -ldnet... no
checking for dnet_ntoa in -ldnet_stub... no
checking for gethostbyname... no
checking for connect... no
checking for IceConnectionNumber in -lICE... no

R is now configured for sparc-sun-solaris2.5

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc  -g -O2
  FORTRAN compiler:         f2c
  Gnome support:            no

and when I run the make command I have the following  (after all the
lines)

drotg.o(.text+0x170): undefined reference to `__d_sign'
*** Error code 1
make: Fatal error: Command failed for target `../../bin/R.X11'
Current working directory /udd/szimeras/rhome/R-0.65.1/src/main
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /udd/szimeras/rhome/R-0.65.1/src/main
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /udd/szimeras/rhome/R-0.65.1/src
*** Error code 1
make: Fatal error: Command failed for target `R'

Ofcourse I can run R.

Could you give me some directions about the problem?
Many thanks

Stelios Zimeras


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 12 23:45:42 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 1999 00:45:42 +0200
Subject: Compilation problem with R
In-Reply-To: Stelios Zimeras's message of "Tue, 12 Oct 1999 18:38:44 +0200"
References: <38036414.DDA145DF@irisa.fr>
Message-ID: <x2emf0fbah.fsf@blueberry.kubism.ku.dk>

Stelios Zimeras <szimeras@irisa.fr> writes:

> R is now configured for sparc-sun-solaris2.5
                          ^^^^^^^^^^^^^^^^^^^^
Aha. Now you're telling us...

> 
>   Source directory:         .
>   Installation directory:   /usr/local
>   C compiler:               gcc  -g -O2
>   FORTRAN compiler:         f2c
                              ^^^
>   Gnome support:            no
> 
> and when I run the make command I have the following  (after all the
> lines)
> 
> drotg.o(.text+0x170): undefined reference to `__d_sign'
> *** Error code 1

This looks like a fortran library gone missing. Perhaps the linker
doesn't know where to find it? You may need to hand-edit the Makeconf
file to tell it where to look (-L/opt/local/lib in FLIBS is a guess,
but it is completely dependent on your setup). 

Another option could be to install a g77 compiler.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Wed Oct 13 14:58:38 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (Thomas Hoffmann)
Date: Wed, 13 Oct 1999 15:58:38 +0200 (METDST)
Subject: formatReal()-bug (or Is there anybody out there w/o IEEE754?)
Message-ID: <199910131358.PAA06386@ehmgs2.et.tu-dresden.de>

On a system with IEEE_754 undefined, I run into an bug, when the value
of an element of the first argument (e.g., x[0]) of formatReal() is NA:

1. (format.c:235) if (!R_FINITE ..) gives nanflag=1 (!naflag remains 0)
2. (format.c:272..288) *m gets an value of -2147483643 (from the format 
                       fiddling, should not matter to us)
3. (format.c:289) because naflag is zero, m does not get the value of
                  R_print.na_width and we get back the unbelievable value 
                  from 2.

This crashes R in commands as 
	as.vector(NA,mode="double")
.

(Please reply to my mail address too, because I do not read r-devel regularly).
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 13 16:05:10 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 1999 17:05:10 +0200
Subject: [R] main/character.c (et.al): dangerous AllocBuffer()
In-Reply-To: Thomas Hoffmann's message of "Wed, 13 Oct 1999 15:21:11 +0200 (METDST)"
References: <199910131321.PAA06250@ehmgs2.et.tu-dresden.de>
Message-ID: <x2vh8b8fo9.fsf@blueberry.kubism.ku.dk>

Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:

> When called with len<0 the code is assumed to re-size buff to MAXELTSIZE:
> 
> 	realloc(buff, 0);
> 	buff = (char *) realloc(buff, MAXELTSIZE);
> 	bufsize = MAXELTSIZE;
--etc--

Fixed as suggested (free+malloc)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 13 16:17:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 1999 17:17:53 +0200
Subject: formatReal()-bug (or Is there anybody out there w/o IEEE754?)
In-Reply-To: Thomas Hoffmann's message of "Wed, 13 Oct 1999 15:58:38 +0200 (METDST)"
References: <199910131358.PAA06386@ehmgs2.et.tu-dresden.de>
Message-ID: <x2so3f8f31.fsf@blueberry.kubism.ku.dk>

Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:

> On a system with IEEE_754 undefined, I run into an bug, when the value
> of an element of the first argument (e.g., x[0]) of formatReal() is NA:
> 
> 1. (format.c:235) if (!R_FINITE ..) gives nanflag=1 (!naflag remains 0)
> 2. (format.c:272..288) *m gets an value of -2147483643 (from the format 
>                        fiddling, should not matter to us)
> 3. (format.c:289) because naflag is zero, m does not get the value of
>                   R_print.na_width and we get back the unbelievable value 
>                   from 2.
> 
> This crashes R in commands as 
> 	as.vector(NA,mode="double")
> .

If a system isn't IEEE, it might not know about NaN either, so I
suspect that one wants naflag = 1 rather than nanflag = 1.

Could you try it and report back?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From William.Venables@cmis.CSIRO.AU  Thu Oct 14 07:58:00 1999
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Thu, 14 Oct 1999 16:58:00 +1000
Subject: [R] Regression on non linear model
In-Reply-To: Your message of "Thu, 14 Oct 1999 07:38:39 +0100."
 <Pine.GSO.4.05.9910140730380.9722-100000@auk.stats>
Message-ID: <199910140700.RAA23011@snowy.nsw.cmis.CSIRO.AU>

> > 
> > The preferred way to do this is to use the I() function to protect
> > the ^2 and ^3 from being evaluated as part of the linear model
> > formula.  That is, write the call to lm with
> > 
> >  formula = Response ~ Var1 + I(Var1^2) + I(Var1^3)
> 
> I was doing this in a practical class yesterday. There is another way,
> 
> Response ~ poly(Var1, 3)
> 
> which fits the same cubic model by using orthogonal polynomials, and
> that has a number of numerical and statistical advantages. The fitted
> values will be the same, but the coefficients are those of the orthogonal
> polynomials, not the terms in the polynomial.  As I was telling my
> students, you might like to compare the two approaches.

One further advantage of doing it this way (in S-PLUS at least) is that you can
plot that component of the fitted curve very simply using plot.gam.  Now I know
we don't have a gam() in R yet, but I hope we plan to do so sometime and my
suggestion would be to start with a plot.gam and release that first.  It could
be done in a wet weekend (but I regret to say the weekends here are simply
beautiful.... :-)

-- 
-----------------------------------------------------------------
Bill Venables, Statistician, CMIS Environmetrics Project.

Physical address:                            Postal address:
CSIRO Marine Laboratories,                   PO Box 120,       
233 Middle St, Cleveland, Queensland         Cleveland, Qld, 4163
AUSTRALIA                                    AUSTRALIA

Telephone: +61 7 3826 7251     Email: Bill.Venables@cmis.csiro.au     
      Fax: +61 7 3826 7304


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 14 16:36:17 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 14 Oct 1999 08:36:17 -0700 (PDT)
Subject: [R] Regression on non linear model
In-Reply-To: <199910140700.RAA23011@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <Pine.GSO.4.10.9910140833150.2421-100000@wompom.biostat.washington.edu>

On Thu, 14 Oct 1999, Bill Venables wrote:

> One further advantage of doing it this way (in S-PLUS at least) is that you can
> plot that component of the fitted curve very simply using plot.gam.  Now I know
> we don't have a gam() in R yet, but I hope we plan to do so sometime and my
> suggestion would be to start with a plot.gam and release that first.  It could
> be done in a wet weekend (but I regret to say the weekends here are simply
> beautiful.... :-)

I have a predict(, type="terms") and also resid(,type="partial") for glms
which are the main part of these plots. I wrote it a few versions ago, so
I will probably have to update a bit. 

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Fri Oct 15 09:25:09 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (Thomas Hoffmann)
Date: Fri, 15 Oct 1999 10:25:09 +0200 (METDST)
Subject: IEEE_754 logic
Message-ID: <199910150825.KAA08308@ehmgs2.et.tu-dresden.de>

Can anybody of the architects of R enlighten me about the reasoning behind the selection of the IEEE 754 
mode for the building of R, please?

Special points of interest are:

1. The selection seems to be based on the availability of isnan() and finite(). Is this a common way 
to test for IEEE 754?

2. The C9x draft introduces isfinite() instead of finite() (and as I see, some systems, e.g. the 
macintosh, use this naming already). This is a deviation from the old ieee754 C mapping. I do not 
know, where we are in this transformation process now (most compilers seem to use finite(), still).

3. The C9x draft introduces the is*() functionality under the name of "classification MACROS". If an 
implementation implements this standard, autoconf misses isnan() and isfinite().

=============================================================================
Thomas Hoffmann, Institut fuer Halbleiter- und Mikrosystemtechnik, TU Dresden 
E-mail: hoffmann@ehmgs2.et.tu-dresden.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 15 16:03:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Oct 1999 17:03:54 +0200
Subject: IEEE_754 logic
In-Reply-To: Thomas Hoffmann's message of "Fri, 15 Oct 1999 10:25:09 +0200 (METDST)"
References: <199910150825.KAA08308@ehmgs2.et.tu-dresden.de>
Message-ID: <x2puyg4qed.fsf@blueberry.kubism.ku.dk>

Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:

> Can anybody of the architects of R enlighten me about the reasoning behind the selection of the IEEE 754 
> mode for the building of R, please?
> 
> Special points of interest are:
> 
> 1. The selection seems to be based on the availability of isnan() and finite(). Is this a common way 
> to test for IEEE 754?
> 
> 2. The C9x draft introduces isfinite() instead of finite() (and as I see, some systems, e.g. the 
> macintosh, use this naming already). This is a deviation from the old ieee754 C mapping. I do not 
> know, where we are in this transformation process now (most compilers seem to use finite(), still).
> 
> 3. The C9x draft introduces the is*() functionality under the name of "classification MACROS". If an 
> implementation implements this standard, autoconf misses isnan() and isfinite().
> 

Thanks for your comments. If you have suggestions for a safer way of
detecting the functionality in a platform-dependent way, we'd be happy
to know about it. However, one has to be careful; e.g., Solaris has
only finite() and no isfinite(), linux has both. There seems to be
almost no consistency in how different systems signal the precence of
IEEE compatibility. 

The heuristics in autoconf are more or less lifted  off of other
packages like Octave (right, Kurt?) and are by no means failsafe. 

I don't think it is a big deal to insert a check for finite() *or*
isfinite(), if that helps with some of your problems.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From szimeras@irisa.fr  Fri Oct 15 16:07:37 1999
From: szimeras@irisa.fr (Stelios Zimeras)
Date: Fri, 15 Oct 1999 17:07:37 +0200
Subject: R-suggestion
Message-ID: <38074338.E03B1107@irisa.fr>

Dear All,

Few days ago, I ask some informations that how I can solve my problem
with R installation due to fortran links. I have some interesting
suggestions and I thanks everyone for the quick reply. But the main
problem that I have is I need to do the link between the ./configure
program and the fortran libraries due to my quota space. Looking the
script of  the ./configure I found quite difficult to include any
command link inside the program . The question is, how I can do this
link?
I appreciate any suggestion for this problem, because I need to do some
experiments with this package.
Many thanks for your time

Stelios Zimeras

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Oct 18 09:08:14 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 18 Oct 1999 10:08:14 +0200 (CEST)
Subject: IEEE_754 logic
In-Reply-To: <x2puyg4qed.fsf@blueberry.kubism.ku.dk>
References: <199910150825.KAA08308@ehmgs2.et.tu-dresden.de>
 <x2puyg4qed.fsf@blueberry.kubism.ku.dk>
Message-ID: <14346.54638.829489.764648@fangorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:
>> Can anybody of the architects of R enlighten me about the reasoning behind the selection of the IEEE 754 
>> mode for the building of R, please?
>> 
>> Special points of interest are:
>> 
>> 1. The selection seems to be based on the availability of isnan() and finite(). Is this a common way 
>> to test for IEEE 754?
>> 
>> 2. The C9x draft introduces isfinite() instead of finite() (and as I see, some systems, e.g. the 
>> macintosh, use this naming already). This is a deviation from the old ieee754 C mapping. I do not 
>> know, where we are in this transformation process now (most compilers seem to use finite(), still).
>> 
>> 3. The C9x draft introduces the is*() functionality under the name of "classification MACROS". If an 
>> implementation implements this standard, autoconf misses isnan() and isfinite().
>> 

> Thanks for your comments. If you have suggestions for a safer way of
> detecting the functionality in a platform-dependent way, we'd be happy
> to know about it. However, one has to be careful; e.g., Solaris has
> only finite() and no isfinite(), linux has both. There seems to be
> almost no consistency in how different systems signal the precence of
> IEEE compatibility. 

> The heuristics in autoconf are more or less lifted  off of other
> packages like Octave (right, Kurt?) and are by no means failsafe.

Not quite.  I don't think Octave worries about isfinite() at all.  We
check for finite() as a library function in autoconf.  In addition, we
do the following in `Arith.h':

#include <math.h>
#ifdef Macintosh
# define finite(x)      isfinite(x)
#else
# ifndef HAVE_FINITE
#  ifndef finite                /* Do not declare if macro! */
#   ifdef isfinite              /* HPUX math.h */
#     define finite(x)  isfinite(x)
#   else
      int finite(double);
#   endif
#  endif
# endif
#endif

which seems to give what we want, no?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Mon Oct 18 09:30:15 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (Thomas Hoffmann)
Date: Mon, 18 Oct 1999 10:30:15 +0200 (METDST)
Subject: IEEE_754 logic
Message-ID: <199910180830.KAA01996@ehmgs2.et.tu-dresden.de>

> >>>>> Peter Dalgaard BSA writes:  
> > > Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:  
> >> 3.  The C9x draft introduces
the is*() functionality under the name of "classification MACROS".  If an 
> >>implementation implements this standard, autoconf misses isnan() and isfinite().
> >>

The problem for me is, that if isnan and isfinite are the way C9x says (i.e.
are MACROS), then configure concludes "not there" (AC_FUNCS misses macros
(intentionally)).

>From this it reasons "not IEEE 754".

Then I get back to a native finite() in Arith.h, but IEEE 754 mode was switched
off.

So I see two topics:

1.  Maybe not to (only) check if isnan/isfinite are library functions, but also
to check for working macros (I have not found a predefined macro in Autoconf for
this).

This seems of some importance to me, because it is not only an idiosyncracy of a
singular system, but may become a more widespread problem if systems become C9x
compliant someday.

2.  Introduce a more bulletproof check for IEEE 754.

Is there possibly a computation we can carry out and conclude from its result to
IEEE 754?  I just have no idea.

=============================================================================
Thomas Hoffmann, Institut fuer Halbleiter- und Mikrosystemtechnik, TU Dresden
E-mail:  hoffmann@ehmgs2.et.tu-dresden.de
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct 20 20:07:17 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 20 Oct 1999 21:07:17 +0200 (MET DST)
Subject: Sun's make "almost" works
Message-ID: <14350.4837.785625.139546@gargle.gargle.HOWL>

I don't know if we still strive for  non-GNU make capability..

Anyway, here a report:

I was using the builddir != srcdir approach on Sun Solaris 2.6,
and normal Sun make (/usr/ccs/bin/make) worked up to producing a correct
R.X11 binary.

It failed when trying to make the first  src/library/<pkg>/src/<pkg>.so,
namely in eda/src  with

make: Fatal error: Don't know how to make target `line.o'

where GNU make then did

gcc -I../../../../include  -DHAVE_CONFIG_H  -fPIC -g -O2 -c ../../../../../SRC/src/library/eda/src/line.c -o line.o
.......

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Oct 21 01:16:10 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 20 Oct 1999 17:16:10 -0700
Subject: error in split?
Message-ID: <87zoxd36wl.fsf@alpha.cfas.washington.edu>



Just saw the following which looked strange (Thomas, I'll bug you
about it tommorow...):

(ctl and group are factors, vectors of strings; ddna is a vector of
#'s) 

Does it have to do with the number of quotes?

best,
-tony
	
> ctl.x.group <- interaction(ctl,group)
> my.list <- split(ddna,ctl.x.group)
Error in split(x, f) : second argument must be a factor
> is.factor(ctl.x.group)
[1] TRUE
> ### Thoughts?  here's ctl and group (trimmed for space):
> ctl
   [1] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
   [7] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
  [13] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
[1783] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1789] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1795] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1801] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1807] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1813] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1819] \"NONCTL\" \"NONCTL\"
Levels:  "CTL" "NONCTL" 
> 
> group
   [1] \"L\" \"P\" \"L\" \"P\" \"L\" \"R\" \"L\" \"L\" \"R\" \"R\" \"A\" \"L\"
  [13] \"R\" \"R\" \"R\" \"L\" \"R\" \"R\" \"R\" \"L\" \"L\" \"L\" \"A\" \"P\"
  [25] \"R\" \"P\" \"P\" \"L\" \"L\" \"R\" \"L\" \"R\" \"L\" \"P\" \"P\" \"P\"
  [37] \"P\" \"R\" \"A\" \"L\" \"A\" \"P\" \"P\" \"L\" \"R\" \"P\" \"R\" \"P\"
  [49] \"R\" \"P\" \"R\" \"R\" \"R\" \"A\" \"R\" \"L\" \"R\" \"L\" \"R\" \"A\"
  [61] \"P\" \"R\" \"R\" \"R\" \"R\" \"R\" \"P\" \"P\" \"P\" \"L\" \"R\" \"A\"
[1765] \"L\" \"P\" \"P\" \"P\" \"L\" \"L\" \"L\" \"P\" \"L\" \"P\" \"L\" \"L\"
[1777] \"P\" \"R\" \"L\" \"P\" \"L\" \"R\" \"R\" \"L\" \"A\" \"L\" \"A\" \"P\"
[1789] \"P\" \"P\" \"A\" \"A\" \"L\" \"L\" \"L\" \"P\" \"L\" \"P\" \"R\" \"L\"
[1801] \"L\" \"A\" \"R\" \"P\" \"L\" \"P\" \"L\" \"L\" \"L\" \"L\" \"L\" \"L\"
[1813] \"R\" \"P\" \"L\" \"R\" \"A\" \"L\" \"A\" \"L\"
Levels:  "A" "L" "P" "R" 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Oct 21 01:19:02 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: Wed, 20 Oct 1999 17:19:02 -0700 (PDT)
Subject: error in split...
Message-ID: <m11e5wc-000ox5C@alpha.cfas.washington.edu>

Date: 20 Oct 1999 17:19:02 -0700
Message-ID: <87yacx36rt.fsf@alpha.cfas.washington.edu>
Lines: 62


(repeated: 
> version
         _                 
platform i686-unknown-linux
arch     i686              
os       linux             
system   i686, linux       
status   Release           
major    0                 
minor    65.1              
year     1999              
month    October           
day      07                
language R                 
> 
)

Just saw the following which looked strange (Thomas, I'll bug you
about it tommorow...):

(ctl and group are factors, vectors of strings; ddna is a vector of
#'s) 

Does it have to do with the number of quotes?

best,
-tony
	
> ctl.x.group <- interaction(ctl,group)
> my.list <- split(ddna,ctl.x.group)
Error in split(x, f) : second argument must be a factor
> is.factor(ctl.x.group)
[1] TRUE
> ### Thoughts?  here's ctl and group (trimmed for space):
> ctl
   [1] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
   [7] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
  [13] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
[1783] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1789] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1795] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1801] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1807] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1813] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1819] \"NONCTL\" \"NONCTL\"
Levels:  "CTL" "NONCTL" 
> 
> group
   [1] \"L\" \"P\" \"L\" \"P\" \"L\" \"R\" \"L\" \"L\" \"R\" \"R\" \"A\" \"L\"
  [13] \"R\" \"R\" \"R\" \"L\" \"R\" \"R\" \"R\" \"L\" \"L\" \"L\" \"A\" \"P\"
  [25] \"R\" \"P\" \"P\" \"L\" \"L\" \"R\" \"L\" \"R\" \"L\" \"P\" \"P\" \"P\"
  [37] \"P\" \"R\" \"A\" \"L\" \"A\" \"P\" \"P\" \"L\" \"R\" \"P\" \"R\" \"P\"
  [49] \"R\" \"P\" \"R\" \"R\" \"R\" \"A\" \"R\" \"L\" \"R\" \"L\" \"R\" \"A\"
  [61] \"P\" \"R\" \"R\" \"R\" \"R\" \"R\" \"P\" \"P\" \"P\" \"L\" \"R\" \"A\"
[1765] \"L\" \"P\" \"P\" \"P\" \"L\" \"L\" \"L\" \"P\" \"L\" \"P\" \"L\" \"L\"
[1777] \"P\" \"R\" \"L\" \"P\" \"L\" \"R\" \"R\" \"L\" \"A\" \"L\" \"A\" \"P\"
[1789] \"P\" \"P\" \"A\" \"A\" \"L\" \"L\" \"L\" \"P\" \"L\" \"P\" \"R\" \"L\"
[1801] \"L\" \"A\" \"R\" \"P\" \"L\" \"P\" \"L\" \"L\" \"L\" \"L\" \"L\" \"L\"
[1813] \"R\" \"P\" \"L\" \"R\" \"A\" \"L\" \"A\" \"L\"
Levels:  "A" "L" "P" "R" 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Thu Oct 21 06:15:02 1999
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Oct 1999 07:15:02 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199910210515.HAA03403@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 229 *
Subject: dev.print scaling bug?
From: John.Peters@tip.csiro.au (John Peters)
Date: Fri, 16 Jul 1999 12:10:48 +1000 (EST)
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 249 *
Subject: axis ignores srt/crt
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 16 Aug 1999 15:51:49 -0700 (PDT)
--`its's not a bug it is an imcomptibility'
* PR# 258 *
Subject: Greek letters in outer margins.
From: "BXC (Bendix Carstensen)" <BXC@NOVO.dk>
Date: Thu, 26 Aug 1999 12:09:17 +0200
--Uses *current* plot margins. 
--
--remove paste() from repro. instr.
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
--Have put note in help file, at least.
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200

Directory:  Installation

* PR# 290 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Thu, 30 Sep 1999 21:18:49 +0200 (MET DST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 239 *
Subject: cbind is not generic as claimed, omits labels where S has them 
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 12:29:58 +0100 (BST)
--Cbind is now generic, still labelling issues. See also PR#240 and PR#241.
* PR# 240 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
--See PR#239
* PR# 241 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 6 Aug 1999 06:52:35 +0100 (BST)
--See PR#239
* PR# 257 *
Subject:  dimnames names lost when subscripting 
From: Andreas Weingessel <weingessel@ci.tuwien.ac.at>
Date: Wed, 25 Aug 1999 12:45:28 +0200
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file
--Should we not make the buffer static?
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 210 *
Subject: definition of R_problem_buf in S.h
From: vogels@ieee.org
Date: Mon, 14 Jun 1999 17:56:04 +0200 (MET DST)
--Same as #185

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 222 *
Subject: Use of R-Coda
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Fri, 9 Jul 1999 10:54:16 +0200 
--In Danish (?)  Looks as if PR#246 is the same in English
* PR# 234 *
Subject: R-bugs
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Tue, 27 Jul 1999 13:49:31 +0200
--Looks like PR#222 again, in Danish. See PR#246 for English version
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 260 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
Subject: Compilation of R under Caldera OpenLinux 2.2
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
--workaround is to install missing libg2c.a. See also PR#268 for sucess report
* PR# 268 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
From: "Jack N." <jnf@pcisys.net>
Date: Mon, 06 Sep 1999 08:03:02 -0600
--Followup: See PR#260

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 291 *
Subject: floor(NaN) problem fixed in massdist.c
From: ntakebay@bio.indiana.edu
Date: Fri, 8 Oct 1999 04:57:42 +0200 (MET DST)
* PR# 292 *
Subject: Check script
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 08 Oct 1999 09:59:04 +0200 (CEST)
* PR# 293 *
Subject: dimnames and subscripting
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Fri, 8 Oct 1999 09:43:51 +0100 (BST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Oct 21 07:48:28 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 21 Oct 1999 08:48:28 +0200 (CEST)
Subject: Sun's make "almost" works
In-Reply-To: <14350.4837.785625.139546@gargle.gargle.HOWL>
References: <14350.4837.785625.139546@gargle.gargle.HOWL>
Message-ID: <14350.46908.819883.590823@fangorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

> I don't know if we still strive for  non-GNU make capability..

Yes.  However, my experience is that for non-GNU make we typically need
builddir == srcdir.

> Anyway, here a report:

> I was using the builddir != srcdir approach on Sun Solaris 2.6, and
> normal Sun make (/usr/ccs/bin/make) worked up to producing a correct
> R.X11 binary.

> It failed when trying to make the first
> src/library/<pkg>/src/<pkg>.so, namely in eda/src with

> make: Fatal error: Don't know how to make target `line.o'

> where GNU make then did

> gcc -I../../../../include  -DHAVE_CONFIG_H  -fPIC -g -O2 -c ../../../../../SRC/src/library/eda/src/line.c -o line.o
> .......

Hmm, what is different between the rules in src and the library ones?
Can you try replacing $(SHLIB) by its value in eda's src/Makefile and
then see what happens?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Oct 21 09:20:44 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Oct 1999 10:20:44 +0200 (MET DST)
Subject: error in split... (R 0.65.1) -- and patch (PR#294)
Message-ID: <199910210820.KAA00945@pubhealth.ku.dk>

Thanks for the report.

It is *not* a problem of the quotes  (but how on earth do you get such
			 horrible factor levels with these extra quotes ?)

As a matter of fact, (and as  ?bug.report tries to say)
the bug report should go to  R-bugs, not R-devel;
and preferrably be completely reproducible (using builtin or constructed data)

Here it is, in its reproducible form

a <- gl(3,2,11, lab=LETTERS[1:3])
(aa   <- interaction( a,a))

> split(seq(a), aa)
Error in split(x, f) : second argument must be a factor

The following is a patch (not fully tested, yet):

--- split.R	1999/07/30 14:25:56	1.3
+++ split.R	1999/10/21 08:18:34
@@ -5,7 +5,7 @@
 split.default <-
     function( x, f )
 {
-    f <- as.factor(f)
+    f <- factor(f) # drop extraneous levels
     if(is.null(class(x)))
     {
         retval <- .Internal(split(x, f))


    tony> Just saw the following which looked strange (Thomas, I'll bug you
    tony> about it tommorow...):

    tony> (ctl and group are factors, vectors of strings; ddna is a vector of
    tony> #'s) 

    tony> Does it have to do with the number of quotes?

	
    tony> ctl.x.group <- interaction(ctl,group)
    tony> my.list <- split(ddna,ctl.x.group)
    tony> Error in split(x, f) : second argument must be a factor
    tony> is.factor(ctl.x.group)
    tony> [1] TRUE
    tony> ### Thoughts?  here's ctl and group (trimmed for space):
    tony> ctl
    tony> [1] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
    tony> [7] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
	      ...

    tony> [1813] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
    tony> [1819] \"NONCTL\" \"NONCTL\"
    tony> Levels:  "CTL" "NONCTL" 
    tony> 
    tony> group
    tony> [1] \"L\" \"P\" \"L\" \"P\" \"L\" \"R\" \"L\" \"L\" \"R\" \"R\" ..
    tony> [13] \"R\" \"R\" \"R\" \"L\" \"R\" \"R\" \"R\" \"L\" \"L\" \"L\"..
    .....
    tony> Levels:  "A" "L" "P" "R" 
    tony> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Oct 21 10:20:46 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 21 Oct 1999 11:20:46 +0200 (CEST)
Subject: IEEE_754 logic
In-Reply-To: <199910180830.KAA01996@ehmgs2.et.tu-dresden.de>
References: <199910180830.KAA01996@ehmgs2.et.tu-dresden.de>
Message-ID: <14350.56046.340864.856611@fangorn.ci.tuwien.ac.at>

>>>>> Thomas Hoffmann writes:

>> >>>>> Peter Dalgaard BSA writes:  
>> > > Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:  
>> >> 3.  The C9x draft introduces
> the is*() functionality under the name of "classification MACROS".  If an 
>> >>implementation implements this standard, autoconf misses isnan() and isfinite().
>> >>

> The problem for me is, that if isnan and isfinite are the way C9x says
> (i.e.  are MACROS), then configure concludes "not there" (AC_FUNCS
> misses macros (intentionally)).

> From this it reasons "not IEEE 754".

> Then I get back to a native finite() in Arith.h, but IEEE 754 mode was
> switched off.

> So I see two topics:

> 1.  Maybe not to (only) check if isnan/isfinite are library functions,
> but also to check for working macros (I have not found a predefined
> macro in Autoconf for this).

> This seems of some importance to me, because it is not only an
> idiosyncracy of a singular system, but may become a more widespread
> problem if systems become C9x compliant someday.

This should be doable.  In fact, this is what the code in Arith.h does
for one case, sort of.  I don't think that there is a macro in autoconf
that checks whether FOO exists as a library function or is defined as a
preprocessor symbol for another library function.

(We used to have a similar problem with sigsetjmp, which e.g. under
GNU/Linux is a macro ... so code which later tests for HAVE_SIGSETJMP
would not do the right thing.  I ended up writing a test which uses
AC_EGREP_HEADER.)

Question: does IEEE 754 require the `#include <math.h>'?  (And do all
implementations conform?)  Then we could use AC_EGREP_HEADER tests for
finite and isfinite ...

> 2.  Introduce a more bulletproof check for IEEE 754.

> Is there possibly a computation we can carry out and conclude from its
> result to IEEE 754?  I just have no idea.

(Don't think so.  Does anyone know?)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 21 16:36:37 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 21 Oct 1999 17:36:37 +0200 (MET DST)
Subject: free heap < 0 (PR#295)
Message-ID: <199910211536.RAA06300@pubhealth.ku.dk>


I allocated --vsize 250M (on a machine with 512Mb physical memory) and ran
> gcinfo(T)
> repeat{mean(rnorm(100))}
Garbage collection [nr. 2]...
129352 cons cells free (51%)
255636 Kbytes of heap free (-31%)


The percentage of heap free is less than 0.



--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Patched (unreleased)
 major = 0
 minor = 65.0
 year = 1999
 month = September
 day = 21
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Oct 21 16:40:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 21 Oct 1999 11:40:14 -0400
Subject: require - warn.conflicts
Message-ID: <380F33DE.4B06BAC3@bank-banque-canada.ca>

I am trying to straighten up my DSE package to use require() as that seems to be
a good mechanism. I have several packages:  dse requires tframe which requires
syskern which masks a few methods in base ( RNGkind rnorm runif).

If  I do require(dse) I get 3 copies of a six line warning (lots of white space)
about syskern methods masking base methods. If I use library(dse) I only get 2.
(I've simplified the situation somewhat,  I really have five or six levels of
requires and lots and lots of warning messages.) It would be nice if a single
warning could be produced, but at least could require() please be modified with
a warn.conflicts argument which is passed to library. Below is a fixed version.

Paul Gilbert
_______

 require <- function (name, quietly = FALSE, warn.conflicts=TRUE)
{
    name <- as.character(substitute(name))
    if (!exists(".Provided", inherits = TRUE))
        assign(".Provided", character(0), envir = .GlobalEnv)
    if (is.na(match(paste("package", name, sep = ":"), search())) &&
        is.na(match(name, .Provided))) {
        if (!quietly)
            cat("Loading required package:", name, "\n")
        library(name, char = TRUE, logical = TRUE,
warn.conflicts=warn.conflicts)
    }
    else TRUE
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 21 16:59:24 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 21 Oct 1999 17:59:24 +0200 (MET DST)
Subject: source(,echo=T) doesn't echo comments (PR#296)
Message-ID: <199910211559.RAA06428@pubhealth.ku.dk>


I don't know if this is a bug report or a feature request, but a colleague
complained that source(,echo=T) doesn't echo the comments from the source
file.

	
Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Oct 21 17:42:51 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Oct 1999 18:42:51 +0200 (MET DST)
Subject: source(,echo=T) doesn't echo comments (PR#296)
Message-ID: <199910211642.SAA06551@pubhealth.ku.dk>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> I don't know if this is a bug report or a feature request, but a
    TL> colleague complained that source(,echo=T) doesn't echo the comments
    TL> from the source file.

This is what the new comment treatment brought us
{I hate it as well;  also applies to   example(.)}.

It seemed very hard to correctly attach comments to expressions,
(remember all the misplaced comments in 0.63.x ?).
so now the parser already throws all comments into the trash can.
No way to see them anymore.
AFAIK, we only see them with functions that have "keep.source"
Peter Dalgaard will be able to elaborate.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 21 18:30:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Oct 1999 19:30:53 +0200
Subject: source(,echo=T) doesn't echo comments (PR#296)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Thu, 21 Oct 1999 18:42:51 +0200 (MET DST)"
References: <199910211642.SAA06551@pubhealth.ku.dk>
Message-ID: <x2yacwk4du.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> >>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:
> 
>     TL> I don't know if this is a bug report or a feature request, but a
>     TL> colleague complained that source(,echo=T) doesn't echo the comments
>     TL> from the source file.
> 
> This is what the new comment treatment brought us
> {I hate it as well;  also applies to   example(.)}.
> 
> It seemed very hard to correctly attach comments to expressions,
> (remember all the misplaced comments in 0.63.x ?).
> so now the parser already throws all comments into the trash can.
> No way to see them anymore.
> AFAIK, we only see them with functions that have "keep.source"
> Peter Dalgaard will be able to elaborate.

There's not much more to say. If anyone can think of a better
scheme (perhaps keeping line numbers with the parsed expressions and
rereading the file?)...

The keep.source functionality is also a mixed blessing. It prevents
the system from throwing away things that were commented out and
messing up carefully formatted code, but is also leaves you stuck with
that which was sloppily writte to begin with.

Otherwise we have to rethink the parser. 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eli@ce.berkeley.edu  Fri Oct 22 21:19:12 1999
From: eli@ce.berkeley.edu (Eli Ateljevich)
Date: Fri, 22 Oct 1999 13:19:12 -0700
Subject: No subject
Message-ID: <4.1.19991022114553.00a91820@alpha-5.ce.berkeley.edu>

Hi.
I love R. I have had two compatibility issues in shifting my code over from
Splus

cts,rts, its:    are there any plans to incorporate these classes?

regexpr: R does not seem to have any regular expression matching function,
although that capability seems like it would be fairly simple to add for
someone who knew what they were doing, since the internal code is already
there and someone would just have to write a wrapper. If someone explained
the steps to adding an internal function I would give it a shot.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Oct 22 21:40:36 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 22 Oct 1999 15:40:36 -0500
Subject: none
In-Reply-To: Eli Ateljevich's message of "Fri, 22 Oct 1999 13:19:12 -0700"
References: <4.1.19991022114553.00a91820@alpha-5.ce.berkeley.edu>
Message-ID: <6rhfjjuo1n.fsf@franz.stat.wisc.edu>

Eli Ateljevich <eli@ce.berkeley.edu> writes:

> regexpr: R does not seem to have any regular expression matching function,
> although that capability seems like it would be fairly simple to add for
> someone who knew what they were doing, since the internal code is already
> there and someone would just have to write a wrapper. If someone explained
> the steps to adding an internal function I would give it a shot.

check 
 help(grep)
in R.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Mon Oct 25 08:37:16 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (Thomas Hoffmann)
Date: Mon, 25 Oct 1999 09:37:16 +0200 (METDST)
Subject: gc_inhibit_torture definition twice?
Message-ID: <199910250737.JAA01900@ehmgs2.et.tu-dresden.de>

I have a problem to understand the way gc_inhibit_torture is defined.

In include/Defn.h it is declared as extern, using the __MAIN__ trick this leads to
a definition in main/main.c.

But in main/memory.c you define (and initialize) gc_inhibit_torture again:

    int gc_inhibit_torture = 1; /* gets set to zero after initialisations */

Then, in e.g. unix/system.c immediately at the beginning of main() you initialize 
gc_inhibit_torture once more:

int main(int ac, char **av)
{
    int value, ierr;
    char *p, msg[1024];
    structRstart rstart;
    Rstart Rp = &rstart;

    gc_inhibit_torture = 1;
    
Can anybody explain the reason for this implementation?

=============================================================================
Thomas Hoffmann, Institut fuer Halbleiter- und Mikrosystemtechnik, TU Dresden 
E-mail: hoffmann@ehmgs2.et.tu-dresden.de
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Adrian.Trapletti@wu-wien.ac.at  Mon Oct 25 09:51:50 1999
From: Adrian.Trapletti@wu-wien.ac.at (Adrian Trapletti)
Date: Mon, 25 Oct 1999 08:51:50 +0000
Subject: GARCH models available
Message-ID: <38141A26.A4094946@wu-wien.ac.at>

tseries_0.3-0 at CRAN now contains the following new features:

NelPlo                   Nelson-Plosser Macroeconomic Time Series
garch                    Fit GARCH Models to Time Series
get.hist.quote           Download Historical Finance Data
jarque.bera.test         Jarque-Bera Test
na.remove                NA Handling Routines for Time Series

garch contains a GARCH estimation routine together with some of the
usual methods (print, plot, summary etc.). I plan to further implement a
simulate.garch() and to extend predict.garch() for multi-step forecasts.

For those who like to play with stock market data, get.hist.quote()
allows to download yahoo-finance data directly over the www into R time
series.

Testing, suggestions, and comments are welcome!

Adrian

--
Adrian Trapletti, Vienna University of Economics and Business
Administration, Augasse 2-6, A-1090 Vienna, Austria
Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
Email: adrian.trapletti@wu-wien.ac.at



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 25 10:03:22 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Oct 1999 11:03:22 +0200
Subject: gc_inhibit_torture definition twice?
In-Reply-To: Thomas Hoffmann's message of "Mon, 25 Oct 1999 09:37:16 +0200 (METDST)"
References: <199910250737.JAA01900@ehmgs2.et.tu-dresden.de>
Message-ID: <x23duzlsmd.fsf@blueberry.kubism.ku.dk>

Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:

> I have a problem to understand the way gc_inhibit_torture is defined.
> 
> In include/Defn.h it is declared as extern, using the __MAIN__ trick this leads to
> a definition in main/main.c.
> 
> But in main/memory.c you define (and initialize) gc_inhibit_torture again:
> 
>     int gc_inhibit_torture = 1; /* gets set to zero after initialisations */
> 
> Then, in e.g. unix/system.c immediately at the beginning of main() you initialize 
> gc_inhibit_torture once more:
> 
> int main(int ac, char **av)
> {
>     int value, ierr;
>     char *p, msg[1024];
>     structRstart rstart;
>     Rstart Rp = &rstart;
> 
>     gc_inhibit_torture = 1;
>     
> Can anybody explain the reason for this implementation?

It's a debugging aid, something that got hacked in to scare up some
deep memory protection bugs. The only reason for that implementation is
most likely that my mind was on other things at the time....

I believe it predates the __MAIN__ trick, but nowadays it would seem
that one can safely lose the definition in memory.c. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From syring@email.com  Mon Oct 25 18:10:31 1999
From: syring@email.com (Karl M. Syring)
Date: Mon, 25 Oct 1999 19:10:31 +0200
Subject: [R] GARCH models available
In-Reply-To: <38141A26.A4094946@wu-wien.ac.at>
Message-ID: <000101bf1f0b$d7abb900$bfc29e3e@fenris>

Adrian,
could you please use less unixish temporary file name in get.hist.quote(). I
get some thing like "/tmp/^spc17:54:32" which will fail on Windows because
/tmp might not exist and because the colon is not an acceptable character in
file names.

Karl


> -----Original Message-----
> From: owner-r-help@stat.math.ethz.ch
> [mailto:owner-r-help@stat.math.ethz.ch]On Behalf Of Adrian Trapletti
> Sent: Montag, 25. Oktober 1999 10:52
> To: R-Help
> Cc: R-Devel
> Subject: [R] GARCH models available
>
>
> tseries_0.3-0 at CRAN now contains the following new features:
>
> NelPlo                   Nelson-Plosser Macroeconomic Time Series
> garch                    Fit GARCH Models to Time Series
> get.hist.quote           Download Historical Finance Data
> jarque.bera.test         Jarque-Bera Test
> na.remove                NA Handling Routines for Time Series
>
> garch contains a GARCH estimation routine together with some of the
> usual methods (print, plot, summary etc.). I plan to further implement a
> simulate.garch() and to extend predict.garch() for multi-step forecasts.
>
> For those who like to play with stock market data, get.hist.quote()
> allows to download yahoo-finance data directly over the www into R time
> series.
>
> Testing, suggestions, and comments are welcome!
>
> Adrian
>
> --
> Adrian Trapletti, Vienna University of Economics and Business
> Administration, Augasse 2-6, A-1090 Vienna, Austria
> Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
> Email: adrian.trapletti@wu-wien.ac.at
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info",
> "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Oct 25 18:34:29 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Mon, 25 Oct 1999 19:34:29 +0200 (MET DST)
Subject: explicit weights=NULL fails in glm,lm (PR#297)
Message-ID: <199910251734.TAA01255@pubhealth.ku.dk>


example(glm)
glm(formula = counts ~ outcome + treatment, family =poisson(),weights=NULL)


This is because model.frame() doesn't treat explicit NULLs the same as
missings. 


version: 
         _                   
platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status   Patched (unreleased)
major    0                   
minor    65.1                
year     1999                
month    October             
day      07                  
language R                   

and

version:
platform sparc-sun-solaris2.7        
arch     sparc                       
os       solaris2.7                  
system   sparc, solaris2.7           
status   Under development (unstable)
major    0                           
minor    90.0                        
year     1999                        
month    October                     
day      23                          
language R                           



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Adrian.Trapletti@wu-wien.ac.at  Tue Oct 26 10:27:52 1999
From: Adrian.Trapletti@wu-wien.ac.at (Adrian Trapletti)
Date: Tue, 26 Oct 1999 09:27:52 +0000
Subject: [Fwd: [R] GARCH models available]
Message-ID: <38157418.CBA980F7@wu-wien.ac.at>

This is a multi-part message in MIME format.
--------------D2161430B449144163620941
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit




--------------D2161430B449144163620941
Content-Type: message/rfc822
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

X-Mozilla-Status2: 00000000
Message-ID: <38157347.F2F6333E@wu-wien.ac.at>
Date: Tue, 26 Oct 1999 09:24:23 +0000
From: Adrian Trapletti <Adrian.Trapletti@wu-wien.ac.at>
X-Mailer: Mozilla 4.5 [en] (X11; I; Linux 2.0.36 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: "Karl M. Syring" <syring@email.com>
Subject: Re: [R] GARCH models available
References: <000101bf1f0b$d7abb900$bfc29e3e@fenris>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

"Karl M. Syring" wrote:

> Adrian,
> could you please use less unixish temporary file name in get.hist.quote(). I
> get some thing like "/tmp/^spc17:54:32" which will fail on Windows because
> /tmp might not exist and because the colon is not an acceptable character in
> file names.

Is that ok if I introduce an additional argument for the directory to save the
temporary file with default /tmp

(..., dir = "/tmp", ...),

and I remove the colon from the file name, e.g. ^spc175432"?

Adrian

--
Adrian Trapletti, Vienna University of Economics and Business
Administration, Augasse 2-6, A-1090 Vienna, Austria
Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
Email: adrian.trapletti@wu-wien.ac.at




--------------D2161430B449144163620941--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Oct 26 14:46:21 1999
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 26 Oct 1999 15:46:21 +0200 (MET DST)
Subject: dodgy list operation (PR#298)
Message-ID: <199910261346.PAA10545@pubhealth.ku.dk>

I can generate a segmentation fault as follows, where I would expect a
syntax error:

fred <- as.list(1:10)
lapply(fred, "[[")

platform   sparc-sun-solaris2.5.1
arch       sparc                 
os         solaris2.5.1          
system     sparc, solaris2.5.1   
status                           
status.rev 0                     
major      0                     
minor      64.1                  
year       1999                  
month      May                   
day        8                     
language   R                     

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 26 15:01:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Oct 1999 16:01:55 +0200
Subject: dodgy list operation (PR#298)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Tue, 26 Oct 1999 15:46:21 +0200 (MET DST)"
References: <199910261346.PAA10545@pubhealth.ku.dk>
Message-ID: <x2ln8q8bl8.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I can generate a segmentation fault as follows, where I would expect a
> syntax error:
> 
> fred <- as.list(1:10)
> lapply(fred, "[[")
> 
...
> status.rev 0                     
> major      0                     
> minor      64.1                  
             ^^^^
Ahem. That bug is certainly not present in 0.65.1 or later:

R> fred <- as.list(1:10)
R> lapply(fred, "[[")
Error in FUN(X[[i]], ...) : no index specified

> year       1999                  
> month      May                   
> day        8                     
> language   R                     


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Oct 26 16:14:07 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 26 Oct 1999 16:14:07 +0100 (BST)
Subject: Your Message Sent on Fri, 22 Oct 1999 13:19:12 -0700
Message-ID: <199910261514.QAA28411@toucan.stats.ox.ac.uk>


> Date: Fri, 22 Oct 1999 13:19:12 -0700
> To: r-devel@stat.math.ethz.ch
> From: Eli Ateljevich <eli@ce.berkeley.edu>
> 
> Hi.
> I love R. I have had two compatibility issues in shifting my code over from
> Splus
> 
> cts,rts, its:    are there any plans to incorporate these classes?

No. R is not S-PLUS, and is `not unlike S'. Those are S-PLUS proprietary
extensions to S.  Given how little depends on them, I suggest you
look hard at the R `ts' class (which S does not have) as it does
much of what rts does in S-PLUS.

> regexpr: R does not seem to have any regular expression matching function,
> although that capability seems like it would be fairly simple to add for
> someone who knew what they were doing, since the internal code is already
> there and someone would just have to write a wrapper. If someone explained
> the steps to adding an internal function I would give it a shot.

It does have sub and gsub that will do a lot of what you want, but I do
plan to add a version of regexpr fairly soon, as I miss it too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct 26 18:57:17 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 26 Oct 1999 19:57:17 +0200 (MET DST)
Subject: Wrong text() adjustment with (math)expression and "\n" (PR#299)
Message-ID: <199910261757.TAA12834@pubhealth.ku.dk>

This is adapted from  partha_bagchi@hgsi.com 's report on R-help:

     plot(0); title(expression("Bad\n with much much more text")))

gives something like 

      Bad
          with much much more text

(``newline w/o carriage return'') instead of centering both lines such as

               Bad
     with much much more text

which is produced by (just dropping `expression' from the above)

      plot(0); title(("Bad\n with much much more text"))

By the way, the following would need even more attention if one insists on 
correct behavior:

plot(0)
title(expression(paste("Still works with math\n", "with", 
                       frac(1,sum(x[i], i==1,n)), " and more text")))

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct 27 10:36:05 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 27 Oct 1999 11:36:05 +0200 (MET DST)
Subject: [R] par(uin)
In-Reply-To: <D5A7D734C9C5D211B9E30008C7892302DEE76B@exdkba03.novo.dk>
References: <D5A7D734C9C5D211B9E30008C7892302DEE76B@exdkba03.novo.dk>
Message-ID: <14358.51077.874153.394381@gargle.gargle.HOWL>

Thank you Bendix, 
{I hope it's okay if I CC my answer to your private mail to R-devel ..}

>>>>> On Wed, 27 Oct 1999 08:55:28 +0200, BXC@novo.dk (Bendix Carstensen) said:

    >> -----Original Message----- 
    >> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
    >>  Sent: 25. oktober 1999 14:58 To:Gregory R. Warnes 
    >> Cc: R-help@stat.math.ethz.ch Subject: Re: [R]

    MM> par(uin)

    Bendix> (deleted)

    MM> BTW: "uin" gives ``inches per usr unit'' (not the reverse as you
    MM> suggest).
    MM> 
    MM> Should `R' provide "uin" (as read-only) par() ?

RFC:  Should we have it? or is it unnecessary featurism ?

    Bendix> Yes, but call it "ipu" if it returns inches per unit!


No, not "ipu" for two reasons:

1) 
   np <- names(par()); np[substring(np,2,3)=="in"]

currently gives

   [1] "cin" "din" "fin" "pin"

   (and S-plus has "uin" additionally)

And all of these give  
    ``<something> in inches''

For "uin" these would be

    ``user units in inches''
which *is* the same as
    ``inches per usr unit'' 

2) S compatibility..

 We don't want 100% S-compatibility in par() treatment,  
 {not repeating problematic behavior},
 but for things like this,  compatibility is an issue.


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bturlach@stats.adelaide.edu.au  Wed Oct 27 12:03:36 1999
From: bturlach@stats.adelaide.edu.au (Berwin Turlach)
Date: Wed, 27 Oct 1999 20:33:36 +0930 (CST)
Subject: Rdefines.h
Message-ID: <14358.56328.738238.339073@amoeba.stats.adelaide.edu.au>

Hi all,

may I request the following two changes to Rdefines.h (R 0.65.1)?

1.) Change line 106 from
        #define Free(p)        R_chk_free( (void *)(p) )
to
        #define Free(p)        R_chk_free( (void *)(p) ) , p=NULL

2.)  Add after line 79:
#define PROBLEM	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,

a new line 80:
#define PROBLEM	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,
#define MESSAGE	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,

The rationale behind both changes is to become more compatible with
S.h from S-PLUS.  

Additionally, I am porting some C code that I developed under S-PLUS
to R and that code has PROBLEM...RECOVER and MESSAGE...WARNING pairs
in it.  So the absence of the MESSAE macro is a small nuisance.

The way Free(p) is currently defined simply leads to R crashing when
the C code is called a second time.  (I am running R on a linux box.)
Below I include a simple .c file that demonstrates the problem and two
sample sessions with R using that code.  Once the code was compiled
with the original Rdefines.h and the other time with the modification
proposed above.

The problem seems to be that I adopted the following style of
programming: (static) global pointers are initialised to NULL and when
free'd they are reset to NULL.  The macro Free() from S-PLUS' S.h
ensures that and the same is done by the macro of Free() that I use if
the C code is not compiled for use with S-PLUS.  If the code is
compiled for linkage with S-PLUS then I check before I allocate space
to a (static) global pointer whether it is NULL.  If not, then I
assume that the C code was called earlier but that the calculations
have been interrupted, say, by the user hitting contol-c.  In that
case, I give a warning that there may be a memory leak, free the
memory to which the pointer points and allocate the memory needed for
this call to C.  Since Free() from Rdefines.h does not reset the
pointer to NULL, the test whether the pointer is NULL fails when the C
code is called the second time and the ensuing call to free() leads to
R crashing.

I am aware that the question how to handle dynamic memory allocation
in code dynamically liked to S-PLUS (and R?) is a bit controversial.
And the programming style just described makes some obvious assumption
about the behaviour of (static) global pointers in dynamically linked
code between calls to that code.  I had no problems with this strategy
with S-PLUS on Solaris and SunOS4.1.x or R on linux (after changing
Rdefines.h).  And from what I read on the s-news are r-* mailing list,
it seems as if it would work on other platforms too.  Or is anybody
aware of a platform on which this strategy might fail?

Cheers,

        Berwin

==================== test.c =========================
=== compiled via:  R SHLIB test.c ===================
#define S_Plus

#if defined(S_Plus)
#include <S.h>
#if defined(SPLUS_VERSION) && SPLUS_VERSION >= 4000
#  include <newredef.h>
#endif
#endif

static longint *p=NULL;

void BT_demo(longint n){

#if defined(S_Plus)
  if( p != NULL ){
    PROBLEM "Possible memory corruption or memory leak.\n  We"
      "advise to restart your S+ session"  WARNING(NULL_ENTRY); 
     Free(p);
  }
#endif
  p = Calloc(n,longint);
  if (p == NULL){
    PROBLEM "Could not allocate memory" ERROR;
  }
  printf("Everything fine\n");
  Free(p);
}

=============== Compiled with original Rdefines.h ==========
R : Copyright 1999, The R Development Core Team
Version 0.65.1 Release (October 07, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type	"?contributors" for a list.

Type	"demo()" for some demos, "help()" for on-line help, or
    	"help.start()" for a HTML browser interface to help.
Type	"q()" to quit R.

> dyn.load("test.so")
> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> .C("BT_demo",5)

Process R segmentation fault (core dumped) at Wed Oct 27 17:42:05 1999


=============== Compiled with modified Rdefines.h ==========
R : Copyright 1999, The R Development Core Team
Version 0.65.1 Release (October 07, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type	"?contributors" for a list.

Type	"demo()" for some demos, "help()" for on-line help, or
    	"help.start()" for a HTML browser interface to help.
Type	"q()" to quit R.

> dyn.load("test.so")
> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> q()
Save workspace image? [y/n/c]: n

Process R finished at Wed Oct 27 17:43:17 1999

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sret1@cam.ac.uk  Wed Oct 27 17:31:03 1999
From: sret1@cam.ac.uk (sret1@cam.ac.uk)
Date: Wed, 27 Oct 1999 18:31:03 +0200 (MET DST)
Subject: Plotting bug in R (PR#300)
Message-ID: <199910271631.SAA22902@pubhealth.ku.dk>

** Symptom:

  plot(1:1000,1:1000,xlim=c(10,11),type="l")

makes a plot with lots of (nearly) horizontal lines, not just the intended
one from (10,10) to (11,11). So do lots of similar commands where the xlim
or ylim is much shorter than the range of the data.

** R version:
           _                 
platform   i686-unknown-linux
arch       i686              
os         linux             
system     i686, linux       
status     in progress       
status.rev 0                 
major      0                 
minor      62.5              
year       1998              
month      November          
day        2                 
language   R                 

** OS:

Debian Linux 2.1, Linux kernel 2.0.36.

Thanks.

-- 
Stephen Turner    sret1@cam.ac.uk    http://www.statslab.cam.ac.uk/~sret1/
  Statistical Laboratory, 16 Mill Lane, Cambridge CB2 1SB, England
  "Due to the conflict in Kosovo, we will not be showing the movie Wag the
   Dog. Instead, we will show Mortal Kombat: Annihilation." Cable & Wireless


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 27 17:47:16 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Oct 1999 18:47:16 +0200
Subject: Plotting bug in R (PR#300)
In-Reply-To: sret1@cam.ac.uk's message of "Wed, 27 Oct 1999 18:31:03 +0200 (MET DST)"
References: <199910271631.SAA22902@pubhealth.ku.dk>
Message-ID: <x24sfcsqcr.fsf@blueberry.kubism.ku.dk>

sret1@cam.ac.uk writes:

> ** Symptom:
> 
>   plot(1:1000,1:1000,xlim=c(10,11),type="l")
> 
> makes a plot with lots of (nearly) horizontal lines, not just the intended
> one from (10,10) to (11,11). So do lots of similar commands where the xlim
> or ylim is much shorter than the range of the data.
> 
> ** R version:

> status     in progress       
> status.rev 0                 
> major      0                 
> minor      62.5              
> year       1998              
> month      November          
> day        2                 

I.e. in an unreleased version, nearly a full year old...

Doesn't happen nowadays.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Oct 27 18:14:26 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 27 Oct 1999 12:14:26 -0500
Subject: Plotting bug in R (PR#300)
In-Reply-To: Peter Dalgaard BSA's message of "27 Oct 1999 18:47:16 +0200"
References: <199910271631.SAA22902@pubhealth.ku.dk> <x24sfcsqcr.fsf@blueberry.kubism.ku.dk>
Message-ID: <6rg0yw7mkt.fsf@franz.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> sret1@cam.ac.uk writes:
> 
> > ** Symptom:
> > 
> >   plot(1:1000,1:1000,xlim=c(10,11),type="l")
> > 
> > makes a plot with lots of (nearly) horizontal lines, not just the intended
> > one from (10,10) to (11,11). So do lots of similar commands where the xlim
> > or ylim is much shorter than the range of the data.
> > 
> > ** R version:
> 
> > status     in progress       
> > status.rev 0                 
> > major      0                 
> > minor      62.5              
> > year       1998              
> > month      November          
> > day        2                 
> 
> I.e. in an unreleased version, nearly a full year old...

There is an r-base_0.65.1 package for Debian Linux 2.1 on the CRAN
(Comprehensive R Archive Network) sites.  See, for example,
	  http://www.ci.tuwien.ac.at/R/bin/linux/debian/2.1/

Because the update.packages and install.packages functions are
available in this latest version of R, we no longer provide Debian
packages of the contributed packages on CRAN.  You can simply set the
option "CRAN" to the URL of a CRAN archive near you and use these
functions to install or update R packages.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gilb@home.com  Wed Oct 27 21:52:38 1999
From: gilb@home.com (Paul Gilbert)
Date: Wed, 27 Oct 1999 16:52:38 -0400
Subject: install.packages() update.packages()
Message-ID: <38176616.4B959498@home.com>

WOW neat! but...

1/ I tried install.packages("tseries", lib) on a machine which didn't
have a fortran compiler and I happened to notice the error message fly
by, but  install.packages() mostly gave the appearance that everything
suceeded, and the library was available. Is there a way to give a more
obvious report (maybe even remove the library) in the event of failure.
(It does work great on my other  machine with g77.)

2/ Wishlist: Could lib have a default like R_HOME/library (if I own it)
and otherwise something like  ~/Rlibs?

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From qed@ornl.gov  Thu Oct 28 13:19:44 1999
From: qed@ornl.gov (Dennis Wolf)
Date: Thu, 28 Oct 1999 08:19:44 -0400
Subject: Creating gif files using R
Message-ID: <38183F60.79CCD7E7@ornl.gov>

Greetings,
    I am a new user of R but a long time fan of S (Splus) and have
installed R version 0.65.1 on a
Windows NT machine. I would like to save plots as gif files and have
been using savePlot()
with some success. I found that savePlot would not work without
modification, namely
decrementing the device by 1 before calling the internal routine that
does the conversion. Once
that change was made it worked as advertised. I am wondering now whether
I could generate
the gif files in a batch job. I am wanting to do a web-based analysis
that includes a call to
R which would return a gif file for display in a browser. Is this
possible directly with R?

Thanks in advance for any help,
Dennis

--
Dennis A. Wolf
Oak Ridge National Laboratory
POB 2008, Building 6011, MS 6418
Oak Ridge, TN  37831-6418

ph: (423) 574-6326
email: qed@ornl.gov



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Oct 28 13:32:37 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 28 Oct 1999 13:32:37 +0100 (BST)
Subject: Creating gif files using R
Message-ID: <199910281232.NAA16471@toucan.stats.ox.ac.uk>


> Date: Thu, 28 Oct 1999 08:19:44 -0400
> From: Dennis Wolf <qed@ornl.gov>
> To: r-devel@stat.math.ethz.ch
> Subject: Creating gif files using R
> 
> Greetings,
>     I am a new user of R but a long time fan of S (Splus) and have
> installed R version 0.65.1 on a
> Windows NT machine. I would like to save plots as gif files and have
> been using savePlot()
> with some success. I found that savePlot would not work without
> modification, namely
> decrementing the device by 1 before calling the internal routine that
> does the conversion. 

I will look into this. It did work as advertised when it was released,
but something may have changed en route to rw0651 (for example
a correction may have got lost).

> Once
> that change was made it worked as advertised. I am wondering now whether
> I could generate
> the gif files in a batch job. 

You can call the windows() device and then savePlot() from a batch job.

> I am wanting to do a web-based analysis
> that includes a call to
> R which would return a gif file for display in a browser. Is this
> possible directly with R?

>From NEWS for 0.65.1:

    o   Experimental function dev2bitmap() to copy to a bitmap graphics format.

It won't do gif unless your version of ghostscript will, but it will do
png and jpeg.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Thu Oct 28 14:40:47 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Thu, 28 Oct 1999 14:40:47 +0100
Subject: Creating gif files using R
In-Reply-To: <38183F60.79CCD7E7@ornl.gov>; from Dennis Wolf on Thu, Oct 28, 1999 at 08:19:44AM -0400
References: <38183F60.79CCD7E7@ornl.gov>
Message-ID: <19991028144047.63671@hal.stat.unipd.it>

On Thu, Oct 28, 1999 at 08:19:44AM -0400, Dennis Wolf wrote:
> Greetings,
>     I am a new user of R but a long time fan of S (Splus) and have
> installed R version 0.65.1 on a
> Windows NT machine. I would like to save plots as gif files and have
> been using savePlot()
> with some success. I found that savePlot would not work without
> modification, namely
> decrementing the device by 1 before calling the internal routine that
> does the conversion. Once
> that change was made it worked as advertised. I am wondering now whether
> I could generate
> the gif files in a batch job. I am wanting to do a web-based analysis
> that includes a call to
> R which would return a gif file for display in a browser. Is this
> possible directly with R?
> 


  savePlot + Rterm should do the work. 
  However, we will probably withdraw support to direct generation
  of gif to avoid some legal problems. Hence, give a try
  also to 'dev2bitmap' (which however require ghostscript installed).

  guido 

  
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 28 15:33:40 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Oct 1999 16:33:40 +0200
Subject: Wrong text() adjustment with (math)expression and "\n" (PR#299)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 26 Oct 1999 19:57:17 +0200 (MET DST)"
References: <199910261757.TAA12834@pubhealth.ku.dk>
Message-ID: <x2n1t35zcr.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> This is adapted from  partha_bagchi@hgsi.com 's report on R-help:
> 
>      plot(0); title(expression("Bad\n with much much more text")))
> 
> gives something like 
> 
>       Bad
>           with much much more text
> 
> (``newline w/o carriage return'') instead of centering both lines such as
> 
>                Bad
>      with much much more text
> 
> which is produced by (just dropping `expression' from the above)
> 
>       plot(0); title(("Bad\n with much much more text"))
> 
> By the way, the following would need even more attention if one insists on 
> correct behavior:
> 
> plot(0)
> title(expression(paste("Still works with math\n", "with", 
>                        frac(1,sum(x[i], i==1,n)), " and more text")))

I'm not sure I'm buying that this is a bug. To see what is really
going on try something like:

 plot(0);title(expression(mu*"a\nbc"*eta*"ab\nc"*xi))

what happens is that the strings get set *individually* as multiline
text with (left,bottom) adjustment. If you look closer, Martin's
example really gives

      Bad
      with much much more text

We could relatively easily make the adjustment (center,center) I think,
but that isn't very useful, and Partha was expecting the whole thing to
continue on a new line. I think that is rather difficult to achieve
because the relation between the expression as text and as a parse
tree is not linear and things mean different things in different
positions (consider "a\nb"+"a\nb"^"a\nb"). To actually have a formula
title split over several lines, I'd suggest fiddling with mtext().


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Oct 28 17:23:06 1999
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Thu, 28 Oct 1999 18:23:06 +0200 (MET DST)
Subject: expand.grid() (PR#301)
Message-ID: <199910281623.SAA03652@pubhealth.ku.dk>

This is a very minor point and I hesitate to call it a bug, but might I
suggest modifying the nargs=1 return statement in expand.grid() from

    if (nargs == 1)
      return(args[[1]])        

to 

    if (nargs == 1)
      return(data.frame(args))

so that the result of expand.grid is always a data frame (as indicated in
the help file).  This also preserves the variable name if it exists.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Oct 29 15:45:34 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 29 Oct 1999 16:45:34 +0200 (MET DST)
Subject: expand.grid() (PR#301)
Message-ID: <199910291445.QAA13256@pubhealth.ku.dk>

>>>>> "JonR" == J C Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> This is a very minor point and I hesitate to call it a bug, but
    JonR> might I suggest modifying the nargs=1 return statement in
    JonR> expand.grid() from

    JonR>     if (nargs == 1) return(args[[1]])

    JonR> to

    JonR>     if (nargs == 1) return(data.frame(args))

    JonR> so that the result of expand.grid is always a data frame (as
    JonR> indicated in the help file).  This also preserves the variable
    JonR> name if it exists.

Well, that is not quite true,

      expand.grid(NULL)  

gives NULL  without your change 
but gives an error with your change...
since
	data.frame(NULL)  
fails.

The following (only this one of all 4 possibilities  as/no-as  x NULL/list() )
would work

> as.data.frame(list())
NULL data frame with 0 rows

---
Better patch ? (and what does S do ?)

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 29 16:38:30 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 29 Oct 1999 16:38:30 +0100 (BST)
Subject: expand.grid() (PR#301)
In-Reply-To: <199910291445.QAA13256@pubhealth.ku.dk>
Message-ID: <Pine.GSO.3.96.991029162251.1534F-100000@laplace>

On Fri, 29 Oct 1999 maechler@stat.math.ethz.ch wrote:

> Well, that is not quite true,
> 
>       expand.grid(NULL)  
> 
> gives NULL  without your change 
> but gives an error with your change...
> since
> 	data.frame(NULL)  
> fails.
> 
> The following (only this one of all 4 possibilities  as/no-as  x NULL/list() )
> would work
> 
> > as.data.frame(list())
> NULL data frame with 0 rows
> 
> ---
> Better patch ? (and what does S do ?)

Hmm ... Splus returns a data frame for a single variables or for a NULL
variable, the latter looking a bit strange:

> expand.grid(factor(c("L", "H")))
  Var1 
1    L
2    H
> expand.grid(NULL)                   
  Var1 
1   NA
0   NA

I think your patch is a good one.  So you would suggest

	if (nargs == 1)
	  return(if (is.null(args[[1]])) as.data.frame(list()) else
	    data.frame(args))

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thoffman@zappa.sax.de  Sat Oct 30 12:33:04 1999
From: thoffman@zappa.sax.de (thoffman@zappa.sax.de)
Date: Sat, 30 Oct 1999 13:33:04 +0200 (MET DST)
Subject: modreg buggy: uninitialized variable in sinerp.f (PR#302)
Message-ID: <199910301133.NAA16105@pubhealth.ku.dk>

I had some strange problems with modreg: sometimes functions
hang in an infinite loop, consuming 100% CPU time. Especially
when update()ing models (as in example(ppr)) with sm.method="gcv"
I found that if I repeated the call after I did interrupt the hang,
it ran to completion.

After some lengthy debugging I could track down this problem:

sinerp.f, line 22--24 read:

      wjm3(1)=0d0
      wjm3(2)=0d0
      wjm3(1)=0d0

This leaves wjm3(3) uninitialized. So after changing these lines to

      wjm3(1)=0d0
      wjm3(2)=0d0
      wjm3(3)=0d0

the bug was gone.

Thomas Hoffmann.

--please do not edit the information below--

Version:
 platform = i386-pc-os2_emx
 arch = i386
 os = os2_emx
 system = i386, os2_emx
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Oct 30 19:00:05 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 30 Oct 1999 19:00:05 +0100 (BST)
Subject: modreg buggy: uninitialized variable in sinerp.f (PR#302)
In-Reply-To: <199910301133.NAA16105@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9910301855240.11052-100000@auk.stats>

On Sat, 30 Oct 1999 thoffman@zappa.sax.de wrote:

> I had some strange problems with modreg: sometimes functions
> hang in an infinite loop, consuming 100% CPU time. Especially
> when update()ing models (as in example(ppr)) with sm.method="gcv"
> I found that if I repeated the call after I did interrupt the hang,
> it ran to completion.
> 
> After some lengthy debugging I could track down this problem:
> 
> sinerp.f, line 22--24 read:
> 
>       wjm3(1)=0d0
>       wjm3(2)=0d0
>       wjm3(1)=0d0
> 
> This leaves wjm3(3) uninitialized. So after changing these lines to
> 
>       wjm3(1)=0d0
>       wjm3(2)=0d0
>       wjm3(3)=0d0
> 
> the bug was gone.

Thank you very much!  We were aware of occasional problems (but only on
gcc), but had not managed to track them down. In all cases using
-ffloat-store had solved the problem.

I have committed this change for the next release.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Sun Oct 31 00:29:06 1999
From: ntakebay@bio.indiana.edu (ntakebay@bio.indiana.edu)
Date: Sun, 31 Oct 1999 01:29:06 +0200 (MET DST)
Subject: read.table problem on Linux/Alpha (seg faults caused by isspace(R_EOF)) (PR#303)
Message-ID: <199910302329.BAA17382@pubhealth.ku.dk>

Full_Name: Naoki Takebayashi
Version: 0.65.1
OS: Linux/Alpha
Submission from: (NULL) (129.79.224.171)


When I was reading a file with read.table("junk.data"), it seg-faulted.
I found out that it seg-faulted when the last line of data file didn't
have the newline char.  For example, file like this:

23	3
31	2
24	1<EOF>


Here is a fix.

--- R-0.65.1/src/main/scan.c.orig       Wed Sep 29 11:11:45 1999
+++ R-0.65.1/src/main/scan.c    Fri Oct 29 17:34:22 1999
@@ -124,7 +124,7 @@
                if (bufp >= &buffer[MAXELTSIZE - 2])
                    continue;
                *bufp++ = c;
-           } while (!isspace(c = scanchar()) && c != R_EOF);
+           } while ((c = scanchar()) != R_EOF && !isspace(c));
            while (c==' ' || c=='\t')
                c=scanchar();
            if (c=='\n' || c=='\r' || c==R_EOF)
@@ -647,7 +647,7 @@
                }
            }
            else {
-               while (!isspace(c=scanchar()) && c != R_EOF)
+               while ( (c=scanchar()) != R_EOF && !isspace(c))
                    ;
                if (c==R_EOF) c='\n';
                unscanchar(c);



When the scanchar() returns R_EOF (=65535 #defined in src/include/Defn.h),
isspace(R_EOF) seq-faults.  By switching the order of two conditions, I could
get around with it.  I just made a test to see the behavior of isspace() by
giving
isspace(65535).  It seg-faults in both Linux/alpha and i386 (is it supposed
to??).
However, R on i386 doesn't seg-faults when the last line does not have newline.

Naoki


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Oct 31 12:30:01 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Oct 1999 13:30:01 +0100
Subject: read.table problem on Linux/Alpha (seg faults caused by isspace(R_EOF)) (PR#303)
In-Reply-To: ntakebay@bio.indiana.edu's message of "Sun, 31 Oct 1999 01:29:06 +0200 (MET DST)"
References: <199910302329.BAA17382@pubhealth.ku.dk>
Message-ID: <x24sf7lnli.fsf@blueberry.kubism.ku.dk>

ntakebay@bio.indiana.edu writes:

> Here is a fix.
> 
> --- R-0.65.1/src/main/scan.c.orig       Wed Sep 29 11:11:45 1999
> +++ R-0.65.1/src/main/scan.c    Fri Oct 29 17:34:22 1999
> @@ -124,7 +124,7 @@
>                 if (bufp >= &buffer[MAXELTSIZE - 2])
>                     continue;
>                 *bufp++ = c;
> -           } while (!isspace(c = scanchar()) && c != R_EOF);
> +           } while ((c = scanchar()) != R_EOF && !isspace(c));
....
> When the scanchar() returns R_EOF (=65535 #defined in src/include/Defn.h),
> isspace(R_EOF) seq-faults.  By switching the order of two conditions, I could
> get around with it.  I just made a test to see the behavior of isspace() by
> giving
> isspace(65535).  It seg-faults in both Linux/alpha and i386 (is it supposed
> to??).
> However, R on i386 doesn't seg-faults when the last line does not have newline.

Thanks. However, perhaps a better fix would be to change R_EOF? All
the isxxx macros/functions work by indexing an array designed to take
values between -128 and +255, so passing 65535 is playing with fire,
and we have many more instances littered all over the code, where I
don't feel absolutely sure that R_EOF couldn't sneak in.

Any one remember why R_EOF is different from the customary EOF of -1??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 31 16:36:33 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 31 Oct 1999 16:36:33 +0000 (GMT)
Subject: diag
Message-ID: <Pine.GSO.4.05.9910311620090.12623-100000@auk.stats>

A change to diag() between 0.65.0 and 0.65.1 which seems undocumented in
the logs (apparently revision 1.3.2.1, `diag names') introduced

    if (is.array(x)) 
        stop("first argument is array, but not matrix.")

which has broken the code in rpart. This looks wrong to me, as diag used to
cope happily with a single-dimensional array. Such things occur quite
often as the output from table().

Is there any reason not to make this

    if (length(dim(x)) > 2)

which seems the intention?  Martin (if I have decoded the cvs diffs
correctly)?

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Sun Oct 31 17:12:38 1999
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Sun, 31 Oct 1999 12:12:38 -0500
Subject: diag
In-Reply-To: <Pine.GSO.4.05.9910311620090.12623-100000@auk.stats>; from Prof Brian D Ripley on Sun, Oct 31, 1999 at 04:36:33PM +0000
References: <Pine.GSO.4.05.9910311620090.12623-100000@auk.stats>
Message-ID: <19991031121238.A10461@jimmy.harvard.edu>

On Sun, Oct 31, 1999 at 04:36:33PM +0000, Prof Brian D Ripley wrote:
> A change to diag() between 0.65.0 and 0.65.1 which seems undocumented in
> the logs (apparently revision 1.3.2.1, `diag names') introduced
> 
>     if (is.array(x)) 
>         stop("first argument is array, but not matrix.")
> 
> which has broken the code in rpart. This looks wrong to me, as diag used to
> cope happily with a single-dimensional array. Such things occur quite
> often as the output from table().
> 
> Is there any reason not to make this
> 
>     if (length(dim(x)) > 2)
> 
> which seems the intention?  Martin (if I have decoded the cvs diffs
> correctly)?
> 
  I think it was me. I think that this is fine (the old version
complained about matrices at this point and they should be allowed).
  It was a bug report off of R-help but I can't recall who...
robert
-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              voice: (617) 632-5045                     |
| Senior Lecturer               fax:   (617) 632-2444                     |
| University of Auckland	email1: rgentlem@jimmy.harvard.edu        |
| on leave at:                                                            |
| Dana-Farber Cancer Institute  email2: rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Sun Oct 31 23:20:56 1999
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Mon, 1 Nov 1999 00:20:56 +0100 (MET)
Subject: bugs in scan() (PR#304)
Message-ID: <199910312320.AAA20291@pubhealth.ku.dk>

System: Sun Solaris 2.5.1

There seem to be at least 2 bugs associated with the use of flush=T in
the scan function.

1) If flush=T is used, scan() will only ask for 1 line from standard input.
Repeat by:
>  R

R : Copyright 1999, The R Development Core Team
Version 0.65.1 Release (October 07, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> scan(what=list(c1=0,c2=0,c3=0), flush=T)
1: 1 2 3 4
Read 1 lines
$c1
[1] 1

$c2
[1] 2

$c3
[1] 3

> 
1a) If the 'correct' number of fields are supplied, then two lines are
read, but only 1 is 'registered':
> scan( what=list(c1=0,c2=0,c3=0),flush=T)
1: 1 2 3
1: 4 5 6
Read 1 lines
$c1
[1] 1

$c2
[1] 2

$c3
[1] 3

> 

2) When reading from a file, the first line is processed correctly, but
the second and subsequent lines do not have the extraneous data flushed
correctly.  Repeat by:
> write(t(matrix(1:15, ncol=5, byrow=T)), "tmp")
> system("cat tmp")
1 2 3 4 5
6 7 8 9 10
11 12 13 14 15
> scan("tmp", what=list(c1=0,c2=0,c3=0), flush=T)
Read 4 lines
$c1
[1]  1  6 10  3

$c2
[1]  2  7 11 14

$c3
[1]  3  8 12 15

Warning message:
line 3 did not have 3 elements
> 
Notice that on lines 2 and 3 the first character of the "flushable
data" (after the field separator) does get flushed, but then scanning
continues.  Pehaps an end-of-line indication is not reset?

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lopi8954@moscowoffice.com  Thu Oct  7 03:37:26 1999
From: lopi8954@moscowoffice.com (lopi8954@moscowoffice.com)
Date: Wed, 06 Oct 1999 22:37:26 -0400
Subject: [Rd] Win a Palm Pilot for visiting our website!!!!                         24621
Message-ID: <00004b363164$00004b9f$0000602d@mail2.wuzzlenorple.com>

<html>

<body>


<p align=3D"center"><a href=3D"http://dis39887.checkchange100.com/palm1.ht=
m"><img border=3D"0" src=3D"http://pic3847.checkchange100.com/images/palm_=
ad4.gif" width=3D"197" height=3D"153"></a></p>


</body>

</html>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark7853@flashmail.com  Mon Oct 11 10:55:18 1999
From: mark7853@flashmail.com (mark7853@flashmail.com)
Date: Mon, 11 Oct 1999 05:55:18 -0400
Subject: [Rd] Win a Palm Pilot!!                         26606
Message-ID: <0000384f0ff0$00004d5a$000067ee@mail3.wuzzlenorple.com>

<html>

<body>


<p align=3D"center"><a href=3D"http://dis39887.checkchange100.com/palm1.ht=
m"><img border=3D"0" src=3D"http://pic3847.checkchange100.com/images/palm_=
ad4.gif" width=3D"197" height=3D"153"></a></p>


</body>

</html>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From daan6354@acmemail.net  Sat Oct 16 07:57:24 1999
From: daan6354@acmemail.net (daan6354@acmemail.net)
Date: Sat, 16 Oct 1999 02:57:24 -0400
Subject: [Rd] Win a Palm Pilot!!!                         26204
Message-ID: <00003edf5660$0000030d$0000665c@mail3.wuzzlenorple.com>

<html>

<body>


<p align=3D"center"><a href=3D"http://dis29jfndin.beebeatwo.com/palm1.htm"=
><img border=3D"0" src=3D"http://fdfn32ie9j.beebeatwo.com/images/palm_ad4.=
gif" width=3D"197" height=3D"153"></a></p>


</body>

</html>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Oct  2 19:13:13 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Oct 1999 20:13:13 +0200
Subject: Macro-like for-loops
Message-ID: <x2d7uxr5qe.fsf@blueberry.kubism.ku.dk>


>From the silly-tricks department:

"foreach" <-
function (...) 
{
    Args <- match.call()[-1]
    N <- length(Args)
    Body <- Args[[N]]
    Args <- Args[-N]
    Tags <- names(Args)
    Lists <- lapply(Args, function(a) as.list(a)[-1])
    Lengths <- sapply(Lists, length)
    for ( i in 1:max(Lengths))
    {
        ix <- (i - 1) %% Lengths + 1
        l <- lapply(seq(along=ix), function(j) Lists[[j]][[ix[j]]])
        names(l) <- Tags
        bb <- eval(substitute(substitute(body,l),list(body=Body)))
        eval(bb,parent.frame())
    }
}

huey<-rnorm(50); dewey<-rnorm(50); louie<-rnorm(50)
par(mfcol=c(3,1))

foreach(x=list(huey,dewey,louie), hist(x))

Notice that in contrast to an ordinary for-loop, this kind of loop
automatically gets the titles right on the plots. It is a purely
lexical substitution, equivalent to

hist(huey) ; hist(dewey) ; hist(louie)

In this case, you save -4 keypresses..., but one can easily imagine
the usefulness for eliminating cut+paste errors in more complicated
cases. 

As written, it is possible to have several list-arguments which are
treated in parallel, recycled to the length of the longest one (as it
was possible to do in good ol' Genstat).

One potential drawback is that (as written, anyway) the function is
playing a bit too many tricks with its arguments. It actually takes
the list expression apart to get at the list of variable names. It
wouldn't work to put an actual list in there, i.e.

l <- list(huey,dewey,louie)
foreach(x=l, hist(x))

cannot work. It obviously never could, because l does not contain the
variable names, but it might be desirable to have some alternate
syntax that worked with stored namelist.

Would it be useful to put something like this in forthcoming versions
of R?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Oct  4 11:59:44 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 4 Oct 1999 11:59:44 +0100 (BST)
Subject: bitmap copies of plots
Message-ID: <199910041059.LAA01871@toucan.stats.ox.ac.uk>

Michael Lapsley was suggesting on R-help direct copies to gif/png/jpeg.

The following seems to do a sensible job for me of copying the current
device to any bitmap format supported by gs. The manipulation is needed
to work around assumptions made by postscript(), and I think better fixed
in postscript() (but not a couple of days before a release).

I want to make onefile=FALSE work on postscript() (it needs to start
a file for each page, and give it a EPSF-3.0 header), and to allow
user-specified paper sizes and the option of not centring on the page.

Oh, and I do know it is gswin32c on Windows: that is easy to incorporate
but I have not tested it.

One could attempt to retrieve height and width from the current device,
but I don't see that information is presently available from R code.

Any comments?


dev2bitmap <- function(file, type="png256", height=6, width=6, res=72,
                      pointsize, ...)
{
    rc <- system("gs -help > /dev/null")
    if(rc != 0) stop("Sorry, gs cannot be found")
    gs <- system("gs -help", intern=TRUE)
    st <- grep("^Available", gs)
    en <- grep("^Search", gs)
    gs <- gs[(st+1):(en-1)]
    devs <- c(strsplit(gs, " "), recursive=T)
    if(match(type, devs, 0) == 0)
        stop(paste(paste("Device ", type, "is not available"),
                   "Available devices are",
                   paste(gs, collapse="\n"), sep="\n"))
    if(missing(pointsize)) pointsize <- 1.5*min(width, height)
    tmp <- tempfile("Rbit")
    on.exit(unlink(tmp))
    dev.print(device=postscript, file=tmp, width=width,
              height=height, pointsize=pointsize, horizontal=F, ...)
    psfile <- scan(tmp, what="", sep="\n", quiet=TRUE)
    bb <- strsplit(psfile[9], " ")[[1]]
    ep <- grep("^%%EndProlog", psfile)
    unlink(tmp)
    tmp2 <- tempfile("Rbit")
    on.exit(unlink(tmp2))
    cat(psfile[1:ep], file=tmp2, sep="\n")
    cat(paste("-",bb[2], " -", bb[3], " translate\n", sep=""),
        file=tmp2, append=TRUE)
    cat(psfile[(ep+1):length(psfile)], file=tmp2, sep="\n", append=TRUE)
    cmd <- paste("gs -dNOPAUSE -dBATCH -q -sDEVICE=", type,
                 " -r", res,
                 " -g", ceiling(res*width), "x", ceiling(res*height),
                 " -sOutputFile=", file, " ", tmp2, sep="")
    system(cmd)
    invisible()
}

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Mon Oct  4 16:41:12 1999
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Mon, 04 Oct 1999 17:41:12 +0200
Subject: New Version of R Server
References: <199910041422.PAA05564@toucan.stats.ox.ac.uk>
Message-ID: <37F8CA98.89048D8E@univie.ac.at>



Prof Brian Ripley wrote:
> 
> Yes, we need one. I am having problems with Erich's latest add-in:
> it works about every other time, I think because is has some memory of the
> previous one. I don't think Excel 2000 removes add-ins cleanly.
> 

brian, we had a stress test of the addin yesterday
election ight forecast, the systen was running about 8 hours
without any problems.

win95+excel97

i have to start testing in excel2000 now.
i dod some very simple first tetst, and so far,
no problems.

uninstalling might be a a problem.
a relatively secure way of uninstalling found is:
first delete the xla file, with excel NOT running.
then start excel, it will complain about the missing addin.
then go to teh addin menu,
and click on the missing but still displayed
addin.
you will get the choice of completely removing it.

please try this once and tell me if the problems persist.

your excel2000 statments sound rather bad.

erich


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Oct  5 13:21:02 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 5 Oct 1999 14:21:02 +0200
Subject: bitmap copies of plots
In-Reply-To: <199910041059.LAA01871@toucan.stats.ox.ac.uk> (message from Prof
 Brian Ripley on Mon, 4 Oct 1999 11:59:44 +0100 (BST))
References: <199910041059.LAA01871@toucan.stats.ox.ac.uk>
Message-ID: <199910051221.OAA08391@sophie.ethz.ch>

I think your dev2bitmap() is a really neat idea!
Thank you
Further, I didn't know that (newer flavors of) gs  allows for so many 
different output formats
[for the unaware (as I was till now):
     gs --help
		 (1997 Aladdin Ghostscript 5.1)
 gives 69 devices (not all useful for dev2bitmap), 
 such as jpeg, tiff, png, pbm, pgm, pcx,...
]	
 
I think something like it should make it into the distribution
(shall I quickly write docu for it, saying it is somewhat experimental,
 even for 0.65.1 ?)

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct  5 13:56:50 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 5 Oct 1999 13:56:50 +0100 (BST)
Subject: bitmap copies of plots
In-Reply-To: <199910051221.OAA08391@sophie.ethz.ch>
Message-ID: <Pine.GSO.4.05.9910051352510.25038-100000@auk.stats>

On Tue, 5 Oct 1999, Martin Maechler wrote:

> I think your dev2bitmap() is a really neat idea!
> Thank you
> Further, I didn't know that (newer flavors of) gs  allows for so many 
> different output formats
> [for the unaware (as I was till now):
>      gs --help
> 		 (1997 Aladdin Ghostscript 5.1)
>  gives 69 devices (not all useful for dev2bitmap), 
>  such as jpeg, tiff, png, pbm, pgm, pcx,...

(5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is in test)

> ]	
>  
> I think something like it should make it into the distribution
> (shall I quickly write docu for it, saying it is somewhat experimental,
>  even for 0.65.1 ?)

I am going to put the postscript patches I need in for 0.65.1 today: I can
then put a cleaned up version in the distribution.

Basically, the pending changes make onefile actually do something, and a
`special' paper size allows arbitrary paper sizes (and no special borders).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  5 14:07:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Oct 1999 15:07:55 +0200
Subject: bitmap copies of plots
In-Reply-To: Prof Brian D Ripley's message of "Tue, 5 Oct 1999 13:56:50 +0100 (BST)"
References: <Pine.GSO.4.05.9910051352510.25038-100000@auk.stats>
Message-ID: <x27ll2t0pg.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:


> > 		 (1997 Aladdin Ghostscript 5.1)
> >  gives 69 devices (not all useful for dev2bitmap), 
> >  such as jpeg, tiff, png, pbm, pgm, pcx,...
> 
> (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is in test)

...but 5.10 is the one that still ships with RedHat (newer ones are
not GPL yet, I presume). Installed 6.1 yesterday, so I should know.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct  5 14:06:34 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 5 Oct 1999 14:06:34 +0100 (BST)
Subject: bitmap copies of plots
In-Reply-To: <x27ll2t0pg.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9910051403530.25038-100000@auk.stats>

On 5 Oct 1999, Peter Dalgaard BSA wrote:

> Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
> 
> > > 		 (1997 Aladdin Ghostscript 5.1)
> > >  gives 69 devices (not all useful for dev2bitmap), 
> > >  such as jpeg, tiff, png, pbm, pgm, pcx,...
> > 
> > (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is in test)
> 
> ...but 5.10 is the one that still ships with RedHat (newer ones are
> not GPL yet, I presume). Installed 6.1 yesterday, so I should know.

Yes, that is true. But if you want to use gs for PDF or to drive the
current colour inkjets you need something later than 5.10. (Even if
5.10 appears to work on small colour inkjet prints, it crashed on
production jobs here.)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Tue Oct  5 14:58:33 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 05 Oct 1999 06:58:33 -0700
Subject: bitmap copies of plots
In-Reply-To: Prof Brian D Ripley's message of "Tue, 5 Oct 1999 14:06:34 +0100 (BST)"
References: <Pine.GSO.4.05.9910051403530.25038-100000@auk.stats>
Message-ID: <87aepxhpti.fsf@alpha.cfas.washington.edu>



    >> >
    >> > (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is
    >> > in test)
    >>
    >> ...but 5.10 is the one that still ships with RedHat (newer ones
    >> are not GPL yet, I presume). Installed 6.1 yesterday, so I
    >> should know.

There are Debian packages... one of the good reasons to use Debian
:-).

But seriously, alien would import it, or I'm sure someone must have
done a contributed rpm for it?

best,
-tony

-- 
A.J. Rossini			Research Assistant Professor of Biostatistics 
Center for AIDS Research/HMC	Biostatistics/Univ. of Washington
Box 359931			Box 357232
206-731-3647 (3693=fax)		206-543-1044 (3286=fax)
rossini@u.washington.edu	rossini@biostat.washington.edu
http://www.biostat.washington.edu/~rossini/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  5 15:29:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Oct 1999 16:29:55 +0200
Subject: bitmap copies of plots
In-Reply-To: rossini@biostat.washington.edu's message of "05 Oct 1999 06:58:33 -0700"
References: <Pine.GSO.4.05.9910051403530.25038-100000@auk.stats> <87aepxhpti.fsf@alpha.cfas.washington.edu>
Message-ID: <x2yadhswws.fsf@blueberry.kubism.ku.dk>

rossini@biostat.washington.edu (A.J. Rossini) writes:

>     >> >
>     >> > (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is
>     >> > in test)
>     >>
>     >> ...but 5.10 is the one that still ships with RedHat (newer ones
>     >> are not GPL yet, I presume). Installed 6.1 yesterday, so I
>     >> should know.
> 
> There are Debian packages... one of the good reasons to use Debian
> :-).
> 
> But seriously, alien would import it, or I'm sure someone must have
> done a contributed rpm for it?


Sure,

-----
[pd@blueberry pd]$ rpmfind --latest ghostscript
Installing ghostscript will require 4078 KBytes

### To Transfer:
ftp://ftp.mpi-sb.mpg.de/pub/linux/mirror/ftp.redhat.com/contrib/hurricane/i386/ghostscript-5.50-3.i386.rpm
Do you want to download these files to /tmp [Y/n/a] ? : n
-----

However, the point was that we need to be a little careful when
relying on non-free (or semi-free) items, because they don't travel on
CD releases, etc. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct  5 16:16:57 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 5 Oct 1999 16:16:57 +0100 (BST)
Subject: gs5.xx (was bitmap copies of plots)
In-Reply-To: <x2yadhswws.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.9910051608320.10682-100000@auk.stats>

On 5 Oct 1999, Peter Dalgaard BSA wrote:

> rossini@biostat.washington.edu (A.J. Rossini) writes:
> 
> >     >> >
> >     >> > (5.50 is much better than 5.10, and 6.0 is imminent: 5.94 is
> >     >> > in test)
> >     >>
> >     >> ...but 5.10 is the one that still ships with RedHat (newer ones
> >     >> are not GPL yet, I presume). Installed 6.1 yesterday, so I
> >     >> should know.
> > 
> > There are Debian packages... one of the good reasons to use Debian
> > :-).
> > 
> > But seriously, alien would import it, or I'm sure someone must have
> > done a contributed rpm for it?
> 
> 
> Sure,
> 
> -----
> [pd@blueberry pd]$ rpmfind --latest ghostscript
> Installing ghostscript will require 4078 KBytes
> 
> ### To Transfer:
> ftp://ftp.mpi-sb.mpg.de/pub/linux/mirror/ftp.redhat.com/contrib/hurricane/i386/ghostscript-5.50-3.i386.rpm
> Do you want to download these files to /tmp [Y/n/a] ? : n

(There are gs5.93 rpms too.)
 
> However, the point was that we need to be a little careful when
> relying on non-free (or semi-free) items, because they don't travel on
> CD releases, etc. 

Right. I appreciated that. My point is that you may not be able use
dev2bitmap as a PDF driver without using GhostScript 6.0 or pre-test,
unless you restrict what you plot.  GNU-licensed gs6.xx is a year away (it
says in the pre-test). So either you accept the shackles or you get
inferior plots.

Unfortunately Aladdin and FSF seem to be having a spat, which is why
5.94 was put out with support for linking in readline removed.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Thu Oct  7 06:15:03 1999
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Oct 1999 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199910070515.HAA05575@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 130 *
Subject: lty=0 -- shouldn't it give an invisible line?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Feb 1999 21:45:43 +0100
--Strange effect on barplot
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 229 *
Subject: dev.print scaling bug?
From: John.Peters@tip.csiro.au (John Peters)
Date: Fri, 16 Jul 1999 12:10:48 +1000 (EST)
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 249 *
Subject: axis ignores srt/crt
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 16 Aug 1999 15:51:49 -0700 (PDT)
--`its's not a bug it is an imcomptibility'
* PR# 258 *
Subject: Greek letters in outer margins.
From: "BXC (Bendix Carstensen)" <BXC@NOVO.dk>
Date: Thu, 26 Aug 1999 12:09:17 +0200
--Uses *current* plot margins. 
--
--remove paste() from repro. instr.
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 281 *
Subject: mtext(. col = ...) stopped working in 0.65.0
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 17 Sep 1999 15:10:40 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
--Have put note in help file, at least.
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200

Directory:  Installation

* PR# 290 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Thu, 30 Sep 1999 21:18:49 +0200 (MET DST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 239 *
Subject: cbind is not generic as claimed, omits labels where S has them 
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 12:29:58 +0100 (BST)
--Cbind is now generic, still labelling issues. See also PR#240 and PR#241.
* PR# 240 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
--See PR#239
* PR# 241 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 6 Aug 1999 06:52:35 +0100 (BST)
--See PR#239
* PR# 257 *
Subject:  dimnames names lost when subscripting 
From: Andreas Weingessel <weingessel@ci.tuwien.ac.at>
Date: Wed, 25 Aug 1999 12:45:28 +0200
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file
--Should we not make the buffer static?
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 210 *
Subject: definition of R_problem_buf in S.h
From: vogels@ieee.org
Date: Mon, 14 Jun 1999 17:56:04 +0200 (MET DST)
--Same as #185

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 222 *
Subject: Use of R-Coda
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Fri, 9 Jul 1999 10:54:16 +0200 
--In Danish (?)  Looks as if PR#246 is the same in English
* PR# 234 *
Subject: R-bugs
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Tue, 27 Jul 1999 13:49:31 +0200
--Looks like PR#222 again, in Danish. See PR#246 for English version
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 260 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
Subject: Compilation of R under Caldera OpenLinux 2.2
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
--workaround is to install missing libg2c.a. See also PR#268 for sucess report
* PR# 268 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
From: "Jack N." <jnf@pcisys.net>
Date: Mon, 06 Sep 1999 08:03:02 -0600
--Followup: See PR#260

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

none
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Fri Oct  8 03:57:44 1999
From: ntakebay@bio.indiana.edu (ntakebay@bio.indiana.edu)
Date: Fri, 8 Oct 1999 04:57:44 +0200 (MET DST)
Subject: floor(NaN) problem fixed in massdist.c (PR#291)
Message-ID: <199910080257.EAA06625@pubhealth.ku.dk>

Full_Name: Naoki Takebayashi
Version: 0.65.0+R-release.diff (Oct 6, 1999)
OS: Linux/Alpha
Submission from: (NULL) (129.79.224.171)


This will fix the "problem 2 (crash in fft)" in Bug ID #277

On Linux/Alpha, make check failed because R could not handle the following
example in base-Ex.R

##___ Examples ___:

# The Old Faithful geyser data
data(faithful)
 :
 :
## Missing values:
x <- xx <- faithful$eruptions
x[i.out <- sample(length(x), 10)] <- NA
doR <- density(x, bw=0.15, na.rm = TRUE)
doN <- density(x, bw=0.15, na.rm = FALSE)
	### it fails at this statement ###
lines(doR, col="blue")
lines(doN, col="red")
points(xx[i.out], rep(.01,10))


The following statement in density() was not getting the right output:
       
    y <- .C("massdist", x = as.double(x), nx = N, xlo = as.double(lo), 
        xhi = as.double(up), y = double(2 * n), ny = as.integer(n), 
        NAOK = has.na, PACKAGE = "base")$y

y[1] and y[2] should be 0 and 0 but both of them became NaN after this
statement.

So I looked at src/appl/masdist.c with a debugger.  The bug is caused
by floor().  On Alpha/Linux, floot(NaN) returns 0.  x[i] in the
following code is the list passed from the above statement in
density().  The array x contains a couple of NaN.  When x[i] is NaN,
xpos become NaN.  Then ix = floor(xpos) returns an unexpected result.
On linux/i386, ix become -2147483648 when xpos = NaN(0x80000000007a2).
However ix become 0 on Linux/Alpha when xpos=NaN.  When xpos = NaN, it
shouldn't go into the following "if" statement.  But it goes inside on
Alpha/Linux (because ixmin is 0), and set y[0] and y[1] to NaN.

Following is extracted from massdist.c

    for(i=0 ; i<*nx ; i++) {
    	xpos = (x[i] - *xlow) / xdelta;
    	ix = floor(xpos);
    	fx = xpos - ix;
    	if(ixmin <= ix && ix <= ixmax) {
    	    y[ix] += (1.0 - fx);
    	    y[ix + 1] += fx;
    	}
    	else if(ix == -1) {
    	    y[0] += fx;
    	}
    	else if(ix == ixmax + 1) {
    	    y[ixmax + 1] += (1.0 - fx);
    	}
    }


So I think the statement

	if(ixmin <= ix && ix <= ixmax) {

should be changed to 

    	if((! isnan(ix)) && ixmin <= ix && ix <= ixmax) {

or 

everything inside of this for loop should be encolsed with 

    for(i=0 ; i<*nx ; i++) {
	if ( ! isnan( x[i] ) ) {
		:
		:
       }
    }

A patch to fix this bug is included.

--- R-0.65.0/src/appl/massdist.c.orig	Thu Oct  7 21:26:53 1999
+++ R-0.65.0/src/appl/massdist.c	Thu Oct  7 21:47:55 1999
@@ -38,6 +38,7 @@
 	y[i] = 0;
 
     for(i=0 ; i<*nx ; i++) {
+      if ( ! isnan( x[i] ) ) {
 	xpos = (x[i] - *xlow) / xdelta;
 	ix = floor(xpos);
 	fx = xpos - ix;
@@ -51,6 +52,7 @@
 	else if(ix == ixmax + 1) {
 	    y[ixmax + 1] += (1.0 - fx);
 	}
+      }
     }
 
     for(i=0 ; i<*ny ; i++)






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Oct  8 08:56:14 1999
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Fri, 8 Oct 1999 09:56:14 +0200 (MET DST)
Subject: Check script (PR#292)
Message-ID: <199910080756.JAA08367@pubhealth.ku.dk>

There is a syntax error in the "check" script in R 0.65.1, due to an
unescaped ` character. Line 96 should read

    echo " Results of \`check' are available in directory ../${CHECK_DIR}"

not

    echo " Results of `check' are available in directory ../${CHECK_DIR}"

Martyn

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct  8 09:43:53 1999
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 8 Oct 1999 10:43:53 +0200 (MET DST)
Subject: dimnames and subscripting (PR#293)
Message-ID: <199910080843.KAA09091@pubhealth.ku.dk>

I am not sure that this is a bug, but it was unexpected -- of course my
expectations are fallible, eg column ordering in model.matrix()!  When an
array is subscripted the names of the dimnames list are lost (v 64.1). 

fred <- array(1:12, 2:4, list(A = letters[1:2], B = letters[3:5], C =
    letters[6:9]))

dimnames(fred)
dimnames(fred[1, , ])
dimnames(fred[1, , , drop=FALSE])

In the first case I expected names B and C to be preserved; in the second
case, not quite so clear-cut, I also expected B and C to be preserved.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Oct  8 10:36:22 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 8 Oct 1999 11:36:22 +0200 (CEST)
Subject: Check script (PR#292)
In-Reply-To: <199910080756.JAA08367@pubhealth.ku.dk>
References: <199910080756.JAA08367@pubhealth.ku.dk>
Message-ID: <14333.47894.381498.830864@fangorn.ci.tuwien.ac.at>

>>>>> plummer  writes:

> There is a syntax error in the "check" script in R 0.65.1, due to an
> unescaped ` character. Line 96 should read

>     echo " Results of \`check' are available in directory ../${CHECK_DIR}"

> not

>     echo " Results of `check' are available in directory ../${CHECK_DIR}"

Fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct  8 11:32:10 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Oct 1999 12:32:10 +0200
Subject: dimnames and subscripting (PR#293)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Fri, 8 Oct 1999 10:43:53 +0200 (MET DST)"
References: <199910080843.KAA09091@pubhealth.ku.dk>
Message-ID: <x27lkycfdh.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I am not sure that this is a bug, but it was unexpected -- of course my
> expectations are fallible, eg column ordering in model.matrix()!  When an
> array is subscripted the names of the dimnames list are lost (v 64.1). 
> 
> fred <- array(1:12, 2:4, list(A = letters[1:2], B = letters[3:5], C =
>     letters[6:9]))
> 
> dimnames(fred)
> dimnames(fred[1, , ])
> dimnames(fred[1, , , drop=FALSE])
> 
> In the first case I expected names B and C to be preserved; in the second
> case, not quite so clear-cut, I also expected B and C to be preserved.

Yep, it's a bug. Same as reported as PR#257 by Andreas W. Still
pending investigation...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Oct  8 15:00:16 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 8 Oct 1999 16:00:16 +0200
Subject: [R] ts package on CRAN ?
In-Reply-To: <37FDF1E3.2A9B9C80@bank-banque-canada.ca> (message from Paul
 Gilbert on Fri, 08 Oct 1999 09:30:12 -0400)
References: <Pine.GSO.4.05.9910081003590.10042-100000@auk.stats> <99100812411306.00949@ida> <199910081306.PAA14669@sophie.ethz.ch> <37FDF1E3.2A9B9C80@bank-banque-canada.ca>
Message-ID: <199910081400.QAA14714@sophie.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
(privately to me,
 I'm cc'ing to R-devel since this should be of a wider interest)

    MM> However, if "tseries" would just contain a
    MM> require(ts)

    PaulG> So this is how this is suppose to be done. I guess I should read
    PaulG> some documentation somewhere. 

help(library)

 (especially the last sections) should give quite a bit of info on this.

    PaulG> Should this be "in line" in the
    PaulG> library file or should it be in the .First.lib file?

There's no such thing as a ".First.lib" file; of course,
you mean the commonly used  zzz.R  file (containing the  .First.lib <- .... )

Answer: Well, it depends.. :
Usually it doesn't matter where the require() is;
Current practice 
 (grep'ing in my directory tree of all the source of all the CRAN packages)
reveals that people have adopted several different ways of doing this.

The zzz.R (which should also contain the .First.lib definition)
is good place to put such a general require().
Recently, we had a case where using
aaa.R (I think, even "Aaa.R") instead was recommended  
{Idea: aaa.R would come at the very beginning of the installed package source}

If only very little functionality of a package depends on another
(non-standard) package, I'd consider to put the  require(..)
only inside the function requiring the package, something like

  if(!require(<pkg>))
   stop("The function `...' can only be used when package <pkg> is available!")

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Oct  8 17:54:09 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 8 Oct 1999 18:54:09 +0200 (MET DST)
Subject: floor(NaN) problem fixed in massdist.c (PR#291)
Message-ID: <199910081654.SAA16942@pubhealth.ku.dk>

Dear Naoki,
Thank you very much,

for your detailed bug report and your proposed patch.

>> This will fix the "problem 2 (crash in fft)" in Bug ID #277
>> 
>> On Linux/Alpha, make check failed because R could not handle the following
>> example in base-Ex.R
>> 
>> ##___ Examples ___:
>> 
>> # The Old Faithful geyser data
>> data(faithful)
>>  :
>>  :
>> ## Missing values:
>> x <- xx <- faithful$eruptions
>> x[i.out <- sample(length(x), 10)] <- NA
>> doR <- density(x, bw=0.15, na.rm = TRUE)
>> doN <- density(x, bw=0.15, na.rm = FALSE)
>> 	### it fails at this statement ###
>> lines(doR, col="blue")
>> ...

>> The following statement in density() was not getting the right output:
>>        
>>     y <- .C("massdist", x = as.double(x), nx = N, xlo = as.double(lo), 
>>         xhi = as.double(up), y = double(2 * n), ny = as.integer(n), 
>>         NAOK = has.na, PACKAGE = "base")$y
>> 
>> y[1] and y[2] should be 0 and 0 but both of them became NaN after this
>> statement.
>> 
>> So I looked at src/appl/masdist.c with a debugger.  The bug is caused
>> by floor().  On Alpha/Linux, floor(NaN) returns 0.

Thank you so much for finding this!

However, this is clearly a bug of (your version of) gcc, respectively libm
on Alpha/Linux.
In general, we do rely on IEEE Arithmetic working correctly.

>>  x[i] in the
>> following code is the list passed from the above statement in
>> density().  The array x contains a couple of NaN.  When x[i] is NaN,
>> xpos become NaN.  Then ix = floor(xpos) returns an unexpected result.
>> On linux/i386, ix become -2147483648 when xpos = NaN(0x80000000007a2).
>> However ix become 0 on Linux/Alpha when xpos=NaN.  When xpos = NaN, it
>> shouldn't go into the following "if" statement.  But it goes inside on
>> Alpha/Linux (because ixmin is 0), and set y[0] and y[1] to NaN.
>> 
>> Following is extracted from massdist.c
>> 
>>     for(i=0 ; i<*nx ; i++) {
>>     	xpos = (x[i] - *xlow) / xdelta;
>>     	ix = floor(xpos);
>>     	fx = xpos - ix;
>>     	if(ixmin <= ix && ix <= ixmax) {
>>     	    y[ix] += (1.0 - fx);
>>     	    y[ix + 1] += fx;
>>     	}
>>     	else if(ix == -1) {
>>     	    y[0] += fx;
>>     	}
>>     	else if(ix == ixmax + 1) {
>>     	    y[ixmax + 1] += (1.0 - fx);
>>     	}
>>     }
>> 
>> 
>> So I think the statement
>> 
>> 	if(ixmin <= ix && ix <= ixmax) {
>> 
>> should be changed to 
>> 
>>     	if((! isnan(ix)) && ixmin <= ix && ix <= ixmax) {
>> 
>> or 
>> ........

Instead of  isnan () , it should rather be ISNAN() [an R defined macro]
which is true for both NaN and NA.
(note that we also try to have a working ISNAN() when there's no isnan()
available from C
  (note that ANSI or POSIX C  unfortunately do NOT require IEEE arithmetic!)

I'll have a look at the code and your proposed patch.

Thanks again!

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Sun Oct 10 12:00:53 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Sun, 10 Oct 1999 12:00:53 +0100
Subject: msvrt.dll (was R-0.65.1 for WinNT/9X)
In-Reply-To: <000201bf12fa$1b5f0800$e3109d3e@fenris>; from Karl M. Syring on Sun, Oct 10, 1999 at 10:33:19AM +0200
References: <x2hfk0r1ft.fsf@blueberry.kubism.ku.dk> <000201bf12fa$1b5f0800$e3109d3e@fenris>
Message-ID: <19991010120052.19823@hal.stat.unipd.it>

On Sun, Oct 10, 1999 at 10:33:19AM +0200, Karl M. Syring wrote:
> I think, we have now a good reason to make the binary distributions to load
> msvrt.dll. Otherwise, you would probably get both crtdll and msvcrt loaded
> if you use COM/ActiveX. As we already now, this is a safe way into difficult
> and hard to diagnose problems.
> 

 [Cross-posted to  r-devel not to r-help]

 Karl,
 my idea is to switch to msvrt.dll soon. However. some more tests
 are needed.

 guido
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 10 12:03:05 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 10 Oct 1999 12:03:05 +0100 (BST)
Subject: msvrt.dll (was R-0.65.1 for WinNT/9X)
In-Reply-To: <19991010120052.19823@hal.stat.unipd.it>
Message-ID: <Pine.GSO.4.05.9910101135570.4687-100000@auk.stats>

On Sun, 10 Oct 1999, Guido Masarotto wrote:

> On Sun, Oct 10, 1999 at 10:33:19AM +0200, Karl M. Syring wrote:
> > I think, we have now a good reason to make the binary distributions to load
> > msvrt.dll. Otherwise, you would probably get both crtdll and msvcrt loaded
> > if you use COM/ActiveX. As we already now, this is a safe way into difficult
> > and hard to diagnose problems.

Nothing in the (unreleased) (D)COM stuff makes any use of msvcrt.dll.
I have just checked by removing from my system and re-running the tests.
It is all ATL based.

>  Karl,
>  my idea is to switch to msvrt.dll soon. However. some more tests
>  are needed.

In particular, we have to resolve what to do about machines without
msvcrt.dll.  Not all Windows machines have it, and I have read the
redistribution conditions on my copy of Visual Studio. I am not clear we
have any right to redistribute it with an application not compiled under
VC++6 (it might depend where we got it from) and if we do there seem to be
complex conditions on checking version numbers which will demand a quite
complex updater to be written.  It looks like having a local copy for the
application is not approved of.  (All I know is that the redistibution
conditions do depend on which of the many VS licences one has.)

Karl: it would be a great help if you could look into this for us, and
if the way looks clear provide us with a suitable updater, or point us
to a suitable ready-made one.

Another side effect of requiring msvcrt.dll appears to be to stop the
possibilities of using the cygwin and cross-compiling routes, since AFAIK
only the binaries for the mingw32 compiler are available to use msvcrt.dll.
Again, if you know more it would be very helpful if you could test this for
us.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From szimeras@irisa.fr  Tue Oct 12 17:38:44 1999
From: szimeras@irisa.fr (Stelios Zimeras)
Date: Tue, 12 Oct 1999 18:38:44 +0200
Subject: Compilation problem with R
Message-ID: <38036414.DDA145DF@irisa.fr>

Dear Sirs,

I try to compile the R ver 65.1 in my UNIX machine, but I have some
difficulties. In particular
running the ./configure I have the following results  (I give only the
no, all the others are yes)

checking whether gcc needs -traditional... no
checking for g77... no
checking for sin in -lmoto... no
chechecking for main in -lhdf5... no
cking for main in -lncurses... no
checking for main in -ldxml... no
checking for main in -lblas_risc... no
checking for rl_callback_read_char in -lreadline... no
checking for ANSI C header files... no
checking for vfork.h... no
checking for working vfork... no
checking for __setfpucw... no
checking for dl.h... no
checking for fpu_control.h... no
checking for hdf5.h... no
checking for ieee754.h... no
checking for readline/history.h... no
checking for blkcnt_t... no
checking how to deal with shared libraries...
"/usr/openwin/lib/config/sun.cf", line 154: macro ExtraLoadOptions
redefines previous macro at "/usr/openwin/lib/config/site.def", line 64
"/usr/openwin/lib/config/site.def", line 64: macro ExtraLoadOptions
redefines previous macro at "/usr/openwin/lib/config/sun.cf", line 154
done
checking whether -R must be followed by a space... no
checking for dnet_ntoa in -ldnet... no
checking for dnet_ntoa in -ldnet_stub... no
checking for gethostbyname... no
checking for connect... no
checking for IceConnectionNumber in -lICE... no

R is now configured for sparc-sun-solaris2.5

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc  -g -O2
  FORTRAN compiler:         f2c
  Gnome support:            no

and when I run the make command I have the following  (after all the
lines)

drotg.o(.text+0x170): undefined reference to `__d_sign'
*** Error code 1
make: Fatal error: Command failed for target `../../bin/R.X11'
Current working directory /udd/szimeras/rhome/R-0.65.1/src/main
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /udd/szimeras/rhome/R-0.65.1/src/main
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /udd/szimeras/rhome/R-0.65.1/src
*** Error code 1
make: Fatal error: Command failed for target `R'

Ofcourse I can run R.

Could you give me some directions about the problem?
Many thanks

Stelios Zimeras


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 12 23:45:42 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 1999 00:45:42 +0200
Subject: Compilation problem with R
In-Reply-To: Stelios Zimeras's message of "Tue, 12 Oct 1999 18:38:44 +0200"
References: <38036414.DDA145DF@irisa.fr>
Message-ID: <x2emf0fbah.fsf@blueberry.kubism.ku.dk>

Stelios Zimeras <szimeras@irisa.fr> writes:

> R is now configured for sparc-sun-solaris2.5
                          ^^^^^^^^^^^^^^^^^^^^
Aha. Now you're telling us...

> 
>   Source directory:         .
>   Installation directory:   /usr/local
>   C compiler:               gcc  -g -O2
>   FORTRAN compiler:         f2c
                              ^^^
>   Gnome support:            no
> 
> and when I run the make command I have the following  (after all the
> lines)
> 
> drotg.o(.text+0x170): undefined reference to `__d_sign'
> *** Error code 1

This looks like a fortran library gone missing. Perhaps the linker
doesn't know where to find it? You may need to hand-edit the Makeconf
file to tell it where to look (-L/opt/local/lib in FLIBS is a guess,
but it is completely dependent on your setup). 

Another option could be to install a g77 compiler.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Wed Oct 13 14:58:38 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (Thomas Hoffmann)
Date: Wed, 13 Oct 1999 15:58:38 +0200 (METDST)
Subject: formatReal()-bug (or Is there anybody out there w/o IEEE754?)
Message-ID: <199910131358.PAA06386@ehmgs2.et.tu-dresden.de>

On a system with IEEE_754 undefined, I run into an bug, when the value
of an element of the first argument (e.g., x[0]) of formatReal() is NA:

1. (format.c:235) if (!R_FINITE ..) gives nanflag=1 (!naflag remains 0)
2. (format.c:272..288) *m gets an value of -2147483643 (from the format 
                       fiddling, should not matter to us)
3. (format.c:289) because naflag is zero, m does not get the value of
                  R_print.na_width and we get back the unbelievable value 
                  from 2.

This crashes R in commands as 
	as.vector(NA,mode="double")
.

(Please reply to my mail address too, because I do not read r-devel regularly).
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 13 16:05:10 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 1999 17:05:10 +0200
Subject: [R] main/character.c (et.al): dangerous AllocBuffer()
In-Reply-To: Thomas Hoffmann's message of "Wed, 13 Oct 1999 15:21:11 +0200 (METDST)"
References: <199910131321.PAA06250@ehmgs2.et.tu-dresden.de>
Message-ID: <x2vh8b8fo9.fsf@blueberry.kubism.ku.dk>

Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:

> When called with len<0 the code is assumed to re-size buff to MAXELTSIZE:
> 
> 	realloc(buff, 0);
> 	buff = (char *) realloc(buff, MAXELTSIZE);
> 	bufsize = MAXELTSIZE;
--etc--

Fixed as suggested (free+malloc)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 13 16:17:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Oct 1999 17:17:53 +0200
Subject: formatReal()-bug (or Is there anybody out there w/o IEEE754?)
In-Reply-To: Thomas Hoffmann's message of "Wed, 13 Oct 1999 15:58:38 +0200 (METDST)"
References: <199910131358.PAA06386@ehmgs2.et.tu-dresden.de>
Message-ID: <x2so3f8f31.fsf@blueberry.kubism.ku.dk>

Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:

> On a system with IEEE_754 undefined, I run into an bug, when the value
> of an element of the first argument (e.g., x[0]) of formatReal() is NA:
> 
> 1. (format.c:235) if (!R_FINITE ..) gives nanflag=1 (!naflag remains 0)
> 2. (format.c:272..288) *m gets an value of -2147483643 (from the format 
>                        fiddling, should not matter to us)
> 3. (format.c:289) because naflag is zero, m does not get the value of
>                   R_print.na_width and we get back the unbelievable value 
>                   from 2.
> 
> This crashes R in commands as 
> 	as.vector(NA,mode="double")
> .

If a system isn't IEEE, it might not know about NaN either, so I
suspect that one wants naflag = 1 rather than nanflag = 1.

Could you try it and report back?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From William.Venables@cmis.CSIRO.AU  Thu Oct 14 07:58:00 1999
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Thu, 14 Oct 1999 16:58:00 +1000
Subject: [R] Regression on non linear model
In-Reply-To: Your message of "Thu, 14 Oct 1999 07:38:39 +0100."
 <Pine.GSO.4.05.9910140730380.9722-100000@auk.stats>
Message-ID: <199910140700.RAA23011@snowy.nsw.cmis.CSIRO.AU>

> > 
> > The preferred way to do this is to use the I() function to protect
> > the ^2 and ^3 from being evaluated as part of the linear model
> > formula.  That is, write the call to lm with
> > 
> >  formula = Response ~ Var1 + I(Var1^2) + I(Var1^3)
> 
> I was doing this in a practical class yesterday. There is another way,
> 
> Response ~ poly(Var1, 3)
> 
> which fits the same cubic model by using orthogonal polynomials, and
> that has a number of numerical and statistical advantages. The fitted
> values will be the same, but the coefficients are those of the orthogonal
> polynomials, not the terms in the polynomial.  As I was telling my
> students, you might like to compare the two approaches.

One further advantage of doing it this way (in S-PLUS at least) is that you can
plot that component of the fitted curve very simply using plot.gam.  Now I know
we don't have a gam() in R yet, but I hope we plan to do so sometime and my
suggestion would be to start with a plot.gam and release that first.  It could
be done in a wet weekend (but I regret to say the weekends here are simply
beautiful.... :-)

-- 
-----------------------------------------------------------------
Bill Venables, Statistician, CMIS Environmetrics Project.

Physical address:                            Postal address:
CSIRO Marine Laboratories,                   PO Box 120,       
233 Middle St, Cleveland, Queensland         Cleveland, Qld, 4163
AUSTRALIA                                    AUSTRALIA

Telephone: +61 7 3826 7251     Email: Bill.Venables@cmis.csiro.au     
      Fax: +61 7 3826 7304


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 14 16:36:17 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 14 Oct 1999 08:36:17 -0700 (PDT)
Subject: [R] Regression on non linear model
In-Reply-To: <199910140700.RAA23011@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <Pine.GSO.4.10.9910140833150.2421-100000@wompom.biostat.washington.edu>

On Thu, 14 Oct 1999, Bill Venables wrote:

> One further advantage of doing it this way (in S-PLUS at least) is that you can
> plot that component of the fitted curve very simply using plot.gam.  Now I know
> we don't have a gam() in R yet, but I hope we plan to do so sometime and my
> suggestion would be to start with a plot.gam and release that first.  It could
> be done in a wet weekend (but I regret to say the weekends here are simply
> beautiful.... :-)

I have a predict(, type="terms") and also resid(,type="partial") for glms
which are the main part of these plots. I wrote it a few versions ago, so
I will probably have to update a bit. 

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Fri Oct 15 09:25:09 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (Thomas Hoffmann)
Date: Fri, 15 Oct 1999 10:25:09 +0200 (METDST)
Subject: IEEE_754 logic
Message-ID: <199910150825.KAA08308@ehmgs2.et.tu-dresden.de>

Can anybody of the architects of R enlighten me about the reasoning behind the selection of the IEEE 754 
mode for the building of R, please?

Special points of interest are:

1. The selection seems to be based on the availability of isnan() and finite(). Is this a common way 
to test for IEEE 754?

2. The C9x draft introduces isfinite() instead of finite() (and as I see, some systems, e.g. the 
macintosh, use this naming already). This is a deviation from the old ieee754 C mapping. I do not 
know, where we are in this transformation process now (most compilers seem to use finite(), still).

3. The C9x draft introduces the is*() functionality under the name of "classification MACROS". If an 
implementation implements this standard, autoconf misses isnan() and isfinite().

=============================================================================
Thomas Hoffmann, Institut fuer Halbleiter- und Mikrosystemtechnik, TU Dresden 
E-mail: hoffmann@ehmgs2.et.tu-dresden.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 15 16:03:54 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Oct 1999 17:03:54 +0200
Subject: IEEE_754 logic
In-Reply-To: Thomas Hoffmann's message of "Fri, 15 Oct 1999 10:25:09 +0200 (METDST)"
References: <199910150825.KAA08308@ehmgs2.et.tu-dresden.de>
Message-ID: <x2puyg4qed.fsf@blueberry.kubism.ku.dk>

Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:

> Can anybody of the architects of R enlighten me about the reasoning behind the selection of the IEEE 754 
> mode for the building of R, please?
> 
> Special points of interest are:
> 
> 1. The selection seems to be based on the availability of isnan() and finite(). Is this a common way 
> to test for IEEE 754?
> 
> 2. The C9x draft introduces isfinite() instead of finite() (and as I see, some systems, e.g. the 
> macintosh, use this naming already). This is a deviation from the old ieee754 C mapping. I do not 
> know, where we are in this transformation process now (most compilers seem to use finite(), still).
> 
> 3. The C9x draft introduces the is*() functionality under the name of "classification MACROS". If an 
> implementation implements this standard, autoconf misses isnan() and isfinite().
> 

Thanks for your comments. If you have suggestions for a safer way of
detecting the functionality in a platform-dependent way, we'd be happy
to know about it. However, one has to be careful; e.g., Solaris has
only finite() and no isfinite(), linux has both. There seems to be
almost no consistency in how different systems signal the precence of
IEEE compatibility. 

The heuristics in autoconf are more or less lifted  off of other
packages like Octave (right, Kurt?) and are by no means failsafe. 

I don't think it is a big deal to insert a check for finite() *or*
isfinite(), if that helps with some of your problems.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From szimeras@irisa.fr  Fri Oct 15 16:07:37 1999
From: szimeras@irisa.fr (Stelios Zimeras)
Date: Fri, 15 Oct 1999 17:07:37 +0200
Subject: R-suggestion
Message-ID: <38074338.E03B1107@irisa.fr>

Dear All,

Few days ago, I ask some informations that how I can solve my problem
with R installation due to fortran links. I have some interesting
suggestions and I thanks everyone for the quick reply. But the main
problem that I have is I need to do the link between the ./configure
program and the fortran libraries due to my quota space. Looking the
script of  the ./configure I found quite difficult to include any
command link inside the program . The question is, how I can do this
link?
I appreciate any suggestion for this problem, because I need to do some
experiments with this package.
Many thanks for your time

Stelios Zimeras

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Oct 18 09:08:14 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 18 Oct 1999 10:08:14 +0200 (CEST)
Subject: IEEE_754 logic
In-Reply-To: <x2puyg4qed.fsf@blueberry.kubism.ku.dk>
References: <199910150825.KAA08308@ehmgs2.et.tu-dresden.de>
 <x2puyg4qed.fsf@blueberry.kubism.ku.dk>
Message-ID: <14346.54638.829489.764648@fangorn.ci.tuwien.ac.at>

>>>>> Peter Dalgaard BSA writes:

> Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:
>> Can anybody of the architects of R enlighten me about the reasoning behind the selection of the IEEE 754 
>> mode for the building of R, please?
>> 
>> Special points of interest are:
>> 
>> 1. The selection seems to be based on the availability of isnan() and finite(). Is this a common way 
>> to test for IEEE 754?
>> 
>> 2. The C9x draft introduces isfinite() instead of finite() (and as I see, some systems, e.g. the 
>> macintosh, use this naming already). This is a deviation from the old ieee754 C mapping. I do not 
>> know, where we are in this transformation process now (most compilers seem to use finite(), still).
>> 
>> 3. The C9x draft introduces the is*() functionality under the name of "classification MACROS". If an 
>> implementation implements this standard, autoconf misses isnan() and isfinite().
>> 

> Thanks for your comments. If you have suggestions for a safer way of
> detecting the functionality in a platform-dependent way, we'd be happy
> to know about it. However, one has to be careful; e.g., Solaris has
> only finite() and no isfinite(), linux has both. There seems to be
> almost no consistency in how different systems signal the precence of
> IEEE compatibility. 

> The heuristics in autoconf are more or less lifted  off of other
> packages like Octave (right, Kurt?) and are by no means failsafe.

Not quite.  I don't think Octave worries about isfinite() at all.  We
check for finite() as a library function in autoconf.  In addition, we
do the following in `Arith.h':

#include <math.h>
#ifdef Macintosh
# define finite(x)      isfinite(x)
#else
# ifndef HAVE_FINITE
#  ifndef finite                /* Do not declare if macro! */
#   ifdef isfinite              /* HPUX math.h */
#     define finite(x)  isfinite(x)
#   else
      int finite(double);
#   endif
#  endif
# endif
#endif

which seems to give what we want, no?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Mon Oct 18 09:30:15 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (Thomas Hoffmann)
Date: Mon, 18 Oct 1999 10:30:15 +0200 (METDST)
Subject: IEEE_754 logic
Message-ID: <199910180830.KAA01996@ehmgs2.et.tu-dresden.de>

> >>>>> Peter Dalgaard BSA writes:  
> > > Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:  
> >> 3.  The C9x draft introduces
the is*() functionality under the name of "classification MACROS".  If an 
> >>implementation implements this standard, autoconf misses isnan() and isfinite().
> >>

The problem for me is, that if isnan and isfinite are the way C9x says (i.e.
are MACROS), then configure concludes "not there" (AC_FUNCS misses macros
(intentionally)).

>From this it reasons "not IEEE 754".

Then I get back to a native finite() in Arith.h, but IEEE 754 mode was switched
off.

So I see two topics:

1.  Maybe not to (only) check if isnan/isfinite are library functions, but also
to check for working macros (I have not found a predefined macro in Autoconf for
this).

This seems of some importance to me, because it is not only an idiosyncracy of a
singular system, but may become a more widespread problem if systems become C9x
compliant someday.

2.  Introduce a more bulletproof check for IEEE 754.

Is there possibly a computation we can carry out and conclude from its result to
IEEE 754?  I just have no idea.

=============================================================================
Thomas Hoffmann, Institut fuer Halbleiter- und Mikrosystemtechnik, TU Dresden
E-mail:  hoffmann@ehmgs2.et.tu-dresden.de
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct 20 20:07:17 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 20 Oct 1999 21:07:17 +0200 (MET DST)
Subject: Sun's make "almost" works
Message-ID: <14350.4837.785625.139546@gargle.gargle.HOWL>

I don't know if we still strive for  non-GNU make capability..

Anyway, here a report:

I was using the builddir != srcdir approach on Sun Solaris 2.6,
and normal Sun make (/usr/ccs/bin/make) worked up to producing a correct
R.X11 binary.

It failed when trying to make the first  src/library/<pkg>/src/<pkg>.so,
namely in eda/src  with

make: Fatal error: Don't know how to make target `line.o'

where GNU make then did

gcc -I../../../../include  -DHAVE_CONFIG_H  -fPIC -g -O2 -c ../../../../../SRC/src/library/eda/src/line.c -o line.o
.......

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Oct 21 01:16:10 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 20 Oct 1999 17:16:10 -0700
Subject: error in split?
Message-ID: <87zoxd36wl.fsf@alpha.cfas.washington.edu>



Just saw the following which looked strange (Thomas, I'll bug you
about it tommorow...):

(ctl and group are factors, vectors of strings; ddna is a vector of
#'s) 

Does it have to do with the number of quotes?

best,
-tony
	
> ctl.x.group <- interaction(ctl,group)
> my.list <- split(ddna,ctl.x.group)
Error in split(x, f) : second argument must be a factor
> is.factor(ctl.x.group)
[1] TRUE
> ### Thoughts?  here's ctl and group (trimmed for space):
> ctl
   [1] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
   [7] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
  [13] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
[1783] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1789] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1795] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1801] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1807] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1813] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1819] \"NONCTL\" \"NONCTL\"
Levels:  "CTL" "NONCTL" 
> 
> group
   [1] \"L\" \"P\" \"L\" \"P\" \"L\" \"R\" \"L\" \"L\" \"R\" \"R\" \"A\" \"L\"
  [13] \"R\" \"R\" \"R\" \"L\" \"R\" \"R\" \"R\" \"L\" \"L\" \"L\" \"A\" \"P\"
  [25] \"R\" \"P\" \"P\" \"L\" \"L\" \"R\" \"L\" \"R\" \"L\" \"P\" \"P\" \"P\"
  [37] \"P\" \"R\" \"A\" \"L\" \"A\" \"P\" \"P\" \"L\" \"R\" \"P\" \"R\" \"P\"
  [49] \"R\" \"P\" \"R\" \"R\" \"R\" \"A\" \"R\" \"L\" \"R\" \"L\" \"R\" \"A\"
  [61] \"P\" \"R\" \"R\" \"R\" \"R\" \"R\" \"P\" \"P\" \"P\" \"L\" \"R\" \"A\"
[1765] \"L\" \"P\" \"P\" \"P\" \"L\" \"L\" \"L\" \"P\" \"L\" \"P\" \"L\" \"L\"
[1777] \"P\" \"R\" \"L\" \"P\" \"L\" \"R\" \"R\" \"L\" \"A\" \"L\" \"A\" \"P\"
[1789] \"P\" \"P\" \"A\" \"A\" \"L\" \"L\" \"L\" \"P\" \"L\" \"P\" \"R\" \"L\"
[1801] \"L\" \"A\" \"R\" \"P\" \"L\" \"P\" \"L\" \"L\" \"L\" \"L\" \"L\" \"L\"
[1813] \"R\" \"P\" \"L\" \"R\" \"A\" \"L\" \"A\" \"L\"
Levels:  "A" "L" "P" "R" 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Oct 21 01:19:02 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: Wed, 20 Oct 1999 17:19:02 -0700 (PDT)
Subject: error in split...
Message-ID: <m11e5wc-000ox5C@alpha.cfas.washington.edu>

Date: 20 Oct 1999 17:19:02 -0700
Message-ID: <87yacx36rt.fsf@alpha.cfas.washington.edu>
Lines: 62


(repeated: 
> version
         _                 
platform i686-unknown-linux
arch     i686              
os       linux             
system   i686, linux       
status   Release           
major    0                 
minor    65.1              
year     1999              
month    October           
day      07                
language R                 
> 
)

Just saw the following which looked strange (Thomas, I'll bug you
about it tommorow...):

(ctl and group are factors, vectors of strings; ddna is a vector of
#'s) 

Does it have to do with the number of quotes?

best,
-tony
	
> ctl.x.group <- interaction(ctl,group)
> my.list <- split(ddna,ctl.x.group)
Error in split(x, f) : second argument must be a factor
> is.factor(ctl.x.group)
[1] TRUE
> ### Thoughts?  here's ctl and group (trimmed for space):
> ctl
   [1] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
   [7] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
  [13] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
[1783] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1789] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1795] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1801] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1807] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1813] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
[1819] \"NONCTL\" \"NONCTL\"
Levels:  "CTL" "NONCTL" 
> 
> group
   [1] \"L\" \"P\" \"L\" \"P\" \"L\" \"R\" \"L\" \"L\" \"R\" \"R\" \"A\" \"L\"
  [13] \"R\" \"R\" \"R\" \"L\" \"R\" \"R\" \"R\" \"L\" \"L\" \"L\" \"A\" \"P\"
  [25] \"R\" \"P\" \"P\" \"L\" \"L\" \"R\" \"L\" \"R\" \"L\" \"P\" \"P\" \"P\"
  [37] \"P\" \"R\" \"A\" \"L\" \"A\" \"P\" \"P\" \"L\" \"R\" \"P\" \"R\" \"P\"
  [49] \"R\" \"P\" \"R\" \"R\" \"R\" \"A\" \"R\" \"L\" \"R\" \"L\" \"R\" \"A\"
  [61] \"P\" \"R\" \"R\" \"R\" \"R\" \"R\" \"P\" \"P\" \"P\" \"L\" \"R\" \"A\"
[1765] \"L\" \"P\" \"P\" \"P\" \"L\" \"L\" \"L\" \"P\" \"L\" \"P\" \"L\" \"L\"
[1777] \"P\" \"R\" \"L\" \"P\" \"L\" \"R\" \"R\" \"L\" \"A\" \"L\" \"A\" \"P\"
[1789] \"P\" \"P\" \"A\" \"A\" \"L\" \"L\" \"L\" \"P\" \"L\" \"P\" \"R\" \"L\"
[1801] \"L\" \"A\" \"R\" \"P\" \"L\" \"P\" \"L\" \"L\" \"L\" \"L\" \"L\" \"L\"
[1813] \"R\" \"P\" \"L\" \"R\" \"A\" \"L\" \"A\" \"L\"
Levels:  "A" "L" "P" "R" 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Thu Oct 21 06:15:02 1999
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Oct 1999 07:15:02 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199910210515.HAA03403@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.

Directory:  Add-ons

none

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1

Directory:  Documentation

none

Directory:  Graphics

* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
* PR# 229 *
Subject: dev.print scaling bug?
From: John.Peters@tip.csiro.au (John Peters)
Date: Fri, 16 Jul 1999 12:10:48 +1000 (EST)
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
* PR# 249 *
Subject: axis ignores srt/crt
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Mon, 16 Aug 1999 15:51:49 -0700 (PDT)
--`its's not a bug it is an imcomptibility'
* PR# 258 *
Subject: Greek letters in outer margins.
From: "BXC (Bendix Carstensen)" <BXC@NOVO.dk>
Date: Thu, 26 Aug 1999 12:09:17 +0200
--Uses *current* plot margins. 
--
--remove paste() from repro. instr.
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
--Have put note in help file, at least.
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
* PR# 248 *
Subject: scan() + error interferes with count.fields() in some cases
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 13 Aug 1999 17:44:48 +0200

Directory:  Installation

* PR# 290 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Thu, 30 Sep 1999 21:18:49 +0200 (MET DST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 239 *
Subject: cbind is not generic as claimed, omits labels where S has them 
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 12:29:58 +0100 (BST)
--Cbind is now generic, still labelling issues. See also PR#240 and PR#241.
* PR# 240 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 5 Aug 1999 17:19:08 +0100 (BST)
--See PR#239
* PR# 241 *
Subject: Re: cbind is not generic as claimed, omits labels where S has them
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 6 Aug 1999 06:52:35 +0100 (BST)
--See PR#239
* PR# 257 *
Subject:  dimnames names lost when subscripting 
From: Andreas Weingessel <weingessel@ci.tuwien.ac.at>
Date: Wed, 25 Aug 1999 12:45:28 +0200
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file
--Should we not make the buffer static?
* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
* PR# 210 *
Subject: definition of R_problem_buf in S.h
From: vogels@ieee.org
Date: Mon, 14 Jun 1999 17:56:04 +0200 (MET DST)
--Same as #185

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 214 *
From: Charles Taylor <charles@amsta.leeds.ac.uk>
Date: Thu, 24 Jun 1999 11:20:06 +0100 (BST)
* PR# 222 *
Subject: Use of R-Coda
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Fri, 9 Jul 1999 10:54:16 +0200 
--In Danish (?)  Looks as if PR#246 is the same in English
* PR# 234 *
Subject: R-bugs
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Tue, 27 Jul 1999 13:49:31 +0200
--Looks like PR#222 again, in Danish. See PR#246 for English version
* PR# 246 *
Subject: R-Coda on rs6000-ibm-aix4.2.1.0
From: =?iso-8859-1?Q?Jette_Halkj=E6r_Jakobsen?=
Date: Wed, 11 Aug 1999 08:49:47 +0200
--Problem with ps on AIX in 0.64.2. Try again with 0.65.0?
* PR# 252 *
Subject: bug: R says "Floating exception" on DEC-Alpha w/OSF1
From: "Michael Thompson" <mlthomps@yayoi.mt.m-kagaku.co.jp>
Date: Thu, 19 Aug 1999 06:03:06 +0900
* PR# 260 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
Subject: Compilation of R under Caldera OpenLinux 2.2
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 29 Aug 1999 19:38:13 +1000 (EST)
--workaround is to install missing libg2c.a. See also PR#268 for sucess report
* PR# 268 *
Subject: Re: Compiling R under Caldera Open Linux 2.2
From: "Jack N." <jnf@pcisys.net>
Date: Mon, 06 Sep 1999 08:03:02 -0600
--Followup: See PR#260

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 291 *
Subject: floor(NaN) problem fixed in massdist.c
From: ntakebay@bio.indiana.edu
Date: Fri, 8 Oct 1999 04:57:42 +0200 (MET DST)
* PR# 292 *
Subject: Check script
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 08 Oct 1999 09:59:04 +0200 (CEST)
* PR# 293 *
Subject: dimnames and subscripting
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Fri, 8 Oct 1999 09:43:51 +0100 (BST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Oct 21 07:48:28 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 21 Oct 1999 08:48:28 +0200 (CEST)
Subject: Sun's make "almost" works
In-Reply-To: <14350.4837.785625.139546@gargle.gargle.HOWL>
References: <14350.4837.785625.139546@gargle.gargle.HOWL>
Message-ID: <14350.46908.819883.590823@fangorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

> I don't know if we still strive for  non-GNU make capability..

Yes.  However, my experience is that for non-GNU make we typically need
builddir == srcdir.

> Anyway, here a report:

> I was using the builddir != srcdir approach on Sun Solaris 2.6, and
> normal Sun make (/usr/ccs/bin/make) worked up to producing a correct
> R.X11 binary.

> It failed when trying to make the first
> src/library/<pkg>/src/<pkg>.so, namely in eda/src with

> make: Fatal error: Don't know how to make target `line.o'

> where GNU make then did

> gcc -I../../../../include  -DHAVE_CONFIG_H  -fPIC -g -O2 -c ../../../../../SRC/src/library/eda/src/line.c -o line.o
> .......

Hmm, what is different between the rules in src and the library ones?
Can you try replacing $(SHLIB) by its value in eda's src/Makefile and
then see what happens?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Oct 21 09:20:44 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Oct 1999 10:20:44 +0200 (MET DST)
Subject: error in split... (R 0.65.1) -- and patch (PR#294)
Message-ID: <199910210820.KAA00945@pubhealth.ku.dk>

Thanks for the report.

It is *not* a problem of the quotes  (but how on earth do you get such
			 horrible factor levels with these extra quotes ?)

As a matter of fact, (and as  ?bug.report tries to say)
the bug report should go to  R-bugs, not R-devel;
and preferrably be completely reproducible (using builtin or constructed data)

Here it is, in its reproducible form

a <- gl(3,2,11, lab=LETTERS[1:3])
(aa   <- interaction( a,a))

> split(seq(a), aa)
Error in split(x, f) : second argument must be a factor

The following is a patch (not fully tested, yet):

--- split.R	1999/07/30 14:25:56	1.3
+++ split.R	1999/10/21 08:18:34
@@ -5,7 +5,7 @@
 split.default <-
     function( x, f )
 {
-    f <- as.factor(f)
+    f <- factor(f) # drop extraneous levels
     if(is.null(class(x)))
     {
         retval <- .Internal(split(x, f))


    tony> Just saw the following which looked strange (Thomas, I'll bug you
    tony> about it tommorow...):

    tony> (ctl and group are factors, vectors of strings; ddna is a vector of
    tony> #'s) 

    tony> Does it have to do with the number of quotes?

	
    tony> ctl.x.group <- interaction(ctl,group)
    tony> my.list <- split(ddna,ctl.x.group)
    tony> Error in split(x, f) : second argument must be a factor
    tony> is.factor(ctl.x.group)
    tony> [1] TRUE
    tony> ### Thoughts?  here's ctl and group (trimmed for space):
    tony> ctl
    tony> [1] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
    tony> [7] \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"    \"CTL\"   
	      ...

    tony> [1813] \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\" \"NONCTL\"
    tony> [1819] \"NONCTL\" \"NONCTL\"
    tony> Levels:  "CTL" "NONCTL" 
    tony> 
    tony> group
    tony> [1] \"L\" \"P\" \"L\" \"P\" \"L\" \"R\" \"L\" \"L\" \"R\" \"R\" ..
    tony> [13] \"R\" \"R\" \"R\" \"L\" \"R\" \"R\" \"R\" \"L\" \"L\" \"L\"..
    .....
    tony> Levels:  "A" "L" "P" "R" 
    tony> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Oct 21 10:20:46 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 21 Oct 1999 11:20:46 +0200 (CEST)
Subject: IEEE_754 logic
In-Reply-To: <199910180830.KAA01996@ehmgs2.et.tu-dresden.de>
References: <199910180830.KAA01996@ehmgs2.et.tu-dresden.de>
Message-ID: <14350.56046.340864.856611@fangorn.ci.tuwien.ac.at>

>>>>> Thomas Hoffmann writes:

>> >>>>> Peter Dalgaard BSA writes:  
>> > > Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:  
>> >> 3.  The C9x draft introduces
> the is*() functionality under the name of "classification MACROS".  If an 
>> >>implementation implements this standard, autoconf misses isnan() and isfinite().
>> >>

> The problem for me is, that if isnan and isfinite are the way C9x says
> (i.e.  are MACROS), then configure concludes "not there" (AC_FUNCS
> misses macros (intentionally)).

> From this it reasons "not IEEE 754".

> Then I get back to a native finite() in Arith.h, but IEEE 754 mode was
> switched off.

> So I see two topics:

> 1.  Maybe not to (only) check if isnan/isfinite are library functions,
> but also to check for working macros (I have not found a predefined
> macro in Autoconf for this).

> This seems of some importance to me, because it is not only an
> idiosyncracy of a singular system, but may become a more widespread
> problem if systems become C9x compliant someday.

This should be doable.  In fact, this is what the code in Arith.h does
for one case, sort of.  I don't think that there is a macro in autoconf
that checks whether FOO exists as a library function or is defined as a
preprocessor symbol for another library function.

(We used to have a similar problem with sigsetjmp, which e.g. under
GNU/Linux is a macro ... so code which later tests for HAVE_SIGSETJMP
would not do the right thing.  I ended up writing a test which uses
AC_EGREP_HEADER.)

Question: does IEEE 754 require the `#include <math.h>'?  (And do all
implementations conform?)  Then we could use AC_EGREP_HEADER tests for
finite and isfinite ...

> 2.  Introduce a more bulletproof check for IEEE 754.

> Is there possibly a computation we can carry out and conclude from its
> result to IEEE 754?  I just have no idea.

(Don't think so.  Does anyone know?)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 21 16:36:37 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 21 Oct 1999 17:36:37 +0200 (MET DST)
Subject: free heap < 0 (PR#295)
Message-ID: <199910211536.RAA06300@pubhealth.ku.dk>


I allocated --vsize 250M (on a machine with 512Mb physical memory) and ran
> gcinfo(T)
> repeat{mean(rnorm(100))}
Garbage collection [nr. 2]...
129352 cons cells free (51%)
255636 Kbytes of heap free (-31%)


The percentage of heap free is less than 0.



--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Patched (unreleased)
 major = 0
 minor = 65.0
 year = 1999
 month = September
 day = 21
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Oct 21 16:40:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 21 Oct 1999 11:40:14 -0400
Subject: require - warn.conflicts
Message-ID: <380F33DE.4B06BAC3@bank-banque-canada.ca>

I am trying to straighten up my DSE package to use require() as that seems to be
a good mechanism. I have several packages:  dse requires tframe which requires
syskern which masks a few methods in base ( RNGkind rnorm runif).

If  I do require(dse) I get 3 copies of a six line warning (lots of white space)
about syskern methods masking base methods. If I use library(dse) I only get 2.
(I've simplified the situation somewhat,  I really have five or six levels of
requires and lots and lots of warning messages.) It would be nice if a single
warning could be produced, but at least could require() please be modified with
a warn.conflicts argument which is passed to library. Below is a fixed version.

Paul Gilbert
_______

 require <- function (name, quietly = FALSE, warn.conflicts=TRUE)
{
    name <- as.character(substitute(name))
    if (!exists(".Provided", inherits = TRUE))
        assign(".Provided", character(0), envir = .GlobalEnv)
    if (is.na(match(paste("package", name, sep = ":"), search())) &&
        is.na(match(name, .Provided))) {
        if (!quietly)
            cat("Loading required package:", name, "\n")
        library(name, char = TRUE, logical = TRUE,
warn.conflicts=warn.conflicts)
    }
    else TRUE
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Oct 21 16:59:24 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 21 Oct 1999 17:59:24 +0200 (MET DST)
Subject: source(,echo=T) doesn't echo comments (PR#296)
Message-ID: <199910211559.RAA06428@pubhealth.ku.dk>


I don't know if this is a bug report or a feature request, but a colleague
complained that source(,echo=T) doesn't echo the comments from the source
file.

	
Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Oct 21 17:42:51 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Oct 1999 18:42:51 +0200 (MET DST)
Subject: source(,echo=T) doesn't echo comments (PR#296)
Message-ID: <199910211642.SAA06551@pubhealth.ku.dk>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> I don't know if this is a bug report or a feature request, but a
    TL> colleague complained that source(,echo=T) doesn't echo the comments
    TL> from the source file.

This is what the new comment treatment brought us
{I hate it as well;  also applies to   example(.)}.

It seemed very hard to correctly attach comments to expressions,
(remember all the misplaced comments in 0.63.x ?).
so now the parser already throws all comments into the trash can.
No way to see them anymore.
AFAIK, we only see them with functions that have "keep.source"
Peter Dalgaard will be able to elaborate.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 21 18:30:53 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Oct 1999 19:30:53 +0200
Subject: source(,echo=T) doesn't echo comments (PR#296)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Thu, 21 Oct 1999 18:42:51 +0200 (MET DST)"
References: <199910211642.SAA06551@pubhealth.ku.dk>
Message-ID: <x2yacwk4du.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> >>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:
> 
>     TL> I don't know if this is a bug report or a feature request, but a
>     TL> colleague complained that source(,echo=T) doesn't echo the comments
>     TL> from the source file.
> 
> This is what the new comment treatment brought us
> {I hate it as well;  also applies to   example(.)}.
> 
> It seemed very hard to correctly attach comments to expressions,
> (remember all the misplaced comments in 0.63.x ?).
> so now the parser already throws all comments into the trash can.
> No way to see them anymore.
> AFAIK, we only see them with functions that have "keep.source"
> Peter Dalgaard will be able to elaborate.

There's not much more to say. If anyone can think of a better
scheme (perhaps keeping line numbers with the parsed expressions and
rereading the file?)...

The keep.source functionality is also a mixed blessing. It prevents
the system from throwing away things that were commented out and
messing up carefully formatted code, but is also leaves you stuck with
that which was sloppily writte to begin with.

Otherwise we have to rethink the parser. 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eli@ce.berkeley.edu  Fri Oct 22 21:19:12 1999
From: eli@ce.berkeley.edu (Eli Ateljevich)
Date: Fri, 22 Oct 1999 13:19:12 -0700
Subject: No subject
Message-ID: <4.1.19991022114553.00a91820@alpha-5.ce.berkeley.edu>

Hi.
I love R. I have had two compatibility issues in shifting my code over from
Splus

cts,rts, its:    are there any plans to incorporate these classes?

regexpr: R does not seem to have any regular expression matching function,
although that capability seems like it would be fairly simple to add for
someone who knew what they were doing, since the internal code is already
there and someone would just have to write a wrapper. If someone explained
the steps to adding an internal function I would give it a shot.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Oct 22 21:40:36 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 22 Oct 1999 15:40:36 -0500
Subject: none
In-Reply-To: Eli Ateljevich's message of "Fri, 22 Oct 1999 13:19:12 -0700"
References: <4.1.19991022114553.00a91820@alpha-5.ce.berkeley.edu>
Message-ID: <6rhfjjuo1n.fsf@franz.stat.wisc.edu>

Eli Ateljevich <eli@ce.berkeley.edu> writes:

> regexpr: R does not seem to have any regular expression matching function,
> although that capability seems like it would be fairly simple to add for
> someone who knew what they were doing, since the internal code is already
> there and someone would just have to write a wrapper. If someone explained
> the steps to adding an internal function I would give it a shot.

check 
 help(grep)
in R.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Mon Oct 25 08:37:16 1999
From: hoffmann@ehmgs2.et.tu-dresden.de (Thomas Hoffmann)
Date: Mon, 25 Oct 1999 09:37:16 +0200 (METDST)
Subject: gc_inhibit_torture definition twice?
Message-ID: <199910250737.JAA01900@ehmgs2.et.tu-dresden.de>

I have a problem to understand the way gc_inhibit_torture is defined.

In include/Defn.h it is declared as extern, using the __MAIN__ trick this leads to
a definition in main/main.c.

But in main/memory.c you define (and initialize) gc_inhibit_torture again:

    int gc_inhibit_torture = 1; /* gets set to zero after initialisations */

Then, in e.g. unix/system.c immediately at the beginning of main() you initialize 
gc_inhibit_torture once more:

int main(int ac, char **av)
{
    int value, ierr;
    char *p, msg[1024];
    structRstart rstart;
    Rstart Rp = &rstart;

    gc_inhibit_torture = 1;
    
Can anybody explain the reason for this implementation?

=============================================================================
Thomas Hoffmann, Institut fuer Halbleiter- und Mikrosystemtechnik, TU Dresden 
E-mail: hoffmann@ehmgs2.et.tu-dresden.de
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Adrian.Trapletti@wu-wien.ac.at  Mon Oct 25 09:51:50 1999
From: Adrian.Trapletti@wu-wien.ac.at (Adrian Trapletti)
Date: Mon, 25 Oct 1999 08:51:50 +0000
Subject: GARCH models available
Message-ID: <38141A26.A4094946@wu-wien.ac.at>

tseries_0.3-0 at CRAN now contains the following new features:

NelPlo                   Nelson-Plosser Macroeconomic Time Series
garch                    Fit GARCH Models to Time Series
get.hist.quote           Download Historical Finance Data
jarque.bera.test         Jarque-Bera Test
na.remove                NA Handling Routines for Time Series

garch contains a GARCH estimation routine together with some of the
usual methods (print, plot, summary etc.). I plan to further implement a
simulate.garch() and to extend predict.garch() for multi-step forecasts.

For those who like to play with stock market data, get.hist.quote()
allows to download yahoo-finance data directly over the www into R time
series.

Testing, suggestions, and comments are welcome!

Adrian

--
Adrian Trapletti, Vienna University of Economics and Business
Administration, Augasse 2-6, A-1090 Vienna, Austria
Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
Email: adrian.trapletti@wu-wien.ac.at



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 25 10:03:22 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Oct 1999 11:03:22 +0200
Subject: gc_inhibit_torture definition twice?
In-Reply-To: Thomas Hoffmann's message of "Mon, 25 Oct 1999 09:37:16 +0200 (METDST)"
References: <199910250737.JAA01900@ehmgs2.et.tu-dresden.de>
Message-ID: <x23duzlsmd.fsf@blueberry.kubism.ku.dk>

Thomas Hoffmann <hoffmann@ehmgs2.et.tu-dresden.de> writes:

> I have a problem to understand the way gc_inhibit_torture is defined.
> 
> In include/Defn.h it is declared as extern, using the __MAIN__ trick this leads to
> a definition in main/main.c.
> 
> But in main/memory.c you define (and initialize) gc_inhibit_torture again:
> 
>     int gc_inhibit_torture = 1; /* gets set to zero after initialisations */
> 
> Then, in e.g. unix/system.c immediately at the beginning of main() you initialize 
> gc_inhibit_torture once more:
> 
> int main(int ac, char **av)
> {
>     int value, ierr;
>     char *p, msg[1024];
>     structRstart rstart;
>     Rstart Rp = &rstart;
> 
>     gc_inhibit_torture = 1;
>     
> Can anybody explain the reason for this implementation?

It's a debugging aid, something that got hacked in to scare up some
deep memory protection bugs. The only reason for that implementation is
most likely that my mind was on other things at the time....

I believe it predates the __MAIN__ trick, but nowadays it would seem
that one can safely lose the definition in memory.c. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From syring@email.com  Mon Oct 25 18:10:31 1999
From: syring@email.com (Karl M. Syring)
Date: Mon, 25 Oct 1999 19:10:31 +0200
Subject: [R] GARCH models available
In-Reply-To: <38141A26.A4094946@wu-wien.ac.at>
Message-ID: <000101bf1f0b$d7abb900$bfc29e3e@fenris>

Adrian,
could you please use less unixish temporary file name in get.hist.quote(). I
get some thing like "/tmp/^spc17:54:32" which will fail on Windows because
/tmp might not exist and because the colon is not an acceptable character in
file names.

Karl


> -----Original Message-----
> From: owner-r-help@stat.math.ethz.ch
> [mailto:owner-r-help@stat.math.ethz.ch]On Behalf Of Adrian Trapletti
> Sent: Montag, 25. Oktober 1999 10:52
> To: R-Help
> Cc: R-Devel
> Subject: [R] GARCH models available
>
>
> tseries_0.3-0 at CRAN now contains the following new features:
>
> NelPlo                   Nelson-Plosser Macroeconomic Time Series
> garch                    Fit GARCH Models to Time Series
> get.hist.quote           Download Historical Finance Data
> jarque.bera.test         Jarque-Bera Test
> na.remove                NA Handling Routines for Time Series
>
> garch contains a GARCH estimation routine together with some of the
> usual methods (print, plot, summary etc.). I plan to further implement a
> simulate.garch() and to extend predict.garch() for multi-step forecasts.
>
> For those who like to play with stock market data, get.hist.quote()
> allows to download yahoo-finance data directly over the www into R time
> series.
>
> Testing, suggestions, and comments are welcome!
>
> Adrian
>
> --
> Adrian Trapletti, Vienna University of Economics and Business
> Administration, Augasse 2-6, A-1090 Vienna, Austria
> Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
> Email: adrian.trapletti@wu-wien.ac.at
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info",
> "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Oct 25 18:34:29 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Mon, 25 Oct 1999 19:34:29 +0200 (MET DST)
Subject: explicit weights=NULL fails in glm,lm (PR#297)
Message-ID: <199910251734.TAA01255@pubhealth.ku.dk>


example(glm)
glm(formula = counts ~ outcome + treatment, family =poisson(),weights=NULL)


This is because model.frame() doesn't treat explicit NULLs the same as
missings. 


version: 
         _                   
platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status   Patched (unreleased)
major    0                   
minor    65.1                
year     1999                
month    October             
day      07                  
language R                   

and

version:
platform sparc-sun-solaris2.7        
arch     sparc                       
os       solaris2.7                  
system   sparc, solaris2.7           
status   Under development (unstable)
major    0                           
minor    90.0                        
year     1999                        
month    October                     
day      23                          
language R                           



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Adrian.Trapletti@wu-wien.ac.at  Tue Oct 26 10:27:52 1999
From: Adrian.Trapletti@wu-wien.ac.at (Adrian Trapletti)
Date: Tue, 26 Oct 1999 09:27:52 +0000
Subject: [Fwd: [R] GARCH models available]
Message-ID: <38157418.CBA980F7@wu-wien.ac.at>

This is a multi-part message in MIME format.
--------------D2161430B449144163620941
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit




--------------D2161430B449144163620941
Content-Type: message/rfc822
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

X-Mozilla-Status2: 00000000
Message-ID: <38157347.F2F6333E@wu-wien.ac.at>
Date: Tue, 26 Oct 1999 09:24:23 +0000
From: Adrian Trapletti <Adrian.Trapletti@wu-wien.ac.at>
X-Mailer: Mozilla 4.5 [en] (X11; I; Linux 2.0.36 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: "Karl M. Syring" <syring@email.com>
Subject: Re: [R] GARCH models available
References: <000101bf1f0b$d7abb900$bfc29e3e@fenris>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

"Karl M. Syring" wrote:

> Adrian,
> could you please use less unixish temporary file name in get.hist.quote(). I
> get some thing like "/tmp/^spc17:54:32" which will fail on Windows because
> /tmp might not exist and because the colon is not an acceptable character in
> file names.

Is that ok if I introduce an additional argument for the directory to save the
temporary file with default /tmp

(..., dir = "/tmp", ...),

and I remove the colon from the file name, e.g. ^spc175432"?

Adrian

--
Adrian Trapletti, Vienna University of Economics and Business
Administration, Augasse 2-6, A-1090 Vienna, Austria
Phone: ++43 1 31336 4561, Fax: ++43 1 31336 708,
Email: adrian.trapletti@wu-wien.ac.at




--------------D2161430B449144163620941--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Oct 26 14:46:21 1999
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 26 Oct 1999 15:46:21 +0200 (MET DST)
Subject: dodgy list operation (PR#298)
Message-ID: <199910261346.PAA10545@pubhealth.ku.dk>

I can generate a segmentation fault as follows, where I would expect a
syntax error:

fred <- as.list(1:10)
lapply(fred, "[[")

platform   sparc-sun-solaris2.5.1
arch       sparc                 
os         solaris2.5.1          
system     sparc, solaris2.5.1   
status                           
status.rev 0                     
major      0                     
minor      64.1                  
year       1999                  
month      May                   
day        8                     
language   R                     

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 26 15:01:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Oct 1999 16:01:55 +0200
Subject: dodgy list operation (PR#298)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Tue, 26 Oct 1999 15:46:21 +0200 (MET DST)"
References: <199910261346.PAA10545@pubhealth.ku.dk>
Message-ID: <x2ln8q8bl8.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I can generate a segmentation fault as follows, where I would expect a
> syntax error:
> 
> fred <- as.list(1:10)
> lapply(fred, "[[")
> 
...
> status.rev 0                     
> major      0                     
> minor      64.1                  
             ^^^^
Ahem. That bug is certainly not present in 0.65.1 or later:

R> fred <- as.list(1:10)
R> lapply(fred, "[[")
Error in FUN(X[[i]], ...) : no index specified

> year       1999                  
> month      May                   
> day        8                     
> language   R                     


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Oct 26 16:14:07 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 26 Oct 1999 16:14:07 +0100 (BST)
Subject: Your Message Sent on Fri, 22 Oct 1999 13:19:12 -0700
Message-ID: <199910261514.QAA28411@toucan.stats.ox.ac.uk>


> Date: Fri, 22 Oct 1999 13:19:12 -0700
> To: r-devel@stat.math.ethz.ch
> From: Eli Ateljevich <eli@ce.berkeley.edu>
> 
> Hi.
> I love R. I have had two compatibility issues in shifting my code over from
> Splus
> 
> cts,rts, its:    are there any plans to incorporate these classes?

No. R is not S-PLUS, and is `not unlike S'. Those are S-PLUS proprietary
extensions to S.  Given how little depends on them, I suggest you
look hard at the R `ts' class (which S does not have) as it does
much of what rts does in S-PLUS.

> regexpr: R does not seem to have any regular expression matching function,
> although that capability seems like it would be fairly simple to add for
> someone who knew what they were doing, since the internal code is already
> there and someone would just have to write a wrapper. If someone explained
> the steps to adding an internal function I would give it a shot.

It does have sub and gsub that will do a lot of what you want, but I do
plan to add a version of regexpr fairly soon, as I miss it too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Oct 26 18:57:17 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 26 Oct 1999 19:57:17 +0200 (MET DST)
Subject: Wrong text() adjustment with (math)expression and "\n" (PR#299)
Message-ID: <199910261757.TAA12834@pubhealth.ku.dk>

This is adapted from  partha_bagchi@hgsi.com 's report on R-help:

     plot(0); title(expression("Bad\n with much much more text")))

gives something like 

      Bad
          with much much more text

(``newline w/o carriage return'') instead of centering both lines such as

               Bad
     with much much more text

which is produced by (just dropping `expression' from the above)

      plot(0); title(("Bad\n with much much more text"))

By the way, the following would need even more attention if one insists on 
correct behavior:

plot(0)
title(expression(paste("Still works with math\n", "with", 
                       frac(1,sum(x[i], i==1,n)), " and more text")))

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct 27 10:36:05 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 27 Oct 1999 11:36:05 +0200 (MET DST)
Subject: [R] par(uin)
In-Reply-To: <D5A7D734C9C5D211B9E30008C7892302DEE76B@exdkba03.novo.dk>
References: <D5A7D734C9C5D211B9E30008C7892302DEE76B@exdkba03.novo.dk>
Message-ID: <14358.51077.874153.394381@gargle.gargle.HOWL>

Thank you Bendix, 
{I hope it's okay if I CC my answer to your private mail to R-devel ..}

>>>>> On Wed, 27 Oct 1999 08:55:28 +0200, BXC@novo.dk (Bendix Carstensen) said:

    >> -----Original Message----- 
    >> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
    >>  Sent: 25. oktober 1999 14:58 To:Gregory R. Warnes 
    >> Cc: R-help@stat.math.ethz.ch Subject: Re: [R]

    MM> par(uin)

    Bendix> (deleted)

    MM> BTW: "uin" gives ``inches per usr unit'' (not the reverse as you
    MM> suggest).
    MM> 
    MM> Should `R' provide "uin" (as read-only) par() ?

RFC:  Should we have it? or is it unnecessary featurism ?

    Bendix> Yes, but call it "ipu" if it returns inches per unit!


No, not "ipu" for two reasons:

1) 
   np <- names(par()); np[substring(np,2,3)=="in"]

currently gives

   [1] "cin" "din" "fin" "pin"

   (and S-plus has "uin" additionally)

And all of these give  
    ``<something> in inches''

For "uin" these would be

    ``user units in inches''
which *is* the same as
    ``inches per usr unit'' 

2) S compatibility..

 We don't want 100% S-compatibility in par() treatment,  
 {not repeating problematic behavior},
 but for things like this,  compatibility is an issue.


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bturlach@stats.adelaide.edu.au  Wed Oct 27 12:03:36 1999
From: bturlach@stats.adelaide.edu.au (Berwin Turlach)
Date: Wed, 27 Oct 1999 20:33:36 +0930 (CST)
Subject: Rdefines.h
Message-ID: <14358.56328.738238.339073@amoeba.stats.adelaide.edu.au>

Hi all,

may I request the following two changes to Rdefines.h (R 0.65.1)?

1.) Change line 106 from
        #define Free(p)        R_chk_free( (void *)(p) )
to
        #define Free(p)        R_chk_free( (void *)(p) ) , p=NULL

2.)  Add after line 79:
#define PROBLEM	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,

a new line 80:
#define PROBLEM	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,
#define MESSAGE	{char R_problem_buf[R_PROBLEM_BUFSIZE];sprintf(R_problem_buf,

The rationale behind both changes is to become more compatible with
S.h from S-PLUS.  

Additionally, I am porting some C code that I developed under S-PLUS
to R and that code has PROBLEM...RECOVER and MESSAGE...WARNING pairs
in it.  So the absence of the MESSAE macro is a small nuisance.

The way Free(p) is currently defined simply leads to R crashing when
the C code is called a second time.  (I am running R on a linux box.)
Below I include a simple .c file that demonstrates the problem and two
sample sessions with R using that code.  Once the code was compiled
with the original Rdefines.h and the other time with the modification
proposed above.

The problem seems to be that I adopted the following style of
programming: (static) global pointers are initialised to NULL and when
free'd they are reset to NULL.  The macro Free() from S-PLUS' S.h
ensures that and the same is done by the macro of Free() that I use if
the C code is not compiled for use with S-PLUS.  If the code is
compiled for linkage with S-PLUS then I check before I allocate space
to a (static) global pointer whether it is NULL.  If not, then I
assume that the C code was called earlier but that the calculations
have been interrupted, say, by the user hitting contol-c.  In that
case, I give a warning that there may be a memory leak, free the
memory to which the pointer points and allocate the memory needed for
this call to C.  Since Free() from Rdefines.h does not reset the
pointer to NULL, the test whether the pointer is NULL fails when the C
code is called the second time and the ensuing call to free() leads to
R crashing.

I am aware that the question how to handle dynamic memory allocation
in code dynamically liked to S-PLUS (and R?) is a bit controversial.
And the programming style just described makes some obvious assumption
about the behaviour of (static) global pointers in dynamically linked
code between calls to that code.  I had no problems with this strategy
with S-PLUS on Solaris and SunOS4.1.x or R on linux (after changing
Rdefines.h).  And from what I read on the s-news are r-* mailing list,
it seems as if it would work on other platforms too.  Or is anybody
aware of a platform on which this strategy might fail?

Cheers,

        Berwin

==================== test.c =========================
=== compiled via:  R SHLIB test.c ===================
#define S_Plus

#if defined(S_Plus)
#include <S.h>
#if defined(SPLUS_VERSION) && SPLUS_VERSION >= 4000
#  include <newredef.h>
#endif
#endif

static longint *p=NULL;

void BT_demo(longint n){

#if defined(S_Plus)
  if( p != NULL ){
    PROBLEM "Possible memory corruption or memory leak.\n  We"
      "advise to restart your S+ session"  WARNING(NULL_ENTRY); 
     Free(p);
  }
#endif
  p = Calloc(n,longint);
  if (p == NULL){
    PROBLEM "Could not allocate memory" ERROR;
  }
  printf("Everything fine\n");
  Free(p);
}

=============== Compiled with original Rdefines.h ==========
R : Copyright 1999, The R Development Core Team
Version 0.65.1 Release (October 07, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type	"?contributors" for a list.

Type	"demo()" for some demos, "help()" for on-line help, or
    	"help.start()" for a HTML browser interface to help.
Type	"q()" to quit R.

> dyn.load("test.so")
> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> .C("BT_demo",5)

Process R segmentation fault (core dumped) at Wed Oct 27 17:42:05 1999


=============== Compiled with modified Rdefines.h ==========
R : Copyright 1999, The R Development Core Team
Version 0.65.1 Release (October 07, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type	"?contributors" for a list.

Type	"demo()" for some demos, "help()" for on-line help, or
    	"help.start()" for a HTML browser interface to help.
Type	"q()" to quit R.

> dyn.load("test.so")
> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> .C("BT_demo",5)
Everything fine
[[1]]
[1] 5

> q()
Save workspace image? [y/n/c]: n

Process R finished at Wed Oct 27 17:43:17 1999

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sret1@cam.ac.uk  Wed Oct 27 17:31:03 1999
From: sret1@cam.ac.uk (sret1@cam.ac.uk)
Date: Wed, 27 Oct 1999 18:31:03 +0200 (MET DST)
Subject: Plotting bug in R (PR#300)
Message-ID: <199910271631.SAA22902@pubhealth.ku.dk>

** Symptom:

  plot(1:1000,1:1000,xlim=c(10,11),type="l")

makes a plot with lots of (nearly) horizontal lines, not just the intended
one from (10,10) to (11,11). So do lots of similar commands where the xlim
or ylim is much shorter than the range of the data.

** R version:
           _                 
platform   i686-unknown-linux
arch       i686              
os         linux             
system     i686, linux       
status     in progress       
status.rev 0                 
major      0                 
minor      62.5              
year       1998              
month      November          
day        2                 
language   R                 

** OS:

Debian Linux 2.1, Linux kernel 2.0.36.

Thanks.

-- 
Stephen Turner    sret1@cam.ac.uk    http://www.statslab.cam.ac.uk/~sret1/
  Statistical Laboratory, 16 Mill Lane, Cambridge CB2 1SB, England
  "Due to the conflict in Kosovo, we will not be showing the movie Wag the
   Dog. Instead, we will show Mortal Kombat: Annihilation." Cable & Wireless


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 27 17:47:16 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Oct 1999 18:47:16 +0200
Subject: Plotting bug in R (PR#300)
In-Reply-To: sret1@cam.ac.uk's message of "Wed, 27 Oct 1999 18:31:03 +0200 (MET DST)"
References: <199910271631.SAA22902@pubhealth.ku.dk>
Message-ID: <x24sfcsqcr.fsf@blueberry.kubism.ku.dk>

sret1@cam.ac.uk writes:

> ** Symptom:
> 
>   plot(1:1000,1:1000,xlim=c(10,11),type="l")
> 
> makes a plot with lots of (nearly) horizontal lines, not just the intended
> one from (10,10) to (11,11). So do lots of similar commands where the xlim
> or ylim is much shorter than the range of the data.
> 
> ** R version:

> status     in progress       
> status.rev 0                 
> major      0                 
> minor      62.5              
> year       1998              
> month      November          
> day        2                 

I.e. in an unreleased version, nearly a full year old...

Doesn't happen nowadays.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Oct 27 18:14:26 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 27 Oct 1999 12:14:26 -0500
Subject: Plotting bug in R (PR#300)
In-Reply-To: Peter Dalgaard BSA's message of "27 Oct 1999 18:47:16 +0200"
References: <199910271631.SAA22902@pubhealth.ku.dk> <x24sfcsqcr.fsf@blueberry.kubism.ku.dk>
Message-ID: <6rg0yw7mkt.fsf@franz.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> sret1@cam.ac.uk writes:
> 
> > ** Symptom:
> > 
> >   plot(1:1000,1:1000,xlim=c(10,11),type="l")
> > 
> > makes a plot with lots of (nearly) horizontal lines, not just the intended
> > one from (10,10) to (11,11). So do lots of similar commands where the xlim
> > or ylim is much shorter than the range of the data.
> > 
> > ** R version:
> 
> > status     in progress       
> > status.rev 0                 
> > major      0                 
> > minor      62.5              
> > year       1998              
> > month      November          
> > day        2                 
> 
> I.e. in an unreleased version, nearly a full year old...

There is an r-base_0.65.1 package for Debian Linux 2.1 on the CRAN
(Comprehensive R Archive Network) sites.  See, for example,
	  http://www.ci.tuwien.ac.at/R/bin/linux/debian/2.1/

Because the update.packages and install.packages functions are
available in this latest version of R, we no longer provide Debian
packages of the contributed packages on CRAN.  You can simply set the
option "CRAN" to the URL of a CRAN archive near you and use these
functions to install or update R packages.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gilb@home.com  Wed Oct 27 21:52:38 1999
From: gilb@home.com (Paul Gilbert)
Date: Wed, 27 Oct 1999 16:52:38 -0400
Subject: install.packages() update.packages()
Message-ID: <38176616.4B959498@home.com>

WOW neat! but...

1/ I tried install.packages("tseries", lib) on a machine which didn't
have a fortran compiler and I happened to notice the error message fly
by, but  install.packages() mostly gave the appearance that everything
suceeded, and the library was available. Is there a way to give a more
obvious report (maybe even remove the library) in the event of failure.
(It does work great on my other  machine with g77.)

2/ Wishlist: Could lib have a default like R_HOME/library (if I own it)
and otherwise something like  ~/Rlibs?

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From qed@ornl.gov  Thu Oct 28 13:19:44 1999
From: qed@ornl.gov (Dennis Wolf)
Date: Thu, 28 Oct 1999 08:19:44 -0400
Subject: Creating gif files using R
Message-ID: <38183F60.79CCD7E7@ornl.gov>

Greetings,
    I am a new user of R but a long time fan of S (Splus) and have
installed R version 0.65.1 on a
Windows NT machine. I would like to save plots as gif files and have
been using savePlot()
with some success. I found that savePlot would not work without
modification, namely
decrementing the device by 1 before calling the internal routine that
does the conversion. Once
that change was made it worked as advertised. I am wondering now whether
I could generate
the gif files in a batch job. I am wanting to do a web-based analysis
that includes a call to
R which would return a gif file for display in a browser. Is this
possible directly with R?

Thanks in advance for any help,
Dennis

--
Dennis A. Wolf
Oak Ridge National Laboratory
POB 2008, Building 6011, MS 6418
Oak Ridge, TN  37831-6418

ph: (423) 574-6326
email: qed@ornl.gov



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Oct 28 13:32:37 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 28 Oct 1999 13:32:37 +0100 (BST)
Subject: Creating gif files using R
Message-ID: <199910281232.NAA16471@toucan.stats.ox.ac.uk>


> Date: Thu, 28 Oct 1999 08:19:44 -0400
> From: Dennis Wolf <qed@ornl.gov>
> To: r-devel@stat.math.ethz.ch
> Subject: Creating gif files using R
> 
> Greetings,
>     I am a new user of R but a long time fan of S (Splus) and have
> installed R version 0.65.1 on a
> Windows NT machine. I would like to save plots as gif files and have
> been using savePlot()
> with some success. I found that savePlot would not work without
> modification, namely
> decrementing the device by 1 before calling the internal routine that
> does the conversion. 

I will look into this. It did work as advertised when it was released,
but something may have changed en route to rw0651 (for example
a correction may have got lost).

> Once
> that change was made it worked as advertised. I am wondering now whether
> I could generate
> the gif files in a batch job. 

You can call the windows() device and then savePlot() from a batch job.

> I am wanting to do a web-based analysis
> that includes a call to
> R which would return a gif file for display in a browser. Is this
> possible directly with R?

>From NEWS for 0.65.1:

    o   Experimental function dev2bitmap() to copy to a bitmap graphics format.

It won't do gif unless your version of ghostscript will, but it will do
png and jpeg.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Thu Oct 28 14:40:47 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Thu, 28 Oct 1999 14:40:47 +0100
Subject: Creating gif files using R
In-Reply-To: <38183F60.79CCD7E7@ornl.gov>; from Dennis Wolf on Thu, Oct 28, 1999 at 08:19:44AM -0400
References: <38183F60.79CCD7E7@ornl.gov>
Message-ID: <19991028144047.63671@hal.stat.unipd.it>

On Thu, Oct 28, 1999 at 08:19:44AM -0400, Dennis Wolf wrote:
> Greetings,
>     I am a new user of R but a long time fan of S (Splus) and have
> installed R version 0.65.1 on a
> Windows NT machine. I would like to save plots as gif files and have
> been using savePlot()
> with some success. I found that savePlot would not work without
> modification, namely
> decrementing the device by 1 before calling the internal routine that
> does the conversion. Once
> that change was made it worked as advertised. I am wondering now whether
> I could generate
> the gif files in a batch job. I am wanting to do a web-based analysis
> that includes a call to
> R which would return a gif file for display in a browser. Is this
> possible directly with R?
> 


  savePlot + Rterm should do the work. 
  However, we will probably withdraw support to direct generation
  of gif to avoid some legal problems. Hence, give a try
  also to 'dev2bitmap' (which however require ghostscript installed).

  guido 

  
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 28 15:33:40 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Oct 1999 16:33:40 +0200
Subject: Wrong text() adjustment with (math)expression and "\n" (PR#299)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 26 Oct 1999 19:57:17 +0200 (MET DST)"
References: <199910261757.TAA12834@pubhealth.ku.dk>
Message-ID: <x2n1t35zcr.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> This is adapted from  partha_bagchi@hgsi.com 's report on R-help:
> 
>      plot(0); title(expression("Bad\n with much much more text")))
> 
> gives something like 
> 
>       Bad
>           with much much more text
> 
> (``newline w/o carriage return'') instead of centering both lines such as
> 
>                Bad
>      with much much more text
> 
> which is produced by (just dropping `expression' from the above)
> 
>       plot(0); title(("Bad\n with much much more text"))
> 
> By the way, the following would need even more attention if one insists on 
> correct behavior:
> 
> plot(0)
> title(expression(paste("Still works with math\n", "with", 
>                        frac(1,sum(x[i], i==1,n)), " and more text")))

I'm not sure I'm buying that this is a bug. To see what is really
going on try something like:

 plot(0);title(expression(mu*"a\nbc"*eta*"ab\nc"*xi))

what happens is that the strings get set *individually* as multiline
text with (left,bottom) adjustment. If you look closer, Martin's
example really gives

      Bad
      with much much more text

We could relatively easily make the adjustment (center,center) I think,
but that isn't very useful, and Partha was expecting the whole thing to
continue on a new line. I think that is rather difficult to achieve
because the relation between the expression as text and as a parse
tree is not linear and things mean different things in different
positions (consider "a\nb"+"a\nb"^"a\nb"). To actually have a formula
title split over several lines, I'd suggest fiddling with mtext().


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Oct 28 17:23:06 1999
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Thu, 28 Oct 1999 18:23:06 +0200 (MET DST)
Subject: expand.grid() (PR#301)
Message-ID: <199910281623.SAA03652@pubhealth.ku.dk>

This is a very minor point and I hesitate to call it a bug, but might I
suggest modifying the nargs=1 return statement in expand.grid() from

    if (nargs == 1)
      return(args[[1]])        

to 

    if (nargs == 1)
      return(data.frame(args))

so that the result of expand.grid is always a data frame (as indicated in
the help file).  This also preserves the variable name if it exists.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Oct 29 15:45:34 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 29 Oct 1999 16:45:34 +0200 (MET DST)
Subject: expand.grid() (PR#301)
Message-ID: <199910291445.QAA13256@pubhealth.ku.dk>

>>>>> "JonR" == J C Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> This is a very minor point and I hesitate to call it a bug, but
    JonR> might I suggest modifying the nargs=1 return statement in
    JonR> expand.grid() from

    JonR>     if (nargs == 1) return(args[[1]])

    JonR> to

    JonR>     if (nargs == 1) return(data.frame(args))

    JonR> so that the result of expand.grid is always a data frame (as
    JonR> indicated in the help file).  This also preserves the variable
    JonR> name if it exists.

Well, that is not quite true,

      expand.grid(NULL)  

gives NULL  without your change 
but gives an error with your change...
since
	data.frame(NULL)  
fails.

The following (only this one of all 4 possibilities  as/no-as  x NULL/list() )
would work

> as.data.frame(list())
NULL data frame with 0 rows

---
Better patch ? (and what does S do ?)

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 29 16:38:30 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 29 Oct 1999 16:38:30 +0100 (BST)
Subject: expand.grid() (PR#301)
In-Reply-To: <199910291445.QAA13256@pubhealth.ku.dk>
Message-ID: <Pine.GSO.3.96.991029162251.1534F-100000@laplace>

On Fri, 29 Oct 1999 maechler@stat.math.ethz.ch wrote:

> Well, that is not quite true,
> 
>       expand.grid(NULL)  
> 
> gives NULL  without your change 
> but gives an error with your change...
> since
> 	data.frame(NULL)  
> fails.
> 
> The following (only this one of all 4 possibilities  as/no-as  x NULL/list() )
> would work
> 
> > as.data.frame(list())
> NULL data frame with 0 rows
> 
> ---
> Better patch ? (and what does S do ?)

Hmm ... Splus returns a data frame for a single variables or for a NULL
variable, the latter looking a bit strange:

> expand.grid(factor(c("L", "H")))
  Var1 
1    L
2    H
> expand.grid(NULL)                   
  Var1 
1   NA
0   NA

I think your patch is a good one.  So you would suggest

	if (nargs == 1)
	  return(if (is.null(args[[1]])) as.data.frame(list()) else
	    data.frame(args))

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thoffman@zappa.sax.de  Sat Oct 30 12:33:04 1999
From: thoffman@zappa.sax.de (thoffman@zappa.sax.de)
Date: Sat, 30 Oct 1999 13:33:04 +0200 (MET DST)
Subject: modreg buggy: uninitialized variable in sinerp.f (PR#302)
Message-ID: <199910301133.NAA16105@pubhealth.ku.dk>

I had some strange problems with modreg: sometimes functions
hang in an infinite loop, consuming 100% CPU time. Especially
when update()ing models (as in example(ppr)) with sm.method="gcv"
I found that if I repeated the call after I did interrupt the hang,
it ran to completion.

After some lengthy debugging I could track down this problem:

sinerp.f, line 22--24 read:

      wjm3(1)=0d0
      wjm3(2)=0d0
      wjm3(1)=0d0

This leaves wjm3(3) uninitialized. So after changing these lines to

      wjm3(1)=0d0
      wjm3(2)=0d0
      wjm3(3)=0d0

the bug was gone.

Thomas Hoffmann.

--please do not edit the information below--

Version:
 platform = i386-pc-os2_emx
 arch = i386
 os = os2_emx
 system = i386, os2_emx
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Oct 30 19:00:05 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 30 Oct 1999 19:00:05 +0100 (BST)
Subject: modreg buggy: uninitialized variable in sinerp.f (PR#302)
In-Reply-To: <199910301133.NAA16105@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.9910301855240.11052-100000@auk.stats>

On Sat, 30 Oct 1999 thoffman@zappa.sax.de wrote:

> I had some strange problems with modreg: sometimes functions
> hang in an infinite loop, consuming 100% CPU time. Especially
> when update()ing models (as in example(ppr)) with sm.method="gcv"
> I found that if I repeated the call after I did interrupt the hang,
> it ran to completion.
> 
> After some lengthy debugging I could track down this problem:
> 
> sinerp.f, line 22--24 read:
> 
>       wjm3(1)=0d0
>       wjm3(2)=0d0
>       wjm3(1)=0d0
> 
> This leaves wjm3(3) uninitialized. So after changing these lines to
> 
>       wjm3(1)=0d0
>       wjm3(2)=0d0
>       wjm3(3)=0d0
> 
> the bug was gone.

Thank you very much!  We were aware of occasional problems (but only on
gcc), but had not managed to track them down. In all cases using
-ffloat-store had solved the problem.

I have committed this change for the next release.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Sun Oct 31 00:29:06 1999
From: ntakebay@bio.indiana.edu (ntakebay@bio.indiana.edu)
Date: Sun, 31 Oct 1999 01:29:06 +0200 (MET DST)
Subject: read.table problem on Linux/Alpha (seg faults caused by isspace(R_EOF)) (PR#303)
Message-ID: <199910302329.BAA17382@pubhealth.ku.dk>

Full_Name: Naoki Takebayashi
Version: 0.65.1
OS: Linux/Alpha
Submission from: (NULL) (129.79.224.171)


When I was reading a file with read.table("junk.data"), it seg-faulted.
I found out that it seg-faulted when the last line of data file didn't
have the newline char.  For example, file like this:

23	3
31	2
24	1<EOF>


Here is a fix.

--- R-0.65.1/src/main/scan.c.orig       Wed Sep 29 11:11:45 1999
+++ R-0.65.1/src/main/scan.c    Fri Oct 29 17:34:22 1999
@@ -124,7 +124,7 @@
                if (bufp >= &buffer[MAXELTSIZE - 2])
                    continue;
                *bufp++ = c;
-           } while (!isspace(c = scanchar()) && c != R_EOF);
+           } while ((c = scanchar()) != R_EOF && !isspace(c));
            while (c==' ' || c=='\t')
                c=scanchar();
            if (c=='\n' || c=='\r' || c==R_EOF)
@@ -647,7 +647,7 @@
                }
            }
            else {
-               while (!isspace(c=scanchar()) && c != R_EOF)
+               while ( (c=scanchar()) != R_EOF && !isspace(c))
                    ;
                if (c==R_EOF) c='\n';
                unscanchar(c);



When the scanchar() returns R_EOF (=65535 #defined in src/include/Defn.h),
isspace(R_EOF) seq-faults.  By switching the order of two conditions, I could
get around with it.  I just made a test to see the behavior of isspace() by
giving
isspace(65535).  It seg-faults in both Linux/alpha and i386 (is it supposed
to??).
However, R on i386 doesn't seg-faults when the last line does not have newline.

Naoki


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Oct 31 12:30:01 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Oct 1999 13:30:01 +0100
Subject: read.table problem on Linux/Alpha (seg faults caused by isspace(R_EOF)) (PR#303)
In-Reply-To: ntakebay@bio.indiana.edu's message of "Sun, 31 Oct 1999 01:29:06 +0200 (MET DST)"
References: <199910302329.BAA17382@pubhealth.ku.dk>
Message-ID: <x24sf7lnli.fsf@blueberry.kubism.ku.dk>

ntakebay@bio.indiana.edu writes:

> Here is a fix.
> 
> --- R-0.65.1/src/main/scan.c.orig       Wed Sep 29 11:11:45 1999
> +++ R-0.65.1/src/main/scan.c    Fri Oct 29 17:34:22 1999
> @@ -124,7 +124,7 @@
>                 if (bufp >= &buffer[MAXELTSIZE - 2])
>                     continue;
>                 *bufp++ = c;
> -           } while (!isspace(c = scanchar()) && c != R_EOF);
> +           } while ((c = scanchar()) != R_EOF && !isspace(c));
....
> When the scanchar() returns R_EOF (=65535 #defined in src/include/Defn.h),
> isspace(R_EOF) seq-faults.  By switching the order of two conditions, I could
> get around with it.  I just made a test to see the behavior of isspace() by
> giving
> isspace(65535).  It seg-faults in both Linux/alpha and i386 (is it supposed
> to??).
> However, R on i386 doesn't seg-faults when the last line does not have newline.

Thanks. However, perhaps a better fix would be to change R_EOF? All
the isxxx macros/functions work by indexing an array designed to take
values between -128 and +255, so passing 65535 is playing with fire,
and we have many more instances littered all over the code, where I
don't feel absolutely sure that R_EOF couldn't sneak in.

Any one remember why R_EOF is different from the customary EOF of -1??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 31 16:36:33 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 31 Oct 1999 16:36:33 +0000 (GMT)
Subject: diag
Message-ID: <Pine.GSO.4.05.9910311620090.12623-100000@auk.stats>

A change to diag() between 0.65.0 and 0.65.1 which seems undocumented in
the logs (apparently revision 1.3.2.1, `diag names') introduced

    if (is.array(x)) 
        stop("first argument is array, but not matrix.")

which has broken the code in rpart. This looks wrong to me, as diag used to
cope happily with a single-dimensional array. Such things occur quite
often as the output from table().

Is there any reason not to make this

    if (length(dim(x)) > 2)

which seems the intention?  Martin (if I have decoded the cvs diffs
correctly)?

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Sun Oct 31 17:12:38 1999
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Sun, 31 Oct 1999 12:12:38 -0500
Subject: diag
In-Reply-To: <Pine.GSO.4.05.9910311620090.12623-100000@auk.stats>; from Prof Brian D Ripley on Sun, Oct 31, 1999 at 04:36:33PM +0000
References: <Pine.GSO.4.05.9910311620090.12623-100000@auk.stats>
Message-ID: <19991031121238.A10461@jimmy.harvard.edu>

On Sun, Oct 31, 1999 at 04:36:33PM +0000, Prof Brian D Ripley wrote:
> A change to diag() between 0.65.0 and 0.65.1 which seems undocumented in
> the logs (apparently revision 1.3.2.1, `diag names') introduced
> 
>     if (is.array(x)) 
>         stop("first argument is array, but not matrix.")
> 
> which has broken the code in rpart. This looks wrong to me, as diag used to
> cope happily with a single-dimensional array. Such things occur quite
> often as the output from table().
> 
> Is there any reason not to make this
> 
>     if (length(dim(x)) > 2)
> 
> which seems the intention?  Martin (if I have decoded the cvs diffs
> correctly)?
> 
  I think it was me. I think that this is fine (the old version
complained about matrices at this point and they should be allowed).
  It was a bug report off of R-help but I can't recall who...
robert
-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              voice: (617) 632-5045                     |
| Senior Lecturer               fax:   (617) 632-2444                     |
| University of Auckland	email1: rgentlem@jimmy.harvard.edu        |
| on leave at:                                                            |
| Dana-Farber Cancer Institute  email2: rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Sun Oct 31 23:20:56 1999
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Mon, 1 Nov 1999 00:20:56 +0100 (MET)
Subject: bugs in scan() (PR#304)
Message-ID: <199910312320.AAA20291@pubhealth.ku.dk>

System: Sun Solaris 2.5.1

There seem to be at least 2 bugs associated with the use of flush=T in
the scan function.

1) If flush=T is used, scan() will only ask for 1 line from standard input.
Repeat by:
>  R

R : Copyright 1999, The R Development Core Team
Version 0.65.1 Release (October 07, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> scan(what=list(c1=0,c2=0,c3=0), flush=T)
1: 1 2 3 4
Read 1 lines
$c1
[1] 1

$c2
[1] 2

$c3
[1] 3

> 
1a) If the 'correct' number of fields are supplied, then two lines are
read, but only 1 is 'registered':
> scan( what=list(c1=0,c2=0,c3=0),flush=T)
1: 1 2 3
1: 4 5 6
Read 1 lines
$c1
[1] 1

$c2
[1] 2

$c3
[1] 3

> 

2) When reading from a file, the first line is processed correctly, but
the second and subsequent lines do not have the extraneous data flushed
correctly.  Repeat by:
> write(t(matrix(1:15, ncol=5, byrow=T)), "tmp")
> system("cat tmp")
1 2 3 4 5
6 7 8 9 10
11 12 13 14 15
> scan("tmp", what=list(c1=0,c2=0,c3=0), flush=T)
Read 4 lines
$c1
[1]  1  6 10  3

$c2
[1]  2  7 11 14

$c3
[1]  3  8 12 15

Warning message:
line 3 did not have 3 elements
> 
Notice that on lines 2 and 3 the first character of the "flushable
data" (after the field separator) does get flushed, but then scanning
continues.  Pehaps an end-of-line indication is not reset?

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lopi8954@moscowoffice.com  Thu Oct  7 03:37:26 1999
From: lopi8954@moscowoffice.com (lopi8954@moscowoffice.com)
Date: Wed, 06 Oct 1999 22:37:26 -0400
Subject: [Rd] Win a Palm Pilot for visiting our website!!!!                         24621
Message-ID: <00004b363164$00004b9f$0000602d@mail2.wuzzlenorple.com>

<html>

<body>


<p align=3D"center"><a href=3D"http://dis39887.checkchange100.com/palm1.ht=
m"><img border=3D"0" src=3D"http://pic3847.checkchange100.com/images/palm_=
ad4.gif" width=3D"197" height=3D"153"></a></p>


</body>

</html>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark7853@flashmail.com  Mon Oct 11 10:55:18 1999
From: mark7853@flashmail.com (mark7853@flashmail.com)
Date: Mon, 11 Oct 1999 05:55:18 -0400
Subject: [Rd] Win a Palm Pilot!!                         26606
Message-ID: <0000384f0ff0$00004d5a$000067ee@mail3.wuzzlenorple.com>

<html>

<body>


<p align=3D"center"><a href=3D"http://dis39887.checkchange100.com/palm1.ht=
m"><img border=3D"0" src=3D"http://pic3847.checkchange100.com/images/palm_=
ad4.gif" width=3D"197" height=3D"153"></a></p>


</body>

</html>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From daan6354@acmemail.net  Sat Oct 16 07:57:24 1999
From: daan6354@acmemail.net (daan6354@acmemail.net)
Date: Sat, 16 Oct 1999 02:57:24 -0400
Subject: [Rd] Win a Palm Pilot!!!                         26204
Message-ID: <00003edf5660$0000030d$0000665c@mail3.wuzzlenorple.com>

<html>

<body>


<p align=3D"center"><a href=3D"http://dis29jfndin.beebeatwo.com/palm1.htm"=
><img border=3D"0" src=3D"http://fdfn32ie9j.beebeatwo.com/images/palm_ad4.=
gif" width=3D"197" height=3D"153"></a></p>


</body>

</html>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

