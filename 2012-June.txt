From ronggui.huang at gmail.com  Fri Jun  1 11:10:49 2012
From: ronggui.huang at gmail.com (Wincent)
Date: Fri, 1 Jun 2012 17:10:49 +0800
Subject: [Rd] possible bug in "R Editor"
In-Reply-To: <4FC7A155.1090504@stats.ox.ac.uk>
References: <CANQBBMuPcZKJHs2+UtSQtNbq9gHXzEg28O7+=TuxHUYOzmPobQ@mail.gmail.com>
	<4FC7A155.1090504@stats.ox.ac.uk>
Message-ID: <CANQBBMsrmEgVtivDV5rdNN27RN4=Nai8AJ7108WrPH2xUbp8tw@mail.gmail.com>

Dear Professor Ripley, I understand that it is not a real reproducible
example, which may require a Chinese OS. I guess that problem is the
routine does not consider the encoding issue by default. If I open an
existing file and save it rather than save a new file, the editor can
handle it appropriately even the file path contains wide characters.

Best
Ronggui

On 1 June 2012 00:50, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> On 31/05/2012 07:04, Wincent wrote:
>>
>> Dear all,
>>
>> I clicked "File-New Script" to open a R Editor, typed some commands in
>> it and then saved it to a file. If the location where I tried to save
>> the script contained Chinese Character, R Editor complained,
>>
>> Error: invalid input 'E:\Some.Chinese.Characters\new_file.R' in
>> 'utf8towcs'
>>
>>
>>> sessionInfo()
>>
>> R version 2.15.0 (2012-03-30)
>> Platform: i386-pc-mingw32/i386 (32-bit)
>>
>> locale:
>> [1] LC_COLLATE=Chinese (Simplified)_People's Republic of China.936
>> [2] LC_CTYPE=Chinese (Simplified)_People's Republic of China.936
>> [3] LC_MONETARY=Chinese (Simplified)_People's Republic of China.936
>> [4] LC_NUMERIC=C
>> [5] LC_TIME=Chinese (Simplified)_People's Republic of China.936
>>
>> attached base packages:
>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>
>> loaded via a namespace (and not attached):
>> [1] tools_2.15.0
>
>
> It is not a bug in the editor. It may be a bug in iconv or other parts of
> the handling of wide characters in the save routine. ?I can see how the code
> can be simplified, but we really need to be able to reproduce this, and
> surely that was not the real example. ?(One of the problems is that the
> editor title has to be in the native encoding, so this has to be done in a
> Chinese version of Windows.)
>
> --
> Brian D. Ripley, ? ? ? ? ? ? ? ? ?ripley at stats.ox.ac.uk
> Professor of Applied Statistics, ?http://www.stats.ox.ac.uk/~ripley/
> University of Oxford, ? ? ? ? ? ? Tel: ?+44 1865 272861 (self)
> 1 South Parks Road, ? ? ? ? ? ? ? ? ? ? +44 1865 272866 (PA)
> Oxford OX1 3TG, UK ? ? ? ? ? ? ? ?Fax: ?+44 1865 272595
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel



-- 
Wincent Ronggui HUANG
Sociology Department of Fudan University
PhD of City University of Hong Kong
http://homepage.fudan.edu.cn/rghuang/cv/


From nick.sabbe at ugent.be  Fri Jun  1 11:19:49 2012
From: nick.sabbe at ugent.be (Nick Sabbe)
Date: Fri, 1 Jun 2012 11:19:49 +0200
Subject: [Rd] Dependencies on recommended packages
Message-ID: <027001cd3fd7$b179a3f0$146cebd0$@ugent.be>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120601/a1f1f237/attachment.pl>

From ligges at statistik.tu-dortmund.de  Fri Jun  1 12:10:17 2012
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 01 Jun 2012 12:10:17 +0200
Subject: [Rd] Dependencies on recommended packages
In-Reply-To: <027001cd3fd7$b179a3f0$146cebd0$@ugent.be>
References: <027001cd3fd7$b179a3f0$146cebd0$@ugent.be>
Message-ID: <4FC89509.70000@statistik.tu-dortmund.de>

Does it still happen with R-2.15.0 patched? Maybe an old version of 
Matrix in a library that is first in the search path? Unfortunately 
glmnet does not import from Matrix and search path issues are likely to 
happen. This needs to be sorted out on R-forge , I think.

Best,
Uwe Ligges




On 01.06.2012 11:19, Nick Sabbe wrote:
> Dear all,
>
>
>
> I've recently had some issues getting my package to successfully "check".
>
> This was on R-Forge, so it's not obvious for me to provide SessionInfo or
> the likes (if necessary, Stefan can chime in?).
>
>
>
> After some research (mainly by Stefan Theussler, driving force behind
> R-Forge), this turned out to be the root cause:
>
> On R-Forge, the version of R installed was the latest release (2.15.0),
> which includes Matrix 1.0-5 as a recommended package.
>
>
>
> My own package depends upon glmnet, which itself depends upon Matrix 1.0-6.
>
> (Note: to avoid issues with that, as a test I've also included an explicit
> dependency upon Matrix 1.0-6 in my own package, but this didn't change
> anything).
>
>
>
> During build and most of R CMD check (with the -as-cran flag), everything
> worked out fine (which suggests to me that among others, Matrix 1.0-6 is
> present and can be loaded, since one of the checks is that the package and
> all its dependencies can be loaded), but while running the examples, somehow
> loading of the package failed, with an error message that Matrix 1.0-6 could
> not be loaded. Here's the relevant part of the log:
>
>> library('addendum')
>
> Loading required package: glmnet
>
> Error: package 'Matrix' 1.0-5 was found, but>= 1.0.6 is required by
> 'glmnet'
>
> Execution halted
>
> Run time: 92.43 seconds.
>
>
>
> There are some issues with this comparison, but in the Windows build/check
> chain on R-Forge, R2.15.0 patched was installed (including Matrix 1.0-6) and
> the build _was_ successful.
>
>
>
> Stefan suspected this to be an artifact of Matrix being a recommended
> package (so R CMD check would somehow prefer the version installed with R),
> and to a certain degree the successful build/check with R patched confirms
> this suspicion.
>
> I've neither read up on this nor tried other options, but if this is indeed
> the case then I suggest to alter this behaviour. Unless, of course, there is
> any reason to treat "recommended" packages any different wrt versioning and
> R CMD check.
>
>
>
>
>
> I suspect other people may run into this sooner or later.
>
> If not or if my/our analysis is wrong/incomplete I will gladly stand
> corrected.
>
> I'll leave it to you gurus to judge.
>
>
>
> Thanks for R! (And another shout out to Stefan, who diligently helped me)
>
>
>
>
>
> Nick Sabbe
>
> --
>
> ping: nick.sabbe at ugent.be
>
> link:<http://biomath.ugent.be/>  http://biomath.ugent.be
>
> wink: A1.056, Coupure Links 653, 9000 Gent
>
> ring: 09/264.59.36
>
>
>
> -- Do Not Disapprove
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From j.maspons at creaf.uab.cat  Fri Jun  1 19:38:32 2012
From: j.maspons at creaf.uab.cat (Joan Maspons)
Date: Fri, 1 Jun 2012 19:38:32 +0200
Subject: [Rd] Patch to add Beta binomial distribution. Mentor needed!
In-Reply-To: <loom.20120522T190546-850@post.gmane.org>
References: <CANF72pNnfRHOBr_4mvwsk1o1J52hz6LPLEQP6sMjkWOCYX5cOA@mail.gmail.com>
	<A1056BE4-973C-4883-864C-AC1DC800CF7F@gmail.com>
	<loom.20120522T190546-850@post.gmane.org>
Message-ID: <CANF72pPh7A5CaSSMNLm05ue_T_pkz_iyRuwpBjoJAGEHrmqphw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120601/ef2a5962/attachment.pl>

From tim.triche at gmail.com  Fri Jun  1 19:44:17 2012
From: tim.triche at gmail.com (Tim Triche, Jr.)
Date: Fri, 1 Jun 2012 10:44:17 -0700
Subject: [Rd] Patch to add Beta binomial distribution. Mentor needed!
In-Reply-To: <CANF72pPh7A5CaSSMNLm05ue_T_pkz_iyRuwpBjoJAGEHrmqphw@mail.gmail.com>
References: <CANF72pNnfRHOBr_4mvwsk1o1J52hz6LPLEQP6sMjkWOCYX5cOA@mail.gmail.com>
	<A1056BE4-973C-4883-864C-AC1DC800CF7F@gmail.com>
	<loom.20120522T190546-850@post.gmane.org>
	<CANF72pPh7A5CaSSMNLm05ue_T_pkz_iyRuwpBjoJAGEHrmqphw@mail.gmail.com>
Message-ID: <CAC+N9BVeicffs1Tspm2LKX7nNA1CctJBtKTyGaK7Sbez4qiLqw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120601/bfdd80f0/attachment.pl>

From j.maspons at creaf.uab.cat  Fri Jun  1 20:36:33 2012
From: j.maspons at creaf.uab.cat (Joan Maspons)
Date: Fri, 1 Jun 2012 20:36:33 +0200
Subject: [Rd] Patch to add Beta binomial distribution. Mentor needed!
In-Reply-To: <CAC+N9BVeicffs1Tspm2LKX7nNA1CctJBtKTyGaK7Sbez4qiLqw@mail.gmail.com>
References: <CANF72pNnfRHOBr_4mvwsk1o1J52hz6LPLEQP6sMjkWOCYX5cOA@mail.gmail.com>
	<A1056BE4-973C-4883-864C-AC1DC800CF7F@gmail.com>
	<CANF72pPh7A5CaSSMNLm05ue_T_pkz_iyRuwpBjoJAGEHrmqphw@mail.gmail.com>
	<CAC+N9BVeicffs1Tspm2LKX7nNA1CctJBtKTyGaK7Sbez4qiLqw@mail.gmail.com>
Message-ID: <CANF72pNj56U8qgBcppobPTiyKLzTVu6CRfa9DxSUNLJJmeY7DA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120601/2dfa1597/attachment.pl>

From pauljohn32 at gmail.com  Fri Jun  1 20:53:41 2012
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Fri, 1 Jun 2012 13:53:41 -0500
Subject: [Rd] Requests for vignette clarification (re: Writing R Extensions)
Message-ID: <CAErODj90VWY19eWVtuVeLL8JpN0QxrKvWA+N5CQg-LcdALVsWQ@mail.gmail.com>

I apologize that these questions are stupid and literal.

I write to ask for clarification of comments in the R extensions
manual about vignettes.  I'm not great at LaTeX, but I'm not a
complete novice either, and some of the comments are puzzling to me.

1. I'm stumbling over this line:

"Make sure all files needed to run the R code in the vignette (data
sets, ...) are accessible by either placing them in the inst/doc
hierarchy of the source package or by using calls to system.file()."

Where it says "inst/doc", can I interpret it to mean "vignettes"?  The
vignette files are under vignettes. Why wouldn't those other files be
in there? Or does that mean I'm supposed to copy the style and bib
files from the vignettes folder to the inst/doc folder?  Or none of
the above :)

2. I'm also curious about the implications of the parenthesized
section of this comment:

"By default R CMD build will run Sweave on all files in Sweave format
in vignettes, or if that does not exist, inst/doc (but not in
sub-directories)."

At first I though that meant it will search vignettes and
subdirectories under vignettes, or it will look under inst/doc, but no
subdirectories under inst/doc.  So I created vignettes in
subdirectories under vignettes and they are ignored by the build
process, so that was obviously wrong.  For clarification, it would
help me if the manual said

"By default R CMD build will run Sweave on all files in Sweave format
in vignettes (but not in sub-directories), or if that does not exist,
inst/doc ."

In this list I've read several questions/complaints from people who
don't want their vignettes rebuild during the package check or build
process, and I wondered if there is a benefit to having vignettes in
subdirectories.   Could inclusion of troublesome vignettes in
subdirectories be a way that people can circumvent the rebuilding and
re-checking of vignettes during build, check, or install?  If I build
my vignettes manually and copy the pdf output over to inst/doc, will
those pdf files be "legitimate" vignette files as far as CRAN is
concerned?  The writeup in R Extensions is a little bit confusing on
that point.

"By including the PDF version in the package sources it is not
necessary that the vignette PDFs can be re-built at install time,
i.e., the package author can use private R packages, screen snapshots
and LaTeX extensions which are only available on his machine."

Its just confusing, that's all I can say about it.

I could learn how to do this from some examples of packages that
manage vignettes the "right way", if you could tell me which ones are
"right" :) I'd like to see one that has a Makefile, uses a bib file,
and, if possible, one that imports a pdf file from elsewhere.  If
there is one that uses subdirectories under vignettes to keep separate
 the content of vignettes, that would be extra helpful.

I'm eager to do this in the correct way, just point me at some that are proper.

pj

-- 
Paul E. Johnson
Professor, Political Science ? ?Assoc. Director
1541 Lilac Lane, Room 504 ? ? Center for Research Methods
University of Kansas ? ? ? ? ? ? ? University of Kansas
http://pj.freefaculty.org ? ? ? ? ? ?http://quant.ku.edu


From pgilbert902 at gmail.com  Sun Jun  3 21:02:57 2012
From: pgilbert902 at gmail.com (Paul Gilbert)
Date: Sun, 03 Jun 2012 15:02:57 -0400
Subject: [Rd] Requests for vignette clarification (re: Writing R
	Extensions)
In-Reply-To: <CAErODj90VWY19eWVtuVeLL8JpN0QxrKvWA+N5CQg-LcdALVsWQ@mail.gmail.com>
References: <CAErODj90VWY19eWVtuVeLL8JpN0QxrKvWA+N5CQg-LcdALVsWQ@mail.gmail.com>
Message-ID: <4FCBB4E1.2020707@gmail.com>

I'll make a guess at some parts of this.

On 12-06-01 02:53 PM, Paul Johnson wrote:
> I apologize that these questions are stupid and literal.
>
> I write to ask for clarification of comments in the R extensions
> manual about vignettes.  I'm not great at LaTeX, but I'm not a
> complete novice either, and some of the comments are puzzling to me.
>
> 1. I'm stumbling over this line:
>
> "Make sure all files needed to run the R code in the vignette (data
> sets, ...) are accessible by either placing them in the inst/doc
> hierarchy of the source package or by using calls to system.file()."
>
> Where it says "inst/doc", can I interpret it to mean "vignettes"?  The
> vignette files are under vignettes. Why wouldn't those other files be
> in there? Or does that mean I'm supposed to copy the style and bib
> files from the vignettes folder to the inst/doc folder?  Or none of
> the above :)

I think the idea is that a user looking at an installed version of the 
package will be able to see things that are in the doc/ directory of the 
installed package. This automatically includes the source files (eg 
*.Stex) from vignettes/ and also the generated *.pdf and the *.R files 
stripped from the *.Stex files. If you want them to have access to other 
files then you should put those somewhere so they get installed, such as 
in the source package /inst/doc directory so they get put in the doc/ 
directory of the installed package. That should probably include 
anything else that is important to reproduce the results in the 
vignette, but I do not count the .bib file in that list (so I have it in 
vignettes/ and users would need to look at the package source to find it).
>
> 2. I'm also curious about the implications of the parenthesized
> section of this comment:
>
> "By default R CMD build will run Sweave on all files in Sweave format
> in vignettes, or if that does not exist, inst/doc (but not in
> sub-directories)."
>
> At first I though that meant it will search vignettes and
> subdirectories under vignettes, or it will look under inst/doc, but no
> subdirectories under inst/doc.  So I created vignettes in
> subdirectories under vignettes and they are ignored by the build
> process, so that was obviously wrong.  For clarification, it would
> help me if the manual said
>
> "By default R CMD build will run Sweave on all files in Sweave format
> in vignettes (but not in sub-directories), or if that does not exist,
> inst/doc ."
>
> In this list I've read several questions/complaints from people who
> don't want their vignettes rebuild during the package check or build
> process, and I wondered if there is a benefit to having vignettes in
> subdirectories.   Could inclusion of troublesome vignettes in
> subdirectories be a way that people can circumvent the rebuilding and
> re-checking of vignettes during build, check, or install?  If I build
> my vignettes manually and copy the pdf output over to inst/doc, will
> those pdf files be "legitimate" vignette files as far as CRAN is
> concerned?  The writeup in R Extensions is a little bit confusing on
> that point.
>
> "By including the PDF version in the package sources it is not
> necessary that the vignette PDFs can be re-built at install time,
> i.e., the package author can use private R packages, screen snapshots
> and LaTeX extensions which are only available on his machine."
>
> Its just confusing, that's all I can say about it.

There was at least one earlier R-devel discussion of this, in which I 
contributed an incorrect understanding, but was generally straightened 
out by Uwe. I hope I have a correct understanding now.

You can put a pdf file in inst/doc and specify "BuildVignettes: false" 
in the DESCRIPTION file, in which case the already constructed pdf from 
inst/doc will be used. The purpose of this is to allow vignettes which 
would not be completely constructed from sources, for example, because 
certain data or other resources may not be generally available. However, 
R CMD check will still try to parse the Sweave file and run the R code, 
and fail if it does not run. So, when the resources to build the 
vignette are not generally available this does require some special 
attention, often with try(), in the code for your vignette.

It is possible to claim special exemption for a vignette. If the reasons 
seem valid then that package will be put on a special list which allows 
skipping the vignette when the package is tested for CRAN. The reason 
for somewhat tight control on this by CRAN maintainers is that the 
vignettes have proven to be a good check on problems with packages, so 
skipping them will reduce quality, and so CRAN maintainers do not want 
to provide an easy option to skip this check.

There have been a variety of mechanism suggested on R-devel for 
subverting the CRAN checks of the vignette code. My interpretation is 
that these should generally be considered contrary to the spirit of what 
CRAN maintainers are attempting to do, and package maintainers should 
expect continuing problems as the loopholes are removed.

Paul Gilbert

>
> I could learn how to do this from some examples of packages that
> manage vignettes the "right way", if you could tell me which ones are
> "right" :) I'd like to see one that has a Makefile, uses a bib file,
> and, if possible, one that imports a pdf file from elsewhere.  If
> there is one that uses subdirectories under vignettes to keep separate
>   the content of vignettes, that would be extra helpful.
>
> I'm eager to do this in the correct way, just point me at some that are proper.
>
> pj
>


From pauljohn32 at gmail.com  Mon Jun  4 15:29:33 2012
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Mon, 4 Jun 2012 08:29:33 -0500
Subject: [Rd] Requests for vignette clarification (re: Writing R
	Extensions)
In-Reply-To: <4FCBB4E1.2020707@gmail.com>
References: <CAErODj90VWY19eWVtuVeLL8JpN0QxrKvWA+N5CQg-LcdALVsWQ@mail.gmail.com>
	<4FCBB4E1.2020707@gmail.com>
Message-ID: <CAErODj8uTv3khu1ebMphMPBdGhezQ58LonpBL+Q5Xeiq=_Oc2A@mail.gmail.com>

On Sun, Jun 3, 2012 at 2:02 PM, Paul Gilbert <pgilbert902 at gmail.com> wrote:
> I'll make a guess at some parts of this.
>
>
> On 12-06-01 02:53 PM, Paul Johnson wrote:
>>
>> I apologize that these questions are stupid and literal.
>>
>> I write to ask for clarification of comments in the R extensions
>> manual about vignettes. ?I'm not great at LaTeX, but I'm not a
>> complete novice either, and some of the comments are puzzling to me.
>>
>> 1. I'm stumbling over this line:
>>
>> "Make sure all files needed to run the R code in the vignette (data
>> sets, ...) are accessible by either placing them in the inst/doc
>> hierarchy of the source package or by using calls to system.file()."
>>
>> Where it says "inst/doc", can I interpret it to mean "vignettes"? ?The
>> vignette files are under vignettes. Why wouldn't those other files be
>> in there? Or does that mean I'm supposed to copy the style and bib
>> files from the vignettes folder to the inst/doc folder? ?Or none of
>> the above :)
>
>
> I think the idea is that a user looking at an installed version of the
> package will be able to see things that are in the doc/ directory of the
> installed package. This automatically includes the source files (eg *.Stex)
> from vignettes/ and also the generated *.pdf and the *.R files stripped from
> the *.Stex files. If you want them to have access to other files then you
> should put those somewhere so they get installed, such as in the source
> package /inst/doc directory so they get put in the doc/ directory of the
> installed package. That should probably include anything else that is
> important to reproduce the results in the vignette, but I do not count the
> .bib file in that list (so I have it in vignettes/ and users would need to
> look at the package source to find it).
>
>>
>> 2. I'm also curious about the implications of the parenthesized
>> section of this comment:
>>
>> "By default R CMD build will run Sweave on all files in Sweave format
>> in vignettes, or if that does not exist, inst/doc (but not in
>> sub-directories)."
>>
>> At first I though that meant it will search vignettes and
>> subdirectories under vignettes, or it will look under inst/doc, but no
>> subdirectories under inst/doc. ?So I created vignettes in
>> subdirectories under vignettes and they are ignored by the build
>> process, so that was obviously wrong. ?For clarification, it would
>> help me if the manual said
>>
>> "By default R CMD build will run Sweave on all files in Sweave format
>> in vignettes (but not in sub-directories), or if that does not exist,
>> inst/doc ."
>>
>> In this list I've read several questions/complaints from people who
>> don't want their vignettes rebuild during the package check or build
>> process, and I wondered if there is a benefit to having vignettes in
>> subdirectories. ? Could inclusion of troublesome vignettes in
>> subdirectories be a way that people can circumvent the rebuilding and
>> re-checking of vignettes during build, check, or install? ?If I build
>> my vignettes manually and copy the pdf output over to inst/doc, will
>> those pdf files be "legitimate" vignette files as far as CRAN is
>> concerned? ?The writeup in R Extensions is a little bit confusing on
>> that point.
>>
>> "By including the PDF version in the package sources it is not
>> necessary that the vignette PDFs can be re-built at install time,
>> i.e., the package author can use private R packages, screen snapshots
>> and LaTeX extensions which are only available on his machine."
>>
>> Its just confusing, that's all I can say about it.
>
>
> There was at least one earlier R-devel discussion of this, in which I
> contributed an incorrect understanding, but was generally straightened out
> by Uwe. I hope I have a correct understanding now.
>
> You can put a pdf file in inst/doc and specify "BuildVignettes: false" in
> the DESCRIPTION file, in which case the already constructed pdf from
> inst/doc will be used. The purpose of this is to allow vignettes which would
> not be completely constructed from sources, for example, because certain
> data or other resources may not be generally available. However, R CMD check
> will still try to parse the Sweave file and run the R code, and fail if it
> does not run. So, when the resources to build the vignette are not generally
> available this does require some special attention, often with try(), in the
> code for your vignette.
>
> It is possible to claim special exemption for a vignette. If the reasons
> seem valid then that package will be put on a special list which allows
> skipping the vignette when the package is tested for CRAN. The reason for
> somewhat tight control on this by CRAN maintainers is that the vignettes
> have proven to be a good check on problems with packages, so skipping them
> will reduce quality, and so CRAN maintainers do not want to provide an easy
> option to skip this check.
>
> There have been a variety of mechanism suggested on R-devel for subverting
> the CRAN checks of the vignette code. My interpretation is that these should
> generally be considered contrary to the spirit of what CRAN maintainers are
> attempting to do, and package maintainers should expect continuing problems
> as the loopholes are removed.
>
> Paul Gilbert
>
>
>>
>> I could learn how to do this from some examples of packages that
>> manage vignettes the "right way", if you could tell me which ones are
>> "right" :) I'd like to see one that has a Makefile, uses a bib file,
>> and, if possible, one that imports a pdf file from elsewhere. ?If
>> there is one that uses subdirectories under vignettes to keep separate
>> ?the content of vignettes, that would be extra helpful.
>>
>> I'm eager to do this in the correct way, just point me at some that are
>> proper.
>>
>> pj
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


I got to the bottom of the problem that made me ask. I had a package
that failed build check. I wrote the vignette in LyX and when I add a
bibliography file in LyX, it adds a full path, not just {rockchalk},
in the Rnw file.

\bibliography{0_home_pauljohn_SVN_rgroup_trunk_rockchalk_rockchalk_vignettes_rockchalk}

LyX does that because it runs its builds in a temporary folder.

When it is like that, the vignette builds for me, but it does not
survive the package check because the check  won't go looking on the
long path.

pj


-- 
Paul E. Johnson
Professor, Political Science ? ?Assoc. Director
1541 Lilac Lane, Room 504 ? ? Center for Research Methods
University of Kansas ? ? ? ? ? ? ? University of Kansas
http://pj.freefaculty.org ? ? ? ? ? ?http://quant.ku.edu


From xie at yihui.name  Mon Jun  4 15:55:22 2012
From: xie at yihui.name (Yihui Xie)
Date: Mon, 4 Jun 2012 09:55:22 -0400
Subject: [Rd] Requests for vignette clarification (re: Writing R
	Extensions)
In-Reply-To: <CAErODj8uTv3khu1ebMphMPBdGhezQ58LonpBL+Q5Xeiq=_Oc2A@mail.gmail.com>
References: <CAErODj90VWY19eWVtuVeLL8JpN0QxrKvWA+N5CQg-LcdALVsWQ@mail.gmail.com>
	<4FCBB4E1.2020707@gmail.com>
	<CAErODj8uTv3khu1ebMphMPBdGhezQ58LonpBL+Q5Xeiq=_Oc2A@mail.gmail.com>
Message-ID: <CANROs4cNsMazb62kbZg1m7_=FNbYM8u7Lqgggq5gC-oPpSTJUw@mail.gmail.com>

You should export to Rnw directly from LyX instead of copying the Rnw
document in the LyX temp dir. The former one is a clean TeX document,
and the latter one will mangle all filenames.

Regards,
Yihui
--
Yihui Xie <xieyihui at gmail.com>
Phone: 515-294-2465 Web: http://yihui.name
Department of Statistics, Iowa State University
2215 Snedecor Hall, Ames, IA


On Mon, Jun 4, 2012 at 9:29 AM, Paul Johnson <pauljohn32 at gmail.com> wrote:
>
>
> I got to the bottom of the problem that made me ask. I had a package
> that failed build check. I wrote the vignette in LyX and when I add a
> bibliography file in LyX, it adds a full path, not just {rockchalk},
> in the Rnw file.
>
> \bibliography{0_home_pauljohn_SVN_rgroup_trunk_rockchalk_rockchalk_vignettes_rockchalk}
>
> LyX does that because it runs its builds in a temporary folder.
>
> When it is like that, the vignette builds for me, but it does not
> survive the package check because the check ?won't go looking on the
> long path.
>
> pj
>
>
> --
> Paul E. Johnson
> Professor, Political Science ? ?Assoc. Director
> 1541 Lilac Lane, Room 504 ? ? Center for Research Methods
> University of Kansas ? ? ? ? ? ? ? University of Kansas
> http://pj.freefaculty.org ? ? ? ? ? ?http://quant.ku.edu
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From bbolker at gmail.com  Tue Jun  5 10:25:20 2012
From: bbolker at gmail.com (Ben Bolker)
Date: Tue, 5 Jun 2012 08:25:20 +0000
Subject: [Rd] Patch to add Beta binomial distribution. Mentor needed!
References: <CANF72pNnfRHOBr_4mvwsk1o1J52hz6LPLEQP6sMjkWOCYX5cOA@mail.gmail.com>
	<A1056BE4-973C-4883-864C-AC1DC800CF7F@gmail.com>
	<CANF72pPh7A5CaSSMNLm05ue_T_pkz_iyRuwpBjoJAGEHrmqphw@mail.gmail.com>
	<CAC+N9BVeicffs1Tspm2LKX7nNA1CctJBtKTyGaK7Sbez4qiLqw@mail.gmail.com>
	<CANF72pNj56U8qgBcppobPTiyKLzTVu6CRfa9DxSUNLJJmeY7DA@mail.gmail.com>
Message-ID: <loom.20120605T102246-250@post.gmane.org>

Joan Maspons <j.maspons <at> creaf.uab.cat> writes:

> 
> 2012/6/1 Tim Triche, Jr. <tim.triche <at> gmail.com>
> 
> > It's in VGAM, remember?  Not a bug.
> >
> > --
> > *A model is a lie that helps you see the truth.*
> > *
> > *
> > Howard Skipper<http://cancerres.aacrjournals.org/content/31/9/1173.full.pdf>
> >
> >
> Yes, it's a wish, not a bug. I would like a faster implementation in c and
> including quantile function. pbetabin calls qbetabin and sums from 0 to q
> using a loop. It can be avoided using genhypergeo function from hypergeo
> package [1] but it adds a dependency and for some parameters it doesn't
> converge.
> 
> In the other hand I think that these functions should be implemented in a
> more neutral place to avoid that packages interested in this distribution
> have to depend on VGAM. I'm also interested in the Beta negative binomial
> distribution which I think it's not implemented (this will be the second
> round). And last but not least I want to learn.

  I really think your chances of getting this wish accepted are tiny.
If you want to avoid additional dependencies, you have at least the 
*legal* right to take any piece of code you want from any open-source
(BSD, GPL, ...) package and package it your own little package 
(provided it follows the rules of the original license) that
includes only the stuff you need, without any other dependencies.  It's
polite to ask for permission and acknowledge the original authors ...

  Ben Bolker


From ripley at stats.ox.ac.uk  Tue Jun  5 11:10:27 2012
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 05 Jun 2012 10:10:27 +0100
Subject: [Rd] Patch to add Beta binomial distribution. Mentor needed!
In-Reply-To: <loom.20120605T102246-250@post.gmane.org>
References: <CANF72pNnfRHOBr_4mvwsk1o1J52hz6LPLEQP6sMjkWOCYX5cOA@mail.gmail.com>
	<A1056BE4-973C-4883-864C-AC1DC800CF7F@gmail.com>
	<CANF72pPh7A5CaSSMNLm05ue_T_pkz_iyRuwpBjoJAGEHrmqphw@mail.gmail.com>
	<CAC+N9BVeicffs1Tspm2LKX7nNA1CctJBtKTyGaK7Sbez4qiLqw@mail.gmail.com>
	<CANF72pNj56U8qgBcppobPTiyKLzTVu6CRfa9DxSUNLJJmeY7DA@mail.gmail.com>
	<loom.20120605T102246-250@post.gmane.org>
Message-ID: <4FCDCD03.7060904@stats.ox.ac.uk>

On 05/06/2012 09:25, Ben Bolker wrote:
> Joan Maspons<j.maspons<at>  creaf.uab.cat>  writes:
>
>>
>> 2012/6/1 Tim Triche, Jr.<tim.triche<at>  gmail.com>
>>
>>> It's in VGAM, remember?  Not a bug.
>>>
>>> --
>>> *A model is a lie that helps you see the truth.*
>>> *
>>> *
>>> Howard Skipper<http://cancerres.aacrjournals.org/content/31/9/1173.full.pdf>
>>>
>>>
>> Yes, it's a wish, not a bug. I would like a faster implementation in c and
>> including quantile function. pbetabin calls qbetabin and sums from 0 to q
>> using a loop. It can be avoided using genhypergeo function from hypergeo
>> package [1] but it adds a dependency and for some parameters it doesn't
>> converge.
>>
>> In the other hand I think that these functions should be implemented in a
>> more neutral place to avoid that packages interested in this distribution
>> have to depend on VGAM. I'm also interested in the Beta negative binomial
>> distribution which I think it's not implemented (this will be the second
>> round). And last but not least I want to learn.
>
>    I really think your chances of getting this wish accepted are tiny.
> If you want to avoid additional dependencies, you have at least the
> *legal* right to take any piece of code you want from any open-source
> (BSD, GPL, ...) package and package it your own little package
> (provided it follows the rules of the original license) that
> includes only the stuff you need, without any other dependencies.  It's
> polite to ask for permission and acknowledge the original authors ...

It is not just polite.  You need to comply with copyright law, and it is 
very likely that requires acknowledgement.  So do CRAN's policies (and 
we've removed several packages already this year for misrepresentation 
of the work of others).

>    Ben Bolker
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Tue Jun  5 12:45:39 2012
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 5 Jun 2012 11:45:39 +0100 (BST)
Subject: [Rd] R CMD check: Sys.getenv("R_GSCMD") cannot contain full
 pathname (contrary to docs)
In-Reply-To: <CAFDcVCSox=E7Srr=AQ=oL8Bw+MpgLKYJH5ZkMvgFPih4Srx6pw@mail.gmail.com>
References: <CAFDcVCTR0YdHxRBQ+YOt=YzLSmj5g27HpvPF1Jk9R9LQ47vLXA@mail.gmail.com>
	<CAFDcVCSox=E7Srr=AQ=oL8Bw+MpgLKYJH5ZkMvgFPih4Srx6pw@mail.gmail.com>
Message-ID: <alpine.LFD.2.02.1206051129260.1141@gannet.stats.ox.ac.uk>

This is simply not true.  Sys.which() should accept absolute paths, 
and does on my systems (even my Windows system).  However, it looks 
like you gave an unescaped path containing spaces.  Most likely you 
need to include that path in double quotes (just as you would on a 
Windows shell).

On Wed, 30 May 2012, Henrik Bengtsson wrote:

> Bump, in case it was missed.  This is also the case with R Under
> development (unstable) (2012-05-25 r59443).  /Henrik
>
> On Fri, Apr 20, 2012 at 2:00 PM, Henrik Bengtsson <hb at biostat.ucsf.edu> wrote:
>> Hi,
>>
>> in help("R_GSCMD") it says "R_GSCMD: Optional. The path to
>> Ghostscript, used by dev2bitmap, bitmap and embedFonts. Consulted when
>> those functions are invoked.". ?However, if 'R_GSCMD' contains a full
>> pathname to the Ghostscript executable (as above "path" indicates),
>> e.g.
>>
>>> Sys.getenv("R_GSCMD")
>> [1] "C:\\Program Files\\gs\\gs8.71\\bin\\gswin32c.exe"
>>
>> then 'R CMD check' will report
>>
>> * checking sizes of PDF files under 'inst/doc' ... NOTE
>> Unable to find GhostScript executable to run checks on size reduction
>>
>> Setting 'R_GSCMD' to "gswin32c.exe" and asserting that it is the PATH
>> (this is on Windows), it works.
>>
>>
>> TROUBLESHOOTING:
>> In the local function check_doc_size() of tools:::.check_packages()
>> [cf. http://svn.r-project.org/R/trunk/src/library/tools/R/check.R],
>> the Ghostscript executable is retrieved as:
>>
>> ?gs_cmd <- find_gs_cmd(Sys.getenv("R_GSCMD", ""))
>>
>> and if nzchar(gs_cmd) is FALSE, then the 'R CMD check' NOTE appears.
>> Inspecting tools:::find_gs_cmd, this corresponds to
>>
>> ?gs_cmd <- Sys.which(Sys.getenv("R_GSCMD", ""))
>>
>> iff 'R_GSCMD' is set. ?In other words, tools:::find_gs_cmd() assumes a
>> basename not a full pathname.
>>
>>
>> SUGGESTIONS:
>> Update tools:::find_gs_cmd() to test for file existence before turning
>> to Sys.which(), e.g.
>>
>> find_gs_cmd <- function (gs_cmd)
>> {
>> ? ?if (!nzchar(gs_cmd)) {
>> ? ? ? ?if (.Platform$OS.type == "windows") {
>> ? ? ? ? ? ?gs_cmd <- Sys.which("gswin64c")
>> ? ? ? ? ? ?if (!nzchar(gs_cmd))
>> ? ? ? ? ? ? ? ?gs_cmd <- Sys.which("gswin32c")
>> ? ? ? ? ? ?gs_cmd
>> ? ? ? ?}
>> ? ? ? ?else Sys.which("gs")
>> ? ?} else {
>> ? ? ?if (file.exists(gs_cmd) && !file.info(gs_cmd)$isdir)
>> ? ? ? ?gs_cmd
>> ? ? ?else
>> ? ? ? ?Sys.which(gs_cmd)
>> ? }
>> }
>>
>>
>> /Henrik
>>
>>> sessionInfo()
>> R version 2.15.0 Patched (2012-04-08 r58935)
>> Platform: x86_64-pc-mingw32/x64 (64-bit)
>>
>> locale:
>> [1] LC_COLLATE=English_United States.1252
>> [2] LC_CTYPE=English_United States.1252
>> [3] LC_MONETARY=English_United States.1252
>> [4] LC_NUMERIC=C
>> [5] LC_TIME=English_United States.1252
>>
>> attached base packages:
>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>
>> loaded via a namespace (and not attached):
>> [1] R.methodsS3_1.4.0 tools_2.15.0
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From chander at otg-nc.com  Mon Jun  4 20:27:32 2012
From: chander at otg-nc.com (Chander Ganesan)
Date: Mon, 04 Jun 2012 14:27:32 -0400
Subject: [Rd] Problems building R on Solaris (gcc 4.6, 64 bit)
Message-ID: <4FCCFE14.1080300@otg-nc.com>

Hello,

I'm attempting to build R on Solaris 64-bit using gcc4, and am running 
into the following error:

ld.so.1: R: fatal: relocation error: R_AMD64_PC32: file 
/home/chander.ganesan/src/r/R-2.15.0/lib/libR.so: symbol main: value 
0x28001597b8c does not fit


I've noticed - from some lists, and a bug here 
(http://trac.sagemath.org/sage_trac/ticket/9040) that this isn't an 
unexpected issue  - but I'm wondering if anyone has a fix for it?  If 
not, would someone be willing to develop a permanent fix for it (which I 
believe I could fund, within reason.)

Thank You

-- 
Chander Ganesan
Open Technology Group, Inc.
11010 Lake Grove Blvd Ste. 100-307
Morrisville, NC  27560
919-463-0999/877-258-8987
http://www.otg-nc.com


From ripley at stats.ox.ac.uk  Tue Jun  5 15:38:02 2012
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 05 Jun 2012 14:38:02 +0100
Subject: [Rd] Problems building R on Solaris (gcc 4.6, 64 bit)
In-Reply-To: <4FCCFE14.1080300@otg-nc.com>
References: <4FCCFE14.1080300@otg-nc.com>
Message-ID: <4FCE0BBA.3050005@stats.ox.ac.uk>

On 04/06/2012 19:27, Chander Ganesan wrote:
> Hello,
>
> I'm attempting to build R on Solaris 64-bit using gcc4, and am running
> into the following error:
>
> ld.so.1: R: fatal: relocation error: R_AMD64_PC32: file
> /home/chander.ganesan/src/r/R-2.15.0/lib/libR.so: symbol main: value
> 0x28001597b8c does not fit
>
>
> I've noticed - from some lists, and a bug here
> (http://trac.sagemath.org/sage_trac/ticket/9040) that this isn't an
> unexpected issue - but I'm wondering if anyone has a fix for it? If not,
> would someone be willing to develop a permanent fix for it (which I
> believe I could fund, within reason.)
>
> Thank You

R's own documentation has had workarounds for some time: please study 
the R-admin manual.  I built R-patched using 4.7.0 this morning on both 
Solaris 64-bit) platforms (x64 and Sparc).

You do not say what version of R you are trying: I vaguely recall an 
improvement here since 2.15.0 so suggest you try R-patched (and read its 
manual).  It also looks as if you are building R as a shared library, 
which is not the default and it might be better to try the defaults first.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From S.N.Maijers at student.ru.nl  Tue Jun  5 15:03:43 2012
From: S.N.Maijers at student.ru.nl (Sander Maijers)
Date: Tue, 5 Jun 2012 15:03:43 +0200
Subject: [Rd] Memory leak during instantiation of a reference class?
Message-ID: <20120605150343.7b428ac8@student.ru.nl>

Hi,

I have a problem with a large data set wrapped in a reference class. I do that to access the data by reference from within various functions in a script.

# The class definition:

	setRefClass("data",
          		   fields = list(h5_df                = "list",
                           		     training_data    = "array",
                           		     true_class         = "vector"));

# The class instantiation:

          data_1 <- new("data",
                             h5_df               = as.list(h5_df),
                             training_data   = training_data,
                             true_class        = true_class);


The objects assigned to the "data" fields during instantiation:

Browse[1]> str(training_data)
 num [1:501, 1:62, 1:579] -10.4 -11.3 -12.1 -12.8 -13.3 ...
 - attr(*, "dimnames")=List of 3
  ..$ : NULL
  ..$ : NULL
  ..$ : NULL


Browse[1]> str(true_class)
 num [1:1002] 1 1 1 1 1 1 1 1 1 1 ...


Browse[1]> str(h5_df)
Dotted pair list of 11
 $ avg.txt.lp    :Garbage collection 135 = 44+18+73 (level 2) ... 
49.4 Mbytes of cons cells used (63%)
2840.0 Mbytes of vectors used (30%)
 num [1:501, 1:62, 1:607] -10.4 -11.3 -12.1 -12.8 -13.3 ...
 $ avg.tls.txt.lp: num [1:501, 1:62, 1:281] -10.4 -11.3 -12.1 -12.8 -13.3 ...
 $ avg.tls.pic.lp: num [1:501, 1:62, 1:305] -2.81 -4.95 -6.98 -8.79 -10.32 ...
 $ avg.tls.lp    : num [1:501, 1:62, 1:884] -10.4 -11.3 -12.1 -12.8 -13.3 ...
 $ avg.tls.aud.lp: num [1:501, 1:62, 1:298] -13.9 -11.36 -8.91 -6.61 -4.55 ...
 $ avg.pic.lp    : num [1:501, 1:62, 1:653] -2.81 -4.95 -6.98 -8.79 -10.32 ...
 $ avg.aud.lp    : num [1:501, 1:62, 1:662] -13.9 -11.36 -8.91 -6.61 -4.55 ...
 $ avg.anm.txt.lp: num [1:501, 1:62, 1:273] -3.37 -2.96 -2.59 -2.27 -2 ...
 $ avg.anm.pic.lp: num [1:501, 1:62, 1:285] 11.7 12.3 12.8 13.2 13.5 ...
 $ avg.anm.lp    : num [1:501, 1:62, 1:855] -3.37 -2.96 -2.59 -2.27 -2 ...
 $ avg.anm.aud.lp:Garbage collection 136 = 44+18+74 (level 2) ... 
49.4 Mbytes of cons cells used (63%)
2980.8 Mbytes of vectors used (32%)
 num [1:501, 1:62, 1:297] -13.57 -11.96 -10.36 -8.77 -7.2 ...


The procedure that gives rise to the problem:

> rm(list=ls())
> gc()
         used (Mb) gc trigger   (Mb)  max used   (Mb)
Ncells 921231 49.2    1476915   78.9   1166886   62.4
Vcells 792872  6.1  565291490 4312.9 690075184 5264.9
> load_data()
Processing object: avg_anm_aud_lp ...... its a dataset...Dataset has ID83886080
Dataset has tid 50332028
Dataset has space id 67108866
Dataset has rank 3
Dataset has dims/maxdims: 501  62  297 / 501  62  297 
 501  62  297  Tidying name avg_anm_aud_lp .. to avg.anm.aud.lp 
 ...Finished dataset 
Processing object: avg_anm_lp ...... its a dataset...Dataset has ID83886080
Dataset has tid 50332031
Dataset has space id 67108866
Dataset has rank 3
Dataset has dims/maxdims: 501  62  855 / 501  62  855 
 501  62  855  Tidying name avg_anm_lp .. to avg.anm.lp 
 ...Finished dataset 
Processing object: avg_anm_pic_lp ...... its a dataset...Dataset has ID83886080
Dataset has tid 50332034
Dataset has space id 67108866
Dataset has rank 3
Dataset has dims/maxdims: 501  62  285 / 501  62  285 
 501  62  285  Tidying name avg_anm_pic_lp .. to avg.anm.pic.lp 
 ...Finished dataset 
Processing object: avg_anm_txt_lp ...... its a dataset...Dataset has ID83886080
Dataset has tid 50332037
Dataset has space id 67108866
Dataset has rank 3
Dataset has dims/maxdims: 501  62  273 / 501  62  273 
 501  62  273  Tidying name avg_anm_txt_lp .. to avg.anm.txt.lp 
 ...Finished dataset 
Processing object: avg_aud_lp ...... its a dataset...Dataset has ID83886080
Dataset has tid 50332040
Dataset has space id 67108866
Dataset has rank 3
Dataset has dims/maxdims: 501  62  662 / 501  62  662 
 501  62  662  Tidying name avg_aud_lp .. to avg.aud.lp 
 ...Finished dataset 
Processing object: avg_pic_lp ...... its a dataset...Dataset has ID83886080
Dataset has tid 50332043
Dataset has space id 67108866
Dataset has rank 3
Dataset has dims/maxdims: 501  62  653 / 501  62  653 
 501  62  653  Tidying name avg_pic_lp .. to avg.pic.lp 
 ...Finished dataset 
Processing object: avg_tls_aud_lp ...... its a dataset...Dataset has ID83886080
Dataset has tid 50332046
Dataset has space id 67108866
Dataset has rank 3
Dataset has dims/maxdims: 501  62  298 / 501  62  298 
 501  62  298  Tidying name avg_tls_aud_lp .. to avg.tls.aud.lp 
 ...Finished dataset 
Processing object: avg_tls_lp ...... its a dataset...Dataset has ID83886080
Dataset has tid 50332049
Dataset has space id 67108866
Dataset has rank 3
Dataset has dims/maxdims: 501  62  884 / 501  62  884 
 501  62  884  Tidying name avg_tls_lp .. to avg.tls.lp 
 ...Finished dataset 
Processing object: avg_tls_pic_lp ...... its a dataset...Dataset has ID83886080
Dataset has tid 50332052
Dataset has space id 67108866
Dataset has rank 3
Dataset has dims/maxdims: 501  62  305 / 501  62  305 
 501  62  305  Tidying name avg_tls_pic_lp .. to avg.tls.pic.lp 
 ...Finished dataset 
Processing object: avg_tls_txt_lp ...... its a dataset...Dataset has ID83886080
Dataset has tid 50332055
Dataset has space id 67108866
Dataset has rank 3
Dataset has dims/maxdims: 501  62  281 / 501  62  281 
 501  62  281  Tidying name avg_tls_txt_lp .. to avg.tls.txt.lp 
 ...Finished dataset 
Processing object: avg_txt_lp ...... its a dataset...Dataset has ID83886080
Dataset has tid 50332058
Dataset has space id 67108866
Dataset has rank 3
Dataset has dims/maxdims: 501  62  607 / 501  62  607 
 501  62  607  Tidying name avg_txt_lp .. to avg.txt.lp 
 ...Finished dataset 
Garbage collection 118 = 44+17+57 (level 0) ... 
49.4 Mbytes of cons cells used (63%)
2277.9 Mbytes of vectors used (53%)

Called from: load_data()
Browse[1]> str(data_1)
Garbage collection 119 = 44+18+57 (level 1) ... 
49.4 Mbytes of cons cells used (63%)
4119.7 Mbytes of vectors used (96%)
Reference class 'data' [package ".GlobalEnv"] with 3 fields
Garbage collection 120 = 44+18+58 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
4256.9 Mbytes of vectors used (92%)
Garbage collection 121 = 44+18+59 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
4539.6 Mbytes of vectors used (91%)
Garbage collection 122 = 44+18+60 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
4974.5 Mbytes of vectors used (92%)
Garbage collection 123 = 44+18+61 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
5263.6 Mbytes of vectors used (92%)
Garbage collection 124 = 44+18+62 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
5673.9 Mbytes of vectors used (93%)
Garbage collection 125 = 44+18+63 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
5956.6 Mbytes of vectors used (92%)
Garbage collection 126 = 44+18+64 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
6391.4 Mbytes of vectors used (93%)
Garbage collection 127 = 44+18+65 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
6680.6 Mbytes of vectors used (92%)
Garbage collection 128 = 44+18+66 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
5673.9 Mbytes of vectors used (75%)
Garbage collection 129 = 44+18+67 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
7583.0 Mbytes of vectors used (94%)
Garbage collection 130 = 44+18+68 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
8030.0 Mbytes of vectors used (94%)
Garbage collection 131 = 44+18+69 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
8370.5 Mbytes of vectors used (94%)
Garbage collection 132 = 44+18+70 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
7373.5 Mbytes of vectors used (79%)
 $ h5_df        :Garbage collection 133 = 44+18+71 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
9070.6 Mbytes of vectors used (92%)
Error: cannot allocate vector of size 154.8 Mb
Garbage collection 134 = 44+18+72 (level 2) ... 
49.3 Mbytes of cons cells used (62%)
9070.6 Mbytes of vectors used (92%)
Error during wrapup: cannot allocate vector of size 143.8 Mb


The computer system that runs this code is has a 64-bit CPU and 12 GiB RAM.
It seems that there is a memory leak somewhere. Any suggestions on how to solve this problem?

Regards,
Sander Maijers


From chander at otg-nc.com  Tue Jun  5 16:48:55 2012
From: chander at otg-nc.com (Chander Ganesan)
Date: Tue, 05 Jun 2012 10:48:55 -0400
Subject: [Rd] Problems building R on Solaris (gcc 4.6, 64 bit)
In-Reply-To: <4FCE0BBA.3050005@stats.ox.ac.uk>
References: <4FCCFE14.1080300@otg-nc.com> <4FCE0BBA.3050005@stats.ox.ac.uk>
Message-ID: <4FCE1C57.8010703@otg-nc.com>

On 6/5/12 9:38 AM, Prof Brian Ripley wrote:
> On 04/06/2012 19:27, Chander Ganesan wrote:
>> Hello,
>>
>> I'm attempting to build R on Solaris 64-bit using gcc4, and am running
>> into the following error:
>>
>> ld.so.1: R: fatal: relocation error: R_AMD64_PC32: file
>> /home/chander.ganesan/src/r/R-2.15.0/lib/libR.so: symbol main: value
>> 0x28001597b8c does not fit
>>
>>
>> I've noticed - from some lists, and a bug here
>> (http://trac.sagemath.org/sage_trac/ticket/9040) that this isn't an
>> unexpected issue - but I'm wondering if anyone has a fix for it? If not,
>> would someone be willing to develop a permanent fix for it (which I
>> believe I could fund, within reason.)
>>
>> Thank You
>
> R's own documentation has had workarounds for some time: please study 
> the R-admin manual.  I built R-patched using 4.7.0 this morning on 
> both Solaris 64-bit) platforms (x64 and Sparc).
I did look there - and followed the instructions therein (followed by 
numerous variants of it based on google searches, etc.) I don't recall 
seeing any mention of R-patched in the documentation, but I suppose I 
could have missed that somehow.  IIRC that document indicates that R 
doesn't build 64-bit using gcc, but I also couldn't get it to work with 
Sun Studio 12.3 compilers.
>
> You do not say what version of R you are trying: I vaguely recall an 
> improvement here since 2.15.0 so suggest you try R-patched (and read 
> its manual).  It also looks as if you are building R as a shared 
> library, which is not the default and it might be better to try the 
> defaults first.
I was using 2.15 - but with R_patched I'm still having some issue.  
Could you possibly send me the arguments you are using with configure to 
build on solaris x64 ?

Thank You

-- 
Chander Ganesan
Open Technology Group, Inc.
11010 Lake Grove Blvd Ste. 100-307
Morrisville, NC  27560
919-463-0999/877-258-8987
http://www.otg-nc.com


From therneau at mayo.edu  Tue Jun  5 17:17:58 2012
From: therneau at mayo.edu (Terry Therneau)
Date: Tue, 05 Jun 2012 10:17:58 -0500
Subject: [Rd] model.frame and predvars
Message-ID: <4FCE2326.1090108@mayo.edu>

I was looking at how the model.frame method for lm works and comparing 
it to my own for coxph.
The big difference is that I try to retain xlevels and predvars 
information for a new model frame, and lm does not.
I use a call to model.frame in predict.coxph, which is why I went that 
route, but never noted the difference till now (preparing for my course 
in Nashville).

Could someone shed light on the rationale for non-preservation?

Terry T.


Simple example

 > library(survival)

 > lfit <- lm(time ~ factor(ph.ecog) + ns(age, 3), data=lung)
 > ltemp <- model.frame(lfit, data=lung[1:2,])
 > ltemp
   time factor(ph.ecog) ns(age, 3).1 ns(age, 3).2 ns(age, 3).3
1  306               1   -0.1428571    0.4285714    0.7142857
2  455               0    0.0000000    0.0000000    0.0000000

 > lfit$model[1:2,]
   time factor(ph.ecog) ns(age, 3).1 ns(age, 3).2 ns(age, 3).3
1  306               1    0.4443546    0.3286161    0.1900511
2  455               0    0.5697239    0.3618440   -0.1297479

 > levels(ltemp[[2]])
[1] "0" "1"

 > levels(lfit$model[[2]])
[1] "0" "1" "2" "3"

 > cfit <- coxph(Surv(time, status) ~ factor(ph.ecog) + ns(age,3), lung)
 > model.frame(cfit, data= lung[1:2,])
   Surv(time, status) factor(ph.ecog) ns(age, 3).1 ns(age, 3).2 ns(age, 3).3
1               306                1    0.4443546    0.3286161    0.1900511
2               455                0    0.5697239    0.3618440   -0.1297479


From ripley at stats.ox.ac.uk  Tue Jun  5 18:32:39 2012
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 05 Jun 2012 17:32:39 +0100
Subject: [Rd] model.frame and predvars
In-Reply-To: <4FCE2326.1090108@mayo.edu>
References: <4FCE2326.1090108@mayo.edu>
Message-ID: <4FCE34A7.1040801@stats.ox.ac.uk>

On 05/06/2012 16:17, Terry Therneau wrote:
> I was looking at how the model.frame method for lm works and comparing
> it to my own for coxph.
> The big difference is that I try to retain xlevels and predvars
> information for a new model frame, and lm does not.
> I use a call to model.frame in predict.coxph, which is whyI went that
> route, but never noted the difference till now (preparing for my course
> in Nashville).
>
> Could someone shed light on the rationale for non-preservation?
>

T'other way round ... it would have needed a conscious decision to 
preserve them: these all predate xlevels and predvars.

model.matrix.lm does make use of xlevels, and I think that explains the 
difference as most lm() auxiliaries use the model matrix.

And I don't see predvars used in survival:::model.frame.coxph.


> Terry T.
>
>
> Simple example
>
>  > library(survival)
>
>  > lfit <- lm(time ~ factor(ph.ecog) + ns(age, 3), data=lung)
>  > ltemp <- model.frame(lfit, data=lung[1:2,])
>  > ltemp
> time factor(ph.ecog) ns(age, 3).1 ns(age, 3).2 ns(age, 3).3
> 1 306 1 -0.1428571 0.4285714 0.7142857
> 2 455 0 0.0000000 0.0000000 0.0000000
>
>  > lfit$model[1:2,]
> time factor(ph.ecog) ns(age, 3).1 ns(age, 3).2 ns(age, 3).3
> 1 306 1 0.4443546 0.3286161 0.1900511
> 2 455 0 0.5697239 0.3618440 -0.1297479
>
>  > levels(ltemp[[2]])
> [1] "0" "1"
>
>  > levels(lfit$model[[2]])
> [1] "0" "1" "2" "3"
>
>  > cfit <- coxph(Surv(time, status) ~ factor(ph.ecog) + ns(age,3), lung)
>  > model.frame(cfit, data= lung[1:2,])
> Surv(time, status) factor(ph.ecog) ns(age, 3).1 ns(age, 3).2 ns(age, 3).3
> 1 306 1 0.4443546 0.3286161 0.1900511
> 2 455 0 0.5697239 0.3618440 -0.1297479
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From therneau at mayo.edu  Tue Jun  5 19:43:03 2012
From: therneau at mayo.edu (Terry Therneau)
Date: Tue, 05 Jun 2012 12:43:03 -0500
Subject: [Rd] model.frame and predvars
In-Reply-To: <4FCE34A7.1040801@stats.ox.ac.uk>
References: <4FCE2326.1090108@mayo.edu> <4FCE34A7.1040801@stats.ox.ac.uk>
Message-ID: <4FCE4527.4020506@mayo.edu>



On 06/05/2012 11:32 AM, Prof Brian Ripley wrote:
> On 05/06/2012 16:17, Terry Therneau wrote:
>> I was looking at how the model.frame method for lm works and comparing
>> it to my own for coxph.
>> The big difference is that I try to retain xlevels and predvars
>> information for a new model frame, and lm does not.
>> I use a call to model.frame in predict.coxph, which is whyI went that
>> route, but never noted the difference till now (preparing for my course
>> in Nashville).
>>
>> Could someone shed light on the rationale for non-preservation?
>>
>
> T'other way round ... it would have needed a conscious decision to 
> preserve them: these all predate xlevels and predvars.
>

That's true, but lots of other things have been changed, e.g. 
model.frame=T.
I was wondering if there was a positive reason not to do it; this 
answers the question.


> model.matrix.lm does make use of xlevels, and I think that explains 
> the difference as most lm() auxiliaries use the model matrix.
>
But it does not keep predvars, which is interesting.  So it fixes one 
issue but leaves another undone.

> And I don't see predvars used in survival:::model.frame.coxph.

Actually it does, as is proven by the example I showed (ns 
reconstruction of the first two lines was the same).  Having commented 
source code helps to see it of course, I replace formula in the call 
with the terms object from the prior fit before invoking model.frame.  
This causes inheritance of the both "specials" and predvars.

So, should the survival library change to the old behavior?  I prefer my 
current one, in that the only time I would do model.frame(prior.fit, 
data=new) would be if I want the same treatment of special variables.  
If I wanted a new, de novo decision on constrasts or codings I would 
have just fit a new model.   Is there a plausible situation where the 
old behavior is prefereable?  Discounting backwards compatability of 
course, which is always a thorny issue.


>> Terry T.
>>
>>
>> Simple example
>>
>> > library(survival)
>>
>> > lfit <- lm(time ~ factor(ph.ecog) + ns(age, 3), data=lung)
>> > ltemp <- model.frame(lfit, data=lung[1:2,])
>> > ltemp
>> time factor(ph.ecog) ns(age, 3).1 ns(age, 3).2 ns(age, 3).3
>> 1 306 1 -0.1428571 0.4285714 0.7142857
>> 2 455 0 0.0000000 0.0000000 0.0000000
>>
>> > lfit$model[1:2,]
>> time factor(ph.ecog) ns(age, 3).1 ns(age, 3).2 ns(age, 3).3
>> 1 306 1 0.4443546 0.3286161 0.1900511
>> 2 455 0 0.5697239 0.3618440 -0.1297479
>>
>> > levels(ltemp[[2]])
>> [1] "0" "1"
>>
>> > levels(lfit$model[[2]])
>> [1] "0" "1" "2" "3"
>>
>> > cfit <- coxph(Surv(time, status) ~ factor(ph.ecog) + ns(age,3), lung)
>> > model.frame(cfit, data= lung[1:2,])
>> Surv(time, status) factor(ph.ecog) ns(age, 3).1 ns(age, 3).2 ns(age, 
>> 3).3
>> 1 306 1 0.4443546 0.3286161 0.1900511
>> 2 455 0 0.5697239 0.3618440 -0.1297479
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From hb at biostat.ucsf.edu  Tue Jun  5 21:28:25 2012
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Tue, 5 Jun 2012 12:28:25 -0700
Subject: [Rd] R CMD check: Sys.getenv("R_GSCMD") cannot contain full
 pathname (contrary to docs)
In-Reply-To: <alpine.LFD.2.02.1206051129260.1141@gannet.stats.ox.ac.uk>
References: <CAFDcVCTR0YdHxRBQ+YOt=YzLSmj5g27HpvPF1Jk9R9LQ47vLXA@mail.gmail.com>
	<CAFDcVCSox=E7Srr=AQ=oL8Bw+MpgLKYJH5ZkMvgFPih4Srx6pw@mail.gmail.com>
	<alpine.LFD.2.02.1206051129260.1141@gannet.stats.ox.ac.uk>
Message-ID: <CAFDcVCQDTrrUM7ybofsHFcDdhSpqQWDAxiPEo0HkwtgDMhtmOg@mail.gmail.com>

On Tue, Jun 5, 2012 at 3:45 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> This is simply not true. ?Sys.which() should accept absolute paths, and does
> on my systems (even my Windows system). ?However, it looks like you gave an
> unescaped path containing spaces. ?Most likely you need to include that path
> in double quotes (just as you would on a Windows shell).

The observered behavior now makes sense.  I saw from the SVN log that
you've already clarified this in several places of the docs.

Thanks for this.

/HB

>
>
> On Wed, 30 May 2012, Henrik Bengtsson wrote:
>
>> Bump, in case it was missed. ?This is also the case with R Under
>> development (unstable) (2012-05-25 r59443). ?/Henrik
>>
>> On Fri, Apr 20, 2012 at 2:00 PM, Henrik Bengtsson <hb at biostat.ucsf.edu>
>> wrote:
>>>
>>> Hi,
>>>
>>> in help("R_GSCMD") it says "R_GSCMD: Optional. The path to
>>> Ghostscript, used by dev2bitmap, bitmap and embedFonts. Consulted when
>>> those functions are invoked.". ?However, if 'R_GSCMD' contains a full
>>> pathname to the Ghostscript executable (as above "path" indicates),
>>> e.g.
>>>
>>>> Sys.getenv("R_GSCMD")
>>>
>>> [1] "C:\\Program Files\\gs\\gs8.71\\bin\\gswin32c.exe"
>>>
>>> then 'R CMD check' will report
>>>
>>> * checking sizes of PDF files under 'inst/doc' ... NOTE
>>> Unable to find GhostScript executable to run checks on size reduction
>>>
>>> Setting 'R_GSCMD' to "gswin32c.exe" and asserting that it is the PATH
>>> (this is on Windows), it works.
>>>
>>>
>>> TROUBLESHOOTING:
>>> In the local function check_doc_size() of tools:::.check_packages()
>>> [cf. http://svn.r-project.org/R/trunk/src/library/tools/R/check.R],
>>> the Ghostscript executable is retrieved as:
>>>
>>> ?gs_cmd <- find_gs_cmd(Sys.getenv("R_GSCMD", ""))
>>>
>>> and if nzchar(gs_cmd) is FALSE, then the 'R CMD check' NOTE appears.
>>> Inspecting tools:::find_gs_cmd, this corresponds to
>>>
>>> ?gs_cmd <- Sys.which(Sys.getenv("R_GSCMD", ""))
>>>
>>> iff 'R_GSCMD' is set. ?In other words, tools:::find_gs_cmd() assumes a
>>> basename not a full pathname.
>>>
>>>
>>> SUGGESTIONS:
>>> Update tools:::find_gs_cmd() to test for file existence before turning
>>> to Sys.which(), e.g.
>>>
>>> find_gs_cmd <- function (gs_cmd)
>>> {
>>> ? ?if (!nzchar(gs_cmd)) {
>>> ? ? ? ?if (.Platform$OS.type == "windows") {
>>> ? ? ? ? ? ?gs_cmd <- Sys.which("gswin64c")
>>> ? ? ? ? ? ?if (!nzchar(gs_cmd))
>>> ? ? ? ? ? ? ? ?gs_cmd <- Sys.which("gswin32c")
>>> ? ? ? ? ? ?gs_cmd
>>> ? ? ? ?}
>>> ? ? ? ?else Sys.which("gs")
>>> ? ?} else {
>>> ? ? ?if (file.exists(gs_cmd) && !file.info(gs_cmd)$isdir)
>>> ? ? ? ?gs_cmd
>>> ? ? ?else
>>> ? ? ? ?Sys.which(gs_cmd)
>>> ? }
>>> }
>>>
>>>
>>> /Henrik
>>>
>>>> sessionInfo()
>>>
>>> R version 2.15.0 Patched (2012-04-08 r58935)
>>> Platform: x86_64-pc-mingw32/x64 (64-bit)
>>>
>>> locale:
>>> [1] LC_COLLATE=English_United States.1252
>>> [2] LC_CTYPE=English_United States.1252
>>> [3] LC_MONETARY=English_United States.1252
>>> [4] LC_NUMERIC=C
>>> [5] LC_TIME=English_United States.1252
>>>
>>> attached base packages:
>>> [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base
>>>
>>> loaded via a namespace (and not attached):
>>> [1] R.methodsS3_1.4.0 tools_2.15.0
>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
> --
> Brian D. Ripley, ? ? ? ? ? ? ? ? ?ripley at stats.ox.ac.uk
> Professor of Applied Statistics, ?http://www.stats.ox.ac.uk/~ripley/
> University of Oxford, ? ? ? ? ? ? Tel: ?+44 1865 272861 (self)
> 1 South Parks Road, ? ? ? ? ? ? ? ? ? ? +44 1865 272866 (PA)
> Oxford OX1 3TG, UK ? ? ? ? ? ? ? ?Fax: ?+44 1865 272595


From dtenenba at fhcrc.org  Wed Jun  6 01:22:17 2012
From: dtenenba at fhcrc.org (Dan Tenenbaum)
Date: Tue, 5 Jun 2012 16:22:17 -0700
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
Message-ID: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>

I know this has come up before on R-help
(http://r.789695.n4.nabble.com/7-arguments-passed-to-Internal-identical-which-requires-6-td4548460.html)
but I have a concise reproducible case that I wanted to share.

Also, please note the Bioconductor scenario which is potentially
seriously impacted by this.
The issue arises when a binary version of a package (like my example
package below) is built under R 2.15.0 Patched but then installed
under R 2.15.0.  Our package AnnotationDbi (which hundreds of other
packages depend on) is impacted by this issue to the extent that
calling virtually any function in it will return something like this:
Error in ls(2) :
  7 arguments passed to .Internal(identical) which requires 6

My concern is that when R 2.15.1 is released and Bioconductor starts
building all its packages under it, that R 2.15.0 users will start to
experience this problem. We can ask all users to upgrade to R 2.15.1
if we have to, but it's not usually the case that a minor point
release MUST be installed in order to run packages built under it
(please correct me if I'm wrong). We would much prefer a workaround or
fix to make an upgrade unnecessary.

Here is a minimal package called 'bad':

DESCRIPTION:
Package: bad
Title: test package
Description: test package
Version: 0.0.1
Author: Bad
Maintainer: Bioconductor Package Maintainer <maintainer at bioconductor.org>
License: Artistic-2.0

NAMESPACE:
exportMethods(ls)
exportClass(A)

R/code.R:
setClass("A", "numeric")
setMethod("ls", "A", function(name, pos, envir, all.names, pattern) {
"here I am" })

If under R 2.15.0 Patched I create a binary package:
R CMD INSTALL --build bad

And then under R 2.15.0 I install it:
R CMD INSTALL bad_0.0.1.tgz

Then, in R-2.15.0 (started with --vanilla):
> library(bad)
> ls(2)
Error in ls(2) :
  7 arguments passed to .Internal(identical) which requires 6

This is on a Mac, but per the link above this occurs on Windows as well.

Any help would be very much appreciated!

Thanks,
Dan

~~~
sessionInfo() for R 2.15.0
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

sessionInfo() for R 2.15.0 Patched:
> sessionInfo()
R version 2.15.0 Patched (2012-06-03 r59505)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base


From beniltoncarvalho at gmail.com  Wed Jun  6 01:37:06 2012
From: beniltoncarvalho at gmail.com (Benilton Carvalho)
Date: Wed, 6 Jun 2012 00:37:06 +0100
Subject: [Rd] length-0 list as dimnames
Message-ID: <CAO-arWNY1CBgpYND748v-796BR7SoctfeghZYAixdqJzq=3D=w@mail.gmail.com>

Hi,

I'm working on a package and observed a behaviour that was suggested
to be incompatible with the documentation.

The code below:

x <- matrix(1:4, 2)
dimnames(x) <- list()

works just fine. But checking the documentation for dimnames(), it
states that if value is a list "its components are either 'NULL' or a
character vector with positive length of the appropriate dimension of
x".

Should dimnames() return an error on the example above?

Thank you very much for your attention and time,

benilton


From simon.urbanek at r-project.org  Wed Jun  6 01:43:33 2012
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 5 Jun 2012 19:43:33 -0400
Subject: [Rd] length-0 list as dimnames
In-Reply-To: <CAO-arWNY1CBgpYND748v-796BR7SoctfeghZYAixdqJzq=3D=w@mail.gmail.com>
References: <CAO-arWNY1CBgpYND748v-796BR7SoctfeghZYAixdqJzq=3D=w@mail.gmail.com>
Message-ID: <628CCADF-6BCC-4FEB-A6A0-D32F671D10BC@r-project.org>


On Jun 5, 2012, at 7:37 PM, Benilton Carvalho wrote:

> Hi,
> 
> I'm working on a package and observed a behaviour that was suggested
> to be incompatible with the documentation.
> 
> The code below:
> 
> x <- matrix(1:4, 2)
> dimnames(x) <- list()
> 
> works just fine. But checking the documentation for dimnames(), it
> states that if value is a list "its components are either 'NULL' or a
> character vector with positive length of the appropriate dimension of
> x".
> 
> Should dimnames() return an error on the example above?
> 

No, from the docs:

     The replacement method for arrays/matrices coerces vector and
     factor elements of ?value? to character, but does not dispatch
     methods for ?as.character?.  It coerces zero-length elements to
     ?NULL?, and a zero-length list to ?NULL?. 

you are using a 0-length list, so it is coerced to NULL.

Cheers,
Simon



> Thank you very much for your attention and time,
> 
> benilton
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From beniltoncarvalho at gmail.com  Wed Jun  6 01:51:53 2012
From: beniltoncarvalho at gmail.com (Benilton Carvalho)
Date: Wed, 6 Jun 2012 00:51:53 +0100
Subject: [Rd] length-0 list as dimnames
In-Reply-To: <628CCADF-6BCC-4FEB-A6A0-D32F671D10BC@r-project.org>
References: <CAO-arWNY1CBgpYND748v-796BR7SoctfeghZYAixdqJzq=3D=w@mail.gmail.com>
	<628CCADF-6BCC-4FEB-A6A0-D32F671D10BC@r-project.org>
Message-ID: <CAO-arWMj+xMgFPSwFP2Svsh1b==onhs60E+zkYw0nq2Ej_8J9w@mail.gmail.com>

Thank you very much for pointing me to the correct part of the
documentation (and apologies for that), Simon. Very much appreciated,
b

On 6 June 2012 00:43, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>
> On Jun 5, 2012, at 7:37 PM, Benilton Carvalho wrote:
>
>> Hi,
>>
>> I'm working on a package and observed a behaviour that was suggested
>> to be incompatible with the documentation.
>>
>> The code below:
>>
>> x <- matrix(1:4, 2)
>> dimnames(x) <- list()
>>
>> works just fine. But checking the documentation for dimnames(), it
>> states that if value is a list "its components are either 'NULL' or a
>> character vector with positive length of the appropriate dimension of
>> x".
>>
>> Should dimnames() return an error on the example above?
>>
>
> No, from the docs:
>
> ? ? The replacement method for arrays/matrices coerces vector and
> ? ? factor elements of ?value? to character, but does not dispatch
> ? ? methods for ?as.character?. ?It coerces zero-length elements to
> ? ? ?NULL?, and a zero-length list to ?NULL?.
>
> you are using a 0-length list, so it is coerced to NULL.
>
> Cheers,
> Simon
>
>
>
>> Thank you very much for your attention and time,
>>
>> benilton
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>


From cfriedem at gmail.com  Wed Jun  6 05:27:12 2012
From: cfriedem at gmail.com (Charlie Friedemann)
Date: Tue, 5 Jun 2012 23:27:12 -0400
Subject: [Rd] tcltk wish: Add tclObj.raw method for converting raw vectors
	to tclObj
Message-ID: <ACFC3E8F-613E-464A-9D2B-5083E65A6A03@gmail.com>

Greetings,

I have submitted a bug report / wish to the R Bug tracker (https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=14939), but I'd like to make this request here as well. Essentially, I was wondering if it would be possible to add another c routine to be called by as.TclObj for raw vectors. Right now, as.raw() is supported for objects of type "tclObj" (IIRC this change was made in 2.9 after someone requested it), however there is no corresponding C routine for converting raw vectors into tclObj.  

I suppose the best way to do this is to create a new C routine in the tcltk package analogous to the other RObject to Tcl object routines: RTcl_ObjFromRawVector. Create a new tclObj pointer, use Tcl_NewByteArrayObj() from the Tcl C API to create a byte array of the same length as the input raw vector, and then loop through the RAWSXP object assigning each element in the vector to the Tcl byte array. I'd be happy to submit code for this patch if requested.

This would be extremely helpful. I am using tcl binary sockets and this functionality would allow me to both read and write raw vectors directly from/to Tcl. I can only read raw vectors directly at the moment and have to use strings to get a raw vector into Tcl.

There's also the possibility that this has been attempted and for some reason it didn't work, but I don't know why that would be the case. Thank you for your consideration!

Regards,
Charlie

From arathyramnair at gmail.com  Wed Jun  6 12:16:52 2012
From: arathyramnair at gmail.com (Arathy Ram)
Date: Wed, 6 Jun 2012 15:46:52 +0530
Subject: [Rd] problem in compililng c code using R CMD SHLIB
Message-ID: <CABwKu-8o2eguPFO+KGOTTNDDXKN-WGvKiz0LPQn4W4RTPCq7Uw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120606/0b2c0dbd/attachment.pl>

From simon.urbanek at r-project.org  Wed Jun  6 15:20:55 2012
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 6 Jun 2012 09:20:55 -0400
Subject: [Rd] problem in compililng c code using R CMD SHLIB
In-Reply-To: <CABwKu-8o2eguPFO+KGOTTNDDXKN-WGvKiz0LPQn4W4RTPCq7Uw@mail.gmail.com>
References: <CABwKu-8o2eguPFO+KGOTTNDDXKN-WGvKiz0LPQn4W4RTPCq7Uw@mail.gmail.com>
Message-ID: <D3826A2D-5FC3-4AD7-8739-076373660FFD@r-project.org>


On Jun 6, 2012, at 6:16 AM, Arathy Ram wrote:

> Hello all,
> I was trying to compile a simple C program hello.c using R CMD SHLIB
> hello.c.
> MY R software residing in C:\Program Files\R\R-2.15.0, and also I have
> downloaded the Rtools 2.15.0 and it is in C:\Rtools, MY file(hello.c) is in
> E:\R_dir.
> I have followed the procedures given below
> 1. In a new CMD.exe window I have set the path as
> 
> c:\ Rtools\bin; C:\Rtools\MinGW\bin;C:\Program Files\R\R-2.15.0\bin
> 
> 2. I have changed the directory to E:\ where my file(hello.c) is residing
> E:\>cd \R_dir
> then I have given the command like this
> E:\>cd \R_dir> R CMD SHLIB hello.c
> Then I am getting the following message
> cygwin warning:
> MS-DOS style path detected: E:/PROGRA~1/R/R-214~1.0/etc/
> i386/Makeconf
> Preferred POSIX equivalent is:
> /cygdrive/e/PROGRA~1/R/R-214~1.0/etc/i386/Makeconf
> CYGWIN environment variable option "nodosfilewarning" turns off this
> warning.
> Consult the user's guide for more details about POSIX paths:
>   http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
> Even though I have gone through several discussions in the same topic I am
> not able to resolve my problem. It would be a great help if somebody knows
> what exactly the problem and its solution and favorable suggestions.

There is no problem in what you posted - all you posted is merely a note from cygwin that it prefers different path style, but it's perfectly ok and doesn't affect anything. So what exactly is the problem you're having?

Cheers,
Simon


From friendly at yorku.ca  Wed Jun  6 15:21:40 2012
From: friendly at yorku.ca (Michael Friendly)
Date: Wed, 06 Jun 2012 09:21:40 -0400
Subject: [Rd] stumped on re-building package vignette
Message-ID: <4FCF5964.5080007@yorku.ca>

[Env: Win Xp / StatET 2.0 / R 2.15.0]

In my heplots package I extended the HE-examples.Rnw vignette under 
inst/doc. The package passes R CMD check
on my machine:

* using log directory 'C:/eclipse-3.7/heplots.Rcheck'
* using R version 2.15.0 (2012-03-30)
* using platform: i386-pc-mingw32 (32-bit)
...
* checking sizes of PDF files under 'inst/doc' ... OK
* checking installed files from 'inst/doc' ... OK
* checking examples ... OK
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in 'inst/doc' ... OK
* checking running R code from vignettes ...
'HE-examples.Rnw' ... OK
'repeated.Rnw' ... OK
...

However, on R-Forge and on CRAN, the following error/warning is generated:

Mon Jun  4 20:18:22 2012: Checking package heplots (SVN revision 136) ...
* using log directory ?/mnt/building/build_2012-06-04-20-02/RF_PKG_CHECK/PKGS/heplots.Rcheck?
* using R version 2.15.0 Patched (2012-06-03 r59505)
* using platform: x86_64-unknown-linux-gnu (64-bit)
   ...
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in ?inst/doc? ... OK
* checking running R code from vignettes ...
    ?HE-examples.Rnw? ... [4s/4s] OK
    ?repeated.Rnw? ... [4s/4s] OK
  [9s/9s] OK
* checking re-building of vignette PDFs ... NOTE
Error in re-building vignettes:
   ...
Loading required package: car
Loading required package: MASS
Loading required package: nnet
Error: processing vignette 'HE-examples.Rnw' failed with diagnostics:
cannot open file 'fig/plot-plastic1.pdf'
Execution halted

* checking PDF version of manual ... OK

I am unable to determine why the file fig/plot-plastic1.pdf cannot be 
opened. It is in my inst/doc/fig directory & is regenerated
by the .Rnw file. What could cause this?

Second, I have tried manually running 
tools::compactPDF("HE-examples.pdf) on the .pdf file under inst/doc in 
the package,
but no change is made to the .pdf file. I can't see any way to correct this.

-- 
Michael Friendly     Email: friendly AT yorku DOT ca
Professor, Psychology Dept.
York University      Voice: 416 736-5115 x66249 Fax: 416 736-5814
4700 Keele Street    Web:   http://www.datavis.ca
Toronto, ONT  M3J 1P3 CANADA


From josh.m.ulrich at gmail.com  Wed Jun  6 19:12:53 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 6 Jun 2012 12:12:53 -0500
Subject: [Rd] problem in compililng c code using R CMD SHLIB
In-Reply-To: <D3826A2D-5FC3-4AD7-8739-076373660FFD@r-project.org>
References: <CABwKu-8o2eguPFO+KGOTTNDDXKN-WGvKiz0LPQn4W4RTPCq7Uw@mail.gmail.com>
	<D3826A2D-5FC3-4AD7-8739-076373660FFD@r-project.org>
Message-ID: <CAPPM_gR_FZugJQcnkNp_Y=rM4K-8+cvwtYHG-c5ndcLacqW27A@mail.gmail.com>

On Wed, Jun 6, 2012 at 8:20 AM, Simon Urbanek
<simon.urbanek at r-project.org> wrote:
>
> On Jun 6, 2012, at 6:16 AM, Arathy Ram wrote:
>
>> Hello all,
>> I was trying to compile a simple C program hello.c using R CMD SHLIB
>> hello.c.
>> MY R software residing in C:\Program Files\R\R-2.15.0, and also I have
>> downloaded the Rtools 2.15.0 and it is in C:\Rtools, MY file(hello.c) is in
>> E:\R_dir.
>> I have followed the procedures given below
>> 1. In a new CMD.exe window I have set the path as
>>
>> c:\ Rtools\bin; C:\Rtools\MinGW\bin;C:\Program Files\R\R-2.15.0\bin
>>
>> 2. I have changed the directory to E:\ where my file(hello.c) is residing
>> E:\>cd \R_dir
>> then I have given the command like this
>> E:\>cd \R_dir> R CMD SHLIB hello.c
>> Then I am getting the following message
>> cygwin warning:
>> MS-DOS style path detected: E:/PROGRA~1/R/R-214~1.0/etc/
>> i386/Makeconf
>> Preferred POSIX equivalent is:
>> /cygdrive/e/PROGRA~1/R/R-214~1.0/etc/i386/Makeconf
>> CYGWIN environment variable option "nodosfilewarning" turns off this
>> warning.
>> Consult the user's guide for more details about POSIX paths:
>> ? http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
>> Even though I have gone through several discussions in the same topic I am
>> not able to resolve my problem. It would be a great help if somebody knows
>> what exactly the problem and its solution and favorable suggestions.
>
> There is no problem in what you posted - all you posted is merely a note from cygwin that it prefers different path style, but it's perfectly ok and doesn't affect anything. So what exactly is the problem you're having?
>
Probably has something to do with PATH not being set correctly because
the Cygwin warning points to R-2.14.0 on E:, not R-2.15.0 on C:.

> Cheers,
> Simon
>

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From ripley at stats.ox.ac.uk  Wed Jun  6 20:08:01 2012
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 06 Jun 2012 19:08:01 +0100
Subject: [Rd] problem in compililng c code using R CMD SHLIB
In-Reply-To: <CAPPM_gR_FZugJQcnkNp_Y=rM4K-8+cvwtYHG-c5ndcLacqW27A@mail.gmail.com>
References: <CABwKu-8o2eguPFO+KGOTTNDDXKN-WGvKiz0LPQn4W4RTPCq7Uw@mail.gmail.com>
	<D3826A2D-5FC3-4AD7-8739-076373660FFD@r-project.org>
	<CAPPM_gR_FZugJQcnkNp_Y=rM4K-8+cvwtYHG-c5ndcLacqW27A@mail.gmail.com>
Message-ID: <4FCF9C81.9090707@stats.ox.ac.uk>

On 06/06/2012 18:12, Joshua Ulrich wrote:
> On Wed, Jun 6, 2012 at 8:20 AM, Simon Urbanek
> <simon.urbanek at r-project.org>  wrote:
>>
>> On Jun 6, 2012, at 6:16 AM, Arathy Ram wrote:
>>
>>> Hello all,
>>> I was trying to compile a simple C program hello.c using R CMD SHLIB
>>> hello.c.
>>> MY R software residing in C:\Program Files\R\R-2.15.0, and also I have
>>> downloaded the Rtools 2.15.0 and it is in C:\Rtools, MY file(hello.c) is in
>>> E:\R_dir.
>>> I have followed the procedures given below
>>> 1. In a new CMD.exe window I have set the path as
>>>
>>> c:\ Rtools\bin; C:\Rtools\MinGW\bin;C:\Program Files\R\R-2.15.0\bin
>>>
>>> 2. I have changed the directory to E:\ where my file(hello.c) is residing
>>> E:\>cd \R_dir
>>> then I have given the command like this
>>> E:\>cd \R_dir>  R CMD SHLIB hello.c
>>> Then I am getting the following message
>>> cygwin warning:
>>> MS-DOS style path detected: E:/PROGRA~1/R/R-214~1.0/etc/
>>> i386/Makeconf
>>> Preferred POSIX equivalent is:
>>> /cygdrive/e/PROGRA~1/R/R-214~1.0/etc/i386/Makeconf
>>> CYGWIN environment variable option "nodosfilewarning" turns off this
>>> warning.
>>> Consult the user's guide for more details about POSIX paths:
>>>    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
>>> Even though I have gone through several discussions in the same topic I am
>>> not able to resolve my problem. It would be a great help if somebody knows
>>> what exactly the problem and its solution and favorable suggestions.
>>
>> There is no problem in what you posted - all you posted is merely
>> a  note from cygwin that it prefers different path style, but it's
perfectly ok and doesn't affect anything.

Or put another way, the problem is a user read failure: see below.

 >> So what exactly is the problem you're having?
>>
> Probably has something to do with PATH not being set correctly because
> the Cygwin warning points to R-2.14.0 on E:, not R-2.15.0 on C:.

But as for the note, it *is* discussed in the appropriate manual. Search 
for 'nodosfilewarning' in 
http://cran.r-project.org/doc/manuals/R-admin.html#The-command-line-tools . 
  You most likely will need to set that environment variable.

See what the posting guide has to say about doing your own homework.

fortunes::fortune(14) applies.

The author of the docs you discourteously ignored (and much else you are 
using).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From mdowle at mdowle.plus.com  Wed Jun  6 20:19:45 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Wed, 6 Jun 2012 18:19:45 +0000
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
References: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>
Message-ID: <loom.20120606T194231-377@post.gmane.org>

Dan Tenenbaum <dtenenba <at> fhcrc.org> writes:

> 
> I know this has come up before on R-help
> (http://r.789695.n4.nabble.com/7-arguments-passed-to-Internal-identical-which-
requires-6-td4548460.html)
> but I have a concise reproducible case that I wanted to share.
> 
> Also, please note the Bioconductor scenario which is potentially
> seriously impacted by this.
> The issue arises when a binary version of a package (like my example
> package below) is built under R 2.15.0 Patched but then installed
> under R 2.15.0.  Our package AnnotationDbi (which hundreds of other
> packages depend on) is impacted by this issue to the extent that
> calling virtually any function in it will return something like this:
> Error in ls(2) :
>   7 arguments passed to .Internal(identical) which requires 6
> 
> My concern is that when R 2.15.1 is released and Bioconductor starts
> building all its packages under it, that R 2.15.0 users will start to
> experience this problem. We can ask all users to upgrade to R 2.15.1
> if we have to, but it's not usually the case that a minor point
> release MUST be installed in order to run packages built under it
> (please correct me if I'm wrong). We would much prefer a workaround or
> fix to make an upgrade unnecessary.
> 

I'm seeing the same issue. Installing the latest R-Forge .zip of data.table 
built using 2.15.0 patched, on R 2.15.0 (or 2.14.1 same issue), then running 
data.table(a=1:3) produces the "7 arguments passed to .Internal(identical) 
which requires 6" error.  traceback() and debugger() just display the top level 
call. debug(data.table) and stepping through reveals it is a call to identical
() but just a regular one. No .Internal() call in the package, let alone 
passing 6 or 7 arguments to .Internal.

Not sure how else to debug or trace it. R-Forge is byte compiling data.table 
using R 2.15.0 patched (iiuc), would that make a difference when the byte code 
is loaded into 2.15.0 which doesn't have the new argument in identical()? 

Matthew


From luke-tierney at uiowa.edu  Wed Jun  6 20:29:53 2012
From: luke-tierney at uiowa.edu (luke-tierney at uiowa.edu)
Date: Wed, 6 Jun 2012 13:29:53 -0500
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
In-Reply-To: <loom.20120606T194231-377@post.gmane.org>
References: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>
	<loom.20120606T194231-377@post.gmane.org>
Message-ID: <alpine.DEB.2.02.1206061329380.2432@luke-Latitude>

On Wed, 6 Jun 2012, Matthew Dowle wrote:

> Dan Tenenbaum <dtenenba <at> fhcrc.org> writes:
>
>>
>> I know this has come up before on R-help
>> (http://r.789695.n4.nabble.com/7-arguments-passed-to-Internal-identical-which-
> requires-6-td4548460.html)
>> but I have a concise reproducible case that I wanted to share.
>>
>> Also, please note the Bioconductor scenario which is potentially
>> seriously impacted by this.
>> The issue arises when a binary version of a package (like my example
>> package below) is built under R 2.15.0 Patched but then installed
>> under R 2.15.0.  Our package AnnotationDbi (which hundreds of other
>> packages depend on) is impacted by this issue to the extent that
>> calling virtually any function in it will return something like this:
>> Error in ls(2) :
>>   7 arguments passed to .Internal(identical) which requires 6
>>
>> My concern is that when R 2.15.1 is released and Bioconductor starts
>> building all its packages under it, that R 2.15.0 users will start to
>> experience this problem. We can ask all users to upgrade to R 2.15.1
>> if we have to, but it's not usually the case that a minor point
>> release MUST be installed in order to run packages built under it
>> (please correct me if I'm wrong). We would much prefer a workaround or
>> fix to make an upgrade unnecessary.
>>
>
> I'm seeing the same issue. Installing the latest R-Forge .zip of data.table
> built using 2.15.0 patched, on R 2.15.0 (or 2.14.1 same issue), then running
> data.table(a=1:3) produces the "7 arguments passed to .Internal(identical)
> which requires 6" error.  traceback() and debugger() just display the top level
> call. debug(data.table) and stepping through reveals it is a call to identical
> () but just a regular one. No .Internal() call in the package, let alone
> passing 6 or 7 arguments to .Internal.
>
> Not sure how else to debug or trace it. R-Forge is byte compiling data.table
> using R 2.15.0 patched (iiuc), would that make a difference when the byte code
> is loaded into 2.15.0 which doesn't have the new argument in identical()?

Yes it would.

luke

>
> Matthew
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Luke Tierney
Chair, Statistics and Actuarial Science
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From pdalgd at gmail.com  Wed Jun  6 22:04:03 2012
From: pdalgd at gmail.com (peter dalgaard)
Date: Wed, 6 Jun 2012 22:04:03 +0200
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
In-Reply-To: <alpine.DEB.2.02.1206061329380.2432@luke-Latitude>
References: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>
	<loom.20120606T194231-377@post.gmane.org>
	<alpine.DEB.2.02.1206061329380.2432@luke-Latitude>
Message-ID: <87AF97BC-EF06-4017-887C-49A5EA800A81@gmail.com>

FYI, Brian has backed out the changes to identical() in r59533 of R-patched. Please retry your test codes with the new version. (Due to some ISP mess-up, Brian is temporarily unable to reply in detail himself.)

-pd


On Jun 6, 2012, at 20:29 , <luke-tierney at uiowa.edu> <luke-tierney at uiowa.edu> wrote:

> On Wed, 6 Jun 2012, Matthew Dowle wrote:
> 
>> Dan Tenenbaum <dtenenba <at> fhcrc.org> writes:
>> 
>>> 
>>> I know this has come up before on R-help
>>> (http://r.789695.n4.nabble.com/7-arguments-passed-to-Internal-identical-which-
>> requires-6-td4548460.html)
>>> but I have a concise reproducible case that I wanted to share.
>>> 
>>> Also, please note the Bioconductor scenario which is potentially
>>> seriously impacted by this.
>>> The issue arises when a binary version of a package (like my example
>>> package below) is built under R 2.15.0 Patched but then installed
>>> under R 2.15.0.  Our package AnnotationDbi (which hundreds of other
>>> packages depend on) is impacted by this issue to the extent that
>>> calling virtually any function in it will return something like this:
>>> Error in ls(2) :
>>>  7 arguments passed to .Internal(identical) which requires 6
>>> 
>>> My concern is that when R 2.15.1 is released and Bioconductor starts
>>> building all its packages under it, that R 2.15.0 users will start to
>>> experience this problem. We can ask all users to upgrade to R 2.15.1
>>> if we have to, but it's not usually the case that a minor point
>>> release MUST be installed in order to run packages built under it
>>> (please correct me if I'm wrong). We would much prefer a workaround or
>>> fix to make an upgrade unnecessary.
>>> 
>> 
>> I'm seeing the same issue. Installing the latest R-Forge .zip of data.table
>> built using 2.15.0 patched, on R 2.15.0 (or 2.14.1 same issue), then running
>> data.table(a=1:3) produces the "7 arguments passed to .Internal(identical)
>> which requires 6" error.  traceback() and debugger() just display the top level
>> call. debug(data.table) and stepping through reveals it is a call to identical
>> () but just a regular one. No .Internal() call in the package, let alone
>> passing 6 or 7 arguments to .Internal.
>> 
>> Not sure how else to debug or trace it. R-Forge is byte compiling data.table
>> using R 2.15.0 patched (iiuc), would that make a difference when the byte code
>> is loaded into 2.15.0 which doesn't have the new argument in identical()?
> 
> Yes it would.
> 
> luke
> 
>> 
>> Matthew
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>> 
> 
> -- 
> Luke Tierney
> Chair, Statistics and Actuarial Science
> Ralph E. Wareham Professor of Mathematical Sciences
> University of Iowa                  Phone:             319-335-3386
> Department of Statistics and        Fax:               319-335-3017
>   Actuarial Science
> 241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
> Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From timhesterberg at gmail.com  Thu Jun  7 00:53:50 2012
From: timhesterberg at gmail.com (Tim Hesterberg)
Date: Wed, 6 Jun 2012 15:53:50 -0700
Subject: [Rd] suggest that as.double( something double ) not make a copy
Message-ID: <CAAWNEwaLpwLxT58B6PAXm7r=S9fnSjKUB3xT1XrrFMwQgYzDMw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120606/6312723e/attachment.pl>

From simon.urbanek at r-project.org  Thu Jun  7 02:15:57 2012
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 6 Jun 2012 20:15:57 -0400
Subject: [Rd] suggest that as.double( something double ) not make a copy
In-Reply-To: <CAAWNEwaLpwLxT58B6PAXm7r=S9fnSjKUB3xT1XrrFMwQgYzDMw@mail.gmail.com>
References: <CAAWNEwaLpwLxT58B6PAXm7r=S9fnSjKUB3xT1XrrFMwQgYzDMw@mail.gmail.com>
Message-ID: <DCA9D331-15A1-44E8-BA2E-C964097DEAC5@r-project.org>

On Jun 6, 2012, at 6:53 PM, Tim Hesterberg wrote:

> I've been playing with passing arguments to .C(), and found that replacing
>    as.double(x)
> with
>    if(is.double(x)) x else as.double(x)
> saves time and avoids one copy, in the case that x is already double.
> 

No, it doesn't:

> x=rnorm(10)
> tracemem(x)
[1] "<0x100c59cb0>"
> invisible(.C("foo",x))
tracemem[0x100c59cb0 -> 0x100c59c30]: .C 
tracemem[0x100c59c30 -> 0x100ca4298]: .C 
> x=rnorm(10)
> tracemem(x)
[1] "<0x100ca41f0>"
> invisible(.C("foo",as.double(x)))
tracemem[0x100ca41f0 -> 0x102cdc980]: .C 
tracemem[0x102cdc980 -> 0x102cdca00]: .C 

or rather more easily:

> x=rnorm(10)
> tracemem(x)
[1] "<0x102ae0ff0>"
> as.double(x)
 [1] -0.1027767  0.4018732 -1.3412045  0.8153615  1.8245356 -0.2147280
 [7]  1.1298404  1.1026897 -1.1340612 -0.2346464


as.double(x) is not stupid and doesn't copy if not needed.

However, it is a very common mistake to forget about the fact that as.double() has to strip attributes, so if you pass a matrix, you are always forcing a copy:

> x=matrix(0,2,2)
> tracemem(x)
[1] "<0x100b0f098>"
> as.double(x)
tracemem[0x100b0f098 -> 0x1008b52c8]: 
[1] 0 0 0 0

That is not the fault of as.double() but rather of the user since you don't really need to strip attributes when calling .C as it doesn't care.

As usual, I can only say don't use .C() ... ;)

Cheers,
Simon


> I suggest modifying as.double to avoid the extra copy and just
> return x, when x is already double. Similarly for as.integer, etc.


From mdowle at mdowle.plus.com  Thu Jun  7 03:12:36 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Thu, 7 Jun 2012 01:12:36 +0000
Subject: [Rd] suggest that as.double( something double ) not make a copy
References: <CAAWNEwaLpwLxT58B6PAXm7r=S9fnSjKUB3xT1XrrFMwQgYzDMw@mail.gmail.com>
Message-ID: <loom.20120607T024354-968@post.gmane.org>

Tim Hesterberg <timhesterberg <at> gmail.com> writes:

> I've been playing with passing arguments to .C(), and found that replacing
>     as.double(x)
> with
>     if(is.double(x)) x else as.double(x)
> saves time and avoids one copy, in the case that x is already double.
> 
> I suggest modifying as.double to avoid the extra copy and just
> return x, when x is already double. Similarly for as.integer, etc.
> 

But as.double() already doesn't copy if its argument is already double. Unless, 
your double has attributes?

>From coerce.c :

if(TYPEOF(x) == type) {
    if(ATTRIB(x) == R_NilValue) return x;
    ans = NAMED(x) ? duplicate(x) : x;
    CLEAR_ATTRIB(ans);
    return ans;
}

quick test :

> x=1
> .Internal(inspect(x))
@0000000003E23620 14 REALSXP g0c1 [NAM(2)] (len=1, tl=0) 1
> .Internal(inspect(as.double(x)))   # no copy
@0000000003E23620 14 REALSXP g0c1 [NAM(2)] (len=1, tl=0) 1
> x=c(foo=1)   # give x some attributes, say names
> x
foo 
  1 
> .Internal(inspect(x))
@0000000003E234D0 14 REALSXP g0c1 [NAM(1),ATT] (len=1, tl=0) 1
ATTRIB:
  @0000000003D54910 02 LISTSXP g0c0 [] 
    TAG: @0000000000380088 01 SYMSXP g0c0 [MARK,gp=0x4000] "names"
    @0000000003E234A0 16 STRSXP g0c1 [NAM(2)] (len=1, tl=0)
      @0000000003E23560 09 CHARSXP g0c1 [gp=0x21] "foo"
> .Internal(inspect(as.double(x)))   # strips attribs returning new obj
@0000000003E233B0 14 REALSXP g0c1 [] (len=1, tl=0) 1
> as.double(x)
[1] 1
> 

Attribute stripping is documented in ?as.double. Rather than as.double() on the 
R side, you could use coerceVector() on the C side, which might be easier to 
use via .Call than .C since it takes an SEXP. Looking at coerceVector in 
coerce.c its first line returns immediately if type is already the desired 
type, with no attribute stripping, so that seems like the way to go?

If your double has no attributes then I'm barking up the wrong tree.

Matthew


From hb at biostat.ucsf.edu  Thu Jun  7 04:10:22 2012
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Wed, 6 Jun 2012 19:10:22 -0700
Subject: [Rd] suggest that as.double( something double ) not make a copy
In-Reply-To: <loom.20120607T024354-968@post.gmane.org>
References: <CAAWNEwaLpwLxT58B6PAXm7r=S9fnSjKUB3xT1XrrFMwQgYzDMw@mail.gmail.com>
	<loom.20120607T024354-968@post.gmane.org>
Message-ID: <CAFDcVCQEnzPns2Z4O8=T0X5OnCxcDir=3utRvHhLOwweqqxisQ@mail.gmail.com>

Check if this is the same as what was done in R v2.6.0 (2007) - from
http://cran.r-project.org/bin/windows/base/old/2.6.0/NEWS.R-2.6.0:

    o	as.vector() and the default methods of as.character(),
	as.complex(), as.double(), as.expression(), as.integer(),
	as.logical() and as.raw() no longer duplicate in most cases
	where the object is unchanged.  (Beware: some code has been
	written that invalidly assumes that they do duplicate, often
	when using .C/.Fortran(DUP=FALSE).)

See also R-devel '[Rd] Suggestion for memory optimization and
as.double() with friends', March 28-29 2007
[https://stat.ethz.ch/pipermail/r-devel/2007-March/045109.html].

/Henrik


On Wed, Jun 6, 2012 at 6:12 PM, Matthew Dowle <mdowle at mdowle.plus.com> wrote:
> Tim Hesterberg <timhesterberg <at> gmail.com> writes:
>
>> I've been playing with passing arguments to .C(), and found that replacing
>> ? ? as.double(x)
>> with
>> ? ? if(is.double(x)) x else as.double(x)
>> saves time and avoids one copy, in the case that x is already double.
>>
>> I suggest modifying as.double to avoid the extra copy and just
>> return x, when x is already double. Similarly for as.integer, etc.
>>
>
> But as.double() already doesn't copy if its argument is already double. Unless,
> your double has attributes?
>
> >From coerce.c :
>
> if(TYPEOF(x) == type) {
> ? ?if(ATTRIB(x) == R_NilValue) return x;
> ? ?ans = NAMED(x) ? duplicate(x) : x;
> ? ?CLEAR_ATTRIB(ans);
> ? ?return ans;
> }
>
> quick test :
>
>> x=1
>> .Internal(inspect(x))
> @0000000003E23620 14 REALSXP g0c1 [NAM(2)] (len=1, tl=0) 1
>> .Internal(inspect(as.double(x))) ? # no copy
> @0000000003E23620 14 REALSXP g0c1 [NAM(2)] (len=1, tl=0) 1
>> x=c(foo=1) ? # give x some attributes, say names
>> x
> foo
> ?1
>> .Internal(inspect(x))
> @0000000003E234D0 14 REALSXP g0c1 [NAM(1),ATT] (len=1, tl=0) 1
> ATTRIB:
> ?@0000000003D54910 02 LISTSXP g0c0 []
> ? ?TAG: @0000000000380088 01 SYMSXP g0c0 [MARK,gp=0x4000] "names"
> ? ?@0000000003E234A0 16 STRSXP g0c1 [NAM(2)] (len=1, tl=0)
> ? ? ?@0000000003E23560 09 CHARSXP g0c1 [gp=0x21] "foo"
>> .Internal(inspect(as.double(x))) ? # strips attribs returning new obj
> @0000000003E233B0 14 REALSXP g0c1 [] (len=1, tl=0) 1
>> as.double(x)
> [1] 1
>>
>
> Attribute stripping is documented in ?as.double. Rather than as.double() on the
> R side, you could use coerceVector() on the C side, which might be easier to
> use via .Call than .C since it takes an SEXP. Looking at coerceVector in
> coerce.c its first line returns immediately if type is already the desired
> type, with no attribute stripping, so that seems like the way to go?
>
> If your double has no attributes then I'm barking up the wrong tree.
>
> Matthew
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Thu Jun  7 10:57:59 2012
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 7 Jun 2012 09:57:59 +0100
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
In-Reply-To: <87AF97BC-EF06-4017-887C-49A5EA800A81@gmail.com>
References: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>
	<loom.20120606T194231-377@post.gmane.org>
	<alpine.DEB.2.02.1206061329380.2432@luke-Latitude>
	<87AF97BC-EF06-4017-887C-49A5EA800A81@gmail.com>
Message-ID: <4FD06D17.8060206@stats.ox.ac.uk>

On 06/06/2012 21:04, peter dalgaard wrote:
> FYI, Brian has backed out the changes to identical() in r59533 of R-patched. Please retry your test codes with the new version. (Due to some ISP mess-up, Brian is temporarily unable to reply in detail himself.)
>
> -pd

Some comments (now my ISP has repaired its network and I can send from 
the machine on which I did this):

- AFAICS this only applies to binary distributions, not mentioned by the OP.

- There has never been any guarantee of forwards compatibility.  If you 
want a package to run under 2.x.y, install it under 2.x.y.  There is 
limited support for backwards compatibility, so packages installed under 
2.x.y will _normally_ run under 2.x.z for z > y.

So the whining appeared to be specious: if BioC want to distribute 
binary packages which run under all 2.15.x, they need to build them 
under 2.15.0, *and* check that they run under later versions.  (AFAIK 
the CRAN binary package providers expect users to be using the current 
version of R.)

R-patched should be thought of as having an intermediate version number 
for this purpose, e.g. currently > 2.15.0, < 2.15.1.

- The issue is package installations which copy code from the current 
version of R into the package. That is not a good idea, and in general 
not recommended.  We see 3 main circumstances:

+ S4 methods.  This was first reported many years ago, and bites 
frequently.  It was deemed a 'feature'.  The usual instance is that the 
default method is copied from a function in another contributed package 
which is subsequently updated, but it can also apply to the packages in 
R itself.

+ Some packages making functions into S3 default methods.  The advice 
there has changed a while ago, to write a wrapper instead of using
foo.default <- base::foo
but there are lots of packages not doing that.

+ Byte compilation, which in some cases removes the closure wrappers 
from simple .Internal calls, and so captures the .Internal call at the 
time of compilation.

- In the particular case of identical(), the C code has generally been 
written for backwards and attempted future compatibility, but that was 
not the case for the version in 2.15.0.  (It is the case for the version 
in R-devel and that now in R-patched: I didn't back out all the changes.)

But because identical() seems to be captured more than we anticipated 
and the change was not that important, I reverted it.  But if a similar 
change is needed for an important enough bug fix, it will go into 
R-patched (and there is one there now).


So the general principles are

- install a package under the current version of R, or perhaps an 
earlier patch release of the same series.  If using R-devel, be prepared 
to re-install any package you use (in practice this is rare: for example 
XML, compositions, timeDate and timeSeries needed to be re-installed 
since 2-15-branch was branched).

- if any dependency of an S4-using package changes, re-install the 
package.  And this includes the standard packages (which is why they 
should be listed in Depends:).   Uwe's CRAN Windows binary builder does 
do that, so you may need to re-install the binary package even though 
its version number has not changed.


>
> On Jun 6, 2012, at 20:29 ,<luke-tierney at uiowa.edu>  <luke-tierney at uiowa.edu>  wrote:
>
>> On Wed, 6 Jun 2012, Matthew Dowle wrote:
>>
>>> Dan Tenenbaum<dtenenba<at>  fhcrc.org>  writes:
>>>
>>>>
>>>> I know this has come up before on R-help
>>>> (http://r.789695.n4.nabble.com/7-arguments-passed-to-Internal-identical-which-
>>> requires-6-td4548460.html)
>>>> but I have a concise reproducible case that I wanted to share.
>>>>
>>>> Also, please note the Bioconductor scenario which is potentially
>>>> seriously impacted by this.
>>>> The issue arises when a binary version of a package (like my example
>>>> package below) is built under R 2.15.0 Patched but then installed
>>>> under R 2.15.0.  Our package AnnotationDbi (which hundreds of other
>>>> packages depend on) is impacted by this issue to the extent that
>>>> calling virtually any function in it will return something like this:
>>>> Error in ls(2) :
>>>>   7 arguments passed to .Internal(identical) which requires 6
>>>>
>>>> My concern is that when R 2.15.1 is released and Bioconductor starts
>>>> building all its packages under it, that R 2.15.0 users will start to
>>>> experience this problem. We can ask all users to upgrade to R 2.15.1
>>>> if we have to, but it's not usually the case that a minor point
>>>> release MUST be installed in order to run packages built under it
>>>> (please correct me if I'm wrong). We would much prefer a workaround or
>>>> fix to make an upgrade unnecessary.
>>>>
>>>
>>> I'm seeing the same issue. Installing the latest R-Forge .zip of data.table
>>> built using 2.15.0 patched, on R 2.15.0 (or 2.14.1 same issue), then running
>>> data.table(a=1:3) produces the "7 arguments passed to .Internal(identical)
>>> which requires 6" error.  traceback() and debugger() just display the top level
>>> call. debug(data.table) and stepping through reveals it is a call to identical
>>> () but just a regular one. No .Internal() call in the package, let alone
>>> passing 6 or 7 arguments to .Internal.
>>>
>>> Not sure how else to debug or trace it. R-Forge is byte compiling data.table
>>> using R 2.15.0 patched (iiuc), would that make a difference when the byte code
>>> is loaded into 2.15.0 which doesn't have the new argument in identical()?
>>
>> Yes it would.
>>
>> luke
>>
>>>
>>> Matthew


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From mdowle at mdowle.plus.com  Thu Jun  7 11:06:32 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Thu, 7 Jun 2012 09:06:32 +0000
Subject: [Rd] suggest that as.double( something double ) not make a copy
References: <CAAWNEwaLpwLxT58B6PAXm7r=S9fnSjKUB3xT1XrrFMwQgYzDMw@mail.gmail.com>
	<loom.20120607T024354-968@post.gmane.org>
	<CAFDcVCQEnzPns2Z4O8=T0X5OnCxcDir=3utRvHhLOwweqqxisQ@mail.gmail.com>
Message-ID: <loom.20120607T105926-279@post.gmane.org>

Henrik Bengtsson <hb <at> biostat.ucsf.edu> writes:

> See also R-devel '[Rd] Suggestion for memory optimization and
> as.double() with friends', March 28-29 2007
> [https://stat.ethz.ch/pipermail/r-devel/2007-March/045109.html].
> 
> /Henrik

Interesting thread. So we have you to thank for instigating that 5 years ago: 
thanks!

Matthew


From mdowle at mdowle.plus.com  Thu Jun  7 12:12:37 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Thu, 7 Jun 2012 11:12:37 +0100
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
In-Reply-To: <4FD06D17.8060206@stats.ox.ac.uk>
References: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>
	<loom.20120606T194231-377@post.gmane.org>
	<alpine.DEB.2.02.1206061329380.2432@luke-Latitude>
	<87AF97BC-EF06-4017-887C-49A5EA800A81@gmail.com>
	<4FD06D17.8060206@stats.ox.ac.uk>
Message-ID: <8da1022c21af242215c3ed864819ff82.squirrel@webmail.plus.net>


Prof Ripley wrote :
> (AFAIK the CRAN binary package providers expect users to be
> using the current version of R.)

I guess it's quite common practice for very many users to fail that
expectation. I for one do. I'm used to seeing "Warning: package <x> was
build using <the latest R>" when installing from CRAN. But if the package
states "Depends (R >= 2.12.0)", for example, then I assume it's ok to use
it in R 2.14.1, for instance. As long as it passes its test suite in the
version of R I'm using, that's the main thing. Is that wrong?

Matthew


From ripley at stats.ox.ac.uk  Thu Jun  7 12:20:34 2012
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 7 Jun 2012 11:20:34 +0100
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
In-Reply-To: <8da1022c21af242215c3ed864819ff82.squirrel@webmail.plus.net>
References: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>
	<loom.20120606T194231-377@post.gmane.org>
	<alpine.DEB.2.02.1206061329380.2432@luke-Latitude>
	<87AF97BC-EF06-4017-887C-49A5EA800A81@gmail.com>
	<4FD06D17.8060206@stats.ox.ac.uk>
	<8da1022c21af242215c3ed864819ff82.squirrel@webmail.plus.net>
Message-ID: <4FD08072.7000107@stats.ox.ac.uk>

On 07/06/2012 11:12, Matthew Dowle wrote:
>
> Prof Ripley wrote :
>> (AFAIK the CRAN binary package providers expect users to be
>> using the current version of R.)
>
> I guess it's quite common practice for very many users to fail that
> expectation. I for one do. I'm used to seeing "Warning: package<x>  was
> build using<the latest R>" when installing from CRAN. But if the package
> states "Depends (R>= 2.12.0)", for example, then I assume it's ok to use
> it in R 2.14.1, for instance. As long as it passes its test suite in the
> version of R I'm using, that's the main thing. Is that wrong?

It usually works.  But when it doesn't, the choices are

- update the R.
- install from the sources.

That Depends line is about source installs.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From mdowle at mdowle.plus.com  Thu Jun  7 12:40:31 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Thu, 7 Jun 2012 11:40:31 +0100
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
In-Reply-To: <4FD08072.7000107@stats.ox.ac.uk>
References: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>
	<loom.20120606T194231-377@post.gmane.org>
	<alpine.DEB.2.02.1206061329380.2432@luke-Latitude>
	<87AF97BC-EF06-4017-887C-49A5EA800A81@gmail.com>
	<4FD06D17.8060206@stats.ox.ac.uk>
	<8da1022c21af242215c3ed864819ff82.squirrel@webmail.plus.net>
	<4FD08072.7000107@stats.ox.ac.uk>
Message-ID: <fb9978ad8c003f6a3bdfa90224389518.squirrel@webmail.plus.net>


Prof Ripley wrote :
> That Depends line is about source installs.

I can't see that documented in either Writing R Extensions or
?install.packages. Is it somewhere else? I thought Depends applied to
binaries from CRAN too, which is the default method on Windows and Mac.

Matthew


From ripley at stats.ox.ac.uk  Thu Jun  7 12:55:52 2012
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 7 Jun 2012 11:55:52 +0100
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
In-Reply-To: <fb9978ad8c003f6a3bdfa90224389518.squirrel@webmail.plus.net>
References: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>
	<loom.20120606T194231-377@post.gmane.org>
	<alpine.DEB.2.02.1206061329380.2432@luke-Latitude>
	<87AF97BC-EF06-4017-887C-49A5EA800A81@gmail.com>
	<4FD06D17.8060206@stats.ox.ac.uk>
	<8da1022c21af242215c3ed864819ff82.squirrel@webmail.plus.net>
	<4FD08072.7000107@stats.ox.ac.uk>
	<fb9978ad8c003f6a3bdfa90224389518.squirrel@webmail.plus.net>
Message-ID: <4FD088B8.7080100@stats.ox.ac.uk>

On 07/06/2012 11:40, Matthew Dowle wrote:
>
> Prof Ripley wrote :
>> That Depends line is about source installs.
>
> I can't see that documented in either Writing R Extensions or
> ?install.packages. Is it somewhere else? I thought Depends applied to
> binaries from CRAN too, which is the default method on Windows and Mac.

That field is documented under the description of a *source* package 
(see the first line of section 1.1, and it is in that section) and is 
simply copied from the source package for binary installs.  It is the 
extra line added to the DESCRIPTION file, e.g.

Built: R 2.15.0; x86_64-pc-mingw32; 2012-04-02 09:27:07 UTC; windows

that tells you the version a binary package was built under 
(approximately for R-patched and R-devel), and library() checks.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From mdowle at mdowle.plus.com  Thu Jun  7 13:49:15 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Thu, 7 Jun 2012 12:49:15 +0100
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
In-Reply-To: <4FD088B8.7080100@stats.ox.ac.uk>
References: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>
	<loom.20120606T194231-377@post.gmane.org>
	<alpine.DEB.2.02.1206061329380.2432@luke-Latitude>
	<87AF97BC-EF06-4017-887C-49A5EA800A81@gmail.com>
	<4FD06D17.8060206@stats.ox.ac.uk>
	<8da1022c21af242215c3ed864819ff82.squirrel@webmail.plus.net>
	<4FD08072.7000107@stats.ox.ac.uk>
	<fb9978ad8c003f6a3bdfa90224389518.squirrel@webmail.plus.net>
	<4FD088B8.7080100@stats.ox.ac.uk>
Message-ID: <1c8ba941835fdf12b34e1b1064a5dc68.squirrel@webmail.plus.net>

> On 07/06/2012 11:40, Matthew Dowle wrote:
>>
>> Prof Ripley wrote :
>>> That Depends line is about source installs.
>>
>> I can't see that documented in either Writing R Extensions or
>> ?install.packages. Is it somewhere else? I thought Depends applied to
>> binaries from CRAN too, which is the default method on Windows and Mac.
>
> That field is documented under the description of a *source* package
> (see the first line of section 1.1, and it is in that section) and is
> simply copied from the source package for binary installs.  It is the
> extra line added to the DESCRIPTION file, e.g.
>
> Built: R 2.15.0; x86_64-pc-mingw32; 2012-04-02 09:27:07 UTC; windows
>
> that tells you the version a binary package was built under
> (approximately for R-patched and R-devel), and library() checks.

I'm fairly sure I understand all that. I'm still missing something more
basic probably. Consider the follow workflow :

I look on CRAN at package boot. Its webpage states "Depends R (>=
2.14.0)". I'm a user running R and I know I use 2.14.1, so I think great I
can use it. I install it as follows.

> version
version.string R version 2.14.1 (2011-12-22)
> install.packages("boot")
trying URL
'http://cran.ma.imperial.ac.uk/bin/windows/contrib/2.14/boot_1.3-4.zip'
Content type 'application/zip' length 469615 bytes (458 Kb)
opened URL
downloaded 458 Kb

package ?boot? successfully unpacked and MD5 sums checked

> require(boot)
Loading required package: boot
Warning message:
package ?boot? was built under R version 2.14.2
>

Does this mean that CRAN maintainers expect me to run the latest version
of the major release I'm using (R 2.14.2 in this case), not the current
release of R (R 2.15.0 currently) as you wrote earlier?   If that's the
case I never realised it before, but that seems very reasonable.  When I
ran the above just now I expected it to say "package 'boot' was built
under R version 2.15.0".  But it didn't, it said 2.14.2.  So it seems to
be my misunderstanding.

Matthew


From ripley at stats.ox.ac.uk  Thu Jun  7 14:14:07 2012
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 7 Jun 2012 13:14:07 +0100
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
In-Reply-To: <1c8ba941835fdf12b34e1b1064a5dc68.squirrel@webmail.plus.net>
References: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>
	<loom.20120606T194231-377@post.gmane.org>
	<alpine.DEB.2.02.1206061329380.2432@luke-Latitude>
	<87AF97BC-EF06-4017-887C-49A5EA800A81@gmail.com>
	<4FD06D17.8060206@stats.ox.ac.uk>
	<8da1022c21af242215c3ed864819ff82.squirrel@webmail.plus.net>
	<4FD08072.7000107@stats.ox.ac.uk>
	<fb9978ad8c003f6a3bdfa90224389518.squirrel@webmail.plus.net>
	<4FD088B8.7080100@stats.ox.ac.uk>
	<1c8ba941835fdf12b34e1b1064a5dc68.squirrel@webmail.plus.net>
Message-ID: <4FD09B0F.3010309@stats.ox.ac.uk>

On 07/06/2012 12:49, Matthew Dowle wrote:
>> On 07/06/2012 11:40, Matthew Dowle wrote:
>>>
>>> Prof Ripley wrote :
>>>> That Depends line is about source installs.
>>>
>>> I can't see that documented in either Writing R Extensions or
>>> ?install.packages. Is it somewhere else? I thought Depends applied to
>>> binaries from CRAN too, which is the default method on Windows and Mac.
>>
>> That field is documented under the description of a *source* package
>> (see the first line of section 1.1, and it is in that section) and is
>> simply copied from the source package for binary installs.  It is the
>> extra line added to the DESCRIPTION file, e.g.
>>
>> Built: R 2.15.0; x86_64-pc-mingw32; 2012-04-02 09:27:07 UTC; windows
>>
>> that tells you the version a binary package was built under
>> (approximately for R-patched and R-devel), and library() checks.
>
> I'm fairly sure I understand all that. I'm still missing something more
> basic probably. Consider the follow workflow :
>
> I look on CRAN at package boot. Its webpage states "Depends R (>=
> 2.14.0)". I'm a user running R and I know I use 2.14.1, so I think great I
> can use it. I install it as follows.
>
>> version
> version.string R version 2.14.1 (2011-12-22)
>> install.packages("boot")
> trying URL
> 'http://cran.ma.imperial.ac.uk/bin/windows/contrib/2.14/boot_1.3-4.zip'
> Content type 'application/zip' length 469615 bytes (458 Kb)
> opened URL
> downloaded 458 Kb
>
> package ?boot? successfully unpacked and MD5 sums checked
>
>> require(boot)
> Loading required package: boot
> Warning message:
> package ?boot? was built under R version 2.14.2
>>
>
> Does this mean that CRAN maintainers expect me to run the latest version
> of the major release I'm using (R 2.14.2 in this case), not the current
> release of R (R 2.15.0 currently) as you wrote earlier?   If that's the
> case I never realised it before, but that seems very reasonable.  When I
> ran the above just now I expected it to say "package 'boot' was built
> under R version 2.15.0".  But it didn't, it said 2.14.2.  So it seems to
> be my misunderstanding.

2.15.x and 2.14.x are different series, with different binary repos.

>
> Matthew
>
>
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From simon.urbanek at r-project.org  Thu Jun  7 14:16:18 2012
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 7 Jun 2012 08:16:18 -0400
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
In-Reply-To: <1c8ba941835fdf12b34e1b1064a5dc68.squirrel@webmail.plus.net>
References: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>
	<loom.20120606T194231-377@post.gmane.org>
	<alpine.DEB.2.02.1206061329380.2432@luke-Latitude>
	<87AF97BC-EF06-4017-887C-49A5EA800A81@gmail.com>
	<4FD06D17.8060206@stats.ox.ac.uk>
	<8da1022c21af242215c3ed864819ff82.squirrel@webmail.plus.net>
	<4FD08072.7000107@stats.ox.ac.uk>
	<fb9978ad8c003f6a3bdfa90224389518.squirrel@webmail.plus.net>
	<4FD088B8.7080100@stats.ox.ac.uk>
	<1c8ba941835fdf12b34e1b1064a5dc68.squirrel@webmail.plus.net>
Message-ID: <285EA857-F185-4F13-AA17-CEF37F9E4B89@r-project.org>


On Jun 7, 2012, at 7:49 AM, Matthew Dowle wrote:

>> On 07/06/2012 11:40, Matthew Dowle wrote:
>>> 
>>> Prof Ripley wrote :
>>>> That Depends line is about source installs.
>>> 
>>> I can't see that documented in either Writing R Extensions or
>>> ?install.packages. Is it somewhere else? I thought Depends applied to
>>> binaries from CRAN too, which is the default method on Windows and Mac.
>> 
>> That field is documented under the description of a *source* package
>> (see the first line of section 1.1, and it is in that section) and is
>> simply copied from the source package for binary installs.  It is the
>> extra line added to the DESCRIPTION file, e.g.
>> 
>> Built: R 2.15.0; x86_64-pc-mingw32; 2012-04-02 09:27:07 UTC; windows
>> 
>> that tells you the version a binary package was built under
>> (approximately for R-patched and R-devel), and library() checks.
> 
> I'm fairly sure I understand all that. I'm still missing something more
> basic probably. Consider the follow workflow :
> 
> I look on CRAN at package boot. Its webpage states "Depends R (>=
> 2.14.0)". I'm a user running R and I know I use 2.14.1, so I think great I
> can use it. I install it as follows.
> 
>> version
> version.string R version 2.14.1 (2011-12-22)
>> install.packages("boot")
> trying URL
> 'http://cran.ma.imperial.ac.uk/bin/windows/contrib/2.14/boot_1.3-4.zip'
> Content type 'application/zip' length 469615 bytes (458 Kb)
> opened URL
> downloaded 458 Kb
> 
> package ?boot? successfully unpacked and MD5 sums checked
> 
>> require(boot)
> Loading required package: boot
> Warning message:
> package ?boot? was built under R version 2.14.2
>> 
> 
> Does this mean that CRAN maintainers expect me to run the latest version
> of the major release I'm using (R 2.14.2 in this case), not the current
> release of R (R 2.15.0 currently) as you wrote earlier?

You are expected to run the latest patch version of your major.minor R version (ideally, you should be running the latest release but you don't have to if you are ok with getting no updates).


>   If that's the
> case I never realised it before, but that seems very reasonable.  When I
> ran the above just now I expected it to say "package 'boot' was built
> under R version 2.15.0".  But it didn't, it said 2.14.2.  So it seems to
> be my misunderstanding.
> 

Packages are specific to the major.minor version, we don't guarantee any compatibility across non-patch versions, i.e. you cannot expect package binary for R 2.15.0 to work in R 2.14.2 or vice versa. If you have R x.y.z then you are asking for binaries for R x.y.* - in your case you're running 2.14.2 so you get the latest build of the package for R 2.14.*. Have a look at CRAN, e.g.
http://cran.r-project.org/bin/windows/contrib/
you will see separate packages for every x.y version of R.

Cheers,
Simon


From mdowle at mdowle.plus.com  Thu Jun  7 14:44:15 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Thu, 7 Jun 2012 13:44:15 +0100
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
In-Reply-To: <4FD09B0F.3010309@stats.ox.ac.uk>
References: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>
	<loom.20120606T194231-377@post.gmane.org>
	<alpine.DEB.2.02.1206061329380.2432@luke-Latitude>
	<87AF97BC-EF06-4017-887C-49A5EA800A81@gmail.com>
	<4FD06D17.8060206@stats.ox.ac.uk>
	<8da1022c21af242215c3ed864819ff82.squirrel@webmail.plus.net>
	<4FD08072.7000107@stats.ox.ac.uk>
	<fb9978ad8c003f6a3bdfa90224389518.squirrel@webmail.plus.net>
	<4FD088B8.7080100@stats.ox.ac.uk>
	<1c8ba941835fdf12b34e1b1064a5dc68.squirrel@webmail.plus.net>
	<4FD09B0F.3010309@stats.ox.ac.uk>
Message-ID: <3c35bfa99153dbdb774e64f9e18af312.squirrel@webmail.plus.net>

> On 07/06/2012 12:49, Matthew Dowle wrote:
>>> On 07/06/2012 11:40, Matthew Dowle wrote:
>>>>
>>>> Prof Ripley wrote :
>>>>> That Depends line is about source installs.
>>>>
>>>> I can't see that documented in either Writing R Extensions or
>>>> ?install.packages. Is it somewhere else? I thought Depends applied to
>>>> binaries from CRAN too, which is the default method on Windows and
>>>> Mac.
>>>
>>> That field is documented under the description of a *source* package
>>> (see the first line of section 1.1, and it is in that section) and is
>>> simply copied from the source package for binary installs.  It is the
>>> extra line added to the DESCRIPTION file, e.g.
>>>
>>> Built: R 2.15.0; x86_64-pc-mingw32; 2012-04-02 09:27:07 UTC; windows
>>>
>>> that tells you the version a binary package was built under
>>> (approximately for R-patched and R-devel), and library() checks.
>>
>> I'm fairly sure I understand all that. I'm still missing something more
>> basic probably. Consider the follow workflow :
>>
>> I look on CRAN at package boot. Its webpage states "Depends R (>=
>> 2.14.0)". I'm a user running R and I know I use 2.14.1, so I think great
>> I
>> can use it. I install it as follows.
>>
>>> version
>> version.string R version 2.14.1 (2011-12-22)
>>> install.packages("boot")
>> trying URL
>> 'http://cran.ma.imperial.ac.uk/bin/windows/contrib/2.14/boot_1.3-4.zip'
>> Content type 'application/zip' length 469615 bytes (458 Kb)
>> opened URL
>> downloaded 458 Kb
>>
>> package ?boot? successfully unpacked and MD5 sums checked
>>
>>> require(boot)
>> Loading required package: boot
>> Warning message:
>> package ?boot? was built under R version 2.14.2
>>>
>>
>> Does this mean that CRAN maintainers expect me to run the latest version
>> of the major release I'm using (R 2.14.2 in this case), not the current
>> release of R (R 2.15.0 currently) as you wrote earlier?   If that's the
>> case I never realised it before, but that seems very reasonable.  When I
>> ran the above just now I expected it to say "package 'boot' was built
>> under R version 2.15.0".  But it didn't, it said 2.14.2.  So it seems to
>> be my misunderstanding.
>
> 2.15.x and 2.14.x are different series, with different binary repos.

Thanks. So CRAN will continue to build and check new versions of packages
using R 2.14.2 in the 2.14.x repo, whilst R 2.15.x progresses separately.
I'm familiar with r-oldrel results on CRAN package check results page, but
for some reason I had missed the nuance there's a binary repo too for
r-oldrel. That's great.

Matthew


From alex.holehouse at gmail.com  Thu Jun  7 19:32:01 2012
From: alex.holehouse at gmail.com (alexholehouse)
Date: Thu, 7 Jun 2012 10:32:01 -0700 (PDT)
Subject: [Rd] Lack of -O2 (or -O) gcc compiler flag causes package
 installation failure
Message-ID: <1339090321320-4632723.post@n4.nabble.com>

Hello all - first time poster long time reader,

I'm currently working on a package, and was interested to compare
performance with and without gcc/g++ -O based optimization. I can turn the
-O flags off with a ~.R/Makevars file, but when I do something odd happens.
The package installs fine when gcc is fed -O2 or -O3

*install with*
R CMD INSTALL --configure-args="CFLAGS=-g CXXFLAGS=-g --disable-openmp"
package.tar.gz
/NB: I have opnemp switched off here as it's not supported by Apple's GCC
(4.2.1). When the code runs on a linux cluster it compiles with openmp and
runs no problem./

*makevars file*
CC = gcc -arch x86_64 -std=gnu99
CFLAGS = -g -O2 $(LTO) /# with -O2 we compile fine /
CPICFLAGS = -fPIC
CPPFLAGS = -I/usr/local/include
CXX = g++ -arch x86_64
CXXCPP = g++ -arch x86_64 -E
CXXFLAGS = -g $(LTO)
CXXPICFLAGS = -fPIC

... compiles and installs no problem.

However, if I remove the -O (or use -O0, -O1) it fails with the following
error

** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded
Error in dyn.load(file, DLLpath = DLLpath, ...) : 
  unable to load shared object
'/Users/alex/Library/R/2.15/library/citpp/libs/x86_64/citpp.so':
  dlopen(/Users/alex/Library/R/2.15/library/citpp/libs/x86_64/citpp.so, 6):
Symbol not found: _mymax
  Referenced from:
/Users/alex/Library/R/2.15/library/citpp/libs/x86_64/citpp.so
  Expected in: flat namespace
 in /Users/alex/Library/R/2.15/library/citpp/libs/x86_64/citpp.so
Error: loading failed
Execution halted
ERROR: loading failed
* removing ?/Users/alex/Library/R/2.15/library/citpp?
* restoring previous ?/Users/alex/Library/R/2.15/library/citpp?

This isn't a huge problem (for me, right now), but I don't understand why
changing the compiler optimization level to less optimization would cause a
dyn.load error? I can remove the optimization flag from g++ no problem. Any
advice or ideas would be appreciated! 

--
View this message in context: http://r.789695.n4.nabble.com/Lack-of-O2-or-O-gcc-compiler-flag-causes-package-installation-failure-tp4632723.html
Sent from the R devel mailing list archive at Nabble.com.


From simon.urbanek at r-project.org  Thu Jun  7 20:03:37 2012
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 7 Jun 2012 14:03:37 -0400
Subject: [Rd] Lack of -O2 (or -O) gcc compiler flag causes package
	installation failure
In-Reply-To: <1339090321320-4632723.post@n4.nabble.com>
References: <1339090321320-4632723.post@n4.nabble.com>
Message-ID: <463912F0-5E24-474F-A67F-07F1B7AEC6CD@r-project.org>


On Jun 7, 2012, at 1:32 PM, alexholehouse wrote:

> Hello all - first time poster long time reader,
> 
> I'm currently working on a package, and was interested to compare
> performance with and without gcc/g++ -O based optimization. I can turn the
> -O flags off with a ~.R/Makevars file, but when I do something odd happens.
> The package installs fine when gcc is fed -O2 or -O3
> 
> *install with*
> R CMD INSTALL --configure-args="CFLAGS=-g CXXFLAGS=-g --disable-openmp"
> package.tar.gz
> /NB: I have opnemp switched off here as it's not supported by Apple's GCC
> (4.2.1). When the code runs on a linux cluster it compiles with openmp and
> runs no problem./
> 
> *makevars file*
> CC = gcc -arch x86_64 -std=gnu99
> CFLAGS = -g -O2 $(LTO) /# with -O2 we compile fine /
> CPICFLAGS = -fPIC
> CPPFLAGS = -I/usr/local/include
> CXX = g++ -arch x86_64
> CXXCPP = g++ -arch x86_64 -E
> CXXFLAGS = -g $(LTO)
> CXXPICFLAGS = -fPIC
> 

Is this your real Makevars? That would override all R settings and break a lot of things ... You should not set anything other than PKG_xx flags in Makevars since the "regular" flags are taken from R. Providing the source of package.tar.gz would give us more insight on what you're actually doing - I suspect that the problem is in you breaking the build system and not in the optimization flags ...

Cheers,
Simon


> ... compiles and installs no problem.
> 
> However, if I remove the -O (or use -O0, -O1) it fails with the following
> error
> 
> ** preparing package for lazy loading
> ** help
> *** installing help indices
> ** building package indices
> ** testing if installed package can be loaded
> Error in dyn.load(file, DLLpath = DLLpath, ...) : 
>  unable to load shared object
> '/Users/alex/Library/R/2.15/library/citpp/libs/x86_64/citpp.so':
>  dlopen(/Users/alex/Library/R/2.15/library/citpp/libs/x86_64/citpp.so, 6):
> Symbol not found: _mymax
>  Referenced from:
> /Users/alex/Library/R/2.15/library/citpp/libs/x86_64/citpp.so
>  Expected in: flat namespace
> in /Users/alex/Library/R/2.15/library/citpp/libs/x86_64/citpp.so
> Error: loading failed
> Execution halted
> ERROR: loading failed
> * removing ?/Users/alex/Library/R/2.15/library/citpp?
> * restoring previous ?/Users/alex/Library/R/2.15/library/citpp?
> 
> This isn't a huge problem (for me, right now), but I don't understand why
> changing the compiler optimization level to less optimization would cause a
> dyn.load error? I can remove the optimization flag from g++ no problem. Any
> advice or ideas would be appreciated! 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/Lack-of-O2-or-O-gcc-compiler-flag-causes-package-installation-failure-tp4632723.html
> Sent from the R devel mailing list archive at Nabble.com.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From alex.holehouse at gmail.com  Thu Jun  7 20:13:18 2012
From: alex.holehouse at gmail.com (alexholehouse)
Date: Thu, 7 Jun 2012 11:13:18 -0700 (PDT)
Subject: [Rd] Lack of -O2 (or -O) gcc compiler flag causes package
 installation failure
In-Reply-To: <463912F0-5E24-474F-A67F-07F1B7AEC6CD@r-project.org>
References: <1339090321320-4632723.post@n4.nabble.com>
	<463912F0-5E24-474F-A67F-07F1B7AEC6CD@r-project.org>
Message-ID: <1339092798542-4632727.post@n4.nabble.com>


Simon Urbanek wrote
> 
> Is this your real Makevars? That would override all R settings and break a
> lot of things ... You should not set anything other than PKG_xx flags in
> Makevars since the "regular" flags are taken from R. Providing the source
> of package.tar.gz would give us more insight on what you're actually doing
> - I suspect that the problem is in you breaking the build system and not
> in the optimization flags ...
> 

Literally 100 points for you. I'd thought the various flags were there to be
overriden - hadn't appreciated they were not the ones I was meant to be
changing. Hugely appreciated.

--
View this message in context: http://r.789695.n4.nabble.com/Lack-of-O2-or-O-gcc-compiler-flag-causes-package-installation-failure-tp4632723p4632727.html
Sent from the R devel mailing list archive at Nabble.com.


From plfjohnson at emory.edu  Thu Jun  7 21:05:17 2012
From: plfjohnson at emory.edu (Philip Johnson)
Date: Thu, 07 Jun 2012 15:05:17 -0400
Subject: [Rd] x11 icon and class
Message-ID: <4FD0FB6D.1090005@emory.edu>

The X11 device driver does not provide the X window manager with an icon 
(_NET_WM_ICON) or, under some circumstances, with a class (WM_CLASS). 
This hinders usability under the new stable version of Ubuntu, which has 
a (new) user interface centered around icons.

I am not sure if this was a conscious choice by r-core or simply a low 
priority.  In case of the latter, I attach a patch against R-devel (as 
of 6 June) that specifies:
   1) _NET_WM_ICON as a slightly tweaked version of Rlogo-5.png  (48x48 
pixels, circle filled-in with white to be legible; ARGB data hardcoded 
as a constant array in a new file "rlogo_icon.h").
   2) WM_CLASS (for reasons unclear to me, previously WM_CLASS was only 
set #ifndef USE_Xt)
l
As Ubuntu is the single most popular linux distribution, perhaps others 
will find this patch useful.  I have tested on both 32- and 64-bit 
versions of linux.

Regards,
Philip
-------------- next part --------------
A non-text attachment was scrubbed...
Name: r_icon_class.patch
Type: text/x-patch
Size: 20839 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120607/a174fe9f/attachment.bin>

From mdowle at mdowle.plus.com  Thu Jun  7 02:30:33 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Thu, 7 Jun 2012 01:30:33 +0100
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
In-Reply-To: <87AF97BC-EF06-4017-887C-49A5EA800A81@gmail.com>
References: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>
	<loom.20120606T194231-377@post.gmane.org>
	<alpine.DEB.2.02.1206061329380.2432@luke-Latitude>
	<87AF97BC-EF06-4017-887C-49A5EA800A81@gmail.com>
Message-ID: <1339029033.2573.27.camel@netbook>

I built R-trunk (rev 59537), ran 'Rtrunk CMD build data.table',
installed the resulting tar.gz into R release and it ran tests ok. So it
seems ok now, if that tested it right. Will check R-Forge again when it
catches up. Thanks.
Matthew

On Wed, 2012-06-06 at 22:04 +0200, peter dalgaard wrote:
> FYI, Brian has backed out the changes to identical() in r59533 of R-patched. Please retry your test codes with the new version. (Due to some ISP mess-up, Brian is temporarily unable to reply in detail himself.)
> 
> -pd
> 
> 
> On Jun 6, 2012, at 20:29 , <luke-tierney at uiowa.edu> <luke-tierney at uiowa.edu> wrote:
> 
> > On Wed, 6 Jun 2012, Matthew Dowle wrote:
> > 
> >> Dan Tenenbaum <dtenenba <at> fhcrc.org> writes:
> >> 
> >>> 
> >>> I know this has come up before on R-help
> >>> (http://r.789695.n4.nabble.com/7-arguments-passed-to-Internal-identical-which-
> >> requires-6-td4548460.html)
> >>> but I have a concise reproducible case that I wanted to share.
> >>> 
> >>> Also, please note the Bioconductor scenario which is potentially
> >>> seriously impacted by this.
> >>> The issue arises when a binary version of a package (like my example
> >>> package below) is built under R 2.15.0 Patched but then installed
> >>> under R 2.15.0.  Our package AnnotationDbi (which hundreds of other
> >>> packages depend on) is impacted by this issue to the extent that
> >>> calling virtually any function in it will return something like this:
> >>> Error in ls(2) :
> >>>  7 arguments passed to .Internal(identical) which requires 6
> >>> 
> >>> My concern is that when R 2.15.1 is released and Bioconductor starts
> >>> building all its packages under it, that R 2.15.0 users will start to
> >>> experience this problem. We can ask all users to upgrade to R 2.15.1
> >>> if we have to, but it's not usually the case that a minor point
> >>> release MUST be installed in order to run packages built under it
> >>> (please correct me if I'm wrong). We would much prefer a workaround or
> >>> fix to make an upgrade unnecessary.
> >>> 
> >> 
> >> I'm seeing the same issue. Installing the latest R-Forge .zip of data.table
> >> built using 2.15.0 patched, on R 2.15.0 (or 2.14.1 same issue), then running
> >> data.table(a=1:3) produces the "7 arguments passed to .Internal(identical)
> >> which requires 6" error.  traceback() and debugger() just display the top level
> >> call. debug(data.table) and stepping through reveals it is a call to identical
> >> () but just a regular one. No .Internal() call in the package, let alone
> >> passing 6 or 7 arguments to .Internal.
> >> 
> >> Not sure how else to debug or trace it. R-Forge is byte compiling data.table
> >> using R 2.15.0 patched (iiuc), would that make a difference when the byte code
> >> is loaded into 2.15.0 which doesn't have the new argument in identical()?
> > 
> > Yes it would.
> > 
> > luke
> > 
> >> 
> >> Matthew
> >> 
> >> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
> >> 
> > 
> > -- 
> > Luke Tierney
> > Chair, Statistics and Actuarial Science
> > Ralph E. Wareham Professor of Mathematical Sciences
> > University of Iowa                  Phone:             319-335-3386
> > Department of Statistics and        Fax:               319-335-3017
> >   Actuarial Science
> > 241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
> > Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu
> > 
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
>


From renaud at mancala.cbio.uct.ac.za  Fri Jun  8 11:52:23 2012
From: renaud at mancala.cbio.uct.ac.za (Renaud Gaujoux)
Date: Fri, 08 Jun 2012 11:52:23 +0200
Subject: [Rd] Multiple sub-architecture: problem installing RCurl
Message-ID: <4FD1CB57.7020801@cbio.uct.ac.za>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120608/a03a1eed/attachment.pl>

From renaud at mancala.cbio.uct.ac.za  Fri Jun  8 12:27:23 2012
From: renaud at mancala.cbio.uct.ac.za (Renaud Gaujoux)
Date: Fri, 08 Jun 2012 12:27:23 +0200
Subject: [Rd] Multiple sub-architecture: linking issue
Message-ID: <4FD1D38B.5040504@cbio.uct.ac.za>

Hi again,

following my previous post on RCurl, I cannot install Rcpp either:

g++ -m32 -I/home/renaud/bin/R/2.15/lib64/R/include 
-I/home/renaud/bin/R/2.15/lib64/R/include/i386 -DNDEBUG 
-I../inst/include/ -I/usr/local/include    -fpic  -g -O2  -c r_cast.cpp 
-o r_cast.o
g++ -m32 -shared -L/usr/local/lib64 -o Rcpp.so Date.o DateVector.o 
Datetime.o DatetimeVector.o Dimension.o DottedPair.o Environment.o 
Evaluator.o Formula.o Function.o Language.o Module.o Pairlist.o 
Promise.o RObject.o RcppCommon.o Rcpp_init.o Reference.o Rostream.o 
Rstreambuf.o S4.o Symbol.o WeakReference.o barrier.o cache.o coerce.o 
complex.o debugging.o exceptions.o posixt.o r_cast.o
/usr/bin/ld: skipping incompatible 
/usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/libstdc++.so when 
searching for -lstdc++
/usr/bin/ld: skipping incompatible 
/usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/libstdc++.a when 
searching for -lstdc++
/usr/bin/ld: cannot find -lstdc++
collect2: ld returned 1 exit status

There is definitely some conflict or missing libraries going on...
Any help is appreciated.

Thank you.

PS: Dirk do you want me to post this on the Rcpp list for record?

-- 
Renaud Gaujoux
Computational Biology - University of Cape Town
South Africa


From eworbspam at gmail.com  Fri Jun  8 15:40:17 2012
From: eworbspam at gmail.com (Edward Worbis)
Date: Fri, 8 Jun 2012 09:40:17 -0400
Subject: [Rd] Working with optim in C
Message-ID: <CADL3ysNS+pD1ohJVA=gXJ6LXMJ-ZFsFSTxT0ab7g=RAXdpBghg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120608/f1140904/attachment.pl>

From simon.urbanek at r-project.org  Fri Jun  8 16:22:27 2012
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 8 Jun 2012 10:22:27 -0400
Subject: [Rd] Multiple sub-architecture: linking issue
In-Reply-To: <4FD1D38B.5040504@cbio.uct.ac.za>
References: <4FD1D38B.5040504@cbio.uct.ac.za>
Message-ID: <FDB00E14-6405-4263-B76D-44F41A585309@r-project.org>

Make sure you have installed multilib gcc and the ia32 dev packages - it seems you don't have them. I'm a

Sent from my iPhone

On Jun 8, 2012, at 6:27 AM, Renaud Gaujoux <renaud at mancala.cbio.uct.ac.za> wrote:

> Hi again,
> 
> following my previous post on RCurl, I cannot install Rcpp either:
> 
> g++ -m32 -I/home/renaud/bin/R/2.15/lib64/R/include -I/home/renaud/bin/R/2.15/lib64/R/include/i386 -DNDEBUG -I../inst/include/ -I/usr/local/include    -fpic  -g -O2  -c r_cast.cpp -o r_cast.o
> g++ -m32 -shared -L/usr/local/lib64 -o Rcpp.so Date.o DateVector.o Datetime.o DatetimeVector.o Dimension.o DottedPair.o Environment.o Evaluator.o Formula.o Function.o Language.o Module.o Pairlist.o Promise.o RObject.o RcppCommon.o Rcpp_init.o Reference.o Rostream.o Rstreambuf.o S4.o Symbol.o WeakReference.o barrier.o cache.o coerce.o complex.o debugging.o exceptions.o posixt.o r_cast.o
> /usr/bin/ld: skipping incompatible /usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/libstdc++.so when searching for -lstdc++
> /usr/bin/ld: skipping incompatible /usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/libstdc++.a when searching for -lstdc++
> /usr/bin/ld: cannot find -lstdc++
> collect2: ld returned 1 exit status
> 
> There is definitely some conflict or missing libraries going on...
> Any help is appreciated.
> 
> Thank you.
> 
> PS: Dirk do you want me to post this on the Rcpp list for record?
> 
> -- 
> Renaud Gaujoux
> Computational Biology - University of Cape Town
> South Africa
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From renaud at mancala.cbio.uct.ac.za  Fri Jun  8 17:08:29 2012
From: renaud at mancala.cbio.uct.ac.za (Renaud Gaujoux)
Date: Fri, 08 Jun 2012 17:08:29 +0200
Subject: [Rd] Multiple sub-architecture: linking issue
In-Reply-To: <FDB00E14-6405-4263-B76D-44F41A585309@r-project.org>
References: <4FD1D38B.5040504@cbio.uct.ac.za>
	<FDB00E14-6405-4263-B76D-44F41A585309@r-project.org>
Message-ID: <4FD2156D.4030807@cbio.uct.ac.za>

Thank you for your reply Simon.

I have the gcc-multilib and ia32-libs packages installed (I think their 
installation is part of the procedure you described in your previous 
post). Could not find the package ia32-dev you mention. It seems to be 
flagged as obsolete in Natty repositories:

$ sudo apt-get install  ia32-libs-dev lib32readline6-dev 
lib32ncurses5-dev lib32icu-dev gcc-multilib gfortran-multilib
[sudo] password for renaud:
Reading package lists... Done
Building dependency tree
Reading state information... Done
Package ia32-libs-dev is not available, but is referred to by another 
package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source
However the following packages replace it:
   lib32bz2-dev ia32-libs lib32z1-dev

I succeeded in compiling both architecture of R without a problem 
though. Would that have been possible if some of the files provided by 
this package were missing?
I can try look around for this exact package.

-- 
Renaud Gaujoux
Computational Biology - University of Cape Town
South Africa


On 08/06/2012 16:22, Simon Urbanek wrote:
> Make sure you have installed multilib gcc and the ia32 dev packages - it seems you don't have them. I'm a
>
> Sent from my iPhone
>
> On Jun 8, 2012, at 6:27 AM, Renaud Gaujoux<renaud at mancala.cbio.uct.ac.za>  wrote:
>
>> Hi again,
>>
>> following my previous post on RCurl, I cannot install Rcpp either:
>>
>> g++ -m32 -I/home/renaud/bin/R/2.15/lib64/R/include -I/home/renaud/bin/R/2.15/lib64/R/include/i386 -DNDEBUG -I../inst/include/ -I/usr/local/include    -fpic  -g -O2  -c r_cast.cpp -o r_cast.o
>> g++ -m32 -shared -L/usr/local/lib64 -o Rcpp.so Date.o DateVector.o Datetime.o DatetimeVector.o Dimension.o DottedPair.o Environment.o Evaluator.o Formula.o Function.o Language.o Module.o Pairlist.o Promise.o RObject.o RcppCommon.o Rcpp_init.o Reference.o Rostream.o Rstreambuf.o S4.o Symbol.o WeakReference.o barrier.o cache.o coerce.o complex.o debugging.o exceptions.o posixt.o r_cast.o
>> /usr/bin/ld: skipping incompatible /usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/libstdc++.so when searching for -lstdc++
>> /usr/bin/ld: skipping incompatible /usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/libstdc++.a when searching for -lstdc++
>> /usr/bin/ld: cannot find -lstdc++
>> collect2: ld returned 1 exit status
>>
>> There is definitely some conflict or missing libraries going on...
>> Any help is appreciated.
>>
>> Thank you.
>>
>> PS: Dirk do you want me to post this on the Rcpp list for record?
>>
>> -- 
>> Renaud Gaujoux
>> Computational Biology - University of Cape Town
>> South Africa
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>


From michael.weylandt at gmail.com  Fri Jun  8 18:12:23 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Fri, 8 Jun 2012 11:12:23 -0500
Subject: [Rd] Interaction parameter for split()
Message-ID: <CAAmySGOOT-80fey9D=SCjXyVyT-yLEPurhP73zmgszMsM=tjLA@mail.gmail.com>

Tal's wonderful aggregator recently reblogged this post:
http://rsnippets.blogspot.com/2012/06/you-should-not-use-split-in-production.html

It's a rather obscure little buglet [and probably only arises in
pathological cases], but I don't know if it's not a case that deserves
a bit of consideration (in spite of the point "Anonymous" makes in the
comments). His second proposal (giving an "sep=" parameter for
interaction) seems the easiest fix and won't break back compatibility.

It's not my use case, but I hadn't seen any noise about it here and
would be happy to submit a patch if the powers that be are interested.

Best,
Michael


From simon.urbanek at r-project.org  Fri Jun  8 19:01:37 2012
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 8 Jun 2012 13:01:37 -0400
Subject: [Rd] Multiple sub-architecture: linking issue
In-Reply-To: <4FD2156D.4030807@cbio.uct.ac.za>
References: <4FD1D38B.5040504@cbio.uct.ac.za>
	<FDB00E14-6405-4263-B76D-44F41A585309@r-project.org>
	<4FD2156D.4030807@cbio.uct.ac.za>
Message-ID: <7B2F0F1E-135D-42B6-BBAF-6DC8FFC99275@r-project.org>

R doesn't use C++ nor the other libraries so you wouldn't find out about such missing pieces. Unfortunately I'm traveling w/o computer today so I can't look up what you need. If someone doesn't beat me to it I'll have a look when I get back.
Simon

Sent from my iPhone

On Jun 8, 2012, at 11:08 AM, Renaud Gaujoux <renaud at mancala.cbio.uct.ac.za> wrote:

> Thank you for your reply Simon.
> 
> I have the gcc-multilib and ia32-libs packages installed (I think their installation is part of the procedure you described in your previous post). Could not find the package ia32-dev you mention. It seems to be flagged as obsolete in Natty repositories:
> 
> $ sudo apt-get install  ia32-libs-dev lib32readline6-dev lib32ncurses5-dev lib32icu-dev gcc-multilib gfortran-multilib
> [sudo] password for renaud:
> Reading package lists... Done
> Building dependency tree
> Reading state information... Done
> Package ia32-libs-dev is not available, but is referred to by another package.
> This may mean that the package is missing, has been obsoleted, or
> is only available from another source
> However the following packages replace it:
>  lib32bz2-dev ia32-libs lib32z1-dev
> 
> I succeeded in compiling both architecture of R without a problem though. Would that have been possible if some of the files provided by this package were missing?
> I can try look around for this exact package.
> 
> -- 
> Renaud Gaujoux
> Computational Biology - University of Cape Town
> South Africa
> 
> 
> On 08/06/2012 16:22, Simon Urbanek wrote:
>> Make sure you have installed multilib gcc and the ia32 dev packages - it seems you don't have them. I'm a
>> 
>> Sent from my iPhone
>> 
>> On Jun 8, 2012, at 6:27 AM, Renaud Gaujoux<renaud at mancala.cbio.uct.ac.za>  wrote:
>> 
>>> Hi again,
>>> 
>>> following my previous post on RCurl, I cannot install Rcpp either:
>>> 
>>> g++ -m32 -I/home/renaud/bin/R/2.15/lib64/R/include -I/home/renaud/bin/R/2.15/lib64/R/include/i386 -DNDEBUG -I../inst/include/ -I/usr/local/include    -fpic  -g -O2  -c r_cast.cpp -o r_cast.o
>>> g++ -m32 -shared -L/usr/local/lib64 -o Rcpp.so Date.o DateVector.o Datetime.o DatetimeVector.o Dimension.o DottedPair.o Environment.o Evaluator.o Formula.o Function.o Language.o Module.o Pairlist.o Promise.o RObject.o RcppCommon.o Rcpp_init.o Reference.o Rostream.o Rstreambuf.o S4.o Symbol.o WeakReference.o barrier.o cache.o coerce.o complex.o debugging.o exceptions.o posixt.o r_cast.o
>>> /usr/bin/ld: skipping incompatible /usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/libstdc++.so when searching for -lstdc++
>>> /usr/bin/ld: skipping incompatible /usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/libstdc++.a when searching for -lstdc++
>>> /usr/bin/ld: cannot find -lstdc++
>>> collect2: ld returned 1 exit status
>>> 
>>> There is definitely some conflict or missing libraries going on...
>>> Any help is appreciated.
>>> 
>>> Thank you.
>>> 
>>> PS: Dirk do you want me to post this on the Rcpp list for record?
>>> 
>>> -- 
>>> Renaud Gaujoux
>>> Computational Biology - University of Cape Town
>>> South Africa
>>> 
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>> 
>>> 
> 
> 


From nashjc at uottawa.ca  Sat Jun  9 20:44:23 2012
From: nashjc at uottawa.ca (John C Nash)
Date: Sat, 09 Jun 2012 14:44:23 -0400
Subject: [Rd] R-devel Digest, Vol 112, Issue 8
In-Reply-To: <mailman.27.1339236007.8526.r-devel@r-project.org>
References: <mailman.27.1339236007.8526.r-devel@r-project.org>
Message-ID: <4FD39987.4070102@uottawa.ca>

I'll not be able to comment on the use of C like this, but will warn that I wrote the
routines that became Nelder-Mead, CG, and BFGS in optim() in the mid 1970s. CG never did
as well as I would like, but the other two routines turned out pretty well. However, in
nearly 40 years, there are a few improvements, particularly in handling bounds and masks
(fixed parameters). For all-R routines see Rcgmin and Rvmmin. Rather than directly use the
optim() routines in C, you may want to use some more modern ones, but the choice may be
dependent on your problem.

JN

On 06/09/2012 06:00 AM, r-devel-request at r-project.org wrote:
> Message: 2
> Date: Fri, 8 Jun 2012 09:40:17 -0400
> From: Edward Worbis <eworbspam at gmail.com>
> To: r-devel at R-project.org
> Subject: [Rd] Working with optim in C
> Message-ID:
> 	<CADL3ysNS+pD1ohJVA=gXJ6LXMJ-ZFsFSTxT0ab7g=RAXdpBghg at mail.gmail.com>
> Content-Type: text/plain
> 
> I've searched to find examples of  how to work with the C versions of
> optim.
> 
> I've separated out the function just to test on it alone, and currently I'm
> attempting to use fmmin as follows:
> 
> 
> !~~CODE ~~!


From p.kevin.white at gmail.com  Sat Jun  9 23:18:08 2012
From: p.kevin.white at gmail.com (kevinpw)
Date: Sat, 9 Jun 2012 14:18:08 -0700 (PDT)
Subject: [Rd] -lgsl -lgslcblas fatal error no such file or directory
Message-ID: <1339276688565-4632908.post@n4.nabble.com>

Hello,

Novice programmer.

I'm writing C source code and compiling it in as *.dll in the terminal by R
CMD SHLIB foo.c. It works, I'm on a 64 bits windows system. I have the
lastest R 2.15.0 and Rtools using the gcc 4.6.3 compiler.

However, that was a hello world run, and I installed GSL for the 64 bit
system for fast MCMC. The Rcpp package was easy to use, but I opted for a C
with GSL fashion because a MCMC simulation I'm attempting would have been
astronomically time consuming with the JAGS Sampler. A couple webpages
suggested the C/GSL might be optimal. 

My issue is that even though the R CMD SHLIB *c built the *dll for simple
examples, when I installed GSL for the (64 bit system), the R CMD -lgsl
-lgslcblas *c returns a fatal error: gsl/gsl_rng.h no such file or directory
exists. My paths are:

Does the order matter? I think Rtools needed to go first (in their order) in
the path list.

PATH =
c:\R\Rtools\bin;c:\R\Rtools\gcc-4.6.3\bin;C:/R/R-2.15.0/bin/x64;C:\Program
Files (x86)\MiKTeX 2.8\miktex\bin;C:\Program Files\Common Files\Microsoft
Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft
Shared\Windows
Live;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program
Files\SAS\SharedFiles(32)\Formats;C:\Program Files (x86)\Windows
Live\Shared;C:\Program Files
(x86)\QuickTime\QTSystem\;C:\R\batchfiles_0.6-6;C:/R/GSL_test2/bin

I also created two new variables in the system environmental variables list
GSL_LIB, value c:/R/GSL_test2/lib/
GSL_INC, value c:/R/GSL_test2/inc/

The source C code is

#include <stdio.h>
#include <math.h>
#include <stdlib.h>
#include <gsl/gsl_rng.h>
#include <gsl/gsl_randist.h>
#include <R.h>

void gibbsGSL(int *Np,int *thinp,int *seedp,double *xvec,double *yvec) {
    int i,j;
    int N=*Np,thin=*thinp,seed=*seedp;
    gsl_rng *r = gsl_rng_alloc(gsl_rng_mt19937);
    gsl_rng_set(r,seed);
    double x=0;
    double y=0;
    for (i=0;i<N;i++) {
        for (j=0;j<thin;j++) {
            x=gsl_ran_gamma(r,3.0,1.0/(y*y+4));
            y=1.0/(x+1)+gsl_ran_gaussian(r,1.0/sqrt(2*x+2));
        }
        xvec[i]=x; yvec[i]=y;
    }
}

Any advice would be appreciated.

--
View this message in context: http://r.789695.n4.nabble.com/lgsl-lgslcblas-fatal-error-no-such-file-or-directory-tp4632908.html
Sent from the R devel mailing list archive at Nabble.com.


From spencer.graves at prodsyse.com  Sun Jun 10 03:40:02 2012
From: spencer.graves at prodsyse.com (Spencer Graves)
Date: Sat, 09 Jun 2012 18:40:02 -0700
Subject: [Rd] Convert "\" to "/"?
Message-ID: <4FD3FAF2.8020304@prodsyse.com>

Hello, All:


	  I have for years copied an address like "C:\Program 
Files\R\R-2.15.0\library\MASS\scripts" from Windows Explorer into R, 
then manually replaced "\" with "/".  I have a function to automate this 
added to the development version of "sos".  However, it generates a 
warning in "R CMD check" ("parse error:  unexpected input").  I have so 
far not found a way to eliminate the warning without wrapping examples 
in "\dontrun" or making the examples hard to understand;  neither of 
these alternatives are acceptable.


	  The following is my current solution:


back2ForwardSlash <- function(nmax=1, what=character(), sep='\n', ...){
   x2 <- scan(what=what, nmax=nmax, sep=sep, ...)
   x. <- gsub('\\', '/', x2, fixed = TRUE)
}
(x <- back2ForwardSlash())
c:\Users\
all.equal(x, 'c:/Users/')
# TRUE
x2. <- back2ForwardSlash(2)
c:\u\a b\n o
d:/pqr/
all.equal(x2., c('c:/u/a b/n o', 'd:/pqr/'))
# TRUE


QUESTION:  Might anyone have a better solution and / or simple, clear 
examples that do not generate a warning in "R CMD check"?


NOTE:  In case you want to try this development version of "sos" 
including this function, it is available via "svn checkout 
svn://svn.r-forge.r-project.org/svnroot/rsitesearch/" or 
install.packages('sos', repos = "http://R-Forge.R-project.org").


	  Thanks,
	  Spencer


p.s.  Prof. Ripley provided a way to do this on R-help several years 
ago.  Unfortunately, I've been unable to find his solution.


From gsee000 at gmail.com  Sun Jun 10 04:54:38 2012
From: gsee000 at gmail.com (G See)
Date: Sat, 9 Jun 2012 21:54:38 -0500
Subject: [Rd] Convert "\" to "/"?
In-Reply-To: <4FD3FAF2.8020304@prodsyse.com>
References: <4FD3FAF2.8020304@prodsyse.com>
Message-ID: <CA+xi=qa8h+MFZ1RAADYW-eXFTuaRVbcHcAo32KMBKzGnp6fAsQ@mail.gmail.com>

One work around is to comment out the lines that `scan` reads.

    (x <- back2ForwardSlash())
    #c:\Users\
    all.equal(x, '#c:/Users/')

Or, you could pass a text arg through the dots

    (x <- back2ForwardSlash(text="c:\\\users"))
    all.equal(x, 'c:/users')

HTH,
Garrett

On Sat, Jun 9, 2012 at 8:40 PM, Spencer Graves
<spencer.graves at prodsyse.com> wrote:
> Hello, All:
>
>
> ? ? ? ? ?I have for years copied an address like "C:\Program
> Files\R\R-2.15.0\library\MASS\scripts" from Windows Explorer into R, then
> manually replaced "\" with "/". ?I have a function to automate this added to
> the development version of "sos". ?However, it generates a warning in "R CMD
> check" ("parse error: ?unexpected input"). ?I have so far not found a way to
> eliminate the warning without wrapping examples in "\dontrun" or making the
> examples hard to understand; ?neither of these alternatives are acceptable.
>
>
> ? ? ? ? ?The following is my current solution:
>
>
> back2ForwardSlash <- function(nmax=1, what=character(), sep='\n', ...){
> ?x2 <- scan(what=what, nmax=nmax, sep=sep, ...)
> ?x. <- gsub('\\', '/', x2, fixed = TRUE)
> }
> (x <- back2ForwardSlash())
> c:\Users\
> all.equal(x, 'c:/Users/')
> # TRUE
> x2. <- back2ForwardSlash(2)
> c:\u\a b\n o
> d:/pqr/
> all.equal(x2., c('c:/u/a b/n o', 'd:/pqr/'))
> # TRUE
>
>
> QUESTION: ?Might anyone have a better solution and / or simple, clear
> examples that do not generate a warning in "R CMD check"?
>
>
> NOTE: ?In case you want to try this development version of "sos" including
> this function, it is available via "svn checkout
> svn://svn.r-forge.r-project.org/svnroot/rsitesearch/" or
> install.packages('sos', repos = "http://R-Forge.R-project.org").
>
>
> ? ? ? ? ?Thanks,
> ? ? ? ? ?Spencer
>
>
> p.s. ?Prof. Ripley provided a way to do this on R-help several years ago.
> ?Unfortunately, I've been unable to find his solution.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From spencer.graves at prodsyse.com  Mon Jun 11 01:34:23 2012
From: spencer.graves at prodsyse.com (Spencer Graves)
Date: Sun, 10 Jun 2012 16:34:23 -0700
Subject: [Rd] Convert "\" to "/"?
In-Reply-To: <CA+xi=qa8h+MFZ1RAADYW-eXFTuaRVbcHcAo32KMBKzGnp6fAsQ@mail.gmail.com>
References: <4FD3FAF2.8020304@prodsyse.com>
	<CA+xi=qa8h+MFZ1RAADYW-eXFTuaRVbcHcAo32KMBKzGnp6fAsQ@mail.gmail.com>
Message-ID: <4FD52EFF.3040906@prodsyse.com>

Hi, Garrett:


On 6/9/2012 7:54 PM, G See wrote:
> One work around is to comment out the lines that `scan` reads.
>
>      (x<- back2ForwardSlash())
>      #c:\Users\
>      all.equal(x, '#c:/Users/')

       Thanks.  This works well enough to be useful.
>
> Or, you could pass a text arg through the dots
>
>      (x<- back2ForwardSlash(text="c:\\\users"))
>      all.equal(x, 'c:/users')


       This is not acceptable, because "sos-manual.pdf" displays ... 
'text="c:\\users"', which would likely confuse readers.


       Thanks again.
       Spencer
>
> HTH,
> Garrett
>
> On Sat, Jun 9, 2012 at 8:40 PM, Spencer Graves
> <spencer.graves at prodsyse.com>  wrote:
>> Hello, All:
>>
>>
>>           I have for years copied an address like "C:\Program
>> Files\R\R-2.15.0\library\MASS\scripts" from Windows Explorer into R, then
>> manually replaced "\" with "/".  I have a function to automate this added to
>> the development version of "sos".  However, it generates a warning in "R CMD
>> check" ("parse error:  unexpected input").  I have so far not found a way to
>> eliminate the warning without wrapping examples in "\dontrun" or making the
>> examples hard to understand;  neither of these alternatives are acceptable.
>>
>>
>>           The following is my current solution:
>>
>>
>> back2ForwardSlash<- function(nmax=1, what=character(), sep='\n', ...){
>>   x2<- scan(what=what, nmax=nmax, sep=sep, ...)
>>   x.<- gsub('\\', '/', x2, fixed = TRUE)
>> }
>> (x<- back2ForwardSlash())
>> c:\Users\
>> all.equal(x, 'c:/Users/')
>> # TRUE
>> x2.<- back2ForwardSlash(2)
>> c:\u\a b\n o
>> d:/pqr/
>> all.equal(x2., c('c:/u/a b/n o', 'd:/pqr/'))
>> # TRUE
>>
>>
>> QUESTION:  Might anyone have a better solution and / or simple, clear
>> examples that do not generate a warning in "R CMD check"?
>>
>>
>> NOTE:  In case you want to try this development version of "sos" including
>> this function, it is available via "svn checkout
>> svn://svn.r-forge.r-project.org/svnroot/rsitesearch/" or
>> install.packages('sos', repos = "http://R-Forge.R-project.org").
>>
>>
>>           Thanks,
>>           Spencer
>>
>>
>> p.s.  Prof. Ripley provided a way to do this on R-help several years ago.
>>   Unfortunately, I've been unable to find his solution.
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From edd at debian.org  Mon Jun 11 03:20:29 2012
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 10 Jun 2012 20:20:29 -0500
Subject: [Rd] x11 icon and class
In-Reply-To: <4FD0FB6D.1090005@emory.edu>
References: <4FD0FB6D.1090005@emory.edu>
Message-ID: <20437.18397.516282.41306@max.nulle.part>


On 7 June 2012 at 15:05, Philip Johnson wrote:
| The X11 device driver does not provide the X window manager with an icon 
| (_NET_WM_ICON) or, under some circumstances, with a class (WM_CLASS). 

Nice!  That had bugged me for a few years too as things like various taskbars
and panels never show the R logo for eg the plot windows.

If R Core does not respond to this, I suggest you and take this offline and
try to see if I can make this a regular patch for the Debian package which
underlies the Ubuntu distribution package as well as the Debian / Ubuntu
"backports" available via CRAN.  I guess I could test with the pre-releases
of R 2.15.1.

Cheers,  Dirk

| This hinders usability under the new stable version of Ubuntu, which has 
| a (new) user interface centered around icons.
| 
| I am not sure if this was a conscious choice by r-core or simply a low 
| priority.  In case of the latter, I attach a patch against R-devel (as 
| of 6 June) that specifies:
|    1) _NET_WM_ICON as a slightly tweaked version of Rlogo-5.png  (48x48 
| pixels, circle filled-in with white to be legible; ARGB data hardcoded 
| as a constant array in a new file "rlogo_icon.h").
|    2) WM_CLASS (for reasons unclear to me, previously WM_CLASS was only 
| set #ifndef USE_Xt)
| l
| As Ubuntu is the single most popular linux distribution, perhaps others 
| will find this patch useful.  I have tested on both 32- and 64-bit 
| versions of linux.
| 
| Regards,
| Philip
| 
| ----------------------------------------------------------------------
| diff -Naur R-devel/src/modules/X11/devX11.c R-devel-patched/src/modules/X11/devX11.c
| --- R-devel/src/modules/X11/devX11.c	2012-05-28 20:53:33.000000000 -0400
| +++ R-devel-patched/src/modules/X11/devX11.c	2012-06-07 14:48:40.359041743 -0400
| @@ -70,6 +70,7 @@
|  typedef int (*X11IOhandler)(Display *);
|  
|  #include "devX11.h"
| +#include "rlogo_icon.h" /* hard-coded ARGB icon */
|  
|  #include <Rmodules/RX11.h>
|  
| @@ -1580,8 +1581,9 @@
|  
|  	    XStoreName(display, xd->window, xd->title);
|  
| -#ifndef USE_Xt
|  	    /* For those too idle to make use of Xt (PR#14588) */
| +            /* Not sure reason for above comment -- even with Xt, WM_CLASS
| +               is not set on xd->window */
|  	    XClassHint *chint;
|  	    chint = XAllocClassHint();
|  	    if (chint) {
| @@ -1590,7 +1592,13 @@
|  		XSetClassHint(display, xd->window, chint);
|  	    	XFree(chint);
|  	    }
| -#endif
| +
| +            /* set window icon -- hardcoded into rlogo_icon.h */
| +            XChangeProperty(display, xd->window,
| +                            XInternAtom(display, "_NET_WM_ICON", False),
| +                            XInternAtom(display, "CARDINAL", False), 32,
| +                            PropModeReplace,
| +                            (const unsigned char*) rlogo_icon, 2 + 48*48);
|  
|  	    /* set up protocols so that window manager sends */
|  	    /* me an event when user "destroys" window */
| diff -Naur R-devel/src/modules/X11/rlogo_icon.h R-devel-patched/src/modules/X11/rlogo_icon.h
| --- R-devel/src/modules/X11/rlogo_icon.h	1969-12-31 19:00:00.000000000 -0500
| +++ R-devel-patched/src/modules/X11/rlogo_icon.h	2012-06-07 14:54:07.219041708 -0400
| @@ -0,0 +1,51 @@
| +unsigned long rlogo_icon[] = {
| +    48,48,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1868983,0x27e837a,0x6959595,0x2a888b85,0x5881857f,0x7d7f827b,0x9b7e827a,0xb17c8078,0xc07c7f78,0xc97c8179,0xca797e76,0xc3777c73,0xb4777b74,0x9d747971,0x8074786f,0x5b757870,0x2e797d75,0x77e847e,0x164685f,0x16b7168,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x38a8d88,0x68b8f89,0x288b8e89,0x71868983,0xba848881,0xf6838780,0xff838780,0xff838780,0xff848881,0xff848881,0xff848881,0xff848881,0xff858982,0xff81857e,0xff80847d,0xff7f837b,0xff7c8079,0xff787e76,0xff747a71,0xff71766d,0xf86f736b,0xbf6d7269,0x766c7169,0x2c70726c,0x7656a62,0x3666b63,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x58a8e87,0x1a8d918b,0x608a8f88,0xc9888c86,0xff878c85,0xff898d87,0xff8b8f89,0xff8c9089,0xfe8d918b,0xfe8f938d,0xff90948e,0xff91958e,0xff91968f,0xff91968f,0xff939891,0xff8f948d,0xff8f938c,0xff8d918b,0xff8a8f88,0xff878c85,0xfe858983,0xfe82867f,0xff7d8179,0xff777c73,0xff70756c,0xff6a6f66,0xcf676c63,0x65666c63,0x1d656a61,0x55f655b,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x290978c,0x208e918b,0x728c9089,0xe48a8f88,0xff8c918a,0xff90948d,0xff91958e,0xfe929690,0xff91958e,0xff8d918a,0xff8d9189,0xff8e938c,0xff92968f,0xff959992,0xff959a93,0xff959a93,0xff959a93,0xff949992,0xff939891,0xff939891,0xff929790,0xff91968f,0xff90948e,0xff8e938c,0xff8a8f88,0xff858a83,0xfe81857e,0xff7b8078,0xff737870,0xff696e65,0xe963685f,0x7a61675e,0x245f645b,0x3626660,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x1091948f,0x5a8f928c,0xd68e918a,0xff90948d,0xff969a93,0xfe979a94,0xfe939790,0xff878c84,0xff7b7f77,0xff7a7f77,0xff858983,0xff92968f,0xff9b9f99,0xff9da19b,0xff999e97,0xff91958f,0xfe888c84,0xff7e827b,0xff767a73,0xff70756d,0xff6d726a,0xff6c7068,0xff6d7169,0xff6f746b,0xff72776f,0xff777c74,0xff7c8179,0xfe81867f,0xfe848881,0xfe82857f,0xfe7b8079,0xff72776f,0xff656a62,0xdd5e635a,0x605b6058,0x135b6057,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x2792968f,0x9790938d,0xff91948f,0xff9a9e97,0xfe9da19b,0xfe959992,0xff7e837b,0xff6f746c,0xff7c8078,0xff949791,0xffa8aca6,0xffb4b7b2,0xffafb2ad,0xfe999d97,0xff81857e,0xff6e726b,0xff5d6259,0xff53584f,0xfc4b4f47,0xf2464b43,0xea454941,0xe4454941,0xe1444941,0xe0474c44,0xe34b5048,0xe84f544c,0xf052574e,0xfa555a51,0xff5a6057,0xff62685e,0xff6e736b,0xff7a7e77,0xfe7d827a,0xfe797e75,0xff6d7169,0xff5d625a,0xa0575c53,0x2d54594f,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x3791958f,0xbf91958e,0xff969993,0xffa5a9a3,0xfea0a49e,0xff848881,0xff6a6f67,0xff7b8078,0xff9ea29b,0xffbabdb8,0xffc6c9c4,0xfeb5b8b3,0xfe949892,0xff737770,0xff535850,0xf93e423a,0xdc30342d,0xf150534e,0xde52544f,0xf8767874,0xdf7f817d,0xca888a86,0xbb8f918d,0xb4929591,0xb3949692,0xba929490,0xc68e918c,0xda8a8c88,0xec82847f,0xe871756e,0xeb686d65,0xeb5c6159,0xf2545950,0xff61665e,0xff72766e,0xff797e76,0xff71766e,0xff5e635b,0xc853584f,0x3f4e534b,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x37949892,0xcf92968f,0xff999d96,0xfeafb2ad,0xfe9a9e97,0xff72776f,0xff6d7169,0xff979b95,0xffbfc2be,0xffd1d3d0,0xfec0c2be,0xfe979c95,0xff6c7069,0xff434740,0xdf252922,0xe14a4d48,0xf180817d,0xc0999b96,0xe6d7d7d5,0xc3fbfbfa,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xf5ffffff,0xd5ffffff,0xdbe2e3e1,0xdebdbfbb,0xdf949892,0xe8787c76,0xe85b6057,0xfa5f645b,0xff72776f,0xfe737870,0xff60655c,0xd94f544b,0x3f4a4f47,0x0,0x0,0x0,
| +    0x0,0x0,0x21959993,0xcb949791,0xff9a9e97,0xfeb8bbb6,0xff939690,0xff666b63,0xff787d75,0xffaeb1ac,0xffd5d7d4,0xffd4d6d3,0xfeaeb1ac,0xff797d76,0xff42463f,0xf331352e,0xeb61635f,0xd0969895,0xc5cbced2,0xf4eef1f7,0xffeef1f7,0xfceaedf2,0xffe7eaef,0xfae5e7ed,0xfae5e7ed,0xfae5e7ed,0xfae5e7ed,0xfae5e7ed,0xfae5e7ed,0xfae5e7ed,0xfae5e7ed,0xfae5e7ed,0xfbe5e7ed,0xfee6e9ee,0xfde9ecf1,0xf1f4f5f9,0xd4ffffff,0xd5f7f6f4,0xe8c4c5c1,0xe790938e,0xea62675f,0xfe696f66,0xff73776f,0xff5d625a,0xd4494e46,0x29494d45,0x0,0x0,
| +    0x0,0x4989e98,0xa7939791,0xff989c96,0xfebbbeb9,0xff979a94,0xff60655c,0xff7e827b,0xffbabdb9,0xffe0e2df,0xffd3d5d2,0xfea0a49e,0xff5f645d,0xf8272b24,0xdb3a3e38,0xe3a1a3a1,0xebf0f0f0,0xffffffff,0xd9bcc5d8,0xf4a0acc7,0xfaa0acc7,0xfaa1adc8,0xfaa1adc8,0xfaa1adc8,0xfaa1adc8,0xfaa1adc8,0xfaa1adc8,0xfaa1adc8,0xfaa1adc8,0xfaa1adc8,0xfaa1adc8,0xfaa1adc8,0xfaa1adc8,0xfaa1adc9,0xf99daac5,0xec94a0b9,0xe397a1b7,0xd8b3b8c7,0xcef1f2f7,0xe5fdfdfc,0xd1c4c7c3,0xd37d827a,0xfe6c7068,0xff72776f,0xff565b53,0xb442473f,0x85c5f57,0x0,
| +    0x0,0x52959993,0xff969a93,0xffaeb2ad,0xfeabaea9,0xff5e625a,0xff7b7f78,0xffbabdb8,0xffe7e8e6,0xffd6d7d4,0xfe9ea19c,0xff525750,0xec1a1e17,0xce555753,0xd7d6d6d5,0xf7ffffff,0xffffffff,0xffffffff,0xcf929eb8,0xf79babcd,0xff7a86a2,0xff6a748d,0xff6a738c,0xff6a738c,0xff6a738c,0xff6a738c,0xff6a738c,0xff6a738c,0xff6a738c,0xff6a738c,0xff6a738c,0xff6a738c,0xff6a738c,0xff6a748d,0xff69758e,0xff6c7894,0xff7785a4,0xe96d7b9d,0xd76d7790,0xcfb6bac5,0xe5ffffff,0xebefefee,0xb2949791,0xf16d7269,0xff70756d,0xff474c44,0x6140443d,0x0,
| +    0x1b0a7b6,0xd2949891,0xff9ca09a,0xfec5c7c3,0xff656961,0xff6e736a,0xffaaada8,0xffe9eae8,0xffe0e2e0,0xfea9ada7,0xff565a52,0xeb181c16,0xbf565955,0xd7ededed,0xfdffffff,0xffffffff,0xfefefefe,0xffffffff,0xd093a0b8,0xf6a7b6d9,0xff5b657b,0xff6d7a96,0xff707c9a,0xff707c9a,0xff6f7c99,0xff6c7997,0xff6c7997,0xff6d7a98,0xff6d7a98,0xff6d7a98,0xff6d7a97,0xff6d7a98,0xff6e7a98,0xff6e7b99,0xff6d7b98,0xfe6a7692,0xfe5f6a83,0xff606b83,0xff677490,0xee58637c,0xc9a5a9b4,0xf8fdfdfe,0xdffcfcfc,0xaea9ada7,0xf7767b72,0xff646961,0xde393d36,0x65e6358,
| +    0x39959992,0xff949892,0xffadb0ab,0xff9b9e99,0xff5a5e56,0xff90938d,0xffd8d9d7,0xffefefee,0xffc1c3bf,0xff6e726b,0xf821241e,0xd5525451,0xd9eeefee,0xfcffffff,0xfffefefe,0xfefefefe,0xffffffff,0xffffffff,0xd093a0b9,0xf6a5b5d8,0xff545d73,0xff7f91b6,0xff8495bc,0xff8395bc,0xff8496bc,0xffabbada,0xffaab9dc,0xffa5b5d9,0xffa5b5d9,0xffa5b5d9,0xffa7b6da,0xffa5b4d8,0xff9babcf,0xff90a1c5,0xff8798be,0xff7e8fb5,0xff7786aa,0xfe6f7d9c,0xfe636f89,0xff5b6781,0xea454e63,0xe4d1d3d7,0xffffffff,0xe9ffffff,0xb39fa29c,0xfd7a7f77,0xff42473f,0x473a3d35,
| +    0x8292968f,0xff969a94,0xfebdc0bc,0xff62675e,0xff70756d,0xffb0b3ad,0xfff1f1f0,0xffdfe1de,0xfe9ca09a,0xff393d36,0xea3b3d39,0xdecacac9,0xfdffffff,0xffffffff,0xfefefefe,0xffffffff,0xffffffff,0xffffffff,0xd093a0b9,0xf6a5b5d8,0xff555e75,0xff8192b8,0xff8597be,0xff8496be,0xfea4b4d6,0xff8e9cb9,0xff5e6880,0xff5d6880,0xff5d6880,0xff5d6880,0xff5d677f,0xff5c677f,0xff68748e,0xfe7b89a7,0xff8291b2,0xff8495ba,0xff8799c1,0xff8496bd,0xff7887a9,0xfe677490,0xff424c62,0xd3797d88,0xf4f2f2f3,0xffffffff,0xeefcfcfc,0xce82867f,0xff5e635b,0x9430342e,
| +    0xb590948d,0xff969a93,0xffafb2ad,0xff53584f,0xff82867e,0xffcaccc8,0xfff4f5f4,0xffcbcdc9,0xff777b74,0xf320241d,0xe9787a76,0xfcffffff,0xffffffff,0xfefefefe,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xd093a0b9,0xf6a5b5d8,0xff555e75,0xff8092b8,0xff8597be,0xff8496bd,0xff95a4c4,0xfe474f64,0xf31b1e26,0xcb222632,0xcd222632,0xcd222632,0xcc212531,0xcd222633,0xe9343b4b,0xff515c74,0xfe6f7b99,0xfe7886a5,0xff8294b9,0xff8597bf,0xff8597bf,0xfe7a89a9,0xff545f78,0xd3303745,0xf4e2e3e4,0xffffffff,0xffffffff,0xd0cccdca,0xff7a7e77,0xc62d312a,
| +    0xcf8e928b,0xff949892,0xff9b9e98,0xff585d54,0xff8d928a,0xffd8d9d7,0xfff0f1f0,0xffbcbfba,0xff5b5f57,0xeb31342e,0xe0abacab,0xffffffff,0xfefefefe,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xd093a0b9,0xf6a5b5d8,0xff555e75,0xff8092b8,0xff8597be,0xff8497be,0xff8895b4,0xfc3f475b,0xc7383a40,0xfcf7f7f7,0xf9efefef,0xf9efefef,0xf9efefef,0xfdf0f0f1,0xd3e0e1e4,0xaf6d778c,0xff717e9d,0xfe7783a0,0xff7080a1,0xff8699c0,0xff8597bf,0xff8596b9,0xff616d88,0xf2282e3b,0xfbdbdbdc,0xffffffff,0xffffffff,0xc8fcfcfc,0xfa8b8f88,0xdf2f332d,
| +    0xce8a8e88,0xff91958f,0xff8b8f89,0xff5b5f57,0xff90958e,0xffdbdddb,0xffedeeed,0xffb5b8b3,0xff4f544c,0xf74b4e49,0xf3cccdcd,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xd093a0b9,0xf6a5b5d8,0xff555e75,0xff8092b8,0xff8597be,0xff8497be,0xff8795b3,0xfc40475c,0xc33d3e45,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xfeffffff,0xe3cfd4dd,0xdc8091b3,0xff7a87a2,0xff6a7896,0xff8799c1,0xff8496be,0xff8e9ec2,0xfe67748f,0xff222734,0xffd7d7d9,0xfeffffff,0xffffffff,0xfdffffff,0xde949992,0xdf31352f,
| +    0xb4878b85,0xff8d918b,0xff8a8e87,0xff5b6057,0xff8d908a,0xffd5d7d5,0xffecedec,0xffb5b8b3,0xff535851,0xf74e524d,0xf2d0d1cf,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xd093a0b9,0xf6a5b5d8,0xff555e75,0xff8092b8,0xff8597be,0xff8497be,0xff8795b3,0xfc40475c,0xc33d3e45,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xfefefefe,0xffffffff,0xe6d6dae4,0xd88f9fc4,0xff7e8aa4,0xff657290,0xff8799c1,0xff8396bd,0xff95a6c9,0xff646f89,0xf01a1e28,0xfbd8d8d9,0xffffffff,0xfefefefe,0xffffffff,0xdc969a94,0xc5292d27,
| +    0x83858982,0xff878c85,0xfe8a8e87,0xff5d625a,0xff82857f,0xffc4c6c3,0xffecedeb,0xffbdbfba,0xff6a6e67,0xe93e423c,0xdeb7b8b6,0xffffffff,0xfefefefe,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xd093a0b9,0xf6a5b5d8,0xff555e75,0xff8092b8,0xff8597be,0xff8497be,0xff8795b3,0xfc40475c,0xc43d3f45,0xffffffff,0xfefefefe,0xfefefefe,0xfefefefe,0xfffefefe,0xf5fcfcfd,0xecc0c9dc,0xfd9daed1,0xff818ba1,0xff5f6c8a,0xff889ac2,0xff8899c0,0xfe9dacd0,0xff535c72,0xcb0f1119,0xf2dfdfdf,0xffffffff,0xffffffff,0xc7ffffff,0xf78a8e88,0x9321241f,
| +    0x37848881,0xff80847d,0xff888c85,0xff6b7068,0xff737870,0xffaaada8,0xffe6e7e5,0xffcbceca,0xff898d86,0xef343931,0xe58e8f8c,0xffffffff,0xffffffff,0xfefefefe,0xffffffff,0xffffffff,0xffffffff,0xffffffff,0xd093a0b9,0xf6a5b5d8,0xff555e75,0xff8092b8,0xff8597be,0xff8597be,0xff808ead,0xfd495268,0xe54f5668,0xfebcc4d5,0xf9bac0d2,0xfab9c0d2,0xfbbac1d2,0xeeb5bdcf,0xd894a3c1,0xf899abcf,0xff99a5ba,0xfe636e81,0xff7686ab,0xff8597bf,0xfea5b6d8,0xff8c9ab8,0xff292e3c,0xc0525356,0xf0f0f0f0,0xffffffff,0xffffffff,0xcadedfdd,0xf8626660,0x47272926,
| +    0x0,0xd27c8078,0xff81857e,0xfe7c817a,0xff696e66,0xff8e928b,0xffcbcdca,0xffd9dad8,0xfea7aba5,0xff5a5f56,0xe65b5f58,0xdbdfdfde,0xffffffff,0xfffefefe,0xfefefefe,0xffffffff,0xffffffff,0xffffffff,0xd093a0b9,0xf6a5b5d8,0xff555e75,0xff8092b8,0xff8597be,0xff8597be,0xfe7786a5,0xff6c7893,0xff7d8cab,0xff808eb1,0xff8190b2,0xff8090b2,0xff8090b1,0xff8493b5,0xff9eaecd,0xffa0adc1,0xfe5d6573,0xff657390,0xff90a2c8,0xfeaabad8,0xffa5b4d0,0xff4a5265,0xe90c0d12,0xd4c5c4c5,0xf7ffffff,0xffffffff,0xf8ffffff,0xbd9a9e98,0xd8333732,0x3676868,
| +    0x0,0x51797d76,0xff787d75,0xff81857e,0xfe73776f,0xff787d75,0xffa3a5a0,0xffd4d6d3,0xffc1c4c0,0xff8e928b,0xf3464b42,0xcd7d807b,0xe0fcfdfc,0xffffffff,0xfffefefe,0xfefefefe,0xffffffff,0xffffffff,0xd093a0b9,0xf6a5b5d8,0xff555e75,0xff8092b8,0xff8597be,0xff8597be,0xff8294ba,0xff58647d,0xff596276,0xff5d657a,0xff5e677b,0xff5e677b,0xff5f677c,0xff5e667a,0xff4e5667,0xff525a6c,0xfe8f9db8,0xfeacbcdc,0xffacbad6,0xff8390aa,0xfe3a4153,0xfa16181c,0xad7e7e7f,0xe9fbfbfb,0xffffffff,0xffffffff,0xa1c4c6c2,0xf5646762,0x6121221f,0x0,
| +    0x0,0x0,0xae747870,0xff787c74,0xff7d817a,0xfe747871,0xff848880,0xffacafaa,0xffc9ccc7,0xfeb1b5af,0xff7f847d,0xe4484d45,0xd29c9f9b,0xeefcfcfc,0xfcffffff,0xffffffff,0xfefefefe,0xffffffff,0xd093a0b9,0xf6a5b5d8,0xff555e75,0xff8092b8,0xff8597be,0xff8496bd,0xff8597be,0xff92a3c9,0xff8b9bc0,0xff8797bb,0xff8697bb,0xff8394b8,0xff8090b5,0xff7c8eb3,0xff91a2c6,0xfea8b6d4,0xff707c95,0xff4b5469,0xfa353b4d,0xf01e212b,0xe3252527,0xcaa2a2a2,0xf5ffffff,0xffffffff,0xf2ffffff,0xeae4e6e4,0xf8828680,0xba282b27,0x3515154,0x0,
| +    0x0,0x0,0x1a73796f,0xd36f736b,0xff757a72,0xfe7b7e77,0xfe797d75,0xff898d86,0xffabaea9,0xffbbbeba,0xfea8aca6,0xff7e827b,0xec575c54,0xc6939791,0xdff0f0ef,0xfdffffff,0xffffffff,0xffffffff,0xcf93a0b9,0xf6a5b5d8,0xff555e75,0xff8092b8,0xff8597be,0xff8496bd,0xfe92a3c8,0xffabbad6,0xff97a5c3,0xff94a1bf,0xff93a1bf,0xff8f9dbd,0xfe8c9cbe,0xff8698bc,0xff8e9fc3,0xff68748d,0xfe242937,0xfa2b2e37,0xd23c3e43,0xb9868786,0xccf3f3f3,0xf8ffffff,0xffffffff,0xf0f9faf9,0xc6d6d7d4,0xee7e817b,0xd8333731,0x23272a27,0x0,0x0,
| +    0x0,0x0,0x0,0x326d7069,0xd66a6f67,0xff70756d,0xff787d75,0xfe7d817a,0xff8a8e87,0xffa3a6a1,0xffafb2ac,0xfea2a69f,0xff848881,0xef5c6158,0xd9858882,0xe5d2d3d1,0xedfafaf9,0xffffffff,0xd095a1ba,0xf6a5b5d8,0xff555e75,0xff8092b8,0xff8597be,0xff8496bd,0xffa3b3d3,0xfe66728b,0xfb2f3544,0xeb31384a,0xee333b4d,0xfc495369,0xff697693,0xfe7c8ba9,0xff7988a8,0xff626e88,0xfe616c86,0xef8490ab,0xcda5aec3,0xdbd5d8e1,0xf3fbfbfd,0xeaffffff,0xedededec,0xcbb7bab5,0xfd757972,0xde3a3d39,0x3d1f211e,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x36696e66,0xc5656a62,0xff6a6f67,0xff737870,0xfe7c8079,0xff888b84,0xff999c96,0xffa2a6a0,0xfe9ca09a,0xff8b8f88,0xff6d7169,0xe76c7068,0xda9fa39d,0xe9dadad6,0xd18a97af,0xf7a5b5d8,0xff555e75,0xff8092b8,0xff8597be,0xff8496be,0xff8b9ab9,0xfd3b4255,0xdd212227,0xdd929397,0xdc8a8b90,0xdd747984,0xf95d6880,0xff6e7c9a,0xfe707d9a,0xfe697591,0xff6c7892,0xff6c7894,0xff687493,0xeb5d6985,0xd4969ba6,0xd4c2c4c1,0xda8c9089,0xff61655e,0xcd333731,0x401d1f1b,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x26636960,0xa160665d,0xf6646960,0xff6a6f67,0xff767a72,0xfe81857d,0xff8e928b,0xff999c96,0xfe989c95,0xfe90948d,0xff81857d,0xfe6c7068,0xe8777a70,0xea727e92,0xfca5b5d7,0xff555e75,0xff8092b8,0xff8597be,0xff8497be,0xff8694b3,0xfc40475c,0xbe404249,0xffffffff,0xffffffff,0xdfffffff,0xd9a7adba,0xf462708e,0xff7b88a6,0xff687592,0xff687593,0xfe636e89,0xfe6b7791,0xff606c87,0xf94a5367,0xff5c6161,0xfb51544e,0xa9262924,0x2c171a15,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0xd63685f,0x695d6258,0xc95d6259,0xff60655d,0xff686d65,0xff737870,0xfe80837c,0xff8b8f88,0xff91958e,0xfe91968f,0xff8d918b,0xff84877d,0xff747f90,0xffa5b4d6,0xfe555e75,0xff8092b8,0xff8597be,0xff8497be,0xff8795b3,0xfd40475c,0xd0383a3f,0xd6dddedb,0xe8d8d9d7,0xb9cdceca,0xb5b0b3b3,0xe869748a,0xff717f9e,0xff7784a1,0xff7e8fb3,0xff8496bd,0xff7281a2,0xfe66738e,0xff515c74,0xff3d434f,0x7f252928,0xe121206,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x2d5b5f56,0x79585d54,0xcf585e55,0xff5a5f57,0xff61665e,0xff6b7068,0xff767b73,0xfe80847c,0xff878b84,0xff8c9087,0xff798497,0xffa5b4d6,0xff555e75,0xff8092b8,0xff8597be,0xff8497be,0xff8795b3,0xfe40485c,0xf33c3f41,0xdf92968f,0xed959993,0xcd848881,0xe08d918a,0xf983898f,0xff6d7a98,0xff7784a1,0xff717f9e,0xff8698c0,0xff8799c1,0xff7584a4,0xff626e89,0xff495267,0x68505869,0x3dae3fe,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x366685c,0x2d535850,0x65535850,0xae535850,0xf352584f,0xff555a51,0xff5b6058,0xff636860,0xff6c7066,0xff6e7a8c,0xfea5b4d6,0xff555e75,0xff8092b8,0xff8597be,0xff8497be,0xfe8795b3,0xff40485c,0xff3e4143,0xff898d85,0xff81857d,0xff7c8079,0xff72766e,0xff616662,0xff576071,0xff7380a0,0xfe7884a2,0xff7888ab,0xff8799c1,0xff8293b9,0xfe6d7a98,0xff56617a,0xe5495264,0x2f565b6a,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1b4f544c,0x374c5149,0x664e524a,0xa04d5249,0xd54c5249,0xff4b4e44,0xff5f6a7c,0xffa4b3d5,0xfe555e75,0xff8092b8,0xff8597be,0xff8497be,0xfe8795b3,0xff40475b,0xff2a2d2e,0xff51554c,0xff484c44,0xff41453e,0xff3c4039,0xd5363b33,0xc1444c53,0xf26e7b99,0xff74819e,0xff7482a1,0xff8496bd,0xff8698c0,0xff7a8aac,0xff677490,0xff4b556b,0x9d4e5566,0xe555b67,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x35b5f58,0x14494e46,0x22464b43,0x2534351d,0xb86d7b97,0xfba6b5d7,0xff555e75,0xff8092b8,0xff8597be,0xff8497be,0xff8795b3,0xfe40475b,0xde23262a,0x833d4038,0x6d3a3d37,0x4d393d36,0x3032352e,0x2026291f,0x29585f68,0xa2697591,0xff717f9e,0xfe7684a1,0xff7686a8,0xff8699c0,0xff8597be,0xfe6f7d9b,0xff5f6b85,0xff474f63,0x4b575d6c,0x2c9cccc,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0xa17585a5,0xfaa7b6d9,0xff535c72,0xff7e90b6,0xff8295bc,0xff8294bc,0xff8593b2,0xfd40485c,0xb6292b32,0x28c8941,0x6434641,0x0,0x0,0x0,0x0,0x4d67728c,0xee6e7b97,0xff727f9c,0xfe7582a1,0xff8192b8,0xff8396be,0xff7e8fb3,0xfe687490,0xff4f5a72,0xd14a5264,0x14525869,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0xa17585a4,0xfaa7b6d9,0xff717d97,0xffa5b5d7,0xffabbadd,0xffabbadd,0xff9faecd,0xfd40475c,0xb22a2c33,0x0,0x0,0x0,0x0,0x0,0x0,0xe9099aa,0x9766728e,0xff727f9e,0xfe8492b0,0xff9aa8ca,0xffadbcdf,0xffacbbde,0xfe9eadcc,0xff7f8ca8,0xff4a5369,0x76545b69,0x6616670,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0xa37a8bac,0xfc72809c,0xff515b72,0xff515a71,0xff515b72,0xff515b72,0xff505a71,0xfe3a4255,0xb32a2c33,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x486c7690,0xe267738f,0xff56627b,0xff4c566b,0xff4e586e,0xff4e586e,0xff4e576d,0xff4d576c,0xff465065,0xf9434c5d,0x27616977,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x7e697289,0xcc393d48,0xd330333b,0xd330333b,0xd330333b,0xd330333b,0xd330333b,0xd931353e,0x983d4047,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x8ddebff,0x77525868,0xd4393d47,0xca2f323a,0xca30333b,0xca30333b,0xca30333b,0xca30333b,0xca30333b,0xd0343741,0x7a5a606c,0x6686e7b,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +    0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
| +};
| 
| ----------------------------------------------------------------------
| ______________________________________________
| R-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From edd at debian.org  Mon Jun 11 03:24:22 2012
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 10 Jun 2012 20:24:22 -0500
Subject: [Rd]  Multiple sub-architecture: linking issue
In-Reply-To: <4FD1D38B.5040504@cbio.uct.ac.za>
References: <4FD1D38B.5040504@cbio.uct.ac.za>
Message-ID: <20437.18630.682894.836483@max.nulle.part>


On 8 June 2012 at 12:27, Renaud Gaujoux wrote:
| PS: Dirk do you want me to post this on the Rcpp list for record?

Yes, that generally is where Rcpp questions / comments / hints should go. 

As for multi-arch builds, I am not sure we even thought about supporting this so if
it breaks your use of Rcpp and related packages, you get to keep the pieces.
That said, I'd be interested in supporting it eventually but I guess I want
to first understand better how/if it is supported (on Linux) by R itself.

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From simon.urbanek at r-project.org  Mon Jun 11 03:43:46 2012
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sun, 10 Jun 2012 21:43:46 -0400
Subject: [Rd] Multiple sub-architecture: linking issue
In-Reply-To: <20437.18630.682894.836483@max.nulle.part>
References: <4FD1D38B.5040504@cbio.uct.ac.za>
	<20437.18630.682894.836483@max.nulle.part>
Message-ID: <C7975ECC-8085-4A18-9BC8-A18F093F7416@r-project.org>


On Jun 10, 2012, at 9:24 PM, Dirk Eddelbuettel wrote:

> 
> On 8 June 2012 at 12:27, Renaud Gaujoux wrote:
> | PS: Dirk do you want me to post this on the Rcpp list for record?
> 
> Yes, that generally is where Rcpp questions / comments / hints should go. 
> 
> As for multi-arch builds, I am not sure we even thought about supporting this so if
> it breaks your use of Rcpp and related packages, you get to keep the pieces.
> That said, I'd be interested in supporting it eventually but I guess I want
> to first understand better how/if it is supported (on Linux) by R itself.
> 

R itself of course supports it and essentially all packages (including Rcpp ;)) have to because we require it on Windows and OS X since all binaries there are multi-lib. As far as R is concerned it works equally well on Linux - the problem there is more on the side of distributions, because it is more unusual to have multi-lib Linux (originally it was used on Linux only to get 3rd party [mostly proprietary] 32-bit binaries working on 64-bit systems and that is now less of an issue). As I said in the original post it works reasonably well on Debian (not for all libraries since only a subset is available, but all the basic ones) -- there were shakeups in Ubuntu which were messing with the multilib support, so I don't know the current status but I can check at work tomorrow (probably not for something as ancient as natty, though).

Cheers,
Simon


> 
> -- 
> Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From renaud at mancala.cbio.uct.ac.za  Mon Jun 11 09:33:11 2012
From: renaud at mancala.cbio.uct.ac.za (Renaud Gaujoux)
Date: Mon, 11 Jun 2012 09:33:11 +0200
Subject: [Rd] Multiple sub-architecture: linking issue
In-Reply-To: <C7975ECC-8085-4A18-9BC8-A18F093F7416@r-project.org>
References: <4FD1D38B.5040504@cbio.uct.ac.za>
	<20437.18630.682894.836483@max.nulle.part>
	<C7975ECC-8085-4A18-9BC8-A18F093F7416@r-project.org>
Message-ID: <4FD59F37.4010904@cbio.uct.ac.za>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120611/eaf9d2f1/attachment.asc>

From edd at debian.org  Mon Jun 11 12:36:17 2012
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 11 Jun 2012 05:36:17 -0500
Subject: [Rd] Multiple sub-architecture: linking issue
In-Reply-To: <4FD59F37.4010904@cbio.uct.ac.za>
References: <4FD1D38B.5040504@cbio.uct.ac.za>
	<20437.18630.682894.836483@max.nulle.part>
	<C7975ECC-8085-4A18-9BC8-A18F093F7416@r-project.org>
	<4FD59F37.4010904@cbio.uct.ac.za>
Message-ID: <20437.51745.323755.421851@max.nulle.part>


On 11 June 2012 at 09:33, Renaud Gaujoux wrote:
| On 11/06/2012 03:43, Simon Urbanek wrote:
|     As far as R is concerned it works equally well on Linux - the problem there is more on the side of distributions, because it is more unusual to have multi-lib Linux (originally it was used on Linux only to get 3rd party [mostly proprietary] 32-bit binaries working on 64-bit systems and that is now less of an issue). As I said in the original post it works reasonably well on Debian (not for all libraries since only a subset is available, but all the basic ones) -- there were shakeups in Ubuntu which were messing with the multilib support, so I don't know the current status but I can check at work tomorrow (probably not for something as ancient as natty, though).

Right.  I still haven't gotten bugged within Debian to ensure that my
packages are build.  More and more 'core' libraries seem to appear in
multi-arch mode though.  We're getting there, slowly but surely.
 
| I think you are right Simon: the issue likely comes from my Linux distrib,
| which I effectively should upgrade. This gives me one more reason to do it
| asap.

[ As a total aside: A nice low risk option is to first test in a virtual
env. I am very happy with my virtual instances, using Kvm and libvirt, on my
main server ... ]

| If you have some -- even untested -- clues on how to get things working on
| Natty I am happy to test them though, as upgrades always have hidden issues and
| time black holes...

I usually disagree with statements like this. Debian does this pretty reliably, and
I also update all my Ubuntu machines within a few weeks of the releases. And
Ubuntu 12.04 has been a rather smooth upgrade on all of them. But if you're
several releases behind, maybe you did more 'funky' stuff you now need to
consider.

Dirk, who thinks this should have been on r-sig-debian all along

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From j.maspons at creaf.uab.cat  Mon Jun 11 20:10:45 2012
From: j.maspons at creaf.uab.cat (Joan Maspons)
Date: Mon, 11 Jun 2012 20:10:45 +0200
Subject: [Rd] Patch to add Beta binomial distribution. Mentor needed!
In-Reply-To: <4FCDCD03.7060904@stats.ox.ac.uk>
References: <CANF72pNnfRHOBr_4mvwsk1o1J52hz6LPLEQP6sMjkWOCYX5cOA@mail.gmail.com>
	<A1056BE4-973C-4883-864C-AC1DC800CF7F@gmail.com>
	<loom.20120605T102246-250@post.gmane.org>
	<4FCDCD03.7060904@stats.ox.ac.uk>
Message-ID: <CANF72pN_gU1_guWJOLQfWfKMi5TNEjK3bLmDOVUJyLENqA+-OQ@mail.gmail.com>

Hello,

I'm trying to implement the Beta binomial distribution as a R package.
I studied R-ext manual but still there are some problems. The code in
C seems to work except for the rbetabinom function which is not very
random (it always returns the same values for the same parameters). I
have tried to use GetRNGstate(); and PutRNGstate(); but it give a SEG
FAULT when I call GetRNGstate. You can try the code like this:

cd /path/to/src
cmake ./CMakeLists.txt
make
./r-package


I can build and install the package but when I call the functions from
R they always return NULL except for rbetabinom which remains hanged
indefinitely.

Any advise?

-- 
Joan Maspons
CREAF (Centre de Recerca Ecol?gica i Aplicacions Forestals)
Universitat Aut?noma de Barcelona, 08193 Bellaterra (Barcelona), Catalonia
Tel +34 93 581 2915 ? ? ? ? ? ?j.maspons at creaf.uab.cat
http://www.creaf.uab.cat
-------------- next part --------------
A non-text attachment was scrubbed...
Name: betaBinomial_0.1.tar.gz
Type: application/x-gzip
Size: 8003 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120611/c0a9d6ce/attachment.gz>

From mdowle at mdowle.plus.com  Tue Jun 12 10:57:01 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Tue, 12 Jun 2012 09:57:01 +0100
Subject: [Rd] How to change name of .so/.dll
Message-ID: <2423c6e3a75c2c74b2854cf43d38c4c5.squirrel@webmail.plus.net>


Hi,

I've added R_init_data_table to the "data.table" package (which has a dot
in its name). This works well in R 2.15.0, because of this from the
Writing R Extensions manual :

" Note that there are some implicit restrictions on this mechanism as the
basename of the DLL needs to be both a valid file name and valid as part
of a C entry point (e.g. it cannot contain ?.?): for portable code it is
best to confine DLL names to be ASCII alphanumeric plus underscore. As
from R 2.15.0, if entry point R_init_lib is not found it is also looked
for with ?.? replaced by ?_?. "

But how do I confine the DLL name, is it an option in Makevars?

The name of the shared object is currently "data.table.so" (data.table.dll
on Windows).  Is it possible to change the file name to "datatable.so"
(and datatable.dll) in a portable way so that R_init_datatable works
(without a dot), and, without Depend-ing on R>=2.15.0 and without changing
the name of the package?

Thanks,
Matthew


From renaud at mancala.cbio.uct.ac.za  Tue Jun 12 13:03:28 2012
From: renaud at mancala.cbio.uct.ac.za (Renaud Gaujoux)
Date: Tue, 12 Jun 2012 13:03:28 +0200
Subject: [Rd] Multiple sub-architecture: linking issue
In-Reply-To: <20437.51745.323755.421851@max.nulle.part>
References: <4FD1D38B.5040504@cbio.uct.ac.za>
	<20437.18630.682894.836483@max.nulle.part>
	<C7975ECC-8085-4A18-9BC8-A18F093F7416@r-project.org>
	<4FD59F37.4010904@cbio.uct.ac.za>
	<20437.51745.323755.421851@max.nulle.part>
Message-ID: <4FD72200.5070909@cbio.uct.ac.za>



>
> Dirk, who thinks this should have been on r-sig-debian all along
>

Moved to r-sig-debian as suggested:
https://stat.ethz.ch/pipermail/r-sig-debian/2012-June/001885.html


From pauljohn32 at gmail.com  Tue Jun 12 18:10:15 2012
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Tue, 12 Jun 2012 11:10:15 -0500
Subject: [Rd] stumped on re-building package vignette
In-Reply-To: <4FCF5964.5080007@yorku.ca>
References: <4FCF5964.5080007@yorku.ca>
Message-ID: <CAErODj_pMMtKihi3zL8hzxc4+wZkrAQnZYydM3tB3HaBeDhAqg@mail.gmail.com>

On Wed, Jun 6, 2012 at 8:21 AM, Michael Friendly <friendly at yorku.ca> wrote:
> [Env: Win Xp / StatET 2.0 / R 2.15.0]
>
> In my heplots package I extended the HE-examples.Rnw vignette under
> inst/doc. The package passes R CMD check
> on my machine:
>
> * using log directory 'C:/eclipse-3.7/heplots.Rcheck'
> * using R version 2.15.0 (2012-03-30)
> * using platform: i386-pc-mingw32 (32-bit)
> ...
> * checking sizes of PDF files under 'inst/doc' ... OK
> * checking installed files from 'inst/doc' ... OK
> * checking examples ... OK
> * checking for unstated dependencies in vignettes ... OK
> * checking package vignettes in 'inst/doc' ... OK
> * checking running R code from vignettes ...
> 'HE-examples.Rnw' ... OK
> 'repeated.Rnw' ... OK
> ...

2 suggestions.

First, On your own workstation, run the cmd check like so

R CMD check --as-cran package.tar.gz

That will give you results more like CRAN or Rforge.

Second, how did your pdf get into the folder "fig"?  It makes me
suspect you are using some forbidden Sweave settings.

Oh, Third, here's a suggestion.  Build your own vignette, copy from
vignettes to inst/doc, and then in the DESCRIPTION file include the
option to ask the R system not to rebuild your vignette.

BuildVignettes: false

I think you will see this discussed/debated in R-devel and the
situation is somewhat fluid.

pj


>
> However, on R-Forge and on CRAN, the following error/warning is generated:
>
> Mon Jun ?4 20:18:22 2012: Checking package heplots (SVN revision 136) ...
> * using log directory
> ?/mnt/building/build_2012-06-04-20-02/RF_PKG_CHECK/PKGS/heplots.Rcheck?
> * using R version 2.15.0 Patched (2012-06-03 r59505)
> * using platform: x86_64-unknown-linux-gnu (64-bit)
> ?...
> * checking for unstated dependencies in vignettes ... OK
> * checking package vignettes in ?inst/doc? ... OK
> * checking running R code from vignettes ...
> ? ?HE-examples.Rnw? ... [4s/4s] OK
> ? ?repeated.Rnw? ... [4s/4s] OK
> ?[9s/9s] OK
> * checking re-building of vignette PDFs ... NOTE
> Error in re-building vignettes:
> ?...
> Loading required package: car
> Loading required package: MASS
> Loading required package: nnet
> Error: processing vignette 'HE-examples.Rnw' failed with diagnostics:
> cannot open file 'fig/plot-plastic1.pdf'
> Execution halted
>
> * checking PDF version of manual ... OK
>
> I am unable to determine why the file fig/plot-plastic1.pdf cannot be
> opened. It is in my inst/doc/fig directory & is regenerated
> by the .Rnw file. What could cause this?
>
> Second, I have tried manually running tools::compactPDF("HE-examples.pdf) on
> the .pdf file under inst/doc in the package,
> but no change is made to the .pdf file. I can't see any way to correct this.
>
> --
> Michael Friendly ? ? Email: friendly AT yorku DOT ca
> Professor, Psychology Dept.
> York University ? ? ?Voice: 416 736-5115 x66249 Fax: 416 736-5814
> 4700 Keele Street ? ?Web: ? http://www.datavis.ca
> Toronto, ONT ?M3J 1P3 CANADA
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel



-- 
Paul E. Johnson
Professor, Political Science ? ?Assoc. Director
1541 Lilac Lane, Room 504 ? ? Center for Research Methods
University of Kansas ? ? ? ? ? ? ? University of Kansas
http://pj.freefaculty.org ? ? ? ? ? ?http://quant.ku.edu


From pauljohn32 at gmail.com  Tue Jun 12 22:14:38 2012
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Tue, 12 Jun 2012 15:14:38 -0500
Subject: [Rd] Working on a Vignette called Rcheology
Message-ID: <CAErODj8_a=s7VtK-boxQ=rtiHwNTkEYLkD_Hcm4jD2MK72UKVw@mail.gmail.com>

Greetings, R developers

Here are my requests today.

1. Would you care to review this vignette
http://pj.freefaculty.org/R/Rchaeology.pdf and tell me if you think it
is wrong headed, and

2. Supposing  you do not think I'm completely wrong, would you care to
point me at more examples of R idioms that lead to deep insights into
the nature of R programming?


Longer more boring explanation:

In the rockchalk package, I have functions to make it easier to teach
regression to students who aren't R programmers. I just uploaded
package version 1.6 to CRAN. While I do this, I'm reading R source
code all the time because I need to understand how functions like
summary and anova receive R objects, take them apart, and do specific
chores.  I've been very glad that R is open source while I do this.

While working on this, an inspiration hit me! I want to call
"Rchaeology" the study of R idioms and customs deduced from the R
source code written by the experts.  Practicing this makes me an
Rchaeologist.

I've started a vignette, it's in rockchalk and up here:

http://pj.freefaculty.org/R/Rchaeology.pdf

I plan to work out sections that explore some particular usage
examples that touch on things that expose special features of the R
language.  Right now, I've only got one worked out, it explores this
idiom that Gabor  G. explained to me, which receives a formula object
and replaces a variable "x1" with "x1c".

do.call("substitute", list(newFmla, setNames(list(as.name("x1c")), "x1")))

I think that one is fabulous, It sheds a lot of light when you break
it down to pieces.

I'd like to build up a good list of "Do This, Not That" bits, but it
is hard to find particular approaches that almost all of you will
agree to.  Almost everybody agrees that calling rbind over and over
again is slow, and do.call with rbind and a collection of stackable
things is better:

http://pj.freefaculty.org/R/WorkingExamples/stackListItems.R

If you have ideas for "Do This, Not That", I'd be glad to hear them
and I'll look for example applications that make them relevant.

pj

-- 
Paul E. Johnson
Professor, Political Science ? ?Assoc. Director
1541 Lilac Lane, Room 504 ? ? Center for Research Methods
University of Kansas ? ? ? ? ? ? ? University of Kansas
http://pj.freefaculty.org ? ? ? ? ? ?http://quant.ku.edu


From cubranic at stat.ubc.ca  Tue Jun 12 22:50:34 2012
From: cubranic at stat.ubc.ca (Davor Cubranic)
Date: Tue, 12 Jun 2012 13:50:34 -0700
Subject: [Rd] x11 icon and class
In-Reply-To: <4FD0FB6D.1090005@emory.edu>
References: <4FD0FB6D.1090005@emory.edu>
Message-ID: <CC98295C-F90A-47D6-80A7-16AF82FFEEDB@stat.ubc.ca>

On 2012-06-07, at 12:05 PM, Philip Johnson wrote:

> The X11 device driver does not provide the X window manager with an icon (_NET_WM_ICON) or, under some circumstances, with a class (WM_CLASS). This hinders usability under the new stable version of Ubuntu, which has a (new) user interface centered around icons.
> 
> [...]
>  2) WM_CLASS (for reasons unclear to me, previously WM_CLASS was only set #ifndef USE_Xt)

A few comments in the bug database give a hint why this is conditional (http://bugs.r-project.org/bugzilla3/show_bug.cgi?id=14588):

(1) "resources are only handled in the Xt case" (comment #1)
(2) "Still no explanation as to why Xt is not used, and this should be conditional on that case." (comment #3)

Now that GUI libraries typically don't rely on Xt any more (e.g., Gtk), but WM_CLASS (and possibly other resources) are still used by window managers, it arguably makes sense for the X11 driver to always set this property.

Davor


From mdowle at mdowle.plus.com  Wed Jun 13 00:39:38 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Tue, 12 Jun 2012 23:39:38 +0100
Subject: [Rd] How to change name of .so/.dll
In-Reply-To: <2423c6e3a75c2c74b2854cf43d38c4c5.squirrel@webmail.plus.net>
References: <2423c6e3a75c2c74b2854cf43d38c4c5.squirrel@webmail.plus.net>
Message-ID: <3b35039e25ae0bf3f17982d074406911.squirrel@webmail.plus.net>

Matthew Dowle wrote :
> Hi,
>
> I've added R_init_data_table to the "data.table" package (which has a dot
> in its name). This works well in R 2.15.0, because of this from the
> Writing R Extensions manual :
>
> " Note that there are some implicit restrictions on this mechanism as the
> basename of the DLL needs to be both a valid file name and valid as part
> of a C entry point (e.g. it cannot contain ?.?): for portable code it is
> best to confine DLL names to be ASCII alphanumeric plus underscore. As
> from R 2.15.0, if entry point R_init_lib is not found it is also looked
> for with ?.? replaced by ?_?. "
>
> But how do I confine the DLL name, is it an option in Makevars?
>
> The name of the shared object is currently "data.table.so" (data.table.dll
> on Windows).  Is it possible to change the file name to "datatable.so"
> (and datatable.dll) in a portable way so that R_init_datatable works
> (without a dot), and, without Depend-ing on R>=2.15.0 and without changing
> the name of the package?

Just to clarify, I'm aware R CMD SHLIB has the -o argument which can be
used create datatable.so instead of data.table.so. It's R CMD INSTALL
that's the problem as that seems to pass -o <pkg_name> to R CMD SHLIB.  I
found install.libs.R (added to R in 2.13.1), could that be used to create
datatable.so instead of data.table.so? Or a line I could add to
pkg/src/Makevars?

Thanks!
Matthew


From mdowle at mdowle.plus.com  Wed Jun 13 00:40:59 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Tue, 12 Jun 2012 23:40:59 +0100
Subject: [Rd] How to change name of .so/.dll
In-Reply-To: <2423c6e3a75c2c74b2854cf43d38c4c5.squirrel@webmail.plus.net>
References: <2423c6e3a75c2c74b2854cf43d38c4c5.squirrel@webmail.plus.net>
Message-ID: <8ce0cb1a1b70ba260262f530ec2ba9f9.squirrel@webmail.plus.net>

Matthew Dowle wrote :
> Hi,
>
> I've added R_init_data_table to the "data.table" package (which has a dot
> in its name). This works well in R 2.15.0, because of this from the
> Writing R Extensions manual :
>
> " Note that there are some implicit restrictions on this mechanism as the
> basename of the DLL needs to be both a valid file name and valid as part
> of a C entry point (e.g. it cannot contain ?.?): for portable code it is
> best to confine DLL names to be ASCII alphanumeric plus underscore. As
> from R 2.15.0, if entry point R_init_lib is not found it is also looked
> for with ?.? replaced by ?_?. "
>
> But how do I confine the DLL name, is it an option in Makevars?
>
> The name of the shared object is currently "data.table.so" (data.table.dll
> on Windows).  Is it possible to change the file name to "datatable.so"
> (and datatable.dll) in a portable way so that R_init_datatable works
> (without a dot), and, without Depend-ing on R>=2.15.0 and without changing
> the name of the package?

Just to clarify, I'm aware R CMD SHLIB has the -o argument which can be
used create datatable.so instead of data.table.so. It's R CMD INSTALL
that's the problem as that seems to pass -o <pkg_name> to R CMD SHLIB.  I
found install.libs.R (added to R in 2.13.1), could that be used to create
datatable.so instead of data.table.so? Or a line I could add to
pkg/src/Makevars?

Thanks!
Matthew


From simon.urbanek at r-project.org  Wed Jun 13 02:38:16 2012
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 12 Jun 2012 20:38:16 -0400
Subject: [Rd] How to change name of .so/.dll
In-Reply-To: <3b35039e25ae0bf3f17982d074406911.squirrel@webmail.plus.net>
References: <2423c6e3a75c2c74b2854cf43d38c4c5.squirrel@webmail.plus.net>
	<3b35039e25ae0bf3f17982d074406911.squirrel@webmail.plus.net>
Message-ID: <E548F53E-0B01-4DEF-A976-4CA0B802A014@r-project.org>


On Jun 12, 2012, at 6:39 PM, Matthew Dowle wrote:

> Matthew Dowle wrote :
>> Hi,
>> 
>> I've added R_init_data_table to the "data.table" package (which has a dot
>> in its name). This works well in R 2.15.0, because of this from the
>> Writing R Extensions manual :
>> 
>> " Note that there are some implicit restrictions on this mechanism as the
>> basename of the DLL needs to be both a valid file name and valid as part
>> of a C entry point (e.g. it cannot contain ?.?): for portable code it is
>> best to confine DLL names to be ASCII alphanumeric plus underscore. As
>> from R 2.15.0, if entry point R_init_lib is not found it is also looked
>> for with ?.? replaced by ?_?. "
>> 
>> But how do I confine the DLL name, is it an option in Makevars?
>> 
>> The name of the shared object is currently "data.table.so" (data.table.dll
>> on Windows).  Is it possible to change the file name to "datatable.so"
>> (and datatable.dll) in a portable way so that R_init_datatable works
>> (without a dot), and, without Depend-ing on R>=2.15.0 and without changing
>> the name of the package?
> 
> Just to clarify, I'm aware R CMD SHLIB has the -o argument which can be
> used create datatable.so instead of data.table.so. It's R CMD INSTALL
> that's the problem as that seems to pass -o <pkg_name> to R CMD SHLIB.  I
> found install.libs.R (added to R in 2.13.1), could that be used to create
> datatable.so instead of data.table.so? Or a line I could add to
> pkg/src/Makevars?
> 

Something like

all: $(SHLIB)
        mv $(SHLIB) datatable$(SHLIB_EXT)

should do the trick (resist the temptation to create a datatable$(SHLIB_EXT) target - it doesn't work due to the makefile loading sequence, unfortunately). AFAIR you don't need to mess with install.libs because the default is to install all shlibs in the directory.

Cheers,
Simon


> Thanks!
> Matthew
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From mdowle at mdowle.plus.com  Wed Jun 13 09:42:07 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Wed, 13 Jun 2012 08:42:07 +0100
Subject: [Rd] How to change name of .so/.dll
In-Reply-To: <E548F53E-0B01-4DEF-A976-4CA0B802A014@r-project.org>
References: <2423c6e3a75c2c74b2854cf43d38c4c5.squirrel@webmail.plus.net>
	<3b35039e25ae0bf3f17982d074406911.squirrel@webmail.plus.net>
	<E548F53E-0B01-4DEF-A976-4CA0B802A014@r-project.org>
Message-ID: <1339573327.2573.67.camel@netbook>

On Tue, 2012-06-12 at 20:38 -0400, Simon Urbanek wrote:
> Something like
> 
> all: $(SHLIB)
>         mv $(SHLIB) datatable$(SHLIB_EXT)
> 
> should do the trick (resist the temptation to create a datatable$(SHLIB_EXT) target - it doesn't work due to the makefile loading sequence, unfortunately). AFAIR you don't need to mess with install.libs because the default is to install all shlibs in the directory.
> 
> Cheers,
> Simon

Huge thank you, Simon. Works perfectly. +100!

Matthew


From mdowle at mdowle.plus.com  Wed Jun 13 10:45:44 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Wed, 13 Jun 2012 08:45:44 +0000
Subject: [Rd] How to change name of .so/.dll
References: <2423c6e3a75c2c74b2854cf43d38c4c5.squirrel@webmail.plus.net>
	<3b35039e25ae0bf3f17982d074406911.squirrel@webmail.plus.net>
	<E548F53E-0B01-4DEF-A976-4CA0B802A014@r-project.org>
	<1339573327.2573.67.camel@netbook>
Message-ID: <loom.20120613T103830-686@post.gmane.org>

Matthew Dowle <mdowle <at> mdowle.plus.com> writes:

> 
> On Tue, 2012-06-12 at 20:38 -0400, Simon Urbanek wrote:
> > Something like
> > 
> > all: $(SHLIB)
> >         mv $(SHLIB) datatable$(SHLIB_EXT)
> > 
> > should do the trick (resist the temptation to create a 
datatable$(SHLIB_EXT) target - it doesn't work due
> to the makefile loading sequence, unfortunately). AFAIR you don't need to 
mess with install.libs
> because the default is to install all shlibs in the directory.
> > 
> > Cheers,
> > Simon
> 
> Huge thank you, Simon. Works perfectly. +100!
> 
> Matthew

I guess the 'mv' command works on Mac, too. For Windows I think I need to 
create pkg/src/Makevars.win with 'mv' replaced by 'rename'. Is that right?

all: $(SHLIB)
        rename $(SHLIB) datatable$(SHLIB_EXT)

I could try that and submit to winbuilder and see, but asking here as well in 
case theres anything else to consider for Windows.

Thanks again, Matthew


From murdoch.duncan at gmail.com  Wed Jun 13 11:57:21 2012
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 13 Jun 2012 05:57:21 -0400
Subject: [Rd] How to change name of .so/.dll
In-Reply-To: <loom.20120613T103830-686@post.gmane.org>
References: <2423c6e3a75c2c74b2854cf43d38c4c5.squirrel@webmail.plus.net>
	<3b35039e25ae0bf3f17982d074406911.squirrel@webmail.plus.net>
	<E548F53E-0B01-4DEF-A976-4CA0B802A014@r-project.org>
	<1339573327.2573.67.camel@netbook>
	<loom.20120613T103830-686@post.gmane.org>
Message-ID: <4FD86401.4040102@gmail.com>

On 12-06-13 4:45 AM, Matthew Dowle wrote:
> Matthew Dowle<mdowle<at>  mdowle.plus.com>  writes:
>
>>
>> On Tue, 2012-06-12 at 20:38 -0400, Simon Urbanek wrote:
>>> Something like
>>>
>>> all: $(SHLIB)
>>>          mv $(SHLIB) datatable$(SHLIB_EXT)
>>>
>>> should do the trick (resist the temptation to create a
> datatable$(SHLIB_EXT) target - it doesn't work due
>> to the makefile loading sequence, unfortunately). AFAIR you don't need to
> mess with install.libs
>> because the default is to install all shlibs in the directory.
>>>
>>> Cheers,
>>> Simon
>>
>> Huge thank you, Simon. Works perfectly. +100!
>>
>> Matthew
>
> I guess the 'mv' command works on Mac, too. For Windows I think I need to
> create pkg/src/Makevars.win with 'mv' replaced by 'rename'. Is that right?
>
> all: $(SHLIB)
>          rename $(SHLIB) datatable$(SHLIB_EXT)
>
> I could try that and submit to winbuilder and see, but asking here as well in
> case theres anything else to consider for Windows.
>

mv should be fine on Windows.  If you have a makefile, you have Rtools 
installed, and mv is in Rtools.

Duncan Murdoch


From mdowle at mdowle.plus.com  Wed Jun 13 12:03:12 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Wed, 13 Jun 2012 11:03:12 +0100
Subject: [Rd] How to change name of .so/.dll
In-Reply-To: <4FD86401.4040102@gmail.com>
References: <2423c6e3a75c2c74b2854cf43d38c4c5.squirrel@webmail.plus.net>
	<3b35039e25ae0bf3f17982d074406911.squirrel@webmail.plus.net>
	<E548F53E-0B01-4DEF-A976-4CA0B802A014@r-project.org>
	<1339573327.2573.67.camel@netbook>
	<loom.20120613T103830-686@post.gmane.org>
	<4FD86401.4040102@gmail.com>
Message-ID: <1b913d61d12e35342bc51351eef2672a.squirrel@webmail.plus.net>

> On 12-06-13 4:45 AM, Matthew Dowle wrote:
>> Matthew Dowle<mdowle<at>  mdowle.plus.com>  writes:
>>
>>>
>>> On Tue, 2012-06-12 at 20:38 -0400, Simon Urbanek wrote:
>>>> Something like
>>>>
>>>> all: $(SHLIB)
>>>>          mv $(SHLIB) datatable$(SHLIB_EXT)
>>>>
>>>> should do the trick (resist the temptation to create a
>> datatable$(SHLIB_EXT) target - it doesn't work due
>>> to the makefile loading sequence, unfortunately). AFAIR you don't need
>>> to
>> mess with install.libs
>>> because the default is to install all shlibs in the directory.
>>>>
>>>> Cheers,
>>>> Simon
>>>
>>> Huge thank you, Simon. Works perfectly. +100!
>>>
>>> Matthew
>>
>> I guess the 'mv' command works on Mac, too. For Windows I think I need
>> to
>> create pkg/src/Makevars.win with 'mv' replaced by 'rename'. Is that
>> right?
>>
>> all: $(SHLIB)
>>          rename $(SHLIB) datatable$(SHLIB_EXT)
>>
>> I could try that and submit to winbuilder and see, but asking here as
>> well in
>> case theres anything else to consider for Windows.
>>
>
> mv should be fine on Windows.  If you have a makefile, you have Rtools
> installed, and mv is in Rtools.
>
> Duncan Murdoch

Neat. Glad I asked, thanks.

Matthew


From cfriedem at gmail.com  Thu Jun 14 03:52:42 2012
From: cfriedem at gmail.com (Charlie F)
Date: Wed, 13 Jun 2012 18:52:42 -0700 (PDT)
Subject: [Rd] tcltk wish: Add tclObj.raw method for converting raw
 vectors to tclObj
In-Reply-To: <ACFC3E8F-613E-464A-9D2B-5083E65A6A03@gmail.com>
References: <ACFC3E8F-613E-464A-9D2B-5083E65A6A03@gmail.com>
Message-ID: <1339638762905-4633320.post@n4.nabble.com>

I have added a proposed patch to the bug report I opened earlier. It can be
found here: https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=14939

A recent version of R-devel modified with this patch builds and checks
successfully for me on a i686-pc-linux-gnu (32-bit) system. I don't see why
this wouldn't work on other builds as it only modifies some of the tcltk
source, and only adds a new routine at that. 

Regards,
Charlie


--
View this message in context: http://r.789695.n4.nabble.com/tcltk-wish-Add-tclObj-raw-method-for-converting-raw-vectors-to-tclObj-tp4632511p4633320.html
Sent from the R devel mailing list archive at Nabble.com.


From winstonchang1 at gmail.com  Thu Jun 14 02:41:16 2012
From: winstonchang1 at gmail.com (Winston Chang)
Date: Wed, 13 Jun 2012 19:41:16 -0500
Subject: [Rd] "Incompatible methods" for overloaded operator
Message-ID: <CAFOpNVFyqaTZHG15N2w13OqBJSwdVfdpbWGfsJim3XhNCmdYfw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120613/9a6e2f5b/attachment.pl>

From plfjohnson at emory.edu  Wed Jun 13 23:50:49 2012
From: plfjohnson at emory.edu (Philip Johnson)
Date: Wed, 13 Jun 2012 16:50:49 -0500
Subject: [Rd] x11 icon and class
In-Reply-To: <CC98295C-F90A-47D6-80A7-16AF82FFEEDB@stat.ubc.ca>
References: <4FD0FB6D.1090005@emory.edu>
	<CC98295C-F90A-47D6-80A7-16AF82FFEEDB@stat.ubc.ca>
Message-ID: <4FD90B39.80400@emory.edu>


On 06/12/2012 03:50 PM, Davor Cubranic wrote:
> On 2012-06-07, at 12:05 PM, Philip Johnson wrote:
>
>> The X11 device driver does not provide the X window manager with an icon (_NET_WM_ICON) or, under some circumstances, with a class (WM_CLASS). This hinders usability under the new stable version of Ubuntu, which has a (new) user interface centered around icons.
>>
>> [...]
>>   2) WM_CLASS (for reasons unclear to me, previously WM_CLASS was only set #ifndef USE_Xt)
>
> A few comments in the bug database give a hint why this is conditional (http://bugs.r-project.org/bugzilla3/show_bug.cgi?id=14588):
>
> (1) "resources are only handled in the Xt case" (comment #1)
> (2) "Still no explanation as to why Xt is not used, and this should be conditional on that case." (comment #3)

True, however, as far as I could tell, these comments do not apply to 
the current code for the following reasons:

(1) ./configure --with-x requires that Xt be present
(2) devX11.c includes a line "#define USE_Xt 1" -- implying that Xt is 
*always* used if compiling for X11
(3) Xt* functions are only used in a single small block in the code, and 
no windows are created in that code -- and thus no X resources are EVER 
set.  I *think* that the only purpose of this code is to test whether 
the window manager allows the user to specify window position and size. 
  But these fields in XSizeHints are noted in the current man pages as 
"obsolete and left solely for compatibility reasons".
(4) deleting all Xt code makes no discernable difference in the device 
driver behaviour on my (admittedly modern) linux distribution.

>
> Now that GUI libraries typically don't rely on Xt any more (e.g., Gtk), but WM_CLASS (and possibly other resources) are still used by window managers, it arguably makes sense for the X11 driver to always set this property.

This is my argument in a nutshell.  I understand there is a general 
reluctance to delete old code because it might still be used on an old 
system somewhere, but I think my proposed change would only be adding 
functionality, not removing it.

After I sent the patch, I discovered that the integration with the new 
Ubuntu interface works even better if WM_CLASS matches the name of the 
executable -- i.e. if the class were "R" rather than "R_x11".  I don't 
want to spam this list, but I am happy to send a revised patch if asked.

Regards,
Philip


From mdowle at mdowle.plus.com  Thu Jun 14 14:20:18 2012
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Thu, 14 Jun 2012 12:20:18 +0000
Subject: [Rd] 7 arguments passed to .Internal(identical) which requires 6
References: <CAF42j20RBW9SGRCA1t-uOTB330RoyRN43Yjv5GBR4580ugOxVw@mail.gmail.com>
	<loom.20120606T194231-377@post.gmane.org>
	<alpine.DEB.2.02.1206061329380.2432@luke-Latitude>
	<87AF97BC-EF06-4017-887C-49A5EA800A81@gmail.com>
	<1339029033.2573.27.camel@netbook>
Message-ID: <loom.20120614T141223-739@post.gmane.org>

Matthew Dowle <mdowle <at> mdowle.plus.com> writes:
> 
> Will check R-Forge again when it catches up. Thanks.
> Matthew
> 

Just to confirm, R-Forge has today caught up and is now using R r59554 which 
includes the fix for the problem in this thread. Its binary build of data.table 
is now installing fine on R 2.15.0 release, which it wasn't doing before.

Many thanks,
Matthew


From nikelski at bic.mni.mcgill.ca  Thu Jun 14 22:22:19 2012
From: nikelski at bic.mni.mcgill.ca (EJ Nikelski)
Date: Thu, 14 Jun 2012 13:22:19 -0700
Subject: [Rd] Reference class inheritance using matrix/array class
Message-ID: <CAB3_TWxoEcASKve8E9JkDe5QdFsC+=dcsaUATfA1dAQ0w8PQrQ@mail.gmail.com>

Hi,

  I'm investigating converting some S4 classes to reference classes
and have a question about inheritance. The primary data structure for
the original S4 class is a 3-d array. Using the "contains" parameter
when defining the class  permits me to inherit all of the
array-related methods. Of particular utility for me is the ability to
access the array via [] indexing. It all works quite well.

 I'm interested in converting to a Ref class since R's copy-on-change
semantics may be causing a fair bit of overhead whenever an element
within the array is changed (and the arrays can be quite large). I
also would like the inherited indexing methods to continue to work.
Looking at ?setRefClass, I note under the contains parameter:

" ... If a superclass is also a reference class, the fields and
class-based methods will be inherited."

This statement *suggests* that inheritance of methods only works for
other Ref classes, but is not explicit WRT other base classes (e.g.,
matrix, array).  I've tried a few simple dummy examples and have not
had any success.

For example, if I try:

>Vol <- setRefClass("Vol", fields=list(x="numeric"), contains="matrix")

... no error is produced, *but* on displaying Vol, I see no mention of
the "matrix" class. Carrying on, if I then try to instantiate an
object:

>Vol$methods( initialize = function() {
>   setDataPart(.self,matrix(1:100,nrow=10))
>})
vol0 <- Vol$new(22)
Error in tryCatchOne(expr, names, parentenv, handlers[[1L]]) :
 node stack overflow

 I've tried a number of permutations with no luck. Any ideas? Is this
possible with Ref classes?

-jim


> sessionInfo()
R version 2.14.1 (2011-12-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_CA.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_CA.UTF-8        LC_COLLATE=en_CA.UTF-8
 [5] LC_MONETARY=en_CA.UTF-8    LC_MESSAGES=en_CA.UTF-8
 [7] LC_PAPER=C                 LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_CA.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] codetools_0.2-8 tools_2.14.1


-- 
=================================
Jim Nikelski, Ph.D.
Postdoctoral Research Fellow
Bloomfield Centre for Research in Aging
Lady Davis Institute for Medical Research
Sir Mortimer B. Davis - Jewish General Hospital
McGill University


From spinuvit at gmail.com  Fri Jun 15 16:37:33 2012
From: spinuvit at gmail.com (Vitalie Spinu)
Date: Fri, 15 Jun 2012 16:37:33 +0200
Subject: [Rd] Build fails with sysdata.rda in R dir
Message-ID: <87lijovdxu.fsf@gmail.com>


Hi, 

I am getting a strange error with 15.0 which I've not seen with previous
versions of R.

If sysdata.rda is included in R directory of the package I am getting:

R CMD build betfairly.roxygen/
* checking for file ?betfairly.roxygen/DESCRIPTION? ... OK
* preparing ?betfairly?:
* checking DESCRIPTION meta-information ... OK
* excluding invalid files
Subdirectory 'R' contains invalid file names:
  ?getMarketTradedVolume.Rd? ?sfdsfsd?
* checking for LF line-endings in source and make files
* checking for empty or unneeded directories
Removed empty directory ?betfairly/inst/doc?
* looking to see if a ?data/datalist? file should be added
Error in if (any(update)) { : missing value where TRUE/FALSE needed
Execution halted


If I remove the data everything is fine:

@~/works/betfair$ rm betfairly.roxygen/R/sysdata.rda 
@~/works/betfair$ R CMD build betfairly.roxygen/
* checking for file ?betfairly.roxygen/DESCRIPTION? ... OK
* preparing ?betfairly?:
* checking DESCRIPTION meta-information ... OK
* excluding invalid files
Subdirectory 'R' contains invalid file names:
  ?getMarketTradedVolume.Rd? ?sfdsfsd?
* checking for LF line-endings in source and make files
* checking for empty or unneeded directories
Removed empty directory ?betfairly/inst/doc?
* building ?betfairly_1.2.1.tar.gz?


If I manually adding sysdata.rda after build then checks run ok.

Vitalie.

R version 2.15.0 (2012-03-30)
Copyright (C) 2012 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: i686-pc-linux-gnu (32-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under the terms of the
GNU General Public License versions 2 or 3.
For more information about these matters see
http://www.gnu.org/licenses/.


From janko.thyson.rstuff at googlemail.com  Mon Jun 18 10:01:09 2012
From: janko.thyson.rstuff at googlemail.com (Janko Thyson)
Date: Mon, 18 Jun 2012 10:01:09 +0200
Subject: [Rd] S4 Reference Classes: declaring public and private methods
Message-ID: <4FDEE045.5040608@googlemail.com>

Dear list,

is there a way to declare public and private methods in S4 Reference 
Classes? If not, are there plans to add such a feature?

You'll find a small code example of what I mean at Stackoverflow: 
http://stackoverflow.com/questions/11073253/oop-with-r-is-there-a-way-to-declare-public-and-private-methods-s4-reference-c 


Thanks a lot,
Janko Thyson


From andre.zege at gmail.com  Tue Jun 19 17:04:00 2012
From: andre.zege at gmail.com (andre zege)
Date: Tue, 19 Jun 2012 11:04:00 -0400
Subject: [Rd] how to manipulate dput output format
Message-ID: <CACU3EkN5m=xrHMS+6d-LCuVbPPciywdmMeq+5SKLFFgEd6XA+g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120619/b193a7d8/attachment.pl>

From dusa.adrian at gmail.com  Tue Jun 19 17:40:31 2012
From: dusa.adrian at gmail.com (=?UTF-8?B?QWRyaWFuIER1xZ9h?=)
Date: Tue, 19 Jun 2012 18:40:31 +0300
Subject: [Rd] R and C pointers
Message-ID: <CAJ=0CtA6hHQpuhZUQ2iEJ40hthE-5FXx1idCjCECitzBVze=Qw@mail.gmail.com>

Dear R devel,

Apologies for these (most probably trivial) questions, doing my first
attempt to call C from R (and actually learning C in the process).

I need to pass a matrix to C, and after reading R-exts.pdf (many
times), I was unable to find how to handle matrices at C-level...
except for, what probably is the answer, that matrices are in fact
vectors with dimensions.

This is a sample code I am using at C level:
????????????????????????
# include <R.h>
# include <Rinternals.h>
# include <R_ext/Rdynload.h>

SEXP foo(SEXP x) {
    SEXP dimx;
    double *px, *pdimx;

    PROTECT(dimx = getAttrib(x, R_DimSymbol));
    px = REAL(x);
    UNPROTECT(1);
    return(dimx);
}
????????????????????????

The question is: how to create pointers to dimx (in order to extract
individual values)?

I tried:
pdimx = REAL(dimx);

This is where R complains that:
REAL() can only be applied to a 'numeric', not a 'integer'

Much in the same line, what would be the procedure to create pointers
to a logical vector y?
I tried:
PROTECT(y = coerceVector(y, LGLSXP));
py = REAL(y);

where R throws a similar error.

Thanks very much in advance,
Adrian

-- 
Adrian Dusa
Romanian Social Data Archive
1, Schitu Magureanu Bd.
050025 Bucharest sector 5
Romania
Tel.:+40 21 3126618 \
? ? ? ?+40 21 3120210 / int.101
Fax: +40 21 3158391


From simon.urbanek at r-project.org  Tue Jun 19 18:38:43 2012
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 19 Jun 2012 12:38:43 -0400
Subject: [Rd] R and C pointers
In-Reply-To: <CAJ=0CtA6hHQpuhZUQ2iEJ40hthE-5FXx1idCjCECitzBVze=Qw@mail.gmail.com>
References: <CAJ=0CtA6hHQpuhZUQ2iEJ40hthE-5FXx1idCjCECitzBVze=Qw@mail.gmail.com>
Message-ID: <81332E89-93D2-47F2-A325-57A3BE2F57CE@r-project.org>


On Jun 19, 2012, at 11:40 AM, Adrian Du?a wrote:

> Dear R devel,
> 
> Apologies for these (most probably trivial) questions, doing my first
> attempt to call C from R (and actually learning C in the process).
> 
> I need to pass a matrix to C, and after reading R-exts.pdf (many
> times), I was unable to find how to handle matrices at C-level...
> except for, what probably is the answer, that matrices are in fact
> vectors with dimensions.
> 
> This is a sample code I am using at C level:
> ????????????????????????
> # include <R.h>
> # include <Rinternals.h>
> # include <R_ext/Rdynload.h>
> 
> SEXP foo(SEXP x) {
>    SEXP dimx;
>    double *px, *pdimx;
> 
>    PROTECT(dimx = getAttrib(x, R_DimSymbol));
>    px = REAL(x);
>    UNPROTECT(1);
>    return(dimx);
> }
> ????????????????????????
> 
> The question is: how to create pointers to dimx (in order to extract
> individual values)?
> 
> I tried:
> pdimx = REAL(dimx);
> 
> This is where R complains that:
> REAL() can only be applied to a 'numeric', not a 'integer'
> 

And it is right - dimensions are integers, not reals, you want

int *pdimx = INTEGER(dimx);

You can use REAL() only on real vectors, not on anything else.


> Much in the same line, what would be the procedure to create pointers
> to a logical vector y?
> I tried:
> PROTECT(y = coerceVector(y, LGLSXP));
> py = REAL(y);
> 
> where R throws a similar error.
> 

Obviously, you want

Rboolean *py = LOGICAL(y);

Cheers,
Simon


> Thanks very much in advance,
> Adrian
> 
> -- 
> Adrian Dusa
> Romanian Social Data Archive
> 1, Schitu Magureanu Bd.
> 050025 Bucharest sector 5
> Romania
> Tel.:+40 21 3126618 \
>        +40 21 3120210 / int.101
> Fax: +40 21 3158391
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From dusa.adrian at gmail.com  Wed Jun 20 07:58:32 2012
From: dusa.adrian at gmail.com (=?UTF-8?B?QWRyaWFuIER1xZ9h?=)
Date: Wed, 20 Jun 2012 08:58:32 +0300
Subject: [Rd] R and C pointers
In-Reply-To: <81332E89-93D2-47F2-A325-57A3BE2F57CE@r-project.org>
References: <CAJ=0CtA6hHQpuhZUQ2iEJ40hthE-5FXx1idCjCECitzBVze=Qw@mail.gmail.com>
	<81332E89-93D2-47F2-A325-57A3BE2F57CE@r-project.org>
Message-ID: <CAJ=0CtC+2TunmPMm8mw77yjBqpCN3RCSdX9x==bn6kSt3Znx9A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120620/881385d1/attachment.pl>

From simon.urbanek at r-project.org  Wed Jun 20 16:33:52 2012
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 20 Jun 2012 10:33:52 -0400
Subject: [Rd] how to manipulate dput output format
In-Reply-To: <CACU3EkN5m=xrHMS+6d-LCuVbPPciywdmMeq+5SKLFFgEd6XA+g@mail.gmail.com>
References: <CACU3EkN5m=xrHMS+6d-LCuVbPPciywdmMeq+5SKLFFgEd6XA+g@mail.gmail.com>
Message-ID: <524CBA07-EA04-4037-A650-4EE49DCF1DE1@r-project.org>


On Jun 19, 2012, at 11:04 AM, andre zege wrote:

> I am reading into Java dput output for a matrix, more specifically for a
> file backed big-matrix. I basically need to lift dimnames for a matrix from
> dput output. It's no big deal, but the code is very 'hackish' due to the
> need to get rid of quotes, endlines, parenthesis, etc. I was wondering if i
> could manipulate to an extent dput output with some options that define it,
> for example, get rid of quoting each element  in matirx dimnames somehow.
> Another great thing wiould be to make dput dump rownames and colnames on
> two separate lines, but i don't think it's possible. To give a specific
> example, instead of dput output like
> 
> 
> **new("big.matrix.descriptor"
>    , description = structure(list(sharedType = "FileBacked", filename =
> "res", totalRows = 1528,
>    totalCols = 53040, rowOffset = c(0, 1528), colOffset = c(0,
>    53040), nrow = 1528, ncol = 53040, rowNames = c("A", "AA",
>    "RNT.A", "ADVA", "AAPL", "AAS", "ABFS", "ABM", "ABT", "ACI",
>    .......
> 
> I'd prefer ideally to have it in the form where rownames and colnames don't
> have quotes and newlines and if possible are on separate lines
> 
> new("big.matrix.descriptor"
>    , description = structure(list(sharedType = "FileBacked", filename =
> "res", totalRows = 1528,
>    totalCols = 53040, rowOffset = c(0, 1528), colOffset = c(0,
>    53040), nrow = 1528, ncol = 53040,
> rowNames = c(A, AA, RNT.A, ADVA, AAPL, AAS, ABFS, ABM, ABT, ... )
> colNames = c(...)
> 

dput() is intended to be parsed by R so the above is not possible without massaging the output. But why in the would would you use dput() for something that you want to read in Java? Why don't you use a format that Java can read easily - such as JSON?

Cheers,
Simon


> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From edd at debian.org  Thu Jun 21 04:19:14 2012
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 20 Jun 2012 21:19:14 -0500
Subject: [Rd] how to manipulate dput output format
In-Reply-To: <524CBA07-EA04-4037-A650-4EE49DCF1DE1@r-project.org>
References: <CACU3EkN5m=xrHMS+6d-LCuVbPPciywdmMeq+5SKLFFgEd6XA+g@mail.gmail.com>
	<524CBA07-EA04-4037-A650-4EE49DCF1DE1@r-project.org>
Message-ID: <20450.33954.223879.912936@max.nulle.part>


On 20 June 2012 at 10:33, Simon Urbanek wrote:
| 
| On Jun 19, 2012, at 11:04 AM, andre zege wrote:
| 
| > I am reading into Java dput output for a matrix, more specifically for a
| > file backed big-matrix. I basically need to lift dimnames for a matrix from
| > dput output. It's no big deal, but the code is very 'hackish' due to the
| > need to get rid of quotes, endlines, parenthesis, etc. I was wondering if i
| > could manipulate to an extent dput output with some options that define it,
| > for example, get rid of quoting each element  in matirx dimnames somehow.
| > Another great thing wiould be to make dput dump rownames and colnames on
| > two separate lines, but i don't think it's possible. To give a specific
| > example, instead of dput output like
| > 
| > 
| > **new("big.matrix.descriptor"
| >    , description = structure(list(sharedType = "FileBacked", filename =
| > "res", totalRows = 1528,
| >    totalCols = 53040, rowOffset = c(0, 1528), colOffset = c(0,
| >    53040), nrow = 1528, ncol = 53040, rowNames = c("A", "AA",
| >    "RNT.A", "ADVA", "AAPL", "AAS", "ABFS", "ABM", "ABT", "ACI",
| >    .......
| > 
| > I'd prefer ideally to have it in the form where rownames and colnames don't
| > have quotes and newlines and if possible are on separate lines
| > 
| > new("big.matrix.descriptor"
| >    , description = structure(list(sharedType = "FileBacked", filename =
| > "res", totalRows = 1528,
| >    totalCols = 53040, rowOffset = c(0, 1528), colOffset = c(0,
| >    53040), nrow = 1528, ncol = 53040,
| > rowNames = c(A, AA, RNT.A, ADVA, AAPL, AAS, ABFS, ABM, ABT, ... )
| > colNames = c(...)
| > 
| 
| dput() is intended to be parsed by R so the above is not possible without massaging the output. But why in the would would you use dput() for something that you want to read in Java? Why don't you use a format that Java can read easily - such as JSON?

Or even use something designed for fast, large scale data serialization such
as Google Protocol Buffers. 

You get code generated for Java from using the Google library / binaries for
it, and the R package RProtoBuf will provide the other side.  

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From hadley at rice.edu  Thu Jun 21 04:25:00 2012
From: hadley at rice.edu (Hadley Wickham)
Date: Wed, 20 Jun 2012 21:25:00 -0500
Subject: [Rd] "Incompatible methods" for overloaded operator
In-Reply-To: <CAFOpNVFyqaTZHG15N2w13OqBJSwdVfdpbWGfsJim3XhNCmdYfw@mail.gmail.com>
References: <CAFOpNVFyqaTZHG15N2w13OqBJSwdVfdpbWGfsJim3XhNCmdYfw@mail.gmail.com>
Message-ID: <CABdHhvF-WRwa9QaXG7Tb6JoiZJYH70OzUSdvAwUSY_6ZTnWvHQ@mail.gmail.com>

Hi all,

Any ideas about this?  As far as I can tell it should work - and I
don't understand why it's ok when run outside of a package.

Hadley

On Wed, Jun 13, 2012 at 7:41 PM, Winston Chang <winstonchang1 at gmail.com> wrote:
> I'm trying to overload an operator, and I'm running into a strange problem.
> It happens when I install and load the package, but not when I simply
> source() the code.
>
> I'm defining + for two classes. The R code looks like this:
> #' @export
> #' @method "+" a
> `+.a` <- function (x1, x2) {
> ? ?message("Running custom + function")
> }
>
> #' @export
> #' @method "+" b
> `+.b` <- `+.a`
>
> In some cases I do a+b, and in other cases, I do b+b. I'm told that the +.a
> and +.b functions must be identical to avoid the error about "Incompatible
> methods". (In the actual code, the overloaded + function checks the classes
> of x1 and x2, and then sends them off to other functions.)
>
> This is the NAMESPACE file:
> S3method("+",a)
> S3method("+",b)
>
> I've put the code up at https://github.com/wch/badadd.
>
>
>
> If I just cut and paste the function definitions to my R session, it works
> fine:
> x + y
> # Running + function
> # NULL
>
>
> However, if I install and load the package, it gives a warning about
> incompatible methods, and then seems to fall back to the arithmetic +
> operator:
> library(badadd)
> x + y
> # [1] 3
> # attr(,"class")
> # [1] "a"
> # Warning message:
> # Incompatible methods ("+.a", "+.b") for "+"
>
>
> Is this expected behavior? And if so, is there a workaround?
> -Winston
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel



-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From mtmorgan at fhcrc.org  Thu Jun 21 04:59:57 2012
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Wed, 20 Jun 2012 19:59:57 -0700
Subject: [Rd] "Incompatible methods" for overloaded operator
In-Reply-To: <CABdHhvF-WRwa9QaXG7Tb6JoiZJYH70OzUSdvAwUSY_6ZTnWvHQ@mail.gmail.com>
References: <CAFOpNVFyqaTZHG15N2w13OqBJSwdVfdpbWGfsJim3XhNCmdYfw@mail.gmail.com>
	<CABdHhvF-WRwa9QaXG7Tb6JoiZJYH70OzUSdvAwUSY_6ZTnWvHQ@mail.gmail.com>
Message-ID: <4FE28E2D.7050205@fhcrc.org>

On 06/20/2012 07:25 PM, Hadley Wickham wrote:
> Hi all,
>
> Any ideas about this?  As far as I can tell it should work - and I
> don't understand why it's ok when run outside of a package.

from ?groupGeneric under 'Ops' (of which "+" is one)

           used.  If different methods are found, there is a warning
           about 'incompatible methods': in that case or if no method is
           found for either argument the internal method is used.

which doesn't really explain why it works at the command line but not in 
a package. S4 methods can be defined on both arguments, so

   setClass("A", contains="numeric")
   setClass("B", contains="numeric")

   setMethod("+", c("A", "A"), function(e1, e2) message("A + A"))
   setMethod("+", c("A", "B"), function(e1, e2) message("A + B"))
   setMethod("+", c("B", "A"), function(e1, e2) message("B + A"))
   setMethod("+", c("B", "B"), function(e1, e2) message("B + B"))

with

   exportClasses("A", "B")
   exportMethods("+")

and then

 > new("A") + new("B")
A + B
NULL


Martin

>
> Hadley
>
> On Wed, Jun 13, 2012 at 7:41 PM, Winston Chang<winstonchang1 at gmail.com>  wrote:
>> I'm trying to overload an operator, and I'm running into a strange problem.
>> It happens when I install and load the package, but not when I simply
>> source() the code.
>>
>> I'm defining + for two classes. The R code looks like this:
>> #' @export
>> #' @method "+" a
>> `+.a`<- function (x1, x2) {
>>     message("Running custom + function")
>> }
>>
>> #' @export
>> #' @method "+" b
>> `+.b`<- `+.a`
>>
>> In some cases I do a+b, and in other cases, I do b+b. I'm told that the +.a
>> and +.b functions must be identical to avoid the error about "Incompatible
>> methods". (In the actual code, the overloaded + function checks the classes
>> of x1 and x2, and then sends them off to other functions.)
>>
>> This is the NAMESPACE file:
>> S3method("+",a)
>> S3method("+",b)
>>
>> I've put the code up at https://github.com/wch/badadd.
>>
>>
>>
>> If I just cut and paste the function definitions to my R session, it works
>> fine:
>> x + y
>> # Running + function
>> # NULL
>>
>>
>> However, if I install and load the package, it gives a warning about
>> incompatible methods, and then seems to fall back to the arithmetic +
>> operator:
>> library(badadd)
>> x + y
>> # [1] 3
>> # attr(,"class")
>> # [1] "a"
>> # Warning message:
>> # Incompatible methods ("+.a", "+.b") for "+"
>>
>>
>> Is this expected behavior? And if so, is there a workaround?
>> -Winston
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
>


-- 
Computational Biology / Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N.
PO Box 19024 Seattle, WA 98109

Location: Arnold Building M1 B861
Phone: (206) 667-2793


From hadley at rice.edu  Thu Jun 21 05:06:47 2012
From: hadley at rice.edu (Hadley Wickham)
Date: Wed, 20 Jun 2012 22:06:47 -0500
Subject: [Rd] "Incompatible methods" for overloaded operator
In-Reply-To: <4FE28E2D.7050205@fhcrc.org>
References: <CAFOpNVFyqaTZHG15N2w13OqBJSwdVfdpbWGfsJim3XhNCmdYfw@mail.gmail.com>
	<CABdHhvF-WRwa9QaXG7Tb6JoiZJYH70OzUSdvAwUSY_6ZTnWvHQ@mail.gmail.com>
	<4FE28E2D.7050205@fhcrc.org>
Message-ID: <CABdHhvGKRgTTSJRQUS3pu_GDLTJkk0HBTpinHvFTJn1zA7E+qA@mail.gmail.com>

> from ?groupGeneric under 'Ops' (of which "+" is one)
>
> ? ? ? ? ?used. ?If different methods are found, there is a warning
> ? ? ? ? ?about 'incompatible methods': in that case or if no method is
> ? ? ? ? ?found for either argument the internal method is used.
>
> which doesn't really explain why it works at the command line but not in a
> package. S4 methods can be defined on both arguments, so

But aren't the methods compatible?  If equality doesn't make a method
compatible what does?

> ?setClass("A", contains="numeric")
> ?setClass("B", contains="numeric")
>
> ?setMethod("+", c("A", "A"), function(e1, e2) message("A + A"))
> ?setMethod("+", c("A", "B"), function(e1, e2) message("A + B"))
> ?setMethod("+", c("B", "A"), function(e1, e2) message("B + A"))
> ?setMethod("+", c("B", "B"), function(e1, e2) message("B + B"))
>
> with
>
> ?exportClasses("A", "B")
> ?exportMethods("+")
>
> and then
>
>> new("A") + new("B")
> A + B
> NULL

But unfortunately that doesn't work for S3 classes (even with
setOldClass) so it doesn't help much unless we want to rewrite
everything in S4 :/

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From mtmorgan at fhcrc.org  Thu Jun 21 05:24:39 2012
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Wed, 20 Jun 2012 20:24:39 -0700
Subject: [Rd] S4 Reference Classes: declaring public and private methods
In-Reply-To: <4FDEE045.5040608@googlemail.com>
References: <4FDEE045.5040608@googlemail.com>
Message-ID: <4FE293F7.2040405@fhcrc.org>

On 06/18/2012 01:01 AM, Janko Thyson wrote:
> Dear list,
>
> is there a way to declare public and private methods in S4 Reference
> Classes? If not, are there plans to add such a feature?

Hi Janko -- your question is a little ambiguous; if it's about a 
built-in facility to create public vs. private methods, I think the 
answer is no, there is no built-in facility.

For the more general question of how one might go about enforcing 
private methods, I can think of several convoluted starts, but these 
seem like terrible hacks and I wouldn't want to commit them to paper; 
perhaps someone else will be more bold.

Martin

>
> You'll find a small code example of what I mean at Stackoverflow:
> http://stackoverflow.com/questions/11073253/oop-with-r-is-there-a-way-to-declare-public-and-private-methods-s4-reference-c
>
>
> Thanks a lot,
> Janko Thyson
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Computational Biology / Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N.
PO Box 19024 Seattle, WA 98109

Location: Arnold Building M1 B861
Phone: (206) 667-2793


From mtmorgan at fhcrc.org  Thu Jun 21 05:49:13 2012
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Wed, 20 Jun 2012 20:49:13 -0700
Subject: [Rd] "Incompatible methods" for overloaded operator
In-Reply-To: <CABdHhvGKRgTTSJRQUS3pu_GDLTJkk0HBTpinHvFTJn1zA7E+qA@mail.gmail.com>
References: <CAFOpNVFyqaTZHG15N2w13OqBJSwdVfdpbWGfsJim3XhNCmdYfw@mail.gmail.com>
	<CABdHhvF-WRwa9QaXG7Tb6JoiZJYH70OzUSdvAwUSY_6ZTnWvHQ@mail.gmail.com>
	<4FE28E2D.7050205@fhcrc.org>
	<CABdHhvGKRgTTSJRQUS3pu_GDLTJkk0HBTpinHvFTJn1zA7E+qA@mail.gmail.com>
Message-ID: <4FE299B9.2080400@fhcrc.org>

On 06/20/2012 08:06 PM, Hadley Wickham wrote:
>> from ?groupGeneric under 'Ops' (of which "+" is one)
>>
>>           used.  If different methods are found, there is a warning
>>           about 'incompatible methods': in that case or if no method is
>>           found for either argument the internal method is used.
>>
>> which doesn't really explain why it works at the command line but not in a
>> package. S4 methods can be defined on both arguments, so
>
> But aren't the methods compatible?  If equality doesn't make a method
> compatible what does?

Actually I guess that turns out to be the key (to why they work at the 
command line but not in a package).  At the command line they really 
_are_ the same, e.g., .Internal(inspect("+.a")) has the same  address as 
"+.b". In the package they (e.g., badadd:::"+.a") have different 
addresses, I suppose because S3method() acts on them independently.

>
>>   setClass("A", contains="numeric")
>>   setClass("B", contains="numeric")
>>
>>   setMethod("+", c("A", "A"), function(e1, e2) message("A + A"))
>>   setMethod("+", c("A", "B"), function(e1, e2) message("A + B"))
>>   setMethod("+", c("B", "A"), function(e1, e2) message("B + A"))
>>   setMethod("+", c("B", "B"), function(e1, e2) message("B + B"))
>>
>> with
>>
>>   exportClasses("A", "B")
>>   exportMethods("+")
>>
>> and then
>>
>>> new("A") + new("B")
>> A + B
>> NULL
>
> But unfortunately that doesn't work for S3 classes (even with
> setOldClass) so it doesn't help much unless we want to rewrite
> everything in S4 :/

rewrite?

>
> Hadley
>


-- 
Computational Biology / Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N.
PO Box 19024 Seattle, WA 98109

Location: Arnold Building M1 B861
Phone: (206) 667-2793


From winstonchang1 at gmail.com  Thu Jun 21 05:58:12 2012
From: winstonchang1 at gmail.com (Winston Chang)
Date: Wed, 20 Jun 2012 22:58:12 -0500
Subject: [Rd] "Incompatible methods" for overloaded operator
In-Reply-To: <4FE299B9.2080400@fhcrc.org>
References: <CAFOpNVFyqaTZHG15N2w13OqBJSwdVfdpbWGfsJim3XhNCmdYfw@mail.gmail.com>
	<CABdHhvF-WRwa9QaXG7Tb6JoiZJYH70OzUSdvAwUSY_6ZTnWvHQ@mail.gmail.com>
	<4FE28E2D.7050205@fhcrc.org>
	<CABdHhvGKRgTTSJRQUS3pu_GDLTJkk0HBTpinHvFTJn1zA7E+qA@mail.gmail.com>
	<4FE299B9.2080400@fhcrc.org>
Message-ID: <CAFOpNVHQ186dGQLtiO=0TFB2sjqx+j7_aczoAcHqp+sPq7xWmw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120620/ec6b5caa/attachment.pl>

From takahashi.kohske at gmail.com  Thu Jun 21 07:26:48 2012
From: takahashi.kohske at gmail.com (Kohske Takahashi)
Date: Thu, 21 Jun 2012 14:26:48 +0900
Subject: [Rd] "Incompatible methods" for overloaded operator
In-Reply-To: <CAFOpNVHQ186dGQLtiO=0TFB2sjqx+j7_aczoAcHqp+sPq7xWmw@mail.gmail.com>
References: <CAFOpNVFyqaTZHG15N2w13OqBJSwdVfdpbWGfsJim3XhNCmdYfw@mail.gmail.com>
	<CABdHhvF-WRwa9QaXG7Tb6JoiZJYH70OzUSdvAwUSY_6ZTnWvHQ@mail.gmail.com>
	<4FE28E2D.7050205@fhcrc.org>
	<CABdHhvGKRgTTSJRQUS3pu_GDLTJkk0HBTpinHvFTJn1zA7E+qA@mail.gmail.com>
	<4FE299B9.2080400@fhcrc.org>
	<CAFOpNVHQ186dGQLtiO=0TFB2sjqx+j7_aczoAcHqp+sPq7xWmw@mail.gmail.com>
Message-ID: <CAC-jPZqs3KXyTNw20rYT++us4852q3ugqehYYrEGOwNcidgiVQ@mail.gmail.com>

In my view the class a and b should inherit same parent, like class c.
And S3methods should be defined for the class c.

Actually, this is not a workaround.
It will go with the more oop-ish design.

kohske

2012/6/21 Winston Chang <winstonchang1 at gmail.com>:
> On Wed, Jun 20, 2012 at 10:49 PM, Martin Morgan <mtmorgan at fhcrc.org> wrote:
>
>> On 06/20/2012 08:06 PM, Hadley Wickham wrote:
>>
>>> But aren't the methods compatible? ?If equality doesn't make a method
>>> compatible what does?
>>>
>>
>> Actually I guess that turns out to be the key (to why they work at the
>> command line but not in a package). ?At the command line they really _are_
>> the same, e.g., .Internal(inspect("+.a")) has the same ?address as "+.b".
>> In the package they (e.g., badadd:::"+.a") have different addresses, I
>> suppose because S3method() acts on them independently.
>>
>>
> Thanks for the investigation. I wonder if there's some sort of workaround.
>
>
>
>>
>>> But unfortunately that doesn't work for S3 classes (even with
>>> setOldClass) so it doesn't help much unless we want to rewrite
>>> everything in S4 :/
>>>
>>
>> rewrite?
>>
>
> Yes, the original question is the result of some issues that came up in
> ggplot2 development...
>
> -Winston
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel



-- 
Kohske Takahashi <takahashi.kohske at gmail.com>

Assistant Professor,
Research Center for Advanced Science and Technology,
The University of ?Tokyo, Japan.
http://www.fennel.rcast.u-tokyo.ac.jp/profilee_ktakahashi.html


From ingmar.schuster at informatik.uni-leipzig.de  Thu Jun 21 11:58:58 2012
From: ingmar.schuster at informatik.uni-leipzig.de (Ingmar Schuster)
Date: Thu, 21 Jun 2012 11:58:58 +0200
Subject: [Rd] Have download.packages consider non-CRAN repositories
Message-ID: <CAGX06KOr_pi+CXFduJqdVz78kVcmjC8HK1GyvsXYh3Vy502J1Q@mail.gmail.com>

Hi List,

I've set up a CRAN-like repository (not a CRAN mirror) on the local
filesystem (this will change to http in the future). R has been told
about this repository using the following entry in
R_HOME/etc/repositories:
PMR2	PMR2	file:///Users/arbeit/Documents/clarin/Open_Science/PMR2/
TRUE    TRUE    FALSE   FALSE

Now I expected download.packages(), install.packages() etc. to look
for packages in "/Users/arbeit/Documents/clarin/Open_Science/PMR2/"
without passing them repos="file:///Users/..." as an option. That
doesn't happen and I'm not completely sure why. Did I misinterpret the
role of R_HOME/etc/repositories or is it possible I made a mistake?

A related question is this: my PMR2 repo provides source packages
only. Is there a way to tell a lokal R installation to look for source
packages _only_ for this specific repo and use binary packages for
CRAN?

Thanks a lot
Ingmar

-- 
Ingmar Schuster
Natural Language Processing Group
Department of Computer Science
University of Leipzig
Johannisgasse 26
04103 Leipzig, Germany

Tel. +49 341 9732205

http://asv.informatik.uni-leipzig.de/en/staff/Ingmar_Schuster


From ingmar.schuster at informatik.uni-leipzig.de  Thu Jun 21 12:02:18 2012
From: ingmar.schuster at informatik.uni-leipzig.de (Ingmar Schuster)
Date: Thu, 21 Jun 2012 12:02:18 +0200
Subject: [Rd] Have download.packages consider non-CRAN repositories
In-Reply-To: <CAGX06KOr_pi+CXFduJqdVz78kVcmjC8HK1GyvsXYh3Vy502J1Q@mail.gmail.com>
References: <CAGX06KOr_pi+CXFduJqdVz78kVcmjC8HK1GyvsXYh3Vy502J1Q@mail.gmail.com>
Message-ID: <CAGX06KPvRzfP3p-HRL3O=-ACP8+OhQb2dsOdGsyepm7N6rm8sA@mail.gmail.com>

I was not completely explicit on this part: everything works as
expected when I do pass repos="file:///Users/..." as an option. Only
I'm trying to eliminate the need for passing it.

Ingmar



2012/6/21 Ingmar Schuster <ingmar.schuster at informatik.uni-leipzig.de>:
> Now I expected download.packages(), install.packages() etc. to look
> for packages in "/Users/arbeit/Documents/clarin/Open_Science/PMR2/"
> without passing them repos="file:///Users/..." as an option.


-- 
Ingmar Schuster
Natural Language Processing Group
Department of Computer Science
University of Leipzig
Johannisgasse 26
04103 Leipzig, Germany

Tel. +49 341 9732205

http://asv.informatik.uni-leipzig.de/en/staff/Ingmar_Schuster


From renaud at mancala.cbio.uct.ac.za  Thu Jun 21 13:22:01 2012
From: renaud at mancala.cbio.uct.ac.za (Renaud Gaujoux)
Date: Thu, 21 Jun 2012 13:22:01 +0200
Subject: [Rd] "Incompatible methods" for overloaded operator
Message-ID: <4FE303D9.1070504@cbio.uct.ac.za>

Hi,

I may be mistaken here but a possible interpretation of:

"If a method is found for just one argument or the same method is found 
for both, it is used."

could be that "the same method" here does not mean identical in term of 
object/content (as identical tests), but means that the two arguments 
resolve to the same method definition, i.e. a single common method 
exists for both arguments. This would happen is if a single method is  
defined for a common parent class. Try:


`+.C` <- function(x1, x2){
     message("Running custom + function")
}

x <- structure(1, class=c('A', 'C'))
y <- structure(1, class=c('B', 'C'))

x + y


Another work around would be to define only one method for class 'a' and 
do the dispatch to `plus.b` in there (might even be able to call it 
`+.b` if not exported).

Might be a good suggestion to add a test in UseMethod to check is the 
methods are in fact identical. But there might be undesired side 
effects: two identical methods in different environment that behave 
differently depending on the state of the environment?
By the way any way of seeing any code of primitive function or are these 
pure C functions, which need to be searched for in R source code?

Renaud

-- 
Renaud Gaujoux
Computational Biology - University of Cape Town
South Africa


From dusa.adrian at gmail.com  Thu Jun 21 13:38:29 2012
From: dusa.adrian at gmail.com (=?UTF-8?B?QWRyaWFuIER1xZ9h?=)
Date: Thu, 21 Jun 2012 14:38:29 +0300
Subject: [Rd] debug R objects at C level
Message-ID: <CAJ=0CtCkj7G5XdNSK5cnOqusrRqeLC3PSMPPjcEbihRro2KYDQ@mail.gmail.com>

Dear R-devel,

I am now at a debugging phase, and would like to inspect the
(individual) values in an arbitrary R vector. It should be simple, but
after hours of reading I am simply unable to find the right
information.

A possible C code is:
?????????????????
# include <R.h>
# include <Rinternals.h>
# include <R_ext/Rdynload.h>

SEXP foo(SEXP x) // where x is a vector passed by an R function
    double *px;
    int i;
    px = REAL(x);

    for (i = 0; i < length(x); i++) {
        printf("%d\n", px[i]);            // not good
    }
}
?????????????????

That doesn't do the trick, because it only prints the pointer itself.
What I'd like to do is to inspect is the actual vector value in the
position i, that the pointer px[i] points to.

I read about PrintVector() in Rinternals.h, but that prints the whole
R vector, while for debugging purposes I need to inspect individual
values, one at at time.

Thanks in advance,
Adrian

-- 
Adrian Dusa
Romanian Social Data Archive
1, Schitu Magureanu Bd.
050025 Bucharest sector 5
Romania
Tel.:+40 21 3126618 \
? ? ? ?+40 21 3120210 / int.101
Fax: +40 21 3158391


From murdoch.duncan at gmail.com  Thu Jun 21 14:02:03 2012
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 21 Jun 2012 08:02:03 -0400
Subject: [Rd] debug R objects at C level
In-Reply-To: <CAJ=0CtCkj7G5XdNSK5cnOqusrRqeLC3PSMPPjcEbihRro2KYDQ@mail.gmail.com>
References: <CAJ=0CtCkj7G5XdNSK5cnOqusrRqeLC3PSMPPjcEbihRro2KYDQ@mail.gmail.com>
Message-ID: <4FE30D3B.8050208@gmail.com>

On 12-06-21 7:38 AM, Adrian Du?a wrote:
> Dear R-devel,
>
> I am now at a debugging phase, and would like to inspect the
> (individual) values in an arbitrary R vector. It should be simple, but
> after hours of reading I am simply unable to find the right
> information.
>
> A possible C code is:
> ?????????????????
> # include<R.h>
> # include<Rinternals.h>
> # include<R_ext/Rdynload.h>
>
> SEXP foo(SEXP x) // where x is a vector passed by an R function
>      double *px;
>      int i;
>      px = REAL(x);
>
>      for (i = 0; i<  length(x); i++) {
>          printf("%d\n", px[i]);            // not good
>      }
> }
> ?????????????????
>
> That doesn't do the trick, because it only prints the pointer itself.
> What I'd like to do is to inspect is the actual vector value in the
> position i, that the pointer px[i] points to.
>
> I read about PrintVector() in Rinternals.h, but that prints the whole
> R vector, while for debugging purposes I need to inspect individual
> values, one at at time.

You seeing the value, not a pointer, but you are using an integer format 
to display a real.  You need the %f or related format.

I would also recommend using Rprintf() rather than printf().  The latter 
will only work on some platforms, while Rprintf() should work everywhere.

Duncan Murdoch


From murdoch.duncan at gmail.com  Thu Jun 21 14:05:15 2012
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 21 Jun 2012 08:05:15 -0400
Subject: [Rd] Have download.packages consider non-CRAN repositories
In-Reply-To: <CAGX06KOr_pi+CXFduJqdVz78kVcmjC8HK1GyvsXYh3Vy502J1Q@mail.gmail.com>
References: <CAGX06KOr_pi+CXFduJqdVz78kVcmjC8HK1GyvsXYh3Vy502J1Q@mail.gmail.com>
Message-ID: <4FE30DFB.1060003@gmail.com>

On 12-06-21 5:58 AM, Ingmar Schuster wrote:
> Hi List,
>
> I've set up a CRAN-like repository (not a CRAN mirror) on the local
> filesystem (this will change to http in the future). R has been told
> about this repository using the following entry in
> R_HOME/etc/repositories:
> PMR2	PMR2	file:///Users/arbeit/Documents/clarin/Open_Science/PMR2/
> TRUE    TRUE    FALSE   FALSE
>
> Now I expected download.packages(), install.packages() etc. to look
> for packages in "/Users/arbeit/Documents/clarin/Open_Science/PMR2/"
> without passing them repos="file:///Users/..." as an option. That
> doesn't happen and I'm not completely sure why. Did I misinterpret the
> role of R_HOME/etc/repositories or is it possible I made a mistake?
>
> A related question is this: my PMR2 repo provides source packages
> only. Is there a way to tell a lokal R installation to look for source
> packages _only_ for this specific repo and use binary packages for
> CRAN?
>
> Thanks a lot
> Ingmar
>

You need to set the "repos" option to change the default repository. 
The setRepositories() function does that using the file you edited.

Duncan Murdoch


From dusa.adrian at gmail.com  Thu Jun 21 14:33:03 2012
From: dusa.adrian at gmail.com (=?UTF-8?B?QWRyaWFuIER1xZ9h?=)
Date: Thu, 21 Jun 2012 15:33:03 +0300
Subject: [Rd] debug R objects at C level
In-Reply-To: <4FE30D3B.8050208@gmail.com>
References: <CAJ=0CtCkj7G5XdNSK5cnOqusrRqeLC3PSMPPjcEbihRro2KYDQ@mail.gmail.com>
	<4FE30D3B.8050208@gmail.com>
Message-ID: <CAJ=0CtAYAj1WTME+NMD1XuFN3CNTkd9XcSuXeMF4fZvE2ytoZQ@mail.gmail.com>

On Thu, Jun 21, 2012 at 3:02 PM, Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
> On 12-06-21 7:38 AM, Adrian Du?a wrote:
>>[...]
>
> You seeing the value, not a pointer, but you are using an integer format to
> display a real. ?You need the %f or related format.
>
> I would also recommend using Rprintf() rather than printf(). ?The latter
> will only work on some platforms, while Rprintf() should work everywhere.

Oh... so that was a printing issue... indeed very basic (starting to
learn C and slowly catching up with various data formats).
Thanks as well for the tip with Rprintf(), that also helps.

Best wishes,
Adrian

-- 
Adrian Dusa
Romanian Social Data Archive
1, Schitu Magureanu Bd.
050025 Bucharest sector 5
Romania
Tel.:+40 21 3126618 \
? ? ? ?+40 21 3120210 / int.101
Fax: +40 21 3158391


From ligges at statistik.tu-dortmund.de  Thu Jun 21 14:43:12 2012
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 21 Jun 2012 14:43:12 +0200
Subject: [Rd] Have download.packages consider non-CRAN repositories
In-Reply-To: <4FE30DFB.1060003@gmail.com>
References: <CAGX06KOr_pi+CXFduJqdVz78kVcmjC8HK1GyvsXYh3Vy502J1Q@mail.gmail.com>
	<4FE30DFB.1060003@gmail.com>
Message-ID: <4FE316E0.3010407@statistik.tu-dortmund.de>



On 21.06.2012 14:05, Duncan Murdoch wrote:
> On 12-06-21 5:58 AM, Ingmar Schuster wrote:
>> Hi List,
>>
>> I've set up a CRAN-like repository (not a CRAN mirror) on the local
>> filesystem (this will change to http in the future). R has been told
>> about this repository using the following entry in
>> R_HOME/etc/repositories:
>> PMR2    PMR2    file:///Users/arbeit/Documents/clarin/Open_Science/PMR2/
>> TRUE    TRUE    FALSE   FALSE
>>
>> Now I expected download.packages(), install.packages() etc. to look
>> for packages in "/Users/arbeit/Documents/clarin/Open_Science/PMR2/"
>> without passing them repos="file:///Users/..." as an option. That
>> doesn't happen and I'm not completely sure why. Did I misinterpret the
>> role of R_HOME/etc/repositories or is it possible I made a mistake?
>>
>> A related question is this: my PMR2 repo provides source packages
>> only. Is there a way to tell a lokal R installation to look for source
>> packages _only_ for this specific repo and use binary packages for
>> CRAN?
>>
>> Thanks a lot
>> Ingmar
>>
>
> You need to set the "repos" option to change the default repository. The
> setRepositories() function does that using the file you edited.

And note that is must be a complete repository, i.e. packages in subdir 
"./src/contrib". A user can use install.packages(....., type="source") 
if you do not provide binaries in case they are expected by default.

Uwe Ligges




>
> Duncan Murdoch
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ingmar.schuster at informatik.uni-leipzig.de  Thu Jun 21 14:39:15 2012
From: ingmar.schuster at informatik.uni-leipzig.de (Ingmar Schuster)
Date: Thu, 21 Jun 2012 14:39:15 +0200
Subject: [Rd] Have download.packages consider non-CRAN repositories
In-Reply-To: <4FE30DFB.1060003@gmail.com>
References: <CAGX06KOr_pi+CXFduJqdVz78kVcmjC8HK1GyvsXYh3Vy502J1Q@mail.gmail.com>
	<4FE30DFB.1060003@gmail.com>
Message-ID: <CAGX06KPqOxF-EFj1WwkQ9O3mewQQd7mcsQ_+57UnZWXv+pLDxQ@mail.gmail.com>

2012/6/21 Duncan Murdoch <murdoch.duncan at gmail.com>:
> On 12-06-21 5:58 AM, Ingmar Schuster wrote:
>>
>> Hi List,
>>
>> I've set up a CRAN-like repository (not a CRAN mirror) on the local
>> filesystem (this will change to http in the future). R has been told
>> about this repository using the following entry in
>> R_HOME/etc/repositories:
>> PMR2 ? ?PMR2 ? ?file:///Users/arbeit/Documents/clarin/Open_Science/PMR2/
>> TRUE ? ?TRUE ? ?FALSE ? FALSE
>>
>> Now I expected download.packages(), install.packages() etc. to look
>> for packages in "/Users/arbeit/Documents/clarin/Open_Science/PMR2/"
>> without passing them repos="file:///Users/..." as an option. That
>> doesn't happen and I'm not completely sure why. Did I misinterpret the
>> role of R_HOME/etc/repositories or is it possible I made a mistake?
>>
>> A related question is this: my PMR2 repo provides source packages
>> only. Is there a way to tell a lokal R installation to look for source
>> packages _only_ for this specific repo and use binary packages for
>> CRAN?
>>
>> Thanks a lot
>> Ingmar
>>
>
> You need to set the "repos" option to change the default repository. The
> setRepositories() function does that using the file you edited.
>
> Duncan Murdoch

setRepositories() shows my repo to be one of the defaults (this can be
set in the repositories file, which I did). Doesn't work anyway. One
strange thing though is that setRepositories() doesn't give the
correct name that I configured, just "NA".

Ingmar

-- 
Ingmar Schuster
Natural Language Processing Group
Department of Computer Science
University of Leipzig
Johannisgasse 26
04103 Leipzig, Germany

Tel. +49 341 9732205

http://asv.informatik.uni-leipzig.de/en/staff/Ingmar_Schuster


From htl10 at users.sourceforge.net  Fri Jun 22 00:02:00 2012
From: htl10 at users.sourceforge.net (Hin-Tak Leung)
Date: Thu, 21 Jun 2012 23:02:00 +0100 (BST)
Subject: [Rd] package slot of generic "[" and missing env@target?
Message-ID: <1340316120.90328.YahooMailClassic@web29401.mail.ird.yahoo.com>

Hi,

Since upgraded to R 2.15, I have a problem with duplicate S4 class name no longer works (the reason for having duplicate S4 class names is just software forks - they are largely identical but don't have an inheritence relationship, and will never have such). 

This is happening with "library(mypackage2)" :

Error: package slot missing from signature for generic ?[?
and classes myclass, ANY, ANY, ANY
cannot use with duplicate class names (the package may need to be re-installed)

I have done "debug(methods:::.pkgMethodLabel)" and found that curiously, it is invoked for the two copies of the "[" generic with signature "classes myclass, ANY, ANY, ANY", ones with 
packageSlot(method at target) sets to c("mypackage2", "methods", "methods", "methods"), the other just c("", "", "",""), instead of  
c("mypackage1", "methods", "methods", "methods").

So in the R debugger, I modified the packageSlot() directly, and get library(mypacakge2) to finish loading, a few times (once in a while R craps out with some error message about LANGSXP - I know it is probably a bad idea to modify data structures within the debugger, so that's probably expected).

So my next step was simply to patch R/library/methods to downgrade the stop() to a warning(), as well as inserting the missing packageSlot values there and then.

This got both packages loaded. But then, some actual use of "[", it gives this error instead:

Error in .methodPackageSlots(def, label, table, dupl, isCurrent) : 
  trying to get slot "target" from an object of a basic class ("environment") with no slots

and when I downgrade this error to a warning again, modifying (src/main/attrib.c) I got "[" dispatched to the base class (as well as stack imbalance - the latter is expected and "asking for it"...).

Anyway, I am thinking:

- doing "debug(methods:::.pkgMethodLabel)", I see two "[" of signature "classes myclass, ANY, ANY, ANY", one comes with packageSlot with the correct stuff and one with just 4 "", that seems to be a bug?

- from the warning at the beginning: 
"A specification for class ?myclass? in package ?mypackage1? seems equivalent to one from package ?mypackage2? and is not turning on duplicate class definitions for this class"

It would appear that there is a "correct" way of turning on duplicate class definition, but I have not found any documentation to that effect.
I see some discussion about class unions, and inheritances, but in this case, neither are appropriate - the two packages are just forks and have no union nor inheritance relationship; but it is desirable to load both, to check for differences and bugs.

- I am also curious why only "[" triggers the problem, but not "[<-" or another of the other duplicated methods. Obviously subsetting is being treated specially, as is mentioned a few times in R internals; but I was expecting subassignment to be affected also, and that does not seems to be the case.


Anyhow, it is an extremely useful feature to be able to load a past version of a package simultaneously just by renaming the package name and namespace, to check for regression and change-in-behavior, i.e. newly added bugs; so I am hoping to get this working again.

TIA.


From hb at biostat.ucsf.edu  Fri Jun 22 06:45:32 2012
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Thu, 21 Jun 2012 21:45:32 -0700
Subject: [Rd] Ctrl-C at the Rterm prompt is remembered (unless pressing
	ENTER).
Message-ID: <CAFDcVCRx0xu1vvSZcX2wEMvv6+z-xVjCJ0-Qix0VLfocjX7N9g@mail.gmail.com>

Hi,

there is a minor glitch with Ctrl-C on Windows:

1. Start Rterm.exe
2. Press Ctrl-C (without ENTER afterwards) to generate a user interrupt signal.
3. Type Sys.sleep(1e6) + ENTER.
4. The user interrupt in Step 2 causes Sys.sleep() in Step 3 to be interrupted.

I can reproduce this behavior on Windows 7 64-bit and 'Rterm.exe' with
R v2.13.0 (2011-04-13), v2.15.0 Patched (2012-05-26 r59447), and Devel
(2012-06-20 r59586).

It occurs neither with 'R' on OSX and R v2.15.0 (2012-03-30) nor with
'R' on Linux and R v2.15.0 Patched (2012-05-01 r59304).  In those
cases, pressing Ctrl-C also advances the prompt (just as if Ctrl-C was
followed by an ENTER).  This is not the case with Rterm on Windows,
where pressing Ctrl-C does not advance the prompt.  However, pressing
Ctrl-C and then ENTER, gives an empty line between the two prompts
(just as if Ctrl-C was followed by an ENTER that "didn't get
through").

/Henrik

PS. I am aware of the recent Bug/Fix #14948
[https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=14948].


From hintak_leung at yahoo.co.uk  Fri Jun 22 12:14:22 2012
From: hintak_leung at yahoo.co.uk (Hin-Tak Leung)
Date: Fri, 22 Jun 2012 11:14:22 +0100 (BST)
Subject: [Rd] package slot of generic "[" and missing env@target?
In-Reply-To: <1340316120.90328.YahooMailClassic@web29401.mail.ird.yahoo.com>
Message-ID: <1340360062.14301.YahooMailClassic@web29402.mail.ird.yahoo.com>

--- On Thu, 21/6/12, Hin-Tak Leung <htl10 at users.sourceforge.net> wrote:

> Hi,
> 
> Since upgraded to R 2.15, I have a problem with duplicate S4
> class name no longer works (the reason for having duplicate
> S4 class names is just software forks - they are largely
> identical but don't have an inheritence relationship, and
> will never have such). 
> 
> This is happening with "library(mypackage2)" :
> 
> Error: package slot missing from signature for generic
> ?[?
> and classes myclass, ANY, ANY, ANY
> cannot use with duplicate class names (the package may need
> to be re-installed)
> 
> I have done "debug(methods:::.pkgMethodLabel)" and found
> that curiously, it is invoked for the two copies of the "["
> generic with signature "classes myclass, ANY, ANY, ANY",
> ones with 
> packageSlot(method at target) sets to c("mypackage2",
> "methods", "methods", "methods"), the other just c("", "",
> "",""), instead of? 
> c("mypackage1", "methods", "methods", "methods").
> 
> So in the R debugger, I modified the packageSlot() directly,
> and get library(mypacakge2) to finish loading, a few times
> (once in a while R craps out with some error message about
> LANGSXP - I know it is probably a bad idea to modify data
> structures within the debugger, so that's probably
> expected).
> 
> So my next step was simply to patch R/library/methods to
> downgrade the stop() to a warning(), as well as inserting
> the missing packageSlot values there and then.
> 
> This got both packages loaded. But then, some actual use of
> "[", it gives this error instead:
> 
> Error in .methodPackageSlots(def, label, table, dupl,
> isCurrent) : 
> ? trying to get slot "target" from an object of a basic
> class ("environment") with no slots
> 
> and when I downgrade this error to a warning again,
> modifying (src/main/attrib.c) I got "[" dispatched to the
> base class (as well as stack imbalance - the latter is
> expected and "asking for it"...).
> 
> Anyway, I am thinking:
> 
> - doing "debug(methods:::.pkgMethodLabel)", I see two "[" of
> signature "classes myclass, ANY, ANY, ANY", one comes with
> packageSlot with the correct stuff and one with just 4 "",
> that seems to be a bug?
> 
> - from the warning at the beginning: 
> "A specification for class ?myclass? in package
> ?mypackage1? seems equivalent to one from package
> ?mypackage2? and is not turning on duplicate class
> definitions for this class"
> 
> It would appear that there is a "correct" way of turning on
> duplicate class definition, but I have not found any
> documentation to that effect.
> I see some discussion about class unions, and inheritances,
> but in this case, neither are appropriate - the two packages
> are just forks and have no union nor inheritance
> relationship; but it is desirable to load both, to check for
> differences and bugs.
> 
> - I am also curious why only "[" triggers the problem, but
> not "[<-" or another of the other duplicated methods.
> Obviously subsetting is being treated specially, as is
> mentioned a few times in R internals; but I was expecting
> subassignment to be affected also, and that does not seems
> to be the case.
> 
> 
> Anyhow, it is an extremely useful feature to be able to load
> a past version of a package simultaneously just by renaming
> the package name and namespace, to check for regression and
> change-in-behavior, i.e. newly added bugs; so I am hoping to
> get this working again.
> 
> TIA.
> 

Found a small work-around - whenever I want to switch, just do

detach("package:package1", unload=TRUE)
library(package2, quietly=TRUE)

or vice versa. A bit tedious, also documentation says detach() doesn't always work as planned.  (with 'echo=FALSE' in Sweave, the resulting tex doesn't even change at all). There are also a dozen of:

Warning in FUN(X[[1L]], ...) :
  Created a package name, ?2012-06-22 10:58:02?, when none found

whenever detach() + library() is done. Still  would appreciate clarification of the missing package slot in '[' generic (and whether it is a bug) and other matters.


From ingmar.schuster at informatik.uni-leipzig.de  Fri Jun 22 15:10:14 2012
From: ingmar.schuster at informatik.uni-leipzig.de (Ingmar Schuster)
Date: Fri, 22 Jun 2012 15:10:14 +0200
Subject: [Rd] Have download.packages consider non-CRAN repositories
In-Reply-To: <4FE316E0.3010407@statistik.tu-dortmund.de>
References: <CAGX06KOr_pi+CXFduJqdVz78kVcmjC8HK1GyvsXYh3Vy502J1Q@mail.gmail.com>
	<4FE30DFB.1060003@gmail.com>
	<4FE316E0.3010407@statistik.tu-dortmund.de>
Message-ID: <CAGX06KOXG1iuiaxiDitBfqx7v6ZXPKA4XGPmUsnKKW5_tr4KpQ@mail.gmail.com>

Hi Uwe and List,

Thanks for your suggestions.

It's a complete repository with source Packages and the PACKAGES(.gz)
index file under "src/contrib/". As mentioned: explicitly calling

install.packages("PACKAGE_NAME",
repos="file:///Users/arbeit/Documents/clarin/Open_Science/PMR2/",
type="source");

works without any problems. But configuring the repository through
R_HOME/etc/repositories and obmitting the repos argument to
install.packages() is what I want and what doesn't work. Ideas?

> And note that is must be a complete repository, i.e. packages in subdir
> "./src/contrib". A user can use install.packages(....., type="source") if
> you do not provide binaries in case they are expected by default.
>
> Uwe Ligges

I knew about the type="source" argument to install.packages() but
hoped there would be a way to permanently configure this as default
for a source-only repository.


Thanks,
Ingmar Schuster

-- 
Ingmar Schuster
Natural Language Processing Group
Department of Computer Science
University of Leipzig
Johannisgasse 26
04103 Leipzig, Germany

Tel. +49 341 9732205

http://asv.informatik.uni-leipzig.de/en/staff/Ingmar_Schuster


From jeff.hamann at forestinformatics.com  Sat Jun 23 00:01:38 2012
From: jeff.hamann at forestinformatics.com (Jeff Hamann)
Date: Fri, 22 Jun 2012 15:01:38 -0700
Subject: [Rd] Vignettes are not being (re)built.
Message-ID: <E0E7AB8E-3466-4308-9514-C49FD34612D8@forestinformatics.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120622/3346c4bd/attachment.pl>

From alastair.droop at gmail.com  Fri Jun 22 23:00:15 2012
From: alastair.droop at gmail.com (Alastair)
Date: Fri, 22 Jun 2012 21:00:15 +0000
Subject: [Rd] Build fails with sysdata.rda in R dir
References: <87lijovdxu.fsf@gmail.com>
Message-ID: <loom.20120622T225632-33@post.gmane.org>

I had the same issue.

Try:
R CMD BUILD --resave-data="best" package

This worked for me.  The issue seems to be in the reserving functions, 
but I'm not sure where.

HTH

Alastair


From ripley at stats.ox.ac.uk  Sat Jun 23 07:18:15 2012
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 23 Jun 2012 06:18:15 +0100
Subject: [Rd] Vignettes are not being (re)built.
In-Reply-To: <E0E7AB8E-3466-4308-9514-C49FD34612D8@forestinformatics.com>
References: <E0E7AB8E-3466-4308-9514-C49FD34612D8@forestinformatics.com>
Message-ID: <4FE55197.7070007@stats.ox.ac.uk>

On 22/06/2012 23:01, Jeff Hamann wrote:
> I'm adding a couple of vignettes to an existing package.

Incorrectly, it seems, but you told us no details.

You can use R CMD build to get the PDFs (re-)built.  R CMD check checks 
(preferably the tarball), but re-makes nothing.

>
> When I make a change to the sweave file, and run the check command,
>
> c:\conifers\trunk>R CMD check rconifers
>
> I get the following message(s) in the 00check.log file:
>
> * checking for unstated dependencies in vignettes ... OK
> * checking package vignettes in 'inst/doc' ... WARNING
> Package vignette(s) without corresponding PDF:
>     'ConifersIntroVignette.rnw'
>     'rconifers.Rnw'
>
> * checking running R code from vignettes ... OK
> * checking re-building of vignette PDFs ... OK
> * checking PDF version of manual ... OK
>
> When the process completes, I still don't get updated vignettes in the rconifers.Rcheck/rconifers/inst/doc directory.
>
> Why? I can't find the right switch.
>
>> win.version()
> [1] "Windows 7 x64 (build 7601) Service Pack 1"
>>
>
>> R.Version()
> $platform
> [1] "x86_64-pc-mingw32"
>
> $arch
> [1] "x86_64"
>
> $os
> [1] "mingw32"
>
> $system
> [1] "x86_64, mingw32"
>
> $status
> [1] ""
>
> $major
> [1] "2"
>
> $minor
> [1] "15.0"
>
> $year
> [1] "2012"
>
> $month
> [1] "03"
>
> $day
> [1] "30"
>
> $`svn rev`
> [1] "58871"
>
> $language
> [1] "R"
>
> $version.string
> [1] "R version 2.15.0 (2012-03-30)"
>
> $nickname
> [1] ""
>
>>
>
> Respectfully,
> Jeff.
>
>
> Jeff Hamann, PhD
> PO Box 1421
> Corvallis, Oregon 97339-1421
> 230 SW 3rd Street Suite #310
> Corvallis, Oregon 97333
> 541-602-5438 (c)
> 541-754-2457 (h)
> jeff.hamann[at]forestinformatics[dot]com
> jeff.d.hamann[at]gmail[dot]com
> http://www.forestinformatics.com
> http://en.wikipedia.org/wiki/Forest_informatics
>
> To ensure that your email is processed, include a subject entry in your email.
>
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ligges at statistik.tu-dortmund.de  Sat Jun 23 16:08:52 2012
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 23 Jun 2012 16:08:52 +0200
Subject: [Rd] Build fails with sysdata.rda in R dir
In-Reply-To: <87lijovdxu.fsf@gmail.com>
References: <87lijovdxu.fsf@gmail.com>
Message-ID: <4FE5CDF4.4020307@statistik.tu-dortmund.de>



On 15.06.2012 16:37, Vitalie Spinu wrote:
>
> Hi,
>
> I am getting a strange error with 15.0 which I've not seen with previous
> versions of R.
>
> If sysdata.rda is included in R directory of the package I am getting:
>
> R CMD build betfairly.roxygen/
> * checking for file ?betfairly.roxygen/DESCRIPTION? ... OK
> * preparing ?betfairly?:
> * checking DESCRIPTION meta-information ... OK
> * excluding invalid files
> Subdirectory 'R' contains invalid file names:
>    ?getMarketTradedVolume.Rd? ?sfdsfsd?
> * checking for LF line-endings in source and make files
> * checking for empty or unneeded directories
> Removed empty directory ?betfairly/inst/doc?
> * looking to see if a ?data/datalist? file should be added
> Error in if (any(update)) { : missing value where TRUE/FALSE needed
> Execution halted
>
>
> If I remove the data everything is fine:
>
> @~/works/betfair$ rm betfairly.roxygen/R/sysdata.rda
> @~/works/betfair$ R CMD build betfairly.roxygen/
> * checking for file ?betfairly.roxygen/DESCRIPTION? ... OK
> * preparing ?betfairly?:
> * checking DESCRIPTION meta-information ... OK
> * excluding invalid files
> Subdirectory 'R' contains invalid file names:
>    ?getMarketTradedVolume.Rd? ?sfdsfsd?
> * checking for LF line-endings in source and make files
> * checking for empty or unneeded directories
> Removed empty directory ?betfairly/inst/doc?
> * building ?betfairly_1.2.1.tar.gz?
>
>
> If I manually adding sysdata.rda after build then checks run ok.


Hmmm, and how have you added it before? Can you send us an example how 
to create an sysdata.rda that causes R to fail? If this is done vy 
roxygen, please ask the roxygen maintainers. If plainR, I am happy to 
look into it.

Best,
Uwe Ligges



> Vitalie.
>
> R version 2.15.0 (2012-03-30)
> Copyright (C) 2012 The R Foundation for Statistical Computing
> ISBN 3-900051-07-0
> Platform: i686-pc-linux-gnu (32-bit)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under the terms of the
> GNU General Public License versions 2 or 3.
> For more information about these matters see
> http://www.gnu.org/licenses/.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ligges at statistik.tu-dortmund.de  Sat Jun 23 17:00:17 2012
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 23 Jun 2012 17:00:17 +0200
Subject: [Rd] Have download.packages consider non-CRAN repositories
In-Reply-To: <CAGX06KOXG1iuiaxiDitBfqx7v6ZXPKA4XGPmUsnKKW5_tr4KpQ@mail.gmail.com>
References: <CAGX06KOr_pi+CXFduJqdVz78kVcmjC8HK1GyvsXYh3Vy502J1Q@mail.gmail.com>
	<4FE30DFB.1060003@gmail.com>
	<4FE316E0.3010407@statistik.tu-dortmund.de>
	<CAGX06KOXG1iuiaxiDitBfqx7v6ZXPKA4XGPmUsnKKW5_tr4KpQ@mail.gmail.com>
Message-ID: <4FE5DA01.6030101@statistik.tu-dortmund.de>



On 22.06.2012 15:10, Ingmar Schuster wrote:
> Hi Uwe and List,
>
> Thanks for your suggestions.
>
> It's a complete repository with source Packages and the PACKAGES(.gz)
> index file under "src/contrib/". As mentioned: explicitly calling
>
> install.packages("PACKAGE_NAME",
> repos="file:///Users/arbeit/Documents/clarin/Open_Science/PMR2/",
> type="source");
>
> works without any problems. But configuring the repository through
> R_HOME/etc/repositories and obmitting the repos argument to
> install.packages() is what I want and what doesn't work. Ideas?

1. I haven't tried your syntax from above, but I'd rather use
  "file:/Users/arbeit/Documents/clarin/Open_Science/PMR2"
or under Windows in a safer way::
  "file:c:/Users/arbeit/Documents/clarin/Open_Science/PMR2"

2. Maybe you forgot to set the Repository active via setRepositories()?

3. Why don't you just set the repositories at startup, e.g. in 
Rprofile.site or your personal .Rprofile via:

local({
       r <- getOption("repos")
       r["myCRAN"] <- "file:////store/ligges/public_html/CRAN"
       options(repos=r)
})

works for me with store being a machine in the network (via UNC path).

Best,
uwe Ligges




>> And note that is must be a complete repository, i.e. packages in subdir
>> "./src/contrib". A user can use install.packages(....., type="source") if
>> you do not provide binaries in case they are expected by default.
>>
>> Uwe Ligges
>
> I knew about the type="source" argument to install.packages() but
> hoped there would be a way to permanently configure this as default
> for a source-only repository.
>
>
> Thanks,
> Ingmar Schuster
>


From jfox at mcmaster.ca  Sat Jun 23 17:51:55 2012
From: jfox at mcmaster.ca (John Fox)
Date: Sat, 23 Jun 2012 11:51:55 -0400
Subject: [Rd] globalVariables()
Message-ID: <web-412829408@cgpsrv2.cis.mcmaster.ca>

Dear r-devel list members,

By placing a call to the new (with R 2.15.1) globalVariables() in the development version of the Rcmdr package, I've succeeded in reducing the "notes" produced by R CMD check from dozens to two. But I still get the following notes, even though '.commander.done' is in the call to globalVariables():

------------- snip ------------

* checking R code for possible problems ... NOTE
Commander: no visible binding for '<<-' assignment to '.commander.done'
  (C:/Users/John Fox/workspace/Rcmdr/R/commander.R:653)
closeCommander: no visible binding for '<<-' assignment to
  '.commander.done' (C:/Users/John
  Fox/workspace/Rcmdr/R/file-menu.R:142)

------------- snip ------------

Is there a way to get rid of these notes (without, of course, removing the <<- assignments)?

Finally, here's a rough function that I used to compose the globalVariables() command from the package check summary; it's probably not bullet-proof, but perhaps others will find it useful for packages, like the Rcmdr, that currently generate many notes about global variables:

------------- snip ------------

findGlobals <- function(filein="00check.log", fileout="globals.R"){
  checklog <- readLines(filein)
  whichline <- which(grepl("checking R code for possible problems .* NOTE", checklog))
  checklog <- checklog[-(1:whichline)]
  whichline <- which(grepl("checking Rd files", checklog))
  checklog <- checklog[-(whichline:length(checklog))]
  globals <- gsub(".*no visible binding for global variable[ ]*", "", checklog)
  globals <- gsub(".*no visible global function definition for[ ]*", "", globals)
  globlas <- gsub(".*no visible binding for '<<-' assignment to[ ]*", "", globals)
  globals <- globals[globals != ""]
  globals <- sub("^ *", "", globals)
  globals <- sub(" *$", "", globals)
  whichentries <- which(grepl(":", globals))
  globals <- globals[-whichentries]
  globals <- gsub(".* ", "", globals)
  globals <- unique(globals)
  cmd <- paste("if (getRversion() >= '2.15.1') globalVariables(c(", 
               paste(globals, collapse=", "), "))", sep="")
  cmd <- strwrap(cmd)
  writeLines(cmd, fileout)
}

------------- snip ------------

Any help would be appreciated.

John

------------------------------------------------
John Fox
Sen. William McMaster Prof. of Social Statistics
Department of Sociology
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/


From jpnolan at american.edu  Sun Jun 24 03:54:38 2012
From: jpnolan at american.edu (John Nolan)
Date: Sat, 23 Jun 2012 21:54:38 -0400
Subject: [Rd] Win 64 package build - ERROR: loading failed for 'x64'
Message-ID: <OFE74A4F41.07E6C42B-ON85257A27.000A7EA6-85257A27.000A7EBC@american.edu>

I have developed an R package that works under Win32, but when I attempt to build it on Win64,
I get     ERROR: loading failed for 'x64'

More precisely, I developed and tested the package under Win32 and it works. But when I move
to a 64 bit Windows 7 (Home Premium) system, and attempt to build both 32 bit and 64 bit packages, 
the 32 bit package seems to build, but the 64 bit build fails.
'rcmd build test' works fine, producing DLLs in both src-i386 and src-x64

But 'rcmd check test' and 'rcmd install test' both fail.  
When R attempts to load the 64 bit DLL.  A pop-up window says
   R for Windows terminal front-end has stopped working,
then I get the error message on the console
   ERROR: loading failed for 'x64'
   
Below is the Makevar.win file (it selects a library based on 32 vs 64 bit).
Also below is 00install.out and R.Version() output.

I'd appreciate any suggestions.

John
 ...........................................................................................................
 John P. Nolan
 Math/Stat Department
 227 Gray Hall,   American University
 4400 Massachusetts Avenue, NW
 Washington, DC 20016-8050

 jpnolan at american.edu      
 voice: 202.885.3140          web: academic2.american.edu/~jpnolan
 ...........................................................................................................

----------------- Makevar.win ------------------------------------------
ifeq "$(WIN)" "64"
PKG_LIBS=../../../win64/test_win64.a -lgfortran
else
PKG_LIBS=../../../win32/test_win32.a -lgfortran
endif

PKG_CPPFLAGS=-I/JohnsWork/test/src/

-------------  00install.out -----------------------------------------

* installing *source* package 'test' ...
** libs

*** arch - i386
gcc  -I"C:/PROGRA~1/R/R-215~1.0/include" -DNDEBUG -I/JohnsWork/test/src        -O3 -Wall  -std=gnu99 -mtune=core2 -c testR.c -o testR.o
gcc -shared -s -static-libgcc -o test.dll tmp.def testR.o ../../../win32/test_win32.lib -lgfortran -LC:/PROGRA~1/R/R-215~1.0/bin/i386 -lR
installing to C:/JohnsWork/test/make/R/test.Rcheck/test/libs/i386

*** arch - x64
gcc -m64 -I"C:/PROGRA~1/R/R-215~1.0/include" -DNDEBUG -I/JohnsWork/test/src   -I"d:/RCompile/CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c testR.c -o testR.o
gcc -m64 -shared -s -static-libgcc -o test.dll tmp.def testR.o ../../../win64/test_win64.lib -lgfortran -Ld:/RCompile/CRANpkg/extralibs64/local/lib/x64 -Ld:/RCompile/CRANpkg/extralibs64/local/lib -LC:/PROGRA~1/R/R-215~1.0/bin/x64 -lR
make: `symbols.rds' is up to date.
installing to C:/JohnsWork/test/make/R/test.Rcheck/test/libs/x64
** R
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded
*** arch - i386
*** arch - x64
ERROR: loading failed for 'x64'
* removing 'C:/JohnsWork/test/make/R/test.Rcheck/test'

-------------------------------------------------------------

> str(R.Version())
List of 14
 $ platform      : chr "x86_64-pc-mingw32"
 $ arch          : chr "x86_64"
 $ os            : chr "mingw32"
 $ system        : chr "x86_64, mingw32"
 $ status        : chr ""
 $ major         : chr "2"
 $ minor         : chr "15.0"
 $ year          : chr "2012"
 $ month         : chr "03"
 $ day           : chr "30"
 $ svn rev       : chr "58871"
 $ language      : chr "R"
 $ version.string: chr "R version 2.15.0 (2012-03-30)"
 $ nickname      : chr ""
 

From ripley at stats.ox.ac.uk  Sun Jun 24 07:38:17 2012
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 24 Jun 2012 06:38:17 +0100
Subject: [Rd] Win 64 package build - ERROR: loading failed for 'x64'
In-Reply-To: <OFE74A4F41.07E6C42B-ON85257A27.000A7EA6-85257A27.000A7EBC@american.edu>
References: <OFE74A4F41.07E6C42B-ON85257A27.000A7EA6-85257A27.000A7EBC@american.edu>
Message-ID: <4FE6A7C9.2050701@stats.ox.ac.uk>

On 24/06/2012 02:54, John Nolan wrote:
> I have developed an R package that works under Win32, but when I attempt to build it on Win64,
> I get     ERROR: loading failed for 'x64'
>
> More precisely, I developed and tested the package under Win32 and it works. But when I move
> to a 64 bit Windows 7 (Home Premium) system, and attempt to build both 32 bit and 64 bit packages,
> the 32 bit package seems to build, but the 64 bit build fails.
> 'rcmd build test' works fine, producing DLLs in both src-i386 and src-x64
>
> But 'rcmd check test' and 'rcmd install test' both fail.
> When R attempts to load the 64 bit DLL.  A pop-up window says
>     R for Windows terminal front-end has stopped working,
> then I get the error message on the console
>     ERROR: loading failed for 'x64'
>
> Below is the Makevar.win file (it selects a library based on 32 vs 64 bit).
> Also below is 00install.out and R.Version() output.
>
> I'd appreciate any suggestions.

1) Use Makevars.win, as documented, not Makevar.win.  And your output 
does not correspond to the file you showed ....

2) Use .a, not .lib (which is for MSVC).

3) I suspect your 64-bit library is broken.  That's not an R issue, not 
do we know anthing about it.

>
> John
>   ...........................................................................................................
>   John P. Nolan
>   Math/Stat Department
>   227 Gray Hall,   American University
>   4400 Massachusetts Avenue, NW
>   Washington, DC 20016-8050
>
>   jpnolan at american.edu
>   voice: 202.885.3140          web: academic2.american.edu/~jpnolan
>   ...........................................................................................................
>
> ----------------- Makevar.win ------------------------------------------
> ifeq "$(WIN)" "64"
> PKG_LIBS=../../../win64/test_win64.a -lgfortran
> else
> PKG_LIBS=../../../win32/test_win32.a -lgfortran
> endif
>
> PKG_CPPFLAGS=-I/JohnsWork/test/src/
>
> -------------  00install.out -----------------------------------------
>
> * installing *source* package 'test' ...
> ** libs
>
> *** arch - i386
> gcc  -I"C:/PROGRA~1/R/R-215~1.0/include" -DNDEBUG -I/JohnsWork/test/src        -O3 -Wall  -std=gnu99 -mtune=core2 -c testR.c -o testR.o
> gcc -shared -s -static-libgcc -o test.dll tmp.def testR.o ../../../win32/test_win32.lib -lgfortran -LC:/PROGRA~1/R/R-215~1.0/bin/i386 -lR
> installing to C:/JohnsWork/test/make/R/test.Rcheck/test/libs/i386
>
> *** arch - x64
> gcc -m64 -I"C:/PROGRA~1/R/R-215~1.0/include" -DNDEBUG -I/JohnsWork/test/src   -I"d:/RCompile/CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c testR.c -o testR.o
> gcc -m64 -shared -s -static-libgcc -o test.dll tmp.def testR.o ../../../win64/test_win64.lib -lgfortran -Ld:/RCompile/CRANpkg/extralibs64/local/lib/x64 -Ld:/RCompile/CRANpkg/extralibs64/local/lib -LC:/PROGRA~1/R/R-215~1.0/bin/x64 -lR
> make: `symbols.rds' is up to date.
> installing to C:/JohnsWork/test/make/R/test.Rcheck/test/libs/x64
> ** R
> ** preparing package for lazy loading
> ** help
> *** installing help indices
> ** building package indices
> ** testing if installed package can be loaded
> *** arch - i386
> *** arch - x64
> ERROR: loading failed for 'x64'
> * removing 'C:/JohnsWork/test/make/R/test.Rcheck/test'
>
> -------------------------------------------------------------
>
>> str(R.Version())
> List of 14
>   $ platform      : chr "x86_64-pc-mingw32"
>   $ arch          : chr "x86_64"
>   $ os            : chr "mingw32"
>   $ system        : chr "x86_64, mingw32"
>   $ status        : chr ""
>   $ major         : chr "2"
>   $ minor         : chr "15.0"
>   $ year          : chr "2012"
>   $ month         : chr "03"
>   $ day           : chr "30"
>   $ svn rev       : chr "58871"
>   $ language      : chr "R"
>   $ version.string: chr "R version 2.15.0 (2012-03-30)"
>   $ nickname      : chr ""
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jpnolan at american.edu  Sun Jun 24 14:00:10 2012
From: jpnolan at american.edu (John Nolan)
Date: Sun, 24 Jun 2012 08:00:10 -0400
Subject: [Rd] Win 64 package build - ERROR: loading failed for 'x64'
In-Reply-To: <4FE6A7C9.2050701@stats.ox.ac.uk>
References: <4FE6A7C9.2050701@stats.ox.ac.uk>,
	<OFE74A4F41.07E6C42B-ON85257A27.000A7EA6-85257A27.000A7EBC@american.edu>
Message-ID: <OFA547D7A8.4B00D6D5-ON85257A27.0041EF10-85257A27.0041EF13@american.edu>

I did use the name Makevars.win, sorry for mistyping the name in my message as Makevar.win.

I changed the extension on the library names from *.lib to *.a in the output below precisely to avoid complaints from this list; sorry for the confusion caused by missing 2 occurrences.

The 64 bit library works fine: I can compile, link, and run a stand-alone test program that uses the 64 bit library test_win64.a.  Since that works fine, I suspect the problem is somewhere in the process where R builds and links the 64 bit DLL.  It may be a configuration problem, but if so, I don't understand why it does not show up in the rcmd build stage?

John

 ...........................................................................................................
 John P. Nolan
 Math/Stat Department
 227 Gray Hall,   American University
 4400 Massachusetts Avenue, NW
 Washington, DC 20016-8050

 jpnolan at american.edu      
 voice: 202.885.3140          web: academic2.american.edu/~jpnolan
 ...........................................................................................................


-----r-devel-bounces at r-project.org wrote: ----- 
To: r-devel at r-project.org
From: Prof Brian Ripley 
Sent by: r-devel-bounces at r-project.org
Date: 06/24/2012 01:38AM
Subject: Re: [Rd] Win 64 package build - ERROR: loading failed for 'x64'

On 24/06/2012 02:54, John Nolan wrote:
> I have developed an R package that works under Win32, but when I attempt to build it on Win64,
> I get     ERROR: loading failed for 'x64'
>
> More precisely, I developed and tested the package under Win32 and it works. But when I move
> to a 64 bit Windows 7 (Home Premium) system, and attempt to build both 32 bit and 64 bit packages,
> the 32 bit package seems to build, but the 64 bit build fails.
> 'rcmd build test' works fine, producing DLLs in both src-i386 and src-x64
>
> But 'rcmd check test' and 'rcmd install test' both fail.
> When R attempts to load the 64 bit DLL.  A pop-up window says
>     R for Windows terminal front-end has stopped working,
> then I get the error message on the console
>     ERROR: loading failed for 'x64'
>
> Below is the Makevar.win file (it selects a library based on 32 vs 64 bit).
> Also below is 00install.out and R.Version() output.
>
> I'd appreciate any suggestions.

1) Use Makevars.win, as documented, not Makevar.win.  And your output 
does not correspond to the file you showed ....

2) Use .a, not .lib (which is for MSVC).

3) I suspect your 64-bit library is broken.  That's not an R issue, not 
do we know anthing about it.

>
> John
>   ...........................................................................................................
>   John P. Nolan
>   Math/Stat Department
>   227 Gray Hall,   American University
>   4400 Massachusetts Avenue, NW
>   Washington, DC 20016-8050
>
>   jpnolan at american.edu
>   voice: 202.885.3140          web: academic2.american.edu/~jpnolan
>   ...........................................................................................................
>
> ----------------- Makevar.win ------------------------------------------
> ifeq "$(WIN)" "64"
> PKG_LIBS=../../../win64/test_win64.a -lgfortran
> else
> PKG_LIBS=../../../win32/test_win32.a -lgfortran
> endif
>
> PKG_CPPFLAGS=-I/JohnsWork/test/src/
>
> -------------  00install.out -----------------------------------------
>
> * installing *source* package 'test' ...
> ** libs
>
> *** arch - i386
> gcc  -I"C:/PROGRA~1/R/R-215~1.0/include" -DNDEBUG -I/JohnsWork/test/src        -O3 -Wall  -std=gnu99 -mtune=core2 -c testR.c -o testR.o
> gcc -shared -s -static-libgcc -o test.dll tmp.def testR.o ../../../win32/test_win32.a -lgfortran -LC:/PROGRA~1/R/R-215~1.0/bin/i386 -lR
> installing to C:/JohnsWork/test/make/R/test.Rcheck/test/libs/i386
>
> *** arch - x64
> gcc -m64 -I"C:/PROGRA~1/R/R-215~1.0/include" -DNDEBUG -I/JohnsWork/test/src   -I"d:/RCompile/CRANpkg/extralibs64/local/include"     -O2 -Wall  -std=gnu99 -mtune=core2 -c testR.c -o testR.o
> gcc -m64 -shared -s -static-libgcc -o test.dll tmp.def testR.o ../../../win64/test_win64.a -lgfortran -Ld:/RCompile/CRANpkg/extralibs64/local/lib/x64 -Ld:/RCompile/CRANpkg/extralibs64/local/lib -LC:/PROGRA~1/R/R-215~1.0/bin/x64 -lR
> make: `symbols.rds' is up to date.
> installing to C:/JohnsWork/test/make/R/test.Rcheck/test/libs/x64
> ** R
> ** preparing package for lazy loading
> ** help
> *** installing help indices
> ** building package indices
> ** testing if installed package can be loaded
> *** arch - i386
> *** arch - x64
> ERROR: loading failed for 'x64'
> * removing 'C:/JohnsWork/test/make/R/test.Rcheck/test'
>
> -------------------------------------------------------------
>
>> str(R.Version())
> List of 14
>   $ platform      : chr "x86_64-pc-mingw32"
>   $ arch          : chr "x86_64"
>   $ os            : chr "mingw32"
>   $ system        : chr "x86_64, mingw32"
>   $ status        : chr ""
>   $ major         : chr "2"
>   $ minor         : chr "15.0"
>   $ year          : chr "2012"
>   $ month         : chr "03"
>   $ day           : chr "30"
>   $ svn rev       : chr "58871"
>   $ language      : chr "R"
>   $ version.string: chr "R version 2.15.0 (2012-03-30)"
>   $ nickname      : chr ""
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel

From edd at debian.org  Sun Jun 24 16:09:13 2012
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 24 Jun 2012 09:09:13 -0500
Subject: [Rd] Win 64 package build - ERROR: loading failed for 'x64'
In-Reply-To: <OFA547D7A8.4B00D6D5-ON85257A27.0041EF10-85257A27.0041EF13@american.edu>
References: <4FE6A7C9.2050701@stats.ox.ac.uk>
	<OFE74A4F41.07E6C42B-ON85257A27.000A7EA6-85257A27.000A7EBC@american.edu>
	<OFA547D7A8.4B00D6D5-ON85257A27.0041EF10-85257A27.0041EF13@american.edu>
Message-ID: <20455.8073.613830.190267@max.nulle.part>


On 24 June 2012 at 08:00, John Nolan wrote:
| I did use the name Makevars.win, sorry for mistyping the name in my message as Makevar.win.
| 
| I changed the extension on the library names from *.lib to *.a in the output below precisely to avoid complaints from this list; sorry for the confusion caused by missing 2 occurrences.
| 
| The 64 bit library works fine: I can compile, link, and run a stand-alone test program that uses the 64 bit library test_win64.a.  Since that works fine, I suspect the problem is somewhere in the process where R builds and links the 64 bit DLL.  It may be a configuration problem, but if so, I don't understand why it does not show up in the rcmd build stage?

In cases like this I prefer to carry things over from working examples.  

Try looking at a similar problem --- I often go back to the "digest" package
as it is plain, simple, just plain C, without external dependencies.  If your
package has other languages or dependencies, try to find something that
matches its profile. The compare the setup, and the output created when
running the relevant commands.

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From jfox at mcmaster.ca  Sun Jun 24 16:57:46 2012
From: jfox at mcmaster.ca (John Fox)
Date: Sun, 24 Jun 2012 10:57:46 -0400
Subject: [Rd] globalVariables()
In-Reply-To: <21109_1340466771_q5NFqmV3004950_web-412829408@cgpsrv2.cis.mcmaster.ca>
References: <21109_1340466771_q5NFqmV3004950_web-412829408@cgpsrv2.cis.mcmaster.ca>
Message-ID: <web-412866931@cgpsrv2.cis.mcmaster.ca>

Dear r-devel list members,

To answer my own question, replacing <<- with explicit assign()s seem to do the trick.

As well, the quickly written function that I posted had a couple of problems (and may well have more, though the version posted below works on the packages I tried); here's an improved version:

----------- snip -----------

findGlobals <- function(filein="00check.log", fileout="globals.R"){
  checklog <- readLines(filein)
  whichline <- which(grepl("checking R code for possible problems .* NOTE", checklog))
  checklog <- checklog[-(1:whichline)]
  whichline <- which(grepl("checking Rd files", checklog))
  checklog <- checklog[-(whichline:length(checklog))]
  globals <- gsub(".*no visible binding for global variable[ ]*", "", checklog)
  globals <- gsub(".*no visible global function definition for[ ]*", "", globals)
  globals <- gsub(".*no visible binding for '<<-' assignment to[ ]*", "", globals)
  globals <- globals[globals != ""]
  globals <- sub("^ *", "", globals)
  globals <- sub(" *$", "", globals)
  whichentries <- which(grepl(":", globals))
  if (length(whichentries > 1)) globals <- globals[-whichentries]
  globals <- gsub(".* ", "", globals)
  globals <- unique(globals)
  cmd <- paste("if (getRversion() >= '2.15.1') globalVariables(c(", 
               paste(globals, collapse=", "), "))", sep="")
  cmd <- strwrap(cmd)
  writeLines(cmd, fileout)
}

----------- snip -----------

Best,
 John

On Sat, 23 Jun 2012 11:51:55 -0400
 "John Fox" <jfox at mcmaster.ca> wrote:
> Dear r-devel list members,
> 
> By placing a call to the new (with R 2.15.1) globalVariables() in the development version of the Rcmdr package, I've succeeded in reducing the "notes" produced by R CMD check from dozens to two. But I still get the following notes, even though '.commander.done' is in the call to globalVariables():
> 
> ------------- snip ------------
> 
> * checking R code for possible problems ... NOTE
> Commander: no visible binding for '<<-' assignment to '.commander.done'
>   (C:/Users/John Fox/workspace/Rcmdr/R/commander.R:653)
> closeCommander: no visible binding for '<<-' assignment to
>   '.commander.done' (C:/Users/John
>   Fox/workspace/Rcmdr/R/file-menu.R:142)
> 
> ------------- snip ------------
> 
> Is there a way to get rid of these notes (without, of course, removing the <<- assignments)?
> 
> Finally, here's a rough function that I used to compose the globalVariables() command from the package check summary; it's probably not bullet-proof, but perhaps others will find it useful for packages, like the Rcmdr, that currently generate many notes about global variables:
> 
. . .

> 
> Any help would be appreciated.
> 
> John
> 
> ------------------------------------------------
> John Fox
> Sen. William McMaster Prof. of Social Statistics
> Department of Sociology
> McMaster University
> Hamilton, Ontario, Canada
> http://socserv.mcmaster.ca/jfox/
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From kasperdanielhansen at gmail.com  Sun Jun 24 17:28:49 2012
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Sun, 24 Jun 2012 11:28:49 -0400
Subject: [Rd] Win 64 package build - ERROR: loading failed for 'x64'
In-Reply-To: <OFA547D7A8.4B00D6D5-ON85257A27.0041EF10-85257A27.0041EF13@american.edu>
References: <OFE74A4F41.07E6C42B-ON85257A27.000A7EA6-85257A27.000A7EBC@american.edu>
	<4FE6A7C9.2050701@stats.ox.ac.uk>
	<OFA547D7A8.4B00D6D5-ON85257A27.0041EF10-85257A27.0041EF13@american.edu>
Message-ID: <CAC2h7uuZz40eR3_PzJAaaYoPEniN19h2_yxh0OD0nMkkNppo-w@mail.gmail.com>

On Sun, Jun 24, 2012 at 8:00 AM, John Nolan <jpnolan at american.edu> wrote:
> I did use the name Makevars.win, sorry for mistyping the name in my message as Makevar.win.
>
> I changed the extension on the library names from *.lib to *.a in the output below precisely to avoid complaints from this list; sorry for the confusion caused by missing 2 occurrences.
>
> The 64 bit library works fine: I can compile, link, and run a stand-alone test program that uses the 64 bit library test_win64.a. ?Since that works fine, I suspect the problem is somewhere in the process where R builds and links the 64 bit DLL. ?It may be a configuration problem, but if so, I don't understand why it does not show up in the rcmd build stage?

It is entirely possible - I see it all the time on something I am
working on right now - to have something that compiles file and
doesn't load.  Also, depending on how you do the package building,
there may not be any compilation done at package build time, if you
are creating a source package.

Kasper


>
> John
>
> ?...........................................................................................................
> ?John P. Nolan
> ?Math/Stat Department
> ?227 Gray Hall, ? American University
> ?4400 Massachusetts Avenue, NW
> ?Washington, DC 20016-8050
>
> ?jpnolan at american.edu
> ?voice: 202.885.3140 ? ? ? ? ?web: academic2.american.edu/~jpnolan
> ?...........................................................................................................
>
>
> -----r-devel-bounces at r-project.org wrote: -----
> To: r-devel at r-project.org
> From: Prof Brian Ripley
> Sent by: r-devel-bounces at r-project.org
> Date: 06/24/2012 01:38AM
> Subject: Re: [Rd] Win 64 package build - ERROR: loading failed for 'x64'
>
> On 24/06/2012 02:54, John Nolan wrote:
>> I have developed an R package that works under Win32, but when I attempt to build it on Win64,
>> I get ? ? ERROR: loading failed for 'x64'
>>
>> More precisely, I developed and tested the package under Win32 and it works. But when I move
>> to a 64 bit Windows 7 (Home Premium) system, and attempt to build both 32 bit and 64 bit packages,
>> the 32 bit package seems to build, but the 64 bit build fails.
>> 'rcmd build test' works fine, producing DLLs in both src-i386 and src-x64
>>
>> But 'rcmd check test' and 'rcmd install test' both fail.
>> When R attempts to load the 64 bit DLL. ?A pop-up window says
>> ? ? R for Windows terminal front-end has stopped working,
>> then I get the error message on the console
>> ? ? ERROR: loading failed for 'x64'
>>
>> Below is the Makevar.win file (it selects a library based on 32 vs 64 bit).
>> Also below is 00install.out and R.Version() output.
>>
>> I'd appreciate any suggestions.
>
> 1) Use Makevars.win, as documented, not Makevar.win. ?And your output
> does not correspond to the file you showed ....
>
> 2) Use .a, not .lib (which is for MSVC).
>
> 3) I suspect your 64-bit library is broken. ?That's not an R issue, not
> do we know anthing about it.
>
>>
>> John
>> ? ...........................................................................................................
>> ? John P. Nolan
>> ? Math/Stat Department
>> ? 227 Gray Hall, ? American University
>> ? 4400 Massachusetts Avenue, NW
>> ? Washington, DC 20016-8050
>>
>> ? jpnolan at american.edu
>> ? voice: 202.885.3140 ? ? ? ? ?web: academic2.american.edu/~jpnolan
>> ? ...........................................................................................................
>>
>> ----------------- Makevar.win ------------------------------------------
>> ifeq "$(WIN)" "64"
>> PKG_LIBS=../../../win64/test_win64.a -lgfortran
>> else
>> PKG_LIBS=../../../win32/test_win32.a -lgfortran
>> endif
>>
>> PKG_CPPFLAGS=-I/JohnsWork/test/src/
>>
>> ------------- ?00install.out -----------------------------------------
>>
>> * installing *source* package 'test' ...
>> ** libs
>>
>> *** arch - i386
>> gcc ?-I"C:/PROGRA~1/R/R-215~1.0/include" -DNDEBUG -I/JohnsWork/test/src ? ? ? ?-O3 -Wall ?-std=gnu99 -mtune=core2 -c testR.c -o testR.o
>> gcc -shared -s -static-libgcc -o test.dll tmp.def testR.o ../../../win32/test_win32.a -lgfortran -LC:/PROGRA~1/R/R-215~1.0/bin/i386 -lR
>> installing to C:/JohnsWork/test/make/R/test.Rcheck/test/libs/i386
>>
>> *** arch - x64
>> gcc -m64 -I"C:/PROGRA~1/R/R-215~1.0/include" -DNDEBUG -I/JohnsWork/test/src ? -I"d:/RCompile/CRANpkg/extralibs64/local/include" ? ? -O2 -Wall ?-std=gnu99 -mtune=core2 -c testR.c -o testR.o
>> gcc -m64 -shared -s -static-libgcc -o test.dll tmp.def testR.o ../../../win64/test_win64.a -lgfortran -Ld:/RCompile/CRANpkg/extralibs64/local/lib/x64 -Ld:/RCompile/CRANpkg/extralibs64/local/lib -LC:/PROGRA~1/R/R-215~1.0/bin/x64 -lR
>> make: `symbols.rds' is up to date.
>> installing to C:/JohnsWork/test/make/R/test.Rcheck/test/libs/x64
>> ** R
>> ** preparing package for lazy loading
>> ** help
>> *** installing help indices
>> ** building package indices
>> ** testing if installed package can be loaded
>> *** arch - i386
>> *** arch - x64
>> ERROR: loading failed for 'x64'
>> * removing 'C:/JohnsWork/test/make/R/test.Rcheck/test'
>>
>> -------------------------------------------------------------
>>
>>> str(R.Version())
>> List of 14
>> ? $ platform ? ? ?: chr "x86_64-pc-mingw32"
>> ? $ arch ? ? ? ? ?: chr "x86_64"
>> ? $ os ? ? ? ? ? ?: chr "mingw32"
>> ? $ system ? ? ? ?: chr "x86_64, mingw32"
>> ? $ status ? ? ? ?: chr ""
>> ? $ major ? ? ? ? : chr "2"
>> ? $ minor ? ? ? ? : chr "15.0"
>> ? $ year ? ? ? ? ?: chr "2012"
>> ? $ month ? ? ? ? : chr "03"
>> ? $ day ? ? ? ? ? : chr "30"
>> ? $ svn rev ? ? ? : chr "58871"
>> ? $ language ? ? ?: chr "R"
>> ? $ version.string: chr "R version 2.15.0 (2012-03-30)"
>> ? $ nickname ? ? ?: chr ""
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
>
> --
> Brian D. Ripley, ? ? ? ? ? ? ? ? ?ripley at stats.ox.ac.uk
> Professor of Applied Statistics, ?http://www.stats.ox.ac.uk/~ripley/
> University of Oxford, ? ? ? ? ? ? Tel: ?+44 1865 272861 (self)
> 1 South Parks Road, ? ? ? ? ? ? ? ? ? ? +44 1865 272866 (PA)
> Oxford OX1 3TG, UK ? ? ? ? ? ? ? ?Fax: ?+44 1865 272595
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From andre.zege at gmail.com  Mon Jun 25 16:20:30 2012
From: andre.zege at gmail.com (andre zege)
Date: Mon, 25 Jun 2012 10:20:30 -0400
Subject: [Rd] how to manipulate dput output format
In-Reply-To: <524CBA07-EA04-4037-A650-4EE49DCF1DE1@r-project.org>
References: <CACU3EkN5m=xrHMS+6d-LCuVbPPciywdmMeq+5SKLFFgEd6XA+g@mail.gmail.com>
	<524CBA07-EA04-4037-A650-4EE49DCF1DE1@r-project.org>
Message-ID: <CACU3EkNsS5qgP6gt7hY1zKsUydSob3KPB_gBz23_Fcanp3jBYA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120625/3d7a21f3/attachment.pl>

From winstonchang1 at gmail.com  Mon Jun 25 16:31:25 2012
From: winstonchang1 at gmail.com (Winston Chang)
Date: Mon, 25 Jun 2012 10:31:25 -0400
Subject: [Rd] "Incompatible methods" for overloaded operator
In-Reply-To: <CAC-jPZqs3KXyTNw20rYT++us4852q3ugqehYYrEGOwNcidgiVQ@mail.gmail.com>
References: <CAFOpNVFyqaTZHG15N2w13OqBJSwdVfdpbWGfsJim3XhNCmdYfw@mail.gmail.com>
	<CABdHhvF-WRwa9QaXG7Tb6JoiZJYH70OzUSdvAwUSY_6ZTnWvHQ@mail.gmail.com>
	<4FE28E2D.7050205@fhcrc.org>
	<CABdHhvGKRgTTSJRQUS3pu_GDLTJkk0HBTpinHvFTJn1zA7E+qA@mail.gmail.com>
	<4FE299B9.2080400@fhcrc.org>
	<CAFOpNVHQ186dGQLtiO=0TFB2sjqx+j7_aczoAcHqp+sPq7xWmw@mail.gmail.com>
	<CAC-jPZqs3KXyTNw20rYT++us4852q3ugqehYYrEGOwNcidgiVQ@mail.gmail.com>
Message-ID: <CAFOpNVGZKEtukoNksMoNkonxQuZtJVVy_r5q-LEmc8n-o0YBcQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120625/10e5f528/attachment.pl>

From simon.urbanek at r-project.org  Mon Jun 25 17:17:18 2012
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 25 Jun 2012 11:17:18 -0400
Subject: [Rd] how to manipulate dput output format
In-Reply-To: <CACU3EkNsS5qgP6gt7hY1zKsUydSob3KPB_gBz23_Fcanp3jBYA@mail.gmail.com>
References: <CACU3EkN5m=xrHMS+6d-LCuVbPPciywdmMeq+5SKLFFgEd6XA+g@mail.gmail.com>
	<524CBA07-EA04-4037-A650-4EE49DCF1DE1@r-project.org>
	<CACU3EkNsS5qgP6gt7hY1zKsUydSob3KPB_gBz23_Fcanp3jBYA@mail.gmail.com>
Message-ID: <78B85407-9F48-4A44-8030-D457E8986979@r-project.org>


On Jun 25, 2012, at 10:20 AM, andre zege wrote:

> dput() is intended to be parsed by R so the above is not possible without massaging the output. But why in the would would you use dput() for something that you want to read in Java? Why don't you use a format that Java can read easily - such as JSON?
> 
> Cheers,
> Simon
> 
> 
> 
> 
>  
> Yeap, except i was just working with someone elses choice. Bigmatrix code uses dput() to dump desc file of filebacked matrices.

Ah, ok, that is indeed rather annoying as it's pretty much the most non-portable storage (across programs) one could come up with. (I presume you're talking about big.matrix from bigmemory?)


> I got some time to do a little hack of reading big matrices nicely to java and was looking to some ways of smoothing the edges of parsing .desc file a little. I guess i am ok  now with parsing .desc with some regex. One thing i am still wondering about is whether i really need to convert back and forth between liitle endian and big endian. Namely, java platform has little endian native byte order, and big matrix code writes stuff in big endian. It'd be nice if i could manipulate that by some #define somewhere in the makefile or something and make C++ write little endian without byte swapping every time i need to communicate with big matrix from java.

I think you're wrong (if we are talking about bigmemory) - the endianness is governed by the platform as far as I can see. On little-endian machines the big matrix storage is little endian and on big-endian machines it is big-endian.

It's very peculiar that the descriptor doesn't even store the endianness - I think you could talk to the authors and suggest that they include most basic information such as endianness and, possibly, change the format to something that is well-defined without having to evaluate it in R (which is highly dangerous and a serious security risk).

Cheers,
Simon


From andre.zege at gmail.com  Mon Jun 25 17:57:47 2012
From: andre.zege at gmail.com (andre zege)
Date: Mon, 25 Jun 2012 11:57:47 -0400
Subject: [Rd] how to manipulate dput output format
In-Reply-To: <78B85407-9F48-4A44-8030-D457E8986979@r-project.org>
References: <CACU3EkN5m=xrHMS+6d-LCuVbPPciywdmMeq+5SKLFFgEd6XA+g@mail.gmail.com>
	<524CBA07-EA04-4037-A650-4EE49DCF1DE1@r-project.org>
	<CACU3EkNsS5qgP6gt7hY1zKsUydSob3KPB_gBz23_Fcanp3jBYA@mail.gmail.com>
	<78B85407-9F48-4A44-8030-D457E8986979@r-project.org>
Message-ID: <CACU3EkN40sK9jjkxhs9rFYO28MXS7iSTO_wn5GVOBbZrQUQw-A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120625/e7767448/attachment.pl>

From simon.urbanek at r-project.org  Mon Jun 25 19:08:58 2012
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 25 Jun 2012 13:08:58 -0400
Subject: [Rd] how to manipulate dput output format
In-Reply-To: <CACU3EkN40sK9jjkxhs9rFYO28MXS7iSTO_wn5GVOBbZrQUQw-A@mail.gmail.com>
References: <CACU3EkN5m=xrHMS+6d-LCuVbPPciywdmMeq+5SKLFFgEd6XA+g@mail.gmail.com>
	<524CBA07-EA04-4037-A650-4EE49DCF1DE1@r-project.org>
	<CACU3EkNsS5qgP6gt7hY1zKsUydSob3KPB_gBz23_Fcanp3jBYA@mail.gmail.com>
	<78B85407-9F48-4A44-8030-D457E8986979@r-project.org>
	<CACU3EkN40sK9jjkxhs9rFYO28MXS7iSTO_wn5GVOBbZrQUQw-A@mail.gmail.com>
Message-ID: <6C6D3E1A-657D-4450-9E57-815E52777E98@r-project.org>


On Jun 25, 2012, at 11:57 AM, andre zege wrote:

> 
> 
> On Mon, Jun 25, 2012 at 11:17 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
> On Jun 25, 2012, at 10:20 AM, andre zege wrote:
> 
> > dput() is intended to be parsed by R so the above is not possible without massaging the output. But why in the would would you use dput() for something that you want to read in Java? Why don't you use a format that Java can read easily - such as JSON?
> >
> > Cheers,
> > Simon
> >
> >
> >
> >
> >
> > Yeap, except i was just working with someone elses choice. Bigmatrix code uses dput() to dump desc file of filebacked matrices.
> 
> Ah, ok, that is indeed rather annoying as it's pretty much the most non-portable storage (across programs) one could come up with. (I presume you're talking about big.matrix from bigmemory?)
> 
> 
> > I got some time to do a little hack of reading big matrices nicely to java and was looking to some ways of smoothing the edges of parsing .desc file a little. I guess i am ok  now with parsing .desc with some regex. One thing i am still wondering about is whether i really need to convert back and forth between liitle endian and big endian. Namely, java platform has little endian native byte order, and big matrix code writes stuff in big endian. It'd be nice if i could manipulate that by some #define somewhere in the makefile or something and make C++ write little endian without byte swapping every time i need to communicate with big matrix from java.
> 
> I think you're wrong (if we are talking about bigmemory) - the endianness is governed by the platform as far as I can see. On little-endian machines the big matrix storage is little endian and on big-endian machines it is big-endian.
> 
> It's very peculiar that the descriptor doesn't even store the endianness - I think you could talk to the authors and suggest that they include most basic information such as endianness and, possibly, change the format to something that is well-defined without having to evaluate it in R (which is highly dangerous and a serious security risk).
> 
> Cheers,
> Simon
> 
> 
> 
> I would assume that hardware should dictate endianness, just like you said. However, the fact is that bigmemory writes in different endianness than java reads in. I simply compare matrices that i write using bigmemory and that I read into java. Unless i transform endianness, i get gargabe, and if i swap byte order, i get the same matrix as the one i wrote. So, i don't think i am wrong about that, but i am curious about why it happens and whether it is possible to let bigmemory code write in natural endianness. Then i would not need to transform each double array element back and forth. 
>  

I think it has to do with the way you read it in Java since Java supports either endianness directly. What methods do you use exactly to read it? The on-disk storage is definitely native-endian so C/C++/... can simply mmap it with no swapping.

Cheers,
Simon


From andre.zege at gmail.com  Mon Jun 25 20:17:56 2012
From: andre.zege at gmail.com (andre zege)
Date: Mon, 25 Jun 2012 14:17:56 -0400
Subject: [Rd] how to manipulate dput output format
In-Reply-To: <6C6D3E1A-657D-4450-9E57-815E52777E98@r-project.org>
References: <CACU3EkN5m=xrHMS+6d-LCuVbPPciywdmMeq+5SKLFFgEd6XA+g@mail.gmail.com>
	<524CBA07-EA04-4037-A650-4EE49DCF1DE1@r-project.org>
	<CACU3EkNsS5qgP6gt7hY1zKsUydSob3KPB_gBz23_Fcanp3jBYA@mail.gmail.com>
	<78B85407-9F48-4A44-8030-D457E8986979@r-project.org>
	<CACU3EkN40sK9jjkxhs9rFYO28MXS7iSTO_wn5GVOBbZrQUQw-A@mail.gmail.com>
	<6C6D3E1A-657D-4450-9E57-815E52777E98@r-project.org>
Message-ID: <CACU3EkPrj9HT0G4dsV+j7demAxHmhA0RRvHK2+ky=uTF+9uS8A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120625/a74587d4/attachment.pl>

From Avraham.Adler at guycarp.com  Mon Jun 25 20:48:45 2012
From: Avraham.Adler at guycarp.com (Adler, Avraham)
Date: Mon, 25 Jun 2012 13:48:45 -0500
Subject: [Rd] Fast Kendall's Tau
Message-ID: <93A2161604A30C4ABE14AC35CAFC8422BC03453F@USDFW11XM32.mercer.com>

Hello.

Has any further action been taken regarding implementing David Simcha's fast Kendall tau code (now found in the package pcaPP as cor.fk) into R-base? It is literally hundreds of times faster, although I am uncertain as to whether he wrote code for testing the significance of the parameter. The last mention I have seen of this was in 2010 <https://stat.ethz.ch/pipermail/r-devel/2010-February/056745.html>. 

Thank you,

--Avraham Adler


From Mayank.Bansal at mu-sigma.com  Tue Jun 26 13:35:03 2012
From: Mayank.Bansal at mu-sigma.com (Mayank Bansal)
Date: Tue, 26 Jun 2012 06:35:03 -0500
Subject: [Rd] Packaging Error
Message-ID: <7073291669E5764EB68B5914AC4204744E05866668@AUSP01VMBX11.collaborationhost.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120626/ce3038ff/attachment.pl>

From murdoch.duncan at gmail.com  Tue Jun 26 23:44:42 2012
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 26 Jun 2012 17:44:42 -0400
Subject: [Rd] Fast Kendall's Tau
In-Reply-To: <93A2161604A30C4ABE14AC35CAFC8422BC03453F@USDFW11XM32.mercer.com>
References: <93A2161604A30C4ABE14AC35CAFC8422BC03453F@USDFW11XM32.mercer.com>
Message-ID: <4FEA2D4A.8090700@gmail.com>

On 12-06-25 2:48 PM, Adler, Avraham wrote:
> Hello.
>
> Has any further action been taken regarding implementing David Simcha's fast Kendall tau code (now found in the package pcaPP as cor.fk) into R-base? It is literally hundreds of times faster, although I am uncertain as to whether he wrote code for testing the significance of the parameter. The last mention I have seen of this was in 2010<https://stat.ethz.ch/pipermail/r-devel/2010-February/056745.html>.

You could check the NEWS file, but I don't remember anything being done 
along these lines.  If the code is in a CRAN package, there doesn't seem 
to be any need to move it to base R.

Duncan Murdoch


From ripley at stats.ox.ac.uk  Wed Jun 27 07:24:12 2012
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 27 Jun 2012 06:24:12 +0100
Subject: [Rd] Fast Kendall's Tau
In-Reply-To: <4FEA2D4A.8090700@gmail.com>
References: <93A2161604A30C4ABE14AC35CAFC8422BC03453F@USDFW11XM32.mercer.com>
	<4FEA2D4A.8090700@gmail.com>
Message-ID: <4FEA98FC.5090802@stats.ox.ac.uk>

On 26/06/2012 22:44, Duncan Murdoch wrote:
> On 12-06-25 2:48 PM, Adler, Avraham wrote:
>> Hello.
>>
>> Has any further action been taken regarding implementing David
>> Simcha's fast Kendall tau code (now found in the package pcaPP as
>> cor.fk) into R-base? It is literally hundreds of times faster,
>> although I am uncertain as to whether he wrote code for testing the
>> significance of the parameter. The last mention I have seen of this
>> was in
>> 2010<https://stat.ethz.ch/pipermail/r-devel/2010-February/056745.html>.
>
> You could check the NEWS file, but I don't remember anything being done
> along these lines.  If the code is in a CRAN package, there doesn't seem
> to be any need to move it to base R.

In addition, this is something very specialized, and the code in R is 
fast enough for all but the most unusual instances of that specialized 
task.  example(cor.fk) shows the R implementation takes well under a 
second for 2000 cases (a far higher value than is usual).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From therneau at mayo.edu  Wed Jun 27 14:15:47 2012
From: therneau at mayo.edu (Terry Therneau)
Date: Wed, 27 Jun 2012 07:15:47 -0500
Subject: [Rd] Fast Kendall's tau
In-Reply-To: <mailman.35.1340791210.11223.r-devel@r-project.org>
References: <mailman.35.1340791210.11223.r-devel@r-project.org>
Message-ID: <4FEAF973.1070208@mayo.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120627/7355231d/attachment.pl>

From Avraham.Adler at guycarp.com  Wed Jun 27 17:10:40 2012
From: Avraham.Adler at guycarp.com (Adler, Avraham)
Date: Wed, 27 Jun 2012 10:10:40 -0500
Subject: [Rd] Fast Kendall's Tau
In-Reply-To: <4FEA98FC.5090802@stats.ox.ac.uk>
References: <93A2161604A30C4ABE14AC35CAFC8422BC03453F@USDFW11XM32.mercer.com>
	<4FEA2D4A.8090700@gmail.com> <4FEA98FC.5090802@stats.ox.ac.uk>
Message-ID: <93A2161604A30C4ABE14AC35CAFC8422BCA465D4@USDFW11XM32.mercer.com>

> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> Sent: Wednesday, June 27, 2012 1:24 AM
> To: Duncan Murdoch
> Cc: Adler, Avraham; r-devel at r-project.org
> Subject: Re: [Rd] Fast Kendall's Tau
> 
> On 26/06/2012 22:44, Duncan Murdoch wrote:
>> On 12-06-25 2:48 PM, Adler, Avraham wrote:
>>> Hello.
>>>
>>> Has any further action been taken regarding implementing David
>>> Simcha's fast Kendall tau code (now found in the package pcaPP as
>>> cor.fk) into R-base? It is literally hundreds of times faster,
>>> although I am uncertain as to whether he wrote code for testing the
>>> significance of the parameter. The last mention I have seen of this
>>> was in
>>> 2010<https://stat.ethz.ch/pipermail/r-devel/2010-February/056745.html>.
>>
>> You could check the NEWS file, but I don't remember anything being
>> done along these lines.  If the code is in a CRAN package, there
>> doesn't seem to be any need to move it to base R.
>
> In addition, this is something very specialized, and the code in R is fast
> enough for all but the most unusual instances of that specialized task.
> example(cor.fk) shows the R implementation takes well under a second for 2000
> cases (a far higher value than is usual).

Thank you all very much for the replies. I was approaching the problem from the vantage point of trying to fit Archimedean copulas to events which come from non-elliptical distributions, and had a few hundred thousand data points. Not as bad as the authors of this paper, <http://vigna.dsi.unimi.it/ftp/papers/ParadoxicalPageRank.pdf> who needed to calculate Kendall's tau based on hundreds of millions of pairs(!). I wrote an implementation in VBA, and when I went to R to confirm my calculations, I was surprised to see that even my VBA code was probably hundreds of times as fast as R (on a vector of exactly 100,000 pairs). The implementation in pcaPP runs in a second or less on the same vector.

Perhaps, as was suggested in another e-mail, the least intrusive (and best bang-for-buck) option is to have the documentation/help of "cor" updated to refer to cor.fk so that more people can be made aware of the availability for those of us who have to deal with ungainly data sets.

Thank you again,

Avraham Adler

From Avraham.Adler at guycarp.com  Wed Jun 27 17:15:48 2012
From: Avraham.Adler at guycarp.com (Adler, Avraham)
Date: Wed, 27 Jun 2012 10:15:48 -0500
Subject: [Rd] Fast Kendall's tau
In-Reply-To: <4FEAF973.1070208@mayo.edu>
References: <mailman.35.1340791210.11223.r-devel@r-project.org>
	<4FEAF973.1070208@mayo.edu>
Message-ID: <93A2161604A30C4ABE14AC35CAFC8422BCA465ED@USDFW11XM32.mercer.com>

> From: Terry Therneau [mailto:therneau at mayo.edu] 
> Sent: Wednesday, June 27, 2012 8:16 AM
> To: r-devel at r-project.org; Adler at smtprelay.mayo.edu; Adler, Avraham
> Subject: Re: Fast Kendall's tau
>
> Note that the survConcordance function, which is equivalent to Kendall's tau, also is O(n log n)
> and it does compute a variance.   The variance is about 4/5 of the work.

[snip]
	
> I agree with Brian, especially since the Spearman and Kendall results rarely (ever?) disagree
> on their main message for n>50.   At the very most, one might add a footnote to the the help page for
> cor.test pointing to the faster codes.
>
> Terry T.


Thank you, Terry, for pointing me to survConcordance. As for documentation, I agree that would probably be optimal in terms of reward for least amount of work/disruption.

Thank you again,

Avraham Adler


From bbolker at gmail.com  Thu Jun 28 13:00:04 2012
From: bbolker at gmail.com (Ben Bolker)
Date: Thu, 28 Jun 2012 07:00:04 -0400
Subject: [Rd] semi-trivial documentation suggestion
Message-ID: <4FEC3934.8000401@ufl.edu>



  Since there is an identity() function, which new users might find in
the course of trying to figure out how to construct an identity matrix,
it might make sense to add a "See also" to diag(). (And, on the same
topic, perhaps an \alias{diagonal} in diag.Rd?)

  If there is interest in this I could submit a doc patch.

 (Thought sparked by
http://www.r-bloggers.com/how-do-i-create-the-identity-matrix-in-r/ )

  Ben Bolker


From dsimcha at gmail.com  Thu Jun 28 04:40:55 2012
From: dsimcha at gmail.com (David Simcha)
Date: Wed, 27 Jun 2012 22:40:55 -0400
Subject: [Rd] Fast Kendall's Tau
In-Reply-To: <4FEA2D4A.8090700@gmail.com>
References: <93A2161604A30C4ABE14AC35CAFC8422BC03453F@USDFW11XM32.mercer.com>
	<4FEA2D4A.8090700@gmail.com>
Message-ID: <CAA8CUdvrhGrNRm44Bc_Pbc1HGaz=QAvaHWQr8PHNfZmpzD7HMg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20120627/15b3b064/attachment.pl>

From renaud at mancala.cbio.uct.ac.za  Thu Jun 28 13:39:13 2012
From: renaud at mancala.cbio.uct.ac.za (Renaud Gaujoux)
Date: Thu, 28 Jun 2012 13:39:13 +0200
Subject: [Rd] [Suggestion] Installation of CRAN packages that depend on
 Bioconductor packages
Message-ID: <4FEC4261.70208@cbio.uct.ac.za>

Hi,

as far as I know, calling a plain:

install.packages('packageA')

with packageA having a dependency to packageB from Bioconductor will not 
complete without having a Bioc mirror setup in options('repos') or 
specifying it in argument 'repos'.

CRAN/R-forge checks resolve such dependencies automatically. Would it be 
possible (and not problematic) to also resolve such standard 
dependencies at install time (in fact build time) and automatically 
append a Bioc mirror to repos within install.package (if none is already 
defined)?
The dependency would be hence completely transparent, which would 
simplify the installation of such packages, as the user would not need 
to know that a repository other than CRAN is required.
Resolution could make use of the function chooseBioCMirror to ask the 
user to select her preferred mirror, as it is done for the CRAN mirror.

Thank you.

Renaud

-- 
Renaud Gaujoux
Computational Biology - University of Cape Town
South Africa


From michael.baudin at contrib.scilab.org  Thu Jun 28 22:49:34 2012
From: michael.baudin at contrib.scilab.org (michael.baudin at contrib.scilab.org)
Date: Thu, 28 Jun 2012 22:49:34 +0200
Subject: [Rd] An extreme quantile of the geometric distribution
Message-ID: <a21a8a2e4d98ac28b99551c38877cda6@contrib.scilab.org>

 Hi,

 With R version 2.10.0 (2009-10-26) on Windows, I computed the p=1.e-20 
 quantile of the geometric distribution with parameter prob=0.1.

> qgeom(1.e-20,0.1)
 [1] -1

 But this is not possible, since X=0,1,2,...

 I guess that this might be a bug in the quantile function, which should 
 use the log1p function, instead of the naive formula.

 Am I correct ?

 Best regards,

 Micha?l


From pdalgd at gmail.com  Fri Jun 29 14:21:50 2012
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 29 Jun 2012 14:21:50 +0200
Subject: [Rd] An extreme quantile of the geometric distribution
In-Reply-To: <a21a8a2e4d98ac28b99551c38877cda6@contrib.scilab.org>
References: <a21a8a2e4d98ac28b99551c38877cda6@contrib.scilab.org>
Message-ID: <3EE793C0-BE32-400B-B3F6-ED5AC6C44CA8@gmail.com>


On Jun 28, 2012, at 22:49 , <michael.baudin at contrib.scilab.org> <michael.baudin at contrib.scilab.org> wrote:

> Hi,
> 
> With R version 2.10.0 (2009-10-26) on Windows, I computed the p=1.e-20 quantile of the geometric distribution with parameter prob=0.1.
> 
>> qgeom(1.e-20,0.1)
> [1] -1
> 
> But this is not possible, since X=0,1,2,...
> 
> I guess that this might be a bug in the quantile function, which should use the log1p function, instead of the naive formula.
> 
> Am I correct ?

Nope. (The source is availably, you know....).

The problem is that a slight fuzz is subtracted inside ceil(....), but there's no check that the result is positive.

qnbinom(...., size=1) is equivalent and does get right, by the way.  

-pd

> 
> Best regards,
> 
> Micha?l
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From michael.baudin at contrib.scilab.org  Sat Jun 30 12:13:19 2012
From: michael.baudin at contrib.scilab.org (michael.baudin at contrib.scilab.org)
Date: Sat, 30 Jun 2012 12:13:19 +0200
Subject: [Rd] An extreme quantile of the geometric distribution
In-Reply-To: <3EE793C0-BE32-400B-B3F6-ED5AC6C44CA8@gmail.com>
References: <a21a8a2e4d98ac28b99551c38877cda6@contrib.scilab.org>
	<3EE793C0-BE32-400B-B3F6-ED5AC6C44CA8@gmail.com>
Message-ID: <709becfca46472d11b4f1526dfcaa716@contrib.scilab.org>

 Hi,

 I'm sorry, I do not clearly understand.

 I'm aware that the source is available at :

 http://svn.r-project.org/R/trunk/src/nmath/qgeom.c

 But a good source does not mean a correct result, because of 
 compilation issues. Moreover, I do not fully understand why the 1e-7 
 coefficient in the formula was put there. The comment "add a fuzz to 
 ensure left continuity" is not obvious to me.

 Best regards,

 Micha?l

 On Fri, 29 Jun 2012 14:21:50 +0200, peter dalgaard <pdalgd at gmail.com> 
 wrote:
> On Jun 28, 2012, at 22:49 , <michael.baudin at contrib.scilab.org>
> <michael.baudin at contrib.scilab.org> wrote:
>
>> Hi,
>>
>> With R version 2.10.0 (2009-10-26) on Windows, I computed the 
>> p=1.e-20 quantile of the geometric distribution with parameter 
>> prob=0.1.
>>
>>> qgeom(1.e-20,0.1)
>> [1] -1
>>
>> But this is not possible, since X=0,1,2,...
>>
>> I guess that this might be a bug in the quantile function, which 
>> should use the log1p function, instead of the naive formula.
>>
>> Am I correct ?
>
> Nope. (The source is availably, you know....).
>
> The problem is that a slight fuzz is subtracted inside ceil(....),
> but there's no check that the result is positive.
>
> qnbinom(...., size=1) is equivalent and does get right, by the way.
>
> -pd
>
>>
>> Best regards,
>>
>> Micha?l
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel


From pdalgd at gmail.com  Sat Jun 30 16:15:13 2012
From: pdalgd at gmail.com (peter dalgaard)
Date: Sat, 30 Jun 2012 16:15:13 +0200
Subject: [Rd] An extreme quantile of the geometric distribution
In-Reply-To: <709becfca46472d11b4f1526dfcaa716@contrib.scilab.org>
References: <a21a8a2e4d98ac28b99551c38877cda6@contrib.scilab.org>
	<3EE793C0-BE32-400B-B3F6-ED5AC6C44CA8@gmail.com>
	<709becfca46472d11b4f1526dfcaa716@contrib.scilab.org>
Message-ID: <3951FE4E-458A-475E-AB8B-07C707D97AB4@gmail.com>


On Jun 30, 2012, at 12:13 , <michael.baudin at contrib.scilab.org> <michael.baudin at contrib.scilab.org> wrote:

> Hi,
> 
> I'm sorry, I do not clearly understand.
> 
> I'm aware that the source is available at :
> 
> http://svn.r-project.org/R/trunk/src/nmath/qgeom.c

Yes, but you were suggesting that non-use of log1p caused the problem, and the source clearly uses it, so I assumed that you didn't check.

> 
> But a good source does not mean a correct result, because of compilation issues. Moreover, I do not fully understand why the 1e-7 coefficient in the formula was put there. The comment "add a fuzz to ensure left continuity" is not obvious to me.

I never implied that there wasn't a problem.

The gist of the comment it is that we want to ensure that (for moderate i at least)

qgeom(pgeom(i,.1),.1)==i

and that slightly lower values should also give i, whereas higher values give i+1:

> qgeom(pgeom(1,.1),.1)
[1] 1
> qgeom(pgeom(1,.1)-.01,.1)
[1] 1
> qgeom(pgeom(1,.1)+.01,.1)
[1] 2

However, floating point calculations being what they are, we don't trust equality, so we move the cutpoint a little -- apparently a little too much.



> Best regards,
> 
> Micha?l
> 
> On Fri, 29 Jun 2012 14:21:50 +0200, peter dalgaard <pdalgd at gmail.com> wrote:
>> On Jun 28, 2012, at 22:49 , <michael.baudin at contrib.scilab.org>
>> <michael.baudin at contrib.scilab.org> wrote:
>> 
>>> Hi,
>>> 
>>> With R version 2.10.0 (2009-10-26) on Windows, I computed the p=1.e-20 quantile of the geometric distribution with parameter prob=0.1.
>>> 
>>>> qgeom(1.e-20,0.1)
>>> [1] -1
>>> 
>>> But this is not possible, since X=0,1,2,...
>>> 
>>> I guess that this might be a bug in the quantile function, which should use the log1p function, instead of the naive formula.
>>> 
>>> Am I correct ?
>> 
>> Nope. (The source is availably, you know....).
>> 
>> The problem is that a slight fuzz is subtracted inside ceil(....),
>> but there's no check that the result is positive.
>> 
>> qnbinom(...., size=1) is equivalent and does get right, by the way.
>> 
>> -pd
>> 
>>> 
>>> Best regards,
>>> 
>>> Micha?l
>>> 
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


