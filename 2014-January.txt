From barthelemy at geovariances.com  Thu Jan  2 12:09:17 2014
From: barthelemy at geovariances.com (Olivier BARTHELEMY)
Date: Thu, 2 Jan 2014 12:09:17 +0100
Subject: [Rd] Symlinks when building R on windows
In-Reply-To: <CAK9jXVUgFkXKSWzYYaJto3nHApf2dnRJ8zWMCggSQ0=vvSVB=w@mail.gmail.com>
References: <CAK9jXVXuzVbDF5s10_0BDnVyNN6bESTBmUrUtg7Yh_iS-At=tA@mail.gmail.com>
	<52B19F83.4020707@gmail.com>
	<CAK9jXVUA6xULbzFbq4qExZzhe+oK-paTnH0fbCe2bQdgRBBqOg@mail.gmail.com>
	<52C1614D.5010307@gmail.com>
	<CAK9jXVUgFkXKSWzYYaJto3nHApf2dnRJ8zWMCggSQ0=vvSVB=w@mail.gmail.com>
Message-ID: <CAK9jXVUkF2bodVVJ+WHoDt5=QAuzRwYdoPPxDiE6A4FX9FAyaQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140102/08e36485/attachment.pl>

From murdoch.duncan at gmail.com  Thu Jan  2 13:00:40 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 02 Jan 2014 07:00:40 -0500
Subject: [Rd] Symlinks when building R on windows
In-Reply-To: <CAK9jXVUkF2bodVVJ+WHoDt5=QAuzRwYdoPPxDiE6A4FX9FAyaQ@mail.gmail.com>
References: <CAK9jXVXuzVbDF5s10_0BDnVyNN6bESTBmUrUtg7Yh_iS-At=tA@mail.gmail.com>	<52B19F83.4020707@gmail.com>	<CAK9jXVUA6xULbzFbq4qExZzhe+oK-paTnH0fbCe2bQdgRBBqOg@mail.gmail.com>	<52C1614D.5010307@gmail.com>	<CAK9jXVUgFkXKSWzYYaJto3nHApf2dnRJ8zWMCggSQ0=vvSVB=w@mail.gmail.com>
	<CAK9jXVUkF2bodVVJ+WHoDt5=QAuzRwYdoPPxDiE6A4FX9FAyaQ@mail.gmail.com>
Message-ID: <52C554E8.4010504@gmail.com>

On 14-01-02 6:09 AM, Olivier BARTHELEMY wrote:
> With some additional debug messages in the code, it would seem that when
> solve.R calls .Internal(La_solve(..)), mod_do_lapack() is called, but
> PRIMVAL(op) should be 100 for La_solve. Instead, it is 0 and thus
> La_qr_cmplx is called

That's very strange.  The PRIMVAL comes from the big R_FunTab table in 
names.c, and it is coded correctly. During initialization it is copied 
into the La_solve
object that you're seeing in the function call.
So it looks as though either the table or that object has somehow become 
corrupted.  Debugging that is a little tricky, but should be doable. 
First, work out whether R_FunTab is corrupted or not.  If it is, then 
set a hardware breakpoint to see when it happened.  If not, then you 
have to wait until the La_solve primitive is created, then set a 
hardware breakpoint on it.  Good luck.

Duncan Murdoch


>
> 2013/12/30 Olivier BARTHELEMY <barthelemy at geovariances.com>
>
>> I tried relaunching the build for x64 this time, in a new folder, and
>> still get the same problem, so it mustn't be something that didn't get
>> deleted.
>> According to my first diagnostics with messages in the source, it's
>> strange. In solve.R, i can see that it will call ".Internal(La_solve(a, b,
>> tol))". But i never see a message i added right at the start of La_solve()
>> of Lapack.c. I also diagnosed that the "'a' must be a complex matrix" error
>> comes from La_qr_cmplx(). It's as if .Internal() called the wrong function
>> of Lapack.c. I'll try to look more tomorrow, but am not sure how to debug
>> .Internal()..
>>
>>
>> 2013/12/30 Duncan Murdoch <murdoch.duncan at gmail.com>
>>
>>> On 13-12-30 4:47 AM, Olivier BARTHELEMY wrote:
>>>
>>>> Ok, i used the procedure in the manual. I think i am almost at the end of
>>>> the build process. I am stuck however at the build of grDevices module.
>>>> While byte-compiling it, i get the following error :
>>>> Error in solve.default(rgb) : 'a' must be a complex matrix
>>>> The line of that syntax errror can be found back in make.rgb of
>>>> src/library/grDevices/R/convertColor.R
>>>> I doubt this file has a syntax error. The only possible cause i can think
>>>> of is if the previous rbind that creates rgb returns NULL, but i can't
>>>> find
>>>> what would cause that.
>>>> Any hints on where i could look for the problem?
>>>>
>>>
>>> I've never seen that error, so can't offer much help.  Did you delete
>>> everything from your previous unsuccessful build attempts?
>>>
>>> Do note that it is not a syntax error, it's an evaluation error.  It
>>> would likely have happened during the construction of the colorspaces list,
>>> which calls make.rgb later in that same file.  You could insert print() or
>>> message() statements to localize the error, but it's not an error that
>>> should have happened in a valid build.
>>>
>>> Duncan Murdoch
>>>
>>>
>>>
>>>> I hope this is not too offtopic with the initial subject and the
>>>> developmenet mailing list
>>>>
>>>>
>>>> 2013/12/18 Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>
>>>>   On 13-12-18 5:24 AM, Olivier BARTHELEMY wrote:
>>>>>
>>>>>   I think this is more suited for the devel mailing list than the help
>>>>>> one.
>>>>>>
>>>>>> I'm trying to build R on windows, With Rtools installed, and
>>>>>> configure/make
>>>>>> in R-3.0.2 sources folder from a cygwin console.
>>>>>>
>>>>>>
>>>>> This doesn't sound like a good idea.  The Rtools are set up for native
>>>>> Windows builds.  If you run configure yourself, you'll be targeting a
>>>>> Cygwin build -- but that's something we don't support.
>>>>>
>>>>> What you should do is follow the instructions for native Windows builds
>>>>> that are given in chapter 3 of the Installation and Administration
>>>>> manual.
>>>>>    In particular, *do not* run configure.
>>>>>
>>>>> If you do choose to create a Cygwin build, please make sure it passes
>>>>> the
>>>>> tests before you use it.  I haven't seen one that does.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>
>>>>>
>>>>>    I am stuck at the moment, because the build process tries create
>>>>> symlinks,
>>>>>
>>>>>> and gcc build fails because the opened files containe the metadata of
>>>>>> the
>>>>>> not working symlink, and not the linked file.
>>>>>> The first problematic files is src/extra/xz/alone_decoder.c, pointing
>>>>>> to
>>>>>> common/alone_decoder.c, but i guess the following buildt files would
>>>>>> have
>>>>>> the same problem.
>>>>>> My configure didn't even detect the symlink cmd off cygwin while
>>>>>> performing
>>>>>> the tests, and i even launched configure with --disable-symlinks, but
>>>>>> their
>>>>>> creationis attmpted anyways.
>>>>>> Is there any quick way to workaround that? And since it's .c or.h
>>>>>> files we
>>>>>> are symlinking here, couldn't we simply do 'eponym' C or h files that
>>>>>> do a
>>>>>> C #include to the relative path, which would be more portable than
>>>>>> symlinks?
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>
>>>>
>>>
>>
>>
>> --
>> Olivier BARTHELEMY
>> +33.1.80.97.26.31
>>
>
>
>


From kirill.mueller at ivt.baug.ethz.ch  Fri Jan  3 01:05:03 2014
From: kirill.mueller at ivt.baug.ethz.ch (=?ISO-8859-1?Q?Kirill_M=FCller?=)
Date: Fri, 3 Jan 2014 01:05:03 +0100
Subject: [Rd] Sweave trims console output in "tex" mode
Message-ID: <52C5FEAF.5020708@ivt.baug.ethz.ch>

Hi


In the example .Rnw file below, only the newline between c and d is 
visible in the resulting .tex file after running R CMD Sweave. What is 
the reason for this behavior? Newlines are important in LaTeX and should 
be preserved. In particular, this behavior leads to incorrect LaTeX code 
generated when using tikz(console=TRUE) inside a Sweave chunk, as shown 
in the tikzDevice vignette.

A similar question has been left unanswered before: 
https://stat.ethz.ch/pipermail/r-help/2010-June/242019.html . I am well 
aware of knitr, I'm looking for a solution for Sweave.


Cheers

Kirill


\documentclass{article}
\begin{document}
<<inline,echo=FALSE,results=tex>>=
cat("a\n")
cat("b\n \n")
cat("c\nd")
@
\end{document}


From murdoch.duncan at gmail.com  Fri Jan  3 01:45:41 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 02 Jan 2014 19:45:41 -0500
Subject: [Rd] Sweave trims console output in "tex" mode
In-Reply-To: <52C5FEAF.5020708@ivt.baug.ethz.ch>
References: <52C5FEAF.5020708@ivt.baug.ethz.ch>
Message-ID: <52C60835.8060605@gmail.com>

On 14-01-02 7:05 PM, Kirill M?ller wrote:
> Hi
>
>
> In the example .Rnw file below, only the newline between c and d is
> visible in the resulting .tex file after running R CMD Sweave. What is
> the reason for this behavior? Newlines are important in LaTeX and should
> be preserved. In particular, this behavior leads to incorrect LaTeX code
> generated when using tikz(console=TRUE) inside a Sweave chunk, as shown
> in the tikzDevice vignette.
>
> A similar question has been left unanswered before:
> https://stat.ethz.ch/pipermail/r-help/2010-June/242019.html . I am well
> aware of knitr, I'm looking for a solution for Sweave.

You are running with the strip.white option set to TRUE.  That strips 
blank lines at then beginning and end of each output piece.  Just set 
strip.white=FALSE.

Duncan Murdoch

>
>
> Cheers
>
> Kirill
>
>
> \documentclass{article}
> \begin{document}
> <<inline,echo=FALSE,results=tex>>=
> cat("a\n")
> cat("b\n \n")
> cat("c\nd")
> @
> \end{document}
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From kirill.mueller at ivt.baug.ethz.ch  Fri Jan  3 01:53:43 2014
From: kirill.mueller at ivt.baug.ethz.ch (=?ISO-8859-1?Q?Kirill_M=FCller?=)
Date: Fri, 3 Jan 2014 01:53:43 +0100
Subject: [Rd] Sweave trims console output in "tex" mode
In-Reply-To: <52C60835.8060605@gmail.com>
References: <52C5FEAF.5020708@ivt.baug.ethz.ch> <52C60835.8060605@gmail.com>
Message-ID: <52C60A17.1040208@ivt.baug.ethz.ch>

On 01/03/2014 01:45 AM, Duncan Murdoch wrote:
> You are running with the strip.white option set to TRUE.  That strips 
> blank lines at then beginning and end of each output piece.  Just set 
> strip.white=FALSE.
Thanks, the code below works perfectly. I have also found the 
documentation in ?RweaveLatex .

I'm not sure if the default setting is sensible for "results=tex", 
though. Has this changed in the recent past?


-Kirill


\documentclass{article}
\begin{document}
<<inline,echo=FALSE,results=tex,strip.white=FALSE>>=
cat("a\n")
cat("b\n \n")
cat("c\nd")
@
\end{document}


From murdoch.duncan at gmail.com  Fri Jan  3 01:59:29 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 02 Jan 2014 19:59:29 -0500
Subject: [Rd] Sweave trims console output in "tex" mode
In-Reply-To: <52C60A17.1040208@ivt.baug.ethz.ch>
References: <52C5FEAF.5020708@ivt.baug.ethz.ch> <52C60835.8060605@gmail.com>
	<52C60A17.1040208@ivt.baug.ethz.ch>
Message-ID: <52C60B71.3090803@gmail.com>

On 14-01-02 7:53 PM, Kirill M?ller wrote:
> On 01/03/2014 01:45 AM, Duncan Murdoch wrote:
>> You are running with the strip.white option set to TRUE.  That strips
>> blank lines at then beginning and end of each output piece.  Just set
>> strip.white=FALSE.
> Thanks, the code below works perfectly. I have also found the
> documentation in ?RweaveLatex .
>
> I'm not sure if the default setting is sensible for "results=tex",
> though.

But results=tex is not the default.  Having defaults for one option 
depend on the setting for another is confusing, so I think the current 
setting is appropriate.

> Has this changed in the recent past?

I don't think so; check the NEWS file or use svn blame on the source to 
be sure.

Duncan Murdoch

>
>
> -Kirill
>
>
> \documentclass{article}
> \begin{document}
> <<inline,echo=FALSE,results=tex,strip.white=FALSE>>=
> cat("a\n")
> cat("b\n \n")
> cat("c\nd")
> @
> \end{document}
>


From kirill.mueller at ivt.baug.ethz.ch  Fri Jan  3 02:04:06 2014
From: kirill.mueller at ivt.baug.ethz.ch (=?ISO-8859-1?Q?Kirill_M=FCller?=)
Date: Fri, 3 Jan 2014 02:04:06 +0100
Subject: [Rd] Sweave trims console output in "tex" mode
In-Reply-To: <52C60B71.3090803@gmail.com>
References: <52C5FEAF.5020708@ivt.baug.ethz.ch> <52C60835.8060605@gmail.com>
	<52C60A17.1040208@ivt.baug.ethz.ch> <52C60B71.3090803@gmail.com>
Message-ID: <52C60C86.30702@ivt.baug.ethz.ch>

On 01/03/2014 01:59 AM, Duncan Murdoch wrote:
> But results=tex is not the default.  Having defaults for one option 
> depend on the setting for another is confusing, so I think the current 
> setting is appropriate. 
True. On the other hand, I cannot imagine that "results=tex" is useful 
at all without "strip.white=FALSE". If the strip.white option would 
auto-adjust, things would "just work". Anyway, I'm not a very active 
user of Sweave.


-Kirill


From hb at biostat.ucsf.edu  Fri Jan  3 02:16:25 2014
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Thu, 2 Jan 2014 17:16:25 -0800
Subject: [Rd] class() on substitute(...) output?
Message-ID: <CAFDcVCS7vdmRdnqYQvb3xq5C5x7+366b_SPisQeb9oX7vWHKRw@mail.gmail.com>

Does it make sense to talk about the class of the output of
substitute(...)?  I'm puzzled by the following outputs:

ee <- list(
  A = substitute( a <- 1 ),
  B = substitute({ a <- 1 }),
  C = substitute(( a <- 1 )),
  D = substitute( a == 1 )
)

> t(sapply(ee, FUN=function(e) { c(typeof=typeof(e), mode=mode(e), class=class(e)) }))
  typeof     mode   class
A "language" "call" "<-"
B "language" "call" "{"
C "language" "("    "("
D "language" "call" "call"

That the mode in C is "(", is motivated in help("mode"): "that some
calls have mode "(" which is S compatible."  However, what's the
explanation for the different classes?  Is that intended or just
"garbage" output?

Thanks,

Henrik


From murdoch.duncan at gmail.com  Fri Jan  3 02:34:13 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 02 Jan 2014 20:34:13 -0500
Subject: [Rd] Sweave trims console output in "tex" mode
In-Reply-To: <52C60C86.30702@ivt.baug.ethz.ch>
References: <52C5FEAF.5020708@ivt.baug.ethz.ch> <52C60835.8060605@gmail.com>
	<52C60A17.1040208@ivt.baug.ethz.ch>
	<52C60B71.3090803@gmail.com> <52C60C86.30702@ivt.baug.ethz.ch>
Message-ID: <52C61395.30007@gmail.com>

On 14-01-02 8:04 PM, Kirill M?ller wrote:
> On 01/03/2014 01:59 AM, Duncan Murdoch wrote:
>> But results=tex is not the default.  Having defaults for one option
>> depend on the setting for another is confusing, so I think the current
>> setting is appropriate.
> True. On the other hand, I cannot imagine that "results=tex" is useful
> at all without "strip.white=FALSE". If the strip.white option would
> auto-adjust, things would "just work". Anyway, I'm not a very active
> user of Sweave.

Carriage returns usually don't matter in LaTeX, so I didn't even know 
about this option, though I use results=tex quite often. I had to look 
at the source to see where the newlines were going, and saw it there.

Duncan Murdoch


From peter.meilstrup at gmail.com  Fri Jan  3 03:15:53 2014
From: peter.meilstrup at gmail.com (Peter Meilstrup)
Date: Thu, 2 Jan 2014 18:15:53 -0800
Subject: [Rd] class() on substitute(...) output?
In-Reply-To: <CAFDcVCS7vdmRdnqYQvb3xq5C5x7+366b_SPisQeb9oX7vWHKRw@mail.gmail.com>
References: <CAFDcVCS7vdmRdnqYQvb3xq5C5x7+366b_SPisQeb9oX7vWHKRw@mail.gmail.com>
Message-ID: <CAJoaRhaqkKBr6OyOLLJJ9c+UJzr2Eq+MfoBHWj1_EUW4RMYYtA@mail.gmail.com>

I've found 'while', 'for', 'if' and '=' appearing as the "class" of
what would ostensibly be "call" objects, as well. (Came across this
because I was using S3 dispatch to help do code-walking syntax
transformations)

I can't find where it is happening in R source, but it seems
significant that they all are are things that deparse as other than
function calls, and all are symbols that have SET_SPECIAL_SYMBOL
marked in names.c --- although the converse does not hold for either
statement.


On Thu, Jan 2, 2014 at 5:16 PM, Henrik Bengtsson <hb at biostat.ucsf.edu> wrote:
> Does it make sense to talk about the class of the output of
> substitute(...)?  I'm puzzled by the following outputs:
>
> ee <- list(
>   A = substitute( a <- 1 ),
>   B = substitute({ a <- 1 }),
>   C = substitute(( a <- 1 )),
>   D = substitute( a == 1 )
> )
>
>> t(sapply(ee, FUN=function(e) { c(typeof=typeof(e), mode=mode(e), class=class(e)) }))
>   typeof     mode   class
> A "language" "call" "<-"
> B "language" "call" "{"
> C "language" "("    "("
> D "language" "call" "call"
>
> That the mode in C is "(", is motivated in help("mode"): "that some
> calls have mode "(" which is S compatible."  However, what's the
> explanation for the different classes?  Is that intended or just
> "garbage" output?
>
> Thanks,
>
> Henrik
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From pauljohn32 at gmail.com  Fri Jan  3 05:29:29 2014
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Thu, 2 Jan 2014 22:29:29 -0600
Subject: [Rd] Tab formatting in dummy.coef.R
Message-ID: <CAErODj-P8X2qJR55iStKrVoT7L3W6sGeBeCh=kvBDWnjxc-08A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140102/3113f75a/attachment.pl>

From kirill.mueller at ivt.baug.ethz.ch  Fri Jan  3 09:40:47 2014
From: kirill.mueller at ivt.baug.ethz.ch (=?ISO-8859-1?Q?Kirill_M=FCller?=)
Date: Fri, 3 Jan 2014 09:40:47 +0100
Subject: [Rd] Sweave trims console output in "tex" mode
In-Reply-To: <52C61395.30007@gmail.com>
References: <52C5FEAF.5020708@ivt.baug.ethz.ch> <52C60835.8060605@gmail.com>
	<52C60A17.1040208@ivt.baug.ethz.ch>
	<52C60B71.3090803@gmail.com> <52C60C86.30702@ivt.baug.ethz.ch>
	<52C61395.30007@gmail.com>
Message-ID: <52C6778F.8020204@ivt.baug.ethz.ch>

On 01/03/2014 02:34 AM, Duncan Murdoch wrote:
> Carriage returns usually don't matter in LaTeX
I'd rather say they do. One is like a space, two or more end a paragraph 
and start a new one. If newlines are stripped away, the meaning of the 
TeX code can change, in some cases dramatically (e.g. if comments are 
written to the TeX code).

Also, I don't understand why the option is called strip.white, at least 
for results=tex. The docs say that "blank lines at the beginning and end 
of output are removed", but the observed behavior is to remove the 
terminating carriage return of the output.


-Kirill


From maechler at stat.math.ethz.ch  Fri Jan  3 10:57:54 2014
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 3 Jan 2014 10:57:54 +0100
Subject: [Rd] Sweave trims console output in "tex" mode
In-Reply-To: <52C60C86.30702@ivt.baug.ethz.ch>
References: <52C5FEAF.5020708@ivt.baug.ethz.ch> <52C60835.8060605@gmail.com>
	<52C60A17.1040208@ivt.baug.ethz.ch> <52C60B71.3090803@gmail.com>
	<52C60C86.30702@ivt.baug.ethz.ch>
Message-ID: <21190.35234.470149.759415@stat.math.ethz.ch>

>>>>> Kirill M?ller <kirill.mueller at ivt.baug.ethz.ch>
>>>>>     on Fri, 3 Jan 2014 02:04:06 +0100 writes:

    > On 01/03/2014 01:59 AM, Duncan Murdoch wrote:
    >> But results=tex is not the default.  Having defaults for
    >> one option depend on the setting for another is
    >> confusing, so I think the current setting is appropriate.

    > True. On the other hand, I cannot imagine that
    > "results=tex" is useful at all without
    > "strip.white=FALSE". If the strip.white option would
    > auto-adjust, things would "just work". Anyway, I'm not a
    > very active user of Sweave.

I think in this case,  it would be quite useful if  strip.white
got a new default,  say "adaptive",  which would becomde FALSE for
'results=tex'.

Otherwise, for "safety", we'd have to recommend that 
'results=tex' is always combined with  strip.white=FALSE, 
which I'd find quite inconvenient.

Martin

    > -Kirill

    > ______________________________________________
    > R-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch.duncan at gmail.com  Fri Jan  3 11:39:49 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 03 Jan 2014 05:39:49 -0500
Subject: [Rd] Sweave trims console output in "tex" mode
In-Reply-To: <52C6778F.8020204@ivt.baug.ethz.ch>
References: <52C5FEAF.5020708@ivt.baug.ethz.ch> <52C60835.8060605@gmail.com>
	<52C60A17.1040208@ivt.baug.ethz.ch>
	<52C60B71.3090803@gmail.com> <52C60C86.30702@ivt.baug.ethz.ch>
	<52C61395.30007@gmail.com> <52C6778F.8020204@ivt.baug.ethz.ch>
Message-ID: <52C69375.6040402@gmail.com>

It's dishonest to quote me out of context.

Duncan Murdoch

On 14-01-03 3:40 AM, Kirill M?ller wrote:
> On 01/03/2014 02:34 AM, Duncan Murdoch wrote:
>> Carriage returns usually don't matter in LaTeX
> I'd rather say they do. One is like a space, two or more end a paragraph
> and start a new one. If newlines are stripped away, the meaning of the
> TeX code can change, in some cases dramatically (e.g. if comments are
> written to the TeX code).
>
> Also, I don't understand why the option is called strip.white, at least
> for results=tex. The docs say that "blank lines at the beginning and end
> of output are removed", but the observed behavior is to remove the
> terminating carriage return of the output.
>
>
> -Kirill
>


From kirill.mueller at ivt.baug.ethz.ch  Fri Jan  3 11:47:03 2014
From: kirill.mueller at ivt.baug.ethz.ch (=?ISO-8859-1?Q?Kirill_M=FCller?=)
Date: Fri, 3 Jan 2014 11:47:03 +0100
Subject: [Rd] Sweave trims console output in "tex" mode
In-Reply-To: <52C69375.6040402@gmail.com>
References: <52C5FEAF.5020708@ivt.baug.ethz.ch> <52C60835.8060605@gmail.com>
	<52C60A17.1040208@ivt.baug.ethz.ch>
	<52C60B71.3090803@gmail.com> <52C60C86.30702@ivt.baug.ethz.ch>
	<52C61395.30007@gmail.com> <52C6778F.8020204@ivt.baug.ethz.ch>
	<52C69375.6040402@gmail.com>
Message-ID: <52C69527.8010502@ivt.baug.ethz.ch>

I'm sorry, I didn't mean to be rude. Do you prefer including the entire 
original message when replying? Or perhaps I misunderstood you when you 
wrote:

 > Carriage returns usually don't matter in LaTeX, so I didn't even know 
about this option, though I use results=tex quite often. I had to look 
at the source to see where the newlines were going, and saw it there.

Could you please clarify? Thanks.


-Kirill


On 01/03/2014 11:39 AM, Duncan Murdoch wrote:
> It's dishonest to quote me out of context.
>
> Duncan Murdoch
>
> On 14-01-03 3:40 AM, Kirill M?ller wrote:
>> On 01/03/2014 02:34 AM, Duncan Murdoch wrote:
>>> Carriage returns usually don't matter in LaTeX
>> I'd rather say they do. One is like a space, two or more end a paragraph
>> and start a new one. If newlines are stripped away, the meaning of the
>> TeX code can change, in some cases dramatically (e.g. if comments are
>> written to the TeX code).
>>
>> Also, I don't understand why the option is called strip.white, at least
>> for results=tex. The docs say that "blank lines at the beginning and end
>> of output are removed", but the observed behavior is to remove the
>> terminating carriage return of the output.
>>
>>
>> -Kirill
>>
>


From murdoch.duncan at gmail.com  Fri Jan  3 11:52:27 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 03 Jan 2014 05:52:27 -0500
Subject: [Rd] Sweave trims console output in "tex" mode
In-Reply-To: <21190.35234.470149.759415@stat.math.ethz.ch>
References: <52C5FEAF.5020708@ivt.baug.ethz.ch>	<52C60835.8060605@gmail.com>	<52C60A17.1040208@ivt.baug.ethz.ch>	<52C60B71.3090803@gmail.com>	<52C60C86.30702@ivt.baug.ethz.ch>
	<21190.35234.470149.759415@stat.math.ethz.ch>
Message-ID: <52C6966B.9030305@gmail.com>

On 14-01-03 4:57 AM, Martin Maechler wrote:
>>>>>> Kirill M?ller <kirill.mueller at ivt.baug.ethz.ch>
>>>>>>      on Fri, 3 Jan 2014 02:04:06 +0100 writes:
>
>      > On 01/03/2014 01:59 AM, Duncan Murdoch wrote:
>      >> But results=tex is not the default.  Having defaults for
>      >> one option depend on the setting for another is
>      >> confusing, so I think the current setting is appropriate.
>
>      > True. On the other hand, I cannot imagine that
>      > "results=tex" is useful at all without
>      > "strip.white=FALSE". If the strip.white option would
>      > auto-adjust, things would "just work". Anyway, I'm not a
>      > very active user of Sweave.
>
> I think in this case,  it would be quite useful if  strip.white
> got a new default,  say "adaptive",  which would becomde FALSE for
> 'results=tex'.
>
> Otherwise, for "safety", we'd have to recommend that
> 'results=tex' is always combined with  strip.white=FALSE,
> which I'd find quite inconvenient.

Old documents could change if you did that, and that's a bad thing.

As I told Kirill (and as he rudely deleted when he quoted me), I use 
results=tex frequently, and I had never noticed a problem with this.  In 
my usage (and I'd guess in most people's) I never output multiple 
paragraphs in paragraph mode from a code chunk.  I would normally just 
write that in the LaTeX part of the document.  The results=tex usage is 
for the case where I am constructing complicated LaTeX macros (e.g. for 
tables), that are too tedious to type by hand.

I can imagine cases where I would output text in paragraph mode, and I 
guess Kirill was trying to do that, but they are rare, and it would cost 
less for the users of those rare cases to change the strip.white default 
than it would for everyone else to do it.

Duncan Murdoch


From maechler at stat.math.ethz.ch  Fri Jan  3 12:00:47 2014
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 3 Jan 2014 12:00:47 +0100
Subject: [Rd] Tab formatting in dummy.coef.R
In-Reply-To: <CAErODj-P8X2qJR55iStKrVoT7L3W6sGeBeCh=kvBDWnjxc-08A@mail.gmail.com>
References: <CAErODj-P8X2qJR55iStKrVoT7L3W6sGeBeCh=kvBDWnjxc-08A@mail.gmail.com>
Message-ID: <21190.39007.93485.259114@stat.math.ethz.ch>

>>>>> Paul Johnson <pauljohn32 at gmail.com>
>>>>>     on Thu, 2 Jan 2014 22:29:29 -0600 writes:

    > Happy New Year I recognize this is a low priority issue,
    > but... I'll fix it if you let me.

    > There are some TABs where R style calls for 4 spaces. 

This is your not quite correct interpretation. 
The R internal manual you mention below talks about TABs in
specific places in *.Rd files only.

*.R (and *.c even more) use TABs in many places, and all of R core have
their Emacs / vi / ... settings accordingly.

Happy New Year,  indeed, to all contributors and readers of 'R-devel'!
Martin

--
Martin Maechler, ETH Zurich  &  R core team


    > For example R-3.0.2/src/library/stats/R/dummy.coef.R.

    > I never noticed this until today, when I was stranded on a
    > deserted island with only the R source code and a Swiss
    > Army knife (vi). Now I realize my ~.vimrc has tabstop set
    > at 2, and it makes tab indentations in R source "go
    > backwards".  if you are strictly following R Internals 9
    > "R Coding Standards", the TABs should be replaced with
    > spaces, I shouldn't have to reconfigure the editor.

    > Here's the way it looks in my vi

    > dummy.coef.aovlist <- function(object, use.na = FALSE,
    > ...)  { Terms <- terms(object, specials="Error") err <-
    > attr(Terms,"specials")$Error - 1 tl <- attr(Terms,
    > "term.labels")[-err] int <- attr(Terms, "intercept") facs
    > <- attr(Terms, "factors")[-c(1,1+err), -err, drop=FALSE]
    > vars <- rownames(facs) xl <- attr(object, "xlevels")
    > if(!length(xl)) { # no factors in model
    > return(as.list(coef(object))) } nxl <- setNames(rep.int(1,
    > length(vars)), vars) tmp <- unlist(lapply(xl, length))
    > nxl[names(tmp)] <- tmp lterms <- apply(facs, 2L,
    > function(x) prod(nxl[x > 0])) nl <- sum(lterms) args <-
    > setNames(vector("list", length(vars)), vars) for(i in
    > vars) args[[i]] <- if(nxl[[i]] == 1) rep.int(1, nl) else
    > factor(rep.int(xl[[i]][1L], nl), levels = xl[[i]]) dummy
    > <- do.call("data.frame", args) pos <- 0 rn <- rep.int(tl,
    > lterms) rnn <- rep.int("", nl) for(j in tl) { i <-
    > vars[facs[, j] > 0] ifac <- i[nxl[i] > 1] if(length(ifac)
    > == 0L) { # quantitative factor rnn[pos + 1] <- j } else
    > if(length(ifac) == 1L) { # main effect dummy[
    > pos+1L:lterms[j], ifac ] <- xl[[ifac]] rnn[
    > pos+1L:lterms[j] ] <- as.character(xl[[ifac]]) [... snip
    > ....]

    > The patch looks like this in my vi:

    > *** dummy.coef.R 2013-03-05 17:02:23.000000000 -0600 ---
    > dummy.coef-indent.R 2014-01-02 21:49:25.828163544 -0600
    > ***************
    > *** 28,35 **** Terms <- delete.response(Terms) vars <-
    > all.vars(Terms) xl <- object$xlevels !  if(!length(xl)) {
    > # no factors in model !  return(as.list(coef(object))) }
    > nxl <- setNames(rep.int(1, length(vars)), vars) tmp <-
    > unlist(lapply(xl, length)) ## ?? vapply(xl, length, 1L)
    > --- 28,35 ---- Terms <- delete.response(Terms) vars <-
    > all.vars(Terms) xl <- object$xlevels !  if(!length(xl)) {
    > # no factors in model !  return(as.list(coef(object))) }
    > nxl <- setNames(rep.int(1, length(vars)), vars) tmp <-
    > unlist(lapply(xl, length)) ## ?? vapply(xl, length, 1L)
    > ***************
    > *** 38,64 **** nl <- sum(lterms) args <-
    > setNames(vector("list", length(vars)), vars) for(i in
    > vars) !  args[[i]] <- if(nxl[[i]] == 1) rep.int(1, nl) !
    > else factor(rep.int(xl[[i]][1L], nl), levels = xl[[i]])
    > dummy <- do.call("data.frame", args) pos <- 0 rn <-
    > rep.int(tl, lterms) rnn <- rep.int("", nl) for(j in tl) {
    > !  i <- vars[facs[, j] > 0] !  ifac <- i[nxl[i] > 1] !
    > if(length(ifac) == 0L) { # quantitative factor !
    > rnn[pos+1] <- j !  } else if(length(ifac) == 1L) { # main
    > effect !  dummy[ pos+1L:lterms[j], ifac ] <- xl[[ifac]] !
    > rnn[ pos+1L:lterms[j] ] <- as.character(xl[[ifac]]) !  }
    > else { # interaction !  tmp <- expand.grid(xl[ifac]) !
    > dummy[ pos+1L:lterms[j], ifac ] <- tmp !  rnn[
    > pos+1L:lterms[j] ] <- !  apply(as.matrix(tmp), 1L,
    > function(x) paste(x, collapse=":")) !  } !  pos <- pos +
    > lterms[j] } ## some terms like poly(x,1) will give
    > problems here, so allow ## NaNs and set to NA afterwards.
    > --- 38,64 ---- nl <- sum(lterms) args <-
    > setNames(vector("list", length(vars)), vars) for(i in
    > vars) !  args[[i]] <- if(nxl[[i]] == 1) rep.int(1, nl) !
    > else factor(rep.int(xl[[i]][1L], nl), levels = xl[[i]])
    > dummy <- do.call("data.frame", args) pos <- 0 rn <-
    > rep.int(tl, lterms) rnn <- rep.int("", nl) for(j in tl) {
    > !  i <- vars[facs[, j] > 0] !  ifac <- i[nxl[i] > 1] !
    > if(length(ifac) == 0L) { # quantitative factor !
    > rnn[pos+1] <- j !  } else if(length(ifac) == 1L) { # main
    > effect !  dummy[ pos+1L:lterms[j], ifac ] <- xl[[ifac]] !
    > rnn[ pos+1L:lterms[j] ] <- as.character(xl[[ifac]]) !  }
    > else { # interaction !  tmp <- expand.grid(xl[ifac]) !
    > dummy[ pos+1L:lterms[j], ifac ] <- tmp !  rnn[
    > pos+1L:lterms[j] ] <- !  apply(as.matrix(tmp), 1L,
    > function(x) paste(x, collapse=":")) !  } !  pos <- pos +
    > lterms[j] } [...snip...]

    > I could make a patch that applies at the top level, maybe
    > one for each library. If one of you will consider using
    > it.

    > Again, I recognize this is a small thing, the editor can
    > be adjusted to avoid it. But it shouldn't be necessary.

    > PJ
    > -- 
    > Paul E. Johnson Professor, Political Science
    > Assoc. Director 1541 Lilac Lane, Room 504 Center for
    > Research Methods University of Kansas University of Kansas
    > http://pj.freefaculty.org http://quant.ku.edu

    > 	[[alternative HTML version deleted]]

    > ______________________________________________
    > R-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch.duncan at gmail.com  Fri Jan  3 13:06:42 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 03 Jan 2014 07:06:42 -0500
Subject: [Rd] Sweave trims console output in "tex" mode
In-Reply-To: <52C69527.8010502@ivt.baug.ethz.ch>
References: <52C5FEAF.5020708@ivt.baug.ethz.ch> <52C60835.8060605@gmail.com>
	<52C60A17.1040208@ivt.baug.ethz.ch>
	<52C60B71.3090803@gmail.com> <52C60C86.30702@ivt.baug.ethz.ch>
	<52C61395.30007@gmail.com> <52C6778F.8020204@ivt.baug.ethz.ch>
	<52C69375.6040402@gmail.com> <52C69527.8010502@ivt.baug.ethz.ch>
Message-ID: <52C6A7D2.2090103@gmail.com>

On 14-01-03 5:47 AM, Kirill M?ller wrote:
> I'm sorry, I didn't mean to be rude. Do you prefer including the entire
> original message when replying? Or perhaps I misunderstood you when you
> wrote:

You don't need to include irrelevant material in your reply, but you 
should include explanatory material when you are arguing about a 
particular claim.  If you aren't sure whether it is relevant or not, 
then you should probably ask for clarification rather than arguing with 
the claim.

>
>   > Carriage returns usually don't matter in LaTeX, so I didn't even know
> about this option, though I use results=tex quite often. I had to look
> at the source to see where the newlines were going, and saw it there.
>
> Could you please clarify? Thanks.

Single carriage returns are usually equivalent to spaces.  Multiple 
carriage returns separate paragraphs, but they are rare in code chunk 
output in my Sweave usage.  I normally put plain text in the LaTeX part 
of the Sweave document.

I have checked my own .Rnw files, and I have used results=tex about 600 
times, but never used strip.white.

I've also looked at the .Rnw files in CRAN packages, and 
strip.white=true and strip.white=all are used there about 140 times, but 
strip.white=false is only used 10 times.  I think only one package 
(SweaveListingUtils) uses strip.white=false in combination with results=tex.

So while I agree Martin's "adaptive" option would have been a better 
default than "true", I think it would be more likely to cause trouble 
than to solve it.

Duncan Murdoch

>
>
> -Kirill
>
>
> On 01/03/2014 11:39 AM, Duncan Murdoch wrote:
>> It's dishonest to quote me out of context.
>>
>> Duncan Murdoch
>>
>> On 14-01-03 3:40 AM, Kirill M?ller wrote:
>>> On 01/03/2014 02:34 AM, Duncan Murdoch wrote:
>>>> Carriage returns usually don't matter in LaTeX
>>> I'd rather say they do. One is like a space, two or more end a paragraph
>>> and start a new one. If newlines are stripped away, the meaning of the
>>> TeX code can change, in some cases dramatically (e.g. if comments are
>>> written to the TeX code).
>>>
>>> Also, I don't understand why the option is called strip.white, at least
>>> for results=tex. The docs say that "blank lines at the beginning and end
>>> of output are removed", but the observed behavior is to remove the
>>> terminating carriage return of the output.
>>>
>>>
>>> -Kirill
>>>
>>
>


From kirill.mueller at ivt.baug.ethz.ch  Fri Jan  3 13:32:09 2014
From: kirill.mueller at ivt.baug.ethz.ch (=?ISO-8859-1?Q?Kirill_M=FCller?=)
Date: Fri, 3 Jan 2014 13:32:09 +0100
Subject: [Rd] Sweave trims console output in "tex" mode
In-Reply-To: <52C6A7D2.2090103@gmail.com>
References: <52C5FEAF.5020708@ivt.baug.ethz.ch> <52C60835.8060605@gmail.com>
	<52C60A17.1040208@ivt.baug.ethz.ch>
	<52C60B71.3090803@gmail.com> <52C60C86.30702@ivt.baug.ethz.ch>
	<52C61395.30007@gmail.com> <52C6778F.8020204@ivt.baug.ethz.ch>
	<52C69375.6040402@gmail.com> <52C69527.8010502@ivt.baug.ethz.ch>
	<52C6A7D2.2090103@gmail.com>
Message-ID: <52C6ADC9.2080507@ivt.baug.ethz.ch>

On 01/03/2014 01:06 PM, Duncan Murdoch wrote:
> On 14-01-03 5:47 AM, Kirill M?ller wrote:
>> I'm sorry, I didn't mean to be rude. Do you prefer including the entire
>> original message when replying? Or perhaps I misunderstood you when you
>> wrote:
>
> You don't need to include irrelevant material in your reply, but you 
> should include explanatory material when you are arguing about a 
> particular claim.  If you aren't sure whether it is relevant or not, 
> then you should probably ask for clarification rather than arguing 
> with the claim.
>
Thanks. In the future, I'll quote at least full sentences and everything 
they refer to, to avoid confusion and make sure that context is maintained.
>>
>>   > Carriage returns usually don't matter in LaTeX, so I didn't even 
>> know
>> about this option, though I use results=tex quite often. I had to look
>> at the source to see where the newlines were going, and saw it there.
>>
>> Could you please clarify? Thanks.
>
> Single carriage returns are usually equivalent to spaces. Multiple 
> carriage returns separate paragraphs, but they are rare in code chunk 
> output in my Sweave usage.  I normally put plain text in the LaTeX 
> part of the Sweave document.
>
Indeed, it only makes a difference for code that generates large 
portions of LaTeX (such as tikzDevice).
> I have checked my own .Rnw files, and I have used results=tex about 
> 600 times, but never used strip.white.
>
> I've also looked at the .Rnw files in CRAN packages, and 
> strip.white=true and strip.white=all are used there about 140 times, 
> but strip.white=false is only used 10 times.  I think only one package 
> (SweaveListingUtils) uses strip.white=false in combination with 
> results=tex.
>
> So while I agree Martin's "adaptive" option would have been a better 
> default than "true", I think it would be more likely to cause trouble 
> than to solve it.
>
I agree, given this data and considering that trimming the terminal 
newline can be considered a feature. Perhaps comments are the only use 
case where the newline is really important. But then I don't see how to 
reliably detect comments, as the catcode for % can be changed, e.g., in 
a verbatim environment. I'll consider printing a \relax after the 
comment in tikzDevice, this should be robust and sufficient.


-Kirill


From murdoch.duncan at gmail.com  Fri Jan  3 17:38:41 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 03 Jan 2014 11:38:41 -0500
Subject: [Rd] Sweave trims console output in "tex" mode
In-Reply-To: <52C6ADC9.2080507@ivt.baug.ethz.ch>
References: <52C5FEAF.5020708@ivt.baug.ethz.ch> <52C60835.8060605@gmail.com>
	<52C60A17.1040208@ivt.baug.ethz.ch>
	<52C60B71.3090803@gmail.com> <52C60C86.30702@ivt.baug.ethz.ch>
	<52C61395.30007@gmail.com> <52C6778F.8020204@ivt.baug.ethz.ch>
	<52C69375.6040402@gmail.com> <52C69527.8010502@ivt.baug.ethz.ch>
	<52C6A7D2.2090103@gmail.com> <52C6ADC9.2080507@ivt.baug.ethz.ch>
Message-ID: <52C6E791.1090105@gmail.com>

On 03/01/2014 7:32 AM, Kirill M?ller wrote:
> On 01/03/2014 01:06 PM, Duncan Murdoch wrote:
> > On 14-01-03 5:47 AM, Kirill M?ller wrote:
> >> I'm sorry, I didn't mean to be rude. Do you prefer including the entire
> >> original message when replying? Or perhaps I misunderstood you when you
> >> wrote:
> >
> > You don't need to include irrelevant material in your reply, but you
> > should include explanatory material when you are arguing about a
> > particular claim.  If you aren't sure whether it is relevant or not,
> > then you should probably ask for clarification rather than arguing
> > with the claim.
> >
> Thanks. In the future, I'll quote at least full sentences and everything
> they refer to, to avoid confusion and make sure that context is maintained.
> >>
> >>   > Carriage returns usually don't matter in LaTeX, so I didn't even
> >> know
> >> about this option, though I use results=tex quite often. I had to look
> >> at the source to see where the newlines were going, and saw it there.
> >>
> >> Could you please clarify? Thanks.
> >
> > Single carriage returns are usually equivalent to spaces. Multiple
> > carriage returns separate paragraphs, but they are rare in code chunk
> > output in my Sweave usage.  I normally put plain text in the LaTeX
> > part of the Sweave document.
> >
> Indeed, it only makes a difference for code that generates large
> portions of LaTeX (such as tikzDevice).
> > I have checked my own .Rnw files, and I have used results=tex about
> > 600 times, but never used strip.white.
> >
> > I've also looked at the .Rnw files in CRAN packages, and
> > strip.white=true and strip.white=all are used there about 140 times,
> > but strip.white=false is only used 10 times.  I think only one package
> > (SweaveListingUtils) uses strip.white=false in combination with
> > results=tex.
> >
> > So while I agree Martin's "adaptive" option would have been a better
> > default than "true", I think it would be more likely to cause trouble
> > than to solve it.
> >
> I agree, given this data and considering that trimming the terminal
> newline can be considered a feature. Perhaps comments are the only use
> case where the newline is really important. But then I don't see how to
> reliably detect comments, as the catcode for % can be changed, e.g., in
> a verbatim environment. I'll consider printing a \relax after the
> comment in tikzDevice, this should be robust and sufficient.
I haven't done any tests, but I believe the trimming only happens at the 
start and end of the output from each statement, i.e.
embedded newlines in the output from single statements will be kept, as 
between c and d in your example.  So it should be possible to avoid 
needing strip.white=false by collecting output in a character vector, 
and just cat()'ing it at the end.  I don't know if this is relevant to 
your use in tikzDevice.

Duncan Murdoch


From maechler at stat.math.ethz.ch  Fri Jan  3 18:37:32 2014
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 3 Jan 2014 18:37:32 +0100
Subject: [Rd] Sweave trims console output in "tex" mode
In-Reply-To: <52C6966B.9030305@gmail.com>
References: <52C5FEAF.5020708@ivt.baug.ethz.ch> <52C60835.8060605@gmail.com>
	<52C60A17.1040208@ivt.baug.ethz.ch> <52C60B71.3090803@gmail.com>
	<52C60C86.30702@ivt.baug.ethz.ch>
	<21190.35234.470149.759415@stat.math.ethz.ch>
	<52C6966B.9030305@gmail.com>
Message-ID: <21190.62812.358759.720694@stat.math.ethz.ch>

>>>>> Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>     on Fri, 3 Jan 2014 05:52:27 -0500 writes:

    > On 14-01-03 4:57 AM, Martin Maechler wrote:
    >>>>>>> Kirill M?ller <kirill.mueller at ivt.baug.ethz.ch> on
    >>>>>>> Fri, 3 Jan 2014 02:04:06 +0100 writes:
    >> 
    >> > On 01/03/2014 01:59 AM, Duncan Murdoch wrote: >> But
    >> results=tex is not the default.  Having defaults for >>
    >> one option depend on the setting for another is >>
    >> confusing, so I think the current setting is appropriate.
    >> 
    >> > True. On the other hand, I cannot imagine that >
    >> "results=tex" is useful at all without >
    >> "strip.white=FALSE". If the strip.white option would >
    >> auto-adjust, things would "just work". Anyway, I'm not a
    >> > very active user of Sweave.
    >> 
    >> I think in this case, it would be quite useful if
    >> strip.white got a new default, say "adaptive", which
    >> would becomde FALSE for 'results=tex'.
    >> 
    >> Otherwise, for "safety", we'd have to recommend that
    >> 'results=tex' is always combined with strip.white=FALSE,
    >> which I'd find quite inconvenient.

    > Old documents could change if you did that, and that's a
    > bad thing.

    > As I told Kirill (and as he rudely deleted when he quoted
    > me), I use results=tex frequently, and I had never noticed
    > a problem with this.  In my usage (and I'd guess in most
    > people's) I never output multiple paragraphs in paragraph
    > mode from a code chunk.  I would normally just write that
    > in the LaTeX part of the document.  The results=tex usage
    > is for the case where I am constructing complicated LaTeX
    > macros (e.g. for tables), that are too tedious to type by
    > hand.

    > I can imagine cases where I would output text in paragraph
    > mode, and I guess Kirill was trying to do that, but they
    > are rare, and it would cost less for the users of those
    > rare cases to change the strip.white default than it would
    > for everyone else to do it.

    > Duncan Murdoch

I now agree.  Thanks a lot, Duncan, for the extra statistical
information you've collected about this.

Martin Maechler


From h.wickham at gmail.com  Fri Jan  3 18:46:48 2014
From: h.wickham at gmail.com (Hadley Wickham)
Date: Fri, 3 Jan 2014 11:46:48 -0600
Subject: [Rd] class() on substitute(...) output?
In-Reply-To: <CAFDcVCS7vdmRdnqYQvb3xq5C5x7+366b_SPisQeb9oX7vWHKRw@mail.gmail.com>
References: <CAFDcVCS7vdmRdnqYQvb3xq5C5x7+366b_SPisQeb9oX7vWHKRw@mail.gmail.com>
Message-ID: <CABdHhvF+kR19Gqd-gTrZNK0k8QfuY+3QykbqD=Qwg_yP_O9sOw@mail.gmail.com>

On Thu, Jan 2, 2014 at 7:16 PM, Henrik Bengtsson <hb at biostat.ucsf.edu> wrote:
> Does it make sense to talk about the class of the output of
> substitute(...)?  I'm puzzled by the following outputs:
>
> ee <- list(
>   A = substitute( a <- 1 ),
>   B = substitute({ a <- 1 }),
>   C = substitute(( a <- 1 )),
>   D = substitute( a == 1 )
> )
>
>> t(sapply(ee, FUN=function(e) { c(typeof=typeof(e), mode=mode(e), class=class(e)) }))
>   typeof     mode   class
> A "language" "call" "<-"
> B "language" "call" "{"
> C "language" "("    "("
> D "language" "call" "call"
>
> That the mode in C is "(", is motivated in help("mode"): "that some
> calls have mode "(" which is S compatible."  However, what's the
> explanation for the different classes?  Is that intended or just
> "garbage" output?

?class has:

"Many R objects have a class attribute, a character vector giving the
names of the classes from which the object inherits. If the object
does not have a class attribute, it has an implicit class, "matrix",
"array" or the result of mode(x) (except that integer vectors have
implicit class "integer"). (Functions oldClass and oldClass<- get and
set the attribute, which can also be done directly.)"

which suggests either a bug or some tweaks are needed to the documentation.

Is there any point in ever using mode() except for S+ compatibility?
It just adds some confusing aliases on top of typeof.

Hadley

-- 
http://had.co.nz/


From pburns at pburns.seanet.com  Fri Jan  3 19:40:51 2014
From: pburns at pburns.seanet.com (Patrick Burns)
Date: Fri, 03 Jan 2014 18:40:51 +0000
Subject: [Rd] wishlist: decreasing argument to is.unsorted
Message-ID: <52C70433.20809@pburns.seanet.com>


I've just realized that it could be handy
to have a 'decreasing' argument in 'is.unsorted'.

And I'm cheekily hoping someone else will
implement it.

It is easy enough to work around (with 'rev'),
but would be less hassle with an argument.
The case I have in mind uses 'is.unsorted' in
'stopifnot'.

Pat

-- 
Patrick Burns
pburns at pburns.seanet.com
twitter: @burnsstat @portfolioprobe
http://www.portfolioprobe.com/blog
http://www.burns-stat.com
(home of:
  'Impatient R'
  'The R Inferno'
  'Tao Te Programming')


From jmc at r-project.org  Sat Jan  4 00:50:01 2014
From: jmc at r-project.org (John Chambers)
Date: Fri, 3 Jan 2014 15:50:01 -0800
Subject: [Rd] class() on substitute(...) output?
In-Reply-To: <CABdHhvF+kR19Gqd-gTrZNK0k8QfuY+3QykbqD=Qwg_yP_O9sOw@mail.gmail.com>
References: <CAFDcVCS7vdmRdnqYQvb3xq5C5x7+366b_SPisQeb9oX7vWHKRw@mail.gmail.com>
	<CABdHhvF+kR19Gqd-gTrZNK0k8QfuY+3QykbqD=Qwg_yP_O9sOw@mail.gmail.com>
Message-ID: <F17BF12E-3794-47D8-8B19-0F6229D978E5@r-project.org>


On Jan 3, 2014, at 9:46 AM, Hadley Wickham <h.wickham at gmail.com> wrote:

> On Thu, Jan 2, 2014 at 7:16 PM, Henrik Bengtsson <hb at biostat.ucsf.edu> wrote:
>> Does it make sense to talk about the class of the output of
>> substitute(...)?  I'm puzzled by the following outputs:
>> 
>> ee <- list(
>>  A = substitute( a <- 1 ),
>>  B = substitute({ a <- 1 }),
>>  C = substitute(( a <- 1 )),
>>  D = substitute( a == 1 )
>> )
>> 
>>> t(sapply(ee, FUN=function(e) { c(typeof=typeof(e), mode=mode(e), class=class(e)) }))
>>  typeof     mode   class
>> A "language" "call" "<-"
>> B "language" "call" "{"
>> C "language" "("    "("
>> D "language" "call" "call"
>> 
>> That the mode in C is "(", is motivated in help("mode"): "that some
>> calls have mode "(" which is S compatible."  However, what's the
>> explanation for the different classes?  Is that intended or just
>> "garbage" output?
> 
> ?class has:
> 
> "Many R objects have a class attribute, a character vector giving the
> names of the classes from which the object inherits. If the object
> does not have a class attribute, it has an implicit class, "matrix",
> "array" or the result of mode(x) (except that integer vectors have
> implicit class "integer"). (Functions oldClass and oldClass<- get and
> set the attribute, which can also be done directly.)"
> 
> which suggests either a bug or some tweaks are needed to the documentation.

Definitely not the former.  What happens is easy enough to see, if you follow the definition of the .Primitive.  Routine R_data_class in attrib.c does the computation.  When there is no class attribute, it supplies the definition for "matrix" and "array", turns the 3 types for functions into "function", and distinguishes among objects of type "language" to give specific classes to the syntactic functions called, such as `while`(),  `if`(), etc.

It does seem that the documentation should say something similar.

John

> 
> Is there any point in ever using mode() except for S+ compatibility?
> It just adds some confusing aliases on top of typeof.
> 
> Hadley
> 
> -- 
> http://had.co.nz/
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From hpages at fhcrc.org  Sat Jan  4 01:22:14 2014
From: hpages at fhcrc.org (=?ISO-8859-1?Q?Herv=E9_Pag=E8s?=)
Date: Fri, 03 Jan 2014 16:22:14 -0800
Subject: [Rd] ordering of raw vectors
Message-ID: <52C75436.1070906@fhcrc.org>

Hi,

Found in the man page for max(), min(), pmax(), pmin(), etc...:

   (Note that all versions fail for raw and complex vectors since
   these have no ordering.)

It seems that raw vectors *do* have an ordering (why wouldn't they?):

   > x <- as.raw(0:8)
   > x
   [1] 00 01 02 03 04 05 06 07 08
   > x < x[5]
   [1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE

and also:

   > which.max(x)
   [1] 9
   > which.min(x)
   [1] 1

This is the R 3.0 series and current R devel.

If for whatever reason max(), min(), pmax(), pmin(), etc... cannot
be made to work on raw vectors, it would be nice to see the man page
modified to say just something like "raw vectors are not supported".

Also there is no reason why order(), sort(), rank(), etc... couldn't
work on raw vectors.

Another inconsistency of the same kind is that character vectors
also have an ordering but which.min() and which.max() don't work
properly on them:

   > y <- sample(letters)
   > max(y)
   [1] "z"
   > which.max(y)
   integer(0)
   Warning message:
   In which.max(y) : NAs introduced by coercion

It seems that some of these inconsistencies could be avoided by having
all these functions and operators share more code internally.

Cheers,
H.

-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fhcrc.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From csardi.gabor at gmail.com  Sat Jan  4 01:24:07 2014
From: csardi.gabor at gmail.com (=?ISO-8859-1?B?R+Fib3IgQ3PhcmRp?=)
Date: Fri, 3 Jan 2014 19:24:07 -0500
Subject: [Rd] wishlist: decreasing argument to is.unsorted
In-Reply-To: <52C70433.20809@pburns.seanet.com>
References: <52C70433.20809@pburns.seanet.com>
Message-ID: <CABtg=KkRH-BRQsEcBcFwU6saa_fUYbpwDkaiRx=7yjA6hdanvw@mail.gmail.com>

While we are here, how about an is.sorted() function? It is trivial
and helps readability a lot imho. Then one does not have to write
things like

stopifnot(!is.unsorted(x))

but can write

stopifnot(is.sorted(x))

instead.

Gabor

On Fri, Jan 3, 2014 at 1:40 PM, Patrick Burns <pburns at pburns.seanet.com> wrote:
>
> I've just realized that it could be handy
> to have a 'decreasing' argument in 'is.unsorted'.
>
> And I'm cheekily hoping someone else will
> implement it.
>
> It is easy enough to work around (with 'rev'),
> but would be less hassle with an argument.
> The case I have in mind uses 'is.unsorted' in
> 'stopifnot'.
>
> Pat
>
> --
> Patrick Burns
> pburns at pburns.seanet.com
> twitter: @burnsstat @portfolioprobe
> http://www.portfolioprobe.com/blog
> http://www.burns-stat.com
> (home of:
>  'Impatient R'
>  'The R Inferno'
>  'Tao Te Programming')
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From hpages at fhcrc.org  Sat Jan  4 02:02:31 2014
From: hpages at fhcrc.org (=?windows-1252?Q?Herv=E9_Pag=E8s?=)
Date: Fri, 03 Jan 2014 17:02:31 -0800
Subject: [Rd] substring() and propagation of names
In-Reply-To: <52AACE5D.2040409@fhcrc.org>
References: <52AACE5D.2040409@fhcrc.org>
Message-ID: <52C75DA7.5040606@fhcrc.org>

On 12/13/2013 01:07 AM, Herv? Pag?s wrote:
> Hi,
>
> In R < 3.0.0, we used to get:
>
>    > substring(c(A="abcdefghij", B="123456789"), 2, 6:2)
>          A       B       A       B       A
>    "bcdef"  "2345"   "bcd"    "23"     "b"
>
> But in R >= 3.0.0, we get:
>
>    > substring(c(A="abcdefghij", B="123456789"), 2, 6:2)
>    [1] "bcdef" "2345"  "bcd"   "23"    "b"
>
> The names are not propagated anymore.

Looks like a regression introduced at commit 59891 where many functions
were modified to use rep_len() instead of rep() internally. Problem is,
unlike rep(), rep_len() does not propagate the names. Given the number
of files that were touched by this commit, a lot of functions could be
affected. For example complex():

   In R < 3.0.0:

     > complex(modulus=c(a=-1, b=0.77))
            a        b
     -1.00+0i  0.77+0i

   But in R >= 3.0.0:

     > complex(modulus=c(a=-1, b=0.77))
     [1] -1.00+0i  0.77+0i

etc...

Cheers,
H.

>
> Is this an intended change or a bug? I can't find anything about
> this in the NEWS file. The man page for substring() in R >= 3.0.0
> still states:
>
>    Value:
>
>       ...
>
>       For ?substring?, a character vector of length the longest of the
>       arguments.  This will have names taken from ?x? (if it has any
>       after coercion, repeated as needed), and other attributes copied
>       from ?x? if it is the longest of the arguments).
>
> Also note that the first argument of substring() is 'text' not 'x'.
>
> Thanks,
> H.
>

-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fhcrc.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From seanpor at acm.org  Sat Jan  4 08:58:58 2014
From: seanpor at acm.org (Sean O'Riordain)
Date: Sat, 4 Jan 2014 07:58:58 +0000
Subject: [Rd] wishlist: decreasing argument to is.unsorted
In-Reply-To: <CABtg=KkRH-BRQsEcBcFwU6saa_fUYbpwDkaiRx=7yjA6hdanvw@mail.gmail.com>
References: <52C70433.20809@pburns.seanet.com>
	<CABtg=KkRH-BRQsEcBcFwU6saa_fUYbpwDkaiRx=7yjA6hdanvw@mail.gmail.com>
Message-ID: <CA+MmmT+vunQ743FTnfQCQBb7gfXKveV5CL1NCER-m7pwV2ejfg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140104/34f702fc/attachment.pl>

From baronshtam at lightminersystems.com  Sun Jan  5 21:18:06 2014
From: baronshtam at lightminersystems.com (Boris Aronshtam)
Date: Sun, 5 Jan 2014 20:18:06 +0000
Subject: [Rd] Support for long arrays
Message-ID: <9D80368C6A00834189C1982FB64EFA3007EE9002@ORD2MBX07C.mex05.mlsrvr.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140105/ddb4c3b6/attachment.pl>

From murdoch.duncan at gmail.com  Sun Jan  5 21:41:18 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 05 Jan 2014 15:41:18 -0500
Subject: [Rd] Support for long arrays
In-Reply-To: <9D80368C6A00834189C1982FB64EFA3007EE9002@ORD2MBX07C.mex05.mlsrvr.com>
References: <9D80368C6A00834189C1982FB64EFA3007EE9002@ORD2MBX07C.mex05.mlsrvr.com>
Message-ID: <52C9C36E.6030903@gmail.com>

On 14-01-05 3:18 PM, Boris Aronshtam wrote:
> My machine has hundreds of GB of RAM.  Is there a way to create an array having more than 2 Billion (2^31) rows?

Not currently.  Individual dimensions are limited to signed 32 bit 
values.  The overall count of elements is limited to 2^52 or so.

Duncan Murdoch

>
> I am trying to create a large array using:
>
> d = c(1e+10,2)
> a=array(0,d)
>
> This results in the error:
>
> Error in array(0, d) : negative length vectors are not allowed
> In addition: Warning message:
> In array(0, d) : NAs introduced by coercion
>
> Note that I can create a vector of the same large size:
>
> v=c(1:2e+10)
>
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From jayemerson at gmail.com  Mon Jan  6 13:37:15 2014
From: jayemerson at gmail.com (Jay Emerson)
Date: Mon, 6 Jan 2014 07:37:15 -0500
Subject: [Rd] Support for long arrays
Message-ID: <CALbRwZY0tiV-wgBgyZxk9udm=icfb4wY4R9V69Mfya9nZnwAwg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140106/0ccf6424/attachment.pl>

From hintak_leung at yahoo.co.uk  Mon Jan  6 15:54:14 2014
From: hintak_leung at yahoo.co.uk (Hin-Tak Leung)
Date: Mon, 06 Jan 2014 14:54:14 +0000
Subject: [Rd] The URL for the replacement dll/so bundle - Re: 2 bugs in R's
 grDevices, and fixes.
In-Reply-To: <52CAC16A.3000509@users.sourceforge.net>
References: <52CAC16A.3000509@users.sourceforge.net>
Message-ID: <52CAC396.2040705@yahoo.co.uk>

Hin-Tak Leung wrote:
...
> Somewhat related, I have finally gotten round to make two small bundles,
> which replace the small cairo.dll/cairo.so' in the official
> windows or Mac R binaries, to fix quite a few problems with them,
> the first of which was reported almost a year ago. Just move the two
> small files in the official binaries aside and replace them by these:
>
> R-2.15.3-library-grDevices-libs-winCairo.zip
> R.framework-Versions-2.15-Resources-library-grDevices-libs-cairo.tgz
>
> The windows dlls had been tested and verified to fix the original
> problem. BTW, it is quite a challenge to try to plot
> R graphs with non-latin texts using English windows. (also posted).
> I'll post the test results for Mac OS X when I get round to it. Those
> should be easier to do.
>
> YMMV. The move/rename can always be reverted if things don't work out.
...

Forgot to put the URL in.
http://sourceforge.net/projects/outmodedbonsai/files/R/

The constituting library bundles are a bit further.


From baronshtam at lightminersystems.com  Mon Jan  6 22:12:20 2014
From: baronshtam at lightminersystems.com (Boris Aronshtam)
Date: Mon, 6 Jan 2014 21:12:20 +0000
Subject: [Rd] Support for long arrays
In-Reply-To: <CALbRwZY0tiV-wgBgyZxk9udm=icfb4wY4R9V69Mfya9nZnwAwg@mail.gmail.com>
References: <CALbRwZY0tiV-wgBgyZxk9udm=icfb4wY4R9V69Mfya9nZnwAwg@mail.gmail.com>
Message-ID: <9D80368C6A00834189C1982FB64EFA3007EE9059@ORD2MBX07C.mex05.mlsrvr.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140106/0d5fb720/attachment.pl>

From murdoch.duncan at gmail.com  Mon Jan  6 22:51:36 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 06 Jan 2014 16:51:36 -0500
Subject: [Rd] Support for long arrays
In-Reply-To: <9D80368C6A00834189C1982FB64EFA3007EE9059@ORD2MBX07C.mex05.mlsrvr.com>
References: <CALbRwZY0tiV-wgBgyZxk9udm=icfb4wY4R9V69Mfya9nZnwAwg@mail.gmail.com>
	<9D80368C6A00834189C1982FB64EFA3007EE9059@ORD2MBX07C.mex05.mlsrvr.com>
Message-ID: <52CB2568.8070703@gmail.com>

On 14-01-06 4:12 PM, Boris Aronshtam wrote:
> Jay, Duncan,
>
> Thank you for your replies.
>
> The confusing part for me is that vector allows large indices, while array does not allow.

See section 12 of the R Internals manual for a discussion of the issues.

>
> Also, is there an estimate when R would support long arrays?

Not as far as I know.

Duncan Murdoch

>
> Thanks,
> Boris
>
> From: Jay Emerson [mailto:jayemerson at gmail.com]
> Sent: Monday, January 06, 2014 4:37 AM
> To: r-devel at r-project.org; Boris Aronshtam
> Subject: re: [Rd] Support for long arrays
>
>
> You could look at some extension packages, bigmemory for example.  A recent paper http://www.jstatsoft.org/v55/i14 (though for more developer-level capabilities you would need to look at the package itself).  Although the big.matrix objects can't be used seamlessly as if they were matrices, they do help get over some hurdles.  Other packages include bigalgebra may be helpful.
>
> Jay
>
>
>> I am trying to create a large array using:
>>
>> d = c(1e+10,2)
>> a=array(0,d)
>>
>> This results in the error:
>
> --
> John W. Emerson (Jay)
> Associate Professor of Statistics, Adjunct, and Director of Graduate Studies
> Department of Statistics
> Yale University
> http://www.stat.yale.edu/~jay
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From hintak_leung at yahoo.co.uk  Mon Jan  6 15:54:14 2014
From: hintak_leung at yahoo.co.uk (Hin-Tak Leung)
Date: Mon, 6 Jan 2014 14:54:14 +0000
Subject: [Rd] [R] The URL for the replacement dll/so bundle - Re: 2 bugs in
 R's grDevices, and fixes. [SCL:4]
In-Reply-To: <52CAC16A.3000509@users.sourceforge.net>
References: <52CAC16A.3000509@users.sourceforge.net>
Message-ID: <52CAC396.2040705@yahoo.co.uk>

Hin-Tak Leung wrote:
...
> Somewhat related, I have finally gotten round to make two small bundles,
> which replace the small cairo.dll/cairo.so' in the official
> windows or Mac R binaries, to fix quite a few problems with them,
> the first of which was reported almost a year ago. Just move the two
> small files in the official binaries aside and replace them by these:
>
> R-2.15.3-library-grDevices-libs-winCairo.zip
> R.framework-Versions-2.15-Resources-library-grDevices-libs-cairo.tgz
>
> The windows dlls had been tested and verified to fix the original
> problem. BTW, it is quite a challenge to try to plot
> R graphs with non-latin texts using English windows. (also posted).
> I'll post the test results for Mac OS X when I get round to it. Those
> should be easier to do.
>
> YMMV. The move/rename can always be reverted if things don't work out.
...

Forgot to put the URL in.
http://sourceforge.net/projects/outmodedbonsai/files/R/

The constituting library bundles are a bit further.

______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From hb at biostat.ucsf.edu  Tue Jan  7 01:24:30 2014
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Mon, 6 Jan 2014 16:24:30 -0800
Subject: [Rd] file.info() on a file.symlink():ed file on Windows - is help
	correct?
Message-ID: <CAFDcVCQip9hs15kz4Tk7C+G+-D32MoCLCDKZn2oj8nm0qdrpdA@mail.gmail.com>

Is the following passage from help("file.info"):

"Junction points and symbolic links are followed, so information is
given about the file/directory to which the link points rather than
about the link."

correct?  Could it be that Windows was not considered?
help("file.symlink") mentions several Windows-related issues, but none
of those are related to the following.  On Windows 7 with a NTFS file
system I get that file.info() returns information about the symbolic
link rather than the file it points to.


REPRODUCIBLE EXAMPLE:

# Create a file
> cat("Hello", file="foo.txt")
> file.info("foo.txt")
        size isdir mode               mtime
foo.txt    5 FALSE  666 2014-01-06 15:53:27
                      ctime               atime exe
foo.txt 2014-01-06 15:43:07 2014-01-06 15:43:07  no
> bfr <- readChar("foo.txt", n=9)


# Create a symbolic link
> file.symlink("foo.txt", "link.exe")
TRUE
> file.info("link.exe")
         size isdir mode               mtime
link.exe    0 FALSE  777 2014-01-06 15:59:55
                       ctime               atime   exe
link.exe 2014-01-06 15:59:55 2014-01-06 15:59:55 msdos

> bfrL <- readChar("link.exe", n=9)
> stopifnot(identical(bfrL, bfr))


Note how file.info("link.exe")$size is 0 (zero) and none (except from
'dir') mirrors the file that the link points to.  I've verified that
'link.exe' is a symbolic link (and not a hard link); Windows reports
('dir' gives "01/06/2014  03:59 PM    <SYMLINK>      link.exe
[foo.txt]").

As a follow up, if the above is the proper/intended behavior of
file.info(), is it possible from within R to follow the link
"link.exe" to the target file "foo.txt" - such that one can get the
file.info() of that file instead?  (As help("Sys.readlink") says, it
won't work on Windows).

Thank you,

Henrik

> sessionInfo()
R Under development (unstable) (2014-01-05 r64665)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252
[2] LC_CTYPE=English_United States.1252
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets
[6] methods   base

loaded via a namespace (and not attached):
[1] tools_3.1.0


From georgeost at gmail.com  Tue Jan  7 02:48:22 2014
From: georgeost at gmail.com (George Ostrouchov)
Date: Mon, 06 Jan 2014 20:48:22 -0500
Subject: [Rd] Support for long arrays
In-Reply-To: <mailman.11.1389006004.25165.r-devel@r-project.org>
References: <mailman.11.1389006004.25165.r-devel@r-project.org>
Message-ID: <52CB5CE6.9080301@gmail.com>

With that much RAM, you probably have many cores. Consider splitting 
your long array across several R sessions with distributed parallel 
processing so that no one segment is over the limit. You will likely 
need the parallel processing anyway to make your computation time 
tolerable. See the pbdDEMO package and the rest of pbdR packages (see 
r-pbd.org).

Cheers,
George

On 1/6/14 6:00 AM, r-devel-request at r-project.org wrote:
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Sun, 5 Jan 2014 20:18:06 +0000
> From: Boris Aronshtam <baronshtam at lightminersystems.com>
> To: "r-devel at r-project.org" <r-devel at r-project.org>
> Cc: Boris Aronshtam <baronshtam at lightminersystems.com>
> Subject: [Rd] Support for long arrays
> Message-ID:
> 	<9D80368C6A00834189C1982FB64EFA3007EE9002 at ORD2MBX07C.mex05.mlsrvr.com>
> Content-Type: text/plain
>
> My machine has hundreds of GB of RAM.  Is there a way to create an array having more than 2 Billion (2^31) rows?
>
> I am trying to create a large array using:
>
> d = c(1e+10,2)
> a=array(0,d)
>
> This results in the error:
>
> Error in array(0, d) : negative length vectors are not allowed
> In addition: Warning message:
> In array(0, d) : NAs introduced by coercion
>
> Note that I can create a vector of the same large size:
>
> v=c(1:2e+10)
>
>
>
> 	[[alternative HTML version deleted]]
>
>
>
> ------------------------------
>
> Message: 2
> Date: Sun, 05 Jan 2014 15:41:18 -0500
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> To: Boris Aronshtam <baronshtam at lightminersystems.com>,
> 	"r-devel at r-project.org" <r-devel at r-project.org>
> Subject: Re: [Rd] Support for long arrays
> Message-ID: <52C9C36E.6030903 at gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> On 14-01-05 3:18 PM, Boris Aronshtam wrote:
>> My machine has hundreds of GB of RAM.  Is there a way to create an array having more than 2 Billion (2^31) rows?
> Not currently.  Individual dimensions are limited to signed 32 bit
> values.  The overall count of elements is limited to 2^52 or so.
>
> Duncan Murdoch
>
>> I am trying to create a large array using:
>>
>> d = c(1e+10,2)
>> a=array(0,d)
>>
>> This results in the error:
>>
>> Error in array(0, d) : negative length vectors are not allowed
>> In addition: Warning message:
>> In array(0, d) : NAs introduced by coercion
>>
>> Note that I can create a vector of the same large size:
>>
>> v=c(1:2e+10)
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
>
> ------------------------------
>


From htl10 at users.sourceforge.net  Mon Jan  6 15:44:58 2014
From: htl10 at users.sourceforge.net (Hin-Tak Leung)
Date: Mon, 06 Jan 2014 14:44:58 +0000
Subject: [Rd] 2 bugs in R's grDevices, and fixes.
Message-ID: <52CAC16A.3000509@users.sourceforge.net>

Just before the holiday, I asked the freetype developers what is the context
of these two comments about freetype in the code of R's grDevices:

======= R/src/library/grDevices/src/cairo/cairoFns.c around line 720 =====
		/* some FreeType versions have broken index support,
		   fall back to index 0 */
		if (!FT_New_Face(ft_library,
				 (const char *) file, index, &face) ||
		    (index && !FT_New_Face(ft_library,
					   (const char *) file, 0, &face))) {
		    FcFontSetDestroy (fs);

#ifdef __APPLE__
		    /* FreeType is broken on OS X in that face index
		       is often wrong (unfortunately even for Helvetica!)
		       - we try to find the best match through enumeration.
		       And italic and bold are swapped */
		    if (style == 2) style = 1; else if (style == 1) style = 2;
==========================================================================

It turned out that the R developers are accumulating a few mistakes,
which over the years gradually "somewhat" cancel each others out, at
the expenses of other applications misbehaving on Mac OS X.

Freetype is shipped with, and part of Mac OS X.
The bottom line is that there are two ways of building freetype on Mac OS X,
one against the Carbon API (i.e. Mac OS Classic), and the other against
the POSIX API(i.e. modern unix systems). Apple have always shipped the
Carbon build.

The "problem", or "broken" issues experienced by R users are because
the official binary of R has a private copy of freetype, and also
that is built differently from Apple's. The two copies both read and write
the public fontconfig's cache for fonts' metadata, with unpredictable
results to any application that uses fonts - which basically means every
GUI-based application.

The two builds differ by the "--with-old-mac-fonts" option, which
"allow Mac resource-based fonts to be used". They differ also on treatments
of dfonts (an intermediate font format from the transition of
Classic to X). Helvetica, Times, Courier, Geneva, Monaco are still currently
shipped as dfonts on Mac OS X.

Here are the two correct ways of doing things:

1. put either build in /usr/local, and use just one of it dynamically,
    for everything.

2. if a private copy of freetype needs to be bundled, and that this
    private copy interacts with the public font cache, it has to be
    a Carbon build.

The freetype developers also kindly offer a 3rd option
- e2d2b1544f24413fa62e0c845184b429eb227e9d -
made on 27th Dec, to make the POSIX build matches the behavior of
the Carbon build on caching dfonts. For those unfortunate people
who alternate between using different builds on a daily or even hourly
basis, forced upon them by application binary builders.

Somewhat related, I have finally gotten round to make two small bundles,
which replace the small cairo.dll/cairo.so' in the official
windows or Mac R binaries, to fix quite a few problems with them,
the first of which was reported almost a year ago. Just move the two
small files in the official binaries aside and replace them by these:

R-2.15.3-library-grDevices-libs-winCairo.zip
R.framework-Versions-2.15-Resources-library-grDevices-libs-cairo.tgz

The windows dlls had been tested and verified to fix the original
problem. BTW, it is quite a challenge to try to plot
R graphs with non-latin texts using English windows. (also posted).
I'll post the test results for Mac OS X when I get round to it. Those
should be easier to do.

YMMV. The move/rename can always be reverted if things don't work out.

The code mentioned above at the begining should be removed (and was
removed before building the bundle). It penalizes some mac R users who
build R himself/herself to end up with a broken build.


From markus.mueller.1.g at gmail.com  Tue Jan  7 20:40:24 2014
From: markus.mueller.1.g at gmail.com (=?UTF-8?Q?Markus_M=C3=BCller?=)
Date: Tue, 7 Jan 2014 20:40:24 +0100
Subject: [Rd] Why do methods of "initialize" have no "srcref" attribute as
	other S4 mehtods?
Message-ID: <CAOAQ5sqk3BxSh=hzB5Z-uSVLEdNbkDqSwrj7BwBzaGi+j6Tn8Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140107/a5d9539a/attachment.pl>

From murdoch.duncan at gmail.com  Wed Jan  8 01:11:35 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 07 Jan 2014 19:11:35 -0500
Subject: [Rd] Why do methods of "initialize" have no "srcref" attribute
 as other S4 mehtods?
In-Reply-To: <CAOAQ5sqk3BxSh=hzB5Z-uSVLEdNbkDqSwrj7BwBzaGi+j6Tn8Q@mail.gmail.com>
References: <CAOAQ5sqk3BxSh=hzB5Z-uSVLEdNbkDqSwrj7BwBzaGi+j6Tn8Q@mail.gmail.com>
Message-ID: <52CC97B7.8080308@gmail.com>

On 14-01-07 2:40 PM, Markus M?ller wrote:
> For documentation we use a system that generates Rd files from special
> comments in the code. (inlinedocs).
> It is crucial to be able to get the defining source code for objects like
> methods to extract the comments from it.
>
> Here is an R session that shows how this works for several kinds of methods
> and (at the end of the session) how if fails for methods of "initialize"
>
>> require("methods")
>> setGeneric( "myGen",function(arg){standardGeneric("myGen")})
> [1] "myGen"
>> setMethod(
> +   f="myGen",
> +   signature="numeric",
> +   definition=function # a function with comments in its source
> +     ### that are used to document it with inlinedocs
> +     (arg ##<< another special comment for the argument
> +     ){
> +       2*arg
> +       ### a description for the return value
> +     }
> + )
> [1] "myGen"
>
> we can get the whole function definition with comments back
> by the following snippet:
>> attr(getMethod("myGen","numeric"),"srcref")
> function # a function with comments in its source
>      ### that are used to document it with inlinedocs
>      (arg ##<< another special comment for the argument
>      ){
>        2*arg
>        ### a description for the return value
>      }
>>
>
> this also works for operators
>
>> setMethod("$",
> +     signature(x = "MyClass"),
> +     function
> +     (x,   ##<< first arg
> +      name ##<< second ag
> +      ) { }
> + )
> [1] "$"
>> attr(getMethod("$","MyClass"),"srcref")
> function
>      (x,   ##<< first arg
>       name ##<< second ag
>       ) { }
>>
>> setClass(
> +    Class="MyClass",
> +    representation(
> +    val="numeric"
> +    )
> + )
>
> It works also for other functions already defined:
>
>> setGeneric("plot")
> [1] "plot"
>> setMethod("plot",
> +     signature(x = "MyClass"),
> +     function # a comment
> +     (x, y, ...)
> +     {
> +         stop("need a definition for the method here")
> +     }
> + )
> [1] "plot"
>> attr(getMethod("plot","MyClass"),"srcref")
> function # a comment
>      (x, y, ...)
>      {
>          stop("need a definition for the method here")
>      }
>>
>
> However if we overload initialize there is no "srcref" attribute:
>
>> setMethod(
> +     f="initialize",
> +     signature="MyClass",
> +     definition=function # here are also comments but we can not retrieve
> them
> +     (.Object,value){
> +       .Object at val<- value
> +       return(.Object)
> +     }
> + )
> [1] "initialize"
>>
>> attr(getMethod("initialize","MyClass"),"srcref")
> NULL
>
> Is there a reason for this behavior, and more important still,
> Ist there a way to get at the source of my constructors to document them
> automatically?

I don't know the why of the design, but the comments are there, just not 
where you were looking.  You can get them as follows:

f <- getMethod("initialize", "MyClass")
getSrcref(unRematchDefinition(f))

This should work for the other cases too, where unRematchDefinition does 
nothing.  I don't know if there are any cases where it will fail, but if 
there are, please let me know.

Probably the getSrcref function should do this automatically when it 
sees that f is a method definition, but I'll wait to hear if it's the 
wrong approach.

Duncan Murdoch


From markus.mueller.1.g at gmail.com  Wed Jan  8 12:51:43 2014
From: markus.mueller.1.g at gmail.com (=?UTF-8?Q?Markus_M=C3=BCller?=)
Date: Wed, 8 Jan 2014 12:51:43 +0100
Subject: [Rd] Why do methods of "initialize" have no "srcref" attribute
 as other S4 mehtods?
In-Reply-To: <52CC97B7.8080308@gmail.com>
References: <CAOAQ5sqk3BxSh=hzB5Z-uSVLEdNbkDqSwrj7BwBzaGi+j6Tn8Q@mail.gmail.com>
	<52CC97B7.8080308@gmail.com>
Message-ID: <CAOAQ5srxggq=XJ3snuW5x_1bYa_=qcTHuJTi_0h0X9psX5Lp3Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140108/0f08bdc8/attachment.pl>

From mtalbert at usgs.gov  Wed Jan  8 21:43:10 2014
From: mtalbert at usgs.gov (Marian Talbert)
Date: Wed, 8 Jan 2014 12:43:10 -0800 (PST)
Subject: [Rd] CRAN rejects package because of write statement in Fortran
Message-ID: <1389213790688-4683287.post@n4.nabble.com>

I recently developed an R package to make available a very large legacy
program written in Fortran.  My package has been rejected by CRAN due to
this Write statement with the message "As 'Writing R Extensions' warns you
against including Fortran I/O, this will not be allowed." 

The issue is that this Write statement does not involve I/O it is inernally
writing an integer to a character which is then placed in an appropriate
message (character string) passed to the error handling function recommened
in writing R extensions rexit(message).  I'm working with a very large
legacy program which was developed over 16 years and I am reluctant to
rewrite the entire error handling sections in R.  I was wondering if anyone
has gotten CRAN to accept a package with a Fortran write statement
converting numbers to characters or if anyone has found another method for
doing type conversion in Fortran without the "write" statement.  Thanks for
your help

Marian  




--
View this message in context: http://r.789695.n4.nabble.com/CRAN-rejects-package-because-of-write-statement-in-Fortran-tp4683287.html
Sent from the R devel mailing list archive at Nabble.com.


From murdoch.duncan at gmail.com  Wed Jan  8 22:07:22 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 08 Jan 2014 16:07:22 -0500
Subject: [Rd] Why do methods of "initialize" have no "srcref" attribute
 as other S4 mehtods?
In-Reply-To: <CAOAQ5srxggq=XJ3snuW5x_1bYa_=qcTHuJTi_0h0X9psX5Lp3Q@mail.gmail.com>
References: <CAOAQ5sqk3BxSh=hzB5Z-uSVLEdNbkDqSwrj7BwBzaGi+j6Tn8Q@mail.gmail.com>	<52CC97B7.8080308@gmail.com>
	<CAOAQ5srxggq=XJ3snuW5x_1bYa_=qcTHuJTi_0h0X9psX5Lp3Q@mail.gmail.com>
Message-ID: <52CDBE0A.1090305@gmail.com>

On 14-01-08 6:51 AM, Markus M?ller wrote:
> Thank You very much. This is a great help.
> I would never ever have thought of either unRematchDefinition or getSrcref.
> I will incorporate this new insight and report about any further
> discoveries (or problems leading to them ;-))

After thinking about this a while, I decided that it's really a bug that 
getSrcref didn't do this automatically.  So now it does (in R-patched 
and R-devel).

Duncan Murdoch

>
> Thanks again
> Markus
>
>
> 2014/1/8 Duncan Murdoch <murdoch.duncan at gmail.com
> <mailto:murdoch.duncan at gmail.com>>
>
>     On 14-01-07 2:40 PM, Markus M?ller wrote:
>
>         For documentation we use a system that generates Rd files from
>         special
>         comments in the code. (inlinedocs).
>         It is crucial to be able to get the defining source code for
>         objects like
>         methods to extract the comments from it.
>
>         Here is an R session that shows how this works for several kinds
>         of methods
>         and (at the end of the session) how if fails for methods of
>         "initialize"
>
>             require("methods")
>             setGeneric( "myGen",function(arg){__standardGeneric("myGen")})
>
>         [1] "myGen"
>
>             setMethod(
>
>         +   f="myGen",
>         +   signature="numeric",
>         +   definition=function # a function with comments in its source
>         +     ### that are used to document it with inlinedocs
>         +     (arg ##<< another special comment for the argument
>         +     ){
>         +       2*arg
>         +       ### a description for the return value
>         +     }
>         + )
>         [1] "myGen"
>
>         we can get the whole function definition with comments back
>         by the following snippet:
>
>             attr(getMethod("myGen","__numeric"),"srcref")
>
>         function # a function with comments in its source
>               ### that are used to document it with inlinedocs
>               (arg ##<< another special comment for the argument
>               ){
>                 2*arg
>                 ### a description for the return value
>               }
>
>
>
>         this also works for operators
>
>             setMethod("$",
>
>         +     signature(x = "MyClass"),
>         +     function
>         +     (x,   ##<< first arg
>         +      name ##<< second ag
>         +      ) { }
>         + )
>         [1] "$"
>
>             attr(getMethod("$","MyClass"),__"srcref")
>
>         function
>               (x,   ##<< first arg
>                name ##<< second ag
>                ) { }
>
>
>             setClass(
>
>         +    Class="MyClass",
>         +    representation(
>         +    val="numeric"
>         +    )
>         + )
>
>         It works also for other functions already defined:
>
>             setGeneric("plot")
>
>         [1] "plot"
>
>             setMethod("plot",
>
>         +     signature(x = "MyClass"),
>         +     function # a comment
>         +     (x, y, ...)
>         +     {
>         +         stop("need a definition for the method here")
>         +     }
>         + )
>         [1] "plot"
>
>             attr(getMethod("plot","__MyClass"),"srcref")
>
>         function # a comment
>               (x, y, ...)
>               {
>                   stop("need a definition for the method here")
>               }
>
>
>
>         However if we overload initialize there is no "srcref" attribute:
>
>             setMethod(
>
>         +     f="initialize",
>         +     signature="MyClass",
>         +     definition=function # here are also comments but we can
>         not retrieve
>         them
>         +     (.Object,value){
>         +       .Object at val<- value
>         +       return(.Object)
>         +     }
>         + )
>         [1] "initialize"
>
>
>             attr(getMethod("initialize","__MyClass"),"srcref")
>
>         NULL
>
>         Is there a reason for this behavior, and more important still,
>         Ist there a way to get at the source of my constructors to
>         document them
>         automatically?
>
>
>     I don't know the why of the design, but the comments are there, just
>     not where you were looking.  You can get them as follows:
>
>     f <- getMethod("initialize", "MyClass")
>     getSrcref(unRematchDefinition(__f))
>
>     This should work for the other cases too, where unRematchDefinition
>     does nothing.  I don't know if there are any cases where it will
>     fail, but if there are, please let me know.
>
>     Probably the getSrcref function should do this automatically when it
>     sees that f is a method definition, but I'll wait to hear if it's
>     the wrong approach.
>
>     Duncan Murdoch
>
>
>


From hb at biostat.ucsf.edu  Thu Jan  9 03:47:25 2014
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Wed, 8 Jan 2014 18:47:25 -0800
Subject: [Rd] Building R on Windows: mkdir of Rtools creates directories
 with read-only permissions [WEIRD]
Message-ID: <CAFDcVCQbRXFGJz19M4=7NSU0uYLYDA0Yrn=Endjgn=LtGM35aw@mail.gmail.com>

This is is an issue that bugged me for a while.  I encountered a year
ago (April 2012) when I first tried to build R from source on Windows.
 I never figured out what the solution is or if I'm doing something
wrong myself (but I have found a tedious workaround).  I'm still on
the same Windows 7 Ultimate machine with NTFS, but I now made sure I
started from scratch so I have a completely fresh setup (see details
at the end).

PROBLEM:
At the very first step I do:

C:\R\src\gnuwin32>make all
[... Waiting. No errors until ...]
cp R.dll ../../bin/i386
-------- Building ../../../bin/i386/Rblas.dll --------
gcc -std=gnu99  -shared  -o ../../../bin/i386/Rblas.dll blas.o
cmplxblas.o ../../gnuwin32/dllversion.o Rblas.def -L../../../bin/i386
-lR -lgfortran
c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lR
collect2: ld returned 1 exit status
make[2]: *** [../../../bin/i386/Rblas.dll] Error 1
make[1]: *** [Rblas] Error 2
make: *** [rbuild] Error 2

However:

C:\R\src\gnuwin32>dir ..\..\bin\i386\
 Volume in drive C is Windows7_OS
 Volume Serial Number is E038-51CC

 Directory of C:\R\bin\i386

01/08/2014  06:18 PM    <DIR>          .
01/08/2014  06:18 PM    <DIR>          ..
01/08/2014  06:18 PM         3,059,712 R.dll
01/08/2014  06:18 PM           348,995 Rgraphapp.dll
01/08/2014  06:18 PM           102,975 Riconv.dll
01/08/2014  06:18 PM           154,917 Rzlib.dll
               4 File(s)      3,666,599 bytes
               2 Dir(s)  22,424,739,840 bytes free

What's weird is that these files have **read permission disabled**:

C:\R\src\gnuwin32>file ..\..\bin\i386\*.dll
..\..\bin\i386\R.dll:         writable, executable, regular file, no
read permission
..\..\bin\i386\Rgraphapp.dll: writable, executable, regular file, no
read permission
..\..\bin\i386\Riconv.dll:    writable, executable, regular file, no
read permission
..\..\bin\i386\Rzlib.dll:     writable, executable, regular file, no
read permission

What is going on?  Have anyone else seen this?  I've also tried
running as Administrator - no difference.



TROUBLESHOOTING / WORKAROUND:
It appears that 'mkdir' (of Rtools) causes this problem, because if I
manually pre-create 'C:\R\src\gnuwin32\bin\i386' using Windows' mkdir
it works, e.g.

C:\R\src\gnuwin32>rm -fR ..\..\bin\
C:\R\src\gnuwin32>cmd /C mkdir ..\..\bin\i386
C:\R\src\gnuwin32>make rbuild
[...]
-------- Building ../../../bin/i386/Rblas.dll --------
gcc -std=gnu99  -shared  -o ../../../bin/i386/Rblas.dll blas.o
cmplxblas.o ../../gnuwin32/dllversion.o Rblas.def -L../../../bin/i386
-lR -lgfortran
make --no-print-directory -C front-ends
mkdir -p ../../../bin/i386
cp Rgui.exe ../../../bin/i386/Rgui.exe
mkdir -p ../../../bin/i386
cp Rterm.exe ../../../bin/i386/Rterm.exe
mkdir -p ../../../bin/i386
cp Rcmd.exe ../../../bin/i386/Rcmd.exe
mkdir -p ../../../bin/i386
cp RSetReg.exe ../../../bin/i386/RSetReg.exe
mkdir -p ../../../bin/i386
cp R.exe ../../../bin/i386/R.exe
mkdir -p ../../../bin/i386
cp Rscript.exe ../../../bin/i386/Rscript.exe
mkdir -p ../../../bin/i386
cp open.exe ../../../bin/i386/open.exe
mkdir -p ../../../bin
cp Rfe.exe ../../../bin/R.exe
mkdir -p ../../../bin
cp Rfe.exe ../../../bin/Rscript.exe
make[1]: `COPYRIGHTS' is up to date.
make --no-print-directory -C ../modules -f Makefile.win \
  CFLAGS='-O3 -Wall -pedantic -mtune=core2' FFLAGS='-O3 -mtune=core2'
gcc -std=gnu99  -shared -s -o ../../../bin/i386/Rlapack.dll dlamch.o
dlapack.o cmplx.o init_win.o Rlapackrc.o -L../../../bin/i386 -lR
-lRblas -lgfortran
cp lapack.dll ../../../modules/i386/lapack.dll

and there is (obviously) read permissions on those files:

C:\R\src\gnuwin32>file ..\..\bin\i386\*.dll
..\..\bin\i386\R.dll:         PE32 executable for MS Windows (DLL)
(GUI) Intel 80386 32-bit
..\..\bin\i386\Rblas.dll:     PE32 executable for MS Windows (DLL)
(console) Intel 80386 32-bit
..\..\bin\i386\Rgraphapp.dll: PE32 executable for MS Windows (DLL)
(GUI) Intel 80386 32-bit
..\..\bin\i386\Riconv.dll:    PE32 executable for MS Windows (DLL)
(console) Intel 80386 32-bit
..\..\bin\i386\Rlapack.dll:   PE32 executable for MS Windows (DLL)
(console) Intel 80386 32-bit
..\..\bin\i386\Rzlib.dll:     PE32 executable for MS Windows (DLL)
(console) Intel 80386 32-bit

Pre-creating the proper directories is tedious and only works up to
the point of 'make distribution', where I haven't found a similar
workaround (without modifying the Makefiles).  Note, I can get to the
point where I have build and check everything (including recommended
packages).


Just to convince you that mkdir is the problem, I can reproduce the
problem from this point, by removing the bin/ directory again and
relying on Rtools mkdir again;

C:\R\src\gnuwin32>rm -fR ..\..\bin
C:\R\src\gnuwin32>make rbuild
make[3]: Nothing to be done for `svnonly'.
installing C headers
make[1]: `libRblas.dll.a' is up to date.
make[4]: Nothing to be done for `svnonly'.
installing C headers
make --no-print-directory -C ../extra/intl CFLAGS='-O3 -Wall -pedantic
-mtune=core2' -f Makefile.win
make --no-print-directory -C ../appl CFLAGS='-O3 -Wall -pedantic
-mtune=core2' FFLAGS='-O3 -mtune=core2' -f Makefile.win
make --no-print-directory -C ../nmath CFLAGS='-O3 -Wall -pedantic
-mtune=core2' FFLAGS='-O3 -mtune=core2' -f Makefile.win
make --no-print-directory -C ../main CFLAGS='-O3 -Wall -pedantic
-mtune=core2' FFLAGS='-O3 -mtune=core2' malloc-DEFS='-DLEA_MALLOC' -f
Makefile.win
make --no-print-directory -C ./getline CFLAGS='-O3 -Wall -pedantic -mtune=core2'

make[3]: `gl.a' is up to date.
make -f Makefile.win makeMakedeps
make -f Makefile.win libpcre.a
make[4]: `libpcre.a' is up to date.
make[3]: Nothing to be done for `all'.
make -f Makefile.win makeMakedeps
make -f Makefile.win libtre.a
make[4]: `libtre.a' is up to date.
make[3]: Nothing to be done for `all'.
make[4]: `stamp' is up to date.
make[4]: `liblzma.a' is up to date.
make[2]: `R.dll' is up to date.
cp R.dll ../../bin/i386
-------- Building ../../../bin/i386/Rblas.dll --------
gcc -std=gnu99  -shared  -o ../../../bin/i386/Rblas.dll blas.o
cmplxblas.o ../../gnuwin32/dllversion.o Rblas.def -L../../../bin/i386
-lR -lgfortran
c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lR
collect2: ld returned 1 exit status
make[2]: *** [../../../bin/i386/Rblas.dll] Error 1
make[1]: *** [Rblas] Error 2
make: *** [rbuild] Error 2


MORE TROUBLESHOOTING:
The MD5 checksum when it fails (reproducible):
C:\R\src\gnuwin32>md5sum ../../bin/i386/*.dll
75b2e64d3847e768631681922df5a81d *../../bin/i386/R.dll
12a35b63a28ad0e0fee8cae04f76e907 *../../bin/i386/Rgraphapp.dll
e2c40ae15d13dc17af33c1367f78817d *../../bin/i386/Riconv.dll
c5ea5a5cd2b7d3c07970f5314ce7296a *../../bin/i386/Rzlib.dll

The MD5 checksum when it works (reproducible):
C:\R\src\gnuwin32>md5sum ../../bin/i386/*.dll
75b2e64d3847e768631681922df5a81d *../../bin/i386/R.dll
12a35b63a28ad0e0fee8cae04f76e907 *../../bin/i386/Rgraphapp.dll
e2c40ae15d13dc17af33c1367f78817d *../../bin/i386/Riconv.dll
c5ea5a5cd2b7d3c07970f5314ce7296a *../../bin/i386/Rzlib.dll
+
c81b3399027ec9c24ca80ba92199327c *../../bin/i386/Rblas.dll
20d32cee2e561d1826af1a538844472b *../../bin/i386/Rlapack.dll


Thanks for any help,

Henrik


SETUP:
1. Downloaded/svn checkout the R source to C:\R\.
2. Installed most recent Rtools to C:\Rtools (completely removed previously)
(3. Modifying the MkRules.* files has no impact for reproducing this
problem.  Same with 'make rsync-recommended')

C:\R\src\gnuwin32>path
PATH=;C:\Rtools\bin;C:\Rtools\gcc-4.6.3\bin;C:\Windows;C:\Windows\system32

C:\R\src\gnuwin32>cat C:\Rtools\VERSION.txt
Rtools version 3.1.0.1939

C:\R\src\gnuwin32>ls ../..
COPYING      Makefile.fw  VERSION       configure.ac  po     tmp
ChangeLog    Makefile.in  VERSION-NICK  doc           share  tools
INSTALL      README       config.site   etc           src
Makeconf.in  Tcl          configure     m4            tests


From matloff at cs.ucdavis.edu  Thu Jan  9 23:33:22 2014
From: matloff at cs.ucdavis.edu (Norm Matloff)
Date: Thu, 9 Jan 2014 14:33:22 -0800
Subject: [Rd] reference class internals
Message-ID: <20140109223322.GB5772@laura>

I have a question about reference classes, which someone here
undoubtedly can answer immediately, saving me hours of wading through
indecipherable internal code. :-)  Thanks in advance.  

Reference class data is mutable, fine, but in what sense?  Is it really
physical,  or is it just a view given to the programmer?
 
If for instance I have vector as a field in a reference class, and I
change one element of the vector, is it really true that the change is
guaranteed to be made in-place, no copying, no memory reallocation etc?

Norm


From h.wickham at gmail.com  Thu Jan  9 23:43:44 2014
From: h.wickham at gmail.com (Hadley Wickham)
Date: Thu, 9 Jan 2014 16:43:44 -0600
Subject: [Rd] reference class internals
In-Reply-To: <20140109223322.GB5772@laura>
References: <20140109223322.GB5772@laura>
Message-ID: <CABdHhvGVn4j2osVs-UK2sU1fFa4LyXMB-uDzBwYJWNZ+dNxtoA@mail.gmail.com>

It's a bit of a simplification, reference classes are wrappers around
environments.  So if modifying a value in an environment would create
a copy, then modifying the same value in a reference class will also
create a copy.

The situation with modifying a vector is a bit complicated as it will
sometimes be modified in place and sometimes be duplicated and
modified (depending on whether its NAMED attribute is 1 or 2, and
exactly how you're modifying it).

Hadley

On Thu, Jan 9, 2014 at 4:33 PM, Norm Matloff <matloff at cs.ucdavis.edu> wrote:
> I have a question about reference classes, which someone here
> undoubtedly can answer immediately, saving me hours of wading through
> indecipherable internal code. :-)  Thanks in advance.
>
> Reference class data is mutable, fine, but in what sense?  Is it really
> physical,  or is it just a view given to the programmer?
>
> If for instance I have vector as a field in a reference class, and I
> change one element of the vector, is it really true that the change is
> guaranteed to be made in-place, no copying, no memory reallocation etc?
>
> Norm
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel



-- 
http://had.co.nz/


From matloff at cs.ucdavis.edu  Fri Jan 10 00:20:17 2014
From: matloff at cs.ucdavis.edu (Norm Matloff)
Date: Thu, 9 Jan 2014 15:20:17 -0800
Subject: [Rd] reference class internals
In-Reply-To: <CABdHhvGVn4j2osVs-UK2sU1fFa4LyXMB-uDzBwYJWNZ+dNxtoA@mail.gmail.com>
References: <20140109223322.GB5772@laura>
	<CABdHhvGVn4j2osVs-UK2sU1fFa4LyXMB-uDzBwYJWNZ+dNxtoA@mail.gmail.com>
Message-ID: <20140109232017.GA6114@laura>


Bottom line:  Really no different from the case of ordinary vectors that
are not in reference classes, right?  In other words, not true
pass-by-reference.

Norm

On Thu, Jan 09, 2014 at 04:43:44PM -0600, Hadley Wickham wrote:
> It's a bit of a simplification, reference classes are wrappers around
> environments.  So if modifying a value in an environment would create
> a copy, then modifying the same value in a reference class will also
> create a copy.
> 
> The situation with modifying a vector is a bit complicated as it will
> sometimes be modified in place and sometimes be duplicated and
> modified (depending on whether its NAMED attribute is 1 or 2, and
> exactly how you're modifying it).
> 
> Hadley
> 
> On Thu, Jan 9, 2014 at 4:33 PM, Norm Matloff <matloff at cs.ucdavis.edu> wrote:
> > I have a question about reference classes, which someone here
> > undoubtedly can answer immediately, saving me hours of wading through
> > indecipherable internal code. :-)  Thanks in advance.
> >
> > Reference class data is mutable, fine, but in what sense?  Is it really
> > physical,  or is it just a view given to the programmer?
> >
> > If for instance I have vector as a field in a reference class, and I
> > change one element of the vector, is it really true that the change is
> > guaranteed to be made in-place, no copying, no memory reallocation etc?
> >
> > Norm
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 
> 
> -- 
> http://had.co.nz/


From simon.urbanek at r-project.org  Fri Jan 10 03:44:10 2014
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 9 Jan 2014 21:44:10 -0500
Subject: [Rd] reference class internals
In-Reply-To: <20140109232017.GA6114@laura>
References: <20140109223322.GB5772@laura>
	<CABdHhvGVn4j2osVs-UK2sU1fFa4LyXMB-uDzBwYJWNZ+dNxtoA@mail.gmail.com>
	<20140109232017.GA6114@laura>
Message-ID: <14D88F33-31D2-47FB-8224-3C2A9FD49CC2@r-project.org>

On Jan 9, 2014, at 6:20 PM, Norm Matloff <matloff at cs.ucdavis.edu> wrote:

> Bottom line:  Really no different from the case of ordinary vectors that are not in reference classes, right?  In other words, not true pass-by-reference.
> 

The pass-by-reference applies to the object itself, not necessarily to anything you obtain by calling a function on the object (like extracting a part from it). Vectors are not reference-semantics objects so regular rules apply.

If you pass a reference semantics object to a function, the function can modify the object. If you pass any other object, the contents are guaranteed to not be touched. Reference-semantics objects in R are literally passed by reference (same C pointer), so yes, it is true pass-by-reference.

Cheers,
Simon


(*) - technically, there is a thin non-refernce wrapper around the instances of reference classes, because there are things you don't want to happen to your ref-semantics instance - e.g. you don't want unclass(x) to destroy x and all instances of it (which it would do if there was no wrapper). But the actual payload of the object is a true ref-semantics object - an environment - that is always passed by reference.



> Norm
> 
> On Thu, Jan 09, 2014 at 04:43:44PM -0600, Hadley Wickham wrote:
>> It's a bit of a simplification, reference classes are wrappers around
>> environments.  So if modifying a value in an environment would create
>> a copy, then modifying the same value in a reference class will also
>> create a copy.
>> 
>> The situation with modifying a vector is a bit complicated as it will
>> sometimes be modified in place and sometimes be duplicated and
>> modified (depending on whether its NAMED attribute is 1 or 2, and
>> exactly how you're modifying it).
>> 
>> Hadley
>> 
>> On Thu, Jan 9, 2014 at 4:33 PM, Norm Matloff <matloff at cs.ucdavis.edu> wrote:
>>> I have a question about reference classes, which someone here
>>> undoubtedly can answer immediately, saving me hours of wading through
>>> indecipherable internal code. :-)  Thanks in advance.
>>> 
>>> Reference class data is mutable, fine, but in what sense?  Is it really
>>> physical,  or is it just a view given to the programmer?
>>> 
>>> If for instance I have vector as a field in a reference class, and I
>>> change one element of the vector, is it really true that the change is
>>> guaranteed to be made in-place, no copying, no memory reallocation etc?
>>> 
>>> Norm
>>> 
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>> 
>> 
>> 
>> -- 
>> http://had.co.nz/
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


From matloff at cs.ucdavis.edu  Fri Jan 10 04:53:56 2014
From: matloff at cs.ucdavis.edu (Norm Matloff)
Date: Thu, 9 Jan 2014 19:53:56 -0800
Subject: [Rd] reference class internals
In-Reply-To: <14D88F33-31D2-47FB-8224-3C2A9FD49CC2@r-project.org>
References: <20140109223322.GB5772@laura>
	<CABdHhvGVn4j2osVs-UK2sU1fFa4LyXMB-uDzBwYJWNZ+dNxtoA@mail.gmail.com>
	<20140109232017.GA6114@laura>
	<14D88F33-31D2-47FB-8224-3C2A9FD49CC2@r-project.org>
Message-ID: <20140110035356.GA7697@laura>


Thanks, Hadley and Simon.

The reason I asked today was that when reference classes first came out,
it had appeared to me that there is no peformance advantage to using
reference classes, that it was mainly a style issue (encapsulation,
etc.).  Unless I'm missing something, both of you have confirmed my
original impression, correct?

Norm

On Thu, Jan 09, 2014 at 09:44:10PM -0500, Simon Urbanek wrote:
> On Jan 9, 2014, at 6:20 PM, Norm Matloff <matloff at cs.ucdavis.edu> wrote:
> 
> > Bottom line:  Really no different from the case of ordinary vectors that are not in reference classes, right?  In other words, not true pass-by-reference.
> > 
> 
> The pass-by-reference applies to the object itself, not necessarily to anything you obtain by calling a function on the object (like extracting a part from it). Vectors are not reference-semantics objects so regular rules apply.
> 
> If you pass a reference semantics object to a function, the function can modify the object. If you pass any other object, the contents are guaranteed to not be touched. Reference-semantics objects in R are literally passed by reference (same C pointer), so yes, it is true pass-by-reference.
> 
> Cheers,
> Simon
> 
> 
> (*) - technically, there is a thin non-refernce wrapper around the instances of reference classes, because there are things you don't want to happen to your ref-semantics instance - e.g. you don't want unclass(x) to destroy x and all instances of it (which it would do if there was no wrapper). But the actual payload of the object is a true ref-semantics object - an environment - that is always passed by reference.
> 
> 
> 
> > Norm
> > 
> > On Thu, Jan 09, 2014 at 04:43:44PM -0600, Hadley Wickham wrote:
> >> It's a bit of a simplification, reference classes are wrappers around
> >> environments.  So if modifying a value in an environment would create
> >> a copy, then modifying the same value in a reference class will also
> >> create a copy.
> >> 
> >> The situation with modifying a vector is a bit complicated as it will
> >> sometimes be modified in place and sometimes be duplicated and
> >> modified (depending on whether its NAMED attribute is 1 or 2, and
> >> exactly how you're modifying it).
> >> 
> >> Hadley
> >> 
> >> On Thu, Jan 9, 2014 at 4:33 PM, Norm Matloff <matloff at cs.ucdavis.edu> wrote:
> >>> I have a question about reference classes, which someone here
> >>> undoubtedly can answer immediately, saving me hours of wading through
> >>> indecipherable internal code. :-)  Thanks in advance.
> >>> 
> >>> Reference class data is mutable, fine, but in what sense?  Is it really
> >>> physical,  or is it just a view given to the programmer?
> >>> 
> >>> If for instance I have vector as a field in a reference class, and I
> >>> change one element of the vector, is it really true that the change is
> >>> guaranteed to be made in-place, no copying, no memory reallocation etc?
> >>> 
> >>> Norm
> >>> 
> >>> ______________________________________________
> >>> R-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-devel
> >> 
> >> 
> >> 
> >> -- 
> >> http://had.co.nz/
> > 
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> > 
>


From mtmorgan at fhcrc.org  Fri Jan 10 05:27:09 2014
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Thu, 09 Jan 2014 20:27:09 -0800
Subject: [Rd] reference class internals
In-Reply-To: <20140110035356.GA7697@laura>
References: <20140109223322.GB5772@laura>	<CABdHhvGVn4j2osVs-UK2sU1fFa4LyXMB-uDzBwYJWNZ+dNxtoA@mail.gmail.com>	<20140109232017.GA6114@laura>	<14D88F33-31D2-47FB-8224-3C2A9FD49CC2@r-project.org>
	<20140110035356.GA7697@laura>
Message-ID: <52CF769D.9050202@fhcrc.org>

On 01/09/2014 07:53 PM, Norm Matloff wrote:
>
> Thanks, Hadley and Simon.
>
> The reason I asked today was that when reference classes first came out,
> it had appeared to me that there is no peformance advantage to using
> reference classes, that it was mainly a style issue (encapsulation,
> etc.).  Unless I'm missing something, both of you have confirmed my
> original impression, correct?

We've used reference classes for performance benefit. E.g., updating a single 
(e.g., small) field in an S4 object triggers an entire copy of the object, 
whereas for a reference class the fields can be updated independently. This is 
especially true inside function (e.g., method) calls (e.g., slot access), where 
the object is marked to be duplicated.


> > a = setClass("A", representation(x="numeric"))(x=1:5)
> .Internal(inspect(a))
@5237508 25 S4SXP g0c0 [OBJ,NAM(2),S4,gp=0x10,ATT]
ATTRIB:
   @5237460 02 LISTSXP g0c0 []
     TAG: @12ea3a0 01 SYMSXP g0c0 [NAM(2)] "x"
     @5225db8 13 INTSXP g0c3 [NAM(2)] (len=5, tl=0) 1,2,3,4,5
     TAG: @1284b08 01 SYMSXP g0c0 [LCK,gp=0x4000] "class" (has value)
     @52355c8 16 STRSXP g0c1 [NAM(2),ATT] (len=1, tl=0)
       @4740e48 09 CHARSXP g0c1 [gp=0x61] [ASCII] [cached] "A"
     ATTRIB:
       @52373f0 02 LISTSXP g0c0 []
	TAG: @128e500 01 SYMSXP g0c0 [NAM(2)] "package"
	@5235598 16 STRSXP g0c1 [NAM(2)] (len=1, tl=0)
	  @12ee2b8 09 CHARSXP g0c2 [gp=0x61] [ASCII] [cached] ".GlobalEnv"
> a at x[1]=2L
> .Internal(inspect(a))  ## almost everything duplicated!
@5243cd0 25 S4SXP g0c0 [OBJ,NAM(2),S4,gp=0x10,ATT]
ATTRIB:
   @5243c60 02 LISTSXP g0c0 []
     TAG: @12ea3a0 01 SYMSXP g0c0 [NAM(2)] "x"
     @5225b30 13 INTSXP g0c3 [NAM(1)] (len=5, tl=0) 2,2,3,4,5
     TAG: @1284b08 01 SYMSXP g0c0 [LCK,gp=0x4000] "class" (has value)
     @52405f8 16 STRSXP g0c1 [NAM(2),ATT] (len=1, tl=0)
       @4740e48 09 CHARSXP g0c1 [gp=0x61] [ASCII] [cached] "A"
     ATTRIB:
       @5243bf0 02 LISTSXP g0c0 []
	TAG: @128e500 01 SYMSXP g0c0 [NAM(2)] "package"
	@52405c8 16 STRSXP g0c1 [NAM(2)] (len=1, tl=0)
	  @12ee2b8 09 CHARSXP g0c2 [gp=0x61] [ASCII] [cached] ".GlobalEnv"

(this also influence performance of other R objects, of course, e.g.,

 > f = function(x) { x at a = 2L; x }
 > l = list(a=1:5); .Internal(inspect(l))
@53f8448 19 VECSXP g0c1 [NAM(1),ATT] (len=1, tl=0)
   @53cef48 13 INTSXP g0c3 [] (len=5, tl=0) 1,2,3,4,5
ATTRIB:
   @53f9190 02 LISTSXP g0c0 []
     TAG: @1284638 01 SYMSXP g0c0 [LCK,gp=0x4000] "names" (has value)
     @53f8418 16 STRSXP g0c1 [] (len=1, tl=0)
       @146b128 09 CHARSXP g0c1 [gp=0x61] [ASCII] [cached] "a"
 > .Internal(inspect(f(l)))
@53f83e8 19 VECSXP g0c1 [NAM(1),ATT] (len=1, tl=0)
   @53cef00 13 INTSXP g0c3 [] (len=5, tl=0) 2,2,3,4,5
ATTRIB:
   @53f9988 02 LISTSXP g0c0 []
     TAG: @1284638 01 SYMSXP g0c0 [LCK,gp=0x4000] "names" (has value)
     @53f83b8 16 STRSXP g0c1 [NAM(2)] (len=1, tl=0)
       @146b128 09 CHARSXP g0c1 [gp=0x61] [ASCII] [cached] "a"

Copies are localized to the updated field with reference classes (can't show 
this with .Internal(inspect()), though, because x = new.env(); x$x = x; 
.Internal(insepct(x)) [mimicking .self in reference classes] has an infinite (? 
I didn't wait that long) recursion).

I think actually reference classes have a surprising performance _hit_ compared 
to other R approaches to minimizing copying; this has come up on this or the R 
mailing list before, but I've lost track of the original. Here's a StackOverflow 
version

http://stackoverflow.com/questions/18677696/stack-class-in-r-something-more-concise/18678440#18678440

Martin


> Norm
>
> On Thu, Jan 09, 2014 at 09:44:10PM -0500, Simon Urbanek wrote:
>> On Jan 9, 2014, at 6:20 PM, Norm Matloff <matloff at cs.ucdavis.edu> wrote:
>>
>>> Bottom line:  Really no different from the case of ordinary vectors that are not in reference classes, right?  In other words, not true pass-by-reference.
>>>
>>
>> The pass-by-reference applies to the object itself, not necessarily to anything you obtain by calling a function on the object (like extracting a part from it). Vectors are not reference-semantics objects so regular rules apply.
>>
>> If you pass a reference semantics object to a function, the function can modify the object. If you pass any other object, the contents are guaranteed to not be touched. Reference-semantics objects in R are literally passed by reference (same C pointer), so yes, it is true pass-by-reference.
>>
>> Cheers,
>> Simon
>>
>>
>> (*) - technically, there is a thin non-refernce wrapper around the instances of reference classes, because there are things you don't want to happen to your ref-semantics instance - e.g. you don't want unclass(x) to destroy x and all instances of it (which it would do if there was no wrapper). But the actual payload of the object is a true ref-semantics object - an environment - that is always passed by reference.
>>
>>
>>
>>> Norm
>>>
>>> On Thu, Jan 09, 2014 at 04:43:44PM -0600, Hadley Wickham wrote:
>>>> It's a bit of a simplification, reference classes are wrappers around
>>>> environments.  So if modifying a value in an environment would create
>>>> a copy, then modifying the same value in a reference class will also
>>>> create a copy.
>>>>
>>>> The situation with modifying a vector is a bit complicated as it will
>>>> sometimes be modified in place and sometimes be duplicated and
>>>> modified (depending on whether its NAMED attribute is 1 or 2, and
>>>> exactly how you're modifying it).
>>>>
>>>> Hadley
>>>>
>>>> On Thu, Jan 9, 2014 at 4:33 PM, Norm Matloff <matloff at cs.ucdavis.edu> wrote:
>>>>> I have a question about reference classes, which someone here
>>>>> undoubtedly can answer immediately, saving me hours of wading through
>>>>> indecipherable internal code. :-)  Thanks in advance.
>>>>>
>>>>> Reference class data is mutable, fine, but in what sense?  Is it really
>>>>> physical,  or is it just a view given to the programmer?
>>>>>
>>>>> If for instance I have vector as a field in a reference class, and I
>>>>> change one element of the vector, is it really true that the change is
>>>>> guaranteed to be made in-place, no copying, no memory reallocation etc?
>>>>>
>>>>> Norm
>>>>>
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>
>>>>
>>>>
>>>> --
>>>> http://had.co.nz/
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


-- 
Computational Biology / Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N.
PO Box 19024 Seattle, WA 98109

Location: Arnold Building M1 B861
Phone: (206) 667-2793


From matloff at cs.ucdavis.edu  Fri Jan 10 06:08:51 2014
From: matloff at cs.ucdavis.edu (Norm Matloff)
Date: Thu, 9 Jan 2014 21:08:51 -0800
Subject: [Rd] reference class internals
In-Reply-To: <52CF769D.9050202@fhcrc.org>
References: <20140109223322.GB5772@laura>
	<CABdHhvGVn4j2osVs-UK2sU1fFa4LyXMB-uDzBwYJWNZ+dNxtoA@mail.gmail.com>
	<20140109232017.GA6114@laura>
	<14D88F33-31D2-47FB-8224-3C2A9FD49CC2@r-project.org>
	<20140110035356.GA7697@laura> <52CF769D.9050202@fhcrc.org>
Message-ID: <20140110050851.GG7697@laura>


I guess I should explain where I'm coming from in all this.

I've always been something of a skeptic on object-oriented programming.
Though I agree it has some advantages, and I do use it myself (in
Python), in general I think it makes one work far too hard for the
potential benefit.  C++ templates (which I use in Thrust) drive me
crazy, very frustrating.

So I am, for better or worse, one of those people who don't even like S4
(again a style issue).  Obviously those who do like S4 may get a
performance benefit via reference classes in the situation Martin
mentions below.

I've been meaning for some time to look into whether there might
actually be a performance benefit for non-OOP programmers like me,
thinking the answer would be no but wanting to confirm.  So,
today I finally got around to asking, and immediately got three quick,
cogent and informative replies.  This testifies to the quality of the
membership of this list!  Thanks very much.

Norm

On Thu, Jan 09, 2014 at 08:27:09PM -0800, Martin Morgan wrote:
> On 01/09/2014 07:53 PM, Norm Matloff wrote:
> >
> >Thanks, Hadley and Simon.
> >
> >The reason I asked today was that when reference classes first came out,
> >it had appeared to me that there is no peformance advantage to using
> >reference classes, that it was mainly a style issue (encapsulation,
> >etc.).  Unless I'm missing something, both of you have confirmed my
> >original impression, correct?
> 
> We've used reference classes for performance benefit. E.g., updating
> a single (e.g., small) field in an S4 object triggers an entire copy
> of the object, whereas for a reference class the fields can be
> updated independently. This is especially true inside function
> (e.g., method) calls (e.g., slot access), where the object is marked
> to be duplicated.
> 
> 
> >> a = setClass("A", representation(x="numeric"))(x=1:5)
> >.Internal(inspect(a))
> @5237508 25 S4SXP g0c0 [OBJ,NAM(2),S4,gp=0x10,ATT]
> ATTRIB:
>   @5237460 02 LISTSXP g0c0 []
>     TAG: @12ea3a0 01 SYMSXP g0c0 [NAM(2)] "x"
>     @5225db8 13 INTSXP g0c3 [NAM(2)] (len=5, tl=0) 1,2,3,4,5
>     TAG: @1284b08 01 SYMSXP g0c0 [LCK,gp=0x4000] "class" (has value)
>     @52355c8 16 STRSXP g0c1 [NAM(2),ATT] (len=1, tl=0)
>       @4740e48 09 CHARSXP g0c1 [gp=0x61] [ASCII] [cached] "A"
>     ATTRIB:
>       @52373f0 02 LISTSXP g0c0 []
> 	TAG: @128e500 01 SYMSXP g0c0 [NAM(2)] "package"
> 	@5235598 16 STRSXP g0c1 [NAM(2)] (len=1, tl=0)
> 	  @12ee2b8 09 CHARSXP g0c2 [gp=0x61] [ASCII] [cached] ".GlobalEnv"
> >a at x[1]=2L
> >.Internal(inspect(a))  ## almost everything duplicated!
> @5243cd0 25 S4SXP g0c0 [OBJ,NAM(2),S4,gp=0x10,ATT]
> ATTRIB:
>   @5243c60 02 LISTSXP g0c0 []
>     TAG: @12ea3a0 01 SYMSXP g0c0 [NAM(2)] "x"
>     @5225b30 13 INTSXP g0c3 [NAM(1)] (len=5, tl=0) 2,2,3,4,5
>     TAG: @1284b08 01 SYMSXP g0c0 [LCK,gp=0x4000] "class" (has value)
>     @52405f8 16 STRSXP g0c1 [NAM(2),ATT] (len=1, tl=0)
>       @4740e48 09 CHARSXP g0c1 [gp=0x61] [ASCII] [cached] "A"
>     ATTRIB:
>       @5243bf0 02 LISTSXP g0c0 []
> 	TAG: @128e500 01 SYMSXP g0c0 [NAM(2)] "package"
> 	@52405c8 16 STRSXP g0c1 [NAM(2)] (len=1, tl=0)
> 	  @12ee2b8 09 CHARSXP g0c2 [gp=0x61] [ASCII] [cached] ".GlobalEnv"
> 
> (this also influence performance of other R objects, of course, e.g.,
> 
> > f = function(x) { x at a = 2L; x }
> > l = list(a=1:5); .Internal(inspect(l))
> @53f8448 19 VECSXP g0c1 [NAM(1),ATT] (len=1, tl=0)
>   @53cef48 13 INTSXP g0c3 [] (len=5, tl=0) 1,2,3,4,5
> ATTRIB:
>   @53f9190 02 LISTSXP g0c0 []
>     TAG: @1284638 01 SYMSXP g0c0 [LCK,gp=0x4000] "names" (has value)
>     @53f8418 16 STRSXP g0c1 [] (len=1, tl=0)
>       @146b128 09 CHARSXP g0c1 [gp=0x61] [ASCII] [cached] "a"
> > .Internal(inspect(f(l)))
> @53f83e8 19 VECSXP g0c1 [NAM(1),ATT] (len=1, tl=0)
>   @53cef00 13 INTSXP g0c3 [] (len=5, tl=0) 2,2,3,4,5
> ATTRIB:
>   @53f9988 02 LISTSXP g0c0 []
>     TAG: @1284638 01 SYMSXP g0c0 [LCK,gp=0x4000] "names" (has value)
>     @53f83b8 16 STRSXP g0c1 [NAM(2)] (len=1, tl=0)
>       @146b128 09 CHARSXP g0c1 [gp=0x61] [ASCII] [cached] "a"
> 
> Copies are localized to the updated field with reference classes
> (can't show this with .Internal(inspect()), though, because x =
> new.env(); x$x = x; .Internal(insepct(x)) [mimicking .self in
> reference classes] has an infinite (? I didn't wait that long)
> recursion).
> 
> I think actually reference classes have a surprising performance
> _hit_ compared to other R approaches to minimizing copying; this has
> come up on this or the R mailing list before, but I've lost track of
> the original. Here's a StackOverflow version
> 
> http://stackoverflow.com/questions/18677696/stack-class-in-r-something-more-concise/18678440#18678440
> 
> Martin
> 
> 
> >Norm
> >
> >On Thu, Jan 09, 2014 at 09:44:10PM -0500, Simon Urbanek wrote:
> >>On Jan 9, 2014, at 6:20 PM, Norm Matloff <matloff at cs.ucdavis.edu> wrote:
> >>
> >>>Bottom line:  Really no different from the case of ordinary vectors that are not in reference classes, right?  In other words, not true pass-by-reference.
> >>>
> >>
> >>The pass-by-reference applies to the object itself, not necessarily to anything you obtain by calling a function on the object (like extracting a part from it). Vectors are not reference-semantics objects so regular rules apply.
> >>
> >>If you pass a reference semantics object to a function, the function can modify the object. If you pass any other object, the contents are guaranteed to not be touched. Reference-semantics objects in R are literally passed by reference (same C pointer), so yes, it is true pass-by-reference.
> >>
> >>Cheers,
> >>Simon
> >>
> >>
> >>(*) - technically, there is a thin non-refernce wrapper around the instances of reference classes, because there are things you don't want to happen to your ref-semantics instance - e.g. you don't want unclass(x) to destroy x and all instances of it (which it would do if there was no wrapper). But the actual payload of the object is a true ref-semantics object - an environment - that is always passed by reference.
> >>
> >>
> >>
> >>>Norm
> >>>
> >>>On Thu, Jan 09, 2014 at 04:43:44PM -0600, Hadley Wickham wrote:
> >>>>It's a bit of a simplification, reference classes are wrappers around
> >>>>environments.  So if modifying a value in an environment would create
> >>>>a copy, then modifying the same value in a reference class will also
> >>>>create a copy.
> >>>>
> >>>>The situation with modifying a vector is a bit complicated as it will
> >>>>sometimes be modified in place and sometimes be duplicated and
> >>>>modified (depending on whether its NAMED attribute is 1 or 2, and
> >>>>exactly how you're modifying it).
> >>>>
> >>>>Hadley
> >>>>
> >>>>On Thu, Jan 9, 2014 at 4:33 PM, Norm Matloff <matloff at cs.ucdavis.edu> wrote:
> >>>>>I have a question about reference classes, which someone here
> >>>>>undoubtedly can answer immediately, saving me hours of wading through
> >>>>>indecipherable internal code. :-)  Thanks in advance.
> >>>>>
> >>>>>Reference class data is mutable, fine, but in what sense?  Is it really
> >>>>>physical,  or is it just a view given to the programmer?
> >>>>>
> >>>>>If for instance I have vector as a field in a reference class, and I
> >>>>>change one element of the vector, is it really true that the change is
> >>>>>guaranteed to be made in-place, no copying, no memory reallocation etc?
> >>>>>
> >>>>>Norm
> >>>>>
> >>>>>______________________________________________
> >>>>>R-devel at r-project.org mailing list
> >>>>>https://stat.ethz.ch/mailman/listinfo/r-devel
> >>>>
> >>>>
> >>>>
> >>>>--
> >>>>http://had.co.nz/
> >>>
> >>>______________________________________________
> >>>R-devel at r-project.org mailing list
> >>>https://stat.ethz.ch/mailman/listinfo/r-devel
> >>>
> >>
> >
> >______________________________________________
> >R-devel at r-project.org mailing list
> >https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> 
> 
> -- 
> Computational Biology / Fred Hutchinson Cancer Research Center
> 1100 Fairview Ave. N.
> PO Box 19024 Seattle, WA 98109
> 
> Location: Arnold Building M1 B861
> Phone: (206) 667-2793


From ivan.martovskiy at mail.ru  Fri Jan 10 11:09:35 2014
From: ivan.martovskiy at mail.ru (=?UTF-8?B?0JjQstCw0L0g0JzQsNGA0YLQvtCy0YHQutC40Lk=?=)
Date: Fri, 10 Jan 2014 14:09:35 +0400
Subject: [Rd] =?utf-8?q?linking_R=2Edll_32bit_in_Win64?=
Message-ID: <1389348575.1402252@f325.i.mail.ru>

 I've a usual installation of R (the both versions 32 et 64) on Win7 64 bit are installed.
I'm trying to link my dll (32bit) to R.dll (32bit) from the folder?C:\Program Files\R\R-2.15.3\bin\i386
when, from 32bit version of R, loading the package containing my dll (32bit) which is linked to R.dll (32bit), there is OnLoad() error.
because R.dll (32bit) cannot find appropriate windows dlls of 32bit (kernel32.dll, msvcrt.dll,...)
I attached the screenshot of dependency walker for more detail.
From this picture we can see that R.dll is linked to 64bit windows dlls.

My question : how have I to build my 32bit dll ? which linker options to use ? /DELAYLOAD ?


From friendly at yorku.ca  Fri Jan 10 14:50:05 2014
From: friendly at yorku.ca (Michael Friendly)
Date: Fri, 10 Jan 2014 08:50:05 -0500
Subject: [Rd] proposal: stats::as.matrix.ftable method
Message-ID: <52CFFA8D.8000706@yorku.ca>

Following some discussion on R-help, I'd like to propose that an 
as.matrix method be added
to those available for ftable objects.  The reason for this is that 
there are a variety of situations
where one needs to flatten a 3+ way table, but then use that for 
analysis as a matrix, not just for
pretty-printing.  There is an as.table method to turn the result back to 
a table, but an as.matrix
method is missing.

 > methods(class="ftable")
[1] as.data.frame.ftable* as.table.ftable* format.ftable*
[4] head.ftable*          print.ftable tail.ftable*

    Non-visible functions are asterisked
 >

The function below was proposed by William Dunlop:

# as.matrix method for flattened tables

# modified from Willaim Dunlop, <wdunlap at tibco.com>, R-Help, 01-09-2014
as.matrix.ftable <- function(x, sep="_", ...) {
     makeDimNames <- function(vars) {
         structure(
             list(do.call(paste, c(rev(expand.grid(rev(vars))), 
list(sep=sep)))),
             names = paste(collapse=sep, names(vars))
         )
     }
     structure(
         unclass(x),
         dimnames=c(makeDimNames(attr(x, "row.vars")),
                    makeDimNames(attr(x, "col.vars"))),
         row.vars=NULL,
         col.vars=NULL)
}

Some test cases:

 > UCB <- UCBAdmissions
 > as.matrix(ftable(Dept ~ Admit + Gender, data=UCB))
                  Dept
Admit_Gender        A   B   C   D   E   F
   Admitted_Male   512 353 120 138  53  22
   Admitted_Female  89  17 202 131  94  24
   Rejected_Male   313 207 205 279 138 351
   Rejected_Female  19   8 391 244 299 317
 > as.matrix(ftable(Dept ~ ., data=UCB))
                  Dept
Admit_Gender        A   B   C   D   E   F
   Admitted_Male   512 353 120 138  53  22
   Admitted_Female  89  17 202 131  94  24
   Rejected_Male   313 207 205 279 138 351
   Rejected_Female  19   8 391 244 299 317
 > as.matrix(ftable(Admit + Gender ~ Dept, data=UCB))
     Admit_Gender
Dept Admitted_Male Admitted_Female Rejected_Male Rejected_Female
    A           512              89           313              19
    B           353              17           207               8
    C           120             202           205             391
    D           138             131           279             244
    E            53              94           138             299
    F            22              24           351             317
 > as.matrix(ftable(Admit ~ ., data=UCB))
            Admit
Gender_Dept Admitted Rejected
    Male_A        512      313
    Male_B        353      207
    Male_C        120      205
    Male_D        138      279
    Male_E         53      138
    Male_F         22      351
    Female_A       89       19
    Female_B       17        8
    Female_C      202      391
    Female_D      131      244
    Female_E       94      299
    Female_F       24      317
 >

Related functions: The vcd package defines a more extensive suite of 
similar structable functions,
including as.matrix.structable;  however that function doesn't supply 
appropriate dimnames for
the dimensions.  Given as.matrix.ftable(), that is easy to correct:

# use as.matrix.ftable, but
# need to remove other attributes: dnames, split_vertical
library(vcd)
as.matrix.structable <- function(x, sep="_", ...) {
     structure(
         as.matrix.ftable(x, sep, ...),
         dnames = NULL,
         split_vertical = NULL
         )
}

Test:

 > as.matrix(structable(Gender ~ Admit + Dept, data=UCB))
             Gender
Admit_Dept   Male Female
   Admitted_A  512     89
   Admitted_B  353     17
   Admitted_C  120    202
   Admitted_D  138    131
   Admitted_E   53     94
   Admitted_F   22     24
   Rejected_A  313     19
   Rejected_B  207      8
   Rejected_C  205    391
   Rejected_D  279    244
   Rejected_E  138    299
   Rejected_F  351    317
 > as.matrix(structable(Gender + Admit ~ Dept, data=UCB))
     Gender_Admit
Dept Male_Admitted Male_Rejected Female_Admitted Female_Rejected
    A           512           313              89              19
    B           353           207              17               8
    C           120           205             202             391
    D           138           279             131             244
    E            53           138              94             299
    F            22           351              24             317
 >

-- 
Michael Friendly     Email: friendly AT yorku DOT ca
Professor, Psychology Dept. & Chair, Quantitative Methods
York University      Voice: 416 736-2100 x66249 Fax: 416 736-5814
4700 Keele Street    Web:   http://www.datavis.ca
Toronto, ONT  M3J 1P3 CANADA


From ripley at stats.ox.ac.uk  Fri Jan 10 16:04:37 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 10 Jan 2014 15:04:37 +0000
Subject: [Rd] linking R.dll 32bit in Win64
In-Reply-To: <1389348575.1402252@f325.i.mail.ru>
References: <1389348575.1402252@f325.i.mail.ru>
Message-ID: <52D00C05.4040009@stats.ox.ac.uk>

On 10/01/2014 10:09, ???? ?????????? wrote:
>   I've a usual installation of R (the both versions 32 et 64) on Win7 64 bit are installed.
> I'm trying to link my dll (32bit) to R.dll (32bit) from the folder C:\Program Files\R\R-2.15.3\bin\i386
> when, from 32bit version of R, loading the package containing my dll (32bit) which is linked to R.dll (32bit), there is OnLoad() error.
> because R.dll (32bit) cannot find appropriate windows dlls of 32bit (kernel32.dll, msvcrt.dll,...)
> I attached the screenshot of dependency walker for more detail.
>  From this picture we can see that R.dll is linked to 64bit windows dlls.
>
> My question : how have I to build my 32bit dll ? which linker options to use ? /DELAYLOAD ?

There was no screenshot by the time this was distributed.  See the 
posting guide at http://www.r-project.org/posting-guide.html .

But Windows automatically finds the correct system DLLs - see the MSDN 
documentation for LoadLibrary.   So we have nothing at all to go on 
here, and no special options are needed nor used.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From esharef at gmail.com  Sat Jan 11 23:08:41 2014
From: esharef at gmail.com (Emmanuel Sharef)
Date: Sat, 11 Jan 2014 14:08:41 -0800
Subject: [Rd] Fortran BLAS giving bad results
Message-ID: <CA+GG=FQBrxhN2CrXbn_6R410dzSayw+unSvnY7_Vu+2AM9DPGg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140111/d40acbd9/attachment.pl>

From Berwin.Turlach at gmail.com  Sun Jan 12 08:26:04 2014
From: Berwin.Turlach at gmail.com (Berwin A Turlach)
Date: Sun, 12 Jan 2014 15:26:04 +0800
Subject: [Rd] Fortran BLAS giving bad results
In-Reply-To: <CA+GG=FQBrxhN2CrXbn_6R410dzSayw+unSvnY7_Vu+2AM9DPGg@mail.gmail.com>
References: <CA+GG=FQBrxhN2CrXbn_6R410dzSayw+unSvnY7_Vu+2AM9DPGg@mail.gmail.com>
Message-ID: <20140112152604.51c96564@bossiaea>

G'day Emmanuel,

On Sat, 11 Jan 2014 14:08:41 -0800
Emmanuel Sharef <esharef at gmail.com> wrote:

> Example: this program creates two double vectors, takes the dot
> product with ddot, and prints the result:
> 
> test.f:
>       subroutine testddot(n,x,y)
>       integer i,n
>       double precision x,y,d1(n),d2(n)
>       do 100 i=1,n
>         d1(i)=x
>         d2(i)=y
>  100  continue
>       print *,ddot(n,d1,1,d2,1)
>       end
> 
> Compiling
> R CMD SHLIB test.f

Mmh, FORTRAN77 does not have dynamical memory allocation (though I have
been told that many compilers implement it as an extension to the
standard).  So I am surprised that this code works.  It is certainly
not portable (i.e. a compiler that implements the FORTRAN77 standard
strictly would barf on this code).

Also, output to * in FORTRAN code dynamically linked to R is
discouraged, see chapter 5.7 (Fortran I/O) in the "Writing R Extension"
manual.  From memory, many years ago one could do so (on linux and
SUN machines atleast), then it stopped working.  I am surprised that it
works again.

But neither of these two issues are the reason for your strange
results.  You would have pinpointed your actual problem easily if you
would have used my favourite none-FORTRAN77 feature (which is
implemented by most compilers as an extension), namely having "implicit
none" as the first line in each function/subroutine. (The FORTRAN77
compliant version, AFAIK, was to write "IMPLICIT CHARACTER (A-Z)" into
the first line of all functions/subroutines.)

Essentially, your routine testddot does not know what kind of result
ddot returns and by the implicit type definition rules of FORTRAN77 it
expects an INTEGER back.  The fact that a DOUBLE PRECISION value is
returned when an INTEGER is expected creates some confusion.  Somewhere
at the start of your routine you have to add a "DOUBLE PRECISION ddot"
statement.

HTH.

Cheers,

	Berwin

========================== Full address ============================
A/Prof Berwin A Turlach               Tel.: +61 (8) 6488 3338 (secr)
School of Maths and Stats (M019)            +61 (8) 6488 3383 (self)
The University of Western Australia   FAX : +61 (8) 6488 1028
35 Stirling Highway                   
Crawley WA 6009                     e-mail: Berwin.Turlach at gmail.com
Australia                http://www.maths.uwa.edu.au/~berwin
                         http://www.researcherid.com/rid/A-4995-2008


From bhh at xs4all.nl  Sun Jan 12 11:18:05 2014
From: bhh at xs4all.nl (Berend Hasselman)
Date: Sun, 12 Jan 2014 11:18:05 +0100
Subject: [Rd] Fortran BLAS giving bad results
In-Reply-To: <20140112152604.51c96564@bossiaea>
References: <CA+GG=FQBrxhN2CrXbn_6R410dzSayw+unSvnY7_Vu+2AM9DPGg@mail.gmail.com>
	<20140112152604.51c96564@bossiaea>
Message-ID: <544DCE1E-C159-4223-B813-473D049EF44A@xs4all.nl>


On 12-01-2014, at 08:26, Berwin A Turlach <Berwin.Turlach at gmail.com> wrote:

> G'day Emmanuel,
> 
> On Sat, 11 Jan 2014 14:08:41 -0800
> Emmanuel Sharef <esharef at gmail.com> wrote:
> 
>> Example: this program creates two double vectors, takes the dot
>> product with ddot, and prints the result:
>> 
>> test.f:
>>      subroutine testddot(n,x,y)
>>      integer i,n
>>      double precision x,y,d1(n),d2(n)
>>      do 100 i=1,n
>>        d1(i)=x
>>        d2(i)=y
>> 100  continue
>>      print *,ddot(n,d1,1,d2,1)
>>      end
>> 
>> Compiling
>> R CMD SHLIB test.f
> 
> Mmh, FORTRAN77 does not have dynamical memory allocation (though I have
> been told that many compilers implement it as an extension to the
> standard).  So I am surprised that this code works.  It is certainly
> not portable (i.e. a compiler that implements the FORTRAN77 standard
> strictly would barf on this code).
> 
> Also, output to * in FORTRAN code dynamically linked to R is
> discouraged, see chapter 5.7 (Fortran I/O) in the "Writing R Extension"
> manual.  From memory, many years ago one could do so (on linux and
> SUN machines atleast), then it stopped working.  I am surprised that it
> works again.
> 
> But neither of these two issues are the reason for your strange
> results.  You would have pinpointed your actual problem easily if you
> would have used my favourite none-FORTRAN77 feature (which is
> implemented by most compilers as an extension), namely having "implicit
> none" as the first line in each function/subroutine. (The FORTRAN77
> compliant version, AFAIK, was to write "IMPLICIT CHARACTER (A-Z)" into
> the first line of all functions/subroutines.)
> 
> Essentially, your routine testddot does not know what kind of result
> ddot returns and by the implicit type definition rules of FORTRAN77 it
> expects an INTEGER back.


No. It is expecting ddot to return a REAL result (single precision).

Berend

>  The fact that a DOUBLE PRECISION value is
> returned when an INTEGER is expected creates some confusion.  Somewhere
> at the start of your routine you have to add a "DOUBLE PRECISION ddot"
> statement.
> 
> HTH.
> 
> Cheers,
> 
> 	Berwin
> 
> ========================== Full address ============================
> A/Prof Berwin A Turlach               Tel.: +61 (8) 6488 3338 (secr)
> School of Maths and Stats (M019)            +61 (8) 6488 3383 (self)
> The University of Western Australia   FAX : +61 (8) 6488 1028
> 35 Stirling Highway                   
> Crawley WA 6009                     e-mail: Berwin.Turlach at gmail.com
> Australia                http://www.maths.uwa.edu.au/~berwin
>                         http://www.researcherid.com/rid/A-4995-2008
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From esharef at gmail.com  Sun Jan 12 16:43:30 2014
From: esharef at gmail.com (Emmanuel Sharef)
Date: Sun, 12 Jan 2014 07:43:30 -0800
Subject: [Rd] Fortran BLAS giving bad results
In-Reply-To: <20140112152604.51c96564@bossiaea>
References: <CA+GG=FQBrxhN2CrXbn_6R410dzSayw+unSvnY7_Vu+2AM9DPGg@mail.gmail.com>
	<20140112152604.51c96564@bossiaea>
Message-ID: <CA+GG=FQNx6R_k=h1UPHKBsRMNL4+wEL8hDxh-axrboTfStgEaw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140112/17f20bd3/attachment.pl>

From pauljohn32 at gmail.com  Mon Jan 13 23:21:02 2014
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Mon, 13 Jan 2014 16:21:02 -0600
Subject: [Rd] predict.glm line 28. Please explain
Message-ID: <CAErODj_=0sfYTPX2rg2CtEhEmZ4RD+mA1y-6P65F2V00LG9NJg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140113/aa16d33c/attachment.pl>

From gmbecker at ucdavis.edu  Mon Jan 13 23:37:35 2014
From: gmbecker at ucdavis.edu (Gabriel Becker)
Date: Mon, 13 Jan 2014 14:37:35 -0800
Subject: [Rd] predict.glm line 28. Please explain
In-Reply-To: <CAErODj_=0sfYTPX2rg2CtEhEmZ4RD+mA1y-6P65F2V00LG9NJg@mail.gmail.com>
References: <CAErODj_=0sfYTPX2rg2CtEhEmZ4RD+mA1y-6P65F2V00LG9NJg@mail.gmail.com>
Message-ID: <CADwqtCOSdyv8Sub47egzog0Q3Trvr4MZFU-B9bdAEtXrvDChdw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140113/8ecf3be0/attachment.pl>

From baronshtam at lightminersystems.com  Tue Jan 14 03:02:59 2014
From: baronshtam at lightminersystems.com (Boris Aronshtam)
Date: Tue, 14 Jan 2014 02:02:59 +0000
Subject: [Rd] Passing a large array to .Call by reference
Message-ID: <9D80368C6A00834189C1982FB64EFA3007EE9361@ORD2MBX07C.mex05.mlsrvr.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140114/4f578801/attachment.pl>

From edd at debian.org  Tue Jan 14 03:26:54 2014
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 13 Jan 2014 20:26:54 -0600
Subject: [Rd] Passing a large array to .Call by reference
In-Reply-To: <9D80368C6A00834189C1982FB64EFA3007EE9361@ORD2MBX07C.mex05.mlsrvr.com>
References: <9D80368C6A00834189C1982FB64EFA3007EE9361@ORD2MBX07C.mex05.mlsrvr.com>
Message-ID: <21204.41070.388322.108514@max.nulle.part>


On 14 January 2014 at 02:02, Boris Aronshtam wrote:
| I need to pass a large array to my C function. I am using .Call(). I can clearly see according to the memory consumption (reported by gc()) that the array is duplicated. Is there a way to avoid this duplication and pass the array by reference?

Staring at gc() is at approximate at best. 

R has memory profiling, see Writing R Extensions for how to use it.

There is no code in your post, so not much else I can comment on.

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From jon.clayden at gmail.com  Tue Jan 14 16:32:12 2014
From: jon.clayden at gmail.com (Jon Clayden)
Date: Tue, 14 Jan 2014 15:32:12 +0000
Subject: [Rd] Determining the resolution of a screen device
Message-ID: <CAM9CR=1vo4jcPP2pxptnxwbU9ENELGyPAZEsb8RgtXEaPO8owg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140114/3cc84691/attachment.pl>

From ripley at stats.ox.ac.uk  Tue Jan 14 19:02:34 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 14 Jan 2014 18:02:34 +0000
Subject: [Rd] Determining the resolution of a screen device
In-Reply-To: <CAM9CR=1vo4jcPP2pxptnxwbU9ENELGyPAZEsb8RgtXEaPO8owg@mail.gmail.com>
References: <CAM9CR=1vo4jcPP2pxptnxwbU9ENELGyPAZEsb8RgtXEaPO8owg@mail.gmail.com>
Message-ID: <52D57BBA.7040409@stats.ox.ac.uk>

On 14/01/2014 15:32, Jon Clayden wrote:
> Dear all,
>
> I am trying to find a way to reliably and programmatically establish the
> resolution (i.e. DPI or equivalent) of an on-screen device. It seemed to me
> that
>
>    dev.new(width=1, height=1)
>    dpi <- dev.size("px")
>
> would do the trick, but the result does not seem to be correct, at least on
> OS X 10.9.1 using the "quartz" device.

It is correct: you need to read what it actually claims to do.

    units: the units in which to return the value - inches, cm, or
           pixels (device units).

The device units are nominal pixels: they may or may not be actual ones. 
  PDF (as used by Quartz) has a nominal 72 pixels per inch irrespective 
of display.

 > Specifically, the window that
> appears is 1 inch square, as expected, but the result from dev.size() is
> c(72,72), which isn't correct. My display is 1440x900, but if I call
>
>    dev.new(width=720/72, height=450/72)
>
> the resulting device fills much more than half the screen. But R gets the
> size right in inches, so it, or something it calls, must presumably know
> the real DPI value.
>
> So, could anyone tell me whether there is a reliable way to determine DPI,
> please?

No.  And even when the OS reports this, it is often wrong.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From baronshtam at lightminersystems.com  Tue Jan 14 23:46:03 2014
From: baronshtam at lightminersystems.com (Boris Aronshtam)
Date: Tue, 14 Jan 2014 22:46:03 +0000
Subject: [Rd] Passing a large array to .Call by reference
In-Reply-To: <21204.41070.388322.108514@max.nulle.part>
References: <9D80368C6A00834189C1982FB64EFA3007EE9361@ORD2MBX07C.mex05.mlsrvr.com>
	<21204.41070.388322.108514@max.nulle.part>
Message-ID: <9D80368C6A00834189C1982FB64EFA3007EE9381@ORD2MBX07C.mex05.mlsrvr.com>

Sorry for the post. My mistake. The further investigation shows that .Call() passes arrays/vectors by reference. 

-----Original Message-----
From: Dirk Eddelbuettel [mailto:edd at debian.org] 
Sent: Monday, January 13, 2014 6:27 PM
To: Boris Aronshtam
Cc: r-devel at r-project.org
Subject: Re: [Rd] Passing a large array to .Call by reference


On 14 January 2014 at 02:02, Boris Aronshtam wrote:
| I need to pass a large array to my C function. I am using .Call(). I can clearly see according to the memory consumption (reported by gc()) that the array is duplicated. Is there a way to avoid this duplication and pass the array by reference?

Staring at gc() is at approximate at best. 

R has memory profiling, see Writing R Extensions for how to use it.

There is no code in your post, so not much else I can comment on.

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From kosyachina at yahoo.de  Wed Jan 15 01:40:54 2014
From: kosyachina at yahoo.de (boiled_wonderland)
Date: Tue, 14 Jan 2014 16:40:54 -0800 (PST)
Subject: [Rd] rbinom in RcppArmadillo?
Message-ID: <1389746454033-4683593.post@n4.nabble.com>

What is the RcppArmadillo way to make binomial draws from a vector of probs,
similar to what rbinom does in R?

Thanx!



--
View this message in context: http://r.789695.n4.nabble.com/rbinom-in-RcppArmadillo-tp4683593.html
Sent from the R devel mailing list archive at Nabble.com.


From edd at debian.org  Wed Jan 15 04:32:58 2014
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 14 Jan 2014 21:32:58 -0600
Subject: [Rd] rbinom in RcppArmadillo?
In-Reply-To: <1389746454033-4683593.post@n4.nabble.com>
References: <1389746454033-4683593.post@n4.nabble.com>
Message-ID: <21206.362.578236.941004@max.nulle.part>


On 14 January 2014 at 16:40, boiled_wonderland wrote:
| What is the RcppArmadillo way to make binomial draws from a vector of probs,
| similar to what rbinom does in R?

1)  It is pretty common list etiquette in these quarters to post with a name
    and affiliation.  You may find list member more willing to help you if
    you adhere to common behaviour.

2)  RcppArmadillo is a member of the Rcpp family; discussions for Rcpp and
    related packages are happening at the rcpp-devel list. Conrad, the
    Armadillo author, also reads that list.

3)  RcppArmadillo is a wrapper for Armadillo, and 
       http://arma.sourceforge.net/docs.html
    is the main source of documentation. You will see that Armadillo supports
    from uniform and normal distributions.

4)  Rcpp, however, supports just about all distributions which R supports.
    So you can draw via Rcpp and instantiate an Armadillo object with the
    values. At the C level, some distributions have an additional parameter
    for degrees of freedom, the header file should be informative. Binomial
    is easier.  Here is a quick example just with Rcpp types:

    R> cppFunction('NumericVector nb(int n) { return(rbinom(n,1,0.5));}')
    R> set.seed(42); nb(4)               # draw 4 via C++
    [1] 1 1 0 1
    R> set.seed(42); rbinom(4,1,0.5)     # reset seed, draw 4 from R
    [1] 1 1 0 1
    R> 

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From saisai.ma at mymail.unisa.edu.au  Fri Jan 17 01:17:55 2014
From: saisai.ma at mymail.unisa.edu.au (Ma, Saisai - maysy020)
Date: Fri, 17 Jan 2014 00:17:55 +0000
Subject: [Rd] How to debug an R package (with C code)
Message-ID: <e6b8123fd4af42d78ce33ce3fee50851@SIXPR01MB224.apcprd01.prod.exchangelabs.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140117/4206a41b/attachment.pl>

From ggrothendieck at gmail.com  Fri Jan 17 06:10:43 2014
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 17 Jan 2014 00:10:43 -0500
Subject: [Rd] file.exists does not like path names ending in /
Message-ID: <CAP01uRmStfL2Kd0AK0KGGkdeUY_Qbde885AfSDy8VNDHbras7g@mail.gmail.com>

If a path name ends in slash then file.exists says it does not exist.
I would have expected these to all return TRUE.

> file.exists("/Program Files")
[1] TRUE
> file.exists("/Program Files/")
[1] FALSE
> file.exists(normalizePath("/Program Files/"))
[1] FALSE
> R.version.string
[1] "R version 3.0.2 Patched (2013-11-25 r64299)"

I am using Windows 8.1 .

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From ggrothendieck at gmail.com  Fri Jan 17 06:14:40 2014
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 17 Jan 2014 00:14:40 -0500
Subject: [Rd] win.version() incorrect
Message-ID: <CAP01uR=MLxMuHPDC99WqRtso4FWvJz_oAJ5w1POQMKq1BfKWqA@mail.gmail.com>

On Windows 8.1 I get this.  win.version() indicates build 9200 but I
actually have build 9600 as can be seen from the ver command.
shell("winver") also indicates 9600.  I assume ver and winver are
correct and win.version() is not.


> win.version()
[1] "Windows 8 x64 (build 9200)"
> shell("ver")

Microsoft Windows [Version 6.3.9600]


> R.version.string
[1] "R version 3.0.2 Patched (2013-11-25 r64299)"

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From sannandi at umail.iu.edu  Fri Jan 17 05:04:06 2014
From: sannandi at umail.iu.edu (Sandip Nandi)
Date: Thu, 16 Jan 2014 20:04:06 -0800
Subject: [Rd] How to debug an R package (with C code)
In-Reply-To: <e6b8123fd4af42d78ce33ce3fee50851@SIXPR01MB224.apcprd01.prod.exchangelabs.com>
References: <e6b8123fd4af42d78ce33ce3fee50851@SIXPR01MB224.apcprd01.prod.exchangelabs.com>
Message-ID: <CAGSjAUCK1kTfpRKnuj6f4dieiFysqd4vOWJOSqkyzETr2uMkAg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140116/36652853/attachment.pl>

From gmbecker at ucdavis.edu  Fri Jan 17 09:43:40 2014
From: gmbecker at ucdavis.edu (Gabriel Becker)
Date: Fri, 17 Jan 2014 00:43:40 -0800
Subject: [Rd] How to debug an R package (with C code)
In-Reply-To: <CAGSjAUCK1kTfpRKnuj6f4dieiFysqd4vOWJOSqkyzETr2uMkAg@mail.gmail.com>
References: <e6b8123fd4af42d78ce33ce3fee50851@SIXPR01MB224.apcprd01.prod.exchangelabs.com>
	<CAGSjAUCK1kTfpRKnuj6f4dieiFysqd4vOWJOSqkyzETr2uMkAg@mail.gmail.com>
Message-ID: <CADwqtCOVoP_okamqtRdfMNc-rE7VwE5gqAC1oM1+q5D0ULBqyg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140117/f09f3344/attachment.pl>

From peter.meilstrup at gmail.com  Fri Jan 17 11:01:42 2014
From: peter.meilstrup at gmail.com (Peter Meilstrup)
Date: Fri, 17 Jan 2014 02:01:42 -0800
Subject: [Rd] How to debug an R package (with C code)
In-Reply-To: <CADwqtCOVoP_okamqtRdfMNc-rE7VwE5gqAC1oM1+q5D0ULBqyg@mail.gmail.com>
References: <e6b8123fd4af42d78ce33ce3fee50851@SIXPR01MB224.apcprd01.prod.exchangelabs.com>
	<CAGSjAUCK1kTfpRKnuj6f4dieiFysqd4vOWJOSqkyzETr2uMkAg@mail.gmail.com>
	<CADwqtCOVoP_okamqtRdfMNc-rE7VwE5gqAC1oM1+q5D0ULBqyg@mail.gmail.com>
Message-ID: <CAJoaRhbeSJ9oLL5mPNOrZ59qbesz=RG0B8qDrnMQMvR8FrTVkg@mail.gmail.com>

On Fri, Jan 17, 2014 at 12:43 AM, Gabriel Becker <gmbecker at ucdavis.edu> wrote:
> There were some deeper issues with what you asked, though. Sourcing an R
> file will have no effect on a package in the namespace at all unless you
> are using something like ESS's developer mode which sources the file into
> the package namespace. Furthermore, C code included in R packages is only
> compiled at installation from source or binary build time.
>
> Even if you are using a developer mode, sourcing an R file will have no
> effect on a) the shared object library (DLL/so/dylib) available in the R
> session, nor which shared objects are associated with the package. There
> are ways to unload shared libraries within an R session, but personally I
> tend to avoid them. The best way of being absolutely sure that the right
> shared library is getting used is to reinstall the package, then close the
> R session and restart.

I value having a short turnaround time in debugging over such absolute
surety, so I would recommend using load_all from Hadley's devtools
package, which is usually able to recompile and reload the library
without restarting R. I think the OP indicated that they are using
RStudio, which should have a way to drive devtools (still, "source"
would be the wrong command.)

Peter


From ligges at statistik.tu-dortmund.de  Fri Jan 17 11:48:06 2014
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 17 Jan 2014 11:48:06 +0100
Subject: [Rd] file.exists does not like path names ending in /
In-Reply-To: <CAP01uRmStfL2Kd0AK0KGGkdeUY_Qbde885AfSDy8VNDHbras7g@mail.gmail.com>
References: <CAP01uRmStfL2Kd0AK0KGGkdeUY_Qbde885AfSDy8VNDHbras7g@mail.gmail.com>
Message-ID: <52D90A66.1010501@statistik.tu-dortmund.de>



On 17.01.2014 06:10, Gabor Grothendieck wrote:
> If a path name ends in slash then file.exists says it does not exist.
> I would have expected these to all return TRUE.
>
>> file.exists("/Program Files")
> [1] TRUE
>> file.exists("/Program Files/")
> [1] FALSE
>> file.exists(normalizePath("/Program Files/"))
> [1] FALSE
>> R.version.string
> [1] "R version 3.0.2 Patched (2013-11-25 r64299)"
>
> I am using Windows 8.1 .
>


See ?file.exists:

"(However, directory names must not include a trailing backslash or 
slash on Windows.)"

Note also that  "/Program Files" is not safe anyway since it is relative 
to the current drive.

Best,
Uwe Ligges


From maechler at stat.math.ethz.ch  Fri Jan 17 12:16:49 2014
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 17 Jan 2014 12:16:49 +0100
Subject: [Rd] file.exists does not like path names ending in /
In-Reply-To: <CAP01uRmStfL2Kd0AK0KGGkdeUY_Qbde885AfSDy8VNDHbras7g@mail.gmail.com>
References: <CAP01uRmStfL2Kd0AK0KGGkdeUY_Qbde885AfSDy8VNDHbras7g@mail.gmail.com>
Message-ID: <21209.4385.976759.215210@stat.math.ethz.ch>

>>>>> Gabor Grothendieck <ggrothendieck at gmail.com>
>>>>>     on Fri, 17 Jan 2014 00:10:43 -0500 writes:

    > If a path name ends in slash then file.exists says it does
    > not exist.  I would have expected these to all return
    > TRUE.

    >> file.exists("/Program Files")
    > [1] TRUE
    >> file.exists("/Program Files/")
    > [1] FALSE
    >> file.exists(normalizePath("/Program Files/"))
    > [1] FALSE
    >> R.version.string
    > [1] "R version 3.0.2 Patched (2013-11-25 r64299)"

I would also have expected all these to work,
but that is only because I do not use Windows;
indeed, for me  (Linux Fedora 19, but I'm pretty sure *any*
version):

  > dir.create("/tmp/foo bar")
  > normalizePath("/tmp/foo bar/")
  [1] "/tmp/foo bar"
  > file.exists("/tmp/foo bar/")
  [1] TRUE
  > file.exists(normalizePath("/tmp/foo bar/"))
  [1] TRUE
  > 


    > I am using Windows 8.1 .

poor you  ;-)   yes, don't take it personally

Last but not least   ?file.exists   in its  'Details' section
mentions several times how Windows behaves differently from the 
civilized world (:-)
notably that it also says 

  (However,
     directory names must not include a trailing backslash or slash on
     Windows.)

So, all seems as documented, but unfortunately your (and most
probably not only yours !!) expectations are different.
I agree that this is quite unfortunate, and we all would be
happy if OSes were consistent here.

I wonder if R couldn't help you (and many others) better to
gloss over these OS differences in a helpful way.
This list may be a good place to discuss such proposals ...

Martin

-- 
Martin Maechler ETH Zurich -- and R Core Team


From ggrothendieck at gmail.com  Fri Jan 17 14:56:02 2014
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 17 Jan 2014 08:56:02 -0500
Subject: [Rd] file.exists does not like path names ending in /
In-Reply-To: <21209.4385.976759.215210@stat.math.ethz.ch>
References: <CAP01uRmStfL2Kd0AK0KGGkdeUY_Qbde885AfSDy8VNDHbras7g@mail.gmail.com>
	<21209.4385.976759.215210@stat.math.ethz.ch>
Message-ID: <CAP01uRmv3VmecKQMtyoAQM_yifKXcKtw1D66djbJ459fxtQRGw@mail.gmail.com>

On Fri, Jan 17, 2014 at 6:16 AM, Martin Maechler
<maechler at stat.math.ethz.ch> wrote:
>>>>>> Gabor Grothendieck <ggrothendieck at gmail.com>
>>>>>>     on Fri, 17 Jan 2014 00:10:43 -0500 writes:
>
>     > If a path name ends in slash then file.exists says it does
>     > not exist.  I would have expected these to all return
>     > TRUE.
>
>     >> file.exists("/Program Files")
>     > [1] TRUE
>     >> file.exists("/Program Files/")
>     > [1] FALSE
>     >> file.exists(normalizePath("/Program Files/"))
>     > [1] FALSE
>     >> R.version.string
>     > [1] "R version 3.0.2 Patched (2013-11-25 r64299)"
>
> I would also have expected all these to work,
> but that is only because I do not use Windows;
> indeed, for me  (Linux Fedora 19, but I'm pretty sure *any*
> version):
>
>   > dir.create("/tmp/foo bar")
>   > normalizePath("/tmp/foo bar/")
>   [1] "/tmp/foo bar"
>   > file.exists("/tmp/foo bar/")
>   [1] TRUE
>   > file.exists(normalizePath("/tmp/foo bar/"))
>   [1] TRUE
>   >
>
>
>     > I am using Windows 8.1 .
>
> poor you  ;-)   yes, don't take it personally
>
> Last but not least   ?file.exists   in its  'Details' section
> mentions several times how Windows behaves differently from the
> civilized world (:-)
> notably that it also says
>
>   (However,
>      directory names must not include a trailing backslash or slash on
>      Windows.)
>
> So, all seems as documented, but unfortunately your (and most
> probably not only yours !!) expectations are different.
> I agree that this is quite unfortunate, and we all would be
> happy if OSes were consistent here.
>
> I wonder if R couldn't help you (and many others) better to
> gloss over these OS differences in a helpful way.
> This list may be a good place to discuss such proposals ...
>

I do find that sometimes I have to deal with paths that I did not
create that end in / or \.  At the moment I am using this to avoid the
problem:

File.exists <- function(x) {
   if (.Platform$OS == "windows" && grepl("[/\\]$", x)) {
       file.exists(dirname(x))
   } else file.exists(x)
}

but it would be nice if that could be done by file.exists itself.


-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From csardi.gabor at gmail.com  Fri Jan 17 15:17:48 2014
From: csardi.gabor at gmail.com (=?ISO-8859-1?B?R+Fib3IgQ3PhcmRp?=)
Date: Fri, 17 Jan 2014 09:17:48 -0500
Subject: [Rd] How to debug an R package (with C code)
In-Reply-To: <CADwqtCOVoP_okamqtRdfMNc-rE7VwE5gqAC1oM1+q5D0ULBqyg@mail.gmail.com>
References: <e6b8123fd4af42d78ce33ce3fee50851@SIXPR01MB224.apcprd01.prod.exchangelabs.com>
	<CAGSjAUCK1kTfpRKnuj6f4dieiFysqd4vOWJOSqkyzETr2uMkAg@mail.gmail.com>
	<CADwqtCOVoP_okamqtRdfMNc-rE7VwE5gqAC1oM1+q5D0ULBqyg@mail.gmail.com>
Message-ID: <CABtg=K=hLinQGj3Hu4h6KX7hBUk=QOiBLTGuTsFD=KKyZs+48g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140117/72976b5b/attachment.pl>

From h.wickham at gmail.com  Fri Jan 17 15:35:54 2014
From: h.wickham at gmail.com (Hadley Wickham)
Date: Fri, 17 Jan 2014 08:35:54 -0600
Subject: [Rd] How to debug an R package (with C code)
In-Reply-To: <CAJoaRhbeSJ9oLL5mPNOrZ59qbesz=RG0B8qDrnMQMvR8FrTVkg@mail.gmail.com>
References: <e6b8123fd4af42d78ce33ce3fee50851@SIXPR01MB224.apcprd01.prod.exchangelabs.com>
	<CAGSjAUCK1kTfpRKnuj6f4dieiFysqd4vOWJOSqkyzETr2uMkAg@mail.gmail.com>
	<CADwqtCOVoP_okamqtRdfMNc-rE7VwE5gqAC1oM1+q5D0ULBqyg@mail.gmail.com>
	<CAJoaRhbeSJ9oLL5mPNOrZ59qbesz=RG0B8qDrnMQMvR8FrTVkg@mail.gmail.com>
Message-ID: <CABdHhvGNGPTKRd5jY8BH8ZAnYHDwD7drayjoirNCGvcLuN4ePw@mail.gmail.com>

>> Even if you are using a developer mode, sourcing an R file will have no
>> effect on a) the shared object library (DLL/so/dylib) available in the R
>> session, nor which shared objects are associated with the package. There
>> are ways to unload shared libraries within an R session, but personally I
>> tend to avoid them. The best way of being absolutely sure that the right
>> shared library is getting used is to reinstall the package, then close the
>> R session and restart.
>
> I value having a short turnaround time in debugging over such absolute
> surety, so I would recommend using load_all from Hadley's devtools
> package, which is usually able to recompile and reload the library
> without restarting R. I think the OP indicated that they are using
> RStudio, which should have a way to drive devtools (still, "source"
> would be the wrong command.)

In Rstudio, devtools::load_all() is bound to Cmd + shift + L. Rstudio
also provides Build and reload, which builds the package, restarts R
and reloads it.  This is a little slower than load_all(), but also a
little more accurate so can come in handy from time-to-time.

Hadley

-- 
http://had.co.nz/


From kirill.mueller at ivt.baug.ethz.ch  Fri Jan 17 18:25:41 2014
From: kirill.mueller at ivt.baug.ethz.ch (=?ISO-8859-1?Q?Kirill_M=FCller?=)
Date: Fri, 17 Jan 2014 18:25:41 +0100
Subject: [Rd] file.exists does not like path names ending in /
In-Reply-To: <CAP01uRmv3VmecKQMtyoAQM_yifKXcKtw1D66djbJ459fxtQRGw@mail.gmail.com>
References: <CAP01uRmStfL2Kd0AK0KGGkdeUY_Qbde885AfSDy8VNDHbras7g@mail.gmail.com>	<21209.4385.976759.215210@stat.math.ethz.ch>
	<CAP01uRmv3VmecKQMtyoAQM_yifKXcKtw1D66djbJ459fxtQRGw@mail.gmail.com>
Message-ID: <52D96795.8040604@ivt.baug.ethz.ch>

On 01/17/2014 02:56 PM, Gabor Grothendieck wrote:
> At the moment I am using this to avoid the
> problem:
>
> File.exists <- function(x) {
>     if (.Platform$OS == "windows" && grepl("[/\\]$", x)) {
>         file.exists(dirname(x))
>     } else file.exists(x)
> }
>
> but it would be nice if that could be done by file.exists itself.
I think that ignoring a terminal slash/backslash on Windows would do no 
harm: It would improve consistency between platforms, and perhaps nobody 
really relies on the current behavior. Would shorten the documentation, too.


-Kirill


From wdunlap at tibco.com  Fri Jan 17 19:35:18 2014
From: wdunlap at tibco.com (William Dunlap)
Date: Fri, 17 Jan 2014 18:35:18 +0000
Subject: [Rd] file.exists does not like path names ending in /
In-Reply-To: <52D96795.8040604@ivt.baug.ethz.ch>
References: <CAP01uRmStfL2Kd0AK0KGGkdeUY_Qbde885AfSDy8VNDHbras7g@mail.gmail.com>
	<21209.4385.976759.215210@stat.math.ethz.ch>
	<CAP01uRmv3VmecKQMtyoAQM_yifKXcKtw1D66djbJ459fxtQRGw@mail.gmail.com>
	<52D96795.8040604@ivt.baug.ethz.ch>
Message-ID: <E66794E69CFDE04D9A70842786030B933FA2242F@PA-MBX01.na.tibco.com>

> I think that ignoring a terminal slash/backslash on Windows would do no
> harm:

Windows makes a distinction between "C:" and "C:/": the former is
not a file (or directory) and the latter is.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org] On Behalf
> Of Kirill M?ller
> Sent: Friday, January 17, 2014 9:26 AM
> To: r-devel at r-project.org
> Subject: Re: [Rd] file.exists does not like path names ending in /
> 
> On 01/17/2014 02:56 PM, Gabor Grothendieck wrote:
> > At the moment I am using this to avoid the
> > problem:
> >
> > File.exists <- function(x) {
> >     if (.Platform$OS == "windows" && grepl("[/\\]$", x)) {
> >         file.exists(dirname(x))
> >     } else file.exists(x)
> > }
> >
> > but it would be nice if that could be done by file.exists itself.
> I think that ignoring a terminal slash/backslash on Windows would do no
> harm: It would improve consistency between platforms, and perhaps nobody
> really relies on the current behavior. Would shorten the documentation, too.
> 
> 
> -Kirill
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From csardi.gabor at gmail.com  Fri Jan 17 19:58:03 2014
From: csardi.gabor at gmail.com (=?ISO-8859-1?B?R+Fib3IgQ3PhcmRp?=)
Date: Fri, 17 Jan 2014 13:58:03 -0500
Subject: [Rd] rexp, different results on 32/64 bit
Message-ID: <CABtg=KmC4GJmACQ=XjFHrJ6jRyrk4ZnscN-TzS0DYgpfkZPPMQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140117/eabd44b1/attachment.pl>

From kirill.mueller at ivt.baug.ethz.ch  Fri Jan 17 20:01:28 2014
From: kirill.mueller at ivt.baug.ethz.ch (=?ISO-8859-1?Q?Kirill_M=FCller?=)
Date: Fri, 17 Jan 2014 20:01:28 +0100
Subject: [Rd] file.exists does not like path names ending in /
In-Reply-To: <E66794E69CFDE04D9A70842786030B933FA2242F@PA-MBX01.na.tibco.com>
References: <CAP01uRmStfL2Kd0AK0KGGkdeUY_Qbde885AfSDy8VNDHbras7g@mail.gmail.com>	<21209.4385.976759.215210@stat.math.ethz.ch>	<CAP01uRmv3VmecKQMtyoAQM_yifKXcKtw1D66djbJ459fxtQRGw@mail.gmail.com>
	<52D96795.8040604@ivt.baug.ethz.ch>
	<E66794E69CFDE04D9A70842786030B933FA2242F@PA-MBX01.na.tibco.com>
Message-ID: <52D97E08.5050705@ivt.baug.ethz.ch>

On 01/17/2014 07:35 PM, William Dunlap wrote:
>> I think that ignoring a terminal slash/backslash on Windows would do no
>> >harm:
> Windows makes a distinction between "C:" and "C:/": the former is
> not a file (or directory) and the latter is.
But, according to the documentation, neither would be currently detected 
by file.exists, while the latter is a directory, as you said, and should 
be detected as such.


-Kirill


From hb at biostat.ucsf.edu  Fri Jan 17 21:39:24 2014
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Fri, 17 Jan 2014 12:39:24 -0800
Subject: [Rd] file.exists does not like path names ending in /
In-Reply-To: <52D97E08.5050705@ivt.baug.ethz.ch>
References: <CAP01uRmStfL2Kd0AK0KGGkdeUY_Qbde885AfSDy8VNDHbras7g@mail.gmail.com>
	<21209.4385.976759.215210@stat.math.ethz.ch>
	<CAP01uRmv3VmecKQMtyoAQM_yifKXcKtw1D66djbJ459fxtQRGw@mail.gmail.com>
	<52D96795.8040604@ivt.baug.ethz.ch>
	<E66794E69CFDE04D9A70842786030B933FA2242F@PA-MBX01.na.tibco.com>
	<52D97E08.5050705@ivt.baug.ethz.ch>
Message-ID: <CAFDcVCR_zvjPzk3V_-LYdC2W4LA78n-4yFgc58q-nHaoO4JYEQ@mail.gmail.com>

1. This is one of the reasons for isFile() and isDirectory() in
R.utils.  I add "workarounds" as new ones are discovered.

2. This works (and also tests for existence of a *directory*):

> file_test("-d", "C:/Program Files")
[1] TRUE
> file_test("-d", "C:/Program Files/")
[1] TRUE

3a. "C:" and "C:/" (at the root) are rather special border cases and
they should mean difference things (just as they do at the Windows
command prompt), e.g.

> setwd("C:/Program Files/")
> getwd()
[1] "C:/Program Files"
> setwd("T:/tmp/")
> getwd()
[1] "T:/tmp"
> setwd("C:")
> getwd()
[1] "C:/Program Files"
> setwd("T:")
> getwd()
[1] "T:/tmp"

(A feature rarely used, but correct.)

3b. Contrary to OP's example, file.exists() works correctly on both
these cases (at least back to R 2.15.3), e.g.

> file.exists("C:")
[1] FALSE
> file.exists("C:/")
[1] TRUE

3c. Related: An inconsistency in file.info("C:/") with workaround
file.info("C:/.") was fixed as of R 3.0.2, cf.
https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=15302

/Henrik


On Fri, Jan 17, 2014 at 11:01 AM, Kirill M?ller
<kirill.mueller at ivt.baug.ethz.ch> wrote:
> On 01/17/2014 07:35 PM, William Dunlap wrote:
>>>
>>> I think that ignoring a terminal slash/backslash on Windows would do no
>>> >harm:
>>
>> Windows makes a distinction between "C:" and "C:/": the former is
>> not a file (or directory) and the latter is.
>
> But, according to the documentation, neither would be currently detected by
> file.exists, while the latter is a directory, as you said, and should be
> detected as such.
>
>
>
> -Kirill
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From tal.galili at gmail.com  Fri Jan 17 23:20:47 2014
From: tal.galili at gmail.com (Tal Galili)
Date: Sat, 18 Jan 2014 00:20:47 +0200
Subject: [Rd] wrong MD5 checksums in R 3.0.2
Message-ID: <CANdJ3dUnA2tE-UU-FeVPpM1p5RZSjuCBpO2=BNi+hekq9owC-Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140118/e2149198/attachment.pl>

From johnzhao2835 at gmail.com  Sat Jan 18 09:01:44 2014
From: johnzhao2835 at gmail.com (=?gb2312?B?1dTX1Me/?=)
Date: Sat, 18 Jan 2014 16:01:44 +0800
Subject: [Rd] Error when making R in Windows
Message-ID: <000e01cf1423$89489540$9bd9bfc0$@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140118/02005ea8/attachment.pl>

From ripley at stats.ox.ac.uk  Sat Jan 18 11:31:49 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 18 Jan 2014 10:31:49 +0000
Subject: [Rd] Error when making R in Windows
In-Reply-To: <000e01cf1423$89489540$9bd9bfc0$@gmail.com>
References: <000e01cf1423$89489540$9bd9bfc0$@gmail.com>
Message-ID: <52DA5815.9070408@stats.ox.ac.uk>

The issue is that your version of Windows is not properly changing to a 
C locale.  The solution is to start the build in an 8-bit (preferably C) 
locale.

This is documented in R-patched at least: see the posting guide (which 
asked you to try R-patched before posting) and 
http://cran.r-project.org/doc/manuals/r-patched/R-admin.html#Building-from-source

BTW: your email is not encoded correctly, so it may be that you have 
more pervasive locale breakages on your system.


On 18/01/2014 08:01, ??? wrote:
> Hi all,
>
>           I??m trying to build R (32-bit) under Windows 7 (64-bit).
>
>           To do so, I just use ??make all recommended?? as mentioned in the
> documents and it does work for R 2.15.2.
>
>           However, for R 3.0.2, I get the following error message,
>
>                     gcc -shared -s -static-libgcc -o tools.dll tmp.def text.o
> init.o Rmd5.o md5.o signals.o install.o getfmts.o http.o gramLatex.o gramRd.
> o ../../../gnuwin32/dllversion.o -L../.././../bin/i386 -lR
>
> Error in parse(n = -1, file = file, srcfile = NULL, keep.source = FALSE) :
>
>    invalid multibyte character in parser at line 32021
>
> Error: unable to load R code in package 'tools'
>
> Execution halted
>
> make[2]: *** [all] Error 1
>
> make[1]: *** [R] Error 1
>
> make: *** [all] Error 2
>
>           It seems that I get stuck in building the package ??tools??.
>
> Shall I just replace the codes for ??tools?? with those from R 2.15.2?
>
>           Thanks for your help.
>
> Ziqiang Zhao
>
> 2014-01-18
>
>
>
>
>
>
> 	[[alternative HTML version deleted]]
>
>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From alsergbox at gmail.com  Sat Jan 18 14:18:16 2014
From: alsergbox at gmail.com (Alexey Sergushichev)
Date: Sat, 18 Jan 2014 17:18:16 +0400
Subject: [Rd] Using unit-tests as examples
Message-ID: <CAMGHQ97ct+FQc361micsLrx8CYnFE8WHvCBtVLvWL82bdpDFhA@mail.gmail.com>

Hi,

Which is the best way to use unit tests as examples for documentation?
I use testthat, but if there is a good way to do this, for example,
only with RUnit, it'd still be good to know.

Unit-tests are usually simple and concise, so they are good candidates
for example code, but I don't want to copy them into documentation and
maintain by hands. I tried to google how people handle this, but
didn't find anything.

---
Best regards,
Alexey


From axel.urbiz at gmail.com  Sat Jan 18 15:31:19 2014
From: axel.urbiz at gmail.com (Axel Urbiz)
Date: Sat, 18 Jan 2014 15:31:19 +0100
Subject: [Rd] My first package
Message-ID: <CAAyVsXKQ+e_2xaZVNcTk3jm173KEKixai99FiSn9P1mB16AH0w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140118/5c7d77cf/attachment.pl>

From simon.urbanek at r-project.org  Sat Jan 18 16:25:08 2014
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 18 Jan 2014 10:25:08 -0500
Subject: [Rd] My first package
In-Reply-To: <CAAyVsXKQ+e_2xaZVNcTk3jm173KEKixai99FiSn9P1mB16AH0w@mail.gmail.com>
References: <CAAyVsXKQ+e_2xaZVNcTk3jm173KEKixai99FiSn9P1mB16AH0w@mail.gmail.com>
Message-ID: <7D1846C9-892A-4C9B-B7C3-4979DC557053@r-project.org>


On Jan 18, 2014, at 9:31 AM, Axel Urbiz <axel.urbiz at gmail.com> wrote:

> Hi All,
> 
> 
> I'm planning to submit my first package to R, and although I read all the
> documentation, I'm not very clear on the following 2 items, from which I'd
> appreciate your guidance:
> 
> 
> 1)I understand it is suggested to use the R dev version to build the
> package. Which one specifically should I use to build a package on a Mac
> OS? How about package dependencies, which version should I install on the R
> dev version (and where should I get them)?
> 

You can get latest R-devel builds for Mac OS X from

http://r.research.att.com

and the same is true for binary packages for R-devel - simply use http://r.research.att.com as the repository (in fact most CRAN mirrors should work as well).

Cheers,
Simon


> 2) Not sure if this one belongs to this list. Does licensing follow the
> logic of "inheritance" (i.e. if all the package dependencies of my package
> are "GPL-2 | GPL-3", does my package need to use the same license agreement?
> 
> 
> 
> Thanks!
> 
> Axel.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


From ripley at stats.ox.ac.uk  Sat Jan 18 16:42:34 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 18 Jan 2014 15:42:34 +0000
Subject: [Rd] [R-SIG-Mac]  My first package
In-Reply-To: <7D1846C9-892A-4C9B-B7C3-4979DC557053@r-project.org>
References: <CAAyVsXKQ+e_2xaZVNcTk3jm173KEKixai99FiSn9P1mB16AH0w@mail.gmail.com>
	<7D1846C9-892A-4C9B-B7C3-4979DC557053@r-project.org>
Message-ID: <52DAA0EA.8020700@stats.ox.ac.uk>

On 18/01/2014 15:25, Simon Urbanek wrote:
>
> On Jan 18, 2014, at 9:31 AM, Axel Urbiz <axel.urbiz at gmail.com> wrote:
>
>> Hi All,
>>
>>
>> I'm planning to submit my first package to R, and although I read all the

To CRAN, not 'to R', I guess.

>> documentation, I'm not very clear on the following 2 items, from which I'd
>> appreciate your guidance:
>>
>>
>> 1)I understand it is suggested to use the R dev version to build the

'R-devel', not 'R dev': see the R FAQ.

>> package. Which one specifically should I use to build a package on a Mac
>> OS? How about package dependencies, which version should I install on the R
>> dev version (and where should I get them)?
>>
>
> You can get latest R-devel builds for Mac OS X from
>
> http://r.research.att.com
>
> and the same is true for binary packages for R-devel - simply use http://r.research.att.com as the repository (in fact most CRAN mirrors should work as well).
> Cheers,
> Simon
>
>
>> 2) Not sure if this one belongs to this list. Does licensing follow the
>> logic of "inheritance" (i.e. if all the package dependencies of my package
>> are "GPL-2 | GPL-3", does my package need to use the same license agreement?

No, but it needs to use a *compatible* one.  As the default use one 
package makes of another is fairly 'hands off', this mainly means that 
you cannot require dependencies whose usage conditions contradict those 
of your package.  For one specific CRAN interpretation of this, see its 
policies.

[Dependencies involving closer connections such as some of those 
implemented via LinkingTo may impose more stringent compatibility tests.]


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From h.wickham at gmail.com  Sat Jan 18 16:43:07 2014
From: h.wickham at gmail.com (Hadley Wickham)
Date: Sat, 18 Jan 2014 09:43:07 -0600
Subject: [Rd] Using unit-tests as examples
In-Reply-To: <CAMGHQ97ct+FQc361micsLrx8CYnFE8WHvCBtVLvWL82bdpDFhA@mail.gmail.com>
References: <CAMGHQ97ct+FQc361micsLrx8CYnFE8WHvCBtVLvWL82bdpDFhA@mail.gmail.com>
Message-ID: <CABdHhvFbSqmyE6zYWvXw5NKJ1NXq4e2aFc8WzPqkiM2d4U445A@mail.gmail.com>

If you're using roxygen2, you can use @example tag to include an
external file into the examples.

Hadley

On Sat, Jan 18, 2014 at 7:18 AM, Alexey Sergushichev
<alsergbox at gmail.com> wrote:
> Hi,
>
> Which is the best way to use unit tests as examples for documentation?
> I use testthat, but if there is a good way to do this, for example,
> only with RUnit, it'd still be good to know.
>
> Unit-tests are usually simple and concise, so they are good candidates
> for example code, but I don't want to copy them into documentation and
> maintain by hands. I tried to google how people handle this, but
> didn't find anything.
>
> ---
> Best regards,
> Alexey
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel



-- 
http://had.co.nz/


From ripley at stats.ox.ac.uk  Sun Jan 19 08:45:02 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 19 Jan 2014 07:45:02 +0000
Subject: [Rd] rexp, different results on 32/64 bit
In-Reply-To: <CABtg=KmC4GJmACQ=XjFHrJ6jRyrk4ZnscN-TzS0DYgpfkZPPMQ@mail.gmail.com>
References: <CABtg=KmC4GJmACQ=XjFHrJ6jRyrk4ZnscN-TzS0DYgpfkZPPMQ@mail.gmail.com>
Message-ID: <52DB827E.9090506@stats.ox.ac.uk>

On 17/01/2014 18:58, G?bor Cs?rdi wrote:
> Hi all,
>
> I just run into this today. Apparently rexp() sometimes gives different
> slightly results for the same seed on 32 bit and 64 bit machines. runif()
> is the same for both, so the problem seems to be in rexp().

Rather, the 'problem' is in your expectations: different builds of R 
should be expected to give different results.

A better way to look at the fine detail of doubles is

 > sprintf("%a", foo) # 64-bit
[1] "0x1.1f5a6e68a593p-2"
 > sprintf("%a", foo) # 32-bit
[1] "0x1.1f5a6e68a5931p-2"

on my Fedora box.  (Otherwise the difference might well have been in the 
binary to decimal conversion used for printing.)

And for the record: the reasons 32-bit results are often different
include that the lowest common denominator for i686 cpus[*] is lower
than for x86_64 ones. Also, the OS X results quoted most likely are for
the CRAN distribution using a rather old compiler which does not
optimize as well as current ones, and you are comparing different
runtimes (libc), whereas I was comparing i686 and x86_64 compiles on the
same machine, with the same compiler/runtime versions.

[*] And for R for Windows i386 cpus are still supported, alongside 
Windows XP.

>
> 64 bit Linux is the same as 64 bit OSX, and R-devel gives the same results
> as R-3.0.2.
>
> Best,
> Gabor
>
> # ---------------------------------------------
>> options(digits=22) ; set.seed(9) ; rexp(1, 5)
> [1] 0.2806184054728815824298
>> options(digits=22) ; set.seed(9) ; runif(1)
> [1] 0.2216013972647488117218
>> sessionInfo()
> R version 3.0.2 (2013-09-25)
> Platform: i686-pc-linux-gnu (32-bit)
>
> locale:
>   [1] LC_CTYPE=en_US.utf8       LC_NUMERIC=C
>   [3] LC_TIME=en_US.utf8        LC_COLLATE=en_US.utf8
>   [5] LC_MONETARY=en_US.utf8    LC_MESSAGES=en_US.utf8
>   [7] LC_PAPER=en_US.utf8       LC_NAME=C
>   [9] LC_ADDRESS=C              LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.utf8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> # ---------------------------------------------
>> options(digits=22) ; set.seed(9) ; rexp(1, 5)
> [1] 0.2806184054728815269186
>> options(digits=22) ; set.seed(9) ; runif(1)
> [1] 0.2216013972647488117218
>> sessionInfo()
> R version 3.0.2 (2013-09-25)
> Platform: x86_64-apple-darwin10.8.0 (64-bit)
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From csardi.gabor at gmail.com  Sun Jan 19 15:50:46 2014
From: csardi.gabor at gmail.com (=?ISO-8859-1?B?R+Fib3IgQ3PhcmRp?=)
Date: Sun, 19 Jan 2014 09:50:46 -0500
Subject: [Rd] rexp, different results on 32/64 bit
In-Reply-To: <52DB827E.9090506@stats.ox.ac.uk>
References: <CABtg=KmC4GJmACQ=XjFHrJ6jRyrk4ZnscN-TzS0DYgpfkZPPMQ@mail.gmail.com>
	<52DB827E.9090506@stats.ox.ac.uk>
Message-ID: <CABtg=KnProfjYWALOJOvexpy7ekxdiL-1Aogxa=9HV-PmA7tNQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140119/79f27b75/attachment.pl>

From cubranic at stat.ubc.ca  Sun Jan 19 19:53:13 2014
From: cubranic at stat.ubc.ca (Davor Cubranic)
Date: Sun, 19 Jan 2014 10:53:13 -0800
Subject: [Rd] How to debug an R package (with C code)
In-Reply-To: <CABtg=K=hLinQGj3Hu4h6KX7hBUk=QOiBLTGuTsFD=KKyZs+48g@mail.gmail.com>
References: <e6b8123fd4af42d78ce33ce3fee50851@SIXPR01MB224.apcprd01.prod.exchangelabs.com>
	<CAGSjAUCK1kTfpRKnuj6f4dieiFysqd4vOWJOSqkyzETr2uMkAg@mail.gmail.com>
	<CADwqtCOVoP_okamqtRdfMNc-rE7VwE5gqAC1oM1+q5D0ULBqyg@mail.gmail.com>
	<CABtg=K=hLinQGj3Hu4h6KX7hBUk=QOiBLTGuTsFD=KKyZs+48g@mail.gmail.com>
Message-ID: <066FC036-FC93-4BE8-B686-6C301B8B8596@stat.ubc.ca>

On Jan 17, 2014, at 6:17 AM, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:

> Small note: if you are using a recent version of OSX, then gdb is
> essentially useless, but you can use llvm, which is nicer in many respects,
> anyway.


What do you mean by this? Gdb is a debugger, and LLVM is a compiler infrastructure. Perhaps you mean ?lldb??

Why do you say gdb is useless anyways? I haven?t seen any problems with it on Mavericks.

Davor

From csardi.gabor at gmail.com  Sun Jan 19 19:58:08 2014
From: csardi.gabor at gmail.com (=?ISO-8859-1?B?R+Fib3IgQ3PhcmRp?=)
Date: Sun, 19 Jan 2014 13:58:08 -0500
Subject: [Rd] How to debug an R package (with C code)
In-Reply-To: <066FC036-FC93-4BE8-B686-6C301B8B8596@stat.ubc.ca>
References: <e6b8123fd4af42d78ce33ce3fee50851@SIXPR01MB224.apcprd01.prod.exchangelabs.com>
	<CAGSjAUCK1kTfpRKnuj6f4dieiFysqd4vOWJOSqkyzETr2uMkAg@mail.gmail.com>
	<CADwqtCOVoP_okamqtRdfMNc-rE7VwE5gqAC1oM1+q5D0ULBqyg@mail.gmail.com>
	<CABtg=K=hLinQGj3Hu4h6KX7hBUk=QOiBLTGuTsFD=KKyZs+48g@mail.gmail.com>
	<066FC036-FC93-4BE8-B686-6C301B8B8596@stat.ubc.ca>
Message-ID: <CABtg=KnThTj=gaWCKWk5jF8jmw73dYCPpd_WudRKOTxCKjXF0Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140119/ae1ae3f9/attachment.pl>

From baptiste.auguie at gmail.com  Sun Jan 19 20:45:55 2014
From: baptiste.auguie at gmail.com (baptiste auguie)
Date: Sun, 19 Jan 2014 17:45:55 -0200
Subject: [Rd] formals() adds 0 to complex function arguments
Message-ID: <CANLFJPpnu2_n9qPXMGnRCupNWtrS6Mm_TjH-pTkSdvUQ523sLA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140119/edfec433/attachment.pl>

From pdalgd at gmail.com  Sun Jan 19 22:16:16 2014
From: pdalgd at gmail.com (peter dalgaard)
Date: Sun, 19 Jan 2014 22:16:16 +0100
Subject: [Rd] formals() adds 0 to complex function arguments
In-Reply-To: <CANLFJPpnu2_n9qPXMGnRCupNWtrS6Mm_TjH-pTkSdvUQ523sLA@mail.gmail.com>
References: <CANLFJPpnu2_n9qPXMGnRCupNWtrS6Mm_TjH-pTkSdvUQ523sLA@mail.gmail.com>
Message-ID: <7630243D-EAA3-4FDA-89D5-25CAEDFEAC94@gmail.com>

It's not formals() that is doing you in. Rather, it is a conspiration between two things: 
(a) R always displays complex constants as x+yi, even if x is zero and (b) there really is no way to specify complex constants with non-zero  real part, i.e. 1+2i is a sum of a real and and imaginary complex constant. You can see the effect already at

> quote(1+2i)
1 + (0+2i)


> q <- quote(1+2i)
> q[[1]]
`+`
> q[[2]]
[1] 1
> q[[3]]
[1] 0+2i
> str(q)
 language 1 + (0+2i)
> str(q[[3]])
 cplx 0+2i

Someone might want to fix this by implementing a full syntax for complex constants, but meanwhile, I think a passable workaround could be

> formals(test)$a <- 1+2i
> args(test)
function (a = 1+2i) 
NULL
> test
function (a = 1+2i) 
{
}


Or maybe, less sneaky

Cplx_1plus2i <- 1+2i
test <- function(a = Cplx_1plus2i){}

-pd 


On 19 Jan 2014, at 20:45 , baptiste auguie <baptiste.auguie at gmail.com> wrote:

> Dear list,
> 
> I'm facing an issue with the automated documentation of a function using
> roxygen2. The function has a complex-valued default argument, which is
> picked up by roxygen2 using formals() to generate the corresponding Usage
> section of the Rd file. Unfortunately, it appears that formals() reformats
> complex numbers. Consider the example below,
> 
> test <- function(a = 1+2i){}
> 
>> args(test)
> function (a = 1 + (0+2i))
>  NULL
>> formals(test)
> $a
> 1 + (0+2i)
> 
> As a result, R CMD check issues a warning that my Rd file is inconsistent
> between Code and Docs. Redefining the function with this syntax (a = 1 +
> (0+2i)) doesn't help, as a new 0 gets added to become 1 + (0 + (0+2i)).
> 
> Is this reformatting necessary?
> 
> Regards,
> 
> baptiste
> 
> sessionInfo()
> R Under development (unstable) (2013-11-25 r64299)
> Platform: x86_64-apple-darwin10.8.0 (64-bit)
> 
> locale:
> [1] en_NZ.UTF-8/en_NZ.UTF-8/en_NZ.UTF-8/C/en_NZ.UTF-8/en_NZ.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> loaded via a namespace (and not attached):
> [1] tools_3.1.0
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From murdoch.duncan at gmail.com  Sun Jan 19 22:45:57 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 19 Jan 2014 16:45:57 -0500
Subject: [Rd] formals() adds 0 to complex function arguments
In-Reply-To: <7630243D-EAA3-4FDA-89D5-25CAEDFEAC94@gmail.com>
References: <CANLFJPpnu2_n9qPXMGnRCupNWtrS6Mm_TjH-pTkSdvUQ523sLA@mail.gmail.com>
	<7630243D-EAA3-4FDA-89D5-25CAEDFEAC94@gmail.com>
Message-ID: <52DC4795.9060202@gmail.com>

On 14-01-19 4:16 PM, peter dalgaard wrote:
> It's not formals() that is doing you in. Rather, it is a conspiration between two things:
> (a) R always displays complex constants as x+yi, even if x is zero and (b) there really is no way to specify complex constants with non-zero  real part, i.e. 1+2i is a sum of a real and and imaginary complex constant. You can see the effect already at
>
>> quote(1+2i)
> 1 + (0+2i)
>
>
>> q <- quote(1+2i)
>> q[[1]]
> `+`
>> q[[2]]
> [1] 1
>> q[[3]]
> [1] 0+2i
>> str(q)
>   language 1 + (0+2i)
>> str(q[[3]])
>   cplx 0+2i
>
> Someone might want to fix this by implementing a full syntax for complex constants, but meanwhile, I think a passable workaround could be

That might be nice to do.  Not sure if it's easy or hard...

>
>> formals(test)$a <- 1+2i
>> args(test)
> function (a = 1+2i)
> NULL
>> test
> function (a = 1+2i)
> {
> }
>
>
> Or maybe, less sneaky
>
> Cplx_1plus2i <- 1+2i
> test <- function(a = Cplx_1plus2i){}

Less sneaky, but a tiny bit different due to scoping issues:  if the 
function happens to assign something to a local variable Cplx_1plus2i 
before evaluating a, the local variable will be used rather than the 
global one.

Duncan Murdoch


From murdoch.duncan at gmail.com  Mon Jan 20 00:00:57 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 19 Jan 2014 18:00:57 -0500
Subject: [Rd] formals() adds 0 to complex function arguments
In-Reply-To: <52DC4795.9060202@gmail.com>
References: <CANLFJPpnu2_n9qPXMGnRCupNWtrS6Mm_TjH-pTkSdvUQ523sLA@mail.gmail.com>
	<7630243D-EAA3-4FDA-89D5-25CAEDFEAC94@gmail.com>
	<52DC4795.9060202@gmail.com>
Message-ID: <52DC5929.8070609@gmail.com>

On 14-01-19 4:45 PM, Duncan Murdoch wrote:
> On 14-01-19 4:16 PM, peter dalgaard wrote:
>> It's not formals() that is doing you in. Rather, it is a conspiration between two things:
>> (a) R always displays complex constants as x+yi, even if x is zero and (b) there really is no way to specify complex constants with non-zero  real part, i.e. 1+2i is a sum of a real and and imaginary complex constant. You can see the effect already at
>>
>>> quote(1+2i)
>> 1 + (0+2i)
>>
>>
>>> q <- quote(1+2i)
>>> q[[1]]
>> `+`
>>> q[[2]]
>> [1] 1
>>> q[[3]]
>> [1] 0+2i
>>> str(q)
>>    language 1 + (0+2i)
>>> str(q[[3]])
>>    cplx 0+2i
>>
>> Someone might want to fix this by implementing a full syntax for complex constants, but meanwhile, I think a passable workaround could be
>
> That might be nice to do.  Not sure if it's easy or hard...

I think it's hard.  After seeing the 1, when the parser gets a "+", it's 
not clear whether you're in the middle of a complex number or some other 
kind of sum.  And since users can redefine "+", it could be a really 
different kind, even if it's followed by 2i.

Duncan Murdoch

>
>>
>>> formals(test)$a <- 1+2i
>>> args(test)
>> function (a = 1+2i)
>> NULL
>>> test
>> function (a = 1+2i)
>> {
>> }
>>
>>
>> Or maybe, less sneaky
>>
>> Cplx_1plus2i <- 1+2i
>> test <- function(a = Cplx_1plus2i){}
>
> Less sneaky, but a tiny bit different due to scoping issues:  if the
> function happens to assign something to a local variable Cplx_1plus2i
> before evaluating a, the local variable will be used rather than the
> global one.
>
> Duncan Murdoch
>


From baptiste.auguie at gmail.com  Sun Jan 19 23:17:13 2014
From: baptiste.auguie at gmail.com (baptiste auguie)
Date: Sun, 19 Jan 2014 20:17:13 -0200
Subject: [Rd] formals() adds 0 to complex function arguments
In-Reply-To: <52DC4795.9060202@gmail.com>
References: <CANLFJPpnu2_n9qPXMGnRCupNWtrS6Mm_TjH-pTkSdvUQ523sLA@mail.gmail.com>
	<7630243D-EAA3-4FDA-89D5-25CAEDFEAC94@gmail.com>
	<52DC4795.9060202@gmail.com>
Message-ID: <CANLFJPrn=pb+XFC1AmJDJXHOCCn6tO1+286qPPT2jUfRfRAb=w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140119/c3e693ac/attachment.pl>

From cubranic at stat.ubc.ca  Mon Jan 20 05:51:29 2014
From: cubranic at stat.ubc.ca (Davor Cubranic)
Date: Sun, 19 Jan 2014 20:51:29 -0800
Subject: [Rd] How to debug an R package (with C code)
In-Reply-To: <CABtg=KnThTj=gaWCKWk5jF8jmw73dYCPpd_WudRKOTxCKjXF0Q@mail.gmail.com>
References: <e6b8123fd4af42d78ce33ce3fee50851@SIXPR01MB224.apcprd01.prod.exchangelabs.com>
	<CAGSjAUCK1kTfpRKnuj6f4dieiFysqd4vOWJOSqkyzETr2uMkAg@mail.gmail.com>
	<CADwqtCOVoP_okamqtRdfMNc-rE7VwE5gqAC1oM1+q5D0ULBqyg@mail.gmail.com>
	<CABtg=K=hLinQGj3Hu4h6KX7hBUk=QOiBLTGuTsFD=KKyZs+48g@mail.gmail.com>
	<066FC036-FC93-4BE8-B686-6C301B8B8596@stat.ubc.ca>
	<CABtg=KnThTj=gaWCKWk5jF8jmw73dYCPpd_WudRKOTxCKjXF0Q@mail.gmail.com>
Message-ID: <EBBC5546-CAEE-4945-B3B0-34BF46BA7C38@stat.ubc.ca>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140119/4d2d3bc7/attachment.pl>

From alsergbox at gmail.com  Mon Jan 20 10:32:56 2014
From: alsergbox at gmail.com (Alexey Sergushichev)
Date: Mon, 20 Jan 2014 13:32:56 +0400
Subject: [Rd] Using unit-tests as examples
In-Reply-To: <CABdHhvFbSqmyE6zYWvXw5NKJ1NXq4e2aFc8WzPqkiM2d4U445A@mail.gmail.com>
References: <CAMGHQ97ct+FQc361micsLrx8CYnFE8WHvCBtVLvWL82bdpDFhA@mail.gmail.com>
	<CABdHhvFbSqmyE6zYWvXw5NKJ1NXq4e2aFc8WzPqkiM2d4U445A@mail.gmail.com>
Message-ID: <CAMGHQ94yaG=3mvka4E8RvNf9JyL9-yBPFUiy=iHOzXTFFSTC6g@mail.gmail.com>

Yes, this may work, but this way I have to have one test per file,
which is not very convenient.

---
Alexey


On Sat, Jan 18, 2014 at 7:43 PM, Hadley Wickham <h.wickham at gmail.com> wrote:
> If you're using roxygen2, you can use @example tag to include an
> external file into the examples.
>
> Hadley
>
> On Sat, Jan 18, 2014 at 7:18 AM, Alexey Sergushichev
> <alsergbox at gmail.com> wrote:
>> Hi,
>>
>> Which is the best way to use unit tests as examples for documentation?
>> I use testthat, but if there is a good way to do this, for example,
>> only with RUnit, it'd still be good to know.
>>
>> Unit-tests are usually simple and concise, so they are good candidates
>> for example code, but I don't want to copy them into documentation and
>> maintain by hands. I tried to google how people handle this, but
>> didn't find anything.
>>
>> ---
>> Best regards,
>> Alexey
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
>
> --
> http://had.co.nz/


From f.calboli at imperial.ac.uk  Mon Jan 20 10:31:45 2014
From: f.calboli at imperial.ac.uk (Federico Calboli)
Date: Mon, 20 Jan 2014 09:31:45 +0000
Subject: [Rd] [R-SIG-Mac] My first package
In-Reply-To: <CAAyVsXKQ+e_2xaZVNcTk3jm173KEKixai99FiSn9P1mB16AH0w@mail.gmail.com>
References: <CAAyVsXKQ+e_2xaZVNcTk3jm173KEKixai99FiSn9P1mB16AH0w@mail.gmail.com>
Message-ID: <515E0699-CBC1-4ABB-8418-6362E19B6018@imperial.ac.uk>

On 18 Jan 2014, at 14:31, Axel Urbiz <axel.urbiz at gmail.com> wrote:

> Hi All,
> 
> 
> I'm planning to submit my first package to R, and although I read all the
> documentation, I'm not very clear on the following 2 items, from which I'd
> appreciate your guidance:
> 
> 
> 1)I understand it is suggested to use the R dev version to build the
> package.

Is it?  this is news to me.  I have a grand total of 2 packages up and I never ever used R-devel, and never ever had a problem, had a report of a problem or had a note from CRAn about my packages not being ok because I built them with R-relase (or whatever it might be called) and not R-devel.

BW

F



> Which one specifically should I use to build a package on a Mac
> OS? How about package dependencies, which version should I install on the R
> dev version (and where should I get them)?
> 
> 
> 2) Not sure if this one belongs to this list. Does licensing follow the
> logic of "inheritance" (i.e. if all the package dependencies of my package
> are "GPL-2 | GPL-3", does my package need to use the same license agreement?
> 
> 
> 
> Thanks!
> 
> Axel.
> 
> 	[[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 881 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140120/6a594a23/attachment.bin>

From m.denwood at vet.gla.ac.uk  Mon Jan 20 12:13:54 2014
From: m.denwood at vet.gla.ac.uk (Matthew Denwood)
Date: Mon, 20 Jan 2014 11:13:54 +0000
Subject: [Rd] [R-SIG-Mac] My first package
In-Reply-To: <515E0699-CBC1-4ABB-8418-6362E19B6018@imperial.ac.uk>
References: <CAAyVsXKQ+e_2xaZVNcTk3jm173KEKixai99FiSn9P1mB16AH0w@mail.gmail.com>
	<515E0699-CBC1-4ABB-8418-6362E19B6018@imperial.ac.uk>
Message-ID: <BF6F881A-4424-4C9B-B425-C5F738CD7850@vet.gla.ac.uk>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140120/eda97bd8/attachment.pl>

From h.wickham at gmail.com  Mon Jan 20 14:33:21 2014
From: h.wickham at gmail.com (Hadley Wickham)
Date: Mon, 20 Jan 2014 07:33:21 -0600
Subject: [Rd] Using unit-tests as examples
In-Reply-To: <CAMGHQ94yaG=3mvka4E8RvNf9JyL9-yBPFUiy=iHOzXTFFSTC6g@mail.gmail.com>
References: <CAMGHQ97ct+FQc361micsLrx8CYnFE8WHvCBtVLvWL82bdpDFhA@mail.gmail.com>
	<CABdHhvFbSqmyE6zYWvXw5NKJ1NXq4e2aFc8WzPqkiM2d4U445A@mail.gmail.com>
	<CAMGHQ94yaG=3mvka4E8RvNf9JyL9-yBPFUiy=iHOzXTFFSTC6g@mail.gmail.com>
Message-ID: <CABdHhvHuqr9WijK012=N+vP6CHm3zW49H3_H1kUL-s_28hbADA@mail.gmail.com>

The problem with extracting a single test from a file is going to be
locating the relevant lines of code and cleanly pulling them out
(along with any needed supporting code). It might be better to attack
the problem in the opposite direction by having a roxygen2 directive
that inserted the block in both the examples and in a special testthat
file.

Hadley

On Mon, Jan 20, 2014 at 3:32 AM, Alexey Sergushichev
<alsergbox at gmail.com> wrote:
> Yes, this may work, but this way I have to have one test per file,
> which is not very convenient.
>
> ---
> Alexey
>
>
> On Sat, Jan 18, 2014 at 7:43 PM, Hadley Wickham <h.wickham at gmail.com> wrote:
>> If you're using roxygen2, you can use @example tag to include an
>> external file into the examples.
>>
>> Hadley
>>
>> On Sat, Jan 18, 2014 at 7:18 AM, Alexey Sergushichev
>> <alsergbox at gmail.com> wrote:
>>> Hi,
>>>
>>> Which is the best way to use unit tests as examples for documentation?
>>> I use testthat, but if there is a good way to do this, for example,
>>> only with RUnit, it'd still be good to know.
>>>
>>> Unit-tests are usually simple and concise, so they are good candidates
>>> for example code, but I don't want to copy them into documentation and
>>> maintain by hands. I tried to google how people handle this, but
>>> didn't find anything.
>>>
>>> ---
>>> Best regards,
>>> Alexey
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>>
>> --
>> http://had.co.nz/



-- 
http://had.co.nz/


From csardi.gabor at gmail.com  Mon Jan 20 15:38:28 2014
From: csardi.gabor at gmail.com (=?ISO-8859-1?B?R+Fib3IgQ3PhcmRp?=)
Date: Mon, 20 Jan 2014 09:38:28 -0500
Subject: [Rd] How to debug an R package (with C code)
In-Reply-To: <EBBC5546-CAEE-4945-B3B0-34BF46BA7C38@stat.ubc.ca>
References: <e6b8123fd4af42d78ce33ce3fee50851@SIXPR01MB224.apcprd01.prod.exchangelabs.com>
	<CAGSjAUCK1kTfpRKnuj6f4dieiFysqd4vOWJOSqkyzETr2uMkAg@mail.gmail.com>
	<CADwqtCOVoP_okamqtRdfMNc-rE7VwE5gqAC1oM1+q5D0ULBqyg@mail.gmail.com>
	<CABtg=K=hLinQGj3Hu4h6KX7hBUk=QOiBLTGuTsFD=KKyZs+48g@mail.gmail.com>
	<066FC036-FC93-4BE8-B686-6C301B8B8596@stat.ubc.ca>
	<CABtg=KnThTj=gaWCKWk5jF8jmw73dYCPpd_WudRKOTxCKjXF0Q@mail.gmail.com>
	<EBBC5546-CAEE-4945-B3B0-34BF46BA7C38@stat.ubc.ca>
Message-ID: <CABtg=K=Rb0cWjA-LTKSU5ivUv22pVsnWpdf=HguRL1PJYP2G4g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140120/0bdac9ff/attachment.pl>

From csardi.gabor at gmail.com  Mon Jan 20 15:51:59 2014
From: csardi.gabor at gmail.com (=?ISO-8859-1?B?R+Fib3IgQ3PhcmRp?=)
Date: Mon, 20 Jan 2014 09:51:59 -0500
Subject: [Rd] [R-SIG-Mac] My first package
In-Reply-To: <515E0699-CBC1-4ABB-8418-6362E19B6018@imperial.ac.uk>
References: <CAAyVsXKQ+e_2xaZVNcTk3jm173KEKixai99FiSn9P1mB16AH0w@mail.gmail.com>
	<515E0699-CBC1-4ABB-8418-6362E19B6018@imperial.ac.uk>
Message-ID: <CABtg=KnXCX7U_csVMqrDoAg2TQ0q1DeUO_dFPqtef53Fkz1U_g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140120/9bfe5db4/attachment.pl>

From f.calboli at imperial.ac.uk  Mon Jan 20 15:58:08 2014
From: f.calboli at imperial.ac.uk (Federico Calboli)
Date: Mon, 20 Jan 2014 14:58:08 +0000
Subject: [Rd] [R-SIG-Mac] My first package
In-Reply-To: <CABtg=KnXCX7U_csVMqrDoAg2TQ0q1DeUO_dFPqtef53Fkz1U_g@mail.gmail.com>
References: <CAAyVsXKQ+e_2xaZVNcTk3jm173KEKixai99FiSn9P1mB16AH0w@mail.gmail.com>
	<515E0699-CBC1-4ABB-8418-6362E19B6018@imperial.ac.uk>
	<CABtg=KnXCX7U_csVMqrDoAg2TQ0q1DeUO_dFPqtef53Fkz1U_g@mail.gmail.com>
Message-ID: <897E0F88-B101-4151-B3E0-819244023C79@imperial.ac.uk>


On 20 Jan 2014, at 14:51, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:

> On Mon, Jan 20, 2014 at 4:31 AM, Federico Calboli <f.calboli at imperial.ac.uk> wrote:
> [...]
> Is it?  this is news to me.  I have a grand total of 2 packages up and I never ever used R-devel, and never ever had a problem, had a report of a problem or had a note from CRAn about my packages not being ok because I built them with R-relase (or whatever it might be called) and not R-devel.
> 
> From the CRAN repository policy, that you also read and agreed to:

To be honest I have little time to read the byzantine requirements of the policies but
> 
> "Please ensure that R CMD check --as-cran has been run on the tarball to be uploaded before submission. This should be done with the current version of R-devel (or if that is not possible, current R-patched or the current release of R.)"

I do that *with the current release of R* and I never had an issue whatsoever.  Incidentally the words 'This should be done with the current version of R-devel (or if that is not possible, current R-patched or the current release of R' translate in plainspeak 'run R CMD check --as-cran with whatever version of R provided it's not outdated'. 

F



> 
> Gabor
> 
> [...]

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 881 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140120/3cbe29b4/attachment.bin>

From csardi.gabor at gmail.com  Mon Jan 20 16:15:57 2014
From: csardi.gabor at gmail.com (=?ISO-8859-1?B?R+Fib3IgQ3PhcmRp?=)
Date: Mon, 20 Jan 2014 10:15:57 -0500
Subject: [Rd] [R-SIG-Mac] My first package
In-Reply-To: <897E0F88-B101-4151-B3E0-819244023C79@imperial.ac.uk>
References: <CAAyVsXKQ+e_2xaZVNcTk3jm173KEKixai99FiSn9P1mB16AH0w@mail.gmail.com>
	<515E0699-CBC1-4ABB-8418-6362E19B6018@imperial.ac.uk>
	<CABtg=KnXCX7U_csVMqrDoAg2TQ0q1DeUO_dFPqtef53Fkz1U_g@mail.gmail.com>
	<897E0F88-B101-4151-B3E0-819244023C79@imperial.ac.uk>
Message-ID: <CABtg=KnY1ykUY51UqN_U5_FWm0zQiUb+NgSpQobreYAhM-3xgw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140120/09fcc72f/attachment.pl>

From csardi.gabor at gmail.com  Mon Jan 20 16:51:23 2014
From: csardi.gabor at gmail.com (=?ISO-8859-1?B?R+Fib3IgQ3PhcmRp?=)
Date: Mon, 20 Jan 2014 10:51:23 -0500
Subject: [Rd] Fwd:  [R-SIG-Mac] My first package
In-Reply-To: <CABtg=KkYEn5Yf2Vq9DP77_CPL1Ke_MzGpzy-UTT1+mn-cqpm-g@mail.gmail.com>
References: <CAAyVsXKQ+e_2xaZVNcTk3jm173KEKixai99FiSn9P1mB16AH0w@mail.gmail.com>
	<515E0699-CBC1-4ABB-8418-6362E19B6018@imperial.ac.uk>
	<CABtg=KnXCX7U_csVMqrDoAg2TQ0q1DeUO_dFPqtef53Fkz1U_g@mail.gmail.com>
	<897E0F88-B101-4151-B3E0-819244023C79@imperial.ac.uk>
	<CABtg=KnY1ykUY51UqN_U5_FWm0zQiUb+NgSpQobreYAhM-3xgw@mail.gmail.com>
	<9194C733-093B-4893-B327-50AEF4A725F6@imperial.ac.uk>
	<CABtg=KkYEn5Yf2Vq9DP77_CPL1Ke_MzGpzy-UTT1+mn-cqpm-g@mail.gmail.com>
Message-ID: <CABtg=KkTv6D3aTfvF6_UCs-+xgC+wz4p+yCahL2AqHm7htkvEw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140120/0a44a66b/attachment.pl>

From pdalgd at gmail.com  Mon Jan 20 17:21:07 2014
From: pdalgd at gmail.com (peter dalgaard)
Date: Mon, 20 Jan 2014 17:21:07 +0100
Subject: [Rd] formals() adds 0 to complex function arguments
In-Reply-To: <52DC5929.8070609@gmail.com>
References: <CANLFJPpnu2_n9qPXMGnRCupNWtrS6Mm_TjH-pTkSdvUQ523sLA@mail.gmail.com>
	<7630243D-EAA3-4FDA-89D5-25CAEDFEAC94@gmail.com>
	<52DC4795.9060202@gmail.com> <52DC5929.8070609@gmail.com>
Message-ID: <E21B8A3C-FFEC-41DD-9E2B-820B53E4A1B4@gmail.com>


On 20 Jan 2014, at 00:00 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>> 
>>> Someone might want to fix this by implementing a full syntax for complex constants, but meanwhile, I think a passable workaround could be
>> 
>> That might be nice to do.  Not sure if it's easy or hard...
> 
> I think it's hard.  After seeing the 1, when the parser gets a "+", it's not clear whether you're in the middle of a complex number or some other kind of sum.  And since users can redefine "+", it could be a really different kind, even if it's followed by 2i.

Yes. That's what I suspected; you may need to actually change the syntax. 

I was thinking something like a=1C+2i, or even more radically a=_Const_(1+2i) with the idea of evaluating the contents of _Const_() at parse time or maybe rather function definition time.  

The latter idea might solve some other issues where R structures can't be defined as constants (pretty much any nonscalar vector, for instance), and the associated issues with non-reversibility of deparse().

But as you say, it's likely to be hard.

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From simon.urbanek at r-project.org  Mon Jan 20 17:34:42 2014
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 20 Jan 2014 11:34:42 -0500
Subject: [Rd] [R-SIG-Mac] My first package
In-Reply-To: <515E0699-CBC1-4ABB-8418-6362E19B6018@imperial.ac.uk>
References: <CAAyVsXKQ+e_2xaZVNcTk3jm173KEKixai99FiSn9P1mB16AH0w@mail.gmail.com>
	<515E0699-CBC1-4ABB-8418-6362E19B6018@imperial.ac.uk>
Message-ID: <841C076A-CC5D-4F8C-93E0-CBF515C6B2E7@r-project.org>


On Jan 20, 2014, at 4:31 AM, Federico Calboli <f.calboli at imperial.ac.uk> wrote:

> On 18 Jan 2014, at 14:31, Axel Urbiz <axel.urbiz at gmail.com> wrote:
> 
>> Hi All,
>> 
>> 
>> I'm planning to submit my first package to R, and although I read all the
>> documentation, I'm not very clear on the following 2 items, from which I'd
>> appreciate your guidance:
>> 
>> 
>> 1)I understand it is suggested to use the R dev version to build the
>> package.
> 
> Is it?

Yes


>  this is news to me.  I have a grand total of 2 packages up and I never ever used R-devel, and never ever had a problem, had a report of a problem or had a note from CRAn about my packages not being ok because I built them with R-relase (or whatever it might be called) and not R-devel.
> 

You got lucky so far ;). See earlier post - you're answering to an already answered thread.

Cheers,
Simon



> BW
> 
> F
> 
> 
> 
>> Which one specifically should I use to build a package on a Mac
>> OS? How about package dependencies, which version should I install on the R
>> dev version (and where should I get them)?
>> 
>> 
>> 2) Not sure if this one belongs to this list. Does licensing follow the
>> logic of "inheritance" (i.e. if all the package dependencies of my package
>> are "GPL-2 | GPL-3", does my package need to use the same license agreement?
>> 
>> 
>> 
>> Thanks!
>> 
>> Axel.
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From h.wickham at gmail.com  Mon Jan 20 17:33:46 2014
From: h.wickham at gmail.com (Hadley Wickham)
Date: Mon, 20 Jan 2014 10:33:46 -0600
Subject: [Rd] formals() adds 0 to complex function arguments
In-Reply-To: <7630243D-EAA3-4FDA-89D5-25CAEDFEAC94@gmail.com>
References: <CANLFJPpnu2_n9qPXMGnRCupNWtrS6Mm_TjH-pTkSdvUQ523sLA@mail.gmail.com>
	<7630243D-EAA3-4FDA-89D5-25CAEDFEAC94@gmail.com>
Message-ID: <CABdHhvHhf+25oDQ4BerHru8XorRCQp9HR8vYqkEPJ=c=1MA5Sg@mail.gmail.com>

On Sun, Jan 19, 2014 at 3:16 PM, peter dalgaard <pdalgd at gmail.com> wrote:
> It's not formals() that is doing you in. Rather, it is a conspiration between two things:
> (a) R always displays complex constants as x+yi, even if x is zero and (b) there really is no way to specify complex constants with non-zero  real part, i.e. 1+2i is a sum of a real and and imaginary complex constant. You can see the effect already at
>
>> quote(1+2i)
> 1 + (0+2i)

Maybe I'm missing something obvious, but why not omit the real part if
it's zero?

Hadley


-- 
http://had.co.nz/


From spencer.graves at structuremonitoring.com  Mon Jan 20 18:34:28 2014
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Mon, 20 Jan 2014 09:34:28 -0800
Subject: [Rd] Using unit-tests as examples
In-Reply-To: <CABdHhvHuqr9WijK012=N+vP6CHm3zW49H3_H1kUL-s_28hbADA@mail.gmail.com>
References: <CAMGHQ97ct+FQc361micsLrx8CYnFE8WHvCBtVLvWL82bdpDFhA@mail.gmail.com>	<CABdHhvFbSqmyE6zYWvXw5NKJ1NXq4e2aFc8WzPqkiM2d4U445A@mail.gmail.com>	<CAMGHQ94yaG=3mvka4E8RvNf9JyL9-yBPFUiy=iHOzXTFFSTC6g@mail.gmail.com>
	<CABdHhvHuqr9WijK012=N+vP6CHm3zW49H3_H1kUL-s_28hbADA@mail.gmail.com>
Message-ID: <52DD5E24.7060108@structuremonitoring.com>

       You are probably wisest to follow Hadley's recommendation.  
[library(fortunes);  fortune(298)]


       However, my help files contain various constructs of the 
following form:


\dontshow{stopifnot(}
all.equal(fa, fa0)
\dontshow{)}


       where "fa" is returned by a function, and "fa0" is a manual 
computation of what I think the answer should be.


       Spencer Graves


On 1/20/2014 5:33 AM, Hadley Wickham wrote:
> The problem with extracting a single test from a file is going to be
> locating the relevant lines of code and cleanly pulling them out
> (along with any needed supporting code). It might be better to attack
> the problem in the opposite direction by having a roxygen2 directive
> that inserted the block in both the examples and in a special testthat
> file.
>
> Hadley
>
> On Mon, Jan 20, 2014 at 3:32 AM, Alexey Sergushichev
> <alsergbox at gmail.com> wrote:
>> Yes, this may work, but this way I have to have one test per file,
>> which is not very convenient.
>>
>> ---
>> Alexey
>>
>>
>> On Sat, Jan 18, 2014 at 7:43 PM, Hadley Wickham <h.wickham at gmail.com> wrote:
>>> If you're using roxygen2, you can use @example tag to include an
>>> external file into the examples.
>>>
>>> Hadley
>>>
>>> On Sat, Jan 18, 2014 at 7:18 AM, Alexey Sergushichev
>>> <alsergbox at gmail.com> wrote:
>>>> Hi,
>>>>
>>>> Which is the best way to use unit tests as examples for documentation?
>>>> I use testthat, but if there is a good way to do this, for example,
>>>> only with RUnit, it'd still be good to know.
>>>>
>>>> Unit-tests are usually simple and concise, so they are good candidates
>>>> for example code, but I don't want to copy them into documentation and
>>>> maintain by hands. I tried to google how people handle this, but
>>>> didn't find anything.
>>>>
>>>> ---
>>>> Best regards,
>>>> Alexey
>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>
>>> --
>>> http://had.co.nz/
>>>


From markus.mueller.1.g at gmail.com  Tue Jan 21 14:41:32 2014
From: markus.mueller.1.g at gmail.com (=?UTF-8?Q?Markus_M=C3=BCller?=)
Date: Tue, 21 Jan 2014 14:41:32 +0100
Subject: [Rd] Which functions are there to parse a NAMESPACE file (without
 installing the package)
Message-ID: <CAOAQ5sprjxhUEVTBMKmka=Po03AAVkyij=Qgz6k-CFfJQPS2uQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140121/600c2106/attachment.pl>

From peter.meilstrup at gmail.com  Tue Jan 21 15:35:33 2014
From: peter.meilstrup at gmail.com (Peter Meilstrup)
Date: Tue, 21 Jan 2014 06:35:33 -0800
Subject: [Rd] Which functions are there to parse a NAMESPACE file
 (without installing the package)
In-Reply-To: <CAOAQ5sprjxhUEVTBMKmka=Po03AAVkyij=Qgz6k-CFfJQPS2uQ@mail.gmail.com>
References: <CAOAQ5sprjxhUEVTBMKmka=Po03AAVkyij=Qgz6k-CFfJQPS2uQ@mail.gmail.com>
Message-ID: <CAJoaRhZBHa_ZwxupE1smNVR9YS63vuUw2Xq_4Nzn+Wz-8ZPs0g@mail.gmail.com>

Try the function parseNamespaceFile in base. Not documented but its
output should be understandable.

Peter

On Tue, Jan 21, 2014 at 5:41 AM, Markus M?ller
<markus.mueller.1.g at gmail.com> wrote:
> For the purpose of automatic documentation, I want to parse a NAMESPACE
> file of the package to be documented.
>
> I want to know the contents:
> exportedClasses , exportedMethods and so on
>
> to be able to hide the part of the documentation not exposed in the
> NAMESPACE file.
>
> Up to now I am parsing the file myself and do some regexpr stuff to get
> what i want.
> It would however be much nicer to use the facilities that R itself probably
> provides, so that i could handle everything R can and remove the
> unnecessary duplication.
>
> (Since R hast to look at the NAMESPACE while e.g. building a package from
> source those parsers should be certainly there)
>
> I just don't know where to look for them.
>
> Thanks in advance
> Markus
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From markus.mueller.1.g at gmail.com  Tue Jan 21 15:55:20 2014
From: markus.mueller.1.g at gmail.com (=?UTF-8?Q?Markus_M=C3=BCller?=)
Date: Tue, 21 Jan 2014 15:55:20 +0100
Subject: [Rd] Which functions are there to parse a NAMESPACE file
 (without installing the package)
In-Reply-To: <CAJoaRhZBHa_ZwxupE1smNVR9YS63vuUw2Xq_4Nzn+Wz-8ZPs0g@mail.gmail.com>
References: <CAOAQ5sprjxhUEVTBMKmka=Po03AAVkyij=Qgz6k-CFfJQPS2uQ@mail.gmail.com>
	<CAJoaRhZBHa_ZwxupE1smNVR9YS63vuUw2Xq_4Nzn+Wz-8ZPs0g@mail.gmail.com>
Message-ID: <CAOAQ5sq4k48BR70o=nSLerCQfW9ydhE3ab7zt=KLXOVE=GS_TA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140121/f1b5efb0/attachment.pl>

From sannandi at umail.iu.edu  Tue Jan 21 23:41:21 2014
From: sannandi at umail.iu.edu (Sandip Nandi)
Date: Tue, 21 Jan 2014 14:41:21 -0800
Subject: [Rd] Using unicode from C interface of R
Message-ID: <CAGSjAUC6BQr17=GODT=UpRFHCe+-TSYzbqV91UbZiwwTHJjEYA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140121/2b0d187b/attachment.pl>

From murdoch.duncan at gmail.com  Wed Jan 22 01:08:47 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 21 Jan 2014 19:08:47 -0500
Subject: [Rd] Using unicode from C interface of R
In-Reply-To: <CAGSjAUC6BQr17=GODT=UpRFHCe+-TSYzbqV91UbZiwwTHJjEYA@mail.gmail.com>
References: <CAGSjAUC6BQr17=GODT=UpRFHCe+-TSYzbqV91UbZiwwTHJjEYA@mail.gmail.com>
Message-ID: <52DF0C0F.4000402@gmail.com>

On 14-01-21 5:41 PM, Sandip Nandi wrote:
> Hi ,
>
> I am using C interface of R . If a unicode string is read , in what format
> I could pass it back to R ?
> I was trying to use the following
>
>   tpStr = ( char *)val;
>   SET_STRING_ELT(innerList  , 0, mkChar(tpStr));
>
> It does not work .
>
> If I pass it back from as RAW format to R , what package is there to read
> it ? I mean package for interpreting RAW data .

There are a number of encodings for Unicode.  Most Unix systems use 
UTF-8, Windows uses UTF-16 for some things, etc.

If your string is known to be in UTF-8 that's easiest:  just use 
mkCharCE instead of mkChar, as described in Writing R Extensions.  If it 
is in UTF-16 you might have more trouble because of possible embedded 0 
bytes.  Translate to UTF-8 first using C facilities like 
WideCharToMultibyte.

Duncan Murdoch


From ripley at stats.ox.ac.uk  Wed Jan 22 06:14:48 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 22 Jan 2014 05:14:48 +0000
Subject: [Rd] Using unicode from C interface of R
In-Reply-To: <52DF0C0F.4000402@gmail.com>
References: <CAGSjAUC6BQr17=GODT=UpRFHCe+-TSYzbqV91UbZiwwTHJjEYA@mail.gmail.com>
	<52DF0C0F.4000402@gmail.com>
Message-ID: <52DF53C8.5060408@stats.ox.ac.uk>

On 22/01/2014 00:08, Duncan Murdoch wrote:
> On 14-01-21 5:41 PM, Sandip Nandi wrote:
>> Hi ,
>>
>> I am using C interface of R . If a unicode string is read , in what
>> format
>> I could pass it back to R ?
>> I was trying to use the following
>>
>>   tpStr = ( char *)val;
>>   SET_STRING_ELT(innerList  , 0, mkChar(tpStr));
>>
>> It does not work .
>>
>> If I pass it back from as RAW format to R , what package is there to read
>> it ? I mean package for interpreting RAW data .
>
> There are a number of encodings for Unicode.  Most Unix systems use
> UTF-8, Windows uses UTF-16 for some things, etc.
>
> If your string is known to be in UTF-8 that's easiest:  just use
> mkCharCE instead of mkChar, as described in Writing R Extensions.  If it
> is in UTF-16 you might have more trouble because of possible embedded 0
> bytes.  Translate to UTF-8 first using C facilities like
> WideCharToMultibyte.

Which is Windows-only (and 'wide char' differs by platform, including if 
it is known to be any Unicode encoding)   All platforms have Riconv: see 
'Writing R Extensions'. C11 has other ways to do this, but they are not 
widely implemented.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From sannandi at umail.iu.edu  Wed Jan 22 06:48:05 2014
From: sannandi at umail.iu.edu (Sandip Nandi)
Date: Tue, 21 Jan 2014 21:48:05 -0800
Subject: [Rd] Using unicode from C interface of R
In-Reply-To: <52DF53C8.5060408@stats.ox.ac.uk>
References: <CAGSjAUC6BQr17=GODT=UpRFHCe+-TSYzbqV91UbZiwwTHJjEYA@mail.gmail.com>
	<52DF0C0F.4000402@gmail.com> <52DF53C8.5060408@stats.ox.ac.uk>
Message-ID: <CAGSjAUAUB-1T=oAedqBzRHWG0gtWrohgz9oX-BaukYKQEQD1gw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140121/2a5c2e24/attachment.pl>

From gregor.kastner at wu.ac.at  Wed Jan 22 11:53:41 2014
From: gregor.kastner at wu.ac.at (Gregor Kastner)
Date: Wed, 22 Jan 2014 11:53:41 +0100
Subject: [Rd] Linking to native routines in other packages
Message-ID: <20140122115341.66ebf717@mine>

Dear all,

in my package 'stochvol' I have unsuccessfully been trying to make a C
routine called 'sampler' available to be called from other packages' C code.

Following
http://cran.r-project.org/doc/manuals/R-exts.html#Linking-to-native-routines-in-other-packages
I have included

#include <R_ext/Rdynload.h>
R_init_stochvol(DllInfo *dll) {
 R_RegisterCCallable("stochvol", "sampler", (DL_FUNC) sampler);
}

in some file within stochvol's 'src' directory, and

DL_FUNC stochvol_sampler = R_GetCCallable("stochvol", "sampler");

in some file within the 'src' directoy of the package depending on stochvol.

When installing that package, I however get:

Error in dyn.load(file, DLLpath = DLLpath, ...) : 
  function 'sampler' not provided by package 'stochvol'

Can somebody give me a hint what I am missing?

Thanks a ton in advance!
Gregor


From edd at debian.org  Wed Jan 22 13:39:17 2014
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 22 Jan 2014 06:39:17 -0600
Subject: [Rd] Linking to native routines in other packages
In-Reply-To: <20140122115341.66ebf717@mine>
References: <20140122115341.66ebf717@mine>
Message-ID: <21215.48117.939482.501106@max.nulle.part>


Hi Gregor,

On 22 January 2014 at 11:53, Gregor Kastner wrote:
| in my package 'stochvol' I have unsuccessfully been trying to make a C
| routine called 'sampler' available to be called from other packages' C code.
| 
| Following
| http://cran.r-project.org/doc/manuals/R-exts.html#Linking-to-native-routines-in-other-packages
| I have included
| 
| #include <R_ext/Rdynload.h>
| R_init_stochvol(DllInfo *dll) {
|  R_RegisterCCallable("stochvol", "sampler", (DL_FUNC) sampler);
| }
| 
| in some file within stochvol's 'src' directory, and
| 
| DL_FUNC stochvol_sampler = R_GetCCallable("stochvol", "sampler");
| 
| in some file within the 'src' directoy of the package depending on stochvol.
| 
| When installing that package, I however get:
| 
| Error in dyn.load(file, DLLpath = DLLpath, ...) : 
|   function 'sampler' not provided by package 'stochvol'
| 
| Can somebody give me a hint what I am missing?

Working examples I know of:   

   'xts' importing two functions from 'zoo'

   'RcppXts' importing approx. ten functions from 'xts'

Maybe by comparing to these you can sort out the missing step at your end.

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From therneau at mayo.edu  Wed Jan 22 15:35:15 2014
From: therneau at mayo.edu (Therneau, Terry M., Ph.D.)
Date: Wed, 22 Jan 2014 08:35:15 -0600
Subject: [Rd] Package checking: verifying plots
Message-ID: <d2fb82$86o88d@ironport10.mayo.edu>

I pride myself on having an extensive and comprehensive test suite for the survival package.

However, I don't have a good procedure for testing the plotting routines.  (Forget "good", 
I don't even have a third-rate procedure for this.)  This was brought home with the latest 
release; within 24 hours I got a note about a problem.  They y-axis range for a plot was 
calculated incorrectly, giving no warning or error, just a graph with 2/3 of the data 
outside the plot window.  It was a side effect of a change for another reason, and of 
course I had checked out that consequence thoroughly.

Any good ideas for this issue?

Terry Therneau


From ripley at stats.ox.ac.uk  Wed Jan 22 15:59:54 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 22 Jan 2014 14:59:54 +0000
Subject: [Rd] Package checking: verifying plots
In-Reply-To: <d2fb82$86o88d@ironport10.mayo.edu>
References: <d2fb82$86o88d@ironport10.mayo.edu>
Message-ID: <52DFDCEA.6020602@stats.ox.ac.uk>

On 22/01/2014 14:35, Therneau, Terry M., Ph.D. wrote:
> I pride myself on having an extensive and comprehensive test suite for
> the survival package.
>
> However, I don't have a good procedure for testing the plotting
> routines.  (Forget "good", I don't even have a third-rate procedure for
> this.)  This was brought home with the latest release; within 24 hours I
> got a note about a problem.  They y-axis range for a plot was calculated
> incorrectly, giving no warning or error, just a graph with 2/3 of the
> data outside the plot window.  It was a side effect of a change for
> another reason, and of course I had checked out that consequence
> thoroughly.
>
> Any good ideas for this issue?
>
> Terry Therneau
>

The R tests are comparisons of uncompressed PDF files (which are almost 
text files).  See the 'tests' directory.

Paul Murrell gave a talk about another method at an early DSC: 
https://www.stat.auckland.ac.nz/~paul/Talks/qa.pdf and now has a 
graphicsQC package.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From baptiste.auguie at gmail.com  Wed Jan 22 15:56:16 2014
From: baptiste.auguie at gmail.com (baptiste auguie)
Date: Wed, 22 Jan 2014 12:56:16 -0200
Subject: [Rd] Package checking: verifying plots
In-Reply-To: <d2fb82$86o88d@ironport10.mayo.edu>
References: <d2fb82$86o88d@ironport10.mayo.edu>
Message-ID: <CANLFJPrRdZtwHs3x_oR4_5oz94=BLP7J5BDnyjv5cekg5iKEag@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140122/c1f3a192/attachment.pl>

From rowe at muxspace.com  Wed Jan 22 17:55:00 2014
From: rowe at muxspace.com (Brian Lee Yung Rowe)
Date: Wed, 22 Jan 2014 11:55:00 -0500
Subject: [Rd] Behavior of --install-tests and testInstalledPackage
Message-ID: <1272735A-C8CB-44AF-8839-A39874790C34@muxspace.com>

Hello,

I'm writing a script that automates the testing of reverse dependencies of a package. I found the function testInstalledPackage in the tools package, which seems to do what I want. However, when I use it for a source package that was installed with --install-tests, I've noticed that only the actual test files (e.g. located in inst/tests) are available and run. In other words the test harness script (e.g. in tests) is not copied, so any wiring to run tests isn't available when running testInstalledPackage. 

I tried loading the required packages (i.e. the installed package to retest plus the testing frameworks RUnit, testthat), but since testInstalledPackage makes an external call to R CMD BATCH, any packages loaded in my current environment have no effect on the tests. The only workaround that I've come up with is to add require statements to the top of each test file, but this is a bit onerous.

My question is whether
1) there is a technique to force the test harness script (e.g. tests/run_tests.R, tests/doRUnit.R) to be copied into the installed source package, or
2) there is a way to have testInstalledPackage force the loading of required packages prior to executing test scripts, or
3) has someone already done this?

Thanks and Regards,
Brian

From gregor.kastner at wu.ac.at  Wed Jan 22 19:56:54 2014
From: gregor.kastner at wu.ac.at (Gregor Kastner)
Date: Wed, 22 Jan 2014 19:56:54 +0100
Subject: [Rd] Linking to native routines in other packages
In-Reply-To: <21215.48117.939482.501106@max.nulle.part>
References: <20140122115341.66ebf717@mine>
	<21215.48117.939482.501106@max.nulle.part>
Message-ID: <20140122195654.72230a34@mine>

Hi again,

On Wed, 22 Jan 2014 06:39:17 -0600
Dirk Eddelbuettel <edd at debian.org> wrote:

| Working examples I know of:   
| 
|    'xts' importing two functions from 'zoo'
| 
|    'RcppXts' importing approx. ten functions from 'xts'
| 
| Maybe by comparing to these you can sort out the missing step at your end.

Thanks Dirk for the hints; I finally got the code running. Important point
is that R_init_PKGNAME() is declared as extern "C" (or RcppExport, of course)
if using g++ in both the mother and the child package. (Interestingly,
dyn.load() only complains when either the mother or the child package don't
do so, but not if both don't do so => SEGFAULT.) Since it took me almost the
entire afternoon to figure that out, I'll document a working example here. 

Scenario: We have a 'mother' package, which wants to make some C/C++ routines
available to the 'child' package to be called directly from C/C++ level.
Thus, mother's 'src' cointains:


********* BEGIN test.c *********

#include <R.h>
#include <Rinternals.h>
#include <R_ext/Rdynload.h>

SEXP fun(SEXP);

void R_init_mother(DllInfo *dll) {
 R_RegisterCCallable("mother", "fun", (DL_FUNC) &fun);
}

SEXP fun(SEXP test) {
 Rprintf("fun so much fun\n");
 return R_NilValue;
}

********** END test.c **********


(Note that no extern "C" is needed here because it will be compiled with gcc
anyway).

The child uses Rcpp and mother, thus has


********* BEGIN DESCRIPTION *********

LinkingTo: mother, Rcpp
Depends: mother, Rcpp
Imports: mother, Rcpp

********** END DESCRIPTION **********


in its DESCRIPTION file, and 


********* BEGIN test.cpp *********

#include <Rinternals.h>
#include <R_ext/Rdynload.h>

extern "C" {
 SEXP afun(SEXP);
 SEXP(*fun)(SEXP);

 void R_init_child(DllInfo *info) {
  fun = (SEXP(*)(SEXP)) R_GetCCallable("mother", "fun");
 }

 SEXP afun(SEXP test) {
  fun(test);
  return R_NilValue;
 }
}

********** END test.cpp **********

(Note that extern "C" is crucial here.) After installing mother and child, we
have:

> library(child)
Loading required package: mother
Loading required package: Rcpp
> .Call("afun", 123, PACKAGE="child")
fun so much fun
NULL
>

Maybe it is of help to someone; please excuse me if I bored anyone with
trivialities.

Best,
Gregor


From romain at r-enthusiasts.com  Wed Jan 22 20:23:10 2014
From: romain at r-enthusiasts.com (=?windows-1252?Q?Romain_Fran=E7ois?=)
Date: Wed, 22 Jan 2014 20:23:10 +0100
Subject: [Rd] Linking to native routines in other packages
In-Reply-To: <20140122195654.72230a34@mine>
References: <20140122115341.66ebf717@mine>
	<21215.48117.939482.501106@max.nulle.part>
	<20140122195654.72230a34@mine>
Message-ID: <78770FED-953A-487F-908C-739107FCA525@r-enthusiasts.com>

Hello, 

The problem is that you have logic in both your mother and child packages. IMO, you should only have logic in the mother package. 

I?ve done this in a number of packages, it requires a bit of work initially, but not that much. 

What I?d do is have something like this in mother/inst/include/mother.h : 

#if defined(COMPILING_MOTHER)
// just declare, will be defined in test.c
SEXP fun(SEXP test) ; 
#else
inline SEXP fun(SEXP test){
    typedef SEXP(*Fun)(SEXP); 
    static Fun fun = (Fun)R_GetCCallable("mother", "fun") ;
    return fun(test) ;
}
#endif

In your test.c file, make sure you define COMPILING_MOTHER before you include mother.h, something like this

#include <R.h>
#include <Rinternals.h>
#include <R_ext/Rdynload.h>
#define COMPILING_MOTHER
#include <mother.h>

SEXP fun(SEXP);

void R_init_mother(DllInfo *dll) {
    R_RegisterCCallable("mother", "fun", (DL_FUNC) &fun);
}

SEXP fun(SEXP test) {
    Rprintf("fun so much fun\n");
    return R_NilValue;
}

So that in your child package you only have to use it, something like: 

#include <Rinternals.h>
#include <R_ext/Rdynload.h>
#include <mother.h>

SEXP afun(SEXP test) {
   fun(test);
   return R_NilValue;
}

Note that if you only want the interface between the two packages to be at low level (not visible from R), then you don?t need to conform to the SEXP(SEXP...) interface. You can use anything you like. 

Romain

Le 22 janv. 2014 ? 19:56, Gregor Kastner <gregor.kastner at wu.ac.at> a ?crit :

> Hi again,
> 
> On Wed, 22 Jan 2014 06:39:17 -0600
> Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> | Working examples I know of:   
> | 
> |    'xts' importing two functions from 'zoo'
> | 
> |    'RcppXts' importing approx. ten functions from 'xts'
> | 
> | Maybe by comparing to these you can sort out the missing step at your end.
> 
> Thanks Dirk for the hints; I finally got the code running. Important point
> is that R_init_PKGNAME() is declared as extern "C" (or RcppExport, of course)
> if using g++ in both the mother and the child package. (Interestingly,
> dyn.load() only complains when either the mother or the child package don't
> do so, but not if both don't do so => SEGFAULT.) Since it took me almost the
> entire afternoon to figure that out, I'll document a working example here. 
> 
> Scenario: We have a 'mother' package, which wants to make some C/C++ routines
> available to the 'child' package to be called directly from C/C++ level.
> Thus, mother's 'src' cointains:
> 
> 
> ********* BEGIN test.c *********
> 
> #include <R.h>
> #include <Rinternals.h>
> #include <R_ext/Rdynload.h>
> 
> SEXP fun(SEXP);
> 
> void R_init_mother(DllInfo *dll) {
> R_RegisterCCallable("mother", "fun", (DL_FUNC) &fun);
> }
> 
> SEXP fun(SEXP test) {
> Rprintf("fun so much fun\n");
> return R_NilValue;
> }
> 
> ********** END test.c **********
> 
> 
> (Note that no extern "C" is needed here because it will be compiled with gcc
> anyway).
> 
> The child uses Rcpp and mother, thus has
> 
> 
> ********* BEGIN DESCRIPTION *********
> 
> LinkingTo: mother, Rcpp
> Depends: mother, Rcpp
> Imports: mother, Rcpp
> 
> ********** END DESCRIPTION **********
> 
> 
> in its DESCRIPTION file, and 
> 
> 
> ********* BEGIN test.cpp *********
> 
> #include <Rinternals.h>
> #include <R_ext/Rdynload.h>
> 
> extern "C" {
> SEXP afun(SEXP);
> SEXP(*fun)(SEXP);
> 
> void R_init_child(DllInfo *info) {
>  fun = (SEXP(*)(SEXP)) R_GetCCallable("mother", "fun");
> }
> 
> SEXP afun(SEXP test) {
>  fun(test);
>  return R_NilValue;
> }
> }
> 
> ********** END test.cpp **********
> 
> (Note that extern "C" is crucial here.) After installing mother and child, we
> have:
> 
>> library(child)
> Loading required package: mother
> Loading required package: Rcpp
>> .Call("afun", 123, PACKAGE="child")
> fun so much fun
> NULL
>> 
> 
> Maybe it is of help to someone; please excuse me if I bored anyone with
> trivialities.
> 
> Best,
> Gregor
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From Rainer at krugs.de  Wed Jan 22 21:52:26 2014
From: Rainer at krugs.de (Rainer M Krug)
Date: Wed, 22 Jan 2014 21:52:26 +0100
Subject: [Rd] Creating Namespace and locking it during runtime?
Message-ID: <52E02F8A.7040602@krugs.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi

I would like to create a Namespace during runtime, and not during
loading a package.

My reasoning is that I want to be able to store a number of variables
and to "protect them from the user" (might be even myself). The code
will not be in a package, but will be source()ed.

Next step: pass variables from org mode / emacs to R and to protect
these variables from accidental change / removal.

Any suggestions on how to do this?

Cheers,

Rainer


- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
Biology, UCT), Dipl. Phys. (Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.22 (Darwin)
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

iQEcBAEBAgAGBQJS4C+KAAoJENvXNx4PUvmCVZUIALEi/MfHuGEioPbSpw2TOmcx
lw5WCeGlsfQoWFPuX8XZOvc+bE0iv/qz5IuTjHbHrrgdV1Oz0k3ufvukPNhFKr51
r7k3dKJCC5xF0KMXV5sRZYgKc8VL6yGHkrZJw+JrZhmiHnDXiQ41LiPhcd920IU9
68eHMOQKeloiWADPPPseJ7VlWwtMTKOzDem3AdBVL5U3fOFPe8qWy/F/uwuuf6+B
NMEYA7z/JxK80Ud6X8sO/1gAiXZsNdzV4Q8i018LUE5mlO1NiAaB0VNKUCSEzAeM
FM3+9P99ijjaUhmAl58JYNMkYTcwxHFCOuDPaTvRG0h0JBvg3873AZTY4uLF1p0=
=GSUq
-----END PGP SIGNATURE-----


From ripley at stats.ox.ac.uk  Thu Jan 23 09:21:43 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 23 Jan 2014 08:21:43 +0000
Subject: [Rd] Stata support in package foreign
Message-ID: <52E0D117.7040505@stats.ox.ac.uk>

As you know, Stata support in 'foreign' was frozen a while back at Stata 
version 12. R-core has received a request from a grad student to 'give 
top priority' to supporting Stata 13.  That is not going to happen, not 
least because none of us has access to Stata.

However, according to Stata's documentation both Stata 12 and 13 use 
format 115, so foreign::read.dta should be able to read Stata 13 files. 
  It would be helpful to know if that is the case.

Second, Stata document reading R's POSIXct date-times into Stata at 
http://www.stata.com/manuals13/ddatetime.pdf page 10 using format %tC. 
The description there of 'UTC-adusted seconds' is ambiguous, but what is 
said on page 2 suggests %tc is correct.  Could someone please try 
reading a recent R date-time into Stata (one since July 2012, the last 
leap second) and see which format reads it correctly.

Finally, PR#15517 is about undocumented details of a change in the way 
Stata saves dates.  It would be helpful if someone could send me two 
example Stata 12/13 files, one containing a column of dates and one 
containing a column of date-times together with a printout of what Stata 
interprets them as.

Thanks for any help,

BDR

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Thu Jan 23 09:23:37 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 23 Jan 2014 08:23:37 +0000
Subject: [Rd] Creating Namespace and locking it during runtime?
In-Reply-To: <52E02F8A.7040602@krugs.de>
References: <52E02F8A.7040602@krugs.de>
Message-ID: <52E0D189.9080106@stats.ox.ac.uk>

See ?lockEnvironment, which ??lock shows as ?bindenv .

On 22/01/2014 20:52, Rainer M Krug wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hi
>
> I would like to create a Namespace during runtime, and not during
> loading a package.
>
> My reasoning is that I want to be able to store a number of variables
> and to "protect them from the user" (might be even myself). The code
> will not be in a package, but will be source()ed.
>
> Next step: pass variables from org mode / emacs to R and to protect
> these variables from accidental change / removal.
>
> Any suggestions on how to do this?
>
> Cheers,
>
> Rainer
>
>
> - --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
> Biology, UCT), Dipl. Phys. (Germany)
>
> Centre of Excellence for Invasion Biology
> Stellenbosch University
> South Africa
>
> Tel :       +33 - (0)9 53 10 27 44
> Cell:       +33 - (0)6 85 62 59 98
> Fax :       +33 - (0)9 58 10 27 44
>
> Fax (D):    +49 - (0)3 21 21 25 22 44
>
> email:      Rainer at krugs.de
>
> Skype:      RMkrug
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG/MacGPG2 v2.0.22 (Darwin)
> Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/
>
> iQEcBAEBAgAGBQJS4C+KAAoJENvXNx4PUvmCVZUIALEi/MfHuGEioPbSpw2TOmcx
> lw5WCeGlsfQoWFPuX8XZOvc+bE0iv/qz5IuTjHbHrrgdV1Oz0k3ufvukPNhFKr51
> r7k3dKJCC5xF0KMXV5sRZYgKc8VL6yGHkrZJw+JrZhmiHnDXiQ41LiPhcd920IU9
> 68eHMOQKeloiWADPPPseJ7VlWwtMTKOzDem3AdBVL5U3fOFPe8qWy/F/uwuuf6+B
> NMEYA7z/JxK80Ud6X8sO/1gAiXZsNdzV4Q8i018LUE5mlO1NiAaB0VNKUCSEzAeM
> FM3+9P99ijjaUhmAl58JYNMkYTcwxHFCOuDPaTvRG0h0JBvg3873AZTY4uLF1p0=
> =GSUq
> -----END PGP SIGNATURE-----
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Rainer at krugs.de  Thu Jan 23 10:10:35 2014
From: Rainer at krugs.de (Rainer M Krug)
Date: Thu, 23 Jan 2014 10:10:35 +0100
Subject: [Rd] Creating Namespace and locking it during runtime?
In-Reply-To: <52E0D189.9080106@stats.ox.ac.uk>
References: <52E02F8A.7040602@krugs.de> <52E0D189.9080106@stats.ox.ac.uk>
Message-ID: <52E0DC8B.90709@krugs.de>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Thanks - looks very promising.

Rainer


On 01/23/14, 09:23 , Prof Brian Ripley wrote:
> See ?lockEnvironment, which ??lock shows as ?bindenv .
> 
> On 22/01/2014 20:52, Rainer M Krug wrote: Hi
> 
> I would like to create a Namespace during runtime, and not during 
> loading a package.
> 
> My reasoning is that I want to be able to store a number of
> variables and to "protect them from the user" (might be even
> myself). The code will not be in a package, but will be
> source()ed.
> 
> Next step: pass variables from org mode / emacs to R and to
> protect these variables from accidental change / removal.
> 
> Any suggestions on how to do this?
> 
> Cheers,
> 
> Rainer
> 
> 
>> 
>> ______________________________________________ 
>> R-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>> 
> 
> 

- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
Biology, UCT), Dipl. Phys. (Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.22 (Darwin)
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

iQEcBAEBAgAGBQJS4NyLAAoJENvXNx4PUvmCXyIH/2+SzGPuvHqBcWBrnRbZV1sV
nLa/NUKCgKq74fvDFbkCocOlVo6Cxkd5+r/FCQXpibiMUmgMyJTsABO1VkuPzNeT
ACXIwRKaci7/91el5OrvL1HBXcAWVdrYBXV6hO7mRqgp/Ait0G49L5rHekDjOhh0
9EJCi81pyzclnXpiu0IEjD2USVq3+VFKBxIiFTcMX6j8Lnzjud5cfVAhH0AOCqN0
asN+BCzNe43moKv1fxyYnSbXTflx56a6/cCWF+XEPpGTvJGhuaZ/WouvA8AledBt
/ViEraWKzvNIcWZAyCbV4aDK83Xu2EJel8cfiXuUUbp2dCZSce3pbifpYUQXqyg=
=FT1o
-----END PGP SIGNATURE-----


From milo.chen at outlook.com  Thu Jan 23 13:42:21 2014
From: milo.chen at outlook.com (milo)
Date: Thu, 23 Jan 2014 04:42:21 -0800 (PST)
Subject: [Rd] R reference classes - how to extend a generator object?
Message-ID: <1390480941189-4684029.post@n4.nabble.com>

Hello, 

I want to extend a generator object, but all the R help files have on this
subject is:

"Note that if one wanted to extend the reference class generator capability
with a subclass, this should be done by subclassing 'refGeneratorSlot', not
'refObjectGenerator'."

OK, but how do you actually do this? So I've tried:

MyGenerator <- setRefClass("MyGenerator",
    contains = "refGeneratorSlot",
    methods = list(
        new = function(...) {
            message("Hello, I'm being instantiated now!")
            callSuper(...)
        }
    )
)

but now what? How do I actually use this in conjunction with my class
definitions that use setRefClass()?

Many thanks,


M



--
View this message in context: http://r.789695.n4.nabble.com/R-reference-classes-how-to-extend-a-generator-object-tp4684029.html
Sent from the R devel mailing list archive at Nabble.com.


From ripley at stats.ox.ac.uk  Thu Jan 23 15:36:50 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 23 Jan 2014 14:36:50 +0000
Subject: [Rd] Stata support in package foreign
In-Reply-To: <52E0D117.7040505@stats.ox.ac.uk>
References: <52E0D117.7040505@stats.ox.ac.uk>
Message-ID: <52E12902.5040305@stats.ox.ac.uk>

On 23/01/2014 08:21, Prof Brian Ripley wrote:
> As you know, Stata support in 'foreign' was frozen a while back at Stata
> version 12. R-core has received a request from a grad student to 'give
> top priority' to supporting Stata 13.  That is not going to happen, not
> least because none of us has access to Stata.
>
> However, according to Stata's documentation both Stata 12 and 13 use
> format 115, so foreign::read.dta should be able to read Stata 13 files.
>   It would be helpful to know if that is the case.
>
> Second, Stata document reading R's POSIXct date-times into Stata at
> http://www.stata.com/manuals13/ddatetime.pdf page 10 using format %tC.
> The description there of 'UTC-adusted seconds' is ambiguous, but what is
> said on page 2 suggests %tc is correct.  Could someone please try
> reading a recent R date-time into Stata (one since July 2012, the last
> leap second) and see which format reads it correctly.
>
> Finally, PR#15517 is about undocumented details of a change in the way
> Stata saves dates.  It would be helpful if someone could send me two
> example Stata 12/13 files, one containing a column of dates and one
> containing a column of date-times together with a printout of what Stata
> interprets them as.

Thanks to George Vega Yon I have the Stata 12 files I need.

>
> Thanks for any help,
>
> BDR
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Claus.Neumayer at merckgroup.com  Fri Jan 24 08:21:33 2014
From: Claus.Neumayer at merckgroup.com (Claus.Neumayer at merckgroup.com)
Date: Fri, 24 Jan 2014 08:21:33 +0100
Subject: [Rd] Installation of R-3.0.2 failed Fortran error
Message-ID: <OFA5E4E0ED.1BF42281-ONC1257C6A.0027546B-C1257C6A.00286D43@merck.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140124/9bd0bb73/attachment.pl>

From xie at yihui.name  Fri Jan 24 08:59:22 2014
From: xie at yihui.name (Yihui Xie)
Date: Fri, 24 Jan 2014 01:59:22 -0600
Subject: [Rd] Format an empty data frame
Message-ID: <CANROs4eqJQDbHYfYRZQ_xhyXTgVygufkEy_toWM8c+4iifcXXQ@mail.gmail.com>

Hi,

Here seems to be a corner case in which format() fails:

> format(data.frame())
Error in .subset2(x, i, exact = exact) : subscript out of bounds

> sessionInfo()
R version 3.0.2 (2013-09-25)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base


Regards,
Yihui
--
Yihui Xie <xieyihui at gmail.com>
Web: http://yihui.name


From kevinushey at gmail.com  Fri Jan 24 09:03:07 2014
From: kevinushey at gmail.com (Kevin Ushey)
Date: Fri, 24 Jan 2014 00:03:07 -0800
Subject: [Rd] Format an empty data frame
In-Reply-To: <CANROs4eqJQDbHYfYRZQ_xhyXTgVygufkEy_toWM8c+4iifcXXQ@mail.gmail.com>
References: <CANROs4eqJQDbHYfYRZQ_xhyXTgVygufkEy_toWM8c+4iifcXXQ@mail.gmail.com>
Message-ID: <CAJXgQP35T=8Xa0ABgoPsh42FaZGf2w-OR6=nEuytSB6TU-bEAw@mail.gmail.com>

This behaviour is fixed in R-devel (tested with r64727)

> format( data.frame() )
data frame with 0 columns and 0 rows

-Kevin

On Thu, Jan 23, 2014 at 11:59 PM, Yihui Xie <xie at yihui.name> wrote:
> Hi,
>
> Here seems to be a corner case in which format() fails:
>
>> format(data.frame())
> Error in .subset2(x, i, exact = exact) : subscript out of bounds
>
>> sessionInfo()
> R version 3.0.2 (2013-09-25)
> Platform: x86_64-pc-linux-gnu (64-bit)
>
> locale:
>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> LC_PAPER=en_US.UTF-8       LC_NAME=C
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
>
> Regards,
> Yihui
> --
> Yihui Xie <xieyihui at gmail.com>
> Web: http://yihui.name
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Fri Jan 24 09:24:04 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 24 Jan 2014 08:24:04 +0000
Subject: [Rd] Installation of R-3.0.2 failed Fortran error
In-Reply-To: <OFA5E4E0ED.1BF42281-ONC1257C6A.0027546B-C1257C6A.00286D43@merck.de>
References: <OFA5E4E0ED.1BF42281-ONC1257C6A.0027546B-C1257C6A.00286D43@merck.de>
Message-ID: <52E22324.4030209@stats.ox.ac.uk>

On 24/01/2014 07:21, Claus.Neumayer at merckgroup.com wrote:
> Dear all,
>
> I have a big problem to compile  R-3.0.2 on our SUSE SLES 11 Server.
> Make breaks up with fortran errors and so the installation isn't
> successful
> This is a part from the make run output.:
>
> gcc-3.3 -fpic  -L/usr/lib64/gcc-lib/x86_64-suse-linux/3.3.3-hammer/ -lg2c
> -ffloat-store -c dlamch.f -o dlamch.o
> dlamch.f: In function `dlamch':
> dlamch.f:89: warning:
>           INTRINSIC          DIGITS, EPSILON, HUGE, MAXEXPONENT,
> Reference to unimplemented intrinsic `DIGITS' at (^) (assumed EXTERNAL)
> dlamch.f:89:
>           INTRINSIC          DIGITS, EPSILON, HUGE, MAXEXPONENT,
>                              ^
> Invalid declaration of or reference to symbol `digits' at (^) [initially
> seen at (^)]
> dlamch.f:89: warning:
>           INTRINSIC          DIGITS, EPSILON, HUGE, MAXEXPONENT,
>                                      ^
> Reference to unimplemented intrinsic `EPSILON' at (^) (assumed EXTERNAL)
> dlamch.f:89:
>           INTRINSIC          DIGITS, EPSILON, HUGE, MAXEXPONENT,
>
>
> For me it is not clear that I have to set some flags, or install a other
> fortran compiler tha our gcc-3.3

It will be clear if you read the 'R Installation and Administration 
Manual', as has already been pointed out to you.  If you need help with 
that, ask your IT support.

Alternative, install a version of R of the same vintage as your compiler 
(not later than 2005, and not even the end of the GCC 3.x series).

> I would be very grateful for any help.
> Thanks a lot.
>
>
> Best regards
>
> Claus Neumayer
>
> IS-PDR-A Research
> D41/221
> HPC: D041/001
> Phone: +49(0)6151 724526
> Mobil: +49 15114544526
> Fax: +49(0)6151 914526
> Email: Claus.Neumayer at merck.de
>
> Merck KGaA
> Frankfurter Str. 250
> D 64293 Darmstadt
> Home:   www.merck.de
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From sannandi at umail.iu.edu  Fri Jan 24 19:58:18 2014
From: sannandi at umail.iu.edu (Sandip Nandi)
Date: Fri, 24 Jan 2014 10:58:18 -0800
Subject: [Rd] Installation of R-3.0.2 failed Fortran error
In-Reply-To: <52E22324.4030209@stats.ox.ac.uk>
References: <OFA5E4E0ED.1BF42281-ONC1257C6A.0027546B-C1257C6A.00286D43@merck.de>
	<52E22324.4030209@stats.ox.ac.uk>
Message-ID: <CAGSjAUBQ4xqmi5rWakgO=ywJO480HQ+SryfJ72+6KpRH0TmyiQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140124/6ad9a0d5/attachment.pl>

From jeroenooms at gmail.com  Fri Jan 24 23:26:14 2014
From: jeroenooms at gmail.com (Jeroen Ooms)
Date: Fri, 24 Jan 2014 14:26:14 -0800
Subject: [Rd] Format an empty data frame
In-Reply-To: <CAJXgQP35T=8Xa0ABgoPsh42FaZGf2w-OR6=nEuytSB6TU-bEAw@mail.gmail.com>
References: <CANROs4eqJQDbHYfYRZQ_xhyXTgVygufkEy_toWM8c+4iifcXXQ@mail.gmail.com>
	<CAJXgQP35T=8Xa0ABgoPsh42FaZGf2w-OR6=nEuytSB6TU-bEAw@mail.gmail.com>
Message-ID: <CABFfbXsF6V3qA3dGb2f4=r5miOgXS6CJLJokuXt5r_7OUn9GFg@mail.gmail.com>

On Fri, Jan 24, 2014 at 12:03 AM, Kevin Ushey <kevinushey at gmail.com> wrote:
> This behaviour is fixed in R-devel (tested with r64727)

Was fixed a while ago: https://bugs.r-project.org/bugzilla/show_bug.cgi?id=15567


From mamueller at bgc-jena.mpg.de  Fri Jan 24 23:41:44 2014
From: mamueller at bgc-jena.mpg.de (Markus Mueller)
Date: Fri, 24 Jan 2014 23:41:44 +0100 (CET)
Subject: [Rd] Signature specific S4 Method export in NAMESPACE file would be
	cool
Message-ID: <919549647.7148.1390603304891.JavaMail.open-xchange@cal.bgc-jena.mpg.de>

Assume that you have a S4 generic function gf(x) and two methods implementing
it,
The first  for x of class A ( gf#A) and
the second for x of class B ( gf#B)

I would very much like to be able to:
1.) export only one method e.g. gf#A to be visible for  users of the package.
2.) hide gf#B automatically when gf is exported but not the class "B"
3.) hide gf#B in the gf-methods.Rd file produced by package.skeleton

More generally  one should of course think about any number of arguments e.g.
 gf(x,y) with y of any of the classes A B or C
and methods:
gf#A#A
gf#A#B
gf#A#C
gf#B#A
...
and so on

I would then like to
1.) export methods only for a list of signatures with
    an extended exportMethod statement in the  the NAMESPACE file .
    whose syntax could look like:

    exportMethod( gf,signatures=list(c(A,B),c(A,C)))

    where the omitted signatures argument defaults to the behavior already
implemented by exportMethods.

2.) hide any method with a signature >>containing<< a non exported class in case
the generic function  is exported
    e.g. if only A is an exported class only gf#A#A would be visible.

3.) as above

Background:
We strive for a weekly release cycle. It helps very much to be able to implement
and test new features without exposing them in the NAMESPACE until we are sure
that they will stay.
Being able to hide specific methods with specific signatures would help to
extend this practice to generic functions
which are quite numerous in our package.


I'm eager to hear about your thoughts.

Thanks in advance for your time.

Markus M?ller


From Claus.Neumayer at merckgroup.com  Sat Jan 25 06:13:47 2014
From: Claus.Neumayer at merckgroup.com (Claus.Neumayer at merckgroup.com)
Date: Sat, 25 Jan 2014 06:13:47 +0100
Subject: [Rd] Installation of R-3.0.2 failed Fortran error
In-Reply-To: <CAGSjAUBQ4xqmi5rWakgO=ywJO480HQ+SryfJ72+6KpRH0TmyiQ@mail.gmail.com>
References: <OFA5E4E0ED.1BF42281-ONC1257C6A.0027546B-C1257C6A.00286D43@merck.de>	<52E22324.4030209@stats.ox.ac.uk>
	<CAGSjAUBQ4xqmi5rWakgO=ywJO480HQ+SryfJ72+6KpRH0TmyiQ@mail.gmail.com>
Message-ID: <OFBF63BA0B.5240CBA0-ONC1257C6B.001B12DA-C1257C6B.001CBABD@merck.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140125/f6dd3b26/attachment.pl>

From axel.urbiz at gmail.com  Sat Jan 25 14:38:43 2014
From: axel.urbiz at gmail.com (Axel Urbiz)
Date: Sat, 25 Jan 2014 14:38:43 +0100
Subject: [Rd] package NAMESPACE question
Message-ID: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140125/4862dd4d/attachment.pl>

From edd at debian.org  Sat Jan 25 14:53:42 2014
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 25 Jan 2014 07:53:42 -0600
Subject: [Rd] package NAMESPACE question
In-Reply-To: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
Message-ID: <21219.49638.506680.884531@max.nulle.part>


On 25 January 2014 at 14:38, Axel Urbiz wrote:
| Hello,
| 
| I'm building a package. My code is stored in foo.R. This code has two
| functions FUN1 and FUN2. FUN1 calls FUN2. FUN1 is listed in export() under
| the package NAMESPACE but NOT FUN2. After building the package when I call
| FUN1 is giving me an error that cannot find FUN2.

Then you are doing something wrong in building, or possibly testing, the package.

"Everything within" can see everything else. 

| I solved this by adding FUN2 in the export() NAMESPACE. However, what is
| puzzling me is that I have other examples similar to the above (i.e., one
| function calling another but only one exported) in the same package where I
| don't get the error message.
| 
| Any idea of why that might be the case? My understanding is that export

We cannot tell without seeing the code.

I suggest you spend two minutes with package.skeleton(), create an empty
package, put something like these two functions in

         multiply <- function(x, k) x * k

         timestwo <- function(x) multiply(x, 2)

to convince yourself that timestwo() can in fact use multiply().

| only controls what is visible to the end user but functions not listed in
| export() are still "usable" within the package.
| 
| In this case, the reason I'd like to avoid to export FUN2 is so I don't
| have to add it in the package documentation.
| 
| 
| Any guidance is much appreciated.
| 
| Regards,
| Axel.
| 
| 	[[alternative HTML version deleted]]
| 
| ______________________________________________
| R-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From ligges at statistik.tu-dortmund.de  Sat Jan 25 16:32:36 2014
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 25 Jan 2014 16:32:36 +0100
Subject: [Rd] package NAMESPACE question
In-Reply-To: <21219.49638.506680.884531@max.nulle.part>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
	<21219.49638.506680.884531@max.nulle.part>
Message-ID: <52E3D914.7010208@statistik.tu-dortmund.de>



On 25.01.2014 14:53, Dirk Eddelbuettel wrote:
>
> On 25 January 2014 at 14:38, Axel Urbiz wrote:
> | Hello,
> |
> | I'm building a package. My code is stored in foo.R. This code has two
> | functions FUN1 and FUN2. FUN1 calls FUN2. FUN1 is listed in export() under
> | the package NAMESPACE but NOT FUN2. After building the package when I call
> | FUN1 is giving me an error that cannot find FUN2.
>
> Then you are doing something wrong in building, or possibly testing, the package.


I guess you have FUN1 in your Workspace and using that rather than the 
one in your package.

Uwe Ligges


> "Everything within" can see everything else.
>
> | I solved this by adding FUN2 in the export() NAMESPACE. However, what is
> | puzzling me is that I have other examples similar to the above (i.e., one
> | function calling another but only one exported) in the same package where I
> | don't get the error message.
> |
> | Any idea of why that might be the case? My understanding is that export
>
> We cannot tell without seeing the code.
>
> I suggest you spend two minutes with package.skeleton(), create an empty
> package, put something like these two functions in
>
>           multiply <- function(x, k) x * k
>
>           timestwo <- function(x) multiply(x, 2)
>
> to convince yourself that timestwo() can in fact use multiply().
>
> | only controls what is visible to the end user but functions not listed in
> | export() are still "usable" within the package.
> |
> | In this case, the reason I'd like to avoid to export FUN2 is so I don't
> | have to add it in the package documentation.
> |
> |
> | Any guidance is much appreciated.
> |
> | Regards,
> | Axel.
> |
> | 	[[alternative HTML version deleted]]
> |
> | ______________________________________________
> | R-devel at r-project.org mailing list
> | https://stat.ethz.ch/mailman/listinfo/r-devel
>


From edd at debian.org  Sat Jan 25 20:32:30 2014
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 25 Jan 2014 13:32:30 -0600
Subject: [Rd] package NAMESPACE question
In-Reply-To: <CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
	<21219.49638.506680.884531@max.nulle.part>
	<52E3D914.7010208@statistik.tu-dortmund.de>
	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>
Message-ID: <21220.4430.640257.323491@max.nulle.part>


On 25 January 2014 at 20:26, Axel Urbiz wrote:
| Dirk and Uwe, many thanks both for your responses. I'm still having the same
| issue. Here's in more detail:
| 
| As Dirk suggested, I've done the following:
| 
| * I've created a package named {foo}.?
| 
| * {foo} only has one file named test.R which includes exactly the following
| code:
| 
| 
| multiply <- function(x,y) x * y
| 
| timestwo <- function(x) multiply(x, 2)
| 
| * I've modified the NAMESPACE to include ONLY the following line:
| 
| export(multiply)
| 
| * I've successfully built and installed the foo package
| 
| * Then in R I got this:
| 
| > library(foo)
| 
| > multiply(2,3)
| 
| [1] 6
| 
| > timestwo(2)
| 
| Error: could not find function "timestwo"
| 
| >?
| 
| * However, if in the NAMESPACE I write instead export(multiply, timestwo), then
| I don't get the error above.

That. Works. As. Designed. And. Documented.

  Case 1)  You _export only multiply_. Hence timestwo is not found. Hint:
  learn about the difference between '::' and ':::' as well.

  Case 2)  You _export both_. Both are found.

No mystery.  What other effect do you expect export() to have?

Dirk

| 
| * btw, here's my session info
| 
| > sessionInfo()
| 
| R Under development (unstable) (2014-01-17 r64821)
| 
| Platform: x86_64-apple-darwin10.8.0 (64-bit)
| 
| locale:
| 
| [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8
| 
| attached base packages:
| 
| [1] stats ? ? graphics ?grDevices utils ? ? datasets ?methods ? base ?
| ??
| 
| other attached packages:
| 
| [1] foo_1.0
| 
| 
| Thanks,
| 
| Axel. ?
| 
| 
| 
| 
| 
| 
| 
| 
| On Sat, Jan 25, 2014 at 4:32 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de>
| wrote:
| 
| 
| 
|     On 25.01.2014 14:53, Dirk Eddelbuettel wrote:
| 
| 
|         On 25 January 2014 at 14:38, Axel Urbiz wrote:
|         | Hello,
|         |
|         | I'm building a package. My code is stored in foo.R. This code has two
|         | functions FUN1 and FUN2. FUN1 calls FUN2. FUN1 is listed in export()
|         under
|         | the package NAMESPACE but NOT FUN2. After building the package when I
|         call
|         | FUN1 is giving me an error that cannot find FUN2.
| 
|         Then you are doing something wrong in building, or possibly testing,
|         the package.
| 
| 
| 
|     I guess you have FUN1 in your Workspace and using that rather than the one
|     in your package.
| 
|     Uwe Ligges
| 
| 
| 
| 
|         "Everything within" can see everything else.
| 
|         | I solved this by adding FUN2 in the export() NAMESPACE. However, what
|         is
|         | puzzling me is that I have other examples similar to the above (i.e.,
|         one
|         | function calling another but only one exported) in the same package
|         where I
|         | don't get the error message.
|         |
|         | Any idea of why that might be the case? My understanding is that
|         export
| 
|         We cannot tell without seeing the code.
| 
|         I suggest you spend two minutes with package.skeleton(), create an
|         empty
|         package, put something like these two functions in
| 
|         ? ? ? ? ? multiply <- function(x, k) x * k
| 
|         ? ? ? ? ? timestwo <- function(x) multiply(x, 2)
| 
|         to convince yourself that timestwo() can in fact use multiply().
| 
|         | only controls what is visible to the end user but functions not
|         listed in
|         | export() are still "usable" within the package.
|         |
|         | In this case, the reason I'd like to avoid to export FUN2 is so I
|         don't
|         | have to add it in the package documentation.
|         |
|         |
|         | Any guidance is much appreciated.
|         |
|         | Regards,
|         | Axel.
|         |
|         | ? ? ? [[alternative HTML version deleted]]
|         |
|         | ______________________________________________
|         | R-devel at r-project.org mailing list
|         | https://stat.ethz.ch/mailman/listinfo/r-devel
| 
| 
| 

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From axel.urbiz at gmail.com  Sat Jan 25 20:26:23 2014
From: axel.urbiz at gmail.com (Axel Urbiz)
Date: Sat, 25 Jan 2014 20:26:23 +0100
Subject: [Rd] package NAMESPACE question
In-Reply-To: <52E3D914.7010208@statistik.tu-dortmund.de>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
	<21219.49638.506680.884531@max.nulle.part>
	<52E3D914.7010208@statistik.tu-dortmund.de>
Message-ID: <CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140125/5aff701e/attachment.pl>

From axel.urbiz at gmail.com  Sat Jan 25 20:47:03 2014
From: axel.urbiz at gmail.com (Axel Urbiz)
Date: Sat, 25 Jan 2014 20:47:03 +0100
Subject: [Rd] package NAMESPACE question
In-Reply-To: <21220.4430.640257.323491@max.nulle.part>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
	<21219.49638.506680.884531@max.nulle.part>
	<52E3D914.7010208@statistik.tu-dortmund.de>
	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>
	<21220.4430.640257.323491@max.nulle.part>
Message-ID: <CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140125/7caddd78/attachment.pl>

From gmbecker at ucdavis.edu  Sat Jan 25 21:37:01 2014
From: gmbecker at ucdavis.edu (Gabriel Becker)
Date: Sat, 25 Jan 2014 12:37:01 -0800
Subject: [Rd] package NAMESPACE question
In-Reply-To: <CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
	<21219.49638.506680.884531@max.nulle.part>
	<52E3D914.7010208@statistik.tu-dortmund.de>
	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>
	<21220.4430.640257.323491@max.nulle.part>
	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>
Message-ID: <CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140125/d2675744/attachment.pl>

From gmbecker at ucdavis.edu  Sat Jan 25 22:19:21 2014
From: gmbecker at ucdavis.edu (Gabriel Becker)
Date: Sat, 25 Jan 2014 13:19:21 -0800
Subject: [Rd] package NAMESPACE question
In-Reply-To: <CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
	<21219.49638.506680.884531@max.nulle.part>
	<52E3D914.7010208@statistik.tu-dortmund.de>
	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>
	<21220.4430.640257.323491@max.nulle.part>
	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>
	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>
	<CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>
Message-ID: <CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140125/8e75918e/attachment.pl>

From murdoch.duncan at gmail.com  Sat Jan 25 22:24:35 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 25 Jan 2014 16:24:35 -0500
Subject: [Rd] package NAMESPACE question
In-Reply-To: <CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>	<21219.49638.506680.884531@max.nulle.part>	<52E3D914.7010208@statistik.tu-dortmund.de>	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>	<21220.4430.640257.323491@max.nulle.part>
	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>
Message-ID: <52E42B93.4030805@gmail.com>

On 14-01-25 2:47 PM, Axel Urbiz wrote:
> Thanks Dirk. Sorry...It's my misunderstanding about "export" in the
> NAMESPACE then. Essentially, as I understand it now, I should export all
> functions that are used in the package? Why would I not export a certain
> function?
>
> In the example above, say I wanted to avoid documenting the function
> "timestwo" in the foo package. Is there a way to do that? Otherwise in R
> CMD check foo, I get this "Undocumented code objects: ?timestwo?".


I think you missed the point of Dirk's example.  In his example, 
timestwo was the function that you *did* want to export and document. 
multiply was the function you wanted to keep local.

So you should export timestwo, and not multiply.  You will then need to 
document timestwo, but you won't need to document multiply.

That will work.

Duncan Murdoch

>
> Thanks again for all your help!
> Axel.
>
>
> On Sat, Jan 25, 2014 at 8:32 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>>
>> On 25 January 2014 at 20:26, Axel Urbiz wrote:
>> | Dirk and Uwe, many thanks both for your responses. I'm still having the
>> same
>> | issue. Here's in more detail:
>> |
>> | As Dirk suggested, I've done the following:
>> |
>> | * I've created a package named {foo}.
>> |
>> | * {foo} only has one file named test.R which includes exactly the
>> following
>> | code:
>> |
>> |
>> | multiply <- function(x,y) x * y
>> |
>> | timestwo <- function(x) multiply(x, 2)
>> |
>> | * I've modified the NAMESPACE to include ONLY the following line:
>> |
>> | export(multiply)
>> |
>> | * I've successfully built and installed the foo package
>> |
>> | * Then in R I got this:
>> |
>> | > library(foo)
>> |
>> | > multiply(2,3)
>> |
>> | [1] 6
>> |
>> | > timestwo(2)
>> |
>> | Error: could not find function "timestwo"
>> |
>> | >
>> |
>> | * However, if in the NAMESPACE I write instead export(multiply,
>> timestwo), then
>> | I don't get the error above.
>>
>> That. Works. As. Designed. And. Documented.
>>
>>    Case 1)  You _export only multiply_. Hence timestwo is not found. Hint:
>>    learn about the difference between '::' and ':::' as well.
>>
>>    Case 2)  You _export both_. Both are found.
>>
>> No mystery.  What other effect do you expect export() to have?
>>
>> Dirk
>>
>> |
>> | * btw, here's my session info
>> |
>> | > sessionInfo()
>> |
>> | R Under development (unstable) (2014-01-17 r64821)
>> |
>> | Platform: x86_64-apple-darwin10.8.0 (64-bit)
>> |
>> | locale:
>> |
>> | [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8
>> |
>> | attached base packages:
>> |
>> | [1] stats     graphics  grDevices utils     datasets  methods   base
>> |
>> |
>> | other attached packages:
>> |
>> | [1] foo_1.0
>> |
>> |
>> | Thanks,
>> |
>> | Axel.
>> |
>> |
>> |
>> |
>> |
>> |
>> |
>> |
>> | On Sat, Jan 25, 2014 at 4:32 PM, Uwe Ligges <
>> ligges at statistik.tu-dortmund.de>
>> | wrote:
>> |
>> |
>> |
>> |     On 25.01.2014 14:53, Dirk Eddelbuettel wrote:
>> |
>> |
>> |         On 25 January 2014 at 14:38, Axel Urbiz wrote:
>> |         | Hello,
>> |         |
>> |         | I'm building a package. My code is stored in foo.R. This code
>> has two
>> |         | functions FUN1 and FUN2. FUN1 calls FUN2. FUN1 is listed in
>> export()
>> |         under
>> |         | the package NAMESPACE but NOT FUN2. After building the package
>> when I
>> |         call
>> |         | FUN1 is giving me an error that cannot find FUN2.
>> |
>> |         Then you are doing something wrong in building, or possibly
>> testing,
>> |         the package.
>> |
>> |
>> |
>> |     I guess you have FUN1 in your Workspace and using that rather than
>> the one
>> |     in your package.
>> |
>> |     Uwe Ligges
>> |
>> |
>> |
>> |
>> |         "Everything within" can see everything else.
>> |
>> |         | I solved this by adding FUN2 in the export() NAMESPACE.
>> However, what
>> |         is
>> |         | puzzling me is that I have other examples similar to the above
>> (i.e.,
>> |         one
>> |         | function calling another but only one exported) in the same
>> package
>> |         where I
>> |         | don't get the error message.
>> |         |
>> |         | Any idea of why that might be the case? My understanding is
>> that
>> |         export
>> |
>> |         We cannot tell without seeing the code.
>> |
>> |         I suggest you spend two minutes with package.skeleton(), create
>> an
>> |         empty
>> |         package, put something like these two functions in
>> |
>> |                   multiply <- function(x, k) x * k
>> |
>> |                   timestwo <- function(x) multiply(x, 2)
>> |
>> |         to convince yourself that timestwo() can in fact use multiply().
>> |
>> |         | only controls what is visible to the end user but functions not
>> |         listed in
>> |         | export() are still "usable" within the package.
>> |         |
>> |         | In this case, the reason I'd like to avoid to export FUN2 is
>> so I
>> |         don't
>> |         | have to add it in the package documentation.
>> |         |
>> |         |
>> |         | Any guidance is much appreciated.
>> |         |
>> |         | Regards,
>> |         | Axel.
>> |         |
>> |         |       [[alternative HTML version deleted]]
>> |         |
>> |         | ______________________________________________
>> |         | R-devel at r-project.org mailing list
>> |         | https://stat.ethz.ch/mailman/listinfo/r-devel
>> |
>> |
>> |
>>
>> --
>> Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com
>>
>
> 	[[alternative HTML version deleted]]
>
>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From dtenenba at fhcrc.org  Sat Jan 25 23:23:08 2014
From: dtenenba at fhcrc.org (Dan Tenenbaum)
Date: Sat, 25 Jan 2014 14:23:08 -0800 (PST)
Subject: [Rd] interpreting the output of getParseData()
In-Reply-To: <1398825612.1355024.1390686219229.JavaMail.root@fhcrc.org>
Message-ID: <858439772.1355504.1390688588566.JavaMail.root@fhcrc.org>

Hi,

I'm trying to make sense of the output of getParseData(). The "parent" column is supposed to refer to the "id" of the parent of the given item, but there are numbers in the parent column that do not exist in the id column. Example:

> p <- parse(text="f<-function(){if(TRUE)1 else 2}")
> df <- getParseData(p)
> df
   line1 col1 line2 col2 id parent       token terminal     text
29     1    1     1   31 29     30        expr    FALSE         
1      1    1     1    1  1      3      SYMBOL     TRUE        f
3      1    1     1    1  3     29        expr    FALSE         
2      1    2     1    3  2     29 LEFT_ASSIGN     TRUE       <-
28     1    4     1   31 28     29        expr    FALSE         
4      1    4     1   11  4     28    FUNCTION     TRUE function
5      1   12     1   12  5     28         '('     TRUE        (
6      1   13     1   13  6     28         ')'     TRUE        )
25     1   14     1   31 25     27        expr    FALSE         
7      1   14     1   14  7     25         '{'     TRUE        {
22     1   15     1   30 22     23        expr    FALSE         
8      1   15     1   16  8     22          IF     TRUE       if
9      1   17     1   17  9     13         '('     TRUE        (
10     1   18     1   21 10     11   NUM_CONST     TRUE     TRUE
11     1   18     1   21 11     13        expr    FALSE         
12     1   22     1   22 12     13         ')'     TRUE        )
14     1   23     1   23 14     15   NUM_CONST     TRUE        1
15     1   23     1   23 15     17        expr    FALSE         
16     1   25     1   28 16     22        ELSE     TRUE     else
18     1   30     1   30 18     19   NUM_CONST     TRUE        2
19     1   30     1   30 19     21        expr    FALSE         
20     1   31     1   31 20     25         '}'     TRUE        }

The following numbers occur in the parent column but not the id column:
[1] 30 27 23 13 17 21

What I'm trying to do is determine the length (in lines) of every function in a source file using 
the getParseData() information. I can see that the opening and closing curly braces of my test function have the same parent (25), but 25 has the parent 27, which does not occur in the id column. 
I realize that my function is all on one line, and not all functions have opening and closing curly braces, but I'd still like to understand what's going on here....

What does it mean when an item's parent does not exist in the id column? 

Thanks,
Dan

> sessionInfo()
R Under development (unstable) (2013-10-18 r64076)
Platform: x86_64-apple-darwin10.8.0 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base


From axel.urbiz at gmail.com  Sat Jan 25 22:06:51 2014
From: axel.urbiz at gmail.com (Axel Urbiz)
Date: Sat, 25 Jan 2014 22:06:51 +0100
Subject: [Rd] package NAMESPACE question
In-Reply-To: <CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
	<21219.49638.506680.884531@max.nulle.part>
	<52E3D914.7010208@statistik.tu-dortmund.de>
	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>
	<21220.4430.640257.323491@max.nulle.part>
	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>
	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>
Message-ID: <CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140125/37f502f8/attachment.pl>

From axel.urbiz at gmail.com  Sun Jan 26 00:05:42 2014
From: axel.urbiz at gmail.com (Axel Urbiz)
Date: Sun, 26 Jan 2014 00:05:42 +0100
Subject: [Rd] package NAMESPACE question
In-Reply-To: <CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
	<21219.49638.506680.884531@max.nulle.part>
	<52E3D914.7010208@statistik.tu-dortmund.de>
	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>
	<21220.4430.640257.323491@max.nulle.part>
	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>
	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>
	<CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>
	<CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>
Message-ID: <CAAyVsXL7EV1rtm+aJK85eTAcmdDyiUkuTuugG=H6EeDNyoKv+w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140126/779978b3/attachment.pl>

From murdoch.duncan at gmail.com  Sun Jan 26 13:21:01 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 26 Jan 2014 07:21:01 -0500
Subject: [Rd] package NAMESPACE question
In-Reply-To: <CAAyVsXL7EV1rtm+aJK85eTAcmdDyiUkuTuugG=H6EeDNyoKv+w@mail.gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>	<21219.49638.506680.884531@max.nulle.part>	<52E3D914.7010208@statistik.tu-dortmund.de>	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>	<21220.4430.640257.323491@max.nulle.part>	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>	<CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>	<CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>
	<CAAyVsXL7EV1rtm+aJK85eTAcmdDyiUkuTuugG=H6EeDNyoKv+w@mail.gmail.com>
Message-ID: <52E4FDAD.1070001@gmail.com>

On 14-01-25 6:05 PM, Axel Urbiz wrote:
> Thanks again all. Essentially, this is the section of the code that is
> causing trouble. This is part of the (exported) function which calls
> contr.none (not exported). As mentioned, when I call the exported function
> it complains with the error described before.
>
>
>    oldcontrasts <- unlist(options("contrasts"))
>      if (cts)
>          options(contrasts = c(unordered = "contr.none", ordered =
> "contr.diff"))
>      x <- model.matrix(terms(reformulate(var_names)), mf, contrasts)
>      options(contrasts = oldcontrasts)

This is hugely incomplete.  Please stop wasting everyone's time, and 
post something reproducible.

Duncan Murdoch


From robertajankowski at gmail.com  Sun Jan 26 06:44:14 2014
From: robertajankowski at gmail.com (Roberta Jankowski)
Date: Sun, 26 Jan 2014 00:44:14 -0500
Subject: [Rd] Trouble installing package in development version of R
Message-ID: <CAN1m9nDjbtGy7GoHWY-oL7Y+=CcgxReXGd_sRW_i4Em3iRpu+Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140126/08b06d9e/attachment.pl>

From murdoch.duncan at gmail.com  Sun Jan 26 14:54:35 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 26 Jan 2014 08:54:35 -0500
Subject: [Rd] Trouble installing package in development version of R
In-Reply-To: <CAN1m9nDjbtGy7GoHWY-oL7Y+=CcgxReXGd_sRW_i4Em3iRpu+Q@mail.gmail.com>
References: <CAN1m9nDjbtGy7GoHWY-oL7Y+=CcgxReXGd_sRW_i4Em3iRpu+Q@mail.gmail.com>
Message-ID: <52E5139B.8040804@gmail.com>

On 14-01-26 12:44 AM, Roberta Jankowski wrote:> Dear R-devel,
 >
 > I'm trying to get practice learning more about the internals of R so am
 > experimenting with the development version. I successfully cloned the SVN
 > repo and built and installed R. I am using 2014-01-23 r64861.
 >
 > However, I cannot seem to install the lattice package. I tried within R
 > using install.packages and got the error
 > sh: 1: 1: not found

That message comes from "sh", the command shell that R is running.

 >
 > I then downloaded the tar.gz and tried it as follows:
 > $ sudo R CMD INSTALL lattice_0.20-24.tar.gz
 >
 > * installing to library ?/home/rjan/R/i686-pc-linux-gnu-library/3.1?
 > * installing *source* package ?lattice? ...
 > ** package ?lattice? successfully unpacked and MD5 sums checked
 > ** libs
 > sh: 1: 1: not found

Same here.  However, notice that some install messages printed, so the 
install started, it just failed partway through.

 > ERROR: compilation failed for package ?lattice?
 > * removing ?/home/rjan/R/i686-pc-linux-gnu-library/3.1/lattice?
 >
 > I then looked at the help for R CMD INSTALL and saw debug flag so I did:
 > $ sudo R CMD INSTALL -d lattice_0.20-24.tar.gz
 > processing ?lattice_0.20-24.tar.gz?
 > a file
 > * installing to library ?/home/rjan/R/i686-pc-linux-gnu-library/3.1?
 > * build_help_types=
 > * DBG: 'R CMD INSTALL' now doing do_install()
 > * created lock directory
 > ?/home/rjan/R/i686-pc-linux-gnu-library/3.1/00LOCK-lattice?
 > * installing *source* package ?lattice? ...
 > ** package ?lattice? successfully unpacked and MD5 sums checked
 > ** libs
 > about to run R CMD SHLIB -o lattice.so init.c threeDplot.c
 > sh: 1: 1: not found
 > ERROR: compilation failed for package ?lattice?
 > * removing ?/home/rjan/R/i686-pc-linux-gnu-library/3.1/lattice?

So it looks as though R CMD SHLIB is the step that failed.  You can look 
it up in Writing R Externals, it is supposed to compile those C files 
into the output lattice.so.  Something is going wrong here.
My guess is that you don't have the compiler installed, or R CMD SHLIB 
is looking in the wrong place, or something like that.
 >
 >
 > I then did
 > $ cd lattice/src
 > $ R CMD SHLIB -d -o lattice.so init.c threeDplot.c
 > sh: 1: 1: not found
 >
 > I'm interested in two things.
 > 1 does anyone know what's going on?
 > 2. how could I have figured this out myself? What could I have done
 > differently for the R CMD SHLIB command to get more output (for example
 > where this line of code was)?

You can look at the online help within R, ?SHLIB, and it will tell you 
that -n will give you some diagnostic information.  You can also try

R CMD SHLIB --help

to see a bit more.

One other thing you can do if you need to ask here again, is to post 
system and version information printed by R by sessionInfo().  And 
please don't post in HTML.

Duncan Murdoch

 >
 > I have read R installation and administration manual but I did not
 > understand a lot so I'm probably missing something that is in there 
but I'm
 > not sure what.
 >
 > Thank you for your patience,
 >
 > Roberta
 >
 > 	[[alternative HTML version deleted]]
 >
 >
 >
 > ______________________________________________
 > R-devel at r-project.org mailing list
 > https://stat.ethz.ch/mailman/listinfo/r-devel
 >


From axel.urbiz at gmail.com  Sun Jan 26 15:34:19 2014
From: axel.urbiz at gmail.com (Axel Urbiz)
Date: Sun, 26 Jan 2014 15:34:19 +0100
Subject: [Rd] package NAMESPACE question
In-Reply-To: <52E4FDAD.1070001@gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
	<21219.49638.506680.884531@max.nulle.part>
	<52E3D914.7010208@statistik.tu-dortmund.de>
	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>
	<21220.4430.640257.323491@max.nulle.part>
	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>
	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>
	<CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>
	<CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>
	<CAAyVsXL7EV1rtm+aJK85eTAcmdDyiUkuTuugG=H6EeDNyoKv+w@mail.gmail.com>
	<52E4FDAD.1070001@gmail.com>
Message-ID: <CAAyVsXJA8A64=bfkb5i7W13h43YzBwxm0xi-_nX4-bgGeURzzA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140126/a8c67d21/attachment.pl>

From pgilbert902 at gmail.com  Sun Jan 26 17:52:24 2014
From: pgilbert902 at gmail.com (Paul Gilbert)
Date: Sun, 26 Jan 2014 11:52:24 -0500
Subject: [Rd] No repository set, so cyclic dependency check skipped
Message-ID: <52E53D48.7050200@gmail.com>

When checking a package I am getting

* checking package dependencies ... NOTE
   No repository set, so cyclic dependency check skipped

How/where do I set the repository so I don't get this note?

No doubt this is explained in Writing R Extension, but I have not found it.

Paul


From ligges at statistik.tu-dortmund.de  Sun Jan 26 18:31:19 2014
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sun, 26 Jan 2014 18:31:19 +0100
Subject: [Rd] No repository set, so cyclic dependency check skipped
In-Reply-To: <52E53D48.7050200@gmail.com>
References: <52E53D48.7050200@gmail.com>
Message-ID: <52E54667.3070106@statistik.tu-dortmund.de>



On 26.01.2014 17:52, Paul Gilbert wrote:
> When checking a package I am getting
>
> * checking package dependencies ... NOTE
>    No repository set, so cyclic dependency check skipped
>
> How/where do I set the repository so I don't get this note?

Set a repository (e.g,. via optiopns(repos=....) in your .Rprofile.

Best,
Uwe Ligges


>
> No doubt this is explained in Writing R Extension, but I have not found it.
>
> Paul
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From pgilbert902 at gmail.com  Sun Jan 26 18:48:47 2014
From: pgilbert902 at gmail.com (Paul Gilbert)
Date: Sun, 26 Jan 2014 12:48:47 -0500
Subject: [Rd] No repository set, so cyclic dependency check skipped
In-Reply-To: <52E54667.3070106@statistik.tu-dortmund.de>
References: <52E53D48.7050200@gmail.com>
	<52E54667.3070106@statistik.tu-dortmund.de>
Message-ID: <52E54A7F.2010100@gmail.com>



On 01/26/2014 12:31 PM, Uwe Ligges wrote:
>
>
> On 26.01.2014 17:52, Paul Gilbert wrote:
>> When checking a package I am getting
>>
>> * checking package dependencies ... NOTE
>>    No repository set, so cyclic dependency check skipped
>>
>> How/where do I set the repository so I don't get this note?
>
> Set a repository (e.g,. via optiopns(repos=....) in your .Rprofile.

I'm getting this note when I check in R-devel on your win-builder site. 
Does that mean I need to set .Rprofile or you do?

Best,
Paul

>
> Best,
> Uwe Ligges
>
>
>>
>> No doubt this is explained in Writing R Extension, but I have not
>> found it.
>>
>> Paul
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel


From ligges at statistik.tu-dortmund.de  Sun Jan 26 18:50:06 2014
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sun, 26 Jan 2014 18:50:06 +0100
Subject: [Rd] No repository set, so cyclic dependency check skipped
In-Reply-To: <52E54A7F.2010100@gmail.com>
References: <52E53D48.7050200@gmail.com>
	<52E54667.3070106@statistik.tu-dortmund.de>
	<52E54A7F.2010100@gmail.com>
Message-ID: <52E54ACE.1070801@statistik.tu-dortmund.de>



On 26.01.2014 18:48, Paul Gilbert wrote:
>
>
> On 01/26/2014 12:31 PM, Uwe Ligges wrote:
>>
>>
>> On 26.01.2014 17:52, Paul Gilbert wrote:
>>> When checking a package I am getting
>>>
>>> * checking package dependencies ... NOTE
>>>    No repository set, so cyclic dependency check skipped
>>>
>>> How/where do I set the repository so I don't get this note?
>>
>> Set a repository (e.g,. via optiopns(repos=....) in your .Rprofile.
>
> I'm getting this note when I check in R-devel on your win-builder site.
> Does that mean I need to set .Rprofile or you do?

Arrrrgh, I have not set it for the on-demand checks, will do so soon.

Uwe




>
> Best,
> Paul
>
>>
>> Best,
>> Uwe Ligges
>>
>>
>>>
>>> No doubt this is explained in Writing R Extension, but I have not
>>> found it.
>>>
>>> Paul
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch.duncan at gmail.com  Sun Jan 26 22:09:49 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 26 Jan 2014 16:09:49 -0500
Subject: [Rd] package NAMESPACE question
In-Reply-To: <CAAyVsXJA8A64=bfkb5i7W13h43YzBwxm0xi-_nX4-bgGeURzzA@mail.gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>	<21219.49638.506680.884531@max.nulle.part>	<52E3D914.7010208@statistik.tu-dortmund.de>	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>	<21220.4430.640257.323491@max.nulle.part>	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>	<CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>	<CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>	<CAAyVsXL7EV1rtm+aJK85eTAcmdDyiUkuTuugG=H6EeDNyoKv+w@mail.gmail.com>	<52E4FDAD.1070001@gmail.com>
	<CAAyVsXJA8A64=bfkb5i7W13h43YzBwxm0xi-_nX4-bgGeURzzA@mail.gmail.com>
Message-ID: <52E5799D.7010207@gmail.com>

On 14-01-26 9:34 AM, Axel Urbiz wrote:> Hi Duncan,
 >
 > My most sincere apologies. It's really not my intention to waste anyones
 > time. More the opposite...for some reason I thought that the problem had
 > to do with my call to options() and thought that would be enough. Here's
 > something reproducible:
 >
 > I built a foo package based on the code under the "----" below. In the
 > namespace file, I've only exported: trt and cmt (not contr.none and
 > contr.diff). Notice that cmt calls contr.none and contr.diff by default.
 >
 > Then in R, I run this code and I get this error message:
 >
 > library(foo)
 > set.seed(1)
 > dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x
 > = rnorm(100),
 >                           f = gl(4, 250, labels = c("A", "B", "C", "D")))
 > dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
 >  > Error in get(ctr, mode = "function", envir = parent.frame()) :
 >     object 'contr.none' of mode 'function' was not found

In your call to model.matrix in cmt, you pass "contrasts" without 
defining it.  This looks like an error, though it wouldn't cause the 
message you saw, it's likely it would cause some strange problem.

I haven't tried putting your code in a package to see what difference 
that makes.  It's your job to make a reproducible example, not mine.

Duncan Murdoch


 >
 > Thanks,
 > Axel.
 >
 > --------------------------------------------
 >
 > trt <- function(x) x
 >
 > cmt <- function(formula, data, subset, na.action = na.pass, cts = 
TRUE)  {
 >    if (!inherits(formula, "formula"))
 >      stop("Method is only for formula objects.")
 >    mf <- match.call(expand.dots = FALSE)
 >    args <- match(c("formula", "data", "subset", "na.action"),
 >                  names(mf), 0)
 >    mf <- mf[c(1, args)]
 >    mf$drop.unused.levels <- TRUE
 >    mf[[1]] <- as.name <http://as.name>("model.frame")
 >    special <- "trt"
 >    mt <- if(missing(data)) terms(formula, special) else terms(formula,
 > special, data = data)
 >    mf$formula <- mt
 >    mf <- eval.parent(mf)
 >    Terms <- attr(mf, "terms")
 >    attr(Terms, "intercept") <- 0
 >    trt.var <- attr(Terms, "specials")$trt
 >    ct <- mf[, trt.var]
 >    y <- model.response(mf, "numeric")
 >    var_names <- attributes(Terms)$term.labels[-(trt.var-1)]
 >    treat.names <- levels(as.factor(ct))
 >    oldcontrasts <- unlist(options("contrasts"))
 >    if (cts)
 >      options(contrasts = c(unordered = "contr.none", ordered =
 > "contr.diff"))
 >    x <- model.matrix(terms(reformulate(var_names)),
 >                      mf, contrasts)
 >    options(contrasts = oldcontrasts)
 >    intercept <- which(colnames(x) == "(Intercept)")
 >    if (length(intercept > 0)) x <- x[, -intercept]
 >    return(x)
 >    }
 > #######################################
 > # An alternative contrasts function for unordered factors
 > # Ensures symmetric treatment of all levels of a factor
 > #######################################
 > contr.none <- function(n, contrasts) {
 >    if (length(n) == 1)
 >      contr.treatment(n, contrasts = n<=2)
 >    else
 >      contr.treatment(n, contrasts = length(unique(n))<=2)
 > }
 >
 > #######################################
 > # An alternative contrasts function for ordered factors
 > # Ensures use of a difference penalty for such factors
 > #######################################
 > contr.diff <- function (n, contrasts = TRUE)
 > {
 >    if (is.numeric(n) && length(n) == 1) {
 >      if (n > 1)
 >        levs <- 1:n
 >      else stop("not enough degrees of freedom to define contrasts")
 >    }
 >    else {
 >      levs <- n
 >      n <- length(n)
 >    }
 >    contr <- array(0, c(n, n), list(levs, paste(">=", levs, sep="")))
 >    contr[outer(1:n,1:n, ">=")] <- 1
 >    if (n < 2)
 >      stop(gettextf("contrasts not defined for %d degrees of freedom",
 >                    n - 1), domain = NA)
 >    if (contrasts)
 >      contr <- contr[, -1, drop = FALSE]
 >    contr
 > }
 >
 >
 >
 > On Sun, Jan 26, 2014 at 1:21 PM, Duncan Murdoch
 > <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
 >
 >     On 14-01-25 6:05 PM, Axel Urbiz wrote:
 >
 >         Thanks again all. Essentially, this is the section of the code
 >         that is
 >         causing trouble. This is part of the (exported) function 
which calls
 >         contr.none (not exported). As mentioned, when I call the
 >         exported function
 >         it complains with the error described before.
 >
 >
 >             oldcontrasts <- unlist(options("contrasts"))
 >               if (cts)
 >                   options(contrasts = c(unordered = "contr.none", 
ordered =
 >         "contr.diff"))
 >               x <- model.matrix(terms(__reformulate(var_names)), mf,
 >         contrasts)
 >               options(contrasts = oldcontrasts)
 >
 >
 >     This is hugely incomplete.  Please stop wasting everyone's time, and
 >     post something reproducible.
 >
 >     Duncan Murdoch
 >
 >


From robertajankowski at gmail.com  Sun Jan 26 22:40:54 2014
From: robertajankowski at gmail.com (Roberta Jankowski)
Date: Sun, 26 Jan 2014 16:40:54 -0500
Subject: [Rd] Trouble installing package in development version of R
In-Reply-To: <52E5139B.8040804@gmail.com>
References: <CAN1m9nDjbtGy7GoHWY-oL7Y+=CcgxReXGd_sRW_i4Em3iRpu+Q@mail.gmail.com>
	<52E5139B.8040804@gmail.com>
Message-ID: <CAN1m9nBBczRiYC72ZK_7F+b54wg4LX8VHob+39k3Z3F1Yy8JJw@mail.gmail.com>

On Sun, Jan 26, 2014 at 8:54 AM, Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
> On 14-01-26 12:44 AM, Roberta Jankowski wrote:> Dear R-devel,
>
>>
>> I'm trying to get practice learning more about the internals of R so am
>> experimenting with the development version. I successfully cloned the SVN
>> repo and built and installed R. I am using 2014-01-23 r64861.
>>
>> However, I cannot seem to install the lattice package. I tried within R
>> using install.packages and got the error
>> sh: 1: 1: not found
>
> That message comes from "sh", the command shell that R is running.
>
>
>>
>> I then downloaded the tar.gz and tried it as follows:
>> $ sudo R CMD INSTALL lattice_0.20-24.tar.gz
>>
>> * installing to library ?/home/rjan/R/i686-pc-linux-gnu-library/3.1?
>> * installing *source* package ?lattice? ...
>> ** package ?lattice? successfully unpacked and MD5 sums checked
>> ** libs
>> sh: 1: 1: not found
>
> Same here.  However, notice that some install messages printed, so the
> install started, it just failed partway through.
>
>
>> ERROR: compilation failed for package ?lattice?
>> * removing ?/home/rjan/R/i686-pc-linux-gnu-library/3.1/lattice?
>>
>> I then looked at the help for R CMD INSTALL and saw debug flag so I did:
>> $ sudo R CMD INSTALL -d lattice_0.20-24.tar.gz
>> processing ?lattice_0.20-24.tar.gz?
>> a file
>> * installing to library ?/home/rjan/R/i686-pc-linux-gnu-library/3.1?
>> * build_help_types=
>> * DBG: 'R CMD INSTALL' now doing do_install()
>> * created lock directory
>> ?/home/rjan/R/i686-pc-linux-gnu-library/3.1/00LOCK-lattice?
>> * installing *source* package ?lattice? ...
>> ** package ?lattice? successfully unpacked and MD5 sums checked
>> ** libs
>> about to run R CMD SHLIB -o lattice.so init.c threeDplot.c
>> sh: 1: 1: not found
>> ERROR: compilation failed for package ?lattice?
>> * removing ?/home/rjan/R/i686-pc-linux-gnu-library/3.1/lattice?
>
> So it looks as though R CMD SHLIB is the step that failed.  You can look it
> up in Writing R Externals, it is supposed to compile those C files into the
> output lattice.so.  Something is going wrong here.
> My guess is that you don't have the compiler installed, or R CMD SHLIB is
> looking in the wrong place, or something like that.
>
>>
>>
>> I then did
>> $ cd lattice/src
>> $ R CMD SHLIB -d -o lattice.so init.c threeDplot.c
>> sh: 1: 1: not found
>>
>> I'm interested in two things.
>> 1 does anyone know what's going on?
>> 2. how could I have figured this out myself? What could I have done
>> differently for the R CMD SHLIB command to get more output (for example
>> where this line of code was)?
>
> You can look at the online help within R, ?SHLIB, and it will tell you that
> -n will give you some diagnostic information.

Yes this is useful. I thought that -d would provide more useful info
than -n but both are helpful.

> You can also try
>
> R CMD SHLIB --help
>
> to see a bit more.
>
> One other thing you can do if you need to ask here again, is to post system
> and version information printed by R by sessionInfo().  And please don't
> post in HTML.

Done. (I've now checked "plain text" in GMail which I think should to
the trick).

I will do more reading and experimenting. I think for now I should
just learn R better before experimenting further with devel version. I
already learned a lot even though I did not succeed in package
installation so it was a good lesson.

Thank you for your useful replies and for your work on R. I follow
this list now and am learning a lot from your email responses.

Thanks for your patience,

Berta

>
> Duncan Murdoch
>
>
>>
>> I have read R installation and administration manual but I did not
>> understand a lot so I'm probably missing something that is in there but
>> I'm
>> not sure what.
>>
>> Thank you for your patience,
>>
>> Roberta
>>
>>       [[alternative HTML version deleted]]
>>
>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
>
>


From hb at biostat.ucsf.edu  Mon Jan 27 02:42:03 2014
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Sun, 26 Jan 2014 17:42:03 -0800
Subject: [Rd] package NAMESPACE question
In-Reply-To: <CAAyVsXJA8A64=bfkb5i7W13h43YzBwxm0xi-_nX4-bgGeURzzA@mail.gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
	<21219.49638.506680.884531@max.nulle.part>
	<52E3D914.7010208@statistik.tu-dortmund.de>
	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>
	<21220.4430.640257.323491@max.nulle.part>
	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>
	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>
	<CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>
	<CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>
	<CAAyVsXL7EV1rtm+aJK85eTAcmdDyiUkuTuugG=H6EeDNyoKv+w@mail.gmail.com>
	<52E4FDAD.1070001@gmail.com>
	<CAAyVsXJA8A64=bfkb5i7W13h43YzBwxm0xi-_nX4-bgGeURzzA@mail.gmail.com>
Message-ID: <CAFDcVCREqmJRj3zU8z-hUKYFgZ=kOEkH-fOvPLdyTzhhYGx5Cw@mail.gmail.com>

On Sun, Jan 26, 2014 at 6:34 AM, Axel Urbiz <axel.urbiz at gmail.com> wrote:
> Hi Duncan,
>
> My most sincere apologies. It's really not my intention to waste anyones
> time. More the opposite...for some reason I thought that the problem had to
> do with my call to options() and thought that would be enough. Here's
> something reproducible:
>
> I built a foo package based on the code under the "----" below. In the
> namespace file, I've only exported: trt and cmt (not contr.none and
> contr.diff). Notice that cmt calls contr.none and contr.diff by default.

As a start, try to export everything, particularly 'contr.none' and
'contr.diff' and see if that works.  Just a guess, but worth trying
out.

My $.02

/Henrik

>
> Then in R, I run this code and I get this error message:
>
> library(foo)
> set.seed(1)
> dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x =
> rnorm(100),
>                          f = gl(4, 250, labels = c("A", "B", "C", "D")))
> dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
>> Error in get(ctr, mode = "function", envir = parent.frame()) :
>    object 'contr.none' of mode 'function' was not found
>
> Thanks,
> Axel.
>
> --------------------------------------------
>
> trt <- function(x) x
>
> cmt <- function(formula, data, subset, na.action = na.pass, cts = TRUE)  {
>
>   if (!inherits(formula, "formula"))
>     stop("Method is only for formula objects.")
>   mf <- match.call(expand.dots = FALSE)
>   args <- match(c("formula", "data", "subset", "na.action"),
>                 names(mf), 0)
>   mf <- mf[c(1, args)]
>   mf$drop.unused.levels <- TRUE
>   mf[[1]] <- as.name("model.frame")
>   special <- "trt"
>   mt <- if(missing(data)) terms(formula, special) else terms(formula,
> special, data = data)
>   mf$formula <- mt
>   mf <- eval.parent(mf)
>   Terms <- attr(mf, "terms")
>   attr(Terms, "intercept") <- 0
>   trt.var <- attr(Terms, "specials")$trt
>   ct <- mf[, trt.var]
>   y <- model.response(mf, "numeric")
>   var_names <- attributes(Terms)$term.labels[-(trt.var-1)]
>   treat.names <- levels(as.factor(ct))
>   oldcontrasts <- unlist(options("contrasts"))
>   if (cts)
>     options(contrasts = c(unordered = "contr.none", ordered = "contr.diff"))
>   x <- model.matrix(terms(reformulate(var_names)),
>                     mf, contrasts)
>   options(contrasts = oldcontrasts)
>   intercept <- which(colnames(x) == "(Intercept)")
>   if (length(intercept > 0)) x <- x[, -intercept]
>   return(x)
>   }
>
> #######################################
> # An alternative contrasts function for unordered factors
> # Ensures symmetric treatment of all levels of a factor
> #######################################
> contr.none <- function(n, contrasts) {
>   if (length(n) == 1)
>     contr.treatment(n, contrasts = n<=2)
>   else
>     contr.treatment(n, contrasts = length(unique(n))<=2)
> }
>
> #######################################
> # An alternative contrasts function for ordered factors
> # Ensures use of a difference penalty for such factors
> #######################################
> contr.diff <- function (n, contrasts = TRUE)
> {
>   if (is.numeric(n) && length(n) == 1) {
>     if (n > 1)
>       levs <- 1:n
>     else stop("not enough degrees of freedom to define contrasts")
>   }
>   else {
>     levs <- n
>     n <- length(n)
>   }
>   contr <- array(0, c(n, n), list(levs, paste(">=", levs, sep="")))
>   contr[outer(1:n,1:n, ">=")] <- 1
>   if (n < 2)
>     stop(gettextf("contrasts not defined for %d degrees of freedom",
>                   n - 1), domain = NA)
>   if (contrasts)
>     contr <- contr[, -1, drop = FALSE]
>   contr
> }
>
>
>
> On Sun, Jan 26, 2014 at 1:21 PM, Duncan Murdoch <murdoch.duncan at gmail.com>wrote:
>
>> On 14-01-25 6:05 PM, Axel Urbiz wrote:
>>
>>> Thanks again all. Essentially, this is the section of the code that is
>>> causing trouble. This is part of the (exported) function which calls
>>> contr.none (not exported). As mentioned, when I call the exported function
>>> it complains with the error described before.
>>>
>>>
>>>    oldcontrasts <- unlist(options("contrasts"))
>>>      if (cts)
>>>          options(contrasts = c(unordered = "contr.none", ordered =
>>> "contr.diff"))
>>>      x <- model.matrix(terms(reformulate(var_names)), mf, contrasts)
>>>      options(contrasts = oldcontrasts)
>>>
>>
>> This is hugely incomplete.  Please stop wasting everyone's time, and post
>> something reproducible.
>>
>> Duncan Murdoch
>>
>>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From gregor.kastner at wu.ac.at  Mon Jan 27 09:24:12 2014
From: gregor.kastner at wu.ac.at (Gregor Kastner)
Date: Mon, 27 Jan 2014 09:24:12 +0100
Subject: [Rd] Linking to native routines in other packages
In-Reply-To: <78770FED-953A-487F-908C-739107FCA525@r-enthusiasts.com>
References: <20140122115341.66ebf717@mine>
	<21215.48117.939482.501106@max.nulle.part>
	<20140122195654.72230a34@mine>
	<78770FED-953A-487F-908C-739107FCA525@r-enthusiasts.com>
Message-ID: <20140127092412.6dd01ad9@mine>

Thanks Romain for that elegant solution.

Best,
Gregor

On Wed, 22 Jan 2014 20:23:10 +0100
Romain Fran?ois <romain at r-enthusiasts.com> wrote:

> Hello, 
> 
> The problem is that you have logic in both your mother and child packages.
> IMO, you should only have logic in the mother package. 
> 
> I?ve done this in a number of packages, it requires a bit of work
> initially, but not that much. 
> 
> What I?d do is have something like this in mother/inst/include/mother.h : 
> 
> #if defined(COMPILING_MOTHER)
> // just declare, will be defined in test.c
> SEXP fun(SEXP test) ; 
> #else
> inline SEXP fun(SEXP test){
>     typedef SEXP(*Fun)(SEXP); 
>     static Fun fun = (Fun)R_GetCCallable("mother", "fun") ;
>     return fun(test) ;
> }
> #endif
> 
> In your test.c file, make sure you define COMPILING_MOTHER before you
> include mother.h, something like this
> 
> #include <R.h>
> #include <Rinternals.h>
> #include <R_ext/Rdynload.h>
> #define COMPILING_MOTHER
> #include <mother.h>
> 
> SEXP fun(SEXP);
> 
> void R_init_mother(DllInfo *dll) {
>     R_RegisterCCallable("mother", "fun", (DL_FUNC) &fun);
> }
> 
> SEXP fun(SEXP test) {
>     Rprintf("fun so much fun\n");
>     return R_NilValue;
> }
> 
> So that in your child package you only have to use it, something like: 
> 
> #include <Rinternals.h>
> #include <R_ext/Rdynload.h>
> #include <mother.h>
> 
> SEXP afun(SEXP test) {
>    fun(test);
>    return R_NilValue;
> }
> 
> Note that if you only want the interface between the two packages to be at
> low level (not visible from R), then you don?t need to conform to the
> SEXP(SEXP...) interface. You can use anything you like. 
> 
> Romain
> 
> Le 22 janv. 2014 ? 19:56, Gregor Kastner <gregor.kastner at wu.ac.at> a ?crit :
> 
> > Hi again,
> > 
> > On Wed, 22 Jan 2014 06:39:17 -0600
> > Dirk Eddelbuettel <edd at debian.org> wrote:
> > 
> > | Working examples I know of:   
> > | 
> > |    'xts' importing two functions from 'zoo'
> > | 
> > |    'RcppXts' importing approx. ten functions from 'xts'
> > | 
> > | Maybe by comparing to these you can sort out the missing step at your
> > end.
> > 
> > Thanks Dirk for the hints; I finally got the code running. Important point
> > is that R_init_PKGNAME() is declared as extern "C" (or RcppExport, of
> > course) if using g++ in both the mother and the child package.
> > (Interestingly, dyn.load() only complains when either the mother or the
> > child package don't do so, but not if both don't do so => SEGFAULT.)
> > Since it took me almost the entire afternoon to figure that out, I'll
> > document a working example here. 
> > 
> > Scenario: We have a 'mother' package, which wants to make some C/C++
> > routines available to the 'child' package to be called directly from
> > C/C++ level. Thus, mother's 'src' cointains:
> > 
> > 
> > ********* BEGIN test.c *********
> > 
> > #include <R.h>
> > #include <Rinternals.h>
> > #include <R_ext/Rdynload.h>
> > 
> > SEXP fun(SEXP);
> > 
> > void R_init_mother(DllInfo *dll) {
> > R_RegisterCCallable("mother", "fun", (DL_FUNC) &fun);
> > }
> > 
> > SEXP fun(SEXP test) {
> > Rprintf("fun so much fun\n");
> > return R_NilValue;
> > }
> > 
> > ********** END test.c **********
> > 
> > 
> > (Note that no extern "C" is needed here because it will be compiled with
> > gcc anyway).
> > 
> > The child uses Rcpp and mother, thus has
> > 
> > 
> > ********* BEGIN DESCRIPTION *********
> > 
> > LinkingTo: mother, Rcpp
> > Depends: mother, Rcpp
> > Imports: mother, Rcpp
> > 
> > ********** END DESCRIPTION **********
> > 
> > 
> > in its DESCRIPTION file, and 
> > 
> > 
> > ********* BEGIN test.cpp *********
> > 
> > #include <Rinternals.h>
> > #include <R_ext/Rdynload.h>
> > 
> > extern "C" {
> > SEXP afun(SEXP);
> > SEXP(*fun)(SEXP);
> > 
> > void R_init_child(DllInfo *info) {
> >  fun = (SEXP(*)(SEXP)) R_GetCCallable("mother", "fun");
> > }
> > 
> > SEXP afun(SEXP test) {
> >  fun(test);
> >  return R_NilValue;
> > }
> > }
> > 
> > ********** END test.cpp **********
> > 
> > (Note that extern "C" is crucial here.) After installing mother and
> > child, we have:
> > 
> >> library(child)
> > Loading required package: mother
> > Loading required package: Rcpp
> >> .Call("afun", 123, PACKAGE="child")
> > fun so much fun
> > NULL
> >> 
> > 
> > Maybe it is of help to someone; please excuse me if I bored anyone with
> > trivialities.
> > 
> > Best,
> > Gregor
> > 
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> 


From winstonchang1 at gmail.com  Mon Jan 27 18:51:47 2014
From: winstonchang1 at gmail.com (Winston Chang)
Date: Mon, 27 Jan 2014 11:51:47 -0600
Subject: [Rd] Behavior of --install-tests and testInstalledPackage
In-Reply-To: <1272735A-C8CB-44AF-8839-A39874790C34@muxspace.com>
References: <1272735A-C8CB-44AF-8839-A39874790C34@muxspace.com>
Message-ID: <CAFOpNVFr4MVY0F1-zQ_cqKhATkYyUWy6DM2S6x-LQ6HxFMy7hQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140127/a7c02eb7/attachment.pl>

From rowe at muxspace.com  Tue Jan 28 00:24:35 2014
From: rowe at muxspace.com (Brian Lee Yung Rowe)
Date: Mon, 27 Jan 2014 18:24:35 -0500
Subject: [Rd] Behavior of --install-tests and testInstalledPackage
In-Reply-To: <CAFOpNVFr4MVY0F1-zQ_cqKhATkYyUWy6DM2S6x-LQ6HxFMy7hQ@mail.gmail.com>
References: <1272735A-C8CB-44AF-8839-A39874790C34@muxspace.com>
	<CAFOpNVFr4MVY0F1-zQ_cqKhATkYyUWy6DM2S6x-LQ6HxFMy7hQ@mail.gmail.com>
Message-ID: <0441C13A-D34B-4F8D-9CEE-BF0378365BCC@muxspace.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140127/c2f0bc08/attachment.pl>

From csardi.gabor at gmail.com  Tue Jan 28 04:30:30 2014
From: csardi.gabor at gmail.com (=?ISO-8859-1?B?R+Fib3IgQ3PhcmRp?=)
Date: Mon, 27 Jan 2014 22:30:30 -0500
Subject: [Rd] package namespace from C
Message-ID: <CABtg=K=KHeNoJ379EJt+CQUWYT=Du-5FyxKQe+7ZK1i-K6qS_A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140127/4db404f9/attachment.pl>

From gmbecker at ucdavis.edu  Tue Jan 28 04:39:18 2014
From: gmbecker at ucdavis.edu (Gabriel Becker)
Date: Mon, 27 Jan 2014 19:39:18 -0800
Subject: [Rd] package namespace from C
In-Reply-To: <CABtg=K=KHeNoJ379EJt+CQUWYT=Du-5FyxKQe+7ZK1i-K6qS_A@mail.gmail.com>
References: <CABtg=K=KHeNoJ379EJt+CQUWYT=Du-5FyxKQe+7ZK1i-K6qS_A@mail.gmail.com>
Message-ID: <CADwqtCNPG2yS_46ww64Z40uinTvKQ6JyEt6DwN8GgDkuSzM9Yg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140127/9a8b8a23/attachment.pl>

From csardi.gabor at gmail.com  Tue Jan 28 04:52:46 2014
From: csardi.gabor at gmail.com (=?ISO-8859-1?B?R+Fib3IgQ3PhcmRp?=)
Date: Mon, 27 Jan 2014 22:52:46 -0500
Subject: [Rd] package namespace from C
In-Reply-To: <CADwqtCNPG2yS_46ww64Z40uinTvKQ6JyEt6DwN8GgDkuSzM9Yg@mail.gmail.com>
References: <CABtg=K=KHeNoJ379EJt+CQUWYT=Du-5FyxKQe+7ZK1i-K6qS_A@mail.gmail.com>
	<CADwqtCNPG2yS_46ww64Z40uinTvKQ6JyEt6DwN8GgDkuSzM9Yg@mail.gmail.com>
Message-ID: <CABtg=Kn6CW70oXBNFL2OytMS4tdap4EjXbuyaY3pK1zu5dvAZA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140127/4f384433/attachment.pl>

From murdoch.duncan at gmail.com  Tue Jan 28 13:15:24 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 28 Jan 2014 07:15:24 -0500
Subject: [Rd] package NAMESPACE question
In-Reply-To: <CAAyVsX+JG-X9ziijfU9ckMRhYcLnAMUwTiXRDCoFFx6SSBKtTw@mail.gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>	<21219.49638.506680.884531@max.nulle.part>	<52E3D914.7010208@statistik.tu-dortmund.de>	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>	<21220.4430.640257.323491@max.nulle.part>	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>	<CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>	<CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>	<CAAyVsXL7EV1rtm+aJK85eTAcmdDyiUkuTuugG=H6EeDNyoKv+w@mail.gmail.com>	<52E4FDAD.1070001@gmail.com>	<CAAyVsXJA8A64=bfkb5i7W13h43YzBwxm0xi-_nX4-bgGeURzzA@mail.gmail.com>	<CAFDcVCREqmJRj3zU8z-hUKYFgZ=kOEkH-fOvPLdyTzhhYGx5Cw@mail.gmail.com>
	<CAAyVsX+JG-X9ziijfU9ckMRhYcLnAMUwTiXRDCoFFx6SSBKtTw@mail.gmail.com>
Message-ID: <52E79F5C.60602@gmail.com>

On 14-01-28 6:32 AM, Axel Urbiz wrote:
> Hi,
>
> I've tried to put together a simpler example where I'm having the issue.
>
> I've built a foo package by only including a single .R file with the two
> functions listed below: trt and cmt. The second function calls the
> first. In the namespace file, if I only export(cmt), I get the following
> error message when running this
>
> library(foo)
> set.seed(1)
> dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x
> = rnorm(100),
> f = gl(4, 250, labels = c("A", "B", "C", "D")))
> dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
>  > Error could not find function "trt"
>
> The problem is solved by doing export(cmt, trt) in the namespace.
> However, I'd like to avoid exporting trt and should not be required.
> Sorry I can't seem to figure this out by myself, and so I'd appreciate
> your help.

You are asking for non-standard evaluation of the formula argument.  You 
want some parts of it to be evaluated in the global environment (f), 
some parts in the dd dataframe (x), and some parts evaluated in the 
package namespace (trt).  R is flexible so this is possible, but it's 
not the way that the terms function works, so you'll need to do more 
work yourself, including specifying what the evaluation rules should be 
in case a variable occurs in more than one of those locations.

Duncan Murdoch

>
> Thanks,
> Axel.
>
> ----
>
> #mycodefiles <- c("cmt.R")
> #package.skeleton(name = "foo", code_files = mycodefiles)
> #promptPackage("foo")
>
> #where cmt.R includes the code below:
>
> trt <- function(x) x
>
> cmt <- function(formula, data, subset, na.action = na.pass)  {
>    if (!inherits(formula, "formula"))
>      stop("Method is only for formula objects.")
>    mf <- match.call(expand.dots = FALSE)
>    args <- match(c("formula", "data", "subset", "na.action"),
>                  names(mf), 0)
>    mf <- mf[c(1, args)]
>    mf$drop.unused.levels <- TRUE
>    mf[[1]] <- as.name <http://as.name>("model.frame")
>    special <- "trt"
>    mt <- if(missing(data)) terms(formula, special) else terms(formula,
> special, data = data)
>    browser()
>    mf$formula <- mt
>    mf <- eval.parent(mf)
>    Terms <- attr(mf, "terms")
>    attr(Terms, "intercept") <- 0
>    trt.var <- attr(Terms, "specials")$trt
>    ct <- mf[, trt.var]
>    y <- model.response(mf, "numeric")
>    var_names <- attributes(Terms)$term.labels[-(trt.var-1)]
>    x <- model.matrix(terms(reformulate(var_names)),
>                      mf, contrasts)
>    intercept <- which(colnames(x) == "(Intercept)")
>    if (length(intercept > 0)) x <- x[, -intercept]
>    return(x)
>    }
>
>
>
>
> On Mon, Jan 27, 2014 at 2:42 AM, Henrik Bengtsson <hb at biostat.ucsf.edu
> <mailto:hb at biostat.ucsf.edu>> wrote:
>
>     On Sun, Jan 26, 2014 at 6:34 AM, Axel Urbiz <axel.urbiz at gmail.com
>     <mailto:axel.urbiz at gmail.com>> wrote:
>      > Hi Duncan,
>      >
>      > My most sincere apologies. It's really not my intention to waste
>     anyones
>      > time. More the opposite...for some reason I thought that the
>     problem had to
>      > do with my call to options() and thought that would be enough. Here's
>      > something reproducible:
>      >
>      > I built a foo package based on the code under the "----" below.
>     In the
>      > namespace file, I've only exported: trt and cmt (not contr.none and
>      > contr.diff). Notice that cmt calls contr.none and contr.diff by
>     default.
>
>     As a start, try to export everything, particularly 'contr.none' and
>     'contr.diff' and see if that works.  Just a guess, but worth trying
>     out.
>
>     My $.02
>
>     /Henrik
>
>      >
>      > Then in R, I run this code and I get this error message:
>      >
>      > library(foo)
>      > set.seed(1)
>      > dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1,
>     0.5), x =
>      > rnorm(100),
>      >                          f = gl(4, 250, labels = c("A", "B", "C",
>     "D")))
>      > dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
>      >> Error in get(ctr, mode = "function", envir = parent.frame()) :
>      >    object 'contr.none' of mode 'function' was not found
>      >
>      > Thanks,
>      > Axel.
>      >
>      > --------------------------------------------
>      >
>      > trt <- function(x) x
>      >
>      > cmt <- function(formula, data, subset, na.action = na.pass, cts =
>     TRUE)  {
>      >
>      >   if (!inherits(formula, "formula"))
>      >     stop("Method is only for formula objects.")
>      >   mf <- match.call(expand.dots = FALSE)
>      >   args <- match(c("formula", "data", "subset", "na.action"),
>      >                 names(mf), 0)
>      >   mf <- mf[c(1, args)]
>      >   mf$drop.unused.levels <- TRUE
>      >   mf[[1]] <- as.name <http://as.name>("model.frame")
>      >   special <- "trt"
>      >   mt <- if(missing(data)) terms(formula, special) else terms(formula,
>      > special, data = data)
>      >   mf$formula <- mt
>      >   mf <- eval.parent(mf)
>      >   Terms <- attr(mf, "terms")
>      >   attr(Terms, "intercept") <- 0
>      >   trt.var <- attr(Terms, "specials")$trt
>      >   ct <- mf[, trt.var]
>      >   y <- model.response(mf, "numeric")
>      >   var_names <- attributes(Terms)$term.labels[-(trt.var-1)]
>      >   treat.names <- levels(as.factor(ct))
>      >   oldcontrasts <- unlist(options("contrasts"))
>      >   if (cts)
>      >     options(contrasts = c(unordered = "contr.none", ordered =
>     "contr.diff"))
>      >   x <- model.matrix(terms(reformulate(var_names)),
>      >                     mf, contrasts)
>      >   options(contrasts = oldcontrasts)
>      >   intercept <- which(colnames(x) == "(Intercept)")
>      >   if (length(intercept > 0)) x <- x[, -intercept]
>      >   return(x)
>      >   }
>      >
>      > #######################################
>      > # An alternative contrasts function for unordered factors
>      > # Ensures symmetric treatment of all levels of a factor
>      > #######################################
>      > contr.none <- function(n, contrasts) {
>      >   if (length(n) == 1)
>      >     contr.treatment(n, contrasts = n<=2)
>      >   else
>      >     contr.treatment(n, contrasts = length(unique(n))<=2)
>      > }
>      >
>      > #######################################
>      > # An alternative contrasts function for ordered factors
>      > # Ensures use of a difference penalty for such factors
>      > #######################################
>      > contr.diff <- function (n, contrasts = TRUE)
>      > {
>      >   if (is.numeric(n) && length(n) == 1) {
>      >     if (n > 1)
>      >       levs <- 1:n
>      >     else stop("not enough degrees of freedom to define contrasts")
>      >   }
>      >   else {
>      >     levs <- n
>      >     n <- length(n)
>      >   }
>      >   contr <- array(0, c(n, n), list(levs, paste(">=", levs, sep="")))
>      >   contr[outer(1:n,1:n, ">=")] <- 1
>      >   if (n < 2)
>      >     stop(gettextf("contrasts not defined for %d degrees of freedom",
>      >                   n - 1), domain = NA)
>      >   if (contrasts)
>      >     contr <- contr[, -1, drop = FALSE]
>      >   contr
>      > }
>      >
>      >
>      >
>      > On Sun, Jan 26, 2014 at 1:21 PM, Duncan Murdoch
>     <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>wrote:
>      >
>      >> On 14-01-25 6:05 PM, Axel Urbiz wrote:
>      >>
>      >>> Thanks again all. Essentially, this is the section of the code
>     that is
>      >>> causing trouble. This is part of the (exported) function which
>     calls
>      >>> contr.none (not exported). As mentioned, when I call the
>     exported function
>      >>> it complains with the error described before.
>      >>>
>      >>>
>      >>>    oldcontrasts <- unlist(options("contrasts"))
>      >>>      if (cts)
>      >>>          options(contrasts = c(unordered = "contr.none", ordered =
>      >>> "contr.diff"))
>      >>>      x <- model.matrix(terms(reformulate(var_names)), mf,
>     contrasts)
>      >>>      options(contrasts = oldcontrasts)
>      >>>
>      >>
>      >> This is hugely incomplete.  Please stop wasting everyone's time,
>     and post
>      >> something reproducible.
>      >>
>      >> Duncan Murdoch
>      >>
>      >>
>      >
>      >         [[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-devel at r-project.org <mailto:R-devel at r-project.org> mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From axel.urbiz at gmail.com  Tue Jan 28 12:32:35 2014
From: axel.urbiz at gmail.com (Axel Urbiz)
Date: Tue, 28 Jan 2014 12:32:35 +0100
Subject: [Rd] package NAMESPACE question
In-Reply-To: <CAFDcVCREqmJRj3zU8z-hUKYFgZ=kOEkH-fOvPLdyTzhhYGx5Cw@mail.gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
	<21219.49638.506680.884531@max.nulle.part>
	<52E3D914.7010208@statistik.tu-dortmund.de>
	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>
	<21220.4430.640257.323491@max.nulle.part>
	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>
	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>
	<CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>
	<CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>
	<CAAyVsXL7EV1rtm+aJK85eTAcmdDyiUkuTuugG=H6EeDNyoKv+w@mail.gmail.com>
	<52E4FDAD.1070001@gmail.com>
	<CAAyVsXJA8A64=bfkb5i7W13h43YzBwxm0xi-_nX4-bgGeURzzA@mail.gmail.com>
	<CAFDcVCREqmJRj3zU8z-hUKYFgZ=kOEkH-fOvPLdyTzhhYGx5Cw@mail.gmail.com>
Message-ID: <CAAyVsX+JG-X9ziijfU9ckMRhYcLnAMUwTiXRDCoFFx6SSBKtTw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140128/361ad94b/attachment.pl>

From axel.urbiz at gmail.com  Tue Jan 28 13:52:14 2014
From: axel.urbiz at gmail.com (Axel Urbiz)
Date: Tue, 28 Jan 2014 13:52:14 +0100
Subject: [Rd] package NAMESPACE question
In-Reply-To: <52E79F5C.60602@gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
	<21219.49638.506680.884531@max.nulle.part>
	<52E3D914.7010208@statistik.tu-dortmund.de>
	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>
	<21220.4430.640257.323491@max.nulle.part>
	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>
	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>
	<CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>
	<CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>
	<CAAyVsXL7EV1rtm+aJK85eTAcmdDyiUkuTuugG=H6EeDNyoKv+w@mail.gmail.com>
	<52E4FDAD.1070001@gmail.com>
	<CAAyVsXJA8A64=bfkb5i7W13h43YzBwxm0xi-_nX4-bgGeURzzA@mail.gmail.com>
	<CAFDcVCREqmJRj3zU8z-hUKYFgZ=kOEkH-fOvPLdyTzhhYGx5Cw@mail.gmail.com>
	<CAAyVsX+JG-X9ziijfU9ckMRhYcLnAMUwTiXRDCoFFx6SSBKtTw@mail.gmail.com>
	<52E79F5C.60602@gmail.com>
Message-ID: <CAAyVsXLszm0P2ts=dAE4rNJWUke05iDGT6NqYsssh1gYMxyPKw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140128/7e061809/attachment.pl>

From wdunlap at tibco.com  Tue Jan 28 18:15:05 2014
From: wdunlap at tibco.com (William Dunlap)
Date: Tue, 28 Jan 2014 17:15:05 +0000
Subject: [Rd] package NAMESPACE question
In-Reply-To: <CAAyVsX+JG-X9ziijfU9ckMRhYcLnAMUwTiXRDCoFFx6SSBKtTw@mail.gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
	<21219.49638.506680.884531@max.nulle.part>
	<52E3D914.7010208@statistik.tu-dortmund.de>
	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>
	<21220.4430.640257.323491@max.nulle.part>
	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>
	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>
	<CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>
	<CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>
	<CAAyVsXL7EV1rtm+aJK85eTAcmdDyiUkuTuugG=H6EeDNyoKv+w@mail.gmail.com>
	<52E4FDAD.1070001@gmail.com>
	<CAAyVsXJA8A64=bfkb5i7W13h43YzBwxm0xi-_nX4-bgGeURzzA@mail.gmail.com>
	<CAFDcVCREqmJRj3zU8z-hUKYFgZ=kOEkH-fOvPLdyTzhhYGx5Cw@mail.gmail.com>
	<CAAyVsX+JG-X9ziijfU9ckMRhYcLnAMUwTiXRDCoFFx6SSBKtTw@mail.gmail.com>
Message-ID: <E66794E69CFDE04D9A70842786030B933FA873B6@PA-MBX01.na.tibco.com>

You can more or less get what you want by reassigning the environment
of the formula to be a child of its original environment, where you put
your private functions in the new environment.  For example, do not
export trt and make the following change to your R code:   

% diff -u foo/R/cmt.R~ foo/R/cmt.R
--- foo/R/cmt.R~        2014-01-28 09:10:58.272711000 -0800
+++ foo/R/cmt.R 2014-01-28 09:09:06.299398000 -0800
@@ -1,9 +1,12 @@
-trt <- function(x) x
+trt <- function(x) { cat("Calling foo:::trt\n"); x }

 cmt <- function(formula, data, subset, na.action = na.pass)  {

   if (!inherits(formula, "formula"))
     stop("Method is only for formula objects.")
+  intercalatedEnvir <- new.env(parent=environment(formula))
+  intercalatedEnvir$trt <- trt
+  environment(formula) <- intercalatedEnvir
   mf <- match.call(expand.dots = FALSE)
   args <- match(c("formula", "data", "subset", "na.action"),
                 names(mf), 0)

Bill Dunlap
TIBCO Software
wdunlap tibco.com


> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org] On Behalf
> Of Axel Urbiz
> Sent: Tuesday, January 28, 2014 3:33 AM
> To: Henrik Bengtsson
> Cc: r-devel
> Subject: Re: [Rd] package NAMESPACE question
> 
> Hi,
> 
> I've tried to put together a simpler example where I'm having the issue.
> 
> I've built a foo package by only including a single .R file with the two
> functions listed below: trt and cmt. The second function calls the first.
> In the namespace file, if I only export(cmt), I get the following error
> message when running this
> 
> library(foo)
> set.seed(1)
> dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x =
> rnorm(100),
> f = gl(4, 250, labels = c("A", "B", "C", "D")))
> dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
> > Error could not find function "trt"
> 
> The problem is solved by doing export(cmt, trt) in the namespace. However,
> I'd like to avoid exporting trt and should not be required. Sorry I can't
> seem to figure this out by myself, and so I'd appreciate your help.
> 
> Thanks,
> Axel.
> 
> ----
> 
> #mycodefiles <- c("cmt.R")
> #package.skeleton(name = "foo", code_files = mycodefiles)
> #promptPackage("foo")
> 
> #where cmt.R includes the code below:
> 
> trt <- function(x) x
> 
> cmt <- function(formula, data, subset, na.action = na.pass)  {
> 
>   if (!inherits(formula, "formula"))
>     stop("Method is only for formula objects.")
>   mf <- match.call(expand.dots = FALSE)
>   args <- match(c("formula", "data", "subset", "na.action"),
>                 names(mf), 0)
>   mf <- mf[c(1, args)]
>   mf$drop.unused.levels <- TRUE
>   mf[[1]] <- as.name("model.frame")
>   special <- "trt"
>   mt <- if(missing(data)) terms(formula, special) else terms(formula,
> special, data = data)
>   browser()
>   mf$formula <- mt
>   mf <- eval.parent(mf)
>   Terms <- attr(mf, "terms")
>   attr(Terms, "intercept") <- 0
>   trt.var <- attr(Terms, "specials")$trt
>   ct <- mf[, trt.var]
>   y <- model.response(mf, "numeric")
>   var_names <- attributes(Terms)$term.labels[-(trt.var-1)]
>   x <- model.matrix(terms(reformulate(var_names)),
>                     mf, contrasts)
>   intercept <- which(colnames(x) == "(Intercept)")
>   if (length(intercept > 0)) x <- x[, -intercept]
>   return(x)
>   }
> 
> 
> 
> 
> On Mon, Jan 27, 2014 at 2:42 AM, Henrik Bengtsson <hb at biostat.ucsf.edu>wrote:
> 
> > On Sun, Jan 26, 2014 at 6:34 AM, Axel Urbiz <axel.urbiz at gmail.com> wrote:
> > > Hi Duncan,
> > >
> > > My most sincere apologies. It's really not my intention to waste anyones
> > > time. More the opposite...for some reason I thought that the problem had
> > to
> > > do with my call to options() and thought that would be enough. Here's
> > > something reproducible:
> > >
> > > I built a foo package based on the code under the "----" below. In the
> > > namespace file, I've only exported: trt and cmt (not contr.none and
> > > contr.diff). Notice that cmt calls contr.none and contr.diff by default.
> >
> > As a start, try to export everything, particularly 'contr.none' and
> > 'contr.diff' and see if that works.  Just a guess, but worth trying
> > out.
> >
> > My $.02
> >
> > /Henrik
> >
> > >
> > > Then in R, I run this code and I get this error message:
> > >
> > > library(foo)
> > > set.seed(1)
> > > dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x
> > =
> > > rnorm(100),
> > >                          f = gl(4, 250, labels = c("A", "B", "C", "D")))
> > > dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
> > >> Error in get(ctr, mode = "function", envir = parent.frame()) :
> > >    object 'contr.none' of mode 'function' was not found
> > >
> > > Thanks,
> > > Axel.
> > >
> > > --------------------------------------------
> > >
> > > trt <- function(x) x
> > >
> > > cmt <- function(formula, data, subset, na.action = na.pass, cts = TRUE)
> >  {
> > >
> > >   if (!inherits(formula, "formula"))
> > >     stop("Method is only for formula objects.")
> > >   mf <- match.call(expand.dots = FALSE)
> > >   args <- match(c("formula", "data", "subset", "na.action"),
> > >                 names(mf), 0)
> > >   mf <- mf[c(1, args)]
> > >   mf$drop.unused.levels <- TRUE
> > >   mf[[1]] <- as.name("model.frame")
> > >   special <- "trt"
> > >   mt <- if(missing(data)) terms(formula, special) else terms(formula,
> > > special, data = data)
> > >   mf$formula <- mt
> > >   mf <- eval.parent(mf)
> > >   Terms <- attr(mf, "terms")
> > >   attr(Terms, "intercept") <- 0
> > >   trt.var <- attr(Terms, "specials")$trt
> > >   ct <- mf[, trt.var]
> > >   y <- model.response(mf, "numeric")
> > >   var_names <- attributes(Terms)$term.labels[-(trt.var-1)]
> > >   treat.names <- levels(as.factor(ct))
> > >   oldcontrasts <- unlist(options("contrasts"))
> > >   if (cts)
> > >     options(contrasts = c(unordered = "contr.none", ordered =
> > "contr.diff"))
> > >   x <- model.matrix(terms(reformulate(var_names)),
> > >                     mf, contrasts)
> > >   options(contrasts = oldcontrasts)
> > >   intercept <- which(colnames(x) == "(Intercept)")
> > >   if (length(intercept > 0)) x <- x[, -intercept]
> > >   return(x)
> > >   }
> > >
> > > #######################################
> > > # An alternative contrasts function for unordered factors
> > > # Ensures symmetric treatment of all levels of a factor
> > > #######################################
> > > contr.none <- function(n, contrasts) {
> > >   if (length(n) == 1)
> > >     contr.treatment(n, contrasts = n<=2)
> > >   else
> > >     contr.treatment(n, contrasts = length(unique(n))<=2)
> > > }
> > >
> > > #######################################
> > > # An alternative contrasts function for ordered factors
> > > # Ensures use of a difference penalty for such factors
> > > #######################################
> > > contr.diff <- function (n, contrasts = TRUE)
> > > {
> > >   if (is.numeric(n) && length(n) == 1) {
> > >     if (n > 1)
> > >       levs <- 1:n
> > >     else stop("not enough degrees of freedom to define contrasts")
> > >   }
> > >   else {
> > >     levs <- n
> > >     n <- length(n)
> > >   }
> > >   contr <- array(0, c(n, n), list(levs, paste(">=", levs, sep="")))
> > >   contr[outer(1:n,1:n, ">=")] <- 1
> > >   if (n < 2)
> > >     stop(gettextf("contrasts not defined for %d degrees of freedom",
> > >                   n - 1), domain = NA)
> > >   if (contrasts)
> > >     contr <- contr[, -1, drop = FALSE]
> > >   contr
> > > }
> > >
> > >
> > >
> > > On Sun, Jan 26, 2014 at 1:21 PM, Duncan Murdoch <
> > murdoch.duncan at gmail.com>wrote:
> > >
> > >> On 14-01-25 6:05 PM, Axel Urbiz wrote:
> > >>
> > >>> Thanks again all. Essentially, this is the section of the code that is
> > >>> causing trouble. This is part of the (exported) function which calls
> > >>> contr.none (not exported). As mentioned, when I call the exported
> > function
> > >>> it complains with the error described before.
> > >>>
> > >>>
> > >>>    oldcontrasts <- unlist(options("contrasts"))
> > >>>      if (cts)
> > >>>          options(contrasts = c(unordered = "contr.none", ordered =
> > >>> "contr.diff"))
> > >>>      x <- model.matrix(terms(reformulate(var_names)), mf, contrasts)
> > >>>      options(contrasts = oldcontrasts)
> > >>>
> > >>
> > >> This is hugely incomplete.  Please stop wasting everyone's time, and
> > post
> > >> something reproducible.
> > >>
> > >> Duncan Murdoch
> > >>
> > >>
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch.duncan at gmail.com  Tue Jan 28 19:44:48 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 28 Jan 2014 13:44:48 -0500
Subject: [Rd] package NAMESPACE question
In-Reply-To: <E66794E69CFDE04D9A70842786030B933FA873B6@PA-MBX01.na.tibco.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>	<21219.49638.506680.884531@max.nulle.part>	<52E3D914.7010208@statistik.tu-dortmund.de>	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>	<21220.4430.640257.323491@max.nulle.part>	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>	<CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>	<CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>	<CAAyVsXL7EV1rtm+aJK85eTAcmdDyiUkuTuugG=H6EeDNyoKv+w@mail.gmail.com>	<52E4FDAD.1070001@gmail.com>	<CAAyVsXJA8A64=bfkb5i7W13h43YzBwxm0xi-_nX4-bgGeURzzA@mail.gmail.com>	<CAFDcVCREqmJRj3zU8z-hUKYFgZ=kOEkH-fOvPLdyTzhhYGx5Cw@mail.gmail.com>	<CAAyVsX+JG-X9ziijfU9ckMRhYcLnAMUwTiXRDCoFFx6SSBKtTw@mail.gmail.com>
	<E66794E69CFDE04D9A70842786030B933FA873B6@PA-MBX01.na.tibco.com>
Message-ID: <52E7FAA0.2060106@gmail.com>

On 28/01/2014 12:15 PM, William Dunlap wrote:
> You can more or less get what you want by reassigning the environment
> of the formula to be a child of its original environment, where you put
> your private functions in the new environment.  For example, do not
> export trt and make the following change to your R code:
>
> % diff -u foo/R/cmt.R~ foo/R/cmt.R
> --- foo/R/cmt.R~        2014-01-28 09:10:58.272711000 -0800
> +++ foo/R/cmt.R 2014-01-28 09:09:06.299398000 -0800
> @@ -1,9 +1,12 @@
> -trt <- function(x) x
> +trt <- function(x) { cat("Calling foo:::trt\n"); x }
>
>   cmt <- function(formula, data, subset, na.action = na.pass)  {
>
>     if (!inherits(formula, "formula"))
>       stop("Method is only for formula objects.")
> +  intercalatedEnvir <- new.env(parent=environment(formula))
> +  intercalatedEnvir$trt <- trt
> +  environment(formula) <- intercalatedEnvir
>     mf <- match.call(expand.dots = FALSE)
>     args <- match(c("formula", "data", "subset", "na.action"),
>                   names(mf), 0)

I'm not so sure this is the right solution.  This means that if users 
have their own function named trt, the one in the namespace will take 
precedence.  In most cases users don't want that.

The problem is that in order to make the user one take precedence, you 
could modify the parent of the environment of the formula, but that's 
bad too (because it will have global effects since environments are 
reference objects).

I don't see a good solution here.  I would change the requirements.

Duncan Murdoch
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
> > -----Original Message-----
> > From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org] On Behalf
> > Of Axel Urbiz
> > Sent: Tuesday, January 28, 2014 3:33 AM
> > To: Henrik Bengtsson
> > Cc: r-devel
> > Subject: Re: [Rd] package NAMESPACE question
> >
> > Hi,
> >
> > I've tried to put together a simpler example where I'm having the issue.
> >
> > I've built a foo package by only including a single .R file with the two
> > functions listed below: trt and cmt. The second function calls the first.
> > In the namespace file, if I only export(cmt), I get the following error
> > message when running this
> >
> > library(foo)
> > set.seed(1)
> > dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x =
> > rnorm(100),
> > f = gl(4, 250, labels = c("A", "B", "C", "D")))
> > dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
> > > Error could not find function "trt"
> >
> > The problem is solved by doing export(cmt, trt) in the namespace. However,
> > I'd like to avoid exporting trt and should not be required. Sorry I can't
> > seem to figure this out by myself, and so I'd appreciate your help.
> >
> > Thanks,
> > Axel.
> >
> > ----
> >
> > #mycodefiles <- c("cmt.R")
> > #package.skeleton(name = "foo", code_files = mycodefiles)
> > #promptPackage("foo")
> >
> > #where cmt.R includes the code below:
> >
> > trt <- function(x) x
> >
> > cmt <- function(formula, data, subset, na.action = na.pass)  {
> >
> >   if (!inherits(formula, "formula"))
> >     stop("Method is only for formula objects.")
> >   mf <- match.call(expand.dots = FALSE)
> >   args <- match(c("formula", "data", "subset", "na.action"),
> >                 names(mf), 0)
> >   mf <- mf[c(1, args)]
> >   mf$drop.unused.levels <- TRUE
> >   mf[[1]] <- as.name("model.frame")
> >   special <- "trt"
> >   mt <- if(missing(data)) terms(formula, special) else terms(formula,
> > special, data = data)
> >   browser()
> >   mf$formula <- mt
> >   mf <- eval.parent(mf)
> >   Terms <- attr(mf, "terms")
> >   attr(Terms, "intercept") <- 0
> >   trt.var <- attr(Terms, "specials")$trt
> >   ct <- mf[, trt.var]
> >   y <- model.response(mf, "numeric")
> >   var_names <- attributes(Terms)$term.labels[-(trt.var-1)]
> >   x <- model.matrix(terms(reformulate(var_names)),
> >                     mf, contrasts)
> >   intercept <- which(colnames(x) == "(Intercept)")
> >   if (length(intercept > 0)) x <- x[, -intercept]
> >   return(x)
> >   }
> >
> >
> >
> >
> > On Mon, Jan 27, 2014 at 2:42 AM, Henrik Bengtsson <hb at biostat.ucsf.edu>wrote:
> >
> > > On Sun, Jan 26, 2014 at 6:34 AM, Axel Urbiz <axel.urbiz at gmail.com> wrote:
> > > > Hi Duncan,
> > > >
> > > > My most sincere apologies. It's really not my intention to waste anyones
> > > > time. More the opposite...for some reason I thought that the problem had
> > > to
> > > > do with my call to options() and thought that would be enough. Here's
> > > > something reproducible:
> > > >
> > > > I built a foo package based on the code under the "----" below. In the
> > > > namespace file, I've only exported: trt and cmt (not contr.none and
> > > > contr.diff). Notice that cmt calls contr.none and contr.diff by default.
> > >
> > > As a start, try to export everything, particularly 'contr.none' and
> > > 'contr.diff' and see if that works.  Just a guess, but worth trying
> > > out.
> > >
> > > My $.02
> > >
> > > /Henrik
> > >
> > > >
> > > > Then in R, I run this code and I get this error message:
> > > >
> > > > library(foo)
> > > > set.seed(1)
> > > > dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x
> > > =
> > > > rnorm(100),
> > > >                          f = gl(4, 250, labels = c("A", "B", "C", "D")))
> > > > dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
> > > >> Error in get(ctr, mode = "function", envir = parent.frame()) :
> > > >    object 'contr.none' of mode 'function' was not found
> > > >
> > > > Thanks,
> > > > Axel.
> > > >
> > > > --------------------------------------------
> > > >
> > > > trt <- function(x) x
> > > >
> > > > cmt <- function(formula, data, subset, na.action = na.pass, cts = TRUE)
> > >  {
> > > >
> > > >   if (!inherits(formula, "formula"))
> > > >     stop("Method is only for formula objects.")
> > > >   mf <- match.call(expand.dots = FALSE)
> > > >   args <- match(c("formula", "data", "subset", "na.action"),
> > > >                 names(mf), 0)
> > > >   mf <- mf[c(1, args)]
> > > >   mf$drop.unused.levels <- TRUE
> > > >   mf[[1]] <- as.name("model.frame")
> > > >   special <- "trt"
> > > >   mt <- if(missing(data)) terms(formula, special) else terms(formula,
> > > > special, data = data)
> > > >   mf$formula <- mt
> > > >   mf <- eval.parent(mf)
> > > >   Terms <- attr(mf, "terms")
> > > >   attr(Terms, "intercept") <- 0
> > > >   trt.var <- attr(Terms, "specials")$trt
> > > >   ct <- mf[, trt.var]
> > > >   y <- model.response(mf, "numeric")
> > > >   var_names <- attributes(Terms)$term.labels[-(trt.var-1)]
> > > >   treat.names <- levels(as.factor(ct))
> > > >   oldcontrasts <- unlist(options("contrasts"))
> > > >   if (cts)
> > > >     options(contrasts = c(unordered = "contr.none", ordered =
> > > "contr.diff"))
> > > >   x <- model.matrix(terms(reformulate(var_names)),
> > > >                     mf, contrasts)
> > > >   options(contrasts = oldcontrasts)
> > > >   intercept <- which(colnames(x) == "(Intercept)")
> > > >   if (length(intercept > 0)) x <- x[, -intercept]
> > > >   return(x)
> > > >   }
> > > >
> > > > #######################################
> > > > # An alternative contrasts function for unordered factors
> > > > # Ensures symmetric treatment of all levels of a factor
> > > > #######################################
> > > > contr.none <- function(n, contrasts) {
> > > >   if (length(n) == 1)
> > > >     contr.treatment(n, contrasts = n<=2)
> > > >   else
> > > >     contr.treatment(n, contrasts = length(unique(n))<=2)
> > > > }
> > > >
> > > > #######################################
> > > > # An alternative contrasts function for ordered factors
> > > > # Ensures use of a difference penalty for such factors
> > > > #######################################
> > > > contr.diff <- function (n, contrasts = TRUE)
> > > > {
> > > >   if (is.numeric(n) && length(n) == 1) {
> > > >     if (n > 1)
> > > >       levs <- 1:n
> > > >     else stop("not enough degrees of freedom to define contrasts")
> > > >   }
> > > >   else {
> > > >     levs <- n
> > > >     n <- length(n)
> > > >   }
> > > >   contr <- array(0, c(n, n), list(levs, paste(">=", levs, sep="")))
> > > >   contr[outer(1:n,1:n, ">=")] <- 1
> > > >   if (n < 2)
> > > >     stop(gettextf("contrasts not defined for %d degrees of freedom",
> > > >                   n - 1), domain = NA)
> > > >   if (contrasts)
> > > >     contr <- contr[, -1, drop = FALSE]
> > > >   contr
> > > > }
> > > >
> > > >
> > > >
> > > > On Sun, Jan 26, 2014 at 1:21 PM, Duncan Murdoch <
> > > murdoch.duncan at gmail.com>wrote:
> > > >
> > > >> On 14-01-25 6:05 PM, Axel Urbiz wrote:
> > > >>
> > > >>> Thanks again all. Essentially, this is the section of the code that is
> > > >>> causing trouble. This is part of the (exported) function which calls
> > > >>> contr.none (not exported). As mentioned, when I call the exported
> > > function
> > > >>> it complains with the error described before.
> > > >>>
> > > >>>
> > > >>>    oldcontrasts <- unlist(options("contrasts"))
> > > >>>      if (cts)
> > > >>>          options(contrasts = c(unordered = "contr.none", ordered =
> > > >>> "contr.diff"))
> > > >>>      x <- model.matrix(terms(reformulate(var_names)), mf, contrasts)
> > > >>>      options(contrasts = oldcontrasts)
> > > >>>
> > > >>
> > > >> This is hugely incomplete.  Please stop wasting everyone's time, and
> > > post
> > > >> something reproducible.
> > > >>
> > > >> Duncan Murdoch
> > > >>
> > > >>
> > > >
> > > >         [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-devel
> > >
> >
> > 	[[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From wdunlap at tibco.com  Tue Jan 28 20:43:49 2014
From: wdunlap at tibco.com (William Dunlap)
Date: Tue, 28 Jan 2014 19:43:49 +0000
Subject: [Rd] package NAMESPACE question
In-Reply-To: <52E7FAA0.2060106@gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>
	<21219.49638.506680.884531@max.nulle.part>
	<52E3D914.7010208@statistik.tu-dortmund.de>
	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>
	<21220.4430.640257.323491@max.nulle.part>
	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>
	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>
	<CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>
	<CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>
	<CAAyVsXL7EV1rtm+aJK85eTAcmdDyiUkuTuugG=H6EeDNyoKv+w@mail.gmail.com>
	<52E4FDAD.1070001@gmail.com>
	<CAAyVsXJA8A64=bfkb5i7W13h43YzBwxm0xi-_nX4-bgGeURzzA@mail.gmail.com>
	<CAFDcVCREqmJRj3zU8z-hUKYFgZ=kOEkH-fOvPLdyTzhhYGx5Cw@mail.gmail.com>
	<CAAyVsX+JG-X9ziijfU9ckMRhYcLnAMUwTiXRDCoFFx6SSBKtTw@mail.gmail.com>
	<E66794E69CFDE04D9A70842786030B933FA873B6@PA-MBX01.na.tibco.com>
	<52E7FAA0.2060106@gmail.com>
Message-ID: <E66794E69CFDE04D9A70842786030B933FA874DE@PA-MBX01.na.tibco.com>

[inline below]

Bill Dunlap
TIBCO Software
wdunlap tibco.com


> -----Original Message-----
> From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
> Sent: Tuesday, January 28, 2014 10:45 AM
> To: William Dunlap; Axel Urbiz; Henrik Bengtsson
> Cc: r-devel
> Subject: Re: [Rd] package NAMESPACE question
> 
> On 28/01/2014 12:15 PM, William Dunlap wrote:
> > You can more or less get what you want by reassigning the environment
> > of the formula to be a child of its original environment, where you put
> > your private functions in the new environment.  For example, do not
> > export trt and make the following change to your R code:
> >
> > % diff -u foo/R/cmt.R~ foo/R/cmt.R
> > --- foo/R/cmt.R~        2014-01-28 09:10:58.272711000 -0800
> > +++ foo/R/cmt.R 2014-01-28 09:09:06.299398000 -0800
> > @@ -1,9 +1,12 @@
> > -trt <- function(x) x
> > +trt <- function(x) { cat("Calling foo:::trt\n"); x }
> >
> >   cmt <- function(formula, data, subset, na.action = na.pass)  {
> >
> >     if (!inherits(formula, "formula"))
> >       stop("Method is only for formula objects.")
> > +  intercalatedEnvir <- new.env(parent=environment(formula))
> > +  intercalatedEnvir$trt <- trt
> > +  environment(formula) <- intercalatedEnvir
> >     mf <- match.call(expand.dots = FALSE)
> >     args <- match(c("formula", "data", "subset", "na.action"),
> >                   names(mf), 0)
> 
> I'm not so sure this is the right solution.  This means that if users
> have their own function named trt, the one in the namespace will take
> precedence.  In most cases users don't want that.

But that is how an unexported function in a package works: the user's
own functions cannot mask it.  The odd requirement is that the package
writer wants the user to explicitly use this function, trt, but for some reason
does not want to export it.

package:dplyr does this sort of thing as well: it exports an 'n' function
which does different things than the 'n' function you use in calls to dplyr
functions.
   > summarise(group_by(mtcars, cyl), n(hp))
   Source: local data frame [3 x 2]
   
     cyl n(hp)
   1   6     7
   2   4    11
   3   8    14
   > n(11:14)
   Error in n(11:14) : unused argument (11:14)
 
> The problem is that in order to make the user one take precedence, you
> could modify the parent of the environment of the formula, but that's
> bad too (because it will have global effects since environments are
> reference objects).
> 
> I don't see a good solution here.  I would change the requirements.
> 
> Duncan Murdoch
> >
> > Bill Dunlap
> > TIBCO Software
> > wdunlap tibco.com
> >
> >
> > > -----Original Message-----
> > > From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org] On
> Behalf
> > > Of Axel Urbiz
> > > Sent: Tuesday, January 28, 2014 3:33 AM
> > > To: Henrik Bengtsson
> > > Cc: r-devel
> > > Subject: Re: [Rd] package NAMESPACE question
> > >
> > > Hi,
> > >
> > > I've tried to put together a simpler example where I'm having the issue.
> > >
> > > I've built a foo package by only including a single .R file with the two
> > > functions listed below: trt and cmt. The second function calls the first.
> > > In the namespace file, if I only export(cmt), I get the following error
> > > message when running this
> > >
> > > library(foo)
> > > set.seed(1)
> > > dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x =
> > > rnorm(100),
> > > f = gl(4, 250, labels = c("A", "B", "C", "D")))
> > > dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
> > > > Error could not find function "trt"
> > >
> > > The problem is solved by doing export(cmt, trt) in the namespace. However,
> > > I'd like to avoid exporting trt and should not be required. Sorry I can't
> > > seem to figure this out by myself, and so I'd appreciate your help.
> > >
> > > Thanks,
> > > Axel.
> > >
> > > ----
> > >
> > > #mycodefiles <- c("cmt.R")
> > > #package.skeleton(name = "foo", code_files = mycodefiles)
> > > #promptPackage("foo")
> > >
> > > #where cmt.R includes the code below:
> > >
> > > trt <- function(x) x
> > >
> > > cmt <- function(formula, data, subset, na.action = na.pass)  {
> > >
> > >   if (!inherits(formula, "formula"))
> > >     stop("Method is only for formula objects.")
> > >   mf <- match.call(expand.dots = FALSE)
> > >   args <- match(c("formula", "data", "subset", "na.action"),
> > >                 names(mf), 0)
> > >   mf <- mf[c(1, args)]
> > >   mf$drop.unused.levels <- TRUE
> > >   mf[[1]] <- as.name("model.frame")
> > >   special <- "trt"
> > >   mt <- if(missing(data)) terms(formula, special) else terms(formula,
> > > special, data = data)
> > >   browser()
> > >   mf$formula <- mt
> > >   mf <- eval.parent(mf)
> > >   Terms <- attr(mf, "terms")
> > >   attr(Terms, "intercept") <- 0
> > >   trt.var <- attr(Terms, "specials")$trt
> > >   ct <- mf[, trt.var]
> > >   y <- model.response(mf, "numeric")
> > >   var_names <- attributes(Terms)$term.labels[-(trt.var-1)]
> > >   x <- model.matrix(terms(reformulate(var_names)),
> > >                     mf, contrasts)
> > >   intercept <- which(colnames(x) == "(Intercept)")
> > >   if (length(intercept > 0)) x <- x[, -intercept]
> > >   return(x)
> > >   }
> > >
> > >
> > >
> > >
> > > On Mon, Jan 27, 2014 at 2:42 AM, Henrik Bengtsson <hb at biostat.ucsf.edu>wrote:
> > >
> > > > On Sun, Jan 26, 2014 at 6:34 AM, Axel Urbiz <axel.urbiz at gmail.com> wrote:
> > > > > Hi Duncan,
> > > > >
> > > > > My most sincere apologies. It's really not my intention to waste anyones
> > > > > time. More the opposite...for some reason I thought that the problem had
> > > > to
> > > > > do with my call to options() and thought that would be enough. Here's
> > > > > something reproducible:
> > > > >
> > > > > I built a foo package based on the code under the "----" below. In the
> > > > > namespace file, I've only exported: trt and cmt (not contr.none and
> > > > > contr.diff). Notice that cmt calls contr.none and contr.diff by default.
> > > >
> > > > As a start, try to export everything, particularly 'contr.none' and
> > > > 'contr.diff' and see if that works.  Just a guess, but worth trying
> > > > out.
> > > >
> > > > My $.02
> > > >
> > > > /Henrik
> > > >
> > > > >
> > > > > Then in R, I run this code and I get this error message:
> > > > >
> > > > > library(foo)
> > > > > set.seed(1)
> > > > > dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x
> > > > =
> > > > > rnorm(100),
> > > > >                          f = gl(4, 250, labels = c("A", "B", "C", "D")))
> > > > > dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
> > > > >> Error in get(ctr, mode = "function", envir = parent.frame()) :
> > > > >    object 'contr.none' of mode 'function' was not found
> > > > >
> > > > > Thanks,
> > > > > Axel.
> > > > >
> > > > > --------------------------------------------
> > > > >
> > > > > trt <- function(x) x
> > > > >
> > > > > cmt <- function(formula, data, subset, na.action = na.pass, cts = TRUE)
> > > >  {
> > > > >
> > > > >   if (!inherits(formula, "formula"))
> > > > >     stop("Method is only for formula objects.")
> > > > >   mf <- match.call(expand.dots = FALSE)
> > > > >   args <- match(c("formula", "data", "subset", "na.action"),
> > > > >                 names(mf), 0)
> > > > >   mf <- mf[c(1, args)]
> > > > >   mf$drop.unused.levels <- TRUE
> > > > >   mf[[1]] <- as.name("model.frame")
> > > > >   special <- "trt"
> > > > >   mt <- if(missing(data)) terms(formula, special) else terms(formula,
> > > > > special, data = data)
> > > > >   mf$formula <- mt
> > > > >   mf <- eval.parent(mf)
> > > > >   Terms <- attr(mf, "terms")
> > > > >   attr(Terms, "intercept") <- 0
> > > > >   trt.var <- attr(Terms, "specials")$trt
> > > > >   ct <- mf[, trt.var]
> > > > >   y <- model.response(mf, "numeric")
> > > > >   var_names <- attributes(Terms)$term.labels[-(trt.var-1)]
> > > > >   treat.names <- levels(as.factor(ct))
> > > > >   oldcontrasts <- unlist(options("contrasts"))
> > > > >   if (cts)
> > > > >     options(contrasts = c(unordered = "contr.none", ordered =
> > > > "contr.diff"))
> > > > >   x <- model.matrix(terms(reformulate(var_names)),
> > > > >                     mf, contrasts)
> > > > >   options(contrasts = oldcontrasts)
> > > > >   intercept <- which(colnames(x) == "(Intercept)")
> > > > >   if (length(intercept > 0)) x <- x[, -intercept]
> > > > >   return(x)
> > > > >   }
> > > > >
> > > > > #######################################
> > > > > # An alternative contrasts function for unordered factors
> > > > > # Ensures symmetric treatment of all levels of a factor
> > > > > #######################################
> > > > > contr.none <- function(n, contrasts) {
> > > > >   if (length(n) == 1)
> > > > >     contr.treatment(n, contrasts = n<=2)
> > > > >   else
> > > > >     contr.treatment(n, contrasts = length(unique(n))<=2)
> > > > > }
> > > > >
> > > > > #######################################
> > > > > # An alternative contrasts function for ordered factors
> > > > > # Ensures use of a difference penalty for such factors
> > > > > #######################################
> > > > > contr.diff <- function (n, contrasts = TRUE)
> > > > > {
> > > > >   if (is.numeric(n) && length(n) == 1) {
> > > > >     if (n > 1)
> > > > >       levs <- 1:n
> > > > >     else stop("not enough degrees of freedom to define contrasts")
> > > > >   }
> > > > >   else {
> > > > >     levs <- n
> > > > >     n <- length(n)
> > > > >   }
> > > > >   contr <- array(0, c(n, n), list(levs, paste(">=", levs, sep="")))
> > > > >   contr[outer(1:n,1:n, ">=")] <- 1
> > > > >   if (n < 2)
> > > > >     stop(gettextf("contrasts not defined for %d degrees of freedom",
> > > > >                   n - 1), domain = NA)
> > > > >   if (contrasts)
> > > > >     contr <- contr[, -1, drop = FALSE]
> > > > >   contr
> > > > > }
> > > > >
> > > > >
> > > > >
> > > > > On Sun, Jan 26, 2014 at 1:21 PM, Duncan Murdoch <
> > > > murdoch.duncan at gmail.com>wrote:
> > > > >
> > > > >> On 14-01-25 6:05 PM, Axel Urbiz wrote:
> > > > >>
> > > > >>> Thanks again all. Essentially, this is the section of the code that is
> > > > >>> causing trouble. This is part of the (exported) function which calls
> > > > >>> contr.none (not exported). As mentioned, when I call the exported
> > > > function
> > > > >>> it complains with the error described before.
> > > > >>>
> > > > >>>
> > > > >>>    oldcontrasts <- unlist(options("contrasts"))
> > > > >>>      if (cts)
> > > > >>>          options(contrasts = c(unordered = "contr.none", ordered =
> > > > >>> "contr.diff"))
> > > > >>>      x <- model.matrix(terms(reformulate(var_names)), mf, contrasts)
> > > > >>>      options(contrasts = oldcontrasts)
> > > > >>>
> > > > >>
> > > > >> This is hugely incomplete.  Please stop wasting everyone's time, and
> > > > post
> > > > >> something reproducible.
> > > > >>
> > > > >> Duncan Murdoch
> > > > >>
> > > > >>
> > > > >
> > > > >         [[alternative HTML version deleted]]
> > > > >
> > > > > ______________________________________________
> > > > > R-devel at r-project.org mailing list
> > > > > https://stat.ethz.ch/mailman/listinfo/r-devel
> > > >
> > >
> > > 	[[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch.duncan at gmail.com  Tue Jan 28 21:08:52 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 28 Jan 2014 15:08:52 -0500
Subject: [Rd] package NAMESPACE question
In-Reply-To: <E66794E69CFDE04D9A70842786030B933FA874DE@PA-MBX01.na.tibco.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>	<52E3D914.7010208@statistik.tu-dortmund.de>	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>	<21220.4430.640257.323491@max.nulle.part>	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>	<CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>	<CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>	<CAAyVsXL7EV1rtm+aJK85eTAcmdDyiUkuTuugG=H6EeDNyoKv+w@mail.gmail.com>	<52E4FDAD.1070001@gmail.com>	<CAAyVsXJA8A64=bfkb5i7W13h43YzBwxm0xi-_nX4-bgGeURzzA@mail.gmail.com>	<CAFDcVCREqmJRj3zU8z-hUKYFgZ=kOEkH-fOvPLdyTzhhYGx5Cw@mail.gmail.com>	<CAAyVsX+JG-X9ziijfU9ckMRhYcLnAMUwTiXRDCoFFx6SSBKtTw@mail.gmail.com>
	<E66794E69CFDE04D9A70842786030B933FA873B6@PA-MBX01.na.tibco.com>
	<52E7FAA0.2060106@gmail.com>
	<E66794E69CFDE04D9A70842786030B933FA874DE@PA-MBX01.na.tibco.com>
Message-ID: <52E80E54.2070008@gmail.com>

On 28/01/2014 2:43 PM, William Dunlap wrote:
> [inline below]
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
> > -----Original Message-----
> > From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
> > Sent: Tuesday, January 28, 2014 10:45 AM
> > To: William Dunlap; Axel Urbiz; Henrik Bengtsson
> > Cc: r-devel
> > Subject: Re: [Rd] package NAMESPACE question
> >
> > On 28/01/2014 12:15 PM, William Dunlap wrote:
> > > You can more or less get what you want by reassigning the environment
> > > of the formula to be a child of its original environment, where you put
> > > your private functions in the new environment.  For example, do not
> > > export trt and make the following change to your R code:
> > >
> > > % diff -u foo/R/cmt.R~ foo/R/cmt.R
> > > --- foo/R/cmt.R~        2014-01-28 09:10:58.272711000 -0800
> > > +++ foo/R/cmt.R 2014-01-28 09:09:06.299398000 -0800
> > > @@ -1,9 +1,12 @@
> > > -trt <- function(x) x
> > > +trt <- function(x) { cat("Calling foo:::trt\n"); x }
> > >
> > >   cmt <- function(formula, data, subset, na.action = na.pass)  {
> > >
> > >     if (!inherits(formula, "formula"))
> > >       stop("Method is only for formula objects.")
> > > +  intercalatedEnvir <- new.env(parent=environment(formula))
> > > +  intercalatedEnvir$trt <- trt
> > > +  environment(formula) <- intercalatedEnvir
> > >     mf <- match.call(expand.dots = FALSE)
> > >     args <- match(c("formula", "data", "subset", "na.action"),
> > >                   names(mf), 0)
> >
> > I'm not so sure this is the right solution.  This means that if users
> > have their own function named trt, the one in the namespace will take
> > precedence.  In most cases users don't want that.
>
> But that is how an unexported function in a package works: the user's
> own functions cannot mask it.  The odd requirement is that the package
> writer wants the user to explicitly use this function, trt, but for some reason
> does not want to export it.

Yes, but the convention is that if it is not exported, then it is not 
usually visible to users.
>
> package:dplyr does this sort of thing as well: it exports an 'n' function
> which does different things than the 'n' function you use in calls to dplyr
> functions.

Another exception is in my own tables package:  there are things there 
that I call "pseudo-functions" (e.g. Format, Heading) that look like 
function calls but are treated specially, and take precedence over user 
functions of the same name.  I don't think I had a choice, but Axel does.

Duncan Murdoch

>     > summarise(group_by(mtcars, cyl), n(hp))
>     Source: local data frame [3 x 2]
>     
>       cyl n(hp)
>     1   6     7
>     2   4    11
>     3   8    14
>     > n(11:14)
>     Error in n(11:14) : unused argument (11:14)
>   
> > The problem is that in order to make the user one take precedence, you
> > could modify the parent of the environment of the formula, but that's
> > bad too (because it will have global effects since environments are
> > reference objects).
> >
> > I don't see a good solution here.  I would change the requirements.
> >
> > Duncan Murdoch
> > >
> > > Bill Dunlap
> > > TIBCO Software
> > > wdunlap tibco.com
> > >
> > >
> > > > -----Original Message-----
> > > > From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org] On
> > Behalf
> > > > Of Axel Urbiz
> > > > Sent: Tuesday, January 28, 2014 3:33 AM
> > > > To: Henrik Bengtsson
> > > > Cc: r-devel
> > > > Subject: Re: [Rd] package NAMESPACE question
> > > >
> > > > Hi,
> > > >
> > > > I've tried to put together a simpler example where I'm having the issue.
> > > >
> > > > I've built a foo package by only including a single .R file with the two
> > > > functions listed below: trt and cmt. The second function calls the first.
> > > > In the namespace file, if I only export(cmt), I get the following error
> > > > message when running this
> > > >
> > > > library(foo)
> > > > set.seed(1)
> > > > dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x =
> > > > rnorm(100),
> > > > f = gl(4, 250, labels = c("A", "B", "C", "D")))
> > > > dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
> > > > > Error could not find function "trt"
> > > >
> > > > The problem is solved by doing export(cmt, trt) in the namespace. However,
> > > > I'd like to avoid exporting trt and should not be required. Sorry I can't
> > > > seem to figure this out by myself, and so I'd appreciate your help.
> > > >
> > > > Thanks,
> > > > Axel.
> > > >
> > > > ----
> > > >
> > > > #mycodefiles <- c("cmt.R")
> > > > #package.skeleton(name = "foo", code_files = mycodefiles)
> > > > #promptPackage("foo")
> > > >
> > > > #where cmt.R includes the code below:
> > > >
> > > > trt <- function(x) x
> > > >
> > > > cmt <- function(formula, data, subset, na.action = na.pass)  {
> > > >
> > > >   if (!inherits(formula, "formula"))
> > > >     stop("Method is only for formula objects.")
> > > >   mf <- match.call(expand.dots = FALSE)
> > > >   args <- match(c("formula", "data", "subset", "na.action"),
> > > >                 names(mf), 0)
> > > >   mf <- mf[c(1, args)]
> > > >   mf$drop.unused.levels <- TRUE
> > > >   mf[[1]] <- as.name("model.frame")
> > > >   special <- "trt"
> > > >   mt <- if(missing(data)) terms(formula, special) else terms(formula,
> > > > special, data = data)
> > > >   browser()
> > > >   mf$formula <- mt
> > > >   mf <- eval.parent(mf)
> > > >   Terms <- attr(mf, "terms")
> > > >   attr(Terms, "intercept") <- 0
> > > >   trt.var <- attr(Terms, "specials")$trt
> > > >   ct <- mf[, trt.var]
> > > >   y <- model.response(mf, "numeric")
> > > >   var_names <- attributes(Terms)$term.labels[-(trt.var-1)]
> > > >   x <- model.matrix(terms(reformulate(var_names)),
> > > >                     mf, contrasts)
> > > >   intercept <- which(colnames(x) == "(Intercept)")
> > > >   if (length(intercept > 0)) x <- x[, -intercept]
> > > >   return(x)
> > > >   }
> > > >
> > > >
> > > >
> > > >
> > > > On Mon, Jan 27, 2014 at 2:42 AM, Henrik Bengtsson <hb at biostat.ucsf.edu>wrote:
> > > >
> > > > > On Sun, Jan 26, 2014 at 6:34 AM, Axel Urbiz <axel.urbiz at gmail.com> wrote:
> > > > > > Hi Duncan,
> > > > > >
> > > > > > My most sincere apologies. It's really not my intention to waste anyones
> > > > > > time. More the opposite...for some reason I thought that the problem had
> > > > > to
> > > > > > do with my call to options() and thought that would be enough. Here's
> > > > > > something reproducible:
> > > > > >
> > > > > > I built a foo package based on the code under the "----" below. In the
> > > > > > namespace file, I've only exported: trt and cmt (not contr.none and
> > > > > > contr.diff). Notice that cmt calls contr.none and contr.diff by default.
> > > > >
> > > > > As a start, try to export everything, particularly 'contr.none' and
> > > > > 'contr.diff' and see if that works.  Just a guess, but worth trying
> > > > > out.
> > > > >
> > > > > My $.02
> > > > >
> > > > > /Henrik
> > > > >
> > > > > >
> > > > > > Then in R, I run this code and I get this error message:
> > > > > >
> > > > > > library(foo)
> > > > > > set.seed(1)
> > > > > > dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x
> > > > > =
> > > > > > rnorm(100),
> > > > > >                          f = gl(4, 250, labels = c("A", "B", "C", "D")))
> > > > > > dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
> > > > > >> Error in get(ctr, mode = "function", envir = parent.frame()) :
> > > > > >    object 'contr.none' of mode 'function' was not found
> > > > > >
> > > > > > Thanks,
> > > > > > Axel.
> > > > > >
> > > > > > --------------------------------------------
> > > > > >
> > > > > > trt <- function(x) x
> > > > > >
> > > > > > cmt <- function(formula, data, subset, na.action = na.pass, cts = TRUE)
> > > > >  {
> > > > > >
> > > > > >   if (!inherits(formula, "formula"))
> > > > > >     stop("Method is only for formula objects.")
> > > > > >   mf <- match.call(expand.dots = FALSE)
> > > > > >   args <- match(c("formula", "data", "subset", "na.action"),
> > > > > >                 names(mf), 0)
> > > > > >   mf <- mf[c(1, args)]
> > > > > >   mf$drop.unused.levels <- TRUE
> > > > > >   mf[[1]] <- as.name("model.frame")
> > > > > >   special <- "trt"
> > > > > >   mt <- if(missing(data)) terms(formula, special) else terms(formula,
> > > > > > special, data = data)
> > > > > >   mf$formula <- mt
> > > > > >   mf <- eval.parent(mf)
> > > > > >   Terms <- attr(mf, "terms")
> > > > > >   attr(Terms, "intercept") <- 0
> > > > > >   trt.var <- attr(Terms, "specials")$trt
> > > > > >   ct <- mf[, trt.var]
> > > > > >   y <- model.response(mf, "numeric")
> > > > > >   var_names <- attributes(Terms)$term.labels[-(trt.var-1)]
> > > > > >   treat.names <- levels(as.factor(ct))
> > > > > >   oldcontrasts <- unlist(options("contrasts"))
> > > > > >   if (cts)
> > > > > >     options(contrasts = c(unordered = "contr.none", ordered =
> > > > > "contr.diff"))
> > > > > >   x <- model.matrix(terms(reformulate(var_names)),
> > > > > >                     mf, contrasts)
> > > > > >   options(contrasts = oldcontrasts)
> > > > > >   intercept <- which(colnames(x) == "(Intercept)")
> > > > > >   if (length(intercept > 0)) x <- x[, -intercept]
> > > > > >   return(x)
> > > > > >   }
> > > > > >
> > > > > > #######################################
> > > > > > # An alternative contrasts function for unordered factors
> > > > > > # Ensures symmetric treatment of all levels of a factor
> > > > > > #######################################
> > > > > > contr.none <- function(n, contrasts) {
> > > > > >   if (length(n) == 1)
> > > > > >     contr.treatment(n, contrasts = n<=2)
> > > > > >   else
> > > > > >     contr.treatment(n, contrasts = length(unique(n))<=2)
> > > > > > }
> > > > > >
> > > > > > #######################################
> > > > > > # An alternative contrasts function for ordered factors
> > > > > > # Ensures use of a difference penalty for such factors
> > > > > > #######################################
> > > > > > contr.diff <- function (n, contrasts = TRUE)
> > > > > > {
> > > > > >   if (is.numeric(n) && length(n) == 1) {
> > > > > >     if (n > 1)
> > > > > >       levs <- 1:n
> > > > > >     else stop("not enough degrees of freedom to define contrasts")
> > > > > >   }
> > > > > >   else {
> > > > > >     levs <- n
> > > > > >     n <- length(n)
> > > > > >   }
> > > > > >   contr <- array(0, c(n, n), list(levs, paste(">=", levs, sep="")))
> > > > > >   contr[outer(1:n,1:n, ">=")] <- 1
> > > > > >   if (n < 2)
> > > > > >     stop(gettextf("contrasts not defined for %d degrees of freedom",
> > > > > >                   n - 1), domain = NA)
> > > > > >   if (contrasts)
> > > > > >     contr <- contr[, -1, drop = FALSE]
> > > > > >   contr
> > > > > > }
> > > > > >
> > > > > >
> > > > > >
> > > > > > On Sun, Jan 26, 2014 at 1:21 PM, Duncan Murdoch <
> > > > > murdoch.duncan at gmail.com>wrote:
> > > > > >
> > > > > >> On 14-01-25 6:05 PM, Axel Urbiz wrote:
> > > > > >>
> > > > > >>> Thanks again all. Essentially, this is the section of the code that is
> > > > > >>> causing trouble. This is part of the (exported) function which calls
> > > > > >>> contr.none (not exported). As mentioned, when I call the exported
> > > > > function
> > > > > >>> it complains with the error described before.
> > > > > >>>
> > > > > >>>
> > > > > >>>    oldcontrasts <- unlist(options("contrasts"))
> > > > > >>>      if (cts)
> > > > > >>>          options(contrasts = c(unordered = "contr.none", ordered =
> > > > > >>> "contr.diff"))
> > > > > >>>      x <- model.matrix(terms(reformulate(var_names)), mf, contrasts)
> > > > > >>>      options(contrasts = oldcontrasts)
> > > > > >>>
> > > > > >>
> > > > > >> This is hugely incomplete.  Please stop wasting everyone's time, and
> > > > > post
> > > > > >> something reproducible.
> > > > > >>
> > > > > >> Duncan Murdoch
> > > > > >>
> > > > > >>
> > > > > >
> > > > > >         [[alternative HTML version deleted]]
> > > > > >
> > > > > > ______________________________________________
> > > > > > R-devel at r-project.org mailing list
> > > > > > https://stat.ethz.ch/mailman/listinfo/r-devel
> > > > >
> > > >
> > > > 	[[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-devel
> > >
> > > ______________________________________________
> > > R-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-devel
>


From hpages at fhcrc.org  Tue Jan 28 22:43:21 2014
From: hpages at fhcrc.org (=?ISO-8859-1?Q?Herv=E9_Pag=E8s?=)
Date: Tue, 28 Jan 2014 13:43:21 -0800
Subject: [Rd] package NAMESPACE question
In-Reply-To: <CAAyVsX+JG-X9ziijfU9ckMRhYcLnAMUwTiXRDCoFFx6SSBKtTw@mail.gmail.com>
References: <CAAyVsXJcacs23_DYgTqBto9T3Nww=Me3YdS=LLFhfBoOygX2PQ@mail.gmail.com>	<21219.49638.506680.884531@max.nulle.part>	<52E3D914.7010208@statistik.tu-dortmund.de>	<CAAyVsXKrS43na4bgWuCw8oHxHxZjb6V7228-K18GabBsvRKp4w@mail.gmail.com>	<21220.4430.640257.323491@max.nulle.part>	<CAAyVsXJAvAjK0xNn5qebudZW9kwmfCyOMAfbTBpb+7E=PQAsTg@mail.gmail.com>	<CADwqtCNSuzZw70O5o77a2d38dGbUJPYbkjMXSWtsVieDKqP+DA@mail.gmail.com>	<CAAyVsXKNscAzJL4knPtiKYvZS=wO6cGf2V5Sk7G=nj-2c+afkw@mail.gmail.com>	<CADwqtCMZb+0oeX=SD331gZQ9Q4qQRWYwxwiyeNc0gzcWSThpVQ@mail.gmail.com>	<CAAyVsXL7EV1rtm+aJK85eTAcmdDyiUkuTuugG=H6EeDNyoKv+w@mail.gmail.com>	<52E4FDAD.1070001@gmail.com>	<CAAyVsXJA8A64=bfkb5i7W13h43YzBwxm0xi-_nX4-bgGeURzzA@mail.gmail.com>	<CAFDcVCREqmJRj3zU8z-hUKYFgZ=kOEkH-fOvPLdyTzhhYGx5Cw@mail.gmail.com>
	<CAAyVsX+JG-X9ziijfU9ckMRhYcLnAMUwTiXRDCoFFx6SSBKtTw@mail.gmail.com>
Message-ID: <52E82479.7000404@fhcrc.org>

Hi Alex,

On 01/28/2014 03:32 AM, Axel Urbiz wrote:
> Hi,
>
> I've tried to put together a simpler example where I'm having the issue.
>
> I've built a foo package by only including a single .R file with the two
> functions listed below: trt and cmt. The second function calls the first.
> In the namespace file, if I only export(cmt), I get the following error
> message when running this
>
> library(foo)
> set.seed(1)
> dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x =
> rnorm(100),
> f = gl(4, 250, labels = c("A", "B", "C", "D")))
> dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
>> Error could not find function "trt"

All I see is that trt *is* used by the user here (even if it's going
to be evaluated latter, that doesn't change anything). So it should
be exported and documented. Otherwise, how, as a user, does it make
sense for me to make reference in my own code to a symbol that is no
visible and has no documented meaning?

Not everybody will agree e.g. the designer of the table() interface
had no problem setting the default value for the 'dnn' arg to an
expression that makes no sense from a user point of view (can't
evaluate it, can't see the code, ?list.names doesn't work).

Cheers,
H.

>
> The problem is solved by doing export(cmt, trt) in the namespace. However,
> I'd like to avoid exporting trt and should not be required. Sorry I can't
> seem to figure this out by myself, and so I'd appreciate your help.
>
> Thanks,
> Axel.
>
> ----
>
> #mycodefiles <- c("cmt.R")
> #package.skeleton(name = "foo", code_files = mycodefiles)
> #promptPackage("foo")
>
> #where cmt.R includes the code below:
>
> trt <- function(x) x
>
> cmt <- function(formula, data, subset, na.action = na.pass)  {
>
>    if (!inherits(formula, "formula"))
>      stop("Method is only for formula objects.")
>    mf <- match.call(expand.dots = FALSE)
>    args <- match(c("formula", "data", "subset", "na.action"),
>                  names(mf), 0)
>    mf <- mf[c(1, args)]
>    mf$drop.unused.levels <- TRUE
>    mf[[1]] <- as.name("model.frame")
>    special <- "trt"
>    mt <- if(missing(data)) terms(formula, special) else terms(formula,
> special, data = data)
>    browser()
>    mf$formula <- mt
>    mf <- eval.parent(mf)
>    Terms <- attr(mf, "terms")
>    attr(Terms, "intercept") <- 0
>    trt.var <- attr(Terms, "specials")$trt
>    ct <- mf[, trt.var]
>    y <- model.response(mf, "numeric")
>    var_names <- attributes(Terms)$term.labels[-(trt.var-1)]
>    x <- model.matrix(terms(reformulate(var_names)),
>                      mf, contrasts)
>    intercept <- which(colnames(x) == "(Intercept)")
>    if (length(intercept > 0)) x <- x[, -intercept]
>    return(x)
>    }
>
>
>
>
> On Mon, Jan 27, 2014 at 2:42 AM, Henrik Bengtsson <hb at biostat.ucsf.edu>wrote:
>
>> On Sun, Jan 26, 2014 at 6:34 AM, Axel Urbiz <axel.urbiz at gmail.com> wrote:
>>> Hi Duncan,
>>>
>>> My most sincere apologies. It's really not my intention to waste anyones
>>> time. More the opposite...for some reason I thought that the problem had
>> to
>>> do with my call to options() and thought that would be enough. Here's
>>> something reproducible:
>>>
>>> I built a foo package based on the code under the "----" below. In the
>>> namespace file, I've only exported: trt and cmt (not contr.none and
>>> contr.diff). Notice that cmt calls contr.none and contr.diff by default.
>>
>> As a start, try to export everything, particularly 'contr.none' and
>> 'contr.diff' and see if that works.  Just a guess, but worth trying
>> out.
>>
>> My $.02
>>
>> /Henrik
>>
>>>
>>> Then in R, I run this code and I get this error message:
>>>
>>> library(foo)
>>> set.seed(1)
>>> dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x
>> =
>>> rnorm(100),
>>>                           f = gl(4, 250, labels = c("A", "B", "C", "D")))
>>> dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
>>>> Error in get(ctr, mode = "function", envir = parent.frame()) :
>>>     object 'contr.none' of mode 'function' was not found
>>>
>>> Thanks,
>>> Axel.
>>>
>>> --------------------------------------------
>>>
>>> trt <- function(x) x
>>>
>>> cmt <- function(formula, data, subset, na.action = na.pass, cts = TRUE)
>>   {
>>>
>>>    if (!inherits(formula, "formula"))
>>>      stop("Method is only for formula objects.")
>>>    mf <- match.call(expand.dots = FALSE)
>>>    args <- match(c("formula", "data", "subset", "na.action"),
>>>                  names(mf), 0)
>>>    mf <- mf[c(1, args)]
>>>    mf$drop.unused.levels <- TRUE
>>>    mf[[1]] <- as.name("model.frame")
>>>    special <- "trt"
>>>    mt <- if(missing(data)) terms(formula, special) else terms(formula,
>>> special, data = data)
>>>    mf$formula <- mt
>>>    mf <- eval.parent(mf)
>>>    Terms <- attr(mf, "terms")
>>>    attr(Terms, "intercept") <- 0
>>>    trt.var <- attr(Terms, "specials")$trt
>>>    ct <- mf[, trt.var]
>>>    y <- model.response(mf, "numeric")
>>>    var_names <- attributes(Terms)$term.labels[-(trt.var-1)]
>>>    treat.names <- levels(as.factor(ct))
>>>    oldcontrasts <- unlist(options("contrasts"))
>>>    if (cts)
>>>      options(contrasts = c(unordered = "contr.none", ordered =
>> "contr.diff"))
>>>    x <- model.matrix(terms(reformulate(var_names)),
>>>                      mf, contrasts)
>>>    options(contrasts = oldcontrasts)
>>>    intercept <- which(colnames(x) == "(Intercept)")
>>>    if (length(intercept > 0)) x <- x[, -intercept]
>>>    return(x)
>>>    }
>>>
>>> #######################################
>>> # An alternative contrasts function for unordered factors
>>> # Ensures symmetric treatment of all levels of a factor
>>> #######################################
>>> contr.none <- function(n, contrasts) {
>>>    if (length(n) == 1)
>>>      contr.treatment(n, contrasts = n<=2)
>>>    else
>>>      contr.treatment(n, contrasts = length(unique(n))<=2)
>>> }
>>>
>>> #######################################
>>> # An alternative contrasts function for ordered factors
>>> # Ensures use of a difference penalty for such factors
>>> #######################################
>>> contr.diff <- function (n, contrasts = TRUE)
>>> {
>>>    if (is.numeric(n) && length(n) == 1) {
>>>      if (n > 1)
>>>        levs <- 1:n
>>>      else stop("not enough degrees of freedom to define contrasts")
>>>    }
>>>    else {
>>>      levs <- n
>>>      n <- length(n)
>>>    }
>>>    contr <- array(0, c(n, n), list(levs, paste(">=", levs, sep="")))
>>>    contr[outer(1:n,1:n, ">=")] <- 1
>>>    if (n < 2)
>>>      stop(gettextf("contrasts not defined for %d degrees of freedom",
>>>                    n - 1), domain = NA)
>>>    if (contrasts)
>>>      contr <- contr[, -1, drop = FALSE]
>>>    contr
>>> }
>>>
>>>
>>>
>>> On Sun, Jan 26, 2014 at 1:21 PM, Duncan Murdoch <
>> murdoch.duncan at gmail.com>wrote:
>>>
>>>> On 14-01-25 6:05 PM, Axel Urbiz wrote:
>>>>
>>>>> Thanks again all. Essentially, this is the section of the code that is
>>>>> causing trouble. This is part of the (exported) function which calls
>>>>> contr.none (not exported). As mentioned, when I call the exported
>> function
>>>>> it complains with the error described before.
>>>>>
>>>>>
>>>>>     oldcontrasts <- unlist(options("contrasts"))
>>>>>       if (cts)
>>>>>           options(contrasts = c(unordered = "contr.none", ordered =
>>>>> "contr.diff"))
>>>>>       x <- model.matrix(terms(reformulate(var_names)), mf, contrasts)
>>>>>       options(contrasts = oldcontrasts)
>>>>>
>>>>
>>>> This is hugely incomplete.  Please stop wasting everyone's time, and
>> post
>>>> something reproducible.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fhcrc.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From Dan.Kelley at Dal.Ca  Wed Jan 29 00:49:30 2014
From: Dan.Kelley at Dal.Ca (Daniel Kelley)
Date: Tue, 28 Jan 2014 23:49:30 +0000
Subject: [Rd] how to unbreak a circular package dependence (S4 class data)
Message-ID: <AA99B8FD-FF87-4638-986B-CDE31CA5D3E8@dal.ca>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140128/35c9776f/attachment.pl>

From kasperdanielhansen at gmail.com  Wed Jan 29 01:43:13 2014
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Tue, 28 Jan 2014 19:43:13 -0500
Subject: [Rd] how to unbreak a circular package dependence (S4 class
	data)
In-Reply-To: <AA99B8FD-FF87-4638-986B-CDE31CA5D3E8@dal.ca>
References: <AA99B8FD-FF87-4638-986B-CDE31CA5D3E8@dal.ca>
Message-ID: <CAC2h7uufo9-DpmB7bR0Wu5vJJJCrrQtCv8GvXMoF=Xb=KXMeFQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140128/fd8c2acb/attachment.pl>

From hpages at fhcrc.org  Wed Jan 29 02:01:57 2014
From: hpages at fhcrc.org (=?windows-1252?Q?Herv=E9_Pag=E8s?=)
Date: Tue, 28 Jan 2014 17:01:57 -0800
Subject: [Rd] how to unbreak a circular package dependence (S4 class
	data)
In-Reply-To: <AA99B8FD-FF87-4638-986B-CDE31CA5D3E8@dal.ca>
References: <AA99B8FD-FF87-4638-986B-CDE31CA5D3E8@dal.ca>
Message-ID: <52E85305.1000302@fhcrc.org>

Hi Daniel,

On 01/28/2014 03:49 PM, Daniel Kelley wrote:
> I have an issue with a circular package dependence that prevents building/checking, and I seek advice on breaking the circle so the packages can pass the build-check tests that are required for CRAN submission.
>
> The package pair I'm working with is slow to build, but my tests suggest the issue may be general, and so I will explain it in general terms.
>
> Suppose there are two packages:
>
> 1. Foo, a package that defines some data types with S4 classes.
>
> 2. Foodata, a package that provides such datasets, for use by Foo.
>
> With this setup, it seems reasonable that Foo "depends" on Foodata, so the data can be used in Foo and its documentation.
>
> Since the data within Foodata are S4 classes as defined in Foo, an attempt to build-check Foodata will produce an error unless Foo is present.  But Foo cannot be built unless Foodata exists, since it depends on it.  Thus neither Foo nor Foodata can be built and checked.

I've learned by experience that it's generally better (although not
always possible) to avoid putting serialized S4 objects in a data
package. They will break if you need to modify a little bit the
internals of the class (and chances are high that you will at some
point). Better to store the data in a format that is more or less
guaranteed to remain the same for years (SQLite, XML, hdf5, plain text,
serialized data frame, SAM/BAM, etc...) and try to come up with
a fast way to load and turn the data into an S4 object on demand.

Not always possible if the data is huge... but for the purpose of using
it in Foo's examples and vignette do you really need huge data?

Another advantage of this approach is that the data can then be
more easily shared because it can be accessed with tools other
than yours, e.g. tools that don't know about S4 and even non-R
tools.

Cheers,
H.

>
> One solution would be to wrap the Foo documentation examples (and relevant Foo code) in require() blocks, and to make Foo "suggest" Foodata, not "depend? upon it.  My question is whether this is the recommended practice, or the common practice.
>
> Thanks in advance to anyone who wishes to offer hints.
>
> PS. The problem arose from an attempt to reduce CRAN load by extracting the datasets that had been contained within a previous version of Foo.
>
> PPS. my (slow-building) packages are on github and I can supply details if needed.
>
> Dan E. Kelley
> Professor, Oceanography Department
> Dalhousie University, Canada
> Dan.Kelley at Dal.CA<mailto:Dan.Kelley at Dal.CA>
>
>
>
> 	[[alternative HTML version deleted]]
>
>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fhcrc.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From kasperdanielhansen at gmail.com  Wed Jan 29 03:21:20 2014
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Tue, 28 Jan 2014 21:21:20 -0500
Subject: [Rd] how to unbreak a circular package dependence (S4 class
	data)
In-Reply-To: <52E85305.1000302@fhcrc.org>
References: <AA99B8FD-FF87-4638-986B-CDE31CA5D3E8@dal.ca>
	<52E85305.1000302@fhcrc.org>
Message-ID: <CAC2h7utQtzQj_FxZRC4y0zHBnFF644PdW_29zO9ed=mO=mkQTw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140128/9fb26b53/attachment.pl>

From therneau at mayo.edu  Wed Jan 29 15:20:10 2014
From: therneau at mayo.edu (Therneau, Terry M., Ph.D.)
Date: Wed, 29 Jan 2014 08:20:10 -0600
Subject: [Rd] package NAMESPACE question
In-Reply-To: <mailman.19.1390993211.1898.r-devel@r-project.org>
References: <mailman.19.1390993211.1898.r-devel@r-project.org>
Message-ID: <d2fb82$886lse@ironport10.mayo.edu>

An example of this is found in the coxph function in the survival library.  Look at it for 
guideance.
Within a coxph formula the expression "tt(x)" means to use a time transform on variable x. 
  The tt function is a fake, defined as tt <- function(x) x, whose only purpose is to 
allow the user to mark a variable for special treatment while staying inside the syntax 
rules of formulas.
   tt is not exported, because no one would ever want to use it.  It is documented within 
the coxph manual pages.  I did export it at one time, for exactly the reasons and error 
message detailed by Axel.  I recieved a request to cease doing so because of package 
issues --- someone had a package with a real and useful tt function, which would be masked 
if "require(survival)" ever occured, placing my library with its worthless function before 
his on the search path.  Enough things depend on the survival package that this was making 
his package's results unpredictable.

   The root issue is that formulas are often counterintuitive.  R treats them as though 
they were a function, but with a special evaluation context.  Thus even though a formula 
is evaluated within the coxph function, components of the formula are not "in" the 
survival namespace and so can't see non-exported functions in that namespace.   If you 
found this confusing be assured that you are not alone.

Terry Therneau


On 01/29/2014 05:00 AM, r-devel-request at r-project.org wrote:
>> Hi,
>> >
>> >I've tried to put together a simpler example where I'm having the issue.
>> >
>> >I've built a foo package by only including a single .R file with the two
>> >functions listed below: trt and cmt. The second function calls the
>> >first. In the namespace file, if I only export(cmt), I get the following
>> >error message when running this
>> >
>> >library(foo)
>> >set.seed(1)
>> >dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x
>> >= rnorm(100),
>> >f = gl(4, 250, labels = c("A", "B", "C", "D")))
>> >dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
>> >  > Error could not find function "trt"
>> >
>> >The problem is solved by doing export(cmt, trt) in the namespace.
>> >However, I'd like to avoid exporting trt and should not be required.
>> >Sorry I can't seem to figure this out by myself, and so I'd appreciate
>> >your help.
> You are asking for non-standard evaluation of the formula argument.  You
> want some parts of it to be evaluated in the global environment (f),
> some parts in the dd dataframe (x), and some parts evaluated in the
> package namespace (trt).  R is flexible so this is possible, but it's
> not the way that the terms function works, so you'll need to do more
> work yourself, including specifying what the evaluation rules should be
> in case a variable occurs in more than one of those locations.
>
> Duncan Murdoch
>
>> >


From murdoch.duncan at gmail.com  Wed Jan 29 16:48:15 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 29 Jan 2014 10:48:15 -0500
Subject: [Rd] package NAMESPACE question
In-Reply-To: <d2fb82$886lse@ironport10.mayo.edu>
References: <mailman.19.1390993211.1898.r-devel@r-project.org>
	<d2fb82$886lse@ironport10.mayo.edu>
Message-ID: <52E922BF.1050805@gmail.com>

On 29/01/2014 9:20 AM, Therneau, Terry M., Ph.D. wrote:
> An example of this is found in the coxph function in the survival library.  Look at it for
> guideance.
> Within a coxph formula the expression "tt(x)" means to use a time transform on variable x.
>    The tt function is a fake, defined as tt <- function(x) x, whose only purpose is to
> allow the user to mark a variable for special treatment while staying inside the syntax
> rules of formulas.
>     tt is not exported, because no one would ever want to use it.  It is documented within
> the coxph manual pages.  I did export it at one time, for exactly the reasons and error
> message detailed by Axel.  I recieved a request to cease doing so because of package
> issues --- someone had a package with a real and useful tt function, which would be masked
> if "require(survival)" ever occured, placing my library with its worthless function before
> his on the search path.  Enough things depend on the survival package that this was making
> his package's results unpredictable.

I'm not familiar with how coxph handles formulas.  Can a user put f(x) 
into a formula, where f is a user-defined function?  If a user defines a 
tt function, will coxph use theirs, or yours?

I'd say the answers for situations like this should be "yes" and 
"theirs", but that's not true of my tables package, where answers to the 
corresponding questions would be "yes" and "mine".

Duncan Murdoch
>
>     The root issue is that formulas are often counterintuitive.  R treats them as though
> they were a function, but with a special evaluation context.  Thus even though a formula
> is evaluated within the coxph function, components of the formula are not "in" the
> survival namespace and so can't see non-exported functions in that namespace.   If you
> found this confusing be assured that you are not alone.
>
> Terry Therneau
>
>
> On 01/29/2014 05:00 AM, r-devel-request at r-project.org wrote:
> >> Hi,
> >> >
> >> >I've tried to put together a simpler example where I'm having the issue.
> >> >
> >> >I've built a foo package by only including a single .R file with the two
> >> >functions listed below: trt and cmt. The second function calls the
> >> >first. In the namespace file, if I only export(cmt), I get the following
> >> >error message when running this
> >> >
> >> >library(foo)
> >> >set.seed(1)
> >> >dd <- data.frame(y = rbinom(100, 1, 0.5), treat = rbinom(100, 1, 0.5), x
> >> >= rnorm(100),
> >> >f = gl(4, 250, labels = c("A", "B", "C", "D")))
> >> >dd2 <- cmt(y ~ x + f + trt(treat), data =dd)
> >> >  > Error could not find function "trt"
> >> >
> >> >The problem is solved by doing export(cmt, trt) in the namespace.
> >> >However, I'd like to avoid exporting trt and should not be required.
> >> >Sorry I can't seem to figure this out by myself, and so I'd appreciate
> >> >your help.
> > You are asking for non-standard evaluation of the formula argument.  You
> > want some parts of it to be evaluated in the global environment (f),
> > some parts in the dd dataframe (x), and some parts evaluated in the
> > package namespace (trt).  R is flexible so this is possible, but it's
> > not the way that the terms function works, so you'll need to do more
> > work yourself, including specifying what the evaluation rules should be
> > in case a variable occurs in more than one of those locations.
> >
> > Duncan Murdoch
> >
> >> >
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From therneau at mayo.edu  Wed Jan 29 17:52:09 2014
From: therneau at mayo.edu (Therneau, Terry M., Ph.D.)
Date: Wed, 29 Jan 2014 10:52:09 -0600
Subject: [Rd] package NAMESPACE question
In-Reply-To: <52E922BF.1050805@gmail.com>
References: <mailman.19.1390993211.1898.r-devel@r-project.org>
	<d2fb82$886lse@ironport10.mayo.edu> <52E922BF.1050805@gmail.com>
Message-ID: <d2fb82$888dq7@ironport10.mayo.edu>

For the special tt mark in a formula, the answer is "mine".  Other than that coxph handles 
formulas in a completely standard way.

I don't see any other solution, frankly, unless I want to get really complex.  If formulas 
were not handled in an odd way, I'd simply add tt() to my namespace, not export it, and 
coxph would get my function by preference.  I had to engage in a little more trickery to 
get this behavior, but that is somewhat beside the point.

The key issue is actually the same one addressed by namespaces: when my function sees tt() 
in a formula, how does it decide whether to use its own function ("tt" is special, and 
documented as so), or believe that some other version is avaialable and should be used? 
If there is a tt() in the working directory?  In an attached library()?  In a directory on 
the search list (but ignore libraries)?  An attached "esp" library that reads the user's 
mind?

Terry T.



On 01/29/2014 09:48 AM, Duncan Murdoch wrote:
> I'm not familiar with how coxph handles formulas.  Can a user put f(x) into a formula,
> where f is a user-defined function?  If a user defines a tt function, will coxph use
> theirs, or yours?
>
> I'd say the answers for situations like this should be "yes" and "theirs", but that's not
> true of my tables package, where answers to the corresponding questions would be "yes" and
> "mine".


From steven.varga at gmail.com  Fri Jan 31 07:43:24 2014
From: steven.varga at gmail.com (Steven Varga)
Date: Fri, 31 Jan 2014 01:43:24 -0500
Subject: [Rd] INTEL MKL 11.1.0.080 R 3.0.2
Message-ID: <CAFkVQ9OqjiR8Ai7vmwJ0UQyMo6_3+7R-Drscvgzb7sndwtY7eg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140131/23067366/attachment.pl>

From claudia.beleites at ipht-jena.de  Fri Jan 31 09:17:43 2014
From: claudia.beleites at ipht-jena.de (Claudia Beleites)
Date: Fri, 31 Jan 2014 09:17:43 +0100
Subject: [Rd] how to unbreak a circular package dependence (S4 class
 data)
In-Reply-To: <CAC2h7utQtzQj_FxZRC4y0zHBnFF644PdW_29zO9ed=mO=mkQTw@mail.gmail.com>
References: <AA99B8FD-FF87-4638-986B-CDE31CA5D3E8@dal.ca>
	<52E85305.1000302@fhcrc.org>
	<CAC2h7utQtzQj_FxZRC4y0zHBnFF644PdW_29zO9ed=mO=mkQTw@mail.gmail.com>
Message-ID: <20140131091743.0fee1a6f@cbdesktop>

Kasper,

here's how I deal with a largish data set (although data + code in
one package for exactly that kind of circular dependency):

The data set is stored PCA-compressed (only the first few principal
components) in matrices plus some meta information (vector, list,
data.frame). 

I then have an internal function that reconstructs my example data:

.make.chondro <- function (){
  new ("hyperSpec",
       spc =  (tcrossprod (.chondro.scores, .chondro.loadings) +
               rep (.chondro.center, each = nrow (.chondro.scores))),
       wavelength = .chondro.wl,
       data = .chondro.extra, labels = .chondro.labels)
}

The result of that function is assigned when the data is first used:

delayedAssign ("chondro", .make.chondro ())

With that it should be possible to have the data package Suggests: the
main package, while the main package Depends: on the data (though I did
not yet find the time to separate both)

Side note: the original raw data file (compressed ASCII) is available
together with a variety of other raw data files from the project
home page - interested users find download links in the
vignettes and help pages. 

Best,

Claudia





Am Tue, 28 Jan 2014 21:21:20 -0500
schrieb Kasper Daniel Hansen <kasperdanielhansen at gmail.com>:

> This is a great comment if the primary use of the data is to make the
> data available.
> 
> It is clear that a change in the internals of the class structure
> requires changing the data package, and that is a clear drawback to my
> recommendation.  I have had to do this on several occasions.
> 
> One issue with Herve's recommendation is when the same data structure
> is used in several examples.  In that case, the conversion / parsing
> overhead multiplies by the number of examples.  As an example, in
> minfiData I have data on 6 samples on a somewhat large array.
> Parsing the raw data files for 3 of the 6 files takes 16 secs (you
> get this timing, because this is what I have in
> example(read.450k.exp)).  Loading all 6 arrays as an R data structure
> takes 1.1 sec.



> I would generally recommend that a data package either includes a
> more raw form of the data or has a script which makes the data easily
> retrievable.
> 
> Best,
> Kasper
> 
> 
> On Tue, Jan 28, 2014 at 8:01 PM, Herv? Pag?s <hpages at fhcrc.org> wrote:
> 
> > Hi Daniel,
> >
> >
> > On 01/28/2014 03:49 PM, Daniel Kelley wrote:
> >
> >> I have an issue with a circular package dependence that prevents
> >> building/checking, and I seek advice on breaking the circle so the
> >> packages can pass the build-check tests that are required for CRAN
> >> submission.
> >>
> >> The package pair I'm working with is slow to build, but my tests
> >> suggest the issue may be general, and so I will explain it in
> >> general terms.
> >>
> >> Suppose there are two packages:
> >>
> >> 1. Foo, a package that defines some data types with S4 classes.
> >>
> >> 2. Foodata, a package that provides such datasets, for use by Foo.
> >>
> >> With this setup, it seems reasonable that Foo "depends" on
> >> Foodata, so the data can be used in Foo and its documentation.
> >>
> >> Since the data within Foodata are S4 classes as defined in Foo, an
> >> attempt to build-check Foodata will produce an error unless Foo is
> >> present. But Foo cannot be built unless Foodata exists, since it
> >> depends on it. Thus neither Foo nor Foodata can be built and
> >> checked.
> >>
> >
> > I've learned by experience that it's generally better (although not
> > always possible) to avoid putting serialized S4 objects in a data
> > package. They will break if you need to modify a little bit the
> > internals of the class (and chances are high that you will at some
> > point). Better to store the data in a format that is more or less
> > guaranteed to remain the same for years (SQLite, XML, hdf5, plain
> > text, serialized data frame, SAM/BAM, etc...) and try to come up
> > with a fast way to load and turn the data into an S4 object on
> > demand.
> >
> > Not always possible if the data is huge... but for the purpose of
> > using it in Foo's examples and vignette do you really need huge
> > data?
> >
> > Another advantage of this approach is that the data can then be
> > more easily shared because it can be accessed with tools other
> > than yours, e.g. tools that don't know about S4 and even non-R
> > tools.
> >
> > Cheers,
> > H.
> >
> >
> >> One solution would be to wrap the Foo documentation examples (and
> >> relevant Foo code) in require() blocks, and to make Foo "suggest"
> >> Foodata, not "depend" upon it.  My question is whether this is the
> >> recommended practice, or the common practice.
> >>
> >> Thanks in advance to anyone who wishes to offer hints.
> >>
> >> PS. The problem arose from an attempt to reduce CRAN load by
> >> extracting the datasets that had been contained within a previous
> >> version of Foo.
> >>
> >> PPS. my (slow-building) packages are on github and I can supply
> >> details if needed.
> >>
> >> Dan E. Kelley
> >> Professor, Oceanography Department
> >> Dalhousie University, Canada
> >> Dan.Kelley at Dal.CA<mailto:Dan.Kelley at Dal.CA>
> >>
> >>
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >>
> >>
> >> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
> >>
> >>
> > --
> > Herv? Pag?s
> >
> > Program in Computational Biology
> > Division of Public Health Sciences
> > Fred Hutchinson Cancer Research Center
> > 1100 Fairview Ave. N, M1-B514
> > P.O. Box 19024
> > Seattle, WA 98109-1024
> >
> > E-mail: hpages at fhcrc.org
> > Phone:  (206) 667-5791
> > Fax:    (206) 667-1319
> >
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> 
> 	[[alternative HTML version deleted]]
> 



-- 
Claudia Beleites, Chemist
Spectroscopy/Imaging
Institute of Photonic Technology 
Albert-Einstein-Str. 9
07745 Jena
Germany

email: claudia.beleites at ipht-jena.de
phone: +49 3641 206-133
fax:   +49 2641 206-399


From ripley at stats.ox.ac.uk  Fri Jan 31 12:03:51 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 31 Jan 2014 11:03:51 +0000
Subject: [Rd] INTEL MKL 11.1.0.080 R 3.0.2
In-Reply-To: <CAFkVQ9OqjiR8Ai7vmwJ0UQyMo6_3+7R-Drscvgzb7sndwtY7eg@mail.gmail.com>
References: <CAFkVQ9OqjiR8Ai7vmwJ0UQyMo6_3+7R-Drscvgzb7sndwtY7eg@mail.gmail.com>
Message-ID: <52EB8317.3060003@stats.ox.ac.uk>

On 31/01/2014 06:43, Steven Varga wrote:
> I am having trouble of compiling R 3.0.2 with MKL 11.1.0.080; tried the
> following resources:
>
> http://software.intel.com/en-us/articles/intel-mkl-link-line-advisor
> http://cran.r-project.org/doc/manuals/R-admin.html#MKL
> http://software.intel.com/en-us/comment/reply/328415
>
> and getting the following:
> *checking for dgemm_ in -Wl,--start-group -lmkl_gf_lp64 -lmkl_gnu_thread
> -lmkl_core -Wl,--end-group -lgomp -lpthread... no*
> *checking for dgemm_... no*
>
>      libblas.so.3 => /usr/lib/libblas.so.3 (0x00007f8daec19000)
>      libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f8dae915000)
>      libgomp.so.1 => /usr/lib/x86_64-linux-gnu/libgomp.so.1
> (0x00007f8dade94000)
>      libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0
> (0x00007f8dadc77000)
>      libgfortran.so.3 => /usr/lib/x86_64-linux-gnu/libgfortran.so.3
> (0x00007f8dad596000)
>      libquadmath.so.0 => /usr/lib/x86_64-linux-gnu/libquadmath.so.0
> (0x00007f8dacf1a000)
>
>
> Tried sourcing mkl from bash and used both local and online intel mkl link
> util without success.
>
> can someone point what I am doing wrong?

File config.log does, and we do not have access to it.

> did anyone succeed with the above configuration?

How could anyone know that?  (You have not even told us your OS nor 
compiler.)

> thanks
>
> 	[[alternative HTML version deleted]]

See the posting guide ... HTML is not welcome here.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From murdoch.duncan at gmail.com  Fri Jan 31 14:59:27 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 31 Jan 2014 08:59:27 -0500
Subject: [Rd] Solution to inconsolata problems in MikTeX
Message-ID: <52EBAC3F.4060202@gmail.com>

Yesterday I updated my MikTeX 2.9 packages, and suddenly I couldn't 
build package manuals any more, failing with the error

  {F:/texmf/fonts/enc/dvips/fontname/8r.enc}
  !pdfTeX error: pdflatex.EXE (file ec-inconsolata): Font ec-inconsolata
  at 540 not found
     ==> Fatal error occurred, no output PDF file produced!


This is similar to a problem that people had last summer.   Here is my 
solution:

R uses the LaTeX inconsolata package to get some fixed-width fonts for 
the help pages. That package
has been going through a lot of changes lately. The problem is that I 
updated the system copy of the
packages (using "Maintenance (Admin) | Update (Admin)", but not the 
per-user copy (using
"Maintenance | Update"). Since the per-user packages have priority, this 
meant I had a mix of
obsolete and current packages visible to pdflatex, and it failed.

Doing both updates seems to have fixed things.

Duncan Murodch


From steven.varga at gmail.com  Fri Jan 31 20:21:00 2014
From: steven.varga at gmail.com (Steven Varga)
Date: Fri, 31 Jan 2014 14:21:00 -0500
Subject: [Rd] INTEL MKL 11.1.0.080 R 3.0.2
In-Reply-To: <52EB8317.3060003@stats.ox.ac.uk>
References: <CAFkVQ9OqjiR8Ai7vmwJ0UQyMo6_3+7R-Drscvgzb7sndwtY7eg@mail.gmail.com>
	<52EB8317.3060003@stats.ox.ac.uk>
Message-ID: <CAFkVQ9NFfhaKef8fGU35-inmLE-tknm=Ex5jXL12+JRR3GL7qw@mail.gmail.com>

Thank you for your response,

and apologies for violating the posting guide.

I am having trouble compiling R 3.0.2 with gcc 4.8.1 and Intel MKL
11.1.0.080 [free downloaded version] on Ubuntu 13.10 running on
Intel(R) Core(TM) i7 CPU L 620 4G ram

MKL source:
https://registrationcenter.intel.com/RegCenter/NComForm.aspx?ProductID=1461&pass=yes

tried the following methods:
http://cran.r-project.org/doc/manuals/R-admin.html#MKL
http://software.intel.com/en-us/articles/using-intel-mkl-with-r
http://software.intel.com/en-us/articles/intel-mkl-link-line-advisor
http://software.intel.com/en-us/forums/topic/326016
with: intel MKL 11.1, LINUX, XeonPhi: none, GNUC/C++, Intel(R)64, Dynamic,
ILP64, Multi-threaded, both libgomp/libiomp5

Examining config.log with various settings indicated that MKL was not
used, which was confirmed with  ldd /usr/local/lib/R/bin/exec/R and nm
(static link version)

list of config.log, ldd dump, with various settings are attached.

any help is appreciated,
Steven Varga

On Fri, Jan 31, 2014 at 6:03 AM, Prof Brian Ripley
<ripley at stats.ox.ac.uk> wrote:
> On 31/01/2014 06:43, Steven Varga wrote:
>>
>> I am having trouble of compiling R 3.0.2 with MKL 11.1.0.080; tried the
>> following resources:
>>
>> http://software.intel.com/en-us/articles/intel-mkl-link-line-advisor
>> http://cran.r-project.org/doc/manuals/R-admin.html#MKL
>> http://software.intel.com/en-us/comment/reply/328415
>>
>> and getting the following:
>> *checking for dgemm_ in -Wl,--start-group -lmkl_gf_lp64 -lmkl_gnu_thread
>> -lmkl_core -Wl,--end-group -lgomp -lpthread... no*
>> *checking for dgemm_... no*
>>
>>
>>      libblas.so.3 => /usr/lib/libblas.so.3 (0x00007f8daec19000)
>>      libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f8dae915000)
>>      libgomp.so.1 => /usr/lib/x86_64-linux-gnu/libgomp.so.1
>> (0x00007f8dade94000)
>>      libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0
>> (0x00007f8dadc77000)
>>      libgfortran.so.3 => /usr/lib/x86_64-linux-gnu/libgfortran.so.3
>> (0x00007f8dad596000)
>>      libquadmath.so.0 => /usr/lib/x86_64-linux-gnu/libquadmath.so.0
>> (0x00007f8dacf1a000)
>>
>>
>> Tried sourcing mkl from bash and used both local and online intel mkl link
>> util without success.
>>
>> can someone point what I am doing wrong?
>
>
> File config.log does, and we do not have access to it.
>
>
>> did anyone succeed with the above configuration?
>
>
> How could anyone know that?  (You have not even told us your OS nor
> compiler.)
>
>> thanks
>>
>>         [[alternative HTML version deleted]]
>
>
> See the posting guide ... HTML is not welcome here.
>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
-------------- next part --------------
000000000088c000 b a.13689
0000000000631e60 r a.4226
000000000096bf88 b a.4234
000000000096bf48 b aa.4195
000000000096bf28 b aaa.4196
000000000087b460 d ab_month_name
000000000087b5e0 d ab_weekday_name
00000000004ebb00 t AccentCode
0000000000614480 r AccentTable
                 U access@@GLIBC_2.2.5
                 U acos@@GLIBC_2.2.5
                 U acosh@@GLIBC_2.2.5
000000000088bc80 b active
000000000041ae80 t AddDLL
0000000000419fb0 t addDLL
                 U add_history
000000000057aa60 T addInputHandler
0000000000594240 t add_list_to_class
0000000000418398 t add_not_list_to_class
0000000000587020 t add_pair_to_block
0000000000488500 t add_point
0000000000511aa0 t AddReadRef
0000000000593e90 t add_to_class
0000000000595c20 t adjust_recurse.isra.1
0000000000586480 t adler32_combine_.part.0
00000000005733c0 t afc
00000000004d35a0 t AgeNodeAndChildren
00000000006318c0 r al.4178
0000000000631180 r aleg.4188
0000000000631200 r alegq.4235
0000000000414b6e t algdiv
00000000006309e0 r algmcs.4178
000000000096c1bc b allocated_m
000000000096c1a0 b allocated_n
000000000096c1b8 b allocated_n
000000000096e678 b allocated_size
000000000096e6a0 b allocator_mutex
0000000000465080 t allocMatrixNA.constprop.1
00000000004d6f80 t allocSExpNonCons
0000000000882390 d allowPrimitiveMethods
0000000000414a29 t alnrel
000000000041e040 t amatch_regaparams
000000000087b450 d am_pm
0000000000886240 b ans.8196
000000000043a5f0 t AnswerType
00000000004afef0 t applydefine.isra.17
00000000004d9350 t applyMethod
000000000046c610 t args2buff.isra.5
0000000000505b30 t AsciiInComplex
00000000005070f0 t AsciiInInteger
0000000000505ce0 t AsciiInReal
0000000000505a10 t AsciiInString
000000000044a770 t ascommon
                 U asin@@GLIBC_2.2.5
                 U asinh@@GLIBC_2.2.5
0000000000413bd4 t asLogicalNoNA.part.10
00000000006002c0 r asym
                 U atan2@@GLIBC_2.2.5
                 U atan@@GLIBC_2.2.5
                 U atanh@@GLIBC_2.2.5
00000000004b6ad0 t attachSrcrefs
000000000046c4d0 t attr1
000000000046e3a0 t attr2
00000000004d1cb0 T ATTRIB
00000000004eb6d0 t AxisHeight
000000000096c010 b b1.4181
000000000096c008 b b2.4182
000000000096bf18 b b.4201
0000000000894424 b bad_sexp_type_line
0000000000894430 b bad_sexp_type_seen
0000000000894428 b bad_sexp_type_sexp
00000000004138b0 t badtsp
0000000000635d60 r base_dist
0000000000635de0 r base_length
000000000087b6d4 D baseRegisterIndex
0000000000882ae0 d BasicInputHandler
000000000041792f t basym
000000000049f280 t bcEval
0000000000414790 t bcorr
0000000000414edf t betaln
0000000000416b94 t bgrat
0000000000585860 t bi_flush
000000000096c180 b big_l.4195
00000000005068b0 t BinaryInComplex
0000000000506950 t BinaryInInteger
0000000000506900 t BinaryInReal
00000000005059e0 t BinaryInString
00000000004eba70 t BinAtom
00000000004ce210 t BindDomain
00000000004d3240 t BINDING_IS_LOCKED
                 U bindtextdomain@@GLIBC_2.2.5
00000000006144e0 r BinTable
00000000005857f0 t bi_windup
0000000000636660 r bl_order
000000000096c1b0 b BM_norm_keep
00000000005493b0 t bmv
000000000088a488 b bnd.11615
00000000004d29e0 T BODY
00000000004ebcd0 t BoldItalicAtom
0000000000415f59 t bpser.part.5
0000000000577050 t bratio
0000000000415446 t brcmp1
00000000008937b0 b BrowsePrompt
0000000000589c40 t bsPutUInt32
00000000008837a8 B __bss_start
                 U btowc@@GLIBC_2.2.5
00000000008fdc40 b buf.10454
00000000008edf40 b buf.10483
00000000008ce540 b buf.10512
00000000008c66c0 b buf.10734
00000000008b69c0 b buf.10763
0000000000896fc0 b buf.10792
000000000088c220 b buf.13046
0000000000895e50 b buf.13337
0000000000895e40 b buf.13445
0000000000895e30 b buf.13502
000000000088ec80 b buff.8747
0000000000895a40 b buff.8910
0000000000895640 b buff.8915
0000000000895628 b buff.8920
0000000000894e40 b buff.8933
0000000000894a40 b buff.8945
0000000000894640 b buff.8961
00000000004b6d80 t buffer_getc
0000000000895e58 b buflen.13338
0000000000895e48 b buflen.13446
0000000000895e38 b buflen.13503
00000000005846c0 t build_tree
000000000048f920 t BuiltinNames
000000000048f830 t BuiltinSize
0000000000490250 t BuiltinValues.constprop.6
0000000000417e7a t bup
0000000000891314 b busy
0000000000631080 r bvalues.4184
000000000049d270 t bytecodeExpr.part.0
00000000005b6dc0 t byte_sequence_compare
0000000000592730 T BZ2_blockSort
0000000000589e10 T BZ2_bsInitWrite
00000000005875b0 T BZ2_bz__AssertH__fail
0000000000589860 T BZ2_bzBuffToBuffCompress
00000000005899a0 T BZ2_bzBuffToBuffDecompress
0000000000589b80 T BZ2_bzclose
0000000000587860 T BZ2_bzCompress
00000000005879e0 T BZ2_bzCompressEnd
0000000000587610 T BZ2_bzCompressInit
0000000000587bb0 T BZ2_bzDecompress
0000000000588a40 T BZ2_bzDecompressEnd
0000000000587a60 T BZ2_bzDecompressInit
0000000000589ae0 T BZ2_bzdopen
0000000000589c20 T BZ2_bzerror
0000000000589b70 T BZ2_bzflush
0000000000589ac0 T BZ2_bzlibVersion
0000000000589ad0 T BZ2_bzopen
0000000000589520 T BZ2_bzRead
0000000000589af0 T BZ2_bzread
0000000000589490 T BZ2_bzReadClose
00000000005897d0 T BZ2_bzReadGetUnused
0000000000589080 T BZ2_bzReadOpen
0000000000588c50 T BZ2_bzWrite
0000000000589b40 T BZ2_bzwrite
0000000000589060 T BZ2_bzWriteClose
0000000000588df0 T BZ2_bzWriteClose64
0000000000588ad0 T BZ2_bzWriteOpen
0000000000589e30 T BZ2_compressBlock
0000000000882b80 D BZ2_crc32Table
000000000058dd20 T BZ2_decompress
00000000005909e0 T BZ2_hbAssignCodes
0000000000590a30 T BZ2_hbCreateDecodeTables
0000000000590530 T BZ2_hbMakeCodeLengths
0000000000587b80 T BZ2_indexIntoF
0000000000882f80 D BZ2_rNums
0000000000636f20 r bzerrorstrings
0000000000454510 t bzfile_close
00000000004544d0 t bzfile_fgetc_internal
0000000000456e20 t bzfile_open
0000000000454280 t bzfile_read
00000000004560e0 t bzfile_write
0000000000418259 t BZmainGtU.part.0
0000000000589270 t bzopen_or_bzdopen.isra.3
000000000096bfe8 b c0.4184
0000000000882a04 d c__1
0000000000882a00 d c__11
000000000096bff0 b c1.4185
000000000096bff8 b c2.4186
000000000096c000 b c3.4187
00000000006306e0 r c.4182
000000000096bfe0 b c.4183
0000000000630f00 r c.4200
000000000096bf08 b c.4203
000000000096bec0 b c.4879
00000000004d2380 T CAAR
                 U cabs@@GLIBC_2.2.5
00000000004335c0 t cache_class
                 U cacos@@GLIBC_2.2.5
00000000004d23f0 T CAD4R
00000000004d23d0 T CADDDR
00000000004d23c0 T CADDR
00000000004d23a0 T CADR
000000000044f060 t calct
0000000000511bd0 t CallHook
0000000000882560 d callMethods
                 U calloc@@GLIBC_2.2.5
00000000004815c0 T call_R
00000000004819e0 T call_S
000000000088a360 b call_sym.11089
00000000004d2360 T CAR
                 U casin@@GLIBC_2.2.5
                 U catan@@GLIBC_2.2.5
000000000043f4e0 t cat_cleanup
000000000043f630 t cat_newline
000000000043f750 t cat_printsep
000000000043f6c0 t cat_sepwidth
000000000096be68 b c_b6
00000000008829f8 d c_b7
000000000043a9b0 t cbind.isra.2
000000000087aad0 d cbuff
000000000087aaf0 d cbuff
00000000008823a0 d cbuff
00000000008825c0 d cbuff
0000000000517610 t ccmp
                 U ccos@@GLIBC_2.2.5
                 U ccosh@@GLIBC_2.2.5
000000000042d6a0 t ccrossprod
000000000096c440 b cd
00000000004d2390 T CDAR
00000000004d23b0 T CDDR
000000000044ef90 t cdivid
00000000004d2370 T CDR
                 U ceil@@GLIBC_2.2.5
0000000000883880 b CEntryTable
0000000000534300 t cequal
                 U cexp@@GLIBC_2.2.5
0000000000551090 T cgmin
0000000000630500 r ch.4241
0000000000895240 b ch.8925
00000000005b0740 t char_get_othercase_bit.isra.23
000000000087b6e4 d char_hash_mask
000000000087b6e8 d char_hash_size
00000000005b05b0 t char_has_othercase.isra.20
00000000008913e0 b charset.3886
0000000000533550 t chash
                 U chdir@@GLIBC_2.2.5
00000000005bcba0 t check_anynewline.isra.34
0000000000594dc0 t check_auto_possessive
0000000000593130 t check_char_prop
00000000005b7860 t check_class_ranges
00000000005945a0 t check_escape
000000000051e9a0 t checkfmt
00000000004b6f80 t CheckFormalArgs.isra.2.part.3
00000000004b4cb0 t checkHandler
0000000000453ab0 t check_header
00000000005bc8d0 t check_hspace.isra.35
0000000000511d40 t CheckInConn
00000000005bb940 t check_newlinechar
000000000048ffe0 t checkNSname
0000000000511cf0 t CheckOutConn
00000000005b6ab0 t check_partial
0000000000593080 t check_posix_syntax
00000000005b75a0 t check_ranges
00000000005b68b0 t check_str_end
00000000005bcd00 t check_wordboundary
                 U chmod@@GLIBC_2.2.5
0000000000553230 t choldc
0000000000618c40 r cjk_locale_name
00000000005ef820 r classTable
0000000000497e70 t cleanup_PrintWarnings
                 U clearerr@@GLIBC_2.2.5
                 U clear_history
0000000000486690 t clipPoint
0000000000487730 t clipPoly
00000000004894d0 t clipPolygon
0000000000486960 t clipRectCode
000000000096c588 b clk_tck
                 U clock_gettime@@GLIBC_2.2.5
00000000004d29f0 T CLOENV
                 U clog@@GLIBC_2.2.5
                 U closedir@@GLIBC_2.2.5
                 U close@@GLIBC_2.2.5
000000000057a180 t closeLibrary
0000000000452810 t clp_close
0000000000452510 t clp_fflush
00000000004524e0 t clp_fgetc_internal
0000000000457230 t clp_open
00000000004555c0 t clp_read
0000000000456040 t clp_seek
0000000000455680 t clp_truncate
0000000000452940 t clp_write
000000000044ee80 t cmath1
00000000004ae5b0 t cmp_arith1
000000000049f120 t cmp_arith2.isra.16
00000000004ae6c0 t cmp_relop.isra.12
0000000000630bc0 r coeffs.4207
0000000000630b80 r coefs_a.4304
0000000000630b40 r coefs_b.4305
0000000000448370 t coercePairList
0000000000894380 b collect_counts
000000000060c97c r collect_counts_max
0000000000891240 b colon
0000000000883858 b CommandLineArgs
00000000005bd5c0 t compile_assert_backtrackingpath
00000000005c1a60 t compile_assert_matchingpath
00000000005c5620 t compile_backtrackingpath
00000000005cb180 t compile_bracket_backtrackingpath
00000000005c3110 t compile_bracket_matchingpath
00000000005c7260 t compile_bracketpos_matchingpath.isra.50
00000000005bd960 t compile_char1_matchingpath
00000000005c06c0 t compile_iterator_matchingpath.isra.45
00000000005c8300 t compile_matchingpath
00000000005ccf50 t compile_recurse
00000000005bb7c0 t compile_ref_checks
00000000005b8010 t compile_ref_matchingpath
0000000000595f20 t compile_regex
000000000096e66c b compiler_initialized
00000000005b9a50 t compile_xclass_matchingpath
0000000000883850 b completed.6992
00000000004d2140 T COMPLEX
00000000004393a0 t ComplexAnswer
000000000044f800 t complex_binary
00000000004509a0 t complex_math1
0000000000450d40 t complex_math2
000000000044f740 t complex_unary
0000000000585330 t compress_block
000000000096c1e8 b compstrings.13417
0000000000454eb0 t con_cleanup
000000000046c4f0 t con_cleanup
00000000005063f0 t con_cleanup
0000000000465060 t con_cleanup
0000000000511c90 t con_cleanup
000000000051d2d0 t con_cleanup
0000000000452860 t con_close1
0000000000456490 t con_destroy
0000000000879ca0 d configuration_table
00000000004564c0 t conFinalizer
00000000004b6d90 t con_getc
000000000088b780 b Connections
0000000000454ed0 t ConnIndex
0000000000891080 b con_parse
000000000088a640 b ConsoleBuf
0000000000895f80 b ConsoleBuf
0000000000891780 b ConsoleBuf
000000000088a630 b ConsoleBufCnt
0000000000895f60 b ConsoleBufCnt
000000000088a638 b ConsoleBufp
0000000000895f68 b ConsoleBufp
000000000050a600 t ConsoleGetchar
000000000050a6b0 t ConsoleGetcharWithPushBack
0000000000895e60 b ConsolePrompt
0000000000891098 b contextp
00000000008910a0 b contextstack
00000000004eb840 t ConvertedX
00000000004eb800 t ConvertedY
00000000005b3c90 t copy_private_data
                 U cos@@GLIBC_2.2.5
                 U cosh@@GLIBC_2.2.5
0000000000592cc0 t could_be_empty_branch
0000000000886220 b CountDLL
00000000004bda30 t count_subs
                 U cpow@@GLIBC_2.2.5
00000000005176f0 t cPsort2
00000000008837a4 d cpu_has_cmov
000000000087b850 d cpuLimit
000000000087b848 d cpuLimit2
000000000087b840 d cpuLimitValue
000000000057e0a0 t crc32_combine_
00000000006330c0 r crc_table
0000000000419800 t createRSymbolObject
0000000000487060 t CSclipline.isra.2
0000000000487350 t CScliplines
0000000000538450 T csduplicated
00000000005332c0 t csequal
00000000005331d0 t cshash
00000000005757d0 t csignrank
                 U csin@@GLIBC_2.2.5
000000000088bf88 b CSingSymbol
                 U csinh@@GLIBC_2.2.5
                 U csqrt@@GLIBC_2.2.5
0000000000630660 r CSWTCH.1
0000000000630980 r CSWTCH.1
000000000060b3c0 r CSWTCH.171
000000000060b3a0 r CSWTCH.172
000000000060c860 r CSWTCH.303
00000000006068e0 r CSWTCH.33
00000000005ef7f0 r CSWTCH.351
00000000005ef7c0 r CSWTCH.352
00000000005ef790 r CSWTCH.357
00000000006395c0 r CSWTCH.412
00000000005fc390 r CSWTCH.477
0000000000602dc0 r CSWTCH.482
000000000063dee0 r CSWTCH.498
                 U ctan@@GLIBC_2.2.5
                 U ctanh@@GLIBC_2.2.5
                 U ctime@@GLIBC_2.2.5
00000000004e9d20 t ctr_segdir
00000000004e9e00 t ctr_segupdate
                 U __ctype_b_loc@@GLIBC_2.3
                 U __ctype_get_mb_cur_max@@GLIBC_2.2.5
                 U __ctype_tolower_loc@@GLIBC_2.3
                 U __ctype_toupper_loc@@GLIBC_2.3
00000000008944b8 b curMaxOffset
000000000088b648 b current_id
0000000000469640 T currentTime
00000000008912ec b _current_token
0000000000579470 t cwilcox
000000000088bff8 b d.13690
000000000055e450 T d1mach_
000000000096c188 b d.4193
000000000096bf30 b d.4199
0000000000630ec0 r d.4201
0000000000631b60 r d.4227
000000000096bfa0 b d.4235
                 U dasum_
0000000000508380 t DataLoad
000000000087a980 D __data_start
000000000087a980 W data_start
                 U daxpy_
0000000000465ce0 t day_of_the_week
0000000000465de0 t day_of_the_year
00000000005f58e0 r days_in_month
0000000000635c60 r dbase.4215
000000000055e6e0 t dbinom_raw
00000000004f7400 t dblep0_
000000000053eab0 T dblepr_
000000000053a1e0 T dcar
000000000053a1f0 T dcdr
                 U dcgettext@@GLIBC_2.2.5
000000000053eb20 T dchdc_
                 U dcngettext@@GLIBC_2.2.5
                 U dcopy_
0000000000548aa0 t dcstep
                 U ddot_
00000000004d2c10 T DDVAL
000000000048ff80 t ddVal.isra.1
000000000096be00 b DebugInitFile
0000000000587180 t default_bzalloc
0000000000587160 t default_bzfree
000000000088bfc8 b DefaultFileName
0000000000894498 b deferred_default_object
000000000057f080 t deflate_fast
000000000057faf0 T deflatePending
000000000057f910 T deflateResetKeep
000000000057eb00 t deflate_slow
000000000057f4c0 t deflate_stored
000000000057a0c0 t deleteCachedSymbols
000000000041abd0 t DeleteDLL
000000000048fae0 t DeleteItem
00000000004ebdd0 t DelimCode
000000000096be88 b delta.4194
000000000046e550 t deparse1WithCutoff
000000000046c7c0 t deparse2buff
00000000004189b0 t deregister_tm_clones
00000000004eb650 t DescDepth
00000000004538c0 t destroy
00000000005b6c00 t detect_partial_match
0000000000635c20 r dext.4216
                 U dgemm_
00000000006395e0 r digitab
00000000004b3380 t disassemble
00000000004d9810 t dispatchNonGeneric
0000000000635360 r distfix.4302
00000000005defc0 t __divdc3
                 U div@@GLIBC_2.2.5
                 U dlclose@@GLIBC_2.2.5
                 U dlerror@@GLIBC_2.2.5
00000000008927a0 b DLLbuf
0000000000892780 b DLLbufp
00000000008838a0 b DLLerror
                 U dlopen@@GLIBC_2.2.5
                 U dlsym@@GLIBC_2.2.5
000000000088a494 b d_n.11607
                 U dnrm2_
0000000000444630 t do_abbrev
000000000042c680 t do_abs
000000000049a670 t do_addCondHands
000000000049aaa0 t do_addRestart
000000000049c930 t do_addTryHandlers
000000000041edf0 t do_adist
000000000041e300 t do_agrep
00000000004cb320 t do_allnames
00000000004311a0 t do_aperm
0000000000420ab0 t do_aregexec
000000000043fea0 t do_args
000000000042c4b0 t do_arith
0000000000432670 t do_array
0000000000447c60 t do_ascall
000000000044aba0 t do_ascharacter
00000000004950f0 t do_as_environment
0000000000447990 t do_asfunction
0000000000469c10 t do_asPOSIXct
00000000004696f0 t do_asPOSIXlt
0000000000493ba0 t do_assign
000000000044ad10 t do_asvector
0000000000438be0 t do_AT
00000000004942e0 t do_attach
0000000000437b60 t do_attr
00000000004387e0 t do_attrgets
00000000004373c0 t do_attributes
00000000004377a0 t do_attributesgets
0000000000432e50 t do_backsolve
0000000000490860 t do_baseenv
000000000053be60 t do_basename
00000000004b3520 t do_bcclose
00000000004b36b0 t do_bcversion
00000000004afad0 t do_begin
000000000053ccc0 t do_bincode
000000000043d4e0 t do_bind
000000000049c550 t do_bindtextdomain
0000000000504460 t do_bitwise
0000000000495e80 t do_bndIsActive
0000000000495de0 t do_bndIsLocked
0000000000440200 t do_body
0000000000440240 t do_bodyCode
000000000049dde0 t do_break
00000000004cfb60 t do_browser
0000000000494e50 t do_builtins
000000000043cc80 t do_c
000000000044d280 t do_call
00000000005af600 t do_callout
00000000004e8090 t do_capabilities
00000000004e8020 t do_capabilitiesX11
00000000005b89d0 t do_casefulcmp.isra.53
00000000005b8c10 t do_caselesscmp.isra.54
00000000004408e0 t do_cat
000000000043c6b0 t do_c_dflt
0000000000536990 t do_charmatch
00000000005008e0 t do_charToRaw
0000000000445580 t do_chartr
0000000000438170 t do_class
0000000000436490 t do_classgets
0000000000460130 t do_clearpushback
000000000045bcc0 t do_close
0000000000450170 t do_cmathfuns
000000000050e3a0 t do_colon
0000000000431fc0 t do_colsum
000000000042d8b0 t do_colsum._omp_fn.0
0000000000418b10 t do_commandArgs
00000000004346b0 t do_comment
0000000000436380 t do_commentgets
00000000004ae9e0 t do_compilepkgs
0000000000451100 t do_complex
00000000004eb3c0 T do_contourLines
00000000004e2670 t do_copy
0000000000433e60 t do_copyDFattr
000000000053cbe0 t do_crc64
00000000004e93c0 t do_Cstack_info
00000000004642b0 t do_cum
000000000046b420 t do_D2POSIXlt
00000000004e47f0 t do_date
000000000046bb20 t do_debug
000000000043f930 t do_delayed
000000000046ecb0 t do_deparse
0000000000494ad0 t do_detach
000000000049ca20 t do_dfltStop
000000000049ba40 t do_dfltWarn
0000000000432b80 t do_diag
0000000000435ae0 t do_dim
0000000000437260 t do_dimgets
0000000000435a40 t do_dimnames
0000000000437180 t do_dimnamesgets
00000000004e8560 t do_dircreate
000000000053c030 t do_dirname
00000000004b3650 t do_disassemble
000000000044d4e0 t do_docall
00000000004720d0 t do_dotcall
00000000004797b0 t do_dotcallgr
0000000000479860 t do_dotCode
000000000046f1b0 t do_dput
000000000042eac0 t do_drop
000000000046f4d0 t do_dump
0000000000534cf0 t do_duplicated
000000000041b120 t do_dynload
000000000041b260 t do_dynunload
0000000000490f70 t do_eapply
0000000000485eb0 T do_edit
0000000000490890 t do_emptyenv
00000000004ae980 t do_enablejit
000000000053c9f0 t do_enc2
000000000053ae10 t do_encodeString
000000000053b190 t do_encoding
0000000000490d10 t do_env2list
0000000000440280 t do_envir
00000000004402e0 t do_envirgets
00000000004406f0 t do_envirName
00000000004956b0 t do_envIsLocked
00000000004979a0 t do_envprofile
00000000004b0f00 t do_eval
0000000000441580 t do_expression
0000000000471e00 t do_External
0000000000479700 t do_Externalgr
0000000000457fe0 t do_fifo
00000000004e7080 t do_fileaccess
00000000004e4c20 t do_fileappend
00000000004e6f90 t do_filechoose
00000000004e88f0 t do_filecopy
00000000004e5140 t do_filecreate
00000000004e6e20 t do_fileexists
00000000004e6050 t do_fileinfo
00000000004e5930 t do_filelink
00000000004e0d40 t do_filepath
00000000004e5370 t do_fileremove
00000000004e5cf0 t do_filerename
00000000004e4880 t do_fileshow
00000000004e5570 t do_filesymlink
000000000053d110 t do_findinterval
000000000052ed80 t do_first_min
000000000045c210 t do_flush
00000000004b2220 t do_for
00000000004401c0 t do_formals
00000000004e13b0 t do_format
000000000053d6e0 t do_formatC
00000000004e2040 t do_formatinfo
000000000046a230 t do_formatPOSIXlt
00000000004ae4a0 t do_function
00000000004d81c0 t do_gc
00000000004d7970 t do_gcinfo
00000000004d7ea0 t do_gctime
00000000004d7820 t do_gctorture
00000000004d78c0 t do_gctorture2
0000000000492aa0 t do_get
0000000000460480 t do_getallconnections
0000000000460510 t do_getconnection
00000000004b3af0 t do_getconst
000000000041bb50 t do_getDllTable
0000000000530400 t do_getenv
00000000004988c0 t do_geterrmessage
00000000004b4ef0 T do_getGraphicsEvent
00000000004b4e70 T do_getGraphicsEventEnv
00000000004e74f0 t do_getlocale
0000000000496640 t do_getNSRegistry
000000000041bce0 t do_getRegisteredRoutines
00000000004965f0 t do_getRegNS
0000000000498a90 t do_getRestart
000000000048e520 T do_getSnapshot
000000000041b980 t do_getSymbolInfo
000000000049bae0 t do_gettext
00000000005b6620 t do_getucd.isra.39
00000000005171b0 t do_getVarsFromFrame
000000000053ab10 t do_getwd
0000000000532f20 t do_glob
0000000000418a20 t __do_global_dtors_aux
0000000000879c90 t __do_global_dtors_aux_fini_array_entry
0000000000490830 t do_globalenv
00000000004c0200 t do_grep
00000000004c0e60 t do_grepraw
00000000004b38e0 t do_growconst
00000000004c2380 t do_gsub
0000000000461760 t do_gzcon
0000000000459270 t do_gzfile
0000000000533450 t DoHashing
00000000005308f0 t do_iconv
000000000053cb70 t do_ICUset
00000000004c75a0 t do_identical
00000000004af7b0 t do_if
0000000000496670 t do_importIntoEnv
00000000004dc000 t do_inherits
00000000004c9e00 t do_inspect
000000000052fe60 t do_interactive
00000000004d8830 t do_internal
0000000000498c40 t do_interruptsSuspended
0000000000500d50 t do_intToBits
0000000000501870 t do_intToUtf8
00000000004f45f0 t do_invisible
000000000049ab30 t do_invokeRestart
000000000044b090 t do_is
0000000000459c50 t do_isatty
00000000004b35d0 t do_is_builtin_internal
000000000044c9d0 t do_isfinite
000000000045ba20 t do_isincomplete
000000000044cdf0 t do_isinfinite
0000000000422ce0 t do_islistfactor
0000000000471a40 t do_isloaded
000000000044bbd0 t do_isna
000000000044c550 t do_isnan
00000000004962d0 t do_isNSEnv
000000000045b970 t do_isopen
000000000045bb70 t do_isseekable
0000000000519a60 t do_isunsorted
000000000044b8f0 t do_isvector
00000000004e8da0 t do_l10n_info
00000000004cb130 t do_lapack
0000000000421ac0 t do_lapply
0000000000516c50 t do_lazyLoadDBfetch
0000000000516960 t do_lazyLoadDBflush
00000000005173d0 t do_lazyLoadDBinsertValue
000000000042eb90 t do_length
0000000000442130 t do_lengthgets
00000000004376a0 t do_levelsgets
0000000000493a40 t do_list2env
00000000004e6bc0 t do_listdirs
00000000004e66d0 t do_listfiles
0000000000509740 t do_load
00000000004b36d0 t do_loadfile
000000000050a2f0 t do_loadFromConn2
00000000004e7950 t do_localeconv
0000000000495d50 t do_lockBnd
0000000000495660 t do_lockEnv
000000000042d160 t do_log
000000000042cf30 t do_log1arg
00000000004cb9f0 t do_logic
00000000004ccff0 t do_logic2
00000000004cd590 t do_logic3
0000000000494d00 t do_ls
000000000057d190 t do_machine
000000000043faa0 t do_makelazy
0000000000441330 t do_makelist
0000000000444c30 t do_makenames
0000000000537e90 t do_makeunique
00000000004417e0 t do_makevector
00000000004d0360 t do_mapply
0000000000535f40 t do_match
0000000000536df0 t do_matchcall
00000000004283d0 t do_math1
000000000042ca70 t do_Math2
0000000000426b30 t do_math2
00000000004278b0 t do_math3
0000000000428700 t do_math4
000000000042f0c0 t do_matprod
000000000042dc30 t do_matrix
0000000000433180 t do_maxcol
0000000000462890 t do_memCompress
0000000000462c30 t do_memDecompress
00000000004d7f30 t do_memlimits
00000000004d86b0 t do_memoryprofile
000000000053a200 t do_merge
0000000000497010 t do_mget
0000000000494030 t do_missing
0000000000495e40 t do_mkActiveBnd
00000000004b34d0 t do_mkcode
0000000000495ee0 t do_mkUnbound
00000000004350a0 t do_names
00000000004365d0 t do_namesgets
000000000053a050 t do_nargs
00000000004431a0 t do_nchar
0000000000440460 t do_newenv
00000000004da880 t do_nextmethod
000000000049c110 t do_ngettext
000000000053ac20 t do_normalizepath
00000000004e8330 t do_nsl
0000000000442fa0 t do_nzchar
0000000000421700 t do_one
000000000043fc40 t do_onexit
000000000045b6a0 t do_open
00000000004de860 t do_options
000000000051c200 t do_order
0000000000500f00 t do_packBits
000000000049de10 t do_paren
0000000000440560 t do_parentenv
00000000004405f0 t do_parentenvgets
0000000000464090 t do_parentframe
000000000051db90 t do_parse
00000000004dfdd0 t do_paste
00000000004e7e70 t do_pathexpand
0000000000458610 t do_pipe
000000000048e550 T do_playSnapshot
0000000000536160 t do_pmatch
000000000052f330 t do_pmin
00000000004512b0 t do_polyroot
0000000000494ee0 t do_pos2env
000000000046b840 t do_POSIXlt2D
000000000053d300 t do_pretty
00000000004d8b60 t do_primitive
00000000004f6e20 t do_printdefault
0000000000498bd0 t do_printDeferredWarnings
00000000004f5e30 t do_printfunction
00000000004f46c0 t do_prmatrix
0000000000532aa0 t do_proctime
000000000049d560 t doprof
000000000049cce0 t doprof_null
000000000051adc0 t do_psort
000000000045fe30 t do_pushback
0000000000460100 t do_pushbacklength
00000000004b39a0 t do_putconst
00000000004fe5d0 t do_qsort
00000000004cefd0 t do_quit
000000000044dd00 t do_quote
000000000051cd70 t do_radixsort
00000000004fed90 t do_random1
00000000004ff100 t do_random2
00000000004ff640 t do_random3
000000000052ec40 t do_range
000000000051c790 t do_rank
0000000000422a90 t do_rapply
0000000000459cb0 t do_rawconnection
000000000045a1e0 t do_rawconvalue
0000000000500b80 t do_rawShift
0000000000500c80 t do_rawToBits
0000000000500a00 t do_rawToChar
000000000045cb50 t do_readbin
000000000045e570 t do_readchar
0000000000465100 t do_readDCF
000000000041ca40 t do_readEnviron
000000000045f660 t do_readLines
00000000004e9230 t do_readlink
000000000050d490 t do_readln
00000000004b1900 t do_recall
000000000048e580 t do_recordGraphics
00000000004c60a0 t do_regexec
00000000004c3f70 t do_regexpr
00000000004d7be0 t do_regFinaliz
0000000000496460 t do_regNS
00000000005043f0 t do_relop
00000000005025e0 t do_relop_dflt
00000000004916d0 t do_remove
000000000050fcb0 t do_rep
00000000004b2dd0 t do_repeat
000000000050ede0 t do_rep_int
000000000050f790 t do_rep_len
0000000000498a60 t do_resetCondHands
0000000000463a50 t do_restart
000000000046bfa0 t do_retracemem
00000000004afd00 t do_return
00000000005b8720 t do_revertframes.isra.52
00000000004e6d90 t do_Rhome
000000000041dea0 t do_RNGkind
000000000042ee90 t do_rowscols
0000000000537410 t do_rowsum
000000000049d8a0 T do_Rprof
00000000004d3390 T do_Rprofmem
00000000004dc3d0 t do_S4on
00000000004ffec0 t do_sample
00000000005385b0 t do_sample2
00000000005092a0 t do_save
00000000004b37c0 t do_savefile
000000000057de20 T do_saveplot
0000000000509d50 t do_saveToConn
000000000050ba00 t do_scan
000000000041435c t do_search
000000000056dd70 t do_search
000000000056f760 t do_search
0000000000497800 t do_search
00000000005af800 t do_searchgroups
00000000005afb00 t do_search_mark
00000000005af960 t do_searchovector
000000000045bea0 t do_seek
0000000000510510 t do_seq
0000000000511570 t do_seq_along
0000000000511780 t do_seq_len
0000000000517410 t do_serialize
00000000005160a0 t do_serializeToConn
00000000004b0740 t do_set
000000000053b280 t do_setencoding
0000000000530640 t do_setenv
000000000049abc0 t do_seterrmessage
00000000004e9500 t do_setFileTime
00000000004b4d10 T do_setGraphicsEventEnv
00000000004e7640 t do_setlocale
00000000004b3c20 t do_setmaxnumthreads
00000000004b3bc0 t do_setnumthreads
00000000004dc910 T do_set_prim_method
00000000004ddd10 t do_setS4Object
000000000041df50 t do_setseed
0000000000532e10 t do_setSessionTimeLimit
0000000000532cf0 t do_setTimeLimit
000000000053ab30 t do_setwd
0000000000433c70 t do_shortRowNames
000000000049cab0 t do_signalCondition
00000000004601c0 t do_sink
0000000000460350 t do_sinknumber
000000000045ada0 t do_sockconn
0000000000462270 t do_sockselect
000000000051ac90 t do_sort
000000000051e250 t do_split
000000000051e9e0 t do_sprintf
00000000004dc620 t do_standardGeneric
0000000000459b90 t do_stderr
0000000000459a10 t do_stdin
0000000000459ad0 t do_stdout
000000000049c6f0 t do_stop
000000000044e440 t do_storage_mode
000000000046aaf0 t do_strptime
00000000004be700 t do_strsplit
0000000000446680 t do_strtoi
0000000000446340 t do_strtrim
00000000005247f0 t do_subassign
0000000000525e80 t do_subassign2
0000000000524860 t do_subassign2_dflt
00000000005266f0 t do_subassign3
00000000005230a0 t do_subassign_dflt
000000000052bc10 t do_subset
000000000052c650 t do_subset2
000000000052bc90 t do_subset2_dflt
000000000052cbe0 t do_subset3
0000000000529b30 t do_subset_dflt
000000000044db40 t do_substitute
00000000004437a0 t do_substr
0000000000443e50 t do_substrgets
0000000000460640 t do_sumconnection
000000000052ce50 t do_summary
00000000004426b0 t do_switch
0000000000463ca0 t do_sys
0000000000463b60 t do_sysbrowser
00000000004e8f40 t do_syschmod
00000000004e8530 t do_sysgetpid
000000000057d840 t do_sysinfo
000000000057c070 t do_syssleep
000000000057d370 t do_system
0000000000469690 t do_systime
00000000004e9150 t do_sysumask
000000000053d000 t do_tabulate
000000000052fea0 t do_tempdir
00000000005326c0 t do_tempfile
000000000045a350 t do_textconnection
000000000045ac50 t do_textconvalue
00000000004d8a00 t do_tilde
00000000004450c0 t do_tolower
000000000046bcd0 t do_trace
000000000049a610 t do_traceback
000000000046bf30 t do_tracemem
000000000046be20 t do_traceOnOff
0000000000430ac0 t do_transpose
000000000042c5e0 t do_trunc
000000000045c0d0 t do_truncate
000000000044b020 t do_typeof
00000000004dbf50 t do_unclass
00000000004e7250 t do_unlink
000000000043cd10 t do_unlist
00000000004964f0 t do_unregNS
0000000000516370 t do_unserializeFromConn
00000000005307d0 t do_unsetenv
0000000000446940 t do_unsetS4
000000000046bf60 t do_untracemem
000000000045b240 t do_unz
0000000000460a10 t do_url
00000000004da380 t do_usemethod
00000000005013b0 t do_utf8ToInt
00000000005af2a0 t do_utf_caselesscmp
00000000005b8ef0 t do_utfreadchar.isra.55
00000000005b9550 t do_utfreadtype8.isra.56
0000000000421df0 t do_vapply
000000000053de70 t do_version
000000000049b640 t do_warning
000000000052f0f0 t do_which
00000000004b2a80 t do_while
00000000004b17f0 t do_withVisible
000000000045d980 t do_writebin
000000000045ec80 t do_writechar
000000000045c5c0 t do_writelines
000000000057ddb0 T do_X11
000000000051d1e0 t do_xtfrm
000000000053f3c0 T dpbfa_
000000000053f5e0 T dpbsl_
000000000053f780 T dpoco_
00000000005401f0 T dpodi_
0000000000540550 T dpofa_
0000000000561180 t dpois_raw
0000000000563c30 t dpois_wrap
0000000000540760 T dposl_
0000000000542720 T dqrcf_
0000000000541080 T dqrdc_
00000000005408e0 T dqrdc2_
00000000005418f0 T dqrls_
0000000000542520 T dqrqty_
0000000000542620 T dqrqy_
0000000000542820 T dqrrsd_
0000000000541bb0 T dqrsl_
0000000000542930 T dqrxb_
                 U drot_
                 U drotg_
                 U dscal_
000000000087a988 d __dso_handle
0000000000542a40 T dsvdc_
                 U dswap_
                 U dsyrk_
0000000000544a80 T dtrco_
00000000005451b0 T dtrsl_
                 U dtrsm_
000000000053a1d0 T dtype
0000000000889960 b dummy
00000000004d0320 t dummy12345
0000000000452df0 T dummy_fgetc
00000000004d0350 T dummy_ii
00000000005052f0 t DummyInit
0000000000505310 t DummyOutNewline
0000000000505300 t DummyOutSpace
0000000000505320 t DummyTerm
0000000000452ad0 T dummy_vfprintf
0000000000484cf0 t duplicate1
00000000004d1e40 T DUPLICATE_ATTRIB
000000000087b6d8 d duplicate_counter
000000000088bfa0 b DupSymbol
0000000000879d90 d _DYNAMIC
00000000008912e8 b EatLines
00000000008837a8 D _edata
000000000088bfc0 b EdFileUsed
000000000087b838 d elapsedLimit
000000000087b830 d elapsedLimit2
000000000087b828 d elapsedLimitValue
0000000000520930 t embedInVector
00000000005b2660 t emit_cmp_binary
00000000005b43f0 t emit_cum_binary
00000000005b1290 t emit_do_imm32
00000000005b16d0 t emit_lea_binary.part.28
00000000005b09a0 t emit_load_imm64
00000000005b14a0 t emit_mov
00000000005b0fe0 t emit_mov_byte
00000000005b1140 t emit_mov_half
00000000005b1500 t emit_mov_int
00000000005b1300 t emit_mov.part.27
00000000005b28e0 t emit_non_cum_binary
000000000041843e t emit_restore_flags
0000000000418486 t emit_save_flags
00000000005b49e0 t emit_shift
00000000005b4d30 t emit_shift_with_flags
00000000005b2db0 t emit_unary
00000000005b0a00 t emit_x86_instruction
000000000087b7ff d ENC_ARMSCII_8
000000000087b7fa d ENC_BIG5
000000000087b7ef d ENC_BIG5_HKSCS
000000000087b7ed d ENC_C
000000000087b7e6 d ENC_CP1251
000000000087b7df d ENC_CP1255
000000000087b7d8 d ENC_CP1256
000000000087b7d1 d ENC_EUC_CN
000000000087b7ca d ENC_EUC_JP
000000000087b7c3 d ENC_EUC_KR
000000000087b7bc d ENC_EUC_TW
000000000087b7b5 d ENC_GB2312
000000000087b7b1 d ENC_GBK
000000000087b7a0 d ENC_GEORGIAN_ACADEMY
000000000087b78b d ENC_ISO8859_1
000000000087b780 d ENC_ISO8859_10
000000000087b775 d ENC_ISO8859_11
000000000087b76a d ENC_ISO8859_13
000000000087b75f d ENC_ISO8859_15
000000000087b755 d ENC_ISO8859_2
000000000087b74b d ENC_ISO8859_3
000000000087b741 d ENC_ISO8859_5
000000000087b737 d ENC_ISO8859_6
000000000087b72d d ENC_ISO8859_7
000000000087b723 d ENC_ISO8859_8
000000000087b719 d ENC_ISO8859_9
00000000004d3360 T ENC_KNOWN
000000000087b712 d ENC_KOI8_R
000000000087b70b d ENC_KOI8_U
00000000004d2de0 T ENCLOS
00000000004fbc00 t EncodeReal2
000000000088bf90 b EncSymbol
000000000087b706 d ENC_TCVN
000000000087b700 d ENC_UTF_8
000000000096ee40 B _end
00000000008912e0 b EndOfFile
00000000005b1850 t ensure_abuf.isra.29
00000000005b0930 t ensure_buf.isra.25
00000000004ae2f0 t EnsureLocal
00000000004d2e00 T ENVFLAGS
00000000008837f8 B __environ@@GLIBC_2.2.5
00000000008837f8 V environ@@GLIBC_2.2.5
000000000088a380 b eq_sym.11085
00000000005195d0 t equal.constprop.2
0000000000416915 t erfc1.constprop.6
000000000088c460 b errbuf
                 U __errno_location@@GLIBC_2.2.5
000000000049c990 t errorcall_dflt.constprop.4
00000000005fcbe0 r ErrorDB
00000000006396e0 r error_texts
000000000063a640 r escapes
00000000004153dd t esum.part.3
00000000004b0ee0 t evalArgs
000000000088e488 b evalcount.11670
000000000088e484 b evalcount.12887
00000000004afd70 t evalseq
                 U exit@@GLIBC_2.2.5
0000000000533980 t ExpandDots
0000000000594310 t expand_workspace
0000000000414312 t expected
                 U exp@@GLIBC_2.2.5
                 U expl@@GLIBC_2.2.5
                 U expm1@@GLIBC_2.2.5
00000000005755d0 T exp_rand
0000000000636680 r extra_blbits
0000000000529410 t ExtractArg
0000000000529460 t ExtractDropArg
000000000050a9b0 t extractItem
0000000000483270 t extract_one
0000000000482d90 t extract_one.part.3
0000000000529610 t ExtractSubset
00000000006366e0 r extra_dbits
0000000000636760 r extra_lbits
00000000004ca2f0 T extR_HTTPDCreate
00000000004ca360 T extR_HTTPDStop
0000000000631980 r fact.4178
00000000006300a0 r fact.4242
0000000000590b90 t fallbackSort
000000000062e880 r falsenames
00000000005bb4d0 t fast_forward_first_char
00000000005bc1d0 t fast_forward_newline
00000000005b7940 t fast_forward_start_bits
                 U fclose@@GLIBC_2.2.5
                 U fcntl@@GLIBC_2.2.5
                 U __fdelt_chk@@GLIBC_2.15
0000000000554140 T fdhess
                 U fdopen@@GLIBC_2.2.5
                 U feof@@GLIBC_2.2.5
                 U ferror@@GLIBC_2.2.5
                 U fflush@@GLIBC_2.2.5
                 U fgetc@@GLIBC_2.2.5
                 U fgetpos@@GLIBC_2.2.5
                 U fgets@@GLIBC_2.2.5
00000000004be260 t fgrep_one
00000000004be500 t fgrep_one_bytes
00000000004bdb70 t fgrepraw1
0000000000464fe0 t field_is_foldable_p
0000000000453200 t fifo_close
00000000004531c0 t fifo_fgetc_internal
0000000000456a90 t fifo_open
00000000004553f0 t fifo_read
0000000000455740 t fifo_write
00000000004eb690 t FigHeight
0000000000453960 t file_close
0000000000453300 t file_fflush
0000000000453350 t file_fgetc_internal
00000000004b6d70 t file_getc
00000000004e2be0 t filename
                 U fileno@@GLIBC_2.2.5
0000000000457300 t file_open
0000000000453290 t file_read
0000000000454140 t file_seek
0000000000454a40 t file_truncate
00000000004533c0 t file_vfprintf
0000000000453230 t file_write
000000000050b290 t fillBuffer
000000000057e720 t fill_window
000000000088a5e0 b filters
00000000004b5a90 t finalizeData
0000000000593650 t find_firstassertedchar
0000000000592980 t find_fixedlength
0000000000492120 t findGlobalVar
00000000005483f0 T findInterval
000000000049cf50 t findmethod
00000000005d1c10 t find_minlength
0000000000593e10 t find_parens
0000000000593790 t find_parens_sub
000000000051e960 t findspec.part.0
0000000000492620 t findVar1mode
0000000000491a20 t findVarLocInFrame
00000000005df384 T _fini
                 U __finite@@GLIBC_2.2.5
00000000004b6cc0 t FirstArg
0000000000592900 t first_significant_code
000000000052cd40 t fixup_NaRm
00000000004ffdc0 T FixupProb
000000000041d3c0 t FixupSeeds
0000000000506840 t FixupType
                 U floor@@GLIBC_2.2.5
0000000000512630 t flush_bcon_buffer
000000000057ea80 t flush_pending
00000000005b1b40 t flush_stubs
000000000096bef0 b fm.4880
                 U fmin@@GLIBC_2.2.5
                 U fmod@@GLIBC_2.2.5
                 U fopen@@GLIBC_2.2.5
00000000004ae3b0 t forcePromise
00000000004d29d0 T FORMALS
000000000088a388 b for_sym.11084
00000000008823e0 d fortranMethods
0000000000891308 b fp_parse
                 U __fprintf_chk@@GLIBC_2.3.4
000000000057dca0 T fpu_setup
                 U fputc@@GLIBC_2.2.5
                 U fputs@@GLIBC_2.2.5
00000000004d2dd0 T FRAME
0000000000418a40 t frame_dummy
0000000000879c88 t __frame_dummy_init_array_entry
0000000000678f78 r __FRAME_END__
000000000048f9e0 t FrameNames
000000000048f7e0 t FrameSize
000000000048fe00 t FrameValues
0000000000481c10 t fread_func
                 U fread@@GLIBC_2.2.5
000000000096e680 b free_blocks
                 U free@@GLIBC_2.2.5
0000000000511c50 t free_mem_buffer
00000000004197d0 t freeRegisteredNativeSymbolCopy
                 U fscanf@@GLIBC_2.2.5
0000000000481a60 t fseek_func
                 U fseek@@GLIBC_2.2.5
                 U fseeko@@GLIBC_2.2.5
                 U fsetpos@@GLIBC_2.2.5
0000000000552e30 t fstocd
0000000000553510 t fstofd
                 U ftell@@GLIBC_2.2.5
                 U ftello@@GLIBC_2.2.5
                 U ftruncate@@GLIBC_2.2.5
000000000088bfb0 b FunTabSize.7954
                 U fwrite@@GLIBC_2.2.5
000000000041446c t gam1
0000000000630800 r gamcs.4178
0000000000414d4f t gamln
0000000000414621 t gamln1
000000000096be70 b gamma.4193
0000000000486a50 t g_blend
00000000008823c0 d gBuffer.9280
0000000000894434 b gc_count
000000000089441c b gc_force_gap
0000000000894420 b gc_force_wait
0000000000894418 b gc_inhibit_release
0000000000894438 b gc_reporting
0000000000893800 b gcstarttimes
00000000008937e4 b gctime_enabled
0000000000893840 b gctimes
00000000004704d0 T GEaddDevice
00000000004706c0 T GEaddDevice2
000000000048a140 T GECap
000000000048dfc0 T GEcheckState
0000000000489710 T GECircle
00000000004e9f70 T GEcontourLines
000000000048e3a0 T GEcopyDisplayList
0000000000470740 T GEcreateDevDesc
000000000048e260 T GEcreateSnapshot
000000000046fca0 T GEcurrentDevice
0000000000488000 T GEdestroyDevDesc
000000000048dfa0 T GEdeviceDirty
00000000004701c0 T GEdeviceNumber
000000000048dfb0 T GEdirtyDevice
00000000004f3c00 T GEExpressionHeight
00000000004f3ca0 T GEExpressionMetric
00000000004f3b60 T GEExpressionWidth
0000000000488b20 T GEfromDeviceHeight
0000000000487710 t GEfromDeviceHeight.part.8
0000000000488a60 T GEfromDeviceWidth
00000000004882e0 T GEfromDeviceX
00000000004883f0 T GEfromDeviceY
000000000046fe70 T GEgetDevice
0000000000488280 T GEhandleEvent
000000000048e340 T GEinitDisplayList
00000000004703a0 T GEkillDevice
0000000000488db0 T GE_LENDget
0000000000488bd0 T GE_LENDpar
0000000000489290 T GELine
0000000000489030 T GE_LJOINget
0000000000488e50 T GE_LJOINpar
000000000048eb40 T GE_LTYget
000000000048e890 T GE_LTYpar
00000000004f3d90 T GEMathText
000000000048b4c0 T GEMetricInfo
000000000048b230 T GEMode
00000000008912e4 b GenerateCode
00000000005af220 t generate_far_jump_code
000000000048df90 T GENewPage
0000000000894388 b gen_gc_counts
0000000000894468 b gen_name.11301
000000000048e710 T GEonExit
0000000000489f90 T GEPath
000000000048e100 T GEplayDisplayList
000000000048e450 T GEplaySnapshot
0000000000489650 T GEPolygon
0000000000489430 T GEPolyline
000000000048b290 T GEPretty
000000000048a0d0 T GERaster
000000000048e050 T GErecordGraphicOperation
000000000048e020 T GErecording
0000000000489ce0 T GERect
00000000004880a0 T GEregisterSystem
0000000000488060 T GEregisterWithDevice
00000000004890d0 T GESetClip
000000000048b870 T GEStrHeight
000000000048e780 T GEstring_to_pch
000000000048de00 T GEStrMetric
000000000048b6c0 T GEStrWidth
000000000048c910 T GESymbol
0000000000488050 T GEsystemState
0000000000456830 t getActiveSink
000000000048fb40 t getActiveValue
0000000000433870 t getAttrib0
00000000004539b0 t get_byte
0000000000511c80 t GetChar.part.0
00000000005b0550 t get_class_iterator_size
0000000000456440 T getConnection
0000000000456860 t getConnection_no_err
00000000004d1760 t get_current_mem
                 U getcwd@@GLIBC_2.2.5
00000000004855f0 t get_duplicate_counter
                 U getenv@@GLIBC_2.2.5
                 U geteuid@@GLIBC_2.2.5
000000000048b9c0 T GEText
00000000005b0290 t get_framesize
000000000057a0d0 t getFullDLLPath
                 U getgrgid@@GLIBC_2.2.5
                 U gethostbyname@@GLIBC_2.2.5
000000000057ab90 T getInputHandler
                 U getlogin@@GLIBC_2.2.5
0000000000453a50 t getLong
00000000004bdda0 t getNc
00000000004d6190 t GetNewPage
00000000004d9550 t GetObject
0000000000488b70 T GEtoDeviceHeight
0000000000488ac0 T GEtoDeviceWidth
0000000000488380 T GEtoDeviceX
0000000000488490 T GEtoDeviceY
0000000000520980 t GetOneIndex
0000000000419ee0 t get_package_CEntry_table
000000000051d2f0 t getParseContext
                 U getpid@@GLIBC_2.2.5
0000000000413c7f t getPrimitive.isra.14.part.15
00000000004d9330 T getPRIMNAME
                 U getpwuid@@GLIBC_2.2.5
                 U getrlimit@@GLIBC_2.2.5
000000000041d140 t GetRNGkind
000000000041db50 T GetRNGstate
                 U getrusage@@GLIBC_2.2.5
000000000041cdd0 t GetSeedsFromVar
000000000057adf0 T getSelectedHandler
000000000088a378 b gets_sym.11086
000000000057a160 t getSystemError
00000000005943a0 t get_ucp
                 U getuid@@GLIBC_2.2.5
0000000000520710 t get_workspace_name
00000000004881b0 T GEunregisterSystem
000000000048a190 T GEXspline
000000000057e050 t gf2_matrix_square
000000000087a000 d _GLOBAL_OFFSET_TABLE_
                 U globfree@@GLIBC_2.2.5
                 U glob@@GLIBC_2.2.5
00000000004eb500 t GlyphBBox
                 w __gmon_start__
                 U gmtime@@GLIBC_2.2.5
                 U GOMP_parallel_end@@GOMP_1.0
                 U GOMP_parallel_start@@GOMP_1.0
0000000000497e10 t gotoExitingHandler
0000000000518120 t greater
00000000004b6270 t growData
00000000004b5fb0 t growID
00000000004b6920 t GrowList
0000000000414ac8 t gsumln
0000000000607bc0 r guess
0000000000468f50 t guess_offset
00000000004525f0 t gzcon_byte
0000000000453f60 t gzcon_close
0000000000454e70 t gzcon_fgetc
0000000000453490 t gzcon_open
0000000000454b00 t gzcon_read
0000000000453dc0 t gzcon_write
0000000000459250 t gzfile_close
00000000004524d0 t gzfile_fflush
0000000000455ab0 t gzfile_fgetc_internal
0000000000458ea0 t gzfile_open
0000000000455af0 t gzfile_read
0000000000455c50 t gzfile_seek
0000000000455ba0 t gzfile_write
0000000000631c60 r h.4229
0000000000587190 t handle_compress.isra.2
00000000004cd9f0 t handleInterrupt
000000000057a810 t handleInterrupt
00000000004cda10 t handlePipe
000000000057a290 t handleSelectInterrupt
000000000046bfc0 t hasAttributes
0000000000505690 t HashAdd
0000000000512190 t HashAdd.isra.14
0000000000490070 t hashIndex.isra.3
00000000005334b0 t HashLookup
00000000004d2df0 T HASHTAB
00000000004909c0 t HashTableNames
0000000000533bd0 t HashTableSetup
00000000004908f0 t HashTableSize
0000000000490c40 t HashTableValues
000000000043a570 t HasNames
00000000004667a0 t have_broken_mktime
0000000000882b14 d HaveHOME
00000000005f9af0 r HexDigits
000000000088a508 b hi
                 U history_truncate_file
000000000088a510 b hr
                 U hypot@@GLIBC_2.2.5
000000000088a484 b i1.11609
000000000088a490 b i.11608
000000000088a448 b i.11681
000000000088a430 b i.11702
00000000005629e0 T i1mach_
000000000088a480 b i2.11610
0000000000558590 t I_bessel.isra.0
00000000005174a0 t icmp
                 U iconv_close@@GLIBC_2.2.5
                 U iconv@@GLIBC_2.2.5
                 U iconv_open@@GLIBC_2.2.5
0000000000891310 b identifier
0000000000533ae0 t iequal
000000000096c570 b ifp
000000000088a398 b if_sym.11082
00000000005331a0 t ihash
000000000088e460 b immediateWarning
0000000000511d90 t InBytesConn
0000000000511cb0 t InBytesFile
0000000000511ed0 t InBytesMem
00000000005125b0 t InCharConn
0000000000511c40 t InCharFile
0000000000511f30 t InCharMem
0000000000507220 t InCHARSXP.isra.30
0000000000505ed0 t InComplexAscii
00000000005069a0 t InComplexBinary
0000000000506da0 t InComplexXdr
00000000006373c0 r incs
0000000000624ec0 r incs
0000000000505dc0 t InDoubleAscii
000000000088e46c b inError
                 U inet_ntoa@@GLIBC_2.2.5
0000000000583a00 T inflateGetDictionary
00000000005818d0 T inflateResetKeep
00000000005057f0 t InInitXdr
0000000000512b30 t InInteger
0000000000507170 t InIntegerAscii
0000000000506a40 t InIntegerBinary
0000000000506f80 t InIntegerXdr
00000000004125b8 T _init
0000000000879c90 t __init_array_end
0000000000879c88 t __init_array_start
000000000041a2f0 t InitDynload
00000000004561a0 t init_filters
00000000005b3700 t init_frame.isra.37
0000000000891320 b initialized
00000000008913d0 b initialized
000000000096be40 b initialized
000000000096e5a0 b initialized
00000000004e3320 t Init_R_Variables
0000000000433450 t init_slot_handling
000000000057aad0 T initStdinHandler
000000000088e464 b inPrintWarnings
00000000005129a0 t InReal
00000000005069f0 t InRealBinary
0000000000506e00 t InRealXdr
0000000000486530 t inside
00000000004c9210 t inspect_tree
00000000004b6750 t install_and_save
0000000000433360 t installAttrib
0000000000512280 t InString
0000000000505f10 t InStringAscii
0000000000506a90 t InStringBinary
0000000000514170 t InStringVec
0000000000506fc0 t InStringXdr
0000000000528a40 t int_arraySubscript
00000000004d2080 T INTEGER
0000000000439c20 t IntegerAnswer
0000000000501d10 t integer_relop
0000000000526dc0 t integerSubscript
0000000000505390 t InTermXdr
00000000004d2c00 T INTERNAL
00000000004c9ec0 t internet_Init
0000000000538a70 t intern_getwd
00000000004865a0 t intersect
00000000005485f0 T interv_
000000000053ea50 T intpr_
00000000004f74a0 t intpr0_
00000000005007c0 t inttomb
0000000000413eea t InvalidAccent
0000000000531ed0 t invalidate_cached_recodings
00000000004fed70 t invalid.isra.0
0000000000499e90 t invokeRestart
000000000088e468 b inWarning
00000000005128e0 t InWord.constprop.33
0000000000891090 b iob
00000000005df3a0 R _IO_stdin_used
0000000000517500 t iPsort2
00000000004d3230 t IS_ACTIVE_BINDING
00000000005932e0 t is_anchored
00000000004d3300 t IS_ASCII
                 U isatty@@GLIBC_2.2.5
00000000004d32e0 t IS_BYTES
00000000004d3380 T IS_CACHED
0000000000594520 t is_counted_repeat.part.0
000000000052fd10 t isDir
00000000005332e0 t isDuplicated
00000000004d32f0 t IS_LATIN1
0000000000421540 t islistfactor
00000000004d1f70 T IS_LONG_VEC
00000000004dc3a0 t isMethodsDispatchOn
                 U __isnan@@GLIBC_2.2.5
                 U __isnanl@@GLIBC_2.2.5
0000000000538850 t isort_with_index
00000000004d1eb0 T IS_S4_OBJECT
0000000000593450 t is_startline
00000000004d3310 t IS_UTF8
                 U iswalnum@@GLIBC_2.2.5
                 U iswalpha@@GLIBC_2.2.5
                 U iswblank@@GLIBC_2.2.5
                 U iswcntrl@@GLIBC_2.2.5
                 U iswctype@@GLIBC_2.2.5
                 U iswdigit@@GLIBC_2.2.5
                 U iswgraph@@GLIBC_2.2.5
                 U iswlower@@GLIBC_2.2.5
                 U iswprint@@GLIBC_2.2.5
                 U iswpunct@@GLIBC_2.2.5
                 U iswspace@@GLIBC_2.2.5
                 U iswupper@@GLIBC_2.2.5
                 U iswxdigit@@GLIBC_2.2.5
00000000004ebc20 t ItalicAtom
                 w _ITM_deregisterTMCloneTable
                 w _ITM_registerTMCloneTable
000000000088a460 b j.11682
000000000088a3f0 b j.11703
00000000005598a0 t J_bessel.isra.0
0000000000879c98 d __JCR_END__
0000000000879c98 d __JCR_LIST__
00000000005af6f0 t jit_machine_stack_exec
0000000000463500 t jumpfun
0000000000499f70 t jump_to_top_ex
                 w _Jv_RegisterClasses
000000000096be80 b k1.4195
000000000096be78 b k2.4196
000000000096bfc4 b k.4228
000000000055ad30 t K_bessel.isra.0
0000000000600740 r keynames
0000000000603060 r keywords
000000000096bf80 b kl.4241
0000000000607a00 r known
0000000000891468 B known_to_be_latin1
0000000000891464 b known_to_be_utf8
000000000096bf78 b kr.4242
0000000000882a28 d ks.4225
000000000096c178 b l.4179
000000000096bf70 b lamdl.4243
000000000096bf68 b lamdr.4244
00000000004334b0 t lang2str.isra.0
000000000087b6ec d last.9701
000000000088c0f8 b last_cex.13687
000000000088c100 b last_close.13685
000000000088c108 b last_dd.13683
000000000087b6e0 d last_face.13686
000000000088c020 b last_family.13692
000000000088bfe0 b last_ipch.13889
0000000000969e00 b lastname
000000000088bfe8 b last_pch.13888
000000000088c0f0 b last_ps.13688
000000000089147c b latin1locale
000000000096be30 b latin1_obj
000000000096be10 b latin1_wobj
0000000000635ce0 r lbase.4213
00000000005519f0 T lbfgsb
000000000088a368 b lbrace_sym.11088
0000000000895e2c b lc.4033
000000000088a5c0 b ld1.15112
                 U ldexp@@GLIBC_2.2.5
00000000006353e0 r lenfix.4301
00000000004d87f0 T LENGTH
0000000000896f88 b length_op.11292
00000000008937c8 b length_op.7965
0000000000533ab0 t lequal
00000000004d1d10 T LEVELS
0000000000635ca0 r lext.4214
000000000055dd00 t lfastchoose2
                 U lgamma@@GLIBC_2.2.5
0000000000533180 t lhash
00000000005df380 T __libc_csu_fini
00000000005df2f0 T __libc_csu_init
0000000000883800 B __libc_stack_end@@GLIBC_2.2.5
                 U __libc_start_main@@GLIBC_2.2.5
00000000005f9c80 r lineend
00000000005f9c40 r linejoin
000000000049d2c0 t lineprof
00000000005f9b20 r linetype
                 U link@@GLIBC_2.2.5
0000000000438fa0 t ListAnswer
00000000004e2390 t list_dirs
00000000004e2c90 t list_files
0000000000517db0 t listgreater
0000000000517f60 t listgreaterl
000000000096c1f4 b list_index.13415
0000000000553740 t lltslv
00000000005498f0 t lnsrlb
00000000004ae7f0 t loadCompilerNamespace
0000000000883ca0 b LoadedDLL
00000000008829e8 d LoadInitFile
000000000057a1a0 t loadLibrary
00000000008829ec d LoadSiteFile
00000000004cb4d0 T locale2charset
                 U localeconv@@GLIBC_2.2.5
0000000000469210 t localtime0.isra.1
                 U localtime@@GLIBC_2.2.5
00000000004d3260 t LOCK_BINDING
                 U log10@@GLIBC_2.2.5
0000000000565a30 T log1pexp
                 U log1p@@GLIBC_2.2.5
                 U log1pl@@GLIBC_2.2.5
                 U log2@@GLIBC_2.2.5
0000000000429460 t logbase
0000000000564080 t logcf.constprop.4
                 U log@@GLIBC_2.2.5
00000000004d2040 T LOGICAL
0000000000439a80 t LogicalAnswer
0000000000526be0 t logicalSubscript
                 U logl@@GLIBC_2.2.5
000000000057e4c0 t longest_match
                 U __longjmp_chk@@GLIBC_2.11
0000000000533210 t Lookup
00000000004b1fe0 t loopWithContext
000000000088a370 b lpar_sym.11087
                 U lseek@@GLIBC_2.2.5
00000000005f58a0 r ltnames
                 U __lxstat@@GLIBC_2.2.5
                 U lzma_alone_decoder@@XZ_5.0
                 U lzma_code@@XZ_5.0
                 U lzma_crc64@@XZ_5.0
                 U lzma_end@@XZ_5.0
                 U lzma_lzma_preset@@XZ_5.0
                 U lzma_raw_decoder@@XZ_5.0
                 U lzma_raw_encoder@@XZ_5.0
                 U lzma_stream_decoder@@XZ_5.0
                 U lzma_stream_encoder@@XZ_5.0
000000000096c17c b m.4180
000000000096bfc0 b m.4229
000000000096bef8 b m.4894
                 U madvise@@GLIBC_2.2.5
00000000005e0618 r mag01.10558
0000000000418a70 T MAIN_
0000000000418a80 T MAIN__
0000000000418960 T main
0000000000418a90 T __main
000000000054a830 t mainlb
00000000005bbaa0 t mainloop_entry
00000000005914b0 t mainSort
0000000000505640 t MakeHashTable
0000000000468e90 t makelt
00000000004b59c0 t makeSrcref
                 U malloc@@GLIBC_2.2.5
00000000004d1cd0 T MARK
000000000059cf50 t match
0000000000535950 T match5
00000000004d0c30 t matchPar_int
000000000059cb20 t match_ref
0000000000533730 t match_transform
0000000000423120 t math1
0000000000423440 t math2
0000000000423920 t math2_1
0000000000423e50 t math2_2
0000000000426590 t math2B
0000000000424390 t math3_1
0000000000424b20 t math3_2
00000000004270d0 t math3B
0000000000425290 t math4_1
0000000000425c00 t math4_2
0000000000429580 T matherr
00000000004f76a0 t MatrixColumnLabel
00000000004f7730 t MatrixRowLabel
000000000087b814 D max_contour_segments
000000000096bfb8 b maxjx.4231
00000000008944bc b maxMethodsOffset
000000000088c120 b max_points
00000000004b7000 t mbcs_get_next
0000000000891480 B mbcslocale
000000000053b8e0 T mbcsToUcs2
000000000053bab0 t mbcsValid
                 U mbrtowc@@GLIBC_2.2.5
                 U __mbstowcs_chk@@GLIBC_2.4
                 U mbstowcs@@GLIBC_2.2.5
                 U memchr@@GLIBC_2.2.5
                 U memcmp@@GLIBC_2.2.5
                 U __memcpy_chk@@GLIBC_2.3.4
                 U memcpy@@GLIBC_2.14
0000000000413d26 t mem_err_cons
0000000000413ec7 t mem_err_heap.isra.3
                 U __memmove_chk@@GLIBC_2.3.4
                 U memmove@@GLIBC_2.2.5
                 U memset@@GLIBC_2.2.5
000000000046bf90 T memtrace_report
0000000000894470 b meth_classEnv.11153
000000000096bfbc b minjx.4230
00000000004d2410 T MISSING
0000000000413b95 t MISSING_ARGUMENT_ERROR.isra.4
00000000004548f0 t mkCharLocal
00000000004bda80 t mkCharWLen
                 U mkdir@@GLIBC_2.2.5
                 U mkdtemp@@GLIBC_2.2.5
                 U mkfifo@@GLIBC_2.2.5
0000000000497d60 t mkHandlerEntry
0000000000484a30 t mkPRIMSXP
0000000000533b50 t MKsetup
0000000000469590 t mktime0
00000000004664a0 t mktime00
                 U mktime@@GLIBC_2.2.5
                 U mmap@@GLIBC_2.2.5
00000000004b6dd0 t modif_token.isra.1
000000000087b4e0 d month_name
00000000005f5920 r __mon_yday
00000000006007f0 r mouseHandlers
000000000088a428 b mp.11706
000000000088a420 b ms.11707
000000000087a9ac d mti
00000000005decd0 t __muldc3
                 U munmap@@GLIBC_2.2.5
000000000096c020 b muprev2.4197
000000000096c198 b muprev.4196
00000000004eb7b0 t MuSpace
0000000000422f90 t myfloor
0000000000423010 t myfmod
0000000000442cd0 t mystrcpy
0000000000882a34 D N01_kind
000000000088a464 b n.11683
000000000096bfcc b n1.4232
0000000000882a30 d n1s.4226
000000000096bfc8 b n2.4233
0000000000882a2c d n2s.4227
00000000004d1cf0 T NAMED
00000000004eba50 t NameMatch.part.15
0000000000905de0 b names
00000000004cb200 t namewalk
000000000088bfa8 b NaokSymbol
000000000096c1f0 b ncomp.13416
                 U nearbyint@@GLIBC_2.2.5
                 U nearbyintl@@GLIBC_2.2.5
00000000004139a6 t needsparens.isra.1
0000000000486ad0 t negative_s1_influence
0000000000486b40 t negative_s2_influence
00000000004577e0 t newbzfile
0000000000507870 t NewDataLoad
0000000000505380 t newdataload_cleanup
0000000000508040 t NewDataSave
0000000000505360 t newdatasave_cleanup
0000000000439f60 t NewExtractNames
0000000000457ea0 t newfile.constprop.26
000000000096d5a0 b newFileName
00000000004576a0 t newgzfile
00000000004d9790 t newintoold
00000000004c6840 t neWithNaN
00000000004b6aa0 t NewList
0000000000506560 t NewLookup
0000000000506620 t NewMakeLists
0000000000439dc0 t NewName
0000000000457a90 t newouttext
0000000000507260 t NewReadItem
0000000000457d90 t newterminal
00000000004d79f0 t NewWeakRef
0000000000507a90 t NewWriteItem
0000000000457920 t newxzfile
00000000004b6d20 t NextArg
00000000004556c0 t NextConnection
000000000044e860 t nexth
00000000005b01e0 t next_opcode.isra.18
                 U nl_langinfo@@GLIBC_2.2.5
00000000004ce180 t nl_Rdummy
00000000005504a0 T nmmin
000000000088a528 b nn
000000000060c960 r NodeClassSize
0000000000413b56 t nodeStackOverflow
000000000057a280 t nop
000000000041ddf0 t Norm_kind
00000000005761a0 T norm_rand
000000000088c124 b npoints
000000000096bee8 b npq.4881
00000000008911e4 b npush
0000000000882a18 d nsave.4893
00000000004524b0 t null_close
00000000004527d0 t null_destroy
000000000088bb80 b nullDevice
00000000004524c0 t null_fflush
00000000004819f0 t null_fflush
0000000000452740 t null_fgetc
00000000004527a0 t null_open
00000000004526b0 t null_read
0000000000452710 t null_seek
0000000000481a20 t null_seek
0000000000527030 t nullSubscript
00000000004526e0 t null_truncate
0000000000452770 t null_vfprintf
0000000000481a40 t null_vfprintf
0000000000452680 t null_write
0000000000481a00 t null_write
0000000000883860 b NumCommandLineArgs
00000000004b8a20 t NumericValue
000000000088c200 b numGraphicsSystems
000000000096c578 b num_initialized
0000000000894394 b num_old_gens_to_collect
00000000004d1cc0 T OBJECT
0000000000506b40 t OffsetToNode
0000000000882a10 d olda.4197
0000000000882a08 d oldb.4198
000000000096c490 b oldSigintHandler
000000000096c018 b omega.4194
000000000088a418 b omp.11710
                 U omp_get_num_threads@@OMP_1.0
                 U omp_get_thread_num@@OMP_1.0
00000000004ebb60 t OpAtom
                 U __open_2@@GLIBC_2.7
                 U opendir@@GLIBC_2.2.5
000000000088e4a0 b opinfo
00000000006143c0 r OpTable
00000000005544b0 T optif9
000000000088a540 b opt_lzma.15826
0000000000553f00 t opt_stop.isra.0.part.1
0000000000635be0 r order.4330
000000000051b080 t orderVector1
0000000000518340 t orderVector1l
0000000000519450 t orderVector.constprop.1
00000000008943b0 b orig_R_NSize
00000000008943a8 b orig_R_VSize
000000000088a450 b oti.11684
000000000088a458 b otr.11685
00000000008825e0 d outbuff.10327
00000000005126c0 t OutBytesBB
0000000000512490 t OutBytesConn
0000000000512450 t OutBytesFile
0000000000512840 t OutBytesMem
0000000000512680 t OutCharBB
0000000000512520 t OutCharConn
0000000000511c30 t OutCharFile
00000000005128a0 t OutCharMem
00000000004142da t OutCHARSXP.isra.6.part.7
00000000005064d0 t OutComplexAscii
0000000000506c10 t OutComplexXdr
000000000087b860 D OutDec
0000000000506410 t OutDoubleAscii
00000000005057b0 t OutInitXdr
0000000000514680 t OutInteger
00000000005063b0 t OutIntegerAscii
0000000000506e40 t OutIntegerXdr
00000000004142f6 t OutIntegerXdr.part.22
00000000005053f0 t OutNewlineAscii
00000000005144b0 t OutReal
0000000000506c80 t OutRealXdr
0000000000505400 t OutSpaceAscii
0000000000511f70 t OutString
0000000000505430 t OutStringAscii
0000000000515ac0 t OutStringVec
0000000000506e70 t OutStringXdr
00000000005053c0 t OutTermXdr
0000000000455320 t outtext_close
000000000088b778 b OutTextData
0000000000454f10 t outtext_destroy
00000000004bde30 t ovector_extract_start_length
000000000096c168 b p0.4189
000000000096c2e0 b p1.13363
000000000096bf60 b p1.4245
0000000000632260 r p1.4755
000000000096bee0 b p1.4882
000000000096c200 b p2.13364
000000000096bf58 b p2.4246
000000000096bea8 b p2.4883
000000000096bf50 b p3.4247
000000000096bea0 b p3.4884
0000000000630760 r p.4180
000000000096c170 b p.4190
0000000000630e80 r p.4202
0000000000630320 r p.4244
000000000096be98 b p4.4885
000000000046c510 t parenthesizeCaller.part.2
00000000004b5960 t ParseContextClear
00000000004b6410 t ParseContextInit
000000000051d5d0 T parseError
0000000000891260 b ParseState
                 U pclose@@GLIBC_2.2.5
00000000005d1350 T pcre_assign_jit_stack
000000000096e5e8 B pcre_callout
000000000059cb10 T pcre_compile
000000000059bbe0 T pcre_compile2
000000000064f780 R _pcre_default_tables
00000000005ad9c0 T pcre_exec
0000000000595dd0 T _pcre_find_bracket
0000000000883790 D pcre_free
00000000005d2bc0 T pcre_free_study
00000000005aef50 T pcre_fullinfo
000000000063f400 R _pcre_hspace_list
00000000005d1740 T _pcre_is_newline
00000000005cdaf0 T _pcre_jit_compile
00000000005d0e90 T _pcre_jit_exec
00000000005d1020 T pcre_jit_exec
00000000005d1190 T _pcre_jit_free
00000000005d11d0 T _pcre_jit_get_size
00000000005d11e0 T _pcre_jit_get_target
00000000005d11f0 T pcre_jit_stack_alloc
00000000005d1320 T pcre_jit_stack_free
00000000005d1370 T pcre_maketables
0000000000883798 D pcre_malloc
000000000063f460 R _pcre_OP_lengths
00000000005d1b70 T _pcre_ord2utf
0000000000883780 D pcre_stack_free
0000000000883788 D pcre_stack_malloc
00000000004bdee0 t pcre_string_adj
00000000005d2c00 T pcre_study
000000000064f5a0 R _pcre_ucd_caseless_sets
000000000064e200 R _pcre_ucd_records
000000000064c000 R _pcre_ucd_stage1
000000000063f500 R _pcre_ucd_stage2
000000000063f280 R _pcre_ucp_gbtable
000000000063f2c0 R _pcre_ucp_gentype
000000000063f240 R _pcre_ucp_typerange
000000000063f3c0 R _pcre_utf8_table1
000000000063f3b8 R _pcre_utf8_table1_size
000000000063f3a0 R _pcre_utf8_table2
000000000063f380 R _pcre_utf8_table3
000000000063f340 R _pcre_utf8_table4
000000000063eaa0 R _pcre_utt
000000000063ee20 R _pcre_utt_names
000000000063ea80 R _pcre_utt_size
00000000005d2f70 T _pcre_valid_utf
000000000063f3e0 R _pcre_vspace_list
00000000005d1960 T _pcre_was_newline
00000000005d3310 T _pcre_xclass
0000000000563d80 t pd_lower_cf.part.1
00000000005b7f00 t peek_char
0000000000564510 t pgamma_raw
000000000088a518 b pi
0000000000453460 t pipe_close
0000000000456d40 t pipe_open
000000000088bf98 b PkgSymbol
00000000004ebc70 t PlainAtom
00000000005662c0 t pnbeta2
0000000000565c20 t pnbeta_raw
00000000005667c0 t pnchisq_raw
00000000004886e0 t point_adding
0000000000486e80 t point_computing
000000000044e9b0 t polyev
                 U popen@@GLIBC_2.2.5
000000000057a7b0 t popReadline.part.0
0000000000486bf0 t positive_s1_influence
0000000000486d40 t positive_s2_influence
000000000063a460 r posix_class_maps
000000000063a508 r posix_name_lengths
000000000063a520 r posix_names
000000000063a2c0 r posix_substitutes
                 U pow@@GLIBC_2.2.5
                 U powl@@GLIBC_2.2.5
00000000004c91c0 t pp
000000000096c040 b pp.4188
00000000005845c0 t pqdownheap
000000000088a520 b pr
00000000004d2fb0 T PRCODE
00000000004d2fc0 T PRENV
0000000000891120 b prevbytes
0000000000891160 b prevcols
00000000008911a0 b prevlines
00000000008910e0 b prevparse
00000000008911e0 b prevpos
000000000088bfb8 b PrimCache.7953
00000000004d32a0 T PRIMFUN
00000000008944a8 b prim_generics
00000000008944b0 b prim_methods
00000000008944a0 b prim_mlist
00000000004d3290 T PRIMVAL
000000000046c120 t print2buff
00000000004f5570 t printAttributes
000000000046c350 t printcomment
00000000004f8a00 t printComplexMatrix
0000000000894620 b printcount.9403
                 U __printf_chk@@GLIBC_2.3.4
00000000004f5ed0 t PrintGenericVector
00000000004f81a0 t printIntegerMatrix
00000000004f40a0 t PrintLanguageEtc
00000000004f77c0 t printLogicalMatrix
00000000004d2be0 T PRINTNAME
00000000004f9030 t printRawMatrix
00000000004f8590 t printRealMatrix
00000000004f42f0 t PrintSpecial.isra.0
00000000004f7bb0 t printStringMatrix
00000000004f9f80 t printStringVector
0000000000549730 t prn3lb.isra.1
000000000041bff0 t process_Renviron
000000000041c800 T process_site_Renviron
000000000041c730 T process_system_Renviron
000000000041c930 T process_user_Renviron
0000000000548990 t projgr
00000000008937c4 b prompt_type
0000000000463280 t protectedEval
00000000004d2fe0 T PRSEEN
0000000000553e40 t prt_result
00000000004d2fd0 T PRVALUE
0000000000882a20 d psave.4892
000000000088a3b8 b pseudo_NULL
0000000000517ac0 t Psort
0000000000517ca0 t Psort0
0000000000529490 t pstrmatch
                 U pthread_kill@@GLIBC_2.2.5
                 U pthread_mutex_lock@@GLIBC_2.2.5
                 U pthread_mutex_unlock@@GLIBC_2.2.5
                 U pthread_self@@GLIBC_2.2.5
000000000087b6f0 d ptr
00000000008913d8 b ptr
0000000000905ac0 b ptr
0000000000882b18 d ptr
000000000088a3e0 b ptr_col2name
000000000096edd8 B ptr_do_dataentry
000000000096ee38 B ptr_do_dataviewer
000000000096ee18 B ptr_do_selectlist
0000000000891300 b ptr_getc
000000000096ee08 B ptr_R_addhistory
000000000096ed98 B ptr_R_Busy
000000000096ed90 B ptr_R_ChooseFile
000000000096edb0 B ptr_R_CleanUp
000000000096ee28 B ptr_R_ClearerrConsole
000000000096eda8 B ptr_R_EditFile
000000000096ed88 B ptr_R_EditFiles
000000000096ee00 B ptr_R_FlushConsole
000000000088a3e8 b ptr_RGBpar3
000000000088a3d8 b ptr_R_GE_str2col
000000000096eda0 B ptr_R_loadhistory
000000000096edc8 B ptr_R_ProcessEvents
000000000096edc0 B ptr_R_ReadConsole
000000000096edf8 B ptr_R_ResetConsole
000000000096ee20 B ptr_R_savehistory
000000000096ee30 B ptr_R_ShowFiles
000000000096ee10 B ptr_R_ShowMessage
000000000096edd0 B ptr_R_Suicide
000000000096edf0 B ptr_R_WriteConsole
000000000096ede0 B ptr_R_WriteConsoleEx
000000000088a3d0 b ptr_savePalette
0000000000891200 b pushback
000000000041dcc0 T PutRNGstate
00000000004bc650 t PutSrcRefState
0000000000548a40 t pvector
000000000088a4a8 b pvi
000000000088a4b0 b pvr
000000000096bf20 b q0.4200
0000000000632220 r q1.4756
0000000000631a60 r q.4178
0000000000630720 r q.4181
000000000096c160 b q.4191
0000000000630e40 r q.4203
00000000006302e0 r q.4245
000000000088a4e8 b qhi
000000000088a4f0 b qhr
000000000096bf00 b qn.4886
000000000088a4f8 b qpi
000000000088a500 b qpr
0000000000553d80 t qraux2
00000000004fe380 T qsort3_
00000000004fde90 T qsort4_
                 U qsort@@GLIBC_2.2.5
00000000004eb610 t Quad
0000000000894490 b quick_method_check_ptr
000000000046c5c0 t quotify
000000000088a400 b r1.11704
000000000088a3f8 b r2.11705
00000000006302a0 r r.4246
000000000057dd80 t R_access_X11
000000000096e8e0 B R_AccuracyInfo
0000000000491fc0 t R_AddGlobalCache
000000000088ec18 b R_AddSym
00000000004d0200 T R_addTaskCallback
                 U raise@@GLIBC_2.2.5
00000000004d7d40 T R_alloc
00000000004d33b0 T R_AllocStringBuffer
000000000041cb70 t ran_array
                 U rand@@GLIBC_2.2.5
00000000004fe9c0 t random1
00000000004fea50 t random2
000000000088ebb0 b R_AndSym
000000000041cc40 t ran_start
000000000053c9e0 T R_atof
00000000004d20c0 T RAW
0000000000439960 t RawAnswer
0000000000452540 t raw_close
0000000000452840 t raw_destroy
0000000000533b10 t rawequal
0000000000452560 t raw_fgetc
0000000000533200 t rawhash
0000000000452530 t raw_open
0000000000453c80 t rawRead
0000000000455490 t raw_read
0000000000455ef0 t raw_seek
0000000000452550 t raw_truncate
0000000000456210 t raw_write
00000000004d3570 T R_BadLongVector
000000000096e940 B R_BaseEnv
000000000096e8b0 B R_BaseNamespace
000000000088c208 b R_BaseNamespaceName
00000000004b3290 T R_bcDecode
00000000004b3180 T R_bcEncode
000000000096eb10 b R_BCNodeStackBase
000000000096ed10 b R_BCNodeStackEnd
000000000096ea70 b R_BCNodeStackTop
0000000000429ad0 t R_binary
0000000000495bc0 T R_BindingIsActive
0000000000495ac0 T R_BindingIsLocked
000000000096e9a8 B R_BlankString
000000000096e930 B R_BraceSymbol
000000000096ea00 B R_Bracket2Symbol
000000000096ea40 B R_BracketSymbol
0000000000891730 b R_BrowseLines
000000000057c260 T R_Busy
000000000041b460 T R_cairoCdynload
000000000041ab40 t R_callDLLUnload
0000000000891728 b R_CBoundsCheck
0000000000530380 T RC_fopen
00000000004d1f80 T R_CHAR
000000000057ad60 T R_checkActivity
000000000057abc0 T R_checkActivityEx
00000000004dd6a0 T R_check_class_and_super
00000000004dd940 T R_check_class_etc
0000000000470490 T R_CheckDeviceAvailable
00000000004704c0 T R_CheckDeviceAvailableBool
00000000004e4720 t R_check_locale
0000000000499b30 T R_CheckStack
0000000000499c50 T R_CheckStack2
000000000049a550 T R_CheckUserInterrupt
00000000004d1a40 T R_chk_calloc
00000000004d1b10 T R_chk_free
00000000004d1aa0 T R_chk_realloc
000000000053c350 T rchkusr_
000000000057c290 t R_ChooseFile
000000000096e950 B R_ClassSymbol
000000000057b770 T R_CleanTempDir
00000000004e7220 t R_CleanTempDir2
000000000057c270 T R_CleanUp
000000000057c250 T R_ClearerrConsole
00000000004d1b80 T R_ClearExternalPtr
00000000004b3160 T R_ClosureExpr
0000000000517890 t rcmp
00000000004aea70 t R_cmpfun
000000000096eb98 b R_Collected
000000000089149c b R_CollectWarnings
000000000096e998 b R_CommentSymbol
0000000000418b90 T R_common_command_line
000000000096c480 b RComp_assignBufferSym
000000000096c470 b RComp_assignEndSym
000000000096c478 b RComp_assignStartSym
000000000096c468 b RComp_assignTokenSym
000000000096c460 b RComp_completeTokenSym
0000000000882a40 d rcompgen_active
000000000096c448 b rcompgen_rho
000000000096c458 b RComp_getFileCompSym
00000000004b2050 t R_compileAndExecute
000000000089146c b R_compile_pkgs
000000000057a4f0 t R_completion_generator
0000000000461d60 t R_compress1
0000000000461fa0 t R_compress2
00000000004624a0 t R_compress3
000000000096c450 b RComp_retrieveCompsSym
00000000004c69b0 T R_compute_identical
00000000004983d0 t R_ConciseTraceback.constprop.6
000000000045c360 T Rconn_fgetc
000000000045c480 t Rconn_getline
000000000096eb88 b R_ConnIdSymbol
000000000045c520 T Rconn_printf
0000000000891708 B R_Consolefile
000000000096e9c0 b R_ConsoleIob
00000000004fcec0 t Rcons_vprintf
000000000044e750 t R_cpow_n
0000000000519f60 T R_csort
000000000087b874 d R_CStackDir
000000000087b880 D R_CStackLimit
000000000087b878 D R_CStackStart
000000000088eb88 b R_CSym
00000000004988b0 T R_curErrorBuf
000000000088bf80 b R_CurrentDevice
000000000096e8b8 b R_CurrentExpr
000000000046bf20 t R_current_trace_state
000000000057a2c0 t R_custom_completion
00000000004348e0 T R_data_class
0000000000434b40 t R_data_class2
00000000004d2a00 T RDEBUG
000000000087b818 d R_dec_min_exponent
00000000004fd330 t R_Decode2Long
0000000000461ea0 t R_decompress1
00000000004620e0 t R_decompress2
0000000000462630 t R_decompress3
00000000004dce20 T R_deferred_default_method
0000000000520830 T R_DefParams
000000000088bd80 b R_Devices
000000000096eae8 b R_DevicesSymbol
000000000096e988 B R_DeviceSymbol
000000000096e990 B R_DimNamesSymbol
000000000096ed08 B R_DimSymbol
00000000008914a0 B R_DirtyImage
000000000088ec20 b R_disable_bytecode
0000000000891478 b R_DisableNLinBrowser
000000000088ec00 b R_DivSym
000000000041a860 t R_dlsym
0000000000434fd0 t R_do_data_class
000000000096ea30 B R_DollarSymbol
00000000004dd4c0 T R_do_MAKE_CLASS
00000000004dda50 T R_do_new_object
000000000044dd50 t R_do_set_class
00000000004382d0 T R_do_slot
00000000004385c0 T R_do_slot_assign
000000000096e898 b R_dot_Class
000000000096eaf0 B R_dot_defined
000000000096eb90 b R_DotEnvSymbol
000000000096eb08 b R_dot_Generic
000000000096ea78 b R_dot_GenericCallEnv
000000000096ea48 b R_dot_GenericDefEnv
000000000096e968 b R_dot_Group
00000000004cee80 T R_dot_Last
000000000096e880 B R_dot_Method
000000000096eb38 b R_dot_Methods
000000000096eb28 B R_DotsSymbol
000000000096eb68 B R_dot_target
000000000096ead8 b R_DoubleColonSymbol
00000000004c9f30 T Rdownload
00000000005481d0 T Rdqagi
0000000000546100 t rdqagie
00000000005482e0 T Rdqags
00000000005473a0 t rdqagse
0000000000545800 t rdqelg
0000000000545c80 t rdqk15i
0000000000547010 t rdqk21.isra.0
0000000000545640 t rdqpsrt
000000000096eb50 B R_DropSymbol
0000000000512cd0 t ReadBC1
0000000000514230 t ReadBCLang
00000000005b7370 t read_char
00000000005b7d80 t read_char8_type
                 U readdir@@GLIBC_2.2.5
                 U read@@GLIBC_2.2.5
                 U read_history
0000000000512e80 t ReadItem
0000000000512c50 t ReadLENGTH
000000000057a840 t readline_handler
0000000000882a60 d ReadlineStack
                 U readlink@@GLIBC_2.2.5
000000000096c3c0 b readMask.12004
00000000004530e0 t readOneString
00000000004d2100 T REAL
00000000004396d0 t RealAnswer
                 U realloc@@GLIBC_2.2.5
00000000004f7540 t realp0_
                 U __realpath_chk@@GLIBC_2.4
000000000053ea80 T realpr_
0000000000502030 t real_relop
00000000004b6460 t record_
00000000004b6130 t recordParents
00000000004d15d0 t RecursiveRelease
000000000057ce20 T R_EditFiles
000000000088c140 b registeredSystems
00000000004876a0 t registerOne
00000000004189e0 t register_tm_clones
000000000063def6 r reg_lmap
000000000063df05 r reg_map
0000000000413cbc t reg_report
00000000004ebbc0 t RelAtom
00000000008937e0 b release_count.11717
000000000088a410 b relstp.11709
00000000006141e0 r RelTable
0000000000433280 t removeAttrib
000000000046fef0 t removeDevice.part.0
000000000048fec0 t RemoveFromList
                 U remove@@GLIBC_2.2.5
000000000057ab00 T removeInputHandler
00000000004913b0 t RemoveVariable
000000000096eac8 B R_EmptyEnv
                 U rename@@GLIBC_2.2.5
00000000004f33d0 t RenderAbs.isra.34
00000000004f1580 t RenderBin
0000000000413f0c t RenderCommaList
00000000004ec5f0 t RenderDelim
00000000004eb9a0 t RenderDelimiter
00000000004f0c70 t RenderElement
00000000004ed6b0 t RenderFormula
00000000004ecfe0 t RenderFraction.isra.30
00000000004f1f80 t RenderGroup
00000000004f23a0 t RenderInt
00000000004f1ea0 t RenderOffsetElement
00000000004f2ab0 t RenderOp
00000000004ecdc0 t RenderOpSymbol
00000000004f3850 t RenderRel
00000000004f3320 t RenderScript
00000000004ec280 t RenderStr
00000000004eb880 t RenderSymbolChar
000000000049ccf0 t R_EndProfiling
00000000004955e0 T R_EnvironmentIsLocked
000000000050d8f0 t rep3
000000000050dbb0 t rep4
000000000049cdd0 t replaceCall
000000000063b0b0 r rep_max
000000000063b0b6 r rep_min
00000000004fd290 T REprintf
000000000088ebe0 b R_EqSym
00000000005344a0 t requal
000000000087b86c d R_ErrorCon
000000000088c450 b R_ErrorHook
0000000000485600 t reset_duplicate_counter
000000000053cba0 t resetICUcollator
0000000000497d30 t reset_inWarning
00000000004d15c0 t reset_pp_stack
0000000000497d20 t reset_stack_limit
0000000000532bf0 t resetTimeLimits
0000000000466820 t reset_tz
0000000000512750 t resize_buffer.isra.29
0000000000470ce0 t resolveNativeRoutine.isra.3
00000000008829f0 D RestoreAction
0000000000497d40 t restore_inError
0000000000506150 t RestoreToEnv
0000000000891734 b R_EvalDepth
00000000004fd130 T REvprintf
                 U rewind@@GLIBC_2.2.5
000000000096eaa8 b R_ExactSymbol
00000000004af170 t R_execClosure
00000000004af520 T R_execMethod
000000000053eae0 T rexit_
000000000053c230 T rexitc_
000000000057cf50 T R_ExpandFileName
000000000057aeb0 t R_ExpandFileName_readline
0000000000415e76 t rexpm1
000000000087b894 d R_Expressions
000000000087b890 d R_Expressions_keep
000000000088ebe8 b R_ExpSym
000000000088ebf8 b R_ExptSym
00000000004d1b50 T R_ExternalPtrAddr
00000000004d1ca0 t R_ExternalPtrAddrFn
00000000004d1b70 T R_ExternalPtrProtected
00000000004d1b60 T R_ExternalPtrTag
000000000053c360 T Rf_acopy_string
00000000004cf1e0 T Rf_addTaskCallback
000000000053c480 t Rf_AdobeSymbol2ucs2
000000000053c3a0 T Rf_AdobeSymbol2utf8
000000000042e4e0 T Rf_alloc3DArray
000000000042e5a0 T Rf_allocArray
00000000004d7e90 t Rf_allocCharsxp
00000000004d6cb0 T Rf_allocList
000000000042db80 T Rf_allocMatrix
00000000004d7030 T Rf_allocS4Object
00000000004d6770 T Rf_allocSExp
00000000004d7070 T Rf_allocVector
000000000088eb60 b R_FalseValue
0000000000534770 T Rf_any_duplicated
0000000000534950 T Rf_any_duplicated3
00000000004aeb70 T Rf_applyClosure
0000000000528cf0 T Rf_arraySubscript
00000000005390f0 T Rf_asChar
0000000000447810 T Rf_asCharacterFactor
00000000004481f0 T Rf_asComplex
0000000000447f60 T Rf_asInteger
0000000000447e00 T Rf_asLogical
0000000000448090 T Rf_asReal
00000000004ddc30 T Rf_asS4
000000000043f7f0 t Rf_asVecSize
0000000000558440 t Rf_bd0
0000000000463560 T Rf_begincontext
0000000000559330 T Rf_bessel_i
0000000000559600 T Rf_bessel_i_ex
000000000055a840 T Rf_bessel_j
000000000055aad0 T Rf_bessel_j_ex
000000000055bed0 T Rf_bessel_k
000000000055c0d0 T Rf_bessel_k_ex
000000000055d500 T Rf_bessel_y
000000000055d7c0 T Rf_bessel_y_ex
000000000055da50 T Rf_beta
000000000096be90 b Rf_beta.4192
00000000004cf550 T Rf_callToplevelHandlers
000000000055dc60 t Rf_chebyshev_eval
000000000055dc10 t Rf_chebyshev_init
0000000000539e50 t Rf_check1arg
0000000000539a50 T Rf_checkArityCall
000000000049e1d0 t Rf_CheckFormals
000000000049dc70 t Rf_check_stack_balance
000000000055e030 T Rf_choose
00000000004346e0 T Rf_classgets
0000000000485e90 T Rf_CleanEd
0000000000448a50 T Rf_coerceVector
0000000000446a70 t Rf_CoercionWarning
000000000044e6f0 T Rf_col2name
0000000000446f40 t Rf_ComplexFromInteger
0000000000446f10 t Rf_ComplexFromLogical
0000000000446f70 t Rf_ComplexFromReal
0000000000446fb0 t Rf_ComplexFromString
00000000004c80b0 T Rf_conformable
000000000045f570 T Rf_con_pushback
00000000004d68a0 T Rf_cons
0000000000485880 T Rf_copyListMatrix
00000000004859f0 T Rf_copyMatrix
0000000000433ee0 T Rf_copyMostAttrib
0000000000433fc0 T Rf_copyMostAttribNoTs
0000000000485620 T Rf_copyVector
0000000000463b00 T Rf_countContexts
000000000051adb0 T Rf_cPsort
00000000004e9590 T Rf_CreateAtVector
00000000004476e0 T Rf_CreateTag
000000000046fe80 T Rf_curDevice
00000000004f73f0 t Rf_CustomPrintValue
000000000055e430 t Rf_d1mach
000000000055e470 T Rf_dbeta
000000000055ea10 T Rf_dbinom
000000000055ebc0 T Rf_dcauchy
000000000055ecc0 T Rf_dchisq
00000000004930e0 t Rf_ddfindVar
00000000004931e0 T Rf_defineVar
000000000046ee50 T Rf_deparse1
000000000046ee90 T Rf_deparse1line
000000000046f190 t Rf_deparse1s
000000000046ee70 t Rf_deparse1w
0000000000470450 T Rf_desc2GEDesc
000000000055ece0 T Rf_dexp
000000000055edd0 T Rf_df
000000000055f0e0 T Rf_dgamma
000000000055f2e0 T Rf_dgeom
000000000055f470 T Rf_dhyper
0000000000569690 T Rf_digamma
0000000000435b80 T Rf_dimgets
00000000004351b0 T Rf_dimnamesgets
00000000004b1e60 t Rf_DispatchAnyOrEval
000000000049e230 t Rf_DispatchGroup
00000000004b1a30 t Rf_DispatchOrEval
000000000055f7f0 T Rf_dlnorm
000000000055f930 T Rf_dlogis
000000000055fa40 T Rf_dnbeta
000000000055fed0 T Rf_dnbinom
0000000000560100 T Rf_dnbinom_mu
0000000000560560 T Rf_dnchisq
00000000005609a0 T Rf_dnf
0000000000560cf0 T Rf_dnorm4
0000000000560e90 T Rf_dnt
00000000004b5490 T Rf_doKeybd
00000000004b5200 T Rf_doMouseEvent
0000000000561420 T Rf_dpois
000000000046fc20 T Rf_dpptr
00000000005686d0 T Rf_dpsifn
0000000000568700 t Rf_dpsifn.part.0
000000000042e660 T Rf_DropDims
0000000000575950 T Rf_dsignrank
0000000000561530 T Rf_dt
0000000000561840 T Rf_dunif
0000000000485610 T Rf_duplicate
0000000000534590 T Rf_duplicated
0000000000561920 T Rf_dweibull
00000000005795f0 T Rf_dwilcox
00000000004c7a00 T Rf_elt
00000000004fbdd0 T Rf_EncodeComplex
00000000004fcce0 T Rf_EncodeElement
00000000004fb860 t Rf_EncodeEnvironment
00000000004fb7a0 T Rf_EncodeInteger
00000000004fb720 T Rf_EncodeLogical
00000000004fb830 t Rf_EncodeRaw
00000000004fba00 T Rf_EncodeReal
00000000004fc310 t Rf_EncodeString
0000000000463640 T Rf_endcontext
000000000057a230 T Rf_endEmbeddedR
00000000005399e0 t Rf_EnsureString
00000000004908c0 T Rf_envlength
0000000000499d70 T Rf_error
0000000000499790 T Rf_errorcall
000000000049c810 t Rf_ErrorMessage
00000000004adcb0 T Rf_eval
00000000004b0a00 t Rf_evalList
00000000004b0c90 t Rf_evalListKeepMissing
00000000004636d0 t Rf_findcontext
0000000000492fe0 T Rf_findFun
0000000000492e30 T Rf_findVar
0000000000492f00 t Rf_findVar1
0000000000492e20 T Rf_findVarInFrame
00000000004922e0 T Rf_findVarInFrame3
0000000000561ab0 T Rf_fmax2
0000000000561b00 T Rf_fmin2
00000000004b44b0 T Rf_formatComplex
00000000004b4080 T Rf_formatInteger
00000000004b4000 T Rf_formatLogical
00000000004b3f50 t Rf_formatRaw
00000000004b4140 T Rf_formatReal
00000000004b3f60 t Rf_formatString
0000000000561b50 T Rf_fprec
00000000004638b0 t Rf_framedepth
0000000000561eb0 T Rf_fround
00000000005620e0 T Rf_fsign
0000000000562160 T Rf_ftrunc
0000000000562180 t Rf_gamma_cody
0000000000562490 T Rf_gammafn
0000000000562470 t Rf_gammalims
00000000004bd6a0 T Rf_GAxisPars
00000000005276b0 t Rf_get1index
0000000000438120 T Rf_GetArrayDimnames
0000000000433670 T Rf_getAttrib
00000000004bd640 t R_fgetc
000000000052ff40 T Rf_getCharCE
000000000042db60 T Rf_GetColNames
0000000000438050 T Rf_GetMatrixDimnames
00000000004de020 T Rf_GetOption
00000000004ddfa0 T Rf_GetOption1
00000000004de0d0 t Rf_GetOptionCutoff
00000000004de130 t Rf_GetOptionDeviceAsk
00000000004de080 T Rf_GetOptionDigits
00000000004de030 T Rf_GetOptionWidth
000000000042db40 T Rf_GetRowNames
00000000004bda20 T Rf_GPretty
0000000000490790 T Rf_gsetVar
00000000005629c0 t Rf_i1mach
000000000052fd80 T R_FileExists
000000000052fdb0 t R_FileMtime
0000000000562a00 T Rf_imax2
0000000000562a10 T Rf_imin2
00000000004bc5a0 t R_FinalizeSrcRefState
00000000004fd560 t Rf_IndexWidth
00000000004963e0 T R_FindNamespace
0000000000496190 T R_FindPackageEnv
000000000041aff0 T R_FindSymbol
0000000000491d40 T R_findVarLocInFrame
00000000004c82a0 T Rf_inherits
0000000000429680 t Rf_InitArithmetic
00000000004903e0 t Rf_InitBaseEnv
0000000000457530 T Rf_init_con
00000000004603c0 t Rf_InitConnections
0000000000429670 T R_finite
0000000000485e60 t Rf_InitEd
000000000057a200 T Rf_initEmbeddedR
000000000057a1c0 t Rf_InitFunctionHashing
00000000004976a0 t Rf_InitGlobalEnv
00000000004707f0 t Rf_InitGraphics
000000000057c310 T Rf_initialize_R
00000000004d62d0 t Rf_InitMemory
00000000004d8e10 t Rf_InitNames
00000000004de270 t Rf_InitOptions
00000000004d1a30 t Rf_initStack
00000000004969d0 t Rf_InitStringHash
0000000000532340 t Rf_InitTempDir
00000000004d8cb0 T Rf_install
00000000005311c0 T Rf_installTrChar
0000000000446ca0 t Rf_IntegerFromComplex
0000000000446c30 t Rf_IntegerFromLogical
0000000000446c40 t Rf_IntegerFromReal
0000000000446d20 t Rf_IntegerFromString
000000000051ad90 T Rf_iPsort
00000000004c8790 T Rf_isArray
00000000004d9a70 T Rf_isBasicClass
0000000000539860 T Rf_isBlankString
00000000004d31e0 T Rf_isComplex
00000000004d3200 T Rf_isEnvironment
00000000004d31f0 T Rf_isExpression
00000000004c8950 T Rf_isFactor
00000000004c85d0 T Rf_isFrame
000000000053a190 T Rf_isFree
00000000004c8490 T Rf_isFunction
00000000004c8860 T Rf_isInteger
00000000004c86e0 T Rf_isLanguage
00000000004c84d0 T Rf_isList
00000000004d31c0 T Rf_isLogical
00000000004c8710 T Rf_isMatrix
00000000004c8500 T Rf_isNewList
00000000004d31a0 T Rf_isNull
00000000004c8ce0 T Rf_isNumber
00000000004c8bc0 T Rf_isNumeric
00000000004d3220 T Rf_isObject
00000000005394f0 T Rf_isOrdered
00000000004c8530 T Rf_isPairList
00000000004c84b0 T Rf_isPrimitive
00000000004d1970 T Rf_isProtected
00000000004d31d0 T Rf_isReal
00000000004ddc20 T Rf_isS4
00000000004d3210 T Rf_isString
00000000004d31b0 T Rf_isSymbol
00000000004c8810 T Rf_isTs
0000000000539320 T Rf_isUnordered
00000000005197d0 T Rf_isUnsorted
00000000004c8440 T Rf_isUserBinop
00000000004bd460 t Rf_isValidName
00000000004c8390 T Rf_isValidString
00000000004c83e0 T Rf_isValidStringF
00000000004c85a0 T Rf_isVector
00000000004c8570 T Rf_isVectorAtomic
00000000004c8f20 T Rf_isVectorizable
00000000004c8550 T Rf_isVectorList
000000000043c680 t Rf_ItemName
000000000049a590 T Rf_jump_to_toplevel
0000000000470400 T Rf_KillAllDevices
00000000004703e0 T Rf_killDevice
00000000004c7d80 T Rf_lang1
00000000004c7da0 T Rf_lang2
00000000004c7df0 T Rf_lang3
00000000004c7e60 T Rf_lang4
00000000004c7f00 T Rf_lang5
00000000004c7fc0 T Rf_lang6
00000000004c7ae0 T Rf_lastElt
0000000000562a20 T Rf_lbeta
000000000055de00 T Rf_lchoose
00000000004c7d60 T Rf_lcons
00000000004c78e0 T Rf_length
0000000000442120 T Rf_lengthgets
000000000055dd80 t Rf_lfastchoose
0000000000564350 T Rf_lgamma1p
0000000000562dd0 t Rf_lgammacor
00000000005632f0 T Rf_lgammafn
0000000000562ea0 T Rf_lgammafn_sign
00000000004c7b10 T Rf_list1
00000000004c7b20 T Rf_list2
00000000004c7b70 T Rf_list3
00000000004c7be0 T Rf_list4
00000000004c7c70 T Rf_list5
00000000004c7d20 T Rf_listAppend
0000000000564230 T Rf_log1pmx
0000000000446b70 t Rf_LogicalFromComplex
0000000000446b10 t Rf_LogicalFromInteger
0000000000446b30 t Rf_LogicalFromReal
0000000000446be0 t Rf_LogicalFromString
0000000000564430 T Rf_logspace_add
00000000005644a0 T Rf_logspace_sub
000000000041a850 t Rf_lookupCachedSymbol
000000000057c240 T R_FlushConsole
0000000000490170 t R_FlushGlobalCache
00000000004901e0 t R_FlushGlobalCacheFromTable
0000000000491950 t R_FlushGlobalCacheFromUserTable
00000000004cfb40 T Rf_mainloop
00000000004194d0 t Rf_MakeDLLInfo
0000000000528d00 t Rf_makeSubscript
000000000053b4f0 t Rf_markKnown
0000000000528240 t Rf_mat2indsub
0000000000535f30 T Rf_match
00000000004d0df0 t Rf_matchArg
00000000004d0e00 t Rf_matchArgExact
00000000004d0e20 t Rf_matchArgs
0000000000535f20 T Rf_matchE
00000000004d0de0 t Rf_matchPar
000000000053ba90 T Rf_mbrtowc
0000000000538b10 t Rf_mbrtowc.part.0
00000000005320b0 t Rf_mbtoucs
0000000000496fe0 T Rf_mkChar
0000000000496f90 T Rf_mkCharCE
0000000000496fd0 T Rf_mkCharLen
00000000004969f0 T Rf_mkCharLenCE
0000000000484b40 t Rf_mkCLOSXP
00000000004bd440 T Rf_mkFalse
00000000004c9090 T Rf_mkNamed
00000000004d6e60 t Rf_mkPROMISE
00000000004c9170 T Rf_mkString
0000000000484c10 t Rf_mkSYMSXP
00000000004bd420 t Rf_mkTrue
0000000000436850 T Rf_namesgets
0000000000538ec0 T Rf_ncols
00000000004701f0 T Rf_ndevNumber
00000000004d6d10 T Rf_NewEnvironment
0000000000470910 T Rf_NewFrameConfirm
000000000046fe90 T Rf_nextDevice
00000000004c8a60 T Rf_nlevels
000000000046fc60 T Rf_NoDevices
00000000004d0b90 T Rf_NonNullStringMatch
0000000000538d00 T Rf_nrows
0000000000539ed0 T Rf_nthcdr
000000000046fc90 T Rf_NumDevices
00000000005270a0 t Rf_OneIndex
000000000049a370 T Rf_onintr
0000000000498760 t Rf_onsigusr1
0000000000498810 t Rf_onsigusr2
000000000052fe30 T R_fopen
000000000041a350 T R_forceSymbols
000000000096e7e0 b Rf_osDynSymbol
0000000000447340 T Rf_PairToVectorList
00000000005633a0 T Rf_pbeta
0000000000563300 t Rf_pbeta_raw
00000000005634a0 T Rf_pbinom
0000000000563620 T Rf_pcauchy
0000000000563840 T Rf_pchisq
0000000000569810 T Rf_pentagamma
0000000000563860 T Rf_pexp
00000000005639a0 T Rf_pf
00000000005652c0 T Rf_pgamma
0000000000565400 T Rf_pgeom
00000000005655c0 T Rf_phyper
0000000000565950 T Rf_plnorm
0000000000565aa0 T Rf_plogis
00000000004d0d00 T Rf_pmatch
0000000000566380 T Rf_pnbeta
0000000000566480 T Rf_pnbinom
0000000000566600 T Rf_pnbinom_mu
0000000000567100 T Rf_pnchisq
00000000005672f0 T Rf_pnf
0000000000567c40 T Rf_pnorm5
00000000005674e0 T Rf_pnorm_both
0000000000567de0 T Rf_pnt
0000000000569890 T Rf_ppois
0000000000470140 T Rf_prevDevice
00000000004f98a0 t Rf_printArray
00000000004fa340 t Rf_printComplexVector
00000000004f44c0 T Rf_PrintDefaults
000000000053e610 t Rf_PrintGreeting
00000000004fa0d0 t Rf_printIntegerVector
00000000004f9420 t Rf_printMatrix
00000000004fa950 t Rf_printNamedVector
00000000004fa1f0 t Rf_printRealVector
00000000004f73c0 T Rf_PrintValue
00000000004f7220 t Rf_PrintValueEnv
00000000004f4930 t Rf_PrintValueRec
00000000004fa520 T Rf_printVector
000000000053e6d0 t Rf_PrintVersion
000000000053e500 t Rf_PrintVersion_part_1
000000000053de20 t Rf_PrintVersionString
00000000004986f0 t Rf_PrintWarnings
0000000000497f60 t Rf_PrintWarnings.part.0
000000000049de30 t Rf_promiseArgs
00000000004d17b0 T Rf_protect
0000000000569590 T Rf_psigamma
0000000000575ae0 T Rf_psignrank
00000000004d0be0 T Rf_psmatch
00000000005699a0 T Rf_pt
000000000056a0e0 T Rf_ptukey
000000000056a670 T Rf_punif
000000000056a7e0 T Rf_pweibull
00000000005797e0 T Rf_pwilcox
000000000056a980 T Rf_qbeta
000000000056b440 T Rf_qbinom
000000000056b930 T Rf_qcauchy
000000000056bb00 T Rf_qchisq
000000000056bef0 t Rf_qchisq_appr
000000000056bb20 T Rf_qexp
000000000056bcd0 T Rf_qf
000000000056c590 T Rf_qgamma
000000000056ce50 T Rf_qgeom
000000000056d0f0 T Rf_qhyper
000000000056d680 T Rf_qlnorm
000000000056d7b0 T Rf_qlogis
000000000056d9d0 T Rf_qnbeta
000000000056de80 T Rf_qnbinom
000000000056e400 T Rf_qnbinom_mu
000000000056e420 T Rf_qnchisq
000000000056ebb0 T Rf_qnf
000000000056edd0 T Rf_qnorm5
000000000056f370 T Rf_qnt
000000000056f860 T Rf_qpois
0000000000575d80 T Rf_qsignrank
000000000056fce0 T Rf_qt
0000000000570d50 T Rf_qtukey
0000000000571310 T Rf_qunif
0000000000571470 T Rf_qweibull
0000000000579ad0 T Rf_qwilcox
00000000005716b0 T Rf_rbeta
0000000000571de0 T Rf_rbinom
00000000005728d0 T Rf_rcauchy
0000000000572970 T Rf_rchisq
0000000000446e20 t Rf_RealFromComplex
0000000000446e00 t Rf_RealFromInteger
0000000000446de0 t Rf_RealFromLogical
0000000000446e90 t Rf_RealFromString
0000000000531af0 T Rf_reEnc
000000000096eac0 b R_FreeSEXP
00000000004d3490 T R_FreeStringBuffer
00000000004d34c0 t R_FreeStringBufferL
00000000004cf3c0 T Rf_removeTaskCallbackByIndex
00000000004cf320 T Rf_removeTaskCallbackByName
00000000004cf670 T Rf_ReplIteration
000000000051a3c0 T Rf_revsort
00000000005729d0 T Rf_rexp
0000000000572a40 T Rf_rf
0000000000572b10 T Rf_rgamma
000000000044e6e0 T Rf_RGBpar
000000000044e6c0 T Rf_RGBpar3
0000000000573350 T Rf_rgeom
0000000000573470 T Rf_rhyper
0000000000574450 T Rf_rlnorm
00000000005744b0 T Rf_rlogis
0000000000574790 T Rf_rnbinom
00000000005748a0 T Rf_rnchisq
00000000005749b0 T Rf_rnorm
0000000000574a50 T Rf_rpois
000000000051ada0 T Rf_rPsort
00000000005760f0 T Rf_rsignrank
0000000000575400 T Rf_rt
0000000000575490 T Rf_runif
0000000000891740 b Rf_RunningToplevelHandlers
0000000000575540 T Rf_rweibull
0000000000579ea0 T Rf_rwilcox
0000000000438130 T Rf_S3Class
00000000004c8e70 T Rf_ScalarComplex
00000000004c8e20 T Rf_ScalarInteger
00000000004c8de0 T Rf_ScalarLogical
00000000004c8f00 T Rf_ScalarRaw
00000000004c8e40 T Rf_ScalarReal
00000000004c8eb0 T Rf_ScalarString
000000000053cbb0 t Rf_Scollate
0000000000470230 T Rf_selectDevice
00000000004d34f0 t Rf_Seql
0000000000435e60 T Rf_setAttrib
0000000000456890 T Rf_set_iconv
000000000053a130 t Rf_setIVector
000000000053a150 t Rf_setRVector
000000000053a170 T Rf_setSVector
0000000000493610 T Rf_setVar
00000000005756d0 T Rf_sign
000000000051a4d0 T Rf_sortVector
000000000049dcb0 t Rf_SrcrefPrompt
000000000051a0c0 t Rf_ssort
0000000000576ef0 t Rf_stirlerr
00000000005396c0 T Rf_str2type
000000000053bd00 T Rf_strchr
0000000000539920 T Rf_StringBlank
0000000000539990 T Rf_StringFalse
0000000000447270 t Rf_StringFromComplex
0000000000447120 t Rf_StringFromInteger
00000000004470d0 t Rf_StringFromLogical
0000000000447170 t Rf_StringFromReal
0000000000539940 T Rf_StringTrue
000000000053b520 T Rf_strIsASCII
0000000000528780 t Rf_strmat2intmat
000000000053bdb0 T Rf_strrchr
00000000004d8c50 t Rf_StrToInternal
000000000044da40 T Rf_substitute
000000000044d7f0 t Rf_substituteList
0000000000569790 T Rf_tetragamma
0000000000891748 b Rf_ToplevelTaskHandlers
00000000004ca290 T R_FTPClose
00000000004ca1c0 T R_FTPOpen
00000000004ca220 T R_FTPRead
000000000052ffd0 T Rf_translateChar
0000000000531550 T Rf_translateChar0
00000000005315a0 T Rf_translateCharUTF8
0000000000569710 T Rf_trigamma
0000000000538c70 t Rf_tsConform
0000000000434260 t Rf_tspgets
0000000000539780 T Rf_type2char
0000000000539720 T Rf_type2str
0000000000531f00 T Rf_ucstomb
00000000005321a0 T Rf_ucstoutf8
0000000000490420 t Rf_unbindVar
00000000004d1860 T Rf_unprotect
00000000004d18a0 T Rf_unprotect_ptr
000000000087b900 D R_FunTab
00000000004d9b30 t Rf_usemethod
000000000053b580 t Rf_utf8toucs
000000000053b820 T Rf_utf8towcs
00000000004fd590 t Rf_VectorIndex
0000000000527f00 t Rf_vectorIndex
00000000004474c0 T Rf_VectorToPairList
000000000049b420 T Rf_warning
000000000049b390 T Rf_warningcall
000000000049b8f0 T Rf_warningcall_immediate
000000000049b7a0 t Rf_WarningMessage
000000000053ba10 t Rf_wcstoutf8
0000000000531800 t Rf_wtransChar
00000000004c7970 T Rf_xlength
0000000000441b20 T Rf_xlengthgets
000000000096e874 B Rf_yychar
000000000096e868 B Rf_yylval
000000000096e870 B Rf_yynerrs
00000000004ba200 T Rf_yyparse
00000000004d81b0 T R_gc
00000000004d3af0 t R_gc_internal
000000000088ec54 b R_GC_Profiling
00000000004d1610 T R_gc_running
00000000004d1730 T R_gc_torture
0000000000487fd0 T R_GE_checkVersionOrDie
0000000000487fc0 T R_GE_getVersion
0000000000893880 b R_GenHeap
000000000048ed00 T R_GE_rasterInterpolate
000000000048f340 T R_GE_rasterResizeForRotation
000000000048f410 T R_GE_rasterRotate
000000000048f1d0 T R_GE_rasterRotatedOffset
000000000048f050 T R_GE_rasterRotatedSize
000000000048ec40 T R_GE_rasterScale
000000000053e800 T R_GE_setVFontRoutines
000000000044e710 T R_GE_str2col
000000000088ebc0 b R_GeSym
000000000042d610 T R_get_arith_function
000000000041bef0 T R_GetCCallable
00000000004dd5b0 T R_getClassDef
000000000057d350 t R_getClockIncrement
0000000000498c90 T R_GetCurrentSrcref
000000000041a360 T R_getDllInfo
000000000041b6f0 t R_getDllTable
000000000041a3e0 T R_getEmbeddingDllInfo
00000000004d1670 t R_GetMaxNSize
00000000004d1620 t R_GetMaxVSize
000000000057d210 t R_getProcTime
000000000041b7f0 t R_getRegisteredRoutines
0000000000419d00 t R_getRoutineSymbols
0000000000438df0 t R_getS4DataSlot
0000000000498d80 T R_GetSrcFilename
000000000041b540 t R_getSymbolInfo
00000000004cf4c0 T R_getTaskCallbackNames
0000000000498920 t R_GetTraceback
0000000000490730 T R_GetVarLocMISSING
0000000000490720 t R_GetVarLocSymbol
0000000000490700 t R_GetVarLocValue
000000000057de90 T R_GetX11Image
000000000053e8c0 t R_GE_VStrHeight
000000000053e820 t R_GE_VStrWidth
000000000053e930 t R_GE_VText
000000000088c218 b R_GlobalCache
000000000088c210 b R_GlobalCachePreserve
000000000096eb20 B R_GlobalContext
000000000096eaf8 B R_GlobalEnv
0000000000882ab8 D Rg_PolledEvents
000000000044e6a0 T Rg_set_col_ptrs
000000000088ebb8 b R_GtSym
000000000087b858 D R_GUIType
000000000096c1e0 B Rg_wait_usec
00000000004590c0 T R_gzclose
0000000000459040 T R_gzgets
0000000000458b70 T R_gzopen
00000000004557e0 t R_gzread
0000000000453cd0 t R_gzwrite
000000000096eb00 b R_HandlerStack
0000000000495cb0 T R_HasFancyBindings
0000000000533690 t rhash
000000000048fb90 t R_HashGet
0000000000491d60 t R_HashResize
000000000048fc80 t R_HashSet
000000000048fa50 t R_HashSizeCheck
00000000004dcdb0 t R_has_methods
00000000004381e0 T R_has_slot
000000000052fe10 t R_HiddenFile
000000000096ead0 B R_HistoryFile
000000000096ea88 B R_HistorySize
000000000096ea18 B R_Home
000000000052fe50 T R_HomeDir
00000000004ca160 T R_HTTPClose
00000000004ca080 T R_HTTPOpen
00000000004ca0f0 T R_HTTPRead
0000000000505200 t Ri18n_iswalnum
0000000000504f70 t Ri18n_iswalpha
0000000000504f10 t Ri18n_iswblank
0000000000504f00 t Ri18n_iswcntrl
00000000005052b0 T Ri18n_iswctype
0000000000504f60 t Ri18n_iswdigit
0000000000504f20 t Ri18n_iswgraph
0000000000504f80 t Ri18n_iswlower
0000000000504f30 t Ri18n_iswprint
0000000000504ef0 t Ri18n_iswpunct
0000000000504f40 t Ri18n_iswspace
0000000000504f90 t Ri18n_iswupper
0000000000504f50 t Ri18n_iswxdigit
0000000000505140 t Ri18n_wcswidth
00000000005051b0 T Ri18n_wctype
0000000000618b00 r Ri18n_wctype_func
0000000000504fa0 T Ri18n_wcwidth
000000000052ffb0 T Riconv
000000000052ffc0 T Riconv_close
000000000052ffa0 T Riconv_open
0000000000891460 B R_ignore_SIGPIPE
000000000087b8e8 d R_in_gc
0000000000501ce0 t R_init_base
0000000000516020 T R_InitConnInPStream
0000000000515f90 T R_InitConnOutPStream
0000000000515f70 T R_InitFileInPStream
0000000000515f40 T R_InitFileOutPStream
0000000000520740 t R_InitialData
00000000004b2f70 t R_initialize_bcode
0000000000515ef0 T R_InitInPStream
00000000004ae8b0 t R_init_jit_enabled
0000000000515f10 T R_InitOutPStream
000000000096ed80 B R_InitReadItemDepth
00000000004bc710 t R_InitSrcRefState
0000000000882b08 D R_InputHandlers
000000000049a8c0 t R_InsertRestartHandlers
00000000004c9e80 t R_inspect
00000000004c9ea0 t R_inspect3
000000000087b870 D R_Interactive
0000000000891738 B R_interrupts_pending
000000000089173c B R_interrupts_suspended
                 U rint@@GLIBC_2.2.5
00000000004cacf0 t R_IoBufferFree
00000000004cadf0 t R_IoBufferGetc
00000000004cac90 t R_IoBufferInit
00000000004cad30 t R_IoBufferPutc
00000000004cadb0 t R_IoBufferPuts
00000000004cae50 t R_IoBufferReadOffset
00000000004cac60 t R_IoBufferReadReset
00000000004cac20 t R_IoBufferWriteReset
0000000000891474 B R_isForkedChild
0000000000493e20 t R_isMissing
00000000004295f0 T R_IsNA
0000000000496210 T R_IsNamespaceEnv
0000000000429620 T R_IsNaN
0000000000429650 T R_isnancpp
0000000000519cd0 T R_isort
0000000000496000 T R_IsPackageEnv
000000000096eb78 b R_Is_Running
0000000000891470 b R_jit_enabled
0000000000463770 t R_JumpToContext
000000000089172c b R_KeepSource
0000000000888980 b R_KT_ran_arr_buf
000000000087a9a0 d R_KT_ran_arr_ptr
000000000087a9a8 d R_KT_ran_arr_sentinel
00000000008943c0 b R_LargeVallocSize
000000000096e958 B R_LastvalueSymbol
00000000008837d8 B rl_attempted_completion_function
0000000000883818 B rl_attempted_completion_over
00000000005169f0 t R_lazyLoadDBinsertValue
0000000000883840 B rl_basic_word_break_characters
                 U rl_callback_handler_install
                 U rl_callback_handler_remove
                 U rl_callback_read_char
0000000000883808 B rl_completer_word_break_characters
00000000008837c0 B rl_completion_append_character
                 U rl_completion_matches
000000000088ebc8 b R_LeSym
000000000096eb30 B R_LevelsSymbol
0000000000520540 t R_LibraryFileName
000000000088ec50 b R_Line_Profiling
00000000008837f0 B rl_line_buffer
0000000000508e00 t R_LoadFromFile
00000000004cdee0 t R_LoadProfile
000000000057a190 t R_local_dlsym
0000000000495700 T R_LockBinding
0000000000495470 T R_LockEnvironment
00000000004286c0 t R_log
00000000004148e5 t rlog1
00000000004d9950 t R_LookupMethod
0000000000883810 B rl_readline_name
0000000000490a90 T R_lsInternal
00000000008837e0 B rl_sort_completion_matches
000000000096c488 b rl_top
000000000088ebd0 b R_LtSym
0000000000495910 T R_MakeActiveBinding
00000000004d6840 T R_MakeExternalPtr
00000000004d6870 T R_MakeExternalPtrFn
00000000004d7b50 T R_MakeWeakRef
00000000004d7c90 T R_MakeWeakRefC
0000000000548620 T R_max_col
000000000087b8b8 d R_MaxNSize
000000000087b81c D R_max_num_math_threads
000000000087b8c0 d R_MaxVSize
                 U rmdir@@GLIBC_2.2.5
000000000088ec58 b R_Mem_Profiling
000000000096ea20 B R_MethodsNamespace
000000000096ea08 B R_MissingArg
000000000096ea28 B R_ModeSymbol
000000000041b360 T R_moduleCdynload
000000000041bf80 t rmspace
000000000088ec08 b R_MulSym
0000000000574550 T rmultinom
000000000096eb7c B R_NaInt
0000000000496310 T R_NamespaceEnvSpec
000000000096eb80 B R_NamespaceRegistry
000000000096ea80 B R_NamesSymbol
000000000096eb40 B R_NameSymbol
000000000096ed20 B R_NaN
000000000096e970 B R_NaReal
000000000096ea90 B R_NaRmSymbol
000000000096eb18 B R_NaString
0000000000574820 T rnbinom_mu
000000000096e888 B R_NegInf
000000000088ebd8 b R_NeSym
00000000004630a0 T R_new_custom_connection
0000000000490370 T R_NewHashedEnv
0000000000490330 t R_Newhashpjw
000000000048f8c0 t R_NewHashTable
00000000004ca000 t R_newsock
0000000000484900 t R_newunz
00000000004c9f90 t R_newurl
000000000041ce20 t RNG_Init
000000000041dd80 t RNGkind
000000000087aac0 d RNG_kind
000000000087b8e0 d R_NGrowFrac
000000000087b8d0 d R_NGrowIncrFrac
000000000087a9c0 d RNG_Table
000000000096ea50 b R_NHeap
000000000096e890 B R_NilValue
00000000008943a0 b R_N_maxused
0000000000893878 b R_NodesInUse
000000000088eba0 b R_NotSym
000000000087b864 d R_NShowCalls
000000000087b8a8 d R_NSize
000000000087b6d0 d R_NumDevices
000000000087b820 D R_num_math_threads
000000000087b888 d R_nwarnings
0000000000470990 t RObjToCPtr2
000000000057d0c0 t R_OpenInitFile
00000000005204c0 t R_OpenLibraryFile
0000000000520610 t R_OpenSiteFile
00000000005205a0 t R_OpenSysInitFile
000000000051b060 T R_orderVector
000000000088eba8 b R_OrSym
000000000087a990 d R_osDynSymbol
0000000000891340 b routines
000000000096be50 b routines
000000000096e5c0 b routines
000000000096e820 b R_OutputCon
0000000000891700 B R_Outputfile
00000000004960c0 T R_PackageEnvName
000000000096eab8 B R_PackageSymbol
00000000004bc7f0 t R_Parse
00000000004bc520 t R_Parse1
00000000004bcbc0 t R_Parse1Buffer
00000000004bcb00 t R_Parse1File
00000000004bcfa0 t R_ParseBuffer
00000000004bcf10 t R_ParseConn
00000000008914c0 B R_ParseContext
00000000008914a4 B R_ParseContextLast
000000000096eab0 B R_ParseContextLine
00000000008916c0 B R_ParseError
000000000096eb60 b R_ParseErrorCol
000000000096ea10 b R_ParseErrorFile
00000000008915c0 B R_ParseErrorMsg
00000000004bcee0 t R_ParseFile
00000000004bcf40 T R_ParseVector
0000000000891720 b R_PendingPromises
0000000000882ac0 D R_PolledEvents
000000000052ff10 T R_popen
000000000096e9f8 B R_PosInf
00000000004dce60 t R_possible_dispatch
00000000004296f0 T R_pow
00000000004299e0 T R_pow_di
000000000096e8c8 b R_PPStack
000000000087b898 d R_PPStackSize
000000000096ea68 b R_PPStackTop
00000000008943c8 b R_PreciousList
00000000004d6cf0 T R_PreserveObject
00000000005528c0 t R_pretty
00000000004d8ab0 t R_Primitive
00000000004dc8e0 T R_primitive_generic
00000000004dc8b0 T R_primitive_methods
000000000096ed40 B R_print
00000000004fd090 T Rprintf
000000000057db20 T R_ProcessEvents
000000000088ec28 b R_profiled_thread
000000000088ec60 b R_ProfileOutfile
000000000088ec68 b R_Profiling
000000000088ec30 b R_Profiling_Error
00000000004b3140 T R_PromiseExpr
00000000004ce0f0 t R_PromptString
00000000004d19c0 T R_ProtectWithIndex
0000000000517920 t rPsort2
00000000004f73d0 T R_PV
00000000004fe140 T R_qsort
00000000004fdbd0 T R_qsort_I
00000000004fe390 T R_qsort_int
00000000004fdea0 T R_qsort_int_I
00000000004fd5e0 t R_qsort_int_R.constprop.0
00000000004fd8b0 t R_qsort_R.constprop.1
0000000000891718 b R_Quiet
000000000096e8a0 B R_QuoteSymbol
000000000057df00 t R_ReadClipboard
0000000000461700 T R_ReadConnection
000000000057c1e0 T R_ReadConsole
0000000000896fa0 B R_ReadItemDepth
0000000000893868 b R_RealPPStackSize
000000000096e978 b R_RecursiveSymbol
000000000041be90 T R_RegisterCCallable
00000000004d7d20 T R_RegisterCFinalizer
00000000004d7d00 T R_RegisterCFinalizerEx
000000000041a0d0 t R_RegisterDLL
00000000004d7bc0 T R_RegisterFinalizer
00000000004d7ba0 T R_RegisterFinalizerEx
000000000041a460 T R_registerRoutines
00000000004d1b30 T R_ReleaseObject
00000000004cf470 T R_removeTaskCallback
00000000004cfa10 t R_ReplConsole
00000000004cffa0 T R_ReplDLLdo1
00000000004ce1a0 T R_ReplDLLinit
00000000004cddb0 t R_ReplFile
00000000004d19e0 T R_Reprotect
000000000057c230 T R_ResetConsole
000000000096eb48 b R_RestartStack
000000000096ea60 b R_RestartToken
0000000000520720 T R_RestoreGlobalEnv
0000000000509bd0 T R_RestoreGlobalEnvFromFile
0000000000463450 t R_restore_globals
0000000000495f80 T R_RestoreHashCount
000000000096eaa0 B R_RestoreHistory
000000000096ecf8 b R_ReturnedValue
000000000096eb70 B R_RowNamesSymbol
0000000000519e10 T R_rsort
00000000004d6c60 T R_RunExitFinalizers
000000000057ad70 T R_runHandlers
000000000096c568 B R_running_as_main_program
0000000000463350 t R_run_onexits
00000000004d69a0 T R_RunWeakRefFinalizer
000000000088a3c0 b R_S4_extends_table
0000000000520750 T R_SaveGlobalEnv
0000000000509a80 T R_SaveGlobalEnvToFile
0000000000508df0 t R_SaveToFile
0000000000508c70 t R_SaveToFileV
000000000096eae0 B R_SeedsSymbol
00000000004ddba0 t R_seemsOldStyleS4Object
000000000057a940 T R_SelectEx
0000000000515b60 T R_Serialize
0000000000516660 t R_serialize
0000000000516520 t R_serializeb
000000000096e8a8 b R_SessionContext
000000000041a2b0 t R_setArgStyles.isra.10
0000000000418aa0 T R_set_command_line_arguments
00000000004d1b90 T R_SetExternalPtrAddr
00000000004d1c20 T R_SetExternalPtrProtected
00000000004d1ba0 T R_SetExternalPtrTag
00000000004c9f20 T R_setInternetRoutines
00000000004cb1f0 T R_setLapackRoutines
00000000004d1680 t R_SetMaxNSize
00000000004d1640 t R_SetMaxVSize
00000000004de210 t R_SetOptionWarn
00000000004de190 t R_SetOptionWidth
00000000005208b0 T R_SetParams
00000000004d16a0 t R_SetPPSize
000000000041a270 t R_setPrimitiveArgTypes.isra.9
00000000004dcc60 T R_set_prim_method
00000000004dce50 T R_set_quick_method_check
00000000004dc360 T R_set_standardGeneric_ptr
000000000057d1e0 T R_setStartTime
000000000057c2a0 T R_setupHistory
0000000000490740 t R_SetVarLocValue
000000000057dcb0 T R_setX11Routines
0000000000891488 b R_ShowErrorCalls
000000000087b868 d R_ShowErrorMessages
000000000057c280 t R_ShowFiles
000000000057c1d0 T R_ShowMessage
000000000089148c b R_ShowWarnCalls
000000000087b810 D R_SignalHandlers
000000000088b774 b R_SinkNumber
000000000088b660 b R_SinkSplit
0000000000520760 T R_SizeFromEnv
0000000000891714 B R_Slave
00000000008943b8 b R_SmallVallocSize
0000000000514400 t Rsnprintf.constprop.34
00000000004ca650 T Rsockclose
00000000004ca3c0 T Rsockconnect
00000000004ca880 T Rsocklisten
00000000004ca770 T Rsockopen
00000000004ca4e0 T Rsockread
00000000004cab90 t Rsockselect
00000000004caa40 T Rsockwrite
000000000051a1f0 T rsort_with_index
000000000096e9a0 B R_SourceSymbol
000000000088ebf0 b R_SqrtSym
000000000088ec40 b R_Srcfile_bufcount
000000000088ec48 b R_Srcfiles
000000000088ec38 b R_Srcfiles_buffer
000000000096ed00 B R_SrcfileSymbol
000000000096e948 B R_Srcref
000000000096ed18 B R_SrcrefSymbol
00000000008944c0 b R_standardGeneric_ptr
000000000089386c b R_StandardPPStackSize
000000000057bfc0 t Rstd_addhistory
000000000057b760 t Rstd_Busy
000000000057bc50 t Rstd_ChooseFile
000000000057b810 t Rstd_CleanUp
000000000057b750 t Rstd_ClearerrConsole
000000000057b740 t Rstd_FlushConsole
00000000008916d0 b R_StdinEnc
000000000057bcf0 t Rstd_loadhistory
000000000057af70 t Rstd_ReadConsole
000000000057bcc0 t Rstd_read_history
000000000057b730 t Rstd_ResetConsole
000000000057be20 t Rstd_savehistory
000000000057ba10 t Rstd_ShowFiles
000000000057bcb0 t Rstd_ShowMessage
000000000057a910 t Rstd_Suicide
000000000057b6a0 t Rstd_WriteConsole
000000000057b6d0 t Rstd_WriteConsoleEx
00000000004d2a10 T RSTEP
00000000004e2310 t R_strieql
000000000096ea58 b R_StringHash
00000000004fc2c0 t Rstrlen
00000000004689f0 t R_strptime
000000000053c9d0 T R_strtod
000000000053c4a0 T R_strtod4
00000000004fbff0 t Rstrwid
000000000088eb78 b R_Subassign2Sym
0000000000525ef0 T R_subassign3_dflt
000000000088eb90 b R_SubassignSym
000000000088eb80 b R_Subset2Sym
000000000052c6d0 t R_subset3_dflt
000000000088eb98 b R_SubsetSym
000000000088ec10 b R_SubSym
000000000057c1c0 T R_Suicide
000000000096e980 b R_SymbolTable
00000000004638e0 t R_syscall
00000000004637d0 t R_sysframe
00000000004632b0 t R_sysframe.part.0
00000000004639c0 t R_sysfunction
00000000004637f0 t R_sysparent
000000000052ff20 T R_system
00000000004cdf60 T R_taskCallbackRoutine
00000000008916f8 B R_TempDir
00000000004cb060 t R_TextBufferFree
00000000004cb080 t R_TextBufferGetc
00000000004cae80 t R_TextBufferInit
000000000096edb8 B R_timeout_handler
000000000096ede8 B R_timeout_val
0000000000532a90 T R_tmpnam
00000000005324e0 T R_tmpnam2
000000000096e928 b R_TmpvalSymbol
000000000096eba0 b R_Toplevel
000000000096e8d0 b R_ToplevelContext
0000000000464140 T R_ToplevelExec
00000000004d1d00 T RTRACE
000000000096ea38 b R_TripleColonSymbol
000000000088eb68 b R_TrueValue
0000000000464230 T R_tryEval
0000000000464290 T R_tryEvalSilent
000000000096eb58 B R_TspSymbol
000000000042c270 t R_unary
000000000096ea98 B R_UnboundValue
00000000004d6ad0 t RunFinalizers
00000000004e32d0 t R_unlink
00000000004e3030 t R_unlink.part.1
00000000004957f0 T R_unLockBinding
00000000004cfad0 T run_Rmainloop
0000000000515cc0 T R_Unserialize
0000000000516850 t R_unserialize
0000000000483f50 T Runzip
000000000041a340 T R_useDynamicSymbols
000000000096e9b0 b R_UseNamesSymbol
000000000088eb70 b R_valueSym
0000000000891710 b R_Verbose
000000000087b8d8 d R_VGrowFrac
000000000087b8c8 d R_VGrowIncrFrac
000000000096e938 B R_Visible
0000000000894398 b R_V_maxused
00000000004fcfe0 T Rvprintf
000000000087b8a0 d R_VSize
0000000000497ed0 t Rvsnprintf
00000000008943d0 b R_VStack
000000000096c1e4 B R_wait_usec
000000000053eb00 T rwarn_
000000000053c2b0 T rwarnc_
000000000096e8c0 b R_Warnings
000000000087b88c d R_WarnLength
0000000000891498 b R_warn_partial_match_args
0000000000891490 b R_warn_partial_match_attr
0000000000891494 b R_warn_partial_match_dollar
00000000005389b0 t Rwcrtomb
0000000000466890 t Rwcsncasecmp
00000000004d16b0 T R_WeakRefKey
0000000000893870 b R_weak_refs
00000000004d16e0 T R_WeakRefValue
000000000096e960 b R_WholeSrcrefSymbol
00000000004616a0 T R_WriteConnection
000000000057c1f0 T R_WriteConsole
000000000057c210 T R_WriteConsoleEx
0000000000505810 t R_WriteMagic
000000000057dcc0 t R_X11_Init
0000000000509930 t R_XDRDecodeDouble
0000000000509a10 t R_XDRDecodeInteger
00000000005098c0 t R_XDREncodeDouble
00000000005099a0 t R_XDREncodeInteger
0000000000586570 T Rz_adler32
0000000000586a00 T Rz_adler32_combine
0000000000586a20 T Rz_adler32_combine64
000000000057e020 T Rz_compress
000000000057df60 T Rz_compress2
000000000057e030 T Rz_compressBound
000000000057e1d0 T Rz_crc32
000000000057e4a0 T Rz_crc32_combine
000000000057e4b0 T Rz_crc32_combine64
000000000057fd70 T Rz_deflate
000000000057fc20 T Rz_deflateBound
00000000005813c0 T Rz_deflateCopy
00000000006350c0 R Rz_deflate_copyright
0000000000580fa0 T Rz_deflateEnd
0000000000581390 T Rz_deflateInit_
0000000000581090 T Rz_deflateInit2_
0000000000580e70 T Rz_deflateParams
000000000057fb30 T Rz_deflatePrime
000000000057f9e0 T Rz_deflateReset
000000000057f6d0 T Rz_deflateSetDictionary
000000000057fac0 T Rz_deflateSetHeader
000000000057fbe0 T Rz_deflateTune
0000000000635f60 R Rz_dist_code
0000000000879d40 D Rz_errmsg
000000000057e1c0 T Rz_get_crc_table
0000000000581bd0 T Rz_inflate
0000000000583d20 T Rz_inflateCopy
0000000000635d20 R Rz_inflate_copyright
00000000005839a0 T Rz_inflateEnd
0000000000586a40 T Rz_inflate_fast
0000000000583b40 T Rz_inflateGetHeader
0000000000581b50 T Rz_inflateInit_
0000000000581a70 T Rz_inflateInit2_
0000000000584020 T Rz_inflateMark
0000000000581b60 T Rz_inflatePrime
0000000000581980 T Rz_inflateReset
00000000005819c0 T Rz_inflateReset2
0000000000583a90 T Rz_inflateSetDictionary
0000000000583b70 T Rz_inflateSync
0000000000583ce0 T Rz_inflateSyncPoint
0000000000584080 T Rz_inflate_table
0000000000583ff0 T Rz_inflateUndermine
0000000000635e60 R Rz_length_code
0000000000585b40 T Rz__tr_align
0000000000585c30 T Rz__tr_flush_block
00000000005858f0 T Rz__tr_init
00000000005859f0 T Rz__tr_stored_block
00000000005862a0 T Rz__tr_tally
0000000000586340 T Rz_uncompress
0000000000586460 T Rz_zcalloc
0000000000586470 T Rz_zcfree
0000000000586440 T Rz_zError
0000000000586430 T Rz_zlibCompileFlags
0000000000586420 T Rz_zlibVersion
00000000008944d0 b s.11035
000000000096bf40 b s2.4198
000000000062e2a0 r s2u
000000000096c190 b s.4192
000000000096bf38 b s.4197
000000000096bfa8 b s.4236
0000000000630280 r s.4247
00000000004d7e00 T S_alloc
00000000005522d0 T samin
00000000008829f4 D SaveAction
00000000008912f0 b SavedLval
00000000008912f8 b SavedToken
0000000000506140 t saveload_cleanup
000000000044e730 t savePalette
0000000000529560 t scalarIndex
000000000050a760 t scanchar
000000000050a5c0 t scan_cleanup
0000000000511910 t ScanForCircles1
0000000000584ba0 t scan_tree
00000000004b3c80 t scientific.isra.0
0000000000894440 b s_className.11370
0000000000517a70 t scmp
0000000000894480 b s_contains.11131
000000000088a3b0 b s_dot_Data
000000000088a340 b s_dotData.11440
000000000088a3c8 b s_dot_S3Class
000000000041e020 T seed_in
000000000041e030 T seed_out
                 U select@@GLIBC_2.2.5
000000000096c4a0 b seljmpbuf
0000000000584ca0 t send_tree
000000000050d710 t seq_colon
0000000000533e50 t sequal
000000000088a5b0 b set.15827
00000000004d3250 t SET_ACTIVE_BINDING_BIT
000000000048fbf0 t setActiveValue
00000000004d3350 t SET_ASCII
00000000004d1d20 T SET_ATTRIB
00000000004d2aa0 T SET_BODY
00000000004d3320 t SET_BYTES
00000000004d3370 t SET_CACHED
00000000004d28a0 T SETCAD4R
00000000004d27b0 T SETCADDDR
00000000004d26d0 T SETCADDR
00000000004d2600 T SETCADR
00000000004d24a0 T SETCAR
00000000004d2550 T SETCDR
00000000004d2b20 T SET_CLOENV
000000000043a540 t SetColNames
00000000004d3190 t SET_CXTAIL
00000000004d2da0 T SET_DDVAL
00000000004138cc t setDflt.isra.2.part.3
0000000000470be0 t setDLLname.isra.1
00000000004d2e90 T SET_ENCLOS
00000000004d2f90 T SET_ENVFLAGS
                 U setenv@@GLIBC_2.2.5
00000000004d2a20 T SET_FORMALS
00000000004d2e10 T SET_FRAME
00000000004d2f10 T SET_HASHTAB
0000000000413934 t set_iconv_error
00000000004d2d20 T SET_INTERNAL
                 U setitimer@@GLIBC_2.2.5
00000000005af750 t set_jumps
00000000004d3330 t SET_LATIN1
00000000004d1ef0 T SETLENGTH
00000000004d1e20 T SETLEVELS
                 U setlocale@@GLIBC_2.2.5
00000000004d29b0 T SET_MISSING
00000000004d1df0 T SET_NAMED
00000000005d21f0 t set_nottype_bits.isra.0
00000000004ec1a0 t SetNumStyle
00000000004d1dc0 T SET_OBJECT
00000000004dde50 t SetOption
00000000004d30f0 T SET_PRCODE
00000000004d2ff0 T SET_PRENV
00000000004ec1e0 t SetPrimeStyle
00000000004d32c0 T SET_PRIMFUN
00000000004d2c20 T SET_PRINTNAME
00000000005b1c20 t set_private_data_ptrs
00000000004d3170 T SET_PRSEEN
00000000004d3070 T SET_PRVALUE
00000000004d2ba0 T SET_RDEBUG
000000000057af00 t set_rl_word_breaks
000000000043a510 t SetRowNames
00000000004d2bc0 T SET_RSTEP
00000000004d1e00 T SET_RTRACE
00000000004d1ec0 T SET_S4_OBJECT
0000000000520350 t SetSize
00000000005d2560 t set_start_bits
00000000004d21b0 T SET_STRING_ELT
00000000004ec020 t SetStyle.isra.16
00000000004ec0b0 t SetSubStyle
00000000004ec100 t SetSupStyle
00000000004d2ca0 T SET_SYMVALUE
00000000005d2250 t set_table_bit.isra.1
00000000004d2420 T SET_TAG
00000000005b5040 t set_then_offsets
00000000004d1f10 T SET_TRUELENGTH
00000000005d24a0 t set_type_bits.isra.3
00000000004d1de0 T SET_TYPEOF
0000000000466710 t set_tz
00000000004ce2e0 T setup_Rmainloop
00000000004d3340 t SET_UTF8
00000000004d2290 T SET_VECTOR_ELT
000000000088a358 b s_extends.11118
000000000088a350 b s_extendsForS3.11119
0000000000632040 r sferr_halves.4178
0000000000894460 b s_getClass.11356
0000000000894458 b s_getClassDef.11362
000000000088a3a8 b s_getDataPart
0000000000533ea0 t shash
000000000088a4d8 b shi
000000000088a4e0 b shr
000000000088a4c8 b si
000000000096bf10 b si.4202
                 U sigaction@@GLIBC_2.2.5
00000000004cda40 t sigactionSegv
                 U sigaltstack@@GLIBC_2.2.5
                 U sigemptyset@@GLIBC_2.2.5
                 U signal@@GLIBC_2.2.5
0000000000891750 b signal_stack
0000000000575940 T signrank_free
                 U __sigsetjmp@@GLIBC_2.2.5
0000000000891760 b sigstk
00000000005217a0 t SimpleListAssign.isra.2
                 U sincos@@GLIBC_2.2.5
0000000000624e60 r sincs
                 U sin@@GLIBC_2.2.5
                 U sinh@@GLIBC_2.2.5
000000000088b720 b SinkCons
000000000088b6c0 b SinkConsClose
00000000005b7480 t skip_char_back.isra.42
00000000004b7170 t SkipSpace
00000000005b18c0 t sljit_alloc_memory
00000000005b67a0 t sljit_emit_cmp
00000000005b2350 t sljit_emit_fast_enter.constprop.66
00000000005b2450 t sljit_emit_fast_return.constprop.67
00000000005b4ee0 t sljit_emit_ijump.constprop.63
00000000005b18f0 t sljit_emit_jump
00000000005b1a90 t sljit_emit_label
00000000005b2f00 t sljit_emit_op1
00000000005b58f0 t sljit_emit_op2
00000000005b97f0 t sljit_emit_op_flags.isra.31.constprop.64
00000000005af1c0 t sljit_free_compiler
00000000005b00c0 t sljit_free_exec
00000000005afb60 t sljit_generate_code
00000000005b25a0 t sljit_get_local_base.constprop.62
000000000096e688 b sljit_page_align
00000000005af790 t sljit_stack_resize
0000000000552f70 t sndofd
                 U __snprintf_chk@@GLIBC_2.3.4
                 U snprintf@@GLIBC_2.2.5
0000000000488770 t spline_segment_computing
                 U __sprintf_chk@@GLIBC_2.3.4
0000000000894448 b s_prototype.11369
                 U sqrt@@GLIBC_2.2.5
000000000088a4d0 b sr
                 U srand@@GLIBC_2.2.5
000000000046c1d0 t src2buff1
00000000008912c0 b SrcRefs
00000000004d7e30 T S_realloc
0000000000891244 b srindex
0000000000894488 b s_S3table.10871
                 U sscanf@@GLIBC_2.2.5
000000000096e600 b sse2_buffer
000000000096e620 b sse2_data
0000000000894478 b s_selectSuperCl.11132
000000000088a3a0 b s_setDataPart
                 U __stack_chk_fail@@GLIBC_2.4
000000000041897f T _start
000000000096c580 b StartTime
0000000000882b20 d static_bl_desc
0000000000882b40 d static_d_desc
0000000000636160 r static_dtree
0000000000882b60 d static_l_desc
00000000006361e0 r static_ltree
0000000000453310 t stderr_fflush
0000000000883848 B stderr@@GLIBC_2.2.5
0000000000454920 t stderr_vfprintf
0000000000454990 t stdin_fgetc
00000000008837e8 B stdin@@GLIBC_2.2.5
0000000000453330 t stdout_fflush
00000000008837d0 B stdout@@GLIBC_2.2.5
0000000000454940 t stdout_vfprintf
0000000000487a20 t step_computing.part.9.constprop.15
                 U stifle_history
                 U __stpcpy_chk@@GLIBC_2.3.4
                 U stpcpy@@GLIBC_2.2.5
000000000096e6e0 b str.5645
                 U __strcat_chk@@GLIBC_2.3.4
                 U strcat@@GLIBC_2.2.5
                 U strchr@@GLIBC_2.2.5
                 U strcmp@@GLIBC_2.2.5
                 U strcoll@@GLIBC_2.2.5
                 U __strcpy_chk@@GLIBC_2.3.4
                 U strcpy@@GLIBC_2.2.5
                 U strcspn@@GLIBC_2.2.5
                 U __strdup@@GLIBC_2.2.5
                 U strerror@@GLIBC_2.2.5
                 U strftime@@GLIBC_2.2.5
000000000043a890 t StringAnswer
00000000004d1fc0 T STRING_ELT
000000000063a3a8 r string_H
000000000063a3cf r string_h
00000000004eba20 t StringMatch
000000000063a3c1 r string_PL
000000000063a3e8 r string_pL
000000000063a3ba r string_PLl
000000000063a3e1 r string_pLl
000000000063a3b3 r string_PLu
000000000063a3da r string_pLu
000000000063a457 r string_PNd
000000000063a450 r string_pNd
00000000004d2180 T STRING_PTR
000000000063a3ab r string_PXan
000000000063a3d2 r string_pXan
000000000063a3a0 r string_PXps
000000000063a3c7 r string_pXps
000000000063a448 r string_PXsp
000000000063a440 r string_pXsp
000000000063a438 r string_PXwd
000000000063a430 r string_pXwd
0000000000526860 t stringSubscript
00000000004b7210 t StringValue
0000000000433240 t stripAttrib
0000000000533a40 t StripUnmatched
                 U strlen@@GLIBC_2.2.5
                 U strncasecmp@@GLIBC_2.2.5
                 U __strncat_chk@@GLIBC_2.3.4
                 U strncmp@@GLIBC_2.2.5
                 U __strncpy_chk@@GLIBC_2.3.4
                 U strncpy@@GLIBC_2.2.5
0000000000467950 t strptime_internal
                 U strrchr@@GLIBC_2.2.5
                 U strstr@@GLIBC_2.2.5
                 U strtod@@GLIBC_2.2.5
                 U strtok@@GLIBC_2.2.5
                 U strtol@@GLIBC_2.2.5
0000000000520bc0 t SubAssignArgs
0000000000520d60 t SubassignTypeFix.isra.0
00000000004ebad0 t SubAtom
000000000063a400 r substitutes
0000000000894450 b s_virtual.11368
000000000088a438 b svsi.11679
000000000088a440 b svsr.11680
0000000000456560 t switch_or_tee_stdout
00000000004601b0 t switch_stdout
000000000088a348 b s_xData.11439
00000000004ebca0 t SymbolFaceAtom
00000000006145a0 r SymbolTable
00000000004b9010 t SymbolValue
                 U symlink@@GLIBC_2.2.5
00000000004d2bf0 T SYMVALUE
00000000005816f0 t syncsearch
                 U sysconf@@GLIBC_2.2.5
                 U system@@GLIBC_2.2.5
00000000008916f0 b Sys_TempDir
0000000000631d60 r t.4228
0000000000630240 r t.4248
0000000000618de0 r table_wcwidth
00000000004d2350 T TAG
00000000004b84e0 t TagArg.isra.7
0000000000894500 b tagbuf
                 U tan@@GLIBC_2.2.5
                 U tanh@@GLIBC_2.2.5
0000000000600300 r tbl
000000000042d7b0 t tccrossprod
000000000087ab20 d test_result.10419
00000000004525a0 t text_close
00000000004527f0 t text_destroy
                 U textdomain@@GLIBC_2.2.5
00000000004525b0 t text_fgetc
00000000004b6dc0 t text_getc
0000000000452590 t text_open
0000000000455590 t text_seek
0000000000454f60 t text_vfprintf
00000000008837a0 d then_trap_opcode
00000000004eb760 t ThinSpace
000000000088a4b8 b ti
                 U tilde_expand
                 U time@@GLIBC_2.2.5
                 U timespec_get@@GLIBC_2.16
00000000004696c0 t TimeToSeed
00000000008837a8 d __TMC_END__
000000000049cdc0 t tmp_cleanup
                 U tmpfile@@GLIBC_2.2.5
000000000096bfd0 b tn.4238
00000000004b9430 t token_
000000000096e670 b total_size
000000000062b938 r TO_WCHAR
                 U towctrans@@GLIBC_2.2.5
                 U towlower@@GLIBC_2.2.5
                 U towupper@@GLIBC_2.2.5
000000000088a408 b tp.11708
000000000088a4c0 b tr
000000000087b6cc d tracing_state
00000000004ebd20 t TranslatedSymbol
0000000000442d00 t tr_build_spec
000000000043f530 t trChar
00000000005d5220 t tre_add_tag_left.isra.1
00000000005d52f0 t tre_add_tag_right.isra.2
00000000005d53c0 t tre_add_tags
00000000005dec90 T tre_ast_new_catenation
00000000005debf0 T tre_ast_new_iter
00000000005debc0 T tre_ast_new_literal
00000000005deb40 T tre_ast_new_node
00000000005dec50 T tre_ast_new_union
0000000000418840 t tre_ast_to_tnfa
00000000005dc760 t tre_compare_items
00000000005d6390 T tre_compile
00000000005d7850 T tre_config
00000000005d4ed0 t tre_copy_ast
000000000064fce0 r tre_error_messages
00000000005d3e10 T tre_fill_pmatch
00000000005d6230 T tre_free
00000000005537c0 t tregup
00000000005d4030 T tre_have_approx
00000000005d4020 T tre_have_backrefs
0000000000650240 r tre_macros
00000000004184cc t tre_make_trans
00000000005d4080 t tre_match
00000000005d43b0 t tre_match_approx
00000000005d45f0 t tre_match_empty
00000000005dc5f0 T tre_mem_alloc_impl
00000000005dc5b0 T tre_mem_destroy
00000000005dc4c0 T tre_mem_new_impl
00000000005dc790 t tre_new_item
00000000005dc850 T tre_parse
00000000005d51d0 t tre_purge_regset.isra.0
00000000005d4550 T tre_regaexec
00000000005d4560 T tre_regaexecb
00000000005d4500 T tre_reganexec
00000000005d4040 T tre_regaparams_default
00000000005d45a0 T tre_regawexec
00000000005d4580 T tre_regawnexec
00000000005d3c00 T tre_regcomp
00000000005d3c40 T tre_regcompb
00000000005d3d50 T tre_regerror
00000000005d42b0 T tre_regexec
00000000005d42d0 T tre_regexecb
00000000005d3d40 T tre_regfree
00000000005d3a20 T tre_regncomp
00000000005d3b80 T tre_regncompb
00000000005d4250 T tre_regnexec
00000000005d4300 T tre_regnexecb
00000000005d4380 T tre_reguexec
00000000005d3d00 T tre_regwcomp
00000000005d4350 T tre_regwexec
00000000005d3cf0 T tre_regwncomp
00000000005d4330 T tre_regwnexec
00000000005d48e0 t tre_set_empty
00000000005d4920 t tre_set_one
00000000005d4990 t tre_set_union
00000000005deab0 T tre_stack_destroy
00000000005dea40 T tre_stack_new
00000000005dead0 T tre_stack_num_objects
00000000005deb00 T tre_stack_pop_int
00000000005deb20 T tre_stack_pop_voidptr
00000000005de980 t tre_stack_push
00000000005deae0 T tre_stack_push_int
00000000005deaf0 T tre_stack_push_voidptr
00000000005d78b0 T tre_tnfa_run_approx
00000000005d9d20 T tre_tnfa_run_backtrack
00000000005db310 T tre_tnfa_run_parallel
00000000005d7800 T tre_version
0000000000585b30 T _tr_flush_bits
0000000000442c80 t tr_get_next_char_from_spec
00000000004d8810 T TRUELENGTH
000000000062e8c0 r truenames
                 U trunc@@GLIBC_2.2.5
000000000049e120 t tryAssignDispatch
000000000049dfd0 t tryDispatch
0000000000413d49 t TryToReleasePages.part.1
0000000000891088 b txtb
00000000005f8940 r typeinfo
00000000004d1ce0 T TYPEOF
000000000062e6c0 r TypeTable
0000000000883820 B __tzname@@GLIBC_2.2.5
0000000000883820 V tzname@@GLIBC_2.2.5
                 U tzset@@GLIBC_2.2.5
000000000062e6a0 r UCS2ENC
000000000096be20 b ucsmb_obj
000000000096be18 b ucsutf8_obj
                 U umask@@GLIBC_2.2.5
                 U uname@@GLIBC_2.2.5
0000000000413b72 t UNBOUND_VARIABLE_ERROR.isra.3
                 U ungetc@@GLIBC_2.2.5
000000000062b930 r UNICODE
000000000041d660 T unif_rand
000000000049a5e0 T UNIMPLEMENTED
0000000000539850 T UNIMPLEMENTED_TYPE
00000000005397d0 t UNIMPLEMENTED_TYPEt
                 U unlink@@GLIBC_2.2.5
00000000004d3270 t UNLOCK_BINDING
00000000008943e0 b UnmarkedNodeTemplate
0000000000486fb0 t unregisterOne
                 U unsetenv@@GLIBC_2.2.5
00000000004d1ed0 T UNSET_S4_OBJECT
0000000000482060 t unz64local_getByte
0000000000482890 t unz64local_GetCurrentFileInfoInternal.constprop.9
0000000000482200 t unz64local_getLong
00000000004820c0 t unz64local_getLong64
00000000004822b0 t unz64local_getShort
0000000000481b90 t unzClose
0000000000481bd0 t unz_close
0000000000481ac0 t unzCloseCurrentFile
0000000000482010 t unz_fgetc_internal
00000000004833b0 t unzGoToFirstFile
0000000000483310 t unzGoToNextFile
0000000000483aa0 t unzLocateFile.constprop.6
0000000000483f10 t unz_open
0000000000482320 t unzOpenCurrentFile3.constprop.8
0000000000483400 t unzOpenInternal.constprop.4
0000000000483d50 t unz_open.part.2
0000000000481fe0 t unz_read
0000000000481c20 t unzReadCurrentFile
0000000000581780 t updatewindow
0000000000969de0 b used
000000000096c5a0 b UserHOME
0000000000888960 B User_norm_fun
000000000088a338 b User_unif_fun
0000000000888968 B User_unif_init
000000000088a330 b User_unif_nseed
000000000088a328 b User_unif_seedloc
00000000004b58b0 t UseSrcRefState
0000000000882b10 d UsingReadline
000000000053b550 t utf8clen
0000000000891484 B utf8locale
000000000096be28 b utf8_obj
000000000062e640 r utf8_table1
0000000000617a80 r utf8_table2
000000000062e620 r utf8_table2
000000000062e660 r utf8_table4
000000000053bad0 T utf8Valid
000000000096be08 b utf8_wobj
                 U utimes@@GLIBC_2.2.5
0000000000465e80 t validate_tm
00000000008823b8 d var_R_can_use_X11
                 U __vasprintf_chk@@GLIBC_2.8
000000000046e8e0 t vec2buff
0000000000521be0 t VectorAssign
00000000004d2000 T VECTOR_ELT
00000000004d2190 T VECTOR_PTR
0000000000533e20 t vequal
000000000063a600 r verbnames
000000000063a580 r verbs
0000000000498e20 t verrorcall_dflt
0000000000486f10 t VFontFaceCode
0000000000486ff0 t VFontFamilyCode
000000000053e7a0 t vfonts_Init
00000000005f9ba0 r VFontTable
                 U __vfprintf_chk@@GLIBC_2.3.4
0000000000533f70 t vhash
00000000004d1790 T vmaxget
00000000004d17a0 T vmaxset
000000000054fb40 T vmmin
000000000044f300 t vrshft.constprop.7
000000000087b8b0 d vsfac
000000000049b1f0 t vsignalWarning
                 U __vsnprintf_chk@@GLIBC_2.3.4
                 U __vsprintf_chk@@GLIBC_2.3.4
000000000049ac60 t vwarningcall_dflt
000000000096c1a8 b w
000000000096c1c0 b w
000000000088bff0 b w.13691
000000000096bfb0 b w.4237
000000000087ab60 d w_ab_month_name
000000000087b100 d w_ab_weekday_name
00000000004feaf0 t walker_ProbSampleReplace
0000000000895e28 b Walker_warn
000000000087ab40 d w_am_pm
000000000088e480 b warned.12891
000000000049b9a0 t warningcall_dflt.constprop.5
00000000005fcba0 r WarningDB
                 U __wcrtomb_chk@@GLIBC_2.4
                 U __wcscpy_chk@@GLIBC_2.4
                 U wcsftime@@GLIBC_2.2.5
                 U wcslen@@GLIBC_2.2.5
                 U wcsncmp@@GLIBC_2.2.5
                 U __wcsncpy_chk@@GLIBC_2.4
                 U wcsncpy@@GLIBC_2.2.5
                 U wcstod@@GLIBC_2.2.5
                 U wcstombs@@GLIBC_2.2.5
                 U wctrans@@GLIBC_2.2.5
                 U wctype@@GLIBC_2.2.5
0000000000497f00 t wd
000000000087b640 d weekday_name
0000000000575730 t w_free
00000000005792c0 t w_free
000000000062ef00 r wg.5178
000000000062edc0 r wg.5273
000000000062eec0 r wgk.5180
000000000062ee00 r wgk.5275
000000000088a390 b while_sym.11083
000000000057a090 T wilcox_free
0000000000575760 t w_init_maybe
0000000000579390 t w_init_maybe
                 U wmemcmp@@GLIBC_2.2.5
000000000087ad40 d w_month_name
0000000000882600 d workspace_name
0000000000569c90 t wprob
00000000005149f0 t WriteBC1.isra.15
0000000000514840 t WriteBCLang
                 U write@@GLIBC_2.2.5
                 U write_history
0000000000514b20 t WriteItem
00000000005147c0 t WriteLENGTH
000000000046c0b0 t writeline
000000000049a5b0 t WrongArgCount
0000000000466920 t w_strptime_internal
0000000000442e50 t wtr_build_spec
0000000000442c30 t wtr_get_next_char_from_spec
000000000087b220 d w_weekday_name
                 U xdr_bytes@@GLIBC_2.2.5
                 U xdr_double@@GLIBC_2.2.5
0000000000506cc0 t XdrInComplex
00000000005057d0 t XdrInInit
0000000000506f20 t XdrInInteger
0000000000506d40 t XdrInReal
0000000000507080 t XdrInString
0000000000505330 t XdrInTerm
                 U xdr_int@@GLIBC_2.2.5
                 U xdrmem_create@@GLIBC_2.2.5
                 U xdrstdio_create@@GLIBC_2.2.5
                 U xdr_string@@GLIBC_2.2.5
00000000004f7640 T xerbla_
000000000062ef40 r xgk.5179
000000000062ee60 r xgk.5274
00000000004eb5d0 t XHeight
00000000004eb720 t xHeight
000000000096bf98 b xl.4239
000000000096bed0 b xl.4887
00000000006311c0 r xleg.4187
0000000000631240 r xlegq.4234
00000000004d1f30 T XLENGTH
000000000096beb8 b xll.4888
000000000096beb0 b xlr.4889
000000000096bed8 b xm.4890
000000000088c118 b xpoints
000000000096bf90 b xr.4240
000000000096bec8 b xr.4891
                 U __xstat@@GLIBC_2.2.5
00000000004d1f50 T XTRUELENGTH
000000000088a4a0 b xx.11613
00000000004b67f0 t xxbinary
00000000008912d0 b xxbytesave
00000000008912dc b xxcharcount
00000000008912d8 b xxcharsave
00000000008912cc b xxcolsave
00000000004b69f0 t xxexprlist2
00000000004b5660 t xxgetc
00000000008912d4 b xxlinesave
00000000004b6fb0 t xxnxtbrk
00000000008912c8 b xxparsesave
00000000004b68b0 t xxsubscript
00000000004b8570 t xxsymsub0
00000000004b85d0 t xxsymsub1
00000000004b6770 t xxunary
00000000004b57f0 t xxungetc
00000000004b6980 t xxvalue
000000000088a478 b xxx.11616
0000000000454820 t xzfile_close
00000000004547e0 t xzfile_fgetc_internal
0000000000457000 t xzfile_open
0000000000454670 t xzfile_read
0000000000454570 t xzfile_write
000000000055c290 t Y_bessel.isra.0
000000000088c110 b ypoints
000000000088a498 b yy.11614
00000000006031c0 r yycheck
0000000000603f80 r yydefact
0000000000603f50 r yydefgoto
00000000004b88e0 t yyerror
0000000000603018 r yyexpecting.9837
000000000096e840 B yylloc
0000000000603e00 r yypact
0000000000603dea r yypgoto
00000000006040a0 r yyr1
0000000000604040 r yyr2
00000000004b86c0 t yysyntax_error
00000000006037e0 r yytable
000000000088f080 b yytext
0000000000604100 r yytname
00000000004b8630 t yytnamerr
0000000000602e00 r yytname_translations.9835
00000000006043c0 r yytranslate
0000000000603030 r yyunexpected.9836
000000000044f280 t z_acos
000000000044f2e0 t z_acosh
000000000044ec50 t z_asin
000000000044edb0 t z_asinh
000000000044f180 t z_atan
000000000044eb00 t z_atan2
000000000044f240 t z_atanh
                 U zgemm_
000000000088a468 b zi.11611
000000000044ea90 t z_logbase
0000000000450990 t z_prec
0000000000450780 t z_prec_r
000000000088a470 b zr.11612
000000000044ea50 t z_rround
000000000044edf0 t z_tan
-------------- next part --------------
	linux-vdso.so.1 =>  (0x00007fffd6bfe000)
	libblas.so.3 => /usr/lib/libblas.so.3 (0x00007f5864649000)
	libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f5864345000)
	libreadline.so.6 => /lib/x86_64-linux-gnu/libreadline.so.6 (0x00007f5864102000)
	liblzma.so.5 => /lib/x86_64-linux-gnu/liblzma.so.5 (0x00007f5863ee0000)
	librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f5863cd8000)
	libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f5863ad3000)
	libgomp.so.1 => /usr/lib/x86_64-linux-gnu/libgomp.so.1 (0x00007f58638c4000)
	libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f58636a7000)
	libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f58632de000)
	/lib64/ld-linux-x86-64.so.2 (0x00007f5864c36000)
	libgfortran.so.3 => /usr/lib/x86_64-linux-gnu/libgfortran.so.3 (0x00007f5862fc6000)
	libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f5862db0000)
	libtinfo.so.5 => /lib/x86_64-linux-gnu/libtinfo.so.5 (0x00007f5862b86000)
	libquadmath.so.0 => /usr/lib/x86_64-linux-gnu/libquadmath.so.0 (0x00007f586294a000)
-------------- next part --------------

## confifential information removed

MKLROOT=/opt/intel/composer_xe_2013_sp1.0.080/mkl
XDG_VTNR=7
MANPATH=/opt/intel/composer_xe_2013_sp1.0.080/man/en_US:/opt/intel/composer_xe_2013_sp1.0.080/man/en_US:/usr/local/man:/usr/local/share/man:/usr/share/man:
INTEL_LICENSE_FILE=/opt/intel/composer_xe_2013_sp1.0.080/licenses:/opt/intel/licenses:/home/steven/intel/licenses
SHELL=/bin/bash
LIBRARY_PATH=/opt/intel/composer_xe_2013_sp1.0.080/compiler/lib/intel64:/opt/intel/composer_xe_2013_sp1.0.080/compiler/lib/intel64:/opt/intel/composer_xe_2013_sp1.0.080/mkl/lib/intel64
MIC_LD_LIBRARY_PATH=/opt/intel/composer_xe_2013_sp1.0.080/compiler/lib/mic:/opt/intel/composer_xe_2013_sp1.0.080/mpirt/lib/mic:/opt/intel/composer_xe_2013_sp1.0.080/compiler/lib/mic:/opt/intel/composer_xe_2013_sp1.0.080/mkl/lib/mic
GTK_MODULES=overlay-scrollbar
LD_LIBRARY_PATH=/opt/intel/composer_xe_2013_sp1.0.080/compiler/lib/intel64:/opt/intel/composer_xe_2013_sp1.0.080/mpirt/lib/intel64:/opt/intel/composer_xe_2013_sp1.0.080/compiler/lib/intel64:/opt/intel/composer_xe_2013_sp1.0.080/mkl/lib/intel64
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:
CPATH=/opt/intel/composer_xe_2013_sp1.0.080/mkl/include
NLSPATH=/opt/intel/composer_xe_2013_sp1.0.080/compiler/lib/intel64/locale/%l_%t/%N:/opt/intel/composer_xe_2013_sp1.0.080/mkl/lib/intel64/locale/%l_%t/%N
PATH=/opt/intel/composer_xe_2013_sp1.0.080/bin/intel64:/opt/intel/composer_xe_2013_sp1.0.080/mpirt/bin/intel64:/home/steven/bin/ec2/bin:/home/steven/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games
MKL=-Wl,--start-group -lmkl_gf_lp64 -lmkl_gnu_thread -lmkl_core -Wl,--end-group -lgomp -lpthread
INCLUDE=/opt/intel/composer_xe_2013_sp1.0.080/mkl/include

