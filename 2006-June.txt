From friedrich.leisch at stat.uni-muenchen.de  Thu Jun  1 09:34:46 2006
From: friedrich.leisch at stat.uni-muenchen.de (Friedrich Leisch)
Date: Thu, 1 Jun 2006 09:34:46 +0200
Subject: [Rd] Bitmap device available for R CMD check?
In-Reply-To: <71257D09F114DA4A8E134DEAC70F25D3053486CE@groamrexm03.amer.pfizer.com>
References: <71257D09F114DA4A8E134DEAC70F25D3053486CE@groamrexm03.amer.pfizer.com>
Message-ID: <17534.39062.892847.491581@lxh5.stat.uni-muenchen.de>

>>>>> On Wed, 31 May 2006 10:57:54 -0400,
>>>>> Kuhn, Max (KM) wrote:

  > Hi,
  > I have a package that I'd like to submit to CRAN that does Sweave-like
  > processing on Open Document format files from Open Office. 

Sounds very interesting!


  > If I remember correctly, there is a machine that automatically R CMD
  > checks CRAN packages. I have two questions about how that system is set
  > up:

  > 1. Is the bitmap device available? The example produces a file using
  > this device and I'd like it to pass R CMD check on your system (as it
  > does on my machines).

Yes, at leats for the main check machine (running Debian Linux). I
cannot speak for the Windows and MacOS checks, but I don't see why
ghostscript shouldn't be available there, too.

  > 2. Are there any restrictions on the Latex packages called in the
  > vignette? This is not a big deal, but it would be good to know how much
  > flexibility I have in producing that document.


We do not run latex on the vignette (this *is* documented),
only the R code is checked. The reason is exactly your question: Latex
is to heterogenous to assume we have all packages the author of a
vignette has, and we do not want to limit the typesetting.

HTH,
Fritz

-- 
-----------------------------------------------------------------------
Prof. Dr. Friedrich Leisch 

Institut f?r Statistik                          Tel: (+49 89) 2180 3165
Ludwig-Maximilians-Universit?t                  Fax: (+49 89) 2180 5308
Ludwigstra?e 33
D-80539 M?nchen                 http://www.stat.uni-muenchen.de/~leisch


From ligges at statistik.uni-dortmund.de  Thu Jun  1 09:48:33 2006
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 01 Jun 2006 09:48:33 +0200
Subject: [Rd] Bitmap device available for R CMD check?
In-Reply-To: <17534.39062.892847.491581@lxh5.stat.uni-muenchen.de>
References: <71257D09F114DA4A8E134DEAC70F25D3053486CE@groamrexm03.amer.pfizer.com>
	<17534.39062.892847.491581@lxh5.stat.uni-muenchen.de>
Message-ID: <447E9BD1.30502@statistik.uni-dortmund.de>

Friedrich Leisch wrote:
>>>>>>On Wed, 31 May 2006 10:57:54 -0400,
>>>>>>Kuhn, Max (KM) wrote:
> 
> 
>   > Hi,
>   > I have a package that I'd like to submit to CRAN that does Sweave-like
>   > processing on Open Document format files from Open Office. 
> 
> Sounds very interesting!
> 
> 
>   > If I remember correctly, there is a machine that automatically R CMD
>   > checks CRAN packages. I have two questions about how that system is set
>   > up:
> 
>   > 1. Is the bitmap device available? The example produces a file using
>   > this device and I'd like it to pass R CMD check on your system (as it
>   > does on my machines).
> 
> Yes, at leats for the main check machine (running Debian Linux). I
> cannot speak for the Windows and MacOS checks, but I don't see why
> ghostscript shouldn't be available there, too.

For Windows, it is available.


>   > 2. Are there any restrictions on the Latex packages called in the
>   > vignette? This is not a big deal, but it would be good to know how much
>   > flexibility I have in producing that document.
> 
> 
> We do not run latex on the vignette (this *is* documented),
> only the R code is checked. The reason is exactly your question: Latex
> is to heterogenous to assume we have all packages the author of a
> vignette has, and we do not want to limit the typesetting.


Let me add: The PDF is generated at the package's "R CMD build" time.

Uwe

> HTH,
> Fritz
>


From friedrich.leisch at stat.uni-muenchen.de  Thu Jun  1 09:52:57 2006
From: friedrich.leisch at stat.uni-muenchen.de (Friedrich Leisch)
Date: Thu, 1 Jun 2006 09:52:57 +0200
Subject: [Rd] Bitmap device available for R CMD check?
In-Reply-To: <971536df0605310811k7aed3471vd668cf7efa5568d4@mail.gmail.com>
References: <71257D09F114DA4A8E134DEAC70F25D3053486CE@groamrexm03.amer.pfizer.com>
	<971536df0605310811k7aed3471vd668cf7efa5568d4@mail.gmail.com>
Message-ID: <17534.40153.102741.136377@lxh5.stat.uni-muenchen.de>

>>>>> On Wed, 31 May 2006 11:11:08 -0400,
>>>>> Gabor Grothendieck (GG) wrote:

  > Others may have better ideas but if you have a problem getting
  > your vignette to pass R CMD check then you could process it
  > yourself using Sweave to create a .tex file and then have a
  > mypkg.Rnw file that just contains the SweaveOpt, %Vignette
  > statements and an \input statement to input the .tex file that you
  > generated yourself.  That way you can generate it in a known
  > environment.

Please do not give advice on the R lists on how to cheat the R check
process (unless there is really good reason for it), it's not like we
implement the tests just for the fun of bothering developers. Simply
compare installing and automatically updating a couple of hundred R
packages on all major computing platforms to installing the same
number (OK, there aren't nearly as many) S toolboxes from Statlib in
Splus and you may get an idea why enforced standards may not be so bad
after all ...

We have already discussed several times on this list that

a) "vignette" is a reserved name for documents where

   - the user can both read a version in PDF format and get a handle
   on the code in electronic form

   - R CMD check can test all R code contained in the document, such
   that the user can rely on the code being up to date

b) we currently have only infrastructure for doing a) for documents in
   Sweave format

c) you can put documents in other formats into inst/doc, but these may
   not call themselves vignettes.

d) I have already offered to provide a better indexing infrastructure
   for documents from c) for R 2.4, but that is a summer project.


Most of the above is explained in "Writing R Extensions".


Best,
Fritz

-- 
-----------------------------------------------------------------------
Prof. Dr. Friedrich Leisch 

Institut f?r Statistik                          Tel: (+49 89) 2180 3165
Ludwig-Maximilians-Universit?t                  Fax: (+49 89) 2180 5308
Ludwigstra?e 33
D-80539 M?nchen                 http://www.stat.uni-muenchen.de/~leisch


From uhkeller at web.de  Thu Jun  1 13:18:40 2006
From: uhkeller at web.de (uhkeller at web.de)
Date: Thu,  1 Jun 2006 13:18:40 +0200 (CEST)
Subject: [Rd] write.foreign creates incorrect SPSS syntax files when
	dataframe contains character variables (PR#8926)
Message-ID: <20060601111840.C86E81E71F@slim.kubism.ku.dk>

Full_Name: Ulrich Keller
Version: 2.3.0 Patched (2006-04-28 r37936)
OS: Windows XP SP2
Submission from: (NULL) (158.64.77.43)


write.foreign(x,...,package="SPSS") creates an incorrect SPSS syntax file when x
contains character variables. SPSS expects character (string) variables to be
defined in a special way in DATA LIST commands:
* varname (A#)
where # is the width of the variable. write.foreign ignores this. As a result,
the contents of the character variables are not read into SPSS at all. For
example:

<CODE>
> x<-data.frame(v1=1,v2=I("some text"))
> library(foreign)
> write.foreign(x,stdout(),stdout(),package="SPSS")
1 "some text"
DATA LIST FILE= "1"  free
/ v1 v2  .

VARIABLE LABELS
v1 "v1" 
 v2 "v2" 
 .

EXECUTE.
</CODE>

The variable definition following DATA LIST is:
/ v1 v2  .

What it should be is:
/ v1 * v2 (A#) .
where # is max(c(max(nchar(v2)), 255)).


From uhkeller at web.de  Thu Jun  1 13:31:26 2006
From: uhkeller at web.de (uhkeller at web.de)
Date: Thu,  1 Jun 2006 13:31:26 +0200 (CEST)
Subject: [Rd] write.foreign (SPSS) does not handle NAs properly (PR#8927)
Message-ID: <20060601113126.9ABA829D3C@slim.kubism.ku.dk>

Full_Name: Ulrich Keller
Version: 2.3.0 Patched (2006-04-28 r37936)
OS: Windows XP SP2
Submission from: (NULL) (158.64.77.43)


write.foreign(x,...,package="SPSS") writes incorrect data files if x contains
NAs. Missing values are represented as "NA" in the file; SPSS will print an
error every time it encounters an "NA". For example:

<CODE>
> x<-data.frame(v1=c(1,NA))
> library(foreign)
> write.foreign(x,stdout(),stdout(),package="SPSS")
1
NA
DATA LIST FILE= "1"  free
/ v1  .

VARIABLE LABELS
v1 "v1" 
 .

EXECUTE.
</CODE>

The first two lines after the call to write.foreign are the contents of the text
data file that is written. The "NA" should not be there and would make SPSS
generate an error.
One solution would be to use commas instead of blanks as delimiters and "" or "
" for NAs. The DATA LIST command would then be
DATA LIST FILE=filename FREE (",")


From pramod.r.anugu at jsums.edu  Thu Jun  1 16:02:57 2006
From: pramod.r.anugu at jsums.edu (Pramod Anugu)
Date: Thu, 1 Jun 2006 09:02:57 -0500
Subject: [Rd] HELP Running R
Message-ID: <000b01c68584$1704b6c0$1321848f@DHP5LZ61>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20060601/7010ff70/attachment.pl 

From sfalcon at fhcrc.org  Thu Jun  1 16:33:54 2006
From: sfalcon at fhcrc.org (Seth Falcon)
Date: Thu, 01 Jun 2006 07:33:54 -0700
Subject: [Rd] HELP Running R
In-Reply-To: <000b01c68584$1704b6c0$1321848f@DHP5LZ61> (Pramod Anugu's message
	of "Thu, 1 Jun 2006 09:02:57 -0500")
References: <000b01c68584$1704b6c0$1321848f@DHP5LZ61>
Message-ID: <m2lksheyi5.fsf@ziti.local>

"Pramod Anugu" <pramod.r.anugu at jsums.edu> writes:

> Under the 2.5 Sub-architectures section it talks about X86_64 architecture
> for Linux.
> 1. tar -zxvf R-2.3.0.tar.gz

It seems like you are following the right steps.  I would try
downloading a new tarball, you can get R-2.3.1 which will have bug
fixes.


From pgilbert at bank-banque-canada.ca  Thu Jun  1 18:00:07 2006
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 01 Jun 2006 12:00:07 -0400
Subject: [Rd] package installation errors
Message-ID: <447F0F07.7090900@bank-banque-canada.ca>

I installed R-2.3.1 and ran make check without problem, but I am having 
trouble installing several packages  using gcc (GCC) 3.2.3 20030502 (Red 
Hat Linux 3.2.3-53)
on Red Hat Enterprise Linux AS release 3 (Taroon Update 7) Kernel 
2.4.21-40.ELsmp on an x86_64

Below are the messages from MCMCpack. Perhaps my systems are messed up?

Paul Gilbert

 > install.packages("MCMCpack")
Warning in install.packages("MCMCpack") : argument 'lib' is missing: 
using /home/mfa/gilp/toolchain/R/asd05546/R-2.3.1/site-library
--- Please select a CRAN mirror for use in this session ---
....

Selection: 3
trying URL 'http://cran.at.r-project.org/src/contrib/MCMCpack_0.7-2.tar.gz'
Content type 'application/x-tar' length 303618 bytes
opened URL
==================================================
downloaded 296Kb

* Installing *source* package 'MCMCpack' ...
checking for C++ compiler default output file name... a.out
checking whether the C++ compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for gcc... gcc
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking how to run the C preprocessor... gcc -E
checking for egrep... grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking ieeefp.h usability... no
checking ieeefp.h presence... no
checking for ieeefp.h... no
checking for trunc... no
configure: creating ./config.status
config.status: creating src/Makevars
** libs
g++ -I/home/mfa/gilp/toolchain/R/asd05546/R-2.3.1/include 
-I/home/mfa/gilp/toolchain/R/asd05546/R-2.3.1/include  
-I/usr/local/include  -DSCYTHE_COMPILE_DIRECT -DSCYTHE_NO_RANGE   -fpic  
-g -O2 -c distributions.cc -o distributions.o
distributions.cc: In function `double SCYTHE::INTERNAL::dbinom_raw(const
   double&, const double&, const double&, const double&)':
distributions.cc:2048: could not split insn
(insn:TI 454 450 91 (set (reg:DF 23 rxmm2 [58])
        (if_then_else:DF (eq (mem:DF (reg/v/u/f:DI 3 rbx [59]) [5 S8 A64])
                (reg:DF 23 rxmm2 [58]))
            (reg:DF 21 rxmm0 [160])
            (const_double:DF 0 [0x0] 0 [0x0] 0 [0x0]))) 660 
{*sse_movdfcc_const0_3} (insn_list 76 (insn_list 450 (nil)))
    (expr_list:REG_DEAD (reg/v/u/f:DI 3 rbx [59])
        (expr_list:REG_DEAD (reg:DF 21 rxmm0 [160])
            (nil))))
distributions.cc:2048: Internal compiler error in final_scan_insn, at 
final.c:
   2624
Please submit a full bug report,
with preprocessed source if appropriate.
See <URL:http://bugzilla.redhat.com/bugzilla/> for instructions.
make: *** [distributions.o] Error 1
chmod: failed to get attributes of 
`/home/mfa/gilp/toolchain/R/asd05546/R-2.3.1/site-library/MCMCpack/libs/*': 
No such file or directory
ERROR: compilation failed for package 'MCMCpack'
** Removing 
'/home/mfa/gilp/toolchain/R/asd05546/R-2.3.1/site-library/MCMCpack'

The downloaded packages are in
    /tmp/RtmpZMSbbz/downloaded_packages
Warning message:
installation of package 'MCMCpack' had non-zero exit status in: 
install.packages("MCMCpack")
 >
====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential inform...{{dropped}}


From ripley at stats.ox.ac.uk  Thu Jun  1 18:37:32 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 1 Jun 2006 17:37:32 +0100 (BST)
Subject: [Rd] package installation errors
In-Reply-To: <447F0F07.7090900@bank-banque-canada.ca>
References: <447F0F07.7090900@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.64.0606011731310.25888@gannet.stats.ox.ac.uk>

This is a report on a compiler error, not on R.  You could report it to 
RH, but it might be more effective to install gcc 3.4.6 (which works well 
on x86_64).

We've seen quite a few problems with early gcc versions on x86_64: that 
compiler is three years' old, which as I recall was early days for that 
architecture.  (We found it flaky in early 2004.)

On Thu, 1 Jun 2006, Paul Gilbert wrote:

> I installed R-2.3.1 and ran make check without problem, but I am having
> trouble installing several packages  using gcc (GCC) 3.2.3 20030502 (Red
> Hat Linux 3.2.3-53)
> on Red Hat Enterprise Linux AS release 3 (Taroon Update 7) Kernel
> 2.4.21-40.ELsmp on an x86_64
>
> Below are the messages from MCMCpack. Perhaps my systems are messed up?
>
> Paul Gilbert
>
> > install.packages("MCMCpack")
> Warning in install.packages("MCMCpack") : argument 'lib' is missing:
> using /home/mfa/gilp/toolchain/R/asd05546/R-2.3.1/site-library
> --- Please select a CRAN mirror for use in this session ---
> ....
>
> Selection: 3
> trying URL 'http://cran.at.r-project.org/src/contrib/MCMCpack_0.7-2.tar.gz'
> Content type 'application/x-tar' length 303618 bytes
> opened URL
> ==================================================
> downloaded 296Kb
>
> * Installing *source* package 'MCMCpack' ...
> checking for C++ compiler default output file name... a.out
> checking whether the C++ compiler works... yes
> checking whether we are cross compiling... no
> checking for suffix of executables...
> checking for suffix of object files... o
> checking whether we are using the GNU C++ compiler... yes
> checking whether g++ accepts -g... yes
> checking for gcc... gcc
> checking whether we are using the GNU C compiler... yes
> checking whether gcc accepts -g... yes
> checking for gcc option to accept ANSI C... none needed
> checking how to run the C preprocessor... gcc -E
> checking for egrep... grep -E
> checking for ANSI C header files... yes
> checking for sys/types.h... yes
> checking for sys/stat.h... yes
> checking for stdlib.h... yes
> checking for string.h... yes
> checking for memory.h... yes
> checking for strings.h... yes
> checking for inttypes.h... yes
> checking for stdint.h... yes
> checking for unistd.h... yes
> checking ieeefp.h usability... no
> checking ieeefp.h presence... no
> checking for ieeefp.h... no
> checking for trunc... no
> configure: creating ./config.status
> config.status: creating src/Makevars
> ** libs
> g++ -I/home/mfa/gilp/toolchain/R/asd05546/R-2.3.1/include
> -I/home/mfa/gilp/toolchain/R/asd05546/R-2.3.1/include
> -I/usr/local/include  -DSCYTHE_COMPILE_DIRECT -DSCYTHE_NO_RANGE   -fpic
> -g -O2 -c distributions.cc -o distributions.o
> distributions.cc: In function `double SCYTHE::INTERNAL::dbinom_raw(const
>   double&, const double&, const double&, const double&)':
> distributions.cc:2048: could not split insn
> (insn:TI 454 450 91 (set (reg:DF 23 rxmm2 [58])
>        (if_then_else:DF (eq (mem:DF (reg/v/u/f:DI 3 rbx [59]) [5 S8 A64])
>                (reg:DF 23 rxmm2 [58]))
>            (reg:DF 21 rxmm0 [160])
>            (const_double:DF 0 [0x0] 0 [0x0] 0 [0x0]))) 660
> {*sse_movdfcc_const0_3} (insn_list 76 (insn_list 450 (nil)))
>    (expr_list:REG_DEAD (reg/v/u/f:DI 3 rbx [59])
>        (expr_list:REG_DEAD (reg:DF 21 rxmm0 [160])
>            (nil))))
> distributions.cc:2048: Internal compiler error in final_scan_insn, at
> final.c:
>   2624
> Please submit a full bug report,
> with preprocessed source if appropriate.
> See <URL:http://bugzilla.redhat.com/bugzilla/> for instructions.
> make: *** [distributions.o] Error 1
> chmod: failed to get attributes of
> `/home/mfa/gilp/toolchain/R/asd05546/R-2.3.1/site-library/MCMCpack/libs/*':
> No such file or directory
> ERROR: compilation failed for package 'MCMCpack'
> ** Removing
> '/home/mfa/gilp/toolchain/R/asd05546/R-2.3.1/site-library/MCMCpack'
>
> The downloaded packages are in
>    /tmp/RtmpZMSbbz/downloaded_packages
> Warning message:
> installation of package 'MCMCpack' had non-zero exit status in:
> install.packages("MCMCpack")
> >
> ====================================================================================
>
> La version fran?aise suit le texte anglais.
>
> ------------------------------------------------------------------------------------
>
> This email may contain privileged and/or confidential inform...{{dropped}}
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From lobry at biomserv.univ-lyon1.fr  Fri Jun  2 11:03:57 2006
From: lobry at biomserv.univ-lyon1.fr (Jean lobry)
Date: Fri, 2 Jun 2006 11:03:57 +0200
Subject: [Rd] error message from help.search()
Message-ID: <p0600202bc0a5ab956d82@[192.168.1.10]>

Dear R-Devel,

consider:

[rufus:~] lobry% R --vanilla --quiet
>  sessionInfo()
Version 2.3.0 (2006-04-24)
powerpc-apple-darwin8.6.0

attached base packages:
[1] "methods"   "stats"     "graphics"  "grDevices" "utils"     "datasets"
[7] "base"
>  help.search(package = "graphics", keyword = "hplot")
>  help.search(package = "stats", keyword = "hplot")
Error in help.search(package = "stats", keyword = "hplot") :
         could not find package 'stats'
>  q()


could it be possible in this situation to have an error message
giving a clue to the 'rebuild' argument in help.search() ?

Thanks,
Jean
-- 
Jean R. Lobry            (lobry at biomserv.univ-lyon1.fr)
Laboratoire BBE-CNRS-UMR-5558, Univ. C. Bernard - LYON I,
43 Bd 11/11/1918, F-69622 VILLEURBANNE CEDEX, FRANCE
allo  : +33 472 43 12 87     fax    : +33 472 43 13 88
http://pbil.univ-lyon1.fr/members/lobry/


From ripley at stats.ox.ac.uk  Fri Jun  2 12:05:14 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 2 Jun 2006 11:05:14 +0100 (BST)
Subject: [Rd] error message from help.search()
In-Reply-To: <p0600202bc0a5ab956d82@[192.168.1.10]>
References: <p0600202bc0a5ab956d82@[192.168.1.10]>
Message-ID: <Pine.LNX.4.64.0606021102420.22124@gannet.stats.ox.ac.uk>

On Fri, 2 Jun 2006, Jean lobry wrote:

> Dear R-Devel,
>
> consider:
>
> [rufus:~] lobry% R --vanilla --quiet
>>  sessionInfo()
> Version 2.3.0 (2006-04-24)
> powerpc-apple-darwin8.6.0
>
> attached base packages:
> [1] "methods"   "stats"     "graphics"  "grDevices" "utils"     "datasets"
> [7] "base"
>>  help.search(package = "graphics", keyword = "hplot")
>>  help.search(package = "stats", keyword = "hplot")
> Error in help.search(package = "stats", keyword = "hplot") :
>         could not find package 'stats'
>>  q()
>
>
> could it be possible in this situation to have an error message
> giving a clue to the 'rebuild' argument in help.search() ?

As I *have already said* that the message is different in R-devel:

> help.search(package = "stats", keyword = "hplot")
Error in help.search(package = "stats", keyword = "hplot") :
         no information in the data base for package 'stats': need 'rebuild = TRUE'?

!  And I have now ported that to R-patched.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From tabelow at wias-berlin.de  Fri Jun  2 12:23:41 2006
From: tabelow at wias-berlin.de (tabelow at wias-berlin.de)
Date: Fri,  2 Jun 2006 12:23:41 +0200 (CEST)
Subject: [Rd] Installation R-2.3.1 on IBM AIX5.3 (PR#8931)
Message-ID: <20060602102341.E87BA3F75C@slim.kubism.ku.dk>

Full_Name: Karsten Tabelow
Version: R-2.3.1
OS: AIX5.3
Submission from: (NULL) (62.141.176.2)


Specification in config.site:

CC=xlc_r
CFLAGS='-O -qstrict'
F77=xlf_r
FFLAGS='-O -qstrict'
SHLIB_LDFLAGS='-G'
DYLIB_LDFLAGS='-G'
LDFLAGS='-brtl'
CXX=xlc++_r
CXXFLAGS='-O -qstrict'

Complilation error in src/main/printutils.c:
"printutils.c", line 582.7: 1506-1352 (S) "va_start" may not appear in a
function without a variable argument list.
"printutils.c", line 591.5: 1506-277 (S) Syntax error: possible missing
';' or ','?

Solution:
add variable argument list in Rvprintf(const char *format, va_list arg, ...)
add ';' in line 591




@echo "tools:::makeLazyLoading(\"$(pkg)\")" | \
 R_DEFAULT_PACKAGES=NULL LC_COLLATE=C $(R_EXE) --slave > /dev/null

in Makefiles of various packages leads to:

 *** caught illegal operation ***
address 10000000, cause 'illegal opcode'



With best regards,

Karsten Tabelow


From ripley at stats.ox.ac.uk  Fri Jun  2 12:47:42 2006
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Fri,  2 Jun 2006 12:47:42 +0200 (CEST)
Subject: [Rd] Installation R-2.3.1 on IBM AIX5.3 (PR#8931)
Message-ID: <20060602104742.C6F0C3F5C9@slim.kubism.ku.dk>

On Fri, 2 Jun 2006, tabelow at wias-berlin.de wrote:

> Full_Name: Karsten Tabelow
> Version: R-2.3.1
> OS: AIX5.3
> Submission from: (NULL) (62.141.176.2)
>
>
> Specification in config.site:
>
> CC=xlc_r
> CFLAGS='-O -qstrict'
> F77=xlf_r
> FFLAGS='-O -qstrict'
> SHLIB_LDFLAGS='-G'
> DYLIB_LDFLAGS='-G'
> LDFLAGS='-brtl'
> CXX=xlc++_r
> CXXFLAGS='-O -qstrict'
>
> Complilation error in src/main/printutils.c:
> "printutils.c", line 582.7: 1506-1352 (S) "va_start" may not appear in a
> function without a variable argument list.
> "printutils.c", line 591.5: 1506-277 (S) Syntax error: possible missing
> ';' or ','?
>
> Solution:
> add variable argument list in Rvprintf(const char *format, va_list arg, ...)
> add ';' in line 591

There is already a ; on line 591 (looks like the error is on line 589)! 
Can you please supply a copy of what you actually used?

It seems your compiler is not at all recent and lacks C99 features. 
Please specify more precisely which compiler this is.  (It looks like no 
beta-tester of 2.3.0 found such a compiler, but gcc has been used 
successfully on AIX 5.3.)

> @echo "tools:::makeLazyLoading(\"$(pkg)\")" | \
> R_DEFAULT_PACKAGES=NULL LC_COLLATE=C $(R_EXE) --slave > /dev/null
>
> in Makefiles of various packages leads to:
>
> *** caught illegal operation ***
> address 10000000, cause 'illegal opcode'

That suggests a compiler error, and there is nothing reproducible.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From pgilbert at bank-banque-canada.ca  Fri Jun  2 15:48:40 2006
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 02 Jun 2006 09:48:40 -0400
Subject: [Rd] task view errors
Message-ID: <448041B8.5020804@bank-banque-canada.ca>

I am getting several errors about Windows only packages when I use task 
views.  Is this suppose to be a Windows-centric utility?

Also, I am sure there must be a simple way to tell which packages are in 
a view, but I haven't found it. If there isn't, it would be nice to have.

Paul Gilbert
_______

install.views(c(
 "Multivariate", "Econometrics", "Finance", "gR", "Bayesian",
 "SocialSciences"),
  repos = "http://cran.at.r-project.org")

* Installing *source* package 'rcom' ...
Package 'rcom' can only be installed/used under Windows.
ERROR: configuration failed for package 'rcom'
** Removing 
'/home/paul/toolchain/R/Linux-2.6.7-mm6/R-2.3.0/site-library/rcom'
* Installing *source* package 'BRugs' ...
Package 'BRugs' currently only works under Windows.\nIt is supposed to 
work under Linux in future releases.
ERROR: configuration failed for package 'BRugs'
** Removing 
'/home/paul/toolchain/R/Linux-2.6.7-mm6/R-2.3.0/site-library/BRugs'
* Installing *source* package 'mimR' ...
Package 'mimR' can only be installed/used under Windows.
ERROR: configuration failed for package 'mimR'
** Removing 
'/home/paul/toolchain/R/Linux-2.6.7-mm6/R-2.3.0/site-library/mimR'


====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential inform...{{dropped}}


From Achim.Zeileis at wu-wien.ac.at  Fri Jun  2 16:00:19 2006
From: Achim.Zeileis at wu-wien.ac.at (Achim Zeileis)
Date: Fri, 2 Jun 2006 16:00:19 +0200
Subject: [Rd] task view errors
In-Reply-To: <448041B8.5020804@bank-banque-canada.ca>
References: <448041B8.5020804@bank-banque-canada.ca>
Message-ID: <20060602160019.2fd2f0ff.Achim.Zeileis@wu-wien.ac.at>

Paul,

ctv is a contributed package...

> I am getting several errors about Windows only packages when I use
> task views.  Is this suppose to be a Windows-centric utility?

No.
I'll see whether there is an easy way to keep install.views() from
installing Windows-only packages on non-Windows machines.

> Also, I am sure there must be a simple way to tell which packages are
> in a view, but I haven't found it.

e.g., via:
  R> x <- available.views()
  R> x[[1]]$packagelist

Best,
Z


From ligges at statistik.uni-dortmund.de  Fri Jun  2 16:03:59 2006
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 02 Jun 2006 16:03:59 +0200
Subject: [Rd] task view errors
In-Reply-To: <448041B8.5020804@bank-banque-canada.ca>
References: <448041B8.5020804@bank-banque-canada.ca>
Message-ID: <4480454F.6090100@statistik.uni-dortmund.de>

Paul Gilbert wrote:

> I am getting several errors about Windows only packages when I use task 
> views.  Is this suppose to be a Windows-centric utility?

Paul,

not at all, but the 3 packages mentioned below only work under Windows, 
because they depend on software such as DCOM, OpenBUGS and MIM, all of 
them available for Windows only.


> Also, I am sure there must be a simple way to tell which packages are in 
> a view, but I haven't found it. If there isn't, it would be nice to have.

For example:
   available.views()[[1]]

Best,
Uwe



> Paul Gilbert
> _______
> 
> install.views(c(
>  "Multivariate", "Econometrics", "Finance", "gR", "Bayesian",
>  "SocialSciences"),
>   repos = "http://cran.at.r-project.org")
> 
> * Installing *source* package 'rcom' ...
> Package 'rcom' can only be installed/used under Windows.
> ERROR: configuration failed for package 'rcom'
> ** Removing 
> '/home/paul/toolchain/R/Linux-2.6.7-mm6/R-2.3.0/site-library/rcom'
> * Installing *source* package 'BRugs' ...
> Package 'BRugs' currently only works under Windows.\nIt is supposed to 
> work under Linux in future releases.
> ERROR: configuration failed for package 'BRugs'
> ** Removing 
> '/home/paul/toolchain/R/Linux-2.6.7-mm6/R-2.3.0/site-library/BRugs'
> * Installing *source* package 'mimR' ...
> Package 'mimR' can only be installed/used under Windows.
> ERROR: configuration failed for package 'mimR'
> ** Removing 
> '/home/paul/toolchain/R/Linux-2.6.7-mm6/R-2.3.0/site-library/mimR'
> 
> 
> ====================================================================================
> 
> La version fran?aise suit le texte anglais.
> 
> ------------------------------------------------------------------------------------
> 
> This email may contain privileged and/or confidential inform...{{dropped}}
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ligges at statistik.uni-dortmund.de  Fri Jun  2 16:52:40 2006
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 02 Jun 2006 16:52:40 +0200
Subject: [Rd] task view errors
In-Reply-To: <20060602160019.2fd2f0ff.Achim.Zeileis@wu-wien.ac.at>
References: <448041B8.5020804@bank-banque-canada.ca>
	<20060602160019.2fd2f0ff.Achim.Zeileis@wu-wien.ac.at>
Message-ID: <448050B8.70106@statistik.uni-dortmund.de>

Achim Zeileis wrote:

> Paul,
> 
> ctv is a contributed package...
> 
> 
>>I am getting several errors about Windows only packages when I use
>>task views.  Is this suppose to be a Windows-centric utility?
> 
> 
> No.
> I'll see whether there is an easy way to keep install.views() from
> installing Windows-only packages on non-Windows machines.


Currently, you cannot know automatically if a package works *only* on 
Windows (or whatever OS else). We have had this discussion before, and 
yes, it would be nice to have some additional DESCRIPTION field for 
OS/platform restrictions. But then it is difficult to have some unique 
identifiers and to get the information from the OS. And then people 
might want to do cross-platform stuff and so on.

Uwe


> 
>>Also, I am sure there must be a simple way to tell which packages are
>>in a view, but I haven't found it.
> 
> 
> e.g., via:
>   R> x <- available.views()
>   R> x[[1]]$packagelist
> 
> Best,
> Z
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From kevin.hendricks at sympatico.ca  Fri Jun  2 17:36:31 2006
From: kevin.hendricks at sympatico.ca (Kevin B. Hendricks)
Date: Fri, 2 Jun 2006 11:36:31 -0400
Subject: [Rd] Helping out - simple bugs to help familiarize with R design,
	source, etc
Message-ID: <E49FAB76-5885-44DE-8D8E-3A8AA7D7CE96@sympatico.ca>

Hi All,

Well I finally have found the time to get svn working and I have  
successfully built my own tuned atlas (multi-threaded version) libs  
and have both the r-devel and r-patched trees building daily on my box.

The problem is I still do not have a good idea of the layout and  
design of R, and typically I "learn by doing" by trying to fix a bug  
that hits me.  Unfortunately ;-) no bugs have hit me (which indicates  
how good the current software really is!) other than the small build  
issue I sent a pseudo-patch for earlier.

I tried to look at your bug database but I found it hard to tell what  
was really relevant.  So could someone who knows please point me at  
one or two minor or annoying bugs they want to have tracked down and  
fixed.  Fixing those will force me to become more familiar with the  
source code and help me learn my way around before jumping in further.

Duncan, sorry about not getting in touch with you last week, I simply  
have been overwhelmed with trying to clean up and pack up my office,  
return computer equipment and the like.  I will try again next week  
once I am back in the office.

Thanks,

Kevin


From sfalcon at fhcrc.org  Fri Jun  2 19:11:27 2006
From: sfalcon at fhcrc.org (Seth Falcon)
Date: Fri, 02 Jun 2006 10:11:27 -0700
Subject: [Rd] Typo fix for readBin.Rd
Message-ID: <m2hd338ou8.fsf@ziti.local>

Hi, 

The man page for readBin has a small typo:

--- a/src/library/base/man/readBin.Rd
+++ b/src/library/base/man/readBin.Rd
@@ -58,7 +58,7 @@ writeBin(object, con, size = NA, endian 
 
   \code{readBin} and \code{writeBin} read and write C-style
   zero-terminated character strings.  Input strings are limited to 10000
-  characters.  \code{\link{readChar}} and \code{\code{writeChar}}
+  characters.  \code{\link{readChar}} and \code{\link{writeChar}}
   
   Handling \R's missing and special (\code{Inf}, \code{-Inf} and


From ripley at stats.ox.ac.uk  Fri Jun  2 20:00:57 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 2 Jun 2006 19:00:57 +0100 (BST)
Subject: [Rd] Typo fix for readBin.Rd
In-Reply-To: <m2hd338ou8.fsf@ziti.local>
References: <m2hd338ou8.fsf@ziti.local>
Message-ID: <Pine.LNX.4.64.0606021900250.15085@gannet.stats.ox.ac.uk>

Thanks.  The following line of explanation has also disappeared.

On Fri, 2 Jun 2006, Seth Falcon wrote:

> Hi,
>
> The man page for readBin has a small typo:
>
> --- a/src/library/base/man/readBin.Rd
> +++ b/src/library/base/man/readBin.Rd
> @@ -58,7 +58,7 @@ writeBin(object, con, size = NA, endian
>
>   \code{readBin} and \code{writeBin} read and write C-style
>   zero-terminated character strings.  Input strings are limited to 10000
> -  characters.  \code{\link{readChar}} and \code{\code{writeChar}}
> +  characters.  \code{\link{readChar}} and \code{\link{writeChar}}
>
>   Handling \R's missing and special (\code{Inf}, \code{-Inf} and
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From kevin.hendricks at sympatico.ca  Fri Jun  2 20:03:20 2006
From: kevin.hendricks at sympatico.ca (Kevin B. Hendricks)
Date: Fri, 2 Jun 2006 14:03:20 -0400
Subject: [Rd] Helping out - simple bugs to help familiarize with R
	design, source, etc
Message-ID: <021EB023-B2CD-4C07-85C7-45E0AA9DFEB0@sympatico.ca>

Hi Thomas,

> A key fact here is that NAMED(object) is 0 if the object is not  
> (part of) an R variable, 1 if it is (part of) exactly one R  
> variable, 2 if it is part of more than one R variable.


> The point is that NAMED=0 or 1 objects can be safely modified, but  
> NAMED=2 have to be copied first (with the duplicate() function).

I am not sure if this question makes much sense since I am unsure of  
what you mean by "object" here (is that a object oriented programming  
idea of "object" or a more general term for  some structure)
but ...

Can an "object" be an extended "structure" comprised of other  
"objects" and if so do each of the substructure objects have their  
own NAMED() attribute?  If so, then if any of those sub objects  
actually is part of another variable, does that force the NAMED()  
attribute of the parent (or enclosing) object to have a value of 2  
(forcing duplication before modification) for the entire thing?

If so, perhaps the NAMED() attribute of the enclosing object is  
simply not being properly updated to be the maximum of all of the  
NAMED() attributes of the sub objects?  Isn't this what the Note: in  
the bug report was talking about?

This might be fun to look at.  But don't hold your breath for any  
quick fixes!  I still have a very steep learning curve to climb  
before I can be of much use for anything other than build time issues.


Thanks,

Kevin


From kevin.hendricks at sympatico.ca  Fri Jun  2 23:41:40 2006
From: kevin.hendricks at sympatico.ca (Kevin B. Hendricks)
Date: Fri, 2 Jun 2006 17:41:40 -0400
Subject: [Rd] Helping out - simple bugs to help familiarize with R
	design, source, etc
Message-ID: <86D62BD1-917C-48D9-AC96-AE9EFFCC4F84@sympatico.ca>

Hi,

Please forgive me but I am just learning how to debug in this  
environment.

Info on Bug 7924, as far as I understand the comment, if someone knew  
how calling identical(call1,call2) actually helped set NAMED it might  
lead them to a solution.

Here is my attempt to track down when how this happens.


Okay from examining compute_identical in main/identical.c it is clear  
that it does not change any of the NAMED values (this is also shown  
by single stepping through the entire routine.

Therefore the "fix" caused by invoking "identical" must have happened  
either on the way there or on the way back.

Here is the backtrace from the call to identical for the problem case

(gdb) bt
#0  compute_identical (x=0x9a0130, y=0x99d0f0) at ../../../r-devel/r- 
devel/R/src/main/identical.c:53
#1  0x00002aaaaab7fede in do_identical (x=0x9a0130, y=0x99d0f0)  
at ../../../r-devel/r-devel/R/src/main/identical.c:38
#2  0x00002aaaaab95650 in do_internal (call=Variable "call" is not  
available.
) at ../../../r-devel/r-devel/R/src/main/names.c:1093
#3  0x00002aaaaab6785b in Rf_eval (e=0x92ea98, rho=0x999750)  
at ../../../r-devel/r-devel/R/src/main/eval.c:424
#4  0x00002aaaaab697c6 in Rf_applyClosure (call=0x99d2b0,  
op=0x92d678, arglist=0x999638, rho=0x547858, suppliedenv=0x547890)
     at ../../../r-devel/r-devel/R/src/main/eval.c:614
#5  0x00002aaaaab676f8 in Rf_eval (e=0x99d2b0, rho=0x547858)  
at ../../../r-devel/r-devel/R/src/main/eval.c:455
#6  0x00002aaaaab8639e in Rf_ReplIteration (rho=0x547858,  
savestack=0, browselevel=0, state=0x7fffffd59a70) at ../../../r-devel/ 
r-devel/R/src/main/main.c:254
#7  0x00002aaaaab86540 in R_ReplConsole (rho=0x547858, savestack=0,  
browselevel=0) at ../../../r-devel/r-devel/R/src/main/main.c:302
#8  0x00002aaaaab86860 in run_Rmainloop () at ../../../r-devel/r- 
devel/R/src/main/main.c:915
#9  0x000000000040081d in main (ac=Variable "ac" is not available.
) at ../../../r-devel/r-devel/R/src/main/Rmain.c:33


Now grepping through all of the files in main for the macro SET_NAMED  
many of them appear in eval.c

Specifically, some appear in R_eval which is in the backtrace to  
compute_identical.

So I set a breakpoint for Rf_eval and for every line in that routine  
that invokes SET_NAMED.

Here is a result of the gdb trace (see my comments sprinkled  
throughout) as the problem case is entered.

Please forgive its length


 > call1<- Quote(f(arg[[1]], arg[[1]], arg[[1]]))

Breakpoint 3, Rf_eval (e=0x9a0328, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307
307     {
(gdb) c
Continuing.

Breakpoint 3, Rf_eval (e=0x9a0280, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307
307     {
(gdb) c
Continuing.

Breakpoint 3, Rf_eval (e=0x775ff8, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307
307     {
(gdb) c
Continuing.


So we see none of the SET_NAMED breakpoints (in Rf_eval) being set  
when call1 is first defined which makes sense (at least with my  
limited understanding it does).

Now here we define call2

 > call2 <- Quote(f(arg[[1]]))[c(1,2,2,2)]

Breakpoint 3, Rf_eval (e=0x99ddb8, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307

Breakpoint 3, Rf_eval (e=0x99dd10, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307

Breakpoint 3, Rf_eval (e=0x9a06a8, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307

Breakpoint 3, Rf_eval (e=0x775ff8, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307

Breakpoint 3, Rf_eval (e=0x99dbc0, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307

Breakpoint 3, Rf_eval (e=0xf7f118, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307


Below in the definition of call2 we see SET_NAMED being set to 2  
which I think if I understand things makes sense.


Breakpoint 4, Rf_eval (e=0xf7f118, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:362
362             if (NAMED(tmp) != 2) SET_NAMED(tmp, 2);
(gdb) c
Continuing.

358             /* Make sure constants in expressions are NAMED  
before being
359                used as values.  Setting NAMED to 2 makes sure  
weird calls
360                to assignment functions won't modify constants in
361                expressions.  */
362             if (NAMED(tmp) != 2) SET_NAMED(tmp, 2);


Breakpoint 3, Rf_eval (e=0xf7f148, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307


And again

Breakpoint 4, Rf_eval (e=0xf7f148, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:362
362             if (NAMED(tmp) != 2) SET_NAMED(tmp, 2);


Breakpoint 3, Rf_eval (e=0xf7f1d8, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307


And Again

Breakpoint 4, Rf_eval (e=0xf7f1d8, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:362
362             if (NAMED(tmp) != 2) SET_NAMED(tmp, 2);
(gdb) c
Continuing.

Breakpoint 3, Rf_eval (e=0xf7f208, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307


And again but always via line 362

Breakpoint 4, Rf_eval (e=0xf7f208, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:362
362             if (NAMED(tmp) != 2) SET_NAMED(tmp, 2);
(gdb) c
Continuing.



Now we run the identical(call1,call2) statement

 > identical(call1,call2)


Breakpoint 3, Rf_eval (e=0x99d2b0, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307

Breakpoint 3, Rf_eval (e=0x7509b0, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307

Breakpoint 3, Rf_eval (e=0x92ea98, rho=0x999750) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307

Breakpoint 3, Rf_eval (e=0x56ca30, rho=0x999750) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307

Breakpoint 3, Rf_eval (e=0x99d320, rho=0x999750) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307

Breakpoint 3, Rf_eval (e=0x9ecb28, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307


And finally we see SET_NAMED being set in a different place in the  
code then in the original definition.

So for some reason  when call2 is first defined for PROMSXP objects,  
the SET_NAMED field is not properly set?

Breakpoint 5, Rf_eval (e=0x56ca30, rho=0x999750) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:389
389                 SET_NAMED(tmp, 2);
(gdb) list
384                 else error(_("argument is missing, with no  
default"));
385             }
386             else if (TYPEOF(tmp) == PROMSXP) {
387                 PROTECT(tmp);
388                 tmp = eval(tmp, rho);
389                 SET_NAMED(tmp, 2);
390                 UNPROTECT(1);
391             }
392             else if (!isNull(tmp) && NAMED(tmp) < 1)
393                 SET_NAMED(tmp, 1);
(gdb) c
Continuing.

Breakpoint 3, Rf_eval (e=0x92d5d0, rho=0x999750) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307

Breakpoint 3, Rf_eval (e=0x999670, rho=0x999750) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307

Breakpoint 3, Rf_eval (e=0x9eb938, rho=0x547858) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:307


It happens here again


Breakpoint 5, Rf_eval (e=0x92d5d0, rho=0x999750) at ../../../r-devel/ 
r-devel/R/src/main/eval.c:389
389                 SET_NAMED(tmp, 2);
(gdb) list
384                 else error(_("argument is missing, with no  
default"));
385             }
386             else if (TYPEOF(tmp) == PROMSXP) {
387                 PROTECT(tmp);
388                 tmp = eval(tmp, rho);
389                 SET_NAMED(tmp, 2);
390                 UNPROTECT(1);
391             }
392             else if (!isNull(tmp) && NAMED(tmp) < 1)
393                 SET_NAMED(tmp, 1);
(gdb) c
Continuing.

And then finally compute_identical is reached.

Breakpoint 1, compute_identical (x=0x9a0130, y=0x99d0f0) at ../../../ 
r-devel/r-devel/R/src/main/identical.c:53
53      {
$150 = {sxpinfo = {type = 6, obj = 0, named = 2, gp = 0, mark = 0,  
debug = 0, trace = 0, fin = 0, gcgen = 0, gccls = 0}, attrib =  
0x508818, gengc_next_node = 0x9a0168,
   gengc_prev_node = 0x9a00f8, u = {primsxp = {offset = 10663048},  
symsxp = {pname = 0xa2b488, value = 0x9a15b0, internal = 0x508818},  
listsxp = {carval = 0xa2b488,
       cdrval = 0x9a15b0, tagval = 0x508818}, envsxp = {frame =  
0xa2b488, enclos = 0x9a15b0, hashtab = 0x508818}, closxp = {formals =  
0xa2b488, body = 0x9a15b0,
       env = 0x508818}, promsxp = {value = 0xa2b488, expr = 0x9a15b0,  
env = 0x508818}}}
$151 = {sxpinfo = {type = 6, obj = 0, named = 2, gp = 0, mark = 0,  
debug = 0, trace = 0, fin = 0, gcgen = 0, gccls = 0}, attrib =  
0x508818, gengc_next_node = 0x99d128,
   gengc_prev_node = 0x99d0b8, u = {primsxp = {offset = 10663048},  
symsxp = {pname = 0xa2b488, value = 0x99d0b8, internal = 0x508818},  
listsxp = {carval = 0xa2b488,
       cdrval = 0x99d0b8, tagval = 0x508818}, envsxp = {frame =  
0xa2b488, enclos = 0x99d0b8, hashtab = 0x508818}, closxp = {formals =  
0xa2b488, body = 0x99d0b8,
       env = 0x508818}, promsxp = {value = 0xa2b488, expr = 0x99d0b8,  
env = 0x508818}}}


I then continued and showed that none of the breakpoints for  
SET_NAMED (at least in Rf_eval) were invoked on the way out.

So one possible hypothesis is that Rf_eval as called when doing  
indentical(call1,call2) actually fixes up NAMED values on the way to  
that routine compute_identical and that is why it helps.


I still don't know enough about how R works but reading up in include/ 
Rinternals.h makes me think of   C++ code written in C (like Xorg's  
X11 code).  I really like the code base and its is clean and well  
documented and organized.  Congrats to the developers on that by the  
way!


Hope this helps.  If not, I will begin to track down what is going on  
during the define of call2 that may not be possibly setting NAMED  
values properly for PROMSXP sub objects?


Kevin


From rmh at temple.edu  Sat Jun  3 01:31:48 2006
From: rmh at temple.edu (rmh at temple.edu)
Date: Sat,  3 Jun 2006 01:31:48 +0200 (CEST)
Subject: [Rd] documentation bug as S-Plus catches up (PR#8933)
Message-ID: <20060602233148.4F7761DD29@slim.kubism.ku.dk>

# R for Windows will not send your bug report automatically.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs at r-project.org
#
######################################################

The R documentation for "is.R" says
     "## 'which()' only exists in R:"
This is no longer true.  In S-Plus 8.0

> version
Enterprise Developer Version 8.0.1 Beta 1  for Microsoft Windows : 2006 

both "is.R" and "which" are defined in the splus directory.


Now that coordination with R, including use of the package system, is one of
the Insightful goals, I hope someone in R-core will be monitoring these changes.
Let me know if you want me to post these types of things in the future.
I won't unless specically requested.

Rich

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 2
 minor = 3.1
 year = 2006
 month = 06
 day = 01
 svn rev = 38247
 language = R
 version.string = Version 2.3.1 (2006-06-01)

Windows XP Home Edition (build 2600) Service Pack 2.0

Locale:
LC_COLLATE=English_United States.1252;LC_CTYPE=English_United 
States.1252;LC_MONETARY=English_United States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252

Search Path:
 .GlobalEnv, package:grid, package:lattice, file:c:/HOME/rmh/h2/library/H2/.RData, 
file:c:/HOME/rmh/hh/splus.library/HH/.RData, package:car, package:Rcmdr, package:tcltk, 
package:methods, package:stats, package:graphics, package:grDevices, package:utils, 
package:datasets, RcmdrEnv, Autoloads, package:base


From pinard at iro.umontreal.ca  Sat Jun  3 04:56:12 2006
From: pinard at iro.umontreal.ca (pinard at iro.umontreal.ca)
Date: Sat,  3 Jun 2006 04:56:12 +0200 (CEST)
Subject: [Rd] Irregularity in stem() display (PR#8934)
Message-ID: <20060603025612.CCAD7CA6D@slim.kubism.ku.dk>

Hi, R people.

Consider the following small R session:

======================================================================>
> a <- c(8.48, 9.58, 9.96)
> stem(a)

  The decimal point is at the |

  8 |
  8 | 5
  9 |
  9 | 6
  10 | 0

> stem(round(a,1))

  The decimal point is at the |

   8 | 5
   9 |
   9 | 6
  10 | 0

======================================================================<

As the output of ?stem is rather vague about the format of its output,
some may question whether we have bugs here, or not.  If not, let's
call what follows mere "suggestions for improvement" :-).

The vertical bars are aligned in the second case while they are not in
the first.  Would not they be nicer if always aligned?

Also, while "scale=" could adjusted to elongate or compress the result,
the scale is meant to be applied over the "default" scale, the meaning
of which is not defined in ?stem.  The default scale seemingly uses more
lines than really required.  Maybe this default could be improved?

Here is another strangety about stem():

======================================================================>
> stem(2)
> stem(c(2, 2))

  The decimal point is at the |

  2 | 00

======================================================================<

That is, a single value is not reported, while it probably should.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 2
 minor = 4.0
 year = 2006
 month = 06
 day = 01
 svn rev = 38258
 language = R
 version.string = R version 2.4.0 Under development (unstable) (2006-06-01 r38258)

Locale:
LC_CTYPE=fr_CA.UTF-8;LC_NUMERIC=C;LC_TIME=fr_CA.UTF-8;LC_COLLATE=fr_CA.UTF-8;LC_MONETARY=fr_CA.UTF-8;LC_MESSAGES=fr_CA.UTF-8;LC_PAPER=fr_CA.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=fr_CA.UTF-8;LC_IDENTIFICATION=C

Search Path:
 .GlobalEnv, package:methods, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, Autoloads, package:base

-- 
Fran??ois Pinard   http://pinard.progiciels-bpi.ca


From maechler at stat.math.ethz.ch  Sat Jun  3 11:51:53 2006
From: maechler at stat.math.ethz.ch (maechler at stat.math.ethz.ch)
Date: Sat,  3 Jun 2006 11:51:53 +0200 (CEST)
Subject: [Rd] documentation bug as S-Plus catches up (PR#8933)
Message-ID: <20060603095153.568B71DD29@slim.kubism.ku.dk>

>>>>> "RMH" == Richard M Heiberger <rmh at temple.edu>
>>>>>     on Sat,  3 Jun 2006 01:31:48 +0200 (CEST) writes:

    RMH> # R for Windows will not send your bug report
    RMH> automatically.  # Please copy the bug report (after
    RMH> finishing it) to # your favorite email program and send
    RMH> it to # # r-bugs at r-project.org #
    RMH> ######################################################

    RMH> The R documentation for "is.R" says "## 'which()' only
    RMH> exists in R:" This is no longer true.  In S-Plus 8.0

    >> version
    RMH> Enterprise Developer Version 8.0.1 Beta 1 for Microsoft
    RMH> Windows : 2006


    RMH> both "is.R" and "which" are defined in the splus
    RMH> directory.

Thank you, Rich, for the update.

Note however that this is a *beta* version of S-plus,
that I'd guess 95--99.5% of S-plus users are *not* using currently.
Here, ETH has been paying a site licence for S-plus for many
years, but we haven't been able to even use S-plus 7.x, because
of problems that seem to make it impossible that the ETH-central licence server
can continued to be used for S+7 (given the current IT
infrastructure & staff).


    RMH> Now that coordination with R, including use of the
    RMH> package system, is one of the Insightful goals, I hope
    RMH> someone in R-core will be monitoring these changes.
[who were you hoping for ? ;-)]

    RMH> Let me know if you want me to post these types of
    RMH> things in the future.  I won't unless specically
    RMH> requested.

I'd say we are thankful if you continue to do so,
to R-devel typically rather than R-bugs,
particularly in border cases like the current one.

Martin

    RMH> Rich


From Andrew.Hooker at farmbio.uu.se  Sat Jun  3 15:37:22 2006
From: Andrew.Hooker at farmbio.uu.se (Andrew.Hooker at farmbio.uu.se)
Date: Sat,  3 Jun 2006 15:37:22 +0200 (CEST)
Subject: [Rd] plot.new, trellis and windows plot history (PR#8935)
Message-ID: <20060603133722.3EFC93F75C@slim.kubism.ku.dk>

Full_Name: Andrew Hooker
Version: 2.3.1
OS: windows xp sp2
Submission from: (NULL) (83.253.8.162)


Hi,

I think there is a bug in the windows graph history procedure, here is what
happens:

1. open R
2. 'library(lattice)'
3. 'xyplot(0~0)'
4. Turn on recording in the graphical window
5. Add plot to history
4. 'plot.new()'
5. 'xyplot(1~1)'

Try to 'pageup' to the first plot.  I can't get the first plot to appear, and if
I turn off the graphics device using 'dev.off()' I get a warning message:

1: Display list redraw incomplete 

Any ideas how to fix this?

Andrew Hooker
Uppsala University
Sweden


From kevin.hendricks at sympatico.ca  Sat Jun  3 17:51:17 2006
From: kevin.hendricks at sympatico.ca (Kevin B. Hendricks)
Date: Sat, 3 Jun 2006 11:51:17 -0400
Subject: [Rd] More on bug 7924
Message-ID: <97A17BA5-1020-4A50-A0FE-8BAB84A7915A@sympatico.ca>

Hi,

Again, sorry for the length of this post.  Once I get my new office I  
will get a website set up on my work machine and will simply post a  
link to the log since I doubt many people are truly interested in  
these logs.

To further analyze what is happening, I added my own routine in  
main.c called DEBUG_SET_NAMED and then redefined the SET_NAMED macro  
to use it and then rebuilt R.

I then fired up R under a fresh environment  and running under GDB  
and set a breakpoint at my DEBUG_SET_NAMED and at compute_identical

 > call1 <- Quote(f(arg[[1]], arg[[1]], arg[[1]]))

So running this statement shows that SET_NAMED was run on 5 objects  
of type 13,16,10,3 and with the last one being a type 6.

In all cases, but the type 6 object, named was set to 2.  For the  
type 6 object, named was set to 1

Breakpoint 1, DEBUG_SET_NAMED (x=0x85cfd8, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
1444      (x->sxpinfo.named) = v;
$1 = 0x85cfd8
$2 = {sxpinfo = {type = 13, obj = 0, named = 2, gp = 0, mark = 1,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 1}, attrib = 0x508818,
   gengc_next_node = 0x6db278, gengc_prev_node = 0x8442b8, u =  
{primsxp = {
       offset = 2}, symsxp = {pname = 0x2, value = 0x230002acc2,
       internal = 0x21000090}, listsxp = {carval = 0x2, cdrval =  
0x230002acc2,
       tagval = 0x21000090}, envsxp = {frame = 0x2, enclos =  
0x230002acc2,
       hashtab = 0x21000090}, closxp = {formals = 0x2, body =  
0x230002acc2,
       env = 0x21000090}, promsxp = {value = 0x2, expr = 0x230002acc2,
       env = 0x21000090}}}
#0  DEBUG_SET_NAMED (x=0x85cfd8, v=2)    at ../../../r-devel/r-devel/ 
R/src/main/main.c:1444
#1  0x00002aaaaab67b04 in Rf_eval (e=0x570348, rho=0x9eb5f0)     
at ../../../r-devel/r-devel/R/src/main/eval.c:389

Breakpoint 1, DEBUG_SET_NAMED (x=0x87da18, v=2)   at ../../../r-devel/ 
r-devel/R/src/main/main.c:1444
1444      (x->sxpinfo.named) = v;
$3 = 0x87da18
$4 = {sxpinfo = {type = 16, obj = 0, named = 2, gp = 0, mark = 1,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 1}, attrib = 0x508818,
   gengc_next_node = 0x8403f8, gengc_prev_node = 0x87d868, u =  
{primsxp = {
       offset = 1}, symsxp = {pname = 0x1, value = 0x1185c48,
       internal = 0x2000000a}, listsxp = {carval = 0x1, cdrval =  
0x1185c48,
       tagval = 0x2000000a}, envsxp = {frame = 0x1, enclos = 0x1185c48,
       hashtab = 0x2000000a}, closxp = {formals = 0x1, body = 0x1185c48,
       env = 0x2000000a}, promsxp = {value = 0x1, expr = 0x1185c48,
       env = 0x2000000a}}}
#0  DEBUG_SET_NAMED (x=0x87da18, v=2)    at ../../../r-devel/r-devel/ 
R/src/main/main.c:1444
#1  0x00002aaaaab67b04 in Rf_eval (e=0x545ed0, rho=0x9eb5f0)     
at ../../../r-devel/r-devel/R/src/main/eval.c:389

Breakpoint 1, DEBUG_SET_NAMED (x=0x822bf8, v=2)    at ../../../r- 
devel/r-devel/R/src/main/main.c:1444
1444      (x->sxpinfo.named) = v;
$5 = 0x822bf8
$6 = {sxpinfo = {type = 10, obj = 0, named = 2, gp = 0, mark = 1,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 1}, attrib = 0x508818,
   gengc_next_node = 0x661208, gengc_prev_node = 0x840428, u =  
{primsxp = {
       offset = 1}, symsxp = {pname = 0x1, value = 0x1, internal =  
0x20000090},
     listsxp = {carval = 0x1, cdrval = 0x1, tagval = 0x20000090},  
envsxp = {
       frame = 0x1, enclos = 0x1, hashtab = 0x20000090}, closxp = {
       formals = 0x1, body = 0x1, env = 0x20000090}, promsxp = {value  
= 0x1,
       expr = 0x1, env = 0x20000090}}}
#0  DEBUG_SET_NAMED (x=0x822bf8, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
#1  0x00002aaaaab67b04 in Rf_eval (e=0x570230, rho=0x9eb5f0)
     at ../../../r-devel/r-devel/R/src/main/eval.c:389

Breakpoint 1, DEBUG_SET_NAMED (x=0x5d02d0, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
1444      (x->sxpinfo.named) = v;
$7 = 0x5d02d0
$8 = {sxpinfo = {type = 3, obj = 0, named = 2, gp = 0, mark = 1,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 0}, attrib = 0x508818,
   gengc_next_node = 0x5d0378, gengc_prev_node = 0xb843c0, u =  
{primsxp = {
       offset = 5711720}, symsxp = {pname = 0x572768, value = 0x5745c0,
       internal = 0x648910}, listsxp = {carval = 0x572768, cdrval =  
0x5745c0,
       tagval = 0x648910}, envsxp = {frame = 0x572768, enclos =  
0x5745c0,
       hashtab = 0x648910}, closxp = {formals = 0x572768, body =  
0x5745c0,
       env = 0x648910}, promsxp = {value = 0x572768, expr = 0x5745c0,
       env = 0x648910}}}
#0  DEBUG_SET_NAMED (x=0x5d02d0, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
#1  0x00002aaaaab67b04 in Rf_eval (e=0x570188, rho=0x9eb5f0)
     at ../../../r-devel/r-devel/R/src/main/eval.c:389


Breakpoint 1, DEBUG_SET_NAMED (x=0x9ebe58, v=1)    at ../../../r- 
devel/r-devel/R/src/main/main.c:1444
1444      (x->sxpinfo.named) = v;
$9 = 0x9ebe58
$10 = {sxpinfo = {type = 6, obj = 0, named = 0, gp = 0, mark = 0,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 0}, attrib = 0x508818,
   gengc_next_node = 0x9ebe90, gengc_prev_node = 0x9ebe20, u =  
{primsxp = {
       offset = 10663048}, symsxp = {pname = 0xa2b488, value = 0x9ecd90,
       internal = 0x508818}, listsxp = {carval = 0xa2b488, cdrval =  
0x9ecd90,
       tagval = 0x508818}, envsxp = {frame = 0xa2b488, enclos =  
0x9ecd90,
       hashtab = 0x508818}, closxp = {formals = 0xa2b488, body =  
0x9ecd90,
       env = 0x508818}, promsxp = {value = 0xa2b488, expr = 0x9ecd90,
       env = 0x508818}}}
#0  DEBUG_SET_NAMED (x=0x9ebe58, v=1)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
#1  0x00002aaaaab6b5d3 in do_set (call=0x9ec1d8, op=Variable "op" is  
not available.)
     at ../../../r-devel/r-devel/R/src/main/eval.c:1353



Then I assigned call2

 >
 > call2 <- Quote(f(arg[[1]]))[c(1,2,2,2)]


Again a variety of objects (types 14, 14, 14, 14, 19)  has named set  
to 2, all except for the final object (again type = 6) that had named  
set to 1



Breakpoint 1, DEBUG_SET_NAMED (x=0xf9b808, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
1444      (x->sxpinfo.named) = v;
$11 = 0xf9b808
$12 = {sxpinfo = {type = 14, obj = 0, named = 0, gp = 0, mark = 0,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 1}, attrib = 0x508818,
   gengc_next_node = 0xf9b868, gengc_prev_node = 0xf9b7d8, u =  
{primsxp = {
       offset = 1}, symsxp = {pname = 0x1, value = 0x3ff0000000000000,
       internal = 0x21000109}, listsxp = {carval = 0x1,
       cdrval = 0x3ff0000000000000, tagval = 0x21000109}, envsxp = {
       frame = 0x1, enclos = 0x3ff0000000000000, hashtab = 0x21000109},
     closxp = {formals = 0x1, body = 0x3ff0000000000000, env =  
0x21000109},
     promsxp = {value = 0x1, expr = 0x3ff0000000000000, env =  
0x21000109}}}
#0  DEBUG_SET_NAMED (x=0xf9b808, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
#1  0x00002aaaaab676ff in Rf_eval (e=0xf9b808, rho=0x547858)
     at ../../../r-devel/r-devel/R/src/main/eval.c:362

Breakpoint 1, DEBUG_SET_NAMED (x=0xf9b868, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
1444      (x->sxpinfo.named) = v;
$13 = 0xf9b868
$14 = {sxpinfo = {type = 14, obj = 0, named = 0, gp = 0, mark = 0,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 1}, attrib = 0x508818,
   gengc_next_node = 0xf9b898, gengc_prev_node = 0xf9b808, u =  
{primsxp = {
       offset = 1}, symsxp = {pname = 0x1, value = 0x4000000000000000,
       internal = 0x2000000e}, listsxp = {carval = 0x1,
       cdrval = 0x4000000000000000, tagval = 0x2000000e}, envsxp = {
       frame = 0x1, enclos = 0x4000000000000000, hashtab = 0x2000000e},
     closxp = {formals = 0x1, body = 0x4000000000000000, env =  
0x2000000e},
     promsxp = {value = 0x1, expr = 0x4000000000000000, env =  
0x2000000e}}}
#0  DEBUG_SET_NAMED (x=0xf9b868, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
#1  0x00002aaaaab676ff in Rf_eval (e=0xf9b868, rho=0x547858)
     at ../../../r-devel/r-devel/R/src/main/eval.c:362

Breakpoint 1, DEBUG_SET_NAMED (x=0xf9b898, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
1444      (x->sxpinfo.named) = v;
$15 = 0xf9b898
$16 = {sxpinfo = {type = 14, obj = 0, named = 0, gp = 0, mark = 0,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 1}, attrib = 0x508818,
   gengc_next_node = 0xf98b48, gengc_prev_node = 0xf9b868, u =  
{primsxp = {
       offset = 1}, symsxp = {pname = 0x1, value = 0x4000000000000000,
       internal = 0x0}, listsxp = {carval = 0x1, cdrval =  
0x4000000000000000,
       tagval = 0x0}, envsxp = {frame = 0x1, enclos =  
0x4000000000000000,
       hashtab = 0x0}, closxp = {formals = 0x1, body =  
0x4000000000000000,
       env = 0x0}, promsxp = {value = 0x1, expr = 0x4000000000000000,
       env = 0x0}}}
#0  DEBUG_SET_NAMED (x=0xf9b898, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
#1  0x00002aaaaab676ff in Rf_eval (e=0xf9b898, rho=0x547858)
     at ../../../r-devel/r-devel/R/src/main/eval.c:362

Breakpoint 1, DEBUG_SET_NAMED (x=0xf98b48, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
1444      (x->sxpinfo.named) = v;
$17 = 0xf98b48
$18 = {sxpinfo = {type = 14, obj = 0, named = 0, gp = 0, mark = 0,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 1}, attrib = 0x508818,
   gengc_next_node = 0xf98c08, gengc_prev_node = 0xf9b898, u =  
{primsxp = {
       offset = 1}, symsxp = {pname = 0x1, value = 0x4000000000000000,
       internal = 0x21000010}, listsxp = {carval = 0x1,
       cdrval = 0x4000000000000000, tagval = 0x21000010}, envsxp = {
       frame = 0x1, enclos = 0x4000000000000000, hashtab = 0x21000010},
     closxp = {formals = 0x1, body = 0x4000000000000000, env =  
0x21000010},
     promsxp = {value = 0x1, expr = 0x4000000000000000, env =  
0x21000010}}}
#0  DEBUG_SET_NAMED (x=0xf98b48, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
#1  0x00002aaaaab676ff in Rf_eval (e=0xf98b48, rho=0x547858)
     at ../../../r-devel/r-devel/R/src/main/eval.c:362

Breakpoint 1, DEBUG_SET_NAMED (x=0x143a918, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
1444      (x->sxpinfo.named) = v;
$19 = 0x143a918
$20 = {sxpinfo = {type = 19, obj = 0, named = 0, gp = 0, mark = 0,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 3}, attrib = 0x508818,
   gengc_next_node = 0x143a960, gengc_prev_node = 0x143a8d0, u =  
{primsxp = {
       offset = 4}, symsxp = {pname = 0x4, value = 0x508818,
       internal = 0x508818}, listsxp = {carval = 0x4, cdrval = 0x508818,
       tagval = 0x508818}, envsxp = {frame = 0x4, enclos = 0x508818,
       hashtab = 0x508818}, closxp = {formals = 0x4, body = 0x508818,
       env = 0x508818}, promsxp = {value = 0x4, expr = 0x508818,
       env = 0x508818}}}
#0  DEBUG_SET_NAMED (x=0x143a918, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
#1  0x00002aaaaac25dcd in do_subset_dflt (call=0x9e98f0, op=Variable  
"op" is not available.)
     at ../../../r-devel/r-devel/R/src/main/subset.c:160

Breakpoint 1, DEBUG_SET_NAMED (x=0x9e8db0, v=1)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
1444      (x->sxpinfo.named) = v;
$21 = 0x9e8db0
$22 = {sxpinfo = {type = 6, obj = 0, named = 0, gp = 0, mark = 0,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 0}, attrib = 0x508818,
   gengc_next_node = 0x9e8de8, gengc_prev_node = 0x9e8d78, u =  
{primsxp = {
       offset = 10663048}, symsxp = {pname = 0xa2b488, value = 0x9e8d78,
       internal = 0x508818}, listsxp = {carval = 0xa2b488, cdrval =  
0x9e8d78,
       tagval = 0x508818}, envsxp = {frame = 0xa2b488, enclos =  
0x9e8d78,
       hashtab = 0x508818}, closxp = {formals = 0xa2b488, body =  
0x9e8d78,
       env = 0x508818}, promsxp = {value = 0xa2b488, expr = 0x9e8d78,
       env = 0x508818}}}
#0  DEBUG_SET_NAMED (x=0x9e8db0, v=1)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
#1  0x00002aaaaab6b5d3 in do_set (call=0x9e9998, op=Variable "op" is  
not available.)
     at ../../../r-devel/r-devel/R/src/main/eval.c:1353



Now when I run the call to identical, you can see that both of the  
type 6 objects created by the assignments to call1 and call2 have  
named set to 2 by Rf_eval in the way to compute_identical


 > identical(call1, call2)



Breakpoint 1, DEBUG_SET_NAMED (x=0x9ebe58, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
1444      (x->sxpinfo.named) = v;
$23 = 0x9ebe58
$24 = {sxpinfo = {type = 6, obj = 0, named = 1, gp = 0, mark = 0,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 0}, attrib = 0x508818,
   gengc_next_node = 0x9ebe90, gengc_prev_node = 0x9ebe20, u =  
{primsxp = {
       offset = 10663048}, symsxp = {pname = 0xa2b488, value = 0x9ecd90,
       internal = 0x508818}, listsxp = {carval = 0xa2b488, cdrval =  
0x9ecd90,
       tagval = 0x508818}, envsxp = {frame = 0xa2b488, enclos =  
0x9ecd90,
       hashtab = 0x508818}, closxp = {formals = 0xa2b488, body =  
0x9ecd90,
       env = 0x508818}, promsxp = {value = 0xa2b488, expr = 0x9ecd90,
       env = 0x508818}}}
#0  DEBUG_SET_NAMED (x=0x9ebe58, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
#1  0x00002aaaaab67b04 in Rf_eval (e=0x56ca30, rho=0x9e91a0)
     at ../../../r-devel/r-devel/R/src/main/eval.c:389


Breakpoint 1, DEBUG_SET_NAMED (x=0x9e8db0, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
1444      (x->sxpinfo.named) = v;
$25 = 0x9e8db0
$26 = {sxpinfo = {type = 6, obj = 0, named = 1, gp = 0, mark = 0,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 0}, attrib = 0x508818,
   gengc_next_node = 0x9e8de8, gengc_prev_node = 0x9e8d78, u =  
{primsxp = {
       offset = 10663048}, symsxp = {pname = 0xa2b488, value = 0x9e8d78,
       internal = 0x508818}, listsxp = {carval = 0xa2b488, cdrval =  
0x9e8d78,
       tagval = 0x508818}, envsxp = {frame = 0xa2b488, enclos =  
0x9e8d78,
       hashtab = 0x508818}, closxp = {formals = 0xa2b488, body =  
0x9e8d78,
       env = 0x508818}, promsxp = {value = 0xa2b488, expr = 0x9e8d78,
       env = 0x508818}}}
#0  DEBUG_SET_NAMED (x=0x9e8db0, v=2)
     at ../../../r-devel/r-devel/R/src/main/main.c:1444
#1  0x00002aaaaab67b04 in Rf_eval (e=0x92d5d0, rho=0x9e91a0)
     at ../../../r-devel/r-devel/R/src/main/eval.c:389



Now finally the breakpoint at compute_identical was reached and you  
can see that the type 6 objects that had their named value changed  
from 1 to 2 are in fact the top level objects being sent to identical  
but now they have named set to 2


Breakpoint 2, compute_identical (x=0x9ebe58, y=0x9e8db0)
     at ../../../r-devel/r-devel/R/src/main/identical.c:53
53      {

(gdb) print *x
$27 = {sxpinfo = {type = 6, obj = 0, named = 2, gp = 0, mark = 0,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 0}, attrib = 0x508818,
   gengc_next_node = 0x9ebe90, gengc_prev_node = 0x9ebe20, u =  
{primsxp = {
       offset = 10663048}, symsxp = {pname = 0xa2b488, value = 0x9ecd90,
       internal = 0x508818}, listsxp = {carval = 0xa2b488, cdrval =  
0x9ecd90,
       tagval = 0x508818}, envsxp = {frame = 0xa2b488, enclos =  
0x9ecd90,
       hashtab = 0x508818}, closxp = {formals = 0xa2b488, body =  
0x9ecd90,
       env = 0x508818}, promsxp = {value = 0xa2b488, expr = 0x9ecd90,
       env = 0x508818}}}

(gdb) print *y
$29 = {sxpinfo = {type = 6, obj = 0, named = 2, gp = 0, mark = 0,  
debug = 0,
     trace = 0, fin = 0, gcgen = 0, gccls = 0}, attrib = 0x508818,
   gengc_next_node = 0x9e8de8, gengc_prev_node = 0x9e8d78, u =  
{primsxp = {
       offset = 10663048}, symsxp = {pname = 0xa2b488, value = 0x9e8d78,
       internal = 0x508818}, listsxp = {carval = 0xa2b488, cdrval =  
0x9e8d78,
       tagval = 0x508818}, envsxp = {frame = 0xa2b488, enclos =  
0x9e8d78,
       hashtab = 0x508818}, closxp = {formals = 0xa2b488, body =  
0x9e8d78,
       env = 0x508818}, promsxp = {value = 0xa2b488, expr = 0x9e8d78,
       env = 0x508818}}}



So I think this does confirm that the call to identical does indeed  
change the top level objects named from 1 to 2.


I still need to learn more about how objects are made and what an  
object of LANGSXP type really is and what the proper setting is for  
named for an object that is a list of other objects whose named  
values are set to  0, 1, or 2 respectively.

My guess is just before a final objects is assigned, we might have to  
walk the tree of subobjects in some way to make sure all of the named  
values are sane.  The code seems to be setting this to 2 in lots of  
places and some seem like quick patches to other problems.  I still  
don't understand why call1 and call2 when used as arguments to  
identical() and not in assignment statements can have their named  
values changed.  I would expect nothing to be changed in call1 or  
call2 py passing them to a function like identical.

So I will keep looking.

FWIW, it might be a good idea to set up DEBUG_SET_NAMED and other  
accessor functions so that when built under -DDEBUG_ACCESSORS that  
they are used to replace the macros spreadout all over the place in  
the code.  A change like that would be easy to do if anyone feels it  
would be worthwhile.

Hope this helps.

Kevin


From infowinnerslot1 at netscape.net  Sat Jun  3 17:57:57 2006
From: infowinnerslot1 at netscape.net (infowinnerslot1 at netscape.net)
Date: Sat,  3 Jun 2006 17:57:57 +0200 (CEST)
Subject: [Rd] YOUR E-MAIL ADDRESS WON THE LOTTERY. (PR#8936)
Message-ID: <20060603155757.7714419950@slim.kubism.ku.dk>

--qzsoft_directmail_seperator
Content-Type: text/plain;
	charset="DEFAULT"
Content-Transfer-Encoding: base64

IAogCgpFdXJvbWlsbGlvbiBMb3RlcmlhIEVzcGHxb2wKUGFzZW8gRGUgTGEgQ2FzdGVsbGFuYSAx
NS04OSwgMjgwMDggTWFkcmlkLiAKU3BhaW4uIEJyYW5jaCBPZmZpY2UuClJlZi4gTro6IEVTLzYw
Ny8wNS80NC9NQUQuIApCYXRjaC4gTro6IEdIVC84ODA3LzMzMy8wNS4gCgpZT1VSIEUtTUFJTCBB
RERSRVNTIFdPTiBUSEUgTE9UVEVSWS4gCldlIHdpc2ggdG8gY29uZ3JhdHVsYXRlIHlvdSBvdmVy
IHlvdXIgZW1haWwgc3VjY2VzcyBpbgpvdXIgY29tcHV0ZXIgYmFsbG90aW5nIHN3ZWVwc3Rha2Ug
aGVsZCBvbiAyNnRoIE1heSwKMjAwNi4gVGhpcyBpcyBhIG1pbGxlbm5pdW0gc2NpZW50aWZpYyBj
b21wdXRlciBnYW1lIGluCndoaWNoIGVtYWlsIGFkZHJlc3NlcyB3ZXJlIHVzZWQuIEl0IGlzIGEg
cHJvbW90aW9uYWwKcHJvZ3JhbSBhaW1lZCBhdCBlbmNvdXJhZ2luZyBpbnRlcm5ldCB1c2Vyczsg
dGhlcmVmb3JlCnlvdSBkbyBub3QgbmVlZCB0byBidXkgdGlja2V0IHRvIGVudGVyIGZvciBpdC4g
WW91cgplbWFpbCBhZGRyZXNzIGF0dGFjaGVkIHRvIHRpY2tldCBzdGFyIG51bWJlciAoMi0zKQpk
cmV3IHRoZSBFVVJPTUlMTElPTiBsdWNreSBudW1iZXJzIDMtMTktNzMtMzMtMTAgd2hpY2gKY29u
c2VxdWVudGx5IHdvbiB0aGUgZHJhdyBpbiB0aGUgU2Vjb25kIGNhdGVnb3J5LiAKWW91IGhhdmUg
YmVlbiBhcHByb3ZlZCBmb3IgdGhlIHN0YXIgcHJpemUgb2YgRVVSCjkzMyw1ODEuNDQuIChOaW5l
IEh1bmRyZWQgQW5kIFRoaXJ0eSBUaHJlZSBUaG91c2FuZCxGaXZlCkh1bmRyZWQgYW5kIEVpZ2h0
eSBPbmUgRXVyb3MsRm91cnR5IEZvdXIgQ2VudHMpLiAKQ09OR1JBVFVMQVRJT05TISEhIFlvdSBh
cmUgYWR2aXNlZCB0byBrZWVwIHRoaXMKd2lubmluZyB2ZXJ5IGNvbmZpZGVudGlhbCB1bnRpbCB5
b3UgcmVjZWl2ZSB5b3VyIGx1bXAKcHJpemUgaW4geW91ciBhY2NvdW50IG9yIG9wdGlvbmFsIGNo
ZXF1ZSBpc3N1YW5jZSB0bwp5b3UuIFRoaXMgaXMgYSBwcm90ZWN0aXZlIG1lYXN1cmUgdG8gYXZv
aWQgZG91YmxlCmNsYWltaW5nIGJ5IHBlb3BsZSB5b3UgbWF5IHRlbGwgYXMgd2UgaGF2ZSBoYWQg
Y2FzZXMKbGlrZSB0aGlzIGJlZm9yZSwgcGxlYXNlIHNlbmQgeW91ciBGdWxsIE5hbWUsIEhvbWUg
YW5kCk9mZmljZSBUZWxlcGhvbmUgJiBGYXggTnVtYmVyLCBNb2JpbGUgVGVsIE51bWJlciBhbmQK
eW91ciB3aW5uaW5nIHRpY2tldCBudW1iZXIsIHJlZmVyZW5jZSBudW1iZXJzIGFuZAphbW91bnQg
d29uIGluZm9ybWF0aW9uIGZvciBwcm9jZXNzaW5nIG9mIHlvdXIgd2lubmluZwpmdW5kIHRvIG91
ciByZWdpc3RlcmVkIGNsYWltIGFnZW50IGluIHRoZSBhZGRyZXNzIGJlbG93LiAKTXIuUGVycnkg
RG9uYXZhbi4KUm95YWwgQ29hc3RhIFNlY3VyaXR5IFMuTApBZGRyZXNzOk1hcmlvIENhYnJlIDIw
NwpHYXRlZmUgQ2VudHJvLSBNYWRyaWQsIApTcGFpbi4gCkUtbWFpbDogaW5mb3dpbm5lcnNsb3Qx
QG5ldHNjYXBlLm5ldApFbWFpbDogcGVycnlkb25hdmFuQG5ldHNjYXBlLm5ldCAKUmVtZW1iZXIs
IGFsbCB3aW5uaW5nIG11c3QgYmUgY2xhaW1lZCBub3QgbGF0ZXIgdGhhbgoyNnRoIG9mIGp1bmUs
IDIwMDYuIFBsZWFzZSBub3RlLCBpbiBvcmRlciB0byBhdm9pZAp1bm5lY2Vzc2FyeSBkZWxheXMg
YW5kIGNvbXBsaWNhdGlvbnMsIHJlbWVtYmVyIHRvCnF1b3RlIHlvdXIgcmVmZXJlbmNlIG51bWJl
ciBhbmQgYmF0Y2ggbnVtYmVyIGluIGFsbApjb3JyZXNwb25kZW5jZS4gRnVydGhlcm1vcmUsIHNo
b3VsZCB0aGVyZSBiZSBhbnkKY2hhbmdlIG9mIGFkZHJlc3MgZG8gaW5mb3JtIG91ciBhZ2VudCBh
cyBzb29uIGFzCnBvc3NpYmxlLiAKT25jZSBhZ2FpbiBjb25ncmF0dWxhdGlvbnMuIApNcnMuTWFy
eSBGZXJkZW5hcmQuCkZvciBNci5QZXJyeSBEb25hdmFuLgpMb3R0ZXJ5IENvLW9yZGluYXRvci4g
ClRoZSBpbmZvcm1hdGlvbiB0cmFuc21pdHRlZCBpcyBpbnRlbmRlZCBvbmx5IGZvciB0aGUKcGVy
c29uIG9yIGVudGl0eSB0byB3aG9tIG9yIHdoaWNoIGl0IGlzIGFkZHJlc3NlZC4KVW5hdXRob3Jp
c2VkIHVzZSwgZGlzY2xvc3VyZSBvciBjb3B5aW5nIGlzIHN0cmljdGx5CnByb2hpYml0ZWQuIFRo
ZSBzZW5kZXIgYWNjZXB0cyBubyBsaWFiaWxpdHkgZm9yIHRoZQppbXByb3BlciB0cmFuc21pc3Np
b24gb2YgdGhpcyBjb21tdW5pY2F0aW9uIG5vciBmb3IKYW55IGRlbGF5IGluIGl0cyByZWNlaXB0
LiA=

--qzsoft_directmail_seperator--


From ehlers at math.ucalgary.ca  Sat Jun  3 18:08:13 2006
From: ehlers at math.ucalgary.ca (P Ehlers)
Date: Sat, 03 Jun 2006 10:08:13 -0600
Subject: [Rd] plot.new, trellis and windows plot history (PR#8935)
In-Reply-To: <20060603133722.3EFC93F75C@slim.kubism.ku.dk>
References: <20060603133722.3EFC93F75C@slim.kubism.ku.dk>
Message-ID: <4481B3ED.9050902@math.ucalgary.ca>

Andrew,

Why are you calling plot.new()?

Peter Ehlers


Andrew.Hooker at farmbio.uu.se wrote:
> Full_Name: Andrew Hooker
> Version: 2.3.1
> OS: windows xp sp2
> Submission from: (NULL) (83.253.8.162)
> 
> 
> Hi,
> 
> I think there is a bug in the windows graph history procedure, here is what
> happens:
> 
> 1. open R
> 2. 'library(lattice)'
> 3. 'xyplot(0~0)'
> 4. Turn on recording in the graphical window
> 5. Add plot to history
> 4. 'plot.new()'
> 5. 'xyplot(1~1)'
> 
> Try to 'pageup' to the first plot.  I can't get the first plot to appear, and if
> I turn off the graphics device using 'dev.off()' I get a warning message:
> 
> 1: Display list redraw incomplete 
> 
> Any ideas how to fix this?
> 
> Andrew Hooker
> Uppsala University
> Sweden
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From bolker at ufl.edu  Sun Jun  4 02:52:07 2006
From: bolker at ufl.edu (Ben Bolker)
Date: Sat, 03 Jun 2006 20:52:07 -0400
Subject: [Rd] head() for tables
Message-ID: <44822EB7.3030306@ufl.edu>


   head() doesn't do anything particularly
useful for tables ...

   For example:

z <- sample(1:20,size=1000,replace=TRUE)
z2 <- sample(1:20,size=1000,replace=TRUE)
t1 <- table(z,z2)
head(t1)

  as.matrix() doesn't help ...
head(as.matrix(t1))

   this does ...

class(t1) <- "matrix"

  so does

  head.table <- utils:::head.matrix

   is it worth making this duplication in the code?

   Ben Bolker


From bolker at ufl.edu  Sun Jun  4 03:00:54 2006
From: bolker at ufl.edu (Ben Bolker)
Date: Sat, 03 Jun 2006 21:00:54 -0400
Subject: [Rd] trivial typo in ?fisher.test
Message-ID: <448230C6.1020000@ufl.edu>


   in the comments at the beginning of the first example,
line 6: "and the women's guess" should be "and the woman's guess"

   Ben Bolker


From murdoch at stats.uwo.ca  Sun Jun  4 03:14:47 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sat, 03 Jun 2006 21:14:47 -0400
Subject: [Rd] head() for tables
In-Reply-To: <44822EB7.3030306@ufl.edu>
References: <44822EB7.3030306@ufl.edu>
Message-ID: <44823407.6090408@stats.uwo.ca>

On 6/3/2006 8:52 PM, Ben Bolker wrote:
>    head() doesn't do anything particularly
> useful for tables ...
> 
>    For example:
> 
> z <- sample(1:20,size=1000,replace=TRUE)
> z2 <- sample(1:20,size=1000,replace=TRUE)
> t1 <- table(z,z2)
> head(t1)
> 
>   as.matrix() doesn't help ...
> head(as.matrix(t1))
> 
>    this does ...
> 
> class(t1) <- "matrix"
> 
>   so does
> 
>   head.table <- utils:::head.matrix
> 
>    is it worth making this duplication in the code?

This seems to be a deeper problem.  as.matrix(t1) still returns an 
object of class "table", so head(as.matrix(t1)) dispatches to 
head.default, rather than to head.matrix.  You can force the latter by

utils:::head.matrix(t1)

and get reasonable output.

Perhaps as.matrix(x) should strip off the class attribute, or add a 
"matrix" class attribute?  Or perhaps head.default should check for 
is.matrix?

Duncan Murdoch


From bolker at ufl.edu  Sun Jun  4 03:15:37 2006
From: bolker at ufl.edu (Ben Bolker)
Date: Sun, 4 Jun 2006 01:15:37 +0000 (UTC)
Subject: [Rd] trivial typo in ?fisher.test
References: <448230C6.1020000@ufl.edu>
Message-ID: <loom.20060604T031456-896@post.gmane.org>


>    in the comments at the beginning of the first example,
> line 6: "and the women's guess" should be "and the woman's guess"
> 
>    Ben Bolker

  sorry I forgot to say: this and the previous comment
apply to 2.3.1 (on Windows, although that should be
irrelevant) ...


From pinard at iro.umontreal.ca  Sun Jun  4 06:27:53 2006
From: pinard at iro.umontreal.ca (pinard at iro.umontreal.ca)
Date: Sun,  4 Jun 2006 06:27:53 +0200 (CEST)
Subject: [Rd] xy.coords(MATRIX) bug in code or documentation (PR#8937)
Message-ID: <20060604042753.A831619A12@slim.kubism.ku.dk>

Hi, people.

xy.coords() does not behave like its documentation says, when given some
matrices.   ?xy.coords says:

     If 'y' is 'NULL' and 'x' is a [...] formula [...] list [...]
     time series [...] matrix with two columns [...]

     In any other case, the 'x' argument is coerced to a vector and
     returned as *y* component [...]

Now, consider this short transcript:

======================================================================>
> as.vector(rbind(1, 2, 3))
[1] 1 2 3
> as.vector(cbind(1, 2, 3))
[1] 1 2 3
> xy.coords(rbind(1, 2, 3))
$x
[1] 1 2 3

$y
[1] 1 2 3

$xlab
[1] "Index"

$ylab
NULL

> xy.coords(cbind(1, 2, 3))
$x
[1] 1

$y
[1] 2

$xlab
[1] "[,1]"

$ylab
[1] "[,2]"

======================================================================<

A 3 x 1 matrix and a 1 x 3 matrix both fall in the "In any other case"
category, but it seems that only the 3 x 1 is really "coerced to a vector".

The R code for xy.coord() suggests that the documentation should read
"matrix with at least two columns" instead of "matrix with two columns".

As a user, I was really expecting the coercion to a vector to happen.
What triggered me into exploring this problem is the fact that plot()
showed a single point where I was expecting many.  If you decide that
the code is right and the documentation is wrong, then I would suggest
that the code be a bit more friendly, by at least issuing some warning
if more than two columns are given to a matrix.

Another problem in the same area: the documentation lies about how the
function acts when given a data.frame.  From the code, a data.frame is
processed as if it was a matrix.  From the documentation, while the
data.frame is not mentioned explicitely, it is implied in the paragraph
explaining how a list is processed (because a data.frame is a list).
Some reconciliation is needed here as well.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 2
 minor = 4.0
 year = 2006
 month = 06
 day = 01
 svn rev = 38258
 language = R
 version.string = R version 2.4.0 Under development (unstable) (2006-06-01 r38258)

Locale:
LC_CTYPE=fr_CA.UTF-8;LC_NUMERIC=C;LC_TIME=fr_CA.UTF-8;LC_COLLATE=fr_CA.UTF-8;LC_MONETARY=fr_CA.UTF-8;LC_MESSAGES=fr_CA.UTF-8;LC_PAPER=fr_CA.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=fr_CA.UTF-8;LC_IDENTIFICATION=C

Search Path:
 .GlobalEnv, package:methods, package:stats, package:utils, package:datasets, fp.etc, package:graphics, package:grDevices, Autoloads, package:base

-- 
Fran??ois Pinard   http://pinard.progiciels-bpi.ca


From kevin.hendricks at sympatico.ca  Sun Jun  4 18:35:00 2006
From: kevin.hendricks at sympatico.ca (Kevin B. Hendricks)
Date: Sun, 4 Jun 2006 12:35:00 -0400
Subject: [Rd] is there a dump complete object c routine ?
Message-ID: <38B2C6BF-110E-41BF-A41B-55F6C8739FB1@sympatico.ca>

Hi,

I am working my way through R-exts.pdf and have found R_PV but it  
does not do a full dump of an object.

So I was wondering since I can call C code from with gdb (with call)  
if there was a routine someplace that somebody has that would dump  
all of the objects and fields and any important values for all of the  
subobjects in a main object.

What I am looking for is something that would print out more than the  
one level generated by
print * (SEXP) v  in gdb and that would point out relevant addresses  
in hex, actual symbol values and addresses of the strings, string  
values, etc.  It would then do the same for any and all objects that  
make up the entire structure.

This would certainly help in understanding the relationships and  
walking the list of v->u.listsxp.carval and the like it really not  
fun after a while.

I think the code in compute_identical which walks the object lists  
and checks for equality would be a good starting point for making  
such a routine if it does not already exist.

Then using the call() function in gdb, I could see the named values  
and the like for all of the objects tied to the main object in some way.

Does anyone have a snippet of code that does something like this?

I can think of a number of debug helper routines (like having a  
DEBUG_SET_NAMED and the like) that could be created and a dump  
complete object routine, that would make life inside the low levels  
much easier to follow.

Thanks,

Kevin


From kevin.hendricks at sympatico.ca  Mon Jun  5 01:31:54 2006
From: kevin.hendricks at sympatico.ca (Kevin B. Hendricks)
Date: Sun, 4 Jun 2006 19:31:54 -0400
Subject: [Rd] more on bug 7924
Message-ID: <9448B15C-0CCA-4E4C-A355-60C80066FF0D@sympatico.ca>

Hi,

Okay I threw together a quick dump_object routine and found something  
that I don't think is correct when call2 is created.

 > call2 <- Quote(f(arg[[1]]))[c(1,2,2,2)]
 > get("call2")

I use the do_get break to find the SEXP value I want

Breakpoint 1, do_get (call=0xc2d530, op=0x52bd30, args=0x9e83a8,  
rho=Variable "rho" is not available.
) at ../../../r-devel/r-devel/R/src/main/envir.c:1668
1668        if (PRIMVAL(op)) { /* have get(.) */


(gdb) print *rval
$2 = {sxpinfo = {type = 6, obj = 0, named = 1, gp = 0, mark = 0,  
debug = 0, trace = 0, fin = 0, gcgen = 0, gccls = 0}, attrib =  
0x508818, gengc_next_node = 0x9e7d50,
   gengc_prev_node = 0x9e7ce0, u = {primsxp = {offset = 10663048},  
symsxp = {pname = 0xa2b488, value = 0x9e7ce0, internal = 0x508818},  
listsxp = {carval = 0xa2b488,
       cdrval = 0x9e7ce0, tagval = 0x508818}, envsxp = {frame =  
0xa2b488, enclos = 0x9e7ce0, hashtab = 0x508818}, closxp = {formals =  
0xa2b488, body = 0x9e7ce0,
       env = 0x508818}, promsxp = {value = 0xa2b488, expr = 0x9e7ce0,  
env = 0x508818}}}


Now I invoke my own dump routine which keeps track of recursion level  
and will dump the named and other things inside the newly created  
object, the format of the output is

recursion level: SEXP X TYPEOF(X) and then some object specific values


(gdb) call dump_object(rval, 0)


0: 0x9e7d18 LANGSXP Object with length 1, named 1
     f(arg[[1]], arg[[1]], arg[[1]])
1: 0xa2b488 SYMSXP  name at 0xa29408, value at 0x5087e0, named 0
     f
1: 0x9e9880 LANGSXP Object with length 1, named 0
     arg[[1]]
2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
     `[[`
2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
     arg
2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
     1
1: 0x9e9880 LANGSXP Object with length 1, named 0
     arg[[1]]
2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
     `[[`
2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
     arg
2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
     1
1: 0x9e9880 LANGSXP Object with length 1, named 0
     arg[[1]]
2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
     `[[`
2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
     arg
2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
     1



Notice how each LANGSXP subobject reuses the exact same objects/ 
addresses (notice the address are the same) 3 times (one for each  
entry) but the named value is always 0 for all of them (even though  
that address is being re-used (effectively "named") each time.

1: 0x9e9880 LANGSXP Object with length 1, named 0
     arg[[1]]
2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
     `[[`
2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
     arg
2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
     1


Shouldn't all 3 copies have named set to 1 and not zero since they  
are all pointing to the same pieces of memory?  And shouldn't that  
force the top level LANGSXP object to have named of 2 in this case  
and not its current value of 1.


How should any assignment to any of those 3 places in the LANGSXP  
list ever know they must be duplicated first when all of the named  
values are 0 even though they all  point to the same block of memory?

I truly do not understand how named is being used in this case.  Why  
don't we simply refcount all allocated objects so we know what the  
true value of named must be?  How else can we get that information?

Hints welcome especially to reading material that explains more on  
this stuff.

Thanks,

Kevin


From maechler at stat.math.ethz.ch  Mon Jun  5 11:30:57 2006
From: maechler at stat.math.ethz.ch (maechler at stat.math.ethz.ch)
Date: Mon,  5 Jun 2006 11:30:57 +0200 (CEST)
Subject: [Rd] xy.coords(MATRIX) bug in code or documentation (PR#8937)
Message-ID: <20060605093057.288701905F@slim.kubism.ku.dk>

>>>>> "FrPi" == Fran?ois Pinard <pinard at iro.umontreal.ca>
>>>>>     on Sun,  4 Jun 2006 06:27:53 +0200 (CEST) writes:

    FrPi> Hi, people.
    FrPi> xy.coords() does not behave like its documentation says, when given some
    FrPi> matrices.   ?xy.coords says:

    FrPi> If 'y' is 'NULL' and 'x' is a [...] formula [...] list [...]
    FrPi> time series [...] matrix with two columns [...]

    FrPi> In any other case, the 'x' argument is coerced to a vector and
    FrPi> returned as *y* component [...]

    FrPi> Now, consider this short transcript:

    FrPi> ======================================================================>
    >> as.vector(rbind(1, 2, 3))
    FrPi> [1] 1 2 3
    >> as.vector(cbind(1, 2, 3))
    FrPi> [1] 1 2 3
    >> xy.coords(rbind(1, 2, 3))
    FrPi> $x
    FrPi> [1] 1 2 3

    FrPi> $y
    FrPi> [1] 1 2 3

    FrPi> $xlab
    FrPi> [1] "Index"

    FrPi> $ylab
    FrPi> NULL

    >> xy.coords(cbind(1, 2, 3))
    FrPi> $x
    FrPi> [1] 1

    FrPi> $y
    FrPi> [1] 2

    FrPi> $xlab
    FrPi> [1] "[,1]"

    FrPi> $ylab
    FrPi> [1] "[,2]"

    FrPi> ======================================================================<

    FrPi> A 3 x 1 matrix and a 1 x 3 matrix both fall in the "In
    FrPi> any other case" category, but it seems that only the 3 x 1
    FrPi> is really "coerced to a vector".

yes. So you are right: There's a bug

    FrPi> The R code for xy.coord() suggests that the documentation should read
    FrPi> "matrix with at least two columns" instead of "matrix with two columns".

    FrPi> As a user, I was really expecting the coercion to a
    FrPi> vector to happen.  What triggered me into exploring
    FrPi> this problem is the fact that plot() showed a single
    FrPi> point where I was expecting many.  If you decide that
    FrPi> the code is right and the documentation is wrong, then
    FrPi> I would suggest that the code be a bit more friendly,
    FrPi> by at least issuing some warning if more than two
    FrPi> columns are given to a matrix.

I agree.  

I'm not sure what the change should be -- and am asking for useR
feedback here :

1) give an error in the case of a matrix (or data.frame) with '> 2' columns
2) give a warning, and use the first 2 columns -- as it happens now
3) silently coerce to vector -- as the current documentation claims.

The most clean would be "1)", but given back compatibility, etc,
my tendency would go into the direction of "2)".


    FrPi> Another problem in the same area: the documentation lies about how the
    FrPi> function acts when given a data.frame.  From the code, a data.frame is
    FrPi> processed as if it was a matrix.  From the documentation, while the
    FrPi> data.frame is not mentioned explicitely, it is implied in the paragraph
    FrPi> explaining how a list is processed (because a data.frame is a list).
    FrPi> Some reconciliation is needed here as well.

Yes; in this case, I propose to just amend the documentation
explainining that data.frames are treated "as matrices".

Thanks a lot, Francois, for your careful reading and
careful report!
   [ Though I do slightly mind the word "lies" since
     I do value the 9th commandment..
     Not telling the truth *accidentally* is not "lying" ] 

Martin Maechler, ETH Zurich


From hin-tak.leung at cimr.cam.ac.uk  Mon Jun  5 12:10:45 2006
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Mon, 05 Jun 2006 11:10:45 +0100
Subject: [Rd] more on bug 7924
In-Reply-To: <9448B15C-0CCA-4E4C-A355-60C80066FF0D@sympatico.ca>
References: <9448B15C-0CCA-4E4C-A355-60C80066FF0D@sympatico.ca>
Message-ID: <44840325.6020201@cimr.cam.ac.uk>

I see you have found the sexptype listing in Rinternals.h . I believe
it was in one of R's FAQ's about R's garbage collector - it doesn't do
proper reference-counted garbage collection as you suggested, but does
a sort of poor man's garbage collection, by classifying entities in
*only* 3 catergories - not-in-use, in-used-by-one, and in-used 
by-more-than-one.

Kevin B. Hendricks wrote:
> Hi,
> 
> Okay I threw together a quick dump_object routine and found something  
> that I don't think is correct when call2 is created.
> 
>  > call2 <- Quote(f(arg[[1]]))[c(1,2,2,2)]
>  > get("call2")
> 
> I use the do_get break to find the SEXP value I want
> 
> Breakpoint 1, do_get (call=0xc2d530, op=0x52bd30, args=0x9e83a8,  
> rho=Variable "rho" is not available.
> ) at ../../../r-devel/r-devel/R/src/main/envir.c:1668
> 1668        if (PRIMVAL(op)) { /* have get(.) */
> 
> 
> (gdb) print *rval
> $2 = {sxpinfo = {type = 6, obj = 0, named = 1, gp = 0, mark = 0,  
> debug = 0, trace = 0, fin = 0, gcgen = 0, gccls = 0}, attrib =  
> 0x508818, gengc_next_node = 0x9e7d50,
>    gengc_prev_node = 0x9e7ce0, u = {primsxp = {offset = 10663048},  
> symsxp = {pname = 0xa2b488, value = 0x9e7ce0, internal = 0x508818},  
> listsxp = {carval = 0xa2b488,
>        cdrval = 0x9e7ce0, tagval = 0x508818}, envsxp = {frame =  
> 0xa2b488, enclos = 0x9e7ce0, hashtab = 0x508818}, closxp = {formals =  
> 0xa2b488, body = 0x9e7ce0,
>        env = 0x508818}, promsxp = {value = 0xa2b488, expr = 0x9e7ce0,  
> env = 0x508818}}}
> 
> 
> Now I invoke my own dump routine which keeps track of recursion level  
> and will dump the named and other things inside the newly created  
> object, the format of the output is
> 
> recursion level: SEXP X TYPEOF(X) and then some object specific values
> 
> 
> (gdb) call dump_object(rval, 0)
> 
> 
> 0: 0x9e7d18 LANGSXP Object with length 1, named 1
>      f(arg[[1]], arg[[1]], arg[[1]])
> 1: 0xa2b488 SYMSXP  name at 0xa29408, value at 0x5087e0, named 0
>      f
> 1: 0x9e9880 LANGSXP Object with length 1, named 0
>      arg[[1]]
> 2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
>      `[[`
> 2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
>      arg
> 2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
>      1
> 1: 0x9e9880 LANGSXP Object with length 1, named 0
>      arg[[1]]
> 2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
>      `[[`
> 2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
>      arg
> 2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
>      1
> 1: 0x9e9880 LANGSXP Object with length 1, named 0
>      arg[[1]]
> 2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
>      `[[`
> 2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
>      arg
> 2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
>      1
> 
> 
> 
> Notice how each LANGSXP subobject reuses the exact same objects/ 
> addresses (notice the address are the same) 3 times (one for each  
> entry) but the named value is always 0 for all of them (even though  
> that address is being re-used (effectively "named") each time.
> 
> 1: 0x9e9880 LANGSXP Object with length 1, named 0
>      arg[[1]]
> 2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
>      `[[`
> 2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
>      arg
> 2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
>      1
> 
> 
> Shouldn't all 3 copies have named set to 1 and not zero since they  
> are all pointing to the same pieces of memory?  And shouldn't that  
> force the top level LANGSXP object to have named of 2 in this case  
> and not its current value of 1.
> 
> 
> How should any assignment to any of those 3 places in the LANGSXP  
> list ever know they must be duplicated first when all of the named  
> values are 0 even though they all  point to the same block of memory?
> 
> I truly do not understand how named is being used in this case.  Why  
> don't we simply refcount all allocated objects so we know what the  
> true value of named must be?  How else can we get that information?
> 
> Hints welcome especially to reading material that explains more on  
> this stuff.
> 
> Thanks,
> 
> Kevin
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From hin-tak.leung at cimr.cam.ac.uk  Mon Jun  5 13:37:38 2006
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Mon, 05 Jun 2006 12:37:38 +0100
Subject: [Rd] Patch: context stack size in gram.y
In-Reply-To: <200605311553.30722.dreibh@iem.uni-due.de>
References: <200605311442.50544.dreibh@iem.uni-due.de>	<Pine.LNX.4.64.0605311418560.3564@gannet.stats.ox.ac.uk>
	<200605311553.30722.dreibh@iem.uni-due.de>
Message-ID: <44841782.3070406@cimr.cam.ac.uk>

Hmm, I think you can "flatten" the for-loop with something like this, 
without modifying R:

for(ParamAll in 1:(length01*length02*length03*length*4...)) {

idx1 <- as.integer(ParamAll/(length02*length03...))
Param01 <- Param01Set[idx1]
idx2 = as.integer((ParamAll - idx1 * length01)/length03*length04...)
Param02 <- Param02Set[idx2]
...
central code
...
}

It is the same way generalizing addressing matrix element[i,j] as
element[i*length_j + j], etc. Then you won't have over 50 nested
for-loops. If you have something that deeply nested, I would also be 
writing those idx1 <- as.integer(...) in C for speed ( or use
% properly, but it is too early in the morning and my head is a bit 
wuzzy at the moment...), or even the Param01, etc. e.g.

Param01 <- .Call("my_element_selector", c(Parm01Set, Param02Set ...), 
ParamAll)

HTL

Thomas Dreibholz wrote:
> On Wednesday 31 May 2006 15:26, Prof Brian Ripley wrote:
>> On Wed, 31 May 2006, Thomas Dreibholz wrote:
>>> Hi!
>>>
>>> Attached to this mail, you find a patch for gram.y setting a #define
>>> CONTEXT_STACK_SIZE for the context stack size and replacing the following
>>> constants 50 and 49 by CONTEXT_STACK_SIZE and CONTEXT_STACK_SIZE-1. The
>>> new #define makes setting the stack size much more easy; I also have
>>> increased it to 500, because 50 is too small (we use R to iterate through
>>> sets of simulation parameters, which requires a context stack size of
>>> around 100).
>> I think you will have to explain in detail why you need this, when for a
>> decade R users have not reported a need for it.  It is not related to
>> iteration in R, rather to the depth of recursion needed to parse R code.
> 
> We use R to create input files for OMNeT++ simulations. The simulation 
> parameters are defined like this:
> param01Set <- c(...)
> param02Set <- c(...)
> ...
> paramXYSet <- c(...)
> Most of these sets only contain a single element.
> 
> The input file generation, which should be usable for all simulations, works 
> as follows:
> for(param01 in param01Set) {
>  for(param02 in param02Set) {
>   ...
>    for(paramXY in paramXYSet) {
>      Generate input file for these parameter settings
>    }
>   ...
>  }
> }
> 
> The simulation has more than 50 different parameters, so a "contextstack 
> overflow" error will be the result. Increasing the context stack size in 
> gram.y solves this problem. (Clearly, only using "for" iterations for sets 
> consisting of more than one element would solve the problem - but this 
> requires a special version of the parameter generation function for every 
> simulation.)
> 
> 
> Best regards
> 
> 
> ------------------------------------------------------------------------
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch at stats.uwo.ca  Mon Jun  5 13:43:20 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 05 Jun 2006 07:43:20 -0400
Subject: [Rd] xy.coords(MATRIX) bug in code or documentation (PR#8937)
In-Reply-To: <20060605093057.288701905F@slim.kubism.ku.dk>
References: <20060605093057.288701905F@slim.kubism.ku.dk>
Message-ID: <448418D8.2010202@stats.uwo.ca>

On 6/5/2006 5:30 AM, maechler at stat.math.ethz.ch wrote:
>>>>>> "FrPi" == Fran?ois Pinard <pinard at iro.umontreal.ca>
>>>>>>     on Sun,  4 Jun 2006 06:27:53 +0200 (CEST) writes:
> 
>     FrPi> Hi, people.
>     FrPi> xy.coords() does not behave like its documentation says, when given some
>     FrPi> matrices.   ?xy.coords says:
> 
>     FrPi> If 'y' is 'NULL' and 'x' is a [...] formula [...] list [...]
>     FrPi> time series [...] matrix with two columns [...]
> 
>     FrPi> In any other case, the 'x' argument is coerced to a vector and
>     FrPi> returned as *y* component [...]
> 
>     FrPi> Now, consider this short transcript:
> 
>     FrPi> ======================================================================>
>     >> as.vector(rbind(1, 2, 3))
>     FrPi> [1] 1 2 3
>     >> as.vector(cbind(1, 2, 3))
>     FrPi> [1] 1 2 3
>     >> xy.coords(rbind(1, 2, 3))
>     FrPi> $x
>     FrPi> [1] 1 2 3
> 
>     FrPi> $y
>     FrPi> [1] 1 2 3
> 
>     FrPi> $xlab
>     FrPi> [1] "Index"
> 
>     FrPi> $ylab
>     FrPi> NULL
> 
>     >> xy.coords(cbind(1, 2, 3))
>     FrPi> $x
>     FrPi> [1] 1
> 
>     FrPi> $y
>     FrPi> [1] 2
> 
>     FrPi> $xlab
>     FrPi> [1] "[,1]"
> 
>     FrPi> $ylab
>     FrPi> [1] "[,2]"
> 
>     FrPi> ======================================================================<
> 
>     FrPi> A 3 x 1 matrix and a 1 x 3 matrix both fall in the "In
>     FrPi> any other case" category, but it seems that only the 3 x 1
>     FrPi> is really "coerced to a vector".
> 
> yes. So you are right: There's a bug
> 
>     FrPi> The R code for xy.coord() suggests that the documentation should read
>     FrPi> "matrix with at least two columns" instead of "matrix with two columns".
> 
>     FrPi> As a user, I was really expecting the coercion to a
>     FrPi> vector to happen.  What triggered me into exploring
>     FrPi> this problem is the fact that plot() showed a single
>     FrPi> point where I was expecting many.  If you decide that
>     FrPi> the code is right and the documentation is wrong, then
>     FrPi> I would suggest that the code be a bit more friendly,
>     FrPi> by at least issuing some warning if more than two
>     FrPi> columns are given to a matrix.
> 
> I agree.  
> 
> I'm not sure what the change should be -- and am asking for useR
> feedback here :
> 
> 1) give an error in the case of a matrix (or data.frame) with '> 2' columns
> 2) give a warning, and use the first 2 columns -- as it happens now
> 3) silently coerce to vector -- as the current documentation claims.
> 
> The most clean would be "1)", but given back compatibility, etc,
> my tendency would go into the direction of "2)".

I think the current behaviour is reasonable, and shouldn't lead to 
warnings when executed.  If you meant a warning in the man page, that 
would be fine.	

I'm not so sure about some undocumented behaviour for formulas:

x <- 1:10
y <- 11:20
z <- 21:30
xy.coords(y ~ x+z)

will set the x column to the sum of x+z.  That's not the usual way 
formulas are handled.  I'd be happier with picking out one column, or 
generating an error, instead.

I think the error message might have been the intention, because there's 
a test

  if (inherits(x, "formula") && length(x) == 3)

but length(y ~ x+z) is 3.  I think the test should be

  if (inherits(x, "formula") && length(x) == 3 && length(x[[2]]) == 1 && 
length(x[[3]]) == 1)

Duncan Murdoch
> 
> 
>     FrPi> Another problem in the same area: the documentation lies about how the
>     FrPi> function acts when given a data.frame.  From the code, a data.frame is
>     FrPi> processed as if it was a matrix.  From the documentation, while the
>     FrPi> data.frame is not mentioned explicitely, it is implied in the paragraph
>     FrPi> explaining how a list is processed (because a data.frame is a list).
>     FrPi> Some reconciliation is needed here as well.
> 
> Yes; in this case, I propose to just amend the documentation
> explainining that data.frames are treated "as matrices".
> 
> Thanks a lot, Francois, for your careful reading and
> careful report!
>    [ Though I do slightly mind the word "lies" since
>      I do value the 9th commandment..
>      Not telling the truth *accidentally* is not "lying" ] 
> 
> Martin Maechler, ETH Zurich
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From p.dalgaard at biostat.ku.dk  Mon Jun  5 14:02:19 2006
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 05 Jun 2006 14:02:19 +0200
Subject: [Rd] more on bug 7924
In-Reply-To: <44840325.6020201@cimr.cam.ac.uk>
References: <9448B15C-0CCA-4E4C-A355-60C80066FF0D@sympatico.ca>
	<44840325.6020201@cimr.cam.ac.uk>
Message-ID: <x2hd2zq08k.fsf@turmalin.kubism.ku.dk>

Hin-Tak Leung <hin-tak.leung at cimr.cam.ac.uk> writes:

> I see you have found the sexptype listing in Rinternals.h . I believe
> it was in one of R's FAQ's about R's garbage collector - it doesn't do
> proper reference-counted garbage collection as you suggested, but does
> a sort of poor man's garbage collection, by classifying entities in
> *only* 3 catergories - not-in-use, in-used-by-one, and in-used 
> by-more-than-one.

Not quite: more like freshly-made-not-assigned,
assigned-but-only-once, assigned-maybe-more-than-once. 

It's also not so much about GC as about modifiability: In the first
case, modify at will. In the 2nd case you can modify in an assignment
function. In the 3rd case, you must duplicate the object first.

Consider

f <- function(x){x[3]<-10; x}

f(rnorm(10))

b <- rnorm(10)
f(b)

In the first case, rnorm() returns an unnamed object. (Well, it could.
I'm not too sure it actually does.) When the object is passed to f(),
it gets named "x", but it is the only copy and the modification to
x[3] can proceed safely.

In the second case you first assign to b then pass b to f inside of
which it is named "x". This proceeds without duplication, so the same
object is now assigned twice. Modifying x at this point would cause b
to change as well, which would violate pass-by-value semantics. Hence,
we need to create a duplicate of x which we can safely change.

Unlike Java and Tcl, R doesn't use its refcounts for garbage
collection. Partly it is because it is not a true count that you can
decrement and use to throw away the object when the count goes to
zero. However, it is also problematic to implement in R because we can
have reference loops: Consider

g <- function(){...whatever...; e <- environment(); ...}

Now when g() is called it creates an environment to hold its local
variables, and when g finishes, the environment can be destroyed,
provided that there are no references to it from other objects. In the
above case, we do have a reference to the environment,  but it comes
from an object that is inside the environment and would be destroyed
along with it. A strict refcounting system would leave such
environments hanging around forever.

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From pinard at iro.umontreal.ca  Mon Jun  5 14:11:20 2006
From: pinard at iro.umontreal.ca (=?iso-8859-1?Q?Fran=E7ois?= Pinard)
Date: Mon, 5 Jun 2006 08:11:20 -0400
Subject: [Rd] xy.coords(MATRIX) bug in code or documentation (PR#8937)
In-Reply-To: <20060605093057.288701905F@slim.kubism.ku.dk>
References: <20060605093057.288701905F@slim.kubism.ku.dk>
Message-ID: <20060605121120.GA7192@phenix.sram.qc.ca>

[Martin Maechler]

> Thanks a lot, Francois, for your careful reading and careful report!

Thanks for being receptive! :-)

>    FrPi> Another problem in the same area: the documentation lies
>    FrPi> about how the function acts when given a data.frame.  From
>    FrPi> the code, a data.frame is processed as if it was a matrix.
>    FrPi> From the documentation, while the data.frame is not mentioned
>    FrPi> explicitely, it is implied in the paragraph explaining how
>    FrPi> a list is processed (because a data.frame is a list).  Some
>    FrPi> reconciliation is needed here as well.

>   [ Though I do slightly mind the word "lies" since
>     I do value the 9th commandment..
>     Not telling the truth *accidentally* is not "lying" ]

Of course.  You know, I merely forgot a smiley, there.  You are right in 
that we should try a bit to spare the extreme susceptibility of some 
people!  On the other hand, there should be limits to the feeling that 
we are always walking on eggs while writing to R-help or R-devel, some 
comfort and happiness is needed, after all. :-)

>Yes; in this case, I propose to just amend the documentation
>explainining that data.frames are treated "as matrices".

Let me add a small comment about data.frames.  It would be a bit awkward 
if a data.frame had two columns "y" and "x" (in that order) and if they 
were interpreted differently after matrix coercion.  I guess the problem 
would not exist if data.frames were really interpreted as lists, the "x" 
and "y" columns could even appear anywhere (untested).

-- 
Fran?ois Pinard   http://pinard.progiciels-bpi.ca


From kevin.hendricks at sympatico.ca  Mon Jun  5 14:34:37 2006
From: kevin.hendricks at sympatico.ca (Kevin B. Hendricks)
Date: Mon, 5 Jun 2006 08:34:37 -0400
Subject: [Rd] more on bug 7924
In-Reply-To: <x2hd2zq08k.fsf@turmalin.kubism.ku.dk>
References: <9448B15C-0CCA-4E4C-A355-60C80066FF0D@sympatico.ca>
	<44840325.6020201@cimr.cam.ac.uk>
	<x2hd2zq08k.fsf@turmalin.kubism.ku.dk>
Message-ID: <AD2B041A-BE8B-4A2F-AD0E-F0DFBB25F170@sympatico.ca>

Hi,

On Jun 5, 2006, at 8:02 AM, Peter Dalgaard wrote:

> Not quite: more like freshly-made-not-assigned,
> assigned-but-only-once, assigned-maybe-more-than-once.


So for my particular case ...

> call2 <- Quote(f(arg[[1]]))[c(1,2,2,2)]


> 0: 0x9e7d18 LANGSXP Object with length 1, named 1
>      f(arg[[1]], arg[[1]], arg[[1]])
> 1: 0xa2b488 SYMSXP  name at 0xa29408, value at 0x5087e0, named 0
>      f

> 1: 0x9e9880 LANGSXP Object with length 1, named 0
>      arg[[1]]
> 2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
>      `[[`
> 2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
>      arg
> 2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
>      1

> 1: 0x9e9880 LANGSXP Object with length 1, named 0
>      arg[[1]]
> 2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
>      `[[`
> 2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
>      arg
> 2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
>      1

> 1: 0x9e9880 LANGSXP Object with length 1, named 0
>      arg[[1]]
> 2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
>      `[[`
> 2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
>      arg
> 2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
>      1
>


The highest level LANGSXP list object has been named (1) but the sub  
LANGSXP object stored at 0x9e9880 is assigned to 3 places in the same  
top level LANGSXP list, and yet the named values of that subobject is  
0 (in all cases).

According to your descriptions above, I would consider this an  
"error" in setting named when the object is created?  Is my  
interpretation correct?

If so, for this particular case, I think that reused subobject should  
have had named = 2 since it is used in 3 places in the list?  What  
would be the proper setting for the named value for all of the  sub- 
sub- objects of that 0x9e9880 object?

Also what are the rules about having subobject with named = 2 inside  
a higher level object?  Should that force the higher level object  
named value to be 2 or can it stay 1?

Any help in understanding this would be greatly appreciated since I  
can not track down a bug when I am not sure what the "correct" values/ 
answers really should be and nothing in the R-lang.pdf or R-exts.pdf  
seem to explain this concept in any detail, especially for compound  
objects (it is much simpler to understand for objects that are just  
vectors of reals, integers, or strings, since there really is only  
one "object" that has a data area which stores all of the values (and  
AFAIK none of those stored ints, reals, or strings stored inside the  
vector object has a named property themselves).

So would someone please explain what the "proper" values for all of  
the named values for all of the objects in this "call2" object should  
be immediately after it is created.

Thanks,


Kevin


From tlumley at u.washington.edu  Mon Jun  5 16:33:31 2006
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 5 Jun 2006 07:33:31 -0700 (PDT)
Subject: [Rd] more on bug 7924
In-Reply-To: <44840325.6020201@cimr.cam.ac.uk>
References: <9448B15C-0CCA-4E4C-A355-60C80066FF0D@sympatico.ca>
	<44840325.6020201@cimr.cam.ac.uk>
Message-ID: <Pine.LNX.4.64.0606050729190.6381@homer21.u.washington.edu>

On Mon, 5 Jun 2006, Hin-Tak Leung wrote:

> I see you have found the sexptype listing in Rinternals.h . I believe
> it was in one of R's FAQ's about R's garbage collector - it doesn't do
> proper reference-counted garbage collection as you suggested, but does
> a sort of poor man's garbage collection, by classifying entities in
> *only* 3 catergories - not-in-use, in-used-by-one, and in-used
> by-more-than-one.

AFAIK the NAMED field is not used at all by the garbage collector and that 
certainly isn't what it's there for.  The garbage collector is a 
generational mark-and-sweep collector, not reference counted at all.

NAMED is about preserving the "call-by-value illusion" -- an object with 
NAMED=0 or 1 can be modified without copying it -- which seems to be 
exactly the problem in PR#7924.

 	-thomas

> Kevin B. Hendricks wrote:
>> Hi,
>>
>> Okay I threw together a quick dump_object routine and found something
>> that I don't think is correct when call2 is created.
>>
>> > call2 <- Quote(f(arg[[1]]))[c(1,2,2,2)]
>> > get("call2")
>>
>> I use the do_get break to find the SEXP value I want
>>
>> Breakpoint 1, do_get (call=0xc2d530, op=0x52bd30, args=0x9e83a8,
>> rho=Variable "rho" is not available.
>> ) at ../../../r-devel/r-devel/R/src/main/envir.c:1668
>> 1668        if (PRIMVAL(op)) { /* have get(.) */
>>
>>
>> (gdb) print *rval
>> $2 = {sxpinfo = {type = 6, obj = 0, named = 1, gp = 0, mark = 0,
>> debug = 0, trace = 0, fin = 0, gcgen = 0, gccls = 0}, attrib =
>> 0x508818, gengc_next_node = 0x9e7d50,
>>    gengc_prev_node = 0x9e7ce0, u = {primsxp = {offset = 10663048},
>> symsxp = {pname = 0xa2b488, value = 0x9e7ce0, internal = 0x508818},
>> listsxp = {carval = 0xa2b488,
>>        cdrval = 0x9e7ce0, tagval = 0x508818}, envsxp = {frame =
>> 0xa2b488, enclos = 0x9e7ce0, hashtab = 0x508818}, closxp = {formals =
>> 0xa2b488, body = 0x9e7ce0,
>>        env = 0x508818}, promsxp = {value = 0xa2b488, expr = 0x9e7ce0,
>> env = 0x508818}}}
>>
>>
>> Now I invoke my own dump routine which keeps track of recursion level
>> and will dump the named and other things inside the newly created
>> object, the format of the output is
>>
>> recursion level: SEXP X TYPEOF(X) and then some object specific values
>>
>>
>> (gdb) call dump_object(rval, 0)
>>
>>
>> 0: 0x9e7d18 LANGSXP Object with length 1, named 1
>>      f(arg[[1]], arg[[1]], arg[[1]])
>> 1: 0xa2b488 SYMSXP  name at 0xa29408, value at 0x5087e0, named 0
>>      f
>> 1: 0x9e9880 LANGSXP Object with length 1, named 0
>>      arg[[1]]
>> 2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
>>      `[[`
>> 2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
>>      arg
>> 2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
>>      1
>> 1: 0x9e9880 LANGSXP Object with length 1, named 0
>>      arg[[1]]
>> 2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
>>      `[[`
>> 2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
>>      arg
>> 2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
>>      1
>> 1: 0x9e9880 LANGSXP Object with length 1, named 0
>>      arg[[1]]
>> 2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
>>      `[[`
>> 2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
>>      arg
>> 2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
>>      1
>>
>>
>>
>> Notice how each LANGSXP subobject reuses the exact same objects/
>> addresses (notice the address are the same) 3 times (one for each
>> entry) but the named value is always 0 for all of them (even though
>> that address is being re-used (effectively "named") each time.
>>
>> 1: 0x9e9880 LANGSXP Object with length 1, named 0
>>      arg[[1]]
>> 2: 0x508738 SYMSXP  name at 0x51c788, value at 0x527690, named 0
>>      `[[`
>> 2: 0xc37cc8 SYMSXP  name at 0xc376e8, value at 0x5087e0, named 0
>>      arg
>> 2: 0xf94cb8 REALSXP Object, length 1, starting at 0xf94ce0, named 0
>>      1
>>
>>
>> Shouldn't all 3 copies have named set to 1 and not zero since they
>> are all pointing to the same pieces of memory?  And shouldn't that
>> force the top level LANGSXP object to have named of 2 in this case
>> and not its current value of 1.
>>
>>
>> How should any assignment to any of those 3 places in the LANGSXP
>> list ever know they must be duplicated first when all of the named
>> values are 0 even though they all  point to the same block of memory?
>>
>> I truly do not understand how named is being used in this case.  Why
>> don't we simply refcount all allocated objects so we know what the
>> true value of named must be?  How else can we get that information?
>>
>> Hints welcome especially to reading material that explains more on
>> this stuff.
>>
>> Thanks,
>>
>> Kevin
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

Thomas Lumley			Assoc. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle


From mschwartz at mn.rr.com  Mon Jun  5 21:02:09 2006
From: mschwartz at mn.rr.com (Marc Schwartz (via MN))
Date: Mon, 05 Jun 2006 14:02:09 -0500
Subject: [Rd] grep() and factors
Message-ID: <1149534129.10840.17.camel@localhost.localdomain>

Hi all,

Based upon an offlist communication this morning, I am somewhat confused
(more than I usually am on most Monday mornings...) about the use of
grep() with factors as the 'x' argument.

The argument guidance in ?grep indicates:

x, text a character vector where matches are sought. Coerced to
        character if possible.

and in the Details section:

Arguments which should be character strings or character vectors are
coerced to character if possible.


The wording of both would seem to reasonably lead to the conclusion that
a factor could be coerced to a character vector by the use of
as.character(FACTOR).

In tracing through the C code in character.c for do_grep(), which in
turn calls coerceVector() in coerce.c, unless I am mis-reading the code
(always possible), I don't see an indication that a factor would be
coerced to a character vector.

Since a factor -> character coercion would seem at face value, the most
logical coercion to take place when using grep(), I am curious if I am
missing something, or if perhaps ?grep needs to be more clear in the
coercions that will or might take place. Perhaps even the consideration
of an error message if a factor is passed as the 'x' argument, if indeed
the coercion would not take place.

Perhaps the easiest example here might be:

# On R Version 2.3.1 (2006-06-01) on FC5

> grep("[a-z]", letters)
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22
[23] 23 24 25 26

> grep("[a-z]", factor(letters))
numeric(0)


Thanks for any comments or any virtual rotten tomatoes coming my way at
high speed.  :-)

Marc Schwartz


From maechler at stat.math.ethz.ch  Mon Jun  5 22:10:49 2006
From: maechler at stat.math.ethz.ch (maechler at stat.math.ethz.ch)
Date: Mon,  5 Jun 2006 22:10:49 +0200 (CEST)
Subject: [Rd] xy.coords(MATRIX) bug in code or documentation (PR#8937)
Message-ID: <20060605201049.727B94B028@slim.kubism.ku.dk>

>>>>> "FrPi" == Fran?ois Pinard <pinard at iro.umontreal.ca>
>>>>>     on Mon, 5 Jun 2006 08:11:20 -0400 writes:

    FrPi> [Martin Maechler]
    >> Thanks a lot, Francois, for your careful reading and
    >> careful report!

    FrPi> Thanks for being receptive! :-)

    FrPi> Another problem in the same area: the documentation
    FrPi> lies about how the function acts when given a
    FrPi> data.frame.  From the code, a data.frame is processed
    FrPi> as if it was a matrix.  From the documentation, while
    FrPi> the data.frame is not mentioned explicitely, it is
    FrPi> implied in the paragraph explaining how a list is
    FrPi> processed (because a data.frame is a list).  Some
    FrPi> reconciliation is needed here as well.

    >> [ Though I do slightly mind the word "lies" since I do
    >> value the 9th commandment..  Not telling the truth
    >> *accidentally* is not "lying" ]

    FrPi> Of course.  You know, I merely forgot a smiley, there.
    FrPi> You are right in that we should try a bit to spare the
    FrPi> extreme susceptibility of some people!  On the other
    FrPi> hand, there should be limits to the feeling that we
    FrPi> are always walking on eggs while writing to R-help or
    FrPi> R-devel, some comfort and happiness is needed, after
    FrPi> all. :-)

    >> Yes; in this case, I propose to just amend the
    >> documentation explainining that data.frames are treated
    >> "as matrices".

    FrPi> Let me add a small comment about data.frames.  It
    FrPi> would be a bit awkward if a data.frame had two columns
    FrPi> "y" and "x" (in that order) and if they were
    FrPi> interpreted differently after matrix coercion.  I
    FrPi> guess the problem would not exist if data.frames were
    FrPi> really interpreted as lists, the "x" and "y" columns
    FrPi> could even appear anywhere (untested).

you are right, but, as I now checked.
in  S  xy.coords() also behaves as it does now in R,
BTW, in both respects {data.frames and ">2-column"  matrices and d.f.s}

Hence --- for back compatibility reasons -- I now tend to agree
with Duncan Murdoch, and would not change xy.coords() behavior
at all, but simply amend the documentation.

Martin


From bill at insightful.com  Mon Jun  5 22:45:03 2006
From: bill at insightful.com (Bill Dunlap)
Date: Mon, 5 Jun 2006 13:45:03 -0700 (PDT)
Subject: [Rd] grep() and factors
In-Reply-To: <1149534129.10840.17.camel@localhost.localdomain>
References: <1149534129.10840.17.camel@localhost.localdomain>
Message-ID: <Pine.GSO.4.56.0606051332090.25139@octopus>

On Mon, 5 Jun 2006, Marc Schwartz (via MN) wrote:

> Based upon an offlist communication this morning, I am somewhat confused
> (more than I usually am on most Monday mornings...) about the use of
> grep() with factors as the 'x' argument.
>  ...
> > grep("[a-z]", letters)
>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22
> [23] 23 24 25 26
>
> > grep("[a-z]", factor(letters))
> numeric(0)

I was recently surprised by this also.  In addition, if
R's grep did support factors in this way, what sort of
object (factor or character) should it return when value=T?
I recently changed Splus's grep to return a character vector in
that case.

   Splus> grep("[def]", letters[26:1])
   [1] 21 22 23
   Splus>  grep("[def]", factor(letters[26:1], levels=letters[26:1]))
   [1] 21 22 23
   Splus> grep("[def]", letters[26:1], value=T)
   [1] "f" "e" "d"
   Splus> grep("[def]", factor(letters[26:1], levels=letters[26:1]), value=T)
   [1] "f" "e" "d"
   Splus> class(.Last.value)
   [1] "character"

R does this when grepping an integer vector.
   R> grep("1", 0:11, value=T)
   [1] "1"  "10" "11"
help(grep) says it returns "the matching elements themselves", but
doesn't say if "themselves" means before or after the conversion to
character.

----------------------------------------------------------------------------
Bill Dunlap
Insightful Corporation
bill at insightful dot com
360-428-8146

 "All statements in this message represent the opinions of the author and do
 not necessarily reflect Insightful Corporation policy or position."


From pinard at iro.umontreal.ca  Mon Jun  5 23:09:39 2006
From: pinard at iro.umontreal.ca (pinard at iro.umontreal.ca)
Date: Mon,  5 Jun 2006 23:09:39 +0200 (CEST)
Subject: [Rd] xy.coords(MATRIX) bug in code or documentation (PR#8937)
Message-ID: <20060605210939.4F78B19A13@slim.kubism.ku.dk>

[Martin Maechler]

>Hence --- for back compatibility reasons -- I now tend to agree
>with Duncan Murdoch, and would not change xy.coords() behavior
>at all, but simply amend the documentation.

It's fine, thanks a lot.

-- 
Fran?ois Pinard   http://pinard.progiciels-bpi.ca


From mschwartz at mn.rr.com  Tue Jun  6 00:15:03 2006
From: mschwartz at mn.rr.com (Marc Schwartz (via MN))
Date: Mon, 05 Jun 2006 17:15:03 -0500
Subject: [Rd] grep() and factors
In-Reply-To: <Pine.GSO.4.56.0606051332090.25139@octopus>
References: <1149534129.10840.17.camel@localhost.localdomain>
	<Pine.GSO.4.56.0606051332090.25139@octopus>
Message-ID: <1149545703.10840.88.camel@localhost.localdomain>

On Mon, 2006-06-05 at 13:45 -0700, Bill Dunlap wrote:
> On Mon, 5 Jun 2006, Marc Schwartz (via MN) wrote:
> 
> > Based upon an offlist communication this morning, I am somewhat confused
> > (more than I usually am on most Monday mornings...) about the use of
> > grep() with factors as the 'x' argument.
> >  ...
> > > grep("[a-z]", letters)
> >  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22
> > [23] 23 24 25 26
> >
> > > grep("[a-z]", factor(letters))
> > numeric(0)
> 
> I was recently surprised by this also.  In addition, if
> R's grep did support factors in this way, what sort of
> object (factor or character) should it return when value=T?
> I recently changed Splus's grep to return a character vector in
> that case.
> 
>    Splus> grep("[def]", letters[26:1])
>    [1] 21 22 23
>    Splus>  grep("[def]", factor(letters[26:1], levels=letters[26:1]))
>    [1] 21 22 23
>    Splus> grep("[def]", letters[26:1], value=T)
>    [1] "f" "e" "d"
>    Splus> grep("[def]", factor(letters[26:1], levels=letters[26:1]), value=T)
>    [1] "f" "e" "d"
>    Splus> class(.Last.value)
>    [1] "character"
> 
> R does this when grepping an integer vector.
>    R> grep("1", 0:11, value=T)
>    [1] "1"  "10" "11"
> help(grep) says it returns "the matching elements themselves", but
> doesn't say if "themselves" means before or after the conversion to
> character.

Bill,

My first inclination for the return value when used on a factor would be
the indexed factor elements where grep() would otherwise simply return
the indices. This would also maintain the factor levels from the
original source factor since "[".factor would normally retain these when
drop = FALSE.

For example:

# Return the indexed values as would otherwise be done
# in grep() if the factor to character coercion takes place:
# Use the same indices 21:23 as above

> factor(letters[26:1], levels = letters[26:1])[21:23]
[1] f e d
Levels: z y x w v u t s r q p o n m l k j i h g f e d c b a



>From my read of the C code in do_grep() in character.c (again, if
correct), when 'value = TRUE', the C code appears to first get the
indices and then build the returned vector from the indexed values from
the source vector in a for() loop. So this should not be a problem
philosophically.

However, given your example of the coercion of integers, perhaps with
grep() at least, consistent behavior would dictate that return values
are always character vectors. These could then be coerced manually back
to a factor, using the original levels, as may be required:

> factor.letters <- factor(letters[26:1], levels=letters[26:1])
> factor.letters
 [1] z y x w v u t s r q p o n m l k j i h g f e d c b a
Levels: z y x w v u t s r q p o n m l k j i h g f e d c b a

> grep("[def]", as.character(factor.letters))
[1] 21 22 23

> res <- grep("[def]", as.character(factor.letters), value = TRUE)
> res
[1] "f" "e" "d"

> factor(res, levels = levels(factor.letters))
[1] f e d
Levels: z y x w v u t s r q p o n m l k j i h g f e d c b a

Which of course is the same result I proposed initially above.

I could be convinced either way. The concern of course being that (given
the offlist replies I have received today) even experienced users are
getting bitten by the current behavior versus their intuitive
expectations, which are at least loosely supported by the documentation.

HTH,

Marc Schwartz


From sdavis2 at mail.nih.gov  Tue Jun  6 00:29:27 2006
From: sdavis2 at mail.nih.gov (Sean Davis)
Date: Mon, 05 Jun 2006 18:29:27 -0400
Subject: [Rd] grep() and factors
In-Reply-To: <1149545703.10840.88.camel@localhost.localdomain>
References: <1149534129.10840.17.camel@localhost.localdomain>	<Pine.GSO.4.56.0606051332090.25139@octopus>
	<1149545703.10840.88.camel@localhost.localdomain>
Message-ID: <4484B047.2010806@mail.nih.gov>

Marc Schwartz (via MN) wrote:
> On Mon, 2006-06-05 at 13:45 -0700, Bill Dunlap wrote:
> 
>>On Mon, 5 Jun 2006, Marc Schwartz (via MN) wrote:
>>
>>
>>>Based upon an offlist communication this morning, I am somewhat confused
>>>(more than I usually am on most Monday mornings...) about the use of
>>>grep() with factors as the 'x' argument.
>>> ...
>>>
>>>>grep("[a-z]", letters)
>>>
>>> [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22
>>>[23] 23 24 25 26
>>>
>>>
>>>>grep("[a-z]", factor(letters))
>>>
>>>numeric(0)
>>
>>I was recently surprised by this also.  In addition, if
>>R's grep did support factors in this way, what sort of
>>object (factor or character) should it return when value=T?
>>I recently changed Splus's grep to return a character vector in
>>that case.
>>
>>   Splus> grep("[def]", letters[26:1])
>>   [1] 21 22 23
>>   Splus>  grep("[def]", factor(letters[26:1], levels=letters[26:1]))
>>   [1] 21 22 23
>>   Splus> grep("[def]", letters[26:1], value=T)
>>   [1] "f" "e" "d"
>>   Splus> grep("[def]", factor(letters[26:1], levels=letters[26:1]), value=T)
>>   [1] "f" "e" "d"
>>   Splus> class(.Last.value)
>>   [1] "character"
>>
>>R does this when grepping an integer vector.
>>   R> grep("1", 0:11, value=T)
>>   [1] "1"  "10" "11"
>>help(grep) says it returns "the matching elements themselves", but
>>doesn't say if "themselves" means before or after the conversion to
>>character.
> 
> 
> Bill,
> 
> My first inclination for the return value when used on a factor would be
> the indexed factor elements where grep() would otherwise simply return
> the indices. This would also maintain the factor levels from the
> original source factor since "[".factor would normally retain these when
> drop = FALSE.
> 
> For example:
> 
> # Return the indexed values as would otherwise be done
> # in grep() if the factor to character coercion takes place:
> # Use the same indices 21:23 as above
> 
> 
>>factor(letters[26:1], levels = letters[26:1])[21:23]
> 
> [1] f e d
> Levels: z y x w v u t s r q p o n m l k j i h g f e d c b a
> 
> 
> 
>>From my read of the C code in do_grep() in character.c (again, if
> correct), when 'value = TRUE', the C code appears to first get the
> indices and then build the returned vector from the indexed values from
> the source vector in a for() loop. So this should not be a problem
> philosophically.
> 
> However, given your example of the coercion of integers, perhaps with
> grep() at least, consistent behavior would dictate that return values
> are always character vectors. These could then be coerced manually back
> to a factor, using the original levels, as may be required:
> 
> 
>>factor.letters <- factor(letters[26:1], levels=letters[26:1])
>>factor.letters
> 
>  [1] z y x w v u t s r q p o n m l k j i h g f e d c b a
> Levels: z y x w v u t s r q p o n m l k j i h g f e d c b a
> 
> 
>>grep("[def]", as.character(factor.letters))
> 
> [1] 21 22 23
> 
> 
>>res <- grep("[def]", as.character(factor.letters), value = TRUE)
>>res
> 
> [1] "f" "e" "d"
> 
> 
>>factor(res, levels = levels(factor.letters))
> 
> [1] f e d
> Levels: z y x w v u t s r q p o n m l k j i h g f e d c b a
> 
> Which of course is the same result I proposed initially above.
> 
> I could be convinced either way. The concern of course being that (given
> the offlist replies I have received today) even experienced users are
> getting bitten by the current behavior versus their intuitive
> expectations, which are at least loosely supported by the documentation.

I'll chime in on-list to say that I have had the same experience with 
expecting grep to coerce to text.  Despite the question of return 
values, I think of grep (not equivalent to the unix command, I 
understand, but it does have the same name) as operating on "text", not 
the factor levels themselves.  Not a big deal, but it does lead to 
sometimes hard to track bugs if one is not careful to put in 
as.character all the time.

Sean


From bill at insightful.com  Tue Jun  6 02:57:59 2006
From: bill at insightful.com (Bill Dunlap)
Date: Mon, 5 Jun 2006 17:57:59 -0700 (PDT)
Subject: [Rd] grep() and factors
In-Reply-To: <1149545703.10840.88.camel@localhost.localdomain>
References: <1149534129.10840.17.camel@localhost.localdomain> 
	<Pine.GSO.4.56.0606051332090.25139@octopus>
	<1149545703.10840.88.camel@localhost.localdomain>
Message-ID: <Pine.GSO.4.56.0606051753410.25139@octopus>

On Mon, 5 Jun 2006, Marc Schwartz (via MN) wrote:

> > > > grep("[a-z]", factor(letters))
> > > numeric(0)
> >
> > I was recently surprised by this also.  In addition, if
> > R's grep did support factors in this way, what sort of
> > object (factor or character) should it return when value=T?
> > I recently changed Splus's grep to return a character vector in
> > that case.
> >
> >    Splus> grep("[def]", letters[26:1])
> >    [1] 21 22 23
> >    Splus>  grep("[def]", factor(letters[26:1], levels=letters[26:1]))
> >    [1] 21 22 23
> >    Splus> grep("[def]", letters[26:1], value=T)
> >    [1] "f" "e" "d"
> >    Splus> grep("[def]", factor(letters[26:1], levels=letters[26:1]), value=T)
> >    [1] "f" "e" "d"
> >    Splus> class(.Last.value)
> >    [1] "character"
> >
> > R does this when grepping an integer vector.
> >    R> grep("1", 0:11, value=T)
> >    [1] "1"  "10" "11"
> > help(grep) says it returns "the matching elements themselves", but
> > doesn't say if "themselves" means before or after the conversion to
> > character.
>
> Bill,
>
> My first inclination for the return value when used on a factor would be
> the indexed factor elements where grep() would otherwise simply return
> the indices. This would also maintain the factor levels from the
> original source factor since "[".factor would normally retain these when
> drop = FALSE.

That would be my first inclination also.  I would have expected the output of
   grep(pattern, text, value=TRUE)
to be identical to that of
   text[grep(pattern, text, value=FALSE)]
no matter what class text has.

No end users have seen this in Splus so we can change it to anything,
but we want to keep it the same as R's.

> I could be convinced either way. The concern of course being that (given
> the offlist replies I have received today) even experienced users are
> getting bitten by the current behavior versus their intuitive
> expectations, which are at least loosely supported by the documentation.
>
> HTH,
>
> Marc Schwartz

----------------------------------------------------------------------------
Bill Dunlap
Insightful Corporation
bill at insightful dot com
360-428-8146

 "All statements in this message represent the opinions of the author and do
 not necessarily reflect Insightful Corporation policy or position."


From ggrothendieck at gmail.com  Tue Jun  6 04:02:39 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 5 Jun 2006 22:02:39 -0400
Subject: [Rd] grep() and factors
In-Reply-To: <Pine.GSO.4.56.0606051753410.25139@octopus>
References: <1149534129.10840.17.camel@localhost.localdomain>
	<Pine.GSO.4.56.0606051332090.25139@octopus>
	<1149545703.10840.88.camel@localhost.localdomain>
	<Pine.GSO.4.56.0606051753410.25139@octopus>
Message-ID: <971536df0606051902y55148323n116403b1f0e74e80@mail.gmail.com>

On 6/5/06, Bill Dunlap <bill at insightful.com> wrote:
> On Mon, 5 Jun 2006, Marc Schwartz (via MN) wrote:
>
> > > > > grep("[a-z]", factor(letters))
> > > > numeric(0)
> > >
> > > I was recently surprised by this also.  In addition, if
> > > R's grep did support factors in this way, what sort of
> > > object (factor or character) should it return when value=T?
> > > I recently changed Splus's grep to return a character vector in
> > > that case.
> > >
> > >    Splus> grep("[def]", letters[26:1])
> > >    [1] 21 22 23
> > >    Splus>  grep("[def]", factor(letters[26:1], levels=letters[26:1]))
> > >    [1] 21 22 23
> > >    Splus> grep("[def]", letters[26:1], value=T)
> > >    [1] "f" "e" "d"
> > >    Splus> grep("[def]", factor(letters[26:1], levels=letters[26:1]), value=T)
> > >    [1] "f" "e" "d"
> > >    Splus> class(.Last.value)
> > >    [1] "character"
> > >
> > > R does this when grepping an integer vector.
> > >    R> grep("1", 0:11, value=T)
> > >    [1] "1"  "10" "11"
> > > help(grep) says it returns "the matching elements themselves", but
> > > doesn't say if "themselves" means before or after the conversion to
> > > character.
> >
> > Bill,
> >
> > My first inclination for the return value when used on a factor would be
> > the indexed factor elements where grep() would otherwise simply return
> > the indices. This would also maintain the factor levels from the
> > original source factor since "[".factor would normally retain these when
> > drop = FALSE.
>
> That would be my first inclination also.  I would have expected the output of
>   grep(pattern, text, value=TRUE)
> to be identical to that of
>   text[grep(pattern, text, value=FALSE)]
> no matter what class text has.
>
> No end users have seen this in Splus so we can change it to anything,
> but we want to keep it the same as R's.
>
> > I could be convinced either way. The concern of course being that (given
> > the offlist replies I have received today) even experienced users are
> > getting bitten by the current behavior versus their intuitive
> > expectations, which are at least loosely supported by the documentation.
> >

I would have expected

If non-character text arguments are accepted I would have expected
that they be coerced to character so that
grep(pattern, text, ...) would return the same result as
grep(pattern, as.character(text), ...)


From hb at stat.berkeley.edu  Tue Jun  6 04:04:01 2006
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Mon, 5 Jun 2006 19:04:01 -0700
Subject: [Rd] FYI: R-2.3.1pat-win32.exe not on CRAN
Message-ID: <59d7961d0606051904r6d0a3bd2x52918faf74a2dcff@mail.gmail.com>

FYI, the download link on CRAN for R-2.3.1pat-win32.exe and related
files seems to be broken at least since yesterday, e.g.
http://cran.at.r-project.org/bin/windows/base/R-2.3.1pat-win32.exe.

/Henrik


From murdoch at stats.uwo.ca  Tue Jun  6 04:28:44 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 05 Jun 2006 22:28:44 -0400
Subject: [Rd] FYI: R-2.3.1pat-win32.exe not on CRAN
In-Reply-To: <59d7961d0606051904r6d0a3bd2x52918faf74a2dcff@mail.gmail.com>
References: <59d7961d0606051904r6d0a3bd2x52918faf74a2dcff@mail.gmail.com>
Message-ID: <4484E85C.3030006@stats.uwo.ca>

On 6/5/2006 10:04 PM, Henrik Bengtsson wrote:
> FYI, the download link on CRAN for R-2.3.1pat-win32.exe and related
> files seems to be broken at least since yesterday, e.g.
> http://cran.at.r-project.org/bin/windows/base/R-2.3.1pat-win32.exe.

Thanks, it was a typo in the upload script.  Fixed now, so the files 
should be available within a day or so.

Duncan Murdoch


From francoisromain at free.fr  Tue Jun  6 11:04:06 2006
From: francoisromain at free.fr (Romain Francois)
Date: Tue, 06 Jun 2006 11:04:06 +0200
Subject: [Rd] contour lines in filled.contour
Message-ID: <44854506.7020704@free.fr>

Hi,

When I want to draw contour lines on top of a filled.contour plot, I can 
use the plot.axes arg, such as in : 

filled.contour(volcano, color = terrain.colors, asp = 1,
  plot.axes=contour(volcano, add=T) )

but then the lines are computed twice. Is it possible to add an option 
to filled.contour such that the lines are drawn internally when computed 
in do_filledcontour. The code is in src/main/plot3d.c in the current 
R-devel. I would like to do it, but I don't understand the internals.

Romain


-- 
visit the R Graph Gallery : http://addictedtor.free.fr/graphiques
mixmod 1.7 is released : http://www-math.univ-fcomte.fr/mixmod/index.php
+---------------------------------------------------------------+
| Romain FRANCOIS - http://francoisromain.free.fr               |
| Doctorant INRIA Futurs / EDF                                  |
+---------------------------------------------------------------+


From ripley at stats.ox.ac.uk  Tue Jun  6 12:12:56 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 6 Jun 2006 11:12:56 +0100 (BST)
Subject: [Rd] grep() and factors
In-Reply-To: <1149534129.10840.17.camel@localhost.localdomain>
References: <1149534129.10840.17.camel@localhost.localdomain>
Message-ID: <Pine.LNX.4.64.0606061103180.6063@gannet.stats.ox.ac.uk>

On Mon, 5 Jun 2006, Marc Schwartz (via MN) wrote:

> Hi all,
>
> Based upon an offlist communication this morning, I am somewhat confused
> (more than I usually am on most Monday mornings...) about the use of
> grep() with factors as the 'x' argument.
>
> The argument guidance in ?grep indicates:
>
> x, text a character vector where matches are sought. Coerced to
>        character if possible.
>
> and in the Details section:
>
> Arguments which should be character strings or character vectors are
> coerced to character if possible.
>
>
> The wording of both would seem to reasonably lead to the conclusion that
> a factor could be coerced to a character vector by the use of
> as.character(FACTOR).

Well, that is not what is meant by the wording, nor what happens: there is 
no method dispatch so the factor is coerced from an integer vector to a 
character vector.  'coerced' usually means at low level: where 
as.character() is involved we tend to say so.

As for the comments on what happens if value=TRUE: if the 'x' has been 
coerced, I would expect the value to be based on the coerced value (and it 
currently is).

> grep("1", factor(letters))
  [1]  1 10 11 12 13 14 15 16 17 18 19 21
> grep("1", factor(letters), value=TRUE)
  [1] "1"  "10" "11" "12" "13" "14" "15" "16" "17" "18" "19" "21"

So whereas I am quite happy to replace the low-level coercion by method 
dispatch on as.character, I don't think this should be altered (and am 
pretty sure there is code out there which expects a character vector 
result).

> In tracing through the C code in character.c for do_grep(), which in
> turn calls coerceVector() in coerce.c, unless I am mis-reading the code
> (always possible), I don't see an indication that a factor would be
> coerced to a character vector.
>
> Since a factor -> character coercion would seem at face value, the most
> logical coercion to take place when using grep(), I am curious if I am
> missing something, or if perhaps ?grep needs to be more clear in the
> coercions that will or might take place. Perhaps even the consideration
> of an error message if a factor is passed as the 'x' argument, if indeed
> the coercion would not take place.
>
> Perhaps the easiest example here might be:
>
> # On R Version 2.3.1 (2006-06-01) on FC5
>
>> grep("[a-z]", letters)
> [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22
> [23] 23 24 25 26
>
>> grep("[a-z]", factor(letters))
> numeric(0)
>
>
> Thanks for any comments or any virtual rotten tomatoes coming my way at
> high speed.  :-)
>
> Marc Schwartz
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From sdavis2 at mail.nih.gov  Tue Jun  6 14:27:48 2006
From: sdavis2 at mail.nih.gov (Sean Davis)
Date: Tue, 06 Jun 2006 08:27:48 -0400
Subject: [Rd] Editing a package with a NAMESPACE in place
Message-ID: <C0AAED04.C8D7%sdavis2@mail.nih.gov>

I would like to edit a function from a package that uses a NAMESPACE, but in
place (after the package is loaded).  As a simple example, I would like to
add a browser() call to a line in one of the functions for debugging
purposes.  Since the function is in the package namespace, I can't do that
directly by simply making a copy of the function and editing it--that copy
doesn't get used.  I tried assigning into the package environment, but it is
locked, it appears.  How do I go about doing this without changing the
package source, then reinstalling and reloading?

Thanks,
Sean


From ligges at statistik.uni-dortmund.de  Tue Jun  6 14:33:58 2006
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 06 Jun 2006 14:33:58 +0200
Subject: [Rd] Editing a package with a NAMESPACE in place
In-Reply-To: <C0AAED04.C8D7%sdavis2@mail.nih.gov>
References: <C0AAED04.C8D7%sdavis2@mail.nih.gov>
Message-ID: <44857636.6090903@statistik.uni-dortmund.de>

Sean Davis wrote:
> I would like to edit a function from a package that uses a NAMESPACE, but in
> place (after the package is loaded).  As a simple example, I would like to
> add a browser() call to a line in one of the functions for debugging
> purposes.  Since the function is in the package namespace, I can't do that
> directly by simply making a copy of the function and editing it--that copy
> doesn't get used.  I tried assigning into the package environment, but it is
> locked, it appears.  How do I go about doing this without changing the
> package source, then reinstalling and reloading?
> 
> Thanks,
> Sean
> 


See ?assignInNamespace and ?fixInNamespace

During developing, I suggest to remove the NAMESPACE temporarily.

Uwe Ligges


From sdavis2 at mail.nih.gov  Tue Jun  6 14:35:08 2006
From: sdavis2 at mail.nih.gov (Sean Davis)
Date: Tue, 06 Jun 2006 08:35:08 -0400
Subject: [Rd] Editing a package with a NAMESPACE in place
In-Reply-To: <44857636.6090903@statistik.uni-dortmund.de>
Message-ID: <C0AAEEBC.C8DB%sdavis2@mail.nih.gov>




On 6/6/06 8:33 AM, "Uwe Ligges" <ligges at statistik.uni-dortmund.de> wrote:

> Sean Davis wrote:
>> I would like to edit a function from a package that uses a NAMESPACE, but in
>> place (after the package is loaded).  As a simple example, I would like to
>> add a browser() call to a line in one of the functions for debugging
>> purposes.  Since the function is in the package namespace, I can't do that
>> directly by simply making a copy of the function and editing it--that copy
>> doesn't get used.  I tried assigning into the package environment, but it is
>> locked, it appears.  How do I go about doing this without changing the
>> package source, then reinstalling and reloading?
>> 
>> Thanks,
>> Sean
>> 
> 
> 
> See ?assignInNamespace and ?fixInNamespace

Thanks, Uwe.  I should have been able to find those, but....

> During developing, I suggest to remove the NAMESPACE temporarily.

I wondered if that was common practice.

Sean


From ripley at stats.ox.ac.uk  Tue Jun  6 14:36:56 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 6 Jun 2006 13:36:56 +0100 (BST)
Subject: [Rd] Editing a package with a NAMESPACE in place
In-Reply-To: <C0AAED04.C8D7%sdavis2@mail.nih.gov>
References: <C0AAED04.C8D7%sdavis2@mail.nih.gov>
Message-ID: <Pine.LNX.4.64.0606061332550.20451@gannet.stats.ox.ac.uk>

On Tue, 6 Jun 2006, Sean Davis wrote:

> I would like to edit a function from a package that uses a NAMESPACE, but in
> place (after the package is loaded).  As a simple example, I would like to
> add a browser() call to a line in one of the functions for debugging
> purposes.  Since the function is in the package namespace, I can't do that
> directly by simply making a copy of the function and editing it--that copy
> doesn't get used.  I tried assigning into the package environment, but it is
> locked, it appears.  How do I go about doing this without changing the
> package source, then reinstalling and reloading?

See the section on debugging in `Writing R Extensions' (which has this 
exact example).  Most easily by trace(), but you can also use 
fixInNamespace().

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From sfalcon at fhcrc.org  Tue Jun  6 16:31:22 2006
From: sfalcon at fhcrc.org (Seth Falcon)
Date: Tue, 06 Jun 2006 07:31:22 -0700
Subject: [Rd] Editing a package with a NAMESPACE in place
In-Reply-To: <C0AAEEBC.C8DB%sdavis2@mail.nih.gov> (Sean Davis's message of
	"Tue, 06 Jun 2006 08:35:08 -0400")
References: <C0AAEEBC.C8DB%sdavis2@mail.nih.gov>
Message-ID: <m2mzcqxsn9.fsf@ziti.local>

Sean Davis <sdavis2 at mail.nih.gov> writes:

> On 6/6/06 8:33 AM, "Uwe Ligges" <ligges at statistik.uni-dortmund.de> wrote:
>
>> See ?assignInNamespace and ?fixInNamespace
>
> Thanks, Uwe.  I should have been able to find those, but....
>
>> During developing, I suggest to remove the NAMESPACE temporarily.
>
> I wondered if that was common practice.

For simple packages, removing the NAMESPACE file will work well and is
certainly very convenient.  However, with more complex packages (in
terms of dependencies and S4 stuff) it may not work so well:

* You won't be testing the _real_ package (this is a problem
  regardless of complexity I suppose).

* Without the NAMESPACE, you may get the wrong functions and see all
  sorts of breakage.  IOW, some packages rely on the NAMESPACE to
  function properly; removing it does more than just exposing private
  functions.

In practice I tend not to follow my advice :-/.  What I often do is
the equivalent of source() on the required .R files while I'm fixing a
particular function or method.  But I do make sure to go through an
INSTALL/test cycle (with NAMESPACE) frequently.

Cheers,

+ seth


From maechler at stat.math.ethz.ch  Tue Jun  6 17:08:26 2006
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue, 6 Jun 2006 17:08:26 +0200
Subject: [Rd] Editing a package with a NAMESPACE in place
In-Reply-To: <m2mzcqxsn9.fsf@ziti.local>
References: <C0AAEEBC.C8DB%sdavis2@mail.nih.gov>
	<m2mzcqxsn9.fsf@ziti.local>
Message-ID: <17541.39530.704285.799326@stat.math.ethz.ch>

>>>>> "Seth" == Seth Falcon <sfalcon at fhcrc.org>
>>>>>     on Tue, 06 Jun 2006 07:31:22 -0700 writes:

    Seth> Sean Davis <sdavis2 at mail.nih.gov> writes:
    >> On 6/6/06 8:33 AM, "Uwe Ligges"
    >> <ligges at statistik.uni-dortmund.de> wrote:
    >> 
    >>> See ?assignInNamespace and ?fixInNamespace
    >>  Thanks, Uwe.  I should have been able to find those,
    >> but....
    >> 
    >>> During developing, I suggest to remove the NAMESPACE
    >>> temporarily.
    >>  I wondered if that was common practice.

    Seth> For simple packages, removing the NAMESPACE file will
    Seth> work well and is certainly very convenient.  However,
    Seth> with more complex packages (in terms of dependencies
    Seth> and S4 stuff) it may not work so well:

    Seth> * You won't be testing the _real_ package (this is a
    Seth> problem regardless of complexity I suppose).

    Seth> * Without the NAMESPACE, you may get the wrong
    Seth> functions and see all sorts of breakage.  IOW, some
    Seth> packages rely on the NAMESPACE to function properly;
    Seth> removing it does more than just exposing private
    Seth> functions.

    Seth> In practice I tend not to follow my advice :-/.  What
    Seth> I often do is the equivalent of source() on the
    Seth> required .R files while I'm fixing a particular
    Seth> function or method.  But I do make sure to go through
    Seth> an INSTALL/test cycle (with NAMESPACE) frequently.

I'm quite similar to Seth here. For that reason (and because
Doug Bates also behaves similarly here, and we talked about it !),
if you use  R 2.3.0 or newer,
    example(source)
will provide the function  sourceDir(),  so you can do

   example(source)
   sourceDir("<mypackage_SOURCE_dir>/R")

Martin 



    Seth> Cheers,

    Seth> + seth

    Seth> ______________________________________________
    Seth> R-devel at r-project.org mailing list
    Seth> https://stat.ethz.ch/mailman/listinfo/r-devel


From mschwartz at mn.rr.com  Tue Jun  6 17:50:48 2006
From: mschwartz at mn.rr.com (Marc Schwartz (via MN))
Date: Tue, 06 Jun 2006 10:50:48 -0500
Subject: [Rd] grep() and factors
In-Reply-To: <Pine.LNX.4.64.0606061103180.6063@gannet.stats.ox.ac.uk>
References: <1149534129.10840.17.camel@localhost.localdomain>
	<Pine.LNX.4.64.0606061103180.6063@gannet.stats.ox.ac.uk>
Message-ID: <1149609048.3490.28.camel@localhost.localdomain>

On Tue, 2006-06-06 at 11:12 +0100, Prof Brian Ripley wrote:
> On Mon, 5 Jun 2006, Marc Schwartz (via MN) wrote:
> 
> > Hi all,
> >
> > Based upon an offlist communication this morning, I am somewhat confused
> > (more than I usually am on most Monday mornings...) about the use of
> > grep() with factors as the 'x' argument.
> >
> > The argument guidance in ?grep indicates:
> >
> > x, text a character vector where matches are sought. Coerced to
> >        character if possible.
> >
> > and in the Details section:
> >
> > Arguments which should be character strings or character vectors are
> > coerced to character if possible.
> >
> >
> > The wording of both would seem to reasonably lead to the conclusion that
> > a factor could be coerced to a character vector by the use of
> > as.character(FACTOR).
> 
> Well, that is not what is meant by the wording, nor what happens: there is 
> no method dispatch so the factor is coerced from an integer vector to a 
> character vector.  'coerced' usually means at low level: where 
> as.character() is involved we tend to say so.
> 
> As for the comments on what happens if value=TRUE: if the 'x' has been 
> coerced, I would expect the value to be based on the coerced value (and it 
> currently is).
> 
> > grep("1", factor(letters))
>   [1]  1 10 11 12 13 14 15 16 17 18 19 21
> > grep("1", factor(letters), value=TRUE)
>   [1] "1"  "10" "11" "12" "13" "14" "15" "16" "17" "18" "19" "21"
> 
> So whereas I am quite happy to replace the low-level coercion by method 
> dispatch on as.character, I don't think this should be altered (and am 
> pretty sure there is code out there which expects a character vector 
> result).

Prof. Ripley,

Thanks for your reply and clarification.

I would acknowledge that the coercion of a factor to its numeric values
would not be immediately intuitive to me (or others who have commented
on this) within the context of grep(). However, in light of your
comments and having reviewed the C code, it does make sense.

Given this behavior, it would seem reasonable to provide a clarification
in ?grep, perhaps as follows:

Arguments

x, text a character vector where matches are sought. Coerced to
character if possible. See Details for factors.


Details

Arguments which should be character strings or character vectors are
coerced to character if possible. In the case of factors, these are
coerced using as.integer(x). You must explicitly coerce the factor using
as.character(x) to use these functions on the character vector
equivalent.


Thanks for your consideration.

Regards,

Marc Schwartz


From sfalcon at fhcrc.org  Tue Jun  6 17:57:33 2006
From: sfalcon at fhcrc.org (Seth Falcon)
Date: Tue, 06 Jun 2006 08:57:33 -0700
Subject: [Rd] Editing a package with a NAMESPACE in place
In-Reply-To: <17541.39530.704285.799326@stat.math.ethz.ch> (Martin Maechler's
	message of "Tue, 6 Jun 2006 17:08:26 +0200")
References: <C0AAEEBC.C8DB%sdavis2@mail.nih.gov> <m2mzcqxsn9.fsf@ziti.local>
	<17541.39530.704285.799326@stat.math.ethz.ch>
Message-ID: <m2d5dmxonm.fsf@ziti.local>

Martin Maechler <maechler at stat.math.ethz.ch> writes:

> I'm quite similar to Seth here. For that reason (and because
> Doug Bates also behaves similarly here, and we talked about it !),
> if you use  R 2.3.0 or newer,
>     example(source)
> will provide the function  sourceDir(),  so you can do
>
>    example(source)
>    sourceDir("<mypackage_SOURCE_dir>/R")

I wonder if a nice improvement would be to provide a package source
directory and have the function parse the DESCRIPTION file in case
there is a Collate field.  In that case, sourceDir() will get the
right order... But maybe it doesn't matter if you have already loaded
the package and are doing development...


From bolker at zoo.ufl.edu  Tue Jun  6 18:00:58 2006
From: bolker at zoo.ufl.edu (Ben Bolker)
Date: Tue, 06 Jun 2006 12:00:58 -0400
Subject: [Rd] help compiling package with g77
Message-ID: <4485A6BA.2000309@zoo.ufl.edu>


   I have a package with some embedded legacy FORTRAN code
(for computing complex Bessel functions, written in 2003
by C. Bond to implement the algorithms of Zhang and Jin 1996).
It worked well until recently [despite warnings about deprecated
headers "includes at least one deprecated or antiquated header" --
when I tried to fix these the code stopped working, so I left
them alone].  Now an upgrade of my Debian system has apparently
got R switched over from using g77 to gfortran.  The old code
has EQUIVALENCE functions in it that gfortran doesn't like ...
(I know, the right thing would be to go back and understand all
the code and rewrite it, but I'm not sure I can bear it.)

  My first attempt was to hack things by replacing /usr/bin/gfortran
(a link to /usr/bin/gfortran-4.0) with a link to g77; this helped
things get farther but got me to an unresolved call to do_lio.
Based on information in the archives from BDR, I commented out
unnecessary PRINT commands in the FORTRAN code, but this just
led to another unresolved symbol (e_wfse ???) -- I suspect that
this is a symptom of R still using gfortran libraries instead
of g77 libraries.

  Now I'm trying to figure out what I can do in the Makevars
file in the package directory to force use of g77 *and* the
appropriate libraries ... putting

F77=/usr/bin/g77

in [pkgname]/src/Makevars doesn't seem to have any effect.
Even if I force the use of g77, I'm not sure whether it will
get the right libraries or not ... perhaps I should recompile
R with F77=/usr/bin/g77 all the way?

  I have poked around in The Fine Manuals quite a bit ... if anyone
has pointers I would be grateful.  This'll teach me to upgrade.

  cheers
    Ben Bolker

-- 
620B Bartram Hall                            bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


From ripley at stats.ox.ac.uk  Tue Jun  6 18:08:49 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 6 Jun 2006 17:08:49 +0100 (BST)
Subject: [Rd] grep() and factors
In-Reply-To: <1149609048.3490.28.camel@localhost.localdomain>
References: <1149534129.10840.17.camel@localhost.localdomain> 
	<Pine.LNX.4.64.0606061103180.6063@gannet.stats.ox.ac.uk>
	<1149609048.3490.28.camel@localhost.localdomain>
Message-ID: <Pine.LNX.4.64.0606061706060.5942@gannet.stats.ox.ac.uk>

On Tue, 6 Jun 2006, Marc Schwartz (via MN) wrote:

> On Tue, 2006-06-06 at 11:12 +0100, Prof Brian Ripley wrote:
>> On Mon, 5 Jun 2006, Marc Schwartz (via MN) wrote:
>>
>>> Hi all,
>>>
>>> Based upon an offlist communication this morning, I am somewhat confused
>>> (more than I usually am on most Monday mornings...) about the use of
>>> grep() with factors as the 'x' argument.
>>>
>>> The argument guidance in ?grep indicates:
>>>
>>> x, text a character vector where matches are sought. Coerced to
>>>        character if possible.
>>>
>>> and in the Details section:
>>>
>>> Arguments which should be character strings or character vectors are
>>> coerced to character if possible.
>>>
>>>
>>> The wording of both would seem to reasonably lead to the conclusion that
>>> a factor could be coerced to a character vector by the use of
>>> as.character(FACTOR).
>>
>> Well, that is not what is meant by the wording, nor what happens: there is
>> no method dispatch so the factor is coerced from an integer vector to a
>> character vector.  'coerced' usually means at low level: where
>> as.character() is involved we tend to say so.
>>
>> As for the comments on what happens if value=TRUE: if the 'x' has been
>> coerced, I would expect the value to be based on the coerced value (and it
>> currently is).
>>
>>> grep("1", factor(letters))
>>   [1]  1 10 11 12 13 14 15 16 17 18 19 21
>>> grep("1", factor(letters), value=TRUE)
>>   [1] "1"  "10" "11" "12" "13" "14" "15" "16" "17" "18" "19" "21"
>>
>> So whereas I am quite happy to replace the low-level coercion by method
>> dispatch on as.character, I don't think this should be altered (and am
>> pretty sure there is code out there which expects a character vector
>> result).
>
> Prof. Ripley,
>
> Thanks for your reply and clarification.
>
> I would acknowledge that the coercion of a factor to its numeric values
> would not be immediately intuitive to me (or others who have commented
> on this) within the context of grep(). However, in light of your
> comments and having reviewed the C code, it does make sense.
>
> Given this behavior, it would seem reasonable to provide a clarification
> in ?grep, perhaps as follows:
>
> Arguments
>
> x, text a character vector where matches are sought. Coerced to
> character if possible. See Details for factors.
>
>
> Details
>
> Arguments which should be character strings or character vectors are
> coerced to character if possible. In the case of factors, these are
> coerced using as.integer(x). You must explicitly coerce the factor using
> as.character(x) to use these functions on the character vector
> equivalent.

I do think we should `replace the low-level coercion by method dispatch on 
as.character', and have done so in R-devel (but am still testing 
packages).  There have been quite a few instances of such low-level 
coercion (including for dimnames), and I am currently looking through to 
see if there are any others that either should be altered or the 
documentation clarified.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From mschwartz at mn.rr.com  Tue Jun  6 18:21:21 2006
From: mschwartz at mn.rr.com (Marc Schwartz (via MN))
Date: Tue, 06 Jun 2006 11:21:21 -0500
Subject: [Rd] grep() and factors
In-Reply-To: <Pine.LNX.4.64.0606061706060.5942@gannet.stats.ox.ac.uk>
References: <1149534129.10840.17.camel@localhost.localdomain>
	<Pine.LNX.4.64.0606061103180.6063@gannet.stats.ox.ac.uk>
	<1149609048.3490.28.camel@localhost.localdomain>
	<Pine.LNX.4.64.0606061706060.5942@gannet.stats.ox.ac.uk>
Message-ID: <1149610882.3490.35.camel@localhost.localdomain>

On Tue, 2006-06-06 at 17:08 +0100, Prof Brian Ripley wrote:
> On Tue, 6 Jun 2006, Marc Schwartz (via MN) wrote:
> 
> > On Tue, 2006-06-06 at 11:12 +0100, Prof Brian Ripley wrote:
> >> On Mon, 5 Jun 2006, Marc Schwartz (via MN) wrote:
> >>
> >>> Hi all,
> >>>
> >>> Based upon an offlist communication this morning, I am somewhat confused
> >>> (more than I usually am on most Monday mornings...) about the use of
> >>> grep() with factors as the 'x' argument.
> >>>
> >>> The argument guidance in ?grep indicates:
> >>>
> >>> x, text a character vector where matches are sought. Coerced to
> >>>        character if possible.
> >>>
> >>> and in the Details section:
> >>>
> >>> Arguments which should be character strings or character vectors are
> >>> coerced to character if possible.
> >>>
> >>>
> >>> The wording of both would seem to reasonably lead to the conclusion that
> >>> a factor could be coerced to a character vector by the use of
> >>> as.character(FACTOR).
> >>
> >> Well, that is not what is meant by the wording, nor what happens: there is
> >> no method dispatch so the factor is coerced from an integer vector to a
> >> character vector.  'coerced' usually means at low level: where
> >> as.character() is involved we tend to say so.
> >>
> >> As for the comments on what happens if value=TRUE: if the 'x' has been
> >> coerced, I would expect the value to be based on the coerced value (and it
> >> currently is).
> >>
> >>> grep("1", factor(letters))
> >>   [1]  1 10 11 12 13 14 15 16 17 18 19 21
> >>> grep("1", factor(letters), value=TRUE)
> >>   [1] "1"  "10" "11" "12" "13" "14" "15" "16" "17" "18" "19" "21"
> >>
> >> So whereas I am quite happy to replace the low-level coercion by method
> >> dispatch on as.character, I don't think this should be altered (and am
> >> pretty sure there is code out there which expects a character vector
> >> result).
> >
> > Prof. Ripley,
> >
> > Thanks for your reply and clarification.
> >
> > I would acknowledge that the coercion of a factor to its numeric values
> > would not be immediately intuitive to me (or others who have commented
> > on this) within the context of grep(). However, in light of your
> > comments and having reviewed the C code, it does make sense.
> >
> > Given this behavior, it would seem reasonable to provide a clarification
> > in ?grep, perhaps as follows:
> >
> > Arguments
> >
> > x, text a character vector where matches are sought. Coerced to
> > character if possible. See Details for factors.
> >
> >
> > Details
> >
> > Arguments which should be character strings or character vectors are
> > coerced to character if possible. In the case of factors, these are
> > coerced using as.integer(x). You must explicitly coerce the factor using
> > as.character(x) to use these functions on the character vector
> > equivalent.
> 
> I do think we should `replace the low-level coercion by method dispatch on 
> as.character', and have done so in R-devel (but am still testing 
> packages).  There have been quite a few instances of such low-level 
> coercion (including for dimnames), and I am currently looking through to 
> see if there are any others that either should be altered or the 
> documentation clarified.

Prof. Ripley,

I did not want to presume that you would indeed do this or more, had
already done so. Though given your additional comments, I now note that
this is mentioned in the NEWS file for R-devel.

I do sincerely appreciate your efforts here.

Perhaps an interim change in ?grep as above for 2.3.1patched might be
considered, though now with an additional comment that this approach
will (might) change in 2.4.0?

I have added Bill Dunlap as a cc: here, given his expressed desire to be
consistent with R on this point.

Regards,

Marc


From edd at debian.org  Tue Jun  6 18:23:52 2006
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 6 Jun 2006 11:23:52 -0500
Subject: [Rd] help compiling package with g77
In-Reply-To: <4485A6BA.2000309@zoo.ufl.edu>
References: <4485A6BA.2000309@zoo.ufl.edu>
Message-ID: <17541.44056.795468.923134@basebud.nulle.part>


On 6 June 2006 at 12:00, Ben Bolker wrote:
| 
|    I have a package with some embedded legacy FORTRAN code
| (for computing complex Bessel functions, written in 2003
| by C. Bond to implement the algorithms of Zhang and Jin 1996).
| It worked well until recently [despite warnings about deprecated
| headers "includes at least one deprecated or antiquated header" --
| when I tried to fix these the code stopped working, so I left
| them alone].  Now an upgrade of my Debian system has apparently
| got R switched over from using g77 to gfortran.  The old code

Ah, yes, you may get to blame me live and in person at Use R ...

More seriously, there was a bit of discussion on the debian-science list
where I asked for help with a similar "works with g77, fails with gfortran"
problem on another CRAN package. 

I am open to switching the package back to g77 -- but I'd love to hear from
real Fortran users whether or not they'd support (or oppose) that.  We can
continue here or on the r-sig-debian list.

| has EQUIVALENCE functions in it that gfortran doesn't like ...
| (I know, the right thing would be to go back and understand all
| the code and rewrite it, but I'm not sure I can bear it.)
| 
|   My first attempt was to hack things by replacing /usr/bin/gfortran
| (a link to /usr/bin/gfortran-4.0) with a link to g77; this helped
| things get farther but got me to an unresolved call to do_lio.
| Based on information in the archives from BDR, I commented out
| unnecessary PRINT commands in the FORTRAN code, but this just
| led to another unresolved symbol (e_wfse ???) -- I suspect that
| this is a symptom of R still using gfortran libraries instead
| of g77 libraries.
| 
|   Now I'm trying to figure out what I can do in the Makevars
| file in the package directory to force use of g77 *and* the
| appropriate libraries ... putting
| 
| F77=/usr/bin/g77
| 
| in [pkgname]/src/Makevars doesn't seem to have any effect.
| Even if I force the use of g77, I'm not sure whether it will
| get the right libraries or not ... perhaps I should recompile
| R with F77=/usr/bin/g77 all the way?

Yes, it is pretty trivial.  Do 

	$ apt-get source r-base
	$ cd r-base-2.3.1
	$ edit debian/control   
		# remove the two 'gfortran (>= ...)' with g77
	$ dpkg-buildpackage -rfakeroot -us -uc -tc
		# may need to install build dependencies

and install the local packages -- thanks to Kurt's configure magic, R should
figure out the rest.  

I would also edit debian/changelog; if you set the version number high enough
you want get an auto-upgrade to a Debian revision I may make.

|   I have poked around in The Fine Manuals quite a bit ... if anyone
| has pointers I would be grateful.  This'll teach me to upgrade.

Upgrades are the Right Thing (TM).  Just talk to your friendly neighbourhood
maintainer if you think the package went astray.

Cheers, Dirk

-- 
Hell, there are no rules here - we're trying to accomplish something. 
                                                  -- Thomas A. Edison


From pasdirtz at doit.wisc.edu  Tue Jun  6 18:37:50 2006
From: pasdirtz at doit.wisc.edu (pasdirtz at doit.wisc.edu)
Date: Tue,  6 Jun 2006 18:37:50 +0200 (CEST)
Subject: [Rd] Mac OSX printing (PR#8942)
Message-ID: <20060606163750.D539D29D3B@slim.kubism.ku.dk>

Full_Name: George W. Pasdirtz
Version: 2.3.1
OS: 10.4.6
Submission from: (NULL) (128.104.254.68)


Printing generates "ghost" windows. If you try to select the window using the
Window menu you get:

2006-06-06 11:30:17.685 R[2096] PScurrentwindowbounds: CGSGetWindowBounds
returned error (1001)
2006-06-06 11:30:17.693 R[2096] A Carbon window's title couldn't be gotten.

and menus are no longer accessible. Using LANIER LD122 PS driver.


From andy_liaw at merck.com  Tue Jun  6 21:57:22 2006
From: andy_liaw at merck.com (Liaw, Andy)
Date: Tue, 6 Jun 2006 15:57:22 -0400
Subject: [Rd] a plead to package developers regarding GCC
Message-ID: <39B6DDB9048D0F4DAD42CB26AAFF0AFA025860FE@usctmx1106.merck.com>

Dear DevelopeRs,

I'd like to ask those who develop R packages with compiled code to please
try avoiding dependency on GCC (gcc/g77/gfortran/g++) specific features in
the code, for the simple reason that there are non-GCC compilers out there
that might choke on such features.

I found this out back when I was trying to build R-2.3.0-to-be on our dual
Opteron based Scyld cluster.  Because the GCC that shipped with the current
Scyld is too old for building R properly on that architecture, we ended up
using the Portland Group compilers (PGI 6.1).  After some update in the R
source, I got R to build and pass make check-all.  However, when installing
contributed packages on CRAN, quite a few failed.  I manually checked a
handful, and found that some of the code defined some basic math functions
that conflicts with intrinsics.  Removal of such code enable me to build and
run package checks on them successfully.  I believe many of such cases stem
from the fact that the code were originally from the output of g2c.

I can try to post a more concrete example if needed.  I think resolving this
will facilitate wider use of these packages.

Thanks for your consideration.

Best,
Andy

Andy Liaw, PhD
Biometrics Research    PO Box 2000 RY33-300
Merck Research Labs        Rahway, NJ 07065
andy_liaw(a)merck.com          732-594-0820


From shilpiharpavat at yahoo.com  Tue Jun  6 22:33:55 2006
From: shilpiharpavat at yahoo.com (shilpi harpavat)
Date: Tue, 6 Jun 2006 13:33:55 -0700 (PDT)
Subject: [Rd] Call R From VC++
Message-ID: <20060606203355.42453.qmail@web42403.mail.yahoo.com>

Hi,
I want to write an independent C++ application that
can call any R functions and output it as an
c++object.
I tried to use The documentation for Linking R DLL
with VC++ But with no success.
When I link R.dll it says Invalid or corrupt file
Any help greatly aprrciated.
Thanks
Shilpi


From ripley at stats.ox.ac.uk  Wed Jun  7 10:06:46 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 7 Jun 2006 09:06:46 +0100 (BST)
Subject: [Rd] a plead to package developers regarding GCC
In-Reply-To: <39B6DDB9048D0F4DAD42CB26AAFF0AFA025860FE@usctmx1106.merck.com>
References: <39B6DDB9048D0F4DAD42CB26AAFF0AFA025860FE@usctmx1106.merck.com>
Message-ID: <Pine.LNX.4.64.0606070844040.12401@gannet.stats.ox.ac.uk>

Andy,

Are you talking about C or Fortran code here?  Fortran has `intrinsics', C 
does not AFAIK.

I think we do pretty strict checking of C code in CRAN packages, and I 
have not encountered problems with other C compilers (e.g. the Solaris 
ones).  There used to be issues with CRLF line endings, but we check those 
now.

There are a lot of Fortran issues.  One is that neither g77 nor gfortran 
claim to be standards-conformant compilers: g77 is said to compile `GNU 
Fortran'.  Several packages are known not to be Fortran 77 and have been 
reported to the developers (usually with no response).  I tend to use the 
Solaris compilers to check Fortran, but it is less rigorous than the tests 
we manage on C code.  (And done less systematically, although the R 
tarball is checked on a wide range of compilers.)

There are a dozen or so packages with problems wih 64-bit issues (all of 
which were reported to the maintainers long ago).

We do suggest is that you report specific problems to the relevant package 
maintainers.  They are probably unaware of the issues, and some have been 
very responsive.

If there are some generic issues we can add to the checking process please 
let us have ideas (offline if you prefer), similar to the CRLF issue 
mentioned above.

Brian

On Tue, 6 Jun 2006, Liaw, Andy wrote:

> Dear DevelopeRs,
>
> I'd like to ask those who develop R packages with compiled code to please
> try avoiding dependency on GCC (gcc/g77/gfortran/g++) specific features in
> the code, for the simple reason that there are non-GCC compilers out there
> that might choke on such features.
>
> I found this out back when I was trying to build R-2.3.0-to-be on our dual
> Opteron based Scyld cluster.  Because the GCC that shipped with the current
> Scyld is too old for building R properly on that architecture, we ended up
> using the Portland Group compilers (PGI 6.1).  After some update in the R
> source, I got R to build and pass make check-all.  However, when installing
> contributed packages on CRAN, quite a few failed.  I manually checked a
> handful, and found that some of the code defined some basic math functions
> that conflicts with intrinsics.  Removal of such code enable me to build and
> run package checks on them successfully.  I believe many of such cases stem
> from the fact that the code were originally from the output of g2c.

f2c?

> I can try to post a more concrete example if needed.  I think resolving this
> will facilitate wider use of these packages.
>
> Thanks for your consideration.
>
> Best,
> Andy
>
> Andy Liaw, PhD
> Biometrics Research    PO Box 2000 RY33-300
> Merck Research Labs        Rahway, NJ 07065
> andy_liaw(a)merck.com          732-594-0820
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Steven.Roels at mpi.com  Wed Jun  7 14:11:41 2006
From: Steven.Roels at mpi.com (Steven.Roels at mpi.com)
Date: Wed,  7 Jun 2006 14:11:41 +0200 (CEST)
Subject: [Rd] Wishlist: Writing R Extensions suggestions RE: [R] vague
	errors on R CMD check for very minimal S4-style package (PR#8944)
Message-ID: <20060607121141.3C4FE11342@slim.kubism.ku.dk>


Ah yes. There they are right on page 4 of "Writing R Extensions".

The "LazyLoad: yes" was sufficient to avoid the check errors, but I'll
add the "Depends: methods" as well.

For the manual-impaired like me, it _may_ be worth reiterating these two
requirements in section 1.6.6 "Name spaces with formal classes and
methods" - right where the .onLoad requirement is mentioned.  

Also, at may be worth mentioning in "Writing R Extensions" that the
stats4 package can serve as a template/example for S4-style packages (at
least a quick search for "stats4" didn't find anything there or in the
FAQ).

Thanks to you both.

-Steve

>This is an S4-using package but missing a dependence on 'methods'.
>
>To run R CMD check the package has to load under minimal conditions,
e.g.
>
>R_DEFAULT_PACKAGES=NULL R
>...
>> library(foo)
>
>should work.  'methods' is quite expensive to load, and so is only used
in
>checking if explicitly requested.

>> Try adding LazyLoad: yes to DESCRIPTION (or SaveImage: yes).
>>
>And
>
>Depends: methods
>
>Package stats4 is provided in part as an example of a small S4-using
>package for people to copy.


*****************************************************************
Steve Roels, Ph.D.                       
Senior Scientist I
Computational Biology               Phone: (617) 761-6820
Millennium Pharmaceuticals, Inc.    FAX:   (617) 577-3555
640 Memorial Drive                  Email: roels at mpi.com
Cambridge, MA 02139-4815
*****************************************************************




This e-mail, including any attachments, is a confidential business communication, and may contain information that is confidential, proprietary and/or privileged.  This e-mail is intended only for the individual(s) to whom it is addressed, and may not be saved, copied, printed, disclosed or used by anyone else.  If you are not the(an) intended recipient, please immediately delete this e-mail from your computer system and notify the sender.  Thank you.


From lai at lindaspaces.com  Wed Jun  7 17:10:08 2006
From: lai at lindaspaces.com (Jennifer Lai)
Date: Wed, 07 Jun 2006 11:10:08 -0400
Subject: [Rd] [R] build R with Visual Studio
In-Reply-To: <Pine.LNX.4.64.0606070733450.11529@gannet.stats.ox.ac.uk>
References: <4485E947.3000905@lindaspaces.com>
	<Pine.LNX.4.64.0606070733450.11529@gannet.stats.ox.ac.uk>
Message-ID: <4486EC50.9060703@lindaspaces.com>


Prof Brian Ripley wrote:

> On Tue, 6 Jun 2006, Jennifer Lai wrote:
>
>> Hi,
>>    Has anyone had success in building R source with Visual Studio?  I
>> followed the instructions in README.packages, but failed on the very
>> first step, where it's looking for R.dll. I looked through R source and
>> couldn't find the file. Can someone point me to where this file is
>> located or generated? Thanks!
>
>
> R.dll is the main file generated, and the first step is to build 
> Rpwd.exe.
> Do you really mean the R source?

Yes, I would like to build the entire R source using Visual Studio 
instead of MinGW.  Visual Studio seems the only way to build a 64-bit R 
currently. However, to go get there, I thought I'll try building a 
32-bit version first.

Regards,
Jennifer

>
> People have built R for Windows with Visual Studio (using their own 
> projects/makefiles and other tools to generate .def files) but it did 
> not work correctly.  It seems that the IEC60559 (aka IEEE754) 
> compliance of VC++ was not adequate -- as I recall it thought -Inf > 3.
>
> This isn't the list for such programming questions: R-devel would be 
> more appropriate.
>


From maechler at stat.math.ethz.ch  Wed Jun  7 17:30:48 2006
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 7 Jun 2006 17:30:48 +0200
Subject: [Rd] sort() generic? [Re: Suspicious behaviour of sort on POSIXct
	..]
In-Reply-To: <Pine.LNX.4.64.0606062109200.4685@gannet.stats.ox.ac.uk>
References: <OF572FD044.0131BC92-ON80257185.005D8210-80257185.005E5FD4@bnpparibas.com>
	<Pine.LNX.4.64.0606062109200.4685@gannet.stats.ox.ac.uk>
Message-ID: <17542.61736.871305.720154@stat.math.ethz.ch>

{Diverted to R-devel}

>>>>> "BDR" == Prof Brian Ripley <ripley at stats.ox.ac.uk>
>>>>>     on Tue, 6 Jun 2006 21:14:01 +0100 (BST) writes:

    BDR> On Tue, 6 Jun 2006, patrick.guevel at uk.bnpparibas.com
    BDR> wrote:
    >> Hi ,
    >> 
    >> When I sort a vector of POSIXct values in R-2.3.0 and
    >> R-2.3.1, I get a vector of numeric values and this gets
    >> some of my code to crash (class object creation). Is that
    >> a R bug?

    BDR> No, it is as documented: see ?sort

    BDR>       As from R 2.3.0, all attributes are removed from
    BDR> the return value except names, which are sorted.  (If
    BDR> 'partial' is specified even the names are removed.)

    BDR> Note, the class is an attribute.  For many classes
    BDR> sorting destroys the appropriateness of the class.

Indeed, and I agree this a good change.
However, the above also suggests that ideally,  sort() would be
a generic function.

One good reason for  sort()  not being generic now is the fact
that method dispatch costs a bit, *and* that we like sort() to
be really fast.
One way to achieve a generic sort() and keep the possibility of
of very fast sort() --- similarly to  rep() and rep.int()
would be to rename the current sort into something like
sortNum() {"Num" for numeric}, make sort() into a generic,
and replace sort() by sortNum() in those code parts which need
to remain optimally fast.


    >> In the mean time. I'll try to override the sort function
    >> for the POSIXct objects.

    BDR> You can restore the class if appropriate.


From bolker at zoo.ufl.edu  Wed Jun  7 17:44:43 2006
From: bolker at zoo.ufl.edu (Ben Bolker)
Date: Wed, 07 Jun 2006 11:44:43 -0400
Subject: [Rd] further f77/gfortran
Message-ID: <4486F46B.1090305@zoo.ufl.edu>


  OK: despite Dirk's very kind help, I decided that
trying to deal with R configuration and Debian configuration
simultaneously was too difficult.

  I did manage to solve my problem by reconfiguring/making/
installing all of 2.3.1 from source:

./configure F77=/usr/bin/g77
make
make install

   A few questions inspired by this experience:

  (1) it seems a bit odd that R sets F77=gfortran
by default, since the system has both g77 and gfortran
compilers on it, and given that there is a separate
variable (FC) for the Fortran 90/95 compiler --
does it make any sense to switch
the search order in configure so that g77 comes up first if present?

  (2) I couldn't figure out a way to set the F77 variable
on a per-package basis: adding a src/Makevars file or a configure
file to the package didn't seem to help, but perhaps I didn't
put it in the right place/get it exactly right.  Any clues?

  cheers
    Ben Bolker



-- 
620B Bartram Hall                            bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


From kevin.hendricks at sympatico.ca  Wed Jun  7 17:58:15 2006
From: kevin.hendricks at sympatico.ca (Kevin B. Hendricks)
Date: Wed, 7 Jun 2006 11:58:15 -0400
Subject: [Rd] PATCH: fix for bug 7924
In-Reply-To: <Pine.LNX.4.64.0606050729190.6381@homer21.u.washington.edu>
References: <9448B15C-0CCA-4E4C-A355-60C80066FF0D@sympatico.ca>
	<44840325.6020201@cimr.cam.ac.uk>
	<Pine.LNX.4.64.0606050729190.6381@homer21.u.washington.edu>
Message-ID: <A44D8E26-C414-4C96-ADC2-9C8F19B29A09@sympatico.ca>

Hi,

Since no one answered my questions about the "theoretically correct  
values of named for that LANGSXP object, I made an assumption that  
the problem was in the creation of the call2 object to begin with.

Yes, the bug was there.

Inline is the patch to fix bug 7924.

It seems that in subset.c in do_subset_dflt, if the final object is a  
LANGSXP object we allocate a new object and copy from the just  
allocated result VECSXP object to a list style object (to make it a  
LANGSXP object) but we forgot to copy over the NAMED value as well so  
we were leaving it basically blank and ignoring all of the logic in  
ExtractSubset and VectorSubset that actually determined the proper  
named value in the first place.

Here is the patch.  With this patch in place, the test case passes.

Hopefully we can now close bug 7924

[kbhend at base3 R]$ cat bug_7924_fix.patch
--- src/main/subset.c.keep      2006-06-07 09:58:26.000000000 -0400
+++ src/main/subset.c   2006-06-07 11:49:40.000000000 -0400
@@ -675,6 +675,7 @@
         setAttrib(ans, R_DimSymbol, getAttrib(ax, R_DimSymbol));
         setAttrib(ans, R_DimNamesSymbol, getAttrib(ax,  
R_DimNamesSymbol));
         setAttrib(ans, R_NamesSymbol, getAttrib(ax, R_NamesSymbol));
+       SET_NAMED(ans,NAMED(ax));
      }
      else {
         PROTECT(ans);




Kevin


From edd at debian.org  Wed Jun  7 18:08:23 2006
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 7 Jun 2006 11:08:23 -0500
Subject: [Rd] further f77/gfortran
In-Reply-To: <4486F46B.1090305@zoo.ufl.edu>
References: <4486F46B.1090305@zoo.ufl.edu>
Message-ID: <17542.63991.991173.906955@basebud.nulle.part>


On 7 June 2006 at 11:44, Ben Bolker wrote:
|   OK: despite Dirk's very kind help, I decided that

Yeah, kind but still not useful to you. No cigar yet :)

| trying to deal with R configuration and Debian configuration
| simultaneously was too difficult.

[ I'd still like to learn from useRs what I could do to make the Debian
package more appealing. Local rebuilds seems natural to me; I do that eg on
the Ubuntu boxen at work to combine 'stability' ('frozen' outer system) with
'current' apps where I need and what them. By keeping those within the
package management framework, I feel I combine the best of two worlds. YMMV. ]

|   I did manage to solve my problem by reconfiguring/making/
| installing all of 2.3.1 from source:
| 
| ./configure F77=/usr/bin/g77
| make
| make install
| 
|    A few questions inspired by this experience:
| 
|   (1) it seems a bit odd that R sets F77=gfortran
| by default, since the system has both g77 and gfortran
| compilers on it, and given that there is a separate
| variable (FC) for the Fortran 90/95 compiler --
| does it make any sense to switch
| the search order in configure so that g77 comes up first if present?
| 
|   (2) I couldn't figure out a way to set the F77 variable
| on a per-package basis: adding a src/Makevars file or a configure
| file to the package didn't seem to help, but perhaps I didn't
| put it in the right place/get it exactly right.  Any clues?

That came up recently:

a)  ~/.Makevars  (as I recall)

b)  on a per invocation basis:
	MAKEFLAGS="FFLAGS=-O1" R CMD INSTALL ...
    is something that worked for me.

That said, I personally still dislike that I cannot 'undo' the settings the
R's global Makeconf.  I'd love to turn debugging, optimisation, ... on/off on
demand. 

Dirk

-- 
Hell, there are no rules here - we're trying to accomplish something. 
                                                  -- Thomas A. Edison


From ripley at stats.ox.ac.uk  Wed Jun  7 18:08:50 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 7 Jun 2006 17:08:50 +0100 (BST)
Subject: [Rd] further f77/gfortran
In-Reply-To: <4486F46B.1090305@zoo.ufl.edu>
References: <4486F46B.1090305@zoo.ufl.edu>
Message-ID: <Pine.LNX.4.64.0606071652100.1628@gannet.stats.ox.ac.uk>

On Wed, 7 Jun 2006, Ben Bolker wrote:

>
>  OK: despite Dirk's very kind help, I decided that
> trying to deal with R configuration and Debian configuration
> simultaneously was too difficult.
>
>  I did manage to solve my problem by reconfiguring/making/
> installing all of 2.3.1 from source:
>
> ./configure F77=/usr/bin/g77
> make
> make install
>
>   A few questions inspired by this experience:
>
>  (1) it seems a bit odd that R sets F77=gfortran
> by default, since the system has both g77 and gfortran
> compilers on it, and given that there is a separate
> variable (FC) for the Fortran 90/95 compiler --
> does it make any sense to switch
> the search order in configure so that g77 comes up first if present?

That's not what is happening, I believe.  If the C compiler is gcc4, it 
preferentially picks gfortran, as gcc4 and g77 are not compatible on 
structures such as double complex on at least some architectures.  From 
the R.m4 file

## * If the C compiler is gcc, we try looking for a matching GCC Fortran
##   compiler (gfortran for 4.x, g77 for 3.x) first.  This should handle
##   problems if GCC 4.x and 3.x suites are installed and, depending on
##   the gcc default, the "wrong" GCC Fortran compiler is picked up (as

We used to pick a F77 compiler first, but note that all legal F77 code is 
legal F95 code so there was no actual advantage is doing so.  The issue 
here is that your code is not legal F77, and g77 (which implements 'GNU 
Fortran') is letting it through.

>  (2) I couldn't figure out a way to set the F77 variable
> on a per-package basis: adding a src/Makevars file or a configure
> file to the package didn't seem to help, but perhaps I didn't
> put it in the right place/get it exactly right.  Any clues?

You cannot override either F77 or the default .f.o rule, as etc/Makeconf 
wins.  However, you set up a specific rule in Makevars, and also need an 
all: target.  See fastICA/src/Makevars for the sort of thing.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From kevin.hendricks at sympatico.ca  Wed Jun  7 18:09:54 2006
From: kevin.hendricks at sympatico.ca (Kevin B. Hendricks)
Date: Wed, 7 Jun 2006 12:09:54 -0400
Subject: [Rd] do developers need to assign rights to someone
In-Reply-To: <A44D8E26-C414-4C96-ADC2-9C8F19B29A09@sympatico.ca>
References: <9448B15C-0CCA-4E4C-A355-60C80066FF0D@sympatico.ca>
	<44840325.6020201@cimr.cam.ac.uk>
	<Pine.LNX.4.64.0606050729190.6381@homer21.u.washington.edu>
	<A44D8E26-C414-4C96-ADC2-9C8F19B29A09@sympatico.ca>
Message-ID: <1984DE40-A1A7-49DE-BBCE-0B4F3D5970C6@sympatico.ca>

Hi,

Just in case this is an issue.  I freely give all of my patches and  
changes to the R source code to whomever holds or keeps the copyright/ 
rights for this project.  If it matters I have not signed any FSF  
agreements but I have done so with Sun for OpenOffice.org and would  
be willing to do so for this project.

Thanks,

Kevin


From ripley at stats.ox.ac.uk  Wed Jun  7 18:17:31 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 7 Jun 2006 17:17:31 +0100 (BST)
Subject: [Rd] sort() generic? [Re: Suspicious behaviour of sort on
 POSIXct ..]
In-Reply-To: <17542.61736.871305.720154@stat.math.ethz.ch>
References: <OF572FD044.0131BC92-ON80257185.005D8210-80257185.005E5FD4@bnpparibas.com>
	<Pine.LNX.4.64.0606062109200.4685@gannet.stats.ox.ac.uk>
	<17542.61736.871305.720154@stat.math.ethz.ch>
Message-ID: <Pine.LNX.4.64.0606071710060.1628@gannet.stats.ox.ac.uk>

On Wed, 7 Jun 2006, Martin Maechler wrote:

> {Diverted to R-devel}
>
>>>>>> "BDR" == Prof Brian Ripley <ripley at stats.ox.ac.uk>
>>>>>>     on Tue, 6 Jun 2006 21:14:01 +0100 (BST) writes:
>
>    BDR> On Tue, 6 Jun 2006, patrick.guevel at uk.bnpparibas.com
>    BDR> wrote:
>    >> Hi ,
>    >>
>    >> When I sort a vector of POSIXct values in R-2.3.0 and
>    >> R-2.3.1, I get a vector of numeric values and this gets
>    >> some of my code to crash (class object creation). Is that
>    >> a R bug?
>
>    BDR> No, it is as documented: see ?sort
>
>    BDR>       As from R 2.3.0, all attributes are removed from
>    BDR> the return value except names, which are sorted.  (If
>    BDR> 'partial' is specified even the names are removed.)
>
>    BDR> Note, the class is an attribute.  For many classes
>    BDR> sorting destroys the appropriateness of the class.

(An example BTW is a time series: the times associated with values would 
be shuffled on sorting.)

> Indeed, and I agree this a good change.
> However, the above also suggests that ideally,  sort() would be
> a generic function.
>
> One good reason for  sort()  not being generic now is the fact
> that method dispatch costs a bit, *and* that we like sort() to
> be really fast.
> One way to achieve a generic sort() and keep the possibility of
> of very fast sort() --- similarly to  rep() and rep.int()
> would be to rename the current sort into something like
> sortNum() {"Num" for numeric}, make sort() into a generic,
> and replace sort() by sortNum() in those code parts which need
> to remain optimally fast.

The current sort handles much more than numeric vectors.  I agree with 
reasoning, but it seems wrong to ask all those using sort() in packages
to rename their usages (conditional on R >= 2.4.0) not to be penalized.

sort() is an interface to three C functions.  It ought to be possible to 
use internal dispatch for internal sort and (not for psort or qsort), for 
which I believe the overhead would be acceptable.  I think that is 
acceptable: people who set partial or method must have read the help page.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Wed Jun  7 18:29:22 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 7 Jun 2006 17:29:22 +0100 (BST)
Subject: [Rd] further f77/gfortran
In-Reply-To: <17542.63991.991173.906955@basebud.nulle.part>
References: <4486F46B.1090305@zoo.ufl.edu>
	<17542.63991.991173.906955@basebud.nulle.part>
Message-ID: <Pine.LNX.4.64.0606071718340.1628@gannet.stats.ox.ac.uk>

On Wed, 7 Jun 2006, Dirk Eddelbuettel wrote:

>
> On 7 June 2006 at 11:44, Ben Bolker wrote:
> |   OK: despite Dirk's very kind help, I decided that
>
> Yeah, kind but still not useful to you. No cigar yet :)
>
> | trying to deal with R configuration and Debian configuration
> | simultaneously was too difficult.
>
> [ I'd still like to learn from useRs what I could do to make the Debian
> package more appealing. Local rebuilds seems natural to me; I do that eg on
> the Ubuntu boxen at work to combine 'stability' ('frozen' outer system) with
> 'current' apps where I need and what them. By keeping those within the
> package management framework, I feel I combine the best of two worlds. YMMV. ]
>
> |   I did manage to solve my problem by reconfiguring/making/
> | installing all of 2.3.1 from source:
> |
> | ./configure F77=/usr/bin/g77
> | make
> | make install
> |
> |    A few questions inspired by this experience:
> |
> |   (1) it seems a bit odd that R sets F77=gfortran
> | by default, since the system has both g77 and gfortran
> | compilers on it, and given that there is a separate
> | variable (FC) for the Fortran 90/95 compiler --
> | does it make any sense to switch
> | the search order in configure so that g77 comes up first if present?
> |
> |   (2) I couldn't figure out a way to set the F77 variable
> | on a per-package basis: adding a src/Makevars file or a configure
> | file to the package didn't seem to help, but perhaps I didn't
> | put it in the right place/get it exactly right.  Any clues?
>
> That came up recently:
>
> a)  ~/.Makevars  (as I recall)

~/.R/Makevars, but that applies to all packages on all builds.

> b)  on a per invocation basis:
> 	MAKEFLAGS="FFLAGS=-O1" R CMD INSTALL ...
>    is something that worked for me.

Yes, but it only works in some Makes, including GNU Make.

> That said, I personally still dislike that I cannot 'undo' the settings the
> R's global Makeconf.  I'd love to turn debugging, optimisation, ... on/off on
> demand.

It might make sense to separate CFLAGS, FFLAGS, CXXFLAGS, FCFLAGS out of 
etc/Makeconf into a Makefile included before Makevars.  But I am very 
reluctant to make it easy to change the F77 compiler or FLIBS or 
FPICFLAGS.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hin-tak.leung at cimr.cam.ac.uk  Wed Jun  7 19:04:44 2006
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Wed, 07 Jun 2006 18:04:44 +0100
Subject: [Rd] do developers need to assign rights to someone
In-Reply-To: <1984DE40-A1A7-49DE-BBCE-0B4F3D5970C6@sympatico.ca>
References: <9448B15C-0CCA-4E4C-A355-60C80066FF0D@sympatico.ca>	<44840325.6020201@cimr.cam.ac.uk>	<Pine.LNX.4.64.0606050729190.6381@homer21.u.washington.edu>	<A44D8E26-C414-4C96-ADC2-9C8F19B29A09@sympatico.ca>
	<1984DE40-A1A7-49DE-BBCE-0B4F3D5970C6@sympatico.ca>
Message-ID: <4487072C.8040204@cimr.cam.ac.uk>

Kevin B. Hendricks wrote:
> Hi,
> 
> Just in case this is an issue.  I freely give all of my patches and  
> changes to the R source code to whomever holds or keeps the copyright/ 
> rights for this project.  If it matters I have not signed any FSF  
> agreements but I have done so with Sun for OpenOffice.org and would  
> be willing to do so for this project.

AFAIK there are only two common reasons for assigning-copying over
(instead of having just a license notice saying somebody can do
as he/she wish with your code as you intended) is

(1) possible copyright infringement is imminent, and the R core team
needs to sue somebody on your behalf

(2) dual-license/commercial licensing - i.e. the R core team want to
relicense R with a different license, then they need to have the 
copyright to do that.

situation (1) is rather unlikely for R, but you never know
- historically, the FSF uses that argument to request all changes to
GCC to be signed over, I think.

As for (2), Sun people for obvious reasons want to get you to sign over
copyright, because they want to relicense the openoffice code under
the commericial staroffice license.

I don't think either (1) or (2) applies too closely to R, but then, this 
is just my opinion...

HTL


From bolker at zoo.ufl.edu  Wed Jun  7 18:53:40 2006
From: bolker at zoo.ufl.edu (Ben Bolker)
Date: Wed, 07 Jun 2006 12:53:40 -0400
Subject: [Rd] further f77/gfortran
In-Reply-To: <Pine.LNX.4.64.0606071652100.1628@gannet.stats.ox.ac.uk>
References: <4486F46B.1090305@zoo.ufl.edu>
	<Pine.LNX.4.64.0606071652100.1628@gannet.stats.ox.ac.uk>
Message-ID: <44870494.6040502@zoo.ufl.edu>

Prof Brian Ripley wrote:

> We used to pick a F77 compiler first, but note that all legal F77 code
> is legal F95 code so there was no actual advantage is doing so.  The
> issue here is that your code is not legal F77, and g77 (which implements
> 'GNU Fortran') is letting it through.

   Not that it matters:

from  http://gcc.gnu.org/ml/fortran/2004-05/msg00308.html :

    /* We have overlapping initializers.  It could either be
+		       partially initilalized arrays (lagal), or the user
+		       specified multiple initial values (illegal).
+		       We don't implement this yet, so bail out.  */
+                  gfc_todo_error ("Initialization of overlapping
variables");

  so it's not clear to me whether my code is actually illegal,
or an odd case that gfortran doesn't handle ("yet") ...
the specific code that fails (as far as I can tell) is

      INTEGER SMALL(2)
      INTEGER LARGE(2)
      INTEGER RIGHT(2)
      INTEGER DIVER(2)
      INTEGER LOG10(2)
C
      REAL RMACH(5)
      SAVE RMACH
C
      EQUIVALENCE (RMACH(1),SMALL(1))
      EQUIVALENCE (RMACH(2),LARGE(1))
      EQUIVALENCE (RMACH(3),RIGHT(1))
      EQUIVALENCE (RMACH(4),DIVER(1))
      EQUIVALENCE (RMACH(5),LOG10(1))

http://www.fortran.com/F77_std/rjcnf-8.html#sh-8.2
  suggests this should be legal as long as REALs are twice as long
as INTEGERs?

  I'm on the edge of my knowledge here -- don't know if there's a better
idiom ...

   cheers
     Ben

-- 
620B Bartram Hall                            bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


From edd at debian.org  Wed Jun  7 19:22:43 2006
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 7 Jun 2006 12:22:43 -0500
Subject: [Rd] further f77/gfortran
In-Reply-To: <Pine.LNX.4.64.0606071718340.1628@gannet.stats.ox.ac.uk>
References: <4486F46B.1090305@zoo.ufl.edu>
	<17542.63991.991173.906955@basebud.nulle.part>
	<Pine.LNX.4.64.0606071718340.1628@gannet.stats.ox.ac.uk>
Message-ID: <17543.2915.422659.801421@basebud.nulle.part>


On 7 June 2006 at 17:29, Prof Brian Ripley wrote:
| > That came up recently:
| >
| > a)  ~/.Makevars  (as I recall)
| 
| ~/.R/Makevars, but that applies to all packages on all builds.

Yes indeed. Thanks for catching and correcting this.
 
| > b)  on a per invocation basis:
| > 	MAKEFLAGS="FFLAGS=-O1" R CMD INSTALL ...
| >    is something that worked for me.
| 
| Yes, but it only works in some Makes, including GNU Make.
| 
| > That said, I personally still dislike that I cannot 'undo' the settings the
| > R's global Makeconf.  I'd love to turn debugging, optimisation, ... on/off on
| > demand.
| 
| It might make sense to separate CFLAGS, FFLAGS, CXXFLAGS, FCFLAGS out of 
| etc/Makeconf into a Makefile included before Makevars.  But I am very 
| reluctant to make it easy to change the F77 compiler or FLIBS or 
| FPICFLAGS.

Well, as that would cover my past needs (where on certain architectures we
had switch from -O2 to a lower optimisation setting or g77 would die;
obviously a g77 bug and now mostly (?) fixed) so I'd say yes.

Not hugely pressing as the current system has worked, but I would at certain
points in the past have like to have this available.

Dirk


-- 
Hell, there are no rules here - we're trying to accomplish something. 
                                                  -- Thomas A. Edison


From khansen at stat.Berkeley.EDU  Wed Jun  7 21:05:02 2006
From: khansen at stat.Berkeley.EDU (Kasper Daniel Hansen)
Date: Wed, 7 Jun 2006 12:05:02 -0700
Subject: [Rd] further f77/gfortran
In-Reply-To: <17543.2915.422659.801421@basebud.nulle.part>
References: <4486F46B.1090305@zoo.ufl.edu>
	<17542.63991.991173.906955@basebud.nulle.part>
	<Pine.LNX.4.64.0606071718340.1628@gannet.stats.ox.ac.uk>
	<17543.2915.422659.801421@basebud.nulle.part>
Message-ID: <A5EEC912-EE4C-4E71-8722-EB5E094D55A0@stat.berkeley.edu>


On Jun 7, 2006, at 10:22 AM, Dirk Eddelbuettel wrote:

>
> On 7 June 2006 at 17:29, Prof Brian Ripley wrote:
> | > That came up recently:
> | >
> | > a)  ~/.Makevars  (as I recall)
> |
> | ~/.R/Makevars, but that applies to all packages on all builds.
>
> Yes indeed. Thanks for catching and correcting this.
>
> | > b)  on a per invocation basis:
> | > 	MAKEFLAGS="FFLAGS=-O1" R CMD INSTALL ...
> | >    is something that worked for me.
> |
> | Yes, but it only works in some Makes, including GNU Make.
> |
> | > That said, I personally still dislike that I cannot 'undo' the  
> settings the
> | > R's global Makeconf.  I'd love to turn debugging,  
> optimisation, ... on/off on
> | > demand.
> |
> | It might make sense to separate CFLAGS, FFLAGS, CXXFLAGS, FCFLAGS  
> out of
> | etc/Makeconf into a Makefile included before Makevars.  But I am  
> very
> | reluctant to make it easy to change the F77 compiler or FLIBS or
> | FPICFLAGS.
>
> Well, as that would cover my past needs (where on certain  
> architectures we
> had switch from -O2 to a lower optimisation setting or g77 would die;
> obviously a g77 bug and now mostly (?) fixed) so I'd say yes.
>
> Not hugely pressing as the current system has worked, but I would  
> at certain
> points in the past have like to have this available.

I would really like the ability to override the optimization flags on  
a per package basis. I have a use case where I am using an SDK  
outside of my control which does not work with -O2 on (some versions  
of) GCC. From Dirk's description it seems I am not alone in having  
this problem. From my point of view it is unreasonable to make a user  
build R with specific optimization flags just because of a single  
package (especially if one wants to distribute the package to many  
users). I guess what I am trying to articulate is that I see this as  
a potential useful ability to have.

Right now I am using a hack by Simon Urbanek posted to R-devel some  
time ago which basically reverses the order of PKG_CXXFLAGS and  
CXXFLAGS, allowing me to override the R supplied ones. I know this is  
not portable since -O* is not a common to all compilers.

I am thinking of something like PKG_CXXSAFEFLAGS which - if set -  
will override the CXXFLAGS set by etc/Makeconf. Then I should be able  
to do something like (pseudo code)
   if using(gcc)
     set PKG_CXXSAFEFLAGS=....
I am not sure whether this is feasible, because I am only really  
interested in overriding the optimization flags and not all the other  
CXXFLAGS.

Unfortunately, my knowledge of Makefiles and configure scripts do not  
make it possible to come up with a specific suggestion - only a use  
case and a wish :)

/Kasper



> Dirk
>
>
> -- 
> Hell, there are no rules here - we're trying to accomplish something.
>                                                   -- Thomas A. Edison
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From tlumley at u.washington.edu  Wed Jun  7 22:04:37 2006
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed, 7 Jun 2006 13:04:37 -0700 (PDT)
Subject: [Rd] PATCH: fix for bug 7924
In-Reply-To: <A44D8E26-C414-4C96-ADC2-9C8F19B29A09@sympatico.ca>
References: <9448B15C-0CCA-4E4C-A355-60C80066FF0D@sympatico.ca>
	<44840325.6020201@cimr.cam.ac.uk>
	<Pine.LNX.4.64.0606050729190.6381@homer21.u.washington.edu>
	<A44D8E26-C414-4C96-ADC2-9C8F19B29A09@sympatico.ca>
Message-ID: <Pine.LNX.4.64.0606071303560.18634@homer22.u.washington.edu>

On Wed, 7 Jun 2006, Kevin B. Hendricks wrote:
>
> Inline is the patch to fix bug 7924.
>

Yes, that seems to fix it. Committed.

 	-thomas


Thomas Lumley			Assoc. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle


From thomas.baier at kirchnersoft.com  Thu Jun  8 09:23:34 2006
From: thomas.baier at kirchnersoft.com (TB)
Date: Thu, 8 Jun 2006 09:23:34 +0200 
Subject: [Rd] Call R From VC++
Message-ID: <F05B338A1B21D9119FFF0004761A511301F155@MXS>

Shilpi,

shilpi harpavat <mailto:shilpiharpavat at yahoo.com> wrote:

> I want to write an independent C++ application that
> can call any R functions and output it as an
> c++object.
> I tried to use The documentation for Linking R DLL
> with VC++ But with no success.
> When I link R.dll it says Invalid or corrupt file
> Any help greatly aprrciated.

An alternative to directly accessing R.dll from VC++
is to use COM. See http://cran.r-project.org/contrib/extra/dcom/
for a (D)COM server or use the package rcom for another (D)COM
server implementing the same COM interfaces.

Thomas


From wenw at vt.edu  Thu Jun  8 18:50:28 2006
From: wenw at vt.edu (Wen Wan)
Date: Thu, 8 Jun 2006 12:50:28 -0400
Subject: [Rd] Questions on how to handle R objects in C
Message-ID: <45044B27@zathras>

Hello,

I have a question on how to handle R objects in C. I have spent a lot of time 
on it but I still can not figure it out.

My situation is as following. I have already had C++ code for a genetic 
algorithm. The genetic algorithm need function evaluations. And the function I 
am going to use includes matrix inverse and other matrix manipulation. As you 
know, doing matrix manipulation is hard by C++ but is much easier by R. What I 
want to do is to use R to call C subroutine (genetic algorithm), but in the C 
code, let R help C do matrix manipulation. So I need use .Call instead of .C. 
I got some information on it from website 
(http://lib.stat.cmu.edu/R/CRAN/doc/manuals/R-exts.pdf), but it is hard to 
read and understand. I also read the introduction to the .C interface to R 
which you told me, but it is not the same situation as what I have.

I have another problem. I don?t know how to put a lot of C functions together 
when we use .C or .Call. This is different from the C code itself. In C code 
itself, we have main() function, list several functions? definitions outside 
of the main(), before the main(), we need add those functions? declaration. I 
don?t know how to range those functions if we want to use R to call C.

If all of these questions need take you a lot time to explain, would you 
please give me some examples which you used before. Thank you very much.

Best wishes,

Wen

------------------------------------
Wen Wan
Department of Statistics
Virginia Polytechnic University
403-D Hutcheson Hall
Blacksburg, VA 24061-0439
Email:         wenw at vt.edu
Phone:        (540)922-2496
Fax:           (540) 231-3863


From sfalcon at fhcrc.org  Thu Jun  8 20:12:46 2006
From: sfalcon at fhcrc.org (Seth Falcon)
Date: Thu, 08 Jun 2006 11:12:46 -0700
Subject: [Rd] [R] S4 Methods with large numbers of args using memory
In-Reply-To: <200606062052.01714.joe@gnacademy.org> (Joseph Wang's message of
	"Tue, 6 Jun 2006 20:51:57 -0500")
References: <200606062052.01714.joe@gnacademy.org>
Message-ID: <m23befms81.fsf@ziti.local>

[This is probably more appropriate for R-devel so I'm responding
there]

Joseph Wang <joe at gnacademy.org> writes:

> Thanks all to the people on the r-help list for the backtick help.
>
> I've run into another problem.  With my SWIG C++ wrapper for R, I'm finding 
> that S4 generic functions with large numbers of argument (such as 10 or 11) 
> seem to be taking up a lot of memory especially when a lot of the arguments 
> are set to missing.
>
> This happens because I'm generating S4 methods to wrapper C++ functions with 
> optional arguments.  Each wrapper can take several meg of heap causing my R 
> program to quickly run out of heap memory.
>
> Any ideas as to what the problem is and any possible way of working
> around it?

I think the issue is related to the overhead of storing strings and
possibly language objects in R.  The memory used by a couple of large
setMethod calls is striking.

As for work arounds, I think you can make things better if it is the
case that you don't actually want to do dispatch on the possibly
missing arguments.  For example, if the signature is:

f(a, b, o1, o2, o3)

Where you want to dispatch on 'a' and 'b' and where o1, ..., o3 are
optional.  In that case you can

* Use a parameter object.  For the example above, you'd have slots o1,
  ..., o3 and the signature would become f(a, b, params).  Default
  values can be specified in the prototype for the param object class
  definition.

* Put args after '...'.  So you would have something like:

    setGeneric("f", function(a, b, ..., o1=1, o2=2, o3=3) standardGeneric("f"))

  Partial matching won't work for these args if you do this, but it
  can be a nice way to provide optional named args common to all
  methods of a generic function, but for which you do not ever want to
  do dispatch.

+ seth


From hpages at fhcrc.org  Thu Jun  8 21:08:58 2006
From: hpages at fhcrc.org (Herve Pages)
Date: Thu, 08 Jun 2006 12:08:58 -0700
Subject: [Rd] install.packages() does not warn when 'lib' arg is missing on
 Linux or Windows
Message-ID: <448875CA.60901@fhcrc.org>

Hello,

Man page for 'install.packages' says that if the 'lib' arg is missing,
then it "defaults to '.libPaths()[1]' with a warning".
But, given the 'install.packages' source code, it seems that this warning
is issued only when 'length(.libPaths()) > 1'.
So typically, this warning will appear on Mac OS X but not on a Linux
or Windows systems with default settings.
On my Mac OS X system:

     > .libPaths()
    [1] "/Users/biocbuild/Library/R/Library"
    [2] "/Library/Frameworks/R.Framework/Versions/2.3/Resources/library"

but on my Linux system:

     > .libPaths()
    [1] "/home/hpages/arch/x86_64/R-2.3.1/library"

I'm using R-2.3.1 on both systems.
Best,


H.

-- 
------------------------
Herv? Pag?s
E-mail: hpages at fhcrc.org
 Phone: (206) 667-5791
   Fax: (206) 667-1319


From ripley at stats.ox.ac.uk  Thu Jun  8 21:17:52 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 8 Jun 2006 20:17:52 +0100 (BST)
Subject: [Rd] install.packages() does not warn when 'lib' arg is missing
 on Linux or Windows
In-Reply-To: <448875CA.60901@fhcrc.org>
References: <448875CA.60901@fhcrc.org>
Message-ID: <Pine.LNX.4.64.0606082017380.28635@gannet.stats.ox.ac.uk>

On Thu, 8 Jun 2006, Herve Pages wrote:

> Hello,
>
> Man page for 'install.packages' says that if the 'lib' arg is missing,
> then it "defaults to '.libPaths()[1]' with a warning".
> But, given the 'install.packages' source code, it seems that this warning
> is issued only when 'length(.libPaths()) > 1'.
> So typically, this warning will appear on Mac OS X but not on a Linux
> or Windows systems with default settings.

Yes, and what is the problem with that?

> On my Mac OS X system:
>
>     > .libPaths()
>    [1] "/Users/biocbuild/Library/R/Library"
>    [2] "/Library/Frameworks/R.Framework/Versions/2.3/Resources/library"
>
> but on my Linux system:
>
>     > .libPaths()
>    [1] "/home/hpages/arch/x86_64/R-2.3.1/library"
>
> I'm using R-2.3.1 on both systems.
> Best,
>
>
> H.
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hpages at fhcrc.org  Thu Jun  8 21:31:48 2006
From: hpages at fhcrc.org (Herve Pages)
Date: Thu, 08 Jun 2006 12:31:48 -0700
Subject: [Rd] install.packages("C",
 dep=TRUE) does not always install indirect dependencies
Message-ID: <44887B24.4080808@fhcrc.org>

Hello again,

I've found another issue with 'install.packages'.
'install.packages("C", dep=TRUE)' will "fail" when the 2 following
conditions are satisfied:
  - Package C depends on B which in turns depends on A but
    the Depends field in C doesn't list A.
  - Package B is already installed but not package A (e.g.
    the user did 'install.packages("B", dep=FALSE)').
Then 'install.packages("C", dep=TRUE)' will not install A.
May be this is the desired behavior, I don't know. Personally, I would
think of 'install.packages("C", dep=TRUE)' as a reliable way to get every
packages that C directly or indirectly relies on installed.

Best,

H.

-- 
------------------------
Herv? Pag?s
E-mail: hpages at fhcrc.org
 Phone: (206) 667-5791
   Fax: (206) 667-1319


From hpages at fhcrc.org  Thu Jun  8 21:50:50 2006
From: hpages at fhcrc.org (Herve Pages)
Date: Thu, 08 Jun 2006 12:50:50 -0700
Subject: [Rd] install.packages() does not warn when 'lib' arg is missing
 on Linux or Windows
In-Reply-To: <Pine.LNX.4.64.0606082017380.28635@gannet.stats.ox.ac.uk>
References: <448875CA.60901@fhcrc.org>
	<Pine.LNX.4.64.0606082017380.28635@gannet.stats.ox.ac.uk>
Message-ID: <44887F9A.7000407@fhcrc.org>

Prof Brian Ripley wrote:
> On Thu, 8 Jun 2006, Herve Pages wrote:
>
>> Man page for 'install.packages' says that if the 'lib' arg is missing,
>> then it "defaults to '.libPaths()[1]' with a warning".
>> But, given the 'install.packages' source code, it seems that this 
>> warning
>> is issued only when 'length(.libPaths()) > 1'.
>
> Yes, and what is the problem with that?
Since current behaviour is not in sync with documentation then
IMHO it's either a documentation bug or an implementation bug.
Best,

H.

-- 
------------------------
Herv? Pag?s
E-mail: hpages at fhcrc.org
 Phone: (206) 667-5791
   Fax: (206) 667-1319


From murdoch at stats.uwo.ca  Thu Jun  8 22:37:23 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Thu, 08 Jun 2006 16:37:23 -0400
Subject: [Rd] install.packages("C",
 dep=TRUE) does not always install indirect dependencies
In-Reply-To: <44887B24.4080808@fhcrc.org>
References: <44887B24.4080808@fhcrc.org>
Message-ID: <44888A83.9090202@stats.uwo.ca>

On 6/8/2006 3:31 PM, Herve Pages wrote:
> Hello again,
> 
> I've found another issue with 'install.packages'.
> 'install.packages("C", dep=TRUE)' will "fail" when the 2 following
> conditions are satisfied:
>   - Package C depends on B which in turns depends on A but
>     the Depends field in C doesn't list A.
>   - Package B is already installed but not package A (e.g.
>     the user did 'install.packages("B", dep=FALSE)').
> Then 'install.packages("C", dep=TRUE)' will not install A.
> May be this is the desired behavior, I don't know. Personally, I would
> think of 'install.packages("C", dep=TRUE)' as a reliable way to get every
> packages that C directly or indirectly relies on installed.

This seems rather unreasonable.  If a user asked not to install B's 
dependencies, and A is not listed as a dependency of C, then I don't 
think a request to install C and its dependencies should install A.

Perhaps the installation of B without dependencies was a mistake?  I 
think an argument could be made that dependencies=TRUE should be the 
default (as it is when using the corresponding menu item in the Windows 
GUI).

Duncan Murdoch


From jeff at kanecap.com  Thu Jun  8 23:29:57 2006
From: jeff at kanecap.com (Jeff Enos)
Date: Thu, 8 Jun 2006 17:29:57 -0400
Subject: [Rd] NAs in unsplit factor
Message-ID: <17544.38613.777136.185868@gargle.gargle.HOWL>

R-devel,

Below is a simple example calling split and unsplit on a numeric
vector of length 2 where 'f' is c(1,NA).

> unsplit(split(c(1,2), c(1,NA)), c(1,NA))
[1] 1 0

I noticed that the call to vector in unsplit gives us 0 as the 2nd
element of the result.

Is this the intended result, as opposed to NA?

Thanks for your help,

Jeff

-- 
Jeff Enos
Kane Capital Management
jeff at kanecap.com


From simon.urbanek at r-project.org  Fri Jun  9 00:12:41 2006
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 9 Jun 2006 00:12:41 +0200
Subject: [Rd] install.packages() does not warn when 'lib' arg is missing
	on Linux or Windows
In-Reply-To: <448875CA.60901@fhcrc.org>
References: <448875CA.60901@fhcrc.org>
Message-ID: <A1531EF1-302A-4E49-B18B-831F19F65BA2@r-project.org>

Herve,

On Jun 8, 2006, at 9:08 PM, Herve Pages wrote:

> Man page for 'install.packages' says that if the 'lib' arg is missing,
> then it "defaults to '.libPaths()[1]' with a warning".

Where are you quoting from? I read (R 2.3.1):

install.packages can be used to install new packages/bundles. It  
takes a vector of names and a destination library, downloads the  
packages from the repositories and installs them. (If the library is  
omitted it defaults to the first directory in .libPaths(), with a  
warning if there is more than one.)

and that description is correct.


> But, given the 'install.packages' source code, it seems that this  
> warning is issued only when 'length(.libPaths()) > 1'.

This is what the man page says ...


> So typically, this warning will appear on Mac OS X but not on a  
> Linux or Windows systems with default settings.

... and neither on Mac OS X with default settings.


> On my Mac OS X system:
>
>> .libPaths()
>     [1] "/Users/biocbuild/Library/R/Library"

^^ - this is your custom setting, it is not the default

>     [2] "/Library/Frameworks/R.Framework/Versions/2.3/Resources/ 
> library"
>

The default on OS X is

 > .libPaths()
[1] "/Library/Frameworks/R.framework/Resources/library"
 >

in the shell and

 > .libPaths()
[1] "/Library/Frameworks/R.framework/Versions/2.3/Resources/library"
 >

in the GUI (since v1.16).

Cheers,
Simon


From pinard at iro.umontreal.ca  Fri Jun  9 00:58:06 2006
From: pinard at iro.umontreal.ca (=?iso-8859-1?Q?Fran=E7ois?= Pinard)
Date: Thu, 8 Jun 2006 18:58:06 -0400
Subject: [Rd] NAs in unsplit factor
In-Reply-To: <17544.38613.777136.185868@gargle.gargle.HOWL>
References: <17544.38613.777136.185868@gargle.gargle.HOWL>
Message-ID: <20060608225806.GA23457@phenix.progiciels-bpi.ca>

[Jeff Enos]

>Below is a simple example calling split and unsplit on a numeric
>vector of length 2 where 'f' is c(1,NA).

>> unsplit(split(c(1,2), c(1,NA)), c(1,NA))
>[1] 1 0

>I noticed that the call to vector in unsplit gives us 0 as the 2nd
>element of the result.

>Is this the intended result, as opposed to NA?

?unsplit says:

  'unsplit' reverses the effect of 'split'.

and later explains:

  'unsplit' returns a vector for which 'split(x, f)' equals 'value'

So some may argue that, while not necessarily intended, that this is at 
least not unintended :-).  Yet, why "0" is chosen here, among a myriad 
of possibilities?  "NA", as you suggest, might be a more neutral choice.

-- 
Fran?ois Pinard   http://pinard.progiciels-bpi.ca


From sfalcon at fhcrc.org  Fri Jun  9 06:38:51 2006
From: sfalcon at fhcrc.org (Seth Falcon)
Date: Thu, 08 Jun 2006 21:38:51 -0700
Subject: [Rd] install.packages("C",
	dep=TRUE) does not always install indirect dependencies
In-Reply-To: <44888A83.9090202@stats.uwo.ca> (Duncan Murdoch's message of "Thu,
	08 Jun 2006 16:37:23 -0400")
References: <44887B24.4080808@fhcrc.org> <44888A83.9090202@stats.uwo.ca>
Message-ID: <m2slmfhrj8.fsf@ziti.local>

Duncan Murdoch <murdoch at stats.uwo.ca> writes:
>> conditions are satisfied:
>>   - Package C depends on B which in turns depends on A but
>>     the Depends field in C doesn't list A.
>>   - Package B is already installed but not package A (e.g.
>>     the user did 'install.packages("B", dep=FALSE)').
>> Then 'install.packages("C", dep=TRUE)' will not install A.
>> May be this is the desired behavior, I don't know. Personally, I would
>> think of 'install.packages("C", dep=TRUE)' as a reliable way to get every
>> packages that C directly or indirectly relies on installed.
>
> This seems rather unreasonable.  If a user asked not to install B's 
> dependencies, and A is not listed as a dependency of C, then I don't 
> think a request to install C and its dependencies should install A.

I see your point, but the unreasonable-ness kinda works both ways: If
a user asked to install C and _all_ its dependencies, then I think
that request should do that :-)

> Perhaps the installation of B without dependencies was a mistake?  I 
> think an argument could be made that dependencies=TRUE should be the 
> default (as it is when using the corresponding menu item in the Windows 
> GUI).

Installing dependencies seems like a reasonable default to me.  Having
the flexibility to not install dependencies is nice, but I imagine for
a majority of users they install a package in order to use it, and
mostly you can't use a package unless you have its dependencies
installed.

+ seth


From h.wickham at gmail.com  Fri Jun  9 09:50:09 2006
From: h.wickham at gmail.com (hadley wickham)
Date: Fri, 9 Jun 2006 09:50:09 +0200
Subject: [Rd] Idempotent apply
Message-ID: <f8e6ff050606090050t11b677aes463a877f7f61a272@mail.gmail.com>

Dear all,

I have been working on an idempotent version of apply, such that
applying a function f(x) = x (ie. force) returns the same array (or a
permutation of it depending on the order of the margins):

a <- array(1:27, c(2,3,4))

all.equal(a, iapply(a, 1, force))
all.equal(a, iapply(a, 1:2, force))
all.equal(a, iapply(a, 1:3, force))
all.equal(aperm(a, c(2,1,3)), iapply(a, 2, force))
all.equal(aperm(a, c(3,1,2)), iapply(a, 3, force))

I have also generalised apply so that the function can return an array
of any dimension and it will be slotted in orthogonally to the
existing dimensions:

iapply(a, 1, min)
iapply(a, 2, min)
iapply(a, 3, min)
iapply(a, 1, range)
iapply(a, 2, range)
iapply(a, 3, range)

I have included my code below.  I'd be interested to get your feedback on:

 * whether you can find an edge case where it doesn't work

 * how I can make the subsetting code more elegant - the current
kludgework of do.call seems to be suboptimal, but I couldn't figure
out a better way

 * I was also suprised that a & b display differently in this example:

a <- b <- as.array(1:3)
dim(b) <- c(3,1)

Any other comments are very much appreciated!

Hadley


iapply <- function(x, margins=1, fun, ..., REDUCE=TRUE) {
	if (!is.array(x)) x <- as.array(x)
	
	reorder <- c(margins, (1:length(dim(x)))[-margins])

	x <- aperm(x, (reorder))
	x <- compactify(x, length(margins))

	results <- lapply(x, fun, ...)
	dim(results) <- dim(x)
	
	results <- decompactify(results)
	if (REDUCE) reduce(results) else results
}
vdim <- function(x) if (is.vector(x)) length(x) else dim(x)


# Compacts an array into a smaller array of lists containing the
remaining dimensions
compactify <- function(x, dims = 1) {

	d <- dim(x)
	ds <- seq(along=d)
	margins <- 1:dims
	
	subsets <- do.call(expand.grid, structure(lapply(d[margins], seq,
from=1), names=margins))
	subsets[, ds[-margins]] <- TRUE
	
	res <- lapply(1:nrow(subsets), function(i) do.call("[",c(list(x),
subsets[i, ], drop=TRUE)))
	dim(res) <- dim(x)[margins]
	
	res
}

# Inverse of compactity
decompactify <- function(x) {

	subsets <- do.call(expand.grid, structure(lapply(dim(x), seq, from=1)))
	subsets <- cbind(subsets, x=matrix(TRUE, ncol=length(vdim(x[[1]])),
nrow=nrow(subsets)))

	y <- array(NA, c(vdim(x), vdim(x[[1]])))
	for(i in 1:length(x)) {
		y <- do.call("[<-",c(list(y), unname(subsets[i, ]), value = list(x[[i]])))
	}
	y
}	
reduce <- function(x) {
		do.call("[", c(list(x), lapply(dim(x), function(x) if (x==1) 1 else
T), drop=TRUE))
}


From r.hankin at noc.soton.ac.uk  Fri Jun  9 10:25:50 2006
From: r.hankin at noc.soton.ac.uk (Robin Hankin)
Date: Fri, 9 Jun 2006 09:25:50 +0100
Subject: [Rd] Idempotent apply
In-Reply-To: <f8e6ff050606090050t11b677aes463a877f7f61a272@mail.gmail.com>
References: <f8e6ff050606090050t11b677aes463a877f7f61a272@mail.gmail.com>
Message-ID: <54E36AE0-DE4E-4B96-8863-452DA75900EE@soc.soton.ac.uk>

Hi Hadley, Rteam,

I encountered similar issues trying to reproduce Matlab's "sort"
functionality.

[here  "a" is array(1:27, c(2,3,4))]

In matlab, one can type sort(a,i) to sort along dimension i.

One can reproduce this functionality thus:

asort <- function(a,i,FUN="sort"){
   j <- 1:length(dim(a))
   aperm(apply(a,j[-i],FUN),append(j[-1],1,i-1))
}


then  things like

asort(a,1)
asort(a,2)
asort(a,1,sample)

work as expected (at least by this recovering Matlab user)



best wishes



rksh





On 9 Jun 2006, at 08:50, hadley wickham wrote:

> Dear all,
>
> I have been working on an idempotent version of apply, such that
> applying a function f(x) = x (ie. force) returns the same array (or a
> permutation of it depending on the order of the margins):
>
> a <- array(1:27, c(2,3,4))
>
> all.equal(a, iapply(a, 1, force))
> all.equal(a, iapply(a, 1:2, force))
> all.equal(a, iapply(a, 1:3, force))
> all.equal(aperm(a, c(2,1,3)), iapply(a, 2, force))
> all.equal(aperm(a, c(3,1,2)), iapply(a, 3, force))
>
> I have also generalised apply so that the function can return an array
> of any dimension and it will be slotted in orthogonally to the
> existing dimensions:
>
> iapply(a, 1, min)
> iapply(a, 2, min)
> iapply(a, 3, min)
> iapply(a, 1, range)
> iapply(a, 2, range)
> iapply(a, 3, range)
>
> I have included my code below.  I'd be interested to get your  
> feedback on:
>
>  * whether you can find an edge case where it doesn't work
>
>  * how I can make the subsetting code more elegant - the current
> kludgework of do.call seems to be suboptimal, but I couldn't figure
> out a better way
>
>  * I was also suprised that a & b display differently in this example:
>
> a <- b <- as.array(1:3)
> dim(b) <- c(3,1)
>
> Any other comments are very much appreciated!
>
> Hadley
>
>
> iapply <- function(x, margins=1, fun, ..., REDUCE=TRUE) {
> 	if (!is.array(x)) x <- as.array(x)
> 	
> 	reorder <- c(margins, (1:length(dim(x)))[-margins])
>
> 	x <- aperm(x, (reorder))
> 	x <- compactify(x, length(margins))
>
> 	results <- lapply(x, fun, ...)
> 	dim(results) <- dim(x)
> 	
> 	results <- decompactify(results)
> 	if (REDUCE) reduce(results) else results
> }
> vdim <- function(x) if (is.vector(x)) length(x) else dim(x)
>
>
> # Compacts an array into a smaller array of lists containing the
> remaining dimensions
> compactify <- function(x, dims = 1) {
>
> 	d <- dim(x)
> 	ds <- seq(along=d)
> 	margins <- 1:dims
> 	
> 	subsets <- do.call(expand.grid, structure(lapply(d[margins], seq,
> from=1), names=margins))
> 	subsets[, ds[-margins]] <- TRUE
> 	
> 	res <- lapply(1:nrow(subsets), function(i) do.call("[",c(list(x),
> subsets[i, ], drop=TRUE)))
> 	dim(res) <- dim(x)[margins]
> 	
> 	res
> }
>
> # Inverse of compactity
> decompactify <- function(x) {
>
> 	subsets <- do.call(expand.grid, structure(lapply(dim(x), seq,  
> from=1)))
> 	subsets <- cbind(subsets, x=matrix(TRUE, ncol=length(vdim(x[[1]])),
> nrow=nrow(subsets)))
>
> 	y <- array(NA, c(vdim(x), vdim(x[[1]])))
> 	for(i in 1:length(x)) {
> 		y <- do.call("[<-",c(list(y), unname(subsets[i, ]), value = list(x 
> [[i]])))
> 	}
> 	y
> }	
> reduce <- function(x) {
> 		do.call("[", c(list(x), lapply(dim(x), function(x) if (x==1) 1 else
> T), drop=TRUE))
> }
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

--
Robin Hankin
Uncertainty Analyst
National Oceanography Centre, Southampton
European Way, Southampton SO14 3ZH, UK
  tel  023-8059-7743


From Heather.Turner at warwick.ac.uk  Fri Jun  9 12:52:47 2006
From: Heather.Turner at warwick.ac.uk (Heather Turner)
Date: Fri, 09 Jun 2006 11:52:47 +0100
Subject: [Rd] R CMD check and directory/package name
Message-ID: <s489611e.021@liberator.csv.warwick.ac.uk>

The NEWS for R 2.3.0 states that

"R CMD check works for packages whose package name is different from the directory name in which it is located."

However that hasn't been my experience. I ran R CMD check on package sources located in a directory with the same name as the package and it worked as expected. Then I renamed the directory and tried again. The first attempt got stuck when checking installation, so I tried again with option --no-install but it got stuck on checking for missing documentation entries. I can't see a way of getting round this. Perhaps I have misunderstood the NEWS? I can't find this behaviour documented elsewhere.

R CMD check output given at the end,

Thanks,

Heather

## original
D:\gnm>RCMD CHECK gnm
RCMD CHECK gnm
* checking for working latex ... OK
* using log directory 'd:/gnm/gnm.Rcheck'
* using Version 2.3.1 (2006-06-01)
* checking for file 'gnm/DESCRIPTION' ... OK
* this is package 'gnm' version '0.8-5'
* checking package dependencies ... OK
* checking if this is a source package ... WARNING
Subdirectory 'gnm/src' contains object files.
* checking whether package 'gnm' can be installed ... OK
* checking package directory ... OK
* checking for portable file names ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for syntax errors ... OK
* checking R files for library.dynam ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking Rd files ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking for CRLF line endings in C/C++/Fortran sources/headers ... OK
* checking for portable compilation flags in Makevars ... OK
* creating gnm-Ex.R ... OK
* checking examples ... OK
* checking tests ...
## some differences cut out to save space here
OK
make[1]: Leaving directory `/cygdrive/d/gnm/gnm.Rcheck/tests'
 OK
* checking package vignettes in 'inst/doc' ... OK
* creating gnm-manual.tex ... OK
* checking gnm-manual.tex ... OK

WARNING: There was 1 warning, see
  d:/gnm/gnm.Rcheck/00check.log
for details

## first attempt with renamed directory
D:\gnm>RCMD CHECK gnm2
* checking for working latex ... OK
* using log directory 'D:/gnm/gnm2.Rcheck'
* using Version 2.3.1 (2006-06-01)
* checking for file 'gnm2/DESCRIPTION' ... OK
* this is package 'gnm' version '0.8-5'
* checking package dependencies ... OK
* checking if this is a source package ... WARNING
Subdirectory 'gnm2/src' contains object files.
* checking whether package 'gnm' can be installed ... ERROR
Installation failed.
See 'D:/gnm/gnm2.Rcheck/00install.out' for details.

## D:/gnm/gnm2.Rcheck/00install.out
installing R.css in D:/gnm/gnm2.Rcheck


---------- Making package gnm2 ------------
  adding build stamp to DESCRIPTION
  installing NAMESPACE file and metadata
  making DLL ...
windres --include-dir c:/R/tex/R-2.3.1/include  -i gnm2_res.rc -o gnm2_res.o
gcc  -shared -s  -o gnm2.dll gnm2.def gnm.o gnm2_res.o  -Lc:/R/tex/R-2.3.1/bin -Lc:/R/tex/R-2.3.1/bin -lRblas -lg2c  -lR
  ... DLL made
  installing DLL
  installing R files
  installing demos
  installing inst files
  installing data files
  installing man source files
  installing indices
Error in .find.package(package, lib.loc, verbose = verbose) : 
	there is no package called 'gnm2'
Execution halted
make[2]: *** [indices] Error 1
make[1]: *** [all] Error 2
make: *** [pkg-gnm2] Error 2
*** Installation of gnm2 failed ***

Removing 'D:/gnm/gnm2.Rcheck/gnm2'

## Second attempt
D:\gnm>RCMD CHECK gnm2 --no-install
* checking for working latex ... OK
* using log directory 'D:/gnm/gnm2.Rcheck'
* using Version 2.3.1 (2006-06-01)
* checking for file 'gnm2/DESCRIPTION' ... OK
* this is package 'gnm' version '0.8-5'
* checking if this is a source package ... WARNING
Subdirectory 'gnm2/src' contains object files.
* checking package directory ... OK
* checking for portable file names ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for syntax errors ... OK
* checking R files for library.dynam ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking Rd files ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... ERROR
Error: there is no package called 'gnm2'


From korschi at uni-muenster.de  Fri Jun  9 14:22:49 2006
From: korschi at uni-muenster.de (korschi at uni-muenster.de)
Date: Fri,  9 Jun 2006 14:22:49 +0200 (CEST)
Subject: [Rd] R bug - crash of the complete session (PR#8950)
Message-ID: <20060609122249.8A53719B24@slim.kubism.ku.dk>

Full_Name: Eberhard Korsching
Version: 2.3.0
OS: Win2K SR4
Submission from: (NULL) (128.176.44.202)


Hello,

maybe the problem is solved for WinXP and R 2.3.1 - but I have not tested.

Situation:
R session open, some script windows open.
Running a script producing a big graphic concerning the plotted data content
in a device window on screen.
I toggel the grafics window full screen and if I am ready back.
While the window is repainting the graphic (needs some time), I close the
window
with the close buttom in the rigth upper corner.
- Voila the R session is gone and/or my debugger turns on.
Error message:
"RGui RGui.exe: Application error- memory cound not be read."
Debugger Compag Visual Fortran:
Unhandled exception in RGui, R.dll: 0xC0000005: Access violation
1009869E   mov         eax,dword ptr [eax]

This behaviour is reproduceble.

The bug seems to be not critical.

Best
 Eberhard


From davidhughjones at gmail.com  Fri Jun  9 15:09:53 2006
From: davidhughjones at gmail.com (davidhughjones at gmail.com)
Date: Fri,  9 Jun 2006 15:09:53 +0200 (CEST)
Subject: [Rd] read.fwf only reads one "buffersize" of lines when reading
	multiline records (PR#8951)
Message-ID: <20060609130953.7C5974BE5A@slim.kubism.ku.dk>

Full_Name: David Hugh-Jones
Version: 2.3.0
OS: Windows
Submission from: (NULL) (155.245.34.194)


Here's a test case:

tf = tempfile()
cat(file=tf, rep("123", 100), sep="\n")
# this gives a data frame with 100 rows
read.fwf(tf, widths=c(1,2), buffersize=10)

# but this only gives 5 rows!
read.fwf(tf, widths=list(c(1,2), 3), buffersize=10)


I think the correct fix is to replace this line in read.fwf

if (length(raw) < thisblock) 

with

if (nread < thisblock) 


This bug is present in earlier versions, at least up to 2.1.0.

Cheers
David


From hpages at fhcrc.org  Fri Jun  9 19:47:25 2006
From: hpages at fhcrc.org (Herve Pages)
Date: Fri, 09 Jun 2006 10:47:25 -0700
Subject: [Rd] install.packages("C",
 dep=TRUE) does not always install indirect dependencies
In-Reply-To: <44888A83.9090202@stats.uwo.ca>
References: <44887B24.4080808@fhcrc.org> <44888A83.9090202@stats.uwo.ca>
Message-ID: <4489B42D.7030108@fhcrc.org>

Duncan Murdoch wrote:
> On 6/8/2006 3:31 PM, Herve Pages wrote:
>> May be this is the desired behavior, I don't know. Personally, I would
>> think of 'install.packages("C", dep=TRUE)' as a reliable way to get 
>> every
>> packages that C directly or indirectly relies on installed.
>
> This seems rather unreasonable.  If a user asked not to install B's 
> dependencies, and A is not listed as a dependency of C, then I don't 
> think a request to install C and its dependencies should install A.

Hi Duncan,

Maybe the user didn't _ask_ not to install B's deps. Maybe he simply 
made a mistake
(which is easy with 'dep=FALSE' being the default), or maybe this is a 
shared system and
someone else installed B without 'dep=TRUE' or removed A or...
But I realize that there would be a significant extra cost if 
'install.packages("C", dep=TRUE)'
had to check the whole deps tree instead of just checking whether only 
the packages listed
in C's Depends field are already installed (especially when those 
packages _are_ already
installed).
So if checking the whole deps tree can't be done everytime 
'install.packages(..., dep=TRUE)'
is used then may be it could be done on demand e.g. with something 
similar to what
"rpm -Va --nofiles" does on a Linux system (this checks the entire 
system for missing deps).

> Perhaps the installation of B without dependencies was a mistake?  I 
> think an argument could be made that dependencies=TRUE should be the 
> default (as it is when using the corresponding menu item in the 
> Windows GUI).
Yes having 'dependencies=TRUE' as the default would definetly help the
user to keep a system where all deps are satisfied.

Best,

H.

-- 
------------------------
Herv? Pag?s
E-mail: hpages at fhcrc.org
 Phone: (206) 667-5791
   Fax: (206) 667-1319


From murdoch at stats.uwo.ca  Fri Jun  9 20:03:35 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 09 Jun 2006 14:03:35 -0400
Subject: [Rd] install.packages("C",
 dep=TRUE) does not always install indirect dependencies
In-Reply-To: <4489B42D.7030108@fhcrc.org>
References: <44887B24.4080808@fhcrc.org> <44888A83.9090202@stats.uwo.ca>
	<4489B42D.7030108@fhcrc.org>
Message-ID: <4489B7F7.9080204@stats.uwo.ca>

On 6/9/2006 1:47 PM, Herve Pages wrote:
> Duncan Murdoch wrote:
>> On 6/8/2006 3:31 PM, Herve Pages wrote:
>>> May be this is the desired behavior, I don't know. Personally, I would
>>> think of 'install.packages("C", dep=TRUE)' as a reliable way to get 
>>> every
>>> packages that C directly or indirectly relies on installed.
>>
>> This seems rather unreasonable.  If a user asked not to install B's 
>> dependencies, and A is not listed as a dependency of C, then I don't 
>> think a request to install C and its dependencies should install A.
> 
> Hi Duncan,
> 
> Maybe the user didn't _ask_ not to install B's deps. Maybe he simply 
> made a mistake
> (which is easy with 'dep=FALSE' being the default), or maybe this is a 
> shared system and
> someone else installed B without 'dep=TRUE' or removed A or...

Right, those are all possibilities.  But they can all be repaired by 
manually installing A, can't they?  Does the error message make clear 
that the problem is a lack of A?

> But I realize that there would be a significant extra cost if 
> 'install.packages("C", dep=TRUE)'
> had to check the whole deps tree instead of just checking whether only 
> the packages listed
> in C's Depends field are already installed (especially when those 
> packages _are_ already
> installed).
> So if checking the whole deps tree can't be done everytime 
> 'install.packages(..., dep=TRUE)'
> is used then may be it could be done on demand e.g. with something 
> similar to what
> "rpm -Va --nofiles" does on a Linux system (this checks the entire 
> system for missing deps).
> 
>> Perhaps the installation of B without dependencies was a mistake?  I 
>> think an argument could be made that dependencies=TRUE should be the 
>> default (as it is when using the corresponding menu item in the 
>> Windows GUI).
> Yes having 'dependencies=TRUE' as the default would definetly help the
> user to keep a system where all deps are satisfied.

I don't know the logic behind the "dependencies=FALSE" default, and I'm 
reluctant to change defaults on platforms I don't use.  Since this is 
really only an inconvenience, I think you'll have to find an R Core 
member who actually uses your platform to deal with it.

Duncan Murdoch


From mtmorgan at fhcrc.org  Fri Jun  9 22:03:30 2006
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Fri, 09 Jun 2006 13:03:30 -0700
Subject: [Rd] Environment variable MAKE not defined on Windows
Message-ID: <6phodx2drl9.fsf@gopher1.fhcrc.org>

On Windows,

> Sys.getenv("MAKE")
  MAKE 
"" 

when (at a DOS prompt)

X:>set MAKE
Environment variable MAKE not defined

On linux,

> Sys.getenv("MAKE")
  MAKE 
"make" 

even when (in a shell)

% echo $MAKE

returns nothing.


This has consequences, e.g., in buildVignette where

system(Sys.getenv("MAKE"))

dutifully does nothing on Windows, but evaluates the vignette Makefile
on linux.

> sessionInfo()
R version 2.4.0 Under development (unstable) (2006-06-08 r38315)
i386-pc-mingw32

> sessionInfo()
R version 2.4.0 Under development (unstable) (2006-05-25 r38197) 
x86_64-unknown-linux-gnu 


Martin
-- 
Bioconductor


From murdoch at stats.uwo.ca  Sat Jun 10 00:18:49 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 09 Jun 2006 18:18:49 -0400
Subject: [Rd] Environment variable MAKE not defined on Windows
In-Reply-To: <6phodx2drl9.fsf@gopher1.fhcrc.org>
References: <6phodx2drl9.fsf@gopher1.fhcrc.org>
Message-ID: <4489F3C9.1090904@stats.uwo.ca>

On 6/9/2006 4:03 PM, Martin Morgan wrote:
> On Windows,
> 
>> Sys.getenv("MAKE")
>   MAKE 
> "" 
> 
> when (at a DOS prompt)
> 
> X:>set MAKE
> Environment variable MAKE not defined
> 
> On linux,
> 
>> Sys.getenv("MAKE")
>   MAKE 
> "make" 
> 
> even when (in a shell)
> 
> % echo $MAKE
> 
> returns nothing.
> 
> 
> This has consequences, e.g., in buildVignette where
> 
> system(Sys.getenv("MAKE"))
> 
> dutifully does nothing on Windows, but evaluates the vignette Makefile
> on linux.
> 
>> sessionInfo()
> R version 2.4.0 Under development (unstable) (2006-06-08 r38315)
> i386-pc-mingw32
> 
>> sessionInfo()
> R version 2.4.0 Under development (unstable) (2006-05-25 r38197) 
> x86_64-unknown-linux-gnu 

Most Windows systems don't have a working "make" command, and I don't 
know of a reliable test for one.  (I believe the one that ships with MS 
compilers is not compatible with R's makefiles.)  If you do have one, 
you can define MAKE=make on the Rgui or Rterm command line.

Duncan Murdoch


From mtmorgan at fhcrc.org  Sat Jun 10 01:37:10 2006
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Fri, 09 Jun 2006 16:37:10 -0700
Subject: [Rd] Environment variable MAKE not defined on Windows
In-Reply-To: <4489F3C9.1090904@stats.uwo.ca> (Duncan Murdoch's message of
	"Fri, 09 Jun 2006 18:18:49 -0400")
References: <6phodx2drl9.fsf@gopher1.fhcrc.org> <4489F3C9.1090904@stats.uwo.ca>
Message-ID: <6phu06tdhp5.fsf@gopher1.fhcrc.org>

Duncan Murdoch <murdoch at stats.uwo.ca> writes:

> On 6/9/2006 4:03 PM, Martin Morgan wrote:
>> On Windows,
>>
>>> Sys.getenv("MAKE")
>>   MAKE "" when (at a DOS prompt)
>> X:>set MAKE
>> Environment variable MAKE not defined
>
> Most Windows systems don't have a working "make" command, and I don't
> know of a reliable test for one.  

I guess on non-Windows systems MAKE gets defined when R is
built. Perhaps a similar thing should happen when I build my own R on
Windows, because then I must have a working make?

I realize that the windows R is distributed in binary form; perhaps
these could be configured not to include MAKE and other environmental
variables? For instance, I notice some unlikely-to-be-generally-useful
variables like PERL5LIB and TEXINPUTS hard-coded in

R_HOME/src/gnuwin32/front-ends/rcmdfn.c

Also, the documentation ?Startup is not correct, at least if 'factory
fresh' means newly built -- there does not appear to be an
etc/Renviron.site on Windows.

Description:

   The name of the site file is the one pointed to by the environment
   variable 'R_ENVIRON'; if this is unset or empty,
   '$R_HOME/etc/Renviron.site' is used (if it exists, which it does
   not in a "factory-fresh" installation except on Windows). 

Finally, the buildVignettes() code might be modified to more
forcefully notify the user of the inadequacies of their system.

Martin   

> (I believe the one that ships with MS compilers is not compatible
> with R's makefiles.)  If you do have one, you can define MAKE=make
> on the Rgui or Rterm command line.
>
> Duncan Murdoch


From murdoch at stats.uwo.ca  Sat Jun 10 03:40:21 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 09 Jun 2006 21:40:21 -0400
Subject: [Rd] Environment variable MAKE not defined on Windows
In-Reply-To: <6phu06tdhp5.fsf@gopher1.fhcrc.org>
References: <6phodx2drl9.fsf@gopher1.fhcrc.org> <4489F3C9.1090904@stats.uwo.ca>
	<6phu06tdhp5.fsf@gopher1.fhcrc.org>
Message-ID: <448A2305.4090603@stats.uwo.ca>

On 6/9/2006 7:37 PM, Martin Morgan wrote:
> Duncan Murdoch <murdoch at stats.uwo.ca> writes:
> 
>> On 6/9/2006 4:03 PM, Martin Morgan wrote:
>>> On Windows,
>>>
>>>> Sys.getenv("MAKE")
>>>   MAKE "" when (at a DOS prompt)
>>> X:>set MAKE
>>> Environment variable MAKE not defined
>> Most Windows systems don't have a working "make" command, and I don't
>> know of a reliable test for one.  
> 
> I guess on non-Windows systems MAKE gets defined when R is
> built. Perhaps a similar thing should happen when I build my own R on
> Windows, because then I must have a working make?

The problem is that the natural place to put it is in the shortcut that 
starts R (or the command alias you use to start it from a command line). 
  We don't make a shortcut unless you install R from the binary 
installer, and don't make an alias at all.  If you start R from the 
command line, you're running an .exe directly.

I think the best solution is the one I suggested below:  do it yourself.

> I realize that the windows R is distributed in binary form; perhaps
> these could be configured not to include MAKE and other environmental
> variables? For instance, I notice some unlikely-to-be-generally-useful
> variables like PERL5LIB and TEXINPUTS hard-coded in
> 
> R_HOME/src/gnuwin32/front-ends/rcmdfn.c
> 
> Also, the documentation ?Startup is not correct, at least if 'factory
> fresh' means newly built -- there does not appear to be an
> etc/Renviron.site on Windows.
> 
> Description:
> 
>    The name of the site file is the one pointed to by the environment
>    variable 'R_ENVIRON'; if this is unset or empty,
>    '$R_HOME/etc/Renviron.site' is used (if it exists, which it does
>    not in a "factory-fresh" installation except on Windows). 

Right, that is wrong.  The "except on Windows" part is a recent 
addition; I'm not sure why, but I'll remove it.

> 
> Finally, the buildVignettes() code might be modified to more
> forcefully notify the user of the inadequacies of their system.

I'll add that.

Thanks for the suggestions.

Duncan Murdoch

> 
> Martin   
> 
>> (I believe the one that ships with MS compilers is not compatible
>> with R's makefiles.)  If you do have one, you can define MAKE=make
>> on the Rgui or Rterm command line.
>>
>> Duncan Murdoch
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From hpages at fhcrc.org  Sat Jun 10 04:01:50 2006
From: hpages at fhcrc.org (Herve Pages)
Date: Fri, 09 Jun 2006 19:01:50 -0700
Subject: [Rd] install.packages() does not warn when 'lib' arg is missing
 on Linux or Windows
In-Reply-To: <A1531EF1-302A-4E49-B18B-831F19F65BA2@r-project.org>
References: <448875CA.60901@fhcrc.org>
	<A1531EF1-302A-4E49-B18B-831F19F65BA2@r-project.org>
Message-ID: <448A280E.5090003@fhcrc.org>

Simon Urbanek wrote:
> On Jun 8, 2006, at 9:08 PM, Herve Pages wrote:
>
>> Man page for 'install.packages' says that if the 'lib' arg is missing,
>> then it "defaults to '.libPaths()[1]' with a warning".
>
> Where are you quoting from? I read (R 2.3.1):

Hi Simon,

I was quoting from the description of the 'lib' argument (among all 
functions
described on this man page, the 'install.packages' function is the only 
one to
have a 'lib' arg):

    lib: character vector giving the library directories where to
         install the packages.  Recycled as needed.  If missing,
         defaults to '.libPaths()[1]' with a warning.

I forgot to check the "Details" section for the 'install.packages' function
where the description is indeed correct. Sorry!

>> On my Mac OS X system:
>>
>>> .libPaths()
>>     [1] "/Users/biocbuild/Library/R/Library"
>
> ^^ - this is your custom setting, it is not the default
>
>>     [2] "/Library/Frameworks/R.Framework/Versions/2.3/Resources/ 
>> library"
>>
>
> The default on OS X is
>
> > .libPaths()
> [1] "/Library/Frameworks/R.framework/Resources/library"
> >
>
> in the shell and
>
> > .libPaths()
> [1] "/Library/Frameworks/R.framework/Versions/2.3/Resources/library"
> >
Yep right. Since it was the first time I was installing R-2.3.1 (from 
the CRAN
.dmg file, I choosed to install all components, including the R GUI) I 
was assuming
that my settings would have been the defaults but they were not :-/
I didn;t know about the Library/Preferences/org.R-project.R.plist file but a
real Mac OS X user showed it to me and reset my settings to the defaults.
Sorry for the trouble...

Best,

H.

-- 
------------------------
Herv? Pag?s
E-mail: hpages at fhcrc.org
 Phone: (206) 667-5791
   Fax: (206) 667-1319


From MSchwartz at mn.rr.com  Sat Jun 10 17:56:35 2006
From: MSchwartz at mn.rr.com (Marc Schwartz)
Date: Sat, 10 Jun 2006 10:56:35 -0500
Subject: [Rd] Heads up on the gnomeGUI package and pending FC changes
Message-ID: <1149954995.9428.26.camel@localhost.localdomain>

Hi all,

Tom Callaway from Red Hat posted a note on the Fedora Extras list
yesterday announcing that he will be retiring the R-gnomeGUI RPM from
Extras. After a brief clarification exchange this morning, I am posting
the information here.

The Fedora Development team has removed the old GNOME version 1.x libs
from the FC 6 devel tree. FC 6 is presently scheduled for a September
2006 release.

Thus, some of the core requirements to build the gnomeGUI on FC will be
going away moving forward.

I'm not sure if other distros will be taking (or already have taken) a
similar approach, but it may be worth noting in the R Admin Manual. I
suspect somebody will attempt to build the package (which also requires
that R is built as a shared lib) and find that it fails on (at least)
future FC versions.

Best regards,

Marc Schwartz


From carnellr at battelle.org  Sun Jun 11 06:03:10 2006
From: carnellr at battelle.org (carnellr at battelle.org)
Date: Sun, 11 Jun 2006 06:03:10 +0200 (CEST)
Subject: [Rd] qunif() behavior with Inf arguments (PR#8958)
Message-ID: <20060611040310.DF26B19FE8@slim.kubism.ku.dk>

Full_Name: Rob Carnell
Version: 2.3.0
OS: Windows XP sp 2
Submission from: (NULL) (131.167.72.220)


Thank you for all you work on R project!

I noticed the following behavior today.  It is what I believe to be an
inconsistency.

> qunif(.5, 0, Inf)
[1] Inf
> qunif(.5, -Inf, 1)
[1] NaN
Warning message:
NaNs produced in: qunif(p, min, max, lower.tail, log.p) 

I believe they should yield the same result, which is whatever you feel most
appropriate.  I think that arguments can be made for either.

The lower.tail parameter does not change the result.

> qunif(.5, 0, Inf, lower.tail=FALSE)
[1] Inf
> qunif(.5, -Inf, 1, lower.tail=FALSE)
[1] NaN
Warning message:
NaNs produced in: qunif(p, min, max, lower.tail, log.p) 

As a side note..

> qunif(.5, -Inf, Inf)
[1] NaN
Warning message:
NaNs produced in: qunif(p, min, max, lower.tail, log.p) 
 
which seems to be an appropriate result.

Of course, it is possible that I don't understand the reasons for this behavior,
but I can't find anyone who can explain it or any documentation for it.  S-Plus
7.0 does the following as well:

> qunif(0.5, 0, Inf)
[1] Inf
> qunif(0.5,  - Inf, 1)
[1] NA
> qunif(0.5,  - Inf, Inf)
[1] NA


Rob


From thomas.ruf at vu-wien.ac.at  Sun Jun 11 15:00:47 2006
From: thomas.ruf at vu-wien.ac.at (thomas.ruf at vu-wien.ac.at)
Date: Sun, 11 Jun 2006 15:00:47 +0200 (CEST)
Subject: [Rd] crash on winMenuAddItem (PR#8961)
Message-ID: <20060611130047.04D364BE6D@slim.kubism.ku.dk>

Full_Name: Thomas Ruf
Version: 2.3.1
OS: Windows XP home
Submission from: (NULL) (193.154.219.1)



Having created a large Menu with many submenus, R crashed (with an error message
from Windows) when adding another submenu using winMenuAddItem. The problems
seems to be caused by a limit on the number of submenus that can be created?

I can reproduce this behavior by creating the following (nonsense) menu:

winMenuAdd ("Data")
winMenuAddItem ("Data/Read", "Text", "none")
winMenuAddItem ("Data/Read/Text 0", "Load File 0", "none")

n<-30
for (i in 1:n){
item= paste("Data/Read/Text",as.character(i) )
subitem=paste( "Load File",as.character(i))
winMenuAddItem(item, subitem, "none")
}

With n<-10, the menu is created and R continues to work just fine. With n<-30,
however, my RGui reliably crashes, and with n<-18, it crashes about half of the
time.

The are no warnings or error messages from R prior to the crash. 

Best,
Thomas


From murdoch at stats.uwo.ca  Sun Jun 11 15:17:04 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sun, 11 Jun 2006 09:17:04 -0400
Subject: [Rd] crash on winMenuAddItem (PR#8961)
In-Reply-To: <20060611130047.04D364BE6D@slim.kubism.ku.dk>
References: <20060611130047.04D364BE6D@slim.kubism.ku.dk>
Message-ID: <448C17D0.4090000@stats.uwo.ca>

On 6/11/2006 9:00 AM, thomas.ruf at vu-wien.ac.at wrote:
> Full_Name: Thomas Ruf
> Version: 2.3.1
> OS: Windows XP home
> Submission from: (NULL) (193.154.219.1)

Thanks for the report.  I can reproduce this; it should be easy to fix.

Duncan Murdoch

> 
> 
> 
> Having created a large Menu with many submenus, R crashed (with an error message
> from Windows) when adding another submenu using winMenuAddItem. The problems
> seems to be caused by a limit on the number of submenus that can be created?
> 
> I can reproduce this behavior by creating the following (nonsense) menu:
> 
> winMenuAdd ("Data")
> winMenuAddItem ("Data/Read", "Text", "none")
> winMenuAddItem ("Data/Read/Text 0", "Load File 0", "none")
> 
> n<-30
> for (i in 1:n){
> item= paste("Data/Read/Text",as.character(i) )
> subitem=paste( "Load File",as.character(i))
> winMenuAddItem(item, subitem, "none")
> }
> 
> With n<-10, the menu is created and R continues to work just fine. With n<-30,
> however, my RGui reliably crashes, and with n<-18, it crashes about half of the
> time.
> 
> The are no warnings or error messages from R prior to the crash. 
> 
> Best,
> Thomas
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From sgiannerini at gmail.com  Sun Jun 11 20:13:42 2006
From: sgiannerini at gmail.com (Simone Giannerini)
Date: Sun, 11 Jun 2006 20:13:42 +0200
Subject: [Rd] Rgui crash under Windows
Message-ID: <3c12769c0606111113y84c1dd9kbb2a47fd4da654ea@mail.gmail.com>

Dear all,
I found the following on R 2.3.1. for Windows XPpro SP2, tested on 2 PCs
AMD 64 3700+,  Ati 9700
AMD Athlon 2400+, Matrox G550


Do the following:

x <- as.matrix(0);
fix(x)

pasting a big chunk of data, for instance the one below, into a cell
of the editor will crash the RGui.

333333333333333333
333333333333333333333333333
33333333333333333333333333333333333333333333
333333333333333333333333333333333333333333333333333
333333333333333333333333333333333333333333333333333333333333
3333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333

platform       i386-pc-mingw32
arch           i386
os             mingw32
system         i386, mingw32
status
major          2
minor          3.1
year           2006
month          06
day            01
svn rev        38247
language       R
version.string Version 2.3.1 (2006-06-01)
*************************************
the same does happen under linux (SUSE 10.0), details follow

platform x86_64-unknown-linux-gnu
arch     x86_64
os       linux-gnu
system   x86_64, linux-gnu
status
major    2
minor    2.1
year     2005
month    12
day      20
svn rev  36812
language R


Regards,

Simone


______________________________________________________

Simone Giannerini
Dipartimento di Scienze Statistiche "Paolo Fortunati"
Universita' di Bologna
Via delle belle arti 41 - 40126  Bologna,  ITALY
Tel: +39 051 2098248  Fax: +39 051 232153


From murdoch at stats.uwo.ca  Mon Jun 12 01:22:08 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sun, 11 Jun 2006 19:22:08 -0400
Subject: [Rd] Rgui crash under Windows
In-Reply-To: <3c12769c0606111113y84c1dd9kbb2a47fd4da654ea@mail.gmail.com>
References: <3c12769c0606111113y84c1dd9kbb2a47fd4da654ea@mail.gmail.com>
Message-ID: <448CA5A0.3050700@stats.uwo.ca>

On 6/11/2006 2:13 PM, Simone Giannerini wrote:
> Dear all,
> I found the following on R 2.3.1. for Windows XPpro SP2, tested on 2 PCs
> AMD 64 3700+,  Ati 9700
> AMD Athlon 2400+, Matrox G550
> 
> 
> Do the following:
> 
> x <- as.matrix(0);
> fix(x)
> 
> pasting a big chunk of data, for instance the one below, into a cell
> of the editor will crash the RGui.

Confirmed, and fixed.  I'll commit the fixes to R-patched and R-devel soon.

Duncan Murdoch

> 
> 333333333333333333
> 333333333333333333333333333
> 33333333333333333333333333333333333333333333
> 333333333333333333333333333333333333333333333333333
> 333333333333333333333333333333333333333333333333333333333333
> 3333333333333333333333333333333333333333333333333333333333333333333
> 33333333333333333333333333333333333333333333333333333333333333333333333
> 
> platform       i386-pc-mingw32
> arch           i386
> os             mingw32
> system         i386, mingw32
> status
> major          2
> minor          3.1
> year           2006
> month          06
> day            01
> svn rev        38247
> language       R
> version.string Version 2.3.1 (2006-06-01)
> *************************************
> the same does happen under linux (SUSE 10.0), details follow
> 
> platform x86_64-unknown-linux-gnu
> arch     x86_64
> os       linux-gnu
> system   x86_64, linux-gnu
> status
> major    2
> minor    2.1
> year     2005
> month    12
> day      20
> svn rev  36812
> language R
> 
> 
> Regards,
> 
> Simone
> 
> 
> ______________________________________________________
> 
> Simone Giannerini
> Dipartimento di Scienze Statistiche "Paolo Fortunati"
> Universita' di Bologna
> Via delle belle arti 41 - 40126  Bologna,  ITALY
> Tel: +39 051 2098248  Fax: +39 051 232153
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From sgiannerini at gmail.com  Mon Jun 12 10:52:50 2006
From: sgiannerini at gmail.com (Simone Giannerini)
Date: Mon, 12 Jun 2006 10:52:50 +0200
Subject: [Rd] Rgui crash under Windows
In-Reply-To: <448CA5A0.3050700@stats.uwo.ca>
References: <3c12769c0606111113y84c1dd9kbb2a47fd4da654ea@mail.gmail.com>
	<448CA5A0.3050700@stats.uwo.ca>
Message-ID: <3c12769c0606120152q5948fe95jf5a43a37d7202fc1@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20060612/cec10857/attachment.pl 

From h.wickham at gmail.com  Mon Jun 12 11:56:26 2006
From: h.wickham at gmail.com (hadley wickham)
Date: Mon, 12 Jun 2006 11:56:26 +0200
Subject: [Rd] Making a windows packages with zip
Message-ID: <f8e6ff050606120256v89f05f3q4e55939b41b3bcd9@mail.gmail.com>

In the past I have been able to make windows packages (containing only
R code) from my mac by simply zipping the installed package directory,
eg.

R CMD install asmrsim
cd ~/Library/R/library/
zip -r9X asmrsim asmrsim

(using code copied from this list, from Duncan Murdoch, I think)

However, since 2.3.0, windows users now get the following error:

Error in library(pkg, character.only = TRUE) :
       'asmrsim' is not a valid package -- installed < 2.0.0?


Obviously, the zip file was a hack in the first place, but is there
any way to continue to make windows packages easily, or should I grit
my teeth and install the cross compilation tool chain?

Thanks,

Hadley


From ligges at statistik.uni-dortmund.de  Mon Jun 12 12:03:35 2006
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 12 Jun 2006 12:03:35 +0200
Subject: [Rd] Making a windows packages with zip
In-Reply-To: <f8e6ff050606120256v89f05f3q4e55939b41b3bcd9@mail.gmail.com>
References: <f8e6ff050606120256v89f05f3q4e55939b41b3bcd9@mail.gmail.com>
Message-ID: <448D3BF7.9040608@statistik.uni-dortmund.de>

hadley wickham wrote:
> In the past I have been able to make windows packages (containing only
> R code) from my mac by simply zipping the installed package directory,
> eg.
> 
> R CMD install asmrsim
> cd ~/Library/R/library/
> zip -r9X asmrsim asmrsim
> 
> (using code copied from this list, from Duncan Murdoch, I think)
> 
> However, since 2.3.0, windows users now get the following error:
> 
> Error in library(pkg, character.only = TRUE) :
>        'asmrsim' is not a valid package -- installed < 2.0.0?
> 
> 
> Obviously, the zip file was a hack in the first place, but is there
> any way to continue to make windows packages easily, or should I grit
> my teeth and install the cross compilation tool chain?


Either the latter or ask the Windows users to install the source package.

Uwe Ligges


> Thanks,
> 
> Hadley
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch at stats.uwo.ca  Mon Jun 12 12:47:24 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 12 Jun 2006 06:47:24 -0400
Subject: [Rd] Rgui crash under Windows
In-Reply-To: <3c12769c0606120152q5948fe95jf5a43a37d7202fc1@mail.gmail.com>
References: <3c12769c0606111113y84c1dd9kbb2a47fd4da654ea@mail.gmail.com>	
	<448CA5A0.3050700@stats.uwo.ca>
	<3c12769c0606120152q5948fe95jf5a43a37d7202fc1@mail.gmail.com>
Message-ID: <448D463C.10501@stats.uwo.ca>

On 6/12/2006 4:52 AM, Simone Giannerini wrote:
> Dear Duncan,
> 
> thank you very much for your reply, just for the sake of precision
> I missed a 'not'  in my report, actually I intended:
> 
> "the same does not happen under linux (SUSE 10.0), details follow"
> 
> as I was not able to reproduce it under Linux, sorry for the inconvenience.

No problem.  I misread that in the original, and didn't think you had 
claimed a problem in Linux.

Thanks for the report!

Duncan Murdoch
> 
> Regards,
> 
> Simone
> 
> 
> On 6/12/06, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
>> On 6/11/2006 2:13 PM, Simone Giannerini wrote:
>>> Dear all,
>>> I found the following on R 2.3.1. for Windows XPpro SP2, tested on 2 PCs
>>> AMD 64 3700+,  Ati 9700
>>> AMD Athlon 2400+, Matrox G550
>>>
>>>
>>> Do the following:
>>>
>>> x <- as.matrix(0);
>>> fix(x)
>>>
>>> pasting a big chunk of data, for instance the one below, into a cell
>>> of the editor will crash the RGui.
>> Confirmed, and fixed.  I'll commit the fixes to R-patched and R-devel
> soon.
>> Duncan Murdoch
>>
>>> 333333333333333333
>>> 333333333333333333333333333
>>> 33333333333333333333333333333333333333333333
>>> 333333333333333333333333333333333333333333333333333
>>> 333333333333333333333333333333333333333333333333333333333333
>>> 3333333333333333333333333333333333333333333333333333333333333333333
>>> 33333333333333333333333333333333333333333333333333333333333333333333333
>>>
>>> platform       i386-pc-mingw32
>>> arch           i386
>>> os             mingw32
>>> system         i386, mingw32
>>> status
>>> major          2
>>> minor          3.1
>>> year           2006
>>> month          06
>>> day            01
>>> svn rev        38247
>>> language       R
>>> version.string Version 2.3.1 (2006-06-01)
>>> *************************************
>>> the same does happen under linux (SUSE 10.0), details follow
>>>
>>> platform x86_64-unknown-linux-gnu
>>> arch     x86_64
>>> os       linux-gnu
>>> system   x86_64, linux-gnu
>>> status
>>> major    2
>>> minor    2.1
>>> year     2005
>>> month    12
>>> day      20
>>> svn rev  36812
>>> language R
>>>
>>>
>>> Regards,
>>>
>>> Simone
>>>
>>>
>>> ______________________________________________________
>>>
>>> Simone Giannerini
>>> Dipartimento di Scienze Statistiche "Paolo Fortunati"
>>> Universita' di Bologna
>>> Via delle belle arti 41 - 40126  Bologna,  ITALY
>>> Tel: +39 051 2098248  Fax: +39 051 232153
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
> 
>


From h.wickham at gmail.com  Mon Jun 12 13:20:30 2006
From: h.wickham at gmail.com (hadley wickham)
Date: Mon, 12 Jun 2006 13:20:30 +0200
Subject: [Rd] Making a windows packages with zip
In-Reply-To: <448D3BF7.9040608@statistik.uni-dortmund.de>
References: <f8e6ff050606120256v89f05f3q4e55939b41b3bcd9@mail.gmail.com>
	<448D3BF7.9040608@statistik.uni-dortmund.de>
Message-ID: <f8e6ff050606120420s666d6650h59f5f459c905ade6@mail.gmail.com>

>
> Either the latter or ask the Windows users to install the source package.
>

Installing a source package doesn't seem to help:

> install.packages("classifly", repos="http://ggobi.org/r/", type="source")
Warning message:
installation of package 'classifly' had non-zero exit status in:
install.packages("classifly", repos = "http://ggobi.org/r/",

(Unfortunately I don't have access to a windows machine at present -
this is what a user reported)

Hadley


From zph at herald.ox.ac.uk  Mon Jun 12 15:11:59 2006
From: zph at herald.ox.ac.uk (zph at herald.ox.ac.uk)
Date: Mon, 12 Jun 2006 15:11:59 +0200 (CEST)
Subject: [Rd] Ruuid had non-zero exit status (PR#8965)
Message-ID: <20060612131159.960A64C89E@slim.kubism.ku.dk>

> source("http://www.bioconductor.org/biocLite.R")
> biocLite(c("Ruuid"))
Running getBioC version 0.1.6 with R version 2.3.1
Running biocinstall version 1.8.4 with R version 2.3.1
Your version of R requires version 1.8 of Bioconductor.
trying URL 
'http://bioconductor.org/packages/1.8/bioc/src/contrib/Ruuid_1.10.0.tar.gz'
Content type 'application/x-gzip' length 72767 bytes
opened URL
==================================================
downloaded 71Kb

* Installing *source* package 'Ruuid' ...
checking for pkg-config... /usr/local/bin/pkg-config
checking for glib-config... /usr/local/bin/glib-config
checking for glib-2.0... yes
checking PKG_CFLAGS... -I/usr/local/include/glib-2.0 
-I/usr/local/lib/glib-2.0/include
checking PKG_LIBS... -L/usr/local/lib -lglib-2.0 -liconv
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking how to run the C preprocessor... gcc -E
checking for egrep... grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... no
checking for unistd.h... yes
checking /usr/include/unistd.h usability... yes
checking /usr/include/unistd.h presence... yes
checking for /usr/include/unistd.h... yes
configure: creating ./config.status
config.status: creating src/Makevars
** libs
gcc -I/package/R/2.3.1/lib/R/include -I/package/R/2.3.1/lib/R/include 
-I/usr/local/include  -I/ usr/local/include/glib-2.0 
-I/usr/local/lib/glib-2.0/include   -DHAVE_UNISTD_H=1 -fPIC  -O2 -D_F 
ILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -c Rinit.c -o Rinit.o
In file included from /usr/local/include/glib-2.0/glib/galloca.h:30,
                  from /usr/local/include/glib-2.0/glib.h:30,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gtypes.h:41: error: syntax error before 
"typedef"
In file included from /usr/local/include/glib-2.0/glib.h:31,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/garray.h:32: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/garray.h:34: error: syntax error before 
"typedef"
In file included from /usr/local/include/glib-2.0/glib/gerror.h:24,
                  from /usr/local/include/glib-2.0/glib/gthread.h:30,
                  from /usr/local/include/glib-2.0/glib/gasyncqueue.h:30,
                  from /usr/local/include/glib-2.0/glib.h:32,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gquark.h:32: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gquark.h:34: error: syntax error before 
"typedef"
/usr/local/include/glib-2.0/glib/gquark.h:41: error: syntax error before 
"gchar"
/usr/local/include/glib-2.0/glib/gquark.h:41: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gquark.h:41: warning: data definition has 
no type or storage cl ass
In file included from /usr/local/include/glib-2.0/glib/gthread.h:30,
                  from /usr/local/include/glib-2.0/glib/gasyncqueue.h:30,
                  from /usr/local/include/glib-2.0/glib.h:32,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gerror.h:26: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gerror.h:28: error: syntax error before 
"typedef"
/usr/local/include/glib-2.0/glib/gerror.h:40: error: parse error before 
"G_GNUC_PRINTF"
/usr/local/include/glib-2.0/glib/gerror.h:40: warning: data definition has 
no type or storage cl ass
/usr/local/include/glib-2.0/glib/gerror.h:60: error: parse error before 
"G_GNUC_PRINTF"
/usr/local/include/glib-2.0/glib/gerror.h:60: warning: data definition has 
no type or storage cl ass
In file included from /usr/local/include/glib-2.0/glib/gthread.h:32,
                  from /usr/local/include/glib-2.0/glib/gasyncqueue.h:30,
                  from /usr/local/include/glib-2.0/glib.h:32,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gatomic.h:35: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gatomic.h:37: error: syntax error before 
"gint"
In file included from /usr/local/include/glib-2.0/glib/gasyncqueue.h:30,
                  from /usr/local/include/glib-2.0/glib.h:32,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gthread.h:34: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gthread.h:39: error: syntax error before 
"extern"
/usr/local/include/glib-2.0/glib/gthread.h:255: error: parse error before 
"GSystemThread"
/usr/local/include/glib-2.0/glib/gthread.h:255: warning: no semicolon at 
end of struct or union
In file included from /usr/local/include/glib-2.0/glib.h:32,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gasyncqueue.h:32: error: parse error 
before "G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gasyncqueue.h:34: error: syntax error 
before "typedef"
In file included from /usr/local/include/glib-2.0/glib.h:34,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gbacktrace.h:32: error: parse error 
before "G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gbacktrace.h:43: error: syntax error 
before "void"
In file included from /usr/local/include/glib-2.0/glib/glist.h:30,
                  from /usr/local/include/glib-2.0/glib/gcache.h:30,
                  from /usr/local/include/glib-2.0/glib.h:35,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gmem.h:32: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gmem.h:34: error: syntax error before 
"typedef"
/usr/local/include/glib-2.0/glib/gmem.h:48: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gmem.h:48: warning: data definition has 
no type or storage clas s
/usr/local/include/glib-2.0/glib/gmem.h:49: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gmem.h:49: warning: data definition has 
no type or storage clas s
/usr/local/include/glib-2.0/glib/gmem.h:53: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gmem.h:53: warning: data definition has 
no type or storage clas s
/usr/local/include/glib-2.0/glib/gmem.h:74: error: parse error before 
"n_bytes"
/usr/local/include/glib-2.0/glib/gmem.h:76: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gmem.h:79: error: parse error before 
"n_blocks"
/usr/local/include/glib-2.0/glib/gmem.h:81: error: parse error before 
"n_bytes"
/usr/local/include/glib-2.0/glib/gmem.h:83: error: parse error before 
"gsize"
In file included from /usr/local/include/glib-2.0/glib/gcache.h:30,
                  from /usr/local/include/glib-2.0/glib.h:35,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/glist.h:32: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/glist.h:34: error: syntax error before 
"typedef"
In file included from /usr/local/include/glib-2.0/glib.h:35,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gcache.h:32: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gcache.h:34: error: syntax error before 
"typedef"
In file included from /usr/local/include/glib-2.0/glib.h:36,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gcompletion.h:32: error: parse error 
before "G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gcompletion.h:34: error: syntax error 
before "typedef"
/usr/local/include/glib-2.0/glib/gcompletion.h:43: error: parse error 
before "gsize"
In file included from /usr/local/include/glib-2.0/glib.h:37,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gconvert.h:33: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gconvert.h:35: error: syntax error before 
"typedef"
/usr/local/include/glib-2.0/glib/gconvert.h:56: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gconvert.h:63: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gconvert.h:68: warning: data definition 
has no type or storage class
/usr/local/include/glib-2.0/glib/gconvert.h:70: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gconvert.h:74: warning: data definition 
has no type or storage class
/usr/local/include/glib-2.0/glib/gconvert.h:76: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gconvert.h:82: warning: data definition 
has no type or storage class
/usr/local/include/glib-2.0/glib/gconvert.h:88: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gconvert.h:91: warning: data definition 
has no type or storage class
/usr/local/include/glib-2.0/glib/gconvert.h:93: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gconvert.h:96: warning: data definition 
has no type or storage class
/usr/local/include/glib-2.0/glib/gconvert.h:109: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gconvert.h:112: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gconvert.h:114: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gconvert.h:117: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gconvert.h:121: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gconvert.h:121: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gconvert.h:125: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gconvert.h:125: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gconvert.h:126: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gconvert.h:126: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gconvert.h:127: error: parse error before 
"gchar"
/usr/local/include/glib-2.0/glib/gconvert.h:129: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gconvert.h:129: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gconvert.h:131: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gconvert.h:131: warning: data definition 
has no type or storage  class
In file included from /usr/local/include/glib-2.0/glib.h:38,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gdataset.h:32: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gdataset.h:34: error: syntax error before 
"typedef"
In file included from /usr/local/include/glib-2.0/glib.h:39,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gdate.h:32: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gdate.h:43: error: syntax error before 
"typedef"
/usr/local/include/glib-2.0/glib/gdate.h:130: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gdate.h:130: warning: data definition has 
no type or storage cl ass
/usr/local/include/glib-2.0/glib/gdate.h:131: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gdate.h:131: warning: data definition has 
no type or storage cl ass
/usr/local/include/glib-2.0/glib/gdate.h:132: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gdate.h:132: warning: data definition has 
no type or storage cl ass
/usr/local/include/glib-2.0/glib/gdate.h:133: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gdate.h:133: warning: data definition has 
no type or storage cl ass
/usr/local/include/glib-2.0/glib/gdate.h:134: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gdate.h:134: warning: data definition has 
no type or storage cl ass
/usr/local/include/glib-2.0/glib/gdate.h:137: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gdate.h:137: warning: data definition has 
no type or storage cl ass
/usr/local/include/glib-2.0/glib/gdate.h:202: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gdate.h:202: warning: data definition has 
no type or storage cl ass
/usr/local/include/glib-2.0/glib/gdate.h:204: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gdate.h:204: warning: data definition has 
no type or storage cl ass
/usr/local/include/glib-2.0/glib/gdate.h:205: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gdate.h:205: warning: data definition has 
no type or storage cl ass
/usr/local/include/glib-2.0/glib/gdate.h:206: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gdate.h:206: warning: data definition has 
no type or storage cl ass
/usr/local/include/glib-2.0/glib/gdate.h:229: error: parse error before 
"g_date_strftime"
/usr/local/include/glib-2.0/glib/gdate.h:230: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gdate.h:232: warning: data definition has 
no type or storage cl ass
In file included from /usr/local/include/glib-2.0/glib.h:40,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gdir.h:28: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gdir.h:30: error: syntax error before 
"typedef"
/usr/local/include/glib-2.0/glib/gdir.h:41: error: syntax error before 
"gchar"
In file included from /usr/local/include/glib-2.0/glib.h:42,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gfileutils.h:26: error: parse error 
before "G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gfileutils.h:30: error: syntax error 
before "typedef"
/usr/local/include/glib-2.0/glib/gfileutils.h:87: error: parse error 
before "gsize"
In file included from /usr/local/include/glib-2.0/glib.h:43,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/ghash.h:32: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/ghash.h:34: error: syntax error before 
"typedef"
/usr/local/include/glib-2.0/glib/ghash.h:104: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/ghash.h:104: warning: data definition has 
no type or storage cl ass
/usr/local/include/glib-2.0/glib/ghash.h:106: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/ghash.h:106: warning: data definition has 
no type or storage cl ass
In file included from /usr/local/include/glib-2.0/glib.h:44,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/ghook.h:32: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/ghook.h:36: error: syntax error before 
"typedef"
In file included from /usr/local/include/glib-2.0/glib/gmain.h:23,
                  from /usr/local/include/glib-2.0/glib/giochannel.h:31,
                  from /usr/local/include/glib-2.0/glib.h:45,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gslist.h:32: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gslist.h:34: error: syntax error before 
"typedef"
In file included from /usr/local/include/glib-2.0/glib/giochannel.h:31,
                  from /usr/local/include/glib-2.0/glib.h:45,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gmain.h:26: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gmain.h:28: error: syntax error before 
"typedef"
/usr/local/include/glib-2.0/glib/gmain.h:35: error: parse error before 
"pid"
/usr/local/include/glib-2.0/glib/gmain.h:251: error: parse error before 
"pid"
/usr/local/include/glib-2.0/glib/gmain.h:296: error: parse error before 
"GPid"
/usr/local/include/glib-2.0/glib/gmain.h:300: error: parse error before 
"pid"
In file included from /usr/local/include/glib-2.0/glib/gstring.h:31,
                  from /usr/local/include/glib-2.0/glib/giochannel.h:32,
                  from /usr/local/include/glib-2.0/glib.h:45,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gunicode.h:28: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gunicode.h:30: error: syntax error before 
"typedef"
/usr/local/include/glib-2.0/glib/gunicode.h:114: error: parse error before 
"char"
/usr/local/include/glib-2.0/glib/gunicode.h:118: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:118: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:119: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:119: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:120: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:120: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:121: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:121: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:122: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:122: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:123: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:123: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:124: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:124: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:125: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:125: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:126: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:126: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:127: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:127: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:128: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:128: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:129: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:129: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:130: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:130: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:131: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:131: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:135: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:135: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:136: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:136: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:137: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:137: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:141: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:141: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:143: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:143: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:146: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:146: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:149: error: parse error before 
"G_GNUC_CONST"
/usr/local/include/glib-2.0/glib/gunicode.h:149: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:156: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gunicode.h:162: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gunicode.h:162: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:172: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gunicode.h:185: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gunicode.h:190: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gunicode.h:195: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gunicode.h:198: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gunicode.h:201: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gunicode.h:207: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gunicode.h:207: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:212: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gunicode.h:212: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:215: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gunicode.h:215: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:220: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gunicode.h:220: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:225: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gunicode.h:225: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:230: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gunicode.h:230: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:235: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gunicode.h:235: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:249: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gunicode.h:256: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gunicode.h:256: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:258: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gunicode.h:258: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:260: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gunicode.h:260: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:274: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gunicode.h:275: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gunicode.h:280: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gunicode.h:280: warning: data definition 
has no type or storage  class
In file included from /usr/local/include/glib-2.0/glib/gstring.h:32,
                  from /usr/local/include/glib-2.0/glib/giochannel.h:32,
                  from /usr/local/include/glib-2.0/glib.h:45,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gutils.h:33: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gutils.h:114: error: syntax error before 
"gchar"
/usr/local/include/glib-2.0/glib/gutils.h:115: error: syntax error before 
"gchar"
/usr/local/include/glib-2.0/glib/gutils.h:116: error: syntax error before 
"gchar"
/usr/local/include/glib-2.0/glib/gutils.h:117: error: syntax error before 
"gchar"
/usr/local/include/glib-2.0/glib/gutils.h:120: error: syntax error before 
"gchar"
/usr/local/include/glib-2.0/glib/gutils.h:123: error: syntax error before 
"gchar"
/usr/local/include/glib-2.0/glib/gutils.h:124: error: syntax error before 
"gchar"
/usr/local/include/glib-2.0/glib/gutils.h:125: error: syntax error before 
"gchar"
/usr/local/include/glib-2.0/glib/gutils.h:126: error: syntax error before 
"gchar"
/usr/local/include/glib-2.0/glib/gutils.h:126: error: parse error before 
'*' token
/usr/local/include/glib-2.0/glib/gutils.h:126: warning: data definition 
has no type or storage c lass
/usr/local/include/glib-2.0/glib/gutils.h:127: error: syntax error before 
"gchar"
/usr/local/include/glib-2.0/glib/gutils.h:127: error: parse error before 
'*' token
/usr/local/include/glib-2.0/glib/gutils.h:127: warning: data definition 
has no type or storage c lass
/usr/local/include/glib-2.0/glib/gutils.h:129: error: syntax error before 
"gchar"
/usr/local/include/glib-2.0/glib/gutils.h:129: error: parse error before 
'*' token
/usr/local/include/glib-2.0/glib/gutils.h:129: warning: data definition 
has no type or storage c lass
/usr/local/include/glib-2.0/glib/gutils.h:147: error: parse error before 
"G_GNUC_PRINTF"
/usr/local/include/glib-2.0/glib/gutils.h:147: warning: data definition 
has no type or storage c lass
/usr/local/include/glib-2.0/glib/gutils.h:157: error: syntax error before 
"gchar"
/usr/local/include/glib-2.0/glib/gutils.h:165: error: syntax error before 
"gchar"
/usr/local/include/glib-2.0/glib/gutils.h:176: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gutils.h:176: warning: data definition 
has no type or storage c lass
/usr/local/include/glib-2.0/glib/gutils.h:177: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gutils.h:177: warning: data definition 
has no type or storage c lass
/usr/local/include/glib-2.0/glib/gutils.h:191: error: syntax error before 
"gchar"
In file included from /usr/local/include/glib-2.0/glib/giochannel.h:32,
                  from /usr/local/include/glib-2.0/glib.h:45,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gstring.h:34: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gstring.h:36: error: syntax error before 
"typedef"
/usr/local/include/glib-2.0/glib/gstring.h:42: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gstring.h:42: warning: no semicolon at 
end of struct or union
/usr/local/include/glib-2.0/glib/gstring.h:43: warning: data definition 
has no type or storage c lass
/usr/local/include/glib-2.0/glib/gstring.h:48: error: parse error before 
"size"
/usr/local/include/glib-2.0/glib/gstring.h:54: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gstring.h:63: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gstring.h:64: error: parse error before 
"dfl_size"
/usr/local/include/glib-2.0/glib/gstring.h:73: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gstring.h:75: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gstring.h:77: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gstring.h:84: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gstring.h:97: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gstring.h:99: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gstring.h:102: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gstring.h:105: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gstring.h:108: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gstring.h:114: error: parse error before 
"G_GNUC_PRINTF"
/usr/local/include/glib-2.0/glib/gstring.h:114: warning: data definition 
has no type or storage class
/usr/local/include/glib-2.0/glib/gstring.h:117: error: parse error before 
"G_GNUC_PRINTF"
/usr/local/include/glib-2.0/glib/gstring.h:117: warning: data definition 
has no type or storage class
In file included from /usr/local/include/glib-2.0/glib.h:45,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/giochannel.h:34: error: parse error 
before "G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/giochannel.h:39: error: syntax error 
before "typedef"
/usr/local/include/glib-2.0/glib/giochannel.h:116: error: parse error 
before "gsize"
/usr/local/include/glib-2.0/glib/giochannel.h:116: warning: no semicolon 
at end of struct or uni on
/usr/local/include/glib-2.0/glib/giochannel.h:124: error: parse error 
before ':' token
/usr/local/include/glib-2.0/glib/giochannel.h:125: error: parse error 
before ':' token
/usr/local/include/glib-2.0/glib/giochannel.h:126: error: parse error 
before ':' token
/usr/local/include/glib-2.0/glib/giochannel.h:127: error: parse error 
before ':' token
/usr/local/include/glib-2.0/glib/giochannel.h:128: error: parse error 
before ':' token
/usr/local/include/glib-2.0/glib/giochannel.h:129: error: parse error 
before ':' token
/usr/local/include/glib-2.0/glib/giochannel.h:133: error: parse error 
before '}' token
/usr/local/include/glib-2.0/glib/giochannel.h:142: error: parse error 
before "gsize"
/usr/local/include/glib-2.0/glib/giochannel.h:147: error: parse error 
before "gsize"
/usr/local/include/glib-2.0/glib/giochannel.h:172: error: parse error 
before "gsize"
/usr/local/include/glib-2.0/glib/giochannel.h:176: error: parse error 
before "gsize"
/usr/local/include/glib-2.0/glib/giochannel.h:204: error: parse error 
before "gsize"
/usr/local/include/glib-2.0/glib/giochannel.h:205: error: parse error 
before "g_io_channel_get_b uffer_size"
/usr/local/include/glib-2.0/glib/giochannel.h:205: warning: data 
definition has no type or stora ge class
/usr/local/include/glib-2.0/glib/giochannel.h:214: error: syntax error 
before "gchar"
/usr/local/include/glib-2.0/glib/giochannel.h:222: error: syntax error 
before "gchar"
/usr/local/include/glib-2.0/glib/giochannel.h:232: error: parse error 
before "gsize"
/usr/local/include/glib-2.0/glib/giochannel.h:237: error: parse error 
before "gsize"
/usr/local/include/glib-2.0/glib/giochannel.h:241: error: parse error 
before "gsize"
/usr/local/include/glib-2.0/glib/giochannel.h:245: error: parse error 
before "gsize"
/usr/local/include/glib-2.0/glib/giochannel.h:253: error: parse error 
before "gssize"
In file included from /usr/local/include/glib-2.0/glib.h:46,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gkeyfile.h:28: error: parse error before 
"G_BEGIN_DECLS"
/usr/local/include/glib-2.0/glib/gkeyfile.h:30: error: syntax error before 
"typedef"
/usr/local/include/glib-2.0/glib/gkeyfile.h:63: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gkeyfile.h:72: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gkeyfile.h:73: warning: data definition 
has no type or storage class
/usr/local/include/glib-2.0/glib/gkeyfile.h:74: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gkeyfile.h:74: warning: data definition 
has no type or storage class
/usr/local/include/glib-2.0/glib/gkeyfile.h:76: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gkeyfile.h:76: warning: data definition 
has no type or storage class
/usr/local/include/glib-2.0/glib/gkeyfile.h:79: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gkeyfile.h:80: warning: data definition 
has no type or storage class
/usr/local/include/glib-2.0/glib/gkeyfile.h:90: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gkeyfile.h:90: warning: data definition 
has no type or storage class
/usr/local/include/glib-2.0/glib/gkeyfile.h:98: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gkeyfile.h:98: warning: data definition 
has no type or storage class
/usr/local/include/glib-2.0/glib/gkeyfile.h:107: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gkeyfile.h:107: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gkeyfile.h:132: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gkeyfile.h:133: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gkeyfile.h:138: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gkeyfile.h:143: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gkeyfile.h:144: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gkeyfile.h:150: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gkeyfile.h:154: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gkeyfile.h:155: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gkeyfile.h:160: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gkeyfile.h:164: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gkeyfile.h:165: warning: data definition 
has no type or storage  class
/usr/local/include/glib-2.0/glib/gkeyfile.h:170: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gkeyfile.h:179: error: parse error before 
"G_GNUC_MALLOC"
/usr/local/include/glib-2.0/glib/gkeyfile.h:179: warning: data definition 
has no type or storage  class
In file included from /usr/local/include/glib-2.0/glib.h:50,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gmarkup.h:30: error: syntax error before 
"typedef"
/usr/local/include/glib-2.0/glib/gmarkup.h:77: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gmarkup.h:88: error: parse error before 
"gsize"
/usr/local/include/glib-2.0/glib/gmarkup.h:107: error: parse error before 
"gssize"
/usr/local/include/glib-2.0/glib/gmarkup.h:121: error: parse error before 
"gssize"
In file included from /usr/local/include/glib-2.0/glib.h:52,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gmessages.h:44: error: parse error before 
"g_printf_string_uppe r_bound"
/usr/local/include/glib-2.0/glib/gmessages.h:109: error: parse error 
before "G_GNUC_INTERNAL"
In file included from /usr/local/include/glib-2.0/glib.h:57,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gqsort.h:37: error: parse error before 
"gsize"
In file included from /usr/local/include/glib-2.0/glib.h:65,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gspawn.h:80: error: parse error before 
"GPid"
/usr/local/include/glib-2.0/glib/gspawn.h:93: error: parse error before 
"GPid"
/usr/local/include/glib-2.0/glib/gspawn.h:123: error: parse error before 
"pid"
In file included from /usr/local/include/glib-2.0/glib.h:66,
                  from uuidP.h:33,
                  from Ruuid.h:5,
                  from Rinit.c:1:
/usr/local/include/glib-2.0/glib/gstrfuncs.h:104: error: parse error 
before "g_strlcpy"
/usr/local/include/glib-2.0/glib/gstrfuncs.h:106: error: parse error 
before "gsize"
/usr/local/include/glib-2.0/glib/gstrfuncs.h:106: warning: data definition 
has no type or storag e class
/usr/local/include/glib-2.0/glib/gstrfuncs.h:107: error: parse error 
before "g_strlcat"
/usr/local/include/glib-2.0/glib/gstrfuncs.h:109: error: parse error 
before "gsize"
/usr/local/include/glib-2.0/glib/gstrfuncs.h:109: warning: data definition 
has no type or storag e class
/usr/local/include/glib-2.0/glib/gstrfuncs.h:111: error: parse error 
before "gssize"
/usr/local/include/glib-2.0/glib/gstrfuncs.h:116: error: parse error 
before "gssize"
/usr/local/include/glib-2.0/glib/gstrfuncs.h:156: error: parse error 
before "gsize"
/usr/local/include/glib-2.0/glib/gstrfuncs.h:158: error: parse error 
before "gssize"
/usr/local/include/glib-2.0/glib/gstrfuncs.h:160: error: parse error 
before "gssize"
/usr/local/include/glib-2.0/glib/gstrfuncs.h:188: error: parse error 
before "gsize"
/usr/local/include/glib-2.0/glib/gstrfuncs.h:189: error: parse error 
before "length"
make: *** [Rinit.o] Error 1
chmod: failed to get attributes of 
`/package/R/2.3.1/lib/R/library/Ruuid/libs/*': No such file o r directory
ERROR: compilation failed for package 'Ruuid'
** Removing '/package/R/2.3.1/lib/R/library/Ruuid'
** Restoring previous '/package/R/2.3.1/lib/R/library/Ruuid'

The downloaded packages are in
         /databank/temp/RtmptvZa7V/downloaded_packages
Warning message:
installation of package 'Ruuid' had non-zero exit status in: 
install.packages(pkgs = pkgs, repos  = repos, dependencies = dependencies,
>

--please do not edit the information below--

Version:
  platform = sparc-sun-solaris2.9
  arch = sparc
  os = solaris2.9
  system = sparc, solaris2.9
  status =
  major = 2
  minor = 3.1
  year = 2006
  month = 06
  day = 01
  svn rev = 38247
  language = R
  version.string = Version 2.3.1 (2006-06-01)

Locale:
C

Search Path:
  .GlobalEnv, package:methods, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, Autoloads, package:base


From manager at molbiol.ox.ac.uk  Mon Jun 12 15:36:37 2006
From: manager at molbiol.ox.ac.uk (manager at molbiol.ox.ac.uk)
Date: Mon, 12 Jun 2006 15:36:37 +0200 (CEST)
Subject: [Rd] Ruuid had non-zero exit status (PR#8966)
Message-ID: <20060612133637.75A704C68B@slim.kubism.ku.dk>


<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.9
 arch = sparc
 os = solaris2.9
 system = sparc, solaris2.9
 status = 
 major = 2
 minor = 3.1
 year = 2006
 month = 06
 day = 01
 svn rev = 38247
 language = R
 version.string = Version 2.3.1 (2006-06-01)

Locale:
C

Search Path:
 .GlobalEnv, package:methods, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, Autoloads, package:base


From lu_zero at gentoo.org  Mon Jun 12 15:41:25 2006
From: lu_zero at gentoo.org (lu_zero at gentoo.org)
Date: Mon, 12 Jun 2006 15:41:25 +0200 (CEST)
Subject: [Rd] Link error with glibc-2.4 on linux/PPC (PR#8967)
Message-ID: <20060612134125.3E5EF4BE6D@slim.kubism.ku.dk>

Full_Name: Luca Barbato
Version: 2.3.1
OS: Gentoo Linux/PPC
Submission from: (NULL) (151.44.163.144)


system informations

Portage 2.1 (default-linux/ppc/ppc32/2006.0/G4, gcc-4.1.1, glibc-2.4-r3,
2.6.17-rc5 ppc)
=================================================================
System uname: 2.6.17-rc5 ppc 7447A, altivec supported
Gentoo Base System version 1.12.1
distcc 2.18.3 powerpc-unknown-linux-gnu (protocols 1 and 2) (default port 3632)
[disabled]
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  0.4.2-r1
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r2
sys-devel/gcc-config: 1.3.13-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r4
ACCEPT_KEYWORDS="ppc ~ppc"
AUTOCLEAN="yes"
CBUILD="powerpc-unknown-linux-gnu"
CFLAGS="-O2 -mcpu=G4 -mtune=G4 -fno-strict-aliasing -pipe -maltivec
-mabi=altivec"
CHOST="powerpc-unknown-linux-gnu"

Fault log

gfortran  -fpic  -g -O2 -c xxxpr.f -o xxxpr.o
powerpc-unknown-linux-gnu-gcc -shared   -o libR.so Rembedded.o CConverters.o
CommandLineArgs.o Rdynload.o Renviron.o RNG.o apply.o arithmetic.o apse.o
array.o attrib.o base.o bind.o builtin.o character.o coerce.o colors.o complex.o
connections.o context.o cov.o cum.o dcf.o datetime.o debug.o deparse.o deriv.o
dotcode.o dounzip.o dstruct.o duplicate.o engine.o envir.o errors.o eval.o
format.o fourier.o gevents.o gram.o gram-ex.o graphics.o identical.o internet.o
iosupport.o lapack.o list.o localecharset.o logic.o main.o mapply.o match.o
memory.o model.o names.o objects.o optim.o optimize.o options.o par.o paste.o
pcre.o platform.o plot.o plot3d.o plotmath.o print.o printarray.o printvector.o
printutils.o qsort.o random.o regex.o registration.o relop.o rlocale.o
saveload.o scan.o seq.o serialize.o size.o sort.o source.o split.o sprintf.o
startup.o subassign.o subscript.o subset.o summary.o sysutils.o unique.o util.o
version.o vfonts.o xxxpr.o   `ls ../appl/*.o ../nmath/*.o ../unix/*.o 
2>/dev/null`  -lgfortran -lm -lgcc_s  ../extra/zlib/libz.a
../extra/bzip2/libbz2.a ../extra/pcre/libpcre.a  -lreadline  -ldl -lm
/usr/lib/gcc/powerpc-unknown-linux-gnu/4.1.1/../../../crti.o: In function
`call_gmon_start':
/var/tmp/portage/glibc-2.4-r3/work/build-default-powerpc-unknown-linux-gnu-nptl/csu/crti.S:18:
relocation truncated to fit: R_PPC_GOT16 against undefined symbol
`__gmon_start__'
CConverters.o: In function `do_setToCConverterActiveStatus':
CConverters.c:(.text+0x522): relocation truncated to fit: R_PPC_GOT16 against
symbol `R_NaInt' defined in .sbss section in main.o
CConverters.c:(.text+0x556): relocation truncated to fit: R_PPC_GOT16 against
symbol `R_FunTab' defined in .data.rel section in names.o
CConverters.o: In function `R_converterMatchClass':
CConverters.c:(.text+0x71a): relocation truncated to fit: R_PPC_GOT16 against
symbol `R_ClassSymbol' defined in .sbss section in main.o
CConverters.c:(.text+0x7f2): relocation truncated to fit: R_PPC_GOT16 against
symbol `R_NilValue' defined in .sbss section in main.o
CommandLineArgs.o: In function `R_common_command_line':
CommandLineArgs.c:(.text+0x5e): relocation truncated to fit: R_PPC_GOT16 against
symbol `R_RestoreHistory' defined in .sbss section in main.o
CommandLineArgs.c:(.text+0x722): relocation truncated to fit: R_PPC_GOT16
against symbol `R_StdinEnc' defined in .data section in main.o
Rdynload.o: In function `GetFullDLLPath':
Rdynload.c:(.text+0x6a): relocation truncated to fit: R_PPC_GOT16 against symbol
`R_osDynSymbol' defined in .sdata section in Rdynload.o
Rdynload.o: In function `Rf_MakeDLLInfo':
Rdynload.c:(.text+0x1c2): relocation truncated to fit: R_PPC_GOT16 against
symbol `R_ClassSymbol' defined in .sbss section in main.o
Rdynload.c:(.text+0x1e6): relocation truncated to fit: R_PPC_GOT16 against
symbol `R_NilValue' defined in .sbss section in main.o
Rdynload.c:(.text+0x3a2): additional relocation overflows omitted from the
output
collect2: ld returned 1 exit status


From nicolas.turenne at jouy.inra.fr  Mon Jun 12 17:02:17 2006
From: nicolas.turenne at jouy.inra.fr (Nicolas Turenne)
Date: Mon, 12 Jun 2006 17:02:17 +0200
Subject: [Rd] about integration of a  library into package creation
Message-ID: <448D81F9.8040406@jouy.inra.fr>

hello,

i try to create a package , and i call a library in the namespace file
such as :  useDynLib(quadprog)

after checking my directory with the command "rcmd check" (i am on 
WindowsXP)
i get an error: package / namespace load failed
the path of the library is:     D:\R\library\quadprog
the path of the  building files is:   D:\RBuild\svcR
and the comand i use to compile is:  rcmd check D://RBuild//svcR

i dont understand, it is a path problem about the dll related to the 
library ?

thank for help
Nicolas


* checking package subdirectories ... WARNING
Subdirectory 'src' contains no source files.
* checking R files for syntax errors ... OK
* checking R files for library.dynam ... OK
* checking S3 generic/method consistency ... WARNING
Erreur : le chargement du package / espace de noms a echoue' pour 'svcR'
Sequence d'appel :
2: stop(gettextf("package/namespace load failed for '%s'", 
libraryPkgName(packag
e)),
       call. = FALSE, domain = NA)
1: library(package, lib.loc = lib.loc, character.only = TRUE, verbose = 
FALSE)
Execution arrete'e
See section 'Generic functions and methods' of the 'Writing R Extensions'
manual.
* checking replacement functions ... WARNING
Erreur : le chargement du package / espace de noms a echoue' pour 'svcR'
Sequence d'appel :
2: stop(gettextf("package/namespace load failed for '%s'", 
libraryPkgName(packag
e)),


From murdoch at stats.uwo.ca  Mon Jun 12 17:20:47 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 12 Jun 2006 11:20:47 -0400
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448D81F9.8040406@jouy.inra.fr>
References: <448D81F9.8040406@jouy.inra.fr>
Message-ID: <448D864F.2070704@stats.uwo.ca>

On 6/12/2006 11:02 AM, Nicolas Turenne wrote:
> hello,
> 
> i try to create a package , and i call a library in the namespace file
> such as :  useDynLib(quadprog)
> 
> after checking my directory with the command "rcmd check" (i am on 
> WindowsXP)
> i get an error: package / namespace load failed
> the path of the library is:     D:\R\library\quadprog
> the path of the  building files is:   D:\RBuild\svcR
> and the comand i use to compile is:  rcmd check D://RBuild//svcR
> 
> i dont understand, it is a path problem about the dll related to the 
> library ?

You didn't show the results of installing your package.  Did that work?

Generally we advise to do a successful install before you try to run checks.

Duncan Murdoch

> 
> thank for help
> Nicolas
> 
> 
> * checking package subdirectories ... WARNING
> Subdirectory 'src' contains no source files.
> * checking R files for syntax errors ... OK
> * checking R files for library.dynam ... OK
> * checking S3 generic/method consistency ... WARNING
> Erreur : le chargement du package / espace de noms a echoue' pour 'svcR'
> Sequence d'appel :
> 2: stop(gettextf("package/namespace load failed for '%s'", 
> libraryPkgName(packag
> e)),
>        call. = FALSE, domain = NA)
> 1: library(package, lib.loc = lib.loc, character.only = TRUE, verbose = 
> FALSE)
> Execution arrete'e
> See section 'Generic functions and methods' of the 'Writing R Extensions'
> manual.
> * checking replacement functions ... WARNING
> Erreur : le chargement du package / espace de noms a echoue' pour 'svcR'
> Sequence d'appel :
> 2: stop(gettextf("package/namespace load failed for '%s'", 
> libraryPkgName(packag
> e)),
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ligges at statistik.uni-dortmund.de  Mon Jun 12 17:25:38 2006
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 12 Jun 2006 17:25:38 +0200
Subject: [Rd] Making a windows packages with zip
In-Reply-To: <f8e6ff050606120420s666d6650h59f5f459c905ade6@mail.gmail.com>
References: <f8e6ff050606120256v89f05f3q4e55939b41b3bcd9@mail.gmail.com>	
	<448D3BF7.9040608@statistik.uni-dortmund.de>
	<f8e6ff050606120420s666d6650h59f5f459c905ade6@mail.gmail.com>
Message-ID: <448D8772.8030709@statistik.uni-dortmund.de>

hadley wickham wrote:
>>
>> Either the latter or ask the Windows users to install the source package.
>>
> 
> Installing a source package doesn't seem to help:
> 
>> install.packages("classifly", repos="http://ggobi.org/r/", type="source")
> Warning message:
> installation of package 'classifly' had non-zero exit status in:
> install.packages("classifly", repos = "http://ggobi.org/r/",
> 
> (Unfortunately I don't have access to a windows machine at present -
> this is what a user reported)


Oh well, certainly the user forgot to install the required tools as 
mentioned in the "R Installation and Administration" manual.

Uwe Ligges


> Hadley


From tlumley at u.washington.edu  Mon Jun 12 17:39:15 2006
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 12 Jun 2006 08:39:15 -0700 (PDT)
Subject: [Rd] Ruuid had non-zero exit status (PR#8965)
In-Reply-To: <20060612131159.960A64C89E@slim.kubism.ku.dk>
References: <20060612131159.960A64C89E@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.64.0606120838530.19806@homer21.u.washington.edu>


Ruuid is a Bioconductor package; please report bugs to Bioconductor as 
they ask.

 	-thomas

On Mon, 12 Jun 2006, zph at herald.ox.ac.uk wrote:

>> source("http://www.bioconductor.org/biocLite.R")
>> biocLite(c("Ruuid"))
> Running getBioC version 0.1.6 with R version 2.3.1
> Running biocinstall version 1.8.4 with R version 2.3.1
> Your version of R requires version 1.8 of Bioconductor.
> trying URL
> 'http://bioconductor.org/packages/1.8/bioc/src/contrib/Ruuid_1.10.0.tar.gz'
> Content type 'application/x-gzip' length 72767 bytes
> opened URL
> ==================================================
> downloaded 71Kb
>
> * Installing *source* package 'Ruuid' ...
> checking for pkg-config... /usr/local/bin/pkg-config
> checking for glib-config... /usr/local/bin/glib-config
> checking for glib-2.0... yes
> checking PKG_CFLAGS... -I/usr/local/include/glib-2.0
> -I/usr/local/lib/glib-2.0/include
> checking PKG_LIBS... -L/usr/local/lib -lglib-2.0 -liconv
> checking for gcc... gcc
> checking for C compiler default output file name... a.out
> checking whether the C compiler works... yes
> checking whether we are cross compiling... no
> checking for suffix of executables...
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc accepts -g... yes
> checking for gcc option to accept ANSI C... none needed
> checking how to run the C preprocessor... gcc -E
> checking for egrep... grep -E
> checking for ANSI C header files... yes
> checking for sys/types.h... yes
> checking for sys/stat.h... yes
> checking for stdlib.h... yes
> checking for string.h... yes
> checking for memory.h... yes
> checking for strings.h... yes
> checking for inttypes.h... yes
> checking for stdint.h... no
> checking for unistd.h... yes
> checking /usr/include/unistd.h usability... yes
> checking /usr/include/unistd.h presence... yes
> checking for /usr/include/unistd.h... yes
> configure: creating ./config.status
> config.status: creating src/Makevars
> ** libs
> gcc -I/package/R/2.3.1/lib/R/include -I/package/R/2.3.1/lib/R/include
> -I/usr/local/include  -I/ usr/local/include/glib-2.0
> -I/usr/local/lib/glib-2.0/include   -DHAVE_UNISTD_H=1 -fPIC  -O2 -D_F
> ILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -c Rinit.c -o Rinit.o
> In file included from /usr/local/include/glib-2.0/glib/galloca.h:30,
>                  from /usr/local/include/glib-2.0/glib.h:30,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gtypes.h:41: error: syntax error before
> "typedef"
> In file included from /usr/local/include/glib-2.0/glib.h:31,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/garray.h:32: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/garray.h:34: error: syntax error before
> "typedef"
> In file included from /usr/local/include/glib-2.0/glib/gerror.h:24,
>                  from /usr/local/include/glib-2.0/glib/gthread.h:30,
>                  from /usr/local/include/glib-2.0/glib/gasyncqueue.h:30,
>                  from /usr/local/include/glib-2.0/glib.h:32,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gquark.h:32: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gquark.h:34: error: syntax error before
> "typedef"
> /usr/local/include/glib-2.0/glib/gquark.h:41: error: syntax error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gquark.h:41: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gquark.h:41: warning: data definition has
> no type or storage cl ass
> In file included from /usr/local/include/glib-2.0/glib/gthread.h:30,
>                  from /usr/local/include/glib-2.0/glib/gasyncqueue.h:30,
>                  from /usr/local/include/glib-2.0/glib.h:32,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gerror.h:26: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gerror.h:28: error: syntax error before
> "typedef"
> /usr/local/include/glib-2.0/glib/gerror.h:40: error: parse error before
> "G_GNUC_PRINTF"
> /usr/local/include/glib-2.0/glib/gerror.h:40: warning: data definition has
> no type or storage cl ass
> /usr/local/include/glib-2.0/glib/gerror.h:60: error: parse error before
> "G_GNUC_PRINTF"
> /usr/local/include/glib-2.0/glib/gerror.h:60: warning: data definition has
> no type or storage cl ass
> In file included from /usr/local/include/glib-2.0/glib/gthread.h:32,
>                  from /usr/local/include/glib-2.0/glib/gasyncqueue.h:30,
>                  from /usr/local/include/glib-2.0/glib.h:32,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gatomic.h:35: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gatomic.h:37: error: syntax error before
> "gint"
> In file included from /usr/local/include/glib-2.0/glib/gasyncqueue.h:30,
>                  from /usr/local/include/glib-2.0/glib.h:32,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gthread.h:34: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gthread.h:39: error: syntax error before
> "extern"
> /usr/local/include/glib-2.0/glib/gthread.h:255: error: parse error before
> "GSystemThread"
> /usr/local/include/glib-2.0/glib/gthread.h:255: warning: no semicolon at
> end of struct or union
> In file included from /usr/local/include/glib-2.0/glib.h:32,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gasyncqueue.h:32: error: parse error
> before "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gasyncqueue.h:34: error: syntax error
> before "typedef"
> In file included from /usr/local/include/glib-2.0/glib.h:34,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gbacktrace.h:32: error: parse error
> before "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gbacktrace.h:43: error: syntax error
> before "void"
> In file included from /usr/local/include/glib-2.0/glib/glist.h:30,
>                  from /usr/local/include/glib-2.0/glib/gcache.h:30,
>                  from /usr/local/include/glib-2.0/glib.h:35,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gmem.h:32: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gmem.h:34: error: syntax error before
> "typedef"
> /usr/local/include/glib-2.0/glib/gmem.h:48: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gmem.h:48: warning: data definition has
> no type or storage clas s
> /usr/local/include/glib-2.0/glib/gmem.h:49: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gmem.h:49: warning: data definition has
> no type or storage clas s
> /usr/local/include/glib-2.0/glib/gmem.h:53: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gmem.h:53: warning: data definition has
> no type or storage clas s
> /usr/local/include/glib-2.0/glib/gmem.h:74: error: parse error before
> "n_bytes"
> /usr/local/include/glib-2.0/glib/gmem.h:76: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gmem.h:79: error: parse error before
> "n_blocks"
> /usr/local/include/glib-2.0/glib/gmem.h:81: error: parse error before
> "n_bytes"
> /usr/local/include/glib-2.0/glib/gmem.h:83: error: parse error before
> "gsize"
> In file included from /usr/local/include/glib-2.0/glib/gcache.h:30,
>                  from /usr/local/include/glib-2.0/glib.h:35,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/glist.h:32: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/glist.h:34: error: syntax error before
> "typedef"
> In file included from /usr/local/include/glib-2.0/glib.h:35,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gcache.h:32: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gcache.h:34: error: syntax error before
> "typedef"
> In file included from /usr/local/include/glib-2.0/glib.h:36,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gcompletion.h:32: error: parse error
> before "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gcompletion.h:34: error: syntax error
> before "typedef"
> /usr/local/include/glib-2.0/glib/gcompletion.h:43: error: parse error
> before "gsize"
> In file included from /usr/local/include/glib-2.0/glib.h:37,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gconvert.h:33: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gconvert.h:35: error: syntax error before
> "typedef"
> /usr/local/include/glib-2.0/glib/gconvert.h:56: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gconvert.h:63: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gconvert.h:68: warning: data definition
> has no type or storage class
> /usr/local/include/glib-2.0/glib/gconvert.h:70: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gconvert.h:74: warning: data definition
> has no type or storage class
> /usr/local/include/glib-2.0/glib/gconvert.h:76: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gconvert.h:82: warning: data definition
> has no type or storage class
> /usr/local/include/glib-2.0/glib/gconvert.h:88: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gconvert.h:91: warning: data definition
> has no type or storage class
> /usr/local/include/glib-2.0/glib/gconvert.h:93: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gconvert.h:96: warning: data definition
> has no type or storage class
> /usr/local/include/glib-2.0/glib/gconvert.h:109: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gconvert.h:112: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gconvert.h:114: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gconvert.h:117: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gconvert.h:121: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gconvert.h:121: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gconvert.h:125: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gconvert.h:125: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gconvert.h:126: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gconvert.h:126: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gconvert.h:127: error: parse error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gconvert.h:129: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gconvert.h:129: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gconvert.h:131: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gconvert.h:131: warning: data definition
> has no type or storage  class
> In file included from /usr/local/include/glib-2.0/glib.h:38,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gdataset.h:32: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gdataset.h:34: error: syntax error before
> "typedef"
> In file included from /usr/local/include/glib-2.0/glib.h:39,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gdate.h:32: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gdate.h:43: error: syntax error before
> "typedef"
> /usr/local/include/glib-2.0/glib/gdate.h:130: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gdate.h:130: warning: data definition has
> no type or storage cl ass
> /usr/local/include/glib-2.0/glib/gdate.h:131: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gdate.h:131: warning: data definition has
> no type or storage cl ass
> /usr/local/include/glib-2.0/glib/gdate.h:132: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gdate.h:132: warning: data definition has
> no type or storage cl ass
> /usr/local/include/glib-2.0/glib/gdate.h:133: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gdate.h:133: warning: data definition has
> no type or storage cl ass
> /usr/local/include/glib-2.0/glib/gdate.h:134: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gdate.h:134: warning: data definition has
> no type or storage cl ass
> /usr/local/include/glib-2.0/glib/gdate.h:137: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gdate.h:137: warning: data definition has
> no type or storage cl ass
> /usr/local/include/glib-2.0/glib/gdate.h:202: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gdate.h:202: warning: data definition has
> no type or storage cl ass
> /usr/local/include/glib-2.0/glib/gdate.h:204: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gdate.h:204: warning: data definition has
> no type or storage cl ass
> /usr/local/include/glib-2.0/glib/gdate.h:205: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gdate.h:205: warning: data definition has
> no type or storage cl ass
> /usr/local/include/glib-2.0/glib/gdate.h:206: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gdate.h:206: warning: data definition has
> no type or storage cl ass
> /usr/local/include/glib-2.0/glib/gdate.h:229: error: parse error before
> "g_date_strftime"
> /usr/local/include/glib-2.0/glib/gdate.h:230: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gdate.h:232: warning: data definition has
> no type or storage cl ass
> In file included from /usr/local/include/glib-2.0/glib.h:40,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gdir.h:28: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gdir.h:30: error: syntax error before
> "typedef"
> /usr/local/include/glib-2.0/glib/gdir.h:41: error: syntax error before
> "gchar"
> In file included from /usr/local/include/glib-2.0/glib.h:42,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gfileutils.h:26: error: parse error
> before "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gfileutils.h:30: error: syntax error
> before "typedef"
> /usr/local/include/glib-2.0/glib/gfileutils.h:87: error: parse error
> before "gsize"
> In file included from /usr/local/include/glib-2.0/glib.h:43,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/ghash.h:32: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/ghash.h:34: error: syntax error before
> "typedef"
> /usr/local/include/glib-2.0/glib/ghash.h:104: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/ghash.h:104: warning: data definition has
> no type or storage cl ass
> /usr/local/include/glib-2.0/glib/ghash.h:106: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/ghash.h:106: warning: data definition has
> no type or storage cl ass
> In file included from /usr/local/include/glib-2.0/glib.h:44,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/ghook.h:32: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/ghook.h:36: error: syntax error before
> "typedef"
> In file included from /usr/local/include/glib-2.0/glib/gmain.h:23,
>                  from /usr/local/include/glib-2.0/glib/giochannel.h:31,
>                  from /usr/local/include/glib-2.0/glib.h:45,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gslist.h:32: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gslist.h:34: error: syntax error before
> "typedef"
> In file included from /usr/local/include/glib-2.0/glib/giochannel.h:31,
>                  from /usr/local/include/glib-2.0/glib.h:45,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gmain.h:26: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gmain.h:28: error: syntax error before
> "typedef"
> /usr/local/include/glib-2.0/glib/gmain.h:35: error: parse error before
> "pid"
> /usr/local/include/glib-2.0/glib/gmain.h:251: error: parse error before
> "pid"
> /usr/local/include/glib-2.0/glib/gmain.h:296: error: parse error before
> "GPid"
> /usr/local/include/glib-2.0/glib/gmain.h:300: error: parse error before
> "pid"
> In file included from /usr/local/include/glib-2.0/glib/gstring.h:31,
>                  from /usr/local/include/glib-2.0/glib/giochannel.h:32,
>                  from /usr/local/include/glib-2.0/glib.h:45,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gunicode.h:28: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gunicode.h:30: error: syntax error before
> "typedef"
> /usr/local/include/glib-2.0/glib/gunicode.h:114: error: parse error before
> "char"
> /usr/local/include/glib-2.0/glib/gunicode.h:118: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:118: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:119: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:119: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:120: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:120: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:121: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:121: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:122: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:122: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:123: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:123: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:124: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:124: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:125: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:125: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:126: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:126: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:127: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:127: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:128: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:128: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:129: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:129: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:130: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:130: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:131: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:131: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:135: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:135: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:136: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:136: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:137: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:137: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:141: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:141: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:143: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:143: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:146: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:146: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:149: error: parse error before
> "G_GNUC_CONST"
> /usr/local/include/glib-2.0/glib/gunicode.h:149: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:156: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gunicode.h:162: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gunicode.h:162: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:172: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gunicode.h:185: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gunicode.h:190: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gunicode.h:195: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gunicode.h:198: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gunicode.h:201: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gunicode.h:207: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gunicode.h:207: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:212: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gunicode.h:212: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:215: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gunicode.h:215: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:220: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gunicode.h:220: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:225: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gunicode.h:225: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:230: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gunicode.h:230: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:235: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gunicode.h:235: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:249: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gunicode.h:256: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gunicode.h:256: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:258: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gunicode.h:258: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:260: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gunicode.h:260: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:274: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gunicode.h:275: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gunicode.h:280: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gunicode.h:280: warning: data definition
> has no type or storage  class
> In file included from /usr/local/include/glib-2.0/glib/gstring.h:32,
>                  from /usr/local/include/glib-2.0/glib/giochannel.h:32,
>                  from /usr/local/include/glib-2.0/glib.h:45,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gutils.h:33: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gutils.h:114: error: syntax error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gutils.h:115: error: syntax error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gutils.h:116: error: syntax error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gutils.h:117: error: syntax error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gutils.h:120: error: syntax error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gutils.h:123: error: syntax error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gutils.h:124: error: syntax error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gutils.h:125: error: syntax error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gutils.h:126: error: syntax error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gutils.h:126: error: parse error before
> '*' token
> /usr/local/include/glib-2.0/glib/gutils.h:126: warning: data definition
> has no type or storage c lass
> /usr/local/include/glib-2.0/glib/gutils.h:127: error: syntax error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gutils.h:127: error: parse error before
> '*' token
> /usr/local/include/glib-2.0/glib/gutils.h:127: warning: data definition
> has no type or storage c lass
> /usr/local/include/glib-2.0/glib/gutils.h:129: error: syntax error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gutils.h:129: error: parse error before
> '*' token
> /usr/local/include/glib-2.0/glib/gutils.h:129: warning: data definition
> has no type or storage c lass
> /usr/local/include/glib-2.0/glib/gutils.h:147: error: parse error before
> "G_GNUC_PRINTF"
> /usr/local/include/glib-2.0/glib/gutils.h:147: warning: data definition
> has no type or storage c lass
> /usr/local/include/glib-2.0/glib/gutils.h:157: error: syntax error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gutils.h:165: error: syntax error before
> "gchar"
> /usr/local/include/glib-2.0/glib/gutils.h:176: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gutils.h:176: warning: data definition
> has no type or storage c lass
> /usr/local/include/glib-2.0/glib/gutils.h:177: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gutils.h:177: warning: data definition
> has no type or storage c lass
> /usr/local/include/glib-2.0/glib/gutils.h:191: error: syntax error before
> "gchar"
> In file included from /usr/local/include/glib-2.0/glib/giochannel.h:32,
>                  from /usr/local/include/glib-2.0/glib.h:45,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gstring.h:34: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gstring.h:36: error: syntax error before
> "typedef"
> /usr/local/include/glib-2.0/glib/gstring.h:42: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gstring.h:42: warning: no semicolon at
> end of struct or union
> /usr/local/include/glib-2.0/glib/gstring.h:43: warning: data definition
> has no type or storage c lass
> /usr/local/include/glib-2.0/glib/gstring.h:48: error: parse error before
> "size"
> /usr/local/include/glib-2.0/glib/gstring.h:54: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gstring.h:63: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gstring.h:64: error: parse error before
> "dfl_size"
> /usr/local/include/glib-2.0/glib/gstring.h:73: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gstring.h:75: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gstring.h:77: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gstring.h:84: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gstring.h:97: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gstring.h:99: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gstring.h:102: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gstring.h:105: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gstring.h:108: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gstring.h:114: error: parse error before
> "G_GNUC_PRINTF"
> /usr/local/include/glib-2.0/glib/gstring.h:114: warning: data definition
> has no type or storage class
> /usr/local/include/glib-2.0/glib/gstring.h:117: error: parse error before
> "G_GNUC_PRINTF"
> /usr/local/include/glib-2.0/glib/gstring.h:117: warning: data definition
> has no type or storage class
> In file included from /usr/local/include/glib-2.0/glib.h:45,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/giochannel.h:34: error: parse error
> before "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/giochannel.h:39: error: syntax error
> before "typedef"
> /usr/local/include/glib-2.0/glib/giochannel.h:116: error: parse error
> before "gsize"
> /usr/local/include/glib-2.0/glib/giochannel.h:116: warning: no semicolon
> at end of struct or uni on
> /usr/local/include/glib-2.0/glib/giochannel.h:124: error: parse error
> before ':' token
> /usr/local/include/glib-2.0/glib/giochannel.h:125: error: parse error
> before ':' token
> /usr/local/include/glib-2.0/glib/giochannel.h:126: error: parse error
> before ':' token
> /usr/local/include/glib-2.0/glib/giochannel.h:127: error: parse error
> before ':' token
> /usr/local/include/glib-2.0/glib/giochannel.h:128: error: parse error
> before ':' token
> /usr/local/include/glib-2.0/glib/giochannel.h:129: error: parse error
> before ':' token
> /usr/local/include/glib-2.0/glib/giochannel.h:133: error: parse error
> before '}' token
> /usr/local/include/glib-2.0/glib/giochannel.h:142: error: parse error
> before "gsize"
> /usr/local/include/glib-2.0/glib/giochannel.h:147: error: parse error
> before "gsize"
> /usr/local/include/glib-2.0/glib/giochannel.h:172: error: parse error
> before "gsize"
> /usr/local/include/glib-2.0/glib/giochannel.h:176: error: parse error
> before "gsize"
> /usr/local/include/glib-2.0/glib/giochannel.h:204: error: parse error
> before "gsize"
> /usr/local/include/glib-2.0/glib/giochannel.h:205: error: parse error
> before "g_io_channel_get_b uffer_size"
> /usr/local/include/glib-2.0/glib/giochannel.h:205: warning: data
> definition has no type or stora ge class
> /usr/local/include/glib-2.0/glib/giochannel.h:214: error: syntax error
> before "gchar"
> /usr/local/include/glib-2.0/glib/giochannel.h:222: error: syntax error
> before "gchar"
> /usr/local/include/glib-2.0/glib/giochannel.h:232: error: parse error
> before "gsize"
> /usr/local/include/glib-2.0/glib/giochannel.h:237: error: parse error
> before "gsize"
> /usr/local/include/glib-2.0/glib/giochannel.h:241: error: parse error
> before "gsize"
> /usr/local/include/glib-2.0/glib/giochannel.h:245: error: parse error
> before "gsize"
> /usr/local/include/glib-2.0/glib/giochannel.h:253: error: parse error
> before "gssize"
> In file included from /usr/local/include/glib-2.0/glib.h:46,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gkeyfile.h:28: error: parse error before
> "G_BEGIN_DECLS"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:30: error: syntax error before
> "typedef"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:63: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:72: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:73: warning: data definition
> has no type or storage class
> /usr/local/include/glib-2.0/glib/gkeyfile.h:74: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:74: warning: data definition
> has no type or storage class
> /usr/local/include/glib-2.0/glib/gkeyfile.h:76: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:76: warning: data definition
> has no type or storage class
> /usr/local/include/glib-2.0/glib/gkeyfile.h:79: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:80: warning: data definition
> has no type or storage class
> /usr/local/include/glib-2.0/glib/gkeyfile.h:90: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:90: warning: data definition
> has no type or storage class
> /usr/local/include/glib-2.0/glib/gkeyfile.h:98: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:98: warning: data definition
> has no type or storage class
> /usr/local/include/glib-2.0/glib/gkeyfile.h:107: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:107: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gkeyfile.h:132: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:133: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gkeyfile.h:138: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:143: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:144: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gkeyfile.h:150: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:154: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:155: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gkeyfile.h:160: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:164: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:165: warning: data definition
> has no type or storage  class
> /usr/local/include/glib-2.0/glib/gkeyfile.h:170: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:179: error: parse error before
> "G_GNUC_MALLOC"
> /usr/local/include/glib-2.0/glib/gkeyfile.h:179: warning: data definition
> has no type or storage  class
> In file included from /usr/local/include/glib-2.0/glib.h:50,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gmarkup.h:30: error: syntax error before
> "typedef"
> /usr/local/include/glib-2.0/glib/gmarkup.h:77: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gmarkup.h:88: error: parse error before
> "gsize"
> /usr/local/include/glib-2.0/glib/gmarkup.h:107: error: parse error before
> "gssize"
> /usr/local/include/glib-2.0/glib/gmarkup.h:121: error: parse error before
> "gssize"
> In file included from /usr/local/include/glib-2.0/glib.h:52,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gmessages.h:44: error: parse error before
> "g_printf_string_uppe r_bound"
> /usr/local/include/glib-2.0/glib/gmessages.h:109: error: parse error
> before "G_GNUC_INTERNAL"
> In file included from /usr/local/include/glib-2.0/glib.h:57,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gqsort.h:37: error: parse error before
> "gsize"
> In file included from /usr/local/include/glib-2.0/glib.h:65,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gspawn.h:80: error: parse error before
> "GPid"
> /usr/local/include/glib-2.0/glib/gspawn.h:93: error: parse error before
> "GPid"
> /usr/local/include/glib-2.0/glib/gspawn.h:123: error: parse error before
> "pid"
> In file included from /usr/local/include/glib-2.0/glib.h:66,
>                  from uuidP.h:33,
>                  from Ruuid.h:5,
>                  from Rinit.c:1:
> /usr/local/include/glib-2.0/glib/gstrfuncs.h:104: error: parse error
> before "g_strlcpy"
> /usr/local/include/glib-2.0/glib/gstrfuncs.h:106: error: parse error
> before "gsize"
> /usr/local/include/glib-2.0/glib/gstrfuncs.h:106: warning: data definition
> has no type or storag e class
> /usr/local/include/glib-2.0/glib/gstrfuncs.h:107: error: parse error
> before "g_strlcat"
> /usr/local/include/glib-2.0/glib/gstrfuncs.h:109: error: parse error
> before "gsize"
> /usr/local/include/glib-2.0/glib/gstrfuncs.h:109: warning: data definition
> has no type or storag e class
> /usr/local/include/glib-2.0/glib/gstrfuncs.h:111: error: parse error
> before "gssize"
> /usr/local/include/glib-2.0/glib/gstrfuncs.h:116: error: parse error
> before "gssize"
> /usr/local/include/glib-2.0/glib/gstrfuncs.h:156: error: parse error
> before "gsize"
> /usr/local/include/glib-2.0/glib/gstrfuncs.h:158: error: parse error
> before "gssize"
> /usr/local/include/glib-2.0/glib/gstrfuncs.h:160: error: parse error
> before "gssize"
> /usr/local/include/glib-2.0/glib/gstrfuncs.h:188: error: parse error
> before "gsize"
> /usr/local/include/glib-2.0/glib/gstrfuncs.h:189: error: parse error
> before "length"
> make: *** [Rinit.o] Error 1
> chmod: failed to get attributes of
> `/package/R/2.3.1/lib/R/library/Ruuid/libs/*': No such file o r directory
> ERROR: compilation failed for package 'Ruuid'
> ** Removing '/package/R/2.3.1/lib/R/library/Ruuid'
> ** Restoring previous '/package/R/2.3.1/lib/R/library/Ruuid'
>
> The downloaded packages are in
>         /databank/temp/RtmptvZa7V/downloaded_packages
> Warning message:
> installation of package 'Ruuid' had non-zero exit status in:
> install.packages(pkgs = pkgs, repos  = repos, dependencies = dependencies,
>>
>
> --please do not edit the information below--
>
> Version:
>  platform = sparc-sun-solaris2.9
>  arch = sparc
>  os = solaris2.9
>  system = sparc, solaris2.9
>  status =
>  major = 2
>  minor = 3.1
>  year = 2006
>  month = 06
>  day = 01
>  svn rev = 38247
>  language = R
>  version.string = Version 2.3.1 (2006-06-01)
>
> Locale:
> C
>
> Search Path:
>  .GlobalEnv, package:methods, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, Autoloads, package:base
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

Thomas Lumley			Assoc. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle


From nicolas.turenne at jouy.inra.fr  Mon Jun 12 17:48:49 2006
From: nicolas.turenne at jouy.inra.fr (Nicolas Turenne)
Date: Mon, 12 Jun 2006 17:48:49 +0200
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448D864F.2070704@stats.uwo.ca>
References: <448D81F9.8040406@jouy.inra.fr> <448D864F.2070704@stats.uwo.ca>
Message-ID: <448D8CE1.3030107@jouy.inra.fr>

 >
 >
 >You didn't show the results of installing your package.  Did that work?
 >
 >Generally we advise to do a successful install before you try to run 
checks.
 >
 >Duncan Murdoch

D:\RBuild\svcR> rcmd build D://RBuild//svcR --force --docs='all' --binary
hence i obtain the file svcR_1.0.zip
and following messages :

D:\RBuild\svcR>rcmd build D://RBuild//svcR --force --docs='all' --binary
* checking for file 'D://RBuild//svcR/DESCRIPTION' ... OK
* preparing 'D://RBuild//svcR':
* checking DESCRIPTION meta-information ... OK
* cleaning src
* removing junk files
tar: svcR/svcR_1.0.tar: file is the archive; not dumped
* excluding invalid files from 'svcR'
Subdirectory 'R' contains invalid file names:
 ade4.dll quadprog.dll spdep.dll
* checking for LF line-endings in source files
* checking for empty or unneeded directories
* building binary distribution
WARNING
* some HTML links may not be found
installing R.css in C:/DOCUME~1/Nicolas/LOCALS~1/Temp/Rinst249298526

Using auto-selected zip options ''

---------- Making package svcR ------------
 adding build stamp to DESCRIPTION
 installing NAMESPACE file and metadata
 installing R files
 installing data files
 installing man source files
 installing indices
 not zipping data
 installing help
 >>> Building/Updating help pages for package 'svcR'
    Formats: text html latex example chm
 iris_att                          text    html    latex           chm
 iris_mat                          text    html    latex           chm
 iris_var                          text    html    latex           chm
 svcR                              text    html    latex   example chm
Microsoft HTML Help Compiler 4.74.8702

Compiling 
c:\DOCUME~1\Nicolas\LOCALS~1\Temp\Rbuild249291931\svcR\chm\svcR.chm


Compile time: 0 minutes, 1 second
5       Topics
8       Local links
1       Internet link
1       Graphic


Created 
c:\DOCUME~1\Nicolas\LOCALS~1\Temp\Rbuild249291931\svcR\chm\svcR.chm, 18,
283 bytes
Compression increased file by 6,096 bytes.
 preparing package svcR for lazy loading
 adding MD5 sums

packaged installation of package 'svcR' as svcR_1.0.zip
* DONE (svcR)



in R environment (Rgui front-end)
i write:
 > install.packages("D:/RBuild/svcR/svcR_1.0.zip", repos=NULL)
package 'svcR' successfully unpacked and MD5 sums checked
updating HTML package descriptions
 > library(svcR)

Attachement du package : 'svcR'


       The following object(s) are masked _by_ .GlobalEnv :

        findModelCluster

 >


and finally when i typewrite my function
i obtain :
impossible de trouver la fonction "dudi.coa"
it can not find the function called in the library that i call in the R 
source code
by library(ade4)

if i call my function by source(),  it works well

thank you for help

---------

Nicolas


From f.hahne at dkfz-heidelberg.de  Mon Jun 12 17:50:14 2006
From: f.hahne at dkfz-heidelberg.de (Florian Hahne)
Date: Mon, 12 Jun 2006 17:50:14 +0200
Subject: [Rd] do.call and hist
Message-ID: <448D8D36.5020704@dkfz-heidelberg.de>

Hi everyone,
here is something I noticed when playing around with do.call:
do.call(hist, list(x=1:10))
uses for the main title and also the axis labels "c(1,2,3,4,5,6,7,8,9,10)"
So
do.call(hist, list(x=1:10000))
nicely fills up your screen with numbers.
Is there a way to get the deparsing from the list names to the labels 
right.
Cheers,
Florian

PS: My sessionInfo:
Version 2.3.1 Patched (2006-06-01 r38258)
x86_64-unknown-linux-gnu

attached base packages:
[1] "grid"      "tools"     "methods"   "stats"     "graphics"  "grDevices"
[7] "utils"     "datasets"  "base"

other attached packages:
 geneplotter     annotate        prada RColorBrewer      Biobase
    "1.10.0"     "1.10.0"      "1.9.5"      "0.2-3"     "1.10.0"

-- 
Florian Hahne
Abt. Molekulare Genomanalyse (B050)
Deutsches Krebsforschungszentrum (DKFZ)
Im Neuenheimer Feld 580
D-69120 Heidelberg
phone: 0049 6221 424764
fax: 0049 6221 423454
web: www.dkfz.de/mga


From ripley at stats.ox.ac.uk  Mon Jun 12 17:52:22 2006
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Mon, 12 Jun 2006 17:52:22 +0200 (CEST)
Subject: [Rd] Link error with glibc-2.4 on linux/PPC (PR#8967)
Message-ID: <20060612155222.90EF74C89E@slim.kubism.ku.dk>

Does this system need -fPIC?

R cannot be expected to know the settings needed in config.site for all 
possible systems, and as you will see from the notes in configure.ac, 
ppc32 does not appear to need -fPIC according to the gcc documentation. 
Indeed, the manual INSTALL asked you to read says:

   Variables such as @env{CPICFLAGS} are determined where possible by
   @command{configure}.  Some systems allows two types of PIC flags, for
   example @samp{-fpic} and @samp{-fPIC}, and if they differ the first
   allows only a limited number of symbols in a shared library.  Since @R{}
   as a shared library has about 6200 symbols, if in doubt use the larger
   version.

and an issue discussed in the installation manual is hardly a bug.

On Mon, 12 Jun 2006, lu_zero at gentoo.org wrote:

> Full_Name: Luca Barbato
> Version: 2.3.1
> OS: Gentoo Linux/PPC
> Submission from: (NULL) (151.44.163.144)
>
>
> system informations
>
> Portage 2.1 (default-linux/ppc/ppc32/2006.0/G4, gcc-4.1.1, glibc-2.4-r3,
> 2.6.17-rc5 ppc)
> =================================================================
> System uname: 2.6.17-rc5 ppc 7447A, altivec supported
> Gentoo Base System version 1.12.1
> distcc 2.18.3 powerpc-unknown-linux-gnu (protocols 1 and 2) (default port 3632)
> [disabled]
> dev-lang/python:     2.4.3-r1
> dev-python/pycrypto: 2.0.1-r5
> dev-util/ccache:     [Not Present]
> dev-util/confcache:  0.4.2-r1
> sys-apps/sandbox:    1.2.18.1
> sys-devel/autoconf:  2.13, 2.59-r7
> sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
> sys-devel/binutils:  2.16.1-r2
> sys-devel/gcc-config: 1.3.13-r2
> sys-devel/libtool:   1.5.22
> virtual/os-headers:  2.6.11-r4
> ACCEPT_KEYWORDS="ppc ~ppc"
> AUTOCLEAN="yes"
> CBUILD="powerpc-unknown-linux-gnu"
> CFLAGS="-O2 -mcpu=G4 -mtune=G4 -fno-strict-aliasing -pipe -maltivec
> -mabi=altivec"
> CHOST="powerpc-unknown-linux-gnu"
>
> Fault log
>
> gfortran  -fpic  -g -O2 -c xxxpr.f -o xxxpr.o
> powerpc-unknown-linux-gnu-gcc -shared   -o libR.so Rembedded.o CConverters.o
> CommandLineArgs.o Rdynload.o Renviron.o RNG.o apply.o arithmetic.o apse.o
> array.o attrib.o base.o bind.o builtin.o character.o coerce.o colors.o complex.o
> connections.o context.o cov.o cum.o dcf.o datetime.o debug.o deparse.o deriv.o
> dotcode.o dounzip.o dstruct.o duplicate.o engine.o envir.o errors.o eval.o
> format.o fourier.o gevents.o gram.o gram-ex.o graphics.o identical.o internet.o
> iosupport.o lapack.o list.o localecharset.o logic.o main.o mapply.o match.o
> memory.o model.o names.o objects.o optim.o optimize.o options.o par.o paste.o
> pcre.o platform.o plot.o plot3d.o plotmath.o print.o printarray.o printvector.o
> printutils.o qsort.o random.o regex.o registration.o relop.o rlocale.o
> saveload.o scan.o seq.o serialize.o size.o sort.o source.o split.o sprintf.o
> startup.o subassign.o subscript.o subset.o summary.o sysutils.o unique.o util.o
> version.o vfonts.o xxxpr.o   `ls ../appl/*.o ../nmath/*.o ../unix/*.o
> 2>/dev/null`  -lgfortran -lm -lgcc_s  ../extra/zlib/libz.a
> ../extra/bzip2/libbz2.a ../extra/pcre/libpcre.a  -lreadline  -ldl -lm
> /usr/lib/gcc/powerpc-unknown-linux-gnu/4.1.1/../../../crti.o: In function
> `call_gmon_start':
> /var/tmp/portage/glibc-2.4-r3/work/build-default-powerpc-unknown-linux-gnu-nptl/csu/crti.S:18:
> relocation truncated to fit: R_PPC_GOT16 against undefined symbol
> `__gmon_start__'
> CConverters.o: In function `do_setToCConverterActiveStatus':
> CConverters.c:(.text+0x522): relocation truncated to fit: R_PPC_GOT16 against
> symbol `R_NaInt' defined in .sbss section in main.o
> CConverters.c:(.text+0x556): relocation truncated to fit: R_PPC_GOT16 against
> symbol `R_FunTab' defined in .data.rel section in names.o
> CConverters.o: In function `R_converterMatchClass':
> CConverters.c:(.text+0x71a): relocation truncated to fit: R_PPC_GOT16 against
> symbol `R_ClassSymbol' defined in .sbss section in main.o
> CConverters.c:(.text+0x7f2): relocation truncated to fit: R_PPC_GOT16 against
> symbol `R_NilValue' defined in .sbss section in main.o
> CommandLineArgs.o: In function `R_common_command_line':
> CommandLineArgs.c:(.text+0x5e): relocation truncated to fit: R_PPC_GOT16 against
> symbol `R_RestoreHistory' defined in .sbss section in main.o
> CommandLineArgs.c:(.text+0x722): relocation truncated to fit: R_PPC_GOT16
> against symbol `R_StdinEnc' defined in .data section in main.o
> Rdynload.o: In function `GetFullDLLPath':
> Rdynload.c:(.text+0x6a): relocation truncated to fit: R_PPC_GOT16 against symbol
> `R_osDynSymbol' defined in .sdata section in Rdynload.o
> Rdynload.o: In function `Rf_MakeDLLInfo':
> Rdynload.c:(.text+0x1c2): relocation truncated to fit: R_PPC_GOT16 against
> symbol `R_ClassSymbol' defined in .sbss section in main.o
> Rdynload.c:(.text+0x1e6): relocation truncated to fit: R_PPC_GOT16 against
> symbol `R_NilValue' defined in .sbss section in main.o
> Rdynload.c:(.text+0x3a2): additional relocation overflows omitted from the
> output
> collect2: ld returned 1 exit status
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Mon Jun 12 17:54:31 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 12 Jun 2006 16:54:31 +0100 (BST)
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448D864F.2070704@stats.uwo.ca>
References: <448D81F9.8040406@jouy.inra.fr> <448D864F.2070704@stats.uwo.ca>
Message-ID: <Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>

On Mon, 12 Jun 2006, Duncan Murdoch wrote:

> On 6/12/2006 11:02 AM, Nicolas Turenne wrote:
>> hello,
>>
>> i try to create a package , and i call a library in the namespace file
>> such as :  useDynLib(quadprog)
>>
>> after checking my directory with the command "rcmd check" (i am on
>> WindowsXP)
>> i get an error: package / namespace load failed
>> the path of the library is:     D:\R\library\quadprog
>> the path of the  building files is:   D:\RBuild\svcR
>> and the comand i use to compile is:  rcmd check D://RBuild//svcR
>>
>> i dont understand, it is a path problem about the dll related to the
>> library ?
>
> You didn't show the results of installing your package.  Did that work?
>
> Generally we advise to do a successful install before you try to run checks.

And also to load  the package, maybe with

rterm R_DEFAULT_PACKAGES=NULL
> library(svcR)

as these messages often indicate missing package dependencies.

>> * checking package subdirectories ... WARNING
>> Subdirectory 'src' contains no source files.
>> * checking R files for syntax errors ... OK
>> * checking R files for library.dynam ... OK
>> * checking S3 generic/method consistency ... WARNING
>> Erreur : le chargement du package / espace de noms a echoue' pour 'svcR'
>> Sequence d'appel :
>> 2: stop(gettextf("package/namespace load failed for '%s'",
>> libraryPkgName(packag
>> e)),
>>        call. = FALSE, domain = NA)
>> 1: library(package, lib.loc = lib.loc, character.only = TRUE, verbose =
>> FALSE)
>> Execution arrete'e
>> See section 'Generic functions and methods' of the 'Writing R Extensions'
>> manual.
>> * checking replacement functions ... WARNING
>> Erreur : le chargement du package / espace de noms a echoue' pour 'svcR'
>> Sequence d'appel :
>> 2: stop(gettextf("package/namespace load failed for '%s'",
>> libraryPkgName(packag
>> e)),

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ggrothendieck at gmail.com  Mon Jun 12 18:00:50 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 12 Jun 2006 12:00:50 -0400
Subject: [Rd] do.call and hist
In-Reply-To: <448D8D36.5020704@dkfz-heidelberg.de>
References: <448D8D36.5020704@dkfz-heidelberg.de>
Message-ID: <971536df0606120900g4d1042d5k36d05c156a083e63@mail.gmail.com>

Try

x <- 1:10
do.call(hist, list(quote(x)))

or

do.call(hist, list(x = 1:10, xlab = "x"))


On 6/12/06, Florian Hahne <f.hahne at dkfz-heidelberg.de> wrote:
> Hi everyone,
> here is something I noticed when playing around with do.call:
> do.call(hist, list(x=1:10))
> uses for the main title and also the axis labels "c(1,2,3,4,5,6,7,8,9,10)"
> So
> do.call(hist, list(x=1:10000))
> nicely fills up your screen with numbers.
> Is there a way to get the deparsing from the list names to the labels
> right.
> Cheers,
> Florian
>
> PS: My sessionInfo:
> Version 2.3.1 Patched (2006-06-01 r38258)
> x86_64-unknown-linux-gnu
>
> attached base packages:
> [1] "grid"      "tools"     "methods"   "stats"     "graphics"  "grDevices"
> [7] "utils"     "datasets"  "base"
>
> other attached packages:
>  geneplotter     annotate        prada RColorBrewer      Biobase
>    "1.10.0"     "1.10.0"      "1.9.5"      "0.2-3"     "1.10.0"
>
> --
> Florian Hahne
> Abt. Molekulare Genomanalyse (B050)
> Deutsches Krebsforschungszentrum (DKFZ)
> Im Neuenheimer Feld 580
> D-69120 Heidelberg
> phone: 0049 6221 424764
> fax: 0049 6221 423454
> web: www.dkfz.de/mga
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From f.hahne at dkfz-heidelberg.de  Mon Jun 12 18:08:46 2006
From: f.hahne at dkfz-heidelberg.de (Florian Hahne)
Date: Mon, 12 Jun 2006 18:08:46 +0200
Subject: [Rd] do.call and hist
In-Reply-To: <971536df0606120900g4d1042d5k36d05c156a083e63@mail.gmail.com>
References: <448D8D36.5020704@dkfz-heidelberg.de>
	<971536df0606120900g4d1042d5k36d05c156a083e63@mail.gmail.com>
Message-ID: <448D918E.5020706@dkfz-heidelberg.de>

Thanks, that did the trick...

Gabor Grothendieck wrote:
> Try
>
> x <- 1:10
> do.call(hist, list(quote(x)))
>
> or
>
> do.call(hist, list(x = 1:10, xlab = "x"))
>
>
> On 6/12/06, Florian Hahne <f.hahne at dkfz-heidelberg.de> wrote:
>> Hi everyone,
>> here is something I noticed when playing around with do.call:
>> do.call(hist, list(x=1:10))
>> uses for the main title and also the axis labels 
>> "c(1,2,3,4,5,6,7,8,9,10)"
>> So
>> do.call(hist, list(x=1:10000))
>> nicely fills up your screen with numbers.
>> Is there a way to get the deparsing from the list names to the labels
>> right.
>> Cheers,
>> Florian
>>
>> PS: My sessionInfo:
>> Version 2.3.1 Patched (2006-06-01 r38258)
>> x86_64-unknown-linux-gnu
>>
>> attached base packages:
>> [1] "grid"      "tools"     "methods"   "stats"     "graphics"  
>> "grDevices"
>> [7] "utils"     "datasets"  "base"
>>
>> other attached packages:
>>  geneplotter     annotate        prada RColorBrewer      Biobase
>>    "1.10.0"     "1.10.0"      "1.9.5"      "0.2-3"     "1.10.0"
>>
>> -- 
>> Florian Hahne
>> Abt. Molekulare Genomanalyse (B050)
>> Deutsches Krebsforschungszentrum (DKFZ)
>> Im Neuenheimer Feld 580
>> D-69120 Heidelberg
>> phone: 0049 6221 424764
>> fax: 0049 6221 423454
>> web: www.dkfz.de/mga
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>


-- 
Florian Hahne
Abt. Molekulare Genomanalyse (B050)
Deutsches Krebsforschungszentrum (DKFZ)
Im Neuenheimer Feld 580
D-69120 Heidelberg
phone: 0049 6221 424764
fax: 0049 6221 423454
web: www.dkfz.de/mga


From nicolas.turenne at jouy.inra.fr  Mon Jun 12 18:25:03 2006
From: nicolas.turenne at jouy.inra.fr (Nicolas Turenne)
Date: Mon, 12 Jun 2006 18:25:03 +0200
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>
References: <448D81F9.8040406@jouy.inra.fr> <448D864F.2070704@stats.uwo.ca>
	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>
Message-ID: <448D955F.9050201@jouy.inra.fr>

in that sense, it is useless to load the library from R source code 
making my package
which is supposed to include it and load it

so if i understand the R philosophy it is not possible to load dll from 
outside ;
the user has to load my package  and manually has to load the necessary 
libraries
each time he has to use my library,  right ?

--
Nicolas

Prof Brian Ripley a ?crit :

>
> And also to load  the package, maybe with
>
> rterm R_DEFAULT_PACKAGES=NULL
>
>> library(svcR)
>
>
> as these messages often indicate missing package dependencies.
>
>>> * checking package subdirectories ... WARNING
>>> Subdirectory 'src' contains no source files.
>>> * checking R files for syntax errors ... OK
>>> * checking R files for library.dynam ... OK
>>> * checking S3 generic/method consistency ... WARNING
>>> Erreur : le chargement du package / espace de noms a echoue' pour 
>>> 'svcR'
>>> Sequence d'appel :
>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>> libraryPkgName(packag
>>> e)),
>>>        call. = FALSE, domain = NA)
>>> 1: library(package, lib.loc = lib.loc, character.only = TRUE, verbose =
>>> FALSE)
>>> Execution arrete'e
>>> See section 'Generic functions and methods' of the 'Writing R 
>>> Extensions'
>>> manual.
>>> * checking replacement functions ... WARNING
>>> Erreur : le chargement du package / espace de noms a echoue' pour 
>>> 'svcR'
>>> Sequence d'appel :
>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>> libraryPkgName(packag
>>> e)),
>>
>


From murdoch at stats.uwo.ca  Mon Jun 12 18:28:20 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 12 Jun 2006 12:28:20 -0400
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448D8CC1.9030001@jouy.inra.fr>
References: <448D81F9.8040406@jouy.inra.fr> <448D864F.2070704@stats.uwo.ca>
	<448D8CC1.9030001@jouy.inra.fr>
Message-ID: <448D9624.3090304@stats.uwo.ca>

On 6/12/2006 11:48 AM, Nicolas Turenne wrote:
>  >
>  >
>  >You didn't show the results of installing your package.  Did that work?
>  >
>  >Generally we advise to do a successful install before you try to run 
> checks.
>  >
>  >Duncan Murdoch
> 
> D:\RBuild\svcR> rcmd build D://RBuild//svcR --force --docs='all' --binary
> hence i obtain the file svcR_1.0.zip
> and following messages :
> 
> D:\RBuild\svcR>rcmd build D://RBuild//svcR --force --docs='all' --binary
> * checking for file 'D://RBuild//svcR/DESCRIPTION' ... OK
> * preparing 'D://RBuild//svcR':
> * checking DESCRIPTION meta-information ... OK
> * cleaning src
> * removing junk files
> tar: svcR/svcR_1.0.tar: file is the archive; not dumped
> * excluding invalid files from 'svcR'
> Subdirectory 'R' contains invalid file names:
>   ade4.dll quadprog.dll spdep.dll

You shouldn't have .dll files in the R directory.  Normally you have
just one, built in the src directory, and then R will install it into
the libs directory.  If you want multiple .dlls, I believe you can
build them in inst/libs, and they'll be copied to libs on installation.

However, the names of your dlls match the names of R packages, which
makes me think you are trying to incorporate routines from other
packages in your code.  If that's what you are doing, this is not the
right way to do it.  You should call other packages through their R
interfaces.  There are plans to allow direct calls into the dlls, but so
far I don't think they exist.

Duncan Murdoch

> * checking for LF line-endings in source files
> * checking for empty or unneeded directories
> * building binary distribution
>  WARNING
> * some HTML links may not be found
> installing R.css in C:/DOCUME~1/Nicolas/LOCALS~1/Temp/Rinst249298526
> 
> Using auto-selected zip options ''
> 
> ---------- Making package svcR ------------
>   adding build stamp to DESCRIPTION
>   installing NAMESPACE file and metadata
>   installing R files
>   installing data files
>   installing man source files
>   installing indices
>   not zipping data
>   installing help
>  >>> Building/Updating help pages for package 'svcR'
>      Formats: text html latex example chm
>   iris_att                          text    html    latex           chm
>   iris_mat                          text    html    latex           chm
>   iris_var                          text    html    latex           chm
>   svcR                              text    html    latex   example chm
> Microsoft HTML Help Compiler 4.74.8702
> 
> Compiling 
> c:\DOCUME~1\Nicolas\LOCALS~1\Temp\Rbuild249291931\svcR\chm\svcR.chm
> 
> 
> Compile time: 0 minutes, 1 second
> 5       Topics
> 8       Local links
> 1       Internet link
> 1       Graphic
> 
> 
> Created 
> c:\DOCUME~1\Nicolas\LOCALS~1\Temp\Rbuild249291931\svcR\chm\svcR.chm, 18,
> 283 bytes
> Compression increased file by 6,096 bytes.
>   preparing package svcR for lazy loading
>   adding MD5 sums
> 
> packaged installation of package 'svcR' as svcR_1.0.zip
> * DONE (svcR)
> 
> 
> 
> in R environment (Rgui front-end)
> i write:
>  > install.packages("D:/RBuild/svcR/svcR_1.0.zip", repos=NULL)
> package 'svcR' successfully unpacked and MD5 sums checked
> updating HTML package descriptions
>  > library(svcR)
> 
> Attachement du package : 'svcR'
> 
> 
>         The following object(s) are masked _by_ .GlobalEnv :
> 
>          findModelCluster
> 
>  >
> 
> 
> and finally when i typewrite my function
> i obtain :
> impossible de trouver la fonction "dudi.coa"
> it can not find the function called in the library that i call in the R 
> source code
> by library(ade4)
> 
> if i call my function by source(),  it works well
> 
> thank you for help
> 
> ---------
> 
> Nicolas


From murdoch at stats.uwo.ca  Mon Jun 12 18:29:58 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 12 Jun 2006 12:29:58 -0400
Subject: [Rd] Making a windows packages with zip
In-Reply-To: <448D8772.8030709@statistik.uni-dortmund.de>
References: <f8e6ff050606120256v89f05f3q4e55939b41b3bcd9@mail.gmail.com>		<448D3BF7.9040608@statistik.uni-dortmund.de>	<f8e6ff050606120420s666d6650h59f5f459c905ade6@mail.gmail.com>
	<448D8772.8030709@statistik.uni-dortmund.de>
Message-ID: <448D9686.30005@stats.uwo.ca>

On 6/12/2006 11:25 AM, Uwe Ligges wrote:
> hadley wickham wrote:
>>>
>>> Either the latter or ask the Windows users to install the source package.
>>>
>> 
>> Installing a source package doesn't seem to help:
>> 
>>> install.packages("classifly", repos="http://ggobi.org/r/", type="source")
>> Warning message:
>> installation of package 'classifly' had non-zero exit status in:
>> install.packages("classifly", repos = "http://ggobi.org/r/",
>> 
>> (Unfortunately I don't have access to a windows machine at present -
>> this is what a user reported)
> 
> 
> Oh well, certainly the user forgot to install the required tools as 
> mentioned in the "R Installation and Administration" manual.

Or has the path incorrect while running Rgui.  I normally do all source 
installs from the command line where I have the path set to work 
properly; if I start R from a shortcut, none of the tools are visible, 
so the install.packages command requires the pre-compiled packages.

Duncan Murdoch


From murdoch at stats.uwo.ca  Mon Jun 12 18:34:24 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 12 Jun 2006 12:34:24 -0400
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448D955F.9050201@jouy.inra.fr>
References: <448D81F9.8040406@jouy.inra.fr>
	<448D864F.2070704@stats.uwo.ca>	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>
	<448D955F.9050201@jouy.inra.fr>
Message-ID: <448D9790.5030609@stats.uwo.ca>

On 6/12/2006 12:25 PM, Nicolas Turenne wrote:
> in that sense, it is useless to load the library from R source code 
> making my package
> which is supposed to include it and load it
> 
> so if i understand the R philosophy it is not possible to load dll from 
> outside ;
> the user has to load my package  and manually has to load the necessary 
> libraries
> each time he has to use my library,  right ?

Not at all.  When set up correctly, the user should just need to say
library(svcR) and all necessary packages and DLLs will be loaded.

The way to specify other packages is through the "Depends" line in the 
DESCRIPTION file, and/or the import/importFrom lines in your NAMESPACE file.

Duncan Murdoch

> 
> --
> Nicolas
> 
> Prof Brian Ripley a ?crit :
> 
>>
>> And also to load  the package, maybe with
>>
>> rterm R_DEFAULT_PACKAGES=NULL
>>
>>> library(svcR)
>>
>>
>> as these messages often indicate missing package dependencies.
>>
>>>> * checking package subdirectories ... WARNING
>>>> Subdirectory 'src' contains no source files.
>>>> * checking R files for syntax errors ... OK
>>>> * checking R files for library.dynam ... OK
>>>> * checking S3 generic/method consistency ... WARNING
>>>> Erreur : le chargement du package / espace de noms a echoue' pour 
>>>> 'svcR'
>>>> Sequence d'appel :
>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>> libraryPkgName(packag
>>>> e)),
>>>>        call. = FALSE, domain = NA)
>>>> 1: library(package, lib.loc = lib.loc, character.only = TRUE, verbose =
>>>> FALSE)
>>>> Execution arrete'e
>>>> See section 'Generic functions and methods' of the 'Writing R 
>>>> Extensions'
>>>> manual.
>>>> * checking replacement functions ... WARNING
>>>> Erreur : le chargement du package / espace de noms a echoue' pour 
>>>> 'svcR'
>>>> Sequence d'appel :
>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>> libraryPkgName(packag
>>>> e)),
>>>
>>
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From nicolas.turenne at jouy.inra.fr  Mon Jun 12 19:32:40 2006
From: nicolas.turenne at jouy.inra.fr (Nicolas Turenne)
Date: Mon, 12 Jun 2006 19:32:40 +0200
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448D9790.5030609@stats.uwo.ca>
References: <448D81F9.8040406@jouy.inra.fr>
	<448D864F.2070704@stats.uwo.ca>	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>
	<448D955F.9050201@jouy.inra.fr> <448D9790.5030609@stats.uwo.ca>
Message-ID: <448DA538.8050100@jouy.inra.fr>

your answer is correct after checking some doc
but examples are rare

when i write in the description file
Depends: R (>= 2.3), quadprog, ade4, spdep 

and in the namespcae file

useDynLib(quadprog)
useDynLib(spdep)
useDynLib(ade4)
importFrom("dist.dudi", "ade4")
importFrom("solve.QP", "quadprog")
importFrom("mstree", "ade4")
importFrom("neig2mat", "ade4")
importFrom("dist.dudi", "ade4")
importFrom("dudi.pca", "ade4")
importFrom("dudi.coa", "ade4")
importFrom("knearneigh", "spdep")

i obtain :
Namespace dependencies not required:
  dist.dudi dudi.coa dudi.pca knearneigh mstree neig2mat solve.QP

if i delete the importFrom lines
i get an error about "loading / namespace not succesful" for svcr

i think the solution is not far but it is disturbing

thank for help

---
Nicolas


Duncan Murdoch a ?crit :

> On 6/12/2006 12:25 PM, Nicolas Turenne wrote:
>
>> in that sense, it is useless to load the library from R source code 
>> making my package
>> which is supposed to include it and load it
>>
>> so if i understand the R philosophy it is not possible to load dll 
>> from outside ;
>> the user has to load my package  and manually has to load the 
>> necessary libraries
>> each time he has to use my library,  right ?
>
>
> Not at all.  When set up correctly, the user should just need to say
> library(svcR) and all necessary packages and DLLs will be loaded.
>
> The way to specify other packages is through the "Depends" line in the 
> DESCRIPTION file, and/or the import/importFrom lines in your NAMESPACE 
> file.
>
> Duncan Murdoch
>
>>
>> -- 
>> Nicolas
>>
>> Prof Brian Ripley a ?crit :
>>
>>>
>>> And also to load  the package, maybe with
>>>
>>> rterm R_DEFAULT_PACKAGES=NULL
>>>
>>>> library(svcR)
>>>
>>>
>>>
>>> as these messages often indicate missing package dependencies.
>>>
>>>>> * checking package subdirectories ... WARNING
>>>>> Subdirectory 'src' contains no source files.
>>>>> * checking R files for syntax errors ... OK
>>>>> * checking R files for library.dynam ... OK
>>>>> * checking S3 generic/method consistency ... WARNING
>>>>> Erreur : le chargement du package / espace de noms a echoue' pour 
>>>>> 'svcR'
>>>>> Sequence d'appel :
>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>> libraryPkgName(packag
>>>>> e)),
>>>>>        call. = FALSE, domain = NA)
>>>>> 1: library(package, lib.loc = lib.loc, character.only = TRUE, 
>>>>> verbose =
>>>>> FALSE)
>>>>> Execution arrete'e
>>>>> See section 'Generic functions and methods' of the 'Writing R 
>>>>> Extensions'
>>>>> manual.
>>>>> * checking replacement functions ... WARNING
>>>>> Erreur : le chargement du package / espace de noms a echoue' pour 
>>>>> 'svcR'
>>>>> Sequence d'appel :
>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>> libraryPkgName(packag
>>>>> e)),
>>>>
>>>>
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
>


From ligges at statistik.uni-dortmund.de  Mon Jun 12 19:48:04 2006
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 12 Jun 2006 19:48:04 +0200
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448DA538.8050100@jouy.inra.fr>
References: <448D81F9.8040406@jouy.inra.fr>	<448D864F.2070704@stats.uwo.ca>	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>	<448D955F.9050201@jouy.inra.fr>
	<448D9790.5030609@stats.uwo.ca> <448DA538.8050100@jouy.inra.fr>
Message-ID: <448DA8D4.5050704@statistik.uni-dortmund.de>

Nicolas Turenne wrote:
> your answer is correct after checking some doc
> but examples are rare
> 
> when i write in the description file
> Depends: R (>= 2.3), quadprog, ade4, spdep 
> 
> and in the namespcae file
> 
> useDynLib(quadprog)
> useDynLib(spdep)
> useDynLib(ade4)
> importFrom("dist.dudi", "ade4")


Please do it the right way (package name first!):

importFrom("ade4", "dist.dudi")

Uwe Ligges




> importFrom("solve.QP", "quadprog")
> importFrom("mstree", "ade4")
> importFrom("neig2mat", "ade4")
> importFrom("dist.dudi", "ade4")
> importFrom("dudi.pca", "ade4")
> importFrom("dudi.coa", "ade4")
> importFrom("knearneigh", "spdep")
> 
> i obtain :
> Namespace dependencies not required:
>   dist.dudi dudi.coa dudi.pca knearneigh mstree neig2mat solve.QP
> 
> if i delete the importFrom lines
> i get an error about "loading / namespace not succesful" for svcr
> 
> i think the solution is not far but it is disturbing
> 
> thank for help
> 
> ---
> Nicolas
> 
> 
> Duncan Murdoch a ?crit :
> 
>> On 6/12/2006 12:25 PM, Nicolas Turenne wrote:
>>
>>> in that sense, it is useless to load the library from R source code 
>>> making my package
>>> which is supposed to include it and load it
>>>
>>> so if i understand the R philosophy it is not possible to load dll 
>>> from outside ;
>>> the user has to load my package  and manually has to load the 
>>> necessary libraries
>>> each time he has to use my library,  right ?
>>
>> Not at all.  When set up correctly, the user should just need to say
>> library(svcR) and all necessary packages and DLLs will be loaded.
>>
>> The way to specify other packages is through the "Depends" line in the 
>> DESCRIPTION file, and/or the import/importFrom lines in your NAMESPACE 
>> file.
>>
>> Duncan Murdoch
>>
>>> -- 
>>> Nicolas
>>>
>>> Prof Brian Ripley a ?crit :
>>>
>>>> And also to load  the package, maybe with
>>>>
>>>> rterm R_DEFAULT_PACKAGES=NULL
>>>>
>>>>> library(svcR)
>>>>
>>>>
>>>> as these messages often indicate missing package dependencies.
>>>>
>>>>>> * checking package subdirectories ... WARNING
>>>>>> Subdirectory 'src' contains no source files.
>>>>>> * checking R files for syntax errors ... OK
>>>>>> * checking R files for library.dynam ... OK
>>>>>> * checking S3 generic/method consistency ... WARNING
>>>>>> Erreur : le chargement du package / espace de noms a echoue' pour 
>>>>>> 'svcR'
>>>>>> Sequence d'appel :
>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>> libraryPkgName(packag
>>>>>> e)),
>>>>>>        call. = FALSE, domain = NA)
>>>>>> 1: library(package, lib.loc = lib.loc, character.only = TRUE, 
>>>>>> verbose =
>>>>>> FALSE)
>>>>>> Execution arrete'e
>>>>>> See section 'Generic functions and methods' of the 'Writing R 
>>>>>> Extensions'
>>>>>> manual.
>>>>>> * checking replacement functions ... WARNING
>>>>>> Erreur : le chargement du package / espace de noms a echoue' pour 
>>>>>> 'svcR'
>>>>>> Sequence d'appel :
>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>> libraryPkgName(packag
>>>>>> e)),
>>>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From maechler at stat.math.ethz.ch  Mon Jun 12 20:43:09 2006
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 12 Jun 2006 20:43:09 +0200
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448DA8D4.5050704@statistik.uni-dortmund.de>
References: <448D81F9.8040406@jouy.inra.fr> <448D864F.2070704@stats.uwo.ca>
	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>
	<448D955F.9050201@jouy.inra.fr> <448D9790.5030609@stats.uwo.ca>
	<448DA538.8050100@jouy.inra.fr>
	<448DA8D4.5050704@statistik.uni-dortmund.de>
Message-ID: <17549.46525.795075.576823@stat.math.ethz.ch>

>>>>> "UweL" == Uwe Ligges <ligges at statistik.uni-dortmund.de>
>>>>>     on Mon, 12 Jun 2006 19:48:04 +0200 writes:

    UweL> Nicolas Turenne wrote:
    >> your answer is correct after checking some doc
    >> but examples are rare
    >> 
    >> when i write in the description file
    >> Depends: R (>= 2.3), quadprog, ade4, spdep 
    >> 
    >> and in the namespcae file
    >> 
    >> useDynLib(quadprog)
    >> useDynLib(spdep)
    >> useDynLib(ade4)
    >> importFrom("dist.dudi", "ade4")


    UweL> Please do it the right way (package name first!):

    UweL> importFrom("ade4", "dist.dudi")

    UweL> Uwe Ligges



and also add a Line 
------------------------------------
Imports: ade4, quadprog, spdep
------------------------------------
to your DESCRIPTION file

[[yes, it is slightly unfortunate that things have to be *both*
  in DESCRIPTION and in NAMESPACE, 
  but that's the way it currently is ]]


   >> importFrom("solve.QP", "quadprog")
    >> importFrom("mstree", "ade4")
    >> importFrom("neig2mat", "ade4")
    >> importFrom("dist.dudi", "ade4")
    >> importFrom("dudi.pca", "ade4")
    >> importFrom("dudi.coa", "ade4")
    >> importFrom("knearneigh", "spdep")
    >> 
    >> i obtain :
    >> Namespace dependencies not required:
    >> dist.dudi dudi.coa dudi.pca knearneigh mstree neig2mat solve.QP
    >> 
    >> if i delete the importFrom lines
    >> i get an error about "loading / namespace not succesful" for svcr
    >> 
    >> i think the solution is not far but it is disturbing
    >> 
    >> thank for help
    >> 
    >> ---
    >> Nicolas
    >> 
    >> 
    >> Duncan Murdoch a ?crit :
    >> 
    >>> On 6/12/2006 12:25 PM, Nicolas Turenne wrote:
    >>> 
    >>>> in that sense, it is useless to load the library from R source code 
    >>>> making my package
    >>>> which is supposed to include it and load it
    >>>> 
    >>>> so if i understand the R philosophy it is not possible to load dll 
    >>>> from outside ;
    >>>> the user has to load my package  and manually has to load the 
    >>>> necessary libraries
    >>>> each time he has to use my library,  right ?
    >>> 
    >>> Not at all.  When set up correctly, the user should just need to say
    >>> library(svcR) and all necessary packages and DLLs will be loaded.
    >>> 
    >>> The way to specify other packages is through the "Depends" line in the 
    >>> DESCRIPTION file, and/or the import/importFrom lines in your NAMESPACE 
    >>> file.
    >>> 
    >>> Duncan Murdoch
    >>> 
    >>>> -- 
    >>>> Nicolas
    >>>> 
    >>>> Prof Brian Ripley a ?crit :
    >>>> 
    >>>>> And also to load  the package, maybe with
    >>>>> 
    >>>>> rterm R_DEFAULT_PACKAGES=NULL
    >>>>> 
>>>>> library(svcR)
    >>>>> 
    >>>>> 
    >>>>> as these messages often indicate missing package dependencies.
    >>>>> 
    >>>>>>> * checking package subdirectories ... WARNING
    >>>>>>> Subdirectory 'src' contains no source files.
    >>>>>>> * checking R files for syntax errors ... OK
    >>>>>>> * checking R files for library.dynam ... OK
    >>>>>>> * checking S3 generic/method consistency ... WARNING
    >>>>>>> Erreur : le chargement du package / espace de noms a echoue' pour 
    >>>>>>> 'svcR'
    >>>>>>> Sequence d'appel :
    >>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
    >>>>>>> libraryPkgName(packag
    >>>>>>> e)),
    >>>>>>> call. = FALSE, domain = NA)
    >>>>>>> 1: library(package, lib.loc = lib.loc, character.only = TRUE, 
    >>>>>>> verbose =
    >>>>>>> FALSE)
    >>>>>>> Execution arrete'e
    >>>>>>> See section 'Generic functions and methods' of the 'Writing R 
    >>>>>>> Extensions'
    >>>>>>> manual.
    >>>>>>> * checking replacement functions ... WARNING
    >>>>>>> Erreur : le chargement du package / espace de noms a echoue' pour 
    >>>>>>> 'svcR'
    >>>>>>> Sequence d'appel :
    >>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
    >>>>>>> libraryPkgName(packag
    >>>>>>> e)),
    >>>>>>


From htang at hpl.hp.com  Mon Jun 12 22:09:48 2006
From: htang at hpl.hp.com (htang at hpl.hp.com)
Date: Mon, 12 Jun 2006 22:09:48 +0200 (CEST)
Subject: [Rd] documentation for "Startup" should be clearer about system
	Rprofile (PR#8969)
Message-ID: <20060612200948.5D40F4C891@slim.kubism.ku.dk>

Full_Name: Hsiu-Khuern Tang
Version: 2.3.0
OS: Debian GNU/Linux
Submission from: (NULL) (15.243.169.73)


On reading ?Startup, I cannot find anything that says that
R_HOME/library/base/R/Rprofile is always run.  The "Note" section does say that
R_HOME/etc/Renviron is distinct from the site-wide Renviron file, so I think
this is a natural place to also mention that base/R/Rprofile is distinct from
the site-wide Rprofile file.  In addition, it would be helpful to indicate when
base/R/Rprofile is run: after reading the Renviron files and before reading the
site-wide Rprofile file.

I suppose one possible reason for not including this information is that users
are not supposed to alter base/R/Rprofile.

Thanks,
Hsiu-Khuern.


From rpeng at jhsph.edu  Mon Jun 12 22:53:31 2006
From: rpeng at jhsph.edu (Roger D. Peng)
Date: Mon, 12 Jun 2006 16:53:31 -0400
Subject: [Rd] normalizePath() warning
Message-ID: <448DD44B.60204@jhsph.edu>

I've been getting the following warning after running 'install.packages()' recently:

Warning message:
insufficient OS support on this platform in: normalizePath(path)

Does anyone know what this means?  And does anyone know how I can get rid of the 
warning?  I've just installed R on a fresh FC5 system so I feel I might have 
forgotten to install a package/library or something.

Thanks,
-roger


From dmaszle at mendelbio.com  Tue Jun 13 01:31:32 2006
From: dmaszle at mendelbio.com (dmaszle at mendelbio.com)
Date: Tue, 13 Jun 2006 01:31:32 +0200 (CEST)
Subject: [Rd] segfault with layout() after closing X11() device (PR#8970)
Message-ID: <20060612233132.E290C4C8A1@slim.kubism.ku.dk>

Full_Name: Don Maszle
Version: 2.3.0
OS: Solaris 9 - 64 bit compile
Submission from: (NULL) (206.86.87.3)


After closing an X11() window by either clicking on the close button
or by calling dev.off(), R 2.3.0 segfaults as shown below.  Calling layout()
before any X11() device is opened just opens a new device and applies the
layout.

$ R

R : Copyright 2006, The R Foundation for Statistical Computing
Version 2.3.0 (2006-04-24)
ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> X11()
> layout(matrix(1:2,1,2))
> # close window with mouse, or call dev.off()
> layout(matrix(1:2,1,2))

 *** caught segfault ***
address 0, cause 'memory not mapped'

Traceback:
 1: X11()
 2: layout(matrix(1:2, 1, 2))


From dlr32 at cornell.edu  Tue Jun 13 03:47:36 2006
From: dlr32 at cornell.edu (Dan Rabosky)
Date: Mon, 12 Jun 2006 21:47:36 -0400
Subject: [Rd] Building R package: make pdf & _masked_by_GlobalEnv
Message-ID: <5.2.1.1.2.20060612204709.0318b4b0@postoffice9.mail.cornell.edu>


Hi....

I am assembling an R package (under Windows XP, R v.2.3) and have a very 
basic question.  Running R CMD build does not generate a pdf.  R CMD check 
generates a .dvi, but I cannot figure out how to automatically create the 
pdf.  I thought from reading the "writing r extensions' manual that R CMD 
build was supposed to generate the pdf.  I am having no success using 
various permutations of the Rd2dvi and texi2dvi, and I'm a bit 
frustrated.  I have miktex 2.4, which should (I thought) have the necessary 
pdftex tools to do this.  Maybe it does; I definitely have various 
directories named 'dvipdfm', 'pdftex', etc on my computer, but I have no 
idea whether there might be a problem.

When I install the package, I receive the message that most of my functions 
are "masked _by_ .GlobalEnv".  I have no idea what this means; I'm sure 
that this is amply documented, but I confess that I have a rather difficult 
time with much of the documentation on writing packages.

Apologies for the elementary level of these questions, and thanks in 
advance for your help!

~Dan Rabosky






Dan Rabosky
Department of Ecology and Evolutionary Biology
237 Corson Hall
Cornell University
Ithaca, NY14853-2701 USA
607 254 4262 (office)
607 592 4636  (cell)
DLR32 at cornell.edu
web: http://www.birds.cornell.edu/evb/Graduates_Dan.htm


From murdoch at stats.uwo.ca  Tue Jun 13 04:19:42 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 12 Jun 2006 22:19:42 -0400
Subject: [Rd] normalizePath() warning
In-Reply-To: <448DD44B.60204@jhsph.edu>
References: <448DD44B.60204@jhsph.edu>
Message-ID: <448E20BE.9090701@stats.uwo.ca>

On 6/12/2006 4:53 PM, Roger D. Peng wrote:
> I've been getting the following warning after running 'install.packages()' recently:
> 
> Warning message:
> insufficient OS support on this platform in: normalizePath(path)
> 
> Does anyone know what this means?  And does anyone know how I can get rid of the 
> warning?  I've just installed R on a fresh FC5 system so I feel I might have 
> forgotten to install a package/library or something.

This is printed when your R source was compiled without these defines:

#if defined(HAVE_GETCWD) && defined(HAVE_REALPATH)

I guess you can look in your config log to see why you don't have those.

Duncan Murdoch


From murdoch at stats.uwo.ca  Tue Jun 13 04:23:36 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 12 Jun 2006 22:23:36 -0400
Subject: [Rd] Building R package: make pdf & _masked_by_GlobalEnv
In-Reply-To: <5.2.1.1.2.20060612204709.0318b4b0@postoffice9.mail.cornell.edu>
References: <5.2.1.1.2.20060612204709.0318b4b0@postoffice9.mail.cornell.edu>
Message-ID: <448E21A8.2040109@stats.uwo.ca>

On 6/12/2006 9:47 PM, Dan Rabosky wrote:
> Hi....
> 
> I am assembling an R package (under Windows XP, R v.2.3) and have a very 
> basic question.  Running R CMD build does not generate a pdf.  R CMD check 
> generates a .dvi, but I cannot figure out how to automatically create the 
> pdf.  I thought from reading the "writing r extensions' manual that R CMD 
> build was supposed to generate the pdf.  I am having no success using 
> various permutations of the Rd2dvi and texi2dvi, and I'm a bit 
> frustrated.  I have miktex 2.4, which should (I thought) have the necessary 
> pdftex tools to do this.  Maybe it does; I definitely have various 
> directories named 'dvipdfm', 'pdftex', etc on my computer, but I have no 
> idea whether there might be a problem.

You need to give a bit more detail.  What is the .pdf being created 
from?  What do things look like when you run a build?  Does install work?

> 
> When I install the package, I receive the message that most of my functions 
> are "masked _by_ .GlobalEnv".  I have no idea what this means; I'm sure 
> that this is amply documented, but I confess that I have a rather difficult 
> time with much of the documentation on writing packages.

This means that you have variables in your workspace with the same names 
as ones in your package.  You probably want to clean out your workspace, 
because most uses will find those versions before the ones in the 
package -- and that really messes up testing, etc.

Duncan Murdoch

> 
> Apologies for the elementary level of these questions, and thanks in 
> advance for your help!
> 
> ~Dan Rabosky
> 
> 
> 
> 
> 
> 
> Dan Rabosky
> Department of Ecology and Evolutionary Biology
> 237 Corson Hall
> Cornell University
> Ithaca, NY14853-2701 USA
> 607 254 4262 (office)
> 607 592 4636  (cell)
> DLR32 at cornell.edu
> web: http://www.birds.cornell.edu/evb/Graduates_Dan.htm
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From dlr32 at cornell.edu  Tue Jun 13 04:59:29 2006
From: dlr32 at cornell.edu (Dan Rabosky)
Date: Mon, 12 Jun 2006 22:59:29 -0400
Subject: [Rd] Building R package: make pdf & _masked_by_GlobalEnv
In-Reply-To: <448E21A8.2040109@stats.uwo.ca>
References: <5.2.1.1.2.20060612204709.0318b4b0@postoffice9.mail.cornell.edu>
	<5.2.1.1.2.20060612204709.0318b4b0@postoffice9.mail.cornell.edu>
Message-ID: <5.2.1.1.2.20060612224250.03218f78@postoffice9.mail.cornell.edu>


>>
>>I am assembling an R package (under Windows XP, R v.2.3) and have a very 
>>basic question.  Running R CMD build does not generate a pdf.  R CMD 
>>check generates a .dvi, but I cannot figure out how to automatically 
>>create the pdf.  I thought from reading the "writing r extensions' manual 
>>that R CMD build was supposed to generate the pdf.  I am having no 
>>success using various permutations of the Rd2dvi and texi2dvi, and I'm a 
>>bit frustrated.  I have miktex 2.4, which should (I thought) have the 
>>necessary pdftex tools to do this.  Maybe it does; I definitely have 
>>various directories named 'dvipdfm', 'pdftex', etc on my computer, but I 
>>have no idea whether there might be a problem.
>
>You need to give a bit more detail.  What is the .pdf being created 
>from?  What do things look like when you run a build?  Does install work?

I guess I'm not sure what the .pdf is being created from - I don't know how 
this works.  I assumed that my set of .Rd files from the man dir would 
automatically be converted into .pdf, much like 'check' reads them into a 
dvi document.   When I run a build, I get an archive with all of my .R 
source files, the DESCRIPTION, the .Rd files, my datafiles, and any 
documentation I've placed in inst/doc.  When I install this from CMD, the 
html help & chtml files compile, examples are copied from the /man 
directory to their own .Rd files, and everything - to me - appears 
OK.  'Install' from R CMD works with no problem - it warns me that my 
'examples' directory is empty, but it proceeds to create the examples from 
my .Rd files anyway.

I only get a .dvi manual when running 'check'.


>>When I install the package, I receive the message that most of my 
>>functions are "masked _by_ .GlobalEnv".  I have no idea what this means; 
>>I'm sure that this is amply documented, but I confess that I have a 
>>rather difficult time with much of the documentation on writing packages.
>
>This means that you have variables in your workspace with the same names 
>as ones in your package.  You probably want to clean out your workspace, 
>because most uses will find those versions before the ones in the package 
>-- and that really messes up testing, etc.

thanks for the clarification!


From kenji.rikitake at acm.org  Tue Jun 13 06:13:58 2006
From: kenji.rikitake at acm.org (kenji.rikitake at acm.org)
Date: Tue, 13 Jun 2006 06:13:58 +0200 (CEST)
Subject: [Rd] R-2.3.1 does not install on FreeBSD 4.11-RELEASE (PR#8971)
Message-ID: <20060613041358.3C1621DD9E@slim.kubism.ku.dk>

Full_Name: Kenji Rikitake
Version: 2.3.1
OS: FreeBSD 4.11-RELEASE-p18
Submission from: (NULL) (220.157.163.221)


After doing
./configure --disable-mbcs
(as default in FreeBSD 4.x)
and
make
the compilation stops at src/main/printutils.c as:
printutils.c: In function `Rvprintf':
printutils.c:582: `va_start' used in function with fixed args
printutils.c:591: syntax error before `}'

the following patch includes two fixes:

1) removing unnecessary va_start() and va_end() macro for Rvprintf() in
   src/main/printutils.c
2) fixing error by adding {} around calling error() in src/main/printutils.c

--- src/main/printutils.c.FCS   Mon Apr 10 07:19:28 2006
+++ src/main/printutils.c       Tue Jun 13 12:07:05 2006
@@ -579,14 +579,15 @@
       (con->vfprintf)(con, format, argcopy);
       va_end(argcopy);
 #else /* don't support sink(,split=TRUE) */
-      va_start(arg, format);
+      /* va_start(arg, format); */ /* not for FREEBSD_4 */
       (con->vfprintf)(con, format, arg);
-      va_end(arg);
+      /* va_end(arg); */
+      /* not for FREEBSD_4 */
 #endif
       con->fflush(con);
       con_num = getActiveSink(i++);
 #ifndef HAVE_VA_COPY
-      if (con_num>0) error("Internal error: this platform does not support
split output")
+      if (con_num>0) {error("Internal error: this platform does not support
split output");}
 #endif
     } while(con_num>0);
 
Also, I needed to fix the permission after doing
make install
using the following set of commands:

cd /usr/local/lib/R/exec
chmod 0755 R
cd /usr/local/lib/R/lib
chmod 0755 libRlapack.so
cd /usr/local/lib/R/base
chmod 755 Meta R R-ex demo help html latex man po
find . -type d -not -perm -001 | xargs chmod go+rx
find . -type f -and -not -perm -444 | xargs chmod go+r
cd /usr/local/lib/R/modules
chmod 755 *.so

[End of bug report]


From ripley at stats.ox.ac.uk  Tue Jun 13 07:53:43 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 13 Jun 2006 06:53:43 +0100 (BST)
Subject: [Rd] R-2.3.1 does not install on FreeBSD 4.11-RELEASE (PR#8971)
In-Reply-To: <20060613041358.3C1621DD9E@slim.kubism.ku.dk>
References: <20060613041358.3C1621DD9E@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.64.0606130640470.23931@gannet.stats.ox.ac.uk>

The first point is already changed in R-patched: please try it and 
confirm.  The NEWS file says:

     o   There were problems in src/main/printutils.c on platforms
         that did not have va_copy.

What architecture and compiler is this (and is FreeBSD 4.11-RELEASE not 
rather old)?  va_copy is a C99 feature, and was introduced as __va_copy 
well before 1999.  (__va_copy was in gcc 2.95.3 for example, and 2.3.1 
builds on platforms with __va_copy and not va_copy.)


Your second point seems to be covered by the instructions to set umask 
appropriately: people who have are not having to change permissions after 
installation.


On Tue, 13 Jun 2006, kenji.rikitake at acm.org wrote:

> Full_Name: Kenji Rikitake
> Version: 2.3.1
> OS: FreeBSD 4.11-RELEASE-p18
> Submission from: (NULL) (220.157.163.221)
>
>
> After doing
> ./configure --disable-mbcs
> (as default in FreeBSD 4.x)

Why do you claim that is `default in FreeBSD 4.x'?

> and
> make
> the compilation stops at src/main/printutils.c as:
> printutils.c: In function `Rvprintf':
> printutils.c:582: `va_start' used in function with fixed args
> printutils.c:591: syntax error before `}'
>
> the following patch includes two fixes:
>
> 1) removing unnecessary va_start() and va_end() macro for Rvprintf() in
>   src/main/printutils.c
> 2) fixing error by adding {} around calling error() in src/main/printutils.c
>
> --- src/main/printutils.c.FCS   Mon Apr 10 07:19:28 2006
> +++ src/main/printutils.c       Tue Jun 13 12:07:05 2006
> @@ -579,14 +579,15 @@
>       (con->vfprintf)(con, format, argcopy);
>       va_end(argcopy);
> #else /* don't support sink(,split=TRUE) */
> -      va_start(arg, format);
> +      /* va_start(arg, format); */ /* not for FREEBSD_4 */
>       (con->vfprintf)(con, format, arg);
> -      va_end(arg);
> +      /* va_end(arg); */
> +      /* not for FREEBSD_4 */
> #endif
>       con->fflush(con);
>       con_num = getActiveSink(i++);
> #ifndef HAVE_VA_COPY
> -      if (con_num>0) error("Internal error: this platform does not support
> split output")
> +      if (con_num>0) {error("Internal error: this platform does not support
> split output");}
> #endif
>     } while(con_num>0);
>
> Also, I needed to fix the permission after doing
> make install
> using the following set of commands:
>
> cd /usr/local/lib/R/exec
> chmod 0755 R
> cd /usr/local/lib/R/lib
> chmod 0755 libRlapack.so
> cd /usr/local/lib/R/base
> chmod 755 Meta R R-ex demo help html latex man po
> find . -type d -not -perm -001 | xargs chmod go+rx
> find . -type f -and -not -perm -444 | xargs chmod go+r
> cd /usr/local/lib/R/modules
> chmod 755 *.so
>
> [End of bug report]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Tue Jun 13 08:04:10 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 13 Jun 2006 07:04:10 +0100 (BST)
Subject: [Rd] Building R package: make pdf & _masked_by_GlobalEnv
In-Reply-To: <5.2.1.1.2.20060612224250.03218f78@postoffice9.mail.cornell.edu>
References: <5.2.1.1.2.20060612204709.0318b4b0@postoffice9.mail.cornell.edu>
	<5.2.1.1.2.20060612204709.0318b4b0@postoffice9.mail.cornell.edu>
	<5.2.1.1.2.20060612224250.03218f78@postoffice9.mail.cornell.edu>
Message-ID: <Pine.LNX.4.64.0606130657440.23931@gannet.stats.ox.ac.uk>

On Mon, 12 Jun 2006, Dan Rabosky wrote:

>
>>>
>>> I am assembling an R package (under Windows XP, R v.2.3) and have a very
>>> basic question.  Running R CMD build does not generate a pdf.  R CMD
>>> check generates a .dvi, but I cannot figure out how to automatically
>>> create the pdf.  I thought from reading the "writing r extensions' manual
>>> that R CMD build was supposed to generate the pdf.  I am having no
>>> success using various permutations of the Rd2dvi and texi2dvi, and I'm a
>>> bit frustrated.  I have miktex 2.4, which should (I thought) have the
>>> necessary pdftex tools to do this.  Maybe it does; I definitely have
>>> various directories named 'dvipdfm', 'pdftex', etc on my computer, but I
>>> have no idea whether there might be a problem.
>>
>> You need to give a bit more detail.  What is the .pdf being created
>> from?  What do things look like when you run a build?  Does install work?
>
> I guess I'm not sure what the .pdf is being created from - I don't know how
> this works.  I assumed that my set of .Rd files from the man dir would
> automatically be converted into .pdf, much like 'check' reads them into a
> dvi document.   When I run a build, I get an archive with all of my .R

[Assuming things which are not in the documentation is not a good idea.]

> source files, the DESCRIPTION, the .Rd files, my datafiles, and any
> documentation I've placed in inst/doc.  When I install this from CMD, the
> html help & chtml files compile, examples are copied from the /man
> directory to their own .Rd files, and everything - to me - appears
> OK.  'Install' from R CMD works with no problem - it warns me that my
> 'examples' directory is empty, but it proceeds to create the examples from
> my .Rd files anyway.
>
> I only get a .dvi manual when running 'check'.

Yes, 'check' only checks that the latex can be compiled.  It is not trying 
to create usable output for you: for that use R CMD Rd2dvi.

E.g. for a PDF manual for package grDevices, use

R CMD Rd2dvi --pdf .../library/grDevices

which works for me.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From kenji.rikitake at acm.org  Tue Jun 13 08:18:52 2006
From: kenji.rikitake at acm.org (Kenji Rikitake)
Date: Tue, 13 Jun 2006 15:18:52 +0900
Subject: [Rd] R-2.3.1 does not install on FreeBSD 4.11-RELEASE (PR#8971)
In-Reply-To: <Pine.LNX.4.64.0606130640470.23931@gannet.stats.ox.ac.uk>
References: <20060613041358.3C1621DD9E@slim.kubism.ku.dk>
	<Pine.LNX.4.64.0606130640470.23931@gannet.stats.ox.ac.uk>
Message-ID: <20060613061852.GA84364%kenji.rikitake@acm.org>

Prof. Ripley:

In the message <Pine.LNX.4.64.0606130640470.23931 at gannet.stats.ox.ac.uk>
dated Tue, Jun 13, 2006 at 06:53:20AM +0100,
Prof Brian Ripley <ripley at stats.ox.ac.uk> writes:
> The first point is already changed in R-patched: please try it and 
> confirm. [...]

I'm compiling the kit R-patched_2006-06-12.tar.gz right now.  The buggy
code is surely removed and it's keep on building well.

> What architecture and compiler is this (and is FreeBSD 4.11-RELEASE not 
> rather old)?  va_copy is a C99 feature, and was introduced as __va_copy 
> well before 1999.  (__va_copy was in gcc 2.95.3 for example, and 2.3.1 
> builds on platforms with __va_copy and not va_copy.)

gcc 2.95.4 on FreeBSD 4.11-RELEASE-p18; note that stdarg(3) says

STANDARDS
     The va_start(), va_arg(), and va_end() macros conform to ISO/IEC
     9899:1990 (``ISO C90'').

And va_copy() does not exist.  I think this is a common FreeBSD-related
problem, fixed in a later release, on 5.x or 6.x.

> Your second point seems to be covered by the instructions to set umask 
> appropriately: people who have are not having to change permissions after 
> installation.

I set umask to 0022 manually and did "make install" from tcsh, but
didn't get the permission flags straighten out.  I'll check this out
again, though I think I need to investigate a bit.

> >./configure --disable-mbcs

> Why do you claim that is `default in FreeBSD 4.x'?

All I know is that in FreeBSD ports math/R and on 4.x, --disable-mbcs
had been required to get around with the broken MBCS library handling of
FreeBSD.  So I followed the convention.

Many thanks for your help.

// Kenji Rikitake


From ripley at stats.ox.ac.uk  Tue Jun 13 08:19:00 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 13 Jun 2006 07:19:00 +0100 (BST)
Subject: [Rd] normalizePath() warning
In-Reply-To: <448E20BE.9090701@stats.uwo.ca>
References: <448DD44B.60204@jhsph.edu> <448E20BE.9090701@stats.uwo.ca>
Message-ID: <Pine.LNX.4.64.0606130712030.24883@gannet.stats.ox.ac.uk>

On Mon, 12 Jun 2006, Duncan Murdoch wrote:

> On 6/12/2006 4:53 PM, Roger D. Peng wrote:
>> I've been getting the following warning after running 'install.packages()' recently:
>>
>> Warning message:
>> insufficient OS support on this platform in: normalizePath(path)
>>
>> Does anyone know what this means?  And does anyone know how I can get rid of the
>> warning?  I've just installed R on a fresh FC5 system so I feel I might have
>> forgotten to install a package/library or something.
>
> This is printed when your R source was compiled without these defines:
>
> #if defined(HAVE_GETCWD) && defined(HAVE_REALPATH)
>
> I guess you can look in your config log to see why you don't have those.

This worked for me on a vanilla FC5 system.  I guess the issue is likely 
to be realpath, whose definition is enclosed by

#if defined __USE_BSD || defined __USE_XOPEN_EXTENDED
#endif

so I would review the compiler options used:  -std=gnu99 is recommended 
(and selected by default).  I do get the warning with -std=c89 and 
-std=c99.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Tue Jun 13 08:25:24 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 13 Jun 2006 07:25:24 +0100 (BST)
Subject: [Rd] R-2.3.1 does not install on FreeBSD 4.11-RELEASE (PR#8971)
In-Reply-To: <20060613061852.GA84364%kenji.rikitake@acm.org>
References: <20060613041358.3C1621DD9E@slim.kubism.ku.dk>
	<Pine.LNX.4.64.0606130640470.23931@gannet.stats.ox.ac.uk>
	<20060613061852.GA84364%kenji.rikitake@acm.org>
Message-ID: <Pine.LNX.4.64.0606130719520.24883@gannet.stats.ox.ac.uk>

On Tue, 13 Jun 2006, Kenji Rikitake wrote:

> Prof. Ripley:
>
> In the message <Pine.LNX.4.64.0606130640470.23931 at gannet.stats.ox.ac.uk>
> dated Tue, Jun 13, 2006 at 06:53:20AM +0100,
> Prof Brian Ripley <ripley at stats.ox.ac.uk> writes:
>> The first point is already changed in R-patched: please try it and
>> confirm. [...]
>
> I'm compiling the kit R-patched_2006-06-12.tar.gz right now.  The buggy
> code is surely removed and it's keep on building well.
>
>> What architecture and compiler is this (and is FreeBSD 4.11-RELEASE not
>> rather old)?  va_copy is a C99 feature, and was introduced as __va_copy
>> well before 1999.  (__va_copy was in gcc 2.95.3 for example, and 2.3.1
>> builds on platforms with __va_copy and not va_copy.)
>
> gcc 2.95.4 on FreeBSD 4.11-RELEASE-p18; note that stdarg(3) says
>
> STANDARDS
>     The va_start(), va_arg(), and va_end() macros conform to ISO/IEC
>     9899:1990 (``ISO C90'').
>
> And va_copy() does not exist.  I think this is a common FreeBSD-related
> problem, fixed in a later release, on 5.x or 6.x.

__va_copy is supposed to exist on that compiler, and the R code maps 
__va_copy to va_copy when the first exists and the second does not.


>> Your second point seems to be covered by the instructions to set umask
>> appropriately: people who have are not having to change permissions after
>> installation.
>
> I set umask to 0022 manually and did "make install" from tcsh, but
> didn't get the permission flags straighten out.  I'll check this out
> again, though I think I need to investigate a bit.

You need to set umask when you unpack and build, not just when you 
install.


>>> ./configure --disable-mbcs
>
>> Why do you claim that is `default in FreeBSD 4.x'?
>
> All I know is that in FreeBSD ports math/R and on 4.x, --disable-mbcs
> had been required to get around with the broken MBCS library handling of
> FreeBSD.  So I followed the convention.

Ah, `convention' rather than default (R's configure does not set it).


>
> Many thanks for your help.
>
> // Kenji Rikitake
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From kenji.rikitake at acm.org  Tue Jun 13 08:49:10 2006
From: kenji.rikitake at acm.org (Kenji Rikitake)
Date: Tue, 13 Jun 2006 15:49:10 +0900
Subject: [Rd] R-2.3.1 does not install on FreeBSD 4.11-RELEASE (PR#8971)
In-Reply-To: <Pine.LNX.4.64.0606130719520.24883@gannet.stats.ox.ac.uk>
References: <20060613041358.3C1621DD9E@slim.kubism.ku.dk>
	<Pine.LNX.4.64.0606130640470.23931@gannet.stats.ox.ac.uk>
	<20060613061852.GA84364%kenji.rikitake@acm.org>
	<Pine.LNX.4.64.0606130719520.24883@gannet.stats.ox.ac.uk>
Message-ID: <20060613064910.GA16745%kenji.rikitake@acm.org>

In the message <Pine.LNX.4.64.0606130719520.24883 at gannet.stats.ox.ac.uk>
dated Tue, Jun 13, 2006 at 07:25:01AM +0100,
Prof Brian Ripley <ripley at stats.ox.ac.uk> writes:
> __va_copy is supposed to exist on that compiler, and the R code maps 
> __va_copy to va_copy when the first exists and the second does not.

Unfortunately configure did not find the __va_copy either.
It says in the config.log:

configure:31136: checking whether __va_copy exists and is declared
configure:31169: gcc -o conftest -g -O2 -D__NO_MATH_INLINES -I/usr/local/include
  -L/usr/local/lib conftest.c -lm  >&5
conftest.c: In function `main':
conftest.c:115: `__va_copy' undeclared (first use in this function)
conftest.c:115: (Each undeclared identifier is reported only once
conftest.c:115: for each function it appears in.)
configure:31175: $? = 1
configure: failed program was:
[rest deleted]

This seems to be well-known, regarding the Google search results of "FreeBSD va_copy".

> You need to set umask when you unpack and build, not just when you 
> install.

OK I will do that.

> >All I know is that in FreeBSD ports math/R and on 4.x, --disable-mbcs
> >had been required to get around with the broken MBCS library handling of
> >FreeBSD.  So I followed the convention.
> 
> Ah, `convention' rather than default (R's configure does not set it).

Sorry for being ambiguous on this.

Many thanks again,

// Kenji Rikitake


From nicolas.turenne at jouy.inra.fr  Tue Jun 13 12:03:29 2006
From: nicolas.turenne at jouy.inra.fr (Nicolas Turenne)
Date: Tue, 13 Jun 2006 12:03:29 +0200
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448DA8D4.5050704@statistik.uni-dortmund.de>
References: <448D81F9.8040406@jouy.inra.fr>	<448D864F.2070704@stats.uwo.ca>	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>	<448D955F.9050201@jouy.inra.fr>
	<448D9790.5030609@stats.uwo.ca> <448DA538.8050100@jouy.inra.fr>
	<448DA8D4.5050704@statistik.uni-dortmund.de>
Message-ID: <448E8D71.40301@jouy.inra.fr>

i follow your recommendation writing this :
in the description file
Depends: R (>= 2.3), quadprog, ade4, spdep
Imports: quadprog, ade4, spdep

in the namespace file
useDynLib(quadprog)
useDynLib(spdep)
useDynLib(ade4)
importFrom("ade4", "dist.dudi")
importFrom("quadprog", "solve.QP")
importFrom("ade4", "mstree")
importFrom("ade4", "neig2mat")
importFrom("ade4", "dist.dudi")
importFrom("ade4", "dudi.pca")
importFrom("ade4", "dudi.coa")
importFrom("spdep", "knearneigh")

and the result of compiling is :
  preparing package svcR for lazy loading
Erreur dans loadNamespace(ns, lib.loc) : le package 'quadprog' n'a pas 
d'espace de noms
Ex?cution arr?t?e
make: *** [lazyload] Error 1
*** Installation of svcR failed ***

it says that quadprog has not a namespace
perhaps it is due to location of quadprog.dll
i have put it into inst/src directory

thank for help

Nicolas

Uwe Ligges a ?crit :

> Nicolas Turenne wrote:
>
>> your answer is correct after checking some doc
>> but examples are rare
>>
>> when i write in the description file
>> Depends: R (>= 2.3), quadprog, ade4, spdep
>> and in the namespcae file
>>
>> useDynLib(quadprog)
>> useDynLib(spdep)
>> useDynLib(ade4)
>> importFrom("dist.dudi", "ade4")
>
>
>
> Please do it the right way (package name first!):
>
> importFrom("ade4", "dist.dudi")
>
> Uwe Ligges
>
>
>
>
>> importFrom("solve.QP", "quadprog")
>> importFrom("mstree", "ade4")
>> importFrom("neig2mat", "ade4")
>> importFrom("dist.dudi", "ade4")
>> importFrom("dudi.pca", "ade4")
>> importFrom("dudi.coa", "ade4")
>> importFrom("knearneigh", "spdep")
>>
>> i obtain :
>> Namespace dependencies not required:
>>   dist.dudi dudi.coa dudi.pca knearneigh mstree neig2mat solve.QP
>>
>> if i delete the importFrom lines
>> i get an error about "loading / namespace not succesful" for svcr
>>
>> i think the solution is not far but it is disturbing
>>
>> thank for help
>>
>> ---
>> Nicolas
>>
>>
>> Duncan Murdoch a ?crit :
>>
>>> On 6/12/2006 12:25 PM, Nicolas Turenne wrote:
>>>
>>>> in that sense, it is useless to load the library from R source code 
>>>> making my package
>>>> which is supposed to include it and load it
>>>>
>>>> so if i understand the R philosophy it is not possible to load dll 
>>>> from outside ;
>>>> the user has to load my package  and manually has to load the 
>>>> necessary libraries
>>>> each time he has to use my library,  right ?
>>>
>>>
>>> Not at all.  When set up correctly, the user should just need to say
>>> library(svcR) and all necessary packages and DLLs will be loaded.
>>>
>>> The way to specify other packages is through the "Depends" line in 
>>> the DESCRIPTION file, and/or the import/importFrom lines in your 
>>> NAMESPACE file.
>>>
>>> Duncan Murdoch
>>>
>>>> -- 
>>>> Nicolas
>>>>
>>>> Prof Brian Ripley a ?crit :
>>>>
>>>>> And also to load  the package, maybe with
>>>>>
>>>>> rterm R_DEFAULT_PACKAGES=NULL
>>>>>
>>>>>> library(svcR)
>>>>>
>>>>>
>>>>>
>>>>> as these messages often indicate missing package dependencies.
>>>>>
>>>>>>> * checking package subdirectories ... WARNING
>>>>>>> Subdirectory 'src' contains no source files.
>>>>>>> * checking R files for syntax errors ... OK
>>>>>>> * checking R files for library.dynam ... OK
>>>>>>> * checking S3 generic/method consistency ... WARNING
>>>>>>> Erreur : le chargement du package / espace de noms a echoue' 
>>>>>>> pour 'svcR'
>>>>>>> Sequence d'appel :
>>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>>> libraryPkgName(packag
>>>>>>> e)),
>>>>>>>        call. = FALSE, domain = NA)
>>>>>>> 1: library(package, lib.loc = lib.loc, character.only = TRUE, 
>>>>>>> verbose =
>>>>>>> FALSE)
>>>>>>> Execution arrete'e
>>>>>>> See section 'Generic functions and methods' of the 'Writing R 
>>>>>>> Extensions'
>>>>>>> manual.
>>>>>>> * checking replacement functions ... WARNING
>>>>>>> Erreur : le chargement du package / espace de noms a echoue' 
>>>>>>> pour 'svcR'
>>>>>>> Sequence d'appel :
>>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>>> libraryPkgName(packag
>>>>>>> e)),
>>>>>>
>>>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
>


From ripley at stats.ox.ac.uk  Tue Jun 13 12:07:35 2006
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Tue, 13 Jun 2006 12:07:35 +0200 (CEST)
Subject: [Rd] segfault with layout() after closing X11() device (PR#8970)
Message-ID: <20060613100735.F22F21CA7C@slim.kubism.ku.dk>

I unable to reproduce this on my Solaris 8 64-bit systems (neither 
compiled with gcc nor cc) nor any other 64-bit system.

If possible, can you run R under a suitable debugger (e.g. R -d gdb for 
gcc) and find out what is pointing to address zero.

On Tue, 13 Jun 2006, dmaszle at mendelbio.com wrote:

> Full_Name: Don Maszle
> Version: 2.3.0
> OS: Solaris 9 - 64 bit compile
> Submission from: (NULL) (206.86.87.3)
>
>
> After closing an X11() window by either clicking on the close button
> or by calling dev.off(), R 2.3.0 segfaults as shown below.  Calling layout()
> before any X11() device is opened just opens a new device and applies the
> layout.
>
> $ R
>
> R : Copyright 2006, The R Foundation for Statistical Computing
> Version 2.3.0 (2006-04-24)
> ISBN 3-900051-07-0
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
>
>> X11()
>> layout(matrix(1:2,1,2))
>> # close window with mouse, or call dev.off()
>> layout(matrix(1:2,1,2))
>
> *** caught segfault ***
> address 0, cause 'memory not mapped'
>
> Traceback:
> 1: X11()
> 2: layout(matrix(1:2, 1, 2))
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ligges at statistik.uni-dortmund.de  Tue Jun 13 12:15:42 2006
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 13 Jun 2006 12:15:42 +0200
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448E8D71.40301@jouy.inra.fr>
References: <448D81F9.8040406@jouy.inra.fr>	<448D864F.2070704@stats.uwo.ca>	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>	<448D955F.9050201@jouy.inra.fr>
	<448D9790.5030609@stats.uwo.ca> <448DA538.8050100@jouy.inra.fr>
	<448DA8D4.5050704@statistik.uni-dortmund.de>
	<448E8D71.40301@jouy.inra.fr>
Message-ID: <448E904E.6050104@statistik.uni-dortmund.de>

Nicolas Turenne wrote:
> i follow your recommendation writing this :
> in the description file
> Depends: R (>= 2.3), quadprog, ade4, spdep
> Imports: quadprog, ade4, spdep
> 
> in the namespace file
> useDynLib(quadprog)
> useDynLib(spdep)
> useDynLib(ade4)
> importFrom("ade4", "dist.dudi")
> importFrom("quadprog", "solve.QP")
> importFrom("ade4", "mstree")
> importFrom("ade4", "neig2mat")
> importFrom("ade4", "dist.dudi")
> importFrom("ade4", "dudi.pca")
> importFrom("ade4", "dudi.coa")
> importFrom("spdep", "knearneigh")
> 
> and the result of compiling is :
>  preparing package svcR for lazy loading
> Erreur dans loadNamespace(ns, lib.loc) : le package 'quadprog' n'a pas 
> d'espace de noms
> Ex?cution arr?t?e
> make: *** [lazyload] Error 1
> *** Installation of svcR failed ***
> 
> it says that quadprog has not a namespace
> perhaps it is due to location of quadprog.dll
> i have put it into inst/src directory


If you want to use the CRAN package quadprog, you should import its 
functionality, but do NOT load its dynamic library with useDynLib(), 
this will be done by the namespace mechanismsm.
Why do you want to put its dll anywhere? Simply install the package 
quadprog and use it in your namespace by the import directives!

Uwe Ligges





> thank for help
> 
> Nicolas
> 
> Uwe Ligges a ?crit :
> 
>> Nicolas Turenne wrote:
>>
>>> your answer is correct after checking some doc
>>> but examples are rare
>>>
>>> when i write in the description file
>>> Depends: R (>= 2.3), quadprog, ade4, spdep
>>> and in the namespcae file
>>>
>>> useDynLib(quadprog)
>>> useDynLib(spdep)
>>> useDynLib(ade4)
>>> importFrom("dist.dudi", "ade4")
>>
>>
>>
>> Please do it the right way (package name first!):
>>
>> importFrom("ade4", "dist.dudi")
>>
>> Uwe Ligges
>>
>>
>>
>>
>>> importFrom("solve.QP", "quadprog")
>>> importFrom("mstree", "ade4")
>>> importFrom("neig2mat", "ade4")
>>> importFrom("dist.dudi", "ade4")
>>> importFrom("dudi.pca", "ade4")
>>> importFrom("dudi.coa", "ade4")
>>> importFrom("knearneigh", "spdep")
>>>
>>> i obtain :
>>> Namespace dependencies not required:
>>>   dist.dudi dudi.coa dudi.pca knearneigh mstree neig2mat solve.QP
>>>
>>> if i delete the importFrom lines
>>> i get an error about "loading / namespace not succesful" for svcr
>>>
>>> i think the solution is not far but it is disturbing
>>>
>>> thank for help
>>>
>>> ---
>>> Nicolas
>>>
>>>
>>> Duncan Murdoch a ?crit :
>>>
>>>> On 6/12/2006 12:25 PM, Nicolas Turenne wrote:
>>>>
>>>>> in that sense, it is useless to load the library from R source code 
>>>>> making my package
>>>>> which is supposed to include it and load it
>>>>>
>>>>> so if i understand the R philosophy it is not possible to load dll 
>>>>> from outside ;
>>>>> the user has to load my package  and manually has to load the 
>>>>> necessary libraries
>>>>> each time he has to use my library,  right ?
>>>>
>>>>
>>>> Not at all.  When set up correctly, the user should just need to say
>>>> library(svcR) and all necessary packages and DLLs will be loaded.
>>>>
>>>> The way to specify other packages is through the "Depends" line in 
>>>> the DESCRIPTION file, and/or the import/importFrom lines in your 
>>>> NAMESPACE file.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>> -- 
>>>>> Nicolas
>>>>>
>>>>> Prof Brian Ripley a ?crit :
>>>>>
>>>>>> And also to load  the package, maybe with
>>>>>>
>>>>>> rterm R_DEFAULT_PACKAGES=NULL
>>>>>>
>>>>>>> library(svcR)
>>>>>>
>>>>>>
>>>>>>
>>>>>> as these messages often indicate missing package dependencies.
>>>>>>
>>>>>>>> * checking package subdirectories ... WARNING
>>>>>>>> Subdirectory 'src' contains no source files.
>>>>>>>> * checking R files for syntax errors ... OK
>>>>>>>> * checking R files for library.dynam ... OK
>>>>>>>> * checking S3 generic/method consistency ... WARNING
>>>>>>>> Erreur : le chargement du package / espace de noms a echoue' 
>>>>>>>> pour 'svcR'
>>>>>>>> Sequence d'appel :
>>>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>>>> libraryPkgName(packag
>>>>>>>> e)),
>>>>>>>>        call. = FALSE, domain = NA)
>>>>>>>> 1: library(package, lib.loc = lib.loc, character.only = TRUE, 
>>>>>>>> verbose =
>>>>>>>> FALSE)
>>>>>>>> Execution arrete'e
>>>>>>>> See section 'Generic functions and methods' of the 'Writing R 
>>>>>>>> Extensions'
>>>>>>>> manual.
>>>>>>>> * checking replacement functions ... WARNING
>>>>>>>> Erreur : le chargement du package / espace de noms a echoue' 
>>>>>>>> pour 'svcR'
>>>>>>>> Sequence d'appel :
>>>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>>>> libraryPkgName(packag
>>>>>>>> e)),
>>>>>>>
>>>>>>>
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>
>>>>
>>>>
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>>


From murdoch at stats.uwo.ca  Tue Jun 13 12:35:10 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 13 Jun 2006 06:35:10 -0400
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448E8D71.40301@jouy.inra.fr>
References: <448D81F9.8040406@jouy.inra.fr>	<448D864F.2070704@stats.uwo.ca>	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>	<448D955F.9050201@jouy.inra.fr>	<448D9790.5030609@stats.uwo.ca>
	<448DA538.8050100@jouy.inra.fr>	<448DA8D4.5050704@statistik.uni-dortmund.de>
	<448E8D71.40301@jouy.inra.fr>
Message-ID: <448E94DE.6090903@stats.uwo.ca>

Nicolas Turenne wrote:
> i follow your recommendation writing this :
> in the description file
> Depends: R (>= 2.3), quadprog, ade4, spdep
> Imports: quadprog, ade4, spdep
>
> in the namespace file
> useDynLib(quadprog)
> useDynLib(spdep)
> useDynLib(ade4)
> importFrom("ade4", "dist.dudi")
> importFrom("quadprog", "solve.QP")
> importFrom("ade4", "mstree")
> importFrom("ade4", "neig2mat")
> importFrom("ade4", "dist.dudi")
> importFrom("ade4", "dudi.pca")
> importFrom("ade4", "dudi.coa")
> importFrom("spdep", "knearneigh")
>   

I think you are doing too much! 

1.  You should not use "useDynLib" for the DLL from another package.  
Let the other package load its own DLL.

2.  If you declare that your package Depends on the other packages, then 
they will be loaded and attached, and the importFrom lines will not be 
needed. 

"Import"ing and "Depend"ing are similar but not identical concepts.  
Routines that are imported are available to your package *before* the 
global environment (i.e. user workspace).  Routines that are in packages 
attached by Depends come after the global environment, so there's a 
possibility that the user could create a routine named e.g. "mstree", 
and your code would use that version, rather than the one from ade4.  So 
normally "Imports" is better than "Depends".

However, it appears that you can only import packages that have a 
namespace.  (I was unaware of this restriction; perhaps it's not really 
true, and the error message means something else.)

So you can probably get rid of the error message by using only Depends, 
but you may want to keep the Imports from packages other than quadprog.

Duncan Murdoch
> and the result of compiling is :
>   preparing package svcR for lazy loading
> Erreur dans loadNamespace(ns, lib.loc) : le package 'quadprog' n'a pas 
> d'espace de noms
> Ex?cution arr?t?e
> make: *** [lazyload] Error 1
> *** Installation of svcR failed ***
>
> it says that quadprog has not a namespace
> perhaps it is due to location of quadprog.dll
> i have put it into inst/src directory
>
> thank for help
>
> Nicolas
>
> Uwe Ligges a ?crit :
>
>   
>> Nicolas Turenne wrote:
>>
>>     
>>> your answer is correct after checking some doc
>>> but examples are rare
>>>
>>> when i write in the description file
>>> Depends: R (>= 2.3), quadprog, ade4, spdep
>>> and in the namespcae file
>>>
>>> useDynLib(quadprog)
>>> useDynLib(spdep)
>>> useDynLib(ade4)
>>> importFrom("dist.dudi", "ade4")
>>>       
>>
>> Please do it the right way (package name first!):
>>
>> importFrom("ade4", "dist.dudi")
>>
>> Uwe Ligges
>>
>>
>>
>>
>>     
>>> importFrom("solve.QP", "quadprog")
>>> importFrom("mstree", "ade4")
>>> importFrom("neig2mat", "ade4")
>>> importFrom("dist.dudi", "ade4")
>>> importFrom("dudi.pca", "ade4")
>>> importFrom("dudi.coa", "ade4")
>>> importFrom("knearneigh", "spdep")
>>>
>>> i obtain :
>>> Namespace dependencies not required:
>>>   dist.dudi dudi.coa dudi.pca knearneigh mstree neig2mat solve.QP
>>>
>>> if i delete the importFrom lines
>>> i get an error about "loading / namespace not succesful" for svcr
>>>
>>> i think the solution is not far but it is disturbing
>>>
>>> thank for help
>>>
>>> ---
>>> Nicolas
>>>
>>>
>>> Duncan Murdoch a ?crit :
>>>
>>>       
>>>> On 6/12/2006 12:25 PM, Nicolas Turenne wrote:
>>>>
>>>>         
>>>>> in that sense, it is useless to load the library from R source code 
>>>>> making my package
>>>>> which is supposed to include it and load it
>>>>>
>>>>> so if i understand the R philosophy it is not possible to load dll 
>>>>> from outside ;
>>>>> the user has to load my package  and manually has to load the 
>>>>> necessary libraries
>>>>> each time he has to use my library,  right ?
>>>>>           
>>>> Not at all.  When set up correctly, the user should just need to say
>>>> library(svcR) and all necessary packages and DLLs will be loaded.
>>>>
>>>> The way to specify other packages is through the "Depends" line in 
>>>> the DESCRIPTION file, and/or the import/importFrom lines in your 
>>>> NAMESPACE file.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>         
>>>>> -- 
>>>>> Nicolas
>>>>>
>>>>> Prof Brian Ripley a ?crit :
>>>>>
>>>>>           
>>>>>> And also to load  the package, maybe with
>>>>>>
>>>>>> rterm R_DEFAULT_PACKAGES=NULL
>>>>>>
>>>>>>             
>>>>>>> library(svcR)
>>>>>>>               
>>>>>>
>>>>>> as these messages often indicate missing package dependencies.
>>>>>>
>>>>>>             
>>>>>>>> * checking package subdirectories ... WARNING
>>>>>>>> Subdirectory 'src' contains no source files.
>>>>>>>> * checking R files for syntax errors ... OK
>>>>>>>> * checking R files for library.dynam ... OK
>>>>>>>> * checking S3 generic/method consistency ... WARNING
>>>>>>>> Erreur : le chargement du package / espace de noms a echoue' 
>>>>>>>> pour 'svcR'
>>>>>>>> Sequence d'appel :
>>>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>>>> libraryPkgName(packag
>>>>>>>> e)),
>>>>>>>>        call. = FALSE, domain = NA)
>>>>>>>> 1: library(package, lib.loc = lib.loc, character.only = TRUE, 
>>>>>>>> verbose =
>>>>>>>> FALSE)
>>>>>>>> Execution arrete'e
>>>>>>>> See section 'Generic functions and methods' of the 'Writing R 
>>>>>>>> Extensions'
>>>>>>>> manual.
>>>>>>>> * checking replacement functions ... WARNING
>>>>>>>> Erreur : le chargement du package / espace de noms a echoue' 
>>>>>>>> pour 'svcR'
>>>>>>>> Sequence d'appel :
>>>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>>>> libraryPkgName(packag
>>>>>>>> e)),
>>>>>>>>                 
>>>>>>>               
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>           
>>>>
>>>>         
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>       
>>
>>     
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From jenskeienburg at gmx.de  Tue Jun 13 12:38:12 2006
From: jenskeienburg at gmx.de (jenskeienburg at gmx.de)
Date: Tue, 13 Jun 2006 12:38:12 +0200 (CEST)
Subject: [Rd] poly(*,*) in lm() (PR#8972)
Message-ID: <20060613103812.870F74C890@slim.kubism.ku.dk>

Full_Name: Jens Keienburg
Version: 2.3.0
OS: Windows XP
Submission from: (NULL) (193.174.53.122)


I used the function lm() to calculate the coefficients of a polynome. If I used
the function poly(t,2) to denote a polynome of form 1 + x + x^2, the
coefficients are wrong. I appended an excerpt below:

> t=1:100
> p=-20 - 10 * t + 2 * t^2
> p
  [1]   -28   -32   -32   -28   -20    -8     8    28    52    80   112   148  
188   232   280   332   388   448   512
 [20]   580   652   728   808   892   980  1072  1168  1268  1372  1480  1592 
1708  1828  1952  2080  2212  2348  2488
 [39]  2632  2780  2932  3088  3248  3412  3580  3752  3928  4108  4292  4480 
4672  4868  5068  5272  5480  5692  5908
 [58]  6128  6352  6580  6812  7048  7288  7532  7780  8032  8288  8548  8812 
9080  9352  9628  9908 10192 10480 10772
 [77] 11068 11368 11672 11980 12292 12608 12928 13252 13580 13912 14248 14588
14932 15280 15632 15988 16348 16712 17080
 [96] 17452 17828 18208 18592 18980
> model_p = lm( p ~ poly(t,2))
> model_p

Call:
lm(formula = p ~ poly(t, 2))

Coefficients:
(Intercept)  poly(t, 2)1  poly(t, 2)2  
       6242        55423        14903  

> model_p = lm( p ~ 1 + t + I(t^2))
> model_p

Call:
lm(formula = p ~ 1 + t + I(t^2))

Coefficients:
(Intercept)            t       I(t^2)  
        -20          -10            2  


Best wishes,
Jens Keienburg


From nicolas.turenne at jouy.inra.fr  Tue Jun 13 12:52:47 2006
From: nicolas.turenne at jouy.inra.fr (Nicolas Turenne)
Date: Tue, 13 Jun 2006 12:52:47 +0200
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448E94DE.6090903@stats.uwo.ca>
References: <448D81F9.8040406@jouy.inra.fr>	<448D864F.2070704@stats.uwo.ca>	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>	<448D955F.9050201@jouy.inra.fr>	<448D9790.5030609@stats.uwo.ca>
	<448DA538.8050100@jouy.inra.fr>	<448DA8D4.5050704@statistik.uni-dortmund.de>
	<448E8D71.40301@jouy.inra.fr> <448E94DE.6090903@stats.uwo.ca>
Message-ID: <448E98FF.4060607@jouy.inra.fr>

it looks strange...

if i do only the compiling with the package "spdep"
and i avoid useDynLib, it compiles well,
but with the package "ade4" and "quadprog" it claims that
packages has no namespace
Erreur dans loadNamespace(ns, lib.loc) : le package 'quadprog' n'a pas 
d'espace de noms

do you have an explanation ?
thank for help

---
Nicolas

Duncan Murdoch a ?crit :

> Nicolas Turenne wrote:
>
>> i follow your recommendation writing this :
>> in the description file
>> Depends: R (>= 2.3), quadprog, ade4, spdep
>> Imports: quadprog, ade4, spdep
>>
>> in the namespace file
>> useDynLib(quadprog)
>> useDynLib(spdep)
>> useDynLib(ade4)
>> importFrom("ade4", "dist.dudi")
>> importFrom("quadprog", "solve.QP")
>> importFrom("ade4", "mstree")
>> importFrom("ade4", "neig2mat")
>> importFrom("ade4", "dist.dudi")
>> importFrom("ade4", "dudi.pca")
>> importFrom("ade4", "dudi.coa")
>> importFrom("spdep", "knearneigh")
>>   
>
>
> I think you are doing too much!
> 1.  You should not use "useDynLib" for the DLL from another package.  
> Let the other package load its own DLL.
>
> 2.  If you declare that your package Depends on the other packages, 
> then they will be loaded and attached, and the importFrom lines will 
> not be needed.
> "Import"ing and "Depend"ing are similar but not identical concepts.  
> Routines that are imported are available to your package *before* the 
> global environment (i.e. user workspace).  Routines that are in 
> packages attached by Depends come after the global environment, so 
> there's a possibility that the user could create a routine named e.g. 
> "mstree", and your code would use that version, rather than the one 
> from ade4.  So normally "Imports" is better than "Depends".
>
> However, it appears that you can only import packages that have a 
> namespace.  (I was unaware of this restriction; perhaps it's not 
> really true, and the error message means something else.)
>
> So you can probably get rid of the error message by using only 
> Depends, but you may want to keep the Imports from packages other than 
> quadprog.
>
> Duncan Murdoch
>
>> and the result of compiling is :
>>   preparing package svcR for lazy loading
>> Erreur dans loadNamespace(ns, lib.loc) : le package 'quadprog' n'a 
>> pas d'espace de noms
>> Ex?cution arr?t?e
>> make: *** [lazyload] Error 1
>> *** Installation of svcR failed ***
>>
>> it says that quadprog has not a namespace
>> perhaps it is due to location of quadprog.dll
>> i have put it into inst/src directory
>>
>> thank for help
>>
>> Nicolas
>>
>> Uwe Ligges a ?crit :
>>
>>  
>>
>>> Nicolas Turenne wrote:
>>>
>>>    
>>>
>>>> your answer is correct after checking some doc
>>>> but examples are rare
>>>>
>>>> when i write in the description file
>>>> Depends: R (>= 2.3), quadprog, ade4, spdep
>>>> and in the namespcae file
>>>>
>>>> useDynLib(quadprog)
>>>> useDynLib(spdep)
>>>> useDynLib(ade4)
>>>> importFrom("dist.dudi", "ade4")
>>>>       
>>>
>>>
>>> Please do it the right way (package name first!):
>>>
>>> importFrom("ade4", "dist.dudi")
>>>
>>> Uwe Ligges
>>>
>>>
>>>
>>>
>>>    
>>>
>>>> importFrom("solve.QP", "quadprog")
>>>> importFrom("mstree", "ade4")
>>>> importFrom("neig2mat", "ade4")
>>>> importFrom("dist.dudi", "ade4")
>>>> importFrom("dudi.pca", "ade4")
>>>> importFrom("dudi.coa", "ade4")
>>>> importFrom("knearneigh", "spdep")
>>>>
>>>> i obtain :
>>>> Namespace dependencies not required:
>>>>   dist.dudi dudi.coa dudi.pca knearneigh mstree neig2mat solve.QP
>>>>
>>>> if i delete the importFrom lines
>>>> i get an error about "loading / namespace not succesful" for svcr
>>>>
>>>> i think the solution is not far but it is disturbing
>>>>
>>>> thank for help
>>>>
>>>> ---
>>>> Nicolas
>>>>
>>>>
>>>> Duncan Murdoch a ?crit :
>>>>
>>>>      
>>>>
>>>>> On 6/12/2006 12:25 PM, Nicolas Turenne wrote:
>>>>>
>>>>>        
>>>>>
>>>>>> in that sense, it is useless to load the library from R source 
>>>>>> code making my package
>>>>>> which is supposed to include it and load it
>>>>>>
>>>>>> so if i understand the R philosophy it is not possible to load 
>>>>>> dll from outside ;
>>>>>> the user has to load my package  and manually has to load the 
>>>>>> necessary libraries
>>>>>> each time he has to use my library,  right ?
>>>>>>           
>>>>>
>>>>> Not at all.  When set up correctly, the user should just need to say
>>>>> library(svcR) and all necessary packages and DLLs will be loaded.
>>>>>
>>>>> The way to specify other packages is through the "Depends" line in 
>>>>> the DESCRIPTION file, and/or the import/importFrom lines in your 
>>>>> NAMESPACE file.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>        
>>>>>
>>>>>> -- 
>>>>>> Nicolas
>>>>>>
>>>>>> Prof Brian Ripley a ?crit :
>>>>>>
>>>>>>          
>>>>>>
>>>>>>> And also to load  the package, maybe with
>>>>>>>
>>>>>>> rterm R_DEFAULT_PACKAGES=NULL
>>>>>>>
>>>>>>>            
>>>>>>>
>>>>>>>> library(svcR)
>>>>>>>>               
>>>>>>>
>>>>>>>
>>>>>>> as these messages often indicate missing package dependencies.
>>>>>>>
>>>>>>>            
>>>>>>>
>>>>>>>>> * checking package subdirectories ... WARNING
>>>>>>>>> Subdirectory 'src' contains no source files.
>>>>>>>>> * checking R files for syntax errors ... OK
>>>>>>>>> * checking R files for library.dynam ... OK
>>>>>>>>> * checking S3 generic/method consistency ... WARNING
>>>>>>>>> Erreur : le chargement du package / espace de noms a echoue' 
>>>>>>>>> pour 'svcR'
>>>>>>>>> Sequence d'appel :
>>>>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>>>>> libraryPkgName(packag
>>>>>>>>> e)),
>>>>>>>>>        call. = FALSE, domain = NA)
>>>>>>>>> 1: library(package, lib.loc = lib.loc, character.only = TRUE, 
>>>>>>>>> verbose =
>>>>>>>>> FALSE)
>>>>>>>>> Execution arrete'e
>>>>>>>>> See section 'Generic functions and methods' of the 'Writing R 
>>>>>>>>> Extensions'
>>>>>>>>> manual.
>>>>>>>>> * checking replacement functions ... WARNING
>>>>>>>>> Erreur : le chargement du package / espace de noms a echoue' 
>>>>>>>>> pour 'svcR'
>>>>>>>>> Sequence d'appel :
>>>>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>>>>> libraryPkgName(packag
>>>>>>>>> e)),
>>>>>>>>>                 
>>>>>>>>
>>>>>>>>               
>>>>>>>
>>>>>> ______________________________________________
>>>>>> R-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>>           
>>>>>
>>>>>
>>>>>         
>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>       
>>>
>>>
>>>     
>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>   
>
>
>


From murdoch at stats.uwo.ca  Tue Jun 13 13:12:15 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 13 Jun 2006 07:12:15 -0400
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448E98FF.4060607@jouy.inra.fr>
References: <448D81F9.8040406@jouy.inra.fr>	<448D864F.2070704@stats.uwo.ca>	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>	<448D955F.9050201@jouy.inra.fr>	<448D9790.5030609@stats.uwo.ca>	<448DA538.8050100@jouy.inra.fr>	<448DA8D4.5050704@statistik.uni-dortmund.de>	<448E8D71.40301@jouy.inra.fr>
	<448E94DE.6090903@stats.uwo.ca> <448E98FF.4060607@jouy.inra.fr>
Message-ID: <448E9D8F.9080804@stats.uwo.ca>

Nicolas Turenne wrote:
> it looks strange...
>
> if i do only the compiling with the package "spdep"
> and i avoid useDynLib, it compiles well,
> but with the package "ade4" and "quadprog" it claims that
> packages has no namespace
> Erreur dans loadNamespace(ns, lib.loc) : le package 'quadprog' n'a pas 
> d'espace de noms
>
> do you have an explanation ?
>   

No, I don't.  When I install quadprog I do see a NAMESPACE file.  Which 
version are you using?  Mine is 1.4-8.  (Use library(help="quadprog") to 
see information on the installed package).


> thank for help
>
> ---
> Nicolas
>
> Duncan Murdoch a ?crit :
>
>   
>> Nicolas Turenne wrote:
>>
>>     
>>> i follow your recommendation writing this :
>>> in the description file
>>> Depends: R (>= 2.3), quadprog, ade4, spdep
>>> Imports: quadprog, ade4, spdep
>>>
>>> in the namespace file
>>> useDynLib(quadprog)
>>> useDynLib(spdep)
>>> useDynLib(ade4)
>>> importFrom("ade4", "dist.dudi")
>>> importFrom("quadprog", "solve.QP")
>>> importFrom("ade4", "mstree")
>>> importFrom("ade4", "neig2mat")
>>> importFrom("ade4", "dist.dudi")
>>> importFrom("ade4", "dudi.pca")
>>> importFrom("ade4", "dudi.coa")
>>> importFrom("spdep", "knearneigh")
>>>   
>>>       
>> I think you are doing too much!
>> 1.  You should not use "useDynLib" for the DLL from another package.  
>> Let the other package load its own DLL.
>>
>> 2.  If you declare that your package Depends on the other packages, 
>> then they will be loaded and attached, and the importFrom lines will 
>> not be needed.
>> "Import"ing and "Depend"ing are similar but not identical concepts.  
>> Routines that are imported are available to your package *before* the 
>> global environment (i.e. user workspace).  Routines that are in 
>> packages attached by Depends come after the global environment, so 
>> there's a possibility that the user could create a routine named e.g. 
>> "mstree", and your code would use that version, rather than the one 
>> from ade4.  So normally "Imports" is better than "Depends".
>>
>> However, it appears that you can only import packages that have a 
>> namespace.  (I was unaware of this restriction; perhaps it's not 
>> really true, and the error message means something else.)
>>
>> So you can probably get rid of the error message by using only 
>> Depends, but you may want to keep the Imports from packages other than 
>> quadprog.
>>
>> Duncan Murdoch
>>
>>     
>>> and the result of compiling is :
>>>   preparing package svcR for lazy loading
>>> Erreur dans loadNamespace(ns, lib.loc) : le package 'quadprog' n'a 
>>> pas d'espace de noms
>>> Ex?cution arr?t?e
>>> make: *** [lazyload] Error 1
>>> *** Installation of svcR failed ***
>>>
>>> it says that quadprog has not a namespace
>>> perhaps it is due to location of quadprog.dll
>>> i have put it into inst/src directory
>>>
>>> thank for help
>>>
>>> Nicolas
>>>
>>> Uwe Ligges a ?crit :
>>>
>>>  
>>>
>>>       
>>>> Nicolas Turenne wrote:
>>>>
>>>>    
>>>>
>>>>         
>>>>> your answer is correct after checking some doc
>>>>> but examples are rare
>>>>>
>>>>> when i write in the description file
>>>>> Depends: R (>= 2.3), quadprog, ade4, spdep
>>>>> and in the namespcae file
>>>>>
>>>>> useDynLib(quadprog)
>>>>> useDynLib(spdep)
>>>>> useDynLib(ade4)
>>>>> importFrom("dist.dudi", "ade4")
>>>>>       
>>>>>           
>>>> Please do it the right way (package name first!):
>>>>
>>>> importFrom("ade4", "dist.dudi")
>>>>
>>>> Uwe Ligges
>>>>
>>>>
>>>>
>>>>
>>>>    
>>>>
>>>>         
>>>>> importFrom("solve.QP", "quadprog")
>>>>> importFrom("mstree", "ade4")
>>>>> importFrom("neig2mat", "ade4")
>>>>> importFrom("dist.dudi", "ade4")
>>>>> importFrom("dudi.pca", "ade4")
>>>>> importFrom("dudi.coa", "ade4")
>>>>> importFrom("knearneigh", "spdep")
>>>>>
>>>>> i obtain :
>>>>> Namespace dependencies not required:
>>>>>   dist.dudi dudi.coa dudi.pca knearneigh mstree neig2mat solve.QP
>>>>>
>>>>> if i delete the importFrom lines
>>>>> i get an error about "loading / namespace not succesful" for svcr
>>>>>
>>>>> i think the solution is not far but it is disturbing
>>>>>
>>>>> thank for help
>>>>>
>>>>> ---
>>>>> Nicolas
>>>>>
>>>>>
>>>>> Duncan Murdoch a ?crit :
>>>>>
>>>>>      
>>>>>
>>>>>           
>>>>>> On 6/12/2006 12:25 PM, Nicolas Turenne wrote:
>>>>>>
>>>>>>        
>>>>>>
>>>>>>             
>>>>>>> in that sense, it is useless to load the library from R source 
>>>>>>> code making my package
>>>>>>> which is supposed to include it and load it
>>>>>>>
>>>>>>> so if i understand the R philosophy it is not possible to load 
>>>>>>> dll from outside ;
>>>>>>> the user has to load my package  and manually has to load the 
>>>>>>> necessary libraries
>>>>>>> each time he has to use my library,  right ?
>>>>>>>           
>>>>>>>               
>>>>>> Not at all.  When set up correctly, the user should just need to say
>>>>>> library(svcR) and all necessary packages and DLLs will be loaded.
>>>>>>
>>>>>> The way to specify other packages is through the "Depends" line in 
>>>>>> the DESCRIPTION file, and/or the import/importFrom lines in your 
>>>>>> NAMESPACE file.
>>>>>>
>>>>>> Duncan Murdoch
>>>>>>
>>>>>>        
>>>>>>
>>>>>>             
>>>>>>> -- 
>>>>>>> Nicolas
>>>>>>>
>>>>>>> Prof Brian Ripley a ?crit :
>>>>>>>
>>>>>>>          
>>>>>>>
>>>>>>>               
>>>>>>>> And also to load  the package, maybe with
>>>>>>>>
>>>>>>>> rterm R_DEFAULT_PACKAGES=NULL
>>>>>>>>
>>>>>>>>            
>>>>>>>>
>>>>>>>>                 
>>>>>>>>> library(svcR)
>>>>>>>>>               
>>>>>>>>>                   
>>>>>>>> as these messages often indicate missing package dependencies.
>>>>>>>>
>>>>>>>>            
>>>>>>>>
>>>>>>>>                 
>>>>>>>>>> * checking package subdirectories ... WARNING
>>>>>>>>>> Subdirectory 'src' contains no source files.
>>>>>>>>>> * checking R files for syntax errors ... OK
>>>>>>>>>> * checking R files for library.dynam ... OK
>>>>>>>>>> * checking S3 generic/method consistency ... WARNING
>>>>>>>>>> Erreur : le chargement du package / espace de noms a echoue' 
>>>>>>>>>> pour 'svcR'
>>>>>>>>>> Sequence d'appel :
>>>>>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>>>>>> libraryPkgName(packag
>>>>>>>>>> e)),
>>>>>>>>>>        call. = FALSE, domain = NA)
>>>>>>>>>> 1: library(package, lib.loc = lib.loc, character.only = TRUE, 
>>>>>>>>>> verbose =
>>>>>>>>>> FALSE)
>>>>>>>>>> Execution arrete'e
>>>>>>>>>> See section 'Generic functions and methods' of the 'Writing R 
>>>>>>>>>> Extensions'
>>>>>>>>>> manual.
>>>>>>>>>> * checking replacement functions ... WARNING
>>>>>>>>>> Erreur : le chargement du package / espace de noms a echoue' 
>>>>>>>>>> pour 'svcR'
>>>>>>>>>> Sequence d'appel :
>>>>>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>>>>>> libraryPkgName(packag
>>>>>>>>>> e)),
>>>>>>>>>>                 
>>>>>>>>>>                     
>>>>>>>>>               
>>>>>>>>>                   
>>>>>>> ______________________________________________
>>>>>>> R-devel at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>>>           
>>>>>>>               
>>>>>>         
>>>>>>             
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>       
>>>>>           
>>>>     
>>>>         
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>   
>>>       
>>
>>     
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From nicolas.turenne at jouy.inra.fr  Tue Jun 13 13:13:21 2006
From: nicolas.turenne at jouy.inra.fr (Nicolas Turenne)
Date: Tue, 13 Jun 2006 13:13:21 +0200
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448E94DE.6090903@stats.uwo.ca>
References: <448D81F9.8040406@jouy.inra.fr>	<448D864F.2070704@stats.uwo.ca>	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>	<448D955F.9050201@jouy.inra.fr>	<448D9790.5030609@stats.uwo.ca>
	<448DA538.8050100@jouy.inra.fr>	<448DA8D4.5050704@statistik.uni-dortmund.de>
	<448E8D71.40301@jouy.inra.fr> <448E94DE.6090903@stats.uwo.ca>
Message-ID: <448E9DD1.9010401@jouy.inra.fr>

it works fine if i avoid importFrom directive
thank you very much

i have a last question
the R source code cannot admit gloval variable ? because i have global 
variables
and i get the following message after loading my package by the command 
'library(svcR)':

The following object(s) are masked _by_ .GlobalEnv : findModelCluster


thank for help

--
Nicolas


Duncan Murdoch a ?crit :

> Nicolas Turenne wrote:
>
>> i follow your recommendation writing this :
>> in the description file
>> Depends: R (>= 2.3), quadprog, ade4, spdep
>> Imports: quadprog, ade4, spdep
>>
>> in the namespace file
>> useDynLib(quadprog)
>> useDynLib(spdep)
>> useDynLib(ade4)
>> importFrom("ade4", "dist.dudi")
>> importFrom("quadprog", "solve.QP")
>> importFrom("ade4", "mstree")
>> importFrom("ade4", "neig2mat")
>> importFrom("ade4", "dist.dudi")
>> importFrom("ade4", "dudi.pca")
>> importFrom("ade4", "dudi.coa")
>> importFrom("spdep", "knearneigh")
>>   
>
>
> I think you are doing too much!
> 1.  You should not use "useDynLib" for the DLL from another package.  
> Let the other package load its own DLL.
>
> 2.  If you declare that your package Depends on the other packages, 
> then they will be loaded and attached, and the importFrom lines will 
> not be needed.
> "Import"ing and "Depend"ing are similar but not identical concepts.  
> Routines that are imported are available to your package *before* the 
> global environment (i.e. user workspace).  Routines that are in 
> packages attached by Depends come after the global environment, so 
> there's a possibility that the user could create a routine named e.g. 
> "mstree", and your code would use that version, rather than the one 
> from ade4.  So normally "Imports" is better than "Depends".
>
> However, it appears that you can only import packages that have a 
> namespace.  (I was unaware of this restriction; perhaps it's not 
> really true, and the error message means something else.)
>
> So you can probably get rid of the error message by using only 
> Depends, but you may want to keep the Imports from packages other than 
> quadprog.
>
> Duncan Murdoch
>
>> and the result of compiling is :
>>   preparing package svcR for lazy loading
>> Erreur dans loadNamespace(ns, lib.loc) : le package 'quadprog' n'a 
>> pas d'espace de noms
>> Ex?cution arr?t?e
>> make: *** [lazyload] Error 1
>> *** Installation of svcR failed ***
>>
>> it says that quadprog has not a namespace
>> perhaps it is due to location of quadprog.dll
>> i have put it into inst/src directory
>>
>> thank for help
>>
>> Nicolas
>>
>> Uwe Ligges a ?crit :
>>
>>  
>>
>>> Nicolas Turenne wrote:
>>>
>>>    
>>>
>>>> your answer is correct after checking some doc
>>>> but examples are rare
>>>>
>>>> when i write in the description file
>>>> Depends: R (>= 2.3), quadprog, ade4, spdep
>>>> and in the namespcae file
>>>>
>>>> useDynLib(quadprog)
>>>> useDynLib(spdep)
>>>> useDynLib(ade4)
>>>> importFrom("dist.dudi", "ade4")
>>>>       
>>>
>>>
>>> Please do it the right way (package name first!):
>>>
>>> importFrom("ade4", "dist.dudi")
>>>
>>> Uwe Ligges
>>>
>>>
>>>
>>>
>>>    
>>>
>>>> importFrom("solve.QP", "quadprog")
>>>> importFrom("mstree", "ade4")
>>>> importFrom("neig2mat", "ade4")
>>>> importFrom("dist.dudi", "ade4")
>>>> importFrom("dudi.pca", "ade4")
>>>> importFrom("dudi.coa", "ade4")
>>>> importFrom("knearneigh", "spdep")
>>>>
>>>> i obtain :
>>>> Namespace dependencies not required:
>>>>   dist.dudi dudi.coa dudi.pca knearneigh mstree neig2mat solve.QP
>>>>
>>>> if i delete the importFrom lines
>>>> i get an error about "loading / namespace not succesful" for svcr
>>>>
>>>> i think the solution is not far but it is disturbing
>>>>
>>>> thank for help
>>>>
>>>> ---
>>>> Nicolas
>>>>
>>>>
>>>> Duncan Murdoch a ?crit :
>>>>
>>>>      
>>>>
>>>>> On 6/12/2006 12:25 PM, Nicolas Turenne wrote:
>>>>>
>>>>>        
>>>>>
>>>>>> in that sense, it is useless to load the library from R source 
>>>>>> code making my package
>>>>>> which is supposed to include it and load it
>>>>>>
>>>>>> so if i understand the R philosophy it is not possible to load 
>>>>>> dll from outside ;
>>>>>> the user has to load my package  and manually has to load the 
>>>>>> necessary libraries
>>>>>> each time he has to use my library,  right ?
>>>>>>           
>>>>>
>>>>> Not at all.  When set up correctly, the user should just need to say
>>>>> library(svcR) and all necessary packages and DLLs will be loaded.
>>>>>
>>>>> The way to specify other packages is through the "Depends" line in 
>>>>> the DESCRIPTION file, and/or the import/importFrom lines in your 
>>>>> NAMESPACE file.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>        
>>>>>
>>>>>> -- 
>>>>>> Nicolas
>>>>>>
>>>>>> Prof Brian Ripley a ?crit :
>>>>>>
>>>>>>          
>>>>>>
>>>>>>> And also to load  the package, maybe with
>>>>>>>
>>>>>>> rterm R_DEFAULT_PACKAGES=NULL
>>>>>>>
>>>>>>>            
>>>>>>>
>>>>>>>> library(svcR)
>>>>>>>>               
>>>>>>>
>>>>>>>
>>>>>>> as these messages often indicate missing package dependencies.
>>>>>>>
>>>>>>>            
>>>>>>>
>>>>>>>>> * checking package subdirectories ... WARNING
>>>>>>>>> Subdirectory 'src' contains no source files.
>>>>>>>>> * checking R files for syntax errors ... OK
>>>>>>>>> * checking R files for library.dynam ... OK
>>>>>>>>> * checking S3 generic/method consistency ... WARNING
>>>>>>>>> Erreur : le chargement du package / espace de noms a echoue' 
>>>>>>>>> pour 'svcR'
>>>>>>>>> Sequence d'appel :
>>>>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>>>>> libraryPkgName(packag
>>>>>>>>> e)),
>>>>>>>>>        call. = FALSE, domain = NA)
>>>>>>>>> 1: library(package, lib.loc = lib.loc, character.only = TRUE, 
>>>>>>>>> verbose =
>>>>>>>>> FALSE)
>>>>>>>>> Execution arrete'e
>>>>>>>>> See section 'Generic functions and methods' of the 'Writing R 
>>>>>>>>> Extensions'
>>>>>>>>> manual.
>>>>>>>>> * checking replacement functions ... WARNING
>>>>>>>>> Erreur : le chargement du package / espace de noms a echoue' 
>>>>>>>>> pour 'svcR'
>>>>>>>>> Sequence d'appel :
>>>>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>>>>> libraryPkgName(packag
>>>>>>>>> e)),
>>>>>>>>>                 
>>>>>>>>
>>>>>>>>               
>>>>>>>
>>>>>> ______________________________________________
>>>>>> R-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>>           
>>>>>
>>>>>
>>>>>         
>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>       
>>>
>>>
>>>     
>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>   
>
>
>


From juan.felipe at consultant.com  Tue Jun 13 13:24:44 2006
From: juan.felipe at consultant.com (juan.felipe at consultant.com)
Date: Tue, 13 Jun 2006 13:24:44 +0200 (CEST)
Subject: [Rd] Ganador del premio (winner of a prize) (PR#8973)
Message-ID: <20060613112444.4CE9128F8F@slim.kubism.ku.dk>

--qzsoft_directmail_seperator
Content-Type: text/plain;
	charset="DEFAULT"
Content-Transfer-Encoding: base64

TE9UT0JPTk8gUy5BLgpMT1RFUklBIE5BQ0lPTkFMIFBST01PQ0lPTi9QUkVNSU9TClBhc2VvIERl
IExhIENhc3RlbGxhbmEKNS00NSwgMjgwMDggTWFkcmlkLgpTcGFpbiBCcmFuY2guClRlbDo5MTY0
NDY5NTIKRmF4OjkxNjQ0Njk1MwpSZWYuIE66OiBFUy8wMDcvMDUvMTIvTUFELgpCYXRjaC4gTro6
IEVTUC83ODQwNy80NTEvMDYuCgpXZSB3aXNoIHRvIGNvbmdyYXR1bGF0ZSB5b3Ugb3ZlciB5b3Vy
IGVtYWlsIHN1Y2Nlc3MgaW4gb3VyIGNvbXB1dGVyIEJhbGxvdGluZyBzd2VlcHN0YWtlIGhlbGQg
b24gMm5kIEpVTkUsMjAwNi4gVGhpcyBpcyBhIE1pbGxlbm5pdW0gU2NpZW50aWZpYyBjb21wdXRl
ciBnYW1lIGluIHdoaWNoIGVtYWlsIGFkZHJlc3NlcyBhbmQgbmFtZXMgd2VyZSB1c2VkLiBJdCBp
cyBhIFByb21vdGlvbmFsIHByb2dyYW0gYWltZWQgYXQgZW5jb3VyYWdpbmcgaW50ZXJuZXQgdXNl
cnM7IHRoZXJlZm9yZSB5b3UgZG8gbm90IG5lZWQgdG8gYnV5IHRpY2tldCB0byBlbnRlciBmb3Ig
aXQuCgpZb3VyIGVtYWlsIGFkZHJlc3MgYXR0YWNoZWQgdG8gdGlja2V0IHN0YXIgbnVtYmVyICg5
qi8yuikgZHJldyB0aGUgRVVST01JTExJT04vIExPVEVSSUEgTkFDSU9OQUwgbnVtYmVycyA1LTAt
MC00LTkgd2hpY2ggY29uc2VxdWVudGx5IHdvbiB0aGUgZHJhdyBpbiB0aGUgU2Vjb25kIGNhdGVn
b3J5LiBZb3UgaGF2ZSBiZWVuIGFwcHJvdmluZyBmb3IgdGhlIHN0YXIgcHJpemUgb2YgIDc2Nywy
NDguMjYugCAoU2V2ZW4gSHVuZHJlZCBBbmQgU2l4dHkgU2V2ZW4gVGhvdXNhbmQsIFR3byBIdW5k
cmVkIEFuZCBGb3J0eSBFaWdodCBFdXJvcyBUd2VudHkgU2l4IENlbnRzKQoKQ09OR1JBVFVMQVRJ
T05TISEhCgpUbyBiZWdpbiB5b3VyIGxvdHRlcnkgY2xhaW0sIHBsZWFzZSBjb250YWN0IHlvdXIg
Y2xhaW1zIGFnZW50LCBNUiBSQVVMIFNBTkNIRVoKRm9yZWlnbiBvcGVyYXRpb25zIG1hbmFnZXIs
IAoKQ09GSURJUyAgU0VDVVJJVFkgJiBGSU5BTkNFICBTQSAoU1BBSU4pClRlbDogMDAtMzQtNjU5
LTQyOC01NzIgICAKRmF4OiAgMDAtMzQtOTQwLTQ2Mi0yOTIgCkVtYWlsOiBzci5zYW5jaGV6N0B5
YWhvby5jb20KCgpmb3IgdGhlIHByb2Nlc3NpbmcgYW5kIHJlbWl0dGFuY2Ugb2YgeW91ciB3aW5u
aW5nIHByaXplICB0byBhIGRlc2lnbmF0aW9uIG9mIHlvdXIgY2hvaWNlLgoKUmVtZW1iZXIsIGFs
bCBwcml6ZSBtb25leSBtdXN0IGJlIGNsYWltZWQgbm90IGxhdGVyIHRoYW4sIDMwdGggb2YgIEpV
TkUsIDIwMDYuIEFmdGVyIHRoaXMgZGF0ZSBhbGwgZnVuZHMgd2lsbCBiZSByZXR1cm5lZCB0byB0
aGUgTUlOSVNUUlkgREUgRUNPTk9NSUEgWSBIQUNJRU5EQSBhcyB1bmNsYWltZWQuICAKUGxlYXNl
IHJlbWVtYmVyIHRvIHF1b3RlIHlvdXIgcmVmZXJlbmNlIGFuZCB3aW5uaW5nIG51bWJlcnMgaW4g
YWxsIGNvcnJlc3BvbmRlbmNlcyB3aXRoIHlvdXIgY2xhaW1zIG9mZmljZXIuCgpDb25ncmF0dWxh
dGlvbnMgb25jZSBhZ2FpbiBmcm9tIGFsbCBvdXIgbWVtYmVycyBvZiBzdGFmZiBhbmQgdGhhbmsg
eW91IGZvciBiZWluZyBhIHBhcnQgb2Ygb3VyIEludGVybmF0aW9uYWwgcHJvbW90aW9ucyBwcm9n
cmFtLgoKU2luY2VyZWx5LAoKTG90dGVyeSBjb29yZGluYXRvci4KTXIuIEpVQU4gRkVMSVBFIEFD
RUJFRE8gCgpUaGUgaW5mb3JtYXRpb24gdHJhbnNtaXR0ZWQgaXMgaW50ZW5kZWQgb25seSBmb3Ig
dGhlIHBlcnNvbiBvciBlbnRpdHkgLlRvIHdob20gb3Igd2hpY2ggaXQgaXMgYWRkcmVzc2VkLiBV
bmF1dGhvcml6ZWQgdXNlLCBkaXNjbG9zdXJlIG9yIGNvcHlpbmcgaXMgc3RyaWN0bHkgcHJvaGli
aXRlZC4gVGhlIHNlbmRlciBhY2NlcHRzIG5vIGxpYWJpbGl0eSBmb3IgdGhlIGltcHJvcGVyIHRy
YW5zbWlzc2lvbiBvZiB0aGlzIGNvbW11bmljYXRpb24gbm9yIGZvciBhbnkgZGVsYXkgaW4gaXRz
IHJlY2VpcHQuCg==

--qzsoft_directmail_seperator--


From bhs2 at mevik.net  Tue Jun 13 13:35:28 2006
From: bhs2 at mevik.net (=?iso-8859-1?q?Bj=F8rn-Helge_Mevik?=)
Date: Tue, 13 Jun 2006 13:35:28 +0200
Subject: [Rd] poly(*,*) in lm() (PR#8972)
In-Reply-To: <20060613103812.870F74C890@slim.kubism.ku.dk>
	(jenskeienburg@gmx.de's
	message of "Tue, 13 Jun 2006 12:38:12 +0200 (CEST)")
References: <20060613103812.870F74C890@slim.kubism.ku.dk>
Message-ID: <m0r71tffun.fsf@bar.nemo-project.org>

> I used the function lm() to calculate the coefficients of a polynome. If I used
> the function poly(t,2) to denote a polynome of form 1 + x + x^2, the
> coefficients are wrong.

If you take a look at the manual page for poly, you will find that
poly (by default) will calculate _orthogonal_ polynomials, which are
not the same as 1, x, x^2, etc.

-- 
Bj?rn-Helge Mevik


From murdoch at stats.uwo.ca  Tue Jun 13 13:58:20 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 13 Jun 2006 07:58:20 -0400
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448E9DD1.9010401@jouy.inra.fr>
References: <448D81F9.8040406@jouy.inra.fr>	<448D864F.2070704@stats.uwo.ca>	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>	<448D955F.9050201@jouy.inra.fr>	<448D9790.5030609@stats.uwo.ca>
	<448DA538.8050100@jouy.inra.fr>	<448DA8D4.5050704@statistik.uni-dortmund.de>
	<448E8D71.40301@jouy.inra.fr> <448E94DE.6090903@stats.uwo.ca>
	<448E9DD1.9010401@jouy.inra.fr>
Message-ID: <448EA85C.40604@stats.uwo.ca>

Nicolas Turenne wrote:
> it works fine if i avoid importFrom directive
> thank you very much
>
> i have a last question
> the R source code cannot admit gloval variable ? because i have global 
> variables
> and i get the following message after loading my package by the command 
> 'library(svcR)':
>
> The following object(s) are masked _by_ .GlobalEnv : findModelCluster
>   
R has a reasonably sophisticated scheme for setting the scope of 
variables.  Variables in the base package are "global" for most 
purposes.  Variables in the user workspace are global in the sense that 
they are visible to most functions.

What the error message means is that you have two variables named 
findModelCluster, in two locations:  one in the user workspace 
(.GlobalEnv), and another in your package.  Since you are using a 
namespace, your package code will see your copy, but most other users 
will see the .GlobalEnv copy.

If this isn't enough to clear things up, you should describe what you 
want to do, rather than how you want to do it.  Terms like "global 
variables" from other languages don't always make sense in R.

Duncan Murdoch
>
> thank for help
>
> --
> Nicolas
>
>
> Duncan Murdoch a ?crit :
>
>   
>> Nicolas Turenne wrote:
>>
>>     
>>> i follow your recommendation writing this :
>>> in the description file
>>> Depends: R (>= 2.3), quadprog, ade4, spdep
>>> Imports: quadprog, ade4, spdep
>>>
>>> in the namespace file
>>> useDynLib(quadprog)
>>> useDynLib(spdep)
>>> useDynLib(ade4)
>>> importFrom("ade4", "dist.dudi")
>>> importFrom("quadprog", "solve.QP")
>>> importFrom("ade4", "mstree")
>>> importFrom("ade4", "neig2mat")
>>> importFrom("ade4", "dist.dudi")
>>> importFrom("ade4", "dudi.pca")
>>> importFrom("ade4", "dudi.coa")
>>> importFrom("spdep", "knearneigh")
>>>   
>>>       
>> I think you are doing too much!
>> 1.  You should not use "useDynLib" for the DLL from another package.  
>> Let the other package load its own DLL.
>>
>> 2.  If you declare that your package Depends on the other packages, 
>> then they will be loaded and attached, and the importFrom lines will 
>> not be needed.
>> "Import"ing and "Depend"ing are similar but not identical concepts.  
>> Routines that are imported are available to your package *before* the 
>> global environment (i.e. user workspace).  Routines that are in 
>> packages attached by Depends come after the global environment, so 
>> there's a possibility that the user could create a routine named e.g. 
>> "mstree", and your code would use that version, rather than the one 
>> from ade4.  So normally "Imports" is better than "Depends".
>>
>> However, it appears that you can only import packages that have a 
>> namespace.  (I was unaware of this restriction; perhaps it's not 
>> really true, and the error message means something else.)
>>
>> So you can probably get rid of the error message by using only 
>> Depends, but you may want to keep the Imports from packages other than 
>> quadprog.
>>
>> Duncan Murdoch
>>
>>     
>>> and the result of compiling is :
>>>   preparing package svcR for lazy loading
>>> Erreur dans loadNamespace(ns, lib.loc) : le package 'quadprog' n'a 
>>> pas d'espace de noms
>>> Ex?cution arr?t?e
>>> make: *** [lazyload] Error 1
>>> *** Installation of svcR failed ***
>>>
>>> it says that quadprog has not a namespace
>>> perhaps it is due to location of quadprog.dll
>>> i have put it into inst/src directory
>>>
>>> thank for help
>>>
>>> Nicolas
>>>
>>> Uwe Ligges a ?crit :
>>>
>>>  
>>>
>>>       
>>>> Nicolas Turenne wrote:
>>>>
>>>>    
>>>>
>>>>         
>>>>> your answer is correct after checking some doc
>>>>> but examples are rare
>>>>>
>>>>> when i write in the description file
>>>>> Depends: R (>= 2.3), quadprog, ade4, spdep
>>>>> and in the namespcae file
>>>>>
>>>>> useDynLib(quadprog)
>>>>> useDynLib(spdep)
>>>>> useDynLib(ade4)
>>>>> importFrom("dist.dudi", "ade4")
>>>>>       
>>>>>           
>>>> Please do it the right way (package name first!):
>>>>
>>>> importFrom("ade4", "dist.dudi")
>>>>
>>>> Uwe Ligges
>>>>
>>>>
>>>>
>>>>
>>>>    
>>>>
>>>>         
>>>>> importFrom("solve.QP", "quadprog")
>>>>> importFrom("mstree", "ade4")
>>>>> importFrom("neig2mat", "ade4")
>>>>> importFrom("dist.dudi", "ade4")
>>>>> importFrom("dudi.pca", "ade4")
>>>>> importFrom("dudi.coa", "ade4")
>>>>> importFrom("knearneigh", "spdep")
>>>>>
>>>>> i obtain :
>>>>> Namespace dependencies not required:
>>>>>   dist.dudi dudi.coa dudi.pca knearneigh mstree neig2mat solve.QP
>>>>>
>>>>> if i delete the importFrom lines
>>>>> i get an error about "loading / namespace not succesful" for svcr
>>>>>
>>>>> i think the solution is not far but it is disturbing
>>>>>
>>>>> thank for help
>>>>>
>>>>> ---
>>>>> Nicolas
>>>>>
>>>>>
>>>>> Duncan Murdoch a ?crit :
>>>>>
>>>>>      
>>>>>
>>>>>           
>>>>>> On 6/12/2006 12:25 PM, Nicolas Turenne wrote:
>>>>>>
>>>>>>        
>>>>>>
>>>>>>             
>>>>>>> in that sense, it is useless to load the library from R source 
>>>>>>> code making my package
>>>>>>> which is supposed to include it and load it
>>>>>>>
>>>>>>> so if i understand the R philosophy it is not possible to load 
>>>>>>> dll from outside ;
>>>>>>> the user has to load my package  and manually has to load the 
>>>>>>> necessary libraries
>>>>>>> each time he has to use my library,  right ?
>>>>>>>           
>>>>>>>               
>>>>>> Not at all.  When set up correctly, the user should just need to say
>>>>>> library(svcR) and all necessary packages and DLLs will be loaded.
>>>>>>
>>>>>> The way to specify other packages is through the "Depends" line in 
>>>>>> the DESCRIPTION file, and/or the import/importFrom lines in your 
>>>>>> NAMESPACE file.
>>>>>>
>>>>>> Duncan Murdoch
>>>>>>
>>>>>>        
>>>>>>
>>>>>>             
>>>>>>> -- 
>>>>>>> Nicolas
>>>>>>>
>>>>>>> Prof Brian Ripley a ?crit :
>>>>>>>
>>>>>>>          
>>>>>>>
>>>>>>>               
>>>>>>>> And also to load  the package, maybe with
>>>>>>>>
>>>>>>>> rterm R_DEFAULT_PACKAGES=NULL
>>>>>>>>
>>>>>>>>            
>>>>>>>>
>>>>>>>>                 
>>>>>>>>> library(svcR)
>>>>>>>>>               
>>>>>>>>>                   
>>>>>>>> as these messages often indicate missing package dependencies.
>>>>>>>>
>>>>>>>>            
>>>>>>>>
>>>>>>>>                 
>>>>>>>>>> * checking package subdirectories ... WARNING
>>>>>>>>>> Subdirectory 'src' contains no source files.
>>>>>>>>>> * checking R files for syntax errors ... OK
>>>>>>>>>> * checking R files for library.dynam ... OK
>>>>>>>>>> * checking S3 generic/method consistency ... WARNING
>>>>>>>>>> Erreur : le chargement du package / espace de noms a echoue' 
>>>>>>>>>> pour 'svcR'
>>>>>>>>>> Sequence d'appel :
>>>>>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>>>>>> libraryPkgName(packag
>>>>>>>>>> e)),
>>>>>>>>>>        call. = FALSE, domain = NA)
>>>>>>>>>> 1: library(package, lib.loc = lib.loc, character.only = TRUE, 
>>>>>>>>>> verbose =
>>>>>>>>>> FALSE)
>>>>>>>>>> Execution arrete'e
>>>>>>>>>> See section 'Generic functions and methods' of the 'Writing R 
>>>>>>>>>> Extensions'
>>>>>>>>>> manual.
>>>>>>>>>> * checking replacement functions ... WARNING
>>>>>>>>>> Erreur : le chargement du package / espace de noms a echoue' 
>>>>>>>>>> pour 'svcR'
>>>>>>>>>> Sequence d'appel :
>>>>>>>>>> 2: stop(gettextf("package/namespace load failed for '%s'",
>>>>>>>>>> libraryPkgName(packag
>>>>>>>>>> e)),
>>>>>>>>>>                 
>>>>>>>>>>                     
>>>>>>>>>               
>>>>>>>>>                   
>>>>>>> ______________________________________________
>>>>>>> R-devel at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>>>           
>>>>>>>               
>>>>>>         
>>>>>>             
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>       
>>>>>           
>>>>     
>>>>         
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>   
>>>       
>>
>>


From nicolas.turenne at jouy.inra.fr  Tue Jun 13 14:04:15 2006
From: nicolas.turenne at jouy.inra.fr (Nicolas Turenne)
Date: Tue, 13 Jun 2006 14:04:15 +0200
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448E9D8F.9080804@stats.uwo.ca>
References: <448D81F9.8040406@jouy.inra.fr>	<448D864F.2070704@stats.uwo.ca>	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>	<448D955F.9050201@jouy.inra.fr>	<448D9790.5030609@stats.uwo.ca>	<448DA538.8050100@jouy.inra.fr>	<448DA8D4.5050704@statistik.uni-dortmund.de>	<448E8D71.40301@jouy.inra.fr>
	<448E94DE.6090903@stats.uwo.ca> <448E98FF.4060607@jouy.inra.fr>
	<448E9D8F.9080804@stats.uwo.ca>
Message-ID: <448EA9BF.4070305@jouy.inra.fr>

i solve the problem of masked GlobalEnv which is induced from conflicts 
with
objects in memory
removing objects before installing the package solves the warning message

Nicolas


From rpeng at jhsph.edu  Tue Jun 13 14:06:44 2006
From: rpeng at jhsph.edu (Roger D. Peng)
Date: Tue, 13 Jun 2006 08:06:44 -0400
Subject: [Rd] normalizePath() warning
In-Reply-To: <Pine.LNX.4.64.0606130712030.24883@gannet.stats.ox.ac.uk>
References: <448DD44B.60204@jhsph.edu> <448E20BE.9090701@stats.uwo.ca>
	<Pine.LNX.4.64.0606130712030.24883@gannet.stats.ox.ac.uk>
Message-ID: <448EAA54.30004@jhsph.edu>



Prof Brian Ripley wrote:
> On Mon, 12 Jun 2006, Duncan Murdoch wrote:
> 
>> On 6/12/2006 4:53 PM, Roger D. Peng wrote:
>>> I've been getting the following warning after running 
>>> 'install.packages()' recently:
>>>
>>> Warning message:
>>> insufficient OS support on this platform in: normalizePath(path)
>>>
>>> Does anyone know what this means?  And does anyone know how I can get 
>>> rid of the
>>> warning?  I've just installed R on a fresh FC5 system so I feel I 
>>> might have
>>> forgotten to install a package/library or something.
>>
>> This is printed when your R source was compiled without these defines:
>>
>> #if defined(HAVE_GETCWD) && defined(HAVE_REALPATH)
>>
>> I guess you can look in your config log to see why you don't have those.
> 
> This worked for me on a vanilla FC5 system.  I guess the issue is likely 
> to be realpath, whose definition is enclosed by
> 
> #if defined __USE_BSD || defined __USE_XOPEN_EXTENDED
> #endif
> 
> so I would review the compiler options used:  -std=gnu99 is recommended 
> (and selected by default).  I do get the warning with -std=c89 and 
> -std=c99.

Indeed, my modification of CFLAGS was the problem.  However, if I may offer a 
meager defense, the comments for CFLAGS in 'config.site' say:

	If unspecified, defaults to '-g -O2 -std=c99' for gcc

-roger

> 
> 

-- 
Roger D. Peng  |  http://www.biostat.jhsph.edu/~rpeng/


From ripley at stats.ox.ac.uk  Tue Jun 13 14:11:54 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 13 Jun 2006 13:11:54 +0100 (BST)
Subject: [Rd] normalizePath() warning
In-Reply-To: <448EAA54.30004@jhsph.edu>
References: <448DD44B.60204@jhsph.edu> <448E20BE.9090701@stats.uwo.ca>
	<Pine.LNX.4.64.0606130712030.24883@gannet.stats.ox.ac.uk>
	<448EAA54.30004@jhsph.edu>
Message-ID: <Pine.LNX.4.64.0606131309210.27228@gannet.stats.ox.ac.uk>

On Tue, 13 Jun 2006, Roger D. Peng wrote:

>
>
> Prof Brian Ripley wrote:
>> On Mon, 12 Jun 2006, Duncan Murdoch wrote:
>> 
>>> On 6/12/2006 4:53 PM, Roger D. Peng wrote:
>>>> I've been getting the following warning after running 
>>>> 'install.packages()' recently:
>>>> 
>>>> Warning message:
>>>> insufficient OS support on this platform in: normalizePath(path)
>>>> 
>>>> Does anyone know what this means?  And does anyone know how I can get rid 
>>>> of the
>>>> warning?  I've just installed R on a fresh FC5 system so I feel I might 
>>>> have
>>>> forgotten to install a package/library or something.
>>> 
>>> This is printed when your R source was compiled without these defines:
>>> 
>>> #if defined(HAVE_GETCWD) && defined(HAVE_REALPATH)
>>> 
>>> I guess you can look in your config log to see why you don't have those.
>> 
>> This worked for me on a vanilla FC5 system.  I guess the issue is likely to 
>> be realpath, whose definition is enclosed by
>> 
>> #if defined __USE_BSD || defined __USE_XOPEN_EXTENDED
>> #endif
>> 
>> so I would review the compiler options used:  -std=gnu99 is recommended 
>> (and selected by default).  I do get the warning with -std=c89 and 
>> -std=c99.
>
> Indeed, my modification of CFLAGS was the problem.  However, if I may offer a 
> meager defense, the comments for CFLAGS in 'config.site' say:
>
> 	If unspecified, defaults to '-g -O2 -std=c99' for gcc

Thanks, will update that.  I've also made the code try harder to find 
realpath even if the header has hidden it.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Tue Jun 13 14:28:52 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 13 Jun 2006 13:28:52 +0100 (BST)
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448E94DE.6090903@stats.uwo.ca>
References: <448D81F9.8040406@jouy.inra.fr> <448D864F.2070704@stats.uwo.ca>
	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>
	<448D955F.9050201@jouy.inra.fr>
	<448D9790.5030609@stats.uwo.ca> <448DA538.8050100@jouy.inra.fr>
	<448DA8D4.5050704@statistik.uni-dortmund.de>
	<448E8D71.40301@jouy.inra.fr> <448E94DE.6090903@stats.uwo.ca>
Message-ID: <Pine.LNX.4.64.0606131315100.30395@gannet.stats.ox.ac.uk>

On Tue, 13 Jun 2006, Duncan Murdoch wrote:

[...]

> However, it appears that you can only import packages that have a namespace. 
> (I was unaware of this restriction; perhaps it's not really true, and the 
> error message means something else.)

Yes, it is true but not properly documented.  The description in R-exts is

   All packages implicitly import the base name space.  Variables from
   other packages need to be imported explicitly using the directives
   @code{import} and @code{importFrom}.  The @code{import} directive
   imports all exported variables from the specified package(s).  Thus the
   directives

and that needs to be qualified in at least two ways:

- all packages with namespaces implicitly import the base name space.
- Variables from other packages with a namespace ...

as the concept of `exported variables' only applied to a namespaces.

The terminology is also a little confusing: we have

   importFrom(foo, f, g)

   specifies that the exported variables @code{f} and @code{g} of the
   package @pkg{foo} are to be imported.
   ^^^^^^^
but the error message is of the form

Error in importIntoEnv(impenv, impnames, ns, impvars) :
         object 'print.summary.lm' is not exported by 'namespace:stats'
                                                       ^^^^^^^^^

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From overeem at knmi.nl  Tue Jun 13 16:01:25 2006
From: overeem at knmi.nl (overeem at knmi.nl)
Date: Tue, 13 Jun 2006 16:01:25 +0200 (CEST)
Subject: [Rd] undesirable rounding off due to 'read.table' (PR#8974)
Message-ID: <20060613140125.A5EFC4C89E@slim.kubism.ku.dk>

Full_Name: Aart Overeem
Version: 2.2.0
OS: Linux
Submission from: (NULL) (145.23.254.155)


Construct a dataframe consisting of several variables by using 'data.frame' and
'cbind' and write it to a file with 'write.table'. The file consists of headers
and values, such as 12.4283675334551 (so 13 numbers behind the decimal point).
If this dataframe is read with 'read.table(filename, skip = 1)' or
'read.table(filename, header = TRUE') the values only have 7 numbers behind the
decimal point, e.g. 12.42837. So, the reading rounds off the values. This is not
mentioned in the manual. Although the values still have many numbers behind the
decimal point, rounding off is, in my view, never desirable.


From hin-tak.leung at cimr.cam.ac.uk  Tue Jun 13 16:22:15 2006
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Tue, 13 Jun 2006 15:22:15 +0100
Subject: [Rd] undesirable rounding off due to 'read.table' (PR#8974)
In-Reply-To: <20060613140125.A5EFC4C89E@slim.kubism.ku.dk>
References: <20060613140125.A5EFC4C89E@slim.kubism.ku.dk>
Message-ID: <448ECA17.10004@cimr.cam.ac.uk>

overeem at knmi.nl wrote:
> Full_Name: Aart Overeem
> Version: 2.2.0
> OS: Linux
> Submission from: (NULL) (145.23.254.155)
> 
> 
> Construct a dataframe consisting of several variables by using 'data.frame' and
> 'cbind' and write it to a file with 'write.table'. The file consists of headers
> and values, such as 12.4283675334551 (so 13 numbers behind the decimal point).
> If this dataframe is read with 'read.table(filename, skip = 1)' or
> 'read.table(filename, header = TRUE') the values only have 7 numbers behind the
> decimal point, e.g. 12.42837. So, the reading rounds off the values. This is not
> mentioned in the manual. Although the values still have many numbers behind the
> decimal point, rounding off is, in my view, never desirable.

Hmm, this is probably due to conversion by the scanf family of functions
(I don't know the precise location or mechanism of R doing it, this is a 
guess). It is mentioned in my manpage of sscanf:

        f      Matches an optionally signed floating-point number;
                the next pointer must be a pointer to float.
        e      Equivalent to f.
        g      Equivalent to f.
        E      Equivalent to f.
        a      (C99) Equivalent to f.

So printf/fprintf/sprintf and scanf/sscanf/fscanf are not symmetrical,
and you lose precision from 15 (double) to 7 (float). It is a
generic problem with ANSI C's printf/scanf, not specific to R.

Why don't you use save() or save.image() instead for saving and 
reloading data.frame ? It is *much faster*, you get much smaller file,
and also more accurate. Just my two cents.

HTL


From gavin.simpson at ucl.ac.uk  Tue Jun 13 16:38:10 2006
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Tue, 13 Jun 2006 15:38:10 +0100
Subject: [Rd] undesirable rounding off due to 'read.table' (PR#8974)
In-Reply-To: <20060613140125.A5EFC4C89E@slim.kubism.ku.dk>
References: <20060613140125.A5EFC4C89E@slim.kubism.ku.dk>
Message-ID: <1150209490.13235.16.camel@gsimpson.geog.ucl.ac.uk>

On Tue, 2006-06-13 at 16:01 +0200, overeem at knmi.nl wrote:
> Full_Name: Aart Overeem
> Version: 2.2.0

You are asked not to report bugs on out-dated versions of R...

> OS: Linux
> Submission from: (NULL) (145.23.254.155)
> 
> 
> Construct a dataframe consisting of several variables by using 'data.frame' and
> 'cbind' and write it to a file with 'write.table'. The file consists of headers
> and values, such as 12.4283675334551 (so 13 numbers behind the decimal point).
> If this dataframe is read with 'read.table(filename, skip = 1)' or
> 'read.table(filename, header = TRUE') the values only have 7 numbers behind the
> decimal point, e.g. 12.42837. So, the reading rounds off the values. This is not
> mentioned in the manual. Although the values still have many numbers behind the
> decimal point, rounding off is, in my view, never desirable.

Works for me in R 2.3.1 (patched)

Are you mistaking the printed representation of your data.frame for the
real thing. E.g.:

# dummy data
dat <- as.data.frame(matrix(rnorm(100)+ 0.000000000000012, ncol = 10))
# not that reading/writing has anything to do with this, but just to
# prove it
write.table(dat, file = "~/tmp/temp.csv", sep = ",")
dat <- read.table("~/tmp/temp.csv", sep = ",", header = TRUE)
dat
options(digits = 14)
dat

or

print(dat, digits = 14)

G

Ps. Wasn't sure about the etiquette of replying to R-bugs in recipients,
so deleted it in case this caused further work for the maintainer(s) of
the bug repository. Sorry if this isn't desirable.
-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
*  Note new Address, Telephone & Fax numbers from 6th April 2006  *
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
Gavin Simpson
ECRC & ENSIS                  [t] +44 (0)20 7679 0522
UCL Department of Geography   [f] +44 (0)20 7679 0565
Pearson Building              [e] gavin.simpsonATNOSPAMucl.ac.uk
Gower Street                  [w] http://www.ucl.ac.uk/~ucfagls/cv/
London, UK.                   [w] http://www.ucl.ac.uk/~ucfagls/
WC1E 6BT.
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From murdoch at stats.uwo.ca  Tue Jun 13 16:38:32 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 13 Jun 2006 10:38:32 -0400
Subject: [Rd] undesirable rounding off due to 'read.table' (PR#8974)
In-Reply-To: <20060613140125.A5EFC4C89E@slim.kubism.ku.dk>
References: <20060613140125.A5EFC4C89E@slim.kubism.ku.dk>
Message-ID: <448ECDE8.607@stats.uwo.ca>

overeem at knmi.nl wrote:
> Full_Name: Aart Overeem
> Version: 2.2.0
> OS: Linux
> Submission from: (NULL) (145.23.254.155)
>
>
> Construct a dataframe consisting of several variables by using 'data.frame' and
> 'cbind' and write it to a file with 'write.table'. The file consists of headers
> and values, such as 12.4283675334551 (so 13 numbers behind the decimal point).
> If this dataframe is read with 'read.table(filename, skip = 1)' or
> 'read.table(filename, header = TRUE') the values only have 7 numbers behind the
> decimal point, e.g. 12.42837. So, the reading rounds off the values. This is not
> mentioned in the manual. Although the values still have many numbers behind the
> decimal point, rounding off is, in my view, never desirable.
I don't see this.  Try the following script:

 > x <- data.frame(a=12.4283675334551)
 > x
         a
1 12.42837
 > write.table(x,'test')
 > y <- read.table('test')
 > y
         a
1 12.42837
 > y$a-x$a
[1] 0

If y$a had been rounded to 5 decimal places, then we would see a nonzero 
difference at the end.  I think you are being confused by the display, 
which only shows 5 decimal places, even though more are

maintained internally.  For example,

 > options(digits=20)
 > y
                 a
1 12.4283675334551


Please be careful about what you submit as a bug report.

Duncan Murdoch


From ripley at stats.ox.ac.uk  Tue Jun 13 16:51:22 2006
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Tue, 13 Jun 2006 16:51:22 +0200 (CEST)
Subject: [Rd] undesirable rounding off due to 'read.table' (PR#8974)
Message-ID: <20060613145122.A99DC4C888@slim.kubism.ku.dk>

I believe this to be a false report.  It is *printing* that rounds off the 
numbers, not the reading.

You provide no evidence of your assertions: here is a simple counter-example:

> A <- data.frame(a=12.4283675334551)
> write.table(A, "foo")
> AA <- read.table("foo")
> A
          a
1 12.42837
> AA
          a
1 12.42837
> print(AA, digits=16)
                  a
1 12.4283675334551
> AA-A
   a
1 0

The last just happens to be true in this example, as there would normally 
be a small representation error.

On Tue, 13 Jun 2006, overeem at knmi.nl wrote:

> Full_Name: Aart Overeem
> Version: 2.2.0

You are explicitly instructed to upgrade before reporting a bug.

> OS: Linux
> Submission from: (NULL) (145.23.254.155)
>
>
> Construct a dataframe consisting of several variables by using 
> 'data.frame' and 'cbind' and write it to a file with 'write.table'. The 
> file consists of headers and values, such as 12.4283675334551 (so 13 
> numbers behind the decimal point).

That is, 15 significant digits.

> If this dataframe is read with 'read.table(filename, skip = 1)' or 
> 'read.table(filename, header = TRUE') the values only have 7 numbers 
> behind the decimal point, e.g. 12.42837.

Your example has *five*, and is printed to 7 significant digits, the 
default for printing.

> So, the reading rounds off the values. This is not mentioned in the 
> manual. Although the values still have many numbers behind the decimal 
> point, rounding off is, in my view, never desirable.

Nor is submitting false reports.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jhallman at frb.gov  Tue Jun 13 20:32:07 2006
From: jhallman at frb.gov (jhallman at frb.gov)
Date: Tue, 13 Jun 2006 20:32:07 +0200 (CEST)
Subject: [Rd] format.POSIXlt drops characters following percent sign
	(PR#8975)
Message-ID: <20060613183207.5EF1328F8F@slim.kubism.ku.dk>

Full_Name: Jeff Hallman
Version: 2.3.1
OS: Windows
Submission from: (NULL) (132.200.32.34)


Internal(format.POSIXlt(as.POSIXlt(Sys.time()), "%Y%m%d%q", F)) 
      Linux R-2.2.1 returns "20060613%q".
    Windows R-2.3.1 returns "20060613" dropping the "%q".  

The documentation says "Any character in the format string other that the '%'
escape sequences is interpreted literally".  Since "%q" is nowhere listed as an
escape sequence, the Windows R-2.3.1 result appears to be incorrect.

The Unix 'date' command gives the same result as Linux R-2.2.1.


From ripley at stats.ox.ac.uk  Tue Jun 13 21:38:03 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 13 Jun 2006 20:38:03 +0100 (BST)
Subject: [Rd] format.POSIXlt drops characters following percent sign
 (PR#8975)
In-Reply-To: <20060613183207.5EF1328F8F@slim.kubism.ku.dk>
References: <20060613183207.5EF1328F8F@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.64.0606132001490.11635@gannet.stats.ox.ac.uk>

On Tue, 13 Jun 2006, jhallman at frb.gov wrote:

> Full_Name: Jeff Hallman
> Version: 2.3.1
> OS: Windows
> Submission from: (NULL) (132.200.32.34)
>
>
> Internal(format.POSIXlt(as.POSIXlt(Sys.time()), "%Y%m%d%q", F))
>      Linux R-2.2.1 returns "20060613%q".
>    Windows R-2.3.1 returns "20060613" dropping the "%q".

There is no such command as Internal: you seem to be mean .Internal but 
please use user-level functions.

> The documentation says "Any character in the format string other that 
> the '%' escape sequences is interpreted literally".  Since "%q" is 
> nowhere listed as an escape sequence, the Windows R-2.3.1 result appears 
> to be incorrect.

What the help page actually says is (no typo):

      The details of the formats are system-specific, but the following
      are defined by the ISO C / POSIX standard for 'strftime' and are
      likely to be widely available.  Any character in the format string
      other than the '%' escape sequences is interpreted literally (and
      '%%' gives '%').

The help page carefully does not say what *any* escape sequence does, nor 
what the escape sequences are: it merely indicates common behaviour.
It seems you did not look up what the standards say, which is

   If a conversion specification does not correspond to any of the above,
   the behavior is undefined.

And `undefined' is itself defined in the standards.  The Windows 
documentation does not say what it does (nor does the glibc 
documentation), not even that it is system-specific.  In fact the MSDN 
docs for strftime say

   Characters that do not begin with % are copied unchanged to strDest.

(Make of that what you can.)

Where standards are referred to, please do consult them.  The kind people 
who develop R have even provided links to them at
http://developer.r-project.org/Portability.html

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Tue Jun 13 21:38:16 2006
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Tue, 13 Jun 2006 21:38:16 +0200 (CEST)
Subject: [Rd] format.POSIXlt drops characters following percent sign
	(PR#8976)
Message-ID: <20060613193816.AF9EC29D46@slim.kubism.ku.dk>

On Tue, 13 Jun 2006, jhallman at frb.gov wrote:

> Full_Name: Jeff Hallman
> Version: 2.3.1
> OS: Windows
> Submission from: (NULL) (132.200.32.34)
>
>
> Internal(format.POSIXlt(as.POSIXlt(Sys.time()), "%Y%m%d%q", F))
>      Linux R-2.2.1 returns "20060613%q".
>    Windows R-2.3.1 returns "20060613" dropping the "%q".

There is no such command as Internal: you seem to be mean .Internal but 
please use user-level functions.

> The documentation says "Any character in the format string other that 
> the '%' escape sequences is interpreted literally".  Since "%q" is 
> nowhere listed as an escape sequence, the Windows R-2.3.1 result appears 
> to be incorrect.

What the help page actually says is (no typo):

      The details of the formats are system-specific, but the following
      are defined by the ISO C / POSIX standard for 'strftime' and are
      likely to be widely available.  Any character in the format string
      other than the '%' escape sequences is interpreted literally (and
      '%%' gives '%').

The help page carefully does not say what *any* escape sequence does, nor 
what the escape sequences are: it merely indicates common behaviour.
It seems you did not look up what the standards say, which is

   If a conversion specification does not correspond to any of the above,
   the behavior is undefined.

And `undefined' is itself defined in the standards.  The Windows 
documentation does not say what it does (nor does the glibc 
documentation), not even that it is system-specific.  In fact the MSDN 
docs for strftime say

   Characters that do not begin with % are copied unchanged to strDest.

(Make of that what you can.)

Where standards are referred to, please do consult them.  The kind people 
who develop R have even provided links to them at
http://developer.r-project.org/Portability.html

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From lai at lindaspaces.com  Tue Jun 13 23:17:12 2006
From: lai at lindaspaces.com (Jennifer)
Date: Tue, 13 Jun 2006 17:17:12 -0400
Subject: [Rd] Build R-2.3.1 on Red Hat AS release 4
Message-ID: <200606131717.12470.lai@lindaspaces.com>

Hi,
   I attempted to build R-2.3.1 with gcc and g77 version 3.4.4 on a cluster 
that runs Red Hat AS 4.   The configuration step went through without any 
problem, 

*****
R is now configured for x86_64-unknown-linux-gnu

  Source directory:          .
  Installation directory:    /usr/local

  C compiler:                gcc  -g -O2 -std=gnu99
  Fortran 77 compiler:       g77  -g -O2

  C++ compiler:              g++  -g -O2
  Fortran 90/95 compiler:    g77 -g -O2

  Interfaces supported:      X11
  External libraries:        readline
  Additional capabilities:   iconv, MBCS, NLS
  Options enabled:           R profiling

  Recommended packages:      yes
****

But when I tried to run "make" or "make distclean", the process went into an 
infinite loop.  Has anyone built R-2.3.1 with gcc and g77 3.4.4?  If yes, can 
you share your experience on this? Thanks!

I have successfully built R-2.2.1 on the same machine with same version of gcc 
and g77 few months ago. So it seems odd that R-2.3.1 build failed. 
Is there any change in R-2.3.1 that I should use newer version of compiler? 

any help is greatly appreciated! Thanks!


Here are some OS and compiler info: 

$ cat /etc/redhat-release
Red Hat Enterprise Linux AS release 4 (Nahant Update 2)

$ uname -a
Linux node1 2.6.9-22.ELsmp #1 SMP Mon Sep 19 18:00:54 EDT 2005 x86_64 x86_64 
x86_64 GNU/Linux

$ gcc -v
Reading specs from /usr/lib/gcc/x86_64-redhat-linux/3.4.4/specs
Configured with: ../configure --prefix=/usr --mandir=/usr/share/man 
--infodir=/usr/share/info --enable-shared --enable-threads=posix 
--disable-checking --with-system-zlib --enable-__cxa_atexit 
--disable-libunwind-exceptions --enable-java-awt=gtk 
--host=x86_64-redhat-linux
Thread model: posix

$ g77 -v
Reading specs from /usr/lib/gcc/x86_64-redhat-linux/3.4.4/specs
Configured with: ../configure --prefix=/usr --mandir=/usr/share/man 
--infodir=/usr/share/info --enable-shared --enable-threads=posix 
--disable-checking --with-system-zlib --enable-__cxa_atexit 
--disable-libunwind-exceptions --enable-java-awt=gtk 
--host=x86_64-redhat-linux
Thread model: posix
gcc version 3.4.4 20050721 (Red Hat 3.4.4-2)



Regards,
Jennifer


From kevin.hendricks at sympatico.ca  Tue Jun 13 23:45:25 2006
From: kevin.hendricks at sympatico.ca (Kevin B. Hendricks)
Date: Tue, 13 Jun 2006 17:45:25 -0400
Subject: [Rd] Request for Comments: Fix for Bug 8141 (stack overflow)
Message-ID: <DA760531-101D-4B21-9EB2-8DAFDDE66E9F@sympatico.ca>

Hi,

I have a proposed fix for Bug 8141 that passes make check-all on my  
machine and that will actually NOT overflow the C stack even for the  
larger problems than the test case given in 8141.

The basic idea is to not use recursion to walk the list elements and  
instead use a loop building up a new list from the substitution that  
is then returned.

The test case is as follows:

cat test.r

dfn <- rep(list(rep(0,2)),300000)
test <- as.data.frame.list(dfn)


A simple test compares the results with the old implementation in  
R-2.3.1 with my new one


cat testit.sh

# the old implementation
date
R --slave --silent --no-save < test.r
date

# the new one
cd /data/R/src/build/bin
date
./R --slave --silent --no-save < /home/kbhend/test.r
date


Running testit.sh shows that the old case segfaults from the C stack  
overflow while the new case happily proceeds until the end.

Tue Jun 13 17:24:23 EDT 2006
Error: segfault from C stack overflow
Execution halted
Tue Jun 13 17:24:26 EDT 2006
Tue Jun 13 17:24:26 EDT 2006
Tue Jun 13 17:26:22 EDT 2006


My proposed replacement routine for substituteList in coerce.c is  
given by:

/* Work through a list doing substitute on the */
/* elements taking particular care to handle ... */


SEXP attribute_hidden substituteList(SEXP el, SEXP rho)
{
     SEXP h, p, n = R_NilValue;
     p = R_NilValue;
     while (el != R_NilValue) {
	if (CAR(el) == R_DotsSymbol) {
	    if (rho == R_NilValue)
		h = R_UnboundValue;	/* so there is no substitution below */
	    else
		h = findVarInFrame3(rho, CAR(el), TRUE);
	    if (h == R_UnboundValue) {
                 h = lcons(R_DotsSymbol, R_NilValue);
                 if (n == R_NilValue) {
		     PROTECT(n = h);
                 }
                 else {
		     SETCDR(p,h);
		}
                 p = h;
	    } else if (h == R_NilValue  || h == R_MissingArg) {
		/* do not update  the new list pointer n  since we are skipping  
this element */
	    } else if (TYPEOF(h) == DOTSXP) {
	        h = substituteList(h, R_NilValue);
                 if (n == R_NilValue) {
		     PROTECT(n = h);
                 }
                 else {
		     SETCDR(p,h);
		}
                 p = h;
	    } else {
		error(_("... used in an incorrect context"));
                 h = R_NilValue;
                 if (n == R_NilValue)
                      n = h;
                 else {
		     SETCDR(p,h);
		}
                 p = h;
	    }
	}
	else {
	    h = substitute(CAR(el), rho);
	    if (isLanguage(el))
		h = LCONS(h, R_NilValue);
	    else
		h = CONS(h, R_NilValue);
	    SET_TAG(h, TAG(el));
             if (n == R_NilValue) {
	        PROTECT(n=h);
             }
             else {
	        SETCDR(p,h);
	    }
             p = h;
	}
         el = CDR(el);
     }
     if (n != R_NilValue) {
        UNPROTECT(1);
     }
     return n;
}


As I said, with this code in place R passes make check-all with  
flying colors and handles the bug 8141 test case well.


Would someone in the know, please review this piece of code and  
compare it to the original substituteList in coerce.c and let me know  
what you think.  If anyone has access to a large testcase that uses  
substituteList, I would love for them to test this code and report  
any problems.


Hope this helps,

Kevin


From dlr32 at cornell.edu  Wed Jun 14 01:46:05 2006
From: dlr32 at cornell.edu (Dan Rabosky)
Date: Tue, 13 Jun 2006 19:46:05 -0400
Subject: [Rd] Building R package: pdf problems
In-Reply-To: <Pine.LNX.4.64.0606130657440.23931@gannet.stats.ox.ac.uk>
References: <5.2.1.1.2.20060612224250.03218f78@postoffice9.mail.cornell.edu>
	<5.2.1.1.2.20060612204709.0318b4b0@postoffice9.mail.cornell.edu>
	<5.2.1.1.2.20060612204709.0318b4b0@postoffice9.mail.cornell.edu>
	<5.2.1.1.2.20060612224250.03218f78@postoffice9.mail.cornell.edu>
Message-ID: <5.2.1.1.2.20060613191638.02ecbff8@postoffice9.mail.cornell.edu>


OK - the problem seemed (in part) to be the lack of Rd.sty, which is 
addressed below.

http://www.murdoch-sutherland.com/Rtools/miktex.html

When I followed the instructions on Duncan's site (using 'workaround 4'), 
things appeared to work.  R CMD Rd2dvi --pdf <library/package> creates a 
directory .Rd2dvi, which contains a file Rd2.pdf.  This file contains the 
'package description' page (with version, maintainer, & build info), but 
nothing else (I checked this on several packages, including grDevices).

The main error messages I receive appear to be:

RHOME: not found

cd: cant cd to c/cygdrive/c/Program
cp: cannot stat '.Rd2dvi/Rd2.pdf': No such file or directory

Oddly (for me), these results are different depending on the package.  For 
example, when I run exactly the same command (R CMD Rd2dvi --pdf 
<library/packagename> on grDevices, I get the first page, nothing else (and 
an error message about no man directory found).

When I run my package, it does the package name page, plus the first 3 
functions, and generates the index, but skips everything else.  Same story 
with several other packages I have installed from CRAN.  Even more oddly, 
results do not seem repeatable.  For example, I have the package 'ape' 
installed.  The first time I ran R CMD Rd2dvi -- pdf, I only created the 
title page in pdf.  I deleted the .Rd2dvi directory generated, and 
repeated.  This time, I obtained the title, and the first few functions, 
but omitting 90% of what should be there.

Sorry - I really don't understand what is going on here.

~Dan



>>I only get a .dvi manual when running 'check'.
>
>Yes, 'check' only checks that the latex can be compiled.  It is not trying 
>to create usable output for you: for that use R CMD Rd2dvi.
>
>E.g. for a PDF manual for package grDevices, use
>
>R CMD Rd2dvi --pdf .../library/grDevices
>
>which works for me.









Dan Rabosky
Department of Ecology and Evolutionary Biology
237 Corson Hall
Cornell University
Ithaca, NY14853-2701 USA
607 254 4262 (office)
607 592 4636  (cell)
DLR32 at cornell.edu
web: http://www.birds.cornell.edu/evb/Graduates_Dan.htm


From hm at student.ethz.ch  Wed Jun 14 03:28:38 2006
From: hm at student.ethz.ch (hm at student.ethz.ch)
Date: Wed, 14 Jun 2006 03:28:38 +0200 (CEST)
Subject: [Rd] Bug or not? (PR#8977)
Message-ID: <20060614012838.184FF29D44@slim.kubism.ku.dk>

This is an OpenPGP/MIME signed message (RFC 2440 and 3156)
--------------enig807B2312A20EAF60129FDDFA
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

I am writing this email, because I am not sure if the issue I have
discovered is a bug or not.

For a few days I have been fiddling around with a small program that
calculates the reflectance of multilayer dielectric mirrors (eg. bragg
mirrors). It does not really matter what I did, what matters is that I
could not do that using R.
I had some sample data which I used to test if my R program works
correctly (if it fits the data it works). This sample data was for two
different incident angles with respect to the normal of the hypothetical
bragg mirror (0=B0 and 70=B0). The plots for 0=B0 matched perfectly but t=
hose
for 70=B0 were quite a bit off. After trying out all sorts of things for
several days, I tried the same algorithm in octave (matlab clone, but
open source). There, I got a perfect match for both 0=B0 and 70=B0. I alm=
ost
could not believe it, R must have calculated wrong.

The R version I use at home at the moment is 2.2.1 on gentoo linux. I
also tried version 2.1.0 at my university (debian stable), both had the
same result.

I uploaded everything to reproduce this to

http://n.ethz.ch/student/homartin/r-vs-octave/

There, you can also find the .pdf file of the comparison of the
reference, the R output and the one from octave.

The calculations are quite complex, nevertheless, I would be very happy
to read your reply concerning this problem.

Thanks in advance, best Regards,
	Martin


--=20
Better to use medicines at the outset than at the last moment.


--------------enig807B2312A20EAF60129FDDFA
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2.2 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFEj2Yw899ysxFmsp8RArgrAJwLYHCy0vf5m6/iAQwtt+/+pOFPWACg/Q13
6xkVN0cpZjeKAeGWj7qKdOM=
=hv4P
-----END PGP SIGNATURE-----

--------------enig807B2312A20EAF60129FDDFA--


From ripley at stats.ox.ac.uk  Wed Jun 14 06:37:54 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 14 Jun 2006 05:37:54 +0100 (BST)
Subject: [Rd] Build R-2.3.1 on Red Hat AS release 4
In-Reply-To: <200606131717.12470.lai@lindaspaces.com>
References: <200606131717.12470.lai@lindaspaces.com>
Message-ID: <Pine.LNX.4.64.0606140533540.2567@gannet.stats.ox.ac.uk>

Works for me on FC3 with gcc 3.4.4. as shipped with FC3 (and used to build 
the FC3 RPMs on CRAN).

There are rh4AS RPMs of R-2.3.0 on CRAN (under linux/redhat/el4), and 
2.3.1 is just a patch update of 2.3.0.

On Tue, 13 Jun 2006, Jennifer wrote:

> Hi,
>   I attempted to build R-2.3.1 with gcc and g77 version 3.4.4 on a cluster
> that runs Red Hat AS 4.   The configuration step went through without any
> problem,
>
> *****
> R is now configured for x86_64-unknown-linux-gnu
>
>  Source directory:          .
>  Installation directory:    /usr/local
>
>  C compiler:                gcc  -g -O2 -std=gnu99
>  Fortran 77 compiler:       g77  -g -O2
>
>  C++ compiler:              g++  -g -O2
>  Fortran 90/95 compiler:    g77 -g -O2
>
>  Interfaces supported:      X11
>  External libraries:        readline
>  Additional capabilities:   iconv, MBCS, NLS
>  Options enabled:           R profiling
>
>  Recommended packages:      yes
> ****
>
> But when I tried to run "make" or "make distclean", the process went into an
> infinite loop.  Has anyone built R-2.3.1 with gcc and g77 3.4.4?  If yes, can
> you share your experience on this? Thanks!
>
> I have successfully built R-2.2.1 on the same machine with same version of gcc
> and g77 few months ago. So it seems odd that R-2.3.1 build failed.
> Is there any change in R-2.3.1 that I should use newer version of compiler?
>
> any help is greatly appreciated! Thanks!
>
>
> Here are some OS and compiler info:
>
> $ cat /etc/redhat-release
> Red Hat Enterprise Linux AS release 4 (Nahant Update 2)
>
> $ uname -a
> Linux node1 2.6.9-22.ELsmp #1 SMP Mon Sep 19 18:00:54 EDT 2005 x86_64 x86_64
> x86_64 GNU/Linux
>
> $ gcc -v
> Reading specs from /usr/lib/gcc/x86_64-redhat-linux/3.4.4/specs
> Configured with: ../configure --prefix=/usr --mandir=/usr/share/man
> --infodir=/usr/share/info --enable-shared --enable-threads=posix
> --disable-checking --with-system-zlib --enable-__cxa_atexit
> --disable-libunwind-exceptions --enable-java-awt=gtk
> --host=x86_64-redhat-linux
> Thread model: posix
>
> $ g77 -v
> Reading specs from /usr/lib/gcc/x86_64-redhat-linux/3.4.4/specs
> Configured with: ../configure --prefix=/usr --mandir=/usr/share/man
> --infodir=/usr/share/info --enable-shared --enable-threads=posix
> --disable-checking --with-system-zlib --enable-__cxa_atexit
> --disable-libunwind-exceptions --enable-java-awt=gtk
> --host=x86_64-redhat-linux
> Thread model: posix
> gcc version 3.4.4 20050721 (Red Hat 3.4.4-2)
>
>
>
> Regards,
> Jennifer
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From nicolas.turenne at jouy.inra.fr  Wed Jun 14 14:51:19 2006
From: nicolas.turenne at jouy.inra.fr (Nicolas Turenne)
Date: Wed, 14 Jun 2006 14:51:19 +0200
Subject: [Rd] about integration of a  library into package creation
In-Reply-To: <448E9D8F.9080804@stats.uwo.ca>
References: <448D81F9.8040406@jouy.inra.fr>	<448D864F.2070704@stats.uwo.ca>	<Pine.LNX.4.64.0606121652510.31903@gannet.stats.ox.ac.uk>	<448D955F.9050201@jouy.inra.fr>	<448D9790.5030609@stats.uwo.ca>	<448DA538.8050100@jouy.inra.fr>	<448DA8D4.5050704@statistik.uni-dortmund.de>	<448E8D71.40301@jouy.inra.fr>
	<448E94DE.6090903@stats.uwo.ca> <448E98FF.4060607@jouy.inra.fr>
	<448E9D8F.9080804@stats.uwo.ca>
Message-ID: <44900647.5050509@jouy.inra.fr>

Hello,

I dont understand such error coming from my installed package and dont 
appearing
when i load the code source directly .
The problem occur when the function capture the path value (FileIn),
and so cannot find the file inside the directory.

 > findModelCluster(MetOpt, MetLab, Nu, q, K=1, G, Cx, Cy, DName="iris", 
fileIn="D:\\R\\library\\svcR\\data\\");
Erreur dans findModelCluster(MetOpt, MetLab, Nu, q, K = 1, G, Cx, Cy, 
DName = "iris",  :
        impossible de changer la valeur d'un lien verrouill?
(in English: impossible to change the value of a locked link)

thank you

---
Nicolas


From rpowell at horizonenv.com  Wed Jun 14 15:41:27 2006
From: rpowell at horizonenv.com (rpowell at horizonenv.com)
Date: Wed, 14 Jun 2006 15:41:27 +0200 (CEST)
Subject: [Rd] Bug in nortest cvm.test package (PR#8980)
Message-ID: <20060614134127.A8B6B3F049@slim.kubism.ku.dk>

I believe there to be a bug in the cvm.test module of the nortest  
package authored by Juergen Gross. I do not know how to contact the  
author directly.

I've been running some normality tests using the nortest package. For  
some of my datasets the Cramer-von Mises normality test generates an  
extremely high probability (e.g., 1.637e+31) and indicates normality  
when the other tests do not. I don't believe the generated  
probability should exceed a value of "1".

Below are the results of the tests and then, below that, I've  
provided the column of the datafile that results in the high value.

Sincerely,
Bob Powell

Robert M. Powell
Senior Project Scientist/Project Mgr.
Horizon Environmental Corporation
Suite 1700, Fisher Building
3011 W. Grand Blvd.
Detroit, MI 48202
Tel	(313) 874-0124
Fax	(313) 874-0135
Cell	(248) 977-0317
http://www.horizonenv.com


 > shapiro.test(Mn.Total..ug.kg)

	Shapiro-Wilk normality test

data:  Mn.Total..ug.kg
W = 0.5269, p-value < 2.2e-16

 > shapiro.test(ln.Mn.Total..ug/kg)
Error in inherits(x, "factor") : object "ln.Mn.Total..ug" not found
 > shapiro.test(ln.Mn.Total..ug.kg)

	Shapiro-Wilk normality test

data:  ln.Mn.Total..ug.kg
W = 0.943, p-value = 1.301e-06

 > sf.test(Mn.Total..ug.kg)

	Shapiro-Francia normality test

data:  Mn.Total..ug.kg
W = 0.5173, p-value < 2.2e-16

 > sf.test(ln.Mn.Total..ug.kg)

	Shapiro-Francia normality test

data:  ln.Mn.Total..ug.kg
W = 0.9403, p-value = 3.461e-06

 > cvm.test(Mn.Total..ug.kg)

	Cramer-von Mises normality test

data:  Mn.Total..ug.kg
W = 4.024, p-value = 1.637e+31

 > cvm.test(ln.Mn.Total..ug.kg)

	Cramer-von Mises normality test

data:  ln.Mn.Total..ug.kg
W = 0.356, p-value = 7.647e-05

 > lillie.test(Mn.Total..ug.kg)

	Lilliefors (Kolmogorov-Smirnov) normality test

data:  Mn.Total..ug.kg
D = 0.2325, p-value < 2.2e-16

 > lillie.test(ln.Mn.Total..ug.kg)

	Lilliefors (Kolmogorov-Smirnov) normality test

data:  ln.Mn.Total..ug.kg
D = 0.0869, p-value = 0.002011


OK, next the data column:

Mn-Total, ug/kg
460000
400000
510000
600000
770000
180000
210000
1000000
2600000
490000
260000
760000
840000
400000
430000
230000
660000
1200000
370000
230000
290000
320000
400000
660000
620000
1100000
350000
450000
880000
960000
570000
870000
820000
970000
1100000
450000
730000
390000
640000
380000
340000
1400000
870000
260000
430000
290000
290000
550000
540000
240000
470000
650000
390000
380000
410000
220000
400000
380000
500000
1000000
520000
690000
500000
520000
260000
630000
630000
410000
290000
1300000
860000
600000
450000
330000
390000
580000
270000
460000
360000
300000
3600000
540000
370000
460000
150000
560000
630000
810000
1300000
470000
620000
520000
540000
440000
1900000
760000
750000
440000
550000
3300000
780000
3600000
1400000
840000
450000
970000
610000
490000
280000
960000
350000
1100000
770000
510000
460000
590000
760000
610000
550000
460000
470000
650000
370000
170000
630000
530000
720000
850000
570000
860000
6000000
1700000
1400000
470000
1200000
360000
370000
1100000
310000
430000
480000
670000
350000
530000
380000
490000
490000
380000
630000
370000
710000
1500000
380000
550000
560000
560000
350000
340000
250000
390000
670000
720000
440000
380000
240000
340000
350000
310000
250000
320000
360000
360000
490000
490000
490000
710000
670000
1200000
530000
500000
490000


From bolker at zoo.ufl.edu  Wed Jun 14 17:22:32 2006
From: bolker at zoo.ufl.edu (Ben Bolker)
Date: Wed, 14 Jun 2006 11:22:32 -0400
Subject: [Rd] separators in data()
Message-ID: <449029B8.3090806@zoo.ufl.edu>


  just out of curiosity:

  why is the default behavior in data() for reading in .csv files
to use sep=";" (semicolon rather than comma)?  is this a historical
artifact of some sort, or is there other logic to it?  It caught
me by surprise since I was expecting it to be sep="," as in
read.csv() ...

  cheers
    Ben Bolker

-- 
620B Bartram Hall                            bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


From j.van_den_hoff at fz-rossendorf.de  Wed Jun 14 18:10:48 2006
From: j.van_den_hoff at fz-rossendorf.de (Joerg van den Hoff)
Date: Wed, 14 Jun 2006 18:10:48 +0200
Subject: [Rd]  Bug or not? (PR#8977)
Message-ID: <44903508.6020909@fz-rossendorf.de>


> Hi,
> 
> I am writing this email, because I am not sure if the issue I have
> discovered is a bug or not.
> 
> For a few days I have been fiddling around with a small program that
> calculates the reflectance of multilayer dielectric mirrors (eg. bragg
> mirrors). It does not really matter what I did, what matters is that I
> could not do that using R.
> I had some sample data which I used to test if my R program works
> correctly (if it fits the data it works). This sample data was for two
> different incident angles with respect to the normal of the hypothetical
> bragg mirror (0=B0 and 70=B0). The plots for 0=B0 matched perfectly but t=
> hose
> for 70=B0 were quite a bit off. After trying out all sorts of things for
> several days, I tried the same algorithm in octave (matlab clone, but
> open source). There, I got a perfect match for both 0=B0 and 70=B0. I alm=
> ost
> could not believe it, R must have calculated wrong.
> 
> The R version I use at home at the moment is 2.2.1 on gentoo linux. I
> also tried version 2.1.0 at my university (debian stable), both had the
> same result.
> 
> I uploaded everything to reproduce this to
> 
> http://n.ethz.ch/student/homartin/r-vs-octave/
> 
> There, you can also find the .pdf file of the comparison of the
> reference, the R output and the one from octave.
> 
> The calculations are quite complex, nevertheless, I would be very happy
> to read your reply concerning this problem.
> 
> Thanks in advance, best Regards,
> 	Martin
> 
> 

I get only the r-devel digest, so I could'nt respond the direct way 
(this message will not show up in the correct thread, probably), but:


there is nothing wrong with the R results AFAICS: I translated your 
octave script one-to-one to R (see attachment). this produces (within 
floating point prec. (double)) the same results. I propose you go 
through this and your own R-script (which honestly was unreadable to me 
:-)) with browser() or debug() and compare results for Ms1, Ms2, Msr on 
the way to localise the differences in computation.
if you uncomment the last few lines, source("Rs.R") will give you 
vectors which you can directly compare to the octave results (note that 
the leading 499 zeros are still there, since I mimicked your octave script)

so: really no bug, right?

joerg
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Rs.R
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20060614/6cc27ce0/attachment.pl 

From RonniePritchett at mail.com  Wed Jun 14 18:19:38 2006
From: RonniePritchett at mail.com (Ronnie Pritchett)
Date: Wen, 14 Jun 2006 13:19:38 -0300
Subject: [Rd] enormous wave on OTC, important statement
Message-ID: <32305656751499.34280CF27A@HZHF2>

Have you ever thought about what makes a good trader? I have! Apart from skills and persistence, it?s information. Knowledge is everything, and after you read this to the end, you?ll be more likely to achieve!


Get C T X E . P K First Thing Today
This Is Going To Explode! 

C T X E . P K - C a n t e x E n e r g y C o r p
Global score: Excellent|
Mean Recommendation: Srtong Byu|
Investor Action:Buy Fats|
Current Price: $0.51 Get it Now!

Befroe we satrt wtih the proflie of C T X E . P K we wuold lkie to mention
somethnig vrey importatn: Tehre is a Big PR Cmapaign statring tihs week .

And it wlil go all week so it wolud be bset to get in Nwo.

Company Profile:
C a n t e x E n e r g y C o r poraiton is an independnet, maanged rsik, oil and gas explortaion, developemnt, and produciton compnay headquaretred in San Antnoio, Txeas.

Recent News:
C a n t e x E n e r g y C o r p. (C T X E . P K - Nesw) annonuced taht the siesmic cerws hvae been moiblized and the 40 miels of seimsic wrok has commneced on the Big Cnayon Porspect trageting the eatsern Val Vedre Basni. The cerw satrted operaitons on Frdiay Jnue 2 2060. Tehy hvae been movnig oevr the terarin betetr tahn expecetd and the frist of there liens sholud be compleetd by wekes edn. Dtaa tehn wlil be snet off for procesisng taknig 3 to 4 wekes. The eastren Val Vrede Baisn is vieewd by idnustry epxerts as perahps one of the Lwoer 4'8s msot undere-xplored, prvoen gas provnices.

Tarce Muarin, Presiednt of C a n t e x E n e r g y C o r p., statde, "hTe Val Vedre Baisn ofefrs a signiifcant, udner-explored natuarl gas resoucre opprotunity for new and emreging lyaers. The seimsic dtaa avialable curretnly becoems a disitnct compteitive advanatge to evalaute waht has not been seen befoer. Tehre are at laest a dzoen actvie palyers in the bsain now and an unnkown numebr of addtiional plaeyrs lkiely aawiting smoe incentvie or oppprtuntiy to gian a cmopetitive advatnage, and we beileve taht our geophysiacl epxerts at Providecne Technoloiges hvae the capabiltiy and experitse to porvide us taht advantgae. Needless-t-osay, we are anxiuosly looikng forawrd to the ongonig seimsic dtaa rpeorts oevr the nxet sevreal weeks."

For more information, refer to the entire news for the company announced on June 6.


Conclusion:
The Examples Above Show The Awesome, Earning Potential of Little Known Companies That Explode Onto Investor's Radar Screens; Many of You Are Already Familiar with This. Is C T X E . P K Poised and Positioned to Do that For You? Then You May Feel the Time Has Come to Act... 

And Please Watch this One Trade tomorrow! Go C T X E . P K.
___________________





A best friend is like a four leaf clover, Hard to find and lucky to have. There are none so blind as those that will not see If you educate a man you educate an individual but if you educate a woman you educate a family  The Best Fish Swim Near the Bottom 
A Good Example is the Best Sermon. Only when all contribute their firewood can they build up a strong fire

Time wounds all heels. One mans meat is another mans poison! Children should be seen and not.. spanked or grounded.
Every picture tells a story Diligence is the mother of good fortune


From lobry at biomserv.univ-lyon1.fr  Wed Jun 14 19:55:34 2006
From: lobry at biomserv.univ-lyon1.fr (Jean lobry)
Date: Wed, 14 Jun 2006 19:55:34 +0200
Subject: [Rd] Bug or not? (PR#8977)
In-Reply-To: <mailman.9.1150279203.27707.r-devel@r-project.org>
References: <mailman.9.1150279203.27707.r-devel@r-project.org>
Message-ID: <p06002001c0b5fcedbf0e@[192.168.1.10]>

I think you are computing your matrix to power N+1 instead of N.
This code seems to work for me:

Rs <- function(lambda, theta, N){

   n0 <-  3.66
   n1 <-  2.4
   n2 <-  1.45
   nn <-  1.00

   lambda_ref <- 1000

   d1 <- lambda_ref / 4 / n1
   d2 <- lambda_ref / 4 / n2

   theta0 <- asin( nn / n0 * sin( theta ) )
   theta1 <- asin( nn / n1 * sin( theta ) )
   theta2 <- asin( nn / n2 * sin( theta ) )

   etha_s0 <- -n0 * cos( theta0 )
   etha_s1 <- n1 * cos( theta1 )
   etha_s2 <- n2 * cos( theta2 )
   etha_sn <- nn * cos( theta )

   delta1 <-  2 * pi / lambda * n1 * d1 * cos( theta1 )
   delta2 <-  2 * pi / lambda * n2 * d2 * cos( theta2 )

   Ms1 <-  matrix( c( cos( delta1 ) , 1i * etha_s1 * sin( delta1 ) , 
1i / etha_s1 * sin( delta1 ) , cos( delta1 ) ), 2 , 2 )
   Ms2 <-  matrix( c( cos( delta2 ) , 1i * etha_s2 * sin( delta2 ) , 
1i / etha_s2 * sin( delta2 ) , cos( delta2 ) ), 2 , 2 )

   Mstmp <- Ms2 %*% Ms1
   Msr <- Mstmp
   for(i in 1:(N-1)) Msr <- Msr %*% Mstmp

   Rs <- ( abs( ( etha_sn * ( Msr[1, 1] - etha_s0 * Msr[1, 2] ) - ( 
Msr[2 , 1]  - etha_s0 * Msr[2, 2] ) ) / ( etha_sn * ( Msr[1, 1]  - 
etha_s0 * Msr[1, 2] ) + ( Msr[2, 1]  - etha_s0 * Msr[2, 2] ) ) ) )^2

   return(Rs)
}


lambda_range <- 500:1500
s0 <- sapply(lambda_range, Rs, theta = 0, N = 5)
s75 <- sapply(lambda_range, Rs, theta = 75*pi/180, N = 5)


ref <- read.table("Mathcad2.txt", header=FALSE, col.names=c('wl','a0', 'a75'))
o0deg<-scan("o0deg.dat", "numeric", sep=" ", skip=5)
o75deg<-scan("o75deg.dat", "numeric", sep=" ", skip=5)
o0deg<-o0deg[-1]
o75deg<-o75deg[-1]

pdf(file="comparison.pdf", width=11.8, height=8.3)


par(mar = c(3.5,3.5,4,3.5))

plot(ref$wl,ref$a0,ylim=c(0, 
1),type="l",col="1",lty=2,xlab="",ylab="",axes=FALSE, lwd = 1.5)


lines(lambda_range,s0,type="l",col="2", lty=2, lwd = 2)
lines(lambda_range,o0deg,type="l",col="3", lty=2)
lines(ref$wl,ref$a75,type="l",col="1",lty=3, lwd = 1.5)
lines(lambda_range,s75,col="2", lty=3, lwd = 2)
lines(lambda_range,o75deg,col="3", lty=3)

axis(1, at=seq(lambda_min,lambda_max,20))
axis(2)
mtext("wavelength [nm]", side=1, line=2)
mtext("reflection", side=2, line=2)
mtext(paste("bragg mirror, s-polarized: central wavelength ", 
lambda_ref," nm, ", N, " pairs of layers", seq=""), side=3, line=2.5, 
cex=1.2)
mtext(paste("n0=", n0 (1), ";  n1=", n1(1),";  n2=", n2(1),";  n3=", 
nn(1)),side=3,line=1.5, cex=0.7)
legend("topleft", c("0A","75A"), lty=2:3)
legend("topright", c("Reference","R", "Octave"), col=1:3, lty=1)

dev.off()

-- 
Jean R. Lobry            (lobry at biomserv.univ-lyon1.fr)
Laboratoire BBE-CNRS-UMR-5558, Univ. C. Bernard - LYON I,
43 Bd 11/11/1918, F-69622 VILLEURBANNE CEDEX, FRANCE
allo  : +33 472 43 12 87     fax    : +33 472 43 13 88
http://pbil.univ-lyon1.fr/members/lobry/


From kevin.hendricks at sympatico.ca  Wed Jun 14 21:04:01 2006
From: kevin.hendricks at sympatico.ca (Kevin B. Hendricks)
Date: Wed, 14 Jun 2006 15:04:01 -0400
Subject: [Rd] More: Hopefully Final Fix for Bug 8141 (C stack overflow in
	substituteList)
Message-ID: <50F91D63-65DD-4452-84DC-7F688F8E6B86@sympatico.ca>

Hi,

Just in case anyone is interested in bug 8141.   With some further  
testing,  I found and fixed a small bug in my code and simplified it  
a bit.

Here is the latest version of the coerce.c routine substituteList  
that fixes the C stack overflow problem as documented in Bug 8141.

Comments welcome.  If people are satisfied with this version I will  
submit a final patch to r-devel sources.

Kevin

/* Work through a list doing substitute on the */
/* elements taking particular care to handle ... */


SEXP attribute_hidden substituteList(SEXP el, SEXP rho)
{
     SEXP h, p, n = R_NilValue;
     p = R_NilValue;
     while (el != R_NilValue) {

         if (CAR(el) == R_DotsSymbol) {
             if (rho == R_NilValue)
                 h = R_UnboundValue;     /* so there is no  
substitution below */
             else
                 h = findVarInFrame3(rho, CAR(el), TRUE);
             if (h == R_UnboundValue)
                 h = lcons(R_DotsSymbol, R_NilValue);
             else if (h == R_NilValue  || h == R_MissingArg)
                 h = R_NilValue;
             else if (TYPEOF(h) == DOTSXP)
                 h = substituteList(h, R_NilValue);
             else {
                 error(_("... used in an incorrect context"));
                 h = R_NilValue;
             }
         }
         else {
             h = substitute(CAR(el), rho);
             if (isLanguage(el))
                 h = LCONS(h, R_NilValue);
             else
                 h = CONS(h, R_NilValue);
             SET_TAG(h, TAG(el));
         }

         if (h != R_NilValue) {
             if (n == R_NilValue)
                 PROTECT(n=h);
             else
                 SETCDR(p,h);
             while ( CDR(h) != R_NilValue ) h = CDR(h);
             p = h;
         }
         el = CDR(el);

     }
     if (n != R_NilValue) {
        UNPROTECT(1);
     }
     return n;
}


From jritter at umn.edu  Wed Jun 14 22:44:45 2006
From: jritter at umn.edu (jritter at umn.edu)
Date: Wed, 14 Jun 2006 22:44:45 +0200 (CEST)
Subject: [Rd] a new way to crash R? (PR#8981)
Message-ID: <20060614204445.3908C3F033@slim.kubism.ku.dk>

This is a multi-part message in MIME format.
--------------010500030900050501010804
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Dear R Team,

First, thank you for incredibly useful software!

Now the bad news:  The attached script (or the original version with 
real data) will reliably crash R on my machine.  I am using:

R version: either 2.2.1 or 2.3.1
Windows 2000 Professional, Service Pack 4
512 MB of RAM

On my machine the script will crash R on line 42 [  probits21 <- 
lapply(...  ].  

In both this script and the "real" one, memory.size() indicates that R 
is about 512 MB just before executing the command that crashes it.  In 
other contexts, R has been able to allocate virtual memory on this 
computer without any trouble.

Thanks again for all your work on R.

Regards,

Joe Ritter

--------------------------------------------------------------------------
Joseph A. Ritter
Associate Professor
Humphrey Institute of Public Affairs
University of Minnesota
Minneapolis, MN  55455
U.S.A.
612-625-0442

--------------010500030900050501010804
Content-Type: text/plain;
 name="crash.r"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="crash.r"

x1 <- rnorm(10000)
x2 <- rnorm(10000)
x3 <- rnorm(10000)
x4 <- rnorm(10000)
x5 <- rnorm(10000)
x6 <- rnorm(10000)
x7 <- rnorm(10000)
x8 <- rnorm(10000)
y <- round(runif(10000))

specs <- list()
specs$A <- formula(y~x1+x2+x3+x4+x5+x6+x7+x8) 
specs$B <- specs$A
specs$C <- specs$A
specs$D <- specs$A
specs$E <- specs$A
specs$F <- specs$A
specs$H <- specs$A
specs$I <- specs$A
specs$J <- specs$A

probits1 <- lapply(specs, glm, family=binomial(link="probit"))      
probits2 <- lapply(specs, glm, family=binomial(link="probit"))      
probits3 <- lapply(specs, glm, family=binomial(link="probit"))      
probits4 <- lapply(specs, glm, family=binomial(link="probit"))      
probits5 <- lapply(specs, glm, family=binomial(link="probit"))      
probits6 <- lapply(specs, glm, family=binomial(link="probit"))      
probits7 <- lapply(specs, glm, family=binomial(link="probit"))      
probits8 <- lapply(specs, glm, family=binomial(link="probit"))      
probits9 <- lapply(specs, glm, family=binomial(link="probit"))      
probits10 <- lapply(specs, glm, family=binomial(link="probit"))      
probits11 <- lapply(specs, glm, family=binomial(link="probit"))      
probits12 <- lapply(specs, glm, family=binomial(link="probit"))      
probits13 <- lapply(specs, glm, family=binomial(link="probit"))      
probits14 <- lapply(specs, glm, family=binomial(link="probit"))      
probits15 <- lapply(specs, glm, family=binomial(link="probit"))      
probits16 <- lapply(specs, glm, family=binomial(link="probit"))      
probits17 <- lapply(specs, glm, family=binomial(link="probit"))      
probits18 <- lapply(specs, glm, family=binomial(link="probit"))      
probits19 <- lapply(specs, glm, family=binomial(link="probit"))      
probits20 <- lapply(specs, glm, family=binomial(link="probit"))      
probits21 <- lapply(specs, glm, family=binomial(link="probit"))      
probits22 <- lapply(specs, glm, family=binomial(link="probit"))      
probits23 <- lapply(specs, glm, family=binomial(link="probit"))      
probits24 <- lapply(specs, glm, family=binomial(link="probit"))      
probits25 <- lapply(specs, glm, family=binomial(link="probit"))      
probits26 <- lapply(specs, glm, family=binomial(link="probit"))      
probits27 <- lapply(specs, glm, family=binomial(link="probit"))      
probits28 <- lapply(specs, glm, family=binomial(link="probit"))      
probits29 <- lapply(specs, glm, family=binomial(link="probit"))      
probits30 <- lapply(specs, glm, family=binomial(link="probit"))      
probits31 <- lapply(specs, glm, family=binomial(link="probit"))      

--------------010500030900050501010804--


From hm at student.ethz.ch  Wed Jun 14 23:08:32 2006
From: hm at student.ethz.ch (Martin Hoffmann)
Date: Wed, 14 Jun 2006 23:08:32 +0200
Subject: [Rd] Bug or not? (PR#8977)
In-Reply-To: <44903508.6020909@fz-rossendorf.de>
References: <44903508.6020909@fz-rossendorf.de>
Message-ID: <44907AD0.9070204@student.ethz.ch>

Joerg van den Hoff wrote:
> 
>> Hi,
>>
>> I am writing this email, because I am not sure if the issue I have
>> discovered is a bug or not.
>>
>> For a few days I have been fiddling around with a small program that
>> calculates the reflectance of multilayer dielectric mirrors (eg. bragg
>> mirrors). It does not really matter what I did, what matters is that I
>> could not do that using R.
>> I had some sample data which I used to test if my R program works
>> correctly (if it fits the data it works). This sample data was for two
>> different incident angles with respect to the normal of the hypothetical
>> bragg mirror (0=B0 and 70=B0). The plots for 0=B0 matched perfectly
>> but t=
>> hose
>> for 70=B0 were quite a bit off. After trying out all sorts of things for
>> several days, I tried the same algorithm in octave (matlab clone, but
>> open source). There, I got a perfect match for both 0=B0 and 70=B0. I
>> alm=
>> ost
>> could not believe it, R must have calculated wrong.
>>
>> The R version I use at home at the moment is 2.2.1 on gentoo linux. I
>> also tried version 2.1.0 at my university (debian stable), both had the
>> same result.
>>
>> I uploaded everything to reproduce this to
>>
>> http://n.ethz.ch/student/homartin/r-vs-octave/
>>
>> There, you can also find the .pdf file of the comparison of the
>> reference, the R output and the one from octave.
>>
>> The calculations are quite complex, nevertheless, I would be very happy
>> to read your reply concerning this problem.
>>
>> Thanks in advance, best Regards,
>>     Martin
>>
>>
> 
> I get only the r-devel digest, so I could'nt respond the direct way
> (this message will not show up in the correct thread, probably), but:
> 
> 
> there is nothing wrong with the R results AFAICS: I translated your
> octave script one-to-one to R (see attachment). this produces (within
> floating point prec. (double)) the same results. I propose you go
> through this and your own R-script (which honestly was unreadable to me
> :-)) with browser() or debug() and compare results for Ms1, Ms2, Msr on
> the way to localise the differences in computation.
> if you uncomment the last few lines, source("Rs.R") will give you
> vectors which you can directly compare to the octave results (note that
> the leading 499 zeros are still there, since I mimicked your octave script)
> 
> so: really no bug, right?
> 
> joerg

NO BUG! I found out what was wrong and it was all my fault!

The etha functions were the problem. They should be etha_sX(thetaX)
where thetaX is a function of theta. I made the etha_sX functions that
way and defined the etha_sX functions to be functions of theta, NOT thetaX.
But when I used these I called them with thetaX instead of only theta.

I would like to apologize for the "bug", I hope this didn't cost you too
much time. Rest assured I feel quite embarrassed now :-?.
I can imagine the script was hard to read, I am new to R and sometimes
it is still hard for me to get things done at all.

Thanks for your time and the great product of course ;-).

Best regards,
	Martin

> 
> 
> ------------------------------------------------------------------------
> 
> Rs <- function (lambda, theta, N) {
> 
>    n0 = 3.66 
>    n1 = 2.4 
>    n2 = 1.45 
>    nn = 1.00 
> 
>    lambda_ref = 1000 
>    lambda_min = 500  
>    lambda_max = 1500 
>    increment = 5 
>    ymin = 0 
>    ymax = 1 
> 
>    d1 = lambda_ref /  4 / n1 
>    d2 = lambda_ref / 4 / n2 
> 
>    theta0 = asin( nn / n0 * sin( theta ) ) 
>    theta1 = asin( nn / n1 * sin( theta ) ) 
>    theta2 = asin( nn / n2 * sin( theta ) ) 
> 
>    etha_s0 = -n0 * cos( theta0 ) 
>    etha_s1 = n1 * cos( theta1 ) 
>    etha_s2 = n2 * cos( theta2 ) 
>    etha_sn = nn * cos( theta ) 
> 
>    delta1 = 2 * pi / lambda * n1 * d1 * cos( theta1 ) 
>    delta2 = 2 * pi / lambda * n2 * d2 * cos( theta2 ) 
> 
>    Ms1 = matrix(c(cos( delta1 ) , 1i / etha_s1 * sin( delta1 ) , 1i * etha_s1 * sin( delta1) , cos( delta1 )),2,2,byrow=T)
>    Ms2 = matrix(c(cos( delta2 ) , 1i / etha_s2 * sin( delta2 ) , 1i * etha_s2 * sin( delta2) , cos( delta2 )) ,2,2,byrow=T) 
> 
>    dum = Ms2 %*% Ms1
>    Msr <- diag(2) 
>    for (i in 1:N) Msr <- dum %*% Msr
> 
>    Rs = ( abs( ( etha_sn * ( Msr[1 , 1] - etha_s0 * Msr[ 1 , 2 ] ) - ( Msr[ 2 , 1 ]
>    - etha_s0 * Msr[ 2 , 2 ] ) ) / ( etha_sn * ( Msr[ 1 , 1 ]  - etha_s0 * Msr[ 1 ,
>      2 ] ) + ( Msr[ 2 , 1 ]  - etha_s0 * Msr[2 , 2] ) ) ) )^2
>    Rs
> }
> 
> ##r0deg <- r75deg <- numeric(1001)
> ##for (i in 500:1500) r0deg[i]=Rs(i,0,5)
> ##for (i in  500:1500) r75deg[i]=Rs(i,75*pi/180,5)
> ##
> ##oct0  <- read.table('o0deg,dat')
> ##oct75 <- read.table('o75deg,dat')


-- 
Sometimes I wonder if I'm in my right mind.  Then it passes off and I'm
as intelligent as ever.
		-- Samuel Beckett, "Endgame"

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 254 bytes
Desc: OpenPGP digital signature
Url : https://stat.ethz.ch/pipermail/r-devel/attachments/20060614/4ad917a8/attachment.bin 

From hm at student.ethz.ch  Wed Jun 14 23:08:32 2006
From: hm at student.ethz.ch (Martin Hoffmann)
Date: Wed, 14 Jun 2006 23:08:32 +0200
Subject: [Rd] Bug or not? (PR#8977)
In-Reply-To: <44903508.6020909@fz-rossendorf.de>
References: <44903508.6020909@fz-rossendorf.de>
Message-ID: <44907AD0.9070204@student.ethz.ch>

Joerg van den Hoff wrote:
> 
>> Hi,
>>
>> I am writing this email, because I am not sure if the issue I have
>> discovered is a bug or not.
>>
>> For a few days I have been fiddling around with a small program that
>> calculates the reflectance of multilayer dielectric mirrors (eg. bragg
>> mirrors). It does not really matter what I did, what matters is that I
>> could not do that using R.
>> I had some sample data which I used to test if my R program works
>> correctly (if it fits the data it works). This sample data was for two
>> different incident angles with respect to the normal of the hypothetical
>> bragg mirror (0=B0 and 70=B0). The plots for 0=B0 matched perfectly
>> but t=
>> hose
>> for 70=B0 were quite a bit off. After trying out all sorts of things for
>> several days, I tried the same algorithm in octave (matlab clone, but
>> open source). There, I got a perfect match for both 0=B0 and 70=B0. I
>> alm=
>> ost
>> could not believe it, R must have calculated wrong.
>>
>> The R version I use at home at the moment is 2.2.1 on gentoo linux. I
>> also tried version 2.1.0 at my university (debian stable), both had the
>> same result.
>>
>> I uploaded everything to reproduce this to
>>
>> http://n.ethz.ch/student/homartin/r-vs-octave/
>>
>> There, you can also find the .pdf file of the comparison of the
>> reference, the R output and the one from octave.
>>
>> The calculations are quite complex, nevertheless, I would be very happy
>> to read your reply concerning this problem.
>>
>> Thanks in advance, best Regards,
>>     Martin
>>
>>
> 
> I get only the r-devel digest, so I could'nt respond the direct way
> (this message will not show up in the correct thread, probably), but:
> 
> 
> there is nothing wrong with the R results AFAICS: I translated your
> octave script one-to-one to R (see attachment). this produces (within
> floating point prec. (double)) the same results. I propose you go
> through this and your own R-script (which honestly was unreadable to me
> :-)) with browser() or debug() and compare results for Ms1, Ms2, Msr on
> the way to localise the differences in computation.
> if you uncomment the last few lines, source("Rs.R") will give you
> vectors which you can directly compare to the octave results (note that
> the leading 499 zeros are still there, since I mimicked your octave script)
> 
> so: really no bug, right?
> 
> joerg

NO BUG! I found out what was wrong and it was all my fault!

The etha functions were the problem. They should be etha_sX(thetaX)
where thetaX is a function of theta. I made the etha_sX functions that
way and defined the etha_sX functions to be functions of theta, NOT thetaX.
But when I used these I called them with thetaX instead of only theta.

I would like to apologize for the "bug", I hope this didn't cost you too
much time. Rest assured I feel quite embarrassed now :-?.
I can imagine the script was hard to read, I am new to R and sometimes
it is still hard for me to get things done at all.

Thanks for your time and the great product of course ;-).

Best regards,
	Martin

> 
> 
> ------------------------------------------------------------------------
> 
> Rs <- function (lambda, theta, N) {
> 
>    n0 = 3.66 
>    n1 = 2.4 
>    n2 = 1.45 
>    nn = 1.00 
> 
>    lambda_ref = 1000 
>    lambda_min = 500  
>    lambda_max = 1500 
>    increment = 5 
>    ymin = 0 
>    ymax = 1 
> 
>    d1 = lambda_ref /  4 / n1 
>    d2 = lambda_ref / 4 / n2 
> 
>    theta0 = asin( nn / n0 * sin( theta ) ) 
>    theta1 = asin( nn / n1 * sin( theta ) ) 
>    theta2 = asin( nn / n2 * sin( theta ) ) 
> 
>    etha_s0 = -n0 * cos( theta0 ) 
>    etha_s1 = n1 * cos( theta1 ) 
>    etha_s2 = n2 * cos( theta2 ) 
>    etha_sn = nn * cos( theta ) 
> 
>    delta1 = 2 * pi / lambda * n1 * d1 * cos( theta1 ) 
>    delta2 = 2 * pi / lambda * n2 * d2 * cos( theta2 ) 
> 
>    Ms1 = matrix(c(cos( delta1 ) , 1i / etha_s1 * sin( delta1 ) , 1i * etha_s1 * sin( delta1) , cos( delta1 )),2,2,byrow=T)
>    Ms2 = matrix(c(cos( delta2 ) , 1i / etha_s2 * sin( delta2 ) , 1i * etha_s2 * sin( delta2) , cos( delta2 )) ,2,2,byrow=T) 
> 
>    dum = Ms2 %*% Ms1
>    Msr <- diag(2) 
>    for (i in 1:N) Msr <- dum %*% Msr
> 
>    Rs = ( abs( ( etha_sn * ( Msr[1 , 1] - etha_s0 * Msr[ 1 , 2 ] ) - ( Msr[ 2 , 1 ]
>    - etha_s0 * Msr[ 2 , 2 ] ) ) / ( etha_sn * ( Msr[ 1 , 1 ]  - etha_s0 * Msr[ 1 ,
>      2 ] ) + ( Msr[ 2 , 1 ]  - etha_s0 * Msr[2 , 2] ) ) ) )^2
>    Rs
> }
> 
> ##r0deg <- r75deg <- numeric(1001)
> ##for (i in 500:1500) r0deg[i]=Rs(i,0,5)
> ##for (i in  500:1500) r75deg[i]=Rs(i,75*pi/180,5)
> ##
> ##oct0  <- read.table('o0deg,dat')
> ##oct75 <- read.table('o75deg,dat')


-- 
Sometimes I wonder if I'm in my right mind.  Then it passes off and I'm
as intelligent as ever.
		-- Samuel Beckett, "Endgame"

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 254 bytes
Desc: OpenPGP digital signature
Url : https://stat.ethz.ch/pipermail/r-devel/attachments/20060614/4ad917a8/attachment-0001.bin 

From danlipsitt at gmail.com  Wed Jun 14 23:36:02 2006
From: danlipsitt at gmail.com (Dan Lipsitt)
Date: Wed, 14 Jun 2006 17:36:02 -0400
Subject: [Rd] package compile error on RHEL x86_64
Message-ID: <b3a7efa90606141436v12d1d05byf46fa7a0b90f4ff6@mail.gmail.com>

I am unable to install the gmp package on an x86_64 (Xeon) machine. I
have had the same problem with other packages (eg. MCMCpack) as well.
I am running Red Hat Enterprise Linux 4.1.
I get the following error:

g++ -shared -L/usr/local/lib64 -o gmp.so biginteger.o
biginteger_operator.o bigintegerR.o bigrational.o
bigrational_operator.o bigrationalR.o factor.o -L/usr/local/lib/ -lgmp
/usr/bin/ld: /usr/lib/gcc/x86_64-redhat-linux/3.4.3/libstdc++.a(functexcept.o):
relocation R_X86_64_32 against `std::bad_exception::~bad_exception()'
can not be used when making a shared object; recompile with -fPIC
/usr/lib/gcc/x86_64-redhat-linux/3.4.3/libstdc++.a: could not read
symbols: Bad value

However, I have found that if I run "R CMD SHLIB" twice in the src/
directory, once to build the .o files, and once to link, I can build
the shared library. If I run it on the .o files instead of the .cc
files it uses gcc instead of g++. This appears to be the change that
allows the lib to build. "-fPIC" seems to have nothing to do with it.

So my question is: How do I get "R CMD INSTALL" to link with gcc
instead of g++? I have tried adding "LINK.cc = $(LINK.c)" to the top
of src/Makevars.in and then running "R CMD check" in the top dir of
the package, but it uses g++ anyway. Any other fix or workaround
suggestions would be appreciated as well.

A commandline transcript follows below.

Thanks,
Dan

$ sudo R CMD INSTALL gmp_0.3-4.tar.gz
* Installing *source* package 'gmp' ...
creating cache ./config.cache
checking for __gmpz_ui_sub in -lgmp... yes
updating cache ./config.cache
creating ./config.status
creating src/Makevars
** libs
g++ -I/usr/lib/R/include -I/usr/local/include/  -Wno-conversion
-I/usr/local/include   -fPIC  -O2 -g -c biginteger.cc -o biginteger.o
g++ -I/usr/lib/R/include -I/usr/local/include/  -Wno-conversion
-I/usr/local/include   -fPIC  -O2 -g -c biginteger_operator.cc -o
biginteger_operator.o
g++ -I/usr/lib/R/include -I/usr/local/include/  -Wno-conversion
-I/usr/local/include   -fPIC  -O2 -g -c bigintegerR.cc -o
bigintegerR.o
g++ -I/usr/lib/R/include -I/usr/local/include/  -Wno-conversion
-I/usr/local/include   -fPIC  -O2 -g -c bigrational.cc -o
bigrational.o
g++ -I/usr/lib/R/include -I/usr/local/include/  -Wno-conversion
-I/usr/local/include   -fPIC  -O2 -g -c bigrational_operator.cc -o
bigrational_operator.o
g++ -I/usr/lib/R/include -I/usr/local/include/  -Wno-conversion
-I/usr/local/include   -fPIC  -O2 -g -c bigrationalR.cc -o
bigrationalR.o
g++ -I/usr/lib/R/include -I/usr/local/include/  -Wno-conversion
-I/usr/local/include   -fPIC  -O2 -g -c factor.cc -o factor.o
g++ -shared -L/usr/local/lib64 -o gmp.so biginteger.o
biginteger_operator.o bigintegerR.o bigrational.o
bigrational_operator.o bigrationalR.o factor.o -L/usr/local/lib/ -lgmp
/usr/bin/ld: /usr/lib/gcc/x86_64-redhat-linux/3.4.3/libstdc++.a(functexcept.o):
relocation R_X86_64_32 against `std::bad_exception::~bad_exception()'
can not be used when making a shared object; recompile with -fPIC
/usr/lib/gcc/x86_64-redhat-linux/3.4.3/libstdc++.a: could not read
symbols: Bad value
collect2: ld returned 1 exit status
make: *** [gmp.so] Error 1
ERROR: compilation failed for package 'gmp'

$ tar xzf gmp_0.3-4.tar.gz
$ cd gmp/src
$ R CMD SHLIB *.cc
g++ -I/usr/lib/R/include  -I/usr/local/include   -fPIC  -O2 -g -c
biginteger.cc -o biginteger.o
g++ -I/usr/lib/R/include  -I/usr/local/include   -fPIC  -O2 -g -c
biginteger_operator.cc -o biginteger_operator.o
g++ -I/usr/lib/R/include  -I/usr/local/include   -fPIC  -O2 -g -c
bigintegerR.cc -o bigintegerR.o
g++ -I/usr/lib/R/include  -I/usr/local/include   -fPIC  -O2 -g -c
bigrational.cc -o bigrational.o
g++ -I/usr/lib/R/include  -I/usr/local/include   -fPIC  -O2 -g -c
bigrational_operator.cc -o bigrational_operator.o
g++ -I/usr/lib/R/include  -I/usr/local/include   -fPIC  -O2 -g -c
bigrationalR.cc -o bigrationalR.o
g++ -I/usr/lib/R/include  -I/usr/local/include   -fPIC  -O2 -g -c
factor.cc -o factor.o
g++ -shared -L/usr/local/lib64 -o biginteger.so biginteger.o
biginteger_operator.o bigintegerR.o bigrational.o
bigrational_operator.o bigrationalR.o factor.o
/usr/bin/ld: /usr/lib/gcc/x86_64-redhat-linux/3.4.3/libstdc++.a(functexcept.o):
relocation R_X86_64_32 against `std::bad_exception::~bad_exception()'
can not be used when making a shared object; recompile with -fPIC
/usr/lib/gcc/x86_64-redhat-linux/3.4.3/libstdc++.a: could not read
symbols: Bad value
collect2: ld returned 1 exit status
make: *** [biginteger.so] Error 1
$ R CMD SHLIB *.o
gcc -shared -L/usr/local/lib64 -o biginteger.so biginteger.o
biginteger_operator.o bigintegerR.o bigrational.o
bigrational_operator.o bigrationalR.o factor.o
$


From roy_kuraisa at merck.com  Wed Jun 14 23:38:52 2006
From: roy_kuraisa at merck.com (roy_kuraisa at merck.com)
Date: Wed, 14 Jun 2006 23:38:52 +0200 (CEST)
Subject: [Rd] loading library from network share (PR#8982)
Message-ID: <20060614213852.791C22060A@slim.kubism.ku.dk>

Full_Name: roy kuraisa
Version: 2.2.1
OS: Windows XP SP2
Submission from: (NULL) (155.91.28.232)


When loading a library from network share drive (e.g., \\nnn\f1\f2\p1), when
First.lib is called, the libray name contains "/" instead of "\" resulting in an
invalid Windows filepath.

Here's an example:
>From R,
> library(foo.lib="\\\\kodak\\research_genetics\\rlibs");
Within First.lib,
.First.lib <-function(lib, pkg)
{
    cat("lib name ",lib,"\n")
}
produces the output
   lib name //kodak/research_genetics/rlibs


From jeff at kanecap.com  Thu Jun 15 00:03:08 2006
From: jeff at kanecap.com (Jeff Enos)
Date: Wed, 14 Jun 2006 18:03:08 -0400
Subject: [Rd] Package naming best practices
Message-ID: <17552.34716.430538.750333@gargle.gargle.HOWL>

R-devel,

I'm in the process of choosing a name for a new package.  I've already
decided that the name will have two parts, 'portfolio' and 'sim', but
can't decide between 'portfolioSim' and 'portfolio.sim'.  Is there any
good reason to choose one over the other?

Thanks in advance,

Jeff


-- 
Jeff Enos
Kane Capital Management
jeff at kanecap.com


From khansen at stat.Berkeley.EDU  Thu Jun 15 02:21:35 2006
From: khansen at stat.Berkeley.EDU (Kasper Daniel Hansen)
Date: Wed, 14 Jun 2006 17:21:35 -0700
Subject: [Rd] Package naming best practices
In-Reply-To: <17552.34716.430538.750333@gargle.gargle.HOWL>
References: <17552.34716.430538.750333@gargle.gargle.HOWL>
Message-ID: <4F4B38A0-B580-425B-871F-3D163CF782B7@stat.berkeley.edu>

Only personal preferences, although you might argue that the two  
naming schemes hints at a package using either S3 or S4 methodology.  
Some packages also has a all cap naming scheme like PortfolioSim.

But why not follow part of the R community and choose an  
incomprehensible abbreviation like
   Ps614
(where 614 of course refer to the date that you posted this question  
on R-devel) or try to appeal to the script kiddies by something like
   P0rS1mRul3z

/Kasper

On Jun 14, 2006, at 3:03 PM, Jeff Enos wrote:

> R-devel,
>
> I'm in the process of choosing a name for a new package.  I've already
> decided that the name will have two parts, 'portfolio' and 'sim', but
> can't decide between 'portfolioSim' and 'portfolio.sim'.  Is there any
> good reason to choose one over the other?
>
> Thanks in advance,
>
> Jeff
>
>
> -- 
> Jeff Enos
> Kane Capital Management
> jeff at kanecap.com
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Thu Jun 15 11:33:19 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 15 Jun 2006 10:33:19 +0100 (BST)
Subject: [Rd] package compile error on RHEL x86_64
In-Reply-To: <b3a7efa90606141436v12d1d05byf46fa7a0b90f4ff6@mail.gmail.com>
References: <b3a7efa90606141436v12d1d05byf46fa7a0b90f4ff6@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0606151031310.13875@gannet.stats.ox.ac.uk>

This is a problem with your compiler: it should be linking against a 
shared version of libstdc++.  Please take this up with your OS support.

On Wed, 14 Jun 2006, Dan Lipsitt wrote:

> I am unable to install the gmp package on an x86_64 (Xeon) machine. I
> have had the same problem with other packages (eg. MCMCpack) as well.
> I am running Red Hat Enterprise Linux 4.1.
> I get the following error:
>
> g++ -shared -L/usr/local/lib64 -o gmp.so biginteger.o
> biginteger_operator.o bigintegerR.o bigrational.o
> bigrational_operator.o bigrationalR.o factor.o -L/usr/local/lib/ -lgmp
> /usr/bin/ld: /usr/lib/gcc/x86_64-redhat-linux/3.4.3/libstdc++.a(functexcept.o):
> relocation R_X86_64_32 against `std::bad_exception::~bad_exception()'
> can not be used when making a shared object; recompile with -fPIC
> /usr/lib/gcc/x86_64-redhat-linux/3.4.3/libstdc++.a: could not read
> symbols: Bad value
>
> However, I have found that if I run "R CMD SHLIB" twice in the src/
> directory, once to build the .o files, and once to link, I can build
> the shared library. If I run it on the .o files instead of the .cc
> files it uses gcc instead of g++. This appears to be the change that
> allows the lib to build. "-fPIC" seems to have nothing to do with it.
>
> So my question is: How do I get "R CMD INSTALL" to link with gcc
> instead of g++? I have tried adding "LINK.cc = $(LINK.c)" to the top
> of src/Makevars.in and then running "R CMD check" in the top dir of
> the package, but it uses g++ anyway. Any other fix or workaround
> suggestions would be appreciated as well.
>
> A commandline transcript follows below.
>
> Thanks,
> Dan
>
> $ sudo R CMD INSTALL gmp_0.3-4.tar.gz
> * Installing *source* package 'gmp' ...
> creating cache ./config.cache
> checking for __gmpz_ui_sub in -lgmp... yes
> updating cache ./config.cache
> creating ./config.status
> creating src/Makevars
> ** libs
> g++ -I/usr/lib/R/include -I/usr/local/include/  -Wno-conversion
> -I/usr/local/include   -fPIC  -O2 -g -c biginteger.cc -o biginteger.o
> g++ -I/usr/lib/R/include -I/usr/local/include/  -Wno-conversion
> -I/usr/local/include   -fPIC  -O2 -g -c biginteger_operator.cc -o
> biginteger_operator.o
> g++ -I/usr/lib/R/include -I/usr/local/include/  -Wno-conversion
> -I/usr/local/include   -fPIC  -O2 -g -c bigintegerR.cc -o
> bigintegerR.o
> g++ -I/usr/lib/R/include -I/usr/local/include/  -Wno-conversion
> -I/usr/local/include   -fPIC  -O2 -g -c bigrational.cc -o
> bigrational.o
> g++ -I/usr/lib/R/include -I/usr/local/include/  -Wno-conversion
> -I/usr/local/include   -fPIC  -O2 -g -c bigrational_operator.cc -o
> bigrational_operator.o
> g++ -I/usr/lib/R/include -I/usr/local/include/  -Wno-conversion
> -I/usr/local/include   -fPIC  -O2 -g -c bigrationalR.cc -o
> bigrationalR.o
> g++ -I/usr/lib/R/include -I/usr/local/include/  -Wno-conversion
> -I/usr/local/include   -fPIC  -O2 -g -c factor.cc -o factor.o
> g++ -shared -L/usr/local/lib64 -o gmp.so biginteger.o
> biginteger_operator.o bigintegerR.o bigrational.o
> bigrational_operator.o bigrationalR.o factor.o -L/usr/local/lib/ -lgmp
> /usr/bin/ld: /usr/lib/gcc/x86_64-redhat-linux/3.4.3/libstdc++.a(functexcept.o):
> relocation R_X86_64_32 against `std::bad_exception::~bad_exception()'
> can not be used when making a shared object; recompile with -fPIC
> /usr/lib/gcc/x86_64-redhat-linux/3.4.3/libstdc++.a: could not read
> symbols: Bad value
> collect2: ld returned 1 exit status
> make: *** [gmp.so] Error 1
> ERROR: compilation failed for package 'gmp'
>
> $ tar xzf gmp_0.3-4.tar.gz
> $ cd gmp/src
> $ R CMD SHLIB *.cc
> g++ -I/usr/lib/R/include  -I/usr/local/include   -fPIC  -O2 -g -c
> biginteger.cc -o biginteger.o
> g++ -I/usr/lib/R/include  -I/usr/local/include   -fPIC  -O2 -g -c
> biginteger_operator.cc -o biginteger_operator.o
> g++ -I/usr/lib/R/include  -I/usr/local/include   -fPIC  -O2 -g -c
> bigintegerR.cc -o bigintegerR.o
> g++ -I/usr/lib/R/include  -I/usr/local/include   -fPIC  -O2 -g -c
> bigrational.cc -o bigrational.o
> g++ -I/usr/lib/R/include  -I/usr/local/include   -fPIC  -O2 -g -c
> bigrational_operator.cc -o bigrational_operator.o
> g++ -I/usr/lib/R/include  -I/usr/local/include   -fPIC  -O2 -g -c
> bigrationalR.cc -o bigrationalR.o
> g++ -I/usr/lib/R/include  -I/usr/local/include   -fPIC  -O2 -g -c
> factor.cc -o factor.o
> g++ -shared -L/usr/local/lib64 -o biginteger.so biginteger.o
> biginteger_operator.o bigintegerR.o bigrational.o
> bigrational_operator.o bigrationalR.o factor.o
> /usr/bin/ld: /usr/lib/gcc/x86_64-redhat-linux/3.4.3/libstdc++.a(functexcept.o):
> relocation R_X86_64_32 against `std::bad_exception::~bad_exception()'
> can not be used when making a shared object; recompile with -fPIC
> /usr/lib/gcc/x86_64-redhat-linux/3.4.3/libstdc++.a: could not read
> symbols: Bad value
> collect2: ld returned 1 exit status
> make: *** [biginteger.so] Error 1
> $ R CMD SHLIB *.o
> gcc -shared -L/usr/local/lib64 -o biginteger.so biginteger.o
> biginteger_operator.o bigintegerR.o bigrational.o
> bigrational_operator.o bigrationalR.o factor.o
> $
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From sean.hill at epfl.ch  Thu Jun 15 12:03:54 2006
From: sean.hill at epfl.ch (Sean Hill)
Date: Thu, 15 Jun 2006 12:03:54 +0200
Subject: [Rd] statically linked embedded R
Message-ID: <28480477-8B5B-49CA-B0AC-E01FCD470D72@epfl.ch>

Hello,

I am trying to compile a stripped down libR.a that I can statically  
link into an application running in a limited system environment  
(i.e. no shared libraries, no dynamic loading, no graphics, no  
threads, single process, etc).

I have tried configuring --with-x=NO and --enable-Rshlib and --enable- 
static=yes without success.

But I suspect I need to get my hands a bit dirtier.

Can anyone give me some pointers to the best way to approach building  
this?

Thank you very much
Sean


From gregor.gorjanc at gmail.com  Thu Jun 15 13:16:52 2006
From: gregor.gorjanc at gmail.com (Gregor Gorjanc)
Date: Thu, 15 Jun 2006 13:16:52 +0200
Subject: [Rd]  separators in data()
Message-ID: <449141A4.6090905@bfro.uni-lj.si>

Ben,

you confused read.csv and read.csv2. Separator in read.csv is ",", while
it is ";" in read.csv2. This is due to use of different decimal symbols
in some european languages - mine is one of them  and I really hate
this. So the situation is:

                      decimal separator
english               .       ,
some european lang.   ,       ;

There is then of course also a need to handle decimal separator and this
is done in read.csv2.

>   just out of curiosity:
> 
>   why is the default behavior in data() for reading in .csv files
> to use sep=";" (semicolon rather than comma)?  is this a historical
> artifact of some sort, or is there other logic to it?  It caught
> me by surprise since I was expecting it to be sep="," as in
> read.csv() ...
> 
>   cheers
>     Ben Bolker


-- 
Lep pozdrav / With regards,
    Gregor Gorjanc

----------------------------------------------------------------------
University of Ljubljana     PhD student
Biotechnical Faculty
Zootechnical Department     URI: http://www.bfro.uni-lj.si/MR/ggorjan
Groblje 3                   mail: gregor.gorjanc <at> bfro.uni-lj.si

SI-1230 Domzale             tel: +386 (0)1 72 17 861
Slovenia, Europe            fax: +386 (0)1 72 17 888

----------------------------------------------------------------------
"One must learn by doing the thing; for though you think you know it,
 you have no certainty until you try." Sophocles ~ 450 B.C.


From ggrothendieck at gmail.com  Thu Jun 15 13:45:28 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 15 Jun 2006 07:45:28 -0400
Subject: [Rd] separators in data()
In-Reply-To: <449141A4.6090905@bfro.uni-lj.si>
References: <449141A4.6090905@bfro.uni-lj.si>
Message-ID: <971536df0606150445w1a45be29ie91cd35bb905ecd2@mail.gmail.com>

I don't think the poster is confused.  He is referring to the data()
command and
that one uses semicolon, not comma, and the poster is wondering what the
motivation is for that choice.  From ?data

     Currently, four formats of data files are supported:

        1.  files ending '.R' or '.r' are 'source()'d in, with the R
           working directory changed temporarily to the directory
           containing the respective file.

        2.  files ending '.RData' or '.rda' are 'load()'ed.

        3.  files ending '.tab', '.txt' or '.TXT' are read using
           'read.table(..., header = TRUE)', and hence result in a data
           frame.

        4.  files ending '.csv' or '.CSV' are read using
           'read.table(..., header = TRUE, sep = ";")', and also result
           in a data frame.

On 6/15/06, Gregor Gorjanc <gregor.gorjanc at gmail.com> wrote:
> Ben,
>
> you confused read.csv and read.csv2. Separator in read.csv is ",", while
> it is ";" in read.csv2. This is due to use of different decimal symbols
> in some european languages - mine is one of them  and I really hate
> this. So the situation is:
>
>                      decimal separator
> english               .       ,
> some european lang.   ,       ;
>
> There is then of course also a need to handle decimal separator and this
> is done in read.csv2.
>
> >   just out of curiosity:
> >
> >   why is the default behavior in data() for reading in .csv files
> > to use sep=";" (semicolon rather than comma)?  is this a historical
> > artifact of some sort, or is there other logic to it?  It caught
> > me by surprise since I was expecting it to be sep="," as in
> > read.csv() ...
> >
> >   cheers
> >     Ben Bolker
>
>
> --
> Lep pozdrav / With regards,
>    Gregor Gorjanc
>
> ----------------------------------------------------------------------
> University of Ljubljana     PhD student
> Biotechnical Faculty
> Zootechnical Department     URI: http://www.bfro.uni-lj.si/MR/ggorjan
> Groblje 3                   mail: gregor.gorjanc <at> bfro.uni-lj.si
>
> SI-1230 Domzale             tel: +386 (0)1 72 17 861
> Slovenia, Europe            fax: +386 (0)1 72 17 888
>
> ----------------------------------------------------------------------
> "One must learn by doing the thing; for though you think you know it,
>  you have no certainty until you try." Sophocles ~ 450 B.C.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From Jan.Kleinn at partnerre.com  Thu Jun 15 14:48:20 2006
From: Jan.Kleinn at partnerre.com (Jan.Kleinn at partnerre.com)
Date: Thu, 15 Jun 2006 14:48:20 +0200
Subject: [Rd] download.file() yields incomplete files with method="internal"
Message-ID: <OFE1E88304.37C6777F-ONC125718E.00450185-C125718E.00466EC0@partnerre.com>


Dear all,

as the bug # 7991 is flagged not-reproducible, let me give you some pieces
of code, as I have the same or similar problem. The problem always shows up
with the first example (a small text file) and only sometimes (but without
obvious pattern) with the second example, which is a binary file.

> download.file("ftp://ftp.nhc.noaa.gov/pub/atcf/btk/bal012006.dat",
"C:/temp/bal012006.dat", method = 'internal', mode = 'w', cacheOK = FALSE)
trying URL 'ftp://ftp.nhc.noaa.gov/pub/atcf/btk/bal012006.dat'
ftp data connection made, file length 5110 bytes
opened URL
downloaded 0 bytes

Warning message:
downloaded length 0 != reported length 5110

>
download.file("ftp://ftp.nhc.noaa.gov/pub/atcf/aid_public/aal012006.dat.gz",
 "C:/temp/aal012006.dat.gz", method = 'internal', mode = 'wb', cacheOK =
FALSE)
trying URL 'ftp://ftp.nhc.noaa.gov/pub/atcf/aid_public/aal012006.dat.gz'
ftp data connection made, file length 173760 bytes
opened URL
downloaded 155Kb

Warning message:
downloaded length 159140 != reported length 173760


Finally, is the spec of the system I'm working on:
> version
               _
platform       i386-pc-mingw32
arch           i386
os             mingw32
system         i386, mingw32
status
major          2
minor          3.1
year           2006
month          06
day            01
svn rev        38247
language       R
version.string Version 2.3.1 (2006-06-01)
> win.version()
[1] "Windows XP Professional (build 2600) Service Pack 2.0"


Many thanks in advance and best regards,
Jan


From juan.felipe at message.com  Thu Jun 15 15:04:27 2006
From: juan.felipe at message.com (juan.felipe at message.com)
Date: Thu, 15 Jun 2006 15:04:27 +0200 (CEST)
Subject: [Rd] Ganador del premio (Winner of a prize) (PR#8985)
Message-ID: <20060615130427.9E43549FF3@slim.kubism.ku.dk>

--qzsoft_directmail_seperator
Content-Type: text/plain;
	charset="DEFAULT"
Content-Transfer-Encoding: base64

TE9UT0JPTk8gUy5BLgpMT1RFUklBIE5BQ0lPTkFMIFBST01PQ0lPTi9QUkVNSU9TClBhc2VvIERl
IExhIENhc3RlbGxhbmEKNS00NSwgMjgwMDggTWFkcmlkLgpTcGFpbiBCcmFuY2guClRlbDo5MTY0
NDY5NTIKRmF4OjkxNjQ0Njk1MwpSZWYuIE66OiBFUy8wMDcvMDUvMTIvTUFELgpCYXRjaC4gTro6
IEVTUC83ODQwNy80NTEvMDYuCgpXZSB3aXNoIHRvIGNvbmdyYXR1bGF0ZSB5b3Ugb3ZlciB5b3Vy
IGVtYWlsIHN1Y2Nlc3MgaW4gb3VyIGNvbXB1dGVyIEJhbGxvdGluZyBzd2VlcHN0YWtlIGhlbGQg
b24gMm5kIEpVTkUsMjAwNi4gVGhpcyBpcyBhIE1pbGxlbm5pdW0gU2NpZW50aWZpYyBjb21wdXRl
ciBnYW1lIGluIHdoaWNoIGVtYWlsIGFkZHJlc3NlcyBhbmQgbmFtZXMgd2VyZSB1c2VkLiBJdCBp
cyBhIFByb21vdGlvbmFsIHByb2dyYW0gYWltZWQgYXQgZW5jb3VyYWdpbmcgaW50ZXJuZXQgdXNl
cnM7IHRoZXJlZm9yZSB5b3UgZG8gbm90IG5lZWQgdG8gYnV5IHRpY2tldCB0byBlbnRlciBmb3Ig
aXQuCgpZb3VyIGVtYWlsIGFkZHJlc3MgYXR0YWNoZWQgdG8gdGlja2V0IHN0YXIgbnVtYmVyICg5
qi8yuikgZHJldyB0aGUgRVVST01JTExJT04vIExPVEVSSUEgTkFDSU9OQUwgbnVtYmVycyA1LTAt
MC00LTkgd2hpY2ggY29uc2VxdWVudGx5IHdvbiB0aGUgZHJhdyBpbiB0aGUgU2Vjb25kIGNhdGVn
b3J5LiBZb3UgaGF2ZSBiZWVuIGFwcHJvdmluZyBmb3IgdGhlIHN0YXIgcHJpemUgb2YgIDc2Nywy
NDguMjYugCAoU2V2ZW4gSHVuZHJlZCBBbmQgU2l4dHkgU2V2ZW4gVGhvdXNhbmQsIFR3byBIdW5k
cmVkIEFuZCBGb3J0eSBFaWdodCBFdXJvcyBUd2VudHkgU2l4IENlbnRzKQoKQ09OR1JBVFVMQVRJ
T05TISEhCgpUbyBiZWdpbiB5b3VyIGxvdHRlcnkgY2xhaW0sIHBsZWFzZSBjb250YWN0IHlvdXIg
Y2xhaW1zIGFnZW50LCBNUiBSQVVMIFNBTkNIRVoKRm9yZWlnbiBvcGVyYXRpb25zIG1hbmFnZXIs
IAoKQ09GSURJUyAgU0VDVVJJVFkgJiBGSU5BTkNFICBTQSAoU1BBSU4pClRlbDogMDAtMzQtNjU5
LTQyOC01NzIgICAKRmF4OiAgMDAtMzQtOTQwLTQ2Mi0yOTIgCkVtYWlsOiBzci5zYW5jaGV6N0B5
YWhvby5jb20KCgpmb3IgdGhlIHByb2Nlc3NpbmcgYW5kIHJlbWl0dGFuY2Ugb2YgeW91ciB3aW5u
aW5nIHByaXplICB0byBhIGRlc2lnbmF0aW9uIG9mIHlvdXIgY2hvaWNlLgoKUmVtZW1iZXIsIGFs
bCBwcml6ZSBtb25leSBtdXN0IGJlIGNsYWltZWQgbm90IGxhdGVyIHRoYW4sIDEwdGggb2YgIEpV
TFksIDIwMDYuIEFmdGVyIHRoaXMgZGF0ZSBhbGwgZnVuZHMgd2lsbCBiZSByZXR1cm5lZCB0byB0
aGUgTUlOSVNUUlkgREUgRUNPTk9NSUEgWSBIQUNJRU5EQSBhcyB1bmNsYWltZWQuICAKUGxlYXNl
IHJlbWVtYmVyIHRvIHF1b3RlIHlvdXIgcmVmZXJlbmNlIGFuZCB3aW5uaW5nIG51bWJlcnMgaW4g
YWxsIGNvcnJlc3BvbmRlbmNlcyB3aXRoIHlvdXIgY2xhaW1zIG9mZmljZXIuCgpDb25ncmF0dWxh
dGlvbnMgb25jZSBhZ2FpbiBmcm9tIGFsbCBvdXIgbWVtYmVycyBvZiBzdGFmZiBhbmQgdGhhbmsg
eW91IGZvciBiZWluZyBhIHBhcnQgb2Ygb3VyIEludGVybmF0aW9uYWwgcHJvbW90aW9ucyBwcm9n
cmFtLgoKU2luY2VyZWx5LAoKTG90dGVyeSBjb29yZGluYXRvci4KTXIuIEpVQU4gRkVMSVBFIEFD
RUJFRE8gCgpUaGUgaW5mb3JtYXRpb24gdHJhbnNtaXR0ZWQgaXMgaW50ZW5kZWQgb25seSBmb3Ig
dGhlIHBlcnNvbiBvciBlbnRpdHkgLlRvIHdob20gb3Igd2hpY2ggaXQgaXMgYWRkcmVzc2VkLiBV
bmF1dGhvcml6ZWQgdXNlLCBkaXNjbG9zdXJlIG9yIGNvcHlpbmcgaXMgc3RyaWN0bHkgcHJvaGli
aXRlZC4gVGhlIHNlbmRlciBhY2NlcHRzIG5vIGxpYWJpbGl0eSBmb3IgdGhlIGltcHJvcGVyIHRy
YW5zbWlzc2lvbiBvZiB0aGlzIGNvbW11bmljYXRpb24gbm9yIGZvciBhbnkgZGVsYXkgaW4gaXRz
IHJlY2VpcHQuCg==

--qzsoft_directmail_seperator--


From jranke at uni-bremen.de  Thu Jun 15 16:21:39 2006
From: jranke at uni-bremen.de (Johannes Ranke)
Date: Thu, 15 Jun 2006 16:21:39 +0200
Subject: [Rd] download.file() yields incomplete files with
	method="internal"
In-Reply-To: <OFE1E88304.37C6777F-ONC125718E.00450185-C125718E.00466EC0@partnerre.com>
References: <OFE1E88304.37C6777F-ONC125718E.00450185-C125718E.00466EC0@partnerre.com>
Message-ID: <20060615142139.GA22590@mail.uft.uni-bremen.de>

Hi Jan!

* Jan.Kleinn at partnerre.com <Jan.Kleinn at partnerre.com> [060615 15:10]:
> 
> Dear all,
> 
> as the bug # 7991 is flagged not-reproducible, let me give you some pieces
> of code, as I have the same or similar problem. The problem always shows up
> with the first example (a small text file) and only sometimes (but without
> obvious pattern) with the second example, which is a binary file.
> 
> > download.file("ftp://ftp.nhc.noaa.gov/pub/atcf/btk/bal012006.dat",
> "C:/temp/bal012006.dat", method = 'internal', mode = 'w', cacheOK = FALSE)
> trying URL 'ftp://ftp.nhc.noaa.gov/pub/atcf/btk/bal012006.dat'
> ftp data connection made, file length 5110 bytes
> opened URL
> downloaded 0 bytes
> 
> Warning message:
> downloaded length 0 != reported length 5110

when I tried the first example (Windows NT, R 2.3.1), it worked
correctly two times, and then gave exactly the error message you cited
in the third run.

The second example worked once, and then gave the behaviour cited by
you, only the downloaded length differed. Specs:

> version
_                         
platform       i386-pc-mingw32           
arch           i386                      
os             mingw32                   
system         i386, mingw32             
status                                   
major          2                         
minor          3.1                       
year           2006                      
month          06                        
day            01                        
svn rev        38247                     
language       R                         
version.string Version 2.3.1 (2006-06-01)
> win.version()
[1] "Windows NT 4.0 (build 1381) Service Pack 6"

No problems on Linux, R 2.3.1 (after replacing "C:/temp" by /tmp/).

Regards,

Johannes

> 
> >
> download.file("ftp://ftp.nhc.noaa.gov/pub/atcf/aid_public/aal012006.dat.gz",
>  "C:/temp/aal012006.dat.gz", method = 'internal', mode = 'wb', cacheOK =
> FALSE)
> trying URL 'ftp://ftp.nhc.noaa.gov/pub/atcf/aid_public/aal012006.dat.gz'
> ftp data connection made, file length 173760 bytes
> opened URL
> downloaded 155Kb
> 
> Warning message:
> downloaded length 159140 != reported length 173760
> 
> 
> Finally, is the spec of the system I'm working on:
> > version
>                _
> platform       i386-pc-mingw32
> arch           i386
> os             mingw32
> system         i386, mingw32
> status
> major          2
> minor          3.1
> year           2006
> month          06
> day            01
> svn rev        38247
> language       R
> version.string Version 2.3.1 (2006-06-01)
> > win.version()
> [1] "Windows XP Professional (build 2600) Service Pack 2.0"
> 
> 
> Many thanks in advance and best regards,
> Jan
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Dr. Johannes Ranke                 jranke at uni-bremen.de
UFT Bremen, Leobenerstr. 1         +49 421 218 8971 
D-28359 Bremen                     http://www.uft.uni-bremen.de/chemie/ranke


From nicolas.turenne at jouy.inra.fr  Thu Jun 15 17:08:12 2006
From: nicolas.turenne at jouy.inra.fr (Nicolas Turenne)
Date: Thu, 15 Jun 2006 17:08:12 +0200
Subject: [Rd] problem to read data into a package
Message-ID: <449177DC.4020304@jouy.inra.fr>

Hello

i have this following error making a package
---------- Making package svcR ------------
  adding build stamp to DESCRIPTION
  installing NAMESPACE file and metadata
  installing R files
  installing data files
  installing man source files
  installing indices
Error in read.table(zfile, header = TRUE) :
   more column than column names

this kind of error is produced when spaces are met in data .
in my case there are only tabulations and three columns of real numbers 
(with 3 digits)

i have no idea what it happens

thank for help

--
Nicolas


From marsh at uri.edu  Thu Jun 15 17:45:38 2006
From: marsh at uri.edu (marsh at uri.edu)
Date: Thu, 15 Jun 2006 17:45:38 +0200 (CEST)
Subject: [Rd] S4 class slot name 'names' is not allowed (PR#8768
	S4Methods)
Message-ID: <20060615154538.0F23E19A15@slim.kubism.ku.dk>

Hello,

Besides the problem with using "names," one has a similar problem using
".Data" together with "VIRTUAL." 

Consider the top of p. 295 of the green book. This should work (I had to
change "structure" to "junk" because "structure" is a sealed class
definition):

       setClass("junk",
		representation(.Data="vector",VIRTUAL))

but this is what one gets

  setClass("junk",
	+ representation(.Data="vector",VIRTUAL))
	Error in representation(.Data = "vector", VIRTUAL) : 
        object "VIRTUAL" not found

Now consider p. 5 of "S4 Classes in 15 pages, more or less." This should
work:

	setClass("myVclass", representation(a = "character", "VIRTUAL"))

and indeed it does:

	setClass("myVclass", representation(a = "character", "VIRTUAL"))
	[1] "myVclass"

The need to quote "VIRTUAL" is the first bug, but read on.

Now take the above example, and change the first slot's name to ".Data."
Now, one gets:

	setClass("myVclass", representation(.Data = "character", "VIRTUAL"))
	Error in makePrototypeFromClassDef(properties, ClassDef, immediate,
where) : in constructing the prototype for class "myVclass": prototype has
class "list", but the data part specifies class "character"

So "names" is not the only problematic slot name.

	Marshall Feldman

Dr. Marshall Feldman
Acting Director of Research and Academic Affairs
Center for Urban Studies and Research 
The University of Rhode Island
80 Washington Street
Providence, RI 02903-1819
email: marsh @ uri.edu (remove spaces) 
telephone: (401) 277-5218
fax: (401) 277-5099


From danlipsitt at gmail.com  Thu Jun 15 20:33:54 2006
From: danlipsitt at gmail.com (Dan Lipsitt)
Date: Thu, 15 Jun 2006 14:33:54 -0400
Subject: [Rd] package compile error on RHEL x86_64
In-Reply-To: <Pine.LNX.4.64.0606151031310.13875@gannet.stats.ox.ac.uk>
References: <b3a7efa90606141436v12d1d05byf46fa7a0b90f4ff6@mail.gmail.com>
	<Pine.LNX.4.64.0606151031310.13875@gannet.stats.ox.ac.uk>
Message-ID: <b3a7efa90606151133x727f932k99263aec47bfd97@mail.gmail.com>

On 6/15/06, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> This is a problem with your compiler: it should be linking against a
> shared version of libstdc++.  Please take this up with your OS support.

Okay, will do. In the meantime, do you know of a way I can convince R
CMD INSTALL to use gcc instead of g++ for the link step?

Thanks,
Dan


From roebuck at mdanderson.org  Thu Jun 15 20:37:28 2006
From: roebuck at mdanderson.org (Paul Roebuck)
Date: Thu, 15 Jun 2006 13:37:28 -0500 (CDT)
Subject: [Rd] separators in data()
In-Reply-To: <971536df0606150445w1a45be29ie91cd35bb905ecd2@mail.gmail.com>
References: <449141A4.6090905@bfro.uni-lj.si>
	<971536df0606150445w1a45be29ie91cd35bb905ecd2@mail.gmail.com>
Message-ID: <Pine.OSF.4.58.0606151331110.187697@wotan.mdacc.tmc.edu>

On Thu, 15 Jun 2006, Gabor Grothendieck wrote:

> Currently, four formats of data files are supported:
>
>    1.  files ending '.R' or '.r' are 'source()'d in, with the R
>        working directory changed temporarily to the directory
>        containing the respective file.
>
>    2.  files ending '.RData' or '.rda' are 'load()'ed.
>
>    3.  files ending '.tab', '.txt' or '.TXT' are read using
>       'read.table(..., header = TRUE)', and hence result in a data
>       frame.
>
>    4.  files ending '.csv' or '.CSV' are read using
>       'read.table(..., header = TRUE, sep = ";")', and also result
>       in a data frame.

As an aside, I have wondered why there is no intrinsic
support for dot-tsv extension (*.tsv) that would trigger
use of read.delim method.

----------------------------------------------------------
SIGSIG -- signature too long (core dumped)


From bailey at galton.uchicago.edu  Thu Jun 15 22:27:46 2006
From: bailey at galton.uchicago.edu (bailey at galton.uchicago.edu)
Date: Thu, 15 Jun 2006 22:27:46 +0200 (CEST)
Subject: [Rd] cat, print and documentation disagree (PR#8988)
Message-ID: <20060615202746.9ADA53F034@slim.kubism.ku.dk>

Full_Name: Paul Bailey
Version: 2.3.1
OS: OS X (10.4.6)
Submission from: (NULL) (128.135.133.123)


according to cat's help file, "'cat' converts numeric/complex vectors in the
same way as 'print' (and not in the same way as 'as.character' which is used by
the S equivalent), so 'options' '"digits"' and '"scipen"' are relevant."

But, run this (what I got after # marks)
------
a <- c(0.1,.0111111111111111)
> print(a)
[1] 0.10000000 0.01111111
> cat(a)
0.1 0.01111111> 
------

I would expect the two to make the same conversion and send the same number of
digits (zeros or not) to standard out, OR for the documentation to point out
that there are differences in that the same output can lead to different things
being sent to standard out.

I observed this same problem in Win XP with R 2.3.0

Cheers,
Paul


From bill at insightful.com  Thu Jun 15 23:16:58 2006
From: bill at insightful.com (Bill Dunlap)
Date: Thu, 15 Jun 2006 14:16:58 -0700 (PDT)
Subject: [Rd] download.file() yields incomplete files with
	method="internal"
In-Reply-To: <OFE1E88304.37C6777F-ONC125718E.00450185-C125718E.00466EC0@partnerre.com>
References: <OFE1E88304.37C6777F-ONC125718E.00450185-C125718E.00466EC0@partnerre.com>
Message-ID: <Pine.GSO.4.56.0606151407060.10895@octopus>

On Thu, 15 Jun 2006 Jan.Kleinn at partnerre.com wrote:

> as the bug # 7991 is flagged not-reproducible, let me give you some pieces
> of code, as I have the same or similar problem. The problem always shows up
> with the first example (a small text file) and only sometimes (but without
> obvious pattern) with the second example, which is a binary file.
>
> > download.file("ftp://ftp.nhc.noaa.gov/pub/atcf/btk/bal012006.dat",
> "C:/temp/bal012006.dat", method = 'internal', mode = 'w', cacheOK = FALSE)
> trying URL 'ftp://ftp.nhc.noaa.gov/pub/atcf/btk/bal012006.dat'
> ftp data connection made, file length 5110 bytes
> opened URL
> downloaded 0 bytes
>
> Warning message:
> downloaded length 0 != reported length 5110

Two versions of curl (7.10.6 and 7.15.1) on my Linux
box fail on this ftp server also.  They timeout when
starting "Extended Passive Mode".  Does this sort of
failure indicate a firewall is getting in the way?

   % curl --version
   curl 7.10.6 (i386-redhat-linux-gnu) libcurl/7.10.6 OpenSSL/0.9.7a ipv6 zlib/1.1.4
   Protocols: ftp gopher telnet dict ldap http file https ftps
   Features: IPv6 SSL libz NTLM
   % /usr/bin/curl --verbose --output /tmp/junk ftp://ftp.nhc.noaa.gov/pub/atcf/btk/bal012006.dat
   * About to connect() to ftp.nhc.noaa.gov:21
   * Connected to dogfish.nhc.noaa.gov (140.90.48.37) port 21
   ... login warning messages and PWD's ...
    < 229 Entering Extended Passive Mode (|||36993|)
   * About to connect() to ftp.nhc.noaa.gov:36993
   ... long wait ...
    * socket error: 110
   * Connected the data stream with PASV!
   curl: (7) socket error: 110
   * Closing connection #0

This doesn't look like a good site for testing.  It login
message starts with

   < 220-**WARNING**WARNING**WARNING**
   < 220-
   < 220-This is a United States (DOC/NOAA/NCEP) computer system, which may be
   < 220-accessed and used only for official Government business by authorized
   < 220-personnel. Unauthorized access or use of this computer system may
   < 220-subject violators to criminal, civil, and/or administrative action.

>
> >
> download.file("ftp://ftp.nhc.noaa.gov/pub/atcf/aid_public/aal012006.dat.gz",
>  "C:/temp/aal012006.dat.gz", method = 'internal', mode = 'wb', cacheOK =
> FALSE)
> trying URL 'ftp://ftp.nhc.noaa.gov/pub/atcf/aid_public/aal012006.dat.gz'
> ftp data connection made, file length 173760 bytes
> opened URL
> downloaded 155Kb
>
> Warning message:
> downloaded length 159140 != reported length 173760
>
>
> Finally, is the spec of the system I'm working on:
> > version
>                _
> platform       i386-pc-mingw32
> arch           i386
> os             mingw32
> system         i386, mingw32
> status
> major          2
> minor          3.1
> year           2006
> month          06
> day            01
> svn rev        38247
> language       R
> version.string Version 2.3.1 (2006-06-01)
> > win.version()
> [1] "Windows XP Professional (build 2600) Service Pack 2.0"
>
>
> Many thanks in advance and best regards,
> Jan
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

----------------------------------------------------------------------------
Bill Dunlap
Insightful Corporation
bill at insightful dot com
360-428-8146

 "All statements in this message represent the opinions of the author and do
 not necessarily reflect Insightful Corporation policy or position."


From h.wickham at gmail.com  Fri Jun 16 10:47:35 2006
From: h.wickham at gmail.com (hadley wickham)
Date: Fri, 16 Jun 2006 10:47:35 +0200
Subject: [Rd] Package naming best practices
In-Reply-To: <17552.34716.430538.750333@gargle.gargle.HOWL>
References: <17552.34716.430538.750333@gargle.gargle.HOWL>
Message-ID: <f8e6ff050606160147i34c86928oa02e0f7de3d1ed64@mail.gmail.com>

Hi Jeff,

I'd recommend you name it something you can google easily (ie. that
there are few (or no) hits currently from google).  That way it's
really easy to tell people how to find the package/your webpage.

Hadley

On 6/15/06, Jeff Enos <jeff at kanecap.com> wrote:
> R-devel,
>
> I'm in the process of choosing a name for a new package.  I've already
> decided that the name will have two parts, 'portfolio' and 'sim', but
> can't decide between 'portfolioSim' and 'portfolio.sim'.  Is there any
> good reason to choose one over the other?
>
> Thanks in advance,
>
> Jeff
>
>
> --
> Jeff Enos
> Kane Capital Management
> jeff at kanecap.com
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ligges at statistik.uni-dortmund.de  Fri Jun 16 12:02:48 2006
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 16 Jun 2006 12:02:48 +0200
Subject: [Rd] Bug in nortest cvm.test package (PR#8980)
In-Reply-To: <20060614134127.A8B6B3F049@slim.kubism.ku.dk>
References: <20060614134127.A8B6B3F049@slim.kubism.ku.dk>
Message-ID: <449281C8.1010304@statistik.uni-dortmund.de>

rpowell at horizonenv.com wrote:

> I believe there to be a bug in the cvm.test module of the nortest  
> package authored by Juergen Gross. I do not know how to contact the  
> author directly.

What about typing
  library(help=nortest)
It reveals the address at once. Please send the report to the package 
maintainer.

Please do not send bug reports on contributed packages to R-bugs!

Uwe Ligges



> I've been running some normality tests using the nortest package. For  
> some of my datasets the Cramer-von Mises normality test generates an  
> extremely high probability (e.g., 1.637e+31) and indicates normality  
> when the other tests do not. I don't believe the generated  
> probability should exceed a value of "1".
> 
> Below are the results of the tests and then, below that, I've  
> provided the column of the datafile that results in the high value.
> 
> Sincerely,
> Bob Powell
> 
> Robert M. Powell
> Senior Project Scientist/Project Mgr.
> Horizon Environmental Corporation
> Suite 1700, Fisher Building
> 3011 W. Grand Blvd.
> Detroit, MI 48202
> Tel	(313) 874-0124
> Fax	(313) 874-0135
> Cell	(248) 977-0317
> http://www.horizonenv.com
> 
[SNIP]


From Nomis101 at web.de  Fri Jun 16 12:21:00 2006
From: Nomis101 at web.de (Nomis101 at web.de)
Date: Fri, 16 Jun 2006 12:21:00 +0200
Subject: [Rd] 3 Bugs in R (with R.crash.log) under OSX 10.4.6
Message-ID: <828560331@web.de>

Hi, i'm a biologie-student and nedd R for Analyzing my datas. But i have 3 bis Problems with R. I run R 2.3.1 on a G4 PPC with OSX 10.4.6 and Quicktime 7.1.1.

First Problem:
Open Windows (R-Skript ausf?hren, Arbeitsverzeichnis wechseln...) doesn't close after opening.

Second Problem:
If i make a boxplot with my datas, than copy the boxplot and paste it into "Preview" as an new image and save it as JPEG, then R crashes. The R.crash.log than tells me:

Date/Time:      2006-06-14 21:37:08.869 +0200
OS Version:     10.4.6 (Build 8I127)
Report Version: 4

Command: R
Path:    /Applications/Biologie- und Chemie-Programme/R 2.3.1/R.app/Contents/MacOS/R
Parent:  WindowServer [63]

Version: 1.16 (3198)

PID:    215
Thread: 0

Exception:  EXC_BREAKPOINT (0x0006)
Code[0]:    0x00000001
Code[1]:    0x92991120


Thread 0 Crashed:
0   com.apple.Foundation           	0x92991120 _NSRaiseError + 264
1   com.apple.AppKit               	0x93764d50 -[NSView _drawRect:clip:] + 2472
2   com.apple.AppKit               	0x937641b8 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 404
3   com.apple.AppKit               	0x93766f00 _recursiveDisplayInRect2 + 84
4   com.apple.CoreFoundation       	0x907f33c4 CFArrayApplyFunction + 416
5   com.apple.AppKit               	0x937642cc -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 680
6   com.apple.AppKit               	0x93766f00 _recursiveDisplayInRect2 + 84
7   com.apple.CoreFoundation       	0x907f33c4 CFArrayApplyFunction + 416
8   com.apple.AppKit               	0x937642cc -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 680
9   com.apple.AppKit               	0x93766f00 _recursiveDisplayInRect2 + 84
10  com.apple.CoreFoundation       	0x907f33c4 CFArrayApplyFunction + 416
11  com.apple.AppKit               	0x937642cc -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 680
12  com.apple.AppKit               	0x93766f00 _recursiveDisplayInRect2 + 84
13  com.apple.CoreFoundation       	0x907f33c4 CFArrayApplyFunction + 416
14  com.apple.AppKit               	0x937642cc -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 680
15  com.apple.AppKit               	0x93766f00 _recursiveDisplayInRect2 + 84
16  com.apple.CoreFoundation       	0x907f33c4 CFArrayApplyFunction + 416
17  com.apple.AppKit               	0x937642cc -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 680
18  com.apple.AppKit               	0x93766f00 _recursiveDisplayInRect2 + 84
19  com.apple.CoreFoundation       	0x907f33c4 CFArrayApplyFunction + 416
20  com.apple.AppKit               	0x937642cc -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 680
21  com.apple.AppKit               	0x938c28e0 -[NSBrowser _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 164
22  com.apple.AppKit               	0x93766f00 _recursiveDisplayInRect2 + 84
23  com.apple.CoreFoundation       	0x907f33c4 CFArrayApplyFunction + 416
24  com.apple.AppKit               	0x937642cc -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 680
25  com.apple.AppKit               	0x93763780 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 196
26  com.apple.AppKit               	0x93763d48 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 1676
27  com.apple.AppKit               	0x93763d48 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 1676
28  com.apple.AppKit               	0x93763d48 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 1676
29  com.apple.AppKit               	0x93763d48 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 1676
30  com.apple.AppKit               	0x93763d48 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 1676
31  com.apple.AppKit               	0x93763d48 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 1676
32  com.apple.AppKit               	0x937843e4 -[NSThemeFrame _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 192
33  com.apple.AppKit               	0x9375d3f4 -[NSView _displayRectIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:] + 384
34  com.apple.AppKit               	0x937526e8 -[NSView displayIfNeeded] + 248
35  com.apple.AppKit               	0x93752558 -[NSWindow displayIfNeeded] + 180
36  com.apple.AppKit               	0x93752404 _handleWindowNeedsDisplay + 200
37  com.apple.CoreFoundation       	0x907e373c __CFRunLoopDoObservers + 352
38  com.apple.CoreFoundation       	0x907e39ec __CFRunLoopRun + 436
39  com.apple.CoreFoundation       	0x907e347c CFRunLoopRunSpecific + 268
40  com.apple.HIToolbox            	0x9321d980 RunCurrentEventLoopInMode + 264
41  com.apple.HIToolbox            	0x9321d014 ReceiveNextEventCommon + 380
42  com.apple.HIToolbox            	0x9321ce80 BlockUntilNextEventMatchingListInMode + 96
43  com.apple.AppKit               	0x9371ee84 _DPSNextEvent + 384
44  com.apple.AppKit               	0x9371eb48 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 116
45  org.R-project.R                	0x0000dbf4 -[RController doProcessEvents:] + 104 (RController.m:1824)
46  org.R-project.R                	0x0000b730 -[RController handleReadConsole:] + 88 (RController.m:869)
47  org.R-project.R                	0x0002c0b8 Re_ReadConsole + 108 (Rcallbacks.m:137)
48  org.R-project.R                	0x0003223c run_REngineRmainloop + 300 (Rinit.c:341)
49  org.R-project.R                	0x0002aa1c -[REngine runREPL] + 68 (REngine.m:167)
50  org.R-project.R                	0x0001d340 main + 680 (main.m:101)
51  org.R-project.R                	0x00002e8c _start + 340 (crt.c:272)
52  org.R-project.R                	0x00002d34 start + 60

Thread 1:
0   libSystem.B.dylib              	0x9000b0a8 mach_msg_trap + 8
1   libSystem.B.dylib              	0x9000affc mach_msg + 60
2   com.apple.CoreFoundation       	0x907e3b78 __CFRunLoopRun + 832
3   com.apple.CoreFoundation       	0x907e347c CFRunLoopRunSpecific + 268
4   com.apple.Foundation           	0x9296b598 -[NSConnection sendInvocation:] + 1468
5   com.apple.Foundation           	0x9296a034 -[NSObject(NSForwardInvocation) forward::] + 408
6   libobjc.A.dylib                	0x90a4b0b0 _objc_msgForward + 176
7   com.apple.Foundation           	0x9296a39c -[NSDistantObject methodSignatureForSelector:] + 268
8   com.apple.Foundation           	0x92969f04 -[NSObject(NSForwardInvocation) forward::] + 104
9   libobjc.A.dylib                	0x90a4b0b0 _objc_msgForward + 176
10  org.R-project.R                	0x0000acc0 -[RController readThread:] + 2436 (RController.m:613)
11  com.apple.Foundation           	0x92976194 forkThreadForFunction + 108
12  libSystem.B.dylib              	0x9002ba68 _pthread_body + 96

Thread 2:
0   libSystem.B.dylib              	0x9002c128 semaphore_wait_signal_trap + 8
1   libSystem.B.dylib              	0x90030bec pthread_cond_wait + 480
2   com.apple.Foundation           	0x9297d300 -[NSConditionLock lockWhenCondition:] + 68
3   com.apple.AppKit               	0x937bbaac -[NSUIHeartBeat _heartBeatThread:] + 324
4   com.apple.Foundation           	0x92976194 forkThreadForFunction + 108
5   libSystem.B.dylib              	0x9002ba68 _pthread_body + 96

Thread 3:
0   libSystem.B.dylib              	0x9002edcc kevent + 12
1   com.apple.DesktopServices      	0x9288a2b0 TFSNotificationTask::FSNotificationTaskProc(void*) + 56
2   ...ple.CoreServices.CarbonCore 	0x90bc9260 PrivateMPEntryPoint + 76
3   libSystem.B.dylib              	0x9002ba68 _pthread_body + 96

Thread 4:
0   libSystem.B.dylib              	0x9002c128 semaphore_wait_signal_trap + 8
1   libSystem.B.dylib              	0x90030bec pthread_cond_wait + 480
2   ...ple.CoreServices.CarbonCore 	0x90bc9450 MPWaitOnQueue + 224
3   com.apple.DesktopServices      	0x9288a92c TNodeSyncTask::SyncTaskProc(void*) + 116
4   ...ple.CoreServices.CarbonCore 	0x90bc9260 PrivateMPEntryPoint + 76
5   libSystem.B.dylib              	0x9002ba68 _pthread_body + 96

Thread 0 crashed with PPC Thread State 64:
  srr0: 0x0000000092991120 srr1: 0x000000000202f030                        vrsave: 0x0000000000000000
    cr: 0x24042442          xer: 0x0000000000000004   lr: 0x00000000929910f8  ctr: 0x0000000092952f1c
    r0: 0x0000000000000000   r1: 0x00000000bfffcfe0   r2: 0x00000000a2950508   r3: 0x00000000bfffcb90
    r4: 0x0000000000000000   r5: 0x0000000092952844   r6: 0x00000000bfffcc14   r7: 0x00000000000000ff
    r8: 0x00000000bfffcc00   r9: 0x000000000423a9f0  r10: 0x0000000090a44628  r11: 0x0000000024042442
   r12: 0x0000000092952f1c  r13: 0x0000000000000000  r14: 0x00000000bfffe270  r15: 0x0000000000000001
   r16: 0x0000000000564940  r17: 0x0000000000000000  r18: 0x0000000000000000  r19: 0x0000000000000000
   r20: 0x00000000a37536bc  r21: 0x00000000a3754024  r22: 0x00000000bfffd650  r23: 0x0000000000000001
   r24: 0x00000000bfffd310  r25: 0x0000000000000000  r26: 0x0000000000533c40  r27: 0x0000000000000001
   r28: 0x0000000006908980  r29: 0x00000000a29557f4  r30: 0x0000000006908980  r31: 0x0000000092991028

Binary Images Description:
    0x1000 -    0x3efff org.R-project.R 1.16 (3198)	/Applications/Biologie- und Chemie-Programme/R 2.3.1/R.app/Contents/MacOS/R
  0x157000 -   0x162fff libgcc_s.1.0.dylib 	/Library/Frameworks/R.framework/Versions/2.3/Resources/lib/libgcc_s.1.0.dylib
  0x305000 -   0x34bfff libgfortran.0.dylib 	/Library/Frameworks/R.framework/Versions/2.3/Resources/lib/libgfortran.0.dylib
  0x41c000 -   0x45afff libreadline.5.1.dylib 	/Library/Frameworks/R.framework/Versions/2.3/Resources/lib/libreadline.5.1.dylib
 0x1008000 -  0x1210fff libR.dylib 	/Library/Frameworks/R.framework/Versions/2.3/Resources/lib/libR.dylib
 0x475c000 -  0x475efff net.culater.SIMBL 0.8 (8)	/Library/InputManagers/SIMBL/SIMBL.bundle/Contents/MacOS/SIMBL
 0x588c000 -  0x58a8fff grDevices.so 	/Library/Frameworks/R.framework/Versions/2.3/Resources/library/grDevices/libs/ppc/grDevices.so
 0x596f000 -  0x59b5fff stats.so 	/Library/Frameworks/R.framework/Versions/2.3/Resources/library/stats/libs/ppc/stats.so
 0x5cd6000 -  0x5cd9fff methods.so 	/Library/Frameworks/R.framework/Versions/2.3/Resources/library/methods/libs/ppc/methods.so
0x8fe00000 - 0x8fe51fff dyld 44.4	/usr/lib/dyld
0x90000000 - 0x901bbfff libSystem.B.dylib 	/usr/lib/libSystem.B.dylib
0x90213000 - 0x90218fff libmathCommon.A.dylib 	/usr/lib/system/libmathCommon.A.dylib
0x9021a000 - 0x9026dfff com.apple.CoreText 1.0.1 (???)	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreText.framework/Versions/A/CoreText
0x9029a000 - 0x9034bfff ATS 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS
0x9037a000 - 0x90734fff com.apple.CoreGraphics 1.258.30 (???)	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics
0x907c1000 - 0x9089afff com.apple.CoreFoundation 6.4.6 (368.27)	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
0x908e3000 - 0x908e3fff com.apple.CoreServices 10.4 (???)	/System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices
0x908e5000 - 0x909e7fff libicucore.A.dylib 	/usr/lib/libicucore.A.dylib
0x90a41000 - 0x90ac5fff libobjc.A.dylib 	/usr/lib/libobjc.A.dylib
0x90aef000 - 0x90b5dfff com.apple.framework.IOKit 1.4 (???)	/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x90b74000 - 0x90b86fff libauto.dylib 	/usr/lib/libauto.dylib
0x90b8d000 - 0x90e65fff com.apple.CoreServices.CarbonCore 681.3 (671.2)	/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore
0x90ecb000 - 0x90f4bfff com.apple.CoreServices.OSServices 4.1	/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices
0x90f95000 - 0x90fd6fff com.apple.CFNetwork 129.16	/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CFNetwork.framework/Versions/A/CFNetwork
0x90feb000 - 0x91003fff com.apple.WebServices 1.1.2 (1.1.0)	/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/WebServicesCore.framework/Versions/A/WebServicesCore
0x91013000 - 0x91094fff com.apple.SearchKit 1.0.5	/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit
0x910da000 - 0x91104fff com.apple.Metadata 10.4.4 (121.36)	/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata
0x91115000 - 0x91123fff libz.1.dylib 	/usr/lib/libz.1.dylib
0x91126000 - 0x912e9fff com.apple.security 4.3 (25966)	/System/Library/Frameworks/Security.framework/Versions/A/Security
0x913ec000 - 0x913f5fff com.apple.DiskArbitration 2.1	/System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration
0x913fc000 - 0x91423fff com.apple.SystemConfiguration 1.8.2	/System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration
0x91436000 - 0x91441fff libgcc_s.1.dylib 	/usr/lib/libgcc_s.1.dylib
0x91446000 - 0x91466fff libmx.A.dylib 	/usr/lib/libmx.A.dylib
0x9146c000 - 0x91474fff libbsm.dylib 	/usr/lib/libbsm.dylib
0x91478000 - 0x914f3fff com.apple.audio.CoreAudio 3.0.3	/System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio
0x91530000 - 0x91530fff com.apple.ApplicationServices 10.4 (???)	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices
0x91532000 - 0x9156afff com.apple.AE 1.5 (297)	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE
0x91585000 - 0x91652fff com.apple.ColorSync 4.4.4	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync.framework/Versions/A/ColorSync
0x916a7000 - 0x91738fff com.apple.print.framework.PrintCore 4.5 (177.10)	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore
0x9177f000 - 0x91836fff com.apple.QD 3.8.20 (???)	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD
0x91873000 - 0x918d1fff com.apple.HIServices 1.5.1 (???)	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices
0x918ff000 - 0x91923fff com.apple.LangAnalysis 1.6.1	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis
0x91937000 - 0x9195cfff com.apple.FindByContent 1.5	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/FindByContent.framework/Versions/A/FindByContent
0x9196f000 - 0x919b1fff com.apple.LaunchServices 178	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices
0x919cd000 - 0x919e1fff com.apple.speech.synthesis.framework 3.3	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
0x919ef000 - 0x91a2efff com.apple.ImageIO.framework 1.4.6	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/ImageIO
0x91a44000 - 0x91b0cfff libcrypto.0.9.7.dylib 	/usr/lib/libcrypto.0.9.7.dylib
0x91b5a000 - 0x91b6ffff libcups.2.dylib 	/usr/lib/libcups.2.dylib
0x91b74000 - 0x91b91fff libJPEG.dylib 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib
0x91b96000 - 0x91c05fff libJP2.dylib 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libJP2.dylib
0x91c1c000 - 0x91c20fff libGIF.dylib 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libGIF.dylib
0x91c22000 - 0x91c69fff libRaw.dylib 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libRaw.dylib
0x91c6e000 - 0x91cabfff libTIFF.dylib 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libTIFF.dylib
0x91cb2000 - 0x91ccbfff libPng.dylib 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libPng.dylib
0x91cd0000 - 0x91cd3fff libRadiance.dylib 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib
0x91cd5000 - 0x91cd5fff com.apple.Accelerate 1.2.1 (Accelerate 1.2.1)	/System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate
0x91cd7000 - 0x91db7fff com.apple.vImage 2.3	/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage
0x91dbf000 - 0x91ddefff com.apple.Accelerate.vecLib 3.2.1 (vecLib 3.2.1)	/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib
0x91e4a000 - 0x91eb8fff libvMisc.dylib 	/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib
0x91ec3000 - 0x91f57fff libvDSP.dylib 	/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib
0x91f71000 - 0x924f9fff libBLAS.dylib 	/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
0x9252c000 - 0x92857fff libLAPACK.dylib 	/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib
0x92887000 - 0x9290ffff com.apple.DesktopServices 1.3.3	/System/Library/PrivateFrameworks/DesktopServicesPriv.framework/Versions/A/DesktopServicesPriv
0x92950000 - 0x92b7bfff com.apple.Foundation 6.4.5 (567.26)	/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
0x92c99000 - 0x92d77fff libxml2.2.dylib 	/usr/lib/libxml2.2.dylib
0x92d97000 - 0x92e85fff libiconv.2.dylib 	/usr/lib/libiconv.2.dylib
0x92e97000 - 0x92eb5fff libGL.dylib 	/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib
0x92ec0000 - 0x92f1afff libGLU.dylib 	/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLU.dylib
0x92f38000 - 0x92f38fff com.apple.Carbon 10.4 (???)	/System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
0x92f3a000 - 0x92f4efff com.apple.ImageCapture 3.0	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ImageCapture.framework/Versions/A/ImageCapture
0x92f66000 - 0x92f76fff com.apple.speech.recognition.framework 3.4	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SpeechRecognition.framework/Versions/A/SpeechRecognition
0x92f82000 - 0x92f97fff com.apple.securityhi 2.0 (203)	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SecurityHI.framework/Versions/A/SecurityHI
0x92fa9000 - 0x93030fff com.apple.ink.framework 101.2 (69)	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Ink.framework/Versions/A/Ink
0x93044000 - 0x9304ffff com.apple.help 1.0.3 (32)	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Help.framework/Versions/A/Help
0x93059000 - 0x93086fff com.apple.openscripting 1.2.5 (???)	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/OpenScripting.framework/Versions/A/OpenScripting
0x930a0000 - 0x930b0fff com.apple.print.framework.Print 5.0 (190.1)	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Print.framework/Versions/A/Print
0x930bc000 - 0x93122fff com.apple.htmlrendering 1.1.2	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HTMLRendering.framework/Versions/A/HTMLRendering
0x93153000 - 0x931a2fff com.apple.NavigationServices 3.4.4 (3.4.3)	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/NavigationServices.framework/Versions/A/NavigationServices
0x931d0000 - 0x931edfff com.apple.audio.SoundManager 3.9	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/CarbonSound.framework/Versions/A/CarbonSound
0x931ff000 - 0x9320cfff com.apple.CommonPanels 1.2.2 (73)	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/CommonPanels.framework/Versions/A/CommonPanels
0x93215000 - 0x93522fff com.apple.HIToolbox 1.4.6 (???)	/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/HIToolbox
0x93671000 - 0x9367dfff com.apple.opengl 1.4.7	/System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL
0x93715000 - 0x93715fff com.apple.Cocoa 6.4 (???)	/System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
0x93717000 - 0x93d49fff com.apple.AppKit 6.4.6 (824.38)	/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit
0x940d6000 - 0x94146fff com.apple.CoreData 80	/System/Library/Frameworks/CoreData.framework/Versions/A/CoreData
0x9417f000 - 0x94249fff com.apple.audio.toolbox.AudioToolbox 1.4.1	/System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox
0x9429d000 - 0x9429dfff com.apple.audio.units.AudioUnit 1.3.3	/System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit
0x9429f000 - 0x94453fff com.apple.QuartzCore 1.4.7	/System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore
0x944a6000 - 0x944e3fff libsqlite3.0.dylib 	/usr/lib/libsqlite3.0.dylib
0x944eb000 - 0x9453bfff libGLImage.dylib 	/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib
0x946de000 - 0x946edfff libCGATS.A.dylib 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGATS.A.dylib
0x946f5000 - 0x94701fff libCSync.A.dylib 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
0x94707000 - 0x94726fff libPDFRIP.A.dylib 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libPDFRIP.A.dylib
0x94747000 - 0x9475ffff libRIP.A.dylib 	/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libRIP.A.dylib
0x95a79000 - 0x95b05fff com.apple.WebKit 418	/System/Library/Frameworks/WebKit.framework/Versions/A/WebKit
0x95b60000 - 0x95c55fff com.apple.JavaScriptCore 417.11	/System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/JavaScriptCore.framework/Versions/A/JavaScriptCore
0x95c91000 - 0x95f9bfff com.apple.WebCore 417.24	/System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/WebCore
0x96123000 - 0x9614cfff libxslt.1.dylib 	/usr/lib/libxslt.1.dylib
0x9648d000 - 0x9648ffff com.apple.ExceptionHandling 1.2 (???)	/System/Library/Frameworks/ExceptionHandling.framework/Versions/A/ExceptionHandling
0x9748f000 - 0x974aefff com.apple.vecLib 3.2.1 (vecLib 3.2.1)	/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib

Problem three:
After the first installation of R, the TukeyHSD-Command works proper. Than, after updating to Quicktime 7.1.1 and a crash of R, the TukeyHSD-Command doesn't work anymore. Everytime i've got the message "syntax error". But i do it in the same way like before.


From ripley at stats.ox.ac.uk  Fri Jun 16 16:03:41 2006
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Fri, 16 Jun 2006 16:03:41 +0200 (CEST)
Subject: [Rd] cat, print and documentation disagree (PR#8988)
Message-ID: <20060616140341.1D0E03F72F@slim.kubism.ku.dk>

On Thu, 15 Jun 2006, bailey at galton.uchicago.edu wrote:

> Full_Name: Paul Bailey
> Version: 2.3.1
> OS: OS X (10.4.6)
> Submission from: (NULL) (128.135.133.123)
>
>
> according to cat's help file, "'cat' converts numeric/complex vectors in 
> the same way as 'print' (and not in the same way as 'as.character' which 
> is used by the S equivalent), so 'options' '"digits"' and '"scipen"' are 
> relevant.

and it does not say that it outputs the same characters.

> But, run this (what I got after # marks)
> ------
> a <- c(0.1,.0111111111111111)
>> print(a)
> [1] 0.10000000 0.01111111
>> cat(a)
> 0.1 0.01111111>
> ------
>
> I would expect the two to make the same conversion and send the same 
> number of digits (zeros or not) to standard out, OR for the 
> documentation to point out that there are differences in that the same 
> output can lead to different things being sent to standard out.

I believe it does do it in the same way, just within a smaller print width 
(the minimum needed for that element for cat(), the minimum necessary for 
all elements of the vector in print()).  So the difference only arises 
with vectors of length > 1, and we can note that.

> I observed this same problem in Win XP with R 2.3.0

Is it a `problem'?  It is just a difference that is not explicitly 
documented, (and also not documented in this report).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From pdbailey at uchicago.edu  Fri Jun 16 21:08:16 2006
From: pdbailey at uchicago.edu (pdbailey at uchicago.edu)
Date: Fri, 16 Jun 2006 21:08:16 +0200 (CEST)
Subject: [Rd] cat, print and documentation disagree (PR#8992)
Message-ID: <20060616190816.4AC833F02E@slim.kubism.ku.dk>

The tone of your email makes it look like you think the exact
output of cat and print in these instances is irrelevant and
not worth thinking about and that the documentation is `close
enough,' or up to the (perhaps implied) R documentation
standard. This is a reasonable stance. If you hold it, please
just circular file my bug report as irrelevant and let's not
waste any more time on it.

But I'll focus on the claim you made explicitly. in response
to my pointing out that the documentation says that, ```cat'
converts numeric/complex vectors in  the same way as `print'
(and not in the same way as `as.character' which  is used by
the S equivalent), so 'options' '"digits"' and '"scipen"' are
relevant.'' You wrote that, ``[the cat() documentation] does
not say that it outputs the same characters [as print].''

You basic claim then is that they both convert numeric vectors
into characters in the same way, but that after the conversion
`cat()' mutates those characters (into subsets of the
converted characters), and that this second step in the
process of mutating the numbers into characters is not part of
the `conversion' of the number into characters. If you do
choose to stick by this odd claim, let me point out that the
claim implies that the documentation regards an internal
process that the user doesn't much care about because she can
never see the internal results without overriding `cat().'

I think what the documentation is saying is that in both
`print()' and `cat()' use the `options()' `digits' are
`sciphen' to the specificity they are described in the
`options()' documentation, but `cat()' and `print()' do not
follow the same convention to the extent that the `options()'
documentation does not specify the requirement.

Cheers,
Paul


From KjetilBrinchmannHalvorsen at gmail.com  Fri Jun 16 22:23:00 2006
From: KjetilBrinchmannHalvorsen at gmail.com (KjetilBrinchmannHalvorsen at gmail.com)
Date: Fri, 16 Jun 2006 22:23:00 +0200 (CEST)
Subject: [Rd] bug in prcomp (PR#8994)
Message-ID: <20060616202300.066323F02E@slim.kubism.ku.dk>

The following seems to be an bug in prcomp():

 > test <- ts( matrix( c(NA, 2:5, NA, 7:10), 5, 2))
 > test
Time Series:
Start = 1
End = 5
Frequency = 1
   Series 1 Series 2
1       NA       NA
2        2        7
3        3        8
4        4        9
5        5       10
 > prcomp(test, scale.=TRUE, na.action=na.omit)
Erro en svd(x, nu = 0) : infinite or missing values in 'x'
 > prcomp(na.omit(test), scale.=TRUE, na.action=na.omit)
Standard deviations:
[1] 1.414214e+00 3.726778e-17

Rotation:
                PC1        PC2
Series 1 0.7071068 -0.7071068
Series 2 0.7071068  0.7071068
 >
note that
 > is.matrix(test)
[1] TRUE

This is R2.3.1 pre-compiled binary from CRAN on windows XP.

 > sessionInfo()
Version 2.3.1 (2006-06-01)
i386-pc-mingw32

attached base packages:
[1] "methods"   "stats"     "graphics"  "grDevices" "utils" 
"datasets"  "base"


Kjetil


From p.dalgaard at biostat.ku.dk  Sat Jun 17 08:39:37 2006
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 17 Jun 2006 08:39:37 +0200
Subject: [Rd] bug in prcomp (PR#8994)
In-Reply-To: <20060616202300.066323F02E@slim.kubism.ku.dk>
References: <20060616202300.066323F02E@slim.kubism.ku.dk>
Message-ID: <x2lkrwz3o6.fsf@turmalin.kubism.ku.dk>

KjetilBrinchmannHalvorsen at gmail.com writes:

> The following seems to be an bug in prcomp():
...
>  > prcomp(test, scale.=TRUE, na.action=na.omit)
> Erro en svd(x, nu = 0) : infinite or missing values in 'x'
>  > prcomp(na.omit(test), scale.=TRUE, na.action=na.omit)

Nope. We've been here before: The _formula_method_ for prcomp takes an
na.action argument, the default method does not. If you read closely,
you'll see that this is in accordance with documentation. 


-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From ripley at stats.ox.ac.uk  Sat Jun 17 08:43:22 2006
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Sat, 17 Jun 2006 08:43:22 +0200 (CEST)
Subject: [Rd] bug in prcomp (PR#8994)
Message-ID: <20060617064322.CF5B71DD29@slim.kubism.ku.dk>

The default method for prcomp does not have an na.action argument:

Usage:

      prcomp(x, ...)

      ## S3 method for class 'formula':
      prcomp(formula, data = NULL, subset, na.action, ...)

      ## Default S3 method:
      prcomp(x, retx = TRUE, center = TRUE, scale. = FALSE, tol = NULL, ...)

so this is as documented.  In general only formula-based interfaces do 
have subset and na.action.


On Fri, 16 Jun 2006, KjetilBrinchmannHalvorsen at gmail.com wrote:

> The following seems to be an bug in prcomp():
>
> > test <- ts( matrix( c(NA, 2:5, NA, 7:10), 5, 2))
> > test
> Time Series:
> Start = 1
> End = 5
> Frequency = 1
>   Series 1 Series 2
> 1       NA       NA
> 2        2        7
> 3        3        8
> 4        4        9
> 5        5       10
> > prcomp(test, scale.=TRUE, na.action=na.omit)
> Erro en svd(x, nu = 0) : infinite or missing values in 'x'
> > prcomp(na.omit(test), scale.=TRUE, na.action=na.omit)
> Standard deviations:
> [1] 1.414214e+00 3.726778e-17
>
> Rotation:
>                PC1        PC2
> Series 1 0.7071068 -0.7071068
> Series 2 0.7071068  0.7071068
> >
> note that
> > is.matrix(test)
> [1] TRUE
>
> This is R2.3.1 pre-compiled binary from CRAN on windows XP.
>
> > sessionInfo()
> Version 2.3.1 (2006-06-01)
> i386-pc-mingw32
>
> attached base packages:
> [1] "methods"   "stats"     "graphics"  "grDevices" "utils"
> "datasets"  "base"
>
>
> Kjetil
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From bszk at uoguelph.ca  Sat Jun 17 22:50:39 2006
From: bszk at uoguelph.ca (Bill Szkotnicki)
Date: Sat, 17 Jun 2006 16:50:39 -0400
Subject: [Rd] Mathlib help
In-Reply-To: <20060617064322.CF5B71DD29@slim.kubism.ku.dk>
Message-ID: <002401c6924f$b1346330$0100000a@bszklgtab>

Hello,

I am trying to make use of the R standalone library in mu own c and fortran
code. ( fedora core linux )

Unfortunately I am unable to link and create an executable.
See below.
It is the example file in "src/nmath/standalone"
Does anyone see what I might be missing?

% R CMD COMPILE tr.c
gcc -I/usr/local/lib64/R/include -I/usr/local/lib64/R/include
-I/usr/local/include   -fpic  -g -O2 -std=gnu99 -c tr.c -o tr.o

% R CMD LINK tr.o
libtool: link: unable to infer tagged configuration
libtool: link: specify a tag with `--tag'

Thanks,
 
Bill


From sean.pieper at gmail.com  Sun Jun 18 00:25:52 2006
From: sean.pieper at gmail.com (sean.pieper at gmail.com)
Date: Sun, 18 Jun 2006 00:25:52 +0200 (CEST)
Subject: [Rd] Axis line not appearing with axis(tick=FALSE) (PR#8998)
Message-ID: <20060617222552.84CCECD3F@slim.kubism.ku.dk>

Full_Name: Sean Pieper
Version: 2.3.1
OS: Windows
Submission from: (NULL) (67.188.92.37)


Hi, I am trying to create a qualitative figure for which I don't want tick marks
or numbers, but having some axes would be nice.

If I do: 

plot.new()
axis(2,labels=FALSE,tick=FALSE,lty="solid",lwd=1)

I expect this should give me a vertical line on the left edge of the plot, but
nothing draws. When I run:

axis(2,labels=FALSE,tick=TRUE,lty="solid",lwd=1)

both the line and the ticks draw 

If I type:

axis(2,labels=TRUE,tick=FALSE,lty="solid",lwd=1)

I get numbers, but still no axis line. 

I also checked with axis(1,...) and saw the same behavior.

-sean


From nbmonteiro at yahoo.co.uk  Sun Jun 18 02:59:08 2006
From: nbmonteiro at yahoo.co.uk (nbmonteiro at yahoo.co.uk)
Date: Sun, 18 Jun 2006 02:59:08 +0200 (CEST)
Subject: [Rd] bug with boot.sw98 function (PR#8999)
Message-ID: <20060618005908.600C2CCDA@slim.kubism.ku.dk>

Full_Name: Nuno Monteiro
Version: 2.3.1
OS: Windows XP HE
Submission from: (NULL) (84.9.38.207)


I'm using the FEAR library to perform Data Envelopment analysis with a 36,000
obs dataset.

The function dea is working fine but then when I try to use the boot.sw98 to
come up with some sensitivity analysis I get the following error:

boot.sw98(XOBS=x,YOBS=y,NREP=100,DHAT=dhat,RTS=3,ORIENTATION=2)
Error in 0:L : NA/NaN argument
In addition: Warning message:
longer object length
        is not a multiple of shorter object length in: kappam * Gcounts

What does this mean? Is this because I have too many observations? What can I do
to fix it?

Please let me know if you need further information.

Thank you in advance for your cooperation.

Regards,
Nuno

PS here is a transcript of the script I'm using

library(FEAR)
abc <- read.csv("Jul_data.csv",header=TRUE)
x=matrix(nrow=1,ncol=39182)
x[1,]=abc$apr_repayment
y=matrix(nrow=7,ncol=39182)
y[1,]=abc$pcadv
y[2,]=abc$until
y[3,]=abc$cashback_rate
y[4,]=abc$self_certify_ind_d
y[5,]=abc$incentive_ind_d
y[6,]=abc$features_1
y[7,]=abc$discount
dhat=dea(XOBS=x,YOBS=y,RTS=3,ORIENTATION=2)
boot.sw98(XOBS=x,YOBS=y,NREP=100,DHAT=dhat,RTS=3,ORIENTATION=2)


From sleepingwell at gmail.com  Sun Jun 18 03:32:58 2006
From: sleepingwell at gmail.com (Simon Knapp)
Date: Sun, 18 Jun 2006 11:32:58 +1000
Subject: [Rd] Problems embedding R.
Message-ID: <4f8ec3aa0606171832m62b3c314x9e4698223fafdc51@mail.gmail.com>

Hi List,

I am trying to come to terms with embedding R.  I have looked in
writing R extensions and a pdf slideshow (by Simon Urbanek) I found on
the web and by my reckoning the following should almost work (I use
function Rf_initEmbeddedR in the file winembed.c from the Rserv source
to initialise R):

int main(int argc, char* argv[]){
char *cmd = "rnorm(10)";
SEXP cmdSexp, cmdexpr, ans;
int i, Rerror
ParseStatus status;
if(Rf_initEmbeddedR(argc, argv)){
printf("R failed to initialise\n");
return 1;
}
PROTECT(cmdSexp = allocVector(STRSXP, 1));
SET_STRING_ELT(cmdSexp, 0, mkChar(cmd));
PROTECT(cmdexpr = R_ParseVector(cmdSexp, -1, &status));
if (status != PARSE_OK) {
printf("error in parsing command\n");
UNPROTECT(2);
return 1;
}
R_tryEval(VECTOR_ELT(cmdexpr, 1), R_GlobalEnv, &Rerror);
if(Rerror){
printf("error in evaluation attempt\n");
UNPROTECT(2);
return 1;
}
PROTECT(ans = eval(VECTOR_ELT(cmdexpr, 1), R_GlobalEnv));
for(i=0; i<10; ++i) printf("ret %i = %f\n", i, REAL(ans)[i]);
UNPROTECT(3);
return 0;
}

when I run this program I get output:

ret 0 = 0.000000
ret 1 = 0.000000
ret 2 = 0.000000
ret 3 = 0.000000
ret 4 = 0.000000
ret 5 = 0.000000
ret 6 = 0.000000
ret 7 = 0.000000
ret 8 = 0.000000
ret 9 = 0.000000

The reason I say "should almost work" is that I would have thought
that the lines:

R_tryEval(VECTOR_ELT(cmdexpr, 1), R_GlobalEnv, &Rerror), and
PROTECT(ans = eval(VECTOR_ELT(cmdexpr, 1), R_GlobalEnv));

should be:

R_tryEval(VECTOR_ELT(cmdexpr, 0), R_GlobalEnv, &Rerror), and
PROTECT(ans = eval(VECTOR_ELT(cmdexpr, 0), R_GlobalEnv));

respectively... but these give me access violations (Unhandled
exception at 0x10073d34 in R_interface.exe: 0xC0000005: Access
violation reading location 0x515c25ff.)

Can anybody help?

Simon.

R version: 2.2.0
platform: windows
dev env: MS VS 2003


From murdoch at stats.uwo.ca  Sun Jun 18 09:44:38 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sun, 18 Jun 2006 03:44:38 -0400
Subject: [Rd] Axis line not appearing with axis(tick=FALSE) (PR#8998)
In-Reply-To: <20060617222552.84CCECD3F@slim.kubism.ku.dk>
References: <20060617222552.84CCECD3F@slim.kubism.ku.dk>
Message-ID: <44950466.40304@stats.uwo.ca>

sean.pieper at gmail.com wrote:
> Full_Name: Sean Pieper
> Version: 2.3.1
> OS: Windows
> Submission from: (NULL) (67.188.92.37)
>
>
> Hi, I am trying to create a qualitative figure for which I don't want tick marks
> or numbers, but having some axes would be nice.
>
> If I do: 
>
> plot.new()
> axis(2,labels=FALSE,tick=FALSE,lty="solid",lwd=1)
>
> I expect this should give me a vertical line on the left edge of the plot, but
> nothing draws. When I run:
>
> axis(2,labels=FALSE,tick=TRUE,lty="solid",lwd=1)
>
> both the line and the ticks draw 
>
> If I type:
>
> axis(2,labels=TRUE,tick=FALSE,lty="solid",lwd=1)
>
> I get numbers, but still no axis line. 
>
> I also checked with axis(1,...) and saw the same behavior.

I don't think this is a bug, just the way it is designed.  Normally axis 
only draws the line between the extreme ticks, not for the
whole length of the axis.  If you have no tick, you have no line.

You might get what you want with box(), or by drawing the axes using 
abline(), e.g.

 abline(v=par("usr")[1])

for a vertical line at the lower limit of x values.  As ?par says, 
par("usr") is:

A vector of the form c(x1, x2, y1, y2) giving the extremes of the user 
coordinates of the plotting region. When a logarithmic scale is in use 
(i.e., par("xlog") is true, see below), then the x-limits will be 10 ^ 
par("usr")[1:2]. Similarly for the y-axis.

Duncan Murdoch


From sean.pieper at gmail.com  Sun Jun 18 09:47:55 2006
From: sean.pieper at gmail.com (Sean Pieper)
Date: Sun, 18 Jun 2006 00:47:55 -0700
Subject: [Rd] Axis line not appearing with axis(tick=FALSE) (PR#8998)
In-Reply-To: <44950466.40304@stats.uwo.ca>
References: <20060617222552.84CCECD3F@slim.kubism.ku.dk>
	<44950466.40304@stats.uwo.ca>
Message-ID: <ff1b84d10606180047i13948107t92ad06ec67dc7c96@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20060618/dc844b3c/attachment.pl 

From murdoch at stats.uwo.ca  Sun Jun 18 09:47:50 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sun, 18 Jun 2006 03:47:50 -0400
Subject: [Rd] bug with boot.sw98 function (PR#8999)
In-Reply-To: <20060618005908.600C2CCDA@slim.kubism.ku.dk>
References: <20060618005908.600C2CCDA@slim.kubism.ku.dk>
Message-ID: <44950526.70802@stats.uwo.ca>

nbmonteiro at yahoo.co.uk wrote:
> Full_Name: Nuno Monteiro
> Version: 2.3.1
> OS: Windows XP HE
> Submission from: (NULL) (84.9.38.207)
>
>
> I'm using the FEAR library to perform Data Envelopment analysis with a 36,000
> obs dataset.
>
> The function dea is working fine but then when I try to use the boot.sw98 to
> come up with some sensitivity analysis I get the following error:
>
> boot.sw98(XOBS=x,YOBS=y,NREP=100,DHAT=dhat,RTS=3,ORIENTATION=2)
> Error in 0:L : NA/NaN argument
> In addition: Warning message:
> longer object length
>         is not a multiple of shorter object length in: kappam * Gcounts
>
> What does this mean? Is this because I have too many observations? What can I do
> to fix it?
>
> Please let me know if you need further information.
>
> Thank you in advance for your cooperation.
>
>   

You need to write to the maintainer of the package you're using.  It's 
not a standard R package, so reporting this to R-bugs is not appropriate.

Duncan Murdoch
> Regards,
> Nuno
>
> PS here is a transcript of the script I'm using
>
> library(FEAR)
> abc <- read.csv("Jul_data.csv",header=TRUE)
> x=matrix(nrow=1,ncol=39182)
> x[1,]=abc$apr_repayment
> y=matrix(nrow=7,ncol=39182)
> y[1,]=abc$pcadv
> y[2,]=abc$until
> y[3,]=abc$cashback_rate
> y[4,]=abc$self_certify_ind_d
> y[5,]=abc$incentive_ind_d
> y[6,]=abc$features_1
> y[7,]=abc$discount
> dhat=dea(XOBS=x,YOBS=y,RTS=3,ORIENTATION=2)
> boot.sw98(XOBS=x,YOBS=y,NREP=100,DHAT=dhat,RTS=3,ORIENTATION=2)
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From murdoch at stats.uwo.ca  Sun Jun 18 10:38:37 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sun, 18 Jun 2006 04:38:37 -0400
Subject: [Rd] Axis line not appearing with axis(tick=FALSE) (PR#8998)
In-Reply-To: <ff1b84d10606180047i13948107t92ad06ec67dc7c96@mail.gmail.com>
References: <20060617222552.84CCECD3F@slim.kubism.ku.dk>	
	<44950466.40304@stats.uwo.ca>
	<ff1b84d10606180047i13948107t92ad06ec67dc7c96@mail.gmail.com>
Message-ID: <4495110D.6040707@stats.uwo.ca>

Sean Pieper wrote:
> ah-- this isn't clear from the documentation :-).

I see that.  I've fixed the docs in R-devel, and will do the same in 
R-patched if I have enough time before my flight...

Duncan
>
> Thanks for the work around!
>
> -sean
>
> On 6/18/06, *Duncan Murdoch* < murdoch at stats.uwo.ca 
> <mailto:murdoch at stats.uwo.ca>> wrote:
>
>     sean.pieper at gmail.com <mailto:sean.pieper at gmail.com> wrote:
>     > Full_Name: Sean Pieper
>     > Version: 2.3.1
>     > OS: Windows
>     > Submission from: (NULL) (67.188.92.37 <http://67.188.92.37>)
>     >
>     >
>     > Hi, I am trying to create a qualitative figure for which I don't
>     want tick marks
>     > or numbers, but having some axes would be nice.
>     >
>     > If I do:
>     >
>     > plot.new()
>     > axis(2,labels=FALSE,tick=FALSE,lty="solid",lwd=1)
>     >
>     > I expect this should give me a vertical line on the left edge of
>     the plot, but
>     > nothing draws. When I run:
>     >
>     > axis(2,labels=FALSE,tick=TRUE,lty="solid",lwd=1)
>     >
>     > both the line and the ticks draw
>     >
>     > If I type:
>     >
>     > axis(2,labels=TRUE,tick=FALSE,lty="solid",lwd=1)
>     >
>     > I get numbers, but still no axis line.
>     >
>     > I also checked with axis(1,...) and saw the same behavior.
>
>     I don't think this is a bug, just the way it is
>     designed.  Normally axis
>     only draws the line between the extreme ticks, not for the
>     whole length of the axis.  If you have no tick, you have no line.
>
>     You might get what you want with box(), or by drawing the axes using
>     abline(), e.g.
>
>     abline(v=par("usr")[1])
>
>     for a vertical line at the lower limit of x values.  As ?par says,
>     par("usr") is:
>
>     A vector of the form c(x1, x2, y1, y2) giving the extremes of the user
>     coordinates of the plotting region. When a logarithmic scale is in use
>     (i.e., par("xlog") is true, see below), then the x-limits will be
>     10 ^
>     par("usr")[1:2]. Similarly for the y-axis.
>
>     Duncan Murdoch
>
>


From phgrosjean at sciviews.org  Sun Jun 18 15:19:38 2006
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Sun, 18 Jun 2006 15:19:38 +0200
Subject: [Rd] R Wiki: how useful for developers?
Message-ID: <449552EA.6070707@sciviews.org>

Hello all R developers,

I just send the official annoucement of the R Wiki at 
http://wiki.r-project.org (was also officially annouced at useR!2006). I 
would like to insist here on the aspects of the Wiki that could be of 
particular interest for you, as R developer:

1) The 'R documentation' section is dedicated to hold the latest 
"wikified" version of all Rd files (base, recommended, as well as all 
packages on CRAN and Bioconductor). Users can append exemple, discuss 
points that are unclear for them, etc. at the end of these Wiki pages. 
So, looking from time to time to these page is a good way to get 
feedback from the users to improve your Rd files. (note that, currently 
only base packages are on the Wiki; Also, several bugs in the Rd -> Wiki 
conversion still need to be fixed, but that will be done as soon as 
possible and all other Rd files will be published then).

2) The 'R packages' section of the Wiki is an ideal place to allow 
developers *and* users of R packages to add useful material like further 
examples, tutorials, tips, etc. related to your packages. Although this 
section is still in development, here is how you can create a page for 
your own package and advertise it:

- After login to the R Wiki site, type this in the search box (top right 
of any R Wiki page):

packages:[cran|bioconductor|others]:[pckgname]

with: [cran|bioconductor|others] depending on where you package is 
located, and [pckgname] being the name of your package (note that the R 
Wiki uses only lowercase letters for page names, so that your package 
name will be automatically tranformed into lowercase in the URL of your 
page)

- An error message indicate that the page does not exist yet. Click on 
'Create this page' at the top left.

- Start editing your page and click 'Save'.

- Copy and paste the URL of your page in the URL section of your 
description file.

Best,

Philippe Grosjean
-- 
..............................................<?}))><........
  ) ) ) ) )
( ( ( ( (    Prof. Philippe Grosjean
  ) ) ) ) )
( ( ( ( (    Numerical Ecology of Aquatic Systems
  ) ) ) ) )   Mons-Hainaut University, Mons, Belgium
( ( ( ( (    web:   http://www.umh.ac.be/~econum
  ) ) ) ) )          http://www.sciviews.org
( ( ( ( (
..............................................................


From ripley at stats.ox.ac.uk  Sun Jun 18 17:54:08 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 18 Jun 2006 16:54:08 +0100 (BST)
Subject: [Rd] Mathlib help
In-Reply-To: <002401c6924f$b1346330$0100000a@bszklgtab>
References: <002401c6924f$b1346330$0100000a@bszklgtab>
Message-ID: <Pine.LNX.4.64.0606181645400.8963@gannet.stats.ox.ac.uk>

On Sat, 17 Jun 2006, Bill Szkotnicki wrote:

> Hello,
>
> I am trying to make use of the R standalone library in mu own c and fortran
> code. ( fedora core linux )
>
> Unfortunately I am unable to link and create an executable.
> See below.
> It is the example file in "src/nmath/standalone"

There is no such file in current R:
/users/ripley/R/svn/R-devel/src/nmath/standalone
gannet% ls
Makefile.in   Makefile.win* README        sunif.c       test.c

and README contains (correct) information on how to use it.

> Does anyone see what I might be missing?
>
> % R CMD COMPILE tr.c
> gcc -I/usr/local/lib64/R/include -I/usr/local/lib64/R/include
> -I/usr/local/include   -fpic  -g -O2 -std=gnu99 -c tr.c -o tr.o
>
> % R CMD LINK tr.o
> libtool: link: unable to infer tagged configuration
> libtool: link: specify a tag with `--tag'

Where exactly did you see that recommended?  See R CMD LINK --help for how 
to use it (and not for this purpose).  I suspect you want

% gcc -o tr tr.o -L/path/to/libRmath -lRmath -lm

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From sean.hill at epfl.ch  Mon Jun 19 10:12:18 2006
From: sean.hill at epfl.ch (Sean Hill)
Date: Mon, 19 Jun 2006 10:12:18 +0200
Subject: [Rd] building a libR.a for BlueGene/L
Message-ID: <DA64FDD6-8289-4FA6-AA20-C437A8DD72F3@epfl.ch>


We would like to compile a minimal R library that could be linked  
into an application that will be run on a BlueGene/L system with  
8,192 processors. This is a system that requires no shared libraries,  
no graphical interface, must be single threaded, and will be cross- 
compiled.  I would statically link the code for the packages we require.

 From looking through the code, it seems like it should be possible  
to build such a version.  However, it would be invaluable to have the  
advice and aid of the people who truly know this software.

Thus far, I have configured the build to use the appropriate  
compilers.  I had to tell configure that it was crosscompiling by  
editing the config.site file (it didn't recognize that it was).   
However, I am currently hitting a roadblock with configure failing  
with the report:
WARNING: blrts_xlf and blrts_xlc disagree on int and double
configure: error: Maybe change CFLAGS or FFLAGS

The last lines in config.log are:
#ifdef __cplusplus
extern "C" void exit (int) throw ();

configure: exit 1

Thank you very much for any assistance,
Best
Sean


From hb at stat.berkeley.edu  Mon Jun 19 11:16:19 2006
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Mon, 19 Jun 2006 11:16:19 +0200
Subject: [Rd] R Wiki: how useful for developers?
In-Reply-To: <449552EA.6070707@sciviews.org>
References: <449552EA.6070707@sciviews.org>
Message-ID: <59d7961d0606190216r6a053e0fk91b9302832794cf5@mail.gmail.com>

Thank you very much for this Philippe and everyone else who contibuted
to the R Wiki.  Great initiative and work.

I'm interested in the 'R packages section' for adding extra help on my
packages.  What kind of backup is there for the wiki?

Best

Henrik

On 6/18/06, Philippe Grosjean <phgrosjean at sciviews.org> wrote:
> Hello all R developers,
>
> I just send the official annoucement of the R Wiki at
> http://wiki.r-project.org (was also officially annouced at useR!2006). I
> would like to insist here on the aspects of the Wiki that could be of
> particular interest for you, as R developer:
>
> 1) The 'R documentation' section is dedicated to hold the latest
> "wikified" version of all Rd files (base, recommended, as well as all
> packages on CRAN and Bioconductor). Users can append exemple, discuss
> points that are unclear for them, etc. at the end of these Wiki pages.
> So, looking from time to time to these page is a good way to get
> feedback from the users to improve your Rd files. (note that, currently
> only base packages are on the Wiki; Also, several bugs in the Rd -> Wiki
> conversion still need to be fixed, but that will be done as soon as
> possible and all other Rd files will be published then).
>
> 2) The 'R packages' section of the Wiki is an ideal place to allow
> developers *and* users of R packages to add useful material like further
> examples, tutorials, tips, etc. related to your packages. Although this
> section is still in development, here is how you can create a page for
> your own package and advertise it:
>
> - After login to the R Wiki site, type this in the search box (top right
> of any R Wiki page):
>
> packages:[cran|bioconductor|others]:[pckgname]
>
> with: [cran|bioconductor|others] depending on where you package is
> located, and [pckgname] being the name of your package (note that the R
> Wiki uses only lowercase letters for page names, so that your package
> name will be automatically tranformed into lowercase in the URL of your
> page)
>
> - An error message indicate that the page does not exist yet. Click on
> 'Create this page' at the top left.
>
> - Start editing your page and click 'Save'.
>
> - Copy and paste the URL of your page in the URL section of your
> description file.
>
> Best,
>
> Philippe Grosjean
> --
> ..............................................<?}))><........
>   ) ) ) ) )
> ( ( ( ( (    Prof. Philippe Grosjean
>   ) ) ) ) )
> ( ( ( ( (    Numerical Ecology of Aquatic Systems
>   ) ) ) ) )   Mons-Hainaut University, Mons, Belgium
> ( ( ( ( (    web:   http://www.umh.ac.be/~econum
>   ) ) ) ) )          http://www.sciviews.org
> ( ( ( ( (
> ..............................................................
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From phgrosjean at sciviews.org  Mon Jun 19 11:38:06 2006
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Mon, 19 Jun 2006 11:38:06 +0200
Subject: [Rd] R Wiki: how useful for developers?
In-Reply-To: <59d7961d0606190216r6a053e0fk91b9302832794cf5@mail.gmail.com>
References: <449552EA.6070707@sciviews.org>
	<59d7961d0606190216r6a053e0fk91b9302832794cf5@mail.gmail.com>
Message-ID: <4496707E.5040008@sciviews.org>

Henrik Bengtsson wrote:
> Thank you very much for this Philippe and everyone else who contibuted
> to the R Wiki.  Great initiative and work.
> 
> I'm interested in the 'R packages section' for adding extra help on my
> packages.  What kind of backup is there for the wiki?
> 
> Best
> 
> Henrik

For the moment, there is a weekly backup of the whole data section done 
on another machine. I plan to make a daily backup on the same machine, 
keep all daily backups for 30 days, and then, keep only weekly backups 
for older data.

There is also a plan to install another dedicated server equiped with a 
tape backup.

Otherwise, **all** versions of your documents are saved and you can 
revert easily to any of those (in case of vandalism); see the 'Old 
revisions' button.

Best,

Philippe Grosjean

> On 6/18/06, Philippe Grosjean <phgrosjean at sciviews.org> wrote:
> 
>>Hello all R developers,
>>
>>I just send the official annoucement of the R Wiki at
>>http://wiki.r-project.org (was also officially annouced at useR!2006). I
>>would like to insist here on the aspects of the Wiki that could be of
>>particular interest for you, as R developer:
>>
>>1) The 'R documentation' section is dedicated to hold the latest
>>"wikified" version of all Rd files (base, recommended, as well as all
>>packages on CRAN and Bioconductor). Users can append exemple, discuss
>>points that are unclear for them, etc. at the end of these Wiki pages.
>>So, looking from time to time to these page is a good way to get
>>feedback from the users to improve your Rd files. (note that, currently
>>only base packages are on the Wiki; Also, several bugs in the Rd -> Wiki
>>conversion still need to be fixed, but that will be done as soon as
>>possible and all other Rd files will be published then).
>>
>>2) The 'R packages' section of the Wiki is an ideal place to allow
>>developers *and* users of R packages to add useful material like further
>>examples, tutorials, tips, etc. related to your packages. Although this
>>section is still in development, here is how you can create a page for
>>your own package and advertise it:
>>
>>- After login to the R Wiki site, type this in the search box (top right
>>of any R Wiki page):
>>
>>packages:[cran|bioconductor|others]:[pckgname]
>>
>>with: [cran|bioconductor|others] depending on where you package is
>>located, and [pckgname] being the name of your package (note that the R
>>Wiki uses only lowercase letters for page names, so that your package
>>name will be automatically tranformed into lowercase in the URL of your
>>page)
>>
>>- An error message indicate that the page does not exist yet. Click on
>>'Create this page' at the top left.
>>
>>- Start editing your page and click 'Save'.
>>
>>- Copy and paste the URL of your page in the URL section of your
>>description file.
>>
>>Best,
>>
>>Philippe Grosjean
>>--
>>..............................................<?}))><........
>>  ) ) ) ) )
>>( ( ( ( (    Prof. Philippe Grosjean
>>  ) ) ) ) )
>>( ( ( ( (    Numerical Ecology of Aquatic Systems
>>  ) ) ) ) )   Mons-Hainaut University, Mons, Belgium
>>( ( ( ( (    web:   http://www.umh.ac.be/~econum
>>  ) ) ) ) )          http://www.sciviews.org
>>( ( ( ( (
>>..............................................................
>>
>>______________________________________________
>>R-devel at r-project.org mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
> 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>


From oliver.balmer at yale.edu  Mon Jun 19 11:43:16 2006
From: oliver.balmer at yale.edu (oliver.balmer at yale.edu)
Date: Mon, 19 Jun 2006 11:43:16 +0200 (CEST)
Subject: [Rd] MacOS X - R crashes & import problem (PR#9005)
Message-ID: <20060619094316.E6EA14D2DC@slim.kubism.ku.dk>

Full_Name: Oliver Balmer
Version: 2.3.1
OS: Mac OS 10.4.6
Submission from: (NULL) (157.161.74.75)


when working in the editor R crashes regularly. no other program ever crashes.
one quite reliable way to crash it is by marking some code and then pressing the
"find" command. I have had this problem with other R versions before. I have the
feeling the editor is the problem. Another problem with the editor is that I
always need to hit the carriage return twice after inserting the cursor at a
certain point, after the first time, nothing happens. Not a big problem but
probably not as it should be, and maybe a hint for a deeper problem.

Another bug: if the imported data frame contains a ? (greek mu, as in
microliter), R can't read the file.


From p.dalgaard at biostat.ku.dk  Mon Jun 19 11:53:41 2006
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 19 Jun 2006 11:53:41 +0200
Subject: [Rd] MacOS X - R crashes & import problem (PR#9005)
In-Reply-To: <20060619094316.E6EA14D2DC@slim.kubism.ku.dk>
References: <20060619094316.E6EA14D2DC@slim.kubism.ku.dk>
Message-ID: <x23be1xyhm.fsf@viggo.kubism.ku.dk>

oliver.balmer at yale.edu writes:

> Another bug: if the imported data frame contains a ? (greek mu, as in
> microliter), R can't read the file.

Imported from what? If it is a text file, encoding issues may come
into play, and a valid mu in one encoding can be an invalid character
in another.

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From hin-tak.leung at cimr.cam.ac.uk  Mon Jun 19 13:53:28 2006
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Mon, 19 Jun 2006 12:53:28 +0100
Subject: [Rd] building a libR.a for BlueGene/L
In-Reply-To: <DA64FDD6-8289-4FA6-AA20-C437A8DD72F3@epfl.ch>
References: <DA64FDD6-8289-4FA6-AA20-C437A8DD72F3@epfl.ch>
Message-ID: <44969038.5020900@cimr.cam.ac.uk>

Quoting the last few lines of config.log is not useful - you need to 
post the whole of it (or let it be downloaded from somewhere), since the
error is a good deal further up.

The error and fix is as it says - it seems that your fortran compiler
(blrts_xlf) disagree with your C compiler (blrts_xlf) about how big
is int and double (On most usual boxes these days int is 32-bit and
double is 64-bit), and you will need to read your compiler's manual
about what size are used for int and double accordingly; this is highly
compiler-specific so you'll have to read it up yourself.

Sean Hill wrote:
> We would like to compile a minimal R library that could be linked  
> into an application that will be run on a BlueGene/L system with  
> 8,192 processors. This is a system that requires no shared libraries,  
> no graphical interface, must be single threaded, and will be cross- 
> compiled.  I would statically link the code for the packages we require.
> 
>  From looking through the code, it seems like it should be possible  
> to build such a version.  However, it would be invaluable to have the  
> advice and aid of the people who truly know this software.
> 
> Thus far, I have configured the build to use the appropriate  
> compilers.  I had to tell configure that it was crosscompiling by  
> editing the config.site file (it didn't recognize that it was).   
> However, I am currently hitting a roadblock with configure failing  
> with the report:
> WARNING: blrts_xlf and blrts_xlc disagree on int and double
> configure: error: Maybe change CFLAGS or FFLAGS
> 
> The last lines in config.log are:
> #ifdef __cplusplus
> extern "C" void exit (int) throw ();
> 
> configure: exit 1
> 
> Thank you very much for any assistance,
> Best
> Sean
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From simon.urbanek at r-project.org  Mon Jun 19 13:58:53 2006
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 19 Jun 2006 13:58:53 +0200
Subject: [Rd] MacOS X - R crashes & import problem (PR#9005)
In-Reply-To: <20060619094316.E6EA14D2DC@slim.kubism.ku.dk>
References: <20060619094316.E6EA14D2DC@slim.kubism.ku.dk>
Message-ID: <461FD40A-368E-411B-838C-286CBA850764@r-project.org>


On Jun 19, 2006, at 11:43 AM, oliver.balmer at yale.edu wrote:

> Full_Name: Oliver Balmer
> Version: 2.3.1
> OS: Mac OS 10.4.6
> Submission from: (NULL) (157.161.74.75)
>
>
> when working in the editor R crashes regularly. no other program  
> ever crashes. one quite reliable way to crash it is by marking some  
> code and then pressing the "find" command.

Unfortunately I cannot reproduce this problem. A very common source  
of problems are 3rd-party haxies that are know to crash other  
applications. Please send me the crash report - without it we can't  
really do anything (it will also include important details you  
omitted like what Mac you are using etc.).


> Another bug: if the imported data frame contains a ? (greek mu, as  
> in microliter), R can't read the file.
>

I cannot reproduce this either, it works flawlessly for me. As Peter  
mentioned earlier my guess is that you failed to use/define the  
correct encoding.

Cheers,
Simon


From ripley at stats.ox.ac.uk  Mon Jun 19 14:04:48 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 19 Jun 2006 13:04:48 +0100 (BST)
Subject: [Rd] building a libR.a for BlueGene/L
In-Reply-To: <DA64FDD6-8289-4FA6-AA20-C437A8DD72F3@epfl.ch>
References: <DA64FDD6-8289-4FA6-AA20-C437A8DD72F3@epfl.ch>
Message-ID: <Pine.LNX.4.64.0606191029230.21145@gannet.stats.ox.ac.uk>

On Mon, 19 Jun 2006, Sean Hill wrote:

>
> We would like to compile a minimal R library that could be linked
> into an application that will be run on a BlueGene/L system with
> 8,192 processors. This is a system that requires no shared libraries,
> no graphical interface, must be single threaded, and will be cross-
> compiled.  I would statically link the code for the packages we require.
>
> From looking through the code, it seems like it should be possible
> to build such a version.  However, it would be invaluable to have the
> advice and aid of the people who truly know this software.
>
> Thus far, I have configured the build to use the appropriate
> compilers.  I had to tell configure that it was crosscompiling by
> editing the config.site file (it didn't recognize that it was).

There is no support for cross-compiling R (except for Windows on 
Linux/...).  This may explain the test failure below, as it runs an 
executable.

> However, I am currently hitting a roadblock with configure failing
> with the report:
> WARNING: blrts_xlf and blrts_xlc disagree on int and double
> configure: error: Maybe change CFLAGS or FFLAGS
>
> The last lines in config.log are:
> #ifdef __cplusplus
> extern "C" void exit (int) throw ();
>
> configure: exit 1
>
> Thank you very much for any assistance,
> Best
> Sean
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From uhkeller at web.de  Mon Jun 19 14:51:59 2006
From: uhkeller at web.de (uhkeller at web.de)
Date: Mon, 19 Jun 2006 14:51:59 +0200 (CEST)
Subject: [Rd] write.foreign (SPSS) writes illegal SPSS variable names
	(PR#9006)
Message-ID: <20060619125159.DFA671DD2A@slim.kubism.ku.dk>

Full_Name: Ulrich Keller
Version: Version 2.3.1 Patched (2006-06-05 r38290)
OS: Windows XP SP2
Submission from: (NULL) (158.64.77.159)


The variable names specified in SPSS syntax files created by
write.foreign(...,package="SPSS") contain hyphens ("-") if these were present in
the R variable names. Hyphens are illegal in SPSS variable names. As a result,
the syntax file is not executed by SPSS and no data is loaded.

According to the SPSS Base Syntax Guide, the only legal characters apart from
letters and numbers are "the period, underscore, and the characters $, #, and
@".


From murdoch at stats.uwo.ca  Mon Jun 19 16:39:23 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 19 Jun 2006 10:39:23 -0400
Subject: [Rd] [R] Function hints
In-Reply-To: <f8e6ff050606190551o24a4573ak4454473b5dbf8199@mail.gmail.com>
References: <f8e6ff050606190551o24a4573ak4454473b5dbf8199@mail.gmail.com>
Message-ID: <4496B71B.1000101@stats.uwo.ca>

I've moved this from R-help to R-devel, where I think it is more 
appropriate, and interspersed comments below.



On 6/19/2006 8:51 AM, hadley wickham wrote:
> One of the recurring themes in the recent UserR conference was that
> many people find it difficult to find the functions they need for a
> particular task.  Sandy Weisberg suggested a small idea he would like
> to see: a hints function that given an object, lists likely
> operations.  I've done my best to implement this function using the
> tools currently available in R, and my code is included at the bottom
> of this email (I hope that I haven't just duplicated something already
> present in R).  I think Sandy's idea is genuinely useful, even in the
> limited form provided by my implementation, and I have already
> discovered a few useful functions that I was unaware of.
> 
> While developing and testing this function, I ran into a few problems
> which, I think, represent underlying problems with the current
> documentation system.  These are typified by the results of running
> hints on a object produced by glm (having class c("glm", "lm")).  I
> have outlined (very tersely) some possible solutions.  Please note
> that while these solutions are largely technological, the problem is
> at heart sociological: writing documentation is no easier (and perhaps
> much harder) than writing a scientific publication, but the rewards
> are fewer.
> 
> Problems:
> 
>  * Many functions share the same description (eg. head, tail).
> Solution: each rdoc file should only describe one method. Problem:
> Writing rdoc files is tedious, there is a lot of information
> duplicated between the code and the documenation (eg. the usage
> statement) and some functions share a lot of similar information.
> Solution: make it easier to write documentation (eg. documentation
> inline with code), and easier to include certain common descriptions
> in multiple methods (eg. new include command)

I think it's bad to document dissimilar functions in the same file, but 
similar related functions *should* be documented together.  Not doing 
this just adds to the burden of documenting them, and the risk of 
modifying only part of the documentation so that it is inconsistent. 
The user also gets the benefit of seeing a common description all at 
once, rather than having to decide whether to follow "See also" links.

Your solutions would both be interesting on their own merits regardless 
of the above.  We did decide to work on preprocessing directives for .Rd 
files at the R core meetings; some sort of include directive may be 
possible.

I don't think I would want complete documentation mixed with the 
original source, but it would certainly be interesting to have partial 
documentation there.  (Complete documentation is too long, and would 
make it harder to read the source without a dedicated editor that could 
hide it.  Though ESS users may see it as a reasonable requirement to 
have everyone use the same editor, I don't think it is.)  However, this 
is a lot of work, depending on infrastructure that is not in place.

>  * It is difficult to tell which functions are commonly
> used/important. Solution: break down by keywords. Problem: keywords
> are not useful at the moment.  Solution:  make better list of keywords
> available and encourage people to use it.  Problem: people won't
> unless there is a strong incentive, plus good keywording requires
> considerable expertise (especially in bulding up list).  This is
> probably insoluable unless one person systematically keywords all of
> the base packages.

I think it is worse than that.  There are concepts in packages that just 
don't arise in base R, and hence there would be no keywords for them 
other than "misc", even if someone redesigned the current system. 
Keywording is hard, and it's not clear to me how to do much better than 
we currently do.

We do already have user-defined keywords (via \concept), but these are 
not widely used.

> 
>  * Some functions aren't documented (eg. simulate.lm, formula.glm) -
> typically, these are methods where the documentation is in the
> generic.  Solution: these methods should all be aliased to the generic
> (by default?), and R CMD check should be amended to check for this
> situation.  You could also argue that this is a deficiency with my
> function, and easily fixed by automatically referring to the generic
> if the specific isn't documented.

I'd say it's a deficiency of your function.  You might want to look at 
the code in get("?") and .helpForCall() to see how those functions work 
out things like

?simulate(x)

where x is an lm object.  (But notice that .helpForCall is an 
undocumented internal function; don't depend on its implementation 
working forever).

>  * It can't supply suggestions when there isn't an explicit method
> (ie. .default is used), this makes it pretty useless for basic
> vectors.  This may not really be a problem, as all possible operations
> are probably too numerous to list.
> 
>  * Provides full name for function, when best practice is to use
> generic part only when calling function.  However, getting precise
> documentation may requires that full name. 

No, not if the call syntax above is used.

  I do the best I can
> (returning the generic if specific is alias to a documentation file
> with the same method name), but this reflects a deeper problem that
> the name you should use when calling a function may be different to
> the name you use to get documentation.
> 
>  * Can only display methods from currently loaded packages.  This is a
> shortcoming of the methods function, but I suspect it is difficult to
> find S3 methods without loading a package.
> 
> Relatively trivial problems:
> 
>  * Needs wide display to be effective.  Could be dealt with by
> breaking description in a sensible manner (there may already by R code
> to do this.  Please let me know if you know of any)

I think strwrap() may do what you want.
> 
>  * Doesn't currently include S4 methods.  Solution: add some more code
> to wrap showMethods
> 
>  * Personally, I think sentence case is more aesthetically pleasing
> (and more flexible) than title case.

It's quite hard to go from existing title case to sentence case, because 
we don't have any markup to indicate proper names.  One would think it 
would be easier to go in the opposite direction, but in fact the same 
problem arises:  "van Beethoven" for example, not "Van Beethoven".


> 
> 
> Hadley
> 
> 
> hints <- function(x) {

I don't like the name "hints".  I think we already have too many ways 
into the help system:

help
?
help.search
apropos
etc.?

I like your function, but I'd rather see it attached to one of the 
existing help functions, probably help.search().  For example,

help.search(x)

could look for functions designed to work with the class of x, if it had 
one.  (There's some ambiguity here:  perhaps x contains a string, and I 
want help on that string.)

Anyway, thanks for your efforts on this so far; I hope we end up with 
something that can make it into the next release.

Duncan Murdoch

> 	db <- eval(utils:::.hsearch_db())
> 	if (is.null(db)) {
> 		help.search("abcd!", rebuild=TRUE, agrep=FALSE)
> 		db <- eval(utils:::.hsearch_db())
> 	}
> 
> 	base <- db$Base
> 	alias <- db$Aliases
> 	key <- db$Keywords
> 
> 	m <- all.methods(class=class(x))
> 	m_id <- alias[match(m, alias[,1]), 2]
> 	keywords <- lapply(m_id, function(id) key[key[,2] %in% id, 1])
> 
> 	f.names <- cbind(m, base[match(m_id, base[,3]), 4])
> 	f.names <- unlist(lapply(1:nrow(f.names), function(i) {
> 		if (is.na(f.names[i, 2])) return(f.names[i, 1])
> 		a <- methodsplit(f.names[i, 1])
> 		b <- methodsplit(f.names[i, 2])
> 		
> 		if (a[1] == b[1]) f.names[i, 2] else f.names[i, 1]		
> 	}))
> 	
> 	hints <- cbind(f.names, base[match(m_id, base[,3]), 5])
> 	hints <- hints[order(tolower(hints[,1])),]
> 	hints <- rbind(    c("--------", "---------------"), hints)
> 	rownames(hints) <- rep("", nrow(hints))
> 	colnames(hints) <- c("Function", "Task")
> 	hints[is.na(hints)] <- "(Unknown)"
> 	
> 	class(hints) <- "hints"
> 	hints
> }
> 
> print.hints <- function(x, ...) print(unclass(x), quote=FALSE)
> 
> all.methods <- function(classes) {
> 	methods <- do.call(rbind,lapply(classes, function(x) {
> 		m <- methods(class=x)
> 		t(sapply(as.vector(m), methodsplit)) #m[attr(m, "info")$visible]
> 	}))
> 	rownames(methods[!duplicated(methods[,1]),])
> }
> 
> methodsplit <- function(m) {
> 	parts <- strsplit(m, "\\.")[[1]]
> 	if (length(parts) == 1) {
> 		c(name=m, class="")
> 	} else{
> 		c(name=paste(parts[-length(parts)], collapse="."), class=parts[length(parts)])
> 	}	
> }
> 
> ______________________________________________
> R-help at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html


From spencer.graves at pdf.com  Mon Jun 19 18:29:11 2006
From: spencer.graves at pdf.com (Spencer Graves)
Date: Mon, 19 Jun 2006 09:29:11 -0700
Subject: [Rd] R Wiki: how useful for developers?
In-Reply-To: <4496707E.5040008@sciviews.org>
References: <449552EA.6070707@sciviews.org>	<59d7961d0606190216r6a053e0fk91b9302832794cf5@mail.gmail.com>
	<4496707E.5040008@sciviews.org>
Message-ID: <4496D0D7.9000206@pdf.com>

	  I also want to express my appreciation to the R Wiki developers.  I 
used it 6/18/2006 12:46 PM in answering a post to s-news (citing 
something I learned from Venables and Ripley).

	  Best Wishes,
	  Spencer Graves	

Philippe Grosjean wrote:
> Henrik Bengtsson wrote:
>> Thank you very much for this Philippe and everyone else who contibuted
>> to the R Wiki.  Great initiative and work.
>>
>> I'm interested in the 'R packages section' for adding extra help on my
>> packages.  What kind of backup is there for the wiki?
>>
>> Best
>>
>> Henrik
> 
> For the moment, there is a weekly backup of the whole data section done 
> on another machine. I plan to make a daily backup on the same machine, 
> keep all daily backups for 30 days, and then, keep only weekly backups 
> for older data.
> 
> There is also a plan to install another dedicated server equiped with a 
> tape backup.
> 
> Otherwise, **all** versions of your documents are saved and you can 
> revert easily to any of those (in case of vandalism); see the 'Old 
> revisions' button.
> 
> Best,
> 
> Philippe Grosjean
> 
>> On 6/18/06, Philippe Grosjean <phgrosjean at sciviews.org> wrote:
>>
>>> Hello all R developers,
>>>
>>> I just send the official annoucement of the R Wiki at
>>> http://wiki.r-project.org (was also officially annouced at useR!2006). I
>>> would like to insist here on the aspects of the Wiki that could be of
>>> particular interest for you, as R developer:
>>>
>>> 1) The 'R documentation' section is dedicated to hold the latest
>>> "wikified" version of all Rd files (base, recommended, as well as all
>>> packages on CRAN and Bioconductor). Users can append exemple, discuss
>>> points that are unclear for them, etc. at the end of these Wiki pages.
>>> So, looking from time to time to these page is a good way to get
>>> feedback from the users to improve your Rd files. (note that, currently
>>> only base packages are on the Wiki; Also, several bugs in the Rd -> Wiki
>>> conversion still need to be fixed, but that will be done as soon as
>>> possible and all other Rd files will be published then).
>>>
>>> 2) The 'R packages' section of the Wiki is an ideal place to allow
>>> developers *and* users of R packages to add useful material like further
>>> examples, tutorials, tips, etc. related to your packages. Although this
>>> section is still in development, here is how you can create a page for
>>> your own package and advertise it:
>>>
>>> - After login to the R Wiki site, type this in the search box (top right
>>> of any R Wiki page):
>>>
>>> packages:[cran|bioconductor|others]:[pckgname]
>>>
>>> with: [cran|bioconductor|others] depending on where you package is
>>> located, and [pckgname] being the name of your package (note that the R
>>> Wiki uses only lowercase letters for page names, so that your package
>>> name will be automatically tranformed into lowercase in the URL of your
>>> page)
>>>
>>> - An error message indicate that the page does not exist yet. Click on
>>> 'Create this page' at the top left.
>>>
>>> - Start editing your page and click 'Save'.
>>>
>>> - Copy and paste the URL of your page in the URL section of your
>>> description file.
>>>
>>> Best,
>>>
>>> Philippe Grosjean
>>> --
>>> ..............................................<?}))><........
>>>  ) ) ) ) )
>>> ( ( ( ( (    Prof. Philippe Grosjean
>>>  ) ) ) ) )
>>> ( ( ( ( (    Numerical Ecology of Aquatic Systems
>>>  ) ) ) ) )   Mons-Hainaut University, Mons, Belgium
>>> ( ( ( ( (    web:   http://www.umh.ac.be/~econum
>>>  ) ) ) ) )          http://www.sciviews.org
>>> ( ( ( ( (
>>> ..............................................................
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From rpeng at jhsph.edu  Mon Jun 19 21:23:13 2006
From: rpeng at jhsph.edu (Roger D. Peng)
Date: Mon, 19 Jun 2006 15:23:13 -0400
Subject: [Rd] Compiling R with ACML on FC5, gcc 4.1.1
Message-ID: <4496F9A1.2050901@jhsph.edu>

I'm trying to compile R with the AMD core math library (ACML) on Fedora Core 5 
with gcc 4.1.1 and am having difficulty getting R to recognize it.  I'm using 
the file

acml-3-1-0-gfortran-64bit.tgz

from the AMD website.  On Fedora Core 4 I had no trouble getting this to work 
(with gcc 4.0.2) but I seem to be missing something now.  Has anyone had any 
problems and/or luck?

Thanks for any tips,
-roger
-- 
Roger D. Peng  |  http://www.biostat.jhsph.edu/~rpeng/


From roebuck at mdanderson.org  Mon Jun 19 21:48:30 2006
From: roebuck at mdanderson.org (Paul Roebuck)
Date: Mon, 19 Jun 2006 14:48:30 -0500 (CDT)
Subject: [Rd] Fwd: [R-SIG-Mac] Window titles
In-Reply-To: <0D7AE6F2-DFB3-470A-86AA-0C34FE60C620@r-project.org>
References: <Pine.OSF.4.58.0606170047430.261794@wotan.mdacc.tmc.edu>
	<0D7AE6F2-DFB3-470A-86AA-0C34FE60C620@r-project.org>
Message-ID: <Pine.OSF.4.58.0606191403360.453188@wotan.mdacc.tmc.edu>

On Mon, 19 Jun 2006, Simon Urbanek wrote:

> On Jun 17, 2006, at 8:02 AM, Paul Roebuck wrote:
>
> > Is there a means to provide a title for a Quartz window?
>
> Yes, now introduced in 3244: you can specify the desired name in the
> call to quartz, e.g.
>     quartz("My Precious Plot")
> We have never used the device name, so now we have at least some use
> for it ;). Thanks for the request. Apparently the description for the
> `quartz' command is bogus as well, it is copied from the X11 device
> and the device parameter makes no sense at all. I'll think about some
> more reasonable parameters/description for R-devel.
>
> > When running code that creates lots of plots, it would be nice to
> > be able to choose the desired window based on its title rather than
> > attempting to remember the associated window number. Even better if
> > the Window menu could display this information as well.
>
> Yes, the window title and the windows menu are directly linked.

Think there's any chance of getting a 'title' argument
being added to all the interactive devices, even if just
as a placeholder (not implemented on this device)? All
windowing environments provide the means to handle this
capability. Haven't tried it but title should be able to
be done with X11 already (indirectly) via XWindow resources.

I am unaware of a documented list of arguments available
for use by any interactive device. Since the code I write
passes its arguments to the default interactive device, it
would be preferable to avoid "unused argument" errors when
run with alternative devices.

----------------------------------------------------------
SIGSIG -- signature too long (core dumped)


From Mark.Bravington at csiro.au  Tue Jun 20 02:43:55 2006
From: Mark.Bravington at csiro.au (Mark.Bravington at csiro.au)
Date: Tue, 20 Jun 2006 10:43:55 +1000
Subject: [Rd] [R] Function hints
Message-ID: <D79013E40FEF254AAF0D72DFC94F27482305C5@extas4-hba.tas.csiro.au>

[This is not about the feasibility of a "hints" function-- which would
be incredibly useful, but perhaps very very hard to do-- but about some
of the other documentation issues raised in Hadley's post and in
Duncan's reply]

WRTO documentation & code together: for several years, I've successfully
used the 'mvbutils' package to keep every function definition & its
documentation together, editing them together in the same file--
function first, then documentation in plain-text (basically the format
you see if you use "vanilla help" inside R). Storage-wise, the
documentation is just kept as an attribute of the function (with a print
method that hides it by default)-- I also keep a text backup of the
combination. Any text editor will do. When it's time to create a
package, the Rd file is generated automatically.

For me, it's been extremely helpful to keep function & documentation
together during editing-- it greatly increases the chance that I will
actually update the doco when I change the code, rather than putting it
off until I've forgotten what I did. Also, writing Rd format is a
nightmare (again, personal opinion)-- being able to write plain-text
makes the whole documentation thing bearable.

The above is not quite to the point of the original post, I think, which
talks about storing the documentation as commented bits *inside* the
function code. However, I'm not sure the latter is really desirable;
there is some merit in forcing authors to write an explicit "Details" or
"Description" section that is not just a paraphrase of programming
comments, and such sections are unlikely to fit easily inside code. At
any rate, I wouldn't want to have to interpret my *own* programming
comments as a usage guide!

WRTO automatic "usage" sections: it is easy to write code to do this
('prompt', and there is also some in 'mvbutils'-- not sure if it's in
the current release though) but at least as far as the "usage" section
goes, I think people should be "vigorously encouraged" to write their
own, showing as far as possible how one might actually *use* the
function. For many functions, just duplicating the argument list is not
helpful to the user-- a function can often be invoked in several
different ways, with different arguments relevant to different
invocations. I think it's good to show how this can be done in the
"usage" section, with comments, rather than deferring all practical
usage to "examples". For one thing, "usage" is near the top, and so
gives a very quick reminder without having to scroll through the entire
doco; for another, "usage" and "arguments" are visually adjacent,
whereas "examples" can be widely separated from "arguments".

My general point here is: the documentating process should be as
painless as possible, but not more so. Defaults that are likely to lead
to unhelpful documentation are perhaps best avoided.
For this general reason, I applaud R's fairly rigid documentation
standards, even though I frequently curse them. (And I would like to see
some bits more rigid, such as compulsory "how-to-use-this" documentation
for each package!)

The next version of 'mvbutils' will include various tools for easy "live
editing" and automated preparation of packages-- I've been using them
for a while, but still have to get round to finishing the documentation
;) 

Mark Bravington
CSIRO Mathematical & Information Sciences
Marine Laboratory
Castray Esplanade
Hobart 7001
TAS

ph (+61) 3 6232 5118
fax (+61) 3 6232 5012
mob (+61) 438 315 623
 

> -----Original Message-----
> From: r-devel-bounces at r-project.org 
> [mailto:r-devel-bounces at r-project.org] On Behalf Of Duncan Murdoch
> Sent: Tuesday, 20 June 2006 12:39 AM
> To: hadley wickham; R-devel
> Subject: Re: [Rd] [R] Function hints
> 
> I've moved this from R-help to R-devel, where I think it is 
> more appropriate, and interspersed comments below.
> 
> 
> 
> On 6/19/2006 8:51 AM, hadley wickham wrote:
> > One of the recurring themes in the recent UserR conference was that
> > many people find it difficult to find the functions they need for a
> > particular task.  Sandy Weisberg suggested a small idea he 
> would like
> > to see: a hints function that given an object, lists likely
> > operations.  I've done my best to implement this function using the
> > tools currently available in R, and my code is included at 
> the bottom
> > of this email (I hope that I haven't just duplicated 
> something already
> > present in R).  I think Sandy's idea is genuinely useful, 
> even in the
> > limited form provided by my implementation, and I have already
> > discovered a few useful functions that I was unaware of.
> > 
> > While developing and testing this function, I ran into a 
> few problems
> > which, I think, represent underlying problems with the current
> > documentation system.  These are typified by the results of running
> > hints on a object produced by glm (having class c("glm", "lm")).  I
> > have outlined (very tersely) some possible solutions.  Please note
> > that while these solutions are largely technological, the problem is
> > at heart sociological: writing documentation is no easier 
> (and perhaps
> > much harder) than writing a scientific publication, but the rewards
> > are fewer.
> > 
> > Problems:
> > 
> >  * Many functions share the same description (eg. head, tail).
> > Solution: each rdoc file should only describe one method. Problem:
> > Writing rdoc files is tedious, there is a lot of information
> > duplicated between the code and the documenation (eg. the usage
> > statement) and some functions share a lot of similar information.
> > Solution: make it easier to write documentation (eg. documentation
> > inline with code), and easier to include certain common descriptions
> > in multiple methods (eg. new include command)
> 
> I think it's bad to document dissimilar functions in the same 
> file, but 
> similar related functions *should* be documented together.  Not doing 
> this just adds to the burden of documenting them, and the risk of 
> modifying only part of the documentation so that it is inconsistent. 
> The user also gets the benefit of seeing a common description all at 
> once, rather than having to decide whether to follow "See also" links.
> 
> Your solutions would both be interesting on their own merits 
> regardless 
> of the above.  We did decide to work on preprocessing 
> directives for .Rd 
> files at the R core meetings; some sort of include directive may be 
> possible.
> 
> I don't think I would want complete documentation mixed with the 
> original source, but it would certainly be interesting to 
> have partial 
> documentation there.  (Complete documentation is too long, and would 
> make it harder to read the source without a dedicated editor 
> that could 
> hide it.  Though ESS users may see it as a reasonable requirement to 
> have everyone use the same editor, I don't think it is.)  
> However, this 
> is a lot of work, depending on infrastructure that is not in place.
> 
> >  * It is difficult to tell which functions are commonly
> > used/important. Solution: break down by keywords. Problem: keywords
> > are not useful at the moment.  Solution:  make better list 
> of keywords
> > available and encourage people to use it.  Problem: people won't
> > unless there is a strong incentive, plus good keywording requires
> > considerable expertise (especially in bulding up list).  This is
> > probably insoluable unless one person systematically keywords all of
> > the base packages.
> 
> I think it is worse than that.  There are concepts in 
> packages that just 
> don't arise in base R, and hence there would be no keywords for them 
> other than "misc", even if someone redesigned the current system. 
> Keywording is hard, and it's not clear to me how to do much 
> better than 
> we currently do.
> 
> We do already have user-defined keywords (via \concept), but 
> these are 
> not widely used.
> 
> > 
> >  * Some functions aren't documented (eg. simulate.lm, formula.glm) -
> > typically, these are methods where the documentation is in the
> > generic.  Solution: these methods should all be aliased to 
> the generic
> > (by default?), and R CMD check should be amended to check for this
> > situation.  You could also argue that this is a deficiency with my
> > function, and easily fixed by automatically referring to the generic
> > if the specific isn't documented.
> 
> I'd say it's a deficiency of your function.  You might want 
> to look at 
> the code in get("?") and .helpForCall() to see how those 
> functions work 
> out things like
> 
> ?simulate(x)
> 
> where x is an lm object.  (But notice that .helpForCall is an 
> undocumented internal function; don't depend on its implementation 
> working forever).
> 
> >  * It can't supply suggestions when there isn't an explicit method
> > (ie. .default is used), this makes it pretty useless for basic
> > vectors.  This may not really be a problem, as all possible 
> operations
> > are probably too numerous to list.
> > 
> >  * Provides full name for function, when best practice is to use
> > generic part only when calling function.  However, getting precise
> > documentation may requires that full name. 
> 
> No, not if the call syntax above is used.
> 
>   I do the best I can
> > (returning the generic if specific is alias to a documentation file
> > with the same method name), but this reflects a deeper problem that
> > the name you should use when calling a function may be different to
> > the name you use to get documentation.
> > 
> >  * Can only display methods from currently loaded packages. 
>  This is a
> > shortcoming of the methods function, but I suspect it is 
> difficult to
> > find S3 methods without loading a package.
> > 
> > Relatively trivial problems:
> > 
> >  * Needs wide display to be effective.  Could be dealt with by
> > breaking description in a sensible manner (there may 
> already by R code
> > to do this.  Please let me know if you know of any)
> 
> I think strwrap() may do what you want.
> > 
> >  * Doesn't currently include S4 methods.  Solution: add 
> some more code
> > to wrap showMethods
> > 
> >  * Personally, I think sentence case is more aesthetically pleasing
> > (and more flexible) than title case.
> 
> It's quite hard to go from existing title case to sentence 
> case, because 
> we don't have any markup to indicate proper names.  One would 
> think it 
> would be easier to go in the opposite direction, but in fact the same 
> problem arises:  "van Beethoven" for example, not "Van Beethoven".
> 
> 
> > 
> > 
> > Hadley
> > 
> > 
> > hints <- function(x) {
> 
> I don't like the name "hints".  I think we already have too many ways 
> into the help system:
> 
> help
> ?
> help.search
> apropos
> etc.?
> 
> I like your function, but I'd rather see it attached to one of the 
> existing help functions, probably help.search().  For example,
> 
> help.search(x)
> 
> could look for functions designed to work with the class of 
> x, if it had 
> one.  (There's some ambiguity here:  perhaps x contains a 
> string, and I 
> want help on that string.)
> 
> Anyway, thanks for your efforts on this so far; I hope we end up with 
> something that can make it into the next release.
> 
> Duncan Murdoch
> 
> > 	db <- eval(utils:::.hsearch_db())
> > 	if (is.null(db)) {
> > 		help.search("abcd!", rebuild=TRUE, agrep=FALSE)
> > 		db <- eval(utils:::.hsearch_db())
> > 	}
> > 
> > 	base <- db$Base
> > 	alias <- db$Aliases
> > 	key <- db$Keywords
> > 
> > 	m <- all.methods(class=class(x))
> > 	m_id <- alias[match(m, alias[,1]), 2]
> > 	keywords <- lapply(m_id, function(id) key[key[,2] %in% id, 1])
> > 
> > 	f.names <- cbind(m, base[match(m_id, base[,3]), 4])
> > 	f.names <- unlist(lapply(1:nrow(f.names), function(i) {
> > 		if (is.na(f.names[i, 2])) return(f.names[i, 1])
> > 		a <- methodsplit(f.names[i, 1])
> > 		b <- methodsplit(f.names[i, 2])
> > 		
> > 		if (a[1] == b[1]) f.names[i, 2] else f.names[i, 
> 1]		
> > 	}))
> > 	
> > 	hints <- cbind(f.names, base[match(m_id, base[,3]), 5])
> > 	hints <- hints[order(tolower(hints[,1])),]
> > 	hints <- rbind(    c("--------", "---------------"), hints)
> > 	rownames(hints) <- rep("", nrow(hints))
> > 	colnames(hints) <- c("Function", "Task")
> > 	hints[is.na(hints)] <- "(Unknown)"
> > 	
> > 	class(hints) <- "hints"
> > 	hints
> > }
> > 
> > print.hints <- function(x, ...) print(unclass(x), quote=FALSE)
> > 
> > all.methods <- function(classes) {
> > 	methods <- do.call(rbind,lapply(classes, function(x) {
> > 		m <- methods(class=x)
> > 		t(sapply(as.vector(m), methodsplit)) #m[attr(m, 
> "info")$visible]
> > 	}))
> > 	rownames(methods[!duplicated(methods[,1]),])
> > }
> > 
> > methodsplit <- function(m) {
> > 	parts <- strsplit(m, "\\.")[[1]]
> > 	if (length(parts) == 1) {
> > 		c(name=m, class="")
> > 	} else{
> > 		c(name=paste(parts[-length(parts)], 
> collapse="."), class=parts[length(parts)])
> > 	}	
> > }
> > 
> > ______________________________________________
> > R-help at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide! 
> http://www.R-project.org/posting-guide.html
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>


From gchappi at gmail.com  Tue Jun 20 11:13:03 2006
From: gchappi at gmail.com (Hans-Peter)
Date: Tue, 20 Jun 2006 11:13:03 +0200
Subject: [Rd] Delphi (Pascal) headerfiles online | Excel
Message-ID: <47fce0650606200213w722bb15fk16d48a18ff6bd216@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20060620/315d44c0/attachment.pl 

From Heather.Turner at warwick.ac.uk  Tue Jun 20 11:18:14 2006
From: Heather.Turner at warwick.ac.uk (Heather Turner)
Date: Tue, 20 Jun 2006 10:18:14 +0100
Subject: [Rd] Documentation issues [Was: Function hints]
Message-ID: <s497cb6d.031@liberator.csv.warwick.ac.uk>

I would like to follow up on another one of the documentation issues raised in the discussion on function hints. Duncan mentioned that the R core were working on preprocessing directives for .Rd files, which could possibly include some sort of include directive. I was wondering if a "includeexamples" directive might also be considered.

It often makes sense to use the same example to illustrate the use of different functions, or perhaps extend an example used to illustrate one function to illustrate another. One way to do this is simply to put

example(fnA)

in the \examples for fnB, but this is not particularly helpful for people reading the help pages as they either need to look at both help pages or run the example. The alternative is to maintain multiple copies of the same code, which is not ideal.

So it would be useful to be able to put

\includeexamples(fnA)

so that the code is replicated in fnB.Rd. Perhaps an include directive could do this anyway, but it might be useful to have a special directive for examples so that RCMD check is set up to only check the original example to save time (and unnecessary effort).

On a related issue, it would be nice if source() had an option to print comments contained in the source file, so that example() and demo() could print out annotation.

Heather

Dr H Turner
Research Assistant
Dept. of Statistics
The University of Warwick
Coventry
CV4 7AL

Tel: 024 76575870
Fax: 024 7652 4532
Url: www.warwick.ac.uk/go/heatherturner

>>> <Mark.Bravington at csiro.au> 06/20/06 01:43am >>>
[This is not about the feasibility of a "hints" function-- which would
be incredibly useful, but perhaps very very hard to do-- but about some
of the other documentation issues raised in Hadley's post and in
Duncan's reply]

WRTO documentation & code together: for several years, I've successfully
used the 'mvbutils' package to keep every function definition & its
documentation together, editing them together in the same file--
function first, then documentation in plain-text (basically the format
you see if you use "vanilla help" inside R). Storage-wise, the
documentation is just kept as an attribute of the function (with a print
method that hides it by default)-- I also keep a text backup of the
combination. Any text editor will do. When it's time to create a
package, the Rd file is generated automatically.

For me, it's been extremely helpful to keep function & documentation
together during editing-- it greatly increases the chance that I will
actually update the doco when I change the code, rather than putting it
off until I've forgotten what I did. Also, writing Rd format is a
nightmare (again, personal opinion)-- being able to write plain-text
makes the whole documentation thing bearable.

The above is not quite to the point of the original post, I think, which
talks about storing the documentation as commented bits *inside* the
function code. However, I'm not sure the latter is really desirable;
there is some merit in forcing authors to write an explicit "Details" or
"Description" section that is not just a paraphrase of programming
comments, and such sections are unlikely to fit easily inside code. At
any rate, I wouldn't want to have to interpret my *own* programming
comments as a usage guide!

WRTO automatic "usage" sections: it is easy to write code to do this
('prompt', and there is also some in 'mvbutils'-- not sure if it's in
the current release though) but at least as far as the "usage" section
goes, I think people should be "vigorously encouraged" to write their
own, showing as far as possible how one might actually *use* the
function. For many functions, just duplicating the argument list is not
helpful to the user-- a function can often be invoked in several
different ways, with different arguments relevant to different
invocations. I think it's good to show how this can be done in the
"usage" section, with comments, rather than deferring all practical
usage to "examples". For one thing, "usage" is near the top, and so
gives a very quick reminder without having to scroll through the entire
doco; for another, "usage" and "arguments" are visually adjacent,
whereas "examples" can be widely separated from "arguments".

My general point here is: the documentating process should be as
painless as possible, but not more so. Defaults that are likely to lead
to unhelpful documentation are perhaps best avoided.
For this general reason, I applaud R's fairly rigid documentation
standards, even though I frequently curse them. (And I would like to see
some bits more rigid, such as compulsory "how-to-use-this" documentation
for each package!)

The next version of 'mvbutils' will include various tools for easy "live
editing" and automated preparation of packages-- I've been using them
for a while, but still have to get round to finishing the documentation
;) 

Mark Bravington
CSIRO Mathematical & Information Sciences
Marine Laboratory
Castray Esplanade
Hobart 7001
TAS

ph (+61) 3 6232 5118
fax (+61) 3 6232 5012
mob (+61) 438 315 623
 

> -----Original Message-----
> From: r-devel-bounces at r-project.org 
> [mailto:r-devel-bounces at r-project.org] On Behalf Of Duncan Murdoch
> Sent: Tuesday, 20 June 2006 12:39 AM
> To: hadley wickham; R-devel
> Subject: Re: [Rd] [R] Function hints
> 
> I've moved this from R-help to R-devel, where I think it is 
> more appropriate, and interspersed comments below.
> 
> 
> 
> On 6/19/2006 8:51 AM, hadley wickham wrote:
> > One of the recurring themes in the recent UserR conference was that
> > many people find it difficult to find the functions they need for a
> > particular task.  Sandy Weisberg suggested a small idea he 
> would like
> > to see: a hints function that given an object, lists likely
> > operations.  I've done my best to implement this function using the
> > tools currently available in R, and my code is included at 
> the bottom
> > of this email (I hope that I haven't just duplicated 
> something already
> > present in R).  I think Sandy's idea is genuinely useful, 
> even in the
> > limited form provided by my implementation, and I have already
> > discovered a few useful functions that I was unaware of.
> > 
> > While developing and testing this function, I ran into a 
> few problems
> > which, I think, represent underlying problems with the current
> > documentation system.  These are typified by the results of running
> > hints on a object produced by glm (having class c("glm", "lm")).  I
> > have outlined (very tersely) some possible solutions.  Please note
> > that while these solutions are largely technological, the problem is
> > at heart sociological: writing documentation is no easier 
> (and perhaps
> > much harder) than writing a scientific publication, but the rewards
> > are fewer.
> > 
> > Problems:
> > 
> >  * Many functions share the same description (eg. head, tail).
> > Solution: each rdoc file should only describe one method. Problem:
> > Writing rdoc files is tedious, there is a lot of information
> > duplicated between the code and the documenation (eg. the usage
> > statement) and some functions share a lot of similar information.
> > Solution: make it easier to write documentation (eg. documentation
> > inline with code), and easier to include certain common descriptions
> > in multiple methods (eg. new include command)
> 
> I think it's bad to document dissimilar functions in the same 
> file, but 
> similar related functions *should* be documented together.  Not doing 
> this just adds to the burden of documenting them, and the risk of 
> modifying only part of the documentation so that it is inconsistent. 
> The user also gets the benefit of seeing a common description all at 
> once, rather than having to decide whether to follow "See also" links.
> 
> Your solutions would both be interesting on their own merits 
> regardless 
> of the above.  We did decide to work on preprocessing 
> directives for .Rd 
> files at the R core meetings; some sort of include directive may be 
> possible.
> 
> I don't think I would want complete documentation mixed with the 
> original source, but it would certainly be interesting to 
> have partial 
> documentation there.  (Complete documentation is too long, and would 
> make it harder to read the source without a dedicated editor 
> that could 
> hide it.  Though ESS users may see it as a reasonable requirement to 
> have everyone use the same editor, I don't think it is.)  
> However, this 
> is a lot of work, depending on infrastructure that is not in place.
> 
> >  * It is difficult to tell which functions are commonly
> > used/important. Solution: break down by keywords. Problem: keywords
> > are not useful at the moment.  Solution:  make better list 
> of keywords
> > available and encourage people to use it.  Problem: people won't
> > unless there is a strong incentive, plus good keywording requires
> > considerable expertise (especially in bulding up list).  This is
> > probably insoluable unless one person systematically keywords all of
> > the base packages.
> 
> I think it is worse than that.  There are concepts in 
> packages that just 
> don't arise in base R, and hence there would be no keywords for them 
> other than "misc", even if someone redesigned the current system. 
> Keywording is hard, and it's not clear to me how to do much 
> better than 
> we currently do.
> 
> We do already have user-defined keywords (via \concept), but 
> these are 
> not widely used.
> 
> > 
> >  * Some functions aren't documented (eg. simulate.lm, formula.glm) -
> > typically, these are methods where the documentation is in the
> > generic.  Solution: these methods should all be aliased to 
> the generic
> > (by default?), and R CMD check should be amended to check for this
> > situation.  You could also argue that this is a deficiency with my
> > function, and easily fixed by automatically referring to the generic
> > if the specific isn't documented.
> 
> I'd say it's a deficiency of your function.  You might want 
> to look at 
> the code in get("?") and .helpForCall() to see how those 
> functions work 
> out things like
> 
> ?simulate(x)
> 
> where x is an lm object.  (But notice that .helpForCall is an 
> undocumented internal function; don't depend on its implementation 
> working forever).
> 
> >  * It can't supply suggestions when there isn't an explicit method
> > (ie. .default is used), this makes it pretty useless for basic
> > vectors.  This may not really be a problem, as all possible 
> operations
> > are probably too numerous to list.
> > 
> >  * Provides full name for function, when best practice is to use
> > generic part only when calling function.  However, getting precise
> > documentation may requires that full name. 
> 
> No, not if the call syntax above is used.
> 
>   I do the best I can
> > (returning the generic if specific is alias to a documentation file
> > with the same method name), but this reflects a deeper problem that
> > the name you should use when calling a function may be different to
> > the name you use to get documentation.
> > 
> >  * Can only display methods from currently loaded packages. 
>  This is a
> > shortcoming of the methods function, but I suspect it is 
> difficult to
> > find S3 methods without loading a package.
> > 
> > Relatively trivial problems:
> > 
> >  * Needs wide display to be effective.  Could be dealt with by
> > breaking description in a sensible manner (there may 
> already by R code
> > to do this.  Please let me know if you know of any)
> 
> I think strwrap() may do what you want.
> > 
> >  * Doesn't currently include S4 methods.  Solution: add 
> some more code
> > to wrap showMethods
> > 
> >  * Personally, I think sentence case is more aesthetically pleasing
> > (and more flexible) than title case.
> 
> It's quite hard to go from existing title case to sentence 
> case, because 
> we don't have any markup to indicate proper names.  One would 
> think it 
> would be easier to go in the opposite direction, but in fact the same 
> problem arises:  "van Beethoven" for example, not "Van Beethoven".
> 
> 
> > 
> > 
> > Hadley
> > 
> > 
> > hints <- function(x) {
> 
> I don't like the name "hints".  I think we already have too many ways 
> into the help system:
> 
> help
> ?
> help.search
> apropos
> etc.?
> 
> I like your function, but I'd rather see it attached to one of the 
> existing help functions, probably help.search().  For example,
> 
> help.search(x)
> 
> could look for functions designed to work with the class of 
> x, if it had 
> one.  (There's some ambiguity here:  perhaps x contains a 
> string, and I 
> want help on that string.)
> 
> Anyway, thanks for your efforts on this so far; I hope we end up with 
> something that can make it into the next release.
> 
> Duncan Murdoch
> 
> > 	db <- eval(utils:::.hsearch_db())
> > 	if (is.null(db)) {
> > 		help.search("abcd!", rebuild=TRUE, agrep=FALSE)
> > 		db <- eval(utils:::.hsearch_db())
> > 	}
> > 
> > 	base <- db$Base
> > 	alias <- db$Aliases
> > 	key <- db$Keywords
> > 
> > 	m <- all.methods(class=class(x))
> > 	m_id <- alias[match(m, alias[,1]), 2]
> > 	keywords <- lapply(m_id, function(id) key[key[,2] %in% id, 1])
> > 
> > 	f.names <- cbind(m, base[match(m_id, base[,3]), 4])
> > 	f.names <- unlist(lapply(1:nrow(f.names), function(i) {
> > 		if (is.na(f.names[i, 2])) return(f.names[i, 1])
> > 		a <- methodsplit(f.names[i, 1])
> > 		b <- methodsplit(f.names[i, 2])
> > 		
> > 		if (a[1] == b[1]) f.names[i, 2] else f.names[i, 
> 1]		
> > 	}))
> > 	
> > 	hints <- cbind(f.names, base[match(m_id, base[,3]), 5])
> > 	hints <- hints[order(tolower(hints[,1])),]
> > 	hints <- rbind(    c("--------", "---------------"), hints)
> > 	rownames(hints) <- rep("", nrow(hints))
> > 	colnames(hints) <- c("Function", "Task")
> > 	hints[is.na(hints)] <- "(Unknown)"
> > 	
> > 	class(hints) <- "hints"
> > 	hints
> > }
> > 
> > print.hints <- function(x, ...) print(unclass(x), quote=FALSE)
> > 
> > all.methods <- function(classes) {
> > 	methods <- do.call(rbind,lapply(classes, function(x) {
> > 		m <- methods(class=x)
> > 		t(sapply(as.vector(m), methodsplit)) #m[attr(m, 
> "info")$visible]
> > 	}))
> > 	rownames(methods[!duplicated(methods[,1]),])
> > }
> > 
> > methodsplit <- function(m) {
> > 	parts <- strsplit(m, "\\.")[[1]]
> > 	if (length(parts) == 1) {
> > 		c(name=m, class="")
> > 	} else{
> > 		c(name=paste(parts[-length(parts)], 
> collapse="."), class=parts[length(parts)])
> > 	}	
> > }
> > 
> > ______________________________________________
> > R-help at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-help 
> > PLEASE do read the posting guide! 
> http://www.R-project.org/posting-guide.html 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel 
> 
>

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel


From r.hankin at noc.soton.ac.uk  Tue Jun 20 11:24:25 2006
From: r.hankin at noc.soton.ac.uk (Robin Hankin)
Date: Tue, 20 Jun 2006 10:24:25 +0100
Subject: [Rd] [R] combining tables
In-Reply-To: <971536df0606190445he5a6ccyd57c1b6fbed4dafa@mail.gmail.com>
References: <B469259B-333B-41BF-958C-D95DAB37B303@soc.soton.ac.uk>
	<971536df0606190445he5a6ccyd57c1b6fbed4dafa@mail.gmail.com>
Message-ID: <5CE7128B-2D15-4CFD-9E68-FE3318782A03@soc.soton.ac.uk>

On 19 Jun 2006, at 12:45, Gabor Grothendieck wrote:
> Try this:
>
> both <- c(x,y)
> as.table(tapply(both, names(both), sum))


thanks for this, Gabor.

The class of the objects I am manipulating in my
package is c("count", "table").

It'd be nice to overload the "+" symbol so that I can add
two count objects like this with a simple "x+y".  To this end, I
defined a Ops.count() function that executed Gabor's summation.

But, this broke all sorts of functionality in the package,
because the ">" relation was not defined in my Ops.count()
function.

In my case, the only operation that I want to redefine is "+".
I want to leave all the others unchanged.

What is Best Practice for redefining just one binary operator?



>
> On 6/19/06, Robin Hankin <r.hankin at noc.soton.ac.uk> wrote:
>> Hi
>>
>> Suppose I have two tables of counts of different animals and I
>> wish to pool them so the total of the sum is the sum of the total.
>>
>> Toy example follows (the real ones are ~10^3 species and ~10^6
>> individuals).
>> x and y are zoos that have merged and I need a combined inventory
>> including animals that are temporarily absent.
>>
>>
>>  > (x <- as.table(c(cats=3,squid=7,pigs=2,dogs=1,slugs=0)))
>> cats squid  pigs  dogs slugs
>>     3     7     2     1     0
>>  > (y <- as.table(c(cats=4,dogs=5,slugs=3,crabs=0)))
>> cats  dogs slugs crabs
>>     4     5     3     0
>>  > (desired.output <- as.table(c
>> (cats=7,squid=7,pigs=2,dogs=6,slugs=3,crabs=0)))
>> cats squid  pigs  dogs slugs crabs
>>     7     7     2     6     3     0
>>  >
>>
>>
>>
>>
>> Note that we have 7 cats altogether, and the crabs correctly show
>> as zero counts.
>>
>>
>> How to do this nicely in R?
>>
>>
>>

--
Robin Hankin
Uncertainty Analyst
National Oceanography Centre, Southampton
European Way, Southampton SO14 3ZH, UK
  tel  023-8059-7743


From gregor.gorjanc at bfro.uni-lj.si  Tue Jun 20 12:22:42 2006
From: gregor.gorjanc at bfro.uni-lj.si (gregor.gorjanc at bfro.uni-lj.si)
Date: Tue, 20 Jun 2006 12:22:42 +0200 (CEST)
Subject: [Rd] Wish/suggestion: add output of citation() to package "manuals"
	(PR#9009)
Message-ID: <20060620102242.B21054D868@slim.kubism.ku.dk>

Dear R core,

influenced by recent panel discussion in Vienna I think that it would be
nice to add package specific output of citation() function to package
reference manuals. I think that apropriate place would be just after
fields from DESCRIPTION file. This will be OK for CRAN, but not for
locally installed packages as there is not reference manual there (at
least on my linux box) - why is this the case? Perhaps output of
citation() could be added to package specific help page i.e. to
mypackage.package.Rd file.

The same could be done with R's manuals. I know that there is an entry
in FAQ on this and that there is a note after launching R, but questions
about apropriate reference on R-help list are quite frequent. Perhaps
this is so due to the habit that one looks into the paper/book/manual
about relevant information for reference.

-- 
Lep pozdrav / With regards,
    Gregor Gorjanc

----------------------------------------------------------------------
University of Ljubljana     PhD student
Biotechnical Faculty
Zootechnical Department     URI: http://www.bfro.uni-lj.si/MR/ggorjan
Groblje 3                   mail: gregor.gorjanc <at> bfro.uni-lj.si

SI-1230 Domzale             tel: +386 (0)1 72 17 861
Slovenia, Europe            fax: +386 (0)1 72 17 888

----------------------------------------------------------------------
"One must learn by doing the thing; for though you think you know it,
 you have no certainty until you try." Sophocles ~ 450 B.C.


From sandro at inetcode.com.br  Tue Jun 20 12:57:10 2006
From: sandro at inetcode.com.br (Sandro C. Goncales)
Date: Tue, 20 Jun 2006 07:57:10 -0300
Subject: [Rd] Delphi (Pascal) headerfiles online | Excel
In-Reply-To: <47fce0650606200213w722bb15fk16d48a18ff6bd216@mail.gmail.com>
References: <47fce0650606200213w722bb15fk16d48a18ff6bd216@mail.gmail.com>
Message-ID: <4497D486.2040004@inetcode.com.br>

Hans-Peter wrote:
> Dear list
>
> Some time ago I told about the translation of the LGPL'ed R headerfiles to
> Delphi. I am happy that most of them are translated now and the code, demo
> and description is online (licensed under GPLv2):
> http://treetron.googlepages.com
>
>   

Finaly ;)

> I just annonced a native Excel reader/writer in R-help which is based on
> this headerfile translation.
>
> Probably most of you won't care (using Linux) but it still would be nice if
> someone knowledgeable could have a look into it. It is my first package...
> and if there should be things not done so well, I'd like to fix it until
> final release (in about a week).
>

Well, in my case it's a way to "sell the R" to clients, it's means they
don't know R, so I create a "standalone" program using R. After some
time I convince them to use a "client/server" version using linux, and
in the end it's constructed a cluster of servers and desktop in linux
;). I tried the RDCom ("hey, what are you doing with my Windows?") ,
Java ("What is this? A tiny program using 15Mb to 20Mb!") or C++("Don't
you think it's too expensive for a small program?") and they don't liked :(
So, Hans, your job is coming in a great help, thanks.

Sandro
sandro at inetcode.com.br


From murdoch at stats.uwo.ca  Tue Jun 20 12:58:14 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 20 Jun 2006 06:58:14 -0400
Subject: [Rd] Documentation issues [Was: Function hints]
In-Reply-To: <s497cb6d.032@liberator.csv.warwick.ac.uk>
References: <s497cb6d.032@liberator.csv.warwick.ac.uk>
Message-ID: <4497D4C6.5010704@stats.uwo.ca>

On 6/20/2006 5:18 AM, Heather Turner wrote:
> I would like to follow up on another one of the documentation issues raised in the discussion on function hints. Duncan mentioned that the R core were working on preprocessing directives for .Rd files, which could possibly include some sort of include directive. I was wondering if a "includeexamples" directive might also be considered.
> 
> It often makes sense to use the same example to illustrate the use of different functions, or perhaps extend an example used to illustrate one function to illustrate another. One way to do this is simply to put
> 
> example(fnA)
> 
> in the \examples for fnB, but this is not particularly helpful for people reading the help pages as they either need to look at both help pages or run the example. The alternative is to maintain multiple copies of the same code, which is not ideal.
> 
> So it would be useful to be able to put
> 
> \includeexamples(fnA)
> 
> so that the code is replicated in fnB.Rd. Perhaps an include directive could do this anyway, but it might be useful to have a special directive for examples so that RCMD check is set up to only check the original example to save time (and unnecessary effort).

Thanks, that's a good suggestion.  My inclination would be towards just 
one type of \include; it could be surrounded by notation saying not to 
check it in all but one instance if the author wanted to save testing time.

> On a related issue, it would be nice if source() had an option to print comments contained in the source file, so that example() and demo() could print out annotation.

Yes, this has been a long-standing need, but it's somewhat tricky 
because of the way source currently works:  it parses the whole file, 
then executes the parsed version.  The first step loses the comments, so 
you see a deparsed version when executing.  What I think it should do is 
have pointers back from the parsed version to the original source code, 
but that needs fairly low level changes.  This is some of the missing 
"infrastructure" I mentioned below.

Duncan Murdoch

> 
> Heather
> 
> Dr H Turner
> Research Assistant
> Dept. of Statistics
> The University of Warwick
> Coventry
> CV4 7AL
> 
> Tel: 024 76575870
> Fax: 024 7652 4532
> Url: www.warwick.ac.uk/go/heatherturner
> 
>>>> <Mark.Bravington at csiro.au> 06/20/06 01:43am >>>
> [This is not about the feasibility of a "hints" function-- which would
> be incredibly useful, but perhaps very very hard to do-- but about some
> of the other documentation issues raised in Hadley's post and in
> Duncan's reply]
> 
> WRTO documentation & code together: for several years, I've successfully
> used the 'mvbutils' package to keep every function definition & its
> documentation together, editing them together in the same file--
> function first, then documentation in plain-text (basically the format
> you see if you use "vanilla help" inside R). Storage-wise, the
> documentation is just kept as an attribute of the function (with a print
> method that hides it by default)-- I also keep a text backup of the
> combination. Any text editor will do. When it's time to create a
> package, the Rd file is generated automatically.
> 
> For me, it's been extremely helpful to keep function & documentation
> together during editing-- it greatly increases the chance that I will
> actually update the doco when I change the code, rather than putting it
> off until I've forgotten what I did. Also, writing Rd format is a
> nightmare (again, personal opinion)-- being able to write plain-text
> makes the whole documentation thing bearable.
> 
> The above is not quite to the point of the original post, I think, which
> talks about storing the documentation as commented bits *inside* the
> function code. However, I'm not sure the latter is really desirable;
> there is some merit in forcing authors to write an explicit "Details" or
> "Description" section that is not just a paraphrase of programming
> comments, and such sections are unlikely to fit easily inside code. At
> any rate, I wouldn't want to have to interpret my *own* programming
> comments as a usage guide!
> 
> WRTO automatic "usage" sections: it is easy to write code to do this
> ('prompt', and there is also some in 'mvbutils'-- not sure if it's in
> the current release though) but at least as far as the "usage" section
> goes, I think people should be "vigorously encouraged" to write their
> own, showing as far as possible how one might actually *use* the
> function. For many functions, just duplicating the argument list is not
> helpful to the user-- a function can often be invoked in several
> different ways, with different arguments relevant to different
> invocations. I think it's good to show how this can be done in the
> "usage" section, with comments, rather than deferring all practical
> usage to "examples". For one thing, "usage" is near the top, and so
> gives a very quick reminder without having to scroll through the entire
> doco; for another, "usage" and "arguments" are visually adjacent,
> whereas "examples" can be widely separated from "arguments".
> 
> My general point here is: the documentating process should be as
> painless as possible, but not more so. Defaults that are likely to lead
> to unhelpful documentation are perhaps best avoided.
> For this general reason, I applaud R's fairly rigid documentation
> standards, even though I frequently curse them. (And I would like to see
> some bits more rigid, such as compulsory "how-to-use-this" documentation
> for each package!)
> 
> The next version of 'mvbutils' will include various tools for easy "live
> editing" and automated preparation of packages-- I've been using them
> for a while, but still have to get round to finishing the documentation
> ;) 
> 
> Mark Bravington
> CSIRO Mathematical & Information Sciences
> Marine Laboratory
> Castray Esplanade
> Hobart 7001
> TAS
> 
> ph (+61) 3 6232 5118
> fax (+61) 3 6232 5012
> mob (+61) 438 315 623
>  
> 
>> -----Original Message-----
>> From: r-devel-bounces at r-project.org 
>> [mailto:r-devel-bounces at r-project.org] On Behalf Of Duncan Murdoch
>> Sent: Tuesday, 20 June 2006 12:39 AM
>> To: hadley wickham; R-devel
>> Subject: Re: [Rd] [R] Function hints
>>
>> I've moved this from R-help to R-devel, where I think it is 
>> more appropriate, and interspersed comments below.
>>
>>
>>
>> On 6/19/2006 8:51 AM, hadley wickham wrote:
>>> One of the recurring themes in the recent UserR conference was that
>>> many people find it difficult to find the functions they need for a
>>> particular task.  Sandy Weisberg suggested a small idea he 
>> would like
>>> to see: a hints function that given an object, lists likely
>>> operations.  I've done my best to implement this function using the
>>> tools currently available in R, and my code is included at 
>> the bottom
>>> of this email (I hope that I haven't just duplicated 
>> something already
>>> present in R).  I think Sandy's idea is genuinely useful, 
>> even in the
>>> limited form provided by my implementation, and I have already
>>> discovered a few useful functions that I was unaware of.
>>>
>>> While developing and testing this function, I ran into a 
>> few problems
>>> which, I think, represent underlying problems with the current
>>> documentation system.  These are typified by the results of running
>>> hints on a object produced by glm (having class c("glm", "lm")).  I
>>> have outlined (very tersely) some possible solutions.  Please note
>>> that while these solutions are largely technological, the problem is
>>> at heart sociological: writing documentation is no easier 
>> (and perhaps
>>> much harder) than writing a scientific publication, but the rewards
>>> are fewer.
>>>
>>> Problems:
>>>
>>>  * Many functions share the same description (eg. head, tail).
>>> Solution: each rdoc file should only describe one method. Problem:
>>> Writing rdoc files is tedious, there is a lot of information
>>> duplicated between the code and the documenation (eg. the usage
>>> statement) and some functions share a lot of similar information.
>>> Solution: make it easier to write documentation (eg. documentation
>>> inline with code), and easier to include certain common descriptions
>>> in multiple methods (eg. new include command)
>> I think it's bad to document dissimilar functions in the same 
>> file, but 
>> similar related functions *should* be documented together.  Not doing 
>> this just adds to the burden of documenting them, and the risk of 
>> modifying only part of the documentation so that it is inconsistent. 
>> The user also gets the benefit of seeing a common description all at 
>> once, rather than having to decide whether to follow "See also" links.
>>
>> Your solutions would both be interesting on their own merits 
>> regardless 
>> of the above.  We did decide to work on preprocessing 
>> directives for .Rd 
>> files at the R core meetings; some sort of include directive may be 
>> possible.
>>
>> I don't think I would want complete documentation mixed with the 
>> original source, but it would certainly be interesting to 
>> have partial 
>> documentation there.  (Complete documentation is too long, and would 
>> make it harder to read the source without a dedicated editor 
>> that could 
>> hide it.  Though ESS users may see it as a reasonable requirement to 
>> have everyone use the same editor, I don't think it is.)  
>> However, this 
>> is a lot of work, depending on infrastructure that is not in place.
>>
>>>  * It is difficult to tell which functions are commonly
>>> used/important. Solution: break down by keywords. Problem: keywords
>>> are not useful at the moment.  Solution:  make better list 
>> of keywords
>>> available and encourage people to use it.  Problem: people won't
>>> unless there is a strong incentive, plus good keywording requires
>>> considerable expertise (especially in bulding up list).  This is
>>> probably insoluable unless one person systematically keywords all of
>>> the base packages.
>> I think it is worse than that.  There are concepts in 
>> packages that just 
>> don't arise in base R, and hence there would be no keywords for them 
>> other than "misc", even if someone redesigned the current system. 
>> Keywording is hard, and it's not clear to me how to do much 
>> better than 
>> we currently do.
>>
>> We do already have user-defined keywords (via \concept), but 
>> these are 
>> not widely used.
>>
>>>  * Some functions aren't documented (eg. simulate.lm, formula.glm) -
>>> typically, these are methods where the documentation is in the
>>> generic.  Solution: these methods should all be aliased to 
>> the generic
>>> (by default?), and R CMD check should be amended to check for this
>>> situation.  You could also argue that this is a deficiency with my
>>> function, and easily fixed by automatically referring to the generic
>>> if the specific isn't documented.
>> I'd say it's a deficiency of your function.  You might want 
>> to look at 
>> the code in get("?") and .helpForCall() to see how those 
>> functions work 
>> out things like
>>
>> ?simulate(x)
>>
>> where x is an lm object.  (But notice that .helpForCall is an 
>> undocumented internal function; don't depend on its implementation 
>> working forever).
>>
>>>  * It can't supply suggestions when there isn't an explicit method
>>> (ie. .default is used), this makes it pretty useless for basic
>>> vectors.  This may not really be a problem, as all possible 
>> operations
>>> are probably too numerous to list.
>>>
>>>  * Provides full name for function, when best practice is to use
>>> generic part only when calling function.  However, getting precise
>>> documentation may requires that full name. 
>> No, not if the call syntax above is used.
>>
>>   I do the best I can
>>> (returning the generic if specific is alias to a documentation file
>>> with the same method name), but this reflects a deeper problem that
>>> the name you should use when calling a function may be different to
>>> the name you use to get documentation.
>>>
>>>  * Can only display methods from currently loaded packages. 
>>  This is a
>>> shortcoming of the methods function, but I suspect it is 
>> difficult to
>>> find S3 methods without loading a package.
>>>
>>> Relatively trivial problems:
>>>
>>>  * Needs wide display to be effective.  Could be dealt with by
>>> breaking description in a sensible manner (there may 
>> already by R code
>>> to do this.  Please let me know if you know of any)
>> I think strwrap() may do what you want.
>>>  * Doesn't currently include S4 methods.  Solution: add 
>> some more code
>>> to wrap showMethods
>>>
>>>  * Personally, I think sentence case is more aesthetically pleasing
>>> (and more flexible) than title case.
>> It's quite hard to go from existing title case to sentence 
>> case, because 
>> we don't have any markup to indicate proper names.  One would 
>> think it 
>> would be easier to go in the opposite direction, but in fact the same 
>> problem arises:  "van Beethoven" for example, not "Van Beethoven".
>>
>>
>>>
>>> Hadley
>>>
>>>
>>> hints <- function(x) {
>> I don't like the name "hints".  I think we already have too many ways 
>> into the help system:
>>
>> help
>> ?
>> help.search
>> apropos
>> etc.?
>>
>> I like your function, but I'd rather see it attached to one of the 
>> existing help functions, probably help.search().  For example,
>>
>> help.search(x)
>>
>> could look for functions designed to work with the class of 
>> x, if it had 
>> one.  (There's some ambiguity here:  perhaps x contains a 
>> string, and I 
>> want help on that string.)
>>
>> Anyway, thanks for your efforts on this so far; I hope we end up with 
>> something that can make it into the next release.
>>
>> Duncan Murdoch
>>
>>> 	db <- eval(utils:::.hsearch_db())
>>> 	if (is.null(db)) {
>>> 		help.search("abcd!", rebuild=TRUE, agrep=FALSE)
>>> 		db <- eval(utils:::.hsearch_db())
>>> 	}
>>>
>>> 	base <- db$Base
>>> 	alias <- db$Aliases
>>> 	key <- db$Keywords
>>>
>>> 	m <- all.methods(class=class(x))
>>> 	m_id <- alias[match(m, alias[,1]), 2]
>>> 	keywords <- lapply(m_id, function(id) key[key[,2] %in% id, 1])
>>>
>>> 	f.names <- cbind(m, base[match(m_id, base[,3]), 4])
>>> 	f.names <- unlist(lapply(1:nrow(f.names), function(i) {
>>> 		if (is.na(f.names[i, 2])) return(f.names[i, 1])
>>> 		a <- methodsplit(f.names[i, 1])
>>> 		b <- methodsplit(f.names[i, 2])
>>> 		
>>> 		if (a[1] == b[1]) f.names[i, 2] else f.names[i, 
>> 1]		
>>> 	}))
>>> 	
>>> 	hints <- cbind(f.names, base[match(m_id, base[,3]), 5])
>>> 	hints <- hints[order(tolower(hints[,1])),]
>>> 	hints <- rbind(    c("--------", "---------------"), hints)
>>> 	rownames(hints) <- rep("", nrow(hints))
>>> 	colnames(hints) <- c("Function", "Task")
>>> 	hints[is.na(hints)] <- "(Unknown)"
>>> 	
>>> 	class(hints) <- "hints"
>>> 	hints
>>> }
>>>
>>> print.hints <- function(x, ...) print(unclass(x), quote=FALSE)
>>>
>>> all.methods <- function(classes) {
>>> 	methods <- do.call(rbind,lapply(classes, function(x) {
>>> 		m <- methods(class=x)
>>> 		t(sapply(as.vector(m), methodsplit)) #m[attr(m, 
>> "info")$visible]
>>> 	}))
>>> 	rownames(methods[!duplicated(methods[,1]),])
>>> }
>>>
>>> methodsplit <- function(m) {
>>> 	parts <- strsplit(m, "\\.")[[1]]
>>> 	if (length(parts) == 1) {
>>> 		c(name=m, class="")
>>> 	} else{
>>> 		c(name=paste(parts[-length(parts)], 
>> collapse="."), class=parts[length(parts)])
>>> 	}	
>>> }
>>>
>>> ______________________________________________
>>> R-help at stat.math.ethz.ch mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help 
>>> PLEASE do read the posting guide! 
>> http://www.R-project.org/posting-guide.html 
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel 
>>
>>
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ggrothendieck at gmail.com  Tue Jun 20 13:01:31 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Tue, 20 Jun 2006 07:01:31 -0400
Subject: [Rd] [R] combining tables
In-Reply-To: <5CE7128B-2D15-4CFD-9E68-FE3318782A03@soc.soton.ac.uk>
References: <B469259B-333B-41BF-958C-D95DAB37B303@soc.soton.ac.uk>
	<971536df0606190445he5a6ccyd57c1b6fbed4dafa@mail.gmail.com>
	<5CE7128B-2D15-4CFD-9E68-FE3318782A03@soc.soton.ac.uk>
Message-ID: <971536df0606200401p63a17fddy25fa341059737b03@mail.gmail.com>

On 6/20/06, Robin Hankin <r.hankin at noc.soton.ac.uk> wrote:
> On 19 Jun 2006, at 12:45, Gabor Grothendieck wrote:
> > Try this:
> >
> > both <- c(x,y)
> > as.table(tapply(both, names(both), sum))
>
>
> thanks for this, Gabor.
>
> The class of the objects I am manipulating in my
> package is c("count", "table").
>
> It'd be nice to overload the "+" symbol so that I can add
> two count objects like this with a simple "x+y".  To this end, I
> defined a Ops.count() function that executed Gabor's summation.
>
> But, this broke all sorts of functionality in the package,
> because the ">" relation was not defined in my Ops.count()
> function.
>
> In my case, the only operation that I want to redefine is "+".
> I want to leave all the others unchanged.
>
> What is Best Practice for redefining just one binary operator?
>
>
>
> >
> > On 6/19/06, Robin Hankin <r.hankin at noc.soton.ac.uk> wrote:
> >> Hi
> >>
> >> Suppose I have two tables of counts of different animals and I
> >> wish to pool them so the total of the sum is the sum of the total.
> >>
> >> Toy example follows (the real ones are ~10^3 species and ~10^6
> >> individuals).
> >> x and y are zoos that have merged and I need a combined inventory
> >> including animals that are temporarily absent.
> >>
> >>
> >>  > (x <- as.table(c(cats=3,squid=7,pigs=2,dogs=1,slugs=0)))
> >> cats squid  pigs  dogs slugs
> >>     3     7     2     1     0
> >>  > (y <- as.table(c(cats=4,dogs=5,slugs=3,crabs=0)))
> >> cats  dogs slugs crabs
> >>     4     5     3     0
> >>  > (desired.output <- as.table(c
> >> (cats=7,squid=7,pigs=2,dogs=6,slugs=3,crabs=0)))
> >> cats squid  pigs  dogs slugs crabs
> >>     7     7     2     6     3     0
> >>  >
> >>
> >>
> >>
> >>
> >> Note that we have 7 cats altogether, and the crabs correctly show
> >> as zero counts.
> >>
> >>
> >> How to do this nicely in R?

This will define + but not the others:

"+.count" <- function(x,y) {
	both <- c(x,y)
	as.table(tapply(both, names(both), sum))
}


From friedrich.leisch at stat.uni-muenchen.de  Tue Jun 20 13:24:23 2006
From: friedrich.leisch at stat.uni-muenchen.de (Friedrich Leisch)
Date: Tue, 20 Jun 2006 13:24:23 +0200
Subject: [Rd] Wish/suggestion: add output of citation() to package
	"manuals"	(PR#9009)
In-Reply-To: <20060620102242.B21054D868@slim.kubism.ku.dk>
References: <20060620102242.B21054D868@slim.kubism.ku.dk>
Message-ID: <17559.56039.667666.370095@lxh5.stat.uni-muenchen.de>

>>>>> On Tue, 20 Jun 2006 12:22:42 +0200 (CEST),
>>>>> gregor gorjanc (gg) wrote:

  > Dear R core,
  > influenced by recent panel discussion in Vienna I think that it would be
  > nice to add package specific output of citation() function to package
  > reference manuals. I think that apropriate place would be just after
  > fields from DESCRIPTION file. This will be OK for CRAN, but not for
  > locally installed packages as there is not reference manual there (at
  > least on my linux box) - why is this the case? Perhaps output of
  > citation() could be added to package specific help page i.e. to
  > mypackage.package.Rd file.

Yes, very good idea, I have put it onto my 2do list for 2.4.

Best,
Fritz


From friedrich.leisch at stat.uni-muenchen.de  Tue Jun 20 13:23:57 2006
From: friedrich.leisch at stat.uni-muenchen.de (friedrich.leisch at stat.uni-muenchen.de)
Date: Tue, 20 Jun 2006 13:23:57 +0200 (CEST)
Subject: [Rd] Wish/suggestion: add output of citation() to package
	"manuals" (PR#9010)
Message-ID: <20060620112357.3D1F74D877@slim.kubism.ku.dk>

>>>>> On Tue, 20 Jun 2006 12:22:42 +0200 (CEST),
>>>>> gregor gorjanc (gg) wrote:

  > Dear R core,
  > influenced by recent panel discussion in Vienna I think that it would be
  > nice to add package specific output of citation() function to package
  > reference manuals. I think that apropriate place would be just after
  > fields from DESCRIPTION file. This will be OK for CRAN, but not for
  > locally installed packages as there is not reference manual there (at
  > least on my linux box) - why is this the case? Perhaps output of
  > citation() could be added to package specific help page i.e. to
  > mypackage.package.Rd file.

Yes, very good idea, I have put it onto my 2do list for 2.4.

Best,
Fritz


From Heather.Turner at warwick.ac.uk  Tue Jun 20 13:35:45 2006
From: Heather.Turner at warwick.ac.uk (Heather Turner)
Date: Tue, 20 Jun 2006 12:35:45 +0100
Subject: [Rd] Documentation issues [Was: Function hints]
Message-ID: <s497ebbe.035@liberator.csv.warwick.ac.uk>



>>> Duncan Murdoch <murdoch at stats.uwo.ca> 06/20/06 11:58am >>>
On 6/20/2006 5:18 AM, Heather Turner wrote:
> I would like to follow up on another one of the documentation issues raised in the discussion on function hints. Duncan mentioned that the R core were working on preprocessing directives for .Rd files, which could possibly include some sort of include directive. I was wondering if a "includeexamples" directive might also be considered.
> 
> It often makes sense to use the same example to illustrate the use of different functions, or perhaps extend an example used to illustrate one function to illustrate another. One way to do this is simply to put
> 
> example(fnA)
> 
> in the \examples for fnB, but this is not particularly helpful for people reading the help pages as they either need to look at both help pages or run the example. The alternative is to maintain multiple copies of the same code, which is not ideal.
> 
> So it would be useful to be able to put
> 
> \includeexamples(fnA)
> 
> so that the code is replicated in fnB.Rd. Perhaps an include directive could do this anyway, but it might be useful to have a special directive for examples so that RCMD check is set up to only check the original example to save time (and unnecessary effort).

Thanks, that's a good suggestion.  My inclination would be towards just 
one type of \include; it could be surrounded by notation saying not to 
check it in all but one instance if the author wanted to save testing time.

Fair enough, but at the moment I don't think such notation exists - using \dontrun would skip the check, but would also mean the code would not get run by example(), leading to missing/broken examples. You could introduce a \dontcheck directive but this might be dangerous!

Heather

> On a related issue, it would be nice if source() had an option to print comments contained in the source file, so that example() and demo() could print out annotation.

Yes, this has been a long-standing need, but it's somewhat tricky 
because of the way source currently works:  it parses the whole file, 
then executes the parsed version.  The first step loses the comments, so 
you see a deparsed version when executing.  What I think it should do is 
have pointers back from the parsed version to the original source code, 
but that needs fairly low level changes.  This is some of the missing 
"infrastructure" I mentioned below.

Duncan Murdoch

> 
> Heather
> 
> Dr H Turner
> Research Assistant
> Dept. of Statistics
> The University of Warwick
> Coventry
> CV4 7AL
> 
> Tel: 024 76575870
> Fax: 024 7652 4532
> Url: www.warwick.ac.uk/go/heatherturner 
> 
>>>> <Mark.Bravington at csiro.au> 06/20/06 01:43am >>>
> [This is not about the feasibility of a "hints" function-- which would
> be incredibly useful, but perhaps very very hard to do-- but about some
> of the other documentation issues raised in Hadley's post and in
> Duncan's reply]
> 
> WRTO documentation & code together: for several years, I've successfully
> used the 'mvbutils' package to keep every function definition & its
> documentation together, editing them together in the same file--
> function first, then documentation in plain-text (basically the format
> you see if you use "vanilla help" inside R). Storage-wise, the
> documentation is just kept as an attribute of the function (with a print
> method that hides it by default)-- I also keep a text backup of the
> combination. Any text editor will do. When it's time to create a
> package, the Rd file is generated automatically.
> 
> For me, it's been extremely helpful to keep function & documentation
> together during editing-- it greatly increases the chance that I will
> actually update the doco when I change the code, rather than putting it
> off until I've forgotten what I did. Also, writing Rd format is a
> nightmare (again, personal opinion)-- being able to write plain-text
> makes the whole documentation thing bearable.
> 
> The above is not quite to the point of the original post, I think, which
> talks about storing the documentation as commented bits *inside* the
> function code. However, I'm not sure the latter is really desirable;
> there is some merit in forcing authors to write an explicit "Details" or
> "Description" section that is not just a paraphrase of programming
> comments, and such sections are unlikely to fit easily inside code. At
> any rate, I wouldn't want to have to interpret my *own* programming
> comments as a usage guide!
> 
> WRTO automatic "usage" sections: it is easy to write code to do this
> ('prompt', and there is also some in 'mvbutils'-- not sure if it's in
> the current release though) but at least as far as the "usage" section
> goes, I think people should be "vigorously encouraged" to write their
> own, showing as far as possible how one might actually *use* the
> function. For many functions, just duplicating the argument list is not
> helpful to the user-- a function can often be invoked in several
> different ways, with different arguments relevant to different
> invocations. I think it's good to show how this can be done in the
> "usage" section, with comments, rather than deferring all practical
> usage to "examples". For one thing, "usage" is near the top, and so
> gives a very quick reminder without having to scroll through the entire
> doco; for another, "usage" and "arguments" are visually adjacent,
> whereas "examples" can be widely separated from "arguments".
> 
> My general point here is: the documentating process should be as
> painless as possible, but not more so. Defaults that are likely to lead
> to unhelpful documentation are perhaps best avoided.
> For this general reason, I applaud R's fairly rigid documentation
> standards, even though I frequently curse them. (And I would like to see
> some bits more rigid, such as compulsory "how-to-use-this" documentation
> for each package!)
> 
> The next version of 'mvbutils' will include various tools for easy "live
> editing" and automated preparation of packages-- I've been using them
> for a while, but still have to get round to finishing the documentation
> ;) 
> 
> Mark Bravington
> CSIRO Mathematical & Information Sciences
> Marine Laboratory
> Castray Esplanade
> Hobart 7001
> TAS
> 
> ph (+61) 3 6232 5118
> fax (+61) 3 6232 5012
> mob (+61) 438 315 623
>  
> 
>> -----Original Message-----
>> From: r-devel-bounces at r-project.org 
>> [mailto:r-devel-bounces at r-project.org] On Behalf Of Duncan Murdoch
>> Sent: Tuesday, 20 June 2006 12:39 AM
>> To: hadley wickham; R-devel
>> Subject: Re: [Rd] [R] Function hints
>>
>> I've moved this from R-help to R-devel, where I think it is 
>> more appropriate, and interspersed comments below.
>>
>>
>>
>> On 6/19/2006 8:51 AM, hadley wickham wrote:
>>> One of the recurring themes in the recent UserR conference was that
>>> many people find it difficult to find the functions they need for a
>>> particular task.  Sandy Weisberg suggested a small idea he 
>> would like
>>> to see: a hints function that given an object, lists likely
>>> operations.  I've done my best to implement this function using the
>>> tools currently available in R, and my code is included at 
>> the bottom
>>> of this email (I hope that I haven't just duplicated 
>> something already
>>> present in R).  I think Sandy's idea is genuinely useful, 
>> even in the
>>> limited form provided by my implementation, and I have already
>>> discovered a few useful functions that I was unaware of.
>>>
>>> While developing and testing this function, I ran into a 
>> few problems
>>> which, I think, represent underlying problems with the current
>>> documentation system.  These are typified by the results of running
>>> hints on a object produced by glm (having class c("glm", "lm")).  I
>>> have outlined (very tersely) some possible solutions.  Please note
>>> that while these solutions are largely technological, the problem is
>>> at heart sociological: writing documentation is no easier 
>> (and perhaps
>>> much harder) than writing a scientific publication, but the rewards
>>> are fewer.
>>>
>>> Problems:
>>>
>>>  * Many functions share the same description (eg. head, tail).
>>> Solution: each rdoc file should only describe one method. Problem:
>>> Writing rdoc files is tedious, there is a lot of information
>>> duplicated between the code and the documenation (eg. the usage
>>> statement) and some functions share a lot of similar information.
>>> Solution: make it easier to write documentation (eg. documentation
>>> inline with code), and easier to include certain common descriptions
>>> in multiple methods (eg. new include command)
>> I think it's bad to document dissimilar functions in the same 
>> file, but 
>> similar related functions *should* be documented together.  Not doing 
>> this just adds to the burden of documenting them, and the risk of 
>> modifying only part of the documentation so that it is inconsistent. 
>> The user also gets the benefit of seeing a common description all at 
>> once, rather than having to decide whether to follow "See also" links.
>>
>> Your solutions would both be interesting on their own merits 
>> regardless 
>> of the above.  We did decide to work on preprocessing 
>> directives for .Rd 
>> files at the R core meetings; some sort of include directive may be 
>> possible.
>>
>> I don't think I would want complete documentation mixed with the 
>> original source, but it would certainly be interesting to 
>> have partial 
>> documentation there.  (Complete documentation is too long, and would 
>> make it harder to read the source without a dedicated editor 
>> that could 
>> hide it.  Though ESS users may see it as a reasonable requirement to 
>> have everyone use the same editor, I don't think it is.)  
>> However, this 
>> is a lot of work, depending on infrastructure that is not in place.
>>
>>>  * It is difficult to tell which functions are commonly
>>> used/important. Solution: break down by keywords. Problem: keywords
>>> are not useful at the moment.  Solution:  make better list 
>> of keywords
>>> available and encourage people to use it.  Problem: people won't
>>> unless there is a strong incentive, plus good keywording requires
>>> considerable expertise (especially in bulding up list).  This is
>>> probably insoluable unless one person systematically keywords all of
>>> the base packages.
>> I think it is worse than that.  There are concepts in 
>> packages that just 
>> don't arise in base R, and hence there would be no keywords for them 
>> other than "misc", even if someone redesigned the current system. 
>> Keywording is hard, and it's not clear to me how to do much 
>> better than 
>> we currently do.
>>
>> We do already have user-defined keywords (via \concept), but 
>> these are 
>> not widely used.
>>
>>>  * Some functions aren't documented (eg. simulate.lm, formula.glm) -
>>> typically, these are methods where the documentation is in the
>>> generic.  Solution: these methods should all be aliased to 
>> the generic
>>> (by default?), and R CMD check should be amended to check for this
>>> situation.  You could also argue that this is a deficiency with my
>>> function, and easily fixed by automatically referring to the generic
>>> if the specific isn't documented.
>> I'd say it's a deficiency of your function.  You might want 
>> to look at 
>> the code in get("?") and .helpForCall() to see how those 
>> functions work 
>> out things like
>>
>> ?simulate(x)
>>
>> where x is an lm object.  (But notice that .helpForCall is an 
>> undocumented internal function; don't depend on its implementation 
>> working forever).
>>
>>>  * It can't supply suggestions when there isn't an explicit method
>>> (ie. .default is used), this makes it pretty useless for basic
>>> vectors.  This may not really be a problem, as all possible 
>> operations
>>> are probably too numerous to list.
>>>
>>>  * Provides full name for function, when best practice is to use
>>> generic part only when calling function.  However, getting precise
>>> documentation may requires that full name. 
>> No, not if the call syntax above is used.
>>
>>   I do the best I can
>>> (returning the generic if specific is alias to a documentation file
>>> with the same method name), but this reflects a deeper problem that
>>> the name you should use when calling a function may be different to
>>> the name you use to get documentation.
>>>
>>>  * Can only display methods from currently loaded packages. 
>>  This is a
>>> shortcoming of the methods function, but I suspect it is 
>> difficult to
>>> find S3 methods without loading a package.
>>>
>>> Relatively trivial problems:
>>>
>>>  * Needs wide display to be effective.  Could be dealt with by
>>> breaking description in a sensible manner (there may 
>> already by R code
>>> to do this.  Please let me know if you know of any)
>> I think strwrap() may do what you want.
>>>  * Doesn't currently include S4 methods.  Solution: add 
>> some more code
>>> to wrap showMethods
>>>
>>>  * Personally, I think sentence case is more aesthetically pleasing
>>> (and more flexible) than title case.
>> It's quite hard to go from existing title case to sentence 
>> case, because 
>> we don't have any markup to indicate proper names.  One would 
>> think it 
>> would be easier to go in the opposite direction, but in fact the same 
>> problem arises:  "van Beethoven" for example, not "Van Beethoven".
>>
>>
>>>
>>> Hadley
>>>
>>>
>>> hints <- function(x) {
>> I don't like the name "hints".  I think we already have too many ways 
>> into the help system:
>>
>> help
>> ?
>> help.search
>> apropos
>> etc.?
>>
>> I like your function, but I'd rather see it attached to one of the 
>> existing help functions, probably help.search().  For example,
>>
>> help.search(x)
>>
>> could look for functions designed to work with the class of 
>> x, if it had 
>> one.  (There's some ambiguity here:  perhaps x contains a 
>> string, and I 
>> want help on that string.)
>>
>> Anyway, thanks for your efforts on this so far; I hope we end up with 
>> something that can make it into the next release.
>>
>> Duncan Murdoch
>>
>>> 	db <- eval(utils:::.hsearch_db())
>>> 	if (is.null(db)) {
>>> 		help.search("abcd!", rebuild=TRUE, agrep=FALSE)
>>> 		db <- eval(utils:::.hsearch_db())
>>> 	}
>>>
>>> 	base <- db$Base
>>> 	alias <- db$Aliases
>>> 	key <- db$Keywords
>>>
>>> 	m <- all.methods(class=class(x))
>>> 	m_id <- alias[match(m, alias[,1]), 2]
>>> 	keywords <- lapply(m_id, function(id) key[key[,2] %in% id, 1])
>>>
>>> 	f.names <- cbind(m, base[match(m_id, base[,3]), 4])
>>> 	f.names <- unlist(lapply(1:nrow(f.names), function(i) {
>>> 		if (is.na(f.names[i, 2])) return(f.names[i, 1])
>>> 		a <- methodsplit(f.names[i, 1])
>>> 		b <- methodsplit(f.names[i, 2])
>>> 		
>>> 		if (a[1] == b[1]) f.names[i, 2] else f.names[i, 
>> 1]		
>>> 	}))
>>> 	
>>> 	hints <- cbind(f.names, base[match(m_id, base[,3]), 5])
>>> 	hints <- hints[order(tolower(hints[,1])),]
>>> 	hints <- rbind(    c("--------", "---------------"), hints)
>>> 	rownames(hints) <- rep("", nrow(hints))
>>> 	colnames(hints) <- c("Function", "Task")
>>> 	hints[is.na(hints)] <- "(Unknown)"
>>> 	
>>> 	class(hints) <- "hints"
>>> 	hints
>>> }
>>>
>>> print.hints <- function(x, ...) print(unclass(x), quote=FALSE)
>>>
>>> all.methods <- function(classes) {
>>> 	methods <- do.call(rbind,lapply(classes, function(x) {
>>> 		m <- methods(class=x)
>>> 		t(sapply(as.vector(m), methodsplit)) #m[attr(m, 
>> "info")$visible]
>>> 	}))
>>> 	rownames(methods[!duplicated(methods[,1]),])
>>> }
>>>
>>> methodsplit <- function(m) {
>>> 	parts <- strsplit(m, "\\.")[[1]]
>>> 	if (length(parts) == 1) {
>>> 		c(name=m, class="")
>>> 	} else{
>>> 		c(name=paste(parts[-length(parts)], 
>> collapse="."), class=parts[length(parts)])
>>> 	}	
>>> }
>>>
>>> ______________________________________________
>>> R-help at stat.math.ethz.ch mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help 
>>> PLEASE do read the posting guide! 
>> http://www.R-project.org/posting-guide.html 
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel 
>>
>>
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From h.wickham at gmail.com  Tue Jun 20 15:01:28 2006
From: h.wickham at gmail.com (hadley wickham)
Date: Tue, 20 Jun 2006 15:01:28 +0200
Subject: [Rd] [R] Function hints
In-Reply-To: <4496B71B.1000101@stats.uwo.ca>
References: <f8e6ff050606190551o24a4573ak4454473b5dbf8199@mail.gmail.com>
	<4496B71B.1000101@stats.uwo.ca>
Message-ID: <f8e6ff050606200601s6bc5c3d2odc12fa7bbbc750dd@mail.gmail.com>

> I think it's bad to document dissimilar functions in the same file, but
> similar related functions *should* be documented together.  Not doing
> this just adds to the burden of documenting them, and the risk of
> modifying only part of the documentation so that it is inconsistent.
> The user also gets the benefit of seeing a common description all at
> once, rather than having to decide whether to follow "See also" links.

I agree - having some kind of include command would mitigate this
problem, but I think many documentation systems have struggled with
this (hard) problem and I'm not aware of any great solutions.

> Your solutions would both be interesting on their own merits regardless
> of the above.  We did decide to work on preprocessing directives for .Rd
> files at the R core meetings; some sort of include directive may be
> possible.

One model to follow might be xinclude
(http://www.w3.org/TR/xinclude/), although I don't really know much
about it apart from a dim awareness of its existance, and being an xml
schema it is probably over complicated.

> I don't think I would want complete documentation mixed with the
> original source, but it would certainly be interesting to have partial
> documentation there.  (Complete documentation is too long, and would
> make it harder to read the source without a dedicated editor that could
> hide it.  Though ESS users may see it as a reasonable requirement to
> have everyone use the same editor, I don't think it is.)  However, this
> is a lot of work, depending on infrastructure that is not in place.

I've attached an example of my own inline documentation system,
modelled closely on javadoc, which I use for documenting my packages.
It took me a few hours to whip up a (ruby) program to turn this into
rdoc files, and wouldn't require too much more time to make more
robust (and rewrite in R for wider distribution).

Having a lot of documentation in your source files does feel strange
at first, but I think you quickly get used to it, and functions with
more code than documentation soon start to look strange.

> I think it is worse than that.  There are concepts in packages that just
> don't arise in base R, and hence there would be no keywords for them
> other than "misc", even if someone redesigned the current system.
> Keywording is hard, and it's not clear to me how to do much better than
> we currently do.

I agree - apart from hiring a dedicated keyword person I can't see
anyway that this is going to improve significantly.

> >  * Some functions aren't documented (eg. simulate.lm, formula.glm) -
> > typically, these are methods where the documentation is in the
> > generic.  Solution: these methods should all be aliased to the generic
> > (by default?), and R CMD check should be amended to check for this
> > situation.  You could also argue that this is a deficiency with my
> > function, and easily fixed by automatically referring to the generic
> > if the specific isn't documented.
>
> I'd say it's a deficiency of your function.  You might want to look at
> the code in get("?") and .helpForCall() to see how those functions work
> out things like
>
> ?simulate(x)

Ok, I can fix my function fairly easily, what should I list - the name
of the function, or what to call to get help?  (or maybe if people
were more aware of the "?simulate(x)" form, it wouldn't be such a
problem.

> >  * Needs wide display to be effective.  Could be dealt with by
> > breaking description in a sensible manner (there may already by R code
> > to do this.  Please let me know if you know of any)
>
> I think strwrap() may do what you want.

That's it - I'll give that a go.

> >  * Personally, I think sentence case is more aesthetically pleasing
> > (and more flexible) than title case.
>
> It's quite hard to go from existing title case to sentence case, because
> we don't have any markup to indicate proper names.  One would think it
> would be easier to go in the opposite direction, but in fact the same
> problem arises:  "van Beethoven" for example, not "Van Beethoven".

Yes, which is why I don't do it automatically - it would be nice to
recommend using sentence case in the R developers guide.

Hadley

From h.wickham at gmail.com  Tue Jun 20 15:14:38 2006
From: h.wickham at gmail.com (hadley wickham)
Date: Tue, 20 Jun 2006 15:14:38 +0200
Subject: [Rd] [R] Function hints
In-Reply-To: <D79013E40FEF254AAF0D72DFC94F27482305C5@extas4-hba.tas.csiro.au>
References: <D79013E40FEF254AAF0D72DFC94F27482305C5@extas4-hba.tas.csiro.au>
Message-ID: <f8e6ff050606200614i5e06643dq3fe5150932887709@mail.gmail.com>

> For me, it's been extremely helpful to keep function & documentation
> together during editing-- it greatly increases the chance that I will
> actually update the doco when I change the code, rather than putting it
> off until I've forgotten what I did. Also, writing Rd format is a
> nightmare (again, personal opinion)-- being able to write plain-text
> makes the whole documentation thing bearable.

I agree!

> The above is not quite to the point of the original post, I think, which
> talks about storing the documentation as commented bits *inside* the
> function code. However, I'm not sure the latter is really desirable;
> there is some merit in forcing authors to write an explicit "Details" or
> "Description" section that is not just a paraphrase of programming
> comments, and such sections are unlikely to fit easily inside code. At
> any rate, I wouldn't want to have to interpret my *own* programming
> comments as a usage guide!

That is what I mean by inline documentation (in the same file),
probably need a better name.  Javadoc uses "doc comments in source
code", rdoc "Generates structured HTML documentation from Ruby
source.", perl: "embedded documentation", php: "standard
auto-documentation tool"...


> WRTO automatic "usage" sections: it is easy to write code to do this
> ('prompt', and there is also some in 'mvbutils'-- not sure if it's in
> the current release though) but at least as far as the "usage" section
> goes, I think people should be "vigorously encouraged" to write their
> own, showing as far as possible how one might actually *use* the
> function. For many functions, just duplicating the argument list is not
> helpful to the user-- a function can often be invoked in several
> different ways, with different arguments relevant to different
> invocations. I think it's good to show how this can be done in the

I write functions that have only one use, and I think having a
function that takes widely different sets of parameters depending on
usage to be a bit of a "code smell" (personally opinion only, of
course)

> My general point here is: the documentating process should be as
> painless as possible, but not more so. Defaults that are likely to lead
> to unhelpful documentation are perhaps best avoided.
> For this general reason, I applaud R's fairly rigid documentation
> standards, even though I frequently curse them. (And I would like to see
> some bits more rigid, such as compulsory "how-to-use-this" documentation
> for each package!)

I agree - making it easy for people to generate useless documentation
is no better than making it hard to generate good documentation.
Reducing the duplication between code and documentation (eg. argument
list) and having sensible defaults (eg. usage section) can go a long
way to making the process much less painful.

Hadley


From hb at stat.berkeley.edu  Tue Jun 20 15:29:13 2006
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Tue, 20 Jun 2006 15:29:13 +0200
Subject: [Rd] Documentation issues [Was: Function hints]
In-Reply-To: <4497D4C6.5010704@stats.uwo.ca>
References: <s497cb6d.032@liberator.csv.warwick.ac.uk>
	<4497D4C6.5010704@stats.uwo.ca>
Message-ID: <59d7961d0606200629x3e9b390h2399468fd2b41c9c@mail.gmail.com>

I've done a bit on this, but I've kept a low profile because it is
"under development".  In the R.oo package there is the Rdoc compiler,
which compiles Rdoc comments into Rd files.  It uses directives such
as @include "../incl/myExample.R" and @synopsis (extracting details
from the code), @keyword IO, @see "base::ls", @TRUE, @NULL, and so on.
 Many of these may be included in the Rd compiler directly.  I decided
on a preprocessor because that gave me much more flexibility.

PRO:
* Easy to maintain Rd files.
* Rdoc help can standalone files, cf. Rd files, or incorporated as
specially tagged R comments within the source code.
* Written in plain R (no perl scripts).
CONS:
* The "@" prefix was decided on a bit before 'methods' came around and
is a bit unfortunate now.  However, I wanted to keep it seperate from
the Rd tags \foo{}.
* Currently, little support for S4, because I don't use that too much.
* I've added more features to the Rdoc preprocessor as I needed them
myself; it is has grown for a small set or tags to quite a few and I
was never careful enough to design a real parser language.  The actual
code is quite ad hoc.

I have little time to clean up the code etc.  However, the
preprocessor works and at least it might give you some ideas if you
decided to extend the Rd language.

Cheers

Henrik


On 6/20/06, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
> On 6/20/2006 5:18 AM, Heather Turner wrote:
> > I would like to follow up on another one of the documentation issues raised in the discussion on function hints. Duncan mentioned that the R core were working on preprocessing directives for .Rd files, which could possibly include some sort of include directive. I was wondering if a "includeexamples" directive might also be considered.
> >
> > It often makes sense to use the same example to illustrate the use of different functions, or perhaps extend an example used to illustrate one function to illustrate another. One way to do this is simply to put
> >
> > example(fnA)
> >
> > in the \examples for fnB, but this is not particularly helpful for people reading the help pages as they either need to look at both help pages or run the example. The alternative is to maintain multiple copies of the same code, which is not ideal.
> >
> > So it would be useful to be able to put
> >
> > \includeexamples(fnA)
> >
> > so that the code is replicated in fnB.Rd. Perhaps an include directive could do this anyway, but it might be useful to have a special directive for examples so that RCMD check is set up to only check the original example to save time (and unnecessary effort).
>
> Thanks, that's a good suggestion.  My inclination would be towards just
> one type of \include; it could be surrounded by notation saying not to
> check it in all but one instance if the author wanted to save testing time.
>
> > On a related issue, it would be nice if source() had an option to print comments contained in the source file, so that example() and demo() could print out annotation.
>
> Yes, this has been a long-standing need, but it's somewhat tricky
> because of the way source currently works:  it parses the whole file,
> then executes the parsed version.  The first step loses the comments, so
> you see a deparsed version when executing.  What I think it should do is
> have pointers back from the parsed version to the original source code,
> but that needs fairly low level changes.  This is some of the missing
> "infrastructure" I mentioned below.
>
> Duncan Murdoch
>
> >
> > Heather
> >
> > Dr H Turner
> > Research Assistant
> > Dept. of Statistics
> > The University of Warwick
> > Coventry
> > CV4 7AL
> >
> > Tel: 024 76575870
> > Fax: 024 7652 4532
> > Url: www.warwick.ac.uk/go/heatherturner
> >
> >>>> <Mark.Bravington at csiro.au> 06/20/06 01:43am >>>
> > [This is not about the feasibility of a "hints" function-- which would
> > be incredibly useful, but perhaps very very hard to do-- but about some
> > of the other documentation issues raised in Hadley's post and in
> > Duncan's reply]
> >
> > WRTO documentation & code together: for several years, I've successfully
> > used the 'mvbutils' package to keep every function definition & its
> > documentation together, editing them together in the same file--
> > function first, then documentation in plain-text (basically the format
> > you see if you use "vanilla help" inside R). Storage-wise, the
> > documentation is just kept as an attribute of the function (with a print
> > method that hides it by default)-- I also keep a text backup of the
> > combination. Any text editor will do. When it's time to create a
> > package, the Rd file is generated automatically.
> >
> > For me, it's been extremely helpful to keep function & documentation
> > together during editing-- it greatly increases the chance that I will
> > actually update the doco when I change the code, rather than putting it
> > off until I've forgotten what I did. Also, writing Rd format is a
> > nightmare (again, personal opinion)-- being able to write plain-text
> > makes the whole documentation thing bearable.
> >
> > The above is not quite to the point of the original post, I think, which
> > talks about storing the documentation as commented bits *inside* the
> > function code. However, I'm not sure the latter is really desirable;
> > there is some merit in forcing authors to write an explicit "Details" or
> > "Description" section that is not just a paraphrase of programming
> > comments, and such sections are unlikely to fit easily inside code. At
> > any rate, I wouldn't want to have to interpret my *own* programming
> > comments as a usage guide!
> >
> > WRTO automatic "usage" sections: it is easy to write code to do this
> > ('prompt', and there is also some in 'mvbutils'-- not sure if it's in
> > the current release though) but at least as far as the "usage" section
> > goes, I think people should be "vigorously encouraged" to write their
> > own, showing as far as possible how one might actually *use* the
> > function. For many functions, just duplicating the argument list is not
> > helpful to the user-- a function can often be invoked in several
> > different ways, with different arguments relevant to different
> > invocations. I think it's good to show how this can be done in the
> > "usage" section, with comments, rather than deferring all practical
> > usage to "examples". For one thing, "usage" is near the top, and so
> > gives a very quick reminder without having to scroll through the entire
> > doco; for another, "usage" and "arguments" are visually adjacent,
> > whereas "examples" can be widely separated from "arguments".
> >
> > My general point here is: the documentating process should be as
> > painless as possible, but not more so. Defaults that are likely to lead
> > to unhelpful documentation are perhaps best avoided.
> > For this general reason, I applaud R's fairly rigid documentation
> > standards, even though I frequently curse them. (And I would like to see
> > some bits more rigid, such as compulsory "how-to-use-this" documentation
> > for each package!)
> >
> > The next version of 'mvbutils' will include various tools for easy "live
> > editing" and automated preparation of packages-- I've been using them
> > for a while, but still have to get round to finishing the documentation
> > ;)
> >
> > Mark Bravington
> > CSIRO Mathematical & Information Sciences
> > Marine Laboratory
> > Castray Esplanade
> > Hobart 7001
> > TAS
> >
> > ph (+61) 3 6232 5118
> > fax (+61) 3 6232 5012
> > mob (+61) 438 315 623
> >
> >
> >> -----Original Message-----
> >> From: r-devel-bounces at r-project.org
> >> [mailto:r-devel-bounces at r-project.org] On Behalf Of Duncan Murdoch
> >> Sent: Tuesday, 20 June 2006 12:39 AM
> >> To: hadley wickham; R-devel
> >> Subject: Re: [Rd] [R] Function hints
> >>
> >> I've moved this from R-help to R-devel, where I think it is
> >> more appropriate, and interspersed comments below.
> >>
> >>
> >>
> >> On 6/19/2006 8:51 AM, hadley wickham wrote:
> >>> One of the recurring themes in the recent UserR conference was that
> >>> many people find it difficult to find the functions they need for a
> >>> particular task.  Sandy Weisberg suggested a small idea he
> >> would like
> >>> to see: a hints function that given an object, lists likely
> >>> operations.  I've done my best to implement this function using the
> >>> tools currently available in R, and my code is included at
> >> the bottom
> >>> of this email (I hope that I haven't just duplicated
> >> something already
> >>> present in R).  I think Sandy's idea is genuinely useful,
> >> even in the
> >>> limited form provided by my implementation, and I have already
> >>> discovered a few useful functions that I was unaware of.
> >>>
> >>> While developing and testing this function, I ran into a
> >> few problems
> >>> which, I think, represent underlying problems with the current
> >>> documentation system.  These are typified by the results of running
> >>> hints on a object produced by glm (having class c("glm", "lm")).  I
> >>> have outlined (very tersely) some possible solutions.  Please note
> >>> that while these solutions are largely technological, the problem is
> >>> at heart sociological: writing documentation is no easier
> >> (and perhaps
> >>> much harder) than writing a scientific publication, but the rewards
> >>> are fewer.
> >>>
> >>> Problems:
> >>>
> >>>  * Many functions share the same description (eg. head, tail).
> >>> Solution: each rdoc file should only describe one method. Problem:
> >>> Writing rdoc files is tedious, there is a lot of information
> >>> duplicated between the code and the documenation (eg. the usage
> >>> statement) and some functions share a lot of similar information.
> >>> Solution: make it easier to write documentation (eg. documentation
> >>> inline with code), and easier to include certain common descriptions
> >>> in multiple methods (eg. new include command)
> >> I think it's bad to document dissimilar functions in the same
> >> file, but
> >> similar related functions *should* be documented together.  Not doing
> >> this just adds to the burden of documenting them, and the risk of
> >> modifying only part of the documentation so that it is inconsistent.
> >> The user also gets the benefit of seeing a common description all at
> >> once, rather than having to decide whether to follow "See also" links.
> >>
> >> Your solutions would both be interesting on their own merits
> >> regardless
> >> of the above.  We did decide to work on preprocessing
> >> directives for .Rd
> >> files at the R core meetings; some sort of include directive may be
> >> possible.
> >>
> >> I don't think I would want complete documentation mixed with the
> >> original source, but it would certainly be interesting to
> >> have partial
> >> documentation there.  (Complete documentation is too long, and would
> >> make it harder to read the source without a dedicated editor
> >> that could
> >> hide it.  Though ESS users may see it as a reasonable requirement to
> >> have everyone use the same editor, I don't think it is.)
> >> However, this
> >> is a lot of work, depending on infrastructure that is not in place.
> >>
> >>>  * It is difficult to tell which functions are commonly
> >>> used/important. Solution: break down by keywords. Problem: keywords
> >>> are not useful at the moment.  Solution:  make better list
> >> of keywords
> >>> available and encourage people to use it.  Problem: people won't
> >>> unless there is a strong incentive, plus good keywording requires
> >>> considerable expertise (especially in bulding up list).  This is
> >>> probably insoluable unless one person systematically keywords all of
> >>> the base packages.
> >> I think it is worse than that.  There are concepts in
> >> packages that just
> >> don't arise in base R, and hence there would be no keywords for them
> >> other than "misc", even if someone redesigned the current system.
> >> Keywording is hard, and it's not clear to me how to do much
> >> better than
> >> we currently do.
> >>
> >> We do already have user-defined keywords (via \concept), but
> >> these are
> >> not widely used.
> >>
> >>>  * Some functions aren't documented (eg. simulate.lm, formula.glm) -
> >>> typically, these are methods where the documentation is in the
> >>> generic.  Solution: these methods should all be aliased to
> >> the generic
> >>> (by default?), and R CMD check should be amended to check for this
> >>> situation.  You could also argue that this is a deficiency with my
> >>> function, and easily fixed by automatically referring to the generic
> >>> if the specific isn't documented.
> >> I'd say it's a deficiency of your function.  You might want
> >> to look at
> >> the code in get("?") and .helpForCall() to see how those
> >> functions work
> >> out things like
> >>
> >> ?simulate(x)
> >>
> >> where x is an lm object.  (But notice that .helpForCall is an
> >> undocumented internal function; don't depend on its implementation
> >> working forever).
> >>
> >>>  * It can't supply suggestions when there isn't an explicit method
> >>> (ie. .default is used), this makes it pretty useless for basic
> >>> vectors.  This may not really be a problem, as all possible
> >> operations
> >>> are probably too numerous to list.
> >>>
> >>>  * Provides full name for function, when best practice is to use
> >>> generic part only when calling function.  However, getting precise
> >>> documentation may requires that full name.
> >> No, not if the call syntax above is used.
> >>
> >>   I do the best I can
> >>> (returning the generic if specific is alias to a documentation file
> >>> with the same method name), but this reflects a deeper problem that
> >>> the name you should use when calling a function may be different to
> >>> the name you use to get documentation.
> >>>
> >>>  * Can only display methods from currently loaded packages.
> >>  This is a
> >>> shortcoming of the methods function, but I suspect it is
> >> difficult to
> >>> find S3 methods without loading a package.
> >>>
> >>> Relatively trivial problems:
> >>>
> >>>  * Needs wide display to be effective.  Could be dealt with by
> >>> breaking description in a sensible manner (there may
> >> already by R code
> >>> to do this.  Please let me know if you know of any)
> >> I think strwrap() may do what you want.
> >>>  * Doesn't currently include S4 methods.  Solution: add
> >> some more code
> >>> to wrap showMethods
> >>>
> >>>  * Personally, I think sentence case is more aesthetically pleasing
> >>> (and more flexible) than title case.
> >> It's quite hard to go from existing title case to sentence
> >> case, because
> >> we don't have any markup to indicate proper names.  One would
> >> think it
> >> would be easier to go in the opposite direction, but in fact the same
> >> problem arises:  "van Beethoven" for example, not "Van Beethoven".
> >>
> >>
> >>>
> >>> Hadley
> >>>
> >>>
> >>> hints <- function(x) {
> >> I don't like the name "hints".  I think we already have too many ways
> >> into the help system:
> >>
> >> help
> >> ?
> >> help.search
> >> apropos
> >> etc.?
> >>
> >> I like your function, but I'd rather see it attached to one of the
> >> existing help functions, probably help.search().  For example,
> >>
> >> help.search(x)
> >>
> >> could look for functions designed to work with the class of
> >> x, if it had
> >> one.  (There's some ambiguity here:  perhaps x contains a
> >> string, and I
> >> want help on that string.)
> >>
> >> Anyway, thanks for your efforts on this so far; I hope we end up with
> >> something that can make it into the next release.
> >>
> >> Duncan Murdoch
> >>
> >>>     db <- eval(utils:::.hsearch_db())
> >>>     if (is.null(db)) {
> >>>             help.search("abcd!", rebuild=TRUE, agrep=FALSE)
> >>>             db <- eval(utils:::.hsearch_db())
> >>>     }
> >>>
> >>>     base <- db$Base
> >>>     alias <- db$Aliases
> >>>     key <- db$Keywords
> >>>
> >>>     m <- all.methods(class=class(x))
> >>>     m_id <- alias[match(m, alias[,1]), 2]
> >>>     keywords <- lapply(m_id, function(id) key[key[,2] %in% id, 1])
> >>>
> >>>     f.names <- cbind(m, base[match(m_id, base[,3]), 4])
> >>>     f.names <- unlist(lapply(1:nrow(f.names), function(i) {
> >>>             if (is.na(f.names[i, 2])) return(f.names[i, 1])
> >>>             a <- methodsplit(f.names[i, 1])
> >>>             b <- methodsplit(f.names[i, 2])
> >>>
> >>>             if (a[1] == b[1]) f.names[i, 2] else f.names[i,
> >> 1]
> >>>     }))
> >>>
> >>>     hints <- cbind(f.names, base[match(m_id, base[,3]), 5])
> >>>     hints <- hints[order(tolower(hints[,1])),]
> >>>     hints <- rbind(    c("--------", "---------------"), hints)
> >>>     rownames(hints) <- rep("", nrow(hints))
> >>>     colnames(hints) <- c("Function", "Task")
> >>>     hints[is.na(hints)] <- "(Unknown)"
> >>>
> >>>     class(hints) <- "hints"
> >>>     hints
> >>> }
> >>>
> >>> print.hints <- function(x, ...) print(unclass(x), quote=FALSE)
> >>>
> >>> all.methods <- function(classes) {
> >>>     methods <- do.call(rbind,lapply(classes, function(x) {
> >>>             m <- methods(class=x)
> >>>             t(sapply(as.vector(m), methodsplit)) #m[attr(m,
> >> "info")$visible]
> >>>     }))
> >>>     rownames(methods[!duplicated(methods[,1]),])
> >>> }
> >>>
> >>> methodsplit <- function(m) {
> >>>     parts <- strsplit(m, "\\.")[[1]]
> >>>     if (length(parts) == 1) {
> >>>             c(name=m, class="")
> >>>     } else{
> >>>             c(name=paste(parts[-length(parts)],
> >> collapse="."), class=parts[length(parts)])
> >>>     }
> >>> }
> >>>
> >>> ______________________________________________
> >>> R-help at stat.math.ethz.ch mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide!
> >> http://www.R-project.org/posting-guide.html
> >>
> >> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
> >>
> >>
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From bolker at zoo.ufl.edu  Tue Jun 20 20:02:55 2006
From: bolker at zoo.ufl.edu (bolker at zoo.ufl.edu)
Date: Tue, 20 Jun 2006 20:02:55 +0200 (CEST)
Subject: [Rd] minor typos in ?which and ?apropos (PR#9013)
Message-ID: <20060620180255.5AF6A4D85F@slim.kubism.ku.dk>

 find . -name "*.Rd" | xargs grep "who's"

these should both be "whose"

./src/library/base/man/which.Rd:  a \code{\link{dim}} attribute), the
result is a matrix who's rows each

(also consider "whose rows are each the indices ..." rather than
"whose rows each are the indices ...")

./src/library/utils/man/apropos.Rd:  \item{mode}{character; if not
\code{"any"}, only objects who's

(under details "only those objects that are of mode \code{mode} ..."
but this is getting very grammatically picky indeed)

  Ben


-- 
620B Bartram Hall                            bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


From diez at kuicr.kyoto-u.ac.jp  Wed Jun 21 10:18:01 2006
From: diez at kuicr.kyoto-u.ac.jp (diez at kuicr.kyoto-u.ac.jp)
Date: Wed, 21 Jun 2006 10:18:01 +0200 (CEST)
Subject: [Rd] R-2.3.1 MacOSX segfault (PR#9014)
Message-ID: <20060621081801.EC79F4D862@slim.kubism.ku.dk>

Full_Name: Diego Diez
Version: 2.3.1
OS: Mac OSX 10.4.6
Submission from: (NULL) (133.103.101.222)


When running R in a X11 terminal, and trying to download a file with a wrong url
with method "internal", R segfaults. This does not happen when using R.app with
same method (??) or using "wget" method.

For example:

> download.file("http://cran.cnr.Berkeley.edu/bin/macosx/powerpc/contrib/2.3/foo.tgz",
"foo.tgz")      
trying URL 'http://cran.cnr.Berkeley.edu/bin/macosx/powerpc/contrib/2.3/foo.tgz'

 *** caught segfault ***
address 0x5f4d4550, cause 'memory not mapped'

Traceback:
 1: download.file("http://cran.cnr.Berkeley.edu/bin/macosx/powerpc/contrib/2.3/foo.tgz",
    "foo.tgz")

Possible actions:
1: abort (with core dump)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace
Selection: 

My session info.

> sessionInfo()                                                                
Version 2.3.1 (2006-06-01) 
powerpc-apple-darwin8.6.0 

attached base packages:
[1] "methods"   "stats"     "graphics"  "grDevices" "utils"     "datasets" 
[7] "base"     


Thanks.


From ripley at stats.ox.ac.uk  Wed Jun 21 10:57:44 2006
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Wed, 21 Jun 2006 10:57:44 +0200 (CEST)
Subject: [Rd] loading library from network share (PR#8982)
Message-ID: <20060621085744.B197C1C6B3@slim.kubism.ku.dk>

This is not supported: network shares are a Windows 'feature' and not part 
of R's conception of file paths.  The specific issue here is dirname(), 
but it is widespread.

You can always map shares to network drives, and that is common practice 
everywhere I have been which has extensive Windows networks.

We have changed the dirname case, but have no intention of supporting this 
sort of file path in general, as one of the design goals of the Windows 
port of R was to work as similarly to the Unix-alikes as possible (and to 
share as much code as possible).

On Wed, 14 Jun 2006, roy_kuraisa at merck.com wrote:

> Full_Name: roy kuraisa
> Version: 2.2.1
> OS: Windows XP SP2
> Submission from: (NULL) (155.91.28.232)
>
>
> When loading a library from network share drive (e.g., \\nnn\f1\f2\p1), when
> First.lib is called, the libray name contains "/" instead of "\" resulting in an
> invalid Windows filepath.
>
> Here's an example:
>> From R,
>> library(foo.lib="\\\\kodak\\research_genetics\\rlibs");
> Within First.lib,
> .First.lib <-function(lib, pkg)
> {
>    cat("lib name ",lib,"\n")
> }
> produces the output
>   lib name //kodak/research_genetics/rlibs
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From listproc at sun.soci.niu.edu  Wed Jun 21 15:42:40 2006
From: listproc at sun.soci.niu.edu (listproc at sun.soci.niu.edu)
Date: Wed, 21 Jun 2006 08:42:40 -0500 (CDT)
Subject: [Rd] Error Condition Re: Invalid request
Message-ID: <200606211342.k5LDgekM004242@sun.soci.niu.edu>

>This is a multi-part message in MIME format.

Unrecognized request THIS

Report any problems to 'critcrim at sun.soci.niu.edu'.
For a list of the available requests send a message to listproc at sun.soci.niu.edu
with a body consisting of nothing but the word HELP

PS: Any subsequent requests that you might have submitted have been ignored.


From danlipsitt at gmail.com  Wed Jun 21 17:37:36 2006
From: danlipsitt at gmail.com (Dan Lipsitt)
Date: Wed, 21 Jun 2006 11:37:36 -0400
Subject: [Rd] package compile error on RHEL x86_64 - FIXED
Message-ID: <b3a7efa90606210837t6c84a764qffec9627fb99fbd8@mail.gmail.com>

For the record: The error below has been resolved. As Professor Ripley
said, it was a compiler problem. Upgrading to a more recent gcc rpm
(gcc-3.4.5-2) and its dependencies made the errors go away.

Thanks,
Dan

On 6/14/06, Dan Lipsitt <danlipsitt at gmail.com> wrote:
> I am unable to install the gmp package on an x86_64 (Xeon) machine. I
> have had the same problem with other packages (eg. MCMCpack) as well.
> I am running Red Hat Enterprise Linux 4.1.
> I get the following error:
>
> g++ -shared -L/usr/local/lib64 -o gmp.so biginteger.o
> biginteger_operator.o bigintegerR.o bigrational.o
> bigrational_operator.o bigrationalR.o factor.o -L/usr/local/lib/ -lgmp
> /usr/bin/ld: /usr/lib/gcc/x86_64-redhat-linux/3.4.3/libstdc++.a(functexcept.o):
> relocation R_X86_64_32 against `std::bad_exception::~bad_exception()'
> can not be used when making a shared object; recompile with -fPIC
> /usr/lib/gcc/x86_64-redhat-linux/3.4.3/libstdc++.a: could not read
> symbols: Bad value
>
> However, I have found that if I run "R CMD SHLIB" twice in the src/
> directory, once to build the .o files, and once to link, I can build
> the shared library. If I run it on the .o files instead of the .cc
> files it uses gcc instead of g++. This appears to be the change that
> allows the lib to build. "-fPIC" seems to have nothing to do with it.
>
> So my question is: How do I get "R CMD INSTALL" to link with gcc
> instead of g++? I have tried adding "LINK.cc = $(LINK.c)" to the top
> of src/Makevars.in and then running "R CMD check" in the top dir of
> the package, but it uses g++ anyway. Any other fix or workaround
> suggestions would be appreciated as well.


From roy_kuraisa at merck.com  Wed Jun 21 18:37:05 2006
From: roy_kuraisa at merck.com (roy_kuraisa at merck.com)
Date: Wed, 21 Jun 2006 18:37:05 +0200 (CEST)
Subject: [Rd] loading library from network share (PR#8982)
Message-ID: <20060621163705.C76C317537@slim.kubism.ku.dk>

Thanks for the info.  

It's interesting that R can load the library using a network share naming
convention but that the library path has the "\" replaced with "/".  I guess
it's too much to ask for R not to muck with the file name provided (for a
variety of reasons).  My package works fine except for knowing the correct
library path.  

As for mapping a drive, that's not a good solution for us because it would
require users to always create a specific map drive (which on their desktop
may not be available; when we add packages to other network shares, requires
additional maps; etc).  Overall, it's not a very flexible solution for us.

My work around which, at least in my unique case, is a bit more flexible
(but a little more klunky) is to add code in .First.lib that substitutes
"\\" for "//" (because I need to read a cfg file in the "data" folder of the
package when it is loaded).


cheers, roy


-----Original Message-----
From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk] 
Sent: Wednesday, June 21, 2006 1:57 AM
To: Kuraisa, Roy J (Rosetta)
Cc: R-bugs at biostat.ku.dk
Subject: Re: [Rd] loading library from network share (PR#8982)


This is not supported: network shares are a Windows 'feature' and not part 
of R's conception of file paths.  The specific issue here is dirname(), 
but it is widespread.

You can always map shares to network drives, and that is common practice 
everywhere I have been which has extensive Windows networks.

We have changed the dirname case, but have no intention of supporting this 
sort of file path in general, as one of the design goals of the Windows 
port of R was to work as similarly to the Unix-alikes as possible (and to 
share as much code as possible).

On Wed, 14 Jun 2006, roy_kuraisa at merck.com wrote:

> Full_Name: roy kuraisa
> Version: 2.2.1
> OS: Windows XP SP2
> Submission from: (NULL) (155.91.28.232)
>
>
> When loading a library from network share drive (e.g., \\nnn\f1\f2\p1),
when
> First.lib is called, the libray name contains "/" instead of "\" resulting
in an
> invalid Windows filepath.
>
> Here's an example:
>> From R,
>> library(foo.lib="\\\\kodak\\research_genetics\\rlibs");
> Within First.lib,
> .First.lib <-function(lib, pkg)
> {
>    cat("lib name ",lib,"\n")
> }
> produces the output
>   lib name //kodak/research_genetics/rlibs
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Wed Jun 21 19:20:20 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 21 Jun 2006 18:20:20 +0100 (BST)
Subject: [Rd] loading library from network share (PR#8982)
In-Reply-To: <20060621163705.C76C317537@slim.kubism.ku.dk>
References: <20060621163705.C76C317537@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.64.0606211816100.31192@gannet.stats.ox.ac.uk>

On Wed, 21 Jun 2006, roy_kuraisa at merck.com wrote:

> Thanks for the info.
>
> It's interesting that R can load the library using a network share naming
> convention but that the library path has the "\" replaced with "/".  I guess
> it's too much to ask for R not to muck with the file name provided (for a
> variety of reasons).  My package works fine except for knowing the correct
> library path.
>
> As for mapping a drive, that's not a good solution for us because it would
> require users to always create a specific map drive (which on their desktop
> may not be available; when we add packages to other network shares, requires
> additional maps; etc).  Overall, it's not a very flexible solution for us.

It can easily be done via the domain controller: my sysadmins do it.

> My work around which, at least in my unique case, is a bit more flexible
> (but a little more klunky) is to add code in .First.lib that substitutes
> "\\" for "//" (because I need to read a cfg file in the "data" folder of the
> package when it is loaded).

This should work now that I have changed dirname (to do precisely that), 
but as I have no suitable test examples I cannot be sure.

>
>
> cheers, roy
>
>
> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> Sent: Wednesday, June 21, 2006 1:57 AM
> To: Kuraisa, Roy J (Rosetta)
> Cc: R-bugs at biostat.ku.dk
> Subject: Re: [Rd] loading library from network share (PR#8982)
>
>
> This is not supported: network shares are a Windows 'feature' and not part
> of R's conception of file paths.  The specific issue here is dirname(),
> but it is widespread.
>
> You can always map shares to network drives, and that is common practice
> everywhere I have been which has extensive Windows networks.
>
> We have changed the dirname case, but have no intention of supporting this
> sort of file path in general, as one of the design goals of the Windows
> port of R was to work as similarly to the Unix-alikes as possible (and to
> share as much code as possible).
>
> On Wed, 14 Jun 2006, roy_kuraisa at merck.com wrote:
>
>> Full_Name: roy kuraisa
>> Version: 2.2.1
>> OS: Windows XP SP2
>> Submission from: (NULL) (155.91.28.232)
>>
>>
>> When loading a library from network share drive (e.g., \\nnn\f1\f2\p1),
> when
>> First.lib is called, the libray name contains "/" instead of "\" resulting
> in an
>> invalid Windows filepath.
>>
>> Here's an example:
>>> From R,
>>> library(foo.lib="\\\\kodak\\research_genetics\\rlibs");
>> Within First.lib,
>> .First.lib <-function(lib, pkg)
>> {
>>    cat("lib name ",lib,"\n")
>> }
>> produces the output
>>   lib name //kodak/research_genetics/rlibs
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From maechler at stat.math.ethz.ch  Wed Jun 21 19:25:46 2006
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 21 Jun 2006 19:25:46 +0200
Subject: [Rd] is.Rs_own_BLAS() ?
Message-ID: <17561.33050.570856.455403@stat.math.ethz.ch>

Does anyone see a nice portable way to detect --- from inside R ---
if R is using its own BLAS or not?
{ And ideally, if not, can R find out which ``kind'' of
  (optimized) BLAS it does run? }

And the same for LAPACK ?

One way of getting a partial answer seems to be

Rs_own_LAPACK_and_BLAS <-
    list.files(file.path(R.home(), "lib"), pattern = "^libRlapack") > 0

 (where I'd be grateful for confirmation from a Mac and a Windows user
  that the above does work)


The reason for asking is a plan of a somewhat automated speed
comparison simulation which seems to depend quite a bit on the
architecture and the version of BLAS it uses.

Martin Maechler, ETH Zurich


From ripley at stats.ox.ac.uk  Wed Jun 21 19:35:48 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 21 Jun 2006 18:35:48 +0100 (BST)
Subject: [Rd] is.Rs_own_BLAS() ?
In-Reply-To: <17561.33050.570856.455403@stat.math.ethz.ch>
References: <17561.33050.570856.455403@stat.math.ethz.ch>
Message-ID: <Pine.LNX.4.64.0606211829170.31883@gannet.stats.ox.ac.uk>

On Wed, 21 Jun 2006, Martin Maechler wrote:

> Does anyone see a nice portable way to detect --- from inside R ---
> if R is using its own BLAS or not?
> { And ideally, if not, can R find out which ``kind'' of
>  (optimized) BLAS it does run? }
>
> And the same for LAPACK ?
>
> One way of getting a partial answer seems to be
>
> Rs_own_LAPACK_and_BLAS <-
>    list.files(file.path(R.home(), "lib"), pattern = "^libRlapack") > 0
>
> (where I'd be grateful for confirmation from a Mac and a Windows user
>  that the above does work)

Not possible: R on Windows has a plug-in BLAS, and Simon has asked for the 
same on MacOS X.  And the BLAS and LAPACK are DLLs stored in R_HOME/bin, 
not import libraries stored on R_HOME/lib (which no longer exists).

There are even architecture-specific Rblas.dll on CRAN (and have been for 
some years).

Brian

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Robert.McGehee at geodecapital.com  Thu Jun 22 01:13:27 2006
From: Robert.McGehee at geodecapital.com (McGehee, Robert)
Date: Wed, 21 Jun 2006 19:13:27 -0400
Subject: [Rd] Suggestion for all.equal.factor
Message-ID: <67DCA285A2D7754280D3B8E88EB548020C94686B@MSGBOSCLB2WIN.DMN1.FMR.COM>

R-Devel,
all.equal.factor gives a warning message when comparing vectors of
factors of different lengths. I suspect this to be unintentional as I
believe tests of valid factors should be comparable without a warning.

For example:
> x1 <- as.factor(LETTERS)
> x2 <- as.factor(LETTERS)[1:10]
> all.equal.factor(x1, x2)
[1] "Lengths: 26, 10"

[2] "Lengths (26, 10) differ (string compare on first 10)"

Warning message:
longer object length
	is not a multiple of shorter object length in: nax != nay 

If it is not improper to compare objects of different lengths, I would
like to propose the following patch that removes this warning without
otherwise changing the behavior of all.factor.equal.

-     if(n <- sum(nax != nay))
+     if(n <- length(nax) == length(nay) && sum(nax != nay))

My assumption here is that it is not meaningful to compare NA mismatches
on vectors of different lengths. Also, if the vectors do have different
lengths then this will be reported in the first line anyway.

Best,
Robert

> R.version
               _                         
platform       i386-pc-mingw32           
arch           i386                      
os             mingw32                   
system         i386, mingw32             
status                                   
major          2                         
minor          3.1                       
year           2006                      
month          06                        
day            01                        
svn rev        38247                     
language       R                         
version.string Version 2.3.1 (2006-06-01)

Robert McGehee
Quantitative Analyst
Geode Capital Management, LLC
53 State Street, 5th Floor | Boston, MA | 02109
Tel: 617/392-8396    Fax:617/476-6389
mailto:robert.mcgehee at geodecapital.com



This e-mail, and any attachments hereto, are intended for us...{{dropped}}


From dsamperi at DecisionSynergy.com  Thu Jun 22 07:07:52 2006
From: dsamperi at DecisionSynergy.com (Dominick Samperi)
Date: Thu, 22 Jun 2006 01:07:52 -0400
Subject: [Rd] .Call and data frames
Message-ID: <449A25A8.1070108@DecisionSynergy.com>

Hello,

I'm trying to fetch a data frame through the C API,
and have no problem doing this when all columns
are numbers, but when there is a column of
strings I have a problem. On the C-side the
function looks like:
SEXP myfunc(SEXP df),
and it is called with a dataframe from
the R side with:

.Call("myfunc", somedataframe)

On the C side (actually C++ side) I use code
like this:
SEXP colnames = getAttrib(df, R_NamesSymbol)
cname  = string(CHAR(STRING_ELT(colnames,i))
SEXP coldata = VECTOR_ELT(df,i) (data for i-th column)
if(isReal(colData))
    x = REAL(colData)[j];
else if(isInteger(colData))
    i = INTEGER(colData)[j];
else if(isString(colData))
    s = CHAR(STRING_ELT(colData,j))

The problem is that the last test (isString) never passes,
even when I pass in a frame for which one or more cols
contain character strings. When the column contains
strings the isVector(colData) test passes, but no matter
how I try to fetch the string data I get a seg fault. That
is, forcing CHAR(STRING_ELT(colData,j)) will
fault, and so will VECTOR_ELT(colData,0), even
though colData passes the isVector test.

Any ideas?
Thanks,
ds


From khansen at stat.Berkeley.EDU  Thu Jun 22 07:47:21 2006
From: khansen at stat.Berkeley.EDU (Kasper Daniel Hansen)
Date: Wed, 21 Jun 2006 22:47:21 -0700
Subject: [Rd] .Call and data frames
In-Reply-To: <449A25A8.1070108@DecisionSynergy.com>
References: <449A25A8.1070108@DecisionSynergy.com>
Message-ID: <A388CD13-4262-496B-BB53-AD7F98FA1FA0@stat.berkeley.edu>

While I do not know how to handle this on the C level, I know that  
you do not have characters in data frames, everything is factors  
instead. Internally they are coded as a number of integer levels,  
with the levels having labels (which is the character you see). So eg  
(in R):

 > test <- data.frame(tmp = letters[1:10])
 > test
    tmp
1    a
2    b
3    c
4    d
5    e
6    f
7    g
8    h
9    i
10   j
 > is.character(test$temp)
[1] FALSE
 > as.numeric(test$tmp) # The internal code of the factor
[1]  1  2  3  4  5  6  7  8  9 10
 > levels(test$tmp) # gives you the translation from internal code to  
actual label
[1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"

You probably need to convert the factor to a character, which I do  
not know how to do in C on top of my head, but which is probably not  
that difficult. At least now you should have some idea on where to look.

/Kasper


On Jun 21, 2006, at 10:07 PM, Dominick Samperi wrote:

> Hello,
>
> I'm trying to fetch a data frame through the C API,
> and have no problem doing this when all columns
> are numbers, but when there is a column of
> strings I have a problem. On the C-side the
> function looks like:
> SEXP myfunc(SEXP df),
> and it is called with a dataframe from
> the R side with:
>
> .Call("myfunc", somedataframe)
>
> On the C side (actually C++ side) I use code
> like this:
> SEXP colnames = getAttrib(df, R_NamesSymbol)
> cname  = string(CHAR(STRING_ELT(colnames,i))
> SEXP coldata = VECTOR_ELT(df,i) (data for i-th column)
> if(isReal(colData))
>     x = REAL(colData)[j];
> else if(isInteger(colData))
>     i = INTEGER(colData)[j];
> else if(isString(colData))
>     s = CHAR(STRING_ELT(colData,j))
>
> The problem is that the last test (isString) never passes,
> even when I pass in a frame for which one or more cols
> contain character strings. When the column contains
> strings the isVector(colData) test passes, but no matter
> how I try to fetch the string data I get a seg fault. That
> is, forcing CHAR(STRING_ELT(colData,j)) will
> fault, and so will VECTOR_ELT(colData,0), even
> though colData passes the isVector test.
>
> Any ideas?
> Thanks,
> ds
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Thu Jun 22 08:44:03 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 22 Jun 2006 07:44:03 +0100 (BST)
Subject: [Rd] .Call and data frames
In-Reply-To: <A388CD13-4262-496B-BB53-AD7F98FA1FA0@stat.berkeley.edu>
References: <449A25A8.1070108@DecisionSynergy.com>
	<A388CD13-4262-496B-BB53-AD7F98FA1FA0@stat.berkeley.edu>
Message-ID: <Pine.LNX.4.64.0606220739300.31442@gannet.stats.ox.ac.uk>

On Wed, 21 Jun 2006, Kasper Daniel Hansen wrote:

> While I do not know how to handle this on the C level, I know that
> you do not have characters in data frames, everything is factors
> instead.

Not so.  The default in data.frame() is to convert character vector to 
factors, but there are many ways to have character vectors in data frames, 
and this will become more common in 2.4.0 and later.

I suspect that this may well be Dominick's problem, though.

isVector is just a test of being one of the several types of vectors: 
VECTOR_ELT is only appropriate for a VECSXP (a R-level list) and for this 
sort of thing it is much safer and cleaner to test TYPEOF.

> Internally they are coded as a number of integer levels,
> with the levels having labels (which is the character you see). So eg
> (in R):
>
> > test <- data.frame(tmp = letters[1:10])
> > test
>    tmp
> 1    a
> 2    b
> 3    c
> 4    d
> 5    e
> 6    f
> 7    g
> 8    h
> 9    i
> 10   j
> > is.character(test$temp)
> [1] FALSE
> > as.numeric(test$tmp) # The internal code of the factor
> [1]  1  2  3  4  5  6  7  8  9 10
> > levels(test$tmp) # gives you the translation from internal code to
> actual label
> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
>
> You probably need to convert the factor to a character, which I do
> not know how to do in C on top of my head, but which is probably not
> that difficult. At least now you should have some idea on where to look.
>
> /Kasper
>
>
> On Jun 21, 2006, at 10:07 PM, Dominick Samperi wrote:
>
>> Hello,
>>
>> I'm trying to fetch a data frame through the C API,
>> and have no problem doing this when all columns
>> are numbers, but when there is a column of
>> strings I have a problem. On the C-side the
>> function looks like:
>> SEXP myfunc(SEXP df),
>> and it is called with a dataframe from
>> the R side with:
>>
>> .Call("myfunc", somedataframe)
>>
>> On the C side (actually C++ side) I use code
>> like this:
>> SEXP colnames = getAttrib(df, R_NamesSymbol)
>> cname  = string(CHAR(STRING_ELT(colnames,i))
>> SEXP coldata = VECTOR_ELT(df,i) (data for i-th column)
>> if(isReal(colData))
>>     x = REAL(colData)[j];
>> else if(isInteger(colData))
>>     i = INTEGER(colData)[j];
>> else if(isString(colData))
>>     s = CHAR(STRING_ELT(colData,j))
>>
>> The problem is that the last test (isString) never passes,
>> even when I pass in a frame for which one or more cols
>> contain character strings. When the column contains
>> strings the isVector(colData) test passes, but no matter
>> how I try to fetch the string data I get a seg fault. That
>> is, forcing CHAR(STRING_ELT(colData,j)) will
>> fault, and so will VECTOR_ELT(colData,0), even
>> though colData passes the isVector test.
>>
>> Any ideas?
>> Thanks,
>> ds
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From imosqueira at suk.azti.es  Thu Jun 22 12:26:57 2006
From: imosqueira at suk.azti.es (Iago Mosqueira)
Date: Thu, 22 Jun 2006 12:26:57 +0200
Subject: [Rd] NAMESPACE and bundle
References: <mailman.7.1150970403.13199.r-devel@r-project.org>
Message-ID: <5222D071B410AC489A62C2EBA183858A9E970C@SSRCorreo.azti.local>

Dear all,

I have a package that passes R CMD check, and shows no problems when using all its methods as declared in NAMESPACE. When this package is added to a bundle, which already consists of 5 packages, the examples in the Rd pages thta call a number of methods fail during the bundle check. These all passed when check is run on this package alone. Other packages in the bundle are very similar, in that all import all S4 classes and methods from the first package (using import("FLCore") in NAMESPACE) in the bundle, and export their own overloaded methods.

If I run check on a mini-bundle consisting only of the main package (FLCore) and this problematic package, it shows no problem. So I assume a problem of NAMESPACE conflict is the culprit, but experimnting with various package combinations, to try and isolate the conflict, has not worked. This package seems to conflict with every other secondary package.

I am dealing with internal dependencies by adding a require(FLCore) line to the .onLoad() call in zzz.R

Can anybody point me at what to look for? What could be the reason for this problem?

I hope the explanation was clear enough. Many thanks,


Iago


Dr. Iago Mosqueira

Marine Research Division
AZTI Tecnalia
Txatxarramendi Ugartea, z/g
48395 Sukarrieta - Bizkaia
Spain

+34 946 029 448
+34 946 029 400
+34 946 029 401 (Fax)

imosqueira at suk.azti.es
http://www.azti.es/


From hin-tak.leung at cimr.cam.ac.uk  Thu Jun 22 13:02:42 2006
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Thu, 22 Jun 2006 12:02:42 +0100
Subject: [Rd] .Call and data frames
In-Reply-To: <449A25A8.1070108@DecisionSynergy.com>
References: <449A25A8.1070108@DecisionSynergy.com>
Message-ID: <449A78D2.8000602@cimr.cam.ac.uk>

I think you want
        else if (TYPEOF(colData) == STRSXP)
... instead.

I don't know if this will convert from factors to string's,
but somewhere it probably involves something like this:
     PROTECT(colData = coerceVector(colData, STRSXP));

Dominick Samperi wrote:
> Hello,
> 
> I'm trying to fetch a data frame through the C API,
> and have no problem doing this when all columns
> are numbers, but when there is a column of
> strings I have a problem. On the C-side the
> function looks like:
> SEXP myfunc(SEXP df),
> and it is called with a dataframe from
> the R side with:
> 
> .Call("myfunc", somedataframe)
> 
> On the C side (actually C++ side) I use code
> like this:
> SEXP colnames = getAttrib(df, R_NamesSymbol)
> cname  = string(CHAR(STRING_ELT(colnames,i))
> SEXP coldata = VECTOR_ELT(df,i) (data for i-th column)
> if(isReal(colData))
>     x = REAL(colData)[j];
> else if(isInteger(colData))
>     i = INTEGER(colData)[j];
> else if(isString(colData))
>     s = CHAR(STRING_ELT(colData,j))
> 
> The problem is that the last test (isString) never passes,
> even when I pass in a frame for which one or more cols
> contain character strings. When the column contains
> strings the isVector(colData) test passes, but no matter
> how I try to fetch the string data I get a seg fault. That
> is, forcing CHAR(STRING_ELT(colData,j)) will
> fault, and so will VECTOR_ELT(colData,0), even
> though colData passes the isVector test.
> 
> Any ideas?
> Thanks,
> ds
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From hin-tak.leung at cimr.cam.ac.uk  Thu Jun 22 13:29:06 2006
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Thu, 22 Jun 2006 12:29:06 +0100
Subject: [Rd] .Call and data frames
In-Reply-To: <449A78D2.8000602@cimr.cam.ac.uk>
References: <449A25A8.1070108@DecisionSynergy.com>
	<449A78D2.8000602@cimr.cam.ac.uk>
Message-ID: <449A7F02.4080702@cimr.cam.ac.uk>

Hin-Tak Leung wrote:
> I think you want
>         else if (TYPEOF(colData) == STRSXP)
> ... instead.
> 
> I don't know if this will convert from factors to string's,
> but somewhere it probably involves something like this:
>      PROTECT(colData = coerceVector(colData, STRSXP));

FWIW, a factor consists of all these things internally:
(1) TYPEOF(colData)  is INTSXP
(2) attr(colData, "levels") exists and is a STRSXP type
(string representation for the levels).
(3) class(colData) = "factor"

if coerVector() doesn't do it, you can test for (3) in your C code,
and use the integer vector in (1) to index into the string vector in (2)
to regenerate the string vector manually.

Not all of this is correct, just an idea:

class = getAttrib(colData, R_ClassSymbol);
...
if (.../* do some test on class */...)
{
     levels = getAttrib(colData, "levels");
     PROTECT(back_to_str = allocVector(STRSXP, LENGTH(colData));
     for(int i = 0; i < LENGTH=(colData) ; i++)
     {
       SET_STRING_ELT(back_to_str, i,
           mkChar(STRING_ELT(levels, INTEGER(colData)[i])));
     }
}

> 
> Dominick Samperi wrote:
>> Hello,
>>
>> I'm trying to fetch a data frame through the C API,
>> and have no problem doing this when all columns
>> are numbers, but when there is a column of
>> strings I have a problem. On the C-side the
>> function looks like:
>> SEXP myfunc(SEXP df),
>> and it is called with a dataframe from
>> the R side with:
>>
>> .Call("myfunc", somedataframe)
>>
>> On the C side (actually C++ side) I use code
>> like this:
>> SEXP colnames = getAttrib(df, R_NamesSymbol)
>> cname  = string(CHAR(STRING_ELT(colnames,i))
>> SEXP coldata = VECTOR_ELT(df,i) (data for i-th column)
>> if(isReal(colData))
>>     x = REAL(colData)[j];
>> else if(isInteger(colData))
>>     i = INTEGER(colData)[j];
>> else if(isString(colData))
>>     s = CHAR(STRING_ELT(colData,j))
>>
>> The problem is that the last test (isString) never passes,
>> even when I pass in a frame for which one or more cols
>> contain character strings. When the column contains
>> strings the isVector(colData) test passes, but no matter
>> how I try to fetch the string data I get a seg fault. That
>> is, forcing CHAR(STRING_ELT(colData,j)) will
>> fault, and so will VECTOR_ELT(colData,0), even
>> though colData passes the isVector test.
>>
>> Any ideas?
>> Thanks,
>> ds
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From pgilbert at bank-banque-canada.ca  Thu Jun 22 15:47:03 2006
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 22 Jun 2006 09:47:03 -0400
Subject: [Rd] NAMESPACE and bundle
In-Reply-To: <5222D071B410AC489A62C2EBA183858A9E970C@SSRCorreo.azti.local>
References: <mailman.7.1150970403.13199.r-devel@r-project.org>
	<5222D071B410AC489A62C2EBA183858A9E970C@SSRCorreo.azti.local>
Message-ID: <449A9F57.5080300@bank-banque-canada.ca>

Iago

There is a problem that bundle checking works slightly differently than 
individual package checking in this regard.  I think it has to do with 
when the namespace gets registered, or something like that. As I recall, 
the work around is to explicitely require  the package in the test files 
for it. I.e. put
  require("pac")
in all the files in pac/tests.   If that does not work, let me know and 
I will look more carefully to find what I had to do.

Paul

Iago Mosqueira wrote:

>Dear all,
>
>I have a package that passes R CMD check, and shows no problems when using all its methods as declared in NAMESPACE. When this package is added to a bundle, which already consists of 5 packages, the examples in the Rd pages thta call a number of methods fail during the bundle check. These all passed when check is run on this package alone. Other packages in the bundle are very similar, in that all import all S4 classes and methods from the first package (using import("FLCore") in NAMESPACE) in the bundle, and export their own overloaded methods.
>
>If I run check on a mini-bundle consisting only of the main package (FLCore) and this problematic package, it shows no problem. So I assume a problem of NAMESPACE conflict is the culprit, but experimnting with various package combinations, to try and isolate the conflict, has not worked. This package seems to conflict with every other secondary package.
>
>I am dealing with internal dependencies by adding a require(FLCore) line to the .onLoad() call in zzz.R
>
>Can anybody point me at what to look for? What could be the reason for this problem?
>
>I hope the explanation was clear enough. Many thanks,
>
>
>Iago
>
>
>Dr. Iago Mosqueira
>
>Marine Research Division
>AZTI Tecnalia
>Txatxarramendi Ugartea, z/g
>48395 Sukarrieta - Bizkaia
>Spain
>
>+34 946 029 448
>+34 946 029 400
>+34 946 029 401 (Fax)
>
>imosqueira at suk.azti.es
>http://www.azti.es/
>
>  
>
>------------------------------------------------------------------------
>
>______________________________________________
>R-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel
>  
>
====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential inform...{{dropped}}


From imosqueira at suk.azti.es  Thu Jun 22 16:07:20 2006
From: imosqueira at suk.azti.es (Iago Mosqueira)
Date: Thu, 22 Jun 2006 16:07:20 +0200
Subject: [Rd] NAMESPACE and bundle
References: <mailman.7.1150970403.13199.r-devel@r-project.org><5222D071B410AC489A62C2EBA183858A9E970C@SSRCorreo.azti.local>
	<449A9F57.5080300@bank-banque-canada.ca>
Message-ID: <5222D071B410AC489A62C2EBA183858A9E971C@SSRCorreo.azti.local>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20060622/119ee3c9/attachment.pl 

From pgilbert at bank-banque-canada.ca  Thu Jun 22 16:37:32 2006
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 22 Jun 2006 10:37:32 -0400
Subject: [Rd] NAMESPACE and bundle
In-Reply-To: <5222D071B410AC489A62C2EBA183858A9E971C@SSRCorreo.azti.local>
References: <mailman.7.1150970403.13199.r-devel@r-project.org><5222D071B410AC489A62C2EBA183858A9E970C@SSRCorreo.azti.local>
	<449A9F57.5080300@bank-banque-canada.ca>
	<5222D071B410AC489A62C2EBA183858A9E971C@SSRCorreo.azti.local>
Message-ID: <449AAB2C.6000907@bank-banque-canada.ca>

Iago

I think your R code file  needs an .onLoad function.  Here is the 
..onLoad from my dse1 package which is in the dse bundle, as is tframe,  
along with comments which I had forgotten.

..onLoad  <- function(library, section) {
   .DSEflags(list(COMPILED=TRUE, DUP=TRUE))
   # next require is necessary for bundle check to run examples, 
   # but does not seem to be necessary when packages are not bundled
   require("tframe")
   invisible(TRUE)
   }


Hope this works,
Paul

Iago Mosqueira wrote:

> > -----Mensaje original-----
> > De: Paul Gilbert [mailto:pgilbert at bank-banque-canada.ca]
> > Enviado el: jue 22/06/2006 15:47
> > Para: Iago Mosqueira
> > CC: r-devel at r-project.org
> > Asunto: Re: [Rd] NAMESPACE and bundle
>
> > Iago
>
> > There is a problem that bundle checking works slightly differently than
> > individual package checking in this regard.  I think it has to do with
> > when the namespace gets registered, or something like that. As I recall,
> > the work around is to explicitely require  the package in the test files
> > for it. I.e. put
> >   require("pac")
> > in all the files in pac/tests.   If that does not work, let me know and
> > I will look more carefully to find what I had to do.
>
> > Paul
>
>
> Paul,
>
> Many thanks. The problem is in the examples contained in the Rd files, 
> where we do not explictely load the package, as we do in test files. 
> But it is only a problem for the examples in this package, not in the 
> others that share the same package dependencies. Can you see any 
> solution or something I else I should check for?
>
> Thanks
>
>
> Iago
>
>
> Iago Mosqueira wrote:
>
> >Dear all,
> >
> >I have a package that passes R CMD check, and shows no problems when 
> using all its methods as declared in NAMESPACE. When this package is 
> added to a bundle, which already consists of 5 packages, the examples 
> in the Rd pages thta call a number of methods fail during the bundle 
> check. These all passed when check is run on this package alone. Other 
> packages in the bundle are very similar, in that all import all S4 
> classes and methods from the first package (using import("FLCore") in 
> NAMESPACE) in the bundle, and export their own overloaded methods.
> >
> >If I run check on a mini-bundle consisting only of the main package 
> (FLCore) and this problematic package, it shows no problem. So I 
> assume a problem of NAMESPACE conflict is the culprit, but 
> experimnting with various package combinations, to try and isolate the 
> conflict, has not worked. This package seems to conflict with every 
> other secondary package.
> >
> >I am dealing with internal dependencies by adding a require(FLCore) 
> line to the .onLoad() call in zzz.R
> >
> >Can anybody point me at what to look for? What could be the reason 
> for this problem?
> >
> >I hope the explanation was clear enough. Many thanks,
> >
> >
> >Iago
> >
> >
> >Dr. Iago Mosqueira
> >
> >Marine Research Division
> >AZTI Tecnalia
> >Txatxarramendi Ugartea, z/g
> >48395 Sukarrieta - Bizkaia
> >Spain
> >
> >+34 946 029 448
> >+34 946 029 400
> >+34 946 029 401 (Fax)
> >
> >imosqueira at suk.azti.es
> >http://www.azti.es/
> >
> > 
> >
> >------------------------------------------------------------------------
> >
> >______________________________________________
> >R-devel at r-project.org mailing list
> >https://stat.ethz.ch/mailman/listinfo/r-devel
> > 
> >
> ====================================================================================
>
> La version fran?aise suit le texte anglais.
>
> ------------------------------------------------------------------------------------
>
> This email may contain privileged and/or confidential information, and 
> the Bank of
> Canada does not waive any related rights. Any distribution, use, or 
> copying of this
> email or the information it contains by other than the intended 
> recipient is
> unauthorized. If you received this email in error please delete it 
> immediately from
> your system and notify the sender promptly by email that you have done so.
>
> ------------------------------------------------------------------------------------
>
> Le pr?sent courriel peut contenir de l'information privil?gi?e ou 
> confidentielle.
> La Banque du Canada ne renonce pas aux droits qui s'y rapportent. 
> Toute diffusion,
> utilisation ou copie de ce courriel ou des renseignements qu'il 
> contient par une
> personne autre que le ou les destinataires d?sign?s est interdite. Si 
> vous recevez
> ce courriel par erreur, veuillez le supprimer imm?diatement et envoyer 
> sans d?lai ?
> l'exp?diteur un message ?lectronique pour l'aviser que vous avez 
> ?limin? de votre
> ordinateur toute copie du courriel re?u.
>
====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential information, and the Bank of
Canada does not waive any related rights. Any distribution, use, or copying of this
email or the information it contains by other than the intended recipient is
unauthorized. If you received this email in error please delete it immediately from
your system and notify the sender promptly by email that you have done so. 

------------------------------------------------------------------------------------

Le pr?sent courriel peut contenir de l'information privil?gi?e ou confidentielle.
La Banque du Canada ne renonce pas aux droits qui s'y rapportent. Toute diffusion,
utilisation ou copie de ce courriel ou des renseignements qu'il contient par une
personne autre que le ou les destinataires d?sign?s est interdite. Si vous recevez
ce courriel par erreur, veuillez le supprimer imm?diatement et envoyer sans d?lai ?
l'exp?diteur un message ?lectronique pour l'aviser que vous avez ?limin? de votre
ordinateur toute copie du courriel re?u.


From Robert.McGehee at geodecapital.com  Thu Jun 22 17:19:52 2006
From: Robert.McGehee at geodecapital.com (McGehee, Robert)
Date: Thu, 22 Jun 2006 11:19:52 -0400
Subject: [Rd] Suggestion for all.equal.factor
Message-ID: <67DCA285A2D7754280D3B8E88EB548020F8EF5AB@MSGBOSCLB2WIN.DMN1.FMR.COM>

Errata:
As Tony Plate pointed out to me, the patch I had meant to submit was
this:

if (length(nax) == length(nay) && (n <- sum(nax != nay)) 

as my previous patch simply assigned a TRUE or FALSE to n rather than
the count of NA mismatches.

Cheers,
Robert

-----Original Message-----
From: r-devel-bounces at r-project.org
[mailto:r-devel-bounces at r-project.org] On Behalf Of McGehee, Robert
Sent: Wednesday, June 21, 2006 7:13 PM
To: R-devel
Subject: [Rd] Suggestion for all.equal.factor

R-Devel,
all.equal.factor gives a warning message when comparing vectors of
factors of different lengths. I suspect this to be unintentional as I
believe tests of valid factors should be comparable without a warning.

For example:
> x1 <- as.factor(LETTERS)
> x2 <- as.factor(LETTERS)[1:10]
> all.equal.factor(x1, x2)
[1] "Lengths: 26, 10"

[2] "Lengths (26, 10) differ (string compare on first 10)"

Warning message:
longer object length
	is not a multiple of shorter object length in: nax != nay 

If it is not improper to compare objects of different lengths, I would
like to propose the following patch that removes this warning without
otherwise changing the behavior of all.factor.equal.

-     if(n <- sum(nax != nay))
+     if(n <- length(nax) == length(nay) && sum(nax != nay))

My assumption here is that it is not meaningful to compare NA mismatches
on vectors of different lengths. Also, if the vectors do have different
lengths then this will be reported in the first line anyway.

Best,
Robert

> R.version
               _                         
platform       i386-pc-mingw32           
arch           i386                      
os             mingw32                   
system         i386, mingw32             
status                                   
major          2                         
minor          3.1                       
year           2006                      
month          06                        
day            01                        
svn rev        38247                     
language       R                         
version.string Version 2.3.1 (2006-06-01)

Robert McGehee
Quantitative Analyst
Geode Capital Management, LLC
53 State Street, 5th Floor | Boston, MA | 02109
Tel: 617/392-8396    Fax:617/476-6389
mailto:robert.mcgehee at geodecapital.com



This e-mail, and any attachments hereto, are intended for
us...{{dropped}}

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel


From dsamperi at DecisionSynergy.com  Thu Jun 22 18:04:25 2006
From: dsamperi at DecisionSynergy.com (Dominick Samperi)
Date: Thu, 22 Jun 2006 12:04:25 -0400
Subject: [Rd] .Call and data frames
In-Reply-To: <449A7F02.4080702@cimr.cam.ac.uk>
References: <449A25A8.1070108@DecisionSynergy.com>
	<449A78D2.8000602@cimr.cam.ac.uk> <449A7F02.4080702@cimr.cam.ac.uk>
Message-ID: <449ABF89.7080604@DecisionSynergy.com>

Thanks for the tips,

This seems to work:
First test for isReal and isInteger.
If they fail, assume character/factor, and

PROECT(colData = coerceVector(colData,INTSXP); // Not STRSXP
SEXP names = getAttrib(colData, R_LevelsSymbol);
// names now contains the string names I was looking for.

ds

Hin-Tak Leung wrote:
> Hin-Tak Leung wrote:
>> I think you want
>>         else if (TYPEOF(colData) == STRSXP)
>> ... instead.
>>
>> I don't know if this will convert from factors to string's,
>> but somewhere it probably involves something like this:
>>      PROTECT(colData = coerceVector(colData, STRSXP));
>
> FWIW, a factor consists of all these things internally:
> (1) TYPEOF(colData)  is INTSXP
> (2) attr(colData, "levels") exists and is a STRSXP type
> (string representation for the levels).
> (3) class(colData) = "factor"
>
> if coerVector() doesn't do it, you can test for (3) in your C code,
> and use the integer vector in (1) to index into the string vector in (2)
> to regenerate the string vector manually.
>
> Not all of this is correct, just an idea:
>
> class = getAttrib(colData, R_ClassSymbol);
> ...
> if (.../* do some test on class */...)
> {
>     levels = getAttrib(colData, "levels");
>     PROTECT(back_to_str = allocVector(STRSXP, LENGTH(colData));
>     for(int i = 0; i < LENGTH=(colData) ; i++)
>     {
>       SET_STRING_ELT(back_to_str, i,
>           mkChar(STRING_ELT(levels, INTEGER(colData)[i])));
>     }
> }
>
>>
>> Dominick Samperi wrote:
>>> Hello,
>>>
>>> I'm trying to fetch a data frame through the C API,
>>> and have no problem doing this when all columns
>>> are numbers, but when there is a column of
>>> strings I have a problem. On the C-side the
>>> function looks like:
>>> SEXP myfunc(SEXP df),
>>> and it is called with a dataframe from
>>> the R side with:
>>>
>>> .Call("myfunc", somedataframe)
>>>
>>> On the C side (actually C++ side) I use code
>>> like this:
>>> SEXP colnames = getAttrib(df, R_NamesSymbol)
>>> cname  = string(CHAR(STRING_ELT(colnames,i))
>>> SEXP coldata = VECTOR_ELT(df,i) (data for i-th column)
>>> if(isReal(colData))
>>>     x = REAL(colData)[j];
>>> else if(isInteger(colData))
>>>     i = INTEGER(colData)[j];
>>> else if(isString(colData))
>>>     s = CHAR(STRING_ELT(colData,j))
>>>
>>> The problem is that the last test (isString) never passes,
>>> even when I pass in a frame for which one or more cols
>>> contain character strings. When the column contains
>>> strings the isVector(colData) test passes, but no matter
>>> how I try to fetch the string data I get a seg fault. That
>>> is, forcing CHAR(STRING_ELT(colData,j)) will
>>> fault, and so will VECTOR_ELT(colData,0), even
>>> though colData passes the isVector test.
>>>
>>> Any ideas?
>>> Thanks,
>>> ds
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From khansen at stat.Berkeley.EDU  Thu Jun 22 18:21:27 2006
From: khansen at stat.Berkeley.EDU (Kasper Daniel Hansen)
Date: Thu, 22 Jun 2006 09:21:27 -0700
Subject: [Rd] .Call and data frames
In-Reply-To: <449ABF89.7080604@DecisionSynergy.com>
References: <449A25A8.1070108@DecisionSynergy.com>
	<449A78D2.8000602@cimr.cam.ac.uk> <449A7F02.4080702@cimr.cam.ac.uk>
	<449ABF89.7080604@DecisionSynergy.com>
Message-ID: <4A9469B8-989A-4ABB-98F2-8FBD3E742035@stat.berkeley.edu>


On Jun 22, 2006, at 9:04 AM, Dominick Samperi wrote:

> Thanks for the tips,
>
> This seems to work:
> First test for isReal and isInteger.
> If they fail, assume character/factor, and
>
> PROECT(colData = coerceVector(colData,INTSXP); // Not STRSXP
> SEXP names = getAttrib(colData, R_LevelsSymbol);
> // names now contains the string names I was looking for.

But of course be aware that there is a map from colData to names  
(here I am guessing the C implementation mirrors what is happening in  
R), where you  have	

 > test = data.frame(tmp =c ("a","a","b"))
 > levels(test$tmp)
[1] "a" "b"

That is, you only have one occurrence of each level. So you need to  
take care of this remapping. Unless all you need is the different  
possible values.

And thanks to Brian Ripley who taught me something new about data  
frames: that it is indeed possible to have characters (although it is  
quite explicit in the man page on data.frame)

/Kasper

> ds
>
> Hin-Tak Leung wrote:
>> Hin-Tak Leung wrote:
>>> I think you want
>>>         else if (TYPEOF(colData) == STRSXP)
>>> ... instead.
>>>
>>> I don't know if this will convert from factors to string's,
>>> but somewhere it probably involves something like this:
>>>      PROTECT(colData = coerceVector(colData, STRSXP));
>>
>> FWIW, a factor consists of all these things internally:
>> (1) TYPEOF(colData)  is INTSXP
>> (2) attr(colData, "levels") exists and is a STRSXP type
>> (string representation for the levels).
>> (3) class(colData) = "factor"
>>
>> if coerVector() doesn't do it, you can test for (3) in your C code,
>> and use the integer vector in (1) to index into the string vector  
>> in (2)
>> to regenerate the string vector manually.
>>
>> Not all of this is correct, just an idea:
>>
>> class = getAttrib(colData, R_ClassSymbol);
>> ...
>> if (.../* do some test on class */...)
>> {
>>     levels = getAttrib(colData, "levels");
>>     PROTECT(back_to_str = allocVector(STRSXP, LENGTH(colData));
>>     for(int i = 0; i < LENGTH=(colData) ; i++)
>>     {
>>       SET_STRING_ELT(back_to_str, i,
>>           mkChar(STRING_ELT(levels, INTEGER(colData)[i])));
>>     }
>> }
>>
>>>
>>> Dominick Samperi wrote:
>>>> Hello,
>>>>
>>>> I'm trying to fetch a data frame through the C API,
>>>> and have no problem doing this when all columns
>>>> are numbers, but when there is a column of
>>>> strings I have a problem. On the C-side the
>>>> function looks like:
>>>> SEXP myfunc(SEXP df),
>>>> and it is called with a dataframe from
>>>> the R side with:
>>>>
>>>> .Call("myfunc", somedataframe)
>>>>
>>>> On the C side (actually C++ side) I use code
>>>> like this:
>>>> SEXP colnames = getAttrib(df, R_NamesSymbol)
>>>> cname  = string(CHAR(STRING_ELT(colnames,i))
>>>> SEXP coldata = VECTOR_ELT(df,i) (data for i-th column)
>>>> if(isReal(colData))
>>>>     x = REAL(colData)[j];
>>>> else if(isInteger(colData))
>>>>     i = INTEGER(colData)[j];
>>>> else if(isString(colData))
>>>>     s = CHAR(STRING_ELT(colData,j))
>>>>
>>>> The problem is that the last test (isString) never passes,
>>>> even when I pass in a frame for which one or more cols
>>>> contain character strings. When the column contains
>>>> strings the isVector(colData) test passes, but no matter
>>>> how I try to fetch the string data I get a seg fault. That
>>>> is, forcing CHAR(STRING_ELT(colData,j)) will
>>>> fault, and so will VECTOR_ELT(colData,0), even
>>>> though colData passes the isVector test.
>>>>
>>>> Any ideas?
>>>> Thanks,
>>>> ds
>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From jsignoro at hsph.harvard.edu  Thu Jun 22 21:38:30 2006
From: jsignoro at hsph.harvard.edu (jsignoro at hsph.harvard.edu)
Date: Thu, 22 Jun 2006 21:38:30 +0200 (CEST)
Subject: [Rd] weights in lm, glm (PR#9023)
Message-ID: <20060622193830.B53FF19A72@slim.kubism.ku.dk>

Full_Name: James Signorovitch
Version: 2.2.1
OS: WinXP
Submission from: (NULL) (134.174.182.203)


In the code below, fn1() and fn2() fail with the messages given in the comments.
 Strangely, fn2() fails for all data sets I've tried except for those with 100
rows.  
The same errors occur if glm() is used in place of lm(), or if R 2.1.1 is used
on a unix system.  Thanks for looking into this.  JS 

fn1 <- function(model, data)
{
	w <- runif(nrow(data));
	print(lm(model, data=data, weights=w));		
}

fn2 <- function(model, data)
{
	print(lm(model, data=data, weights=runif(nrow(data))));	
}

n = 101;

A <- data.frame(matrix(rnorm(2*n), n, 2));
names(A) <- c("x", "y");

# we can run the command
print(lm(y ~ x, data=A, weights=runif(nrow(A))));

# But fn1() generates the error message
# 
# Error in eval(expr, envir, enclos) : object "w" not found
#

fn1(y ~ x, data=A);

# fn2() generates the error message:
# Error in model.frame(formula, rownames, variables, varnames, extras,
extranames,  : 
#       variable lengths differ
#
#
# But fn2() works if n=100

fn2(y ~ x, data=A);

# note: the error in fn1() still occurs if w <- 1:nrow(data);


From tplate at acm.org  Thu Jun 22 22:19:54 2006
From: tplate at acm.org (Tony Plate)
Date: Thu, 22 Jun 2006 14:19:54 -0600
Subject: [Rd] loading library from network share (PR#8982)
In-Reply-To: <Pine.LNX.4.64.0606211816100.31192@gannet.stats.ox.ac.uk>
References: <20060621163705.C76C317537@slim.kubism.ku.dk>
	<Pine.LNX.4.64.0606211816100.31192@gannet.stats.ox.ac.uk>
Message-ID: <449AFB6A.6040002@acm.org>

I had thought that one needed to be careful using mapped network drive 
letters to access network shares under MS Windows -- the current mapping 
for drive letters can depend on who is current logged in.   For 
non-critical interactive sessions there should be no problems with using 
mapped network drive letters -- the dangerous scenario is running 
scheduled tasks on a server.

Microsoft XP docs say:
     Connecting to network drives

     Do not use a redirected drive for scheduled jobs
     that access the network. The Schedule service
     might not be able to access the redirected drive,
     or the redirected drive might not be present if a
     different user is logged on at the time the
     scheduled task runs. Instead, use UNC paths for
     scheduled jobs. For example:

     at 1:00pm my_backup \\server\share

     Do not use the following syntax, where x: is a
     connection made by the user:

     at 1:00pm my_backup x:

(this is from the documentation for the "At" command, 
http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/at.mspx?mfr=true
)

In addition to Prof Ripley's suggestion of setting up drive mapping 
using domain controllers, another workaround might be doing something 
like "net use x: \\server\share" in a scheduled task script.

-- Tony Plate


Prof Brian Ripley wrote:
> On Wed, 21 Jun 2006, roy_kuraisa at merck.com wrote:
> 
> 
>>Thanks for the info.
>>
>>It's interesting that R can load the library using a network share naming
>>convention but that the library path has the "\" replaced with "/".  I guess
>>it's too much to ask for R not to muck with the file name provided (for a
>>variety of reasons).  My package works fine except for knowing the correct
>>library path.
>>
>>As for mapping a drive, that's not a good solution for us because it would
>>require users to always create a specific map drive (which on their desktop
>>may not be available; when we add packages to other network shares, requires
>>additional maps; etc).  Overall, it's not a very flexible solution for us.
> 
> 
> It can easily be done via the domain controller: my sysadmins do it.
> 
> 
>>My work around which, at least in my unique case, is a bit more flexible
>>(but a little more klunky) is to add code in .First.lib that substitutes
>>"\\" for "//" (because I need to read a cfg file in the "data" folder of the
>>package when it is loaded).
> 
> 
> This should work now that I have changed dirname (to do precisely that), 
> but as I have no suitable test examples I cannot be sure.
> 
> 
>>
>>cheers, roy
>>
>>
>>-----Original Message-----
>>From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
>>Sent: Wednesday, June 21, 2006 1:57 AM
>>To: Kuraisa, Roy J (Rosetta)
>>Cc: R-bugs at biostat.ku.dk
>>Subject: Re: [Rd] loading library from network share (PR#8982)
>>
>>
>>This is not supported: network shares are a Windows 'feature' and not part
>>of R's conception of file paths.  The specific issue here is dirname(),
>>but it is widespread.
>>
>>You can always map shares to network drives, and that is common practice
>>everywhere I have been which has extensive Windows networks.
>>
>>We have changed the dirname case, but have no intention of supporting this
>>sort of file path in general, as one of the design goals of the Windows
>>port of R was to work as similarly to the Unix-alikes as possible (and to
>>share as much code as possible).
>>
>>On Wed, 14 Jun 2006, roy_kuraisa at merck.com wrote:
>>
>>
>>>Full_Name: roy kuraisa
>>>Version: 2.2.1
>>>OS: Windows XP SP2
>>>Submission from: (NULL) (155.91.28.232)
>>>
>>>
>>>When loading a library from network share drive (e.g., \\nnn\f1\f2\p1),
>>
>>when
>>
>>>First.lib is called, the libray name contains "/" instead of "\" resulting
>>
>>in an
>>
>>>invalid Windows filepath.
>>>
>>>Here's an example:
>>>
>>>>From R,
>>>>library(foo.lib="\\\\kodak\\research_genetics\\rlibs");
>>>
>>>Within First.lib,
>>>.First.lib <-function(lib, pkg)
>>>{
>>>   cat("lib name ",lib,"\n")
>>>}
>>>produces the output
>>>  lib name //kodak/research_genetics/rlibs
>>>
>>>______________________________________________
>>>R-devel at r-project.org mailing list
>>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>
>>
>>
>


From p.dalgaard at biostat.ku.dk  Thu Jun 22 22:43:04 2006
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 22 Jun 2006 22:43:04 +0200
Subject: [Rd] weights in lm, glm (PR#9023)
In-Reply-To: <20060622193830.B53FF19A72@slim.kubism.ku.dk>
References: <20060622193830.B53FF19A72@slim.kubism.ku.dk>
Message-ID: <x2ejxgj50n.fsf@turmalin.kubism.ku.dk>

jsignoro at hsph.harvard.edu writes:

> Full_Name: James Signorovitch
> Version: 2.2.1
> OS: WinXP
> Submission from: (NULL) (134.174.182.203)
> 
> 
> In the code below, fn1() and fn2() fail with the messages given in the comments.
>  Strangely, fn2() fails for all data sets I've tried except for those with 100
> rows.  
> The same errors occur if glm() is used in place of lm(), or if R 2.1.1 is used
> on a unix system.  Thanks for looking into this.  JS 
> 
> fn1 <- function(model, data)
> {
> 	w <- runif(nrow(data));
> 	print(lm(model, data=data, weights=w));		
> }
> 
> fn2 <- function(model, data)
> {
> 	print(lm(model, data=data, weights=runif(nrow(data))));	
> }
> 
> n = 101;
> 
> A <- data.frame(matrix(rnorm(2*n), n, 2));
> names(A) <- c("x", "y");
> 
> # we can run the command
> print(lm(y ~ x, data=A, weights=runif(nrow(A))));
> 
> # But fn1() generates the error message
> # 
> # Error in eval(expr, envir, enclos) : object "w" not found
> #
> 
> fn1(y ~ x, data=A);
> 
> # fn2() generates the error message:
> # Error in model.frame(formula, rownames, variables, varnames, extras,
> extranames,  : 
> #       variable lengths differ
> #
> #
> # But fn2() works if n=100
> 
> fn2(y ~ x, data=A);
> 
> # note: the error in fn1() still occurs if w <- 1:nrow(data);
> 

This is due to the concept of a model environment (which does not
contain w). This is a deliberate design, not a bug.

The rationale is a bit convoluted, but it ensures that

w <- runif(nrow(A))
fn1(y  ~ x + w, data=A)

picks up w from the global environment, not the evaluation frame of
fn1, and the convention is that weight, subset, and offset arguments
are picked from the same environment as the variables in the formula.

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From tlumley at u.washington.edu  Thu Jun 22 23:56:34 2006
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu, 22 Jun 2006 14:56:34 -0700 (PDT)
Subject: [Rd] weights in lm, glm (PR#9023)
In-Reply-To: <20060622193830.B53FF19A72@slim.kubism.ku.dk>
References: <20060622193830.B53FF19A72@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.64.0606221443320.31244@homer23.u.washington.edu>

On Thu, 22 Jun 2006, jsignoro at hsph.harvard.edu wrote:
>
> In the code below, fn1() and fn2() fail with the messages given in the comments.
> Strangely, fn2() fails for all data sets I've tried except for those with 100
> rows.
<snip>
> fn1 <- function(model, data)
> {
> 	w <- runif(nrow(data));
> 	print(lm(model, data=data, weights=w));
> }
>
> fn2 <- function(model, data)
> {
> 	print(lm(model, data=data, weights=runif(nrow(data))));
> }


This is the result of an interaction between a (IMO bad) design choice 
when lm and glm were first introduced in S-PLUS and a (IMO good) design 
choice more recently in R.

The bad design choice was that
   lm(model, data=data, weights=w)
is interpreted more like
   lm(model, data=data, weights=~w)

That is, as far as you can see from the outside, weights=w appears to be 
an ordinary argument passed by value but it is interpreted as if it were 
a reference by name to the data= argument.

This still wouldn't be too bad, except that if there is no element of 
data= called "w", lm() looks further. In S-PLUS it looks in the calling 
frame and then in the global workspace. In R it looks at the environment 
where the formula was defined.

Neither of these is necessarily what you expect, but people expect a wide 
range of incompatible things, so this isn't decisive.

There are at least two ways to get the result you want.  The simpler 
and cruder way is to make w a column of the data  frame. This is inefficient in memory if 
data is very large, and requires that you use a name that doesn't conflict 
with any variable that you already want in the model, eg.

   data$".weights."<-runif(nrow(data))
   lm(model, data=data,weights=.weights.)

The other approach is to set the environment of the formula to be the 
current environment. This will work as long as the formula doesn't refer 
to any variables in its original environment

    environment(model)<-environment()
    w<-runif(nrow(data))
    lm(model,data=data, weights=w)


> # But fn2() works if n=100

No, it just looks as though it does. I suspect you have a data frame 
called data, with 100 rows, in your workspace.

In a clean copy of R I get
> fn2(y ~ x, data=A);
Error in runif(n, min, max) : invalid arguments

 	-thomas


Thomas Lumley			Assoc. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle


From p.dalgaard at biostat.ku.dk  Fri Jun 23 01:02:53 2006
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 23 Jun 2006 01:02:53 +0200
Subject: [Rd] weights in lm, glm (PR#9023)
In-Reply-To: <Pine.LNX.4.64.0606221443320.31244@homer23.u.washington.edu>
References: <20060622193830.B53FF19A72@slim.kubism.ku.dk>
	<Pine.LNX.4.64.0606221443320.31244@homer23.u.washington.edu>
Message-ID: <x21wtgiyjm.fsf@turmalin.kubism.ku.dk>

Thomas Lumley <tlumley at u.washington.edu> writes:

> The other approach is to set the environment of the formula to be the 
> current environment. This will work as long as the formula doesn't refer 
> to any variables in its original environment
> 
>     environment(model)<-environment()
>     w<-runif(nrow(data))
>     lm(model,data=data, weights=w)

The cleanest way I can think of is

e <- new.env(parent=environment(model))
assign(".weight.", whatever, envir=e)
environment(model) <- e
lm(model, data=data, weights=.weight.)

(You could assign directly into environment(model), but that might
have side effects. Use a "strange" name so as not to clash with
variables in "data", or in environment(model))

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From denny at crosstab.com  Fri Jun 23 01:58:14 2006
From: denny at crosstab.com (denny at crosstab.com)
Date: Fri, 23 Jun 2006 01:58:14 +0200 (CEST)
Subject: [Rd] Error - Compiling R on a Sun V40Z - R/R-2.2.1 (PR#9024)
Message-ID: <20060622235814.D2D3A19950@slim.kubism.ku.dk>

configure: WARNING: dlfcn.h: present but cannot be compiled
configure: WARNING: dlfcn.h:     check for missing prerequisite headers?
configure: WARNING: dlfcn.h: see the Autoconf documentation
configure: WARNING: dlfcn.h:     section "Present But Cannot Be Compiled"
configure: WARNING: dlfcn.h: proceeding with the preprocessor's result
configure: WARNING: dlfcn.h: in the future, the compiler will take 
precedence
configure: WARNING:     ## ----------------------------------- ##
configure: WARNING:     ## Report this to r-bugs at R-project.org ##
configure: WARNING:     ## ----------------------------------- ##
checking for dlfcn.h... yes
-------------------------------------------------------------------------------------------------------------------------- 

LANG=C
LD_LIBRARY_PATH=/usr/sfw/lib:/usr/lib:/usr/local/lib:/usr/local/BerkeleyDB.4.4/lib
LIVE_BIN_DIR=/dbdev/bin/:/dbdev/3.0.0/
LIVE_DIR=/dbdev
LOGNAME=denny
MAIL=/var/mail//denny
MANPATH=/usr/sfw/man:/opt/sfw/pgsql/man::/usr/share/man:/usr/local/man
NAMS_LOGINS=/dbdev/logins
OPT_BIN_DIR=/usr/local/bin:/usr/sfw/bin
OPT_MAN_DIR=/usr/sfw/man:/opt/sfw/pgsql/man
PATH=/usr/ccs/bin:.:/dbdev/bin/:/dbdev/3.0.0/:/usr/local/bin:/usr/sfw/bin:/usr/bin:/opt/sfw/bin:/opt/sfw/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/usr/local/pgsql/bin

--------------------------------------------------------------------------------------------------------------------------
$ cat ./z
./configure --with-readline=no --without-recommended-packages
$ . ./z
checking build system type... i386-pc-solaris2.10
checking host system type... i386-pc-solaris2.10
loading site script './config.site'
loading build specific script './config.site'
checking for pwd... /usr/bin/pwd
checking whether builddir is srcdir... yes
checking for working aclocal... missing
checking for working autoconf... missing
checking for working automake... missing
checking for working autoheader... missing
checking for working makeinfo... found
checking for gawk... no
checking for mawk... no
checking for nawk... nawk
checking for egrep... egrep
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for bison... bison -y
checking for ar... ar
checking for a BSD-compatible install... tools/install-sh -c
checking for sed... /usr/xpg4/bin/sed
checking for less... /usr/bin/less
checking for perl... /usr/local/bin/perl
checking whether perl version is at least 5.004... yes
checking for dvips... no
checking for tex... no
checking for latex... no
configure: WARNING: you cannot build DVI versions of the R manuals
checking for makeindex... no
checking for pdftex... no
checking for pdflatex... no
configure: WARNING: you cannot build PDF versions of the R manuals
checking for makeinfo... /usr/sfw/bin/makeinfo
checking for unzip... /usr/bin/unzip
checking for zip... /usr/bin/zip
checking for gzip... /dbdev/bin//gzip
checking for firefox... no
checking for mozilla... /usr/sfw/bin/mozilla
using default browser ... /usr/sfw/bin/mozilla
checking for acroread... no
checking for acroread4... no
checking for xpdf... no
checking for gv... no
checking for gnome-gv... no
checking for ggv... /usr/bin/ggv
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files...
checking whether we are using the GNU C compiler... no
checking whether gcc accepts -g... no
checking for gcc option to accept ANSI C... none needed
checking how to run the C preprocessor... gcc -E
checking how to run the C preprocessor... gcc -E
checking for f95... no
checking for fort... no
checking for xlf95... no
checking for ifort... no
checking for ifc... no
checking for efc... no
checking for pgf95... no
checking for lf95... no
checking for gfortran... no
checking for ftn... no
checking for g95... no
checking for f90... no
checking for xlf90... no
checking for pgf90... no
checking for pghpf... no
checking for epcf90... no
checking for g77... g77
checking whether we are using the GNU Fortran 77 compiler... no
checking whether g77 accepts -g... no
checking for g++... g++
checking whether we are using the GNU C++ compiler... no
checking whether g++ accepts -g... no
checking how to run the C++ preprocessor... g++ -E
checking for a sed that does not truncate output... /usr/bin/sed
checking for non-GNU ld... /usr/ccs/bin/ld
checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
checking for /usr/ccs/bin/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/ccs/bin/nm -p
checking how to recognise dependent libraries... pass_all
checking for ANSI C header files... no
checking for sys/types.h... no
checking for sys/stat.h... no
checking for stdlib.h... no
checking for string.h... no
checking for memory.h... no
checking for strings.h... no
checking for inttypes.h... no
checking for stdint.h... no
checking for unistd.h... no
checking dlfcn.h usability... no
checking dlfcn.h presence... yes
configure: WARNING: dlfcn.h: present but cannot be compiled
configure: WARNING: dlfcn.h:     check for missing prerequisite headers?
configure: WARNING: dlfcn.h: see the Autoconf documentation
configure: WARNING: dlfcn.h:     section "Present But Cannot Be Compiled"
configure: WARNING: dlfcn.h: proceeding with the preprocessor's result
configure: WARNING: dlfcn.h: in the future, the compiler will take 
precedence
configure: WARNING:     ## ----------------------------------- ##
configure: WARNING:     ## Report this to r-bugs at R-project.org ##
configure: WARNING:     ## ----------------------------------- ##
checking for dlfcn.h... yes
checking the maximum length of command line arguments... 262144
checking command to parse /usr/ccs/bin/nm -p output from gcc object... 
failed
checking for objdir... .libs
checking for ranlib... (cached) ranlib
checking for strip... strip
checking if gcc static flag  works... yes
checking for gcc option to produce PIC... -KPIC
checking if gcc PIC flag -KPIC works... no
checking if gcc supports -c -o file.o... yes
checking whether the gcc linker (/usr/ccs/bin/ld) supports shared 
libraries... yes
checking dynamic linker characteristics... solaris2.10 ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... no
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
configure: creating libtool
appending configuration tag "CXX" to libtool
checking whether the g++ linker (/usr/ccs/bin/ld) supports shared 
libraries... yes
checking for g++ option to produce PIC...
checking if g++ supports -c -o file.o... yes
checking whether the g++ linker (/usr/ccs/bin/ld) supports shared 
libraries... yes
checking dynamic linker characteristics... solaris2.10 ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... no
appending configuration tag "F77" to libtool
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
checking for g77 option to produce PIC... -KPIC
checking if g77 PIC flag -KPIC works... no
checking if g77 supports -c -o file.o... yes
checking whether the g77 linker (/usr/ccs/bin/ld) supports shared 
libraries... yes
checking dynamic linker characteristics... solaris2.10 ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... no
checking whether makeinfo version is at least 4.7... yes
checking for cos in -lm... yes
checking for sin in -lm... yes
checking for dlopen in -ldl... yes
checking for ANSI C header files... (cached) no
checking whether time.h and sys/time.h may both be included... yes
checking for dirent.h that defines DIR... yes
checking for library containing opendir... none required
checking for sys/wait.h that is POSIX.1 compatible... yes
checking arpa/inet.h usability... yes
checking arpa/inet.h presence... yes
checking for arpa/inet.h... yes
checking dl.h usability... no
checking dl.h presence... no
checking for dl.h... no
checking for dlfcn.h... (cached) yes
checking elf.h usability... yes
checking elf.h presence... yes
checking for elf.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking floatingpoint.h usability... yes
checking floatingpoint.h presence... yes
checking for floatingpoint.h... yes
checking fpu_control.h usability... no
checking fpu_control.h presence... no
checking for fpu_control.h... no
checking grp.h usability... yes
checking grp.h presence... yes
checking for grp.h... yes
checking ieee754.h usability... no
checking ieee754.h presence... no
checking for ieee754.h... no
checking ieeefp.h usability... yes
checking ieeefp.h presence... yes
checking for ieeefp.h... yes
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking locale.h usability... yes
checking locale.h presence... yes
checking for locale.h... yes
checking netdb.h usability... yes
checking netdb.h presence... yes
checking for netdb.h... yes
checking netinet/in.h usability... yes
checking netinet/in.h presence... yes
checking for netinet/in.h... yes
checking pwd.h usability... yes
checking pwd.h presence... yes
checking for pwd.h... yes
checking for strings.h... (cached) no
checking sys/param.h usability... yes
checking sys/param.h presence... yes
checking for sys/param.h... yes
checking sys/select.h usability... yes
checking sys/select.h presence... yes
checking for sys/select.h... yes
checking sys/socket.h usability... yes
checking sys/socket.h presence... yes
checking for sys/socket.h... yes
checking for sys/stat.h... (cached) no
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking sys/times.h usability... yes
checking sys/times.h presence... yes
checking for sys/times.h... yes
checking sys/utsname.h usability... yes
checking sys/utsname.h presence... yes
checking for sys/utsname.h... yes
checking for unistd.h... (cached) no
checking errno.h usability... yes
checking errno.h presence... yes
checking for errno.h... yes
checking stdarg.h usability... yes
checking stdarg.h presence... yes
checking for stdarg.h... yes
checking for string.h... (cached) no
checking whether setjmp.h is POSIX.1 compatible... yes
checking for GNU C library with version >= 2... no
checking return type of signal handlers... void
checking for pid_t... no
checking for size_t... yes
checking whether SIZE_MAX is declared... yes
checking for blkcnt_t... no
checking for type of socket length... socklen_t *
checking whether byte ordering is bigendian... no
checking for an ANSI C-conforming const... yes
checking for inline... inline
checking for int... yes
checking size of int... 4
checking for long... yes
checking size of long... 4
checking for long long... yes
checking size of long long... 8
checking for long double... yes
checking size of long double... 12
checking whether we can compute C Make dependencies... yes, using gcc -M
checking whether gcc supports -c -o FILE.lo... yes
checking how to get verbose linking output from g77... -v
checking for Fortran libraries of g77...  -L/usr/ccs/lib -L/usr/lib 
-L/usr/local/lib 
-L/dska/local/bin/../lib/gcc-lib/i386-pc-solaris2.10/3.3.6 
-L/dska/local/bin/../lib/gcc-lib 
-L/usr/local/lib/gcc-lib/i386-pc-solaris2.10/3.3.6 -L/usr/ccs/bin 
-L/dska/local/bin/../lib/gcc-lib/i386-pc-solaris2.10/3.3.6/../../.. 
-L/usr/local/lib/gcc-lib/i386-pc-solaris2.10/3.3.6/../../.. -lfrtbegin 
-lg2c -lm -lgcc_s
checking how to get verbose linking output from gcc... -v
checking for C libraries of gcc...  -L/usr/ccs/lib -L/usr/lib 
-L/usr/local/lib 
-L/dska/local/bin/../lib/gcc-lib/i386-pc-solaris2.10/3.3.6 
-L/dska/local/bin/../lib/gcc-lib 
-L/usr/local/lib/gcc-lib/i386-pc-solaris2.10/3.3.6 -L/usr/ccs/bin 
-L/dska/local/bin/../lib/gcc-lib/i386-pc-solaris2.10/3.3.6/../../.. 
-L/usr/local/lib/gcc-lib/i386-pc-solaris2.10/3.3.6/../../.. -lgcc_eh
checking for dummy main to link with Fortran libraries... none
checking for Fortran name-mangling scheme... lower case, underscore, 
extra underscore
checking whether g77 appends underscores to external names... yes
checking whether mixed C/Fortran code can be run... yes
checking whether g77 and gcc agree on int and double... yes
checking whether g77 and gcc agree on double complex... yes
checking whether g77 supports -c -o FILE.lo... yes
checking whether g++ accepts -M for generating dependencies... yes
checking whether g++ supports -c -o FILE.lo... yes
checking whether C runtime needs -D__NO_MATH_INLINES... yes
checking for xmkmf... /usr/openwin/bin/xmkmf
checking for off_t... yes
checking for working alloca.h... yes
checking for alloca... yes
checking whether alloca is declared... yes
checking for access... yes
checking for chdir... yes
checking for expm1... yes
checking for fcntl... yes
checking for finite... yes
checking for fseeko... yes
checking for ftello... yes
checking for ftruncate... yes
checking for getcwd... yes
checking for getgrgid... yes
checking for getpwuid... yes
checking for getuid... yes
checking for hypot... yes
checking for isascii... yes
checking for log1p... yes
checking for matherr... yes
checking for mkdtemp... no
checking for mkfifo... yes
checking for popen... yes
checking for putenv... yes
checking for realpath... yes
checking for rint... yes
checking for setenv... yes
checking for strcoll... yes
checking for stat... yes
checking for strerror... yes
checking for strptime... yes
checking for symlink... yes
checking for system... yes
checking for times... yes
checking for unsetenv... yes
checking whether isfinite is declared... no
checking whether isnan is declared... yes
checking for finite... (cached) yes
checking for isnan... yes
checking whether isfinite is declared... (cached) no
checking whether isnan is declared... (cached) yes
checking whether you have IEEE 754 floating-point arithmetic... yes
checking for nl_langinfo and CODESET... yes
checking for acosh... yes
checking for asinh... yes
checking for atanh... yes
checking for snprintf... yes
checking for strdup... yes
checking for strncasecmp... yes
checking for vsnprintf... yes
checking whether acosh is declared... yes
checking whether asinh is declared... yes
checking whether atanh is declared... yes
checking whether snprintf is declared... yes
checking whether strdup is declared... no
checking whether strncasecmp is declared... no
checking whether vsnprintf is declared... yes
checking for library containing connect... -lsocket
checking for library containing gethostbyname... -lnsl
checking for library containing xdr_string... none required
checking for __setfpucw... no
checking for working calloc... yes
checking for working finite... yes
checking for working log... no
checking for working log1p... yes
checking for working strptime... yes
checking whether ftell works correctly on files opened for append... yes
checking whether C99 double complex is supported...
checking complex.h usability... yes
checking complex.h presence... yes
checking for complex.h... yes
checking for double complex... yes
checking for cexp... yes
checking for clog... yes
checking for csqrt... yes
checking for cpow... yes
checking for ccos... yes
checking for csin... yes
checking for ctan... yes
checking for cacos... yes
checking for casin... yes
checking for catan... yes
checking for ccosh... yes
checking for csinh... yes
checking for ctanh... yes
checking for cacosh... yes
checking for casinh... yes
checking for catanh... yes
checking whether C99 double complex is compatible with Rcomplex... no
no
checking for cblas_cdotu_sub in vecLib framework... no
checking for dgemm_... no
checking for ATL_xerbla in -latlas... no
checking for dgemm_ in -lblas... no
checking for dgemm_ in -lsunperf... no
checking for dgemm_ in -lblas... (cached) no
checking for dgemm_ in -lblas... (cached) no
checking wchar.h usability... yes
checking wchar.h presence... yes
checking for wchar.h... yes
checking wctype.h usability... yes
checking wctype.h presence... yes
checking for wctype.h... yes
checking for mbrtowc... yes
checking for mbstowcs... yes
checking for wcrtomb... yes
checking for wcscoll... yes
checking for wcsftime... yes
checking for wcstombs... yes
checking for wcswidth... yes
checking for wctrans... yes
checking for wcwidth... yes
checking whether wcwidth is declared... yes
checking whether wcswidth is declared... yes
checking for wctrans_t... yes
checking iconv.h usability... yes
checking iconv.h presence... yes
checking for iconv.h... yes
checking for iconv... yes
checking whether iconv() accepts "UTF-8" and "latin1"... no
checking for iconvlist... no
checking for X... libraries , headers
checking for gethostbyname... yes
checking for connect... yes
checking for remove... yes
checking for shmat... yes
checking for IceConnectionNumber in -lICE... yes
using X11 ... yes
checking for KeySym... yes
checking for CFStringGetSystemEncoding in CoreFoundation framework... no
checking for tclConfig.sh... no
checking for tclConfig.sh in library (sub)directories... 
/usr/local/lib/tclConfig.sh
checking for tkConfig.sh... no
checking for tkConfig.sh in library (sub)directories... no
checking /usr/local/include/tcl8.3/generic/tcl.h usability... no
checking /usr/local/include/tcl8.3/generic/tcl.h presence... no
checking for /usr/local/include/tcl8.3/generic/tcl.h... no
checking /usr/local/include/tcl8.3/tcl.h usability... no
checking /usr/local/include/tcl8.3/tcl.h presence... no
checking for /usr/local/include/tcl8.3/tcl.h... no
checking /usr/local/include/tcl.h usability... yes
checking /usr/local/include/tcl.h presence... yes
checking for /usr/local/include/tcl.h... yes
checking for tk.h... no
checking for BSD networking... yes
checking if jpeglib version >= 6b... yes
checking for jpeg_destroy_compress in -ljpeg... yes
checking for main in -lz... yes
checking if libpng version >= 1.0.5... yes
checking for png_create_write_struct in -lpng... yes
checking rpc/types.h usability... yes
checking rpc/types.h presence... yes
checking for rpc/types.h... yes
checking for rpc/xdr.h... yes
checking for XDR support... yes
checking whether zlib support needs to be compiled... yes
checking mmap support for zlib... yes
checking whether bzip2 support needs to be compiled... yes
checking whether PCRE support needs to be compiled... yes
checking whether leap seconds are treated according to POSIX... yes
checking for setitimer... yes
checking for lpr... no
checking for lp... lp
checking for paperconf... false
checking for java... /usr/bin/java
checking for javac... /usr/bin/javac
checking whether Java interpreter works... yes
checking for Java environment... in /usr/jdk/instances/jdk1.5.0/jre
checking whether NLS is requested... yes
checking whether make sets $(MAKE)... yes
checking for msgfmt... no
checking for gmsgfmt... :
checking for xgettext... no
checking for msgmerge... no
checking for strerror in -lcposix... no
checking for signed... yes
checking for inline... inline
checking for off_t... (cached) yes
checking for long long... (cached) yes
checking for long double... yes
checking for wchar_t... yes
checking for wint_t... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for intmax_t... yes
checking whether printf() supports POSIX/XSI format strings... yes
checking for stdlib.h... (cached) no
checking for unistd.h... (cached) no
checking for getpagesize... yes
checking for working mmap... yes
checking whether we are using the GNU C Library 2.1 or newer... no
checking whether integer division by zero raises SIGFPE... yes
checking for unsigned long long... yes
checking for inttypes.h... yes
checking whether the inttypes.h PRIxNN macros are broken... no
checking for stdint.h... (cached) no
checking for SIZE_MAX... yes
checking for stdint.h... (cached) no
checking for non-GNU ld... /usr/ccs/bin/ld
checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
checking for shared library run path origin... done
checking for ptrdiff_t... no
checking argz.h usability... no
checking argz.h presence... no
checking for argz.h... no
checking for limits.h... (cached) yes
checking for locale.h... (cached) yes
checking nl_types.h usability... yes
checking nl_types.h presence... yes
checking for nl_types.h... yes
checking malloc.h usability... yes
checking malloc.h presence... yes
checking for malloc.h... yes
checking stddef.h usability... yes
checking stddef.h presence... yes
checking for stddef.h... yes
checking for stdlib.h... (cached) no
checking for string.h... (cached) no
checking for unistd.h... (cached) no
checking for sys/param.h... (cached) yes
checking for asprintf... no
checking for fwprintf... yes
checking for getcwd... (cached) yes
checking for getegid... yes
checking for geteuid... yes
checking for getgid... yes
checking for getuid... (cached) yes
checking for mempcpy... no
checking for munmap... yes
checking for putenv... (cached) yes
checking for setenv... (cached) yes
checking for setlocale... yes
checking for snprintf... (cached) yes
checking for stpcpy... no
checking for strcasecmp... yes
checking for strdup... (cached) yes
checking for strtoul... yes
checking for tsearch... yes
checking for wcslen... yes
checking for __argz_count... no
checking for __argz_stringify... no
checking for __argz_next... no
checking for __fsetlocking... yes
checking whether _snprintf is declared... no
checking whether _snwprintf is declared... no
checking whether feof_unlocked is declared... no
checking whether fgets_unlocked is declared... no
checking whether getc_unlocked is declared... no
checking for iconv... yes
checking for iconv declaration...
         extern size_t iconv (iconv_t cd, const char * *inbuf, size_t 
*inbytesleft, char * *outbuf, size_t *outbytesleft);
checking for nl_langinfo and CODESET... (cached) yes
checking for LC_MESSAGES... yes
checking for bison... bison
checking version of bison... 1.875, ok
checking whether included gettext is requested... no
checking for GNU gettext in libc... no
checking for GNU gettext in libintl... no
checking whether to use NLS... yes
checking where the gettext function comes from... included intl directory
configure: creating ./config.status
config.status: creating Makeconf
config.status: creating Makefile
config.status: creating doc/Makefile
config.status: creating doc/html/Makefile
config.status: creating doc/html/search/Makefile
config.status: creating doc/manual/Makefile
config.status: creating etc/Makefile
config.status: creating etc/Makeconf
config.status: creating etc/Renviron
config.status: creating m4/Makefile
config.status: creating po/Makefile.in
config.status: creating share/Makefile
config.status: creating src/Makefile
config.status: creating src/appl/Makefile
config.status: creating src/extra/Makefile
config.status: creating src/extra/bzip2/Makefile
config.status: creating src/extra/intl/Makefile
config.status: creating src/extra/pcre/Makefile
config.status: creating src/extra/xdr/Makefile
config.status: creating src/extra/zlib/Makefile
config.status: creating src/include/Makefile
config.status: creating src/include/Rmath.h0
config.status: creating src/include/R_ext/Makefile
config.status: creating src/library/Recommended/Makefile
config.status: creating src/library/Makefile
config.status: creating src/library/base/DESCRIPTION
config.status: creating src/library/base/Makefile
config.status: creating src/library/datasets/DESCRIPTION
config.status: creating src/library/datasets/Makefile
config.status: creating src/library/graphics/DESCRIPTION
config.status: creating src/library/graphics/Makefile
config.status: creating src/library/grDevices/DESCRIPTION
config.status: creating src/library/grDevices/Makefile
config.status: creating src/library/grDevices/src/Makefile
config.status: creating src/library/grid/DESCRIPTION
config.status: creating src/library/grid/Makefile
config.status: creating src/library/grid/src/Makefile
config.status: creating src/library/methods/DESCRIPTION
config.status: creating src/library/methods/Makefile
config.status: creating src/library/methods/src/Makefile
config.status: creating src/library/profile/Makefile
config.status: creating src/library/stats/DESCRIPTION
config.status: creating src/library/stats/Makefile
config.status: creating src/library/stats/src/Makefile
config.status: creating src/library/stats4/DESCRIPTION
config.status: creating src/library/stats4/Makefile
config.status: creating src/library/splines/DESCRIPTION
config.status: creating src/library/splines/Makefile
config.status: creating src/library/splines/src/Makefile
config.status: creating src/library/tcltk/DESCRIPTION
config.status: creating src/library/tcltk/Makefile
config.status: creating src/library/tcltk/src/Makefile
config.status: creating src/library/tools/DESCRIPTION
config.status: creating src/library/tools/Makefile
config.status: creating src/library/tools/src/Makefile
config.status: creating src/library/utils/DESCRIPTION
config.status: creating src/library/utils/Makefile
config.status: creating src/main/Makefile
config.status: creating src/modules/Makefile
config.status: creating src/modules/X11/Makefile
config.status: creating src/modules/internet/Makefile
config.status: creating src/modules/lapack/Makefile
config.status: creating src/modules/vfonts/Makefile
config.status: creating src/nmath/Makefile
config.status: creating src/nmath/standalone/Makefile
config.status: creating src/scripts/Makefile
config.status: creating src/scripts/COMPILE
config.status: creating src/scripts/INSTALL
config.status: creating src/scripts/REMOVE
config.status: creating src/scripts/R.sh
config.status: creating src/scripts/Rdconv
config.status: creating src/scripts/Rprof
config.status: creating src/scripts/SHLIB
config.status: creating src/scripts/Sd2Rd
config.status: creating src/scripts/build
config.status: creating src/scripts/check
config.status: creating src/scripts/f77
config.status: creating src/unix/Makefile
config.status: creating tests/Makefile
config.status: creating tests/Embedding/Makefile
config.status: creating tests/Examples/Makefile
config.status: creating tests/Native/Makefile
config.status: creating tools/Makefile
config.status: creating src/include/config.h
config.status: src/include/config.h is unchanged
config.status: executing default-1 commands
config.status: creating po/POTFILES
config.status: creating po/Makefile
config.status: executing stamp-h commands

R is now configured for i386-pc-solaris2.10

  Source directory:          .
  Installation directory:    /usr/local

  C compiler:                gcc -D__NO_MATH_INLINES
  C++ compiler:              g++ 
  Fortran compiler:          g77 

  Interfaces supported:      X11
  External libraries:       
  Additional capabilities:   PNG, JPEG, MBCS, NLS
  Options enabled:           R profiling

  Recommended packages:      no

configure: WARNING: you cannot build DVI versions of the R manuals
configure: WARNING: you cannot build PDF versions of the R manuals
$
$ make
creating src/scripts/R.fe
config.status: creating src/include/config.h
config.status: src/include/config.h is unchanged
Rmath.h is unchanged
`libbz2.a' is up to date.
`libpcre.a' is up to date.
`libz.a' is up to date.
../../../src/include/libintl.h is unchanged
../../../include/libintl.h is unchanged
`localecharset.h' is up to date.
`libintl.a' is up to date.
`libappl.a' is up to date.
`libnmath.a' is up to date.
`libunix.a' is up to date.
gcc -I../../src/extra/zlib -I../../src/extra/bzip2 
-I../../src/extra/pcre   -I. -I../../src/include -I../../src/include 
-I/usr/local/include -DHAVE_CONFIG_H -D__NO_MATH_INLINES   -c 
connections.c -o connections.o
connections.c: In function `fifo_open':
connections.c:626: error: storage size of `sb' isn't known
connections.c:649: error: `S_IFIFO' undeclared (first use in this function)
connections.c:649: error: (Each undeclared identifier is reported only once
connections.c:649: error: for each function it appears in.)
*** Error code 1
make: Fatal error: Command failed for target `connections.o'
Current working directory /dska/dbdev/home/denny/R/R-2.2.1/src/main
*** Error code 1
The following command caused the error:
make install-bin-local
make: Fatal error: Command failed for target `R'
Current working directory /dska/dbdev/home/denny/R/R-2.2.1/src/main
*** Error code 1
The following command caused the error:
for d in scripts include extra appl nmath unix main modules library; do \
  (cd ${d} && make R) || exit 1; \
done
make: Fatal error: Command failed for target `R'
Current working directory /dska/dbdev/home/denny/R/R-2.2.1/src
*** Error code 1
The following command caused the error:
for d in m4 tools doc etc share src tests  po; do \
  (cd ${d} && make R) || exit 1; \
done
make: Fatal error: Command failed for target `R'
$


From ripley at stats.ox.ac.uk  Fri Jun 23 09:24:58 2006
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Fri, 23 Jun 2006 09:24:58 +0200 (CEST)
Subject: [Rd] Error - Compiling R on a Sun V40Z - R/R-2.2.1 (PR#9024)
Message-ID: <20060623072458.990A74D870@slim.kubism.ku.dk>

The current version of R is 2.3.1 patched.  You are asked not to report 
problems on obselete versions of R.

This seems to be gcc 3.3.6, also obselete.

On Fri, 23 Jun 2006, denny at crosstab.com wrote:

> configure: WARNING: dlfcn.h: present but cannot be compiled
> configure: WARNING: dlfcn.h:     check for missing prerequisite headers?
> configure: WARNING: dlfcn.h: see the Autoconf documentation
> configure: WARNING: dlfcn.h:     section "Present But Cannot Be Compiled"
> configure: WARNING: dlfcn.h: proceeding with the preprocessor's result
> configure: WARNING: dlfcn.h: in the future, the compiler will take
> precedence
> configure: WARNING:     ## ----------------------------------- ##
> configure: WARNING:     ## Report this to r-bugs at R-project.org ##
> configure: WARNING:     ## ----------------------------------- ##
> checking for dlfcn.h... yes

That seems to be a Solaris/gcc and not an R problem, though.

> --------------------------------------------------------------------------------------------------------------------------
>
> LANG=C
> LD_LIBRARY_PATH=/usr/sfw/lib:/usr/lib:/usr/local/lib:/usr/local/BerkeleyDB.4.4/lib
> LIVE_BIN_DIR=/dbdev/bin/:/dbdev/3.0.0/
> LIVE_DIR=/dbdev
> LOGNAME=denny
> MAIL=/var/mail//denny
> MANPATH=/usr/sfw/man:/opt/sfw/pgsql/man::/usr/share/man:/usr/local/man
> NAMS_LOGINS=/dbdev/logins
> OPT_BIN_DIR=/usr/local/bin:/usr/sfw/bin
> OPT_MAN_DIR=/usr/sfw/man:/opt/sfw/pgsql/man
> PATH=/usr/ccs/bin:.:/dbdev/bin/:/dbdev/3.0.0/:/usr/local/bin:/usr/sfw/bin:/usr/bin:/opt/sfw/bin:/opt/sfw/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/usr/local/pgsql/bin
>
> --------------------------------------------------------------------------------------------------------------------------
> $ cat ./z
> ./configure --with-readline=no --without-recommended-packages
> $ . ./z
> checking build system type... i386-pc-solaris2.10
> checking host system type... i386-pc-solaris2.10
> loading site script './config.site'
> loading build specific script './config.site'
> checking for pwd... /usr/bin/pwd
> checking whether builddir is srcdir... yes
> checking for working aclocal... missing
> checking for working autoconf... missing
> checking for working automake... missing
> checking for working autoheader... missing
> checking for working makeinfo... found
> checking for gawk... no
> checking for mawk... no
> checking for nawk... nawk
> checking for egrep... egrep
> checking whether ln -s works... yes
> checking for ranlib... ranlib
> checking for bison... bison -y
> checking for ar... ar
> checking for a BSD-compatible install... tools/install-sh -c
> checking for sed... /usr/xpg4/bin/sed
> checking for less... /usr/bin/less
> checking for perl... /usr/local/bin/perl
> checking whether perl version is at least 5.004... yes
> checking for dvips... no
> checking for tex... no
> checking for latex... no
> configure: WARNING: you cannot build DVI versions of the R manuals
> checking for makeindex... no
> checking for pdftex... no
> checking for pdflatex... no
> configure: WARNING: you cannot build PDF versions of the R manuals
> checking for makeinfo... /usr/sfw/bin/makeinfo
> checking for unzip... /usr/bin/unzip
> checking for zip... /usr/bin/zip
> checking for gzip... /dbdev/bin//gzip
> checking for firefox... no
> checking for mozilla... /usr/sfw/bin/mozilla
> using default browser ... /usr/sfw/bin/mozilla
> checking for acroread... no
> checking for acroread4... no
> checking for xpdf... no
> checking for gv... no
> checking for gnome-gv... no
> checking for ggv... /usr/bin/ggv
> checking for gcc... gcc
> checking for C compiler default output file name... a.out
> checking whether the C compiler works... yes
> checking whether we are cross compiling... no
> checking for suffix of executables...
> checking for suffix of object files...
> checking whether we are using the GNU C compiler... no
> checking whether gcc accepts -g... no
> checking for gcc option to accept ANSI C... none needed
> checking how to run the C preprocessor... gcc -E
> checking how to run the C preprocessor... gcc -E
> checking for f95... no
> checking for fort... no
> checking for xlf95... no
> checking for ifort... no
> checking for ifc... no
> checking for efc... no
> checking for pgf95... no
> checking for lf95... no
> checking for gfortran... no
> checking for ftn... no
> checking for g95... no
> checking for f90... no
> checking for xlf90... no
> checking for pgf90... no
> checking for pghpf... no
> checking for epcf90... no
> checking for g77... g77
> checking whether we are using the GNU Fortran 77 compiler... no
> checking whether g77 accepts -g... no
> checking for g++... g++
> checking whether we are using the GNU C++ compiler... no
> checking whether g++ accepts -g... no
> checking how to run the C++ preprocessor... g++ -E
> checking for a sed that does not truncate output... /usr/bin/sed
> checking for non-GNU ld... /usr/ccs/bin/ld
> checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
> checking for /usr/ccs/bin/ld option to reload object files... -r
> checking for BSD-compatible nm... /usr/ccs/bin/nm -p
> checking how to recognise dependent libraries... pass_all
> checking for ANSI C header files... no
> checking for sys/types.h... no
> checking for sys/stat.h... no
> checking for stdlib.h... no
> checking for string.h... no
> checking for memory.h... no
> checking for strings.h... no
> checking for inttypes.h... no
> checking for stdint.h... no
> checking for unistd.h... no
> checking dlfcn.h usability... no
> checking dlfcn.h presence... yes
> configure: WARNING: dlfcn.h: present but cannot be compiled
> configure: WARNING: dlfcn.h:     check for missing prerequisite headers?
> configure: WARNING: dlfcn.h: see the Autoconf documentation
> configure: WARNING: dlfcn.h:     section "Present But Cannot Be Compiled"
> configure: WARNING: dlfcn.h: proceeding with the preprocessor's result
> configure: WARNING: dlfcn.h: in the future, the compiler will take
> precedence
> configure: WARNING:     ## ----------------------------------- ##
> configure: WARNING:     ## Report this to r-bugs at R-project.org ##
> configure: WARNING:     ## ----------------------------------- ##
> checking for dlfcn.h... yes
> checking the maximum length of command line arguments... 262144
> checking command to parse /usr/ccs/bin/nm -p output from gcc object...
> failed
> checking for objdir... .libs
> checking for ranlib... (cached) ranlib
> checking for strip... strip
> checking if gcc static flag  works... yes
> checking for gcc option to produce PIC... -KPIC
> checking if gcc PIC flag -KPIC works... no
> checking if gcc supports -c -o file.o... yes
> checking whether the gcc linker (/usr/ccs/bin/ld) supports shared
> libraries... yes
> checking dynamic linker characteristics... solaris2.10 ld.so
> checking how to hardcode library paths into programs... immediate
> checking whether stripping libraries is possible... no
> checking if libtool supports shared libraries... yes
> checking whether to build shared libraries... yes
> checking whether to build static libraries... no
> configure: creating libtool
> appending configuration tag "CXX" to libtool
> checking whether the g++ linker (/usr/ccs/bin/ld) supports shared
> libraries... yes
> checking for g++ option to produce PIC...
> checking if g++ supports -c -o file.o... yes
> checking whether the g++ linker (/usr/ccs/bin/ld) supports shared
> libraries... yes
> checking dynamic linker characteristics... solaris2.10 ld.so
> checking how to hardcode library paths into programs... immediate
> checking whether stripping libraries is possible... no
> appending configuration tag "F77" to libtool
> checking if libtool supports shared libraries... yes
> checking whether to build shared libraries... yes
> checking whether to build static libraries... no
> checking for g77 option to produce PIC... -KPIC
> checking if g77 PIC flag -KPIC works... no
> checking if g77 supports -c -o file.o... yes
> checking whether the g77 linker (/usr/ccs/bin/ld) supports shared
> libraries... yes
> checking dynamic linker characteristics... solaris2.10 ld.so
> checking how to hardcode library paths into programs... immediate
> checking whether stripping libraries is possible... no
> checking whether makeinfo version is at least 4.7... yes
> checking for cos in -lm... yes
> checking for sin in -lm... yes
> checking for dlopen in -ldl... yes
> checking for ANSI C header files... (cached) no
> checking whether time.h and sys/time.h may both be included... yes
> checking for dirent.h that defines DIR... yes
> checking for library containing opendir... none required
> checking for sys/wait.h that is POSIX.1 compatible... yes
> checking arpa/inet.h usability... yes
> checking arpa/inet.h presence... yes
> checking for arpa/inet.h... yes
> checking dl.h usability... no
> checking dl.h presence... no
> checking for dl.h... no
> checking for dlfcn.h... (cached) yes
> checking elf.h usability... yes
> checking elf.h presence... yes
> checking for elf.h... yes
> checking fcntl.h usability... yes
> checking fcntl.h presence... yes
> checking for fcntl.h... yes
> checking floatingpoint.h usability... yes
> checking floatingpoint.h presence... yes
> checking for floatingpoint.h... yes
> checking fpu_control.h usability... no
> checking fpu_control.h presence... no
> checking for fpu_control.h... no
> checking grp.h usability... yes
> checking grp.h presence... yes
> checking for grp.h... yes
> checking ieee754.h usability... no
> checking ieee754.h presence... no
> checking for ieee754.h... no
> checking ieeefp.h usability... yes
> checking ieeefp.h presence... yes
> checking for ieeefp.h... yes
> checking limits.h usability... yes
> checking limits.h presence... yes
> checking for limits.h... yes
> checking locale.h usability... yes
> checking locale.h presence... yes
> checking for locale.h... yes
> checking netdb.h usability... yes
> checking netdb.h presence... yes
> checking for netdb.h... yes
> checking netinet/in.h usability... yes
> checking netinet/in.h presence... yes
> checking for netinet/in.h... yes
> checking pwd.h usability... yes
> checking pwd.h presence... yes
> checking for pwd.h... yes
> checking for strings.h... (cached) no
> checking sys/param.h usability... yes
> checking sys/param.h presence... yes
> checking for sys/param.h... yes
> checking sys/select.h usability... yes
> checking sys/select.h presence... yes
> checking for sys/select.h... yes
> checking sys/socket.h usability... yes
> checking sys/socket.h presence... yes
> checking for sys/socket.h... yes
> checking for sys/stat.h... (cached) no
> checking sys/time.h usability... yes
> checking sys/time.h presence... yes
> checking for sys/time.h... yes
> checking sys/times.h usability... yes
> checking sys/times.h presence... yes
> checking for sys/times.h... yes
> checking sys/utsname.h usability... yes
> checking sys/utsname.h presence... yes
> checking for sys/utsname.h... yes
> checking for unistd.h... (cached) no
> checking errno.h usability... yes
> checking errno.h presence... yes
> checking for errno.h... yes
> checking stdarg.h usability... yes
> checking stdarg.h presence... yes
> checking for stdarg.h... yes
> checking for string.h... (cached) no
> checking whether setjmp.h is POSIX.1 compatible... yes
> checking for GNU C library with version >= 2... no
> checking return type of signal handlers... void
> checking for pid_t... no
> checking for size_t... yes
> checking whether SIZE_MAX is declared... yes
> checking for blkcnt_t... no
> checking for type of socket length... socklen_t *
> checking whether byte ordering is bigendian... no
> checking for an ANSI C-conforming const... yes
> checking for inline... inline
> checking for int... yes
> checking size of int... 4
> checking for long... yes
> checking size of long... 4
> checking for long long... yes
> checking size of long long... 8
> checking for long double... yes
> checking size of long double... 12
> checking whether we can compute C Make dependencies... yes, using gcc -M
> checking whether gcc supports -c -o FILE.lo... yes
> checking how to get verbose linking output from g77... -v
> checking for Fortran libraries of g77...  -L/usr/ccs/lib -L/usr/lib
> -L/usr/local/lib
> -L/dska/local/bin/../lib/gcc-lib/i386-pc-solaris2.10/3.3.6
> -L/dska/local/bin/../lib/gcc-lib
> -L/usr/local/lib/gcc-lib/i386-pc-solaris2.10/3.3.6 -L/usr/ccs/bin
> -L/dska/local/bin/../lib/gcc-lib/i386-pc-solaris2.10/3.3.6/../../..
> -L/usr/local/lib/gcc-lib/i386-pc-solaris2.10/3.3.6/../../.. -lfrtbegin
> -lg2c -lm -lgcc_s
> checking how to get verbose linking output from gcc... -v
> checking for C libraries of gcc...  -L/usr/ccs/lib -L/usr/lib
> -L/usr/local/lib
> -L/dska/local/bin/../lib/gcc-lib/i386-pc-solaris2.10/3.3.6
> -L/dska/local/bin/../lib/gcc-lib
> -L/usr/local/lib/gcc-lib/i386-pc-solaris2.10/3.3.6 -L/usr/ccs/bin
> -L/dska/local/bin/../lib/gcc-lib/i386-pc-solaris2.10/3.3.6/../../..
> -L/usr/local/lib/gcc-lib/i386-pc-solaris2.10/3.3.6/../../.. -lgcc_eh
> checking for dummy main to link with Fortran libraries... none
> checking for Fortran name-mangling scheme... lower case, underscore,
> extra underscore
> checking whether g77 appends underscores to external names... yes
> checking whether mixed C/Fortran code can be run... yes
> checking whether g77 and gcc agree on int and double... yes
> checking whether g77 and gcc agree on double complex... yes
> checking whether g77 supports -c -o FILE.lo... yes
> checking whether g++ accepts -M for generating dependencies... yes
> checking whether g++ supports -c -o FILE.lo... yes
> checking whether C runtime needs -D__NO_MATH_INLINES... yes
> checking for xmkmf... /usr/openwin/bin/xmkmf
> checking for off_t... yes
> checking for working alloca.h... yes
> checking for alloca... yes
> checking whether alloca is declared... yes
> checking for access... yes
> checking for chdir... yes
> checking for expm1... yes
> checking for fcntl... yes
> checking for finite... yes
> checking for fseeko... yes
> checking for ftello... yes
> checking for ftruncate... yes
> checking for getcwd... yes
> checking for getgrgid... yes
> checking for getpwuid... yes
> checking for getuid... yes
> checking for hypot... yes
> checking for isascii... yes
> checking for log1p... yes
> checking for matherr... yes
> checking for mkdtemp... no
> checking for mkfifo... yes
> checking for popen... yes
> checking for putenv... yes
> checking for realpath... yes
> checking for rint... yes
> checking for setenv... yes
> checking for strcoll... yes
> checking for stat... yes
> checking for strerror... yes
> checking for strptime... yes
> checking for symlink... yes
> checking for system... yes
> checking for times... yes
> checking for unsetenv... yes
> checking whether isfinite is declared... no
> checking whether isnan is declared... yes
> checking for finite... (cached) yes
> checking for isnan... yes
> checking whether isfinite is declared... (cached) no
> checking whether isnan is declared... (cached) yes
> checking whether you have IEEE 754 floating-point arithmetic... yes
> checking for nl_langinfo and CODESET... yes
> checking for acosh... yes
> checking for asinh... yes
> checking for atanh... yes
> checking for snprintf... yes
> checking for strdup... yes
> checking for strncasecmp... yes
> checking for vsnprintf... yes
> checking whether acosh is declared... yes
> checking whether asinh is declared... yes
> checking whether atanh is declared... yes
> checking whether snprintf is declared... yes
> checking whether strdup is declared... no
> checking whether strncasecmp is declared... no
> checking whether vsnprintf is declared... yes
> checking for library containing connect... -lsocket
> checking for library containing gethostbyname... -lnsl
> checking for library containing xdr_string... none required
> checking for __setfpucw... no
> checking for working calloc... yes
> checking for working finite... yes
> checking for working log... no
> checking for working log1p... yes
> checking for working strptime... yes
> checking whether ftell works correctly on files opened for append... yes
> checking whether C99 double complex is supported...
> checking complex.h usability... yes
> checking complex.h presence... yes
> checking for complex.h... yes
> checking for double complex... yes
> checking for cexp... yes
> checking for clog... yes
> checking for csqrt... yes
> checking for cpow... yes
> checking for ccos... yes
> checking for csin... yes
> checking for ctan... yes
> checking for cacos... yes
> checking for casin... yes
> checking for catan... yes
> checking for ccosh... yes
> checking for csinh... yes
> checking for ctanh... yes
> checking for cacosh... yes
> checking for casinh... yes
> checking for catanh... yes
> checking whether C99 double complex is compatible with Rcomplex... no
> no
> checking for cblas_cdotu_sub in vecLib framework... no
> checking for dgemm_... no
> checking for ATL_xerbla in -latlas... no
> checking for dgemm_ in -lblas... no
> checking for dgemm_ in -lsunperf... no
> checking for dgemm_ in -lblas... (cached) no
> checking for dgemm_ in -lblas... (cached) no
> checking wchar.h usability... yes
> checking wchar.h presence... yes
> checking for wchar.h... yes
> checking wctype.h usability... yes
> checking wctype.h presence... yes
> checking for wctype.h... yes
> checking for mbrtowc... yes
> checking for mbstowcs... yes
> checking for wcrtomb... yes
> checking for wcscoll... yes
> checking for wcsftime... yes
> checking for wcstombs... yes
> checking for wcswidth... yes
> checking for wctrans... yes
> checking for wcwidth... yes
> checking whether wcwidth is declared... yes
> checking whether wcswidth is declared... yes
> checking for wctrans_t... yes
> checking iconv.h usability... yes
> checking iconv.h presence... yes
> checking for iconv.h... yes
> checking for iconv... yes
> checking whether iconv() accepts "UTF-8" and "latin1"... no
> checking for iconvlist... no
> checking for X... libraries , headers
> checking for gethostbyname... yes
> checking for connect... yes
> checking for remove... yes
> checking for shmat... yes
> checking for IceConnectionNumber in -lICE... yes
> using X11 ... yes
> checking for KeySym... yes
> checking for CFStringGetSystemEncoding in CoreFoundation framework... no
> checking for tclConfig.sh... no
> checking for tclConfig.sh in library (sub)directories...
> /usr/local/lib/tclConfig.sh
> checking for tkConfig.sh... no
> checking for tkConfig.sh in library (sub)directories... no
> checking /usr/local/include/tcl8.3/generic/tcl.h usability... no
> checking /usr/local/include/tcl8.3/generic/tcl.h presence... no
> checking for /usr/local/include/tcl8.3/generic/tcl.h... no
> checking /usr/local/include/tcl8.3/tcl.h usability... no
> checking /usr/local/include/tcl8.3/tcl.h presence... no
> checking for /usr/local/include/tcl8.3/tcl.h... no
> checking /usr/local/include/tcl.h usability... yes
> checking /usr/local/include/tcl.h presence... yes
> checking for /usr/local/include/tcl.h... yes
> checking for tk.h... no
> checking for BSD networking... yes
> checking if jpeglib version >= 6b... yes
> checking for jpeg_destroy_compress in -ljpeg... yes
> checking for main in -lz... yes
> checking if libpng version >= 1.0.5... yes
> checking for png_create_write_struct in -lpng... yes
> checking rpc/types.h usability... yes
> checking rpc/types.h presence... yes
> checking for rpc/types.h... yes
> checking for rpc/xdr.h... yes
> checking for XDR support... yes
> checking whether zlib support needs to be compiled... yes
> checking mmap support for zlib... yes
> checking whether bzip2 support needs to be compiled... yes
> checking whether PCRE support needs to be compiled... yes
> checking whether leap seconds are treated according to POSIX... yes
> checking for setitimer... yes
> checking for lpr... no
> checking for lp... lp
> checking for paperconf... false
> checking for java... /usr/bin/java
> checking for javac... /usr/bin/javac
> checking whether Java interpreter works... yes
> checking for Java environment... in /usr/jdk/instances/jdk1.5.0/jre
> checking whether NLS is requested... yes
> checking whether make sets $(MAKE)... yes
> checking for msgfmt... no
> checking for gmsgfmt... :
> checking for xgettext... no
> checking for msgmerge... no
> checking for strerror in -lcposix... no
> checking for signed... yes
> checking for inline... inline
> checking for off_t... (cached) yes
> checking for long long... (cached) yes
> checking for long double... yes
> checking for wchar_t... yes
> checking for wint_t... yes
> checking for inttypes.h... yes
> checking for stdint.h... yes
> checking for intmax_t... yes
> checking whether printf() supports POSIX/XSI format strings... yes
> checking for stdlib.h... (cached) no
> checking for unistd.h... (cached) no
> checking for getpagesize... yes
> checking for working mmap... yes
> checking whether we are using the GNU C Library 2.1 or newer... no
> checking whether integer division by zero raises SIGFPE... yes
> checking for unsigned long long... yes
> checking for inttypes.h... yes
> checking whether the inttypes.h PRIxNN macros are broken... no
> checking for stdint.h... (cached) no
> checking for SIZE_MAX... yes
> checking for stdint.h... (cached) no
> checking for non-GNU ld... /usr/ccs/bin/ld
> checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
> checking for shared library run path origin... done
> checking for ptrdiff_t... no
> checking argz.h usability... no
> checking argz.h presence... no
> checking for argz.h... no
> checking for limits.h... (cached) yes
> checking for locale.h... (cached) yes
> checking nl_types.h usability... yes
> checking nl_types.h presence... yes
> checking for nl_types.h... yes
> checking malloc.h usability... yes
> checking malloc.h presence... yes
> checking for malloc.h... yes
> checking stddef.h usability... yes
> checking stddef.h presence... yes
> checking for stddef.h... yes
> checking for stdlib.h... (cached) no
> checking for string.h... (cached) no
> checking for unistd.h... (cached) no
> checking for sys/param.h... (cached) yes
> checking for asprintf... no
> checking for fwprintf... yes
> checking for getcwd... (cached) yes
> checking for getegid... yes
> checking for geteuid... yes
> checking for getgid... yes
> checking for getuid... (cached) yes
> checking for mempcpy... no
> checking for munmap... yes
> checking for putenv... (cached) yes
> checking for setenv... (cached) yes
> checking for setlocale... yes
> checking for snprintf... (cached) yes
> checking for stpcpy... no
> checking for strcasecmp... yes
> checking for strdup... (cached) yes
> checking for strtoul... yes
> checking for tsearch... yes
> checking for wcslen... yes
> checking for __argz_count... no
> checking for __argz_stringify... no
> checking for __argz_next... no
> checking for __fsetlocking... yes
> checking whether _snprintf is declared... no
> checking whether _snwprintf is declared... no
> checking whether feof_unlocked is declared... no
> checking whether fgets_unlocked is declared... no
> checking whether getc_unlocked is declared... no
> checking for iconv... yes
> checking for iconv declaration...
>         extern size_t iconv (iconv_t cd, const char * *inbuf, size_t
> *inbytesleft, char * *outbuf, size_t *outbytesleft);
> checking for nl_langinfo and CODESET... (cached) yes
> checking for LC_MESSAGES... yes
> checking for bison... bison
> checking version of bison... 1.875, ok
> checking whether included gettext is requested... no
> checking for GNU gettext in libc... no
> checking for GNU gettext in libintl... no
> checking whether to use NLS... yes
> checking where the gettext function comes from... included intl directory
> configure: creating ./config.status
> config.status: creating Makeconf
> config.status: creating Makefile
> config.status: creating doc/Makefile
> config.status: creating doc/html/Makefile
> config.status: creating doc/html/search/Makefile
> config.status: creating doc/manual/Makefile
> config.status: creating etc/Makefile
> config.status: creating etc/Makeconf
> config.status: creating etc/Renviron
> config.status: creating m4/Makefile
> config.status: creating po/Makefile.in
> config.status: creating share/Makefile
> config.status: creating src/Makefile
> config.status: creating src/appl/Makefile
> config.status: creating src/extra/Makefile
> config.status: creating src/extra/bzip2/Makefile
> config.status: creating src/extra/intl/Makefile
> config.status: creating src/extra/pcre/Makefile
> config.status: creating src/extra/xdr/Makefile
> config.status: creating src/extra/zlib/Makefile
> config.status: creating src/include/Makefile
> config.status: creating src/include/Rmath.h0
> config.status: creating src/include/R_ext/Makefile
> config.status: creating src/library/Recommended/Makefile
> config.status: creating src/library/Makefile
> config.status: creating src/library/base/DESCRIPTION
> config.status: creating src/library/base/Makefile
> config.status: creating src/library/datasets/DESCRIPTION
> config.status: creating src/library/datasets/Makefile
> config.status: creating src/library/graphics/DESCRIPTION
> config.status: creating src/library/graphics/Makefile
> config.status: creating src/library/grDevices/DESCRIPTION
> config.status: creating src/library/grDevices/Makefile
> config.status: creating src/library/grDevices/src/Makefile
> config.status: creating src/library/grid/DESCRIPTION
> config.status: creating src/library/grid/Makefile
> config.status: creating src/library/grid/src/Makefile
> config.status: creating src/library/methods/DESCRIPTION
> config.status: creating src/library/methods/Makefile
> config.status: creating src/library/methods/src/Makefile
> config.status: creating src/library/profile/Makefile
> config.status: creating src/library/stats/DESCRIPTION
> config.status: creating src/library/stats/Makefile
> config.status: creating src/library/stats/src/Makefile
> config.status: creating src/library/stats4/DESCRIPTION
> config.status: creating src/library/stats4/Makefile
> config.status: creating src/library/splines/DESCRIPTION
> config.status: creating src/library/splines/Makefile
> config.status: creating src/library/splines/src/Makefile
> config.status: creating src/library/tcltk/DESCRIPTION
> config.status: creating src/library/tcltk/Makefile
> config.status: creating src/library/tcltk/src/Makefile
> config.status: creating src/library/tools/DESCRIPTION
> config.status: creating src/library/tools/Makefile
> config.status: creating src/library/tools/src/Makefile
> config.status: creating src/library/utils/DESCRIPTION
> config.status: creating src/library/utils/Makefile
> config.status: creating src/main/Makefile
> config.status: creating src/modules/Makefile
> config.status: creating src/modules/X11/Makefile
> config.status: creating src/modules/internet/Makefile
> config.status: creating src/modules/lapack/Makefile
> config.status: creating src/modules/vfonts/Makefile
> config.status: creating src/nmath/Makefile
> config.status: creating src/nmath/standalone/Makefile
> config.status: creating src/scripts/Makefile
> config.status: creating src/scripts/COMPILE
> config.status: creating src/scripts/INSTALL
> config.status: creating src/scripts/REMOVE
> config.status: creating src/scripts/R.sh
> config.status: creating src/scripts/Rdconv
> config.status: creating src/scripts/Rprof
> config.status: creating src/scripts/SHLIB
> config.status: creating src/scripts/Sd2Rd
> config.status: creating src/scripts/build
> config.status: creating src/scripts/check
> config.status: creating src/scripts/f77
> config.status: creating src/unix/Makefile
> config.status: creating tests/Makefile
> config.status: creating tests/Embedding/Makefile
> config.status: creating tests/Examples/Makefile
> config.status: creating tests/Native/Makefile
> config.status: creating tools/Makefile
> config.status: creating src/include/config.h
> config.status: src/include/config.h is unchanged
> config.status: executing default-1 commands
> config.status: creating po/POTFILES
> config.status: creating po/Makefile
> config.status: executing stamp-h commands
>
> R is now configured for i386-pc-solaris2.10
>
>  Source directory:          .
>  Installation directory:    /usr/local
>
>  C compiler:                gcc -D__NO_MATH_INLINES
>  C++ compiler:              g++
>  Fortran compiler:          g77
>
>  Interfaces supported:      X11
>  External libraries:
>  Additional capabilities:   PNG, JPEG, MBCS, NLS
>  Options enabled:           R profiling
>
>  Recommended packages:      no
>
> configure: WARNING: you cannot build DVI versions of the R manuals
> configure: WARNING: you cannot build PDF versions of the R manuals
> $
> $ make
> creating src/scripts/R.fe
> config.status: creating src/include/config.h
> config.status: src/include/config.h is unchanged
> Rmath.h is unchanged
> `libbz2.a' is up to date.
> `libpcre.a' is up to date.
> `libz.a' is up to date.
> ../../../src/include/libintl.h is unchanged
> ../../../include/libintl.h is unchanged
> `localecharset.h' is up to date.
> `libintl.a' is up to date.
> `libappl.a' is up to date.
> `libnmath.a' is up to date.
> `libunix.a' is up to date.
> gcc -I../../src/extra/zlib -I../../src/extra/bzip2
> -I../../src/extra/pcre   -I. -I../../src/include -I../../src/include
> -I/usr/local/include -DHAVE_CONFIG_H -D__NO_MATH_INLINES   -c
> connections.c -o connections.o
> connections.c: In function `fifo_open':
> connections.c:626: error: storage size of `sb' isn't known
> connections.c:649: error: `S_IFIFO' undeclared (first use in this function)
> connections.c:649: error: (Each undeclared identifier is reported only once
> connections.c:649: error: for each function it appears in.)
> *** Error code 1
> make: Fatal error: Command failed for target `connections.o'
> Current working directory /dska/dbdev/home/denny/R/R-2.2.1/src/main
> *** Error code 1
> The following command caused the error:
> make install-bin-local
> make: Fatal error: Command failed for target `R'
> Current working directory /dska/dbdev/home/denny/R/R-2.2.1/src/main
> *** Error code 1
> The following command caused the error:
> for d in scripts include extra appl nmath unix main modules library; do \
>  (cd ${d} && make R) || exit 1; \
> done
> make: Fatal error: Command failed for target `R'
> Current working directory /dska/dbdev/home/denny/R/R-2.2.1/src
> *** Error code 1
> The following command caused the error:
> for d in m4 tools doc etc share src tests  po; do \
>  (cd ${d} && make R) || exit 1; \
> done
> make: Fatal error: Command failed for target `R'
> $
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From wolfram at fischer-zim.ch  Fri Jun 23 14:22:21 2006
From: wolfram at fischer-zim.ch (wolfram at fischer-zim.ch)
Date: Fri, 23 Jun 2006 14:22:21 +0200 (CEST)
Subject: [Rd] Compiling R 2.3.1 on SuSE 8.2 and 10.0: error with
	libRlapack.so (PR#9026)
Message-ID: <20060623122221.E4FBE19950@slim.kubism.ku.dk>


--gKMricLos+KVdGMg
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

I compiled R 2.3.1 on two SuSE systems.
With SuSE 8.2 I got an error which I had not on SuSE 10:
/usr/lib/gcc-lib/i486-suse-linux/3.3/../../../../i486-suse-linux/bin/ld: cannot find -lRlapack


On both system libRlapack.so is made, but the size is verz different:

SuSE  8.2: -rwxr-x---  1 wf       sys   1538134 Jun 23 12:14 libRlapack.so
SuSE 10.0: -rwxr-x---  1 wf       sys   2142684 2006-06-23 11:55 libRlapack.so


In the zip-file I attached protocols of ./configure and make.

What would help to be able to compile R also on SuSE 8.2?

Best regards - Wolfram

-------------------------------------------------------------------------
...
g77  -fpic  -g -O2 -c dlapack0.f -o dlapack0.o
g77  -fpic  -g -O2 -c dlapack1.f -o dlapack1.o
g77  -fpic  -g -O2 -c dlapack2.f -o dlapack2.o
g77  -fpic  -g -O2 -c dlapack3.f -o dlapack3.o
g77  -fpic  -g -O2 -c cmplx.f -o cmplx.o
gcc -shared -L/usr/local/lib  -o libRlapack.so dlamc.o dlapack0.o dlapack1.o dlapack2.o dlapack3.o cmplx.o  -lg2c -lm -lgcc_s
make[4]: Leaving directory `/p1/q/5/e-src-linux/prog/R/R-2.3.1-SuSE82/src/modules/lapack'
make[4]: Entering directory `/p1/q/5/e-src-linux/prog/R/R-2.3.1-SuSE82/src/modules/lapack'
gcc -I. -I../../../src/include -I../../../src/include -I/usr/local/include -DHAVE_CONFIG_H  -fpic  -g -O2 -std=gnu99 -c Lapack.c -o Lapack.o
gcc -shared -L/usr/local/lib -o lapack.so  Lapack.o    -L../../../lib -lRlapack  -lg2c -lm -lgcc_s
/usr/lib/gcc-lib/i486-suse-linux/3.3/../../../../i486-suse-linux/bin/ld: cannot find -lRlapack
collect2: ld returned 1 exit status
make[4]: *** [lapack.so] Error 1



SuSE 8.2$ ls -l src/modules/lapack/
total 7328
-rw-r-----    1 wf       sys         31550 Apr 10 00:19 Lapack.c
-rw-r-----    1 wf       sys           735 Jun 23 12:13 Lapack.d
-rw-r-----    1 wf       sys          7858 Apr 10 00:19 Lapack.h
-rw-r-----    1 wf       sys         82636 Jun 23 12:14 Lapack.o
-rw-r-----    1 wf       sys             0 Jun 23 12:13 Makedeps
-rw-r-----    1 wf       sys          4058 Jun 23 12:13 Makefile
-rw-r-----    1 wf       sys          3563 Apr 10 00:19 Makefile.in
-rw-r-----    1 wf       sys          1403 Apr 10 00:19 Makefile.win
-rw-r-----    1 wf       sys           562 Apr 10 00:19 README
-rw-r-----    1 wf       sys           795 Apr 10 00:19 Rlapackrc.rc
-rw-r-----    1 wf       sys        616728 Apr 10 00:19 cmplx.f
-rw-r-----    1 wf       sys        318248 Jun 23 12:14 cmplx.o
-rw-r-----    1 wf       sys         24919 Apr 10 00:19 dlamc.f
-rw-r-----    1 wf       sys         14952 Jun 23 12:13 dlamc.o
-rw-r-----    1 wf       sys        862086 Apr 10 00:19 dlapack0.f
-rw-r-----    1 wf       sys        404688 Jun 23 12:13 dlapack0.o
-rw-r-----    1 wf       sys        859516 Apr 10 00:19 dlapack1.f
-rw-r-----    1 wf       sys        334992 Jun 23 12:13 dlapack1.o
-rw-r-----    1 wf       sys        633617 Apr 10 00:19 dlapack2.f
-rw-r-----    1 wf       sys        290892 Jun 23 12:13 dlapack2.o
-rw-r-----    1 wf       sys        959794 Apr 10 00:19 dlapack3.f
-rw-r-----    1 wf       sys        451928 Jun 23 12:14 dlapack3.o
-rw-r-----    1 wf       sys           800 Apr 10 00:19 dllversion.rc
-rwxr-x---    1 wf       sys       1538134 Jun 23 12:14 libRlapack.so
-rw-r-----    1 wf       sys           877 Apr 10 00:19 vecLibg95c.c
-rw-r-----    1 wf       sys           851 Apr 10 00:19 vecLibg95f.f



SuSE 10.0$ ls -l src/modules/lapack/
total 8638
-rw-r-----  1 wf         sys  616728 2006-04-10 00:19 cmplx.f
-rw-r-----  1 wf         sys  432888 2006-06-23 11:55 cmplx.o
-rw-r-----  1 wf         sys   24919 2006-04-10 00:19 dlamc.f
-rw-r-----  1 wf         sys   21676 2006-06-23 11:52 dlamc.o
-rw-r-----  1 wf         sys  862086 2006-04-10 00:19 dlapack0.f
-rw-r-----  1 wf         sys  546948 2006-06-23 11:53 dlapack0.o
-rw-r-----  1 wf         sys  859516 2006-04-10 00:19 dlapack1.f
-rw-r-----  1 wf         sys  460276 2006-06-23 11:53 dlapack1.o
-rw-r-----  1 wf         sys  633617 2006-04-10 00:19 dlapack2.f
-rw-r-----  1 wf         sys  401564 2006-06-23 11:54 dlapack2.o
-rw-r-----  1 wf         sys  959794 2006-04-10 00:19 dlapack3.f
-rw-r-----  1 wf         sys  628552 2006-06-23 11:54 dlapack3.o
-rw-r-----  1 wf         sys     800 2006-04-10 00:19 dllversion.rc
-rw-r-----  1 wf         sys   31550 2006-04-10 00:19 Lapack.c
-rw-r-----  1 wf         sys     735 2006-06-23 11:52 Lapack.d
-rw-r-----  1 wf         sys    7858 2006-04-10 00:19 Lapack.h
-rw-r-----  1 wf         sys   71720 2006-06-23 11:55 Lapack.o
-rwxr-x---  1 wf         sys   61944 2006-06-23 11:55 lapack.so
-rwxr-x---  1 wf         sys 2142684 2006-06-23 11:55 libRlapack.so
-rw-r-----  1 wf         sys       0 2006-06-23 11:52 Makedeps
-rw-r-----  1 wf         sys    4058 2006-06-23 11:52 Makefile
-rw-r-----  1 wf         sys    3563 2006-04-10 00:19 Makefile.in
-rw-r-----  1 wf         sys    1403 2006-04-10 00:19 Makefile.win
-rw-r-----  1 wf         sys     562 2006-04-10 00:19 README
-rw-r-----  1 wf         sys     795 2006-04-10 00:19 Rlapackrc.rc
-rw-r-----  1 wf         sys     877 2006-04-10 00:19 vecLibg95c.c
-rw-r-----  1 wf         sys     851 2006-04-10 00:19 vecLibg95f.f

--gKMricLos+KVdGMg
Content-Type: application/zip
Content-Disposition: attachment; filename="R-2.3.1-trace-make.zip"
Content-Transfer-Encoding: base64

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
9Myb1bLOrFZ5KVUnZe2lrDspzEthW3Mk8T6BjHgzpJdWddPWftq6m8b8NNZNy5YPFbErrI65
Ejup1VbqupO63kplnVS2lZqV3c5Wbve2bnq1nb7upq+301k3nW2n8y1G7pyryIgr20+rumlr
P23dTWN+GuumZXck5zsme+Zu467UrRzVoxzrrRzrRznYVg72KEfG5Tiv4irmzd1+arWVuu6k
rrdSWSeVbaVm3bkn2557qm56tZ2+7qavH81dZWeRL7dW+U5qtZW67qSuH9G6Bab01x3vMrg/
u69d/rWff+3yrztXxpv2lriJS8W89cZPXW+lNnRV//l7e2XbRG36XV6kztJGxzo7Dr73tXKi
je/XpuEJt4nPepZjNp/yKEdHnld3aza4Uh2mws98qusxkB+CAb1PV2frIvj8J/sX7mj/2YtX
2gZZvAw+c/FanyHLV+FnZkCrTCQDKvzMJ1lS9yIPsUTomWvvSp8foPjcDb38AEMvd0MvP8DQ
89Rj6pzLRJ/dqERo4bRNCQ8+b/Fa0SePWWTwmWvv9IiyBWz0ednwVJXy8o2NPvexulGHqlN1
HXtmS0ehdpWnZDxwgM/gfYKDdEa/Jx6i/loxbRtBxZ+5D8j9kuwEIvTcdn629OIAxXsqfGlf
ZaPP/QnMMYH6DDp2ECb+6DDxx2GYuO0wcXsYJh46TDy7CbY+tNF2OSL8zAuUUt/L1UkGn7l4
qViVpYvQM2/VvUkhO8SMUPmz0iEYWHsMrA/BAPMYYIdgIHNLU3aIpckVXx2g+LUrfn2A4pkr
nh2geH3sK799+/y2rpUrvjpA8WtX/PoAxTNXPDtA8Zlb97IDrHuVK746QPFrV/z6AMUzVzw7
QPHGGkJ+/OIQX99joDoEA2uPgfUhGGAeA+wQDGRm4n/2Wd9M+c8+35vJ/tlnejPNP/scry80
Zc9+m8s4CX3ugte64PWz398yd8eeu+DM3FrLnv3OmjEK05dlRPiZu5nHQHUIBtYeA+tDMMA8
BthBGCh9DspDsGBsANUWVoafew/rGKgOwcDaY2B9CAaYxwA7CAPOGFPyYKPPPSNqi0w1JarI
c8+JHgvVQVhY+yysD8IC81lgB2Ehs5rd7Pk1u5UtvHr+wte28PXzF85s4ewQCnViVyIZfG51
ui2+OkDxa1f8+gDFM1c8O0DxxixdfnwVfuav7zFQHYKBtcfA+hAMMI8BdggG7A0BtSE7iDDq
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
Tbaqyvpwt7pcX642Zxdn56vfDr+9+2Gz3r9+sU8/Fn87//vb5F09FKasd0lemiIbGnOf/L5u
z9fdOshk3Zpmtz6S00vJ6tdmuHE5DU1yXSR5UxfJtjHJ75cvz4TpfZHeflNx60eUG5qm6qfS
DzKbVUVf4mNa5k02lY42K1ve17Cvb4Z9hcVvpige8nuKDOu+SE12g6JcTCaKz/al5PtNTXo8
281U2X5txe3T+pBO2nyYo9Lr0WEyifJBsd888HAYPDLsimGyYWezmkp0yOox0fub1BRTCQ+Z
TSW+z+xRBcxkdW/pXzNqLH3dZ6Zsh36qYaOyfPkiM0U6uKxU6vrybFtMNbEFpe0/2jySVZus
VsnZ2dr+uS7riaa6sKBJRnqQ5df9rKyz6pAXU7aZz/JYLVJpWVNvy91ZP6TDoX+bBI3redae
52bMfIwnKfvkUGc3ab0r8qfVwPryqrgbpuxNQcbHakMqZFz4N/eGcdmTdTNu3K/7mZXCpFN2
MsjwSVKsrz+X7WbKhlbZ+qp+fZJ8XWbXVZN97BsznOXJ1jR7lZAxz+eqvGY6IEzLmn1rir4n
MuPCYbIhva4K5iCcOfJinItKYa6bw3Zrtx/EQijTTVrnQUGSkEktfnOHnaVxdlmWrH4+o780
utWA+XLy+tCbtW3EtJLEf//Lj//z7uqnv/76p5//fPWXJElWu2T1102y6of833b14Y9/TFaZ
bvpk1Si0iSUQ9jUQBsBYgkhvdLIwFk0cHkIgDmGxxNGj1Qmk8Fgi8ezg5CEkljBqInLiCNq8
MPtktU1s177+vDlLX6TGtiajegTSAFCdTzV8UOWib1hUWtscpKxTTomT7DmCbJ/y0zYzk27n
JddYM3S+hdakcUaY79jvVcauqRWL5j1bc6rd4RqffjP9YoY15Zdnh1y5TlrKCh2kZSNO2ImH
jJAU8uXb1G5Jiyzg5MSQ9wHfEZ7tobLKbZuAjxND3l0xBGwOH3FUzXVa9SGXTws5H5R5pDzX
QL61NKdKDvkbk28Ow/aHgJsTQ15TbLPmUIcKcWLI2w+H/D5gxJSQ64ikR6UczP3VtirbtshD
ZpUe/uKQtVfbss5d7w1+EhDC39ymVZlfPagNlTziL0xfNnXI7NNCzrusSvtQT580/baTR9Qp
BmqcKS2cA9ycFaTEWrODGUdJBQlRhZLJjcXipKiCjYSKL5BM2ywUJ0UVDBYKlslhccWhFUlE
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
AAAusgAAAAA=

--gKMricLos+KVdGMg--


From michellang at gmail.com  Fri Jun 23 15:55:01 2006
From: michellang at gmail.com (michellang at gmail.com)
Date: Fri, 23 Jun 2006 15:55:01 +0200 (CEST)
Subject: [Rd] symbols() draws squares too high (PR#9027)
Message-ID: <20060623135501.0CEBF4D871@slim.kubism.ku.dk>

Full_Name: Michel Lang
Version: 2.2.1
OS: 2.6.16-gentoo-r9 on x86_64
Submission from: (NULL) (62.143.164.39)


  plot(-2:2, -2:2, type = "n")
  symbols(x = 0, y = 0, squares = 2, inches = FALSE, add = TRUE)

This should plot a square with its center at (0,0) and side length 2, in other
words a square from (-1,-1) as lower left angle to (1,1) as upper right angle.

However, if you execute this line
  abline(h = c(-1,1))
you see that the squares height is definitely too large.


From murdoch at stats.uwo.ca  Fri Jun 23 16:07:17 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 23 Jun 2006 10:07:17 -0400
Subject: [Rd] symbols() draws squares too high (PR#9027)
In-Reply-To: <20060623135501.0CEBF4D871@slim.kubism.ku.dk>
References: <20060623135501.0CEBF4D871@slim.kubism.ku.dk>
Message-ID: <449BF595.1000607@stats.uwo.ca>

On 6/23/2006 9:55 AM, michellang at gmail.com wrote:
> Full_Name: Michel Lang
> Version: 2.2.1
> OS: 2.6.16-gentoo-r9 on x86_64
> Submission from: (NULL) (62.143.164.39)
> 
> 
>   plot(-2:2, -2:2, type = "n")
>   symbols(x = 0, y = 0, squares = 2, inches = FALSE, add = TRUE)
> 
> This should plot a square with its center at (0,0) and side length 2, in other
> words a square from (-1,-1) as lower left angle to (1,1) as upper right angle.
> 
> However, if you execute this line
>   abline(h = c(-1,1))
> you see that the squares height is definitely too large.

This is not a bug.

The documentation says that when inches = FALSE, the units are those of 
the x axis, so horizontal lines are not relevant.  Try

abline(v=c(-1, 1))

If you want your x and y scales to be identical, I think you need to use 
grid and lattice, rather than traditional graphics, and to set aspect="iso".

Duncan Murdoch


From ripley at stats.ox.ac.uk  Fri Jun 23 16:13:01 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 23 Jun 2006 15:13:01 +0100 (BST)
Subject: [Rd] symbols() draws squares too high (PR#9027)
In-Reply-To: <449BF595.1000607@stats.uwo.ca>
References: <20060623135501.0CEBF4D871@slim.kubism.ku.dk>
	<449BF595.1000607@stats.uwo.ca>
Message-ID: <Pine.LNX.4.64.0606231511110.15057@gannet.stats.ox.ac.uk>

On Fri, 23 Jun 2006, Duncan Murdoch wrote:

> On 6/23/2006 9:55 AM, michellang at gmail.com wrote:
>> Full_Name: Michel Lang
>> Version: 2.2.1

That's long obselete, and quite possibly the documentation was wrong then 
(it was at some point in the midterm past).

>> OS: 2.6.16-gentoo-r9 on x86_64
>> Submission from: (NULL) (62.143.164.39)
>>
>>
>>   plot(-2:2, -2:2, type = "n")
>>   symbols(x = 0, y = 0, squares = 2, inches = FALSE, add = TRUE)
>>
>> This should plot a square with its center at (0,0) and side length 2, in other
>> words a square from (-1,-1) as lower left angle to (1,1) as upper right angle.
>>
>> However, if you execute this line
>>   abline(h = c(-1,1))
>> you see that the squares height is definitely too large.
>
> This is not a bug.
>
> The documentation says that when inches = FALSE, the units are those of
> the x axis, so horizontal lines are not relevant.  Try
>
> abline(v=c(-1, 1))
>
> If you want your x and y scales to be identical, I think you need to use
> grid and lattice, rather than traditional graphics, and to set aspect="iso".

par(asp=1) or eqscplot (MASS) does this perfectly well in base graphics.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hueppop at vogelwarte-helgoland.de  Fri Jun 23 17:45:59 2006
From: hueppop at vogelwarte-helgoland.de (hueppop at vogelwarte-helgoland.de)
Date: Fri, 23 Jun 2006 17:45:59 +0200 (CEST)
Subject: [Rd] Bug in R-intro.html ? (PR#9028)
Message-ID: <20060623154559.BFF2D50764@slim.kubism.ku.dk>

Full_Name: Ommo H?ppop
Version: 2.0.1
OS: XP
Submission from: (NULL) (84.143.196.187)


Hi,

Presumably, I've found an error in
http://finzi.psych.upenn.edu/R/doc/manual/R-intro.html

In Chapter 11.3 Generic functions for extracting model information it says
"Select a suitable model by adding or dropping terms and preserving hierarchies.
The model with the LARGEST value of AIC (Akaike's An Information Criterion)
discovered in the stepwise search is returned." Shouldn't it read "with the
SMALLEST value ..."?

Sorry, if I only misunderstood the meaning of "returned"!

By the way: Thank you very much indeed for developing this great free software!


Sincerely
Ommo H?ppop


From B.Rowlingson at lancaster.ac.uk  Fri Jun 23 12:12:34 2006
From: B.Rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 23 Jun 2006 11:12:34 +0100
Subject: [Rd] Error - Compiling R on a Sun V40Z - R/R-2.2.1
In-Reply-To: <20060623072458.990A74D870@slim.kubism.ku.dk>
References: <20060623072458.990A74D870@slim.kubism.ku.dk>
Message-ID: <449BBE92.80705@lancaster.ac.uk>

ripley at stats.ox.ac.uk wrote:
> The current version of R is 2.3.1 patched.  You are asked not to report 
> problems on obselete versions of R.
> 
> This seems to be gcc 3.3.6, also obselete.

If configure says:

>>configure: WARNING:     ## ----------------------------------- ##
>>configure: WARNING:     ## Report this to r-bugs at R-project.org ##
>>configure: WARNING:     ## ----------------------------------- ##

  then people might just do what it says. Perhaps the message should 
mention something about current, patched, and obsolete versions...

Barry


From pinard at iro.umontreal.ca  Sat Jun 24 03:45:40 2006
From: pinard at iro.umontreal.ca (=?iso-8859-1?Q?Fran=E7ois?= Pinard)
Date: Fri, 23 Jun 2006 21:45:40 -0400
Subject: [Rd] Documentation detail [was: Merging factor levels.]
Message-ID: <20060624014540.GA22820@alcyon.progiciels-bpi.ca>

Hi to R developers.

In the "Details:" section of "?levels", it would be nice including the 
following sentence, taken from a reply from Brian Ripley:

    If you set two levels to be the same label, they get merged.

Granted, the "Examples:" section does have a terse comment and examples 
from which users may imply this behaviour.  Yet, the documentation would 
be friendlier if it was clearly stating the fact.

Brian's message stated in full below, for reference:

----- Forwarded message from Prof Brian D Ripley <ripley at stats.ox.ac.uk> -----

From: Prof Brian D Ripley <ripley at stats.ox.ac.uk>
Date: Thu Apr 10 10:43:28 2003
Subject: [R] Merging factor levels.

On Mon, 12 Nov 2001, [iso-8859-1] G?ran Brostr?m wrote:

> This must be a FAQ, but I can't find the answer:
> I have a factor 'okk':

> > table(okk)
> okk
>      Other   STORKAGE SKELLEFTEA    FALMARK       BOLE  NEAR_TOWN
>      14064        560        346        526        332         34

> Now I want to put the cases in 'NEAR_TOWN' into the 'Other' category',
> so I try:

> > okk <- ifelse(okk == "NEAR_TOWN", "Other", okk)
> > table(okk)
> okk
>     1     2     3     4     5 Other
> 14064   560   346   526   332    34
> > is.factor(okk)
> [1] FALSE

> This is not what I intended. I can do what I want the hard way (i.e., by
> converting  okk  to character an then back again) but there
> must be something simpler?

Something like

levels(okk) <- c(levels(okk)[1:5], "Other")

If you set two levels to be the same label, they get merged.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

----- End forwarded message -----

-- 
Fran?ois Pinard   http://pinard.progiciels-bpi.ca


From ggrothendieck at gmail.com  Sat Jun 24 06:47:11 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 24 Jun 2006 00:47:11 -0400
Subject: [Rd] [R] GARCH
In-Reply-To: <449CBB9D.5090808@pdf.com>
References: <d4c57560606200551x65d99d1pd1851cf45c7ca91@mail.gmail.com>
	<4498D8B8.8060808@dcn.davis.ca.us>
	<Pine.LNX.4.64.0606210854240.11993@gannet.stats.ox.ac.uk>
	<44996FE6.6040909@dcn.davis.ca.us> <449CBB9D.5090808@pdf.com>
Message-ID: <971536df0606232147g4917ec9bt6e08a77770f09eff@mail.gmail.com>

Looks like tseries needs a coef.summary.garch method or perhaps
stats needs a coef.default method.

On 6/24/06, Spencer Graves <spencer.graves at pdf.com> wrote:
>          I'll outline here how you can solve this kind of problem, using the
> first example in the 'garch' help page:
>
> library(tseries)
>      n <- 1100
>      a <- c(0.1, 0.5, 0.2)  # ARCH(2) coefficients
>      e <- rnorm(n)
>      x <- double(n)
>      x[1:2] <- rnorm(2, sd = sqrt(a[1]/(1.0-a[2]-a[3])))
>      for(i in 3:n)  # Generate ARCH(2) process
>      {
>        x[i] <- e[i]*sqrt(a[1]+a[2]*x[i-1]^2+a[3]*x[i-2]^2)
>      }
>      x <- ts(x[101:1100])
>      x.arch <- garch(x, order = c(0,2))  # Fit ARCH(2)
> (sum.arch <- summary(x.arch))
> <snip>
>     Estimate  Std. Error  t value Pr(>|t|)
> a0   0.09887     0.01013    9.764  < 2e-16 ***
> a1   0.43104     0.05276    8.170 2.22e-16 ***
> a2   0.31261     0.05844    5.350 8.82e-08 ***
> <snip>
>
>          Then I tried 'str(sum.arch)'.  This told me it is a list with 6
> components, and the one I want is named 'coef'.  This led me to examine
> 'sum.arch$coef', which includes the desired numbers.  Moreover,
> 'class(sum.arch$coef)' told me this is a 'matrix'.  This information
> suggests that the following might be what you requested:
>
>  sum.arch$coef[, "Pr(>|t|)"]
>           a0           a1           a2
> 0.000000e+00 2.220446e-16 8.815239e-08
>
>          Hope this helps.
>          Spencer Graves
>
> Jeff Newmiller wrote:
> > Prof Brian Ripley wrote:
> >> Why do you think
> >>
> >>> help.search("garch-methods", package="tseries")
> >> finds accessor functions?  That is notation for S4 methods, and "garch"
> >> is an S3 class so there will be none.  Here there _is_ an accessor,
> >> coef(), and you can find that there is by
> >
> > Probably because I used it, found a mention of various extraction functions
> > including coef(), and could not find a way to access "Pr(>|t|)" using
> > coef(). Nor have I had luck with
> >   help.search("summary.garch", package="tseries")
> >
> > Possibly also because I have not yet figured out the difference between
> > S4 and S3 methods, but since the result of my  help.search call displayed S3
> > functions I don't see how knowing this difference would have helped.
> >
> >>> methods(class="garch")
> >> [1] coef.garch*      fitted.garch*    logLik.garch*    plot.garch*
> >> [5] predict.garch*   print.garch*     residuals.garch* summary.garch*
> >>
> >>    Non-visible functions are asterisked
> >>
> >> Note though that inherited methods might be relevant too (e.g. default
> >> methods) and indeed it seems that here the default method for coef would
> >> work just as well.
> >
> > Given Arun Kumar Saha's question...
> >
> >  > > Now I want to store the value of Pr(>|t|) for coefficient a0, a1,
> >  > > and b1, and also values of these coefficients, so that I can use
> >  > > them in future separately. I know that I can do it for coefficients
> >  > > by using the command:
> >  > > coef(garch1)["a0"] etc, but not for Pr(>|t|). Can anyone please
> >  > > tell me how to do this?
> >
> > ... I don't see how coef() helps because I have yet to figure out how
> > to use coef() (or any other accessor) to find " Std. Error" of the
> > coefficient, much less "Pr(>|t|)". summary.garch seems to have only a
> > print method, with no accessors at all. Can you offer a solution?
> >
>
> ______________________________________________
> R-help at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
>


From bolker at ufl.edu  Sat Jun 24 16:57:50 2006
From: bolker at ufl.edu (Ben Bolker)
Date: Sat, 24 Jun 2006 14:57:50 +0000 (UTC)
Subject: [Rd] Ops.Date: promote characters to Dates?
Message-ID: <loom.20060624T165439-818@post.gmane.org>

 Ops.Date  <- function (e1, e2)
{
    if (nargs() == 1)
        stop("unary ", .Generic, " not defined for Date objects")
    boolean <- switch(.Generic, "<" = , ">" = , "==" = , "!=" = ,
        "<=" = , ">=" = TRUE, FALSE)
    if (!boolean)
        stop(.Generic, " not defined for Date objects")
+    if (!nchar(e1)) e1 <- as.Date(e1)
+    if (!nchar(e2)) e2 <- as.Date(e2)
    NextMethod(.Generic)
}

  adding the above two lines to Ops.Date makes, e.g.

as.Date("1999-12-13") == "1999-06-14"

behave as "expected".

  Does it seem like a good idea?
  (I was inspired by a student's confusion, and by
the fact that Ops.factor does a similar thing -- although
in this case it seems more sensible to promote the
character to a Date rather than demoting the Date
to a character (in which case comparisons might not
work right?))

  Similar questions might apply to Ops.POSIXt ...

  Ben Bolker


From ggrothendieck at gmail.com  Sat Jun 24 17:23:03 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 24 Jun 2006 11:23:03 -0400
Subject: [Rd] Ops.Date: promote characters to Dates?
In-Reply-To: <loom.20060624T165439-818@post.gmane.org>
References: <loom.20060624T165439-818@post.gmane.org>
Message-ID: <971536df0606240823l14bfbd4mc1db38af7d23685f@mail.gmail.com>

Note that the first argument still cannot be character
since Ops.Date won't get dispatched in that case.

On 6/24/06, Ben Bolker <bolker at ufl.edu> wrote:
>  Ops.Date  <- function (e1, e2)
> {
>    if (nargs() == 1)
>        stop("unary ", .Generic, " not defined for Date objects")
>    boolean <- switch(.Generic, "<" = , ">" = , "==" = , "!=" = ,
>        "<=" = , ">=" = TRUE, FALSE)
>    if (!boolean)
>        stop(.Generic, " not defined for Date objects")
> +    if (!nchar(e1)) e1 <- as.Date(e1)
> +    if (!nchar(e2)) e2 <- as.Date(e2)
>    NextMethod(.Generic)
> }
>
>  adding the above two lines to Ops.Date makes, e.g.
>
> as.Date("1999-12-13") == "1999-06-14"
>
> behave as "expected".
>
>  Does it seem like a good idea?
>  (I was inspired by a student's confusion, and by
> the fact that Ops.factor does a similar thing -- although
> in this case it seems more sensible to promote the
> character to a Date rather than demoting the Date
> to a character (in which case comparisons might not
> work right?))
>
>  Similar questions might apply to Ops.POSIXt ...
>
>  Ben Bolker
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From maechler at stat.math.ethz.ch  Sat Jun 24 17:31:36 2006
From: maechler at stat.math.ethz.ch (maechler at stat.math.ethz.ch)
Date: Sat, 24 Jun 2006 17:31:36 +0200 (CEST)
Subject: [Rd] Bug in R-intro.html ? (PR#9028)
Message-ID: <20060624153136.67DA119AB1@slim.kubism.ku.dk>

>>>>> "hueppop" == hueppop  <hueppop at vogelwarte-helgoland.de>
>>>>>     on Fri, 23 Jun 2006 17:45:59 +0200 (CEST) writes:

    hueppop> Full_Name: Ommo H?ppop Version: 2.0.1 OS: XP
    hueppop> Submission from: (NULL) (84.143.196.187)


    hueppop> Hi,

    hueppop> Presumably, I've found an error in
    hueppop> http://finzi.psych.upenn.edu/R/doc/manual/R-intro.html

    hueppop> In Chapter 11.3 Generic functions for extracting
    hueppop> model information it says "Select a suitable model
    hueppop> by adding or dropping terms and preserving
    hueppop> hierarchies.  The model with the LARGEST value of
    hueppop> AIC (Akaike's An Information Criterion) discovered
    hueppop> in the stepwise search is returned." Shouldn't it
    hueppop> read "with the SMALLEST value ..."?

yes indeed.  Astonishing how long something like this remains
unnoticed or at lt least unnoticed by the good guys who
contribute back to the project by concise bug reports.

Thank you.

    hueppop> Sorry, if I only misunderstood the meaning of
    hueppop> "returned"!

:-)

    hueppop> By the way: Thank you very much indeed for
    hueppop> developing this great free software!

    hueppop> Sincerely Ommo H?ppop


From d.firth at warwick.ac.uk  Sat Jun 24 19:35:34 2006
From: d.firth at warwick.ac.uk (d.firth at warwick.ac.uk)
Date: Sat, 24 Jun 2006 19:35:34 +0200 (CEST)
Subject: [Rd] error in chol2inv.Rd (PR#9033)
Message-ID: <20060624173534.58BBB19AB1@slim.kubism.ku.dk>

Full_Name: David Firth
Version: 2.3.1
OS: Linux
Submission from: (NULL) (81.178.112.151)


In chol2inv.Rd, where it says "The first \code{nc} columns" it presumably means
"The first \code{size} columns"?

Also in R-patched.


From e.catchpole at adfa.edu.au  Sun Jun 25 11:51:27 2006
From: e.catchpole at adfa.edu.au (Ted Catchpole)
Date: Sun, 25 Jun 2006 19:51:27 +1000
Subject: [Rd] Compiling R 2.3.1 on SuSE 8.2 and 10.0: error
 with	libRlapack.so (PR#9026)
In-Reply-To: <20060623122221.E4FBE19950@slim.kubism.ku.dk>
References: <20060623122221.E4FBE19950@slim.kubism.ku.dk>
Message-ID: <449E5C9F.7050903@adfa.edu.au>

Wolfram,

SuSE 8.2 is _very_ old.  Why not just upgrade to SuSE 10.1, where 
R-2.3.1 compiles with no problems?

Ted Catchpole

wolfram at fischer-zim.ch wrote:
> --gKMricLos+KVdGMg
> Content-Type: text/plain; charset=us-ascii
> Content-Disposition: inline
>
> I compiled R 2.3.1 on two SuSE systems.
> With SuSE 8.2 I got an error which I had not on SuSE 10:
> /usr/lib/gcc-lib/i486-suse-linux/3.3/../../../../i486-suse-linux/bin/ld: cannot find -lRlapack
>


From Philippe.Grosjean at umh.ac.be  Sun Jun 25 19:43:18 2006
From: Philippe.Grosjean at umh.ac.be (Philippe Grosjean)
Date: Sun, 25 Jun 2006 19:43:18 +0200
Subject: [Rd] using withCallingHandlers, how to deal with warning( ,
 immediate. = TRUE)?
Message-ID: <449ECB36.4050208@umh.ac.be>

Hello,

I want to use withCallingHandlers(expr, warning = function(w) { ....}), 
that is, to use a custom warning handler. I want this handler to 
replicate the behavior of the usual handler. I have problems with the 
mode 'options(warn = 0)' where the warnings are delayed, except if 
calling  'warning("message", immediate. = TRUE). Indeed, if my custom 
warning handler manages to delay the display of warning messages, it 
cannot detect if the argument immediate. = TRUE was use, and thus, it 
cannot behave consequently.

Here is a toy example to illustrate my problem (whole script at the end 
of this message):

 > # This is what I want to replicate in my own handler:
 > options(warn = 0)
 > options(warning.expression = NULL)
 > for (i in 1:3) {
+   print(i)
+   warning("test", immediate. = (i < 2))
+ }
[1] 1
Warning: test
[1] 2
[1] 3
Warning messages:
1: test
2: test
# First warning is NOT delayed, but the others are

Here is what I could use if I do not delay printing of warnings:

 > options(warning.expression = NULL)
 > options(warning.expression = expression()) # Disable normal warnings
 > withCallingHandlers(for (i in 1:3) {print(i);
+   warning("test", immediate. = (i < 2))},
+   warning = function(w)
+   cat("Warning:", conditionMessage(w), "\n"))
[1] 1
Warning: test
[1] 2
Warning: test
[1] 3
Warning: test
 > options(warning.expression = NULL)

It gets a little bit more complex to delay handling of warning messages, 
but basically, I manage it that way:

 > options(warning.expression = NULL)
 > options(warning.expression = NULL)
 > options(warning.expression = expression()) # Disable normal warnings
 > if (exists("last.warning", envir = .GlobalEnv))
+   rm("last.warning", envir = .GlobalEnv)
 > withCallingHandlers(for (i in 1:3) {print(i);
+   warning("test", immediate. = (i < 2))},
+   warning = function(w) {
+     if (exists("last.warning", envir = .GlobalEnv)) {
+       lwarn <- get("last.warning", envir = .GlobalEnv)
+     } else lwarn <- list()
+     # Do not add more than 50 warnings
+     if (length(lwarn) >= 50) return()
+     # Add the warning to this list
+     nwarn <- length(lwarn)
+     names.warn <- names(lwarn)
+     Call <- conditionCall(w)
+     lwarn[[nwarn + 1]] <- Call
+     names(lwarn) <- c(names.warn, conditionMessage(w))
+     # Save the modified version in .GlobalEnv
+     last.warning <<- lwarn
+ })
[1] 1
[1] 2
[1] 3
 > invisible(warnings()) # Now display delayed warnings()
Warning messages:
1: test in: withCallingHandlers(for (i in 1:3) {  ...
2: test in: withCallingHandlers(for (i in 1:3) {  ...
3: test in: withCallingHandlers(for (i in 1:3) {  ...
 > options(warning.expression = NULL)

Now, obviously, I need a mechanism to detect if 'immediate. = TRUE' was 
used in warning(), in order to delay or not accordingly, and replicate 
exactly the example above... BUT... I have no idea at all where I can 
find this information! Could someone help me, please?
Best,

Philippe Grosjean

P.S.: here is the complete script of the toy example:

### The example we want to replicate with our own handler
options(warn = 0)
options(warning.expression = NULL)
for (i in 1:3) {
   print(i)
   warning("test", immediate. = (i < 2))
}

### A custom warning handler that does NOT delay warning messages
options(warning.expression = NULL)
options(warning.expression = expression()) # Disable normal warnings
withCallingHandlers(for (i in 1:3) {print(i);
   warning("test", immediate. = (i < 2))},
   warning = function(w)
   cat("Warning:", conditionMessage(w), "\n"))
options(warning.expression = NULL)

### A custom warning handler that ALWAYS delays warning messages
options(warning.expression = NULL)
options(warning.expression = expression()) # Disable normal warnings
if (exists("last.warning", envir = .GlobalEnv))
   rm("last.warning", envir = .GlobalEnv)
withCallingHandlers(for (i in 1:3) {print(i);
   warning("test", immediate. = (i < 2))},
   warning = function(w) {
     if (exists("last.warning", envir = .GlobalEnv)) {
       lwarn <- get("last.warning", envir = .GlobalEnv)
     } else lwarn <- list()
     # Do not add more than 50 warnings
     if (length(lwarn) >= 50) return()
     # Add the warning to this list
     nwarn <- length(lwarn)
     names.warn <- names(lwarn)
     Call <- conditionCall(w)
     lwarn[[nwarn + 1]] <- Call
     names(lwarn) <- c(names.warn, conditionMessage(w))
     # Save the modified version in .GlobalEnv
     last.warning <<- lwarn
})
invisible(warnings()) # Now display delayed warnings()
options(warning.expression = NULL)

### How do I write my handler that delays only when warn = 0 and
### immediate. = FALSE in the calling of warning() ???
# ...?


From bolker at ufl.edu  Sun Jun 25 22:32:53 2006
From: bolker at ufl.edu (Ben Bolker)
Date: Sun, 25 Jun 2006 16:32:53 -0400
Subject: [Rd] Ops.Date: promote characters to Dates?
In-Reply-To: <971536df0606240823l14bfbd4mc1db38af7d23685f@mail.gmail.com>
References: <loom.20060624T165439-818@post.gmane.org>
	<971536df0606240823l14bfbd4mc1db38af7d23685f@mail.gmail.com>
Message-ID: <449EF2F5.3010902@ufl.edu>


    Believe it or not, it works either way: I haven't fully
figured out the logic yet (except to note that I had the
logic reversed below):


Ops.Date  <- function (e1, e2)
  {
    if (nargs() == 1)
         stop("unary ", .Generic, " not defined for Date objects")
     boolean <- switch(.Generic, "<" = , ">" = , "==" = , "!=" = ,
         "<=" = , ">=" = TRUE, FALSE)
     if (!boolean)
         stop(.Generic, " not defined for Date objects")
     if (nchar(e1)) e1 <- as.Date(e1)
     if (nchar(e2)) e2 <- as.Date(e2)
     NextMethod(.Generic)
}


datechar1 = "1999-12-03"
datechar2 = "2000-12-07"
date1 = as.Date(datechar1)
date2 = as.Date(datechar2)

date1 == datechar1
datechar1 == date1

datechar1 < date2
date2 > datechar1

    I also propose

as.Date.numeric <- function(x, ...) {
    class(x) <- "Date"
    x
}

   this takes a number of seconds since 1970 and
converts it into a Date object ...

    cheers
      Ben


Gabor Grothendieck wrote:
> Note that the first argument still cannot be character
> since Ops.Date won't get dispatched in that case.
> 
> On 6/24/06, Ben Bolker <bolker at ufl.edu> wrote:
>>  Ops.Date  <- function (e1, e2)
>> {
>>    if (nargs() == 1)
>>        stop("unary ", .Generic, " not defined for Date objects")
>>    boolean <- switch(.Generic, "<" = , ">" = , "==" = , "!=" = ,
>>        "<=" = , ">=" = TRUE, FALSE)
>>    if (!boolean)
>>        stop(.Generic, " not defined for Date objects")
>> +    if (!nchar(e1)) e1 <- as.Date(e1)
>> +    if (!nchar(e2)) e2 <- as.Date(e2)
>>    NextMethod(.Generic)
>> }
>>
>>  adding the above two lines to Ops.Date makes, e.g.
>>
>> as.Date("1999-12-13") == "1999-06-14"
>>
>> behave as "expected".
>>
>>  Does it seem like a good idea?
>>  (I was inspired by a student's confusion, and by
>> the fact that Ops.factor does a similar thing -- although
>> in this case it seems more sensible to promote the
>> character to a Date rather than demoting the Date
>> to a character (in which case comparisons might not
>> work right?))
>>
>>  Similar questions might apply to Ops.POSIXt ...
>>
>>  Ben Bolker
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>


From res1qtuu at verizon.net  Mon Jun 26 06:14:19 2006
From: res1qtuu at verizon.net (Jeff Barrett)
Date: Sun, 25 Jun 2006 23:14:19 -0500
Subject: [Rd] FC5 32-bit vs 64-bit
Message-ID: <40F03E16-7A2C-4004-9A15-C629C0AA2237@verizon.net>

Hello,
I am a biostats student and a newbie to R.  I have a question about  
32-bit vs. 64-bit.
I am running FC5 on a AMD 3800+ with 2GB Ram.  With 64-bit, I am  
running into some issues the stability of FC5.  A friend suggested I  
ditch the 64-bit version of FC5 for the 32-bit.  I do not currently  
have any pressing needs for the capabilities of the 64-bit OS. Before  
I reinstall the 32-bit FC5, I want to know the specific effects on R.

I see plenty of articles on 32-bit vs. 64-bit in general, but does  
anyone have any real comparisons of 32 vs. 64 bit using R?

Jeff Barrett


From ripley at stats.ox.ac.uk  Mon Jun 26 08:45:58 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 26 Jun 2006 07:45:58 +0100 (BST)
Subject: [Rd] FC5 32-bit vs 64-bit
In-Reply-To: <40F03E16-7A2C-4004-9A15-C629C0AA2237@verizon.net>
References: <40F03E16-7A2C-4004-9A15-C629C0AA2237@verizon.net>
Message-ID: <Pine.LNX.4.64.0606260740140.18017@gannet.stats.ox.ac.uk>

On Sun, 25 Jun 2006, Jeff Barrett wrote:

> Hello,
> I am a biostats student and a newbie to R.  I have a question about
> 32-bit vs. 64-bit.
> I am running FC5 on a AMD 3800+ with 2GB Ram.  With 64-bit, I am
> running into some issues the stability of FC5.  A friend suggested I
> ditch the 64-bit version of FC5 for the 32-bit.  I do not currently
> have any pressing needs for the capabilities of the 64-bit OS. Before
> I reinstall the 32-bit FC5, I want to know the specific effects on R.
>
> I see plenty of articles on 32-bit vs. 64-bit in general, but does
> anyone have any real comparisons of 32 vs. 64 bit using R?

There are some in the R-admin manual.  If you don't need the address 
space, we recommend a 32-bit build on x86_64 (and tell you how to make 
one).

Many of us have been running R in 64-bit (and 32-bit) on x86_64 for a long 
time with no problems: that includes (more recently) on FC5.  If you are 
seeing instability I would be looking elsewhere (e.g. hardware and 
drivers).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From huber at ebi.ac.uk  Mon Jun 26 12:19:17 2006
From: huber at ebi.ac.uk (huber at ebi.ac.uk)
Date: Mon, 26 Jun 2006 12:19:17 +0200 (CEST)
Subject: [Rd] apparent problem in how PDF evaluates its arguments (PR#9035)
Message-ID: <20060626101917.893D43F254@slim.kubism.ku.dk>

Full_Name: Wolfgang Huber
Version: 2.4.0 (2006-06-24 r38403)
OS: i686-pc-linux-gnu 
Submission from: (NULL) (134.60.107.160)


The simple example script below fails in the call to makepdf1 with
  "Error in eval(expr, envir, enclos) : object "p" not found"

I believe this is a problem in the pdf() function, having to do with the line:
 lapply(Call, function(x) eval.parent(x, 2))

The error does not happen, for example, when "pdf" is replaced by "png".

options(error=recover)
## debug(pdf)

makepdf1 = function(p=1) {
  pdf("test.pdf", pointsize=p)
  plot(1:7)
  dev.off()
}

z=1
makepdf2 = function() {
  pdf("test.pdf", pointsize=z)
  plot(1:7)
  dev.off()
}

makepdf2()
makepdf1()


sessionInfo()


From p.dalgaard at biostat.ku.dk  Mon Jun 26 12:49:19 2006
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 26 Jun 2006 12:49:19 +0200
Subject: [Rd] apparent problem in how PDF evaluates its arguments
	(PR#9035)
In-Reply-To: <20060626101917.893D43F254@slim.kubism.ku.dk>
References: <20060626101917.893D43F254@slim.kubism.ku.dk>
Message-ID: <x2ejxctcnk.fsf@viggo.kubism.ku.dk>

huber at ebi.ac.uk writes:

> Full_Name: Wolfgang Huber
> Version: 2.4.0 (2006-06-24 r38403)
> OS: i686-pc-linux-gnu 
> Submission from: (NULL) (134.60.107.160)
> 
> 
> The simple example script below fails in the call to makepdf1 with
>   "Error in eval(expr, envir, enclos) : object "p" not found"
> 
> I believe this is a problem in the pdf() function, having to do with the line:
>  lapply(Call, function(x) eval.parent(x, 2))

Yup. Should be 3, as far as I can see. Or maybe better

  pframe <- parent.frame()
  new <- lapply(Call, function(x) eval(x, pframe))

> The error does not happen, for example, when "pdf" is replaced by "png".
> 
> options(error=recover)
> ## debug(pdf)
> 
> makepdf1 = function(p=1) {
>   pdf("test.pdf", pointsize=p)
>   plot(1:7)
>   dev.off()
> }
> 
> z=1
> makepdf2 = function() {
>   pdf("test.pdf", pointsize=z)
>   plot(1:7)
>   dev.off()
> }
> 
> makepdf2()
> makepdf1()
> 
> 
> sessionInfo()
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From ripley at stats.ox.ac.uk  Mon Jun 26 13:09:08 2006
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Mon, 26 Jun 2006 13:09:08 +0200 (CEST)
Subject: [Rd] (PR#9035) apparent problem in how PDF evaluates its
	arguments
Message-ID: <20060626110908.04263507F5@slim.kubism.ku.dk>

It was already in the process of being changed, hence the first seven 
lines of the function.  That lapply is no longer needed and has been 
removed (but was not yet committed).

We do normally ask that problems with R-devel ('Under development 
(unstable)') not be sent to R-bugs: as is quite often the case this is 
something that is under active development.

On Mon, 26 Jun 2006, Peter Dalgaard wrote:

> huber at ebi.ac.uk writes:
>
>> Full_Name: Wolfgang Huber
>> Version: 2.4.0 (2006-06-24 r38403)
>> OS: i686-pc-linux-gnu
>> Submission from: (NULL) (134.60.107.160)
>>
>>
>> The simple example script below fails in the call to makepdf1 with
>>   "Error in eval(expr, envir, enclos) : object "p" not found"
>>
>> I believe this is a problem in the pdf() function, having to do with the line:
>>  lapply(Call, function(x) eval.parent(x, 2))
>
> Yup. Should be 3, as far as I can see. Or maybe better
>
>  pframe <- parent.frame()
>  new <- lapply(Call, function(x) eval(x, pframe))
>
>> The error does not happen, for example, when "pdf" is replaced by "png".
>>
>> options(error=recover)
>> ## debug(pdf)
>>
>> makepdf1 = function(p=1) {
>>   pdf("test.pdf", pointsize=p)
>>   plot(1:7)
>>   dev.off()
>> }
>>
>> z=1
>> makepdf2 = function() {
>>   pdf("test.pdf", pointsize=z)
>>   plot(1:7)
>>   dev.off()
>> }
>>
>> makepdf2()
>> makepdf1()
>>
>>
>> sessionInfo()
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ggrothendieck at gmail.com  Mon Jun 26 13:24:44 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 26 Jun 2006 07:24:44 -0400
Subject: [Rd] [R] assign / environment side effect on R 2.4.0
In-Reply-To: <Pine.LNX.4.64.0606261120370.23616@gannet.stats.ox.ac.uk>
References: <449BFB16.6010501@TU-Dresden.de>
	<449C0A4E.9040203@hhbio.wasser.tu-dresden.de>
	<Pine.LNX.4.64.0606261120370.23616@gannet.stats.ox.ac.uk>
Message-ID: <971536df0606260424x27e7143ap22ecaaedd11dbd8c@mail.gmail.com>

I have moved this discussion to r-devel.

The example of the poster suggests that the functionality as implemented
so far in the upcoming 2.4.0 is at this point not correct and needs to
be fixed prior to release.

It violates the idea in R that if one modifies a list in a function then a copy
of that list gets created (at least conceptually) for use within a function
(rather than the original list being modified) and effectively turns what would
have been a local variable into an error-prone global variable.


On 6/26/06, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> Please do study the posting guide, as there is no `R 2.4.0'.
>
> This seems to be related to the NEWS item
>
>     o  [[ on a list does not duplicate the extracted element unless
>        necessary.  (It did not duplicate in other cases, e.g. a
>        pairlist.)
>
> Now in so far as I can follow it, in your example [[ behaves in the same
> way as $ always did (which is what informed people would expect).
>
> R-help is not the place to discuss unreleased versions of R, nor for
> questions about code development.  (Did I mention studying the posting
> guide?)
>
>
> On Fri, 23 Jun 2006, Thomas Petzoldt wrote:
>
> > Sorry,
> >
> > the posted example had the side effect on all platforms (correctly: R
> > 2.2.1/Windows, 2.3.1/Linux, 2.4.0/Windows), but in the following
> > corrected example the behavior of 2.4.0 differs from the older versions.
> >
> > The only difference between the "wrong" and the "new" example is
> > L[["test"]] vs. L$test in the assign.
> >
> > Thomas P.
> >
> >
> > envfun <- function(L) {
> > #  L <- as.list(unlist(L))
> >  p <- parent.frame()
> >  assign("test", L[["test"]], p) ## [["test"]] instead of $test
> >  environment(p[["test"]]) <- p
> > }
> >
> >
> > solver <- function(L) {
> >  envfun(L)
> >  # some other stuff
> > }
> >
> > L <- list(test = function() 1 + 2)
> >
> > e1 <- environment(L$test)
> > solver(L)
> > e2 <- environment(L$test)
> >
> > print(e1)
> > print(e2)
> >
> > ______________________________________________
> > R-help at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
> >
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-help at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
>


From ripley at stats.ox.ac.uk  Mon Jun 26 13:31:50 2006
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Mon, 26 Jun 2006 13:31:50 +0200 (CEST)
Subject: [Rd] a new way to crash R? (PR#8981)
Message-ID: <20060626113150.62CFD5081D@slim.kubism.ku.dk>

This works for me on both Linux and Windows.

Please check your memory usage: it does need about 900Kb of VM, and as you 
have less RAM than that installed you need to set --max-mem-size=1G or 
some such.

(It is quite likely that this is a Windows memory allocation failure: that 
has been reported before but not tracked down.)

On Wed, 14 Jun 2006, jritter at umn.edu wrote:

> This is a multi-part message in MIME format.
> --------------010500030900050501010804
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
> Content-Transfer-Encoding: 7bit
>
> Dear R Team,
>
> First, thank you for incredibly useful software!
>
> Now the bad news:  The attached script (or the original version with
> real data) will reliably crash R on my machine.  I am using:
>
> R version: either 2.2.1 or 2.3.1
> Windows 2000 Professional, Service Pack 4
> 512 MB of RAM
>
> On my machine the script will crash R on line 42 [  probits21 <-
> lapply(...  ].
>
> In both this script and the "real" one, memory.size() indicates that R
> is about 512 MB just before executing the command that crashes it.  In
> other contexts, R has been able to allocate virtual memory on this
> computer without any trouble.
>
> Thanks again for all your work on R.
>
> Regards,
>
> Joe Ritter
>
> --------------------------------------------------------------------------
> Joseph A. Ritter
> Associate Professor
> Humphrey Institute of Public Affairs
> University of Minnesota
> Minneapolis, MN  55455
> U.S.A.
> 612-625-0442
>
> --------------010500030900050501010804
> Content-Type: text/plain;
> name="crash.r"
> Content-Transfer-Encoding: 7bit
> Content-Disposition: inline;
> filename="crash.r"
>
> x1 <- rnorm(10000)
> x2 <- rnorm(10000)
> x3 <- rnorm(10000)
> x4 <- rnorm(10000)
> x5 <- rnorm(10000)
> x6 <- rnorm(10000)
> x7 <- rnorm(10000)
> x8 <- rnorm(10000)
> y <- round(runif(10000))
>
> specs <- list()
> specs$A <- formula(y~x1+x2+x3+x4+x5+x6+x7+x8)
> specs$B <- specs$A
> specs$C <- specs$A
> specs$D <- specs$A
> specs$E <- specs$A
> specs$F <- specs$A
> specs$H <- specs$A
> specs$I <- specs$A
> specs$J <- specs$A
>
> probits1 <- lapply(specs, glm, family=binomial(link="probit"))
> probits2 <- lapply(specs, glm, family=binomial(link="probit"))
> probits3 <- lapply(specs, glm, family=binomial(link="probit"))
> probits4 <- lapply(specs, glm, family=binomial(link="probit"))
> probits5 <- lapply(specs, glm, family=binomial(link="probit"))
> probits6 <- lapply(specs, glm, family=binomial(link="probit"))
> probits7 <- lapply(specs, glm, family=binomial(link="probit"))
> probits8 <- lapply(specs, glm, family=binomial(link="probit"))
> probits9 <- lapply(specs, glm, family=binomial(link="probit"))
> probits10 <- lapply(specs, glm, family=binomial(link="probit"))
> probits11 <- lapply(specs, glm, family=binomial(link="probit"))
> probits12 <- lapply(specs, glm, family=binomial(link="probit"))
> probits13 <- lapply(specs, glm, family=binomial(link="probit"))
> probits14 <- lapply(specs, glm, family=binomial(link="probit"))
> probits15 <- lapply(specs, glm, family=binomial(link="probit"))
> probits16 <- lapply(specs, glm, family=binomial(link="probit"))
> probits17 <- lapply(specs, glm, family=binomial(link="probit"))
> probits18 <- lapply(specs, glm, family=binomial(link="probit"))
> probits19 <- lapply(specs, glm, family=binomial(link="probit"))
> probits20 <- lapply(specs, glm, family=binomial(link="probit"))
> probits21 <- lapply(specs, glm, family=binomial(link="probit"))
> probits22 <- lapply(specs, glm, family=binomial(link="probit"))
> probits23 <- lapply(specs, glm, family=binomial(link="probit"))
> probits24 <- lapply(specs, glm, family=binomial(link="probit"))
> probits25 <- lapply(specs, glm, family=binomial(link="probit"))
> probits26 <- lapply(specs, glm, family=binomial(link="probit"))
> probits27 <- lapply(specs, glm, family=binomial(link="probit"))
> probits28 <- lapply(specs, glm, family=binomial(link="probit"))
> probits29 <- lapply(specs, glm, family=binomial(link="probit"))
> probits30 <- lapply(specs, glm, family=binomial(link="probit"))
> probits31 <- lapply(specs, glm, family=binomial(link="probit"))
>
> --------------010500030900050501010804--
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From p.dalgaard at biostat.ku.dk  Mon Jun 26 13:58:31 2006
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 26 Jun 2006 13:58:31 +0200
Subject: [Rd] [R] assign / environment side effect on R 2.4.0
In-Reply-To: <971536df0606260424x27e7143ap22ecaaedd11dbd8c@mail.gmail.com>
References: <449BFB16.6010501@TU-Dresden.de>
	<449C0A4E.9040203@hhbio.wasser.tu-dresden.de>
	<Pine.LNX.4.64.0606261120370.23616@gannet.stats.ox.ac.uk>
	<971536df0606260424x27e7143ap22ecaaedd11dbd8c@mail.gmail.com>
Message-ID: <x28xnkt9g8.fsf@viggo.kubism.ku.dk>

"Gabor Grothendieck" <ggrothendieck at gmail.com> writes:

> I have moved this discussion to r-devel.
> 
> The example of the poster suggests that the functionality as implemented
> so far in the upcoming 2.4.0 is at this point not correct and needs to
> be fixed prior to release.
> 
> It violates the idea in R that if one modifies a list in a function then a copy
> of that list gets created (at least conceptually) for use within a function
> (rather than the original list being modified) and effectively turns what would
> have been a local variable into an error-prone global variable.
> 
> 
> On 6/26/06, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> > Please do study the posting guide, as there is no `R 2.4.0'.
> >
> > This seems to be related to the NEWS item
> >
> >     o  [[ on a list does not duplicate the extracted element unless
> >        necessary.  (It did not duplicate in other cases, e.g. a
> >        pairlist.)
> >
> > Now in so far as I can follow it, in your example [[ behaves in the same
> > way as $ always did (which is what informed people would expect).

Well, informed people would expect $ and [[ to behave the same, but
they would _not_ expect

> e1 <- environment(L$test)
> solver(L)
> e2 <- environment(L$test)
> print(e1)
<environment: R_GlobalEnv>
> print(e2)
<environment: 0x12f23a8>

unless perhaps substitute() or similar magic was invoked inside
solver() to create call-by-reference semantics. What we have is an
assignment to "test" in the evaluation frame of solver(), which is a
shallow copy of a shallow copy of L$test, so NAMED should be 2 and
modification should force duplication.

In R-devel, this happens with both [[ and $, and in earlier versions
apparently only with $, which seems to be a case where fixing one bug
unmasks another - i.e. $ was always wrong, now both are.

As far as I can see, either assign() or environment<-() has the bug. 

> > R-help is not the place to discuss unreleased versions of R, nor for
> > questions about code development.  (Did I mention studying the posting
> > guide?)
> >
> >
> > On Fri, 23 Jun 2006, Thomas Petzoldt wrote:
> >
> > > Sorry,
> > >
> > > the posted example had the side effect on all platforms (correctly: R
> > > 2.2.1/Windows, 2.3.1/Linux, 2.4.0/Windows), but in the following
> > > corrected example the behavior of 2.4.0 differs from the older versions.
> > >
> > > The only difference between the "wrong" and the "new" example is
> > > L[["test"]] vs. L$test in the assign.
> > >
> > > Thomas P.
> > >
> > >
> > > envfun <- function(L) {
> > > #  L <- as.list(unlist(L))
> > >  p <- parent.frame()
> > >  assign("test", L[["test"]], p) ## [["test"]] instead of $test
> > >  environment(p[["test"]]) <- p
> > > }
> > >
> > >
> > > solver <- function(L) {
> > >  envfun(L)
> > >  # some other stuff
> > > }
> > >
> > > L <- list(test = function() 1 + 2)
> > >
> > > e1 <- environment(L$test)
> > > solver(L)
> > > e2 <- environment(L$test)
> > >
> > > print(e1)
> > > print(e2)
> > >
> > > ______________________________________________
> > > R-help at stat.math.ethz.ch mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
> > >
> >
> > --
> > Brian D. Ripley,                  ripley at stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272866 (PA)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > ______________________________________________
> > R-help at stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
> >
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From murdoch at stats.uwo.ca  Mon Jun 26 15:14:29 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 26 Jun 2006 09:14:29 -0400
Subject: [Rd] a new way to crash R? (PR#8981)
In-Reply-To: <20060614204445.3908C3F033@slim.kubism.ku.dk>
References: <20060614204445.3908C3F033@slim.kubism.ku.dk>
Message-ID: <449FDDB5.6060103@stats.uwo.ca>

On 6/14/2006 4:44 PM, jritter at umn.edu wrote:
> This is a multi-part message in MIME format.
> --------------010500030900050501010804
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
> Content-Transfer-Encoding: 7bit
> 
> Dear R Team,
> 
> First, thank you for incredibly useful software!
> 
> Now the bad news:  The attached script (or the original version with 
> real data) will reliably crash R on my machine.  I am using:
> 
> R version: either 2.2.1 or 2.3.1
> Windows 2000 Professional, Service Pack 4
> 512 MB of RAM

I don't have any Win2K machines, but on an XP laptop with only 256M, I 
see the crash, just after failing a couple of times with out-of-memory 
errors.  I'll see if I can track it down.

Duncan Murdoch

> 
> On my machine the script will crash R on line 42 [  probits21 <- 
> lapply(...  ].  
> 
> In both this script and the "real" one, memory.size() indicates that R 
> is about 512 MB just before executing the command that crashes it.  In 
> other contexts, R has been able to allocate virtual memory on this 
> computer without any trouble.
> 
> Thanks again for all your work on R.
> 
> Regards,
> 
> Joe Ritter
> 
> --------------------------------------------------------------------------
> Joseph A. Ritter
> Associate Professor
> Humphrey Institute of Public Affairs
> University of Minnesota
> Minneapolis, MN  55455
> U.S.A.
> 612-625-0442
> 
> --------------010500030900050501010804
> Content-Type: text/plain;
>  name="crash.r"
> Content-Transfer-Encoding: 7bit
> Content-Disposition: inline;
>  filename="crash.r"
> 
> x1 <- rnorm(10000)
> x2 <- rnorm(10000)
> x3 <- rnorm(10000)
> x4 <- rnorm(10000)
> x5 <- rnorm(10000)
> x6 <- rnorm(10000)
> x7 <- rnorm(10000)
> x8 <- rnorm(10000)
> y <- round(runif(10000))
> 
> specs <- list()
> specs$A <- formula(y~x1+x2+x3+x4+x5+x6+x7+x8) 
> specs$B <- specs$A
> specs$C <- specs$A
> specs$D <- specs$A
> specs$E <- specs$A
> specs$F <- specs$A
> specs$H <- specs$A
> specs$I <- specs$A
> specs$J <- specs$A
> 
> probits1 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits2 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits3 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits4 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits5 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits6 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits7 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits8 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits9 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits10 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits11 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits12 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits13 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits14 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits15 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits16 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits17 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits18 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits19 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits20 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits21 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits22 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits23 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits24 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits25 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits26 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits27 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits28 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits29 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits30 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits31 <- lapply(specs, glm, family=binomial(link="probit"))      
> 
> --------------010500030900050501010804--
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Mon Jun 26 15:19:13 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 26 Jun 2006 14:19:13 +0100 (BST)
Subject: [Rd] Ops.Date: promote characters to Dates?
In-Reply-To: <449EF2F5.3010902@ufl.edu>
References: <loom.20060624T165439-818@post.gmane.org>
	<971536df0606240823l14bfbd4mc1db38af7d23685f@mail.gmail.com>
	<449EF2F5.3010902@ufl.edu>
Message-ID: <Pine.LNX.4.64.0606261018380.21453@gannet.stats.ox.ac.uk>

On Sun, 25 Jun 2006, Ben Bolker wrote:

>    Believe it or not, it works either way: I haven't fully
> figured out the logic yet (except to note that I had the
> logic reversed below):

This is as documented (White Book p.473, referenced on the help page for 
'Ops').  [Surely part of the homework that the posting guide asks for.]

I have recently been expanding the help pages for group generics (and 
trying to remove some of the confusion caused by adding S4 group generics 
to the page for S3 group generics).  This now says (about S3 group 
generics only)

         2.  Group '"Ops"':

            *  '"+"', '"-"', '"*"', '"/"', '"^"', '"%%"', '"%/%"'

            *  '"&"', '"|"', '"!"'

            *  '"=="', '"!="', '"<"', '"<="', '">="', '">"'

         The classes of both arguments are considered in dispatching.
         If a method is found for just one or the same method is found
         for both, it is used.  If different methods are found, there is
         a warning about 'incompatible methods': in that case or if no
         method is found for either argument the default method is used.

> Ops.Date  <- function (e1, e2)
>  {
>    if (nargs() == 1)
>         stop("unary ", .Generic, " not defined for Date objects")
>     boolean <- switch(.Generic, "<" = , ">" = , "==" = , "!=" = ,
>         "<=" = , ">=" = TRUE, FALSE)
>     if (!boolean)
>         stop(.Generic, " not defined for Date objects")
>     if (nchar(e1)) e1 <- as.Date(e1)
>     if (nchar(e2)) e2 <- as.Date(e2)
>     NextMethod(.Generic)
> }

Eh?  nchar is non-zero for almost all objects to be passed through here, 
including any coercible to Date.  (Remember nchar will itself coerce to 
character.)  And nchar(e1) will be a vector, not a scalar: perhaps 
is.character(e1) was what was intended?


I believe the issue is more general: naive users (those who confuse an 
object with its printed representation) expect to be able to compare 
classed objects to character strings, and for the classed objects to be 
converted by as.character() when doing so.  That is not what is done: 
coerceVector(x, STRSXP) is used internally.  At some point we need to 
consider changing that, but it is not easy as method dispatch depends on 
the environment, something that is often not known when coerceVector is 
invoked.


> datechar1 = "1999-12-03"
> datechar2 = "2000-12-07"
> date1 = as.Date(datechar1)
> date2 = as.Date(datechar2)
>
> date1 == datechar1
> datechar1 == date1
>
> datechar1 < date2
> date2 > datechar1
>
>    I also propose
>
> as.Date.numeric <- function(x, ...) {
>    class(x) <- "Date"
>    x
> }
>
>   this takes a number of seconds since 1970 and
> converts it into a Date object ...

That it would not do so is further evidence of the good reasons for not 
providing such a method for people to misinterpret.  (It would be the 
number of days since 1970-01-01, but probably one would want to take 
floor() of a number here.)

>    cheers
>      Ben
>
>
> Gabor Grothendieck wrote:
>> Note that the first argument still cannot be character
>> since Ops.Date won't get dispatched in that case.
>>
>> On 6/24/06, Ben Bolker <bolker at ufl.edu> wrote:
>>>  Ops.Date  <- function (e1, e2)
>>> {
>>>    if (nargs() == 1)
>>>        stop("unary ", .Generic, " not defined for Date objects")
>>>    boolean <- switch(.Generic, "<" = , ">" = , "==" = , "!=" = ,
>>>        "<=" = , ">=" = TRUE, FALSE)
>>>    if (!boolean)
>>>        stop(.Generic, " not defined for Date objects")
>>> +    if (!nchar(e1)) e1 <- as.Date(e1)
>>> +    if (!nchar(e2)) e2 <- as.Date(e2)
>>>    NextMethod(.Generic)
>>> }
>>>
>>>  adding the above two lines to Ops.Date makes, e.g.
>>>
>>> as.Date("1999-12-13") == "1999-06-14"
>>>
>>> behave as "expected".

Depends who is doing the expecting ....

>>>  Does it seem like a good idea?
>>>  (I was inspired by a student's confusion, and by
>>> the fact that Ops.factor does a similar thing -- although
>>> in this case it seems more sensible to promote the
>>> character to a Date rather than demoting the Date
>>> to a character (in which case comparisons might not
>>> work right?))
>>>
>>>  Similar questions might apply to Ops.POSIXt ...
>>>
>>>  Ben Bolker
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From murdoch at stats.uwo.ca  Mon Jun 26 16:34:53 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 26 Jun 2006 10:34:53 -0400
Subject: [Rd] Compiling R and packages with debug information?
Message-ID: <449FF08D.2020401@stats.uwo.ca>

In Unix/Linux/Macos, how do I compile R or a package with debug 
information?  In Windows it's done by defining a DEBUG environment 
variable, but I don't see support for that in the Unix makefiles.  Is 
there a standard ./configure option to set this?

Duncan Murdoch


From ripley at stats.ox.ac.uk  Mon Jun 26 16:46:32 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 26 Jun 2006 15:46:32 +0100 (BST)
Subject: [Rd] Compiling R and packages with debug information?
In-Reply-To: <449FF08D.2020401@stats.uwo.ca>
References: <449FF08D.2020401@stats.uwo.ca>
Message-ID: <Pine.LNX.4.64.0606261544170.11982@gannet.stats.ox.ac.uk>

On Mon, 26 Jun 2006, Duncan Murdoch wrote:

> In Unix/Linux/Macos, how do I compile R or a package with debug
> information?  In Windows it's done by defining a DEBUG environment
> variable, but I don't see support for that in the Unix makefiles.  Is
> there a standard ./configure option to set this?

It is on by default, but controlled by setting CFLAGS/FFLAGS/CXXFLAGS
(which contain -g by default).

The reason the default is different is that we presume that a Unix-alike 
comes with a usable debugger (you may disagree, and it may not be true) 
and Windows does not (definitely an extra).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From bolker at ufl.edu  Mon Jun 26 17:19:10 2006
From: bolker at ufl.edu (Ben Bolker)
Date: Mon, 26 Jun 2006 11:19:10 -0400
Subject: [Rd] Ops.Date: promote characters to Dates?
In-Reply-To: <Pine.LNX.4.64.0606261018380.21453@gannet.stats.ox.ac.uk>
References: <loom.20060624T165439-818@post.gmane.org>
	<971536df0606240823l14bfbd4mc1db38af7d23685f@mail.gmail.com>
	<449EF2F5.3010902@ufl.edu>
	<Pine.LNX.4.64.0606261018380.21453@gannet.stats.ox.ac.uk>
Message-ID: <449FFAEE.9090903@ufl.edu>

Prof Brian Ripley wrote:
> On Sun, 25 Jun 2006, Ben Bolker wrote:
> 

> Eh?  nchar is non-zero for almost all objects to be passed through here,
> including any coercible to Date.  (Remember nchar will itself coerce to
> character.)  And nchar(e1) will be a vector, not a scalar: perhaps
> is.character(e1) was what was intended?

  Yes.  I was following Ops.factor too closely and not thinking
carefully enough.

> I believe the issue is more general: naive users (those who confuse an
> object with its printed representation) expect to be able to compare
> classed objects to character strings, and for the classed objects to be
> converted by as.character() when doing so.

  (My suggestion actually went the other way, converting the character
string to a date: I think the results would be the same in this case
since the particular character representation yyyy-mm-dd sorts in
the same order as dates ...)

 That is not what is done:
> coerceVector(x, STRSXP) is used internally.  At some point we need to
> consider changing that, but it is not easy as method dispatch depends on
> the environment, something that is often not known when coerceVector is
> invoked.

 [snip as.numeric.Date]
>>   this takes a number of seconds since 1970 and
>> converts it into a Date object ...
> 
> That it would not do so is further evidence of the good reasons for not
> providing such a method for people to misinterpret.  (It would be the
> number of days since 1970-01-01, but probably one would want to take
> floor() of a number here.)

  oops again: typo.

   I think my main point is that there are several aspects of working
with dates at this point that are confusing to the naive user, and
it would be nice if there were a consistent way to make them
less confusing without breaking anything.  I only offered the
suggestions above to try to start a conversation about it.

For example, not only is

"1999-12-02"==as.Date("1999-12-03")

FALSE, but so is

"1999-12-02"<as.Date("1999-12-03")
(I believe it is equivalent to
"1999-12-02"<as.character(as.numeric(as.Date("1999-12-03")))

You could just say "don't do that"; I would submit that it is
a reasonable thing for a naive user to do (particularly when
they have been conditioned by having a similar strategy
work for factors) and could get them
into trouble.

  cheers
    Ben Bolker


From sean.hill at epfl.ch  Mon Jun 26 17:27:33 2006
From: sean.hill at epfl.ch (Sean Hill)
Date: Mon, 26 Jun 2006 17:27:33 +0200
Subject: [Rd] rhdf5 package
Message-ID: <52B56967-8A4C-4198-A5D9-5D91D6072B21@epfl.ch>

Is anybody working on maintaining the rhdf5 package at  
bioconductor.org?  I have seen hdf5 which is nice if your data fits  
into memory.  But it would be nice to have a package that supports  
querying the hdf5 dataset.  Is there any up-to-date package like that?

Thanks for any info.

-Sean


From nali at umn.edu  Mon Jun 26 18:34:58 2006
From: nali at umn.edu (Na Li)
Date: Mon, 26 Jun 2006 11:34:58 -0500
Subject: [Rd] C API to R connections?
Message-ID: <e3odwfdgel.fsf@bass.biostat.umn.edu>


Is it a public C API to R connection?  I couldn't find any.  Can I use
the *Rconnection in user C code?

Instead of straight fopen, I would like the ability to read in
compressed file (gz, bz2), remote file, etc, using the implementation
that R already has, with a uniformed interface.

Also it would be nice to open the file/connect in R and handle any
exceptions/errors in R but do the actually reading in C (I'm dealing
with a binary format).

Thanks,

Michael


From murdoch at stats.uwo.ca  Mon Jun 26 22:25:15 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 26 Jun 2006 16:25:15 -0400
Subject: [Rd] a new way to crash R? (PR#8981)
In-Reply-To: <20060626113150.62CFD5081D@slim.kubism.ku.dk>
References: <20060626113150.62CFD5081D@slim.kubism.ku.dk>
Message-ID: <44A042AB.7000503@stats.uwo.ca>

On 6/26/2006 7:31 AM, ripley at stats.ox.ac.uk wrote:
> This works for me on both Linux and Windows.
> 
> Please check your memory usage: it does need about 900Kb of VM, and as you 
> have less RAM than that installed you need to set --max-mem-size=1G or 
> some such.
> 
> (It is quite likely that this is a Windows memory allocation failure: that 
> has been reported before but not tracked down.)

I can make it reproducible now.  It happens relatively quickly when I 
set max-mem-size=100M.  In R-devel, there's a call to malloc at line 
1952 of memory.c, and as R is running out of memory, that returns a -1 
instead of a zero.  This causes a seg fault a few lines later.

The malloc code is quite complicated, so I can't see exactly why we're 
getting the -1.

Duncan Murdoch

> 
> On Wed, 14 Jun 2006, jritter at umn.edu wrote:
> 
>> This is a multi-part message in MIME format.
>> --------------010500030900050501010804
>> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>> Content-Transfer-Encoding: 7bit
>>
>> Dear R Team,
>>
>> First, thank you for incredibly useful software!
>>
>> Now the bad news:  The attached script (or the original version with
>> real data) will reliably crash R on my machine.  I am using:
>>
>> R version: either 2.2.1 or 2.3.1
>> Windows 2000 Professional, Service Pack 4
>> 512 MB of RAM
>>
>> On my machine the script will crash R on line 42 [  probits21 <-
>> lapply(...  ].
>>
>> In both this script and the "real" one, memory.size() indicates that R
>> is about 512 MB just before executing the command that crashes it.  In
>> other contexts, R has been able to allocate virtual memory on this
>> computer without any trouble.
>>
>> Thanks again for all your work on R.
>>
>> Regards,
>>
>> Joe Ritter
>>
>> --------------------------------------------------------------------------
>> Joseph A. Ritter
>> Associate Professor
>> Humphrey Institute of Public Affairs
>> University of Minnesota
>> Minneapolis, MN  55455
>> U.S.A.
>> 612-625-0442
>>
>> --------------010500030900050501010804
>> Content-Type: text/plain;
>> name="crash.r"
>> Content-Transfer-Encoding: 7bit
>> Content-Disposition: inline;
>> filename="crash.r"
>>
>> x1 <- rnorm(10000)
>> x2 <- rnorm(10000)
>> x3 <- rnorm(10000)
>> x4 <- rnorm(10000)
>> x5 <- rnorm(10000)
>> x6 <- rnorm(10000)
>> x7 <- rnorm(10000)
>> x8 <- rnorm(10000)
>> y <- round(runif(10000))
>>
>> specs <- list()
>> specs$A <- formula(y~x1+x2+x3+x4+x5+x6+x7+x8)
>> specs$B <- specs$A
>> specs$C <- specs$A
>> specs$D <- specs$A
>> specs$E <- specs$A
>> specs$F <- specs$A
>> specs$H <- specs$A
>> specs$I <- specs$A
>> specs$J <- specs$A
>>
>> probits1 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits2 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits3 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits4 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits5 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits6 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits7 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits8 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits9 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits10 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits11 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits12 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits13 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits14 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits15 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits16 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits17 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits18 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits19 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits20 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits21 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits22 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits23 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits24 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits25 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits26 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits27 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits28 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits29 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits30 <- lapply(specs, glm, family=binomial(link="probit"))
>> probits31 <- lapply(specs, glm, family=binomial(link="probit"))
>>
>> --------------010500030900050501010804--
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>


From p.dalgaard at biostat.ku.dk  Mon Jun 26 22:47:16 2006
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 26 Jun 2006 22:47:16 +0200
Subject: [Rd] a new way to crash R? (PR#8981)
In-Reply-To: <44A042AB.7000503@stats.uwo.ca>
References: <20060626113150.62CFD5081D@slim.kubism.ku.dk>
	<44A042AB.7000503@stats.uwo.ca>
Message-ID: <x264in3aqz.fsf@turmalin.kubism.ku.dk>

Duncan Murdoch <murdoch at stats.uwo.ca> writes:

> On 6/26/2006 7:31 AM, ripley at stats.ox.ac.uk wrote:
> > This works for me on both Linux and Windows.
> > 
> > Please check your memory usage: it does need about 900Kb of VM, and as you 
> > have less RAM than that installed you need to set --max-mem-size=1G or 
> > some such.
> > 
> > (It is quite likely that this is a Windows memory allocation failure: that 
> > has been reported before but not tracked down.)
> 
> I can make it reproducible now.  It happens relatively quickly when I 
> set max-mem-size=100M.  In R-devel, there's a call to malloc at line 
> 1952 of memory.c, and as R is running out of memory, that returns a -1 
> instead of a zero.  This causes a seg fault a few lines later.
> 
> The malloc code is quite complicated, so I can't see exactly why we're 
> getting the -1.

Hmm, some specs (www.opengroup.org) for malloc have the following

RETURN VALUE

    Upon successful completion with size not equal to 0, malloc()
    shall return a pointer to the allocated space. If size is 0,
    either a null pointer or a unique pointer that can be successfully
    passed to free() shall be returned. Otherwise, it shall return a
    null pointer and set errno to indicate the error.

so the only standards-conforming interpretation of a -1 return is that
the request was for 0 bytes, and "-1" is the representation of the
unique pointer which can be passed to free(). Then again, when was a
Windows lib ever standards-conforming?

BTW, malloc never returns zero, but possibly NULL. 

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From p.dalgaard at biostat.ku.dk  Mon Jun 26 22:47:27 2006
From: p.dalgaard at biostat.ku.dk (p.dalgaard at biostat.ku.dk)
Date: Mon, 26 Jun 2006 22:47:27 +0200 (CEST)
Subject: [Rd] a new way to crash R? (PR#8981)
Message-ID: <20060626204727.4A9B350917@slim.kubism.ku.dk>

Duncan Murdoch <murdoch at stats.uwo.ca> writes:

> On 6/26/2006 7:31 AM, ripley at stats.ox.ac.uk wrote:
> > This works for me on both Linux and Windows.
> > 
> > Please check your memory usage: it does need about 900Kb of VM, and as you 
> > have less RAM than that installed you need to set --max-mem-size=1G or 
> > some such.
> > 
> > (It is quite likely that this is a Windows memory allocation failure: that 
> > has been reported before but not tracked down.)
> 
> I can make it reproducible now.  It happens relatively quickly when I 
> set max-mem-size=100M.  In R-devel, there's a call to malloc at line 
> 1952 of memory.c, and as R is running out of memory, that returns a -1 
> instead of a zero.  This causes a seg fault a few lines later.
> 
> The malloc code is quite complicated, so I can't see exactly why we're 
> getting the -1.

Hmm, some specs (www.opengroup.org) for malloc have the following

RETURN VALUE

    Upon successful completion with size not equal to 0, malloc()
    shall return a pointer to the allocated space. If size is 0,
    either a null pointer or a unique pointer that can be successfully
    passed to free() shall be returned. Otherwise, it shall return a
    null pointer and set errno to indicate the error.

so the only standards-conforming interpretation of a -1 return is that
the request was for 0 bytes, and "-1" is the representation of the
unique pointer which can be passed to free(). Then again, when was a
Windows lib ever standards-conforming?

BTW, malloc never returns zero, but possibly NULL. 

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From murdoch at stats.uwo.ca  Tue Jun 27 03:04:06 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 26 Jun 2006 21:04:06 -0400
Subject: [Rd] a new way to crash R? (PR#8981)
In-Reply-To: <20060614204445.3908C3F033@slim.kubism.ku.dk>
References: <20060614204445.3908C3F033@slim.kubism.ku.dk>
Message-ID: <44A08406.8040202@stats.uwo.ca>

This is now fixed.  Thanks for the report and the code to reproduce it.

Duncan Murdoch

On 6/14/2006 4:44 PM, jritter at umn.edu wrote:
> This is a multi-part message in MIME format.
> --------------010500030900050501010804
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
> Content-Transfer-Encoding: 7bit
> 
> Dear R Team,
> 
> First, thank you for incredibly useful software!
> 
> Now the bad news:  The attached script (or the original version with 
> real data) will reliably crash R on my machine.  I am using:
> 
> R version: either 2.2.1 or 2.3.1
> Windows 2000 Professional, Service Pack 4
> 512 MB of RAM
> 
> On my machine the script will crash R on line 42 [  probits21 <- 
> lapply(...  ].  
> 
> In both this script and the "real" one, memory.size() indicates that R 
> is about 512 MB just before executing the command that crashes it.  In 
> other contexts, R has been able to allocate virtual memory on this 
> computer without any trouble.
> 
> Thanks again for all your work on R.
> 
> Regards,
> 
> Joe Ritter
> 
> --------------------------------------------------------------------------
> Joseph A. Ritter
> Associate Professor
> Humphrey Institute of Public Affairs
> University of Minnesota
> Minneapolis, MN  55455
> U.S.A.
> 612-625-0442
> 
> --------------010500030900050501010804
> Content-Type: text/plain;
>  name="crash.r"
> Content-Transfer-Encoding: 7bit
> Content-Disposition: inline;
>  filename="crash.r"
> 
> x1 <- rnorm(10000)
> x2 <- rnorm(10000)
> x3 <- rnorm(10000)
> x4 <- rnorm(10000)
> x5 <- rnorm(10000)
> x6 <- rnorm(10000)
> x7 <- rnorm(10000)
> x8 <- rnorm(10000)
> y <- round(runif(10000))
> 
> specs <- list()
> specs$A <- formula(y~x1+x2+x3+x4+x5+x6+x7+x8) 
> specs$B <- specs$A
> specs$C <- specs$A
> specs$D <- specs$A
> specs$E <- specs$A
> specs$F <- specs$A
> specs$H <- specs$A
> specs$I <- specs$A
> specs$J <- specs$A
> 
> probits1 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits2 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits3 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits4 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits5 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits6 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits7 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits8 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits9 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits10 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits11 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits12 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits13 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits14 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits15 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits16 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits17 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits18 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits19 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits20 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits21 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits22 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits23 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits24 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits25 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits26 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits27 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits28 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits29 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits30 <- lapply(specs, glm, family=binomial(link="probit"))      
> probits31 <- lapply(specs, glm, family=binomial(link="probit"))      
> 
> --------------010500030900050501010804--
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From goran.brostrom at gmail.com  Tue Jun 27 11:30:42 2006
From: goran.brostrom at gmail.com (=?UTF-8?Q?G=C3=B6ran_Brostr=C3=B6m?=)
Date: Tue, 27 Jun 2006 11:30:42 +0200
Subject: [Rd] UTF-8 and .Rd files
Message-ID: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>

I have been converting to utf8 from latin1, and this gives me
problems, some solved, but here is one unsolved: In my .Rd files, I
have included '\encoding{UTF-8}' at the top. Despite this, the HTML
help pages contains 'content="text/html; charset=iso-8859-1"', and my
name is mangled. What can I do about this?

I'm on Ubuntu (latest), R-2.3.1

Thanks,

G?ran


From ripley at stats.ox.ac.uk  Tue Jun 27 12:11:38 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 27 Jun 2006 11:11:38 +0100 (BST)
Subject: [Rd] UTF-8 and .Rd files
In-Reply-To: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>
References: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>

On Tue, 27 Jun 2006, G?ran Brostr?m wrote:

> I have been converting to utf8 from latin1, and this gives me
> problems, some solved, but here is one unsolved: In my .Rd files, I
> have included '\encoding{UTF-8}' at the top. Despite this, the HTML
> help pages contains 'content="text/html; charset=iso-8859-1"', and my
> name is mangled. What can I do about this?

Reproducible example, please!  (I've just tried this and it works for me.)

As described in my talk at UseR 2006, you may well not want to do this if 
you intend to distribute the package.  Your name contains characters that 
are not in the fonts used in UTF-8 in non-European locales, and Windows 
users do no have ready access to UTF-8 viewers (even if they know the 
files are UTF-8).

> I'm on Ubuntu (latest), R-2.3.1

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Philippe.Grosjean at umh.ac.be  Tue Jun 27 12:29:43 2006
From: Philippe.Grosjean at umh.ac.be (Philippe Grosjean)
Date: Tue, 27 Jun 2006 12:29:43 +0200
Subject: [Rd] New developers section on the R Wiki
Message-ID: <44A10897.5010709@umh.ac.be>

Hello all,

There is a new section on the R Wiki (hhtp://wiki.r-project.org) 
dedicated to discussions around various R developments 
(http://wiki.r-project.org/rwiki/doku.php?id=developers:developers).

Any R developer is free to create a page, or a whole subsection to 
discuss particular R developement aspects. This is of course purely 
optional. In particular, R Core Team members use to maintain their own 
development section at http://developer.r-project.org/.

Note also that, if you create a page on the R Wiki, it is to share a 
discussion about your developements with other useRs/developeRs. If your 
intention is just to inform people about your own developments, you 
should better write an HTML page on your own Web site (read-only for the 
other useRs/developeRs).
Best,

Philippe Grosjean

(Sorry for possible cross-posting)
-- 
..............................................<?}))><........
  ) ) ) ) )
( ( ( ( (    Prof. Philippe Grosjean
  ) ) ) ) )
( ( ( ( (    Numerical Ecology of Aquatic Systems
  ) ) ) ) )   Mons-Hainaut University, Belgium
( ( ( ( (
..............................................................


From goran.brostrom at gmail.com  Tue Jun 27 14:46:40 2006
From: goran.brostrom at gmail.com (=?UTF-8?Q?G=C3=B6ran_Brostr=C3=B6m?=)
Date: Tue, 27 Jun 2006 14:46:40 +0200
Subject: [Rd] UTF-8 and .Rd files
In-Reply-To: <Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>
References: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>
	<Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>
Message-ID: <148ed8180606270546m73d30f60yf8f1f33d8c874616@mail.gmail.com>

On 6/27/06, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> On Tue, 27 Jun 2006, G?ran Brostr?m wrote:
>
> > I have been converting to utf8 from latin1, and this gives me
> > problems, some solved, but here is one unsolved: In my .Rd files, I
> > have included '\encoding{UTF-8}' at the top. Despite this, the HTML
> > help pages contains 'content="text/html; charset=iso-8859-1"', and my
> > name is mangled. What can I do about this?
>
> Reproducible example, please!  (I've just tried this and it works for me.)
>
> As described in my talk at UseR 2006, you may well not want to do this if
> you intend to distribute the package.  Your name contains characters that
> are not in the fonts used in UTF-8 in non-European locales, and Windows
> users do no have ready access to UTF-8 viewers (even if they know the
> files are UTF-8).

Thanks for your answer! So this means that 'latin1' does not cause
problems for non-European locales and Windows users, I take it.

I really only need non-ascii to write the name ot the author (me)
correctly. I tried LaTeX code ({\"o}), but that didn't work. Is there
a way around this?

G?ran

>
> > I'm on Ubuntu (latest), R-2.3.1
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>


-- 
G?ran Brostr?m


From luke at stat.uiowa.edu  Tue Jun 27 15:26:31 2006
From: luke at stat.uiowa.edu (Luke Tierney)
Date: Tue, 27 Jun 2006 08:26:31 -0500 (CDT)
Subject: [Rd] using withCallingHandlers, how to deal with warning( ,
 immediate. = TRUE)?
In-Reply-To: <449ECB36.4050208@umh.ac.be>
References: <449ECB36.4050208@umh.ac.be>
Message-ID: <Pine.LNX.4.64.0606270815180.2811@itasca2.wildberry.org>

I don't think there is currently any way of identifying the
immediate. = TRUE calls short of walking up the call stack with the
appropriate sys.xyz functions.  A better design would have been for
calls with immediate. = TRUE to signal warnings of a subclass of
simpleWarning, say immediateSimpleWarning, so these can be caught and
handled more reasonably.  I'll make a note to look into this.

Best,

luke


On Sun, 25 Jun 2006, Philippe Grosjean wrote:

> Hello,
>
> I want to use withCallingHandlers(expr, warning = function(w) { ....}),
> that is, to use a custom warning handler. I want this handler to
> replicate the behavior of the usual handler. I have problems with the
> mode 'options(warn = 0)' where the warnings are delayed, except if
> calling  'warning("message", immediate. = TRUE). Indeed, if my custom
> warning handler manages to delay the display of warning messages, it
> cannot detect if the argument immediate. = TRUE was use, and thus, it
> cannot behave consequently.
>
> Here is a toy example to illustrate my problem (whole script at the end
> of this message):
>
> > # This is what I want to replicate in my own handler:
> > options(warn = 0)
> > options(warning.expression = NULL)
> > for (i in 1:3) {
> +   print(i)
> +   warning("test", immediate. = (i < 2))
> + }
> [1] 1
> Warning: test
> [1] 2
> [1] 3
> Warning messages:
> 1: test
> 2: test
> # First warning is NOT delayed, but the others are
>
> Here is what I could use if I do not delay printing of warnings:
>
> > options(warning.expression = NULL)
> > options(warning.expression = expression()) # Disable normal warnings
> > withCallingHandlers(for (i in 1:3) {print(i);
> +   warning("test", immediate. = (i < 2))},
> +   warning = function(w)
> +   cat("Warning:", conditionMessage(w), "\n"))
> [1] 1
> Warning: test
> [1] 2
> Warning: test
> [1] 3
> Warning: test
> > options(warning.expression = NULL)
>
> It gets a little bit more complex to delay handling of warning messages,
> but basically, I manage it that way:
>
> > options(warning.expression = NULL)
> > options(warning.expression = NULL)
> > options(warning.expression = expression()) # Disable normal warnings
> > if (exists("last.warning", envir = .GlobalEnv))
> +   rm("last.warning", envir = .GlobalEnv)
> > withCallingHandlers(for (i in 1:3) {print(i);
> +   warning("test", immediate. = (i < 2))},
> +   warning = function(w) {
> +     if (exists("last.warning", envir = .GlobalEnv)) {
> +       lwarn <- get("last.warning", envir = .GlobalEnv)
> +     } else lwarn <- list()
> +     # Do not add more than 50 warnings
> +     if (length(lwarn) >= 50) return()
> +     # Add the warning to this list
> +     nwarn <- length(lwarn)
> +     names.warn <- names(lwarn)
> +     Call <- conditionCall(w)
> +     lwarn[[nwarn + 1]] <- Call
> +     names(lwarn) <- c(names.warn, conditionMessage(w))
> +     # Save the modified version in .GlobalEnv
> +     last.warning <<- lwarn
> + })
> [1] 1
> [1] 2
> [1] 3
> > invisible(warnings()) # Now display delayed warnings()
> Warning messages:
> 1: test in: withCallingHandlers(for (i in 1:3) {  ...
> 2: test in: withCallingHandlers(for (i in 1:3) {  ...
> 3: test in: withCallingHandlers(for (i in 1:3) {  ...
> > options(warning.expression = NULL)
>
> Now, obviously, I need a mechanism to detect if 'immediate. = TRUE' was
> used in warning(), in order to delay or not accordingly, and replicate
> exactly the example above... BUT... I have no idea at all where I can
> find this information! Could someone help me, please?
> Best,
>
> Philippe Grosjean
>
> P.S.: here is the complete script of the toy example:
>
> ### The example we want to replicate with our own handler
> options(warn = 0)
> options(warning.expression = NULL)
> for (i in 1:3) {
>   print(i)
>   warning("test", immediate. = (i < 2))
> }
>
> ### A custom warning handler that does NOT delay warning messages
> options(warning.expression = NULL)
> options(warning.expression = expression()) # Disable normal warnings
> withCallingHandlers(for (i in 1:3) {print(i);
>   warning("test", immediate. = (i < 2))},
>   warning = function(w)
>   cat("Warning:", conditionMessage(w), "\n"))
> options(warning.expression = NULL)
>
> ### A custom warning handler that ALWAYS delays warning messages
> options(warning.expression = NULL)
> options(warning.expression = expression()) # Disable normal warnings
> if (exists("last.warning", envir = .GlobalEnv))
>   rm("last.warning", envir = .GlobalEnv)
> withCallingHandlers(for (i in 1:3) {print(i);
>   warning("test", immediate. = (i < 2))},
>   warning = function(w) {
>     if (exists("last.warning", envir = .GlobalEnv)) {
>       lwarn <- get("last.warning", envir = .GlobalEnv)
>     } else lwarn <- list()
>     # Do not add more than 50 warnings
>     if (length(lwarn) >= 50) return()
>     # Add the warning to this list
>     nwarn <- length(lwarn)
>     names.warn <- names(lwarn)
>     Call <- conditionCall(w)
>     lwarn[[nwarn + 1]] <- Call
>     names(lwarn) <- c(names.warn, conditionMessage(w))
>     # Save the modified version in .GlobalEnv
>     last.warning <<- lwarn
> })
> invisible(warnings()) # Now display delayed warnings()
> options(warning.expression = NULL)
>
> ### How do I write my handler that delays only when warn = 0 and
> ### immediate. = FALSE in the calling of warning() ???
> # ...?
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Luke Tierney
Chair, Statistics and Actuarial Science
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:      luke at stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From phgrosjean at sciviews.org  Tue Jun 27 15:48:59 2006
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Tue, 27 Jun 2006 15:48:59 +0200
Subject: [Rd] using withCallingHandlers, how to deal with warning( ,
 immediate. = TRUE)?
In-Reply-To: <Pine.LNX.4.64.0606270815180.2811@itasca2.wildberry.org>
References: <449ECB36.4050208@umh.ac.be>
	<Pine.LNX.4.64.0606270815180.2811@itasca2.wildberry.org>
Message-ID: <44A1374B.5060400@sciviews.org>

Luke Tierney wrote:
> I don't think there is currently any way of identifying the
> immediate. = TRUE calls short of walking up the call stack with the
> appropriate sys.xyz functions.  A better design would have been for
> calls with immediate. = TRUE to signal warnings of a subclass of
> simpleWarning, say immediateSimpleWarning, so these can be caught and
> handled more reasonably.  I'll make a note to look into this.

Yes, that would be wonderful!
Best,

Philippe

> Best,
> 
> luke
> 
> 
> On Sun, 25 Jun 2006, Philippe Grosjean wrote:
> 
>> Hello,
>>
>> I want to use withCallingHandlers(expr, warning = function(w) { ....}),
>> that is, to use a custom warning handler. I want this handler to
>> replicate the behavior of the usual handler. I have problems with the
>> mode 'options(warn = 0)' where the warnings are delayed, except if
>> calling  'warning("message", immediate. = TRUE). Indeed, if my custom
>> warning handler manages to delay the display of warning messages, it
>> cannot detect if the argument immediate. = TRUE was use, and thus, it
>> cannot behave consequently.
>>
>> Here is a toy example to illustrate my problem (whole script at the end
>> of this message):
>>
>> > # This is what I want to replicate in my own handler:
>> > options(warn = 0)
>> > options(warning.expression = NULL)
>> > for (i in 1:3) {
>> +   print(i)
>> +   warning("test", immediate. = (i < 2))
>> + }
>> [1] 1
>> Warning: test
>> [1] 2
>> [1] 3
>> Warning messages:
>> 1: test
>> 2: test
>> # First warning is NOT delayed, but the others are
>>
>> Here is what I could use if I do not delay printing of warnings:
>>
>> > options(warning.expression = NULL)
>> > options(warning.expression = expression()) # Disable normal warnings
>> > withCallingHandlers(for (i in 1:3) {print(i);
>> +   warning("test", immediate. = (i < 2))},
>> +   warning = function(w)
>> +   cat("Warning:", conditionMessage(w), "\n"))
>> [1] 1
>> Warning: test
>> [1] 2
>> Warning: test
>> [1] 3
>> Warning: test
>> > options(warning.expression = NULL)
>>
>> It gets a little bit more complex to delay handling of warning messages,
>> but basically, I manage it that way:
>>
>> > options(warning.expression = NULL)
>> > options(warning.expression = NULL)
>> > options(warning.expression = expression()) # Disable normal warnings
>> > if (exists("last.warning", envir = .GlobalEnv))
>> +   rm("last.warning", envir = .GlobalEnv)
>> > withCallingHandlers(for (i in 1:3) {print(i);
>> +   warning("test", immediate. = (i < 2))},
>> +   warning = function(w) {
>> +     if (exists("last.warning", envir = .GlobalEnv)) {
>> +       lwarn <- get("last.warning", envir = .GlobalEnv)
>> +     } else lwarn <- list()
>> +     # Do not add more than 50 warnings
>> +     if (length(lwarn) >= 50) return()
>> +     # Add the warning to this list
>> +     nwarn <- length(lwarn)
>> +     names.warn <- names(lwarn)
>> +     Call <- conditionCall(w)
>> +     lwarn[[nwarn + 1]] <- Call
>> +     names(lwarn) <- c(names.warn, conditionMessage(w))
>> +     # Save the modified version in .GlobalEnv
>> +     last.warning <<- lwarn
>> + })
>> [1] 1
>> [1] 2
>> [1] 3
>> > invisible(warnings()) # Now display delayed warnings()
>> Warning messages:
>> 1: test in: withCallingHandlers(for (i in 1:3) {  ...
>> 2: test in: withCallingHandlers(for (i in 1:3) {  ...
>> 3: test in: withCallingHandlers(for (i in 1:3) {  ...
>> > options(warning.expression = NULL)
>>
>> Now, obviously, I need a mechanism to detect if 'immediate. = TRUE' was
>> used in warning(), in order to delay or not accordingly, and replicate
>> exactly the example above... BUT... I have no idea at all where I can
>> find this information! Could someone help me, please?
>> Best,
>>
>> Philippe Grosjean
>>
>> P.S.: here is the complete script of the toy example:
>>
>> ### The example we want to replicate with our own handler
>> options(warn = 0)
>> options(warning.expression = NULL)
>> for (i in 1:3) {
>>   print(i)
>>   warning("test", immediate. = (i < 2))
>> }
>>
>> ### A custom warning handler that does NOT delay warning messages
>> options(warning.expression = NULL)
>> options(warning.expression = expression()) # Disable normal warnings
>> withCallingHandlers(for (i in 1:3) {print(i);
>>   warning("test", immediate. = (i < 2))},
>>   warning = function(w)
>>   cat("Warning:", conditionMessage(w), "\n"))
>> options(warning.expression = NULL)
>>
>> ### A custom warning handler that ALWAYS delays warning messages
>> options(warning.expression = NULL)
>> options(warning.expression = expression()) # Disable normal warnings
>> if (exists("last.warning", envir = .GlobalEnv))
>>   rm("last.warning", envir = .GlobalEnv)
>> withCallingHandlers(for (i in 1:3) {print(i);
>>   warning("test", immediate. = (i < 2))},
>>   warning = function(w) {
>>     if (exists("last.warning", envir = .GlobalEnv)) {
>>       lwarn <- get("last.warning", envir = .GlobalEnv)
>>     } else lwarn <- list()
>>     # Do not add more than 50 warnings
>>     if (length(lwarn) >= 50) return()
>>     # Add the warning to this list
>>     nwarn <- length(lwarn)
>>     names.warn <- names(lwarn)
>>     Call <- conditionCall(w)
>>     lwarn[[nwarn + 1]] <- Call
>>     names(lwarn) <- c(names.warn, conditionMessage(w))
>>     # Save the modified version in .GlobalEnv
>>     last.warning <<- lwarn
>> })
>> invisible(warnings()) # Now display delayed warnings()
>> options(warning.expression = NULL)
>>
>> ### How do I write my handler that delays only when warn = 0 and
>> ### immediate. = FALSE in the calling of warning() ???
>> # ...?
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>


From hin-tak.leung at cimr.cam.ac.uk  Tue Jun 27 17:05:09 2006
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Tue, 27 Jun 2006 16:05:09 +0100
Subject: [Rd] UTF-8 and .Rd files
In-Reply-To: <148ed8180606270546m73d30f60yf8f1f33d8c874616@mail.gmail.com>
References: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>	<Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>
	<148ed8180606270546m73d30f60yf8f1f33d8c874616@mail.gmail.com>
Message-ID: <44A14925.3040707@cimr.cam.ac.uk>

G?ran Brostr?m wrote:
> On 6/27/06, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>> On Tue, 27 Jun 2006, G?ran Brostr?m wrote:
>>
>>> I have been converting to utf8 from latin1, and this gives me
>>> problems, some solved, but here is one unsolved: In my .Rd files, I
>>> have included '\encoding{UTF-8}' at the top. Despite this, the HTML
>>> help pages contains 'content="text/html; charset=iso-8859-1"', and my
>>> name is mangled. What can I do about this?
>> Reproducible example, please!  (I've just tried this and it works for me.)
>>
>> As described in my talk at UseR 2006, you may well not want to do this if
>> you intend to distribute the package.  Your name contains characters that
>> are not in the fonts used in UTF-8 in non-European locales, and Windows
>> users do no have ready access to UTF-8 viewers (even if they know the
>> files are UTF-8).
> 
> Thanks for your answer! So this means that 'latin1' does not cause
> problems for non-European locales and Windows users, I take it.
> 
> I really only need non-ascii to write the name ot the author (me)
> correctly. I tried LaTeX code ({\"o}), but that didn't work. Is there
> a way around this?
> 
> G?ran

The \"o character in my latin1 (iso 8859-1) man page says it is 0xF6
  F6 - LATIN SMALL LETTER O WITH DIAERESIS
The capital version is
  D6 -  LATIN CAPITAL LETTER O WITH DIAERESIS

in html I think you need to do &#F6; or something for that character to 
appear?

HTH

HTL


From spencer.graves at pdf.com  Tue Jun 27 20:01:13 2006
From: spencer.graves at pdf.com (Spencer Graves)
Date: Tue, 27 Jun 2006 11:01:13 -0700
Subject: [Rd] UTF-8 and .Rd files
In-Reply-To: <44A14925.3040707@cimr.cam.ac.uk>
References: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>	<Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>	<148ed8180606270546m73d30f60yf8f1f33d8c874616@mail.gmail.com>
	<44A14925.3040707@cimr.cam.ac.uk>
Message-ID: <44A17269.5010803@pdf.com>

Hello, G?ran:

	  Have you considered the German solution:  "Goeran"?  (e.g., Wuertz 
for W?rtz)?

	  Be thankful that you aren't Russian or Greek or Arabic or Chinese, 
etc., for which there may be no standard transliteration into the Latin 
alphabet.

	  Sorry I can't be more helpful.

	  Spencer Graves
p.s.  When I'm with native Spanish speakers who don't know English, I 
pronounce my name very differently, like "Espencer Gra-ve", to match how 
they would pronounce my name when they see it written.  Similarly, I 
once heard a French Canadian take about his young son, Guillaume.  If 
you ask him in English, "What's your name?" he replies, "Bill".  If you 
ask the same question in French, he replies, "Guillaume".

Hin-Tak Leung wrote:
> G?ran Brostr?m wrote:
>> On 6/27/06, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>> On Tue, 27 Jun 2006, G?ran Brostr?m wrote:
>>>
>>>> I have been converting to utf8 from latin1, and this gives me
>>>> problems, some solved, but here is one unsolved: In my .Rd files, I
>>>> have included '\encoding{UTF-8}' at the top. Despite this, the HTML
>>>> help pages contains 'content="text/html; charset=iso-8859-1"', and my
>>>> name is mangled. What can I do about this?
>>> Reproducible example, please!  (I've just tried this and it works for me.)
>>>
>>> As described in my talk at UseR 2006, you may well not want to do this if
>>> you intend to distribute the package.  Your name contains characters that
>>> are not in the fonts used in UTF-8 in non-European locales, and Windows
>>> users do no have ready access to UTF-8 viewers (even if they know the
>>> files are UTF-8).
>> Thanks for your answer! So this means that 'latin1' does not cause
>> problems for non-European locales and Windows users, I take it.
>>
>> I really only need non-ascii to write the name ot the author (me)
>> correctly. I tried LaTeX code ({\"o}), but that didn't work. Is there
>> a way around this?
>>
>> G?ran
> 
> The \"o character in my latin1 (iso 8859-1) man page says it is 0xF6
>   F6 - LATIN SMALL LETTER O WITH DIAERESIS
> The capital version is
>   D6 -  LATIN CAPITAL LETTER O WITH DIAERESIS
> 
> in html I think you need to do &#F6; or something for that character to 
> appear?
> 
> HTH
> 
> HTL
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From hin-tak.leung at cimr.cam.ac.uk  Tue Jun 27 20:22:21 2006
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Tue, 27 Jun 2006 19:22:21 +0100
Subject: [Rd] UTF-8 and .Rd files
In-Reply-To: <44A17269.5010803@pdf.com>
References: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>	<Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>	<148ed8180606270546m73d30f60yf8f1f33d8c874616@mail.gmail.com>
	<44A14925.3040707@cimr.cam.ac.uk> <44A17269.5010803@pdf.com>
Message-ID: <44A1775D.1020504@cimr.cam.ac.uk>

Spencer Graves wrote:
> Hello, G?ran:
> 
>       Have you considered the German solution:  "Goeran"?  (e.g., Wuertz 
> for W?rtz)?
> 
>       Be thankful that you aren't Russian or Greek or Arabic or Chinese, 
> etc., for which there may be no standard transliteration into the Latin 
> alphabet.

Well, I have to live with that, being of one of the above mentioned 
catergories. Where it is important to have my own name in native form
in documents, I keep around a png, a eps with postscript type 1
font embedded, and a pdf from the eps for the odd pdflatex occasions.

It is going to be very hack-ish, but I wonder if it is possible to
utilise the fact that latex comments (%) are not the same as html 
comments (<!-- -->) and vice versa, to make things work.

I seems to recall somewhere in the R-extension manual about being about 
to do \alternatives{latex stuff}{ascii stuff} for alternatives
which are destined to appear in different converted output types.
(Prof Ripley at this point would probably tell me the exact page
number and references...)

Hin-Tak

> 
>       Sorry I can't be more helpful.
> 
>       Spencer Graves
> p.s.  When I'm with native Spanish speakers who don't know English, I 
> pronounce my name very differently, like "Espencer Gra-ve", to match how 
> they would pronounce my name when they see it written.  Similarly, I 
> once heard a French Canadian take about his young son, Guillaume.  If 
> you ask him in English, "What's your name?" he replies, "Bill".  If you 
> ask the same question in French, he replies, "Guillaume".
> 
> Hin-Tak Leung wrote:
>> G?ran Brostr?m wrote:
>>> On 6/27/06, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>>> On Tue, 27 Jun 2006, G?ran Brostr?m wrote:
>>>>
>>>>> I have been converting to utf8 from latin1, and this gives me
>>>>> problems, some solved, but here is one unsolved: In my .Rd files, I
>>>>> have included '\encoding{UTF-8}' at the top. Despite this, the HTML
>>>>> help pages contains 'content="text/html; charset=iso-8859-1"', and my
>>>>> name is mangled. What can I do about this?
>>>> Reproducible example, please!  (I've just tried this and it works 
>>>> for me.)
>>>>
>>>> As described in my talk at UseR 2006, you may well not want to do 
>>>> this if
>>>> you intend to distribute the package.  Your name contains characters 
>>>> that
>>>> are not in the fonts used in UTF-8 in non-European locales, and Windows
>>>> users do no have ready access to UTF-8 viewers (even if they know the
>>>> files are UTF-8).
>>> Thanks for your answer! So this means that 'latin1' does not cause
>>> problems for non-European locales and Windows users, I take it.
>>>
>>> I really only need non-ascii to write the name ot the author (me)
>>> correctly. I tried LaTeX code ({\"o}), but that didn't work. Is there
>>> a way around this?
>>>
>>> G?ran
>>
>> The \"o character in my latin1 (iso 8859-1) man page says it is 0xF6
>>   F6 - LATIN SMALL LETTER O WITH DIAERESIS
>> The capital version is
>>   D6 -  LATIN CAPITAL LETTER O WITH DIAERESIS
>>
>> in html I think you need to do &#F6; or something for that character 
>> to appear?
>>
>> HTH
>>
>> HTL
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Tue Jun 27 20:22:58 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 27 Jun 2006 19:22:58 +0100 (BST)
Subject: [Rd] UTF-8 and .Rd files
In-Reply-To: <44A17269.5010803@pdf.com>
References: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>
	<Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>
	<148ed8180606270546m73d30f60yf8f1f33d8c874616@mail.gmail.com>
	<44A14925.3040707@cimr.cam.ac.uk> <44A17269.5010803@pdf.com>
Message-ID: <Pine.LNX.4.64.0606271917350.20718@gannet.stats.ox.ac.uk>

We describe how to use \enc for possible transliterations for exactly this 
purpose in the `Writing R Extensions' manual.

In answer to G?ran's question, yes latin1 is safer than UTF-8 for HTML 
browsers but neither are guaranteed to contain a glyph for ? in a font 
used e.g. in a Russian locale.

On Tue, 27 Jun 2006, Spencer Graves wrote:

> Hello, G?ran:
>
> 	  Have you considered the German solution:  "Goeran"?  (e.g., Wuertz 
> for W?rtz)?
>
> 	  Be thankful that you aren't Russian or Greek or Arabic or Chinese, 
> etc., for which there may be no standard transliteration into the Latin 
> alphabet.
>
> 	  Sorry I can't be more helpful.
>
> 	  Spencer Graves
> p.s.  When I'm with native Spanish speakers who don't know English, I 
> pronounce my name very differently, like "Espencer Gra-ve", to match how they 
> would pronounce my name when they see it written.  Similarly, I once heard a 
> French Canadian take about his young son, Guillaume.  If you ask him in 
> English, "What's your name?" he replies, "Bill".  If you ask the same 
> question in French, he replies, "Guillaume".
>
> Hin-Tak Leung wrote:
>> G?ran Brostr?m wrote:
>>> On 6/27/06, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>>> On Tue, 27 Jun 2006, G?ran Brostr?m wrote:
>>>> 
>>>>> I have been converting to utf8 from latin1, and this gives me
>>>>> problems, some solved, but here is one unsolved: In my .Rd files, I
>>>>> have included '\encoding{UTF-8}' at the top. Despite this, the HTML
>>>>> help pages contains 'content="text/html; charset=iso-8859-1"', and my
>>>>> name is mangled. What can I do about this?
>>>> Reproducible example, please!  (I've just tried this and it works for 
>>>> me.)
>>>> 
>>>> As described in my talk at UseR 2006, you may well not want to do this if
>>>> you intend to distribute the package.  Your name contains characters that
>>>> are not in the fonts used in UTF-8 in non-European locales, and Windows
>>>> users do no have ready access to UTF-8 viewers (even if they know the
>>>> files are UTF-8).
>>> Thanks for your answer! So this means that 'latin1' does not cause
>>> problems for non-European locales and Windows users, I take it.
>>> 
>>> I really only need non-ascii to write the name ot the author (me)
>>> correctly. I tried LaTeX code ({\"o}), but that didn't work. Is there
>>> a way around this?
>>> 
>>> G?ran
>> 
>> The \"o character in my latin1 (iso 8859-1) man page says it is 0xF6
>>   F6 - LATIN SMALL LETTER O WITH DIAERESIS
>> The capital version is
>>   D6 -  LATIN CAPITAL LETTER O WITH DIAERESIS
>> 
>> in html I think you need to do &#F6; or something for that character to 
>> appear?
>> 
>> HTH
>> 
>> HTL
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From goran.brostrom at gmail.com  Tue Jun 27 20:30:52 2006
From: goran.brostrom at gmail.com (=?UTF-8?Q?G=C3=B6ran_Brostr=C3=B6m?=)
Date: Tue, 27 Jun 2006 20:30:52 +0200
Subject: [Rd] UTF-8 and .Rd files
In-Reply-To: <44A17269.5010803@pdf.com>
References: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>
	<Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>
	<148ed8180606270546m73d30f60yf8f1f33d8c874616@mail.gmail.com>
	<44A14925.3040707@cimr.cam.ac.uk> <44A17269.5010803@pdf.com>
Message-ID: <148ed8180606271130w44024df3w49aa3340b8a107d6@mail.gmail.com>

On 6/27/06, Spencer Graves <spencer.graves at pdf.com> wrote:
> Hello, G?ran:
>
>           Have you considered the German solution:  "Goeran"?  (e.g., Wuertz
> for W?rtz)?

Yes, but really not; I like your p.s. solution better!

>           Be thankful that you aren't Russian or Greek or Arabic or Chinese,
> etc., for which there may be no standard transliteration into the Latin
> alphabet.
>
>           Sorry I can't be more helpful.
>
>           Spencer Graves
> p.s.  When I'm with native Spanish speakers who don't know English, I
> pronounce my name very differently, like "Espencer Gra-ve", to match how
> they would pronounce my name when they see it written.  Similarly, I
> once heard a French Canadian take about his young son, Guillaume.  If
> you ask him in English, "What's your name?" he replies, "Bill".  If you
> ask the same question in French, he replies, "Guillaume".

Good idea! I call myself "George" in English, "Yuri" in Russian,
"Goran" on Balkan, etc.

Seriously, I thoght that unicode and utf8 would make problems like
this disappear, but obviously we may have to wait another 30 years.

Thanks for all the input.

George

> Hin-Tak Leung wrote:
> > G?ran Brostr?m wrote:
> >> On 6/27/06, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> >>> On Tue, 27 Jun 2006, G?ran Brostr?m wrote:
> >>>
> >>>> I have been converting to utf8 from latin1, and this gives me
> >>>> problems, some solved, but here is one unsolved: In my .Rd files, I
> >>>> have included '\encoding{UTF-8}' at the top. Despite this, the HTML
> >>>> help pages contains 'content="text/html; charset=iso-8859-1"', and my
> >>>> name is mangled. What can I do about this?
> >>> Reproducible example, please!  (I've just tried this and it works for me.)
> >>>
> >>> As described in my talk at UseR 2006, you may well not want to do this if
> >>> you intend to distribute the package.  Your name contains characters that
> >>> are not in the fonts used in UTF-8 in non-European locales, and Windows
> >>> users do no have ready access to UTF-8 viewers (even if they know the
> >>> files are UTF-8).
> >> Thanks for your answer! So this means that 'latin1' does not cause
> >> problems for non-European locales and Windows users, I take it.
> >>
> >> I really only need non-ascii to write the name ot the author (me)
> >> correctly. I tried LaTeX code ({\"o}), but that didn't work. Is there
> >> a way around this?
> >>
> >> G?ran
> >
> > The \"o character in my latin1 (iso 8859-1) man page says it is 0xF6
> >   F6 - LATIN SMALL LETTER O WITH DIAERESIS
> > The capital version is
> >   D6 -  LATIN CAPITAL LETTER O WITH DIAERESIS
> >
> > in html I think you need to do &#F6; or something for that character to
> > appear?
> >
> > HTH
> >
> > HTL
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
>


-- 
G?ran Brostr?m


From ldimitro at wfubmc.edu  Tue Jun 27 21:51:43 2006
From: ldimitro at wfubmc.edu (Latchezar Dimitrov)
Date: Tue, 27 Jun 2006 15:51:43 -0400
Subject: [Rd] UTF-8 and .Rd files
Message-ID: <F160BE32A2E5E04497668BBDFE83FEDF11CF7EE0@EXCHVS1.medctr.ad.wfubmc.edu>

 

> -----Original Message-----
> From: r-devel-bounces at r-project.org 
> [mailto:r-devel-bounces at r-project.org] On Behalf Of Spencer Graves
> Sent: Tuesday, June 27, 2006 2:01 PM
> To: Hin-Tak Leung
> Cc: Prof Brian Ripley; r-devel at r-project.org
> Subject: Re: [Rd] UTF-8 and .Rd files
> 
> Hello, G?ran:
> 
> 	  Have you considered the German solution:  "Goeran"?  
> (e.g., Wuertz for W?rtz)?
> 
> 	  Be thankful that you aren't Russian or Greek or 
> Arabic or Chinese, etc., for which there may be no standard 
> transliteration into the Latin alphabet.

I'm thankful I'm not Spanish!

> 
> 	  Sorry I can't be more helpful.
> 
> 	  Spencer Graves
> p.s.  When I'm with native Spanish speakers who don't know 
> English, I pronounce my name very differently, like "Espencer 
> Gra-ve", to match how they would pronounce my name when they 
> see it written.  Similarly, I once heard a French Canadian 
> take about his young son, Guillaume.  If you ask him in 
> English, "What's your name?" he replies, "Bill".  If you ask 
> the same question in French, he replies, "Guillaume".
> 
> Hin-Tak Leung wrote:
> > G?ran Brostr?m wrote:
> >> On 6/27/06, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> >>> On Tue, 27 Jun 2006, G?ran Brostr?m wrote:
> >>>
> >>>> I have been converting to utf8 from latin1, and this gives me 
> >>>> problems, some solved, but here is one unsolved: In my 
> .Rd files, I 
> >>>> have included '\encoding{UTF-8}' at the top. Despite 
> this, the HTML 
> >>>> help pages contains 'content="text/html; 
> charset=iso-8859-1"', and 
> >>>> my name is mangled. What can I do about this?
> >>> Reproducible example, please!  (I've just tried this and it works 
> >>> for me.)
> >>>
> >>> As described in my talk at UseR 2006, you may well not want to do 
> >>> this if you intend to distribute the package.  Your name contains 
> >>> characters that are not in the fonts used in UTF-8 in 
> non-European 
> >>> locales, and Windows users do no have ready access to 
> UTF-8 viewers 
> >>> (even if they know the files are UTF-8).
> >> Thanks for your answer! So this means that 'latin1' does not cause 
> >> problems for non-European locales and Windows users, I take it.
> >>
> >> I really only need non-ascii to write the name ot the author (me) 
> >> correctly. I tried LaTeX code ({\"o}), but that didn't 
> work. Is there 
> >> a way around this?
> >>
> >> G?ran
> > 
> > The \"o character in my latin1 (iso 8859-1) man page says it is 0xF6
> >   F6 - LATIN SMALL LETTER O WITH DIAERESIS The capital version is
> >   D6 -  LATIN CAPITAL LETTER O WITH DIAERESIS
> > 
> > in html I think you need to do &#F6; or something for that 
> character 
> > to appear?
> > 
> > HTH
> > 
> > HTL
> > 
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From p.dalgaard at biostat.ku.dk  Tue Jun 27 23:11:57 2006
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 27 Jun 2006 23:11:57 +0200
Subject: [Rd] UTF-8 and .Rd files
In-Reply-To: <148ed8180606271130w44024df3w49aa3340b8a107d6@mail.gmail.com>
References: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>
	<Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>
	<148ed8180606270546m73d30f60yf8f1f33d8c874616@mail.gmail.com>
	<44A14925.3040707@cimr.cam.ac.uk> <44A17269.5010803@pdf.com>
	<148ed8180606271130w44024df3w49aa3340b8a107d6@mail.gmail.com>
Message-ID: <x28xnixq02.fsf@turmalin.kubism.ku.dk>

"G?ran Brostr?m" <goran.brostrom at gmail.com> writes:

> Seriously, I thoght that unicode and utf8 would make problems like
> this disappear, but obviously we may have to wait another 30 years.
> 
> Thanks for all the input.
> 
> George

Well, I do tend to think that we should just use utf, assuming that
people have the relevant glyphs. If they don't, then they might get
little hollow rectangles but so what? (This entails stamping out the
use of iso-8859-? which I think I have previously pointed out as the
historical mistake. Easier said than done, though, especially since
8859-1, er, -15 managed to get established as a de facto standard
in a couple of key places like HTTP and NNTP.)

Transliterations are really abominable and completely ambiguous, e.g.
oe means o-umlaut in Swedish and German, but o-slash in Danish and
Norwegian, and we already have at least two interpretations of "roer"
where oe represents two distinct vowels...

        piotr

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From mh.smith at niwa.co.nz  Wed Jun 28 01:19:58 2006
From: mh.smith at niwa.co.nz (mh.smith at niwa.co.nz)
Date: Wed, 28 Jun 2006 01:19:58 +0200 (CEST)
Subject: [Rd] order() (PR#9039)
Message-ID: <20060627231958.467585696B@slim.kubism.ku.dk>

Full_Name: Murray Smith
Version: 2.2.1
OS: Windows XP
Submission from: (NULL) (202.36.29.1)


order() will not allow a complex vector for its first argument. This contrasts
with sort() which will happily sort a complex vector.

While this may not be regarded as a bug by some, it is annoying for anyone who
makes frequent use of complex numbers.

The problem occured in the Windows version 2.2.1 of R, but it has been present
in earlier versions.
> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    2              
minor    2.1            
year     2005           
month    12             
day      20             
svn rev  36812          
language R       

An example demonstrating the problem:
x <- rep(2:1, c(2, 2)) + 1i*c(4, 1, 2, 3)
> x
[1] 2+4i 2+1i 1+2i 1+3i
> order(x)
Error in order(x) : unimplemented type 'complex' in 'orderVector1'

However sort() works with complex arguments
> sort(x)
[1] 1+2i 1+3i 2+1i 2+4i

The problem can be worked around either by 
> order(Re(x), Im(x))
[1] 3 4 2 1

or, because order() allows subsequent arguments to be complex, by using a
constant vector for the first argument 
> order(numeric(length(x)), x)
[1] 3 4 2 1


From ripley at stats.ox.ac.uk  Wed Jun 28 10:12:06 2006
From: ripley at stats.ox.ac.uk (ripley at stats.ox.ac.uk)
Date: Wed, 28 Jun 2006 10:12:06 +0200 (CEST)
Subject: [Rd] order() (PR#9039)
Message-ID: <20060628081206.B365B53573@slim.kubism.ku.dk>

The issue here is rather that sort.list() does not implement complex 
vectors: order() uses sort.list() for speed if it has a single argument.

How sort() and order() collate complex numbers seems to be undocumented in 
R.  I was taught that they were unsorted, and there are several possible 
sort orders.  It seems the collation is as a (real, imaginary) pair.

This will be fixed for R 2.4.0: please consider a suitable donation to the 
R Foundation for the reduction in your annoyance.

On Wed, 28 Jun 2006, mh.smith at niwa.co.nz wrote:

> Full_Name: Murray Smith
> Version: 2.2.1

How did you manage to miss all the injunctions not to report on obselete 
versions of R?

> OS: Windows XP
> Submission from: (NULL) (202.36.29.1)
>
>
> order() will not allow a complex vector for its first argument. This contrasts
> with sort() which will happily sort a complex vector.
>
> While this may not be regarded as a bug by some, it is annoying for anyone who
> makes frequent use of complex numbers.
>
> The problem occured in the Windows version 2.2.1 of R, but it has been present
> in earlier versions.
>> version
>         _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    2
> minor    2.1
> year     2005
> month    12
> day      20
> svn rev  36812
> language R
>
> An example demonstrating the problem:
> x <- rep(2:1, c(2, 2)) + 1i*c(4, 1, 2, 3)
>> x
> [1] 2+4i 2+1i 1+2i 1+3i
>> order(x)
> Error in order(x) : unimplemented type 'complex' in 'orderVector1'
>
> However sort() works with complex arguments
>> sort(x)
> [1] 1+2i 1+3i 2+1i 2+4i
>
> The problem can be worked around either by
>> order(Re(x), Im(x))
> [1] 3 4 2 1
>
> or, because order() allows subsequent arguments to be complex, by using a
> constant vector for the first argument
>> order(numeric(length(x)), x)
> [1] 3 4 2 1
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Wed Jun 28 11:12:08 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 28 Jun 2006 10:12:08 +0100 (BST)
Subject: [Rd] [R] assign / environment side effect on R 2.4.0
In-Reply-To: <x28xnkt9g8.fsf@viggo.kubism.ku.dk>
References: <449BFB16.6010501@TU-Dresden.de>
	<449C0A4E.9040203@hhbio.wasser.tu-dresden.de>
	<Pine.LNX.4.64.0606261120370.23616@gannet.stats.ox.ac.uk>
	<971536df0606260424x27e7143ap22ecaaedd11dbd8c@mail.gmail.com>
	<x28xnkt9g8.fsf@viggo.kubism.ku.dk>
Message-ID: <Pine.LNX.4.64.0606280937190.10252@gannet.stats.ox.ac.uk>

That is quite a different point, and nothing to do with 'R 2.4.0' or any 
recent version of R.  The example

envfun <- function(L) {
   p <- parent.frame()
   assign("test", L$test, p)
   environment(p$test) <- p
}
solver <- function(L) envfun(L)
L <- list(test = function() 1 + 2)

environment(L$test)
solver(L)
(e <- environment(L$test))
stopifnot(identical(e, .GlobalEnv))

fails in 2.2.1 (as Thomas had already said) and indeed in much earlier 
versions of R (e.g. 2.0.0).

As a glance at the code would have shown, environment<- was written 
without any regard for NAMED bits, and so changes the environment on all 
copies of the function.  This may well have been intentional (and seems to 
have been the same in the orginal CVS version in 1997), but I have altered 
it for 2.4.0.


On Mon, 26 Jun 2006, Peter Dalgaard wrote:

> "Gabor Grothendieck" <ggrothendieck at gmail.com> writes:
>
>> I have moved this discussion to r-devel.
>>
>> The example of the poster suggests that the functionality as implemented
>> so far in the upcoming 2.4.0 is at this point not correct and needs to
>> be fixed prior to release.

[Given that we had already been told the side effect existed in 2.2.1, 
this was a careless analysis.]

>> It violates the idea in R that if one modifies a list in a function then a copy
>> of that list gets created (at least conceptually) for use within a function
>> (rather than the original list being modified) and effectively turns what would
>> have been a local variable into an error-prone global variable.
>>
>>
>> On 6/26/06, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
>>> Please do study the posting guide, as there is no `R 2.4.0'.
>>>
>>> This seems to be related to the NEWS item
>>>
>>>     o  [[ on a list does not duplicate the extracted element unless
>>>        necessary.  (It did not duplicate in other cases, e.g. a
>>>        pairlist.)
>>>
>>> Now in so far as I can follow it, in your example [[ behaves in the same
>>> way as $ always did (which is what informed people would expect).
>
> Well, informed people would expect $ and [[ to behave the same, but
> they would _not_ expect
>
>> e1 <- environment(L$test)
>> solver(L)
>> e2 <- environment(L$test)
>> print(e1)
> <environment: R_GlobalEnv>
>> print(e2)
> <environment: 0x12f23a8>
>
> unless perhaps substitute() or similar magic was invoked inside
> solver() to create call-by-reference semantics. What we have is an
> assignment to "test" in the evaluation frame of solver(), which is a
> shallow copy of a shallow copy of L$test, so NAMED should be 2 and
> modification should force duplication.
>
> In R-devel, this happens with both [[ and $, and in earlier versions
> apparently only with $, which seems to be a case where fixing one bug
> unmasks another - i.e. $ was always wrong, now both are.
>
> As far as I can see, either assign() or environment<-() has the bug.
>
>>> R-help is not the place to discuss unreleased versions of R, nor for
>>> questions about code development.  (Did I mention studying the posting
>>> guide?)
>>>
>>>
>>> On Fri, 23 Jun 2006, Thomas Petzoldt wrote:
>>>
>>>> Sorry,
>>>>
>>>> the posted example had the side effect on all platforms (correctly: R
>>>> 2.2.1/Windows, 2.3.1/Linux, 2.4.0/Windows), but in the following
>>>> corrected example the behavior of 2.4.0 differs from the older versions.
>>>>
>>>> The only difference between the "wrong" and the "new" example is
>>>> L[["test"]] vs. L$test in the assign.
>>>>
>>>> Thomas P.
>>>>
>>>>
>>>> envfun <- function(L) {
>>>> #  L <- as.list(unlist(L))
>>>>  p <- parent.frame()
>>>>  assign("test", L[["test"]], p) ## [["test"]] instead of $test
>>>>  environment(p[["test"]]) <- p
>>>> }
>>>>
>>>>
>>>> solver <- function(L) {
>>>>  envfun(L)
>>>>  # some other stuff
>>>> }
>>>>
>>>> L <- list(test = function() 1 + 2)
>>>>
>>>> e1 <- environment(L$test)
>>>> solver(L)
>>>> e2 <- environment(L$test)
>>>>
>>>> print(e1)
>>>> print(e2)
>>>>
>>>> ______________________________________________
>>>> R-help at stat.math.ethz.ch mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
>>>>
>>>
>>> --
>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>
>>> ______________________________________________
>>> R-help at stat.math.ethz.ch mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From bwmoore22 at yahoo.com  Wed Jun 28 00:03:59 2006
From: bwmoore22 at yahoo.com (bwmoore22 at yahoo.com)
Date: Wed, 28 Jun 2006 00:03:59 +0200 (CEST)
Subject: [Rd] Password security problem in RODBC package (PR#9038)
Message-ID: <20060627220359.8611250843@slim.kubism.ku.dk>

The RODBC package retains the unencrypted user ID and
password used on the odbcConnect() statement as part
of the database object.  This unencrypted user ID and
password are then saved with the .RData and .RHist
files where they can potentially be discovered by
other users.  

To recreate:

0) R version is 2.2.0 with corresponding download of 
   RODBC package

1) library(RODBC)
   dbhandle<-odbcConnect("dbname",uid="user",pwd="")

2) display the user ID and password with
   dbhandle

3) Quit
   q()

4) Respond "Y" to the save data prompt

5) Edit the .Rdata file and search for the user name
   and/or the password.


From pgilbert at bank-banque-canada.ca  Wed Jun 28 22:39:38 2006
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 28 Jun 2006 16:39:38 -0400
Subject: [Rd] UTF-8 and .Rd files
In-Reply-To: <x28xnixq02.fsf@turmalin.kubism.ku.dk>
References: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>	<Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>	<148ed8180606270546m73d30f60yf8f1f33d8c874616@mail.gmail.com>	<44A14925.3040707@cimr.cam.ac.uk>
	<44A17269.5010803@pdf.com>	<148ed8180606271130w44024df3w49aa3340b8a107d6@mail.gmail.com>
	<x28xnixq02.fsf@turmalin.kubism.ku.dk>
Message-ID: <44A2E90A.2080506@bank-banque-canada.ca>

I've been following this thread hoping for the definitive answer...

Peter Dalgaard wrote:
....
> Well, I do tend to think that we should just use utf, assuming that
> people have the relevant glyphs. If they don't, then they might get
> little hollow rectangles but so what? 

My problem is that I put an ? in a reference in an Rd file, and now my 
builds fail on some of my systems. I can switch which systems work and 
which are broken, but I can not get it to work on all systems. I have 
spent way too much time trying to figure out what is wrong. So, wrt "so 
what", I need to choose between checking my packages on all the 
different systems I use, or having an ? in the Rd file. I think my 
problem is more complicated than having the relevant glyphs. I suspect 
it has to do with having the same locale on all systems doing NFS 
mounts, or on my cvs server, or something strange like that.

Paul
====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential inform...{{dropped}}


From asr at ufl.edu  Wed Jun 28 22:44:45 2006
From: asr at ufl.edu (Allen S. Rout)
Date: 28 Jun 2006 16:44:45 -0400
Subject: [Rd] An offer: R packages in Gentoo Land?
Message-ID: <86k671au2q.fsf@ufl.edu>


Greetings.  I love R, we run Gentoo.  I want to maintain R packages in
the same methods I use for the rest of them; in Gentoo this is in "the
portage tree", or in "a portage overlay".

I am working towards something I consider suitable for production
release, and wanted to ask if there are conventional blessings which I
ought to ask of the R-devel folks; How does this usually go, in
R-land?

Are there other developeRs who run Gentoo who would be willing to
kibitz?



Separately, what is the maturity model you apply to CRAN submissions?
Is there any sort of new/unstable/stable/deprecated sort of cycle
already conventional?  This might be a Fine Manual question, but the
Writing R Extensions doc doesn't mention it.



- Allen S. Rout


From p.dalgaard at biostat.ku.dk  Wed Jun 28 23:20:46 2006
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 28 Jun 2006 23:20:46 +0200
Subject: [Rd] UTF-8 and .Rd files
In-Reply-To: <44A2E90A.2080506@bank-banque-canada.ca>
References: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>
	<Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>
	<148ed8180606270546m73d30f60yf8f1f33d8c874616@mail.gmail.com>
	<44A14925.3040707@cimr.cam.ac.uk> <44A17269.5010803@pdf.com>
	<148ed8180606271130w44024df3w49aa3340b8a107d6@mail.gmail.com>
	<x28xnixq02.fsf@turmalin.kubism.ku.dk>
	<44A2E90A.2080506@bank-banque-canada.ca>
Message-ID: <x2wtb1564x.fsf@turmalin.kubism.ku.dk>

Paul Gilbert <pgilbert at bank-banque-canada.ca> writes:

> I've been following this thread hoping for the definitive answer...
> 
> Peter Dalgaard wrote:
> ....
> > Well, I do tend to think that we should just use utf, assuming that
> > people have the relevant glyphs. If they don't, then they might get
> > little hollow rectangles but so what? 
> 
> My problem is that I put an ? in a reference in an Rd file, and now my 
> builds fail on some of my systems. I can switch which systems work and 
> which are broken, but I can not get it to work on all systems. I have 
> spent way too much time trying to figure out what is wrong. So, wrt "so 
> what", I need to choose between checking my packages on all the 
> different systems I use, or having an ? in the Rd file. I think my 
> problem is more complicated than having the relevant glyphs. I suspect 
> it has to do with having the same locale on all systems doing NFS 
> mounts, or on my cvs server, or something strange like that.

Just to clarify, one thing is what I feel should be the longer term
strategy, another is what the R build tools can currently do...

Did you follow the advice to declare your input encoding with
\encoding and use \enc to provide a transliteration?

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From ripley at stats.ox.ac.uk  Thu Jun 29 08:54:53 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 29 Jun 2006 07:54:53 +0100 (BST)
Subject: [Rd] UTF-8 and .Rd files
In-Reply-To: <x2wtb1564x.fsf@turmalin.kubism.ku.dk>
References: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>
	<Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>
	<148ed8180606270546m73d30f60yf8f1f33d8c874616@mail.gmail.com>
	<44A14925.3040707@cimr.cam.ac.uk> <44A17269.5010803@pdf.com>
	<148ed8180606271130w44024df3w49aa3340b8a107d6@mail.gmail.com>
	<x28xnixq02.fsf@turmalin.kubism.ku.dk>
	<44A2E90A.2080506@bank-banque-canada.ca>
	<x2wtb1564x.fsf@turmalin.kubism.ku.dk>
Message-ID: <Pine.LNX.4.64.0606290743500.21841@gannet.stats.ox.ac.uk>

On Wed, 28 Jun 2006, Peter Dalgaard wrote:

> Paul Gilbert <pgilbert at bank-banque-canada.ca> writes:
>
>> I've been following this thread hoping for the definitive answer...
>>
>> Peter Dalgaard wrote:
>> ....
>>> Well, I do tend to think that we should just use utf, assuming that
>>> people have the relevant glyphs. If they don't, then they might get
>>> little hollow rectangles but so what?

Unfortunately, they might get nothing visible at all, and they might also 
get something completely wrong (happens on my Windows' X11 server on my 
laptop).  This is not an R problem but a question of the quality of 
implementation of UTF-8.  (Given the lack of UTF-8 fonts, I don't see the 
latter changing any time soon.)

My comments (at UseR and to G?ran) are intended to make people aware just 
how badly things can go wrong: it is up to the users to decide if 
transliteration is worse than the chance of mangling.

>> My problem is that I put an ? in a reference in an Rd file, and now my
>> builds fail on some of my systems. I can switch which systems work and
>> which are broken, but I can not get it to work on all systems. I have
>> spent way too much time trying to figure out what is wrong. So, wrt "so
>> what", I need to choose between checking my packages on all the
>> different systems I use, or having an ? in the Rd file. I think my
>> problem is more complicated than having the relevant glyphs. I suspect
>> it has to do with having the same locale on all systems doing NFS
>> mounts, or on my cvs server, or something strange like that.
>
> Just to clarify, one thing is what I feel should be the longer term
> strategy, another is what the R build tools can currently do...
>
> Did you follow the advice to declare your input encoding with
> \encoding and use \enc to provide a transliteration?

It is necessary to do so.  I use a mixture of UTF-8 and latin1 locales on 
systems sharing a file system, and it all works for me: iconv does the 
charset translations transparently provided it knows what to do.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Thu Jun 29 09:48:36 2006
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 29 Jun 2006 08:48:36 +0100 (BST)
Subject: [Rd] Storage of character vectors in R
Message-ID: <Pine.LNX.4.64.0606290836240.23502@gannet.stats.ox.ac.uk>

There have been comments from time to time (over many years) on the 
inefficiency of the storage of character vectors in R, and R-core has been 
looking into the issues.  We have some ideas but they would be a 
considerable amount of work to implement and it is unclear if they would 
actually help with current real-world problems.

One example was the storage of integer row names for data frames, but such 
row names are stored much more efficiently in R-devel (2.4.0-to-be).
We do have some other examples but these are highly artificial.

What we would like is some real-world examples of problems in which users 
have found the storage of character vectors to be an appreciable problem.
Ideally we want concrete reproducible examples that show the problem in 
R-devel, but abstractions of such examples (for example using synthetic 
rather than real data) would also be very helpful.

If you can help, please do so by replying to this thread (and making 
examples available via URLs would probably be the most efficient route).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From imosqueira at suk.azti.es  Thu Jun 29 13:03:14 2006
From: imosqueira at suk.azti.es (Iago Mosqueira)
Date: Thu, 29 Jun 2006 13:03:14 +0200
Subject: [Rd] NAMESPACE and bundle
In-Reply-To: <449AAB2C.6000907@bank-banque-canada.ca>
References: <mailman.7.1150970403.13199.r-devel@r-project.org>
	<5222D071B410AC489A62C2EBA183858A9E970C@SSRCorreo.azti.local>
	<449A9F57.5080300@bank-banque-canada.ca>
	<5222D071B410AC489A62C2EBA183858A9E971C@SSRCorreo.azti.local>
	<449AAB2C.6000907@bank-banque-canada.ca>
Message-ID: <1151578994.31088.60.camel@localhost.localdomain>

El jue, 22-06-2006 a las 10:37 -0400, Paul Gilbert escribi?:
> Iago
> 
> I think your R code file  needs an .onLoad function.  Here is the 
> ..onLoad from my dse1 package which is in the dse bundle, as is tframe,  
> along with comments which I had forgotten.
> 
> ..onLoad  <- function(library, section) {
>    .DSEflags(list(COMPILED=TRUE, DUP=TRUE))
>    # next require is necessary for bundle check to run examples, 
>    # but does not seem to be necessary when packages are not bundled
>    require("tframe")
>    invisible(TRUE)
>    }
> 
> 
> Hope this works,
> Paul

Hi,

Thanks for the tip. I already had an .onLoad() function, with 

.onLoad <- function(lib,pkg) {
	require(methods)
        require(FLCore)
}

the first to comply with the needs of an S4 package, the second to solve
the internal dependency that outside of the bundle is solved with
Depends: in DESCRIPTION.

Is there anything else I could look at?

Thanks,


Iago



Iago Mosqueira wrote:

> > -----Mensaje original-----
> > De: Paul Gilbert [mailto:pgilbert at bank-banque-canada.ca]
> > Enviado el: jue 22/06/2006 15:47
> > Para: Iago Mosqueira
> > CC: r-devel at r-project.org
> > Asunto: Re: [Rd] NAMESPACE and bundle
>
> > Iago
>
> > There is a problem that bundle checking works slightly differently
than
> > individual package checking in this regard.  I think it has to do
with
> > when the namespace gets registered, or something like that. As I
recall,
> > the work around is to explicitely require  the package in the test
files
> > for it. I.e. put
> >   require("pac")
> > in all the files in pac/tests.   If that does not work, let me know
and
> > I will look more carefully to find what I had to do.
>
> > Paul
>
>
> Paul,
>
> Many thanks. The problem is in the examples contained in the Rd
files, 
> where we do not explictely load the package, as we do in test files. 
> But it is only a problem for the examples in this package, not in the 
> others that share the same package dependencies. Can you see any 
> solution or something I else I should check for?
>
> Thanks
>
>
> Iago
>
>
> Iago Mosqueira wrote:
>
> >Dear all,
> >
> >I have a package that passes R CMD check, and shows no problems when 
> using all its methods as declared in NAMESPACE. When this package is 
> added to a bundle, which already consists of 5 packages, the examples 
> in the Rd pages thta call a number of methods fail during the bundle 
> check. These all passed when check is run on this package alone.
Other 
> packages in the bundle are very similar, in that all import all S4 
> classes and methods from the first package (using import("FLCore") in 
> NAMESPACE) in the bundle, and export their own overloaded methods.
> >
> >If I run check on a mini-bundle consisting only of the main package 
> (FLCore) and this problematic package, it shows no problem. So I 
> assume a problem of NAMESPACE conflict is the culprit, but 
> experimnting with various package combinations, to try and isolate
the 
> conflict, has not worked. This package seems to conflict with every 
> other secondary package.
> >
> >I am dealing with internal dependencies by adding a require(FLCore) 
> line to the .onLoad() call in zzz.R
> >
> >Can anybody point me at what to look for? What could be the reason 
> for this problem?
> >
> >I hope the explanation was clear enough. Many thanks,
> >
> >
> >Iago
> >
> >
> >Dr. Iago Mosqueira
> >
> >Marine Research Division
> >AZTI Tecnalia
> >Txatxarramendi Ugartea, z/g
> >48395 Sukarrieta - Bizkaia
> >Spain
> >
> >+34 946 029 448
> >+34 946 029 400
> >+34 946 029 401 (Fax)
> >
> >imosqueira at suk.azti.es
> >http://www.azti.es/
> >
> > 
> >
>
>------------------------------------------------------------------------
> >
> >______________________________________________
> >R-devel at r-project.org mailing list
> >https://stat.ethz.ch/mailman/listinfo/r-devel
> > 
> >


From phgrosjean at sciviews.org  Thu Jun 29 13:25:33 2006
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Thu, 29 Jun 2006 13:25:33 +0200
Subject: [Rd] NAMESPACE and bundle
In-Reply-To: <1151578994.31088.60.camel@localhost.localdomain>
References: <mailman.7.1150970403.13199.r-devel@r-project.org>	<5222D071B410AC489A62C2EBA183858A9E970C@SSRCorreo.azti.local>	<449A9F57.5080300@bank-banque-canada.ca>	<5222D071B410AC489A62C2EBA183858A9E971C@SSRCorreo.azti.local>	<449AAB2C.6000907@bank-banque-canada.ca>
	<1151578994.31088.60.camel@localhost.localdomain>
Message-ID: <44A3B8AD.2050905@sciviews.org>


Iago Mosqueira wrote:
> El jue, 22-06-2006 a las 10:37 -0400, Paul Gilbert escribi?:
> 
>>Iago
>>
>>I think your R code file  needs an .onLoad function.  Here is the 
>>..onLoad from my dse1 package which is in the dse bundle, as is tframe,  
>>along with comments which I had forgotten.
>>
>>..onLoad  <- function(library, section) {
>>   .DSEflags(list(COMPILED=TRUE, DUP=TRUE))
>>   # next require is necessary for bundle check to run examples, 
>>   # but does not seem to be necessary when packages are not bundled
>>   require("tframe")
>>   invisible(TRUE)
>>   }
>>
>>
>>Hope this works,
>>Paul
> 
> 
> Hi,
> 
> Thanks for the tip. I already had an .onLoad() function, with 
> 
> .onLoad <- function(lib,pkg) {
> 	require(methods)
>         require(FLCore)
> }
> 
> the first to comply with the needs of an S4 package, the second to solve
> the internal dependency that outside of the bundle is solved with
> Depends: in DESCRIPTION.

Hello Iago,

In principle, you should not use require() statements any more. 
Dependences should be resolved in the NAMESPACE and in Depends: field of 
description. It works for me for the SciViews bundle. I think that the 
situation is the same as for FLR: I have a svMisc package with basic 
functions, and all other packages depend on it, plus other complex 
interdependences between the other packages in the bundle.

You should really think twice before distributing a bundle: it is more 
of a problem. First, you force users to download and install the whole 
bundle (by definition!), even if they are interested by ony a part of 
it. Second, it is the same for updates: if you change something in one 
package, you must upload the whole bundle.

Now that dependencies are nicely resolved during R package installation, 
  bundles are not so attracting, and I would advise to continue 
distributing your packages separately.

Best,

Philippe Grosjean

> Is there anything else I could look at?
> 
> Thanks,
> 
> 
> Iago
> 
> 
> 
> Iago Mosqueira wrote:
> 
> 
>>>-----Mensaje original-----
>>>De: Paul Gilbert [mailto:pgilbert at bank-banque-canada.ca]
>>>Enviado el: jue 22/06/2006 15:47
>>>Para: Iago Mosqueira
>>>CC: r-devel at r-project.org
>>>Asunto: Re: [Rd] NAMESPACE and bundle
>>
>>>Iago
>>
>>>There is a problem that bundle checking works slightly differently
> 
> than
> 
>>>individual package checking in this regard.  I think it has to do
> 
> with
> 
>>>when the namespace gets registered, or something like that. As I
> 
> recall,
> 
>>>the work around is to explicitely require  the package in the test
> 
> files
> 
>>>for it. I.e. put
>>>  require("pac")
>>>in all the files in pac/tests.   If that does not work, let me know
> 
> and
> 
>>>I will look more carefully to find what I had to do.
>>
>>>Paul
>>
>>
>>Paul,
>>
>>Many thanks. The problem is in the examples contained in the Rd
> 
> files, 
> 
>>where we do not explictely load the package, as we do in test files. 
>>But it is only a problem for the examples in this package, not in the 
>>others that share the same package dependencies. Can you see any 
>>solution or something I else I should check for?
>>
>>Thanks
>>
>>
>>Iago
>>
>>
>>Iago Mosqueira wrote:
>>
>>
>>>Dear all,
>>>
>>>I have a package that passes R CMD check, and shows no problems when 
>>
>>using all its methods as declared in NAMESPACE. When this package is 
>>added to a bundle, which already consists of 5 packages, the examples 
>>in the Rd pages thta call a number of methods fail during the bundle 
>>check. These all passed when check is run on this package alone.
> 
> Other 
> 
>>packages in the bundle are very similar, in that all import all S4 
>>classes and methods from the first package (using import("FLCore") in 
>>NAMESPACE) in the bundle, and export their own overloaded methods.
>>
>>>If I run check on a mini-bundle consisting only of the main package 
>>
>>(FLCore) and this problematic package, it shows no problem. So I 
>>assume a problem of NAMESPACE conflict is the culprit, but 
>>experimnting with various package combinations, to try and isolate
> 
> the 
> 
>>conflict, has not worked. This package seems to conflict with every 
>>other secondary package.
>>
>>>I am dealing with internal dependencies by adding a require(FLCore) 
>>
>>line to the .onLoad() call in zzz.R
>>
>>>Can anybody point me at what to look for? What could be the reason 
>>
>>for this problem?
>>
>>>I hope the explanation was clear enough. Many thanks,
>>>
>>>
>>>Iago
>>>
>>>
>>>Dr. Iago Mosqueira
>>>
>>>Marine Research Division
>>>AZTI Tecnalia
>>>Txatxarramendi Ugartea, z/g
>>>48395 Sukarrieta - Bizkaia
>>>Spain
>>>
>>>+34 946 029 448
>>>+34 946 029 400
>>>+34 946 029 401 (Fax)
>>>
>>>imosqueira at suk.azti.es
>>>http://www.azti.es/
>>>
>>>
>>>
>>
>>------------------------------------------------------------------------
>>
>>>______________________________________________
>>>R-devel at r-project.org mailing list
>>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>
> 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From j.van_den_hoff at fz-rossendorf.de  Thu Jun 29 14:29:26 2006
From: j.van_den_hoff at fz-rossendorf.de (Joerg van den Hoff)
Date: Thu, 29 Jun 2006 14:29:26 +0200
Subject: [Rd] inconsistent matplot behaviour?
Message-ID: <44A3C7A6.6060403@fz-rossendorf.de>

I raised this question quite some time ago but it quitly went down the 
river. I'll give it a second try (before keeping my modified version of 
matplot for ever...):

matplot supports vectors (and/or character strings) for a number of 
arguments namely `type', `lty', `lwd', `pch', `col', `cex'. all of them 
act consistently in such a way that the first entries are used for plot
of x-column 1 vs. y-column 1 and so forth.

for some reason `bg' is missing from this list (maybe simplyh 
forgotten?). this causes an, according to my mind, at least, undesirable 
(inconsistent) behaviour in calls like

matplot(x, y, type = 'b', pch = 21:23, col = 2:4, bg = 2:4)

(assuming x, y are 3-column matrices)

`col', `pch' and the other explicit arguments are interpreted on a 'per 
plot' basis whereas `bg' is transferred to plot.default and is therefore 
interpreted on a 'per point' basis. thus, `col' above sets the colors of 
the plotting symbols in the different line plots (say, column 1 to 3) 
whereas `bg' sets the colors alternating down each column of the data, 
i.e. within each  line plot.

question: would'nt it be desirable and more consistent/intuitive if `bg' 
where treated on the same footing as the other explicit parameters, 
especially if combinations of `pch>=21' and `bg' are envisaged?

necessary changes to matplot are trivial:

3c3
<     ..., add = FALSE, verbose = getOption("verbose"))
---
 >     bg = NULL, ..., add = FALSE, verbose = getOption("verbose"))
75a76,77
 >     if (length(bg) < k)
 >         bg <- rep(bg, length.out = k)
81c83,84
<             pch = pch[1], col = col[1], cex = cex[1], ...)
---
 >             pch = pch[1], col = col[1], cex = cex[1], bg = bg[1],
 >             ...)
85c88
<             pch = pch[i], col = col[i], cex = cex[i])
---
 >             pch = pch[i], col = col[i], cex = cex[i], bg = bg[i])


From edd at debian.org  Thu Jun 29 15:37:55 2006
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 29 Jun 2006 08:37:55 -0500
Subject: [Rd] An offer: R packages in Gentoo Land?
In-Reply-To: <86k671au2q.fsf@ufl.edu>
References: <86k671au2q.fsf@ufl.edu>
Message-ID: <17571.55219.795854.323135@basebud.nulle.part>


On 28 June 2006 at 16:44, Allen S. Rout wrote:
| 
| Greetings.  I love R, we run Gentoo.  I want to maintain R packages in
| the same methods I use for the rest of them; in Gentoo this is in "the
| portage tree", or in "a portage overlay".
| 
| I am working towards something I consider suitable for production
| release, and wanted to ask if there are conventional blessings which I
| ought to ask of the R-devel folks; How does this usually go, in
| R-land?

With my Debian maintainer hat on, and noting that I in no way speak for R
Core:  it's really up to you. Here are a few things I do for Debian:

-- supporting all configure options so that R reports all capabilities() 
-- passing 'make check' obviously helps
-- having documentation in different format out of the box is nice
-- supporting Atlas out of the box is nice (Debian has had that for years), 
-- having Sweave work out of the box is nice too, 
-- an additional r-mathlib packages was once requested, 
-- a few other goodies (bash completion, paperconf, conf files in /etc/R,
   R LIBS supporting different directories)

More suggestions are of course welcome.

| Separately, what is the maturity model you apply to CRAN submissions?
| Is there any sort of new/unstable/stable/deprecated sort of cycle
| already conventional?  This might be a Fine Manual question, but the
| Writing R Extensions doc doesn't mention it.

Your package ought to survive 'R CMD check'. 

Hth, Dirk

-- 
Hell, there are no rules here - we're trying to accomplish something. 
                                                  -- Thomas A. Edison


From pgilbert at bank-banque-canada.ca  Thu Jun 29 17:09:15 2006
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 29 Jun 2006 11:09:15 -0400
Subject: [Rd] UTF-8 and .Rd files
In-Reply-To: <Pine.LNX.4.64.0606290743500.21841@gannet.stats.ox.ac.uk>
References: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>
	<Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>
	<148ed8180606270546m73d30f60yf8f1f33d8c874616@mail.gmail.com>
	<44A14925.3040707@cimr.cam.ac.uk> <44A17269.5010803@pdf.com>
	<148ed8180606271130w44024df3w49aa3340b8a107d6@mail.gmail.com>
	<x28xnixq02.fsf@turmalin.kubism.ku.dk>
	<44A2E90A.2080506@bank-banque-canada.ca>
	<x2wtb1564x.fsf@turmalin.kubism.ku.dk>
	<Pine.LNX.4.64.0606290743500.21841@gannet.stats.ox.ac.uk>
Message-ID: <44A3ED1B.3000205@bank-banque-canada.ca>



Prof Brian Ripley wrote:

> On Wed, 28 Jun 2006, Peter Dalgaard wrote:
>
>> Paul Gilbert <pgilbert at bank-banque-canada.ca> writes:
>>
>>> I've been following this thread hoping for the definitive answer...
>>>
>>> Peter Dalgaard wrote:
>>> ....
>>>
>>>> Well, I do tend to think that we should just use utf, assuming that
>>>> people have the relevant glyphs. If they don't, then they might get
>>>> little hollow rectangles but so what?
>>>
>
> Unfortunately, they might get nothing visible at all, and they might 
> also get something completely wrong (happens on my Windows' X11 server 
> on my laptop).  This is not an R problem but a question of the quality 
> of implementation of UTF-8.  (Given the lack of UTF-8 fonts, I don't 
> see the latter changing any time soon.)
>
> My comments (at UseR and to G?ran) are intended to make people aware 
> just how badly things can go wrong: it is up to the users to decide if 
> transliteration is worse than the chance of mangling.
>
>>> My problem is that I put an ? in a reference in an Rd file, and now my
>>> builds fail on some of my systems. I can switch which systems work and
>>> which are broken, but I can not get it to work on all systems. I have
>>> spent way too much time trying to figure out what is wrong. So, wrt "so
>>> what", I need to choose between checking my packages on all the
>>> different systems I use, or having an ? in the Rd file. I think my
>>> problem is more complicated than having the relevant glyphs. I suspect
>>> it has to do with having the same locale on all systems doing NFS
>>> mounts, or on my cvs server, or something strange like that.
>>
>>
>> Just to clarify, one thing is what I feel should be the longer term
>> strategy, another is what the R build tools can currently do...
>>
>> Did you follow the advice to declare your input encoding with
>> \encoding and use \enc to provide a transliteration?
>
It has been several months since I did this, but I thought I had 
followed all the instructions.

>
> It is necessary to do so.  I use a mixture of UTF-8 and latin1 locales 
> on systems sharing a file system, and it all works for me: iconv does 
> the charset translations transparently provided it knows what to do.

Ok,   I will try again sometime when I have a bit more time.

Thanks,
Paul
====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential inform...{{dropped}}


From mwtoews at sfu.ca  Thu Jun 29 18:21:40 2006
From: mwtoews at sfu.ca (mwtoews at sfu.ca)
Date: Thu, 29 Jun 2006 18:21:40 +0200 (CEST)
Subject: [Rd] write.table does not quote col.names properly (PR#9044)
Message-ID: <20060629162140.86E0F507EF@slim.kubism.ku.dk>

Full_Name: Michael Toews
Version: 2.3.1
OS: Mac OS 10.4.6 and WinXP/SP2
Submission from: (NULL) (24.80.163.133)


This bug also affects related functions (write.csv, etc.), and can be
demonstrated using either a matrix or data frame:

m <- matrix(1:9,nrow=3,
       dimnames=list(c("A","B","C"),
                     c("I","II","III")))

write.table(m)
write.table(m,col.names=FALSE)
write.table(m,row.names=FALSE)

Note that the last 'write.table' call has unquoted column headers. A suggested
fix for this problem is:

Index: write.table.R
===================================================================
--- write.table.R       (revision 38447)
+++ write.table.R       (working copy)
@@ -86,9 +86,8 @@
     if(!is.null(col.names)) {
        if(append)
            warning("appending column names to file")
-       if(length(quote))
-           col.names <- paste("\"", gsub('"', qstring, col.names),
-                               "\"", sep = "")
+       col.names <- paste("\"", gsub('"', qstring, col.names),
+                           "\"", sep = "")
         writeLines(paste(col.names, collapse = sep), file, sep = eol)
     }
 

However, it is unknown why the "if(length(quote))" is used in the original code
(please check before a commit). The length of quote will be 0 here, since the
matrix has all numbers.
This bug does not occur with a data frame with mixed number and factor/character
columns.
+mt


From bolker at zoo.ufl.edu  Thu Jun 29 18:53:16 2006
From: bolker at zoo.ufl.edu (Ben Bolker)
Date: Thu, 29 Jun 2006 12:53:16 -0400
Subject: [Rd] advice on arguments
Message-ID: <44A4057C.4040203@zoo.ufl.edu>


    I have a general style question about R coding.

   Suppose I'm writing a function (foo1) that calls other functions
(foo2, foo3, ...) which have complicated argument
lists (e.g. optim(), plot()), _and_
I may be calling several different functions in the body of
foo1.  Since foo2 and foo3 have different sets of arguments, I
can't just use "..." ; I did write some code a while ago that
would look at formals() to dissect out arguments that should
be passed to the different functions, but it seemed overly
complex.

  The particular case I have now is a little simpler.

  foo2 (points3d) and foo3 (spheres3d)
are both functions from the rgl package
that pass arguments such as color, alpha, etc. along to
an rgl.material() command with lots of possible arguments.
(The function may also call segments3d or lines3d, but
these all have the same arguments as points3d.)
However, to change the size of points you use "size"; to
change the size of spheres you use "radius".  Do I
(1) add "radius" to the argument list, cluttering up
the argument list for one particular special case?
(2) add "size" to the argument list, so that it doesn't
become part of "..." and I can say spheres3d(radius=size,...) ?
(3) do something like
    dotlist = list(...)
    if (type=="s" && !is.null(dotlist$size)) radius <- dotlist$size
and pull "size" out of ... myself (and make a note to that
effect in  the documentation)?
  (I guess another general solution to this is to ask for
lists of arguments, like MoreArgs in mapply(). Another
would be to go back and change spheres3d to make size
a synonym for radius ... )

  any thoughts?
    Ben Bolker


-- 
620B Bartram Hall                            bolker at zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


From murdoch at stats.uwo.ca  Thu Jun 29 19:08:13 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Thu, 29 Jun 2006 13:08:13 -0400
Subject: [Rd] advice on arguments
In-Reply-To: <44A4057C.4040203@zoo.ufl.edu>
References: <44A4057C.4040203@zoo.ufl.edu>
Message-ID: <44A408FD.6040202@stats.uwo.ca>

On 6/29/2006 12:53 PM, Ben Bolker wrote:
>     I have a general style question about R coding.
> 
>    Suppose I'm writing a function (foo1) that calls other functions
> (foo2, foo3, ...) which have complicated argument
> lists (e.g. optim(), plot()), _and_
> I may be calling several different functions in the body of
> foo1.  Since foo2 and foo3 have different sets of arguments, I
> can't just use "..." ; I did write some code a while ago that
> would look at formals() to dissect out arguments that should
> be passed to the different functions, but it seemed overly
> complex.
> 
>   The particular case I have now is a little simpler.
> 
>   foo2 (points3d) and foo3 (spheres3d)
> are both functions from the rgl package
> that pass arguments such as color, alpha, etc. along to
> an rgl.material() command with lots of possible arguments.
> (The function may also call segments3d or lines3d, but
> these all have the same arguments as points3d.)
> However, to change the size of points you use "size"; to
> change the size of spheres you use "radius".  Do I
> (1) add "radius" to the argument list, cluttering up
> the argument list for one particular special case?
> (2) add "size" to the argument list, so that it doesn't
> become part of "..." and I can say spheres3d(radius=size,...) ?
> (3) do something like
>     dotlist = list(...)
>     if (type=="s" && !is.null(dotlist$size)) radius <- dotlist$size
> and pull "size" out of ... myself (and make a note to that
> effect in  the documentation)?
>   (I guess another general solution to this is to ask for
> lists of arguments, like MoreArgs in mapply(). Another
> would be to go back and change spheres3d to make size
> a synonym for radius ... )

I would do (2) in general, but in this particular case it might not be 
right.  "size" is measured in pixels, and "radius" is measured in data 
units, so they really are different things.  You could try to fiddle it 
so the radius is set to the right number of units to match the number of 
pixels that were requested, but users can change the scale pretty easily.

Duncan Murdoch


From spencer.graves at pdf.com  Thu Jun 29 02:13:34 2006
From: spencer.graves at pdf.com (Spencer Graves)
Date: Wed, 28 Jun 2006 17:13:34 -0700
Subject: [Rd] UTF-8 and .Rd files
In-Reply-To: <44A2E90A.2080506@bank-banque-canada.ca>
References: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>	<Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>	<148ed8180606270546m73d30f60yf8f1f33d8c874616@mail.gmail.com>	<44A14925.3040707@cimr.cam.ac.uk>	<44A17269.5010803@pdf.com>	<148ed8180606271130w44024df3w49aa3340b8a107d6@mail.gmail.com>	<x28xnixq02.fsf@turmalin.kubism.ku.dk>
	<44A2E90A.2080506@bank-banque-canada.ca>
Message-ID: <44A31B2E.6030405@pdf.com>

Hi, Paul:

	  Earlier in this thread, G?ran Brostr?m wrote, "I really only need 
non-ascii to write the name of the author (me) correctly."

	  The standard advice I got from a similar thread some time ago is to 
use the 'vanilla' Latin alphabet for key words, file and function names, 
etc., and restrict the use of other characters to documentation where 
the consequences of problems are not so severe.  I, too, would like to 
see all the accents, Arabic script, Chinese characters, etc., that other 
people want to use.  However, we must work with the world as it is, not 
as we would like it to be (while devoting some time where appropriate to 
making the world better, as everyone who contributes to the R Project 
does).

	  Best Wishes,
	  Spencer Graves

Paul Gilbert wrote:
> I've been following this thread hoping for the definitive answer...
> 
> Peter Dalgaard wrote:
> ....
>> Well, I do tend to think that we should just use utf, assuming that
>> people have the relevant glyphs. If they don't, then they might get
>> little hollow rectangles but so what? 
> 
> My problem is that I put an ? in a reference in an Rd file, and now my 
> builds fail on some of my systems. I can switch which systems work and 
> which are broken, but I can not get it to work on all systems. I have 
> spent way too much time trying to figure out what is wrong. So, wrt "so 
> what", I need to choose between checking my packages on all the 
> different systems I use, or having an ? in the Rd file. I think my 
> problem is more complicated than having the relevant glyphs. I suspect 
> it has to do with having the same locale on all systems doing NFS 
> mounts, or on my cvs server, or something strange like that.
> 
> Paul
> ====================================================================================
> 
> La version fran?aise suit le texte anglais.
> 
> ------------------------------------------------------------------------------------
> 
> This email may contain privileged and/or confidential inform...{{dropped}}
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From pinard at iro.umontreal.ca  Thu Jun 29 22:33:22 2006
From: pinard at iro.umontreal.ca (=?iso-8859-1?Q?Fran=E7ois?= Pinard)
Date: Thu, 29 Jun 2006 16:33:22 -0400
Subject: [Rd] UTF-8 and .Rd files
In-Reply-To: <44A31B2E.6030405@pdf.com>
References: <148ed8180606270230s31e957e6r15fc346bf85183d7@mail.gmail.com>
	<Pine.LNX.4.64.0606271103260.9176@gannet.stats.ox.ac.uk>
	<148ed8180606270546m73d30f60yf8f1f33d8c874616@mail.gmail.com>
	<44A14925.3040707@cimr.cam.ac.uk> <44A17269.5010803@pdf.com>
	<148ed8180606271130w44024df3w49aa3340b8a107d6@mail.gmail.com>
	<x28xnixq02.fsf@turmalin.kubism.ku.dk>
	<44A2E90A.2080506@bank-banque-canada.ca> <44A31B2E.6030405@pdf.com>
Message-ID: <20060629203322.GA12124@phenix.progiciels-bpi.ca>

[Spencer Graves]

> [...] I, too, would like to see all the accents, Arabic script, 
> Chinese characters, etc., that other people want to use.  However, we 
> must work with the world as it is, not as we would like it to be 
> (while devoting some time where appropriate to making the world 
> better, as everyone who contributes to the R Project does).

Granted and agreed.  Yet, R already does already a little more than 
a few other programming languages in this area, and this is particularly 
sympathetic! :-)  One could hope and wish that R developers, within 
reasonable efforts, continue making R better and even make it take some 
lead in this area.  Not going fanatic about it of course, but at least, 
carefully avoiding any backward move in development, or changes that 
would be unfriendly to internationalisation of R.

-- 
Fran?ois Pinard   http://pinard.progiciels-bpi.ca


From ericlecoutre at gmail.com  Fri Jun 30 08:30:19 2006
From: ericlecoutre at gmail.com (Eric Lecoutre)
Date: Fri, 30 Jun 2006 08:30:19 +0200
Subject: [Rd] advice on arguments
In-Reply-To: <44A4057C.4040203@zoo.ufl.edu>
References: <44A4057C.4040203@zoo.ufl.edu>
Message-ID: <5d897a2f0606292330v40cbd06bm53dda1a5b2800d96@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20060630/76996fda/attachment.pl 

From murdoch at stats.uwo.ca  Fri Jun 30 12:40:36 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 30 Jun 2006 06:40:36 -0400
Subject: [Rd] advice on arguments
In-Reply-To: <5d897a2f0606292330v40cbd06bm53dda1a5b2800d96@mail.gmail.com>
References: <44A4057C.4040203@zoo.ufl.edu>
	<5d897a2f0606292330v40cbd06bm53dda1a5b2800d96@mail.gmail.com>
Message-ID: <44A4FFA4.7030103@stats.uwo.ca>

On 6/30/2006 2:30 AM, Eric Lecoutre wrote:
> Hi Ben,
> 
> I have often asked  myself such question and often
> come back to the following additional options:
> 
>  (4) Use '...' and ensure encapsulated functions/calls (foo2 and foo3) also
> have '...' within their arguments. There is no problem to call 3dspehre with
> 
> a list of arguments that include both 'radius' and 'size' if (and only if)
> 3dsphere
> function argumnts are (radius=,...) so that size will just be ignored.
> 
> foo1 <- function(...){
>    foo2(...)
>    foo3(...)
> }

There are some problems with this approach (as there are problems with 
all the other approaches; whether these matter is a matter of judgment):

  - It may require you to modify foo2 and foo3.  In this particular 
instance, foo2 and foo3 are in a package, not under Ben's direct control.

  - It breaks R's ability to warn you about typos.  For example,

foo1(sz =  3)

would not cause an unrecognized parameter error; both functions would 
accept and ignore the bad parameter setting.

  - It breaks the partial argument matching, e.g.

foo1(siz = 3)

would act just like the above, instead of like

foo1(size = 3)

Duncan Murdoch

> 
> Document that all arguments foo2 can handle could be
> introduced within a cool to foo1, as well as those foo3 arguments.
> Only problem/point of detail is case where foo2 and foo3 do share
> arguments and you would like to distinguish.
> 
> Then use (5)
> foo1 <- function(x,foo2Args=list(radius=2), foo3Args=list(size), ...){
>   do.call("foo2",foo2Args)
>  # or do.call("foo2",c(foo2Args,list(...)) depending on what you prefer
> }
> 
> Eric
> 
> 
> 2006/6/29, Ben Bolker <bolker at zoo.ufl.edu>:
>>
>>    I have a general style question about R coding.
>>
>>   Suppose I'm writing a function (foo1) that calls other functions
>> (foo2, foo3, ...) which have complicated argument
>> lists (e.g. optim(), plot()), _and_
>> I may be calling several different functions in the body of
>> foo1.  Since foo2 and foo3 have different sets of arguments, I
>> can't just use "..." ; I did write some code a while ago that
>> would look at formals() to dissect out arguments that should
>> be passed to the different functions, but it seemed overly
>> complex.
>>
>> The particular case I have now is a little simpler.
>>
>> foo2 (points3d) and foo3 (spheres3d)
>> are both functions from the rgl package
>> that pass arguments such as color, alpha, etc. along to
>> an rgl.material() command with lots of possible arguments.
>> (The function may also call segments3d or lines3d, but
>> these all have the same arguments as points3d.)
>> However, to change the size of points you use "size"; to
>> change the size of spheres you use "radius".  Do I
>> (1) add "radius" to the argument list, cluttering up
>> the argument list for one particular special case?
>> (2) add "size" to the argument list, so that it doesn't
>> become part of "..." and I can say spheres3d(radius=size,...) ?
>> (3) do something like
>>    dotlist = list(...)
>>    if (type=="s" && !is.null(dotlist$size)) radius <- dotlist$size
>> and pull "size" out of ... myself (and make a note to that
>> effect in  the documentation)?
>> (I guess another general solution to this is to ask for
>> lists of arguments, like MoreArgs in mapply(). Another
>> would be to go back and change spheres3d to make size
>> a synonym for radius ... )
>>
>> any thoughts?
>>    Ben Bolker
>>
>>
>> --
>> 620B Bartram Hall                            bolker at zoo.ufl.edu
>> Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
>> Box 118525                                   (ph)  352-392-5697
>> Gainesville, FL 32611-8525                   (fax) 352-392-3704
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
> 
> 
>


From lor at zhwin.ch  Fri Jun 30 15:26:18 2006
From: lor at zhwin.ch (lor at zhwin.ch)
Date: Fri, 30 Jun 2006 15:26:18 +0200 (CEST)
Subject: [Rd] plot with NAs in x and type="s" (PR#9046)
Message-ID: <20060630132618.9A0B8538C1@slim.kubism.ku.dk>

Full_Name: Ren? Locher
Version: Version 2.3.1 (2006-06-01)
OS: i386, mingw32
Submission from: (NULL) (160.85.104.70)


The problem seems to occur only, when you want to plot a vector containing a NA
value at position 2 and the plotting type is "s" or "S". 

## start of code

O3<-c(0.8,NA,0.7,1.1,0.9,5.5,1.3,1,1.2)

## The following error is reported with the two commands below:
## Error in plot.xy(xy, type, ...) : unable to allocate memory (in GPolygon)

plot(O3,type="s")
plot(O3,type="S")

## The following commands work without problems
plot(O3,type="l")
plot(c(0.6, O3),type="s")
plot(c(0.4,0.6, O3),type="s")
plot(O3[2:length(O3)], type="s")

## end of code

Kind regards

Ren?


From asr at ufl.edu  Fri Jun 30 16:49:42 2006
From: asr at ufl.edu (Allen S. Rout)
Date: 30 Jun 2006 10:49:42 -0400
Subject: [Rd] advice on arguments
References: <44A4057C.4040203@zoo.ufl.edu>
	<5d897a2f0606292330v40cbd06bm53dda1a5b2800d96@mail.gmail.com>
	<44A4FFA4.7030103@stats.uwo.ca>
Message-ID: <86ejx6aebd.fsf@ufl.edu>

Duncan Murdoch <murdoch at stats.uwo.ca> writes:

>   - It breaks the partial argument matching, e.g.
> 
> foo1(siz = 3)
> 
> would act just like the above, instead of like
> 
> foo1(size = 3)


Is this viewed as a feature?  Having ( dataset=3 ) foul the namespace
for d, da, dat, data, etc... sounds miserable to me.


- Allen S. Rout


From gelbukh at gelbukh.com  Fri Jun 30 17:00:56 2006
From: gelbukh at gelbukh.com (gelbukh at gelbukh.com)
Date: Fri, 30 Jun 2006 17:00:56 +0200 (CEST)
Subject: [Rd] CFP: CIC-2006, 15th International Conference on Computing,
	published by IEEE CS (one week reminder) (PR#9047)
Message-ID: <20060630150056.B7BB653605@slim.kubism.ku.dk>

15th International Conference on Computing

        CIC 2006

        November 21 to 24, 2006
        Mexico City, Mexico
        
        http://magno-congreso.cic.ipn.mx/CIC-2006
        
        Proceedings: IEEE CS Press.

        Deadline:
        July 1 expression of interest (recommended),
        July 7 full papers.
        

        CALL FOR PAPERS


*** PUBLICATION ***

Papers accepted for oral session will be published by IEEE CS Press.
Papers accepted for poster session will be published in a journal
"Research in Computing Science," ISSN 1665-9899. Extended versions
of selected papers will be published in the journal "Computacion y
Sistemas," ISSN 1405-5546.


Submissions are received via the webpage, see guidelines there.
Direct submission page is www.easychair.org/CIC2006.


*** IMPORTANT DATES ***

July 1: expression of interest (abstract) -- recommended.
July 7: full text for registered papers.
 

*** TOPICS ***

All areas of Computer Science and Engineering, see webpage.


PLEASE CIRCULATE this CFP among your students and colleagues.
We apologize if you receive this CFP more than once. It is sent
in good faith of its interest for you as a CS expert or student.


From ggrothendieck at gmail.com  Fri Jun 30 17:05:04 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 30 Jun 2006 11:05:04 -0400
Subject: [Rd] advice on arguments
In-Reply-To: <44A4057C.4040203@zoo.ufl.edu>
References: <44A4057C.4040203@zoo.ufl.edu>
Message-ID: <971536df0606300805i7d1ec9b3r7048f840b8f190ac@mail.gmail.com>

Here is an approach.  fn.dots takes a character string, fn.name, such as
a function name and a named list, dots.  If fn.name is "f", say, then
it returns all components of dots whose name is of the form f.somestring
removing the f. prefix as well as components containing unprefixed
strings. It would typically be used like this:

f.dots <- fn.dots("f", dots)
do.call("f", f.dots)

and the user can specify that x be passed to all functions by
naming it x, to just f by naming it f.x.  If both x and f.x appears
then f.x takes precedence in a call to f.

fn.dots <- function(fn.name, dots) {
	pat <- paste("^", fn.name, "[.]", sep = "")
	nm <- names(dots)
	fn.nm <- grep(pat, nm, value = TRUE)
	dots[sub(pat, "", fn.nm)] <- dots[fn.nm]
	dots[grep("^[^.]*[.]", nm, value = TRUE)] <- NULL
	dots
}


dots <- list(a = 33, f.a = 55, g.a = 44, b = 56, g.c = 99)
fn.dots("f", dots) # list(a = 55, b = 56)
fn.dots("g", dots) # list(a = 44, b = 56, c = 99)
fn.dots("h", dots) # list(a = 33, b = 56)


On 6/29/06, Ben Bolker <bolker at zoo.ufl.edu> wrote:
>
>    I have a general style question about R coding.
>
>   Suppose I'm writing a function (foo1) that calls other functions
> (foo2, foo3, ...) which have complicated argument
> lists (e.g. optim(), plot()), _and_
> I may be calling several different functions in the body of
> foo1.  Since foo2 and foo3 have different sets of arguments, I
> can't just use "..." ; I did write some code a while ago that
> would look at formals() to dissect out arguments that should
> be passed to the different functions, but it seemed overly
> complex.
>
>  The particular case I have now is a little simpler.
>
>  foo2 (points3d) and foo3 (spheres3d)
> are both functions from the rgl package
> that pass arguments such as color, alpha, etc. along to
> an rgl.material() command with lots of possible arguments.
> (The function may also call segments3d or lines3d, but
> these all have the same arguments as points3d.)
> However, to change the size of points you use "size"; to
> change the size of spheres you use "radius".  Do I
> (1) add "radius" to the argument list, cluttering up
> the argument list for one particular special case?
> (2) add "size" to the argument list, so that it doesn't
> become part of "..." and I can say spheres3d(radius=size,...) ?
> (3) do something like
>    dotlist = list(...)
>    if (type=="s" && !is.null(dotlist$size)) radius <- dotlist$size
> and pull "size" out of ... myself (and make a note to that
> effect in  the documentation)?
>  (I guess another general solution to this is to ask for
> lists of arguments, like MoreArgs in mapply(). Another
> would be to go back and change spheres3d to make size
> a synonym for radius ... )
>
>  any thoughts?
>    Ben Bolker
>
>
> --
> 620B Bartram Hall                            bolker at zoo.ufl.edu
> Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
> Box 118525                                   (ph)  352-392-5697
> Gainesville, FL 32611-8525                   (fax) 352-392-3704
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From maechler at stat.math.ethz.ch  Fri Jun 30 17:09:32 2006
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 30 Jun 2006 17:09:32 +0200
Subject: [Rd] [R] zero.print in print.table after adding margins
In-Reply-To: <x264ik9sey.fsf@viggo.kubism.ku.dk>
References: <40D3930AC1C8EA469E39536E5BC80835023FB024@EXDKBA021.corp.novocorp.net>
	<x264ik9sey.fsf@viggo.kubism.ku.dk>
Message-ID: <17573.16044.463160.287875@stat.math.ethz.ch>

>>>>> "PD" == Peter Dalgaard <p.dalgaard at biostat.ku.dk>
>>>>>     on 29 Jun 2006 12:18:13 +0200 writes:

 PD> "BXC (Bendix Carstensen)" <bxc at steno.dk> writes:
 PD> 
 PD> > The function addmargins() adds margins to a table, but returns a matrix.
 PD> > But even after converted to a table the print.zero="." option of
 PD> > print.table() does not work:
 PD> > 
 PD> > > x <- sample( 1:7, 20, replace=T )
 PD> > > y <- sample( 1:7, 20, replace=T )
 PD> > > tt <- table( x, y )
 PD> > > tx <- as.table( addmargins( table( x, y ) ) )
 PD> > > print( tt, zero.print="." )
 PD> >    y
 PD> > x   1 2 3 4 5 6 7
 PD> >   1 1 2 2 . . 1 .
 PD> >   2 1 . . 1 . . .
 PD> >   3 . . . . . . 2
 PD> >   4 1 . . . . 1 .
 PD> >   5 1 . 1 . . 1 .
 PD> >   6 . 1 . 1 . . .
 PD> >   7 . . 1 . 1 1 .
 PD> > > print( tx, zero.print="." )
 PD> >      y
 PD> > x      1  2  3  4  5  6  7 Sum
 PD> >   1    1  2  2  0  0  1  0   6
 PD> >   2    1  0  0  1  0  0  0   2
 PD> >   3    0  0  0  0  0  0  2   2
 PD> >   4    1  0  0  0  0  1  0   2
 PD> >   5    1  0  1  0  0  1  0   3
 PD> >   6    0  1  0  1  0  0  0   2
 PD> >   7    0  0  1  0  1  1  0   3
 PD> >   Sum  4  3  4  2  1  4  2  20
 PD> > 
 PD> > Is this a facility of print.table?
 PD> > The attributes() of tt and tx have identical stucture. 
 PD> 
 PD> It appears to be intentional.
 PD> 
 PD> print.table has
 PD> 
 PD>     if (is.integer(x) && zero.print != "0" && any(i0 <- !ina &
 PD>         x == 0))
 PD>         xx[i0] <- sub("0", zero.print, xx[i0])
 PD> 
 PD> and of course,
 PD> 
 PD> > storage.mode(tx)
 PD> [1] "double"
 PD> > storage.mode(tt)
 PD> [1] "integer"
 PD> 
 PD> The reason could be that it is not entirely clear what to expect for
 PD> values that are zero up to round-off.
 PD> 
 PD> storage.mode(tx) <- "integer" fixes things up.

On the other hand, I'm pretty sure I was the one who added
'zero.print' and I don't oppose at all to change

   is.integer(x)   to   all(x == round(x))

{and then for efficiency swap the *order* of the tests inside that if(.)}

which I think would be a bit more convenient and still ok (*)
here.

Martin Maechler, ETH Zurich

(*) yes, one could then construct artificial cases where the
    if(.) test would ``conceptually'' be wrong, but I think that
    would not matter for all practical cases.


From maechler at stat.math.ethz.ch  Fri Jun 30 17:32:21 2006
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 30 Jun 2006 17:32:21 +0200
Subject: [Rd] inconsistent matplot behaviour?
In-Reply-To: <44A3C7A6.6060403@fz-rossendorf.de>
References: <44A3C7A6.6060403@fz-rossendorf.de>
Message-ID: <17573.17413.660940.114741@stat.math.ethz.ch>

>>>>> "Joerg" == Joerg van den Hoff <j.van_den_hoff at fz-rossendorf.de>
>>>>>     on Thu, 29 Jun 2006 14:29:26 +0200 writes:

    Joerg> I raised this question quite some time ago but it quitly went down the 
    Joerg> river. I'll give it a second try (before keeping my modified version of 
    Joerg> matplot for ever...):

    Joerg> matplot supports vectors (and/or character strings) for a number of 
    Joerg> arguments namely `type', `lty', `lwd', `pch', `col', `cex'. all of them 
    Joerg> act consistently in such a way that the first entries are used for plot
    Joerg> of x-column 1 vs. y-column 1 and so forth.

    Joerg> for some reason `bg' is missing from this list (maybe simplyh 
    Joerg> forgotten?). 

It maybe that matplot() predates the "color fillable"
symbols,  or then the author of R's version of matplot just forgot...


    Joerg> forgotten?). this causes an, according to my mind, at least, undesirable 
    Joerg> (inconsistent) behaviour in calls like

    Joerg> matplot(x, y, type = 'b', pch = 21:23, col = 2:4, bg = 2:4)

    Joerg> (assuming x, y are 3-column matrices)

    Joerg> `col', `pch' and the other explicit arguments are interpreted on a 'per 
    Joerg> plot' basis whereas `bg' is transferred to plot.default and is therefore 
    Joerg> interpreted on a 'per point' basis. thus, `col' above sets the colors of 
    Joerg> the plotting symbols in the different line plots (say, column 1 to 3) 
    Joerg> whereas `bg' sets the colors alternating down each column of the data, 
    Joerg> i.e. within each  line plot.

    Joerg> question: would'nt it be desirable and more consistent/intuitive if `bg' 
    Joerg> where treated on the same footing as the other explicit parameters, 
    Joerg> especially if combinations of `pch>=21' and `bg' are envisaged?

    Joerg> necessary changes to matplot are trivial:

Hmm: Your patch is *not* against  matplot.R  from the R sources,
hence is not directly applicable at all.

Also,  it does need  patches for the help file.

But, the R-devel (aka 2.4.0-to-be) will have the desired feature
as from tomorrow.

Thank you for the suggestion,
Martin Maechler, ETH Zurich


    Joerg> 3c3
    Joerg> <     ..., add = FALSE, verbose = getOption("verbose"))
    Joerg> ---
    >> bg = NULL, ..., add = FALSE, verbose = getOption("verbose"))
    Joerg> 75a76,77
    >> if (length(bg) < k)
    >> bg <- rep(bg, length.out = k)
    Joerg> 81c83,84
    Joerg> <             pch = pch[1], col = col[1], cex = cex[1], ...)
    Joerg> ---
    >> pch = pch[1], col = col[1], cex = cex[1], bg = bg[1],
    >> ...)
    Joerg> 85c88
    Joerg> <             pch = pch[i], col = col[i], cex = cex[i])
    Joerg> ---
    >> pch = pch[i], col = col[i], cex = cex[i], bg = bg[i])

    Joerg> ______________________________________________
    Joerg> R-devel at r-project.org mailing list
    Joerg> https://stat.ethz.ch/mailman/listinfo/r-devel


From ggrothendieck at gmail.com  Fri Jun 30 18:33:54 2006
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 30 Jun 2006 12:33:54 -0400
Subject: [Rd] typo in ?writeLines
Message-ID: <971536df0606300933u321cfe66od98eb318cbacf687@mail.gmail.com>

In ?writeLines the word 'call' should be 'calls' in the first line
under 'Details'

If the 'con' is a character string, the function call 'file' to

I am using:
Windows XP  "R version 2.4.0 Under development (unstable) (2006-06-20 r38361)"


From tlumley at u.washington.edu  Fri Jun 30 19:27:02 2006
From: tlumley at u.washington.edu (tlumley at u.washington.edu)
Date: Fri, 30 Jun 2006 19:27:02 +0200 (CEST)
Subject: [Rd] non-central qt() near zero (PR#9050)
Message-ID: <20060630172702.AA39A50931@slim.kubism.ku.dk>


   curve(qt(x,df=20,ncp=3),from=0,to=0.4)
   curve(qt(x,df=20,ncp=3),from=0,to=0.004)

shows discontinuities, the first at 0.00135.

 	-thomas

Thomas Lumley			Assoc. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle


From murdoch at stats.uwo.ca  Fri Jun 30 22:03:29 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 30 Jun 2006 16:03:29 -0400
Subject: [Rd] advice on arguments
In-Reply-To: <86ejx6aebd.fsf@ufl.edu>
References: <44A4057C.4040203@zoo.ufl.edu>	<5d897a2f0606292330v40cbd06bm53dda1a5b2800d96@mail.gmail.com>	<44A4FFA4.7030103@stats.uwo.ca>
	<86ejx6aebd.fsf@ufl.edu>
Message-ID: <44A58391.1010008@stats.uwo.ca>

On 6/30/2006 10:49 AM, Allen S. Rout wrote:
> Duncan Murdoch <murdoch at stats.uwo.ca> writes:
> 
>>   - It breaks the partial argument matching, e.g.
>>
>> foo1(siz = 3)
>>
>> would act just like the above, instead of like
>>
>> foo1(size = 3)
> 
> 
> Is this viewed as a feature?  Having ( dataset=3 ) foul the namespace
> for d, da, dat, data, etc... sounds miserable to me.

I think there are mixed feelings about whether it is a feature or a 
misfeature, but it's a very old property of the S language.

Duncan Murdoch


From asr at ufl.edu  Fri Jun 30 22:14:48 2006
From: asr at ufl.edu (Allen S. Rout)
Date: Fri, 30 Jun 2006 16:14:48 -0400
Subject: [Rd] advice on arguments
In-Reply-To: (Your message of Fri, 30 Jun 2006 16:03:29 -0400.)
	<44A58391.1010008@stats.uwo.ca> 
Message-ID: <200606302014.k5UKEnAL1282238@nersp.osg.ufl.edu>


>> On Fri, 30 Jun 2006 16:03:29 -0400, Duncan Murdoch <murdoch at stats.uwo.ca> said:

> I think there are mixed feelings about whether it is a feature or a
> misfeature, but it's a very old property of the S language.

Oh well, understood. :)


- Allen S. Rout


From murdoch at stats.uwo.ca  Fri Jun 30 22:17:22 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 30 Jun 2006 16:17:22 -0400
Subject: [Rd] typo in ?writeLines
In-Reply-To: <971536df0606300933u321cfe66od98eb318cbacf687@mail.gmail.com>
References: <971536df0606300933u321cfe66od98eb318cbacf687@mail.gmail.com>
Message-ID: <44A586D2.2000804@stats.uwo.ca>

On 6/30/2006 12:33 PM, Gabor Grothendieck wrote:
> In ?writeLines the word 'call' should be 'calls' in the first line
> under 'Details'
> 
> If the 'con' is a character string, the function call 'file' to
> 
> I am using:
> Windows XP  "R version 2.4.0 Under development (unstable) (2006-06-20 r38361)"

Thanks, will fix.

Duncan Murdoch


From pgilbert at bank-banque-canada.ca  Fri Jun 30 22:19:19 2006
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 30 Jun 2006 16:19:19 -0400
Subject: [Rd] foo2Args()
Message-ID: <44A58747.7080705@bank-banque-canada.ca>

I was just considering trying to clean up the arguments to a function 
that calls other functions,
and was playin with a suggestion Achim made during a conversation at 
useR.  The idea is, instead of using list(), use a small function to 
construct and check arguments. My hope was to be able to do this without 
making it globally visible:

foo <- function(x, args=foo2Args()) {
  foo2Args <- function(a=1, b=2){list(a,b)}
  # above would actual do more testing of args
  #now I would call foo2 with args, but to test just
  args
  }
 
Now,

 > foo(1)   # should I be surprized that this works
[[1]]
[1] 1

[[2]]
[1] 2

 > foo(1, args=foo2Args(a=2, b=10)) # or that this does not
Error in foo(1, args = foo2Args(a = 2, b = 10)) :
    could not find function "foo2Args"

Paul
====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential inform...{{dropped}}


From murdoch at stats.uwo.ca  Fri Jun 30 22:43:18 2006
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 30 Jun 2006 16:43:18 -0400
Subject: [Rd] foo2Args()
In-Reply-To: <44A58747.7080705@bank-banque-canada.ca>
References: <44A58747.7080705@bank-banque-canada.ca>
Message-ID: <44A58CE6.2040903@stats.uwo.ca>

On 6/30/2006 4:19 PM, Paul Gilbert wrote:
> I was just considering trying to clean up the arguments to a function 
> that calls other functions,
> and was playin with a suggestion Achim made during a conversation at 
> useR.  The idea is, instead of using list(), use a small function to 
> construct and check arguments. My hope was to be able to do this without 
> making it globally visible:
> 
> foo <- function(x, args=foo2Args()) {
>   foo2Args <- function(a=1, b=2){list(a,b)}
>   # above would actual do more testing of args
>   #now I would call foo2 with args, but to test just
>   args
>   }
>  
> Now,
> 
>  > foo(1)   # should I be surprized that this works
> [[1]]
> [1] 1
> 
> [[2]]
> [1] 2

I don't think it really works, it's just a coincidence that the answer 
matches your expectations:

 > foo(3)
[[1]]
[1] 1

[[2]]
[1] 2

Or maybe I am completely misunderstanding your expectations...

> 
>  > foo(1, args=foo2Args(a=2, b=10)) # or that this does not
> Error in foo(1, args = foo2Args(a = 2, b = 10)) :
>     could not find function "foo2Args"

This is a somewhat subtle thing about the way args are evaluated.  What 
is done makes lots of sense once you understand it:

  - When you specify an argument in the call, the expression you give is 
evaluated in the current context.  In the context where you made this 
call, foo2Args is not defined, hence the error.

  - When you specify a default for an argument, it is evaluated in the 
local context of the function evaluation.  So as a default, foo2Args is 
recognized, because it's a local variable within foo.

You also need to remember "lazy evaluation":  neither of the above 
actually take place until args is used.

R is pretty flexible, so it's probably possible to do whatever you 
intended here; can you describe exactly what you want to happen?

Duncan Murdoch


From pgilbert at bank-banque-canada.ca  Fri Jun 30 23:12:09 2006
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 30 Jun 2006 17:12:09 -0400
Subject: [Rd] foo2Args()
In-Reply-To: <44A58CE6.2040903@stats.uwo.ca>
References: <44A58747.7080705@bank-banque-canada.ca>
	<44A58CE6.2040903@stats.uwo.ca>
Message-ID: <44A593A9.9010802@bank-banque-canada.ca>



Duncan Murdoch wrote:

> On 6/30/2006 4:19 PM, Paul Gilbert wrote:
>
>> I was just considering trying to clean up the arguments to a function 
>> that calls other functions,
>> and was playin with a suggestion Achim made during a conversation at 
>> useR.  The idea is, instead of using list(), use a small function to 
>> construct and check arguments. My hope was to be able to do this 
>> without making it globally visible:
>>
>> foo <- function(x, args=foo2Args()) {
>>   foo2Args <- function(a=1, b=2){list(a,b)}
>>   # above would actual do more testing of args
>>   #now I would call foo2 with args, but to test just
>>   args
>>   }
>>  
>> Now,
>>
>>  > foo(1)   # should I be surprized that this works
>> [[1]]
>> [1] 1
>>
>> [[2]]
>> [1] 2
>
>
> I don't think it really works, it's just a coincidence that the answer 
> matches your expectations:
>
> > foo(3)
> [[1]]
> [1] 1
>
> [[2]]
> [1] 2
>
> Or maybe I am completely misunderstanding your expectations...
>
>>
>>  > foo(1, args=foo2Args(a=2, b=10)) # or that this does not
>> Error in foo(1, args = foo2Args(a = 2, b = 10)) :
>>     could not find function "foo2Args"
>
>
> This is a somewhat subtle thing about the way args are evaluated.  
> What is done makes lots of sense once you understand it:
>
>  - When you specify an argument in the call, the expression you give 
> is evaluated in the current context.  In the context where you made 
> this call, foo2Args is not defined, hence the error.
>
>  - When you specify a default for an argument, it is evaluated in the 
> local context of the function evaluation.  So as a default, foo2Args 
> is recognized, because it's a local variable within foo.
>
> You also need to remember "lazy evaluation":  neither of the above 
> actually take place until args is used.
>
> R is pretty flexible, so it's probably possible to do whatever you 
> intended here; can you describe exactly what you want to happen?

I guess what I want to happen is that when args is used it it gets 
evaluated in the local context of the function, whether or not I am 
specifying the argument or using the default. Is there a way to do that?

What I expected to happen was that it would always get evaluated either 
in the local context or in the calling context, i.e., it would fail or 
not fail, but that would not depend on whether I am specifying the 
argument or using the default, so your first points explain this.

Thanks,
Paul

>
> Duncan Murdoch
====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential inform...{{dropped}}


