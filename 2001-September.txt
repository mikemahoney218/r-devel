From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep  1 10:20:01 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 1 Sep 2001 11:20:01 +0200
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <87y9o08lpq.fsf@jeeves.blindglobe.net>
References: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
 <87y9o08lpq.fsf@jeeves.blindglobe.net>
Message-ID: <15248.43073.253841.228346@mithrandir.hornik.net>

>>>>> A J Rossini writes:

>>>>> "BDR" == Brian D Ripley <Prof> writes:
>>> I would also be happier if we did not refer to the variables
>>> explicitly as `columns'.  (This sounds a bit stupid from the
>>> person who wrote write.table and introduced arguments
>>> `row.names' and `col.names'.  Although, at least one of these
>>> was modelled after an existing function).  E.g. something like
>>> 
>>> read.table(......, caseNames, varNames, varClasses, .....)
>>> 
>>> would be nice ...

BDR> The problem is that what is being referred to *is* columns
BDR> and not variables.  If you have row names on the file, the
BDR> numbering is different.  So it matters to use sufficiently
BDR> precise terminology.

> I would tend to agree with Brian.

I do too :-)

> To me, caseNames / varNames sounds a rather bit arrogant, since there
> are a number of other "formats" (contingency tables come to mind) for
> which read.table is one possible way for slurping in the data prior to
> munging it, though I guess one could argue that this is an abuse of
> tools.

I would certain argue along these lines.  read.table() is a bit strange
in the sense that its naming indicates that it is a reader for data in
`tabular' format, but the fact that it creates a data frame indicates
that it makes certain assumptions ...

And of course, you can use read.ftable to read in contingency tables.

-k



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep  1 10:13:49 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 1 Sep 2001 11:13:49 +0200
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
References: <15247.32012.939118.454204@mithrandir.hornik.net>
 <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
Message-ID: <15248.42701.52888.634703@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> On Fri, 31 Aug 2001, Kurt Hornik wrote:
>> > Prof Brian Ripley wrote:
>> >>
>> >> Currently read.table is rather limited in its type conversion.
>> >> The algorithm is
>> >>
>> >> 0) Read as character
>> >> 1) Try to convert to numeric. If that works, quit
>> >> 2) Convert to factor unless !as.is.
>> >>
>> >> I am thinking about adding more flexibility and more classes by the
>> >> following two changes.
>> >>
>> >> A) Anticipating the arrival of classes for all R objects, add an
>> >> argument say `colClasses' that allows the user to specify the desired
>> >> class for every column.  This could default to "auto", or NA if people
>> >> think "auto" might be a relevant class name one day.
>> >>
>> >> The effect would be equivalent to running
>> >>
>> >> data[[i]] <- as(data[[i]], colClasses[i])
>> >>
>> >> instead of
>> >>
>> >> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
>> >>
>> >> except that standard classes such as "numeric", "factor", "logical",
>> >> "character" would be dispatched directly, and argument "dec" would be
>> >> consulted where appropriate.
>> >>
>> >> colClasses = "character" would suppress all conversions, which cannot
>> >> currently be done.
>> 
>> Just a small remark.  I would prefer `NA' to "auto" (or "unknown").  May
>> be too late to change this now :-)

> Anything can be changed up to 1.4.0 release.  In particular, the
> present code will have to be changed unless as() is in base by then.

Ok.  Can I formally propose to use NA then?  (I guess this convention
could be useful in similar situations as well.)

>> I would also be happier if we did not refer to the variables explicitly
>> as `columns'.  (This sounds a bit stupid from the person who wrote
>> write.table and introduced arguments `row.names' and `col.names'.
>> Although, at least one of these was modelled after an existing
>> function).  E.g. something like
>> 
>> read.table(......, caseNames, varNames, varClasses, .....)
>> 
>> would be nice ...

> The problem is that what is being referred to *is* columns and not
> variables.  If you have row names on the file, the numbering is
> different.  So it matters to use sufficiently precise terminology.

Right.  Convinced now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep  1 11:01:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 1 Sep 2001 11:01:05 +0100 (BST)
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <15248.42701.52888.634703@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0109011100100.24001-100000@gannet.stats>

On Sat, 1 Sep 2001, Kurt Hornik wrote:

> >>>>> Prof Brian D Ripley writes:
>
> > On Fri, 31 Aug 2001, Kurt Hornik wrote:
> >> > Prof Brian Ripley wrote:
> >> >>
> >> >> Currently read.table is rather limited in its type conversion.
> >> >> The algorithm is
> >> >>
> >> >> 0) Read as character
> >> >> 1) Try to convert to numeric. If that works, quit
> >> >> 2) Convert to factor unless !as.is.
> >> >>
> >> >> I am thinking about adding more flexibility and more classes by the
> >> >> following two changes.
> >> >>
> >> >> A) Anticipating the arrival of classes for all R objects, add an
> >> >> argument say `colClasses' that allows the user to specify the desired
> >> >> class for every column.  This could default to "auto", or NA if people
> >> >> think "auto" might be a relevant class name one day.
> >> >>
> >> >> The effect would be equivalent to running
> >> >>
> >> >> data[[i]] <- as(data[[i]], colClasses[i])
> >> >>
> >> >> instead of
> >> >>
> >> >> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
> >> >>
> >> >> except that standard classes such as "numeric", "factor", "logical",
> >> >> "character" would be dispatched directly, and argument "dec" would be
> >> >> consulted where appropriate.
> >> >>
> >> >> colClasses = "character" would suppress all conversions, which cannot
> >> >> currently be done.
> >>
> >> Just a small remark.  I would prefer `NA' to "auto" (or "unknown").  May
> >> be too late to change this now :-)
>
> > Anything can be changed up to 1.4.0 release.  In particular, the
> > present code will have to be changed unless as() is in base by then.
>
> Ok.  Can I formally propose to use NA then?  (I guess this convention
> could be useful in similar situations as well.)

Already done.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Sat Sep  1 19:30:52 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Sat, 1 Sep 2001 14:30:52 -0400
Subject: [Rd] RE: [R] GUI support from R
Message-ID: <5429125E11E4D411AF7300805FE603A8014CED7F@groexmbcr02.pfizer.com>

Hi Duncan,

I've been looking around at GUI toolkits to use with Python (and by
extension R). I initially tried Tk, but was disappointed because there is no
consistent set of high level widgets.  I've subsequently done some looking
at QT, wxWindows, and GTK.  QT is out because I am a *commercial* user, and
I don't want to have a license hassle.  GTK seemed to have a lower level of
functionality than wxWindows and seemed to be less platform independent.
>From what I could see, the on-line documentation to wxWindows was better. In
addition, the wxPython developer has indicated that the wxWindows
development team is very supportive.

I was also very pleased that wxWindows handles printing, and it had a nice
set of high-level widgets as part of the 'base' library.  There seem to be
some high level widgets for GTK, but they are 'add-ons' and seem less well
integrated or supported.  

Also, looking around at the 'embarrassment of riches' among Python GUI
toolkits, I've come to the conclusion that it is better to have *one* GUI
library that is well supported than to have a set of them.  Our community is
really too small to fracture again into different toolkit users.  Perhaps a
single set of high-level bindings would do the trick, but I worry that not
enough functionality would be available at that level of abstraction.

BTW, wxWindows uses GTK as the backend on Unix, so you may still be able to
control gtk-based components that are written in GTK. 

I'm very interested in the GUI issue because I am currently building a GUI
tool that will use R as the computational backend.  It would be really nice
if I could do the GUI building and control directly in R rather than using
Python.  It would make one less language to learn & manage for me and for
other users/developers.

And, I really do need some of the high level widgets and functionality
offered directly by wxWindows, but (as far as I can tell) not by GTK.

-Greg

-----Original Message-----
From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
Sent: Monday, August 27, 2001 11:14 AM
To: Warnes, Gregory R
Cc: 'Duncan Temple Lang'; rossini@u.washington.edu; nychka@cgd.ucar.edu;
r-help@stat.math.ethz.ch
Subject: Re: [R] GUI support from R


Warnes, Gregory R wrote:
> 
> Hey Duncan,
> 
> Can you share with us the reason for selecting GTK?  

Well there are a few basic reasons.

I know less about wxWindow than I do about Gtk.  And there is a lot
less to Gtk than to wxWindows.  So that makes it is easier for me to
think about the bindings. (Also, Gtk is like X, and I spent a fair bit
of time desigining and developing S bindings for X and different
widget sets a long time ago.) The additional features of wxWindows
such as threads, etc. may get in the way in thinking about how Gtk
bindings relate to, Tcl/Tk, Java, and other GUI toolkits.  It would be
nice to have a level of abstraction above these toolkits with the
ability to select one and use the same code for all.

My "hope" is to be able to use Slcc to programmatically generate 
bindings for Gtk. This will be easier given that I know
my way around some of the Gtk code. However, if it works,
applying the same programmatic approach to wxWindows
should give us 80% of the grunt work for free and then
require some tinkering later.

Importantly, the applications I have in mind for RGtk are things like
extending Gnumeric with plugins, programming GGobi events and even
add-ons, and generally interacting with many of the Gnome tools
including potentially building a GUI for R to replace the C-level
Gnome code with R scripts, making it more flexible and adaptable.
If we use wxWindows for these Gtk-based applications, we are adding
an extra layer between R and the application that will probably be
confusing.

If we do get to the level of abstraction across toolkits, it won't
matter much which toolkit we use, but will only require bindings to
the ones of interest. The challenge then will be to allow integrating
widgets from different toolkits, and that can be tricky on some
platforms.

So, I am in no way ruling out wxWindows. In many respects, it looks
more appealing - just too big at present. What is its development
energy like relative to Gtk. I am very happy to work on wxWindows
too. There is very little in the RGtk at present.

 D.


> 
> -Greg
> 
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be
privileged. It is intended for the addressee(s) only. Access to this E-mail
by anyone else is unauthorized. If you are not an addressee, any disclosure
or copying of the contents of this E-mail or any action taken (or not taken)
in reliance on it is unauthorized and may be unlawful. If you are not an
addressee, please inform the sender immediately.
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Sun Sep  2 05:38:43 2001
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Sun, 2 Sep 2001 12:38:43 +0800 (GMT-8)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CED7F@groexmbcr02.pfizer.com>
Message-ID: <Pine.GSO.4.21.0109021215050.18721-100000@sun450.comp.nus.edu.sg>


Hi,
One thing to note is that GTk development is in a state of
transition. They are moving steadily towards GTK 2.0 which involves many
changes in Glib, Gdk  and the underlying private functions. James
Hesteridge who is the maintainer of pygtk is actively working on
integrating all the changes into the next version which is why thre hasn't
been a release in a while.

The nice feature of gtk vs wxwindows is that gtk is written entirely in C
while wxWindows is C++. My understanding is that there is byte
incompatibility between different compilers for C++, meaning that C++ code
compiled with VC++ cannot be combined with c++ code compiled with gcc. I
don't know how this affects modules loaded into python.

There is a very complete comparison of GUI toolkits at 
http://www.geocities.com/SiliconValley/Vista/7184/guitool.html

anyway my 2c

Nicholas

 On Sat, 1 Sep 2001, Warnes, Gregory R wrote:

> Hi Duncan,
> 
> I've been looking around at GUI toolkits to use with Python (and by
> extension R). I initially tried Tk, but was disappointed because there is no
> consistent set of high level widgets.  I've subsequently done some looking
> at QT, wxWindows, and GTK.  QT is out because I am a *commercial* user, and
> I don't want to have a license hassle.  GTK seemed to have a lower level of
> functionality than wxWindows and seemed to be less platform independent.
> >From what I could see, the on-line documentation to wxWindows was better. In
> addition, the wxPython developer has indicated that the wxWindows
> development team is very supportive.
> 
> I was also very pleased that wxWindows handles printing, and it had a nice
> set of high-level widgets as part of the 'base' library.  There seem to be
> some high level widgets for GTK, but they are 'add-ons' and seem less well
> integrated or supported.  
> 
> Also, looking around at the 'embarrassment of riches' among Python GUI
> toolkits, I've come to the conclusion that it is better to have *one* GUI
> library that is well supported than to have a set of them.  Our community is
> really too small to fracture again into different toolkit users.  Perhaps a
> single set of high-level bindings would do the trick, but I worry that not
> enough functionality would be available at that level of abstraction.
> 
> BTW, wxWindows uses GTK as the backend on Unix, so you may still be able to
> control gtk-based components that are written in GTK. 
> 
> I'm very interested in the GUI issue because I am currently building a GUI
> tool that will use R as the computational backend.  It would be really nice
> if I could do the GUI building and control directly in R rather than using
> Python.  It would make one less language to learn & manage for me and for
> other users/developers.
> 
> And, I really do need some of the high level widgets and functionality
> offered directly by wxWindows, but (as far as I can tell) not by GTK.
> 
> -Greg
> 
> -----Original Message-----
> From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> Sent: Monday, August 27, 2001 11:14 AM
> To: Warnes, Gregory R
> Cc: 'Duncan Temple Lang'; rossini@u.washington.edu; nychka@cgd.ucar.edu;
> r-help@stat.math.ethz.ch
> Subject: Re: [R] GUI support from R
> 
> 
> Warnes, Gregory R wrote:
> > 
> > Hey Duncan,
> > 
> > Can you share with us the reason for selecting GTK?  
> 
> Well there are a few basic reasons.
> 
> I know less about wxWindow than I do about Gtk.  And there is a lot
> less to Gtk than to wxWindows.  So that makes it is easier for me to
> think about the bindings. (Also, Gtk is like X, and I spent a fair bit
> of time desigining and developing S bindings for X and different
> widget sets a long time ago.) The additional features of wxWindows
> such as threads, etc. may get in the way in thinking about how Gtk
> bindings relate to, Tcl/Tk, Java, and other GUI toolkits.  It would be
> nice to have a level of abstraction above these toolkits with the
> ability to select one and use the same code for all.
> 
> My "hope" is to be able to use Slcc to programmatically generate 
> bindings for Gtk. This will be easier given that I know
> my way around some of the Gtk code. However, if it works,
> applying the same programmatic approach to wxWindows
> should give us 80% of the grunt work for free and then
> require some tinkering later.
> 
> Importantly, the applications I have in mind for RGtk are things like
> extending Gnumeric with plugins, programming GGobi events and even
> add-ons, and generally interacting with many of the Gnome tools
> including potentially building a GUI for R to replace the C-level
> Gnome code with R scripts, making it more flexible and adaptable.
> If we use wxWindows for these Gtk-based applications, we are adding
> an extra layer between R and the application that will probably be
> confusing.
> 
> If we do get to the level of abstraction across toolkits, it won't
> matter much which toolkit we use, but will only require bindings to
> the ones of interest. The challenge then will be to allow integrating
> widgets from different toolkits, and that can be tricky on some
> platforms.
> 
> So, I am in no way ruling out wxWindows. In many respects, it looks
> more appealing - just too big at present. What is its development
> energy like relative to Gtk. I am very happy to work on wxWindows
> too. There is very little in the RGtk at present.
> 
>  D.
> 
> 
> > 
> > -Greg
> > 
> > 
> > LEGAL NOTICE
> > Unless expressly stated otherwise, this message is confidential and may be
> privileged. It is intended for the addressee(s) only. Access to this E-mail
> by anyone else is unauthorized. If you are not an addressee, any disclosure
> or copying of the contents of this E-mail or any action taken (or not taken)
> in reliance on it is unauthorized and may be unlawful. If you are not an
> addressee, please inform the sender immediately.
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-
> > r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> >
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sun Sep  2 06:22:59 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sun, 2 Sep 2001 01:22:59 -0400 (EDT)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.21.0109021215050.18721-100000@sun450.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.10.10109020107370.15143-100000@hsph.harvard.edu>

IMHO the wrong question is being asked here---it is not a matter of
underlying toolkit. We could literally spend the rest of our lives arguing
over toolkit, especially since toolkits come in and out of fashion (X
widget sets come to mind...), stopped being developed and start again
(wxWindows had a period of stagnation if I recall) or undergo radical
changes (gtk as mentioned). Rather I think what really needs to be decided
is a uniform R level mechanism for GUIs, something philisophically to
Java's AWT design. In the AWT case, the underlying aspects of the Java
toolkit representation are implemented using the appropriate system-level
toolkit (Motif on UNIX, Win32/GDI on Windows,
I-Forget-The-Name-of-the-MacOS-Windowing-API and so on). Once that toolkit
has been established then discussions over underlying toolkit become moot
except for people who want to maintain R's GUI facilities on platform
foo. The traditional graphics implementation already does this to some
extent at the "C" level (though I would advocate the abstraction of the
graphics devices into the R level making them packages rather than
integral to the system. In other words, devices would be implemented as a
class derived from a particular virtual base) so it seems reasonable to do
the same thing for GUIs and interactive graphics.

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

On Sun, 2 Sep 2001, Nicholas Lewin-Koh wrote:

> 
> Hi,
> One thing to note is that GTk development is in a state of
> transition. They are moving steadily towards GTK 2.0 which involves many
> changes in Glib, Gdk  and the underlying private functions. James
> Hesteridge who is the maintainer of pygtk is actively working on
> integrating all the changes into the next version which is why thre hasn't
> been a release in a while.
> 
> The nice feature of gtk vs wxwindows is that gtk is written entirely in C
> while wxWindows is C++. My understanding is that there is byte
> incompatibility between different compilers for C++, meaning that C++ code
> compiled with VC++ cannot be combined with c++ code compiled with gcc. I
> don't know how this affects modules loaded into python.
> 
> There is a very complete comparison of GUI toolkits at 
> http://www.geocities.com/SiliconValley/Vista/7184/guitool.html
> 
> anyway my 2c
> 
> Nicholas
> 
>  On Sat, 1 Sep 2001, Warnes, Gregory R wrote:
> 
> > Hi Duncan,
> > 
> > I've been looking around at GUI toolkits to use with Python (and by
> > extension R). I initially tried Tk, but was disappointed because there is no
> > consistent set of high level widgets.  I've subsequently done some looking
> > at QT, wxWindows, and GTK.  QT is out because I am a *commercial* user, and
> > I don't want to have a license hassle.  GTK seemed to have a lower level of
> > functionality than wxWindows and seemed to be less platform independent.
> > >From what I could see, the on-line documentation to wxWindows was better. In
> > addition, the wxPython developer has indicated that the wxWindows
> > development team is very supportive.
> > 
> > I was also very pleased that wxWindows handles printing, and it had a nice
> > set of high-level widgets as part of the 'base' library.  There seem to be
> > some high level widgets for GTK, but they are 'add-ons' and seem less well
> > integrated or supported.  
> > 
> > Also, looking around at the 'embarrassment of riches' among Python GUI
> > toolkits, I've come to the conclusion that it is better to have *one* GUI
> > library that is well supported than to have a set of them.  Our community is
> > really too small to fracture again into different toolkit users.  Perhaps a
> > single set of high-level bindings would do the trick, but I worry that not
> > enough functionality would be available at that level of abstraction.
> > 
> > BTW, wxWindows uses GTK as the backend on Unix, so you may still be able to
> > control gtk-based components that are written in GTK. 
> > 
> > I'm very interested in the GUI issue because I am currently building a GUI
> > tool that will use R as the computational backend.  It would be really nice
> > if I could do the GUI building and control directly in R rather than using
> > Python.  It would make one less language to learn & manage for me and for
> > other users/developers.
> > 
> > And, I really do need some of the high level widgets and functionality
> > offered directly by wxWindows, but (as far as I can tell) not by GTK.
> > 
> > -Greg
> > 
> > -----Original Message-----
> > From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> > Sent: Monday, August 27, 2001 11:14 AM
> > To: Warnes, Gregory R
> > Cc: 'Duncan Temple Lang'; rossini@u.washington.edu; nychka@cgd.ucar.edu;
> > r-help@stat.math.ethz.ch
> > Subject: Re: [R] GUI support from R
> > 
> > 
> > Warnes, Gregory R wrote:
> > > 
> > > Hey Duncan,
> > > 
> > > Can you share with us the reason for selecting GTK?  
> > 
> > Well there are a few basic reasons.
> > 
> > I know less about wxWindow than I do about Gtk.  And there is a lot
> > less to Gtk than to wxWindows.  So that makes it is easier for me to
> > think about the bindings. (Also, Gtk is like X, and I spent a fair bit
> > of time desigining and developing S bindings for X and different
> > widget sets a long time ago.) The additional features of wxWindows
> > such as threads, etc. may get in the way in thinking about how Gtk
> > bindings relate to, Tcl/Tk, Java, and other GUI toolkits.  It would be
> > nice to have a level of abstraction above these toolkits with the
> > ability to select one and use the same code for all.
> > 
> > My "hope" is to be able to use Slcc to programmatically generate 
> > bindings for Gtk. This will be easier given that I know
> > my way around some of the Gtk code. However, if it works,
> > applying the same programmatic approach to wxWindows
> > should give us 80% of the grunt work for free and then
> > require some tinkering later.
> > 
> > Importantly, the applications I have in mind for RGtk are things like
> > extending Gnumeric with plugins, programming GGobi events and even
> > add-ons, and generally interacting with many of the Gnome tools
> > including potentially building a GUI for R to replace the C-level
> > Gnome code with R scripts, making it more flexible and adaptable.
> > If we use wxWindows for these Gtk-based applications, we are adding
> > an extra layer between R and the application that will probably be
> > confusing.
> > 
> > If we do get to the level of abstraction across toolkits, it won't
> > matter much which toolkit we use, but will only require bindings to
> > the ones of interest. The challenge then will be to allow integrating
> > widgets from different toolkits, and that can be tricky on some
> > platforms.
> > 
> > So, I am in no way ruling out wxWindows. In many respects, it looks
> > more appealing - just too big at present. What is its development
> > energy like relative to Gtk. I am very happy to work on wxWindows
> > too. There is very little in the RGtk at present.
> > 
> >  D.
> > 
> > 
> > > 
> > > -Greg
> > > 
> > > 
> > > LEGAL NOTICE
> > > Unless expressly stated otherwise, this message is confidential and may be
> > privileged. It is intended for the addressee(s) only. Access to this E-mail
> > by anyone else is unauthorized. If you are not an addressee, any disclosure
> > or copying of the contents of this E-mail or any action taken (or not taken)
> > in reliance on it is unauthorized and may be unlawful. If you are not an
> > addressee, please inform the sender immediately.
> > >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-
> > > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> > >
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > 
> 
>                  CH3
>                   |
>                   N             Nicholas Lewin-Koh
>                  / \            Dept of Statistics
>            N----C   C==O        Program in Ecology and Evolutionary Biology
>           ||   ||   |           Iowa State University
>           ||   ||   |           Ames, IA 50011
>           CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
>             \  / \ /            nlewin@iastate.edu
>              N    C
>              |   ||             Currently
>             CH3   O             Graphics Lab
>                                 School of Computing
>                                 National University of Singapore
>      The Real Part of Coffee    kohnicho@comp.nus.edu.sg
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Sep  2 07:39:48 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 2 Sep 2001 07:39:48 +0100 (BST)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.10.10109020107370.15143-100000@hsph.harvard.edu>
Message-ID: <Pine.GSO.4.31.0109020731320.9820-100000@auk.stats>

On Sun, 2 Sep 2001, Byron Ellis wrote:

> IMHO the wrong question is being asked here---it is not a matter of
> underlying toolkit. We could literally spend the rest of our lives arguing
> over toolkit, especially since toolkits come in and out of fashion (X
> widget sets come to mind...), stopped being developed and start again
> (wxWindows had a period of stagnation if I recall) or undergo radical
> changes (gtk as mentioned). Rather I think what really needs to be decided
> is a uniform R level mechanism for GUIs, something philisophically to
> Java's AWT design. In the AWT case, the underlying aspects of the Java
> toolkit representation are implemented using the appropriate system-level
> toolkit (Motif on UNIX, Win32/GDI on Windows,
> I-Forget-The-Name-of-the-MacOS-Windowing-API and so on). Once that toolkit

That's how Tcl/Tk does it.

> has been established then discussions over underlying toolkit become moot
> except for people who want to maintain R's GUI facilities on platform
> foo.

Rather, it becomes moot for people who want such facilities.  I suspect
noone wants to maintain them ....  That Tcl/Tk needs a different low-level
interface on different platforms is a pain: the original R tcltk package
code runs on a call that only exists in Tcl/Tk for Unix.  If that were to
happen again, I am pretty sure that Tcl/Tk would be omitted from the
Windows port of R (and I believe it is from the Classic Mac port).

[...]

Event-loop integration is a major issue with GUIs, and it's a toolkit
issue.  R is designed to run an event loop and wants to be in control.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Sun Sep  2 13:05:16 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 02 Sep 2001 05:05:16 -0700
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.10.10109020107370.15143-100000@hsph.harvard.edu>
References: <Pine.GSO.4.10.10109020107370.15143-100000@hsph.harvard.edu>
Message-ID: <87zo8du7b7.fsf@jeeves.blindglobe.net>

>>>>> "BE" == Byron Ellis <bellis@hsph.harvard.edu> writes:

    BE> IMHO the wrong question is being asked here---it is not a
    BE> matter of underlying toolkit. We could literally spend the
    BE> rest of our lives arguing over toolkit, especially since
    BE> toolkits come in and out of fashion (X widget sets come to
    BE> mind...), stopped being developed and start again (wxWindows
    BE> had a period of stagnation if I recall) or undergo radical
    BE> changes (gtk as mentioned). Rather I think what really needs
    BE> to be decided is a uniform R level mechanism for GUIs,

I think the primary problem is writing it in the first place.  

There is access to AWT and Swing, via RSJava (when it's feeling
stable... sigh...).

There is the tcltk toolkit, which we are having some success using,
actually (menu's, etc).

You can argue about the merits of anything all you want, but he who
codes first wins in this game.  And is stuck with having to maintain
it, if they plan on anyone else using it...

I think this is the big issue.  No one has much time, and this is a
big time sink, especially with multiple moving targets (R vs "threaded
R", event loops; various GUI API changes; supporting libraries; lots
of other critical issues which are obvious enough not to state...).  I
think it'll take a hacker with Brian or Duncan's skills to craft it
fast enough to not let it get stuck.

While a uniform API would be nice for R, to attach to any toolkit, I
suspect it is non trivial.  There are movements/projects like "AnyGUI"
for Python, which are attempting to be flexible over a choice of
toolkits from a single set of code.  However, it seems that every GUI
API has its own unique twists on layout, etc, that make this
seriously non-trivial.

Best just to pick one and go...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sun Sep  2 14:07:53 2001
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Sun, 2 Sep 2001 15:07:53 +0200 (MET DST)
Subject: [Rd] Install problems R 1.3.1 on HP-UX (PR#1084)
Message-ID: <200109021307.PAA14257@pubhealth.ku.dk>


Hi,

I installed R 1.3.1 on HP-UX. This caused me quite some
problems. These problems did not occur with the previous version
I installed, which was R version 1.2.3.

First, the result of configure:

    R is now configured for hppa-hp-hpux10.20

      Source directory:          .
      Installation directory:    /opt_local/opt/R
      C compiler:                cc  -D_HPUX_SOURCE +DA1.1 +DS1.1 -Wp,-H16000 -I/opt_local/opt/readline/include -I/opt_local/opt/tk/include -I/opt_local/opt/tcl/include -I/opt_local/opt/jpeg6/include -I/opt_local/opt/png/include -I/opt_local/opt/ncurses/include -I/opt_local/opt/zlib/include -I/users1/kleiweg/R-1.3.1-source -L/opt_local/opt/readline/lib -L/opt_local/opt/tk/lib -L/opt_local/opt/tcl/lib -L/opt_local/opt/jpeg6/lib -L/opt_local/opt/png/lib -L/opt_local/opt/ncurses/lib -L/opt_local/opt/zlib/lib -L/users1/kleiweg/R-1.3.1-source -Aa
      C++ compiler:              c++  -g -O2
      FORTRAN compiler:          fort77  +DA1.1 +DS1.1

      X11 support:               yes
      Gnome support:             no
      Tcl/Tk support:            yes

      R profiling support:       yes
      R as a shared library:     no

The first make halts on src/main/Rdynload.c, the compiler can't
find the variable CFunTab. I solved this by adding the following
lines after #include "R_ext/Rdynpriv.h" :

    #include "../unix/FFDecl.h"
    static CFunTabEntry CFunTab[] =
    {
    #include "../unix/FFTab.h"
      {NULL, NULL}
    };

Now, make runs a bit further, until it stops with the following
errors:

	    cc -Wl,-E  -o R.bin  CConverters.o  Rdynload.o RNG.o  apply.o arithmetic.o array.o attrib.o  bind.o builtin.o  character.o coerce.o colors.o complex.o connections.o context.o  cov.o cum.o  dcf.o datetime.o debug.o devPS.o devPicTeX.o deparse.o deriv.o  devices.o dotcode.o dstruct.o duplicate.o  envir.o errors.o eval.o  format.o fourier.o  gram.o gram-ex.o graphics.o  internet.o iosupport.o  lapack.o list.o logic.o  main.o match.o memory.o model.o  names.o  objects.o optim.o optimize.o options.o  par.o paste.o platform.o  plot.o plot3d.o plotmath.o  print.o printarray.o printvector.o printutils.o  random.o regex.o relop.o  saveload.o scan.o seq.o size.o sort.o source.o split.o  subassign.o subscript.o subset.o summary.o  unique.o util.o  version.o vfonts.o xxxpr.o ../unix/libunix.a ../appl/libappl.a ../nmath/libnmath.a   -lcl -lisamstub -ldld -L/opt_local/opt/readline/lib -L/opt_local/opt/tk/lib -L/opt_local/opt/tcl/lib -L/opt_local/opt/jpeg6/lib -L/opt_local/opt/png/lib -!
!
L/opt_local/opt/ncurses/lib -L/opt_local/opt/zlib/lib -L/users1/kleiweg/R-1.3.1-source  -lz -lreadline -lncurses -lm
    /usr/ccs/bin/ld: Duplicate symbol "dlerror" in files ../unix/libunix.a(gnome.o) and ../unix/libunix.a(X11.o)
    /usr/ccs/bin/ld: Duplicate symbol "dlopen" in files ../unix/libunix.a(gnome.o) and ../unix/libunix.a(X11.o)
    /usr/ccs/bin/ld: Duplicate symbol "dlclose" in files ../unix/libunix.a(gnome.o) and ../unix/libunix.a(X11.o)
    /usr/ccs/bin/ld: Duplicate symbol "dlsym" in files ../unix/libunix.a(gnome.o) and ../unix/libunix.a(X11.o)
    /usr/ccs/bin/ld: Unsatisfied symbols:
       moduleCdynload (code)
    /usr/ccs/bin/ld: Found 4 duplicate symbol(s)
    *** Error exit code 1

Why is there an object gnome.o when I don't have Gnome support?

I had to make some more changes to several files before all
compiled OK.

In src/main/Rdynload.c I changed this:

    #ifdef HAVE_DLFCN_H

into this:

    #ifndef HAVE_DLFCN_H

In src/unix/hpdlfcn.c I removed the following functions:
    dlerror
    dlopen
    dlclose
    dlsym

Now make runs without errors. After make install I had to do
chmod +x R.bin.

R seems the work fine now.



Version:
 platform = hppa-hp-hpux10.20
 arch = hppa
 os = hpux10.20
 system = hppa, hpux10.20
 status =
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Sep  2 17:38:40 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Sep 2001 18:38:40 +0200
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.31.0109020731320.9820-100000@auk.stats>
References: <Pine.GSO.4.31.0109020731320.9820-100000@auk.stats>
Message-ID: <x2elppeeen.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> Rather, it becomes moot for people who want such facilities.  I suspect
> noone wants to maintain them ....  That Tcl/Tk needs a different low-level
> interface on different platforms is a pain: the original R tcltk package
> code runs on a call that only exists in Tcl/Tk for Unix.  If that were to
> happen again, I am pretty sure that Tcl/Tk would be omitted from the
> Windows port of R (and I believe it is from the Classic Mac port).
> 
> [...]
> 
> Event-loop integration is a major issue with GUIs, and it's a toolkit
> issue.  R is designed to run an event loop and wants to be in control.

Actually, the Tcl crowd has been expending some effort on this issue,
and have seemingly come up with a notification structure that is
*designed* to interact with foreign event loops. 

Last I looked, the Tcl sources for the event loops on the three
platforms (X11/Win32/Mac) seemed to be essentially sample code that
could be grafted on to an existing event loop. That didn't look like
particularly simple reading though, and that was even before Tcl/Tk
had threads... (in the version that shipped with RedHat, that is).

I've been wanting to sink my teeth into this stuff for quite a while,
because it annoys me that I understand so little of it and because I
suspect that the issues are really independent of the choice of GUI
and there is a lot to be learned. 

I rather strongly expect that the current Tcl/Tk interface could be
substantially improved in the process. I'm pretty sure that the
PolledEvents method we use now is plainly wrong -- it certainly is on
Unix, where we had an event-handler solution in place originally, but
that didn't work on Windows, at least not in that way. I sort of
suspect that R itself might benefit by a similar centralization of
event handling as Tcl already has, but that might be a pipe dream.

Also, lack of understanding of the work of the Tcl'ers is probably the
main reason that we don't have it on Classic Mac. The input handler
hack that we use on X11 and Windows doesn't seem to port to that
platform (right, Stefano?). Whether this is important for long enough
befor OS X makes the issue moot is of course debatable.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sun Sep  2 18:54:31 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sun, 2 Sep 2001 13:54:31 -0400 (EDT)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <87zo8du7b7.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.GSO.4.10.10109021338480.17421-100000@hsph.harvard.edu>

On 2 Sep 2001, A.J. Rossini wrote:

> >>>>> "BE" == Byron Ellis <bellis@hsph.harvard.edu> writes:
> 
>     BE> IMHO the wrong question is being asked here---it is not a
>     BE> matter of underlying toolkit. We could literally spend the
>     BE> rest of our lives arguing over toolkit, especially since
>     BE> toolkits come in and out of fashion (X widget sets come to
>     BE> mind...), stopped being developed and start again (wxWindows
>     BE> had a period of stagnation if I recall) or undergo radical
>     BE> changes (gtk as mentioned). Rather I think what really needs
>     BE> to be decided is a uniform R level mechanism for GUIs,
> 
> I think the primary problem is writing it in the first place.  
> 
> There is access to AWT and Swing, via RSJava (when it's feeling
> stable... sigh...).

Right, but this relies on not only an outside package, but another
language entirely. A hefty one at that.

> 
> There is the tcltk toolkit, which we are having some success using,
> actually (menu's, etc).
> 
> You can argue about the merits of anything all you want, but he who
> codes first wins in this game.  And is stuck with having to maintain
> it, if they plan on anyone else using it...
> 
> I think this is the big issue.  No one has much time, and this is a
> big time sink, especially with multiple moving targets (R vs "threaded
> R", event loops; various GUI API changes; supporting libraries; lots
> of other critical issues which are obvious enough not to state...).  I
> think it'll take a hacker with Brian or Duncan's skills to craft it
> fast enough to not let it get stuck.

Ok, you're giving more reasons to develop a binding that is robust enough
to survive changes--not a reason to get stuck with package foo version
0.whatever that only works properly on a few platforms.

> 
> While a uniform API would be nice for R, to attach to any toolkit, I
> suspect it is non trivial.  There are movements/projects like "AnyGUI"
> for Python, which are attempting to be flexible over a choice of
> toolkits from a single set of code.  However, it seems that every GUI
> API has its own unique twists on layout, etc, that make this
> seriously non-trivial.

Yes, and every GUI backend has its own twists that are just bad enough to
completely derail things like GTK porting projects let alone the language
bindings. You have in fact hit upon the exact reason why a reasonably
defined binding for the R language would be a good idea: No Matter What
Package You Pick It Will Suck On Some Platform. 

All I'm saying is that before people go haring off on a bunch of bindings
for various graphics APIs (be it GTK, wxWindows, Tk, Win32, OpenGL GUI or
*whatever*) that it might be advantageous to sit down at perhaps plan out
a common set of features that all work in a way that makes sense for *R*
not for Java or C++ or Tcl (AWT,Gtk+,Tk) and then go from there.

> 
> Best just to pick one and go...
> 
> best,
> -tony



Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

	
> 
> -- 
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------- (wednesday/friday is unknown) --------
> FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
> UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sun Sep  2 19:05:06 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sun, 2 Sep 2001 14:05:06 -0400 (EDT)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.31.0109020731320.9820-100000@auk.stats>
Message-ID: <Pine.GSO.4.10.10109021355200.17421-100000@hsph.harvard.edu>

On Sun, 2 Sep 2001, Prof Brian D Ripley wrote:

> On Sun, 2 Sep 2001, Byron Ellis wrote:
> 
> That's how Tcl/Tk does it.

Yup, and AWT and a couple of other packages (Smalltalk too, but Smalltalk
is a strange place :-))

> Rather, it becomes moot for people who want such facilities.  I suspect
> noone wants to maintain them ....  That Tcl/Tk needs a different low-level
> interface on different platforms is a pain: the original R tcltk package
> code runs on a call that only exists in Tcl/Tk for Unix.  If that were to
> happen again, I am pretty sure that Tcl/Tk would be omitted from the
> Windows port of R (and I believe it is from the Classic Mac port).

Thats more an issue of the Tcl/Tk people making a mistake than anything
else. Package maintenance has to happen whether or not a 'generic' GUI
toolkit binding for R is developed. The same thing happens in other
spaces, just look at the Perl database stuff. Once upon a time every
database on the planet had its own unique Perl package. Now they have DBI
and everyone thinks its the best thing since sliced bread. However, DBI
doesn't really *do* very much except define a particular interface
mechanism. I'm saying do the same for the GUI---the implementation work
will be more or less the same and there will have to be a 'toolkit
specific' capability ('cause someone will be unable to live with foo
widget that only exists on platform bar) but it can be done. (For
instance, OpenGL implements an extension mechanism, albeit somewhat
clumsily)

> 
> [...]
> 
> Event-loop integration is a major issue with GUIs, and it's a toolkit
> issue.  R is designed to run an event loop and wants to be in control.

Yup. Thats gonna be a problem with every GUI toolkit since GUI
interactivity is psychologically important. Its also a problem with any
embedding project since they too will want control of the event loop.

> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 


Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Sun Sep  2 22:01:20 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 02 Sep 2001 14:01:20 -0700
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.10.10109021338480.17421-100000@hsph.harvard.edu>
References: <Pine.GSO.4.10.10109021338480.17421-100000@hsph.harvard.edu>
Message-ID: <871ylpxq73.fsf@jeeves.blindglobe.net>

>>>>> "BE" == Byron Ellis <bellis@hsph.harvard.edu> writes:

    BE> All I'm saying is that before people go haring off on a bunch
    BE> of bindings for various graphics APIs (be it GTK, wxWindows,
    BE> Tk, Win32, OpenGL GUI or *whatever*) that it might be
    BE> advantageous to sit down at perhaps plan out a common set of
    BE> features that all work in a way that makes sense for *R* not
    BE> for Java or C++ or Tcl (AWT,Gtk+,Tk) and then go from there.

I'll argue the opposite, actually.  Best to have a bunch of prototypes
around and determine use-cases before deciding a particular something
is "the REAL deal".

Until you have a bunch of prototype applications sitting on the
prototype bindings, it'll be difficult to get it right.

(and yes, I've played with two, so far, Swing bindings via RSJava and
the tcltk ones...).

I suspect that the favorite of anyone will be "whatever they are used
to".  

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wb@vestein.arb-phys.uni-dortmund.de  Mon Sep  3 10:34:19 2001
From: wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke)
Date: 3 Sep 2001 11:34:19 +0200
Subject: [Rd] R-1.3.0-1.3.1.diff does not patch correctly
Message-ID: <9mviqr$1bh3$1@yorikke.arb-phys.uni-dortmund.de>

Subj. says it. The patch contains several lines complaining about "No newline".
After removing these the patch was applicable.
-- 
Dipl.-Math. Wilhelm Bernhard Kloke
Institut fuer Arbeitsphysiologie an der Universitaet Dortmund
Ardeystrasse 67, D-44139 Dortmund, Tel. 0231-1084-257
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep  3 10:58:39 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Sep 2001 11:58:39 +0200
Subject: [Rd] R-1.3.0-1.3.1.diff does not patch correctly
In-Reply-To: <9mviqr$1bh3$1@yorikke.arb-phys.uni-dortmund.de>
References: <9mviqr$1bh3$1@yorikke.arb-phys.uni-dortmund.de>
Message-ID: <x2elpozjcg.fsf@blueberry.kubism.ku.dk>

wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke) writes:

> Subj. says it. The patch contains several lines complaining about "No newline".
> After removing these the patch was applicable.

Odd. This worked cleanly when I tried it on RedHat 7.1. What version
of patch is this?

The offending lines are flagged with a \ in col.1, which is
undocumented in the info file for diff, but obviously discernible from
ordinary unidiff lines (which have either space, + , or - ). So I
suspect that a recent "patch" just treats that as a comment.

Looks like the problem could be difficult to avoid (except by ensuring
that we don't have any files without terminal newlines) since I see no
diff option controlling the behaviour.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep  3 11:13:06 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Sep 2001 12:13:06 +0200
Subject: [Rd] R-1.3.0-1.3.1.diff does not patch correctly
In-Reply-To: <x2elpozjcg.fsf@blueberry.kubism.ku.dk>
References: <9mviqr$1bh3$1@yorikke.arb-phys.uni-dortmund.de>
 <x2elpozjcg.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ae0cziod.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke) writes:
> 
> > Subj. says it. The patch contains several lines complaining about "No newline".
> > After removing these the patch was applicable.
> 
> Odd. This worked cleanly when I tried it on RedHat 7.1. What version
> of patch is this?
> 
> The offending lines are flagged with a \ in col.1, which is
> undocumented in the info file for diff, but obviously discernible from
> ordinary unidiff lines (which have either space, + , or - ). So I
> suspect that a recent "patch" just treats that as a comment.
> 
> Looks like the problem could be difficult to avoid (except by ensuring
> that we don't have any files without terminal newlines) since I see no
> diff option controlling the behaviour.

BTW: The offending files are these:

+++ R-1.3.1/src/library/base/man/Rhome.Rd       Sun Aug  5 02:00:39 2001
+++ R-1.3.1/src/library/base/man/kronecker.Rd   Sun Aug  5 02:00:39 2001
+++ R-1.3.1/src/library/base/man/manova.Rd      Sun Aug  5 02:00:39 2001
+++ R-1.3.1/src/library/mva/man/Harman74.cor.Rd Wed Aug  8 06:32:40 2001
+++ R-1.3.1/src/macintosh/FF_CREATE     Sun Aug 19 08:55:53 2001
+++ R-1.3.1/src/macintosh/GETVERSION    Sun Aug 19 08:56:27 2001
+++ R-1.3.1/src/macintosh/ReadMe.MPW    Sun Aug 19 08:04:58 2001

The ones in the .Rd files should be avoidable. I'm less sure about the
Mac files.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep  3 11:22:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 3 Sep 2001 11:22:17 +0100 (BST)
Subject: [Rd] R-1.3.0-1.3.1.diff does not patch correctly
In-Reply-To: <x2ae0cziod.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0109031120520.7956-100000@gannet.stats.ox.ac.uk>

On 3 Sep 2001, Peter Dalgaard BSA wrote:

> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
>
> > wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke) writes:
> >
> > > Subj. says it. The patch contains several lines complaining about "No newline".
> > > After removing these the patch was applicable.
> >
> > Odd. This worked cleanly when I tried it on RedHat 7.1. What version
> > of patch is this?
> >
> > The offending lines are flagged with a \ in col.1, which is
> > undocumented in the info file for diff, but obviously discernible from
> > ordinary unidiff lines (which have either space, + , or - ). So I
> > suspect that a recent "patch" just treats that as a comment.
> >
> > Looks like the problem could be difficult to avoid (except by ensuring
> > that we don't have any files without terminal newlines) since I see no
> > diff option controlling the behaviour.
>
> BTW: The offending files are these:
>
> +++ R-1.3.1/src/library/base/man/Rhome.Rd       Sun Aug  5 02:00:39 2001
> +++ R-1.3.1/src/library/base/man/kronecker.Rd   Sun Aug  5 02:00:39 2001
> +++ R-1.3.1/src/library/base/man/manova.Rd      Sun Aug  5 02:00:39 2001
> +++ R-1.3.1/src/library/mva/man/Harman74.cor.Rd Wed Aug  8 06:32:40 2001
> +++ R-1.3.1/src/macintosh/FF_CREATE     Sun Aug 19 08:55:53 2001
> +++ R-1.3.1/src/macintosh/GETVERSION    Sun Aug 19 08:56:27 2001
> +++ R-1.3.1/src/macintosh/ReadMe.MPW    Sun Aug 19 08:04:58 2001
>
> The ones in the .Rd files should be avoidable. I'm less sure about the
> Mac files.

They already are avoided in the R-devel tree.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Mon Sep  3 16:14:00 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Mon, 3 Sep 2001 10:14:00 -0500
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <871ylpxq73.fsf@jeeves.blindglobe.net>; from rossini@blindglobe.net on Sun, Sep 02, 2001 at 02:01:20PM -0700
References: <Pine.GSO.4.10.10109021338480.17421-100000@hsph.harvard.edu> <871ylpxq73.fsf@jeeves.blindglobe.net>
Message-ID: <20010903101400.C31934@nokomis.stat.umn.edu>

On Sun, Sep 02, 2001 at 02:01:20PM -0700, A.J. Rossini wrote:
> >>>>> "BE" == Byron Ellis <bellis@hsph.harvard.edu> writes:
> 
>     BE> All I'm saying is that before people go haring off on a bunch
>     BE> of bindings for various graphics APIs (be it GTK, wxWindows,
>     BE> Tk, Win32, OpenGL GUI or *whatever*) that it might be
>     BE> advantageous to sit down at perhaps plan out a common set of
>     BE> features that all work in a way that makes sense for *R* not
>     BE> for Java or C++ or Tcl (AWT,Gtk+,Tk) and then go from there.
> 
> I'll argue the opposite, actually.  Best to have a bunch of prototypes
> around and determine use-cases before deciding a particular something
> is "the REAL deal".
> 
> Until you have a bunch of prototype applications sitting on the
> prototype bindings, it'll be difficult to get it right.
> 
> (and yes, I've played with two, so far, Swing bindings via RSJava and
> the tcltk ones...).
> 
> I suspect that the favorite of anyone will be "whatever they are used
> to".  
> 
> best,
> -tony
> 

I think tony is right.  Ideally, we want eventually to have a
hight-level, toolkit and OS independent interface, if that is
possible.  It may turn out that some things are too difficult to make
work cleanly across systems without going to a common denominator that
is too low; in those cases we would like a clean way of describing the
differences.  Unfortunately it isn;t possible to build such things in
the abstract--you need some prototypes to gain experience.

Also, one thing I have learned in may years of experience with this
sort of thing in xlispstat is that for a language like R any good GUI
system requires a proper mechanism for managing concurrency, in other
words: concurrent thread support (this is one thing Java definitely
got right).  Without that you end up either reinventing a significant
fraction of a threading system or with nasty race conditions, or both.
Threading for R is being worked on, but it is going to be a while
until it is ready to go.  It makes sense to experiment with a variety
of GUI designs in the interim and then look at tying things together
when all the pieces are in place.

One area where we can help is by separating the drawing and the event
management in the R graphics devices so that it is possible for R to
use its own drawing code for putting ink on paper but let a toolkit
take over the event management (in the long run I think this may be
more viable cross platform than trying to fight the multiple event
loops battle).  This sort of thing is useful in other contexts as
well, in particular in embedding, and it is being worked on.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep  3 17:31:54 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Sep 2001 18:31:54 +0200
Subject: [Rd] Imitation is the sincerest form of flattery
Message-ID: <x2ofosxmkl.fsf@blueberry.kubism.ku.dk>


This must count as kudos to Kurt and Fritz, as well as others who have
been taking part in the development of the R package format:

http://tcl.activestate.com/cgi-bin/tct/tip/55.html

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Sep  5 10:33:34 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 5 Sep 2001 11:33:34 +0200
Subject: [Rd] spam on R lists --> refuse mail??
Message-ID: <15253.61806.862066.186883@gargle.gargle.HOWL>

 We get caught occasionally, and we all receive spam;
sorry for the last one (on R-help).  Of course, there will never be a 100%
sure prevention... 

Question is what should happen when mail from R-help to an adressee 
is refused with the following message : At least I won't be able to easily send
e-mail to them {and am not willing to use a non-easy way}....

       ----- Transcript of session follows -----
    ... while talking to mail.kku.ac.th.:
    <<< 550 Your site is blocked due to previous spamming incidents

Maybe we (as user community) should try to make sure that our IT people
don't use such extreme anti spam measures....

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wb@vestein.arb-phys.uni-dortmund.de  Wed Sep  5 12:41:53 2001
From: wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke)
Date: 5 Sep 2001 13:41:53 +0200
Subject: [Rd] spam on R lists --> refuse mail??
References: <ifado.list.r.devel/15253.61806.862066.186883@gargle.gargle.HOWL>
Message-ID: <9n5321$1kf5$1@yorikke.arb-phys.uni-dortmund.de>

In article <ifado.list.r.devel/15253.61806.862066.186883@gargle.gargle.HOWL>,
Martin Maechler  <maechler@stat.math.ethz.ch> wrote:
> We get caught occasionally, and we all receive spam;
>sorry for the last one (on R-help).  Of course, there will never be a 100%
>sure prevention... 
>
>Question is what should happen when mail from R-help to an adressee 
>is refused with the following message : At least I won't be able to easily send
>e-mail to them {and am not willing to use a non-easy way}....
>
>       ----- Transcript of session follows -----
>    ... while talking to mail.kku.ac.th.:
>    <<< 550 Your site is blocked due to previous spamming incidents
>
>Maybe we (as user community) should try to make sure that our IT people
>don't use such extreme anti spam measures....

This should be considered as an argument PRO newsgroups. In a group
with high traffic like r-devel the usenet noise level is tolerable, IMHO.
-- 
Dipl.-Math. Wilhelm Bernhard Kloke
Institut fuer Arbeitsphysiologie an der Universitaet Dortmund
Ardeystrasse 67, D-44139 Dortmund, Tel. 0231-1084-257
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep  6 08:59:10 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 6 Sep 2001 08:59:10 +0100 (BST)
Subject: [Rd] RFC: d/p/q/rgamma
Message-ID: <Pine.LNX.4.31.0109060850500.1676-100000@gannet.stats>

dgamma and friends in S are documented as

dgamma(x, shape, rate=1)
pgamma(q, shape, rate=1)
qgamma(p, shape, rate=1)
rgamma(n, shape, rate=1)


whereas R has

dgamma(x, shape, scale=1, log = FALSE)
pgamma(q, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
qgamma(p, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
rgamma(n, shape, scale=1)

Note the use of rate vs scale.  Indeed, as both S and R use `rate' for
exponential this seems somewhat strange, and the only such inconsistency I
can find.

I propose that we add a `rate' argument to d/p/q/rgamma as an alternative
to `scale', which is easily done.   The question is where?

I think we have a trap here for most users, who will happily copy

dgamma(x, 17, 0.3)

from their S-PLUS example sheet, and get the wrong answer. My preference
would be to have

dgamma(x, shape, rate, scale=1, log = FALSE)

etc.  That would break existing R code using positional matching.
Question: is there any?

The only really safe alternative is add `rate' as the last parameter.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Sep  6 09:15:43 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 6 Sep 2001 10:15:43 +0200
Subject: [Rd] RFC: d/p/q/rgamma
In-Reply-To: <Pine.LNX.4.31.0109060850500.1676-100000@gannet.stats>
References: <Pine.LNX.4.31.0109060850500.1676-100000@gannet.stats>
Message-ID: <15255.12463.584218.976655@mithrandir.hornik.net>

>>>>> Prof Brian Ripley writes:

> dgamma and friends in S are documented as
> dgamma(x, shape, rate=1)
> pgamma(q, shape, rate=1)
> qgamma(p, shape, rate=1)
> rgamma(n, shape, rate=1)


> whereas R has

> dgamma(x, shape, scale=1, log = FALSE)
> pgamma(q, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
> qgamma(p, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
> rgamma(n, shape, scale=1)

> Note the use of rate vs scale.  Indeed, as both S and R use `rate' for
> exponential this seems somewhat strange, and the only such
> inconsistency I can find.

> I propose that we add a `rate' argument to d/p/q/rgamma as an
> alternative to `scale', which is easily done.  The question is where?

> I think we have a trap here for most users, who will happily copy

> dgamma(x, 17, 0.3)

> from their S-PLUS example sheet, and get the wrong answer. My preference
> would be to have

> dgamma(x, shape, rate, scale=1, log = FALSE)

> etc.  That would break existing R code using positional matching.
> Question: is there any?

One could find out by unpackaging all CRAN packages and grepping for
usages of *gamma in the code.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Sep  6 09:49:02 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 6 Sep 2001 10:49:02 +0200
Subject: [Rd] Re: [R] Bug in ftable?? (Was: Two-way tables of data, etc)
In-Reply-To: <x2g0a2kmo4.fsf@blueberry.kubism.ku.dk>
References: <D5A7D734C9C5D211B9E30008C78923020E95AFBB@exdkba03.novo.dk>
 <x2g0a2kmo4.fsf@blueberry.kubism.ku.dk>
Message-ID: <15255.14462.313764.384032@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> "BXC (Bendix Carstensen)" <bxc@novonordisk.com> writes:
> [tp<- tapply( breaks, list( wool, tension, variant ), mean )]

>> tp <- as.table( tp )
>> ftable( tp )
>> 
>> But here i get:
>> 
>> > attr( tp, "class" ) <- "table"
>> > ftable( tp )
>> Error in cbind(...) : number of rows of matrices must match (see arg 2)

> Um, I don't think so.... ;-)

>> # But still they seem to have similar attributes (except for the naming)
>> attributes( tb )
>> attributes( tp )
>> 
>> Is this a bug or a facility of ftable ?

> It's a bug *somewhere*, not necessarily in ftable. The problem is
> either that the dimname-names are not added by tapply, that neither
> as.table or ftable add dummy names, or that write.ftable gags when
> names are absent. (Or put differently: Are either the "table" or
> "ftable" objects *required* to have named attributes??). 

> Actually, the fact that tapply doesn't generated named dimnames cannot
> be considered the cause since 
> (a) as.table should work on any matrix.
> (b) the second argument to tapply is not a named list in your case

> One  workaround is to add in the names:

>   ft <- ftable(tp)
>   names(attr(ft,"row.vars")) <- c("wool","tension")
>   names(attr(ft,"col.vars")) <- "variant"
>   ft

> another is to make sure that tapply gets the names right:

>> tp <- tapply(breaks, list(wool=wool,tension=tension,variant=variant), mean)
>> ftable(tp)
>              variant    1    2    3    4    5
> wool tension                                 
> A    L               39.0 40.5 40.0 46.0 70.0
>      M               28.0 29.5 26.5 12.0 18.0
>      H               19.5 22.0 10.0 39.5 24.5
> B    L               31.5 29.0 29.0 27.5 24.5
>      M               39.0 35.0 23.5 29.0 22.5
>      H               17.5 18.0 20.0 22.5 13.0

> or - lazy variation - abuse the fact that dataframes are lists and do
> have labeled columns:

>> tp <- tapply( breaks, data.frame(wool,tension,variant), mean )
>> ftable(tp)
>              variant    1    2    3    4    5
> wool tension                                 
> A    L               39.0 40.5 40.0 46.0 70.0
>      M               28.0 29.5 26.5 12.0 18.0
>      H               19.5 22.0 10.0 39.5 24.5
> B    L               31.5 29.0 29.0 27.5 24.5
>      M               39.0 35.0 23.5 29.0 22.5
>      H               17.5 18.0 20.0 22.5 13.0

I think we need to improve as.table.

table() is trying hard to produce variable names, and ftable() [and also
xtabs(), of course] assumes that we have them.

I would suggest enhancing as.table.default to provide dimname names in
addition to adding the "table" class attribute.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep  6 10:21:58 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 6 Sep 2001 10:21:58 +0100 (BST)
Subject: [Rd] RFC: d/p/q/rgamma
In-Reply-To: <15255.12463.584218.976655@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.31.0109061013290.4287-100000@toucan.stats>

On Thu, 6 Sep 2001, Kurt Hornik wrote:

> >>>>> Prof Brian Ripley writes:
>
> > dgamma and friends in S are documented as
> > dgamma(x, shape, rate=1)
> > pgamma(q, shape, rate=1)
> > qgamma(p, shape, rate=1)
> > rgamma(n, shape, rate=1)
>
>
> > whereas R has
>
> > dgamma(x, shape, scale=1, log = FALSE)
> > pgamma(q, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
> > qgamma(p, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
> > rgamma(n, shape, scale=1)
>
> > Note the use of rate vs scale.  Indeed, as both S and R use `rate' for
> > exponential this seems somewhat strange, and the only such
> > inconsistency I can find.
>
> > I propose that we add a `rate' argument to d/p/q/rgamma as an
> > alternative to `scale', which is easily done.  The question is where?
>
> > I think we have a trap here for most users, who will happily copy
>
> > dgamma(x, 17, 0.3)
>
> > from their S-PLUS example sheet, and get the wrong answer. My preference
> > would be to have
>
> > dgamma(x, shape, rate, scale=1, log = FALSE)
>
> > etc.  That would break existing R code using positional matching.
> > Question: is there any?
>
> One could find out by unpackaging all CRAN packages and grepping for
> usages of *gamma in the code.

Only in public code, not for example in people's lecture notes.

There's only one use in the packages we have installed (almost all), of
rgamma(n, r) in sm.  Had that used a third arg, I am sure I would never
have spotted it when porting.

BTW, I think the cleanest approach is

dgamma(x, shape, rate = 1, scale = 1/rate, log = FALSE)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep  6 11:21:29 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 6 Sep 2001 12:21:29 +0200
Subject: [Rd] Re: "table" class requirements (was .. Bug in ftable....)
In-Reply-To: <15255.14462.313764.384032@mithrandir.hornik.net>
References: <D5A7D734C9C5D211B9E30008C78923020E95AFBB@exdkba03.novo.dk>
 <x2g0a2kmo4.fsf@blueberry.kubism.ku.dk>
 <15255.14462.313764.384032@mithrandir.hornik.net>
Message-ID: <15255.20009.696505.653542@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Peter Dalgaard BSA writes:
    >> "BXC (Bendix Carstensen)" <bxc@novonordisk.com> writes:
    >> [tp<- tapply( breaks, list( wool, tension, variant ), mean )]

    >>> tp <- as.table( tp )
    >>> ftable( tp )
    >>> 
    >>> But here i get:
    >>> 
    >>> > attr( tp, "class" ) <- "table"
    >>> > ftable( tp )
    >>> Error in cbind(...) : number of rows of matrices must match (see arg 2)

    >> Um, I don't think so.... ;-)

    >>> # But still they seem to have similar attributes (except for the naming)
    >>> attributes( tb )
    >>> attributes( tp )
    >>> 
    >>> Is this a bug or a facility of ftable ?

    >> It's a bug *somewhere*, not necessarily in ftable. The problem is
    >> either that the dimname-names are not added by tapply, that neither
    >> as.table or ftable add dummy names, or that write.ftable gags when
    >> names are absent. (Or put differently: Are either the "table" or
    >> "ftable" objects *required* to have named attributes??). 

    >> Actually, the fact that tapply doesn't generated named dimnames cannot
    >> be considered the cause since 
    >> (a) as.table should work on any matrix.
    >> (b) the second argument to tapply is not a named list in your case

    >> One  workaround is to add in the names:

    >> ft <- ftable(tp)
    >> names(attr(ft,"row.vars")) <- c("wool","tension")
    >> names(attr(ft,"col.vars")) <- "variant"
    >> ft

    >> another is to make sure that tapply gets the names right:

    >>> tp <- tapply(breaks, list(wool=wool,tension=tension,variant=variant), mean)
    >>> ftable(tp)
    >> variant    1    2    3    4    5
    >> wool tension                                 
    >> A    L               39.0 40.5 40.0 46.0 70.0
    >> M               28.0 29.5 26.5 12.0 18.0
    >> H               19.5 22.0 10.0 39.5 24.5
    >> B    L               31.5 29.0 29.0 27.5 24.5
    >> M               39.0 35.0 23.5 29.0 22.5
    >> H               17.5 18.0 20.0 22.5 13.0

    >> or - lazy variation - abuse the fact that dataframes are lists and do
    >> have labeled columns:

    >>> tp <- tapply( breaks, data.frame(wool,tension,variant), mean )
    >>> ftable(tp)
    >> variant    1    2    3    4    5
    >> wool tension                                 
    >> A    L               39.0 40.5 40.0 46.0 70.0
    >> M               28.0 29.5 26.5 12.0 18.0
    >> H               19.5 22.0 10.0 39.5 24.5
    >> B    L               31.5 29.0 29.0 27.5 24.5
    >> M               39.0 35.0 23.5 29.0 22.5
    >> H               17.5 18.0 20.0 22.5 13.0

    KH> I think we need to improve as.table.

    KH> table() is trying hard to produce variable names, and ftable() [and also
    KH> xtabs(), of course] assumes that we have them.

    KH> I would suggest enhancing as.table.default to provide dimname names in
    KH> addition to adding the "table" class attribute.

I agree with that proposition,
but I disagree with assuming that a "table" class object must have named
dimnames. As long as the other implementations of the S language don't have
these, we will create an unnecessary crevice of incompatibility.
A table could also come along by source()ing an S+-dumped object..
Hence I think ftable(), xtabs() and all *.table() methods *should* work
when the dimnames are not named.

Btw, this is a bit linked to Terry Therneaus strong statements on S-news
yesterday (Subject: Re: [S] dimnames in Sparc Splus 6.0)
about S4 vs S3 classes.  I *do* like in many cases to have `polymorphous'
classes which are allowed/but not required to have certain attributes.
Hence I am waiting for replies explaining how this is easily done within the
S4 class system {{hereby admitting that I've not read the green book
carefully enough recently}}.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Sep  6 11:52:57 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 6 Sep 2001 12:52:57 +0200
Subject: [Rd] Re: "table" class requirements (was .. Bug in ftable....)
In-Reply-To: <15255.20009.696505.653542@gargle.gargle.HOWL>
References: <D5A7D734C9C5D211B9E30008C78923020E95AFBB@exdkba03.novo.dk>
 <x2g0a2kmo4.fsf@blueberry.kubism.ku.dk>
 <15255.14462.313764.384032@mithrandir.hornik.net>
 <15255.20009.696505.653542@gargle.gargle.HOWL>
Message-ID: <15255.21897.571350.501446@mithrandir.hornik.net>

>>>>> Martin Maechler writes:

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>>>>> Peter Dalgaard BSA writes:
>>> "BXC (Bendix Carstensen)" <bxc@novonordisk.com> writes:
>>> [tp<- tapply( breaks, list( wool, tension, variant ), mean )]

>>>> tp <- as.table( tp )
>>>> ftable( tp )
>>>> 
>>>> But here i get:
>>>> 
>>>> > attr( tp, "class" ) <- "table"
>>>> > ftable( tp )
>>>> Error in cbind(...) : number of rows of matrices must match (see arg 2)

>>> Um, I don't think so.... ;-)

>>>> # But still they seem to have similar attributes (except for the naming)
>>>> attributes( tb )
>>>> attributes( tp )
>>>> 
>>>> Is this a bug or a facility of ftable ?

>>> It's a bug *somewhere*, not necessarily in ftable. The problem is
>>> either that the dimname-names are not added by tapply, that neither
>>> as.table or ftable add dummy names, or that write.ftable gags when
>>> names are absent. (Or put differently: Are either the "table" or
>>> "ftable" objects *required* to have named attributes??). 

>>> Actually, the fact that tapply doesn't generated named dimnames cannot
>>> be considered the cause since 
>>> (a) as.table should work on any matrix.
>>> (b) the second argument to tapply is not a named list in your case

>>> One  workaround is to add in the names:

>>> ft <- ftable(tp)
>>> names(attr(ft,"row.vars")) <- c("wool","tension")
>>> names(attr(ft,"col.vars")) <- "variant"
>>> ft

>>> another is to make sure that tapply gets the names right:

>>>> tp <- tapply(breaks, list(wool=wool,tension=tension,variant=variant), mean)
>>>> ftable(tp)
>>> variant    1    2    3    4    5
>>> wool tension                                 
>>> A    L               39.0 40.5 40.0 46.0 70.0
>>> M               28.0 29.5 26.5 12.0 18.0
>>> H               19.5 22.0 10.0 39.5 24.5
>>> B    L               31.5 29.0 29.0 27.5 24.5
>>> M               39.0 35.0 23.5 29.0 22.5
>>> H               17.5 18.0 20.0 22.5 13.0

>>> or - lazy variation - abuse the fact that dataframes are lists and do
>>> have labeled columns:

>>>> tp <- tapply( breaks, data.frame(wool,tension,variant), mean )
>>>> ftable(tp)
>>> variant    1    2    3    4    5
>>> wool tension                                 
>>> A    L               39.0 40.5 40.0 46.0 70.0
>>> M               28.0 29.5 26.5 12.0 18.0
>>> H               19.5 22.0 10.0 39.5 24.5
>>> B    L               31.5 29.0 29.0 27.5 24.5
>>> M               39.0 35.0 23.5 29.0 22.5
>>> H               17.5 18.0 20.0 22.5 13.0

KH> I think we need to improve as.table.

KH> table() is trying hard to produce variable names, and ftable() [and also
KH> xtabs(), of course] assumes that we have them.

KH> I would suggest enhancing as.table.default to provide dimname names in
KH> addition to adding the "table" class attribute.

> I agree with that proposition, but I disagree with assuming that a
> "table" class object must have named dimnames. As long as the other
> implementations of the S language don't have these, we will create an
> unnecessary crevice of incompatibility.  A table could also come along
> by source()ing an S+-dumped object..  Hence I think ftable(), xtabs()
> and all *.table() methods *should* work when the dimnames are not
> named.

Martin: I view this differently.  How can you refer to variables in a
model formula when you do not know their names?  [Well I know my ftable
code allows for numbers ... bad design.]

Our implemtation of table is different: we view this as the creator of
class "table" and have methods for it.  I do not see this as a source of
imcompatibility: sourcing S+ dumps will not give an object of class
table.  If coercing it to one using as.table adds variable names if
needed we'd be safe, I think.

> Btw, this is a bit linked to Terry Therneaus strong statements on
> S-news yesterday (Subject: Re: [S] dimnames in Sparc Splus 6.0) about
> S4 vs S3 classes.  I *do* like in many cases to have `polymorphous'
> classes which are allowed/but not required to have certain attributes.
> Hence I am waiting for replies explaining how this is easily done
> within the S4 class system {{hereby admitting that I've not read the
> green book carefully enough recently}}.

Need to look up the statement ... cannot seem to find it in my digest?
In any case, I would think that maybe having certain `attributes' is S3
object model thinking ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Thu Sep  6 14:07:30 2001
From: ligges@amadeus.statistik.uni-dortmund.de (ligges@amadeus.statistik.uni-dortmund.de)
Date: Thu, 6 Sep 2001 15:07:30 +0200 (MET DST)
Subject: [Rd] file.copy() problems on WinNT (PR#1085)
Message-ID: <200109061307.PAA29781@pubhealth.ku.dk>

For some files, file.copy() doesn't copy these files correctly.

Here you will find a file (Bitmap, 769Kb) to reproduce the problem:
 http://www.statistik.uni-dortmund.de/leute/ligges/R/test1.bmp

Using 
 file.copy("c:/test1.bmp", "c:/test2.bmp", overwrite = TRUE)
produces a second file with the size of ~1.4 Mb:
 http://www.statistik.uni-dortmund.de/leute/ligges/R/test2.bmp

To reduce size, I put both files into following zip archive:
 http://www.statistik.uni-dortmund.de/leute/ligges/R/test.zip

Using file.copy() with the same file on Solaris and Linux works fine.

Uwe Ligges


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Sep  6 17:16:28 2001
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 6 Sep 2001 18:16:28 +0200
Subject: [Rd] RFC: package pixmap
In-Reply-To: <Pine.LNX.4.21.0109032209130.25132-201000@reclus.nhh.no>
References: <15043.13319.787590.74960@galadriel.ci.tuwien.ac.at>
 <Pine.LNX.4.21.0109032209130.25132-201000@reclus.nhh.no>
Message-ID: <15255.41308.64191.671020@galadriel.ci.tuwien.ac.at>


There is a new package pixmap in $CRAN/src/contrib/Devel which
provides a first shot at a class hierarchy for bitmapped images (as
both bitmap and image are already taken I named it pixmap ... if
somebody has an idea for a better name, please let me know).

This is by no means meant to be final ... more like a basis for
discussion about classes for that purpose. It already has RGB, indexed
and grey bitmaps and conversion and plotting methods for those.

Thanks to Roger Bivand there are native R functions for
reading/writing PNM images, this replaces the respective functions in
the e1071 package. Hence, the netpbm libraries are no longer needed,
which should make life easier (especially on windows). Once we have
agreed on the basic classes it should be easy to support import/export
of other image formats like jpeg or png.

All feedback & code is welcome!

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Sep  6 17:23:51 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 6 Sep 2001 09:23:51 -0700 (PDT)
Subject: [Rd] RFC: d/p/q/rgamma
In-Reply-To: <Pine.GSO.4.31.0109061013290.4287-100000@toucan.stats>
Message-ID: <Pine.A41.4.33.0109060923250.17872-100000@homer03.u.washington.edu>

On Thu, 6 Sep 2001, Prof Brian Ripley wrote:

> BTW, I think the cleanest approach is
>
> dgamma(x, shape, rate = 1, scale = 1/rate, log = FALSE)
>
Yes, I think this is better

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Fri Sep  7 06:15:02 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Fri, 7 Sep 2001 07:15:02 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200109070515.f875F2t22361@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400
* PR# 1081 *
Subject: problems installing R on Solaris 2.8 machine
From: Paivio Pollari <pollari@sun3.oulu.fi>
Date: Fri, 31 Aug 2001 08:54:23 +0300 (EET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1052 *
Subject:  Inconsistent behaviour of is.vector? 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 14 Aug 2001 09:04:57 +0100
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068

Directory:  Macintosh

none

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
* PR# 1057 *
Subject: crt1.o skipped at configure time ?
From: laurent@cbs.dtu.dk
Date: Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
* PR# 1062 *
Subject: system.file("",package)
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Sun, 19 Aug 2001 16:01:57 -0700 (PDT)
* PR# 1084 *
Subject: Install problems R 1.3.1 on HP-UX
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Sun, 2 Sep 2001 15:07:41 +0200 (CEST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1080 *
Subject: bug in histogram rendering
From: ljlehou@sandia.gov
Date: Thu, 30 Aug 2001 01:40:13 +0200 (MET DST)
* PR# 1083 *
Subject: --quiet flag sets echo option to TRUE
From: "David Kane  <David Kane" <a296180@mica.fmr.com>
Date: Fri, 31 Aug 2001 13:07:19 -0400
* PR# 1085 *
Subject: file.copy() problems on WinNT
From: Uwe Ligges <ligges@amadeus.statistik.uni-dortmund.de>
Date: Thu, 06 Sep 2001 15:07:26 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep  7 08:57:24 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 7 Sep 2001 09:57:24 +0200 (MET DST)
Subject: [Rd] file.copy() problems on WinNT (PR#1085)
Message-ID: <200109070757.JAA05215@pubhealth.ku.dk>

Looks like it is written to expect text files.

Please try making the file opens in R_AppedFile binary, and tell us if
that solves it.

On Thu, 6 Sep 2001 ligges@amadeus.statistik.uni-dortmund.de wrote:

> For some files, file.copy() doesn't copy these files correctly.
>
> Here you will find a file (Bitmap, 769Kb) to reproduce the problem:
>  http://www.statistik.uni-dortmund.de/leute/ligges/R/test1.bmp
>
> Using
>  file.copy("c:/test1.bmp", "c:/test2.bmp", overwrite = TRUE)
> produces a second file with the size of ~1.4 Mb:
>  http://www.statistik.uni-dortmund.de/leute/ligges/R/test2.bmp
>
> To reduce size, I put both files into following zip archive:
>  http://www.statistik.uni-dortmund.de/leute/ligges/R/test.zip
>
> Using file.copy() with the same file on Solaris and Linux works fine.
>
> Uwe Ligges
>
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status =
>  major = 1
>  minor = 3.1
>  year = 2001
>  month = 08
>  day = 31
>  language = R
>
> Windows NT 4.0 (build 1381) Service Pack 6
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Fri Sep  7 12:07:03 2001
From: ligges@amadeus.statistik.uni-dortmund.de (ligges@amadeus.statistik.uni-dortmund.de)
Date: Fri, 7 Sep 2001 13:07:03 +0200 (MET DST)
Subject: [Rd] file.copy() problems on WinNT (PR#1085)
Message-ID: <200109071107.NAA07759@pubhealth.ku.dk>

Prof Brian Ripley wrote:
> 
> Looks like it is written to expect text files.
> 
> Please try making the file opens in R_AppedFile binary, and tell us if
> that solves it.

You are right. Changing "a" to "ab" and "r" to "rb" in the following
lines of R_AppendFile (file: /src/main/platform.c) solves the problem.


    if((fp1 = R_fopen(R_ExpandFileName(file1), "a")) == NULL) {
        return 0;
    }
    if((fp2 = R_fopen(R_ExpandFileName(file2), "r")) == NULL) {


Thank you!

Uwe Ligges


> On Thu, 6 Sep 2001 ligges@amadeus.statistik.uni-dortmund.de wrote:
> 
> > For some files, file.copy() doesn't copy these files correctly.
> >
> > Here you will find a file (Bitmap, 769Kb) to reproduce the problem:
> >  http://www.statistik.uni-dortmund.de/leute/ligges/R/test1.bmp
> >
> > Using
> >  file.copy("c:/test1.bmp", "c:/test2.bmp", overwrite = TRUE)
> > produces a second file with the size of ~1.4 Mb:
> >  http://www.statistik.uni-dortmund.de/leute/ligges/R/test2.bmp
> >
> > To reduce size, I put both files into following zip archive:
> >  http://www.statistik.uni-dortmund.de/leute/ligges/R/test.zip
> >
> > Using file.copy() with the same file on Solaris and Linux works fine.
> >
> > Uwe Ligges
> >
> >
> > --please do not edit the information below--
> >
> > Version:
> >  platform = i386-pc-mingw32
> >  arch = x86
> >  os = Win32
> >  system = x86, Win32
> >  status =
> >  major = 1
> >  minor = 3.1
> >  year = 2001
> >  month = 08
> >  day = 31
> >  language = R
> >
> > Windows NT 4.0 (build 1381) Service Pack 6
> >
> > Search Path:
> >  .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From menstav@hotmail.com  Sat Sep  8 01:01:47 2001
From: menstav@hotmail.com (menstav@hotmail.com)
Date: Sat, 8 Sep 2001 02:01:47 +0200 (MET DST)
Subject: [Rd] t.test (PR#1086)
Message-ID: <200109080001.CAA12968@pubhealth.ku.dk>

Full_Name: Menelaos Stavrinides
Version: 1.3. 1
OS: Windows 98
Submission from: (NULL) (193.129.76.90)


When model simplification is used in glm (binomial errors) and anova is used two
compare two competitive models one can use either an "F" or a "Chi" test.

R always performs an F test (Although when test="Chi" the test is labeled as
Chi, there isn't any difference between F and Chi test)

Let us assume model1 and model2, where model2 a simplified version of model1

model1_glm(y~factor1*factor2,binomial)
model2_update(model1,~.-factor2)
anova(model1,model2,test="F")# will give the same result as 
anova(model1,model2,test="Chi") 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From menstav@hotmail.com  Sat Sep  8 01:03:32 2001
From: menstav@hotmail.com (menstav@hotmail.com)
Date: Sat, 8 Sep 2001 02:03:32 +0200 (MET DST)
Subject: [Rd] anova in model simplification in glm (PR#1087)
Message-ID: <200109080003.CAA12990@pubhealth.ku.dk>

Full_Name: Menelaos Stavrinides
Version: 1.3. 1
OS: Windows 98
Submission from: (NULL) (193.129.76.90)


When model simplification is used in glm (binomial errors) and anova is used two
compare two competitive models one can use either an "F" or a "Chi" test.

R always performs an F test (Although when test="Chi" the test is labeled as
Chi, there isn't any difference between F and Chi test)

Let us assume model1 and model2, where model2 a simplified version of model1

model1_glm(y~factor1*factor2,binomial)
model2_update(model1,~.-factor2)
anova(model1,model2,test="F")# will give the same result as 
anova(model1,model2,test="Chi") 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep  8 07:32:28 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 8 Sep 2001 07:32:28 +0100 (BST)
Subject: [Rd] t.test (PR#1086)
In-Reply-To: <200109080001.CAA12968@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0109080723570.6057-100000@auk.stats>

On Sat, 8 Sep 2001 menstav@hotmail.com wrote:

> Full_Name: Menelaos Stavrinides
> Version: 1.3. 1
> OS: Windows 98
> Submission from: (NULL) (193.129.76.90)
>
>
> When model simplification is used in glm (binomial errors) and anova is used two
> compare two competitive models one can use either an "F" or a "Chi" test.
>
> R always performs an F test (Although when test="Chi" the test is labeled as
> Chi, there isn't any difference between F and Chi test)
>
> Let us assume model1 and model2, where model2 a simplified version of model1
>
> model1_glm(y~factor1*factor2,binomial)
> model2_update(model1,~.-factor2)
> anova(model1,model2,test="F")# will give the same result as
> anova(model1,model2,test="Chi")

See help(family) and help(anova.glm).  For a binomial family the scale
estimate in the F test is fixed at one, so they should be the same.
If you want extimates scale, use a quasibinomial family.

This applies to PR#1087 too.

Please do read the section of BUGS in the FAQ.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep  8 07:28:21 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 8 Sep 2001 08:28:21 +0200
Subject: [Rd] Re: [R] Why does substr<- truncate and not replace...
In-Reply-To: <x24rqeu0et.fsf@blueberry.kubism.ku.dk>
References: <px66au3h1v.fsf@infiniti.ece.cmu.edu>
 <x24rqeu0et.fsf@blueberry.kubism.ku.dk>
Message-ID: <15257.47749.215502.258140@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Thomas Vogels <tov@ece.cmu.edu> writes:
>> ... when the replacement string is shorter than the portion of the
>> string to be replaced?
>> 
>> The documentation to substr (in R 1.3.1) gives me:
>> 
>> If the portion to be replaced is longer than the replacement
>> string, then only the portion the length of the string is
>> replaced.
>> 
>> And so I try:
>> 
R> x <- "abcdef"
R> substr(x,2,3) <- "xy" #ok
R> x
>> [1] "axydef"
R> substr(x,2,3) <- "w" #ko
R> x
>> [1] "aw"
>> 
>> hmm, I would have expected "awdef".  Am I reading the docs wrong?  (Or
>> am I just blinded to expect this string because that's what Perl would do?)
>> 
>> Thanks!
>> -tom

> Looks like a bit of a bug. I bet the \0 terminator gets copied in from
> the replacement.

There are yet more interesting effects when using longer portions:

R> x <- "abcdef"
R> x
[1] "abcdef"
R> substr(x, 2, 4) <- "x"
R> x
[1] "ax"

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep  8 10:43:50 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 8 Sep 2001 10:43:50 +0100 (BST)
Subject: [Rd] Re: [R] Why does substr<- truncate and not replace...
In-Reply-To: <15257.47749.215502.258140@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0109081041490.7260-100000@gannet.stats>

This is already fixed in R-devel:

> x
[1] "axcdef"

If start - stop is 1, the substring is of length 2 ...

On Sat, 8 Sep 2001, Kurt Hornik wrote:

> >>>>> Peter Dalgaard BSA writes:
>
> > Thomas Vogels <tov@ece.cmu.edu> writes:
> >> ... when the replacement string is shorter than the portion of the
> >> string to be replaced?
> >>
> >> The documentation to substr (in R 1.3.1) gives me:
> >>
> >> If the portion to be replaced is longer than the replacement
> >> string, then only the portion the length of the string is
> >> replaced.
> >>
> >> And so I try:
> >>
> R> x <- "abcdef"
> R> substr(x,2,3) <- "xy" #ok
> R> x
> >> [1] "axydef"
> R> substr(x,2,3) <- "w" #ko
> R> x
> >> [1] "aw"
> >>
> >> hmm, I would have expected "awdef".  Am I reading the docs wrong?  (Or
> >> am I just blinded to expect this string because that's what Perl would do?)
> >>
> >> Thanks!
> >> -tom
>
> > Looks like a bit of a bug. I bet the \0 terminator gets copied in from
> > the replacement.
>
> There are yet more interesting effects when using longer portions:
>
> R> x <- "abcdef"
> R> x
> [1] "abcdef"
> R> substr(x, 2, 4) <- "x"
> R> x
> [1] "ax"
>
> -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pwhiting@whitings.org  Sat Sep  8 16:19:17 2001
From: pwhiting@whitings.org (pwhiting@whitings.org)
Date: Sat, 8 Sep 2001 17:19:17 +0200 (MET DST)
Subject: [Rd] barplot forces xpd=TRUE (PR#1088)
Message-ID: <200109081519.RAA14437@pubhealth.ku.dk>


<<insert bug report here>>

barplot hardcodes xpd as "TRUE" causing the bars to go outside of the
plot region.  True can be the default, but it shouldn't be the only
option.

*** barplot.R   Sat Sep  8 10:15:16 2001
--- barplot.R.orig      Sat Sep  8 10:03:39 2001
***************
*** 5,11 ****
           legend.text = NULL, beside = FALSE, horiz = FALSE,
           col = heat.colors(NR), border = par("fg"),
           main = NULL, sub = NULL, xlab = NULL, ylab = NULL,
!          xlim = NULL, ylim = NULL, xpd = TRUE,
           axes = TRUE, axisnames = TRUE, inside = TRUE, plot = TRUE, ...)
  {
      if (!missing(inside)) .NotYetUsed("inside", error = FALSE)
--- 5,11 ----
           legend.text = NULL, beside = FALSE, horiz = FALSE,
           col = heat.colors(NR), border = par("fg"),
           main = NULL, sub = NULL, xlab = NULL, ylab = NULL,
!          xlim = NULL, ylim = NULL,
           axes = TRUE, axisnames = TRUE, inside = TRUE, plot = TRUE, ...)
  {
      if (!missing(inside)) .NotYetUsed("inside", error = FALSE)
***************
*** 61,68 ****
        w.m <- matrix(w.m, nc = NC)
      if(plot) { ##-------- Plotting :
        opar <-
!           if (horiz)  par(xaxs = "i", xpd=xpd)
!           else        par(yaxs = "i", xpd=xpd)
        on.exit(par(opar))

        plot.new()
--- 61,68 ----
        w.m <- matrix(w.m, nc = NC)
      if(plot) { ##-------- Plotting :
        opar <-
!           if (horiz)  par(xaxs = "i", xpd = TRUE)
!           else        par(yaxs = "i", xpd = TRUE)
        on.exit(par(opar))

        plot.new()



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From michael_odonnell@acm.org  Sat Sep  8 19:25:33 2001
From: michael_odonnell@acm.org (michael_odonnell@acm.org)
Date: Sat, 8 Sep 2001 20:25:33 +0200 (MET DST)
Subject: [Rd] Debian Woody r-base depends on blas2 (PR#1089)
Message-ID: <200109081825.UAA14788@pubhealth.ku.dk>

Full_Name: Michael J. O'Donnell
Version: 1.3.1-1
OS: Linux, Debian Woody distribution
Submission from: (NULL) (64.34.17.133)


I tried to install the R packages for the Debian GNU/Linux Woody distribution.
I added "deb http://cran.r-project.org/bin/linux/debian woody main" to
my /etc/apt/sources.list, and ran dselect with the apt-get method.
I selected all of the R packages that I could find. The installation
appeared to fail, because r-base and r-recommended both depend on blas2.
I cannot find a Debian package for blas2 in the Debian archives, nor in
the CRAN archives. blas1 is in the Debian archives for both Potato and Woody.
I also checked the package list for your Debian Potato distribution, and
I found no dependence on blas2 nor on blas1 there.

Mike O'Donnell


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Sat Sep  8 20:17:18 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Sat, 8 Sep 2001 14:17:18 -0500
Subject: [Rd] Debian Woody r-base depends on blas2 (PR#1089)
In-Reply-To: <200109081825.UAA14788@pubhealth.ku.dk>
References: <200109081825.UAA14788@pubhealth.ku.dk>
Message-ID: <15258.28350.979023.146720@sonny.eddelbuettel.com>


Michael,

  "Michael" == michael odonnell <michael_odonnell@acm.org> writes:
  Michael>  Full_Name: Michael J. O'Donnell Version: 1.3.1-1 OS: Linux,
  Michael> Debian Woody distribution Submission from: (NULL) (64.34.17.133)
  Michael> 
  Michael> 
  Michael> I tried to install the R packages for the Debian GNU/Linux Woody
  Michael> distribution.  I added "deb
  Michael> http://cran.r-project.org/bin/linux/debian woody main" to my
  Michael> /etc/apt/sources.list, and ran dselect with the apt-get method.  I
  Michael> selected all of the R packages that I could find. The installation
  Michael> appeared to fail, because r-base and r-recommended both depend on
  Michael> blas2.  I cannot find a Debian package for blas2 in the Debian
  Michael> archives, nor in the CRAN archives. blas1 is in the Debian
  Michael> archives for both Potato and Woody.  I also checked the package
  Michael> list for your Debian Potato distribution, and I found no
  Michael> dependence on blas2 nor on blas1 there.

Blas2 is a so-called "virtual package" which is provided by the actual blas1
package, as well as by any of the four atlas2 packages (atlas2-base,
atlas2-p3, atlas2-p4, atlas2-athlon). I highly recommended the atlas2
packages (esp if one matches your processor) as the speed gain can be
tremendous for linear algebra operations

Also, I'd recommend using apt-get instead of dselect; a simple

    $ apt-get update; apt-get install r-base

should have resolved that dependency for you.

Note that you can pick a closer mirror; I use cran.us.r-project.org.

Hope that helps,  Dirk


-- 
Our DSL access will be shut off September 10 due to the bankruptcy of Rhythms,
and the inability of Ameritech to respond in a timely fashion.  An optimistic
view is that we might be back online by the end of September.  --  Dirk
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Sun Sep  9 21:52:54 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Sun, 9 Sep 2001 22:52:54 +0200 (MET DST)
Subject: [Rd] [R] bad R.css link in "packages.html" (PR#1090)
Message-ID: <200109092052.WAA18066@pubhealth.ku.dk>

I downloaded and installed R-1.3.1 yesterday, and had to change line
2 of the "packages.html" file in $RHOME/doc/html/

The configuration steps were "the usual",

tar zxvf ...
cd ...
./configure
make
make check
make install

If it's relevant,

Sys.info() 
        sysname                         release 
	"Linux"                          "2.2.14" 
	version                         nodename 
	"#2 Sat Nov 25 15:30:42 CET 2000"  "camille.indigoindustrial.co.nz" 
	machine                         login 
	"i586"                         "unknown" 
	user 
	"jasont" 


Changed line 2 from:
<link rel="stylesheet" type="text/css" href="../../R.css">

to:
<link rel="stylesheet" type="text/css" href="./R.css">

Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Sep  9 22:33:41 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Sep 2001 23:33:41 +0200
Subject: [Rd] [R] bad R.css link in "packages.html" (PR#1090)
In-Reply-To: <200109092052.WAA18066@pubhealth.ku.dk>
References: <200109092052.WAA18066@pubhealth.ku.dk>
Message-ID: <x2heucjbgq.fsf@blueberry.kubism.ku.dk>

jasont@indigoindustrial.co.nz writes:

> I downloaded and installed R-1.3.1 yesterday, and had to change line
> 2 of the "packages.html" file in $RHOME/doc/html/

....

> Changed line 2 from:
> <link rel="stylesheet" type="text/css" href="../../R.css">
> 
> to:
> <link rel="stylesheet" type="text/css" href="./R.css">

Hmm. Yes, this looks wrong, but what are the ill effects? When you
use help.start(), doesn't the correct setting get put into
.R/doc/html/packages.html ?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Sep 11 18:05:21 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 11 Sep 2001 13:05:21 -0400
Subject: [Rd] ... in generic/specific methods
Message-ID: <3B9E4451.67A9B893@bank-banque-canada.ca>

The prescription that "..." as an argument in a generic means that "..." should be an
argument in the specific methods (as is being suggested by checkMethods() in devel)
implies that errors will not automatically be generated when a specific method gets
arguments it does not use.  I do not view the change as an improvement since  I think
of these errors as a valuable mechanism for catching mistakes, so I would like to
understand the rationale. The change does not break things that work, it just means
that certain kinds of errors which were once caught automatically are no longer
caught automatically.

Now it is completely possible that this represents a fairly major misunderstanding of
inheritance on my part. But I believe my understanding is consistent with the
explanation of this in Chambers and Hastie (quoted below) which is the only place in
my somewhat dated collection of S reference books where I have found the issue
discussed at the necessary level of detail. My understanding is also consistent with
examples in MASS (at least the 1994 version) and elsewhere, whereas the prescription
of checkMethods() is not.  All of this is to say that there will be a number of long
time users who will be confused.

To the extent that I do understand the rationale of the checkMethods() prescription,
I believe the problem is that things are easier if UseMethod and NextMethod can pass
along arguments without needing to keep track of things. If specific methods use only
subsets of arguments the dispatch mechanism becomes more complicated or impossible.
Now, if it truly is impossible then the argument is fairly clear. But if it is only
more complicated then there is a trade-off between simplified dispatch and better
error checking (plus an enormous base of code which has assumed the prior mechanism).

Paul Gilbert
___
from J.M. Chambers and T.J. Hastie, "Statistical Models in S", 1992, Appendix A,
p466:

"When UseMethod() has found a method, it re-matches the actual call to the generic
with the definition of the method. Similarly, NextMethod() matches arguments with the
same order and names as the call to the generic. Methods do not need to have the same
arguments as the generic. In most examples, the method should allow optional, named
arguments to be passed down, if it plans to call NextMethod(). This means that most
such methods should have "..." as an argument. In the case of "[.factor"(), however,
we took the opposite approach. We decided that only one subscript argument made sense
for factors, although other objects might meaningfully have more arguments. The
definition here then produces a clean error message if an extra argument is included:

...
This is a tradeoff between allowing more general use of the method and providing
informative error messages; the relative importance of each should be examined
case-by-case."

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Sep 12 17:30:19 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 12 Sep 2001 12:30:19 -0400 (EDT)
Subject: [Rd] feature request: comment character in read.table?
Message-ID: <Pine.LNX.4.30.0109121221400.1270-100000@bolker.zoo.ufl.edu>


  How difficult would it be (I could try myself if someone thought it
would be straightforward) to change read.table to allow a comment
character such as # or %?  My thought would be that anything on a line
following a comment character would be ignored (so that the combination of
blank.lines.skip=TRUE and a comment at the beginning of the line would
lead to a line being skipped completely).
 I'm always encouraging my students to comment their data sets, and it
feels lame to tell them they have to count the number of initial lines in
the data set in order to set the "skip" parameter appropriately.  (The
comment character would also allow comments about a particular data
point.)

  I know I could hack this (a) with sed in Unix [but my students using
Windows are likely to have trouble] (b) within R, by processing the file
and creating a temporary file with comments deleted.  (b) is probably what
I'll do as a temporary fix, but this seems to be a reasonable piece of
functionality for R to have ...

  thoughts?

  Ben Bolker


-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Sep 12 18:18:10 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 12 Sep 2001 18:18:10 +0100 (BST)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.LNX.4.30.0109121221400.1270-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.GSO.4.31.0109121814450.6636-100000@auk.stats>

On Wed, 12 Sep 2001, Ben Bolker wrote:

>
>   How difficult would it be (I could try myself if someone thought it
> would be straightforward) to change read.table to allow a comment
> character such as # or %?  My thought would be that anything on a line

It's hard in read.table, especially given the changes in R-devle to mke it
more flexible.  The place to do this seems to me to be the internals of
scan.  They are far from transparent, though.

> following a comment character would be ignored (so that the combination of
> blank.lines.skip=TRUE and a comment at the beginning of the line would
> lead to a line being skipped completely).
>  I'm always encouraging my students to comment their data sets, and it
> feels lame to tell them they have to count the number of initial lines in
> the data set in order to set the "skip" parameter appropriately.  (The
> comment character would also allow comments about a particular data
> point.)
>
>   I know I could hack this (a) with sed in Unix [but my students using
> Windows are likely to have trouble] (b) within R, by processing the file
> and creating a temporary file with comments deleted.  (b) is probably what
> I'll do as a temporary fix, but this seems to be a reasonable piece of
> functionality for R to have ...

(b) seems easy to me. Use either a file() connection or an output text
connection.  (I don't know if file(), that's no arg, works on Mac for
example, though.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Thu Sep 13 09:43:08 2001
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Thu, 13 Sep 2001 10:43:08 +0200 (MET DST)
Subject: [Rd] sum overflow (PR#1091)
Message-ID: <200109130843.KAA28348@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 1.2.3
OS: linux
Submission from: (NULL) (193.62.250.209)


I think I have found an accuracy problem with sum()

> a<-1:1000
> b<-1:1000
>
> crossprod(a,a)*crossprod(b,b)
             [,1]
[1,] 1.114448e+17
> drop(.Last.value)
[1] 1.114448e+17
>
#this should give same answer as above
> sum(a*a)*sum(b*b)
[1] -652010736
#seems to be due to sum using integer representation which overflows instead of
using
#double representation

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 13 09:53:56 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Sep 2001 09:53:56 +0100 (BST)
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <200109130843.KAA28348@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0109130948310.14470-100000@gannet.stats>

It's not a problem with sum:

> sum(a*a)
[1] 333833500
> sum(b*b)
[1] 333833500

are accurate.

The overflow is in the integer arithmetic for *.  That's a question for
your C run-time system.  On a 64-bit machine you might get different
results (although most use 32-bit ints, including mine).

If you use integers you need to be aware of the consequences.  It's a
feature not a bug.


On Thu, 13 Sep 2001 wsi@gcal.ac.uk wrote:

> Full_Name: Bill Simpson
> Version: 1.2.3
> OS: linux
> Submission from: (NULL) (193.62.250.209)
>
>
> I think I have found an accuracy problem with sum()
>
> > a<-1:1000
> > b<-1:1000
> >
> > crossprod(a,a)*crossprod(b,b)
>              [,1]
> [1,] 1.114448e+17
> > drop(.Last.value)
> [1] 1.114448e+17
> >
> #this should give same answer as above
> > sum(a*a)*sum(b*b)
> [1] -652010736
> #seems to be due to sum using integer representation which overflows instead of
> using
> #double representation
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Thu Sep 13 11:59:30 2001
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Thu, 13 Sep 2001 11:59:30 +0100 (BST)
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.31.0109130948310.14470-100000@gannet.stats>
Message-ID: <Pine.LNX.4.10.10109131153420.5118-100000@localhost.localdomain>

> It's not a problem with sum:
> 
> > sum(a*a)
> [1] 333833500
> > sum(b*b)
> [1] 333833500
> 
> are accurate.
> 
> The overflow is in the integer arithmetic for *.  That's a question for
> your C run-time system.  On a 64-bit machine you might get different
> results (although most use 32-bit ints, including mine).
> 
> If you use integers you need to be aware of the consequences.  It's a
> feature not a bug.
I thought R used an internal rep that was double in all cases.
Now I'm confused:
> a<-(1:1000)    
> b<-(1:1000)
> sum(a*a)*sum(b*b)
[1] -652010736
> a<-(1:1000)/1.0
> b<-(1:1000)/1.0
> sum(a*a)*sum(b*b)
[1] 1.114448e+17

So  R somehow decides whether to use an integer or a double
representation? Please tell me the rule used by R so I will know in the
future.

Thanks!

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Sep 13 13:16:36 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 13 Sep 2001 14:16:36 +0200
Subject: [Rd] sum overflow (PR#1091)
References: <Pine.LNX.4.10.10109131153420.5118-100000@localhost.localdomain>
Message-ID: <3BA0A3A4.810379F0@statistik.uni-dortmund.de>

Bill Simpson wrote:
> 
> > It's not a problem with sum:
> >
> > > sum(a*a)
> > [1] 333833500
> > > sum(b*b)
> > [1] 333833500
> >
> > are accurate.
> >
> > The overflow is in the integer arithmetic for *.  That's a question for
> > your C run-time system.  On a 64-bit machine you might get different
> > results (although most use 32-bit ints, including mine).
> >
> > If you use integers you need to be aware of the consequences.  It's a
> > feature not a bug.
> I thought R used an internal rep that was double in all cases.
> Now I'm confused:
> > a<-(1:1000)
> > b<-(1:1000)
> > sum(a*a)*sum(b*b)
> [1] -652010736
> > a<-(1:1000)/1.0
> > b<-(1:1000)/1.0
> > sum(a*a)*sum(b*b)
> [1] 1.114448e+17
> 
> So  R somehow decides whether to use an integer or a double
> representation? Please tell me the rule used by R so I will know in the
> future.


It depends on the function you are using.

In your case you could use:
  as.double(sum(a*a)) * as.double(sum(b*b))

or just check if the result is double:
  is.double(sum(a*a))

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 13 14:51:25 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Sep 2001 14:51:25 +0100 (BST)
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.10.10109131153420.5118-100000@localhost.localdomain>
Message-ID: <Pine.LNX.4.31.0109131443170.14713-100000@gannet.stats>

On Thu, 13 Sep 2001, Bill Simpson wrote:

> > It's not a problem with sum:
> >
> > > sum(a*a)
> > [1] 333833500
> > > sum(b*b)
> > [1] 333833500
> >
> > are accurate.
> >
> > The overflow is in the integer arithmetic for *.  That's a question for
> > your C run-time system.  On a 64-bit machine you might get different
> > results (although most use 32-bit ints, including mine).
> >
> > If you use integers you need to be aware of the consequences.  It's a
> > feature not a bug.
> I thought R used an internal rep that was double in all cases.

Assumed, I guess, as I've never seen that in the manuals.

> Now I'm confused:
> > a<-(1:1000)
> > b<-(1:1000)
> > sum(a*a)*sum(b*b)
> [1] -652010736
> > a<-(1:1000)/1.0
> > b<-(1:1000)/1.0
> > sum(a*a)*sum(b*b)
> [1] 1.114448e+17
>
> So  R somehow decides whether to use an integer or a double
> representation? Please tell me the rule used by R so I will know in the
> future.

It uses what you tell it to in general.  Integers will be handled as
integers, but as in C integer/numeric gives a numeric.  Rather than
learn rules, use typeof or storage.mode as in
> typeof(1:1000)
[1] "integer"

to find out, or make explicit coercions (as.numeric) if you want to make
assumptions about objects.

At present you are only likely to get integers from m:n and similar
seq() calls, and from unclass on a factor.  But no one is saying that will
not change in the future (and it did from S3 to S4).  And you could
always have a user who used as.integer explicitly.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Thu Sep 13 15:19:32 2001
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Thu, 13 Sep 2001 15:19:32 +0100 (BST)
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.31.0109131443170.14713-100000@gannet.stats>
Message-ID: <Pine.LNX.4.10.10109131504160.5394-100000@localhost.localdomain>

> 
> It uses what you tell it to in general.  Integers will be handled as
> integers, but as in C integer/numeric gives a numeric.  Rather than
> learn rules, use typeof or storage.mode as in
> > typeof(1:1000)
> [1] "integer"
> 
> to find out, or make explicit coercions (as.numeric) if you want to make
> assumptions about objects.
Well you saw where I was hit by unexpected integers. BTW did you notice
that integers in a<-1:1000 caused a problem in
sum(a*a) * sum(b*b)
and not in 
crossprod(a,a) * crossprod(b,b)?
sum() preserved the integers as integers and crossprod() coerced them to
doubles.

I don't think you can do any arithmetic at all unless you make some
assumptions. Are you saying I should do as.double(a) every time I do
anything with vectors in R???

As it now stands, R makes most things double, with some exceptions as you
give below. Why not eliminate the exceptions?

> At present you are only likely to get integers from m:n and similar
> seq() calls, and from unclass on a factor.  But no one is saying that will
> not change in the future (and it did from S3 to S4).

>  And you could
> always have a user who used as.integer explicitly.
Yes, that's fine.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Sep 13 17:58:58 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 13 Sep 2001 12:58:58 -0400 (EDT)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.GSO.4.31.0109121814450.6636-100000@auk.stats>
Message-ID: <Pine.LNX.4.30.0109131148330.2512-100000@bolker.zoo.ufl.edu>


  It was pretty straightforward.
  I haven't tested it very extensively, and not on a Mac at all.  The only
subtlety is skipping commented lines at the beginning of the file because
read.table assumes that the first line (not the first non-blank line) is
the header line if header=TRUE.

read.table.c <- function(file,comment="#",debug=FALSE,...) {
  infile <- file(file,"r")
  tmpfile <- file()
  cchar <- "#"
  while (length(cline <- readLines(infile,1))>0) {
    s <- strsplit(cline,cchar)[[1]][1]
    if (nchar(s)>0)  { ## skip blank lines to not screw up header
      if (debug) cat(s,"\n")
      writeLines(s,tmpfile)
    }
  }
  r <- read.table(tmpfile,...)
  close(infile)
  close(tmpfile)
  r
}


On Wed, 12 Sep 2001, Prof Brian D Ripley wrote:

> On Wed, 12 Sep 2001, Ben Bolker wrote:
>
> >
> >   How difficult would it be (I could try myself if someone thought it
> > would be straightforward) to change read.table to allow a comment
> > character such as # or %?  My thought would be that anything on a line
>
> It's hard in read.table, especially given the changes in R-devle to mke it
> more flexible.  The place to do this seems to me to be the internals of
> scan.  They are far from transparent, though.
>
> > following a comment character would be ignored (so that the combination of
> > blank.lines.skip=TRUE and a comment at the beginning of the line would
> > lead to a line being skipped completely).
> >  I'm always encouraging my students to comment their data sets, and it
> > feels lame to tell them they have to count the number of initial lines in
> > the data set in order to set the "skip" parameter appropriately.  (The
> > comment character would also allow comments about a particular data
> > point.)
> >
> >   I know I could hack this (a) with sed in Unix [but my students using
> > Windows are likely to have trouble] (b) within R, by processing the file
> > and creating a temporary file with comments deleted.  (b) is probably what
> > I'll do as a temporary fix, but this seems to be a reasonable piece of
> > functionality for R to have ...
>
> (b) seems easy to me. Use either a file() connection or an output text
> connection.  (I don't know if file(), that's no arg, works on Mac for
> example, though.)
>
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Thu Sep 13 18:03:11 2001
From: fharrell@virginia.edu (Frank E Harrell Jr)
Date: Thu, 13 Sep 2001 13:03:11 -0400
Subject: [Rd] SV4 on R?
Message-ID: <3BA0E6CF.C443E84C@virginia.edu>

Dear R-Developers,

The traffic today on s-news where Terry Therneau, I, and others
are reporting some of the problems we have had using or
converting applications to SV4 reminded me of something
Duncan Temple Lang had mentioned to me a year ago that
I wanted to follow up on.  I recall that Duncan said either that if SV4
were to be implemented in R that it would not be
the default behavior, or that through an option the
new behavior could be turned off.  Would you mind
bringing me up to date on this?  I sincerely hope
that what I thought Duncan said last year still
applies.  Thank you very much for your consideration.  -Frank

P.S.  If anyone receiving this does not subscribe to s-news
and wants to receive background information please let me know.
-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 13 18:38:28 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 13 Sep 2001 18:38:28 +0100 (BST)
Subject: [Rd] SV4 on R?
In-Reply-To: <3BA0E6CF.C443E84C@virginia.edu>
Message-ID: <Pine.GSO.4.31.0109131831030.27843-100000@auk.stats>

On Thu, 13 Sep 2001, Frank E Harrell Jr wrote:

> Dear R-Developers,
>
> The traffic today on s-news where Terry Therneau, I, and others
> are reporting some of the problems we have had using or
> converting applications to SV4 reminded me of something
> Duncan Temple Lang had mentioned to me a year ago that
> I wanted to follow up on.  I recall that Duncan said either that if SV4
> were to be implemented in R that it would not be
> the default behavior, or that through an option the
> new behavior could be turned off.  Would you mind
> bringing me up to date on this?  I sincerely hope
> that what I thought Duncan said last year still
> applies.  Thank you very much for your consideration.  -Frank


There are lots of aspects of S4 behaviour.  Some R already has
(connections, preserving logicals in data frames, for example).  I guess
you are concerned about classes. There I don't think a decision has been
taken.  There is a `methods' package in R-devel, written by John Chambers
that is not yet finished (or I believe so, as it is being changed quite
rapidly and is only partially documented).  What is likely is that in R
1.4.0 all objects will have classes, and that functions like identical(),
as() and is() will be available.  So far this has caused only a few
problems, mainly because there are not problems like the "named" class
presents in S4. (Bit of background: any vector with names in S4 is of class
"named", and that includes lists with names.)

Assuming we decide to keep it I don't expect that all objects will have a
class is not going to be optional.  You will get classes like "numeric"
from class(x).  I think that's a good move.  It does mean that a test for
null class should be a test of !is.object(x), probably.

I do think you and Terry and others are being too negative. The problems
are not with designing new S4 classes to do the job, but porting S3 ones.
I believe too few people have tried to re-design to make use of S4 classes
for there to be enough evidence.  FWIW, MASS and nnet have been using
S4 classes for a few years quite sucessfully: we re-designed the classes.
We stopped because no one else seemed to be moving, and the basic modelling
functions are still confined to S3-style objects.


Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dsmith@insightful.com  Thu Sep 13 19:07:36 2001
From: dsmith@insightful.com (David Smith)
Date: Thu, 13 Sep 2001 11:07:36 -0700
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.31.0109130948310.14470-100000@gannet.stats>
Message-ID: <LGEFIDJJDBKMHCAKBCOICEEJDLAA.dsmith@insightful.com>

> If you use integers you need to be aware of the consequences.  It's a
> feature not a bug.

Perhaps, but maybe a more useful feature would be to signal to the user when
such an overflow occurs?  Sv4 does this by returning NA for overflow integer
results:

> a <- (1:1000)
> b <- (1:1000)
> sum(a * a) * sum(b * b)
[1] NA

When this was introduced in S-PLUS 5, we discovered some overflow errors we
were previously unaware of in S-PLUS (by noticing NAs in the results).

# David Smith

--
David M Smith <dsmith@insightful.com>
S-PLUS Product Marketing Manager, Insightful Corp, Seattle WA
Tel: +1 (206) 283 8802 x360
Fax: +1 (206) 283 0347

Learn how Merck, Proctor & Gamble, Merrill Lynch and others are using
S-PLUS, deploying Web-based analytics and more at the 2001 S-PLUS User
Conference being held in Philadelphia, October 18-19 -
www.insightful.com/events/2001uc.

> -----Original Message-----
> From: owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]On Behalf Of Prof Brian Ripley
> Sent: Thursday, September 13, 2001 01:54
> To: wsi@gcal.ac.uk
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: Re: [Rd] sum overflow (PR#1091)
>
>
> It's not a problem with sum:
>
> > sum(a*a)
> [1] 333833500
> > sum(b*b)
> [1] 333833500
>
> are accurate.
>
> The overflow is in the integer arithmetic for *.  That's a question for
> your C run-time system.  On a 64-bit machine you might get different
> results (although most use 32-bit ints, including mine).
>
> If you use integers you need to be aware of the consequences.  It's a
> feature not a bug.
>
>
> On Thu, 13 Sep 2001 wsi@gcal.ac.uk wrote:
>
> > Full_Name: Bill Simpson
> > Version: 1.2.3
> > OS: linux
> > Submission from: (NULL) (193.62.250.209)
> >
> >
> > I think I have found an accuracy problem with sum()
> >
> > > a<-1:1000
> > > b<-1:1000
> > >
> > > crossprod(a,a)*crossprod(b,b)
> >              [,1]
> > [1,] 1.114448e+17
> > > drop(.Last.value)
> > [1] 1.114448e+17
> > >
> > #this should give same answer as above
> > > sum(a*a)*sum(b*b)
> > [1] -652010736
> > #seems to be due to sum using integer representation which
> overflows instead of
> > using
> > #double representation
> >
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> > r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
> r-devel-request@stat.math.ethz.ch
> >
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._
> >
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Thu Sep 13 19:35:32 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Thu, 13 Sep 2001 20:35:32 +0200 (CEST)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.LNX.4.30.0109131148330.2512-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.33.0109132031110.510-100000@kleigh.nl>

Ben Bolker scribeva...

>
>   It was pretty straightforward.
>   I haven't tested it very extensively, and not on a Mac at all.  The only
> subtlety is skipping commented lines at the beginning of the file because
> read.table assumes that the first line (not the first non-blank line) is
> the header line if header=TRUE.
>
> read.table.c <- function(file,comment="#",debug=FALSE,...) {
>   infile <- file(file,"r")
>   tmpfile <- file()
>   cchar <- "#"
>   while (length(cline <- readLines(infile,1))>0) {
>     s <- strsplit(cline,cchar)[[1]][1]
>     if (nchar(s)>0)  { ## skip blank lines to not screw up header
>       if (debug) cat(s,"\n")
>       writeLines(s,tmpfile)
>     }
>   }
>   r <- read.table(tmpfile,...)
>   close(infile)
>   close(tmpfile)
>   r
> }

That is not very robust. What about these:

    # a comment
    1 2 3  # a comment
           # a comment
    "1" "2" "3  # not a comment"
    "# not a comment"  # a comment

Comments don't have to start at the first column, and comments
can also exist after real data. A comment char within a string
should not be taken as the start of a comment, and you also have
to take into account that the tokens delimiting a string can
vary.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu Sep 13 20:08:26 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 13 Sep 2001 15:08:26 -0400
Subject: [Rd] SV4 on R?
References: <Pine.GSO.4.31.0109131831030.27843-100000@auk.stats>
Message-ID: <3BA1042A.A55594C8@research.bell-labs.com>

Prof Brian D Ripley wrote:
> 
> On Thu, 13 Sep 2001, Frank E Harrell Jr wrote:
> 
> > Dear R-Developers,
> >
> > The traffic today on s-news where Terry Therneau, I, and others
> > are reporting some of the problems we have had using or
> > converting applications to SV4 reminded me of something
> > Duncan Temple Lang had mentioned to me a year ago that
> > I wanted to follow up on.  I recall that Duncan said either that if SV4
> > were to be implemented in R that it would not be
> > the default behavior, or that through an option the
> > new behavior could be turned off.  Would you mind
> > bringing me up to date on this?  I sincerely hope
> > that what I thought Duncan said last year still
> > applies.  Thank you very much for your consideration.  -Frank
> 
> There are lots of aspects of S4 behaviour.  Some R already has
> (connections, preserving logicals in data frames, for example).  I guess
> you are concerned about classes. There I don't think a decision has been
> taken.  There is a `methods' package in R-devel, written by John Chambers
> that is not yet finished (or I believe so, as it is being changed quite
> rapidly and is only partially documented).  What is likely is that in R
> 1.4.0 all objects will have classes, and that functions like identical(),
> as() and is() will be available.  So far this has caused only a few
> problems, mainly because there are not problems like the "named" class
> presents in S4. (Bit of background: any vector with names in S4 is of class
> "named", and that includes lists with names.)
> 
> Assuming we decide to keep it I don't expect that all objects will have a
> class is not going to be optional.  You will get classes like "numeric"
> from class(x).  I think that's a good move.  It does mean that a test for
> null class should be a test of !is.object(x), probably.

In the current 1.4, the new definitions are in a package "methods". 
Unless that package is attached, the old versions (only) apply,
including the definition of class.  So at present, you can have the
old-style class definition if you want.  In the long run, that may
change as Brian suggests.

In the R context, there are a number of future plans such as threading,
namespaces and compiling.  Defining those using the "S3" model seems to
me to be difficult and undesirable.  Luke and Duncan can comment more
authoritatively, since they are mainly responsible.

> I do think you and Terry and others are being too negative. The problems
> are not with designing new S4 classes to do the job, but porting S3 ones.
> I believe too few people have tried to re-design to make use of S4 classes
> for there to be enough evidence.  FWIW, MASS and nnet have been using
> S4 classes for a few years quite sucessfully: we re-designed the classes.
> We stopped because no one else seemed to be moving, and the basic modelling
> functions are still confined to S3-style objects.
> 
> Brian
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 13 20:43:26 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 13 Sep 2001 20:43:26 +0100 (BST)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.LNX.4.33.0109132031110.510-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.31.0109132041470.28504-100000@auk.stats>

I do intend to do this at a lower level where it will be robust.
As Peter says, quotes are one of the issues I had been thinking about.
I would be happy in the interim to insist on starting with a comment
character.

B


On Thu, 13 Sep 2001, Peter Kleiweg wrote:

> Ben Bolker scribeva...
>
> >
> >   It was pretty straightforward.
> >   I haven't tested it very extensively, and not on a Mac at all.  The only
> > subtlety is skipping commented lines at the beginning of the file because
> > read.table assumes that the first line (not the first non-blank line) is
> > the header line if header=TRUE.
> >
> > read.table.c <- function(file,comment="#",debug=FALSE,...) {
> >   infile <- file(file,"r")
> >   tmpfile <- file()
> >   cchar <- "#"
> >   while (length(cline <- readLines(infile,1))>0) {
> >     s <- strsplit(cline,cchar)[[1]][1]
> >     if (nchar(s)>0)  { ## skip blank lines to not screw up header
> >       if (debug) cat(s,"\n")
> >       writeLines(s,tmpfile)
> >     }
> >   }
> >   r <- read.table(tmpfile,...)
> >   close(infile)
> >   close(tmpfile)
> >   r
> > }
>
> That is not very robust. What about these:
>
>     # a comment
>     1 2 3  # a comment
>            # a comment
>     "1" "2" "3  # not a comment"
>     "# not a comment"  # a comment
>
> Comments don't have to start at the first column, and comments
> can also exist after real data. A comment char within a string
> should not be taken as the start of a comment, and you also have
> to take into account that the tokens delimiting a string can
> vary.
>
> --
> Peter Kleiweg
> http://www.let.rug.nl/~kleiweg/
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Sep 13 21:45:37 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 13 Sep 2001 16:45:37 -0400
Subject: FW: [Rd] sum overflow (PR#1091)
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEDEE@groexmbcr02.pfizer.com>


> From: David Smith [mailto:dsmith@insightful.com]
>> From: Prof Brian Ripley
>>
>> If you use integers you need to be aware of the consequences.  It's a
>> feature not a bug.
>
> Perhaps, but maybe a more useful feature would be to signal to the user
when
> such an overflow occurs?  Sv4 does this by returning NA for overflow
integer
> results:
> 
> > a <- (1:1000)
> > b <- (1:1000)
> > sum(a * a) * sum(b * b)
> [1] NA
> 
> When this was introduced in S-PLUS 5, we discovered some overflow errors
we
> were previously unaware of in S-PLUS (by noticing NAs in the results).

This is a first step in the right direction.  I think that having overflows
generate of NA's should be augmented by a warning or an error message.
Thus we would get something like:

> a <- (1:1000)
> b <- (1:1000)
> sum(a * a) * sum(b * b)
Warning messages: 
Integer overflow produced NA's in: .Primitive("*") 
> [1] NA

Now, the problem will be clear to the user, and many users will immediately
see how to get around it.

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Sep 14 00:04:49 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 13 Sep 2001 19:04:49 -0400 (EDT)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.LNX.4.33.0109132031110.510-100000@kleigh.nl>
Message-ID: <Pine.LNX.4.30.0109131857260.12164-100000@bolker.zoo.ufl.edu>

On Thu, 13 Sep 2001, Peter Kleiweg wrote:

  [snip]
>
> That is not very robust. What about these:
>
1>     # a comment
2>     1 2 3  # a comment
3>            # a comment
4>     "1" "2" "3  # not a comment"
5>     "# not a comment"  # a comment
>
> Comments don't have to start at the first column, and comments
> can also exist after real data. A comment char within a string
> should not be taken as the start of a comment, and you also have
> to take into account that the tokens delimiting a string can
> vary.
>

  As Brian Ripley has pointed out, he hopes to do this at a lower level,
more robustly, later.  In the meantime, in my defense: this code works for
lines 1, 2, and 3 (it's OK with comments that start after the first column
and that exist after real data -- that was part of my spec).  It doesn't
deal with comment characters embedded in quoted strings, but I don't have
any problem with telling people that they're not allowed to have comment
characters in quoted strings in their data -- it seems to be a perfectly
reasonable restriction.
  If I wanted to hack this further I would probably try to do a strsplit
on quotation characters, and look for comment characters only in the odd
parts of the split.  And if someone puts

  "\"\\"\\\" ## "  "#" "\\  \" \#"

in their data file, then they deserve what they get ... :-)

  Ben Bolker


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Fri Sep 14 13:17:09 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Fri, 14 Sep 2001 07:17:09 -0500
Subject: [Rd] SV4 on R?
In-Reply-To: <3BA0E6CF.C443E84C@virginia.edu>; from fharrell@virginia.edu on Thu, Sep 13, 2001 at 01:03:11PM -0400
References: <3BA0E6CF.C443E84C@virginia.edu>
Message-ID: <20010914071709.B29028@nokomis.stat.umn.edu>

On Thu, Sep 13, 2001 at 01:03:11PM -0400, Frank E Harrell Jr wrote:
> Dear R-Developers,
> 
> The traffic today on s-news where Terry Therneau, I, and others
> are reporting some of the problems we have had using or
> converting applications to SV4 reminded me of something
> Duncan Temple Lang had mentioned to me a year ago that
> I wanted to follow up on.  I recall that Duncan said either that if SV4
> were to be implemented in R that it would not be
> the default behavior, or that through an option the
> new behavior could be turned off.  Would you mind
> bringing me up to date on this?  I sincerely hope
> that what I thought Duncan said last year still
> applies.  Thank you very much for your consideration.  -Frank
> 
> P.S.  If anyone receiving this does not subscribe to s-news
> and wants to receive background information please let me know.

One of the reasons for looking at alternatives to the SV3 style
classes is that they are not very compatible with one thing I think we
need fairly badly: some form name space management.

Name spaces are about controlling which variables in a package are
visible outside a package and about preventing variables in one
package from unintentionally shadowing ones in another.  With name
spaces packages will be more robust; separately developed packages can
be used together more safely.  This is why languages like Tcl and Perl
have added name space facilities in recent years.  For R, name spaces
should also make maintaining the existing R code component of the core
system easier and also allow more internals to be migrated from C to
R.  Name spaces are also needed to support some ideas on byte code
compilation that are being explored.  Some early ideas on how name
spaces might be added to R are available off the developer page,
http://developer.r-project.org/.

Here is the problem with the SV3 approach. Suppose a package
SpecialDates defines a special kind of date class along with a
SpecialDate method for as.character.  A second class DataTree for
managing tree structured data defines a function that plots a tree of
generic objects using the as.character representations of the objects.
The current SV3 approach to dispatch needs to find a definition for
as.character.SpecialDate.  With a single dynamic search path as we
have now that is no problem.  But if we try to use name spaces of any
form I can think of to limit the things that are visible inside the
DataTree package then we also lose its ability to see methods of the
SV3 type that are defined outside the names pace, and this severely
limits the usefulness of generic functions.

Put another way, when a generic function is called with the SV3
dispatching approach it takes the name of the generic function, which
might be defined in one name space, and the name of a class whose
methods are defined in a second names pace, glues them together to get
the method name, and then needs to look up the method name in the right
place.  But at the call site it has no way of knowing that that right
place might be.

The only way around this that I can see is to provide some form of
registration mechanism for methods, some means of saying explicitly
that this function is a method for that generic function and that
class.  The SV4 model is one way, though certainly not the only way,
to achieve this.  By having explicit registration of classes the S4
model also provides for a way of having name space management for
class names, which is also useful.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Fri Sep 14 14:36:45 2001
From: fharrell@virginia.edu (Frank E Harrell Jr)
Date: Fri, 14 Sep 2001 09:36:45 -0400
Subject: [Rd] SV4 on R?
References: <3BA0E6CF.C443E84C@virginia.edu> <20010914071709.B29028@nokomis.stat.umn.edu>
Message-ID: <3BA207ED.C598359E@virginia.edu>

Dear Luke,

Thank you very much for the explanation and for the
good work you are doing on this.  It sounds very
valuable.  I do hope that it will not lead to
non-downward-compatible changes in the S language
except in perhaps unusual cases not affecting
many functions.

One other thought: Something short of what you
are developing could be implemented in the meantime,
namely "manual name registration" through a database
on r-project.org through which developers and users
could register function and class names.  Users
developing packages who desire to reuse an
already registered name would be able to search
the database to find potential incompatibilities 
or overrides they would need to warn users of the
package about.  Periodically-run automatic
database queries could compile lists of conflicts
that can be used to warn all users, with a
suggestion that those registering names last should
consider renaming tings. 
I believe that Stata, along with the
many other good decisions they have made, has
a web-driven registration system.  If Stata's
language were decent I would have been using it.

Let me renew a plea I've made before which will
lessen the need for some overrides.  A user-specified
vector of attribute names (e.g., "label", "comment",
"units") that would be carried forward when a vector
or matrix is subsetted would do away with the need for
the few overrides I have in R implementations of my
libraries, for [.* functions.

Best regards,

Frank Harrell


Luke Tierney wrote:
> 
> On Thu, Sep 13, 2001 at 01:03:11PM -0400, Frank E Harrell Jr wrote:
> > Dear R-Developers,
> >
> > The traffic today on s-news where Terry Therneau, I, and others
> > are reporting some of the problems we have had using or
> > converting applications to SV4 reminded me of something
> > Duncan Temple Lang had mentioned to me a year ago that
> > I wanted to follow up on.  I recall that Duncan said either that if SV4
> > were to be implemented in R that it would not be
> > the default behavior, or that through an option the
> > new behavior could be turned off.  Would you mind
> > bringing me up to date on this?  I sincerely hope
> > that what I thought Duncan said last year still
> > applies.  Thank you very much for your consideration.  -Frank
> >
> > P.S.  If anyone receiving this does not subscribe to s-news
> > and wants to receive background information please let me know.
> 
> One of the reasons for looking at alternatives to the SV3 style
> classes is that they are not very compatible with one thing I think we
> need fairly badly: some form name space management.
> 
> Name spaces are about controlling which variables in a package are
> visible outside a package and about preventing variables in one
> package from unintentionally shadowing ones in another.  With name
> spaces packages will be more robust; separately developed packages can
> be used together more safely.  This is why languages like Tcl and Perl
> have added name space facilities in recent years.  For R, name spaces
> should also make maintaining the existing R code component of the core
> system easier and also allow more internals to be migrated from C to
> R.  Name spaces are also needed to support some ideas on byte code
> compilation that are being explored.  Some early ideas on how name
> spaces might be added to R are available off the developer page,
> http://developer.r-project.org/.
> 
> Here is the problem with the SV3 approach. Suppose a package
> SpecialDates defines a special kind of date class along with a
> SpecialDate method for as.character.  A second class DataTree for
> managing tree structured data defines a function that plots a tree of
> generic objects using the as.character representations of the objects.
> The current SV3 approach to dispatch needs to find a definition for
> as.character.SpecialDate.  With a single dynamic search path as we
> have now that is no problem.  But if we try to use name spaces of any
> form I can think of to limit the things that are visible inside the
> DataTree package then we also lose its ability to see methods of the
> SV3 type that are defined outside the names pace, and this severely
> limits the usefulness of generic functions.
> 
> Put another way, when a generic function is called with the SV3
> dispatching approach it takes the name of the generic function, which
> might be defined in one name space, and the name of a class whose
> methods are defined in a second names pace, glues them together to get
> the method name, and then needs to look up the method name in the right
> place.  But at the call site it has no way of knowing that that right
> place might be.
> 
> The only way around this that I can see is to provide some form of
> registration mechanism for methods, some means of saying explicitly
> that this function is a method for that generic function and that
> class.  The SV4 model is one way, though certainly not the only way,
> to achieve this.  By having explicit registration of classes the S4
> model also provides for a way of having name space management for
> class names, which is also useful.
> 
> luke
> 
> --
> Luke Tierney
> University of Minnesota                      Phone:           612-625-7843
> School of Statistics                         Fax:             612-624-8868
> 313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
> Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Fri Sep 14 15:46:57 2001
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Fri, 14 Sep 2001 16:46:57 +0200 (MET DST)
Subject: [Rd] rowsum dimnames (PR#1092)
Message-ID: <200109141446.QAA16930@pubhealth.ku.dk>

The result of rowsum() in R doesn't have the dimnames I'd expect, e.g.:

> rowsum(matrix(1:12, 3,4), c("Y","X","Y"))
    [,1] [,2] [,3] [,4]
  1    2    5    8   11
  2    4   10   16   22

whereas S-Plus gives the more useful result:
    [,1] [,2] [,3] [,4] 
  X    2    5    8   11
  Y    4   10   16   22

This is because R's rowsum() code gives the first dimnames as "ugroup", which
is a factor, rather than "as.character(ugroup)".  Similarly for the assignment
of names(x) in the case where x is a vector.

I'm using R 1.3.0 on Solaris 2.6.  Help says rowsum's author is Terry Therneau.
Thanks!
			-- David Brahm (a215020@agate.fmr.com)

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Sep 15 09:18:03 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 15 Sep 2001 10:18:03 +0200
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.31.0109131443170.14713-100000@gannet.stats>
References: <Pine.LNX.4.10.10109131153420.5118-100000@localhost.localdomain>
 <Pine.LNX.4.31.0109131443170.14713-100000@gannet.stats>
Message-ID: <15267.3771.66526.124837@gargle.gargle.HOWL>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Thu, 13 Sep 2001, Bill Simpson wrote:
    >> > It's not a problem with sum:
    >> >
    >> > > sum(a*a)
    >> > [1] 333833500
    >> > > sum(b*b)
    >> > [1] 333833500
    >> >
    >> > are accurate.
    >> >
    >> > The overflow is in the integer arithmetic for *.  That's a question for
    >> > your C run-time system.  On a 64-bit machine you might get different
    >> > results (although most use 32-bit ints, including mine).
    >> >
    >> > If you use integers you need to be aware of the consequences.  It's a
    >> > feature not a bug.
    >> I thought R used an internal rep that was double in all cases.

    BDR> Assumed, I guess, as I've never seen that in the manuals.

    >> Now I'm confused:
    >> > a<-(1:1000)
    >> > b<-(1:1000)
    >> > sum(a*a)*sum(b*b)
    >> [1] -652010736
    >> > a<-(1:1000)/1.0
    >> > b<-(1:1000)/1.0
    >> > sum(a*a)*sum(b*b)
    >> [1] 1.114448e+17
    >> 
    >> So  R somehow decides whether to use an integer or a double
    >> representation? Please tell me the rule used by R so I will know in the
    >> future.

    BDR> It uses what you tell it to in general.  Integers will be handled as
    BDR> integers, but as in C integer/numeric gives a numeric.  Rather than
    BDR> learn rules, use typeof or storage.mode as in
    >> typeof(1:1000)
    BDR> [1] "integer"

    BDR> to find out, or make explicit coercions (as.numeric) if you want
    BDR> to make assumptions about objects.

    BDR> At present you are only likely to get integers from m:n and
    BDR> similar seq() calls, and from unclass on a factor.  

also  length() and dim()
on which I even rely in .C() calls when not using explicit as.integer()
there  [but many will tell me that was not "defensive" and un-wise].

    BDR>  But no one is saying that will not change in the future (and it
    BDR> did from S3 to S4).  And you could always have a user who used
    BDR> as.integer explicitly.

indeed!

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Sat Sep 15 13:23:04 2001
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Sat, 15 Sep 2001 14:23:04 +0200 (MET DST)
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun Solaris (PR#1093)
Message-ID: <200109151223.OAA19865@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.3.1
OS: Sun Solaris 8
Submission from: (NULL) (130.235.3.49)


I have been trying to install [R] v1.3.1 locally on a Sun Solaris 8 machine and
I ran into the (already known) perl problems that express theselves as:

Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1390, near "$txtout
mywrap"
        (Missing operator before mywrap?)
Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1405, near "$txtout
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1420, near "$txtout
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1448, near "$txtout
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1491, near "$txtout
txt_header"
        (Missing operator before txt_header?)

I searched the web for solutions and found Brian Ripley's suggestion one of the
replies to "Re: [Rd] several documentation problems (PR#675)". There he
suggested to add a '&' infront of 'mywrap' and 'txt_header'; "Another guess is
that it might require &mywrap there.". I tried this and it works. I also tried
the alternative to add parentesis around the function calls, which also seemed
to work. 

My suggestion is to add this to Rdconv.pm at the 5 lines above. This would make
the building of [R] a little bit easier.


Perl version used: 

"This is perl, version 5.003 with EMBED built under solaris at Sep 14 1996
22:39:00 + suidperl security patch". 

This is the version of perl installed on a brand new (2001-09-10) Sun
SunBlade100 Solaris machine.

[R] version: Trying to install R v1.3.1.


Regards

Henrik Bengtsson
Lund University
Sweden

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep 15 15:11:59 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 15 Sep 2001 15:11:59 +0100 (BST)
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun
 Solaris (PR#1093)
In-Reply-To: <200109151223.OAA19865@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0109151445290.3896-100000@toucan.stats>

On Sat, 15 Sep 2001 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.3.1
> OS: Sun Solaris 8
> Submission from: (NULL) (130.235.3.49)
>
>
> I have been trying to install [R] v1.3.1 locally on a Sun Solaris 8 machine and
> I ran into the (already known) perl problems that express theselves as:

[...]

> My suggestion is to add this to Rdconv.pm at the 5 lines above. This would make
> the building of [R] a little bit easier.
>
>
> Perl version used:
>
> "This is perl, version 5.003 with EMBED built under solaris at Sep 14 1996
                                                                        ^^^^
> 22:39:00 + suidperl security patch".

It was a bug in one version of perl around five years ago.  Incidentally,
it must have been built under a much older version of Solaris (as I recall
2.6 came out in 1998: certainly we first used it in late 1998), and
we find it is a good idea to rebuild perl at Solaris upgrades, especially
upgrading from 2.5.x.

We don't know (and don't have the resources to check) if the changed
version works on all more recent perl versions in use by R installers.

I do believe the solution is well-known: use perl 5.005, 5.6.0 or
(preferably) 5.6.1.  Perhaps we should test for perl >= 5.005?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep 15 18:21:10 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 15 Sep 2001 19:21:10 +0200
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun
 Solaris (PR#1093)
In-Reply-To: <Pine.GSO.4.31.0109151445290.3896-100000@toucan.stats>
References: <200109151223.OAA19865@pubhealth.ku.dk>
 <Pine.GSO.4.31.0109151445290.3896-100000@toucan.stats>
Message-ID: <15267.36358.740330.761626@mithrandir.hornik.net>

>>>>> Prof Brian Ripley writes:

> On Sat, 15 Sep 2001 hb@maths.lth.se wrote:
>> Full_Name: Henrik Bengtsson
>> Version: 1.3.1
>> OS: Sun Solaris 8
>> Submission from: (NULL) (130.235.3.49)
>> 
>> 
>> I have been trying to install [R] v1.3.1 locally on a Sun Solaris 8 machine and
>> I ran into the (already known) perl problems that express theselves as:

> [...]

>> My suggestion is to add this to Rdconv.pm at the 5 lines above. This would make
>> the building of [R] a little bit easier.
>> 
>> 
>> Perl version used:
>> 
>> "This is perl, version 5.003 with EMBED built under solaris at Sep 14 1996
>                                                                         ^^^^
>> 22:39:00 + suidperl security patch".

> It was a bug in one version of perl around five years ago.  Incidentally,
> it must have been built under a much older version of Solaris (as I recall
> 2.6 came out in 1998: certainly we first used it in late 1998), and
> we find it is a good idea to rebuild perl at Solaris upgrades, especially
> upgrading from 2.5.x.

> We don't know (and don't have the resources to check) if the changed
> version works on all more recent perl versions in use by R installers.

> I do believe the solution is well-known: use perl 5.005, 5.6.0 or
> (preferably) 5.6.1.  Perhaps we should test for perl >= 5.005?

Not sure, from a theoretical point of view: we really only require Perl
version 5.  But if we think that anything less than 5.005 is too buggy
then let's go for the change.  (Something like

	${PERL} -e 'require 5.005 or exit 1'

in PERL5_CHECK() of m4/R.m4?)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sun Sep 16 00:32:36 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Sun, 16 Sep 2001 01:32:36 +0200 (CEST)
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun
 Solaris (PR#1093)
In-Reply-To: <15267.36358.740330.761626@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0109160130030.383-100000@kleigh.nl>

Kurt Hornik scribeva...

> Not sure, from a theoretical point of view: we really only require Perl
> version 5.  But if we think that anything less than 5.005 is too buggy
> then let's go for the change.  (Something like
>
> 	${PERL} -e 'require 5.005 or exit 1'
>
> in PERL5_CHECK() of m4/R.m4?)

I'm still using Perl 5.004, and R installs without problems.
Wouldn't like to update Perl just to install a new version of R.
Perhaps a warning message would be more appropriate than an
error.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Sun Sep 16 02:53:36 2001
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 15 Sep 2001 20:53:36 -0500
Subject: [Rd] Using closures in libraries
Message-ID: <qxpzo7vj3z3.fsf@verdi.stat.wisc.edu>

I was trying to use closures within a library as follows -

foo <- local({
    # some code creating local variables
    function() {
        # uses the local variables created above
    })

It did not work because call to do_libfixup in library replaces all
the closure environments by the global environment. One way around
this would be to do the replacement only for closures that have the
same environment as the package environment. Basically change the
relevant lines in envir.c (do_libfixup) with -

	while (p != R_NilValue) {
	    if (TYPEOF(CAR(p)) == CLOSXP && CLOENV(CAR(p)) != lib)
		SET_CLOENV(CAR(p), env);
	    p = CDR(p);
	}

In case any one wonders, I know I could wrap the function in a list
and call the function with foo[[1]]() - but it really does not look
very natural. Closures are often so useful that it is desirable that
they can be used from libraries.

Can someone comment whether this change can be made and whether this
would cause any problems?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Sun Sep 16 03:21:25 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Sat, 15 Sep 2001 21:21:25 -0500
Subject: [Rd] Using closures in libraries
In-Reply-To: <qxpzo7vj3z3.fsf@verdi.stat.wisc.edu>; from saikat@stat.wisc.edu on Sat, Sep 15, 2001 at 08:53:36PM -0500
References: <qxpzo7vj3z3.fsf@verdi.stat.wisc.edu>
Message-ID: <20010915212125.B2176@nokomis.stat.umn.edu>

On Sat, Sep 15, 2001 at 08:53:36PM -0500, Saikat DebRoy wrote:
> I was trying to use closures within a library as follows -
> 
> foo <- local({
>     # some code creating local variables
>     function() {
>         # uses the local variables created above
>     })
> 
> It did not work because call to do_libfixup in library replaces all
> the closure environments by the global environment. One way around
> this would be to do the replacement only for closures that have the
> same environment as the package environment. Basically change the
> relevant lines in envir.c (do_libfixup) with -
> 
> 	while (p != R_NilValue) {
> 	    if (TYPEOF(CAR(p)) == CLOSXP && CLOENV(CAR(p)) != lib)
> 		SET_CLOENV(CAR(p), env);
> 	    p = CDR(p);
> 	}
> 
> In case any one wonders, I know I could wrap the function in a list
> and call the function with foo[[1]]() - but it really does not look
> very natural. Closures are often so useful that it is desirable that
> they can be used from libraries.
> 
> Can someone comment whether this change can be made and whether this
> would cause any problems?

Unfortunately it would cause problems.  What is currently done is a
fairly gross hack that is intended to get .Global env into the picture
and to avoid a situation where saving one function from the library in
a workspace drags in the whole library.  It accomplishes that but
throws out the baby with the bath water.  The fix you suggest would
cause these problems to reappear (though in a reduced form).  We need
to redesign the whole mechanism, and I'm mildly optimistic that will
happen before 1.4 is released.

There is an easy workaround though: install the package with --save.
That preserves environments in a sensible way (and is basically what
we need to emulate for the standard case).

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Sep 16 07:32:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 16 Sep 2001 07:32:27 +0100 (BST)
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun
 Solaris (PR#1093)
In-Reply-To: <Pine.LNX.4.33.0109160130030.383-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.31.0109160722540.7821-100000@auk.stats>

On Sun, 16 Sep 2001, Peter Kleiweg wrote:

> Kurt Hornik scribeva...
>
> > Not sure, from a theoretical point of view: we really only require Perl
> > version 5.  But if we think that anything less than 5.005 is too buggy

which I guess means we want an implementation of the Camel book 2nd edition
(`Programming Perl'), as Perl 5 is not a standard.  And my understanding is
that our code is legal by the Camel book, but 5.003 mis-parses it.

> > then let's go for the change.  (Something like
> >
> > 	${PERL} -e 'require 5.005 or exit 1'
> >
> > in PERL5_CHECK() of m4/R.m4?)
>
> I'm still using Perl 5.004, and R installs without problems.

Thanks for the confirmation.

> Wouldn't like to update Perl just to install a new version of R.
> Perhaps a warning message would be more appropriate than an
> error.

Would people notice a warning in all the output from configure?  This has
come up twice in the last year and a few more times before (with RedHat 5.2
as I recall).  We know that 5.003 is the one that caused the last two, so I
do think

${PERL} -e 'require 5.004 or exit 1'

would be a good idea.

B

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Sep 16 12:11:39 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 16 Sep 2001 13:11:39 +0200 (MET DST)
Subject: [Rd] rowsum dimnames (PR#1092)
Message-ID: <200109161111.NAA22091@pubhealth.ku.dk>

On Fri, 14 Sep 2001 brahm@alum.mit.edu wrote:

> The result of rowsum() in R doesn't have the dimnames I'd expect, e.g.:
>
> > rowsum(matrix(1:12, 3,4), c("Y","X","Y"))
>     [,1] [,2] [,3] [,4]
>   1    2    5    8   11
>   2    4   10   16   22
>
> whereas S-Plus gives the more useful result:
>     [,1] [,2] [,3] [,4]
>   X    2    5    8   11
>   Y    4   10   16   22
>
> This is because R's rowsum() code gives the first dimnames as "ugroup", which
> is a factor, rather than "as.character(ugroup)".  Similarly for the assignment
> of names(x) in the case where x is a vector.
>
> I'm using R 1.3.0 on Solaris 2.6.  Help says rowsum's author is Terry Therneau.
> Thanks!
> 			-- David Brahm (a215020@agate.fmr.com)

Change a couple of lines to

	dimnames(new.x) <- list(as.character(ugroup), colnames(x))
	names(new.x) <- as.character(ugroup)

(as you seem to be aware).

Done in the sources for 1.4.0.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From puetsch@bigfoot.de  Mon Sep 17 11:53:27 2001
From: puetsch@bigfoot.de (puetsch@bigfoot.de)
Date: Mon, 17 Sep 2001 12:53:27 +0200 (MET DST)
Subject: [Rd] lab does not work (PR#1094)
Message-ID: <200109171053.MAA28976@pubhealth.ku.dk>

Full_Name: Felix Puetsch
Version: 1.3.0
OS: Win ME
Submission from: (NULL) (139.6.20.11)


It seems that the "lab" paramter of plot does not work as desired.

plot(sin)
plot(sin,lab=c(5,5,5))
plot(sin,lab=c(10,10,5))

all give the same plot.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep 17 12:42:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Sep 2001 13:42:53 +0200
Subject: [Rd] lab does not work (PR#1094)
In-Reply-To: <200109171053.MAA28976@pubhealth.ku.dk>
References: <200109171053.MAA28976@pubhealth.ku.dk>
Message-ID: <x23d5mjb5u.fsf@blueberry.kubism.ku.dk>

puetsch@bigfoot.de writes:

> It seems that the "lab" paramter of plot does not work as desired.
> 
> plot(sin)
> plot(sin,lab=c(5,5,5))
> plot(sin,lab=c(10,10,5))
> 
> all give the same plot.

Not a bug. lab is not among the parameters that you can set in a
high-level plot (see the help page for par()). What you can do
is set it with a par() call before calling plot, i.e.

par(lab=c(10,10,5)) ; plot(sin)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep 17 18:10:29 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 17 Sep 2001 19:10:29 +0200
Subject: [Rd] Re: AIC & logLik for glm
In-Reply-To: <Pine.LNX.4.31.0109111241300.10651-100000@gannet.stats>
References: <3B9DED01.6B673D9E@ceam.es>
 <Pine.LNX.4.31.0109111241300.10651-100000@gannet.stats>
Message-ID: <15270.11909.306595.466358@gargle.gargle.HOWL>

[diverted to R-devel;  I'm really discussing future development]

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 11 Sep 2001, juli g. pausas wrote:
    >> Dear R collegues,
    >> I'm trying to understand what's AIC in R (ver. 1.3.1), and I'm getting a
    >> different answer if I look at the AIC(of the fitted model) or the aic in
    >> the summary( of the fitted model). Is this correct? Can somebody explain
    >> me the difference between the two values? or Is the AIC criterion not
    >> appropiated for Poisson models?

    BDR> It's the AIC _function_ that is inappropriate for glm models.
    BDR> There is no glm method, so the lm method is used.

actually, the AIC.lm() is just from the nlme package and it is very
much appropriate insofar as it entirely builds on logLik() {itself a generic}.
I've found recently, that I'd like to *rename* the current AIC.lm to
AIC.default since it is really correct whenever logLik() is correct.
For a private package, I recently found that I just could do
     AIC.myclass <- AIC.lm (and define a correct  logLik.myclass !!)
where the definition of AIC.myclass would have been unnecessary, had
AIC.lm been called AIC.default.  AIC() would then barf whenever there's no
logLik() method for the given model class which I'd think to be fine (no?)

    BDR> Martin: I think you moved AIC and logLik into base R: this needs
    BDR> sorting out.

yes.  However, I haven't changed the AIC.lm and logLik.lm methods, and the
currrent behavior is just what *was* the former behavior after
library(nlme) had been called, then.

What really needs a fix is logLik.lm(), probably by providing a
logLik.glm() method which seems almost trivial, given the way our glm
families are implemented, the internal aic() function is really -2*logLik(.).
For the quasi "family", the result would be NA, rightly.

BTW, I'm more and more wondering if we shouldn't commit these as patches to
1.3.x rather than only for 1.4..

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Sep 19 14:48:47 2001
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Wed, 19 Sep 2001 15:48:47 +0200 (MET DST)
Subject: [Rd] Bizarre clipping with abline and points (PR#1095)
Message-ID: <200109191348.PAA27712@pubhealth.ku.dk>

I want to put some points along the horizontal axis.

> plot(1:10, 1:10)
> points(4, par("usr")[3], xpd=TRUE)
> abline(v=5)

works fine for me.  But if I try

> plot(1:10, 1:10)
> abline(v=5)
> points(4, par("usr")[3], xpd=TRUE)

then the points are clipped.  The call to abline seems to be
enforcing xpd=FALSE for later calls to the plot.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Sep 19 15:08:56 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Sep 2001 16:08:56 +0200
Subject: [Rd] Bizarre clipping with abline and points (PR#1095)
In-Reply-To: <200109191348.PAA27712@pubhealth.ku.dk>
References: <200109191348.PAA27712@pubhealth.ku.dk>
Message-ID: <x2elp39ssn.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I want to put some points along the horizontal axis.
> 
> > plot(1:10, 1:10)
> > points(4, par("usr")[3], xpd=TRUE)
> > abline(v=5)
> 
> works fine for me.  But if I try
> 
> > plot(1:10, 1:10)
> > abline(v=5)
> > points(4, par("usr")[3], xpd=TRUE)
> 
> then the points are clipped.  The call to abline seems to be
> enforcing xpd=FALSE for later calls to the plot.

Confirmed, same effect with 

plot(1:10, 1:10)
points(4, par("usr")[3], xpd=FALSE)
points(4, par("usr")[3], xpd=TRUE)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hosking@watson.ibm.com  Wed Sep 19 15:38:54 2001
From: hosking@watson.ibm.com (hosking@watson.ibm.com)
Date: Wed, 19 Sep 2001 16:38:54 +0200 (MET DST)
Subject: [Rd] missing() (PR#1096)
Message-ID: <200109191438.QAA28403@pubhealth.ku.dk>

Full_Name: J. R. M. Hosking
Version: 1.3.0
OS: Windows 2000
Submission from: (NULL) (198.81.209.16)


R documentation suggests that if a function argument x is omitted,
missing(x) should return TRUE even if x is subsequently assigned a value.
This happens in S-plus.  But in R:

> test
function(x){
print(missing(x))
if(missing(x)) x<-0
print(missing(x))
invisible()
}
> test()
[1] TRUE
[1] FALSE
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Sep 19 15:47:40 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 19 Sep 2001 16:47:40 +0200 (MET DST)
Subject: [Rd] missing() (PR#1096)
Message-ID: <200109191447.QAA28531@pubhealth.ku.dk>

>From the FAQ:

   * In S, `missing(ARG)' remains `TRUE' if ARG is subsequently modified;
     in R it doesn't.


>From ?missing in 1.3.1:

Details:

     `missing(x)' is only reliable if `x' has not been altered since
     entering the function: in particular it will always be true after
     `x <- match.arg(x)'.

My guess is that whatever you were looking at has been changed in the
current version.


On Wed, 19 Sep 2001 hosking@watson.ibm.com wrote:

> Full_Name: J. R. M. Hosking
> Version: 1.3.0
> OS: Windows 2000
> Submission from: (NULL) (198.81.209.16)
>
>
> R documentation suggests that if a function argument x is omitted,
> missing(x) should return TRUE even if x is subsequently assigned a value.
> This happens in S-plus.  But in R:
>
> > test
> function(x){
> print(missing(x))
> if(missing(x)) x<-0
> print(missing(x))
> invisible()
> }
> > test()
> [1] TRUE
> [1] FALSE
> >
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Sep 20 21:33:18 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 20 Sep 2001 16:33:18 -0400 (EDT)
Subject: [Rd] file permissions check
Message-ID: <Pine.LNX.4.30.0109201625230.29516-100000@bolker.zoo.ufl.edu>


  Why does R CMD check require write permission on all files in the
package directory?
  I'm trying to maintain some of my packages using RCS, which means that
depending on the current state of the system there may be a bunch of
read-only files lying around.  However, unless I'm missing something I
don't see why that ought to be a problem that R detects and stops on.  For
the time being I'm just going to hack around it, but what is the rationale
here?

  Ben Bolker

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Sep 21 05:54:39 2001
From: edd@debian.org (edd@debian.org)
Date: Fri, 21 Sep 2001 06:54:39 +0200 (MET DST)
Subject: [Rd] R 1.3.1 fails 'make check' on arm in the Bessel example (PR#1097)
Message-ID: <200109210454.GAA13172@pubhealth.ku.dk>


Debian tries to build its packages on a variety of platforms.  The arm
platform compiled 0.90.1 (the last Debian release before the Debian package
required an Atlas library, something we no longer require) failed in 'make
check'. The log snippet follows; I traced this to the example(Bessel) code.
 
> matplot(nu, t(outer(xx,nu, besselI)), type = 'l', ylim = c(-50,200),
+         main = expression(paste("Bessel ",I[nu](x)," for fixed ", x,
+                                 ",  as ",f(nu))),
+         xlab = expression(nu))
Error in title(main = main, sub = sub, xlab = xlab, ylab = ylab, ...) :
        Metric information not yet available for this device
        In addition: Warning messages:
        1: Nonfinite axis limits [GScale(nan,nan,1, .); log=0]
        2: relative range of values = 9.0072e+15 * EPS, is small (axis 1).
        3: Nonfinite axis limits [GScale(-inf,inf,2, .); log=0]
        4: relative range of values = 9.0072e+15 * EPS, is small (axis 2).
        Execution halted

Casual inspection suggests that GScale(nan,nan,1, .) is probably
incorrect. Now, src/nmath/bessel* provide the Bessel functions but does this
reflect a potential libc bug in IEEE handling?

I have also asked on the debian-arm mailing list, but no result so far. I
have some access to an arm box and could compile small test cases if that
helped. 

Dirk 
 
--please do not edit the information below--
 
Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status =
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R
 
Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-- 
Better to have an approximate answer to the right question 
than a precise answer to the wrong question. -- John Tukey

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Fri Sep 21 06:15:03 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Fri, 21 Sep 2001 07:15:03 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200109210515.f8L5F3N10020@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400
* PR# 1081 *
Subject: problems installing R on Solaris 2.8 machine
From: Paivio Pollari <pollari@sun3.oulu.fi>
Date: Fri, 31 Aug 2001 08:54:23 +0300 (EET DST)
* PR# 1093 *
Subject: Solution to (well known) problem with Rdconv.pm on Sun Solaris
From: hb@maths.lth.se
Date: Sat, 15 Sep 2001 14:23:02 +0200 (MET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1052 *
Subject:  Inconsistent behaviour of is.vector? 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 14 Aug 2001 09:04:57 +0100
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068

Directory:  Macintosh

none

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
* PR# 1057 *
Subject: crt1.o skipped at configure time ?
From: laurent@cbs.dtu.dk
Date: Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
* PR# 1062 *
Subject: system.file("",package)
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Sun, 19 Aug 2001 16:01:57 -0700 (PDT)
* PR# 1084 *
Subject: Install problems R 1.3.1 on HP-UX
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Sun, 2 Sep 2001 15:07:41 +0200 (CEST)
* PR# 1089 *
Subject: Debian Woody r-base depends on blas2
From: michael_odonnell@acm.org
Date: Sat, 8 Sep 2001 20:25:32 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1094 *
Subject: lab does not work
From: puetsch@bigfoot.de
Date: Mon, 17 Sep 2001 12:53:25 +0200 (MET DST)
* PR# 1095 *
Subject:  Bizarre clipping with abline and points 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 19 Sep 2001 14:45:52 +0100
* PR# 1096 *
Subject: missing()
From: hosking@watson.ibm.com
Date: Wed, 19 Sep 2001 16:38:52 +0200 (MET DST)
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Sep 21 15:32:47 2001
From: edd@debian.org (edd@debian.org)
Date: Fri, 21 Sep 2001 16:32:47 +0200 (MET DST)
Subject: [Rd] (PR#1089) Can be closed
Message-ID: <200109211432.QAA21643@pubhealth.ku.dk>


I replied to Michael (on the list) explaining that the Depends: on blas2 was
"virtual", ie can be satisfied by either blas1 or atlas2. The bug report
probably belonged into the Debian bug archive anyway...

This can be closed.

Dirk

-- 
Three out of two people have difficulties with fractions.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Mon Sep 24 09:46:29 2001
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Mon, 24 Sep 2001 10:46:29 +0200 (MET DST)
Subject: [Rd] Trailing "/" makes file.exists() return FALSE (PR#1098)
Message-ID: <200109240846.KAA02333@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.3.1
OS: WinMe
Submission from: (NULL) (130.235.2.229)


I found the following bug on WinMe (I call it a bug, since the behavior is
different on WinMe than for instance Sun Solaris):

When calling file.exists() with an existing directory name ending with a "/"
(slash) [R] on WinMe will return FALSE, but when doing the same without the
ending "/" it will give TRUE.

I made a quick work around, but this should be taken care of in the native
code:

file.exists <- function(...) {
  # Remove trailing "/", but keep "C:/", "D:/"...
  files <- gsub("\:/$", "\://", c(...));
  files <- gsub("/$", "", files);
  .Internal(file.exists(files));
}


platform i386-pc-mingw32
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    3.1
year     2001
month    08
day      31
language R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep 24 11:09:43 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 24 Sep 2001 12:09:43 +0200 (MET DST)
Subject: [Rd] Trailing "/" makes file.exists() return FALSE (PR#1098)
Message-ID: <200109241009.MAA03895@pubhealth.ku.dk>

On Mon, 24 Sep 2001 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.3.1
> OS: WinMe
> Submission from: (NULL) (130.235.2.229)
>
>
> I found the following bug on WinMe (I call it a bug, since the behavior is
> different on WinMe than for instance Sun Solaris):
>
> When calling file.exists() with an existing directory name ending with a "/"
> (slash) [R] on WinMe will return FALSE, but when doing the same without the
> ending "/" it will give TRUE.
>
> I made a quick work around, but this should be taken care of in the native
> code:
>
> file.exists <- function(...) {
>   # Remove trailing "/", but keep "C:/", "D:/"...
>   files <- gsub("\:/$", "\://", c(...));
>   files <- gsub("/$", "", files);
>   .Internal(file.exists(files));
> }


This is not a bug.  A file path ending with "/" is not a file on Windows,
but it is on Solaris.  Next you'll be reporting that file specifications
with drives fail on Solaris: it other words, what is a valid file path is
OS-specific.

You'll find quite a lot of Windows tools reject paths ending in /: for
example the ls in Rtools thinks the directory is non-existent.

Similarly, Solaris accepts // in paths, but Windows does not.

> platform i386-pc-mingw32
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    3.1
> year     2001
> month    08
> day      31
> language R
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Mon Sep 24 12:30:20 2001
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Mon, 24 Sep 2001 13:30:20 +0200 (MET DST)
Subject: [Rd] Trailing "/" makes file.exists() return FALSE (PR#1098)
Message-ID: <200109241130.NAA05354@pubhealth.ku.dk>

I agree to some extend, but I believe a consistent behavior across platforms
is something that should be a goal. Originally I found this problem from a
package (by a group only running WinNT and Solaris) trying to do

   system.file("",package="base")

which should work and give a path according to the help;

Usage:

     system.file(..., package = "base", lib.loc = .lib.loc, pkg, lib)

Arguments:

     ...: character strings, specifying subdirectory and file(s) within
          some package.  The default, none or `""', returns the root of
          the package.  Wildcards are not supported.
...

Doing this on WinMe it gives "". I can't try this on WinNT, but I assume it
works since the group that made the package it using it. I tracked down the
problem to originate in either the .find.package() call or the file.exists()
call done within system.file(). Which one is a matter of taste. Also, I
noticed that system.file(package="base") without the "", gives the wanted
result.

However, I still argue that file.exists() should be robust enough to give
the same answer if the argument is "foo/" or "foo". I don't know about any
filesystem that can have a file and a directory with the same name in the
same directory, so that shouldn't be an issue. Looking at Java, its solution
(java.io) is very robust across platforms. I am always thinking about the
end-user and making their life easier.

Thanks for a great work

Henrik Bengtsson

Dept. of Mathematical Statistics @ Centre for Mathematical Sciences
Lund Institute of Technology/Lund University, Sweden (+2h UTC)
Office: P316, +46 46 222 9611 (phone), +46 46 222 4623 (fax)
hb@maths.lth.se, http://www.maths.lth.se/matstat/staff/hb/


> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: Monday, September 24, 2001 12:10 PM
> To: hb@maths.lth.se
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] Trailing "/" makes file.exists() return FALSE
> (PR#1098)
>
>
> On Mon, 24 Sep 2001 hb@maths.lth.se wrote:
>
> > Full_Name: Henrik Bengtsson
> > Version: 1.3.1
> > OS: WinMe
> > Submission from: (NULL) (130.235.2.229)
> >
> >
> > I found the following bug on WinMe (I call it a bug, since the
> behavior is
> > different on WinMe than for instance Sun Solaris):
> >
> > When calling file.exists() with an existing directory name
> ending with a "/"
> > (slash) [R] on WinMe will return FALSE, but when doing the same
> without the
> > ending "/" it will give TRUE.
> >
> > I made a quick work around, but this should be taken care of in
> the native
> > code:
> >
> > file.exists <- function(...) {
> >   # Remove trailing "/", but keep "C:/", "D:/"...
> >   files <- gsub("\:/$", "\://", c(...));
> >   files <- gsub("/$", "", files);
> >   .Internal(file.exists(files));
> > }
>
>
> This is not a bug.  A file path ending with "/" is not a file on Windows,
> but it is on Solaris.  Next you'll be reporting that file specifications
> with drives fail on Solaris: it other words, what is a valid file path is
> OS-specific.
>
> You'll find quite a lot of Windows tools reject paths ending in /: for
> example the ls in Rtools thinks the directory is non-existent.
>
> Similarly, Solaris accepts // in paths, but Windows does not.
>
> > platform i386-pc-mingw32
> > arch     x86
> > os       Win32
> > system   x86, Win32
> > status
> > major    1
> > minor    3.1
> > year     2001
> > month    08
> > day      31
> > language R
> >
> >
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> > r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
>

--
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep 24 12:50:32 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 24 Sep 2001 13:50:32 +0200 (MET DST)
Subject: [Rd] Trailing "/" makes file.exists() return FALSE (PR#1098)
Message-ID: <200109241150.NAA06388@pubhealth.ku.dk>

On Mon, 24 Sep 2001, Henrik Bengtsson wrote:

> I agree to some extend, but I believe a consistent behavior across platforms
> is something that should be a goal. Originally I found this problem from a

But the underlying OSes are not consistent, and the nature of your `bug'
report is that R is being truthful on each.  Which is the sort of
consistency we want.

> package (by a group only running WinNT and Solaris) trying to do
>
>    system.file("",package="base")
>
> which should work and give a path according to the help;
>
> Usage:
>
>      system.file(..., package = "base", lib.loc = .lib.loc, pkg, lib)
>
> Arguments:
>
>      ...: character strings, specifying subdirectory and file(s) within
>           some package.  The default, none or `""', returns the root of
>           the package.  Wildcards are not supported.
> ...

That's not correct, and not in the current R sources.  It is a
documentation bug that has already been fixed: search the bug report
database for system.file (it's not talking to me right now).

> Doing this on WinMe it gives "". I can't try this on WinNT, but I assume it
> works since the group that made the package it using it. I tracked down the
> problem to originate in either the .find.package() call or the file.exists()
> call done within system.file(). Which one is a matter of taste. Also, I
> noticed that system.file(package="base") without the "", gives the wanted
> result.
>
> However, I still argue that file.exists() should be robust enough to give
> the same answer if the argument is "foo/" or "foo". I don't know about any
> filesystem that can have a file and a directory with the same name in the
> same directory, so that shouldn't be an issue. Looking at Java, its solution
> (java.io) is very robust across platforms. I am always thinking about the
> end-user and making their life easier.

In which case think what happens when file.exists() incorrectly reports a
file as existing when it does not, and the user then tries to make use of
the file?  Let me stress (since you do seem to have missed the point) that
"foo/" is not a file on Windows, nor a directory on Windows. It does not
exist.  Whatever would be the point of a test that lied to you?


> Thanks for a great work
>
> Henrik Bengtsson
>
> Dept. of Mathematical Statistics @ Centre for Mathematical Sciences
> Lund Institute of Technology/Lund University, Sweden (+2h UTC)
> Office: P316, +46 46 222 9611 (phone), +46 46 222 4623 (fax)
> hb@maths.lth.se, http://www.maths.lth.se/matstat/staff/hb/
>
>
> > -----Original Message-----
> > From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
> > Sent: Monday, September 24, 2001 12:10 PM
> > To: hb@maths.lth.se
> > Cc: R-bugs@biostat.ku.dk
> > Subject: Re: [Rd] Trailing "/" makes file.exists() return FALSE
> > (PR#1098)
> >
> >
> > On Mon, 24 Sep 2001 hb@maths.lth.se wrote:
> >
> > > Full_Name: Henrik Bengtsson
> > > Version: 1.3.1
> > > OS: WinMe
> > > Submission from: (NULL) (130.235.2.229)
> > >
> > >
> > > I found the following bug on WinMe (I call it a bug, since the
> > behavior is
> > > different on WinMe than for instance Sun Solaris):
> > >
> > > When calling file.exists() with an existing directory name
> > ending with a "/"
> > > (slash) [R] on WinMe will return FALSE, but when doing the same
> > without the
> > > ending "/" it will give TRUE.
> > >
> > > I made a quick work around, but this should be taken care of in
> > the native
> > > code:
> > >
> > > file.exists <- function(...) {
> > >   # Remove trailing "/", but keep "C:/", "D:/"...
> > >   files <- gsub("\:/$", "\://", c(...));
> > >   files <- gsub("/$", "", files);
> > >   .Internal(file.exists(files));
> > > }
> >
> >
> > This is not a bug.  A file path ending with "/" is not a file on Windows,
> > but it is on Solaris.  Next you'll be reporting that file specifications
> > with drives fail on Solaris: it other words, what is a valid file path is
> > OS-specific.
> >
> > You'll find quite a lot of Windows tools reject paths ending in /: for
> > example the ls in Rtools thinks the directory is non-existent.
> >
> > Similarly, Solaris accepts // in paths, but Windows does not.
> >
> > > platform i386-pc-mingw32
> > > arch     x86
> > > os       Win32
> > > system   x86, Win32
> > > status
> > > major    1
> > > minor    3.1
> > > year     2001
> > > month    08
> > > day      31
> > > language R
> > >
> > >
> > >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-
> > > r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> >
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
> >
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Sep 24 13:00:06 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 24 Sep 2001 14:00:06 +0200 (MET DST)
Subject: [Rd] cor.test(x,x) sometimes produce NaN (PR#1099)
Message-ID: <200109241200.OAA06607@pubhealth.ku.dk>


This *is* kind of a bug, hence diverted to R-bugs

>>>>> "Peter" == Peter Malewski <peter.malewski@gmx.de> writes:

    Peter> In the code

    >> for(i in 1:100){zz <- rnorm(10);print(cor.test(zz,zz))}

    Peter> sometimes a sqrt(0) occures:
    Peter> 24: NaNs produced in: sqrt(1 - r^2)

I found that the reason is that in (at least one of) those cases,
  r == 1+eps
where eps = .Machine$double.eps
which I think is the real bug, here.

Here is a reproducible example:

 > set.seed(125);z0 <- rnorm(40);zz <- round(rnorm(10),5); r <- cor(zz,zz)
 > r-1
 [1] 2.220446e-16



    Peter> in all the other cases a result like
(for me, not in all, but quite a few cases)

    Peter>   t = Inf, df = 8, p-value = < 2.2e-16

which I think is entirely correct.

    Peter> occurs. Does cor.test need some more "inf" - handling?  I found
    Peter> that calculating a cor-matrix with additional p-values.  
  (last sentence is a bit unclear to MM).

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From owner-r-devel-digest@stat.math.ethz.ch  Mon Sep 24 03:01:11 2001
From: owner-r-devel-digest@stat.math.ethz.ch (R-devel Digest)
Date: Mon, 24 Sep 2001 04:01:11 +0200 (MET DST)
Subject: [Rd] R-devel Digest V1 #314
Message-ID: <200109240201.EAA19795@stat.math.ethz.ch>


R-devel Digest       Monday, September 24 2001       Volume 01 : Number 314



In this issue:

  [Rd] R 1.3.1 fails 'make check' on arm in the Bessel example (PR#1097)
  [Rd] Bug list summary (automatic post)
  [Rd] (PR#1089) Can be closed

See the end of the digest for information about r-devel-digest

----------------------------------------------------------------------

Date: Fri, 21 Sep 2001 06:54:39 +0200 (MET DST)
From: edd@debian.org
Subject: [Rd] R 1.3.1 fails 'make check' on arm in the Bessel example (PR#1097)

Debian tries to build its packages on a variety of platforms.  The arm
platform compiled 0.90.1 (the last Debian release before the Debian package
required an Atlas library, something we no longer require) failed in 'make
check'. The log snippet follows; I traced this to the example(Bessel) code.
 
> matplot(nu, t(outer(xx,nu, besselI)), type = 'l', ylim = c(-50,200),
+         main = expression(paste("Bessel ",I[nu](x)," for fixed ", x,
+                                 ",  as ",f(nu))),
+         xlab = expression(nu))
Error in title(main = main, sub = sub, xlab = xlab, ylab = ylab, ...) :
        Metric information not yet available for this device
        In addition: Warning messages:
        1: Nonfinite axis limits [GScale(nan,nan,1, .); log=0]
        2: relative range of values = 9.0072e+15 * EPS, is small (axis 1).
        3: Nonfinite axis limits [GScale(-inf,inf,2, .); log=0]
        4: relative range of values = 9.0072e+15 * EPS, is small (axis 2).
        Execution halted

Casual inspection suggests that GScale(nan,nan,1, .) is probably
incorrect. Now, src/nmath/bessel* provide the Bessel functions but does this
reflect a potential libc bug in IEEE handling?

I have also asked on the debian-arm mailing list, but no result so far. I
have some access to an arm box and could compile small test cases if that
helped. 

Dirk 
 
- --please do not edit the information below--
 
Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status =
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R
 
Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


- -- 
Better to have an approximate answer to the right question 
than a precise answer to the wrong question. -- John Tukey

- -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

------------------------------

Date: Fri, 21 Sep 2001 07:15:03 +0200
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Subject: [Rd] Bug list summary (automatic post)

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
- --The warning is standard S and R behaviour.
- --Probably xyplot needs to avoid it (by unclassing?)
* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
- --confirmed on Windows and Solaris.
- --Seems that file is not in the expected format
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
- --change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
- --The persp algorithm does not apply the occlusion rules to the frame, 
- --which is always plotted first. 
- --A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
- --This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
- --Suggested fix is incorporated in 1.2.2.
- --
- --There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
- --To see the problem try:  par(cex=.5); mtext("hi")
- --Paul thinks the right fix is to change the argument list for mtext so that
- --cex=par(cex) by default rather than cex=NA by default (plus corresponding
- --internal changes to  do_mtext in plot.c).
- --This needs to be done very carefully because (i) the change suggested above 
- --mayhave side-effects in many other pieces of interpreted code 
- --(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
- --and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
- --mtext is unscaled by default.  It is not clear if this should
- --use the par("cex") setting or an inline cex setting such as cex.axis.
- --It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
- --Neither of the proposed changes actually works in sufficient generality.
- --
- --The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
- --the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
- --Still there. Suggested fix included in followups, but we didn't get around to
- --try it in time for 1.2.3.
- --
- --Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
- --xaxp before xlog, and the new value of xaxp may only be valid under the new
- --value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400
* PR# 1081 *
Subject: problems installing R on Solaris 2.8 machine
From: Paivio Pollari <pollari@sun3.oulu.fi>
Date: Fri, 31 Aug 2001 08:54:23 +0300 (EET DST)
* PR# 1093 *
Subject: Solution to (well known) problem with Rdconv.pm on Sun Solaris
From: hb@maths.lth.se
Date: Sat, 15 Sep 2001 14:23:02 +0200 (MET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
- --status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1052 *
Subject:  Inconsistent behaviour of is.vector? 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 14 Aug 2001 09:04:57 +0100
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
- --see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
- --part of PR#1073

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
- --see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
- --part of PR#1068

Directory:  Macintosh

none

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
- --Builder needs to avoid -ldnet in distributed binaries..
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
- --Only reported on SGI, solved by removing optimization.
- --Needs debugging there.
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
- --problem with symbol names only on Mandrake 8.0, not 7.2
- --needs reply to follow-up
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
* PR# 1057 *
Subject: crt1.o skipped at configure time ?
From: laurent@cbs.dtu.dk
Date: Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
* PR# 1062 *
Subject: system.file("",package)
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Sun, 19 Aug 2001 16:01:57 -0700 (PDT)
* PR# 1084 *
Subject: Install problems R 1.3.1 on HP-UX
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Sun, 2 Sep 2001 15:07:41 +0200 (CEST)
* PR# 1089 *
Subject: Debian Woody r-base depends on blas2
From: michael_odonnell@acm.org
Date: Sat, 8 Sep 2001 20:25:32 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1094 *
Subject: lab does not work
From: puetsch@bigfoot.de
Date: Mon, 17 Sep 2001 12:53:25 +0200 (MET DST)
* PR# 1095 *
Subject:  Bizarre clipping with abline and points 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 19 Sep 2001 14:45:52 +0100
* PR# 1096 *
Subject: missing()
From: hosking@watson.ibm.com
Date: Wed, 19 Sep 2001 16:38:52 +0200 (MET DST)
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
- -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

------------------------------

Date: Fri, 21 Sep 2001 16:32:47 +0200 (MET DST)
From: edd@debian.org
Subject: [Rd] (PR#1089) Can be closed

I replied to Michael (on the list) explaining that the Depends: on blas2 was
"virtual", ie can be satisfied by either blas1 or atlas2. The bug report
probably belonged into the Debian bug archive anyway...

This can be closed.

Dirk

- -- 
Three out of two people have difficulties with fractions.

- -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

------------------------------

End of R-devel Digest V1 #314
*****************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
DIGEST of R-devel -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !) To: R-devel-digest-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Sep 25 01:14:26 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 24 Sep 2001 20:14:26 -0400
Subject: [Rd] col=0
Message-ID: <3BAFCC62.697551CA@bank-banque-canada.ca>

In R-devel I am getting an error with col=0 in a call to box, buried
somewhere in some tests. I have not yet explored far enough to know why
col=0 is being set, but I think it has to do with the box outline being
invisible. col=0 does not seem to be allowed in R-devel, whereas the
code works in R-1.3.1.  This may be R-devel pointing out an error in my
code that was not caught by R-1.3.1 or previously, or it may be a
feature change (although I did not see it in the documentation), or it
may be an error in R-devel. If anyone immediately recognizes the
problem/change I would appreciate tips. Otherwise I will check further
when I have a chance.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Sep 25 07:42:20 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 25 Sep 2001 07:42:20 +0100 (BST)
Subject: [Rd] col=0
In-Reply-To: <3BAFCC62.697551CA@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0109250735480.1129-100000@auk.stats>

On Mon, 24 Sep 2001, Paul Gilbert wrote:

> In R-devel I am getting an error with col=0 in a call to box, buried
> somewhere in some tests. I have not yet explored far enough to know why
> col=0 is being set, but I think it has to do with the box outline being
> invisible. col=0 does not seem to be allowed in R-devel, whereas the
> code works in R-1.3.1.  This may be R-devel pointing out an error in my
> code that was not caught by R-1.3.1 or previously, or it may be a
> feature change (although I did not see it in the documentation), or it
> may be an error in R-devel. If anyone immediately recognizes the
> problem/change I would appreciate tips. Otherwise I will check further
> when I have a chance.

col=0 is background AFAIK, and the default for background has been changed
to be "transparent" for most devices.  That *is* in NEWS.

So plotting with col=0 under that default makes no sense, although I
believe it still works.  The example for box does with col=0 ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Sep 25 08:14:14 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 25 Sep 2001 09:14:14 +0200
Subject: [Rd] Accidental digest sent to R-devel
In-Reply-To: <200109240201.EAA19795@stat.math.ethz.ch>
References: <200109240201.EAA19795@stat.math.ethz.ch>
Message-ID: <15280.11974.865884.406576@gargle.gargle.HOWL>

Several R-devel subscribers have alerted me to the problem,
thank you.

  >> R-devel Digest       Monday, September 24 2001       Volume 01 : Number 314

with the 3 messages

 >> [Rd] R 1.3.1 fails 'make check' on arm in the Bessel example (PR#1097)
 >> [Rd] Bug list summary (automatic post)
 >> [Rd] (PR#1089) Can be closed

seemed to have gone to probably all subscribers of r-devel.
What happened was that a broken E-mail engine  @zerowork.co.uk
got the regular digest message and managed to `post it back to R-devel'.
I'm trying a bit harder to have this not happening again in the future.

Your list maintainer

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue Sep 25 14:52:53 2001
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue, 25 Sep 2001 15:52:53 +0200 (MET DST)
Subject: [Rd] Bug in model.matrix.default (was: [R] predict incosistency ?) (PR#1100)
Message-ID: <200109251352.PAA21550@pubhealth.ku.dk>

On Tue, 25 Sep 2001 12:27:27 GMT, Jorge Luis Ojeda Cabrera
<jojeda@posta.unizar.es> wrote in message
<20010925.12272700@macdesp8.unizar.es>:

>When fitting model 'y~1', the 'lm' response is ok, but it is not possible 
>to get predictions using 'predict'. May be this is a bug, at least i 
>think it is somehow
>inconsistent.

It still appears in 1.3.1, I think it's a bug.  It shows up when you
use the newdata parameter to predict.lm; if you just ask for
predictions without specifying the x value things are fine:

> d _ data.frame(x=runif(5),y=runif(5))
> d1.lm _ lm(y ~ 1, data=d)
>   
> #  This one is okay:
>   
> predict(d1.lm)
       1        2        3        4        5 
0.486269 0.486269 0.486269 0.486269 0.486269 
> 
> # This one triggers the bug:
>   
> predict(d1.lm,newdata=data.frame(x=0.5))
Error in model.matrix.default(delete.response(tt), newdata, contrasts
= object$contrasts,  : 
        subscript out of bounds

There are 3 lines in model.matrix.default that assume that there is at
least one predictor in the model:  they index various things by "-1"
to remove it.  I can't follow what's going on there well enough to fix
it.

Duncan Murdoch

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Windows 98 4.10 (build 1998)  

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Sep 25 14:57:11 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 25 Sep 2001 15:57:11 +0200 (MET DST)
Subject: [Rd] Bug in model.matrix.default (PR#1100)
Message-ID: <200109251357.PAA21622@pubhealth.ku.dk>

There's more to it than that (which was already fixed in R-devel).
The internal code expects there to be columns in the model frame.

I have already fixed this in R-devel (by faking an unused column).


On Tue, 25 Sep 2001 murdoch@stats.uwo.ca wrote:

> On Tue, 25 Sep 2001 12:27:27 GMT, Jorge Luis Ojeda Cabrera
> <jojeda@posta.unizar.es> wrote in message
> <20010925.12272700@macdesp8.unizar.es>:
>
> >When fitting model 'y~1', the 'lm' response is ok, but it is not possible
> >to get predictions using 'predict'. May be this is a bug, at least i
> >think it is somehow
> >inconsistent.
>
> It still appears in 1.3.1, I think it's a bug.  It shows up when you
> use the newdata parameter to predict.lm; if you just ask for
> predictions without specifying the x value things are fine:
>
> > d _ data.frame(x=runif(5),y=runif(5))
> > d1.lm _ lm(y ~ 1, data=d)
> >
> > #  This one is okay:
> >
> > predict(d1.lm)
>        1        2        3        4        5
> 0.486269 0.486269 0.486269 0.486269 0.486269
> >
> > # This one triggers the bug:
> >
> > predict(d1.lm,newdata=data.frame(x=0.5))
> Error in model.matrix.default(delete.response(tt), newdata, contrasts
> = object$contrasts,  :
>         subscript out of bounds
>
> There are 3 lines in model.matrix.default that assume that there is at
> least one predictor in the model:  they index various things by "-1"
> to remove it.  I can't follow what's going on there well enough to fix
> it.
>
> Duncan Murdoch
>
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status =
>  major = 1
>  minor = 3.1
>  year = 2001
>  month = 08
>  day = 31
>  language = R
>
> Windows 98 4.10 (build 1998)
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Sep 27 09:36:50 2001
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 27 Sep 2001 10:36:50 +0200 (MET DST)
Subject: [Rd] ugly in plotmath: frac(1, sqrt(...)) (PR#1101)
Message-ID: <200109270836.KAA10724@pubhealth.ku.dk>


Sometimes (dependent on device and settings of 'cex' and 'lwd') the line
of a square root symbol plottet in the denominator of a fraction appears
to be in or above the line of the fraction.

Examples:


### Choose one of these:
# pdf("test.pdf", height=6, width=8)
# bmp("test.bmp", width=1100, height=800, pointsize=12)
# bitmap("test.tif", type="tiff24nc", width=12, height=9, res=300,
pointsize=12)
# png("test.png", width=1100, height=800, pointsize=12)
# postscript("test.eps", height=6, width=8, horizontal=FALSE)

 par(cex=2, lwd=2)
 plot(1:10)
 text(2, 8, expression(frac(1, sigma[i]*sqrt(2*pi))))
dev.off()


Uwe Ligges


[Happens also on Linux, ...]

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From macq@llnl.gov  Thu Sep 27 17:21:35 2001
From: macq@llnl.gov (macq@llnl.gov)
Date: Thu, 27 Sep 2001 18:21:35 +0200 (MET DST)
Subject: [Rd] Problem with merge() (PR#1102)
Message-ID: <200109271621.SAA18562@pubhealth.ku.dk>

I have encountered a problem with merge() that appears to be a bug.
Here's an example to illustrate it.

>  tmp1 <- data.frame(a=letters[1:3],b=LETTERS[2:4],x=1:3)
>  tmpa <- expand.grid(a=letters[1:4],b=LETTERS[1:4])
>  tmpm.1 <- merge(tmpa,tmp1)
>  tmpm.2 <- merge(tmp1,tmpa)
Error in "names<-.default"(*tmp*, value = vnames) :
         names attribute must be the same length as the vector


I'm using R 1.3.0, and it occurs on both the Macintosh and Solaris versions.
>  version
          _
platform powerpc-apple-darwin1.3.7
arch     powerpc
os       darwin1.3.7
system   powerpc, darwin1.3.7
status
major    1
minor    3.0
year     2001
month    06
day      22
language R
>

>  version
          _
platform sparc-sun-solaris2.7
arch     sparc
os       solaris2.7
system   sparc, solaris2.7
status
major    1
minor    3.0
year     2001
month    06
day      22
language R
>

(I've searched various places, including a list of fixes for v1.3.1, 
the faq, 2001 r-help archives, and haven't found anything about it)

Thanks
-Don
-- 
--------------------------------------
Don MacQueen
Environmental Protection Department
Lawrence Livermore National Laboratory
Livermore, CA, USA
--------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep 27 17:43:58 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 27 Sep 2001 18:43:58 +0200
Subject: [Rd] Problem with merge() (PR#1102)
In-Reply-To: <200109271621.SAA18562@pubhealth.ku.dk>
References: <200109271621.SAA18562@pubhealth.ku.dk>
Message-ID: <15283.22350.315590.177836@gargle.gargle.HOWL>

>>>>> "Don" == Don MacQueen <macq@llnl.gov> writes:

    Don> I have encountered a problem with merge() that appears to be a bug.
    Don> Here's an example to illustrate it.

    >> tmp1 <- data.frame(a=letters[1:3],b=LETTERS[2:4],x=1:3)
    >> tmpa <- expand.grid(a=letters[1:4],b=LETTERS[1:4])
    >> tmpm.1 <- merge(tmpa,tmp1)
    >> tmpm.2 <- merge(tmp1,tmpa)
    Don> Error in "names<-.default"(*tmp*, value = vnames) :
    Don> names attribute must be the same length as the vector


    Don> I'm using R 1.3.0, and it occurs on both the Macintosh and Solaris versions.
    >> version

Bug confirmed, also for the current version of R (1.3.1) and the 
development one.

I'll have a look.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From richmond@saintmarys.edu  Fri Sep 28 02:24:09 2001
From: richmond@saintmarys.edu (richmond@saintmarys.edu)
Date: Fri, 28 Sep 2001 03:24:09 +0200 (MET DST)
Subject: [Rd] Slow output/no break key (PR#1103)
Message-ID: <200109280124.DAA20678@pubhealth.ku.dk>

Full_Name: David Richmond
Version: 1.3.0
OS: MacOS 8.6
Submission from: (NULL) (147.53.3.18)


Forgive me if this isn't the correct forum for these comments but:
text output on the mac is abysmally slow. If I inadvertently ask R to echo a
100x100 matrix, it takes so long to display that I generally have to leave the
room and go do something else for awhile. I've tried to break it, (ctrl-c,
cmd-.) but there doesn't seem to be an implemented break sequence (I noticed
that everything else stops too, my mp3 player stops playing music, etc). I also
notice that the longer the output gets, the slower it goes. 
	

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 28 19:34:54 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 28 Sep 2001 14:34:54 -0400
Subject: [Rd] problems with new checks in R-devel
Message-ID: <3BB4C2CE.66325EAB@bank-banque-canada.ca>

Below are a few problems I have encountered with the new checks
being done in R-devel.

1/ I have two generics, test.equal and test.equal.tframe. The
first checks that two objects are equal while the second checks
if two objects have equal tframes (time frames).  There is no
reason these should have similar arguments but the check seems to
think that test.equal.tframe is a method for test.equal so I get:

* checking generic/method consistency ... WARNING
test.equal:
  function(obj1, obj2, ...)
test.equal.tframe:
  function(tf1, tf2)

2/ I have some generics which may or may not already be defined
(e.g. lag would be defined if library ts is attached) so in my R
code I use

if (!exists("lag")) lag <- function(x, ...) { UseMethod("lag") }

but this results in

Objects with usage in file `.../tframe/man/lag.tframe.Rd' but
missing from code:
[1] "lag"

Is there a better way to approach this in my R code so I don't
get these warnings?

3/  I have a few general introduction  .Rd files which do not
have a usage line and they produce

* checking for undocumented arguments in \usage ... WARNING
Error in parse(file, n, text, prompt) : parse error
Error in checkDocArgs(dir = ".../syskern") :
        cannot source usages in file
.../syskern/man/00Intro.syskern.Rd
Execution halted

Should that be expected or is it a bug?

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep 28 19:44:50 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 28 Sep 2001 19:44:50 +0100 (BST)
Subject: [Rd] problems with new checks in R-devel
In-Reply-To: <3BB4C2CE.66325EAB@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0109281941260.6685-100000@gannet.stats>

On Fri, 28 Sep 2001, Paul Gilbert wrote:

> Below are a few problems I have encountered with the new checks
> being done in R-devel.
>
> 1/ I have two generics, test.equal and test.equal.tframe. The
> first checks that two objects are equal while the second checks
> if two objects have equal tframes (time frames).  There is no
> reason these should have similar arguments but the check seems to
> think that test.equal.tframe is a method for test.equal so I get:
>
> * checking generic/method consistency ... WARNING
> test.equal:
>   function(obj1, obj2, ...)
> test.equal.tframe:
>   function(tf1, tf2)

There is a stop list in checkMethods, but naming one generic to look like
a method of another is surely peverse.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Fri Sep 28 21:17:31 2001
From: andy_liaw@merck.com (Liaw, Andy)
Date: Fri, 28 Sep 2001 16:17:31 -0400
Subject: [Rd] tiny typo in help page for connection
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC82A6@usrymx10.merck.com>

Hi all,

In the help page for connections, shouldn't the line

	"r" or "wt"

really be

	"r" or "rt"

?

Andy

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep 28 21:25:18 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Sep 2001 22:25:18 +0200
Subject: [Rd] tiny typo in help page for connection
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC82A6@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81903DC82A6@usrymx10.merck.com>
Message-ID: <x2elorhxld.fsf@blueberry.kubism.ku.dk>

"Liaw, Andy" <andy_liaw@merck.com> writes:

> Hi all,
> 
> In the help page for connections, shouldn't the line
> 
> 	"r" or "wt"
> 
> really be
> 
> 	"r" or "rt"
> 
> ?

Indeed. While we're at it, isn't the convention that "umbrella-topics"
are capitalized? Should the page not be called Connections?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Fri Sep 28 22:34:18 2001
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Fri, 28 Sep 2001 23:34:18 +0200 (MET DST)
Subject: [Rd] savehistory: Suggestions to a \seealso{} (PR#1104)
Message-ID: <200109282134.XAA01930@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.3.1
OS: WinMe
Submission from: (NULL) (130.235.2.229)


I suggest the following \seealso to be added for savehistory:

\seealso{
  To execute \code{savehistory} automatically when \R quits see \link{.Last} and
\link{.Rprofile}.
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep 29 08:02:18 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 29 Sep 2001 09:02:18 +0200 (MET DST)
Subject: [Rd] savehistory: Suggestions to a \seealso{} (PR#1104)
Message-ID: <200109290702.JAA02974@pubhealth.ku.dk>

On Fri, 28 Sep 2001 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.3.1
> OS: WinMe
> Submission from: (NULL) (130.235.2.229)
>
>
> I suggest the following \seealso to be added for savehistory:
>
> \seealso{
>   To execute \code{savehistory} automatically when \R quits see \link{.Last} and
> \link{.Rprofile}.
> }

I don't see anything relevant on those pages: in particular no details of
using savehistory as your wording suggests.  Given that savehistory is not
available everywhere, it would not be a suitable example for .Last.  I
don't see the point of a link to .Rprofile.

Note that .Last is not necessarily run when R quits, so the method I think
you are advocating is not actually automatic.

Can you explain your suggestion?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep 29 08:56:34 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 29 Sep 2001 09:56:34 +0200
Subject: [Rd] problems with new checks in R-devel
In-Reply-To: <3BB4C2CE.66325EAB@bank-banque-canada.ca>
References: <3BB4C2CE.66325EAB@bank-banque-canada.ca>
Message-ID: <15285.32434.701695.262813@mithrandir.hornik.net>

>>>>> Paul Gilbert writes:

> Below are a few problems I have encountered with the new checks
> being done in R-devel.

> 2/ I have some generics which may or may not already be defined
> (e.g. lag would be defined if library ts is attached) so in my R
> code I use

> if (!exists("lag")) lag <- function(x, ...) { UseMethod("lag") }

> but this results in

> Objects with usage in file `.../tframe/man/lag.tframe.Rd' but
> missing from code:
> [1] "lag"

> Is there a better way to approach this in my R code so I don't
> get these warnings?

Use library(ts) in the package's .First.lib instead.

Or help improving the logic in checkMethods(): currently we only eval
top-level *assignments* in the R code.  Otherwise, we have problems with
code used for creating save images calling e.g. dyn.load.

> 3/  I have a few general introduction  .Rd files which do not
> have a usage line and they produce

> * checking for undocumented arguments in \usage ... WARNING
> Error in parse(file, n, text, prompt) : parse error
> Error in checkDocArgs(dir = ".../syskern") :
>         cannot source usages in file
> .../syskern/man/00Intro.syskern.Rd
> Execution halted

> Should that be expected or is it a bug?

The version of dse I have access to in fact has

  \usage{library("syskern")}

Using the current logic, extract-usage thinks this documents the usage
of function library(), and hence translates to

  library <- function("syskern")

which gives the syntax error.  Using library(syskern) will work but give
a warning about the undocumented argument `syskern'.

In an ideal world we would not have to rely on heuristics but have

  <usage> <s-code>...</s-code> </usage>

alas we do not have that yet.  [More precisely: we would also know what
kind of topic was documented, and exclude documentation for packages
from the function checking.]

With the advent of the new documentation engine nowhere in sight, maybe
we should have a markup like

  \IAmNotSCode{...}

for taking care of the above.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep  1 10:20:01 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 1 Sep 2001 11:20:01 +0200
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <87y9o08lpq.fsf@jeeves.blindglobe.net>
References: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
 <87y9o08lpq.fsf@jeeves.blindglobe.net>
Message-ID: <15248.43073.253841.228346@mithrandir.hornik.net>

>>>>> A J Rossini writes:

>>>>> "BDR" == Brian D Ripley <Prof> writes:
>>> I would also be happier if we did not refer to the variables
>>> explicitly as `columns'.  (This sounds a bit stupid from the
>>> person who wrote write.table and introduced arguments
>>> `row.names' and `col.names'.  Although, at least one of these
>>> was modelled after an existing function).  E.g. something like
>>> 
>>> read.table(......, caseNames, varNames, varClasses, .....)
>>> 
>>> would be nice ...

BDR> The problem is that what is being referred to *is* columns
BDR> and not variables.  If you have row names on the file, the
BDR> numbering is different.  So it matters to use sufficiently
BDR> precise terminology.

> I would tend to agree with Brian.

I do too :-)

> To me, caseNames / varNames sounds a rather bit arrogant, since there
> are a number of other "formats" (contingency tables come to mind) for
> which read.table is one possible way for slurping in the data prior to
> munging it, though I guess one could argue that this is an abuse of
> tools.

I would certain argue along these lines.  read.table() is a bit strange
in the sense that its naming indicates that it is a reader for data in
`tabular' format, but the fact that it creates a data frame indicates
that it makes certain assumptions ...

And of course, you can use read.ftable to read in contingency tables.

-k



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep  1 10:13:49 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 1 Sep 2001 11:13:49 +0200
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
References: <15247.32012.939118.454204@mithrandir.hornik.net>
 <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
Message-ID: <15248.42701.52888.634703@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> On Fri, 31 Aug 2001, Kurt Hornik wrote:
>> > Prof Brian Ripley wrote:
>> >>
>> >> Currently read.table is rather limited in its type conversion.
>> >> The algorithm is
>> >>
>> >> 0) Read as character
>> >> 1) Try to convert to numeric. If that works, quit
>> >> 2) Convert to factor unless !as.is.
>> >>
>> >> I am thinking about adding more flexibility and more classes by the
>> >> following two changes.
>> >>
>> >> A) Anticipating the arrival of classes for all R objects, add an
>> >> argument say `colClasses' that allows the user to specify the desired
>> >> class for every column.  This could default to "auto", or NA if people
>> >> think "auto" might be a relevant class name one day.
>> >>
>> >> The effect would be equivalent to running
>> >>
>> >> data[[i]] <- as(data[[i]], colClasses[i])
>> >>
>> >> instead of
>> >>
>> >> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
>> >>
>> >> except that standard classes such as "numeric", "factor", "logical",
>> >> "character" would be dispatched directly, and argument "dec" would be
>> >> consulted where appropriate.
>> >>
>> >> colClasses = "character" would suppress all conversions, which cannot
>> >> currently be done.
>> 
>> Just a small remark.  I would prefer `NA' to "auto" (or "unknown").  May
>> be too late to change this now :-)

> Anything can be changed up to 1.4.0 release.  In particular, the
> present code will have to be changed unless as() is in base by then.

Ok.  Can I formally propose to use NA then?  (I guess this convention
could be useful in similar situations as well.)

>> I would also be happier if we did not refer to the variables explicitly
>> as `columns'.  (This sounds a bit stupid from the person who wrote
>> write.table and introduced arguments `row.names' and `col.names'.
>> Although, at least one of these was modelled after an existing
>> function).  E.g. something like
>> 
>> read.table(......, caseNames, varNames, varClasses, .....)
>> 
>> would be nice ...

> The problem is that what is being referred to *is* columns and not
> variables.  If you have row names on the file, the numbering is
> different.  So it matters to use sufficiently precise terminology.

Right.  Convinced now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep  1 11:01:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 1 Sep 2001 11:01:05 +0100 (BST)
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <15248.42701.52888.634703@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0109011100100.24001-100000@gannet.stats>

On Sat, 1 Sep 2001, Kurt Hornik wrote:

> >>>>> Prof Brian D Ripley writes:
>
> > On Fri, 31 Aug 2001, Kurt Hornik wrote:
> >> > Prof Brian Ripley wrote:
> >> >>
> >> >> Currently read.table is rather limited in its type conversion.
> >> >> The algorithm is
> >> >>
> >> >> 0) Read as character
> >> >> 1) Try to convert to numeric. If that works, quit
> >> >> 2) Convert to factor unless !as.is.
> >> >>
> >> >> I am thinking about adding more flexibility and more classes by the
> >> >> following two changes.
> >> >>
> >> >> A) Anticipating the arrival of classes for all R objects, add an
> >> >> argument say `colClasses' that allows the user to specify the desired
> >> >> class for every column.  This could default to "auto", or NA if people
> >> >> think "auto" might be a relevant class name one day.
> >> >>
> >> >> The effect would be equivalent to running
> >> >>
> >> >> data[[i]] <- as(data[[i]], colClasses[i])
> >> >>
> >> >> instead of
> >> >>
> >> >> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
> >> >>
> >> >> except that standard classes such as "numeric", "factor", "logical",
> >> >> "character" would be dispatched directly, and argument "dec" would be
> >> >> consulted where appropriate.
> >> >>
> >> >> colClasses = "character" would suppress all conversions, which cannot
> >> >> currently be done.
> >>
> >> Just a small remark.  I would prefer `NA' to "auto" (or "unknown").  May
> >> be too late to change this now :-)
>
> > Anything can be changed up to 1.4.0 release.  In particular, the
> > present code will have to be changed unless as() is in base by then.
>
> Ok.  Can I formally propose to use NA then?  (I guess this convention
> could be useful in similar situations as well.)

Already done.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Sat Sep  1 19:30:52 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Sat, 1 Sep 2001 14:30:52 -0400
Subject: [Rd] RE: [R] GUI support from R
Message-ID: <5429125E11E4D411AF7300805FE603A8014CED7F@groexmbcr02.pfizer.com>

Hi Duncan,

I've been looking around at GUI toolkits to use with Python (and by
extension R). I initially tried Tk, but was disappointed because there is no
consistent set of high level widgets.  I've subsequently done some looking
at QT, wxWindows, and GTK.  QT is out because I am a *commercial* user, and
I don't want to have a license hassle.  GTK seemed to have a lower level of
functionality than wxWindows and seemed to be less platform independent.
>From what I could see, the on-line documentation to wxWindows was better. In
addition, the wxPython developer has indicated that the wxWindows
development team is very supportive.

I was also very pleased that wxWindows handles printing, and it had a nice
set of high-level widgets as part of the 'base' library.  There seem to be
some high level widgets for GTK, but they are 'add-ons' and seem less well
integrated or supported.  

Also, looking around at the 'embarrassment of riches' among Python GUI
toolkits, I've come to the conclusion that it is better to have *one* GUI
library that is well supported than to have a set of them.  Our community is
really too small to fracture again into different toolkit users.  Perhaps a
single set of high-level bindings would do the trick, but I worry that not
enough functionality would be available at that level of abstraction.

BTW, wxWindows uses GTK as the backend on Unix, so you may still be able to
control gtk-based components that are written in GTK. 

I'm very interested in the GUI issue because I am currently building a GUI
tool that will use R as the computational backend.  It would be really nice
if I could do the GUI building and control directly in R rather than using
Python.  It would make one less language to learn & manage for me and for
other users/developers.

And, I really do need some of the high level widgets and functionality
offered directly by wxWindows, but (as far as I can tell) not by GTK.

-Greg

-----Original Message-----
From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
Sent: Monday, August 27, 2001 11:14 AM
To: Warnes, Gregory R
Cc: 'Duncan Temple Lang'; rossini@u.washington.edu; nychka@cgd.ucar.edu;
r-help@stat.math.ethz.ch
Subject: Re: [R] GUI support from R


Warnes, Gregory R wrote:
> 
> Hey Duncan,
> 
> Can you share with us the reason for selecting GTK?  

Well there are a few basic reasons.

I know less about wxWindow than I do about Gtk.  And there is a lot
less to Gtk than to wxWindows.  So that makes it is easier for me to
think about the bindings. (Also, Gtk is like X, and I spent a fair bit
of time desigining and developing S bindings for X and different
widget sets a long time ago.) The additional features of wxWindows
such as threads, etc. may get in the way in thinking about how Gtk
bindings relate to, Tcl/Tk, Java, and other GUI toolkits.  It would be
nice to have a level of abstraction above these toolkits with the
ability to select one and use the same code for all.

My "hope" is to be able to use Slcc to programmatically generate 
bindings for Gtk. This will be easier given that I know
my way around some of the Gtk code. However, if it works,
applying the same programmatic approach to wxWindows
should give us 80% of the grunt work for free and then
require some tinkering later.

Importantly, the applications I have in mind for RGtk are things like
extending Gnumeric with plugins, programming GGobi events and even
add-ons, and generally interacting with many of the Gnome tools
including potentially building a GUI for R to replace the C-level
Gnome code with R scripts, making it more flexible and adaptable.
If we use wxWindows for these Gtk-based applications, we are adding
an extra layer between R and the application that will probably be
confusing.

If we do get to the level of abstraction across toolkits, it won't
matter much which toolkit we use, but will only require bindings to
the ones of interest. The challenge then will be to allow integrating
widgets from different toolkits, and that can be tricky on some
platforms.

So, I am in no way ruling out wxWindows. In many respects, it looks
more appealing - just too big at present. What is its development
energy like relative to Gtk. I am very happy to work on wxWindows
too. There is very little in the RGtk at present.

 D.


> 
> -Greg
> 
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be
privileged. It is intended for the addressee(s) only. Access to this E-mail
by anyone else is unauthorized. If you are not an addressee, any disclosure
or copying of the contents of this E-mail or any action taken (or not taken)
in reliance on it is unauthorized and may be unlawful. If you are not an
addressee, please inform the sender immediately.
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Sun Sep  2 05:38:43 2001
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Sun, 2 Sep 2001 12:38:43 +0800 (GMT-8)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CED7F@groexmbcr02.pfizer.com>
Message-ID: <Pine.GSO.4.21.0109021215050.18721-100000@sun450.comp.nus.edu.sg>


Hi,
One thing to note is that GTk development is in a state of
transition. They are moving steadily towards GTK 2.0 which involves many
changes in Glib, Gdk  and the underlying private functions. James
Hesteridge who is the maintainer of pygtk is actively working on
integrating all the changes into the next version which is why thre hasn't
been a release in a while.

The nice feature of gtk vs wxwindows is that gtk is written entirely in C
while wxWindows is C++. My understanding is that there is byte
incompatibility between different compilers for C++, meaning that C++ code
compiled with VC++ cannot be combined with c++ code compiled with gcc. I
don't know how this affects modules loaded into python.

There is a very complete comparison of GUI toolkits at 
http://www.geocities.com/SiliconValley/Vista/7184/guitool.html

anyway my 2c

Nicholas

 On Sat, 1 Sep 2001, Warnes, Gregory R wrote:

> Hi Duncan,
> 
> I've been looking around at GUI toolkits to use with Python (and by
> extension R). I initially tried Tk, but was disappointed because there is no
> consistent set of high level widgets.  I've subsequently done some looking
> at QT, wxWindows, and GTK.  QT is out because I am a *commercial* user, and
> I don't want to have a license hassle.  GTK seemed to have a lower level of
> functionality than wxWindows and seemed to be less platform independent.
> >From what I could see, the on-line documentation to wxWindows was better. In
> addition, the wxPython developer has indicated that the wxWindows
> development team is very supportive.
> 
> I was also very pleased that wxWindows handles printing, and it had a nice
> set of high-level widgets as part of the 'base' library.  There seem to be
> some high level widgets for GTK, but they are 'add-ons' and seem less well
> integrated or supported.  
> 
> Also, looking around at the 'embarrassment of riches' among Python GUI
> toolkits, I've come to the conclusion that it is better to have *one* GUI
> library that is well supported than to have a set of them.  Our community is
> really too small to fracture again into different toolkit users.  Perhaps a
> single set of high-level bindings would do the trick, but I worry that not
> enough functionality would be available at that level of abstraction.
> 
> BTW, wxWindows uses GTK as the backend on Unix, so you may still be able to
> control gtk-based components that are written in GTK. 
> 
> I'm very interested in the GUI issue because I am currently building a GUI
> tool that will use R as the computational backend.  It would be really nice
> if I could do the GUI building and control directly in R rather than using
> Python.  It would make one less language to learn & manage for me and for
> other users/developers.
> 
> And, I really do need some of the high level widgets and functionality
> offered directly by wxWindows, but (as far as I can tell) not by GTK.
> 
> -Greg
> 
> -----Original Message-----
> From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> Sent: Monday, August 27, 2001 11:14 AM
> To: Warnes, Gregory R
> Cc: 'Duncan Temple Lang'; rossini@u.washington.edu; nychka@cgd.ucar.edu;
> r-help@stat.math.ethz.ch
> Subject: Re: [R] GUI support from R
> 
> 
> Warnes, Gregory R wrote:
> > 
> > Hey Duncan,
> > 
> > Can you share with us the reason for selecting GTK?  
> 
> Well there are a few basic reasons.
> 
> I know less about wxWindow than I do about Gtk.  And there is a lot
> less to Gtk than to wxWindows.  So that makes it is easier for me to
> think about the bindings. (Also, Gtk is like X, and I spent a fair bit
> of time desigining and developing S bindings for X and different
> widget sets a long time ago.) The additional features of wxWindows
> such as threads, etc. may get in the way in thinking about how Gtk
> bindings relate to, Tcl/Tk, Java, and other GUI toolkits.  It would be
> nice to have a level of abstraction above these toolkits with the
> ability to select one and use the same code for all.
> 
> My "hope" is to be able to use Slcc to programmatically generate 
> bindings for Gtk. This will be easier given that I know
> my way around some of the Gtk code. However, if it works,
> applying the same programmatic approach to wxWindows
> should give us 80% of the grunt work for free and then
> require some tinkering later.
> 
> Importantly, the applications I have in mind for RGtk are things like
> extending Gnumeric with plugins, programming GGobi events and even
> add-ons, and generally interacting with many of the Gnome tools
> including potentially building a GUI for R to replace the C-level
> Gnome code with R scripts, making it more flexible and adaptable.
> If we use wxWindows for these Gtk-based applications, we are adding
> an extra layer between R and the application that will probably be
> confusing.
> 
> If we do get to the level of abstraction across toolkits, it won't
> matter much which toolkit we use, but will only require bindings to
> the ones of interest. The challenge then will be to allow integrating
> widgets from different toolkits, and that can be tricky on some
> platforms.
> 
> So, I am in no way ruling out wxWindows. In many respects, it looks
> more appealing - just too big at present. What is its development
> energy like relative to Gtk. I am very happy to work on wxWindows
> too. There is very little in the RGtk at present.
> 
>  D.
> 
> 
> > 
> > -Greg
> > 
> > 
> > LEGAL NOTICE
> > Unless expressly stated otherwise, this message is confidential and may be
> privileged. It is intended for the addressee(s) only. Access to this E-mail
> by anyone else is unauthorized. If you are not an addressee, any disclosure
> or copying of the contents of this E-mail or any action taken (or not taken)
> in reliance on it is unauthorized and may be unlawful. If you are not an
> addressee, please inform the sender immediately.
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-
> > r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> >
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sun Sep  2 06:22:59 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sun, 2 Sep 2001 01:22:59 -0400 (EDT)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.21.0109021215050.18721-100000@sun450.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.10.10109020107370.15143-100000@hsph.harvard.edu>

IMHO the wrong question is being asked here---it is not a matter of
underlying toolkit. We could literally spend the rest of our lives arguing
over toolkit, especially since toolkits come in and out of fashion (X
widget sets come to mind...), stopped being developed and start again
(wxWindows had a period of stagnation if I recall) or undergo radical
changes (gtk as mentioned). Rather I think what really needs to be decided
is a uniform R level mechanism for GUIs, something philisophically to
Java's AWT design. In the AWT case, the underlying aspects of the Java
toolkit representation are implemented using the appropriate system-level
toolkit (Motif on UNIX, Win32/GDI on Windows,
I-Forget-The-Name-of-the-MacOS-Windowing-API and so on). Once that toolkit
has been established then discussions over underlying toolkit become moot
except for people who want to maintain R's GUI facilities on platform
foo. The traditional graphics implementation already does this to some
extent at the "C" level (though I would advocate the abstraction of the
graphics devices into the R level making them packages rather than
integral to the system. In other words, devices would be implemented as a
class derived from a particular virtual base) so it seems reasonable to do
the same thing for GUIs and interactive graphics.

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

On Sun, 2 Sep 2001, Nicholas Lewin-Koh wrote:

> 
> Hi,
> One thing to note is that GTk development is in a state of
> transition. They are moving steadily towards GTK 2.0 which involves many
> changes in Glib, Gdk  and the underlying private functions. James
> Hesteridge who is the maintainer of pygtk is actively working on
> integrating all the changes into the next version which is why thre hasn't
> been a release in a while.
> 
> The nice feature of gtk vs wxwindows is that gtk is written entirely in C
> while wxWindows is C++. My understanding is that there is byte
> incompatibility between different compilers for C++, meaning that C++ code
> compiled with VC++ cannot be combined with c++ code compiled with gcc. I
> don't know how this affects modules loaded into python.
> 
> There is a very complete comparison of GUI toolkits at 
> http://www.geocities.com/SiliconValley/Vista/7184/guitool.html
> 
> anyway my 2c
> 
> Nicholas
> 
>  On Sat, 1 Sep 2001, Warnes, Gregory R wrote:
> 
> > Hi Duncan,
> > 
> > I've been looking around at GUI toolkits to use with Python (and by
> > extension R). I initially tried Tk, but was disappointed because there is no
> > consistent set of high level widgets.  I've subsequently done some looking
> > at QT, wxWindows, and GTK.  QT is out because I am a *commercial* user, and
> > I don't want to have a license hassle.  GTK seemed to have a lower level of
> > functionality than wxWindows and seemed to be less platform independent.
> > >From what I could see, the on-line documentation to wxWindows was better. In
> > addition, the wxPython developer has indicated that the wxWindows
> > development team is very supportive.
> > 
> > I was also very pleased that wxWindows handles printing, and it had a nice
> > set of high-level widgets as part of the 'base' library.  There seem to be
> > some high level widgets for GTK, but they are 'add-ons' and seem less well
> > integrated or supported.  
> > 
> > Also, looking around at the 'embarrassment of riches' among Python GUI
> > toolkits, I've come to the conclusion that it is better to have *one* GUI
> > library that is well supported than to have a set of them.  Our community is
> > really too small to fracture again into different toolkit users.  Perhaps a
> > single set of high-level bindings would do the trick, but I worry that not
> > enough functionality would be available at that level of abstraction.
> > 
> > BTW, wxWindows uses GTK as the backend on Unix, so you may still be able to
> > control gtk-based components that are written in GTK. 
> > 
> > I'm very interested in the GUI issue because I am currently building a GUI
> > tool that will use R as the computational backend.  It would be really nice
> > if I could do the GUI building and control directly in R rather than using
> > Python.  It would make one less language to learn & manage for me and for
> > other users/developers.
> > 
> > And, I really do need some of the high level widgets and functionality
> > offered directly by wxWindows, but (as far as I can tell) not by GTK.
> > 
> > -Greg
> > 
> > -----Original Message-----
> > From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> > Sent: Monday, August 27, 2001 11:14 AM
> > To: Warnes, Gregory R
> > Cc: 'Duncan Temple Lang'; rossini@u.washington.edu; nychka@cgd.ucar.edu;
> > r-help@stat.math.ethz.ch
> > Subject: Re: [R] GUI support from R
> > 
> > 
> > Warnes, Gregory R wrote:
> > > 
> > > Hey Duncan,
> > > 
> > > Can you share with us the reason for selecting GTK?  
> > 
> > Well there are a few basic reasons.
> > 
> > I know less about wxWindow than I do about Gtk.  And there is a lot
> > less to Gtk than to wxWindows.  So that makes it is easier for me to
> > think about the bindings. (Also, Gtk is like X, and I spent a fair bit
> > of time desigining and developing S bindings for X and different
> > widget sets a long time ago.) The additional features of wxWindows
> > such as threads, etc. may get in the way in thinking about how Gtk
> > bindings relate to, Tcl/Tk, Java, and other GUI toolkits.  It would be
> > nice to have a level of abstraction above these toolkits with the
> > ability to select one and use the same code for all.
> > 
> > My "hope" is to be able to use Slcc to programmatically generate 
> > bindings for Gtk. This will be easier given that I know
> > my way around some of the Gtk code. However, if it works,
> > applying the same programmatic approach to wxWindows
> > should give us 80% of the grunt work for free and then
> > require some tinkering later.
> > 
> > Importantly, the applications I have in mind for RGtk are things like
> > extending Gnumeric with plugins, programming GGobi events and even
> > add-ons, and generally interacting with many of the Gnome tools
> > including potentially building a GUI for R to replace the C-level
> > Gnome code with R scripts, making it more flexible and adaptable.
> > If we use wxWindows for these Gtk-based applications, we are adding
> > an extra layer between R and the application that will probably be
> > confusing.
> > 
> > If we do get to the level of abstraction across toolkits, it won't
> > matter much which toolkit we use, but will only require bindings to
> > the ones of interest. The challenge then will be to allow integrating
> > widgets from different toolkits, and that can be tricky on some
> > platforms.
> > 
> > So, I am in no way ruling out wxWindows. In many respects, it looks
> > more appealing - just too big at present. What is its development
> > energy like relative to Gtk. I am very happy to work on wxWindows
> > too. There is very little in the RGtk at present.
> > 
> >  D.
> > 
> > 
> > > 
> > > -Greg
> > > 
> > > 
> > > LEGAL NOTICE
> > > Unless expressly stated otherwise, this message is confidential and may be
> > privileged. It is intended for the addressee(s) only. Access to this E-mail
> > by anyone else is unauthorized. If you are not an addressee, any disclosure
> > or copying of the contents of this E-mail or any action taken (or not taken)
> > in reliance on it is unauthorized and may be unlawful. If you are not an
> > addressee, please inform the sender immediately.
> > >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-
> > > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> > >
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > 
> 
>                  CH3
>                   |
>                   N             Nicholas Lewin-Koh
>                  / \            Dept of Statistics
>            N----C   C==O        Program in Ecology and Evolutionary Biology
>           ||   ||   |           Iowa State University
>           ||   ||   |           Ames, IA 50011
>           CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
>             \  / \ /            nlewin@iastate.edu
>              N    C
>              |   ||             Currently
>             CH3   O             Graphics Lab
>                                 School of Computing
>                                 National University of Singapore
>      The Real Part of Coffee    kohnicho@comp.nus.edu.sg
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Sep  2 07:39:48 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 2 Sep 2001 07:39:48 +0100 (BST)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.10.10109020107370.15143-100000@hsph.harvard.edu>
Message-ID: <Pine.GSO.4.31.0109020731320.9820-100000@auk.stats>

On Sun, 2 Sep 2001, Byron Ellis wrote:

> IMHO the wrong question is being asked here---it is not a matter of
> underlying toolkit. We could literally spend the rest of our lives arguing
> over toolkit, especially since toolkits come in and out of fashion (X
> widget sets come to mind...), stopped being developed and start again
> (wxWindows had a period of stagnation if I recall) or undergo radical
> changes (gtk as mentioned). Rather I think what really needs to be decided
> is a uniform R level mechanism for GUIs, something philisophically to
> Java's AWT design. In the AWT case, the underlying aspects of the Java
> toolkit representation are implemented using the appropriate system-level
> toolkit (Motif on UNIX, Win32/GDI on Windows,
> I-Forget-The-Name-of-the-MacOS-Windowing-API and so on). Once that toolkit

That's how Tcl/Tk does it.

> has been established then discussions over underlying toolkit become moot
> except for people who want to maintain R's GUI facilities on platform
> foo.

Rather, it becomes moot for people who want such facilities.  I suspect
noone wants to maintain them ....  That Tcl/Tk needs a different low-level
interface on different platforms is a pain: the original R tcltk package
code runs on a call that only exists in Tcl/Tk for Unix.  If that were to
happen again, I am pretty sure that Tcl/Tk would be omitted from the
Windows port of R (and I believe it is from the Classic Mac port).

[...]

Event-loop integration is a major issue with GUIs, and it's a toolkit
issue.  R is designed to run an event loop and wants to be in control.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Sun Sep  2 13:05:16 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 02 Sep 2001 05:05:16 -0700
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.10.10109020107370.15143-100000@hsph.harvard.edu>
References: <Pine.GSO.4.10.10109020107370.15143-100000@hsph.harvard.edu>
Message-ID: <87zo8du7b7.fsf@jeeves.blindglobe.net>

>>>>> "BE" == Byron Ellis <bellis@hsph.harvard.edu> writes:

    BE> IMHO the wrong question is being asked here---it is not a
    BE> matter of underlying toolkit. We could literally spend the
    BE> rest of our lives arguing over toolkit, especially since
    BE> toolkits come in and out of fashion (X widget sets come to
    BE> mind...), stopped being developed and start again (wxWindows
    BE> had a period of stagnation if I recall) or undergo radical
    BE> changes (gtk as mentioned). Rather I think what really needs
    BE> to be decided is a uniform R level mechanism for GUIs,

I think the primary problem is writing it in the first place.  

There is access to AWT and Swing, via RSJava (when it's feeling
stable... sigh...).

There is the tcltk toolkit, which we are having some success using,
actually (menu's, etc).

You can argue about the merits of anything all you want, but he who
codes first wins in this game.  And is stuck with having to maintain
it, if they plan on anyone else using it...

I think this is the big issue.  No one has much time, and this is a
big time sink, especially with multiple moving targets (R vs "threaded
R", event loops; various GUI API changes; supporting libraries; lots
of other critical issues which are obvious enough not to state...).  I
think it'll take a hacker with Brian or Duncan's skills to craft it
fast enough to not let it get stuck.

While a uniform API would be nice for R, to attach to any toolkit, I
suspect it is non trivial.  There are movements/projects like "AnyGUI"
for Python, which are attempting to be flexible over a choice of
toolkits from a single set of code.  However, it seems that every GUI
API has its own unique twists on layout, etc, that make this
seriously non-trivial.

Best just to pick one and go...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sun Sep  2 14:07:53 2001
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Sun, 2 Sep 2001 15:07:53 +0200 (MET DST)
Subject: [Rd] Install problems R 1.3.1 on HP-UX (PR#1084)
Message-ID: <200109021307.PAA14257@pubhealth.ku.dk>


Hi,

I installed R 1.3.1 on HP-UX. This caused me quite some
problems. These problems did not occur with the previous version
I installed, which was R version 1.2.3.

First, the result of configure:

    R is now configured for hppa-hp-hpux10.20

      Source directory:          .
      Installation directory:    /opt_local/opt/R
      C compiler:                cc  -D_HPUX_SOURCE +DA1.1 +DS1.1 -Wp,-H16000 -I/opt_local/opt/readline/include -I/opt_local/opt/tk/include -I/opt_local/opt/tcl/include -I/opt_local/opt/jpeg6/include -I/opt_local/opt/png/include -I/opt_local/opt/ncurses/include -I/opt_local/opt/zlib/include -I/users1/kleiweg/R-1.3.1-source -L/opt_local/opt/readline/lib -L/opt_local/opt/tk/lib -L/opt_local/opt/tcl/lib -L/opt_local/opt/jpeg6/lib -L/opt_local/opt/png/lib -L/opt_local/opt/ncurses/lib -L/opt_local/opt/zlib/lib -L/users1/kleiweg/R-1.3.1-source -Aa
      C++ compiler:              c++  -g -O2
      FORTRAN compiler:          fort77  +DA1.1 +DS1.1

      X11 support:               yes
      Gnome support:             no
      Tcl/Tk support:            yes

      R profiling support:       yes
      R as a shared library:     no

The first make halts on src/main/Rdynload.c, the compiler can't
find the variable CFunTab. I solved this by adding the following
lines after #include "R_ext/Rdynpriv.h" :

    #include "../unix/FFDecl.h"
    static CFunTabEntry CFunTab[] =
    {
    #include "../unix/FFTab.h"
      {NULL, NULL}
    };

Now, make runs a bit further, until it stops with the following
errors:

	    cc -Wl,-E  -o R.bin  CConverters.o  Rdynload.o RNG.o  apply.o arithmetic.o array.o attrib.o  bind.o builtin.o  character.o coerce.o colors.o complex.o connections.o context.o  cov.o cum.o  dcf.o datetime.o debug.o devPS.o devPicTeX.o deparse.o deriv.o  devices.o dotcode.o dstruct.o duplicate.o  envir.o errors.o eval.o  format.o fourier.o  gram.o gram-ex.o graphics.o  internet.o iosupport.o  lapack.o list.o logic.o  main.o match.o memory.o model.o  names.o  objects.o optim.o optimize.o options.o  par.o paste.o platform.o  plot.o plot3d.o plotmath.o  print.o printarray.o printvector.o printutils.o  random.o regex.o relop.o  saveload.o scan.o seq.o size.o sort.o source.o split.o  subassign.o subscript.o subset.o summary.o  unique.o util.o  version.o vfonts.o xxxpr.o ../unix/libunix.a ../appl/libappl.a ../nmath/libnmath.a   -lcl -lisamstub -ldld -L/opt_local/opt/readline/lib -L/opt_local/opt/tk/lib -L/opt_local/opt/tcl/lib -L/opt_local/opt/jpeg6/lib -L/opt_local/opt/png/lib -!
!
L/opt_local/opt/ncurses/lib -L/opt_local/opt/zlib/lib -L/users1/kleiweg/R-1.3.1-source  -lz -lreadline -lncurses -lm
    /usr/ccs/bin/ld: Duplicate symbol "dlerror" in files ../unix/libunix.a(gnome.o) and ../unix/libunix.a(X11.o)
    /usr/ccs/bin/ld: Duplicate symbol "dlopen" in files ../unix/libunix.a(gnome.o) and ../unix/libunix.a(X11.o)
    /usr/ccs/bin/ld: Duplicate symbol "dlclose" in files ../unix/libunix.a(gnome.o) and ../unix/libunix.a(X11.o)
    /usr/ccs/bin/ld: Duplicate symbol "dlsym" in files ../unix/libunix.a(gnome.o) and ../unix/libunix.a(X11.o)
    /usr/ccs/bin/ld: Unsatisfied symbols:
       moduleCdynload (code)
    /usr/ccs/bin/ld: Found 4 duplicate symbol(s)
    *** Error exit code 1

Why is there an object gnome.o when I don't have Gnome support?

I had to make some more changes to several files before all
compiled OK.

In src/main/Rdynload.c I changed this:

    #ifdef HAVE_DLFCN_H

into this:

    #ifndef HAVE_DLFCN_H

In src/unix/hpdlfcn.c I removed the following functions:
    dlerror
    dlopen
    dlclose
    dlsym

Now make runs without errors. After make install I had to do
chmod +x R.bin.

R seems the work fine now.



Version:
 platform = hppa-hp-hpux10.20
 arch = hppa
 os = hpux10.20
 system = hppa, hpux10.20
 status =
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Sep  2 17:38:40 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Sep 2001 18:38:40 +0200
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.31.0109020731320.9820-100000@auk.stats>
References: <Pine.GSO.4.31.0109020731320.9820-100000@auk.stats>
Message-ID: <x2elppeeen.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> Rather, it becomes moot for people who want such facilities.  I suspect
> noone wants to maintain them ....  That Tcl/Tk needs a different low-level
> interface on different platforms is a pain: the original R tcltk package
> code runs on a call that only exists in Tcl/Tk for Unix.  If that were to
> happen again, I am pretty sure that Tcl/Tk would be omitted from the
> Windows port of R (and I believe it is from the Classic Mac port).
> 
> [...]
> 
> Event-loop integration is a major issue with GUIs, and it's a toolkit
> issue.  R is designed to run an event loop and wants to be in control.

Actually, the Tcl crowd has been expending some effort on this issue,
and have seemingly come up with a notification structure that is
*designed* to interact with foreign event loops. 

Last I looked, the Tcl sources for the event loops on the three
platforms (X11/Win32/Mac) seemed to be essentially sample code that
could be grafted on to an existing event loop. That didn't look like
particularly simple reading though, and that was even before Tcl/Tk
had threads... (in the version that shipped with RedHat, that is).

I've been wanting to sink my teeth into this stuff for quite a while,
because it annoys me that I understand so little of it and because I
suspect that the issues are really independent of the choice of GUI
and there is a lot to be learned. 

I rather strongly expect that the current Tcl/Tk interface could be
substantially improved in the process. I'm pretty sure that the
PolledEvents method we use now is plainly wrong -- it certainly is on
Unix, where we had an event-handler solution in place originally, but
that didn't work on Windows, at least not in that way. I sort of
suspect that R itself might benefit by a similar centralization of
event handling as Tcl already has, but that might be a pipe dream.

Also, lack of understanding of the work of the Tcl'ers is probably the
main reason that we don't have it on Classic Mac. The input handler
hack that we use on X11 and Windows doesn't seem to port to that
platform (right, Stefano?). Whether this is important for long enough
befor OS X makes the issue moot is of course debatable.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sun Sep  2 18:54:31 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sun, 2 Sep 2001 13:54:31 -0400 (EDT)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <87zo8du7b7.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.GSO.4.10.10109021338480.17421-100000@hsph.harvard.edu>

On 2 Sep 2001, A.J. Rossini wrote:

> >>>>> "BE" == Byron Ellis <bellis@hsph.harvard.edu> writes:
> 
>     BE> IMHO the wrong question is being asked here---it is not a
>     BE> matter of underlying toolkit. We could literally spend the
>     BE> rest of our lives arguing over toolkit, especially since
>     BE> toolkits come in and out of fashion (X widget sets come to
>     BE> mind...), stopped being developed and start again (wxWindows
>     BE> had a period of stagnation if I recall) or undergo radical
>     BE> changes (gtk as mentioned). Rather I think what really needs
>     BE> to be decided is a uniform R level mechanism for GUIs,
> 
> I think the primary problem is writing it in the first place.  
> 
> There is access to AWT and Swing, via RSJava (when it's feeling
> stable... sigh...).

Right, but this relies on not only an outside package, but another
language entirely. A hefty one at that.

> 
> There is the tcltk toolkit, which we are having some success using,
> actually (menu's, etc).
> 
> You can argue about the merits of anything all you want, but he who
> codes first wins in this game.  And is stuck with having to maintain
> it, if they plan on anyone else using it...
> 
> I think this is the big issue.  No one has much time, and this is a
> big time sink, especially with multiple moving targets (R vs "threaded
> R", event loops; various GUI API changes; supporting libraries; lots
> of other critical issues which are obvious enough not to state...).  I
> think it'll take a hacker with Brian or Duncan's skills to craft it
> fast enough to not let it get stuck.

Ok, you're giving more reasons to develop a binding that is robust enough
to survive changes--not a reason to get stuck with package foo version
0.whatever that only works properly on a few platforms.

> 
> While a uniform API would be nice for R, to attach to any toolkit, I
> suspect it is non trivial.  There are movements/projects like "AnyGUI"
> for Python, which are attempting to be flexible over a choice of
> toolkits from a single set of code.  However, it seems that every GUI
> API has its own unique twists on layout, etc, that make this
> seriously non-trivial.

Yes, and every GUI backend has its own twists that are just bad enough to
completely derail things like GTK porting projects let alone the language
bindings. You have in fact hit upon the exact reason why a reasonably
defined binding for the R language would be a good idea: No Matter What
Package You Pick It Will Suck On Some Platform. 

All I'm saying is that before people go haring off on a bunch of bindings
for various graphics APIs (be it GTK, wxWindows, Tk, Win32, OpenGL GUI or
*whatever*) that it might be advantageous to sit down at perhaps plan out
a common set of features that all work in a way that makes sense for *R*
not for Java or C++ or Tcl (AWT,Gtk+,Tk) and then go from there.

> 
> Best just to pick one and go...
> 
> best,
> -tony



Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

	
> 
> -- 
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------- (wednesday/friday is unknown) --------
> FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
> UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sun Sep  2 19:05:06 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sun, 2 Sep 2001 14:05:06 -0400 (EDT)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.31.0109020731320.9820-100000@auk.stats>
Message-ID: <Pine.GSO.4.10.10109021355200.17421-100000@hsph.harvard.edu>

On Sun, 2 Sep 2001, Prof Brian D Ripley wrote:

> On Sun, 2 Sep 2001, Byron Ellis wrote:
> 
> That's how Tcl/Tk does it.

Yup, and AWT and a couple of other packages (Smalltalk too, but Smalltalk
is a strange place :-))

> Rather, it becomes moot for people who want such facilities.  I suspect
> noone wants to maintain them ....  That Tcl/Tk needs a different low-level
> interface on different platforms is a pain: the original R tcltk package
> code runs on a call that only exists in Tcl/Tk for Unix.  If that were to
> happen again, I am pretty sure that Tcl/Tk would be omitted from the
> Windows port of R (and I believe it is from the Classic Mac port).

Thats more an issue of the Tcl/Tk people making a mistake than anything
else. Package maintenance has to happen whether or not a 'generic' GUI
toolkit binding for R is developed. The same thing happens in other
spaces, just look at the Perl database stuff. Once upon a time every
database on the planet had its own unique Perl package. Now they have DBI
and everyone thinks its the best thing since sliced bread. However, DBI
doesn't really *do* very much except define a particular interface
mechanism. I'm saying do the same for the GUI---the implementation work
will be more or less the same and there will have to be a 'toolkit
specific' capability ('cause someone will be unable to live with foo
widget that only exists on platform bar) but it can be done. (For
instance, OpenGL implements an extension mechanism, albeit somewhat
clumsily)

> 
> [...]
> 
> Event-loop integration is a major issue with GUIs, and it's a toolkit
> issue.  R is designed to run an event loop and wants to be in control.

Yup. Thats gonna be a problem with every GUI toolkit since GUI
interactivity is psychologically important. Its also a problem with any
embedding project since they too will want control of the event loop.

> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 


Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Sun Sep  2 22:01:20 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 02 Sep 2001 14:01:20 -0700
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.10.10109021338480.17421-100000@hsph.harvard.edu>
References: <Pine.GSO.4.10.10109021338480.17421-100000@hsph.harvard.edu>
Message-ID: <871ylpxq73.fsf@jeeves.blindglobe.net>

>>>>> "BE" == Byron Ellis <bellis@hsph.harvard.edu> writes:

    BE> All I'm saying is that before people go haring off on a bunch
    BE> of bindings for various graphics APIs (be it GTK, wxWindows,
    BE> Tk, Win32, OpenGL GUI or *whatever*) that it might be
    BE> advantageous to sit down at perhaps plan out a common set of
    BE> features that all work in a way that makes sense for *R* not
    BE> for Java or C++ or Tcl (AWT,Gtk+,Tk) and then go from there.

I'll argue the opposite, actually.  Best to have a bunch of prototypes
around and determine use-cases before deciding a particular something
is "the REAL deal".

Until you have a bunch of prototype applications sitting on the
prototype bindings, it'll be difficult to get it right.

(and yes, I've played with two, so far, Swing bindings via RSJava and
the tcltk ones...).

I suspect that the favorite of anyone will be "whatever they are used
to".  

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wb@vestein.arb-phys.uni-dortmund.de  Mon Sep  3 10:34:19 2001
From: wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke)
Date: 3 Sep 2001 11:34:19 +0200
Subject: [Rd] R-1.3.0-1.3.1.diff does not patch correctly
Message-ID: <9mviqr$1bh3$1@yorikke.arb-phys.uni-dortmund.de>

Subj. says it. The patch contains several lines complaining about "No newline".
After removing these the patch was applicable.
-- 
Dipl.-Math. Wilhelm Bernhard Kloke
Institut fuer Arbeitsphysiologie an der Universitaet Dortmund
Ardeystrasse 67, D-44139 Dortmund, Tel. 0231-1084-257
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep  3 10:58:39 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Sep 2001 11:58:39 +0200
Subject: [Rd] R-1.3.0-1.3.1.diff does not patch correctly
In-Reply-To: <9mviqr$1bh3$1@yorikke.arb-phys.uni-dortmund.de>
References: <9mviqr$1bh3$1@yorikke.arb-phys.uni-dortmund.de>
Message-ID: <x2elpozjcg.fsf@blueberry.kubism.ku.dk>

wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke) writes:

> Subj. says it. The patch contains several lines complaining about "No newline".
> After removing these the patch was applicable.

Odd. This worked cleanly when I tried it on RedHat 7.1. What version
of patch is this?

The offending lines are flagged with a \ in col.1, which is
undocumented in the info file for diff, but obviously discernible from
ordinary unidiff lines (which have either space, + , or - ). So I
suspect that a recent "patch" just treats that as a comment.

Looks like the problem could be difficult to avoid (except by ensuring
that we don't have any files without terminal newlines) since I see no
diff option controlling the behaviour.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep  3 11:13:06 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Sep 2001 12:13:06 +0200
Subject: [Rd] R-1.3.0-1.3.1.diff does not patch correctly
In-Reply-To: <x2elpozjcg.fsf@blueberry.kubism.ku.dk>
References: <9mviqr$1bh3$1@yorikke.arb-phys.uni-dortmund.de>
 <x2elpozjcg.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ae0cziod.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke) writes:
> 
> > Subj. says it. The patch contains several lines complaining about "No newline".
> > After removing these the patch was applicable.
> 
> Odd. This worked cleanly when I tried it on RedHat 7.1. What version
> of patch is this?
> 
> The offending lines are flagged with a \ in col.1, which is
> undocumented in the info file for diff, but obviously discernible from
> ordinary unidiff lines (which have either space, + , or - ). So I
> suspect that a recent "patch" just treats that as a comment.
> 
> Looks like the problem could be difficult to avoid (except by ensuring
> that we don't have any files without terminal newlines) since I see no
> diff option controlling the behaviour.

BTW: The offending files are these:

+++ R-1.3.1/src/library/base/man/Rhome.Rd       Sun Aug  5 02:00:39 2001
+++ R-1.3.1/src/library/base/man/kronecker.Rd   Sun Aug  5 02:00:39 2001
+++ R-1.3.1/src/library/base/man/manova.Rd      Sun Aug  5 02:00:39 2001
+++ R-1.3.1/src/library/mva/man/Harman74.cor.Rd Wed Aug  8 06:32:40 2001
+++ R-1.3.1/src/macintosh/FF_CREATE     Sun Aug 19 08:55:53 2001
+++ R-1.3.1/src/macintosh/GETVERSION    Sun Aug 19 08:56:27 2001
+++ R-1.3.1/src/macintosh/ReadMe.MPW    Sun Aug 19 08:04:58 2001

The ones in the .Rd files should be avoidable. I'm less sure about the
Mac files.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep  3 11:22:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 3 Sep 2001 11:22:17 +0100 (BST)
Subject: [Rd] R-1.3.0-1.3.1.diff does not patch correctly
In-Reply-To: <x2ae0cziod.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0109031120520.7956-100000@gannet.stats.ox.ac.uk>

On 3 Sep 2001, Peter Dalgaard BSA wrote:

> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
>
> > wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke) writes:
> >
> > > Subj. says it. The patch contains several lines complaining about "No newline".
> > > After removing these the patch was applicable.
> >
> > Odd. This worked cleanly when I tried it on RedHat 7.1. What version
> > of patch is this?
> >
> > The offending lines are flagged with a \ in col.1, which is
> > undocumented in the info file for diff, but obviously discernible from
> > ordinary unidiff lines (which have either space, + , or - ). So I
> > suspect that a recent "patch" just treats that as a comment.
> >
> > Looks like the problem could be difficult to avoid (except by ensuring
> > that we don't have any files without terminal newlines) since I see no
> > diff option controlling the behaviour.
>
> BTW: The offending files are these:
>
> +++ R-1.3.1/src/library/base/man/Rhome.Rd       Sun Aug  5 02:00:39 2001
> +++ R-1.3.1/src/library/base/man/kronecker.Rd   Sun Aug  5 02:00:39 2001
> +++ R-1.3.1/src/library/base/man/manova.Rd      Sun Aug  5 02:00:39 2001
> +++ R-1.3.1/src/library/mva/man/Harman74.cor.Rd Wed Aug  8 06:32:40 2001
> +++ R-1.3.1/src/macintosh/FF_CREATE     Sun Aug 19 08:55:53 2001
> +++ R-1.3.1/src/macintosh/GETVERSION    Sun Aug 19 08:56:27 2001
> +++ R-1.3.1/src/macintosh/ReadMe.MPW    Sun Aug 19 08:04:58 2001
>
> The ones in the .Rd files should be avoidable. I'm less sure about the
> Mac files.

They already are avoided in the R-devel tree.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Mon Sep  3 16:14:00 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Mon, 3 Sep 2001 10:14:00 -0500
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <871ylpxq73.fsf@jeeves.blindglobe.net>; from rossini@blindglobe.net on Sun, Sep 02, 2001 at 02:01:20PM -0700
References: <Pine.GSO.4.10.10109021338480.17421-100000@hsph.harvard.edu> <871ylpxq73.fsf@jeeves.blindglobe.net>
Message-ID: <20010903101400.C31934@nokomis.stat.umn.edu>

On Sun, Sep 02, 2001 at 02:01:20PM -0700, A.J. Rossini wrote:
> >>>>> "BE" == Byron Ellis <bellis@hsph.harvard.edu> writes:
> 
>     BE> All I'm saying is that before people go haring off on a bunch
>     BE> of bindings for various graphics APIs (be it GTK, wxWindows,
>     BE> Tk, Win32, OpenGL GUI or *whatever*) that it might be
>     BE> advantageous to sit down at perhaps plan out a common set of
>     BE> features that all work in a way that makes sense for *R* not
>     BE> for Java or C++ or Tcl (AWT,Gtk+,Tk) and then go from there.
> 
> I'll argue the opposite, actually.  Best to have a bunch of prototypes
> around and determine use-cases before deciding a particular something
> is "the REAL deal".
> 
> Until you have a bunch of prototype applications sitting on the
> prototype bindings, it'll be difficult to get it right.
> 
> (and yes, I've played with two, so far, Swing bindings via RSJava and
> the tcltk ones...).
> 
> I suspect that the favorite of anyone will be "whatever they are used
> to".  
> 
> best,
> -tony
> 

I think tony is right.  Ideally, we want eventually to have a
hight-level, toolkit and OS independent interface, if that is
possible.  It may turn out that some things are too difficult to make
work cleanly across systems without going to a common denominator that
is too low; in those cases we would like a clean way of describing the
differences.  Unfortunately it isn;t possible to build such things in
the abstract--you need some prototypes to gain experience.

Also, one thing I have learned in may years of experience with this
sort of thing in xlispstat is that for a language like R any good GUI
system requires a proper mechanism for managing concurrency, in other
words: concurrent thread support (this is one thing Java definitely
got right).  Without that you end up either reinventing a significant
fraction of a threading system or with nasty race conditions, or both.
Threading for R is being worked on, but it is going to be a while
until it is ready to go.  It makes sense to experiment with a variety
of GUI designs in the interim and then look at tying things together
when all the pieces are in place.

One area where we can help is by separating the drawing and the event
management in the R graphics devices so that it is possible for R to
use its own drawing code for putting ink on paper but let a toolkit
take over the event management (in the long run I think this may be
more viable cross platform than trying to fight the multiple event
loops battle).  This sort of thing is useful in other contexts as
well, in particular in embedding, and it is being worked on.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep  3 17:31:54 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Sep 2001 18:31:54 +0200
Subject: [Rd] Imitation is the sincerest form of flattery
Message-ID: <x2ofosxmkl.fsf@blueberry.kubism.ku.dk>


This must count as kudos to Kurt and Fritz, as well as others who have
been taking part in the development of the R package format:

http://tcl.activestate.com/cgi-bin/tct/tip/55.html

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Sep  5 10:33:34 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 5 Sep 2001 11:33:34 +0200
Subject: [Rd] spam on R lists --> refuse mail??
Message-ID: <15253.61806.862066.186883@gargle.gargle.HOWL>

 We get caught occasionally, and we all receive spam;
sorry for the last one (on R-help).  Of course, there will never be a 100%
sure prevention... 

Question is what should happen when mail from R-help to an adressee 
is refused with the following message : At least I won't be able to easily send
e-mail to them {and am not willing to use a non-easy way}....

       ----- Transcript of session follows -----
    ... while talking to mail.kku.ac.th.:
    <<< 550 Your site is blocked due to previous spamming incidents

Maybe we (as user community) should try to make sure that our IT people
don't use such extreme anti spam measures....

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wb@vestein.arb-phys.uni-dortmund.de  Wed Sep  5 12:41:53 2001
From: wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke)
Date: 5 Sep 2001 13:41:53 +0200
Subject: [Rd] spam on R lists --> refuse mail??
References: <ifado.list.r.devel/15253.61806.862066.186883@gargle.gargle.HOWL>
Message-ID: <9n5321$1kf5$1@yorikke.arb-phys.uni-dortmund.de>

In article <ifado.list.r.devel/15253.61806.862066.186883@gargle.gargle.HOWL>,
Martin Maechler  <maechler@stat.math.ethz.ch> wrote:
> We get caught occasionally, and we all receive spam;
>sorry for the last one (on R-help).  Of course, there will never be a 100%
>sure prevention... 
>
>Question is what should happen when mail from R-help to an adressee 
>is refused with the following message : At least I won't be able to easily send
>e-mail to them {and am not willing to use a non-easy way}....
>
>       ----- Transcript of session follows -----
>    ... while talking to mail.kku.ac.th.:
>    <<< 550 Your site is blocked due to previous spamming incidents
>
>Maybe we (as user community) should try to make sure that our IT people
>don't use such extreme anti spam measures....

This should be considered as an argument PRO newsgroups. In a group
with high traffic like r-devel the usenet noise level is tolerable, IMHO.
-- 
Dipl.-Math. Wilhelm Bernhard Kloke
Institut fuer Arbeitsphysiologie an der Universitaet Dortmund
Ardeystrasse 67, D-44139 Dortmund, Tel. 0231-1084-257
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep  6 08:59:10 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 6 Sep 2001 08:59:10 +0100 (BST)
Subject: [Rd] RFC: d/p/q/rgamma
Message-ID: <Pine.LNX.4.31.0109060850500.1676-100000@gannet.stats>

dgamma and friends in S are documented as

dgamma(x, shape, rate=1)
pgamma(q, shape, rate=1)
qgamma(p, shape, rate=1)
rgamma(n, shape, rate=1)


whereas R has

dgamma(x, shape, scale=1, log = FALSE)
pgamma(q, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
qgamma(p, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
rgamma(n, shape, scale=1)

Note the use of rate vs scale.  Indeed, as both S and R use `rate' for
exponential this seems somewhat strange, and the only such inconsistency I
can find.

I propose that we add a `rate' argument to d/p/q/rgamma as an alternative
to `scale', which is easily done.   The question is where?

I think we have a trap here for most users, who will happily copy

dgamma(x, 17, 0.3)

from their S-PLUS example sheet, and get the wrong answer. My preference
would be to have

dgamma(x, shape, rate, scale=1, log = FALSE)

etc.  That would break existing R code using positional matching.
Question: is there any?

The only really safe alternative is add `rate' as the last parameter.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Sep  6 09:15:43 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 6 Sep 2001 10:15:43 +0200
Subject: [Rd] RFC: d/p/q/rgamma
In-Reply-To: <Pine.LNX.4.31.0109060850500.1676-100000@gannet.stats>
References: <Pine.LNX.4.31.0109060850500.1676-100000@gannet.stats>
Message-ID: <15255.12463.584218.976655@mithrandir.hornik.net>

>>>>> Prof Brian Ripley writes:

> dgamma and friends in S are documented as
> dgamma(x, shape, rate=1)
> pgamma(q, shape, rate=1)
> qgamma(p, shape, rate=1)
> rgamma(n, shape, rate=1)


> whereas R has

> dgamma(x, shape, scale=1, log = FALSE)
> pgamma(q, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
> qgamma(p, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
> rgamma(n, shape, scale=1)

> Note the use of rate vs scale.  Indeed, as both S and R use `rate' for
> exponential this seems somewhat strange, and the only such
> inconsistency I can find.

> I propose that we add a `rate' argument to d/p/q/rgamma as an
> alternative to `scale', which is easily done.  The question is where?

> I think we have a trap here for most users, who will happily copy

> dgamma(x, 17, 0.3)

> from their S-PLUS example sheet, and get the wrong answer. My preference
> would be to have

> dgamma(x, shape, rate, scale=1, log = FALSE)

> etc.  That would break existing R code using positional matching.
> Question: is there any?

One could find out by unpackaging all CRAN packages and grepping for
usages of *gamma in the code.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Sep  6 09:49:02 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 6 Sep 2001 10:49:02 +0200
Subject: [Rd] Re: [R] Bug in ftable?? (Was: Two-way tables of data, etc)
In-Reply-To: <x2g0a2kmo4.fsf@blueberry.kubism.ku.dk>
References: <D5A7D734C9C5D211B9E30008C78923020E95AFBB@exdkba03.novo.dk>
 <x2g0a2kmo4.fsf@blueberry.kubism.ku.dk>
Message-ID: <15255.14462.313764.384032@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> "BXC (Bendix Carstensen)" <bxc@novonordisk.com> writes:
> [tp<- tapply( breaks, list( wool, tension, variant ), mean )]

>> tp <- as.table( tp )
>> ftable( tp )
>> 
>> But here i get:
>> 
>> > attr( tp, "class" ) <- "table"
>> > ftable( tp )
>> Error in cbind(...) : number of rows of matrices must match (see arg 2)

> Um, I don't think so.... ;-)

>> # But still they seem to have similar attributes (except for the naming)
>> attributes( tb )
>> attributes( tp )
>> 
>> Is this a bug or a facility of ftable ?

> It's a bug *somewhere*, not necessarily in ftable. The problem is
> either that the dimname-names are not added by tapply, that neither
> as.table or ftable add dummy names, or that write.ftable gags when
> names are absent. (Or put differently: Are either the "table" or
> "ftable" objects *required* to have named attributes??). 

> Actually, the fact that tapply doesn't generated named dimnames cannot
> be considered the cause since 
> (a) as.table should work on any matrix.
> (b) the second argument to tapply is not a named list in your case

> One  workaround is to add in the names:

>   ft <- ftable(tp)
>   names(attr(ft,"row.vars")) <- c("wool","tension")
>   names(attr(ft,"col.vars")) <- "variant"
>   ft

> another is to make sure that tapply gets the names right:

>> tp <- tapply(breaks, list(wool=wool,tension=tension,variant=variant), mean)
>> ftable(tp)
>              variant    1    2    3    4    5
> wool tension                                 
> A    L               39.0 40.5 40.0 46.0 70.0
>      M               28.0 29.5 26.5 12.0 18.0
>      H               19.5 22.0 10.0 39.5 24.5
> B    L               31.5 29.0 29.0 27.5 24.5
>      M               39.0 35.0 23.5 29.0 22.5
>      H               17.5 18.0 20.0 22.5 13.0

> or - lazy variation - abuse the fact that dataframes are lists and do
> have labeled columns:

>> tp <- tapply( breaks, data.frame(wool,tension,variant), mean )
>> ftable(tp)
>              variant    1    2    3    4    5
> wool tension                                 
> A    L               39.0 40.5 40.0 46.0 70.0
>      M               28.0 29.5 26.5 12.0 18.0
>      H               19.5 22.0 10.0 39.5 24.5
> B    L               31.5 29.0 29.0 27.5 24.5
>      M               39.0 35.0 23.5 29.0 22.5
>      H               17.5 18.0 20.0 22.5 13.0

I think we need to improve as.table.

table() is trying hard to produce variable names, and ftable() [and also
xtabs(), of course] assumes that we have them.

I would suggest enhancing as.table.default to provide dimname names in
addition to adding the "table" class attribute.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep  6 10:21:58 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 6 Sep 2001 10:21:58 +0100 (BST)
Subject: [Rd] RFC: d/p/q/rgamma
In-Reply-To: <15255.12463.584218.976655@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.31.0109061013290.4287-100000@toucan.stats>

On Thu, 6 Sep 2001, Kurt Hornik wrote:

> >>>>> Prof Brian Ripley writes:
>
> > dgamma and friends in S are documented as
> > dgamma(x, shape, rate=1)
> > pgamma(q, shape, rate=1)
> > qgamma(p, shape, rate=1)
> > rgamma(n, shape, rate=1)
>
>
> > whereas R has
>
> > dgamma(x, shape, scale=1, log = FALSE)
> > pgamma(q, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
> > qgamma(p, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
> > rgamma(n, shape, scale=1)
>
> > Note the use of rate vs scale.  Indeed, as both S and R use `rate' for
> > exponential this seems somewhat strange, and the only such
> > inconsistency I can find.
>
> > I propose that we add a `rate' argument to d/p/q/rgamma as an
> > alternative to `scale', which is easily done.  The question is where?
>
> > I think we have a trap here for most users, who will happily copy
>
> > dgamma(x, 17, 0.3)
>
> > from their S-PLUS example sheet, and get the wrong answer. My preference
> > would be to have
>
> > dgamma(x, shape, rate, scale=1, log = FALSE)
>
> > etc.  That would break existing R code using positional matching.
> > Question: is there any?
>
> One could find out by unpackaging all CRAN packages and grepping for
> usages of *gamma in the code.

Only in public code, not for example in people's lecture notes.

There's only one use in the packages we have installed (almost all), of
rgamma(n, r) in sm.  Had that used a third arg, I am sure I would never
have spotted it when porting.

BTW, I think the cleanest approach is

dgamma(x, shape, rate = 1, scale = 1/rate, log = FALSE)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep  6 11:21:29 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 6 Sep 2001 12:21:29 +0200
Subject: [Rd] Re: "table" class requirements (was .. Bug in ftable....)
In-Reply-To: <15255.14462.313764.384032@mithrandir.hornik.net>
References: <D5A7D734C9C5D211B9E30008C78923020E95AFBB@exdkba03.novo.dk>
 <x2g0a2kmo4.fsf@blueberry.kubism.ku.dk>
 <15255.14462.313764.384032@mithrandir.hornik.net>
Message-ID: <15255.20009.696505.653542@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Peter Dalgaard BSA writes:
    >> "BXC (Bendix Carstensen)" <bxc@novonordisk.com> writes:
    >> [tp<- tapply( breaks, list( wool, tension, variant ), mean )]

    >>> tp <- as.table( tp )
    >>> ftable( tp )
    >>> 
    >>> But here i get:
    >>> 
    >>> > attr( tp, "class" ) <- "table"
    >>> > ftable( tp )
    >>> Error in cbind(...) : number of rows of matrices must match (see arg 2)

    >> Um, I don't think so.... ;-)

    >>> # But still they seem to have similar attributes (except for the naming)
    >>> attributes( tb )
    >>> attributes( tp )
    >>> 
    >>> Is this a bug or a facility of ftable ?

    >> It's a bug *somewhere*, not necessarily in ftable. The problem is
    >> either that the dimname-names are not added by tapply, that neither
    >> as.table or ftable add dummy names, or that write.ftable gags when
    >> names are absent. (Or put differently: Are either the "table" or
    >> "ftable" objects *required* to have named attributes??). 

    >> Actually, the fact that tapply doesn't generated named dimnames cannot
    >> be considered the cause since 
    >> (a) as.table should work on any matrix.
    >> (b) the second argument to tapply is not a named list in your case

    >> One  workaround is to add in the names:

    >> ft <- ftable(tp)
    >> names(attr(ft,"row.vars")) <- c("wool","tension")
    >> names(attr(ft,"col.vars")) <- "variant"
    >> ft

    >> another is to make sure that tapply gets the names right:

    >>> tp <- tapply(breaks, list(wool=wool,tension=tension,variant=variant), mean)
    >>> ftable(tp)
    >> variant    1    2    3    4    5
    >> wool tension                                 
    >> A    L               39.0 40.5 40.0 46.0 70.0
    >> M               28.0 29.5 26.5 12.0 18.0
    >> H               19.5 22.0 10.0 39.5 24.5
    >> B    L               31.5 29.0 29.0 27.5 24.5
    >> M               39.0 35.0 23.5 29.0 22.5
    >> H               17.5 18.0 20.0 22.5 13.0

    >> or - lazy variation - abuse the fact that dataframes are lists and do
    >> have labeled columns:

    >>> tp <- tapply( breaks, data.frame(wool,tension,variant), mean )
    >>> ftable(tp)
    >> variant    1    2    3    4    5
    >> wool tension                                 
    >> A    L               39.0 40.5 40.0 46.0 70.0
    >> M               28.0 29.5 26.5 12.0 18.0
    >> H               19.5 22.0 10.0 39.5 24.5
    >> B    L               31.5 29.0 29.0 27.5 24.5
    >> M               39.0 35.0 23.5 29.0 22.5
    >> H               17.5 18.0 20.0 22.5 13.0

    KH> I think we need to improve as.table.

    KH> table() is trying hard to produce variable names, and ftable() [and also
    KH> xtabs(), of course] assumes that we have them.

    KH> I would suggest enhancing as.table.default to provide dimname names in
    KH> addition to adding the "table" class attribute.

I agree with that proposition,
but I disagree with assuming that a "table" class object must have named
dimnames. As long as the other implementations of the S language don't have
these, we will create an unnecessary crevice of incompatibility.
A table could also come along by source()ing an S+-dumped object..
Hence I think ftable(), xtabs() and all *.table() methods *should* work
when the dimnames are not named.

Btw, this is a bit linked to Terry Therneaus strong statements on S-news
yesterday (Subject: Re: [S] dimnames in Sparc Splus 6.0)
about S4 vs S3 classes.  I *do* like in many cases to have `polymorphous'
classes which are allowed/but not required to have certain attributes.
Hence I am waiting for replies explaining how this is easily done within the
S4 class system {{hereby admitting that I've not read the green book
carefully enough recently}}.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Sep  6 11:52:57 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 6 Sep 2001 12:52:57 +0200
Subject: [Rd] Re: "table" class requirements (was .. Bug in ftable....)
In-Reply-To: <15255.20009.696505.653542@gargle.gargle.HOWL>
References: <D5A7D734C9C5D211B9E30008C78923020E95AFBB@exdkba03.novo.dk>
 <x2g0a2kmo4.fsf@blueberry.kubism.ku.dk>
 <15255.14462.313764.384032@mithrandir.hornik.net>
 <15255.20009.696505.653542@gargle.gargle.HOWL>
Message-ID: <15255.21897.571350.501446@mithrandir.hornik.net>

>>>>> Martin Maechler writes:

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>>>>> Peter Dalgaard BSA writes:
>>> "BXC (Bendix Carstensen)" <bxc@novonordisk.com> writes:
>>> [tp<- tapply( breaks, list( wool, tension, variant ), mean )]

>>>> tp <- as.table( tp )
>>>> ftable( tp )
>>>> 
>>>> But here i get:
>>>> 
>>>> > attr( tp, "class" ) <- "table"
>>>> > ftable( tp )
>>>> Error in cbind(...) : number of rows of matrices must match (see arg 2)

>>> Um, I don't think so.... ;-)

>>>> # But still they seem to have similar attributes (except for the naming)
>>>> attributes( tb )
>>>> attributes( tp )
>>>> 
>>>> Is this a bug or a facility of ftable ?

>>> It's a bug *somewhere*, not necessarily in ftable. The problem is
>>> either that the dimname-names are not added by tapply, that neither
>>> as.table or ftable add dummy names, or that write.ftable gags when
>>> names are absent. (Or put differently: Are either the "table" or
>>> "ftable" objects *required* to have named attributes??). 

>>> Actually, the fact that tapply doesn't generated named dimnames cannot
>>> be considered the cause since 
>>> (a) as.table should work on any matrix.
>>> (b) the second argument to tapply is not a named list in your case

>>> One  workaround is to add in the names:

>>> ft <- ftable(tp)
>>> names(attr(ft,"row.vars")) <- c("wool","tension")
>>> names(attr(ft,"col.vars")) <- "variant"
>>> ft

>>> another is to make sure that tapply gets the names right:

>>>> tp <- tapply(breaks, list(wool=wool,tension=tension,variant=variant), mean)
>>>> ftable(tp)
>>> variant    1    2    3    4    5
>>> wool tension                                 
>>> A    L               39.0 40.5 40.0 46.0 70.0
>>> M               28.0 29.5 26.5 12.0 18.0
>>> H               19.5 22.0 10.0 39.5 24.5
>>> B    L               31.5 29.0 29.0 27.5 24.5
>>> M               39.0 35.0 23.5 29.0 22.5
>>> H               17.5 18.0 20.0 22.5 13.0

>>> or - lazy variation - abuse the fact that dataframes are lists and do
>>> have labeled columns:

>>>> tp <- tapply( breaks, data.frame(wool,tension,variant), mean )
>>>> ftable(tp)
>>> variant    1    2    3    4    5
>>> wool tension                                 
>>> A    L               39.0 40.5 40.0 46.0 70.0
>>> M               28.0 29.5 26.5 12.0 18.0
>>> H               19.5 22.0 10.0 39.5 24.5
>>> B    L               31.5 29.0 29.0 27.5 24.5
>>> M               39.0 35.0 23.5 29.0 22.5
>>> H               17.5 18.0 20.0 22.5 13.0

KH> I think we need to improve as.table.

KH> table() is trying hard to produce variable names, and ftable() [and also
KH> xtabs(), of course] assumes that we have them.

KH> I would suggest enhancing as.table.default to provide dimname names in
KH> addition to adding the "table" class attribute.

> I agree with that proposition, but I disagree with assuming that a
> "table" class object must have named dimnames. As long as the other
> implementations of the S language don't have these, we will create an
> unnecessary crevice of incompatibility.  A table could also come along
> by source()ing an S+-dumped object..  Hence I think ftable(), xtabs()
> and all *.table() methods *should* work when the dimnames are not
> named.

Martin: I view this differently.  How can you refer to variables in a
model formula when you do not know their names?  [Well I know my ftable
code allows for numbers ... bad design.]

Our implemtation of table is different: we view this as the creator of
class "table" and have methods for it.  I do not see this as a source of
imcompatibility: sourcing S+ dumps will not give an object of class
table.  If coercing it to one using as.table adds variable names if
needed we'd be safe, I think.

> Btw, this is a bit linked to Terry Therneaus strong statements on
> S-news yesterday (Subject: Re: [S] dimnames in Sparc Splus 6.0) about
> S4 vs S3 classes.  I *do* like in many cases to have `polymorphous'
> classes which are allowed/but not required to have certain attributes.
> Hence I am waiting for replies explaining how this is easily done
> within the S4 class system {{hereby admitting that I've not read the
> green book carefully enough recently}}.

Need to look up the statement ... cannot seem to find it in my digest?
In any case, I would think that maybe having certain `attributes' is S3
object model thinking ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Thu Sep  6 14:07:30 2001
From: ligges@amadeus.statistik.uni-dortmund.de (ligges@amadeus.statistik.uni-dortmund.de)
Date: Thu, 6 Sep 2001 15:07:30 +0200 (MET DST)
Subject: [Rd] file.copy() problems on WinNT (PR#1085)
Message-ID: <200109061307.PAA29781@pubhealth.ku.dk>

For some files, file.copy() doesn't copy these files correctly.

Here you will find a file (Bitmap, 769Kb) to reproduce the problem:
 http://www.statistik.uni-dortmund.de/leute/ligges/R/test1.bmp

Using 
 file.copy("c:/test1.bmp", "c:/test2.bmp", overwrite = TRUE)
produces a second file with the size of ~1.4 Mb:
 http://www.statistik.uni-dortmund.de/leute/ligges/R/test2.bmp

To reduce size, I put both files into following zip archive:
 http://www.statistik.uni-dortmund.de/leute/ligges/R/test.zip

Using file.copy() with the same file on Solaris and Linux works fine.

Uwe Ligges


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Sep  6 17:16:28 2001
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 6 Sep 2001 18:16:28 +0200
Subject: [Rd] RFC: package pixmap
In-Reply-To: <Pine.LNX.4.21.0109032209130.25132-201000@reclus.nhh.no>
References: <15043.13319.787590.74960@galadriel.ci.tuwien.ac.at>
 <Pine.LNX.4.21.0109032209130.25132-201000@reclus.nhh.no>
Message-ID: <15255.41308.64191.671020@galadriel.ci.tuwien.ac.at>


There is a new package pixmap in $CRAN/src/contrib/Devel which
provides a first shot at a class hierarchy for bitmapped images (as
both bitmap and image are already taken I named it pixmap ... if
somebody has an idea for a better name, please let me know).

This is by no means meant to be final ... more like a basis for
discussion about classes for that purpose. It already has RGB, indexed
and grey bitmaps and conversion and plotting methods for those.

Thanks to Roger Bivand there are native R functions for
reading/writing PNM images, this replaces the respective functions in
the e1071 package. Hence, the netpbm libraries are no longer needed,
which should make life easier (especially on windows). Once we have
agreed on the basic classes it should be easy to support import/export
of other image formats like jpeg or png.

All feedback & code is welcome!

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Sep  6 17:23:51 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 6 Sep 2001 09:23:51 -0700 (PDT)
Subject: [Rd] RFC: d/p/q/rgamma
In-Reply-To: <Pine.GSO.4.31.0109061013290.4287-100000@toucan.stats>
Message-ID: <Pine.A41.4.33.0109060923250.17872-100000@homer03.u.washington.edu>

On Thu, 6 Sep 2001, Prof Brian Ripley wrote:

> BTW, I think the cleanest approach is
>
> dgamma(x, shape, rate = 1, scale = 1/rate, log = FALSE)
>
Yes, I think this is better

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Fri Sep  7 06:15:02 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Fri, 7 Sep 2001 07:15:02 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200109070515.f875F2t22361@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400
* PR# 1081 *
Subject: problems installing R on Solaris 2.8 machine
From: Paivio Pollari <pollari@sun3.oulu.fi>
Date: Fri, 31 Aug 2001 08:54:23 +0300 (EET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1052 *
Subject:  Inconsistent behaviour of is.vector? 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 14 Aug 2001 09:04:57 +0100
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068

Directory:  Macintosh

none

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
* PR# 1057 *
Subject: crt1.o skipped at configure time ?
From: laurent@cbs.dtu.dk
Date: Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
* PR# 1062 *
Subject: system.file("",package)
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Sun, 19 Aug 2001 16:01:57 -0700 (PDT)
* PR# 1084 *
Subject: Install problems R 1.3.1 on HP-UX
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Sun, 2 Sep 2001 15:07:41 +0200 (CEST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1080 *
Subject: bug in histogram rendering
From: ljlehou@sandia.gov
Date: Thu, 30 Aug 2001 01:40:13 +0200 (MET DST)
* PR# 1083 *
Subject: --quiet flag sets echo option to TRUE
From: "David Kane  <David Kane" <a296180@mica.fmr.com>
Date: Fri, 31 Aug 2001 13:07:19 -0400
* PR# 1085 *
Subject: file.copy() problems on WinNT
From: Uwe Ligges <ligges@amadeus.statistik.uni-dortmund.de>
Date: Thu, 06 Sep 2001 15:07:26 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep  7 08:57:24 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 7 Sep 2001 09:57:24 +0200 (MET DST)
Subject: [Rd] file.copy() problems on WinNT (PR#1085)
Message-ID: <200109070757.JAA05215@pubhealth.ku.dk>

Looks like it is written to expect text files.

Please try making the file opens in R_AppedFile binary, and tell us if
that solves it.

On Thu, 6 Sep 2001 ligges@amadeus.statistik.uni-dortmund.de wrote:

> For some files, file.copy() doesn't copy these files correctly.
>
> Here you will find a file (Bitmap, 769Kb) to reproduce the problem:
>  http://www.statistik.uni-dortmund.de/leute/ligges/R/test1.bmp
>
> Using
>  file.copy("c:/test1.bmp", "c:/test2.bmp", overwrite = TRUE)
> produces a second file with the size of ~1.4 Mb:
>  http://www.statistik.uni-dortmund.de/leute/ligges/R/test2.bmp
>
> To reduce size, I put both files into following zip archive:
>  http://www.statistik.uni-dortmund.de/leute/ligges/R/test.zip
>
> Using file.copy() with the same file on Solaris and Linux works fine.
>
> Uwe Ligges
>
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status =
>  major = 1
>  minor = 3.1
>  year = 2001
>  month = 08
>  day = 31
>  language = R
>
> Windows NT 4.0 (build 1381) Service Pack 6
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Fri Sep  7 12:07:03 2001
From: ligges@amadeus.statistik.uni-dortmund.de (ligges@amadeus.statistik.uni-dortmund.de)
Date: Fri, 7 Sep 2001 13:07:03 +0200 (MET DST)
Subject: [Rd] file.copy() problems on WinNT (PR#1085)
Message-ID: <200109071107.NAA07759@pubhealth.ku.dk>

Prof Brian Ripley wrote:
> 
> Looks like it is written to expect text files.
> 
> Please try making the file opens in R_AppedFile binary, and tell us if
> that solves it.

You are right. Changing "a" to "ab" and "r" to "rb" in the following
lines of R_AppendFile (file: /src/main/platform.c) solves the problem.


    if((fp1 = R_fopen(R_ExpandFileName(file1), "a")) == NULL) {
        return 0;
    }
    if((fp2 = R_fopen(R_ExpandFileName(file2), "r")) == NULL) {


Thank you!

Uwe Ligges


> On Thu, 6 Sep 2001 ligges@amadeus.statistik.uni-dortmund.de wrote:
> 
> > For some files, file.copy() doesn't copy these files correctly.
> >
> > Here you will find a file (Bitmap, 769Kb) to reproduce the problem:
> >  http://www.statistik.uni-dortmund.de/leute/ligges/R/test1.bmp
> >
> > Using
> >  file.copy("c:/test1.bmp", "c:/test2.bmp", overwrite = TRUE)
> > produces a second file with the size of ~1.4 Mb:
> >  http://www.statistik.uni-dortmund.de/leute/ligges/R/test2.bmp
> >
> > To reduce size, I put both files into following zip archive:
> >  http://www.statistik.uni-dortmund.de/leute/ligges/R/test.zip
> >
> > Using file.copy() with the same file on Solaris and Linux works fine.
> >
> > Uwe Ligges
> >
> >
> > --please do not edit the information below--
> >
> > Version:
> >  platform = i386-pc-mingw32
> >  arch = x86
> >  os = Win32
> >  system = x86, Win32
> >  status =
> >  major = 1
> >  minor = 3.1
> >  year = 2001
> >  month = 08
> >  day = 31
> >  language = R
> >
> > Windows NT 4.0 (build 1381) Service Pack 6
> >
> > Search Path:
> >  .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From menstav@hotmail.com  Sat Sep  8 01:01:47 2001
From: menstav@hotmail.com (menstav@hotmail.com)
Date: Sat, 8 Sep 2001 02:01:47 +0200 (MET DST)
Subject: [Rd] t.test (PR#1086)
Message-ID: <200109080001.CAA12968@pubhealth.ku.dk>

Full_Name: Menelaos Stavrinides
Version: 1.3. 1
OS: Windows 98
Submission from: (NULL) (193.129.76.90)


When model simplification is used in glm (binomial errors) and anova is used two
compare two competitive models one can use either an "F" or a "Chi" test.

R always performs an F test (Although when test="Chi" the test is labeled as
Chi, there isn't any difference between F and Chi test)

Let us assume model1 and model2, where model2 a simplified version of model1

model1_glm(y~factor1*factor2,binomial)
model2_update(model1,~.-factor2)
anova(model1,model2,test="F")# will give the same result as 
anova(model1,model2,test="Chi") 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From menstav@hotmail.com  Sat Sep  8 01:03:32 2001
From: menstav@hotmail.com (menstav@hotmail.com)
Date: Sat, 8 Sep 2001 02:03:32 +0200 (MET DST)
Subject: [Rd] anova in model simplification in glm (PR#1087)
Message-ID: <200109080003.CAA12990@pubhealth.ku.dk>

Full_Name: Menelaos Stavrinides
Version: 1.3. 1
OS: Windows 98
Submission from: (NULL) (193.129.76.90)


When model simplification is used in glm (binomial errors) and anova is used two
compare two competitive models one can use either an "F" or a "Chi" test.

R always performs an F test (Although when test="Chi" the test is labeled as
Chi, there isn't any difference between F and Chi test)

Let us assume model1 and model2, where model2 a simplified version of model1

model1_glm(y~factor1*factor2,binomial)
model2_update(model1,~.-factor2)
anova(model1,model2,test="F")# will give the same result as 
anova(model1,model2,test="Chi") 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep  8 07:32:28 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 8 Sep 2001 07:32:28 +0100 (BST)
Subject: [Rd] t.test (PR#1086)
In-Reply-To: <200109080001.CAA12968@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0109080723570.6057-100000@auk.stats>

On Sat, 8 Sep 2001 menstav@hotmail.com wrote:

> Full_Name: Menelaos Stavrinides
> Version: 1.3. 1
> OS: Windows 98
> Submission from: (NULL) (193.129.76.90)
>
>
> When model simplification is used in glm (binomial errors) and anova is used two
> compare two competitive models one can use either an "F" or a "Chi" test.
>
> R always performs an F test (Although when test="Chi" the test is labeled as
> Chi, there isn't any difference between F and Chi test)
>
> Let us assume model1 and model2, where model2 a simplified version of model1
>
> model1_glm(y~factor1*factor2,binomial)
> model2_update(model1,~.-factor2)
> anova(model1,model2,test="F")# will give the same result as
> anova(model1,model2,test="Chi")

See help(family) and help(anova.glm).  For a binomial family the scale
estimate in the F test is fixed at one, so they should be the same.
If you want extimates scale, use a quasibinomial family.

This applies to PR#1087 too.

Please do read the section of BUGS in the FAQ.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep  8 07:28:21 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 8 Sep 2001 08:28:21 +0200
Subject: [Rd] Re: [R] Why does substr<- truncate and not replace...
In-Reply-To: <x24rqeu0et.fsf@blueberry.kubism.ku.dk>
References: <px66au3h1v.fsf@infiniti.ece.cmu.edu>
 <x24rqeu0et.fsf@blueberry.kubism.ku.dk>
Message-ID: <15257.47749.215502.258140@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Thomas Vogels <tov@ece.cmu.edu> writes:
>> ... when the replacement string is shorter than the portion of the
>> string to be replaced?
>> 
>> The documentation to substr (in R 1.3.1) gives me:
>> 
>> If the portion to be replaced is longer than the replacement
>> string, then only the portion the length of the string is
>> replaced.
>> 
>> And so I try:
>> 
R> x <- "abcdef"
R> substr(x,2,3) <- "xy" #ok
R> x
>> [1] "axydef"
R> substr(x,2,3) <- "w" #ko
R> x
>> [1] "aw"
>> 
>> hmm, I would have expected "awdef".  Am I reading the docs wrong?  (Or
>> am I just blinded to expect this string because that's what Perl would do?)
>> 
>> Thanks!
>> -tom

> Looks like a bit of a bug. I bet the \0 terminator gets copied in from
> the replacement.

There are yet more interesting effects when using longer portions:

R> x <- "abcdef"
R> x
[1] "abcdef"
R> substr(x, 2, 4) <- "x"
R> x
[1] "ax"

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep  8 10:43:50 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 8 Sep 2001 10:43:50 +0100 (BST)
Subject: [Rd] Re: [R] Why does substr<- truncate and not replace...
In-Reply-To: <15257.47749.215502.258140@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0109081041490.7260-100000@gannet.stats>

This is already fixed in R-devel:

> x
[1] "axcdef"

If start - stop is 1, the substring is of length 2 ...

On Sat, 8 Sep 2001, Kurt Hornik wrote:

> >>>>> Peter Dalgaard BSA writes:
>
> > Thomas Vogels <tov@ece.cmu.edu> writes:
> >> ... when the replacement string is shorter than the portion of the
> >> string to be replaced?
> >>
> >> The documentation to substr (in R 1.3.1) gives me:
> >>
> >> If the portion to be replaced is longer than the replacement
> >> string, then only the portion the length of the string is
> >> replaced.
> >>
> >> And so I try:
> >>
> R> x <- "abcdef"
> R> substr(x,2,3) <- "xy" #ok
> R> x
> >> [1] "axydef"
> R> substr(x,2,3) <- "w" #ko
> R> x
> >> [1] "aw"
> >>
> >> hmm, I would have expected "awdef".  Am I reading the docs wrong?  (Or
> >> am I just blinded to expect this string because that's what Perl would do?)
> >>
> >> Thanks!
> >> -tom
>
> > Looks like a bit of a bug. I bet the \0 terminator gets copied in from
> > the replacement.
>
> There are yet more interesting effects when using longer portions:
>
> R> x <- "abcdef"
> R> x
> [1] "abcdef"
> R> substr(x, 2, 4) <- "x"
> R> x
> [1] "ax"
>
> -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pwhiting@whitings.org  Sat Sep  8 16:19:17 2001
From: pwhiting@whitings.org (pwhiting@whitings.org)
Date: Sat, 8 Sep 2001 17:19:17 +0200 (MET DST)
Subject: [Rd] barplot forces xpd=TRUE (PR#1088)
Message-ID: <200109081519.RAA14437@pubhealth.ku.dk>


<<insert bug report here>>

barplot hardcodes xpd as "TRUE" causing the bars to go outside of the
plot region.  True can be the default, but it shouldn't be the only
option.

*** barplot.R   Sat Sep  8 10:15:16 2001
--- barplot.R.orig      Sat Sep  8 10:03:39 2001
***************
*** 5,11 ****
           legend.text = NULL, beside = FALSE, horiz = FALSE,
           col = heat.colors(NR), border = par("fg"),
           main = NULL, sub = NULL, xlab = NULL, ylab = NULL,
!          xlim = NULL, ylim = NULL, xpd = TRUE,
           axes = TRUE, axisnames = TRUE, inside = TRUE, plot = TRUE, ...)
  {
      if (!missing(inside)) .NotYetUsed("inside", error = FALSE)
--- 5,11 ----
           legend.text = NULL, beside = FALSE, horiz = FALSE,
           col = heat.colors(NR), border = par("fg"),
           main = NULL, sub = NULL, xlab = NULL, ylab = NULL,
!          xlim = NULL, ylim = NULL,
           axes = TRUE, axisnames = TRUE, inside = TRUE, plot = TRUE, ...)
  {
      if (!missing(inside)) .NotYetUsed("inside", error = FALSE)
***************
*** 61,68 ****
        w.m <- matrix(w.m, nc = NC)
      if(plot) { ##-------- Plotting :
        opar <-
!           if (horiz)  par(xaxs = "i", xpd=xpd)
!           else        par(yaxs = "i", xpd=xpd)
        on.exit(par(opar))

        plot.new()
--- 61,68 ----
        w.m <- matrix(w.m, nc = NC)
      if(plot) { ##-------- Plotting :
        opar <-
!           if (horiz)  par(xaxs = "i", xpd = TRUE)
!           else        par(yaxs = "i", xpd = TRUE)
        on.exit(par(opar))

        plot.new()



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From michael_odonnell@acm.org  Sat Sep  8 19:25:33 2001
From: michael_odonnell@acm.org (michael_odonnell@acm.org)
Date: Sat, 8 Sep 2001 20:25:33 +0200 (MET DST)
Subject: [Rd] Debian Woody r-base depends on blas2 (PR#1089)
Message-ID: <200109081825.UAA14788@pubhealth.ku.dk>

Full_Name: Michael J. O'Donnell
Version: 1.3.1-1
OS: Linux, Debian Woody distribution
Submission from: (NULL) (64.34.17.133)


I tried to install the R packages for the Debian GNU/Linux Woody distribution.
I added "deb http://cran.r-project.org/bin/linux/debian woody main" to
my /etc/apt/sources.list, and ran dselect with the apt-get method.
I selected all of the R packages that I could find. The installation
appeared to fail, because r-base and r-recommended both depend on blas2.
I cannot find a Debian package for blas2 in the Debian archives, nor in
the CRAN archives. blas1 is in the Debian archives for both Potato and Woody.
I also checked the package list for your Debian Potato distribution, and
I found no dependence on blas2 nor on blas1 there.

Mike O'Donnell


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Sat Sep  8 20:17:18 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Sat, 8 Sep 2001 14:17:18 -0500
Subject: [Rd] Debian Woody r-base depends on blas2 (PR#1089)
In-Reply-To: <200109081825.UAA14788@pubhealth.ku.dk>
References: <200109081825.UAA14788@pubhealth.ku.dk>
Message-ID: <15258.28350.979023.146720@sonny.eddelbuettel.com>


Michael,

  "Michael" == michael odonnell <michael_odonnell@acm.org> writes:
  Michael>  Full_Name: Michael J. O'Donnell Version: 1.3.1-1 OS: Linux,
  Michael> Debian Woody distribution Submission from: (NULL) (64.34.17.133)
  Michael> 
  Michael> 
  Michael> I tried to install the R packages for the Debian GNU/Linux Woody
  Michael> distribution.  I added "deb
  Michael> http://cran.r-project.org/bin/linux/debian woody main" to my
  Michael> /etc/apt/sources.list, and ran dselect with the apt-get method.  I
  Michael> selected all of the R packages that I could find. The installation
  Michael> appeared to fail, because r-base and r-recommended both depend on
  Michael> blas2.  I cannot find a Debian package for blas2 in the Debian
  Michael> archives, nor in the CRAN archives. blas1 is in the Debian
  Michael> archives for both Potato and Woody.  I also checked the package
  Michael> list for your Debian Potato distribution, and I found no
  Michael> dependence on blas2 nor on blas1 there.

Blas2 is a so-called "virtual package" which is provided by the actual blas1
package, as well as by any of the four atlas2 packages (atlas2-base,
atlas2-p3, atlas2-p4, atlas2-athlon). I highly recommended the atlas2
packages (esp if one matches your processor) as the speed gain can be
tremendous for linear algebra operations

Also, I'd recommend using apt-get instead of dselect; a simple

    $ apt-get update; apt-get install r-base

should have resolved that dependency for you.

Note that you can pick a closer mirror; I use cran.us.r-project.org.

Hope that helps,  Dirk


-- 
Our DSL access will be shut off September 10 due to the bankruptcy of Rhythms,
and the inability of Ameritech to respond in a timely fashion.  An optimistic
view is that we might be back online by the end of September.  --  Dirk
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Sun Sep  9 21:52:54 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Sun, 9 Sep 2001 22:52:54 +0200 (MET DST)
Subject: [Rd] [R] bad R.css link in "packages.html" (PR#1090)
Message-ID: <200109092052.WAA18066@pubhealth.ku.dk>

I downloaded and installed R-1.3.1 yesterday, and had to change line
2 of the "packages.html" file in $RHOME/doc/html/

The configuration steps were "the usual",

tar zxvf ...
cd ...
./configure
make
make check
make install

If it's relevant,

Sys.info() 
        sysname                         release 
	"Linux"                          "2.2.14" 
	version                         nodename 
	"#2 Sat Nov 25 15:30:42 CET 2000"  "camille.indigoindustrial.co.nz" 
	machine                         login 
	"i586"                         "unknown" 
	user 
	"jasont" 


Changed line 2 from:
<link rel="stylesheet" type="text/css" href="../../R.css">

to:
<link rel="stylesheet" type="text/css" href="./R.css">

Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Sep  9 22:33:41 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Sep 2001 23:33:41 +0200
Subject: [Rd] [R] bad R.css link in "packages.html" (PR#1090)
In-Reply-To: <200109092052.WAA18066@pubhealth.ku.dk>
References: <200109092052.WAA18066@pubhealth.ku.dk>
Message-ID: <x2heucjbgq.fsf@blueberry.kubism.ku.dk>

jasont@indigoindustrial.co.nz writes:

> I downloaded and installed R-1.3.1 yesterday, and had to change line
> 2 of the "packages.html" file in $RHOME/doc/html/

....

> Changed line 2 from:
> <link rel="stylesheet" type="text/css" href="../../R.css">
> 
> to:
> <link rel="stylesheet" type="text/css" href="./R.css">

Hmm. Yes, this looks wrong, but what are the ill effects? When you
use help.start(), doesn't the correct setting get put into
.R/doc/html/packages.html ?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Sep 11 18:05:21 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 11 Sep 2001 13:05:21 -0400
Subject: [Rd] ... in generic/specific methods
Message-ID: <3B9E4451.67A9B893@bank-banque-canada.ca>

The prescription that "..." as an argument in a generic means that "..." should be an
argument in the specific methods (as is being suggested by checkMethods() in devel)
implies that errors will not automatically be generated when a specific method gets
arguments it does not use.  I do not view the change as an improvement since  I think
of these errors as a valuable mechanism for catching mistakes, so I would like to
understand the rationale. The change does not break things that work, it just means
that certain kinds of errors which were once caught automatically are no longer
caught automatically.

Now it is completely possible that this represents a fairly major misunderstanding of
inheritance on my part. But I believe my understanding is consistent with the
explanation of this in Chambers and Hastie (quoted below) which is the only place in
my somewhat dated collection of S reference books where I have found the issue
discussed at the necessary level of detail. My understanding is also consistent with
examples in MASS (at least the 1994 version) and elsewhere, whereas the prescription
of checkMethods() is not.  All of this is to say that there will be a number of long
time users who will be confused.

To the extent that I do understand the rationale of the checkMethods() prescription,
I believe the problem is that things are easier if UseMethod and NextMethod can pass
along arguments without needing to keep track of things. If specific methods use only
subsets of arguments the dispatch mechanism becomes more complicated or impossible.
Now, if it truly is impossible then the argument is fairly clear. But if it is only
more complicated then there is a trade-off between simplified dispatch and better
error checking (plus an enormous base of code which has assumed the prior mechanism).

Paul Gilbert
___
from J.M. Chambers and T.J. Hastie, "Statistical Models in S", 1992, Appendix A,
p466:

"When UseMethod() has found a method, it re-matches the actual call to the generic
with the definition of the method. Similarly, NextMethod() matches arguments with the
same order and names as the call to the generic. Methods do not need to have the same
arguments as the generic. In most examples, the method should allow optional, named
arguments to be passed down, if it plans to call NextMethod(). This means that most
such methods should have "..." as an argument. In the case of "[.factor"(), however,
we took the opposite approach. We decided that only one subscript argument made sense
for factors, although other objects might meaningfully have more arguments. The
definition here then produces a clean error message if an extra argument is included:

...
This is a tradeoff between allowing more general use of the method and providing
informative error messages; the relative importance of each should be examined
case-by-case."

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Sep 12 17:30:19 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 12 Sep 2001 12:30:19 -0400 (EDT)
Subject: [Rd] feature request: comment character in read.table?
Message-ID: <Pine.LNX.4.30.0109121221400.1270-100000@bolker.zoo.ufl.edu>


  How difficult would it be (I could try myself if someone thought it
would be straightforward) to change read.table to allow a comment
character such as # or %?  My thought would be that anything on a line
following a comment character would be ignored (so that the combination of
blank.lines.skip=TRUE and a comment at the beginning of the line would
lead to a line being skipped completely).
 I'm always encouraging my students to comment their data sets, and it
feels lame to tell them they have to count the number of initial lines in
the data set in order to set the "skip" parameter appropriately.  (The
comment character would also allow comments about a particular data
point.)

  I know I could hack this (a) with sed in Unix [but my students using
Windows are likely to have trouble] (b) within R, by processing the file
and creating a temporary file with comments deleted.  (b) is probably what
I'll do as a temporary fix, but this seems to be a reasonable piece of
functionality for R to have ...

  thoughts?

  Ben Bolker


-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Sep 12 18:18:10 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 12 Sep 2001 18:18:10 +0100 (BST)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.LNX.4.30.0109121221400.1270-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.GSO.4.31.0109121814450.6636-100000@auk.stats>

On Wed, 12 Sep 2001, Ben Bolker wrote:

>
>   How difficult would it be (I could try myself if someone thought it
> would be straightforward) to change read.table to allow a comment
> character such as # or %?  My thought would be that anything on a line

It's hard in read.table, especially given the changes in R-devle to mke it
more flexible.  The place to do this seems to me to be the internals of
scan.  They are far from transparent, though.

> following a comment character would be ignored (so that the combination of
> blank.lines.skip=TRUE and a comment at the beginning of the line would
> lead to a line being skipped completely).
>  I'm always encouraging my students to comment their data sets, and it
> feels lame to tell them they have to count the number of initial lines in
> the data set in order to set the "skip" parameter appropriately.  (The
> comment character would also allow comments about a particular data
> point.)
>
>   I know I could hack this (a) with sed in Unix [but my students using
> Windows are likely to have trouble] (b) within R, by processing the file
> and creating a temporary file with comments deleted.  (b) is probably what
> I'll do as a temporary fix, but this seems to be a reasonable piece of
> functionality for R to have ...

(b) seems easy to me. Use either a file() connection or an output text
connection.  (I don't know if file(), that's no arg, works on Mac for
example, though.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Thu Sep 13 09:43:08 2001
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Thu, 13 Sep 2001 10:43:08 +0200 (MET DST)
Subject: [Rd] sum overflow (PR#1091)
Message-ID: <200109130843.KAA28348@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 1.2.3
OS: linux
Submission from: (NULL) (193.62.250.209)


I think I have found an accuracy problem with sum()

> a<-1:1000
> b<-1:1000
>
> crossprod(a,a)*crossprod(b,b)
             [,1]
[1,] 1.114448e+17
> drop(.Last.value)
[1] 1.114448e+17
>
#this should give same answer as above
> sum(a*a)*sum(b*b)
[1] -652010736
#seems to be due to sum using integer representation which overflows instead of
using
#double representation

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 13 09:53:56 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Sep 2001 09:53:56 +0100 (BST)
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <200109130843.KAA28348@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0109130948310.14470-100000@gannet.stats>

It's not a problem with sum:

> sum(a*a)
[1] 333833500
> sum(b*b)
[1] 333833500

are accurate.

The overflow is in the integer arithmetic for *.  That's a question for
your C run-time system.  On a 64-bit machine you might get different
results (although most use 32-bit ints, including mine).

If you use integers you need to be aware of the consequences.  It's a
feature not a bug.


On Thu, 13 Sep 2001 wsi@gcal.ac.uk wrote:

> Full_Name: Bill Simpson
> Version: 1.2.3
> OS: linux
> Submission from: (NULL) (193.62.250.209)
>
>
> I think I have found an accuracy problem with sum()
>
> > a<-1:1000
> > b<-1:1000
> >
> > crossprod(a,a)*crossprod(b,b)
>              [,1]
> [1,] 1.114448e+17
> > drop(.Last.value)
> [1] 1.114448e+17
> >
> #this should give same answer as above
> > sum(a*a)*sum(b*b)
> [1] -652010736
> #seems to be due to sum using integer representation which overflows instead of
> using
> #double representation
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Thu Sep 13 11:59:30 2001
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Thu, 13 Sep 2001 11:59:30 +0100 (BST)
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.31.0109130948310.14470-100000@gannet.stats>
Message-ID: <Pine.LNX.4.10.10109131153420.5118-100000@localhost.localdomain>

> It's not a problem with sum:
> 
> > sum(a*a)
> [1] 333833500
> > sum(b*b)
> [1] 333833500
> 
> are accurate.
> 
> The overflow is in the integer arithmetic for *.  That's a question for
> your C run-time system.  On a 64-bit machine you might get different
> results (although most use 32-bit ints, including mine).
> 
> If you use integers you need to be aware of the consequences.  It's a
> feature not a bug.
I thought R used an internal rep that was double in all cases.
Now I'm confused:
> a<-(1:1000)    
> b<-(1:1000)
> sum(a*a)*sum(b*b)
[1] -652010736
> a<-(1:1000)/1.0
> b<-(1:1000)/1.0
> sum(a*a)*sum(b*b)
[1] 1.114448e+17

So  R somehow decides whether to use an integer or a double
representation? Please tell me the rule used by R so I will know in the
future.

Thanks!

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Sep 13 13:16:36 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 13 Sep 2001 14:16:36 +0200
Subject: [Rd] sum overflow (PR#1091)
References: <Pine.LNX.4.10.10109131153420.5118-100000@localhost.localdomain>
Message-ID: <3BA0A3A4.810379F0@statistik.uni-dortmund.de>

Bill Simpson wrote:
> 
> > It's not a problem with sum:
> >
> > > sum(a*a)
> > [1] 333833500
> > > sum(b*b)
> > [1] 333833500
> >
> > are accurate.
> >
> > The overflow is in the integer arithmetic for *.  That's a question for
> > your C run-time system.  On a 64-bit machine you might get different
> > results (although most use 32-bit ints, including mine).
> >
> > If you use integers you need to be aware of the consequences.  It's a
> > feature not a bug.
> I thought R used an internal rep that was double in all cases.
> Now I'm confused:
> > a<-(1:1000)
> > b<-(1:1000)
> > sum(a*a)*sum(b*b)
> [1] -652010736
> > a<-(1:1000)/1.0
> > b<-(1:1000)/1.0
> > sum(a*a)*sum(b*b)
> [1] 1.114448e+17
> 
> So  R somehow decides whether to use an integer or a double
> representation? Please tell me the rule used by R so I will know in the
> future.


It depends on the function you are using.

In your case you could use:
  as.double(sum(a*a)) * as.double(sum(b*b))

or just check if the result is double:
  is.double(sum(a*a))

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 13 14:51:25 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Sep 2001 14:51:25 +0100 (BST)
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.10.10109131153420.5118-100000@localhost.localdomain>
Message-ID: <Pine.LNX.4.31.0109131443170.14713-100000@gannet.stats>

On Thu, 13 Sep 2001, Bill Simpson wrote:

> > It's not a problem with sum:
> >
> > > sum(a*a)
> > [1] 333833500
> > > sum(b*b)
> > [1] 333833500
> >
> > are accurate.
> >
> > The overflow is in the integer arithmetic for *.  That's a question for
> > your C run-time system.  On a 64-bit machine you might get different
> > results (although most use 32-bit ints, including mine).
> >
> > If you use integers you need to be aware of the consequences.  It's a
> > feature not a bug.
> I thought R used an internal rep that was double in all cases.

Assumed, I guess, as I've never seen that in the manuals.

> Now I'm confused:
> > a<-(1:1000)
> > b<-(1:1000)
> > sum(a*a)*sum(b*b)
> [1] -652010736
> > a<-(1:1000)/1.0
> > b<-(1:1000)/1.0
> > sum(a*a)*sum(b*b)
> [1] 1.114448e+17
>
> So  R somehow decides whether to use an integer or a double
> representation? Please tell me the rule used by R so I will know in the
> future.

It uses what you tell it to in general.  Integers will be handled as
integers, but as in C integer/numeric gives a numeric.  Rather than
learn rules, use typeof or storage.mode as in
> typeof(1:1000)
[1] "integer"

to find out, or make explicit coercions (as.numeric) if you want to make
assumptions about objects.

At present you are only likely to get integers from m:n and similar
seq() calls, and from unclass on a factor.  But no one is saying that will
not change in the future (and it did from S3 to S4).  And you could
always have a user who used as.integer explicitly.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Thu Sep 13 15:19:32 2001
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Thu, 13 Sep 2001 15:19:32 +0100 (BST)
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.31.0109131443170.14713-100000@gannet.stats>
Message-ID: <Pine.LNX.4.10.10109131504160.5394-100000@localhost.localdomain>

> 
> It uses what you tell it to in general.  Integers will be handled as
> integers, but as in C integer/numeric gives a numeric.  Rather than
> learn rules, use typeof or storage.mode as in
> > typeof(1:1000)
> [1] "integer"
> 
> to find out, or make explicit coercions (as.numeric) if you want to make
> assumptions about objects.
Well you saw where I was hit by unexpected integers. BTW did you notice
that integers in a<-1:1000 caused a problem in
sum(a*a) * sum(b*b)
and not in 
crossprod(a,a) * crossprod(b,b)?
sum() preserved the integers as integers and crossprod() coerced them to
doubles.

I don't think you can do any arithmetic at all unless you make some
assumptions. Are you saying I should do as.double(a) every time I do
anything with vectors in R???

As it now stands, R makes most things double, with some exceptions as you
give below. Why not eliminate the exceptions?

> At present you are only likely to get integers from m:n and similar
> seq() calls, and from unclass on a factor.  But no one is saying that will
> not change in the future (and it did from S3 to S4).

>  And you could
> always have a user who used as.integer explicitly.
Yes, that's fine.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Sep 13 17:58:58 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 13 Sep 2001 12:58:58 -0400 (EDT)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.GSO.4.31.0109121814450.6636-100000@auk.stats>
Message-ID: <Pine.LNX.4.30.0109131148330.2512-100000@bolker.zoo.ufl.edu>


  It was pretty straightforward.
  I haven't tested it very extensively, and not on a Mac at all.  The only
subtlety is skipping commented lines at the beginning of the file because
read.table assumes that the first line (not the first non-blank line) is
the header line if header=TRUE.

read.table.c <- function(file,comment="#",debug=FALSE,...) {
  infile <- file(file,"r")
  tmpfile <- file()
  cchar <- "#"
  while (length(cline <- readLines(infile,1))>0) {
    s <- strsplit(cline,cchar)[[1]][1]
    if (nchar(s)>0)  { ## skip blank lines to not screw up header
      if (debug) cat(s,"\n")
      writeLines(s,tmpfile)
    }
  }
  r <- read.table(tmpfile,...)
  close(infile)
  close(tmpfile)
  r
}


On Wed, 12 Sep 2001, Prof Brian D Ripley wrote:

> On Wed, 12 Sep 2001, Ben Bolker wrote:
>
> >
> >   How difficult would it be (I could try myself if someone thought it
> > would be straightforward) to change read.table to allow a comment
> > character such as # or %?  My thought would be that anything on a line
>
> It's hard in read.table, especially given the changes in R-devle to mke it
> more flexible.  The place to do this seems to me to be the internals of
> scan.  They are far from transparent, though.
>
> > following a comment character would be ignored (so that the combination of
> > blank.lines.skip=TRUE and a comment at the beginning of the line would
> > lead to a line being skipped completely).
> >  I'm always encouraging my students to comment their data sets, and it
> > feels lame to tell them they have to count the number of initial lines in
> > the data set in order to set the "skip" parameter appropriately.  (The
> > comment character would also allow comments about a particular data
> > point.)
> >
> >   I know I could hack this (a) with sed in Unix [but my students using
> > Windows are likely to have trouble] (b) within R, by processing the file
> > and creating a temporary file with comments deleted.  (b) is probably what
> > I'll do as a temporary fix, but this seems to be a reasonable piece of
> > functionality for R to have ...
>
> (b) seems easy to me. Use either a file() connection or an output text
> connection.  (I don't know if file(), that's no arg, works on Mac for
> example, though.)
>
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Thu Sep 13 18:03:11 2001
From: fharrell@virginia.edu (Frank E Harrell Jr)
Date: Thu, 13 Sep 2001 13:03:11 -0400
Subject: [Rd] SV4 on R?
Message-ID: <3BA0E6CF.C443E84C@virginia.edu>

Dear R-Developers,

The traffic today on s-news where Terry Therneau, I, and others
are reporting some of the problems we have had using or
converting applications to SV4 reminded me of something
Duncan Temple Lang had mentioned to me a year ago that
I wanted to follow up on.  I recall that Duncan said either that if SV4
were to be implemented in R that it would not be
the default behavior, or that through an option the
new behavior could be turned off.  Would you mind
bringing me up to date on this?  I sincerely hope
that what I thought Duncan said last year still
applies.  Thank you very much for your consideration.  -Frank

P.S.  If anyone receiving this does not subscribe to s-news
and wants to receive background information please let me know.
-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 13 18:38:28 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 13 Sep 2001 18:38:28 +0100 (BST)
Subject: [Rd] SV4 on R?
In-Reply-To: <3BA0E6CF.C443E84C@virginia.edu>
Message-ID: <Pine.GSO.4.31.0109131831030.27843-100000@auk.stats>

On Thu, 13 Sep 2001, Frank E Harrell Jr wrote:

> Dear R-Developers,
>
> The traffic today on s-news where Terry Therneau, I, and others
> are reporting some of the problems we have had using or
> converting applications to SV4 reminded me of something
> Duncan Temple Lang had mentioned to me a year ago that
> I wanted to follow up on.  I recall that Duncan said either that if SV4
> were to be implemented in R that it would not be
> the default behavior, or that through an option the
> new behavior could be turned off.  Would you mind
> bringing me up to date on this?  I sincerely hope
> that what I thought Duncan said last year still
> applies.  Thank you very much for your consideration.  -Frank


There are lots of aspects of S4 behaviour.  Some R already has
(connections, preserving logicals in data frames, for example).  I guess
you are concerned about classes. There I don't think a decision has been
taken.  There is a `methods' package in R-devel, written by John Chambers
that is not yet finished (or I believe so, as it is being changed quite
rapidly and is only partially documented).  What is likely is that in R
1.4.0 all objects will have classes, and that functions like identical(),
as() and is() will be available.  So far this has caused only a few
problems, mainly because there are not problems like the "named" class
presents in S4. (Bit of background: any vector with names in S4 is of class
"named", and that includes lists with names.)

Assuming we decide to keep it I don't expect that all objects will have a
class is not going to be optional.  You will get classes like "numeric"
from class(x).  I think that's a good move.  It does mean that a test for
null class should be a test of !is.object(x), probably.

I do think you and Terry and others are being too negative. The problems
are not with designing new S4 classes to do the job, but porting S3 ones.
I believe too few people have tried to re-design to make use of S4 classes
for there to be enough evidence.  FWIW, MASS and nnet have been using
S4 classes for a few years quite sucessfully: we re-designed the classes.
We stopped because no one else seemed to be moving, and the basic modelling
functions are still confined to S3-style objects.


Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dsmith@insightful.com  Thu Sep 13 19:07:36 2001
From: dsmith@insightful.com (David Smith)
Date: Thu, 13 Sep 2001 11:07:36 -0700
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.31.0109130948310.14470-100000@gannet.stats>
Message-ID: <LGEFIDJJDBKMHCAKBCOICEEJDLAA.dsmith@insightful.com>

> If you use integers you need to be aware of the consequences.  It's a
> feature not a bug.

Perhaps, but maybe a more useful feature would be to signal to the user when
such an overflow occurs?  Sv4 does this by returning NA for overflow integer
results:

> a <- (1:1000)
> b <- (1:1000)
> sum(a * a) * sum(b * b)
[1] NA

When this was introduced in S-PLUS 5, we discovered some overflow errors we
were previously unaware of in S-PLUS (by noticing NAs in the results).

# David Smith

--
David M Smith <dsmith@insightful.com>
S-PLUS Product Marketing Manager, Insightful Corp, Seattle WA
Tel: +1 (206) 283 8802 x360
Fax: +1 (206) 283 0347

Learn how Merck, Proctor & Gamble, Merrill Lynch and others are using
S-PLUS, deploying Web-based analytics and more at the 2001 S-PLUS User
Conference being held in Philadelphia, October 18-19 -
www.insightful.com/events/2001uc.

> -----Original Message-----
> From: owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]On Behalf Of Prof Brian Ripley
> Sent: Thursday, September 13, 2001 01:54
> To: wsi@gcal.ac.uk
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: Re: [Rd] sum overflow (PR#1091)
>
>
> It's not a problem with sum:
>
> > sum(a*a)
> [1] 333833500
> > sum(b*b)
> [1] 333833500
>
> are accurate.
>
> The overflow is in the integer arithmetic for *.  That's a question for
> your C run-time system.  On a 64-bit machine you might get different
> results (although most use 32-bit ints, including mine).
>
> If you use integers you need to be aware of the consequences.  It's a
> feature not a bug.
>
>
> On Thu, 13 Sep 2001 wsi@gcal.ac.uk wrote:
>
> > Full_Name: Bill Simpson
> > Version: 1.2.3
> > OS: linux
> > Submission from: (NULL) (193.62.250.209)
> >
> >
> > I think I have found an accuracy problem with sum()
> >
> > > a<-1:1000
> > > b<-1:1000
> > >
> > > crossprod(a,a)*crossprod(b,b)
> >              [,1]
> > [1,] 1.114448e+17
> > > drop(.Last.value)
> > [1] 1.114448e+17
> > >
> > #this should give same answer as above
> > > sum(a*a)*sum(b*b)
> > [1] -652010736
> > #seems to be due to sum using integer representation which
> overflows instead of
> > using
> > #double representation
> >
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> > r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
> r-devel-request@stat.math.ethz.ch
> >
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._
> >
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Thu Sep 13 19:35:32 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Thu, 13 Sep 2001 20:35:32 +0200 (CEST)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.LNX.4.30.0109131148330.2512-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.33.0109132031110.510-100000@kleigh.nl>

Ben Bolker scribeva...

>
>   It was pretty straightforward.
>   I haven't tested it very extensively, and not on a Mac at all.  The only
> subtlety is skipping commented lines at the beginning of the file because
> read.table assumes that the first line (not the first non-blank line) is
> the header line if header=TRUE.
>
> read.table.c <- function(file,comment="#",debug=FALSE,...) {
>   infile <- file(file,"r")
>   tmpfile <- file()
>   cchar <- "#"
>   while (length(cline <- readLines(infile,1))>0) {
>     s <- strsplit(cline,cchar)[[1]][1]
>     if (nchar(s)>0)  { ## skip blank lines to not screw up header
>       if (debug) cat(s,"\n")
>       writeLines(s,tmpfile)
>     }
>   }
>   r <- read.table(tmpfile,...)
>   close(infile)
>   close(tmpfile)
>   r
> }

That is not very robust. What about these:

    # a comment
    1 2 3  # a comment
           # a comment
    "1" "2" "3  # not a comment"
    "# not a comment"  # a comment

Comments don't have to start at the first column, and comments
can also exist after real data. A comment char within a string
should not be taken as the start of a comment, and you also have
to take into account that the tokens delimiting a string can
vary.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu Sep 13 20:08:26 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 13 Sep 2001 15:08:26 -0400
Subject: [Rd] SV4 on R?
References: <Pine.GSO.4.31.0109131831030.27843-100000@auk.stats>
Message-ID: <3BA1042A.A55594C8@research.bell-labs.com>

Prof Brian D Ripley wrote:
> 
> On Thu, 13 Sep 2001, Frank E Harrell Jr wrote:
> 
> > Dear R-Developers,
> >
> > The traffic today on s-news where Terry Therneau, I, and others
> > are reporting some of the problems we have had using or
> > converting applications to SV4 reminded me of something
> > Duncan Temple Lang had mentioned to me a year ago that
> > I wanted to follow up on.  I recall that Duncan said either that if SV4
> > were to be implemented in R that it would not be
> > the default behavior, or that through an option the
> > new behavior could be turned off.  Would you mind
> > bringing me up to date on this?  I sincerely hope
> > that what I thought Duncan said last year still
> > applies.  Thank you very much for your consideration.  -Frank
> 
> There are lots of aspects of S4 behaviour.  Some R already has
> (connections, preserving logicals in data frames, for example).  I guess
> you are concerned about classes. There I don't think a decision has been
> taken.  There is a `methods' package in R-devel, written by John Chambers
> that is not yet finished (or I believe so, as it is being changed quite
> rapidly and is only partially documented).  What is likely is that in R
> 1.4.0 all objects will have classes, and that functions like identical(),
> as() and is() will be available.  So far this has caused only a few
> problems, mainly because there are not problems like the "named" class
> presents in S4. (Bit of background: any vector with names in S4 is of class
> "named", and that includes lists with names.)
> 
> Assuming we decide to keep it I don't expect that all objects will have a
> class is not going to be optional.  You will get classes like "numeric"
> from class(x).  I think that's a good move.  It does mean that a test for
> null class should be a test of !is.object(x), probably.

In the current 1.4, the new definitions are in a package "methods". 
Unless that package is attached, the old versions (only) apply,
including the definition of class.  So at present, you can have the
old-style class definition if you want.  In the long run, that may
change as Brian suggests.

In the R context, there are a number of future plans such as threading,
namespaces and compiling.  Defining those using the "S3" model seems to
me to be difficult and undesirable.  Luke and Duncan can comment more
authoritatively, since they are mainly responsible.

> I do think you and Terry and others are being too negative. The problems
> are not with designing new S4 classes to do the job, but porting S3 ones.
> I believe too few people have tried to re-design to make use of S4 classes
> for there to be enough evidence.  FWIW, MASS and nnet have been using
> S4 classes for a few years quite sucessfully: we re-designed the classes.
> We stopped because no one else seemed to be moving, and the basic modelling
> functions are still confined to S3-style objects.
> 
> Brian
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 13 20:43:26 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 13 Sep 2001 20:43:26 +0100 (BST)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.LNX.4.33.0109132031110.510-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.31.0109132041470.28504-100000@auk.stats>

I do intend to do this at a lower level where it will be robust.
As Peter says, quotes are one of the issues I had been thinking about.
I would be happy in the interim to insist on starting with a comment
character.

B


On Thu, 13 Sep 2001, Peter Kleiweg wrote:

> Ben Bolker scribeva...
>
> >
> >   It was pretty straightforward.
> >   I haven't tested it very extensively, and not on a Mac at all.  The only
> > subtlety is skipping commented lines at the beginning of the file because
> > read.table assumes that the first line (not the first non-blank line) is
> > the header line if header=TRUE.
> >
> > read.table.c <- function(file,comment="#",debug=FALSE,...) {
> >   infile <- file(file,"r")
> >   tmpfile <- file()
> >   cchar <- "#"
> >   while (length(cline <- readLines(infile,1))>0) {
> >     s <- strsplit(cline,cchar)[[1]][1]
> >     if (nchar(s)>0)  { ## skip blank lines to not screw up header
> >       if (debug) cat(s,"\n")
> >       writeLines(s,tmpfile)
> >     }
> >   }
> >   r <- read.table(tmpfile,...)
> >   close(infile)
> >   close(tmpfile)
> >   r
> > }
>
> That is not very robust. What about these:
>
>     # a comment
>     1 2 3  # a comment
>            # a comment
>     "1" "2" "3  # not a comment"
>     "# not a comment"  # a comment
>
> Comments don't have to start at the first column, and comments
> can also exist after real data. A comment char within a string
> should not be taken as the start of a comment, and you also have
> to take into account that the tokens delimiting a string can
> vary.
>
> --
> Peter Kleiweg
> http://www.let.rug.nl/~kleiweg/
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Sep 13 21:45:37 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 13 Sep 2001 16:45:37 -0400
Subject: FW: [Rd] sum overflow (PR#1091)
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEDEE@groexmbcr02.pfizer.com>


> From: David Smith [mailto:dsmith@insightful.com]
>> From: Prof Brian Ripley
>>
>> If you use integers you need to be aware of the consequences.  It's a
>> feature not a bug.
>
> Perhaps, but maybe a more useful feature would be to signal to the user
when
> such an overflow occurs?  Sv4 does this by returning NA for overflow
integer
> results:
> 
> > a <- (1:1000)
> > b <- (1:1000)
> > sum(a * a) * sum(b * b)
> [1] NA
> 
> When this was introduced in S-PLUS 5, we discovered some overflow errors
we
> were previously unaware of in S-PLUS (by noticing NAs in the results).

This is a first step in the right direction.  I think that having overflows
generate of NA's should be augmented by a warning or an error message.
Thus we would get something like:

> a <- (1:1000)
> b <- (1:1000)
> sum(a * a) * sum(b * b)
Warning messages: 
Integer overflow produced NA's in: .Primitive("*") 
> [1] NA

Now, the problem will be clear to the user, and many users will immediately
see how to get around it.

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Sep 14 00:04:49 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 13 Sep 2001 19:04:49 -0400 (EDT)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.LNX.4.33.0109132031110.510-100000@kleigh.nl>
Message-ID: <Pine.LNX.4.30.0109131857260.12164-100000@bolker.zoo.ufl.edu>

On Thu, 13 Sep 2001, Peter Kleiweg wrote:

  [snip]
>
> That is not very robust. What about these:
>
1>     # a comment
2>     1 2 3  # a comment
3>            # a comment
4>     "1" "2" "3  # not a comment"
5>     "# not a comment"  # a comment
>
> Comments don't have to start at the first column, and comments
> can also exist after real data. A comment char within a string
> should not be taken as the start of a comment, and you also have
> to take into account that the tokens delimiting a string can
> vary.
>

  As Brian Ripley has pointed out, he hopes to do this at a lower level,
more robustly, later.  In the meantime, in my defense: this code works for
lines 1, 2, and 3 (it's OK with comments that start after the first column
and that exist after real data -- that was part of my spec).  It doesn't
deal with comment characters embedded in quoted strings, but I don't have
any problem with telling people that they're not allowed to have comment
characters in quoted strings in their data -- it seems to be a perfectly
reasonable restriction.
  If I wanted to hack this further I would probably try to do a strsplit
on quotation characters, and look for comment characters only in the odd
parts of the split.  And if someone puts

  "\"\\"\\\" ## "  "#" "\\  \" \#"

in their data file, then they deserve what they get ... :-)

  Ben Bolker


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Fri Sep 14 13:17:09 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Fri, 14 Sep 2001 07:17:09 -0500
Subject: [Rd] SV4 on R?
In-Reply-To: <3BA0E6CF.C443E84C@virginia.edu>; from fharrell@virginia.edu on Thu, Sep 13, 2001 at 01:03:11PM -0400
References: <3BA0E6CF.C443E84C@virginia.edu>
Message-ID: <20010914071709.B29028@nokomis.stat.umn.edu>

On Thu, Sep 13, 2001 at 01:03:11PM -0400, Frank E Harrell Jr wrote:
> Dear R-Developers,
> 
> The traffic today on s-news where Terry Therneau, I, and others
> are reporting some of the problems we have had using or
> converting applications to SV4 reminded me of something
> Duncan Temple Lang had mentioned to me a year ago that
> I wanted to follow up on.  I recall that Duncan said either that if SV4
> were to be implemented in R that it would not be
> the default behavior, or that through an option the
> new behavior could be turned off.  Would you mind
> bringing me up to date on this?  I sincerely hope
> that what I thought Duncan said last year still
> applies.  Thank you very much for your consideration.  -Frank
> 
> P.S.  If anyone receiving this does not subscribe to s-news
> and wants to receive background information please let me know.

One of the reasons for looking at alternatives to the SV3 style
classes is that they are not very compatible with one thing I think we
need fairly badly: some form name space management.

Name spaces are about controlling which variables in a package are
visible outside a package and about preventing variables in one
package from unintentionally shadowing ones in another.  With name
spaces packages will be more robust; separately developed packages can
be used together more safely.  This is why languages like Tcl and Perl
have added name space facilities in recent years.  For R, name spaces
should also make maintaining the existing R code component of the core
system easier and also allow more internals to be migrated from C to
R.  Name spaces are also needed to support some ideas on byte code
compilation that are being explored.  Some early ideas on how name
spaces might be added to R are available off the developer page,
http://developer.r-project.org/.

Here is the problem with the SV3 approach. Suppose a package
SpecialDates defines a special kind of date class along with a
SpecialDate method for as.character.  A second class DataTree for
managing tree structured data defines a function that plots a tree of
generic objects using the as.character representations of the objects.
The current SV3 approach to dispatch needs to find a definition for
as.character.SpecialDate.  With a single dynamic search path as we
have now that is no problem.  But if we try to use name spaces of any
form I can think of to limit the things that are visible inside the
DataTree package then we also lose its ability to see methods of the
SV3 type that are defined outside the names pace, and this severely
limits the usefulness of generic functions.

Put another way, when a generic function is called with the SV3
dispatching approach it takes the name of the generic function, which
might be defined in one name space, and the name of a class whose
methods are defined in a second names pace, glues them together to get
the method name, and then needs to look up the method name in the right
place.  But at the call site it has no way of knowing that that right
place might be.

The only way around this that I can see is to provide some form of
registration mechanism for methods, some means of saying explicitly
that this function is a method for that generic function and that
class.  The SV4 model is one way, though certainly not the only way,
to achieve this.  By having explicit registration of classes the S4
model also provides for a way of having name space management for
class names, which is also useful.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Fri Sep 14 14:36:45 2001
From: fharrell@virginia.edu (Frank E Harrell Jr)
Date: Fri, 14 Sep 2001 09:36:45 -0400
Subject: [Rd] SV4 on R?
References: <3BA0E6CF.C443E84C@virginia.edu> <20010914071709.B29028@nokomis.stat.umn.edu>
Message-ID: <3BA207ED.C598359E@virginia.edu>

Dear Luke,

Thank you very much for the explanation and for the
good work you are doing on this.  It sounds very
valuable.  I do hope that it will not lead to
non-downward-compatible changes in the S language
except in perhaps unusual cases not affecting
many functions.

One other thought: Something short of what you
are developing could be implemented in the meantime,
namely "manual name registration" through a database
on r-project.org through which developers and users
could register function and class names.  Users
developing packages who desire to reuse an
already registered name would be able to search
the database to find potential incompatibilities 
or overrides they would need to warn users of the
package about.  Periodically-run automatic
database queries could compile lists of conflicts
that can be used to warn all users, with a
suggestion that those registering names last should
consider renaming tings. 
I believe that Stata, along with the
many other good decisions they have made, has
a web-driven registration system.  If Stata's
language were decent I would have been using it.

Let me renew a plea I've made before which will
lessen the need for some overrides.  A user-specified
vector of attribute names (e.g., "label", "comment",
"units") that would be carried forward when a vector
or matrix is subsetted would do away with the need for
the few overrides I have in R implementations of my
libraries, for [.* functions.

Best regards,

Frank Harrell


Luke Tierney wrote:
> 
> On Thu, Sep 13, 2001 at 01:03:11PM -0400, Frank E Harrell Jr wrote:
> > Dear R-Developers,
> >
> > The traffic today on s-news where Terry Therneau, I, and others
> > are reporting some of the problems we have had using or
> > converting applications to SV4 reminded me of something
> > Duncan Temple Lang had mentioned to me a year ago that
> > I wanted to follow up on.  I recall that Duncan said either that if SV4
> > were to be implemented in R that it would not be
> > the default behavior, or that through an option the
> > new behavior could be turned off.  Would you mind
> > bringing me up to date on this?  I sincerely hope
> > that what I thought Duncan said last year still
> > applies.  Thank you very much for your consideration.  -Frank
> >
> > P.S.  If anyone receiving this does not subscribe to s-news
> > and wants to receive background information please let me know.
> 
> One of the reasons for looking at alternatives to the SV3 style
> classes is that they are not very compatible with one thing I think we
> need fairly badly: some form name space management.
> 
> Name spaces are about controlling which variables in a package are
> visible outside a package and about preventing variables in one
> package from unintentionally shadowing ones in another.  With name
> spaces packages will be more robust; separately developed packages can
> be used together more safely.  This is why languages like Tcl and Perl
> have added name space facilities in recent years.  For R, name spaces
> should also make maintaining the existing R code component of the core
> system easier and also allow more internals to be migrated from C to
> R.  Name spaces are also needed to support some ideas on byte code
> compilation that are being explored.  Some early ideas on how name
> spaces might be added to R are available off the developer page,
> http://developer.r-project.org/.
> 
> Here is the problem with the SV3 approach. Suppose a package
> SpecialDates defines a special kind of date class along with a
> SpecialDate method for as.character.  A second class DataTree for
> managing tree structured data defines a function that plots a tree of
> generic objects using the as.character representations of the objects.
> The current SV3 approach to dispatch needs to find a definition for
> as.character.SpecialDate.  With a single dynamic search path as we
> have now that is no problem.  But if we try to use name spaces of any
> form I can think of to limit the things that are visible inside the
> DataTree package then we also lose its ability to see methods of the
> SV3 type that are defined outside the names pace, and this severely
> limits the usefulness of generic functions.
> 
> Put another way, when a generic function is called with the SV3
> dispatching approach it takes the name of the generic function, which
> might be defined in one name space, and the name of a class whose
> methods are defined in a second names pace, glues them together to get
> the method name, and then needs to look up the method name in the right
> place.  But at the call site it has no way of knowing that that right
> place might be.
> 
> The only way around this that I can see is to provide some form of
> registration mechanism for methods, some means of saying explicitly
> that this function is a method for that generic function and that
> class.  The SV4 model is one way, though certainly not the only way,
> to achieve this.  By having explicit registration of classes the S4
> model also provides for a way of having name space management for
> class names, which is also useful.
> 
> luke
> 
> --
> Luke Tierney
> University of Minnesota                      Phone:           612-625-7843
> School of Statistics                         Fax:             612-624-8868
> 313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
> Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Fri Sep 14 15:46:57 2001
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Fri, 14 Sep 2001 16:46:57 +0200 (MET DST)
Subject: [Rd] rowsum dimnames (PR#1092)
Message-ID: <200109141446.QAA16930@pubhealth.ku.dk>

The result of rowsum() in R doesn't have the dimnames I'd expect, e.g.:

> rowsum(matrix(1:12, 3,4), c("Y","X","Y"))
    [,1] [,2] [,3] [,4]
  1    2    5    8   11
  2    4   10   16   22

whereas S-Plus gives the more useful result:
    [,1] [,2] [,3] [,4] 
  X    2    5    8   11
  Y    4   10   16   22

This is because R's rowsum() code gives the first dimnames as "ugroup", which
is a factor, rather than "as.character(ugroup)".  Similarly for the assignment
of names(x) in the case where x is a vector.

I'm using R 1.3.0 on Solaris 2.6.  Help says rowsum's author is Terry Therneau.
Thanks!
			-- David Brahm (a215020@agate.fmr.com)

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Sep 15 09:18:03 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 15 Sep 2001 10:18:03 +0200
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.31.0109131443170.14713-100000@gannet.stats>
References: <Pine.LNX.4.10.10109131153420.5118-100000@localhost.localdomain>
 <Pine.LNX.4.31.0109131443170.14713-100000@gannet.stats>
Message-ID: <15267.3771.66526.124837@gargle.gargle.HOWL>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Thu, 13 Sep 2001, Bill Simpson wrote:
    >> > It's not a problem with sum:
    >> >
    >> > > sum(a*a)
    >> > [1] 333833500
    >> > > sum(b*b)
    >> > [1] 333833500
    >> >
    >> > are accurate.
    >> >
    >> > The overflow is in the integer arithmetic for *.  That's a question for
    >> > your C run-time system.  On a 64-bit machine you might get different
    >> > results (although most use 32-bit ints, including mine).
    >> >
    >> > If you use integers you need to be aware of the consequences.  It's a
    >> > feature not a bug.
    >> I thought R used an internal rep that was double in all cases.

    BDR> Assumed, I guess, as I've never seen that in the manuals.

    >> Now I'm confused:
    >> > a<-(1:1000)
    >> > b<-(1:1000)
    >> > sum(a*a)*sum(b*b)
    >> [1] -652010736
    >> > a<-(1:1000)/1.0
    >> > b<-(1:1000)/1.0
    >> > sum(a*a)*sum(b*b)
    >> [1] 1.114448e+17
    >> 
    >> So  R somehow decides whether to use an integer or a double
    >> representation? Please tell me the rule used by R so I will know in the
    >> future.

    BDR> It uses what you tell it to in general.  Integers will be handled as
    BDR> integers, but as in C integer/numeric gives a numeric.  Rather than
    BDR> learn rules, use typeof or storage.mode as in
    >> typeof(1:1000)
    BDR> [1] "integer"

    BDR> to find out, or make explicit coercions (as.numeric) if you want
    BDR> to make assumptions about objects.

    BDR> At present you are only likely to get integers from m:n and
    BDR> similar seq() calls, and from unclass on a factor.  

also  length() and dim()
on which I even rely in .C() calls when not using explicit as.integer()
there  [but many will tell me that was not "defensive" and un-wise].

    BDR>  But no one is saying that will not change in the future (and it
    BDR> did from S3 to S4).  And you could always have a user who used
    BDR> as.integer explicitly.

indeed!

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Sat Sep 15 13:23:04 2001
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Sat, 15 Sep 2001 14:23:04 +0200 (MET DST)
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun Solaris (PR#1093)
Message-ID: <200109151223.OAA19865@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.3.1
OS: Sun Solaris 8
Submission from: (NULL) (130.235.3.49)


I have been trying to install [R] v1.3.1 locally on a Sun Solaris 8 machine and
I ran into the (already known) perl problems that express theselves as:

Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1390, near "$txtout
mywrap"
        (Missing operator before mywrap?)
Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1405, near "$txtout
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1420, near "$txtout
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1448, near "$txtout
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1491, near "$txtout
txt_header"
        (Missing operator before txt_header?)

I searched the web for solutions and found Brian Ripley's suggestion one of the
replies to "Re: [Rd] several documentation problems (PR#675)". There he
suggested to add a '&' infront of 'mywrap' and 'txt_header'; "Another guess is
that it might require &mywrap there.". I tried this and it works. I also tried
the alternative to add parentesis around the function calls, which also seemed
to work. 

My suggestion is to add this to Rdconv.pm at the 5 lines above. This would make
the building of [R] a little bit easier.


Perl version used: 

"This is perl, version 5.003 with EMBED built under solaris at Sep 14 1996
22:39:00 + suidperl security patch". 

This is the version of perl installed on a brand new (2001-09-10) Sun
SunBlade100 Solaris machine.

[R] version: Trying to install R v1.3.1.


Regards

Henrik Bengtsson
Lund University
Sweden

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep 15 15:11:59 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 15 Sep 2001 15:11:59 +0100 (BST)
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun
 Solaris (PR#1093)
In-Reply-To: <200109151223.OAA19865@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0109151445290.3896-100000@toucan.stats>

On Sat, 15 Sep 2001 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.3.1
> OS: Sun Solaris 8
> Submission from: (NULL) (130.235.3.49)
>
>
> I have been trying to install [R] v1.3.1 locally on a Sun Solaris 8 machine and
> I ran into the (already known) perl problems that express theselves as:

[...]

> My suggestion is to add this to Rdconv.pm at the 5 lines above. This would make
> the building of [R] a little bit easier.
>
>
> Perl version used:
>
> "This is perl, version 5.003 with EMBED built under solaris at Sep 14 1996
                                                                        ^^^^
> 22:39:00 + suidperl security patch".

It was a bug in one version of perl around five years ago.  Incidentally,
it must have been built under a much older version of Solaris (as I recall
2.6 came out in 1998: certainly we first used it in late 1998), and
we find it is a good idea to rebuild perl at Solaris upgrades, especially
upgrading from 2.5.x.

We don't know (and don't have the resources to check) if the changed
version works on all more recent perl versions in use by R installers.

I do believe the solution is well-known: use perl 5.005, 5.6.0 or
(preferably) 5.6.1.  Perhaps we should test for perl >= 5.005?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep 15 18:21:10 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 15 Sep 2001 19:21:10 +0200
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun
 Solaris (PR#1093)
In-Reply-To: <Pine.GSO.4.31.0109151445290.3896-100000@toucan.stats>
References: <200109151223.OAA19865@pubhealth.ku.dk>
 <Pine.GSO.4.31.0109151445290.3896-100000@toucan.stats>
Message-ID: <15267.36358.740330.761626@mithrandir.hornik.net>

>>>>> Prof Brian Ripley writes:

> On Sat, 15 Sep 2001 hb@maths.lth.se wrote:
>> Full_Name: Henrik Bengtsson
>> Version: 1.3.1
>> OS: Sun Solaris 8
>> Submission from: (NULL) (130.235.3.49)
>> 
>> 
>> I have been trying to install [R] v1.3.1 locally on a Sun Solaris 8 machine and
>> I ran into the (already known) perl problems that express theselves as:

> [...]

>> My suggestion is to add this to Rdconv.pm at the 5 lines above. This would make
>> the building of [R] a little bit easier.
>> 
>> 
>> Perl version used:
>> 
>> "This is perl, version 5.003 with EMBED built under solaris at Sep 14 1996
>                                                                         ^^^^
>> 22:39:00 + suidperl security patch".

> It was a bug in one version of perl around five years ago.  Incidentally,
> it must have been built under a much older version of Solaris (as I recall
> 2.6 came out in 1998: certainly we first used it in late 1998), and
> we find it is a good idea to rebuild perl at Solaris upgrades, especially
> upgrading from 2.5.x.

> We don't know (and don't have the resources to check) if the changed
> version works on all more recent perl versions in use by R installers.

> I do believe the solution is well-known: use perl 5.005, 5.6.0 or
> (preferably) 5.6.1.  Perhaps we should test for perl >= 5.005?

Not sure, from a theoretical point of view: we really only require Perl
version 5.  But if we think that anything less than 5.005 is too buggy
then let's go for the change.  (Something like

	${PERL} -e 'require 5.005 or exit 1'

in PERL5_CHECK() of m4/R.m4?)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sun Sep 16 00:32:36 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Sun, 16 Sep 2001 01:32:36 +0200 (CEST)
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun
 Solaris (PR#1093)
In-Reply-To: <15267.36358.740330.761626@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0109160130030.383-100000@kleigh.nl>

Kurt Hornik scribeva...

> Not sure, from a theoretical point of view: we really only require Perl
> version 5.  But if we think that anything less than 5.005 is too buggy
> then let's go for the change.  (Something like
>
> 	${PERL} -e 'require 5.005 or exit 1'
>
> in PERL5_CHECK() of m4/R.m4?)

I'm still using Perl 5.004, and R installs without problems.
Wouldn't like to update Perl just to install a new version of R.
Perhaps a warning message would be more appropriate than an
error.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Sun Sep 16 02:53:36 2001
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 15 Sep 2001 20:53:36 -0500
Subject: [Rd] Using closures in libraries
Message-ID: <qxpzo7vj3z3.fsf@verdi.stat.wisc.edu>

I was trying to use closures within a library as follows -

foo <- local({
    # some code creating local variables
    function() {
        # uses the local variables created above
    })

It did not work because call to do_libfixup in library replaces all
the closure environments by the global environment. One way around
this would be to do the replacement only for closures that have the
same environment as the package environment. Basically change the
relevant lines in envir.c (do_libfixup) with -

	while (p != R_NilValue) {
	    if (TYPEOF(CAR(p)) == CLOSXP && CLOENV(CAR(p)) != lib)
		SET_CLOENV(CAR(p), env);
	    p = CDR(p);
	}

In case any one wonders, I know I could wrap the function in a list
and call the function with foo[[1]]() - but it really does not look
very natural. Closures are often so useful that it is desirable that
they can be used from libraries.

Can someone comment whether this change can be made and whether this
would cause any problems?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Sun Sep 16 03:21:25 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Sat, 15 Sep 2001 21:21:25 -0500
Subject: [Rd] Using closures in libraries
In-Reply-To: <qxpzo7vj3z3.fsf@verdi.stat.wisc.edu>; from saikat@stat.wisc.edu on Sat, Sep 15, 2001 at 08:53:36PM -0500
References: <qxpzo7vj3z3.fsf@verdi.stat.wisc.edu>
Message-ID: <20010915212125.B2176@nokomis.stat.umn.edu>

On Sat, Sep 15, 2001 at 08:53:36PM -0500, Saikat DebRoy wrote:
> I was trying to use closures within a library as follows -
> 
> foo <- local({
>     # some code creating local variables
>     function() {
>         # uses the local variables created above
>     })
> 
> It did not work because call to do_libfixup in library replaces all
> the closure environments by the global environment. One way around
> this would be to do the replacement only for closures that have the
> same environment as the package environment. Basically change the
> relevant lines in envir.c (do_libfixup) with -
> 
> 	while (p != R_NilValue) {
> 	    if (TYPEOF(CAR(p)) == CLOSXP && CLOENV(CAR(p)) != lib)
> 		SET_CLOENV(CAR(p), env);
> 	    p = CDR(p);
> 	}
> 
> In case any one wonders, I know I could wrap the function in a list
> and call the function with foo[[1]]() - but it really does not look
> very natural. Closures are often so useful that it is desirable that
> they can be used from libraries.
> 
> Can someone comment whether this change can be made and whether this
> would cause any problems?

Unfortunately it would cause problems.  What is currently done is a
fairly gross hack that is intended to get .Global env into the picture
and to avoid a situation where saving one function from the library in
a workspace drags in the whole library.  It accomplishes that but
throws out the baby with the bath water.  The fix you suggest would
cause these problems to reappear (though in a reduced form).  We need
to redesign the whole mechanism, and I'm mildly optimistic that will
happen before 1.4 is released.

There is an easy workaround though: install the package with --save.
That preserves environments in a sensible way (and is basically what
we need to emulate for the standard case).

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Sep 16 07:32:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 16 Sep 2001 07:32:27 +0100 (BST)
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun
 Solaris (PR#1093)
In-Reply-To: <Pine.LNX.4.33.0109160130030.383-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.31.0109160722540.7821-100000@auk.stats>

On Sun, 16 Sep 2001, Peter Kleiweg wrote:

> Kurt Hornik scribeva...
>
> > Not sure, from a theoretical point of view: we really only require Perl
> > version 5.  But if we think that anything less than 5.005 is too buggy

which I guess means we want an implementation of the Camel book 2nd edition
(`Programming Perl'), as Perl 5 is not a standard.  And my understanding is
that our code is legal by the Camel book, but 5.003 mis-parses it.

> > then let's go for the change.  (Something like
> >
> > 	${PERL} -e 'require 5.005 or exit 1'
> >
> > in PERL5_CHECK() of m4/R.m4?)
>
> I'm still using Perl 5.004, and R installs without problems.

Thanks for the confirmation.

> Wouldn't like to update Perl just to install a new version of R.
> Perhaps a warning message would be more appropriate than an
> error.

Would people notice a warning in all the output from configure?  This has
come up twice in the last year and a few more times before (with RedHat 5.2
as I recall).  We know that 5.003 is the one that caused the last two, so I
do think

${PERL} -e 'require 5.004 or exit 1'

would be a good idea.

B

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Sep 16 12:11:39 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 16 Sep 2001 13:11:39 +0200 (MET DST)
Subject: [Rd] rowsum dimnames (PR#1092)
Message-ID: <200109161111.NAA22091@pubhealth.ku.dk>

On Fri, 14 Sep 2001 brahm@alum.mit.edu wrote:

> The result of rowsum() in R doesn't have the dimnames I'd expect, e.g.:
>
> > rowsum(matrix(1:12, 3,4), c("Y","X","Y"))
>     [,1] [,2] [,3] [,4]
>   1    2    5    8   11
>   2    4   10   16   22
>
> whereas S-Plus gives the more useful result:
>     [,1] [,2] [,3] [,4]
>   X    2    5    8   11
>   Y    4   10   16   22
>
> This is because R's rowsum() code gives the first dimnames as "ugroup", which
> is a factor, rather than "as.character(ugroup)".  Similarly for the assignment
> of names(x) in the case where x is a vector.
>
> I'm using R 1.3.0 on Solaris 2.6.  Help says rowsum's author is Terry Therneau.
> Thanks!
> 			-- David Brahm (a215020@agate.fmr.com)

Change a couple of lines to

	dimnames(new.x) <- list(as.character(ugroup), colnames(x))
	names(new.x) <- as.character(ugroup)

(as you seem to be aware).

Done in the sources for 1.4.0.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From puetsch@bigfoot.de  Mon Sep 17 11:53:27 2001
From: puetsch@bigfoot.de (puetsch@bigfoot.de)
Date: Mon, 17 Sep 2001 12:53:27 +0200 (MET DST)
Subject: [Rd] lab does not work (PR#1094)
Message-ID: <200109171053.MAA28976@pubhealth.ku.dk>

Full_Name: Felix Puetsch
Version: 1.3.0
OS: Win ME
Submission from: (NULL) (139.6.20.11)


It seems that the "lab" paramter of plot does not work as desired.

plot(sin)
plot(sin,lab=c(5,5,5))
plot(sin,lab=c(10,10,5))

all give the same plot.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep 17 12:42:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Sep 2001 13:42:53 +0200
Subject: [Rd] lab does not work (PR#1094)
In-Reply-To: <200109171053.MAA28976@pubhealth.ku.dk>
References: <200109171053.MAA28976@pubhealth.ku.dk>
Message-ID: <x23d5mjb5u.fsf@blueberry.kubism.ku.dk>

puetsch@bigfoot.de writes:

> It seems that the "lab" paramter of plot does not work as desired.
> 
> plot(sin)
> plot(sin,lab=c(5,5,5))
> plot(sin,lab=c(10,10,5))
> 
> all give the same plot.

Not a bug. lab is not among the parameters that you can set in a
high-level plot (see the help page for par()). What you can do
is set it with a par() call before calling plot, i.e.

par(lab=c(10,10,5)) ; plot(sin)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep 17 18:10:29 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 17 Sep 2001 19:10:29 +0200
Subject: [Rd] Re: AIC & logLik for glm
In-Reply-To: <Pine.LNX.4.31.0109111241300.10651-100000@gannet.stats>
References: <3B9DED01.6B673D9E@ceam.es>
 <Pine.LNX.4.31.0109111241300.10651-100000@gannet.stats>
Message-ID: <15270.11909.306595.466358@gargle.gargle.HOWL>

[diverted to R-devel;  I'm really discussing future development]

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 11 Sep 2001, juli g. pausas wrote:
    >> Dear R collegues,
    >> I'm trying to understand what's AIC in R (ver. 1.3.1), and I'm getting a
    >> different answer if I look at the AIC(of the fitted model) or the aic in
    >> the summary( of the fitted model). Is this correct? Can somebody explain
    >> me the difference between the two values? or Is the AIC criterion not
    >> appropiated for Poisson models?

    BDR> It's the AIC _function_ that is inappropriate for glm models.
    BDR> There is no glm method, so the lm method is used.

actually, the AIC.lm() is just from the nlme package and it is very
much appropriate insofar as it entirely builds on logLik() {itself a generic}.
I've found recently, that I'd like to *rename* the current AIC.lm to
AIC.default since it is really correct whenever logLik() is correct.
For a private package, I recently found that I just could do
     AIC.myclass <- AIC.lm (and define a correct  logLik.myclass !!)
where the definition of AIC.myclass would have been unnecessary, had
AIC.lm been called AIC.default.  AIC() would then barf whenever there's no
logLik() method for the given model class which I'd think to be fine (no?)

    BDR> Martin: I think you moved AIC and logLik into base R: this needs
    BDR> sorting out.

yes.  However, I haven't changed the AIC.lm and logLik.lm methods, and the
currrent behavior is just what *was* the former behavior after
library(nlme) had been called, then.

What really needs a fix is logLik.lm(), probably by providing a
logLik.glm() method which seems almost trivial, given the way our glm
families are implemented, the internal aic() function is really -2*logLik(.).
For the quasi "family", the result would be NA, rightly.

BTW, I'm more and more wondering if we shouldn't commit these as patches to
1.3.x rather than only for 1.4..

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Sep 19 14:48:47 2001
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Wed, 19 Sep 2001 15:48:47 +0200 (MET DST)
Subject: [Rd] Bizarre clipping with abline and points (PR#1095)
Message-ID: <200109191348.PAA27712@pubhealth.ku.dk>

I want to put some points along the horizontal axis.

> plot(1:10, 1:10)
> points(4, par("usr")[3], xpd=TRUE)
> abline(v=5)

works fine for me.  But if I try

> plot(1:10, 1:10)
> abline(v=5)
> points(4, par("usr")[3], xpd=TRUE)

then the points are clipped.  The call to abline seems to be
enforcing xpd=FALSE for later calls to the plot.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Sep 19 15:08:56 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Sep 2001 16:08:56 +0200
Subject: [Rd] Bizarre clipping with abline and points (PR#1095)
In-Reply-To: <200109191348.PAA27712@pubhealth.ku.dk>
References: <200109191348.PAA27712@pubhealth.ku.dk>
Message-ID: <x2elp39ssn.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I want to put some points along the horizontal axis.
> 
> > plot(1:10, 1:10)
> > points(4, par("usr")[3], xpd=TRUE)
> > abline(v=5)
> 
> works fine for me.  But if I try
> 
> > plot(1:10, 1:10)
> > abline(v=5)
> > points(4, par("usr")[3], xpd=TRUE)
> 
> then the points are clipped.  The call to abline seems to be
> enforcing xpd=FALSE for later calls to the plot.

Confirmed, same effect with 

plot(1:10, 1:10)
points(4, par("usr")[3], xpd=FALSE)
points(4, par("usr")[3], xpd=TRUE)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hosking@watson.ibm.com  Wed Sep 19 15:38:54 2001
From: hosking@watson.ibm.com (hosking@watson.ibm.com)
Date: Wed, 19 Sep 2001 16:38:54 +0200 (MET DST)
Subject: [Rd] missing() (PR#1096)
Message-ID: <200109191438.QAA28403@pubhealth.ku.dk>

Full_Name: J. R. M. Hosking
Version: 1.3.0
OS: Windows 2000
Submission from: (NULL) (198.81.209.16)


R documentation suggests that if a function argument x is omitted,
missing(x) should return TRUE even if x is subsequently assigned a value.
This happens in S-plus.  But in R:

> test
function(x){
print(missing(x))
if(missing(x)) x<-0
print(missing(x))
invisible()
}
> test()
[1] TRUE
[1] FALSE
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Sep 19 15:47:40 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 19 Sep 2001 16:47:40 +0200 (MET DST)
Subject: [Rd] missing() (PR#1096)
Message-ID: <200109191447.QAA28531@pubhealth.ku.dk>

>From the FAQ:

   * In S, `missing(ARG)' remains `TRUE' if ARG is subsequently modified;
     in R it doesn't.


>From ?missing in 1.3.1:

Details:

     `missing(x)' is only reliable if `x' has not been altered since
     entering the function: in particular it will always be true after
     `x <- match.arg(x)'.

My guess is that whatever you were looking at has been changed in the
current version.


On Wed, 19 Sep 2001 hosking@watson.ibm.com wrote:

> Full_Name: J. R. M. Hosking
> Version: 1.3.0
> OS: Windows 2000
> Submission from: (NULL) (198.81.209.16)
>
>
> R documentation suggests that if a function argument x is omitted,
> missing(x) should return TRUE even if x is subsequently assigned a value.
> This happens in S-plus.  But in R:
>
> > test
> function(x){
> print(missing(x))
> if(missing(x)) x<-0
> print(missing(x))
> invisible()
> }
> > test()
> [1] TRUE
> [1] FALSE
> >
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Sep 20 21:33:18 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 20 Sep 2001 16:33:18 -0400 (EDT)
Subject: [Rd] file permissions check
Message-ID: <Pine.LNX.4.30.0109201625230.29516-100000@bolker.zoo.ufl.edu>


  Why does R CMD check require write permission on all files in the
package directory?
  I'm trying to maintain some of my packages using RCS, which means that
depending on the current state of the system there may be a bunch of
read-only files lying around.  However, unless I'm missing something I
don't see why that ought to be a problem that R detects and stops on.  For
the time being I'm just going to hack around it, but what is the rationale
here?

  Ben Bolker

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Sep 21 05:54:39 2001
From: edd@debian.org (edd@debian.org)
Date: Fri, 21 Sep 2001 06:54:39 +0200 (MET DST)
Subject: [Rd] R 1.3.1 fails 'make check' on arm in the Bessel example (PR#1097)
Message-ID: <200109210454.GAA13172@pubhealth.ku.dk>


Debian tries to build its packages on a variety of platforms.  The arm
platform compiled 0.90.1 (the last Debian release before the Debian package
required an Atlas library, something we no longer require) failed in 'make
check'. The log snippet follows; I traced this to the example(Bessel) code.
 
> matplot(nu, t(outer(xx,nu, besselI)), type = 'l', ylim = c(-50,200),
+         main = expression(paste("Bessel ",I[nu](x)," for fixed ", x,
+                                 ",  as ",f(nu))),
+         xlab = expression(nu))
Error in title(main = main, sub = sub, xlab = xlab, ylab = ylab, ...) :
        Metric information not yet available for this device
        In addition: Warning messages:
        1: Nonfinite axis limits [GScale(nan,nan,1, .); log=0]
        2: relative range of values = 9.0072e+15 * EPS, is small (axis 1).
        3: Nonfinite axis limits [GScale(-inf,inf,2, .); log=0]
        4: relative range of values = 9.0072e+15 * EPS, is small (axis 2).
        Execution halted

Casual inspection suggests that GScale(nan,nan,1, .) is probably
incorrect. Now, src/nmath/bessel* provide the Bessel functions but does this
reflect a potential libc bug in IEEE handling?

I have also asked on the debian-arm mailing list, but no result so far. I
have some access to an arm box and could compile small test cases if that
helped. 

Dirk 
 
--please do not edit the information below--
 
Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status =
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R
 
Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-- 
Better to have an approximate answer to the right question 
than a precise answer to the wrong question. -- John Tukey

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Fri Sep 21 06:15:03 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Fri, 21 Sep 2001 07:15:03 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200109210515.f8L5F3N10020@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400
* PR# 1081 *
Subject: problems installing R on Solaris 2.8 machine
From: Paivio Pollari <pollari@sun3.oulu.fi>
Date: Fri, 31 Aug 2001 08:54:23 +0300 (EET DST)
* PR# 1093 *
Subject: Solution to (well known) problem with Rdconv.pm on Sun Solaris
From: hb@maths.lth.se
Date: Sat, 15 Sep 2001 14:23:02 +0200 (MET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1052 *
Subject:  Inconsistent behaviour of is.vector? 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 14 Aug 2001 09:04:57 +0100
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068

Directory:  Macintosh

none

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
* PR# 1057 *
Subject: crt1.o skipped at configure time ?
From: laurent@cbs.dtu.dk
Date: Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
* PR# 1062 *
Subject: system.file("",package)
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Sun, 19 Aug 2001 16:01:57 -0700 (PDT)
* PR# 1084 *
Subject: Install problems R 1.3.1 on HP-UX
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Sun, 2 Sep 2001 15:07:41 +0200 (CEST)
* PR# 1089 *
Subject: Debian Woody r-base depends on blas2
From: michael_odonnell@acm.org
Date: Sat, 8 Sep 2001 20:25:32 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1094 *
Subject: lab does not work
From: puetsch@bigfoot.de
Date: Mon, 17 Sep 2001 12:53:25 +0200 (MET DST)
* PR# 1095 *
Subject:  Bizarre clipping with abline and points 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 19 Sep 2001 14:45:52 +0100
* PR# 1096 *
Subject: missing()
From: hosking@watson.ibm.com
Date: Wed, 19 Sep 2001 16:38:52 +0200 (MET DST)
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Sep 21 15:32:47 2001
From: edd@debian.org (edd@debian.org)
Date: Fri, 21 Sep 2001 16:32:47 +0200 (MET DST)
Subject: [Rd] (PR#1089) Can be closed
Message-ID: <200109211432.QAA21643@pubhealth.ku.dk>


I replied to Michael (on the list) explaining that the Depends: on blas2 was
"virtual", ie can be satisfied by either blas1 or atlas2. The bug report
probably belonged into the Debian bug archive anyway...

This can be closed.

Dirk

-- 
Three out of two people have difficulties with fractions.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Mon Sep 24 09:46:29 2001
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Mon, 24 Sep 2001 10:46:29 +0200 (MET DST)
Subject: [Rd] Trailing "/" makes file.exists() return FALSE (PR#1098)
Message-ID: <200109240846.KAA02333@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.3.1
OS: WinMe
Submission from: (NULL) (130.235.2.229)


I found the following bug on WinMe (I call it a bug, since the behavior is
different on WinMe than for instance Sun Solaris):

When calling file.exists() with an existing directory name ending with a "/"
(slash) [R] on WinMe will return FALSE, but when doing the same without the
ending "/" it will give TRUE.

I made a quick work around, but this should be taken care of in the native
code:

file.exists <- function(...) {
  # Remove trailing "/", but keep "C:/", "D:/"...
  files <- gsub("\:/$", "\://", c(...));
  files <- gsub("/$", "", files);
  .Internal(file.exists(files));
}


platform i386-pc-mingw32
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    3.1
year     2001
month    08
day      31
language R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep 24 11:09:43 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 24 Sep 2001 12:09:43 +0200 (MET DST)
Subject: [Rd] Trailing "/" makes file.exists() return FALSE (PR#1098)
Message-ID: <200109241009.MAA03895@pubhealth.ku.dk>

On Mon, 24 Sep 2001 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.3.1
> OS: WinMe
> Submission from: (NULL) (130.235.2.229)
>
>
> I found the following bug on WinMe (I call it a bug, since the behavior is
> different on WinMe than for instance Sun Solaris):
>
> When calling file.exists() with an existing directory name ending with a "/"
> (slash) [R] on WinMe will return FALSE, but when doing the same without the
> ending "/" it will give TRUE.
>
> I made a quick work around, but this should be taken care of in the native
> code:
>
> file.exists <- function(...) {
>   # Remove trailing "/", but keep "C:/", "D:/"...
>   files <- gsub("\:/$", "\://", c(...));
>   files <- gsub("/$", "", files);
>   .Internal(file.exists(files));
> }


This is not a bug.  A file path ending with "/" is not a file on Windows,
but it is on Solaris.  Next you'll be reporting that file specifications
with drives fail on Solaris: it other words, what is a valid file path is
OS-specific.

You'll find quite a lot of Windows tools reject paths ending in /: for
example the ls in Rtools thinks the directory is non-existent.

Similarly, Solaris accepts // in paths, but Windows does not.

> platform i386-pc-mingw32
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    3.1
> year     2001
> month    08
> day      31
> language R
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Mon Sep 24 12:30:20 2001
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Mon, 24 Sep 2001 13:30:20 +0200 (MET DST)
Subject: [Rd] Trailing "/" makes file.exists() return FALSE (PR#1098)
Message-ID: <200109241130.NAA05354@pubhealth.ku.dk>

I agree to some extend, but I believe a consistent behavior across platforms
is something that should be a goal. Originally I found this problem from a
package (by a group only running WinNT and Solaris) trying to do

   system.file("",package="base")

which should work and give a path according to the help;

Usage:

     system.file(..., package = "base", lib.loc = .lib.loc, pkg, lib)

Arguments:

     ...: character strings, specifying subdirectory and file(s) within
          some package.  The default, none or `""', returns the root of
          the package.  Wildcards are not supported.
...

Doing this on WinMe it gives "". I can't try this on WinNT, but I assume it
works since the group that made the package it using it. I tracked down the
problem to originate in either the .find.package() call or the file.exists()
call done within system.file(). Which one is a matter of taste. Also, I
noticed that system.file(package="base") without the "", gives the wanted
result.

However, I still argue that file.exists() should be robust enough to give
the same answer if the argument is "foo/" or "foo". I don't know about any
filesystem that can have a file and a directory with the same name in the
same directory, so that shouldn't be an issue. Looking at Java, its solution
(java.io) is very robust across platforms. I am always thinking about the
end-user and making their life easier.

Thanks for a great work

Henrik Bengtsson

Dept. of Mathematical Statistics @ Centre for Mathematical Sciences
Lund Institute of Technology/Lund University, Sweden (+2h UTC)
Office: P316, +46 46 222 9611 (phone), +46 46 222 4623 (fax)
hb@maths.lth.se, http://www.maths.lth.se/matstat/staff/hb/


> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: Monday, September 24, 2001 12:10 PM
> To: hb@maths.lth.se
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] Trailing "/" makes file.exists() return FALSE
> (PR#1098)
>
>
> On Mon, 24 Sep 2001 hb@maths.lth.se wrote:
>
> > Full_Name: Henrik Bengtsson
> > Version: 1.3.1
> > OS: WinMe
> > Submission from: (NULL) (130.235.2.229)
> >
> >
> > I found the following bug on WinMe (I call it a bug, since the
> behavior is
> > different on WinMe than for instance Sun Solaris):
> >
> > When calling file.exists() with an existing directory name
> ending with a "/"
> > (slash) [R] on WinMe will return FALSE, but when doing the same
> without the
> > ending "/" it will give TRUE.
> >
> > I made a quick work around, but this should be taken care of in
> the native
> > code:
> >
> > file.exists <- function(...) {
> >   # Remove trailing "/", but keep "C:/", "D:/"...
> >   files <- gsub("\:/$", "\://", c(...));
> >   files <- gsub("/$", "", files);
> >   .Internal(file.exists(files));
> > }
>
>
> This is not a bug.  A file path ending with "/" is not a file on Windows,
> but it is on Solaris.  Next you'll be reporting that file specifications
> with drives fail on Solaris: it other words, what is a valid file path is
> OS-specific.
>
> You'll find quite a lot of Windows tools reject paths ending in /: for
> example the ls in Rtools thinks the directory is non-existent.
>
> Similarly, Solaris accepts // in paths, but Windows does not.
>
> > platform i386-pc-mingw32
> > arch     x86
> > os       Win32
> > system   x86, Win32
> > status
> > major    1
> > minor    3.1
> > year     2001
> > month    08
> > day      31
> > language R
> >
> >
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> > r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
>

--
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep 24 12:50:32 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 24 Sep 2001 13:50:32 +0200 (MET DST)
Subject: [Rd] Trailing "/" makes file.exists() return FALSE (PR#1098)
Message-ID: <200109241150.NAA06388@pubhealth.ku.dk>

On Mon, 24 Sep 2001, Henrik Bengtsson wrote:

> I agree to some extend, but I believe a consistent behavior across platforms
> is something that should be a goal. Originally I found this problem from a

But the underlying OSes are not consistent, and the nature of your `bug'
report is that R is being truthful on each.  Which is the sort of
consistency we want.

> package (by a group only running WinNT and Solaris) trying to do
>
>    system.file("",package="base")
>
> which should work and give a path according to the help;
>
> Usage:
>
>      system.file(..., package = "base", lib.loc = .lib.loc, pkg, lib)
>
> Arguments:
>
>      ...: character strings, specifying subdirectory and file(s) within
>           some package.  The default, none or `""', returns the root of
>           the package.  Wildcards are not supported.
> ...

That's not correct, and not in the current R sources.  It is a
documentation bug that has already been fixed: search the bug report
database for system.file (it's not talking to me right now).

> Doing this on WinMe it gives "". I can't try this on WinNT, but I assume it
> works since the group that made the package it using it. I tracked down the
> problem to originate in either the .find.package() call or the file.exists()
> call done within system.file(). Which one is a matter of taste. Also, I
> noticed that system.file(package="base") without the "", gives the wanted
> result.
>
> However, I still argue that file.exists() should be robust enough to give
> the same answer if the argument is "foo/" or "foo". I don't know about any
> filesystem that can have a file and a directory with the same name in the
> same directory, so that shouldn't be an issue. Looking at Java, its solution
> (java.io) is very robust across platforms. I am always thinking about the
> end-user and making their life easier.

In which case think what happens when file.exists() incorrectly reports a
file as existing when it does not, and the user then tries to make use of
the file?  Let me stress (since you do seem to have missed the point) that
"foo/" is not a file on Windows, nor a directory on Windows. It does not
exist.  Whatever would be the point of a test that lied to you?


> Thanks for a great work
>
> Henrik Bengtsson
>
> Dept. of Mathematical Statistics @ Centre for Mathematical Sciences
> Lund Institute of Technology/Lund University, Sweden (+2h UTC)
> Office: P316, +46 46 222 9611 (phone), +46 46 222 4623 (fax)
> hb@maths.lth.se, http://www.maths.lth.se/matstat/staff/hb/
>
>
> > -----Original Message-----
> > From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
> > Sent: Monday, September 24, 2001 12:10 PM
> > To: hb@maths.lth.se
> > Cc: R-bugs@biostat.ku.dk
> > Subject: Re: [Rd] Trailing "/" makes file.exists() return FALSE
> > (PR#1098)
> >
> >
> > On Mon, 24 Sep 2001 hb@maths.lth.se wrote:
> >
> > > Full_Name: Henrik Bengtsson
> > > Version: 1.3.1
> > > OS: WinMe
> > > Submission from: (NULL) (130.235.2.229)
> > >
> > >
> > > I found the following bug on WinMe (I call it a bug, since the
> > behavior is
> > > different on WinMe than for instance Sun Solaris):
> > >
> > > When calling file.exists() with an existing directory name
> > ending with a "/"
> > > (slash) [R] on WinMe will return FALSE, but when doing the same
> > without the
> > > ending "/" it will give TRUE.
> > >
> > > I made a quick work around, but this should be taken care of in
> > the native
> > > code:
> > >
> > > file.exists <- function(...) {
> > >   # Remove trailing "/", but keep "C:/", "D:/"...
> > >   files <- gsub("\:/$", "\://", c(...));
> > >   files <- gsub("/$", "", files);
> > >   .Internal(file.exists(files));
> > > }
> >
> >
> > This is not a bug.  A file path ending with "/" is not a file on Windows,
> > but it is on Solaris.  Next you'll be reporting that file specifications
> > with drives fail on Solaris: it other words, what is a valid file path is
> > OS-specific.
> >
> > You'll find quite a lot of Windows tools reject paths ending in /: for
> > example the ls in Rtools thinks the directory is non-existent.
> >
> > Similarly, Solaris accepts // in paths, but Windows does not.
> >
> > > platform i386-pc-mingw32
> > > arch     x86
> > > os       Win32
> > > system   x86, Win32
> > > status
> > > major    1
> > > minor    3.1
> > > year     2001
> > > month    08
> > > day      31
> > > language R
> > >
> > >
> > >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-
> > > r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> >
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
> >
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Sep 24 13:00:06 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 24 Sep 2001 14:00:06 +0200 (MET DST)
Subject: [Rd] cor.test(x,x) sometimes produce NaN (PR#1099)
Message-ID: <200109241200.OAA06607@pubhealth.ku.dk>


This *is* kind of a bug, hence diverted to R-bugs

>>>>> "Peter" == Peter Malewski <peter.malewski@gmx.de> writes:

    Peter> In the code

    >> for(i in 1:100){zz <- rnorm(10);print(cor.test(zz,zz))}

    Peter> sometimes a sqrt(0) occures:
    Peter> 24: NaNs produced in: sqrt(1 - r^2)

I found that the reason is that in (at least one of) those cases,
  r == 1+eps
where eps = .Machine$double.eps
which I think is the real bug, here.

Here is a reproducible example:

 > set.seed(125);z0 <- rnorm(40);zz <- round(rnorm(10),5); r <- cor(zz,zz)
 > r-1
 [1] 2.220446e-16



    Peter> in all the other cases a result like
(for me, not in all, but quite a few cases)

    Peter>   t = Inf, df = 8, p-value = < 2.2e-16

which I think is entirely correct.

    Peter> occurs. Does cor.test need some more "inf" - handling?  I found
    Peter> that calculating a cor-matrix with additional p-values.  
  (last sentence is a bit unclear to MM).

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From owner-r-devel-digest@stat.math.ethz.ch  Mon Sep 24 03:01:11 2001
From: owner-r-devel-digest@stat.math.ethz.ch (R-devel Digest)
Date: Mon, 24 Sep 2001 04:01:11 +0200 (MET DST)
Subject: [Rd] R-devel Digest V1 #314
Message-ID: <200109240201.EAA19795@stat.math.ethz.ch>


R-devel Digest       Monday, September 24 2001       Volume 01 : Number 314



In this issue:

  [Rd] R 1.3.1 fails 'make check' on arm in the Bessel example (PR#1097)
  [Rd] Bug list summary (automatic post)
  [Rd] (PR#1089) Can be closed

See the end of the digest for information about r-devel-digest

----------------------------------------------------------------------

Date: Fri, 21 Sep 2001 06:54:39 +0200 (MET DST)
From: edd@debian.org
Subject: [Rd] R 1.3.1 fails 'make check' on arm in the Bessel example (PR#1097)

Debian tries to build its packages on a variety of platforms.  The arm
platform compiled 0.90.1 (the last Debian release before the Debian package
required an Atlas library, something we no longer require) failed in 'make
check'. The log snippet follows; I traced this to the example(Bessel) code.
 
> matplot(nu, t(outer(xx,nu, besselI)), type = 'l', ylim = c(-50,200),
+         main = expression(paste("Bessel ",I[nu](x)," for fixed ", x,
+                                 ",  as ",f(nu))),
+         xlab = expression(nu))
Error in title(main = main, sub = sub, xlab = xlab, ylab = ylab, ...) :
        Metric information not yet available for this device
        In addition: Warning messages:
        1: Nonfinite axis limits [GScale(nan,nan,1, .); log=0]
        2: relative range of values = 9.0072e+15 * EPS, is small (axis 1).
        3: Nonfinite axis limits [GScale(-inf,inf,2, .); log=0]
        4: relative range of values = 9.0072e+15 * EPS, is small (axis 2).
        Execution halted

Casual inspection suggests that GScale(nan,nan,1, .) is probably
incorrect. Now, src/nmath/bessel* provide the Bessel functions but does this
reflect a potential libc bug in IEEE handling?

I have also asked on the debian-arm mailing list, but no result so far. I
have some access to an arm box and could compile small test cases if that
helped. 

Dirk 
 
- --please do not edit the information below--
 
Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status =
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R
 
Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


- -- 
Better to have an approximate answer to the right question 
than a precise answer to the wrong question. -- John Tukey

- -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

------------------------------

Date: Fri, 21 Sep 2001 07:15:03 +0200
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Subject: [Rd] Bug list summary (automatic post)

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
- --The warning is standard S and R behaviour.
- --Probably xyplot needs to avoid it (by unclassing?)
* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
- --confirmed on Windows and Solaris.
- --Seems that file is not in the expected format
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
- --change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
- --The persp algorithm does not apply the occlusion rules to the frame, 
- --which is always plotted first. 
- --A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
- --This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
- --Suggested fix is incorporated in 1.2.2.
- --
- --There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
- --To see the problem try:  par(cex=.5); mtext("hi")
- --Paul thinks the right fix is to change the argument list for mtext so that
- --cex=par(cex) by default rather than cex=NA by default (plus corresponding
- --internal changes to  do_mtext in plot.c).
- --This needs to be done very carefully because (i) the change suggested above 
- --mayhave side-effects in many other pieces of interpreted code 
- --(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
- --and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
- --mtext is unscaled by default.  It is not clear if this should
- --use the par("cex") setting or an inline cex setting such as cex.axis.
- --It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
- --Neither of the proposed changes actually works in sufficient generality.
- --
- --The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
- --the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
- --Still there. Suggested fix included in followups, but we didn't get around to
- --try it in time for 1.2.3.
- --
- --Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
- --xaxp before xlog, and the new value of xaxp may only be valid under the new
- --value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400
* PR# 1081 *
Subject: problems installing R on Solaris 2.8 machine
From: Paivio Pollari <pollari@sun3.oulu.fi>
Date: Fri, 31 Aug 2001 08:54:23 +0300 (EET DST)
* PR# 1093 *
Subject: Solution to (well known) problem with Rdconv.pm on Sun Solaris
From: hb@maths.lth.se
Date: Sat, 15 Sep 2001 14:23:02 +0200 (MET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
- --status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1052 *
Subject:  Inconsistent behaviour of is.vector? 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 14 Aug 2001 09:04:57 +0100
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
- --see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
- --part of PR#1073

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
- --see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
- --part of PR#1068

Directory:  Macintosh

none

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
- --Builder needs to avoid -ldnet in distributed binaries..
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
- --Only reported on SGI, solved by removing optimization.
- --Needs debugging there.
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
- --problem with symbol names only on Mandrake 8.0, not 7.2
- --needs reply to follow-up
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
* PR# 1057 *
Subject: crt1.o skipped at configure time ?
From: laurent@cbs.dtu.dk
Date: Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
* PR# 1062 *
Subject: system.file("",package)
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Sun, 19 Aug 2001 16:01:57 -0700 (PDT)
* PR# 1084 *
Subject: Install problems R 1.3.1 on HP-UX
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Sun, 2 Sep 2001 15:07:41 +0200 (CEST)
* PR# 1089 *
Subject: Debian Woody r-base depends on blas2
From: michael_odonnell@acm.org
Date: Sat, 8 Sep 2001 20:25:32 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1094 *
Subject: lab does not work
From: puetsch@bigfoot.de
Date: Mon, 17 Sep 2001 12:53:25 +0200 (MET DST)
* PR# 1095 *
Subject:  Bizarre clipping with abline and points 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 19 Sep 2001 14:45:52 +0100
* PR# 1096 *
Subject: missing()
From: hosking@watson.ibm.com
Date: Wed, 19 Sep 2001 16:38:52 +0200 (MET DST)
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
- -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

------------------------------

Date: Fri, 21 Sep 2001 16:32:47 +0200 (MET DST)
From: edd@debian.org
Subject: [Rd] (PR#1089) Can be closed

I replied to Michael (on the list) explaining that the Depends: on blas2 was
"virtual", ie can be satisfied by either blas1 or atlas2. The bug report
probably belonged into the Debian bug archive anyway...

This can be closed.

Dirk

- -- 
Three out of two people have difficulties with fractions.

- -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

------------------------------

End of R-devel Digest V1 #314
*****************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
DIGEST of R-devel -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !) To: R-devel-digest-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Sep 25 01:14:26 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 24 Sep 2001 20:14:26 -0400
Subject: [Rd] col=0
Message-ID: <3BAFCC62.697551CA@bank-banque-canada.ca>

In R-devel I am getting an error with col=0 in a call to box, buried
somewhere in some tests. I have not yet explored far enough to know why
col=0 is being set, but I think it has to do with the box outline being
invisible. col=0 does not seem to be allowed in R-devel, whereas the
code works in R-1.3.1.  This may be R-devel pointing out an error in my
code that was not caught by R-1.3.1 or previously, or it may be a
feature change (although I did not see it in the documentation), or it
may be an error in R-devel. If anyone immediately recognizes the
problem/change I would appreciate tips. Otherwise I will check further
when I have a chance.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Sep 25 07:42:20 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 25 Sep 2001 07:42:20 +0100 (BST)
Subject: [Rd] col=0
In-Reply-To: <3BAFCC62.697551CA@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0109250735480.1129-100000@auk.stats>

On Mon, 24 Sep 2001, Paul Gilbert wrote:

> In R-devel I am getting an error with col=0 in a call to box, buried
> somewhere in some tests. I have not yet explored far enough to know why
> col=0 is being set, but I think it has to do with the box outline being
> invisible. col=0 does not seem to be allowed in R-devel, whereas the
> code works in R-1.3.1.  This may be R-devel pointing out an error in my
> code that was not caught by R-1.3.1 or previously, or it may be a
> feature change (although I did not see it in the documentation), or it
> may be an error in R-devel. If anyone immediately recognizes the
> problem/change I would appreciate tips. Otherwise I will check further
> when I have a chance.

col=0 is background AFAIK, and the default for background has been changed
to be "transparent" for most devices.  That *is* in NEWS.

So plotting with col=0 under that default makes no sense, although I
believe it still works.  The example for box does with col=0 ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Sep 25 08:14:14 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 25 Sep 2001 09:14:14 +0200
Subject: [Rd] Accidental digest sent to R-devel
In-Reply-To: <200109240201.EAA19795@stat.math.ethz.ch>
References: <200109240201.EAA19795@stat.math.ethz.ch>
Message-ID: <15280.11974.865884.406576@gargle.gargle.HOWL>

Several R-devel subscribers have alerted me to the problem,
thank you.

  >> R-devel Digest       Monday, September 24 2001       Volume 01 : Number 314

with the 3 messages

 >> [Rd] R 1.3.1 fails 'make check' on arm in the Bessel example (PR#1097)
 >> [Rd] Bug list summary (automatic post)
 >> [Rd] (PR#1089) Can be closed

seemed to have gone to probably all subscribers of r-devel.
What happened was that a broken E-mail engine  @zerowork.co.uk
got the regular digest message and managed to `post it back to R-devel'.
I'm trying a bit harder to have this not happening again in the future.

Your list maintainer

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue Sep 25 14:52:53 2001
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue, 25 Sep 2001 15:52:53 +0200 (MET DST)
Subject: [Rd] Bug in model.matrix.default (was: [R] predict incosistency ?) (PR#1100)
Message-ID: <200109251352.PAA21550@pubhealth.ku.dk>

On Tue, 25 Sep 2001 12:27:27 GMT, Jorge Luis Ojeda Cabrera
<jojeda@posta.unizar.es> wrote in message
<20010925.12272700@macdesp8.unizar.es>:

>When fitting model 'y~1', the 'lm' response is ok, but it is not possible 
>to get predictions using 'predict'. May be this is a bug, at least i 
>think it is somehow
>inconsistent.

It still appears in 1.3.1, I think it's a bug.  It shows up when you
use the newdata parameter to predict.lm; if you just ask for
predictions without specifying the x value things are fine:

> d _ data.frame(x=runif(5),y=runif(5))
> d1.lm _ lm(y ~ 1, data=d)
>   
> #  This one is okay:
>   
> predict(d1.lm)
       1        2        3        4        5 
0.486269 0.486269 0.486269 0.486269 0.486269 
> 
> # This one triggers the bug:
>   
> predict(d1.lm,newdata=data.frame(x=0.5))
Error in model.matrix.default(delete.response(tt), newdata, contrasts
= object$contrasts,  : 
        subscript out of bounds

There are 3 lines in model.matrix.default that assume that there is at
least one predictor in the model:  they index various things by "-1"
to remove it.  I can't follow what's going on there well enough to fix
it.

Duncan Murdoch

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Windows 98 4.10 (build 1998)  

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Sep 25 14:57:11 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 25 Sep 2001 15:57:11 +0200 (MET DST)
Subject: [Rd] Bug in model.matrix.default (PR#1100)
Message-ID: <200109251357.PAA21622@pubhealth.ku.dk>

There's more to it than that (which was already fixed in R-devel).
The internal code expects there to be columns in the model frame.

I have already fixed this in R-devel (by faking an unused column).


On Tue, 25 Sep 2001 murdoch@stats.uwo.ca wrote:

> On Tue, 25 Sep 2001 12:27:27 GMT, Jorge Luis Ojeda Cabrera
> <jojeda@posta.unizar.es> wrote in message
> <20010925.12272700@macdesp8.unizar.es>:
>
> >When fitting model 'y~1', the 'lm' response is ok, but it is not possible
> >to get predictions using 'predict'. May be this is a bug, at least i
> >think it is somehow
> >inconsistent.
>
> It still appears in 1.3.1, I think it's a bug.  It shows up when you
> use the newdata parameter to predict.lm; if you just ask for
> predictions without specifying the x value things are fine:
>
> > d _ data.frame(x=runif(5),y=runif(5))
> > d1.lm _ lm(y ~ 1, data=d)
> >
> > #  This one is okay:
> >
> > predict(d1.lm)
>        1        2        3        4        5
> 0.486269 0.486269 0.486269 0.486269 0.486269
> >
> > # This one triggers the bug:
> >
> > predict(d1.lm,newdata=data.frame(x=0.5))
> Error in model.matrix.default(delete.response(tt), newdata, contrasts
> = object$contrasts,  :
>         subscript out of bounds
>
> There are 3 lines in model.matrix.default that assume that there is at
> least one predictor in the model:  they index various things by "-1"
> to remove it.  I can't follow what's going on there well enough to fix
> it.
>
> Duncan Murdoch
>
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status =
>  major = 1
>  minor = 3.1
>  year = 2001
>  month = 08
>  day = 31
>  language = R
>
> Windows 98 4.10 (build 1998)
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Sep 27 09:36:50 2001
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 27 Sep 2001 10:36:50 +0200 (MET DST)
Subject: [Rd] ugly in plotmath: frac(1, sqrt(...)) (PR#1101)
Message-ID: <200109270836.KAA10724@pubhealth.ku.dk>


Sometimes (dependent on device and settings of 'cex' and 'lwd') the line
of a square root symbol plottet in the denominator of a fraction appears
to be in or above the line of the fraction.

Examples:


### Choose one of these:
# pdf("test.pdf", height=6, width=8)
# bmp("test.bmp", width=1100, height=800, pointsize=12)
# bitmap("test.tif", type="tiff24nc", width=12, height=9, res=300,
pointsize=12)
# png("test.png", width=1100, height=800, pointsize=12)
# postscript("test.eps", height=6, width=8, horizontal=FALSE)

 par(cex=2, lwd=2)
 plot(1:10)
 text(2, 8, expression(frac(1, sigma[i]*sqrt(2*pi))))
dev.off()


Uwe Ligges


[Happens also on Linux, ...]

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From macq@llnl.gov  Thu Sep 27 17:21:35 2001
From: macq@llnl.gov (macq@llnl.gov)
Date: Thu, 27 Sep 2001 18:21:35 +0200 (MET DST)
Subject: [Rd] Problem with merge() (PR#1102)
Message-ID: <200109271621.SAA18562@pubhealth.ku.dk>

I have encountered a problem with merge() that appears to be a bug.
Here's an example to illustrate it.

>  tmp1 <- data.frame(a=letters[1:3],b=LETTERS[2:4],x=1:3)
>  tmpa <- expand.grid(a=letters[1:4],b=LETTERS[1:4])
>  tmpm.1 <- merge(tmpa,tmp1)
>  tmpm.2 <- merge(tmp1,tmpa)
Error in "names<-.default"(*tmp*, value = vnames) :
         names attribute must be the same length as the vector


I'm using R 1.3.0, and it occurs on both the Macintosh and Solaris versions.
>  version
          _
platform powerpc-apple-darwin1.3.7
arch     powerpc
os       darwin1.3.7
system   powerpc, darwin1.3.7
status
major    1
minor    3.0
year     2001
month    06
day      22
language R
>

>  version
          _
platform sparc-sun-solaris2.7
arch     sparc
os       solaris2.7
system   sparc, solaris2.7
status
major    1
minor    3.0
year     2001
month    06
day      22
language R
>

(I've searched various places, including a list of fixes for v1.3.1, 
the faq, 2001 r-help archives, and haven't found anything about it)

Thanks
-Don
-- 
--------------------------------------
Don MacQueen
Environmental Protection Department
Lawrence Livermore National Laboratory
Livermore, CA, USA
--------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep 27 17:43:58 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 27 Sep 2001 18:43:58 +0200
Subject: [Rd] Problem with merge() (PR#1102)
In-Reply-To: <200109271621.SAA18562@pubhealth.ku.dk>
References: <200109271621.SAA18562@pubhealth.ku.dk>
Message-ID: <15283.22350.315590.177836@gargle.gargle.HOWL>

>>>>> "Don" == Don MacQueen <macq@llnl.gov> writes:

    Don> I have encountered a problem with merge() that appears to be a bug.
    Don> Here's an example to illustrate it.

    >> tmp1 <- data.frame(a=letters[1:3],b=LETTERS[2:4],x=1:3)
    >> tmpa <- expand.grid(a=letters[1:4],b=LETTERS[1:4])
    >> tmpm.1 <- merge(tmpa,tmp1)
    >> tmpm.2 <- merge(tmp1,tmpa)
    Don> Error in "names<-.default"(*tmp*, value = vnames) :
    Don> names attribute must be the same length as the vector


    Don> I'm using R 1.3.0, and it occurs on both the Macintosh and Solaris versions.
    >> version

Bug confirmed, also for the current version of R (1.3.1) and the 
development one.

I'll have a look.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From richmond@saintmarys.edu  Fri Sep 28 02:24:09 2001
From: richmond@saintmarys.edu (richmond@saintmarys.edu)
Date: Fri, 28 Sep 2001 03:24:09 +0200 (MET DST)
Subject: [Rd] Slow output/no break key (PR#1103)
Message-ID: <200109280124.DAA20678@pubhealth.ku.dk>

Full_Name: David Richmond
Version: 1.3.0
OS: MacOS 8.6
Submission from: (NULL) (147.53.3.18)


Forgive me if this isn't the correct forum for these comments but:
text output on the mac is abysmally slow. If I inadvertently ask R to echo a
100x100 matrix, it takes so long to display that I generally have to leave the
room and go do something else for awhile. I've tried to break it, (ctrl-c,
cmd-.) but there doesn't seem to be an implemented break sequence (I noticed
that everything else stops too, my mp3 player stops playing music, etc). I also
notice that the longer the output gets, the slower it goes. 
	

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 28 19:34:54 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 28 Sep 2001 14:34:54 -0400
Subject: [Rd] problems with new checks in R-devel
Message-ID: <3BB4C2CE.66325EAB@bank-banque-canada.ca>

Below are a few problems I have encountered with the new checks
being done in R-devel.

1/ I have two generics, test.equal and test.equal.tframe. The
first checks that two objects are equal while the second checks
if two objects have equal tframes (time frames).  There is no
reason these should have similar arguments but the check seems to
think that test.equal.tframe is a method for test.equal so I get:

* checking generic/method consistency ... WARNING
test.equal:
  function(obj1, obj2, ...)
test.equal.tframe:
  function(tf1, tf2)

2/ I have some generics which may or may not already be defined
(e.g. lag would be defined if library ts is attached) so in my R
code I use

if (!exists("lag")) lag <- function(x, ...) { UseMethod("lag") }

but this results in

Objects with usage in file `.../tframe/man/lag.tframe.Rd' but
missing from code:
[1] "lag"

Is there a better way to approach this in my R code so I don't
get these warnings?

3/  I have a few general introduction  .Rd files which do not
have a usage line and they produce

* checking for undocumented arguments in \usage ... WARNING
Error in parse(file, n, text, prompt) : parse error
Error in checkDocArgs(dir = ".../syskern") :
        cannot source usages in file
.../syskern/man/00Intro.syskern.Rd
Execution halted

Should that be expected or is it a bug?

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep 28 19:44:50 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 28 Sep 2001 19:44:50 +0100 (BST)
Subject: [Rd] problems with new checks in R-devel
In-Reply-To: <3BB4C2CE.66325EAB@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0109281941260.6685-100000@gannet.stats>

On Fri, 28 Sep 2001, Paul Gilbert wrote:

> Below are a few problems I have encountered with the new checks
> being done in R-devel.
>
> 1/ I have two generics, test.equal and test.equal.tframe. The
> first checks that two objects are equal while the second checks
> if two objects have equal tframes (time frames).  There is no
> reason these should have similar arguments but the check seems to
> think that test.equal.tframe is a method for test.equal so I get:
>
> * checking generic/method consistency ... WARNING
> test.equal:
>   function(obj1, obj2, ...)
> test.equal.tframe:
>   function(tf1, tf2)

There is a stop list in checkMethods, but naming one generic to look like
a method of another is surely peverse.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Fri Sep 28 21:17:31 2001
From: andy_liaw@merck.com (Liaw, Andy)
Date: Fri, 28 Sep 2001 16:17:31 -0400
Subject: [Rd] tiny typo in help page for connection
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC82A6@usrymx10.merck.com>

Hi all,

In the help page for connections, shouldn't the line

	"r" or "wt"

really be

	"r" or "rt"

?

Andy

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep 28 21:25:18 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Sep 2001 22:25:18 +0200
Subject: [Rd] tiny typo in help page for connection
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC82A6@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81903DC82A6@usrymx10.merck.com>
Message-ID: <x2elorhxld.fsf@blueberry.kubism.ku.dk>

"Liaw, Andy" <andy_liaw@merck.com> writes:

> Hi all,
> 
> In the help page for connections, shouldn't the line
> 
> 	"r" or "wt"
> 
> really be
> 
> 	"r" or "rt"
> 
> ?

Indeed. While we're at it, isn't the convention that "umbrella-topics"
are capitalized? Should the page not be called Connections?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Fri Sep 28 22:34:18 2001
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Fri, 28 Sep 2001 23:34:18 +0200 (MET DST)
Subject: [Rd] savehistory: Suggestions to a \seealso{} (PR#1104)
Message-ID: <200109282134.XAA01930@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.3.1
OS: WinMe
Submission from: (NULL) (130.235.2.229)


I suggest the following \seealso to be added for savehistory:

\seealso{
  To execute \code{savehistory} automatically when \R quits see \link{.Last} and
\link{.Rprofile}.
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep 29 08:02:18 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 29 Sep 2001 09:02:18 +0200 (MET DST)
Subject: [Rd] savehistory: Suggestions to a \seealso{} (PR#1104)
Message-ID: <200109290702.JAA02974@pubhealth.ku.dk>

On Fri, 28 Sep 2001 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.3.1
> OS: WinMe
> Submission from: (NULL) (130.235.2.229)
>
>
> I suggest the following \seealso to be added for savehistory:
>
> \seealso{
>   To execute \code{savehistory} automatically when \R quits see \link{.Last} and
> \link{.Rprofile}.
> }

I don't see anything relevant on those pages: in particular no details of
using savehistory as your wording suggests.  Given that savehistory is not
available everywhere, it would not be a suitable example for .Last.  I
don't see the point of a link to .Rprofile.

Note that .Last is not necessarily run when R quits, so the method I think
you are advocating is not actually automatic.

Can you explain your suggestion?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep 29 08:56:34 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 29 Sep 2001 09:56:34 +0200
Subject: [Rd] problems with new checks in R-devel
In-Reply-To: <3BB4C2CE.66325EAB@bank-banque-canada.ca>
References: <3BB4C2CE.66325EAB@bank-banque-canada.ca>
Message-ID: <15285.32434.701695.262813@mithrandir.hornik.net>

>>>>> Paul Gilbert writes:

> Below are a few problems I have encountered with the new checks
> being done in R-devel.

> 2/ I have some generics which may or may not already be defined
> (e.g. lag would be defined if library ts is attached) so in my R
> code I use

> if (!exists("lag")) lag <- function(x, ...) { UseMethod("lag") }

> but this results in

> Objects with usage in file `.../tframe/man/lag.tframe.Rd' but
> missing from code:
> [1] "lag"

> Is there a better way to approach this in my R code so I don't
> get these warnings?

Use library(ts) in the package's .First.lib instead.

Or help improving the logic in checkMethods(): currently we only eval
top-level *assignments* in the R code.  Otherwise, we have problems with
code used for creating save images calling e.g. dyn.load.

> 3/  I have a few general introduction  .Rd files which do not
> have a usage line and they produce

> * checking for undocumented arguments in \usage ... WARNING
> Error in parse(file, n, text, prompt) : parse error
> Error in checkDocArgs(dir = ".../syskern") :
>         cannot source usages in file
> .../syskern/man/00Intro.syskern.Rd
> Execution halted

> Should that be expected or is it a bug?

The version of dse I have access to in fact has

  \usage{library("syskern")}

Using the current logic, extract-usage thinks this documents the usage
of function library(), and hence translates to

  library <- function("syskern")

which gives the syntax error.  Using library(syskern) will work but give
a warning about the undocumented argument `syskern'.

In an ideal world we would not have to rely on heuristics but have

  <usage> <s-code>...</s-code> </usage>

alas we do not have that yet.  [More precisely: we would also know what
kind of topic was documented, and exclude documentation for packages
from the function checking.]

With the advent of the new documentation engine nowhere in sight, maybe
we should have a markup like

  \IAmNotSCode{...}

for taking care of the above.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep  1 10:20:01 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 1 Sep 2001 11:20:01 +0200
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <87y9o08lpq.fsf@jeeves.blindglobe.net>
References: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
 <87y9o08lpq.fsf@jeeves.blindglobe.net>
Message-ID: <15248.43073.253841.228346@mithrandir.hornik.net>

>>>>> A J Rossini writes:

>>>>> "BDR" == Brian D Ripley <Prof> writes:
>>> I would also be happier if we did not refer to the variables
>>> explicitly as `columns'.  (This sounds a bit stupid from the
>>> person who wrote write.table and introduced arguments
>>> `row.names' and `col.names'.  Although, at least one of these
>>> was modelled after an existing function).  E.g. something like
>>> 
>>> read.table(......, caseNames, varNames, varClasses, .....)
>>> 
>>> would be nice ...

BDR> The problem is that what is being referred to *is* columns
BDR> and not variables.  If you have row names on the file, the
BDR> numbering is different.  So it matters to use sufficiently
BDR> precise terminology.

> I would tend to agree with Brian.

I do too :-)

> To me, caseNames / varNames sounds a rather bit arrogant, since there
> are a number of other "formats" (contingency tables come to mind) for
> which read.table is one possible way for slurping in the data prior to
> munging it, though I guess one could argue that this is an abuse of
> tools.

I would certain argue along these lines.  read.table() is a bit strange
in the sense that its naming indicates that it is a reader for data in
`tabular' format, but the fact that it creates a data frame indicates
that it makes certain assumptions ...

And of course, you can use read.ftable to read in contingency tables.

-k



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep  1 10:13:49 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 1 Sep 2001 11:13:49 +0200
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
References: <15247.32012.939118.454204@mithrandir.hornik.net>
 <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
Message-ID: <15248.42701.52888.634703@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> On Fri, 31 Aug 2001, Kurt Hornik wrote:
>> > Prof Brian Ripley wrote:
>> >>
>> >> Currently read.table is rather limited in its type conversion.
>> >> The algorithm is
>> >>
>> >> 0) Read as character
>> >> 1) Try to convert to numeric. If that works, quit
>> >> 2) Convert to factor unless !as.is.
>> >>
>> >> I am thinking about adding more flexibility and more classes by the
>> >> following two changes.
>> >>
>> >> A) Anticipating the arrival of classes for all R objects, add an
>> >> argument say `colClasses' that allows the user to specify the desired
>> >> class for every column.  This could default to "auto", or NA if people
>> >> think "auto" might be a relevant class name one day.
>> >>
>> >> The effect would be equivalent to running
>> >>
>> >> data[[i]] <- as(data[[i]], colClasses[i])
>> >>
>> >> instead of
>> >>
>> >> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
>> >>
>> >> except that standard classes such as "numeric", "factor", "logical",
>> >> "character" would be dispatched directly, and argument "dec" would be
>> >> consulted where appropriate.
>> >>
>> >> colClasses = "character" would suppress all conversions, which cannot
>> >> currently be done.
>> 
>> Just a small remark.  I would prefer `NA' to "auto" (or "unknown").  May
>> be too late to change this now :-)

> Anything can be changed up to 1.4.0 release.  In particular, the
> present code will have to be changed unless as() is in base by then.

Ok.  Can I formally propose to use NA then?  (I guess this convention
could be useful in similar situations as well.)

>> I would also be happier if we did not refer to the variables explicitly
>> as `columns'.  (This sounds a bit stupid from the person who wrote
>> write.table and introduced arguments `row.names' and `col.names'.
>> Although, at least one of these was modelled after an existing
>> function).  E.g. something like
>> 
>> read.table(......, caseNames, varNames, varClasses, .....)
>> 
>> would be nice ...

> The problem is that what is being referred to *is* columns and not
> variables.  If you have row names on the file, the numbering is
> different.  So it matters to use sufficiently precise terminology.

Right.  Convinced now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep  1 11:01:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 1 Sep 2001 11:01:05 +0100 (BST)
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <15248.42701.52888.634703@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0109011100100.24001-100000@gannet.stats>

On Sat, 1 Sep 2001, Kurt Hornik wrote:

> >>>>> Prof Brian D Ripley writes:
>
> > On Fri, 31 Aug 2001, Kurt Hornik wrote:
> >> > Prof Brian Ripley wrote:
> >> >>
> >> >> Currently read.table is rather limited in its type conversion.
> >> >> The algorithm is
> >> >>
> >> >> 0) Read as character
> >> >> 1) Try to convert to numeric. If that works, quit
> >> >> 2) Convert to factor unless !as.is.
> >> >>
> >> >> I am thinking about adding more flexibility and more classes by the
> >> >> following two changes.
> >> >>
> >> >> A) Anticipating the arrival of classes for all R objects, add an
> >> >> argument say `colClasses' that allows the user to specify the desired
> >> >> class for every column.  This could default to "auto", or NA if people
> >> >> think "auto" might be a relevant class name one day.
> >> >>
> >> >> The effect would be equivalent to running
> >> >>
> >> >> data[[i]] <- as(data[[i]], colClasses[i])
> >> >>
> >> >> instead of
> >> >>
> >> >> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
> >> >>
> >> >> except that standard classes such as "numeric", "factor", "logical",
> >> >> "character" would be dispatched directly, and argument "dec" would be
> >> >> consulted where appropriate.
> >> >>
> >> >> colClasses = "character" would suppress all conversions, which cannot
> >> >> currently be done.
> >>
> >> Just a small remark.  I would prefer `NA' to "auto" (or "unknown").  May
> >> be too late to change this now :-)
>
> > Anything can be changed up to 1.4.0 release.  In particular, the
> > present code will have to be changed unless as() is in base by then.
>
> Ok.  Can I formally propose to use NA then?  (I guess this convention
> could be useful in similar situations as well.)

Already done.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Sat Sep  1 19:30:52 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Sat, 1 Sep 2001 14:30:52 -0400
Subject: [Rd] RE: [R] GUI support from R
Message-ID: <5429125E11E4D411AF7300805FE603A8014CED7F@groexmbcr02.pfizer.com>

Hi Duncan,

I've been looking around at GUI toolkits to use with Python (and by
extension R). I initially tried Tk, but was disappointed because there is no
consistent set of high level widgets.  I've subsequently done some looking
at QT, wxWindows, and GTK.  QT is out because I am a *commercial* user, and
I don't want to have a license hassle.  GTK seemed to have a lower level of
functionality than wxWindows and seemed to be less platform independent.
>From what I could see, the on-line documentation to wxWindows was better. In
addition, the wxPython developer has indicated that the wxWindows
development team is very supportive.

I was also very pleased that wxWindows handles printing, and it had a nice
set of high-level widgets as part of the 'base' library.  There seem to be
some high level widgets for GTK, but they are 'add-ons' and seem less well
integrated or supported.  

Also, looking around at the 'embarrassment of riches' among Python GUI
toolkits, I've come to the conclusion that it is better to have *one* GUI
library that is well supported than to have a set of them.  Our community is
really too small to fracture again into different toolkit users.  Perhaps a
single set of high-level bindings would do the trick, but I worry that not
enough functionality would be available at that level of abstraction.

BTW, wxWindows uses GTK as the backend on Unix, so you may still be able to
control gtk-based components that are written in GTK. 

I'm very interested in the GUI issue because I am currently building a GUI
tool that will use R as the computational backend.  It would be really nice
if I could do the GUI building and control directly in R rather than using
Python.  It would make one less language to learn & manage for me and for
other users/developers.

And, I really do need some of the high level widgets and functionality
offered directly by wxWindows, but (as far as I can tell) not by GTK.

-Greg

-----Original Message-----
From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
Sent: Monday, August 27, 2001 11:14 AM
To: Warnes, Gregory R
Cc: 'Duncan Temple Lang'; rossini@u.washington.edu; nychka@cgd.ucar.edu;
r-help@stat.math.ethz.ch
Subject: Re: [R] GUI support from R


Warnes, Gregory R wrote:
> 
> Hey Duncan,
> 
> Can you share with us the reason for selecting GTK?  

Well there are a few basic reasons.

I know less about wxWindow than I do about Gtk.  And there is a lot
less to Gtk than to wxWindows.  So that makes it is easier for me to
think about the bindings. (Also, Gtk is like X, and I spent a fair bit
of time desigining and developing S bindings for X and different
widget sets a long time ago.) The additional features of wxWindows
such as threads, etc. may get in the way in thinking about how Gtk
bindings relate to, Tcl/Tk, Java, and other GUI toolkits.  It would be
nice to have a level of abstraction above these toolkits with the
ability to select one and use the same code for all.

My "hope" is to be able to use Slcc to programmatically generate 
bindings for Gtk. This will be easier given that I know
my way around some of the Gtk code. However, if it works,
applying the same programmatic approach to wxWindows
should give us 80% of the grunt work for free and then
require some tinkering later.

Importantly, the applications I have in mind for RGtk are things like
extending Gnumeric with plugins, programming GGobi events and even
add-ons, and generally interacting with many of the Gnome tools
including potentially building a GUI for R to replace the C-level
Gnome code with R scripts, making it more flexible and adaptable.
If we use wxWindows for these Gtk-based applications, we are adding
an extra layer between R and the application that will probably be
confusing.

If we do get to the level of abstraction across toolkits, it won't
matter much which toolkit we use, but will only require bindings to
the ones of interest. The challenge then will be to allow integrating
widgets from different toolkits, and that can be tricky on some
platforms.

So, I am in no way ruling out wxWindows. In many respects, it looks
more appealing - just too big at present. What is its development
energy like relative to Gtk. I am very happy to work on wxWindows
too. There is very little in the RGtk at present.

 D.


> 
> -Greg
> 
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be
privileged. It is intended for the addressee(s) only. Access to this E-mail
by anyone else is unauthorized. If you are not an addressee, any disclosure
or copying of the contents of this E-mail or any action taken (or not taken)
in reliance on it is unauthorized and may be unlawful. If you are not an
addressee, please inform the sender immediately.
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Sun Sep  2 05:38:43 2001
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Sun, 2 Sep 2001 12:38:43 +0800 (GMT-8)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CED7F@groexmbcr02.pfizer.com>
Message-ID: <Pine.GSO.4.21.0109021215050.18721-100000@sun450.comp.nus.edu.sg>


Hi,
One thing to note is that GTk development is in a state of
transition. They are moving steadily towards GTK 2.0 which involves many
changes in Glib, Gdk  and the underlying private functions. James
Hesteridge who is the maintainer of pygtk is actively working on
integrating all the changes into the next version which is why thre hasn't
been a release in a while.

The nice feature of gtk vs wxwindows is that gtk is written entirely in C
while wxWindows is C++. My understanding is that there is byte
incompatibility between different compilers for C++, meaning that C++ code
compiled with VC++ cannot be combined with c++ code compiled with gcc. I
don't know how this affects modules loaded into python.

There is a very complete comparison of GUI toolkits at 
http://www.geocities.com/SiliconValley/Vista/7184/guitool.html

anyway my 2c

Nicholas

 On Sat, 1 Sep 2001, Warnes, Gregory R wrote:

> Hi Duncan,
> 
> I've been looking around at GUI toolkits to use with Python (and by
> extension R). I initially tried Tk, but was disappointed because there is no
> consistent set of high level widgets.  I've subsequently done some looking
> at QT, wxWindows, and GTK.  QT is out because I am a *commercial* user, and
> I don't want to have a license hassle.  GTK seemed to have a lower level of
> functionality than wxWindows and seemed to be less platform independent.
> >From what I could see, the on-line documentation to wxWindows was better. In
> addition, the wxPython developer has indicated that the wxWindows
> development team is very supportive.
> 
> I was also very pleased that wxWindows handles printing, and it had a nice
> set of high-level widgets as part of the 'base' library.  There seem to be
> some high level widgets for GTK, but they are 'add-ons' and seem less well
> integrated or supported.  
> 
> Also, looking around at the 'embarrassment of riches' among Python GUI
> toolkits, I've come to the conclusion that it is better to have *one* GUI
> library that is well supported than to have a set of them.  Our community is
> really too small to fracture again into different toolkit users.  Perhaps a
> single set of high-level bindings would do the trick, but I worry that not
> enough functionality would be available at that level of abstraction.
> 
> BTW, wxWindows uses GTK as the backend on Unix, so you may still be able to
> control gtk-based components that are written in GTK. 
> 
> I'm very interested in the GUI issue because I am currently building a GUI
> tool that will use R as the computational backend.  It would be really nice
> if I could do the GUI building and control directly in R rather than using
> Python.  It would make one less language to learn & manage for me and for
> other users/developers.
> 
> And, I really do need some of the high level widgets and functionality
> offered directly by wxWindows, but (as far as I can tell) not by GTK.
> 
> -Greg
> 
> -----Original Message-----
> From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> Sent: Monday, August 27, 2001 11:14 AM
> To: Warnes, Gregory R
> Cc: 'Duncan Temple Lang'; rossini@u.washington.edu; nychka@cgd.ucar.edu;
> r-help@stat.math.ethz.ch
> Subject: Re: [R] GUI support from R
> 
> 
> Warnes, Gregory R wrote:
> > 
> > Hey Duncan,
> > 
> > Can you share with us the reason for selecting GTK?  
> 
> Well there are a few basic reasons.
> 
> I know less about wxWindow than I do about Gtk.  And there is a lot
> less to Gtk than to wxWindows.  So that makes it is easier for me to
> think about the bindings. (Also, Gtk is like X, and I spent a fair bit
> of time desigining and developing S bindings for X and different
> widget sets a long time ago.) The additional features of wxWindows
> such as threads, etc. may get in the way in thinking about how Gtk
> bindings relate to, Tcl/Tk, Java, and other GUI toolkits.  It would be
> nice to have a level of abstraction above these toolkits with the
> ability to select one and use the same code for all.
> 
> My "hope" is to be able to use Slcc to programmatically generate 
> bindings for Gtk. This will be easier given that I know
> my way around some of the Gtk code. However, if it works,
> applying the same programmatic approach to wxWindows
> should give us 80% of the grunt work for free and then
> require some tinkering later.
> 
> Importantly, the applications I have in mind for RGtk are things like
> extending Gnumeric with plugins, programming GGobi events and even
> add-ons, and generally interacting with many of the Gnome tools
> including potentially building a GUI for R to replace the C-level
> Gnome code with R scripts, making it more flexible and adaptable.
> If we use wxWindows for these Gtk-based applications, we are adding
> an extra layer between R and the application that will probably be
> confusing.
> 
> If we do get to the level of abstraction across toolkits, it won't
> matter much which toolkit we use, but will only require bindings to
> the ones of interest. The challenge then will be to allow integrating
> widgets from different toolkits, and that can be tricky on some
> platforms.
> 
> So, I am in no way ruling out wxWindows. In many respects, it looks
> more appealing - just too big at present. What is its development
> energy like relative to Gtk. I am very happy to work on wxWindows
> too. There is very little in the RGtk at present.
> 
>  D.
> 
> 
> > 
> > -Greg
> > 
> > 
> > LEGAL NOTICE
> > Unless expressly stated otherwise, this message is confidential and may be
> privileged. It is intended for the addressee(s) only. Access to this E-mail
> by anyone else is unauthorized. If you are not an addressee, any disclosure
> or copying of the contents of this E-mail or any action taken (or not taken)
> in reliance on it is unauthorized and may be unlawful. If you are not an
> addressee, please inform the sender immediately.
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-
> > r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> >
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sun Sep  2 06:22:59 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sun, 2 Sep 2001 01:22:59 -0400 (EDT)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.21.0109021215050.18721-100000@sun450.comp.nus.edu.sg>
Message-ID: <Pine.GSO.4.10.10109020107370.15143-100000@hsph.harvard.edu>

IMHO the wrong question is being asked here---it is not a matter of
underlying toolkit. We could literally spend the rest of our lives arguing
over toolkit, especially since toolkits come in and out of fashion (X
widget sets come to mind...), stopped being developed and start again
(wxWindows had a period of stagnation if I recall) or undergo radical
changes (gtk as mentioned). Rather I think what really needs to be decided
is a uniform R level mechanism for GUIs, something philisophically to
Java's AWT design. In the AWT case, the underlying aspects of the Java
toolkit representation are implemented using the appropriate system-level
toolkit (Motif on UNIX, Win32/GDI on Windows,
I-Forget-The-Name-of-the-MacOS-Windowing-API and so on). Once that toolkit
has been established then discussions over underlying toolkit become moot
except for people who want to maintain R's GUI facilities on platform
foo. The traditional graphics implementation already does this to some
extent at the "C" level (though I would advocate the abstraction of the
graphics devices into the R level making them packages rather than
integral to the system. In other words, devices would be implemented as a
class derived from a particular virtual base) so it seems reasonable to do
the same thing for GUIs and interactive graphics.

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

On Sun, 2 Sep 2001, Nicholas Lewin-Koh wrote:

> 
> Hi,
> One thing to note is that GTk development is in a state of
> transition. They are moving steadily towards GTK 2.0 which involves many
> changes in Glib, Gdk  and the underlying private functions. James
> Hesteridge who is the maintainer of pygtk is actively working on
> integrating all the changes into the next version which is why thre hasn't
> been a release in a while.
> 
> The nice feature of gtk vs wxwindows is that gtk is written entirely in C
> while wxWindows is C++. My understanding is that there is byte
> incompatibility between different compilers for C++, meaning that C++ code
> compiled with VC++ cannot be combined with c++ code compiled with gcc. I
> don't know how this affects modules loaded into python.
> 
> There is a very complete comparison of GUI toolkits at 
> http://www.geocities.com/SiliconValley/Vista/7184/guitool.html
> 
> anyway my 2c
> 
> Nicholas
> 
>  On Sat, 1 Sep 2001, Warnes, Gregory R wrote:
> 
> > Hi Duncan,
> > 
> > I've been looking around at GUI toolkits to use with Python (and by
> > extension R). I initially tried Tk, but was disappointed because there is no
> > consistent set of high level widgets.  I've subsequently done some looking
> > at QT, wxWindows, and GTK.  QT is out because I am a *commercial* user, and
> > I don't want to have a license hassle.  GTK seemed to have a lower level of
> > functionality than wxWindows and seemed to be less platform independent.
> > >From what I could see, the on-line documentation to wxWindows was better. In
> > addition, the wxPython developer has indicated that the wxWindows
> > development team is very supportive.
> > 
> > I was also very pleased that wxWindows handles printing, and it had a nice
> > set of high-level widgets as part of the 'base' library.  There seem to be
> > some high level widgets for GTK, but they are 'add-ons' and seem less well
> > integrated or supported.  
> > 
> > Also, looking around at the 'embarrassment of riches' among Python GUI
> > toolkits, I've come to the conclusion that it is better to have *one* GUI
> > library that is well supported than to have a set of them.  Our community is
> > really too small to fracture again into different toolkit users.  Perhaps a
> > single set of high-level bindings would do the trick, but I worry that not
> > enough functionality would be available at that level of abstraction.
> > 
> > BTW, wxWindows uses GTK as the backend on Unix, so you may still be able to
> > control gtk-based components that are written in GTK. 
> > 
> > I'm very interested in the GUI issue because I am currently building a GUI
> > tool that will use R as the computational backend.  It would be really nice
> > if I could do the GUI building and control directly in R rather than using
> > Python.  It would make one less language to learn & manage for me and for
> > other users/developers.
> > 
> > And, I really do need some of the high level widgets and functionality
> > offered directly by wxWindows, but (as far as I can tell) not by GTK.
> > 
> > -Greg
> > 
> > -----Original Message-----
> > From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> > Sent: Monday, August 27, 2001 11:14 AM
> > To: Warnes, Gregory R
> > Cc: 'Duncan Temple Lang'; rossini@u.washington.edu; nychka@cgd.ucar.edu;
> > r-help@stat.math.ethz.ch
> > Subject: Re: [R] GUI support from R
> > 
> > 
> > Warnes, Gregory R wrote:
> > > 
> > > Hey Duncan,
> > > 
> > > Can you share with us the reason for selecting GTK?  
> > 
> > Well there are a few basic reasons.
> > 
> > I know less about wxWindow than I do about Gtk.  And there is a lot
> > less to Gtk than to wxWindows.  So that makes it is easier for me to
> > think about the bindings. (Also, Gtk is like X, and I spent a fair bit
> > of time desigining and developing S bindings for X and different
> > widget sets a long time ago.) The additional features of wxWindows
> > such as threads, etc. may get in the way in thinking about how Gtk
> > bindings relate to, Tcl/Tk, Java, and other GUI toolkits.  It would be
> > nice to have a level of abstraction above these toolkits with the
> > ability to select one and use the same code for all.
> > 
> > My "hope" is to be able to use Slcc to programmatically generate 
> > bindings for Gtk. This will be easier given that I know
> > my way around some of the Gtk code. However, if it works,
> > applying the same programmatic approach to wxWindows
> > should give us 80% of the grunt work for free and then
> > require some tinkering later.
> > 
> > Importantly, the applications I have in mind for RGtk are things like
> > extending Gnumeric with plugins, programming GGobi events and even
> > add-ons, and generally interacting with many of the Gnome tools
> > including potentially building a GUI for R to replace the C-level
> > Gnome code with R scripts, making it more flexible and adaptable.
> > If we use wxWindows for these Gtk-based applications, we are adding
> > an extra layer between R and the application that will probably be
> > confusing.
> > 
> > If we do get to the level of abstraction across toolkits, it won't
> > matter much which toolkit we use, but will only require bindings to
> > the ones of interest. The challenge then will be to allow integrating
> > widgets from different toolkits, and that can be tricky on some
> > platforms.
> > 
> > So, I am in no way ruling out wxWindows. In many respects, it looks
> > more appealing - just too big at present. What is its development
> > energy like relative to Gtk. I am very happy to work on wxWindows
> > too. There is very little in the RGtk at present.
> > 
> >  D.
> > 
> > 
> > > 
> > > -Greg
> > > 
> > > 
> > > LEGAL NOTICE
> > > Unless expressly stated otherwise, this message is confidential and may be
> > privileged. It is intended for the addressee(s) only. Access to this E-mail
> > by anyone else is unauthorized. If you are not an addressee, any disclosure
> > or copying of the contents of this E-mail or any action taken (or not taken)
> > in reliance on it is unauthorized and may be unlawful. If you are not an
> > addressee, please inform the sender immediately.
> > >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-
> > > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> > >
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > 
> 
>                  CH3
>                   |
>                   N             Nicholas Lewin-Koh
>                  / \            Dept of Statistics
>            N----C   C==O        Program in Ecology and Evolutionary Biology
>           ||   ||   |           Iowa State University
>           ||   ||   |           Ames, IA 50011
>           CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
>             \  / \ /            nlewin@iastate.edu
>              N    C
>              |   ||             Currently
>             CH3   O             Graphics Lab
>                                 School of Computing
>                                 National University of Singapore
>      The Real Part of Coffee    kohnicho@comp.nus.edu.sg
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Sep  2 07:39:48 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 2 Sep 2001 07:39:48 +0100 (BST)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.10.10109020107370.15143-100000@hsph.harvard.edu>
Message-ID: <Pine.GSO.4.31.0109020731320.9820-100000@auk.stats>

On Sun, 2 Sep 2001, Byron Ellis wrote:

> IMHO the wrong question is being asked here---it is not a matter of
> underlying toolkit. We could literally spend the rest of our lives arguing
> over toolkit, especially since toolkits come in and out of fashion (X
> widget sets come to mind...), stopped being developed and start again
> (wxWindows had a period of stagnation if I recall) or undergo radical
> changes (gtk as mentioned). Rather I think what really needs to be decided
> is a uniform R level mechanism for GUIs, something philisophically to
> Java's AWT design. In the AWT case, the underlying aspects of the Java
> toolkit representation are implemented using the appropriate system-level
> toolkit (Motif on UNIX, Win32/GDI on Windows,
> I-Forget-The-Name-of-the-MacOS-Windowing-API and so on). Once that toolkit

That's how Tcl/Tk does it.

> has been established then discussions over underlying toolkit become moot
> except for people who want to maintain R's GUI facilities on platform
> foo.

Rather, it becomes moot for people who want such facilities.  I suspect
noone wants to maintain them ....  That Tcl/Tk needs a different low-level
interface on different platforms is a pain: the original R tcltk package
code runs on a call that only exists in Tcl/Tk for Unix.  If that were to
happen again, I am pretty sure that Tcl/Tk would be omitted from the
Windows port of R (and I believe it is from the Classic Mac port).

[...]

Event-loop integration is a major issue with GUIs, and it's a toolkit
issue.  R is designed to run an event loop and wants to be in control.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Sun Sep  2 13:05:16 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 02 Sep 2001 05:05:16 -0700
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.10.10109020107370.15143-100000@hsph.harvard.edu>
References: <Pine.GSO.4.10.10109020107370.15143-100000@hsph.harvard.edu>
Message-ID: <87zo8du7b7.fsf@jeeves.blindglobe.net>

>>>>> "BE" == Byron Ellis <bellis@hsph.harvard.edu> writes:

    BE> IMHO the wrong question is being asked here---it is not a
    BE> matter of underlying toolkit. We could literally spend the
    BE> rest of our lives arguing over toolkit, especially since
    BE> toolkits come in and out of fashion (X widget sets come to
    BE> mind...), stopped being developed and start again (wxWindows
    BE> had a period of stagnation if I recall) or undergo radical
    BE> changes (gtk as mentioned). Rather I think what really needs
    BE> to be decided is a uniform R level mechanism for GUIs,

I think the primary problem is writing it in the first place.  

There is access to AWT and Swing, via RSJava (when it's feeling
stable... sigh...).

There is the tcltk toolkit, which we are having some success using,
actually (menu's, etc).

You can argue about the merits of anything all you want, but he who
codes first wins in this game.  And is stuck with having to maintain
it, if they plan on anyone else using it...

I think this is the big issue.  No one has much time, and this is a
big time sink, especially with multiple moving targets (R vs "threaded
R", event loops; various GUI API changes; supporting libraries; lots
of other critical issues which are obvious enough not to state...).  I
think it'll take a hacker with Brian or Duncan's skills to craft it
fast enough to not let it get stuck.

While a uniform API would be nice for R, to attach to any toolkit, I
suspect it is non trivial.  There are movements/projects like "AnyGUI"
for Python, which are attempting to be flexible over a choice of
toolkits from a single set of code.  However, it seems that every GUI
API has its own unique twists on layout, etc, that make this
seriously non-trivial.

Best just to pick one and go...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sun Sep  2 14:07:53 2001
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Sun, 2 Sep 2001 15:07:53 +0200 (MET DST)
Subject: [Rd] Install problems R 1.3.1 on HP-UX (PR#1084)
Message-ID: <200109021307.PAA14257@pubhealth.ku.dk>


Hi,

I installed R 1.3.1 on HP-UX. This caused me quite some
problems. These problems did not occur with the previous version
I installed, which was R version 1.2.3.

First, the result of configure:

    R is now configured for hppa-hp-hpux10.20

      Source directory:          .
      Installation directory:    /opt_local/opt/R
      C compiler:                cc  -D_HPUX_SOURCE +DA1.1 +DS1.1 -Wp,-H16000 -I/opt_local/opt/readline/include -I/opt_local/opt/tk/include -I/opt_local/opt/tcl/include -I/opt_local/opt/jpeg6/include -I/opt_local/opt/png/include -I/opt_local/opt/ncurses/include -I/opt_local/opt/zlib/include -I/users1/kleiweg/R-1.3.1-source -L/opt_local/opt/readline/lib -L/opt_local/opt/tk/lib -L/opt_local/opt/tcl/lib -L/opt_local/opt/jpeg6/lib -L/opt_local/opt/png/lib -L/opt_local/opt/ncurses/lib -L/opt_local/opt/zlib/lib -L/users1/kleiweg/R-1.3.1-source -Aa
      C++ compiler:              c++  -g -O2
      FORTRAN compiler:          fort77  +DA1.1 +DS1.1

      X11 support:               yes
      Gnome support:             no
      Tcl/Tk support:            yes

      R profiling support:       yes
      R as a shared library:     no

The first make halts on src/main/Rdynload.c, the compiler can't
find the variable CFunTab. I solved this by adding the following
lines after #include "R_ext/Rdynpriv.h" :

    #include "../unix/FFDecl.h"
    static CFunTabEntry CFunTab[] =
    {
    #include "../unix/FFTab.h"
      {NULL, NULL}
    };

Now, make runs a bit further, until it stops with the following
errors:

	    cc -Wl,-E  -o R.bin  CConverters.o  Rdynload.o RNG.o  apply.o arithmetic.o array.o attrib.o  bind.o builtin.o  character.o coerce.o colors.o complex.o connections.o context.o  cov.o cum.o  dcf.o datetime.o debug.o devPS.o devPicTeX.o deparse.o deriv.o  devices.o dotcode.o dstruct.o duplicate.o  envir.o errors.o eval.o  format.o fourier.o  gram.o gram-ex.o graphics.o  internet.o iosupport.o  lapack.o list.o logic.o  main.o match.o memory.o model.o  names.o  objects.o optim.o optimize.o options.o  par.o paste.o platform.o  plot.o plot3d.o plotmath.o  print.o printarray.o printvector.o printutils.o  random.o regex.o relop.o  saveload.o scan.o seq.o size.o sort.o source.o split.o  subassign.o subscript.o subset.o summary.o  unique.o util.o  version.o vfonts.o xxxpr.o ../unix/libunix.a ../appl/libappl.a ../nmath/libnmath.a   -lcl -lisamstub -ldld -L/opt_local/opt/readline/lib -L/opt_local/opt/tk/lib -L/opt_local/opt/tcl/lib -L/opt_local/opt/jpeg6/lib -L/opt_local/opt/png/lib -!
!
L/opt_local/opt/ncurses/lib -L/opt_local/opt/zlib/lib -L/users1/kleiweg/R-1.3.1-source  -lz -lreadline -lncurses -lm
    /usr/ccs/bin/ld: Duplicate symbol "dlerror" in files ../unix/libunix.a(gnome.o) and ../unix/libunix.a(X11.o)
    /usr/ccs/bin/ld: Duplicate symbol "dlopen" in files ../unix/libunix.a(gnome.o) and ../unix/libunix.a(X11.o)
    /usr/ccs/bin/ld: Duplicate symbol "dlclose" in files ../unix/libunix.a(gnome.o) and ../unix/libunix.a(X11.o)
    /usr/ccs/bin/ld: Duplicate symbol "dlsym" in files ../unix/libunix.a(gnome.o) and ../unix/libunix.a(X11.o)
    /usr/ccs/bin/ld: Unsatisfied symbols:
       moduleCdynload (code)
    /usr/ccs/bin/ld: Found 4 duplicate symbol(s)
    *** Error exit code 1

Why is there an object gnome.o when I don't have Gnome support?

I had to make some more changes to several files before all
compiled OK.

In src/main/Rdynload.c I changed this:

    #ifdef HAVE_DLFCN_H

into this:

    #ifndef HAVE_DLFCN_H

In src/unix/hpdlfcn.c I removed the following functions:
    dlerror
    dlopen
    dlclose
    dlsym

Now make runs without errors. After make install I had to do
chmod +x R.bin.

R seems the work fine now.



Version:
 platform = hppa-hp-hpux10.20
 arch = hppa
 os = hpux10.20
 system = hppa, hpux10.20
 status =
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Sep  2 17:38:40 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Sep 2001 18:38:40 +0200
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.31.0109020731320.9820-100000@auk.stats>
References: <Pine.GSO.4.31.0109020731320.9820-100000@auk.stats>
Message-ID: <x2elppeeen.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> Rather, it becomes moot for people who want such facilities.  I suspect
> noone wants to maintain them ....  That Tcl/Tk needs a different low-level
> interface on different platforms is a pain: the original R tcltk package
> code runs on a call that only exists in Tcl/Tk for Unix.  If that were to
> happen again, I am pretty sure that Tcl/Tk would be omitted from the
> Windows port of R (and I believe it is from the Classic Mac port).
> 
> [...]
> 
> Event-loop integration is a major issue with GUIs, and it's a toolkit
> issue.  R is designed to run an event loop and wants to be in control.

Actually, the Tcl crowd has been expending some effort on this issue,
and have seemingly come up with a notification structure that is
*designed* to interact with foreign event loops. 

Last I looked, the Tcl sources for the event loops on the three
platforms (X11/Win32/Mac) seemed to be essentially sample code that
could be grafted on to an existing event loop. That didn't look like
particularly simple reading though, and that was even before Tcl/Tk
had threads... (in the version that shipped with RedHat, that is).

I've been wanting to sink my teeth into this stuff for quite a while,
because it annoys me that I understand so little of it and because I
suspect that the issues are really independent of the choice of GUI
and there is a lot to be learned. 

I rather strongly expect that the current Tcl/Tk interface could be
substantially improved in the process. I'm pretty sure that the
PolledEvents method we use now is plainly wrong -- it certainly is on
Unix, where we had an event-handler solution in place originally, but
that didn't work on Windows, at least not in that way. I sort of
suspect that R itself might benefit by a similar centralization of
event handling as Tcl already has, but that might be a pipe dream.

Also, lack of understanding of the work of the Tcl'ers is probably the
main reason that we don't have it on Classic Mac. The input handler
hack that we use on X11 and Windows doesn't seem to port to that
platform (right, Stefano?). Whether this is important for long enough
befor OS X makes the issue moot is of course debatable.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sun Sep  2 18:54:31 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sun, 2 Sep 2001 13:54:31 -0400 (EDT)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <87zo8du7b7.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.GSO.4.10.10109021338480.17421-100000@hsph.harvard.edu>

On 2 Sep 2001, A.J. Rossini wrote:

> >>>>> "BE" == Byron Ellis <bellis@hsph.harvard.edu> writes:
> 
>     BE> IMHO the wrong question is being asked here---it is not a
>     BE> matter of underlying toolkit. We could literally spend the
>     BE> rest of our lives arguing over toolkit, especially since
>     BE> toolkits come in and out of fashion (X widget sets come to
>     BE> mind...), stopped being developed and start again (wxWindows
>     BE> had a period of stagnation if I recall) or undergo radical
>     BE> changes (gtk as mentioned). Rather I think what really needs
>     BE> to be decided is a uniform R level mechanism for GUIs,
> 
> I think the primary problem is writing it in the first place.  
> 
> There is access to AWT and Swing, via RSJava (when it's feeling
> stable... sigh...).

Right, but this relies on not only an outside package, but another
language entirely. A hefty one at that.

> 
> There is the tcltk toolkit, which we are having some success using,
> actually (menu's, etc).
> 
> You can argue about the merits of anything all you want, but he who
> codes first wins in this game.  And is stuck with having to maintain
> it, if they plan on anyone else using it...
> 
> I think this is the big issue.  No one has much time, and this is a
> big time sink, especially with multiple moving targets (R vs "threaded
> R", event loops; various GUI API changes; supporting libraries; lots
> of other critical issues which are obvious enough not to state...).  I
> think it'll take a hacker with Brian or Duncan's skills to craft it
> fast enough to not let it get stuck.

Ok, you're giving more reasons to develop a binding that is robust enough
to survive changes--not a reason to get stuck with package foo version
0.whatever that only works properly on a few platforms.

> 
> While a uniform API would be nice for R, to attach to any toolkit, I
> suspect it is non trivial.  There are movements/projects like "AnyGUI"
> for Python, which are attempting to be flexible over a choice of
> toolkits from a single set of code.  However, it seems that every GUI
> API has its own unique twists on layout, etc, that make this
> seriously non-trivial.

Yes, and every GUI backend has its own twists that are just bad enough to
completely derail things like GTK porting projects let alone the language
bindings. You have in fact hit upon the exact reason why a reasonably
defined binding for the R language would be a good idea: No Matter What
Package You Pick It Will Suck On Some Platform. 

All I'm saying is that before people go haring off on a bunch of bindings
for various graphics APIs (be it GTK, wxWindows, Tk, Win32, OpenGL GUI or
*whatever*) that it might be advantageous to sit down at perhaps plan out
a common set of features that all work in a way that makes sense for *R*
not for Java or C++ or Tcl (AWT,Gtk+,Tk) and then go from there.

> 
> Best just to pick one and go...
> 
> best,
> -tony



Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

	
> 
> -- 
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------- (wednesday/friday is unknown) --------
> FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
> UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sun Sep  2 19:05:06 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sun, 2 Sep 2001 14:05:06 -0400 (EDT)
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.31.0109020731320.9820-100000@auk.stats>
Message-ID: <Pine.GSO.4.10.10109021355200.17421-100000@hsph.harvard.edu>

On Sun, 2 Sep 2001, Prof Brian D Ripley wrote:

> On Sun, 2 Sep 2001, Byron Ellis wrote:
> 
> That's how Tcl/Tk does it.

Yup, and AWT and a couple of other packages (Smalltalk too, but Smalltalk
is a strange place :-))

> Rather, it becomes moot for people who want such facilities.  I suspect
> noone wants to maintain them ....  That Tcl/Tk needs a different low-level
> interface on different platforms is a pain: the original R tcltk package
> code runs on a call that only exists in Tcl/Tk for Unix.  If that were to
> happen again, I am pretty sure that Tcl/Tk would be omitted from the
> Windows port of R (and I believe it is from the Classic Mac port).

Thats more an issue of the Tcl/Tk people making a mistake than anything
else. Package maintenance has to happen whether or not a 'generic' GUI
toolkit binding for R is developed. The same thing happens in other
spaces, just look at the Perl database stuff. Once upon a time every
database on the planet had its own unique Perl package. Now they have DBI
and everyone thinks its the best thing since sliced bread. However, DBI
doesn't really *do* very much except define a particular interface
mechanism. I'm saying do the same for the GUI---the implementation work
will be more or less the same and there will have to be a 'toolkit
specific' capability ('cause someone will be unable to live with foo
widget that only exists on platform bar) but it can be done. (For
instance, OpenGL implements an extension mechanism, albeit somewhat
clumsily)

> 
> [...]
> 
> Event-loop integration is a major issue with GUIs, and it's a toolkit
> issue.  R is designed to run an event loop and wants to be in control.

Yup. Thats gonna be a problem with every GUI toolkit since GUI
interactivity is psychologically important. Its also a problem with any
embedding project since they too will want control of the event loop.

> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 


Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Sun Sep  2 22:01:20 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 02 Sep 2001 14:01:20 -0700
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <Pine.GSO.4.10.10109021338480.17421-100000@hsph.harvard.edu>
References: <Pine.GSO.4.10.10109021338480.17421-100000@hsph.harvard.edu>
Message-ID: <871ylpxq73.fsf@jeeves.blindglobe.net>

>>>>> "BE" == Byron Ellis <bellis@hsph.harvard.edu> writes:

    BE> All I'm saying is that before people go haring off on a bunch
    BE> of bindings for various graphics APIs (be it GTK, wxWindows,
    BE> Tk, Win32, OpenGL GUI or *whatever*) that it might be
    BE> advantageous to sit down at perhaps plan out a common set of
    BE> features that all work in a way that makes sense for *R* not
    BE> for Java or C++ or Tcl (AWT,Gtk+,Tk) and then go from there.

I'll argue the opposite, actually.  Best to have a bunch of prototypes
around and determine use-cases before deciding a particular something
is "the REAL deal".

Until you have a bunch of prototype applications sitting on the
prototype bindings, it'll be difficult to get it right.

(and yes, I've played with two, so far, Swing bindings via RSJava and
the tcltk ones...).

I suspect that the favorite of anyone will be "whatever they are used
to".  

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wb@vestein.arb-phys.uni-dortmund.de  Mon Sep  3 10:34:19 2001
From: wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke)
Date: 3 Sep 2001 11:34:19 +0200
Subject: [Rd] R-1.3.0-1.3.1.diff does not patch correctly
Message-ID: <9mviqr$1bh3$1@yorikke.arb-phys.uni-dortmund.de>

Subj. says it. The patch contains several lines complaining about "No newline".
After removing these the patch was applicable.
-- 
Dipl.-Math. Wilhelm Bernhard Kloke
Institut fuer Arbeitsphysiologie an der Universitaet Dortmund
Ardeystrasse 67, D-44139 Dortmund, Tel. 0231-1084-257
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep  3 10:58:39 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Sep 2001 11:58:39 +0200
Subject: [Rd] R-1.3.0-1.3.1.diff does not patch correctly
In-Reply-To: <9mviqr$1bh3$1@yorikke.arb-phys.uni-dortmund.de>
References: <9mviqr$1bh3$1@yorikke.arb-phys.uni-dortmund.de>
Message-ID: <x2elpozjcg.fsf@blueberry.kubism.ku.dk>

wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke) writes:

> Subj. says it. The patch contains several lines complaining about "No newline".
> After removing these the patch was applicable.

Odd. This worked cleanly when I tried it on RedHat 7.1. What version
of patch is this?

The offending lines are flagged with a \ in col.1, which is
undocumented in the info file for diff, but obviously discernible from
ordinary unidiff lines (which have either space, + , or - ). So I
suspect that a recent "patch" just treats that as a comment.

Looks like the problem could be difficult to avoid (except by ensuring
that we don't have any files without terminal newlines) since I see no
diff option controlling the behaviour.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep  3 11:13:06 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Sep 2001 12:13:06 +0200
Subject: [Rd] R-1.3.0-1.3.1.diff does not patch correctly
In-Reply-To: <x2elpozjcg.fsf@blueberry.kubism.ku.dk>
References: <9mviqr$1bh3$1@yorikke.arb-phys.uni-dortmund.de>
 <x2elpozjcg.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ae0cziod.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke) writes:
> 
> > Subj. says it. The patch contains several lines complaining about "No newline".
> > After removing these the patch was applicable.
> 
> Odd. This worked cleanly when I tried it on RedHat 7.1. What version
> of patch is this?
> 
> The offending lines are flagged with a \ in col.1, which is
> undocumented in the info file for diff, but obviously discernible from
> ordinary unidiff lines (which have either space, + , or - ). So I
> suspect that a recent "patch" just treats that as a comment.
> 
> Looks like the problem could be difficult to avoid (except by ensuring
> that we don't have any files without terminal newlines) since I see no
> diff option controlling the behaviour.

BTW: The offending files are these:

+++ R-1.3.1/src/library/base/man/Rhome.Rd       Sun Aug  5 02:00:39 2001
+++ R-1.3.1/src/library/base/man/kronecker.Rd   Sun Aug  5 02:00:39 2001
+++ R-1.3.1/src/library/base/man/manova.Rd      Sun Aug  5 02:00:39 2001
+++ R-1.3.1/src/library/mva/man/Harman74.cor.Rd Wed Aug  8 06:32:40 2001
+++ R-1.3.1/src/macintosh/FF_CREATE     Sun Aug 19 08:55:53 2001
+++ R-1.3.1/src/macintosh/GETVERSION    Sun Aug 19 08:56:27 2001
+++ R-1.3.1/src/macintosh/ReadMe.MPW    Sun Aug 19 08:04:58 2001

The ones in the .Rd files should be avoidable. I'm less sure about the
Mac files.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep  3 11:22:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 3 Sep 2001 11:22:17 +0100 (BST)
Subject: [Rd] R-1.3.0-1.3.1.diff does not patch correctly
In-Reply-To: <x2ae0cziod.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0109031120520.7956-100000@gannet.stats.ox.ac.uk>

On 3 Sep 2001, Peter Dalgaard BSA wrote:

> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
>
> > wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke) writes:
> >
> > > Subj. says it. The patch contains several lines complaining about "No newline".
> > > After removing these the patch was applicable.
> >
> > Odd. This worked cleanly when I tried it on RedHat 7.1. What version
> > of patch is this?
> >
> > The offending lines are flagged with a \ in col.1, which is
> > undocumented in the info file for diff, but obviously discernible from
> > ordinary unidiff lines (which have either space, + , or - ). So I
> > suspect that a recent "patch" just treats that as a comment.
> >
> > Looks like the problem could be difficult to avoid (except by ensuring
> > that we don't have any files without terminal newlines) since I see no
> > diff option controlling the behaviour.
>
> BTW: The offending files are these:
>
> +++ R-1.3.1/src/library/base/man/Rhome.Rd       Sun Aug  5 02:00:39 2001
> +++ R-1.3.1/src/library/base/man/kronecker.Rd   Sun Aug  5 02:00:39 2001
> +++ R-1.3.1/src/library/base/man/manova.Rd      Sun Aug  5 02:00:39 2001
> +++ R-1.3.1/src/library/mva/man/Harman74.cor.Rd Wed Aug  8 06:32:40 2001
> +++ R-1.3.1/src/macintosh/FF_CREATE     Sun Aug 19 08:55:53 2001
> +++ R-1.3.1/src/macintosh/GETVERSION    Sun Aug 19 08:56:27 2001
> +++ R-1.3.1/src/macintosh/ReadMe.MPW    Sun Aug 19 08:04:58 2001
>
> The ones in the .Rd files should be avoidable. I'm less sure about the
> Mac files.

They already are avoided in the R-devel tree.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Mon Sep  3 16:14:00 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Mon, 3 Sep 2001 10:14:00 -0500
Subject: [Rd] RE: [R] GUI support from R
In-Reply-To: <871ylpxq73.fsf@jeeves.blindglobe.net>; from rossini@blindglobe.net on Sun, Sep 02, 2001 at 02:01:20PM -0700
References: <Pine.GSO.4.10.10109021338480.17421-100000@hsph.harvard.edu> <871ylpxq73.fsf@jeeves.blindglobe.net>
Message-ID: <20010903101400.C31934@nokomis.stat.umn.edu>

On Sun, Sep 02, 2001 at 02:01:20PM -0700, A.J. Rossini wrote:
> >>>>> "BE" == Byron Ellis <bellis@hsph.harvard.edu> writes:
> 
>     BE> All I'm saying is that before people go haring off on a bunch
>     BE> of bindings for various graphics APIs (be it GTK, wxWindows,
>     BE> Tk, Win32, OpenGL GUI or *whatever*) that it might be
>     BE> advantageous to sit down at perhaps plan out a common set of
>     BE> features that all work in a way that makes sense for *R* not
>     BE> for Java or C++ or Tcl (AWT,Gtk+,Tk) and then go from there.
> 
> I'll argue the opposite, actually.  Best to have a bunch of prototypes
> around and determine use-cases before deciding a particular something
> is "the REAL deal".
> 
> Until you have a bunch of prototype applications sitting on the
> prototype bindings, it'll be difficult to get it right.
> 
> (and yes, I've played with two, so far, Swing bindings via RSJava and
> the tcltk ones...).
> 
> I suspect that the favorite of anyone will be "whatever they are used
> to".  
> 
> best,
> -tony
> 

I think tony is right.  Ideally, we want eventually to have a
hight-level, toolkit and OS independent interface, if that is
possible.  It may turn out that some things are too difficult to make
work cleanly across systems without going to a common denominator that
is too low; in those cases we would like a clean way of describing the
differences.  Unfortunately it isn;t possible to build such things in
the abstract--you need some prototypes to gain experience.

Also, one thing I have learned in may years of experience with this
sort of thing in xlispstat is that for a language like R any good GUI
system requires a proper mechanism for managing concurrency, in other
words: concurrent thread support (this is one thing Java definitely
got right).  Without that you end up either reinventing a significant
fraction of a threading system or with nasty race conditions, or both.
Threading for R is being worked on, but it is going to be a while
until it is ready to go.  It makes sense to experiment with a variety
of GUI designs in the interim and then look at tying things together
when all the pieces are in place.

One area where we can help is by separating the drawing and the event
management in the R graphics devices so that it is possible for R to
use its own drawing code for putting ink on paper but let a toolkit
take over the event management (in the long run I think this may be
more viable cross platform than trying to fight the multiple event
loops battle).  This sort of thing is useful in other contexts as
well, in particular in embedding, and it is being worked on.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep  3 17:31:54 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Sep 2001 18:31:54 +0200
Subject: [Rd] Imitation is the sincerest form of flattery
Message-ID: <x2ofosxmkl.fsf@blueberry.kubism.ku.dk>


This must count as kudos to Kurt and Fritz, as well as others who have
been taking part in the development of the R package format:

http://tcl.activestate.com/cgi-bin/tct/tip/55.html

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Sep  5 10:33:34 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 5 Sep 2001 11:33:34 +0200
Subject: [Rd] spam on R lists --> refuse mail??
Message-ID: <15253.61806.862066.186883@gargle.gargle.HOWL>

 We get caught occasionally, and we all receive spam;
sorry for the last one (on R-help).  Of course, there will never be a 100%
sure prevention... 

Question is what should happen when mail from R-help to an adressee 
is refused with the following message : At least I won't be able to easily send
e-mail to them {and am not willing to use a non-easy way}....

       ----- Transcript of session follows -----
    ... while talking to mail.kku.ac.th.:
    <<< 550 Your site is blocked due to previous spamming incidents

Maybe we (as user community) should try to make sure that our IT people
don't use such extreme anti spam measures....

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wb@vestein.arb-phys.uni-dortmund.de  Wed Sep  5 12:41:53 2001
From: wb@vestein.arb-phys.uni-dortmund.de (Wilhelm B. Kloke)
Date: 5 Sep 2001 13:41:53 +0200
Subject: [Rd] spam on R lists --> refuse mail??
References: <ifado.list.r.devel/15253.61806.862066.186883@gargle.gargle.HOWL>
Message-ID: <9n5321$1kf5$1@yorikke.arb-phys.uni-dortmund.de>

In article <ifado.list.r.devel/15253.61806.862066.186883@gargle.gargle.HOWL>,
Martin Maechler  <maechler@stat.math.ethz.ch> wrote:
> We get caught occasionally, and we all receive spam;
>sorry for the last one (on R-help).  Of course, there will never be a 100%
>sure prevention... 
>
>Question is what should happen when mail from R-help to an adressee 
>is refused with the following message : At least I won't be able to easily send
>e-mail to them {and am not willing to use a non-easy way}....
>
>       ----- Transcript of session follows -----
>    ... while talking to mail.kku.ac.th.:
>    <<< 550 Your site is blocked due to previous spamming incidents
>
>Maybe we (as user community) should try to make sure that our IT people
>don't use such extreme anti spam measures....

This should be considered as an argument PRO newsgroups. In a group
with high traffic like r-devel the usenet noise level is tolerable, IMHO.
-- 
Dipl.-Math. Wilhelm Bernhard Kloke
Institut fuer Arbeitsphysiologie an der Universitaet Dortmund
Ardeystrasse 67, D-44139 Dortmund, Tel. 0231-1084-257
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep  6 08:59:10 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 6 Sep 2001 08:59:10 +0100 (BST)
Subject: [Rd] RFC: d/p/q/rgamma
Message-ID: <Pine.LNX.4.31.0109060850500.1676-100000@gannet.stats>

dgamma and friends in S are documented as

dgamma(x, shape, rate=1)
pgamma(q, shape, rate=1)
qgamma(p, shape, rate=1)
rgamma(n, shape, rate=1)


whereas R has

dgamma(x, shape, scale=1, log = FALSE)
pgamma(q, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
qgamma(p, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
rgamma(n, shape, scale=1)

Note the use of rate vs scale.  Indeed, as both S and R use `rate' for
exponential this seems somewhat strange, and the only such inconsistency I
can find.

I propose that we add a `rate' argument to d/p/q/rgamma as an alternative
to `scale', which is easily done.   The question is where?

I think we have a trap here for most users, who will happily copy

dgamma(x, 17, 0.3)

from their S-PLUS example sheet, and get the wrong answer. My preference
would be to have

dgamma(x, shape, rate, scale=1, log = FALSE)

etc.  That would break existing R code using positional matching.
Question: is there any?

The only really safe alternative is add `rate' as the last parameter.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Sep  6 09:15:43 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 6 Sep 2001 10:15:43 +0200
Subject: [Rd] RFC: d/p/q/rgamma
In-Reply-To: <Pine.LNX.4.31.0109060850500.1676-100000@gannet.stats>
References: <Pine.LNX.4.31.0109060850500.1676-100000@gannet.stats>
Message-ID: <15255.12463.584218.976655@mithrandir.hornik.net>

>>>>> Prof Brian Ripley writes:

> dgamma and friends in S are documented as
> dgamma(x, shape, rate=1)
> pgamma(q, shape, rate=1)
> qgamma(p, shape, rate=1)
> rgamma(n, shape, rate=1)


> whereas R has

> dgamma(x, shape, scale=1, log = FALSE)
> pgamma(q, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
> qgamma(p, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
> rgamma(n, shape, scale=1)

> Note the use of rate vs scale.  Indeed, as both S and R use `rate' for
> exponential this seems somewhat strange, and the only such
> inconsistency I can find.

> I propose that we add a `rate' argument to d/p/q/rgamma as an
> alternative to `scale', which is easily done.  The question is where?

> I think we have a trap here for most users, who will happily copy

> dgamma(x, 17, 0.3)

> from their S-PLUS example sheet, and get the wrong answer. My preference
> would be to have

> dgamma(x, shape, rate, scale=1, log = FALSE)

> etc.  That would break existing R code using positional matching.
> Question: is there any?

One could find out by unpackaging all CRAN packages and grepping for
usages of *gamma in the code.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Sep  6 09:49:02 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 6 Sep 2001 10:49:02 +0200
Subject: [Rd] Re: [R] Bug in ftable?? (Was: Two-way tables of data, etc)
In-Reply-To: <x2g0a2kmo4.fsf@blueberry.kubism.ku.dk>
References: <D5A7D734C9C5D211B9E30008C78923020E95AFBB@exdkba03.novo.dk>
 <x2g0a2kmo4.fsf@blueberry.kubism.ku.dk>
Message-ID: <15255.14462.313764.384032@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> "BXC (Bendix Carstensen)" <bxc@novonordisk.com> writes:
> [tp<- tapply( breaks, list( wool, tension, variant ), mean )]

>> tp <- as.table( tp )
>> ftable( tp )
>> 
>> But here i get:
>> 
>> > attr( tp, "class" ) <- "table"
>> > ftable( tp )
>> Error in cbind(...) : number of rows of matrices must match (see arg 2)

> Um, I don't think so.... ;-)

>> # But still they seem to have similar attributes (except for the naming)
>> attributes( tb )
>> attributes( tp )
>> 
>> Is this a bug or a facility of ftable ?

> It's a bug *somewhere*, not necessarily in ftable. The problem is
> either that the dimname-names are not added by tapply, that neither
> as.table or ftable add dummy names, or that write.ftable gags when
> names are absent. (Or put differently: Are either the "table" or
> "ftable" objects *required* to have named attributes??). 

> Actually, the fact that tapply doesn't generated named dimnames cannot
> be considered the cause since 
> (a) as.table should work on any matrix.
> (b) the second argument to tapply is not a named list in your case

> One  workaround is to add in the names:

>   ft <- ftable(tp)
>   names(attr(ft,"row.vars")) <- c("wool","tension")
>   names(attr(ft,"col.vars")) <- "variant"
>   ft

> another is to make sure that tapply gets the names right:

>> tp <- tapply(breaks, list(wool=wool,tension=tension,variant=variant), mean)
>> ftable(tp)
>              variant    1    2    3    4    5
> wool tension                                 
> A    L               39.0 40.5 40.0 46.0 70.0
>      M               28.0 29.5 26.5 12.0 18.0
>      H               19.5 22.0 10.0 39.5 24.5
> B    L               31.5 29.0 29.0 27.5 24.5
>      M               39.0 35.0 23.5 29.0 22.5
>      H               17.5 18.0 20.0 22.5 13.0

> or - lazy variation - abuse the fact that dataframes are lists and do
> have labeled columns:

>> tp <- tapply( breaks, data.frame(wool,tension,variant), mean )
>> ftable(tp)
>              variant    1    2    3    4    5
> wool tension                                 
> A    L               39.0 40.5 40.0 46.0 70.0
>      M               28.0 29.5 26.5 12.0 18.0
>      H               19.5 22.0 10.0 39.5 24.5
> B    L               31.5 29.0 29.0 27.5 24.5
>      M               39.0 35.0 23.5 29.0 22.5
>      H               17.5 18.0 20.0 22.5 13.0

I think we need to improve as.table.

table() is trying hard to produce variable names, and ftable() [and also
xtabs(), of course] assumes that we have them.

I would suggest enhancing as.table.default to provide dimname names in
addition to adding the "table" class attribute.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep  6 10:21:58 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 6 Sep 2001 10:21:58 +0100 (BST)
Subject: [Rd] RFC: d/p/q/rgamma
In-Reply-To: <15255.12463.584218.976655@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.31.0109061013290.4287-100000@toucan.stats>

On Thu, 6 Sep 2001, Kurt Hornik wrote:

> >>>>> Prof Brian Ripley writes:
>
> > dgamma and friends in S are documented as
> > dgamma(x, shape, rate=1)
> > pgamma(q, shape, rate=1)
> > qgamma(p, shape, rate=1)
> > rgamma(n, shape, rate=1)
>
>
> > whereas R has
>
> > dgamma(x, shape, scale=1, log = FALSE)
> > pgamma(q, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
> > qgamma(p, shape, scale=1, lower.tail = TRUE, log.p = FALSE)
> > rgamma(n, shape, scale=1)
>
> > Note the use of rate vs scale.  Indeed, as both S and R use `rate' for
> > exponential this seems somewhat strange, and the only such
> > inconsistency I can find.
>
> > I propose that we add a `rate' argument to d/p/q/rgamma as an
> > alternative to `scale', which is easily done.  The question is where?
>
> > I think we have a trap here for most users, who will happily copy
>
> > dgamma(x, 17, 0.3)
>
> > from their S-PLUS example sheet, and get the wrong answer. My preference
> > would be to have
>
> > dgamma(x, shape, rate, scale=1, log = FALSE)
>
> > etc.  That would break existing R code using positional matching.
> > Question: is there any?
>
> One could find out by unpackaging all CRAN packages and grepping for
> usages of *gamma in the code.

Only in public code, not for example in people's lecture notes.

There's only one use in the packages we have installed (almost all), of
rgamma(n, r) in sm.  Had that used a third arg, I am sure I would never
have spotted it when porting.

BTW, I think the cleanest approach is

dgamma(x, shape, rate = 1, scale = 1/rate, log = FALSE)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep  6 11:21:29 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 6 Sep 2001 12:21:29 +0200
Subject: [Rd] Re: "table" class requirements (was .. Bug in ftable....)
In-Reply-To: <15255.14462.313764.384032@mithrandir.hornik.net>
References: <D5A7D734C9C5D211B9E30008C78923020E95AFBB@exdkba03.novo.dk>
 <x2g0a2kmo4.fsf@blueberry.kubism.ku.dk>
 <15255.14462.313764.384032@mithrandir.hornik.net>
Message-ID: <15255.20009.696505.653542@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Peter Dalgaard BSA writes:
    >> "BXC (Bendix Carstensen)" <bxc@novonordisk.com> writes:
    >> [tp<- tapply( breaks, list( wool, tension, variant ), mean )]

    >>> tp <- as.table( tp )
    >>> ftable( tp )
    >>> 
    >>> But here i get:
    >>> 
    >>> > attr( tp, "class" ) <- "table"
    >>> > ftable( tp )
    >>> Error in cbind(...) : number of rows of matrices must match (see arg 2)

    >> Um, I don't think so.... ;-)

    >>> # But still they seem to have similar attributes (except for the naming)
    >>> attributes( tb )
    >>> attributes( tp )
    >>> 
    >>> Is this a bug or a facility of ftable ?

    >> It's a bug *somewhere*, not necessarily in ftable. The problem is
    >> either that the dimname-names are not added by tapply, that neither
    >> as.table or ftable add dummy names, or that write.ftable gags when
    >> names are absent. (Or put differently: Are either the "table" or
    >> "ftable" objects *required* to have named attributes??). 

    >> Actually, the fact that tapply doesn't generated named dimnames cannot
    >> be considered the cause since 
    >> (a) as.table should work on any matrix.
    >> (b) the second argument to tapply is not a named list in your case

    >> One  workaround is to add in the names:

    >> ft <- ftable(tp)
    >> names(attr(ft,"row.vars")) <- c("wool","tension")
    >> names(attr(ft,"col.vars")) <- "variant"
    >> ft

    >> another is to make sure that tapply gets the names right:

    >>> tp <- tapply(breaks, list(wool=wool,tension=tension,variant=variant), mean)
    >>> ftable(tp)
    >> variant    1    2    3    4    5
    >> wool tension                                 
    >> A    L               39.0 40.5 40.0 46.0 70.0
    >> M               28.0 29.5 26.5 12.0 18.0
    >> H               19.5 22.0 10.0 39.5 24.5
    >> B    L               31.5 29.0 29.0 27.5 24.5
    >> M               39.0 35.0 23.5 29.0 22.5
    >> H               17.5 18.0 20.0 22.5 13.0

    >> or - lazy variation - abuse the fact that dataframes are lists and do
    >> have labeled columns:

    >>> tp <- tapply( breaks, data.frame(wool,tension,variant), mean )
    >>> ftable(tp)
    >> variant    1    2    3    4    5
    >> wool tension                                 
    >> A    L               39.0 40.5 40.0 46.0 70.0
    >> M               28.0 29.5 26.5 12.0 18.0
    >> H               19.5 22.0 10.0 39.5 24.5
    >> B    L               31.5 29.0 29.0 27.5 24.5
    >> M               39.0 35.0 23.5 29.0 22.5
    >> H               17.5 18.0 20.0 22.5 13.0

    KH> I think we need to improve as.table.

    KH> table() is trying hard to produce variable names, and ftable() [and also
    KH> xtabs(), of course] assumes that we have them.

    KH> I would suggest enhancing as.table.default to provide dimname names in
    KH> addition to adding the "table" class attribute.

I agree with that proposition,
but I disagree with assuming that a "table" class object must have named
dimnames. As long as the other implementations of the S language don't have
these, we will create an unnecessary crevice of incompatibility.
A table could also come along by source()ing an S+-dumped object..
Hence I think ftable(), xtabs() and all *.table() methods *should* work
when the dimnames are not named.

Btw, this is a bit linked to Terry Therneaus strong statements on S-news
yesterday (Subject: Re: [S] dimnames in Sparc Splus 6.0)
about S4 vs S3 classes.  I *do* like in many cases to have `polymorphous'
classes which are allowed/but not required to have certain attributes.
Hence I am waiting for replies explaining how this is easily done within the
S4 class system {{hereby admitting that I've not read the green book
carefully enough recently}}.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Sep  6 11:52:57 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 6 Sep 2001 12:52:57 +0200
Subject: [Rd] Re: "table" class requirements (was .. Bug in ftable....)
In-Reply-To: <15255.20009.696505.653542@gargle.gargle.HOWL>
References: <D5A7D734C9C5D211B9E30008C78923020E95AFBB@exdkba03.novo.dk>
 <x2g0a2kmo4.fsf@blueberry.kubism.ku.dk>
 <15255.14462.313764.384032@mithrandir.hornik.net>
 <15255.20009.696505.653542@gargle.gargle.HOWL>
Message-ID: <15255.21897.571350.501446@mithrandir.hornik.net>

>>>>> Martin Maechler writes:

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
>>>>> Peter Dalgaard BSA writes:
>>> "BXC (Bendix Carstensen)" <bxc@novonordisk.com> writes:
>>> [tp<- tapply( breaks, list( wool, tension, variant ), mean )]

>>>> tp <- as.table( tp )
>>>> ftable( tp )
>>>> 
>>>> But here i get:
>>>> 
>>>> > attr( tp, "class" ) <- "table"
>>>> > ftable( tp )
>>>> Error in cbind(...) : number of rows of matrices must match (see arg 2)

>>> Um, I don't think so.... ;-)

>>>> # But still they seem to have similar attributes (except for the naming)
>>>> attributes( tb )
>>>> attributes( tp )
>>>> 
>>>> Is this a bug or a facility of ftable ?

>>> It's a bug *somewhere*, not necessarily in ftable. The problem is
>>> either that the dimname-names are not added by tapply, that neither
>>> as.table or ftable add dummy names, or that write.ftable gags when
>>> names are absent. (Or put differently: Are either the "table" or
>>> "ftable" objects *required* to have named attributes??). 

>>> Actually, the fact that tapply doesn't generated named dimnames cannot
>>> be considered the cause since 
>>> (a) as.table should work on any matrix.
>>> (b) the second argument to tapply is not a named list in your case

>>> One  workaround is to add in the names:

>>> ft <- ftable(tp)
>>> names(attr(ft,"row.vars")) <- c("wool","tension")
>>> names(attr(ft,"col.vars")) <- "variant"
>>> ft

>>> another is to make sure that tapply gets the names right:

>>>> tp <- tapply(breaks, list(wool=wool,tension=tension,variant=variant), mean)
>>>> ftable(tp)
>>> variant    1    2    3    4    5
>>> wool tension                                 
>>> A    L               39.0 40.5 40.0 46.0 70.0
>>> M               28.0 29.5 26.5 12.0 18.0
>>> H               19.5 22.0 10.0 39.5 24.5
>>> B    L               31.5 29.0 29.0 27.5 24.5
>>> M               39.0 35.0 23.5 29.0 22.5
>>> H               17.5 18.0 20.0 22.5 13.0

>>> or - lazy variation - abuse the fact that dataframes are lists and do
>>> have labeled columns:

>>>> tp <- tapply( breaks, data.frame(wool,tension,variant), mean )
>>>> ftable(tp)
>>> variant    1    2    3    4    5
>>> wool tension                                 
>>> A    L               39.0 40.5 40.0 46.0 70.0
>>> M               28.0 29.5 26.5 12.0 18.0
>>> H               19.5 22.0 10.0 39.5 24.5
>>> B    L               31.5 29.0 29.0 27.5 24.5
>>> M               39.0 35.0 23.5 29.0 22.5
>>> H               17.5 18.0 20.0 22.5 13.0

KH> I think we need to improve as.table.

KH> table() is trying hard to produce variable names, and ftable() [and also
KH> xtabs(), of course] assumes that we have them.

KH> I would suggest enhancing as.table.default to provide dimname names in
KH> addition to adding the "table" class attribute.

> I agree with that proposition, but I disagree with assuming that a
> "table" class object must have named dimnames. As long as the other
> implementations of the S language don't have these, we will create an
> unnecessary crevice of incompatibility.  A table could also come along
> by source()ing an S+-dumped object..  Hence I think ftable(), xtabs()
> and all *.table() methods *should* work when the dimnames are not
> named.

Martin: I view this differently.  How can you refer to variables in a
model formula when you do not know their names?  [Well I know my ftable
code allows for numbers ... bad design.]

Our implemtation of table is different: we view this as the creator of
class "table" and have methods for it.  I do not see this as a source of
imcompatibility: sourcing S+ dumps will not give an object of class
table.  If coercing it to one using as.table adds variable names if
needed we'd be safe, I think.

> Btw, this is a bit linked to Terry Therneaus strong statements on
> S-news yesterday (Subject: Re: [S] dimnames in Sparc Splus 6.0) about
> S4 vs S3 classes.  I *do* like in many cases to have `polymorphous'
> classes which are allowed/but not required to have certain attributes.
> Hence I am waiting for replies explaining how this is easily done
> within the S4 class system {{hereby admitting that I've not read the
> green book carefully enough recently}}.

Need to look up the statement ... cannot seem to find it in my digest?
In any case, I would think that maybe having certain `attributes' is S3
object model thinking ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Thu Sep  6 14:07:30 2001
From: ligges@amadeus.statistik.uni-dortmund.de (ligges@amadeus.statistik.uni-dortmund.de)
Date: Thu, 6 Sep 2001 15:07:30 +0200 (MET DST)
Subject: [Rd] file.copy() problems on WinNT (PR#1085)
Message-ID: <200109061307.PAA29781@pubhealth.ku.dk>

For some files, file.copy() doesn't copy these files correctly.

Here you will find a file (Bitmap, 769Kb) to reproduce the problem:
 http://www.statistik.uni-dortmund.de/leute/ligges/R/test1.bmp

Using 
 file.copy("c:/test1.bmp", "c:/test2.bmp", overwrite = TRUE)
produces a second file with the size of ~1.4 Mb:
 http://www.statistik.uni-dortmund.de/leute/ligges/R/test2.bmp

To reduce size, I put both files into following zip archive:
 http://www.statistik.uni-dortmund.de/leute/ligges/R/test.zip

Using file.copy() with the same file on Solaris and Linux works fine.

Uwe Ligges


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Sep  6 17:16:28 2001
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 6 Sep 2001 18:16:28 +0200
Subject: [Rd] RFC: package pixmap
In-Reply-To: <Pine.LNX.4.21.0109032209130.25132-201000@reclus.nhh.no>
References: <15043.13319.787590.74960@galadriel.ci.tuwien.ac.at>
 <Pine.LNX.4.21.0109032209130.25132-201000@reclus.nhh.no>
Message-ID: <15255.41308.64191.671020@galadriel.ci.tuwien.ac.at>


There is a new package pixmap in $CRAN/src/contrib/Devel which
provides a first shot at a class hierarchy for bitmapped images (as
both bitmap and image are already taken I named it pixmap ... if
somebody has an idea for a better name, please let me know).

This is by no means meant to be final ... more like a basis for
discussion about classes for that purpose. It already has RGB, indexed
and grey bitmaps and conversion and plotting methods for those.

Thanks to Roger Bivand there are native R functions for
reading/writing PNM images, this replaces the respective functions in
the e1071 package. Hence, the netpbm libraries are no longer needed,
which should make life easier (especially on windows). Once we have
agreed on the basic classes it should be easy to support import/export
of other image formats like jpeg or png.

All feedback & code is welcome!

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Sep  6 17:23:51 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 6 Sep 2001 09:23:51 -0700 (PDT)
Subject: [Rd] RFC: d/p/q/rgamma
In-Reply-To: <Pine.GSO.4.31.0109061013290.4287-100000@toucan.stats>
Message-ID: <Pine.A41.4.33.0109060923250.17872-100000@homer03.u.washington.edu>

On Thu, 6 Sep 2001, Prof Brian Ripley wrote:

> BTW, I think the cleanest approach is
>
> dgamma(x, shape, rate = 1, scale = 1/rate, log = FALSE)
>
Yes, I think this is better

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Fri Sep  7 06:15:02 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Fri, 7 Sep 2001 07:15:02 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200109070515.f875F2t22361@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400
* PR# 1081 *
Subject: problems installing R on Solaris 2.8 machine
From: Paivio Pollari <pollari@sun3.oulu.fi>
Date: Fri, 31 Aug 2001 08:54:23 +0300 (EET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1052 *
Subject:  Inconsistent behaviour of is.vector? 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 14 Aug 2001 09:04:57 +0100
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068

Directory:  Macintosh

none

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
* PR# 1057 *
Subject: crt1.o skipped at configure time ?
From: laurent@cbs.dtu.dk
Date: Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
* PR# 1062 *
Subject: system.file("",package)
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Sun, 19 Aug 2001 16:01:57 -0700 (PDT)
* PR# 1084 *
Subject: Install problems R 1.3.1 on HP-UX
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Sun, 2 Sep 2001 15:07:41 +0200 (CEST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1080 *
Subject: bug in histogram rendering
From: ljlehou@sandia.gov
Date: Thu, 30 Aug 2001 01:40:13 +0200 (MET DST)
* PR# 1083 *
Subject: --quiet flag sets echo option to TRUE
From: "David Kane  <David Kane" <a296180@mica.fmr.com>
Date: Fri, 31 Aug 2001 13:07:19 -0400
* PR# 1085 *
Subject: file.copy() problems on WinNT
From: Uwe Ligges <ligges@amadeus.statistik.uni-dortmund.de>
Date: Thu, 06 Sep 2001 15:07:26 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep  7 08:57:24 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 7 Sep 2001 09:57:24 +0200 (MET DST)
Subject: [Rd] file.copy() problems on WinNT (PR#1085)
Message-ID: <200109070757.JAA05215@pubhealth.ku.dk>

Looks like it is written to expect text files.

Please try making the file opens in R_AppedFile binary, and tell us if
that solves it.

On Thu, 6 Sep 2001 ligges@amadeus.statistik.uni-dortmund.de wrote:

> For some files, file.copy() doesn't copy these files correctly.
>
> Here you will find a file (Bitmap, 769Kb) to reproduce the problem:
>  http://www.statistik.uni-dortmund.de/leute/ligges/R/test1.bmp
>
> Using
>  file.copy("c:/test1.bmp", "c:/test2.bmp", overwrite = TRUE)
> produces a second file with the size of ~1.4 Mb:
>  http://www.statistik.uni-dortmund.de/leute/ligges/R/test2.bmp
>
> To reduce size, I put both files into following zip archive:
>  http://www.statistik.uni-dortmund.de/leute/ligges/R/test.zip
>
> Using file.copy() with the same file on Solaris and Linux works fine.
>
> Uwe Ligges
>
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status =
>  major = 1
>  minor = 3.1
>  year = 2001
>  month = 08
>  day = 31
>  language = R
>
> Windows NT 4.0 (build 1381) Service Pack 6
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Fri Sep  7 12:07:03 2001
From: ligges@amadeus.statistik.uni-dortmund.de (ligges@amadeus.statistik.uni-dortmund.de)
Date: Fri, 7 Sep 2001 13:07:03 +0200 (MET DST)
Subject: [Rd] file.copy() problems on WinNT (PR#1085)
Message-ID: <200109071107.NAA07759@pubhealth.ku.dk>

Prof Brian Ripley wrote:
> 
> Looks like it is written to expect text files.
> 
> Please try making the file opens in R_AppedFile binary, and tell us if
> that solves it.

You are right. Changing "a" to "ab" and "r" to "rb" in the following
lines of R_AppendFile (file: /src/main/platform.c) solves the problem.


    if((fp1 = R_fopen(R_ExpandFileName(file1), "a")) == NULL) {
        return 0;
    }
    if((fp2 = R_fopen(R_ExpandFileName(file2), "r")) == NULL) {


Thank you!

Uwe Ligges


> On Thu, 6 Sep 2001 ligges@amadeus.statistik.uni-dortmund.de wrote:
> 
> > For some files, file.copy() doesn't copy these files correctly.
> >
> > Here you will find a file (Bitmap, 769Kb) to reproduce the problem:
> >  http://www.statistik.uni-dortmund.de/leute/ligges/R/test1.bmp
> >
> > Using
> >  file.copy("c:/test1.bmp", "c:/test2.bmp", overwrite = TRUE)
> > produces a second file with the size of ~1.4 Mb:
> >  http://www.statistik.uni-dortmund.de/leute/ligges/R/test2.bmp
> >
> > To reduce size, I put both files into following zip archive:
> >  http://www.statistik.uni-dortmund.de/leute/ligges/R/test.zip
> >
> > Using file.copy() with the same file on Solaris and Linux works fine.
> >
> > Uwe Ligges
> >
> >
> > --please do not edit the information below--
> >
> > Version:
> >  platform = i386-pc-mingw32
> >  arch = x86
> >  os = Win32
> >  system = x86, Win32
> >  status =
> >  major = 1
> >  minor = 3.1
> >  year = 2001
> >  month = 08
> >  day = 31
> >  language = R
> >
> > Windows NT 4.0 (build 1381) Service Pack 6
> >
> > Search Path:
> >  .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From menstav@hotmail.com  Sat Sep  8 01:01:47 2001
From: menstav@hotmail.com (menstav@hotmail.com)
Date: Sat, 8 Sep 2001 02:01:47 +0200 (MET DST)
Subject: [Rd] t.test (PR#1086)
Message-ID: <200109080001.CAA12968@pubhealth.ku.dk>

Full_Name: Menelaos Stavrinides
Version: 1.3. 1
OS: Windows 98
Submission from: (NULL) (193.129.76.90)


When model simplification is used in glm (binomial errors) and anova is used two
compare two competitive models one can use either an "F" or a "Chi" test.

R always performs an F test (Although when test="Chi" the test is labeled as
Chi, there isn't any difference between F and Chi test)

Let us assume model1 and model2, where model2 a simplified version of model1

model1_glm(y~factor1*factor2,binomial)
model2_update(model1,~.-factor2)
anova(model1,model2,test="F")# will give the same result as 
anova(model1,model2,test="Chi") 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From menstav@hotmail.com  Sat Sep  8 01:03:32 2001
From: menstav@hotmail.com (menstav@hotmail.com)
Date: Sat, 8 Sep 2001 02:03:32 +0200 (MET DST)
Subject: [Rd] anova in model simplification in glm (PR#1087)
Message-ID: <200109080003.CAA12990@pubhealth.ku.dk>

Full_Name: Menelaos Stavrinides
Version: 1.3. 1
OS: Windows 98
Submission from: (NULL) (193.129.76.90)


When model simplification is used in glm (binomial errors) and anova is used two
compare two competitive models one can use either an "F" or a "Chi" test.

R always performs an F test (Although when test="Chi" the test is labeled as
Chi, there isn't any difference between F and Chi test)

Let us assume model1 and model2, where model2 a simplified version of model1

model1_glm(y~factor1*factor2,binomial)
model2_update(model1,~.-factor2)
anova(model1,model2,test="F")# will give the same result as 
anova(model1,model2,test="Chi") 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep  8 07:32:28 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 8 Sep 2001 07:32:28 +0100 (BST)
Subject: [Rd] t.test (PR#1086)
In-Reply-To: <200109080001.CAA12968@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0109080723570.6057-100000@auk.stats>

On Sat, 8 Sep 2001 menstav@hotmail.com wrote:

> Full_Name: Menelaos Stavrinides
> Version: 1.3. 1
> OS: Windows 98
> Submission from: (NULL) (193.129.76.90)
>
>
> When model simplification is used in glm (binomial errors) and anova is used two
> compare two competitive models one can use either an "F" or a "Chi" test.
>
> R always performs an F test (Although when test="Chi" the test is labeled as
> Chi, there isn't any difference between F and Chi test)
>
> Let us assume model1 and model2, where model2 a simplified version of model1
>
> model1_glm(y~factor1*factor2,binomial)
> model2_update(model1,~.-factor2)
> anova(model1,model2,test="F")# will give the same result as
> anova(model1,model2,test="Chi")

See help(family) and help(anova.glm).  For a binomial family the scale
estimate in the F test is fixed at one, so they should be the same.
If you want extimates scale, use a quasibinomial family.

This applies to PR#1087 too.

Please do read the section of BUGS in the FAQ.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep  8 07:28:21 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 8 Sep 2001 08:28:21 +0200
Subject: [Rd] Re: [R] Why does substr<- truncate and not replace...
In-Reply-To: <x24rqeu0et.fsf@blueberry.kubism.ku.dk>
References: <px66au3h1v.fsf@infiniti.ece.cmu.edu>
 <x24rqeu0et.fsf@blueberry.kubism.ku.dk>
Message-ID: <15257.47749.215502.258140@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> Thomas Vogels <tov@ece.cmu.edu> writes:
>> ... when the replacement string is shorter than the portion of the
>> string to be replaced?
>> 
>> The documentation to substr (in R 1.3.1) gives me:
>> 
>> If the portion to be replaced is longer than the replacement
>> string, then only the portion the length of the string is
>> replaced.
>> 
>> And so I try:
>> 
R> x <- "abcdef"
R> substr(x,2,3) <- "xy" #ok
R> x
>> [1] "axydef"
R> substr(x,2,3) <- "w" #ko
R> x
>> [1] "aw"
>> 
>> hmm, I would have expected "awdef".  Am I reading the docs wrong?  (Or
>> am I just blinded to expect this string because that's what Perl would do?)
>> 
>> Thanks!
>> -tom

> Looks like a bit of a bug. I bet the \0 terminator gets copied in from
> the replacement.

There are yet more interesting effects when using longer portions:

R> x <- "abcdef"
R> x
[1] "abcdef"
R> substr(x, 2, 4) <- "x"
R> x
[1] "ax"

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep  8 10:43:50 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 8 Sep 2001 10:43:50 +0100 (BST)
Subject: [Rd] Re: [R] Why does substr<- truncate and not replace...
In-Reply-To: <15257.47749.215502.258140@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0109081041490.7260-100000@gannet.stats>

This is already fixed in R-devel:

> x
[1] "axcdef"

If start - stop is 1, the substring is of length 2 ...

On Sat, 8 Sep 2001, Kurt Hornik wrote:

> >>>>> Peter Dalgaard BSA writes:
>
> > Thomas Vogels <tov@ece.cmu.edu> writes:
> >> ... when the replacement string is shorter than the portion of the
> >> string to be replaced?
> >>
> >> The documentation to substr (in R 1.3.1) gives me:
> >>
> >> If the portion to be replaced is longer than the replacement
> >> string, then only the portion the length of the string is
> >> replaced.
> >>
> >> And so I try:
> >>
> R> x <- "abcdef"
> R> substr(x,2,3) <- "xy" #ok
> R> x
> >> [1] "axydef"
> R> substr(x,2,3) <- "w" #ko
> R> x
> >> [1] "aw"
> >>
> >> hmm, I would have expected "awdef".  Am I reading the docs wrong?  (Or
> >> am I just blinded to expect this string because that's what Perl would do?)
> >>
> >> Thanks!
> >> -tom
>
> > Looks like a bit of a bug. I bet the \0 terminator gets copied in from
> > the replacement.
>
> There are yet more interesting effects when using longer portions:
>
> R> x <- "abcdef"
> R> x
> [1] "abcdef"
> R> substr(x, 2, 4) <- "x"
> R> x
> [1] "ax"
>
> -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pwhiting@whitings.org  Sat Sep  8 16:19:17 2001
From: pwhiting@whitings.org (pwhiting@whitings.org)
Date: Sat, 8 Sep 2001 17:19:17 +0200 (MET DST)
Subject: [Rd] barplot forces xpd=TRUE (PR#1088)
Message-ID: <200109081519.RAA14437@pubhealth.ku.dk>


<<insert bug report here>>

barplot hardcodes xpd as "TRUE" causing the bars to go outside of the
plot region.  True can be the default, but it shouldn't be the only
option.

*** barplot.R   Sat Sep  8 10:15:16 2001
--- barplot.R.orig      Sat Sep  8 10:03:39 2001
***************
*** 5,11 ****
           legend.text = NULL, beside = FALSE, horiz = FALSE,
           col = heat.colors(NR), border = par("fg"),
           main = NULL, sub = NULL, xlab = NULL, ylab = NULL,
!          xlim = NULL, ylim = NULL, xpd = TRUE,
           axes = TRUE, axisnames = TRUE, inside = TRUE, plot = TRUE, ...)
  {
      if (!missing(inside)) .NotYetUsed("inside", error = FALSE)
--- 5,11 ----
           legend.text = NULL, beside = FALSE, horiz = FALSE,
           col = heat.colors(NR), border = par("fg"),
           main = NULL, sub = NULL, xlab = NULL, ylab = NULL,
!          xlim = NULL, ylim = NULL,
           axes = TRUE, axisnames = TRUE, inside = TRUE, plot = TRUE, ...)
  {
      if (!missing(inside)) .NotYetUsed("inside", error = FALSE)
***************
*** 61,68 ****
        w.m <- matrix(w.m, nc = NC)
      if(plot) { ##-------- Plotting :
        opar <-
!           if (horiz)  par(xaxs = "i", xpd=xpd)
!           else        par(yaxs = "i", xpd=xpd)
        on.exit(par(opar))

        plot.new()
--- 61,68 ----
        w.m <- matrix(w.m, nc = NC)
      if(plot) { ##-------- Plotting :
        opar <-
!           if (horiz)  par(xaxs = "i", xpd = TRUE)
!           else        par(yaxs = "i", xpd = TRUE)
        on.exit(par(opar))

        plot.new()



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From michael_odonnell@acm.org  Sat Sep  8 19:25:33 2001
From: michael_odonnell@acm.org (michael_odonnell@acm.org)
Date: Sat, 8 Sep 2001 20:25:33 +0200 (MET DST)
Subject: [Rd] Debian Woody r-base depends on blas2 (PR#1089)
Message-ID: <200109081825.UAA14788@pubhealth.ku.dk>

Full_Name: Michael J. O'Donnell
Version: 1.3.1-1
OS: Linux, Debian Woody distribution
Submission from: (NULL) (64.34.17.133)


I tried to install the R packages for the Debian GNU/Linux Woody distribution.
I added "deb http://cran.r-project.org/bin/linux/debian woody main" to
my /etc/apt/sources.list, and ran dselect with the apt-get method.
I selected all of the R packages that I could find. The installation
appeared to fail, because r-base and r-recommended both depend on blas2.
I cannot find a Debian package for blas2 in the Debian archives, nor in
the CRAN archives. blas1 is in the Debian archives for both Potato and Woody.
I also checked the package list for your Debian Potato distribution, and
I found no dependence on blas2 nor on blas1 there.

Mike O'Donnell


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Sat Sep  8 20:17:18 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Sat, 8 Sep 2001 14:17:18 -0500
Subject: [Rd] Debian Woody r-base depends on blas2 (PR#1089)
In-Reply-To: <200109081825.UAA14788@pubhealth.ku.dk>
References: <200109081825.UAA14788@pubhealth.ku.dk>
Message-ID: <15258.28350.979023.146720@sonny.eddelbuettel.com>


Michael,

  "Michael" == michael odonnell <michael_odonnell@acm.org> writes:
  Michael>  Full_Name: Michael J. O'Donnell Version: 1.3.1-1 OS: Linux,
  Michael> Debian Woody distribution Submission from: (NULL) (64.34.17.133)
  Michael> 
  Michael> 
  Michael> I tried to install the R packages for the Debian GNU/Linux Woody
  Michael> distribution.  I added "deb
  Michael> http://cran.r-project.org/bin/linux/debian woody main" to my
  Michael> /etc/apt/sources.list, and ran dselect with the apt-get method.  I
  Michael> selected all of the R packages that I could find. The installation
  Michael> appeared to fail, because r-base and r-recommended both depend on
  Michael> blas2.  I cannot find a Debian package for blas2 in the Debian
  Michael> archives, nor in the CRAN archives. blas1 is in the Debian
  Michael> archives for both Potato and Woody.  I also checked the package
  Michael> list for your Debian Potato distribution, and I found no
  Michael> dependence on blas2 nor on blas1 there.

Blas2 is a so-called "virtual package" which is provided by the actual blas1
package, as well as by any of the four atlas2 packages (atlas2-base,
atlas2-p3, atlas2-p4, atlas2-athlon). I highly recommended the atlas2
packages (esp if one matches your processor) as the speed gain can be
tremendous for linear algebra operations

Also, I'd recommend using apt-get instead of dselect; a simple

    $ apt-get update; apt-get install r-base

should have resolved that dependency for you.

Note that you can pick a closer mirror; I use cran.us.r-project.org.

Hope that helps,  Dirk


-- 
Our DSL access will be shut off September 10 due to the bankruptcy of Rhythms,
and the inability of Ameritech to respond in a timely fashion.  An optimistic
view is that we might be back online by the end of September.  --  Dirk
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Sun Sep  9 21:52:54 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Sun, 9 Sep 2001 22:52:54 +0200 (MET DST)
Subject: [Rd] [R] bad R.css link in "packages.html" (PR#1090)
Message-ID: <200109092052.WAA18066@pubhealth.ku.dk>

I downloaded and installed R-1.3.1 yesterday, and had to change line
2 of the "packages.html" file in $RHOME/doc/html/

The configuration steps were "the usual",

tar zxvf ...
cd ...
./configure
make
make check
make install

If it's relevant,

Sys.info() 
        sysname                         release 
	"Linux"                          "2.2.14" 
	version                         nodename 
	"#2 Sat Nov 25 15:30:42 CET 2000"  "camille.indigoindustrial.co.nz" 
	machine                         login 
	"i586"                         "unknown" 
	user 
	"jasont" 


Changed line 2 from:
<link rel="stylesheet" type="text/css" href="../../R.css">

to:
<link rel="stylesheet" type="text/css" href="./R.css">

Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Sep  9 22:33:41 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Sep 2001 23:33:41 +0200
Subject: [Rd] [R] bad R.css link in "packages.html" (PR#1090)
In-Reply-To: <200109092052.WAA18066@pubhealth.ku.dk>
References: <200109092052.WAA18066@pubhealth.ku.dk>
Message-ID: <x2heucjbgq.fsf@blueberry.kubism.ku.dk>

jasont@indigoindustrial.co.nz writes:

> I downloaded and installed R-1.3.1 yesterday, and had to change line
> 2 of the "packages.html" file in $RHOME/doc/html/

....

> Changed line 2 from:
> <link rel="stylesheet" type="text/css" href="../../R.css">
> 
> to:
> <link rel="stylesheet" type="text/css" href="./R.css">

Hmm. Yes, this looks wrong, but what are the ill effects? When you
use help.start(), doesn't the correct setting get put into
.R/doc/html/packages.html ?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Sep 11 18:05:21 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 11 Sep 2001 13:05:21 -0400
Subject: [Rd] ... in generic/specific methods
Message-ID: <3B9E4451.67A9B893@bank-banque-canada.ca>

The prescription that "..." as an argument in a generic means that "..." should be an
argument in the specific methods (as is being suggested by checkMethods() in devel)
implies that errors will not automatically be generated when a specific method gets
arguments it does not use.  I do not view the change as an improvement since  I think
of these errors as a valuable mechanism for catching mistakes, so I would like to
understand the rationale. The change does not break things that work, it just means
that certain kinds of errors which were once caught automatically are no longer
caught automatically.

Now it is completely possible that this represents a fairly major misunderstanding of
inheritance on my part. But I believe my understanding is consistent with the
explanation of this in Chambers and Hastie (quoted below) which is the only place in
my somewhat dated collection of S reference books where I have found the issue
discussed at the necessary level of detail. My understanding is also consistent with
examples in MASS (at least the 1994 version) and elsewhere, whereas the prescription
of checkMethods() is not.  All of this is to say that there will be a number of long
time users who will be confused.

To the extent that I do understand the rationale of the checkMethods() prescription,
I believe the problem is that things are easier if UseMethod and NextMethod can pass
along arguments without needing to keep track of things. If specific methods use only
subsets of arguments the dispatch mechanism becomes more complicated or impossible.
Now, if it truly is impossible then the argument is fairly clear. But if it is only
more complicated then there is a trade-off between simplified dispatch and better
error checking (plus an enormous base of code which has assumed the prior mechanism).

Paul Gilbert
___
from J.M. Chambers and T.J. Hastie, "Statistical Models in S", 1992, Appendix A,
p466:

"When UseMethod() has found a method, it re-matches the actual call to the generic
with the definition of the method. Similarly, NextMethod() matches arguments with the
same order and names as the call to the generic. Methods do not need to have the same
arguments as the generic. In most examples, the method should allow optional, named
arguments to be passed down, if it plans to call NextMethod(). This means that most
such methods should have "..." as an argument. In the case of "[.factor"(), however,
we took the opposite approach. We decided that only one subscript argument made sense
for factors, although other objects might meaningfully have more arguments. The
definition here then produces a clean error message if an extra argument is included:

...
This is a tradeoff between allowing more general use of the method and providing
informative error messages; the relative importance of each should be examined
case-by-case."

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Sep 12 17:30:19 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 12 Sep 2001 12:30:19 -0400 (EDT)
Subject: [Rd] feature request: comment character in read.table?
Message-ID: <Pine.LNX.4.30.0109121221400.1270-100000@bolker.zoo.ufl.edu>


  How difficult would it be (I could try myself if someone thought it
would be straightforward) to change read.table to allow a comment
character such as # or %?  My thought would be that anything on a line
following a comment character would be ignored (so that the combination of
blank.lines.skip=TRUE and a comment at the beginning of the line would
lead to a line being skipped completely).
 I'm always encouraging my students to comment their data sets, and it
feels lame to tell them they have to count the number of initial lines in
the data set in order to set the "skip" parameter appropriately.  (The
comment character would also allow comments about a particular data
point.)

  I know I could hack this (a) with sed in Unix [but my students using
Windows are likely to have trouble] (b) within R, by processing the file
and creating a temporary file with comments deleted.  (b) is probably what
I'll do as a temporary fix, but this seems to be a reasonable piece of
functionality for R to have ...

  thoughts?

  Ben Bolker


-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Sep 12 18:18:10 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 12 Sep 2001 18:18:10 +0100 (BST)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.LNX.4.30.0109121221400.1270-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.GSO.4.31.0109121814450.6636-100000@auk.stats>

On Wed, 12 Sep 2001, Ben Bolker wrote:

>
>   How difficult would it be (I could try myself if someone thought it
> would be straightforward) to change read.table to allow a comment
> character such as # or %?  My thought would be that anything on a line

It's hard in read.table, especially given the changes in R-devle to mke it
more flexible.  The place to do this seems to me to be the internals of
scan.  They are far from transparent, though.

> following a comment character would be ignored (so that the combination of
> blank.lines.skip=TRUE and a comment at the beginning of the line would
> lead to a line being skipped completely).
>  I'm always encouraging my students to comment their data sets, and it
> feels lame to tell them they have to count the number of initial lines in
> the data set in order to set the "skip" parameter appropriately.  (The
> comment character would also allow comments about a particular data
> point.)
>
>   I know I could hack this (a) with sed in Unix [but my students using
> Windows are likely to have trouble] (b) within R, by processing the file
> and creating a temporary file with comments deleted.  (b) is probably what
> I'll do as a temporary fix, but this seems to be a reasonable piece of
> functionality for R to have ...

(b) seems easy to me. Use either a file() connection or an output text
connection.  (I don't know if file(), that's no arg, works on Mac for
example, though.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Thu Sep 13 09:43:08 2001
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Thu, 13 Sep 2001 10:43:08 +0200 (MET DST)
Subject: [Rd] sum overflow (PR#1091)
Message-ID: <200109130843.KAA28348@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 1.2.3
OS: linux
Submission from: (NULL) (193.62.250.209)


I think I have found an accuracy problem with sum()

> a<-1:1000
> b<-1:1000
>
> crossprod(a,a)*crossprod(b,b)
             [,1]
[1,] 1.114448e+17
> drop(.Last.value)
[1] 1.114448e+17
>
#this should give same answer as above
> sum(a*a)*sum(b*b)
[1] -652010736
#seems to be due to sum using integer representation which overflows instead of
using
#double representation

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 13 09:53:56 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Sep 2001 09:53:56 +0100 (BST)
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <200109130843.KAA28348@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0109130948310.14470-100000@gannet.stats>

It's not a problem with sum:

> sum(a*a)
[1] 333833500
> sum(b*b)
[1] 333833500

are accurate.

The overflow is in the integer arithmetic for *.  That's a question for
your C run-time system.  On a 64-bit machine you might get different
results (although most use 32-bit ints, including mine).

If you use integers you need to be aware of the consequences.  It's a
feature not a bug.


On Thu, 13 Sep 2001 wsi@gcal.ac.uk wrote:

> Full_Name: Bill Simpson
> Version: 1.2.3
> OS: linux
> Submission from: (NULL) (193.62.250.209)
>
>
> I think I have found an accuracy problem with sum()
>
> > a<-1:1000
> > b<-1:1000
> >
> > crossprod(a,a)*crossprod(b,b)
>              [,1]
> [1,] 1.114448e+17
> > drop(.Last.value)
> [1] 1.114448e+17
> >
> #this should give same answer as above
> > sum(a*a)*sum(b*b)
> [1] -652010736
> #seems to be due to sum using integer representation which overflows instead of
> using
> #double representation
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Thu Sep 13 11:59:30 2001
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Thu, 13 Sep 2001 11:59:30 +0100 (BST)
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.31.0109130948310.14470-100000@gannet.stats>
Message-ID: <Pine.LNX.4.10.10109131153420.5118-100000@localhost.localdomain>

> It's not a problem with sum:
> 
> > sum(a*a)
> [1] 333833500
> > sum(b*b)
> [1] 333833500
> 
> are accurate.
> 
> The overflow is in the integer arithmetic for *.  That's a question for
> your C run-time system.  On a 64-bit machine you might get different
> results (although most use 32-bit ints, including mine).
> 
> If you use integers you need to be aware of the consequences.  It's a
> feature not a bug.
I thought R used an internal rep that was double in all cases.
Now I'm confused:
> a<-(1:1000)    
> b<-(1:1000)
> sum(a*a)*sum(b*b)
[1] -652010736
> a<-(1:1000)/1.0
> b<-(1:1000)/1.0
> sum(a*a)*sum(b*b)
[1] 1.114448e+17

So  R somehow decides whether to use an integer or a double
representation? Please tell me the rule used by R so I will know in the
future.

Thanks!

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Sep 13 13:16:36 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 13 Sep 2001 14:16:36 +0200
Subject: [Rd] sum overflow (PR#1091)
References: <Pine.LNX.4.10.10109131153420.5118-100000@localhost.localdomain>
Message-ID: <3BA0A3A4.810379F0@statistik.uni-dortmund.de>

Bill Simpson wrote:
> 
> > It's not a problem with sum:
> >
> > > sum(a*a)
> > [1] 333833500
> > > sum(b*b)
> > [1] 333833500
> >
> > are accurate.
> >
> > The overflow is in the integer arithmetic for *.  That's a question for
> > your C run-time system.  On a 64-bit machine you might get different
> > results (although most use 32-bit ints, including mine).
> >
> > If you use integers you need to be aware of the consequences.  It's a
> > feature not a bug.
> I thought R used an internal rep that was double in all cases.
> Now I'm confused:
> > a<-(1:1000)
> > b<-(1:1000)
> > sum(a*a)*sum(b*b)
> [1] -652010736
> > a<-(1:1000)/1.0
> > b<-(1:1000)/1.0
> > sum(a*a)*sum(b*b)
> [1] 1.114448e+17
> 
> So  R somehow decides whether to use an integer or a double
> representation? Please tell me the rule used by R so I will know in the
> future.


It depends on the function you are using.

In your case you could use:
  as.double(sum(a*a)) * as.double(sum(b*b))

or just check if the result is double:
  is.double(sum(a*a))

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 13 14:51:25 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Sep 2001 14:51:25 +0100 (BST)
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.10.10109131153420.5118-100000@localhost.localdomain>
Message-ID: <Pine.LNX.4.31.0109131443170.14713-100000@gannet.stats>

On Thu, 13 Sep 2001, Bill Simpson wrote:

> > It's not a problem with sum:
> >
> > > sum(a*a)
> > [1] 333833500
> > > sum(b*b)
> > [1] 333833500
> >
> > are accurate.
> >
> > The overflow is in the integer arithmetic for *.  That's a question for
> > your C run-time system.  On a 64-bit machine you might get different
> > results (although most use 32-bit ints, including mine).
> >
> > If you use integers you need to be aware of the consequences.  It's a
> > feature not a bug.
> I thought R used an internal rep that was double in all cases.

Assumed, I guess, as I've never seen that in the manuals.

> Now I'm confused:
> > a<-(1:1000)
> > b<-(1:1000)
> > sum(a*a)*sum(b*b)
> [1] -652010736
> > a<-(1:1000)/1.0
> > b<-(1:1000)/1.0
> > sum(a*a)*sum(b*b)
> [1] 1.114448e+17
>
> So  R somehow decides whether to use an integer or a double
> representation? Please tell me the rule used by R so I will know in the
> future.

It uses what you tell it to in general.  Integers will be handled as
integers, but as in C integer/numeric gives a numeric.  Rather than
learn rules, use typeof or storage.mode as in
> typeof(1:1000)
[1] "integer"

to find out, or make explicit coercions (as.numeric) if you want to make
assumptions about objects.

At present you are only likely to get integers from m:n and similar
seq() calls, and from unclass on a factor.  But no one is saying that will
not change in the future (and it did from S3 to S4).  And you could
always have a user who used as.integer explicitly.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Thu Sep 13 15:19:32 2001
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Thu, 13 Sep 2001 15:19:32 +0100 (BST)
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.31.0109131443170.14713-100000@gannet.stats>
Message-ID: <Pine.LNX.4.10.10109131504160.5394-100000@localhost.localdomain>

> 
> It uses what you tell it to in general.  Integers will be handled as
> integers, but as in C integer/numeric gives a numeric.  Rather than
> learn rules, use typeof or storage.mode as in
> > typeof(1:1000)
> [1] "integer"
> 
> to find out, or make explicit coercions (as.numeric) if you want to make
> assumptions about objects.
Well you saw where I was hit by unexpected integers. BTW did you notice
that integers in a<-1:1000 caused a problem in
sum(a*a) * sum(b*b)
and not in 
crossprod(a,a) * crossprod(b,b)?
sum() preserved the integers as integers and crossprod() coerced them to
doubles.

I don't think you can do any arithmetic at all unless you make some
assumptions. Are you saying I should do as.double(a) every time I do
anything with vectors in R???

As it now stands, R makes most things double, with some exceptions as you
give below. Why not eliminate the exceptions?

> At present you are only likely to get integers from m:n and similar
> seq() calls, and from unclass on a factor.  But no one is saying that will
> not change in the future (and it did from S3 to S4).

>  And you could
> always have a user who used as.integer explicitly.
Yes, that's fine.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Sep 13 17:58:58 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 13 Sep 2001 12:58:58 -0400 (EDT)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.GSO.4.31.0109121814450.6636-100000@auk.stats>
Message-ID: <Pine.LNX.4.30.0109131148330.2512-100000@bolker.zoo.ufl.edu>


  It was pretty straightforward.
  I haven't tested it very extensively, and not on a Mac at all.  The only
subtlety is skipping commented lines at the beginning of the file because
read.table assumes that the first line (not the first non-blank line) is
the header line if header=TRUE.

read.table.c <- function(file,comment="#",debug=FALSE,...) {
  infile <- file(file,"r")
  tmpfile <- file()
  cchar <- "#"
  while (length(cline <- readLines(infile,1))>0) {
    s <- strsplit(cline,cchar)[[1]][1]
    if (nchar(s)>0)  { ## skip blank lines to not screw up header
      if (debug) cat(s,"\n")
      writeLines(s,tmpfile)
    }
  }
  r <- read.table(tmpfile,...)
  close(infile)
  close(tmpfile)
  r
}


On Wed, 12 Sep 2001, Prof Brian D Ripley wrote:

> On Wed, 12 Sep 2001, Ben Bolker wrote:
>
> >
> >   How difficult would it be (I could try myself if someone thought it
> > would be straightforward) to change read.table to allow a comment
> > character such as # or %?  My thought would be that anything on a line
>
> It's hard in read.table, especially given the changes in R-devle to mke it
> more flexible.  The place to do this seems to me to be the internals of
> scan.  They are far from transparent, though.
>
> > following a comment character would be ignored (so that the combination of
> > blank.lines.skip=TRUE and a comment at the beginning of the line would
> > lead to a line being skipped completely).
> >  I'm always encouraging my students to comment their data sets, and it
> > feels lame to tell them they have to count the number of initial lines in
> > the data set in order to set the "skip" parameter appropriately.  (The
> > comment character would also allow comments about a particular data
> > point.)
> >
> >   I know I could hack this (a) with sed in Unix [but my students using
> > Windows are likely to have trouble] (b) within R, by processing the file
> > and creating a temporary file with comments deleted.  (b) is probably what
> > I'll do as a temporary fix, but this seems to be a reasonable piece of
> > functionality for R to have ...
>
> (b) seems easy to me. Use either a file() connection or an output text
> connection.  (I don't know if file(), that's no arg, works on Mac for
> example, though.)
>
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Thu Sep 13 18:03:11 2001
From: fharrell@virginia.edu (Frank E Harrell Jr)
Date: Thu, 13 Sep 2001 13:03:11 -0400
Subject: [Rd] SV4 on R?
Message-ID: <3BA0E6CF.C443E84C@virginia.edu>

Dear R-Developers,

The traffic today on s-news where Terry Therneau, I, and others
are reporting some of the problems we have had using or
converting applications to SV4 reminded me of something
Duncan Temple Lang had mentioned to me a year ago that
I wanted to follow up on.  I recall that Duncan said either that if SV4
were to be implemented in R that it would not be
the default behavior, or that through an option the
new behavior could be turned off.  Would you mind
bringing me up to date on this?  I sincerely hope
that what I thought Duncan said last year still
applies.  Thank you very much for your consideration.  -Frank

P.S.  If anyone receiving this does not subscribe to s-news
and wants to receive background information please let me know.
-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 13 18:38:28 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 13 Sep 2001 18:38:28 +0100 (BST)
Subject: [Rd] SV4 on R?
In-Reply-To: <3BA0E6CF.C443E84C@virginia.edu>
Message-ID: <Pine.GSO.4.31.0109131831030.27843-100000@auk.stats>

On Thu, 13 Sep 2001, Frank E Harrell Jr wrote:

> Dear R-Developers,
>
> The traffic today on s-news where Terry Therneau, I, and others
> are reporting some of the problems we have had using or
> converting applications to SV4 reminded me of something
> Duncan Temple Lang had mentioned to me a year ago that
> I wanted to follow up on.  I recall that Duncan said either that if SV4
> were to be implemented in R that it would not be
> the default behavior, or that through an option the
> new behavior could be turned off.  Would you mind
> bringing me up to date on this?  I sincerely hope
> that what I thought Duncan said last year still
> applies.  Thank you very much for your consideration.  -Frank


There are lots of aspects of S4 behaviour.  Some R already has
(connections, preserving logicals in data frames, for example).  I guess
you are concerned about classes. There I don't think a decision has been
taken.  There is a `methods' package in R-devel, written by John Chambers
that is not yet finished (or I believe so, as it is being changed quite
rapidly and is only partially documented).  What is likely is that in R
1.4.0 all objects will have classes, and that functions like identical(),
as() and is() will be available.  So far this has caused only a few
problems, mainly because there are not problems like the "named" class
presents in S4. (Bit of background: any vector with names in S4 is of class
"named", and that includes lists with names.)

Assuming we decide to keep it I don't expect that all objects will have a
class is not going to be optional.  You will get classes like "numeric"
from class(x).  I think that's a good move.  It does mean that a test for
null class should be a test of !is.object(x), probably.

I do think you and Terry and others are being too negative. The problems
are not with designing new S4 classes to do the job, but porting S3 ones.
I believe too few people have tried to re-design to make use of S4 classes
for there to be enough evidence.  FWIW, MASS and nnet have been using
S4 classes for a few years quite sucessfully: we re-designed the classes.
We stopped because no one else seemed to be moving, and the basic modelling
functions are still confined to S3-style objects.


Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dsmith@insightful.com  Thu Sep 13 19:07:36 2001
From: dsmith@insightful.com (David Smith)
Date: Thu, 13 Sep 2001 11:07:36 -0700
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.31.0109130948310.14470-100000@gannet.stats>
Message-ID: <LGEFIDJJDBKMHCAKBCOICEEJDLAA.dsmith@insightful.com>

> If you use integers you need to be aware of the consequences.  It's a
> feature not a bug.

Perhaps, but maybe a more useful feature would be to signal to the user when
such an overflow occurs?  Sv4 does this by returning NA for overflow integer
results:

> a <- (1:1000)
> b <- (1:1000)
> sum(a * a) * sum(b * b)
[1] NA

When this was introduced in S-PLUS 5, we discovered some overflow errors we
were previously unaware of in S-PLUS (by noticing NAs in the results).

# David Smith

--
David M Smith <dsmith@insightful.com>
S-PLUS Product Marketing Manager, Insightful Corp, Seattle WA
Tel: +1 (206) 283 8802 x360
Fax: +1 (206) 283 0347

Learn how Merck, Proctor & Gamble, Merrill Lynch and others are using
S-PLUS, deploying Web-based analytics and more at the 2001 S-PLUS User
Conference being held in Philadelphia, October 18-19 -
www.insightful.com/events/2001uc.

> -----Original Message-----
> From: owner-r-devel@stat.math.ethz.ch
> [mailto:owner-r-devel@stat.math.ethz.ch]On Behalf Of Prof Brian Ripley
> Sent: Thursday, September 13, 2001 01:54
> To: wsi@gcal.ac.uk
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: Re: [Rd] sum overflow (PR#1091)
>
>
> It's not a problem with sum:
>
> > sum(a*a)
> [1] 333833500
> > sum(b*b)
> [1] 333833500
>
> are accurate.
>
> The overflow is in the integer arithmetic for *.  That's a question for
> your C run-time system.  On a 64-bit machine you might get different
> results (although most use 32-bit ints, including mine).
>
> If you use integers you need to be aware of the consequences.  It's a
> feature not a bug.
>
>
> On Thu, 13 Sep 2001 wsi@gcal.ac.uk wrote:
>
> > Full_Name: Bill Simpson
> > Version: 1.2.3
> > OS: linux
> > Submission from: (NULL) (193.62.250.209)
> >
> >
> > I think I have found an accuracy problem with sum()
> >
> > > a<-1:1000
> > > b<-1:1000
> > >
> > > crossprod(a,a)*crossprod(b,b)
> >              [,1]
> > [1,] 1.114448e+17
> > > drop(.Last.value)
> > [1] 1.114448e+17
> > >
> > #this should give same answer as above
> > > sum(a*a)*sum(b*b)
> > [1] -652010736
> > #seems to be due to sum using integer representation which
> overflows instead of
> > using
> > #double representation
> >
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> > r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
> r-devel-request@stat.math.ethz.ch
> >
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._
> >
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Thu Sep 13 19:35:32 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Thu, 13 Sep 2001 20:35:32 +0200 (CEST)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.LNX.4.30.0109131148330.2512-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.33.0109132031110.510-100000@kleigh.nl>

Ben Bolker scribeva...

>
>   It was pretty straightforward.
>   I haven't tested it very extensively, and not on a Mac at all.  The only
> subtlety is skipping commented lines at the beginning of the file because
> read.table assumes that the first line (not the first non-blank line) is
> the header line if header=TRUE.
>
> read.table.c <- function(file,comment="#",debug=FALSE,...) {
>   infile <- file(file,"r")
>   tmpfile <- file()
>   cchar <- "#"
>   while (length(cline <- readLines(infile,1))>0) {
>     s <- strsplit(cline,cchar)[[1]][1]
>     if (nchar(s)>0)  { ## skip blank lines to not screw up header
>       if (debug) cat(s,"\n")
>       writeLines(s,tmpfile)
>     }
>   }
>   r <- read.table(tmpfile,...)
>   close(infile)
>   close(tmpfile)
>   r
> }

That is not very robust. What about these:

    # a comment
    1 2 3  # a comment
           # a comment
    "1" "2" "3  # not a comment"
    "# not a comment"  # a comment

Comments don't have to start at the first column, and comments
can also exist after real data. A comment char within a string
should not be taken as the start of a comment, and you also have
to take into account that the tokens delimiting a string can
vary.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu Sep 13 20:08:26 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 13 Sep 2001 15:08:26 -0400
Subject: [Rd] SV4 on R?
References: <Pine.GSO.4.31.0109131831030.27843-100000@auk.stats>
Message-ID: <3BA1042A.A55594C8@research.bell-labs.com>

Prof Brian D Ripley wrote:
> 
> On Thu, 13 Sep 2001, Frank E Harrell Jr wrote:
> 
> > Dear R-Developers,
> >
> > The traffic today on s-news where Terry Therneau, I, and others
> > are reporting some of the problems we have had using or
> > converting applications to SV4 reminded me of something
> > Duncan Temple Lang had mentioned to me a year ago that
> > I wanted to follow up on.  I recall that Duncan said either that if SV4
> > were to be implemented in R that it would not be
> > the default behavior, or that through an option the
> > new behavior could be turned off.  Would you mind
> > bringing me up to date on this?  I sincerely hope
> > that what I thought Duncan said last year still
> > applies.  Thank you very much for your consideration.  -Frank
> 
> There are lots of aspects of S4 behaviour.  Some R already has
> (connections, preserving logicals in data frames, for example).  I guess
> you are concerned about classes. There I don't think a decision has been
> taken.  There is a `methods' package in R-devel, written by John Chambers
> that is not yet finished (or I believe so, as it is being changed quite
> rapidly and is only partially documented).  What is likely is that in R
> 1.4.0 all objects will have classes, and that functions like identical(),
> as() and is() will be available.  So far this has caused only a few
> problems, mainly because there are not problems like the "named" class
> presents in S4. (Bit of background: any vector with names in S4 is of class
> "named", and that includes lists with names.)
> 
> Assuming we decide to keep it I don't expect that all objects will have a
> class is not going to be optional.  You will get classes like "numeric"
> from class(x).  I think that's a good move.  It does mean that a test for
> null class should be a test of !is.object(x), probably.

In the current 1.4, the new definitions are in a package "methods". 
Unless that package is attached, the old versions (only) apply,
including the definition of class.  So at present, you can have the
old-style class definition if you want.  In the long run, that may
change as Brian suggests.

In the R context, there are a number of future plans such as threading,
namespaces and compiling.  Defining those using the "S3" model seems to
me to be difficult and undesirable.  Luke and Duncan can comment more
authoritatively, since they are mainly responsible.

> I do think you and Terry and others are being too negative. The problems
> are not with designing new S4 classes to do the job, but porting S3 ones.
> I believe too few people have tried to re-design to make use of S4 classes
> for there to be enough evidence.  FWIW, MASS and nnet have been using
> S4 classes for a few years quite sucessfully: we re-designed the classes.
> We stopped because no one else seemed to be moving, and the basic modelling
> functions are still confined to S3-style objects.
> 
> Brian
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 13 20:43:26 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 13 Sep 2001 20:43:26 +0100 (BST)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.LNX.4.33.0109132031110.510-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.31.0109132041470.28504-100000@auk.stats>

I do intend to do this at a lower level where it will be robust.
As Peter says, quotes are one of the issues I had been thinking about.
I would be happy in the interim to insist on starting with a comment
character.

B


On Thu, 13 Sep 2001, Peter Kleiweg wrote:

> Ben Bolker scribeva...
>
> >
> >   It was pretty straightforward.
> >   I haven't tested it very extensively, and not on a Mac at all.  The only
> > subtlety is skipping commented lines at the beginning of the file because
> > read.table assumes that the first line (not the first non-blank line) is
> > the header line if header=TRUE.
> >
> > read.table.c <- function(file,comment="#",debug=FALSE,...) {
> >   infile <- file(file,"r")
> >   tmpfile <- file()
> >   cchar <- "#"
> >   while (length(cline <- readLines(infile,1))>0) {
> >     s <- strsplit(cline,cchar)[[1]][1]
> >     if (nchar(s)>0)  { ## skip blank lines to not screw up header
> >       if (debug) cat(s,"\n")
> >       writeLines(s,tmpfile)
> >     }
> >   }
> >   r <- read.table(tmpfile,...)
> >   close(infile)
> >   close(tmpfile)
> >   r
> > }
>
> That is not very robust. What about these:
>
>     # a comment
>     1 2 3  # a comment
>            # a comment
>     "1" "2" "3  # not a comment"
>     "# not a comment"  # a comment
>
> Comments don't have to start at the first column, and comments
> can also exist after real data. A comment char within a string
> should not be taken as the start of a comment, and you also have
> to take into account that the tokens delimiting a string can
> vary.
>
> --
> Peter Kleiweg
> http://www.let.rug.nl/~kleiweg/
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Sep 13 21:45:37 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 13 Sep 2001 16:45:37 -0400
Subject: FW: [Rd] sum overflow (PR#1091)
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEDEE@groexmbcr02.pfizer.com>


> From: David Smith [mailto:dsmith@insightful.com]
>> From: Prof Brian Ripley
>>
>> If you use integers you need to be aware of the consequences.  It's a
>> feature not a bug.
>
> Perhaps, but maybe a more useful feature would be to signal to the user
when
> such an overflow occurs?  Sv4 does this by returning NA for overflow
integer
> results:
> 
> > a <- (1:1000)
> > b <- (1:1000)
> > sum(a * a) * sum(b * b)
> [1] NA
> 
> When this was introduced in S-PLUS 5, we discovered some overflow errors
we
> were previously unaware of in S-PLUS (by noticing NAs in the results).

This is a first step in the right direction.  I think that having overflows
generate of NA's should be augmented by a warning or an error message.
Thus we would get something like:

> a <- (1:1000)
> b <- (1:1000)
> sum(a * a) * sum(b * b)
Warning messages: 
Integer overflow produced NA's in: .Primitive("*") 
> [1] NA

Now, the problem will be clear to the user, and many users will immediately
see how to get around it.

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Sep 14 00:04:49 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 13 Sep 2001 19:04:49 -0400 (EDT)
Subject: [Rd] feature request: comment character in read.table?
In-Reply-To: <Pine.LNX.4.33.0109132031110.510-100000@kleigh.nl>
Message-ID: <Pine.LNX.4.30.0109131857260.12164-100000@bolker.zoo.ufl.edu>

On Thu, 13 Sep 2001, Peter Kleiweg wrote:

  [snip]
>
> That is not very robust. What about these:
>
1>     # a comment
2>     1 2 3  # a comment
3>            # a comment
4>     "1" "2" "3  # not a comment"
5>     "# not a comment"  # a comment
>
> Comments don't have to start at the first column, and comments
> can also exist after real data. A comment char within a string
> should not be taken as the start of a comment, and you also have
> to take into account that the tokens delimiting a string can
> vary.
>

  As Brian Ripley has pointed out, he hopes to do this at a lower level,
more robustly, later.  In the meantime, in my defense: this code works for
lines 1, 2, and 3 (it's OK with comments that start after the first column
and that exist after real data -- that was part of my spec).  It doesn't
deal with comment characters embedded in quoted strings, but I don't have
any problem with telling people that they're not allowed to have comment
characters in quoted strings in their data -- it seems to be a perfectly
reasonable restriction.
  If I wanted to hack this further I would probably try to do a strsplit
on quotation characters, and look for comment characters only in the odd
parts of the split.  And if someone puts

  "\"\\"\\\" ## "  "#" "\\  \" \#"

in their data file, then they deserve what they get ... :-)

  Ben Bolker


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Fri Sep 14 13:17:09 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Fri, 14 Sep 2001 07:17:09 -0500
Subject: [Rd] SV4 on R?
In-Reply-To: <3BA0E6CF.C443E84C@virginia.edu>; from fharrell@virginia.edu on Thu, Sep 13, 2001 at 01:03:11PM -0400
References: <3BA0E6CF.C443E84C@virginia.edu>
Message-ID: <20010914071709.B29028@nokomis.stat.umn.edu>

On Thu, Sep 13, 2001 at 01:03:11PM -0400, Frank E Harrell Jr wrote:
> Dear R-Developers,
> 
> The traffic today on s-news where Terry Therneau, I, and others
> are reporting some of the problems we have had using or
> converting applications to SV4 reminded me of something
> Duncan Temple Lang had mentioned to me a year ago that
> I wanted to follow up on.  I recall that Duncan said either that if SV4
> were to be implemented in R that it would not be
> the default behavior, or that through an option the
> new behavior could be turned off.  Would you mind
> bringing me up to date on this?  I sincerely hope
> that what I thought Duncan said last year still
> applies.  Thank you very much for your consideration.  -Frank
> 
> P.S.  If anyone receiving this does not subscribe to s-news
> and wants to receive background information please let me know.

One of the reasons for looking at alternatives to the SV3 style
classes is that they are not very compatible with one thing I think we
need fairly badly: some form name space management.

Name spaces are about controlling which variables in a package are
visible outside a package and about preventing variables in one
package from unintentionally shadowing ones in another.  With name
spaces packages will be more robust; separately developed packages can
be used together more safely.  This is why languages like Tcl and Perl
have added name space facilities in recent years.  For R, name spaces
should also make maintaining the existing R code component of the core
system easier and also allow more internals to be migrated from C to
R.  Name spaces are also needed to support some ideas on byte code
compilation that are being explored.  Some early ideas on how name
spaces might be added to R are available off the developer page,
http://developer.r-project.org/.

Here is the problem with the SV3 approach. Suppose a package
SpecialDates defines a special kind of date class along with a
SpecialDate method for as.character.  A second class DataTree for
managing tree structured data defines a function that plots a tree of
generic objects using the as.character representations of the objects.
The current SV3 approach to dispatch needs to find a definition for
as.character.SpecialDate.  With a single dynamic search path as we
have now that is no problem.  But if we try to use name spaces of any
form I can think of to limit the things that are visible inside the
DataTree package then we also lose its ability to see methods of the
SV3 type that are defined outside the names pace, and this severely
limits the usefulness of generic functions.

Put another way, when a generic function is called with the SV3
dispatching approach it takes the name of the generic function, which
might be defined in one name space, and the name of a class whose
methods are defined in a second names pace, glues them together to get
the method name, and then needs to look up the method name in the right
place.  But at the call site it has no way of knowing that that right
place might be.

The only way around this that I can see is to provide some form of
registration mechanism for methods, some means of saying explicitly
that this function is a method for that generic function and that
class.  The SV4 model is one way, though certainly not the only way,
to achieve this.  By having explicit registration of classes the S4
model also provides for a way of having name space management for
class names, which is also useful.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Fri Sep 14 14:36:45 2001
From: fharrell@virginia.edu (Frank E Harrell Jr)
Date: Fri, 14 Sep 2001 09:36:45 -0400
Subject: [Rd] SV4 on R?
References: <3BA0E6CF.C443E84C@virginia.edu> <20010914071709.B29028@nokomis.stat.umn.edu>
Message-ID: <3BA207ED.C598359E@virginia.edu>

Dear Luke,

Thank you very much for the explanation and for the
good work you are doing on this.  It sounds very
valuable.  I do hope that it will not lead to
non-downward-compatible changes in the S language
except in perhaps unusual cases not affecting
many functions.

One other thought: Something short of what you
are developing could be implemented in the meantime,
namely "manual name registration" through a database
on r-project.org through which developers and users
could register function and class names.  Users
developing packages who desire to reuse an
already registered name would be able to search
the database to find potential incompatibilities 
or overrides they would need to warn users of the
package about.  Periodically-run automatic
database queries could compile lists of conflicts
that can be used to warn all users, with a
suggestion that those registering names last should
consider renaming tings. 
I believe that Stata, along with the
many other good decisions they have made, has
a web-driven registration system.  If Stata's
language were decent I would have been using it.

Let me renew a plea I've made before which will
lessen the need for some overrides.  A user-specified
vector of attribute names (e.g., "label", "comment",
"units") that would be carried forward when a vector
or matrix is subsetted would do away with the need for
the few overrides I have in R implementations of my
libraries, for [.* functions.

Best regards,

Frank Harrell


Luke Tierney wrote:
> 
> On Thu, Sep 13, 2001 at 01:03:11PM -0400, Frank E Harrell Jr wrote:
> > Dear R-Developers,
> >
> > The traffic today on s-news where Terry Therneau, I, and others
> > are reporting some of the problems we have had using or
> > converting applications to SV4 reminded me of something
> > Duncan Temple Lang had mentioned to me a year ago that
> > I wanted to follow up on.  I recall that Duncan said either that if SV4
> > were to be implemented in R that it would not be
> > the default behavior, or that through an option the
> > new behavior could be turned off.  Would you mind
> > bringing me up to date on this?  I sincerely hope
> > that what I thought Duncan said last year still
> > applies.  Thank you very much for your consideration.  -Frank
> >
> > P.S.  If anyone receiving this does not subscribe to s-news
> > and wants to receive background information please let me know.
> 
> One of the reasons for looking at alternatives to the SV3 style
> classes is that they are not very compatible with one thing I think we
> need fairly badly: some form name space management.
> 
> Name spaces are about controlling which variables in a package are
> visible outside a package and about preventing variables in one
> package from unintentionally shadowing ones in another.  With name
> spaces packages will be more robust; separately developed packages can
> be used together more safely.  This is why languages like Tcl and Perl
> have added name space facilities in recent years.  For R, name spaces
> should also make maintaining the existing R code component of the core
> system easier and also allow more internals to be migrated from C to
> R.  Name spaces are also needed to support some ideas on byte code
> compilation that are being explored.  Some early ideas on how name
> spaces might be added to R are available off the developer page,
> http://developer.r-project.org/.
> 
> Here is the problem with the SV3 approach. Suppose a package
> SpecialDates defines a special kind of date class along with a
> SpecialDate method for as.character.  A second class DataTree for
> managing tree structured data defines a function that plots a tree of
> generic objects using the as.character representations of the objects.
> The current SV3 approach to dispatch needs to find a definition for
> as.character.SpecialDate.  With a single dynamic search path as we
> have now that is no problem.  But if we try to use name spaces of any
> form I can think of to limit the things that are visible inside the
> DataTree package then we also lose its ability to see methods of the
> SV3 type that are defined outside the names pace, and this severely
> limits the usefulness of generic functions.
> 
> Put another way, when a generic function is called with the SV3
> dispatching approach it takes the name of the generic function, which
> might be defined in one name space, and the name of a class whose
> methods are defined in a second names pace, glues them together to get
> the method name, and then needs to look up the method name in the right
> place.  But at the call site it has no way of knowing that that right
> place might be.
> 
> The only way around this that I can see is to provide some form of
> registration mechanism for methods, some means of saying explicitly
> that this function is a method for that generic function and that
> class.  The SV4 model is one way, though certainly not the only way,
> to achieve this.  By having explicit registration of classes the S4
> model also provides for a way of having name space management for
> class names, which is also useful.
> 
> luke
> 
> --
> Luke Tierney
> University of Minnesota                      Phone:           612-625-7843
> School of Statistics                         Fax:             612-624-8868
> 313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
> Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Fri Sep 14 15:46:57 2001
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Fri, 14 Sep 2001 16:46:57 +0200 (MET DST)
Subject: [Rd] rowsum dimnames (PR#1092)
Message-ID: <200109141446.QAA16930@pubhealth.ku.dk>

The result of rowsum() in R doesn't have the dimnames I'd expect, e.g.:

> rowsum(matrix(1:12, 3,4), c("Y","X","Y"))
    [,1] [,2] [,3] [,4]
  1    2    5    8   11
  2    4   10   16   22

whereas S-Plus gives the more useful result:
    [,1] [,2] [,3] [,4] 
  X    2    5    8   11
  Y    4   10   16   22

This is because R's rowsum() code gives the first dimnames as "ugroup", which
is a factor, rather than "as.character(ugroup)".  Similarly for the assignment
of names(x) in the case where x is a vector.

I'm using R 1.3.0 on Solaris 2.6.  Help says rowsum's author is Terry Therneau.
Thanks!
			-- David Brahm (a215020@agate.fmr.com)

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Sep 15 09:18:03 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 15 Sep 2001 10:18:03 +0200
Subject: [Rd] sum overflow (PR#1091)
In-Reply-To: <Pine.LNX.4.31.0109131443170.14713-100000@gannet.stats>
References: <Pine.LNX.4.10.10109131153420.5118-100000@localhost.localdomain>
 <Pine.LNX.4.31.0109131443170.14713-100000@gannet.stats>
Message-ID: <15267.3771.66526.124837@gargle.gargle.HOWL>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Thu, 13 Sep 2001, Bill Simpson wrote:
    >> > It's not a problem with sum:
    >> >
    >> > > sum(a*a)
    >> > [1] 333833500
    >> > > sum(b*b)
    >> > [1] 333833500
    >> >
    >> > are accurate.
    >> >
    >> > The overflow is in the integer arithmetic for *.  That's a question for
    >> > your C run-time system.  On a 64-bit machine you might get different
    >> > results (although most use 32-bit ints, including mine).
    >> >
    >> > If you use integers you need to be aware of the consequences.  It's a
    >> > feature not a bug.
    >> I thought R used an internal rep that was double in all cases.

    BDR> Assumed, I guess, as I've never seen that in the manuals.

    >> Now I'm confused:
    >> > a<-(1:1000)
    >> > b<-(1:1000)
    >> > sum(a*a)*sum(b*b)
    >> [1] -652010736
    >> > a<-(1:1000)/1.0
    >> > b<-(1:1000)/1.0
    >> > sum(a*a)*sum(b*b)
    >> [1] 1.114448e+17
    >> 
    >> So  R somehow decides whether to use an integer or a double
    >> representation? Please tell me the rule used by R so I will know in the
    >> future.

    BDR> It uses what you tell it to in general.  Integers will be handled as
    BDR> integers, but as in C integer/numeric gives a numeric.  Rather than
    BDR> learn rules, use typeof or storage.mode as in
    >> typeof(1:1000)
    BDR> [1] "integer"

    BDR> to find out, or make explicit coercions (as.numeric) if you want
    BDR> to make assumptions about objects.

    BDR> At present you are only likely to get integers from m:n and
    BDR> similar seq() calls, and from unclass on a factor.  

also  length() and dim()
on which I even rely in .C() calls when not using explicit as.integer()
there  [but many will tell me that was not "defensive" and un-wise].

    BDR>  But no one is saying that will not change in the future (and it
    BDR> did from S3 to S4).  And you could always have a user who used
    BDR> as.integer explicitly.

indeed!

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Sat Sep 15 13:23:04 2001
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Sat, 15 Sep 2001 14:23:04 +0200 (MET DST)
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun Solaris (PR#1093)
Message-ID: <200109151223.OAA19865@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.3.1
OS: Sun Solaris 8
Submission from: (NULL) (130.235.3.49)


I have been trying to install [R] v1.3.1 locally on a Sun Solaris 8 machine and
I ran into the (already known) perl problems that express theselves as:

Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1390, near "$txtout
mywrap"
        (Missing operator before mywrap?)
Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1405, near "$txtout
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1420, near "$txtout
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1448, near "$txtout
txt_header"
        (Missing operator before txt_header?)
Bare word found where operator expected at
/usr/matcent/hb/R/R-1.3.1/share/perl/R/Rdconv.pm line 1491, near "$txtout
txt_header"
        (Missing operator before txt_header?)

I searched the web for solutions and found Brian Ripley's suggestion one of the
replies to "Re: [Rd] several documentation problems (PR#675)". There he
suggested to add a '&' infront of 'mywrap' and 'txt_header'; "Another guess is
that it might require &mywrap there.". I tried this and it works. I also tried
the alternative to add parentesis around the function calls, which also seemed
to work. 

My suggestion is to add this to Rdconv.pm at the 5 lines above. This would make
the building of [R] a little bit easier.


Perl version used: 

"This is perl, version 5.003 with EMBED built under solaris at Sep 14 1996
22:39:00 + suidperl security patch". 

This is the version of perl installed on a brand new (2001-09-10) Sun
SunBlade100 Solaris machine.

[R] version: Trying to install R v1.3.1.


Regards

Henrik Bengtsson
Lund University
Sweden

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep 15 15:11:59 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 15 Sep 2001 15:11:59 +0100 (BST)
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun
 Solaris (PR#1093)
In-Reply-To: <200109151223.OAA19865@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0109151445290.3896-100000@toucan.stats>

On Sat, 15 Sep 2001 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.3.1
> OS: Sun Solaris 8
> Submission from: (NULL) (130.235.3.49)
>
>
> I have been trying to install [R] v1.3.1 locally on a Sun Solaris 8 machine and
> I ran into the (already known) perl problems that express theselves as:

[...]

> My suggestion is to add this to Rdconv.pm at the 5 lines above. This would make
> the building of [R] a little bit easier.
>
>
> Perl version used:
>
> "This is perl, version 5.003 with EMBED built under solaris at Sep 14 1996
                                                                        ^^^^
> 22:39:00 + suidperl security patch".

It was a bug in one version of perl around five years ago.  Incidentally,
it must have been built under a much older version of Solaris (as I recall
2.6 came out in 1998: certainly we first used it in late 1998), and
we find it is a good idea to rebuild perl at Solaris upgrades, especially
upgrading from 2.5.x.

We don't know (and don't have the resources to check) if the changed
version works on all more recent perl versions in use by R installers.

I do believe the solution is well-known: use perl 5.005, 5.6.0 or
(preferably) 5.6.1.  Perhaps we should test for perl >= 5.005?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep 15 18:21:10 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 15 Sep 2001 19:21:10 +0200
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun
 Solaris (PR#1093)
In-Reply-To: <Pine.GSO.4.31.0109151445290.3896-100000@toucan.stats>
References: <200109151223.OAA19865@pubhealth.ku.dk>
 <Pine.GSO.4.31.0109151445290.3896-100000@toucan.stats>
Message-ID: <15267.36358.740330.761626@mithrandir.hornik.net>

>>>>> Prof Brian Ripley writes:

> On Sat, 15 Sep 2001 hb@maths.lth.se wrote:
>> Full_Name: Henrik Bengtsson
>> Version: 1.3.1
>> OS: Sun Solaris 8
>> Submission from: (NULL) (130.235.3.49)
>> 
>> 
>> I have been trying to install [R] v1.3.1 locally on a Sun Solaris 8 machine and
>> I ran into the (already known) perl problems that express theselves as:

> [...]

>> My suggestion is to add this to Rdconv.pm at the 5 lines above. This would make
>> the building of [R] a little bit easier.
>> 
>> 
>> Perl version used:
>> 
>> "This is perl, version 5.003 with EMBED built under solaris at Sep 14 1996
>                                                                         ^^^^
>> 22:39:00 + suidperl security patch".

> It was a bug in one version of perl around five years ago.  Incidentally,
> it must have been built under a much older version of Solaris (as I recall
> 2.6 came out in 1998: certainly we first used it in late 1998), and
> we find it is a good idea to rebuild perl at Solaris upgrades, especially
> upgrading from 2.5.x.

> We don't know (and don't have the resources to check) if the changed
> version works on all more recent perl versions in use by R installers.

> I do believe the solution is well-known: use perl 5.005, 5.6.0 or
> (preferably) 5.6.1.  Perhaps we should test for perl >= 5.005?

Not sure, from a theoretical point of view: we really only require Perl
version 5.  But if we think that anything less than 5.005 is too buggy
then let's go for the change.  (Something like

	${PERL} -e 'require 5.005 or exit 1'

in PERL5_CHECK() of m4/R.m4?)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sun Sep 16 00:32:36 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Sun, 16 Sep 2001 01:32:36 +0200 (CEST)
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun
 Solaris (PR#1093)
In-Reply-To: <15267.36358.740330.761626@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0109160130030.383-100000@kleigh.nl>

Kurt Hornik scribeva...

> Not sure, from a theoretical point of view: we really only require Perl
> version 5.  But if we think that anything less than 5.005 is too buggy
> then let's go for the change.  (Something like
>
> 	${PERL} -e 'require 5.005 or exit 1'
>
> in PERL5_CHECK() of m4/R.m4?)

I'm still using Perl 5.004, and R installs without problems.
Wouldn't like to update Perl just to install a new version of R.
Perhaps a warning message would be more appropriate than an
error.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Sun Sep 16 02:53:36 2001
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 15 Sep 2001 20:53:36 -0500
Subject: [Rd] Using closures in libraries
Message-ID: <qxpzo7vj3z3.fsf@verdi.stat.wisc.edu>

I was trying to use closures within a library as follows -

foo <- local({
    # some code creating local variables
    function() {
        # uses the local variables created above
    })

It did not work because call to do_libfixup in library replaces all
the closure environments by the global environment. One way around
this would be to do the replacement only for closures that have the
same environment as the package environment. Basically change the
relevant lines in envir.c (do_libfixup) with -

	while (p != R_NilValue) {
	    if (TYPEOF(CAR(p)) == CLOSXP && CLOENV(CAR(p)) != lib)
		SET_CLOENV(CAR(p), env);
	    p = CDR(p);
	}

In case any one wonders, I know I could wrap the function in a list
and call the function with foo[[1]]() - but it really does not look
very natural. Closures are often so useful that it is desirable that
they can be used from libraries.

Can someone comment whether this change can be made and whether this
would cause any problems?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Sun Sep 16 03:21:25 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Sat, 15 Sep 2001 21:21:25 -0500
Subject: [Rd] Using closures in libraries
In-Reply-To: <qxpzo7vj3z3.fsf@verdi.stat.wisc.edu>; from saikat@stat.wisc.edu on Sat, Sep 15, 2001 at 08:53:36PM -0500
References: <qxpzo7vj3z3.fsf@verdi.stat.wisc.edu>
Message-ID: <20010915212125.B2176@nokomis.stat.umn.edu>

On Sat, Sep 15, 2001 at 08:53:36PM -0500, Saikat DebRoy wrote:
> I was trying to use closures within a library as follows -
> 
> foo <- local({
>     # some code creating local variables
>     function() {
>         # uses the local variables created above
>     })
> 
> It did not work because call to do_libfixup in library replaces all
> the closure environments by the global environment. One way around
> this would be to do the replacement only for closures that have the
> same environment as the package environment. Basically change the
> relevant lines in envir.c (do_libfixup) with -
> 
> 	while (p != R_NilValue) {
> 	    if (TYPEOF(CAR(p)) == CLOSXP && CLOENV(CAR(p)) != lib)
> 		SET_CLOENV(CAR(p), env);
> 	    p = CDR(p);
> 	}
> 
> In case any one wonders, I know I could wrap the function in a list
> and call the function with foo[[1]]() - but it really does not look
> very natural. Closures are often so useful that it is desirable that
> they can be used from libraries.
> 
> Can someone comment whether this change can be made and whether this
> would cause any problems?

Unfortunately it would cause problems.  What is currently done is a
fairly gross hack that is intended to get .Global env into the picture
and to avoid a situation where saving one function from the library in
a workspace drags in the whole library.  It accomplishes that but
throws out the baby with the bath water.  The fix you suggest would
cause these problems to reappear (though in a reduced form).  We need
to redesign the whole mechanism, and I'm mildly optimistic that will
happen before 1.4 is released.

There is an easy workaround though: install the package with --save.
That preserves environments in a sensible way (and is basically what
we need to emulate for the standard case).

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Sep 16 07:32:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 16 Sep 2001 07:32:27 +0100 (BST)
Subject: [Rd] Solution to (well known) problem with Rdconv.pm on Sun
 Solaris (PR#1093)
In-Reply-To: <Pine.LNX.4.33.0109160130030.383-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.31.0109160722540.7821-100000@auk.stats>

On Sun, 16 Sep 2001, Peter Kleiweg wrote:

> Kurt Hornik scribeva...
>
> > Not sure, from a theoretical point of view: we really only require Perl
> > version 5.  But if we think that anything less than 5.005 is too buggy

which I guess means we want an implementation of the Camel book 2nd edition
(`Programming Perl'), as Perl 5 is not a standard.  And my understanding is
that our code is legal by the Camel book, but 5.003 mis-parses it.

> > then let's go for the change.  (Something like
> >
> > 	${PERL} -e 'require 5.005 or exit 1'
> >
> > in PERL5_CHECK() of m4/R.m4?)
>
> I'm still using Perl 5.004, and R installs without problems.

Thanks for the confirmation.

> Wouldn't like to update Perl just to install a new version of R.
> Perhaps a warning message would be more appropriate than an
> error.

Would people notice a warning in all the output from configure?  This has
come up twice in the last year and a few more times before (with RedHat 5.2
as I recall).  We know that 5.003 is the one that caused the last two, so I
do think

${PERL} -e 'require 5.004 or exit 1'

would be a good idea.

B

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Sep 16 12:11:39 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 16 Sep 2001 13:11:39 +0200 (MET DST)
Subject: [Rd] rowsum dimnames (PR#1092)
Message-ID: <200109161111.NAA22091@pubhealth.ku.dk>

On Fri, 14 Sep 2001 brahm@alum.mit.edu wrote:

> The result of rowsum() in R doesn't have the dimnames I'd expect, e.g.:
>
> > rowsum(matrix(1:12, 3,4), c("Y","X","Y"))
>     [,1] [,2] [,3] [,4]
>   1    2    5    8   11
>   2    4   10   16   22
>
> whereas S-Plus gives the more useful result:
>     [,1] [,2] [,3] [,4]
>   X    2    5    8   11
>   Y    4   10   16   22
>
> This is because R's rowsum() code gives the first dimnames as "ugroup", which
> is a factor, rather than "as.character(ugroup)".  Similarly for the assignment
> of names(x) in the case where x is a vector.
>
> I'm using R 1.3.0 on Solaris 2.6.  Help says rowsum's author is Terry Therneau.
> Thanks!
> 			-- David Brahm (a215020@agate.fmr.com)

Change a couple of lines to

	dimnames(new.x) <- list(as.character(ugroup), colnames(x))
	names(new.x) <- as.character(ugroup)

(as you seem to be aware).

Done in the sources for 1.4.0.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From puetsch@bigfoot.de  Mon Sep 17 11:53:27 2001
From: puetsch@bigfoot.de (puetsch@bigfoot.de)
Date: Mon, 17 Sep 2001 12:53:27 +0200 (MET DST)
Subject: [Rd] lab does not work (PR#1094)
Message-ID: <200109171053.MAA28976@pubhealth.ku.dk>

Full_Name: Felix Puetsch
Version: 1.3.0
OS: Win ME
Submission from: (NULL) (139.6.20.11)


It seems that the "lab" paramter of plot does not work as desired.

plot(sin)
plot(sin,lab=c(5,5,5))
plot(sin,lab=c(10,10,5))

all give the same plot.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep 17 12:42:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Sep 2001 13:42:53 +0200
Subject: [Rd] lab does not work (PR#1094)
In-Reply-To: <200109171053.MAA28976@pubhealth.ku.dk>
References: <200109171053.MAA28976@pubhealth.ku.dk>
Message-ID: <x23d5mjb5u.fsf@blueberry.kubism.ku.dk>

puetsch@bigfoot.de writes:

> It seems that the "lab" paramter of plot does not work as desired.
> 
> plot(sin)
> plot(sin,lab=c(5,5,5))
> plot(sin,lab=c(10,10,5))
> 
> all give the same plot.

Not a bug. lab is not among the parameters that you can set in a
high-level plot (see the help page for par()). What you can do
is set it with a par() call before calling plot, i.e.

par(lab=c(10,10,5)) ; plot(sin)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep 17 18:10:29 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 17 Sep 2001 19:10:29 +0200
Subject: [Rd] Re: AIC & logLik for glm
In-Reply-To: <Pine.LNX.4.31.0109111241300.10651-100000@gannet.stats>
References: <3B9DED01.6B673D9E@ceam.es>
 <Pine.LNX.4.31.0109111241300.10651-100000@gannet.stats>
Message-ID: <15270.11909.306595.466358@gargle.gargle.HOWL>

[diverted to R-devel;  I'm really discussing future development]

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 11 Sep 2001, juli g. pausas wrote:
    >> Dear R collegues,
    >> I'm trying to understand what's AIC in R (ver. 1.3.1), and I'm getting a
    >> different answer if I look at the AIC(of the fitted model) or the aic in
    >> the summary( of the fitted model). Is this correct? Can somebody explain
    >> me the difference between the two values? or Is the AIC criterion not
    >> appropiated for Poisson models?

    BDR> It's the AIC _function_ that is inappropriate for glm models.
    BDR> There is no glm method, so the lm method is used.

actually, the AIC.lm() is just from the nlme package and it is very
much appropriate insofar as it entirely builds on logLik() {itself a generic}.
I've found recently, that I'd like to *rename* the current AIC.lm to
AIC.default since it is really correct whenever logLik() is correct.
For a private package, I recently found that I just could do
     AIC.myclass <- AIC.lm (and define a correct  logLik.myclass !!)
where the definition of AIC.myclass would have been unnecessary, had
AIC.lm been called AIC.default.  AIC() would then barf whenever there's no
logLik() method for the given model class which I'd think to be fine (no?)

    BDR> Martin: I think you moved AIC and logLik into base R: this needs
    BDR> sorting out.

yes.  However, I haven't changed the AIC.lm and logLik.lm methods, and the
currrent behavior is just what *was* the former behavior after
library(nlme) had been called, then.

What really needs a fix is logLik.lm(), probably by providing a
logLik.glm() method which seems almost trivial, given the way our glm
families are implemented, the internal aic() function is really -2*logLik(.).
For the quasi "family", the result would be NA, rightly.

BTW, I'm more and more wondering if we shouldn't commit these as patches to
1.3.x rather than only for 1.4..

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Sep 19 14:48:47 2001
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Wed, 19 Sep 2001 15:48:47 +0200 (MET DST)
Subject: [Rd] Bizarre clipping with abline and points (PR#1095)
Message-ID: <200109191348.PAA27712@pubhealth.ku.dk>

I want to put some points along the horizontal axis.

> plot(1:10, 1:10)
> points(4, par("usr")[3], xpd=TRUE)
> abline(v=5)

works fine for me.  But if I try

> plot(1:10, 1:10)
> abline(v=5)
> points(4, par("usr")[3], xpd=TRUE)

then the points are clipped.  The call to abline seems to be
enforcing xpd=FALSE for later calls to the plot.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Sep 19 15:08:56 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Sep 2001 16:08:56 +0200
Subject: [Rd] Bizarre clipping with abline and points (PR#1095)
In-Reply-To: <200109191348.PAA27712@pubhealth.ku.dk>
References: <200109191348.PAA27712@pubhealth.ku.dk>
Message-ID: <x2elp39ssn.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I want to put some points along the horizontal axis.
> 
> > plot(1:10, 1:10)
> > points(4, par("usr")[3], xpd=TRUE)
> > abline(v=5)
> 
> works fine for me.  But if I try
> 
> > plot(1:10, 1:10)
> > abline(v=5)
> > points(4, par("usr")[3], xpd=TRUE)
> 
> then the points are clipped.  The call to abline seems to be
> enforcing xpd=FALSE for later calls to the plot.

Confirmed, same effect with 

plot(1:10, 1:10)
points(4, par("usr")[3], xpd=FALSE)
points(4, par("usr")[3], xpd=TRUE)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hosking@watson.ibm.com  Wed Sep 19 15:38:54 2001
From: hosking@watson.ibm.com (hosking@watson.ibm.com)
Date: Wed, 19 Sep 2001 16:38:54 +0200 (MET DST)
Subject: [Rd] missing() (PR#1096)
Message-ID: <200109191438.QAA28403@pubhealth.ku.dk>

Full_Name: J. R. M. Hosking
Version: 1.3.0
OS: Windows 2000
Submission from: (NULL) (198.81.209.16)


R documentation suggests that if a function argument x is omitted,
missing(x) should return TRUE even if x is subsequently assigned a value.
This happens in S-plus.  But in R:

> test
function(x){
print(missing(x))
if(missing(x)) x<-0
print(missing(x))
invisible()
}
> test()
[1] TRUE
[1] FALSE
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Sep 19 15:47:40 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 19 Sep 2001 16:47:40 +0200 (MET DST)
Subject: [Rd] missing() (PR#1096)
Message-ID: <200109191447.QAA28531@pubhealth.ku.dk>

>From the FAQ:

   * In S, `missing(ARG)' remains `TRUE' if ARG is subsequently modified;
     in R it doesn't.


>From ?missing in 1.3.1:

Details:

     `missing(x)' is only reliable if `x' has not been altered since
     entering the function: in particular it will always be true after
     `x <- match.arg(x)'.

My guess is that whatever you were looking at has been changed in the
current version.


On Wed, 19 Sep 2001 hosking@watson.ibm.com wrote:

> Full_Name: J. R. M. Hosking
> Version: 1.3.0
> OS: Windows 2000
> Submission from: (NULL) (198.81.209.16)
>
>
> R documentation suggests that if a function argument x is omitted,
> missing(x) should return TRUE even if x is subsequently assigned a value.
> This happens in S-plus.  But in R:
>
> > test
> function(x){
> print(missing(x))
> if(missing(x)) x<-0
> print(missing(x))
> invisible()
> }
> > test()
> [1] TRUE
> [1] FALSE
> >
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Sep 20 21:33:18 2001
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 20 Sep 2001 16:33:18 -0400 (EDT)
Subject: [Rd] file permissions check
Message-ID: <Pine.LNX.4.30.0109201625230.29516-100000@bolker.zoo.ufl.edu>


  Why does R CMD check require write permission on all files in the
package directory?
  I'm trying to maintain some of my packages using RCS, which means that
depending on the current state of the system there may be a bunch of
read-only files lying around.  However, unless I'm missing something I
don't see why that ought to be a problem that R detects and stops on.  For
the time being I'm just going to hack around it, but what is the rationale
here?

  Ben Bolker

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Sep 21 05:54:39 2001
From: edd@debian.org (edd@debian.org)
Date: Fri, 21 Sep 2001 06:54:39 +0200 (MET DST)
Subject: [Rd] R 1.3.1 fails 'make check' on arm in the Bessel example (PR#1097)
Message-ID: <200109210454.GAA13172@pubhealth.ku.dk>


Debian tries to build its packages on a variety of platforms.  The arm
platform compiled 0.90.1 (the last Debian release before the Debian package
required an Atlas library, something we no longer require) failed in 'make
check'. The log snippet follows; I traced this to the example(Bessel) code.
 
> matplot(nu, t(outer(xx,nu, besselI)), type = 'l', ylim = c(-50,200),
+         main = expression(paste("Bessel ",I[nu](x)," for fixed ", x,
+                                 ",  as ",f(nu))),
+         xlab = expression(nu))
Error in title(main = main, sub = sub, xlab = xlab, ylab = ylab, ...) :
        Metric information not yet available for this device
        In addition: Warning messages:
        1: Nonfinite axis limits [GScale(nan,nan,1, .); log=0]
        2: relative range of values = 9.0072e+15 * EPS, is small (axis 1).
        3: Nonfinite axis limits [GScale(-inf,inf,2, .); log=0]
        4: relative range of values = 9.0072e+15 * EPS, is small (axis 2).
        Execution halted

Casual inspection suggests that GScale(nan,nan,1, .) is probably
incorrect. Now, src/nmath/bessel* provide the Bessel functions but does this
reflect a potential libc bug in IEEE handling?

I have also asked on the debian-arm mailing list, but no result so far. I
have some access to an arm box and could compile small test cases if that
helped. 

Dirk 
 
--please do not edit the information below--
 
Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status =
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R
 
Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-- 
Better to have an approximate answer to the right question 
than a precise answer to the wrong question. -- John Tukey

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Fri Sep 21 06:15:03 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Fri, 21 Sep 2001 07:15:03 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200109210515.f8L5F3N10020@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400
* PR# 1081 *
Subject: problems installing R on Solaris 2.8 machine
From: Paivio Pollari <pollari@sun3.oulu.fi>
Date: Fri, 31 Aug 2001 08:54:23 +0300 (EET DST)
* PR# 1093 *
Subject: Solution to (well known) problem with Rdconv.pm on Sun Solaris
From: hb@maths.lth.se
Date: Sat, 15 Sep 2001 14:23:02 +0200 (MET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1052 *
Subject:  Inconsistent behaviour of is.vector? 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 14 Aug 2001 09:04:57 +0100
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068

Directory:  Macintosh

none

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
* PR# 1057 *
Subject: crt1.o skipped at configure time ?
From: laurent@cbs.dtu.dk
Date: Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
* PR# 1062 *
Subject: system.file("",package)
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Sun, 19 Aug 2001 16:01:57 -0700 (PDT)
* PR# 1084 *
Subject: Install problems R 1.3.1 on HP-UX
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Sun, 2 Sep 2001 15:07:41 +0200 (CEST)
* PR# 1089 *
Subject: Debian Woody r-base depends on blas2
From: michael_odonnell@acm.org
Date: Sat, 8 Sep 2001 20:25:32 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1094 *
Subject: lab does not work
From: puetsch@bigfoot.de
Date: Mon, 17 Sep 2001 12:53:25 +0200 (MET DST)
* PR# 1095 *
Subject:  Bizarre clipping with abline and points 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 19 Sep 2001 14:45:52 +0100
* PR# 1096 *
Subject: missing()
From: hosking@watson.ibm.com
Date: Wed, 19 Sep 2001 16:38:52 +0200 (MET DST)
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Sep 21 15:32:47 2001
From: edd@debian.org (edd@debian.org)
Date: Fri, 21 Sep 2001 16:32:47 +0200 (MET DST)
Subject: [Rd] (PR#1089) Can be closed
Message-ID: <200109211432.QAA21643@pubhealth.ku.dk>


I replied to Michael (on the list) explaining that the Depends: on blas2 was
"virtual", ie can be satisfied by either blas1 or atlas2. The bug report
probably belonged into the Debian bug archive anyway...

This can be closed.

Dirk

-- 
Three out of two people have difficulties with fractions.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Mon Sep 24 09:46:29 2001
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Mon, 24 Sep 2001 10:46:29 +0200 (MET DST)
Subject: [Rd] Trailing "/" makes file.exists() return FALSE (PR#1098)
Message-ID: <200109240846.KAA02333@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.3.1
OS: WinMe
Submission from: (NULL) (130.235.2.229)


I found the following bug on WinMe (I call it a bug, since the behavior is
different on WinMe than for instance Sun Solaris):

When calling file.exists() with an existing directory name ending with a "/"
(slash) [R] on WinMe will return FALSE, but when doing the same without the
ending "/" it will give TRUE.

I made a quick work around, but this should be taken care of in the native
code:

file.exists <- function(...) {
  # Remove trailing "/", but keep "C:/", "D:/"...
  files <- gsub("\:/$", "\://", c(...));
  files <- gsub("/$", "", files);
  .Internal(file.exists(files));
}


platform i386-pc-mingw32
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    3.1
year     2001
month    08
day      31
language R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep 24 11:09:43 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 24 Sep 2001 12:09:43 +0200 (MET DST)
Subject: [Rd] Trailing "/" makes file.exists() return FALSE (PR#1098)
Message-ID: <200109241009.MAA03895@pubhealth.ku.dk>

On Mon, 24 Sep 2001 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.3.1
> OS: WinMe
> Submission from: (NULL) (130.235.2.229)
>
>
> I found the following bug on WinMe (I call it a bug, since the behavior is
> different on WinMe than for instance Sun Solaris):
>
> When calling file.exists() with an existing directory name ending with a "/"
> (slash) [R] on WinMe will return FALSE, but when doing the same without the
> ending "/" it will give TRUE.
>
> I made a quick work around, but this should be taken care of in the native
> code:
>
> file.exists <- function(...) {
>   # Remove trailing "/", but keep "C:/", "D:/"...
>   files <- gsub("\:/$", "\://", c(...));
>   files <- gsub("/$", "", files);
>   .Internal(file.exists(files));
> }


This is not a bug.  A file path ending with "/" is not a file on Windows,
but it is on Solaris.  Next you'll be reporting that file specifications
with drives fail on Solaris: it other words, what is a valid file path is
OS-specific.

You'll find quite a lot of Windows tools reject paths ending in /: for
example the ls in Rtools thinks the directory is non-existent.

Similarly, Solaris accepts // in paths, but Windows does not.

> platform i386-pc-mingw32
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    3.1
> year     2001
> month    08
> day      31
> language R
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Mon Sep 24 12:30:20 2001
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Mon, 24 Sep 2001 13:30:20 +0200 (MET DST)
Subject: [Rd] Trailing "/" makes file.exists() return FALSE (PR#1098)
Message-ID: <200109241130.NAA05354@pubhealth.ku.dk>

I agree to some extend, but I believe a consistent behavior across platforms
is something that should be a goal. Originally I found this problem from a
package (by a group only running WinNT and Solaris) trying to do

   system.file("",package="base")

which should work and give a path according to the help;

Usage:

     system.file(..., package = "base", lib.loc = .lib.loc, pkg, lib)

Arguments:

     ...: character strings, specifying subdirectory and file(s) within
          some package.  The default, none or `""', returns the root of
          the package.  Wildcards are not supported.
...

Doing this on WinMe it gives "". I can't try this on WinNT, but I assume it
works since the group that made the package it using it. I tracked down the
problem to originate in either the .find.package() call or the file.exists()
call done within system.file(). Which one is a matter of taste. Also, I
noticed that system.file(package="base") without the "", gives the wanted
result.

However, I still argue that file.exists() should be robust enough to give
the same answer if the argument is "foo/" or "foo". I don't know about any
filesystem that can have a file and a directory with the same name in the
same directory, so that shouldn't be an issue. Looking at Java, its solution
(java.io) is very robust across platforms. I am always thinking about the
end-user and making their life easier.

Thanks for a great work

Henrik Bengtsson

Dept. of Mathematical Statistics @ Centre for Mathematical Sciences
Lund Institute of Technology/Lund University, Sweden (+2h UTC)
Office: P316, +46 46 222 9611 (phone), +46 46 222 4623 (fax)
hb@maths.lth.se, http://www.maths.lth.se/matstat/staff/hb/


> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: Monday, September 24, 2001 12:10 PM
> To: hb@maths.lth.se
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] Trailing "/" makes file.exists() return FALSE
> (PR#1098)
>
>
> On Mon, 24 Sep 2001 hb@maths.lth.se wrote:
>
> > Full_Name: Henrik Bengtsson
> > Version: 1.3.1
> > OS: WinMe
> > Submission from: (NULL) (130.235.2.229)
> >
> >
> > I found the following bug on WinMe (I call it a bug, since the
> behavior is
> > different on WinMe than for instance Sun Solaris):
> >
> > When calling file.exists() with an existing directory name
> ending with a "/"
> > (slash) [R] on WinMe will return FALSE, but when doing the same
> without the
> > ending "/" it will give TRUE.
> >
> > I made a quick work around, but this should be taken care of in
> the native
> > code:
> >
> > file.exists <- function(...) {
> >   # Remove trailing "/", but keep "C:/", "D:/"...
> >   files <- gsub("\:/$", "\://", c(...));
> >   files <- gsub("/$", "", files);
> >   .Internal(file.exists(files));
> > }
>
>
> This is not a bug.  A file path ending with "/" is not a file on Windows,
> but it is on Solaris.  Next you'll be reporting that file specifications
> with drives fail on Solaris: it other words, what is a valid file path is
> OS-specific.
>
> You'll find quite a lot of Windows tools reject paths ending in /: for
> example the ls in Rtools thinks the directory is non-existent.
>
> Similarly, Solaris accepts // in paths, but Windows does not.
>
> > platform i386-pc-mingw32
> > arch     x86
> > os       Win32
> > system   x86, Win32
> > status
> > major    1
> > minor    3.1
> > year     2001
> > month    08
> > day      31
> > language R
> >
> >
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-
> > r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
>

--
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep 24 12:50:32 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 24 Sep 2001 13:50:32 +0200 (MET DST)
Subject: [Rd] Trailing "/" makes file.exists() return FALSE (PR#1098)
Message-ID: <200109241150.NAA06388@pubhealth.ku.dk>

On Mon, 24 Sep 2001, Henrik Bengtsson wrote:

> I agree to some extend, but I believe a consistent behavior across platforms
> is something that should be a goal. Originally I found this problem from a

But the underlying OSes are not consistent, and the nature of your `bug'
report is that R is being truthful on each.  Which is the sort of
consistency we want.

> package (by a group only running WinNT and Solaris) trying to do
>
>    system.file("",package="base")
>
> which should work and give a path according to the help;
>
> Usage:
>
>      system.file(..., package = "base", lib.loc = .lib.loc, pkg, lib)
>
> Arguments:
>
>      ...: character strings, specifying subdirectory and file(s) within
>           some package.  The default, none or `""', returns the root of
>           the package.  Wildcards are not supported.
> ...

That's not correct, and not in the current R sources.  It is a
documentation bug that has already been fixed: search the bug report
database for system.file (it's not talking to me right now).

> Doing this on WinMe it gives "". I can't try this on WinNT, but I assume it
> works since the group that made the package it using it. I tracked down the
> problem to originate in either the .find.package() call or the file.exists()
> call done within system.file(). Which one is a matter of taste. Also, I
> noticed that system.file(package="base") without the "", gives the wanted
> result.
>
> However, I still argue that file.exists() should be robust enough to give
> the same answer if the argument is "foo/" or "foo". I don't know about any
> filesystem that can have a file and a directory with the same name in the
> same directory, so that shouldn't be an issue. Looking at Java, its solution
> (java.io) is very robust across platforms. I am always thinking about the
> end-user and making their life easier.

In which case think what happens when file.exists() incorrectly reports a
file as existing when it does not, and the user then tries to make use of
the file?  Let me stress (since you do seem to have missed the point) that
"foo/" is not a file on Windows, nor a directory on Windows. It does not
exist.  Whatever would be the point of a test that lied to you?


> Thanks for a great work
>
> Henrik Bengtsson
>
> Dept. of Mathematical Statistics @ Centre for Mathematical Sciences
> Lund Institute of Technology/Lund University, Sweden (+2h UTC)
> Office: P316, +46 46 222 9611 (phone), +46 46 222 4623 (fax)
> hb@maths.lth.se, http://www.maths.lth.se/matstat/staff/hb/
>
>
> > -----Original Message-----
> > From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
> > Sent: Monday, September 24, 2001 12:10 PM
> > To: hb@maths.lth.se
> > Cc: R-bugs@biostat.ku.dk
> > Subject: Re: [Rd] Trailing "/" makes file.exists() return FALSE
> > (PR#1098)
> >
> >
> > On Mon, 24 Sep 2001 hb@maths.lth.se wrote:
> >
> > > Full_Name: Henrik Bengtsson
> > > Version: 1.3.1
> > > OS: WinMe
> > > Submission from: (NULL) (130.235.2.229)
> > >
> > >
> > > I found the following bug on WinMe (I call it a bug, since the
> > behavior is
> > > different on WinMe than for instance Sun Solaris):
> > >
> > > When calling file.exists() with an existing directory name
> > ending with a "/"
> > > (slash) [R] on WinMe will return FALSE, but when doing the same
> > without the
> > > ending "/" it will give TRUE.
> > >
> > > I made a quick work around, but this should be taken care of in
> > the native
> > > code:
> > >
> > > file.exists <- function(...) {
> > >   # Remove trailing "/", but keep "C:/", "D:/"...
> > >   files <- gsub("\:/$", "\://", c(...));
> > >   files <- gsub("/$", "", files);
> > >   .Internal(file.exists(files));
> > > }
> >
> >
> > This is not a bug.  A file path ending with "/" is not a file on Windows,
> > but it is on Solaris.  Next you'll be reporting that file specifications
> > with drives fail on Solaris: it other words, what is a valid file path is
> > OS-specific.
> >
> > You'll find quite a lot of Windows tools reject paths ending in /: for
> > example the ls in Rtools thinks the directory is non-existent.
> >
> > Similarly, Solaris accepts // in paths, but Windows does not.
> >
> > > platform i386-pc-mingw32
> > > arch     x86
> > > os       Win32
> > > system   x86, Win32
> > > status
> > > major    1
> > > minor    3.1
> > > year     2001
> > > month    08
> > > day      31
> > > language R
> > >
> > >
> > >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-
> > > r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> >
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._
> >
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Sep 24 13:00:06 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 24 Sep 2001 14:00:06 +0200 (MET DST)
Subject: [Rd] cor.test(x,x) sometimes produce NaN (PR#1099)
Message-ID: <200109241200.OAA06607@pubhealth.ku.dk>


This *is* kind of a bug, hence diverted to R-bugs

>>>>> "Peter" == Peter Malewski <peter.malewski@gmx.de> writes:

    Peter> In the code

    >> for(i in 1:100){zz <- rnorm(10);print(cor.test(zz,zz))}

    Peter> sometimes a sqrt(0) occures:
    Peter> 24: NaNs produced in: sqrt(1 - r^2)

I found that the reason is that in (at least one of) those cases,
  r == 1+eps
where eps = .Machine$double.eps
which I think is the real bug, here.

Here is a reproducible example:

 > set.seed(125);z0 <- rnorm(40);zz <- round(rnorm(10),5); r <- cor(zz,zz)
 > r-1
 [1] 2.220446e-16



    Peter> in all the other cases a result like
(for me, not in all, but quite a few cases)

    Peter>   t = Inf, df = 8, p-value = < 2.2e-16

which I think is entirely correct.

    Peter> occurs. Does cor.test need some more "inf" - handling?  I found
    Peter> that calculating a cor-matrix with additional p-values.  
  (last sentence is a bit unclear to MM).

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From owner-r-devel-digest@stat.math.ethz.ch  Mon Sep 24 03:01:11 2001
From: owner-r-devel-digest@stat.math.ethz.ch (R-devel Digest)
Date: Mon, 24 Sep 2001 04:01:11 +0200 (MET DST)
Subject: [Rd] R-devel Digest V1 #314
Message-ID: <200109240201.EAA19795@stat.math.ethz.ch>


R-devel Digest       Monday, September 24 2001       Volume 01 : Number 314



In this issue:

  [Rd] R 1.3.1 fails 'make check' on arm in the Bessel example (PR#1097)
  [Rd] Bug list summary (automatic post)
  [Rd] (PR#1089) Can be closed

See the end of the digest for information about r-devel-digest

----------------------------------------------------------------------

Date: Fri, 21 Sep 2001 06:54:39 +0200 (MET DST)
From: edd@debian.org
Subject: [Rd] R 1.3.1 fails 'make check' on arm in the Bessel example (PR#1097)

Debian tries to build its packages on a variety of platforms.  The arm
platform compiled 0.90.1 (the last Debian release before the Debian package
required an Atlas library, something we no longer require) failed in 'make
check'. The log snippet follows; I traced this to the example(Bessel) code.
 
> matplot(nu, t(outer(xx,nu, besselI)), type = 'l', ylim = c(-50,200),
+         main = expression(paste("Bessel ",I[nu](x)," for fixed ", x,
+                                 ",  as ",f(nu))),
+         xlab = expression(nu))
Error in title(main = main, sub = sub, xlab = xlab, ylab = ylab, ...) :
        Metric information not yet available for this device
        In addition: Warning messages:
        1: Nonfinite axis limits [GScale(nan,nan,1, .); log=0]
        2: relative range of values = 9.0072e+15 * EPS, is small (axis 1).
        3: Nonfinite axis limits [GScale(-inf,inf,2, .); log=0]
        4: relative range of values = 9.0072e+15 * EPS, is small (axis 2).
        Execution halted

Casual inspection suggests that GScale(nan,nan,1, .) is probably
incorrect. Now, src/nmath/bessel* provide the Bessel functions but does this
reflect a potential libc bug in IEEE handling?

I have also asked on the debian-arm mailing list, but no result so far. I
have some access to an arm box and could compile small test cases if that
helped. 

Dirk 
 
- --please do not edit the information below--
 
Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status =
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R
 
Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


- -- 
Better to have an approximate answer to the right question 
than a precise answer to the wrong question. -- John Tukey

- -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

------------------------------

Date: Fri, 21 Sep 2001 07:15:03 +0200
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Subject: [Rd] Bug list summary (automatic post)

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
- --The warning is standard S and R behaviour.
- --Probably xyplot needs to avoid it (by unclassing?)
* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
- --confirmed on Windows and Solaris.
- --Seems that file is not in the expected format
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
- --change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
- --The persp algorithm does not apply the occlusion rules to the frame, 
- --which is always plotted first. 
- --A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
- --This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
- --Suggested fix is incorporated in 1.2.2.
- --
- --There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
- --To see the problem try:  par(cex=.5); mtext("hi")
- --Paul thinks the right fix is to change the argument list for mtext so that
- --cex=par(cex) by default rather than cex=NA by default (plus corresponding
- --internal changes to  do_mtext in plot.c).
- --This needs to be done very carefully because (i) the change suggested above 
- --mayhave side-effects in many other pieces of interpreted code 
- --(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
- --and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
- --mtext is unscaled by default.  It is not clear if this should
- --use the par("cex") setting or an inline cex setting such as cex.axis.
- --It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
- --Neither of the proposed changes actually works in sufficient generality.
- --
- --The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
- --the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
- --Still there. Suggested fix included in followups, but we didn't get around to
- --try it in time for 1.2.3.
- --
- --Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
- --xaxp before xlog, and the new value of xaxp may only be valid under the new
- --value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400
* PR# 1081 *
Subject: problems installing R on Solaris 2.8 machine
From: Paivio Pollari <pollari@sun3.oulu.fi>
Date: Fri, 31 Aug 2001 08:54:23 +0300 (EET DST)
* PR# 1093 *
Subject: Solution to (well known) problem with Rdconv.pm on Sun Solaris
From: hb@maths.lth.se
Date: Sat, 15 Sep 2001 14:23:02 +0200 (MET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
- --status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1052 *
Subject:  Inconsistent behaviour of is.vector? 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 14 Aug 2001 09:04:57 +0100
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
- --see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
- --part of PR#1073

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
- --see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
- --part of PR#1068

Directory:  Macintosh

none

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
- --Builder needs to avoid -ldnet in distributed binaries..
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
- --Only reported on SGI, solved by removing optimization.
- --Needs debugging there.
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
- --problem with symbol names only on Mandrake 8.0, not 7.2
- --needs reply to follow-up
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
* PR# 1057 *
Subject: crt1.o skipped at configure time ?
From: laurent@cbs.dtu.dk
Date: Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
* PR# 1062 *
Subject: system.file("",package)
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Sun, 19 Aug 2001 16:01:57 -0700 (PDT)
* PR# 1084 *
Subject: Install problems R 1.3.1 on HP-UX
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Sun, 2 Sep 2001 15:07:41 +0200 (CEST)
* PR# 1089 *
Subject: Debian Woody r-base depends on blas2
From: michael_odonnell@acm.org
Date: Sat, 8 Sep 2001 20:25:32 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1094 *
Subject: lab does not work
From: puetsch@bigfoot.de
Date: Mon, 17 Sep 2001 12:53:25 +0200 (MET DST)
* PR# 1095 *
Subject:  Bizarre clipping with abline and points 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 19 Sep 2001 14:45:52 +0100
* PR# 1096 *
Subject: missing()
From: hosking@watson.ibm.com
Date: Wed, 19 Sep 2001 16:38:52 +0200 (MET DST)
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
- -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

------------------------------

Date: Fri, 21 Sep 2001 16:32:47 +0200 (MET DST)
From: edd@debian.org
Subject: [Rd] (PR#1089) Can be closed

I replied to Michael (on the list) explaining that the Depends: on blas2 was
"virtual", ie can be satisfied by either blas1 or atlas2. The bug report
probably belonged into the Debian bug archive anyway...

This can be closed.

Dirk

- -- 
Three out of two people have difficulties with fractions.

- -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

------------------------------

End of R-devel Digest V1 #314
*****************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
DIGEST of R-devel -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !) To: R-devel-digest-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Sep 25 01:14:26 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 24 Sep 2001 20:14:26 -0400
Subject: [Rd] col=0
Message-ID: <3BAFCC62.697551CA@bank-banque-canada.ca>

In R-devel I am getting an error with col=0 in a call to box, buried
somewhere in some tests. I have not yet explored far enough to know why
col=0 is being set, but I think it has to do with the box outline being
invisible. col=0 does not seem to be allowed in R-devel, whereas the
code works in R-1.3.1.  This may be R-devel pointing out an error in my
code that was not caught by R-1.3.1 or previously, or it may be a
feature change (although I did not see it in the documentation), or it
may be an error in R-devel. If anyone immediately recognizes the
problem/change I would appreciate tips. Otherwise I will check further
when I have a chance.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Sep 25 07:42:20 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 25 Sep 2001 07:42:20 +0100 (BST)
Subject: [Rd] col=0
In-Reply-To: <3BAFCC62.697551CA@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0109250735480.1129-100000@auk.stats>

On Mon, 24 Sep 2001, Paul Gilbert wrote:

> In R-devel I am getting an error with col=0 in a call to box, buried
> somewhere in some tests. I have not yet explored far enough to know why
> col=0 is being set, but I think it has to do with the box outline being
> invisible. col=0 does not seem to be allowed in R-devel, whereas the
> code works in R-1.3.1.  This may be R-devel pointing out an error in my
> code that was not caught by R-1.3.1 or previously, or it may be a
> feature change (although I did not see it in the documentation), or it
> may be an error in R-devel. If anyone immediately recognizes the
> problem/change I would appreciate tips. Otherwise I will check further
> when I have a chance.

col=0 is background AFAIK, and the default for background has been changed
to be "transparent" for most devices.  That *is* in NEWS.

So plotting with col=0 under that default makes no sense, although I
believe it still works.  The example for box does with col=0 ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Sep 25 08:14:14 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 25 Sep 2001 09:14:14 +0200
Subject: [Rd] Accidental digest sent to R-devel
In-Reply-To: <200109240201.EAA19795@stat.math.ethz.ch>
References: <200109240201.EAA19795@stat.math.ethz.ch>
Message-ID: <15280.11974.865884.406576@gargle.gargle.HOWL>

Several R-devel subscribers have alerted me to the problem,
thank you.

  >> R-devel Digest       Monday, September 24 2001       Volume 01 : Number 314

with the 3 messages

 >> [Rd] R 1.3.1 fails 'make check' on arm in the Bessel example (PR#1097)
 >> [Rd] Bug list summary (automatic post)
 >> [Rd] (PR#1089) Can be closed

seemed to have gone to probably all subscribers of r-devel.
What happened was that a broken E-mail engine  @zerowork.co.uk
got the regular digest message and managed to `post it back to R-devel'.
I'm trying a bit harder to have this not happening again in the future.

Your list maintainer

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue Sep 25 14:52:53 2001
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue, 25 Sep 2001 15:52:53 +0200 (MET DST)
Subject: [Rd] Bug in model.matrix.default (was: [R] predict incosistency ?) (PR#1100)
Message-ID: <200109251352.PAA21550@pubhealth.ku.dk>

On Tue, 25 Sep 2001 12:27:27 GMT, Jorge Luis Ojeda Cabrera
<jojeda@posta.unizar.es> wrote in message
<20010925.12272700@macdesp8.unizar.es>:

>When fitting model 'y~1', the 'lm' response is ok, but it is not possible 
>to get predictions using 'predict'. May be this is a bug, at least i 
>think it is somehow
>inconsistent.

It still appears in 1.3.1, I think it's a bug.  It shows up when you
use the newdata parameter to predict.lm; if you just ask for
predictions without specifying the x value things are fine:

> d _ data.frame(x=runif(5),y=runif(5))
> d1.lm _ lm(y ~ 1, data=d)
>   
> #  This one is okay:
>   
> predict(d1.lm)
       1        2        3        4        5 
0.486269 0.486269 0.486269 0.486269 0.486269 
> 
> # This one triggers the bug:
>   
> predict(d1.lm,newdata=data.frame(x=0.5))
Error in model.matrix.default(delete.response(tt), newdata, contrasts
= object$contrasts,  : 
        subscript out of bounds

There are 3 lines in model.matrix.default that assume that there is at
least one predictor in the model:  they index various things by "-1"
to remove it.  I can't follow what's going on there well enough to fix
it.

Duncan Murdoch

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Windows 98 4.10 (build 1998)  

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Sep 25 14:57:11 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 25 Sep 2001 15:57:11 +0200 (MET DST)
Subject: [Rd] Bug in model.matrix.default (PR#1100)
Message-ID: <200109251357.PAA21622@pubhealth.ku.dk>

There's more to it than that (which was already fixed in R-devel).
The internal code expects there to be columns in the model frame.

I have already fixed this in R-devel (by faking an unused column).


On Tue, 25 Sep 2001 murdoch@stats.uwo.ca wrote:

> On Tue, 25 Sep 2001 12:27:27 GMT, Jorge Luis Ojeda Cabrera
> <jojeda@posta.unizar.es> wrote in message
> <20010925.12272700@macdesp8.unizar.es>:
>
> >When fitting model 'y~1', the 'lm' response is ok, but it is not possible
> >to get predictions using 'predict'. May be this is a bug, at least i
> >think it is somehow
> >inconsistent.
>
> It still appears in 1.3.1, I think it's a bug.  It shows up when you
> use the newdata parameter to predict.lm; if you just ask for
> predictions without specifying the x value things are fine:
>
> > d _ data.frame(x=runif(5),y=runif(5))
> > d1.lm _ lm(y ~ 1, data=d)
> >
> > #  This one is okay:
> >
> > predict(d1.lm)
>        1        2        3        4        5
> 0.486269 0.486269 0.486269 0.486269 0.486269
> >
> > # This one triggers the bug:
> >
> > predict(d1.lm,newdata=data.frame(x=0.5))
> Error in model.matrix.default(delete.response(tt), newdata, contrasts
> = object$contrasts,  :
>         subscript out of bounds
>
> There are 3 lines in model.matrix.default that assume that there is at
> least one predictor in the model:  they index various things by "-1"
> to remove it.  I can't follow what's going on there well enough to fix
> it.
>
> Duncan Murdoch
>
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status =
>  major = 1
>  minor = 3.1
>  year = 2001
>  month = 08
>  day = 31
>  language = R
>
> Windows 98 4.10 (build 1998)
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Sep 27 09:36:50 2001
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 27 Sep 2001 10:36:50 +0200 (MET DST)
Subject: [Rd] ugly in plotmath: frac(1, sqrt(...)) (PR#1101)
Message-ID: <200109270836.KAA10724@pubhealth.ku.dk>


Sometimes (dependent on device and settings of 'cex' and 'lwd') the line
of a square root symbol plottet in the denominator of a fraction appears
to be in or above the line of the fraction.

Examples:


### Choose one of these:
# pdf("test.pdf", height=6, width=8)
# bmp("test.bmp", width=1100, height=800, pointsize=12)
# bitmap("test.tif", type="tiff24nc", width=12, height=9, res=300,
pointsize=12)
# png("test.png", width=1100, height=800, pointsize=12)
# postscript("test.eps", height=6, width=8, horizontal=FALSE)

 par(cex=2, lwd=2)
 plot(1:10)
 text(2, 8, expression(frac(1, sigma[i]*sqrt(2*pi))))
dev.off()


Uwe Ligges


[Happens also on Linux, ...]

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From macq@llnl.gov  Thu Sep 27 17:21:35 2001
From: macq@llnl.gov (macq@llnl.gov)
Date: Thu, 27 Sep 2001 18:21:35 +0200 (MET DST)
Subject: [Rd] Problem with merge() (PR#1102)
Message-ID: <200109271621.SAA18562@pubhealth.ku.dk>

I have encountered a problem with merge() that appears to be a bug.
Here's an example to illustrate it.

>  tmp1 <- data.frame(a=letters[1:3],b=LETTERS[2:4],x=1:3)
>  tmpa <- expand.grid(a=letters[1:4],b=LETTERS[1:4])
>  tmpm.1 <- merge(tmpa,tmp1)
>  tmpm.2 <- merge(tmp1,tmpa)
Error in "names<-.default"(*tmp*, value = vnames) :
         names attribute must be the same length as the vector


I'm using R 1.3.0, and it occurs on both the Macintosh and Solaris versions.
>  version
          _
platform powerpc-apple-darwin1.3.7
arch     powerpc
os       darwin1.3.7
system   powerpc, darwin1.3.7
status
major    1
minor    3.0
year     2001
month    06
day      22
language R
>

>  version
          _
platform sparc-sun-solaris2.7
arch     sparc
os       solaris2.7
system   sparc, solaris2.7
status
major    1
minor    3.0
year     2001
month    06
day      22
language R
>

(I've searched various places, including a list of fixes for v1.3.1, 
the faq, 2001 r-help archives, and haven't found anything about it)

Thanks
-Don
-- 
--------------------------------------
Don MacQueen
Environmental Protection Department
Lawrence Livermore National Laboratory
Livermore, CA, USA
--------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep 27 17:43:58 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 27 Sep 2001 18:43:58 +0200
Subject: [Rd] Problem with merge() (PR#1102)
In-Reply-To: <200109271621.SAA18562@pubhealth.ku.dk>
References: <200109271621.SAA18562@pubhealth.ku.dk>
Message-ID: <15283.22350.315590.177836@gargle.gargle.HOWL>

>>>>> "Don" == Don MacQueen <macq@llnl.gov> writes:

    Don> I have encountered a problem with merge() that appears to be a bug.
    Don> Here's an example to illustrate it.

    >> tmp1 <- data.frame(a=letters[1:3],b=LETTERS[2:4],x=1:3)
    >> tmpa <- expand.grid(a=letters[1:4],b=LETTERS[1:4])
    >> tmpm.1 <- merge(tmpa,tmp1)
    >> tmpm.2 <- merge(tmp1,tmpa)
    Don> Error in "names<-.default"(*tmp*, value = vnames) :
    Don> names attribute must be the same length as the vector


    Don> I'm using R 1.3.0, and it occurs on both the Macintosh and Solaris versions.
    >> version

Bug confirmed, also for the current version of R (1.3.1) and the 
development one.

I'll have a look.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From richmond@saintmarys.edu  Fri Sep 28 02:24:09 2001
From: richmond@saintmarys.edu (richmond@saintmarys.edu)
Date: Fri, 28 Sep 2001 03:24:09 +0200 (MET DST)
Subject: [Rd] Slow output/no break key (PR#1103)
Message-ID: <200109280124.DAA20678@pubhealth.ku.dk>

Full_Name: David Richmond
Version: 1.3.0
OS: MacOS 8.6
Submission from: (NULL) (147.53.3.18)


Forgive me if this isn't the correct forum for these comments but:
text output on the mac is abysmally slow. If I inadvertently ask R to echo a
100x100 matrix, it takes so long to display that I generally have to leave the
room and go do something else for awhile. I've tried to break it, (ctrl-c,
cmd-.) but there doesn't seem to be an implemented break sequence (I noticed
that everything else stops too, my mp3 player stops playing music, etc). I also
notice that the longer the output gets, the slower it goes. 
	

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 28 19:34:54 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 28 Sep 2001 14:34:54 -0400
Subject: [Rd] problems with new checks in R-devel
Message-ID: <3BB4C2CE.66325EAB@bank-banque-canada.ca>

Below are a few problems I have encountered with the new checks
being done in R-devel.

1/ I have two generics, test.equal and test.equal.tframe. The
first checks that two objects are equal while the second checks
if two objects have equal tframes (time frames).  There is no
reason these should have similar arguments but the check seems to
think that test.equal.tframe is a method for test.equal so I get:

* checking generic/method consistency ... WARNING
test.equal:
  function(obj1, obj2, ...)
test.equal.tframe:
  function(tf1, tf2)

2/ I have some generics which may or may not already be defined
(e.g. lag would be defined if library ts is attached) so in my R
code I use

if (!exists("lag")) lag <- function(x, ...) { UseMethod("lag") }

but this results in

Objects with usage in file `.../tframe/man/lag.tframe.Rd' but
missing from code:
[1] "lag"

Is there a better way to approach this in my R code so I don't
get these warnings?

3/  I have a few general introduction  .Rd files which do not
have a usage line and they produce

* checking for undocumented arguments in \usage ... WARNING
Error in parse(file, n, text, prompt) : parse error
Error in checkDocArgs(dir = ".../syskern") :
        cannot source usages in file
.../syskern/man/00Intro.syskern.Rd
Execution halted

Should that be expected or is it a bug?

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep 28 19:44:50 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 28 Sep 2001 19:44:50 +0100 (BST)
Subject: [Rd] problems with new checks in R-devel
In-Reply-To: <3BB4C2CE.66325EAB@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0109281941260.6685-100000@gannet.stats>

On Fri, 28 Sep 2001, Paul Gilbert wrote:

> Below are a few problems I have encountered with the new checks
> being done in R-devel.
>
> 1/ I have two generics, test.equal and test.equal.tframe. The
> first checks that two objects are equal while the second checks
> if two objects have equal tframes (time frames).  There is no
> reason these should have similar arguments but the check seems to
> think that test.equal.tframe is a method for test.equal so I get:
>
> * checking generic/method consistency ... WARNING
> test.equal:
>   function(obj1, obj2, ...)
> test.equal.tframe:
>   function(tf1, tf2)

There is a stop list in checkMethods, but naming one generic to look like
a method of another is surely peverse.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Fri Sep 28 21:17:31 2001
From: andy_liaw@merck.com (Liaw, Andy)
Date: Fri, 28 Sep 2001 16:17:31 -0400
Subject: [Rd] tiny typo in help page for connection
Message-ID: <51F9C42DA15CD311BD220008C707D81903DC82A6@usrymx10.merck.com>

Hi all,

In the help page for connections, shouldn't the line

	"r" or "wt"

really be

	"r" or "rt"

?

Andy

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep 28 21:25:18 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Sep 2001 22:25:18 +0200
Subject: [Rd] tiny typo in help page for connection
In-Reply-To: <51F9C42DA15CD311BD220008C707D81903DC82A6@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81903DC82A6@usrymx10.merck.com>
Message-ID: <x2elorhxld.fsf@blueberry.kubism.ku.dk>

"Liaw, Andy" <andy_liaw@merck.com> writes:

> Hi all,
> 
> In the help page for connections, shouldn't the line
> 
> 	"r" or "wt"
> 
> really be
> 
> 	"r" or "rt"
> 
> ?

Indeed. While we're at it, isn't the convention that "umbrella-topics"
are capitalized? Should the page not be called Connections?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Fri Sep 28 22:34:18 2001
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Fri, 28 Sep 2001 23:34:18 +0200 (MET DST)
Subject: [Rd] savehistory: Suggestions to a \seealso{} (PR#1104)
Message-ID: <200109282134.XAA01930@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.3.1
OS: WinMe
Submission from: (NULL) (130.235.2.229)


I suggest the following \seealso to be added for savehistory:

\seealso{
  To execute \code{savehistory} automatically when \R quits see \link{.Last} and
\link{.Rprofile}.
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep 29 08:02:18 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 29 Sep 2001 09:02:18 +0200 (MET DST)
Subject: [Rd] savehistory: Suggestions to a \seealso{} (PR#1104)
Message-ID: <200109290702.JAA02974@pubhealth.ku.dk>

On Fri, 28 Sep 2001 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.3.1
> OS: WinMe
> Submission from: (NULL) (130.235.2.229)
>
>
> I suggest the following \seealso to be added for savehistory:
>
> \seealso{
>   To execute \code{savehistory} automatically when \R quits see \link{.Last} and
> \link{.Rprofile}.
> }

I don't see anything relevant on those pages: in particular no details of
using savehistory as your wording suggests.  Given that savehistory is not
available everywhere, it would not be a suitable example for .Last.  I
don't see the point of a link to .Rprofile.

Note that .Last is not necessarily run when R quits, so the method I think
you are advocating is not actually automatic.

Can you explain your suggestion?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Sep 29 08:56:34 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 29 Sep 2001 09:56:34 +0200
Subject: [Rd] problems with new checks in R-devel
In-Reply-To: <3BB4C2CE.66325EAB@bank-banque-canada.ca>
References: <3BB4C2CE.66325EAB@bank-banque-canada.ca>
Message-ID: <15285.32434.701695.262813@mithrandir.hornik.net>

>>>>> Paul Gilbert writes:

> Below are a few problems I have encountered with the new checks
> being done in R-devel.

> 2/ I have some generics which may or may not already be defined
> (e.g. lag would be defined if library ts is attached) so in my R
> code I use

> if (!exists("lag")) lag <- function(x, ...) { UseMethod("lag") }

> but this results in

> Objects with usage in file `.../tframe/man/lag.tframe.Rd' but
> missing from code:
> [1] "lag"

> Is there a better way to approach this in my R code so I don't
> get these warnings?

Use library(ts) in the package's .First.lib instead.

Or help improving the logic in checkMethods(): currently we only eval
top-level *assignments* in the R code.  Otherwise, we have problems with
code used for creating save images calling e.g. dyn.load.

> 3/  I have a few general introduction  .Rd files which do not
> have a usage line and they produce

> * checking for undocumented arguments in \usage ... WARNING
> Error in parse(file, n, text, prompt) : parse error
> Error in checkDocArgs(dir = ".../syskern") :
>         cannot source usages in file
> .../syskern/man/00Intro.syskern.Rd
> Execution halted

> Should that be expected or is it a bug?

The version of dse I have access to in fact has

  \usage{library("syskern")}

Using the current logic, extract-usage thinks this documents the usage
of function library(), and hence translates to

  library <- function("syskern")

which gives the syntax error.  Using library(syskern) will work but give
a warning about the undocumented argument `syskern'.

In an ideal world we would not have to rely on heuristics but have

  <usage> <s-code>...</s-code> </usage>

alas we do not have that yet.  [More precisely: we would also know what
kind of topic was documented, and exclude documentation for packages
from the function checking.]

With the advent of the new documentation engine nowhere in sight, maybe
we should have a markup like

  \IAmNotSCode{...}

for taking care of the above.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

