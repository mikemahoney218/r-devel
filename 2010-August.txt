From lgautier at gmail.com  Sun Aug  1 11:07:27 2010
From: lgautier at gmail.com (Laurent)
Date: Sun, 01 Aug 2010 11:07:27 +0200
Subject: [Rd] Disappearance of the file "NEWS"
Message-ID: <4C55394F.40902@gmail.com>

Dear R-developpers,

The file NEWS disappeared in r5243, and the authoritative source of 
information for what has changed in R is in ./doc/NEWS.Rd.

A quick glance at NEWS was extremely helpful for knowing what has 
changed, and whether building a (more) recent development version was 
needed to test changes, or verify that they would not break existing code.

The change is documented, but unfortunately the file that documented the 
changes has itself disappeared.

May be bringing back a dummy NEWS file that tells a bit about the 
situation would save time to some users. May be it could contain
something like:

# The NEWS file is now generated from other files
# To build it, do:
cd doc
make ../NEWS
cd ..

(or have a new target "NEWS" in the root Makefile ?)


L.


From bbolker at gmail.com  Sun Aug  1 20:02:02 2010
From: bbolker at gmail.com (Ben Bolker)
Date: Sun, 1 Aug 2010 18:02:02 +0000 (UTC)
Subject: [Rd] Disappearance of the file &quot;NEWS&quot;
References: <4C55394F.40902@gmail.com>
Message-ID: <loom.20100801T200003-228@post.gmane.org>

Laurent <lgautier <at> gmail.com> writes:

> 
> Dear R-developpers,
> 
> The file NEWS disappeared in r5243, and the authoritative source of 
> information for what has changed in R is in ./doc/NEWS.Rd.
> 
> A quick glance at NEWS was extremely helpful for knowing what has 
> changed, and whether building a (more) recent development version was 
> needed to test changes, or verify that they would not break existing code.

 [snip to make Gmane happy]

  Agreed.  This change also breaks the link on the R developers
page:

https://svn.r-project.org/R/trunk/NEWS

although one can still, sort of, get to the information via

http://developer.r-project.org/RSSfeeds.html


From pdalgd at gmail.com  Sun Aug  1 23:49:40 2010
From: pdalgd at gmail.com (Peter Dalgaard)
Date: Sun, 01 Aug 2010 23:49:40 +0200
Subject: [Rd] R CMD build wiped my computer (from R-help)
In-Reply-To: <4C516CDC.9040606@gmail.com>
References: <20100727213709.q1q0u1fm4ooo880s@www.staffmail.ed.ac.uk>	<4C5048DB.3040108@gmail.com>	<201007291020.48419.Ray.Brownrigg@ecs.vuw.ac.nz>	<201007291210.49277.Ray.Brownrigg@ecs.vuw.ac.nz>
	<4C516CDC.9040606@gmail.com>
Message-ID: <4C55EBF4.9000209@gmail.com>

Duncan Murdoch wrote:
> On 28/07/2010 8:10 PM, Ray Brownrigg wrote:
>> NOTE: Now submitted to R-devel, as this seems more appropriate.
>>
>> I may have spoken too soon about this having been fixed. (see below).
>>
>> If I create another "unusual but not 'invalid'" filename in the R subdirectory, the 
>> behaviour is different from that reported below, and is similar to the original poster's 
>> output (the third "unlink" command, where "xyz" was "~"):
>>
>> circa>  ls -al RColorBrewer/R
>> total 140
>> -rwxr-xr-x  1 ray  ecs  43988 Apr 17  2005    ColorBrewer.R~*
>> -rw-r--r--  1 ray  ecs      0 Jul 29 09:57    residuals.MCMCglmm.R?xyz
> 
> Ray clarified to me that this filename was "residuals.MCMCglmm.R" 
> preceded by 3 spaces and followed by a carriage return and "xyz".
> 
>> drwxr-xr-x  2 ray  ecs   4096 Jul 29 12:02 ./
>> drwxr-xr-x  5 ray  ecs   4096 Jul 29 11:49 ../
>> -rwxr-xr-x  1 ray  ecs  43988 Jul 29 09:57 ColorBrewer.R*
>> -rwxr-xr-x  1 ray  ecs  43988 Apr 17  2005 ColorBrewer.R~*
>> -rw-r--r--  1 ray  ecs      0 Jul 29 09:58 residuals.MCMCglmm.R
>> circa>
>> circa>
>> circa>  R CMD build RColorBrewer
>> * checking for file 'RColorBrewer/DESCRIPTION' ... OK
>> * preparing 'RColorBrewer':
>> * checking DESCRIPTION meta-information ... OK
>> * checking whether 'INDEX' is up-to-date ... NO
>> * use '--force' to overwrite the existing 'INDEX'
>> * removing junk files
>> unlink RColorBrewer/R/   ColorBrewer.R~
>> unlink RColorBrewer/R/ColorBrewer.R
>> unlink RColorBrewer/R/   residuals.MCMCglmm.R
>> xyz
> 
> That certainly looks bad.  I can't reproduce it on Windows; it doesn't 
> allow that filename.  So I'll have to leave this for a Unix-alike user.


I have been following this from the sideline, because I suck really bad
when it comes to Perl programming. However....

I'm seeing this stuff in the build script:

    ## Remove exclude files.
    open(EXCLUDE, "< $exclude");
    while(<EXCLUDE>) {
        rmtree(glob($_));
    }
    close(EXCLUDE);

Now this comes after

    find(\&find_exclude_files, "$pkgname");

which AFAICT prints a number of file names into EXCLUDE. Now if one of
those file names contain a wildcard, I conjecture that the glob() can
make weird things happen. I don't think we want to glob there, do we?

Another issue is that EXCLUDE seems unprotected against file names with
embedded newlines. Something like find's -print0 would be handy...


> Duncan Murdoch
> 
>> unlink RColorBrewer/R/residuals.MCMCglmm.R
>> unlink RColorBrewer/R/ColorBrewer.R~
>> rmdir RColorBrewer/R
>> * checking for LF line-endings in source and make files
>> * checking for empty or unneeded directories
>> * building 'RColorBrewer_1.0-3.tar.gz'
>>
>> circa>
>>
>> Ray Brownrigg
>>
>> On Thu, 29 Jul 2010, Ray Brownrigg wrote:
>>> On Thu, 29 Jul 2010, Duncan Murdoch wrote:
>>>> On 28/07/2010 10:01 AM, Jarrod Hadfield wrote:
>>>>> Hi Marc,
>>>>>
>>>>> Thanks for the info on recovery - most of it can pieced together from
>>>>> backups but a quick, cheap and easy method of recovery would have been
>>>>> nicer.
>>>>>
>>>>> My main concern is that this could happen again and that the "bug" is
>>>>> not limited to R 2.9. I would think that an accidental carriage return
>>>>> at the end of a file name (even a temporary one) would be a reasonably
>>>>> common phenomenon (I'm surprised I hadn't done it before).
>>>> If you can put together a recipe to reproduce the problem (or a less
>>>> extreme version of R deleting files it shouldn't), we'll certainly fix
>>>> it.  But so far all we've got are guesses about what might have gone
>>>> wrong, and I don't think anyone has been able to reproduce the problem
>>>> on current R.
>>> Duncan:
>>>
>>> It looks to me like it has already been fixed, if indeed that was the
>>> problem.  In R-2.10.1, I tried to reproduce the problem (using
>>> RColorBrewer, since that was the smallest package I have a local copy of),
>>> and the build produced this:
>>>
>>> * removing junk files
>>> * excluding invalid files from 'RColorBrewer'
>>> Subdirectory 'R' contains invalid file names:
>>>   residuals.MCMCglmm.R xyz
>>>
>>> where the space shown between the "R" and the "xyz" was a newline
>>> character. [I didn't dare try using a "~" :-)]
>>>
>>> Ray Brownrigg
>>>
>>>> Duncan Murdoch
>>>>
>>>>> Cheers,
>>>>>
>>>>> Jarrod
>>>>>
>>>>> On 28 Jul 2010, at 14:04, Marc Schwartz wrote:
>>>>>> Jarrod,
>>>>>>
>>>>>> Noting your exchange with Martin, Martin brings up a point that
>>>>>> certainly I missed, which is that somehow the tilde ('~') character
>>>>>> got into the chain of events. As Martin noted, on Linuxen/Unixen
>>>>>> (including OSX), the tilde, when used in the context of file name
>>>>>> globbing, refers to your home directory. Thus, a command such as:
>>>>>>
>>>>>>  ls ~
>>>>>>
>>>>>> will list the files in your home directory. Similarly:
>>>>>>
>>>>>>  rm ~
>>>>>>
>>>>>> will remove the files there as well. If the -rf argument is added,
>>>>>> then the deletion becomes recursive through that directory tree,
>>>>>> which appears to be the case here.
>>>>>>
>>>>>> I am unclear, as Martin appears to be, as to the steps that caused
>>>>>> this to happen. That may yet be related in some fashion to Duncan's
>>>>>> hypothesis.
>>>>>>
>>>>>> That being said, the use of the tilde character as a suffix to
>>>>>> denote that a file is a backup version, is not limited to Fedora or
>>>>>> Linux, for that matter. It is quite common for many text editors
>>>>>> (eg. Emacs) to use this. As a result, it is also common for many
>>>>>> applications to ignore files that have a tilde suffix.
>>>>>>
>>>>>> Based upon your follow up posts to the original thread, it would
>>>>>> seem that you do not have any backups. The default ext3 file system
>>>>>> that is used on modern Linuxen, by design, makes it a bit more
>>>>>> difficult to recover deleted files. This is due to the unlinking of
>>>>>> file metadata at the file system data structure level, as opposed to
>>>>>> simply marking the file as deleted in the directory structures, as
>>>>>> happens on Windows.
>>>>>>
>>>>>> There is a utility called ext3undel
>>>>>> (http://projects.izzysoft.de/trac/ext3undel ), which is a wrapper of
>>>>>> sorts to other undelete utilities such as PhotoRec and foremost. I
>>>>>> have not used it/them, so cannot speak from personal experience. Thus
>>>>>> it would be a good idea to engage in some reviews of the
>>>>>> documentation and perhaps other online resources before proceeding.
>>>>>> The other
>>>>>> consideration is the Catch-22 of not copying anything new to your
>>>>>> existing HD, for fear of overwriting the lost files with new data. So
>>>>>> you would need to consider an approach of downloading these utilities
>>>>>> via another computer and then running them on the computer in
>>>>>> question from other media, such as a CD/DVD or USB HD.
>>>>>>
>>>>>> A more expensive option would be to use a professional data recovery
>>>>>> service, where you would have to consider the cost of recovery
>>>>>> versus your lost time. One option would be Kroll OnTrack UK
>>>>>> (http://www.ontrackdatarecovery.co.uk/ ). I happen to live about a
>>>>>> quarter mile from their world HQ here in a suburb of Minneapolis. I
>>>>>> have not used them myself, but others that I know have, with good
>>>>>> success. Again, this comes at a
>>>>>> potentially substantial monetary cost.
>>>>>>
>>>>>> The key is that if you have any hope to recover the deleted files,
>>>>>> you not copy anything new onto the hard drive in the mean time.
>>>>>> Doing so will decrease the possibility of file recovery to near 0.
>>>>>>
>>>>>> As Duncan noted, there is great empathy with your situation. We have
>>>>>> all gone through this at one time or another. In my case, it was
>>>>>> perhaps 20+ years ago, but as a result, I am quite anal retentive
>>>>>> about having backups, which I have done for some time on my systems,
>>>>>> hourly.
>>>>>>
>>>>>> HTH,
>>>>>>
>>>>>> Marc Schwartz
>>>>>>
>>>>>> On Jul 28, 2010, at 5:55 AM, Jarrod Hadfield wrote:
>>>>>>> Hi Martin,
>>>>>>>
>>>>>>> I think this is the most likely reason given that the name in the
>>>>>>> DESCRIPTION file does NOT have a version number. Even so, it is
>>>>>>> very easy to misname a file and then delete it/change its name (as
>>>>>>> I've done here) and I hope current versions of R would not cause
>>>>>>> this problem. Perhaps Fedora should not use ~ as its back up file
>>>>>>> suffixes?
>>>>>>>
>>>>>>> Cheers,
>>>>>>>
>>>>>>> Jarrod
>>>>>>>
>>>>>>> On 28 Jul 2010, at 11:41, Martin Maechler wrote:
>>>>>>>>>>>>> Jarrod Hadfield <j.hadfield at ed.ac.uk>
>>>>>>>>>>>>>  on Tue, 27 Jul 2010 21:37:09 +0100 writes:
>>>>>>>>> Hi, I ran R (version 2.9.0) CMD build under root in
>>>>>>>>> Fedora (9). When it tried to remove "junk files" it
>>>>>>>>> removed EVERYTHING in my local account! (See below).
>>>>>>>>>
>>>>>>>>> Can anyone tell me what happened,
>>>>>>>> the culprit may lay here:
>>>>>>>>>> * removing junk files
>>>>>>>>>> unlink MCMCglmm_2.05/R/   residuals.MCMCglmm.R
>>>>>>>>>> ~
>>>>>>>> where it seems that someone (you?) have added a newline
>>>>>>>> in the filname, so instead of
>>>>>>>> 'residuals.MCMCglmm.R~'
>>>>>>>> you got
>>>>>>>>
>>>>>>>> 'residuals.MCMCglmm.R
>>>>>>>> ~'
>>>>>>>>
>>>>>>>> and the unlink / rm  command interpreted '~' as your home
>>>>>>>> directory.
>>>>>>>>
>>>>>>>> But I can hardly believe it.
>>>>>>>> This seems explanation seems a bit doubtful to me.. ...
>>>>>>>>
>>>>>>>>> and even more importantly if I can I restore what was lost.
>>>>>>>> well, you just get it from the backup. You do daily backups, do
>>>>>>>> you?
>>>>>>>>
>>>>>>>> Regards,
>>>>>>>> Martin Maechler, ETH Zurich
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html and provide commented,
>>>> minimal, self-contained, reproducible code.
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Peter Dalgaard
Center for Statistics, Copenhagen Business School
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From murdoch.duncan at gmail.com  Tue Aug  3 13:10:56 2010
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 03 Aug 2010 07:10:56 -0400
Subject: [Rd] Disappearance of the file &quot;NEWS&quot;
In-Reply-To: <loom.20100801T200003-228@post.gmane.org>
References: <4C55394F.40902@gmail.com>
	<loom.20100801T200003-228@post.gmane.org>
Message-ID: <4C57F940.4050400@gmail.com>

On 01/08/2010 2:02 PM, Ben Bolker wrote:
> Laurent <lgautier <at> gmail.com> writes:
> 
>> Dear R-developpers,
>>
>> The file NEWS disappeared in r5243, and the authoritative source of 
>> information for what has changed in R is in ./doc/NEWS.Rd.
>>
>> A quick glance at NEWS was extremely helpful for knowing what has 
>> changed, and whether building a (more) recent development version was 
>> needed to test changes, or verify that they would not break existing code.
> 
>  [snip to make Gmane happy]
> 
>   Agreed.  This change also breaks the link on the R developers
> page:
> 
> https://svn.r-project.org/R/trunk/NEWS
> 
> although one can still, sort of, get to the information via
> 
> http://developer.r-project.org/RSSfeeds.html

I'll fix the link.  In the meantime you can still see the processed news 
online at

http://stat.ethz.ch/R-manual/R-devel/NEWS (plain text)

or

http://stat.ethz.ch/R-manual/R-devel/doc/html/NEWS.html (HTML)

I think it would not be a good idea to put a stub in place of the NEWS 
file.  Sometimes the stub would be newer than the source NEWS.Rd file 
(depending on how the source had been obtained), and make would skip it: 
  so we'd have to force it to be made every time, necessary or not.

Duncan Murdoch


From hb at stat.berkeley.edu  Tue Aug  3 14:11:21 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Tue, 3 Aug 2010 14:11:21 +0200
Subject: [Rd] Suggestion: make if (x) an error also for length(x) > 1
Message-ID: <AANLkTikd3y+7654JXfHF=f=ZG-uZPoJWqZKEH9rpys+9@mail.gmail.com>

For a while, R has been generating a warning for if (x) when length(x)
> 1.  With length(x) == 0, we get an error.

> x <- logical(0)
> if (x) 1;
Error in if (x) 1 : argument is of length zero
> x <- logical(1)
> if (x) 1;
> x <- logical(2)
> if (x) 1;
Warning message:
In if (x) 1 :
  the condition has length > 1 and only the first element will be used

Time to make the length(x) > 1 case an error to?  Is there any sane
programming reason why it should work as if (x[1]) with a warning?
How many bugs propagate because of this?

/Henrik


From tom.quarendon at teamwpc.co.uk  Tue Aug  3 14:22:41 2010
From: tom.quarendon at teamwpc.co.uk (Tom Quarendon)
Date: Tue, 3 Aug 2010 05:22:41 -0700
Subject: [Rd] License for Rembedded.h
Message-ID: <C2C528062C7A5741A8E02332E47D86A3204354D415@IE2RD2XVS061.red002.local>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100803/f12be45c/attachment.pl>

From groemping at bht-berlin.de  Tue Aug  3 21:24:47 2010
From: groemping at bht-berlin.de (=?ISO-8859-15?Q?Ulrike_Gr=F6mping?=)
Date: Tue, 03 Aug 2010 21:24:47 +0200
Subject: [Rd] Issue with prediction from lm object with poly
Message-ID: <4C586CFF.3060504@bht-berlin.de>

DDear developeRs,

about a year ago, Alex Stolpovsky posted an issue with predict.lm on a 
fit generated using poly with the raw=TRUE option and too few new data 
(slightly modified reproducible example below). Alex did not get any 
reply. I have just stumbled on the same problem, and I think that this 
is a bug of function poly, which arises from the check whether the 
polynomial degree is compatible with the number of unique data points.

Unfortunately, poly is the only comfortable way of automatically 
guaranteeing compatibility between values for different degree 
polynomials in newdata. With the I(x^2) solution for the square, 
compatibility must be manually ascertained. I got stuck with this for 
Russ Lenth's implementation of contour.lm in package rsm, where 
incompatible linear and squared values are fixed, when using standard 
quadratic terms (like x + I(x^2)) in the formula, because I(x^2) does 
not remember it's relation to x. I tried to fix this by using 
poly(x,2,raw=TRUE) instead of x + I(x^2), which failed because of the 
issue raised by Alex Stolpovsky. I think it would be desirable to make 
prediction with poly and the raw=TRUE option work. In my opinion, this 
is more important than checking for admissibility of the degree of the 
polynomial.

A related question: wouldn't it be more logical, if model.matrix would 
return the complete model matrix with all polynomial degrees, but 
model.frame would only return the original data used to generate the 
poly matrix? This might be a change with massive consequences and 
therefore undesirable, but ...

Best, Ulrike

******* the example that shows the issue
x <- c(1:10)
y <- sin(c(1:10))
fit <- lm(formula=y~poly(x, 5, raw=TRUE))
predict(fit, newdata=data.frame(x=c(1:10))) ## this works
predict(fit, newdata=data.frame(x=1))  ## this is broken, error below

Error in poly(x, 5, raw = TRUE) :
  'degree' must be less than number of unique points

The problem is in poly():

    if (raw) {
        if (degree >= length(unique(x)))
            stop("'degree' must be less than number of unique points")


From tom.quarendon at teamwpc.co.uk  Wed Aug  4 10:24:17 2010
From: tom.quarendon at teamwpc.co.uk (Tom Quarendon)
Date: Wed, 4 Aug 2010 01:24:17 -0700
Subject: [Rd] License for Rembedded.h
In-Reply-To: <C2C528062C7A5741A8E02332E47D86A3204354D415@IE2RD2XVS061.red002.local>
References: <C2C528062C7A5741A8E02332E47D86A3204354D415@IE2RD2XVS061.red002.local>
Message-ID: <C2C528062C7A5741A8E02332E47D86A3204354D7EA@IE2RD2XVS061.red002.local>

I've looked at various threads on the r-devel archive and it looks like this may have been discussed before, but as far as could tell, not to any great resolution, and not, it seems, specifically covering this angle.

My understanding of LGPL is that ALL of the source files that go into R.dll (and indeed all libraries that R.dll itself linked to, apart from those covered by the system library exception) would need to be released under LGPL in order to allow me to link to R.dll and not have my program subject to GPL. This would apply to native libraries (dlls) providing functions in addon packages too.
If that weren't the situation then I could take a library covered by GPL, write a different interface to it, put LGPL on those headers compile up a new DLL and I've then got LGPL access to a library previously released under GPL, which can't be the intention, otherwise LGPL would drive a coach and horses through GPL.
There is provision in the GPL license (it's mentioned in the FAQ) for providing for linking to a GPL library through one specific interface by providing specific exception text in the copyright header in all of the files that make up the library. That would only be possible if the copyright holders of all relevant GPL code agreed to that, as that would be an extra grant to the license. So if R linked to any third party GPL code, this wouldn't be possible I don't think.
So I guess the question here is what the intention is of the R authors with respect to the limitations or freedoms that they are intending to allow. After all, as the copyright owners they aren't going to sue if a use falls outside of their intention, even if on a strict interpretation of the license such use wouldn't be allowed.

So it seems to be the intention that I can write a DLL to provide R functions in an add on package, which requires linkage to R.dll. Not convinced that the license it set up right to cover that, but that appears to be the intention. Question is whether at the other end, at the invocation API end, whether it is the intention to be able to use the invocation API and link to R.dll without my program being subjected to GPL.

Note that I'm not talking here about anything to do with code written in the language of R. This is purely concerned with treating R as a library with an interface and wanting to link to that interface and whether the intention or the actuality of the license allow that.

Thanks!

-----Original Message-----
From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org] On Behalf Of Tom Quarendon
Sent: 03 August 2010 13:23
To: r-devel at r-project.org
Subject: [Rd] License for Rembedded.h

Possibly more of a legal question than a technical development question, but here goes.



In the doc\COPYRIGHTS file it is made clear that the intention is that you can write R packages and distribute them under licenses not compatible with GPL, by making the relevant header files available under the LGPL. This was an explicit change that was made in February 2001, and allows for DLLs that require the API header files for compilation and are linked against R.dll to not be "infected" with the GPL.

However the Rembedded.h header file isn't included in the list in the doc\COPYRIGHTS file, and the copyright statement in the Rembedded.h header file lists the GPL and not the LGPL as the relevant license.

So it doesn't look like it is allowed that I be able to use the R invocation API to launch R and embed it in my product (such as a new GUI, or integration with another product) and ship that product under a license not compatible with GPL? Is this correct? Or is it the intention that I be able to write a commercial front-end of some kind for R?



Thanks!






        [[alternative HTML version deleted]]

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel



__________ Information from ESET NOD32 Antivirus, version of virus signature database 5336 (20100803) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


__________ Information from ESET NOD32 Antivirus, version of virus signature database 5338 (20100803) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com



__________ Information from ESET NOD32 Antivirus, version of virus signature database 5338 (20100803) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From wdunlap at tibco.com  Wed Aug  4 20:36:26 2010
From: wdunlap at tibco.com (William Dunlap)
Date: Wed, 4 Aug 2010 11:36:26 -0700
Subject: [Rd] problem in predict.lm(type="terms", terms=someNames,
	interval="confidence", ...)
Message-ID: <77EB52C6DD32BA4D87471DCD70C8D700034847A1@NA-PA-VBE03.na.tibco.com>

R's predict.lm() fails when trying to compute
term-wise confidence (or prediction) intervals
for a subset of the terms in a model:

> dat <- data.frame(y=log(1:10), x=1:10,
fac=rep(LETTERS[11:13],c(3,3,4)))
> fit <- lm(y~fac*x, data=dat)
> # can compute intervals for all terms
> pfit <- predict(fit, type="terms", interval="confidence",
newdata=dat[7:5,])
> # error computing intervals for a subset of the terms
> pfit2 <- predict(fit, type="terms", terms=c("x","fac"),
interval="confidence", newdata=dat[7:5,])Error in predictor + hwid :
non-conformable arrays

> # pfit2 should be the same as pfit2Expected
> pfit2Expected <- lapply(pfit2,
    function(x)if(is.matrix(x)) structure(x[, c("x","fac")],
constant=attr(x, "constant")) else x)


Bill Dunlap
Spotfire, TIBCO Software
wdunlap tibco.com 


From baptiste.auguie at googlemail.com  Wed Aug  4 22:14:28 2010
From: baptiste.auguie at googlemail.com (baptiste auguie)
Date: Wed, 4 Aug 2010 22:14:28 +0200
Subject: [Rd] gpar fill and transparency on devices
Message-ID: <AANLkTi=KXs+c=A1sH_NSc2rD883tXt+8WgMwqHrVLr+r@mail.gmail.com>

Dear list,

I'm puzzled by the graphical output in the following example,

library(grid)

foo <- function(){
  grid.rect(gp=gpar(fill="black"))
  print(get.gpar()$fill)
  grid.rect(width=0.2,height=0.2)
}

png("test.png", bg = "transparent")
foo()
dev.off()

png("test1.png", bg = "white")
foo()
dev.off()


It seems that the default value of gpar()$fill is set according to the
device background. I couldn't find this documented in ?gpar or in
?png, and it caused a rather puzzling bug in my code (the pdf() output
was OK, whilst the png output (default bg to white) was seemingly
empty because covered by a white rectangle.)

Best regards,

baptiste


From groemping at bht-berlin.de  Thu Aug  5 18:24:09 2010
From: groemping at bht-berlin.de (=?ISO-8859-15?Q?Ulrike_Gr=F6mping?=)
Date: Thu, 05 Aug 2010 18:24:09 +0200
Subject: [Rd] Assignment of individual values to data frame columns:
 intentional or unintentional behavior?
Message-ID: <4C5AE5A9.9060905@bht-berlin.de>

Dear developeRs,

I have just discovered a strange feature when assigning some values to 
columns of a data frame: The column is matched by partial matching (as 
documented), but when assigning a value, a new column with the partial 
name is added to the data frame that is identical to the original column 
except for the changed value. Is that intentional ? An example:

sw <- swiss[1:5, 1:4]
sw
sw$Fert[1] <- 10
sw

Best, Ulrike

-- 
***********************************************
* Ulrike Groemping                            *
* BHT Berlin - University of Applied Sciences *
***********************************************
* +49 (30) 39404863 (Home Office)             *
* +49 (30) 4504 5127 (BHT)                    *
***********************************************
* http://prof.beuth-hochschule.de/groemping         *
* groemping at bht-berlin.de                     *


From ggrothendieck at gmail.com  Thu Aug  5 19:53:15 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 5 Aug 2010 13:53:15 -0400
Subject: [Rd] Assignment of individual values to data frame columns:
	intentional or unintentional behavior?
In-Reply-To: <4C5AE5A9.9060905@bht-berlin.de>
References: <4C5AE5A9.9060905@bht-berlin.de>
Message-ID: <AANLkTimEyxOM-tevXE1FVDfYScqT-z3dNX9TEc8xez7P@mail.gmail.com>

On Thu, Aug 5, 2010 at 12:24 PM, Ulrike Gr?mping
<groemping at bht-berlin.de> wrote:
> Dear developeRs,
>
> I have just discovered a strange feature when assigning some values to
> columns of a data frame: The column is matched by partial matching (as
> documented), but when assigning a value, a new column with the partial name
> is added to the data frame that is identical to the original column except
> for the changed value. Is that intentional ? An example:

Note that the lack of partial matching when performing assignment is
also documented.

See second last paragraph in Details section of ?Extract


From groemping at bht-berlin.de  Thu Aug  5 20:14:59 2010
From: groemping at bht-berlin.de (=?ISO-8859-1?Q?Ulrike_Gr=F6mping?=)
Date: Thu, 05 Aug 2010 20:14:59 +0200
Subject: [Rd] Assignment of individual values to data frame columns:
 intentional or unintentional behavior?
In-Reply-To: <AANLkTimEyxOM-tevXE1FVDfYScqT-z3dNX9TEc8xez7P@mail.gmail.com>
References: <4C5AE5A9.9060905@bht-berlin.de>
	<AANLkTimEyxOM-tevXE1FVDfYScqT-z3dNX9TEc8xez7P@mail.gmail.com>
Message-ID: <4C5AFFA3.7050800@bht-berlin.de>

Gabor Grothendieck schrieb:
> On Thu, Aug 5, 2010 at 12:24 PM, Ulrike Gr?mping
> <groemping at bht-berlin.de> wrote:
>   
>> Dear developeRs,
>>
>> I have just discovered a strange feature when assigning some values to
>> columns of a data frame: The column is matched by partial matching (as
>> documented), but when assigning a value, a new column with the partial name
>> is added to the data frame that is identical to the original column except
>> for the changed value. Is that intentional ? An example:
>>     
>
> Note that the lack of partial matching when performing assignment is
> also documented.
>
> See second last paragraph in Details section of ?Extract
>   
Yes, I see, thanks. I looked at ?"[.data.frame", where this is not 
documented.

However, given the documentation that partial matching is not used on 
the left-hand side, I would have expected even more that the assignment

sw$Fert[1] <- 10

works differently, because I am using it on the left-hand side. 
Probably, extraction ([1]) is done first here, so that the right-hand 
side won. At least, this is very confusing.

Best, Ulrike


From lachmann at eva.mpg.de  Thu Aug  5 21:25:37 2010
From: lachmann at eva.mpg.de (Michael Lachmann)
Date: Thu, 5 Aug 2010 12:25:37 -0700 (PDT)
Subject: [Rd] problem with dl tag in tools::Rd2HTML
Message-ID: <1281036337720-2315499.post@n4.nabble.com>


I think tools::Rd2HTML has a problem with the dl tag.
Under some conditions, <p> and </p>, and <dl> and </dl> are not nested
correctly.
Here is an example from the "options" doc file:
--
<p>
<dl>
<dt><code>save.defaults</code>, <code>save.image.defaults</code>:</dt><dd>
see <code>save</code>.</dd>
</p>
--
You can see that the <p> starts, then <dl> starts, then </p> end the
paragraph, but the <dl> has not ended yet.
I don't really understand in html, but I think the correct way would be
--
<dl>
<p>
<dt><code>save.defaults</code>, <code>save.image.defaults</code>:</dt><dd>
see <code>save</code>.</dd>
</p>
--

Michael
-- 
View this message in context: http://r.789695.n4.nabble.com/problem-with-dl-tag-in-tools-Rd2HTML-tp2315499p2315499.html
Sent from the R devel mailing list archive at Nabble.com.


From murdoch.duncan at gmail.com  Thu Aug  5 22:03:11 2010
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 05 Aug 2010 16:03:11 -0400
Subject: [Rd] problem with dl tag in tools::Rd2HTML
In-Reply-To: <1281036337720-2315499.post@n4.nabble.com>
References: <1281036337720-2315499.post@n4.nabble.com>
Message-ID: <4C5B18FF.6070203@gmail.com>

On 05/08/2010 3:25 PM, Michael Lachmann wrote:
> I think tools::Rd2HTML has a problem with the dl tag.
> Under some conditions, <p> and </p>, and <dl> and </dl> are not nested
> correctly.
> Here is an example from the "options" doc file:
> --
> <p>
> <dl>
> <dt><code>save.defaults</code>, <code>save.image.defaults</code>:</dt><dd>
> see <code>save</code>.</dd>
> </p>
> --
> You can see that the <p> starts, then <dl> starts, then </p> end the
> paragraph, but the <dl> has not ended yet.
> I don't really understand in html, but I think the correct way would be
> --
> <dl>
> <p>
> <dt><code>save.defaults</code>, <code>save.image.defaults</code>:</dt><dd>
> see <code>save</code>.</dd>
> </p>
> --
>
> Michael
>   
What version are you using?  I don't see that in current R patched.

Duncan Murdoch


From lachmann at eva.mpg.de  Thu Aug  5 23:18:41 2010
From: lachmann at eva.mpg.de (Michael Lachmann)
Date: Thu, 5 Aug 2010 14:18:41 -0700 (PDT)
Subject: [Rd] problem with dl tag in tools::Rd2HTML
In-Reply-To: <4C5B18FF.6070203@gmail.com>
References: <1281036337720-2315499.post@n4.nabble.com>
	<4C5B18FF.6070203@gmail.com>
Message-ID: <1281043121542-2315620.post@n4.nabble.com>



Duncan Murdoch-2 wrote:
> 
> 
> What version are you using?  I don't see that in current R patched.
> 
> 

I see this in version 2.11.1.
This is the code I ran to generate it:
page <- utils:::.getHelpFile(?options)
tools::Rd2HTML(page,out="t.html")

in the generated file, t.html, the first <dl> tag is such a case.

Michael
-- 
View this message in context: http://r.789695.n4.nabble.com/problem-with-dl-tag-in-tools-Rd2HTML-tp2315499p2315620.html
Sent from the R devel mailing list archive at Nabble.com.


From lachmann at eva.mpg.de  Thu Aug  5 23:35:53 2010
From: lachmann at eva.mpg.de (Michael Lachmann)
Date: Thu, 5 Aug 2010 14:35:53 -0700 (PDT)
Subject: [Rd] Assignment of individual values to data frame columns:
 intentional or unintentional behavior?
In-Reply-To: <4C5AFFA3.7050800@bht-berlin.de>
References: <4C5AE5A9.9060905@bht-berlin.de>
	<AANLkTimEyxOM-tevXE1FVDfYScqT-z3dNX9TEc8xez7P@mail.gmail.com>
	<4C5AFFA3.7050800@bht-berlin.de>
Message-ID: <1281044153678-2315641.post@n4.nabble.com>



Ulrike Gr?mping wrote:
> 
> 
> However, given the documentation that partial matching is not used on 
> the left-hand side, I would have expected even more that the assignment
> 
> sw$Fert[1] <- 10
> 
> works differently, because I am using it on the left-hand side. 
> Probably, extraction ([1]) is done first here, so that the right-hand 
> side won. At least, this is very confusing.
> 
> 

I totally agree! I think that 
sw <- data.frame(Fertility=1:5)
sw$Fert[1] <- 10

should work either like

sw$Fert2[1] <- 10

i.e. create new column, containing just 10.
or like

sw$Fertility[1] <- 10

i.e. replace the 1st item in sw$Fertility by 10.

-- 
View this message in context: http://r.789695.n4.nabble.com/Assignment-of-individual-values-to-data-frame-columns-intentional-or-unintentional-behavior-tp2315105p2315641.html
Sent from the R devel mailing list archive at Nabble.com.


From lachmann at eva.mpg.de  Fri Aug  6 00:21:47 2010
From: lachmann at eva.mpg.de (Michael Lachmann)
Date: Thu, 5 Aug 2010 15:21:47 -0700 (PDT)
Subject: [Rd] rbind on data.frame that contains a column that is also a
 data.frame
Message-ID: <1281046907919-2315682.post@n4.nabble.com>


Hi,

The following was already a topic on r-help, but after understanding what is
going on, I think it fits better in r-devel.

The problem is this:
When a data.frame has another data.frame in it, rbind doesn't work well.
Here is an example:
--
> a=data.frame(x=1:10,y=1:10)
> b=data.frame(z=1:10)
> b$a=a
> b
    z a.x a.y
1   1   1   1
2   2   2   2
3   3   3   3
4   4   4   4
5   5   5   5
6   6   6   6
7   7   7   7
8   8   8   8
9   9   9   9
10 10  10  10
> rbind(b,b)
Error in `row.names<-.data.frame`(`*tmp*`, value = c("1", "2", "3", "4",  : 
  duplicate 'row.names' are not allowed
In addition: Warning message:
non-unique values when setting 'row.names': ?1?, ?10?, ?2?, ?3?, ?4?, ?5?,
?6?, ?7?, ?8?, ?9?
--


Looking at the code of rbind.data.frame, the error comes from the   
lines: 
-- 
xij <- xi[[j]] 
if (has.dim[jj]) { 
  value[[jj]][ri, ] <- xij 
  rownames(value[[jj]])[ri] <- rownames(xij)   # <--  problem is here 
} 
-- 
if the rownames() line is dropped, all works well. What this line   
tries to do is to join the rownames of internal elements of the   
data.frames I try to rbind. So the result, in my case should have a   
column 'a', whose rownames are the rownames of the original column 'a'. It   
isn't totally clear to me why this is needed. When would a data.frame   
have different rownames on the inside vs. the outside? 

Notice also that rbind takes into account whether the rownames of the   
data.frames to be joined are simply 1:n, or they are something else.   
If they are 1:n, then the result will have rownames 1:(n+m). If not,   
then the rownames might be kept. 

I think, more consistent would be to replace the lines above with   
something like: 
             if (has.dim[jj]) { 
                 value[[jj]][ri, ] <- xij 
                 rnj = rownames(value[[jj]]) 
                 rnj[ri] = rownames(xij) 
                 rnj = make.unique(as.character(unlist(rnj)), sep = "") 
                 rownames(value[[jj]]) <- rnj 
             } 

In this case, the rownames of inside elements will also be joined, but   
in case they overlap, they will be made unique - just as they are for   
the overall result of rbind. A side effect here would be that the   
rownames of matrices will also be made unique, which till now didn't   
happen, and which also doesn't happen when one rbinds matrices that   
have rownames. So it would be better to test above if we are dealing   
with a matrix or a data.frame. 

But most people don't have different rownames inside and outside.   
Maybe it would be best to add a flag as to whether you care or don't   
care about the rownames of internal data.frames... 

But maybe data.frames aren't meant to contain other data.frames?

If instead I do
b=data.frame( z=1:10, a=a) 
then rbind(b,b) works well. In this case the data.frame was converted to its
columns. Maybe
b$a = a 
should do the same?

Michael 
-- 
View this message in context: http://r.789695.n4.nabble.com/rbind-on-data-frame-that-contains-a-column-that-is-also-a-data-frame-tp2315682p2315682.html
Sent from the R devel mailing list archive at Nabble.com.


From murdoch.duncan at gmail.com  Fri Aug  6 00:54:40 2010
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 05 Aug 2010 18:54:40 -0400
Subject: [Rd] problem with dl tag in tools::Rd2HTML
In-Reply-To: <1281043121542-2315620.post@n4.nabble.com>
References: <1281036337720-2315499.post@n4.nabble.com>	<4C5B18FF.6070203@gmail.com>
	<1281043121542-2315620.post@n4.nabble.com>
Message-ID: <4C5B4130.9010702@gmail.com>

On 05/08/2010 5:18 PM, Michael Lachmann wrote:
> 
> Duncan Murdoch-2 wrote:
>>
>> What version are you using?  I don't see that in current R patched.
>>
>>
> 
> I see this in version 2.11.1.
> This is the code I ran to generate it:
> page <- utils:::.getHelpFile(?options)
> tools::Rd2HTML(page,out="t.html")
> 
> in the generated file, t.html, the first <dl> tag is such a case.

Thanks.  It is still there after all.  I'll take a look...

Duncan Murdoch


From p.murrell at auckland.ac.nz  Fri Aug  6 00:54:47 2010
From: p.murrell at auckland.ac.nz (Paul Murrell)
Date: Fri, 06 Aug 2010 10:54:47 +1200
Subject: [Rd] gpar fill and transparency on devices
In-Reply-To: <AANLkTi=KXs+c=A1sH_NSc2rD883tXt+8WgMwqHrVLr+r@mail.gmail.com>
References: <AANLkTi=KXs+c=A1sH_NSc2rD883tXt+8WgMwqHrVLr+r@mail.gmail.com>
Message-ID: <4C5B4137.3080801@auckland.ac.nz>

Hi

The help page for "Working with Viewports" (e.g., pushViewport()) has a 
brief mention when talking about the ROOT viewport ...

"The viewport tree always has a single root viewport (created by the 
system) which corresponds to the entire device (and default graphical 
parameter settings)."

... which is a reasonable place for it because this is a feature of the 
gpar of the ROOT viewport, not of gpars in general.  That mention might 
be a bit hard to find, but a very similar statement is also made in the 
Section on Viewports in the R Graphics book.  That in turn might be hard 
to find if you don't have the book, but that chapter is also available 
online (http://www.stat.auckland.ac.nz/~paul/RGraphics/chapter5.pdf)

It might be worth adding something more explicit about this sort of 
gotcha ...

"Some devices have different default graphics parameter settings, so it 
is not safe to assume that the ROOT viewport will be identical on 
different devices."

... ?

Paul

On 5/08/2010 8:14 a.m., baptiste auguie wrote:
> Dear list,
>
> I'm puzzled by the graphical output in the following example,
>
> library(grid)
>
> foo<- function(){
>    grid.rect(gp=gpar(fill="black"))
>    print(get.gpar()$fill)
>    grid.rect(width=0.2,height=0.2)
> }
>
> png("test.png", bg = "transparent")
> foo()
> dev.off()
>
> png("test1.png", bg = "white")
> foo()
> dev.off()
>
>
> It seems that the default value of gpar()$fill is set according to the
> device background. I couldn't find this documented in ?gpar or in
> ?png, and it caused a rather puzzling bug in my code (the pdf() output
> was OK, whilst the png output (default bg to white) was seemingly
> empty because covered by a white rectangle.)
>
> Best regards,
>
> baptiste
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/


From lachmann at eva.mpg.de  Fri Aug  6 00:55:24 2010
From: lachmann at eva.mpg.de (Michael Lachmann)
Date: Thu, 5 Aug 2010 15:55:24 -0700 (PDT)
Subject: [Rd] problem with dl tag in tools::Rd2HTML
In-Reply-To: <1281043121542-2315620.post@n4.nabble.com>
References: <1281036337720-2315499.post@n4.nabble.com>
	<4C5B18FF.6070203@gmail.com>
	<1281043121542-2315620.post@n4.nabble.com>
Message-ID: <1281048924015-2315709.post@n4.nabble.com>



Michael Lachmann wrote:
> 
> 
> Duncan Murdoch-2 wrote:
>> 
>> 
>> What version are you using?  I don't see that in current R patched.
>> 
>> 
> 
> I see this in version 2.11.1.
> This is the code I ran to generate it:
> page <- utils:::.getHelpFile(?options)
> tools::Rd2HTML(page,out="t.html")
> 
> in the generated file, t.html, the first <dl> tag is such a case.
> 
> 

I also see the same issue in 2.12.0 for OSX that I just downloaded.

Michael
-- 
View this message in context: http://r.789695.n4.nabble.com/problem-with-dl-tag-in-tools-Rd2HTML-tp2315499p2315709.html
Sent from the R devel mailing list archive at Nabble.com.


From baptiste.auguie at googlemail.com  Fri Aug  6 07:34:29 2010
From: baptiste.auguie at googlemail.com (baptiste auguie)
Date: Fri, 6 Aug 2010 07:34:29 +0200
Subject: [Rd] gpar fill and transparency on devices
In-Reply-To: <4C5B4137.3080801@auckland.ac.nz>
References: <AANLkTi=KXs+c=A1sH_NSc2rD883tXt+8WgMwqHrVLr+r@mail.gmail.com>
	<4C5B4137.3080801@auckland.ac.nz>
Message-ID: <AANLkTinLv5dTEBRwtMbZr47f3qoTP3AYh-s9TM-AfaBb@mail.gmail.com>

Hi,

Thanks for pointing this out. I do have the book, unfortunately I left
it abroad this year. I would think that such brief mention in ?gpar
could be useful (because that's where one first looks for gpar()
defaults --- which are not listed).

Best regards,

baptiste


On 6 August 2010 00:54, Paul Murrell <p.murrell at auckland.ac.nz> wrote:
> Hi
>
> The help page for "Working with Viewports" (e.g., pushViewport()) has a
> brief mention when talking about the ROOT viewport ...
>
> "The viewport tree always has a single root viewport (created by the system)
> which corresponds to the entire device (and default graphical parameter
> settings)."
>
> ... which is a reasonable place for it because this is a feature of the gpar
> of the ROOT viewport, not of gpars in general. ?That mention might be a bit
> hard to find, but a very similar statement is also made in the Section on
> Viewports in the R Graphics book. ?That in turn might be hard to find if you
> don't have the book, but that chapter is also available online
> (http://www.stat.auckland.ac.nz/~paul/RGraphics/chapter5.pdf)
>
> It might be worth adding something more explicit about this sort of gotcha
> ...
>
> "Some devices have different default graphics parameter settings, so it is
> not safe to assume that the ROOT viewport will be identical on different
> devices."
>
> ... ?
>
> Paul
>
> On 5/08/2010 8:14 a.m., baptiste auguie wrote:
>>
>> Dear list,
>>
>> I'm puzzled by the graphical output in the following example,
>>
>> library(grid)
>>
>> foo<- function(){
>> ? grid.rect(gp=gpar(fill="black"))
>> ? print(get.gpar()$fill)
>> ? grid.rect(width=0.2,height=0.2)
>> }
>>
>> png("test.png", bg = "transparent")
>> foo()
>> dev.off()
>>
>> png("test1.png", bg = "white")
>> foo()
>> dev.off()
>>
>>
>> It seems that the default value of gpar()$fill is set according to the
>> device background. I couldn't find this documented in ?gpar or in
>> ?png, and it caused a rather puzzling bug in my code (the pdf() output
>> was OK, whilst the png output (default bg to white) was seemingly
>> empty because covered by a white rectangle.)
>>
>> Best regards,
>>
>> baptiste
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> --
> Dr Paul Murrell
> Department of Statistics
> The University of Auckland
> Private Bag 92019
> Auckland
> New Zealand
> 64 9 3737599 x85392
> paul at stat.auckland.ac.nz
> http://www.stat.auckland.ac.nz/~paul/
>



-- 
____________________

Dr. Baptiste Augui?

Departamento de Qu?mica F?sica,
Universidade de Vigo,
Campus Universitario, 36310, Vigo, Spain

tel: +34 9868 18617
http://webs.uvigo.es/coloides


From dutangc at gmail.com  Fri Aug  6 11:14:37 2010
From: dutangc at gmail.com (Christophe Dutang)
Date: Fri, 6 Aug 2010 11:14:37 +0200
Subject: [Rd] on the optim function
Message-ID: <7E004A07-03E1-4DED-A506-6C564EDB6BD8@gmail.com>

Dear useRs,

I have just discovered that the R optim function does not return the number of iterations. 

I still wonder why line 632-634 of optim C, the iter variable is not returned (for the BFGS method for example) ? 

Is there any trick to compute the iteration number with function call number?

Kind regards

Christophe

--
Christophe Dutang
Ph.D. student at ISFA, Lyon, France
website: http://dutangc.free.fr


From murdoch.duncan at gmail.com  Fri Aug  6 13:52:17 2010
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 06 Aug 2010 07:52:17 -0400
Subject: [Rd] [R-SIG-Mac] Question about line type in contour() function
 (R 2.11.1)
In-Reply-To: <B7BDA7CF-1A40-4E03-A504-A29E4B543A5A@gmail.com>
References: <06B4A3B2-0496-46D5-B34F-3E472A94EEC5@gmail.com>	<4C5B5540.3040406@gmail.com>
	<B7BDA7CF-1A40-4E03-A504-A29E4B543A5A@gmail.com>
Message-ID: <4C5BF771.7040009@gmail.com>

On 05/08/2010 8:46 PM, David B. Thompson, Ph.D., P.E., D.WRE, CFM wrote:
> On Aug 5, 2010, at 5:20 PM, Duncan Murdoch wrote:
> 
>> On 05/08/2010 7:18 PM, David B. Thompson, Ph.D., P.E., D.WRE, CFM wrote:
>>> I'm running R 2.11.1 (MacBook Pro and OS X 10.6.4) and am trying to set a line type in the contour() function. What I did was:
>>> 
>>>> > u<-seq(0.005,0.995,0.005)
>>>> > v<-u
>>>> > p<-rep(0,length(u)*length(u))
>>>> > dim(p)<-c(length(v),length(v))
>>>> > for (i in 1:length(u)) for (j in 1:length(v)) p[i,j]<-u[i]^2+v[j]^2
>>>> > contour(u,v,p)
>>> 
>>> This produces a nice contour plot, as expected. However, if I execute:
>>> 
>>>> contour(u,v,p,lty=2)
>>> I still get a solid line drawn.
>>>
>> <snip>
>> A partial workaround:
>> x <- contourLines(u, v, p)
>> plot(range(u), range(v), type="n")
>> lapply(x, function(c) lines(c, lty=2)
> 
> 
> 
> Thanks for the quick response. I wondered about the grid size, but what I used is about what it takes to get a nice-looking curve. I could play with the grid size a bit to see if I can get a decent curve and a dashed line.
> 
> I wondered if it might be grid size. That was the only thing I could think of that was different between the two datasets. I should have followed my instinct and test it. Good call.
> 
> I can use the workaround, I think. I'll give that a go in the morning and hopefully get over my hump and deliver the analyses.

I've moved this from r-sig-mac to r-devel; it's not a Mac problem.  I've 
also added back a bit of the context for readers here.

A little bit more on this:  the problem only affects contour() when 
labels are being drawn, and only if method is set to "flattest" (the 
default) or "edge".  If you set drawLabels=FALSE or method="simple" you 
won't see it.  I think I should be able to fix this after all.

Duncan Murdoch


From murdoch.duncan at gmail.com  Fri Aug  6 14:28:47 2010
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 06 Aug 2010 08:28:47 -0400
Subject: [Rd] [R-SIG-Mac] Question about line type in contour() function
 (R 2.11.1)
In-Reply-To: <4C5BF771.7040009@gmail.com>
References: <06B4A3B2-0496-46D5-B34F-3E472A94EEC5@gmail.com>	<4C5B5540.3040406@gmail.com>
	<B7BDA7CF-1A40-4E03-A504-A29E4B543A5A@gmail.com>
	<4C5BF771.7040009@gmail.com>
Message-ID: <4C5BFFFF.6040804@gmail.com>

On 06/08/2010 7:52 AM, Duncan Murdoch wrote:
> On 05/08/2010 8:46 PM, David B. Thompson, Ph.D., P.E., D.WRE, CFM wrote:
>> On Aug 5, 2010, at 5:20 PM, Duncan Murdoch wrote:
>>
>>> On 05/08/2010 7:18 PM, David B. Thompson, Ph.D., P.E., D.WRE, CFM wrote:
>>>> I'm running R 2.11.1 (MacBook Pro and OS X 10.6.4) and am trying to set a line type in the contour() function. What I did was:
>>>>
>>>>>> u<-seq(0.005,0.995,0.005)
>>>>>> v<-u
>>>>>> p<-rep(0,length(u)*length(u))
>>>>>> dim(p)<-c(length(v),length(v))
>>>>>> for (i in 1:length(u)) for (j in 1:length(v)) p[i,j]<-u[i]^2+v[j]^2
>>>>>> contour(u,v,p)
>>>> This produces a nice contour plot, as expected. However, if I execute:
>>>>
>>>>> contour(u,v,p,lty=2)
>>>> I still get a solid line drawn.
>>>>
>>> <snip>
>>> A partial workaround:
>>> x <- contourLines(u, v, p)
>>> plot(range(u), range(v), type="n")
>>> lapply(x, function(c) lines(c, lty=2)
>>
>>
>> Thanks for the quick response. I wondered about the grid size, but what I used is about what it takes to get a nice-looking curve. I could play with the grid size a bit to see if I can get a decent curve and a dashed line.
>>
>> I wondered if it might be grid size. That was the only thing I could think of that was different between the two datasets. I should have followed my instinct and test it. Good call.
>>
>> I can use the workaround, I think. I'll give that a go in the morning and hopefully get over my hump and deliver the analyses.
> 
> I've moved this from r-sig-mac to r-devel; it's not a Mac problem.  I've 
> also added back a bit of the context for readers here.
> 
> A little bit more on this:  the problem only affects contour() when 
> labels are being drawn, and only if method is set to "flattest" (the 
> default) or "edge".  If you set drawLabels=FALSE or method="simple" you 
> won't see it.  I think I should be able to fix this after all.


Fixed now in R-patched and R-devel.

Duncan Murdoch


From rvaradhan at jhmi.edu  Fri Aug  6 16:48:04 2010
From: rvaradhan at jhmi.edu (Ravi Varadhan)
Date: Fri, 6 Aug 2010 10:48:04 -0400
Subject: [Rd] on the optim function
In-Reply-To: <7E004A07-03E1-4DED-A506-6C564EDB6BD8@gmail.com>
References: <7E004A07-03E1-4DED-A506-6C564EDB6BD8@gmail.com>
Message-ID: <001001cb3576$6034d7c0$209e8740$@edu>

Christophe,

This is a good question. It is conventional that most classical optimization
schemes (e.g. gradient-descent, quasi-Newton, and Newton-type) methods do
not return the "iteration" counter, but they do return the number of times
the gradient is computed.  These two are equivalent in the sense that the
gradient is evaluated once and only once during each iteration.  However,
the optimization codes always return the number of times the objective
function is evaluated.  This is widely considered to be the most appropriate
metric for measuring the computational effort of the algorithm.  The reason
is this.  The actual step length of an algorithm for each iteration depends
upon a "safe-guard" rule such as a line-search or a trust-region approach.
These safe-guard rules might evaluate the function multiple times to ensure
that the step length is "safe", for example, that it results in a reduction
of the function value.  Therefore, just monitoring the number of iterations
does not give you an accurate picture of the computational effort expended
by the algorithm.

Another point worth noting is that when an analytic gradient function is not
specified by the user, most (if not all) gradient-based algorithms use a
numerical approximation for the gradient.  This is typically done using a
first-order forward difference scheme.  This involves `p' evaluations of the
objective function, when you have a p-dimensional parameter vector to be
optimized.  This greatly increases the computational effort, much more than
that involved in safe-guarding.  Therefore, it is always a good idea to
specify analytic gradient, whenever possible.

Here is an example (based on that from optim's help page) that illustrates
the equivalency of # iterations and gradient count:

> optim(c(-1.2,1), fr, grr, method="CG", control=list(maxit=50))
$par
[1] -0.9083598  0.8345932

$value
[1] 3.636803

$counts
function gradient 
     202       51 

$convergence
[1] 1

$message
NULL


> optim(c(-1.2,1), fr, method="CG", control=list(maxit=75))$counts
function gradient 
     304       76 
>
Note that when I specified `maxit = 50', I got gradient counts = 51, and
when I specified maxit=75, I got gradient counts = 76.

But look at the difference in function counts.  There is 102 more function
evals, even though I did only 25 more iterations.  This tells you that the
function is evaluated more than once during an iteration.

The above is also true for BFGS, L-BFGS-B.  You can check it for yourself.


Hope this helps,
Ravi.


-----Original Message-----
From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org]
On Behalf Of Christophe Dutang
Sent: Friday, August 06, 2010 5:15 AM
To: r-devel at r-project.org
Subject: [Rd] on the optim function

Dear useRs,

I have just discovered that the R optim function does not return the number
of iterations. 

I still wonder why line 632-634 of optim C, the iter variable is not
returned (for the BFGS method for example) ? 

Is there any trick to compute the iteration number with function call
number?

Kind regards

Christophe

--
Christophe Dutang
Ph.D. student at ISFA, Lyon, France
website: http://dutangc.free.fr

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel


From dutangc at gmail.com  Fri Aug  6 17:25:02 2010
From: dutangc at gmail.com (Christophe Dutang)
Date: Fri, 6 Aug 2010 17:25:02 +0200
Subject: [Rd] on the optim function
In-Reply-To: <001001cb3576$6034d7c0$209e8740$@edu>
References: <7E004A07-03E1-4DED-A506-6C564EDB6BD8@gmail.com>
	<001001cb3576$6034d7c0$209e8740$@edu>
Message-ID: <E580D44A-FBA7-47D9-9C31-12C6A2D49F5A@gmail.com>

Thanks Ravi for your answer. You convince me!

Regards

Christophe

Le 6 ao?t 2010 ? 16:48, Ravi Varadhan a ?crit :

> Christophe,
> 
> This is a good question. It is conventional that most classical optimization
> schemes (e.g. gradient-descent, quasi-Newton, and Newton-type) methods do
> not return the "iteration" counter, but they do return the number of times
> the gradient is computed.  These two are equivalent in the sense that the
> gradient is evaluated once and only once during each iteration.  However,
> the optimization codes always return the number of times the objective
> function is evaluated.  This is widely considered to be the most appropriate
> metric for measuring the computational effort of the algorithm.  The reason
> is this.  The actual step length of an algorithm for each iteration depends
> upon a "safe-guard" rule such as a line-search or a trust-region approach.
> These safe-guard rules might evaluate the function multiple times to ensure
> that the step length is "safe", for example, that it results in a reduction
> of the function value.  Therefore, just monitoring the number of iterations
> does not give you an accurate picture of the computational effort expended
> by the algorithm.
> 
> Another point worth noting is that when an analytic gradient function is not
> specified by the user, most (if not all) gradient-based algorithms use a
> numerical approximation for the gradient.  This is typically done using a
> first-order forward difference scheme.  This involves `p' evaluations of the
> objective function, when you have a p-dimensional parameter vector to be
> optimized.  This greatly increases the computational effort, much more than
> that involved in safe-guarding.  Therefore, it is always a good idea to
> specify analytic gradient, whenever possible.
> 
> Here is an example (based on that from optim's help page) that illustrates
> the equivalency of # iterations and gradient count:
> 
>> optim(c(-1.2,1), fr, grr, method="CG", control=list(maxit=50))
> $par
> [1] -0.9083598  0.8345932
> 
> $value
> [1] 3.636803
> 
> $counts
> function gradient 
>     202       51 
> 
> $convergence
> [1] 1
> 
> $message
> NULL
> 
> 
>> optim(c(-1.2,1), fr, method="CG", control=list(maxit=75))$counts
> function gradient 
>     304       76 
>> 
> Note that when I specified `maxit = 50', I got gradient counts = 51, and
> when I specified maxit=75, I got gradient counts = 76.
> 
> But look at the difference in function counts.  There is 102 more function
> evals, even though I did only 25 more iterations.  This tells you that the
> function is evaluated more than once during an iteration.
> 
> The above is also true for BFGS, L-BFGS-B.  You can check it for yourself.
> 
> 
> Hope this helps,
> Ravi.
> 
> 
> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org]
> On Behalf Of Christophe Dutang
> Sent: Friday, August 06, 2010 5:15 AM
> To: r-devel at r-project.org
> Subject: [Rd] on the optim function
> 
> Dear useRs,
> 
> I have just discovered that the R optim function does not return the number
> of iterations. 
> 
> I still wonder why line 632-634 of optim C, the iter variable is not
> returned (for the BFGS method for example) ? 
> 
> Is there any trick to compute the iteration number with function call
> number?
> 
> Kind regards
> 
> Christophe
> 
> --
> Christophe Dutang
> Ph.D. student at ISFA, Lyon, France
> website: http://dutangc.free.fr
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 

--
Christophe Dutang
Ph.D. student at ISFA, Lyon, France
website: http://dutangc.free.fr


From ncrookston at fs.fed.us  Fri Aug  6 17:35:09 2010
From: ncrookston at fs.fed.us (Nicholas L Crookston)
Date: Fri, 6 Aug 2010 08:35:09 -0700
Subject: [Rd] rbind on data.frame that contains a column that is also a
 data.frame
In-Reply-To: <1281046907919-2315682.post@n4.nabble.com>
Message-ID: <OF47BAAF11.3884251F-ON88257776.007E0282-88257777.0055A04E@fs.fed.us>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100806/6792a305/attachment.pl>

From wdunlap at tibco.com  Fri Aug  6 18:34:22 2010
From: wdunlap at tibco.com (William Dunlap)
Date: Fri, 6 Aug 2010 09:34:22 -0700
Subject: [Rd] rbind on data.frame that contains a column that is also a
	data.frame
In-Reply-To: <OF47BAAF11.3884251F-ON88257776.007E0282-88257777.0055A04E@fs.fed.us>
References: <1281046907919-2315682.post@n4.nabble.com>
	<OF47BAAF11.3884251F-ON88257776.007E0282-88257777.0055A04E@fs.fed.us>
Message-ID: <77EB52C6DD32BA4D87471DCD70C8D70003484BC1@NA-PA-VBE03.na.tibco.com>

> -----Original Message-----
> From: r-devel-bounces at r-project.org 
> [mailto:r-devel-bounces at r-project.org] On Behalf Of Nicholas 
> L Crookston
> Sent: Friday, August 06, 2010 8:35 AM
> To: Michael Lachmann
> Cc: r-devel-bounces at r-project.org; r-devel at r-project.org
> Subject: Re: [Rd] rbind on data.frame that contains a column 
> that is also a data.frame
> 
> OK...I'll put in my 2 cents worth. 
> 
> It seems to me that the problem is with this line:
> 
> b$a=a , where "s" is something other than a vector with
> length equal to nrow(b).
> 
> I had no idea that a dataframe could hold a dataframe. It is not just
> rbind(b,b) that fails, apply(b,1,sum) fails and so does plot(b). I'll 
> bet other R commands fail as well.
> 
> My point of view is that a dataframe is a list of vectors
> of equal length and various types (this is not exactly what the help
> page says, but it is what it suggests to me). 
> 
> Hum, I wonder how much code is based on the idea that a 
> dataframe can hold 
> a dataframe.

I used to think that non-vectors in data.frames were
pretty rare things but when I started looking into
the details of the modelling code I discovered that
matrices in data.frames are common.  E.g.,
  > library(splines)
  > sapply(model.frame(data=mtcars, mpg~ns(hp)+poly(disp,2)), class)
  $mpg
  [1] "numeric"
  
  $`ns(hp)`
  [1] "ns"     "basis"  "matrix"
  
  $`poly(disp, 2)`
  [1] "poly"   "matrix"
You may not see these things because you don't call model.frame()
directly, but most modelling functions (e.g., lm() and glm())
do call it and use the grouping provided by the matrices to encode
how the columns of the design matrix are related to one another.

If matrices are allowed, shouldn't data.frames be allowed as well?

Bill Dunlap
Spotfire, TIBCO Software
wdunlap tibco.com 

> 15 years of using R just isn't enough! But, I can 
> say that not 
> one
> line of code I've written expects a dataframe to hold a dataframe.
> 
> > Hi,
> 
> > The following was already a topic on r-help, but after 
> understanding 
> what is
> > going on, I think it fits better in r-devel.
> 
> > The problem is this:
> > When a data.frame has another data.frame in it, rbind 
> doesn't work well.
> > Here is an example:
> > --
> > > a=data.frame(x=1:10,y=1:10)
> > > b=data.frame(z=1:10)
> > > b$a=a
> > > b
> > z a.x a.y
> > 1   1   1   1
> > 2   2   2   2
> > 3   3   3   3
> > 4   4   4   4
> > 5   5   5   5
> > 6   6   6   6
> > 7   7   7   7
> > 8   8   8   8
> > 9   9   9   9
> > 10 10  10  10
> > > rbind(b,b)
> > Error in `row.names<-.data.frame`(`*tmp*`, value = c("1", 
> "2", "3", "4", 
>  :
> > duplicate 'row.names' are not allowed
> > In addition: Warning message:
> > non-unique values when setting 'row.names': ?1?, ?10?, ?2?, 
> ?3?, ?4?, 
> ?5?,
> > ?6?, ?7?, ?8?, ?9?
> > --
> 
> > 
> > Looking at the code of rbind.data.frame, the error comes from the
> > lines:
> > --
> > xij <- xi[[j]]
> > if (has.dim[jj]) {
> > value[[jj]][ri, ] <- xij
> > rownames(value[[jj]])[ri] <- rownames(xij)   # <--  problem is here
> > }
> > --
> > if the rownames() line is dropped, all works well. What this line
> > tries to do is to join the rownames of internal elements of the
> > data.frames I try to rbind. So the result, in my case should have a
> > column 'a', whose rownames are the rownames of the original 
> column 'a'. 
> It
> > isn't totally clear to me why this is needed. When would a 
> data.frame
> > have different rownames on the inside vs. the outside?
> 
> > Notice also that rbind takes into account whether the 
> rownames of the
> > data.frames to be joined are simply 1:n, or they are something else.
> > If they are 1:n, then the result will have rownames 1:(n+m). If not,
> > then the rownames might be kept.
> 
> > I think, more consistent would be to replace the lines above with
> > something like:
> > if (has.dim[jj]) {
> > value[[jj]][ri, ] <- xij
> > rnj = rownames(value[[jj]])
> > rnj[ri] = rownames(xij)
> > rnj = make.unique(as.character(unlist(rnj)), sep = "")
> > rownames(value[[jj]]) <- rnj
> > }
> 
> > In this case, the rownames of inside elements will also be 
> joined, but
> > in case they overlap, they will be made unique - just as 
> they are for
> > the overall result of rbind. A side effect here would be that the
> > rownames of matrices will also be made unique, which till now didn't
> > happen, and which also doesn't happen when one rbinds matrices that
> > have rownames. So it would be better to test above if we are dealing
> > with a matrix or a data.frame.
> 
> > But most people don't have different rownames inside and outside.
> > Maybe it would be best to add a flag as to whether you care or don't
> > care about the rownames of internal data.frames...
> 
> > But maybe data.frames aren't meant to contain other data.frames?
> 
> > If instead I do
> > b=data.frame( z=1:10, a=a)
> > then rbind(b,b) works well. In this case the data.frame was 
> converted to 
> its
> > columns. Maybe
> > b$a = a
> > should do the same?
> 
> > Michael
> > --
> > View this message in context: http://r.789695.n4.nabble.com/rbind-
> > on-data-frame-that-contains-a-column-that-is-also-a-data-frame-
> > tp2315682p2315682.html
> > Sent from the R devel mailing list archive at Nabble.com.
> 
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


From nashjc at uottawa.ca  Fri Aug  6 22:54:41 2010
From: nashjc at uottawa.ca (Prof. John C Nash)
Date: Fri, 06 Aug 2010 16:54:41 -0400
Subject: [Rd] iteration count in optim()
In-Reply-To: <mailman.17.1281088807.25900.r-devel@r-project.org>
References: <mailman.17.1281088807.25900.r-devel@r-project.org>
Message-ID: <4C5C7691.2080700@uottawa.ca>


> Date: Fri, 6 Aug 2010 11:14:37 +0200
> From: Christophe Dutang <dutangc at gmail.com>
> To: r-devel at r-project.org
> Subject: [Rd] on the optim function
> Message-ID: <7E004A07-03E1-4DED-A506-6C564EDB6BD8 at gmail.com>
> Content-Type: text/plain; charset=us-ascii
>
> Dear useRs,
>
> I have just discovered that the R optim function does not return the number of iterations.
>
> I still wonder why line 632-634 of optim C, the iter variable is not returned (for the BFGS method for example) ?
>
> Is there any trick to compute the iteration number with function call number?
>
> Kind regards
>
> Christophe
>
> --
> Christophe Dutang
> Ph.D. student at ISFA, Lyon, France
> website: http://dutangc.free.fr

For BFGS the number of iterations is the number of gradient evaluations i.e., counts[2]

For most of the optimization tools available for R (not just in optim), these counts are a 
nightmare for developers who want some consistent naming and meaning, as Ravi Varadhan and 
I can attest in our efforts to build the optimx() wrapper. It can also be debated for some 
methods what constitutes an "iteration".

Best, JN


From tuechler at gmx.at  Sat Aug  7 02:01:24 2010
From: tuechler at gmx.at (Heinz Tuechler)
Date: Sat, 07 Aug 2010 01:01:24 +0100
Subject: [Rd] rbind on data.frame that contains a column that is also a
 data.frame
In-Reply-To: <77EB52C6DD32BA4D87471DCD70C8D70003484BC1@NA-PA-VBE03.na.ti
	bco.com>
References: <1281046907919-2315682.post@n4.nabble.com>
	<OF47BAAF11.3884251F-ON88257776.007E0282-88257777.0055A04E@fs.fed.us>
	<77EB52C6DD32BA4D87471DCD70C8D70003484BC1@NA-PA-VBE03.na.tibco.com>
Message-ID: <201008062302.o76N250r031098@hypatia.math.ethz.ch>

Also Surv objects are matrices and they share the same problem when 
rbind-ing data.frames.
If contained in a data.frame, Surv objects loose their class after 
rbind and therefore do not more represent Surv objects afterwards.
Using rbind with Surv objects outside of data.frames shows a similar 
problem, but not the same column names.
In conclusion, yes, matrices are common in data.frames, but not 
without problems.

Heinz

## example
library(survival)
## create example data
starttime <- rep(0,5)
stoptime  <- 1:5
event     <- c(1,0,1,1,1)
group     <- c(1,1,1,2,2)

## build Surv object
survobj <- Surv(starttime, stoptime, event)

## build data.frame with Surv object
df.test <- data.frame(survobj, group)
df.test

## rbind data.frames
rbind(df.test, df.test)

## rbind Surv objects
rbind(survobj, survobj)



At 06.08.2010 09:34 -0700, William Dunlap wrote:
> > -----Original Message-----
> > From: r-devel-bounces at r-project.org
> > [mailto:r-devel-bounces at r-project.org] On Behalf Of Nicholas
> > L Crookston
> > Sent: Friday, August 06, 2010 8:35 AM
> > To: Michael Lachmann
> > Cc: r-devel-bounces at r-project.org; r-devel at r-project.org
> > Subject: Re: [Rd] rbind on data.frame that contains a column
> > that is also a data.frame
> >
> > OK...I'll put in my 2 cents worth.
> >
> > It seems to me that the problem is with this line:
> >
> > b$a=a , where "s" is something other than a vector with
> > length equal to nrow(b).
> >
> > I had no idea that a dataframe could hold a dataframe. It is not just
> > rbind(b,b) that fails, apply(b,1,sum) fails and so does plot(b). I'll
> > bet other R commands fail as well.
> >
> > My point of view is that a dataframe is a list of vectors
> > of equal length and various types (this is not exactly what the help
> > page says, but it is what it suggests to me).
> >
> > Hum, I wonder how much code is based on the idea that a
> > dataframe can hold
> > a dataframe.
>
>I used to think that non-vectors in data.frames were
>pretty rare things but when I started looking into
>the details of the modelling code I discovered that
>matrices in data.frames are common.  E.g.,
>   > library(splines)
>   > sapply(model.frame(data=mtcars, mpg~ns(hp)+poly(disp,2)), class)
>   $mpg
>   [1] "numeric"
>
>   $`ns(hp)`
>   [1] "ns"     "basis"  "matrix"
>
>   $`poly(disp, 2)`
>   [1] "poly"   "matrix"
>You may not see these things because you don't call model.frame()
>directly, but most modelling functions (e.g., lm() and glm())
>do call it and use the grouping provided by the matrices to encode
>how the columns of the design matrix are related to one another.
>
>If matrices are allowed, shouldn't data.frames be allowed as well?
>
>Bill Dunlap
>Spotfire, TIBCO Software
>wdunlap tibco.com
>
> > 15 years of using R just isn't enough! But, I can
> > say that not
> > one
> > line of code I've written expects a dataframe to hold a dataframe.
> >
> > > Hi,
> >
> > > The following was already a topic on r-help, but after
> > understanding
> > what is
> > > going on, I think it fits better in r-devel.
> >
> > > The problem is this:
> > > When a data.frame has another data.frame in it, rbind
> > doesn't work well.
> > > Here is an example:
> > > --
> > > > a=data.frame(x=1:10,y=1:10)
> > > > b=data.frame(z=1:10)
> > > > b$a=a
> > > > b
> > > z a.x a.y
> > > 1   1   1   1
> > > 2   2   2   2
> > > 3   3   3   3
> > > 4   4   4   4
> > > 5   5   5   5
> > > 6   6   6   6
> > > 7   7   7   7
> > > 8   8   8   8
> > > 9   9   9   9
> > > 10 10  10  10
> > > > rbind(b,b)
> > > Error in `row.names<-.data.frame`(`*tmp*`, value = c("1",
> > "2", "3", "4",
> >  :
> > > duplicate 'row.names' are not allowed
> > > In addition: Warning message:
> > > non-unique values when setting 'row.names': ?1?, ?10?, ?2?,
> > ?3?, ?4?,
> > ?5?,
> > > ?6?, ?7?, ?8?, ?9?
> > > --
> >
> > >
> > > Looking at the code of rbind.data.frame, the error comes from the
> > > lines:
> > > --
> > > xij <- xi[[j]]
> > > if (has.dim[jj]) {
> > > value[[jj]][ri, ] <- xij
> > > rownames(value[[jj]])[ri] <- rownames(xij)   # <--  problem is here
> > > }
> > > --
> > > if the rownames() line is dropped, all works well. What this line
> > > tries to do is to join the rownames of internal elements of the
> > > data.frames I try to rbind. So the result, in my case should have a
> > > column 'a', whose rownames are the rownames of the original
> > column 'a'.
> > It
> > > isn't totally clear to me why this is needed. When would a
> > data.frame
> > > have different rownames on the inside vs. the outside?
> >
> > > Notice also that rbind takes into account whether the
> > rownames of the
> > > data.frames to be joined are simply 1:n, or they are something else.
> > > If they are 1:n, then the result will have rownames 1:(n+m). If not,
> > > then the rownames might be kept.
> >
> > > I think, more consistent would be to replace the lines above with
> > > something like:
> > > if (has.dim[jj]) {
> > > value[[jj]][ri, ] <- xij
> > > rnj = rownames(value[[jj]])
> > > rnj[ri] = rownames(xij)
> > > rnj = make.unique(as.character(unlist(rnj)), sep = "")
> > > rownames(value[[jj]]) <- rnj
> > > }
> >
> > > In this case, the rownames of inside elements will also be
> > joined, but
> > > in case they overlap, they will be made unique - just as
> > they are for
> > > the overall result of rbind. A side effect here would be that the
> > > rownames of matrices will also be made unique, which till now didn't
> > > happen, and which also doesn't happen when one rbinds matrices that
> > > have rownames. So it would be better to test above if we are dealing
> > > with a matrix or a data.frame.
> >
> > > But most people don't have different rownames inside and outside.
> > > Maybe it would be best to add a flag as to whether you care or don't
> > > care about the rownames of internal data.frames...
> >
> > > But maybe data.frames aren't meant to contain other data.frames?
> >
> > > If instead I do
> > > b=data.frame( z=1:10, a=a)
> > > then rbind(b,b) works well. In this case the data.frame was
> > converted to
> > its
> > > columns. Maybe
> > > b$a = a
> > > should do the same?
> >
> > > Michael
> > > --
> > > View this message in context: http://r.789695.n4.nabble.com/rbind-
> > > on-data-frame-that-contains-a-column-that-is-also-a-data-frame-
> > > tp2315682p2315682.html
> > > Sent from the R devel mailing list archive at Nabble.com.
> >
> > > ______________________________________________
> > > R-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-devel
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
>
>______________________________________________
>R-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel


From maechler at stat.math.ethz.ch  Sat Aug  7 13:03:06 2010
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Sat, 7 Aug 2010 13:03:06 +0200
Subject: [Rd] rbind on data.frame that contains a column that is also a
 data.frame
In-Reply-To: <201008062302.o76N250r031098@hypatia.math.ethz.ch>
References: <1281046907919-2315682.post@n4.nabble.com>
	<OF47BAAF11.3884251F-ON88257776.007E0282-88257777.0055A04E@fs.fed.us>
	<77EB52C6DD32BA4D87471DCD70C8D70003484BC1@NA-PA-VBE03.na.tibco.com>
	<201008062302.o76N250r031098@hypatia.math.ethz.ch>
Message-ID: <19549.15722.489388.725040@cmath-5.math.ethz.ch>

>>>>> Heinz Tuechler <tuechler at gmx.at>
>>>>>     on Sat, 07 Aug 2010 01:01:24 +0100 writes:

    > Also Surv objects are matrices and they share the same problem when 
    > rbind-ing data.frames.
    > If contained in a data.frame, Surv objects loose their class after 
    > rbind and therefore do not more represent Surv objects afterwards.
    > Using rbind with Surv objects outside of data.frames shows a similar 
    > problem, but not the same column names.
    > In conclusion, yes, matrices are common in data.frames, but not 
    > without problems.

My understanding (> 20 yr long S and R experience) has been that
a dataframe definitely can have matrix-like "components",
and as Bill Dunlap (with equal S & R experience) has just
explained, that's actually more common than you have thought.
To have *data frame*s instead of simple matrices, should be much
less common, I'm not sure if it's a good idea.

But getting back to 'matrices',
I think they should work "without problems", at least for basic
R operations such as rbind().

I don't have time to analyze the Surv - example below,
but  at the moment think, that we'd be interested in 
"fixing" the problems..

Martin Maechler, ETH Zurich

    > Heinz

    > ## example
    > library(survival)
    > ## create example data
    > starttime <- rep(0,5)
    > stoptime  <- 1:5
    > event     <- c(1,0,1,1,1)
    > group     <- c(1,1,1,2,2)

    > ## build Surv object
    > survobj <- Surv(starttime, stoptime, event)

    > ## build data.frame with Surv object
    > df.test <- data.frame(survobj, group)
    > df.test

    > ## rbind data.frames
    > rbind(df.test, df.test)

    > ## rbind Surv objects
    > rbind(survobj, survobj)



    > At 06.08.2010 09:34 -0700, William Dunlap wrote:
    >> > -----Original Message-----
    >> > From: r-devel-bounces at r-project.org
    >> > [mailto:r-devel-bounces at r-project.org] On Behalf Of Nicholas
    >> > L Crookston
    >> > Sent: Friday, August 06, 2010 8:35 AM
    >> > To: Michael Lachmann
    >> > Cc: r-devel-bounces at r-project.org; r-devel at r-project.org
    >> > Subject: Re: [Rd] rbind on data.frame that contains a column
    >> > that is also a data.frame
    >> >
    >> > OK...I'll put in my 2 cents worth.
    >> >
    >> > It seems to me that the problem is with this line:
    >> >
    >> > b$a=a , where "s" is something other than a vector with
    >> > length equal to nrow(b).
    >> >
    >> > I had no idea that a dataframe could hold a dataframe. It is not just
    >> > rbind(b,b) that fails, apply(b,1,sum) fails and so does plot(b). I'll
    >> > bet other R commands fail as well.
    >> >
    >> > My point of view is that a dataframe is a list of vectors
    >> > of equal length and various types (this is not exactly what the help
    >> > page says, but it is what it suggests to me).
    >> >
    >> > Hum, I wonder how much code is based on the idea that a
    >> > dataframe can hold
    >> > a dataframe.
    >> 
    >> I used to think that non-vectors in data.frames were
    >> pretty rare things but when I started looking into
    >> the details of the modelling code I discovered that
    >> matrices in data.frames are common.  E.g.,
    >> > library(splines)
    >> > sapply(model.frame(data=mtcars, mpg~ns(hp)+poly(disp,2)), class)
    >> $mpg
    >> [1] "numeric"
    >> 
    >> $`ns(hp)`
    >> [1] "ns"     "basis"  "matrix"
    >> 
    >> $`poly(disp, 2)`
    >> [1] "poly"   "matrix"
    >> You may not see these things because you don't call model.frame()
    >> directly, but most modelling functions (e.g., lm() and glm())
    >> do call it and use the grouping provided by the matrices to encode
    >> how the columns of the design matrix are related to one another.
    >> 
    >> If matrices are allowed, shouldn't data.frames be allowed as well?
    >> 
    >> Bill Dunlap
    >> Spotfire, TIBCO Software
    >> wdunlap tibco.com
    >> 
    >> > 15 years of using R just isn't enough! But, I can
    >> > say that not
    >> > one
    >> > line of code I've written expects a dataframe to hold a dataframe.
    >> >
    >> > > Hi,
    >> >
    >> > > The following was already a topic on r-help, but after
    >> > understanding
    >> > what is
    >> > > going on, I think it fits better in r-devel.
    >> >
    >> > > The problem is this:
    >> > > When a data.frame has another data.frame in it, rbind
    >> > doesn't work well.
    >> > > Here is an example:
    >> > > --
    >> > > > a=data.frame(x=1:10,y=1:10)
    >> > > > b=data.frame(z=1:10)
    >> > > > b$a=a
    >> > > > b
    >> > > z a.x a.y
    >> > > 1   1   1   1
    >> > > 2   2   2   2
    >> > > 3   3   3   3
    >> > > 4   4   4   4
    >> > > 5   5   5   5
    >> > > 6   6   6   6
    >> > > 7   7   7   7
    >> > > 8   8   8   8
    >> > > 9   9   9   9
    >> > > 10 10  10  10
    >> > > > rbind(b,b)
    >> > > Error in `row.names<-.data.frame`(`*tmp*`, value = c("1",
    >> > "2", "3", "4",
    >> >  :
    >> > > duplicate 'row.names' are not allowed
    >> > > In addition: Warning message:
    >> > > non-unique values when setting 'row.names': ?1?, ?10?, ?2?,
    >> > ?3?, ?4?,
    >> > ?5?,
    >> > > ?6?, ?7?, ?8?, ?9?
    >> > > --
    >> >
    >> > >
    >> > > Looking at the code of rbind.data.frame, the error comes from the
    >> > > lines:
    >> > > --
    >> > > xij <- xi[[j]]
    >> > > if (has.dim[jj]) {
    >> > > value[[jj]][ri, ] <- xij
    >> > > rownames(value[[jj]])[ri] <- rownames(xij)   # <--  problem is here
    >> > > }
    >> > > --
    >> > > if the rownames() line is dropped, all works well. What this line
    >> > > tries to do is to join the rownames of internal elements of the
    >> > > data.frames I try to rbind. So the result, in my case should have a
    >> > > column 'a', whose rownames are the rownames of the original
    >> > column 'a'.
    >> > It
    >> > > isn't totally clear to me why this is needed. When would a
    >> > data.frame
    >> > > have different rownames on the inside vs. the outside?
    >> >
    >> > > Notice also that rbind takes into account whether the
    >> > rownames of the
    >> > > data.frames to be joined are simply 1:n, or they are something else.
    >> > > If they are 1:n, then the result will have rownames 1:(n+m). If not,
    >> > > then the rownames might be kept.
    >> >
    >> > > I think, more consistent would be to replace the lines above with
    >> > > something like:
    >> > > if (has.dim[jj]) {
    >> > > value[[jj]][ri, ] <- xij
    >> > > rnj = rownames(value[[jj]])
    >> > > rnj[ri] = rownames(xij)
    >> > > rnj = make.unique(as.character(unlist(rnj)), sep = "")
    >> > > rownames(value[[jj]]) <- rnj
    >> > > }
    >> >
    >> > > In this case, the rownames of inside elements will also be
    >> > joined, but
    >> > > in case they overlap, they will be made unique - just as
    >> > they are for
    >> > > the overall result of rbind. A side effect here would be that the
    >> > > rownames of matrices will also be made unique, which till now didn't
    >> > > happen, and which also doesn't happen when one rbinds matrices that
    >> > > have rownames. So it would be better to test above if we are dealing
    >> > > with a matrix or a data.frame.
    >> >
    >> > > But most people don't have different rownames inside and outside.
    >> > > Maybe it would be best to add a flag as to whether you care or don't
    >> > > care about the rownames of internal data.frames...
    >> >
    >> > > But maybe data.frames aren't meant to contain other data.frames?
    >> >
    >> > > If instead I do
    >> > > b=data.frame( z=1:10, a=a)
    >> > > then rbind(b,b) works well. In this case the data.frame was
    >> > converted to
    >> > its
    >> > > columns. Maybe
    >> > > b$a = a
    >> > > should do the same?
    >> >
    >> > > Michael
    >> > > --
    >> > > View this message in context: http://r.789695.n4.nabble.com/rbind-
    >> > > on-data-frame-that-contains-a-column-that-is-also-a-data-frame-
    >> > > tp2315682p2315682.html
    >> > > Sent from the R devel mailing list archive at Nabble.com.
    >> >
    >> > > ______________________________________________
    >> > > R-devel at r-project.org mailing list
    >> > > https://stat.ethz.ch/mailman/listinfo/r-devel
    >> >       [[alternative HTML version deleted]]
    >> >
    >> > ______________________________________________
    >> > R-devel at r-project.org mailing list
    >> > https://stat.ethz.ch/mailman/listinfo/r-devel
    >> >
    >> 
    >> ______________________________________________
    >> R-devel at r-project.org mailing list
    >> https://stat.ethz.ch/mailman/listinfo/r-devel

    > ______________________________________________
    > R-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-devel


From rafael.laboissiere at inserm.fr  Sat Aug  7 13:07:40 2010
From: rafael.laboissiere at inserm.fr (Rafael Laboissiere)
Date: Sat, 7 Aug 2010 13:07:40 +0200
Subject: [Rd] readline operate-and-get-next
Message-ID: <20100807110740.GB13899@pc049-u864.lyon.inserm.fr>

Both Bash and Octave have a nifty addition to the readline library called
"operate-and-get-next", bound to "C-o".  This function accepts the
current line for execution and fetch the next line relative to the
current line from the history for editing (see
http://www.faqs.org/docs/bashman/bashref_101.html).

This feature has a huge impact in my productivity using Bash and Octave
interactively, since it avoids those numerous arrow key strokes in order
to rerun a previous block of commands. 

I looked at the Bash sources and it does not seem too complicate to
implement.  Octave has borrowed practically the same code from Bash.
Before I start looking at the R code, I would like to know whether the R
developers had already planned to include the operate-and-get-next
feature into R.

Best regards,

Rafael Laboissiere


From Cyrix333 at gmx.net  Sat Aug  7 18:23:01 2010
From: Cyrix333 at gmx.net (_)
Date: Sat, 07 Aug 2010 18:23:01 +0200
Subject: [Rd] onClose - device notification
Message-ID: <4C5D8865.2000402@gmx.net>

  Hi all,
is it possible - and if so how, to receive a notification when a device 
is closed ?
In other words, can I set an trigger at a device window ?
( not tcltk, the windows window )

Thank you.

Greetings


From mhsatman at yahoo.com  Sun Aug  8 18:57:35 2010
From: mhsatman at yahoo.com (bytecode)
Date: Sun, 8 Aug 2010 09:57:35 -0700 (PDT)
Subject: [Rd] Call R function from Java
In-Reply-To: <1268828121679-1596298.post@n4.nabble.com>
References: <20060707125037.77447.qmail@web53104.mail.yahoo.com>
	<1B6A26B0-3CD6-4B65-8A0E-FE780D06B231@r-project.org>
	<f20482fc0607071105h618f15aft980a3b09d2e4c267@mail.gmail.com>
	<1D19ABC5-BD9A-4280-BD16-383DD06B862F@r-project.org>
	<1268828121680-911744.post@n4.nabble.com>
	<1268828121679-1596298.post@n4.nabble.com>
Message-ID: <1281286655607-2317844.post@n4.nabble.com>


RCaller is another way for calling r from java without JNI.
You can try and develop RCaller with GPL license.
http://www.mhsatman.com/rcaller

-- 
View this message in context: http://r.789695.n4.nabble.com/Call-R-function-from-Java-tp911738p2317844.html
Sent from the R devel mailing list archive at Nabble.com.


From rafael.laboissiere at inserm.fr  Sun Aug  8 20:55:29 2010
From: rafael.laboissiere at inserm.fr (Rafael Laboissiere)
Date: Sun, 8 Aug 2010 20:55:29 +0200
Subject: [Rd] readline operate-and-get-next
In-Reply-To: <20100807110740.GB13899@pc049-u864.lyon.inserm.fr>
References: <20100807110740.GB13899@pc049-u864.lyon.inserm.fr>
Message-ID: <20100808185529.GC2603@pc049-u864.lyon.inserm.fr>

Okay, I could not refrain myself and implemented the change in
src/unix/sys-std.c.  The patch is attached below.  I tested it in the
2.11.1 source and it worked fine.  At any rate, the patch applies cleanly
to the SVN source.

Three notes about this patch:

1. The code is taken from the bash source (bashline.c) with minimal
   changes.
   
2. The changes are put inside #ifdef HAVE_READLINE_HISTORY_H, because
   it uses history related functions.
   
3. In the call to rl_add_defun, the operate-and-get-next function is
   bound to C-o.  This is not the behavior of Bash and Octave, which
   depends on the user to define the key binding in ~/.inputrc.  To
   mimic this behavior, the code should be rather:

   rl_add_defun ("operate-and-get-next", operate_and_get_next, -1);


Best regards,

Rafael Laboissiere

* Rafael Laboissiere <rafael.laboissiere at inserm.fr> [2010-08-07 13:07]:

> Both Bash and Octave have a nifty addition to the readline library called
> "operate-and-get-next", bound to "C-o".  This function accepts the
> current line for execution and fetch the next line relative to the
> current line from the history for editing (see
> http://www.faqs.org/docs/bashman/bashref_101.html).
> 
> This feature has a huge impact in my productivity using Bash and Octave
> interactively, since it avoids those numerous arrow key strokes in order
> to rerun a previous block of commands. 
> 
> I looked at the Bash sources and it does not seem too complicate to
> implement.  Octave has borrowed practically the same code from Bash.
> Before I start looking at the R code, I would like to know whether the R
> developers had already planned to include the operate-and-get-next
> feature into R.
> 
> Best regards,
> 
> Rafael Laboissiere
-------------- next part --------------
A non-text attachment was scrubbed...
Name: operate-and-get-next.patch
Type: text/x-diff
Size: 1800 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100808/b0de6098/attachment.bin>

From p.murrell at auckland.ac.nz  Mon Aug  9 01:08:05 2010
From: p.murrell at auckland.ac.nz (Paul Murrell)
Date: Mon, 09 Aug 2010 11:08:05 +1200
Subject: [Rd] gpar fill and transparency on devices
In-Reply-To: <AANLkTinLv5dTEBRwtMbZr47f3qoTP3AYh-s9TM-AfaBb@mail.gmail.com>
References: <AANLkTi=KXs+c=A1sH_NSc2rD883tXt+8WgMwqHrVLr+r@mail.gmail.com>	<4C5B4137.3080801@auckland.ac.nz>
	<AANLkTinLv5dTEBRwtMbZr47f3qoTP3AYh-s9TM-AfaBb@mail.gmail.com>
Message-ID: <4C5F38D5.1030103@auckland.ac.nz>

Hi

On 6/08/2010 5:34 p.m., baptiste auguie wrote:
> Hi,
>
> Thanks for pointing this out. I do have the book, unfortunately I left
> it abroad this year. I would think that such brief mention in ?gpar
> could be useful (because that's where one first looks for gpar()
> defaults --- which are not listed).

Righto.  I've added a mention in ?gpar

Paul

> Best regards,
>
> baptiste
>
>
> On 6 August 2010 00:54, Paul Murrell<p.murrell at auckland.ac.nz>  wrote:
>> Hi
>>
>> The help page for "Working with Viewports" (e.g., pushViewport()) has a
>> brief mention when talking about the ROOT viewport ...
>>
>> "The viewport tree always has a single root viewport (created by the system)
>> which corresponds to the entire device (and default graphical parameter
>> settings)."
>>
>> ... which is a reasonable place for it because this is a feature of the gpar
>> of the ROOT viewport, not of gpars in general.  That mention might be a bit
>> hard to find, but a very similar statement is also made in the Section on
>> Viewports in the R Graphics book.  That in turn might be hard to find if you
>> don't have the book, but that chapter is also available online
>> (http://www.stat.auckland.ac.nz/~paul/RGraphics/chapter5.pdf)
>>
>> It might be worth adding something more explicit about this sort of gotcha
>> ...
>>
>> "Some devices have different default graphics parameter settings, so it is
>> not safe to assume that the ROOT viewport will be identical on different
>> devices."
>>
>> ... ?
>>
>> Paul
>>
>> On 5/08/2010 8:14 a.m., baptiste auguie wrote:
>>>
>>> Dear list,
>>>
>>> I'm puzzled by the graphical output in the following example,
>>>
>>> library(grid)
>>>
>>> foo<- function(){
>>>    grid.rect(gp=gpar(fill="black"))
>>>    print(get.gpar()$fill)
>>>    grid.rect(width=0.2,height=0.2)
>>> }
>>>
>>> png("test.png", bg = "transparent")
>>> foo()
>>> dev.off()
>>>
>>> png("test1.png", bg = "white")
>>> foo()
>>> dev.off()
>>>
>>>
>>> It seems that the default value of gpar()$fill is set according to the
>>> device background. I couldn't find this documented in ?gpar or in
>>> ?png, and it caused a rather puzzling bug in my code (the pdf() output
>>> was OK, whilst the png output (default bg to white) was seemingly
>>> empty because covered by a white rectangle.)
>>>
>>> Best regards,
>>>
>>> baptiste
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>> --
>> Dr Paul Murrell
>> Department of Statistics
>> The University of Auckland
>> Private Bag 92019
>> Auckland
>> New Zealand
>> 64 9 3737599 x85392
>> paul at stat.auckland.ac.nz
>> http://www.stat.auckland.ac.nz/~paul/
>>
>
>
>

-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/


From rafael.laboissiere at inserm.fr  Mon Aug  9 11:04:25 2010
From: rafael.laboissiere at inserm.fr (Rafael Laboissiere)
Date: Mon, 9 Aug 2010 11:04:25 +0200
Subject: [Rd] R readline not honoring RCustomCompletion
Message-ID: <20100809090425.GA9224@pc049-u864.lyon.inserm.fr>

This issue has been brought at least twice in R-help:

https://stat.ethz.ch/pipermail/r-help/2008-September/173828.html
https://stat.ethz.ch/pipermail/r-help/2009-May/197360.html

Looking at the source in src/unix/sys-std.c, it seems that the definition
of rl_readline_name as "RCustomCompletion" is made after the readline
library has been initialized and the ~/.inputrc file has been read.
Typing "C-x C-r" at the R prompt makes the definitions under "$if
RCustomCompletion" work, but this is not what one expects the R users to
do.

Attached below is the trivial patch that seems to fix the problem.

Best regards,

Rafael Laboissiere
-------------- next part --------------
A non-text attachment was scrubbed...
Name: honor-RCustomCompletion.patch
Type: text/x-diff
Size: 463 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100809/410f81de/attachment.bin>

From cbeleites at units.it  Mon Aug  9 14:20:39 2010
From: cbeleites at units.it (Claudia Beleites)
Date: Mon, 09 Aug 2010 14:20:39 +0200
Subject: [Rd] rbind on data.frame that contains a column that is also a
 data.frame
In-Reply-To: <19549.15722.489388.725040@cmath-5.math.ethz.ch>
References: <1281046907919-2315682.post@n4.nabble.com>	<OF47BAAF11.3884251F-ON88257776.007E0282-88257777.0055A04E@fs.fed.us>	<77EB52C6DD32BA4D87471DCD70C8D70003484BC1@NA-PA-VBE03.na.tibco.com>	<201008062302.o76N250r031098@hypatia.math.ethz.ch>
	<19549.15722.489388.725040@cmath-5.math.ethz.ch>
Message-ID: <4C5FF297.9050407@units.it>

Dear all,

I also use matrices inside data.frames in my (S4) class "hyperSpec".
So, yes, it would be great if commands like apply would work as straightforward
as e.g. rbind does on such data.frames.

The problem here seems to me different, though:
Is it possible that the relevant difference between matrices and data.frames is
that the rownames of a matrix do not need to be unique?

m <- matrix (1:12, ncol = 3)
rownames (m) <- rep (1, 4)
m

df <- as.data.frame (m) # seems to work, but:
df # throws error:
Fehler in data.frame(V1 = c("1", "2", "3", "4"), V2 = c("5", "6", "7",  :
   duplicate row.names: 1
dimnames (df)

Greetings,

Claudia


Martin Maechler wrote:
>>>>>> Heinz Tuechler <tuechler at gmx.at>
>>>>>>     on Sat, 07 Aug 2010 01:01:24 +0100 writes:
> 
>     > Also Surv objects are matrices and they share the same problem when 
>     > rbind-ing data.frames.
>     > If contained in a data.frame, Surv objects loose their class after 
>     > rbind and therefore do not more represent Surv objects afterwards.
>     > Using rbind with Surv objects outside of data.frames shows a similar 
>     > problem, but not the same column names.
>     > In conclusion, yes, matrices are common in data.frames, but not 
>     > without problems.
> 
> My understanding (> 20 yr long S and R experience) has been that
> a dataframe definitely can have matrix-like "components",
> and as Bill Dunlap (with equal S & R experience) has just
> explained, that's actually more common than you have thought.
> To have *data frame*s instead of simple matrices, should be much
> less common, I'm not sure if it's a good idea.
> 
> But getting back to 'matrices',
> I think they should work "without problems", at least for basic
> R operations such as rbind().
> 
> I don't have time to analyze the Surv - example below,
> but  at the moment think, that we'd be interested in 
> "fixing" the problems..
> 
> Martin Maechler, ETH Zurich
> 
>     > Heinz
> 
>     > ## example
>     > library(survival)
>     > ## create example data
>     > starttime <- rep(0,5)
>     > stoptime  <- 1:5
>     > event     <- c(1,0,1,1,1)
>     > group     <- c(1,1,1,2,2)
> 
>     > ## build Surv object
>     > survobj <- Surv(starttime, stoptime, event)
> 
>     > ## build data.frame with Surv object
>     > df.test <- data.frame(survobj, group)
>     > df.test
> 
>     > ## rbind data.frames
>     > rbind(df.test, df.test)
> 
>     > ## rbind Surv objects
>     > rbind(survobj, survobj)
> 
> 
> 
>     > At 06.08.2010 09:34 -0700, William Dunlap wrote:
>     >> > -----Original Message-----
>     >> > From: r-devel-bounces at r-project.org
>     >> > [mailto:r-devel-bounces at r-project.org] On Behalf Of Nicholas
>     >> > L Crookston
>     >> > Sent: Friday, August 06, 2010 8:35 AM
>     >> > To: Michael Lachmann
>     >> > Cc: r-devel-bounces at r-project.org; r-devel at r-project.org
>     >> > Subject: Re: [Rd] rbind on data.frame that contains a column
>     >> > that is also a data.frame
>     >> >
>     >> > OK...I'll put in my 2 cents worth.
>     >> >
>     >> > It seems to me that the problem is with this line:
>     >> >
>     >> > b$a=a , where "s" is something other than a vector with
>     >> > length equal to nrow(b).
>     >> >
>     >> > I had no idea that a dataframe could hold a dataframe. It is not just
>     >> > rbind(b,b) that fails, apply(b,1,sum) fails and so does plot(b). I'll
>     >> > bet other R commands fail as well.
>     >> >
>     >> > My point of view is that a dataframe is a list of vectors
>     >> > of equal length and various types (this is not exactly what the help
>     >> > page says, but it is what it suggests to me).
>     >> >
>     >> > Hum, I wonder how much code is based on the idea that a
>     >> > dataframe can hold
>     >> > a dataframe.
>     >> 
>     >> I used to think that non-vectors in data.frames were
>     >> pretty rare things but when I started looking into
>     >> the details of the modelling code I discovered that
>     >> matrices in data.frames are common.  E.g.,
>     >> > library(splines)
>     >> > sapply(model.frame(data=mtcars, mpg~ns(hp)+poly(disp,2)), class)
>     >> $mpg
>     >> [1] "numeric"
>     >> 
>     >> $`ns(hp)`
>     >> [1] "ns"     "basis"  "matrix"
>     >> 
>     >> $`poly(disp, 2)`
>     >> [1] "poly"   "matrix"
>     >> You may not see these things because you don't call model.frame()
>     >> directly, but most modelling functions (e.g., lm() and glm())
>     >> do call it and use the grouping provided by the matrices to encode
>     >> how the columns of the design matrix are related to one another.
>     >> 
>     >> If matrices are allowed, shouldn't data.frames be allowed as well?
>     >> 
>     >> Bill Dunlap
>     >> Spotfire, TIBCO Software
>     >> wdunlap tibco.com
>     >> 
>     >> > 15 years of using R just isn't enough! But, I can
>     >> > say that not
>     >> > one
>     >> > line of code I've written expects a dataframe to hold a dataframe.
>     >> >
>     >> > > Hi,
>     >> >
>     >> > > The following was already a topic on r-help, but after
>     >> > understanding
>     >> > what is
>     >> > > going on, I think it fits better in r-devel.
>     >> >
>     >> > > The problem is this:
>     >> > > When a data.frame has another data.frame in it, rbind
>     >> > doesn't work well.
>     >> > > Here is an example:
>     >> > > --
>     >> > > > a=data.frame(x=1:10,y=1:10)
>     >> > > > b=data.frame(z=1:10)
>     >> > > > b$a=a
>     >> > > > b
>     >> > > z a.x a.y
>     >> > > 1   1   1   1
>     >> > > 2   2   2   2
>     >> > > 3   3   3   3
>     >> > > 4   4   4   4
>     >> > > 5   5   5   5
>     >> > > 6   6   6   6
>     >> > > 7   7   7   7
>     >> > > 8   8   8   8
>     >> > > 9   9   9   9
>     >> > > 10 10  10  10
>     >> > > > rbind(b,b)
>     >> > > Error in `row.names<-.data.frame`(`*tmp*`, value = c("1",
>     >> > "2", "3", "4",
>     >> >  :
>     >> > > duplicate 'row.names' are not allowed
>     >> > > In addition: Warning message:
>     >> > > non-unique values when setting 'row.names': ?1?, ?10?, ?2?,
>     >> > ?3?, ?4?,
>     >> > ?5?,
>     >> > > ?6?, ?7?, ?8?, ?9?
>     >> > > --
>     >> >
>     >> > >
>     >> > > Looking at the code of rbind.data.frame, the error comes from the
>     >> > > lines:
>     >> > > --
>     >> > > xij <- xi[[j]]
>     >> > > if (has.dim[jj]) {
>     >> > > value[[jj]][ri, ] <- xij
>     >> > > rownames(value[[jj]])[ri] <- rownames(xij)   # <--  problem is here
>     >> > > }
>     >> > > --
>     >> > > if the rownames() line is dropped, all works well. What this line
>     >> > > tries to do is to join the rownames of internal elements of the
>     >> > > data.frames I try to rbind. So the result, in my case should have a
>     >> > > column 'a', whose rownames are the rownames of the original
>     >> > column 'a'.
>     >> > It
>     >> > > isn't totally clear to me why this is needed. When would a
>     >> > data.frame
>     >> > > have different rownames on the inside vs. the outside?
>     >> >
>     >> > > Notice also that rbind takes into account whether the
>     >> > rownames of the
>     >> > > data.frames to be joined are simply 1:n, or they are something else.
>     >> > > If they are 1:n, then the result will have rownames 1:(n+m). If not,
>     >> > > then the rownames might be kept.
>     >> >
>     >> > > I think, more consistent would be to replace the lines above with
>     >> > > something like:
>     >> > > if (has.dim[jj]) {
>     >> > > value[[jj]][ri, ] <- xij
>     >> > > rnj = rownames(value[[jj]])
>     >> > > rnj[ri] = rownames(xij)
>     >> > > rnj = make.unique(as.character(unlist(rnj)), sep = "")
>     >> > > rownames(value[[jj]]) <- rnj
>     >> > > }
>     >> >
>     >> > > In this case, the rownames of inside elements will also be
>     >> > joined, but
>     >> > > in case they overlap, they will be made unique - just as
>     >> > they are for
>     >> > > the overall result of rbind. A side effect here would be that the
>     >> > > rownames of matrices will also be made unique, which till now didn't
>     >> > > happen, and which also doesn't happen when one rbinds matrices that
>     >> > > have rownames. So it would be better to test above if we are dealing
>     >> > > with a matrix or a data.frame.
>     >> >
>     >> > > But most people don't have different rownames inside and outside.
>     >> > > Maybe it would be best to add a flag as to whether you care or don't
>     >> > > care about the rownames of internal data.frames...
>     >> >
>     >> > > But maybe data.frames aren't meant to contain other data.frames?
>     >> >
>     >> > > If instead I do
>     >> > > b=data.frame( z=1:10, a=a)
>     >> > > then rbind(b,b) works well. In this case the data.frame was
>     >> > converted to
>     >> > its
>     >> > > columns. Maybe
>     >> > > b$a = a
>     >> > > should do the same?
>     >> >
>     >> > > Michael
>     >> > > --
>     >> > > View this message in context: http://r.789695.n4.nabble.com/rbind-
>     >> > > on-data-frame-that-contains-a-column-that-is-also-a-data-frame-
>     >> > > tp2315682p2315682.html
>     >> > > Sent from the R devel mailing list archive at Nabble.com.
>     >> >
>     >> > > ______________________________________________
>     >> > > R-devel at r-project.org mailing list
>     >> > > https://stat.ethz.ch/mailman/listinfo/r-devel
>     >> >       [[alternative HTML version deleted]]
>     >> >
>     >> > ______________________________________________
>     >> > R-devel at r-project.org mailing list
>     >> > https://stat.ethz.ch/mailman/listinfo/r-devel
>     >> >
>     >> 
>     >> ______________________________________________
>     >> R-devel at r-project.org mailing list
>     >> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>     > ______________________________________________
>     > R-devel at r-project.org mailing list
>     > https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From Ted.Harding at manchester.ac.uk  Mon Aug  9 17:37:57 2010
From: Ted.Harding at manchester.ac.uk ( (Ted Harding))
Date: Mon, 09 Aug 2010 16:37:57 +0100 (BST)
Subject: [Rd] suggestion for ?factor
Message-ID: <XFMail.100809163757.Ted.Harding@manchester.ac.uk>

Hi Folks.
May I suggest a small addition to ?factor -- this is not explicit
about how to force the ordering of levels in an ordered factor.

One can guess it, but I think it would be a good idea to spell it out.
For example, one can do:

  X <- c("Alf","Bert","Chris","Dave")
  F <- factor(X,levels=c("Dave","Alf","Chris","Bert"),ordered=TRUE)
  F
  # [1] Alf   Bert  Chris Dave 
  # Levels: Dave < Alf < Chris < Bert

So, where ?factor says:

  levels: an optional vector of the values that ?x? might have taken.
          The default is the unique set of values taken by
          'as.character(x)', sorted into increasing order of 'x'.
          Note that this set can be smaller than 'sort(unique(x))'.

it could include a bit extra so as to read:

  levels: an optional vector of the values that 'x' might have taken.
          The default is the unique set of values taken by
          'as.character(x)', sorted into increasing order of 'x'.
          Note that this set can be smaller than 'sort(unique(x))'.
          If 'levels=...' is present and 'ordered=TRUE', then the
          levels are ordered according to the order in which they
          are listed in 'levels'.

With thanks,
Ted.

--------------------------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding at manchester.ac.uk>
Fax-to-email: +44 (0)870 094 0861
Date: 09-Aug-10                                       Time: 16:37:50
------------------------------ XFMail ------------------------------


From pdalgd at gmail.com  Mon Aug  9 18:28:33 2010
From: pdalgd at gmail.com (peter dalgaard)
Date: Mon, 9 Aug 2010 18:28:33 +0200
Subject: [Rd] suggestion for ?factor
In-Reply-To: <XFMail.100809163757.Ted.Harding@manchester.ac.uk>
References: <XFMail.100809163757.Ted.Harding@manchester.ac.uk>
Message-ID: <E501A1F4-DF03-47B2-A605-3A296C424238@gmail.com>


On Aug 9, 2010, at 5:37 PM, (Ted Harding) wrote:

> Hi Folks.
> May I suggest a small addition to ?factor -- this is not explicit
> about how to force the ordering of levels in an ordered factor.
> 
> One can guess it, but I think it would be a good idea to spell it out.
> For example, one can do:
> 
>  X <- c("Alf","Bert","Chris","Dave")
>  F <- factor(X,levels=c("Dave","Alf","Chris","Bert"),ordered=TRUE)
>  F
>  # [1] Alf   Bert  Chris Dave 
>  # Levels: Dave < Alf < Chris < Bert
> 
> So, where ?factor says:
> 
>  levels: an optional vector of the values that ?x? might have taken.
>          The default is the unique set of values taken by
>          'as.character(x)', sorted into increasing order of 'x'.
>          Note that this set can be smaller than 'sort(unique(x))'.
> 
> it could include a bit extra so as to read:
> 
>  levels: an optional vector of the values that 'x' might have taken.
>          The default is the unique set of values taken by
>          'as.character(x)', sorted into increasing order of 'x'.
>          Note that this set can be smaller than 'sort(unique(x))'.
>          If 'levels=...' is present and 'ordered=TRUE', then the
>          levels are ordered according to the order in which they
>          are listed in 'levels'.

Hmm, yes, but ordered=TRUE is actually irrelevant, levels have orderings regardless (it matters for tabulation purposes, but also for modeling).  

[And please don't get me started about the ancient mess-up of ordered factor usage in the modeling code...]

I'd suggest to say something like "If 'levels' is present, then it defines the levels and their ordering directly, possibly including values not present in 'x'." I'd be tempted also to add that it is really as.character(x) that is matched against the level set, but I'm not sure it is the right place for that.


> 
> With thanks,
> Ted.
> 
> --------------------------------------------------------------------
> E-Mail: (Ted Harding) <Ted.Harding at manchester.ac.uk>
> Fax-to-email: +44 (0)870 094 0861
> Date: 09-Aug-10                                       Time: 16:37:50
> ------------------------------ XFMail ------------------------------
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Peter Dalgaard
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From mxkuhn at gmail.com  Tue Aug 10 16:59:46 2010
From: mxkuhn at gmail.com (Max Kuhn)
Date: Tue, 10 Aug 2010 10:59:46 -0400
Subject: [Rd] packages checks on OS X with 2.12 devel
Message-ID: <AANLkTikMoDYXYjPbQua8UPaq0HHmx8Hc2S-EEatc7DbY@mail.gmail.com>

I'm checking packages under the devel version on OS X

> sessionInfo()
R version 2.12.0 Under development (unstable) (2010-08-08 r52687)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

I install packages via install.packages with type = "source" (I stick
to arch=x86_64). I've had no issues with installs.

When I check packages via

   R --arch=x86_64 CMD check package

I see:

   * using platform: x86_64-apple-darwin9.8.0 (64-bit)
?
   * loading checks for arch ?i386?
?
   * loading checks for arch ?x86_64?
?
   ** running examples for arch ?i386?

The check then fails since the packages are not installed on i386. I tried

   R --arch=x86_64 --no-multiarch CMD check package

but that still runs checks on x86_64 and i386. I didn't find anything
else in the "what's new" for the latest devel version.

I'd prefer not to install the full crane and bioconductor set in both
architectures. Any suggestions (especially for the documentation that
I'm sure exists but I can't find).

Thanks,

Max


-- 

Max


From maechler at stat.math.ethz.ch  Tue Aug 10 18:14:24 2010
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue, 10 Aug 2010 18:14:24 +0200
Subject: [Rd] R support for 64 bit integers
In-Reply-To: <C4A003BC-C354-465C-8A4E-B4C410EE355F@comcast.net>
References: <AANLkTikhwGga=jEk7yOu2iRRTLxZW8SGvAkdCFe9d13z@mail.gmail.com>
	<C4A003BC-C354-465C-8A4E-B4C410EE355F@comcast.net>
Message-ID: <19553.31456.90963.792346@lynne.math.ethz.ch>

{Hijacking the thread from from R-help to R-devel -- as I am
 consciously shifting the focus away from the original question
 ...
}

>>>>> David Winsemius <dwinsemius at comcast.net>
>>>>>     on Tue, 10 Aug 2010 08:42:12 -0400 writes:

    > On Aug 9, 2010, at 2:45 PM, Theo Tannen wrote:

    >> Are integers strictly a signed 32 bit number on R even if
    >> I am running a 64 bit version of R on a x86_64 bit
    >> machine?
    >> 
    >> I ask because I have integers stored in a hdf5 file where
    >> some of the data is 64 bit integers. When I read that
    >> into R using the hdf5 library it seems any integer
    >> greater than 2**31 returns NA.

    > That's the limit. It's hard coded and not affected by the
    > memory pointer size.

    >> 
    >> Any solutions?

    > I have heard of packages that handle "big numbers". A bit
    > of searching produces suggestions to look at gmp on CRAN
    > and Rmpfr on R-Forge.

Note that Rmpfr has been on CRAN, too, for a while now.
If you only need large integers (and rationals), 'gmp' is enough
though.

*However* note that the gmp or Rmpfr (or any other arbitray
precision) implementation will be considerably slower in usage
than if there was native 64-bit integer support.

Introducing 64-bit integers natively into "base R" is an
"interesting" project, notably if we also allowed using them for
indices, and changed the internal structures to use them instead
of 32-bit.
This would allow to free ourselves from the increasingly
relevant  maximum-atomic-object-length = 2^31 problem.
The latter is something we have planned to address, possibly for
R 3.0.
However, for that, using 64-bit integers is just one
possibility, another being to use "double precision integers".
Personally, I'd prefer the "long long" (64-bit) integers quite
a bit, but there are other considerations, e.g.,
one big challenge will be to go there in a way such that not
all R packages using compiled code will have to be patched
extensively...
another aspect is how the BLAS / Lapack team will address the
problem.

Martin Maechler, ETH Zurich


From ripley at stats.ox.ac.uk  Tue Aug 10 18:27:12 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 10 Aug 2010 17:27:12 +0100 (BST)
Subject: [Rd] packages checks on OS X with 2.12 devel
In-Reply-To: <AANLkTikMoDYXYjPbQua8UPaq0HHmx8Hc2S-EEatc7DbY@mail.gmail.com>
References: <AANLkTikMoDYXYjPbQua8UPaq0HHmx8Hc2S-EEatc7DbY@mail.gmail.com>
Message-ID: <alpine.LFD.2.00.1008101715550.2370@gannet.stats.ox.ac.uk>

On Tue, 10 Aug 2010, Max Kuhn wrote:

> I'm checking packages under the devel version on OS X
>
>> sessionInfo()
> R version 2.12.0 Under development (unstable) (2010-08-08 r52687)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>
> I install packages via install.packages with type = "source" (I stick
> to arch=x86_64). I've had no issues with installs.

What is very strange is that you seem to have built R with two archs: 
why if you don't want to use i386?  If you build R with just one arch, 
it will only install/check ... that one arch.  So this is shooting 
yourself in the foot!

> When I check packages via
>
>   R --arch=x86_64 CMD check package
>
> I see:
>
>   * using platform: x86_64-apple-darwin9.8.0 (64-bit)
> ?
>   * loading checks for arch ?i386?
> ?
>   * loading checks for arch ?x86_64?
> ?
>   ** running examples for arch ?i386?
>
> The check then fails since the packages are not installed on i386. I tried
>
>   R --arch=x86_64 --no-multiarch CMD check package
>
> but that still runs checks on x86_64 and i386. I didn't find anything
> else in the "what's new" for the latest devel version.

--no-multiarch is an option to check, not to R.

> I'd prefer not to install the full crane and bioconductor set in both
> architectures. Any suggestions (especially for the documentation that
> I'm sure exists but I can't find).

Rdev CMD check --help and the R-exts manual both cover this.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From tlumley at u.washington.edu  Tue Aug 10 18:37:25 2010
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 10 Aug 2010 09:37:25 -0700 (PDT)
Subject: [Rd] R support for 64 bit integers
In-Reply-To: <19553.31456.90963.792346@lynne.math.ethz.ch>
Message-ID: <alpine.LRH.2.01.1008100937250.24392@hymn13.u.washington.edu>

On Tue, 10 Aug 2010, Martin Maechler wrote:

> {Hijacking the thread from from R-help to R-devel -- as I am
> consciously shifting the focus away from the original question
> ...
> }
>
>>>>>> David Winsemius <dwinsemius at comcast.net>
>>>>>>     on Tue, 10 Aug 2010 08:42:12 -0400 writes:
>
>    > On Aug 9, 2010, at 2:45 PM, Theo Tannen wrote:
>
>    >> Are integers strictly a signed 32 bit number on R even if
>    >> I am running a 64 bit version of R on a x86_64 bit
>    >> machine?
>    >>
>    >> I ask because I have integers stored in a hdf5 file where
>    >> some of the data is 64 bit integers. When I read that
>    >> into R using the hdf5 library it seems any integer
>    >> greater than 2**31 returns NA.
>
>    > That's the limit. It's hard coded and not affected by the
>    > memory pointer size.
>
>    >>
>    >> Any solutions?
>
>    > I have heard of packages that handle "big numbers". A bit
>    > of searching produces suggestions to look at gmp on CRAN
>    > and Rmpfr on R-Forge.
>
> Note that Rmpfr has been on CRAN, too, for a while now.
> If you only need large integers (and rationals), 'gmp' is enough
> though.
>
> *However* note that the gmp or Rmpfr (or any other arbitray
> precision) implementation will be considerably slower in usage
> than if there was native 64-bit integer support.
>
> Introducing 64-bit integers natively into "base R" is an
> "interesting" project, notably if we also allowed using them for
> indices, and changed the internal structures to use them instead
> of 32-bit.
> This would allow to free ourselves from the increasingly
> relevant  maximum-atomic-object-length = 2^31 problem.
> The latter is something we have planned to address, possibly for
> R 3.0.
> However, for that, using 64-bit integers is just one
> possibility, another being to use "double precision integers".
> Personally, I'd prefer the "long long" (64-bit) integers quite
> a bit, but there are other considerations, e.g.,
> one big challenge will be to go there in a way such that not
> all R packages using compiled code will have to be patched
> extensively...
> another aspect is how the BLAS / Lapack team will address the
> problem.

At the moment, all the following are the same type:
  length of an R vector
  R integer type
  C int type
  Fortran INTEGER type

The last two are fixed at 32 bits (in practice for C, by standard for Fortran), and we would like the first and perhaps the second to become 64bit.

If both the R length type and the R integer type become the same 64bit type and replace the current integer type then every compiled package has to change to declare the arguments as int64 (or long, on most 64bit systems) and INTEGER*8. That should be all that is needed for most code, since C compilers nowadays already complain if you do unclean things like stuffing an int into a pointer.

If the R length type changes to something /different/ from the integer type then any compiled code has to be checked to see if  C int arguments are lengths or integers, which is more work and more error-prone.

On the other hand, changing the integer type to 64bit will presumably make integer code run noticeably more slowly on 32bit systems.

In both cases, the changes could be postponed by having an option to .C/.Call forcing lengths and integers to be passed as 32-bit. This would mean that the code couldn't use large integers or large vectors, but it would keep working indefinitely.

     -thomas

Thomas Lumley
Professor of Biostatistics
University of Washington, Seattle


From mxkuhn at gmail.com  Tue Aug 10 19:37:54 2010
From: mxkuhn at gmail.com (Max Kuhn)
Date: Tue, 10 Aug 2010 13:37:54 -0400
Subject: [Rd] packages checks on OS X with 2.12 devel
In-Reply-To: <alpine.LFD.2.00.1008101715550.2370@gannet.stats.ox.ac.uk>
References: <AANLkTikMoDYXYjPbQua8UPaq0HHmx8Hc2S-EEatc7DbY@mail.gmail.com>
	<alpine.LFD.2.00.1008101715550.2370@gannet.stats.ox.ac.uk>
Message-ID: <AANLkTikybp8VDbBDkdMODH+kMmAwHFMmubaSgnJ_2xk3@mail.gmail.com>

Professor Ripley,

>> R version 2.12.0 Under development (unstable) (2010-08-08 r52687)
>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>
>> I install packages via install.packages with type = "source" (I stick
>> to arch=x86_64). I've had no issues with installs.
>
> What is very strange is that you seem to have built R with two archs: why if
> you don't want to use i386? ?If you build R with just one arch, it will only
> install/check ... that one arch. ?So this is shooting yourself in the foot!

I used the pre-compiled version from http://r.research.att.com/.
Perhaps something has changed there; I've never had this come up as an
issue.

> --no-multiarch is an option to check, not to R.

This is the mistake on my part. Everything is working now.

Thanks,

Max


From adrian at waddell.ch  Tue Aug 10 21:33:05 2010
From: adrian at waddell.ch (Adrian Waddell)
Date: Tue, 10 Aug 2010 15:33:05 -0400
Subject: [Rd] Adding Tcl source to an R package
Message-ID: <4C61A971.10005@waddell.ch>

Dear R Community,

I'm writing an R package with a lot of Tcl and Tk code. I use the Tcl
wrapper functions provided by the tcltk package if possible. However I
also define "pure" Tcl functions. I so far defined them with the .Tcl
function, for example (in R):

.Tcl('proc test {a b} {
  return [expr {sqrt(pow($a,2)+pow($b,2))}]
}')

so that I can use the procedures later on with either

.Tcl('test 2 3')
or
tcl('test',2,3)

My Question: Where can I put my procedures in a *.tcl file within my
package structure and how do I make my R package to load the Tcl
procedures? And will these functions be within a Tcl namespace?

Thanks,

Adrian Waddell


From ggrothendieck at gmail.com  Tue Aug 10 21:42:57 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Tue, 10 Aug 2010 15:42:57 -0400
Subject: [Rd] Adding Tcl source to an R package
In-Reply-To: <4C61A971.10005@waddell.ch>
References: <4C61A971.10005@waddell.ch>
Message-ID: <AANLkTinHstX-iJ_cNx7X2FokvtVBYMro-o9SZeFwsWbY@mail.gmail.com>

On Tue, Aug 10, 2010 at 3:33 PM, Adrian Waddell <adrian at waddell.ch> wrote:
> Dear R Community,
>
> I'm writing an R package with a lot of Tcl and Tk code. I use the Tcl
> wrapper functions provided by the tcltk package if possible. However I
> also define "pure" Tcl functions. I so far defined them with the .Tcl
> function, for example (in R):
>
> .Tcl('proc test {a b} {
> ?return [expr {sqrt(pow($a,2)+pow($b,2))}]
> }')
>
> so that I can use the procedures later on with either
>
> .Tcl('test 2 3')
> or
> tcl('test',2,3)
>
> My Question: Where can I put my procedures in a *.tcl file within my
> package structure and how do I make my R package to load the Tcl
> procedures? And will these functions be within a Tcl namespace?
>

Look at the Rpad package for an example. It sources tcl code.


From adrian at waddell.ch  Tue Aug 10 22:13:18 2010
From: adrian at waddell.ch (Adrian Waddell)
Date: Tue, 10 Aug 2010 16:13:18 -0400
Subject: [Rd] Adding Tcl source to an R package
In-Reply-To: <AANLkTinHstX-iJ_cNx7X2FokvtVBYMro-o9SZeFwsWbY@mail.gmail.com>
References: <4C61A971.10005@waddell.ch>
	<AANLkTinHstX-iJ_cNx7X2FokvtVBYMro-o9SZeFwsWbY@mail.gmail.com>
Message-ID: <4C61B2DE.7060805@waddell.ch>

On 08/10/2010 03:42 PM, Gabor Grothendieck wrote:
> On Tue, Aug 10, 2010 at 3:33 PM, Adrian Waddell <adrian at waddell.ch> wrote:
>> Dear R Community,
>>
>> I'm writing an R package with a lot of Tcl and Tk code. I use the Tcl
>> wrapper functions provided by the tcltk package if possible. However I
>> also define "pure" Tcl functions. I so far defined them with the .Tcl
>> function, for example (in R):
>>
>> .Tcl('proc test {a b} {
>>  return [expr {sqrt(pow($a,2)+pow($b,2))}]
>> }')
>>
>> so that I can use the procedures later on with either
>>
>> .Tcl('test 2 3')
>> or
>> tcl('test',2,3)
>>
>> My Question: Where can I put my procedures in a *.tcl file within my
>> package structure and how do I make my R package to load the Tcl
>> procedures? And will these functions be within a Tcl namespace?
>>
> 
> Look at the Rpad package for an example. It sources tcl code.

Thank you very much. For verification:

I have to load the tcl file within my R Code at some point with

tcl("source", tclfile)

where the tclfile variable is the path to my *.tcl file, in the Rpad
package created with

tclfile <- file.path(.find.package(package = "Rpad"), "tcl", "mini1.1.tcl")

Is there no tcl equivalent like useDynLib command in the NAMESPACE file
for C functions?


From S.J.Eglen at damtp.cam.ac.uk  Wed Aug 11 13:43:28 2010
From: S.J.Eglen at damtp.cam.ac.uk (Stephen Eglen)
Date: Wed, 11 Aug 2010 12:43:28 +0100
Subject: [Rd] suggestion for data.frame.Rd
Message-ID: <28552.1281527008@maps>

Hi, a small suggestion - could data.frame.Rd mention 'subset'?

Stephen

*** /tmp/ediff26669jwQ	2010-08-11 12:41:49.000000000 +0100
--- r-devel/R/src/library/base/man/data.frame.Rd	2010-08-11 12:17:27.000000000 +0100
***************
*** 123,129 ****
    \code{\link{plot.data.frame}},
    \code{\link{print.data.frame}},
    \code{\link{row.names}}, \code{\link{names}} (for the column names),
!   \code{\link{[.data.frame}} for subsetting methods,% ./Extract.data.frame.Rd
    \code{\link{Math.data.frame}} etc, about
    \emph{Group} methods for \code{data.frame}s;
    \code{\link{read.table}},
--- 123,130 ----
    \code{\link{plot.data.frame}},
    \code{\link{print.data.frame}},
    \code{\link{row.names}}, \code{\link{names}} (for the column names),
!   \code{\link{[.data.frame}} for subsetting methods% ./Extract.data.frame.Rd
!   including \code{\link{subset}},
    \code{\link{Math.data.frame}} etc, about
    \emph{Group} methods for \code{data.frame}s;
    \code{\link{read.table}},


From phgrosjean at sciviews.org  Wed Aug 11 14:42:31 2010
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Wed, 11 Aug 2010 14:42:31 +0200
Subject: [Rd] Non-blocking Eval
In-Reply-To: <COL117-W30C37D77057267045E331EC0A00@phx.gbl>
References: <COL117-W11775CC4DBBCB41511CEA7C0BF0@phx.gbl>,
	<A84E66CA-9A25-4991-8533-208FE241AC9E@r-project.org>
	<COL117-W30C37D77057267045E331EC0A00@phx.gbl>
Message-ID: <4C629AB7.60906@sciviews.org>

Hello,

For non-blocking access to R through sockets, you should also look at 
svSockets. It may be more appropriate than RServer for feeding data to 
R, while you have another process running in R that do smething like 
updating a graph, or some other calculations.
Best,

Philippe Grosjean

On 20/07/10 14:10, Martin Kerr wrote:
>
> Sorry I phrased that badly.
> What I'm trying to do is asynchronously add data to R, i.e. a program will periodically dump some readings to the Rserver and then later on another program will run some analysis scripts on them.
> I have managed to add the data via CMD_detachedVoidEval as you suggested.
> How exactly do I go about attaching to the session again? I know it involves some form of session key that comes back from the detach call, but what from does it take? And how do I use this?
> Thanks AgainMartin
>> Subject: Re: [Rd] Non-blocking Eval
>> From: simon.urbanek at r-project.org
>> Date: Mon, 19 Jul 2010 11:34:29 -0400
>> CC: r-devel at r-project.org
>> To: mk2391 at hotmail.com
>>
>> On Jul 19, 2010, at 10:58 AM, Martin Kerr wrote:
>>
>>>
>>> Hello,
>>> I'm currently working with the C++ version of the Rserve Client as part of a student project.
>>> Is there an implementation of a non-blocking interface to Rserve in C++? I can find one via the Java JRI but no equivalent in C++.
>>
>> (Please note that stats-rosuda-devel is the correct list for this.)
>>
>> I'm not quite sure what you mean, because in JRI there is idleEval() which is non-blocking in the sense that it doesn't do anything if R is busy but that doesn't apply to Rserve as by definition R cannot be busy there. There is no non-blocking interface to JRI - all calls are synchronous.
>>
>> If your question is whether you can start an evaluation in Rserve and not wait for the result then there is CMD_detachedVoidEval in Rserve, but the C++ client only implements a subset of the API which does not include that -- however, it is trivial to implement (just send a request with CMD_detachedVoidEval as there is nothing to decode).
>>
>> Cheers,
>> Simon
>>
>   		 	   		
> _________________________________________________________________
>
> Do you have a story that started on Hotmail? Tell us now
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From atp at piskorski.com  Wed Aug 11 15:23:19 2010
From: atp at piskorski.com (Andrew Piskorski)
Date: Wed, 11 Aug 2010 09:23:19 -0400
Subject: [Rd] Adding Tcl source to an R package
In-Reply-To: <4C61B2DE.7060805@waddell.ch>
References: <4C61B2DE.7060805@waddell.ch>
Message-ID: <20100811132319.GA55856@piskorski.com>

On Tue, Aug 10, 2010 at 04:13:18PM -0400, Adrian Waddell wrote:

> >> My Question: Where can I put my procedures in a *.tcl file within my
> >> package structure and how do I make my R package to load the Tcl
> >> procedures? And will these functions be within a Tcl namespace?

Whether you use Tcl namespaces or not is up to you and your Tcl code,
AFAICT R's Tcl interface has nothing to do with it.

> I have to load the tcl file within my R Code at some point with
> 
> tcl("source", tclfile)

"have to" is much too strong, there are certainly other ways.  E.g.,
help(".Tcl") specifically talks about addTclPath() and tclRequire(),
which are R interfaces to Tcl's "package require" and its "auto_path"
global variable:

  http://tcl.activestate.com/man/tcl8.4/TclCmd/package.htm
  http://tcl.activestate.com/man/tcl8.4/TclCmd/library.htm#M24

Remember that those are just helper functions to make combining R and
Tcl more convenient.  .Tcl() lets you execute any Tcl code you want,
so you could accomplish all the Tcl-side manipulation you need using
just it.

Some of the other R helper functions are doing more than just adding a
little syntactic sugar though.  For example, tclVar() and tclObj() are
very handy:

  input <- tclVar()
  # This nicely sets the Tcl list structure from the R vector: 
  tclObj(input) <- as.tclObj(my.vector ,drop=FALSE) 

Btw, it's easier to write Tcl code using variable names you know at
the time you write the code rather than the run-time determined
variable names that tclVar() gives you.  However, the implementation
of tclVar() is nicely simple, and if you look you'll see how to make
your own version that uses whatever Tcl variable name you want.

-- 
Andrew Piskorski <atp at piskorski.com>
http://www.piskorski.com/


From jinghuazhao at hotmail.com  Wed Aug 11 15:35:20 2010
From: jinghuazhao at hotmail.com (jing hua zhao)
Date: Wed, 11 Aug 2010 13:35:20 +0000
Subject: [Rd] Error during wrapup: Bootstrapping failed
In-Reply-To: <4C629AB7.60906@sciviews.org>
References: <COL117-W11775CC4DBBCB41511CEA7C0BF0@phx.gbl>, ,
	<A84E66CA-9A25-4991-8533-208FE241AC9E@r-project.org>,
	<COL117-W30C37D77057267045E331EC0A00@phx.gbl>,
	<4C629AB7.60906@sciviews.org>
Message-ID: <COL105-W9CFD9019978172CCC9AB9A5960@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100811/556ac792/attachment.pl>

From mdowle at mdowle.plus.com  Wed Aug 11 15:39:38 2010
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Wed, 11 Aug 2010 14:39:38 +0100
Subject: [Rd] Non-blocking Eval
References: <COL117-W11775CC4DBBCB41511CEA7C0BF0@phx.gbl>,
	<A84E66CA-9A25-4991-8533-208FE241AC9E@r-project.org><COL117-W30C37D77057267045E331EC0A00@phx.gbl>
	<4C629AB7.60906@sciviews.org>
Message-ID: <i3u96t$kmc$1@dough.gmane.org>

There is a video demo of exactly that on the data.table homepage :

http://datatable.r-forge.r-project.org/
http://www.youtube.com/watch?v=rvT8XThGA8o

However, last time I looked, svSocket uses text transfer. It would be really 
great if it did binary serialization, like Rserve does.

Previous threads :
http://r.789695.n4.nabble.com/Using-svSocket-with-data-table-tp924554p924554.html
http://r.789695.n4.nabble.com/Video-demo-of-using-svSocket-with-data-table-tp893671p893672.html

This one contains a comparison of Rserve and svSocket :
http://r.789695.n4.nabble.com/Fwd-Re-Video-demo-of-using-svSocket-with-data-table-tp903723p903723.html

Best, Matthew


"Philippe Grosjean" <phgrosjean at sciviews.org> wrote in message 
news:4C629AB7.60906 at sciviews.org...
> Hello,
>
> For non-blocking access to R through sockets, you should also look at 
> svSockets. It may be more appropriate than RServer for feeding data to R, 
> while you have another process running in R that do smething like updating 
> a graph, or some other calculations.
> Best,
>
> Philippe Grosjean
>
> On 20/07/10 14:10, Martin Kerr wrote:
>>
>> Sorry I phrased that badly.
>> What I'm trying to do is asynchronously add data to R, i.e. a program 
>> will periodically dump some readings to the Rserver and then later on 
>> another program will run some analysis scripts on them.
>> I have managed to add the data via CMD_detachedVoidEval as you suggested.
>> How exactly do I go about attaching to the session again? I know it 
>> involves some form of session key that comes back from the detach call, 
>> but what from does it take? And how do I use this?
>> Thanks AgainMartin
>>> Subject: Re: [Rd] Non-blocking Eval
>>> From: simon.urbanek at r-project.org
>>> Date: Mon, 19 Jul 2010 11:34:29 -0400
>>> CC: r-devel at r-project.org
>>> To: mk2391 at hotmail.com
>>>
>>> On Jul 19, 2010, at 10:58 AM, Martin Kerr wrote:
>>>
>>>>
>>>> Hello,
>>>> I'm currently working with the C++ version of the Rserve Client as part 
>>>> of a student project.
>>>> Is there an implementation of a non-blocking interface to Rserve in 
>>>> C++? I can find one via the Java JRI but no equivalent in C++.
>>>
>>> (Please note that stats-rosuda-devel is the correct list for this.)
>>>
>>> I'm not quite sure what you mean, because in JRI there is idleEval() 
>>> which is non-blocking in the sense that it doesn't do anything if R is 
>>> busy but that doesn't apply to Rserve as by definition R cannot be busy 
>>> there. There is no non-blocking interface to JRI - all calls are 
>>> synchronous.
>>>
>>> If your question is whether you can start an evaluation in Rserve and 
>>> not wait for the result then there is CMD_detachedVoidEval in Rserve, 
>>> but the C++ client only implements a subset of the API which does not 
>>> include that -- however, it is trivial to implement (just send a request 
>>> with CMD_detachedVoidEval as there is nothing to decode).
>>>
>>> Cheers,
>>> Simon
>>>
>>      _________________________________________________________________
>>
>> Do you have a story that started on Hotmail? Tell us now
>> [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>


From sgerber at cs.utah.edu  Thu Aug 12 01:59:27 2010
From: sgerber at cs.utah.edu (sgerber)
Date: Wed, 11 Aug 2010 17:59:27 -0600
Subject: [Rd]  possible memory leak in e1071 svm
In-Reply-To: <4C61B2DE.7060805@waddell.ch>
References: <4C61A971.10005@waddell.ch>
	<AANLkTinHstX-iJ_cNx7X2FokvtVBYMro-o9SZeFwsWbY@mail.gmail.com>
	<4C61B2DE.7060805@waddell.ch>
Message-ID: <ff1a5d4edcb8eeedff9fdf141bc967db@cs.utah.edu>

Hi All

I am developing a package depening on the svm implementation in e1071.
After running some tests I started to run in to memory problems for
moderate size problems.

I attached a simple piece of code and data the reproduces the problem -
running this code with valgrind:
R --vanilla -d "valgrind --tool=memcheck --leak-check=full" < svmtest.R
yields:

==76300== LEAK SUMMARY:
==76300==    definitely lost: 0 bytes in 0 blocks
==76300==    indirectly lost: 0 bytes in 0 blocks
==76300==      possibly lost: 12,186,900 bytes in 5,903 blocks
==76300==    still reachable: 6,552,269 bytes in 1,653 blocks
==76300==         suppressed: 6,414 bytes in 82 blocks
==76300== Reachable blocks (those to which a pointer was found) are not
shown.
==76300== To see them, rerun with: --leak-check=full --show-reachable=yes
==76300== 
==76300== For counts of detected and suppressed errors, rerun with: -v
==76300== ERROR SUMMARY: 1155 errors from 1155 contexts (suppressed: 3
from 3)

Is that relatively large amount of data possibly lost a potential memory
leak?

Thanks
Sam




-------------- next part --------------
library(e1071)
load("testsvm.Rdata")
svm <- svm(y ~ ., df, probability=TRUE,  scale = FALSE)
svm <- NULL
-------------- next part --------------
A non-text attachment was scrubbed...
Name: testsvm.Rdata
Type: application/x-gzip
Size: 12181 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100811/cc6d2617/attachment.tgz>

From ripley at stats.ox.ac.uk  Thu Aug 12 10:04:35 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 12 Aug 2010 09:04:35 +0100 (BST)
Subject: [Rd] R readline not honoring RCustomCompletion
In-Reply-To: <20100809090425.GA9224@pc049-u864.lyon.inserm.fr>
References: <20100809090425.GA9224@pc049-u864.lyon.inserm.fr>
Message-ID: <alpine.LFD.2.00.1008120857170.7034@gannet.stats.ox.ac.uk>

And where did you find the documentation that it should?  Not in the R 
sources AFAICS ....

The readline documentation suggests that applications should set their 
name by rl_readline_name.  That will be done and documented as from R 
2.12.0, but the application name is 'R', not 'RCustomCompletion' -- 
and the only example in any of the postings you cite is nothing to do 
with completion.

On Mon, 9 Aug 2010, Rafael Laboissiere wrote:

> This issue has been brought at least twice in R-help:

Which was of course the wrong list.

> https://stat.ethz.ch/pipermail/r-help/2008-September/173828.html
> https://stat.ethz.ch/pipermail/r-help/2009-May/197360.html
>
> Looking at the source in src/unix/sys-std.c, it seems that the definition
> of rl_readline_name as "RCustomCompletion" is made after the readline
> library has been initialized and the ~/.inputrc file has been read.
> Typing "C-x C-r" at the R prompt makes the definitions under "$if
> RCustomCompletion" work, but this is not what one expects the R users to
> do.
>
> Attached below is the trivial patch that seems to fix the problem.
>
> Best regards,
>
> Rafael Laboissiere
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From rafael.laboissiere at inserm.fr  Thu Aug 12 14:35:46 2010
From: rafael.laboissiere at inserm.fr (Rafael Laboissiere)
Date: Thu, 12 Aug 2010 14:35:46 +0200
Subject: [Rd] R readline not honoring RCustomCompletion
In-Reply-To: <alpine.LFD.2.00.1008120857170.7034@gannet.stats.ox.ac.uk>
References: <20100809090425.GA9224@pc049-u864.lyon.inserm.fr>
	<alpine.LFD.2.00.1008120857170.7034@gannet.stats.ox.ac.uk>
Message-ID: <20100812123546.GS22230@pc049-u864.lyon.inserm.fr>

* Prof Brian Ripley <ripley at stats.ox.ac.uk> [2010-08-12 09:04]:

> The readline documentation suggests that applications should set
> their name by rl_readline_name.  That will be done and documented as
> from R 2.12.0, but the application name is 'R', not
> 'RCustomCompletion' -- and the only example in any of the postings
> you cite is nothing to do with completion.

I have seen your changes in the SVN repository.  Thank you for making
this improvement in R.

Best regards,

Rafael


From ggrothendieck at gmail.com  Thu Aug 12 17:33:11 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 12 Aug 2010 11:33:11 -0400
Subject: [Rd] c.POSIXct
Message-ID: <AANLkTinGcXRQd5+Xmo2ad5HoofdbzhZbEaSznAgCL3vO@mail.gmail.com>

Currently if x1 and x2 are POSIXct then c(x1, x2) will not have a
tzone attribute even if x1 or x2 or both do but it should.

This could be fixed with the following c.POSIXct:

c.POSIXct <- function (..., recursive = FALSE) {
	tzones <- lapply(list(...), attr, which = "tzone")
	lengths <- sapply(tzones, length)
	if (any(lengths > 1)) stop("tzone cannot have length greater than 1")
	which <- sapply(tzones, length) == 1
	tzone <- unique(unlist(tzones[which]))
	if (length(tzone) != 1) tzone <- NULL
structure(c(unlist(lapply(list(...), unclass))), class = c("POSIXt",
    "POSIXct"), tzone = tzone)
}

# test
x1 <- Sys.time()
x2 <- structure(x1, tzone = "UTC")
x3 <- structure(x1, tzone = "other")

# these all currently give NULL but with
# above give indicated value

attr(c(x1, x1), "tzone") # NULL
attr(c(x2, x2), "tzone") # "UTC"
attr(c(x1, x2), "tzone") # "UTC"
attr(c(x2, x1), "tzone") # "UTC"
attr(c(x1, x2, x3), "tzone") # NULL


From ripley at stats.ox.ac.uk  Thu Aug 12 19:25:23 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 12 Aug 2010 18:25:23 +0100 (BST)
Subject: [Rd] readline operate-and-get-next
In-Reply-To: <20100808185529.GC2603@pc049-u864.lyon.inserm.fr>
References: <20100807110740.GB13899@pc049-u864.lyon.inserm.fr>
	<20100808185529.GC2603@pc049-u864.lyon.inserm.fr>
Message-ID: <alpine.LFD.2.00.1008121122340.12173@gannet.stats.ox.ac.uk>

On Sun, 8 Aug 2010, Rafael Laboissiere wrote:

> Okay, I could not refrain myself and implemented the change in
> src/unix/sys-std.c.  The patch is attached below.  I tested it in the
> 2.11.1 source and it worked fine.  At any rate, the patch applies cleanly
> to the SVN source.
>
> Three notes about this patch:
>
> 1. The code is taken from the bash source (bashline.c) with minimal
>   changes.

Hmm, one of those 'minimal changes' was to omit the copyright and 
licence statements.  I very much doubt that you have the right to post 
copied code without those, and we certainly do not have the right to 
use such code in the R sources.

Bash is currently distributed under a licence that FSF deems 
incompatible with that of R, and we would only accept code which can 
be (re-)licensed under GPL (>=2).  So it is critical where exactly you 
copied this from.

We can only consider code contributions where the provenance and 
licensing of the code is clearcut.  That includes your own 
contributions, and since you posted from an address which is likely to 
be your employer, who owns the copyright of your work needs to be 
clear too.

If you provide a patch with these extremely important issues resolved, 
we will consider its merits.  But not otherwise.

>
> 2. The changes are put inside #ifdef HAVE_READLINE_HISTORY_H, because
>   it uses history related functions.
>
> 3. In the call to rl_add_defun, the operate-and-get-next function is
>   bound to C-o.  This is not the behavior of Bash and Octave, which
>   depends on the user to define the key binding in ~/.inputrc.  To
>   mimic this behavior, the code should be rather:
>
>   rl_add_defun ("operate-and-get-next", operate_and_get_next, -1);
>
>
> Best regards,
>
> Rafael Laboissiere
>
> * Rafael Laboissiere <rafael.laboissiere at inserm.fr> [2010-08-07 13:07]:
>
>> Both Bash and Octave have a nifty addition to the readline library called
>> "operate-and-get-next", bound to "C-o".  This function accepts the
>> current line for execution and fetch the next line relative to the
>> current line from the history for editing (see
>> http://www.faqs.org/docs/bashman/bashref_101.html).
>>
>> This feature has a huge impact in my productivity using Bash and Octave
>> interactively, since it avoids those numerous arrow key strokes in order
>> to rerun a previous block of commands.
>>
>> I looked at the Bash sources and it does not seem too complicate to
>> implement.  Octave has borrowed practically the same code from Bash.
>> Before I start looking at the R code, I would like to know whether the R
>> developers had already planned to include the operate-and-get-next
>> feature into R.
>>
>> Best regards,
>>
>> Rafael Laboissiere
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ml_a at waddell.ch  Thu Aug 12 20:14:34 2010
From: ml_a at waddell.ch (Adrian Waddell)
Date: Thu, 12 Aug 2010 14:14:34 -0400
Subject: [Rd] accessing tcl variables within R and tcl
Message-ID: <4C643A0A.3060901@waddell.ch>

Dear R users,

I have some troubles with dealing with tclObj objects. I try to explain
it with a toy example:

Say I define the following tcl procedure which just prints out each list
element

library(tcltk)
.Tcl('proc test {myList} {
    foreach i $myList {
      puts stdout  $i
    }
}')

and I call it with:

> tcl('test',letters[1:5])    # Works as expected

Now say I define a tcl variable first:

> a <- tclVar("")
> tclObj(a) <- as.tclObj(letters[1:5])

> tcl('set',a)  # output list

However

> tcl('test',a) # does not work as expected, returns the variable name

Why not? In fact, how do get the name of the "a" list in tcl (something
like RTcl...) so I could use it as follows
> .Tcl('test $RTcl1') #works

Loops are much quicker in tcl than in R, hence I try to do some
computations in tcl and not via wrapper function in R. I therefore need
a way to easily access tcl variables from within R and tcl.

Thanks for any help,

Adrian Waddell


From rafael.laboissiere at inserm.fr  Thu Aug 12 20:24:49 2010
From: rafael.laboissiere at inserm.fr (Rafael Laboissiere)
Date: Thu, 12 Aug 2010 20:24:49 +0200
Subject: [Rd] readline operate-and-get-next
In-Reply-To: <alpine.LFD.2.00.1008121122340.12173@gannet.stats.ox.ac.uk>
References: <20100807110740.GB13899@pc049-u864.lyon.inserm.fr>
	<20100808185529.GC2603@pc049-u864.lyon.inserm.fr>
	<alpine.LFD.2.00.1008121122340.12173@gannet.stats.ox.ac.uk>
Message-ID: <20100812182449.GB4587@pc049-u864.lyon.inserm.fr>

* Prof Brian Ripley <ripley at stats.ox.ac.uk> [2010-08-12 18:25]:

> Hmm, one of those 'minimal changes' was to omit the copyright and
> licence statements.  I very much doubt that you have the right to post
> copied code without those, and we certainly do not have the right to
> use such code in the R sources.

I am sorry for this omission.

> Bash is currently distributed under a licence that FSF deems
> incompatible with that of R, and we would only accept code which can
> be (re-)licensed under GPL (>=2).  So it is critical where exactly
> you copied this from.
> 
> We can only consider code contributions where the provenance and
> licensing of the code is clearcut.

The code was taken from file bashline.c distributed in the bash-3.0
sources (available from ftp://ftp.gnu.org/gnu/bash/bash-3.0.tar.gz).
The header of this file is:

/* bashline.c -- Bash's interface to the readline library. */

/* Copyright (C) 1987-2004 Free Software Foundation, Inc.

   This file is part of GNU Bash, the Bourne Again SHell.

   Bash is free software; you can redistribute it and/or modify it
   under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2, or (at your option)
   any later version.

   Bash is distributed in the hope that it will be useful, but WITHOUT
   ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
   License for more details.

   You should have received a copy of the GNU General Public License
   along with Bash; see the file COPYING.  If not, write to the Free
   Software Foundation, 59 Temple Place, Suite 330, Boston, MA 02111 USA. */

Would that be okay?

> That includes your own contributions, and since you posted from an
> address which is likely to be your employer, who owns the copyright of
> your work needs to be clear too.

Well, in the proposed patch there was no line of code that could 
genuinely be called "mine".  I think that my contribution would fall
below the "legally significant" threshold, as defined by the GNU project:

http://www.gnu.org/prep/maintain/maintain.html#Legally-Significant

I would classify my changes as mere "ideas", as discussed in the URL
above (besides the fact that the code does actually work).  In this case,
I do not think we should bother making me hold copyright on the sys-std.c
file.

> If you provide a patch with these extremely important issues
> resolved, we will consider its merits.  But not otherwise.

Please, tell me whether what I wrote above is okay and I will prepare a
new patch containing the copyright clarification.

Best regards,

Rafael Laboissiere


From ggrothendieck at gmail.com  Thu Aug 12 21:02:52 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 12 Aug 2010 15:02:52 -0400
Subject: [Rd] accessing tcl variables within R and tcl
In-Reply-To: <4C643A0A.3060901@waddell.ch>
References: <4C643A0A.3060901@waddell.ch>
Message-ID: <AANLkTimSCSo3GcFJ+JxkuAo9CHEYrYBJ+FTP+GhzyqN_@mail.gmail.com>

On Thu, Aug 12, 2010 at 2:14 PM, Adrian Waddell <ml_a at waddell.ch> wrote:
> Dear R users,
>
> I have some troubles with dealing with tclObj objects. I try to explain
> it with a toy example:
>
> Say I define the following tcl procedure which just prints out each list
> element
>
> library(tcltk)
> .Tcl('proc test {myList} {
> ? ?foreach i $myList {
> ? ? ?puts stdout ?$i
> ? ?}
> }')
>
> and I call it with:
>
>> tcl('test',letters[1:5]) ? ?# Works as expected
>
> Now say I define a tcl variable first:
>
>> a <- tclVar("")
>> tclObj(a) <- as.tclObj(letters[1:5])
>
>> tcl('set',a) ?# output list
>
> However
>
>> tcl('test',a) # does not work as expected, returns the variable name
>
> Why not? In fact, how do get the name of the "a" list in tcl (something
> like RTcl...) so I could use it as follows
>> .Tcl('test $RTcl1') #works
>
> Loops are much quicker in tcl than in R, hence I try to do some
> computations in tcl and not via wrapper function in R. I therefore need
> a way to easily access tcl variables from within R and tcl.
>

Try this:

tcl("test", tclvalue(a))


From pdalgd at gmail.com  Thu Aug 12 21:04:07 2010
From: pdalgd at gmail.com (Peter Dalgaard)
Date: Thu, 12 Aug 2010 21:04:07 +0200
Subject: [Rd] accessing tcl variables within R and tcl
In-Reply-To: <4C643A0A.3060901@waddell.ch>
References: <4C643A0A.3060901@waddell.ch>
Message-ID: <4C6445A7.1010303@gmail.com>

Adrian Waddell wrote:
> Dear R users,
> 
> I have some troubles with dealing with tclObj objects. I try to explain
> it with a toy example:
> 
> Say I define the following tcl procedure which just prints out each list
> element
> 
> library(tcltk)
> .Tcl('proc test {myList} {
>     foreach i $myList {
>       puts stdout  $i
>     }
> }')
> 
> and I call it with:
> 
>> tcl('test',letters[1:5])    # Works as expected
> 
> Now say I define a tcl variable first:
> 
>> a <- tclVar("")
>> tclObj(a) <- as.tclObj(letters[1:5])
> 
>> tcl('set',a)  # output list
> 
> However
> 
>> tcl('test',a) # does not work as expected, returns the variable name
> 
> Why not? In fact, how do get the name of the "a" list in tcl (something
> like RTcl...) so I could use it as follows
>> .Tcl('test $RTcl1') #works
> 
> Loops are much quicker in tcl than in R, hence I try to do some
> computations in tcl and not via wrapper function in R. I therefore need
> a way to easily access tcl variables from within R and tcl.
> 
> Thanks for any help,

Ow, that's been a while... However

tcl('test', tclvalue(a))

seems to do the trick, as does

tcl('test', tclObj(a))

The latter presumably being preferable, since it avoids conversion to
and from an R object.

If I remember these matters correctly, you are seeing the difference
between "set RTcl1" and "test $RTcl1".

-- 
Peter Dalgaard
Center for Statistics, Copenhagen Business School
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From cbeleites at units.it  Fri Aug 13 12:29:28 2010
From: cbeleites at units.it (Claudia Beleites)
Date: Fri, 13 Aug 2010 12:29:28 +0200
Subject: [Rd] [R] cacheSweave / pgfSweave driver for package vignette
In-Reply-To: <AANLkTikNGNvW_J09m7p0Q3qs3fwXJ3LCykzkRU30NHZt@mail.gmail.com>
References: <AANLkTi=rTuqL4TUPxzZTFTDuZpi1nfcq8XeQp_-ze=42@mail.gmail.com>
	<AANLkTikNGNvW_J09m7p0Q3qs3fwXJ3LCykzkRU30NHZt@mail.gmail.com>
Message-ID: <4C651E88.50706@units.it>


Dear all,

Maybe we should move the discussion to r-devel? So please excuse the 
cross-posting, it is to tell people at r-help where to find the rest of the 
discussion (in case you agree with me).


I've been wondering about that, too.

Gabor, I use "fake" vignettes along your lines, too.
In order to provide meaningful samples, I have both bulky data and bulky 
calculations (at least too long to have any fun in running R CMD check frequently).

As I do not want to burden my package with lots (> 60 MB) of raw data in various 
file formats, two vignettes do their real work extra (and the source is 
available for separate download).

So for the development work it would be good to have caching for speed-up.
For the testing purposes of R CMD CHECK, however, the whole thing needs to be 
calculated: afaik the caching mechanism checks for changes in the respective 
chunks. Which is great for data-analysis work. However, in a package development 
scenario the changes are rather expected in the package. I suspect that the 
caching cannot check this. Thus a cached vignette does greatly reduce the 
calculation time, but also knocks out part of the testing.
This would be without concern, if the package is well behaved and does its 
testing in the tests and has the vignettes as manuals. I have to admit, though, 
that my package is not (yet) at this point.

So I personally find myself with a shell script that automatically builds all 
vignettes first, transfers some files into the package (the data sets coming 
with the package are constructed in vignettes), and then check and build the 
package.
In the end, this dependency of the package on the results of its vignettes needs 
much more calculation. I'm talking of ca. 10 - 15 min for the whole process 
(i.e. 5 - 7 min for one check cycle). This is awkward for development, but I 
think it's OK for something to be done occasionally on a nightly check on the 
server.

My conclusion is, that a cached Sweave driver should only be specified in 
certain situations. I.e. it would be very helpful for developing to do this at 
"home", but I'm afraid it is not the best idea to reduce the work in checking 
the package in general (e.g. during nightly checks).
I also say this because I have been running into trouble with the nighly build 
on r-forge (due to some LaTeX packages that I thought to be fairly standard, 
which they weren't).
Another error I "like" to produce is to forget adding a new source file to the 
version control. Both cases are only found in checks during the nightly build on 
the server. There may be other mistakes that would be masked by the caching.

Of course, it is also not nice to keep the servers calculating examples for 
hours. I presume, however, that this case is quite rare (compared to situations 
where the regular building and checking is too long for a fluent development 
cycle), and I'd say that in this case Gabor's procedure is OK.

For my work it would be much more helpful, if R CMD CHECK had also "positive" 
flags (e.g. "--tests" as abbreviation for "--no-codoc --no-examples --no-install 
--no-vignettes --no-latex")

I know hardly anything about make files and never wrote one myself. I think they 
could be helpful here to switch between the "development checks" and a complete 
build & check. So I'd be very curious to see some make files.

HTH,

Claudia




-- 
Claudia Beleites
Dipartimento dei Materiali e delle Risorse Naturali
Universit? degli Studi di Trieste
Via Alfonso Valerio 6/a
I-34127 Trieste

phone: +39 0 40 5 58-37 68
email: cbeleites at units.it


From rafael.laboissiere at inserm.fr  Sat Aug 14 20:55:31 2010
From: rafael.laboissiere at inserm.fr (Rafael Laboissiere)
Date: Sat, 14 Aug 2010 20:55:31 +0200
Subject: [Rd] readline operate-and-get-next
In-Reply-To: <20100812182449.GB4587@pc049-u864.lyon.inserm.fr>
References: <20100807110740.GB13899@pc049-u864.lyon.inserm.fr>
	<20100808185529.GC2603@pc049-u864.lyon.inserm.fr>
	<alpine.LFD.2.00.1008121122340.12173@gannet.stats.ox.ac.uk>
	<20100812182449.GB4587@pc049-u864.lyon.inserm.fr>
Message-ID: <20100814185531.GD4982@pc049-u864.lyon.inserm.fr>

* Rafael Laboissiere <rafael.laboissiere at inserm.fr> [2010-08-12 20:24]:

> * Prof Brian Ripley <ripley at stats.ox.ac.uk> [2010-08-12 18:25]:
> 
> > If you provide a patch with these extremely important issues
> > resolved, we will consider its merits.  But not otherwise.
> 
> Please, tell me whether what I wrote above is okay and I will prepare a
> new patch containing the copyright clarification.

I did not hear from you but I went ahead and prepared a patch according
to your recommendations, attached below.  I hope that the copyright and
licensing issues are correctly sorted out now.

As I explained in my previous post, none of the lines of code that I
added are mine, so it does not make sense for me to claim copyright on
sys-std.c.  I did add my name and my personal email address though, for
credit purposes, but feel free to do whatever you think is appropriate.

Best regards,

Rafael Laboissiere
-------------- next part --------------
A non-text attachment was scrubbed...
Name: operate-and-get-next.patch
Type: text/x-diff
Size: 3259 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100814/99bd7b90/attachment.bin>

From bbolker at gmail.com  Sun Aug 15 20:38:19 2010
From: bbolker at gmail.com (Ben Bolker)
Date: Sun, 15 Aug 2010 14:38:19 -0400
Subject: [Rd] adding a built-in drop.levels option for subset() in 2.12 ?
Message-ID: <4C68341B.2030304@gmail.com>


  With the approach of R 2.12.0:

  with mild apologies for re-opening this perennial issue:
is there any hope, if appropriate patches are submitted, of adding a
drop.levels argument (with default equal to FALSE to preserve backward
compatibility/efficiency) to the subset function ... ?
  If not, would a patch to the documentation and/or the R FAQ be accepted?

  This does seem to be a continuing source of confusion/frustration (it
certainly is among my students, and here is some documentation from
r-help over the years).  Note that some of the earliest threads here
refer to the problem (now fixed) that the subset() documentation failed
to note that the existing 'drop' argument would *not* (confusingly) drop
unused levels.

http://finzi.psych.upenn.edu/Rhelp10/2008-April/158566.html
http://finzi.psych.upenn.edu/R/Rhelp02/archive/42976.html
http://finzi.psych.upenn.edu/R/Rhelp02/archive/36961.html
http://finzi.psych.upenn.edu/Rhelp10/2009-November/217878.html
http://article.gmane.org/gmane.comp.lang.r.general/200395

  This suggestion is milder and less wide-ranging than a global
drop.unused.levels option, or than convincing everyone to use strings
rather than factors most of the time ...

  cheers
    Ben Bolker


-- 
Ben Bolker
bbolker at gmail.com , bolker at mcmaster.ca
http://www.math.mcmaster.ca/~bolker
GPG key: http://www.math.mcmaster.ca/~bolker/benbolker-publickey.asc


From jeroenooms at gmail.com  Sun Aug 15 22:02:11 2010
From: jeroenooms at gmail.com (Jeroen Ooms)
Date: Sun, 15 Aug 2010 22:02:11 +0200
Subject: [Rd] Disable interaction in R to use with Rserve
Message-ID: <AANLkTin1WBDeqs7N5stKn7xMaQwi-G328k+Cs566dJ9-@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100815/afe232f0/attachment.pl>

From spinuvit.list at gmail.com  Sun Aug 15 23:39:15 2010
From: spinuvit.list at gmail.com (Vitaly S.)
Date: Sun, 15 Aug 2010 23:39:15 +0200
Subject: [Rd] parent.frame(1) of a S4 method is not a calling environment.
Message-ID: <87d3tj4ku4.fsf@gmail.com>


Dear Developers,

I wonder what are the parent.frame rules for methods. For ordinary functions one
can call parent.frame() and be sure that it is the environment of a calling
function. With S4 aparently it is not the case.

Here is what I have discovered by trial and error so far:

> setClass("A", contains="vector")
[1] "A"
> setGeneric("foo", def=function(a, ...){standardGeneric("foo")})
[1] "foo"
> 
> setMethod("foo", signature("A"), 
+           def=function(a, ...){
+             cat("--pf1--\n")
+             ls(parent.frame(1))
+             ## cat("--pf2--")
+             ## ls(parent.frame(2))
+           })
[1] "foo"
> 
> tf <- function(){
+   b <- 4
+   foo(new("A")) #ok
+ }
> 
> tf() #ok
--pf1--
[1] "b"

The above works like predicted.
Now, a small change. The "b" argument which is not in the signature, but has a
role of an additional parameter to the function:

> setMethod("foo", signature("A"), 
+           def=function(a, b, ...){
+             cat("--pf1--\n")
+             print(ls(parent.frame(1)))
+             cat("--pf2--\n")
+             print(ls(parent.frame(2)))
+           })
[1] "foo"
> 
> tf()  #oups
--pf1--
[1] "a"
--pf2--
[1] "b"
> 

So,  can I be sure that for such functions parent.frame(2) will always work?
What are the additional rules?

Many thanks,
Vitaly.


From pdalgd at gmail.com  Mon Aug 16 01:23:26 2010
From: pdalgd at gmail.com (Peter Dalgaard)
Date: Mon, 16 Aug 2010 01:23:26 +0200
Subject: [Rd] adding a built-in drop.levels option for subset() in 2.12 ?
In-Reply-To: <4C68341B.2030304@gmail.com>
References: <4C68341B.2030304@gmail.com>
Message-ID: <4C6876EE.9050709@gmail.com>

Ben Bolker wrote:
>   With the approach of R 2.12.0:
> 
>   with mild apologies for re-opening this perennial issue:
> is there any hope, if appropriate patches are submitted, of adding a
> drop.levels argument (with default equal to FALSE to preserve backward
> compatibility/efficiency) to the subset function ... ?
>   If not, would a patch to the documentation and/or the R FAQ be accepted?

I don't think it is desirable (I probably said so before).

As far as I'm concerned, factors should NOT change their level set from
subsetting, and if you want them to lose unused levels, f <- factor(f)
gets you there soon enough.

> 
>   This does seem to be a continuing source of confusion/frustration (it
> certainly is among my students, and here is some documentation from
> r-help over the years). 

Well, if you don't give students tasks where it is important to preserve
the levels set, then I can believe that they might be frustrated that
empty levels are retained. However, if you have a data set with 50-odd
responses of (say) good-medium-poor, they would get equally frustrated
by having to reinstate the three factor levels after subsetting.
(Perhaps you need to have been exposed to SAS PROC FREQ's notorious
inability to generate zero-counts, or SPSS barplots labeled 4-6-7-9-10,
to see the point.)

As far as I can see, the confusion mainly arises when the factor itself
is used in subsetting: "I selected sex=='M', but 'F' is still listed as
a level".  One has to ask whether the same reaction would have been
triggered from (say) selecting everyone over 6 foot 2, which just
happened to be an all-male population. I suggest that this would be
taken as completely uncontroversial:

> data(juul2)
> juul2 <- transform(juul2, sex=factor(sex,labels=c("M","F")))
> with(subset(juul2, height > 187), table(sex))
sex
 M  F
23  0


If the selection is explicitly on sex, it may _feel_ like a
contradiction if the other sex is "still present", but to R, a subset is
a subset, and R cannot reasonably treat the two cases differently.


 Note that some of the earliest threads here
> refer to the problem (now fixed) that the subset() documentation failed
> to note that the existing 'drop' argument would *not* (confusingly) drop
> unused levels.

(Was that actually misdocumented at the time? Otherwise, I honestly
don't know where that confusion came from:  drop=TRUE drops single-level
dimensions, which it also does in matrix and data frame indexing.)

> 
> http://finzi.psych.upenn.edu/Rhelp10/2008-April/158566.html
> http://finzi.psych.upenn.edu/R/Rhelp02/archive/42976.html
> http://finzi.psych.upenn.edu/R/Rhelp02/archive/36961.html
> http://finzi.psych.upenn.edu/Rhelp10/2009-November/217878.html
> http://article.gmane.org/gmane.comp.lang.r.general/200395
> 
>   This suggestion is milder and less wide-ranging than a global
> drop.unused.levels option, or than convincing everyone to use strings
> rather than factors most of the time ...
> 
>   cheers
>     Ben Bolker
> 
> 


-- 
Peter Dalgaard
Center for Statistics, Copenhagen Business School
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From mtmorgan at fhcrc.org  Mon Aug 16 21:12:44 2010
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Mon, 16 Aug 2010 12:12:44 -0700
Subject: [Rd] parent.frame(1) of a S4 method is not a calling
	environment.
In-Reply-To: <87d3tj4ku4.fsf@gmail.com>
References: <87d3tj4ku4.fsf@gmail.com>
Message-ID: <4C698DAC.3090704@fhcrc.org>

On 08/15/2010 02:39 PM, Vitaly S. wrote:
> 
> Dear Developers,
> 
> I wonder what are the parent.frame rules for methods. For ordinary functions one
> can call parent.frame() and be sure that it is the environment of a calling
> function. With S4 aparently it is not the case.
> 
> Here is what I have discovered by trial and error so far:
> 
>> setClass("A", contains="vector")
> [1] "A"
>> setGeneric("foo", def=function(a, ...){standardGeneric("foo")})
> [1] "foo"
>>
>> setMethod("foo", signature("A"), 
> +           def=function(a, ...){
> +             cat("--pf1--\n")
> +             ls(parent.frame(1))
> +             ## cat("--pf2--")
> +             ## ls(parent.frame(2))
> +           })
> [1] "foo"
>>
>> tf <- function(){
> +   b <- 4
> +   foo(new("A")) #ok
> + }
>>
>> tf() #ok
> --pf1--
> [1] "b"
> 
> The above works like predicted.
> Now, a small change. The "b" argument which is not in the signature, but has a
> role of an additional parameter to the function:
> 
>> setMethod("foo", signature("A"), 
> +           def=function(a, b, ...){
> +             cat("--pf1--\n")
> +             print(ls(parent.frame(1)))
> +             cat("--pf2--\n")
> +             print(ls(parent.frame(2)))
> +           })
> [1] "foo"
>>
>> tf()  #oups
> --pf1--
> [1] "a"
> --pf2--
> [1] "b"
>>
> 
> So,  can I be sure that for such functions parent.frame(2) will always work?
> What are the additional rules?

callNextMethod() will cause additional problems; the idea that you'll
grab things from somewhere other than function arguments doesn't seem
like a robust design, even if it's used in some important parts of R.

Martin

> 
> Many thanks,
> Vitaly.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Martin Morgan
Computational Biology / Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N.
PO Box 19024 Seattle, WA 98109

Location: Arnold Building M1 B861
Phone: (206) 667-2793


From spinuvit.list at gmail.com  Tue Aug 17 00:30:53 2010
From: spinuvit.list at gmail.com (Vitaly S.)
Date: Tue, 17 Aug 2010 00:30:53 +0200
Subject: [Rd] parent.frame(1) of a S4 method is not a calling
	environment.
References: <87d3tj4ku4.fsf@gmail.com> <4C698DAC.3090704@fhcrc.org>
Message-ID: <87wrrq2ns2.fsf@gmail.com>


Martin Morgan <mtmorgan at fhcrc.org> writes:
>> 
>> So,  can I be sure that for such functions parent.frame(2) will always work?
>> What are the additional rules?
>
> callNextMethod() will cause additional problems; the idea that you'll
> grab things from somewhere other than function arguments doesn't seem
> like a robust design, even if it's used in some important parts of R.
>
> Martin
>

That make it difficult to handle unevaluated expressions in methods. A solution
would be to explicitly require the users to use quote() or expression(),  and
then to use the "expression" in the signature. Slightly unpleasant, though.

Standardised, simpler syntax like .() in  ggplot and plyr,  would be handy here.
Hopefully .() is not grabbed for something else in meanwhile:).

Vitaly.


From cbeleites at units.it  Tue Aug 17 10:00:13 2010
From: cbeleites at units.it (Claudia Beleites)
Date: Tue, 17 Aug 2010 10:00:13 +0200
Subject: [Rd] prompt () and backticks for default arguments
Message-ID: <4C6A418D.5080009@units.it>

Dear all,

I just noticed, that prompt () looses backticks that protect default arguments:

f <- function (FUN = `*`) {}

cat (prompt (f, NA)$usage)

yields:
\usage{ f(FUN = *) } %- maybe also 'usage' for other objects documented here.
without the backticks, which is of course found by R CMD check as syntax error.

While this is easily fixed if the .Rd is further edited manually, I stumbled 
over it using the automated .Rd generation with inlinedocs - in this combination 
it is very inconvenient.

Any suggestions?

All the best,

Claudia


-- 
Claudia Beleites
Dipartimento dei Materiali e delle Risorse Naturali
Universit? degli Studi di Trieste
Via Alfonso Valerio 6/a
I-34127 Trieste

phone: +39 0 40 5 58-37 68
email: cbeleites at units.it


From murdoch.duncan at gmail.com  Tue Aug 17 12:23:08 2010
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 17 Aug 2010 06:23:08 -0400
Subject: [Rd] parent.frame(1) of a S4 method is not a calling
	environment.
In-Reply-To: <87wrrq2ns2.fsf@gmail.com>
References: <87d3tj4ku4.fsf@gmail.com> <4C698DAC.3090704@fhcrc.org>
	<87wrrq2ns2.fsf@gmail.com>
Message-ID: <4C6A630C.9020802@gmail.com>

Vitaly S. wrote:
> Martin Morgan <mtmorgan at fhcrc.org> writes:
>   
>>> So,  can I be sure that for such functions parent.frame(2) will always work?
>>> What are the additional rules?
>>>       
>> callNextMethod() will cause additional problems; the idea that you'll
>> grab things from somewhere other than function arguments doesn't seem
>> like a robust design, even if it's used in some important parts of R.
>>
>> Martin
>>
>>     
>
> That make it difficult to handle unevaluated expressions in methods. A solution
> would be to explicitly require the users to use quote() or expression(),  and
> then to use the "expression" in the signature. Slightly unpleasant, though.
>
>   

You could use formulas for that.  If you pass in

formula = ~ x + y*z

then environment(formula) will be the right evaluation environment, and 
formula[[2]] will be the unevaluated x + y*z.

Duncan Murdoch

> Standardised, simpler syntax like .() in  ggplot and plyr,  would be handy here.
> Hopefully .() is not grabbed for something else in meanwhile:).
>
> Vitaly.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ripley at stats.ox.ac.uk  Tue Aug 17 13:36:09 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 17 Aug 2010 12:36:09 +0100 (BST)
Subject: [Rd] prompt () and backticks for default arguments
In-Reply-To: <4C6A418D.5080009@units.it>
References: <4C6A418D.5080009@units.it>
Message-ID: <alpine.LFD.2.00.1008171231140.16450@gannet.stats.ox.ac.uk>

On Tue, 17 Aug 2010, Claudia Beleites wrote:

> Dear all,
>
> I just noticed, that prompt () looses backticks that protect default 
> arguments:
>
> f <- function (FUN = `*`) {}
>
> cat (prompt (f, NA)$usage)
>
> yields:
> \usage{ f(FUN = *) } %- maybe also 'usage' for other objects documented here.
> without the backticks, which is of course found by R CMD check as syntax 
> error.
>
> While this is easily fixed if the .Rd is further edited manually, I stumbled 
> over it using the automated .Rd generation with inlinedocs - in this 
> combination it is very inconvenient.
>
> Any suggestions?

Add backtick = TRUE to the deparse() call in prompt.default().

>
> All the best,
>
> Claudia
>
>
> -- 
> Claudia Beleites
> Dipartimento dei Materiali e delle Risorse Naturali
> Universit? degli Studi di Trieste
> Via Alfonso Valerio 6/a
> I-34127 Trieste
>
> phone: +39 0 40 5 58-37 68
> email: cbeleites at units.it
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From mk2391 at hotmail.com  Tue Aug 17 15:32:37 2010
From: mk2391 at hotmail.com (Martin Kerr)
Date: Tue, 17 Aug 2010 14:32:37 +0100
Subject: [Rd] DetachedEval Issues
Message-ID: <COL117-W378EA286C6D372535AC580C09C0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100817/1aee0f0f/attachment.pl>

From cbeleites at units.it  Tue Aug 17 16:26:36 2010
From: cbeleites at units.it (Claudia Beleites)
Date: Tue, 17 Aug 2010 16:26:36 +0200
Subject: [Rd] prompt () and backticks for default arguments
In-Reply-To: <alpine.LFD.2.00.1008171231140.16450@gannet.stats.ox.ac.uk>
References: <4C6A418D.5080009@units.it>
	<alpine.LFD.2.00.1008171231140.16450@gannet.stats.ox.ac.uk>
Message-ID: <4C6A9C1C.9080700@units.it>

Thanks, that works.

Are there any drawbacks to doing that in general?

If not, I suggest the following patch for utils/prompt.R

87c87,88
<                               paste(deparse(argls[[i]], width.cutoff= 500L),
---
 >                               paste(deparse(argls[[i]], width.cutoff= 500L,
 >                                             backtick = TRUE),

(Did I get right that this is waht I'm supposed to do?)

Best regards & thanks again,

Claudia


Prof Brian Ripley wrote:
> On Tue, 17 Aug 2010, Claudia Beleites wrote:
> 
>> Dear all,
>>
>> I just noticed, that prompt () looses backticks that protect default 
>> arguments:
>>
>> f <- function (FUN = `*`) {}
>>
>> cat (prompt (f, NA)$usage)
>>
>> yields:
>> \usage{ f(FUN = *) } %- maybe also 'usage' for other objects 
>> documented here.
>> without the backticks, which is of course found by R CMD check as 
>> syntax error.
>>
>> While this is easily fixed if the .Rd is further edited manually, I 
>> stumbled over it using the automated .Rd generation with inlinedocs - 
>> in this combination it is very inconvenient.
>>
>> Any suggestions?
> 
> Add backtick = TRUE to the deparse() call in prompt.default().
> 
>>
>> All the best,
>>
>> Claudia
>>
>>
>> -- 
>> Claudia Beleites
>> Dipartimento dei Materiali e delle Risorse Naturali
>> Universit? degli Studi di Trieste
>> Via Alfonso Valerio 6/a
>> I-34127 Trieste
>>
>> phone: +39 0 40 5 58-37 68
>> email: cbeleites at units.it
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
> 


-- 
Claudia Beleites
Dipartimento dei Materiali e delle Risorse Naturali
Universit? degli Studi di Trieste
Via Alfonso Valerio 6/a
I-34127 Trieste

phone: +39 0 40 5 58-37 68
email: cbeleites at units.it


From janko.thyson at ku-eichstaett.de  Tue Aug 17 20:36:26 2010
From: janko.thyson at ku-eichstaett.de (Janko Thyson)
Date: Tue, 17 Aug 2010 20:36:26 +0200
Subject: [Rd] Problems building own package (Error: "package has been build
	before R-2.10.0")
Message-ID: <004701cb3e3b$19f79680$4de6c380$@thyson@ku-eichstaett.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100817/0a034d94/attachment.pl>

From ligges at statistik.tu-dortmund.de  Tue Aug 17 21:59:40 2010
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 17 Aug 2010 21:59:40 +0200
Subject: [Rd] [R] Problems building own package (Error: "package has
 been build before R-2.10.0")
In-Reply-To: <004701cb3e3b$19f79680$4de6c380$@thyson@ku-eichstaett.de>
References: <004701cb3e3b$19f79680$4de6c380$@thyson@ku-eichstaett.de>
Message-ID: <4C6AEA2C.2040904@statistik.tu-dortmund.de>



On 17.08.2010 20:36, Janko Thyson wrote:
> Dear List,
>
>
>
> I?m doing my first baby steps towards developing own R Packages and ran into
> the following problem:

First baby step: Do not cross-post on several lists.



> R CMD check mypackage works fine (no errors, no warnings)
>
> R CMD build mypackage works fine (no errors, no warnings)
>
> R CMD INSTALL ?library=?C:\R\R-2.11.1\library?
> ?something\mypackage\mypackage_1.0.tar.gz? works fine (no errors, no
> warnings)
>
>
>
> However, when I try loading the package in an R-Session (version 2.11.1) via
> ?library(mypackage)?, R complains about the package being build before
> version R-2.10.0 and tells me to rebuild it.


So the R that is in your PATH is  < 2.10.x
Change your PATH and add the R version your are actually working with....

Uwe Ligges



>
>
> Could this possibly be due to the fact that I have multiple R versions
> installed (this also includes the most recent one, though)?
>
>
>
> To provide you with some details:
>
> -          Running Windows XP
>
> -          All of my R versions are under ?C:\R? (versions 2.9.2, 2.10.1,
> 2.11.1).
>
> -          I installed Rtools (version 2.1.2) to ?C:\Rtools? and pointed it
> to ?C:\R? (as this was the default) to interact with R (should this maybe
> have been ?C:\R\R-2.11.1??). I also installed everything else necessary to
> build packages (Inno Setup etc.).
>
> -          My PATH is set up as explained in R-Admin manual. Also, the only
> R version stated there is ?C:\R\R-2.11.1\bin;?.
>
> -          I updated the DESCRIPTION file and specified all .Rd files
> correctly.
>
>
>
> Any idea what I?m doing wrong?
>
>
>
> Thanks a ton,
>
> Janko
>
>
>
>    _____
>
>
>
> Janko Thyson
>   <mailto:holger.koemm at ku-eichstaett.de>  janko.thyson at ku-eichstaett.de
>
> Catholic University of Eichst?tt-Ingolstadt
> Ingolstadt School of Management
> Statistics and Quantitative Methods
> Auf der Schanz 49
> D-85049 Ingolstadt
>
>   <http://www.wfi.edu/lsqm>  www.wfi.edu/lsqm
>
> Fon:  +49 841 937-1923
> Fax:  +49 841 937-1965
>
> This e-mail and any attachment is for authorized use by the intended
> recipient(s) only. It may contain proprietary material, confidential
> information and/or be subject to legal privilege. It should not be
> copied, disclosed to, retained or used by any other party.
> If you are not an intended recipient then please promptly delete this
> e-mail and any attachment and all copies and inform the sender.
>
>
>
>    _____
>
>
>
>
> 	[[alternative HTML version deleted]]
>
>
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From janko.thyson at ku-eichstaett.de  Tue Aug 17 22:07:17 2010
From: janko.thyson at ku-eichstaett.de (Janko Thyson)
Date: Tue, 17 Aug 2010 22:07:17 +0200
Subject: [Rd] [R] Problems building own package (Error: "package has
	been build before R-2.10.0")
In-Reply-To: <4C6AEA2C.2040904@statistik.tu-dortmund.de>
References: <004701cb3e3b$19f79680$4de6c380$@thyson@ku-eichstaett.de>
	<4C6AEA2C.2040904@statistik.tu-dortmund.de>
Message-ID: <006001cb3e47$cadb9760$6092c620$@thyson@ku-eichstaett.de>

> -----Urspr?ngliche Nachricht-----
> Von: Uwe Ligges [mailto:ligges at statistik.tu-dortmund.de]
> Gesendet: Dienstag, 17. August 2010 22:00
> An: Janko Thyson
> Cc: r-devel at r-project. org
> Betreff: Re: [R] Problems building own package (Error: "package has
> been build before R-2.10.0")
> 
> 
> 
> On 17.08.2010 20:36, Janko Thyson wrote:
> > Dear List,
> >
> >
> >
> > I?m doing my first baby steps towards developing own R Packages and
> ran into
> > the following problem:
> 
> First baby step: Do not cross-post on several lists.

Sorry.

> > R CMD check mypackage works fine (no errors, no warnings)
> >
> > R CMD build mypackage works fine (no errors, no warnings)
> >
> > R CMD INSTALL ?library=?C:\R\R-2.11.1\library?
> > ?something\mypackage\mypackage_1.0.tar.gz? works fine (no errors, no
> > warnings)
> >
> >
> >
> > However, when I try loading the package in an R-Session (version
> 2.11.1) via
> > ?library(mypackage)?, R complains about the package being build
> before
> > version R-2.10.0 and tells me to rebuild it.
> 
> 
> So the R that is in your PATH is  < 2.10.x
> Change your PATH and add the R version your are actually working
> with....

As I wrote: "My PATH is set up as explained in the R-Admin manual. Also, the
only R version stated there is ?C:\R\R-2.11.1\bin;?.

> Uwe Ligges
>
>
> >
> >
> > Could this possibly be due to the fact that I have multiple R
> versions
> > installed (this also includes the most recent one, though)?
> >
> >
> >
> > To provide you with some details:
> >
> > -          Running Windows XP
> >
> > -          All of my R versions are under ?C:\R? (versions 2.9.2,
> 2.10.1,
> > 2.11.1).
> >
> > -          I installed Rtools (version 2.1.2) to ?C:\Rtools? and
> pointed it
> > to ?C:\R? (as this was the default) to interact with R (should this
> maybe
> > have been ?C:\R\R-2.11.1??). I also installed everything else
> necessary to
> > build packages (Inno Setup etc.).
> >
> > -          My PATH is set up as explained in R-Admin manual. Also,
> the only
> > R version stated there is ?C:\R\R-2.11.1\bin;?.
> >
> > -          I updated the DESCRIPTION file and specified all .Rd files
> > correctly.
> >
> >
> >
> > Any idea what I?m doing wrong?
> >
> >
> >
> > Thanks a ton,
> >
> > Janko
> >
> >
> >
> >    _____
> >
> >
> >
> > Janko Thyson
> >   <mailto:holger.koemm at ku-eichstaett.de>  janko.thyson at ku-
> eichstaett.de
> >
> > Catholic University of Eichst?tt-Ingolstadt
> > Ingolstadt School of Management
> > Statistics and Quantitative Methods
> > Auf der Schanz 49
> > D-85049 Ingolstadt
> >
> >   <http://www.wfi.edu/lsqm>  www.wfi.edu/lsqm
> >
> > Fon:  +49 841 937-1923
> > Fax:  +49 841 937-1965
> >
> > This e-mail and any attachment is for authorized use by the intended
> > recipient(s) only. It may contain proprietary material, confidential
> > information and/or be subject to legal privilege. It should not be
> > copied, disclosed to, retained or used by any other party.
> > If you are not an intended recipient then please promptly delete this
> > e-mail and any attachment and all copies and inform the sender.
> >
> >
> >
> >    _____
> >
> >
> >
> >
> > 	[[alternative HTML version deleted]]
> >
> >
> >
> >
> > ______________________________________________
> > R-help at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From ligges at statistik.tu-dortmund.de  Tue Aug 17 22:17:11 2010
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 17 Aug 2010 22:17:11 +0200
Subject: [Rd] [R] Problems building own package (Error: "package has
 been build before R-2.10.0")
In-Reply-To: <006001cb3e47$cadb9760$6092c620$@thyson@ku-eichstaett.de>
References: <004701cb3e3b$19f79680$4de6c380$@thyson@ku-eichstaett.de>
	<4C6AEA2C.2040904@statistik.tu-dortmund.de>
	<006001cb3e47$cadb9760$6092c620$@thyson@ku-eichstaett.de>
Message-ID: <4C6AEE47.2000900@statistik.tu-dortmund.de>

Then, you have the package installed under another libarry that is first 
on your search path.

Uwe Ligges

On 17.08.2010 22:07, Janko Thyson wrote:
>> -----Urspr?ngliche Nachricht-----
>> Von: Uwe Ligges [mailto:ligges at statistik.tu-dortmund.de]
>> Gesendet: Dienstag, 17. August 2010 22:00
>> An: Janko Thyson
>> Cc: r-devel at r-project. org
>> Betreff: Re: [R] Problems building own package (Error: "package has
>> been build before R-2.10.0")
>>
>>
>>
>> On 17.08.2010 20:36, Janko Thyson wrote:
>>> Dear List,
>>>
>>>
>>>
>>> I?m doing my first baby steps towards developing own R Packages and
>> ran into
>>> the following problem:
>>
>> First baby step: Do not cross-post on several lists.
>
> Sorry.
>
>>> R CMD check mypackage works fine (no errors, no warnings)
>>>
>>> R CMD build mypackage works fine (no errors, no warnings)
>>>
>>> R CMD INSTALL ?library=?C:\R\R-2.11.1\library?
>>> ?something\mypackage\mypackage_1.0.tar.gz? works fine (no errors, no
>>> warnings)
>>>
>>>
>>>
>>> However, when I try loading the package in an R-Session (version
>> 2.11.1) via
>>> ?library(mypackage)?, R complains about the package being build
>> before
>>> version R-2.10.0 and tells me to rebuild it.
>>
>>
>> So the R that is in your PATH is<  2.10.x
>> Change your PATH and add the R version your are actually working
>> with....
>
> As I wrote: "My PATH is set up as explained in the R-Admin manual. Also, the
> only R version stated there is ?C:\R\R-2.11.1\bin;?.
>
>> Uwe Ligges
>>
>>
>>>
>>>
>>> Could this possibly be due to the fact that I have multiple R
>> versions
>>> installed (this also includes the most recent one, though)?
>>>
>>>
>>>
>>> To provide you with some details:
>>>
>>> -          Running Windows XP
>>>
>>> -          All of my R versions are under ?C:\R? (versions 2.9.2,
>> 2.10.1,
>>> 2.11.1).
>>>
>>> -          I installed Rtools (version 2.1.2) to ?C:\Rtools? and
>> pointed it
>>> to ?C:\R? (as this was the default) to interact with R (should this
>> maybe
>>> have been ?C:\R\R-2.11.1??). I also installed everything else
>> necessary to
>>> build packages (Inno Setup etc.).
>>>
>>> -          My PATH is set up as explained in R-Admin manual. Also,
>> the only
>>> R version stated there is ?C:\R\R-2.11.1\bin;?.
>>>
>>> -          I updated the DESCRIPTION file and specified all .Rd files
>>> correctly.
>>>
>>>
>>>
>>> Any idea what I?m doing wrong?
>>>
>>>
>>>
>>> Thanks a ton,
>>>
>>> Janko
>>>
>>>
>>>
>>>     _____
>>>
>>>
>>>
>>> Janko Thyson
>>>    <mailto:holger.koemm at ku-eichstaett.de>   janko.thyson at ku-
>> eichstaett.de
>>>
>>> Catholic University of Eichst?tt-Ingolstadt
>>> Ingolstadt School of Management
>>> Statistics and Quantitative Methods
>>> Auf der Schanz 49
>>> D-85049 Ingolstadt
>>>
>>>    <http://www.wfi.edu/lsqm>   www.wfi.edu/lsqm
>>>
>>> Fon:  +49 841 937-1923
>>> Fax:  +49 841 937-1965
>>>
>>> This e-mail and any attachment is for authorized use by the intended
>>> recipient(s) only. It may contain proprietary material, confidential
>>> information and/or be subject to legal privilege. It should not be
>>> copied, disclosed to, retained or used by any other party.
>>> If you are not an intended recipient then please promptly delete this
>>> e-mail and any attachment and all copies and inform the sender.
>>>
>>>
>>>
>>>     _____
>>>
>>>
>>>
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>>
>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-
>> guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>


From simon.urbanek at r-project.org  Tue Aug 17 22:47:40 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 17 Aug 2010 16:47:40 -0400
Subject: [Rd] DetachedEval Issues
In-Reply-To: <COL117-W378EA286C6D372535AC580C09C0@phx.gbl>
References: <COL117-W378EA286C6D372535AC580C09C0@phx.gbl>
Message-ID: <EDD9E272-71A4-4D1D-BCFA-E36F776F6CC7@r-project.org>


On Aug 17, 2010, at 9:32 AM, Martin Kerr wrote:

> 
> Hello everyone,
> I have been attempting to make use of the newly implemented detachedEval functionality and I am having a few teething issues.

I presume you're talking about Rserve? Please use the proper mailing list rosuda-stats-devel for that.


> My code works fine when tested with both the Client and the Server on a single machine, but issues arise when I run them separately.Possibly because the local / local connection is running voer a Unix socket rather than tcp proper?
> Rsession* theSession;theSession = rc->detachedEval("source(\"hdlc_processing.r\")");delete rc;
> rc = new Rconnection(theSession);rc->connect();
> 
> Owing to firewall issues I am having to make use of an ssh tunnel for the connection, hence the manual override of the port number.

Which is entirely wrong - sessions don't re-attach to the server but to the random port generated on detach by the client.

Cheers,
Simon



> Thus I am in fact using this:
> Rsession* testSession = new Rsession(theSession->host(),6311,theSession->key());rc = new Rconnection(testSession);rc->connect();
> This results in the following being outputted on the Rserve debug side.
> session: resuming session, waiting for connections.connection accepted.sending ID string.
> header read result: 16DUMP [16]: 31 be 18 07 15 57 93 6f 9d a3 53 56 99 f4 3b 7fdiscarding buffer because too big (awaiting 1871927061 bytes)
> Any help would be greatly appreciated.
> Thank You
> Martin Kerr
> 		 	   		  
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From spinuvit.list at gmail.com  Wed Aug 18 01:13:44 2010
From: spinuvit.list at gmail.com (Vitaly S.)
Date: Wed, 18 Aug 2010 01:13:44 +0200
Subject: [Rd] parent.frame(1) of a S4 method is not a calling
	environment.
References: <87d3tj4ku4.fsf@gmail.com> <4C698DAC.3090704@fhcrc.org>
	<87wrrq2ns2.fsf@gmail.com> <4C6A630C.9020802@gmail.com>
Message-ID: <87sk2c3k9j.fsf@gmail.com>

Duncan Murdoch <murdoch.duncan at gmail.com> writes:

> Vitaly S. wrote:
>> Martin Morgan <mtmorgan at fhcrc.org> writes:
>>   
>>>> So,  can I be sure that for such functions parent.frame(2) will always work?
>>>> What are the additional rules?
>>>>       
>>> callNextMethod() will cause additional problems; the idea that you'll
>>> grab things from somewhere other than function arguments doesn't seem
>>> like a robust design, even if it's used in some important parts of R.
>>>
>>> Martin
>>>
>>>     
>>
>> That make it difficult to handle unevaluated expressions in methods. A solution
>> would be to explicitly require the users to use quote() or expression(),  and
>> then to use the "expression" in the signature. Slightly unpleasant, though.
>>
>>   
>
> You could use formulas for that.  If you pass in
>
> formula = ~ x + y*z
>
> then environment(formula) will be the right evaluation environment, and formula[[2]] will be the unevaluated x +
> y*z.
>
> Duncan Murdoch

Thank you Duncan, I didn't know that.

For programmatic use though, formula interface is slightly inconvenient. A
specialized function and class would be desirable. With the advent of more and
more complex S4 classes, unevaluated expressions in methods calls will became a
necessity, that's my feeling.

Thank you.
Vitaly.

>
>> Standardised, simpler syntax like .() in  ggplot and plyr,  would be handy here.
>> Hopefully .() is not grabbed for something else in meanwhile:).
>>
>> Vitaly.
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>


From hadley at rice.edu  Wed Aug 18 04:31:44 2010
From: hadley at rice.edu (Hadley Wickham)
Date: Tue, 17 Aug 2010 21:31:44 -0500
Subject: [Rd] parent.frame(1) of a S4 method is not a calling
	environment.
In-Reply-To: <87sk2c3k9j.fsf@gmail.com>
References: <87d3tj4ku4.fsf@gmail.com> <4C698DAC.3090704@fhcrc.org>
	<87wrrq2ns2.fsf@gmail.com> <4C6A630C.9020802@gmail.com>
	<87sk2c3k9j.fsf@gmail.com>
Message-ID: <AANLkTikYjCwuMv2LC_Kx2sYmgm6JYLXkEyP7xR0xKark@mail.gmail.com>

On Tuesday, August 17, 2010, Vitaly S. <spinuvit.list at gmail.com> wrote:
> Duncan Murdoch <murdoch.duncan at gmail.com> writes:
>
>> Vitaly S. wrote:
>>> Martin Morgan <mtmorgan at fhcrc.org> writes:
>>>
>>>>> So, ?can I be sure that for such functions parent.frame(2) will always work?
>>>>> What are the additional rules?
>>>>>
>>>> callNextMethod() will cause additional problems; the idea that you'll
>>>> grab things from somewhere other than function arguments doesn't seem
>>>> like a robust design, even if it's used in some important parts of R.
>>>>
>>>> Martin
>>>>
>>>>
>>>
>>> That make it difficult to handle unevaluated expressions in methods. A solution
>>> would be to explicitly require the users to use quote() or expression(), ?and
>>> then to use the "expression" in the signature. Slightly unpleasant, though.
>>>
>>>
>>
>> You could use formulas for that. ?If you pass in
>>
>> formula = ~ x + y*z
>>
>> then environment(formula) will be the right evaluation environment, and formula[[2]] will be the unevaluated x +
>> y*z.
>>
>> Duncan Murdoch
>
> Thank you Duncan, I didn't know that.
>
> For programmatic use though, formula interface is slightly inconvenient. A
> specialized function and class would be desirable. With the advent of more and
> more complex S4 classes, unevaluated expressions in methods calls will became a
> necessity, that's my feeling.

I probably should move the quoting related out of plyr into it's own
package to facilitate this type of reuse. I think the current
structure is quite general.

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From spinuvit.list at gmail.com  Wed Aug 18 10:14:56 2010
From: spinuvit.list at gmail.com (Vitaly S.)
Date: Wed, 18 Aug 2010 10:14:56 +0200
Subject: [Rd] parent.frame(1) of a S4 method is not a calling
	environment.
In-Reply-To: <AANLkTikYjCwuMv2LC_Kx2sYmgm6JYLXkEyP7xR0xKark@mail.gmail.com>
	(Hadley Wickham's message of "Tue, 17 Aug 2010 21:31:44 -0500")
References: <87d3tj4ku4.fsf@gmail.com> <4C698DAC.3090704@fhcrc.org>
	<87wrrq2ns2.fsf@gmail.com> <4C6A630C.9020802@gmail.com>
	<87sk2c3k9j.fsf@gmail.com>
	<AANLkTikYjCwuMv2LC_Kx2sYmgm6JYLXkEyP7xR0xKark@mail.gmail.com>
Message-ID: <87ocd02v7j.fsf@gmail.com>

Hadley Wickham <hadley at rice.edu> writes:

> On Tuesday, August 17, 2010, Vitaly S. <spinuvit.list at gmail.com> wrote:
>> Duncan Murdoch <murdoch.duncan at gmail.com> writes:
>>
>>> Vitaly S. wrote:
>>>> Martin Morgan <mtmorgan at fhcrc.org> writes:
>>>>
>>>>>> So, ?can I be sure that for such functions parent.frame(2) will always work?
>>>>>> What are the additional rules?
>>>>>>
>>>>> callNextMethod() will cause additional problems; the idea that you'll
>>>>> grab things from somewhere other than function arguments doesn't seem
>>>>> like a robust design, even if it's used in some important parts of R.
>>>>>
>>>>> Martin
>>>>>
>>>>>
>>>>
>>>> That make it difficult to handle unevaluated expressions in methods. A solution
>>>> would be to explicitly require the users to use quote() or expression(), ?and
>>>> then to use the "expression" in the signature. Slightly unpleasant, though.
>>>>
>>>>
>>>
>>> You could use formulas for that. ?If you pass in
>>>
>>> formula = ~ x + y*z
>>>
>>> then environment(formula) will be the right evaluation environment, and formula[[2]] will be the unevaluated x +
>>> y*z.
>>>
>>> Duncan Murdoch
>>
>> Thank you Duncan, I didn't know that.
>>
>> For programmatic use though, formula interface is slightly inconvenient. A
>> specialized function and class would be desirable. With the advent of more and
>> more complex S4 classes, unevaluated expressions in methods calls will became a
>> necessity, that's my feeling.
>
> I probably should move the quoting related out of plyr into it's own
> package to facilitate this type of reuse. I think the current
> structure is quite general.

That would be neat. An S4 class "quote" which would store the parent.frame as a
slot would be great! 

>
> Hadley


From janko.thyson at ku-eichstaett.de  Wed Aug 18 11:55:59 2010
From: janko.thyson at ku-eichstaett.de (Janko Thyson)
Date: Wed, 18 Aug 2010 11:55:59 +0200
Subject: [Rd] [R] Problems building own package (Error: "package hasbeen
	build before R-2.10.0")
In-Reply-To: <77EB52C6DD32BA4D87471DCD70C8D70003522217@NA-PA-VBE03.na.tibco.com>
References: <004701cb3e3b$19f79680$4de6c380$@thyson@ku-eichstaett.de><4C6AEA2C.2040904@statistik.tu-dortmund.de>
	<006001cb3e47$cadb9760$6092c620$@thyson@ku-eichstaett.de>
	<77EB52C6DD32BA4D87471DCD70C8D70003522217@NA-PA-VBE03.na.tibco.com>
Message-ID: <001c01cb3ebb$8f713a80$ae53af80$@thyson@ku-eichstaett.de>


> -----Urspr?ngliche Nachricht-----
> Von: William Dunlap [mailto:wdunlap at tibco.com]
> Gesendet: Dienstag, 17. August 2010 22:25
> An: Janko Thyson
> Betreff: RE: [Rd] [R] Problems building own package (Error: "package
> hasbeen build before R-2.10.0")
> 
> > ...
> > > > R CMD check mypackage works fine (no errors, no warnings)
> > > >
> > > > R CMD build mypackage works fine (no errors, no warnings)
> > > >
> > > > R CMD INSTALL -library="C:\R\R-2.11.1\library"
> > > > "something\mypackage\mypackage_1.0.tar.gz" works fine (no
> > errors, no
> > > > warnings)
> > > >
> > > >
> > > >
> > > > However, when I try loading the package in an R-Session (version
> > > 2.11.1) via
> > > > "library(mypackage)", R complains about the package being build
> > > before
> > > > version R-2.10.0 and tells me to rebuild it.
> 
> Start R by typing 'R' (no other arguments) from the same
> command window that you used for the 'R CMD ...' commands.
> You ought to be able to load the package without warning
> from that session.  Compare the output of Sys.getenv("R_HOME")
> and/or print(version) in that session and the in a session
> that could not load the package without warnings.
> 
> Bill Dunlap
> Spotfire, TIBCO Software
> wdunlap tibco.com

Hi Bill,

thanks for the suggestion. I don't quite get it, but even though version
2.11.1 was the only one in my PATH, it was always version 2.9.1 that was
called when using R CMD. I could only resolve it by uninstalling version
2.9.1, which is totally fine considering we're at 2.11.1 now ;-)

Janko

> > >
> > >
> > > So the R that is in your PATH is  < 2.10.x
> > > Change your PATH and add the R version your are actually working
> > > with....
> >
> > As I wrote: "My PATH is set up as explained in the R-Admin
> > manual. Also, the
> > only R version stated there is "C:\R\R-2.11.1\bin;".
> >
> > > Uwe Ligges
> > >
> > >
> > > >
> > > >
> > > > Could this possibly be due to the fact that I have multiple R
> > > versions
> > > > installed (this also includes the most recent one, though)?
> > > >
> > > >
> > > >
> > > > To provide you with some details:
> > > >
> > > > -          Running Windows XP
> > > >
> > > > -          All of my R versions are under "C:\R" (versions 2.9.2,
> > > 2.10.1,
> > > > 2.11.1).
> > > >
> > > > -          I installed Rtools (version 2.1.2) to "C:\Rtools" and
> > > pointed it
> > > > to "C:\R" (as this was the default) to interact with R
> > (should this
> > > maybe
> > > > have been "C:\R\R-2.11.1"?). I also installed everything else
> > > necessary to
> > > > build packages (Inno Setup etc.).
> > > >
> > > > -          My PATH is set up as explained in R-Admin manual.
> Also,
> > > the only
> > > > R version stated there is "C:\R\R-2.11.1\bin;".
> > > >
> > > > -          I updated the DESCRIPTION file and specified
> > all .Rd files
> > > > correctly.
> > > >
> > > >
> > > >
> > > > Any idea what I'm doing wrong?
> > > >
> > > >
> > > >
> > > > Thanks a ton,
> > > >
> > > > Janko
> > > >
> > > >
> > > >
> > > >    _____
> > > >
> > > >
> > > >
> > > > Janko Thyson
> > > >   <mailto:holger.koemm at ku-eichstaett.de>  janko.thyson at ku-
> > > eichstaett.de
> > > >
> > > > Catholic University of Eichst?tt-Ingolstadt
> > > > Ingolstadt School of Management
> > > > Statistics and Quantitative Methods
> > > > Auf der Schanz 49
> > > > D-85049 Ingolstadt
> > > >
> > > >   <http://www.wfi.edu/lsqm>  www.wfi.edu/lsqm
> > > >
> > > > Fon:  +49 841 937-1923
> > > > Fax:  +49 841 937-1965
> > > >
> > > > This e-mail and any attachment is for authorized use by
> > the intended
> > > > recipient(s) only. It may contain proprietary material,
> > confidential
> > > > information and/or be subject to legal privilege. It should not
> be
> > > > copied, disclosed to, retained or used by any other party.
> > > > If you are not an intended recipient then please promptly
> > delete this
> > > > e-mail and any attachment and all copies and inform the sender.
> > > >
> > > >
> > > >
> > > >    _____
> > > >
> > > >
> > > >
> > > >
> > > > 	[[alternative HTML version deleted]]
> > > >
> > > >
> > > >
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide http://www.R-
> project.org/posting-
> > > guide.html
> > > > and provide commented, minimal, self-contained, reproducible
> code.
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >


From ripley at stats.ox.ac.uk  Wed Aug 18 14:34:24 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 18 Aug 2010 13:34:24 +0100 (BST)
Subject: [Rd] 32/64-bit Windows builds for R-devel
Message-ID: <alpine.LFD.2.00.1008181003120.20152@gannet.stats.ox.ac.uk>

We now have the integrated 32/64-bit installer for R-devel available from 
http://cran.r-project.org/bin/windows/base/rdevel.html , and binary builds of 
almost all the CRAN packages from CRAN or CRAN extras (and BioC 2.7 has a 
fairly complete 32/64-bit repository).  There is also a win-builder service 
available for R-devel.

These are built with different toolchains from R 2.11.x, using gcc 4.5.0 for 
32-bit and 4.5.1 without leading underscores for 64-bit.

We intend now to stop work on 64-bit Windows builds for 2.11.x: automated 
updates to the repositories will still be done, but no more manual updates. 
People using 64-bit Windows builds of R are advised to migrate to an R-devel 
snapshot.

Because of the volunteers' vacations, there will be minimal support for 
Windows' binary packages for the next month and in particular package updates 
may be delayed.

Some packages still need updates (apart from those already updated on 
CRAN extras) for use on Windows with R-devel, notably

lossDev mvabund phylobase RInside Rserve xlsReadWrite

Brian Ripley

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From janko.thyson at ku-eichstaett.de  Wed Aug 18 22:28:54 2010
From: janko.thyson at ku-eichstaett.de (Janko Thyson)
Date: Wed, 18 Aug 2010 22:28:54 +0200
Subject: [Rd] Automatically retrieve correct collation
Message-ID: <006401cb3f13$fa7485a0$ef5d90e0$@thyson@ku-eichstaett.de>

Dear List,

consider the following scenario:

setClass(Class = "A", representation = representation(B = "B", C = "C")) 
setClass(Class = "B", representation = representation(C = "C")) 
setClass(Class = "C", representation = representation(something =
"character"))

Obviously, the collation for sourcing these defs needs to be: C, B, A. Which
doesn't correspond to the default collation of R (alphabetically).

I've tried to pick up on how to ensure the right collation when building R
Packages by reading some previous posts and as far as I understand I've
basically got two options here:
1) Put all class defs in one script, e.g. allClasses.R.
2) Manually specify the collation via the "Collate" field in the DESCRIPTION
file.

I'm used to organizing my classes, generics, methods etc. on a
"one-per-script" basis in various subdirectories (e.g. R/classes, R/methods
etc.) and try automate manual steps wherever possible (not sure if that's
the way most of you guys code, but it definitely helped me stay on top of
things). But this doesn't really go well with my two options above, does it?
;-)

So I thought about setting up a routine that 
- investigates the source code of all classes (via parsing and looking into
the "representation" argument) 
- finds out the valid collation by itself based on all classes that it found
in the representation argument of the respective class defs 
- and then writes all the class defs to one R script, e.g.  allClasses.R, so
I can bundle all my code in an R Package without worrying about the
collation.

This way I could stick to my old habits while automating the process of
building a package a bit ;-)

Now, I managed to get this done for "simple" class defs like the ones above
but haven't looked into more complex class defs (e.g. including "contains"
etc.) yet.

Has anyone tried and succeeded in doing something similar or are all of you
into the "one-script-contains-all" paradigm? If anyone is interested, I'd be
glad to share code. Likewise I'd be interested in hearing about other "best
practices" in this respect.

Best regards,
Janko


From ggrothendieck at gmail.com  Thu Aug 19 00:23:22 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 18 Aug 2010 18:23:22 -0400
Subject: [Rd] c.POSIXct
In-Reply-To: <AANLkTinGcXRQd5+Xmo2ad5HoofdbzhZbEaSznAgCL3vO@mail.gmail.com>
References: <AANLkTinGcXRQd5+Xmo2ad5HoofdbzhZbEaSznAgCL3vO@mail.gmail.com>
Message-ID: <AANLkTin=8k4UfBqzjQmHa9ntQP3V9zhuhsfkL_qzZyWi@mail.gmail.com>

No one answered this so I submitted it to the bugs system and there I
got the response that it is documented behavior; however, whether its
documented or not is hardly the point -- its undesirable that tzone is
lost when using c.

On Thu, Aug 12, 2010 at 11:33 AM, Gabor Grothendieck
<ggrothendieck at gmail.com> wrote:
> Currently if x1 and x2 are POSIXct then c(x1, x2) will not have a
> tzone attribute even if x1 or x2 or both do but it should.
>
> This could be fixed with the following c.POSIXct:
>
> c.POSIXct <- function (..., recursive = FALSE) {
> ? ? ? ?tzones <- lapply(list(...), attr, which = "tzone")
> ? ? ? ?lengths <- sapply(tzones, length)
> ? ? ? ?if (any(lengths > 1)) stop("tzone cannot have length greater than 1")
> ? ? ? ?which <- sapply(tzones, length) == 1
> ? ? ? ?tzone <- unique(unlist(tzones[which]))
> ? ? ? ?if (length(tzone) != 1) tzone <- NULL
> structure(c(unlist(lapply(list(...), unclass))), class = c("POSIXt",
> ? ?"POSIXct"), tzone = tzone)
> }
>
> # test
> x1 <- Sys.time()
> x2 <- structure(x1, tzone = "UTC")
> x3 <- structure(x1, tzone = "other")
>
> # these all currently give NULL but with
> # above give indicated value
>
> attr(c(x1, x1), "tzone") # NULL
> attr(c(x2, x2), "tzone") # "UTC"
> attr(c(x1, x2), "tzone") # "UTC"
> attr(c(x2, x1), "tzone") # "UTC"
> attr(c(x1, x2, x3), "tzone") # NULL
>


From spencer.graves at structuremonitoring.com  Thu Aug 19 03:00:51 2010
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Wed, 18 Aug 2010 18:00:51 -0700
Subject: [Rd] perl.exe has stopped working
Message-ID: <4C6C8243.6000606@structuremonitoring.com>

  Hello:


       I just installed 14 security updates for Vista x64, and now "R 
CMD build packagename" terminates, saying, "perl.exe has stopped 
working".  I reinstalled Rtools211 using the latest version after 
uninstalling the version I installed on 4/3/2010.


       What do you suggest?  I can install the latest version of perl 
from "www.perl.org" (5.12.1), but I thought I'd ask here first.


       Thanks,
       Best Wishes,
       Spencer Graves


From simon.urbanek at r-project.org  Thu Aug 19 04:34:58 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 18 Aug 2010 22:34:58 -0400
Subject: [Rd] c.POSIXct
In-Reply-To: <AANLkTin=8k4UfBqzjQmHa9ntQP3V9zhuhsfkL_qzZyWi@mail.gmail.com>
References: <AANLkTinGcXRQd5+Xmo2ad5HoofdbzhZbEaSznAgCL3vO@mail.gmail.com>
	<AANLkTin=8k4UfBqzjQmHa9ntQP3V9zhuhsfkL_qzZyWi@mail.gmail.com>
Message-ID: <257F72DF-1C81-439A-8893-76B793C9820C@r-project.org>


On Aug 18, 2010, at 6:23 PM, Gabor Grothendieck wrote:

> No one answered this so I submitted it to the bugs system and there I
> got the response that it is documented behavior; however, whether its
> documented or not is hardly the point -- its undesirable that tzone is
> lost when using c.
> 

That's one man's opinion - from docs 

  if you want to specify an object in a particular timezone but
   to be printed in the current timezone you may want to remove the
   ?"tzone"? attribute (e.g. by ?c(x)?).

so apparently that is a design choice and hence I doubt it can be changed as it would break code that uses that feature. As many things in R whether it was a good choice is up for debate but it has been made already. (Think about how you would combine different times with different tzones - there is no "right" way to do so and thus stripping is very plausible and consistent)

Cheers,
Simon




> On Thu, Aug 12, 2010 at 11:33 AM, Gabor Grothendieck
> <ggrothendieck at gmail.com> wrote:
>> Currently if x1 and x2 are POSIXct then c(x1, x2) will not have a
>> tzone attribute even if x1 or x2 or both do but it should.
>> 
>> This could be fixed with the following c.POSIXct:
>> 
>> c.POSIXct <- function (..., recursive = FALSE) {
>>        tzones <- lapply(list(...), attr, which = "tzone")
>>        lengths <- sapply(tzones, length)
>>        if (any(lengths > 1)) stop("tzone cannot have length greater than 1")
>>        which <- sapply(tzones, length) == 1
>>        tzone <- unique(unlist(tzones[which]))
>>        if (length(tzone) != 1) tzone <- NULL
>> structure(c(unlist(lapply(list(...), unclass))), class = c("POSIXt",
>>    "POSIXct"), tzone = tzone)
>> }
>> 
>> # test
>> x1 <- Sys.time()
>> x2 <- structure(x1, tzone = "UTC")
>> x3 <- structure(x1, tzone = "other")
>> 
>> # these all currently give NULL but with
>> # above give indicated value
>> 
>> attr(c(x1, x1), "tzone") # NULL
>> attr(c(x2, x2), "tzone") # "UTC"
>> attr(c(x1, x2), "tzone") # "UTC"
>> attr(c(x2, x1), "tzone") # "UTC"
>> attr(c(x1, x2, x3), "tzone") # NULL
>> 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From ggrothendieck at gmail.com  Thu Aug 19 04:53:25 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 18 Aug 2010 22:53:25 -0400
Subject: [Rd] c.POSIXct
In-Reply-To: <257F72DF-1C81-439A-8893-76B793C9820C@r-project.org>
References: <AANLkTinGcXRQd5+Xmo2ad5HoofdbzhZbEaSznAgCL3vO@mail.gmail.com>
	<AANLkTin=8k4UfBqzjQmHa9ntQP3V9zhuhsfkL_qzZyWi@mail.gmail.com>
	<257F72DF-1C81-439A-8893-76B793C9820C@r-project.org>
Message-ID: <AANLkTi=wd0jcTUhpAJpofxUJy5fB3apLKq8704DV6k6q@mail.gmail.com>

On Wed, Aug 18, 2010 at 10:34 PM, Simon Urbanek
<simon.urbanek at r-project.org> wrote:
>
> On Aug 18, 2010, at 6:23 PM, Gabor Grothendieck wrote:
>
>> No one answered this so I submitted it to the bugs system and there I
>> got the response that it is documented behavior; however, whether its
>> documented or not is hardly the point -- its undesirable that tzone is
>> lost when using c.
>>
>
> That's one man's opinion - from docs
>
> ?if you want to specify an object in a particular timezone but
> ? to be printed in the current timezone you may want to remove the
> ? ?"tzone"? attribute (e.g. by ?c(x)?).
>
> so apparently that is a design choice and hence I doubt it can be changed as it would break code that uses that feature. As many things in R whether it was a good choice is up for debate but it has been made already. (Think about how you would combine different times with different tzones - there is no "right" way to do so and thus stripping is very plausible and consistent)
>

I did already address the ambiguity point in the suggested code that I
posted.  It only maintains the tzone if there is no ambiguity.

Note that there have been significant changes in POSIXt relatively
recently, namely switching POSIXt and POSIXct class order, so it seems
that such changes are not beyond possibility.

At any rate, the underlying objective of getting time zones to work in
the expected way still seems desirable.  If backward compatibility is
to be invoked (even though it wasnt in the case I just cited) then it
would still be possible to address this with a new core class or
subclass.


From spencer.graves at structuremonitoring.com  Thu Aug 19 06:20:28 2010
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Wed, 18 Aug 2010 21:20:28 -0700
Subject: [Rd] c.POSIXct
In-Reply-To: <AANLkTi=wd0jcTUhpAJpofxUJy5fB3apLKq8704DV6k6q@mail.gmail.com>
References: <AANLkTinGcXRQd5+Xmo2ad5HoofdbzhZbEaSznAgCL3vO@mail.gmail.com>	<AANLkTin=8k4UfBqzjQmHa9ntQP3V9zhuhsfkL_qzZyWi@mail.gmail.com>	<257F72DF-1C81-439A-8893-76B793C9820C@r-project.org>
	<AANLkTi=wd0jcTUhpAJpofxUJy5fB3apLKq8704DV6k6q@mail.gmail.com>
Message-ID: <4C6CB10C.3000204@structuremonitoring.com>

        I'm with Gabor on this.  I naively would not expect c() to strip 
attributes generally, and I've been surprise more than once to find the 
time zone attribute stripped when I did not expect that.


       Might it make sense to add an argument like 
"keepAttributes=FALSE" to the "c" function?  Then people like Gabor and 
me would know that we would have to specify "keepAttributes = TRUE" if 
we wanted attributes to be kept.  Having this in the documentation would 
also help advertise the default behavior.  I would expect that 
attributes like "dim" and "dimnames" should always be dropped, 
regardless of the value of "keepAttributes".  With "keepAttributes = 
TRUE", "names" would be concatenated, and other attributes would be 
taken from the first argument with other attributes of later arguments 
ignored.


QUESTIONS:


       1.  With POSIXct, isn't the numeric part always in GMT, 
regardless of time zone?  Then the "tzone" attribute only affects the 
display?  Consider the following:


 > (z <- Sys.time())
[1] "2010-08-18 21:16:38 PDT"
 > as.numeric(z)
[1] 1282191399
 > attr(z, 'tzone') <- 'GMT'
 > as.numeric(z)
[1] 1282191399
 > z
[1] "2010-08-19 04:16:38 GMT"


       2.  How can one specify a time zone other than "GMT" and the 
default local time zone?

 > attr(z, 'tzone') <- Sys.timezone()
 > z
[1] "2010-08-19 04:16:38 GMT"
Warning message:
In as.POSIXlt.POSIXct(x, tz) : unknown timezone 'PDT'


       Thanks,
       Spencer Graves


On 8/18/2010 7:53 PM, Gabor Grothendieck wrote:
> On Wed, Aug 18, 2010 at 10:34 PM, Simon Urbanek
> <simon.urbanek at r-project.org>  wrote:
>> On Aug 18, 2010, at 6:23 PM, Gabor Grothendieck wrote:
>>
>>> No one answered this so I submitted it to the bugs system and there I
>>> got the response that it is documented behavior; however, whether its
>>> documented or not is hardly the point -- its undesirable that tzone is
>>> lost when using c.
>>>
>> That's one man's opinion - from docs
>>
>>   if you want to specify an object in a particular timezone but
>>    to be printed in the current timezone you may want to remove the
>>    ?"tzone"? attribute (e.g. by ?c(x)?).
>>
>> so apparently that is a design choice and hence I doubt it can be changed as it would break code that uses that feature. As many things in R whether it was a good choice is up for debate but it has been made already. (Think about how you would combine different times with different tzones - there is no "right" way to do so and thus stripping is very plausible and consistent)
>>
> I did already address the ambiguity point in the suggested code that I
> posted.  It only maintains the tzone if there is no ambiguity.
>
> Note that there have been significant changes in POSIXt relatively
> recently, namely switching POSIXt and POSIXct class order, so it seems
> that such changes are not beyond possibility.
>
> At any rate, the underlying objective of getting time zones to work in
> the expected way still seems desirable.  If backward compatibility is
> to be invoked (even though it wasnt in the case I just cited) then it
> would still be possible to address this with a new core class or
> subclass.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


-- 
Spencer Graves, PE, PhD
President and Chief Operating Officer
Structure Inspection and Monitoring, Inc.
751 Emerson Ct.
San Jos?, CA 95126
ph:  408-655-4567


From baptiste.auguie at googlemail.com  Thu Aug 19 07:41:27 2010
From: baptiste.auguie at googlemail.com (baptiste auguie)
Date: Thu, 19 Aug 2010 07:41:27 +0200
Subject: [Rd] Automatically retrieve correct collation
In-Reply-To: <2360006184819033722@unknownmsgid>
References: <2360006184819033722@unknownmsgid>
Message-ID: <AANLkTim-o8iJ9=PdTa4AE70HytfuJHm-uyQpeyRLqG7E@mail.gmail.com>

Hi,

roxygen can create the collate field for you, if you specify the
dependencies in the commented code. I've never tested it with S4
classes though.

HTH,

baptiste

On 18 August 2010 22:28, Janko Thyson <janko.thyson at ku-eichstaett.de> wrote:
> Dear List,
>
> consider the following scenario:
>
> setClass(Class = "A", representation = representation(B = "B", C = "C"))
> setClass(Class = "B", representation = representation(C = "C"))
> setClass(Class = "C", representation = representation(something =
> "character"))
>
> Obviously, the collation for sourcing these defs needs to be: C, B, A. Which
> doesn't correspond to the default collation of R (alphabetically).
>
> I've tried to pick up on how to ensure the right collation when building R
> Packages by reading some previous posts and as far as I understand I've
> basically got two options here:
> 1) Put all class defs in one script, e.g. allClasses.R.
> 2) Manually specify the collation via the "Collate" field in the DESCRIPTION
> file.
>
> I'm used to organizing my classes, generics, methods etc. on a
> "one-per-script" basis in various subdirectories (e.g. R/classes, R/methods
> etc.) and try automate manual steps wherever possible (not sure if that's
> the way most of you guys code, but it definitely helped me stay on top of
> things). But this doesn't really go well with my two options above, does it?
> ;-)
>
> So I thought about setting up a routine that
> - investigates the source code of all classes (via parsing and looking into
> the "representation" argument)
> - finds out the valid collation by itself based on all classes that it found
> in the representation argument of the respective class defs
> - and then writes all the class defs to one R script, e.g. ?allClasses.R, so
> I can bundle all my code in an R Package without worrying about the
> collation.
>
> This way I could stick to my old habits while automating the process of
> building a package a bit ;-)
>
> Now, I managed to get this done for "simple" class defs like the ones above
> but haven't looked into more complex class defs (e.g. including "contains"
> etc.) yet.
>
> Has anyone tried and succeeded in doing something similar or are all of you
> into the "one-script-contains-all" paradigm? If anyone is interested, I'd be
> glad to share code. Likewise I'd be interested in hearing about other "best
> practices" in this respect.
>
> Best regards,
> Janko
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
____________________

Dr. Baptiste Augui?

Departamento de Qu?mica F?sica,
Universidade de Vigo,
Campus Universitario, 36310, Vigo, Spain

tel: +34 9868 18617
http://webs.uvigo.es/coloides


From ripley at stats.ox.ac.uk  Thu Aug 19 08:55:22 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 19 Aug 2010 07:55:22 +0100 (BST)
Subject: [Rd] One possible cause for incorrect symbols in X11() output
Message-ID: <alpine.LFD.2.00.1008190738170.362@gannet.stats.ox.ac.uk>

There have been spasmodic reports of symbols such as pi and infinity 
in plotmath being reproduced incorrectly on the X11 device on some 
Linux systems (at least Ubuntu 10 and Fedora 12/13), and we've managed 
to track down one cause whilst investigating PR#14355.

Some systems have Wine and hence the Wine symbol font installed. 
'fontconfig', which is used by cairographics in X11(type='cairo') and 
many other applications, prefers the Wine symbol font to the standard 
Type 1 URW font, and seems to misinterpret its encoding.

You may well have Wine installed without realizing it (as I did) -- it 
is increasingly common as a dependency of other software. The best 
test is to run

% fc-match symbol
s050000l.pfb: "Standard Symbols L" "Regular"

This is the result on a system without Wine: if you see

% fc-match symbol
symbol.ttf: "Symbol" "Regular"

you at least potentially have the problem.  A good test is to look at 
?points and run the function TestChars() defined there as

TestChars(font=5)

If you do have the problem, a workaround is to add the following lines 
to ~/.fonts.conf or /etc/fonts/local.conf (which you may need to 
create):

<match target="pattern">
   <test name="family"><string>Symbol</string></test>
   <edit name="family" mode="prepend" binding="same">
     <string>Standard Symbols L</string>
   </edit>
</match>

and repeat the fc-match test to check that it worked.

(This workaround was culled from
https://bugs.launchpad.net/ubuntu/+source/fontconfig/+bug/551977
)

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jari.oksanen at oulu.fi  Thu Aug 19 09:15:10 2010
From: jari.oksanen at oulu.fi (Jari Oksanen)
Date: Thu, 19 Aug 2010 10:15:10 +0300
Subject: [Rd] One possible cause for incorrect symbols in X11() output
In-Reply-To: <alpine.LFD.2.00.1008190738170.362@gannet.stats.ox.ac.uk>
Message-ID: <C892B4AE.10F0F%jari.oksanen@oulu.fi>

On 19/08/10 09:55 AM, "Prof Brian Ripley" <ripley at stats.ox.ac.uk> wrote:

> There have been spasmodic reports of symbols such as pi and infinity
> in plotmath being reproduced incorrectly on the X11 device on some
> Linux systems (at least Ubuntu 10 and Fedora 12/13), and we've managed
> to track down one cause whilst investigating PR#14355.
> 
> Some systems have Wine and hence the Wine symbol font installed.
> 'fontconfig', which is used by cairographics in X11(type='cairo') and
> many other applications, prefers the Wine symbol font to the standard
> Type 1 URW font, and seems to misinterpret its encoding.
> 
> You may well have Wine installed without realizing it (as I did) -- it
> is increasingly common as a dependency of other software. The best
> test is to run
> 
> % fc-match symbol
> s050000l.pfb: "Standard Symbols L" "Regular"
> 
> This is the result on a system without Wine: if you see
> 
> % fc-match symbol
> symbol.ttf: "Symbol" "Regular"
> 
This seems to be the case with MacOS (10.6.4):

$ uname -a
Darwin lettu-2.local 10.4.0 Darwin Kernel Version 10.4.0: Fri Apr 23
18:28:53 PDT 2010; root:xnu-1504.7.4~1/RELEASE_I386 i386
$ fc-match symbol
Symbol.ttf: "Symbol" "???"

The X11(type = 'cairo') shows the problem with example(points);
TestChars(font=5). However, there is no problem with the default device
(quartz), nor with the default X11() which has type = 'Xlib' (unlike
documented in ?X11: 'cairo' is available but 'Xlib' still used).

What ever this is worth of (if this is worthless, I'll surely hear about
it).

Cheers, Jari Oksanen


From pdalgd at gmail.com  Thu Aug 19 10:21:01 2010
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 19 Aug 2010 10:21:01 +0200
Subject: [Rd] One possible cause for incorrect symbols in X11() output
In-Reply-To: <C892B4AE.10F0F%jari.oksanen@oulu.fi>
References: <C892B4AE.10F0F%jari.oksanen@oulu.fi>
Message-ID: <D57304D0-70AD-469E-BF69-2050F9429E89@gmail.com>


On Aug 19, 2010, at 9:15 AM, Jari Oksanen wrote:


> 
> The X11(type = 'cairo') shows the problem with example(points);
> TestChars(font=5). However, there is no problem with the default device
> (quartz), nor with the default X11() which has type = 'Xlib' (unlike
> documented in ?X11: 'cairo' is available but 'Xlib' still used).
> 
> What ever this is worth of (if this is worthless, I'll surely hear about
> it).

Well, maybe not worthless, but the X11 setup on Mac is poor in general. type="Xlib" appears plainly not to work, and even disregarding the pi issue, the rotated y-axis labels come out pretty ugly. This is why quartz is now the default on OSX. 

BTW, it seems that the standard X11 "Symbol","Regular" font is simply absent on OSX. I can't get fc-match to list it, anyway.

-- 
Peter Dalgaard
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From janko.thyson at ku-eichstaett.de  Thu Aug 19 10:35:45 2010
From: janko.thyson at ku-eichstaett.de (Janko Thyson)
Date: Thu, 19 Aug 2010 10:35:45 +0200
Subject: [Rd] Automatically retrieve correct collation
In-Reply-To: <AANLkTim-o8iJ9=PdTa4AE70HytfuJHm-uyQpeyRLqG7E@mail.gmail.com>
References: <2360006184819033722@unknownmsgid>
	<AANLkTim-o8iJ9=PdTa4AE70HytfuJHm-uyQpeyRLqG7E@mail.gmail.com>
Message-ID: <000001cb3f79$84602fc0$8d208f40$@thyson@ku-eichstaett.de>

> -----Urspr?ngliche Nachricht-----
> Von: baptiste auguie [mailto:baptiste.auguie at googlemail.com]
> Gesendet: Donnerstag, 19. August 2010 07:41
> An: Janko Thyson
> Cc: r-devel at r-project. org
> Betreff: Re: [Rd] Automatically retrieve correct collation
> 
> Hi,
> 
> roxygen can create the collate field for you, if you specify the
> dependencies in the commented code. I've never tested it with S4
> classes though.
> 
> HTH,
> 
> baptiste

Thanks Baptiste,

I will have a look at Roxygen.

Janko

> 
> On 18 August 2010 22:28, Janko Thyson <janko.thyson at ku-eichstaett.de>
> wrote:
> > Dear List,
> >
> > consider the following scenario:
> >
> > setClass(Class = "A", representation = representation(B = "B", C =
> "C"))
> > setClass(Class = "B", representation = representation(C = "C"))
> > setClass(Class = "C", representation = representation(something =
> > "character"))
> >
> > Obviously, the collation for sourcing these defs needs to be: C, B,
> A. Which
> > doesn't correspond to the default collation of R (alphabetically).
> >
> > I've tried to pick up on how to ensure the right collation when
> building R
> > Packages by reading some previous posts and as far as I understand
> I've
> > basically got two options here:
> > 1) Put all class defs in one script, e.g. allClasses.R.
> > 2) Manually specify the collation via the "Collate" field in the
> DESCRIPTION
> > file.
> >
> > I'm used to organizing my classes, generics, methods etc. on a
> > "one-per-script" basis in various subdirectories (e.g. R/classes,
> R/methods
> > etc.) and try automate manual steps wherever possible (not sure if
> that's
> > the way most of you guys code, but it definitely helped me stay on
> top of
> > things). But this doesn't really go well with my two options above,
> does it?
> > ;-)
> >
> > So I thought about setting up a routine that
> > - investigates the source code of all classes (via parsing and
> looking into
> > the "representation" argument)
> > - finds out the valid collation by itself based on all classes that
> it found
> > in the representation argument of the respective class defs
> > - and then writes all the class defs to one R script, e.g.
> ?allClasses.R, so
> > I can bundle all my code in an R Package without worrying about the
> > collation.
> >
> > This way I could stick to my old habits while automating the process
> of
> > building a package a bit ;-)
> >
> > Now, I managed to get this done for "simple" class defs like the ones
> above
> > but haven't looked into more complex class defs (e.g. including
> "contains"
> > etc.) yet.
> >
> > Has anyone tried and succeeded in doing something similar or are all
> of you
> > into the "one-script-contains-all" paradigm? If anyone is interested,
> I'd be
> > glad to share code. Likewise I'd be interested in hearing about other
> "best
> > practices" in this respect.
> >
> > Best regards,
> > Janko
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> 
> 
> 
> --
> ____________________
> 
> Dr. Baptiste Augui?
> 
> Departamento de Qu?mica F?sica,
> Universidade de Vigo,
> Campus Universitario, 36310, Vigo, Spain
> 
> tel: +34 9868 18617
> http://webs.uvigo.es/coloides
> ____________________


From ubuntulist at yandex.ru  Thu Aug 19 11:03:27 2010
From: ubuntulist at yandex.ru (Vyacheslav Karamov)
Date: Thu, 19 Aug 2010 12:03:27 +0300
Subject: [Rd] C or Java code generation
Message-ID: <4C6CF35F.9040305@yandex.ru>

Hi All!

I'm new to R and I need to know is it possible for R to generate C/C++ 
source code, Java byte code or native Win32 DLL like MatLab?

---
WBR,
Vyacheslav.


From ubuntulist at yandex.ru  Thu Aug 19 11:45:41 2010
From: ubuntulist at yandex.ru (Vyacheslav Karamov)
Date: Thu, 19 Aug 2010 12:45:41 +0300
Subject: [Rd] C or Java code generation
In-Reply-To: <AANLkTimDKD058Z+UQK2Z8EucsVsbE-T+dRe2h5EG-HYc@mail.gmail.com>
References: <4C6CF35F.9040305@yandex.ru>
	<AANLkTimDKD058Z+UQK2Z8EucsVsbE-T+dRe2h5EG-HYc@mail.gmail.com>
Message-ID: <4C6CFD45.7050007@yandex.ru>

Daniel Cegie?ka ?????:
> http://www.rforge.net/r2c/
>
> regards,
> daniel
>
>
> 2010/8/19 Vyacheslav Karamov <ubuntulist at yandex.ru 
> <mailto:ubuntulist at yandex.ru>>
>
>     Hi All!
>
>     I'm new to R and I need to know is it possible for R to generate
>     C/C++ source code, Java byte code or native Win32 DLL like MatLab?
>
>     ---
>     WBR,
>     Vyacheslav.
>
>     ______________________________________________
>     R-devel at r-project.org <mailto:R-devel at r-project.org> mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
"Currently it is very experimantal and limited, intended for experiments 
with the language rather than real use"


From daniel.cegielka at gmail.com  Thu Aug 19 12:08:20 2010
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Thu, 19 Aug 2010 12:08:20 +0200
Subject: [Rd] C or Java code generation
In-Reply-To: <4C6CFD45.7050007@yandex.ru>
References: <4C6CF35F.9040305@yandex.ru>
	<AANLkTimDKD058Z+UQK2Z8EucsVsbE-T+dRe2h5EG-HYc@mail.gmail.com>
	<4C6CFD45.7050007@yandex.ru>
Message-ID: <AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100819/c7425fa4/attachment.pl>

From ubuntulist at yandex.ru  Thu Aug 19 12:47:30 2010
From: ubuntulist at yandex.ru (Vyacheslav Karamov)
Date: Thu, 19 Aug 2010 13:47:30 +0300
Subject: [Rd] C or Java code generation
In-Reply-To: <AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>
References: <4C6CF35F.9040305@yandex.ru>
	<AANLkTimDKD058Z+UQK2Z8EucsVsbE-T+dRe2h5EG-HYc@mail.gmail.com>
	<4C6CFD45.7050007@yandex.ru>
	<AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>
Message-ID: <4C6D0BC2.7070906@yandex.ru>

Daniel Cegie?ka ?????:
>
>
> 2010/8/19 Vyacheslav Karamov <ubuntulist at yandex.ru 
> <mailto:ubuntulist at yandex.ru>>
>
>     Daniel Cegie?ka ?????:
>
>         http://www.rforge.net/r2c/
>
>         regards,
>         daniel
>
>
>         2010/8/19 Vyacheslav Karamov <ubuntulist at yandex.ru
>         <mailto:ubuntulist at yandex.ru> <mailto:ubuntulist at yandex.ru
>         <mailto:ubuntulist at yandex.ru>>>
>
>
>            Hi All!
>
>            I'm new to R and I need to know is it possible for R to
>         generate
>            C/C++ source code, Java byte code or native Win32 DLL like
>         MatLab?
>
>            ---
>            WBR,
>            Vyacheslav.
>
>            ______________________________________________
>            R-devel at r-project.org <mailto:R-devel at r-project.org>
>         <mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>>
>         mailing list
>
>            https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
>     "Currently it is very experimantal and limited, intended for
>     experiments with the language rather than real use"
>
>
> ??????????? ;)
>
> exactly <http://www.dict.pl/dict?word=exactly&lang=PL>.. but Simon 
> usually has high quality of code.
> regards,
> daniel
Is there any posibility to use R without installing?
I mean that I have my own application written in MS Visual C++ and I 
need to use R script in this app. I can install R and use it via DCOM, 
but it's not convenient for  the end users of my  program.


From daniel.cegielka at gmail.com  Thu Aug 19 13:02:41 2010
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Thu, 19 Aug 2010 13:02:41 +0200
Subject: [Rd] C or Java code generation
In-Reply-To: <4C6D0BC2.7070906@yandex.ru>
References: <4C6CF35F.9040305@yandex.ru>
	<AANLkTimDKD058Z+UQK2Z8EucsVsbE-T+dRe2h5EG-HYc@mail.gmail.com>
	<4C6CFD45.7050007@yandex.ru>
	<AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>
	<4C6D0BC2.7070906@yandex.ru>
Message-ID: <AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100819/2f7e6231/attachment.pl>

From ripley at stats.ox.ac.uk  Thu Aug 19 13:04:06 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 19 Aug 2010 12:04:06 +0100 (BST)
Subject: [Rd] One possible cause for incorrect symbols in X11() output
In-Reply-To: <D57304D0-70AD-469E-BF69-2050F9429E89@gmail.com>
References: <C892B4AE.10F0F%jari.oksanen@oulu.fi>
	<D57304D0-70AD-469E-BF69-2050F9429E89@gmail.com>
Message-ID: <alpine.LFD.2.00.1008191014090.27390@gannet.stats.ox.ac.uk>

On Thu, 19 Aug 2010, peter dalgaard wrote:

>
> On Aug 19, 2010, at 9:15 AM, Jari Oksanen wrote:
>
>
>>
>> The X11(type = 'cairo') shows the problem with example(points);
>> TestChars(font=5). However, there is no problem with the default device
>> (quartz), nor with the default X11() which has type = 'Xlib' (unlike
>> documented in ?X11: 'cairo' is available but 'Xlib' still used).
>>
>> What ever this is worth of (if this is worthless, I'll surely hear about
>> it).
>
> Well, maybe not worthless, but the X11 setup on Mac is poor in 
> general. type="Xlib" appears plainly not to work, and even 
> disregarding the pi issue, the rotated y-axis labels come out pretty 
> ugly. This is why quartz is now the default on OSX.

The even more serious issue under cairo of confusing style and weight 
is discussed on ?X11.

> BTW, it seems that the standard X11 "Symbol","Regular" font is 
> simply absent on OSX. I can't get fc-match to list it, anyway.

R's X11(type='cairo') device is using a version of cairographics 
compiled by Simon which includes a static build of fontconfig.  So it 
is not really 'OSX'!  I'm guessing you are using 
/usr/local/bin/fc-match which AFAIK also Simon's.

It is also not using pango, and so not selecting fonts the same way as 
on Linux.

>
> -- 
> Peter Dalgaard
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jari.oksanen at oulu.fi  Thu Aug 19 13:15:16 2010
From: jari.oksanen at oulu.fi (Jari Oksanen)
Date: Thu, 19 Aug 2010 14:15:16 +0300
Subject: [Rd] One possible cause for incorrect symbols in X11() output
In-Reply-To: <alpine.LFD.2.00.1008191014090.27390@gannet.stats.ox.ac.uk>
Message-ID: <C892ECF4.10F2F%jari.oksanen@oulu.fi>

On 19/08/10 14:04 PM, "Prof Brian Ripley" <ripley at stats.ox.ac.uk> wrote:
 OSX. I can't get fc-match to list it, anyway.
> 
> R's X11(type='cairo') device is using a version of cairographics
> compiled by Simon which includes a static build of fontconfig.  So it
> is not really 'OSX'!  I'm guessing you are using
> /usr/local/bin/fc-match which AFAIK also Simon's.
>
$ which fc-match
/usr/X11/bin/fc-match

There seems to be no fc-match in /usr/local/bin/ in my Mac, so no Simon's
utilities. (But this is, of course, pretty irrelevant for the main subject,
and it seems that my installation of Ubuntu 10.04 is not affected by the
problem but has quite regular fonts -- no Wine today. Better that I shut
up).

Cheers, Jari Oksanen
> It is also not using pango, and so not selecting fonts the same way as
> on Linux.
>


From gavin.simpson at ucl.ac.uk  Thu Aug 19 13:26:50 2010
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Thu, 19 Aug 2010 12:26:50 +0100
Subject: [Rd] One possible cause for incorrect symbols in X11() output
In-Reply-To: <alpine.LFD.2.00.1008190738170.362@gannet.stats.ox.ac.uk>
References: <alpine.LFD.2.00.1008190738170.362@gannet.stats.ox.ac.uk>
Message-ID: <1282217210.2565.39.camel@localhost>

On Thu, 2010-08-19 at 07:55 +0100, Prof Brian Ripley wrote:
> There have been spasmodic reports of symbols such as pi and infinity 
> in plotmath being reproduced incorrectly on the X11 device on some 
> Linux systems (at least Ubuntu 10 and Fedora 12/13), and we've managed 
> to track down one cause whilst investigating PR#14355.
> 
> Some systems have Wine and hence the Wine symbol font installed. 
> 'fontconfig', which is used by cairographics in X11(type='cairo') and 
> many other applications, prefers the Wine symbol font to the standard 
> Type 1 URW font, and seems to misinterpret its encoding.
> 
> You may well have Wine installed without realizing it (as I did) -- it 
> is increasingly common as a dependency of other software. The best 
> test is to run
> 
> % fc-match symbol
> s050000l.pfb: "Standard Symbols L" "Regular"
> 
> This is the result on a system without Wine: if you see
> 
> % fc-match symbol
> symbol.ttf: "Symbol" "Regular"
> 
> you at least potentially have the problem.  A good test is to look at 
> ?points and run the function TestChars() defined there as
> 
> TestChars(font=5)
> 
> If you do have the problem, a workaround is to add the following lines 
> to ~/.fonts.conf or /etc/fonts/local.conf (which you may need to 
> create):
> 
> <match target="pattern">
>    <test name="family"><string>Symbol</string></test>
>    <edit name="family" mode="prepend" binding="same">
>      <string>Standard Symbols L</string>
>    </edit>
> </match>
> 
> and repeat the fc-match test to check that it worked.

Hi,

I tried the suggested change to ~/.fonts.conf but am getting an error
from fontconfig:

$ fc-match symbol
Fontconfig error: "~/.fonts.conf", line 10: junk after document element
s050000l.pfb: "Standard Symbols L" "Regular"
$ cat ~/.fonts.conf
<match target="pattern">
        <test name="family">
                <string>Symbol</string>
        </test>
        <edit name="family" mode="prepend" binding="same">
                <string>Standard Symbols L</string>
        </edit>
</match>

<alias binding="same">
       <family>ZapfDingbats</family>
       <accept><family>Dingbats</family></accept>
</alias>

I have an alias in there to solve the "q" symbol being used in Evince
etc in place of pch == 1.

Am I inserting this incorrectly?

Many thanks,

G

> 
> (This workaround was culled from
> https://bugs.launchpad.net/ubuntu/+source/fontconfig/+bug/551977
> )
> 

-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
 Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
 ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
 Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
 Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
 UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From ripley at stats.ox.ac.uk  Thu Aug 19 13:36:58 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 19 Aug 2010 12:36:58 +0100 (BST)
Subject: [Rd] One possible cause for incorrect symbols in X11() output
In-Reply-To: <1282217210.2565.39.camel@localhost>
References: <alpine.LFD.2.00.1008190738170.362@gannet.stats.ox.ac.uk>
	<1282217210.2565.39.camel@localhost>
Message-ID: <alpine.LFD.2.00.1008191234260.31727@gannet.stats.ox.ac.uk>

If you have more than one element in a fonts.conf file you need to 
group them, e.g.

<fontconfig>
<match target="pattern">
   <test name="family"><string>Symbol</string></test>
   <edit name="family" mode="prepend" binding="same">
     <string>Standard Symbols L</string>
   </edit>
</match>

<alias binding="same">
        <family>ZapfDingbats</family>
        <accept><family>Dingbats</family></accept>
</alias>
</fontconfig>


On Thu, 19 Aug 2010, Gavin Simpson wrote:

> On Thu, 2010-08-19 at 07:55 +0100, Prof Brian Ripley wrote:
>> There have been spasmodic reports of symbols such as pi and infinity
>> in plotmath being reproduced incorrectly on the X11 device on some
>> Linux systems (at least Ubuntu 10 and Fedora 12/13), and we've managed
>> to track down one cause whilst investigating PR#14355.
>>
>> Some systems have Wine and hence the Wine symbol font installed.
>> 'fontconfig', which is used by cairographics in X11(type='cairo') and
>> many other applications, prefers the Wine symbol font to the standard
>> Type 1 URW font, and seems to misinterpret its encoding.
>>
>> You may well have Wine installed without realizing it (as I did) -- it
>> is increasingly common as a dependency of other software. The best
>> test is to run
>>
>> % fc-match symbol
>> s050000l.pfb: "Standard Symbols L" "Regular"
>>
>> This is the result on a system without Wine: if you see
>>
>> % fc-match symbol
>> symbol.ttf: "Symbol" "Regular"
>>
>> you at least potentially have the problem.  A good test is to look at
>> ?points and run the function TestChars() defined there as
>>
>> TestChars(font=5)
>>
>> If you do have the problem, a workaround is to add the following lines
>> to ~/.fonts.conf or /etc/fonts/local.conf (which you may need to
>> create):
>>
>> <match target="pattern">
>>    <test name="family"><string>Symbol</string></test>
>>    <edit name="family" mode="prepend" binding="same">
>>      <string>Standard Symbols L</string>
>>    </edit>
>> </match>
>>
>> and repeat the fc-match test to check that it worked.
>
> Hi,
>
> I tried the suggested change to ~/.fonts.conf but am getting an error
> from fontconfig:
>
> $ fc-match symbol
> Fontconfig error: "~/.fonts.conf", line 10: junk after document element
> s050000l.pfb: "Standard Symbols L" "Regular"
> $ cat ~/.fonts.conf
> <match target="pattern">
>        <test name="family">
>                <string>Symbol</string>
>        </test>
>        <edit name="family" mode="prepend" binding="same">
>                <string>Standard Symbols L</string>
>        </edit>
> </match>
>
> <alias binding="same">
>       <family>ZapfDingbats</family>
>       <accept><family>Dingbats</family></accept>
> </alias>
>
> I have an alias in there to solve the "q" symbol being used in Evince
> etc in place of pch == 1.
>
> Am I inserting this incorrectly?
>
> Many thanks,
>
> G
>
>>
>> (This workaround was culled from
>> https://bugs.launchpad.net/ubuntu/+source/fontconfig/+bug/551977
>> )
>>
>
> -- 
> %~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
> Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
> ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
> Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
> Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
> UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
> %~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From gavin.simpson at ucl.ac.uk  Thu Aug 19 13:40:48 2010
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Thu, 19 Aug 2010 12:40:48 +0100
Subject: [Rd] One possible cause for incorrect symbols in X11() output
In-Reply-To: <alpine.LFD.2.00.1008191234260.31727@gannet.stats.ox.ac.uk>
References: <alpine.LFD.2.00.1008190738170.362@gannet.stats.ox.ac.uk>
	<1282217210.2565.39.camel@localhost>
	<alpine.LFD.2.00.1008191234260.31727@gannet.stats.ox.ac.uk>
Message-ID: <1282218048.2565.42.camel@localhost>

On Thu, 2010-08-19 at 12:36 +0100, Prof Brian Ripley wrote:
> If you have more than one element in a fonts.conf file you need to 
> group them, e.g.

Many thanks, Prof. Ripley. That is working just fine now on my Fedora 12
workstation.

All the best,

G

> 
> <fontconfig>
> <match target="pattern">
>    <test name="family"><string>Symbol</string></test>
>    <edit name="family" mode="prepend" binding="same">
>      <string>Standard Symbols L</string>
>    </edit>
> </match>
> 
> <alias binding="same">
>         <family>ZapfDingbats</family>
>         <accept><family>Dingbats</family></accept>
> </alias>
> </fontconfig>
> 
> 
> On Thu, 19 Aug 2010, Gavin Simpson wrote:
> 
> > On Thu, 2010-08-19 at 07:55 +0100, Prof Brian Ripley wrote:
> >> There have been spasmodic reports of symbols such as pi and infinity
> >> in plotmath being reproduced incorrectly on the X11 device on some
> >> Linux systems (at least Ubuntu 10 and Fedora 12/13), and we've managed
> >> to track down one cause whilst investigating PR#14355.
> >>
> >> Some systems have Wine and hence the Wine symbol font installed.
> >> 'fontconfig', which is used by cairographics in X11(type='cairo') and
> >> many other applications, prefers the Wine symbol font to the standard
> >> Type 1 URW font, and seems to misinterpret its encoding.
> >>
> >> You may well have Wine installed without realizing it (as I did) -- it
> >> is increasingly common as a dependency of other software. The best
> >> test is to run
> >>
> >> % fc-match symbol
> >> s050000l.pfb: "Standard Symbols L" "Regular"
> >>
> >> This is the result on a system without Wine: if you see
> >>
> >> % fc-match symbol
> >> symbol.ttf: "Symbol" "Regular"
> >>
> >> you at least potentially have the problem.  A good test is to look at
> >> ?points and run the function TestChars() defined there as
> >>
> >> TestChars(font=5)
> >>
> >> If you do have the problem, a workaround is to add the following lines
> >> to ~/.fonts.conf or /etc/fonts/local.conf (which you may need to
> >> create):
> >>
> >> <match target="pattern">
> >>    <test name="family"><string>Symbol</string></test>
> >>    <edit name="family" mode="prepend" binding="same">
> >>      <string>Standard Symbols L</string>
> >>    </edit>
> >> </match>
> >>
> >> and repeat the fc-match test to check that it worked.
> >
> > Hi,
> >
> > I tried the suggested change to ~/.fonts.conf but am getting an error
> > from fontconfig:
> >
> > $ fc-match symbol
> > Fontconfig error: "~/.fonts.conf", line 10: junk after document element
> > s050000l.pfb: "Standard Symbols L" "Regular"
> > $ cat ~/.fonts.conf
> > <match target="pattern">
> >        <test name="family">
> >                <string>Symbol</string>
> >        </test>
> >        <edit name="family" mode="prepend" binding="same">
> >                <string>Standard Symbols L</string>
> >        </edit>
> > </match>
> >
> > <alias binding="same">
> >       <family>ZapfDingbats</family>
> >       <accept><family>Dingbats</family></accept>
> > </alias>
> >
> > I have an alias in there to solve the "q" symbol being used in Evince
> > etc in place of pch == 1.
> >
> > Am I inserting this incorrectly?
> >
> > Many thanks,
> >
> > G
> >
> >>
> >> (This workaround was culled from
> >> https://bugs.launchpad.net/ubuntu/+source/fontconfig/+bug/551977
> >> )
> >>
> >
> > -- 
> > %~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
> > Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
> > ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
> > Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
> > Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
> > UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
> > %~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
> >
> 

-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
 Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
 ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
 Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
 Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
 UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From pdalgd at gmail.com  Thu Aug 19 13:55:00 2010
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 19 Aug 2010 13:55:00 +0200
Subject: [Rd] One possible cause for incorrect symbols in X11() output
In-Reply-To: <alpine.LFD.2.00.1008191014090.27390@gannet.stats.ox.ac.uk>
References: <C892B4AE.10F0F%jari.oksanen@oulu.fi>
	<D57304D0-70AD-469E-BF69-2050F9429E89@gmail.com>
	<alpine.LFD.2.00.1008191014090.27390@gannet.stats.ox.ac.uk>
Message-ID: <933594DB-C091-423E-ADAD-F8B2FEE95D83@gmail.com>


On Aug 19, 2010, at 1:04 PM, Prof Brian Ripley wrote:

> On Thu, 19 Aug 2010, peter dalgaard wrote:
> 
>> 
>> On Aug 19, 2010, at 9:15 AM, Jari Oksanen wrote:
>> 
>> 
>>> 
>>> The X11(type = 'cairo') shows the problem with example(points);
>>> TestChars(font=5). However, there is no problem with the default device
>>> (quartz), nor with the default X11() which has type = 'Xlib' (unlike
>>> documented in ?X11: 'cairo' is available but 'Xlib' still used).
>>> 
>>> What ever this is worth of (if this is worthless, I'll surely hear about
>>> it).
>> 
>> Well, maybe not worthless, but the X11 setup on Mac is poor in general. type="Xlib" appears plainly not to work, and even disregarding the pi issue, the rotated y-axis labels come out pretty ugly. This is why quartz is now the default on OSX.
> 
> The even more serious issue under cairo of confusing style and weight is discussed on ?X11.
> 
>> BTW, it seems that the standard X11 "Symbol","Regular" font is simply absent on OSX. I can't get fc-match to list it, anyway.
> 
> R's X11(type='cairo') device is using a version of cairographics compiled by Simon which includes a static build of fontconfig.  So it is not really 'OSX'!  I'm guessing you are using /usr/local/bin/fc-match which AFAIK also Simon's.

Actually, it was /opt/local/bin/fc-match (macPorts?). I have _three_ of them:

peter-dalgaards-iMac:~ pd$ ls -l /usr/X11/bin/fc-match 
-rwxr-xr-x  1 root  wheel  64416 Feb 11  2010 /usr/X11/bin/fc-match
peter-dalgaards-iMac:~ pd$ ls -l /usr/local/bin/fc-match 
-rwxr-xr-x@ 1 root  wheel  1476560 Oct 21  2008 /usr/local/bin/fc-match
peter-dalgaards-iMac:~ pd$ ls -l /opt/local/bin/fc-match 
-rwxr-xr-x  2 root  admin  14792 Mar 16 16:52 /opt/local/bin/fc-match

Doesn't look like they are behaving any different, though.


> It is also not using pango, and so not selecting fonts the same way as on Linux.

You're assuming (in fact, correctly) that I was using Simon's build, but my locally built version is similar. That doesn't appear to use pango either; I have a Portfile for pango-devel, but it must have failed to build.



-- 
Peter Dalgaard
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From pdalgd at gmail.com  Thu Aug 19 14:16:42 2010
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 19 Aug 2010 14:16:42 +0200
Subject: [Rd] One possible cause for incorrect symbols in X11() output
In-Reply-To: <933594DB-C091-423E-ADAD-F8B2FEE95D83@gmail.com>
References: <C892B4AE.10F0F%jari.oksanen@oulu.fi>
	<D57304D0-70AD-469E-BF69-2050F9429E89@gmail.com>
	<alpine.LFD.2.00.1008191014090.27390@gannet.stats.ox.ac.uk>
	<933594DB-C091-423E-ADAD-F8B2FEE95D83@gmail.com>
Message-ID: <32DBBD1F-BEC4-44DE-8AE7-20A01F4090F7@gmail.com>


On Aug 19, 2010, at 1:55 PM, peter dalgaard wrote:

>> 
>> It is also not using pango, and so not selecting fonts the same way as on Linux.
> 
> You're assuming (in fact, correctly) that I was using Simon's build, but my locally built version is similar. That doesn't appear to use pango either; I have a Portfile for pango-devel, but it must have failed to build.
> 

Actually, it builds, but the resulting R crashes on "x11();plot(0)"....

-- 
Peter Dalgaard
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From edd at debian.org  Thu Aug 19 15:39:45 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 19 Aug 2010 08:39:45 -0500
Subject: [Rd] C or Java code generation
In-Reply-To: <AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>
References: <4C6CF35F.9040305@yandex.ru>
	<AANLkTimDKD058Z+UQK2Z8EucsVsbE-T+dRe2h5EG-HYc@mail.gmail.com>
	<4C6CFD45.7050007@yandex.ru>
	<AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>
	<4C6D0BC2.7070906@yandex.ru>
	<AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>
Message-ID: <19565.13345.692185.626415@max.nulle.part>


On 19 August 2010 at 13:02, Daniel Cegie?ka wrote:
| Is there any posibility to use R without installing?
| 
| > I mean that I have my own application written in MS Visual C++ and I need
| > to use R script in this app. I can install R and use it via DCOM, but it's
| > not convenient for  the end users of my  program.
| >
| >
| Dirk Eddelbuettel love R/C++ combination. Rinside could be usefull for you.
| 
| http://dirk.eddelbuettel.com/code.html

Thanks for the plug. We can definitely embed R inside C++ on operating
systems containing an x somewhere in their name. But note that the RInside
page (http://dirk.eddelbuettel.com/code/rinside.html) clearly states the
following:

   Status                                                                                      
                                                                                                                 
   Version 0.2.3 should build and install on just about any Linux and OS X
   system, and even on Windows machines that have the Rtools compiled by
   Duncan Murdoch as detailed in the The Windows Toolset appendix to the R
   Installation manual. Do not report an error if you fail to build this with
   another compiler as this is not supported. (However, the examples which
   built and run under 0.2.1 currently build but segfault. This is probably
   fixable but we just haven't had the time or focus to do it. Linux and OS X
   work well enough for us.)

so for someone hell-bent on using MS Visual Whatever this is not a solution.

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From ubuntulist at yandex.ru  Thu Aug 19 16:06:11 2010
From: ubuntulist at yandex.ru (Vyacheslav Karamov)
Date: Thu, 19 Aug 2010 17:06:11 +0300
Subject: [Rd] C or Java code generation
In-Reply-To: <19565.13345.692185.626415@max.nulle.part>
References: <4C6CF35F.9040305@yandex.ru>	<AANLkTimDKD058Z+UQK2Z8EucsVsbE-T+dRe2h5EG-HYc@mail.gmail.com>	<4C6CFD45.7050007@yandex.ru>	<AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>	<4C6D0BC2.7070906@yandex.ru>	<AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>
	<19565.13345.692185.626415@max.nulle.part>
Message-ID: <4C6D3A53.5070808@yandex.ru>

Dirk Eddelbuettel ?????:
> On 19 August 2010 at 13:02, Daniel Cegie?ka wrote:
> | Is there any posibility to use R without installing?
> | 
> | > I mean that I have my own application written in MS Visual C++ and I need
> | > to use R script in this app. I can install R and use it via DCOM, but it's
> | > not convenient for  the end users of my  program.
> | >
> | >
> | Dirk Eddelbuettel love R/C++ combination. Rinside could be usefull for you.
> | 
> | http://dirk.eddelbuettel.com/code.html
>
> Thanks for the plug. We can definitely embed R inside C++ on operating
> systems containing an x somewhere in their name. But note that the RInside
> page (http://dirk.eddelbuettel.com/code/rinside.html) clearly states the
> following:
>
>    Status                                                                                      
>                                                                                                                  
>    Version 0.2.3 should build and install on just about any Linux and OS X
>    system, and even on Windows machines that have the Rtools compiled by
>    Duncan Murdoch as detailed in the The Windows Toolset appendix to the R
>    Installation manual. Do not report an error if you fail to build this with
>    another compiler as this is not supported. (However, the examples which
>    built and run under 0.2.1 currently build but segfault. This is probably
>    fixable but we just haven't had the time or focus to do it. Linux and OS X
>    work well enough for us.)
>
> so for someone hell-bent on using MS Visual Whatever this is not a solution.
>
> Dirk
>
>   
I tried to compile it using MinGW:
1) First I added R_HOME environment variable.
2) Then modified c:\Program 
Files\R\R-2.11.1\library\RInside\examples\standard\Makefile.win by 
surrounding "$(R_HOME)/bin/R" with the quotation marks.
3) And finally
C:\Program Files\R\R-2.11.1\library\RInside\examples\standard>make -f 
Makefile.win
g++ -Ic:/PROGRA~1/R/R-211~1.1/include 
-Ic:/PROGRA~1/R/R-211~1.1/library/Rcpp/include 
-I"c:/PROGRA~1/R/R-211~1.1/library/RInside/include" -O2 -Wall -Wall  -s  
rinside_callbacks0.cpp  -Lc:/PROGRA~1/R/R-211~1.1/bin -lR 
-Lc:/PROGRA~1/R/R-211~1.1/bin -lRblas -Lc:/PROGRA~1/R/R-211~1.1/bin 
-lRlapack "c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a" 
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a  -o rinside_callbacks0
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x10b): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x124): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x182): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x1d7): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x1fb): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x214): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x272): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x2c7): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x4c1): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x4d7): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x51f): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x793): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x878): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x88e): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x9ab): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0xbb1): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0xc08): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0xc1e): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0xd26): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0xe12): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0xeb1): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0xec7): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0xef6): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x1081): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x1128): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x1147): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x16c1): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x18bb): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x1d33): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x1f79): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x1fad): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x24b4): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x275e): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x280b): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x2dd5): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x2deb): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x2e53): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x2ea5): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x2ed5): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x2eeb): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x2f53): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x2fa5): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x2fce): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x2fe4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x304e): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x30a0): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x30ce): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x30e4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x314e): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x31a0): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text$_ZN4Rcpp6r_castILi16EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<16>(SEXPREC*)]+0x1e): undefined reference to 
`__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text$_ZN4Rcpp6r_castILi16EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<16>(SEXPREC*)]+0x34): undefined reference to 
`_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text$_ZN4Rcpp6r_castILi16EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<16>(SEXPREC*)]+0x64): undefined reference to 
`_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text$_ZN4Rcpp6r_castILi16EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<16>(SEXPREC*)]+0x8f): undefined reference to 
`_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text$_ZN4Rcpp8internal26range_wrap_dispatch___implIPKPKcS3_EEP7SEXPRECT_S8_NS_6traits17r_type_string_tagE[SEXPREC* 
Rcpp::internal::range_wrap_dispatch___impl<char const* const*, char 
const*>(char const* const*, char const* const*, 
Rcpp::traits::r_type_string_tag)]+0x18): undefined reference to 
`__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text$_ZN4Rcpp8internal26range_wrap_dispatch___implIPKPKcS3_EEP7SEXPRECT_S8_NS_6traits17r_type_string_tagE[SEXPREC* 
Rcpp::internal::range_wrap_dispatch___impl<char const* const*, char 
const*>(char const* const*, char const* const*, 
Rcpp::traits::r_type_string_tag)]+0x2e): undefined reference to 
`_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text$_ZN4Rcpp8internal26range_wrap_dispatch___implIPKPKcS3_EEP7SEXPRECT_S8_NS_6traits17r_type_string_tagE[SEXPREC* 
Rcpp::internal::range_wrap_dispatch___impl<char const* const*, char 
const*>(char const* const*, char const* const*, 
Rcpp::traits::r_type_string_tag)]+0xff): undefined reference to 
`_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text$_ZN4Rcpp8internal26range_wrap_dispatch___implIPKPKcS3_EEP7SEXPRECT_S8_NS_6traits17r_type_string_tagE[SEXPREC* 
Rcpp::internal::range_wrap_dispatch___impl<char const* const*, char 
const*>(char const* const*, char const* const*, 
Rcpp::traits::r_type_string_tag)]+0x173): undefined reference to 
`_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text$_ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_ERKS6_S8_[std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > std::operator+<char, 
std::char_traits<char>, std::allocator<char> >(std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > 
const&)]+0x1e): undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text$_ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_ERKS6_S8_[std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > std::operator+<char, 
std::char_traits<char>, std::allocator<char> >(std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > 
const&)]+0x34): undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text$_ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_ERKS6_S8_[std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > std::operator+<char, 
std::char_traits<char>, std::allocator<char> >(std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > 
const&)]+0x77): undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text$_ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_ERKS6_S8_[std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > std::operator+<char, 
std::char_traits<char>, std::allocator<char> >(std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > 
const&)]+0xb4): undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(MemBuf.o):MemBuf.cpp:(.text+0x1ce): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(MemBuf.o):MemBuf.cpp:(.text+0x1e4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(MemBuf.o):MemBuf.cpp:(.text+0x252): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(MemBuf.o):MemBuf.cpp:(.text+0x2b5): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(MemBuf.o):MemBuf.cpp:(.text+0x30e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(MemBuf.o):MemBuf.cpp:(.text+0x324): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(MemBuf.o):MemBuf.cpp:(.text+0x392): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(MemBuf.o):MemBuf.cpp:(.text+0x3f5): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x3de): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x3f4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x449): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x49e): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x57e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x594): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x5ec): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x663): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x6ce): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x6e4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x73c): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x7b3): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x81e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x834): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x878): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x8cf): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x908): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0x91e): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0xa59): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text+0xaf7): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text$_ZNSt6vectorISsSaISsEE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPSsS1_EERKSs[std::vector<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> >, 
std::allocator<std::basic_string<char, std::char_traits<char>, 
std::allocator<char> > > 
 >::_M_insert_aux(__gnu_cxx::__normal_iterator<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> >*, 
std::vector<std::basic_string<char, std::char_traits<char>, 
std::allocator<char> >, std::allocator<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > > > >, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > 
const&)]+0x18): undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text$_ZNSt6vectorISsSaISsEE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPSsS1_EERKSs[std::vector<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> >, 
std::allocator<std::basic_string<char, std::char_traits<char>, 
std::allocator<char> > > 
 >::_M_insert_aux(__gnu_cxx::__normal_iterator<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> >*, 
std::vector<std::basic_string<char, std::char_traits<char>, 
std::allocator<char> >, std::allocator<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > > > >, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > 
const&)]+0x31): undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text$_ZNSt6vectorISsSaISsEE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPSsS1_EERKSs[std::vector<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> >, 
std::allocator<std::basic_string<char, std::char_traits<char>, 
std::allocator<char> > > 
 >::_M_insert_aux(__gnu_cxx::__normal_iterator<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> >*, 
std::vector<std::basic_string<char, std::char_traits<char>, 
std::allocator<char> >, std::allocator<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > > > >, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > 
const&)]+0x10c): undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text$_ZNSt6vectorISsSaISsEE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPSsS1_EERKSs[std::vector<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> >, 
std::allocator<std::basic_string<char, std::char_traits<char>, 
std::allocator<char> > > 
 >::_M_insert_aux(__gnu_cxx::__normal_iterator<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> >*, 
std::vector<std::basic_string<char, std::char_traits<char>, 
std::allocator<char> >, std::allocator<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > > > >, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > 
const&)]+0x4ff): undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text$_ZNSt6vectorISsSaISsEE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPSsS1_EERKSs[std::vector<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> >, 
std::allocator<std::basic_string<char, std::char_traits<char>, 
std::allocator<char> > > 
 >::_M_insert_aux(__gnu_cxx::__normal_iterator<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> >*, 
std::vector<std::basic_string<char, std::char_traits<char>, 
std::allocator<char> >, std::allocator<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > > > >, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > 
const&)]+0x555): undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RObject.o):RObject.cpp:(.text$_ZNSt6vectorISsSaISsEE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPSsS1_EERKSs[std::vector<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> >, 
std::allocator<std::basic_string<char, std::char_traits<char>, 
std::allocator<char> > > 
 >::_M_insert_aux(__gnu_cxx::__normal_iterator<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> >*, 
std::vector<std::basic_string<char, std::char_traits<char>, 
std::allocator<char> >, std::allocator<std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > > > >, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > 
const&)]+0x5cb): undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x9e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xb4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xde): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x109): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x13e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x154): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x17f): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x1aa): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x25e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x274): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x2c3): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x2fd): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x3de): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x3f4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x477): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x4c9): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x4ee): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x504): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x546): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x580): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x5ae): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x5c4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x60b): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x657): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x68e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x6a4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x6eb): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x737): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x76e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x784): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x807): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x859): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x8be): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x8d4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x929): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x963): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x98e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x9a4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0x9f9): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xa33): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xa5e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xa74): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xac9): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xb03): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xb2e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xb44): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xb99): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xbd3): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xc2e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xc44): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xc86): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text+0xcc0): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text$_ZN4Rcpp6r_castILi6EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<6>(SEXPREC*)]+0x1e): undefined reference to 
`__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text$_ZN4Rcpp6r_castILi6EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<6>(SEXPREC*)]+0x34): undefined reference to 
`_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text$_ZN4Rcpp6r_castILi6EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<6>(SEXPREC*)]+0x64): undefined reference to 
`_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Language.o):Language.cpp:(.text$_ZN4Rcpp6r_castILi6EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<6>(SEXPREC*)]+0x8f): undefined reference to 
`_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x35e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x374): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x3b1): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x3f7): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x42e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x444): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x46b): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x496): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x4ce): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x4e4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x521): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x567): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x61e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x634): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x687): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x726): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x8d8): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x8ee): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x96b): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x993): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x9ce): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x9e4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xa13): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xa40): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xa7e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xa94): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xabc): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xae9): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xb1e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xb34): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xb5c): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xb89): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xbbe): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xbd4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xbfc): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xc29): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xc5e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xc74): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xc9c): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xcc9): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xcfe): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xd14): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xd67): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xe06): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xf31): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xf47): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0xfa2): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x108d): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x12fb): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x1311): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x1386): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x14ff): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x176b): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x1781): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x18c7): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x1a23): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x1b3b): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x1b51): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x1bae): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x1e0d): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x1ebc): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x1f50): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x1f6f): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x21c7): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x2466): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x25c4): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x269b): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x26b1): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x2740): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x282f): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x2a9b): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x2ab1): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x2be9): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x2d38): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x2e5b): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x2e71): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x2f00): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x2fef): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x325b): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x3271): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x32e6): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x345f): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x36cb): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x36e1): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x3819): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x396a): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x3a8b): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x3aa1): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x3be7): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x3d43): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x3e5b): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x3e71): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x3ee9): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x4116): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x4288): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x42a1): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x43ac): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x47cd): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text+0x499d): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text$_ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_EPKS3_RKS6_[std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > std::operator+<char, 
std::char_traits<char>, std::allocator<char> >(char const*, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > 
const&)]+0x1e): undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text$_ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_EPKS3_RKS6_[std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > std::operator+<char, 
std::char_traits<char>, std::allocator<char> >(char const*, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > 
const&)]+0x34): undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text$_ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_EPKS3_RKS6_[std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > std::operator+<char, 
std::char_traits<char>, std::allocator<char> >(char const*, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > 
const&)]+0xa5): undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Environment.o):Environment.cpp:(.text$_ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_EPKS3_RKS6_[std::basic_string<char, 
std::char_traits<char>, std::allocator<char> > std::operator+<char, 
std::char_traits<char>, std::allocator<char> >(char const*, 
std::basic_string<char, std::char_traits<char>, std::allocator<char> > 
const&)]+0xe3): undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0xbe): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0xd4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x111): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x166): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x20e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x224): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x261): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x29b): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x2be): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x2d4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x348): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x38e): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x3fe): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x414): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x451): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x48b): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x4ae): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x4c4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x538): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x57e): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x5b8): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x5ce): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x6b8): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x737): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x788): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x79e): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x888): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Function.o):Function.cpp:(.text+0x907): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(DottedPair.o):DottedPair.cpp:(.text+0xe8): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(DottedPair.o):DottedPair.cpp:(.text+0xfe): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(DottedPair.o):DottedPair.cpp:(.text+0x18a): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(DottedPair.o):DottedPair.cpp:(.text+0x1f5): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(DottedPair.o):DottedPair.cpp:(.text+0x2b8): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(DottedPair.o):DottedPair.cpp:(.text+0x2ce): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(DottedPair.o):DottedPair.cpp:(.text+0x361): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(DottedPair.o):DottedPair.cpp:(.text+0x3d4): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(DottedPair.o):DottedPair.cpp:(.text+0x4c8): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(DottedPair.o):DottedPair.cpp:(.text+0x4de): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(DottedPair.o):DottedPair.cpp:(.text+0x56a): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(DottedPair.o):DottedPair.cpp:(.text+0x5d5): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x8e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xa4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xcc): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xf7): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x12e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x144): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x16c): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x197): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x1ce): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x1e4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x20c): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x237): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x26e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x284): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x2c3): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x32c): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x35b): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x374): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x449): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x4d2): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x4ea): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x53b): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x554): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x632): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x6fd): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x715): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x75b): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x774): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x849): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x8d2): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x8ea): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x93b): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0x954): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xa27): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xab0): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xac8): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xb0b): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xb24): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xbf9): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xc82): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xc9a): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xceb): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xd04): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xdd9): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xe62): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(r_cast.o):r_cast.cpp:(.text+0xe7a): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0x1bb): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0x1d1): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0x30b): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0x407): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0x495): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0x4ae): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0x5ef): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0x6da): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0x85e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0x874): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0x8f0): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0x949): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0xaf8): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0xb0e): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0xbb3): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0xc01): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0xc58): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0xc6e): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0xd13): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(exceptions.o):exceptions.cpp:(.text+0xd61): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x12e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x144): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x18b): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x1c5): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x1ee): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x204): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x241): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x27b): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x29e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x2b4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x2f1): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x32b): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x34e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x364): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x487): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x557): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x581): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x5ce): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x5e4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x62b): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x665): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x68e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x6a4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x7c7): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x897): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Symbol.o):Symbol.cpp:(.text+0x8c1): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x98): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0xb1): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x26c): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x2c1): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x36e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x384): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x3ab): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x3d6): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x40e): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x424): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x44f): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x47a): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x4ae): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x4c4): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x4e4): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x50f): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x551): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x567): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x5b7): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x629): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(Evaluator.o):Evaluator.cpp:(.text+0x69a): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(debugging.o):debugging.cpp:(.text+0xa1): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(debugging.o):debugging.cpp:(.text+0xba): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(debugging.o):debugging.cpp:(.text+0x30c): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(debugging.o):debugging.cpp:(.text+0x62b): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(debugging.o):debugging.cpp:(.text+0x7ac): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(debugging.o):debugging.cpp:(.text$_ZN4Rcpp6VectorILi19EE16create__dispatchINS_6traits12named_objectIPKcEENS4_IiEENS4_IA77_cEEEES1_NS3_17integral_constantIbLb1EEERKT_RKT0_RKT1_[Rcpp::Vector<19> 
Rcpp::Vector<19>::create__dispatch<Rcpp::traits::named_object<char 
const*>, Rcpp::traits::named_object<int>, 
Rcpp::traits::named_object<char [77]> 
 >(Rcpp::traits::integral_constant<bool, true>, 
Rcpp::traits::named_object<char const*> const&, 
Rcpp::traits::named_object<int> const&, Rcpp::traits::named_object<char 
[77]> const&)]+0x1b): undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(debugging.o):debugging.cpp:(.text$_ZN4Rcpp6VectorILi19EE16create__dispatchINS_6traits12named_objectIPKcEENS4_IiEENS4_IA77_cEEEES1_NS3_17integral_constantIbLb1EEERKT_RKT0_RKT1_[Rcpp::Vector<19> 
Rcpp::Vector<19>::create__dispatch<Rcpp::traits::named_object<char 
const*>, Rcpp::traits::named_object<int>, 
Rcpp::traits::named_object<char [77]> 
 >(Rcpp::traits::integral_constant<bool, true>, 
Rcpp::traits::named_object<char const*> const&, 
Rcpp::traits::named_object<int> const&, Rcpp::traits::named_object<char 
[77]> const&)]+0x31): undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(debugging.o):debugging.cpp:(.text$_ZN4Rcpp6VectorILi19EE16create__dispatchINS_6traits12named_objectIPKcEENS4_IiEENS4_IA77_cEEEES1_NS3_17integral_constantIbLb1EEERKT_RKT0_RKT1_[Rcpp::Vector<19> 
Rcpp::Vector<19>::create__dispatch<Rcpp::traits::named_object<char 
const*>, Rcpp::traits::named_object<int>, 
Rcpp::traits::named_object<char [77]> 
 >(Rcpp::traits::integral_constant<bool, true>, 
Rcpp::traits::named_object<char const*> const&, 
Rcpp::traits::named_object<int> const&, Rcpp::traits::named_object<char 
[77]> const&)]+0x259): undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(debugging.o):debugging.cpp:(.text$_ZN4Rcpp6VectorILi19EE16create__dispatchINS_6traits12named_objectIPKcEENS4_IiEENS4_IA77_cEEEES1_NS3_17integral_constantIbLb1EEERKT_RKT0_RKT1_[Rcpp::Vector<19> 
Rcpp::Vector<19>::create__dispatch<Rcpp::traits::named_object<char 
const*>, Rcpp::traits::named_object<int>, 
Rcpp::traits::named_object<char [77]> 
 >(Rcpp::traits::integral_constant<bool, true>, 
Rcpp::traits::named_object<char const*> const&, 
Rcpp::traits::named_object<int> const&, Rcpp::traits::named_object<char 
[77]> const&)]+0x31f): undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text+0x574): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text+0x593): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text+0x6bb): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text+0xab2): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text+0xb1e): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text+0xbf5): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text+0xc0e): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text+0xcd8): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text+0xd17): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text+0xd38): 
undefined reference to `__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text+0xd4e): 
undefined reference to `_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text+0xdf4): 
undefined reference to `_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text+0xe39): 
undefined reference to `_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp4XPtrISt6vectorIiSaIiEEEC1EPS3_bP7SEXPRECS7_[Rcpp::XPtr<std::vector<int, 
std::allocator<int> > >::XPtr(std::vector<int, std::allocator<int> >*, 
bool, SEXPREC*, SEXPREC*)]+0x25): undefined reference to 
`__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp4XPtrISt6vectorIiSaIiEEEC1EPS3_bP7SEXPRECS7_[Rcpp::XPtr<std::vector<int, 
std::allocator<int> > >::XPtr(std::vector<int, std::allocator<int> >*, 
bool, SEXPREC*, SEXPREC*)]+0x3b): undefined reference to 
`_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp4XPtrISt6vectorIiSaIiEEEC1EPS3_bP7SEXPRECS7_[Rcpp::XPtr<std::vector<int, 
std::allocator<int> > >::XPtr(std::vector<int, std::allocator<int> >*, 
bool, SEXPREC*, SEXPREC*)]+0x97): undefined reference to 
`_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp4XPtrISt6vectorIiSaIiEEEC1EPS3_bP7SEXPRECS7_[Rcpp::XPtr<std::vector<int, 
std::allocator<int> > >::XPtr(std::vector<int, std::allocator<int> >*, 
bool, SEXPREC*, SEXPREC*)]+0xde): undefined reference to 
`_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi13EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<13>(SEXPREC*)]+0x1e): undefined reference to 
`__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi13EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<13>(SEXPREC*)]+0x34): undefined reference to 
`_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi13EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<13>(SEXPREC*)]+0x64): undefined reference to 
`_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi13EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<13>(SEXPREC*)]+0x8f): undefined reference to 
`_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi14EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<14>(SEXPREC*)]+0x1e): undefined reference to 
`__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi14EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<14>(SEXPREC*)]+0x34): undefined reference to 
`_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi14EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<14>(SEXPREC*)]+0x64): undefined reference to 
`_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi14EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<14>(SEXPREC*)]+0x8f): undefined reference to 
`_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi24EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<24>(SEXPREC*)]+0x1e): undefined reference to 
`__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi24EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<24>(SEXPREC*)]+0x34): undefined reference to 
`_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi24EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<24>(SEXPREC*)]+0x64): undefined reference to 
`_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi24EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<24>(SEXPREC*)]+0x8f): undefined reference to 
`_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi10EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<10>(SEXPREC*)]+0x1e): undefined reference to 
`__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi10EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<10>(SEXPREC*)]+0x34): undefined reference to 
`_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi10EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<10>(SEXPREC*)]+0x64): undefined reference to 
`_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi10EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<10>(SEXPREC*)]+0x8f): undefined reference to 
`_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi15EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<15>(SEXPREC*)]+0x1e): undefined reference to 
`__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi15EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<15>(SEXPREC*)]+0x34): undefined reference to 
`_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi15EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<15>(SEXPREC*)]+0x64): undefined reference to 
`_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi15EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<15>(SEXPREC*)]+0x8f): undefined reference to 
`_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi19EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<19>(SEXPREC*)]+0x1e): undefined reference to 
`__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi19EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<19>(SEXPREC*)]+0x34): undefined reference to 
`_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi19EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<19>(SEXPREC*)]+0x64): undefined reference to 
`_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi19EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<19>(SEXPREC*)]+0x8f): undefined reference to 
`_Unwind_SjLj_Resume'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi20EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<20>(SEXPREC*)]+0x1e): undefined reference to 
`__gxx_personality_sj0'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi20EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<20>(SEXPREC*)]+0x34): undefined reference to 
`_Unwind_SjLj_Register'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi20EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<20>(SEXPREC*)]+0x64): undefined reference to 
`_Unwind_SjLj_Unregister'
c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a(RcppCommon.o):RcppCommon.cpp:(.text$_ZN4Rcpp6r_castILi20EEEP7SEXPRECS2_[SEXPREC* 
Rcpp::r_cast<20>(SEXPREC*)]+0x8f): undefined reference to 
`_Unwind_SjLj_Resume'
collect2: ld returned 1 exit status
make: *** [rinside_callbacks0] Error 1


From pgilbert at bank-banque-canada.ca  Thu Aug 19 16:16:37 2010
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 19 Aug 2010 10:16:37 -0400
Subject: [Rd] c.POSIXct
In-Reply-To: <AANLkTin=8k4UfBqzjQmHa9ntQP3V9zhuhsfkL_qzZyWi@mail.gmail.com>
References: <AANLkTinGcXRQd5+Xmo2ad5HoofdbzhZbEaSznAgCL3vO@mail.gmail.com>
	<AANLkTin=8k4UfBqzjQmHa9ntQP3V9zhuhsfkL_qzZyWi@mail.gmail.com>
Message-ID: <D611103AA7EE3B4DAE7F7D49C72B291A02C7E497@EXMAIL2.bocad.bank-banque-canada.ca>

I used to get caught by this c() behaviour often, but now I do expect it to drop attributes. I think it would break many things if you change it, and force people to write different code when they really do want to drop attributes. When you want new behaviour it is usually better to define a new function, ca() maybe?

Paul

>-----Original Message-----
>From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-
>project.org] On Behalf Of Gabor Grothendieck
>Sent: August 18, 2010 6:23 PM
>To: r-devel at r-project.org
>Subject: Re: [Rd] c.POSIXct
>
>No one answered this so I submitted it to the bugs system and there I
>got the response that it is documented behavior; however, whether its
>documented or not is hardly the point -- its undesirable that tzone is
>lost when using c.
>
>On Thu, Aug 12, 2010 at 11:33 AM, Gabor Grothendieck
><ggrothendieck at gmail.com> wrote:
>> Currently if x1 and x2 are POSIXct then c(x1, x2) will not have a
>> tzone attribute even if x1 or x2 or both do but it should.
>>
>> This could be fixed with the following c.POSIXct:
>>
>> c.POSIXct <- function (..., recursive = FALSE) {
>> ? ? ? ?tzones <- lapply(list(...), attr, which = "tzone")
>> ? ? ? ?lengths <- sapply(tzones, length)
>> ? ? ? ?if (any(lengths > 1)) stop("tzone cannot have length greater
>than 1")
>> ? ? ? ?which <- sapply(tzones, length) == 1
>> ? ? ? ?tzone <- unique(unlist(tzones[which]))
>> ? ? ? ?if (length(tzone) != 1) tzone <- NULL
>> structure(c(unlist(lapply(list(...), unclass))), class = c("POSIXt",
>> ? ?"POSIXct"), tzone = tzone)
>> }
>>
>> # test
>> x1 <- Sys.time()
>> x2 <- structure(x1, tzone = "UTC")
>> x3 <- structure(x1, tzone = "other")
>>
>> # these all currently give NULL but with
>> # above give indicated value
>>
>> attr(c(x1, x1), "tzone") # NULL
>> attr(c(x2, x2), "tzone") # "UTC"
>> attr(c(x1, x2), "tzone") # "UTC"
>> attr(c(x2, x1), "tzone") # "UTC"
>> attr(c(x1, x2, x3), "tzone") # NULL
>>
>
>______________________________________________
>R-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel
====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential in...{{dropped:26}}


From ggrothendieck at gmail.com  Thu Aug 19 16:32:41 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 19 Aug 2010 10:32:41 -0400
Subject: [Rd] c.POSIXct
In-Reply-To: <D611103AA7EE3B4DAE7F7D49C72B291A02C7E497@EXMAIL2.bocad.bank-banque-canada.ca>
References: <AANLkTinGcXRQd5+Xmo2ad5HoofdbzhZbEaSznAgCL3vO@mail.gmail.com>
	<AANLkTin=8k4UfBqzjQmHa9ntQP3V9zhuhsfkL_qzZyWi@mail.gmail.com>
	<D611103AA7EE3B4DAE7F7D49C72B291A02C7E497@EXMAIL2.bocad.bank-banque-canada.ca>
Message-ID: <AANLkTi=m2Ti5bWVGMT=RH0xA7WF=A=1cf1jZrNjcJs9Z@mail.gmail.com>

On Thu, Aug 19, 2010 at 10:16 AM, Paul Gilbert
<pgilbert at bank-banque-canada.ca> wrote:
> I used to get caught by this c() behaviour often, but now I do expect it to drop attributes. I think it would break many things if you change it, and force people to write different code when they really do want to drop attributes. When you want new behaviour it is usually better to define a new function, ca() maybe?
>

That would work if ca defaulted to c for those classes that did not
supply a ca method.


From spencer.graves at structuremonitoring.com  Thu Aug 19 17:43:49 2010
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Thu, 19 Aug 2010 08:43:49 -0700
Subject: [Rd] c.POSIXct
In-Reply-To: <AANLkTi=m2Ti5bWVGMT=RH0xA7WF=A=1cf1jZrNjcJs9Z@mail.gmail.com>
References: <AANLkTinGcXRQd5+Xmo2ad5HoofdbzhZbEaSznAgCL3vO@mail.gmail.com>	<AANLkTin=8k4UfBqzjQmHa9ntQP3V9zhuhsfkL_qzZyWi@mail.gmail.com>	<D611103AA7EE3B4DAE7F7D49C72B291A02C7E497@EXMAIL2.bocad.bank-banque-canada.ca>
	<AANLkTi=m2Ti5bWVGMT=RH0xA7WF=A=1cf1jZrNjcJs9Z@mail.gmail.com>
Message-ID: <4C6D5135.5010105@structuremonitoring.com>

  Hi, Gabor, Paul, et al.:


       For classes that did not supply a "ca" method, I'd rather see the 
default being to start with the corresponding  "c" method followed by an 
effort to preserve attributes to the maximum extent feasible.  I'm not 
sure the best defaults, but at the moment, I would expect that 
attributes like "dim" and "dimnames" should always be dropped.  The 
current default "c" method preserves "names" appropriately.


       What do you think about including another argument to 
"checkAttributes"?  I'm not sure what the options should be nor what 
should be the default, but one option should throw and error if any 
contradiction was found while another would take all attributes from the 
first argument and ignore others.


       Best Wishes,
       Spencer Graves


On 8/19/2010 7:32 AM, Gabor Grothendieck wrote:
> On Thu, Aug 19, 2010 at 10:16 AM, Paul Gilbert
> <pgilbert at bank-banque-canada.ca>  wrote:
>> I used to get caught by this c() behaviour often, but now I do expect it to drop attributes. I think it would break many things if you change it, and force people to write different code when they really do want to drop attributes. When you want new behaviour it is usually better to define a new function, ca() maybe?
>>
> That would work if ca defaulted to c for those classes that did not
> supply a ca method.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


-- 
Spencer Graves, PE, PhD
President and Chief Operating Officer
Structure Inspection and Monitoring, Inc.
751 Emerson Ct.
San Jos?, CA 95126
ph:  408-655-4567


From ggrothendieck at gmail.com  Thu Aug 19 17:50:33 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 19 Aug 2010 11:50:33 -0400
Subject: [Rd] c.POSIXct
In-Reply-To: <4C6D5135.5010105@structuremonitoring.com>
References: <AANLkTinGcXRQd5+Xmo2ad5HoofdbzhZbEaSznAgCL3vO@mail.gmail.com>
	<AANLkTin=8k4UfBqzjQmHa9ntQP3V9zhuhsfkL_qzZyWi@mail.gmail.com>
	<D611103AA7EE3B4DAE7F7D49C72B291A02C7E497@EXMAIL2.bocad.bank-banque-canada.ca>
	<AANLkTi=m2Ti5bWVGMT=RH0xA7WF=A=1cf1jZrNjcJs9Z@mail.gmail.com>
	<4C6D5135.5010105@structuremonitoring.com>
Message-ID: <AANLkTi=1gu4hhky1a4+ifgi6S15VvHZ=SPnpquWavxfk@mail.gmail.com>

On Thu, Aug 19, 2010 at 11:43 AM, Spencer Graves
<spencer.graves at structuremonitoring.com> wrote:
> ?Hi, Gabor, Paul, et al.:
>
>
> ? ? ?For classes that did not supply a "ca" method, I'd rather see the
> default being to start with the corresponding ?"c" method followed by an
> effort to preserve attributes to the maximum extent feasible. ?I'm not sure
> the best defaults, but at the moment, I would expect that attributes like
> "dim" and "dimnames" should always be dropped. ?The current default "c"
> method preserves "names" appropriately.
>
>
> ? ? ?What do you think about including another argument to
> "checkAttributes"? ?I'm not sure what the options should be nor what should
> be the default, but one option should throw and error if any contradiction
> was found while another would take all attributes from the first argument
> and ignore others.
>
>

I think ca is easier to use.  It would work consistently and simply
across classes whereas fixing up c with checkAttribues is harder to
use.


From edd at debian.org  Thu Aug 19 18:02:28 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 19 Aug 2010 11:02:28 -0500
Subject: [Rd] C or Java code generation
In-Reply-To: <4C6D3A53.5070808@yandex.ru>
References: <4C6CF35F.9040305@yandex.ru>
	<AANLkTimDKD058Z+UQK2Z8EucsVsbE-T+dRe2h5EG-HYc@mail.gmail.com>
	<4C6CFD45.7050007@yandex.ru>
	<AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>
	<4C6D0BC2.7070906@yandex.ru>
	<AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>
	<19565.13345.692185.626415@max.nulle.part>
	<4C6D3A53.5070808@yandex.ru>
Message-ID: <19565.21908.102685.183781@max.nulle.part>


On 19 August 2010 at 17:06, Vyacheslav Karamov wrote:
| Dirk Eddelbuettel ?????:
| > On 19 August 2010 at 13:02, Daniel Cegie?ka wrote:
| > | Is there any posibility to use R without installing?
| > | 
| > | > I mean that I have my own application written in MS Visual C++ and I need
| > | > to use R script in this app. I can install R and use it via DCOM, but it's
| > | > not convenient for  the end users of my  program.
| > | >
| > | >
| > | Dirk Eddelbuettel love R/C++ combination. Rinside could be usefull for you.
| > | 
| > | http://dirk.eddelbuettel.com/code.html
| >
| > Thanks for the plug. We can definitely embed R inside C++ on operating
| > systems containing an x somewhere in their name. But note that the RInside
| > page (http://dirk.eddelbuettel.com/code/rinside.html) clearly states the
| > following:
| >
| >    Status                                                                                      
| >                                                                                                                  
| >    Version 0.2.3 should build and install on just about any Linux and OS X
| >    system, and even on Windows machines that have the Rtools compiled by
| >    Duncan Murdoch as detailed in the The Windows Toolset appendix to the R
| >    Installation manual. Do not report an error if you fail to build this with
| >    another compiler as this is not supported. (However, the examples which
| >    built and run under 0.2.1 currently build but segfault. This is probably
| >    fixable but we just haven't had the time or focus to do it. Linux and OS X
| >    work well enough for us.)
| >
| > so for someone hell-bent on using MS Visual Whatever this is not a solution.
| >
| > Dirk
| >
| >   
| I tried to compile it using MinGW:

No, what you describe in the next few hundred lines would _build the examples
if the package is already installed_ 

Also, building these examples (once you have the package is installed) does
"Work For Me (TM)" in the sense that the compiles and linking steps succeed
(WinXP, Rtools with gcc/g++ 4.2.x, R 2.11.0) yet it, as noted above, leads to
a seg.fault which Romain and I have found neither time nor motivation to fix.

You would be very welcome to help out -- our discussions around Rcpp and
RInside take place on the rcpp-devel list off R-Forge.


| 1) First I added R_HOME environment variable.
| 2) Then modified c:\Program 
| Files\R\R-2.11.1\library\RInside\examples\standard\Makefile.win by 
| surrounding "$(R_HOME)/bin/R" with the quotation marks.
| 3) And finally
| C:\Program Files\R\R-2.11.1\library\RInside\examples\standard>make -f 
| Makefile.win
| g++ -Ic:/PROGRA~1/R/R-211~1.1/include 
| -Ic:/PROGRA~1/R/R-211~1.1/library/Rcpp/include 
| -I"c:/PROGRA~1/R/R-211~1.1/library/RInside/include" -O2 -Wall -Wall  -s  
| rinside_callbacks0.cpp  -Lc:/PROGRA~1/R/R-211~1.1/bin -lR 
| -Lc:/PROGRA~1/R/R-211~1.1/bin -lRblas -Lc:/PROGRA~1/R/R-211~1.1/bin 
| -lRlapack "c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a" 
| c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a  -o rinside_callbacks0
| c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x10b): 
| undefined reference to `__gxx_personality_sj0'

[ Hundreds of similar lines removed. ]


Thanks, Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From spencer.graves at structuremonitoring.com  Thu Aug 19 18:15:46 2010
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Thu, 19 Aug 2010 09:15:46 -0700
Subject: [Rd] c.POSIXct
In-Reply-To: <AANLkTi=1gu4hhky1a4+ifgi6S15VvHZ=SPnpquWavxfk@mail.gmail.com>
References: <AANLkTinGcXRQd5+Xmo2ad5HoofdbzhZbEaSznAgCL3vO@mail.gmail.com>
	<AANLkTin=8k4UfBqzjQmHa9ntQP3V9zhuhsfkL_qzZyWi@mail.gmail.com>
	<D611103AA7EE3B4DAE7F7D49C72B291A02C7E497@EXMAIL2.bocad.bank-banque-canada.ca>
	<AANLkTi=m2Ti5bWVGMT=RH0xA7WF=A=1cf1jZrNjcJs9Z@mail.gmail.com>
	<4C6D5135.5010105@structuremonitoring.com>
	<AANLkTi=1gu4hhky1a4+ifgi6S15VvHZ=SPnpquWavxfk@mail.gmail.com>
Message-ID: <4C6D58B2.7090906@structuremonitoring.com>

  Hi, Gabor, et al.:


       I'm suggesting adding "checkAttributes" to "ca", NOT to "c".


       Spencer


On 8/19/2010 8:50 AM, Gabor Grothendieck wrote:
> On Thu, Aug 19, 2010 at 11:43 AM, Spencer Graves
> <spencer.graves at structuremonitoring.com>  wrote:
>>   Hi, Gabor, Paul, et al.:
>>
>>
>>       For classes that did not supply a "ca" method, I'd rather see the
>> default being to start with the corresponding  "c" method followed by an
>> effort to preserve attributes to the maximum extent feasible.  I'm not sure
>> the best defaults, but at the moment, I would expect that attributes like
>> "dim" and "dimnames" should always be dropped.  The current default "c"
>> method preserves "names" appropriately.
>>
>>
>>       What do you think about including another argument to
>> "checkAttributes"?  I'm not sure what the options should be nor what should
>> be the default, but one option should throw and error if any contradiction
>> was found while another would take all attributes from the first argument
>> and ignore others.
>>
>>
> I think ca is easier to use.  It would work consistently and simply
> across classes whereas fixing up c with checkAttribues is harder to
> use.
>


-- 
Spencer Graves, PE, PhD
President and Chief Operating Officer
Structure Inspection and Monitoring, Inc.
751 Emerson Ct.
San Jos?, CA 95126
ph:  408-655-4567


From ggrothendieck at gmail.com  Thu Aug 19 18:21:44 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 19 Aug 2010 12:21:44 -0400
Subject: [Rd] c.POSIXct
In-Reply-To: <4C6D58B2.7090906@structuremonitoring.com>
References: <AANLkTinGcXRQd5+Xmo2ad5HoofdbzhZbEaSznAgCL3vO@mail.gmail.com>
	<AANLkTin=8k4UfBqzjQmHa9ntQP3V9zhuhsfkL_qzZyWi@mail.gmail.com>
	<D611103AA7EE3B4DAE7F7D49C72B291A02C7E497@EXMAIL2.bocad.bank-banque-canada.ca>
	<AANLkTi=m2Ti5bWVGMT=RH0xA7WF=A=1cf1jZrNjcJs9Z@mail.gmail.com>
	<4C6D5135.5010105@structuremonitoring.com>
	<AANLkTi=1gu4hhky1a4+ifgi6S15VvHZ=SPnpquWavxfk@mail.gmail.com>
	<4C6D58B2.7090906@structuremonitoring.com>
Message-ID: <AANLkTimgfHYzKFfidckQ0ZsX74diWQd3nBhg6jASEmoX@mail.gmail.com>

On Thu, Aug 19, 2010 at 12:15 PM, Spencer Graves
<spencer.graves at structuremonitoring.com> wrote:
> ?Hi, Gabor, et al.:
>
>
> ? ? ?I'm suggesting adding "checkAttributes" to "ca", NOT to "c".
>

Yes, that would be a good idea.


From spencer.graves at structuremonitoring.com  Thu Aug 19 20:24:55 2010
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Thu, 19 Aug 2010 11:24:55 -0700
Subject: [Rd] perl.exe has stopped working:  Fixed.
In-Reply-To: <4C6C8243.6000606@structuremonitoring.com>
References: <4C6C8243.6000606@structuremonitoring.com>
Message-ID: <4C6D76F7.7040402@structuremonitoring.com>

        To complete this thread for anyone encountering a similar 
problem, the fix I said I'd try (below) worked.  Specifically, I 
installed the latest Strawberry Perl, modified the path so the first 
reference points to the new Perl, and R CMD build, check, INSTALL, and 
"INSTALL -build" all seemed to work properly.  Of course, there is 
always a chance of some deeply hidden problem, but the obvious first 
tests seemed to function exactly as I have come to expect.


       Best Wishes,
       Spencer Graves


On 8/18/2010 6:00 PM, Spencer Graves wrote:
>  Hello:
>
>
>       I just installed 14 security updates for Vista x64, and now "R 
> CMD build packagename" terminates, saying, "perl.exe has stopped 
> working".  I reinstalled Rtools211 using the latest version after 
> uninstalling the version I installed on 4/3/2010.
>
>
>       What do you suggest?  I can install the latest version of perl 
> from "www.perl.org" (5.12.1), but I thought I'd ask here first.
>
>
>       Thanks,
>       Best Wishes,
>       Spencer Graves
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From pauljohn32 at gmail.com  Thu Aug 19 20:49:19 2010
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Thu, 19 Aug 2010 13:49:19 -0500
Subject: [Rd] Can you share a working example of R program aided by fast
	BLAS?
Message-ID: <AANLkTi=Y8xEtkz+8ZmnLsMj9LChdu7xwOp130bfGDbM-@mail.gmail.com>

Can one of you give me an R program that displays the benefits an
accelerated BLAS in R?

Here's why I ask, in case you wonder:

In a linux cluster, I've hit some bumps in the road.  The worst one by
far was that I installed R, then GotoBLAS2 with default settings, and
after that, jobs using Rmpi were *really* *really* slow.  I mean
horrible.  If a job took 15 minutes when run by itself, outside of
MPI, it took 1 full day when run inside MPI. Literally the same job.

I learned later that GotoBLAS2 defaults to allow threads equal to the
number of cores, and that the threads are not compatible with MPI.
This latter point not clearly stated in the GotoBLAS2 documents, so
far as I can find, but after I realized that was the problem, I did
find one other cluster website that mentioned the same problem. "If
your application uses GotoBLAS and all cores as MPI threads, setting
GOTO_NUM_THREADS larger than one will usually result in drastically
slower performance."
(http://hpc.uark.edu/hpc/support/software/numerical.html#gotoblas).
In the GotoBLAS2 documentation, it warns of weird thread related
delays, but it implies that the slowdown--if it happens--is a result
of bad user code, rather than this more fundamental mismatch between
OpenMPI (or MPI in general) and GotoBLAS2.

In the process of diagnosing the big slowdown, I've been making many
time comparisons. When I installed GotoBLAS2 in the first place, it
was because so many people (and the R admin manual) said that R's
ordinary BLAS is rudimentary/slow.  In the test cases I've tried,  R's
BLAS is not that bad. In fact, in the test programs we run, the time
is not substantially different with GotoBLAS2 and R's BLAS.  I also
compared the Intel Kernel Math Library BLAS and didn't notice a huge
difference.

So, well, I think that means I'm running bad test cases for R and GotoBLAS2.

Oh, and one more thing. I have not been able to find an example R
program that benefitted at all from allowing threads > 1 in GotoBLAS2
environment settings.  In fact, if a one-thread job takes15 minutes,
the one that allows 2 or more threads is 21 minutes.  And the more
threads allowed causes a job to take longer. This is literally the
same job, same cluster node, the only difference is changing the
environment variable that adjusts the GotoBLAS2 threads allowed.

So if you know whether your example depends on threads or not, I would
appreciate the warning.

pj

-- 
Paul E. Johnson
Professor, Political Science
1541 Lilac Lane, Room 504
University of Kansas


From murdoch.duncan at gmail.com  Thu Aug 19 21:07:15 2010
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 19 Aug 2010 15:07:15 -0400
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
Message-ID: <4C6D80E3.2090806@gmail.com>

I am trying to improve the error reporting in Sweave documents, so that 
if you have a syntax error in a code chunk, it will tell you which line 
of your input file contained the error.

For example, currently you get this:

Error:  chunk 1 (label=named)
Error in parse(text = chunk) : unexpected symbol in "x <- foo bar"
Execution halted

and I'd like errors to be more like this:

Error:  chunk 1 (label=named)
Error in parse(text = chunk, srcfile = srcfile) :
  test.Rnw:9:10: unexpected symbol
9: x <- foo bar
            ^
Execution halted

It turns out that this requires changes that make the "expand=FALSE" 
option quite hard to implement.  Is anyone using it?  For those who 
don't know it, "expand=FALSE" means that a code chunk like

<<echo=TRUE, keep.source=TRUE,expand=FALSE>>=
z <- 3
<<named>>
@

will be displayed as

 > z <- 3
 > <<named>>

rather than expanding the named chunk.  I'd like to drop the option, so 
that the default behaviour (which has always been equivalent to "expand 
= TRUE") would be the only behaviour.

Duncan Murdoch


From marc_schwartz at me.com  Thu Aug 19 21:17:57 2010
From: marc_schwartz at me.com (Marc Schwartz)
Date: Thu, 19 Aug 2010 14:17:57 -0500
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
In-Reply-To: <4C6D80E3.2090806@gmail.com>
References: <4C6D80E3.2090806@gmail.com>
Message-ID: <B435DDA4-1B79-4AC2-9EE7-51A5F9F8B271@me.com>

On Aug 19, 2010, at 2:07 PM, Duncan Murdoch wrote:

> I am trying to improve the error reporting in Sweave documents, so that if you have a syntax error in a code chunk, it will tell you which line of your input file contained the error.
> 
> For example, currently you get this:
> 
> Error:  chunk 1 (label=named)
> Error in parse(text = chunk) : unexpected symbol in "x <- foo bar"
> Execution halted
> 
> and I'd like errors to be more like this:
> 
> Error:  chunk 1 (label=named)
> Error in parse(text = chunk, srcfile = srcfile) :
> test.Rnw:9:10: unexpected symbol
> 9: x <- foo bar
>           ^
> Execution halted
> 
> It turns out that this requires changes that make the "expand=FALSE" option quite hard to implement.  Is anyone using it?  For those who don't know it, "expand=FALSE" means that a code chunk like
> 
> <<echo=TRUE, keep.source=TRUE,expand=FALSE>>=
> z <- 3
> <<named>>
> @
> 
> will be displayed as
> 
> > z <- 3
> > <<named>>
> 
> rather than expanding the named chunk.  I'd like to drop the option, so that the default behaviour (which has always been equivalent to "expand = TRUE") would be the only behaviour.
> 
> Duncan Murdoch


I don't. So 1 "go ahead and drop it" vote...

You may want to post this to R-Help though Duncan, as I suspect there may be more Sweave users there than here...

Thanks and regards,

Marc Schwartz


From kasperdanielhansen at gmail.com  Thu Aug 19 21:37:56 2010
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Thu, 19 Aug 2010 15:37:56 -0400
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
In-Reply-To: <B435DDA4-1B79-4AC2-9EE7-51A5F9F8B271@me.com>
References: <4C6D80E3.2090806@gmail.com>
	<B435DDA4-1B79-4AC2-9EE7-51A5F9F8B271@me.com>
Message-ID: <AANLkTinS8oT-gdNaf2fZdUZBnBnk78xQv0yqudyHPLZL@mail.gmail.com>

I have read a significant number of vignettes from Bioconductor
packages and I have never seen it used.

Kasper

On Thu, Aug 19, 2010 at 3:17 PM, Marc Schwartz <marc_schwartz at me.com> wrote:
> On Aug 19, 2010, at 2:07 PM, Duncan Murdoch wrote:
>
>> I am trying to improve the error reporting in Sweave documents, so that if you have a syntax error in a code chunk, it will tell you which line of your input file contained the error.
>>
>> For example, currently you get this:
>>
>> Error: ?chunk 1 (label=named)
>> Error in parse(text = chunk) : unexpected symbol in "x <- foo bar"
>> Execution halted
>>
>> and I'd like errors to be more like this:
>>
>> Error: ?chunk 1 (label=named)
>> Error in parse(text = chunk, srcfile = srcfile) :
>> test.Rnw:9:10: unexpected symbol
>> 9: x <- foo bar
>> ? ? ? ? ? ^
>> Execution halted
>>
>> It turns out that this requires changes that make the "expand=FALSE" option quite hard to implement. ?Is anyone using it? ?For those who don't know it, "expand=FALSE" means that a code chunk like
>>
>> <<echo=TRUE, keep.source=TRUE,expand=FALSE>>=
>> z <- 3
>> <<named>>
>> @
>>
>> will be displayed as
>>
>> > z <- 3
>> > <<named>>
>>
>> rather than expanding the named chunk. ?I'd like to drop the option, so that the default behaviour (which has always been equivalent to "expand = TRUE") would be the only behaviour.
>>
>> Duncan Murdoch
>
>
> I don't. So 1 "go ahead and drop it" vote...
>
> You may want to post this to R-Help though Duncan, as I suspect there may be more Sweave users there than here...
>
> Thanks and regards,
>
> Marc Schwartz
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From murdoch.duncan at gmail.com  Thu Aug 19 21:43:04 2010
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 19 Aug 2010 15:43:04 -0400
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
In-Reply-To: <B435DDA4-1B79-4AC2-9EE7-51A5F9F8B271@me.com>
References: <4C6D80E3.2090806@gmail.com>
	<B435DDA4-1B79-4AC2-9EE7-51A5F9F8B271@me.com>
Message-ID: <4C6D8948.4030607@gmail.com>

On 19/08/2010 3:17 PM, Marc Schwartz wrote:
> On Aug 19, 2010, at 2:07 PM, Duncan Murdoch wrote:
>
> > I am trying to improve the error reporting in Sweave documents, so that if you have a syntax error in a code chunk, it will tell you which line of your input file contained the error.
> > 
> > For example, currently you get this:
> > 
> > Error:  chunk 1 (label=named)
> > Error in parse(text = chunk) : unexpected symbol in "x <- foo bar"
> > Execution halted
> > 
> > and I'd like errors to be more like this:
> > 
> > Error:  chunk 1 (label=named)
> > Error in parse(text = chunk, srcfile = srcfile) :
> > test.Rnw:9:10: unexpected symbol
> > 9: x <- foo bar
> >           ^
> > Execution halted
> > 
> > It turns out that this requires changes that make the "expand=FALSE" option quite hard to implement.  Is anyone using it?  For those who don't know it, "expand=FALSE" means that a code chunk like
> > 
> > <<echo=TRUE, keep.source=TRUE,expand=FALSE>>=
> > z <- 3
> > <<named>>
> > @
> > 
> > will be displayed as
> > 
> > > z <- 3
> > > <<named>>
> > 
> > rather than expanding the named chunk.  I'd like to drop the option, so that the default behaviour (which has always been equivalent to "expand = TRUE") would be the only behaviour.
> > 
> > Duncan Murdoch
>
>
> I don't. So 1 "go ahead and drop it" vote...
>
> You may want to post this to R-Help though Duncan, as I suspect there may be more Sweave users there than here...
>   

I probably will before I go ahead with this, but I may as well start on 
this group.

Duncan


From cbeleites at units.it  Thu Aug 19 22:29:37 2010
From: cbeleites at units.it (Claudia Beleites)
Date: Thu, 19 Aug 2010 22:29:37 +0200
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
In-Reply-To: <4C6D80E3.2090806@gmail.com>
References: <4C6D80E3.2090806@gmail.com>
Message-ID: <4C6D9431.4020104@units.it>

I never used it.

I got curious, though. What would be a situation that benefits of this option?

Maybe a use case could be found by "brute force" (grep all .Rnw files on CRAN 
for the option?

Claudia

-- 
Claudia Beleites
Dipartimento dei Materiali e delle Risorse Naturali
Universit? degli Studi di Trieste
Via Alfonso Valerio 6/a
I-34127 Trieste

phone: +39 0 40 5 58-37 68
email: cbeleites at units.it


From murdoch.duncan at gmail.com  Thu Aug 19 22:38:12 2010
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 19 Aug 2010 16:38:12 -0400
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
In-Reply-To: <4C6D9431.4020104@units.it>
References: <4C6D80E3.2090806@gmail.com> <4C6D9431.4020104@units.it>
Message-ID: <4C6D9634.4030003@gmail.com>

On 19/08/2010 4:29 PM, Claudia Beleites wrote:
> I never used it.
>
> I got curious, though. What would be a situation that benefits of this option?
>   

When I put it in, I thought it would be for people who were writing 
about Sweave.

Duncan Murdoch

> Maybe a use case could be found by "brute force" (grep all .Rnw files on CRAN 
> for the option?
>
> Claudia
>
>


From kevin.r.coombes at gmail.com  Thu Aug 19 23:07:50 2010
From: kevin.r.coombes at gmail.com (Kevin Coombes)
Date: Thu, 19 Aug 2010 16:07:50 -0500
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
In-Reply-To: <4C6D9634.4030003@gmail.com>
References: <4C6D80E3.2090806@gmail.com> <4C6D9431.4020104@units.it>
	<4C6D9634.4030003@gmail.com>
Message-ID: <4C6D9D26.9060505@gmail.com>

I use it, frequently. The idea for it goes back to some of Knuth's 
original literate programming ideas for developing weave and tangle when 
he was writing TeX (the program).  I want to be able to document the 
pieces of some complex algorithm without having to see all of the gory 
details.  For instance, I have code that looks like the following.  
(Note that this is typed on the fly rather than copied from actual 
source, so there may be typos.)

<<mainloop,keep.source=TRUE,expand=FALSE>>=
for (i in 1:nSamples) {
<<getInfoAboutThisSample>>
 for (j in 1:nChromosomes) {
<<getChromosomeDataForCurrentSample>>
<<normalizeChromosomeData>>
<<findSegments>>
<<computeSignificance>>
<<writeResults>>
 }
}
@

Each of the <<chunks>> is itself a fairly long piece of code defined and 
documented somewhere else.  (Some of them may themselves be written in 
the same form to reduce the final size of a chunk to something a human 
has a chance of understanding. That's the difference between weave and 
tangle in the original implementation.)   By blocking expansion, I can 
focus on the main steps without having them lost in pages and pages of code.

So I vote strongly for retaining "expand=FALSE".

Best,
    Kevin

Duncan Murdoch wrote:
> On 19/08/2010 4:29 PM, Claudia Beleites wrote:
>> I never used it.
>>
>> I got curious, though. What would be a situation that benefits of 
>> this option?
>>   
>
> When I put it in, I thought it would be for people who were writing 
> about Sweave.
>
> Duncan Murdoch
>
>> Maybe a use case could be found by "brute force" (grep all .Rnw files 
>> on CRAN for the option?
>>
>> Claudia
>>
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch.duncan at gmail.com  Thu Aug 19 23:25:22 2010
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 19 Aug 2010 17:25:22 -0400
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
In-Reply-To: <4C6D9D26.9060505@gmail.com>
References: <4C6D80E3.2090806@gmail.com> <4C6D9431.4020104@units.it>
	<4C6D9634.4030003@gmail.com> <4C6D9D26.9060505@gmail.com>
Message-ID: <4C6DA142.3090306@gmail.com>

On 19/08/2010 5:07 PM, Kevin Coombes wrote:
> I use it, frequently. The idea for it goes back to some of Knuth's 
> original literate programming ideas for developing weave and tangle when 
> he was writing TeX (the program).  I want to be able to document the 
> pieces of some complex algorithm without having to see all of the gory 
> details.  For instance, I have code that looks like the following.  
> (Note that this is typed on the fly rather than copied from actual 
> source, so there may be typos.)

Okay, thanks.  I'll keep it in.  So now I have a question:  suppose
you have an error (syntax error at this point, maybe some other kinds of 
error in the future) in the <<getInfoAboutThisSample>> chunk, but that 
chunk wasn't eval'd, mainloop was eval'd.  So the error is going to be 
reported as occurring in chunk mainloop, but with a line number from 
somewhere else in the file.  Is that a problem?

Duncan Murdoch


> 
> <<mainloop,keep.source=TRUE,expand=FALSE>>=
> for (i in 1:nSamples) {
> <<getInfoAboutThisSample>>
>  for (j in 1:nChromosomes) {
> <<getChromosomeDataForCurrentSample>>
> <<normalizeChromosomeData>>
> <<findSegments>>
> <<computeSignificance>>
> <<writeResults>>
>  }
> }
> @
> 
> Each of the <<chunks>> is itself a fairly long piece of code defined and 
> documented somewhere else.  (Some of them may themselves be written in 
> the same form to reduce the final size of a chunk to something a human 
> has a chance of understanding. That's the difference between weave and 
> tangle in the original implementation.)   By blocking expansion, I can 
> focus on the main steps without having them lost in pages and pages of code.
> 
> So I vote strongly for retaining "expand=FALSE".
> 
> Best,
>     Kevin
> 
> Duncan Murdoch wrote:
>> On 19/08/2010 4:29 PM, Claudia Beleites wrote:
>>> I never used it.
>>>
>>> I got curious, though. What would be a situation that benefits of 
>>> this option?
>>>   
>> When I put it in, I thought it would be for people who were writing 
>> about Sweave.
>>
>> Duncan Murdoch
>>
>>> Maybe a use case could be found by "brute force" (grep all .Rnw files 
>>> on CRAN for the option?
>>>
>>> Claudia
>>>
>>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel


From shotwelm at musc.edu  Thu Aug 19 23:29:44 2010
From: shotwelm at musc.edu (Matt Shotwell)
Date: Thu, 19 Aug 2010 17:29:44 -0400
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
In-Reply-To: <4C6D9D26.9060505@gmail.com>
References: <4C6D80E3.2090806@gmail.com> <4C6D9431.4020104@units.it>
	<4C6D9634.4030003@gmail.com>  <4C6D9D26.9060505@gmail.com>
Message-ID: <1282253385.1554.5.camel@matt-laptop>

On Thu, 2010-08-19 at 17:07 -0400, Kevin Coombes wrote:
> I use it, frequently. The idea for it goes back to some of Knuth's 
> original literate programming ideas for developing weave and tangle when 
> he was writing TeX (the program).  I want to be able to document the 
> pieces of some complex algorithm without having to see all of the gory 
> details.  For instance, I have code that looks like the following.  
> (Note that this is typed on the fly rather than copied from actual 
> source, so there may be typos.)
> 
> <<mainloop,keep.source=TRUE,expand=FALSE>>=
> for (i in 1:nSamples) {
> <<getInfoAboutThisSample>>
>  for (j in 1:nChromosomes) {
> <<getChromosomeDataForCurrentSample>>
> <<normalizeChromosomeData>>
> <<findSegments>>
> <<computeSignificance>>
> <<writeResults>>
>  }
> }
> @
> 
> Each of the <<chunks>> is itself a fairly long piece of code defined and 
> documented somewhere else.  (Some of them may themselves be written in 
> the same form to reduce the final size of a chunk to something a human 
> has a chance of understanding. That's the difference between weave and 
> tangle in the original implementation.)   By blocking expansion, I can 
> focus on the main steps without having them lost in pages and pages of code.
> 

Couldn't you achieve the same amount of abstraction using function
calls, rather than embedded code chunks? The reader can then see real
code, rather than non-code, or meta-code, or whatever. Alternatively,
represent the code chunks as R expressions, then evaluate the
expressions at the appropriate points.

-Matt

> So I vote strongly for retaining "expand=FALSE".
> 
> Best,
>     Kevin
> 
> Duncan Murdoch wrote:
> > On 19/08/2010 4:29 PM, Claudia Beleites wrote:
> >> I never used it.
> >>
> >> I got curious, though. What would be a situation that benefits of 
> >> this option?
> >>   
> >
> > When I put it in, I thought it would be for people who were writing 
> > about Sweave.
> >
> > Duncan Murdoch
> >
> >> Maybe a use case could be found by "brute force" (grep all .Rnw files 
> >> on CRAN for the option?
> >>
> >> Claudia
> >>
> >>
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Matthew S. Shotwell
Graduate Student 
Division of Biostatistics and Epidemiology
Medical University of South Carolina


From kevin.r.coombes at gmail.com  Thu Aug 19 23:59:18 2010
From: kevin.r.coombes at gmail.com (Kevin Coombes)
Date: Thu, 19 Aug 2010 16:59:18 -0500
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
In-Reply-To: <4C6DA142.3090306@gmail.com>
References: <4C6D80E3.2090806@gmail.com> <4C6D9431.4020104@units.it>
	<4C6D9634.4030003@gmail.com> <4C6D9D26.9060505@gmail.com>
	<4C6DA142.3090306@gmail.com>
Message-ID: <4C6DA936.3030104@gmail.com>

I can certainly live with the line number matching some other part of 
the code.

Duncan Murdoch wrote:
> On 19/08/2010 5:07 PM, Kevin Coombes wrote:
>> I use it, frequently. The idea for it goes back to some of Knuth's 
>> original literate programming ideas for developing weave and tangle 
>> when he was writing TeX (the program).  I want to be able to document 
>> the pieces of some complex algorithm without having to see all of the 
>> gory details.  For instance, I have code that looks like the 
>> following.  (Note that this is typed on the fly rather than copied 
>> from actual source, so there may be typos.)
>
> Okay, thanks.  I'll keep it in.  So now I have a question:  suppose
> you have an error (syntax error at this point, maybe some other kinds 
> of error in the future) in the <<getInfoAboutThisSample>> chunk, but 
> that chunk wasn't eval'd, mainloop was eval'd.  So the error is going 
> to be reported as occurring in chunk mainloop, but with a line number 
> from somewhere else in the file.  Is that a problem?
>
> Duncan Murdoch
>
>
>>
>> <<mainloop,keep.source=TRUE,expand=FALSE>>=
>> for (i in 1:nSamples) {
>> <<getInfoAboutThisSample>>
>>  for (j in 1:nChromosomes) {
>> <<getChromosomeDataForCurrentSample>>
>> <<normalizeChromosomeData>>
>> <<findSegments>>
>> <<computeSignificance>>
>> <<writeResults>>
>>  }
>> }
>> @
>>
>> Each of the <<chunks>> is itself a fairly long piece of code defined 
>> and documented somewhere else.  (Some of them may themselves be 
>> written in the same form to reduce the final size of a chunk to 
>> something a human has a chance of understanding. That's the 
>> difference between weave and tangle in the original 
>> implementation.)   By blocking expansion, I can focus on the main 
>> steps without having them lost in pages and pages of code.
>>
>> So I vote strongly for retaining "expand=FALSE".
>>
>> Best,
>>     Kevin
>>
>> Duncan Murdoch wrote:
>>> On 19/08/2010 4:29 PM, Claudia Beleites wrote:
>>>> I never used it.
>>>>
>>>> I got curious, though. What would be a situation that benefits of 
>>>> this option?
>>>>   
>>> When I put it in, I thought it would be for people who were writing 
>>> about Sweave.
>>>
>>> Duncan Murdoch
>>>
>>>> Maybe a use case could be found by "brute force" (grep all .Rnw 
>>>> files on CRAN for the option?
>>>>
>>>> Claudia
>>>>
>>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From spinuvit.list at gmail.com  Fri Aug 20 00:02:05 2010
From: spinuvit.list at gmail.com (Vitaly S.)
Date: Fri, 20 Aug 2010 00:02:05 +0200
Subject: [Rd] c.POSIXct
References: <AANLkTinGcXRQd5+Xmo2ad5HoofdbzhZbEaSznAgCL3vO@mail.gmail.com>
	<AANLkTin=8k4UfBqzjQmHa9ntQP3V9zhuhsfkL_qzZyWi@mail.gmail.com>
	<257F72DF-1C81-439A-8893-76B793C9820C@r-project.org>
	<AANLkTi=wd0jcTUhpAJpofxUJy5fB3apLKq8704DV6k6q@mail.gmail.com>
	<4C6CB10C.3000204@structuremonitoring.com>
Message-ID: <878w429s82.fsf@gmail.com>

Spencer Graves <spencer.graves at structuremonitoring.com> writes:

>        I'm with Gabor on this.  I naively would not expect c() to strip attributes generally, and I've been
> surprise more than once to find the time zone attribute stripped when I did not expect that.
>
>
>       Might it make sense to add an argument like "keepAttributes=FALSE" to the "c" function?  Then people like
> Gabor and me would know that we would have to specify "keepAttributes = TRUE" if we wanted attributes to be kept.

I often find myself using c() just to strip attributes when manipulating arrays
in simulation. c() is probably already quite complex function,
"keepAttributes=FALSE" would complicate it even more and impact the speed.

Given that, I wonder why there is no dedicated function to strip attributes.
Am I missing anything?

Vitaly.


From kevin.r.coombes at gmail.com  Fri Aug 20 00:21:40 2010
From: kevin.r.coombes at gmail.com (Kevin Coombes)
Date: Thu, 19 Aug 2010 17:21:40 -0500
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
In-Reply-To: <1282253385.1554.5.camel@matt-laptop>
References: <4C6D80E3.2090806@gmail.com> <4C6D9431.4020104@units.it>	
	<4C6D9634.4030003@gmail.com> <4C6D9D26.9060505@gmail.com>
	<1282253385.1554.5.camel@matt-laptop>
Message-ID: <4C6DAE74.7010002@gmail.com>

I picked the example from segmenting chromosomes for a reason.  I have a 
fair chunk of code that deals with not quite exceeding the amount of RAM 
available in the machine sitting on my desktop.  If I use functions, 
then the pass-by-value semantics of R will push me beyond the limits at 
some points.  (This is an empirical statement, not a theoretical one.  I 
was bitten by it several times while trying to analyze a couple of these 
datasets. And, yes, I know I can get around this by buying a bigger and 
better machine; it's on order...)  The real point is that using 
functions can be detrimental to the efficiency of the program, in ways 
that have real world consequences.

I haven't thought about doing the same thing with expressions. 
Expressions don't have quite the same semantics as chunks, and you'd 
have to make sure the evaluation was delayed so that you cold use the 
current values of things that were computed in the meantime.... and I 
already know how to do this with chunks without having to think so hard.

Using expressons would, however, help with the one difficulty that I 
have with reusing <<chunks>> (independent of whether or not I use 
'expand=FALSE').  I usually work inside emacs, using the 
emacs-speaks-statistics (ESS) package. ESS doesn't know how to evaluate 
the <<chunk>> call inside another chunk. so if I want to step through 
the code during development, I have to jump around myself to locate the 
source chunks.  With expressions that wouldn't matter.

As I ramble on about this, it occurs to me that the underlying issue is 
that <<chunks>> are not first class objects either in the LaTeX world or 
in the R world part of Sweave.  If there were a way to promote them to 
first class objects somehow, then it might make my use of ESS easier 
while simultaneously making it easier for Duncan to figure out how to 
report the correct line numbers.  But I only have an extremely vague 
idea of how one might start to do that...

    Kevin

Matt Shotwell wrote:
> On Thu, 2010-08-19 at 17:07 -0400, Kevin Coombes wrote:
>   
>> I use it, frequently. The idea for it goes back to some of Knuth's 
>> original literate programming ideas for developing weave and tangle when 
>> he was writing TeX (the program).  I want to be able to document the 
>> pieces of some complex algorithm without having to see all of the gory 
>> details.  For instance, I have code that looks like the following.  
>> (Note that this is typed on the fly rather than copied from actual 
>> source, so there may be typos.)
>>
>> <<mainloop,keep.source=TRUE,expand=FALSE>>=
>> for (i in 1:nSamples) {
>> <<getInfoAboutThisSample>>
>>  for (j in 1:nChromosomes) {
>> <<getChromosomeDataForCurrentSample>>
>> <<normalizeChromosomeData>>
>> <<findSegments>>
>> <<computeSignificance>>
>> <<writeResults>>
>>  }
>> }
>> @
>>
>> Each of the <<chunks>> is itself a fairly long piece of code defined and 
>> documented somewhere else.  (Some of them may themselves be written in 
>> the same form to reduce the final size of a chunk to something a human 
>> has a chance of understanding. That's the difference between weave and 
>> tangle in the original implementation.)   By blocking expansion, I can 
>> focus on the main steps without having them lost in pages and pages of code.
>>
>>     
>
> Couldn't you achieve the same amount of abstraction using function
> calls, rather than embedded code chunks? The reader can then see real
> code, rather than non-code, or meta-code, or whatever. Alternatively,
> represent the code chunks as R expressions, then evaluate the
> expressions at the appropriate points.
>
> -Matt
>
>   
>> So I vote strongly for retaining "expand=FALSE".
>>
>> Best,
>>     Kevin
>>
>> Duncan Murdoch wrote:
>>     
>>> On 19/08/2010 4:29 PM, Claudia Beleites wrote:
>>>       
>>>> I never used it.
>>>>
>>>> I got curious, though. What would be a situation that benefits of 
>>>> this option?
>>>>   
>>>>         
>>> When I put it in, I thought it would be for people who were writing 
>>> about Sweave.
>>>
>>> Duncan Murdoch
>>>
>>>       
>>>> Maybe a use case could be found by "brute force" (grep all .Rnw files 
>>>> on CRAN for the option?
>>>>
>>>> Claudia
>>>>
>>>>
>>>>         
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>       
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>     
>
>


From ggrothendieck at gmail.com  Fri Aug 20 00:27:20 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 19 Aug 2010 18:27:20 -0400
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
In-Reply-To: <4C6DAE74.7010002@gmail.com>
References: <4C6D80E3.2090806@gmail.com> <4C6D9431.4020104@units.it>
	<4C6D9634.4030003@gmail.com> <4C6D9D26.9060505@gmail.com>
	<1282253385.1554.5.camel@matt-laptop> <4C6DAE74.7010002@gmail.com>
Message-ID: <AANLkTikLEP6f=J3P=75zeP9+NRp2c756U_jhSLz_BawJ@mail.gmail.com>

On Thu, Aug 19, 2010 at 6:21 PM, Kevin Coombes
<kevin.r.coombes at gmail.com> wrote:
> I picked the example from segmenting chromosomes for a reason. ?I have a
> fair chunk of code that deals with not quite exceeding the amount of RAM
> available in the machine sitting on my desktop. ?If I use functions, then
> the pass-by-value semantics of R will push me beyond the limits at some
> points. ?(This is an empirical statement, not a theoretical one. ?I was
> bitten by it several times while trying to analyze a couple of these
> datasets. And, yes, I know I can get around this by buying a bigger and
> better machine; it's on order...) ?The real point is that using functions
> can be detrimental to the efficiency of the program, in ways that have real
> world consequences.
>
> I haven't thought about doing the same thing with expressions. Expressions
> don't have quite the same semantics as chunks, and you'd have to make sure
> the evaluation was delayed so that you cold use the current values of things
> that were computed in the meantime.... and I already know how to do this
> with chunks without having to think so hard.
>
> Using expressons would, however, help with the one difficulty that I have
> with reusing <<chunks>> (independent of whether or not I use
> 'expand=FALSE'). ?I usually work inside emacs, using the
> emacs-speaks-statistics (ESS) package. ESS doesn't know how to evaluate the
> <<chunk>> call inside another chunk. so if I want to step through the code
> during development, I have to jump around myself to locate the source
> chunks. ?With expressions that wouldn't matter.
>
> As I ramble on about this, it occurs to me that the underlying issue is that
> <<chunks>> are not first class objects either in the LaTeX world or in the R
> world part of Sweave. ?If there were a way to promote them to first class
> objects somehow, then it might make my use of ESS easier while
> simultaneously making it easier for Duncan to figure out how to report the
> correct line numbers. ?But I only have an extremely vague idea of how one
> might start to do that...
>

You could try a macro instead and see how it performs.  There is an
article by Thomas Lumley in R News 2003-1 and an implementation in the
gtools package.


From spencer.graves at structuremonitoring.com  Fri Aug 20 02:08:11 2010
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Thu, 19 Aug 2010 17:08:11 -0700
Subject: [Rd] No RTFM?
Message-ID: <4C6DC76B.7000303@structuremonitoring.com>

  What do you think about adding a "No RTFM" policy to the R mailing 
lists? Per, "http://en.wikipedia.org/wiki/RTFM":


The Ubuntu Forums and LinuxQuestions.org, for instance, have instituted 
"no RTFM" policies to promote a welcoming atmosphere.[8][9].

RTFM [and] "Go look on google" are two inappropriate responses to a 
question. If you don't know the answer or don't wish to help, please say 
nothing instead of brushing off someone's question. Politely showing 
someone how you searched or obtained the answer to a question is 
acceptable, even encouraged.
...

If you wish to remind a user to use search tools or other resources when 
they have asked a question you feel is basic or common, please be very 
polite. Any replies for help that contain language disrespectful towards 
the user asking the question, i.e. "STFU" or "RTFM" are unacceptable and 
will not be tolerated. ?Ubuntu Forums


Gavin Simpson and I recently provided examples answering a question from 
"r.ookie" that had previously elicited responses, ""You want us to read 
the help page to you?" and "It yet again appears that you are asking us 
to read the help pages for you."


I can appreciate the sentiment in fortunes('rtfm'). In this case, 
however, "r.ookie" had RTFM (and said so), but evidently the manual was 
not sufficiently clear.


Best Wishes,
Spencer Graves


From cberry at tajo.ucsd.edu  Fri Aug 20 06:26:19 2010
From: cberry at tajo.ucsd.edu (Charles C. Berry)
Date: Thu, 19 Aug 2010 21:26:19 -0700
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
In-Reply-To: <4C6DAE74.7010002@gmail.com>
References: <4C6D80E3.2090806@gmail.com> <4C6D9431.4020104@units.it> 
	<4C6D9634.4030003@gmail.com> <4C6D9D26.9060505@gmail.com>
	<1282253385.1554.5.camel@matt-laptop> <4C6DAE74.7010002@gmail.com>
Message-ID: <Pine.LNX.4.64.1008192028200.29149@tajo.ucsd.edu>

On Thu, 19 Aug 2010, Kevin Coombes wrote:

> I picked the example from segmenting chromosomes for a reason.  I have a fair 
> chunk of code that deals with not quite exceeding the amount of RAM available 
> in the machine sitting on my desktop.  If I use functions, then the 
> pass-by-value semantics of R will push me beyond the limits at some points. 
> (This is an empirical statement, not a theoretical one.  I was bitten by it 
> several times while trying to analyze a couple of these datasets. And, yes, I 
> know I can get around this by buying a bigger and better machine; it's on 
> order...)  The real point is that using functions can be detrimental to the 
> efficiency of the program, in ways that have real world consequences.
>
> I haven't thought about doing the same thing with expressions. Expressions 
> don't have quite the same semantics as chunks, and you'd have to make sure 
> the evaluation was delayed so that you cold use the current values of things 
> that were computed in the meantime.... and I already know how to do this with 
> chunks without having to think so hard.
>
> Using expressons would, however, help with the one difficulty that I have 
> with reusing <<chunks>> (independent of whether or not I use 'expand=FALSE'). 
> I usually work inside emacs, using the emacs-speaks-statistics (ESS) package. 
> ESS doesn't know how to evaluate the <<chunk>> call inside another chunk. so 
> if I want to step through the code during development, I have to jump around 
> myself to locate the source chunks.  With expressions that wouldn't matter.
>

emacs org-mode might help.

You can define a chunk, <<ch1>> (say), then place it in a subsequent 
chunk, <<ch2>> (say), inside an eval() and refer to <<ch2>> inside an 
eval() inside another chunk, <<ch3>>, and so on. The only trick is to 
write the chunk so that the chunk it refers to is on its own line, like 
this:

#+source: ch3
#+begin_src R :session :noweb yes
eval(
<<ch2>>
)
z <- mean(y)+1
#+end_src

as the noweb expansion will repeat any other text on the line with the 
named chunk for each line of code in the referenced chunk.

You can define a library of chunks separately, which might help you if you 
reuse them in different places.

You can use ess-mode to edit the chunks and execute them with the usual 
ess-eval-* commands, or run them in org-mode with the results optionally 
returned to the edit buffer, but outside the code block.

If you want to debug a bunch of nested chunks and 'step through the code 
during development', you can tangle the chunk you wish to execute to 
produce a *.R file. The nested chunks are expanded into R. Open that *.R 
file and debug away.

With a recent emacs, I think this gets you going:

 	C-h i m Org Mode RET C-s source RET RET

or Google 'org-babel R' or some such or just go look here:


 	http://blogisticreflections.wordpress.com/

> As I ramble on about this, it occurs to me that the underlying issue is that 
> <<chunks>> are not first class objects either in the LaTeX world or in the R 
> world part of Sweave.  If there were a way to promote them to first class 
> objects somehow, then it might make my use of ESS easier while simultaneously 
> making it easier for Duncan to figure out how to report the correct line 
> numbers.  But I only have an extremely vague idea of how one might start to 
> do that...

org-mode might be the path of least resistance.

FWIW, the code chunks are objects processed by emacs-lisp before they are 
handed off to R, so there might be a slicker way to handle the nesting 
than dropping chunks inside eval()s in R blocks. If that interests you, 
there is a very active listserv for orgmode, where you might inqure.

HTH,

Chuck




>
>   Kevin
>
> Matt Shotwell wrote:
>>  On Thu, 2010-08-19 at 17:07 -0400, Kevin Coombes wrote:
>> 
>> >  I use it, frequently. The idea for it goes back to some of Knuth's 
>> >  original literate programming ideas for developing weave and tangle when 
>> >  he was writing TeX (the program).  I want to be able to document the 
>> >  pieces of some complex algorithm without having to see all of the gory 
>> >  details.  For instance, I have code that looks like the following. 
>> >  (Note that this is typed on the fly rather than copied from actual 
>> >  source, so there may be typos.)
>> > 
>> >  <<mainloop,keep.source=TRUE,expand=FALSE>>=
>> >  for (i in 1:nSamples) {
>> >  <<getInfoAboutThisSample>>
>> >  for (j in 1:nChromosomes) {
>> >  <<getChromosomeDataForCurrentSample>>
>> >  <<normalizeChromosomeData>>
>> >  <<findSegments>>
>> >  <<computeSignificance>>
>> >  <<writeResults>>
>> >   }
>> >  }
>> >  @
>> > 
>> >  Each of the <<chunks>> is itself a fairly long piece of code defined and 
>> >  documented somewhere else.  (Some of them may themselves be written in 
>> >  the same form to reduce the final size of a chunk to something a human 
>> >  has a chance of understanding. That's the difference between weave and 
>> >  tangle in the original implementation.)   By blocking expansion, I can 
>> >  focus on the main steps without having them lost in pages and pages of 
>> >  code.
>> > 
>> > 
>>
>>  Couldn't you achieve the same amount of abstraction using function
>>  calls, rather than embedded code chunks? The reader can then see real
>>  code, rather than non-code, or meta-code, or whatever. Alternatively,
>>  represent the code chunks as R expressions, then evaluate the
>>  expressions at the appropriate points.
>>
>>  -Matt
>>
>> 
>> >  So I vote strongly for retaining "expand=FALSE".
>> > 
>> >  Best,
>> >      Kevin
>> > 
>> >  Duncan Murdoch wrote:
>> > 
>> > >  On 19/08/2010 4:29 PM, Claudia Beleites wrote:
>> > > 
>> > > >  I never used it.
>> > > > 
>> > > >  I got curious, though. What would be a situation that benefits of 
>> > > >  this option?
>> > > > 
>> > > > 
>> > >  When I put it in, I thought it would be for people who were writing 
>> > >  about Sweave.
>> > > 
>> > >  Duncan Murdoch
>> > > 
>> > > 
>> > > >  Maybe a use case could be found by "brute force" (grep all .Rnw 
>> > > >  files on CRAN for the option?
>> > > > 
>> > > >  Claudia
>> > > > 
>> > > > 
>> > > > 
>> > >  ______________________________________________
>> > >  R-devel at r-project.org mailing list
>> > >  https://stat.ethz.ch/mailman/listinfo/r-devel
>> > > 
>> >  ______________________________________________
>> >  R-devel at r-project.org mailing list
>> >  https://stat.ethz.ch/mailman/listinfo/r-devel
>> > 
>> 
>> 
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

Charles C. Berry                            (858) 534-2098
                                             Dept of Family/Preventive Medicine
E mailto:cberry at tajo.ucsd.edu	            UC San Diego
http://famprevmed.ucsd.edu/faculty/cberry/  La Jolla, San Diego 92093-0901


From ubuntulist at yandex.ru  Fri Aug 20 10:32:32 2010
From: ubuntulist at yandex.ru (Vyacheslav Karamov)
Date: Fri, 20 Aug 2010 11:32:32 +0300
Subject: [Rd] C or Java code generation
In-Reply-To: <19565.21908.102685.183781@max.nulle.part>
References: <4C6CF35F.9040305@yandex.ru>	<AANLkTimDKD058Z+UQK2Z8EucsVsbE-T+dRe2h5EG-HYc@mail.gmail.com>	<4C6CFD45.7050007@yandex.ru>	<AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>	<4C6D0BC2.7070906@yandex.ru>	<AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>	<19565.13345.692185.626415@max.nulle.part>	<4C6D3A53.5070808@yandex.ru>
	<19565.21908.102685.183781@max.nulle.part>
Message-ID: <4C6E3DA0.7010005@yandex.ru>

Dirk Eddelbuettel ?????:
> No, what you describe in the next few hundred lines would _build the examples
> if the package is already installed_ 
>
> Also, building these examples (once you have the package is installed) does
> "Work For Me (TM)" in the sense that the compiles and linking steps succeed
> (WinXP, Rtools with gcc/g++ 4.2.x, R 2.11.0) yet it, as noted above, leads to
> a seg.fault which Romain and I have found neither time nor motivation to fix.
>
> You would be very welcome to help out -- our discussions around Rcpp and
> RInside take place on the rcpp-devel list off R-Forge.
>
>
> | 1) First I added R_HOME environment variable.
> | 2) Then modified c:\Program 
> | Files\R\R-2.11.1\library\RInside\examples\standard\Makefile.win by 
> | surrounding "$(R_HOME)/bin/R" with the quotation marks.
> | 3) And finally
> | C:\Program Files\R\R-2.11.1\library\RInside\examples\standard>make -f 
> | Makefile.win
> | g++ -Ic:/PROGRA~1/R/R-211~1.1/include 
> | -Ic:/PROGRA~1/R/R-211~1.1/library/Rcpp/include 
> | -I"c:/PROGRA~1/R/R-211~1.1/library/RInside/include" -O2 -Wall -Wall  -s  
> | rinside_callbacks0.cpp  -Lc:/PROGRA~1/R/R-211~1.1/bin -lR 
> | -Lc:/PROGRA~1/R/R-211~1.1/bin -lRblas -Lc:/PROGRA~1/R/R-211~1.1/bin 
> | -lRlapack "c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a" 
> | c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a  -o rinside_callbacks0
> | c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x10b): 
> | undefined reference to `__gxx_personality_sj0'
>
> [ Hundreds of similar lines removed. ]
>
>
> Thanks, Dirk
>
>   
Hi all!

Could you help me to install Rinside in Ubuntu Jaunty?
I've installed R and Rcpp but I have no idea how to deal with Rinside.
I couldn't find any makefile.

WBR,
Vyacheslav.


From romain.francois at dbmail.com  Fri Aug 20 10:43:53 2010
From: romain.francois at dbmail.com (Romain Francois)
Date: Fri, 20 Aug 2010 10:43:53 +0200
Subject: [Rd] C or Java code generation
In-Reply-To: <4C6E3DA0.7010005@yandex.ru>
References: <4C6CF35F.9040305@yandex.ru>	<AANLkTimDKD058Z+UQK2Z8EucsVsbE-T+dRe2h5EG-HYc@mail.gmail.com>	<4C6CFD45.7050007@yandex.ru>	<AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>	<4C6D0BC2.7070906@yandex.ru>	<AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>	<19565.13345.692185.626415@max.nulle.part>	<4C6D3A53.5070808@yandex.ru>	<19565.21908.102685.183781@max.nulle.part>
	<4C6E3DA0.7010005@yandex.ru>
Message-ID: <4C6E4049.4090800@dbmail.com>


Le 20/08/10 10:32, Vyacheslav Karamov a ?crit :
> Dirk Eddelbuettel ?????:
>> No, what you describe in the next few hundred lines would _build the
>> examples
>> if the package is already installed_
>> Also, building these examples (once you have the package is installed)
>> does
>> "Work For Me (TM)" in the sense that the compiles and linking steps
>> succeed
>> (WinXP, Rtools with gcc/g++ 4.2.x, R 2.11.0) yet it, as noted above,
>> leads to
>> a seg.fault which Romain and I have found neither time nor motivation
>> to fix.
>>
>> You would be very welcome to help out -- our discussions around Rcpp and
>> RInside take place on the rcpp-devel list off R-Forge.
>>
>>
>> | 1) First I added R_HOME environment variable.
>> | 2) Then modified c:\Program |
>> Files\R\R-2.11.1\library\RInside\examples\standard\Makefile.win by |
>> surrounding "$(R_HOME)/bin/R" with the quotation marks.
>> | 3) And finally
>> | C:\Program Files\R\R-2.11.1\library\RInside\examples\standard>make
>> -f | Makefile.win
>> | g++ -Ic:/PROGRA~1/R/R-211~1.1/include |
>> -Ic:/PROGRA~1/R/R-211~1.1/library/Rcpp/include |
>> -I"c:/PROGRA~1/R/R-211~1.1/library/RInside/include" -O2 -Wall -Wall -s
>> | rinside_callbacks0.cpp -Lc:/PROGRA~1/R/R-211~1.1/bin -lR |
>> -Lc:/PROGRA~1/R/R-211~1.1/bin -lRblas -Lc:/PROGRA~1/R/R-211~1.1/bin |
>> -lRlapack "c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a" |
>> c:/PROGRA~1/R/R-211~1.1/library/Rcpp/lib/libRcpp.a -o rinside_callbacks0
>> |
>> c:/PROGRA~1/R/R-211~1.1/library/RInside/lib/libRInside.a(RInside.o):RInside.cpp:(.text+0x10b):
>> | undefined reference to `__gxx_personality_sj0'
>>
>> [ Hundreds of similar lines removed. ]
>>
>>
>> Thanks, Dirk
>>
> Hi all!
>
> Could you help me to install Rinside in Ubuntu Jaunty?
> I've installed R and Rcpp but I have no idea how to deal with Rinside.
> I couldn't find any makefile.
>
> WBR,
> Vyacheslav.

Hi,

It installs just like any other R package, there is no need for a Makefile.

$ R CMD RInside_0.2.3.tar.gz

or from R:

 > install.packages( "RInside" )

We usually encourage people to use the Rcpp-devel mailing list for 
questions about RInside :
http://lists.r-forge.r-project.org/cgi-bin/mailman/listinfo/rcpp-devel

Romain

-- 
Romain Francois
Professional R Enthusiast
+33(0) 6 28 91 30 30
http://romainfrancois.blog.free.fr
|- http://bit.ly/bzoWrs : Rcpp svn revision 2000
|- http://bit.ly/b8VNE2 : Rcpp at LondonR, oct 5th
`- http://bit.ly/aAyra4 : highlight 0.2-2


From cbeleites at units.it  Fri Aug 20 11:38:32 2010
From: cbeleites at units.it (Claudia Beleites)
Date: Fri, 20 Aug 2010 11:38:32 +0200
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
In-Reply-To: <4C6D9D26.9060505@gmail.com>
References: <4C6D80E3.2090806@gmail.com> <4C6D9431.4020104@units.it>
	<4C6D9634.4030003@gmail.com> <4C6D9D26.9060505@gmail.com>
Message-ID: <4C6E4D18.7050801@units.it>

Dear Kevin,

thank you for the explanation.

 > I use it, frequently. The idea for it goes back to some of Knuth's
 > original literate programming ideas for developing weave and tangle when
 > he was writing TeX (the program).  I want to be able to document the
 > pieces of some complex algorithm without having to see all of the gory
 > details.  For instance, I have code that looks like the following.
 > (Note that this is typed on the fly rather than copied from actual
 > source, so there may be typos.)
 >
 > <<mainloop,keep.source=TRUE,expand=FALSE>>=
 > for (i in 1:nSamples) {
 > <<getInfoAboutThisSample>>
 > for (j in 1:nChromosomes) {
 > <<getChromosomeDataForCurrentSample>>
 > <<normalizeChromosomeData>>
 > <<findSegments>>
 > <<computeSignificance>>
 > <<writeResults>>
 > }
 > }
 > @

Sounds & looks like after invention of the macro and before invention of the 
function?

However, I'll stay with functions: my new RAM already arrived :-)
But: you never know. It may come handy some day also for me.

I'll be a great fan of errors reported with line number! And if the reporting 
isn't that convenient in expand = FALSE chunks, it still helps a lot in many, 
many  expanded chunks, right?.


My 2 ct,

Claudia

-- 
Claudia Beleites
Dipartimento dei Materiali e delle Risorse Naturali
Universit? degli Studi di Trieste
Via Alfonso Valerio 6/a
I-34127 Trieste

phone: +39 0 40 5 58-37 68
email: cbeleites at units.it


From maechler at stat.math.ethz.ch  Fri Aug 20 12:35:41 2010
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 20 Aug 2010 12:35:41 +0200
Subject: [Rd] Sweave  <<*, showWarnings=TRUE>>  ?
In-Reply-To: <4C6D80E3.2090806@gmail.com>
References: <4C6D80E3.2090806@gmail.com>
Message-ID: <19566.23165.213030.881192@lynne.math.ethz.ch>

Thank you Duncan, for expanding Sweave functionality,
notably considering error handling.

Related to that is the topic of handling warning messages.

In a course on "using R" (for beginners),
I would really like to show warnings that code chunks produce.
Currently, the warnings are printed to the console when I run
 'R CMD Sweave ..' and do not appear in the resulting *.tex file.

Of course   ---   fortune("Yoda")   ---
I can always fudge what I want,
but it would be quite desirable to have simple Sweave option
which would deal with warnings()  
{ and maybe message(), stop(), and general exception handling; 
  but for all practical purposes, it's the warnings that I'd
  like to be handled automatically.}

Martin Maechler, ETH Zurich


From murdoch.duncan at gmail.com  Fri Aug 20 13:10:01 2010
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 20 Aug 2010 07:10:01 -0400
Subject: [Rd] Sweave  <<*, showWarnings=TRUE>>  ?
In-Reply-To: <19566.23165.213030.881192@lynne.math.ethz.ch>
References: <4C6D80E3.2090806@gmail.com>
	<19566.23165.213030.881192@lynne.math.ethz.ch>
Message-ID: <4C6E6289.1000303@gmail.com>

Martin Maechler wrote:
> Thank you Duncan, for expanding Sweave functionality,
> notably considering error handling.
>
> Related to that is the topic of handling warning messages.
>   

I thought someone (Fritz?  One of the Sweave support package writers?) 
was working on the issue of including error and warning messages in 
Sweave output.  My changes don't address that problem.

The changes I'm going to make will only be visible in syntax errors.  R 
currently has the underlying support to allow it to report source file 
line numbers in execution time error messages, but it isn't taken 
advantage of in many places.  If that is expanded, my Sweave changes 
should take advantage of it automatically.

Duncan Murdoch
> In a course on "using R" (for beginners),
> I would really like to show warnings that code chunks produce.
> Currently, the warnings are printed to the console when I run
>  'R CMD Sweave ..' and do not appear in the resulting *.tex file.
>
> Of course   ---   fortune("Yoda")   ---
> I can always fudge what I want,
> but it would be quite desirable to have simple Sweave option
> which would deal with warnings()  
> { and maybe message(), stop(), and general exception handling; 
>   but for all practical purposes, it's the warnings that I'd
>   like to be handled automatically.}
>
> Martin Maechler, ETH Zurich
>


From chuck at sharpsteen.net  Fri Aug 20 17:02:10 2010
From: chuck at sharpsteen.net (Sharpie)
Date: Fri, 20 Aug 2010 08:02:10 -0700 (PDT)
Subject: [Rd] C or Java code generation
In-Reply-To: <4C6E4049.4090800@dbmail.com>
References: <4C6CF35F.9040305@yandex.ru> <4C6CFD45.7050007@yandex.ru>
	<AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>
	<4C6D0BC2.7070906@yandex.ru>
	<AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>
	<19565.13345.692185.626415@max.nulle.part>
	<4C6D3A53.5070808@yandex.ru>
	<19565.21908.102685.183781@max.nulle.part>
	<4C6E3DA0.7010005@yandex.ru> <4C6E4049.4090800@dbmail.com>
Message-ID: <1282316530615-2332606.post@n4.nabble.com>



Romain Francois wrote:
> 
> Hi,
> 
> It installs just like any other R package, there is no need for a
> Makefile.
> 
> $ R CMD RInside_0.2.3.tar.gz
> 

Should probably be:

  R CMD INSTALL RInside_0.2.3.tar.gz


But are we misleading the OP a little bit about what RInside can help him
do?  His original question was:


Vyacheslav Karamov wrote:
> 
> Hi All!
> 
> I'm new to R and I need to know is it possible for R to generate C/C++ 
> source code, Java byte code or native Win32 DLL like MatLab?
> 

He stated that he was looking for this because:


Vyacheslav Karamov wrote:
> 
> Is there any posibility to use R without installing?
> I mean that I have my own application written in MS Visual C++ and I 
> need to use R script in this app. I can install R and use it via DCOM, 
> but it's not convenient for  the end users of my  program.
> 


I think the proper answer to this question is: R is an interpreted language. 
There is not any developed way to compile R code to machine code, an
executable or a library that can be distributed to a computer that does not
have a copy of R installed.


R does include a library with various names such as R.a, libR.so and R.dll
that contains the R interpreter and support functions which could be used to
distribute a stand alone executable that can run R code without the R
distribution being installed.

However the sticking point is packages; the OP is likely trying to embed R
in order to gain access to one, or several, R packages.  As far as I know,
there is no developed way to compile an R package down such that it could be
distributed, perhaps along with R.dll, and stand by its self.

It is theoretically possible, but there is no turnkey solution.


So, unless I am gravely mistaken, RInside is just a nice cross-platform
replacement for the RDCOM interface.  It won't solve the problem of needing
R installed on the client's computer in order to fully use the R environment
which is dependent on packages.

-Charlie

-----
Charlie Sharpsteen
Undergraduate-- Environmental Resources Engineering
Humboldt State University
-- 
View this message in context: http://r.789695.n4.nabble.com/C-or-Java-code-generation-tp2330875p2332606.html
Sent from the R devel mailing list archive at Nabble.com.


From edd at debian.org  Fri Aug 20 17:17:30 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 20 Aug 2010 10:17:30 -0500
Subject: [Rd] C or Java code generation
In-Reply-To: <1282316530615-2332606.post@n4.nabble.com>
References: <4C6CF35F.9040305@yandex.ru> <4C6CFD45.7050007@yandex.ru>
	<AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>
	<4C6D0BC2.7070906@yandex.ru>
	<AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>
	<19565.13345.692185.626415@max.nulle.part>
	<4C6D3A53.5070808@yandex.ru>
	<19565.21908.102685.183781@max.nulle.part>
	<4C6E3DA0.7010005@yandex.ru> <4C6E4049.4090800@dbmail.com>
	<1282316530615-2332606.post@n4.nabble.com>
Message-ID: <19566.40074.624066.821704@max.nulle.part>


On 20 August 2010 at 08:02, Sharpie wrote:
| So, unless I am gravely mistaken, RInside is just a nice cross-platform
| replacement for the RDCOM interface.  It won't solve the problem of needing

I wrote RInside, and I am unaware of any attempts of mine to either copy,
clone or otherwise imitate any of the non-portable technologies from the
Pacific Northwest I happen to be rather unfamiliar with to boot.  So I fear
that were indeed gravely mistaken. Thanks for trying though.

RInside delivers what it promises: an embedded R instance for your C++
program.  And thanks to the magic that is Rcpp and all of the work Romain and
I put into it, you get a rather rich interface between R and C++ that has no
parallel I know of.

| R installed on the client's computer in order to fully use the R environment
| which is dependent on packages.

That on the other hand is a true statement and as far as I am concerned a
good thing as well.  

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From chuck at sharpsteen.net  Fri Aug 20 17:25:52 2010
From: chuck at sharpsteen.net (Sharpie)
Date: Fri, 20 Aug 2010 08:25:52 -0700 (PDT)
Subject: [Rd] C or Java code generation
In-Reply-To: <19566.40074.624066.821704@max.nulle.part>
References: <AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>
	<4C6D0BC2.7070906@yandex.ru>
	<AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>
	<19565.13345.692185.626415@max.nulle.part>
	<4C6D3A53.5070808@yandex.ru>
	<19565.21908.102685.183781@max.nulle.part>
	<4C6E3DA0.7010005@yandex.ru> <4C6E4049.4090800@dbmail.com>
	<1282316530615-2332606.post@n4.nabble.com>
	<19566.40074.624066.821704@max.nulle.part>
Message-ID: <1282317952173-2332632.post@n4.nabble.com>



Dirk Eddelbuettel wrote:
> 
> 
> On 20 August 2010 at 08:02, Sharpie wrote:
> | So, unless I am gravely mistaken, RInside is just a nice cross-platform
> | replacement for the RDCOM interface.  It won't solve the problem of
> needing
> 
> I wrote RInside, and I am unaware of any attempts of mine to either copy,
> clone or otherwise imitate any of the non-portable technologies from the
> Pacific Northwest I happen to be rather unfamiliar with to boot.  So I
> fear
> that were indeed gravely mistaken. Thanks for trying though.
> 
> RInside delivers what it promises: an embedded R instance for your C++
> program.  And thanks to the magic that is Rcpp and all of the work Romain
> and
> I put into it, you get a rather rich interface between R and C++ that has
> no
> parallel I know of.
> 
> | R installed on the client's computer in order to fully use the R
> environment
> | which is dependent on packages.
> 
> That on the other hand is a true statement and as far as I am concerned a
> good thing as well.  
> 
> Dirk
> 

My apologies Dirk, I phrased that badly.  

What I ment is that RInside provides an interface by which the C++ program
can interact with R.  Essentially, what the OP would gain from RInside is
that he would not have to use DCOM.

-Charlie

-----
Charlie Sharpsteen
Undergraduate-- Environmental Resources Engineering
Humboldt State University
-- 
View this message in context: http://r.789695.n4.nabble.com/C-or-Java-code-generation-tp2330875p2332632.html
Sent from the R devel mailing list archive at Nabble.com.


From simon.urbanek at r-project.org  Fri Aug 20 17:39:31 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 20 Aug 2010 11:39:31 -0400
Subject: [Rd] C or Java code generation
In-Reply-To: <19566.40074.624066.821704@max.nulle.part>
References: <4C6CF35F.9040305@yandex.ru> <4C6CFD45.7050007@yandex.ru>
	<AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>
	<4C6D0BC2.7070906@yandex.ru>
	<AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>
	<19565.13345.692185.626415@max.nulle.part>
	<4C6D3A53.5070808@yandex.ru>
	<19565.21908.102685.183781@max.nulle.part>
	<4C6E3DA0.7010005@yandex.ru> <4C6E4049.4090800@dbmail.com>
	<1282316530615-2332606.post@n4.nabble.com>
	<19566.40074.624066.821704@max.nulle.part>
Message-ID: <3608EC6A-648A-46F6-8D8F-CC74B5AEB9C7@r-project.org>


On Aug 20, 2010, at 11:17 AM, Dirk Eddelbuettel wrote:

> 
> On 20 August 2010 at 08:02, Sharpie wrote:
> | So, unless I am gravely mistaken, RInside is just a nice cross-platform
> | replacement for the RDCOM interface.  It won't solve the problem of needing
> 
> I wrote RInside, and I am unaware of any attempts of mine to either copy,
> clone or otherwise imitate any of the non-portable technologies from the
> Pacific Northwest I happen to be rather unfamiliar with to boot.  So I fear
> that were indeed gravely mistaken. 
> 

I fear not: RInside, Rserve, R[D]COM, JRI, ... all embed R which was that his point, rightly so. 

There is no way I know of to turn R code into something that can run on its own without R present (save for a tiny subset of Rmath).

Cheers,
Simon



> RInside delivers what it promises: an embedded R instance for your C++
> program.  And thanks to the magic that is Rcpp and all of the work Romain and
> I put into it, you get a rather rich interface between R and C++ that has no
> parallel I know of.
> 
> | R installed on the client's computer in order to fully use the R environment
> | which is dependent on packages.
> 
> That on the other hand is a true statement and as far as I am concerned a
> good thing as well.  
> 
> Dirk
> 
> -- 
> Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From edd at debian.org  Fri Aug 20 17:59:01 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 20 Aug 2010 10:59:01 -0500
Subject: [Rd] C or Java code generation
In-Reply-To: <1282317952173-2332632.post@n4.nabble.com>
References: <AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>
	<4C6D0BC2.7070906@yandex.ru>
	<AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>
	<19565.13345.692185.626415@max.nulle.part>
	<4C6D3A53.5070808@yandex.ru>
	<19565.21908.102685.183781@max.nulle.part>
	<4C6E3DA0.7010005@yandex.ru> <4C6E4049.4090800@dbmail.com>
	<1282316530615-2332606.post@n4.nabble.com>
	<19566.40074.624066.821704@max.nulle.part>
	<1282317952173-2332632.post@n4.nabble.com>
Message-ID: <19566.42565.331336.955411@max.nulle.part>


On 20 August 2010 at 08:25, Sharpie wrote:
| My apologies Dirk, I phrased that badly.  

No worries.
 
| What I ment is that RInside provides an interface by which the C++ program
| can interact with R.  Essentially, what the OP would gain from RInside is
| that he would not have to use DCOM.

Apart from the fact (that I alluded to earlier) that 
  a) RInside does not build with the windoze toolchain but 
  b) requires Rtools by Duncan M, and 
  c) as of late builds but segfaults when running on Windoze.

So in short he is not helped at all unless he changes platforms. C'est la vie.


On 20 August 2010 at 11:39, Simon Urbanek wrote:
| I fear not: RInside, Rserve, R[D]COM, JRI, ... all embed R which was that his point, rightly so. 

I know next to nothing about JRI and RwhateverCOM so I will skip those. But I
have been in pushing for adoption of Rserve in different places and as early
as 2003/2004 as I am a big, big fan of Rserver (as well as Debian maintainer).  

However, RInside is much different in that it is a) in-process and b) endowed
with the richer Rcpp interface that Romain and I have been building.  So in
that sense this is not a comparison to me apart from the obvious fact that
both use R in an embedded fashion.
 
| There is no way I know of to turn R code into something that can run on its own without R present (save for a tiny subset of Rmath).

You seem to have missed that I made that same point, and stressed it as a
good one.  Not of the aforementioned technologies are meant to hide R or
permit deployment without it.

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From therneau at mayo.edu  Fri Aug 20 18:14:39 2010
From: therneau at mayo.edu (Terry Therneau)
Date: Fri, 20 Aug 2010 11:14:39 -0500
Subject: [Rd] Does anyone use Sweave (RweaveLatex)	option	"expand=FALSE"?
In-Reply-To: <mailman.33.1282298412.28650.r-devel@r-project.org>
References: <mailman.33.1282298412.28650.r-devel@r-project.org>
Message-ID: <1282320879.529.7.camel@punchbuggy>

Duncan,
  I use noweb for my R source code on the more complex projects (see the
coxme package).  I currently have my own "noweb.R" functions to do the
work, but the overlap is so great with Sweave that I have hopes that
they will one day merge.  

A note on <<abc>> recursion: for documentation this is very well
designed; it's better than a macro or a function would be.  And of
course, documentation of code is what the system was designed for.

And a general query: I currently have the .Rnw source files in the
inst/noweb directory.  Do people have a better suggestion?  Remember
these .Rnw files are the source of my .R files and of document
explaining the code, not the source of vignettes or manual pages.

Terry Therneau


From grewe at zib.de  Fri Aug 20 18:14:52 2010
From: grewe at zib.de (Carl Martin Grewe)
Date: Fri, 20 Aug 2010 18:14:52 +0200
Subject: [Rd] segfault in embedded r after call to repldlldo1
Message-ID: <4C6EA9FC.7040604@zib.de>

Dear R developers,

i've got a question concerning an embedded R instance. I called the 
initialization routines as seen in the "writing extensions" guide 
(Rf_initialize, setup_Rmainloop and R_ReplDLLinit). I also changed the 
function callback pointer of readconsole and writeconsoleex to my local 
functions.

when i call mainloop there is no problem and the commands are evaluated 
as expected. because i don't want R to run in an own thread and my app 
should keep the control i want to use repldlldo1. within the readconsole 
as long as i copy commandlines containing valid R commands function to 
R's buffer all things are fine. but when i copy a non valid command, R 
singals segfault after passing the error message, that the given object 
is not valid. this happens in call to eval(R_CurrentExpr, rho) in 
repldlldo1. i tried to comapare both ways (mainloop vs. 
repldlldo+repldllinit) but actually cannot find a significant difference.

can anyone please help me with this problem, i'm stucked with this 
because i don't know the inside of R and the datastructures.


some additional information:
c++, runtime loaded libR, 64-bit linux, 2.11.1 release (but also happens 
with 2.10.1)

look farward to hearing from you.

thanks,
martin


From simon.urbanek at r-project.org  Fri Aug 20 18:48:36 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 20 Aug 2010 12:48:36 -0400
Subject: [Rd] segfault in embedded r after call to repldlldo1
In-Reply-To: <4C6EA9FC.7040604@zib.de>
References: <4C6EA9FC.7040604@zib.de>
Message-ID: <BE01107C-81D0-496D-BA1F-745A9ECD3A3B@r-project.org>


On Aug 20, 2010, at 12:14 PM, Carl Martin Grewe wrote:

> Dear R developers,
> 
> i've got a question concerning an embedded R instance. I called the initialization routines as seen in the "writing extensions" guide (Rf_initialize, setup_Rmainloop and R_ReplDLLinit). I also changed the function callback pointer of readconsole and writeconsoleex to my local functions.
> 
> when i call mainloop there is no problem and the commands are evaluated as expected. because i don't want R to run in an own thread and my app should keep the control i want to use repldlldo1. within the readconsole as long as i copy commandlines containing valid R commands function to R's buffer all things are fine. but when i copy a non valid command, R singals segfault after passing the error message, that the given object is not valid. this happens in call to eval(R_CurrentExpr, rho) in repldlldo1. i tried to comapare both ways (mainloop vs. repldlldo+repldllinit) but actually cannot find a significant difference.
> 

I fear we can't help you without a reproducible example. One thing to keep in mind is that R_ReplDLLinit uses setjmp to setup the top-level context so you have to make sure you're not using any local variables that could be on the stack from R_ReplDLLdo1 as it will get lost (and function calls of course).

Cheers,
Simon


> can anyone please help me with this problem, i'm stucked with this because i don't know the inside of R and the datastructures.
> 
> 
> some additional information:
> c++, runtime loaded libR, 64-bit linux, 2.11.1 release (but also happens with 2.10.1)
> 
> look farward to hearing from you.
> 
> thanks,
> martin
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From chuck at sharpsteen.net  Fri Aug 20 18:58:50 2010
From: chuck at sharpsteen.net (Sharpie)
Date: Fri, 20 Aug 2010 09:58:50 -0700 (PDT)
Subject: [Rd] Rserve graphics output [was Re: C or Java code generation]
In-Reply-To: <E19A79C0-2949-46D4-81B2-1B87185785CB@yahoo.com>
References: <AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>
	<19565.13345.692185.626415@max.nulle.part>
	<4C6D3A53.5070808@yandex.ru>
	<19565.21908.102685.183781@max.nulle.part>
	<4C6E3DA0.7010005@yandex.ru> <4C6E4049.4090800@dbmail.com>
	<1282316530615-2332606.post@n4.nabble.com>
	<19566.40074.624066.821704@max.nulle.part>
	<3608EC6A-648A-46F6-8D8F-CC74B5AEB9C7@r-project.org>
	<E19A79C0-2949-46D4-81B2-1B87185785CB@yahoo.com>
Message-ID: <1282323530930-2332761.post@n4.nabble.com>



Donald Paul Winston wrote:
> 
> Aren't you the guy who created Rserve?
> 
> I'd like to develop a web app so clients can perform exploratory data
> analysis with their browser with no installed software, not even java (I
> don't like applets). I thought R would be excellent for this but I need
> some issues cleared up before I invest a lot of time working with it. 
> 

Well, Simon is the one who create Rserve.  However, if you have questions
about Rserve it may be best to start a new thread or at least change the
subject header of your message.  This discussion was about creating
stand-alone executables that use R code for deployment on a desktop.  


Donald Paul Winston wrote:
> 
> It appears R insists on directing plot output to a file. Is their a
> graphics device that keeps the output in memory so it can be returned to
> my java app as a stream of bytes? If I have to wait for it to write to a
> "unique file" and then read it back again then I don't think that's going
> to work. My web app needs to support hundreds of concurrent clients. 
> 

As far as I know all R graphics output that does not go to a screen device,
such as an X window, must be directed to some sort of file.  I am not aware
of a graphics device that provides output to something other than a screen
or a file, but there very well may be such a device in existence.

The functionality you could describe could be implemented by writing a R
graphics device that forwards the R plotting commands to... well anywhere
you want, really.  As the author of an R graphics device, I can say the
trickiest part of such an undertaking will be calculating font metrics so
that R can properly position text in the graphics.  Everything else is very
straight-forward.

I have plans to write a device that forwards the plotting commands to a
socket connection that allows another program to execute them.  In my case,
an Erlang backbone is used to route the results back to web clients using
websockets.  The idea is to have the plot rendered directly in the client's
browser using a JavaScript library like RaphealJS.  However, the school year
is upon me and the project will probably remain on the drawing board until
next summer.


Donald Paul Winston wrote:
> 
> Is REngine.jar and REngineRserve.jar  all I need in my web app?
> 

I can't comment on REngine as I have not used it.


Donald Paul Winston wrote:
> 
> Also, how come their is no shutdown command from the command line for
> Rserve. I see one in the java client api. Do I have to write my own?
> 

I find that on UNIX a SIGTERM, SIGSTOP or SIGKILL signal broadcast using a
command line utility such as kill does the job.

-Charlie

-----
Charlie Sharpsteen
Undergraduate-- Environmental Resources Engineering
Humboldt State University
-- 
View this message in context: http://r.789695.n4.nabble.com/C-or-Java-code-generation-tp2330875p2332761.html
Sent from the R devel mailing list archive at Nabble.com.


From pauljohn32 at gmail.com  Fri Aug 20 19:15:35 2010
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Fri, 20 Aug 2010 12:15:35 -0500
Subject: [Rd] C or Java code generation
In-Reply-To: <4C6D0BC2.7070906@yandex.ru>
References: <4C6CF35F.9040305@yandex.ru>
	<AANLkTimDKD058Z+UQK2Z8EucsVsbE-T+dRe2h5EG-HYc@mail.gmail.com>
	<4C6CFD45.7050007@yandex.ru>
	<AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>
	<4C6D0BC2.7070906@yandex.ru>
Message-ID: <AANLkTi=0t-1oaqnKhMVVmJY5=RO6NFWQpzK85-_WiYYf@mail.gmail.com>

On Thu, Aug 19, 2010 at 5:47 AM, Vyacheslav Karamov
<ubuntulist at yandex.ru> wrote:
x.ru>>>
>>
>>
>> ? ? ? ? ? Hi All!
>>
>> ? ? ? ? ? I'm new to R and I need to know is it possible for R to
>> ? ? ? ?generate
>> ? ? ? ? ? C/C++ source code, Java byte code or native Win32 DLL like
>> ? ? ? ?MatLab?
>
> Is there any posibility to use R without installing?
> I mean that I have my own application written in MS Visual C++ and I need to
> use R script in this app. I can install R and use it via DCOM, but it's not
> convenient for ?the end users of my ?program.
>

Do your users have Web access? If so, you can set up an Rweb (or
similar) server that could run the jobs for those users. I have one
set up like that. Users transmit their code via http and can get
results back in web page.  I think you could probably program around
the output management question, but I did not try to do it. I mean,
something like "wget" could download the images directly, by-passing
the http server.

Rweb has been abandoned by its original author, but it can be made to
work, and there are other, newer http server programs to run R.  I
have not tried them yet, mainly because my customers needed to run
Rweb because their clients told them to use it.

-- 
Paul E. Johnson
Professor, Political Science
1541 Lilac Lane, Room 504
University of Kansas


From shotwelm at musc.edu  Fri Aug 20 19:59:43 2010
From: shotwelm at musc.edu (Matt Shotwell)
Date: Fri, 20 Aug 2010 13:59:43 -0400
Subject: [Rd] Rserve graphics output [was Re: C or Java code generation]
In-Reply-To: <1282323530930-2332761.post@n4.nabble.com>
References: <AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>
	<19565.13345.692185.626415@max.nulle.part>	<4C6D3A53.5070808@yandex.ru>
	<19565.21908.102685.183781@max.nulle.part>	<4C6E3DA0.7010005@yandex.ru>
	<4C6E4049.4090800@dbmail.com>	<1282316530615-2332606.post@n4.nabble.com>
	<19566.40074.624066.821704@max.nulle.part>
	<3608EC6A-648A-46F6-8D8F-CC74B5AEB9C7@r-project.org>
	<E19A79C0-2949-46D4-81B2-1B87185785CB@yahoo.com>
	<1282323530930-2332761.post@n4.nabble.com>
Message-ID: <1282327183.1485.36.camel@matt-laptop>

On Fri, 2010-08-20 at 12:58 -0400, Sharpie wrote:
> 
> Donald Paul Winston wrote:
> > 
> > Aren't you the guy who created Rserve?
> > 
> > I'd like to develop a web app so clients can perform exploratory data
> > analysis with their browser with no installed software, not even java (I
> > don't like applets). I thought R would be excellent for this but I need
> > some issues cleared up before I invest a lot of time working with it. 
> > 
> 
> Well, Simon is the one who create Rserve.  However, if you have questions
> about Rserve it may be best to start a new thread or at least change the
> subject header of your message.  This discussion was about creating
> stand-alone executables that use R code for deployment on a desktop.  
> 
> 
> Donald Paul Winston wrote:
> > 
> > It appears R insists on directing plot output to a file. Is their a
> > graphics device that keeps the output in memory so it can be returned to
> > my java app as a stream of bytes? If I have to wait for it to write to a
> > "unique file" and then read it back again then I don't think that's going
> > to work. My web app needs to support hundreds of concurrent clients. 
> > 
> 
> As far as I know all R graphics output that does not go to a screen device,
> such as an X window, must be directed to some sort of file.  I am not aware
> of a graphics device that provides output to something other than a screen
> or a file, but there very well may be such a device in existence.

This was essentially the conclusion of Donald's earlier thread...

> The functionality you could describe could be implemented by writing a R
> graphics device that forwards the R plotting commands to... well anywhere
> you want, really.  As the author of an R graphics device, I can say the
> trickiest part of such an undertaking will be calculating font metrics so
> that R can properly position text in the graphics.  Everything else is very
> straight-forward.

I believe Donald wants the _rendered_ output. That is, a stream of bytes
that represent a png, jpeg, etc. Toward this end, we have already
discussed using an OS-level fifo to avoid disk I/O, and I think this is
the easiest route for Donald. 

Alternatively, Donald might look into the X11 graphics driver, where
Cairo is used to write pngs. In particular, the in_do_saveplot function
(src/main/modules/X11/devX11.c) calls cairo_surface_write_to_png, in
order to save a png to file. Cairo also provides the
cairo_surface_write_to_png_stream function, which might be used to send
png data to a memory buffer (i.e. a raw vector). I don't think it would
be too difficult to modify in_do_saveplot to accommodate this.

> I have plans to write a device that forwards the plotting commands to a
> socket connection that allows another program to execute them.  In my case,
> an Erlang backbone is used to route the results back to web clients using
> websockets.  The idea is to have the plot rendered directly in the client's
> browser using a JavaScript library like RaphealJS.  However, the school year
> is upon me and the project will probably remain on the drawing board until
> next summer.
> 
> 
> Donald Paul Winston wrote:
> > 
> > Is REngine.jar and REngineRserve.jar  all I need in my web app?
> > 
> 
> I can't comment on REngine as I have not used it.
> 
> 
> Donald Paul Winston wrote:
> > 
> > Also, how come their is no shutdown command from the command line for
> > Rserve. I see one in the java client api. Do I have to write my own?
> > 
> 
> I find that on UNIX a SIGTERM, SIGSTOP or SIGKILL signal broadcast using a
> command line utility such as kill does the job.
> 
> -Charlie
> 
> -----
> Charlie Sharpsteen
> Undergraduate-- Environmental Resources Engineering
> Humboldt State University

-- 
Matthew S. Shotwell
Graduate Student 
Division of Biostatistics and Epidemiology
Medical University of South Carolina


From kw.stat at gmail.com  Fri Aug 20 20:06:05 2010
From: kw.stat at gmail.com (Kevin Wright)
Date: Fri, 20 Aug 2010 13:06:05 -0500
Subject: [Rd] No RTFM?
In-Reply-To: <4C6DC76B.7000303@structuremonitoring.com>
References: <4C6DC76B.7000303@structuremonitoring.com>
Message-ID: <AANLkTimdu2nXdwAdvYL5c1xw02XBz9DrE81j4b93xzpS@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100820/17afcf43/attachment.pl>

From simon.urbanek at r-project.org  Fri Aug 20 20:11:07 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 20 Aug 2010 14:11:07 -0400
Subject: [Rd] Rserve graphics output [was Re: C or Java code generation]
In-Reply-To: <1282323530930-2332761.post@n4.nabble.com>
References: <AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>
	<19565.13345.692185.626415@max.nulle.part>
	<4C6D3A53.5070808@yandex.ru>
	<19565.21908.102685.183781@max.nulle.part>
	<4C6E3DA0.7010005@yandex.ru> <4C6E4049.4090800@dbmail.com>
	<1282316530615-2332606.post@n4.nabble.com>
	<19566.40074.624066.821704@max.nulle.part>
	<3608EC6A-648A-46F6-8D8F-CC74B5AEB9C7@r-project.org>
	<E19A79C0-2949-46D4-81B2-1B87185785CB@yahoo.com>
	<1282323530930-2332761.post@n4.nabble.com>
Message-ID: <B0C11E18-48CF-4E98-ACDF-61250CF5D2E3@r-project.org>

On Aug 20, 2010, at 12:58 PM, Sharpie wrote:

> 
> 
> Donald Paul Winston wrote:
>> 
>> Aren't you the guy who created Rserve?
>> 
>> I'd like to develop a web app so clients can perform exploratory data
>> analysis with their browser with no installed software, not even java (I
>> don't like applets). I thought R would be excellent for this but I need
>> some issues cleared up before I invest a lot of time working with it. 
>> 
> 
> Well, Simon is the one who create Rserve.  However, if you have questions
> about Rserve it may be best to start a new thread or at least change the
> subject header of your message.

There is now a thread on the stat-rosuda-devel mailing list about that.


>  This discussion was about creating
> stand-alone executables that use R code for deployment on a desktop.  
> 
> 
> Donald Paul Winston wrote:
>> 
>> It appears R insists on directing plot output to a file. Is their a
>> graphics device that keeps the output in memory so it can be returned to
>> my java app as a stream of bytes? If I have to wait for it to write to a
>> "unique file" and then read it back again then I don't think that's going
>> to work. My web app needs to support hundreds of concurrent clients. 
>> 
> 
> As far as I know all R graphics output that does not go to a screen device,
> such as an X window, must be directed to some sort of file.  I am not aware
> of a graphics device that provides output to something other than a screen
> or a file, but there very well may be such a device in existence.
> 
> The functionality you could describe could be implemented by writing a R
> graphics device that forwards the R plotting commands to... well anywhere
> you want, really.  As the author of an R graphics device, I can say the
> trickiest part of such an undertaking will be calculating font metrics so
> that R can properly position text in the graphics.  Everything else is very
> straight-forward.
> 
> I have plans to write a device that forwards the plotting commands to a
> socket connection that allows another program to execute them.

You may have a look at  xGD[1] - it sends all GD commands to a TCP/IP socket (and there is a Java server as an example).

Cheers,
Simon

[1] http://rforge.net/xGD/

>  In my case,
> an Erlang backbone is used to route the results back to web clients using
> websockets.  The idea is to have the plot rendered directly in the client's
> browser using a JavaScript library like RaphealJS.  However, the school year
> is upon me and the project will probably remain on the drawing board until
> next summer.
> 
> 
> Donald Paul Winston wrote:
>> 
>> Is REngine.jar and REngineRserve.jar  all I need in my web app?
>> 
> 
> I can't comment on REngine as I have not used it.
> 
> 
> Donald Paul Winston wrote:
>> 
>> Also, how come their is no shutdown command from the command line for
>> Rserve. I see one in the java client api. Do I have to write my own?
>> 
> 
> I find that on UNIX a SIGTERM, SIGSTOP or SIGKILL signal broadcast using a
> command line utility such as kill does the job.
> 
> -Charlie
> 
> -----
> Charlie Sharpsteen
> Undergraduate-- Environmental Resources Engineering
> Humboldt State University
> -- 
> View this message in context: http://r.789695.n4.nabble.com/C-or-Java-code-generation-tp2330875p2332761.html
> Sent from the R devel mailing list archive at Nabble.com.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From pauljohn32 at gmail.com  Fri Aug 20 20:12:01 2010
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Fri, 20 Aug 2010 13:12:01 -0500
Subject: [Rd]  No RTFM?
In-Reply-To: <AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>
References: <4C6DC76B.7000303@structuremonitoring.com>
	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>
Message-ID: <AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>

On Thu, Aug 19, 2010 at 7:08 PM, Spencer Graves
<spencer.graves at structuremonitoring.com> wrote:
> ?What do you think about adding a "No RTFM" policy to the R mailing lists?
> Per, "http://en.wikipedia.org/wiki/RTFM":
>
I think this is a great suggestion.

I notice the R mailing list already has a gesture in this direction:
"Rudeness and ad hominem comments are not acceptable. Brevity is OK."

But the people who behave badly don't care about policies like this
and they will keep doing what they do.

pj

--
Paul E. Johnson
Professor, Political Science
1541 Lilac Lane, Room 504
University of Kansas


From simon.urbanek at r-project.org  Fri Aug 20 20:13:37 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 20 Aug 2010 14:13:37 -0400
Subject: [Rd] C or Java code generation
In-Reply-To: <AANLkTi=0t-1oaqnKhMVVmJY5=RO6NFWQpzK85-_WiYYf@mail.gmail.com>
References: <4C6CF35F.9040305@yandex.ru>
	<AANLkTimDKD058Z+UQK2Z8EucsVsbE-T+dRe2h5EG-HYc@mail.gmail.com>
	<4C6CFD45.7050007@yandex.ru>
	<AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>
	<4C6D0BC2.7070906@yandex.ru>
	<AANLkTi=0t-1oaqnKhMVVmJY5=RO6NFWQpzK85-_WiYYf@mail.gmail.com>
Message-ID: <0BAA5351-882F-450A-A502-52BD33A3BD6C@r-project.org>


On Aug 20, 2010, at 1:15 PM, Paul Johnson wrote:

> On Thu, Aug 19, 2010 at 5:47 AM, Vyacheslav Karamov
> <ubuntulist at yandex.ru> wrote:
> x.ru>>>
>>> 
>>> 
>>>           Hi All!
>>> 
>>>           I'm new to R and I need to know is it possible for R to
>>>        generate
>>>           C/C++ source code, Java byte code or native Win32 DLL like
>>>        MatLab?
>> 
>> Is there any posibility to use R without installing?
>> I mean that I have my own application written in MS Visual C++ and I need to
>> use R script in this app. I can install R and use it via DCOM, but it's not
>> convenient for  the end users of my  program.
>> 
> 
> Do your users have Web access? If so, you can set up an Rweb (or
> similar) server that could run the jobs for those users. I have one
> set up like that. Users transmit their code via http and can get
> results back in web page.  I think you could probably program around
> the output management question, but I did not try to do it. I mean,
> something like "wget" could download the images directly, by-passing
> the http server.
> 
> Rweb has been abandoned by its original author, but it can be made to
> work, and there are other, newer http server programs to run R.  I
> have not tried them yet, mainly because my customers needed to run
> Rweb because their clients told them to use it.
> 

FWIW: FastRWeb uses Rserve as back-end and is in active development since we use it internally (it's wicked fast, scalable and supports data pre-loading and AJAX).

Cheers,
Simon


From simon.urbanek at r-project.org  Fri Aug 20 20:16:31 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 20 Aug 2010 14:16:31 -0400
Subject: [Rd] Rserve graphics output [was Re: C or Java code generation]
In-Reply-To: <1282327183.1485.36.camel@matt-laptop>
References: <AANLkTi=X-NfgGf3czS9t4LwUKBrUne7=1r+BO7soacEM@mail.gmail.com>
	<19565.13345.692185.626415@max.nulle.part>	<4C6D3A53.5070808@yandex.ru>
	<19565.21908.102685.183781@max.nulle.part>	<4C6E3DA0.7010005@yandex.ru>
	<4C6E4049.4090800@dbmail.com>	<1282316530615-2332606.post@n4.nabble.com>
	<19566.40074.624066.821704@max.nulle.part>
	<3608EC6A-648A-46F6-8D8F-CC74B5AEB9C7@r-project.org>
	<E19A79C0-2949-46D4-81B2-1B87185785CB@yahoo.com>
	<1282323530930-2332761.post@n4.nabble.com>
	<1282327183.1485.36.camel@matt-laptop>
Message-ID: <AD4D1813-D028-44CD-B775-FAAEEA8BA0F1@r-project.org>


On Aug 20, 2010, at 1:59 PM, Matt Shotwell wrote:

> On Fri, 2010-08-20 at 12:58 -0400, Sharpie wrote:
>> 
>> Donald Paul Winston wrote:
>>> 
>>> Aren't you the guy who created Rserve?
>>> 
>>> I'd like to develop a web app so clients can perform exploratory data
>>> analysis with their browser with no installed software, not even java (I
>>> don't like applets). I thought R would be excellent for this but I need
>>> some issues cleared up before I invest a lot of time working with it. 
>>> 
>> 
>> Well, Simon is the one who create Rserve.  However, if you have questions
>> about Rserve it may be best to start a new thread or at least change the
>> subject header of your message.  This discussion was about creating
>> stand-alone executables that use R code for deployment on a desktop.  
>> 
>> 
>> Donald Paul Winston wrote:
>>> 
>>> It appears R insists on directing plot output to a file. Is their a
>>> graphics device that keeps the output in memory so it can be returned to
>>> my java app as a stream of bytes? If I have to wait for it to write to a
>>> "unique file" and then read it back again then I don't think that's going
>>> to work. My web app needs to support hundreds of concurrent clients. 
>>> 
>> 
>> As far as I know all R graphics output that does not go to a screen device,
>> such as an X window, must be directed to some sort of file.  I am not aware
>> of a graphics device that provides output to something other than a screen
>> or a file, but there very well may be such a device in existence.
> 
> This was essentially the conclusion of Donald's earlier thread...
> 
>> The functionality you could describe could be implemented by writing a R
>> graphics device that forwards the R plotting commands to... well anywhere
>> you want, really.  As the author of an R graphics device, I can say the
>> trickiest part of such an undertaking will be calculating font metrics so
>> that R can properly position text in the graphics.  Everything else is very
>> straight-forward.
> 
> I believe Donald wants the _rendered_ output. That is, a stream of bytes
> that represent a png, jpeg, etc. Toward this end, we have already
> discussed using an OS-level fifo to avoid disk I/O, and I think this is
> the easiest route for Donald. 
> 
> Alternatively, Donald might look into the X11 graphics driver, where
> Cairo is used to write pngs. In particular, the in_do_saveplot function
> (src/main/modules/X11/devX11.c) calls cairo_surface_write_to_png, in
> order to save a png to file. Cairo also provides the
> cairo_surface_write_to_png_stream function, which might be used to send
> png data to a memory buffer (i.e. a raw vector). I don't think it would
> be too difficult to modify in_do_saveplot to accommodate this.
> 

That is all nice, it will require you to hack R (well, there is the Cairo device so you could make the change outside of R instead).

As always, the reason is buried deep inside -- the lack of connection API. If we had that, devices would take a connection instead of the file name and all would be well since you could use in-memory connections instead of files ... ;)

Cheers,
Simon



>> I have plans to write a device that forwards the plotting commands to a
>> socket connection that allows another program to execute them.  In my case,
>> an Erlang backbone is used to route the results back to web clients using
>> websockets.  The idea is to have the plot rendered directly in the client's
>> browser using a JavaScript library like RaphealJS.  However, the school year
>> is upon me and the project will probably remain on the drawing board until
>> next summer.
>> 
>> 
>> Donald Paul Winston wrote:
>>> 
>>> Is REngine.jar and REngineRserve.jar  all I need in my web app?
>>> 
>> 
>> I can't comment on REngine as I have not used it.
>> 
>> 
>> Donald Paul Winston wrote:
>>> 
>>> Also, how come their is no shutdown command from the command line for
>>> Rserve. I see one in the java client api. Do I have to write my own?
>>> 
>> 
>> I find that on UNIX a SIGTERM, SIGSTOP or SIGKILL signal broadcast using a
>> command line utility such as kill does the job.
>> 
>> -Charlie
>> 
>> -----
>> Charlie Sharpsteen
>> Undergraduate-- Environmental Resources Engineering
>> Humboldt State University
> 
> -- 
> Matthew S. Shotwell
> Graduate Student 
> Division of Biostatistics and Epidemiology
> Medical University of South Carolina
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From ggrothendieck at gmail.com  Fri Aug 20 20:37:31 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 20 Aug 2010 14:37:31 -0400
Subject: [Rd] No RTFM?
In-Reply-To: <AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>
References: <4C6DC76B.7000303@structuremonitoring.com>
	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>
	<AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>
Message-ID: <AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>

On Fri, Aug 20, 2010 at 2:12 PM, Paul Johnson <pauljohn32 at gmail.com> wrote:
> On Thu, Aug 19, 2010 at 7:08 PM, Spencer Graves
> <spencer.graves at structuremonitoring.com> wrote:
>> ?What do you think about adding a "No RTFM" policy to the R mailing lists?
>> Per, "http://en.wikipedia.org/wiki/RTFM":
>>
> I think this is a great suggestion.
>
> I notice the R mailing list already has a gesture in this direction:
> "Rudeness and ad hominem comments are not acceptable. Brevity is OK."
>
> But the people who behave badly don't care about policies like this
> and they will keep doing what they do.

Although it may seem hard to justify rudeness its often the case that
even the most bizarre behavior makes sense if you view it from the
perspective of that person.   In the case of the R list there is a
larger potential demand for free help than resources to answer and
without the usual monetary economics to allocate resources I believe
that the functional purpose of rudeness here is to ration those
resources and minimize duplication of questions.  If that is correct
one can predict that if civility were to become the norm on this list
then other rationing mechanisms would arise to replace it.

For example, it might become the norm that most questions are not
answered or are answered less thoroughly or the list might be replaced
as the de facto goto medium for R questions by some other list or web
site so we have to be careful about unintended consequences.


From spencer.graves at structuremonitoring.com  Fri Aug 20 20:56:01 2010
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Fri, 20 Aug 2010 11:56:01 -0700
Subject: [Rd] No RTFM?
In-Reply-To: <AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>
References: <4C6DC76B.7000303@structuremonitoring.com>	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>	<AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>
	<AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>
Message-ID: <4C6ECFC1.1010003@structuremonitoring.com>

  Hi, Gabor, et al.:


       Can anyone comment on the experience of the Ubuntu Forums and 
LinuxQuestions.org, mentioned in the Wikipedia article I cited?


       Gabor makes an interesting point.  However, logic without data is 
a very poor tool for decision making, because great sounding assumptions 
have often led to conclusions that sound great but are 
counterproductive.  People with experience with the Ubuntu Forums and 
LinuxQuestions.org should be able to provide some insight here.


       Best Wishes,
       Spencer


On 8/20/2010 11:37 AM, Gabor Grothendieck wrote:
> On Fri, Aug 20, 2010 at 2:12 PM, Paul Johnson<pauljohn32 at gmail.com>  wrote:
>> On Thu, Aug 19, 2010 at 7:08 PM, Spencer Graves
>> <spencer.graves at structuremonitoring.com>  wrote:
>>>   What do you think about adding a "No RTFM" policy to the R mailing lists?
>>> Per, "http://en.wikipedia.org/wiki/RTFM":
>>>
>> I think this is a great suggestion.
>>
>> I notice the R mailing list already has a gesture in this direction:
>> "Rudeness and ad hominem comments are not acceptable. Brevity is OK."
>>
>> But the people who behave badly don't care about policies like this
>> and they will keep doing what they do.
> Although it may seem hard to justify rudeness its often the case that
> even the most bizarre behavior makes sense if you view it from the
> perspective of that person.   In the case of the R list there is a
> larger potential demand for free help than resources to answer and
> without the usual monetary economics to allocate resources I believe
> that the functional purpose of rudeness here is to ration those
> resources and minimize duplication of questions.  If that is correct
> one can predict that if civility were to become the norm on this list
> then other rationing mechanisms would arise to replace it.
>
> For example, it might become the norm that most questions are not
> answered or are answered less thoroughly or the list might be replaced
> as the de facto goto medium for R questions by some other list or web
> site so we have to be careful about unintended consequences.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Spencer Graves, PE, PhD
President and Chief Operating Officer
Structure Inspection and Monitoring, Inc.
751 Emerson Ct.
San Jos?, CA 95126
ph:  408-655-4567


From mxkuhn at gmail.com  Fri Aug 20 21:26:45 2010
From: mxkuhn at gmail.com (Max Kuhn)
Date: Fri, 20 Aug 2010 15:26:45 -0400
Subject: [Rd] Reproducible Research task view
Message-ID: <AANLkTin78uBxX7JrpQVHaPgmXpAJK-i4mzBjDfUgMh=t@mail.gmail.com>

I would like to suggest a Reproducible Research CRAN task view. This
was discussed briefly in one of the useR! sessions this year.

>From quick browse through CRAN, I counted 19 packages that were
associated with Sweave or other methods for reproducible research. I
think that we've gotten to a point where some additional documentation
that enumerates/compares/contrasts the various packages would be
helpful.

I'd like to volunteer to create and maintain the task view.

Any thoughts?

Thanks,

Max


From ggrothendieck at gmail.com  Fri Aug 20 21:54:34 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 20 Aug 2010 15:54:34 -0400
Subject: [Rd] No RTFM?
In-Reply-To: <4C6ECFC1.1010003@structuremonitoring.com>
References: <4C6DC76B.7000303@structuremonitoring.com>
	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>
	<AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>
	<AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>
	<4C6ECFC1.1010003@structuremonitoring.com>
Message-ID: <AANLkTik-stfy0h5i=0nsEWdTNawxMrfng7PEALKQke2q@mail.gmail.com>

On Fri, Aug 20, 2010 at 2:56 PM, Spencer Graves
<spencer.graves at structuremonitoring.com> wrote:
> ?Hi, Gabor, et al.:
>
>
> ? ? ?Can anyone comment on the experience of the Ubuntu Forums and
> LinuxQuestions.org, mentioned in the Wikipedia article I cited?
>
>
> ? ? ?Gabor makes an interesting point. ?However, logic without data is a
> very poor tool for decision making, because great sounding assumptions have
> often led to conclusions that sound great but are counterproductive. ?People
> with experience with the Ubuntu Forums and LinuxQuestions.org should be able
> to provide some insight here.
>

That is only "data" to the extent that Linux questions have the same
supply and demand characteristics as R -- but that is quite doubtful.


From rpeng at jhsph.edu  Fri Aug 20 21:59:16 2010
From: rpeng at jhsph.edu (Roger D. Peng)
Date: Fri, 20 Aug 2010 15:59:16 -0400
Subject: [Rd] Reproducible Research task view
In-Reply-To: <AANLkTin78uBxX7JrpQVHaPgmXpAJK-i4mzBjDfUgMh=t@mail.gmail.com>
References: <AANLkTin78uBxX7JrpQVHaPgmXpAJK-i4mzBjDfUgMh=t@mail.gmail.com>
Message-ID: <AANLkTiminuP94tPEPO32tLp8nRaHLBq3W5OrbaSepMZn@mail.gmail.com>

For what it's worth, I think this is a great idea.

-roger

On Fri, Aug 20, 2010 at 3:26 PM, Max Kuhn <mxkuhn at gmail.com> wrote:
> I would like to suggest a Reproducible Research CRAN task view. This
> was discussed briefly in one of the useR! sessions this year.
>
> >From quick browse through CRAN, I counted 19 packages that were
> associated with Sweave or other methods for reproducible research. I
> think that we've gotten to a point where some additional documentation
> that enumerates/compares/contrasts the various packages would be
> helpful.
>
> I'd like to volunteer to create and maintain the task view.
>
> Any thoughts?
>
> Thanks,
>
> Max
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Roger D. Peng? |? http://www.biostat.jhsph.edu/~rpeng/


From heimdal at q.com  Fri Aug 20 22:39:37 2010
From: heimdal at q.com (P J JAYNES)
Date: Fri, 20 Aug 2010 13:39:37 -0700
Subject: [Rd] No RTFM?
In-Reply-To: <AANLkTimdu2nXdwAdvYL5c1xw02XBz9DrE81j4b93xzpS@mail.gmail.com>
References: <4C6DC76B.7000303@structuremonitoring.com>,
	<AANLkTimdu2nXdwAdvYL5c1xw02XBz9DrE81j4b93xzpS@mail.gmail.com>
Message-ID: <COL114-W162B42784D02AC2E61DF47A49F0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100820/a410f4b7/attachment.pl>

From rvaradhan at jhmi.edu  Fri Aug 20 22:44:53 2010
From: rvaradhan at jhmi.edu (Ravi Varadhan)
Date: Fri, 20 Aug 2010 16:44:53 -0400
Subject: [Rd] No RTFM?
In-Reply-To: <COL114-W162B42784D02AC2E61DF47A49F0@phx.gbl>
References: <4C6DC76B.7000303@structuremonitoring.com>
	<AANLkTimdu2nXdwAdvYL5c1xw02XBz9DrE81j4b93xzpS@mail.gmail.com>
	<COL114-W162B42784D02AC2E61DF47A49F0@phx.gbl>
Message-ID: <005c01cb40a8$8a7aad10$9f700730$@edu>

I completely agree with you, John.  In my view, there is no need for
explicit RTFM or GLOG statements.  

Best,
Ravi.

-----Original Message-----
From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org]
On Behalf Of P J JAYNES
Sent: Friday, August 20, 2010 4:40 PM
To: kw.stat at gmail.com; spencer.graves at structuremonitoring.com
Cc: r-devel at r-project.org
Subject: Re: [Rd] No RTFM?


Hello,
 
 I have found the people associated with this list to be VERY helpful over
the years. This is especially appreciated as, some of my answers have come
from the same people who are busy improving R: a fascinating, potent set of
software tools, excellently supported. In my humble opinion, the anti-thesis
of a commercial for profit software analogue.
 
Good Luck to you,
 
John
 
Date: Fri, 20 Aug 2010 13:06:05 -0500
From: kw.stat at gmail.com
To: spencer.graves at structuremonitoring.com
CC: r-devel at r-project.org
Subject: Re: [Rd] No RTFM?

Recently I was visiting with people about why commercial support is needed
for some people using R.  One person observed:
 
With commercial support, you have a person that you can call with questions
and yell at.
With R mailing lists, you can ask questions and have people yell at YOU.
 
The atmosphere of the R-help and R-devel mailing lists is infamous.  Is this
a good reputation to have?  I'm doubtful that it is.
 
So, I support Spencer's suggestion for more civility.
 
Kevin Wright
 
 
On Thu, Aug 19, 2010 at 7:08 PM, Spencer Graves <
spencer.graves at structuremonitoring.com> wrote:
 
>  What do you think about adding a "No RTFM" policy to the R mailing lists?
> Per, "http://en.wikipedia.org/wiki/RTFM":
>
>
> The Ubuntu Forums and LinuxQuestions.org, for instance, have 
> instituted "no RTFM" policies to promote a welcoming atmosphere.[8][9].
>
> RTFM [and] "Go look on google" are two inappropriate responses to a 
> question. If you don't know the answer or don't wish to help, please 
> say nothing instead of brushing off someone's question. Politely 
> showing someone how you searched or obtained the answer to a question 
> is acceptable, even encouraged.
> ...
>
> If you wish to remind a user to use search tools or other resources 
> when they have asked a question you feel is basic or common, please be 
> very polite. Any replies for help that contain language disrespectful 
> towards the user asking the question, i.e. "STFU" or "RTFM" are 
> unacceptable and will not be tolerated. Ubuntu Forums
>
>
> Gavin Simpson and I recently provided examples answering a question 
> from "r.ookie" that had previously elicited responses, ""You want us 
> to read the help page to you?" and "It yet again appears that you are 
> asking us to read the help pages for you."
>
>
> I can appreciate the sentiment in fortunes('rtfm'). In this case, 
> however, "r.ookie" had RTFM (and said so), but evidently the manual 
> was not sufficiently clear.
>
>
> Best Wishes,
> Spencer Graves
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
 
 
 
--
Kevin Wright
 
	[[alternative HTML version deleted]]
 

______________________________________________ R-devel at r-project.org mailing
list https://stat.ethz.ch/mailman/listinfo/r-devel

	[[alternative HTML version deleted]]


From Achim.Zeileis at uibk.ac.at  Fri Aug 20 23:42:39 2010
From: Achim.Zeileis at uibk.ac.at (Achim Zeileis)
Date: Fri, 20 Aug 2010 23:42:39 +0200 (CEST)
Subject: [Rd] Reproducible Research task view
In-Reply-To: <AANLkTiminuP94tPEPO32tLp8nRaHLBq3W5OrbaSepMZn@mail.gmail.com>
References: <AANLkTin78uBxX7JrpQVHaPgmXpAJK-i4mzBjDfUgMh=t@mail.gmail.com>
	<AANLkTiminuP94tPEPO32tLp8nRaHLBq3W5OrbaSepMZn@mail.gmail.com>
Message-ID: <alpine.DEB.2.00.1008202323120.502@paninaro.uibk.ac.at>

Yes, sure, good idea.

Please have a look at

   vignette("ctv-howto", package = "ctv")

and write a draft file

   ReproducibleResearch.ctv

and e-mail it to me. Then I'll probably make some suggestions/comments 
before bringing it to CRAN. And when it's online, you can announce it on 
the list and ask for further feedback.

Thanks in advance,
Z

On Fri, 20 Aug 2010, Roger D. Peng wrote:

> For what it's worth, I think this is a great idea.
>
> -roger
>
> On Fri, Aug 20, 2010 at 3:26 PM, Max Kuhn <mxkuhn at gmail.com> wrote:
>> I would like to suggest a Reproducible Research CRAN task view. This
>> was discussed briefly in one of the useR! sessions this year.
>>
>>> From quick browse through CRAN, I counted 19 packages that were
>> associated with Sweave or other methods for reproducible research. I
>> think that we've gotten to a point where some additional documentation
>> that enumerates/compares/contrasts the various packages would be
>> helpful.
>>
>> I'd like to volunteer to create and maintain the task view.
>>
>> Any thoughts?
>>
>> Thanks,
>>
>> Max
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
>
>
> -- 
> Roger D. Peng? |? http://www.biostat.jhsph.edu/~rpeng/
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

From david.kirkby at onetel.net  Sat Aug 21 02:15:12 2010
From: david.kirkby at onetel.net (Dr. David Kirkby)
Date: Sat, 21 Aug 2010 01:15:12 +0100
Subject: [Rd] No RTFM?
In-Reply-To: <4C6DC76B.7000303@structuremonitoring.com>
References: <4C6DC76B.7000303@structuremonitoring.com>
Message-ID: <4C6F1A90.60609@onetel.net>

On 08/20/10 01:08 AM, Spencer Graves wrote:
> What do you think about adding a "No RTFM" policy to the R mailing
> lists? Per, "http://en.wikipedia.org/wiki/RTFM":
>
>
> The Ubuntu Forums and LinuxQuestions.org, for instance, have instituted
> "no RTFM" policies to promote a welcoming atmosphere.[8][9].
>
> RTFM [and] "Go look on google" are two inappropriate responses to a
> question. If you don't know the answer or don't wish to help, please say
> nothing instead of brushing off someone's question. Politely showing
> someone how you searched or obtained the answer to a question is
> acceptable, even encouraged.
> ...
>
> If you wish to remind a user to use search tools or other resources when
> they have asked a question you feel is basic or common, please be very
> polite. Any replies for help that contain language disrespectful towards
> the user asking the question, i.e. "STFU" or "RTFM" are unacceptable and
> will not be tolerated. ?Ubuntu Forums
>
>
> Gavin Simpson and I recently provided examples answering a question from
> "r.ookie" that had previously elicited responses, ""You want us to read
> the help page to you?" and "It yet again appears that you are asking us
> to read the help pages for you."
>
>
> I can appreciate the sentiment in fortunes('rtfm'). In this case,
> however, "r.ookie" had RTFM (and said so), but evidently the manual was
> not sufficiently clear.
>
>
> Best Wishes,
> Spencer Graves

I've personally found the R community somewhat unhelpful at times. In fact, of 
all the resources I use:

  * Newsgroups like comp.unix.shell, sci.math.symbolic, comp.unix.aix, 
comp.unix.solaris
  * Mailing lists for autoconf, automake, gcc, sage maths, ecl, time-nuts.
  * Forums for OpenSolaris

I've found the r-devel about the least helpful of the lot.

My most recent example was when I created a bug report about a version of R that 
was about 4 months old. The bug was that the configure test failed to detect the 
version of libicu was unsuitable on Solaris. (Since it was the version of the 
library shipped with Solaris, I would personally have thought the configure 
script should detect its too old if it is).

When submitting the bug, I selected the particular R version from the pull-down 
menu, as it was listed.

Then I got some snotty reply about reading the FAQ and not submitting bug 
reports for old versions of R. At the time I submitted it, I suspect the version 
I had was about 4 months old. Ask on a Solaris mailing list about a 5 year old 
version of Solaris and you will get civil replies. Likewise, the gcc lists don't 
expect everyone to be running very recent versions.

I would have like to have responded on the technical content of the message, as 
I believe the autoconf test is flawed if it can't detect that a version of a 
library installed by Sun is unsuitable. But I decided that such responses were 
best ignored.

There's quite a bit in the R manual about Solaris that is just plain wrong, but 
although I've reported some of the problems, these were ignored, so I can't even 
be bothered to report the rest.

I must admit, I do sometimes give people links to

http://justfuckinggoogleit.com/

when I think they are being particularly dumb in not using Google, so I do 
appreciate it can get annoying when people ask questions they should be able to 
get answered themselves.

But it seems to me that arrogance is more normal on r-devel than on other lists 
I use.

Thankfully, I don't have to use r-devel much.

Flames to /dev/null.

Dave


From sgiannerini at gmail.com  Sat Aug 21 11:08:49 2010
From: sgiannerini at gmail.com (Simone Giannerini)
Date: Sat, 21 Aug 2010 11:08:49 +0200
Subject: [Rd] No RTFM?
In-Reply-To: <AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>
References: <4C6DC76B.7000303@structuremonitoring.com>
	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>
	<AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>
	<AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>
Message-ID: <AANLkTinfhu9njhJaoO02HO2XJZRczbXkWeRvFAJGHeOy@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100821/193e13d9/attachment.pl>

From ubuntulist at yandex.ru  Sat Aug 21 11:09:01 2010
From: ubuntulist at yandex.ru (Vyacheslav Karamov)
Date: Sat, 21 Aug 2010 12:09:01 +0300
Subject: [Rd] C or Java code generation
In-Reply-To: <0BAA5351-882F-450A-A502-52BD33A3BD6C@r-project.org>
References: <4C6CF35F.9040305@yandex.ru>
	<AANLkTimDKD058Z+UQK2Z8EucsVsbE-T+dRe2h5EG-HYc@mail.gmail.com>
	<4C6CFD45.7050007@yandex.ru>
	<AANLkTikMyRzcDHtCSb9f31v5wnN+FLrbQXAwRDg7ui1E@mail.gmail.com>
	<4C6D0BC2.7070906@yandex.ru>
	<AANLkTi=0t-1oaqnKhMVVmJY5=RO6NFWQpzK85-_WiYYf@mail.gmail.com>
	<0BAA5351-882F-450A-A502-52BD33A3BD6C@r-project.org>
Message-ID: <4C6F97AD.2090304@yandex.ru>

Simon Urbanek ?????:
> On Aug 20, 2010, at 1:15 PM, Paul Johnson wrote:
>
>   
>> On Thu, Aug 19, 2010 at 5:47 AM, Vyacheslav Karamov
>> <ubuntulist at yandex.ru> wrote:
>> x.ru>>>
>>     
>>>>           Hi All!
>>>>
>>>>           I'm new to R and I need to know is it possible for R to
>>>>        generate
>>>>           C/C++ source code, Java byte code or native Win32 DLL like
>>>>        MatLab?
>>>>         
>>> Is there any posibility to use R without installing?
>>> I mean that I have my own application written in MS Visual C++ and I need to
>>> use R script in this app. I can install R and use it via DCOM, but it's not
>>> convenient for  the end users of my  program.
>>>
>>>       
>> Do your users have Web access? If so, you can set up an Rweb (or
>> similar) server that could run the jobs for those users. I have one
>> set up like that. Users transmit their code via http and can get
>> results back in web page.  I think you could probably program around
>> the output management question, but I did not try to do it. I mean,
>> something like "wget" could download the images directly, by-passing
>> the http server.
>>
>> Rweb has been abandoned by its original author, but it can be made to
>> work, and there are other, newer http server programs to run R.  I
>> have not tried them yet, mainly because my customers needed to run
>> Rweb because their clients told them to use it.
>>
>>     
>
> FWIW: FastRWeb uses Rserve as back-end and is in active development since we use it internally (it's wicked fast, scalable and supports data pre-loading and AJAX).
>
> Cheers,
> Simon
>
>
>
>   
No, we need to implement VAD and voice comparison, so RWeb is useless in 
this case.


From spencer.graves at structuremonitoring.com  Sat Aug 21 12:40:12 2010
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Sat, 21 Aug 2010 03:40:12 -0700
Subject: [Rd] No RTFM?
In-Reply-To: <AANLkTinfhu9njhJaoO02HO2XJZRczbXkWeRvFAJGHeOy@mail.gmail.com>
References: <4C6DC76B.7000303@structuremonitoring.com>	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>	<AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>	<AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>
	<AANLkTinfhu9njhJaoO02HO2XJZRczbXkWeRvFAJGHeOy@mail.gmail.com>
Message-ID: <4C6FAD0C.6060908@structuremonitoring.com>

  Hello, All:


       I think there is a logic to Gabor's perspective, especially 
regarding unintended consequences.


       For example, if the as a result of changing policy, our most 
creative and substantive contributors decide to reduce their level of 
contribution and are not effectively replaced by others, then it would 
be a great loss for humanity.


       This group, especially the R Core team and the R-devel community 
more generally, has been incredibly productive.  The result is a 
substantive contribution to humanity.  It would be a loss if any change 
reduced that.  However, if rudeness is driving away potential 
contributors as was claimed, then this community might be more 
productive with a "no RTFM" policy.


       I accept that the experience of the Ubuntu Forums and 
LinuxQuestions.org may not be perfectly relevant to R, but I think they 
could provide some insight:  I would expect them to have some of the 
same "rationing" problems as experienced on the R help lists.


       The exchange that generated my original comment on this was a 
question from "r.ookie" to R-Help.  I don't know why this person chose 
to hide their real identity, but I was subsequently informed off line 
that the RTFM comment I saw was a response to an apparently rude reply 
by "r.ookie" to a previous suggestion by a regular contributor.  I still 
think a better response is not to escalate:  Either ignore the post or 
say something like, "I don't understand your question.  Please provide a 
self-contained minimal example as suggested in the Posting Guide ... ."


       Best Wishes,
       Spencer


On 8/21/2010 2:08 AM, Simone Giannerini wrote:
> Dear Gabor,
>
> I do not agree with your claim
>
> "In the case of the R list there is a
> larger potential demand for free help than resources to answer and
> without the usual monetary economics to allocate resources I believe
> that the functional purpose of rudeness here is to ration those
> resources and minimize duplication of questions"
>
> In fact, apart from the fact that rudeness should never be justified,  I was
> amazed at the amount of time dedicated by some people to give unhelpful
> replies to dumb (and less dumb) questions (at least on R-devel). In my
> opinion this behaviour causes some damages to the whole R project for at
> least two reasons:
>
> 1. On the bug report side if you want to have a good percentage of true
> positive reports you should allow for a high percentage of false positive
> reports.  But if people are scared to post you will lose the true positive
> together with false ones.
> 2. People that are potentially willing to contribute are discouraged to do
> it.
>
> Kind regards
>
> Simone
>
> On Fri, Aug 20, 2010 at 8:37 PM, Gabor Grothendieck<ggrothendieck at gmail.com
>> wrote:
>> On Fri, Aug 20, 2010 at 2:12 PM, Paul Johnson<pauljohn32 at gmail.com>
>> wrote:
>>> On Thu, Aug 19, 2010 at 7:08 PM, Spencer Graves
>>> <spencer.graves at structuremonitoring.com>  wrote:
>>>>   What do you think about adding a "No RTFM" policy to the R mailing
>> lists?
>>>> Per, "http://en.wikipedia.org/wiki/RTFM":
>>>>
>>> I think this is a great suggestion.
>>>
>>> I notice the R mailing list already has a gesture in this direction:
>>> "Rudeness and ad hominem comments are not acceptable. Brevity is OK."
>>>
>>> But the people who behave badly don't care about policies like this
>>> and they will keep doing what they do.
>> Although it may seem hard to justify rudeness its often the case that
>> even the most bizarre behavior makes sense if you view it from the
>> perspective of that person.   In the case of the R list there is a
>> larger potential demand for free help than resources to answer and
>> without the usual monetary economics to allocate resources I believe
>> that the functional purpose of rudeness here is to ration those
>> resources and minimize duplication of questions.  If that is correct
>> one can predict that if civility were to become the norm on this list
>> then other rationing mechanisms would arise to replace it.
>>
>> For example, it might become the norm that most questions are not
>> answered or are answered less thoroughly or the list might be replaced
>> as the de facto goto medium for R questions by some other list or web
>> site so we have to be careful about unintended consequences.
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel


From cgb at datanalytics.com  Sat Aug 21 14:17:25 2010
From: cgb at datanalytics.com (Carlos J. Gil Bellosta)
Date: Sat, 21 Aug 2010 14:17:25 +0200
Subject: [Rd] No RTFM?
In-Reply-To: <4C6F1A90.60609@onetel.net>
References: <4C6DC76B.7000303@structuremonitoring.com>
	<4C6F1A90.60609@onetel.net>
Message-ID: <4C6FC3D5.4070709@datanalytics.com>

Hello,

RTFM is a succinct and useful answer in many cases, yet somewhat 
impolite. A not much more verbose verbose version of it, possibly still 
more useful, and quite polite would be something like:

"Please, read rule #NN at http://www.r-project.org/posting-guide.html"

(asuming that paragraphs at the Posting Guide were numbered and number 
NN would point to the paragraph "Do your homework before posting"):

* It includes the word "please".
* It increases awareness of the Posting Guide
* It provides a direct link to it.
* The information under such paragraph is very informative and helpful.

One of the purposes of the different R help lists should be serving as a 
public relations platforms so as to promote the use of R.

Regards,

Carlos J. Gil Bellosta
http://www.datanalytics.com



On 08/21/2010 02:15 AM, Dr. David Kirkby wrote:
> On 08/20/10 01:08 AM, Spencer Graves wrote:
>> What do you think about adding a "No RTFM" policy to the R mailing
>> lists? Per, "http://en.wikipedia.org/wiki/RTFM":
>>
>>
>> The Ubuntu Forums and LinuxQuestions.org, for instance, have instituted
>> "no RTFM" policies to promote a welcoming atmosphere.[8][9].
>>
>> RTFM [and] "Go look on google" are two inappropriate responses to a
>> question. If you don't know the answer or don't wish to help, please say
>> nothing instead of brushing off someone's question. Politely showing
>> someone how you searched or obtained the answer to a question is
>> acceptable, even encouraged.
>> ...
>>
>> If you wish to remind a user to use search tools or other resources when
>> they have asked a question you feel is basic or common, please be very
>> polite. Any replies for help that contain language disrespectful towards
>> the user asking the question, i.e. "STFU" or "RTFM" are unacceptable and
>> will not be tolerated. ?Ubuntu Forums
>>
>>
>> Gavin Simpson and I recently provided examples answering a question from
>> "r.ookie" that had previously elicited responses, ""You want us to read
>> the help page to you?" and "It yet again appears that you are asking us
>> to read the help pages for you."
>>
>>
>> I can appreciate the sentiment in fortunes('rtfm'). In this case,
>> however, "r.ookie" had RTFM (and said so), but evidently the manual was
>> not sufficiently clear.
>>
>>
>> Best Wishes,
>> Spencer Graves
>
> I've personally found the R community somewhat unhelpful at times. In
> fact, of all the resources I use:
>
> * Newsgroups like comp.unix.shell, sci.math.symbolic, comp.unix.aix,
> comp.unix.solaris
> * Mailing lists for autoconf, automake, gcc, sage maths, ecl, time-nuts.
> * Forums for OpenSolaris
>
> I've found the r-devel about the least helpful of the lot.
>
> My most recent example was when I created a bug report about a version
> of R that was about 4 months old. The bug was that the configure test
> failed to detect the version of libicu was unsuitable on Solaris. (Since
> it was the version of the library shipped with Solaris, I would
> personally have thought the configure script should detect its too old
> if it is).
>
> When submitting the bug, I selected the particular R version from the
> pull-down menu, as it was listed.
>
> Then I got some snotty reply about reading the FAQ and not submitting
> bug reports for old versions of R. At the time I submitted it, I suspect
> the version I had was about 4 months old. Ask on a Solaris mailing list
> about a 5 year old version of Solaris and you will get civil replies.
> Likewise, the gcc lists don't expect everyone to be running very recent
> versions.
>
> I would have like to have responded on the technical content of the
> message, as I believe the autoconf test is flawed if it can't detect
> that a version of a library installed by Sun is unsuitable. But I
> decided that such responses were best ignored.
>
> There's quite a bit in the R manual about Solaris that is just plain
> wrong, but although I've reported some of the problems, these were
> ignored, so I can't even be bothered to report the rest.
>
> I must admit, I do sometimes give people links to
>
> http://justfuckinggoogleit.com/
>
> when I think they are being particularly dumb in not using Google, so I
> do appreciate it can get annoying when people ask questions they should
> be able to get answered themselves.
>
> But it seems to me that arrogance is more normal on r-devel than on
> other lists I use.
>
> Thankfully, I don't have to use r-devel much.
>
> Flames to /dev/null.
>
> Dave
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From lgautier at gmail.com  Sat Aug 21 14:46:25 2010
From: lgautier at gmail.com (Laurent)
Date: Sat, 21 Aug 2010 14:46:25 +0200
Subject: [Rd] R-devel Digest, Vol 90, Issue 20
In-Reply-To: <mailman.33.1282384809.16556.r-devel@r-project.org>
References: <mailman.33.1282384809.16556.r-devel@r-project.org>
Message-ID: <4C6FCAA1.8050808@gmail.com>

On 21/08/10 12:00, r-devel-request at r-project.org wrote:
>
> On Aug 20, 2010, at 1:59 PM, Matt Shotwell wrote:
>
>> >  On Fri, 2010-08-20 at 12:58 -0400, Sharpie wrote:
>>> >>
>>> >>  Donald Paul Winston wrote:
(...)
>>> >>
>>> >>  Donald Paul Winston wrote:
>>>> >>>
>>>> >>>  It appears R insists on directing plot output to a file. Is their a
>>>> >>>  graphics device that keeps the output in memory so it can be returned to
>>>> >>>  my java app as a stream of bytes? If I have to wait for it to write to a
>>>> >>>  "unique file" and then read it back again then I don't think that's going
>>>> >>>  to work. My web app needs to support hundreds of concurrent clients.
>>>> >>>
>>> >>
>>> >>  As far as I know all R graphics output that does not go to a screen device,
>>> >>  such as an X window, must be directed to some sort of file.  I am not aware
>>> >>  of a graphics device that provides output to something other than a screen
>>> >>  or a file, but there very well may be such a device in existence.

For experimentation purpose, the rpy2 project is finalizing a system to 
allow Python-written graphical devices (no C-level R extensions, just 
Python). Beside other niceties, it will allow working around the lack of
connection API in R for graphics.
Since Python makes the use of file-like objects straightforward, we plan 
providing devices that are streams (nice for serving graphics from web 
applications without having to worry about temp files).


>> >  This was essentially the conclusion of Donald's earlier thread...
>> >
>>> >>  The functionality you could describe could be implemented by writing a R
>>> >>  graphics device that forwards the R plotting commands to... well anywhere
>>> >>  you want, really.  As the author of an R graphics device, I can say the
>>> >>  trickiest part of such an undertaking will be calculating font metrics so
>>> >>  that R can properly position text in the graphics.  Everything else is very
>>> >>  straight-forward.
>> >
>> >  I believe Donald wants the_rendered_  output. That is, a stream of bytes
>> >  that represent a png, jpeg, etc. Toward this end, we have already
>> >  discussed using an OS-level fifo to avoid disk I/O, and I think this is
>> >  the easiest route for Donald.
>> >
>> >  Alternatively, Donald might look into the X11 graphics driver, where
>> >  Cairo is used to write pngs. In particular, the in_do_saveplot function
>> >  (src/main/modules/X11/devX11.c) calls cairo_surface_write_to_png, in
>> >  order to save a png to file. Cairo also provides the
>> >  cairo_surface_write_to_png_stream function, which might be used to send
>> >  png data to a memory buffer (i.e. a raw vector). I don't think it would
>> >  be too difficult to modify in_do_saveplot to accommodate this.
>> >
> That is all nice, it will require you to hack R (well, there is the Cairo device so you could make the change outside of R instead).
>
> As always, the reason is buried deep inside -- the lack of connection API. If we had that, devices would take a connection instead of the file name and all would be well since you could use in-memory connections instead of files ...;)

May I dare asking about what happened to past offers to alleviate the 
problem ?

There is at least one patch (contributed 4 years ago)
http://rwiki.sciviews.org/doku.php?id=developers:r_connections_api
that remained seemingly ignored, and subsequent requests for updates (or 
patch submission policies) remained similarly unanswered.

A recent thread showed unexpected progress, with the eventual 
possibility of accepting a patch being worded.
http://www.mail-archive.com/r-devel at r-project.org/msg20276.html
Unfortunately the thread drifted into legalese invocations, and despite 
the author of the patch complying to all demands regarding the licensing 
flavour for his contribution the patch seems to have joined (all ?) 
other submitted patches. (I don't get anything when running:
svn log -r {2010-04-27}:HEAD | grep -i Shotwell
).

Are there such patches included in the Revolution R sources, or are 
there plans to do so ?



Laurent




> Cheers,
> Simon
>
>
>


From r.ted.byers at gmail.com  Sat Aug 21 15:21:34 2010
From: r.ted.byers at gmail.com (Ted Byers)
Date: Sat, 21 Aug 2010 09:21:34 -0400
Subject: [Rd] No RTFM?
In-Reply-To: <4C6FAD0C.6060908@structuremonitoring.com>
References: <4C6DC76B.7000303@structuremonitoring.com>
	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>
	<AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>
	<AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>
	<AANLkTinfhu9njhJaoO02HO2XJZRczbXkWeRvFAJGHeOy@mail.gmail.com>
	<4C6FAD0C.6060908@structuremonitoring.com>
Message-ID: <AANLkTinhrunfKW6Y6xW8bLxG5UjQ1Tx=hXyxvhCq4ft_@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100821/46a46f91/attachment.pl>

From radford at cs.toronto.edu  Sat Aug 21 16:40:44 2010
From: radford at cs.toronto.edu (Radford Neal)
Date: Sat, 21 Aug 2010 10:40:44 -0400
Subject: [Rd] Speed improvement to evalList
Message-ID: <20100821144044.GA28816@cs.toronto.edu>

I've been inspired to look at the R source code by some strange timing
results that I wrote about on my blog at radfordneal.wordpress.com
(see the posts on "Speeding up parentheses..." and "Two surprising
things...".

I discovered that the strange speed advantage of curly brackets over
parentheses is partially explained by an inefficiency in the evalList
and evalListKeepMissing procedures in eval.c, in directory src/main,
which are on the critical path for many operations.  These procedures
unnecessarily allocate an extra CONS node.  I rewrote them to avoid
this, which seems to speed up a typical program by about 5% (assuming
it doesn't spend most of its time in things like matrix multiplies).

I think it would be well worthwhile to put this minor change into the
next R release.  I'll be looking at some other places where R can also
be sped up, and expect that an average improvement of maybe 15% is
possible, with some programs probably speeding up by a factor of two.

For now, though, I'll just give the revised versions of evalList and
evalListKeepMissing, below.

   Radford Neal

---------------------------------------------------------------------

/* Used in eval and applyMethod (object.c) for builtin primitives,
   do_internal (names.c) for builtin .Internals
   and in evalArgs.

   'n' is the number of arguments already evaluated and hence not
   passed to evalArgs and hence to here.
 */
SEXP attribute_hidden evalList(SEXP el, SEXP rho, SEXP call, int n)
{
    SEXP head, tail, ev, h;

    int mode;  /* mode==0 is 0 args, mode==1 is 1 arg, mode==2 is >1 arg */

    head = R_NilValue;
    mode = 0;  

    while (el != R_NilValue) {
	n++;

	if (CAR(el) == R_DotsSymbol) {
	    /* If we have a ... symbol, we look to see what it is bound to.
	     * If its binding is Null (i.e. zero length)
	     *	we just ignore it and return the cdr with all its expressions evaluated;
	     * if it is bound to a ... list of promises,
	     *	we force all the promises and then splice
	     *	the list of resulting values into the return value.
	     * Anything else bound to a ... symbol is an error
	     */
	    h = findVar(CAR(el), rho);
	    if (TYPEOF(h) == DOTSXP || h == R_NilValue) {
		while (h != R_NilValue) {
                    if (mode==1) {
                       PROTECT(head);
                       mode = 2;
                    }
                    ev = CONS(eval(CAR(h), rho), R_NilValue);
                    COPY_TAG(ev, h);
                    if (mode==0) {
                        head = ev;
                        mode = 1;
                    }
                    else {
                        SETCDR(tail, ev);
                    }
                    tail = ev;
		    h = CDR(h);
		}
	    }
	    else if (h != R_MissingArg)
		error(_("'...' used in an incorrect context"));
	} else if (CAR(el) == R_MissingArg) {
	    /* It was an empty element: most likely get here from evalArgs
	       which may have been called on part of the args. */
	    errorcall(call, _("argument %d is empty"), n);
	} else if (isSymbol(CAR(el)) && R_isMissing(CAR(el), rho)) {
	    /* It was missing */
	    errorcall(call, _("'%s' is missing"), CHAR(PRINTNAME(CAR(el)))); 
	} else {
            if (mode==1) {
               PROTECT(head);
               mode = 2;
            }
            ev = CONS(eval(CAR(el), rho), R_NilValue);
            COPY_TAG(ev, el);
            if (mode==0) {
                head = ev;
                mode = 1;
            }
            else {
                SETCDR(tail, ev);
            }
            tail = ev;
	}
	el = CDR(el);
    }

    if (mode==2) UNPROTECT(1);

    return head;

} /* evalList() */


/* A slight variation of evaluating each expression in "el" in "rho". */

/* used in evalArgs, arithmetic.c, seq.c */
SEXP attribute_hidden evalListKeepMissing(SEXP el, SEXP rho)
{
    SEXP head, tail, ev, h;

    int mode;  /* mode==0 is 0 args, mode==1 is 1 arg, mode==2 is >1 arg */

    head = R_NilValue;
    mode = 0;  

    while (el != R_NilValue) {

	/* If we have a ... symbol, we look to see what it is bound to.
	 * If its binding is Null (i.e. zero length)
	 *	we just ignore it and return the cdr with all its expressions evaluated;
	 * if it is bound to a ... list of promises,
	 *	we force all the promises and then splice
	 *	the list of resulting values into the return value.
	 * Anything else bound to a ... symbol is an error
	*/
	if (CAR(el) == R_DotsSymbol) {
	    h = findVar(CAR(el), rho);
	    if (TYPEOF(h) == DOTSXP || h == R_NilValue) {
		while (h != R_NilValue) {
                    if (mode==1) {
                       PROTECT(head);
                       mode = 2;
                    }
                    if (CAR(h) == R_MissingArg) 
                        ev = CONS(R_MissingArg, R_NilValue);
                    else
                        ev = CONS(eval(CAR(h), rho), R_NilValue);
                    COPY_TAG(ev, h);
                    if (mode==0) {
                        head = ev;
                        mode = 1;
                    }
                    else {
                        SETCDR(tail, ev);
                    }
                    tail = ev;
		    h = CDR(h);
		}
	    }
	    else if(h != R_MissingArg)
		error(_("'...' used in an incorrect context"));
	}
	else {
            if (mode==1) {
               PROTECT(head);
               mode = 2;
            }
            if (CAR(el) == R_MissingArg ||
                 (isSymbol(CAR(el)) && R_isMissing(CAR(el), rho)))
                ev = CONS(R_MissingArg, R_NilValue);
            else
                ev = CONS(eval(CAR(el), rho), R_NilValue);
            COPY_TAG(ev, el);
            if (mode==0) {
                head = ev;
                mode = 1;
            }
            else {
                SETCDR(tail, ev);
            }
            tail = ev;
	}
	el = CDR(el);
    }

    if (mode==2) UNPROTECT(1);

    return head;
}


From satchwinston at yahoo.com  Sat Aug 21 17:41:09 2010
From: satchwinston at yahoo.com (Donald Winston)
Date: Sat, 21 Aug 2010 11:41:09 -0400
Subject: [Rd] How do you make a formal "feature" request?
Message-ID: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100821/898cf4e3/attachment.pl>

From jeff.a.ryan at gmail.com  Sat Aug 21 17:47:42 2010
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sat, 21 Aug 2010 10:47:42 -0500
Subject: [Rd] How do you make a formal "feature" request?
In-Reply-To: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
References: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
Message-ID: <AANLkTikF-HWj-6LnzcN-RjD1Z1jOcOOcbTk5GzJ3R9L8@mail.gmail.com>

The *user* decides.  That would be YOU.

Unlike SAS no one has a responsibility to YOU to implement some random request.

Packages are how things are implemented.

And to continue a previous thread ... maybe you should RTFM.

Jeff

On Sat, Aug 21, 2010 at 10:41 AM, Donald Winston <satchwinston at yahoo.com> wrote:
> Who decides what features are in R and how they are implemented? If there is someone here who has that authority I have this request:
>
> A report() function analogous to the plot() function that makes it easy to generate a report from a table of data. This should not be in some auxiliary package, but part of the core R just like plot(). As a long time SAS user I cannot believe R does not have this. Please don't give me any crap about Sweave, LaTex, and the "power" of R to roll your own. You don't have to "roll your own" plot do you? Reports are no different. If you don't agree do not bother me. If you agree then please bring this request to the appropriate authorities for consideration or tell me how to do it.
>
> Thanks.
> ? ? ? ?[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Jeffrey Ryan
jeff.a.ryan at gmail.com


From edd at debian.org  Sat Aug 21 17:55:43 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 21 Aug 2010 10:55:43 -0500
Subject: [Rd] How do you make a formal "feature" request?
In-Reply-To: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
References: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
Message-ID: <19567.63231.852156.754291@max.nulle.part>


On 21 August 2010 at 11:41, Donald Winston wrote:
| Who decides what features are in R and how they are implemented? If there is someone here who has that authority I have this request: 
| 
| A report() function analogous to the plot() function that makes it easy to
| generate a report from a table of data. This should not be in some
| auxiliary package, but part of the core R just like plot(). As a long time
| SAS user I cannot believe R does not have this. Please don't give me any
| crap about Sweave, LaTex, and the "power" of R to roll your own. You don't
| have to "roll your own" plot do you? Reports are no different. If you don't
| agree do not bother me. If you agree then please bring this request to the
| appropriate authorities for consideration or tell me how to do it. 

I usually write them on a small note and put them under my pillow.

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From hadley at rice.edu  Sat Aug 21 17:57:45 2010
From: hadley at rice.edu (Hadley Wickham)
Date: Sat, 21 Aug 2010 10:57:45 -0500
Subject: [Rd] How do you make a formal "feature" request?
In-Reply-To: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
References: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
Message-ID: <AANLkTins_p-ugTVgLDjb+Q2rRDOr21k5wcLh+kfe6Gd_@mail.gmail.com>

> A report() function analogous to the plot() function that makes it easy to generate a report from a table of data. This should not be in some auxiliary package, but part of the core R just like plot(). As a long time SAS user I cannot believe R does not have this. Please don't give me any crap about Sweave, LaTex, and the "power" of R to roll your own. You don't have to "roll your own" plot do you? Reports are no different. If you don't agree do not bother me. If you agree then please bring this request to the appropriate authorities for consideration or tell me how to do it.

I know it's frustrating when a program doesn't do what you want to do,
and I agree with you that R's reporting capabilities are not (yet) as
easy to use as SAS (although they can be more powerful and flexible).
You may have noticed that when you downloaded R that you didn't have
to pay anyone any money to use it - this has both advantages and
disadvantages. The advantage are obvious (it's free!), but a
disadvantage is that no-one is funded to work on R full time. This
means that most contributors to R (even the core developers!) work on
R either as part of another job or in their free time, and so usually
work on the aspects of statistics and data analysis that most interest
them. If you want a core developer to work on something, you either
need to get them interested in your problem or find money to buy some
of their time.

Another disadvantage from your perspective is that while SAS is a
business and therefore cares (at least a tiny amount) about your
business, R does not. Everyone who provides help on R-help does so out
of the goodness of their heart, not because they get paid. Replies can
sometimes be rather irascible, and even rude, and while I personally
don't like the lack of manners, you still get far more than what you
pay for.

At the end of the day, if R doesn't meet your needs, why not continue using SAS?

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From hadley at rice.edu  Sat Aug 21 18:04:04 2010
From: hadley at rice.edu (Hadley Wickham)
Date: Sat, 21 Aug 2010 11:04:04 -0500
Subject: [Rd] No RTFM?
In-Reply-To: <4C6FAD0C.6060908@structuremonitoring.com>
References: <4C6DC76B.7000303@structuremonitoring.com>
	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>
	<AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>
	<AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>
	<AANLkTinfhu9njhJaoO02HO2XJZRczbXkWeRvFAJGHeOy@mail.gmail.com>
	<4C6FAD0C.6060908@structuremonitoring.com>
Message-ID: <AANLkTinzJqM1tsw3KF-wi4HQnSx1nK6eHYMCSYdm1kFO@mail.gmail.com>

> previous suggestion by a regular contributor. ?I still think a better
> response is not to escalate: ?Either ignore the post or say something like,
> "I don't understand your question. ?Please provide a self-contained minimal
> example as suggested in the Posting Guide ... ."

I agree wholeheartedly. I have tried to do this with the ggplot2
mailing list, and I think it has been extremely successful in
fostering a community that is friendly and polite, yet still provides
excellent technical support (and these days, most of it doesn't come
from me!).

I know it's frustrating when you see the same "stupid" question asked
over and over and over again, and it's so tempting to reply harshly,
but I think you're far better off just letting it go, and doing
something fun instead.

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From b.rowlingson at lancaster.ac.uk  Sat Aug 21 19:10:20 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sat, 21 Aug 2010 18:10:20 +0100
Subject: [Rd] How do you make a formal "feature" request?
In-Reply-To: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
References: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
Message-ID: <AANLkTinLpx99JooCv_RfWB+fj-7UMf5fUnsi4hz+fmy3@mail.gmail.com>

On Sat, Aug 21, 2010 at 4:41 PM, Donald Winston <satchwinston at yahoo.com> wrote:
> Who decides what features are in R and how they are implemented? If there is someone here who has that authority I have this request:
>
> A report() function analogous to the plot() function that makes it easy to generate a report from a table of data. This should not be in some auxiliary package, but part of the core R just like plot(). As a long time SAS user I cannot believe R does not have this. Please don't give me any crap about Sweave, LaTex, and the "power" of R to roll your own. You don't have to "roll your own" plot do you? Reports are no different. If you don't agree do not bother me. If you agree then please bring this request to the appropriate authorities for consideration or tell me how to do it.

 Okay Donald, let's do this. Together. Because only you seem to know
what you want in this report() function.

 Can you spell out the sort of tables of data that report() will take,
what other options it will have and so on, and what its output will
be. It is quite possible someone out there will go "Yeah, I can do
that", and have a go, especially if they also go "Yeah, I could *use*
that too".

 If you really want it done, then you can pay money.

 So, spec please. From your earlier postings it sounds like not much
more than summary(d) and a few table(d) outputs.

Barry


From chuck at sharpsteen.net  Sat Aug 21 20:33:42 2010
From: chuck at sharpsteen.net (Sharpie)
Date: Sat, 21 Aug 2010 11:33:42 -0700 (PDT)
Subject: [Rd] How do you make a formal "feature" request?
In-Reply-To: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
References: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
Message-ID: <1282415622516-2333737.post@n4.nabble.com>



Donald Paul Winston wrote:
> 
> Who decides what features are in R and how they are implemented? If there
> is someone here who has that authority I have this request: 
> 
> A report() function analogous to the plot() function that makes it easy to
> generate a report from a table of data. This should not be in some
> auxiliary package, but part of the core R just like plot(). As a long time
> SAS user I cannot believe R does not have this. Please don't give me any
> crap about Sweave, LaTex, and the "power" of R to roll your own. You don't
> have to "roll your own" plot do you? Reports are no different. If you
> don't agree do not bother me. If you agree then please bring this request
> to the appropriate authorities for consideration or tell me how to do it.
> 

Well, I can think of three ways it can go down:


1.  You want a shiny new pony.

You ask about it on the mailing list and it seems that everyone else in the
world responds "Hell yeah! I want to ride that too!".  In this case the
natives are restless enough that someone on R-Core may personally implement
the feature- especially if they want to ride the pony as well.

In this case, you need to provide a detailed specification of what kind of
pony you want, how it should be groomed and the exact pitch at which you
want it to whinny.  A good template for such as spec would be a Python
Enhancement Proposal (PEP) which is the way community-suggested core changes
are implemented in python.  An example is: 
http://www.python.org/dev/peps/pep-0389/

However, going this route is extremely rare.  You have to have a significant
amount of the user community rallying behind your idea and buy-in from core
developers who are interested in implementing and, most importantly,
maintaining and supporting the code.


2. You want a shiny new pony but not many other people in the word seem
interested.

In this situation you can do the work yourself, or with a group of other
like-minded pony enthusiasts, to bring your idea into the world.  Perhaps
the genetic material you are looking for is already present in the vast
herds of other ponies running wild on CRAN and elsewhere and you just have
to do a little breeding to get what you want.  Other times, the only way to
do right is to write everything from scratch.  Either way, in the end you
will have a pony that shines exactly the way you want it to that you can
enjoy for the rest of your life.

In this case, getting your new pony into R Core is unlikely.  The best
response you can hope for is something along the lines of "That is a mighty
fine pony you have there, but we really don't want it crapping all over our
stable".  They are not trying to be rude- the facts of life are that the
members of R Core have a limited amount of time and a lot of other ponies to
clean up after.  Add to that the fact that shoveling pony shit is a
thankless job that does not pay well and it is understandable why R Core may
be conservative about the number of ponies they let into the official
stable.

However, they will be more than happy to provide your pony with a stall at
CRAN so that everyone else in the world can take it out for a spin.  I have
never had a problem with installing and using packages from CRAN, even on
windows machines that have been locked down and then shot in both kneecaps
by the friendly neighborhood IT gestapo.  All and all, this option is
actually a pretty sweet deal; you will just have to drop by the CRAN stall
every once and a while and deal with the pony droppings yourself or people
will start to avoid it because of the smell.


3. You want a shiny new pony, but dont have the time or energy to pick out
or put together the exact one you want.

In this case, you can still get the pony you want but it will cost you
money.  There are R programmers out there who can write you a package if you
pay them the right price.  Supporting your local grad student population can
also work; hunger is a great motivator.

In the end you can also pay a corporate pony breeder like SAS for a trusty
thoroughbred that is well respected by people in high places.  However, you
may notice that these ponies bear some telltale signs of inbreeding-- one of
their eyes may not point in the same direction as the other or the pony
becomes confused easily when put in an unfamiliar situation.  Given there is
not a lot you can do about these defects, you may suffer a crippling case of
buyers remorse especially when you see the bill.


Ok, I think i've thoroughly beat this horse analogy to death and I'm going
to stop now.

-Charlie


-----
Charlie Sharpsteen
Undergraduate-- Environmental Resources Engineering
Humboldt State University
-- 
View this message in context: http://r.789695.n4.nabble.com/How-do-you-make-a-formal-feature-request-tp2333593p2333737.html
Sent from the R devel mailing list archive at Nabble.com.


From bullard at stat.berkeley.edu  Sat Aug 21 20:59:50 2010
From: bullard at stat.berkeley.edu (James Bullard)
Date: Sat, 21 Aug 2010 11:59:50 -0700
Subject: [Rd] How do you make a formal "feature" request?
In-Reply-To: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
References: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
Message-ID: <DB4FF969-F1DB-4C28-AA31-7D6A1426BCD6@stat.berkeley.edu>

I use the summary function. Being unfamiliar with the SAS report function, it is difficult to answer more completely.

jim

On Aug 21, 2010, at 8:41 AM, Donald Winston wrote:

> Who decides what features are in R and how they are implemented? If there is someone here who has that authority I have this request: 
> 
> A report() function analogous to the plot() function that makes it easy to generate a report from a table of data. This should not be in some auxiliary package, but part of the core R just like plot(). As a long time SAS user I cannot believe R does not have this. Please don't give me any crap about Sweave, LaTex, and the "power" of R to roll your own. You don't have to "roll your own" plot do you? Reports are no different. If you don't agree do not bother me. If you agree then please bring this request to the appropriate authorities for consideration or tell me how to do it.
> 
> Thanks.
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From simon.urbanek at r-project.org  Sat Aug 21 23:31:50 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 21 Aug 2010 17:31:50 -0400
Subject: [Rd] R-devel Digest, Vol 90, Issue 20
In-Reply-To: <4C6FCAA1.8050808@gmail.com>
References: <mailman.33.1282384809.16556.r-devel@r-project.org>
	<4C6FCAA1.8050808@gmail.com>
Message-ID: <38B4DD3A-F50E-4A45-8153-AD44BEA73950@r-project.org>


On Aug 21, 2010, at 8:46 AM, Laurent wrote:

> On 21/08/10 12:00, r-devel-request at r-project.org wrote:
>> 
>> On Aug 20, 2010, at 1:59 PM, Matt Shotwell wrote:
>> 
>>> >  On Fri, 2010-08-20 at 12:58 -0400, Sharpie wrote:
>>>> >>
>>>> >>  Donald Paul Winston wrote:
> (...)
>>>> >>
>>>> >>  Donald Paul Winston wrote:
>>>>> >>>
>>>>> >>>  It appears R insists on directing plot output to a file. Is their a
>>>>> >>>  graphics device that keeps the output in memory so it can be returned to
>>>>> >>>  my java app as a stream of bytes? If I have to wait for it to write to a
>>>>> >>>  "unique file" and then read it back again then I don't think that's going
>>>>> >>>  to work. My web app needs to support hundreds of concurrent clients.
>>>>> >>>
>>>> >>
>>>> >>  As far as I know all R graphics output that does not go to a screen device,
>>>> >>  such as an X window, must be directed to some sort of file.  I am not aware
>>>> >>  of a graphics device that provides output to something other than a screen
>>>> >>  or a file, but there very well may be such a device in existence.
> 
> For experimentation purpose, the rpy2 project is finalizing a system to allow Python-written graphical devices (no C-level R extensions, just Python). Beside other niceties, it will allow working around the lack of
> connection API in R for graphics.
> Since Python makes the use of file-like objects straightforward, we plan providing devices that are streams (nice for serving graphics from web applications without having to worry about temp files).
> 

Well, that doesn't help with the issue we raised since you still cannot use R connections. It's trivial to modify any of the existing devices (e.g. Cairo as I said) to support in-memory storage as they already support that internally - certainly much easier that to mess with Python etc. Nonetheless, yes, it is another way along the lines of xGD, JavaGD etc.

Cheers,
Simon



> 
>>> >  This was essentially the conclusion of Donald's earlier thread...
>>> >
>>>> >>  The functionality you could describe could be implemented by writing a R
>>>> >>  graphics device that forwards the R plotting commands to... well anywhere
>>>> >>  you want, really.  As the author of an R graphics device, I can say the
>>>> >>  trickiest part of such an undertaking will be calculating font metrics so
>>>> >>  that R can properly position text in the graphics.  Everything else is very
>>>> >>  straight-forward.
>>> >
>>> >  I believe Donald wants the_rendered_  output. That is, a stream of bytes
>>> >  that represent a png, jpeg, etc. Toward this end, we have already
>>> >  discussed using an OS-level fifo to avoid disk I/O, and I think this is
>>> >  the easiest route for Donald.
>>> >
>>> >  Alternatively, Donald might look into the X11 graphics driver, where
>>> >  Cairo is used to write pngs. In particular, the in_do_saveplot function
>>> >  (src/main/modules/X11/devX11.c) calls cairo_surface_write_to_png, in
>>> >  order to save a png to file. Cairo also provides the
>>> >  cairo_surface_write_to_png_stream function, which might be used to send
>>> >  png data to a memory buffer (i.e. a raw vector). I don't think it would
>>> >  be too difficult to modify in_do_saveplot to accommodate this.
>>> >
>> That is all nice, it will require you to hack R (well, there is the Cairo device so you could make the change outside of R instead).
>> 
>> As always, the reason is buried deep inside -- the lack of connection API. If we had that, devices would take a connection instead of the file name and all would be well since you could use in-memory connections instead of files ...;)
> 
> May I dare asking about what happened to past offers to alleviate the problem ?
> 
> There is at least one patch (contributed 4 years ago)
> http://rwiki.sciviews.org/doku.php?id=developers:r_connections_api
> that remained seemingly ignored, and subsequent requests for updates (or patch submission policies) remained similarly unanswered.
> 
> A recent thread showed unexpected progress, with the eventual possibility of accepting a patch being worded.
> http://www.mail-archive.com/r-devel at r-project.org/msg20276.html
> Unfortunately the thread drifted into legalese invocations, and despite the author of the patch complying to all demands regarding the licensing flavour for his contribution the patch seems to have joined (all ?) other submitted patches. (I don't get anything when running:
> svn log -r {2010-04-27}:HEAD | grep -i Shotwell
> ).
> 
> Are there such patches included in the Revolution R sources, or are there plans to do so ?
> 
> 
> 
> Laurent
> 
> 
> 
> 
>> Cheers,
>> Simon
>> 
>> 
>> 
> 
> 


From pauljohn32 at gmail.com  Sun Aug 22 00:47:11 2010
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Sat, 21 Aug 2010 17:47:11 -0500
Subject: [Rd] No RTFM?
In-Reply-To: <AANLkTinzJqM1tsw3KF-wi4HQnSx1nK6eHYMCSYdm1kFO@mail.gmail.com>
References: <4C6DC76B.7000303@structuremonitoring.com>
	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>
	<AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>
	<AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>
	<AANLkTinfhu9njhJaoO02HO2XJZRczbXkWeRvFAJGHeOy@mail.gmail.com>
	<4C6FAD0C.6060908@structuremonitoring.com>
	<AANLkTinzJqM1tsw3KF-wi4HQnSx1nK6eHYMCSYdm1kFO@mail.gmail.com>
Message-ID: <AANLkTi=7NvOrpdYRoOOZKQVtG49FDd2eBXLB11FVzG2h@mail.gmail.com>

On Sat, Aug 21, 2010 at 11:04 AM, Hadley Wickham <hadley at rice.edu> wrote:
>> previous suggestion by a regular contributor. ?I still think a better
>> response is not to escalate: ?Either ignore the post or say something like,
>> "I don't understand your question. ?Please provide a self-contained minimal
>> example as suggested in the Posting Guide ... ."
>
> I agree wholeheartedly. I have tried to do this with the ggplot2
> mailing list, and I think it has been extremely successful in
> fostering a community that is friendly and polite, yet still provides
> excellent technical support (and these days, most of it doesn't come
> from me!).
>

I've been insulted in r-help and its no fun.  After Gabor pointed out
the logic in it,  I have to admit he is right. It does keep traffic
down.  I don't go there anymore unless I'm completely desperate.

I agree also, sometimes RTFM is the right answer, especially if it is
stated as "That is discussed on p. 162 of the R Guide for Whatever..."
 I don't think people are insulted if  you tell them to check
something specific.

Usually, first time visitors don't know about the R posting guide and
when they ask an incomplete question, we should just refer them to it.
 We don't need the angry tone that we often see, but I don't think
people mind being referred. This presupposes the posting guide is
helpful. If somebody forgets the posting guide twice, then I think we
should all berate and insult them. I mean vigorously :)

My personal opinion is that the R posting guide could be revised to be
more direct.  Exhausted, frustrated people don't benefit as much as
they could because the document is too long.

This is hard to fix because everything in there was added for a good
reasons.  (I've been here long enough to remember a time before the
guide, sad to say.)  I tried to reshape the posting guide and I can
see that it is a really hard problem.

What do you think of this: The priority is to put the most important
thing at the top. The second priority is brevity.

=============================

Posting Guide: How to ask good questions that prompt useful answers

People are busy, so ask your question in a useful way.

1. Every question to r-help should begin with the following.

A. Output from the command sessionInfo()

B. Output from Sys.getlocale()

C. Information about how you installed R. Did you make any changes,
such as incorporating a BLAS library. If you don't know, ask your
system administrator.

D. If you see an error or something unexpected, your message MUST
include the EXACT code that you were running. We mean, ALL of your
commands that were run before the error occurred.  If you are unsure
of what you did, close your session, clean up your code, and start
over to reproduce the  problem in the most direct way.  Your post MUST
include the EXACT VERBATIM error message.

If you are working on a long program that requires a dataset,
post the dataset and the program somewhere on the Internet and
refer us to it. It is simply not possible to guess about what
might be going wrong in your program unless we can see it.

If you don't want to share your data, construct a small example
dataset that produces the same problem. Post it and refer us to it.

E. If you have isolated the problem to a certain part of your project,
write a small, self-contained 'working example' that causes the
problem and include it with your post.

Example. Why does this code:

dat <- data.frame(x=c(1,2,3), y=c(3,4,5))
plot (x, y, data=dat)

cause this:

Error in plot(x, y, data = dat) : object 'x' not found

We can easily reproduce that and explain the problem to you. We can't
help with a question like "my plot failed, something about an object
was missing."

2. How to avoid making the members of r-help angry at you.

A. Do not call a problem a "bug" unless you really mean to say that
       someone has made a mistake. If you say "bug", they hear
       "embarrassing personal flaw" or "gigantic boil".  We know
       you don't mean that, but sometimes they forget.

B. Before you write to r-help, search for answers from previous questions.
   1. Try Google? Or her cousin Yahoo?
   2. Try these inside R:

      help.search("whatever")
      RSiteSearch("whatever")
      apropos("whatever")

C. Read R-intro, R help pages, and the R FAQs.

      ?whatever


3. Do not send your question to r-help unless your question is about R
or the base R packages that are supported by the R Core Team.

A. Don't ask statistics questions, unless they fall into the form "Which
R procedure or package should I use to conduct an analysis of ..." or
"Does anybody have a working example of procedure XYZ?" or "Can I
obtain XYZ result from an obect of class ZYX?"

B. If you have trouble with a package from CRAN or elsewhere, write to
the author of that package.  r-help might be a good place to ask,
"I've been using package XYZ and the author seems to have abandoned
the project. Does anybody know of a replacement?" Otherwise, don't.

Note that the Bioconductor repository is not part of "R" proper and
you should address questions about Bioconductor to their support framework.

C. If you are writing code for R itself, or if you are developing a
       package, send your question to r-devel, rather than r-help.

D. For operating-system or R interface questions, there are dedicated
lists. See R-sig-Mac, R-sig-Debian, R-sig-Fedora, etc.

==============================

It will be necessary to add, toward the end, the part about "be polite
when posting."

And along the lines of the "No RTFM" policy, I think we should say
"All RTFM answers should include an exact document and section
number." It is certainly insulting to answer a question about plot
with the one line

?plot

but it is not insulting to say "In ?plot, check the "Details" section
and run the example code."

pj
-- 
Paul E. Johnson
Professor, Political Science
1541 Lilac Lane, Room 504
University of Kansas


From bbolker at gmail.com  Sun Aug 22 01:04:15 2010
From: bbolker at gmail.com (Ben Bolker)
Date: Sat, 21 Aug 2010 23:04:15 +0000 (UTC)
Subject: [Rd] No RTFM?
References: <4C6DC76B.7000303@structuremonitoring.com>
	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>
	<AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>
	<AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>
	<AANLkTinfhu9njhJaoO02HO2XJZRczbXkWeRvFAJGHeOy@mail.gmail.com>
	<4C6FAD0C.6060908@structuremonitoring.com>
	<AANLkTinzJqM1tsw3KF-wi4HQnSx1nK6eHYMCSYdm1kFO@mail.gmail.com>
	<AANLkTi=7NvOrpdYRoOOZKQVtG49FDd2eBXLB11FVzG2h@mail.gmail.com>
Message-ID: <loom.20100822T005530-937@post.gmane.org>

Paul Johnson <pauljohn32 <at> gmail.com> writes:

> 

 [snip: lots more snippage to try get gmane to let me post]

> What do you think of this: The priority is to put the most important
> thing at the top. The second priority is brevity.

  I really like this.
  Some suggestions:

=========================
> Posting Guide: How to ask good questions that prompt useful answers
> 
> People are busy, so ask your question in a useful way.
> 1. Every question to r-help should begin with the following.
> A. Output from the command sessionInfo()
> B. Output from Sys.getlocale()
> C. Information about how you installed R. Did you make any changes,
> such as incorporating a BLAS library. If you don't know, ask your
> system administrator.

   I would make this optional or put it further down. I don't see that
many problems on the list that are due to non-standard installations.
Most of the most clueless people are (a) using stock installations
and/or (b) don't even know who installed R on the computer they are
using. I don't mind sending them to find out/ask if it's a real
issue, but it feels like an unnecessary hurdle.

> D. If you see an error or something unexpected, your message MUST
> include the EXACT code that you were running. We mean, ALL of your
> commands that were run before the error occurred.  If you are unsure
> of what you did, close your session, clean up your code, and start
> over to reproduce the  problem in the most direct way.  Your post MUST
> include the EXACT VERBATIM error message.
> 
> If you are working on a long program that requires a dataset,
> post the dataset and the program somewhere on the Internet and
> refer us to it. It is simply not possible to guess about what
> might be going wrong in your program unless we can see it.
> 
> If you don't want to share your data, construct a small example
> dataset that produces the same problem. Post it and refer us to it.

   This is where we have to emphasize 'small, reproducible example'
more strongly -- perhaps move the next item up. 
I dread the pages and pages of random R-session crap
that will be posted following this advice literally ...
 
> E. If you have isolated the problem to a certain part of your project,
> write a small, self-contained 'working example' that causes the
> problem and include it with your post.
> 
> Example. Why does this code:
> 
> dat <- data.frame(x=c(1,2,3), y=c(3,4,5))
> plot (x, y, data=dat)
> 
> cause this:
> 
> Error in plot(x, y, data = dat) : object 'x' not found
> 
> We can easily reproduce that and explain the problem to you. We can't
> help with a question like "my plot failed, something about an object
> was missing."
> 
> 2. How to avoid making the members of r-help angry at you.
> 
> A. Do not call a problem a "bug" unless you really mean to say that
>        someone has made a mistake. If you say "bug", they hear
>        "embarrassing personal flaw" or "gigantic boil".  We know
>        you don't mean that, but sometimes they forget.

  [note that there is already information on 'what is a bug' in the
posting guide -- I think -- or maybe it's the R FAQ]

> 
> B. Before you write to r-help, search for answers from previous questions.
>    1. Try Google? Or her cousin Yahoo?
 
    This should be for more general statistics questions, and perhaps
put second.

>    2. Try these inside R:
> 
>       help.search("whatever")
>       RSiteSearch("whatever")
>       apropos("whatever")

  perhaps add
  install.packages("sos"); library(sos); findFn("whatever")
> 
> C. Read R-intro, R help pages, and the R FAQs.
> 
>       ?whatever
> 
> 3. Do not send your question to r-help unless your question is about R
> or the base R packages that are supported by the R Core Team.
> 
> A. Don't ask statistics questions, unless they fall into the form "Which
> R procedure or package should I use to conduct an analysis of ..." or
> "Does anybody have a working example of procedure XYZ?" or "Can I
> obtain XYZ result from an obect of class ZYX?"
> 
> B. If you have trouble with a package from CRAN or elsewhere, write to
> the author of that package.  

 ^^^ maintainer; use maintainer("whatever") to find their e-mail address.

> r-help might be a good place to ask,
> "I've been using package XYZ and the author seems to have abandoned
> the project. Does anybody know of a replacement?" Otherwise, don't.
> 
> Note that the Bioconductor repository is not part of "R" proper and
> you should address questions about Bioconductor to their support framework.
> 
> C. If you are writing code for R itself, or if you are developing a
>        package, send your question to r-devel, rather than r-help.
> 
> D. For operating-system or R interface questions, there are dedicated
> lists. See R-sig-Mac, R-sig-Debian, R-sig-Fedora, etc.
> 
> ==============================
> 
> It will be necessary to add, toward the end, the part about "be polite
> when posting."
> 
> And along the lines of the "No RTFM" policy, I think we should say
> "All RTFM answers should include an exact document and section
> number." It is certainly insulting to answer a question about plot
> with the one line
> 
> ?plot
> 
> but it is not insulting to say "In ?plot, check the "Details" section
> and run the example code."

  Is there any point posting this on the Wiki and letting people
hack at it?

  Ben


From gavin.simpson at ucl.ac.uk  Sun Aug 22 01:13:32 2010
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Sun, 22 Aug 2010 00:13:32 +0100
Subject: [Rd] How do you make a formal "feature" request?
In-Reply-To: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
References: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
Message-ID: <1282432412.2388.123.camel@desktop.localdomain>

On Sat, 2010-08-21 at 11:41 -0400, Donald Winston wrote:
> Who decides what features are in R and how they are implemented? If
> there is someone here who has that authority I have this request: 

The R Core Development Team decide on what goes into the base R source
code.

You have almost zero chance of getting such a thing in base R. I say
that for several reasons; i) You haven't provided any code to implement
report() or provided a good description of what you would like
implemented, ii) R Core like to keep the base source code a small as
possible to limit the maintenance burden on themselves, iii) R has the
package mechanism so you or anyone else can add whatever features you
want to R, have it hosted on CRAN and be available to any R user at the
click of a button, iv) your attitude stinks!

I could go on, but I feel I'm just feeding a troll at this point.

I look forward to seeing your report package implementing a report()
function on CRAN in the near future. There are several manuals written
which document how to write extensions to the R environment, numerous
books on programming in R and several example reporting systems that
we've mentioned to you. Check out the R website for these. Learn some R,
do some reading, examine those systems that do exist then roll your own
function and let us all benefit. I won't hold my breath of course.
Whiners are not often doers...

Good luck!

G

> A report() function analogous to the plot() function that makes it
> easy to generate a report from a table of data. This should not be in
> some auxiliary package, but part of the core R just like plot(). As a
> long time SAS user I cannot believe R does not have this. Please don't
> give me any crap about Sweave, LaTex, and the "power" of R to roll
> your own. You don't have to "roll your own" plot do you? Reports are
> no different. If you don't agree do not bother me. If you agree then
> please bring this request to the appropriate authorities for
> consideration or tell me how to do it.
> 
> Thanks.
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
 Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
 ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
 Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
 Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
 UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From ggrothendieck at gmail.com  Sun Aug 22 02:07:33 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 21 Aug 2010 20:07:33 -0400
Subject: [Rd] No RTFM?
In-Reply-To: <AANLkTi=7NvOrpdYRoOOZKQVtG49FDd2eBXLB11FVzG2h@mail.gmail.com>
References: <4C6DC76B.7000303@structuremonitoring.com>
	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>
	<AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>
	<AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>
	<AANLkTinfhu9njhJaoO02HO2XJZRczbXkWeRvFAJGHeOy@mail.gmail.com>
	<4C6FAD0C.6060908@structuremonitoring.com>
	<AANLkTinzJqM1tsw3KF-wi4HQnSx1nK6eHYMCSYdm1kFO@mail.gmail.com>
	<AANLkTi=7NvOrpdYRoOOZKQVtG49FDd2eBXLB11FVzG2h@mail.gmail.com>
Message-ID: <AANLkTin=efJ+X=fNxU=P4AfEOVPqUFw7guEZdxKbEc6s@mail.gmail.com>

On Sat, Aug 21, 2010 at 6:47 PM, Paul Johnson <pauljohn32 at gmail.com> wrote:
> On Sat, Aug 21, 2010 at 11:04 AM, Hadley Wickham <hadley at rice.edu> wrote:
>>> previous suggestion by a regular contributor. ?I still think a better
>>> response is not to escalate: ?Either ignore the post or say something like,
>>> "I don't understand your question. ?Please provide a self-contained minimal
>>> example as suggested in the Posting Guide ... ."
>>
>> I agree wholeheartedly. I have tried to do this with the ggplot2
>> mailing list, and I think it has been extremely successful in
>> fostering a community that is friendly and polite, yet still provides
>> excellent technical support (and these days, most of it doesn't come
>> from me!).
>>
>
> I've been insulted in r-help and its no fun. ?After Gabor pointed out
> the logic in it, ?I have to admit he is right. It does keep traffic
> down. ?I don't go there anymore unless I'm completely desperate.
>
> I agree also, sometimes RTFM is the right answer, especially if it is
> stated as "That is discussed on p. 162 of the R Guide for Whatever..."
> ?I don't think people are insulted if ?you tell them to check
> something specific.
>
> Usually, first time visitors don't know about the R posting guide and
> when they ask an incomplete question, we should just refer them to it.
> ?We don't need the angry tone that we often see, but I don't think
> people mind being referred. This presupposes the posting guide is
> helpful. If somebody forgets the posting guide twice, then I think we
> should all berate and insult them. I mean vigorously :)
>
> My personal opinion is that the R posting guide could be revised to be
> more direct. ?Exhausted, frustrated people don't benefit as much as
> they could because the document is too long.

Regarding length, the portion at the end of every r-help message (but
this does not appear at the end of r-devel messages or the messages
of other lists concerning R):

   "provide commented, minimal, self-contained, reproducible code."

It was intended to provide a one line synopsis of the key part of the posting
guide that could be readily pointed to.  Although we have to be careful about
making that too verbose, as well, it might not be too onerous to add
one more line
such as:

   "and use ?, RSiteSeach("my term") and http://rseek.org before posting"


From hadley at rice.edu  Sun Aug 22 02:59:30 2010
From: hadley at rice.edu (Hadley Wickham)
Date: Sat, 21 Aug 2010 19:59:30 -0500
Subject: [Rd] No RTFM?
In-Reply-To: <AANLkTin=efJ+X=fNxU=P4AfEOVPqUFw7guEZdxKbEc6s@mail.gmail.com>
References: <4C6DC76B.7000303@structuremonitoring.com>
	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>
	<AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>
	<AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>
	<AANLkTinfhu9njhJaoO02HO2XJZRczbXkWeRvFAJGHeOy@mail.gmail.com>
	<4C6FAD0C.6060908@structuremonitoring.com>
	<AANLkTinzJqM1tsw3KF-wi4HQnSx1nK6eHYMCSYdm1kFO@mail.gmail.com>
	<AANLkTi=7NvOrpdYRoOOZKQVtG49FDd2eBXLB11FVzG2h@mail.gmail.com>
	<AANLkTin=efJ+X=fNxU=P4AfEOVPqUFw7guEZdxKbEc6s@mail.gmail.com>
Message-ID: <AANLkTikudPi9mQcSSaiH9AH-O39E1CwrdSxYzwJjSuRn@mail.gmail.com>

> Regarding length, the portion at the end of every r-help message (but
> this does not appear at the end of r-devel messages or the messages
> of other lists concerning R):
>
> ? "provide commented, minimal, self-contained, reproducible code."
>
> It was intended to provide a one line synopsis of the key part of the posting
> guide that could be readily pointed to. ?Although we have to be careful about
> making that too verbose, as well, it might not be too onerous to add

But no one reads email footers...

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From ggrothendieck at gmail.com  Sun Aug 22 03:08:54 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 21 Aug 2010 21:08:54 -0400
Subject: [Rd] No RTFM?
In-Reply-To: <AANLkTikudPi9mQcSSaiH9AH-O39E1CwrdSxYzwJjSuRn@mail.gmail.com>
References: <4C6DC76B.7000303@structuremonitoring.com>
	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>
	<AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>
	<AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>
	<AANLkTinfhu9njhJaoO02HO2XJZRczbXkWeRvFAJGHeOy@mail.gmail.com>
	<4C6FAD0C.6060908@structuremonitoring.com>
	<AANLkTinzJqM1tsw3KF-wi4HQnSx1nK6eHYMCSYdm1kFO@mail.gmail.com>
	<AANLkTi=7NvOrpdYRoOOZKQVtG49FDd2eBXLB11FVzG2h@mail.gmail.com>
	<AANLkTin=efJ+X=fNxU=P4AfEOVPqUFw7guEZdxKbEc6s@mail.gmail.com>
	<AANLkTikudPi9mQcSSaiH9AH-O39E1CwrdSxYzwJjSuRn@mail.gmail.com>
Message-ID: <AANLkTinqaiS5YTfa2p3Ng38ENuSEsF6mEs0mjackwAtC@mail.gmail.com>

On Sat, Aug 21, 2010 at 8:59 PM, Hadley Wickham <hadley at rice.edu> wrote:
>> Regarding length, the portion at the end of every r-help message (but
>> this does not appear at the end of r-devel messages or the messages
>> of other lists concerning R):
>>
>> ? "provide commented, minimal, self-contained, reproducible code."
>>
>> It was intended to provide a one line synopsis of the key part of the posting
>> guide that could be readily pointed to. ?Although we have to be careful about
>> making that too verbose, as well, it might not be too onerous to add
>
> But no one reads email footers...
>

I would expect that a lot more people read that than the posting guide.

Its also useful as something to point to that is more accessible than
the posting guide since its right there.

One can be sure its been received since every message contains it.

Finally it gives the key info that someone needs to effectively use r-help.


From spencer.graves at structuremonitoring.com  Sun Aug 22 03:29:04 2010
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Sat, 21 Aug 2010 18:29:04 -0700
Subject: [Rd] No RTFM?
In-Reply-To: <AANLkTinqaiS5YTfa2p3Ng38ENuSEsF6mEs0mjackwAtC@mail.gmail.com>
References: <4C6DC76B.7000303@structuremonitoring.com>	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>	<AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>	<AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>	<AANLkTinfhu9njhJaoO02HO2XJZRczbXkWeRvFAJGHeOy@mail.gmail.com>	<4C6FAD0C.6060908@structuremonitoring.com>	<AANLkTinzJqM1tsw3KF-wi4HQnSx1nK6eHYMCSYdm1kFO@mail.gmail.com>	<AANLkTi=7NvOrpdYRoOOZKQVtG49FDd2eBXLB11FVzG2h@mail.gmail.com>	<AANLkTin=efJ+X=fNxU=P4AfEOVPqUFw7guEZdxKbEc6s@mail.gmail.com>	<AANLkTikudPi9mQcSSaiH9AH-O39E1CwrdSxYzwJjSuRn@mail.gmail.com>
	<AANLkTinqaiS5YTfa2p3Ng38ENuSEsF6mEs0mjackwAtC@mail.gmail.com>
Message-ID: <4C707D60.6020708@structuremonitoring.com>

  I've answered many email posts by copying and editing the email 
footer.  That's much more friendly, informative and effective than just 
RTFM.  (As previously noted in this thread, it's often hard to know 
which FMTR.)


Spencer


On 8/21/2010 6:08 PM, Gabor Grothendieck wrote:
> On Sat, Aug 21, 2010 at 8:59 PM, Hadley Wickham<hadley at rice.edu>  wrote:
>>> Regarding length, the portion at the end of every r-help message (but
>>> this does not appear at the end of r-devel messages or the messages
>>> of other lists concerning R):
>>>
>>>    "provide commented, minimal, self-contained, reproducible code."
>>>
>>> It was intended to provide a one line synopsis of the key part of the posting
>>> guide that could be readily pointed to.  Although we have to be careful about
>>> making that too verbose, as well, it might not be too onerous to add
>> But no one reads email footers...
>>
> I would expect that a lot more people read that than the posting guide.
>
> Its also useful as something to point to that is more accessible than
> the posting guide since its right there.
>
> One can be sure its been received since every message contains it.
>
> Finally it gives the key info that someone needs to effectively use r-help.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


-- 
Spencer Graves, PE, PhD
President and Chief Operating Officer
Structure Inspection and Monitoring, Inc.
751 Emerson Ct.
San Jos?, CA 95126
ph:  408-655-4567


From Ted.Harding at manchester.ac.uk  Sun Aug 22 04:13:27 2010
From: Ted.Harding at manchester.ac.uk ( (Ted Harding))
Date: Sun, 22 Aug 2010 03:13:27 +0100 (BST)
Subject: [Rd] No RTFM?
In-Reply-To: <AANLkTi=7NvOrpdYRoOOZKQVtG49FDd2eBXLB11FVzG2h@mail.gmail.com>
Message-ID: <XFMail.100822031327.Ted.Harding@manchester.ac.uk>

I've stayed in by back seat in the spectators so far, but I feel
a comment may be helpful here.

I'm in close sympathy with Hadley Wickham's comment on a "previous
suggestion by a regular contributor" [Spencer Graves] (below) and
with the comment by Spencer himself.

We are a community with a variety of attitudes, from prescriptive
(to the point of disciplinarian) to relaxed and permissive. 
The problem with this sort of discussion is that the former feel
able to propose detailed prescriptions, while the latter do not
have a definite "party line" to set out in any sort of detail.

The more specific and detailed the prescriptive proposals become,
the more they take on forms which could readily be adopted into
the guidelines for the list, and may therefore seem attractive to
those who maintain the guidelines. Meanwhile, the permissives have
not proposed any such specific alternatives.

I do not feel at all comfortable with Paul's suggestions below
(for reasons which I have explained in-line). To follow these
suggestions would make posting to R become more and more like
filling in a Tax Return! (In the days when I had to so this,
I would work with two photocopies of a 12-page form, a pencil,
and an eraser, doing 1st draft on copy one, then re-starting
from scratch 2nd draft on copy 2, all the time consulting a
44-page Tax Return Guide and a 16-page Tax Calculation Guide.
Then comparing the two for agreement, and starting again if
they didn't. Only when it was all apparently OK would I transcribe
in ink onto the real Return Form. It would take at least a day.).

Regarding peremptory responses to "RTFM" and the like, if I come
across one (as when interested in a thread so opening the emails
about it) I simply delete it with mild irritation (and regret the
waste of space on the list). And with likely sympathy for the
person who provoked it (see below).

Regarding the sort of query which can provoke such responses,
I think one can try to be discriminating. Occasionally they are
pretty clearly from people who are trying to get someone else
to do their work without making any effort of their own.
Appropriate response should fit the case, and need not take the
form of an automatic "speeding ticket".

Usually, however, they are from naive users who are only beginning
to find their way in R (and its documentation). Both of these are
daunting and bewildering tasks for beginners. And not only beginners.
I've been using R myself for well over 10 years, and seriously for
nearly 10. I can still wander for a long time through "a maze of
twisty tunnels, all alike" when trying to track down some essential
thing (graphics parameters and other options(), in particular, can
turn into a real "Dungeons and Dragons"). One can even begin to
wonder whether what one is looking for is documented at all (and
sometimes it isn't). What with the various introductory manuals
(which are indeed good), trying '?whatever' and being led off into
a trail of "See also:"s, trying '??whatever' to try to flush up
some functions that might be relevant, and the mass of web-pages
one might be led to on an R Site Search, we have a whole meadow
full of haystacks in which to search for a needle! And don't try
to tell me that all the '?...' help pages are models of simplicity,
clarity, and self-containment!

So, if one recognises such a query, one can try to get some insight
into what the real obstacle is. If you get that, then a well-chosen
example along with some clear explanation can help that beginner
over that problem, encourage them, and give them confidence in their
own hopes for understanding and using R, and solving such problems
for themselves in future. Even if it seems that they don't even know
how to climb over a stile on a footpath, a little encouragement to
put one foot on the near end of the cross-step, swing the other leg
over the top and put the other foot on the other end, then swing the
first foot over and onto the cross-step, then finally hop neatly down
onto the ground, can evoke an "Ahh!!" and leave them fully equipped
to deal with the next stile (and some insight into stiles in general).

With R, the analogy would be more like showing (and explaining) the
manoeuvres which will take them up the first pitch of a rock-climb.

I think that, if one does not feel inclined to take such an approach,
then it is better simply to move on, maybe deleting the query. There
is no point in a response which is both discouraging and unhelpful.
"RTFM" (and variants) is likely to be perceived as a put-down, and
(unless accompanied by sympathetic detailed guidance) will not help
to solve the problem. (Some seem to have the mind of a Tax Man, to
whom all is transparently contained in 44+16 pages of complicated
and intricately cross-referenced Guides).

So, in my view, the Posting Guide should be a true guide, but should
avoid giving any impression that jumping through documentation hoops
is a prerequisite for a valid posting to the list. Therefore it
should be gentle and general. And it should never be used as an
Act of Law which defines crimes against the list. There are very
few of these, compared with the genuine and puzzled questions from
people who need some help.

See below now for some comments on Paul's suggestions about revisions
to the Posting Guide.

Best wishes to all,
Ted.

On 21-Aug-10 22:47:11, Paul Johnson wrote:
> On Sat, Aug 21, 2010 at 11:04 AM, Hadley Wickham <hadley at rice.edu>
> wrote:
>>> previous suggestion by a regular contributor. _I still think a better
>>> response is not to escalate: _Either ignore the post or say something
>>> like,
>>> "I don't understand your question. _Please provide a self-contained
>>> minimal
>>> example as suggested in the Posting Guide ... ."
>>
>> I agree wholeheartedly. I have tried to do this with the ggplot2
>> mailing list, and I think it has been extremely successful in
>> fostering a community that is friendly and polite, yet still provides
>> excellent technical support (and these days, most of it doesn't come
>> from me!).
>>
> 
> I've been insulted in r-help and its no fun. After Gabor pointed out
> the logic in it, I have to admit he is right. It does keep traffic
> down. I don't go there anymore unless I'm completely desperate.

I agree with Hadley, but not with Paul's "logic" bit and the reason.
There is an implicit assumption about the function of R-help -- it
appears to be that, if one is a puzzled beginner, one should not post
to the list (so keep the traffic down ... ) unless one has exhausted
all the on-line resources (and oneself, and one's time) in an all-out
effort to find the answer for oneself.

I see the purpose of R-help as providing help with R, at any level.
The traffic can be at whatever level fills this need. Every "RTFM"
response adds to the traffic (and so, on that logic, should also
be discouraged -- especially since it's not useful)! I don't see
why Paul should have to feel "completely desperate" before daring
to post to the list.

> I agree also, sometimes RTFM is the right answer, especially if
> it is stated as "That is discussed on p. 162 of the R Guide for
> Whatever..."
> I don't think people are insulted if  you tell them to check
> something specific.

I agree (see above) that this format of "RTFM" can be a good and
helpful response, and is unlikely to be seen as a put-down.

> Usually, first time visitors don't know about the R posting guide
> and when they ask an incomplete question, we should just refer
> them to it.
> We don't need the angry tone that we often see, but I don't think
> people mind being referred. This presupposes the posting guide is
> helpful.

I agree so far!

> If somebody forgets the posting guide twice, then I think we
> should all berate and insult them. I mean vigorously :)

But not here! I think insults and put-downs are out of place.
Possibly one can reply privately, with guidance but not with insults,
if one feels that it would be "dross" on the list.

> My personal opinion is that the R posting guide could be revised
> to be more direct. Exhausted, frustrated people don't benefit as
> much as they could because the document is too long.

I agree.

> This is hard to fix because everything in there was added for a good
> reasons.  (I've been here long enough to remember a time before the
> guide, sad to say.)  I tried to reshape the posting guide and I can
> see that it is a really hard problem.
> 
> What do you think of this: The priority is to put the most important
> thing at the top. The second priority is brevity.
> 
> =============================
> 
> Posting Guide: How to ask good questions that prompt useful answers
> 
> People are busy, so ask your question in a useful way.
> 
> 1. Every question to r-help should begin with the following.
> 
> A. Output from the command sessionInfo()
> 
> B. Output from Sys.getlocale()
> 
> C. Information about how you installed R. Did you make any changes,
> such as incorporating a BLAS library. If you don't know, ask your
> system administrator.

Surely not *every* question! Whether these are useful or relevant
depends on the question. If not, they are (from the point of view
of anyone trying to get to the point of the question) pure noise.
In fact, I think most questions that occur don't need these items
of information (though failure to include them often gets a speeding
ticket).

> D. If you see an error or something unexpected, your message MUST
> include the EXACT code that you were running. We mean, ALL of your
> commands that were run before the error occurred.

If your R program happens to consist of 1000 lines of code, the
above amounts to an order to include it all -- in all postings
to R-help. Such a requirement should definitely not be made in the
posting guide. (D in fact conflicts with the further proposals
below under D and under E).

>  If you are unsure
> of what you did, close your session, clean up your code, and start
> over to reproduce the  problem in the most direct way. Your post
> MUST include the EXACT VERBATIM error message.

Verbatim error messages are indeed a good thing, and that guidance
is useful. I would tone down the imperatives, though. More on the
lines of "Include any error messages verbatim, as returned by R."

> If you are working on a long program that requires a dataset,
> post the dataset and the program somewhere on the Internet and
> refer us to it. It is simply not possible to guess about what
> might be going wrong in your program unless we can see it.

I see this proposal as something which might be useful, but it
would depend on the context. [see ** below]

> If you don't want to share your data, construct a small example
> dataset that produces the same problem. Post it and refer us to it.

This might be better worded as "If you can, construct a small
example with code and data which reproduces the problem." [see ** below]

> E. If you have isolated the problem to a certain part of your project,
> write a small, self-contained 'working example' that causes the
> problem and include it with your post.

[**]
This overlaps with parts of D above.

> Example. Why does this code:
> 
> dat <- data.frame(x=c(1,2,3), y=c(3,4,5))
> plot (x, y, data=dat)
> 
> cause this:
> 
> Error in plot(x, y, data = dat) : object 'x' not found
> 
> We can easily reproduce that and explain the problem to you. We can't
> help with a question like "my plot failed, something about an object
> was missing."

I think the mini-example of code, and the example of how not to
asl, are well put.

> 2. How to avoid making the members of r-help angry at you.
> A. Do not call a problem a "bug" unless you really mean to say that
>    someone has made a mistake. If you say "bug", they hear
>    "embarrassing personal flaw" or "gigantic boil".  We know
>    you don't mean that, but sometimes they forget.

I don't think that occurs often enough to justify making a special
point of it in the posting guide. I'd leave that out.

> B. Before you write to r-help, search for answers from previous
> questions.
>    1. Try Google? Or her cousin Yahoo?

I don't think people should be advised to use Google (or Yahoo)!
One may get 20,000 hits. See comment to 2 below.

>    2. Try these inside R:
> 
>       help.search("whatever")
>       RSiteSearch("whatever")
>       apropos("whatever")

Good advice. I would also add:

       R site search web interface
       http://finzi.psych.upenn.edu/nmz.html

> C. Read R-intro, R help pages, and the R FAQs.
> 
>       ?whatever
> 
> 3. Do not send your question to r-help unless your question is
> about R or the base R packages that are supported by the R Core Team.

There are plenty of non-base packages about which questions can be
fairly asked on R-help! The above should not be in the posting guide.
See below at [***]

> A. Don't ask statistics questions, unless they fall into the form
> "Which R procedure or package should I use to conduct an analysis
> of ..." or
> "Does anybody have a working example of procedure XYZ?" or "Can I
> obtain XYZ result from an obect of class ZYX?"

In many cases, people's problems are a combination of shaky grasp
of R and shaky or incomplete grasp of some part of Statistics.
A person may well suspect that their problem involves a problem
with Statistics as such, and may well ask about the statistical
aspect as well as the R aspect. A good answer would address both.
Often, the poster may not be aware of the statistical difficulty;
a good answer would pick that up and include the statistical
explanation. For example, the unsuspecting may be unaware of
the "linear separation" phenomenon in binary regression which can
result in:
  Warning messages:
  1: glm.fit: algorithm did not converge 
  2: glm.fit: fitted probabilities numerically 0 or 1 occurred
A query about that is really a pure statistical matter, and is
not strictly about R. Nevertheless, it arose out of using R for
a reason which the user did not understand (and which they may
suspect to to be due to R). So an explanation sorts it out,
and helps them along.

I would agree, however, that a question *purely* about Statistics
would normally be out of order. E.g. "How can I prove that 1*(X==0)
is an unbiased estimate of exp(-mu) in a Poisson distribution".

> B. If you have trouble with a package from CRAN or elsewhere,
> write to the author of that package.

It depends on the trouble. I think R-help is usually a good and
legitimate place to ask, since it is likely to come to the
attention of several people who have used the package, and may
have encountered the problem or understand the reasons for it.
They may even have better solutions than the author of the package
could provide! I have myself had the experience of discussing
a problem with a package on R-help, locating the problem (and
devising its solution) in the code, leading to my mailing the
package maintainer who was not aware of the problem!

> r-help might be a good place to ask, "I've been using package
> XYZ and the author seems to have abandoned the project.
> Does anybody know of a replacement?" Otherwise, don't.

For reasons above, I don't agree with this,

> Note that the Bioconductor repository is not part of "R" proper
> and you should address questions about Bioconductor to their
> support framework.

Presumably you mean the various special lists for Bioconductor?
In such a case, that is fair enough, since anyhone using Bioconductor
is likely to be subscribed to such lists anyway. (But they wouldn't
need to be told about this in the general Posting Guide).

[***]
There are many packages, however, such as combinat, boot, cluster,
etc. which are not part of R-base (though many of them are in
"recommended") which are in frequent use, and questions about them
to R-help are perfectly in order (and the individual author of
such a package does not want to be the sole recipient of frequent
questions about it -- the R-help community can carry the load
better with its "distributed model").

> C. If you are writing code for R itself, or if you are developing a
>    package, send your question to r-devel, rather than r-help.

It depends on the question!

> D. For operating-system or R interface questions, there are dedicated
> lists. See R-sig-Mac, R-sig-Debian, R-sig-Fedora, etc.

Fair enough (in most cases).

> ==============================
> 
> It will be necessary to add, toward the end, the part about
> "be polite when posting."

And, since a reply is also a posting, "be polite when responding"!

> And along the lines of the "No RTFM" policy, I think we should say
> "All RTFM answers should include an exact document and section
> number." It is certainly insulting to answer a question about plot
> with the one line
> 
> ?plot
> 
> but it is not insulting to say "In ?plot, check the "Details"
> section and run the example code."

Fair enough -- and indeed this is an example of a helpful and
sufficient (for most people) response, and therefore is not in
the "RTFM" category.


--------------------------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding at manchester.ac.uk>
Fax-to-email: +44 (0)870 094 0861
Date: 22-Aug-10                                       Time: 03:13:22
------------------------------ XFMail ------------------------------


From landronimirc at gmail.com  Sun Aug 22 06:55:24 2010
From: landronimirc at gmail.com (Liviu Andronic)
Date: Sun, 22 Aug 2010 07:55:24 +0300
Subject: [Rd] fortune? (was: Re: How do you make a formal "feature" request?)
Message-ID: <AANLkTim3mcTqh+_MQP3LOhDGExRWJawPeRD-mys-Mc7-@mail.gmail.com>

Dear all
I was wondering whether such a long post could be fortune-ed. What do you think?

Regards
Liviu


On Sat, Aug 21, 2010 at 9:33 PM, Sharpie <chuck at sharpsteen.net> wrote:
> Well, I can think of three ways it can go down:
>
>
> 1. ?You want a shiny new pony.
>
> You ask about it on the mailing list and it seems that everyone else in the
> world responds "Hell yeah! I want to ride that too!". ?In this case the
> natives are restless enough that someone on R-Core may personally implement
> the feature- especially if they want to ride the pony as well.
>
> In this case, you need to provide a detailed specification of what kind of
> pony you want, how it should be groomed and the exact pitch at which you
> want it to whinny. ?A good template for such as spec would be a Python
> Enhancement Proposal (PEP) which is the way community-suggested core changes
> are implemented in python. ?An example is:
> http://www.python.org/dev/peps/pep-0389/
>
> However, going this route is extremely rare. ?You have to have a significant
> amount of the user community rallying behind your idea and buy-in from core
> developers who are interested in implementing and, most importantly,
> maintaining and supporting the code.
>
>
> 2. You want a shiny new pony but not many other people in the word seem
> interested.
>
> In this situation you can do the work yourself, or with a group of other
> like-minded pony enthusiasts, to bring your idea into the world. ?Perhaps
> the genetic material you are looking for is already present in the vast
> herds of other ponies running wild on CRAN and elsewhere and you just have
> to do a little breeding to get what you want. ?Other times, the only way to
> do right is to write everything from scratch. ?Either way, in the end you
> will have a pony that shines exactly the way you want it to that you can
> enjoy for the rest of your life.
>
> In this case, getting your new pony into R Core is unlikely. ?The best
> response you can hope for is something along the lines of "That is a mighty
> fine pony you have there, but we really don't want it crapping all over our
> stable". ?They are not trying to be rude- the facts of life are that the
> members of R Core have a limited amount of time and a lot of other ponies to
> clean up after. ?Add to that the fact that shoveling pony shit is a
> thankless job that does not pay well and it is understandable why R Core may
> be conservative about the number of ponies they let into the official
> stable.
>
> However, they will be more than happy to provide your pony with a stall at
> CRAN so that everyone else in the world can take it out for a spin. ?I have
> never had a problem with installing and using packages from CRAN, even on
> windows machines that have been locked down and then shot in both kneecaps
> by the friendly neighborhood IT gestapo. ?All and all, this option is
> actually a pretty sweet deal; you will just have to drop by the CRAN stall
> every once and a while and deal with the pony droppings yourself or people
> will start to avoid it because of the smell.
>
>
> 3. You want a shiny new pony, but dont have the time or energy to pick out
> or put together the exact one you want.
>
> In this case, you can still get the pony you want but it will cost you
> money. ?There are R programmers out there who can write you a package if you
> pay them the right price. ?Supporting your local grad student population can
> also work; hunger is a great motivator.
>
> In the end you can also pay a corporate pony breeder like SAS for a trusty
> thoroughbred that is well respected by people in high places. ?However, you
> may notice that these ponies bear some telltale signs of inbreeding-- one of
> their eyes may not point in the same direction as the other or the pony
> becomes confused easily when put in an unfamiliar situation. ?Given there is
> not a lot you can do about these defects, you may suffer a crippling case of
> buyers remorse especially when you see the bill.
>
>
> Ok, I think i've thoroughly beat this horse analogy to death and I'm going
> to stop now.
>
> -Charlie
>
>
> -----
> Charlie Sharpsteen
> Undergraduate-- Environmental Resources Engineering
> Humboldt State University
> --
> View this message in context: http://r.789695.n4.nabble.com/How-do-you-make-a-formal-feature-request-tp2333593p2333737.html
> Sent from the R devel mailing list archive at Nabble.com.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Do you know how to read?
http://www.alienetworks.com/srtest.cfm
http://goodies.xfce.org/projects/applications/xfce4-dict#speed-reader
Do you know how to write?
http://garbl.home.comcast.net/~garbl/stylemanual/e.htm#e-mail


From lgautier at gmail.com  Sun Aug 22 09:32:15 2010
From: lgautier at gmail.com (Laurent)
Date: Sun, 22 Aug 2010 09:32:15 +0200
Subject: [Rd] R-devel Digest, Vol 90, Issue 20
In-Reply-To: <38B4DD3A-F50E-4A45-8153-AD44BEA73950@r-project.org>
References: <mailman.33.1282384809.16556.r-devel@r-project.org>
	<4C6FCAA1.8050808@gmail.com>
	<38B4DD3A-F50E-4A45-8153-AD44BEA73950@r-project.org>
Message-ID: <4C70D27F.2080406@gmail.com>

On 21/08/10 23:31, Simon Urbanek wrote:
>
> On Aug 21, 2010, at 8:46 AM, Laurent wrote:
>
>> On 21/08/10 12:00, r-devel-request at r-project.org wrote:
>>>
>>> On Aug 20, 2010, at 1:59 PM, Matt Shotwell wrote:
>>>
>>>>> On Fri, 2010-08-20 at 12:58 -0400, Sharpie wrote:
>>>>>>>
>>>>>>> Donald Paul Winston wrote:
>> (...)
>>>>>>>
>>>>>>> Donald Paul Winston wrote:
>>>>>>>>>
>>>>>>>>> It appears R insists on directing plot output to a
>>>>>>>>> file. Is their a graphics device that keeps the
>>>>>>>>> output in memory so it can be returned to my java app
>>>>>>>>> as a stream of bytes? If I have to wait for it to
>>>>>>>>> write to a "unique file" and then read it back again
>>>>>>>>> then I don't think that's going to work. My web app
>>>>>>>>> needs to support hundreds of concurrent clients.
>>>>>>>>>
>>>>>>>
>>>>>>> As far as I know all R graphics output that does not go
>>>>>>> to a screen device, such as an X window, must be directed
>>>>>>> to some sort of file.  I am not aware of a graphics
>>>>>>> device that provides output to something other than a
>>>>>>> screen or a file, but there very well may be such a
>>>>>>> device in existence.
>>
>> For experimentation purpose, the rpy2 project is finalizing a
>> system to allow Python-written graphical devices (no C-level R
>> extensions, just Python). Beside other niceties, it will allow
>> working around the lack of connection API in R for graphics. Since
>> Python makes the use of file-like objects straightforward, we plan
>> providing devices that are streams (nice for serving graphics from
>> web applications without having to worry about temp files).
>>
>
> Well, that doesn't help with the issue we raised since you still
> cannot use R connections.

I do think it will in the use-case proposed: have R serve graphics 
without having to worry about writing temp files.
Python is somewhat used in the web applications world, and what is 
proposed allows serving graphics without a temp file in sight.

> It's trivial to modify any of the existing
> devices (e.g. Cairo as I said) to support in-memory storage as they
> already support that internally - certainly much easier that to mess
> with Python etc.

I have been neck-deep in R C-level code for devices when working on 
that, and ended up with the exact opposite opinion.

> Nonetheless, yes, it is another way along the lines
> of xGD, JavaGD etc.

Thanks for the pointer. I did not know about them.
JavaGD might well be the most helpful thing then (if Donald had in mind 
to do the web handling made in Java).


Best,


Laurent


> Cheers, Simon
>
>
>
>>
>>>>> This was essentially the conclusion of Donald's earlier
>>>>> thread...
>>>>>
>>>>>>> The functionality you could describe could be implemented
>>>>>>> by writing a R graphics device that forwards the R
>>>>>>> plotting commands to... well anywhere you want, really.
>>>>>>> As the author of an R graphics device, I can say the
>>>>>>> trickiest part of such an undertaking will be calculating
>>>>>>> font metrics so that R can properly position text in the
>>>>>>> graphics.  Everything else is very straight-forward.
>>>>>
>>>>> I believe Donald wants the_rendered_  output. That is, a
>>>>> stream of bytes that represent a png, jpeg, etc. Toward this
>>>>> end, we have already discussed using an OS-level fifo to
>>>>> avoid disk I/O, and I think this is the easiest route for
>>>>> Donald.
>>>>>
>>>>> Alternatively, Donald might look into the X11 graphics
>>>>> driver, where Cairo is used to write pngs. In particular, the
>>>>> in_do_saveplot function (src/main/modules/X11/devX11.c) calls
>>>>> cairo_surface_write_to_png, in order to save a png to file.
>>>>> Cairo also provides the cairo_surface_write_to_png_stream
>>>>> function, which might be used to send png data to a memory
>>>>> buffer (i.e. a raw vector). I don't think it would be too
>>>>> difficult to modify in_do_saveplot to accommodate this.
>>>>>
>>> That is all nice, it will require you to hack R (well, there is
>>> the Cairo device so you could make the change outside of R
>>> instead).
>>>
>>> As always, the reason is buried deep inside -- the lack of
>>> connection API. If we had that, devices would take a connection
>>> instead of the file name and all would be well since you could
>>> use in-memory connections instead of files ...;)
>>
>> May I dare asking about what happened to past offers to alleviate
>> the problem ?
>>
>> There is at least one patch (contributed 4 years ago)
>> http://rwiki.sciviews.org/doku.php?id=developers:r_connections_api
>> that remained seemingly ignored, and subsequent requests for
>> updates (or patch submission policies) remained similarly
>> unanswered.
>>
>> A recent thread showed unexpected progress, with the eventual
>> possibility of accepting a patch being worded.
>> http://www.mail-archive.com/r-devel at r-project.org/msg20276.html
>> Unfortunately the thread drifted into legalese invocations, and
>> despite the author of the patch complying to all demands regarding
>> the licensing flavour for his contribution the patch seems to have
>> joined (all ?) other submitted patches. (I don't get anything when
>> running: svn log -r {2010-04-27}:HEAD | grep -i Shotwell ).
>>
>> Are there such patches included in the Revolution R sources, or are
>> there plans to do so ?
>>
>>
>>
>> Laurent
>>
>>
>>
>>
>>> Cheers, Simon
>>>
>>>
>>>
>>
>>
>


From rory.winston at gmail.com  Sun Aug 22 10:47:53 2010
From: rory.winston at gmail.com (Rory Winston)
Date: Sun, 22 Aug 2010 18:47:53 +1000
Subject: [Rd] Handle RAWSXP in inspect.c:typename()
Message-ID: <AANLkTi=Xn0mJAjyPB-S4fcbWLwKOJirvAX_7DmUJTYwW@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100822/dfd51a81/attachment.pl>

From ggrothendieck at gmail.com  Sun Aug 22 13:30:51 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sun, 22 Aug 2010 07:30:51 -0400
Subject: [Rd] nls.control(warnOnly = TRUE) gives error rather than warning
Message-ID: <AANLkTikLqc0sz3dUvy7KqdY+EF1-j_6J5z3mTk0r3xfR@mail.gmail.com>

In ?nls.control it says:

warnOnly a logical specifying whether nls() should return instead of
signalling an error in the case of termination before convergence.
Termination before convergence happens upon completion of maxiter
iterations, in the case of a singular gradient, and in the case that
the step-size factor is reduced below minFactor.

however,

1. here we have a singular gradient but it gave an error rather than
the expected behavior of returning:

> set.seed(1)
> y <- exp(x) + rnorm(10)
>
> nls(y ~ a * exp(b * x), start = c(a = 0, b = 0),
+ control = nls.control(warnOnly = TRUE))
Error in nlsModel(formula, mf, start, wts) :
  singular gradient matrix at initial parameter estimates

2. and here we have a failure in numericDeriv and although that is not
documented as one of the conditions I think it would be desirable that
it be included as something that does not result in an error when
warnOnly = TRUE:

> nls(y ~ a * exp(b * x), start = c(a = 10, b = 0),
+ control = nls.control(warnOnly = TRUE))
Error in numericDeriv(form[[3L]], names(ind), env) :
  Missing value or an infinity produced when evaluating the model


From ggrothendieck at gmail.com  Sun Aug 22 13:32:21 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sun, 22 Aug 2010 07:32:21 -0400
Subject: [Rd] nls.control(warnOnly = TRUE) gives error rather than
	warning
In-Reply-To: <AANLkTikLqc0sz3dUvy7KqdY+EF1-j_6J5z3mTk0r3xfR@mail.gmail.com>
References: <AANLkTikLqc0sz3dUvy7KqdY+EF1-j_6J5z3mTk0r3xfR@mail.gmail.com>
Message-ID: <AANLkTimn58XycyAXbVA8S53uu+a6-aHn9sf_asF8oVDd@mail.gmail.com>

On Sun, Aug 22, 2010 at 7:30 AM, Gabor Grothendieck
<ggrothendieck at gmail.com> wrote:
> In ?nls.control it says:
>
> warnOnly a logical specifying whether nls() should return instead of
> signalling an error in the case of termination before convergence.
> Termination before convergence happens upon completion of maxiter
> iterations, in the case of a singular gradient, and in the case that
> the step-size factor is reduced below minFactor.
>
> however,
>
> 1. here we have a singular gradient but it gave an error rather than
> the expected behavior of returning:
>
>> set.seed(1)
>> y <- exp(x) + rnorm(10)
>>
>> nls(y ~ a * exp(b * x), start = c(a = 0, b = 0),
> + control = nls.control(warnOnly = TRUE))
> Error in nlsModel(formula, mf, start, wts) :
> ?singular gradient matrix at initial parameter estimates
>
> 2. and here we have a failure in numericDeriv and although that is not
> documented as one of the conditions I think it would be desirable that
> it be included as something that does not result in an error when
> warnOnly = TRUE:
>
>> nls(y ~ a * exp(b * x), start = c(a = 10, b = 0),
> + control = nls.control(warnOnly = TRUE))
> Error in numericDeriv(form[[3L]], names(ind), env) :
> ?Missing value or an infinity produced when evaluating the model
>

In the above:

x <- 1:10


From Achim.Zeileis at uibk.ac.at  Sun Aug 22 14:31:23 2010
From: Achim.Zeileis at uibk.ac.at (Achim Zeileis)
Date: Sun, 22 Aug 2010 14:31:23 +0200 (CEST)
Subject: [Rd] fortune? (was: Re: How do you make a formal "feature"
 request?)
In-Reply-To: <AANLkTim3mcTqh+_MQP3LOhDGExRWJawPeRD-mys-Mc7-@mail.gmail.com>
References: <AANLkTim3mcTqh+_MQP3LOhDGExRWJawPeRD-mys-Mc7-@mail.gmail.com>
Message-ID: <alpine.DEB.2.00.1008221430130.6383@paninaro.uibk.ac.at>

On Sun, 22 Aug 2010, Liviu Andronic wrote:

> Dear all I was wondering whether such a long post could be fortune-ed. 
> What do you think?

It's a nice write-up :-) But a bit too long for a fortune...you wouldn't 
see nothing else (and maybe not even the start of the fortune) upon 
startup.

Thanks for the pointer anyway,
Z

> Regards
> Liviu
>
>
> On Sat, Aug 21, 2010 at 9:33 PM, Sharpie <chuck at sharpsteen.net> wrote:
>> Well, I can think of three ways it can go down:
>>
>>
>> 1. ?You want a shiny new pony.
>>
>> You ask about it on the mailing list and it seems that everyone else in the
>> world responds "Hell yeah! I want to ride that too!". ?In this case the
>> natives are restless enough that someone on R-Core may personally implement
>> the feature- especially if they want to ride the pony as well.
>>
>> In this case, you need to provide a detailed specification of what kind of
>> pony you want, how it should be groomed and the exact pitch at which you
>> want it to whinny. ?A good template for such as spec would be a Python
>> Enhancement Proposal (PEP) which is the way community-suggested core changes
>> are implemented in python. ?An example is:
>> http://www.python.org/dev/peps/pep-0389/
>>
>> However, going this route is extremely rare. ?You have to have a significant
>> amount of the user community rallying behind your idea and buy-in from core
>> developers who are interested in implementing and, most importantly,
>> maintaining and supporting the code.
>>
>>
>> 2. You want a shiny new pony but not many other people in the word seem
>> interested.
>>
>> In this situation you can do the work yourself, or with a group of other
>> like-minded pony enthusiasts, to bring your idea into the world. ?Perhaps
>> the genetic material you are looking for is already present in the vast
>> herds of other ponies running wild on CRAN and elsewhere and you just have
>> to do a little breeding to get what you want. ?Other times, the only way to
>> do right is to write everything from scratch. ?Either way, in the end you
>> will have a pony that shines exactly the way you want it to that you can
>> enjoy for the rest of your life.
>>
>> In this case, getting your new pony into R Core is unlikely. ?The best
>> response you can hope for is something along the lines of "That is a mighty
>> fine pony you have there, but we really don't want it crapping all over our
>> stable". ?They are not trying to be rude- the facts of life are that the
>> members of R Core have a limited amount of time and a lot of other ponies to
>> clean up after. ?Add to that the fact that shoveling pony shit is a
>> thankless job that does not pay well and it is understandable why R Core may
>> be conservative about the number of ponies they let into the official
>> stable.
>>
>> However, they will be more than happy to provide your pony with a stall at
>> CRAN so that everyone else in the world can take it out for a spin. ?I have
>> never had a problem with installing and using packages from CRAN, even on
>> windows machines that have been locked down and then shot in both kneecaps
>> by the friendly neighborhood IT gestapo. ?All and all, this option is
>> actually a pretty sweet deal; you will just have to drop by the CRAN stall
>> every once and a while and deal with the pony droppings yourself or people
>> will start to avoid it because of the smell.
>>
>>
>> 3. You want a shiny new pony, but dont have the time or energy to pick out
>> or put together the exact one you want.
>>
>> In this case, you can still get the pony you want but it will cost you
>> money. ?There are R programmers out there who can write you a package if you
>> pay them the right price. ?Supporting your local grad student population can
>> also work; hunger is a great motivator.
>>
>> In the end you can also pay a corporate pony breeder like SAS for a trusty
>> thoroughbred that is well respected by people in high places. ?However, you
>> may notice that these ponies bear some telltale signs of inbreeding-- one of
>> their eyes may not point in the same direction as the other or the pony
>> becomes confused easily when put in an unfamiliar situation. ?Given there is
>> not a lot you can do about these defects, you may suffer a crippling case of
>> buyers remorse especially when you see the bill.
>>
>>
>> Ok, I think i've thoroughly beat this horse analogy to death and I'm going
>> to stop now.
>>
>> -Charlie
>>
>>
>> -----
>> Charlie Sharpsteen
>> Undergraduate-- Environmental Resources Engineering
>> Humboldt State University
>> --
>> View this message in context: http://r.789695.n4.nabble.com/How-do-you-make-a-formal-feature-request-tp2333593p2333737.html
>> Sent from the R devel mailing list archive at Nabble.com.
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
>
>
> -- 
> Do you know how to read?
> http://www.alienetworks.com/srtest.cfm
> http://goodies.xfce.org/projects/applications/xfce4-dict#speed-reader
> Do you know how to write?
> http://garbl.home.comcast.net/~garbl/stylemanual/e.htm#e-mail
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

From simon.urbanek at r-project.org  Sun Aug 22 17:55:40 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sun, 22 Aug 2010 11:55:40 -0400
Subject: [Rd] R-devel Digest, Vol 90, Issue 20
In-Reply-To: <4C70D27F.2080406@gmail.com>
References: <mailman.33.1282384809.16556.r-devel@r-project.org>
	<4C6FCAA1.8050808@gmail.com>
	<38B4DD3A-F50E-4A45-8153-AD44BEA73950@r-project.org>
	<4C70D27F.2080406@gmail.com>
Message-ID: <4A55C6C9-20F4-4DFC-80B0-8E53638EBB94@r-project.org>


On Aug 22, 2010, at 3:32 AM, Laurent wrote:

> On 21/08/10 23:31, Simon Urbanek wrote:
>> 
>> On Aug 21, 2010, at 8:46 AM, Laurent wrote:
>> 
>>> On 21/08/10 12:00, r-devel-request at r-project.org wrote:
>>>> 
>>>> On Aug 20, 2010, at 1:59 PM, Matt Shotwell wrote:
>>>> 
>>>>>> On Fri, 2010-08-20 at 12:58 -0400, Sharpie wrote:
>>>>>>>> 
>>>>>>>> Donald Paul Winston wrote:
>>> (...)
>>>>>>>> 
>>>>>>>> Donald Paul Winston wrote:
>>>>>>>>>> 
>>>>>>>>>> It appears R insists on directing plot output to a
>>>>>>>>>> file. Is their a graphics device that keeps the
>>>>>>>>>> output in memory so it can be returned to my java app
>>>>>>>>>> as a stream of bytes? If I have to wait for it to
>>>>>>>>>> write to a "unique file" and then read it back again
>>>>>>>>>> then I don't think that's going to work. My web app
>>>>>>>>>> needs to support hundreds of concurrent clients.
>>>>>>>>>> 
>>>>>>>> 
>>>>>>>> As far as I know all R graphics output that does not go
>>>>>>>> to a screen device, such as an X window, must be directed
>>>>>>>> to some sort of file.  I am not aware of a graphics
>>>>>>>> device that provides output to something other than a
>>>>>>>> screen or a file, but there very well may be such a
>>>>>>>> device in existence.
>>> 
>>> For experimentation purpose, the rpy2 project is finalizing a
>>> system to allow Python-written graphical devices (no C-level R
>>> extensions, just Python). Beside other niceties, it will allow
>>> working around the lack of connection API in R for graphics. Since
>>> Python makes the use of file-like objects straightforward, we plan
>>> providing devices that are streams (nice for serving graphics from
>>> web applications without having to worry about temp files).
>>> 
>> 
>> Well, that doesn't help with the issue we raised since you still
>> cannot use R connections.
> 
> I do think it will in the use-case proposed: have R serve graphics without having to worry about writing temp files.

Actually I have completely forgotten that I have implemented that in Cairo already -- you can fetch the current image from any image Cairo device (without even closing it) using the .image() function.

So for example you could use something like:

Cairo(640, 480, "/dev/null", "png")
## the file is actually not used in this case at all so you can use anything

plot(...)

## get the image (as a reference)
i=Cairo:::.image(dev.cur())

## if your code can take direct pointer (RGBA), you're done. If you want to further convert it to RAW and more, then:
r=Cairo:::.ptr.to.raw(i$ref,0,i$width*i$height*4)
dim(r) = c(4, i$width, i$height)
p=writePNG(r, raw())
## p is now the raw PNG content - ready to be served to the client as image/png -- no files involved


> Python is somewhat used in the web applications world, and what is proposed allows serving graphics without a temp file in sight.
> 

Somewhat is the key word ;) but nonetheless I'm not sure I understand how you plan to do that because you'd have to embed R for this which will cause you to have to initialize R which is simply too slow for any serious web processing .. If you go the other way round (like starting with Rserve) then you don't have Python as a starting point so you'd have to load Python for that in the first place which seems like an overkill.

Cheers,
Simon



>> It's trivial to modify any of the existing
>> devices (e.g. Cairo as I said) to support in-memory storage as they
>> already support that internally - certainly much easier that to mess
>> with Python etc.
> 
> I have been neck-deep in R C-level code for devices when working on that, and ended up with the exact opposite opinion.
> 
>> Nonetheless, yes, it is another way along the lines
>> of xGD, JavaGD etc.
> 
> Thanks for the pointer. I did not know about them.
> JavaGD might well be the most helpful thing then (if Donald had in mind to do the web handling made in Java).
> 
> 
> Best,
> 
> 
> Laurent
> 
> 
>> Cheers, Simon
>> 
>> 
>> 
>>> 
>>>>>> This was essentially the conclusion of Donald's earlier
>>>>>> thread...
>>>>>> 
>>>>>>>> The functionality you could describe could be implemented
>>>>>>>> by writing a R graphics device that forwards the R
>>>>>>>> plotting commands to... well anywhere you want, really.
>>>>>>>> As the author of an R graphics device, I can say the
>>>>>>>> trickiest part of such an undertaking will be calculating
>>>>>>>> font metrics so that R can properly position text in the
>>>>>>>> graphics.  Everything else is very straight-forward.
>>>>>> 
>>>>>> I believe Donald wants the_rendered_  output. That is, a
>>>>>> stream of bytes that represent a png, jpeg, etc. Toward this
>>>>>> end, we have already discussed using an OS-level fifo to
>>>>>> avoid disk I/O, and I think this is the easiest route for
>>>>>> Donald.
>>>>>> 
>>>>>> Alternatively, Donald might look into the X11 graphics
>>>>>> driver, where Cairo is used to write pngs. In particular, the
>>>>>> in_do_saveplot function (src/main/modules/X11/devX11.c) calls
>>>>>> cairo_surface_write_to_png, in order to save a png to file.
>>>>>> Cairo also provides the cairo_surface_write_to_png_stream
>>>>>> function, which might be used to send png data to a memory
>>>>>> buffer (i.e. a raw vector). I don't think it would be too
>>>>>> difficult to modify in_do_saveplot to accommodate this.
>>>>>> 
>>>> That is all nice, it will require you to hack R (well, there is
>>>> the Cairo device so you could make the change outside of R
>>>> instead).
>>>> 
>>>> As always, the reason is buried deep inside -- the lack of
>>>> connection API. If we had that, devices would take a connection
>>>> instead of the file name and all would be well since you could
>>>> use in-memory connections instead of files ...;)
>>> 
>>> May I dare asking about what happened to past offers to alleviate
>>> the problem ?
>>> 
>>> There is at least one patch (contributed 4 years ago)
>>> http://rwiki.sciviews.org/doku.php?id=developers:r_connections_api
>>> that remained seemingly ignored, and subsequent requests for
>>> updates (or patch submission policies) remained similarly
>>> unanswered.
>>> 
>>> A recent thread showed unexpected progress, with the eventual
>>> possibility of accepting a patch being worded.
>>> http://www.mail-archive.com/r-devel at r-project.org/msg20276.html
>>> Unfortunately the thread drifted into legalese invocations, and
>>> despite the author of the patch complying to all demands regarding
>>> the licensing flavour for his contribution the patch seems to have
>>> joined (all ?) other submitted patches. (I don't get anything when
>>> running: svn log -r {2010-04-27}:HEAD | grep -i Shotwell ).
>>> 
>>> Are there such patches included in the Revolution R sources, or are
>>> there plans to do so ?
>>> 
>>> 
>>> 
>>> Laurent
>>> 
>>> 
>>> 
>>> 
>>>> Cheers, Simon
>>>> 
>>>> 
>>>> 
>>> 
>>> 
>> 
> 
> 


From pauljohn32 at gmail.com  Sun Aug 22 20:31:46 2010
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Sun, 22 Aug 2010 13:31:46 -0500
Subject: [Rd] No RTFM?
In-Reply-To: <loom.20100822T005530-937@post.gmane.org>
References: <4C6DC76B.7000303@structuremonitoring.com>
	<AANLkTikwqE46G5Gqf3MfTVa2wwa8rCo2TPmSOg-zQDx=@mail.gmail.com>
	<AANLkTi=W0HUgzpxZLUCpgJSQ5PvcXp5s1BC2wLsg4=w1@mail.gmail.com>
	<AANLkTin+mW=DmKGb=2AMSrN652Z_CgWYrvksPWOjKOA3@mail.gmail.com>
	<AANLkTinfhu9njhJaoO02HO2XJZRczbXkWeRvFAJGHeOy@mail.gmail.com>
	<4C6FAD0C.6060908@structuremonitoring.com>
	<AANLkTinzJqM1tsw3KF-wi4HQnSx1nK6eHYMCSYdm1kFO@mail.gmail.com>
	<AANLkTi=7NvOrpdYRoOOZKQVtG49FDd2eBXLB11FVzG2h@mail.gmail.com>
	<loom.20100822T005530-937@post.gmane.org>
Message-ID: <AANLkTinT9Uhpa6vhiBmv7zXM3qH_U1D1mq+Hbg6oS-B6@mail.gmail.com>

Hey Ben:

One of my colleagues bought your book and was reading it during a
faculty meeting last Tuesday.  Everybody kept asking what's that?

If you know how to put it in the wiki, would you please do it and let
us know where it is.  I was involved with an R wiki about 5 or 6 years
ago, but completely lost track of it.

I'm going to keep pushing for sharp, clear guidelines.  If I could get
R-help set up as a template for messages like  bugzilla, I think it
would be awesome! To disagree with Ted. People won't mind giving us
what we need, as long as we tell them exactly what to do. We save
ourselves the circle of "give us sessionInfo()" and "give us your
LANG" and 'what version is that' and so forth.

But I'll consider it a victory if we can get the requirement of
sessionInfo() in as the first thing in the posting guide !

I agree that "which packages can we help with" in r-help is a good
question. I had in mind that we should field questions about anything
in the R tarball, including the recommended ones. I think I did not
use the right words when I tried to express that.  Maybe we just need
to list the packages to be clear.  Things like "foreign" that have
passed from the ownership of the original writer to the R Core Team
are certainly eligible.

I also admit that I have not looked at R-FAQ since about 2005, and I
don't want to duplicate that effort.  If R-FAQ has a nice concise list
of ways to get information about specific things, the posting guide
might just refer to that section by name/number, rather than
duplicate.  I'm torn here, because people often assume that if you
give them a link, it must not be important (thats why you left it
out).

pj

On Sat, Aug 21, 2010 at 6:04 PM, Ben Bolker <bbolker at gmail.com> wrote:
> Paul Johnson <pauljohn32 <at> gmail.com> writes:
>
>>
>
> ?[snip: lots more snippage to try get gmane to let me post]
>
>> What do you think of this: The priority is to put the most important
>> thing at the top. The second priority is brevity.
>
> ?I really like this.
> ?Some suggestions:
>
> =========================
>> Posting Guide: How to ask good questions that prompt useful answers
>>
>> People are busy, so ask your question in a useful way.
>> 1. Every question to r-help should begin with the following.
>> A. Output from the command sessionInfo()
>> B. Output from Sys.getlocale()
>> C. Information about how you installed R. Did you make any changes,
>> such as incorporating a BLAS library. If you don't know, ask your
>> system administrator.
>
> ? I would make this optional or put it further down. I don't see that
> many problems on the list that are due to non-standard installations.
> Most of the most clueless people are (a) using stock installations
> and/or (b) don't even know who installed R on the computer they are
> using. I don't mind sending them to find out/ask if it's a real
> issue, but it feels like an unnecessary hurdle.
>
>> D. If you see an error or something unexpected, your message MUST
>> include the EXACT code that you were running. We mean, ALL of your
>> commands that were run before the error occurred. ?If you are unsure
>> of what you did, close your session, clean up your code, and start
>> over to reproduce the ?problem in the most direct way. ?Your post MUST
>> include the EXACT VERBATIM error message.
>>
>> If you are working on a long program that requires a dataset,
>> post the dataset and the program somewhere on the Internet and
>> refer us to it. It is simply not possible to guess about what
>> might be going wrong in your program unless we can see it.
>>
>> If you don't want to share your data, construct a small example
>> dataset that produces the same problem. Post it and refer us to it.
>
> ? This is where we have to emphasize 'small, reproducible example'
> more strongly -- perhaps move the next item up.
> I dread the pages and pages of random R-session crap
> that will be posted following this advice literally ...
>
>> E. If you have isolated the problem to a certain part of your project,
>> write a small, self-contained 'working example' that causes the
>> problem and include it with your post.
>>
>> Example. Why does this code:
>>
>> dat <- data.frame(x=c(1,2,3), y=c(3,4,5))
>> plot (x, y, data=dat)
>>
>> cause this:
>>
>> Error in plot(x, y, data = dat) : object 'x' not found
>>
>> We can easily reproduce that and explain the problem to you. We can't
>> help with a question like "my plot failed, something about an object
>> was missing."
>>
>> 2. How to avoid making the members of r-help angry at you.
>>
>> A. Do not call a problem a "bug" unless you really mean to say that
>> ? ? ? ?someone has made a mistake. If you say "bug", they hear
>> ? ? ? ?"embarrassing personal flaw" or "gigantic boil". ?We know
>> ? ? ? ?you don't mean that, but sometimes they forget.
>
> ?[note that there is already information on 'what is a bug' in the
> posting guide -- I think -- or maybe it's the R FAQ]
>
>>
>> B. Before you write to r-help, search for answers from previous questions.
>> ? ?1. Try Google? Or her cousin Yahoo?
>
> ? ?This should be for more general statistics questions, and perhaps
> put second.
>
>> ? ?2. Try these inside R:
>>
>> ? ? ? help.search("whatever")
>> ? ? ? RSiteSearch("whatever")
>> ? ? ? apropos("whatever")
>
> ?perhaps add
> ?install.packages("sos"); library(sos); findFn("whatever")
>>
>> C. Read R-intro, R help pages, and the R FAQs.
>>
>> ? ? ? ?whatever
>>
>> 3. Do not send your question to r-help unless your question is about R
>> or the base R packages that are supported by the R Core Team.
>>
>> A. Don't ask statistics questions, unless they fall into the form "Which
>> R procedure or package should I use to conduct an analysis of ..." or
>> "Does anybody have a working example of procedure XYZ?" or "Can I
>> obtain XYZ result from an obect of class ZYX?"
>>
>> B. If you have trouble with a package from CRAN or elsewhere, write to
>> the author of that package.
>
> ?^^^ maintainer; use maintainer("whatever") to find their e-mail address.
>
>> r-help might be a good place to ask,
>> "I've been using package XYZ and the author seems to have abandoned
>> the project. Does anybody know of a replacement?" Otherwise, don't.
>>
>> Note that the Bioconductor repository is not part of "R" proper and
>> you should address questions about Bioconductor to their support framework.
>>
>> C. If you are writing code for R itself, or if you are developing a
>> ? ? ? ?package, send your question to r-devel, rather than r-help.
>>
>> D. For operating-system or R interface questions, there are dedicated
>> lists. See R-sig-Mac, R-sig-Debian, R-sig-Fedora, etc.
>>
>> ==============================
>>
>> It will be necessary to add, toward the end, the part about "be polite
>> when posting."
>>
>> And along the lines of the "No RTFM" policy, I think we should say
>> "All RTFM answers should include an exact document and section
>> number." It is certainly insulting to answer a question about plot
>> with the one line
>>
>> ?plot
>>
>> but it is not insulting to say "In ?plot, check the "Details" section
>> and run the example code."
>
> ?Is there any point posting this on the Wiki and letting people
> hack at it?
>
> ?Ben
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Paul E. Johnson
Professor, Political Science
1541 Lilac Lane, Room 504
University of Kansas


From Ted.Harding at manchester.ac.uk  Sun Aug 22 20:49:44 2010
From: Ted.Harding at manchester.ac.uk ( (Ted Harding))
Date: Sun, 22 Aug 2010 19:49:44 +0100 (BST)
Subject: [Rd] No RTFM?
In-Reply-To: <AANLkTinT9Uhpa6vhiBmv7zXM3qH_U1D1mq+Hbg6oS-B6@mail.gmail.com>
Message-ID: <XFMail.100822194944.Ted.Harding@manchester.ac.uk>

On 22-Aug-10 18:31:46, Paul Johnson wrote:
> Hey Ben:
> One of my colleagues bought your book and was reading it during a
> faculty meeting last Tuesday.  Everybody kept asking what's that?
> 
> If you know how to put it in the wiki, would you please do it and let
> us know where it is.  I was involved with an R wiki about 5 or 6 years
> ago, but completely lost track of it.
> 
> I'm going to keep pushing for sharp, clear guidelines.  If I could get
> R-help set up as a template for messages like  bugzilla, I think it
> would be awesome! To disagree with Ted. People won't mind giving us
> what we need, as long as we tell them exactly what to do. We save
> ourselves the circle of "give us sessionInfo()" and "give us your
> LANG" and 'what version is that' and so forth.

"People won't mind"? If R-help ends up telling me exactly what to do,
I shall leave the list. I mean it. For good.
Ted.

[the rest snipped]

--------------------------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding at manchester.ac.uk>
Fax-to-email: +44 (0)870 094 0861
Date: 22-Aug-10                                       Time: 19:49:41
------------------------------ XFMail ------------------------------


From lgautier at gmail.com  Sun Aug 22 21:05:11 2010
From: lgautier at gmail.com (Laurent Gautier)
Date: Sun, 22 Aug 2010 21:05:11 +0200
Subject: [Rd] Rserve graphics output [Was: R-devel Digest, Vol 90,
	Issue 20]
In-Reply-To: <4A55C6C9-20F4-4DFC-80B0-8E53638EBB94@r-project.org>
References: <mailman.33.1282384809.16556.r-devel@r-project.org>
	<4C6FCAA1.8050808@gmail.com>
	<38B4DD3A-F50E-4A45-8153-AD44BEA73950@r-project.org>
	<4C70D27F.2080406@gmail.com>
	<4A55C6C9-20F4-4DFC-80B0-8E53638EBB94@r-project.org>
Message-ID: <4C7174E7.2070901@gmail.com>

On 22/08/10 17:55, Simon Urbanek wrote:
> On Aug 22, 2010, at 3:32 AM, Laurent wrote:
>
>    
>> On 21/08/10 23:31, Simon Urbanek wrote:
>>      
>>> On Aug 21, 2010, at 8:46 AM, Laurent wrote:
>>>
>>>        
>>>> On 21/08/10 12:00, r-devel-request at r-project.org wrote:
>>>>          
>>>>> On Aug 20, 2010, at 1:59 PM, Matt Shotwell wrote:
>>>>>
>>>>>            
>>>>>>> On Fri, 2010-08-20 at 12:58 -0400, Sharpie wrote:
>>>>>>>                
>>>>>>>>> Donald Paul Winston wrote:
>>>>>>>>>                    
>>>> (...)
>>>>          
>>>>>>>>> Donald Paul Winston wrote:
>>>>>>>>>                    
>>>>>>>>>>> It appears R insists on directing plot output to a
>>>>>>>>>>> file. Is their a graphics device that keeps the
>>>>>>>>>>> output in memory so it can be returned to my java app
>>>>>>>>>>> as a stream of bytes? If I have to wait for it to
>>>>>>>>>>> write to a "unique file" and then read it back again
>>>>>>>>>>> then I don't think that's going to work. My web app
>>>>>>>>>>> needs to support hundreds of concurrent clients.
>>>>>>>>>>>
>>>>>>>>>>>                        
>>>>>>>>> As far as I know all R graphics output that does not go
>>>>>>>>> to a screen device, such as an X window, must be directed
>>>>>>>>> to some sort of file.  I am not aware of a graphics
>>>>>>>>> device that provides output to something other than a
>>>>>>>>> screen or a file, but there very well may be such a
>>>>>>>>> device in existence.
>>>>>>>>>                    
>>>> For experimentation purpose, the rpy2 project is finalizing a
>>>> system to allow Python-written graphical devices (no C-level R
>>>> extensions, just Python). Beside other niceties, it will allow
>>>> working around the lack of connection API in R for graphics. Since
>>>> Python makes the use of file-like objects straightforward, we plan
>>>> providing devices that are streams (nice for serving graphics from
>>>> web applications without having to worry about temp files).
>>>>
>>>>          
>>> Well, that doesn't help with the issue we raised since you still
>>> cannot use R connections.
>>>        
>> I do think it will in the use-case proposed: have R serve graphics without having to worry about writing temp files.
>>      
> Actually I have completely forgotten that I have implemented that in Cairo already -- you can fetch the current image from any image Cairo device (without even closing it) using the .image() function.
>
> So for example you could use something like:
>
> Cairo(640, 480, "/dev/null", "png")
> ## the file is actually not used in this case at all so you can use anything
> plot(...)
>
> ## get the image (as a reference)
> i=Cairo:::.image(dev.cur())
>
> ## if your code can take direct pointer (RGBA), you're done. If you want to further convert it to RAW and more, then:
> r=Cairo:::.ptr.to.raw(i$ref,0,i$width*i$height*4)
> dim(r) = c(4, i$width, i$height)
> p=writePNG(r, raw())
> ## p is now the raw PNG content - ready to be served to the client as image/png -- no files involved
>
>    

That's handy for serving graphics.
(But "Yuk ! Hack !" about having to open a device in /dev/null).

>    
>> Python is somewhat used in the web applications world, and what is proposed allows serving graphics without a temp file in sight.
>>
>>      
> Somewhat is the key word ;) but nonetheless I'm not sure I understand how you plan to do that because you'd have to embed R for this which will cause you to have to initialize R which is simply too slow for any serious web processing ..

If considering R to serve graphics, there are two main strategies: fire 
up an R process each time, or keep an R process alive to answer request. 
Both will likely have to be done by something else than R (<put your 
language of choice for web development here>), and if R can be embedded 
in that language this will likely be easier (no need to work out a 
communication interface) and possibly faster (depends on the language 
discussed and of the quality of the embedding).


>   If you go the other way round (like starting with Rserve) then you don't have Python as a starting point so you'd have to load Python for that in the first place which seems like an overkill.
>
>    

In that scenario, you do not need RServe at all: Python is handling 
everything. For example, the combo Django (web framework in Python) + 
rpy2 has been used to deliver R results (including graphics) through the 
web.
Fancy strategies such as managing a pool of R instances if talking heavy 
web traffic, persistent sessions, etc... can also be implemented.


Best,


Laurent

> Cheers,
> Simon
>
>
>
>    
>>> It's trivial to modify any of the existing
>>> devices (e.g. Cairo as I said) to support in-memory storage as they
>>> already support that internally - certainly much easier that to mess
>>> with Python etc.
>>>        
>> I have been neck-deep in R C-level code for devices when working on that, and ended up with the exact opposite opinion.
>>
>>      
>>> Nonetheless, yes, it is another way along the lines
>>> of xGD, JavaGD etc.
>>>        
>> Thanks for the pointer. I did not know about them.
>> JavaGD might well be the most helpful thing then (if Donald had in mind to do the web handling made in Java).
>>
>>
>> Best,
>>
>>
>> Laurent
>>
>>
>>      
>>> Cheers, Simon
>>>
>>>
>>>
>>>        
>>>>          
>>>>>>> This was essentially the conclusion of Donald's earlier
>>>>>>> thread...
>>>>>>>
>>>>>>>                
>>>>>>>>> The functionality you could describe could be implemented
>>>>>>>>> by writing a R graphics device that forwards the R
>>>>>>>>> plotting commands to... well anywhere you want, really.
>>>>>>>>> As the author of an R graphics device, I can say the
>>>>>>>>> trickiest part of such an undertaking will be calculating
>>>>>>>>> font metrics so that R can properly position text in the
>>>>>>>>> graphics.  Everything else is very straight-forward.
>>>>>>>>>                    
>>>>>>> I believe Donald wants the_rendered_  output. That is, a
>>>>>>> stream of bytes that represent a png, jpeg, etc. Toward this
>>>>>>> end, we have already discussed using an OS-level fifo to
>>>>>>> avoid disk I/O, and I think this is the easiest route for
>>>>>>> Donald.
>>>>>>>
>>>>>>> Alternatively, Donald might look into the X11 graphics
>>>>>>> driver, where Cairo is used to write pngs. In particular, the
>>>>>>> in_do_saveplot function (src/main/modules/X11/devX11.c) calls
>>>>>>> cairo_surface_write_to_png, in order to save a png to file.
>>>>>>> Cairo also provides the cairo_surface_write_to_png_stream
>>>>>>> function, which might be used to send png data to a memory
>>>>>>> buffer (i.e. a raw vector). I don't think it would be too
>>>>>>> difficult to modify in_do_saveplot to accommodate this.
>>>>>>>
>>>>>>>                
>>>>> That is all nice, it will require you to hack R (well, there is
>>>>> the Cairo device so you could make the change outside of R
>>>>> instead).
>>>>>
>>>>> As always, the reason is buried deep inside -- the lack of
>>>>> connection API. If we had that, devices would take a connection
>>>>> instead of the file name and all would be well since you could
>>>>> use in-memory connections instead of files ...;)
>>>>>            
>>>> May I dare asking about what happened to past offers to alleviate
>>>> the problem ?
>>>>
>>>> There is at least one patch (contributed 4 years ago)
>>>> http://rwiki.sciviews.org/doku.php?id=developers:r_connections_api
>>>> that remained seemingly ignored, and subsequent requests for
>>>> updates (or patch submission policies) remained similarly
>>>> unanswered.
>>>>
>>>> A recent thread showed unexpected progress, with the eventual
>>>> possibility of accepting a patch being worded.
>>>> http://www.mail-archive.com/r-devel at r-project.org/msg20276.html
>>>> Unfortunately the thread drifted into legalese invocations, and
>>>> despite the author of the patch complying to all demands regarding
>>>> the licensing flavour for his contribution the patch seems to have
>>>> joined (all ?) other submitted patches. (I don't get anything when
>>>> running: svn log -r {2010-04-27}:HEAD | grep -i Shotwell ).
>>>>
>>>> Are there such patches included in the Revolution R sources, or are
>>>> there plans to do so ?
>>>>
>>>>
>>>>
>>>> Laurent
>>>>
>>>>
>>>>
>>>>
>>>>          
>>>>> Cheers, Simon
>>>>>
>>>>>
>>>>>
>>>>>            
>>>>
>>>>          
>>>        
>>
>>      
>


From landronimirc at gmail.com  Sun Aug 22 21:14:07 2010
From: landronimirc at gmail.com (Liviu Andronic)
Date: Sun, 22 Aug 2010 22:14:07 +0300
Subject: [Rd] No RTFM?
In-Reply-To: <XFMail.100822194944.Ted.Harding@manchester.ac.uk>
References: <AANLkTinT9Uhpa6vhiBmv7zXM3qH_U1D1mq+Hbg6oS-B6@mail.gmail.com>
	<XFMail.100822194944.Ted.Harding@manchester.ac.uk>
Message-ID: <AANLkTimdG1L_wQH_Ey=ZWa6BsC7esOLAMuUyu3YPshDD@mail.gmail.com>

On Sun, Aug 22, 2010 at 9:49 PM, Ted Harding
<Ted.Harding at manchester.ac.uk> wrote:
> "People won't mind"? If R-help ends up telling me exactly what to do,
> I shall leave the list. I mean it. For good.
>
At a minimum it already does so:
"PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code."

But people still chose to do as they wish, mostly. Regards
Liviu


From seanpor at acm.org  Sun Aug 22 21:34:12 2010
From: seanpor at acm.org (Sean O'Riordain)
Date: Sun, 22 Aug 2010 20:34:12 +0100
Subject: [Rd] No RTFM?
In-Reply-To: <XFMail.100822031327.Ted.Harding@manchester.ac.uk>
References: <AANLkTi=7NvOrpdYRoOOZKQVtG49FDd2eBXLB11FVzG2h@mail.gmail.com>
	<XFMail.100822031327.Ted.Harding@manchester.ac.uk>
Message-ID: <AANLkTi=sJ_zvxAN7yhTQk-Q=296sgiNQSZ0jp7Bnd_ih@mail.gmail.com>

I agree with most of what has been said.  And before I go any further
I really do appreciate the work that goes on here.

I think those who are prone to be overly terse and have a tendency to
post RTFM should take a piece of advice from the posting guide..."type
4*runif(1) at the R prompt, and wait this many hours", and consider
*NOT* posting! :-)

As a new user around here (only 9 years), I find the documentation can
be overly terse in places.  I find it easiest to learn by example
(rather than by definition) - so I jump straight to the examples.  But
in many cases the examples or 'Details' just didn't explain the
resulting output - to avoid anything which could possibly be described
as an ad hominem attack, I have to be obscure here... sorry...
whatever(x) produces a table of output which might be obvious to
some... but I do not have years of formal theory of statistics
education, and the printed results are quite ambiguous to me.  Some
documentation runs through every item in the output explaining what it
is instead of assuming that people understand it - if I know it
already I can skip it.  I appreciate that documentation is hard to
write but it is generally better to have too much than too little -
the PDF docs for 2.11.1 on this machine runs to nearly 2,200 pages
which is daunting to read and clearly it would be much bigger if I got
my wish!  Btw. I also buy books to fill in gaps... a quick count
looking around here and I see a dozen books which use R... no doubt
there are at least another dozen in the office.

Sometimes I search endlessly for something in the documentation but
cannot find it because I'm using the wrong set of buzzwords - e.g.
some years ago I wanted to calculate the running total going down a
data.frame - but try as I might I couldn't find 'cumsum()'.

I've found bugs in the past - but didn't dare post a "bug report"...
and six months later it was still a crashing bug...

Generally I will spend at least 8 hours of solid work and include a
night to sleep on a something before considering posting to
r-help/r-devel.  I think that this is why some people have migrated to
other fora e.g. http://stackoverflow.com/questions/tagged/r where one
is less likely to be roasted and insulted.

As I recall there has been more than one call for a beginners help
forum where things are more gentle, but these were "not encouraged".

In the posting guide and in some r-help posts there have been demands
for details of affiliation - my work current work contract (and many
previous contracts) makes it difficult for me to put my work details
on an email to r-help (or similar).

Kind regards,
Sean O'Riordain
un-affiliated...
Dublin, Ireland

On 22 August 2010 03:13, Ted Harding <Ted.Harding at manchester.ac.uk> wrote:
> I've stayed in by back seat in the spectators so far, but I feel
> a comment may be helpful here.
>
> I'm in close sympathy with Hadley Wickham's comment on a "previous
> suggestion by a regular contributor" [Spencer Graves] (below) and
> with the comment by Spencer himself.
>
> We are a community with a variety of attitudes, from prescriptive
> (to the point of disciplinarian) to relaxed and permissive.
> The problem with this sort of discussion is that the former feel
> able to propose detailed prescriptions, while the latter do not
> have a definite "party line" to set out in any sort of detail.
>
> The more specific and detailed the prescriptive proposals become,
> the more they take on forms which could readily be adopted into
> the guidelines for the list, and may therefore seem attractive to
> those who maintain the guidelines. Meanwhile, the permissives have
> not proposed any such specific alternatives.
>
> I do not feel at all comfortable with Paul's suggestions below
> (for reasons which I have explained in-line). To follow these
> suggestions would make posting to R become more and more like
> filling in a Tax Return! (In the days when I had to so this,
> I would work with two photocopies of a 12-page form, a pencil,
> and an eraser, doing 1st draft on copy one, then re-starting
> from scratch 2nd draft on copy 2, all the time consulting a
> 44-page Tax Return Guide and a 16-page Tax Calculation Guide.
> Then comparing the two for agreement, and starting again if
> they didn't. Only when it was all apparently OK would I transcribe
> in ink onto the real Return Form. It would take at least a day.).
>
> Regarding peremptory responses to "RTFM" and the like, if I come
> across one (as when interested in a thread so opening the emails
> about it) I simply delete it with mild irritation (and regret the
> waste of space on the list). And with likely sympathy for the
> person who provoked it (see below).
>
> Regarding the sort of query which can provoke such responses,
> I think one can try to be discriminating. Occasionally they are
> pretty clearly from people who are trying to get someone else
> to do their work without making any effort of their own.
> Appropriate response should fit the case, and need not take the
> form of an automatic "speeding ticket".
>
> Usually, however, they are from naive users who are only beginning
> to find their way in R (and its documentation). Both of these are
> daunting and bewildering tasks for beginners. And not only beginners.
> I've been using R myself for well over 10 years, and seriously for
> nearly 10. I can still wander for a long time through "a maze of
> twisty tunnels, all alike" when trying to track down some essential
> thing (graphics parameters and other options(), in particular, can
> turn into a real "Dungeons and Dragons"). One can even begin to
> wonder whether what one is looking for is documented at all (and
> sometimes it isn't). What with the various introductory manuals
> (which are indeed good), trying '?whatever' and being led off into
> a trail of "See also:"s, trying '??whatever' to try to flush up
> some functions that might be relevant, and the mass of web-pages
> one might be led to on an R Site Search, we have a whole meadow
> full of haystacks in which to search for a needle! And don't try
> to tell me that all the '?...' help pages are models of simplicity,
> clarity, and self-containment!
>
> So, if one recognises such a query, one can try to get some insight
> into what the real obstacle is. If you get that, then a well-chosen
> example along with some clear explanation can help that beginner
> over that problem, encourage them, and give them confidence in their
> own hopes for understanding and using R, and solving such problems
> for themselves in future. Even if it seems that they don't even know
> how to climb over a stile on a footpath, a little encouragement to
> put one foot on the near end of the cross-step, swing the other leg
> over the top and put the other foot on the other end, then swing the
> first foot over and onto the cross-step, then finally hop neatly down
> onto the ground, can evoke an "Ahh!!" and leave them fully equipped
> to deal with the next stile (and some insight into stiles in general).
>
> With R, the analogy would be more like showing (and explaining) the
> manoeuvres which will take them up the first pitch of a rock-climb.
>
> I think that, if one does not feel inclined to take such an approach,
> then it is better simply to move on, maybe deleting the query. There
> is no point in a response which is both discouraging and unhelpful.
> "RTFM" (and variants) is likely to be perceived as a put-down, and
> (unless accompanied by sympathetic detailed guidance) will not help
> to solve the problem. (Some seem to have the mind of a Tax Man, to
> whom all is transparently contained in 44+16 pages of complicated
> and intricately cross-referenced Guides).
>
> So, in my view, the Posting Guide should be a true guide, but should
> avoid giving any impression that jumping through documentation hoops
> is a prerequisite for a valid posting to the list. Therefore it
> should be gentle and general. And it should never be used as an
> Act of Law which defines crimes against the list. There are very
> few of these, compared with the genuine and puzzled questions from
> people who need some help.
>
> See below now for some comments on Paul's suggestions about revisions
> to the Posting Guide.
>
> Best wishes to all,
> Ted.
>
> On 21-Aug-10 22:47:11, Paul Johnson wrote:
>> On Sat, Aug 21, 2010 at 11:04 AM, Hadley Wickham <hadley at rice.edu>
>> wrote:
>>>> previous suggestion by a regular contributor. _I still think a better
>>>> response is not to escalate: _Either ignore the post or say something
>>>> like,
>>>> "I don't understand your question. _Please provide a self-contained
>>>> minimal
>>>> example as suggested in the Posting Guide ... ."
>>>
>>> I agree wholeheartedly. I have tried to do this with the ggplot2
>>> mailing list, and I think it has been extremely successful in
>>> fostering a community that is friendly and polite, yet still provides
>>> excellent technical support (and these days, most of it doesn't come
>>> from me!).
>>>
>>
>> I've been insulted in r-help and its no fun. After Gabor pointed out
>> the logic in it, I have to admit he is right. It does keep traffic
>> down. I don't go there anymore unless I'm completely desperate.
>
> I agree with Hadley, but not with Paul's "logic" bit and the reason.
> There is an implicit assumption about the function of R-help -- it
> appears to be that, if one is a puzzled beginner, one should not post
> to the list (so keep the traffic down ... ) unless one has exhausted
> all the on-line resources (and oneself, and one's time) in an all-out
> effort to find the answer for oneself.
>
> I see the purpose of R-help as providing help with R, at any level.
> The traffic can be at whatever level fills this need. Every "RTFM"
> response adds to the traffic (and so, on that logic, should also
> be discouraged -- especially since it's not useful)! I don't see
> why Paul should have to feel "completely desperate" before daring
> to post to the list.
>
>> I agree also, sometimes RTFM is the right answer, especially if
>> it is stated as "That is discussed on p. 162 of the R Guide for
>> Whatever..."
>> I don't think people are insulted if ?you tell them to check
>> something specific.
>
> I agree (see above) that this format of "RTFM" can be a good and
> helpful response, and is unlikely to be seen as a put-down.
>
>> Usually, first time visitors don't know about the R posting guide
>> and when they ask an incomplete question, we should just refer
>> them to it.
>> We don't need the angry tone that we often see, but I don't think
>> people mind being referred. This presupposes the posting guide is
>> helpful.
>
> I agree so far!
>
>> If somebody forgets the posting guide twice, then I think we
>> should all berate and insult them. I mean vigorously :)
>
> But not here! I think insults and put-downs are out of place.
> Possibly one can reply privately, with guidance but not with insults,
> if one feels that it would be "dross" on the list.
>
>> My personal opinion is that the R posting guide could be revised
>> to be more direct. Exhausted, frustrated people don't benefit as
>> much as they could because the document is too long.
>
> I agree.
>
>> This is hard to fix because everything in there was added for a good
>> reasons. ?(I've been here long enough to remember a time before the
>> guide, sad to say.) ?I tried to reshape the posting guide and I can
>> see that it is a really hard problem.
>>
>> What do you think of this: The priority is to put the most important
>> thing at the top. The second priority is brevity.
>>
>> =============================
>>
>> Posting Guide: How to ask good questions that prompt useful answers
>>
>> People are busy, so ask your question in a useful way.
>>
>> 1. Every question to r-help should begin with the following.
>>
>> A. Output from the command sessionInfo()
>>
>> B. Output from Sys.getlocale()
>>
>> C. Information about how you installed R. Did you make any changes,
>> such as incorporating a BLAS library. If you don't know, ask your
>> system administrator.
>
> Surely not *every* question! Whether these are useful or relevant
> depends on the question. If not, they are (from the point of view
> of anyone trying to get to the point of the question) pure noise.
> In fact, I think most questions that occur don't need these items
> of information (though failure to include them often gets a speeding
> ticket).
>
>> D. If you see an error or something unexpected, your message MUST
>> include the EXACT code that you were running. We mean, ALL of your
>> commands that were run before the error occurred.
>
> If your R program happens to consist of 1000 lines of code, the
> above amounts to an order to include it all -- in all postings
> to R-help. Such a requirement should definitely not be made in the
> posting guide. (D in fact conflicts with the further proposals
> below under D and under E).
>
>> ?If you are unsure
>> of what you did, close your session, clean up your code, and start
>> over to reproduce the ?problem in the most direct way. Your post
>> MUST include the EXACT VERBATIM error message.
>
> Verbatim error messages are indeed a good thing, and that guidance
> is useful. I would tone down the imperatives, though. More on the
> lines of "Include any error messages verbatim, as returned by R."
>
>> If you are working on a long program that requires a dataset,
>> post the dataset and the program somewhere on the Internet and
>> refer us to it. It is simply not possible to guess about what
>> might be going wrong in your program unless we can see it.
>
> I see this proposal as something which might be useful, but it
> would depend on the context. [see ** below]
>
>> If you don't want to share your data, construct a small example
>> dataset that produces the same problem. Post it and refer us to it.
>
> This might be better worded as "If you can, construct a small
> example with code and data which reproduces the problem." [see ** below]
>
>> E. If you have isolated the problem to a certain part of your project,
>> write a small, self-contained 'working example' that causes the
>> problem and include it with your post.
>
> [**]
> This overlaps with parts of D above.
>
>> Example. Why does this code:
>>
>> dat <- data.frame(x=c(1,2,3), y=c(3,4,5))
>> plot (x, y, data=dat)
>>
>> cause this:
>>
>> Error in plot(x, y, data = dat) : object 'x' not found
>>
>> We can easily reproduce that and explain the problem to you. We can't
>> help with a question like "my plot failed, something about an object
>> was missing."
>
> I think the mini-example of code, and the example of how not to
> asl, are well put.
>
>> 2. How to avoid making the members of r-help angry at you.
>> A. Do not call a problem a "bug" unless you really mean to say that
>> ? ?someone has made a mistake. If you say "bug", they hear
>> ? ?"embarrassing personal flaw" or "gigantic boil". ?We know
>> ? ?you don't mean that, but sometimes they forget.
>
> I don't think that occurs often enough to justify making a special
> point of it in the posting guide. I'd leave that out.
>
>> B. Before you write to r-help, search for answers from previous
>> questions.
>> ? ?1. Try Google? Or her cousin Yahoo?
>
> I don't think people should be advised to use Google (or Yahoo)!
> One may get 20,000 hits. See comment to 2 below.
>
>> ? ?2. Try these inside R:
>>
>> ? ? ? help.search("whatever")
>> ? ? ? RSiteSearch("whatever")
>> ? ? ? apropos("whatever")
>
> Good advice. I would also add:
>
> ? ? ? R site search web interface
> ? ? ? http://finzi.psych.upenn.edu/nmz.html
>
>> C. Read R-intro, R help pages, and the R FAQs.
>>
>> ? ? ? ?whatever
>>
>> 3. Do not send your question to r-help unless your question is
>> about R or the base R packages that are supported by the R Core Team.
>
> There are plenty of non-base packages about which questions can be
> fairly asked on R-help! The above should not be in the posting guide.
> See below at [***]
>
>> A. Don't ask statistics questions, unless they fall into the form
>> "Which R procedure or package should I use to conduct an analysis
>> of ..." or
>> "Does anybody have a working example of procedure XYZ?" or "Can I
>> obtain XYZ result from an obect of class ZYX?"
>
> In many cases, people's problems are a combination of shaky grasp
> of R and shaky or incomplete grasp of some part of Statistics.
> A person may well suspect that their problem involves a problem
> with Statistics as such, and may well ask about the statistical
> aspect as well as the R aspect. A good answer would address both.
> Often, the poster may not be aware of the statistical difficulty;
> a good answer would pick that up and include the statistical
> explanation. For example, the unsuspecting may be unaware of
> the "linear separation" phenomenon in binary regression which can
> result in:
> ?Warning messages:
> ?1: glm.fit: algorithm did not converge
> ?2: glm.fit: fitted probabilities numerically 0 or 1 occurred
> A query about that is really a pure statistical matter, and is
> not strictly about R. Nevertheless, it arose out of using R for
> a reason which the user did not understand (and which they may
> suspect to to be due to R). So an explanation sorts it out,
> and helps them along.
>
> I would agree, however, that a question *purely* about Statistics
> would normally be out of order. E.g. "How can I prove that 1*(X==0)
> is an unbiased estimate of exp(-mu) in a Poisson distribution".
>
>> B. If you have trouble with a package from CRAN or elsewhere,
>> write to the author of that package.
>
> It depends on the trouble. I think R-help is usually a good and
> legitimate place to ask, since it is likely to come to the
> attention of several people who have used the package, and may
> have encountered the problem or understand the reasons for it.
> They may even have better solutions than the author of the package
> could provide! I have myself had the experience of discussing
> a problem with a package on R-help, locating the problem (and
> devising its solution) in the code, leading to my mailing the
> package maintainer who was not aware of the problem!
>
>> r-help might be a good place to ask, "I've been using package
>> XYZ and the author seems to have abandoned the project.
>> Does anybody know of a replacement?" Otherwise, don't.
>
> For reasons above, I don't agree with this,
>
>> Note that the Bioconductor repository is not part of "R" proper
>> and you should address questions about Bioconductor to their
>> support framework.
>
> Presumably you mean the various special lists for Bioconductor?
> In such a case, that is fair enough, since anyhone using Bioconductor
> is likely to be subscribed to such lists anyway. (But they wouldn't
> need to be told about this in the general Posting Guide).
>
> [***]
> There are many packages, however, such as combinat, boot, cluster,
> etc. which are not part of R-base (though many of them are in
> "recommended") which are in frequent use, and questions about them
> to R-help are perfectly in order (and the individual author of
> such a package does not want to be the sole recipient of frequent
> questions about it -- the R-help community can carry the load
> better with its "distributed model").
>
>> C. If you are writing code for R itself, or if you are developing a
>> ? ?package, send your question to r-devel, rather than r-help.
>
> It depends on the question!
>
>> D. For operating-system or R interface questions, there are dedicated
>> lists. See R-sig-Mac, R-sig-Debian, R-sig-Fedora, etc.
>
> Fair enough (in most cases).
>
>> ==============================
>>
>> It will be necessary to add, toward the end, the part about
>> "be polite when posting."
>
> And, since a reply is also a posting, "be polite when responding"!
>
>> And along the lines of the "No RTFM" policy, I think we should say
>> "All RTFM answers should include an exact document and section
>> number." It is certainly insulting to answer a question about plot
>> with the one line
>>
>> ?plot
>>
>> but it is not insulting to say "In ?plot, check the "Details"
>> section and run the example code."
>
> Fair enough -- and indeed this is an example of a helpful and
> sufficient (for most people) response, and therefore is not in
> the "RTFM" category.
>
>
> --------------------------------------------------------------------
> E-Mail: (Ted Harding) <Ted.Harding at manchester.ac.uk>
> Fax-to-email: +44 (0)870 094 0861
> Date: 22-Aug-10 ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? Time: 03:13:22
> ------------------------------ XFMail ------------------------------
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From Ted.Harding at manchester.ac.uk  Mon Aug 23 04:22:04 2010
From: Ted.Harding at manchester.ac.uk ( (Ted Harding))
Date: Mon, 23 Aug 2010 03:22:04 +0100 (BST)
Subject: [Rd] No RTFM?
In-Reply-To: <AANLkTi=9dHsBNALmGpyVi0mHYpDL_fH4yObJX0A2LGzL@mail.gmail.com>
Message-ID: <XFMail.100823032204.Ted.Harding@manchester.ac.uk>

On 22-Aug-10 23:29:39, Paul Johnson wrote:
> Dude:
> What's so objectionable about filling in the output of
>>systemInfo()
> ??
> What particular piece is too onerous to ask of people who
> are asking questions?
> -- 
> Paul E. Johnson
> Professor, Political Science
> 1541 Lilac Lane, Room 504
> University of Kansas

(with Cc: to r-devel)
    I presume you mean "sessionInfo()". "systemInfo()" hasn't been
    mentioned so far, I think.

[1] It may or may not be relevant to the query. If it's relevant,
    then it's fine. If not. it's a waste of space. The current
    Posting Guide already advises it under "Surprising behavior
    and bugs:", where such advice is appropriate.
    It is not appropriate for (e.g.) a query asking for advice about
    packages for multiple imputation.

[2] I am not objecting to it as such. I am questioning your proposal
    that
      1. Every question to r-help should begin with the following.
      A. Output from the command sessionInfo()
      B. Output from Sys.getlocale()
      [etc.]
    Not *every* question, as I've said before. It depends on the case.

[3] I have tried to argue for a moderate and flexible spirit in
    what is advised in the Posting Guide. I am very uncomfortable
    about proposals as prescriptive and rigid as yours seem to be.
    Users, especially beginners, are likely to be discouraged from
    posting to R-help if faced with stringent (and possibly not
    relevant) requirements on how they should post. If faced with
    responses which chastise them for not "following the rules"
    they may well be put off using R altogether.

    As I have said before, I see the function of R-help as helping,
    in as cooperative a way as possible. The function of the Posting
    Guide should likewise be to help them to write good questions,
    with advice on what mey be necessary, what useful, what not useful.

    The current Posting Guide is already quite reasonable in these
    respects, and perhaps would benefit most from being made being
    somewhat re-formatted, without essential change.

Ted.

--------------------------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding at manchester.ac.uk>
Fax-to-email: +44 (0)870 094 0861
Date: 23-Aug-10                                       Time: 03:22:01
------------------------------ XFMail ------------------------------


From pauljohn32 at gmail.com  Mon Aug 23 06:04:40 2010
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Sun, 22 Aug 2010 23:04:40 -0500
Subject: [Rd] No RTFM?
In-Reply-To: <XFMail.100823032204.Ted.Harding@manchester.ac.uk>
References: <AANLkTi=9dHsBNALmGpyVi0mHYpDL_fH4yObJX0A2LGzL@mail.gmail.com>
	<XFMail.100823032204.Ted.Harding@manchester.ac.uk>
Message-ID: <AANLkTi=eqROoqJGcT31GwO-k+KGkSG29jL0RYeoBdc+h@mail.gmail.com>

On Sun, Aug 22, 2010 at 9:22 PM, Ted Harding
<Ted.Harding at manchester.ac.uk> wrote:
>
> (with Cc: to r-devel)
> ? ?I presume you mean "sessionInfo()". "systemInfo()" hasn't been
> ? ?mentioned so far, I think.
>

brain fart. I'm old, you know :)

>. I am questioning your proposal
> ? ?that
> ? ? ?1. Every question to r-help should begin with the following.
> ? ? ?A. Output from the command sessionInfo()
> ? ? ?B. Output from Sys.getlocale()
> ? ? ?[etc.]
> ? ?Not *every* question, as I've said before. It depends on the case.

I promise this is my last post in this thread.

How about this.  I aim for more concise, direct instruction.

Hence I replace

"This guide is intended to help you get the most out of the R mailing
lists, and to avoid embarrassment. Like many responses posted on the
list, it is written in a concise manner. This is not intended to be
unfriendly - it is more a consequence of allocating the limited
available time and space to technical issues rather than to social
niceties.

The list: Remember that R is free software, constructed and maintained
by volunteers. They have various reasons for contributing software and
participating on the mailing lists, but often have limited time."

with

"People are busy, so ask your question in a useful way."

I think we need to get the most vital instructions up to the top of
the guide. And the single most vital thing is sessionInfo(), as far as
I can tell. I wish sessionInfo would just grab the locale information.

You interpret my plan as harsh/restrictive, and I don't mean it that
way.  I'm aiming for clear and understandable to tired/frustrated
people.

Suppose it is phrased it this way instead:

1. Unless you are confident that the problem you are asking about is
not affected by your OS or version of R, please include this
information with your post:

A. Output from the command sessionInfo()

B. Output from Sys.getlocale()
...


I think your experience with the befuddled users must be different
from mine. Mine are looking for a clear instruction on what to do,
they don't know what's wrong, and don't mind doing something specific
as long as they are sure you want it.

My users are perplexed by a statement like :

"Surprising behavior and bugs: What you think is a bug may be many
other things, such as a default behavior that you do not like, a
feature, an undocumented feature, or a bug in the documentation. You
do not need to commit yourself to one of these in order to ask a
question. If it is a real bug, someone will notice it. Before you post
a real bug report, make sure you read R Bugs in the R-faq. If you're
not completely and utterly sure something is a bug, post a question to
r-help, not a bug report to r-bugs - every bug report requires manual
action by one of the R-core members. Also, see Simon Tatham's essay on
How to Report Bugs Effectively.

For questions about unexpected behavior or a possible bug, you should,
at a minimum, copy and paste the output from sessionInfo() into your
message."

I don't think they get much out of this. They need to know that that
"bug" is a "fighting word" (US legal term: expression for which you
can reasonably expect to be punched in the nose, so it is not
protected free speech) for programmers and they are deeply insulted by
it, and users should never use it.  The only person who should call
something a bug is the author.  Only the Mother can say a baby is
ugly.

> [3] I have tried to argue for a moderate and flexible spirit in
> ? ?what is advised in the Posting Guide.

I agree, but can it be done more clearly and concisely.

pj


-- 
Paul E. Johnson
Professor, Political Science
1541 Lilac Lane, Room 504
University of Kansas


From landronimirc at gmail.com  Mon Aug 23 07:04:12 2010
From: landronimirc at gmail.com (Liviu Andronic)
Date: Mon, 23 Aug 2010 08:04:12 +0300
Subject: [Rd] No RTFM?
In-Reply-To: <AANLkTi=eqROoqJGcT31GwO-k+KGkSG29jL0RYeoBdc+h@mail.gmail.com>
References: <AANLkTi=9dHsBNALmGpyVi0mHYpDL_fH4yObJX0A2LGzL@mail.gmail.com>
	<XFMail.100823032204.Ted.Harding@manchester.ac.uk>
	<AANLkTi=eqROoqJGcT31GwO-k+KGkSG29jL0RYeoBdc+h@mail.gmail.com>
Message-ID: <AANLkTikhZzJh8-qiAQ-_dyb6660ZCfeR=_KKONH6mqZM@mail.gmail.com>

On Mon, Aug 23, 2010 at 7:04 AM, Paul Johnson <pauljohn32 at gmail.com> wrote:
> I can tell. I wish sessionInfo would just grab the locale information.
>
Here it does so by default: locale info is included in sessionInfo
output. Regards
Liviu


> sessionInfo()
R version 2.10.1 (2009-12-14)
x86_64-pc-linux-gnu

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] fortunes_1.3-7 IPSUR_1.0

> Sys.getlocale()
[1] "LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=C;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C"


From gavin.simpson at ucl.ac.uk  Mon Aug 23 10:37:43 2010
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Mon, 23 Aug 2010 09:37:43 +0100
Subject: [Rd] No RTFM?
In-Reply-To: <XFMail.100823032204.Ted.Harding@manchester.ac.uk>
References: <XFMail.100823032204.Ted.Harding@manchester.ac.uk>
Message-ID: <1282552663.2375.26.camel@desktop.localdomain>

On Mon, 2010-08-23 at 03:22 +0100, Ted.Harding at manchester.ac.uk wrote:
<snip />
> 
> [3] I have tried to argue for a moderate and flexible spirit in
>     what is advised in the Posting Guide. I am very uncomfortable
>     about proposals as prescriptive and rigid as yours seem to be.
>     Users, especially beginners, are likely to be discouraged from
>     posting to R-help if faced with stringent (and possibly not
>     relevant) requirements on how they should post. If faced with
>     responses which chastise them for not "following the rules"
>     they may well be put off using R altogether.
> 
>     As I have said before, I see the function of R-help as helping,
>     in as cooperative a way as possible. The function of the Posting
>     Guide should likewise be to help them to write good questions,
>     with advice on what mey be necessary, what useful, what not useful.
> 
>     The current Posting Guide is already quite reasonable in these
>     respects, and perhaps would benefit most from being made being
>     somewhat re-formatted, without essential change.
> 
> Ted.

I concur with Ted's comments above. Bugzilla has this form of
hand-holding, prescriptive format for filing bugs against software
projects. It works there where people are only supplying bug reports. I
don't see that it can work for the more free-form nature of a mailing
list.

The posting guide should be there to help people i) help themselves find
the information about R that they need, and if this hasn't helped ii)
formulate an appropriate question with the *relevant* information.
Earlier ideas in this thread suggested including a lot of extraneous
information not relevant to most R-Help questions.

I see Paul that in your reply that your aim is to make things more clear
and more concise. Perhaps the best way forward now, if you are
sufficiently motivated and have the time, would be to rewrite the
posting guide and send it to the list for comments/suggestions. IIRC
this was how the original guide was produced.

G

-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
 Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
 ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
 Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
 Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
 UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From grewe at zib.de  Mon Aug 23 12:54:19 2010
From: grewe at zib.de (Carl Martin Grewe)
Date: Mon, 23 Aug 2010 12:54:19 +0200
Subject: [Rd] segfault in embedded r after call to repldlldo1
Message-ID: <4C72535B.2070604@zib.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100823/a02f6951/attachment.ksh>

From ivo.welch at gmail.com  Sun Aug 22 17:33:51 2010
From: ivo.welch at gmail.com (ivo welch)
Date: Sun, 22 Aug 2010 11:33:51 -0400
Subject: [Rd] small syntax suggestion
Message-ID: <AANLkTimvja3=JJ-Y8yS=8K+m8ePP7XrCUTEvzg=L9bjn@mail.gmail.com>

Dear R development Team:  I really know very little, so you may ignore
this post.  I have found that my students often make the mistake of
mixing up comparisons and assignments with negative numbers:

  if (x<-3) do_something;

I parenthesize, but every once in a while, I forget and commit this
mistake, too.  so, I would suggest that R simply warn about an
ambiguity.  that is, it could suggest a space either between the < and
- , or after the <- .

  x< -3  ## means comparison already
  x<- 3  ## means assignment already
but warn when
  x<-3  ## ambiguity warning instead of assignment
  x<-(whatever)  ## ok

just a suggestion...

regards,

/iaw
----
Ivo Welch (ivo.welch at brown.edu, ivo.welch at gmail.com)


From radford at cs.toronto.edu  Mon Aug 23 15:09:57 2010
From: radford at cs.toronto.edu (Radford Neal)
Date: Mon, 23 Aug 2010 09:09:57 -0400
Subject: [Rd] Speed improvement to PROTECT, UNPROTECT, etc.
Message-ID: <20100823130957.GA13669@cs.toronto.edu>

As I mentioned in my previous message about speeding up evalList, I've
been looking at ways to speed up the R interpreter.  One sees in the
code many, many calls of PROTECT, UNPROTECT, and related functions, so
that seems like an obvious target for optimization.  Indeed, I've
found that one can speed up the interpreter by about 10% by just
changing these.

The functions are actually macros defined in Rinternals.h, but end up
just calling functions defined in memory.c (apparently as protect,
etc., but really as Rf_protect, etc.).  So there is function call
overhead every time they are used.

To get rid of the function call overhead, without generating lots of
extra code, one can redefine the macros to handled to the common case
inline, and call the function in memory.c for the uncommon cases (eg,
error on stack underflow).  Here are my versions that do this:

#define PROTECT(s) do { \
                       SEXP tmp_prot_sexp = (s); \
                       if (R_PPStackTop < R_PPStackSize) \
                           R_PPStack[R_PPStackTop++] = tmp_prot_sexp; \
                       else \
                           Rf_protect(tmp_prot_sexp); \
                   } while (0)

#define UNPROTECT(n) (R_PPStackTop >= (n) ? \
                        (void) (R_PPStackTop -= (n)) : Rf_unprotect(n))

#define PROTECT_WITH_INDEX(x,i) do { \
                                    PROTECT(x); \
                                    *(i) = R_PPStackTop - 1; \
                                } while (0)

#define REPROTECT(x,i) ( (void) (R_PPStack[i] = x) )

Unfortunately, one can't just change the definitions in Rinternals.h.
Some uses of PROTECT are in places where R_PPStack, etc. aren't
visible.  Instead, one can redefine them at the end of Defn.h, where
these variables are declared.  That alone also doesn't work, however,
because some references don't work at link time.  So instead I
redefine them in Defn.h only if USE_FAST_PROTECT_MACROS is defined.  
I define this before including Defn.h in all the .c files in the main
directory.

Another complication is that the PROTECT macro no longer returns its
argument.  One can avoid this by writing it another way, but this then
results in its argument being referenced in two places (though only
evaluated once), which seems to slow things down, presumably because
the larger amount of code generated affects cache behaviour.  Instead,
I just changed the relatively few occurrences of v = PROTECT(...) to
PROTECT(v = ...), which is the dominant idiom in the code anyway.
(In some places slightly more change is needed, as when this is in an
initializer.)

This works fine, speeding up R programs that aren't dominated by large
operations like multiplying big matrices by about 10%.  The effect is
cumulative with the change I mentioned in my previous message about
avoiding extra CONS operations in evalList, for a total speedup of
about 15%.

    Radford Neal


From b.rowlingson at lancaster.ac.uk  Mon Aug 23 15:15:07 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 23 Aug 2010 14:15:07 +0100
Subject: [Rd] small syntax suggestion
In-Reply-To: <AANLkTimvja3=JJ-Y8yS=8K+m8ePP7XrCUTEvzg=L9bjn@mail.gmail.com>
References: <AANLkTimvja3=JJ-Y8yS=8K+m8ePP7XrCUTEvzg=L9bjn@mail.gmail.com>
Message-ID: <AANLkTinwC0h+oX2QhcskS_9xRuws=X9XQ2RuGnOxVCyG@mail.gmail.com>

On Sun, Aug 22, 2010 at 4:33 PM, ivo welch <ivo.welch at gmail.com> wrote:
> Dear R development Team: ?I really know very little, so you may ignore
> this post. ?I have found that my students often make the mistake of
> mixing up comparisons and assignments with negative numbers:
>
> ?if (x<-3) do_something;
>
> I parenthesize, but every once in a while, I forget and commit this
> mistake, too. ?so, I would suggest that R simply warn about an
> ambiguity. ?that is, it could suggest a space either between the < and
> - , or after the <- .
>
> ?x< -3 ?## means comparison already
> ?x<- 3 ?## means assignment already
> but warn when
> ?x<-3 ?## ambiguity warning instead of assignment
> ?x<-(whatever) ?## ok
>
> just a suggestion...
>

 If you tell your students not to use '<-' for assignment, then they
can't make this mistake, because = for assignment has additional
restrictions on it:

 > x
 [1] 3
 > if(x=3)print("yay")
 Error: unexpected '=' in "if(x="

Anyway, if students didn't make mistakes how will they learn about debugging?

Barry


From radford at cs.toronto.edu  Mon Aug 23 15:23:04 2010
From: radford at cs.toronto.edu (Radford Neal)
Date: Mon, 23 Aug 2010 09:23:04 -0400
Subject: [Rd] Speed improvement to evalList
Message-ID: <20100823132304.GA17416@cs.toronto.edu>

Regarding my suggesting speed improvement to evalList, Martin Morgan
has commented by email to me that at one point an object is left
unprotected when COPY_TAG is called, and has wondered whether that is
safe.  I think it is safe, but the code can be changed to protect this
as well, which actually simplifies things, and could be more robust to
changes to the garbage collector.  The cost is that sometimes there is
one more call of PROTECT and UNPROTECT, but with the speed improvement
to these that I just posted, this is a minor issue.  

Martin has also pointed me to where you can get R sources via
subversion, but while I figure that out, and how to post up "diffs"
for changes, I'll put the revised evalList code below for anyone
interested...

    Radford Neal

----------------------------------------------------------------------

/* Used in eval and applyMethod (object.c) for builtin primitives,
   do_internal (names.c) for builtin .Internals
   and in evalArgs.

   'n' is the number of arguments already evaluated and hence not
   passed to evalArgs and hence to here.
 */
SEXP attribute_hidden evalList(SEXP el, SEXP rho, SEXP call, int n)
{
    SEXP head, tail, ev, h;

    head = R_NilValue;

    while (el != R_NilValue) {
	n++;

	if (CAR(el) == R_DotsSymbol) {
	    /* If we have a ... symbol, we look to see what it is bound to.
	     * If its binding is Null (i.e. zero length),
	     *	we just ignore it and return the cdr with all its expressions 
             *  evaluated.
	     * If it is bound to a ... list of promises,
	     *	we force all the promises and then splice
	     *	the list of resulting values into the return value.
	     * Anything else bound to a ... symbol is an error.
	     */
	    h = findVar(CAR(el), rho);
	    if (TYPEOF(h) == DOTSXP || h == R_NilValue) {
		while (h != R_NilValue) {
                    ev = CONS(eval(CAR(h), rho), R_NilValue);
                    if (head==R_NilValue)
                        PROTECT(head = ev);
                    else
                        SETCDR(tail, ev);
                    COPY_TAG(ev, h);
                    tail = ev;
		    h = CDR(h);
		}
	    }
	    else if (h != R_MissingArg)
		error(_("'...' used in an incorrect context"));
	} else if (CAR(el) == R_MissingArg) {
	    /* It was an empty element: most likely get here from evalArgs
	       which may have been called on part of the args. */
	    errorcall(call, _("argument %d is empty"), n);
	} else if (isSymbol(CAR(el)) && R_isMissing(CAR(el), rho)) {
	    /* It was missing */
	    errorcall(call, _("'%s' is missing"), CHAR(PRINTNAME(CAR(el)))); 
	} else {
            ev = CONS(eval(CAR(el), rho), R_NilValue);
            if (head==R_NilValue)
                PROTECT(head = ev);
            else
                SETCDR(tail, ev);
            COPY_TAG(ev, el);
            tail = ev;
	}
	el = CDR(el);
    }

    if (head!=R_NilValue) 
        UNPROTECT(1);

    return head;

} /* evalList() */


/* A slight variation of evaluating each expression in "el" in "rho". */

/* used in evalArgs, arithmetic.c, seq.c */
SEXP attribute_hidden evalListKeepMissing(SEXP el, SEXP rho)
{
    SEXP head, tail, ev, h;

    head = R_NilValue;

    while (el != R_NilValue) {

	/* If we have a ... symbol, we look to see what it is bound to.
	 * If its binding is Null (i.e. zero length)
	 *	we just ignore it and return the cdr with all its expressions evaluated;
	 * if it is bound to a ... list of promises,
	 *	we force all the promises and then splice
	 *	the list of resulting values into the return value.
	 * Anything else bound to a ... symbol is an error
	*/
	if (CAR(el) == R_DotsSymbol) {
	    h = findVar(CAR(el), rho);
	    if (TYPEOF(h) == DOTSXP || h == R_NilValue) {
		while (h != R_NilValue) {
                    if (CAR(h) == R_MissingArg) 
                        ev = CONS(R_MissingArg, R_NilValue);
                    else
                        ev = CONS(eval(CAR(h), rho), R_NilValue);
                    if (head==R_NilValue)
                        PROTECT(head = ev);
                    else
                        SETCDR(tail, ev);
                    COPY_TAG(ev, h);
                    tail = ev;
		    h = CDR(h);
		}
	    }
	    else if(h != R_MissingArg)
		error(_("'...' used in an incorrect context"));
	}
	else {
            if (CAR(el) == R_MissingArg ||
                 (isSymbol(CAR(el)) && R_isMissing(CAR(el), rho)))
                ev = CONS(R_MissingArg, R_NilValue);
            else
                ev = CONS(eval(CAR(el), rho), R_NilValue);
            if (head==R_NilValue)
                PROTECT(head = ev);
            else
                SETCDR(tail, ev);
            COPY_TAG(ev, el);
            tail = ev;
	}
	el = CDR(el);
    }

    if (head!=R_NilValue) 
        UNPROTECT(1);

    return head;
}


From pdalgd at gmail.com  Mon Aug 23 15:27:28 2010
From: pdalgd at gmail.com (peter dalgaard)
Date: Mon, 23 Aug 2010 15:27:28 +0200
Subject: [Rd] adding a built-in drop.levels option for subset() in 2.12 ?
In-Reply-To: <4C68341B.2030304@gmail.com>
References: <4C68341B.2030304@gmail.com>
Message-ID: <962DED36-3261-42AB-89BC-EC5B546DAB54@gmail.com>


On Aug 15, 2010, at 8:38 PM, Ben Bolker wrote:

> 
>  With the approach of R 2.12.0:
> 
>  with mild apologies for re-opening this perennial issue:
> is there any hope, if appropriate patches are submitted, of adding a
> drop.levels argument (with default equal to FALSE to preserve backward
> compatibility/efficiency) to the subset function ... ?
>  If not, would a patch to the documentation and/or the R FAQ be accepted?


Ben, there is now a dropLevels() _function_ in R-devel, please try it on for size.

-- 
Peter Dalgaard
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From luke at stat.uiowa.edu  Mon Aug 23 17:57:54 2010
From: luke at stat.uiowa.edu (luke at stat.uiowa.edu)
Date: Mon, 23 Aug 2010 10:57:54 -0500 (CDT)
Subject: [Rd] Speed improvement to evalList
In-Reply-To: <20100823132304.GA17416@cs.toronto.edu>
References: <20100823132304.GA17416@cs.toronto.edu>
Message-ID: <alpine.LFD.2.00.1008231057220.12761@itasca.stat.uiowa.edu>

Thanks for the suggestion.  I'll try to have a look later in the week
unless someone else gets there sooner.

luke

On Mon, 23 Aug 2010, Radford Neal wrote:

> Regarding my suggesting speed improvement to evalList, Martin Morgan
> has commented by email to me that at one point an object is left
> unprotected when COPY_TAG is called, and has wondered whether that is
> safe.  I think it is safe, but the code can be changed to protect this
> as well, which actually simplifies things, and could be more robust to
> changes to the garbage collector.  The cost is that sometimes there is
> one more call of PROTECT and UNPROTECT, but with the speed improvement
> to these that I just posted, this is a minor issue.
>
> Martin has also pointed me to where you can get R sources via
> subversion, but while I figure that out, and how to post up "diffs"
> for changes, I'll put the revised evalList code below for anyone
> interested...
>
>    Radford Neal
>
> ----------------------------------------------------------------------
>
> /* Used in eval and applyMethod (object.c) for builtin primitives,
>   do_internal (names.c) for builtin .Internals
>   and in evalArgs.
>
>   'n' is the number of arguments already evaluated and hence not
>   passed to evalArgs and hence to here.
> */
> SEXP attribute_hidden evalList(SEXP el, SEXP rho, SEXP call, int n)
> {
>    SEXP head, tail, ev, h;
>
>    head = R_NilValue;
>
>    while (el != R_NilValue) {
> 	n++;
>
> 	if (CAR(el) == R_DotsSymbol) {
> 	    /* If we have a ... symbol, we look to see what it is bound to.
> 	     * If its binding is Null (i.e. zero length),
> 	     *	we just ignore it and return the cdr with all its expressions
>             *  evaluated.
> 	     * If it is bound to a ... list of promises,
> 	     *	we force all the promises and then splice
> 	     *	the list of resulting values into the return value.
> 	     * Anything else bound to a ... symbol is an error.
> 	     */
> 	    h = findVar(CAR(el), rho);
> 	    if (TYPEOF(h) == DOTSXP || h == R_NilValue) {
> 		while (h != R_NilValue) {
>                    ev = CONS(eval(CAR(h), rho), R_NilValue);
>                    if (head==R_NilValue)
>                        PROTECT(head = ev);
>                    else
>                        SETCDR(tail, ev);
>                    COPY_TAG(ev, h);
>                    tail = ev;
> 		    h = CDR(h);
> 		}
> 	    }
> 	    else if (h != R_MissingArg)
> 		error(_("'...' used in an incorrect context"));
> 	} else if (CAR(el) == R_MissingArg) {
> 	    /* It was an empty element: most likely get here from evalArgs
> 	       which may have been called on part of the args. */
> 	    errorcall(call, _("argument %d is empty"), n);
> 	} else if (isSymbol(CAR(el)) && R_isMissing(CAR(el), rho)) {
> 	    /* It was missing */
> 	    errorcall(call, _("'%s' is missing"), CHAR(PRINTNAME(CAR(el))));
> 	} else {
>            ev = CONS(eval(CAR(el), rho), R_NilValue);
>            if (head==R_NilValue)
>                PROTECT(head = ev);
>            else
>                SETCDR(tail, ev);
>            COPY_TAG(ev, el);
>            tail = ev;
> 	}
> 	el = CDR(el);
>    }
>
>    if (head!=R_NilValue)
>        UNPROTECT(1);
>
>    return head;
>
> } /* evalList() */
>
>
> /* A slight variation of evaluating each expression in "el" in "rho". */
>
> /* used in evalArgs, arithmetic.c, seq.c */
> SEXP attribute_hidden evalListKeepMissing(SEXP el, SEXP rho)
> {
>    SEXP head, tail, ev, h;
>
>    head = R_NilValue;
>
>    while (el != R_NilValue) {
>
> 	/* If we have a ... symbol, we look to see what it is bound to.
> 	 * If its binding is Null (i.e. zero length)
> 	 *	we just ignore it and return the cdr with all its expressions evaluated;
> 	 * if it is bound to a ... list of promises,
> 	 *	we force all the promises and then splice
> 	 *	the list of resulting values into the return value.
> 	 * Anything else bound to a ... symbol is an error
> 	*/
> 	if (CAR(el) == R_DotsSymbol) {
> 	    h = findVar(CAR(el), rho);
> 	    if (TYPEOF(h) == DOTSXP || h == R_NilValue) {
> 		while (h != R_NilValue) {
>                    if (CAR(h) == R_MissingArg)
>                        ev = CONS(R_MissingArg, R_NilValue);
>                    else
>                        ev = CONS(eval(CAR(h), rho), R_NilValue);
>                    if (head==R_NilValue)
>                        PROTECT(head = ev);
>                    else
>                        SETCDR(tail, ev);
>                    COPY_TAG(ev, h);
>                    tail = ev;
> 		    h = CDR(h);
> 		}
> 	    }
> 	    else if(h != R_MissingArg)
> 		error(_("'...' used in an incorrect context"));
> 	}
> 	else {
>            if (CAR(el) == R_MissingArg ||
>                 (isSymbol(CAR(el)) && R_isMissing(CAR(el), rho)))
>                ev = CONS(R_MissingArg, R_NilValue);
>            else
>                ev = CONS(eval(CAR(el), rho), R_NilValue);
>            if (head==R_NilValue)
>                PROTECT(head = ev);
>            else
>                SETCDR(tail, ev);
>            COPY_TAG(ev, el);
>            tail = ev;
> 	}
> 	el = CDR(el);
>    }
>
>    if (head!=R_NilValue)
>        UNPROTECT(1);
>
>    return head;
> }
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Luke Tierney
Statistics and Actuarial Science
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:      luke at stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From luke at stat.uiowa.edu  Mon Aug 23 18:00:22 2010
From: luke at stat.uiowa.edu (luke at stat.uiowa.edu)
Date: Mon, 23 Aug 2010 11:00:22 -0500 (CDT)
Subject: [Rd] Speed improvement to PROTECT, UNPROTECT, etc.
In-Reply-To: <20100823130957.GA13669@cs.toronto.edu>
References: <20100823130957.GA13669@cs.toronto.edu>
Message-ID: <alpine.LFD.2.00.1008231057570.12761@itasca.stat.uiowa.edu>

I tried this several years ago thinking that is should make a
noticable difference but did not find the result warranted the change.
Compilers and architectures change, and vary, so maybe it is worth
revisiting at least on some architecture/compiler combinations.

luke

On Mon, 23 Aug 2010, Radford Neal wrote:

> As I mentioned in my previous message about speeding up evalList, I've
> been looking at ways to speed up the R interpreter.  One sees in the
> code many, many calls of PROTECT, UNPROTECT, and related functions, so
> that seems like an obvious target for optimization.  Indeed, I've
> found that one can speed up the interpreter by about 10% by just
> changing these.
>
> The functions are actually macros defined in Rinternals.h, but end up
> just calling functions defined in memory.c (apparently as protect,
> etc., but really as Rf_protect, etc.).  So there is function call
> overhead every time they are used.
>
> To get rid of the function call overhead, without generating lots of
> extra code, one can redefine the macros to handled to the common case
> inline, and call the function in memory.c for the uncommon cases (eg,
> error on stack underflow).  Here are my versions that do this:
>
> #define PROTECT(s) do { \
>                       SEXP tmp_prot_sexp = (s); \
>                       if (R_PPStackTop < R_PPStackSize) \
>                           R_PPStack[R_PPStackTop++] = tmp_prot_sexp; \
>                       else \
>                           Rf_protect(tmp_prot_sexp); \
>                   } while (0)
>
> #define UNPROTECT(n) (R_PPStackTop >= (n) ? \
>                        (void) (R_PPStackTop -= (n)) : Rf_unprotect(n))
>
> #define PROTECT_WITH_INDEX(x,i) do { \
>                                    PROTECT(x); \
>                                    *(i) = R_PPStackTop - 1; \
>                                } while (0)
>
> #define REPROTECT(x,i) ( (void) (R_PPStack[i] = x) )
>
> Unfortunately, one can't just change the definitions in Rinternals.h.
> Some uses of PROTECT are in places where R_PPStack, etc. aren't
> visible.  Instead, one can redefine them at the end of Defn.h, where
> these variables are declared.  That alone also doesn't work, however,
> because some references don't work at link time.  So instead I
> redefine them in Defn.h only if USE_FAST_PROTECT_MACROS is defined.
> I define this before including Defn.h in all the .c files in the main
> directory.
>
> Another complication is that the PROTECT macro no longer returns its
> argument.  One can avoid this by writing it another way, but this then
> results in its argument being referenced in two places (though only
> evaluated once), which seems to slow things down, presumably because
> the larger amount of code generated affects cache behaviour.  Instead,
> I just changed the relatively few occurrences of v = PROTECT(...) to
> PROTECT(v = ...), which is the dominant idiom in the code anyway.
> (In some places slightly more change is needed, as when this is in an
> initializer.)
>
> This works fine, speeding up R programs that aren't dominated by large
> operations like multiplying big matrices by about 10%.  The effect is
> cumulative with the change I mentioned in my previous message about
> avoiding extra CONS operations in evalList, for a total speedup of
> about 15%.
>
>    Radford Neal
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Luke Tierney
Statistics and Actuarial Science
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:      luke at stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From cubranic at stat.ubc.ca  Mon Aug 23 19:06:06 2010
From: cubranic at stat.ubc.ca (Davor Cubranic)
Date: Mon, 23 Aug 2010 10:06:06 -0700
Subject: [Rd] small syntax suggestion
In-Reply-To: <AANLkTinwC0h+oX2QhcskS_9xRuws=X9XQ2RuGnOxVCyG@mail.gmail.com>
References: <AANLkTimvja3=JJ-Y8yS=8K+m8ePP7XrCUTEvzg=L9bjn@mail.gmail.com>
	<AANLkTinwC0h+oX2QhcskS_9xRuws=X9XQ2RuGnOxVCyG@mail.gmail.com>
Message-ID: <04831FEE-4137-484E-8942-427085663D2F@stat.ubc.ca>

On 2010-08-23, at 6:15 AM, Barry Rowlingson wrote:

> On Sun, Aug 22, 2010 at 4:33 PM, ivo welch <ivo.welch at gmail.com> wrote:
>> I have found that my students often make the mistake of
>> mixing up comparisons and assignments with negative numbers:
>> 
>>  if (x<-3) do_something;
> 
> If you tell your students not to use '<-' for assignment, then they
> can't make this mistake, because = for assignment has additional
> restrictions on it:

The students are trying to *compare* to a negative number, and trip on R's parsing of "<-". They could use '=' for assignment all they want (which I thought is being discouraged as a code style these days, BTW), and they'll still run into this problem.

Davor

From simon.urbanek at r-project.org  Mon Aug 23 19:12:41 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 23 Aug 2010 13:12:41 -0400
Subject: [Rd] Handle RAWSXP in inspect.c:typename()
In-Reply-To: <AANLkTi=Xn0mJAjyPB-S4fcbWLwKOJirvAX_7DmUJTYwW@mail.gmail.com>
References: <AANLkTi=Xn0mJAjyPB-S4fcbWLwKOJirvAX_7DmUJTYwW@mail.gmail.com>
Message-ID: <715DF39F-655E-43ED-8611-EBB2C901B61C@r-project.org>


On Aug 22, 2010, at 4:47 AM, Rory Winston wrote:

> Hi all
> 
> I had written a gdb macro to dump the string representation of an SEXPREC
> type when I realised everything I needed was in inspect.c already in the
> typename() function. However, the typename function doesnt handle the RAWSXP
> type, so if possible, could the following patch be applied (I've just put in
> inline as it is a trivial 1-liner)?
> 

... it' just a part of the story - RAWSXPs are not handled at all - not even in inspect itself (I'm not sure how I missed that ;)). I have added RAW support to inspect in R-devel now.

Thanks,
Simon


> Index: src/main/inspect.c
> ===================================================================
> --- src/main/inspect.c    (revision 52221)
> +++ src/main/inspect.c    (working copy)
> @@ -63,6 +63,7 @@
>     case EXTPTRSXP:    return "EXTPTRSXP";
>     case WEAKREFSXP:    return "WEAKREFSXP";
>     case S4SXP:        return "S4SXP";
> +    case RAWSXP:    return "RAWSXP";
>     default:
>     return "<unknown>";
>     }
> 
> 
> Best
> -- Rory
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From radford at cs.toronto.edu  Mon Aug 23 19:19:01 2010
From: radford at cs.toronto.edu (Radford Neal)
Date: Mon, 23 Aug 2010 13:19:01 -0400
Subject: [Rd] Speeding up sum and prod
Message-ID: <20100823171901.GA23722@cs.toronto.edu>

Looking for more ways to speed up R, I've found that large
improvements are possible in the speed of "sum" and "prod" for long
real vectors.  

Here is a little test with R version 2.11.1 on an Intel Linux system

> a <- seq(0,1,length=1000)
> system.time({for (i in 1:1000000) b <- sum(a)})
   user  system elapsed
  4.800   0.010   4.817
> system.time({for (i in 1:1000000) b <- sum(a,na.rm=TRUE)})
   user  system elapsed
  8.240   0.030   8.269

and here is the same with "sum" and "prod" modified as described below:

> a <- seq(0,1,length=1000)
> system.time({for (i in 1:1000000) b <- sum(a)})
   user  system elapsed
   1.81    0.00    1.81
> system.time({for (i in 1:1000000) b <- sum(a,na.rm=TRUE)})
   user  system elapsed
  7.250   0.010   7.259

That's an improvement by a factor of 2.65 for real vectors of length
1000 with na.rm=FALSE (the default), and an improvement of 12% when
na.rm=TRUE.  Of course, the improvement is smaller for very short
vectors.

The biggest reason for the improvement is that the current code (in
2.11.1 and in the development release of 2010-08-19) makes a costly
call of ISNAN even when the option is na.rm=FALSE.  The inner loop
can also be sped up a bit in other respects.

Here is the old procedure, in src/main/summary.c:

static Rboolean rsum(double *x, int n, double *value, Rboolean narm)
{
    LDOUBLE s = 0.0;
    int i;
    Rboolean updated = FALSE;

    for (i = 0; i < n; i++) {
        if (!ISNAN(x[i]) || !narm) {
            if(!updated) updated = TRUE;
            s += x[i];
        }
    }
    *value = s;

    return(updated);
}

and here is my modified version:

static Rboolean rsum(double *x, int n, double *value, Rboolean narm)
{
    LDOUBLE s = 0.0;
    int i;
    Rboolean updated = FALSE;

    if (narm) {
        for (i = 0; i < n; i++) {
            if (!ISNAN(x[i])) {
                s += x[i];
                updated = TRUE;
                break;
            }
        }
        for (i = i+1; i < n; i++) {
            if (!ISNAN(x[i]))
                s += x[i];
        }
    } else {
        for (i = 0; i < n; i++)
            s += x[i];
        if (n>0) updated = TRUE;
    }

    *value = s;

    return(updated);
}

An entirely analogous improvement can be made to the "prod" function.

   Radford Neal


From b.rowlingson at lancaster.ac.uk  Mon Aug 23 19:50:44 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon, 23 Aug 2010 18:50:44 +0100
Subject: [Rd] small syntax suggestion
In-Reply-To: <04831FEE-4137-484E-8942-427085663D2F@stat.ubc.ca>
References: <AANLkTimvja3=JJ-Y8yS=8K+m8ePP7XrCUTEvzg=L9bjn@mail.gmail.com>
	<AANLkTinwC0h+oX2QhcskS_9xRuws=X9XQ2RuGnOxVCyG@mail.gmail.com>
	<04831FEE-4137-484E-8942-427085663D2F@stat.ubc.ca>
Message-ID: <AANLkTinazqHq2fpE68dxS0UM1DM1FBpvrx5mBSG2Gqz7@mail.gmail.com>

On Mon, Aug 23, 2010 at 6:06 PM, Davor Cubranic <cubranic at stat.ubc.ca> wrote:

> The students are trying to *compare* to a negative number, and trip on R's parsing of "<-". They could use '=' for assignment all they want (which I thought is being discouraged as a code style these days, BTW), and they'll still run into this problem.

 Oops yes, negative logic assumption from me.

 Okay, back to the question...

 Looks tricky, because if(x=2){...} fails because of syntax. There's
stuff in gram.y that makes x=1 a bit special, and only lets it occur
as a top-level expression. However x<-1 is allowed anywhere an
expression can be. Both expressions then call the same 'primitive'
function. At that point I'm not sure how the code could find out if
it's being called from a <- or an = assignment. And then whether its a
top-level expression or not. And this would need checking on every <-
call, which could be a problem...

 Barry


From simon.urbanek at r-project.org  Mon Aug 23 20:54:46 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 23 Aug 2010 14:54:46 -0400
Subject: [Rd] Speeding up sum and prod
In-Reply-To: <20100823171901.GA23722@cs.toronto.edu>
References: <20100823171901.GA23722@cs.toronto.edu>
Message-ID: <82A47EDF-FE52-4F58-AC1A-62AA17EDB4BD@r-project.org>

On Aug 23, 2010, at 1:19 PM, Radford Neal wrote:

> Looking for more ways to speed up R, I've found that large
> improvements are possible in the speed of "sum" and "prod" for long
> real vectors.  
> 

The results are likely very compiler- and architecture specific. On my machine [x86_64, OS X 10.6] your version is actually slower for narm (the more you optimize the more assumptions you are making which may turn out to be false):

baseline:
> a <- seq(0,1,length=1000)
> system.time({for (i in 1:1000000) b <- sum(a)})
   user  system elapsed 
  2.412   0.018   2.431 
> system.time({for (i in 1:1000000) b <- sum(a,na.rm=TRUE)})
   user  system elapsed 
  2.510   0.001   2.509 

RN version:
> a <- seq(0,1,length=1000)
> system.time({for (i in 1:1000000) b <- sum(a)})
   user  system elapsed 
  1.691   0.004   1.694 
> system.time({for (i in 1:1000000) b <- sum(a,na.rm=TRUE)})
   user  system elapsed 
  3.527   0.001   3.528 

If you simply take out the narm check and don't mess with updated you get to a more reasonable:
> a <- seq(0,1,length=1000)
> system.time({for (i in 1:1000000) b <- sum(a)})
   user  system elapsed 
  1.688   0.003   1.691 
> system.time({for (i in 1:1000000) b <- sum(a,na.rm=TRUE)})
   user  system elapsed 
  2.522   0.000   2.522 


But just to bring things into perspective -- simply changing the compiler [here just for that one file with still the same optimization level] will give you:
> a <- seq(0,1,length=1000)
> system.time({for (i in 1:1000000) b <- sum(a)})
   user  system elapsed 
  5.098   0.003   5.102 
> system.time({for (i in 1:1000000) b <- sum(a,na.rm=TRUE)})
   user  system elapsed 
  5.213   0.000   5.214 

... and using the original (unmodified) R code with a more optimized flags will give you
> a <- seq(0,1,length=1000)
> system.time({for (i in 1:1000000) b <- sum(a)})
   user  system elapsed 
  1.835   0.003   1.838 
> system.time({for (i in 1:1000000) b <- sum(a,na.rm=TRUE)})
   user  system elapsed 
  2.473   0.001   2.474 

... and the "optimal" version above (3rd) with the same optimization settings:

> a <- seq(0,1,length=1000)
> system.time({for (i in 1:1000000) b <- sum(a)})
   user  system elapsed 
  1.670   0.003   1.673 
> system.time({for (i in 1:1000000) b <- sum(a,na.rm=TRUE)})
   user  system elapsed 
  5.555   0.001   5.556 

... so you just can't win ... 

Cheers,
Simon



> Here is a little test with R version 2.11.1 on an Intel Linux system
> 
>> a <- seq(0,1,length=1000)
>> system.time({for (i in 1:1000000) b <- sum(a)})
>   user  system elapsed
>  4.800   0.010   4.817
>> system.time({for (i in 1:1000000) b <- sum(a,na.rm=TRUE)})
>   user  system elapsed
>  8.240   0.030   8.269
> 
> and here is the same with "sum" and "prod" modified as described below:
> 
>> a <- seq(0,1,length=1000)
>> system.time({for (i in 1:1000000) b <- sum(a)})
>   user  system elapsed
>   1.81    0.00    1.81
>> system.time({for (i in 1:1000000) b <- sum(a,na.rm=TRUE)})
>   user  system elapsed
>  7.250   0.010   7.259
> 
> That's an improvement by a factor of 2.65 for real vectors of length
> 1000 with na.rm=FALSE (the default), and an improvement of 12% when
> na.rm=TRUE.  Of course, the improvement is smaller for very short
> vectors.
> 
> The biggest reason for the improvement is that the current code (in
> 2.11.1 and in the development release of 2010-08-19) makes a costly
> call of ISNAN even when the option is na.rm=FALSE.  The inner loop
> can also be sped up a bit in other respects.
> 
> Here is the old procedure, in src/main/summary.c:
> 
> static Rboolean rsum(double *x, int n, double *value, Rboolean narm)
> {
>    LDOUBLE s = 0.0;
>    int i;
>    Rboolean updated = FALSE;
> 
>    for (i = 0; i < n; i++) {
>        if (!ISNAN(x[i]) || !narm) {
>            if(!updated) updated = TRUE;
>            s += x[i];
>        }
>    }
>    *value = s;
> 
>    return(updated);
> }
> 
> and here is my modified version:
> 
> static Rboolean rsum(double *x, int n, double *value, Rboolean narm)
> {
>    LDOUBLE s = 0.0;
>    int i;
>    Rboolean updated = FALSE;
> 
>    if (narm) {
>        for (i = 0; i < n; i++) {
>            if (!ISNAN(x[i])) {
>                s += x[i];
>                updated = TRUE;
>                break;
>            }
>        }
>        for (i = i+1; i < n; i++) {
>            if (!ISNAN(x[i]))
>                s += x[i];
>        }
>    } else {
>        for (i = 0; i < n; i++)
>            s += x[i];
>        if (n>0) updated = TRUE;
>    }
> 
>    *value = s;
> 
>    return(updated);
> }
> 
> An entirely analogous improvement can be made to the "prod" function.
> 
>   Radford Neal
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From Ted.Harding at manchester.ac.uk  Mon Aug 23 21:13:30 2010
From: Ted.Harding at manchester.ac.uk ( (Ted Harding))
Date: Mon, 23 Aug 2010 20:13:30 +0100 (BST)
Subject: [Rd] small syntax suggestion
In-Reply-To: <AANLkTinazqHq2fpE68dxS0UM1DM1FBpvrx5mBSG2Gqz7@mail.gmail.com>
Message-ID: <XFMail.100823201330.Ted.Harding@manchester.ac.uk>

On 23-Aug-10 17:50:44, Barry Rowlingson wrote:
> On Mon, Aug 23, 2010 at 6:06 PM, Davor Cubranic <cubranic at stat.ubc.ca>
> wrote:
> 
>> The students are trying to *compare* to a negative number, and
>> trip on> R's parsing of "<-". They could use '=' for assignment
>> all they want (which I thought is being discouraged as a code style
>> these days, BTW), and they'll still run into this problem.
> 
>  Oops yes, negative logic assumption from me.
> 
>  Okay, back to the question...
> 
>  Looks tricky, because if(x=2){...} fails because of syntax.
>  There's stuff in gram.y that makes x=1 a bit special, and only
>  lets it occur as a top-level expression. However x<-1 is allowed
>  anywhere an expression can be. Both expressions then call the
>  same 'primitive' function. At that point I'm not sure how the
>  code could find out if it's being called from a <- or an =
>  assignment. And then whether its a top-level expression or not.
>  And this would need checking on every <- call, which could be
>  a problem...
> 
>  Barry

Indeed! R has a number of these tricky little syntatic traps,
perhaps especially where precedence or operators is concerned.
For example:

  1:10-1
  # [1] 0 1 2 3 4 5 6 7 8 9
  1-1:10
  # [1]  0 -1 -2 -3 -4 -5 -6 -7 -8 -9
  -1:10
  # [1] -1  0  1  2  3  4  5  6  7  8  9 10
  1+ -1:10
  # [1]  0  1  2  3  4  5  6  7  8  9 10 11
  1+ -(1:10)
  # [1]  0 -1 -2 -3 -4 -5 -6 -7 -8 -9

In due course people will learn (most of) the details of
precedence, but certainly at the beginning stage I would
strongly recommend putting brackets round *anything* which
is to be considered as an entity, just to avoid getting
things wrong. So, with the item in the original query:

  if (x<-3) do_something;

if they wrote it as

  if (x<(-3)) do_something;

there would be no problem (and no doubt about what went
with what). Of course in complicated expressions this could
induce an episode of ocular lispopia, but apart from that
it's safe! It's certainly something I tend to do even now,
simply for the sake of readability (aka "visual parsing").

Ted.

--------------------------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding at manchester.ac.uk>
Fax-to-email: +44 (0)870 094 0861
Date: 23-Aug-10                                       Time: 20:13:26
------------------------------ XFMail ------------------------------


From phgrosjean at sciviews.org  Mon Aug 23 22:27:24 2010
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Mon, 23 Aug 2010 22:27:24 +0200
Subject: [Rd] small syntax suggestion
In-Reply-To: <04831FEE-4137-484E-8942-427085663D2F@stat.ubc.ca>
References: <AANLkTimvja3=JJ-Y8yS=8K+m8ePP7XrCUTEvzg=L9bjn@mail.gmail.com>	<AANLkTinwC0h+oX2QhcskS_9xRuws=X9XQ2RuGnOxVCyG@mail.gmail.com>
	<04831FEE-4137-484E-8942-427085663D2F@stat.ubc.ca>
Message-ID: <4C72D9AC.1080906@sciviews.org>

I tell to my students that it is very important (not only for 
legibility) to place spaces between operands. They have to write such a 
code like this:

if (x < -3) do_something

That way, there is no ambiguity. Don't you think it's important to write 
clear code, including by using spaces where it makes it easier to 
read,... and less ambiguous, as you just realize?

Best,

Philippe Grosjean

On 23/08/10 19:06, Davor Cubranic wrote:
> On 2010-08-23, at 6:15 AM, Barry Rowlingson wrote:
>
>> On Sun, Aug 22, 2010 at 4:33 PM, ivo welch<ivo.welch at gmail.com>  wrote:
>>> I have found that my students often make the mistake of
>>> mixing up comparisons and assignments with negative numbers:
>>>
>>>   if (x<-3) do_something;
>>
>> If you tell your students not to use '<-' for assignment, then they
>> can't make this mistake, because = for assignment has additional
>> restrictions on it:
>
> The students are trying to *compare* to a negative number, and trip on R's parsing of "<-". They could use '=' for assignment all they want (which I thought is being discouraged as a code style these days, BTW), and they'll still run into this problem.
>
> Davor
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From radford at cs.toronto.edu  Mon Aug 23 22:50:07 2010
From: radford at cs.toronto.edu (Radford Neal)
Date: Mon, 23 Aug 2010 16:50:07 -0400
Subject: [Rd] Speeding up matrix multiplies
Message-ID: <20100823205007.GA26105@cs.toronto.edu>

I've looked at the code for matrix multiplies in R, and found that it
can speeded up quite a bit, for multiplies that are really vector dot
products, and for other multiplies in which the result matrix is small.

Here's my test program:

u <- seq(0,1,length=1000)
v <- seq(0,2,length=1000)

A2 <- matrix(2.1,2,1000)
A5 <- matrix(2.1,5,1000)
B3 <- matrix(3.2,1000,3)

A4 <- matrix(2.1,4,1000)
B4 <- matrix(3.2,1000,4)

print(system.time ({for (i in 1:100000) w <- u %*% v}))
print(system.time ({for (i in 1:100000) w <- A5 %*% v}))
print(system.time ({for (i in 1:100000) R <- A2 %*% B3}))
print(system.time ({for (i in 1:100000) R <- A5 %*% B3}))
print(system.time ({for (i in 1:100000) R <- A4 %*% B4}))

Here are the five system.time results above using R 2.11.1:

   user  system elapsed
  1.680   0.000   1.683
   user  system elapsed
  4.350   0.000   4.349
   user  system elapsed
  4.820   0.000   4.818
   user  system elapsed
  7.370   0.020   7.383
   user  system elapsed
  7.990   0.000   7.991

and here are the results with my modified version of R 2.11.1:

   user  system elapsed
  0.270   0.000   0.271
   user  system elapsed
  1.290   0.000   1.287
   user  system elapsed
  1.080   0.000   1.086
   user  system elapsed
  3.640   0.000   3.642
   user  system elapsed
  7.950   0.000   7.953

The main issue here is again ISNAN.  The R code doesn't trust the
Fortran routine it calls to handle NA and NaN correctly, so it checks
whether the arguments have any NAs or NaNs, and if so does the matrix
multiply itself, with simple nested loops.  For multiplies in which
the number of elements in the result matrix is large, this check will
take a negligible amount of time.  But otherwise it can drastically
slow things down.  This is true in particular for dot products, of a
1xN times an Nx1 matrix, giving a 1x1 result.

I changed the code to handle dot product specially, with no need for
ISNAN checks, and otherwise to go straight to the nested loop code
(bypassing Fortran and the ISNAN checks) if the result matrix has no
more than 15 elements.  One can see that the times are much improved
above, except of course for the multiply that produces a 4x4 result,
which takes the same amount of time as before, since nothing is
different for that.  From the results, it seems that a threshold a bit
above 15 might be even better, though this will of course depend on
the architecture, compiler, etc.

Simon Urbaneck points out in reply to my message about speeding up
"sum" and "prod" that the effects of changes like this depend on the
machine architecure, compiler, etc.  This is of course true.  The
magnitude of variation in his results (not the absolute times, but the
relative times of different versions) is rather larger than one would
expect, though.  Perhaps his time measurements were affected by random
factors like system load, or perhaps they are due to non-random but
essentially arbitrary factors like the exact alignment of code
generated by the C compiler, which could change with even unrelated
modifications to the program.

The changes that I made seem generally desirable for any architecture,
or will at least make things no worse (the code expansion is trivial),
apart from the possibility of such arbitrary factors.  I'm not doing
anything like manually unrolling loops, or replacing array indexing
with pointer arithmetic, which might be seen as undesirable attempts
at out-smarting the optimizer.

The times above are for an Intel Linux machine with gcc version below:

Using built-in specs.
Target: i486-linux-gnu
Configured with: ../src/configure -v --enable-languages=c,c++,fortran,objc,obj-c++,treelang --prefix=/usr --enable-shared --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --enable-nls --with-gxx-include-dir=/usr/include/c++/4.2 --program-suffix=-4.2 --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --enable-mpfr --enable-targets=all --enable-checking=release --build=i486-linux-gnu --host=i486-linux-gnu --target=i486-linux-gnu
Thread model: posix
gcc version 4.2.4 (Ubuntu 4.2.4-1ubuntu4)

I didn't change any R configuration options regarding compilation.

Below is my modified version of the matprod function in src/main/array.c.

   Radford Neal

------------------------------------------------------------------------

static void matprod(double *x, int nrx, int ncx,
		    double *y, int nry, int ncy, double *z)
{
    char *transa = "N", *transb = "N";
    int i,  j, k;
    double one = 1.0, zero = 0.0;
    LDOUBLE sum;
    Rboolean do_it_here;

    /* NOTE: ncx must be equal to nry. */

    if (nrx==1 && ncy==1) {

        /* Do dot product quickly. */

        sum = 0.0;
        for (i = 0; i<ncx; i++)
            sum += x[i] * y[i];
        z[0] = sum;

    } else if (nrx > 0 && ncx > 0 && nry > 0 && ncy > 0) {

        /* Faster to just do it here if the result is small, especially
           considering the NA/NaN check below. */

        do_it_here = nrx*ncy <= 15;

	/* Don't trust the BLAS to handle NA/NaNs correctly: PR#4582
	 * The test is only O(n) here
	 */

        if (!do_it_here)
            for (i = 0; i < nrx*ncx; i++)
	        if (ISNAN(x[i])) { do_it_here = TRUE; break; }
	if (!do_it_here)
	    for (i = 0; i < nry*ncy; i++)
		if (ISNAN(y[i])) { do_it_here = TRUE; break; }

	if (do_it_here) {
	    for (i = 0; i < nrx; i++)
		for (k = 0; k < ncy; k++) {
		    sum = 0.0;
		    for (j = 0; j < ncx; j++)
			sum += x[i + j * nrx] * y[j + k * nry];
		    z[i + k * nrx] = sum;
		}
	} else
	    F77_CALL(dgemm)(transa, transb, &nrx, &ncy, &ncx, &one,
			    x, &nrx, y, &nry, &zero, z, &nrx);

    } else /* zero-extent operations should return zeroes */

	for(i = 0; i < nrx*ncy; i++) z[i] = 0;
}


From hb at stat.berkeley.edu  Mon Aug 23 23:33:37 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Mon, 23 Aug 2010 14:33:37 -0700
Subject: [Rd] Internal state indicating if a data object has NAs/no
 NAs/not sure (Was: Re: Speeding up matrix multiplies)
Message-ID: <AANLkTiktc9aU3M=j-AmOEB046w9DjLm_3vzqvW8FLev+@mail.gmail.com>

Hi, I'm just following your messages the overhead that the code for
dealing with possible NA/NaN values brings.  When I was setting up
part of the matrixStats package, I've also though about this.  I was
thinking of having an additional logical argument 'hasNA'/'has.na'
where you as a user can specify whether there is NA/NaN:s or not,
allowing the code to avoid it or not.  Of course, if hasNA=FALSE but
there really are NAs you'll get very funny results.

Even better would be if there would be an internal state attached to
the basic data types in R indicating one of three states:

(i) Has NAs: we know there exist NA/NaN values,
(ii) Has No NAs: we know they do *not* exist,
(iii) Not Sure: we are uncertain, i.e. it may be either (i) or (ii).

This would allow one to optimize the internal code further, but if
ignored everything is backward compatible.  The default state should
be (iii), which would be backward compatible with all existing code.
For instance y <- sum(x, na.rm=FALSE) would return NA immediately if
the state of 'x' is "Has NAs".

Then different computational algorithms are free to set the state, if
they know it.  For instance, matrixStats::anyMissing(x) would flag the
"x" object (i) if returning TRUE and (ii) if returning FALSE.  Next
time it is called, the response could be instant/O(1).  Similarly, y
<- rowSums(x, na.rm=TRUE/FALSE) can set the state on y, and so on.

Just some thoughts

/Henrik


On Mon, Aug 23, 2010 at 1:50 PM, Radford Neal <radford at cs.toronto.edu> wrote:
> I've looked at the code for matrix multiplies in R, and found that it
> can speeded up quite a bit, for multiplies that are really vector dot
> products, and for other multiplies in which the result matrix is small.
>
> Here's my test program:
>
> u <- seq(0,1,length=1000)
> v <- seq(0,2,length=1000)
>
> A2 <- matrix(2.1,2,1000)
> A5 <- matrix(2.1,5,1000)
> B3 <- matrix(3.2,1000,3)
>
> A4 <- matrix(2.1,4,1000)
> B4 <- matrix(3.2,1000,4)
>
> print(system.time ({for (i in 1:100000) w <- u %*% v}))
> print(system.time ({for (i in 1:100000) w <- A5 %*% v}))
> print(system.time ({for (i in 1:100000) R <- A2 %*% B3}))
> print(system.time ({for (i in 1:100000) R <- A5 %*% B3}))
> print(system.time ({for (i in 1:100000) R <- A4 %*% B4}))
>
> Here are the five system.time results above using R 2.11.1:
>
> ? user ?system elapsed
> ?1.680 ? 0.000 ? 1.683
> ? user ?system elapsed
> ?4.350 ? 0.000 ? 4.349
> ? user ?system elapsed
> ?4.820 ? 0.000 ? 4.818
> ? user ?system elapsed
> ?7.370 ? 0.020 ? 7.383
> ? user ?system elapsed
> ?7.990 ? 0.000 ? 7.991
>
> and here are the results with my modified version of R 2.11.1:
>
> ? user ?system elapsed
> ?0.270 ? 0.000 ? 0.271
> ? user ?system elapsed
> ?1.290 ? 0.000 ? 1.287
> ? user ?system elapsed
> ?1.080 ? 0.000 ? 1.086
> ? user ?system elapsed
> ?3.640 ? 0.000 ? 3.642
> ? user ?system elapsed
> ?7.950 ? 0.000 ? 7.953
>
> The main issue here is again ISNAN. ?The R code doesn't trust the
> Fortran routine it calls to handle NA and NaN correctly, so it checks
> whether the arguments have any NAs or NaNs, and if so does the matrix
> multiply itself, with simple nested loops. ?For multiplies in which
> the number of elements in the result matrix is large, this check will
> take a negligible amount of time. ?But otherwise it can drastically
> slow things down. ?This is true in particular for dot products, of a
> 1xN times an Nx1 matrix, giving a 1x1 result.
>
> I changed the code to handle dot product specially, with no need for
> ISNAN checks, and otherwise to go straight to the nested loop code
> (bypassing Fortran and the ISNAN checks) if the result matrix has no
> more than 15 elements. ?One can see that the times are much improved
> above, except of course for the multiply that produces a 4x4 result,
> which takes the same amount of time as before, since nothing is
> different for that. ?From the results, it seems that a threshold a bit
> above 15 might be even better, though this will of course depend on
> the architecture, compiler, etc.
>
> Simon Urbaneck points out in reply to my message about speeding up
> "sum" and "prod" that the effects of changes like this depend on the
> machine architecure, compiler, etc. ?This is of course true. ?The
> magnitude of variation in his results (not the absolute times, but the
> relative times of different versions) is rather larger than one would
> expect, though. ?Perhaps his time measurements were affected by random
> factors like system load, or perhaps they are due to non-random but
> essentially arbitrary factors like the exact alignment of code
> generated by the C compiler, which could change with even unrelated
> modifications to the program.
>
> The changes that I made seem generally desirable for any architecture,
> or will at least make things no worse (the code expansion is trivial),
> apart from the possibility of such arbitrary factors. ?I'm not doing
> anything like manually unrolling loops, or replacing array indexing
> with pointer arithmetic, which might be seen as undesirable attempts
> at out-smarting the optimizer.
>
> The times above are for an Intel Linux machine with gcc version below:
>
> Using built-in specs.
> Target: i486-linux-gnu
> Configured with: ../src/configure -v --enable-languages=c,c++,fortran,objc,obj-c++,treelang --prefix=/usr --enable-shared --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --enable-nls --with-gxx-include-dir=/usr/include/c++/4.2 --program-suffix=-4.2 --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --enable-mpfr --enable-targets=all --enable-checking=release --build=i486-linux-gnu --host=i486-linux-gnu --target=i486-linux-gnu
> Thread model: posix
> gcc version 4.2.4 (Ubuntu 4.2.4-1ubuntu4)
>
> I didn't change any R configuration options regarding compilation.
>
> Below is my modified version of the matprod function in src/main/array.c.
>
> ? Radford Neal
>
> ------------------------------------------------------------------------
>
> static void matprod(double *x, int nrx, int ncx,
> ? ? ? ? ? ? ? ? ? ?double *y, int nry, int ncy, double *z)
> {
> ? ?char *transa = "N", *transb = "N";
> ? ?int i, ?j, k;
> ? ?double one = 1.0, zero = 0.0;
> ? ?LDOUBLE sum;
> ? ?Rboolean do_it_here;
>
> ? ?/* NOTE: ncx must be equal to nry. */
>
> ? ?if (nrx==1 && ncy==1) {
>
> ? ? ? ?/* Do dot product quickly. */
>
> ? ? ? ?sum = 0.0;
> ? ? ? ?for (i = 0; i<ncx; i++)
> ? ? ? ? ? ?sum += x[i] * y[i];
> ? ? ? ?z[0] = sum;
>
> ? ?} else if (nrx > 0 && ncx > 0 && nry > 0 && ncy > 0) {
>
> ? ? ? ?/* Faster to just do it here if the result is small, especially
> ? ? ? ? ? considering the NA/NaN check below. */
>
> ? ? ? ?do_it_here = nrx*ncy <= 15;
>
> ? ? ? ?/* Don't trust the BLAS to handle NA/NaNs correctly: PR#4582
> ? ? ? ? * The test is only O(n) here
> ? ? ? ? */
>
> ? ? ? ?if (!do_it_here)
> ? ? ? ? ? ?for (i = 0; i < nrx*ncx; i++)
> ? ? ? ? ? ? ? ?if (ISNAN(x[i])) { do_it_here = TRUE; break; }
> ? ? ? ?if (!do_it_here)
> ? ? ? ? ? ?for (i = 0; i < nry*ncy; i++)
> ? ? ? ? ? ? ? ?if (ISNAN(y[i])) { do_it_here = TRUE; break; }
>
> ? ? ? ?if (do_it_here) {
> ? ? ? ? ? ?for (i = 0; i < nrx; i++)
> ? ? ? ? ? ? ? ?for (k = 0; k < ncy; k++) {
> ? ? ? ? ? ? ? ? ? ?sum = 0.0;
> ? ? ? ? ? ? ? ? ? ?for (j = 0; j < ncx; j++)
> ? ? ? ? ? ? ? ? ? ? ? ?sum += x[i + j * nrx] * y[j + k * nry];
> ? ? ? ? ? ? ? ? ? ?z[i + k * nrx] = sum;
> ? ? ? ? ? ? ? ?}
> ? ? ? ?} else
> ? ? ? ? ? ?F77_CALL(dgemm)(transa, transb, &nrx, &ncy, &ncx, &one,
> ? ? ? ? ? ? ? ? ? ? ? ? ? ?x, &nrx, y, &nry, &zero, z, &nrx);
>
> ? ?} else /* zero-extent operations should return zeroes */
>
> ? ? ? ?for(i = 0; i < nrx*ncy; i++) z[i] = 0;
> }
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From rory.winston at gmail.com  Mon Aug 23 23:46:31 2010
From: rory.winston at gmail.com (Rory Winston)
Date: Tue, 24 Aug 2010 07:46:31 +1000
Subject: [Rd] Handle RAWSXP in inspect.c:typename()
In-Reply-To: <715DF39F-655E-43ED-8611-EBB2C901B61C@r-project.org>
References: <AANLkTi=Xn0mJAjyPB-S4fcbWLwKOJirvAX_7DmUJTYwW@mail.gmail.com>
	<715DF39F-655E-43ED-8611-EBB2C901B61C@r-project.org>
Message-ID: <AANLkTi=Hb69PZNPmverxfsUo0ipBm0rVbPuX-wtMDAas@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100824/3b2c889a/attachment.pl>

From radford at cs.toronto.edu  Tue Aug 24 01:39:27 2010
From: radford at cs.toronto.edu (Radford Neal)
Date: Mon, 23 Aug 2010 19:39:27 -0400
Subject: [Rd] Speeding up matrix multiplies
Message-ID: <20100823233927.GA21529@cs.toronto.edu>

Regarding my previous message on speeding up matrix multiplies, I've
realized that the size of the result matrix is not really the right
criterion for deciding to do the computation without using the Fortran
routine.  A better criterion would be based on the ratio of the time
for the matrix multiply to the time for the ISNAN check.  So I've
replaced my previous check by

        /* Faster to just do it here if the time to do the matrix multiply
           is not much greater than the time for the NA/NaN check below. */

        do_it_here = nrx*ncy <= 5*(nrx+ncy);

In particular, all matrix x vector and vector x matrix products will 
in this version be done in the matprod routine, not the Fortran routine.
And this is the right thing to do, since the time for the ISNAN check
before calling the Fortan routine will be comparable to the time for
the matrix multiply.  So avoiding it will be desirable unless the Fortran
routine is really, really faster than the C code in matprod.

Of course, the real solution is to change the Fortran routine (which
seems to be in src/extra/blas/blas.f, and isn't all that complicated)
to handle NAs and NaNs as desired.  Or to write a carefully optimized
C matrix multiply routine that does the right thing.  For this,
knowing what the problem is supposed to be would help.  My quick
attempt at using the bug reporting system didn't manage to find the
PR#4582 that is mentioned in the comment in the code, but I don't
really know how the bug report system is supposed to work.

    Radford Neal


From simon.urbanek at r-project.org  Tue Aug 24 03:53:26 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 23 Aug 2010 21:53:26 -0400
Subject: [Rd] Internal state indicating if a data object has NAs/no
	NAs/not sure (Was: Re: Speeding up matrix multiplies)
In-Reply-To: <AANLkTiktc9aU3M=j-AmOEB046w9DjLm_3vzqvW8FLev+@mail.gmail.com>
References: <AANLkTiktc9aU3M=j-AmOEB046w9DjLm_3vzqvW8FLev+@mail.gmail.com>
Message-ID: <C6DEA0AD-A8A9-4C8A-B0E0-C0F331F4024D@r-project.org>

Henrik,

On Aug 23, 2010, at 5:33 PM, Henrik Bengtsson wrote:

> Hi, I'm just following your messages the overhead that the code for
> dealing with possible NA/NaN values brings.  When I was setting up
> part of the matrixStats package, I've also though about this.  I was
> thinking of having an additional logical argument 'hasNA'/'has.na'
> where you as a user can specify whether there is NA/NaN:s or not,
> allowing the code to avoid it or not.  Of course, if hasNA=FALSE but
> there really are NAs you'll get very funny results.
> 
> Even better would be if there would be an internal state attached to
> the basic data types in R indicating one of three states:
> 
> (i) Has NAs: we know there exist NA/NaN values,
> (ii) Has No NAs: we know they do *not* exist,
> (iii) Not Sure: we are uncertain, i.e. it may be either (i) or (ii).
> 
> This would allow one to optimize the internal code further, but if
> ignored everything is backward compatible.  The default state should
> be (iii), which would be backward compatible with all existing code.
> For instance y <- sum(x, na.rm=FALSE) would return NA immediately if
> the state of 'x' is "Has NAs".
> 

Those thoughts are noble [I was thinking along the same lines - simply using a bit in the SEXP], but there is the issue of the API and packages. Since they get unrestricted access to the contents of the vector (e.g. REAL(x)) there is no way of tracking the presence of NAs as they can be added at any time without R knowing. The API has no provision for write-barrier on real/integer/logical vectors so the only "safe" way would be to flag all vectors as "don't know" which sort of defeats the purpose (note that packages can use allocVector and others so simply restricting .Call to mark arguments is not sufficient). The best I can think of would be for some R-internal operations to flag the results accordingly but a) you'll incur the penalty of flagging at the exit of all such R functions since you have to assume that the input will be "don't know" and b) determining from the most common "don't know" input the actual state could be costly. Ideally, someone should try it and see if it brings any benefits, but as usual this is highly dependent on the tasks at hand.

As I was already pointing out the issue is in general not clear-cut because good compilers will perform the necessary optimizations and bad ones will penalize for optimizing, but in addition to that all the tests are purely artificial. You would be surprised how much more time you can save in a lot of R code (internal or packages) in real-life scenarios -- unfortunately they rarely match the simple test cases. So my point is that we should be looking at real benchmarks and collect those to have a more realistic picture.

(FWIW no one mentioned parallelization where you can gain much more ... Luke Tierney did some great work in that direction that could be extended and gives you speed up of orders of magnitude, not just a few percent ...)

Cheers,
Simon



> Then different computational algorithms are free to set the state, if
> they know it.  For instance, matrixStats::anyMissing(x) would flag the
> "x" object (i) if returning TRUE and (ii) if returning FALSE.  Next
> time it is called, the response could be instant/O(1).  Similarly, y
> <- rowSums(x, na.rm=TRUE/FALSE) can set the state on y, and so on.
> 
> Just some thoughts
> 
> /Henrik
> 
> 
> On Mon, Aug 23, 2010 at 1:50 PM, Radford Neal <radford at cs.toronto.edu> wrote:
>> I've looked at the code for matrix multiplies in R, and found that it
>> can speeded up quite a bit, for multiplies that are really vector dot
>> products, and for other multiplies in which the result matrix is small.
>> 
>> Here's my test program:
>> 
>> u <- seq(0,1,length=1000)
>> v <- seq(0,2,length=1000)
>> 
>> A2 <- matrix(2.1,2,1000)
>> A5 <- matrix(2.1,5,1000)
>> B3 <- matrix(3.2,1000,3)
>> 
>> A4 <- matrix(2.1,4,1000)
>> B4 <- matrix(3.2,1000,4)
>> 
>> print(system.time ({for (i in 1:100000) w <- u %*% v}))
>> print(system.time ({for (i in 1:100000) w <- A5 %*% v}))
>> print(system.time ({for (i in 1:100000) R <- A2 %*% B3}))
>> print(system.time ({for (i in 1:100000) R <- A5 %*% B3}))
>> print(system.time ({for (i in 1:100000) R <- A4 %*% B4}))
>> 
>> Here are the five system.time results above using R 2.11.1:
>> 
>>   user  system elapsed
>>  1.680   0.000   1.683
>>   user  system elapsed
>>  4.350   0.000   4.349
>>   user  system elapsed
>>  4.820   0.000   4.818
>>   user  system elapsed
>>  7.370   0.020   7.383
>>   user  system elapsed
>>  7.990   0.000   7.991
>> 
>> and here are the results with my modified version of R 2.11.1:
>> 
>>   user  system elapsed
>>  0.270   0.000   0.271
>>   user  system elapsed
>>  1.290   0.000   1.287
>>   user  system elapsed
>>  1.080   0.000   1.086
>>   user  system elapsed
>>  3.640   0.000   3.642
>>   user  system elapsed
>>  7.950   0.000   7.953
>> 
>> The main issue here is again ISNAN.  The R code doesn't trust the
>> Fortran routine it calls to handle NA and NaN correctly, so it checks
>> whether the arguments have any NAs or NaNs, and if so does the matrix
>> multiply itself, with simple nested loops.  For multiplies in which
>> the number of elements in the result matrix is large, this check will
>> take a negligible amount of time.  But otherwise it can drastically
>> slow things down.  This is true in particular for dot products, of a
>> 1xN times an Nx1 matrix, giving a 1x1 result.
>> 
>> I changed the code to handle dot product specially, with no need for
>> ISNAN checks, and otherwise to go straight to the nested loop code
>> (bypassing Fortran and the ISNAN checks) if the result matrix has no
>> more than 15 elements.  One can see that the times are much improved
>> above, except of course for the multiply that produces a 4x4 result,
>> which takes the same amount of time as before, since nothing is
>> different for that.  From the results, it seems that a threshold a bit
>> above 15 might be even better, though this will of course depend on
>> the architecture, compiler, etc.
>> 
>> Simon Urbaneck points out in reply to my message about speeding up
>> "sum" and "prod" that the effects of changes like this depend on the
>> machine architecure, compiler, etc.  This is of course true.  The
>> magnitude of variation in his results (not the absolute times, but the
>> relative times of different versions) is rather larger than one would
>> expect, though.  Perhaps his time measurements were affected by random
>> factors like system load, or perhaps they are due to non-random but
>> essentially arbitrary factors like the exact alignment of code
>> generated by the C compiler, which could change with even unrelated
>> modifications to the program.
>> 
>> The changes that I made seem generally desirable for any architecture,
>> or will at least make things no worse (the code expansion is trivial),
>> apart from the possibility of such arbitrary factors.  I'm not doing
>> anything like manually unrolling loops, or replacing array indexing
>> with pointer arithmetic, which might be seen as undesirable attempts
>> at out-smarting the optimizer.
>> 
>> The times above are for an Intel Linux machine with gcc version below:
>> 
>> Using built-in specs.
>> Target: i486-linux-gnu
>> Configured with: ../src/configure -v --enable-languages=c,c++,fortran,objc,obj-c++,treelang --prefix=/usr --enable-shared --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --enable-nls --with-gxx-include-dir=/usr/include/c++/4.2 --program-suffix=-4.2 --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --enable-mpfr --enable-targets=all --enable-checking=release --build=i486-linux-gnu --host=i486-linux-gnu --target=i486-linux-gnu
>> Thread model: posix
>> gcc version 4.2.4 (Ubuntu 4.2.4-1ubuntu4)
>> 
>> I didn't change any R configuration options regarding compilation.
>> 
>> Below is my modified version of the matprod function in src/main/array.c.
>> 
>>   Radford Neal
>> 
>> ------------------------------------------------------------------------
>> 
>> static void matprod(double *x, int nrx, int ncx,
>>                    double *y, int nry, int ncy, double *z)
>> {
>>    char *transa = "N", *transb = "N";
>>    int i,  j, k;
>>    double one = 1.0, zero = 0.0;
>>    LDOUBLE sum;
>>    Rboolean do_it_here;
>> 
>>    /* NOTE: ncx must be equal to nry. */
>> 
>>    if (nrx==1 && ncy==1) {
>> 
>>        /* Do dot product quickly. */
>> 
>>        sum = 0.0;
>>        for (i = 0; i<ncx; i++)
>>            sum += x[i] * y[i];
>>        z[0] = sum;
>> 
>>    } else if (nrx > 0 && ncx > 0 && nry > 0 && ncy > 0) {
>> 
>>        /* Faster to just do it here if the result is small, especially
>>           considering the NA/NaN check below. */
>> 
>>        do_it_here = nrx*ncy <= 15;
>> 
>>        /* Don't trust the BLAS to handle NA/NaNs correctly: PR#4582
>>         * The test is only O(n) here
>>         */
>> 
>>        if (!do_it_here)
>>            for (i = 0; i < nrx*ncx; i++)
>>                if (ISNAN(x[i])) { do_it_here = TRUE; break; }
>>        if (!do_it_here)
>>            for (i = 0; i < nry*ncy; i++)
>>                if (ISNAN(y[i])) { do_it_here = TRUE; break; }
>> 
>>        if (do_it_here) {
>>            for (i = 0; i < nrx; i++)
>>                for (k = 0; k < ncy; k++) {
>>                    sum = 0.0;
>>                    for (j = 0; j < ncx; j++)
>>                        sum += x[i + j * nrx] * y[j + k * nry];
>>                    z[i + k * nrx] = sum;
>>                }
>>        } else
>>            F77_CALL(dgemm)(transa, transb, &nrx, &ncy, &ncx, &one,
>>                            x, &nrx, y, &nry, &zero, z, &nrx);
>> 
>>    } else /* zero-extent operations should return zeroes */
>> 
>>        for(i = 0; i < nrx*ncy; i++) z[i] = 0;
>> }
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>> 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From simon.urbanek at r-project.org  Tue Aug 24 04:03:20 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 23 Aug 2010 22:03:20 -0400
Subject: [Rd] Speeding up matrix multiplies
In-Reply-To: <20100823233927.GA21529@cs.toronto.edu>
References: <20100823233927.GA21529@cs.toronto.edu>
Message-ID: <95C122CC-D17A-4007-ABDF-C77841E4000C@r-project.org>


On Aug 23, 2010, at 7:39 PM, Radford Neal wrote:

> Regarding my previous message on speeding up matrix multiplies, I've
> realized that the size of the result matrix is not really the right
> criterion for deciding to do the computation without using the Fortran
> routine.  A better criterion would be based on the ratio of the time
> for the matrix multiply to the time for the ISNAN check.  So I've
> replaced my previous check by
> 
>        /* Faster to just do it here if the time to do the matrix multiply
>           is not much greater than the time for the NA/NaN check below. */
> 
>        do_it_here = nrx*ncy <= 5*(nrx+ncy);
> 
> In particular, all matrix x vector and vector x matrix products will 
> in this version be done in the matprod routine, not the Fortran routine.
> And this is the right thing to do, since the time for the ISNAN check
> before calling the Fortan routine will be comparable to the time for
> the matrix multiply.  So avoiding it will be desirable unless the Fortran
> routine is really, really faster than the C code in matprod.
> 

It is, many times in fact, if you use threaded BLAS on a multi-core machine and large matrices.


> Of course, the real solution is to change the Fortran routine (which
> seems to be in src/extra/blas/blas.f, and isn't all that complicated)

Nope - it can be external and BLAS standard doesn't handle NAs.

Cheers,
Simon



> to handle NAs and NaNs as desired.  Or to write a carefully optimized
> C matrix multiply routine that does the right thing.  For this,
> knowing what the problem is supposed to be would help.  My quick
> attempt at using the bug reporting system didn't manage to find the
> PR#4582 that is mentioned in the comment in the code, but I don't
> really know how the bug report system is supposed to work.
> 
>    Radford Neal
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From Mark.Bravington at csiro.au  Tue Aug 24 04:17:10 2010
From: Mark.Bravington at csiro.au (Mark.Bravington at csiro.au)
Date: Tue, 24 Aug 2010 12:17:10 +1000
Subject: [Rd] No RTFM?
In-Reply-To: <1282552663.2375.26.camel@desktop.localdomain>
References: <XFMail.100823032204.Ted.Harding@manchester.ac.uk>,
	<1282552663.2375.26.camel@desktop.localdomain>
Message-ID: <62C82B39B8A85E4B95A18F7F7B852F870576DBBB72@exvic-mbx03.nexus.csiro.au>

It seems as if the original point has been buried a bit here. So I'd just like to briefly agree with what Ted Harding said about guidelines, and then return to RTFM etc.

The price paid for writing the best bit of software in the world, is that people want to use it. Some of those people will be clueless. For some, cluelessness is temporary state which they will crawl or be helped out of; for others, sadly, not. It's impossible to tell from a single email whether someone is part of "the deserving poor" or just "an idle bludger", so replies shouldn't assume the latter. Quite a bit of R doco is still at best machine-readable (despite creeping improvements, for which thank you somebody) and assumes a lot of prior knowledge, so it's hardly surprising there are dumb questions. If anyone's going to take the time to reply, they might as well do so properly. I appreciate the community spirit of those who help on R-help (which I don't manage to do), and I do have sympathy with the desire to keep down traffic, and yes sometimes RTFM is the right answer, but the current false-negative rate strikes me as too high. In that spirit:

 - How about a 24-hour "no RTFM" rule? That gives more sympathetic respondents the chance to come up with something a bit more helpful. After that, if there's no response, then anyone who still cares to can pounce on the victim-- who will by then have had 24 hours of ominous silence in which to try to find the right FM to R, as someone else nicely put it.

 - Also, "?glm" does come over as pretty rude, possibly worse than RTFM which at least has the ghost of humour. Even when it's the right answer, personally I would never say it without a prefacing "Have a look at ..." or somesuch-- about 2 seconds' worth of typing to avoid crushing some tender soul & coming across as an obnoxious Neanderthal. In any case, it usually requires a more specific reference in order to be useful. Some R documentation is long-- and in many cases should actually be longer, I think-- so it is not always easy to find the relevant bits. A good template might be something like this:

"Have a look at ?glm and search for 'fitted probabilities' "

No 24 hour rule seems necessary for specific refs to documentation if a formula like that is followed, I reckon-- just for RTFM.

bye
Mark

Mark Bravington
CSIRO Mathematical & Information Sciences
Marine Laboratory
Castray Esplanade
Hobart 7001
TAS

________________________________________
From: r-devel-bounces at r-project.org [r-devel-bounces at r-project.org] On Behalf Of Gavin Simpson [gavin.simpson at ucl.ac.uk]
Sent: 23 August 2010 18:37
To: ted.harding at manchester.ac.uk
Cc: r-devel at r-project.org
Subject: Re: [Rd] No RTFM?

On Mon, 2010-08-23 at 03:22 +0100, Ted.Harding at manchester.ac.uk wrote:
<snip />
>
> [3] I have tried to argue for a moderate and flexible spirit in
>     what is advised in the Posting Guide. I am very uncomfortable
>     about proposals as prescriptive and rigid as yours seem to be.
>     Users, especially beginners, are likely to be discouraged from
>     posting to R-help if faced with stringent (and possibly not
>     relevant) requirements on how they should post. If faced with
>     responses which chastise them for not "following the rules"
>     they may well be put off using R altogether.
>
>     As I have said before, I see the function of R-help as helping,
>     in as cooperative a way as possible. The function of the Posting
>     Guide should likewise be to help them to write good questions,
>     with advice on what mey be necessary, what useful, what not useful.
>
>     The current Posting Guide is already quite reasonable in these
>     respects, and perhaps would benefit most from being made being
>     somewhat re-formatted, without essential change.
>
> Ted.

I concur with Ted's comments above. Bugzilla has this form of
hand-holding, prescriptive format for filing bugs against software
projects. It works there where people are only supplying bug reports. I
don't see that it can work for the more free-form nature of a mailing
list.

The posting guide should be there to help people i) help themselves find
the information about R that they need, and if this hasn't helped ii)
formulate an appropriate question with the *relevant* information.
Earlier ideas in this thread suggested including a lot of extraneous
information not relevant to most R-Help questions.

I see Paul that in your reply that your aim is to make things more clear
and more concise. Perhaps the best way forward now, if you are
sufficiently motivated and have the time, would be to rewrite the
posting guide and send it to the list for comments/suggestions. IIRC
this was how the original guide was produced.

G

--
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
 Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
 ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
 Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
 Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
 UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel


From radford at cs.toronto.edu  Tue Aug 24 04:39:58 2010
From: radford at cs.toronto.edu (Radford Neal)
Date: Mon, 23 Aug 2010 22:39:58 -0400
Subject: [Rd] Speeding up matrix multiplies
In-Reply-To: <95C122CC-D17A-4007-ABDF-C77841E4000C@r-project.org>
References: <20100823233927.GA21529@cs.toronto.edu>
	<95C122CC-D17A-4007-ABDF-C77841E4000C@r-project.org>
Message-ID: <20100824023958.GA10777@cs.toronto.edu>

> On Aug 23, 2010, at 7:39 PM, Radford Neal wrote:

> > In particular, all matrix x vector and vector x matrix products will 
> > in this version be done in the matprod routine, not the Fortran routine.
> > And this is the right thing to do, since the time for the ISNAN check
> > before calling the Fortan routine will be comparable to the time for
> > the matrix multiply.  So avoiding it will be desirable unless the Fortran
> > routine is really, really faster than the C code in matprod.
>
> It is, many times in fact, if you use threaded BLAS on a multi-core machine 
> and large matrices.

Well, it can't get any faster than taking zero time.  And even in that
case, using the C code in matprod will slow the program down (compared
to the existing version of R) by only about a factor of two.  

> > Of course, the real solution is to change the Fortran routine (which
> > seems to be in src/extra/blas/blas.f, and isn't all that complicated)
> 
> Nope - it can be external and BLAS standard doesn't handle NAs.

OK.  I see the problem if people can link in their own version of BLAS.
I wonder if there is any way of telling whether they did that?  Presumably
many people will use the BLAS routine supplied with R, which could be
made safe for NAs.

   Radford Neal


From kasperdanielhansen at gmail.com  Tue Aug 24 05:37:39 2010
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Mon, 23 Aug 2010 23:37:39 -0400
Subject: [Rd] Speeding up matrix multiplies
In-Reply-To: <20100824023958.GA10777@cs.toronto.edu>
References: <20100823233927.GA21529@cs.toronto.edu>
	<95C122CC-D17A-4007-ABDF-C77841E4000C@r-project.org>
	<20100824023958.GA10777@cs.toronto.edu>
Message-ID: <AANLkTiktNDSMj+Rae+9VuazCGiuU9Hb4F-a1DPxGUW=x@mail.gmail.com>

On Mon, Aug 23, 2010 at 10:39 PM, Radford Neal <radford at cs.toronto.edu> wrote:
>> On Aug 23, 2010, at 7:39 PM, Radford Neal wrote:
>
>> > In particular, all matrix x vector and vector x matrix products will
>> > in this version be done in the matprod routine, not the Fortran routine.
>> > And this is the right thing to do, since the time for the ISNAN check
>> > before calling the Fortan routine will be comparable to the time for
>> > the matrix multiply. ?So avoiding it will be desirable unless the Fortran
>> > routine is really, really faster than the C code in matprod.
>>
>> It is, many times in fact, if you use threaded BLAS on a multi-core machine
>> and large matrices.
>
> Well, it can't get any faster than taking zero time. ?And even in that
> case, using the C code in matprod will slow the program down (compared
> to the existing version of R) by only about a factor of two.
>
>> > Of course, the real solution is to change the Fortran routine (which
>> > seems to be in src/extra/blas/blas.f, and isn't all that complicated)
>>
>> Nope - it can be external and BLAS standard doesn't handle NAs.
>
> OK. ?I see the problem if people can link in their own version of BLAS.
> I wonder if there is any way of telling whether they did that? ?Presumably
> many people will use the BLAS routine supplied with R, which could be
> made safe for NAs.

Radford: this is highly platform dependent.  For example, all OS X
users use a multithreaded BLAS supplied by Apple.  And I believe a
multithreaded BLAS is used by Revolution R (all platforms).  Allowing
a plugin BLAS is (in my opinion) an essential advantage of R and is
used by many people who care about high performance.

Note that the BLAS version can be swapped after R has been compiled,
so even if there is a way to tell what BLAS you are using (and I don't
know if there is), it has to be a run-time check.

Kasper


From landronimirc at gmail.com  Tue Aug 24 08:21:05 2010
From: landronimirc at gmail.com (Liviu Andronic)
Date: Tue, 24 Aug 2010 09:21:05 +0300
Subject: [Rd] No RTFM?
In-Reply-To: <62C82B39B8A85E4B95A18F7F7B852F870576DBBB72@exvic-mbx03.nexus.csiro.au>
References: <XFMail.100823032204.Ted.Harding@manchester.ac.uk>
	<1282552663.2375.26.camel@desktop.localdomain>
	<62C82B39B8A85E4B95A18F7F7B852F870576DBBB72@exvic-mbx03.nexus.csiro.au>
Message-ID: <AANLkTi=ZxFuASuhE6OKrWjKzPn2osM9vySF_N07q9iBe@mail.gmail.com>

On Tue, Aug 24, 2010 at 5:17 AM,  <Mark.Bravington at csiro.au> wrote:
> ?- Also, "?glm" does come over as pretty rude,
>
Personally I've always seen the '?fun' answers as appropriate and
straight to the point. There's no need to type a nice sounding phrase
? la fran?aise just to express 'see the ?glm reference'. A
'requirement' for long phrases might deter some in a hurry to answer
at all, and in my view a quick and raw reference is better than none.

Perhaps a first time poster would be utterly clueless on first sight,
but doing a bit of homework with the key word in hands one should
quickly understand what's all about. The second sight of '?fun'
answers shouldn't be that intimidating.

Regards
Liviu


From gb at stat.umu.se  Tue Aug 24 09:13:02 2010
From: gb at stat.umu.se (=?ISO-8859-1?Q?G=F6ran_Brostr=F6m?=)
Date: Tue, 24 Aug 2010 09:13:02 +0200
Subject: [Rd] Speeding up matrix multiplies
In-Reply-To: <AANLkTiktNDSMj+Rae+9VuazCGiuU9Hb4F-a1DPxGUW=x@mail.gmail.com>
References: <20100823233927.GA21529@cs.toronto.edu>	<95C122CC-D17A-4007-ABDF-C77841E4000C@r-project.org>	<20100824023958.GA10777@cs.toronto.edu>
	<AANLkTiktNDSMj+Rae+9VuazCGiuU9Hb4F-a1DPxGUW=x@mail.gmail.com>
Message-ID: <4C7370FE.30602@stat.umu.se>



On 2010-08-24 05:37, Kasper Daniel Hansen wrote:
> On Mon, Aug 23, 2010 at 10:39 PM, Radford Neal<radford at cs.toronto.edu>  wrote:
>>> On Aug 23, 2010, at 7:39 PM, Radford Neal wrote:
>>
>>>> In particular, all matrix x vector and vector x matrix products will
>>>> in this version be done in the matprod routine, not the Fortran routine.
>>>> And this is the right thing to do, since the time for the ISNAN check
>>>> before calling the Fortan routine will be comparable to the time for
>>>> the matrix multiply.  So avoiding it will be desirable unless the Fortran
>>>> routine is really, really faster than the C code in matprod.
>>>
>>> It is, many times in fact, if you use threaded BLAS on a multi-core machine
>>> and large matrices.
>>
>> Well, it can't get any faster than taking zero time.  And even in that
>> case, using the C code in matprod will slow the program down (compared
>> to the existing version of R) by only about a factor of two.
>>
>>>> Of course, the real solution is to change the Fortran routine (which
>>>> seems to be in src/extra/blas/blas.f, and isn't all that complicated)
>>>
>>> Nope - it can be external and BLAS standard doesn't handle NAs.
>>
>> OK.  I see the problem if people can link in their own version of BLAS.
>> I wonder if there is any way of telling whether they did that?  Presumably
>> many people will use the BLAS routine supplied with R, which could be
>> made safe for NAs.
>
> Radford: this is highly platform dependent.  For example, all OS X
> users use a multithreaded BLAS supplied by Apple.  And I believe a
> multithreaded BLAS is used by Revolution R (all platforms).  Allowing
> a plugin BLAS is (in my opinion) an essential advantage of R and is
> used by many people who care about high performance.

How do I best achieve this on Ubuntu (10.04)?

G?ran

>
> Note that the BLAS version can be swapped after R has been compiled,
> so even if there is a way to tell what BLAS you are using (and I don't
> know if there is), it has to be a run-time check.
>
> Kasper
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From edd at debian.org  Tue Aug 24 14:27:24 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 24 Aug 2010 07:27:24 -0500
Subject: [Rd] Speeding up matrix multiplies
In-Reply-To: <4C7370FE.30602@stat.umu.se>
References: <20100823233927.GA21529@cs.toronto.edu>
	<95C122CC-D17A-4007-ABDF-C77841E4000C@r-project.org>
	<20100824023958.GA10777@cs.toronto.edu>
	<AANLkTiktNDSMj+Rae+9VuazCGiuU9Hb4F-a1DPxGUW=x@mail.gmail.com>
	<4C7370FE.30602@stat.umu.se>
Message-ID: <19571.47788.483534.45503@max.nulle.part>


On 24 August 2010 at 09:13, G?ran Brostr?m wrote:
| 
| On 2010-08-24 05:37, Kasper Daniel Hansen wrote:
| > On Mon, Aug 23, 2010 at 10:39 PM, Radford Neal<radford at cs.toronto.edu>  wrote:
| >>> On Aug 23, 2010, at 7:39 PM, Radford Neal wrote:
| >>
| >>>> In particular, all matrix x vector and vector x matrix products will
| >>>> in this version be done in the matprod routine, not the Fortran routine.
| >>>> And this is the right thing to do, since the time for the ISNAN check
| >>>> before calling the Fortan routine will be comparable to the time for
| >>>> the matrix multiply.  So avoiding it will be desirable unless the Fortran
| >>>> routine is really, really faster than the C code in matprod.
| >>>
| >>> It is, many times in fact, if you use threaded BLAS on a multi-core machine
| >>> and large matrices.
| >>
| >> Well, it can't get any faster than taking zero time.  And even in that
| >> case, using the C code in matprod will slow the program down (compared
| >> to the existing version of R) by only about a factor of two.
| >>
| >>>> Of course, the real solution is to change the Fortran routine (which
| >>>> seems to be in src/extra/blas/blas.f, and isn't all that complicated)
| >>>
| >>> Nope - it can be external and BLAS standard doesn't handle NAs.
| >>
| >> OK.  I see the problem if people can link in their own version of BLAS.
| >> I wonder if there is any way of telling whether they did that?  Presumably
| >> many people will use the BLAS routine supplied with R, which could be
| >> made safe for NAs.
| >
| > Radford: this is highly platform dependent.  For example, all OS X
| > users use a multithreaded BLAS supplied by Apple.  And I believe a
| > multithreaded BLAS is used by Revolution R (all platforms).  Allowing
| > a plugin BLAS is (in my opinion) an essential advantage of R and is
| > used by many people who care about high performance.
| 
| How do I best achieve this on Ubuntu (10.04)?

i)   General answer:  See Appendix 3.1 of the R Admin + Inst manual.

ii)  More specific answer: On Ubuntu, you get the 'revolution-mkl' package
which gets you the otherwise commercial Intel MKL for free.

iii)  Even more specific answer: You get Goto BLAS via the gotoblas2-helper
package by Ei-ji Nakama who also detailed how to use it on a recent r-sig-hpc
post. 

Hth,  Dirk

 
| G?ran
| 
| >
| > Note that the BLAS version can be swapped after R has been compiled,
| > so even if there is a way to tell what BLAS you are using (and I don't
| > know if there is), it has to be a run-time check.
| >
| > Kasper
| >
| > ______________________________________________
| > R-devel at r-project.org mailing list
| > https://stat.ethz.ch/mailman/listinfo/r-devel
| 
| ______________________________________________
| R-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From christophe.genolini at free.fr  Tue Aug 24 15:56:42 2010
From: christophe.genolini at free.fr (christophe.genolini)
Date: Tue, 24 Aug 2010 15:56:42 +0200
Subject: [Rd] R forge : svn + ssh without key
In-Reply-To: <mailman.23.1282644008.6357.r-devel@r-project.org>
References: <mailman.23.1282644008.6357.r-devel@r-project.org>
Message-ID: <4C73CF9A.1030102@free.fr>


Hi the list,

I am trying to use R forge. I created an account. I put my project on R 
forge. I installed TortoiseSVN on my computer (windows).

Then I did not manage to go through all the key process but I see in the 
R-Forge Manual that there is another option:
"2. it is sufficient to use password authentication to write to the 
project repository (if you decided to do so please go to step 5)."
So I try this new (for me) way. I create a folder on my computer. I 
successfully manage to update my local repository. But I do not manage 
to do a commit. Each time, I get the message

Commit fail (details follow):
authorization failed

Any idea of what goes wrong?

Christophe


From info at aghmed.fsnet.co.uk  Tue Aug 24 16:28:50 2010
From: info at aghmed.fsnet.co.uk (Michael Dewey)
Date: Tue, 24 Aug 2010 15:28:50 +0100
Subject: [Rd] No RTFM?
In-Reply-To: <4C6DC76B.7000303@structuremonitoring.com>
References: <4C6DC76B.7000303@structuremonitoring.com>
Message-ID: <Zen-1OnuUn-0003ZQ-MI@smarthost01.mail.zen.net.uk>

At 01:08 20/08/2010, Spencer Graves wrote:
>  What do you think about adding a "No RTFM" 
> policy to the R mailing lists? Per, "http://en.wikipedia.org/wiki/RTFM":

Spencer,
You raise an interesting point but the responses 
to your post remind us that people (and indeed 
whole cultures) are not all situated at the same 
point on the continuum of directness between 
"It's a cow, stupid" and "From this side it looks 
not unlike a cow". The issue of what is offensive 
is even more complex, I remember being taken to 
task on another list for referring to a "rule of thumb".

The thing I find most rude on the list is not the 
occasional abrupt postings by people who are 
obviously having a bad day but the number of 
fairly long exchanges which end unresolved as the 
OP never bothers to post a conclusion and we 
never know whether we solved his/her problem.
I am not asking for thanks but we would all 
benefit from knowing how it all turned out.


>The Ubuntu Forums and LinuxQuestions.org, for 
>instance, have instituted "no RTFM" policies to 
>promote a welcoming atmosphere.[8][9].
>
>RTFM [and] "Go look on google" are two 
>inappropriate responses to a question. If you 
>don't know the answer or don't wish to help, 
>please say nothing instead of brushing off 
>someone's question. Politely showing someone how 
>you searched or obtained the answer to a 
>question is acceptable, even encouraged.
>...
>
>If you wish to remind a user to use search tools 
>or other resources when they have asked a 
>question you feel is basic or common, please be 
>very polite. Any replies for help that contain 
>language disrespectful towards the user asking 
>the question, i.e. "STFU" or "RTFM" are 
>unacceptable and will not be tolerated. ?Ubuntu Forums
>
>
>Gavin Simpson and I recently provided examples 
>answering a question from "r.ookie" that had 
>previously elicited responses, ""You want us to 
>read the help page to you?" and "It yet again 
>appears that you are asking us to read the help pages for you."
>
>
>I can appreciate the sentiment in 
>fortunes('rtfm'). In this case, however, 
>"r.ookie" had RTFM (and said so), but evidently 
>the manual was not sufficiently clear.
>
>
>Best Wishes,
>Spencer Graves
>
>

Michael Dewey
http://www.aghmed.fsnet.co.uk


From cubranic at stat.ubc.ca  Tue Aug 24 16:42:11 2010
From: cubranic at stat.ubc.ca (Davor Cubranic)
Date: Tue, 24 Aug 2010 07:42:11 -0700
Subject: [Rd] small syntax suggestion
In-Reply-To: <4C72D9AC.1080906@sciviews.org>
References: <AANLkTimvja3=JJ-Y8yS=8K+m8ePP7XrCUTEvzg=L9bjn@mail.gmail.com>
	<04831FEE-4137-484E-8942-427085663D2F@stat.ubc.ca>
	<4C72D9AC.1080906@sciviews.org>
Message-ID: <201008240742.12069.cubranic@stat.ubc.ca>

On August 23, 2010 01:27:24 pm Philippe Grosjean wrote:
> They have to write such a code like this:
> 
> if (x < -3) do_something
> 
> That way, there is no ambiguity. Don't you think it's important to
> write clear code, including by using spaces where it makes it easier
> to read,... and less ambiguous, as you just realize?

I fully agree, and I'm sure nobody here would dispute your advice. But 
we all sometimes make typos, and the point here is that the grammar's 
ambiguity makes for hard-to-find bugs.

So, if I may focus us back on the OP's suggestion: "that R simply warn 
about an ambiguity" in 'if' statement's comparison involving '<-[0-9]'. 
It doesn't seem like an unreasonable suggestion. For comparison, GCC 
will do the same thing with C code when the '-Wparentheses' switch if 
assignment is used in a context where a truth value is expected. (E.g., 
'if (x = 3)'.)

It's been a very long time since I looked at Yacc and Lex source, but it 
looks like function 'xxif' in gram.y is the earliest place where we have 
a whole IF statement. AFAICT, this is evaluated in 'do_if' function of 
eval.c. There, the condition is evaluated via 'asLogicalNoNA'. Could 
'do_if' instead use a function similar to 'asLogicalNoNA' but which 
issues a warning if the condition is an assignment?

Davor


From ivo.welch at gmail.com  Tue Aug 24 17:02:58 2010
From: ivo.welch at gmail.com (ivo welch)
Date: Tue, 24 Aug 2010 11:02:58 -0400
Subject: [Rd] small syntax suggestion
In-Reply-To: <4C72D9AC.1080906@sciviews.org>
References: <AANLkTimvja3=JJ-Y8yS=8K+m8ePP7XrCUTEvzg=L9bjn@mail.gmail.com>
	<AANLkTinwC0h+oX2QhcskS_9xRuws=X9XQ2RuGnOxVCyG@mail.gmail.com>
	<04831FEE-4137-484E-8942-427085663D2F@stat.ubc.ca>
	<4C72D9AC.1080906@sciviews.org>
Message-ID: <AANLkTim_YLk8rO0CVxtWz35enpGhAa-zDvYHRdq5D-JU@mail.gmail.com>

hi ted, philippe, and others---I agree with everything you write about
good coding practice.    none of us would be writing x<-3, even when
we want to assign 3.  we know better.   we would at least use a space,
if not a paren.  alas, my suggestion is not so much for you.  It is
trying to spare novices that are just beginning to use R some
unnecessary frustration.   I bet that most of us have made this
mistake at least once.

to the extent that it requires a token "<-[0-9]" to recognize this, it
could be an easy special case/warning/error.  to the extent that it
requires more, it is probably not worth the hassle.

[I am a great fan of syntax checking.  I am not a great fan of many
but the simplest recycling rules (from 1 to N) BY DEFAULT.  It's just
asking for trouble.]

regards,

/iaw
----
Ivo Welch (ivo.welch at brown.edu, ivo.welch at gmail.com)




On Mon, Aug 23, 2010 at 4:27 PM, Philippe Grosjean
<phgrosjean at sciviews.org> wrote:
> I tell to my students that it is very important (not only for legibility) to
> place spaces between operands. They have to write such a code like this:
>
> if (x < -3) do_something
>
> That way, there is no ambiguity. Don't you think it's important to write
> clear code, including by using spaces where it makes it easier to read,...
> and less ambiguous, as you just realize?
>
> Best,
>
> Philippe Grosjean
>
> On 23/08/10 19:06, Davor Cubranic wrote:
>>
>> On 2010-08-23, at 6:15 AM, Barry Rowlingson wrote:
>>
>>> On Sun, Aug 22, 2010 at 4:33 PM, ivo welch<ivo.welch at gmail.com> ?wrote:
>>>>
>>>> I have found that my students often make the mistake of
>>>> mixing up comparisons and assignments with negative numbers:
>>>>
>>>> ?if (x<-3) do_something;
>>>
>>> If you tell your students not to use '<-' for assignment, then they
>>> can't make this mistake, because = for assignment has additional
>>> restrictions on it:
>>
>> The students are trying to *compare* to a negative number, and trip on R's
>> parsing of "<-". They could use '=' for assignment all they want (which I
>> thought is being discouraged as a code style these days, BTW), and they'll
>> still run into this problem.
>>
>> Davor
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>


From Ted.Harding at manchester.ac.uk  Tue Aug 24 17:18:30 2010
From: Ted.Harding at manchester.ac.uk ( (Ted Harding))
Date: Tue, 24 Aug 2010 16:18:30 +0100 (BST)
Subject: [Rd] small syntax suggestion
In-Reply-To: <201008240742.12069.cubranic@stat.ubc.ca>
Message-ID: <XFMail.100824161830.Ted.Harding@manchester.ac.uk>

On 24-Aug-10 14:42:11, Davor Cubranic wrote:
> On August 23, 2010 01:27:24 pm Philippe Grosjean wrote:
>> They have to write such a code like this:
>> 
>> if (x < -3) do_something
>> 
>> That way, there is no ambiguity. Don't you think it's important to
>> write clear code, including by using spaces where it makes it easier
>> to read,... and less ambiguous, as you just realize?
> 
> I fully agree, and I'm sure nobody here would dispute your advice. But 
> we all sometimes make typos, and the point here is that the grammar's 
> ambiguity makes for hard-to-find bugs.
> 
> So, if I may focus us back on the OP's suggestion: "that R simply warn 
> about an ambiguity" in 'if' statement's comparison involving '<-[0-9]'.
> It doesn't seem like an unreasonable suggestion. For comparison, GCC 
> will do the same thing with C code when the '-Wparentheses' switch if 
> assignment is used in a context where a truth value is expected. (E.g.,
> 'if (x = 3)'.)
> 
> It's been a very long time since I looked at Yacc and Lex source, but
> it looks like function 'xxif' in gram.y is the earliest place where we
> have a whole IF statement. AFAICT, this is evaluated in 'do_if'
> function of eval.c. There, the condition is evaluated via
> 'asLogicalNoNA'. Could 'do_if' instead use a function similar to
> 'asLogicalNoNA' but which issues a warning if the condition is an
> assignment?
> 
> Davor

I'm a bit doubtful about the suggestion to "trap" this kind of
thing and issue warnings afterwards. It's not just in if() statements,
but anywhere where a logical value (as "x< -3") can validly be placed
and an assignment (as "x<-3") can validly be placed.

E.g.:

  if(x<-3) print("yes") else print("no")
  # [1] "yes"

because:

  as.logical(x<-3)
  # [1] TRUE
  as.logical(x<-0)
  # [1] FALSE

Or:

  x <- -5
  y <- c(5,4,3,2,1)
  y[x<-3]
  # [1] 3

  x <- -5
  y[x< -3]
  # [1] 5 4 3 2 1

It may be all very well to say that such examples look silly
(in what context might anyone mean them seriously?), but
remember that the context of this discussion is precisely
where someone has written something they didn't mean, so
"might mean them seriously" is not a criterion.

As illustrated above, "x<-3" is valid in all sorts of syntactic
contexts.

The upshot is that, if such warnings are to be implemented
in any context -- not just "if()" -- where one wanted to
protect the innocent from their own fingers, then they would
be triggered *every time* the expression "x<-3" (or the like)
occurred! Of course one would need to be able to turn this
warning off, but if (e.g. as a precaution in a class of
beginnners) it were turned on, then there would be a huge
number of false positives filling up the screen in almost
any normal program. Reassuring for beginners!

So, on those grounds, I doubt its wisdom (and would prefer
giving the advice to bracket things, as in "x<(-3)". It's
a potential syntactic trap, but it's only one of many which
can be avoided in similar ways, and I think it's better to
teach avoidance rather than warning after the event.

Ted.

--------------------------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding at manchester.ac.uk>
Fax-to-email: +44 (0)870 094 0861
Date: 24-Aug-10                                       Time: 16:18:27
------------------------------ XFMail ------------------------------


From b.rowlingson at lancaster.ac.uk  Tue Aug 24 17:56:05 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 24 Aug 2010 16:56:05 +0100
Subject: [Rd] small syntax suggestion
In-Reply-To: <XFMail.100824161830.Ted.Harding@manchester.ac.uk>
References: <201008240742.12069.cubranic@stat.ubc.ca>
	<XFMail.100824161830.Ted.Harding@manchester.ac.uk>
Message-ID: <AANLkTin0Oxchzg4ZRL6QT7uAdhTd=S53kHmTaqmAD+2q@mail.gmail.com>

On Tue, Aug 24, 2010 at 4:18 PM, Ted Harding
<Ted.Harding at manchester.ac.uk> wrote:

> So, on those grounds, I doubt its wisdom (and would prefer
> giving the advice to bracket things, as in "x<(-3)". It's
> a potential syntactic trap, but it's only one of many which
> can be avoided in similar ways, and I think it's better to
> teach avoidance rather than warning after the event.

 Actually I think its better to teach _testing_ since it is hard to
teach all the things to avoid - they're not all listed in Patrick
Burns' R Inferno! (This particular problem *is* listed on page 49 of
said marvellous tome).

Barry


From Greg.Snow at imail.org  Tue Aug 24 18:00:27 2010
From: Greg.Snow at imail.org (Greg Snow)
Date: Tue, 24 Aug 2010 10:00:27 -0600
Subject: [Rd] How do you make a formal "feature" request?
In-Reply-To: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
References: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
Message-ID: <B37C0A15B8FB3C468B5BC7EBC7DA14CC633B8EB46B@LP-EXMBVS10.CO.IHC.COM>

I can claim some responsibility for 3 sets of functions that are in "core R", well they are in packages, but then so is the plot function, but packages that are loaded automatically in a default installation of R.  My piece of the responsibility is probably more the blame than credit (the credit goes to the R Core members who implemented the actual functions), but I will tell you the process, maybe it will work for you as well.

In my case, all the functions started with me writing my own version of the function(s) and putting them into one of my packages.  This included actual working code that did the basics of what I wanted and help pages detailing the goal/intent of the function(s) along with examples showing what it should do.  Others started using some of these functions as well until they came to the attention of a member of the R core group.  The fact that my functions were being used (or similar functionality) showed that there was interest beyond myself, the help pages showed clearly what was desired and the examples showed how it should work.  But in each of those cases (I have many other functions that have not inspired anything in core R, but are still useful in my packages) there was something about my code or implementation that the R come member saw could be improved (a phrase along the lines of "ugliest I've seen" was used in one case) and generally in less than a week from when the discussion started, there was a new function or functions in R-devel that did what my original functions tried to do, only better.

In one case the R core function did everything that I had stated in the help file, ran all the examples correctly, but did not do one of the other things that I had tried privately, but never publicized (no bug, it did what the help page said, ran all my public examples).  A bit later I presented the other situation and asked if it could be expanded to do that as well, and in just a few days the R-devel version (now in the regular version) worked for the new example as well.

So, here is a success story of what you are trying to accomplish, I think the key elements were/are:

Show that you are willing to put in some effort
Clear documentation of what you want the function(s) to do
Examples
Enough usability that others use or are interested as well

Hope this helps,

-- 
Gregory (Greg) L. Snow Ph.D.
Statistical Data Center
Intermountain Healthcare
greg.snow at imail.org
801.408.8111


> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-
> project.org] On Behalf Of Donald Winston
> Sent: Saturday, August 21, 2010 9:41 AM
> To: R Devel List
> Subject: [Rd] How do you make a formal "feature" request?
> 
> Who decides what features are in R and how they are implemented? If
> there is someone here who has that authority I have this request:
> 
> A report() function analogous to the plot() function that makes it easy
> to generate a report from a table of data. This should not be in some
> auxiliary package, but part of the core R just like plot(). As a long
> time SAS user I cannot believe R does not have this. Please don't give
> me any crap about Sweave, LaTex, and the "power" of R to roll your own.
> You don't have to "roll your own" plot do you? Reports are no
> different. If you don't agree do not bother me. If you agree then
> please bring this request to the appropriate authorities for
> consideration or tell me how to do it.
> 
> Thanks.
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From b.rowlingson at lancaster.ac.uk  Tue Aug 24 18:06:44 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 24 Aug 2010 17:06:44 +0100
Subject: [Rd] No RTFM?
In-Reply-To: <Zen-1OnuUn-0003ZQ-MI@smarthost01.mail.zen.net.uk>
References: <4C6DC76B.7000303@structuremonitoring.com>
	<Zen-1OnuUn-0003ZQ-MI@smarthost01.mail.zen.net.uk>
Message-ID: <AANLkTikP2NEA27vBWdKxs4drUTAjJHeS3YwHLNJhSn3V@mail.gmail.com>

On Tue, Aug 24, 2010 at 3:28 PM, Michael Dewey <info at aghmed.fsnet.co.uk> wrote:

> The thing I find most rude on the list is not the occasional abrupt postings
> by people who are obviously having a bad day but the number of fairly long
> exchanges which end unresolved as the OP never bothers to post a conclusion
> and we never know whether we solved his/her problem.
> I am not asking for thanks but we would all benefit from knowing how it all
> turned out.

 The elephant in the room is, I think, the idea that maybe mailing
lists have had their day - if R-help was a web-based forum then
threads could be moderated by a group of privileged individuals, or
rated by users. Basically, stackoverflow.com

For anyone who has never visited:

http://stackoverflow.com/questions/tagged/r

Good answers get modded up, bad ones slide off.

 I'm considering unsubbing from r-help, and adding the R feed from
stackoverflow to my RSS reader...

Barry


From chuck at sharpsteen.net  Tue Aug 24 18:47:51 2010
From: chuck at sharpsteen.net (Sharpie)
Date: Tue, 24 Aug 2010 09:47:51 -0700 (PDT)
Subject: [Rd] including DLL in a package
In-Reply-To: <1282644965810-2336420.post@n4.nabble.com>
References: <1282644965810-2336420.post@n4.nabble.com>
Message-ID: <1282668471578-2336992.post@n4.nabble.com>



loosmart wrote:
> 
> Good afternoon! 
> 
> It may seem trivial to some/most of You, but I found it difficult to
> properly include a C++-based .dll into a package that I want to build for
> usage in R. I read through the "Writing R extensions..." & "R
> administration ..." instructions, but it seems I did not grasp the bigger
> picture.
> 
> The way I figured out to use the .dll in my package finally worked for
> using that package from the R console, but it gives multiple error and
> warning messages when running the RCMD check pkg command in the shell.
> 
> What I did: I created the package skeleton via package.skeleton()
> including a function that makes (1) a
> library.dynam() call to a .dll and (2) a .C() call including the name of
> the function in that DLL. Next, I run RCMD INSTALL pkg to install the
> package and then created a /lib folder in the installed package containing
> the .dll file.
> I tried alternatives, e.g., (a) containing a /src folder in may package
> skeleton with the .dll in it and/or (b) including zzz.R with a .First.lib
> function including the library call .... but nothing worked out when
> running the package check.
> 
> help! thank You very much, MArtin
> 

Hi Martin,

I wrote a detailed example to a similar question on R-help.  It can be
viewed at:

http://r.789695.n4.nabble.com/Writing-own-simulation-function-in-C-td1580190.html#a1580423

The source code mentioned in the post can be obtained from:

http://gist.github.com/323498


The example was for C and not C++, but maybe it can help you get the package
building correctly.  Basically:

1) Write your C functions and put them in the /src directory of the package.

2) Write R wrappers for the C functions and put them in the /R directory
along with a zzz.R that includes a .First.Lib() which calls library.dynam().


With these requirements satisfied both R CMD INSTALL and R CMD build
--binary should be able to produce working packages.  Example files that
satisfy the points above are included in the source code I linked to.

Hope this helps!

-Charlie

-----
Charlie Sharpsteen
Undergraduate-- Environmental Resources Engineering
Humboldt State University
-- 
View this message in context: http://r.789695.n4.nabble.com/including-DLL-in-a-package-tp2336420p2336992.html
Sent from the R devel mailing list archive at Nabble.com.


From Greg.Snow at imail.org  Tue Aug 24 22:24:00 2010
From: Greg.Snow at imail.org (Greg Snow)
Date: Tue, 24 Aug 2010 14:24:00 -0600
Subject: [Rd] small syntax suggestion
In-Reply-To: <AANLkTim_YLk8rO0CVxtWz35enpGhAa-zDvYHRdq5D-JU@mail.gmail.com>
References: <AANLkTimvja3=JJ-Y8yS=8K+m8ePP7XrCUTEvzg=L9bjn@mail.gmail.com>
	<AANLkTinwC0h+oX2QhcskS_9xRuws=X9XQ2RuGnOxVCyG@mail.gmail.com>
	<04831FEE-4137-484E-8942-427085663D2F@stat.ubc.ca>
	<4C72D9AC.1080906@sciviews.org>
	<AANLkTim_YLk8rO0CVxtWz35enpGhAa-zDvYHRdq5D-JU@mail.gmail.com>
Message-ID: <B37C0A15B8FB3C468B5BC7EBC7DA14CC633B8EB650@LP-EXMBVS10.CO.IHC.COM>

In the mean time you could have student run the following code each time (put it into .Rprofile or something) until they learn good coding practices:

testfunc <- function(expr, value, ok, visible) {
	tmp <- deparse(expr)
	if( grepl( '<- *[0-9.]+ *[])&|]', tmp ) ) {
		warning(' You used "<-" in the above expression,\nit was interpreted as an assignment\nif you wanted a comparison, use a space between the "<" and the "-"')
	}
	TRUE
}

addTaskCallback( testfunc )



you might want to change the warning to cat (and add \n), or extend the regular expression logic to other cases, or ...

But if nothing else getting the warning will reinforce that parens/spaces are a good idea if only to avoid the computer complaining.  The problem is I can think of some false positives that I have not worked out yet how to avoid.

-- 
Gregory (Greg) L. Snow Ph.D.
Statistical Data Center
Intermountain Healthcare
greg.snow at imail.org
801.408.8111


> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-
> project.org] On Behalf Of ivo welch
> Sent: Tuesday, August 24, 2010 9:03 AM
> To: phgrosjean at sciviews.org
> Cc: r-devel at r-project.org
> Subject: Re: [Rd] small syntax suggestion
> 
> hi ted, philippe, and others---I agree with everything you write about
> good coding practice.    none of us would be writing x<-3, even when
> we want to assign 3.  we know better.   we would at least use a space,
> if not a paren.  alas, my suggestion is not so much for you.  It is
> trying to spare novices that are just beginning to use R some
> unnecessary frustration.   I bet that most of us have made this
> mistake at least once.
> 
> to the extent that it requires a token "<-[0-9]" to recognize this, it
> could be an easy special case/warning/error.  to the extent that it
> requires more, it is probably not worth the hassle.
> 
> [I am a great fan of syntax checking.  I am not a great fan of many
> but the simplest recycling rules (from 1 to N) BY DEFAULT.  It's just
> asking for trouble.]
> 
> regards,
> 
> /iaw
> ----
> Ivo Welch (ivo.welch at brown.edu, ivo.welch at gmail.com)
> 
> 
> 
> 
> On Mon, Aug 23, 2010 at 4:27 PM, Philippe Grosjean
> <phgrosjean at sciviews.org> wrote:
> > I tell to my students that it is very important (not only for
> legibility) to
> > place spaces between operands. They have to write such a code like
> this:
> >
> > if (x < -3) do_something
> >
> > That way, there is no ambiguity. Don't you think it's important to
> write
> > clear code, including by using spaces where it makes it easier to
> read,...
> > and less ambiguous, as you just realize?
> >
> > Best,
> >
> > Philippe Grosjean
> >
> > On 23/08/10 19:06, Davor Cubranic wrote:
> >>
> >> On 2010-08-23, at 6:15 AM, Barry Rowlingson wrote:
> >>
> >>> On Sun, Aug 22, 2010 at 4:33 PM, ivo welch<ivo.welch at gmail.com>
> ?wrote:
> >>>>
> >>>> I have found that my students often make the mistake of
> >>>> mixing up comparisons and assignments with negative numbers:
> >>>>
> >>>> ?if (x<-3) do_something;
> >>>
> >>> If you tell your students not to use '<-' for assignment, then they
> >>> can't make this mistake, because = for assignment has additional
> >>> restrictions on it:
> >>
> >> The students are trying to *compare* to a negative number, and trip
> on R's
> >> parsing of "<-". They could use '=' for assignment all they want
> (which I
> >> thought is being discouraged as a code style these days, BTW), and
> they'll
> >> still run into this problem.
> >>
> >> Davor
> >> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
> >>
> >>
> >
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From proebuck at mdanderson.org  Tue Aug 24 18:06:54 2010
From: proebuck at mdanderson.org (Roebuck,Paul L)
Date: Tue, 24 Aug 2010 11:06:54 -0500
Subject: [Rd] save() object w/o all of the loaded environment
Message-ID: <C899584E.9BE0%proebuck@mdanderson.org>

I have two packages, one that does the actual work (SC) and the other
a Tcl/Tk UI (SCUI) that invokes methods within the former. Within the
SCUI's invocation method, I save an object returned from SC, the
results of a long-running method.

Now the object is completely described by the SC package. Unfortunately,
any attempt to load the object (in a fresh R session) fails as below.

R> library(SC)
R> setwd("/path/to/results/")
R> load("sc-results.rda")
Loading Tcl/Tk interface ... done
Error: .onLoad failed in loadNamespace() for 'SCUI', details:
  call: optiondb_add("*Notebook.borderWidth", 2, "widgetDefault")
  error: could not find function "tcl"

That call (which adds resource to Tcl resource database) is made
inside SCUI. Loading tcltk package removes the problem.

R> library(tcltk)
R> load("sc-results.rda")
R> ls()
[1] "results"

But I would really prefer not to need to load tcltk at all just to
inspect/use the object, which contains nothing from SCUI anyway. Is
there a way to strip the unwanted UI prerequisite (tcltk and SCUI)
packages from the environment of the object prior/during save()?


R version 2.11.1 Patched (2010-06-03 r52201)
x86_64-apple-darwin9.8.0


From hadley at rice.edu  Tue Aug 24 22:40:38 2010
From: hadley at rice.edu (Hadley Wickham)
Date: Tue, 24 Aug 2010 15:40:38 -0500
Subject: [Rd] require is to suggests as what is to imports?
Message-ID: <AANLkTi=EOFdYKP0JUZLCz8r7KRJ1PaYFGQgresAQJ6r1@mail.gmail.com>

Hi all,

If a package suggests another package in its description, you can
check it at runtime with requires.  How do you do check if a package
is available without loading it, if you only want to access one
function in the package namespace.

Thanks,

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From ripley at stats.ox.ac.uk  Tue Aug 24 22:50:38 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 24 Aug 2010 21:50:38 +0100 (BST)
Subject: [Rd] require is to suggests as what is to imports?
In-Reply-To: <AANLkTi=EOFdYKP0JUZLCz8r7KRJ1PaYFGQgresAQJ6r1@mail.gmail.com>
References: <AANLkTi=EOFdYKP0JUZLCz8r7KRJ1PaYFGQgresAQJ6r1@mail.gmail.com>
Message-ID: <alpine.LFD.2.00.1008242144540.20682@gannet.stats.ox.ac.uk>

On Tue, 24 Aug 2010, Hadley Wickham wrote:

> Hi all,
>
> If a package suggests another package in its description, you can
> check it at runtime with requires.  How do you do check if a package

Well, not really as requires() can give an error, at least until 
2.12.0 is out.  So you need to wrap it in a try/tryCatch construct.

> is available without loading it, if you only want to access one
> function in the package namespace.

You could use try/tryCatch on pkg::fun (which is what you need to do 
with require).  It is difficult (and would be fragile since the 
details of metadata are definitely subject to change without notice) 
to ascertain what a namespace will contain/export without loading it.

> Thanks,
>
> Hadley
>
> -- 
> Assistant Professor / Dobelman Family Junior Chair
> Department of Statistics / Rice University
> http://had.co.nz/
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From edd at debian.org  Tue Aug 24 22:51:31 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 24 Aug 2010 15:51:31 -0500
Subject: [Rd] require is to suggests as what is to imports?
In-Reply-To: <AANLkTi=EOFdYKP0JUZLCz8r7KRJ1PaYFGQgresAQJ6r1@mail.gmail.com>
References: <AANLkTi=EOFdYKP0JUZLCz8r7KRJ1PaYFGQgresAQJ6r1@mail.gmail.com>
Message-ID: <19572.12499.732450.953347@max.nulle.part>


On 24 August 2010 at 15:40, Hadley Wickham wrote:
| Hi all,
| 
| If a package suggests another package in its description, you can
| check it at runtime with requires.  How do you do check if a package
| is available without loading it, if you only want to access one
| function in the package namespace.

I needed this a few days ago for a small package and resorted to this:

   .packages <- as.character(installed.packages()[,1])

   [...]

   hasGputools <- function() {
       any( "gputools" == .packages )
   }

That way I get around Depends, Suggests and other thing that may impact the
running of 'R CMD check' and friends.

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From hb at stat.berkeley.edu  Wed Aug 25 01:55:38 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Tue, 24 Aug 2010 16:55:38 -0700
Subject: [Rd] require is to suggests as what is to imports?
In-Reply-To: <19572.12499.732450.953347@max.nulle.part>
References: <AANLkTi=EOFdYKP0JUZLCz8r7KRJ1PaYFGQgresAQJ6r1@mail.gmail.com>
	<19572.12499.732450.953347@max.nulle.part>
Message-ID: <AANLkTi=xVsz3z-3mxuFCGUJUDF2sLPjDvEJM3t4G9VWL@mail.gmail.com>

isPackageInstalled <- function(package, ...) {
  path <- system.file(package=package);
  (path != "");
}

taken from R.utils (which also has a isPackageLoaded()).

/Henrik

On Tue, Aug 24, 2010 at 1:51 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
> On 24 August 2010 at 15:40, Hadley Wickham wrote:
> | Hi all,
> |
> | If a package suggests another package in its description, you can
> | check it at runtime with requires. ?How do you do check if a package
> | is available without loading it, if you only want to access one
> | function in the package namespace.
>
> I needed this a few days ago for a small package and resorted to this:
>
> ? .packages <- as.character(installed.packages()[,1])
>
> ? [...]
>
> ? hasGputools <- function() {
> ? ? ? any( "gputools" == .packages )
> ? }
>
> That way I get around Depends, Suggests and other thing that may impact the
> running of 'R CMD check' and friends.
>
> Dirk
>
> --
> Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From radford at cs.toronto.edu  Wed Aug 25 02:23:10 2010
From: radford at cs.toronto.edu (Radford Neal)
Date: Tue, 24 Aug 2010 20:23:10 -0400
Subject: [Rd] Correction to section 1.1.2 of R Internals doc, on NAMED
Message-ID: <20100825002310.GA27950@cs.toronto.edu>

I think the explanation of the NAMED field in the R Internals document
is incorrect.  In Section 1.1.2, it says:

  The named field is set and accessed by the SET_NAMED and NAMED macros,
  and take values 0, 1 and 2. R has a `call by value' illusion, so an
  assignment like
  
       b <- a
  
  appears to make a copy of a and refer to it as b. However, if neither
  a nor b are subsequently altered there is no need to copy. What really
  happens is that a new symbol b is bound to the same value as a and the
  named field on the value object is set (in this case to 2). When an
  object is about to be altered, the named field is consulted. A value
  of 2 means that the object must be duplicated before being
  changed. (Note that this does not say that it is necessary to
  duplicate, only that it should be duplicated whether necessary or
  not.) A value of 0 means that it is known that no other SEXP shares
  data with this object, and so it may safely be altered. A value of 1
  is used for situations like
  
       dim(a) <- c(7, 2)
  
  where in principle two copies of a exist for the duration of the
  computation as (in principle)
  
       a <- `dim<-`(a, c(7, 2))
  
  but for no longer, and so some primitive functions can be optimized to
  avoid a copy in this case.

The implication of this somewhat confusing explanation is that values
of variables may have NAMED of 0, and that NAMED will be 1 only
briefly, during a few operations like dim(a) <- c(7,2).  But from my
reading of the R source, this is wrong.  It seems to me that NAMED
will quite often be 1 for extended periods of time.  For instance,
after a <- c(7,2), the value stored in a will have NAMED of 1.  If at
this point a[2] <- 0 is executed, no copy is made, because NAMED is 1.
If b <- a is then executed, the same value will be in both a and b,
and to reflect this, NAMED is incremented to 2.  If a[2] <- 0 is
executed at this point, a copy is made, since NAMED is 2.

Essentially, NAMED is a count of how many variables reference a value,
except it's not necessarily accurate.  First, once NAMED reaches 2, it
doesn't get incremented any higher.  Second, no attempt is made to
decrement NAMED when a variable ceases to refer to a value.  So the
end result is that a copy needs to be made when changing a variable
whose value has NAMED of 2, since it's possible that some other
variable references the same value.

There seems to be some confusion in the R source on this.  In the
do_for procedure, the value for the for loop variable is set up with
NAMED being 0, though according to my explanation above, it ought to
be set up with NAMED of 1.  A bug is avoided here only because the
procedures for getting values from variables check if NAMED is 0, and
if so fix it up to being 1, which is the minimum that it ought to be
for a value that's stored in a variable.

Is my understanding of this correct?  Or have I missed something?

   Radford Neal


From Mark.Bravington at csiro.au  Wed Aug 25 06:06:07 2010
From: Mark.Bravington at csiro.au (Mark.Bravington at csiro.au)
Date: Wed, 25 Aug 2010 14:06:07 +1000
Subject: [Rd] RCMD CHECK and non-methods
Message-ID: <62C82B39B8A85E4B95A18F7F7B852F870576DBBB76@exvic-mbx03.nexus.csiro.au>

I recently moved a function 'subset.with.warning' into the 'mvbutils' package (a version not yet on CRAN). When I tried RCMD CHECK, I got this warning:

	* checking S3 generic/method consistency ... WARNING
	subset:
	  function(x, ...)
	subset.with.warning:
	  function(x, cond, mess.head, mess.cond, row.info, sub)

	See section 'Generic functions and methods' of the 'Writing R Extensions'
	manual.

I know that S3 method arguments need to be compatible with arguments of the generic. However, 'subset.with.warning' is deliberately not a registered S3 method, and its USAGE section doesn't include a \method{generic}{class} statement. I couldn't see anything in "R Extensions" that says "don't do this", so I'm wondering: 

 - should this really be a NOTE not a WARNING (or nothing at all)?

 - if not, shouldn't there be a more explicit statement to the effect that "if R decides it's a method, then it damned well is a method, whether you think it is or not"?

 - and if so, should there also be a check for functions that look like methods but aren't registered and declared as such?

My preference would be for the first, FWIW. Admittedly, just because I didn't register 'subset.with.warning' as an S3 method, that won't stop 'subset' from trying to use it if it ever encounters an object of class "with.warning". It's a risk that I'm happy to take, though CRAN might not be...

I made the warning go away by adding a '...' argument to the end of 'subset.with.warning', but that's not pretty.

Mark Bravington
CSIRO
Hobart
Australia

> sessionInfo()
R version 2.11.1 Patched (2010-06-30 r52418) 
i386-pc-mingw32 

locale:
[1] LC_COLLATE=English_Australia.1252  LC_CTYPE=English_Australia.1252    LC_MONETARY=English_Australia.1252 LC_NUMERIC=C                      
[5] LC_TIME=English_Australia.1252    

attached base packages:
[1] grDevices tools     tcltk     stats     graphics  utils     methods   base     

other attached packages:
[1] ad_1.0         chstuff_1.0    handy2_1.2     tweedie_2.0.2  statmod_1.4.1  handy_1.1      debug_1.2.3    mvbutils_2.5.2
> 


From ripley at stats.ox.ac.uk  Wed Aug 25 09:06:29 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 25 Aug 2010 08:06:29 +0100 (BST)
Subject: [Rd] require is to suggests as what is to imports?
In-Reply-To: <19572.12499.732450.953347@max.nulle.part>
References: <AANLkTi=EOFdYKP0JUZLCz8r7KRJ1PaYFGQgresAQJ6r1@mail.gmail.com>
	<19572.12499.732450.953347@max.nulle.part>
Message-ID: <alpine.LFD.2.00.1008250749080.28875@gannet.stats.ox.ac.uk>

On Tue, 24 Aug 2010, Dirk Eddelbuettel wrote:

>
> On 24 August 2010 at 15:40, Hadley Wickham wrote:
> | Hi all,
> |
> | If a package suggests another package in its description, you can
> | check it at runtime with requires.  How do you do check if a package
> | is available without loading it, if you only want to access one
> | function in the package namespace.
>
> I needed this a few days ago for a small package and resorted to this:
>
>   .packages <- as.character(installed.packages()[,1])
>
>   [...]
>
>   hasGputools <- function() {
>       any( "gputools" == .packages )
>   }
>
> That way I get around Depends, Suggests and other thing that may impact the
> running of 'R CMD check' and friends.

But thereby clobber your users with the run-time cost of 
installed.packages() (which can take several minutes on some Windows 
systems, and just took ca 12secs on my fastest Linux server with 3000 
packages installed).  If you want to take this route (is a package 
installed?), see the 'Note' on ?installed.packages for better 
alternatives.

However, that was not the question.  require() is most often used to 
answer the question 'is this package usable?' which includes checking 
that it is installed for the right architecture and has all its 
dependencies (recursively).  And Hadley's question implies both that a 
namespace can be loaded (includind DSO/DLL and dependencies) and that 
it contains/exports a specific function.

One thing many package authors have been forgetting is that on Mac OS 
X there are several sub-architectures and you need a DSO of the right 
architecture to be installed (and the default for R CMD INSTALL has 
been to install only one, and on Snow Leopard R and R.app run 
different sub-architectures).  As from 2.12.x this will apply to 
Windows too.


>
> Dirk
>
> -- 
> Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From maechler at stat.math.ethz.ch  Wed Aug 25 09:42:20 2010
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 25 Aug 2010 09:42:20 +0200
Subject: [Rd] save() object w/o all of the loaded environment
In-Reply-To: <C899584E.9BE0%proebuck@mdanderson.org>
References: <C899584E.9BE0%proebuck@mdanderson.org>
Message-ID: <19572.51548.264299.417078@lynne.math.ethz.ch>

>>>>> "RL" == Roebuck,Paul L <proebuck at mdanderson.org>
>>>>>     on Tue, 24 Aug 2010 11:06:54 -0500 writes:

    RL> I have two packages, one that does the actual work (SC)
    RL> and the other a Tcl/Tk UI (SCUI) that invokes methods
    RL> within the former. Within the SCUI's invocation method,
    RL> I save an object returned from SC, the results of a
    RL> long-running method.

    RL> Now the object is completely described by the SC
    RL> package. Unfortunately, any attempt to load the object
    RL> (in a fresh R session) fails as below.

    R> library(SC) setwd("/path/to/results/")
    R> load("sc-results.rda")
    RL> Loading Tcl/Tk interface ... done Error: .onLoad failed
    RL> in loadNamespace() for 'SCUI', details: call:
    RL> optiondb_add("*Notebook.borderWidth", 2,
    RL> "widgetDefault") error: could not find function "tcl"

    RL> That call (which adds resource to Tcl resource database)
    RL> is made inside SCUI. Loading tcltk package removes the
    RL> problem.

    R> library(tcltk) load("sc-results.rda") ls()
    RL> [1] "results"

    RL> But I would really prefer not to need to load tcltk at
    RL> all just to inspect/use the object, which contains
    RL> nothing from SCUI anyway. Is there a way to strip the
    RL> unwanted UI prerequisite (tcltk and SCUI) packages from
    RL> the environment of the object prior/during save()?

Yes, there is:

  > fortune("Yoda")

  Evelyn Hall: I would like to know how (if) I can extract some of the information from the
  summary of my nlme.
  Simon Blomberg: This is R. There is no if. Only how.
     -- Evelyn Hall and Simon 'Yoda' Blomberg
	R-help (April 2005)


About the "how":  I'd make use of

   ls.str(<the environment>) 

to start inspecting the objects there.
To help you further, we'd need more details, e.g. such
str()-like results of the things you are talking about.

Martin


From hadley at rice.edu  Wed Aug 25 14:32:33 2010
From: hadley at rice.edu (Hadley Wickham)
Date: Wed, 25 Aug 2010 07:32:33 -0500
Subject: [Rd] require is to suggests as what is to imports?
In-Reply-To: <alpine.LFD.2.00.1008250749080.28875@gannet.stats.ox.ac.uk>
References: <AANLkTi=EOFdYKP0JUZLCz8r7KRJ1PaYFGQgresAQJ6r1@mail.gmail.com>
	<19572.12499.732450.953347@max.nulle.part>
	<alpine.LFD.2.00.1008250749080.28875@gannet.stats.ox.ac.uk>
Message-ID: <AANLkTikXvvggGKGPYsH-rEUUzPDgZFuLFiiVgpK2Adf0@mail.gmail.com>

> But thereby clobber your users with the run-time cost of
> installed.packages() (which can take several minutes on some Windows
> systems, and just took ca 12secs on my fastest Linux server with 3000
> packages installed). ?If you want to take this route (is a package
> installed?), see the 'Note' on ?installed.packages for better alternatives.

On that note, I wrote a version of installed.packages() which runs
quite a bit faster on my computer:

installed_packages <- function() {
  paths <- unlist(lapply(.libPaths(), dir, full.names = TRUE))
  desc <- file.path(paths, "DESCRIPTION")
  desc <- desc[file.exists(desc)]

  dcf <- lapply(desc, read.dcf, fields = c("Package", "Title", "Version"))
  packages <- as.data.frame(do.call("rbind", dcf), stringsAsFactors = FALSE)

  packages$status <- ifelse(packages$Package %in% .packages(),
    "loaded", "installed")
  class(packages) <- c("packages", class(packages))
  packages[order(packages$Package), ]
}

It probably runs faster because I've eliminated some features, and
it's probably not worth spending much time optimising such a rarely
used function, but there it is for what it's worth.

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From hadley at rice.edu  Wed Aug 25 14:33:30 2010
From: hadley at rice.edu (Hadley Wickham)
Date: Wed, 25 Aug 2010 07:33:30 -0500
Subject: [Rd] require is to suggests as what is to imports?
In-Reply-To: <alpine.LFD.2.00.1008242144540.20682@gannet.stats.ox.ac.uk>
References: <AANLkTi=EOFdYKP0JUZLCz8r7KRJ1PaYFGQgresAQJ6r1@mail.gmail.com>
	<alpine.LFD.2.00.1008242144540.20682@gannet.stats.ox.ac.uk>
Message-ID: <AANLkTi=uLXuLv8RktxGCcd5L=xMOBpskBFKEXJ3Rn9D2@mail.gmail.com>

On Tue, Aug 24, 2010 at 3:50 PM, Prof Brian Ripley
<ripley at stats.ox.ac.uk> wrote:
> On Tue, 24 Aug 2010, Hadley Wickham wrote:
>
>> Hi all,
>>
>> If a package suggests another package in its description, you can
>> check it at runtime with requires. ?How do you do check if a package
>
> Well, not really as requires() can give an error, at least until 2.12.0 is
> out. ?So you need to wrap it in a try/tryCatch construct.
>
>> is available without loading it, if you only want to access one
>> function in the package namespace.
>
> You could use try/tryCatch on pkg::fun (which is what you need to do with
> require). ?It is difficult (and would be fragile since the details of
> metadata are definitely subject to change without notice) to ascertain what
> a namespace will contain/export without loading it.

Ok, thanks.

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From hadley at rice.edu  Wed Aug 25 14:34:03 2010
From: hadley at rice.edu (Hadley Wickham)
Date: Wed, 25 Aug 2010 07:34:03 -0500
Subject: [Rd] require is to suggests as what is to imports?
In-Reply-To: <AANLkTi=xVsz3z-3mxuFCGUJUDF2sLPjDvEJM3t4G9VWL@mail.gmail.com>
References: <AANLkTi=EOFdYKP0JUZLCz8r7KRJ1PaYFGQgresAQJ6r1@mail.gmail.com>
	<19572.12499.732450.953347@max.nulle.part>
	<AANLkTi=xVsz3z-3mxuFCGUJUDF2sLPjDvEJM3t4G9VWL@mail.gmail.com>
Message-ID: <AANLkTimqboW8yyObPqybKDu930hQm-G6JG8VPsSf7ULG@mail.gmail.com>

On Tue, Aug 24, 2010 at 6:55 PM, Henrik Bengtsson <hb at stat.berkeley.edu> wrote:
> isPackageInstalled <- function(package, ...) {
> ?path <- system.file(package=package);
> ?(path != "");
> }
>
> taken from R.utils (which also has a isPackageLoaded()).

Nice quick hack (subject to caveats Brian mentions).  Thanks!

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From edd at debian.org  Wed Aug 25 15:27:41 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 25 Aug 2010 08:27:41 -0500
Subject: [Rd] require is to suggests as what is to imports?
In-Reply-To: <alpine.LFD.2.00.1008250749080.28875@gannet.stats.ox.ac.uk>
References: <AANLkTi=EOFdYKP0JUZLCz8r7KRJ1PaYFGQgresAQJ6r1@mail.gmail.com>
	<19572.12499.732450.953347@max.nulle.part>
	<alpine.LFD.2.00.1008250749080.28875@gannet.stats.ox.ac.uk>
Message-ID: <19573.6733.664686.910439@max.nulle.part>


On 25 August 2010 at 08:06, Prof Brian Ripley wrote:
| On Tue, 24 Aug 2010, Dirk Eddelbuettel wrote:
| 
| >
| > On 24 August 2010 at 15:40, Hadley Wickham wrote:
| > | Hi all,
| > |
| > | If a package suggests another package in its description, you can
| > | check it at runtime with requires.  How do you do check if a package
| > | is available without loading it, if you only want to access one
| > | function in the package namespace.
| >
| > I needed this a few days ago for a small package and resorted to this:
| >
| >   .packages <- as.character(installed.packages()[,1])
| >
| >   [...]
| >
| >   hasGputools <- function() {
| >       any( "gputools" == .packages )
| >   }
| >
| > That way I get around Depends, Suggests and other thing that may impact the
| > running of 'R CMD check' and friends.
| 
| But thereby clobber your users with the run-time cost of 
| installed.packages() (which can take several minutes on some Windows 

Yes. As that was for a so-far internal-only package that in all likelihood
will never be built on Windows for limitations of the latter platform.

Regardless, I will switch to Henrik's elegant alternative.

| systems, and just took ca 12secs on my fastest Linux server with 3000 
| packages installed).  If you want to take this route (is a package 
| installed?), see the 'Note' on ?installed.packages for better 
| alternatives.

My version of ?installed.packages has no section "Note". That is on the on
the current, released version of R.

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From swz1316 at yahoo.com  Wed Aug 25 15:43:08 2010
From: swz1316 at yahoo.com (szembek)
Date: Wed, 25 Aug 2010 06:43:08 -0700 (PDT)
Subject: [Rd] Trying to configure R to use acml_mp
Message-ID: <1282743788476-2338257.post@n4.nabble.com>


Hi, I'm following up to a post I made to r-help here:
http://r.789695.n4.nabble.com/Trouble-configuring-R-to-use-ACML-tt2337193.html#a2337193

I have verified that LD_LIBRARY_PATH is set... I set it in /etc/bash.bashrc
(is that ok?) and it shows up when I echo $LD_LIBRARY_PATH I also tried
adding the paths to the ld.so cache as Prof Ripley had suggested. I get the
same results when running configure. 

So after that I decided to try and replace libRblas.so with a link to
libacml_mp.so. I ran a regular configure command followed by a make, then
added the link.  I now have this in my R lib folder... 
lrwxrwxrwx  1 root root       46 2010-08-25 09:20 libRblas.so ->
/opt/acml4.4.0/gfortran64_mp/lib/libacml_mp.so*

Is there any way I can verify that it is using this libacml_mp library now?
I ran a test script and R still only shows 100% cpu use, as if it's not
using multiple processors/cores. Is there a specific sample script I could
run that should use more than 100% so I can verify whether this is working
or not? Or maybe a command that will tell me which BLAS R is using? Thanks
in advance.
-- 
View this message in context: http://r.789695.n4.nabble.com/Trying-to-configure-R-to-use-acml-mp-tp2338257p2338257.html
Sent from the R devel mailing list archive at Nabble.com.


From swz1316 at yahoo.com  Wed Aug 25 17:56:02 2010
From: swz1316 at yahoo.com (szembek)
Date: Wed, 25 Aug 2010 08:56:02 -0700 (PDT)
Subject: [Rd] Trying to configure R to use acml_mp
In-Reply-To: <1282743788476-2338257.post@n4.nabble.com>
References: <1282743788476-2338257.post@n4.nabble.com>
Message-ID: <1282751762416-2338482.post@n4.nabble.com>


Ok, I have verified that ACML appears to be working because when I run 

set.seed (1)
m <- 10000
n <-  5000
A <- matrix (runif (m*n),m,n)
system.time (B <- crossprod(A))

It multi threads properly. My initial test script doesn't seem to utilize
multiple cores, I am going to paste it below if anyone has any insight as to
why R can't multithread this particular operation. It seems it might just be
a code optimization problem on our end, at least I know that R is configured
to use multiple cores when it can now.

Y <- rnorm(1e5)
X <- matrix(as.factor(rep(1:1e2, 5e3)), 1e5, 10)
system.time(fit <- lm(Y~X[,1] + X[,2] + X[,3] + X[,4] + X[,5]))

Thanks
-- 
View this message in context: http://r.789695.n4.nabble.com/Trying-to-configure-R-to-use-acml-mp-tp2338257p2338482.html
Sent from the R devel mailing list archive at Nabble.com.


From wdunlap at tibco.com  Thu Aug 26 02:31:27 2010
From: wdunlap at tibco.com (William Dunlap)
Date: Wed, 25 Aug 2010 17:31:27 -0700
Subject: [Rd] No [[<-.factor()
Message-ID: <77EB52C6DD32BA4D87471DCD70C8D700035B3C70@NA-PA-VBE03.na.tibco.com>

Should there be a [[<-.factor() that either throws
an error or acts like [<-.factor() to avoid making
an illegal object of class factor?

  > z <- factor(c("Two","Two","Three"), levels=c("One","Two","Three"))
  > z
  [1] Two   Two   Three
  Levels: One Two Three
  > str(z)
   Factor w/ 3 levels "One","Two","Three": 2 2 3
  > z[[2]] <- "One"
  > str(z) # the .Data part is now character
   Factor w/ 3 levels "One","Two","Three": 2 One 3
  > z
  [1] <NA> <NA> <NA>
  Levels: One Two Three
  > z[2] <- "One"
  Error in class(x) <- cx : adding class "factor" to an invalid object

Bill Dunlap
Spotfire, TIBCO Software
wdunlap tibco.com 


From radford at cs.toronto.edu  Thu Aug 26 04:50:12 2010
From: radford at cs.toronto.edu (Radford Neal)
Date: Wed, 25 Aug 2010 22:50:12 -0400
Subject: [Rd] Speeding up transpose
Message-ID: <20100826025012.GA4179@cs.toronto.edu>

I've looked at how to speed up the transpose function in R 
(ie, t(X)).

The existing code does the work with loops like the following:

	for (i = 0; i < len; i++)
	    REAL(r)[i] = REAL(a)[(i / ncol) + (i % ncol) * nrow];

It seems a bit optimistic to expect a compiler to produce good code 
from this.  I've re-written these loops as follows:

        for (i = 0, j = 0; i<len; i += 1, j += nrow) {
            if (j>=len) j -= (len-1);
            REAL(r)[i] = REAL(a)[j];
        }

The resulting improvement is sometimes dramatic.  Here's a test 
program:

        M <- matrix(seq(0,1,12000),200,60)
        
        print(system.time({for (i in 1:10000) S <- t(M)}))
        print(system.time({for (i in 1:10000) R <- t(S)}))
        
        v <- seq(0,2,12000)
        
        print(system.time({for (i in 1:100000) u <- t(v)}))
        print(system.time({for (i in 1:100000) w <- t(u)}))

Here are the times on an Intel Linux system:

    R version 2.11.1:            Modified version:

         user  system elapsed          user  system elapsed 
        1.190   0.040   1.232         0.610   0.010   0.619 
         user  system elapsed          user  system elapsed 
        1.200   0.020   1.226         0.610   0.000   0.616 
         user  system elapsed          user  system elapsed 
        0.800   0.010   0.813         0.750   0.000   0.752 
         user  system elapsed          user  system elapsed 
        0.910   0.010   0.921         0.860   0.000   0.864 

Here are the times on a SPARC Solaris system:

    R version 2.11.1:            Modified version:

         user  system elapsed          user  system elapsed 
       18.643   0.041  18.685         2.994   0.039   3.033
         user  system elapsed          user  system elapsed 
       18.574   0.041  18.616         3.123   0.039   3.163
         user  system elapsed          user  system elapsed 
        3.803   0.271   4.075         3.868   0.296   4.163
         user  system elapsed          user  system elapsed 
        4.184   0.273   4.457         4.238   0.302   4.540

So with the modification, transpose for a 60x200 or 200x60 matrix is
about a factor of two faster on the Intel system, and a factor of six
faster on the SPARC system.  There is little or no gain from the
modification when transposing a row or column vector, however.  (I
think it must be that on these machines multiplies and divides do not
take constant time, but are faster when, for instance, dividing by 1.)

I've appended below the new version of the modified part of the
do_transpose function in src/main/array.c.

    Radford Neal

----------------------------------------------------------------------

    PROTECT(r = allocVector(TYPEOF(a), len));
    switch (TYPEOF(a)) {
    case LGLSXP:
    case INTSXP:
        for (i = 0, j = 0; i<len; i += 1, j += nrow) {
            if (j>=len) j -= (len-1);
            INTEGER(r)[i] = INTEGER(a)[j];
        }
    case REALSXP:
        for (i = 0, j = 0; i<len; i += 1, j += nrow) {
            if (j>=len) j -= (len-1);
            REAL(r)[i] = REAL(a)[j];
        }
        break;
    case CPLXSXP:
        for (i = 0, j = 0; i<len; i += 1, j += nrow) {
            if (j>=len) j -= (len-1);
            COMPLEX(r)[i] = COMPLEX(a)[j];
        }
        break;
    case STRSXP:
        for (i = 0, j = 0; i<len; i += 1, j += nrow) {
            if (j>=len) j -= (len-1);
            SET_STRING_ELT(r, i, STRING_ELT(a,j));
        }
        break;
    case VECSXP:
        for (i = 0, j = 0; i<len; i += 1, j += nrow) {
            if (j>=len) j -= (len-1);
            SET_VECTOR_ELT(r, i, VECTOR_ELT(a,j));
        }
        break;
    case RAWSXP:
        for (i = 0, j = 0; i<len; i += 1, j += nrow) {
            if (j>=len) j -= (len-1);
            RAW(r)[i] = RAW(a)[j];
        }
        break;
    default:
        UNPROTECT(1);
        goto not_matrix;
    }


From sandro.saitta at gmail.com  Thu Aug 26 09:06:03 2010
From: sandro.saitta at gmail.com (clusty)
Date: Thu, 26 Aug 2010 00:06:03 -0700 (PDT)
Subject: [Rd] Decision tree and factor variables
Message-ID: <1282806363379-2339234.post@n4.nabble.com>


Hello,

I'm building a decision tree in R with the rpart package. Modeling is
fine. But when it comes to scoring, I have the following issue:

factor 'cust_language' has new level(s) OT

I think this comes from the fact that when learning, the DT doesn't
see all the possible value of the factor variable cust_language. When
scoring, new values comes and I get this error. However, it should not
be a problem to have new values for a factor variable when scoring
with decision tree.

Any idea on how I should handle the problem?
Thanks. 
-- 
View this message in context: http://r.789695.n4.nabble.com/Decision-tree-and-factor-variables-tp2339234p2339234.html
Sent from the R devel mailing list archive at Nabble.com.


From gavin.simpson at ucl.ac.uk  Thu Aug 26 09:54:48 2010
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Thu, 26 Aug 2010 08:54:48 +0100
Subject: [Rd] Decision tree and factor variables
In-Reply-To: <1282806363379-2339234.post@n4.nabble.com>
References: <1282806363379-2339234.post@n4.nabble.com>
Message-ID: <1282809288.2302.80.camel@desktop.localdomain>

On Thu, 2010-08-26 at 00:06 -0700, clusty wrote:
> Hello,
> 
> I'm building a decision tree in R with the rpart package. Modeling is
> fine. But when it comes to scoring, I have the following issue:
> 
> factor 'cust_language' has new level(s) OT
> 
> I think this comes from the fact that when learning, the DT doesn't
> see all the possible value of the factor variable cust_language. When
> scoring, new values comes and I get this error. However, it should not
> be a problem to have new values for a factor variable when scoring
> with decision tree.
> 
> Any idea on how I should handle the problem?
> Thanks. 

Wrong list. R-Devel is for discussion pertaining to development of and
with R. You need R-Help.

G

-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
 Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
 ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
 Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
 Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
 UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From maechler at stat.math.ethz.ch  Thu Aug 26 10:34:13 2010
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 26 Aug 2010 10:34:13 +0200
Subject: [Rd] No [[<-.factor()
In-Reply-To: <77EB52C6DD32BA4D87471DCD70C8D700035B3C70@NA-PA-VBE03.na.tibco.com>
References: <77EB52C6DD32BA4D87471DCD70C8D700035B3C70@NA-PA-VBE03.na.tibco.com>
Message-ID: <19574.9989.644763.347483@lynne.math.ethz.ch>

>>>>> "WD" == William Dunlap <wdunlap at tibco.com>
>>>>>     on Wed, 25 Aug 2010 17:31:27 -0700 writes:

    WD> Should there be a [[<-.factor() that either throws
    WD> an error or acts like [<-.factor() to avoid making
    WD> an illegal object of class factor?

Yes, one or the other.
Note that both `[<-` and `[[<-` are "Primitive" and do some
"informal dispatch" in addition to the formal method dispatch,
so there's no need for an explicit '[[<-.factor' method definition.
For factors, it seems rational and "expectable" that 
double bracket behaves as single bracket when *one* element is
assigned.  
   z[[2:3]] <- c("Two, Three")
however  should continue to give an error.

Martin Maechler, ETH Zurich

    >> z <- factor(c("Two","Two","Three"), levels=c("One","Two","Three"))
    >> z
    WD> [1] Two   Two   Three
    WD> Levels: One Two Three
    >> str(z)
    WD> Factor w/ 3 levels "One","Two","Three": 2 2 3
    >> z[[2]] <- "One"
    >> str(z) # the .Data part is now character
    WD> Factor w/ 3 levels "One","Two","Three": 2 One 3
    >> z
    WD> [1] <NA> <NA> <NA>
    WD> Levels: One Two Three
    >> z[2] <- "One"
    WD> Error in class(x) <- cx : adding class "factor" to an invalid object

    WD> Bill Dunlap
    WD> Spotfire, TIBCO Software
    WD> wdunlap tibco.com 

    WD> ______________________________________________
    WD> R-devel at r-project.org mailing list
    WD> https://stat.ethz.ch/mailman/listinfo/r-devel


From spencer.graves at structuremonitoring.com  Thu Aug 26 10:52:32 2010
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Thu, 26 Aug 2010 01:52:32 -0700
Subject: [Rd] reliability of R-Forge? (moving to r-Devel)
In-Reply-To: <loom.20100826T100022-947@post.gmane.org>
References: <AANLkTimaV9pQgY7rifD8ogsSiciTcvrZ3SsYCWZTYvRK@mail.gmail.com>
	<loom.20100826T100022-947@post.gmane.org>
Message-ID: <4C762B50.7000402@structuremonitoring.com>

  Hello:


       Can anyone comment on plans for R-Forge?  Please see thread below.


       Ramsay, Hooker and I would like to release a new version of "fda" 
to CRAN.  We committed changes for it last Friday.  I'd like to see 
reports of their "daily checks", then submit to CRAN from R-Forge.  
Unfortunately, it seems to be down now, saying "R-Forge Could Not 
Connect to Database:".  I just tried, 'install.packages("fda", 
repos="http://R-Forge.R-project.org")', and got the previous version, 
which indicates that my changes from last Friday have not been built 
yet.  Also, a few days ago, I got an error from 
'install.packages("pfda", repos="http://R-Forge.R-project.org")' (a 
different package, 'pfda' NOT 'fda').  I don't remember the error 
message, but this same command worked for me just now.


       I infer from this that I should consider submitting the latest 
version of 'fda' to CRAN manually, not waiting for the R-Forge 
[formerly] "daily" builds and checks.


       R-Forge is an incredibly valuable resource.  It would be even 
more valuable if it were more reliable.  I very much appreciate the work 
of the volunteers who maintain it;  I am unfortunately not in a position 
to volunteer to do more for the R-Project generally and R-Forge in 
particular than I already do.


       Thanks,
       Spencer Graves


On 8/26/2010 1:07 AM, Jari Oksanen wrote:
> David Kane<dave<at>  kanecap.com>  writes:
>
>> How reliable is R-Forge? http://r-forge.r-project.org/
>>
>> It is down now (for me). Reporting "R-Forge Could Not Connect to Database: "
>>
>> I have just started to use it for a project. It has been down for
>> several hours (at least) on different occasions over the last couple
>> of days. Is that common? Will it be more stable soon?
>>
>> Apologies if this is not an appropriate question for R-help.
>>
> Dave,
>
> This is rather a subject for R-devel. Ignoring this inappropriateness: yes,
> indeed, R-Forge has been flaky lately. The database was disconnected for the
> whole weekend, came back on Monday, and is gone again. It seems that mailing
> lists and email alerts of commits were not working even when the basic R-Forge
> was up.
>
> I have sent two messages to R-Forge at r-project.org on these problems. I haven't
> got no response, but soon after the first message the Forge woke up, and soon
> after the second message it went down. Since I'm not Bayeasian, I don't know
> what to say about the effect of my messages.
>
> Cheers, Jari Oksanen
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Spencer Graves, PE, PhD
President and Chief Operating Officer
Structure Inspection and Monitoring, Inc.
751 Emerson Ct.
San Jos?, CA 95126
ph:  408-655-4567


From mdowle at mdowle.plus.com  Thu Aug 26 12:33:19 2010
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Thu, 26 Aug 2010 11:33:19 +0100
Subject: [Rd] reliability of R-Forge? (moving to r-Devel)
References: <AANLkTimaV9pQgY7rifD8ogsSiciTcvrZ3SsYCWZTYvRK@mail.gmail.com><loom.20100826T100022-947@post.gmane.org>
	<4C762B50.7000402@structuremonitoring.com>
Message-ID: <i55fu1$n57$1@dough.gmane.org>


Spencer and David,

My experience of R-Forge :

i) SVN access and project management web pages have been *very* reliable all 
this year ... up until the weekend.  This week was the first time I ever saw 
"R-Forge Could Not Connect to Database".

ii) The nightly build and checks have been consistently unreliable all year. 
At best the nightly build is a few days behind the latest commit, but they 
are working on it. This isn't as critical as (i) though since users can 
install from source: 
install.packages("<pkg>",type="source",repos="http://R-Forge.R-project.org").

iii) Mailing lists have been down since the weekend and I too have been 
mailing R-Forge at r-project.org with no response.  That is *very* unusual; 
first time.

Hope that helps to put it into context at least.

Matthew

P.S. I notice that R-Forge appears to be back up now, including the mailing 
lists.


"Spencer Graves" <spencer.graves at structuremonitoring.com> wrote in message 
news:4C762B50.7000402 at structuremonitoring.com...
  Hello:


       Can anyone comment on plans for R-Forge?  Please see thread below.


       Ramsay, Hooker and I would like to release a new version of "fda"
to CRAN.  We committed changes for it last Friday.  I'd like to see
reports of their "daily checks", then submit to CRAN from R-Forge.
Unfortunately, it seems to be down now, saying "R-Forge Could Not
Connect to Database:".  I just tried, 'install.packages("fda",
repos="http://R-Forge.R-project.org")', and got the previous version,
which indicates that my changes from last Friday have not been built
yet.  Also, a few days ago, I got an error from
'install.packages("pfda", repos="http://R-Forge.R-project.org")' (a
different package, 'pfda' NOT 'fda').  I don't remember the error
message, but this same command worked for me just now.


       I infer from this that I should consider submitting the latest
version of 'fda' to CRAN manually, not waiting for the R-Forge
[formerly] "daily" builds and checks.


       R-Forge is an incredibly valuable resource.  It would be even
more valuable if it were more reliable.  I very much appreciate the work
of the volunteers who maintain it;  I am unfortunately not in a position
to volunteer to do more for the R-Project generally and R-Forge in
particular than I already do.


       Thanks,
       Spencer Graves


On 8/26/2010 1:07 AM, Jari Oksanen wrote:
> David Kane<dave<at>  kanecap.com>  writes:
>
>> How reliable is R-Forge? http://r-forge.r-project.org/
>>
>> It is down now (for me). Reporting "R-Forge Could Not Connect to 
>> Database: "
>>
>> I have just started to use it for a project. It has been down for
>> several hours (at least) on different occasions over the last couple
>> of days. Is that common? Will it be more stable soon?
>>
>> Apologies if this is not an appropriate question for R-help.
>>
> Dave,
>
> This is rather a subject for R-devel. Ignoring this inappropriateness: 
> yes,
> indeed, R-Forge has been flaky lately. The database was disconnected for 
> the
> whole weekend, came back on Monday, and is gone again. It seems that 
> mailing
> lists and email alerts of commits were not working even when the basic 
> R-Forge
> was up.
>
> I have sent two messages to R-Forge at r-project.org on these problems. I 
> haven't
> got no response, but soon after the first message the Forge woke up, and 
> soon
> after the second message it went down. Since I'm not Bayeasian, I don't 
> know
> what to say about the effect of my messages.
>
> Cheers, Jari Oksanen
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Spencer Graves, PE, PhD
President and Chief Operating Officer
Structure Inspection and Monitoring, Inc.
751 Emerson Ct.
San Jos?, CA 95126
ph:  408-655-4567


From ggrothendieck at gmail.com  Thu Aug 26 14:22:47 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 26 Aug 2010 08:22:47 -0400
Subject: [Rd] reliability of R-Forge? (moving to r-Devel)
In-Reply-To: <4C762B50.7000402@structuremonitoring.com>
References: <AANLkTimaV9pQgY7rifD8ogsSiciTcvrZ3SsYCWZTYvRK@mail.gmail.com>
	<loom.20100826T100022-947@post.gmane.org>
	<4C762B50.7000402@structuremonitoring.com>
Message-ID: <AANLkTinaGmVB2wG2mdER-0OfWSX8ThZtAs6q++idENVv@mail.gmail.com>

On Thu, Aug 26, 2010 at 4:52 AM, Spencer Graves
<spencer.graves at structuremonitoring.com> wrote:
> ?Hello:
>
>
> ? ? ?Can anyone comment on plans for R-Forge? ?Please see thread below.
>
>
> ? ? ?Ramsay, Hooker and I would like to release a new version of "fda" to
> CRAN. ?We committed changes for it last Friday. ?I'd like to see reports of
> their "daily checks", then submit to CRAN from R-Forge. ?Unfortunately, it
> seems to be down now, saying "R-Forge Could Not Connect to Database:". ?I
> just tried, 'install.packages("fda", repos="http://R-Forge.R-project.org")',
> and got the previous version, which indicates that my changes from last
> Friday have not been built yet. ?Also, a few days ago, I got an error from
> 'install.packages("pfda", repos="http://R-Forge.R-project.org")' (a
> different package, 'pfda' NOT 'fda'). ?I don't remember the error message,
> but this same command worked for me just now.
>
>
> ? ? ?I infer from this that I should consider submitting the latest version
> of 'fda' to CRAN manually, not waiting for the R-Forge [formerly] "daily"
> builds and checks.
>
>
> ? ? ?R-Forge is an incredibly valuable resource. ?It would be even more
> valuable if it were more reliable. ?I very much appreciate the work of the
> volunteers who maintain it; ?I am unfortunately not in a position to
> volunteer to do more for the R-Project generally and R-Forge in particular
> than I already do.

I haven't tried it but I understand from the r-forge manual that it
now supports foreign subversion repositories.  One could host
software on googlecode or other free subversion repository and still
have it available through r-forge.  That way you could access the
software even if r-forge were down.

If anyone gets this to work and can post detailed instructions it
would be helpful.

-- 
GKX Group
GKX Associates Inc.
1-877-GKX-GROUP
ggrothendieck at gmail.com


From baptiste.auguie at googlemail.com  Thu Aug 26 15:20:47 2010
From: baptiste.auguie at googlemail.com (=?iso-8859-1?Q?baptiste_Augui=E9?=)
Date: Thu, 26 Aug 2010 15:20:47 +0200
Subject: [Rd] reliability of R-Forge? (moving to r-Devel)
In-Reply-To: <AANLkTinaGmVB2wG2mdER-0OfWSX8ThZtAs6q++idENVv@mail.gmail.com>
References: <AANLkTimaV9pQgY7rifD8ogsSiciTcvrZ3SsYCWZTYvRK@mail.gmail.com>
	<loom.20100826T100022-947@post.gmane.org>
	<4C762B50.7000402@structuremonitoring.com>
	<AANLkTinaGmVB2wG2mdER-0OfWSX8ThZtAs6q++idENVv@mail.gmail.com>
Message-ID: <25CE2145-7F6C-4EEC-A672-184DEC638F72@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100826/344ce000/attachment.pl>

From maechler at stat.math.ethz.ch  Thu Aug 26 17:36:22 2010
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 26 Aug 2010 17:36:22 +0200
Subject: [Rd] RCMD CHECK and non-methods
In-Reply-To: <62C82B39B8A85E4B95A18F7F7B852F870576DBBB76@exvic-mbx03.nexus.csiro.au>
References: <62C82B39B8A85E4B95A18F7F7B852F870576DBBB76@exvic-mbx03.nexus.csiro.au>
Message-ID: <19574.35318.774118.197785@lynne.math.ethz.ch>

>>>>>   <Mark.Bravington at csiro.au>
>>>>>     on Wed, 25 Aug 2010 14:06:07 +1000 writes:

    > I recently moved a function 'subset.with.warning' into the 'mvbutils' package (a version not yet on CRAN). When I tried RCMD CHECK, I got this warning:
    > * checking S3 generic/method consistency ... WARNING
    > subset:
    > function(x, ...)
    > subset.with.warning:
    > function(x, cond, mess.head, mess.cond, row.info, sub)

    > See section 'Generic functions and methods' of the 'Writing R Extensions'
    > manual.

    > I know that S3 method arguments need to be compatible with arguments of the generic. However, 'subset.with.warning' is deliberately not a registered S3 method, 

I think that's your real trouble ... and then your users' if you
really insist.
Short answer:  "Don't do that!"

There have been a few exceptions of "100 years old" R functions
which validated this rule,
the most notable probably  t() and t.test(),
and we (R core) have explicitly listed them in the code base
as "yes, looks like a method for an S3 generic, but not it ain't!",
but have basically "forbidden" to commit more such crimes.
{Also, if you are interested: I think both  t() and t.test()
 pre-dated S3}


    > and its USAGE section doesn't include a \method{generic}{class} statement. I couldn't see anything in "R Extensions" that says "don't do this", so I'm wondering: 

Yes, we should add a such "don't do this" somewhere.

Can you propose a good place to put it in there?

    > - should this really be a NOTE not a WARNING (or nothing at all)?

{from the above: definitely a warning, if not "worse"}....

Best regards,
Martin 

Martin Maechler, ETH Zurich

    > - if not, shouldn't there be a more explicit statement to the effect that "if R decides it's a method, then it damned well is a method, whether you think it is or not"?

    > - and if so, should there also be a check for functions that look like methods but aren't registered and declared as such?

    > My preference would be for the first, FWIW. Admittedly, just because I didn't register 'subset.with.warning' as an S3 method, that won't stop 'subset' from trying to use it if it ever encounters an object of class "with.warning". It's a risk that I'm happy to take, though CRAN might not be...

    > I made the warning go away by adding a '...' argument to the end of 'subset.with.warning', but that's not pretty.

    > Mark Bravington
    > CSIRO
    > Hobart
    > Australia

    >> sessionInfo()
    > R version 2.11.1 Patched (2010-06-30 r52418) 
    > i386-pc-mingw32 

    > locale:
    > [1] LC_COLLATE=English_Australia.1252  LC_CTYPE=English_Australia.1252    LC_MONETARY=English_Australia.1252 LC_NUMERIC=C                      
    > [5] LC_TIME=English_Australia.1252    

    > attached base packages:
    > [1] grDevices tools     tcltk     stats     graphics  utils     methods   base     

    > other attached packages:
    > [1] ad_1.0         chstuff_1.0    handy2_1.2     tweedie_2.0.2  statmod_1.4.1  handy_1.1      debug_1.2.3    mvbutils_2.5.2
    >> 

    > ______________________________________________
    > R-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-devel


From spencer.graves at structuremonitoring.com  Thu Aug 26 17:57:20 2010
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Thu, 26 Aug 2010 08:57:20 -0700
Subject: [Rd] reliability of R-Forge? (moved to R-Devel)
In-Reply-To: <alpine.LRH.1.00.1008261122110.8608@oebafba.bjyevire.pbz>
References: <AANLkTimaV9pQgY7rifD8ogsSiciTcvrZ3SsYCWZTYvRK@mail.gmail.com>	<1282808371.2302.69.camel@desktop.localdomain>
	<alpine.LRH.1.00.1008261122110.8608@oebafba.bjyevire.pbz>
Message-ID: <4C768EE0.6010302@structuremonitoring.com>

        I earlier moved a part of this thread to R-Devel, and got some 
replies there.


       At least one page on R-Forge says, "We are currently adapting the 
R-packages-plugin in order to work together with the new FusionForge 
infrastructure. Some services are thus not yet available."  I don't know 
if R-Forge is accepting new volunteers, but it looks like they could use 
help.  Unfortunately, I'm not in a position to volunteer.


       Best Wishes,
       Spencer Graves


On 8/26/2010 8:28 AM, R P Herrold wrote:
> On Thu, 26 Aug 2010, Gavin Simpson wrote:
>
>> On Thu, 2010-08-26 at 02:30 -0400, David Kane wrote:
>>> How reliable is R-Forge? http://r-forge.r-project.org/
>>>
>>> It is down now (for me). Reporting "R-Forge Could Not Connect to 
>>> Database: "
>
> late to chime in, so had tossed the first piece.  As this relates to 
> 'reliability of R-Forge' in the sense of possible process issues, 
> rather than availability of the archive, I wanted to 'tag into' this 
> thread
>
> I 'mirror' r-forge, so I have not seen this ...
>
> One thing I note, mirroring r-forge, and processing 'diffs' netween 
> successive days, is that the md5sums of some packages regularly change 
> without version number bumps.  From this morning's report in my email:
>
> Thu Aug 26 04:30:01 EDT 2010
>
> --- /tmp/rforge-pre.txt 2010-08-26 04:30:33.000000000 -0400
> +++ /tmp/rforge-post.txt        2010-08-26 04:38:03.000000000 -0400
> @@ -8,18 +8,18 @@
>  AquaEnv_1.0-1.tar.gz   615059a5369d1aba149e6142fedffdde
>  ArvoRe_0.1.6.tar.gz    c955ae7c64c4270740172ad2219060ff
>  BB_2010.7-1.tar.gz     4f85093ab24fac5c0b91539ec6efb8b7
> -BCE_2.0.tar.gz 5a3fe3ecabbe2b2e278f6a48fc19d18d
> -BIOMOD_1.1-5.tar.gz    d2f74f21bc8858844f8d71627fd8e687
> +BCE_2.0.tar.gz 65a968c586e729a1c1ca34a37f5c293a
> +BIOMOD_1.1-5.tar.gz    6929e5ad6a14709de7065286ec684942
>  ...
> -BTSPAS_2010.08.tar.gz  16b8f265846a512c329f0b52ba1924ab
> +BTSPAS_2010.08.tar.gz  809a96b11f1094e95b217af113abd0ac
>  ...
> -BayesR_0.1-1.tar.gz    72bd41c90845032eb9d15c4c6d086dec
> +BayesFactorPCL_0.5.tar.gz      173ab741c399309314eff240a4c3cd6f
> +BayesR_0.1-1.tar.gz    9560b511f1b955a60529599672d58fea
>  ...
> -BiplotGUI_0.0-6.tar.gz 594b3a275cde018eaa74e1ef974dd522
> +BiplotGUI_0.0-6.tar.gz 857a484fdba6cb97be4e42e38bb6d0fd
>  ...
> -IsoGene_1.0-18.tar.gz  679a5aecb7182474ed6a870fa52ca2e3
> +IsoGene_1.0-18.tar.gz  f37572957b2a9846a8d738ec88ac8690
>
> and so forth.  I've not taken the trime to understand why seemingly 
> new versions are appearing without version bumps yet.
>
> Is anyone aware of explanations, other than a release process that 
> does not require unique versioning of differing content? [it seems 
> pretty basic to me that a 'receiver' of new content could do the 
> checks I do, and decline to push conflicting md5sums over an 
> identically named prior candidate in archive]
>
> -- Russ herrold
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

-- 
Spencer Graves, PE, PhD
President and Chief Operating Officer
Structure Inspection and Monitoring, Inc.
751 Emerson Ct.
San Jos?, CA 95126
ph:  408-655-4567


From spencer.graves at structuremonitoring.com  Thu Aug 26 18:41:29 2010
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Thu, 26 Aug 2010 09:41:29 -0700
Subject: [Rd] reliability of R-Forge? (moved to R-Devel)
In-Reply-To: <alpine.LRH.1.00.1008261122110.8608@oebafba.bjyevire.pbz>
References: <AANLkTimaV9pQgY7rifD8ogsSiciTcvrZ3SsYCWZTYvRK@mail.gmail.com>	<1282808371.2302.69.camel@desktop.localdomain>
	<alpine.LRH.1.00.1008261122110.8608@oebafba.bjyevire.pbz>
Message-ID: <4C769939.9050707@structuremonitoring.com>

Hi, Russ:


	  As noted by Brian Peterson in a separate email, R-Forge has a 
"Revision" number in addition to the version number.  For example, the 
'fda' package is currently at version 2.2.3 with Rev.: 484 on R-Forge. 
Each SVN Commit increments the Rev. number [after a successful build, I 
think], but the version number only changes if that change includes a 
change in the revision number in the DESCRIPTION.  I don't know for 
sure, but I assume that the "md5sums" probably changes with each Rev.


	  If this is NOT correct, I hope someone who knows will clarify this.


	  Best Wishes,
	  Spencer


########################
        I earlier moved a part of this thread to R-Devel, and got some 
replies there.


       At least one page on R-Forge says, "We are currently adapting the 
R-packages-plugin in order to work together with the new FusionForge 
infrastructure. Some services are thus not yet available."  I don't know 
if R-Forge is accepting new volunteers, but it looks like they could use 
help.  Unfortunately, I'm not in a position to volunteer.


       Best Wishes,
       Spencer Graves


On 8/26/2010 8:28 AM, R P Herrold wrote:
> On Thu, 26 Aug 2010, Gavin Simpson wrote:
>
>> On Thu, 2010-08-26 at 02:30 -0400, David Kane wrote:
>>> How reliable is R-Forge? http://r-forge.r-project.org/
>>>
>>> It is down now (for me). Reporting "R-Forge Could Not Connect to
>>> Database: "
>
> late to chime in, so had tossed the first piece.  As this relates to
> 'reliability of R-Forge' in the sense of possible process issues,
> rather than availability of the archive, I wanted to 'tag into' this
> thread
>
> I 'mirror' r-forge, so I have not seen this ...
>
> One thing I note, mirroring r-forge, and processing 'diffs' netween
> successive days, is that the md5sums of some packages regularly change
> without version number bumps.  From this morning's report in my email:
>
> Thu Aug 26 04:30:01 EDT 2010
>
> --- /tmp/rforge-pre.txt 2010-08-26 04:30:33.000000000 -0400
> +++ /tmp/rforge-post.txt        2010-08-26 04:38:03.000000000 -0400
> @@ -8,18 +8,18 @@
>  AquaEnv_1.0-1.tar.gz   615059a5369d1aba149e6142fedffdde
>  ArvoRe_0.1.6.tar.gz    c955ae7c64c4270740172ad2219060ff
>  BB_2010.7-1.tar.gz     4f85093ab24fac5c0b91539ec6efb8b7
> -BCE_2.0.tar.gz 5a3fe3ecabbe2b2e278f6a48fc19d18d
> -BIOMOD_1.1-5.tar.gz    d2f74f21bc8858844f8d71627fd8e687
> +BCE_2.0.tar.gz 65a968c586e729a1c1ca34a37f5c293a
> +BIOMOD_1.1-5.tar.gz    6929e5ad6a14709de7065286ec684942
>  ...
> -BTSPAS_2010.08.tar.gz  16b8f265846a512c329f0b52ba1924ab
> +BTSPAS_2010.08.tar.gz  809a96b11f1094e95b217af113abd0ac
>  ...
> -BayesR_0.1-1.tar.gz    72bd41c90845032eb9d15c4c6d086dec
> +BayesFactorPCL_0.5.tar.gz      173ab741c399309314eff240a4c3cd6f
> +BayesR_0.1-1.tar.gz    9560b511f1b955a60529599672d58fea
>  ...
> -BiplotGUI_0.0-6.tar.gz 594b3a275cde018eaa74e1ef974dd522
> +BiplotGUI_0.0-6.tar.gz 857a484fdba6cb97be4e42e38bb6d0fd
>  ...
> -IsoGene_1.0-18.tar.gz  679a5aecb7182474ed6a870fa52ca2e3
> +IsoGene_1.0-18.tar.gz  f37572957b2a9846a8d738ec88ac8690
>
> and so forth.  I've not taken the trime to understand why seemingly
> new versions are appearing without version bumps yet.
>
> Is anyone aware of explanations, other than a release process that
> does not require unique versioning of differing content? [it seems
> pretty basic to me that a 'receiver' of new content could do the
> checks I do, and decline to push conflicting md5sums over an
> identically named prior candidate in archive]
>
> -- Russ herrold
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

-- 
Spencer Graves, PE, PhD
President and Chief Operating Officer
Structure Inspection and Monitoring, Inc.
751 Emerson Ct.
San Jos?, CA 95126
ph:  408-655-4567


From simon.urbanek at r-project.org  Thu Aug 26 18:46:33 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 26 Aug 2010 12:46:33 -0400
Subject: [Rd] RCMD CHECK and non-methods
In-Reply-To: <19574.35318.774118.197785@lynne.math.ethz.ch>
References: <62C82B39B8A85E4B95A18F7F7B852F870576DBBB76@exvic-mbx03.nexus.csiro.au>
	<19574.35318.774118.197785@lynne.math.ethz.ch>
Message-ID: <80CFAA95-BC98-47AE-8A16-9CB753880E7D@r-project.org>


On Aug 26, 2010, at 11:36 AM, Martin Maechler wrote:

>>>>>>  <Mark.Bravington at csiro.au>
>>>>>>    on Wed, 25 Aug 2010 14:06:07 +1000 writes:
> 
>> I recently moved a function 'subset.with.warning' into the 'mvbutils' package (a version not yet on CRAN). When I tried RCMD CHECK, I got this warning:
>> * checking S3 generic/method consistency ... WARNING
>> subset:
>> function(x, ...)
>> subset.with.warning:
>> function(x, cond, mess.head, mess.cond, row.info, sub)
> 
>> See section 'Generic functions and methods' of the 'Writing R Extensions'
>> manual.
> 
>> I know that S3 method arguments need to be compatible with arguments of the generic. However, 'subset.with.warning' is deliberately not a registered S3 method, 
> 
> I think that's your real trouble ... and then your users' if you
> really insist.
> Short answer:  "Don't do that!"
> 
> There have been a few exceptions of "100 years old" R functions
> which validated this rule,
> the most notable probably  t() and t.test(),
> and we (R core) have explicitly listed them in the code base
> as "yes, looks like a method for an S3 generic, but not it ain't!",
> but have basically "forbidden" to commit more such crimes.
> {Also, if you are interested: I think both  t() and t.test()
> pre-dated S3}
> 

However, one would hope that S3 will be replaced by S4 (or R5? ;)) eventually so requiring such an arcane rule seems little strong. Personally, I prefer the use of . to that of camelCase [I find it more readable and faster to type] and thus I'm with Mark on this one. IMHO it is perfectly legal and clean to declare a symbol as a function and not an S3 method.

Cheers,
Simon



> 
>> and its USAGE section doesn't include a \method{generic}{class} statement. I couldn't see anything in "R Extensions" that says "don't do this", so I'm wondering: 
> 
> Yes, we should add a such "don't do this" somewhere.
> 
> Can you propose a good place to put it in there?
> 
>> - should this really be a NOTE not a WARNING (or nothing at all)?
> 
> {from the above: definitely a warning, if not "worse"}....
> 
> Best regards,
> Martin 
> 
> Martin Maechler, ETH Zurich
> 
>> - if not, shouldn't there be a more explicit statement to the effect that "if R decides it's a method, then it damned well is a method, whether you think it is or not"?
> 
>> - and if so, should there also be a check for functions that look like methods but aren't registered and declared as such?
> 
>> My preference would be for the first, FWIW. Admittedly, just because I didn't register 'subset.with.warning' as an S3 method, that won't stop 'subset' from trying to use it if it ever encounters an object of class "with.warning". It's a risk that I'm happy to take, though CRAN might not be...
> 
>> I made the warning go away by adding a '...' argument to the end of 'subset.with.warning', but that's not pretty.
> 
>> Mark Bravington
>> CSIRO
>> Hobart
>> Australia
> 
>>> sessionInfo()
>> R version 2.11.1 Patched (2010-06-30 r52418) 
>> i386-pc-mingw32 
> 
>> locale:
>> [1] LC_COLLATE=English_Australia.1252  LC_CTYPE=English_Australia.1252    LC_MONETARY=English_Australia.1252 LC_NUMERIC=C                      
>> [5] LC_TIME=English_Australia.1252    
> 
>> attached base packages:
>> [1] grDevices tools     tcltk     stats     graphics  utils     methods   base     
> 
>> other attached packages:
>> [1] ad_1.0         chstuff_1.0    handy2_1.2     tweedie_2.0.2  statmod_1.4.1  handy_1.1      debug_1.2.3    mvbutils_2.5.2
>>> 
> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From mdowle at mdowle.plus.com  Thu Aug 26 19:06:06 2010
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Thu, 26 Aug 2010 18:06:06 +0100
Subject: [Rd] reliability of R-Forge? (moved to R-Devel)
References: <AANLkTimaV9pQgY7rifD8ogsSiciTcvrZ3SsYCWZTYvRK@mail.gmail.com>	<1282808371.2302.69.camel@desktop.localdomain><alpine.LRH.1.00.1008261122110.8608@oebafba.bjyevire.pbz>
	<4C769939.9050707@structuremonitoring.com>
Message-ID: <i566u4$14o$1@dough.gmane.org>

Hi Spencer,

Each commit increments the svn revision number
regardless of the build status. md5sums on pkg may
not change for commits (only) to www and branches.

Yes, the DESCRIPTION file contains a field containing
the package version number. The author edits that field
and commits that change whenever they like.

AFAIK
Matthew

"Spencer Graves" <spencer.graves at structuremonitoring.com> wrote in message 
news:4C769939.9050707 at structuremonitoring.com...
Hi, Russ:


  As noted by Brian Peterson in a separate email, R-Forge has a
"Revision" number in addition to the version number.  For example, the
'fda' package is currently at version 2.2.3 with Rev.: 484 on R-Forge.
Each SVN Commit increments the Rev. number [after a successful build, I
think], but the version number only changes if that change includes a
change in the revision number in the DESCRIPTION.  I don't know for
sure, but I assume that the "md5sums" probably changes with each Rev.


  If this is NOT correct, I hope someone who knows will clarify this.


  Best Wishes,
  Spencer


########################
        I earlier moved a part of this thread to R-Devel, and got some
replies there.


       At least one page on R-Forge says, "We are currently adapting the
R-packages-plugin in order to work together with the new FusionForge
infrastructure. Some services are thus not yet available."  I don't know
if R-Forge is accepting new volunteers, but it looks like they could use
help.  Unfortunately, I'm not in a position to volunteer.


       Best Wishes,
       Spencer Graves


On 8/26/2010 8:28 AM, R P Herrold wrote:
> On Thu, 26 Aug 2010, Gavin Simpson wrote:
>
>> On Thu, 2010-08-26 at 02:30 -0400, David Kane wrote:
>>> How reliable is R-Forge? http://r-forge.r-project.org/
>>>
>>> It is down now (for me). Reporting "R-Forge Could Not Connect to
>>> Database: "
>
> late to chime in, so had tossed the first piece.  As this relates to
> 'reliability of R-Forge' in the sense of possible process issues,
> rather than availability of the archive, I wanted to 'tag into' this
> thread
>
> I 'mirror' r-forge, so I have not seen this ...
>
> One thing I note, mirroring r-forge, and processing 'diffs' netween
> successive days, is that the md5sums of some packages regularly change
> without version number bumps.  From this morning's report in my email:
>
> Thu Aug 26 04:30:01 EDT 2010
>
> --- /tmp/rforge-pre.txt 2010-08-26 04:30:33.000000000 -0400
> +++ /tmp/rforge-post.txt        2010-08-26 04:38:03.000000000 -0400
> @@ -8,18 +8,18 @@
>  AquaEnv_1.0-1.tar.gz   615059a5369d1aba149e6142fedffdde
>  ArvoRe_0.1.6.tar.gz    c955ae7c64c4270740172ad2219060ff
>  BB_2010.7-1.tar.gz     4f85093ab24fac5c0b91539ec6efb8b7
> -BCE_2.0.tar.gz 5a3fe3ecabbe2b2e278f6a48fc19d18d
> -BIOMOD_1.1-5.tar.gz    d2f74f21bc8858844f8d71627fd8e687
> +BCE_2.0.tar.gz 65a968c586e729a1c1ca34a37f5c293a
> +BIOMOD_1.1-5.tar.gz    6929e5ad6a14709de7065286ec684942
>  ...
> -BTSPAS_2010.08.tar.gz  16b8f265846a512c329f0b52ba1924ab
> +BTSPAS_2010.08.tar.gz  809a96b11f1094e95b217af113abd0ac
>  ...
> -BayesR_0.1-1.tar.gz    72bd41c90845032eb9d15c4c6d086dec
> +BayesFactorPCL_0.5.tar.gz      173ab741c399309314eff240a4c3cd6f
> +BayesR_0.1-1.tar.gz    9560b511f1b955a60529599672d58fea
>  ...
> -BiplotGUI_0.0-6.tar.gz 594b3a275cde018eaa74e1ef974dd522
> +BiplotGUI_0.0-6.tar.gz 857a484fdba6cb97be4e42e38bb6d0fd
>  ...
> -IsoGene_1.0-18.tar.gz  679a5aecb7182474ed6a870fa52ca2e3
> +IsoGene_1.0-18.tar.gz  f37572957b2a9846a8d738ec88ac8690
>
> and so forth.  I've not taken the trime to understand why seemingly
> new versions are appearing without version bumps yet.
>
> Is anyone aware of explanations, other than a release process that
> does not require unique versioning of differing content? [it seems
> pretty basic to me that a 'receiver' of new content could do the
> checks I do, and decline to push conflicting md5sums over an
> identically named prior candidate in archive]
>
> -- Russ herrold
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

-- 
Spencer Graves, PE, PhD
President and Chief Operating Officer
Structure Inspection and Monitoring, Inc.
751 Emerson Ct.
San Jos?, CA 95126
ph:  408-655-4567


From radford at cs.toronto.edu  Thu Aug 26 19:41:47 2010
From: radford at cs.toronto.edu (Radford Neal)
Date: Thu, 26 Aug 2010 13:41:47 -0400
Subject: [Rd] Speeding up transpose
In-Reply-To: <20100826025012.GA4179@cs.toronto.edu>
References: <20100826025012.GA4179@cs.toronto.edu>
Message-ID: <20100826174147.GA26101@cs.toronto.edu>

> I've appended below the new version of the modified part of the
> do_transpose function in src/main/array.c.

A quick correction...  A "break" went missing from the case INTSXP:
section of the code I posted.  Corrected version below.
 
     Radford Neal

----------------------------------------------------------------------

    PROTECT(r = allocVector(TYPEOF(a), len));
    switch (TYPEOF(a)) {
    case LGLSXP:
    case INTSXP:
        for (i = 0, j = 0; i<len; i += 1, j += nrow) {
            if (j>=len) j -= (len-1);
            INTEGER(r)[i] = INTEGER(a)[j];
        }
        break;
    case REALSXP:
        for (i = 0, j = 0; i<len; i += 1, j += nrow) {
            if (j>=len) j -= (len-1);
            REAL(r)[i] = REAL(a)[j];
        }
        break;
    case CPLXSXP:
        for (i = 0, j = 0; i<len; i += 1, j += nrow) {
            if (j>=len) j -= (len-1);
            COMPLEX(r)[i] = COMPLEX(a)[j];
        }
        break;
    case STRSXP:
        for (i = 0, j = 0; i<len; i += 1, j += nrow) {
            if (j>=len) j -= (len-1);
            SET_STRING_ELT(r, i, STRING_ELT(a,j));
        }
        break;
    case VECSXP:
        for (i = 0, j = 0; i<len; i += 1, j += nrow) {
            if (j>=len) j -= (len-1);
            SET_VECTOR_ELT(r, i, VECTOR_ELT(a,j));
        }
        break;
    case RAWSXP:
        for (i = 0, j = 0; i<len; i += 1, j += nrow) {
            if (j>=len) j -= (len-1);
            RAW(r)[i] = RAW(a)[j];
        }
        break;
    default:
        UNPROTECT(1);
        goto not_matrix;
    }


From allane at cybaea.com  Thu Aug 26 20:42:10 2010
From: allane at cybaea.com (Allan Engelhardt)
Date: Thu, 26 Aug 2010 19:42:10 +0100
Subject: [Rd] Can you share a working example of R program aided by fast
 BLAS?
In-Reply-To: <AANLkTi=Y8xEtkz+8ZmnLsMj9LChdu7xwOp130bfGDbM-@mail.gmail.com>
References: <AANLkTi=Y8xEtkz+8ZmnLsMj9LChdu7xwOp130bfGDbM-@mail.gmail.com>
Message-ID: <4C76B582.9020704@cybaea.com>

On 19/08/10 19:49, Paul Johnson wrote:
> Can one of you give me an R program that displays the benefits an
> accelerated BLAS in R?
>    

I thought the standard benchmark was (the somewhat artificial) 
R-benchmark-25.R from 
http://r.research.att.com/benchmarks/R-benchmark-25.R .  I have some 
examples using this to show the benefit of an external (optimized, 
multi-threaded) BLAS at 
http://www.cybaea.net/Blogs/Data/Faster-R-through-better-BLAS.html .

(But I have also seen R run slower with external BLAS, e.g. with Radford 
Neal's benchmarks in a recent post here on ?Speeding up matrix 
multiplies?.  YMMV.)

Allan


From csr21 at cantab.net  Fri Aug 27 13:52:47 2010
From: csr21 at cantab.net (Christophe Rhodes)
Date: Fri, 27 Aug 2010 12:52:47 +0100
Subject: [Rd] introspective capabilities
Message-ID: <87iq2ws25s.fsf@cantab.net>

Hi,

Is there any way, from R code, to perform introspection as to where
certain names acquired their values?  The specific functionality I'm
looking for in this case is to be able to request my editor to view the
definition corresponding to a name in its original source location
(presuming for the moment that that location exists).  Other
functionality that I'm looking for is to identify where in the current
image a particular name is used -- "what functions use the value bound
to a particular name?"

The context for these questions, in case anyone is interested, is that I
am usually a Common Lisp programmer, and my programming environment for
that (SLIME) is what I'm used to.  R is sufficiently close to CL (the
discovery of withCallingHandlers/withRestarts was a pleasant surprise)
that I decided to experiment with implementing a SLIME backend for R --
and enough of it seems to work that I'm motivated to make it more
complete.  (The current state of the project is summarised at
<http://common-lisp.net/~crhodes/swankr/>).

Thanks,

Christophe


From andy_liaw at merck.com  Fri Aug 27 14:44:04 2010
From: andy_liaw at merck.com (Liaw, Andy)
Date: Fri, 27 Aug 2010 08:44:04 -0400
Subject: [Rd] Is it safe not to coerce matrices with as.double() in .C()?
Message-ID: <B10BAA7D28D88B45AF82813C4A6FFA93B323DA@usctmx1157.merck.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100827/bbba0937/attachment.pl>

From pdalgd at gmail.com  Fri Aug 27 15:04:10 2010
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 27 Aug 2010 15:04:10 +0200
Subject: [Rd] Is it safe not to coerce matrices with as.double() in .C()?
In-Reply-To: <B10BAA7D28D88B45AF82813C4A6FFA93B323DA@usctmx1157.merck.com>
References: <B10BAA7D28D88B45AF82813C4A6FFA93B323DA@usctmx1157.merck.com>
Message-ID: <B70A8DAE-0879-4E71-9792-359CF433240B@gmail.com>


On Aug 27, 2010, at 2:44 PM, Liaw, Andy wrote:

> I'd very much appreciate guidance on this.  A user reported that the
> as.double() coercion used inside the .C() call for a function in my 
> package (specifically, randomForest:::predict.randomForest()) is 
> taking up significant amount of time when called repeatedly, and
> Removing some of these reduced run time by 30-40% in some cases.
> These arguments are components of the fitted model (thus do not 
> change), and are matrices.  Some basic tests show no difference in
> The result when the coercions are removed (other than faster run time).
> What I like to know is whether this is safe to do, or is it likely to
> lead
> to trouble in the future?

In a word: yes. It is safe as long as you are absolutely sure that the argument has the right mode. The unsafeness comes in when people might unwittingly use, say, an integer vector where a double was expected, causing memory overruns and general mayhem. 

Notice, BTW, that if you switch to .Call or .External, then you have much more scope for handling such details on the C-side. E.g. you could coerce only if the object has the wrong mode, avoid duplicating things you won't be modifying anyway, etc. 

> 
> Best,
> Andy
> Notice:  This e-mail message, together with any attachme...{{dropped:14}}
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Peter Dalgaard
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From hadley at rice.edu  Fri Aug 27 16:05:30 2010
From: hadley at rice.edu (Hadley Wickham)
Date: Fri, 27 Aug 2010 09:05:30 -0500
Subject: [Rd] NEWS and readNEWS
Message-ID: <AANLkTinT4RMtwV20=+iw2V8rMMbJqa1yNDEG2myBzS2a@mail.gmail.com>

readNEWS() states:

     Read R's ?NEWS? file or a similarly formatted one.  This is an
     experimental feature, new in R 2.4.0 and may change in several
     ways

and news() also indicates that this tool is supposed to work with
non-R news files.  However, I've not been able to get readNEWS to read
a package news file, even when following the format indicated in
news().  Looking at the code for readNEWS() it seems there are couple
of places where it assumes it's working with the main R NEWS file:

  * s.post <- " SERIES NEWS"
  * s.pre <- "^[\t ]*CHANGES IN R VERSION "

Is this a bug or is the documentation incorrect?

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From ripley at stats.ox.ac.uk  Fri Aug 27 16:18:24 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 27 Aug 2010 15:18:24 +0100 (BST)
Subject: [Rd] Is it safe not to coerce matrices with as.double() in .C()?
In-Reply-To: <B70A8DAE-0879-4E71-9792-359CF433240B@gmail.com>
References: <B10BAA7D28D88B45AF82813C4A6FFA93B323DA@usctmx1157.merck.com>
	<B70A8DAE-0879-4E71-9792-359CF433240B@gmail.com>
Message-ID: <alpine.LFD.2.00.1008271510490.30882@localhost>

On Fri, 27 Aug 2010, peter dalgaard wrote:

>
> On Aug 27, 2010, at 2:44 PM, Liaw, Andy wrote:
>
>> I'd very much appreciate guidance on this.  A user reported that the
>> as.double() coercion used inside the .C() call for a function in my
>> package (specifically, randomForest:::predict.randomForest()) is
>> taking up significant amount of time when called repeatedly, and
>> Removing some of these reduced run time by 30-40% in some cases.
>> These arguments are components of the fitted model (thus do not
>> change), and are matrices.  Some basic tests show no difference in
>> The result when the coercions are removed (other than faster run time).
>> What I like to know is whether this is safe to do, or is it likely to
>> lead
>> to trouble in the future?
>
> In a word: yes. It is safe as long as you are absolutely sure that 
> the argument has the right mode. The unsafeness comes in when people 
> might unwittingly use, say, an integer vector where a double was 
> expected, causing memory overruns and general mayhem.
>
> Notice, BTW, that if you switch to .Call or .External, then you have 
> much more scope for handling such details on the C-side. E.g. you 
> could coerce only if the object has the wrong mode, avoid 
> duplicating things you won't be modifying anyway, etc.

But as as.double is effectively .Call it has the same freedom, and it 
does nothing if no coercion is required.  The crunch here is likely to 
be

      ?as.double? attempts to coerce its argument to be of double type:
      like ?as.vector? it strips attributes including names.  (To ensure
      that an object is of double type without stripping attributes, use
      ?storage.mode?.)

I suspect the issue is the copying to remove attributes, in which case

storage.mode(x) <- "double"

should be a null op and so both fast and safe.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From andy_liaw at merck.com  Fri Aug 27 16:25:08 2010
From: andy_liaw at merck.com (Liaw, Andy)
Date: Fri, 27 Aug 2010 10:25:08 -0400
Subject: [Rd] Is it safe not to coerce matrices with as.double() in .C()?
In-Reply-To: <alpine.LFD.2.00.1008271510490.30882@localhost>
References: <B10BAA7D28D88B45AF82813C4A6FFA93B323DA@usctmx1157.merck.com>
	<B70A8DAE-0879-4E71-9792-359CF433240B@gmail.com>
	<alpine.LFD.2.00.1008271510490.30882@localhost>
Message-ID: <B10BAA7D28D88B45AF82813C4A6FFA93B32416@usctmx1157.merck.com>

From: Prof Brian Ripley
> 
> On Fri, 27 Aug 2010, peter dalgaard wrote:
> 
> >
> > On Aug 27, 2010, at 2:44 PM, Liaw, Andy wrote:
> >
> >> I'd very much appreciate guidance on this.  A user 
> reported that the
> >> as.double() coercion used inside the .C() call for a function in my
> >> package (specifically, randomForest:::predict.randomForest()) is
> >> taking up significant amount of time when called repeatedly, and
> >> Removing some of these reduced run time by 30-40% in some cases.
> >> These arguments are components of the fitted model (thus do not
> >> change), and are matrices.  Some basic tests show no difference in
> >> The result when the coercions are removed (other than 
> faster run time).
> >> What I like to know is whether this is safe to do, or is 
> it likely to
> >> lead
> >> to trouble in the future?
> >
> > In a word: yes. It is safe as long as you are absolutely sure that 
> > the argument has the right mode. The unsafeness comes in 
> when people 
> > might unwittingly use, say, an integer vector where a double was 
> > expected, causing memory overruns and general mayhem.
> >
> > Notice, BTW, that if you switch to .Call or .External, then 
> you have 
> > much more scope for handling such details on the C-side. E.g. you 
> > could coerce only if the object has the wrong mode, avoid 
> > duplicating things you won't be modifying anyway, etc.
> 
> But as as.double is effectively .Call it has the same freedom, and it 
> does nothing if no coercion is required.  The crunch here is 
> likely to 
> be
> 
>       ?as.double? attempts to coerce its argument to be of 
> double type:
>       like ?as.vector? it strips attributes including names.  
> (To ensure
>       that an object is of double type without stripping 
> attributes, use
>       ?storage.mode?.)
> 
> I suspect the issue is the copying to remove attributes, in which case

I can certainly believe this.  I've tried replacing as.double() to c(), thinking attributes need to be stripped.  That actually increased run time very slightly instead of reducing it.
 
> storage.mode(x) <- "double"
> 
> should be a null op and so both fast and safe.

Will follow this advise.  Thanks to both of you for the help!

Best,
Andy

 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
Notice:  This e-mail message, together with any attachments, contains
information of Merck & Co., Inc. (One Merck Drive, Whitehouse Station,
New Jersey, USA 08889), and/or its affiliates Direct contact information
for affiliates is available at 
http://www.merck.com/contact/contacts.html) that may be confidential,
proprietary copyrighted and/or legally privileged. It is intended solely
for the use of the individual or entity named on this message. If you are
not the intended recipient, and have received this message in error,
please notify us immediately by reply e-mail and then delete it from 
your system.

From Kurt.Hornik at wu.ac.at  Fri Aug 27 16:30:26 2010
From: Kurt.Hornik at wu.ac.at (Kurt Hornik)
Date: Fri, 27 Aug 2010 16:30:26 +0200
Subject: [Rd] NEWS and readNEWS
In-Reply-To: <AANLkTinT4RMtwV20=+iw2V8rMMbJqa1yNDEG2myBzS2a@mail.gmail.com>
References: <AANLkTinT4RMtwV20=+iw2V8rMMbJqa1yNDEG2myBzS2a@mail.gmail.com>
Message-ID: <19575.52226.64223.644872@fangorn.hornik.net>

>>>>> Hadley Wickham writes:

> readNEWS() states:
>      Read R's ?NEWS? file or a similarly formatted one.  This is an
>      experimental feature, new in R 2.4.0 and may change in several
>      ways

> and news() also indicates that this tool is supposed to work with
> non-R news files.  However, I've not been able to get readNEWS to read
> a package news file, even when following the format indicated in
> news().  Looking at the code for readNEWS() it seems there are couple
> of places where it assumes it's working with the main R NEWS file:

>   * s.post <- " SERIES NEWS"
>   * s.pre <- "^[\t ]*CHANGES IN R VERSION "

> Is this a bug or is the documentation incorrect?

readNEWS() is really for such 3-level files, but then R itself will move
to an 2-level Rd format in R 2.12.0.

Use news() to read package news files.

-k

> Hadley

> -- 
> Assistant Professor / Dobelman Family Junior Chair
> Department of Statistics / Rice University
> http://had.co.nz/

> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From cloos+r-devel at jhcloos.com  Fri Aug 27 22:31:57 2010
From: cloos+r-devel at jhcloos.com (James Cloos)
Date: Fri, 27 Aug 2010 16:31:57 -0400
Subject: [Rd] Speeding up matrix multiplies
In-Reply-To: <20100823233927.GA21529@cs.toronto.edu> (Radford Neal's
	message of "Mon, 23 Aug 2010 19:39:27 -0400")
References: <20100823233927.GA21529@cs.toronto.edu>
Message-ID: <m3tymf3iga.fsf@carbon.jhcloos.org>

I just tried out the effects of using R's NA value? with C arithmetic
on an amd64 linux box.

I always got a NAN result for which R's R_IsNA() would return true.

At least on this platform, NAN's propagate w/o a change in their
lower 32 bits.

If NA is supposed to propagate the way NaN is spec'ed to in IEEE754,
then on some platforms it should be OK to skip the NA/NaN checks and
let the optimised routines handle all of the matrix multiplies.

A configure test could be used to determine whether the current
platform is one where NA/NaN checks are required.

-JimC

1] given:
         union rd { double d; uint64_t l; }; union rd u;
   then:
         u.d is an R NA iff both of:
             u.l & 0x7ff0000000000000 == 0x7ff0000000000000
             u.l & 0x00000000ffffffff == 1954;
         are true.
-- 
James Cloos <cloos at jhcloos.com>         OpenPGP: 1024D/ED7DAEA6


From hpages at fhcrc.org  Sat Aug 28 02:01:34 2010
From: hpages at fhcrc.org (=?ISO-8859-1?Q?Herv=E9_Pag=E8s?=)
Date: Fri, 27 Aug 2010 17:01:34 -0700
Subject: [Rd] Speeding up transpose
In-Reply-To: <20100826025012.GA4179@cs.toronto.edu>
References: <20100826025012.GA4179@cs.toronto.edu>
Message-ID: <4C7851DE.8060006@fhcrc.org>

Hi Radford,

On 08/25/2010 07:50 PM, Radford Neal wrote:
> I've looked at how to speed up the transpose function in R
> (ie, t(X)).
>
> The existing code does the work with loops like the following:
>
> 	for (i = 0; i<  len; i++)
> 	    REAL(r)[i] = REAL(a)[(i / ncol) + (i % ncol) * nrow];
>
> It seems a bit optimistic to expect a compiler to produce good code
> from this.  I've re-written these loops as follows:
>
>          for (i = 0, j = 0; i<len; i += 1, j += nrow) {
>              if (j>=len) j -= (len-1);
>              REAL(r)[i] = REAL(a)[j];
>          }

You can even avoid the j>=len test within the loop by using 2 nested
loops:

            dest = REAL(r);
            src = REAL(a);
            // walk the dest col by col (i.e. linearly)
            // walk the src row by row (i.e. not linearly)
            for (i = 0; i < nrow; i++, src++)
                for (j = 0; j < len; j += nrow, dest++)
                    *dest = src[j];

1 test, 3 additions (src[j] being equiv to *(src + j)), 1 assignment
in the inner loop. I wonder if it's possible to get rid of one of the
additions.

This gives me another 10% gain in speed (on my 64-bit Ubuntu laptop),
not that much, but still...

BTW isn't that surprising that using div() is actually slower than using
of / and %, at least on Linux? Since div() is kind of the atomic version
of it, I would have expected it to be slightly faster :-/

Cheers,
H.

>
> The resulting improvement is sometimes dramatic.  Here's a test
> program:
>
>          M<- matrix(seq(0,1,12000),200,60)
>
>          print(system.time({for (i in 1:10000) S<- t(M)}))
>          print(system.time({for (i in 1:10000) R<- t(S)}))
>
>          v<- seq(0,2,12000)
>
>          print(system.time({for (i in 1:100000) u<- t(v)}))
>          print(system.time({for (i in 1:100000) w<- t(u)}))
>
> Here are the times on an Intel Linux system:
>
>      R version 2.11.1:            Modified version:
>
>           user  system elapsed          user  system elapsed
>          1.190   0.040   1.232         0.610   0.010   0.619
>           user  system elapsed          user  system elapsed
>          1.200   0.020   1.226         0.610   0.000   0.616
>           user  system elapsed          user  system elapsed
>          0.800   0.010   0.813         0.750   0.000   0.752
>           user  system elapsed          user  system elapsed
>          0.910   0.010   0.921         0.860   0.000   0.864
>
> Here are the times on a SPARC Solaris system:
>
>      R version 2.11.1:            Modified version:
>
>           user  system elapsed          user  system elapsed
>         18.643   0.041  18.685         2.994   0.039   3.033
>           user  system elapsed          user  system elapsed
>         18.574   0.041  18.616         3.123   0.039   3.163
>           user  system elapsed          user  system elapsed
>          3.803   0.271   4.075         3.868   0.296   4.163
>           user  system elapsed          user  system elapsed
>          4.184   0.273   4.457         4.238   0.302   4.540
>
> So with the modification, transpose for a 60x200 or 200x60 matrix is
> about a factor of two faster on the Intel system, and a factor of six
> faster on the SPARC system.  There is little or no gain from the
> modification when transposing a row or column vector, however.  (I
> think it must be that on these machines multiplies and divides do not
> take constant time, but are faster when, for instance, dividing by 1.)
>
> I've appended below the new version of the modified part of the
> do_transpose function in src/main/array.c.
>
>      Radford Neal
>
> ----------------------------------------------------------------------
>
>      PROTECT(r = allocVector(TYPEOF(a), len));
>      switch (TYPEOF(a)) {
>      case LGLSXP:
>      case INTSXP:
>          for (i = 0, j = 0; i<len; i += 1, j += nrow) {
>              if (j>=len) j -= (len-1);
>              INTEGER(r)[i] = INTEGER(a)[j];
>          }
>      case REALSXP:
>          for (i = 0, j = 0; i<len; i += 1, j += nrow) {
>              if (j>=len) j -= (len-1);
>              REAL(r)[i] = REAL(a)[j];
>          }
>          break;
>      case CPLXSXP:
>          for (i = 0, j = 0; i<len; i += 1, j += nrow) {
>              if (j>=len) j -= (len-1);
>              COMPLEX(r)[i] = COMPLEX(a)[j];
>          }
>          break;
>      case STRSXP:
>          for (i = 0, j = 0; i<len; i += 1, j += nrow) {
>              if (j>=len) j -= (len-1);
>              SET_STRING_ELT(r, i, STRING_ELT(a,j));
>          }
>          break;
>      case VECSXP:
>          for (i = 0, j = 0; i<len; i += 1, j += nrow) {
>              if (j>=len) j -= (len-1);
>              SET_VECTOR_ELT(r, i, VECTOR_ELT(a,j));
>          }
>          break;
>      case RAWSXP:
>          for (i = 0, j = 0; i<len; i += 1, j += nrow) {
>              if (j>=len) j -= (len-1);
>              RAW(r)[i] = RAW(a)[j];
>          }
>          break;
>      default:
>          UNPROTECT(1);
>          goto not_matrix;
>      }
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M2-B876
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fhcrc.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From pauljohn32 at gmail.com  Sat Aug 28 22:10:34 2010
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Sat, 28 Aug 2010 15:10:34 -0500
Subject: [Rd] How do you make a formal "feature" request?
In-Reply-To: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
References: <02E3AE9E-2E64-44B1-BB79-306396A97419@yahoo.com>
Message-ID: <AANLkTi=+2NtF6LTc883haAP2Y9NvDdLgxt4yX77CQKU8@mail.gmail.com>

On Sat, Aug 21, 2010 at 10:41 AM, Donald Winston <satchwinston at yahoo.com> wrote:
> Who decides what features are in R and how they are implemented? If there is someone here who has that authority I have this request:
>
> A report() function analogous to the plot() function that makes it easy to generate a report from a table of data. This should not be in some auxiliary package, but part of the core R just like plot(). As a long time SAS user I cannot believe R does not have this. Please don't give me any crap about Sweave, LaTex, and the "power" of R to roll your own. You don't have to "roll your own" plot do you? Reports are no different. If you don't agree do not bother me. If you agree then please bring this request to the appropriate authorities for consideration or tell me how to do it.
>
> Thanks.
> ? ? ? ?[[alternative HTML version deleted]]

Dear Donald:

I've wondered about your question about "how do things get into R."
It seems to me the tone of your post pissed people off and they are
giving you some abuse.  By telling you to write it yourself, they are
expressing their frustration toward you.  Really, though, you have
only yourself to blame for that.  You treat the readers like your
employees.

I think the nicer answer might go along these lines.

1.  I recently suggested code to patch R in this list and one of the
readers pointed me to this note in R-FAQ, which seems to be about as
close as you are going to get to a "request".

"There is a section of the bug repository for suggestions for
enhancements for R labelled ?wishlist?. Suggestions can be submitted
in the same ways as bugs, but please ensure that the subject line
makes clear that this is for the wishlist and not a bug report, for
example by starting with ?Wishlist:?. "


2. How do you suppose plot got into R? Somebody volunteered it, it
worked nicely, and many people have improved and perfected it over the
years.  If you could give us a working version of "report", the same
might happen.

3. I hate SAS report.  You should too. It stinks. We don't need that.
It is for boneheads.
You don't even tell us what is good about report or give us an
example. Or a link to an example.

4. In the R family, there are many functions like report that you should try.

Please note the function "summary" is supplied by almost all modeling
tools. It is supposed to do roughly what you want.  Does it have too
much information or too little?

There are several ways to beautify that output.

Try xtable. It can make html or LaTeX.

I wonder if the memisc package function mtable  does what you want. It
collects up a bunch of regressions for you in a nice looking table?
I've found very useful. I don't know what your objection is against
LaTeX, incidentally.   Similar tables can be created with packages.
Hmisc and apsrtable


Good luck, next time don't tell us to go to hell when you ask your question.

pj
-- 
Paul E. Johnson
Professor, Political Science
1541 Lilac Lane, Room 504
University of Kansas


From oliver.flasch at fh-koeln.de  Sun Aug 29 20:02:19 2010
From: oliver.flasch at fh-koeln.de (Oliver Flasch)
Date: Sun, 29 Aug 2010 20:02:19 +0200
Subject: [Rd] Feature request: put NewEnvironment and R_NewhashedEnv
	into API
Message-ID: <D0B20444-A804-4DB3-B95E-56945FEE804A@fh-koeln.de>

Hi,

as Seth Falcon in 2006, I also need to create new environments from package C code. Unfortunately, both NewEnvironment and R_NewHashedEnv are not yet part of the public API, if I understand correctly.

Is it planned to add at least one of these functions to the public API in the near future? May I submit a patch? Otherwise I would need to re-implement much of the functionality of R environments in my own code.


Many thanks and best regards

Oliver

-- 
Dipl. Inform. Oliver Flasch,
Institute of Computer Science,
Faculty of Computer Science and Engineering Science,
Cologne University of Applied Sciences,
Steinm?llerallee 1, 51643 Gummersbach
phone: +49 171 6447868
eMail: oliver.flasch at fh-koeln.de


From kmmatoba at stanford.edu  Sun Aug 29 22:34:12 2010
From: kmmatoba at stanford.edu (Kyle Matoba)
Date: Sun, 29 Aug 2010 13:34:12 -0700
Subject: [Rd] a small suggestion for improving the building of packages
Message-ID: <AANLkTinefNWVpSSTDuWkCt3Wrgkq=hOZig2ix8Tmv0Pe@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100829/9c6d58d0/attachment.pl>

From olafm at statistik.tu-dortmund.de  Mon Aug 30 02:01:47 2010
From: olafm at statistik.tu-dortmund.de (Olaf Mersmann)
Date: Mon, 30 Aug 2010 02:01:47 +0200 (CEST)
Subject: [Rd] Surprising behavior of Negate()
Message-ID: <e390c0c5c60cfa5855549ed1ef8999b2.squirrel@www.statistik.tu-dortmund.de>

Dear R-developers,

I find the current behavior of Negate() somewhat confusing. It does not
match the passed function 'f' until the returned function is called for
the first time. To see an example of what this can do see the following
(contrived) example:

  f <- function(x) is.integer(x)
  not_f <- Negate(f)

  f <- function(x) is.character(x)

  ## Both should, in my mind, return TRUE:
  not_f(1) == !is.integer(1)
  not_f(1L) == !is.integer(1L)

I propose to change Negate() in the following way:

  ## Easy 'fix':
  Negate <- function(f) {
    f <- match.fun(f)
    function(...) !f(...)
  }

This matches 'f' when Negate() is called and not the first time the return
value is used. If the current behavior is desired, maybe a note in the
documentation could be added to clarify this peculiarity.

Cheers,
Olaf Mersmann


From ml_a at waddell.ch  Mon Aug 30 08:01:18 2010
From: ml_a at waddell.ch (Adrian Waddell)
Date: Mon, 30 Aug 2010 02:01:18 -0400
Subject: [Rd] Including C Code for Tcl and Tk in an R package
Message-ID: <4C7B492E.2060200@waddell.ch>

Dear R Community,

I adapted the C-Code found at (http://wiki.tcl.tk/25685) implementing
fast image resizing for Tk images for my R package.

The C Code differs for tcl/tk version 8.4 and 8.5. I have the working
code for both versions.

How do I integrate this C-Code into my package so that R CMD INSTALL
takes care of compiling the function correct for each OS and tcl
version? (such that I can submit the package to CRAN).

Once the two files would be compiled I could load the correct function
by checking with
> library(tcltk)
> .Tcl('set tcl_version')
which tcl version R connects to?

For example the gcc command I call under Ubuntu is:

gcc -shared -o imgscale.so -DUSE_TCL_STUBS -I/usr/include/tcl8.5/
imagescale_85.c -L/usr/lib/ -ltclstub8.5 -fPIC

and
gcc -shared -o imgscale.so -DUSE_TCL_STUBS -I/usr/include/tcl8.4/
imagescale_84.c -L/usr/lib/ -ltclstub8.4 -fPIC


Thanks,

Adrian Waddell


From pdalgd at gmail.com  Mon Aug 30 08:50:11 2010
From: pdalgd at gmail.com (Peter Dalgaard)
Date: Mon, 30 Aug 2010 08:50:11 +0200
Subject: [Rd] Surprising behavior of Negate()
In-Reply-To: <e390c0c5c60cfa5855549ed1ef8999b2.squirrel@www.statistik.tu-dortmund.de>
References: <e390c0c5c60cfa5855549ed1ef8999b2.squirrel@www.statistik.tu-dortmund.de>
Message-ID: <4C7B54A3.2080507@gmail.com>

On 08/30/2010 02:01 AM, Olaf Mersmann wrote:
> This matches 'f' when Negate() is called and not the first time the return
> value is used. If the current behavior is desired, maybe a note in the
> documentation could be added to clarify this peculiarity.

Looks like a classic lazy eval gotcha -- almost never intentional.

Testing your patch now.

-p

-- 
Peter Dalgaard
Center for Statistics, Copenhagen Business School
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ripley at stats.ox.ac.uk  Mon Aug 30 09:01:24 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 30 Aug 2010 08:01:24 +0100 (BST)
Subject: [Rd] Including C Code for Tcl and Tk in an R package
In-Reply-To: <4C7B492E.2060200@waddell.ch>
References: <4C7B492E.2060200@waddell.ch>
Message-ID: <alpine.LFD.2.00.1008300756080.15400@gannet.stats.ox.ac.uk>

On Mon, 30 Aug 2010, Adrian Waddell wrote:

> Dear R Community,
>
> I adapted the C-Code found at (http://wiki.tcl.tk/25685) implementing
> fast image resizing for Tk images for my R package.
>
> The C Code differs for tcl/tk version 8.4 and 8.5. I have the working
> code for both versions.
>
> How do I integrate this C-Code into my package so that R CMD INSTALL
> takes care of compiling the function correct for each OS and tcl
> version? (such that I can submit the package to CRAN).
>
> Once the two files would be compiled I could load the correct function

You can't do that: very few systems will have both Tcl 8.4 and 8.5 
libraries installed.  So you need to use the package's configure 
script to detect the Tcl/Tk version and also what libraries to compile 
against.

I'm not sure I would try to support Tcl 8.4: 8.5 has been out for a 
long time now and you could simply make it a package 
SystemRequirement.  We are only support 8.4 in R because we have 
existing code to do so that has not yet been removed.

> by checking with
>> library(tcltk)
>> .Tcl('set tcl_version')
> which tcl version R connects to?
>
> For example the gcc command I call under Ubuntu is:
>
> gcc -shared -o imgscale.so -DUSE_TCL_STUBS -I/usr/include/tcl8.5/
> imagescale_85.c -L/usr/lib/ -ltclstub8.5 -fPIC
>
> and
> gcc -shared -o imgscale.so -DUSE_TCL_STUBS -I/usr/include/tcl8.4/
> imagescale_84.c -L/usr/lib/ -ltclstub8.4 -fPIC
>
>
> Thanks,
>
> Adrian Waddell
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Mon Aug 30 09:28:24 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 30 Aug 2010 08:28:24 +0100 (BST)
Subject: [Rd] No [[<-.factor()
In-Reply-To: <19574.9989.644763.347483@lynne.math.ethz.ch>
References: <77EB52C6DD32BA4D87471DCD70C8D700035B3C70@NA-PA-VBE03.na.tibco.com>
	<19574.9989.644763.347483@lynne.math.ethz.ch>
Message-ID: <alpine.LFD.2.00.1008300814580.18335@gannet.stats.ox.ac.uk>

On Thu, 26 Aug 2010, Martin Maechler wrote:

>>>>>> "WD" == William Dunlap <wdunlap at tibco.com>
>>>>>>     on Wed, 25 Aug 2010 17:31:27 -0700 writes:
>
>    WD> Should there be a [[<-.factor() that either throws
>    WD> an error or acts like [<-.factor() to avoid making
>    WD> an illegal object of class factor?
>
> Yes, one or the other.
> Note that both `[<-` and `[[<-` are "Primitive" and do some
> "informal dispatch" in addition to the formal method dispatch,

I don't think so.  do_subassign2 does formal method dispatch, albeit 
internally, but nothing else (do_assign2_dflt selects only by 
typeof()).

> so there's no need for an explicit '[[<-.factor' method definition.
> For factors, it seems rational and "expectable" that
> double bracket behaves as single bracket when *one* element is
> assigned.
>   z[[2:3]] <- c("Two, Three")
> however  should continue to give an error.

I added a [[<-.factor yesterday.  Note that we do have a [<-.factor 
which works on the integer codes, and I simply copied its logic.

BTW, you probably meant

z[[2:3]] <- c("Two", "Three")


>
> Martin Maechler, ETH Zurich
>
>    >> z <- factor(c("Two","Two","Three"), levels=c("One","Two","Three"))
>    >> z
>    WD> [1] Two   Two   Three
>    WD> Levels: One Two Three
>    >> str(z)
>    WD> Factor w/ 3 levels "One","Two","Three": 2 2 3
>    >> z[[2]] <- "One"
>    >> str(z) # the .Data part is now character
>    WD> Factor w/ 3 levels "One","Two","Three": 2 One 3
>    >> z
>    WD> [1] <NA> <NA> <NA>
>    WD> Levels: One Two Three
>    >> z[2] <- "One"
>    WD> Error in class(x) <- cx : adding class "factor" to an invalid object
>
>    WD> Bill Dunlap
>    WD> Spotfire, TIBCO Software
>    WD> wdunlap tibco.com
>
>    WD> ______________________________________________
>    WD> R-devel at r-project.org mailing list
>    WD> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From D.Strbenac at garvan.org.au  Mon Aug 30 07:00:02 2010
From: D.Strbenac at garvan.org.au (Dario Strbenac)
Date: Mon, 30 Aug 2010 15:00:02 +1000 (EST)
Subject: [Rd] S4 Method Rd Warning
Message-ID: <20100830150002.BIN17749@gimr.garvan.unsw.edu.au>

Hello,

I am using R 2.11.0. I have a curious problem where I get a warning in R CMD check which is seemingly not relevant to my Rd file.

The warning says :

* checking Rd \usage sections ... WARNING
Bad \usage lines found in documentation object 'enrichmentCalc':
    <unescaped bksl>S4method{enrichmentCalc}{GenomeDataList, BSgenome}(rs, organism, seqLen=NULL, ...)
    <unescaped bksl>S4method{enrichmentCalc}{GenomeData, BSgenome}(rs, organism, seqLen=NULL, do.warn=FALSE)
    <unescaped bksl>S4method{enrichmentCalc}{GRanges, BSgenome}(rs, organism, seqLen=NULL)

Functions with \usage entries need to have the appropriate \alias entries,
and all their arguments documented.
The \usage entries must correspond to syntactically valid R code.
See the chapter 'Writing R documentation files' in manual 'Writing R
Extensions'.

But, I have documented all the arguments, and I have all the aliases. What else could it be warning me about ?

The Rd file contents are :

\name{enrichmentCalc}
\alias{enrichmentCalc}
\alias{enrichmentCalc,GenomeDataList,BSgenome-method}
\alias{enrichmentCalc,GenomeData,BSgenome-method}
\alias{enrichmentCalc,GRanges,BSgenome-method}

\title{Calculate sequencing enrichment}
\description{A description}
\usage{
  \S4method{enrichmentCalc}{GenomeDataList, BSgenome}(rs, organism, seqLen=NULL, ...)
  \S4method{enrichmentCalc}{GenomeData, BSgenome}(rs, organism, seqLen=NULL, do.warn=FALSE)
  \S4method{enrichmentCalc}{GRanges, BSgenome}(rs, organism, seqLen=NULL)
}
\arguments{
  \item{rs}{jjj}
  \item{organism}{ghi}
  \item{seqLen}{def}
  \item{do.warn}{abc}
  \item{...}{xyz}
}
\details{
  Details.
}
\value{
 Text here.
}
\author{A Person}
\examples{
 #See the manual
}

Thanks,
       Dario.

--------------------------------------
Dario Strbenac
Research Assistant
Cancer Epigenetics
Garvan Institute of Medical Research
Darlinghurst NSW 2010
Australia


From maechler at stat.math.ethz.ch  Mon Aug 30 11:48:57 2010
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 30 Aug 2010 11:48:57 +0200
Subject: [Rd] No [[<-.factor()
In-Reply-To: <alpine.LFD.2.00.1008300814580.18335@gannet.stats.ox.ac.uk>
References: <77EB52C6DD32BA4D87471DCD70C8D700035B3C70@NA-PA-VBE03.na.tibco.com>
	<19574.9989.644763.347483@lynne.math.ethz.ch>
	<alpine.LFD.2.00.1008300814580.18335@gannet.stats.ox.ac.uk>
Message-ID: <19579.32393.201389.83738@lynne.math.ethz.ch>

>>>>> Prof Brian Ripley <ripley at stats.ox.ac.uk>
>>>>>     on Mon, 30 Aug 2010 08:28:24 +0100 (BST) writes:

    > On Thu, 26 Aug 2010, Martin Maechler wrote:
    >>>>>>> "WD" == William Dunlap <wdunlap at tibco.com>
    >>>>>>> on Wed, 25 Aug 2010 17:31:27 -0700 writes:
    >> 
    WD> Should there be a [[<-.factor() that either throws
    WD> an error or acts like [<-.factor() to avoid making
    WD> an illegal object of class factor?
    >> 
    >> Yes, one or the other.
    >> Note that both `[<-` and `[[<-` are "Primitive" and do some
    >> "informal dispatch" in addition to the formal method dispatch,

    > I don't think so.  do_subassign2 does formal method dispatch, albeit 
    > internally, but nothing else (do_assign2_dflt selects only by 
    > typeof()).

One consider that as an "informal dispatch", notably
distinguishing "list"s and atomics...

    >> so there's no need for an explicit '[[<-.factor' method definition.
    >> For factors, it seems rational and "expectable" that
    >> double bracket behaves as single bracket when *one* element is
    >> assigned.
    >> z[[2:3]] <- c("Two, Three")
    >> however  should continue to give an error.

    > I added a [[<-.factor yesterday.  Note that we do have a [<-.factor 
    > which works on the integer codes, and I simply copied its logic.

thank you!

    > BTW, you probably meant

    > z[[2:3]] <- c("Two", "Three")

yes, indeed!
Martin



    >> >> z <- factor(c("Two","Two","Three"), levels=c("One","Two","Three"))
    >> >> z
    WD> [1] Two   Two   Three
    WD> Levels: One Two Three
    >> >> str(z)
    WD> Factor w/ 3 levels "One","Two","Three": 2 2 3
    >> >> z[[2]] <- "One"
    >> >> str(z) # the .Data part is now character
    WD> Factor w/ 3 levels "One","Two","Three": 2 One 3
    >> >> z
    WD> [1] <NA> <NA> <NA>
    WD> Levels: One Two Three
    >> >> z[2] <- "One"
    WD> Error in class(x) <- cx : adding class "factor" to an invalid object
    >> 
    WD> Bill Dunlap
    WD> Spotfire, TIBCO Software
    WD> wdunlap tibco.com


From hadley at rice.edu  Mon Aug 30 16:25:23 2010
From: hadley at rice.edu (Hadley Wickham)
Date: Mon, 30 Aug 2010 09:25:23 -0500
Subject: [Rd] NEWS and readNEWS
In-Reply-To: <19575.52226.64223.644872@fangorn.hornik.net>
References: <AANLkTinT4RMtwV20=+iw2V8rMMbJqa1yNDEG2myBzS2a@mail.gmail.com>
	<19575.52226.64223.644872@fangorn.hornik.net>
Message-ID: <AANLkTin7+pg0015hJPYLHLweu5eObFgGWs0fPcP1WmMn@mail.gmail.com>

>> ? * s.post <- " SERIES NEWS"
>> ? * s.pre <- "^[\t ]*CHANGES IN R VERSION "
>
>> Is this a bug or is the documentation incorrect?
>
> readNEWS() is really for such 3-level files, but then R itself will move
> to an 2-level Rd format in R 2.12.0.
>
> Use news() to read package news files.

Ah, ok, this is rather unclear from the current documentation.  So if
I want to read a NEWS file off disk to check that I have the right
format (without installing the package first), I should use
tools:::.build_news_db ?

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From murdoch.duncan at gmail.com  Mon Aug 30 17:43:31 2010
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 30 Aug 2010 11:43:31 -0400
Subject: [Rd] Does anyone use Sweave (RweaveLatex) option "expand=FALSE"?
In-Reply-To: <4C6DA142.3090306@gmail.com>
References: <4C6D80E3.2090806@gmail.com> <4C6D9431.4020104@units.it>
	<4C6D9634.4030003@gmail.com> <4C6D9D26.9060505@gmail.com>
	<4C6DA142.3090306@gmail.com>
Message-ID: <4C7BD1A3.6040305@gmail.com>

On 19/08/2010 5:25 PM, Duncan Murdoch wrote:
> On 19/08/2010 5:07 PM, Kevin Coombes wrote:
> > I use it, frequently. The idea for it goes back to some of Knuth's 
> > original literate programming ideas for developing weave and tangle when 
> > he was writing TeX (the program).  I want to be able to document the 
> > pieces of some complex algorithm without having to see all of the gory 
> > details.  For instance, I have code that looks like the following.  
> > (Note that this is typed on the fly rather than copied from actual 
> > source, so there may be typos.)
>
> Okay, thanks.  I'll keep it in.  So now I have a question:  suppose
> you have an error (syntax error at this point, maybe some other kinds of 
> error in the future) in the <<getInfoAboutThisSample>> chunk, but that 
> chunk wasn't eval'd, mainloop was eval'd.  So the error is going to be 
> reported as occurring in chunk mainloop, but with a line number from 
> somewhere else in the file.  Is that a problem?
>   

I was out of town for a week, but I'm back now, and have just committed 
these changes.  Hopefully the reports of syntax errors will be a little 
more helpful now.  I don't think I'll have time to make the reports of 
execution time errors better before the 2.12.0 release.

Duncan Murdoch

> Duncan Murdoch
>
>
> > 
> > <<mainloop,keep.source=TRUE,expand=FALSE>>=
> > for (i in 1:nSamples) {
> > <<getInfoAboutThisSample>>
> >  for (j in 1:nChromosomes) {
> > <<getChromosomeDataForCurrentSample>>
> > <<normalizeChromosomeData>>
> > <<findSegments>>
> > <<computeSignificance>>
> > <<writeResults>>
> >  }
> > }
> > @
> > 
> > Each of the <<chunks>> is itself a fairly long piece of code defined and 
> > documented somewhere else.  (Some of them may themselves be written in 
> > the same form to reduce the final size of a chunk to something a human 
> > has a chance of understanding. That's the difference between weave and 
> > tangle in the original implementation.)   By blocking expansion, I can 
> > focus on the main steps without having them lost in pages and pages of code.
> > 
> > So I vote strongly for retaining "expand=FALSE".
> > 
> > Best,
> >     Kevin
> > 
> > Duncan Murdoch wrote:
> >> On 19/08/2010 4:29 PM, Claudia Beleites wrote:
> >>> I never used it.
> >>>
> >>> I got curious, though. What would be a situation that benefits of 
> >>> this option?
> >>>   
> >> When I put it in, I thought it would be for people who were writing 
> >> about Sweave.
> >>
> >> Duncan Murdoch
> >>
> >>> Maybe a use case could be found by "brute force" (grep all .Rnw files 
> >>> on CRAN for the option?
> >>>
> >>> Claudia
> >>>
> >>>
> >> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From murdoch.duncan at gmail.com  Mon Aug 30 17:48:31 2010
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 30 Aug 2010 11:48:31 -0400
Subject: [Rd] S4 Method Rd Warning
In-Reply-To: <20100830150002.BIN17749@gimr.garvan.unsw.edu.au>
References: <20100830150002.BIN17749@gimr.garvan.unsw.edu.au>
Message-ID: <4C7BD2CF.7070001@gmail.com>

On 30/08/2010 1:00 AM, Dario Strbenac wrote:
> Hello,
>
> I am using R 2.11.0. I have a curious problem where I get a warning in R CMD check which is seemingly not relevant to my Rd file.
>   

2.11.0 isn't the current release, and there have been fixes to this 
stuff since 2.11.1 was released.  Could you try 2.11.1-patched or the 
devel version of 2.12.0 and see if you still get the warnings?

Duncan Murdoch
> The warning says :
>
> * checking Rd \usage sections ... WARNING
> Bad \usage lines found in documentation object 'enrichmentCalc':
>     <unescaped bksl>S4method{enrichmentCalc}{GenomeDataList, BSgenome}(rs, organism, seqLen=NULL, ...)
>     <unescaped bksl>S4method{enrichmentCalc}{GenomeData, BSgenome}(rs, organism, seqLen=NULL, do.warn=FALSE)
>     <unescaped bksl>S4method{enrichmentCalc}{GRanges, BSgenome}(rs, organism, seqLen=NULL)
>
> Functions with \usage entries need to have the appropriate \alias entries,
> and all their arguments documented.
> The \usage entries must correspond to syntactically valid R code.
> See the chapter 'Writing R documentation files' in manual 'Writing R
> Extensions'.
>
> But, I have documented all the arguments, and I have all the aliases. What else could it be warning me about ?
>
> The Rd file contents are :
>
> \name{enrichmentCalc}
> \alias{enrichmentCalc}
> \alias{enrichmentCalc,GenomeDataList,BSgenome-method}
> \alias{enrichmentCalc,GenomeData,BSgenome-method}
> \alias{enrichmentCalc,GRanges,BSgenome-method}
>
> \title{Calculate sequencing enrichment}
> \description{A description}
> \usage{
>   \S4method{enrichmentCalc}{GenomeDataList, BSgenome}(rs, organism, seqLen=NULL, ...)
>   \S4method{enrichmentCalc}{GenomeData, BSgenome}(rs, organism, seqLen=NULL, do.warn=FALSE)
>   \S4method{enrichmentCalc}{GRanges, BSgenome}(rs, organism, seqLen=NULL)
> }
> \arguments{
>   \item{rs}{jjj}
>   \item{organism}{ghi}
>   \item{seqLen}{def}
>   \item{do.warn}{abc}
>   \item{...}{xyz}
> }
> \details{
>   Details.
> }
> \value{
>  Text here.
> }
> \author{A Person}
> \examples{
>  #See the manual
> }
>
> Thanks,
>        Dario.
>
> --------------------------------------
> Dario Strbenac
> Research Assistant
> Cancer Epigenetics
> Garvan Institute of Medical Research
> Darlinghurst NSW 2010
> Australia
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From murdoch.duncan at gmail.com  Mon Aug 30 18:00:59 2010
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 30 Aug 2010 12:00:59 -0400
Subject: [Rd] introspective capabilities
In-Reply-To: <87iq2ws25s.fsf@cantab.net>
References: <87iq2ws25s.fsf@cantab.net>
Message-ID: <4C7BD5BB.7050501@gmail.com>

On 27/08/2010 7:52 AM, Christophe Rhodes wrote:
> Hi,
>
> Is there any way, from R code, to perform introspection as to where
> certain names acquired their values?  The specific functionality I'm
> looking for in this case is to be able to request my editor to view the
> definition corresponding to a name in its original source location
> (presuming for the moment that that location exists).  Other
> functionality that I'm looking for is to identify where in the current
> image a particular name is used -- "what functions use the value bound
> to a particular name?"
>
> The context for these questions, in case anyone is interested, is that I
> am usually a Common Lisp programmer, and my programming environment for
> that (SLIME) is what I'm used to.  R is sufficiently close to CL (the
> discovery of withCallingHandlers/withRestarts was a pleasant surprise)
> that I decided to experiment with implementing a SLIME backend for R --
> and enough of it seems to work that I'm motivated to make it more
> complete.  (The current state of the project is summarised at
> <http://common-lisp.net/~crhodes/swankr/>).
>
>   
There's the "keep.source" option to source() and the optional "srcfile" 
argument to parse() that tell R to keep this information.  If you 
haven't changed the default
getOption("keep.source") from TRUE, then source will default to keeping 
it, and you can find the original location of a function definition for 
function f by looking in attr(body(f), "srcref").  See ?srcref for the 
format; there aren't a lot of user-level utility functions for working 
with this.

For packages, the relevant option is "keep.source.pkgs" at the time the 
package is installed.

Duncan Murdoch


From michel at michelboaventura.com  Mon Aug 30 18:17:14 2010
From: michel at michelboaventura.com (Michel Boaventura)
Date: Mon, 30 Aug 2010 13:17:14 -0300
Subject: [Rd] R with multiple processors
Message-ID: <4C7BD98A.3070608@michelboaventura.com>

Hello,

I was taking a look at R code, and there is some places that should be
easily parallelized, as the dist() function, for example.

Is there an interest on do such thing on R? I would like to start making
patches to parallelize, but how comfortable with this are the main
developers team on R?

Best regards,

Michel


From allane at cybaea.com  Tue Aug 31 13:39:06 2010
From: allane at cybaea.com (Allan Engelhardt)
Date: Tue, 31 Aug 2010 12:39:06 +0100
Subject: [Rd] R with multiple processors
In-Reply-To: <4C7BD98A.3070608@michelboaventura.com>
References: <4C7BD98A.3070608@michelboaventura.com>
Message-ID: <4C7CE9DA.3060604@cybaea.com>

Maybe you can use the same approach as the pnmath library which replaces 
many of the math functions with pthreads enabled ones when it is 
loaded?  That way people have a choice, and those who like to do things 
like doMC() and therefore want to keep the core R single-threaded can 
still do so.

Allan

On 30/08/10 17:17, Michel Boaventura wrote:
> Hello,
>
> I was taking a look at R code, and there is some places that should be
> easily parallelized, as the dist() function, for example.
>
> Is there an interest on do such thing on R? I would like to start making
> patches to parallelize, but how comfortable with this are the main
> developers team on R?
>
> Best regards,
>
> Michel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From luke at stat.uiowa.edu  Tue Aug 31 14:24:37 2010
From: luke at stat.uiowa.edu (luke at stat.uiowa.edu)
Date: Tue, 31 Aug 2010 07:24:37 -0500 (CDT)
Subject: [Rd] R with multiple processors
In-Reply-To: <4C7BD98A.3070608@michelboaventura.com>
References: <4C7BD98A.3070608@michelboaventura.com>
Message-ID: <alpine.DEB.2.00.1008310723470.2626@luke-inspiron>

We are working on extending the approach in pnmath to other functions.
Hopefully this will make it int othe R distribution in some form
within the next couple of releases.

luke

On Mon, 30 Aug 2010, Michel Boaventura wrote:

> Hello,
>
> I was taking a look at R code, and there is some places that should be
> easily parallelized, as the dist() function, for example.
>
> Is there an interest on do such thing on R? I would like to start making
> patches to parallelize, but how comfortable with this are the main
> developers team on R?
>
> Best regards,
>
> Michel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Luke Tierney
Statistics and Actuarial Science
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:      luke at stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From adrian at waddell.ch  Tue Aug 31 15:39:47 2010
From: adrian at waddell.ch (Adrian Waddell)
Date: Tue, 31 Aug 2010 09:39:47 -0400
Subject: [Rd] Including C Code for Tcl and Tk in an R package
In-Reply-To: <alpine.LFD.2.00.1008300756080.15400@gannet.stats.ox.ac.uk>
References: <4C7B492E.2060200@waddell.ch>
	<alpine.LFD.2.00.1008300756080.15400@gannet.stats.ox.ac.uk>
Message-ID: <4C7D0623.7050502@waddell.ch>

On 08/30/2010 03:01 AM, Prof Brian Ripley wrote:
> On Mon, 30 Aug 2010, Adrian Waddell wrote:
> 
>> Dear R Community,
>>
>> I adapted the C-Code found at (http://wiki.tcl.tk/25685) implementing
>> fast image resizing for Tk images for my R package.
>>
>> The C Code differs for tcl/tk version 8.4 and 8.5. I have the working
>> code for both versions.
>>
>> How do I integrate this C-Code into my package so that R CMD INSTALL
>> takes care of compiling the function correct for each OS and tcl
>> version? (such that I can submit the package to CRAN).
>>
>> Once the two files would be compiled I could load the correct function
> 
> You can't do that: very few systems will have both Tcl 8.4 and 8.5
> libraries installed.  So you need to use the package's configure script
> to detect the Tcl/Tk version and also what libraries to compile against.
> 
> I'm not sure I would try to support Tcl 8.4: 8.5 has been out for a long
> time now and you could simply make it a package SystemRequirement.  We
> are only support 8.4 in R because we have existing code to do so that
> has not yet been removed.
> 

Thank you very much for your input. Does anybody know by any chance a
package which would provide an example of such a configure script?


From cdckms at emory.edu  Tue Aug 31 22:16:58 2010
From: cdckms at emory.edu (Sullivan, Kevin M)
Date: Tue, 31 Aug 2010 16:16:58 -0400
Subject: [Rd] R and Epi Info
Message-ID: <30CCD2C98CF7EC46ABF4CD310179FD6501D6D2F66591@EXCHANGE11.Enterprise.emory.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100831/fa489f09/attachment.pl>

