From bates@stat.wisc.edu  Fri Jan  2 17:14:03 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Fri, 2 Jan 1998 11:14:03 -0600 (CST)
Subject: is .Dyn.libs saved in .Rdata?
Message-ID: <m0xoAfb-000hh5C@franz.stat.wisc.edu>

I seem to be having problems with the value of .Dyn.libs being saved
between sessions.  The value is being assigned in library.dynam by
                assign(".Dyn.libs", c(.Dyn.libs, name), envir = .GlobalEnv)
I don't know enough about R environments to decide if this means it
will be saved between sessions if the workspace is saved and
restored.  If so, this should be changed because you do not want to
restore previous values of this variable in a new session.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan  5 07:49:12 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 5 Jan 1998 08:49:12 +0100
Subject: unary !
In-Reply-To: <Pine.SOL.3.95.980104105608.7341B-100000@gorn> (message from
 Thomas Lumley on Sun, 4 Jan 1998 10:58:25 -0800 (PST))
Message-ID: <199801050749.IAA00426@sophie.ethz.ch>

[spill over from  R-core]

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> On Sun, 4 Jan 1998, Kurt Hornik wrote:
    >> Another thing I noticed when playing with chron is that apparently
    >> code like if (!(length(value)) works in S but not in R.  The error
    >> in R is unary ! is only defined for logical vectors
    >> 
    >> I assume that this is a bug and not a feature (although the code in
    >> src/main/logic.c makes me wonder ...).

    TL> I complained about this more than a year ago and I thought we (or
    TL> in those days R+R) had decided it was a feature -- I just explained
    TL> to someone on r-help that it was one of the deliberate
    TL> incompatibilities that ! didn't work on numerics.

Yes, positively.  We've discussed this quite a bit, and
this was defined to be a feature long ago.

The proper (non C-hacker but normal-user readable) way  is to test for

	if(length(vector) == 0)

- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan  5 09:23:16 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 5 Jan 1998 10:23:16 +0100
Subject: as.numeric changes?
In-Reply-To: <199801050102.OAA07591@stat1.stat.auckland.ac.nz> (message from
 Ross Ihaka on Mon, 5 Jan 1998 14:02:14 +1300 (NZDT))
Message-ID: <199801050923.KAA00538@sophie.ethz.ch>

[another spill over from R-core
 concering the new behavior of as.numeric(.) for factors. - MM]

>>>>> "Ross" == Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

    Ross> Thomas Lumley writes:
 > On 27 Dec 1997, Peter Dalgaard BSA wrote:
 > > Thomas Lumley <thomas@biostat.washington.edu> writes:
 > > 
 > > > Now as.numeric() operates on the levels of the factor	
 > > > 	 > as.numeric(factor(c("2","3")))
 > > > 	 [1] 2 3
 > > > 	 > as.numeric(factor(c("A","B")))
 > > > 	 [1] NA NA
 > > > 
 > > > Is this new behaviour a feature? If so, we need to document it in the FAQ
 > > > and the help page.
 > > 
 > > I seem to remember that it got changed in S-plus 3.4 -> 4.0 ? I also
 > > prefer the old behavior, but perhaps codes() is better anyway?

codes(.) is now well documented.
Maybe we should add some extra like

 Note that  \code{\link{as.numeric}(f)} does \emph{not} give the same as
 \code{codes(f)}.  This is not compatible to version of Splus prior to 4.0

    >> We are entirely Unix-based here, so I haven't seen Splus 4.0. I'm
    >> happy to have the new version of as.numeric but I think it needs
    >> documentation as an incompatibility at least with Unix S(-PLUS).

    Ross> Mea culpa.  I as attempting to get rid of what I though was an S
    Ross> incompatibility and succeeded in replacing it with another.

    Ross> I'm not very happy with:

    >> as.numeric(factor(c(100, 200)))
    Ross> 	[1] 1 2

    Ross> but I can live with it. 

Ok, I've now checked it on our PC (S-plus 4.0):
This is the same as  S 4 ("L"), S-plus 3.4 and S-plus 4.0  

On the other hand,
 
	> as.numeric(factor(c("A","B")))
 	[1] NA NA

is not compatible to any version of S-plus or S 4
and I now wonder if we shouldn't go for compatibility here.

- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Jan  5 17:09:38 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 5 Jan 1998 09:09:38 -0800 (PST)
Subject: English compatibility library
In-Reply-To: <34B0B3FB.3A42@math.uio.no>
Message-ID: <Pine.SUN.3.95.980105090633.1964B-100000@chekov>


Is there any good reason not to add the following:

	# R English compatibility library
	licence<-license
	colours<-colors
	heat.colours<-heat.colors
	terrain.colours<-terrain.colors
	topo.colours<-topo.colors
	optimise<-optimize
	

I don't actually have difficulty with any of the R terms, but this sort of
thing can be annoying.  In LaTeX I still type \begin{itemise} annoyingly
often.


Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jan  5 19:20:27 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 5 Jan 1998 14:20:27 -0500
Subject: make docs
Message-ID: <98Jan5.142048est.13456@mailgate.bank-banque-canada.ca>

Installing 0.61 in Solaris (SunOS 5.5) I am getting the following error when I
try to make docs or make help

[28] /home/res8/gilp/R : make docs
make: Fatal error: Don't know how to make target `../src/library/*/man/*.Rd'
Current working directory /home/res8/gilp/R-versions/R-0.61/etc

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jan  5 19:55:12 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Jan 1998 20:55:12 +0100
Subject: make docs
In-Reply-To: Paul Gilbert's message of Mon, 5 Jan 1998 14:20:27 -0500
References: <98Jan5.142048est.13456@mailgate.bank-banque-canada.ca>
Message-ID: <x2pvm6u25b.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> Installing 0.61 in Solaris (SunOS 5.5) I am getting the following error when I
> try to make docs or make help
> 
> [28] /home/res8/gilp/R : make docs
> make: Fatal error: Don't know how to make target `../src/library/*/man/*.Rd'
> Current working directory /home/res8/gilp/R-versions/R-0.61/etc

This is well-known and caused by use of a non-GNU make. Unfortunately,
we don't quite know how to work around it...

If you have GNU make installed and not called "make" but e.g. "gmake",
just do "cd etc ; gmake build-docs". Otherwise, the trick is to
replace the right hand side of the below definition in etc/Makefile
with its shell expansion.

MANSRC = ../src/library/*/man/*.Rd

or, for Solaris *only* (I think), you can replace it with this:

MANSRC:sh = echo ../src/library/*/man/*.Rd

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jan  5 22:23:01 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 5 Jan 1998 17:23:01 -0500
Subject: Error in parse
Message-ID: <98Jan5.172327est.13453@mailgate.bank-banque-canada.ca>

I have narrowed my problem with parse to the example below. This is not a
working piece of code, but does cause the source problem. (This also occurs with
R 0.61.) The code will cut and paste into R ok, but if I cut and paste into a
file and source the file I get
Error in parse(file, n, text, prompt) : syntax error on line 23

Relatively minor things like changing
   }  }  }  }
to
   }  }  }
}
will make the problem go away. (So I guess I know a solution, but it seems like
there is a bug.)

Paul Gilbert
________

ARMA <- function(model)
{
if (0 !=m) if (p != dim(C)[2]) stop("dimension of model parameters do not
conform!")
if (fortran)  if (m==0) C <- array(0,c(1,p,1))
else
  {for (Time in 1:sampleT)
      {if (b >= 2) for (l in 2:b)
          if (l<=Time) vt <- vt - c(B[l,,] %*% prederror[Time+1-l,])
       if (m!=0) for (l in 1:dim(C)[1])
          if (l<=Time) vt <- vt - c(C[l,,] %*% u[Time+1-l,])
       prederror[Time,] <- vt
       if (any(0!=error.weights))
        {
         if (length(error.weights)>1)
           {for (h in 2:length(error.weights))
            if ( (Time+h-1) <= sampleT)
              {vt    <-  rep(0,p)
     }  }  }  }
  }
1
}

KF <- function(model)
{2}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  6 10:11:56 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Jan 1998 11:11:56 +0100
Subject: Error in parse
In-Reply-To: Paul Gilbert's message of Mon, 5 Jan 1998 17:23:01 -0500
References: <98Jan5.172327est.13453@mailgate.bank-banque-canada.ca>
Message-ID: <x24t3hkj2r.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> Error in parse(file, n, text, prompt) : syntax error on line 23
...
> 
> ARMA <- function(model)
> {
> if (0 !=m) if (p != dim(C)[2]) stop("dimension of model parameters do not
> conform!")
> if (fortran)  if (m==0) C <- array(0,c(1,p,1))
> else
>   {for (Time in 1:sampleT)
>       {if (b >= 2) for (l in 2:b)
>           if (l<=Time) vt <- vt - c(B[l,,] %*% prederror[Time+1-l,])
>        if (m!=0) for (l in 1:dim(C)[1])
>           if (l<=Time) vt <- vt - c(C[l,,] %*% u[Time+1-l,])
>        prederror[Time,] <- vt
>        if (any(0!=error.weights))
>         {
>          if (length(error.weights)>1)
>            {for (h in 2:length(error.weights))
>             if ( (Time+h-1) <= sampleT)
>               {vt    <-  rep(0,p)
>      }  }  }  }
>   }
> 1
> }
> 
> KF <- function(model)
> {2}


What is happening here is that the lexical analyser reads the "KF"
token on the penultimate line, but the parser never sees it. 

This must be related to the token-lookahead code in main/src/gram.[yc]
(the token() function). The R_ParseFile function works by repeated
calls to R_Parse1File, which parses single expressions in the file and
R_Parse1File starts with ParseInit(), which as one of its first duties
sets SavedToken = 0. So if a token is saved and not used at the end of
one expression, it gets discarded.

So the bug is one of two (or both):

1) There's a bug in the readahead logic (this essentially works by
counting if's, else's, braces and newlines, so it would be no wonder
if your code tickled it)

2) It is wrong to assume that there's no initial saved token when
parsing 2nd and subsequent expressions in a file.

I think #1 is certainly present, because there should be no reason
to read past the terminating brace in your ARMA() function to detect
the end of it, but I'm not sure that you can't get other examples
where readahead will happen legally.

<better hand this over to Ross now>

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan  6 10:36:18 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 6 Jan 1998 11:36:18 +0100
Subject: R-beta: More glm bugs
In-Reply-To: <9801061000.AA20049@alpha.luc.ac.be> (message from Jim Lindsey on
 Tue, 6 Jan 1998 11:00:11 +0100 (MET))
Message-ID: <199801061036.LAA02319@sophie.ethz.ch>

>>>>> "Jim" == Jim Lindsey <jlindsey@luc.ac.be> writes:

    Jim> 1. The null degrees of freedom do not allow for observations weighted
    Jim> out although the residual df do.
    Jim> in glm.fit(), line. 271, change to
    Jim> nulldf <- nobs-qs.numeric(intercept)-sum(weights==0)
    Jim> similar to the following line for residual df

    Jim> 2. in print.glm(), I do not know what "Total df" means. At present, it
    Jim> is the length of the residal vector, hence not allowing for
    Jim> observations weighted out, which does not make much sense. Logically,
    Jim> it should be the df for the null deviance that follows directly and
    Jim> this is how students here tend to interpret it. Hence, I suggest that
    Jim> line 286 be changed to
    Jim> cat("\nDegrees of Freedom:",x$df.null,"Total;",
    Jim> etc.

    Jim> 4. The problem with names of coefficients being mixed up when there
    Jim> is aliasing, that I have pointed out for some time with each new
    Jim> release, is still not corrected in 0.61. The fix is in the archives
    Jim> (move the 4 or 5 lines that shift names outside the iteration loop in
    Jim> glm.fit)

I'm fixing these three (above). They should be in the next release
(0.61.patched  aka 0.61.1)

----

The following, I think is more a problem  of  model.matrix(.) and such lower
level functions which I leave for  Thomas and Ross ...

    Jim> 3. The following two lines should produce the same result but don't:
    Jim> glm(y~x1:x2:x3-x1:x2:(1+x3))
    Jim> glm(y~x1:x2:x3-x1:x2:-x1:x2:x3)
    Jim> Only the second gives the correct answer. I have not tried to fix this.

-- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  6 12:21:52 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Jan 1998 13:21:52 +0100
Subject: R-beta: More glm bugs
In-Reply-To: Martin Maechler's message of Tue, 6 Jan 1998 11:36:18 +0100
References: <199801061036.LAA02319@sophie.ethz.ch>
Message-ID: <x21zylkd27.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> The following, I think is more a problem  of  model.matrix(.) and such lower
> level functions which I leave for  Thomas and Ross ...
> 
>     Jim> 3. The following two lines should produce the same result but don't:
>     Jim> glm(y~x1:x2:x3-x1:x2:(1+x3))
>     Jim> glm(y~x1:x2:x3-x1:x2:-x1:x2:x3)
>     Jim> Only the second gives the correct answer. I have not tried to fix this.

There seems to be a typo in Jims 2nd example (extra :) (no, that was
not a smiley...). However, the problem seems to boil down to this:

> model.matrix(~x1:x2:1)
     (Intercept)
[1,]           1
[2,]           1
[3,]           1
[4,]           1
[5,]           1
[6,]           1
[7,]           1
[8,]           1
attr(,"assign")
[1] 0

Which is pretty clearly wrong. It should be the same as ~x1:x2

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 15:55:41 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Tue, 6 Jan 1998 09:55:41 -0600 (CST)
Subject: tapply and factors in R-0.61
Message-ID: <m0xpbLx-000hhBC@franz.stat.wisc.edu>

Somehow it seems that tapply converts factors given as the _first_
argument to a numerical representation without the old factor levels.

> unlist(lapply(Machines, data.class))
   Worker   Machine     score 
"ordered"  "factor" "numeric" 
> Machines[ 1:10, ]
Grouped Data: score ~ 1 | Worker
   Worker Machine score
1       1       A  52.0
2       1       A  52.8
3       1       A  53.1
4       2       A  51.8
5       2       A  52.8
6       2       A  53.1
7       3       A  60.0
8       3       A  60.2
9       3       A  58.4
10      4       A  51.1
> tapply( Machines$Machine, Machines$Worker, function(x) x )
$6
[1] 1 1 1 2 2 2 3 3 3

$2
[1] 1 1 1 2 2 2 3 3 3

$4
[1] 1 1 1 2 2 2 3 3 3

$1
[1] 1 1 1 2 2 2 3 3 3

$3
[1] 1 1 1 2 2 2 3 3 3

$5
[1] 1 1 1 2 2 2 3 3 3

> tapply( Machines$Machine, Machines$Worker, data.class )
       6        2        4        1        3        5 
"factor" "factor" "factor" "factor" "factor" "factor" 
> tapply( Machines$Machine, Machines$Worker, levels )
$6
character(0)

$2
character(0)

$4
character(0)

$1
character(0)

$3
character(0)

$5
character(0)
> levels( Machines$Machine )
[1] "A" "B" "C"

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 15:59:46 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Tue, 6 Jan 1998 09:59:46 -0600 (CST)
Subject: More on tapply and factors
Message-ID: <m0xpbPu-000hhBC@franz.stat.wisc.edu>

Here is an even more awkward property of tapply with factors.  What we 
want to do is to determine the modal value of the first factor given
the level of the second factor.  We do that by applying table in a
tapply call then finding the maximum count then ...

Turns out that table gives unexpected results in tapply.

> table(Machines$Machine)
 A  B  C 
18 18 18 
> tapply( Machines$Machine, Machines$Worker, table )
$6
integer(0)

$2
integer(0)

$4
integer(0)

$1
integer(0)

$3
integer(0)

$5
integer(0)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  6 17:09:57 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Jan 1998 18:09:57 +0100
Subject: More on tapply and factors
In-Reply-To: Douglas Bates's message of Tue, 6 Jan 1998 09:59:46 -0600 (CST)
References: <m0xpbPu-000hhBC@franz.stat.wisc.edu>
Message-ID: <x2vhvxil5m.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> > tapply( Machines$Machine, Machines$Worker, table )
> $6
> integer(0)

Yuk! Apparently, the culprit is "split":

> f1<-gl(2,1,4)
> f2<-gl(2,2,4)
> dput(split(f1,f2))
list(1 = factor(c(1, 2), levels=1:0), 2 = factor(c(1, 2), levels=1:0))

> dput(f1)
structure(factor(c(1, 2, 1, 2), levels=1:2), class = "factor", .Label = c("1", 
"2"))
> dput(f2)
structure(factor(c(1, 1, 2, 2), levels=1:2), class = "factor", .Label = c("1", 
"2"))

I wonder if this is a side effect of the ...hmm... "undesirable
feature" of as.numeric(factor)??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan  6 17:42:58 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 6 Jan 1998 18:42:58 +0100
Subject: split(.) woes + "very cheap" fix
In-Reply-To: <x2vhvxil5m.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 06 Jan 1998 18:09:57 +0100)
Message-ID: <199801061742.SAA03394@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Douglas Bates <bates@stat.wisc.edu> writes:
    >> > tapply( Machines$Machine, Machines$Worker, table )
    >> $6
    >> integer(0)

    PD> Yuk! Apparently, the culprit is "split":
ok

    >> f1<-gl(2,1,4)
    >> f2<-gl(2,2,4)
    >> dput(split(f1,f2))
    PD> list(1 = factor(c(1, 2), levels=1:0), 2 = factor(c(1, 2), levels=1:0))

    >> dput(f1)
    PD> structure(factor(c(1, 2, 1, 2), levels=1:2), class = "factor", .Label = c("1", "2"))
    >> dput(f2)
    PD> structure(factor(c(1, 1, 2, 2), levels=1:2), class = "factor", .Label = c("1", "2"))

    PD> I wonder if this is a side effect of the ...hmm... "undesirable
    PD> feature" of as.numeric(factor)??

no, it's a different bug.  The same things happen in 0.50


A very silly workaround (which I am  NOT committing to the sources) 
which seems to help is

  split.default <- function(x,f) {
	  if(is.factor(x)) x <- codes(x)
	  .Internal(split(x,as.factor(f)))
  }

At least it prevents the SEG.FAULT in the following:

    > split.default <- function(x,f) {
    +  if(is.factor(x)) x <- codes(x)
    +  .Internal(split(x,as.factor(f)))
    + }
    > f1<-gl(2,1,4) ; f2<-gl(2,2,4);  dput(split(f1,f2))
    list(1 = c(1, 2), 2 = c(1, 2))
    > tapply(f1,f2,table)
    $1
    1 2 
    1 1 

    $2
    1 2 
    1 1 

    > rm(split.default)
    > tapply(f1,f2,table)

    Process R bus error at Tue Jan  6 18:41:04 1998

--------------


-- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Jan  6 17:55:38 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 6 Jan 1998 09:55:38 -0800 (PST)
Subject: split(.) woes + "very cheap" fix
In-Reply-To: <199801061742.SAA03394@sophie.ethz.ch>
Message-ID: <Pine.SUN.3.95.980106095351.5275C-100000@chekov>

On Tue, 6 Jan 1998, Martin Maechler wrote:

> 
> A very silly workaround (which I am  NOT committing to the sources) 
> which seems to help is
> 
>   split.default <- function(x,f) {
> 	  if(is.factor(x)) x <- codes(x)
> 	  .Internal(split(x,as.factor(f)))
>   }
> 

It looks as though what we really need to do is to remove and then restore
some of the attributes of x.  The question is, which ones? Factor levels
do want to be restored, but other things like dimension don't.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan  6 18:35:28 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 6 Jan 1998 13:35:28 -0500
Subject: private libraries
Message-ID: <98Jan6.133625est.13449@mailgate.bank-banque-canada.ca>

My code mostly seems to be working fairly well under R 0.61 but I am still
trying to clean up the install procedures. Is the private library mechanism
working now (i.e. am I doing something wrong because it doesn't work for me) or
should I just install under $RHOME/library?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan  6 18:48:19 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 6 Jan 1998 13:48:19 -0500
Subject: pow_ii
Message-ID: <98Jan6.134910est.13446@mailgate.bank-banque-canada.ca>

I was hoping
fatal: relocation error: symbol not found: pow_ii: referenced in .../dsefor.so
would disappear in R 0.6x, but it has not. I believe this is suppose to come
from the f2c lib, but I seem to need just a couple of routines:
nm -u dsefor.so
Undefined symbols from dsefor.so:
    .umul
    pow_dd
    pow_ii
    pow_ri
For my own purposes I could compile with fortran but that makes it much harder
for others to use the library. Can anyone suggest a good strategy so that the
whole library can be used easily?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 18:56:19 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 1998 12:56:19 -0600
Subject: private libraries
In-Reply-To: Paul Gilbert's message of Tue, 6 Jan 1998 13:35:28 -0500
References: <98Jan6.133625est.13449@mailgate.bank-banque-canada.ca>
Message-ID: <6rzpl9bfe4.fsf@franz.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> My code mostly seems to be working fairly well under R 0.61 but I am still
> trying to clean up the install procedures. Is the private library mechanism
> working now (i.e. am I doing something wrong because it doesn't work for me) or
> should I just install under $RHOME/library?

Private libraries work just fine for me.  Are you remembering to set
the environment variable RLIBS to the path for your private library
directory. You can also accomplish the same thing by redefining
.lib.loc as soon as you start up like
 > .lib.loc <- c("/home/bates/library/R", .lib.loc)
 > library( lme )
but using the RLIBS environment variable is more elegant.

As far as R INSTALL goes I haven't had any trouble with it in versions 
0.60 and 0.61
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 19:42:59 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Tue, 6 Jan 1998 13:42:59 -0600 (CST)
Subject: match.arg()
Message-ID: <m0xpetv-000hhBC@franz.stat.wisc.edu>

$ R -norestore

R : Copyright 1997, Robert Gentleman and Ross Ihaka
Version 0.61.0 Alpha (December 21, 1997)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"license()" for details.

Type	"demo()" for some demos, "help()" for on-line help, or
	"help.start()" for a HTML browser interface to help.

> foo <- function(a = c("bar", "baz", "boz")) match.arg(a)
> foo("baz")
[1] "baz"
> foo()  # should return "bar" but doesn't
[1] "bar" "baz" "boz"

The current definition of match.arg is
 "match.arg" <-
   function (arg, choices) 
 {
   if (missing(choices)) {
     formal.args <- formals(sys.function(sys.parent()))
     choices <- eval(formal.args[[deparse(substitute(arg))]])
   }
   i <- pmatch(arg, choices)
   if (is.na(i)) 
     stop(paste("ARG should be one of", paste(choices, 
					      collapse = ", "), sep = " "))
   else if (i == 0) 
     if (arg == choices) 
       rval <- choices[1]
     else stop("there is more than one match in match.arg")
   else rval <- choices[i]
   return(rval)
 }

I believe what is happening is that arg is being evaluated when passed 
to match.arg hence it takes on the default value which is the same
value as choices will assume.  Another R-like language defines this
function with the first statement like

   if (missing(choices)) {
     formal.args <- formals(sys.function(sys.parent()))
     choices <- eval(formal.args[[deparse(substitute(arg))]])
     arg <- arg[1]
   }

I think that creates the desired behaviour here too.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan  6 22:03:58 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 6 Jan 1998 17:03:58 -0500
Subject: private libraries
References: <98Jan6.133625est.13449@mailgate.bank-banque-canada.ca> <6rzpl9bfe4.fsf@franz.stat.wisc.edu>
Message-ID: <98Jan6.170457est.13454@mailgate.bank-banque-canada.ca>

>Private libraries work just fine for me.  Are you remembering to set
>the environment variable RLIBS to the path for your private library

Well perhaps I just didn't persist long enough, but I posted a message when I
was having trouble in 0.60 and got a response that the private library mechanism
was not working correctly. I am setting the environment variable RLIBS. I have
tried several variations with no success. One problem is that parts of the R
INSTALL seem to work, but not enough so the UNINSTALL works, so it is hard to
get back to a clean starting point.

Following is what I think I should do to install two private libraries
(packages). Could you please contrast what you do with this.

1/ put code into files   .../Rdse/tframe/R/tframe.R and .../Rdse/dse/R/dse.R

2/ cd to .../Rdse and
      INSTALL R tframe tframe
      INSTALL R dse dse

3/ RLIBS=.../Rdse    export RLIBS

4/ start R and then library() should indicate the two packages in the .../Rdse
and
    library("tframe") ; library("dse")  should load the libraries.

Thanks in advance.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 22:15:30 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 1998 16:15:30 -0600
Subject: private libraries
In-Reply-To: Paul Gilbert's message of Tue, 6 Jan 1998 17:03:58 -0500
References: <98Jan6.133625est.13449@mailgate.bank-banque-canada.ca> <6rzpl9bfe4.fsf@franz.stat.wisc.edu> <98Jan6.170457est.13454@mailgate.bank-banque-canada.ca>
Message-ID: <6rra6lb665.fsf@franz.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 1/ put code into files   .../Rdse/tframe/R/tframe.R and .../Rdse/dse/R/dse.R
> 
> 2/ cd to .../Rdse and
>       INSTALL R tframe tframe
>       INSTALL R dse dse

There's the problem.  The last argument should be a directory into
which the library will be installed.  It will automatically become a
subdirectory with the library name within the directory you specify

There is another problem in that it should be R INSTALL, not INSTALL R
but I presume that was just a typo.

I put my personal libraries into ~/library/R so I use the R INSTALL
command as
 R INSTALL lme /home/bates/library/R  # creates /home/bates/library/R/lme
then I set
 export RLIBS=/home/bates/library/R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Jan  6 23:51:15 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 7 Jan 1998 12:51:15 +1300 (NZDT)
Subject: IEEE 754 Style Arithmetic
Message-ID: <199801062351.MAA09299@stat1.stat.auckland.ac.nz>

I have been looking at the R mathematical library with a view to
making changes so that it will handle IEEE 754 entities like NaN and
+/- Inf.  This appears to be not too hard and I am fairly well down
the path to converting the existing code (and simultaneously
converting some of the more suspect algorithms to something more
solid).

Q1:

I have looked at the Splus implementation and I have a bit of a
problem with some of the decisions that have been made.  For example

	pnorm(0, 1, Inf)   ->   0.5

This seems VERY dangerous to me.  It's the kind of thing which could
make errors almost impossible to find.  I would much rather that this
generated NaN (it's a domain error in my view).

There are some other nits like this too.  Would it be a serious
problem if I were to "fix" these?

Q2:

At present, the functions returning information about discrete
distributions work on integer (32-bit C int) arguments.  This limits
the domain for these functions.  Has anyone found that that this is a
problem?

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Jan  7 02:47:08 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 7 Jan 1998 15:47:08 +1300 (NZDT)
Subject: Error in parse
In-Reply-To: <x24t3hkj2r.fsf@blueberry.kubism.ku.dk>
References: <98Jan5.172327est.13453@mailgate.bank-banque-canada.ca>
 <x24t3hkj2r.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801070247.PAA12670@stat1.stat.auckland.ac.nz>

Peter Dalgaard writes:
 > Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
 > 
 > > Error in parse(file, n, text, prompt) : syntax error on line 23

 > 1) There's a bug in the readahead logic (this essentially works by
 > counting if's, else's, braces and newlines, so it would be no wonder
 > if your code tickled it)


Got it in one (1?).  The problem is that '}', ')' and ']' should each
terminate ALL preceding if clauses.  Here is the fix ...

At the very bottom of gram.y in yylex, there are case statements of
the form:

        case ']':
                ifpop();
		...
 
        case RBRACE:
                ifpop();
		...

        case ')':
                ifpop();
		...

These should read

        case ']':
		while(*contextp == 'i')
			ifpop();
		...
 
        case RBRACE:
		while(*contextp == 'i')
			ifpop();
		...

        case ')':
                while(*contextp == 'i')
                        ifpop();

This seems to make Paul's example work.  I will commit this in a minute.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan  7 07:41:45 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 7 Jan 1998 08:41:45 +0100
Subject: unary !
In-Reply-To: <199801050749.IAA00426@sophie.ethz.ch>
References: <Pine.SOL.3.95.980104105608.7341B-100000@gorn>
 <199801050749.IAA00426@sophie.ethz.ch>
Message-ID: <199801070741.IAA08682@pc25.none>

>>>>> Martin Maechler writes:

> [spill over from  R-core]
>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

TL> On Sun, 4 Jan 1998, Kurt Hornik wrote:
>>> Another thing I noticed when playing with chron is that apparently
>>> code like if (!(length(value)) works in S but not in R.  The error
>>> in R is unary ! is only defined for logical vectors
>>> 
>>> I assume that this is a bug and not a feature (although the code in
>>> src/main/logic.c makes me wonder ...).

TL> I complained about this more than a year ago and I thought we (or
TL> in those days R+R) had decided it was a feature -- I just explained
TL> to someone on r-help that it was one of the deliberate
TL> incompatibilities that ! didn't work on numerics.

> Yes, positively.  We've discussed this quite a bit, and
> this was defined to be a feature long ago.

> The proper (non C-hacker but normal-user readable) way is to test for

> 	if(length(vector) == 0)

O.k.  I will add this to the FAQ but I am still not convinced.  If I may
e.g. do

R> 0 & 0
[1] FALSE
R> 1 | 0
[1] TRUE

then why can't !0 be TRUE?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 08:00:24 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 09:00:24 +0100
Subject: IEEE 754 Style Arithmetic
In-Reply-To: <199801062351.MAA09299@stat1.stat.auckland.ac.nz> (message from
 Ross Ihaka on Wed, 7 Jan 1998 12:51:15 +1300 (NZDT))
Message-ID: <199801070800.JAA03967@sophie.ethz.ch>

>>>>> "Ross" == Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

    Ross> I have been looking at the R mathematical library with a view to
    Ross> making changes so that it will handle IEEE 754 entities like NaN
    Ross> and +/- Inf.  This appears to be not too hard and I am fairly
    Ross> well down the path to converting the existing code (and
    Ross> simultaneously converting some of the more suspect algorithms to
    Ross> something more solid).
Great !  
Thank you -- this has been my longest lasting wish for R...

(has Heiner Schwarte contacted you, yet?
 during holiday season, he has almost finished doing the same
 while successfully porting R 0.61 to Windows NT (!!!) (MS C compiler)
)


    Ross> Q1:

    Ross> I have looked at the Splus implementation and I have a bit of a
    Ross> problem with some of the decisions that have been made.  For
    Ross> example

    Ross> 	pnorm(0, 1, Inf) -> 0.5

    Ross> This seems VERY dangerous to me.  It's the kind of thing which
    Ross> could make errors almost impossible to find.  I would much rather
    Ross> that this generated NaN (it's a domain error in my view).

I disagree quite strongly.

You are right, that some errors are harder to track down when  Inf & -Inf
work properly.
But in my oppinion the advantages really do abound.

for(s in 10^(0:9))cat("sd=",formatC(s,wid=5),"pnorm(0,1,sd)=",pnorm(0,1,s),"\n")
sd=     1 pnorm(0,1,sd)= 0.1586553 
sd=    10 pnorm(0,1,sd)= 0.4601722 
sd=   100 pnorm(0,1,sd)= 0.4960106 
sd=  1000 pnorm(0,1,sd)= 0.4996011 
sd= 1e+04 pnorm(0,1,sd)= 0.4999601 
sd= 1e+05 pnorm(0,1,sd)= 0.499996 
sd= 1e+06 pnorm(0,1,sd)= 0.4999996 
sd= 1e+07 pnorm(0,1,sd)= 0.5 
sd= 1e+08 pnorm(0,1,sd)= 0.5 
sd= 1e+09 pnorm(0,1,sd)= 0.5 


I think one of the merits of useful IEEE implementations is
continuity (in the mathematical sense)
and ``automatic fulfillment'' of limit theorems.

This has been very useful for me in several situations of S-plus code
development.  
And I have been longing for these to be available in R, as well.

    Ross> There are some other nits like this too.  Would it be a serious
    Ross> problem if I were to "fix" these?

yes (see above).


    Ross> Q2:

    Ross> At present, the functions returning information about discrete
    Ross> distributions work on integer (32-bit C int) arguments.  This
    Ross> limits the domain for these functions.  Has anyone found that
    Ross> that this is a problem?

not yet.
How much speed would be lost, if they worked for all double (and Inf, -Inf)
arguments?

- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 08:29:02 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 09:29:02 +0100
Subject: Two more R/S differences
In-Reply-To: <199801070741.IAA08668@pc25.none> (message from Kurt Hornik on
 Wed, 7 Jan 1998 08:41:45 +0100)
Message-ID: <199801070829.JAA03989@sophie.ethz.ch>

(Another discussion out of R-core,  
 I think  anyone in R-devel might have an opinion -- MM):

>>>>> "KH" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

>>>>> Martin Maechler writes:
>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
    KH> * Bug or feature?
    R> NULL + NULL
    real(0)
    R> NULL > NULL
    Error: comparison is possible only for vector types
    R> NULL & NULL
    Error in NULL & NULL : operations are possible only for numeric or
    logical types

    KH> whereas S-PLUS:

    >>>> NULL > NULL
    NULL
    >>>> NULL + NULL
    NULL
    >>>> NULL & NULL
    NULL

    >> NULL + NULL real(0) and NULL are not so different..  I think R is
    >> better here...

    >> The other two: R (once more) is stricter in order to help avoiding
    >> buggy code.

    >> In R,
    >>> real(0) > integer(0)
    >> logical(0)

    >> Therefore, I don't see why NULL > NULL should work...

    >> In sum, I think R behaves as we want, and the different behavior
    >> should go into the FAQ and probably also be mentioned in some *.Rd
    >> files.

    KH> Again, I am not entirely convinced yet.

you are right, me neither anymore..

We should discuss this some more

    KH> Why does adding two empty objects give something non-NULL?  To me,
    KH> this seems to violate `nihil nihilo fit' (the ``no-arbitrage
    KH> condition'').

I think the paradigm is

 NULL    :=  list of length 0  + is sometimes coerced to vector of length 0
				    ~~~~~~~~~
 real(0) :=  numeric(0) =  numeric vector of length 0

The real point of discussion is:

 -------------------------------------------------------------------------
##   In which situations should
##   NULL silently be coerced to numeric(0) / logical(0) / character(0) ?
 --------------------------------------------------------------------------

Currently,  S does this silent coercion very often
while  R does not.
I start thinking that maybe R should change here.

    KH> Also, why is it o.k. to ADD two empty objects, but not to compare
    KH> them?  (Shouldn't two NULL objects be the same?)

    KH> Btw, the code in chron that got me started on this was

    KH> 	if(any(o1 != o2))

    KH> trying to figure out whether two origins (o1, o2) were different.
    KH> Under R, this code fails if at least one of the origins is NULL.
    KH> What is the right way of coding this?  (Surely not the

    KH> 	if(any(o1 - o2))

    KH> I changed it to :-))

All was ok, if both  o1 and o2  where never NULL but rather numeric(0),
however see above.

-- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Jan  7 09:20:35 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 7 Jan 1998 10:20:35 +0100
Subject: tabular environment for Rd files
Message-ID: <199801070920.KAA14297@galadriel.ci.tuwien.ac.at>


I have added a preliminary version of a tabular environment to Rdconv
and committed it to the current development sources.

Syntax:

\tabular{format}{
  aaa \tab bbb \tab ccc \cr
  xxx \tab yyy \tab zzz
}

i.e., the column seperator is \tab and the line seperator is \cr

format is a usual LaTeX tabular format string, e.g in the above
example it could be `lll' giving three left justified columns.

currently only l, r, and c identifiers are supported, all doing the
obvious.=20

I thought about using LaTeX's `&' and `\\' as seperatoirs but these
would be inconsistent with the Rd-philosophy of having no special
characters (we want to get rid of having to escape & a.s.a.p.).

If you don't like \tab and \cr, please feel free to make better
suggestions.

The latex and html conversions seem to work perfectly ... as usual I'm
not so sure about nroff (it seems to work fine for me).

As I said, it's preliminary: Don't use any formatting such as \eqn
inside a tabular ... there might be unexpected results.

Best,
Fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 09:24:06 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 10:24:06 +0100
Subject: hist(.) -- S compatibility : [a,b) versus (a,b]  and ....
Message-ID: <199801070924.KAA04110@sophie.ethz.ch>

Looking at Albrech Gebhardt's bug report to R-help (Dec.23)
and proposal for improvement,

I've been also trying several examples and comparing results with S-plus.
Note that we have decided to NOT be fully compatible to S with our hist(.)
function since we found S to be really `wrong' and `unuseful':
S: - The value returned by hist(.) depends on plot=T or plot=F
R: - We return a list(.) either way which contains additional useful things
     anyway, see,  hist(.) in 0.60 or 0.61.
   - we will have a ``label = FALSE'' argument as proposed by Albrecht

However, there are several  incompatibilities:


1) S uses half-open  (a,b] intervals 
   where for the left most cell,  [a,b] is used when
	``include.lowest  =  T'' (which is default).

   R currently uses half-open  [a,b) intervals.

I propose to change R here, including the "include.lowest = TRUE" argument


2) S has    ``probability = F'',
   we have  ``freq = NULL''  (which defaults to FALSE for equidistant breaks
			      and  TRUE for non-equidistant breaks).

I think we don't want to change the better default here.
I wonder if we should change the argument name from 'freq' to 'probability'
			
---------

If I don't hear objections or better proposals from you,
I'll change "1)" and leave "2)".

Martin Maechler <maechler@stat.math.ethz.ch>		 <><
Seminar fuer Statistik, SOL G1
ETH (Federal Inst. Technology)	8092 Zurich	 SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Wed Jan  7 10:54:25 1998
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas Weingessel)
Date: Wed, 7 Jan 1998 11:54:25 +0100
Subject: R/S difference (data frames)
Message-ID: <199801071054.LAA13594@elendil.ci.tuwien.ac.at>


In R, it is not possible to use binary operations, like -, on the
lines of a data frame, even if all columns contain numeric values. In
Splus this is possible:

R> a<-data.frame(int1=3D1:3,int2=3D4:6)
R> a[1,]-a[2,]
Error in a[1, ] - a[2, ] : non-numeric argument to binary operator

but

S>  a<-data.frame(int1=3D1:3,int2=3D4:6)
S> a[1,]-a[2,]
  int1 int2=20
1   -1   -1


If not all columns contain numeric values, both R and S give an error:

R> b<-data.frame(int1=3D1:3,int2=3D4:6,char=3Dc("a","b","c"))
R> b[1,]-b[2,]
Error in b[1, ] - b[2, ] : non-numeric argument to binary operator

S> b<-data.frame(int1=3D1:3,int2=3D4:6,char=3Dc("a","b","c"))
S> b[1,]-b[2,]
Error in Ops.factor(e1, e2): "-" not meaningful for factors
Dumped

but the following is again different:

R> b<-data.frame(int1=3D1:3,int2=3D4:6,char=3Dc("a","b","c"))
R> b[1,1:2]-b[2,1:2]
Error in b[1, 1:2] - b[2, 1:2] : non-numeric argument to binary operator

S> b<-data.frame(int1=3D1:3,int2=3D4:6,char=3Dc("a","b","c"))
> b[1,1:2]-b[2,1:2]
  int1 int2=20
1   -1   -1



************************************************************************
*                          Andreas Weingessel                          *
************************************************************************
* Institut f=FCr Statistik      *                Tel: (+43 1) 58801 4541 =
*
* Technische Universit=E4t Wien *                Fax: (+43 1)  504 14 98 =
*
* Wiedner Hauptstr. 8-10/1071 *     Andreas.Weingessel@ci.tuwien.ac.at *
* A-1040 Wien, Austria        * http://www.ci.tuwien.ac.at/~weingessel *
************************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 11:06:14 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 12:06:14 +0100
Subject: pow_ii
In-Reply-To: <98Jan6.134910est.13446@mailgate.bank-banque-canada.ca> (message
 from Paul Gilbert on Tue, 6 Jan 1998 13:48:19 -0500)
Message-ID: <199801071106.MAA04212@sophie.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I was hoping fatal: relocation error: symbol not found: pow_ii:
    PaulG> referenced in .../dsefor.so would disappear in R 0.6x, but it
    PaulG> has not. I believe this is suppose to come from the f2c lib, but
    PaulG> I seem to need just a couple of routines: 

    PaulG> nm -u dsefor.so
    PaulG> Undefined symbols from dsefor.so:
    PaulG> .umul
    PaulG> pow_dd
    PaulG> pow_ii
    PaulG> pow_ri

    PaulG> For my own purposes I could compile with fortran but that makes
    PaulG> it much harder for others to use the library. Can anyone suggest
    PaulG> a good strategy so that the whole library can be used easily?

    PaulG> Paul Gilbert

Well, I don't know myself.

Paul, there are quite a few people eagerly waiting for your time-series
package to appear on CRAN !!
	==============
	please keep on
	==============

Ross plans to change and cleanup the R setup such
that either Fortran or f2c  will be required in a future release anyway.

On the other hand, there's currently 
	src/appl/fortran.c
	src/include/Fortran.h
which define
	POW_DD
and	POW_DI

You may augment these by  POW_II and POW_RI
and send your patches to R-devel....

-------

Probably, Ross should correct or augment these statements ...
	
- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan  7 11:35:41 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Jan 1998 12:35:41 +0100
Subject: pow_ii
In-Reply-To: Martin Maechler's message of Wed, 7 Jan 1998 12:06:14 +0100
References: <199801071106.MAA04212@sophie.ethz.ch>
Message-ID: <x24t3gldo2.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

>     PaulG> nm -u dsefor.so
>     PaulG> Undefined symbols from dsefor.so:
>     PaulG> .umul
>     PaulG> pow_dd
>     PaulG> pow_ii
>     PaulG> pow_ri
> 
> Well, I don't know myself.
...
> Ross plans to change and cleanup the R setup such
> that either Fortran or f2c  will be required in a future release anyway.

Are we already requiring the libs? I forget. If we do, isn't it just a
matter of adding them in when the .so file is linked?

> 
> On the other hand, there's currently 
> 	src/appl/fortran.c
> 	src/include/Fortran.h
> which define
> 	POW_DD
> and	POW_DI
> 
> You may augment these by  POW_II and POW_RI
> and send your patches to R-devel....



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 14:58:14 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 15:58:14 +0100
Subject: Segfault from seq(.)
Message-ID: <199801071458.PAA04442@sophie.ethz.ch>


R> gl(2,3):gl(1,6)

Process R segmentation violation at Wed Jan  7 15:56:45 1998

The reason seems to be that gl(1,6) is a factor with only one level.

patches welcome...
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 15:50:59 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 16:50:59 +0100
Subject: R-beta: sequences -- asReal(.) ?
In-Reply-To: <9801071055.AA14982@alpha.luc.ac.be> (message from Jim Lindsey on
 Wed, 7 Jan 1998 11:55:12 +0100 (MET))
Message-ID: <199801071550.QAA04539@sophie.ethz.ch>

[diverted from R-help to R-devel]

>>>>> "Jim" == Jim Lindsey <jlindsey@luc.ac.be> writes:

    Jim>   1. The change of sequences from reals to integers has created a
    Jim> number of problems. I already mentioned this earlier on the list
    Jim> but here is another example: contour(1:10,1:10,z) where z is an
    Jim> appropriate matrix, does not work. After searching quite a while,
    Jim> I discovered in the C code that contour checks for reals and does
    Jim> not allow integers. Someone is going to have through all the C
    Jim> code and change checks for reals to numeric anywhere where
    Jim> sequences might be used.

Sequences are not the only integer variables in R, even though probably the
most frequent ones.

I wonder, too what to do.
There is the  asReal(.) macro  which could be used instead of REAL(.),
but I wonder if this is the correct approach.

Ross ?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan  7 16:27:37 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 7 Jan 1998 17:27:37 +0100
Subject: pow_ii
In-Reply-To: <x24t3gldo2.fsf@blueberry.kubism.ku.dk>
References: <199801071106.MAA04212@sophie.ethz.ch>
 <x24t3gldo2.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801071627.RAA11761@pc25.none>

>>>>> Peter Dalgaard BSA writes:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
PaulG> nm -u dsefor.so
PaulG> Undefined symbols from dsefor.so:
PaulG> .umul
PaulG> pow_dd
PaulG> pow_ii
PaulG> pow_ri
>> 
>> Well, I don't know myself.
> ...
>> Ross plans to change and cleanup the R setup such
>> that either Fortran or f2c  will be required in a future release anyway.

> Are we already requiring the libs? I forget. If we do, isn't it just a
> matter of adding them in when the .so file is linked?

No, we're not.  In the current stage, we don't require a FORTRAN
compiler or f2c.  What you can (should) do now is to add "-lf2c" to the
.so rule in src-c/Makefile and hope that everyone has libf2c.  This will
of course mean that those who have a ``plain C only'' environment (no
FORTRAN compiler, no f2c) will not be able to install the package.  But
then again, in the near future they won't be able to compiler R anyway.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan  7 17:06:22 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 7 Jan 1998 18:06:22 +0100
Subject: English compatibility library
In-Reply-To: <Pine.SUN.3.95.980105090633.1964B-100000@chekov>
References: <34B0B3FB.3A42@math.uio.no>
 <Pine.SUN.3.95.980105090633.1964B-100000@chekov>
Message-ID: <199801071706.SAA11818@pc25.none>

>>>>> Thomas Lumley writes:

> Is there any good reason not to add the following:

> 	# R English compatibility library
> 	licence<-license
> 	colours<-colors
> 	heat.colours<-heat.colors
> 	terrain.colours<-terrain.colors
> 	topo.colours<-topo.colors
> 	optimise<-optimize
	

> I don't actually have difficulty with any of the R terms, but this
> sort of thing can be annoying.  In LaTeX I still type \begin{itemise}
> annoyingly often.

You could use the completion features provided by the corresponding
Emacs packages ...

Personally, I have no problem with a British compatibility package.
(Didn't you propose something similar with a ``Be nice to the English!''
email sometimes last year :-))  A potential problem is that it will
result in code being unusable in R- (yes, I know, one could provide the
same compatibility package there, ...).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Jan  7 17:13:38 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 7 Jan 1998 09:13:38 -0800 (PST)
Subject: pow_ii
In-Reply-To: <98Jan6.134910est.13446@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.SUN.3.95.980107091229.7924C-100000@chekov>

On Tue, 6 Jan 1998, Paul Gilbert wrote:

> I was hoping
> fatal: relocation error: symbol not found: pow_ii: referenced in .../dsefor.so
> would disappear in R 0.6x, but it has not. I believe this is suppose to come
> from the f2c lib, but I seem to need just a couple of routines:
> nm -u dsefor.so
> Undefined symbols from dsefor.so:
>     .umul
>     pow_dd
>     pow_ii
>     pow_ri
> For my own purposes I could compile with fortran but that makes it much harder
> for others to use the library. Can anyone suggest a good strategy so that the
> whole library can be used easily?

Until something final happens with R and FORTRAN you could include those
routines from the f2c library in your package.  The integrate package
already does this with pow_ii

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Wed Jan  7 18:43:05 1998
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas Weingessel)
Date: Wed, 7 Jan 1998 19:43:05 +0100
Subject: R/S Difference - split
Message-ID: <199801071843.TAA14847@elendil.ci.tuwien.ac.at>


In S it is possible to "split" a matrix into its rows, using
split(matrix, 1:number_of_rows). This is not possible in R.

Example:

R:
R> split(matrix(rnorm(1:20),4, 5), 1:4)
Error in split(x, as.factor(f)) : argument lengths differ


S:
> split(matrix(rnorm(1:20),4, 5), 1:4)
$"1":
[1] -0.1804794  0.5269439  0.6248224 -0.3243427 -1.2987407

$"2":
[1]  0.9384254 -1.7596400  1.1210493 -0.2711708  0.7039623

$"3":
[1] -0.02645670  0.81864215  0.58816596 -0.42465974 -0.02682458

$"4":
[1] -0.5523629 -0.7176803  0.3159648  0.7787409  1.6325061



************************************************************************
*                          Andreas Weingessel                          *
************************************************************************
* Institut f=FCr Statistik      *                Tel: (+43 1) 58801 4541 =
*
* Technische Universit=E4t Wien *                Fax: (+43 1)  504 14 98 =
*
* Wiedner Hauptstr. 8-10/1071 *     Andreas.Weingessel@ci.tuwien.ac.at *
* A-1040 Wien, Austria        * http://www.ci.tuwien.ac.at/~weingessel *
************************************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Thu Jan  8 00:18:55 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Thu, 8 Jan 1998 13:18:55 +1300 (NZDT)
Subject: R/S Difference - split
Message-ID: <199801080018.NAA20873@stat1.stat.auckland.ac.nz>

The difference is more fundamental:
   split(1:10,1:2)
   
 yields
 
  $"1":
[1] 1 3 5 7 9

$"2":
[1]  2  4  6  8 10

in Splus and an error in R. R is not recycling the factor. I'll see
about fixing this. Splus says that if group is shorter it should be
replicated to fill things up and if it is longer a warning will be
printed that some of the groups will have length zero. Any reasons
not to be compatible?

robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan  8 16:45:26 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 8 Jan 1998 17:45:26 +0100
Subject: R, LANG, and LC_....
In-Reply-To: <Pine.GSO.3.95.980108162951.3354A-100000@pc30.stat.umu.se>
 (message from Goran Brostrom on Thu, 8 Jan 1998 16:32:47 +0100 (MET))
Message-ID: <199801081645.RAA05896@sophie.ethz.ch>

=09[diverted from R-help  to R-devel]

>>>>> "GB" =3D=3D Goran Brostrom <gb@stat.umu.se> writes:

    GB> On 8 Jan 1998, Peter Dalgaard BSA wrote:

    >> Goran Brostrom <gb@stat.umu.se> writes:
    >> 
    >> > I am running R 0.61.0 on a Sparc 5, Solaris 2.4, in tcsh. Today I
    >> > couldn't, to my big surprise, scan a data file in R. As I finally
    >> > understood it, R wanted a decimal comma instead of a decimal
    >> point, > because LANG was set to 'sv'. See my runs below. I wonder
    >> why this
    >> 
    >> Apparently, the strtod() C library function accepts different
    >> formats depending on locale settings, so probably the
    >> setlocale(LC_ALL,""); in src/main/main.c is doing you in.
    >> 
    >> This is the same thing that allows you to have a variable called
    >> "f=F6r=E4ldre" and see come out right on plots, etc., so you don't w=
ant
    >> to remove that line.
    >> 
    >> I think that either you should setenv LC_NUMERIC to C or POSIX or R
    >> should only set LC_CTYPE (and maybe some of the others?).

    GB> Yes, the combination (LANG =3D sv & LC_NUMERIC =3D C) seems to work
    GB> properly.  Thanks!

    GB> Goran

Peter (and everyone), I still think we should replace

=09setlocale(LC_ALL,"");
by

=09setlocale(LC_CTYPE,"");
=09setlocale(LC_........);
=09setlocale(LC_........);

But probably you know better than me what the  ...... should be.

Note that we still have the problem that R's parser does not properly use
all the isalpha(.) characters when e.g. checking variable names.


- Martin.=
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan  8 17:15:21 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 8 Jan 1998 18:15:21 +0100
Subject: "X segfault" with   lty = '01'
Message-ID: <199801081715.SAA05968@sophie.ethz.ch>

Another situation, where an argument is not properly checked :

> plot(1:10,type='l',lty='01')

X Error of failed request:  BadValue (integer parameter out of range for operation)
  Major opcode of failed request:  58 (X_SetDashes)
  Value in failed request:  0x0
  Serial number of failed request:  26
  Current serial number in output stream:  29

Process R exited abnormally with code 1 at Thu Jan  8 18:13:55 1998
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jan  8 17:48:56 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 8 Jan 1998 18:48:56 +0100
Subject: development snapshot of Design package
Message-ID: <199801081748.SAA17071@pc25.none>

Jim Lindsey has made his quick shot at porting F Harrell's Design pkg
available in the CRAN src/contrib/devel area.

His changes are actually relative to version 0.50, so perhaps there is
need for undoing some changes.  They are cleanly documented, however.

It would be great if anyone could ``play'' some more with the port, so
that we have a fully functional one eventually.

-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan  8 18:02:37 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Jan 1998 19:02:37 +0100
Subject: R, LANG, and LC_....
In-Reply-To: Martin Maechler's message of Thu, 8 Jan 1998 17:45:26 +0100
References: <199801081645.RAA05896@sophie.ethz.ch>
Message-ID: <x24t3eu9mq.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> =09setlocale(LC_ALL,"");
> by
>=20
> =09setlocale(LC_CTYPE,"");
> =09setlocale(LC_........);
> =09setlocale(LC_........);
>=20
> But probably you know better than me what the  ...... should be.

Hmm, it's not easy to say. LC_COLL is a rather obvious candidate, but
maybe not in all languages (Danish alphabet contains the English one
as the first 26 characters in their usual order, so English text would
sort the same, but does that hold for all languages?).

> Note that we still have the problem that R's parser does not properly =
use
> all the isalpha(.) characters when e.g. checking variable names.

Yes, this is strange (Solaris 2.5.1, LC_CTYPE=3Diso_8859_1):

> b=F8<-1
> =E6=F8=E5<-1
Error: syntax error
> =F8=E5<-1
> =E6<-1
Error in 0 <- 1 : invalid (do_set) left-hand side to assignment

apparently =E6 (0xf8) is treated differently from its siblings. It seems
to get treated syntactically as digit 0. Even stranger, if I set
LANG=3Dda and unset LC_CTYPE, I get a syntax error on everything with
an '=F8' in it (??!!!)

--=20
   O__  ---- Peter Dalgaard             Blegdamsvej 3 =20
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N  =20
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan  8 18:18:46 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Jan 1998 19:18:46 +0100
Subject: R, LANG, and LC_....
In-Reply-To: Peter Dalgaard BSA's message of 08 Jan 1998 19:02:37 +0100
References: <199801081645.RAA05896@sophie.ethz.ch>
 <x24t3eu9mq.fsf@blueberry.kubism.ku.dk>
Message-ID: <x21zyiu8vt.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> apparently =E6 (0xf8) is treated differently from its siblings. It seems
             ^^^^^^^^^^
Hum. For once, quoted-unreadable seems to serve a useful purpose by
pointing out obvious mistakes....
 
> to get treated syntactically as digit 0. Even stranger, if I set
> LANG=3Dda and unset LC_CTYPE, I get a syntax error on everything with
> an '=F8' in it (??!!!)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Fri Jan  9 00:52:32 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Fri, 9 Jan 1998 13:52:32 +1300 (NZDT)
Subject: split(.) woes
Message-ID: <199801090052.NAA04850@stat1.stat.auckland.ac.nz>

I have fixed most (all I think) of the reported problems with split.
There should be a patch release this Sunday and the fixes will be in it
if anyone wants/needs them sooner please let me know and I'll pass them
along directly. Now I just need to change the documentation.....

I also fixed the problem with seq reported by Martin,
 On line 85 of seq.c change the i to a j.

  v2 = strlen(CHAR(STRING(levs2)[i]));
  
 should read
  v2 = strlen(CHAR(STRING(levs2)[j]));
  
  this will also be in the patches.
  
  robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan  9 18:07:47 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jan 1998 19:07:47 +0100
Subject: ctest miscellania
In-Reply-To: Kurt Hornik's message of Sun, 4 Jan 1998 15:05:28 +0100
References: <199801041405.PAA15561@aragorn.ci.tuwien.ac.at>
Message-ID: <x2wwg9jzbg.fsf@blueberry.kubism.ku.dk>

Sorry for leaving this one in my mail box for so long, but - well, I
suppose you know what I mean.

(I'm shifting it over to r-devel, so I'll include all your original
text)  

Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

> Well, ctest is not making progress as quickly as I wanted it ...
> Anyway, here are a few questions/remarks.
> 
> * I am still a bit confused about what binom.test() does.  For which
> test are the p-values computed?  In theory, ``the'' test to use would be
> the optimal unbiased one for one-parameter exponential families, which I
> think is not used ... also, this would be a randomized test, how is the
> p-value for such a test defined?  I should really appreciate someone
> helping me out on this.

I really don't think we should do randomized tests, except possibly as
an option. Different people getting different p-values for the same
data??

If one must do it, I conjecture that one could get a "p-value" by
looking at x + runif(1,-.5,.5) and linearly interpolating between - er,
draw a picture of the density of the modified x and think about it...

> * I would still like to come up with rather general functions for
> 	location.test()
> 	scale.test()
> and perhaps some more ...  Some time ago, Peter and Tony Rossini and I
> had quite a vivid exchange of emails on this, but I seem to have lost
> our final findings (in case we ever got this far).
> 
> Anyway, any input on this would be great.  Remember, the basic idea was
> to have a unified approach to e.g. several non-parametric tests for a
> difference in location or scale (rather than having mood.test,
> ansaribradley.test, vanderwaerden.test, ...).  However, as PD pointed
> out, it would be a bad idea to use this general scheme for tests which
> don't really fit in there (such as the Wilcoxon tests).  In fact, I seem
> to remember that one issue was whether there are any tests which really
> are location or scale tests ...

I think the main point was that they're not *median* tests,
(irrespective of what the SAS output says!) "Location test" is
probably OK. My basic worry was the risk of losing the simplicity of
having well known standard tests called simply t.test(),
wilcoxon.test(), in favour of a perhaps unnecessarily abstract
taxonomy. Of course there's always the possibility to do things like

spearman.test(...) <- function(...) cor.test(..., method="spearman")

etc.

> * Speaking of the Wilcoxon tests, I still need to add exact computations
> for the small-sample cases.  Does anyone have code or algorithms for
> doing that?

Signed rank is trivial, you just generate the 2^k different sign
patterns and look at the distribution of the sums. Even in interpreted
code, this can be done for k up to 16 or so, at which point the
difference from the approximation is immaterial. The bit patterns are
simply all binary numbers between 0 and 2^k-1.

The two-sample case is a bit more unwieldy...

> 
> * I also mentioned some time ago that I'd like to make Fisher's test
> available for tables larger than 2 by 2.  There is an implementation
> (FEXACT) of the Mehta and Patel algorithm available via APSTAT (I
> think).  However, when I last used it (for an association analysis of a
> gene with 12 alleles) it could not deal with the ``large'' 12 by 2
> table.  (More precisely, it can deal with it after enlarging some size
> parameters in the sources and recompiling, but that's not the smart
> wayof doing things ...)  Again, does anyone have a suggestion what to do
> here?  (FEXACT has a ``mixed'' method of dealing with larger tables, but
> it seems stupid to have an R function which may produce a message like
> ``no, I need more memory ... please try to change param XYZ and then
> recompile''.)

If one can precompute the size of the array, one can usually allocate
it in R and pass it as a parameter instead.

As you know, *my* main desires for ctest is to allow model formula
specifications for all of the common tests (for consistency), and in
the slightly longer run also include trend tests and stratification.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sun Jan 11 20:32:41 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Sun, 11 Jan 1998 14:32:41 -0600 (CST)
Subject: "precise description" in output of prompt()
Message-ID: <m0xrU3l-000hhBC@franz.stat.wisc.edu>

The output of prompt(function) includes the line
 \description{
  ~~ A precise description of what the function does. ~~
 }
Should that be "concise" rather than "precise"?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 11 21:21:37 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Jan 1998 22:21:37 +0100
Subject: "precise description" in output of prompt()
In-Reply-To: Douglas Bates's message of Sun, 11 Jan 1998 14:32:41 -0600 (CST)
References: <m0xrU3l-000hhBC@franz.stat.wisc.edu>
Message-ID: <x21zyeogf2.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> 
> The output of prompt(function) includes the line
>  \description{
>   ~~ A precise description of what the function does. ~~
>  }
> Should that be "concise" rather than "precise"?

I don't think so. That would be what goes in \title. Perhaps
"detailed"? 

Of course, I don't have English as my mother tongue. Er, I mean, I do,
actually, literally, but my native language is Danish...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Sun Jan 11 23:58:57 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Mon, 12 Jan 1998 12:58:57 +1300 (NZDT)
Subject: matrix multiply
Message-ID: <199801112358.MAA08468@stat1.stat.auckland.ac.nz>

A long time ago thomas noted:

----------------------------------------------------------------------
TASK:   Matrix multiply problems
STATUS: Open
FROM:   <thomas@biostat.washington.edu>
        Both of these used to work and seem useful and harmless (and work in S):
        R> matrix(1,ncol=1)%*%c(1,2)
        Error in matrix(1, ncol = 1) %*% c(1, 2) : non-conformable arguments
        R> matrix(1,ncol=1)*(1:2)
        Error: dim<- length of dims do not match the length of object

----------------------------------------------------------------------

 I have fixed both of these. In the second case all binary ops now
 behave in this manner. In the first case only %*% has been "fixed".
 
 
 robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Jan 12 14:49:53 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 12 Jan 1998 08:49:53 -0600
Subject: Symbolic derivation
In-Reply-To: Wenyaun Xi's message of Sun, 11 Jan 1998 20:38:27 -0700 (MST)
References: <Pine.SOL.3.90.980111202649.3948A-100000@keynes.econ.utah.edu>
Message-ID: <6roh1hg31q.fsf@franz.stat.wisc.edu>

Wenyaun Xi <xi@keynes.econ.utah.edu> writes to S-news:

> I ran into some problems when I tried to get symbolic derivation by 
> using a function deriv3(). The expression contains 18 
> parameters, of which I want to have an information matrix eventually. I 
> ran it on my 200MHz Pentium PC with 64meg RAM. Each time I kick out the 
> job, the S-plus 3.1 for Windows stops after about 2 hour of real time 
> and suggests that it requires more memory(size varies each time) in 
> addition to those already in use. I don't know if this is a memory related 
> problem or there is a whole different issue involved here other than the 
> memory.

May I suggest sending a message on this to R-devel@stat.math.ethz.ch?
I am sending a cc: of this message to that group.

R is a freely available language that behaves like S but has a
fundamentally different underlying implementation.  It is possible
that your problem that causes difficulty in S will be easier to run in 
R.  The issues are probably memory related and R does "garbage
collection" but S does not.  Also, deriv in R is implemented in the
underlying C code rather than in the S code.

If you want to install R yourself you can check the CRAN
(Comprehensive R Archive Network) sites.  One close to you is
	   ftp://ftp.biostat.washington.edu/mirrors/R/CRAN/
Otherwise, you could post the call to deriv3() that you are trying to
evaluate to the R-devel list and someone could try to run it for you.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 12 16:38:16 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 12 Jan 1998 17:38:16 +0100
Subject: Default device instead of ``No graphics device is active''
Message-ID: <199801121638.RAA01160@sophie.ethz.ch>

in RHOME/src/ :
	grep DevInit */*.[ch]
reveals only a few calls such as

	if(!DevInit) error("No graphics device is active\n");

(in graphics/graphics.c  and  main/par.c).

Couldn't we startup a default device instead of having the error message?

The Default device would be

	Unix, interactive:	x11
	Unix, batch:		postscript
	
	Win,  interactive:	windows
	Win,  batch:		postscript ??

	Mac,  interactive:	macintosh
	Mac,  batch:		postscript  ????

[ one could even  define

	default.device <- x11		
  in Rprofile.unix, etc.

 and have the same .First function  
	(which could be moved out of profile to base

  .First <- function() if(interactive()) default.device()
]

-- If I remember properly, this is also  how S4 behaves..

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jan 12 17:02:12 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jan 1998 18:02:12 +0100
Subject: Default device instead of ``No graphics device is active''
In-Reply-To: Martin Maechler's message of Mon, 12 Jan 1998 17:38:16 +0100
References: <199801121638.RAA01160@sophie.ethz.ch>
Message-ID: <x2d8hx62y3.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> Couldn't we startup a default device instead of having the error message?

Very good idea!

> The Default device would be
> 
> 	Unix, interactive:	x11

or: "none" (or "printer"???) if DISPLAY not set, or maybe customizable
(sometimes you really don't want it, e.g. when connected to Auckland
from Europe...)

>   .First <- function() if(interactive()) default.device()

Actually, it might be a better idea to use this to *get rid* of the
initial graphics startup. I, for one, tend to get annoyed at seeing
the window popup, even when what I am trying to do has nothing to do
with graphics. Having to place it manually doesn't help...

While we're at this, how about making it possible to override the
printer and device orientation in print.plot() and save.plot()?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Jan 12 17:07:12 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 12 Jan 1998 09:07:12 -0800 (PST)
Subject: Default device instead of ``No graphics device is active''
In-Reply-To: <199801121638.RAA01160@sophie.ethz.ch>
Message-ID: <Pine.SUN.3.95.980112090129.4431B-100000@chekov>

On Mon, 12 Jan 1998, Martin Maechler wrote:

> in RHOME/src/ :
> 	grep DevInit */*.[ch]
> reveals only a few calls such as
> 
> 	if(!DevInit) error("No graphics device is active\n");
> 
> (in graphics/graphics.c  and  main/par.c).
> 
> Couldn't we startup a default device instead of having the error message?

yes, though I think the default device for batch processing should do
nothing or just emit warnings -- if postscript() is the default then you
might overwrite the previous contents of an output file. At least if it is
going to be postscript() it should use a unique file name. 

It should be relatively easy to define a none() device that does
absolutely nothing (a simple but inefficient one would be
postscript("/dev/null") under Unix)

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 13 17:08:40 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 13 Jan 1998 18:08:40 +0100
Subject: par2(..) ? -- only used in library(mva)..
Message-ID: <199801131708.SAA02573@sophie.ethz.ch>

src/library/base/R/par

	still defines  par2(.) which is not used anymore ..
	in the base package.

This (undocumented) function had been introduced around 0.49 or so.
I'm guessing that its intent is to be used from
high-level plotting functions for setting parameters specified by the
 "..." arguments.

Since (at least) 0.61,  par2(.) has been eliminated from all the
library/base/R/ code.
However it IS still used in  src/library/mva/R/hclust and ......./mva

Ross, Paul, ??
can we decide if this function is  needed / useful enough to be part of R
``properly'' (i.e. including documentation), or 
was it just a convenience kludge that should be eliminated ASAP?

--
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 13 17:26:51 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 13 Jan 1998 18:26:51 +0100
Subject: funny axis ranges;  GPretty(.) vs.  pretty(.) and all that...
Message-ID: <199801131726.SAA02683@sophie.ethz.ch>

[This is something like a bug report;
 maybe somewhat longish & technical ..]

As an introduction, just try the following code
(it should work both in R and S).
I think it screws up the postscript() driver both for S and R, but this is
not the issue here.


is.R <- function() { ## returns  'TRUE'  iff we are using 'R'
  exists("version") && !is.null(vl <- version$language) && vl == "R"
}

p.axis.range <- function(k.set = c(-100,-9:-6,-3,3,5,20),
                         y.k.add = 1)
{
  ## Purpose: Plot axis scaling & labeling with funny range(.)
  ## -------------------------------------------------------------------------
  ## Arguments: k.set: (0, 10^k  will be the ranges
  ## -------------------------------------------------------------------------
  ## Author: Martin Maechler, Date: 12 Jan 98, 18:15

  lk <- length(k.set); slk <- ceiling(sqrt(lk))
  op <- par(mfrow=c(slk,slk), mar = .2+c(3,2,1,1), oma=rep(1,4))
  on.exit(par(op))
  ##        oma does not really work
  if(is.R()) { colx <- rainbow(lk); coly <- terrain.colors(lk)
             } else colx <- lk + (coly <- 1:lk)
  for(i in 1:lk) {
    k <- k.set[i]
    if(is.R()) {
      plot.new()
      plot.window(xlim= c(0,10^ k),
                  ylim= c(0,10^(k+y.k.add)),"")
      box(lty='dashed')
    } else { ## S4 and S-plus
      plot.default(0,0,xlim= c(0,10^ k), ylim= c(0,10^(k+1)),
                   type = 'n', xlab='', ylab='')
    }
    cat("\n--------------------------------\n\n",
        "xlim= c(0, 10^", k,")    ==> par('usr')[1:2]=", par("usr")[1:2],"\n")
    par(col=colx[i]); if(is.R()) axis(1, col.axis= colx[i]) else axis(1)
    mtext(paste("xlim= (0, 10^",k,")",sep=""),	       line=-4)
    par(col=coly[i]); if(is.R()) axis(2, col.axis= coly[i]) else axis(2)
    mtext(paste("ylim= 10^",y.k.add," * xlim",sep=""), line=-6)
    par(col=if(is.R())'black' else 1)
    mtext(paste("par(\"usr\")= 10 ^", k," *"), line= -9, cex= .4)
    mtext(paste(format(par("usr")*10^-k),collapse=",  "), line= -11, cex= .3)
  }
  invisible(NULL)
}

p.axis.range()

##-----------------------------------------------------------------------------

##>> Now, what's going on? [in R, don't know for S; this all hidden in 
##>> 			calls such as 
##>> 			.Internal(.Cur.picture(), "S_cur_pic", T, 1) ]

## The main problem is  GPretty() in  $RHOME/src/graphics/graphics.c !

##R: plot.default()  -->   plot.new();  plot.window(xlim, ylim, log)

##C: 1:  do_plot_window()   in  $RHOME/src/main/plot.c

##		checks its arguments and then
##		GCheckState(); GScale(xmin, xmax, 1); GScale(ymin, ymax, 2);

##   2:  GScale(.)	    in $RHOME/src/graphics/graphics.c

##		checks args; sets up 'xmin', 'xmax' depending on 'log',..axt'
##		then  GPretty(&xmin, &xmax, &n);
##		      ~~~~~~~
##		and puts its result  in  GP->[x/y]axp  -- i.e. par("xaxp") or y.

##   3:  GPretty(.)   [also in ...graphics.c  is SIMILAR to but different from
##		       		$RHOME/src/appl/pretty.c
##		       which is called from
##		       		$RHOME/src/library/base/R/pretty

##	uses  FLT_EPSILON  (/usr/include/float.h)  in 3 places, where the above
##	pretty(.)  uses FLT_EPSILON only once ...
##
## Why use it at all (the way it is done)?
##
## S-plus's  pretty(.) is quite different;   also the  p.axis.range(.) below:
## ---> Comparison of  pretty(.) and Gpretty(.)  : see below.

So it's the  FLT_EPSILON which is about 1e-7,
and leads to the funny  -1e-7, +1e-7  axis ranges.

%%>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>
%%>=>  Questions/Remarks						     %%
%%>=>  									     %%
%%>=>  1) Why (and how if..) should GPretty(.) be different from pretty?     %%
%%>=>  									     %%
%%>=>  2) Couldn't we at least replace FLT_EPSILON  by DOUBLE_EPSILON ?	     %%
%%>=>  									     %%
%%>=>  3) axis(.) still has another bug: it draws the line and writes labels %%
%%>=>  	   OUTSIDE the "usr" coordinates.				     %%
%%>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>



###------ Try the following code to find out about the differences
###------ of the 2 versions of  pretty(.) : ------------------------

Cpretty <- Cpretty1 <- function (x, n = 5)
  unlist(.C("pretty", l = min(x), u = max(x), n = as.integer(n)))
Cpretty2 <- function (x, n = 5) {
  ##-- return what  .C("pretty... doe
  n <- length(p <- pretty(x,n))
  c(l=p[1], u=p[n], n=n-1)
}

Cpretty(pi)
all(Cpretty1(pi) == Cpretty2(pi))
all(Cpretty1(c(0,pi)) == Cpretty2(c(0,pi)))
for(i in 1:100) {
  x_c(runif(1),pi)
  for(k in -14:14) {
    ok <- all(Cpretty1(x*10^k) == Cpretty2(x*10^k))
    if(!ok) cat("NOT ok:  x=",deparse(x)," k=",k,"\n")
  }
}

Gpretty <- function (x, n = 5)
{
  plot.new(); op <- par(); on.exit(par(op))
  par(lab=c(n, par("lab")[-1]))
  plot.window(xlim=c(min(x),max(x)), ylim=0:1, "")
  par("xaxp")
}

##--- Gpretty() and Cpretty() are DIFFERENT much more than the same !!! -------

vcat <- function(vec, sep = " ", dig=2)
  paste(formatC(vec, dig=dig), collapse = sep)

show.ok <- TRUE
show.nok <- TRUE
show.nok <- !show.ok
for(i in 1:100) {
  x <<- sort(c(runif(1),4*rexp(1)))
  n <- max(1, rpois(1,lam=3))
  cat("\n")
  for(k in -14:14) { cat(".")
    ok <- all((cp <- Cpretty(x*10^k,n=n)) == (gp <- Gpretty(x*10^k,n=n)))
    if(!ok && show.nok) cat("NOT the same:  n=",n,"x=",vcat(x)," k=",k,
                "; Cp=",vcat(cp), " Gp=",vcat(gp),"\n")
    else if(ok && show.ok) cat("the same:  n=",n,"x=",deparse(x)," k=",k,
                              ";  Cp=Gp=",vcat(cp),"\n")
  }
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Jan 14 14:28:09 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 14 Jan 1998 15:28:09 +0100
Subject: New features in Rd format
Message-ID: <199801141428.PAA19087@galadriel.ci.tuwien.ac.at>


I have added the following features to the Rd format:

* Sd output format as contributed by Doug Bates ... this should create
help files for S[+] from Rd files

* New sections Format and Source ... both are necessary for
documentation of data files (these are not supported by Sd yet, but
should work for html, nroff and latex)

E.g., the documentation source for the acid data now looks like:

**********************************************************

\name{acid}
\title{Determination of Formaldehyde}
\usage{data(acid)}
\format{A data frame with 6 observations on 2 variables.

  \tabular{rlll}{
  [,1]  \tab carb  \tab numeric  \tab Carbohydrate (ml) \cr
  [,2]  \tab opt   \tab numeric  \tab Optical Density \cr
  }
}
\description{These data are from an chemical experiment to prepare a standard cur
ve
for the determination of formaldehyde by the addition of chromatropic
acid and concentrated sulpuric acid and the reading of the resulting
purple color on a spectophotometer.

}
\source{Bennett, N. A. and N. L. Franklin (1954).  Statistical analysis in
Chemistry and the Chemical Industry.  New York: Wiley
}
\references{McNeil, D. R. (1977).  Interactive Data Analysis.  New York: Wiley.
}


**********************************************************


Eventually all data files will be documented using the Rd format
... it just needs somebody with some extra time ...


Best,
Fritz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 14 14:53:29 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 14 Jan 1998 15:53:29 +0100
Subject: system.file(..) :  Any reason why it should not work with wildcards?
Message-ID: <199801141453.PAA03685@sophie.ethz.ch>

{BTW:  there's still no docu. for it}

Do you see any reason why
system.file() should not work with wildcards?

Currently, it just returns the first file found.
The obvious change to make would be to erase "; exit 0"
in RHOME/cmd/filename

-- If nobody objects, I'll do the change .. --

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 14 16:38:53 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 14 Jan 1998 11:38:53 -0500
Subject: DSE alpha
Message-ID: <98Jan14.114356est.13445@mailgate.bank-banque-canada.ca>

I have a  version of my DSE time series library working in R 0.61.1 under
Solaris, but have had a few minor problems making a tar file to test at home
under Linux. I think I have it fixed now, but since there is a one day
turnaround on this process it may slow me down even more than the ice storm and
the power outages. I would like to test if things work on some other OSs before
I put this on CRAN. Could someone please

ftp data.bank-banque-canada.ca
logon as anonymous
cd pub/pgilbert
get dse.v.98.1alpha.tar
(Beware there is also a dse.v.98.1alpha.tar.gz but this seems to have been
  mangled by the firewall? and does not uncompress)

then
tar xf dse.v.98.1alpha.tar
cd Rdse
run the INSTALL script (several R INSTALLs)
and run the script test.dse.lite (I'll fix English spellings later.) which
starts R, attaches libraries, and runs many tests.

Also, if anyone would like to try compiling the fortran or C under Windows and
installing, I would appreciate knowing how that works.

Thanks.
Paul Gilbert




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 15 11:13:13 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 15 Jan 1998 12:13:13 +0100
Subject: debugging dynamically loaded code
Message-ID: <199801151113.MAA01121@galadriel.ci.tuwien.ac.at>


How can I debug code that I load at runtime?

Currently I do the following:

	load R.binary into gdb
	run
	load shared object code using dyn.load()
	quit the R process

from then on gdb seems to be smart enough such that the source code
of the .so file is available and I can set breakpoints etc.

however, when I restart the R process I get:

(gdb) break printing.c:7
Breakpoint 1 at 0x407af036: file printing.c, line 7.
(gdb) run
Starting program: /usr/local/lib/R/bin/R.binary
Cannot insert breakpoint 1:
Temporarily disabling shared library breakpoints:


i.e., all breakpoints are disbled and I cannot figure out how to
enable them again (even after inserting the .so object).

Am I missing anything?

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan 15 14:54:38 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Jan 1998 08:54:38 -0600
Subject: debugging dynamically loaded code
In-Reply-To: Friedrich Leisch's message of Thu, 15 Jan 1998 12:13:13 +0100
References: <199801151113.MAA01121@galadriel.ci.tuwien.ac.at>
Message-ID: <6rbtxdwzwx.fsf@franz.stat.wisc.edu>

The secret of symbolic debugging of dynamically loaded code is to
 - Call the debugger on the R executable.  Since I do this within
   emacs, I don't use the "R gdb" facility, I symbolically link the
   R.binary file into the directory with my code and call the debugger 
   through M-x gdb.
 - Set the environment variables that the $RHOME/bin/R script would.
 - Start the R program.
 - At the R prompt, use dyn.load() to load your library.
 - Send an interrupt signal.  Inside of gud mode in emacs, I think you 
   send C-C C-C.  This will put you back to the debugger prompt.
 - Set the breakpoints in your code.
 - Continue execution of R by typing "signal 0<ret>".

As I mentioned above, I find it easiest to use the directory with my
code in it as the cwd and then make a symbolic link from that
directory to the R executable.  That way the .gdbinit can stay in the
directory with the code and be used to set up the environment and the
search paths for the source.

A sample .gdbinit would be
 set env RHOME /usr/lib/R
 set env R_PAPERSIZE letter
 set env R_PRINTCMD lpr
 dir /usr/lib/R/src/main
 dir /usr/lib/R/src/math
 dir /usr/lib/R/src/appl
 dir /usr/lib/R/src/unix

It is possible that those last lines could be written as
 dir $(RHOME)/src/main
instead.  I haven't tried it out.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 15 15:13:16 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 15 Jan 1998 10:13:16 -0500
Subject: $CRAN/src/contrib/devel
References: <199712221638.RAA16954@galadriel.ci.tuwien.ac.at>
Message-ID: <98Jan15.101848est.13451@mailgate.bank-banque-canada.ca>

Friedrich

I've tested my DSE library under Solaris and Linux and I'm ready to put a tar.gz
on
CRAN/src/contrib/devel. How do I do that? I apologize, I know you've explained
this before, but I can't find the instructions.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 15 15:20:59 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 15 Jan 1998 16:20:59 +0100
Subject: $CRAN/src/contrib/devel
In-Reply-To: <98Jan15.101848est.13451@mailgate.bank-banque-canada.ca>
References: <199712221638.RAA16954@galadriel.ci.tuwien.ac.at>
 <98Jan15.101848est.13451@mailgate.bank-banque-canada.ca>
Message-ID: <199801151520.QAA02069@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 15 Jan 1998 10:13:16 -0500,
>>>>> Paul Gilbert (PG) wrote:

PG> Friedrich
PG> I've tested my DSE library under Solaris and Linux and I'm ready to p=
ut a tar.gz
PG> on
PG> CRAN/src/contrib/devel. How do I do that? I apologize, I know you've =
explained
PG> this before, but I can't find the instructions.

Ooops, there's really nothing about uploading in the html pages, only
in the mirrors page and that's not the obvious place to look at
... I'll change that a.s.a.p.

just put it into

	ftp://ftp.ci.tuwien.ac.at/incoming

and drop a note to wwwadmin@ci.tuwien.ac.at

best,
fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan 15 15:47:39 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Jan 1998 09:47:39 -0600
Subject: $CRAN/src/contrib/devel
In-Reply-To: Friedrich Leisch's message of Thu, 15 Jan 1998 16:20:59 +0100
References: <199712221638.RAA16954@galadriel.ci.tuwien.ac.at> 	<98Jan15.101848est.13451@mailgate.bank-banque-canada.ca> <199801151520.QAA02069@galadriel.ci.tuwien.ac.at>
Message-ID: <6ryb0hviw4.fsf@franz.stat.wisc.edu>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> Ooops, there's really nothing about uploading in the html pages, only
> in the mirrors page and that's not the obvious place to look at
> ... I'll change that a.s.a.p.

The instructions are in the FAQ.

(Imagine that - someone actually read at least part of the FAQ!  What
a novel idea.)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 15 17:01:29 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 15 Jan 1998 12:01:29 -0500
Subject: $CRAN/src/contrib/devel
References: <199712221638.RAA16954@galadriel.ci.tuwien.ac.at> 	<98Jan15.101848est.13451@mailgate.bank-banque-canada.ca> <199801151520.QAA02069@galadriel.ci.tuwien.ac.at> <6ryb0hviw4.fsf@franz.stat.wisc.edu>
Message-ID: <98Jan15.120707est.13441@mailgate.bank-banque-canada.ca>

Doug

>> Ooops, there's really nothing about uploading in the html pages, only
>> in the mirrors page and that's not the obvious place to look at

>The instructions are in the FAQ.
>(Imagine that - someone actually read at least part of the FAQ!  What
>a novel idea.)

I did look in the FAQ, which I usually find very useful, but even checking it
again I don't see these instructions. I must be going blind in my old age.
Perhaps I'm using the wrong version of the FAQ. Just exactly which FAQ are you
reading and where do you see these instructions?

(BTW - Thanks for your clarification on R INSTALL pkg lib, which I was also
following from the FAQ, but I made some wrong assumptions. I didn't think that
INSTALL actually needed to copy things since all the structure was already in
pkg, so I was quite confused.)

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan 15 19:17:27 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 15 Jan 1998 13:17:27 -0600 (CST)
Subject: a -nographics option to R
Message-ID: <m0xsun9-000hiQC@franz.stat.wisc.edu>

Right now the standard R.profile assigns the .First function as

 .First <- function() {
   if (interactive() && getenv("DISPLAY") != "") x11()
 }

Is it reasonable to extend that a bit and use

 .First <- function() {
   if (interactive() && getenv("DISPLAY") != "" && ! (getenv("R_NOX") != "")) x11()
 }

or something like that then put a -nographics flag into the R script
that would set R_NOX.  I am encountering the same kind of difficulty
that Peter Dalgaard mentioned when working remotely over a slow
connection.  I'm just checking that the compiled R works properly on
the other computer and I don't want to wait for it to spring up the
X11 window every time it starts.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 15 20:17:55 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Jan 1998 21:17:55 +0100
Subject: a -nographics option to R
In-Reply-To: Douglas Bates's message of Thu, 15 Jan 1998 13:17:27 -0600 (CST)
References: <m0xsun9-000hiQC@franz.stat.wisc.edu>
Message-ID: <x24t35lcek.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> that would set R_NOX.  I am encountering the same kind of difficulty
> that Peter Dalgaard mentioned when working remotely over a slow
> connection.  I'm just checking that the compiled R works properly on
> the other computer and I don't want to wait for it to spring up the
> X11 window every time it starts.

The current plans are to get rid of the initial graphics startup
altogether and make the plot commands do it automagically instead of
faulting when there's no graphics device. (We seem to have committed
our usual sin of discussing things in R-core that might as well have
been discussed on R-devel.)

BTW: If it's ssh that does this to you, note that it has a config file
that can turn the X transport off. If it's telnet, I wouldn't know,
but you might murder the DISPLAY setting by invoking as

DISPLAY= R

(which, incidentally, is fewer keypresses than "R -nographics"...)

Requires an sh-family shell, though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Jan 16 07:17:32 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 16 Jan 1998 08:17:32 +0100
Subject: Packages for RedHat 4.2, Debian 1.3
Message-ID: <199801160717.IAA10104@galadriel.ci.tuwien.ac.at>

Doug Bates has succeeded in building rpm's for RedHat 4.2:

>>>>> On Thu, 15 Jan 1998 14:57:22 -0600 (CST),
>>>>> Douglas Bates (DB) wrote:

DB> I finally got r-base to build on a Debian 1.3 machine.  The
DB> r-base_0.61.1-1_i386.deb file now in the incoming area is for 1.3.

These are on CRAN now.

DB> I also got an .rpm for RedHat 4.2 to build.  It looks like it does no=
t
DB> have any problematic dependencies.  I will upload it, too.  It may be
DB> a good idea to have someone try to install it on a RedHat 4.2 machine
DB> before putting it into CRAN.  What do you think?

Yes, it might save us a couple of (correctly) complaining emails ...

I have put the RedHat 4.2 packages into

	ftp://ftp.ci.tuwien.ac.at/outgoing

Could someone running RH 4.2 system please check them and email me
(and Doug) if they can be put onto CRAN? Thanks in advance!

Best,
Fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 15:02:17 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jan 1998 09:02:17 -0600
Subject: ESS-mode and X-emacs problem
In-Reply-To: kim.pilegaard@risoe.dk's message of Fri, 16 Jan 1998 08:40:10 -0100
References: <9801160940.AA07107@eco-sun.risoe.dk>
Message-ID: <6r7m80pime.fsf@franz.stat.wisc.edu>

kim.pilegaard@risoe.dk (Kim Pilegaard) writes:

> When I try to invoke R from xemacs I get the following responses:
> 
> ESS starting data directory? ~/
> 
> "Process R is not running". 
> 
> This is what the R buffer shows:
> 
> R : Copyright 1997, Robert Gentleman and Ross Ihaka
> Version 0.61.0 Alpha (December 21, 1997)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type	"license()" for details.
> 
> Type	"demo()" for some demos, "help()" for on-line help, or
> 	"help.start()" for a HTML browser interface to help.
> 
> "TERMCAP", line 0, terminal 'emacs': /usr/share/terminfo: permission denied
> 
> Process R exited abnormally with code 1 at Fri Jan  9 08:11:59 1998
> 
> R runs correct from the shell and is installed as /usr/local/bin/R.
> I am running Linux 2.0, Xemacs 19-14 and R-0.61.

It looks like R is trying to run with the readline history facilities
started.  It shouldn't do this when you are running under ESS.

One quick fix might be to install a terminfo entry for the "emacs" 
terminal type but I'm not sure how you do that.

I had thought that when ESS started the R process it should send the
-noreadline flag to it.  From the R manual page

       The following options are present to support the use of  R
       from  other  programs.   In  particular,  the  -noreadline
       option exists so that R can  be  run  under  emacs(1)  and
       xemacs(1) using ESS.

       -noreadline
              Turn  off  the  use of the readline(3) command line
              editing.

If R is getting the -noreadline flag properly then my guess is that
the call to initialize the readline library (probably in
$RHOME/src/unix/system.c) is not being protected by an if statement
that checks for this flag.

Earlier I reported a problem in $RHOME/src/unix/system.c that some
ifdef's were checking for HAVE_READLINE_HISTORY_H but that variable
was not being defined by the autoconfigure script.  I'm not sure if
that has been corrected yet.

When I was looking for those definitions I noticed the
autoconfiguration on the version I compiled for Debian Linux 2.0 does
not set HAVE_READLINE but that version on Debian Linux 1.3 does.  This 
looks like another autoconfigure problem. 
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 15:13:39 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jan 1998 09:13:39 -0600
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: Friedrich Leisch's message of Fri, 16 Jan 1998 10:14:34 +0100
References: <199801160914.KAA25868@galadriel.ci.tuwien.ac.at>
Message-ID: <6r67nkpi3g.fsf@franz.stat.wisc.edu>

Goran Brostrom <gb@stat.umu.se> writes:

> I tried it on my newly installed RH 4.2 system (as root):
> 
> # rpm -i r-base-.....rpm
> failed dependencies:
>      /usr/bin/perl is needed by r-....
>      /bin/sh  is needed by r-....
>      /bin/sh     is needed by r-...
> 
> I have those guys, and I was running sh. I guess that I don't know enough
> about RedHat and rpms (I know nothing...). What is the correct way to=20
> do the installation?
> 
> G|ran Brostr|m
> Statistics Department
> Umea University, Umea, Sweden

You may be able to install it with
 rpm -i --nodeps r-base-....rpm

My problem in making these packages is that I generate them under
Debian GNU/Linux as .deb packages then use an automatic transformation
program to create the RedHat Linux .rpm packages.  Since I don't use
rpm for installation myself it is difficult for me to test them.  I
know what the Debian package installer does when it checks
dependencies but I don't know where rpm looks to satisfy dependencies.

Maybe we can try a bit more with installation of the RedHat packages
and if people are still encountering problems like this then we'll
punt and ask others to build the .rpm packages on RedHat systems.

The reason I wanted to keep the Debian and RedHat packages in sync was 
that it makes the organization of the directories, etc. consistent so
it is easier to track down bugs.  Also, I had hoped it would avoid
some duplication of effort.  That may not be the case.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 15:27:27 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jan 1998 09:27:27 -0600
Subject: ESS-mode and X-emacs problem
In-Reply-To: Douglas Bates's message of 16 Jan 1998 09:02:17 -0600
References: <9801160940.AA07107@eco-sun.risoe.dk> <6r7m80pime.fsf@franz.stat.wisc.edu>
Message-ID: <6rzpkwo2w0.fsf@franz.stat.wisc.edu>

Douglas Bates <bates@stat.wisc.edu> writes:

> It looks like R is trying to run with the readline history facilities
> started.  It shouldn't do this when you are running under ESS.
> 
> One quick fix might be to install a terminfo entry for the "emacs" 
> terminal type but I'm not sure how you do that.
> 
> I had thought that when ESS started the R process it should send the
> -noreadline flag to it.  From the R manual page
> 
>        The following options are present to support the use of  R
>        from  other  programs.   In  particular,  the  -noreadline
>        option exists so that R can  be  run  under  emacs(1)  and
>        xemacs(1) using ESS.
> 
>        -noreadline
>               Turn  off  the  use of the readline(3) command line
>               editing.
> 
> If R is getting the -noreadline flag properly then my guess is that
> the call to initialize the readline library (probably in
> $RHOME/src/unix/system.c) is not being protected by an if statement
> that checks for this flag.

Maybe I pointed the finger in the wrong direction.  I don't see that
the -noreadline flag is being passed to R when invoked by ESS.
 cd /usr/lib/xemacs/site-lisp/ESS-5.0/
 grep -n noreadline *.el /dev/null
 # no responses.

Try starting R by
C-u M-x R
and when it asks for "Starting Args ?" put in the -noreadline flag.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 15:36:41 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Fri, 16 Jan 1998 09:36:41 -0600 (CST)
Subject: mtp2R.pl
Message-ID: <m0xtDp3-000hiQC@franz.stat.wisc.edu>

I received some large data sets in Minitab Portable Worksheet (.mtp)
format and wanted to read them into R.  Here is a _first cut_ at a
perl script that transforms .mtp files into something that can be
read by R. Comments, bug-fixes, enhancements and extensions are welcome.

#!/usr/bin/perl

# Convert a Minitab Portable Worksheet to an R (or S-PLUS) list structure

# $Id: mtp2R.pl,v 1.1 1998/01/16 15:33:27 bates Exp $
# Copyright (C) 1998 Douglas M Bates
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2, or (at your option)
# any later version.
#
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.	See the GNU
# General Public License for more details.
#
# A copy of the GNU General Public License is available via WWW at
# http://www.gnu.org/copyleft/gpl.html.	 You can also obtain it by
# writing to the Free Software Foundation, Inc., 675 Mass Ave,
# Cambridge, MA 02139, USA.

# Send any bug reports to Douglas Bates <bates@stat.wisc.edu>

require 5.003;
use strict;
use Carp;

for ( @ARGV ) {
    open( MTP, "< $_" ) ||
        carp( "Unable to open $_ for reading: $!\n" );
    s/\.mtp$/.R/i;
    open( R, "> $_" ) ||
        carp( "Unable to open $_ for writing: $!\n" );
    my $line = <MTP>;
    carp( "Input does not seem to be in Minitab Portable Format\n" )
	unless ( $line =~ /^Minitab Portable Worksheet/ );
    print R "# R data file automatically created by mtp2R\n";
    s/\.R$//;
    print R "\"$_\" <- list(\n";
    my $initial = 1;
    while (1) {
	last unless ( $line = <MTP> );
	carp( "Incorrect format\n" ) unless ( $line =~ /^%/ );
	my ($pct, $colmat, $number, $length, $NAs, $name) =
	    split(' ', $line );
	next if ( 100 <= $colmat && $colmat <= 102 );
	print R ",\n" unless $initial;
	$initial = 0;
	$name = "C" . $number if ( $name =~ /^\.$/ );
	print R "$name = c(\n";
	my $width = 16;
	$width = -$NAs + 1 if ( $NAs < 0 );
	while ( $length > 0 ) {
	    $line = <MTP>;
	    chomp $line;
	    chop $line if ($line =~ /\r$/); # Generated on DOS/Windows
	    chop $line if ($line =~ /\.$/);
	    while ( length( $line ) >= $width && $length) {
		my $value = substr( $line, 0, $width );
		$line = substr( $line, $width );
		$value =~ s/^\s+//;
		$value =~ s/\s+$//;
		if ( $NAs < 0 ) { print R "\"$value\""; } else { print R 0+$value; }
		$length--;
		print R ", " if $length;
	    }
	    print R "\n";
	}
	print R ")";
    }
    print R ")\n";
    close ( MTP );
    close ( R );
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Jan 16 15:42:08 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 16 Jan 1998 16:42:08 +0100
Subject: debugging dynamically loaded code
In-Reply-To: <6rbtxdwzwx.fsf@franz.stat.wisc.edu>
References: <199801151113.MAA01121@galadriel.ci.tuwien.ac.at>
 <6rbtxdwzwx.fsf@franz.stat.wisc.edu>
Message-ID: <199801161542.QAA28822@galadriel.ci.tuwien.ac.at>

>>>>> On 15 Jan 1998 08:54:38 -0600,
>>>>> Douglas Bates (DB) wrote:

DB> The secret of symbolic debugging of dynamically loaded code is to
DB>  - Call the debugger on the R executable.  Since I do this within
DB>    emacs, I don't use the "R gdb" facility, I symbolically link the
DB>    R.binary file into the directory with my code and call the debugger 
DB>    through M-x gdb.
DB>  - Set the environment variables that the $RHOME/bin/R script would.
DB>  - Start the R program.
DB>  - At the R prompt, use dyn.load() to load your library.
DB>  - Send an interrupt signal.  Inside of gud mode in emacs, I think you 
DB>    send C-C C-C.  This will put you back to the debugger prompt.
DB>  - Set the breakpoints in your code.
DB>  - Continue execution of R by typing "signal 0<ret>".

Thanks a lot ... I did not know about the interrupt signal before
inserting a breakpoint etc.

Best,
Fritz

PS: Thanks also for the S_compat stuff ... now I've got a first
version of [mpf]da up and running ... now it's only the buggy
model.matrix code that troubles me ... but that's a different story!

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 16 15:57:31 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 16 Jan 1998 16:57:31 +0100
Subject: ESS-mode and X-emacs problem  "-noreadline" solution
In-Reply-To: <6r7m80pime.fsf@franz.stat.wisc.edu> (message from Douglas Bates
 on 16 Jan 1998 09:02:17 -0600)
Message-ID: <199801161557.QAA23573@sophie.ethz.ch>


ESS-5.0  does not yet contain the "-noreadline" flag.

ESS-5.0 came out only very shortly after R 0.60,
if "-noreadline" would have been builtin, no R version < 0.60
would have worked....

Here is the patch --- apply it if you are willing to only use  
R versions >= 0.60 (with ESS):

Excuse that I didn't give this answer earlier...

---------------
Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/



--- essd-r.el.~1~	Mon Nov 24 18:26:40 1997
+++ essd-r.el	Fri Dec  5 09:21:17 1997
@@ -92,9 +92,10 @@
    (format "(R): current-prefix-arg=%s \n"
 	   current-prefix-arg))
 
-  (let ((r-start-args  (if start-args (read-string "Starting Args ? ") nil)))
-    (if (not start-args) (inferior-ess)
-      (inferior-ess r-start-args))))
+  (let ((r-start-args  (concat "-noreadline "
+	 (if start-args (read-string
+			 "Starting Args [other than `-noreadline'] ? ") nil))))
+      (inferior-ess r-start-args)))
 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jan 16 16:46:46 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 16 Jan 1998 16:46:46 -0000 ()
Subject: Packages for RedHat 4.2, Debian 1.3
Message-ID: <XFMail.980116174438.plummer@iarc.fr>

On 16-Jan-98 bates@stat.wisc.edu wrote:
>Goran Brostrom <gb@stat.umu.se> writes:
>> I tried it on my newly installed RH 4.2 system (as root):
>> 
>> # rpm -i r-base-.....rpm
>> failed dependencies:
>>      /usr/bin/perl is needed by r-....
>>      /bin/sh  is needed by r-....
>>      /bin/sh     is needed by r-...
>> 
>> I have those guys, and I was running sh. I guess that I don't know enough
>> about RedHat and rpms (I know nothing...). What is the correct way to=20
>> do the installation?

There are two kinds of dependencies:
1) Libraries against which the executable files in a package are linked
2) Programs required by scripts in the package

The version of rpm which ships with RedHat 4.2 (version 2.3) expects
only the first kind of dependency. It can't interpret the entries
/bin/sh ... etc in the dependency list. 

Version 2.4 of rpm _does_ expect both kinds of dependencies, so
one way round this problem is to install the latest version of rpm.
This is available in the directory /redhat-4.2/updates/i386 on
RedHat's ftp site. (Don't pick up the one in the redhat-5.0 directory
as this is linked against libc6 which you don't have). This isn't
a very good solution, but it is a solution. Ultimately you might find it
easier to do the unzip/untar/configure/make procedure.

>My problem in making these packages is that I generate them under
>Debian GNU/Linux as .deb packages then use an automatic transformation
>program to create the RedHat Linux .rpm packages.  Since I don't use
>rpm for installation myself it is difficult for me to test them.  I
>know what the Debian package installer does when it checks
>dependencies but I don't know where rpm looks to satisfy dependencies.

This one is more of a backward compatibility problem. IMHO supporting
old releases of Linux distributions is too difficult. This position may
seem a bit extreme, but Linux evolves in "internet time".

>Maybe we can try a bit more with installation of the RedHat packages
>and if people are still encountering problems like this then we'll
>punt and ask others to build the .rpm packages on RedHat systems.

I remain at your disposal.
Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 16 18:12:32 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 16 Jan 1998 19:12:32 +0100
Subject: data.frame(...) not constructing "1:n" row.names [diff.  S <--> R]
Message-ID: <199801161812.TAA09746@sophie.ethz.ch>

	[I think Doug Bates has already alluded to this, somewhere..]

In R, 	data.frame( ... )

does not construct row.names whereas in S, it does:

R:

> data.frame(x=1:2,y=3:4)
     x y
[1,] 1 3
[2,] 2 4
> row.names(data.frame(x=1:2,y=3:4))
NULL


S-plus:

> data.frame(x=1:2,y=3:4)
  x y 
1 1 3
2 2 4
> row.names(data.frame(x=1:2,y=3:4))
[1] "1" "2"

---------------------------------------------------------------------------

R core: Is there a good reason for this?

Well (as a member of R-core, I give my answer):

	Memory efficiency can be a good reason, actually...
	together with ``cleanness'' :  
		``1:n'' are the IMPLICIT DEFAULT row.names

We could stay at the current way `internally',
but make sure that all functions working on data.frames `d.f'
automatically work as if

	 row.names(d.f)   *was indeed* ==  paste(1:nrow(d.f)

Some of them maybe even are, (lm, glm, and their methods  ??)
but not 'print.data.frame' (a <primitive>)
nor  row.names(.) or dimnames(.) (also <primitive>).
(and if dimnames is fixed, rownames(.) [the one without "."] will also work].

It may well be that it is sufficient to upgrade

	print.data.frame
	dimnames
and	row.names  (which is trivial to fix).

On the other hand,

	attr(d.f, "row.names")    [yet another <primitive> !]

would also have to be fixed for `complete' S compatibility
which is less "clean".


Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 16 18:34:20 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jan 1998 19:34:20 +0100
Subject: data.frame(...) not constructing "1:n" row.names [diff.  S <--> R]
In-Reply-To: Martin Maechler's message of Fri, 16 Jan 1998 19:12:32 +0100
References: <199801161812.TAA09746@sophie.ethz.ch>
Message-ID: <x2lnwgcloz.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> 
> 	[I think Doug Bates has already alluded to this, somewhere..]
> 
> In R, 	data.frame( ... )
> 
> does not construct row.names whereas in S, it does:
...
> R core: Is there a good reason for this?

No.
 
> Well (as a member of R-core, I give my answer):
> 
> 	Memory efficiency can be a good reason, actually...
> 	together with ``cleanness'' :  
> 		``1:n'' are the IMPLICIT DEFAULT row.names
> 
> We could stay at the current way `internally',
> but make sure that all functions working on data.frames `d.f'
> automatically work as if
> 
> 	 row.names(d.f)   *was indeed* ==  paste(1:nrow(d.f)

Ugh. Please, let's avoid implicit stuff. All the special-casing
involved all over the place would soon outweigh the saved storage of a
character vector. We'll get nothing but trouble from it. Just add the
rownames. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jan 16 20:29:04 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 16 Jan 1998 21:29:04 +0100
Subject: data.frame(...) not constructing "1:n" row.names [diff.  S <--> R]
In-Reply-To: <x2lnwgcloz.fsf@blueberry.kubism.ku.dk>
References: <199801161812.TAA09746@sophie.ethz.ch>
 <x2lnwgcloz.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801162029.VAA17133@pc25.none>

>>>>> Peter Dalgaard BSA writes:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
>> 
>> [I think Doug Bates has already alluded to this, somewhere..]

And I did, too ...

>> 
>> In R, 	data.frame( ... )
>> 
>> does not construct row.names whereas in S, it does:
> ...
>> R core: Is there a good reason for this?

> No.
 
>> Well (as a member of R-core, I give my answer):
>> 
>> Memory efficiency can be a good reason, actually...
>> together with ``cleanness'' :  
>> ``1:n'' are the IMPLICIT DEFAULT row.names
>> 
>> We could stay at the current way `internally',
>> but make sure that all functions working on data.frames `d.f'
>> automatically work as if
>> 
>> row.names(d.f)   *was indeed* ==  paste(1:nrow(d.f)

> Ugh. Please, let's avoid implicit stuff. All the special-casing
> involved all over the place would soon outweigh the saved storage of a
> character vector. We'll get nothing but trouble from it. Just add the
> rownames. 

Yes.  Does R- simply add a default 1:n for the row names if there are
none?  Then we should do the same.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Fri Jan 16 21:00:24 1998
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Fri, 16 Jan 1998 13:00:24 -0800 (PST)
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: <XFMail.980116174438.plummer@iarc.fr>
Message-ID: <Pine.LNX.3.96.980116125848.471A-100000@gemini.biostat.washington.edu>


> >My problem in making these packages is that I generate them under
> >Debian GNU/Linux as .deb packages then use an automatic transformation
> >program to create the RedHat Linux .rpm packages.  Since I don't use
> >rpm for installation myself it is difficult for me to test them.  I

I've just purchased a new system that came with RedHat 5.0, and would be
glad to test RPM's.  Just send them to me...


-------------------------------------------------------------------------------
    Gregory R. Warnes          | It is high time that the ideal of success
warnes@biostat.washington.edu  |  be replaced by the ideal of service.
                               |                       Albert Einstein
-------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Fri Jan 16 22:09:59 1998
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Fri, 16 Jan 1998 14:09:59 -0800 (PST)
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: <Pine.LNX.3.96.980116125848.471A-100000@gemini.biostat.washington.edu>
Message-ID: <Pine.LNX.3.96.980116135528.471D-100000@gemini.biostat.washington.edu>


RedHat 5.0 comes with libreadline.so.3.  R-base depends on
libreadline.so.2.  There seem to be no other unresolved dependencies, so
I'm looking to find a copy of libreadlin.so.2...

On Fri, 16 Jan 1998, Gregory R. Warnes wrote:

> 
> > >My problem in making these packages is that I generate them under
> > >Debian GNU/Linux as .deb packages then use an automatic transformation
> > >program to create the RedHat Linux .rpm packages.  Since I don't use
> > >rpm for installation myself it is difficult for me to test them.  I
> 
> I've just purchased a new system that came with RedHat 5.0, and would be
> glad to test RPM's.  Just send them to me...
> 
> 
> -------------------------------------------------------------------------------
>     Gregory R. Warnes          | It is high time that the ideal of success
> warnes@biostat.washington.edu  |  be replaced by the ideal of service.
>                                |                       Albert Einstein
> -------------------------------------------------------------------------------
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-------------------------------------------------------------------------------
    Gregory R. Warnes          | It is high time that the ideal of success
warnes@biostat.washington.edu  |  be replaced by the ideal of service.
                               |                       Albert Einstein
-------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 16 23:04:25 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1998 00:04:25 +0100
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: "Gregory R. Warnes"'s message of Fri, 16 Jan 1998 14:09:59 -0800 (PST)
References: <Pine.LNX.3.96.980116135528.471D-100000@gemini.biostat.washington.edu>
Message-ID: <x2d8hsdnra.fsf@blueberry.kubism.ku.dk>

"Gregory R. Warnes" <warnes@biostat.washington.edu> writes:

> RedHat 5.0 comes with libreadline.so.3.  R-base depends on
> libreadline.so.2.  There seem to be no other unresolved dependencies, so
> I'm looking to find a copy of libreadlin.so.2...

It *should* work if you make a symlink from libreadline.so.2.1 to
libreadline.so.3 and rerun ldconfig.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 23:12:24 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jan 1998 17:12:24 -0600
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: Peter Dalgaard BSA's message of 17 Jan 1998 00:04:25 +0100
References: <Pine.LNX.3.96.980116135528.471D-100000@gemini.biostat.washington.edu> <x2d8hsdnra.fsf@blueberry.kubism.ku.dk>
Message-ID: <6r1zy8nhd3.fsf@franz.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> "Gregory R. Warnes" <warnes@biostat.washington.edu> writes:
> 
> > RedHat 5.0 comes with libreadline.so.3.  R-base depends on
> > libreadline.so.2.  There seem to be no other unresolved dependencies, so
> > I'm looking to find a copy of libreadlin.so.2...
> 
> It *should* work if you make a symlink from libreadline.so.2.1 to
> libreadline.so.3 and rerun ldconfig.

It may work but it may not.  Gregory is referring to installing the
r-base_0.61.1-2_i386.rpm file from the bin/i386-linux/RedHat-4.2/
directory, not the one from the RedHat-5.0 directory.  The one he is
trying to install was linked against libreadline.so.2.0 not
libreadline.so.2.1.

According to some discussions that we saw a while back, Debian's
libreadline.so.2.1 is supposedly upwardly compatible with
libreadline.so.2.0.  The libreadline.so.3.0 in RedHat 5.0 is the same
as Debian's libreadline.so.2.1 but the two maintainers can't agree on
a number.  (I think that's the way it works.  It got a bit confusing
for a while there.)

Anyway, if you do get it to install I would definitely try it out with
 R -noreadline
initially.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 16 23:29:14 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1998 00:29:14 +0100
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: Douglas Bates's message of 16 Jan 1998 17:12:24 -0600
References: <Pine.LNX.3.96.980116135528.471D-100000@gemini.biostat.washington.edu>
 <x2d8hsdnra.fsf@blueberry.kubism.ku.dk>
 <6r1zy8nhd3.fsf@franz.stat.wisc.edu>
Message-ID: <x2btxcdmlx.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> 
> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
> 
> > "Gregory R. Warnes" <warnes@biostat.washington.edu> writes:
> > 
> > > RedHat 5.0 comes with libreadline.so.3.  R-base depends on
> > > libreadline.so.2.  There seem to be no other unresolved dependencies, so
> > > I'm looking to find a copy of libreadlin.so.2...
> > 
> > It *should* work if you make a symlink from libreadline.so.2.1 to
> > libreadline.so.3 and rerun ldconfig.
> 
> It may work but it may not.  Gregory is referring to installing the
> r-base_0.61.1-2_i386.rpm file from the bin/i386-linux/RedHat-4.2/
> directory, not the one from the RedHat-5.0 directory.  The one he is
> trying to install was linked against libreadline.so.2.0 not
> libreadline.so.2.1.

Oh. I missed that. I suspect that readline is the least of his worries
in that case, though. All sorts of "fun" are liable to arise when you
run a program that was (e.g.) linked with libc5 and X libs on a system
where libc5 is still there, but the X libs are now linked against
libc6. Still, it *might* work...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.Princeton.EDU  Fri Jan 16 23:35:28 1998
From: ben@eno.Princeton.EDU (Ben Bolker)
Date: Fri, 16 Jan 1998 18:35:28 -0500 (EST)
Subject: matplot
Message-ID: <Pine.SUN.3.95.980116183449.18756B-100000@paca>


   matplot doesn't seem to pass through options like lwd, cex, etc.
quite the way I'd like.  I've thought of two ways to fix this, I don't
know which is better.

  The first is to treat lwd, cex, etc., exactly like the other options
(col, lty ...) --  (these diffs are long, skip down two pages if you want
to see the other way)

*** matplot.orig	Tue Jan 13 18:17:54 1998
--- matplot.new2	Tue Jan 13 18:16:49 1998
***************
*** 1,12 ****
  ###---- As S  (just 'better' ...)
  
! matpoints <- function(x, y, lty=1:5, pch=NULL, col=1:6, ...)
  	matplot(x=x, y=y, type = 'p', lty=lty, pch=pch, col=col, add=TRUE, ...)
! matlines  <- function(x, y, lty=1:5, pch=NULL, col=1:6, ...)
  	matplot(x=x, y=y, type = 'l', lty=lty, pch=pch, col=col, add=TRUE, ...)
  
  matplot <- function(x, y, type="p",
! 		    lty=1:5, pch=NULL, col=1:6,
  		    xlab=NULL, ylab=NULL, xlim=NULL, ylim=NULL,
  		    ..., add= FALSE, verbose = FALSE)
  {
--- 1,12 ----
  ###---- As S  (just 'better' ...)
  
! matpoints <- function(x, y, lty=1:5, pch=NULL, col=1:6, cex=1, ...)
  	matplot(x=x, y=y, type = 'p', lty=lty, pch=pch, col=col, add=TRUE, ...)
! matlines  <- function(x, y, lty=1:5, pch=NULL, col=1:6, lwd=1, ...)
  	matplot(x=x, y=y, type = 'l', lty=lty, pch=pch, col=col, add=TRUE, ...)
  
  matplot <- function(x, y, type="p",
! 		    lty=1:5, pch=NULL, col=1:6, cex=1, lwd=1,
  		    xlab=NULL, ylab=NULL, xlim=NULL, ylim=NULL,
  		    ..., add= FALSE, verbose = FALSE)
  {
***************
*** 61,66 ****
--- 61,68 ----
  	if(length(lty) < k) lty <- rep(lty, length= k)
  	if(length(pch) < k) pch <- rep(pch, length= k)
  	if(length(col) < k) col <- rep(col, length= k)
+ 	if(length(cex) < k) cex <- rep(col, length= k)
+ 	if(length(lwd) < k) lwd <- rep(col, length= k)
  	ii <- 1:k
  	if(!add) {
  		ii <- ii[-1]
***************
*** 71,78 ****
  	for (i in ii) {
  		tp <- type[i]
  		if(tp=='l' || tp=='b'|| tp=='o'|| tp=='h')
! 		  lines(x[,i],y[,i], type=tp, lty=lty[i],pch=pch[i],col=col[i])
  		if(do.points && tp=='p')
! 		  points(x[,i],y[,i], pch=pch[i], col=col[i])
  	}
  }
--- 73,82 ----
  	for (i in ii) {
  		tp <- type[i]
  		if(tp=='l' || tp=='b'|| tp=='o'|| tp=='h')
! 		  lines(x[,i],y[,i], type=tp, lty=lty[i],pch=pch[i],col=col[i],
! 	                  lwd=lwd[i])
  		if(do.points && tp=='p')
! 		  points(x[,i],y[,i], pch=pch[i], col=col[i],
! 	                  cex=cex[i])
  	}
  }


  The second is to pass extra options through ... -- I don't know if this
breaks anything, it doesn't seem to for me (and it may be more general).

*** matplot.orig	Tue Jan 13 18:17:54 1998
--- matplot.new	Tue Jan 13 18:06:48 1998
***************
*** 71,78 ****
  	for (i in ii) {
  		tp <- type[i]
  		if(tp=='l' || tp=='b'|| tp=='o'|| tp=='h')
! 		  lines(x[,i],y[,i], type=tp, lty=lty[i],pch=pch[i],col=col[i])
  		if(do.points && tp=='p')
! 		  points(x[,i],y[,i], pch=pch[i], col=col[i])
  	}
  }
--- 71,79 ----
  	for (i in ii) {
  		tp <- type[i]
  		if(tp=='l' || tp=='b'|| tp=='o'|| tp=='h')
! 		  lines(x[,i],y[,i], type=tp, lty=lty[i],pch=pch[i],col=col[i],
!                         ...)
  		if(do.points && tp=='p')
! 		  points(x[,i],y[,i], pch=pch[i], col=col[i], ...)
  	}
  }

Benjamin Bolker          Dep't of Ecology and Evolutionary Biology,
ben@eno.princeton.edu    Princeton University
tel: (609) 258-6886,     fax: (609) 258-1334


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Sat Jan 17 00:15:57 1998
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Fri, 16 Jan 1998 16:15:57 -0800 (PST)
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: <x2btxcdmlx.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.3.96.980116155506.1985B-100000@gemini.warnes.org>





Various individuals wrote:

> > It may work but it may not.  Gregory is referring to installing the
> > r-base_0.61.1-2_i386.rpm file from the bin/i386-linux/RedHat-4.2/
> > directory, not the one from the RedHat-5.0 directory.  The one he is
> > trying to install was linked against libreadline.so.2.0 not
> > libreadline.so.2.1.
> 
> Oh. I missed that. I suspect that readline is the least of his worries
> in that case, though. All sorts of "fun" are liable to arise when you
> run a program that was (e.g.) linked with libc5 and X libs on a system
> where libc5 is still there, but the X libs are now linked against
> libc6. Still, it *might* work...
> 

Okay, okay.  I didn't notice that there was a RedHat5 directory, so I
downloaded the 4.2 rpms just to see.  No, they don't work, even if I get
the correct readline.  I've now downloaded the correct RPM from the RedHat
5 directory.  

The RPM for RedHat5 wants libncurses.so.3.4.  Hmm, I've got
libncurses-3.0.  Lets try.. 

# cd /usr/lib
# ln -s libncurses.so.3.0 libncurses.so.3.4

seems to make it run OK.

Now

# rpm -i --nodeps r-base-0.61.1-2.i386.rpm 
group src does not exist - using root


R seems to work now.  The packages I downloaded from RedHat4.2, don't seem
to work.  At least, 

> library(survival4)
Error in dyn.load(file) : unable to load shared library
"/usr/lib/R/library/survival4/libs/survival4.so"

The file is there and is readable, so I expect that the libc5 libc6
difference is the problem...

-Greg

-------------------------------------------------------------------------------
    Gregory R. Warnes          | It is high time that the ideal of success
warnes@biostat.washington.edu  |  be replaced by the ideal of service.
                               |                       Albert Einstein
-------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jan 17 19:26:01 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1998 20:26:01 +0100
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: "Gregory R. Warnes"'s message of Fri, 16 Jan 1998 16:15:57 -0800 (PST)
References: <Pine.LNX.3.96.980116155506.1985B-100000@gemini.warnes.org>
Message-ID: <x2pvlqc37a.fsf@blueberry.kubism.ku.dk>

"Gregory R. Warnes" <warnes@biostat.washington.edu> writes:

> Various individuals wrote:
> 
> > > It may work but it may not.  Gregory is referring to installing the
> > > r-base_0.61.1-2_i386.rpm file from the bin/i386-linux/RedHat-4.2/
> > > directory, not the one from the RedHat-5.0 directory.  The one he is
> > > trying to install was linked against libreadline.so.2.0 not
> > > libreadline.so.2.1.
> > 
> > Oh. I missed that. I suspect that readline is the least of his worries
> > in that case, though. All sorts of "fun" are liable to arise when you
> > run a program that was (e.g.) linked with libc5 and X libs on a system
> > where libc5 is still there, but the X libs are now linked against
> > libc6. Still, it *might* work...
> > 
> 
> Okay, okay.  I didn't notice that there was a RedHat5 directory, so I
> downloaded the 4.2 rpms just to see.  No, they don't work, even if I get
> the correct readline.  I've now downloaded the correct RPM from the RedHat
> 5 directory.  

And the symlink libreadline.so.2.1->3.0 doesn't work either. I just
tried it and ldconfig is too smart to go by the filename alone, it
looks inside the file, which has the 3.0 signature, and ignores it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 20 08:37:53 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 20 Jan 1998 09:37:53 +0100
Subject: as.numeric(<factor>) [Difference R/S]
In-Reply-To: <199801200734.IAA32737@pc25.none> (message from Kurt Hornik on
 Tue, 20 Jan 1998 08:34:59 +0100)
Message-ID: <199801200837.JAA06241@sophie.ethz.ch>

>From  R-core;  this should interest most R-devel'ers (to some extent):

Since 0.60,  the semantics of   as.numeric(<factor>)  has changed,
e.g.

R> as.integer(factor(c("A","BB")))
[1] NA NA
R> as.integer(factor(c(100,40,100)))
[1] 100  40 100

whereas older R and S:

S> as.integer(factor(c("A","BB")))
[1] 1 2
S> as.integer(factor(c(100,40,100)))
[1] 2 1 2


-------------------------------------
as explained by Ross, below :

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Ross Ihaka writes:
    KH>> From hornik@ci.tuwien.ac.at Mon Jan 19 22:52 NZD 1998 Subject:
    KH>> Difference R/S
    KH>> 
    KH>> Andreas just pointed me to the following:
    KH>> 
    KH>> v <- as.factor(c("Age","Number","Age")) as.numeric(v)
    KH>> 
    KH>> gives
    KH>> 
    KH>> [1] 1 2 1
    KH>> 
    KH>> in S+ and
    KH>> 
    KH>> [1] NA NA NA
    KH>> 
    KH>> Bug/feature/intentional?
    KH>> 
    KH>> Of course, R makes more sense because as.numeric("Age") gives NA in
    KH>> both R and S+ ...
    KH>> 
    KH>> Or, should we have as.numeric() return the codes on a non-numeric
    KH>> factor?

    Ross> At present R (implicitly) computes as.numeric(x) for x a factor as

    Ross> 	as.numeric(as.character(x))

    Ross> and S computes

    Ross> 	codes(x)

    Ross> I mistakenly thought that S does what I have implemented for R.
    Ross> Thomas first objected to the difference and then said he quite liked
    Ross> it.

    Ross> I quite like the present semantics, but it is easy to change if
    Ross> others have different preferences.

    KH> I personally think that the current R approach makes more sense,
    KH> too.  If we all agree on it, I would like to add the difference to
    KH> the FAQ, so that it is (well) documented.

Hmm,  I first had advocated your view above, myself.

Later, I started to discover in how much S-code
	as.numeric(ff) 
is just used to extract the factor codes (in {1:M})  from a factor.

This lead me (and Peter Dalgaard, I think) to the conclusion that
- yes, the present R behavior maybe ``cleaner'' than S's
- no, it is a pain to keep it, because it breaks S code too often.

However, as you see, we haven't agreed yet on the topic.
I think we should agree ASAP, since it involves code in several places
(outside R base).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 20 10:44:51 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jan 1998 11:44:51 +0100
Subject: as.numeric(<factor>) [Difference R/S]
In-Reply-To: Martin Maechler's message of Tue, 20 Jan 1998 09:37:53 +0100
References: <199801200837.JAA06241@sophie.ethz.ch>
Message-ID: <x2n2gr77bv.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> 
> From  R-core;  this should interest most R-devel'ers (to some extent):
> 
> Since 0.60,  the semantics of   as.numeric(<factor>)  has changed,
> e.g.
> 
> R> as.integer(factor(c("A","BB")))
> [1] NA NA
> R> as.integer(factor(c(100,40,100)))
> [1] 100  40 100
> 
> whereas older R and S:
> 
> S> as.integer(factor(c("A","BB")))
> [1] 1 2
> S> as.integer(factor(c(100,40,100)))
> [1] 2 1 2
> 
...
> 
> Hmm,  I first had advocated your view above, myself.
> 
> Later, I started to discover in how much S-code
> 	as.numeric(ff) 
> is just used to extract the factor codes (in {1:M})  from a factor.
> 
> This lead me (and Peter Dalgaard, I think) to the conclusion that
> - yes, the present R behavior maybe ``cleaner'' than S's
> - no, it is a pain to keep it, because it breaks S code too often.
> 
> However, as you see, we haven't agreed yet on the topic.
> I think we should agree ASAP, since it involves code in several places
> (outside R base).

Actually, I'm even stronger in favour of the S semantics. In addition
to the above

	- you can always get current behaviour with
        as.numeric(as.character(f)) or as.numeric(levels(f))[f]

	- one should avoid generating NA's unless absolutely necessary

	- when a factor is used for subscripting, you mean the codes,
        not the levels. Currently, we have

> (1:5)[factor(1:5,labels=5:1)]
[1] 1 2 3 4 5

but

> as.numeric(factor(1:5,labels=5:1))
[1] 5 4 3 2 1

	I.e. *sometimes* when a factor is coerced to numeric you get
	something different. (And if you change the index semantics,
	code for trend tests and the like is likely to break!). 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan 20 15:02:56 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 20 Jan 1998 09:02:56 -0600
Subject: prlab
In-Reply-To: Andreas Weingessel's message of Tue, 20 Jan 1998 10:42:37 +0100
References: <199801200942.KAA16633@elendil.ci.tuwien.ac.at>
Message-ID: <6rd8hn9oin.fsf@franz.stat.wisc.edu>

Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at> writes:

> When I tried to port the statlib-Pkg rpart to R, I came across the
> c-Function prlab which seems to be part of S+, but not of R.
> 
> Does anyone know what prlab does and how difficult it would be to
> emulate it in R?

Can you show us the context?  If I had to guess I would say it was a
routine to print labels but that's just a guess.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Tue Jan 20 15:17:00 1998
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas Weingessel)
Date: Tue, 20 Jan 1998 16:17:00 +0100
Subject: prlab
In-Reply-To: <6rd8hn9oin.fsf@franz.stat.wisc.edu>
References: <199801200942.KAA16633@elendil.ci.tuwien.ac.at>
 <6rd8hn9oin.fsf@franz.stat.wisc.edu>
Message-ID: <199801201517.QAA17174@elendil.ci.tuwien.ac.at>

>>>>> On 20 Jan 1998 09:02:56 -0600,
>>>>> Douglas Bates wrote:

> Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at> writes:
>> When I tried to port the statlib-Pkg rpart to R, I came across the
>> c-Function prlab which seems to be part of S+, but not of R.
>> 
>> Does anyone know what prlab does and how difficult it would be to
>> emulate it in R?

> Can you show us the context?  If I had to guess I would say it was a
> routine to print labels but that's just a guess.

That seems right, the function is called labels.rpart and seems to be
similar to the S-Fct labels.tree.

The call itself is

        pn <- .C("prlab",
                lab = character(2 * length(var)),
                as.character(splits[, 1]),
                as.character(splits[, 2]),
                as.character(unlist(xlevels)),
                as.integer(var2),             #with 0 denoting a leaf
                as.integer(temp),
                as.integer(length(var2)))

where (for the data I tried) var is a vector of factor objects, splits
is an nx2 matrix of strings, xlevels is NULL, var2 and temp are
numeric vectors.

Of course I can send the whole code, if someone is interested.

	Andreas
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 20 20:38:10 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 20 Jan 1998 15:38:10 -0500
Subject: .h files
Message-ID: <98Jan20.154626est.13453@mailgate.bank-banque-canada.ca>

I'm trying to set up R INSTALL for my padi package and the compile needs
    -I pkg/src-c
to find some .h files. (Perhaps I should be putting these in a different
location?)

Could someone please explain how I should pass this location to the compiler
used by R INSTALL from the Makefile in my pkg/src?

Thanks
Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 20 21:29:27 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jan 1998 22:29:27 +0100
Subject: .h files
In-Reply-To: Paul Gilbert's message of Tue, 20 Jan 1998 15:38:10 -0500
References: <98Jan20.154626est.13453@mailgate.bank-banque-canada.ca>
Message-ID: <x2d8hmvnpk.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I'm trying to set up R INSTALL for my padi package and the compile needs
>     -I pkg/src-c
> to find some .h files. (Perhaps I should be putting these in a different
> location?)
> 
> Could someone please explain how I should pass this location to the compiler
> used by R INSTALL from the Makefile in my pkg/src?

What goes wrong with putting the include files along with the sources
and using  #include "file.h"  ?


As for sticking extra options into the gcc command line, I suppose
something like CFLAGS+=-I pkg/src-c in the Makefile could do it, but
does it work with all make programs or just GNU make? Or spell out
$(CC) -c $< $(CFLAGS) -I pkg/src-c $(FFLAGS) ...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 21 08:14:24 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 21 Jan 1998 09:14:24 +0100
Subject: R (off-topic): How to make mail-archives searchable?
Message-ID: <199801210814.JAA07731@sophie.ethz.ch>

As you (hopefully) know, the mail archives of
 R-devel, R-help and R-announce
have been available via FTP from here, and now also from CRAN.

I had spent a little effort to enhance these monthly plain unix-mail
folders to be 'Emacs outlined'
	(i.e., emacs is put in outline-mode when you open one of these).
and you all are probably efficient users of grep, etc.

However, for average R users, a better user interface is desired:
Something like statlib's  search engine (on S-news)
IN ADDITION to these simple plain files, or one of the many other
CGI / HTML based archive searchers should be added.

On the other hand, we have not yet desired if CRAN servers really should be
(mis)usable via CGI running on them; then, of course, the alternative are
java `beans'.

Since I've never installed any of these, I'd like to get some advice
of more experienced people like you.

Since this is a slightly off-topic subject, you could reply only to me 
and I'd summarize to R-devel...
--
Martin Maechler <maechler@stat.math.ethz.ch>			<><
http://www.stat.math.ethz.ch/~maechler/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan 21 08:59:27 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 21 Jan 1998 09:59:27 +0100
Subject: as.numeric(<factor>) [Difference R/S]
In-Reply-To: <x2n2gr77bv.fsf@blueberry.kubism.ku.dk>
References: <199801200837.JAA06241@sophie.ethz.ch>
 <x2n2gr77bv.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801210859.JAA14222@pc25.none>

>>>>> Peter Dalgaard BSA writes:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
>> 
>> From  R-core;  this should interest most R-devel'ers (to some extent):
>> 
>> Since 0.60,  the semantics of   as.numeric(<factor>)  has changed,
>> e.g.
>> 
R> as.integer(factor(c("A","BB")))
>> [1] NA NA
R> as.integer(factor(c(100,40,100)))
>> [1] 100  40 100
>> 
>> whereas older R and S:
>> 
S> as.integer(factor(c("A","BB")))
>> [1] 1 2
S> as.integer(factor(c(100,40,100)))
>> [1] 2 1 2
>> 
> ...
>> 
>> Hmm,  I first had advocated your view above, myself.
>> 
>> Later, I started to discover in how much S-code
>> as.numeric(ff) 
>> is just used to extract the factor codes (in {1:M})  from a factor.
>> 
>> This lead me (and Peter Dalgaard, I think) to the conclusion that
>> - yes, the present R behavior maybe ``cleaner'' than S's
>> - no, it is a pain to keep it, because it breaks S code too often.
>> 
>> However, as you see, we haven't agreed yet on the topic.
>> I think we should agree ASAP, since it involves code in several places
>> (outside R base).

> Actually, I'm even stronger in favour of the S semantics. In addition
> to the above

> 	- you can always get current behaviour with
>         as.numeric(as.character(f)) or as.numeric(levels(f))[f]

> 	- one should avoid generating NA's unless absolutely necessary

Right :-)

> 	- when a factor is used for subscripting, you mean the codes,
>         not the levels. Currently, we have

>> (1:5)[factor(1:5,labels=5:1)]
> [1] 1 2 3 4 5

> but

>> as.numeric(factor(1:5,labels=5:1))
> [1] 5 4 3 2 1

> 	I.e. *sometimes* when a factor is coerced to numeric you get
> 	something different. (And if you change the index semantics,
> 	code for trend tests and the like is likely to break!).

But that is really a matter of how subscripting treats factors, and not
necessarily what coercion does.

As much as I am in favor of compatibility (remember I do a lot of
porting):

* Suppose f is a factor with numeric levels other than 1 to n.  Then
as.numeric(f) returning the codes rather than the levels is strange.

* You also cannot coerce a character vector to numeric without getting
NA's.

Btw:

	x <- factor(c(10, 5, 6, 7))

Then levels(x) gives the CHARACTER vector c("5", "6", "7", "10") [in
both R and S+], why that?

And:

R> codes(x)
[1] 4 1 2 3

S> codes(x)
[1] 1 2 3 4

???
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 21 10:39:59 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jan 1998 11:39:59 +0100
Subject: as.numeric(<factor>) [Difference R/S]
In-Reply-To: Kurt Hornik's message of Wed, 21 Jan 1998 09:59:27 +0100
References: <199801200837.JAA06241@sophie.ethz.ch>
 <x2n2gr77bv.fsf@blueberry.kubism.ku.dk>
 <199801210859.JAA14222@pc25.none>
Message-ID: <x2zpkqxg8v.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> But that is really a matter of how subscripting treats factors, and not
> necessarily what coercion does.

Well, the point was that one could say that there's an implicit
coercion involved in indexing. (Note BTW that in general
A[as.numeric(as.character(f))] != 
A[as.character(f)] !=
A[codes(f)] == A[f])

> As much as I am in favor of compatibility (remember I do a lot of
> porting):
> 
> * Suppose f is a factor with numeric levels other than 1 to n.  Then
> as.numeric(f) returning the codes rather than the levels is strange.

No, it's not. It may come as a surprise to some, but it might as well
be thought strange that the internal numeric codes are not available
via as.numeric. The levels are character strings that may or may not
happen to be convertible to numbers, so why should you expect that the
general procedure assumes that they are convertible?

> * You also cannot coerce a character vector to numeric without getting
> NA's.

This is true, but in that case, there's no obvious alternative.

> Btw:
> 
> 	x <- factor(c(10, 5, 6, 7))
> 
> Then levels(x) gives the CHARACTER vector c("5", "6", "7", "10") [in
> both R and S+], why that?

By definition, a factor is an integer vector of codes coupled with a
character vector of levels. Where's the problem? We could of course
introduce the possibility of having levels vectors of any type (and
take the pains arising from differences between factor(1:3) and
factor(1:3,labels=as.character(1:3)) ). 

> 
> And:
> 
> R> codes(x)
> [1] 4 1 2 3
> 
> S> codes(x)
> [1] 1 2 3 4
> 
> ???

Apparently R is defaulting levels=as.character(sort(unique(x)),
whereas S is doing levels=sort(as.character(unique(x))), so that 10
sorts alphabetically before 5,6,7...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 21 15:57:04 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jan 1998 10:57:04 -0500
Subject: .h files
References: <98Jan20.154626est.13453@mailgate.bank-banque-canada.ca>
 <x2d8hmvnpk.fsf@blueberry.kubism.ku.dk>
 <98Jan20.165835est.13445@mailgate.bank-banque-canada.ca> <x2afcqvl8l.fsf@blueberry.kubism.ku.dk>
Message-ID: <98Jan21.110542est.13455@mailgate.bank-banque-canada.ca>

PG>> gcc -g -fpic -I/home/res8/gilp/R-versions/R-0.61.1/include  -c  putpadi.c
PG>> putpadi.c:29: padi.h: No such file or directory
PG>> putpadi.c:34: padiutil.h: No such file or directory

PD>Hum. If line 29 really reads #include "padi.h" (not <padi.h>) and
PD>padi.h really is in the same directory as putpadi.c, then I don't
PD>understand a word of it...

Well, it is <padi.h> and not "padi.h" and changing this fixes this problem in
the sense that I copied the .h files to the local directory and with "" it no
longer matters if I append to -I.

However, the .h files really should not be in the local directory as they are
used by other programs and it is important that they all stay in sync, so I
really would prefer to append to CFLAGS. When I use CFLAGS += -I. in my Makefile
it is ignored, unless I edit R/etc/INSTALL  and change to CFLAGS+= thus:

(cd ${src}; make CC="gcc" CFLAGS+="-g -fpic -I${RHOME}/include"

But then the "-g -fpic -I${RHOME}/include" is ignored and only my setting is
used! This does not make sense to me and I would certainly appreciate any
suggestions.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 21 17:22:29 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jan 1998 12:22:29 -0500
Subject: alloc
Message-ID: <98Jan21.123109est.13455@mailgate.bank-banque-canada.ca>

I am trying to get our database interface (PADI) working with R. The code does
some memory allocation and for Splus there is an ifdef which controls whether
malloc or S_alloc is called. I did  nm R.binary | grep alloc to see if this was
supported and I find there are some choices:
[2490] |    446036|     272|FUNC |GLOB |0    |7      |R_alloc
[806] |    693956|     312|FUNC |LOCL |0    |7      |ReallocString
[807] |    693220|     736|FUNC |LOCL |0    |7      |ReallocVector
[3444] |    446308|     144|FUNC |GLOB |0    |7      |S_alloc
[2429] |    446452|     200|FUNC |GLOB |0    |7      |S_realloc
...
[2204] |   1445856|       0|FUNC |GLOB |0    |UNDEF  |calloc
[2595] |   1444644|       0|FUNC |GLOB |0    |UNDEF  |malloc
[3066] |   1444728|       0|FUNC |GLOB |0    |UNDEF  |realloc
...
Is there any advantage to calling R_alloc rather than S_alloc? I also see that
malloc is UNDEF. Now I'm not a C programmer, but I have a funny feeling that
this could lead to some problems?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jan 21 17:58:20 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 21 Jan 1998 11:58:20 -0600
Subject: alloc
In-Reply-To: Paul Gilbert's message of Wed, 21 Jan 1998 12:22:29 -0500
References: <98Jan21.123109est.13455@mailgate.bank-banque-canada.ca>
Message-ID: <6rn2gpr9oj.fsf@franz.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I am trying to get our database interface (PADI) working with R. The code does
> some memory allocation and for Splus there is an ifdef which controls whether
> malloc or S_alloc is called. I did  nm R.binary | grep alloc to see if this was
> supported and I find there are some choices:
> [2490] |    446036|     272|FUNC |GLOB |0    |7      |R_alloc
> [806] |    693956|     312|FUNC |LOCL |0    |7      |ReallocString
> [807] |    693220|     736|FUNC |LOCL |0    |7      |ReallocVector
> [3444] |    446308|     144|FUNC |GLOB |0    |7      |S_alloc
> [2429] |    446452|     200|FUNC |GLOB |0    |7      |S_realloc
> ...
> [2204] |   1445856|       0|FUNC |GLOB |0    |UNDEF  |calloc
> [2595] |   1444644|       0|FUNC |GLOB |0    |UNDEF  |malloc
> [3066] |   1444728|       0|FUNC |GLOB |0    |UNDEF  |realloc
> ...
> Is there any advantage to calling R_alloc rather than S_alloc? I also see that
> malloc is UNDEF. Now I'm not a C programmer, but I have a funny feeling that
> this could lead to some problems?

I can't answer the first question but the second one is not a problem.
The UNDEF here means that these symbols not defined in the R.binary
file.  They are defined in the libc.so shared object which will be
linked at run time.  This is the basic idea of shared libraries - all
the processes that running and use malloc, for example, use the same
copy of this function.  It is dynamically linked and shared between
the processes.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 21 20:47:50 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jan 1998 21:47:50 +0100
Subject: .h files
In-Reply-To: Paul Gilbert's message of Wed, 21 Jan 1998 10:57:04 -0500
References: <98Jan20.154626est.13453@mailgate.bank-banque-canada.ca>
 <x2d8hmvnpk.fsf@blueberry.kubism.ku.dk>
 <98Jan20.165835est.13445@mailgate.bank-banque-canada.ca>
 <x2afcqvl8l.fsf@blueberry.kubism.ku.dk>
 <98Jan21.110542est.13455@mailgate.bank-banque-canada.ca>
Message-ID: <x2n2gpsgeh.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> PG>> gcc -g -fpic -I/home/res8/gilp/R-versions/R-0.61.1/include  -c  putpadi.c
> PG>> putpadi.c:29: padi.h: No such file or directory
> PG>> putpadi.c:34: padiutil.h: No such file or directory
> 
> PD>Hum. If line 29 really reads #include "padi.h" (not <padi.h>) and
> PD>padi.h really is in the same directory as putpadi.c, then I don't
> PD>understand a word of it...
> 
> Well, it is <padi.h> and not "padi.h" and changing this fixes this problem in
> the sense that I copied the .h files to the local directory and with "" it no
> longer matters if I append to -I.
> 
> However, the .h files really should not be in the local directory as they are
> used by other programs and it is important that they all stay in sync, so I
> really would prefer to append to CFLAGS. 

There's always #include "../include/padi.h", etc. ...

When I use CFLAGS += -I. in my Makefile
> it is ignored, unless I edit R/etc/INSTALL  and change to CFLAGS+= thus:
> 
> (cd ${src}; make CC="gcc" CFLAGS+="-g -fpic -I${RHOME}/include"
> 
> But then the "-g -fpic -I${RHOME}/include" is ignored and only my setting is
> used! This does not make sense to me and I would certainly appreciate any
> suggestions.

You don't want to mess with etc/INSTALL anyway since it's different
between platforms and gets autogenerated by configure. You're right,
an explicit CFLAGS on the make command line overrides any assignment
inside the makefile. To wit:

$ cat Makefile
CFLAGS+=-I.
$ make x.o
cc -I.   -c x.c -o x.o
$ rm x.o
$ make x.o CFLAGS=-Ibip
cc -Ibip   -c x.c -o x.o

However, using += isn't any different here:

$ rm x.o
$ make x.o CFLAGS+=-Ibip
cc -Ibip   -c x.c -o x.o

Curiously, the override does not apply if one sets CFLAG as an
environment variable

$ rm x.o
$ CFLAGS=-Ibip make x.o             
cc -Ibip -I.   -c x.c -o x.o

I suppose we could just fix etc/INSTALL.in to use that technique.
Anyone have objections? On the other hand explicit relative paths in
#include "..." might be good enough already.
 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Jan 22 05:25:36 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 21 Jan 1998 21:25:36 -0800 (PST)
Subject: alloc
In-Reply-To: <98Jan21.123109est.13455@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.SOL.3.95.980121212409.1809A-100000@gorn>

On Wed, 21 Jan 1998, Paul Gilbert wrote:

> ...
> Is there any advantage to calling R_alloc rather than S_alloc? 

R_alloc does not zero the memory, and so is faster (if you don't want the
memory zeroed)


Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 22 08:35:05 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 22 Jan 1998 09:35:05 +0100
Subject: R feature request:  stop(..) should print its caller call
Message-ID: <199801220835.JAA09231@sophie.ethz.ch>

The following shows what I mean:

tst<-function(x)in.tst(x); in.tst<-function(y)stop(paste("y is",y)); tst(pi)

in R gives

--------------------
Error: y is 3.141593
--------------------

in S-plus gives

----------------------------------------
> > Error in in.tst(x): y is 3.14159265358979
Dumped    ^^^^^^^^^^^^
----------------------------------------

For locating bugs / problems in functions, it would be tremendously helpful
if R also printed the name of the function from which it is called
(actually the ``call(..)'' rather than just the function name).

Martin Maechler
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jan 22 10:07:45 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 22 Jan 1998 11:07:45 +0100
Subject: R feature request:  stop(..) should print its caller call
In-Reply-To: <199801220835.JAA09231@sophie.ethz.ch>
References: <199801220835.JAA09231@sophie.ethz.ch>
Message-ID: <199801221007.LAA21175@pc25.none>

>>>>> Martin Maechler writes:

> The following shows what I mean:
> tst<-function(x)in.tst(x); in.tst<-function(y)stop(paste("y is",y)); tst(pi)

> in R gives

> --------------------
> Error: y is 3.141593
> --------------------

> in S-plus gives

> ----------------------------------------
>> > Error in in.tst(x): y is 3.14159265358979
> Dumped    ^^^^^^^^^^^^
> ----------------------------------------

> For locating bugs / problems in functions, it would be tremendously
> helpful if R also printed the name of the function from which it is
> called (actually the ``call(..)'' rather than just the function name).

Martin,

I am not sure.  I find it more useful to call traceback() after an error
occurred to find out what really happened.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 22 11:02:36 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 22 Jan 1998 12:02:36 +0100
Subject: Re^2: R feature request:  stop(..) should print its caller call
In-Reply-To: <199801221007.LAA21175@pc25.none> (message from Kurt Hornik on
 Thu, 22 Jan 1998 11:07:45 +0100)
Message-ID: <199801221102.MAA09835@sophie.ethz.ch>


>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Martin Maechler writes:

    >> The following shows what I mean:
    >> tst<-function(x)in.tst(x); in.tst<-function(y)stop(paste("y is",y)); tst(pi)

    >> in R gives

    >> --------------------
    >> Error: y is 3.141593
    >> --------------------

    >> in S-plus gives

    >> ----------------------------------------
    >>> > Error in in.tst(x): y is 3.14159265358979
    >> Dumped    ^^^^^^^^^^^^
    >> ----------------------------------------

    >> For locating bugs / problems in functions, it would be tremendously
    >> helpful if R also printed the name of the function from which it is
    >> called (actually the ``call(..)'' rather than just the function name).

    KH> Martin,

    KH> I am not sure.  I find it more useful to call traceback() after an error
    KH> occurred to find out what really happened.

The existence of a good utility such as traceback() 
should not prevent  stop(..) from producing more informative output.

The reason I think this is really wanted:

Many S- and R- function  composers try to write functions which 
``behave'', i.e. produce reasonable error messages when they are called
with "bad" arguments.

If I (as a function composer) 
think on how to fill the "...." in a  stop(....),
I've always been assuming that stop() would prepend the call (i.e. at least
the calling function).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 23 03:42:27 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 22 Jan 1998 21:42:27 -0600
Subject: netscape to become freely redistributable
Message-ID: <6ryb07g8kc.fsf@verdi.stat.wisc.edu>

I presume by now that most everyone has heard that, starting later
this quarter with Netscape 5.0's developers' release, the Netscape
browser program and its source code will become freely
redistributable.  They didn't say it would be GPL'd (GNU Public
License) but they said their source code would be available in the
spirit of the GPL.

Initially it bothered me that the start.help() function in R tried to
find netscape on your system and started that to read the .html files.
I thought it might be better to rely on a freely available browser
like mosaic or chimera2 or arena.  Even lynx would have been an
alternative.  I find I still often use lynx for browsing when I
am on a a machine with 8 bit planes of color because I don't want a
bloated netscape eating up my color table.

In retrospect the decision to standardize on netscape and to use their
extensions to the HTML standards in the R documentation looks like a
good one.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Jan 23 04:17:00 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 23 Jan 1998 17:17:00 +1300 (NZDT)
Subject: netscape to become freely redistributable
In-Reply-To: <6ryb07g8kc.fsf@verdi.stat.wisc.edu>
References: <6ryb07g8kc.fsf@verdi.stat.wisc.edu>
Message-ID: <199801230417.RAA17067@stat1.stat.auckland.ac.nz>

Douglas Bates writes:
 > I presume by now that most everyone has heard that, starting later
 > this quarter with Netscape 5.0's developers' release, the Netscape
 > browser program and its source code will become freely
 > redistributable.  They didn't say it would be GPL'd (GNU Public
 > License) but they said their source code would be available in the
 > spirit of the GPL.
 > 
 > Initially it bothered me that the start.help() function in R tried to
 > find netscape on your system and started that to read the .html files.
 > I thought it might be better to rely on a freely available browser
 > like mosaic or chimera2 or arena.  Even lynx would have been an
 > alternative.  I find I still often use lynx for browsing when I
 > am on a a machine with 8 bit planes of color because I don't want a
 > bloated netscape eating up my color table.
 > 
 > In retrospect the decision to standardize on netscape and to use their
 > extensions to the HTML standards in the R documentation looks like a
 > good one.

Yowser!  This is very good news indeed.

However, I think we should stay away from anyone's HTML extensions.
On the Mac and under Windows, the other browser may be prefereble.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 23 08:43:14 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 23 Jan 1998 09:43:14 +0100
Subject: S-Plus graphs to LaTeX picture commands
In-Reply-To: <34C8144A.713B@caoba.entelnet.bo> (message from kjetil halvorsen
 on Thu, 22 Jan 1998 21:53:46 -0600)
Message-ID: <199801230843.JAA11083@sophie.ethz.ch>

Well, R   ( http://lib.stat.cmu.edu/R/CRAN/ )
has a pictex(..) driver.

>>>>> "kjetil" == kjetil halvorsen <kjetil@caoba.entelnet.bo> writes:

    kjetil> Is there any possibility to write code which ``translates''
    kjetil> from splus graphics to latex picture commands? Or somebody has
    kjetil> written something like that?

    kjetil> I did some of that for xlispstat, but cannot see how to do it
    kjetil> for splus.

R  further allows some `mathematical text'
(greek, sub- and super-scripts, fractions, sum and integrals, square roots)
in the plots for x11 and postscript. 

You can see two pages with some examples in PostScript
at
	ftp://ftp.stat.math.ethz.ch/R/All-Ex-plotmath.ps

Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 23 13:07:21 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 23 Jan 1998 14:07:21 +0100
Subject: non-standard HTML? [Re: netscape to become freely redistributable]
In-Reply-To: <6ryb07g8kc.fsf@verdi.stat.wisc.edu> (message from Douglas Bates
 on 22 Jan 1998 21:42:27 -0600)
Message-ID: <199801231307.OAA11280@sophie.ethz.ch>

>>>>> "DougB" == Douglas Bates <bates@stat.wisc.edu> writes:

    DougB> I presume by now that most everyone has heard that, starting
    DougB> later this quarter with Netscape 5.0's developers' release, the
    DougB> Netscape browser program and its source code will become freely
    DougB> redistributable.  They didn't say it would be GPL'd (GNU Public
    DougB> License) but they said their source code would be available in
    DougB> the spirit of the GPL.

I did not know this.  Thank you for the information.
I *do* like it!

    DougB> Initially it bothered me that the start.help() function in R
    DougB> tried to find netscape on your system and started that to read
    DougB> the .html files.  I thought it might be better to rely on a
    DougB> freely available browser like mosaic or chimera2 or arena.  Even
    DougB> lynx would have been an alternative.  I find I still often use
    DougB> lynx for browsing when I am on a a machine with 8 bit planes of
    DougB> color because I don't want a bloated netscape eating up my color
    DougB> table.
ok.
That's why we use  
	netscape -install 
which keeps its own colormap.

    DougB> In retrospect the decision to standardize on netscape and to use
    DougB> their extensions to the HTML standards in the R documentation
    DougB> looks like a good one.

That's the paragraph which made me respond:

---> Which Non-HTML 3.2  Netscape-HTML extensions are we still using?

I've once looked a little bit at it and thought I didn't see any,
at that time.

I very much agree with Ross (and Tony Rossini and ...) that we would not
want to use non-standard HTML.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plambert@ulg.ac.be  Fri Jan 23 13:53:10 1998
From: plambert@ulg.ac.be (Philippe Lambert)
Date: Fri, 23 Jan 1998 14:53:10 +0100
Subject: hist: rel.freqs
Message-ID: <34C8A0C6.11E8BEBE@ulg.ac.be>

In R0.61,

In hist(), should the line
  rel.freqs <- counts/(sum(x) * diff(breaks))
computing the relative frequencies or height of the rectangles 
in a histogram not be
  rel.freqs <- counts/(sum(counts) * diff(breaks))
instead, or do I misunderstand something?

Thanks,
 Philippe

-- 
--------------------------------------------------------
 Philippe Lambert                   Tel: (+32)-4-3663091
 Universite de Liege               Fax: (+32)-4-3662983
 Faculte d'Economie, de Gestion et de Sciences Sociales
 Sart-Tilman B31, B-4000 Liege
 Belgium                      email: plambert@ulg.ac.be
--------------------------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 23 15:15:16 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Jan 1998 16:15:16 +0100
Subject: hist: rel.freqs
In-Reply-To: Philippe Lambert's message of Fri, 23 Jan 1998 14:53:10 +0100
References: <34C8A0C6.11E8BEBE@ulg.ac.be>
Message-ID: <x2btx32pdn.fsf@blueberry.kubism.ku.dk>

Philippe Lambert <plambert@ulg.ac.be> writes:

> 
> In R0.61,
> 
> In hist(), should the line
>   rel.freqs <- counts/(sum(x) * diff(breaks))
> computing the relative frequencies or height of the rectangles 
> in a histogram not be
>   rel.freqs <- counts/(sum(counts) * diff(breaks))
> instead, or do I misunderstand something?

Oops. You're right. Total area should be 1, not mean(x). Current code
mus give funny results if the mean is negative...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 23 15:11:27 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 23 Jan 1998 09:11:27 -0600
Subject: non-standard HTML? [Re: netscape to become freely redistributable]
In-Reply-To: Martin Maechler's message of Fri, 23 Jan 1998 14:07:21 +0100
References: <199801231307.OAA11280@sophie.ethz.ch>
Message-ID: <6ru3avi5sw.fsf@verdi.stat.wisc.edu>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> >>>>> "DougB" == Douglas Bates <bates@stat.wisc.edu> writes:

>     DougB> In retrospect the decision to standardize on netscape and to use
>     DougB> their extensions to the HTML standards in the R documentation
>     DougB> looks like a good one.

> That's the paragraph which made me respond:

> ---> Which Non-HTML 3.2  Netscape-HTML extensions are we still using?
> 
> I've once looked a little bit at it and thought I didn't see any,
> at that time.
> 
> I very much agree with Ross (and Tony Rossini and ...) that we would not
> want to use non-standard HTML.

OK, I phrased that wrong.  I have found that I can't use lynx or
chimera or arena or w3 to view the initial page at
$RHOME/html/index.html because it uses tables.  I guess that is more
of a problem with the browsers than with the html files.

It appears that recent versions of lynx still cannot work with tables.
w3 as distributed with xemacs-20 will do tables but it is awkward
because of the fixed width fonts.  Chimera 2.0 seems to work on those
pages now as does chimera 1.7.  Arena displayed the pages but got a
little confused with the spacing of the tables.  Gzilla croaked on
startup so I don't know what it would do with them.

Overall if you need a freely available browser for the next few months 
it looks like chimera is the best bet.  From the ANNOUNCE file

 It is available for anonymous ftp at ftp.cs.unlv.edu in the
 directory /pub/chimera.  Check out the URL

 http://www.unlv.edu/chimera/

 for a partial list of mirrors and other information.

Chimera 2.0 is still in alpha test and appears to need a bit of work.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 23 15:55:10 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Jan 1998 16:55:10 +0100
Subject: non-standard HTML? [Re: netscape to become freely redistributable]
In-Reply-To: Douglas Bates's message of 23 Jan 1998 09:11:27 -0600
References: <199801231307.OAA11280@sophie.ethz.ch>
 <6ru3avi5sw.fsf@verdi.stat.wisc.edu>
Message-ID: <x2afcn2nj5.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> 
> OK, I phrased that wrong.  I have found that I can't use lynx or
> chimera or arena or w3 to view the initial page at
> $RHOME/html/index.html because it uses tables.  I guess that is more
> of a problem with the browsers than with the html files.
> 
> It appears that recent versions of lynx still cannot work with tables.

Huh? Lynx 2.7.1 seems OK here. The tabular layout is a bit -- hmm,
lacking, but it's usable enough:

                               The R Language
                   Tutorials Data Structures Control Flow
                            Data Entry Graphics
                            Data Analysis with R
          Basic Statistics Exploratory Data Analysis Linear Models

The only silliness is the remark "Only the bold entries are real",
because in Lynx, *all* entries with a link are bold.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 23 15:50:10 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 23 Jan 1998 16:50:10 +0100
Subject: hist: rel.freqs  --> pre-release version of hist(.)
In-Reply-To: <34C8A0C6.11E8BEBE@ulg.ac.be> (message from Philippe Lambert on
 Fri, 23 Jan 1998 14:53:10 +0100)
Message-ID: <199801231550.QAA11412@sophie.ethz.ch>

Dear Philippe,

you've reported a known bug, the fix of which hadn't made it into 0.61.1
because the fix included substantial enhancements
(and we decided that only small or important fixes should go into patches).

Following is the current (0.62 prerelease) version of

	RHOME/src/library/base/R/hist

[[BTW: If you dare to live on the bleeding edge,
	you can always pickup the current development source from
	  <CRAN>/src/devel/R-snapshot.tar.gz
]]

Martin

------------------------------------------------------------------

hist <- function(x, ...) UseMethod("hist")

hist.default <-
function (x, breaks, freq = NULL, probability = !freq, include.lowest = TRUE,
	col = NULL, border = par("fg"),
	main = paste("Histogram of" , deparse(substitute(x))),
	xlim = range(breaks), ylim = range(y, 0),
	xlab = deparse(substitute(x)), ylab,
	axes = TRUE, plot = TRUE, labels = FALSE, ...)
{
	if (!is.numeric(x))
		stop("hist: x must be numeric")
	eval(main)
	eval(xlab)
	n <- length(x <- x[!is.na(x)])
	use.br <- !missing(breaks) && length(breaks) > 1
	breaks <-
	  if(use.br) sort(breaks)
	  else {
		rx <- range(x)
		pretty (rx + c(0, diff(rx)/1000),
			n = if(missing(breaks)) 1 + log2(n)
			else { # breaks = `nclass'
				if (is.na(breaks) | breaks < 2)
				  stop("invalid number of breaks")
				breaks
			})
	  }
	nB <- length(breaks)
	counts <- .C("bincount",
		as.double(x),
		n,
		as.double(breaks),
		nB,
		counts = integer(nB - 1),
		include= as.logical(include.lowest),
		NAOK = FALSE) $counts
	if (any(counts < 0))
	  stop("negative `counts'. Internal Error in C-code for \"bincount\"")
	if (sum(counts) < n)
	  stop("some `x' not counted; maybe `breaks' do not span range of `x'")
	h <- diff(breaks)
	if (!use.br && any(h <= 0))
		stop("not strictly increasing `breaks'.")
	if (is.null(freq)) {
	  freq <- if(!missing(probability))
		!as.logical(probability)
	  else if(use.br) {
		##-- Do frequencies if breaks are evenly spaced
		max(h)-min(h) < 1e-7 * mean(h)
	  } else TRUE
	} else if(!missing(probability) && any(probability == freq))
	 stop("`probability is an alias for `!freq', however they differ.")
	intensities <- counts/(n*h)
	mids <- 0.5 * (breaks[-1] + breaks[-nB])
	y <- if (freq) counts else intensities
	if (plot) {
		plot.new()
		plot.window(xlim, ylim, "") #-> ylim's default from 'y'
          	if (missing(ylab))
                	ylab <- paste(if(!freq)"Relative ", "Frequency", sep="")
                if(freq && use.br && max(h)-min(h) > 1e-7 * mean(h))
                	warning("the AREAS in the plot are wrong -- maybe use `freq=F'")
		title(main = main, xlab = xlab, ylab = ylab, ...)
		if(axes) {
			axis(1, ...)
			axis(2, ...)
		}
		rect(breaks[-nB], 0, breaks[-1], y,
		     col = col, border = border)
		if(labels)
			text(mids, y,
			     labels = if(freq) counts else round(intensities,3),
			     adj = c(0.5, -0.5))
	}
	invisible(list(breaks = breaks, counts = counts,
		intensities = intensities, mids = mids))
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Jan 23 15:55:33 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 23 Jan 1998 16:55:33 +0100
Subject: non-standard HTML? [Re: netscape to become freely redistributable]
In-Reply-To: <x2afcn2nj5.fsf@blueberry.kubism.ku.dk>
References: <199801231307.OAA11280@sophie.ethz.ch>
 <6ru3avi5sw.fsf@verdi.stat.wisc.edu>
 <x2afcn2nj5.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801231555.QAA00544@galadriel.ci.tuwien.ac.at>

>>>>> On 23 Jan 1998 16:55:10 +0100,
>>>>> Peter Dalgaard BSA (PDB) wrote:

PDB> Douglas Bates <bates@stat.wisc.edu> writes:
>> 
>> OK, I phrased that wrong.  I have found that I can't use lynx or
>> chimera or arena or w3 to view the initial page at
>> $RHOME/html/index.html because it uses tables.  I guess that is more
>> of a problem with the browsers than with the html files.
>> 
>> It appears that recent versions of lynx still cannot work with tables.

PDB> Huh? Lynx 2.7.1 seems OK here. The tabular layout is a bit -- hmm,
PDB> lacking, but it's usable enough:

PDB>                                The R Language
PDB>                    Tutorials Data Structures Control Flow
PDB>                             Data Entry Graphics
PDB>                             Data Analysis with R
PDB>           Basic Statistics Exploratory Data Analysis Linear Models

PDB> The only silliness is the remark "Only the bold entries are real",
PDB> because in Lynx, *all* entries with a link are bold.

Funny that today everybody seems to be starting to discuss the html
pages ...

I am reworking all html pages this weekend (the necessary files are
already on a floppy and wait for me to go home) ... this includes the top
page. I will also change the layout of all functions pages etc.

But I definetely will use tables etc because I don't know how to
format some of the pages without. But I'm currently putting lynx 2.7.1
on a floppy, so I will try to make the pages look as goos as possible
under lynx (though this has low priuority for me as we have a
text-representation using nroff).

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 23 22:03:58 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 23 Jan 1998 16:03:58 -0600
Subject: Copyrights for R contributed libraries
In-Reply-To: Douglas Bates's message of 23 Jan 1998 15:58:48 -0600
References: <6riuran97r.fsf@verdi.stat.wisc.edu>
Message-ID: <6rhg6un8z5.fsf@verdi.stat.wisc.edu>

I have been packaging both R and the R contributed libraries for the
Debian GNU/Linux operating system.  Right now if anyone installs
Debian Linux on an Intel machine or a DEC Alpha they will have the
option of installing R as a regular part of the operating system.  I
think this is a good way of getting wider distribution of high quality
statistical software.  The Linux community is growing rapidly and is
one of the highlights of the free software effort.  I have heard from
several people who started using R because it was included with 
Debian Linux.
 
Since vendors are encouraged to make CD-ROM's from the entire
distribution, the Debian organization is very careful about copyrights 
for the code.  The base R language is covered by the GNU Public
License (GPL) but some of the contributed libraries have other
copyright statements.  As a result I have divided the libraries into
r-cran, the contributed libraries that are covered by a copyright that 
follows the Debian Free Software Guidelines (DFSG), r-cran-non-free,
the contributed libraries that do not seem to be DFSG-compliant, and
r-mlbench.  That mlbench library is split into its own package because 
it is large and not everyone wants to install it.

I have just been informed (see below) that the copyright statement I
made about the r-cran-non-free package is insufficient.  I have to
clarify the copyright status of every library included in this
package.  I'm a little pressed for time right now and may not be able
to do this by myself.  My only option then would be to withdraw the
package.  I think that would be a shame because the package contains
very useful libraries like the survival analysis library.

I believe Kurt and Fritz are going to start to ask for contributed
libraries to include a statement of copyright as part of the
submission to CRAN.  That would help me a lot.  Could anyone
converting a library or writing a new library please take care to
include a copyright statement?  If you are converting a library and
the copyright status of the original code seems murky, please try to
contact the original authors and get the copyright status cleared up.

If we could quickly establish a format for the copyright file for a
submitted library and contributors could update their libraries, that
again would help a lot.  I don't like making work for others but I
think there are great benefits from this.  I believe that it is
helpful to have good cooperation between the Debian organization and
the R developers.

I personally prefer the GPL for code but the "Artistic" license under
which perl is distributed or the BSD-style license are also acceptable
for the regular Debian distribution.

Feel free to contact me if I can provide further information.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
------- Start of forwarded message -------
Subject: Bug#17407: r-cran-non-free: incomplete copyright file
Reply-To: Christian Schwarz <schwarz@monet.m.isar.de>, 17407@bugs.debian.org
Resent-CC: Douglas Bates <bates@cs.wisc.edu>
Resent-Date: Fri, 23 Jan 1998 07:33:01 GMT
Resent-Message-ID: <handler.17407.B.8855406599032@bugs.debian.org>
Date: Thu, 22 Jan 1998 18:23:40 +0100 (CET)
From: Christian Schwarz <schwarz@monet.m.isar.de>
To: Debian Bugs <submit@bugs.debian.org>
Message-ID: <Pine.LNX.3.96.980122182112.6087A-100000@monet>


Package: r-cran-non-free
Version: 0.61-2

The /usr/doc/r-cran-non-free/copright file reads:

--cut-here--
Individual modules, installed under /usr/lib/R/library/, contain their
own copyright statements.  These modules considered not to be Debian
Free Software Guidelines (DFSG) compliant.
--cut-here--

According to current policy, the copyright file should contain the
complete license texts. (This is important, since we are planning to set
up a license/ directory on ftp.debian.org which contains the copyright
files from all non-free packages.)


Thanks,

Chris

--                 Christian Schwarz
Do you know         schwarz@monet.m.isar.de, schwarz@schwarz-online.com,
Debian GNU/Linux?    schwarz@debian.org, schwarz@mathematik.tu-muenchen.de
      
Visit                  PGP-fp: 8F 61 EB 6D CF 23 CA D7  34 05 14 5C C8 DC 22 BA
http://www.debian.org   http://fatman.mathematik.tu-muenchen.de/~schwarz/

------- End of forwarded message -------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jan 26 13:16:58 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 26 Jan 1998 14:16:58 +0100
Subject: New design for R html help pages
Message-ID: <199801261316.OAA18164@galadriel.ci.tuwien.ac.at>


Hi,

I've completed a re-design of the R html help pages over the weekend
(without the Kitzb=FChel ski races on TV I would have had some more time
...). The design is actually not from me but from Tanja Afra, a
student of our department.

Anyway, I've put a snapshot on

	http://www.ci.tuwien.ac.at/~leisch/R/doc/html/index.html

please have a look and feel free to make any suggestions when you
think something is not intuitive or ... I really want to get feedback
before I start writing new stuff.

I'm mostly concerned about usability, function is more important than
form. The biggest changes are in the listing of the base package
... there is now a description for each function in it and a
click-able alphabet in the beginning (known bug: it also includes dead
links for letters where no R objects exist.

The function pages contain no `back' button on purpose ... eventually
I also want to include pages from different locations than
$RHOME/library and then there will be no way to have a back button
(these use relative links working only inside $RHOME). Use your
browser's back button or history instead

Features I'll implement once we have agreed on the design:

	*) alphabetic list of all functions installed in RHOME
	*) function lists sorted by keywords
	*) help() optionally sends a request to netscape instead of
	   displaying the nroff version (controlled via options or
	   something similar)

Features I'd like to have but don't know how to do (because I don't
speak Java):
	*) search the help pages


Ok, so much for contents, now for design: The look of a product is
certainly important when trying to sell something, so I really think
we should have something slick (would be depressing if people don't
use R simply because the Splus manual looks better ...)

I don't want to enforce the logo ... it's just that pages look better
with something on it and I think Tanja did a nice job ... if soembody
send's a better one, I've just to replace one jpg file.


Ok, so much for now.

Best,
Fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jan 26 16:45:29 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 26 Jan 1998 11:45:29 -0500
Subject: library.dynam
Message-ID: <98Jan26.115659est.13442@mailgate.bank-banque-canada.ca>

I keep an Splus library on our file server and support different architectures
by giving different names to compiled files to be loaded (eg. Sun4.dse.so,
Sun5.dse.so). I have the impression that it is not possible to do this with R's
current library.dynam(name)  because it uses the name to indicate both the
location and name of the binary file? Is that correct or could someone explain
how I do this?

Thanks,
Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 26 17:58:54 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 26 Jan 1998 18:58:54 +0100
Subject: Factor variables are not vectors...
In-Reply-To: <Pine.SUN.3.95.980126083031.935A-100000@chekov> (message from
 Thomas Lumley on Mon, 26 Jan 1998 08:34:35 -0800 (PST))
Message-ID: <199801261758.SAA08574@sophie.ethz.ch>

	[diverted from R-help to R-devel;  this gets technical ...]
>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> On Mon, 26 Jan 1998, Jim Lindsey wrote:

    >> 2. Factor variables are not vectors!!
    >> is.vector(gl(20,2,40)) gives FALSE

    TL> Even stranger 

    R> is.vector(factor(1:3))# [1] FALSE
    R> is.factor(factor(1:3))# [1] TRUE
    R> is.vector(as.vector(factor(1:3)))# [1] TRUE
    R> is.factor(as.vector(factor(1:3)))# [1] TRUE

    TL> so that factor variables *can* be vectors, but aren't naturally.

and why should they, really?

	(BTW, they are not either in S-plus, by the way).

In your code, shouldn't you test rather 

	if(!is.array(..))

instead?


-------------------

But if we are bashing on  is.vector(.):

Here is an excerpt from a mail I wrote more than 9 months ago:

##- Date: Mon, 7 Apr 97 09:33:51 +0200
##- From: Martin Maechler <maechler@stat.math.ethz.ch>
##- Cc: r-devel@stat.math.ethz.ch
##- In-Reply-To: <199704062058.IAA09618@stat1.stat.auckland.ac.nz> (message from
##- 
##- Ross>> Another reasonable definition of "vector" is !is.array(x).
##- Ross>> or possibly "isVector(x) == 1 && !is.array(x)

##- Yes, I think
##- 		isVector(x) == 1 && !is.array(x)
##- 
##- is the way to go, at least for   mode = 'any'
##- 
##- Now, for the 2nd argument  mode = '...' :
##- I think it should always be more restrictive, i.e.,
##- 	  is.vector(OB, mode= MODE)   <-->   is.vector(OB) &&  MODE.test(OB)
##- 
##- which is not the case currently [[correcting a typo in $RHOME/TASKS l.449-451]

 is.vector(call("ls"))			#[1] FALSE --- but SHOULD be 'TRUE'
 is.vector(call("ls"), mode='language')	#[1] TRUE
 is.vector(call("ls"), mode='call')	#[1] FALSE

## [[here, is.vector(call("ls"), mode='any')  should really return TRUE]]


-----
Martin Maechler
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 27 17:18:11 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 27 Jan 1998 12:18:11 -0500
Subject: New design for R html help pages
References: <199801261316.OAA18164@galadriel.ci.tuwien.ac.at>
 <98Jan26.114658est.13441@mailgate.bank-banque-canada.ca>
 <199801261652.RAA18287@galadriel.ci.tuwien.ac.at>
 <98Jan26.123117est.13448@mailgate.bank-banque-canada.ca> <199801270812.JAA18581@galadriel.ci.tuwien.ac.at>
Message-ID: <98Jan27.123012est.13452@mailgate.bank-banque-canada.ca>

Fritz

One potential problem with the html help is the difficulty of dealing with file
systems which do not support long file names (since you're using function names
as file names). I guess we can ignore DOS. I'm not sure if Windows poses any
problems, but for some reason I thought there were some Unixes that also caused
problems?

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Tue Jan 27 18:42:17 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Wed, 28 Jan 1998 07:42:17 +1300 (NZDT)
Subject: New design for R html help pages
Message-ID: <199801271842.HAA19283@stat1.stat.auckland.ac.nz>

There will definitely be problems on Windows if we go to a system with
long file names. We really must maintain (at a least a version of the
html help) with file names that comply with the old Windows standard
of 8.3. There are a large number of machines (most in students hands)
that run older versions of windows.

robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 27 19:32:19 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 27 Jan 1998 14:32:19 -0500
Subject: New design for R html help pages
References: <199801271842.HAA19283@stat1.stat.auckland.ac.nz>
Message-ID: <98Jan27.144419est.13448@mailgate.bank-banque-canada.ca>

One approach to handling long file names might be to convince everyone to
upgrade to Win95 or Linux.

Another approach is to build an index which points to files with meaningless
names. This is what I did a few years ago with my help system. It's definetly
not as nice, but it does work. You can take a look at
<http://www.bank-banque-canada.ca/pgilbert/help/dsehome.htm>
It might be best to do this as a special needs help system as I think this is a
problem that is going away. Keep the approach you're using and then build this
system afterwards.

You're welcome to use my scripts. I think they could be modified fairly easily
to build the index and files out of the html files (but I haven't looked at them
in a long time so I might be forgetting something).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 27 19:59:29 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Jan 1998 20:59:29 +0100
Subject: New design for R html help pages
In-Reply-To: Paul Gilbert's message of Tue, 27 Jan 1998 14:32:19 -0500
References: <199801271842.HAA19283@stat1.stat.auckland.ac.nz>
 <98Jan27.144419est.13448@mailgate.bank-banque-canada.ca>
Message-ID: <x2zpkhwuvy.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> Another approach is to build an index which points to files with meaningless
> names. This is what I did a few years ago with my help system. It's definetly
> not as nice, but it does work. You can take a look at
> <http://www.bank-banque-canada.ca/pgilbert/help/dsehome.htm>

Of course, what you really want is "magic links", so that jumping to
say idx.htm#long.winded.fname automagically transfers you to say
xr025.thm which contains the actual documentation for
long.winded.fname. Judging from the hoops that web pages seem to jump
through, one should expect that to be possible, but...

There's a third approach: Rdconv -t rtf followed by the Windows help
compiler. That would give the standard WinHelp interface and remove
the dependency on the browser. The obvious problem is how to get
Rdconv to accept the rtf option...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 27 20:44:10 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 27 Jan 1998 15:44:10 -0500
Subject: New design for R html help pages
References: <199801271842.HAA19283@stat1.stat.auckland.ac.nz>
 <98Jan27.144419est.13448@mailgate.bank-banque-canada.ca> <x2zpkhwuvy.fsf@blueberry.kubism.ku.dk>
Message-ID: <98Jan27.155919est.13442@mailgate.bank-banque-canada.ca>

>Of course, what you really want is "magic links", so that jumping to
>say idx.htm#long.winded.fname automagically transfers you to say
>xr025.thm which contains the actual documentation for
>long.winded.fname.

What I did is about as close as I could get without magic links. In the index,
if you click on the name of a function you do get directly to the help for that
function (a file with a meaningless name). If you click on a "see also" link you
jump to the index at the name of the function, so you have to click a second
time on the name of the function. It was a compromise that didn't seem too bad
and made things realively simple.

I also considered rtf. I thought that I could do it but quickly realized that
the ongoing support effort would kill me. HTML was a choice that worked for Unix
(which I mainly use) and also for Windows. I was afraid that if I had to make
any ongoing special separate effort for Windows then it would quickly get
out-of-date.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 29 09:17:29 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 29 Jan 1998 10:17:29 +0100
Subject: Summary of mails concerning R help system
Message-ID: <199801290917.KAA25806@galadriel.ci.tuwien.ac.at>


Hi,

here's a short summary of all the mails I got concerning the R help
system during the last days ... I really want to have all open
questions in this list, so if I forgot your most important topic
please forgive (and remind me again) ... it's probably only because of
lack of time such that I had to compile the list in a hurry ...

Ok, here we go:

1) It would be useful to have a button at the bottom and/or top of each page
which returns to the index. If you jump around a few "see also's" it is hard to
get back to the index ==> fairly easy, will be in the final version


2) dealing with packages not located in $RHOME/library ... that's the
most complicated part ... ideally the package list would look
different for every user, such that everybody sees the system-wide
installed pkgs together with his private pkg's

two possible solution's come to mind:

 - building the pkg list at run-time (via help.start())

 - building a list for every user, i.e. everytime one issues R INSTALL 
   a file in the user's home directory is modified

both have one major drawback which I don't know how to handle: I have
to jump between a static file located in $RHOME/docs/html and a
user-specific file, say $HOME/.R/pkg-list.html

but there seems to be no tilde expansion or $HOME variable in html,
i.e., an URL like "file:~/.R/pkg-list.html" works neither in netscape
nor lynx.


3) Short file names for windoze 3.1 systems ... there seems to be an
easy solution that I missed so far (simply replace the filenames by
something meaningless, because I use hash arrays to match aliases and
coprresponding files anyway), so this could be finished by
monday (if it really works like I think it should).


4) Rdconv -t rtf  to support the windoze help format ... I definetely
don't have time or any motivation to do that, so if somebody wants to
do that, he's welcome.


5) That's actually a wish/suggestion from me: Maybe somebody wants to
help the R project but doesn't know too much about writing code
etc. ... we need a lot more of and better documentation, e.g., short
tutorials on various topics to get people started. These should
explain the basic concept of something and accompany it with some
examples that can be copied & pasted ...

The current demos or the appendix of the R notes could get you
started.  Topics could include those as the the non-existing links
under ``Data Analysis with R'' (Basic Statistics, Exploratory Data
Analysis, Linear Models, ...)

So if you think you could write two or three pages on how to use R for
any topic you could simply write it in LaTeX ideally in such a way
that it can be translated to HTML using hyperlatex ...


Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 29 12:59:16 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Jan 1998 13:59:16 +0100
Subject: Summary of mails concerning R help system
In-Reply-To: Friedrich Leisch's message of Thu, 29 Jan 1998 10:17:29 +0100
References: <199801290917.KAA25806@galadriel.ci.tuwien.ac.at>
Message-ID: <x290rzfnbv.fsf@blueberry.kubism.ku.dk>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> 4) Rdconv -t rtf  to support the windoze help format ... I definetely
> don't have time or any motivation to do that, so if somebody wants to
> do that, he's welcome.

Actually, you are probably the one best *capable* of doing it, but
obviously someone needs to dig out the relevant instructions for what
is supposed to translate to what, and how to get and apply the help
compiler. I snooped around at some point and found some pointers, but
of course I didn't do it systematically in any way. There are, btw,
also (commercial) HTML to WinHelp converters, which I suppose we could
get someone to pay for a copy of.

> 5) That's actually a wish/suggestion from me: Maybe somebody wants to
> help the R project but doesn't know too much about writing code
..
> So if you think you could write two or three pages on how to use R ...
                                  ^^^^^^^^^^^^^^^^^^
.. I'll send you a lollipop. These things tend to expand!   

The first ca. 10 pages of my course notes might actually form the
basis of a "tutorial round trip" for zero-knowledge users, once I get
them translated from Danish. 

I've done a little of that already, but right now, my priorities are
on revising the Danish version before my students need them (due to
<mumble>, they have to learn ANOVA before linear regression this time,
which is a fairly innocent change at the theoretical level, but
implies quite some perturbation at the software level)

One thing we need to be aware of is that there are several types of
users at several skill levels, and that the help system should be
useful for all of them. In particular, we have practitioners (some of
which are not statistical professionals), and academics/programmers.
These - or even the same person in different modes - will be looking
for very different things. Also one should know that a good
introduction is meant to be read exactly once, nothing is more
annoying than when the author has put everything in one document and
you have to wade through pages of trivialities to find the one piece
of information you need.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Thu Jan 29 14:37:32 1998
From: luke@stat.umn.edu (Luke Tierney)
Date: Thu, 29 Jan 1998 08:37:32 -0600 (CST)
Subject: Summary of mails concerning R help system
In-Reply-To: <x290rzfnbv.fsf@blueberry.kubism.ku.dk> from "Peter Dalgaard BSA" at Jan 29, 98 01:59:16 pm
Message-ID: <9801291437.AA29282@nokomis.stat.umn.edu>

Peter Dalgaard BSA wrote:
> 
> Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:
> 
> > 4) Rdconv -t rtf  to support the windoze help format ... I definetely
> > don't have time or any motivation to do that, so if somebody wants to
> > do that, he's welcome.
> 

A curious aside: one of the C compilers I use on Windows has all its
documentation in html files and uses a browser integrated into its
environment to read the help. The manufacturer of the compiler is
located somewhere near Seattle :-).

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
206 Church Street                            email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan  2 17:14:03 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Fri, 2 Jan 1998 11:14:03 -0600 (CST)
Subject: is .Dyn.libs saved in .Rdata?
Message-ID: <m0xoAfb-000hh5C@franz.stat.wisc.edu>

I seem to be having problems with the value of .Dyn.libs being saved
between sessions.  The value is being assigned in library.dynam by
                assign(".Dyn.libs", c(.Dyn.libs, name), envir = .GlobalEnv)
I don't know enough about R environments to decide if this means it
will be saved between sessions if the workspace is saved and
restored.  If so, this should be changed because you do not want to
restore previous values of this variable in a new session.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan  5 07:49:12 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 5 Jan 1998 08:49:12 +0100
Subject: unary !
In-Reply-To: <Pine.SOL.3.95.980104105608.7341B-100000@gorn> (message from
 Thomas Lumley on Sun, 4 Jan 1998 10:58:25 -0800 (PST))
Message-ID: <199801050749.IAA00426@sophie.ethz.ch>

[spill over from  R-core]

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> On Sun, 4 Jan 1998, Kurt Hornik wrote:
    >> Another thing I noticed when playing with chron is that apparently
    >> code like if (!(length(value)) works in S but not in R.  The error
    >> in R is unary ! is only defined for logical vectors
    >> 
    >> I assume that this is a bug and not a feature (although the code in
    >> src/main/logic.c makes me wonder ...).

    TL> I complained about this more than a year ago and I thought we (or
    TL> in those days R+R) had decided it was a feature -- I just explained
    TL> to someone on r-help that it was one of the deliberate
    TL> incompatibilities that ! didn't work on numerics.

Yes, positively.  We've discussed this quite a bit, and
this was defined to be a feature long ago.

The proper (non C-hacker but normal-user readable) way  is to test for

	if(length(vector) == 0)

- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan  5 09:23:16 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 5 Jan 1998 10:23:16 +0100
Subject: as.numeric changes?
In-Reply-To: <199801050102.OAA07591@stat1.stat.auckland.ac.nz> (message from
 Ross Ihaka on Mon, 5 Jan 1998 14:02:14 +1300 (NZDT))
Message-ID: <199801050923.KAA00538@sophie.ethz.ch>

[another spill over from R-core
 concering the new behavior of as.numeric(.) for factors. - MM]

>>>>> "Ross" == Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

    Ross> Thomas Lumley writes:
 > On 27 Dec 1997, Peter Dalgaard BSA wrote:
 > > Thomas Lumley <thomas@biostat.washington.edu> writes:
 > > 
 > > > Now as.numeric() operates on the levels of the factor	
 > > > 	 > as.numeric(factor(c("2","3")))
 > > > 	 [1] 2 3
 > > > 	 > as.numeric(factor(c("A","B")))
 > > > 	 [1] NA NA
 > > > 
 > > > Is this new behaviour a feature? If so, we need to document it in the FAQ
 > > > and the help page.
 > > 
 > > I seem to remember that it got changed in S-plus 3.4 -> 4.0 ? I also
 > > prefer the old behavior, but perhaps codes() is better anyway?

codes(.) is now well documented.
Maybe we should add some extra like

 Note that  \code{\link{as.numeric}(f)} does \emph{not} give the same as
 \code{codes(f)}.  This is not compatible to version of Splus prior to 4.0

    >> We are entirely Unix-based here, so I haven't seen Splus 4.0. I'm
    >> happy to have the new version of as.numeric but I think it needs
    >> documentation as an incompatibility at least with Unix S(-PLUS).

    Ross> Mea culpa.  I as attempting to get rid of what I though was an S
    Ross> incompatibility and succeeded in replacing it with another.

    Ross> I'm not very happy with:

    >> as.numeric(factor(c(100, 200)))
    Ross> 	[1] 1 2

    Ross> but I can live with it. 

Ok, I've now checked it on our PC (S-plus 4.0):
This is the same as  S 4 ("L"), S-plus 3.4 and S-plus 4.0  

On the other hand,
 
	> as.numeric(factor(c("A","B")))
 	[1] NA NA

is not compatible to any version of S-plus or S 4
and I now wonder if we shouldn't go for compatibility here.

- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Jan  5 17:09:38 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 5 Jan 1998 09:09:38 -0800 (PST)
Subject: English compatibility library
In-Reply-To: <34B0B3FB.3A42@math.uio.no>
Message-ID: <Pine.SUN.3.95.980105090633.1964B-100000@chekov>


Is there any good reason not to add the following:

	# R English compatibility library
	licence<-license
	colours<-colors
	heat.colours<-heat.colors
	terrain.colours<-terrain.colors
	topo.colours<-topo.colors
	optimise<-optimize
	

I don't actually have difficulty with any of the R terms, but this sort of
thing can be annoying.  In LaTeX I still type \begin{itemise} annoyingly
often.


Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jan  5 19:20:27 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 5 Jan 1998 14:20:27 -0500
Subject: make docs
Message-ID: <98Jan5.142048est.13456@mailgate.bank-banque-canada.ca>

Installing 0.61 in Solaris (SunOS 5.5) I am getting the following error when I
try to make docs or make help

[28] /home/res8/gilp/R : make docs
make: Fatal error: Don't know how to make target `../src/library/*/man/*.Rd'
Current working directory /home/res8/gilp/R-versions/R-0.61/etc

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jan  5 19:55:12 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Jan 1998 20:55:12 +0100
Subject: make docs
In-Reply-To: Paul Gilbert's message of Mon, 5 Jan 1998 14:20:27 -0500
References: <98Jan5.142048est.13456@mailgate.bank-banque-canada.ca>
Message-ID: <x2pvm6u25b.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> Installing 0.61 in Solaris (SunOS 5.5) I am getting the following error when I
> try to make docs or make help
> 
> [28] /home/res8/gilp/R : make docs
> make: Fatal error: Don't know how to make target `../src/library/*/man/*.Rd'
> Current working directory /home/res8/gilp/R-versions/R-0.61/etc

This is well-known and caused by use of a non-GNU make. Unfortunately,
we don't quite know how to work around it...

If you have GNU make installed and not called "make" but e.g. "gmake",
just do "cd etc ; gmake build-docs". Otherwise, the trick is to
replace the right hand side of the below definition in etc/Makefile
with its shell expansion.

MANSRC = ../src/library/*/man/*.Rd

or, for Solaris *only* (I think), you can replace it with this:

MANSRC:sh = echo ../src/library/*/man/*.Rd

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jan  5 22:23:01 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 5 Jan 1998 17:23:01 -0500
Subject: Error in parse
Message-ID: <98Jan5.172327est.13453@mailgate.bank-banque-canada.ca>

I have narrowed my problem with parse to the example below. This is not a
working piece of code, but does cause the source problem. (This also occurs with
R 0.61.) The code will cut and paste into R ok, but if I cut and paste into a
file and source the file I get
Error in parse(file, n, text, prompt) : syntax error on line 23

Relatively minor things like changing
   }  }  }  }
to
   }  }  }
}
will make the problem go away. (So I guess I know a solution, but it seems like
there is a bug.)

Paul Gilbert
________

ARMA <- function(model)
{
if (0 !=m) if (p != dim(C)[2]) stop("dimension of model parameters do not
conform!")
if (fortran)  if (m==0) C <- array(0,c(1,p,1))
else
  {for (Time in 1:sampleT)
      {if (b >= 2) for (l in 2:b)
          if (l<=Time) vt <- vt - c(B[l,,] %*% prederror[Time+1-l,])
       if (m!=0) for (l in 1:dim(C)[1])
          if (l<=Time) vt <- vt - c(C[l,,] %*% u[Time+1-l,])
       prederror[Time,] <- vt
       if (any(0!=error.weights))
        {
         if (length(error.weights)>1)
           {for (h in 2:length(error.weights))
            if ( (Time+h-1) <= sampleT)
              {vt    <-  rep(0,p)
     }  }  }  }
  }
1
}

KF <- function(model)
{2}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  6 10:11:56 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Jan 1998 11:11:56 +0100
Subject: Error in parse
In-Reply-To: Paul Gilbert's message of Mon, 5 Jan 1998 17:23:01 -0500
References: <98Jan5.172327est.13453@mailgate.bank-banque-canada.ca>
Message-ID: <x24t3hkj2r.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> Error in parse(file, n, text, prompt) : syntax error on line 23
...
> 
> ARMA <- function(model)
> {
> if (0 !=m) if (p != dim(C)[2]) stop("dimension of model parameters do not
> conform!")
> if (fortran)  if (m==0) C <- array(0,c(1,p,1))
> else
>   {for (Time in 1:sampleT)
>       {if (b >= 2) for (l in 2:b)
>           if (l<=Time) vt <- vt - c(B[l,,] %*% prederror[Time+1-l,])
>        if (m!=0) for (l in 1:dim(C)[1])
>           if (l<=Time) vt <- vt - c(C[l,,] %*% u[Time+1-l,])
>        prederror[Time,] <- vt
>        if (any(0!=error.weights))
>         {
>          if (length(error.weights)>1)
>            {for (h in 2:length(error.weights))
>             if ( (Time+h-1) <= sampleT)
>               {vt    <-  rep(0,p)
>      }  }  }  }
>   }
> 1
> }
> 
> KF <- function(model)
> {2}


What is happening here is that the lexical analyser reads the "KF"
token on the penultimate line, but the parser never sees it. 

This must be related to the token-lookahead code in main/src/gram.[yc]
(the token() function). The R_ParseFile function works by repeated
calls to R_Parse1File, which parses single expressions in the file and
R_Parse1File starts with ParseInit(), which as one of its first duties
sets SavedToken = 0. So if a token is saved and not used at the end of
one expression, it gets discarded.

So the bug is one of two (or both):

1) There's a bug in the readahead logic (this essentially works by
counting if's, else's, braces and newlines, so it would be no wonder
if your code tickled it)

2) It is wrong to assume that there's no initial saved token when
parsing 2nd and subsequent expressions in a file.

I think #1 is certainly present, because there should be no reason
to read past the terminating brace in your ARMA() function to detect
the end of it, but I'm not sure that you can't get other examples
where readahead will happen legally.

<better hand this over to Ross now>

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan  6 10:36:18 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 6 Jan 1998 11:36:18 +0100
Subject: R-beta: More glm bugs
In-Reply-To: <9801061000.AA20049@alpha.luc.ac.be> (message from Jim Lindsey on
 Tue, 6 Jan 1998 11:00:11 +0100 (MET))
Message-ID: <199801061036.LAA02319@sophie.ethz.ch>

>>>>> "Jim" == Jim Lindsey <jlindsey@luc.ac.be> writes:

    Jim> 1. The null degrees of freedom do not allow for observations weighted
    Jim> out although the residual df do.
    Jim> in glm.fit(), line. 271, change to
    Jim> nulldf <- nobs-qs.numeric(intercept)-sum(weights==0)
    Jim> similar to the following line for residual df

    Jim> 2. in print.glm(), I do not know what "Total df" means. At present, it
    Jim> is the length of the residal vector, hence not allowing for
    Jim> observations weighted out, which does not make much sense. Logically,
    Jim> it should be the df for the null deviance that follows directly and
    Jim> this is how students here tend to interpret it. Hence, I suggest that
    Jim> line 286 be changed to
    Jim> cat("\nDegrees of Freedom:",x$df.null,"Total;",
    Jim> etc.

    Jim> 4. The problem with names of coefficients being mixed up when there
    Jim> is aliasing, that I have pointed out for some time with each new
    Jim> release, is still not corrected in 0.61. The fix is in the archives
    Jim> (move the 4 or 5 lines that shift names outside the iteration loop in
    Jim> glm.fit)

I'm fixing these three (above). They should be in the next release
(0.61.patched  aka 0.61.1)

----

The following, I think is more a problem  of  model.matrix(.) and such lower
level functions which I leave for  Thomas and Ross ...

    Jim> 3. The following two lines should produce the same result but don't:
    Jim> glm(y~x1:x2:x3-x1:x2:(1+x3))
    Jim> glm(y~x1:x2:x3-x1:x2:-x1:x2:x3)
    Jim> Only the second gives the correct answer. I have not tried to fix this.

-- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  6 12:21:52 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Jan 1998 13:21:52 +0100
Subject: R-beta: More glm bugs
In-Reply-To: Martin Maechler's message of Tue, 6 Jan 1998 11:36:18 +0100
References: <199801061036.LAA02319@sophie.ethz.ch>
Message-ID: <x21zylkd27.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> The following, I think is more a problem  of  model.matrix(.) and such lower
> level functions which I leave for  Thomas and Ross ...
> 
>     Jim> 3. The following two lines should produce the same result but don't:
>     Jim> glm(y~x1:x2:x3-x1:x2:(1+x3))
>     Jim> glm(y~x1:x2:x3-x1:x2:-x1:x2:x3)
>     Jim> Only the second gives the correct answer. I have not tried to fix this.

There seems to be a typo in Jims 2nd example (extra :) (no, that was
not a smiley...). However, the problem seems to boil down to this:

> model.matrix(~x1:x2:1)
     (Intercept)
[1,]           1
[2,]           1
[3,]           1
[4,]           1
[5,]           1
[6,]           1
[7,]           1
[8,]           1
attr(,"assign")
[1] 0

Which is pretty clearly wrong. It should be the same as ~x1:x2

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 15:55:41 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Tue, 6 Jan 1998 09:55:41 -0600 (CST)
Subject: tapply and factors in R-0.61
Message-ID: <m0xpbLx-000hhBC@franz.stat.wisc.edu>

Somehow it seems that tapply converts factors given as the _first_
argument to a numerical representation without the old factor levels.

> unlist(lapply(Machines, data.class))
   Worker   Machine     score 
"ordered"  "factor" "numeric" 
> Machines[ 1:10, ]
Grouped Data: score ~ 1 | Worker
   Worker Machine score
1       1       A  52.0
2       1       A  52.8
3       1       A  53.1
4       2       A  51.8
5       2       A  52.8
6       2       A  53.1
7       3       A  60.0
8       3       A  60.2
9       3       A  58.4
10      4       A  51.1
> tapply( Machines$Machine, Machines$Worker, function(x) x )
$6
[1] 1 1 1 2 2 2 3 3 3

$2
[1] 1 1 1 2 2 2 3 3 3

$4
[1] 1 1 1 2 2 2 3 3 3

$1
[1] 1 1 1 2 2 2 3 3 3

$3
[1] 1 1 1 2 2 2 3 3 3

$5
[1] 1 1 1 2 2 2 3 3 3

> tapply( Machines$Machine, Machines$Worker, data.class )
       6        2        4        1        3        5 
"factor" "factor" "factor" "factor" "factor" "factor" 
> tapply( Machines$Machine, Machines$Worker, levels )
$6
character(0)

$2
character(0)

$4
character(0)

$1
character(0)

$3
character(0)

$5
character(0)
> levels( Machines$Machine )
[1] "A" "B" "C"

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 15:59:46 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Tue, 6 Jan 1998 09:59:46 -0600 (CST)
Subject: More on tapply and factors
Message-ID: <m0xpbPu-000hhBC@franz.stat.wisc.edu>

Here is an even more awkward property of tapply with factors.  What we 
want to do is to determine the modal value of the first factor given
the level of the second factor.  We do that by applying table in a
tapply call then finding the maximum count then ...

Turns out that table gives unexpected results in tapply.

> table(Machines$Machine)
 A  B  C 
18 18 18 
> tapply( Machines$Machine, Machines$Worker, table )
$6
integer(0)

$2
integer(0)

$4
integer(0)

$1
integer(0)

$3
integer(0)

$5
integer(0)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  6 17:09:57 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Jan 1998 18:09:57 +0100
Subject: More on tapply and factors
In-Reply-To: Douglas Bates's message of Tue, 6 Jan 1998 09:59:46 -0600 (CST)
References: <m0xpbPu-000hhBC@franz.stat.wisc.edu>
Message-ID: <x2vhvxil5m.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> > tapply( Machines$Machine, Machines$Worker, table )
> $6
> integer(0)

Yuk! Apparently, the culprit is "split":

> f1<-gl(2,1,4)
> f2<-gl(2,2,4)
> dput(split(f1,f2))
list(1 = factor(c(1, 2), levels=1:0), 2 = factor(c(1, 2), levels=1:0))

> dput(f1)
structure(factor(c(1, 2, 1, 2), levels=1:2), class = "factor", .Label = c("1", 
"2"))
> dput(f2)
structure(factor(c(1, 1, 2, 2), levels=1:2), class = "factor", .Label = c("1", 
"2"))

I wonder if this is a side effect of the ...hmm... "undesirable
feature" of as.numeric(factor)??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan  6 17:42:58 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 6 Jan 1998 18:42:58 +0100
Subject: split(.) woes + "very cheap" fix
In-Reply-To: <x2vhvxil5m.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 06 Jan 1998 18:09:57 +0100)
Message-ID: <199801061742.SAA03394@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Douglas Bates <bates@stat.wisc.edu> writes:
    >> > tapply( Machines$Machine, Machines$Worker, table )
    >> $6
    >> integer(0)

    PD> Yuk! Apparently, the culprit is "split":
ok

    >> f1<-gl(2,1,4)
    >> f2<-gl(2,2,4)
    >> dput(split(f1,f2))
    PD> list(1 = factor(c(1, 2), levels=1:0), 2 = factor(c(1, 2), levels=1:0))

    >> dput(f1)
    PD> structure(factor(c(1, 2, 1, 2), levels=1:2), class = "factor", .Label = c("1", "2"))
    >> dput(f2)
    PD> structure(factor(c(1, 1, 2, 2), levels=1:2), class = "factor", .Label = c("1", "2"))

    PD> I wonder if this is a side effect of the ...hmm... "undesirable
    PD> feature" of as.numeric(factor)??

no, it's a different bug.  The same things happen in 0.50


A very silly workaround (which I am  NOT committing to the sources) 
which seems to help is

  split.default <- function(x,f) {
	  if(is.factor(x)) x <- codes(x)
	  .Internal(split(x,as.factor(f)))
  }

At least it prevents the SEG.FAULT in the following:

    > split.default <- function(x,f) {
    +  if(is.factor(x)) x <- codes(x)
    +  .Internal(split(x,as.factor(f)))
    + }
    > f1<-gl(2,1,4) ; f2<-gl(2,2,4);  dput(split(f1,f2))
    list(1 = c(1, 2), 2 = c(1, 2))
    > tapply(f1,f2,table)
    $1
    1 2 
    1 1 

    $2
    1 2 
    1 1 

    > rm(split.default)
    > tapply(f1,f2,table)

    Process R bus error at Tue Jan  6 18:41:04 1998

--------------


-- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Jan  6 17:55:38 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 6 Jan 1998 09:55:38 -0800 (PST)
Subject: split(.) woes + "very cheap" fix
In-Reply-To: <199801061742.SAA03394@sophie.ethz.ch>
Message-ID: <Pine.SUN.3.95.980106095351.5275C-100000@chekov>

On Tue, 6 Jan 1998, Martin Maechler wrote:

> 
> A very silly workaround (which I am  NOT committing to the sources) 
> which seems to help is
> 
>   split.default <- function(x,f) {
> 	  if(is.factor(x)) x <- codes(x)
> 	  .Internal(split(x,as.factor(f)))
>   }
> 

It looks as though what we really need to do is to remove and then restore
some of the attributes of x.  The question is, which ones? Factor levels
do want to be restored, but other things like dimension don't.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan  6 18:35:28 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 6 Jan 1998 13:35:28 -0500
Subject: private libraries
Message-ID: <98Jan6.133625est.13449@mailgate.bank-banque-canada.ca>

My code mostly seems to be working fairly well under R 0.61 but I am still
trying to clean up the install procedures. Is the private library mechanism
working now (i.e. am I doing something wrong because it doesn't work for me) or
should I just install under $RHOME/library?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan  6 18:48:19 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 6 Jan 1998 13:48:19 -0500
Subject: pow_ii
Message-ID: <98Jan6.134910est.13446@mailgate.bank-banque-canada.ca>

I was hoping
fatal: relocation error: symbol not found: pow_ii: referenced in .../dsefor.so
would disappear in R 0.6x, but it has not. I believe this is suppose to come
from the f2c lib, but I seem to need just a couple of routines:
nm -u dsefor.so
Undefined symbols from dsefor.so:
    .umul
    pow_dd
    pow_ii
    pow_ri
For my own purposes I could compile with fortran but that makes it much harder
for others to use the library. Can anyone suggest a good strategy so that the
whole library can be used easily?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 18:56:19 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 1998 12:56:19 -0600
Subject: private libraries
In-Reply-To: Paul Gilbert's message of Tue, 6 Jan 1998 13:35:28 -0500
References: <98Jan6.133625est.13449@mailgate.bank-banque-canada.ca>
Message-ID: <6rzpl9bfe4.fsf@franz.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> My code mostly seems to be working fairly well under R 0.61 but I am still
> trying to clean up the install procedures. Is the private library mechanism
> working now (i.e. am I doing something wrong because it doesn't work for me) or
> should I just install under $RHOME/library?

Private libraries work just fine for me.  Are you remembering to set
the environment variable RLIBS to the path for your private library
directory. You can also accomplish the same thing by redefining
.lib.loc as soon as you start up like
 > .lib.loc <- c("/home/bates/library/R", .lib.loc)
 > library( lme )
but using the RLIBS environment variable is more elegant.

As far as R INSTALL goes I haven't had any trouble with it in versions 
0.60 and 0.61
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 19:42:59 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Tue, 6 Jan 1998 13:42:59 -0600 (CST)
Subject: match.arg()
Message-ID: <m0xpetv-000hhBC@franz.stat.wisc.edu>

$ R -norestore

R : Copyright 1997, Robert Gentleman and Ross Ihaka
Version 0.61.0 Alpha (December 21, 1997)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"license()" for details.

Type	"demo()" for some demos, "help()" for on-line help, or
	"help.start()" for a HTML browser interface to help.

> foo <- function(a = c("bar", "baz", "boz")) match.arg(a)
> foo("baz")
[1] "baz"
> foo()  # should return "bar" but doesn't
[1] "bar" "baz" "boz"

The current definition of match.arg is
 "match.arg" <-
   function (arg, choices) 
 {
   if (missing(choices)) {
     formal.args <- formals(sys.function(sys.parent()))
     choices <- eval(formal.args[[deparse(substitute(arg))]])
   }
   i <- pmatch(arg, choices)
   if (is.na(i)) 
     stop(paste("ARG should be one of", paste(choices, 
					      collapse = ", "), sep = " "))
   else if (i == 0) 
     if (arg == choices) 
       rval <- choices[1]
     else stop("there is more than one match in match.arg")
   else rval <- choices[i]
   return(rval)
 }

I believe what is happening is that arg is being evaluated when passed 
to match.arg hence it takes on the default value which is the same
value as choices will assume.  Another R-like language defines this
function with the first statement like

   if (missing(choices)) {
     formal.args <- formals(sys.function(sys.parent()))
     choices <- eval(formal.args[[deparse(substitute(arg))]])
     arg <- arg[1]
   }

I think that creates the desired behaviour here too.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan  6 22:03:58 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 6 Jan 1998 17:03:58 -0500
Subject: private libraries
References: <98Jan6.133625est.13449@mailgate.bank-banque-canada.ca> <6rzpl9bfe4.fsf@franz.stat.wisc.edu>
Message-ID: <98Jan6.170457est.13454@mailgate.bank-banque-canada.ca>

>Private libraries work just fine for me.  Are you remembering to set
>the environment variable RLIBS to the path for your private library

Well perhaps I just didn't persist long enough, but I posted a message when I
was having trouble in 0.60 and got a response that the private library mechanism
was not working correctly. I am setting the environment variable RLIBS. I have
tried several variations with no success. One problem is that parts of the R
INSTALL seem to work, but not enough so the UNINSTALL works, so it is hard to
get back to a clean starting point.

Following is what I think I should do to install two private libraries
(packages). Could you please contrast what you do with this.

1/ put code into files   .../Rdse/tframe/R/tframe.R and .../Rdse/dse/R/dse.R

2/ cd to .../Rdse and
      INSTALL R tframe tframe
      INSTALL R dse dse

3/ RLIBS=.../Rdse    export RLIBS

4/ start R and then library() should indicate the two packages in the .../Rdse
and
    library("tframe") ; library("dse")  should load the libraries.

Thanks in advance.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 22:15:30 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 1998 16:15:30 -0600
Subject: private libraries
In-Reply-To: Paul Gilbert's message of Tue, 6 Jan 1998 17:03:58 -0500
References: <98Jan6.133625est.13449@mailgate.bank-banque-canada.ca> <6rzpl9bfe4.fsf@franz.stat.wisc.edu> <98Jan6.170457est.13454@mailgate.bank-banque-canada.ca>
Message-ID: <6rra6lb665.fsf@franz.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 1/ put code into files   .../Rdse/tframe/R/tframe.R and .../Rdse/dse/R/dse.R
> 
> 2/ cd to .../Rdse and
>       INSTALL R tframe tframe
>       INSTALL R dse dse

There's the problem.  The last argument should be a directory into
which the library will be installed.  It will automatically become a
subdirectory with the library name within the directory you specify

There is another problem in that it should be R INSTALL, not INSTALL R
but I presume that was just a typo.

I put my personal libraries into ~/library/R so I use the R INSTALL
command as
 R INSTALL lme /home/bates/library/R  # creates /home/bates/library/R/lme
then I set
 export RLIBS=/home/bates/library/R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Jan  6 23:51:15 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 7 Jan 1998 12:51:15 +1300 (NZDT)
Subject: IEEE 754 Style Arithmetic
Message-ID: <199801062351.MAA09299@stat1.stat.auckland.ac.nz>

I have been looking at the R mathematical library with a view to
making changes so that it will handle IEEE 754 entities like NaN and
+/- Inf.  This appears to be not too hard and I am fairly well down
the path to converting the existing code (and simultaneously
converting some of the more suspect algorithms to something more
solid).

Q1:

I have looked at the Splus implementation and I have a bit of a
problem with some of the decisions that have been made.  For example

	pnorm(0, 1, Inf)   ->   0.5

This seems VERY dangerous to me.  It's the kind of thing which could
make errors almost impossible to find.  I would much rather that this
generated NaN (it's a domain error in my view).

There are some other nits like this too.  Would it be a serious
problem if I were to "fix" these?

Q2:

At present, the functions returning information about discrete
distributions work on integer (32-bit C int) arguments.  This limits
the domain for these functions.  Has anyone found that that this is a
problem?

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Jan  7 02:47:08 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 7 Jan 1998 15:47:08 +1300 (NZDT)
Subject: Error in parse
In-Reply-To: <x24t3hkj2r.fsf@blueberry.kubism.ku.dk>
References: <98Jan5.172327est.13453@mailgate.bank-banque-canada.ca>
 <x24t3hkj2r.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801070247.PAA12670@stat1.stat.auckland.ac.nz>

Peter Dalgaard writes:
 > Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
 > 
 > > Error in parse(file, n, text, prompt) : syntax error on line 23

 > 1) There's a bug in the readahead logic (this essentially works by
 > counting if's, else's, braces and newlines, so it would be no wonder
 > if your code tickled it)


Got it in one (1?).  The problem is that '}', ')' and ']' should each
terminate ALL preceding if clauses.  Here is the fix ...

At the very bottom of gram.y in yylex, there are case statements of
the form:

        case ']':
                ifpop();
		...
 
        case RBRACE:
                ifpop();
		...

        case ')':
                ifpop();
		...

These should read

        case ']':
		while(*contextp == 'i')
			ifpop();
		...
 
        case RBRACE:
		while(*contextp == 'i')
			ifpop();
		...

        case ')':
                while(*contextp == 'i')
                        ifpop();

This seems to make Paul's example work.  I will commit this in a minute.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan  7 07:41:45 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 7 Jan 1998 08:41:45 +0100
Subject: unary !
In-Reply-To: <199801050749.IAA00426@sophie.ethz.ch>
References: <Pine.SOL.3.95.980104105608.7341B-100000@gorn>
 <199801050749.IAA00426@sophie.ethz.ch>
Message-ID: <199801070741.IAA08682@pc25.none>

>>>>> Martin Maechler writes:

> [spill over from  R-core]
>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

TL> On Sun, 4 Jan 1998, Kurt Hornik wrote:
>>> Another thing I noticed when playing with chron is that apparently
>>> code like if (!(length(value)) works in S but not in R.  The error
>>> in R is unary ! is only defined for logical vectors
>>> 
>>> I assume that this is a bug and not a feature (although the code in
>>> src/main/logic.c makes me wonder ...).

TL> I complained about this more than a year ago and I thought we (or
TL> in those days R+R) had decided it was a feature -- I just explained
TL> to someone on r-help that it was one of the deliberate
TL> incompatibilities that ! didn't work on numerics.

> Yes, positively.  We've discussed this quite a bit, and
> this was defined to be a feature long ago.

> The proper (non C-hacker but normal-user readable) way is to test for

> 	if(length(vector) == 0)

O.k.  I will add this to the FAQ but I am still not convinced.  If I may
e.g. do

R> 0 & 0
[1] FALSE
R> 1 | 0
[1] TRUE

then why can't !0 be TRUE?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 08:00:24 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 09:00:24 +0100
Subject: IEEE 754 Style Arithmetic
In-Reply-To: <199801062351.MAA09299@stat1.stat.auckland.ac.nz> (message from
 Ross Ihaka on Wed, 7 Jan 1998 12:51:15 +1300 (NZDT))
Message-ID: <199801070800.JAA03967@sophie.ethz.ch>

>>>>> "Ross" == Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

    Ross> I have been looking at the R mathematical library with a view to
    Ross> making changes so that it will handle IEEE 754 entities like NaN
    Ross> and +/- Inf.  This appears to be not too hard and I am fairly
    Ross> well down the path to converting the existing code (and
    Ross> simultaneously converting some of the more suspect algorithms to
    Ross> something more solid).
Great !  
Thank you -- this has been my longest lasting wish for R...

(has Heiner Schwarte contacted you, yet?
 during holiday season, he has almost finished doing the same
 while successfully porting R 0.61 to Windows NT (!!!) (MS C compiler)
)


    Ross> Q1:

    Ross> I have looked at the Splus implementation and I have a bit of a
    Ross> problem with some of the decisions that have been made.  For
    Ross> example

    Ross> 	pnorm(0, 1, Inf) -> 0.5

    Ross> This seems VERY dangerous to me.  It's the kind of thing which
    Ross> could make errors almost impossible to find.  I would much rather
    Ross> that this generated NaN (it's a domain error in my view).

I disagree quite strongly.

You are right, that some errors are harder to track down when  Inf & -Inf
work properly.
But in my oppinion the advantages really do abound.

for(s in 10^(0:9))cat("sd=",formatC(s,wid=5),"pnorm(0,1,sd)=",pnorm(0,1,s),"\n")
sd=     1 pnorm(0,1,sd)= 0.1586553 
sd=    10 pnorm(0,1,sd)= 0.4601722 
sd=   100 pnorm(0,1,sd)= 0.4960106 
sd=  1000 pnorm(0,1,sd)= 0.4996011 
sd= 1e+04 pnorm(0,1,sd)= 0.4999601 
sd= 1e+05 pnorm(0,1,sd)= 0.499996 
sd= 1e+06 pnorm(0,1,sd)= 0.4999996 
sd= 1e+07 pnorm(0,1,sd)= 0.5 
sd= 1e+08 pnorm(0,1,sd)= 0.5 
sd= 1e+09 pnorm(0,1,sd)= 0.5 


I think one of the merits of useful IEEE implementations is
continuity (in the mathematical sense)
and ``automatic fulfillment'' of limit theorems.

This has been very useful for me in several situations of S-plus code
development.  
And I have been longing for these to be available in R, as well.

    Ross> There are some other nits like this too.  Would it be a serious
    Ross> problem if I were to "fix" these?

yes (see above).


    Ross> Q2:

    Ross> At present, the functions returning information about discrete
    Ross> distributions work on integer (32-bit C int) arguments.  This
    Ross> limits the domain for these functions.  Has anyone found that
    Ross> that this is a problem?

not yet.
How much speed would be lost, if they worked for all double (and Inf, -Inf)
arguments?

- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 08:29:02 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 09:29:02 +0100
Subject: Two more R/S differences
In-Reply-To: <199801070741.IAA08668@pc25.none> (message from Kurt Hornik on
 Wed, 7 Jan 1998 08:41:45 +0100)
Message-ID: <199801070829.JAA03989@sophie.ethz.ch>

(Another discussion out of R-core,  
 I think  anyone in R-devel might have an opinion -- MM):

>>>>> "KH" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

>>>>> Martin Maechler writes:
>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
    KH> * Bug or feature?
    R> NULL + NULL
    real(0)
    R> NULL > NULL
    Error: comparison is possible only for vector types
    R> NULL & NULL
    Error in NULL & NULL : operations are possible only for numeric or
    logical types

    KH> whereas S-PLUS:

    >>>> NULL > NULL
    NULL
    >>>> NULL + NULL
    NULL
    >>>> NULL & NULL
    NULL

    >> NULL + NULL real(0) and NULL are not so different..  I think R is
    >> better here...

    >> The other two: R (once more) is stricter in order to help avoiding
    >> buggy code.

    >> In R,
    >>> real(0) > integer(0)
    >> logical(0)

    >> Therefore, I don't see why NULL > NULL should work...

    >> In sum, I think R behaves as we want, and the different behavior
    >> should go into the FAQ and probably also be mentioned in some *.Rd
    >> files.

    KH> Again, I am not entirely convinced yet.

you are right, me neither anymore..

We should discuss this some more

    KH> Why does adding two empty objects give something non-NULL?  To me,
    KH> this seems to violate `nihil nihilo fit' (the ``no-arbitrage
    KH> condition'').

I think the paradigm is

 NULL    :=  list of length 0  + is sometimes coerced to vector of length 0
				    ~~~~~~~~~
 real(0) :=  numeric(0) =  numeric vector of length 0

The real point of discussion is:

 -------------------------------------------------------------------------
##   In which situations should
##   NULL silently be coerced to numeric(0) / logical(0) / character(0) ?
 --------------------------------------------------------------------------

Currently,  S does this silent coercion very often
while  R does not.
I start thinking that maybe R should change here.

    KH> Also, why is it o.k. to ADD two empty objects, but not to compare
    KH> them?  (Shouldn't two NULL objects be the same?)

    KH> Btw, the code in chron that got me started on this was

    KH> 	if(any(o1 != o2))

    KH> trying to figure out whether two origins (o1, o2) were different.
    KH> Under R, this code fails if at least one of the origins is NULL.
    KH> What is the right way of coding this?  (Surely not the

    KH> 	if(any(o1 - o2))

    KH> I changed it to :-))

All was ok, if both  o1 and o2  where never NULL but rather numeric(0),
however see above.

-- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Jan  7 09:20:35 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 7 Jan 1998 10:20:35 +0100
Subject: tabular environment for Rd files
Message-ID: <199801070920.KAA14297@galadriel.ci.tuwien.ac.at>


I have added a preliminary version of a tabular environment to Rdconv
and committed it to the current development sources.

Syntax:

\tabular{format}{
  aaa \tab bbb \tab ccc \cr
  xxx \tab yyy \tab zzz
}

i.e., the column seperator is \tab and the line seperator is \cr

format is a usual LaTeX tabular format string, e.g in the above
example it could be `lll' giving three left justified columns.

currently only l, r, and c identifiers are supported, all doing the
obvious.=20

I thought about using LaTeX's `&' and `\\' as seperatoirs but these
would be inconsistent with the Rd-philosophy of having no special
characters (we want to get rid of having to escape & a.s.a.p.).

If you don't like \tab and \cr, please feel free to make better
suggestions.

The latex and html conversions seem to work perfectly ... as usual I'm
not so sure about nroff (it seems to work fine for me).

As I said, it's preliminary: Don't use any formatting such as \eqn
inside a tabular ... there might be unexpected results.

Best,
Fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 09:24:06 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 10:24:06 +0100
Subject: hist(.) -- S compatibility : [a,b) versus (a,b]  and ....
Message-ID: <199801070924.KAA04110@sophie.ethz.ch>

Looking at Albrech Gebhardt's bug report to R-help (Dec.23)
and proposal for improvement,

I've been also trying several examples and comparing results with S-plus.
Note that we have decided to NOT be fully compatible to S with our hist(.)
function since we found S to be really `wrong' and `unuseful':
S: - The value returned by hist(.) depends on plot=T or plot=F
R: - We return a list(.) either way which contains additional useful things
     anyway, see,  hist(.) in 0.60 or 0.61.
   - we will have a ``label = FALSE'' argument as proposed by Albrecht

However, there are several  incompatibilities:


1) S uses half-open  (a,b] intervals 
   where for the left most cell,  [a,b] is used when
	``include.lowest  =  T'' (which is default).

   R currently uses half-open  [a,b) intervals.

I propose to change R here, including the "include.lowest = TRUE" argument


2) S has    ``probability = F'',
   we have  ``freq = NULL''  (which defaults to FALSE for equidistant breaks
			      and  TRUE for non-equidistant breaks).

I think we don't want to change the better default here.
I wonder if we should change the argument name from 'freq' to 'probability'
			
---------

If I don't hear objections or better proposals from you,
I'll change "1)" and leave "2)".

Martin Maechler <maechler@stat.math.ethz.ch>		 <><
Seminar fuer Statistik, SOL G1
ETH (Federal Inst. Technology)	8092 Zurich	 SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Wed Jan  7 10:54:25 1998
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas Weingessel)
Date: Wed, 7 Jan 1998 11:54:25 +0100
Subject: R/S difference (data frames)
Message-ID: <199801071054.LAA13594@elendil.ci.tuwien.ac.at>


In R, it is not possible to use binary operations, like -, on the
lines of a data frame, even if all columns contain numeric values. In
Splus this is possible:

R> a<-data.frame(int1=3D1:3,int2=3D4:6)
R> a[1,]-a[2,]
Error in a[1, ] - a[2, ] : non-numeric argument to binary operator

but

S>  a<-data.frame(int1=3D1:3,int2=3D4:6)
S> a[1,]-a[2,]
  int1 int2=20
1   -1   -1


If not all columns contain numeric values, both R and S give an error:

R> b<-data.frame(int1=3D1:3,int2=3D4:6,char=3Dc("a","b","c"))
R> b[1,]-b[2,]
Error in b[1, ] - b[2, ] : non-numeric argument to binary operator

S> b<-data.frame(int1=3D1:3,int2=3D4:6,char=3Dc("a","b","c"))
S> b[1,]-b[2,]
Error in Ops.factor(e1, e2): "-" not meaningful for factors
Dumped

but the following is again different:

R> b<-data.frame(int1=3D1:3,int2=3D4:6,char=3Dc("a","b","c"))
R> b[1,1:2]-b[2,1:2]
Error in b[1, 1:2] - b[2, 1:2] : non-numeric argument to binary operator

S> b<-data.frame(int1=3D1:3,int2=3D4:6,char=3Dc("a","b","c"))
> b[1,1:2]-b[2,1:2]
  int1 int2=20
1   -1   -1



************************************************************************
*                          Andreas Weingessel                          *
************************************************************************
* Institut f=FCr Statistik      *                Tel: (+43 1) 58801 4541 =
*
* Technische Universit=E4t Wien *                Fax: (+43 1)  504 14 98 =
*
* Wiedner Hauptstr. 8-10/1071 *     Andreas.Weingessel@ci.tuwien.ac.at *
* A-1040 Wien, Austria        * http://www.ci.tuwien.ac.at/~weingessel *
************************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 11:06:14 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 12:06:14 +0100
Subject: pow_ii
In-Reply-To: <98Jan6.134910est.13446@mailgate.bank-banque-canada.ca> (message
 from Paul Gilbert on Tue, 6 Jan 1998 13:48:19 -0500)
Message-ID: <199801071106.MAA04212@sophie.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I was hoping fatal: relocation error: symbol not found: pow_ii:
    PaulG> referenced in .../dsefor.so would disappear in R 0.6x, but it
    PaulG> has not. I believe this is suppose to come from the f2c lib, but
    PaulG> I seem to need just a couple of routines: 

    PaulG> nm -u dsefor.so
    PaulG> Undefined symbols from dsefor.so:
    PaulG> .umul
    PaulG> pow_dd
    PaulG> pow_ii
    PaulG> pow_ri

    PaulG> For my own purposes I could compile with fortran but that makes
    PaulG> it much harder for others to use the library. Can anyone suggest
    PaulG> a good strategy so that the whole library can be used easily?

    PaulG> Paul Gilbert

Well, I don't know myself.

Paul, there are quite a few people eagerly waiting for your time-series
package to appear on CRAN !!
	==============
	please keep on
	==============

Ross plans to change and cleanup the R setup such
that either Fortran or f2c  will be required in a future release anyway.

On the other hand, there's currently 
	src/appl/fortran.c
	src/include/Fortran.h
which define
	POW_DD
and	POW_DI

You may augment these by  POW_II and POW_RI
and send your patches to R-devel....

-------

Probably, Ross should correct or augment these statements ...
	
- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan  7 11:35:41 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Jan 1998 12:35:41 +0100
Subject: pow_ii
In-Reply-To: Martin Maechler's message of Wed, 7 Jan 1998 12:06:14 +0100
References: <199801071106.MAA04212@sophie.ethz.ch>
Message-ID: <x24t3gldo2.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

>     PaulG> nm -u dsefor.so
>     PaulG> Undefined symbols from dsefor.so:
>     PaulG> .umul
>     PaulG> pow_dd
>     PaulG> pow_ii
>     PaulG> pow_ri
> 
> Well, I don't know myself.
...
> Ross plans to change and cleanup the R setup such
> that either Fortran or f2c  will be required in a future release anyway.

Are we already requiring the libs? I forget. If we do, isn't it just a
matter of adding them in when the .so file is linked?

> 
> On the other hand, there's currently 
> 	src/appl/fortran.c
> 	src/include/Fortran.h
> which define
> 	POW_DD
> and	POW_DI
> 
> You may augment these by  POW_II and POW_RI
> and send your patches to R-devel....



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 14:58:14 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 15:58:14 +0100
Subject: Segfault from seq(.)
Message-ID: <199801071458.PAA04442@sophie.ethz.ch>


R> gl(2,3):gl(1,6)

Process R segmentation violation at Wed Jan  7 15:56:45 1998

The reason seems to be that gl(1,6) is a factor with only one level.

patches welcome...
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 15:50:59 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 16:50:59 +0100
Subject: R-beta: sequences -- asReal(.) ?
In-Reply-To: <9801071055.AA14982@alpha.luc.ac.be> (message from Jim Lindsey on
 Wed, 7 Jan 1998 11:55:12 +0100 (MET))
Message-ID: <199801071550.QAA04539@sophie.ethz.ch>

[diverted from R-help to R-devel]

>>>>> "Jim" == Jim Lindsey <jlindsey@luc.ac.be> writes:

    Jim>   1. The change of sequences from reals to integers has created a
    Jim> number of problems. I already mentioned this earlier on the list
    Jim> but here is another example: contour(1:10,1:10,z) where z is an
    Jim> appropriate matrix, does not work. After searching quite a while,
    Jim> I discovered in the C code that contour checks for reals and does
    Jim> not allow integers. Someone is going to have through all the C
    Jim> code and change checks for reals to numeric anywhere where
    Jim> sequences might be used.

Sequences are not the only integer variables in R, even though probably the
most frequent ones.

I wonder, too what to do.
There is the  asReal(.) macro  which could be used instead of REAL(.),
but I wonder if this is the correct approach.

Ross ?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan  7 16:27:37 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 7 Jan 1998 17:27:37 +0100
Subject: pow_ii
In-Reply-To: <x24t3gldo2.fsf@blueberry.kubism.ku.dk>
References: <199801071106.MAA04212@sophie.ethz.ch>
 <x24t3gldo2.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801071627.RAA11761@pc25.none>

>>>>> Peter Dalgaard BSA writes:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
PaulG> nm -u dsefor.so
PaulG> Undefined symbols from dsefor.so:
PaulG> .umul
PaulG> pow_dd
PaulG> pow_ii
PaulG> pow_ri
>> 
>> Well, I don't know myself.
> ...
>> Ross plans to change and cleanup the R setup such
>> that either Fortran or f2c  will be required in a future release anyway.

> Are we already requiring the libs? I forget. If we do, isn't it just a
> matter of adding them in when the .so file is linked?

No, we're not.  In the current stage, we don't require a FORTRAN
compiler or f2c.  What you can (should) do now is to add "-lf2c" to the
.so rule in src-c/Makefile and hope that everyone has libf2c.  This will
of course mean that those who have a ``plain C only'' environment (no
FORTRAN compiler, no f2c) will not be able to install the package.  But
then again, in the near future they won't be able to compiler R anyway.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan  7 17:06:22 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 7 Jan 1998 18:06:22 +0100
Subject: English compatibility library
In-Reply-To: <Pine.SUN.3.95.980105090633.1964B-100000@chekov>
References: <34B0B3FB.3A42@math.uio.no>
 <Pine.SUN.3.95.980105090633.1964B-100000@chekov>
Message-ID: <199801071706.SAA11818@pc25.none>

>>>>> Thomas Lumley writes:

> Is there any good reason not to add the following:

> 	# R English compatibility library
> 	licence<-license
> 	colours<-colors
> 	heat.colours<-heat.colors
> 	terrain.colours<-terrain.colors
> 	topo.colours<-topo.colors
> 	optimise<-optimize
	

> I don't actually have difficulty with any of the R terms, but this
> sort of thing can be annoying.  In LaTeX I still type \begin{itemise}
> annoyingly often.

You could use the completion features provided by the corresponding
Emacs packages ...

Personally, I have no problem with a British compatibility package.
(Didn't you propose something similar with a ``Be nice to the English!''
email sometimes last year :-))  A potential problem is that it will
result in code being unusable in R- (yes, I know, one could provide the
same compatibility package there, ...).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Jan  7 17:13:38 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 7 Jan 1998 09:13:38 -0800 (PST)
Subject: pow_ii
In-Reply-To: <98Jan6.134910est.13446@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.SUN.3.95.980107091229.7924C-100000@chekov>

On Tue, 6 Jan 1998, Paul Gilbert wrote:

> I was hoping
> fatal: relocation error: symbol not found: pow_ii: referenced in .../dsefor.so
> would disappear in R 0.6x, but it has not. I believe this is suppose to come
> from the f2c lib, but I seem to need just a couple of routines:
> nm -u dsefor.so
> Undefined symbols from dsefor.so:
>     .umul
>     pow_dd
>     pow_ii
>     pow_ri
> For my own purposes I could compile with fortran but that makes it much harder
> for others to use the library. Can anyone suggest a good strategy so that the
> whole library can be used easily?

Until something final happens with R and FORTRAN you could include those
routines from the f2c library in your package.  The integrate package
already does this with pow_ii

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Wed Jan  7 18:43:05 1998
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas Weingessel)
Date: Wed, 7 Jan 1998 19:43:05 +0100
Subject: R/S Difference - split
Message-ID: <199801071843.TAA14847@elendil.ci.tuwien.ac.at>


In S it is possible to "split" a matrix into its rows, using
split(matrix, 1:number_of_rows). This is not possible in R.

Example:

R:
R> split(matrix(rnorm(1:20),4, 5), 1:4)
Error in split(x, as.factor(f)) : argument lengths differ


S:
> split(matrix(rnorm(1:20),4, 5), 1:4)
$"1":
[1] -0.1804794  0.5269439  0.6248224 -0.3243427 -1.2987407

$"2":
[1]  0.9384254 -1.7596400  1.1210493 -0.2711708  0.7039623

$"3":
[1] -0.02645670  0.81864215  0.58816596 -0.42465974 -0.02682458

$"4":
[1] -0.5523629 -0.7176803  0.3159648  0.7787409  1.6325061



************************************************************************
*                          Andreas Weingessel                          *
************************************************************************
* Institut f=FCr Statistik      *                Tel: (+43 1) 58801 4541 =
*
* Technische Universit=E4t Wien *                Fax: (+43 1)  504 14 98 =
*
* Wiedner Hauptstr. 8-10/1071 *     Andreas.Weingessel@ci.tuwien.ac.at *
* A-1040 Wien, Austria        * http://www.ci.tuwien.ac.at/~weingessel *
************************************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Thu Jan  8 00:18:55 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Thu, 8 Jan 1998 13:18:55 +1300 (NZDT)
Subject: R/S Difference - split
Message-ID: <199801080018.NAA20873@stat1.stat.auckland.ac.nz>

The difference is more fundamental:
   split(1:10,1:2)
   
 yields
 
  $"1":
[1] 1 3 5 7 9

$"2":
[1]  2  4  6  8 10

in Splus and an error in R. R is not recycling the factor. I'll see
about fixing this. Splus says that if group is shorter it should be
replicated to fill things up and if it is longer a warning will be
printed that some of the groups will have length zero. Any reasons
not to be compatible?

robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan  8 16:45:26 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 8 Jan 1998 17:45:26 +0100
Subject: R, LANG, and LC_....
In-Reply-To: <Pine.GSO.3.95.980108162951.3354A-100000@pc30.stat.umu.se>
 (message from Goran Brostrom on Thu, 8 Jan 1998 16:32:47 +0100 (MET))
Message-ID: <199801081645.RAA05896@sophie.ethz.ch>

=09[diverted from R-help  to R-devel]

>>>>> "GB" =3D=3D Goran Brostrom <gb@stat.umu.se> writes:

    GB> On 8 Jan 1998, Peter Dalgaard BSA wrote:

    >> Goran Brostrom <gb@stat.umu.se> writes:
    >> 
    >> > I am running R 0.61.0 on a Sparc 5, Solaris 2.4, in tcsh. Today I
    >> > couldn't, to my big surprise, scan a data file in R. As I finally
    >> > understood it, R wanted a decimal comma instead of a decimal
    >> point, > because LANG was set to 'sv'. See my runs below. I wonder
    >> why this
    >> 
    >> Apparently, the strtod() C library function accepts different
    >> formats depending on locale settings, so probably the
    >> setlocale(LC_ALL,""); in src/main/main.c is doing you in.
    >> 
    >> This is the same thing that allows you to have a variable called
    >> "f=F6r=E4ldre" and see come out right on plots, etc., so you don't w=
ant
    >> to remove that line.
    >> 
    >> I think that either you should setenv LC_NUMERIC to C or POSIX or R
    >> should only set LC_CTYPE (and maybe some of the others?).

    GB> Yes, the combination (LANG =3D sv & LC_NUMERIC =3D C) seems to work
    GB> properly.  Thanks!

    GB> Goran

Peter (and everyone), I still think we should replace

=09setlocale(LC_ALL,"");
by

=09setlocale(LC_CTYPE,"");
=09setlocale(LC_........);
=09setlocale(LC_........);

But probably you know better than me what the  ...... should be.

Note that we still have the problem that R's parser does not properly use
all the isalpha(.) characters when e.g. checking variable names.


- Martin.=
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan  8 17:15:21 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 8 Jan 1998 18:15:21 +0100
Subject: "X segfault" with   lty = '01'
Message-ID: <199801081715.SAA05968@sophie.ethz.ch>

Another situation, where an argument is not properly checked :

> plot(1:10,type='l',lty='01')

X Error of failed request:  BadValue (integer parameter out of range for operation)
  Major opcode of failed request:  58 (X_SetDashes)
  Value in failed request:  0x0
  Serial number of failed request:  26
  Current serial number in output stream:  29

Process R exited abnormally with code 1 at Thu Jan  8 18:13:55 1998
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jan  8 17:48:56 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 8 Jan 1998 18:48:56 +0100
Subject: development snapshot of Design package
Message-ID: <199801081748.SAA17071@pc25.none>

Jim Lindsey has made his quick shot at porting F Harrell's Design pkg
available in the CRAN src/contrib/devel area.

His changes are actually relative to version 0.50, so perhaps there is
need for undoing some changes.  They are cleanly documented, however.

It would be great if anyone could ``play'' some more with the port, so
that we have a fully functional one eventually.

-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan  8 18:02:37 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Jan 1998 19:02:37 +0100
Subject: R, LANG, and LC_....
In-Reply-To: Martin Maechler's message of Thu, 8 Jan 1998 17:45:26 +0100
References: <199801081645.RAA05896@sophie.ethz.ch>
Message-ID: <x24t3eu9mq.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> =09setlocale(LC_ALL,"");
> by
>=20
> =09setlocale(LC_CTYPE,"");
> =09setlocale(LC_........);
> =09setlocale(LC_........);
>=20
> But probably you know better than me what the  ...... should be.

Hmm, it's not easy to say. LC_COLL is a rather obvious candidate, but
maybe not in all languages (Danish alphabet contains the English one
as the first 26 characters in their usual order, so English text would
sort the same, but does that hold for all languages?).

> Note that we still have the problem that R's parser does not properly =
use
> all the isalpha(.) characters when e.g. checking variable names.

Yes, this is strange (Solaris 2.5.1, LC_CTYPE=3Diso_8859_1):

> b=F8<-1
> =E6=F8=E5<-1
Error: syntax error
> =F8=E5<-1
> =E6<-1
Error in 0 <- 1 : invalid (do_set) left-hand side to assignment

apparently =E6 (0xf8) is treated differently from its siblings. It seems
to get treated syntactically as digit 0. Even stranger, if I set
LANG=3Dda and unset LC_CTYPE, I get a syntax error on everything with
an '=F8' in it (??!!!)

--=20
   O__  ---- Peter Dalgaard             Blegdamsvej 3 =20
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N  =20
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan  8 18:18:46 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Jan 1998 19:18:46 +0100
Subject: R, LANG, and LC_....
In-Reply-To: Peter Dalgaard BSA's message of 08 Jan 1998 19:02:37 +0100
References: <199801081645.RAA05896@sophie.ethz.ch>
 <x24t3eu9mq.fsf@blueberry.kubism.ku.dk>
Message-ID: <x21zyiu8vt.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> apparently =E6 (0xf8) is treated differently from its siblings. It seems
             ^^^^^^^^^^
Hum. For once, quoted-unreadable seems to serve a useful purpose by
pointing out obvious mistakes....
 
> to get treated syntactically as digit 0. Even stranger, if I set
> LANG=3Dda and unset LC_CTYPE, I get a syntax error on everything with
> an '=F8' in it (??!!!)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Fri Jan  9 00:52:32 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Fri, 9 Jan 1998 13:52:32 +1300 (NZDT)
Subject: split(.) woes
Message-ID: <199801090052.NAA04850@stat1.stat.auckland.ac.nz>

I have fixed most (all I think) of the reported problems with split.
There should be a patch release this Sunday and the fixes will be in it
if anyone wants/needs them sooner please let me know and I'll pass them
along directly. Now I just need to change the documentation.....

I also fixed the problem with seq reported by Martin,
 On line 85 of seq.c change the i to a j.

  v2 = strlen(CHAR(STRING(levs2)[i]));
  
 should read
  v2 = strlen(CHAR(STRING(levs2)[j]));
  
  this will also be in the patches.
  
  robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan  9 18:07:47 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jan 1998 19:07:47 +0100
Subject: ctest miscellania
In-Reply-To: Kurt Hornik's message of Sun, 4 Jan 1998 15:05:28 +0100
References: <199801041405.PAA15561@aragorn.ci.tuwien.ac.at>
Message-ID: <x2wwg9jzbg.fsf@blueberry.kubism.ku.dk>

Sorry for leaving this one in my mail box for so long, but - well, I
suppose you know what I mean.

(I'm shifting it over to r-devel, so I'll include all your original
text)  

Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

> Well, ctest is not making progress as quickly as I wanted it ...
> Anyway, here are a few questions/remarks.
> 
> * I am still a bit confused about what binom.test() does.  For which
> test are the p-values computed?  In theory, ``the'' test to use would be
> the optimal unbiased one for one-parameter exponential families, which I
> think is not used ... also, this would be a randomized test, how is the
> p-value for such a test defined?  I should really appreciate someone
> helping me out on this.

I really don't think we should do randomized tests, except possibly as
an option. Different people getting different p-values for the same
data??

If one must do it, I conjecture that one could get a "p-value" by
looking at x + runif(1,-.5,.5) and linearly interpolating between - er,
draw a picture of the density of the modified x and think about it...

> * I would still like to come up with rather general functions for
> 	location.test()
> 	scale.test()
> and perhaps some more ...  Some time ago, Peter and Tony Rossini and I
> had quite a vivid exchange of emails on this, but I seem to have lost
> our final findings (in case we ever got this far).
> 
> Anyway, any input on this would be great.  Remember, the basic idea was
> to have a unified approach to e.g. several non-parametric tests for a
> difference in location or scale (rather than having mood.test,
> ansaribradley.test, vanderwaerden.test, ...).  However, as PD pointed
> out, it would be a bad idea to use this general scheme for tests which
> don't really fit in there (such as the Wilcoxon tests).  In fact, I seem
> to remember that one issue was whether there are any tests which really
> are location or scale tests ...

I think the main point was that they're not *median* tests,
(irrespective of what the SAS output says!) "Location test" is
probably OK. My basic worry was the risk of losing the simplicity of
having well known standard tests called simply t.test(),
wilcoxon.test(), in favour of a perhaps unnecessarily abstract
taxonomy. Of course there's always the possibility to do things like

spearman.test(...) <- function(...) cor.test(..., method="spearman")

etc.

> * Speaking of the Wilcoxon tests, I still need to add exact computations
> for the small-sample cases.  Does anyone have code or algorithms for
> doing that?

Signed rank is trivial, you just generate the 2^k different sign
patterns and look at the distribution of the sums. Even in interpreted
code, this can be done for k up to 16 or so, at which point the
difference from the approximation is immaterial. The bit patterns are
simply all binary numbers between 0 and 2^k-1.

The two-sample case is a bit more unwieldy...

> 
> * I also mentioned some time ago that I'd like to make Fisher's test
> available for tables larger than 2 by 2.  There is an implementation
> (FEXACT) of the Mehta and Patel algorithm available via APSTAT (I
> think).  However, when I last used it (for an association analysis of a
> gene with 12 alleles) it could not deal with the ``large'' 12 by 2
> table.  (More precisely, it can deal with it after enlarging some size
> parameters in the sources and recompiling, but that's not the smart
> wayof doing things ...)  Again, does anyone have a suggestion what to do
> here?  (FEXACT has a ``mixed'' method of dealing with larger tables, but
> it seems stupid to have an R function which may produce a message like
> ``no, I need more memory ... please try to change param XYZ and then
> recompile''.)

If one can precompute the size of the array, one can usually allocate
it in R and pass it as a parameter instead.

As you know, *my* main desires for ctest is to allow model formula
specifications for all of the common tests (for consistency), and in
the slightly longer run also include trend tests and stratification.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sun Jan 11 20:32:41 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Sun, 11 Jan 1998 14:32:41 -0600 (CST)
Subject: "precise description" in output of prompt()
Message-ID: <m0xrU3l-000hhBC@franz.stat.wisc.edu>

The output of prompt(function) includes the line
 \description{
  ~~ A precise description of what the function does. ~~
 }
Should that be "concise" rather than "precise"?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 11 21:21:37 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Jan 1998 22:21:37 +0100
Subject: "precise description" in output of prompt()
In-Reply-To: Douglas Bates's message of Sun, 11 Jan 1998 14:32:41 -0600 (CST)
References: <m0xrU3l-000hhBC@franz.stat.wisc.edu>
Message-ID: <x21zyeogf2.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> 
> The output of prompt(function) includes the line
>  \description{
>   ~~ A precise description of what the function does. ~~
>  }
> Should that be "concise" rather than "precise"?

I don't think so. That would be what goes in \title. Perhaps
"detailed"? 

Of course, I don't have English as my mother tongue. Er, I mean, I do,
actually, literally, but my native language is Danish...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Sun Jan 11 23:58:57 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Mon, 12 Jan 1998 12:58:57 +1300 (NZDT)
Subject: matrix multiply
Message-ID: <199801112358.MAA08468@stat1.stat.auckland.ac.nz>

A long time ago thomas noted:

----------------------------------------------------------------------
TASK:   Matrix multiply problems
STATUS: Open
FROM:   <thomas@biostat.washington.edu>
        Both of these used to work and seem useful and harmless (and work in S):
        R> matrix(1,ncol=1)%*%c(1,2)
        Error in matrix(1, ncol = 1) %*% c(1, 2) : non-conformable arguments
        R> matrix(1,ncol=1)*(1:2)
        Error: dim<- length of dims do not match the length of object

----------------------------------------------------------------------

 I have fixed both of these. In the second case all binary ops now
 behave in this manner. In the first case only %*% has been "fixed".
 
 
 robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Jan 12 14:49:53 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 12 Jan 1998 08:49:53 -0600
Subject: Symbolic derivation
In-Reply-To: Wenyaun Xi's message of Sun, 11 Jan 1998 20:38:27 -0700 (MST)
References: <Pine.SOL.3.90.980111202649.3948A-100000@keynes.econ.utah.edu>
Message-ID: <6roh1hg31q.fsf@franz.stat.wisc.edu>

Wenyaun Xi <xi@keynes.econ.utah.edu> writes to S-news:

> I ran into some problems when I tried to get symbolic derivation by 
> using a function deriv3(). The expression contains 18 
> parameters, of which I want to have an information matrix eventually. I 
> ran it on my 200MHz Pentium PC with 64meg RAM. Each time I kick out the 
> job, the S-plus 3.1 for Windows stops after about 2 hour of real time 
> and suggests that it requires more memory(size varies each time) in 
> addition to those already in use. I don't know if this is a memory related 
> problem or there is a whole different issue involved here other than the 
> memory.

May I suggest sending a message on this to R-devel@stat.math.ethz.ch?
I am sending a cc: of this message to that group.

R is a freely available language that behaves like S but has a
fundamentally different underlying implementation.  It is possible
that your problem that causes difficulty in S will be easier to run in 
R.  The issues are probably memory related and R does "garbage
collection" but S does not.  Also, deriv in R is implemented in the
underlying C code rather than in the S code.

If you want to install R yourself you can check the CRAN
(Comprehensive R Archive Network) sites.  One close to you is
	   ftp://ftp.biostat.washington.edu/mirrors/R/CRAN/
Otherwise, you could post the call to deriv3() that you are trying to
evaluate to the R-devel list and someone could try to run it for you.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 12 16:38:16 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 12 Jan 1998 17:38:16 +0100
Subject: Default device instead of ``No graphics device is active''
Message-ID: <199801121638.RAA01160@sophie.ethz.ch>

in RHOME/src/ :
	grep DevInit */*.[ch]
reveals only a few calls such as

	if(!DevInit) error("No graphics device is active\n");

(in graphics/graphics.c  and  main/par.c).

Couldn't we startup a default device instead of having the error message?

The Default device would be

	Unix, interactive:	x11
	Unix, batch:		postscript
	
	Win,  interactive:	windows
	Win,  batch:		postscript ??

	Mac,  interactive:	macintosh
	Mac,  batch:		postscript  ????

[ one could even  define

	default.device <- x11		
  in Rprofile.unix, etc.

 and have the same .First function  
	(which could be moved out of profile to base

  .First <- function() if(interactive()) default.device()
]

-- If I remember properly, this is also  how S4 behaves..

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jan 12 17:02:12 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jan 1998 18:02:12 +0100
Subject: Default device instead of ``No graphics device is active''
In-Reply-To: Martin Maechler's message of Mon, 12 Jan 1998 17:38:16 +0100
References: <199801121638.RAA01160@sophie.ethz.ch>
Message-ID: <x2d8hx62y3.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> Couldn't we startup a default device instead of having the error message?

Very good idea!

> The Default device would be
> 
> 	Unix, interactive:	x11

or: "none" (or "printer"???) if DISPLAY not set, or maybe customizable
(sometimes you really don't want it, e.g. when connected to Auckland
from Europe...)

>   .First <- function() if(interactive()) default.device()

Actually, it might be a better idea to use this to *get rid* of the
initial graphics startup. I, for one, tend to get annoyed at seeing
the window popup, even when what I am trying to do has nothing to do
with graphics. Having to place it manually doesn't help...

While we're at this, how about making it possible to override the
printer and device orientation in print.plot() and save.plot()?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Jan 12 17:07:12 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 12 Jan 1998 09:07:12 -0800 (PST)
Subject: Default device instead of ``No graphics device is active''
In-Reply-To: <199801121638.RAA01160@sophie.ethz.ch>
Message-ID: <Pine.SUN.3.95.980112090129.4431B-100000@chekov>

On Mon, 12 Jan 1998, Martin Maechler wrote:

> in RHOME/src/ :
> 	grep DevInit */*.[ch]
> reveals only a few calls such as
> 
> 	if(!DevInit) error("No graphics device is active\n");
> 
> (in graphics/graphics.c  and  main/par.c).
> 
> Couldn't we startup a default device instead of having the error message?

yes, though I think the default device for batch processing should do
nothing or just emit warnings -- if postscript() is the default then you
might overwrite the previous contents of an output file. At least if it is
going to be postscript() it should use a unique file name. 

It should be relatively easy to define a none() device that does
absolutely nothing (a simple but inefficient one would be
postscript("/dev/null") under Unix)

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 13 17:08:40 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 13 Jan 1998 18:08:40 +0100
Subject: par2(..) ? -- only used in library(mva)..
Message-ID: <199801131708.SAA02573@sophie.ethz.ch>

src/library/base/R/par

	still defines  par2(.) which is not used anymore ..
	in the base package.

This (undocumented) function had been introduced around 0.49 or so.
I'm guessing that its intent is to be used from
high-level plotting functions for setting parameters specified by the
 "..." arguments.

Since (at least) 0.61,  par2(.) has been eliminated from all the
library/base/R/ code.
However it IS still used in  src/library/mva/R/hclust and ......./mva

Ross, Paul, ??
can we decide if this function is  needed / useful enough to be part of R
``properly'' (i.e. including documentation), or 
was it just a convenience kludge that should be eliminated ASAP?

--
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 13 17:26:51 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 13 Jan 1998 18:26:51 +0100
Subject: funny axis ranges;  GPretty(.) vs.  pretty(.) and all that...
Message-ID: <199801131726.SAA02683@sophie.ethz.ch>

[This is something like a bug report;
 maybe somewhat longish & technical ..]

As an introduction, just try the following code
(it should work both in R and S).
I think it screws up the postscript() driver both for S and R, but this is
not the issue here.


is.R <- function() { ## returns  'TRUE'  iff we are using 'R'
  exists("version") && !is.null(vl <- version$language) && vl == "R"
}

p.axis.range <- function(k.set = c(-100,-9:-6,-3,3,5,20),
                         y.k.add = 1)
{
  ## Purpose: Plot axis scaling & labeling with funny range(.)
  ## -------------------------------------------------------------------------
  ## Arguments: k.set: (0, 10^k  will be the ranges
  ## -------------------------------------------------------------------------
  ## Author: Martin Maechler, Date: 12 Jan 98, 18:15

  lk <- length(k.set); slk <- ceiling(sqrt(lk))
  op <- par(mfrow=c(slk,slk), mar = .2+c(3,2,1,1), oma=rep(1,4))
  on.exit(par(op))
  ##        oma does not really work
  if(is.R()) { colx <- rainbow(lk); coly <- terrain.colors(lk)
             } else colx <- lk + (coly <- 1:lk)
  for(i in 1:lk) {
    k <- k.set[i]
    if(is.R()) {
      plot.new()
      plot.window(xlim= c(0,10^ k),
                  ylim= c(0,10^(k+y.k.add)),"")
      box(lty='dashed')
    } else { ## S4 and S-plus
      plot.default(0,0,xlim= c(0,10^ k), ylim= c(0,10^(k+1)),
                   type = 'n', xlab='', ylab='')
    }
    cat("\n--------------------------------\n\n",
        "xlim= c(0, 10^", k,")    ==> par('usr')[1:2]=", par("usr")[1:2],"\n")
    par(col=colx[i]); if(is.R()) axis(1, col.axis= colx[i]) else axis(1)
    mtext(paste("xlim= (0, 10^",k,")",sep=""),	       line=-4)
    par(col=coly[i]); if(is.R()) axis(2, col.axis= coly[i]) else axis(2)
    mtext(paste("ylim= 10^",y.k.add," * xlim",sep=""), line=-6)
    par(col=if(is.R())'black' else 1)
    mtext(paste("par(\"usr\")= 10 ^", k," *"), line= -9, cex= .4)
    mtext(paste(format(par("usr")*10^-k),collapse=",  "), line= -11, cex= .3)
  }
  invisible(NULL)
}

p.axis.range()

##-----------------------------------------------------------------------------

##>> Now, what's going on? [in R, don't know for S; this all hidden in 
##>> 			calls such as 
##>> 			.Internal(.Cur.picture(), "S_cur_pic", T, 1) ]

## The main problem is  GPretty() in  $RHOME/src/graphics/graphics.c !

##R: plot.default()  -->   plot.new();  plot.window(xlim, ylim, log)

##C: 1:  do_plot_window()   in  $RHOME/src/main/plot.c

##		checks its arguments and then
##		GCheckState(); GScale(xmin, xmax, 1); GScale(ymin, ymax, 2);

##   2:  GScale(.)	    in $RHOME/src/graphics/graphics.c

##		checks args; sets up 'xmin', 'xmax' depending on 'log',..axt'
##		then  GPretty(&xmin, &xmax, &n);
##		      ~~~~~~~
##		and puts its result  in  GP->[x/y]axp  -- i.e. par("xaxp") or y.

##   3:  GPretty(.)   [also in ...graphics.c  is SIMILAR to but different from
##		       		$RHOME/src/appl/pretty.c
##		       which is called from
##		       		$RHOME/src/library/base/R/pretty

##	uses  FLT_EPSILON  (/usr/include/float.h)  in 3 places, where the above
##	pretty(.)  uses FLT_EPSILON only once ...
##
## Why use it at all (the way it is done)?
##
## S-plus's  pretty(.) is quite different;   also the  p.axis.range(.) below:
## ---> Comparison of  pretty(.) and Gpretty(.)  : see below.

So it's the  FLT_EPSILON which is about 1e-7,
and leads to the funny  -1e-7, +1e-7  axis ranges.

%%>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>
%%>=>  Questions/Remarks						     %%
%%>=>  									     %%
%%>=>  1) Why (and how if..) should GPretty(.) be different from pretty?     %%
%%>=>  									     %%
%%>=>  2) Couldn't we at least replace FLT_EPSILON  by DOUBLE_EPSILON ?	     %%
%%>=>  									     %%
%%>=>  3) axis(.) still has another bug: it draws the line and writes labels %%
%%>=>  	   OUTSIDE the "usr" coordinates.				     %%
%%>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>



###------ Try the following code to find out about the differences
###------ of the 2 versions of  pretty(.) : ------------------------

Cpretty <- Cpretty1 <- function (x, n = 5)
  unlist(.C("pretty", l = min(x), u = max(x), n = as.integer(n)))
Cpretty2 <- function (x, n = 5) {
  ##-- return what  .C("pretty... doe
  n <- length(p <- pretty(x,n))
  c(l=p[1], u=p[n], n=n-1)
}

Cpretty(pi)
all(Cpretty1(pi) == Cpretty2(pi))
all(Cpretty1(c(0,pi)) == Cpretty2(c(0,pi)))
for(i in 1:100) {
  x_c(runif(1),pi)
  for(k in -14:14) {
    ok <- all(Cpretty1(x*10^k) == Cpretty2(x*10^k))
    if(!ok) cat("NOT ok:  x=",deparse(x)," k=",k,"\n")
  }
}

Gpretty <- function (x, n = 5)
{
  plot.new(); op <- par(); on.exit(par(op))
  par(lab=c(n, par("lab")[-1]))
  plot.window(xlim=c(min(x),max(x)), ylim=0:1, "")
  par("xaxp")
}

##--- Gpretty() and Cpretty() are DIFFERENT much more than the same !!! -------

vcat <- function(vec, sep = " ", dig=2)
  paste(formatC(vec, dig=dig), collapse = sep)

show.ok <- TRUE
show.nok <- TRUE
show.nok <- !show.ok
for(i in 1:100) {
  x <<- sort(c(runif(1),4*rexp(1)))
  n <- max(1, rpois(1,lam=3))
  cat("\n")
  for(k in -14:14) { cat(".")
    ok <- all((cp <- Cpretty(x*10^k,n=n)) == (gp <- Gpretty(x*10^k,n=n)))
    if(!ok && show.nok) cat("NOT the same:  n=",n,"x=",vcat(x)," k=",k,
                "; Cp=",vcat(cp), " Gp=",vcat(gp),"\n")
    else if(ok && show.ok) cat("the same:  n=",n,"x=",deparse(x)," k=",k,
                              ";  Cp=Gp=",vcat(cp),"\n")
  }
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Jan 14 14:28:09 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 14 Jan 1998 15:28:09 +0100
Subject: New features in Rd format
Message-ID: <199801141428.PAA19087@galadriel.ci.tuwien.ac.at>


I have added the following features to the Rd format:

* Sd output format as contributed by Doug Bates ... this should create
help files for S[+] from Rd files

* New sections Format and Source ... both are necessary for
documentation of data files (these are not supported by Sd yet, but
should work for html, nroff and latex)

E.g., the documentation source for the acid data now looks like:

**********************************************************

\name{acid}
\title{Determination of Formaldehyde}
\usage{data(acid)}
\format{A data frame with 6 observations on 2 variables.

  \tabular{rlll}{
  [,1]  \tab carb  \tab numeric  \tab Carbohydrate (ml) \cr
  [,2]  \tab opt   \tab numeric  \tab Optical Density \cr
  }
}
\description{These data are from an chemical experiment to prepare a standard cur
ve
for the determination of formaldehyde by the addition of chromatropic
acid and concentrated sulpuric acid and the reading of the resulting
purple color on a spectophotometer.

}
\source{Bennett, N. A. and N. L. Franklin (1954).  Statistical analysis in
Chemistry and the Chemical Industry.  New York: Wiley
}
\references{McNeil, D. R. (1977).  Interactive Data Analysis.  New York: Wiley.
}


**********************************************************


Eventually all data files will be documented using the Rd format
... it just needs somebody with some extra time ...


Best,
Fritz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 14 14:53:29 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 14 Jan 1998 15:53:29 +0100
Subject: system.file(..) :  Any reason why it should not work with wildcards?
Message-ID: <199801141453.PAA03685@sophie.ethz.ch>

{BTW:  there's still no docu. for it}

Do you see any reason why
system.file() should not work with wildcards?

Currently, it just returns the first file found.
The obvious change to make would be to erase "; exit 0"
in RHOME/cmd/filename

-- If nobody objects, I'll do the change .. --

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 14 16:38:53 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 14 Jan 1998 11:38:53 -0500
Subject: DSE alpha
Message-ID: <98Jan14.114356est.13445@mailgate.bank-banque-canada.ca>

I have a  version of my DSE time series library working in R 0.61.1 under
Solaris, but have had a few minor problems making a tar file to test at home
under Linux. I think I have it fixed now, but since there is a one day
turnaround on this process it may slow me down even more than the ice storm and
the power outages. I would like to test if things work on some other OSs before
I put this on CRAN. Could someone please

ftp data.bank-banque-canada.ca
logon as anonymous
cd pub/pgilbert
get dse.v.98.1alpha.tar
(Beware there is also a dse.v.98.1alpha.tar.gz but this seems to have been
  mangled by the firewall? and does not uncompress)

then
tar xf dse.v.98.1alpha.tar
cd Rdse
run the INSTALL script (several R INSTALLs)
and run the script test.dse.lite (I'll fix English spellings later.) which
starts R, attaches libraries, and runs many tests.

Also, if anyone would like to try compiling the fortran or C under Windows and
installing, I would appreciate knowing how that works.

Thanks.
Paul Gilbert




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 15 11:13:13 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 15 Jan 1998 12:13:13 +0100
Subject: debugging dynamically loaded code
Message-ID: <199801151113.MAA01121@galadriel.ci.tuwien.ac.at>


How can I debug code that I load at runtime?

Currently I do the following:

	load R.binary into gdb
	run
	load shared object code using dyn.load()
	quit the R process

from then on gdb seems to be smart enough such that the source code
of the .so file is available and I can set breakpoints etc.

however, when I restart the R process I get:

(gdb) break printing.c:7
Breakpoint 1 at 0x407af036: file printing.c, line 7.
(gdb) run
Starting program: /usr/local/lib/R/bin/R.binary
Cannot insert breakpoint 1:
Temporarily disabling shared library breakpoints:


i.e., all breakpoints are disbled and I cannot figure out how to
enable them again (even after inserting the .so object).

Am I missing anything?

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan 15 14:54:38 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Jan 1998 08:54:38 -0600
Subject: debugging dynamically loaded code
In-Reply-To: Friedrich Leisch's message of Thu, 15 Jan 1998 12:13:13 +0100
References: <199801151113.MAA01121@galadriel.ci.tuwien.ac.at>
Message-ID: <6rbtxdwzwx.fsf@franz.stat.wisc.edu>

The secret of symbolic debugging of dynamically loaded code is to
 - Call the debugger on the R executable.  Since I do this within
   emacs, I don't use the "R gdb" facility, I symbolically link the
   R.binary file into the directory with my code and call the debugger 
   through M-x gdb.
 - Set the environment variables that the $RHOME/bin/R script would.
 - Start the R program.
 - At the R prompt, use dyn.load() to load your library.
 - Send an interrupt signal.  Inside of gud mode in emacs, I think you 
   send C-C C-C.  This will put you back to the debugger prompt.
 - Set the breakpoints in your code.
 - Continue execution of R by typing "signal 0<ret>".

As I mentioned above, I find it easiest to use the directory with my
code in it as the cwd and then make a symbolic link from that
directory to the R executable.  That way the .gdbinit can stay in the
directory with the code and be used to set up the environment and the
search paths for the source.

A sample .gdbinit would be
 set env RHOME /usr/lib/R
 set env R_PAPERSIZE letter
 set env R_PRINTCMD lpr
 dir /usr/lib/R/src/main
 dir /usr/lib/R/src/math
 dir /usr/lib/R/src/appl
 dir /usr/lib/R/src/unix

It is possible that those last lines could be written as
 dir $(RHOME)/src/main
instead.  I haven't tried it out.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 15 15:13:16 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 15 Jan 1998 10:13:16 -0500
Subject: $CRAN/src/contrib/devel
References: <199712221638.RAA16954@galadriel.ci.tuwien.ac.at>
Message-ID: <98Jan15.101848est.13451@mailgate.bank-banque-canada.ca>

Friedrich

I've tested my DSE library under Solaris and Linux and I'm ready to put a tar.gz
on
CRAN/src/contrib/devel. How do I do that? I apologize, I know you've explained
this before, but I can't find the instructions.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 15 15:20:59 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 15 Jan 1998 16:20:59 +0100
Subject: $CRAN/src/contrib/devel
In-Reply-To: <98Jan15.101848est.13451@mailgate.bank-banque-canada.ca>
References: <199712221638.RAA16954@galadriel.ci.tuwien.ac.at>
 <98Jan15.101848est.13451@mailgate.bank-banque-canada.ca>
Message-ID: <199801151520.QAA02069@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 15 Jan 1998 10:13:16 -0500,
>>>>> Paul Gilbert (PG) wrote:

PG> Friedrich
PG> I've tested my DSE library under Solaris and Linux and I'm ready to p=
ut a tar.gz
PG> on
PG> CRAN/src/contrib/devel. How do I do that? I apologize, I know you've =
explained
PG> this before, but I can't find the instructions.

Ooops, there's really nothing about uploading in the html pages, only
in the mirrors page and that's not the obvious place to look at
... I'll change that a.s.a.p.

just put it into

	ftp://ftp.ci.tuwien.ac.at/incoming

and drop a note to wwwadmin@ci.tuwien.ac.at

best,
fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan 15 15:47:39 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Jan 1998 09:47:39 -0600
Subject: $CRAN/src/contrib/devel
In-Reply-To: Friedrich Leisch's message of Thu, 15 Jan 1998 16:20:59 +0100
References: <199712221638.RAA16954@galadriel.ci.tuwien.ac.at> 	<98Jan15.101848est.13451@mailgate.bank-banque-canada.ca> <199801151520.QAA02069@galadriel.ci.tuwien.ac.at>
Message-ID: <6ryb0hviw4.fsf@franz.stat.wisc.edu>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> Ooops, there's really nothing about uploading in the html pages, only
> in the mirrors page and that's not the obvious place to look at
> ... I'll change that a.s.a.p.

The instructions are in the FAQ.

(Imagine that - someone actually read at least part of the FAQ!  What
a novel idea.)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 15 17:01:29 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 15 Jan 1998 12:01:29 -0500
Subject: $CRAN/src/contrib/devel
References: <199712221638.RAA16954@galadriel.ci.tuwien.ac.at> 	<98Jan15.101848est.13451@mailgate.bank-banque-canada.ca> <199801151520.QAA02069@galadriel.ci.tuwien.ac.at> <6ryb0hviw4.fsf@franz.stat.wisc.edu>
Message-ID: <98Jan15.120707est.13441@mailgate.bank-banque-canada.ca>

Doug

>> Ooops, there's really nothing about uploading in the html pages, only
>> in the mirrors page and that's not the obvious place to look at

>The instructions are in the FAQ.
>(Imagine that - someone actually read at least part of the FAQ!  What
>a novel idea.)

I did look in the FAQ, which I usually find very useful, but even checking it
again I don't see these instructions. I must be going blind in my old age.
Perhaps I'm using the wrong version of the FAQ. Just exactly which FAQ are you
reading and where do you see these instructions?

(BTW - Thanks for your clarification on R INSTALL pkg lib, which I was also
following from the FAQ, but I made some wrong assumptions. I didn't think that
INSTALL actually needed to copy things since all the structure was already in
pkg, so I was quite confused.)

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan 15 19:17:27 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 15 Jan 1998 13:17:27 -0600 (CST)
Subject: a -nographics option to R
Message-ID: <m0xsun9-000hiQC@franz.stat.wisc.edu>

Right now the standard R.profile assigns the .First function as

 .First <- function() {
   if (interactive() && getenv("DISPLAY") != "") x11()
 }

Is it reasonable to extend that a bit and use

 .First <- function() {
   if (interactive() && getenv("DISPLAY") != "" && ! (getenv("R_NOX") != "")) x11()
 }

or something like that then put a -nographics flag into the R script
that would set R_NOX.  I am encountering the same kind of difficulty
that Peter Dalgaard mentioned when working remotely over a slow
connection.  I'm just checking that the compiled R works properly on
the other computer and I don't want to wait for it to spring up the
X11 window every time it starts.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 15 20:17:55 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Jan 1998 21:17:55 +0100
Subject: a -nographics option to R
In-Reply-To: Douglas Bates's message of Thu, 15 Jan 1998 13:17:27 -0600 (CST)
References: <m0xsun9-000hiQC@franz.stat.wisc.edu>
Message-ID: <x24t35lcek.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> that would set R_NOX.  I am encountering the same kind of difficulty
> that Peter Dalgaard mentioned when working remotely over a slow
> connection.  I'm just checking that the compiled R works properly on
> the other computer and I don't want to wait for it to spring up the
> X11 window every time it starts.

The current plans are to get rid of the initial graphics startup
altogether and make the plot commands do it automagically instead of
faulting when there's no graphics device. (We seem to have committed
our usual sin of discussing things in R-core that might as well have
been discussed on R-devel.)

BTW: If it's ssh that does this to you, note that it has a config file
that can turn the X transport off. If it's telnet, I wouldn't know,
but you might murder the DISPLAY setting by invoking as

DISPLAY= R

(which, incidentally, is fewer keypresses than "R -nographics"...)

Requires an sh-family shell, though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Jan 16 07:17:32 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 16 Jan 1998 08:17:32 +0100
Subject: Packages for RedHat 4.2, Debian 1.3
Message-ID: <199801160717.IAA10104@galadriel.ci.tuwien.ac.at>

Doug Bates has succeeded in building rpm's for RedHat 4.2:

>>>>> On Thu, 15 Jan 1998 14:57:22 -0600 (CST),
>>>>> Douglas Bates (DB) wrote:

DB> I finally got r-base to build on a Debian 1.3 machine.  The
DB> r-base_0.61.1-1_i386.deb file now in the incoming area is for 1.3.

These are on CRAN now.

DB> I also got an .rpm for RedHat 4.2 to build.  It looks like it does no=
t
DB> have any problematic dependencies.  I will upload it, too.  It may be
DB> a good idea to have someone try to install it on a RedHat 4.2 machine
DB> before putting it into CRAN.  What do you think?

Yes, it might save us a couple of (correctly) complaining emails ...

I have put the RedHat 4.2 packages into

	ftp://ftp.ci.tuwien.ac.at/outgoing

Could someone running RH 4.2 system please check them and email me
(and Doug) if they can be put onto CRAN? Thanks in advance!

Best,
Fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 15:02:17 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jan 1998 09:02:17 -0600
Subject: ESS-mode and X-emacs problem
In-Reply-To: kim.pilegaard@risoe.dk's message of Fri, 16 Jan 1998 08:40:10 -0100
References: <9801160940.AA07107@eco-sun.risoe.dk>
Message-ID: <6r7m80pime.fsf@franz.stat.wisc.edu>

kim.pilegaard@risoe.dk (Kim Pilegaard) writes:

> When I try to invoke R from xemacs I get the following responses:
> 
> ESS starting data directory? ~/
> 
> "Process R is not running". 
> 
> This is what the R buffer shows:
> 
> R : Copyright 1997, Robert Gentleman and Ross Ihaka
> Version 0.61.0 Alpha (December 21, 1997)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type	"license()" for details.
> 
> Type	"demo()" for some demos, "help()" for on-line help, or
> 	"help.start()" for a HTML browser interface to help.
> 
> "TERMCAP", line 0, terminal 'emacs': /usr/share/terminfo: permission denied
> 
> Process R exited abnormally with code 1 at Fri Jan  9 08:11:59 1998
> 
> R runs correct from the shell and is installed as /usr/local/bin/R.
> I am running Linux 2.0, Xemacs 19-14 and R-0.61.

It looks like R is trying to run with the readline history facilities
started.  It shouldn't do this when you are running under ESS.

One quick fix might be to install a terminfo entry for the "emacs" 
terminal type but I'm not sure how you do that.

I had thought that when ESS started the R process it should send the
-noreadline flag to it.  From the R manual page

       The following options are present to support the use of  R
       from  other  programs.   In  particular,  the  -noreadline
       option exists so that R can  be  run  under  emacs(1)  and
       xemacs(1) using ESS.

       -noreadline
              Turn  off  the  use of the readline(3) command line
              editing.

If R is getting the -noreadline flag properly then my guess is that
the call to initialize the readline library (probably in
$RHOME/src/unix/system.c) is not being protected by an if statement
that checks for this flag.

Earlier I reported a problem in $RHOME/src/unix/system.c that some
ifdef's were checking for HAVE_READLINE_HISTORY_H but that variable
was not being defined by the autoconfigure script.  I'm not sure if
that has been corrected yet.

When I was looking for those definitions I noticed the
autoconfiguration on the version I compiled for Debian Linux 2.0 does
not set HAVE_READLINE but that version on Debian Linux 1.3 does.  This 
looks like another autoconfigure problem. 
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 15:13:39 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jan 1998 09:13:39 -0600
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: Friedrich Leisch's message of Fri, 16 Jan 1998 10:14:34 +0100
References: <199801160914.KAA25868@galadriel.ci.tuwien.ac.at>
Message-ID: <6r67nkpi3g.fsf@franz.stat.wisc.edu>

Goran Brostrom <gb@stat.umu.se> writes:

> I tried it on my newly installed RH 4.2 system (as root):
> 
> # rpm -i r-base-.....rpm
> failed dependencies:
>      /usr/bin/perl is needed by r-....
>      /bin/sh  is needed by r-....
>      /bin/sh     is needed by r-...
> 
> I have those guys, and I was running sh. I guess that I don't know enough
> about RedHat and rpms (I know nothing...). What is the correct way to=20
> do the installation?
> 
> G|ran Brostr|m
> Statistics Department
> Umea University, Umea, Sweden

You may be able to install it with
 rpm -i --nodeps r-base-....rpm

My problem in making these packages is that I generate them under
Debian GNU/Linux as .deb packages then use an automatic transformation
program to create the RedHat Linux .rpm packages.  Since I don't use
rpm for installation myself it is difficult for me to test them.  I
know what the Debian package installer does when it checks
dependencies but I don't know where rpm looks to satisfy dependencies.

Maybe we can try a bit more with installation of the RedHat packages
and if people are still encountering problems like this then we'll
punt and ask others to build the .rpm packages on RedHat systems.

The reason I wanted to keep the Debian and RedHat packages in sync was 
that it makes the organization of the directories, etc. consistent so
it is easier to track down bugs.  Also, I had hoped it would avoid
some duplication of effort.  That may not be the case.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 15:27:27 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jan 1998 09:27:27 -0600
Subject: ESS-mode and X-emacs problem
In-Reply-To: Douglas Bates's message of 16 Jan 1998 09:02:17 -0600
References: <9801160940.AA07107@eco-sun.risoe.dk> <6r7m80pime.fsf@franz.stat.wisc.edu>
Message-ID: <6rzpkwo2w0.fsf@franz.stat.wisc.edu>

Douglas Bates <bates@stat.wisc.edu> writes:

> It looks like R is trying to run with the readline history facilities
> started.  It shouldn't do this when you are running under ESS.
> 
> One quick fix might be to install a terminfo entry for the "emacs" 
> terminal type but I'm not sure how you do that.
> 
> I had thought that when ESS started the R process it should send the
> -noreadline flag to it.  From the R manual page
> 
>        The following options are present to support the use of  R
>        from  other  programs.   In  particular,  the  -noreadline
>        option exists so that R can  be  run  under  emacs(1)  and
>        xemacs(1) using ESS.
> 
>        -noreadline
>               Turn  off  the  use of the readline(3) command line
>               editing.
> 
> If R is getting the -noreadline flag properly then my guess is that
> the call to initialize the readline library (probably in
> $RHOME/src/unix/system.c) is not being protected by an if statement
> that checks for this flag.

Maybe I pointed the finger in the wrong direction.  I don't see that
the -noreadline flag is being passed to R when invoked by ESS.
 cd /usr/lib/xemacs/site-lisp/ESS-5.0/
 grep -n noreadline *.el /dev/null
 # no responses.

Try starting R by
C-u M-x R
and when it asks for "Starting Args ?" put in the -noreadline flag.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 15:36:41 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Fri, 16 Jan 1998 09:36:41 -0600 (CST)
Subject: mtp2R.pl
Message-ID: <m0xtDp3-000hiQC@franz.stat.wisc.edu>

I received some large data sets in Minitab Portable Worksheet (.mtp)
format and wanted to read them into R.  Here is a _first cut_ at a
perl script that transforms .mtp files into something that can be
read by R. Comments, bug-fixes, enhancements and extensions are welcome.

#!/usr/bin/perl

# Convert a Minitab Portable Worksheet to an R (or S-PLUS) list structure

# $Id: mtp2R.pl,v 1.1 1998/01/16 15:33:27 bates Exp $
# Copyright (C) 1998 Douglas M Bates
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2, or (at your option)
# any later version.
#
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.	See the GNU
# General Public License for more details.
#
# A copy of the GNU General Public License is available via WWW at
# http://www.gnu.org/copyleft/gpl.html.	 You can also obtain it by
# writing to the Free Software Foundation, Inc., 675 Mass Ave,
# Cambridge, MA 02139, USA.

# Send any bug reports to Douglas Bates <bates@stat.wisc.edu>

require 5.003;
use strict;
use Carp;

for ( @ARGV ) {
    open( MTP, "< $_" ) ||
        carp( "Unable to open $_ for reading: $!\n" );
    s/\.mtp$/.R/i;
    open( R, "> $_" ) ||
        carp( "Unable to open $_ for writing: $!\n" );
    my $line = <MTP>;
    carp( "Input does not seem to be in Minitab Portable Format\n" )
	unless ( $line =~ /^Minitab Portable Worksheet/ );
    print R "# R data file automatically created by mtp2R\n";
    s/\.R$//;
    print R "\"$_\" <- list(\n";
    my $initial = 1;
    while (1) {
	last unless ( $line = <MTP> );
	carp( "Incorrect format\n" ) unless ( $line =~ /^%/ );
	my ($pct, $colmat, $number, $length, $NAs, $name) =
	    split(' ', $line );
	next if ( 100 <= $colmat && $colmat <= 102 );
	print R ",\n" unless $initial;
	$initial = 0;
	$name = "C" . $number if ( $name =~ /^\.$/ );
	print R "$name = c(\n";
	my $width = 16;
	$width = -$NAs + 1 if ( $NAs < 0 );
	while ( $length > 0 ) {
	    $line = <MTP>;
	    chomp $line;
	    chop $line if ($line =~ /\r$/); # Generated on DOS/Windows
	    chop $line if ($line =~ /\.$/);
	    while ( length( $line ) >= $width && $length) {
		my $value = substr( $line, 0, $width );
		$line = substr( $line, $width );
		$value =~ s/^\s+//;
		$value =~ s/\s+$//;
		if ( $NAs < 0 ) { print R "\"$value\""; } else { print R 0+$value; }
		$length--;
		print R ", " if $length;
	    }
	    print R "\n";
	}
	print R ")";
    }
    print R ")\n";
    close ( MTP );
    close ( R );
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Jan 16 15:42:08 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 16 Jan 1998 16:42:08 +0100
Subject: debugging dynamically loaded code
In-Reply-To: <6rbtxdwzwx.fsf@franz.stat.wisc.edu>
References: <199801151113.MAA01121@galadriel.ci.tuwien.ac.at>
 <6rbtxdwzwx.fsf@franz.stat.wisc.edu>
Message-ID: <199801161542.QAA28822@galadriel.ci.tuwien.ac.at>

>>>>> On 15 Jan 1998 08:54:38 -0600,
>>>>> Douglas Bates (DB) wrote:

DB> The secret of symbolic debugging of dynamically loaded code is to
DB>  - Call the debugger on the R executable.  Since I do this within
DB>    emacs, I don't use the "R gdb" facility, I symbolically link the
DB>    R.binary file into the directory with my code and call the debugger 
DB>    through M-x gdb.
DB>  - Set the environment variables that the $RHOME/bin/R script would.
DB>  - Start the R program.
DB>  - At the R prompt, use dyn.load() to load your library.
DB>  - Send an interrupt signal.  Inside of gud mode in emacs, I think you 
DB>    send C-C C-C.  This will put you back to the debugger prompt.
DB>  - Set the breakpoints in your code.
DB>  - Continue execution of R by typing "signal 0<ret>".

Thanks a lot ... I did not know about the interrupt signal before
inserting a breakpoint etc.

Best,
Fritz

PS: Thanks also for the S_compat stuff ... now I've got a first
version of [mpf]da up and running ... now it's only the buggy
model.matrix code that troubles me ... but that's a different story!

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 16 15:57:31 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 16 Jan 1998 16:57:31 +0100
Subject: ESS-mode and X-emacs problem  "-noreadline" solution
In-Reply-To: <6r7m80pime.fsf@franz.stat.wisc.edu> (message from Douglas Bates
 on 16 Jan 1998 09:02:17 -0600)
Message-ID: <199801161557.QAA23573@sophie.ethz.ch>


ESS-5.0  does not yet contain the "-noreadline" flag.

ESS-5.0 came out only very shortly after R 0.60,
if "-noreadline" would have been builtin, no R version < 0.60
would have worked....

Here is the patch --- apply it if you are willing to only use  
R versions >= 0.60 (with ESS):

Excuse that I didn't give this answer earlier...

---------------
Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/



--- essd-r.el.~1~	Mon Nov 24 18:26:40 1997
+++ essd-r.el	Fri Dec  5 09:21:17 1997
@@ -92,9 +92,10 @@
    (format "(R): current-prefix-arg=%s \n"
 	   current-prefix-arg))
 
-  (let ((r-start-args  (if start-args (read-string "Starting Args ? ") nil)))
-    (if (not start-args) (inferior-ess)
-      (inferior-ess r-start-args))))
+  (let ((r-start-args  (concat "-noreadline "
+	 (if start-args (read-string
+			 "Starting Args [other than `-noreadline'] ? ") nil))))
+      (inferior-ess r-start-args)))
 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jan 16 16:46:46 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 16 Jan 1998 16:46:46 -0000 ()
Subject: Packages for RedHat 4.2, Debian 1.3
Message-ID: <XFMail.980116174438.plummer@iarc.fr>

On 16-Jan-98 bates@stat.wisc.edu wrote:
>Goran Brostrom <gb@stat.umu.se> writes:
>> I tried it on my newly installed RH 4.2 system (as root):
>> 
>> # rpm -i r-base-.....rpm
>> failed dependencies:
>>      /usr/bin/perl is needed by r-....
>>      /bin/sh  is needed by r-....
>>      /bin/sh     is needed by r-...
>> 
>> I have those guys, and I was running sh. I guess that I don't know enough
>> about RedHat and rpms (I know nothing...). What is the correct way to=20
>> do the installation?

There are two kinds of dependencies:
1) Libraries against which the executable files in a package are linked
2) Programs required by scripts in the package

The version of rpm which ships with RedHat 4.2 (version 2.3) expects
only the first kind of dependency. It can't interpret the entries
/bin/sh ... etc in the dependency list. 

Version 2.4 of rpm _does_ expect both kinds of dependencies, so
one way round this problem is to install the latest version of rpm.
This is available in the directory /redhat-4.2/updates/i386 on
RedHat's ftp site. (Don't pick up the one in the redhat-5.0 directory
as this is linked against libc6 which you don't have). This isn't
a very good solution, but it is a solution. Ultimately you might find it
easier to do the unzip/untar/configure/make procedure.

>My problem in making these packages is that I generate them under
>Debian GNU/Linux as .deb packages then use an automatic transformation
>program to create the RedHat Linux .rpm packages.  Since I don't use
>rpm for installation myself it is difficult for me to test them.  I
>know what the Debian package installer does when it checks
>dependencies but I don't know where rpm looks to satisfy dependencies.

This one is more of a backward compatibility problem. IMHO supporting
old releases of Linux distributions is too difficult. This position may
seem a bit extreme, but Linux evolves in "internet time".

>Maybe we can try a bit more with installation of the RedHat packages
>and if people are still encountering problems like this then we'll
>punt and ask others to build the .rpm packages on RedHat systems.

I remain at your disposal.
Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 16 18:12:32 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 16 Jan 1998 19:12:32 +0100
Subject: data.frame(...) not constructing "1:n" row.names [diff.  S <--> R]
Message-ID: <199801161812.TAA09746@sophie.ethz.ch>

	[I think Doug Bates has already alluded to this, somewhere..]

In R, 	data.frame( ... )

does not construct row.names whereas in S, it does:

R:

> data.frame(x=1:2,y=3:4)
     x y
[1,] 1 3
[2,] 2 4
> row.names(data.frame(x=1:2,y=3:4))
NULL


S-plus:

> data.frame(x=1:2,y=3:4)
  x y 
1 1 3
2 2 4
> row.names(data.frame(x=1:2,y=3:4))
[1] "1" "2"

---------------------------------------------------------------------------

R core: Is there a good reason for this?

Well (as a member of R-core, I give my answer):

	Memory efficiency can be a good reason, actually...
	together with ``cleanness'' :  
		``1:n'' are the IMPLICIT DEFAULT row.names

We could stay at the current way `internally',
but make sure that all functions working on data.frames `d.f'
automatically work as if

	 row.names(d.f)   *was indeed* ==  paste(1:nrow(d.f)

Some of them maybe even are, (lm, glm, and their methods  ??)
but not 'print.data.frame' (a <primitive>)
nor  row.names(.) or dimnames(.) (also <primitive>).
(and if dimnames is fixed, rownames(.) [the one without "."] will also work].

It may well be that it is sufficient to upgrade

	print.data.frame
	dimnames
and	row.names  (which is trivial to fix).

On the other hand,

	attr(d.f, "row.names")    [yet another <primitive> !]

would also have to be fixed for `complete' S compatibility
which is less "clean".


Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 16 18:34:20 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jan 1998 19:34:20 +0100
Subject: data.frame(...) not constructing "1:n" row.names [diff.  S <--> R]
In-Reply-To: Martin Maechler's message of Fri, 16 Jan 1998 19:12:32 +0100
References: <199801161812.TAA09746@sophie.ethz.ch>
Message-ID: <x2lnwgcloz.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> 
> 	[I think Doug Bates has already alluded to this, somewhere..]
> 
> In R, 	data.frame( ... )
> 
> does not construct row.names whereas in S, it does:
...
> R core: Is there a good reason for this?

No.
 
> Well (as a member of R-core, I give my answer):
> 
> 	Memory efficiency can be a good reason, actually...
> 	together with ``cleanness'' :  
> 		``1:n'' are the IMPLICIT DEFAULT row.names
> 
> We could stay at the current way `internally',
> but make sure that all functions working on data.frames `d.f'
> automatically work as if
> 
> 	 row.names(d.f)   *was indeed* ==  paste(1:nrow(d.f)

Ugh. Please, let's avoid implicit stuff. All the special-casing
involved all over the place would soon outweigh the saved storage of a
character vector. We'll get nothing but trouble from it. Just add the
rownames. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jan 16 20:29:04 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 16 Jan 1998 21:29:04 +0100
Subject: data.frame(...) not constructing "1:n" row.names [diff.  S <--> R]
In-Reply-To: <x2lnwgcloz.fsf@blueberry.kubism.ku.dk>
References: <199801161812.TAA09746@sophie.ethz.ch>
 <x2lnwgcloz.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801162029.VAA17133@pc25.none>

>>>>> Peter Dalgaard BSA writes:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
>> 
>> [I think Doug Bates has already alluded to this, somewhere..]

And I did, too ...

>> 
>> In R, 	data.frame( ... )
>> 
>> does not construct row.names whereas in S, it does:
> ...
>> R core: Is there a good reason for this?

> No.
 
>> Well (as a member of R-core, I give my answer):
>> 
>> Memory efficiency can be a good reason, actually...
>> together with ``cleanness'' :  
>> ``1:n'' are the IMPLICIT DEFAULT row.names
>> 
>> We could stay at the current way `internally',
>> but make sure that all functions working on data.frames `d.f'
>> automatically work as if
>> 
>> row.names(d.f)   *was indeed* ==  paste(1:nrow(d.f)

> Ugh. Please, let's avoid implicit stuff. All the special-casing
> involved all over the place would soon outweigh the saved storage of a
> character vector. We'll get nothing but trouble from it. Just add the
> rownames. 

Yes.  Does R- simply add a default 1:n for the row names if there are
none?  Then we should do the same.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Fri Jan 16 21:00:24 1998
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Fri, 16 Jan 1998 13:00:24 -0800 (PST)
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: <XFMail.980116174438.plummer@iarc.fr>
Message-ID: <Pine.LNX.3.96.980116125848.471A-100000@gemini.biostat.washington.edu>


> >My problem in making these packages is that I generate them under
> >Debian GNU/Linux as .deb packages then use an automatic transformation
> >program to create the RedHat Linux .rpm packages.  Since I don't use
> >rpm for installation myself it is difficult for me to test them.  I

I've just purchased a new system that came with RedHat 5.0, and would be
glad to test RPM's.  Just send them to me...


-------------------------------------------------------------------------------
    Gregory R. Warnes          | It is high time that the ideal of success
warnes@biostat.washington.edu  |  be replaced by the ideal of service.
                               |                       Albert Einstein
-------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Fri Jan 16 22:09:59 1998
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Fri, 16 Jan 1998 14:09:59 -0800 (PST)
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: <Pine.LNX.3.96.980116125848.471A-100000@gemini.biostat.washington.edu>
Message-ID: <Pine.LNX.3.96.980116135528.471D-100000@gemini.biostat.washington.edu>


RedHat 5.0 comes with libreadline.so.3.  R-base depends on
libreadline.so.2.  There seem to be no other unresolved dependencies, so
I'm looking to find a copy of libreadlin.so.2...

On Fri, 16 Jan 1998, Gregory R. Warnes wrote:

> 
> > >My problem in making these packages is that I generate them under
> > >Debian GNU/Linux as .deb packages then use an automatic transformation
> > >program to create the RedHat Linux .rpm packages.  Since I don't use
> > >rpm for installation myself it is difficult for me to test them.  I
> 
> I've just purchased a new system that came with RedHat 5.0, and would be
> glad to test RPM's.  Just send them to me...
> 
> 
> -------------------------------------------------------------------------------
>     Gregory R. Warnes          | It is high time that the ideal of success
> warnes@biostat.washington.edu  |  be replaced by the ideal of service.
>                                |                       Albert Einstein
> -------------------------------------------------------------------------------
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-------------------------------------------------------------------------------
    Gregory R. Warnes          | It is high time that the ideal of success
warnes@biostat.washington.edu  |  be replaced by the ideal of service.
                               |                       Albert Einstein
-------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 16 23:04:25 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1998 00:04:25 +0100
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: "Gregory R. Warnes"'s message of Fri, 16 Jan 1998 14:09:59 -0800 (PST)
References: <Pine.LNX.3.96.980116135528.471D-100000@gemini.biostat.washington.edu>
Message-ID: <x2d8hsdnra.fsf@blueberry.kubism.ku.dk>

"Gregory R. Warnes" <warnes@biostat.washington.edu> writes:

> RedHat 5.0 comes with libreadline.so.3.  R-base depends on
> libreadline.so.2.  There seem to be no other unresolved dependencies, so
> I'm looking to find a copy of libreadlin.so.2...

It *should* work if you make a symlink from libreadline.so.2.1 to
libreadline.so.3 and rerun ldconfig.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 23:12:24 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jan 1998 17:12:24 -0600
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: Peter Dalgaard BSA's message of 17 Jan 1998 00:04:25 +0100
References: <Pine.LNX.3.96.980116135528.471D-100000@gemini.biostat.washington.edu> <x2d8hsdnra.fsf@blueberry.kubism.ku.dk>
Message-ID: <6r1zy8nhd3.fsf@franz.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> "Gregory R. Warnes" <warnes@biostat.washington.edu> writes:
> 
> > RedHat 5.0 comes with libreadline.so.3.  R-base depends on
> > libreadline.so.2.  There seem to be no other unresolved dependencies, so
> > I'm looking to find a copy of libreadlin.so.2...
> 
> It *should* work if you make a symlink from libreadline.so.2.1 to
> libreadline.so.3 and rerun ldconfig.

It may work but it may not.  Gregory is referring to installing the
r-base_0.61.1-2_i386.rpm file from the bin/i386-linux/RedHat-4.2/
directory, not the one from the RedHat-5.0 directory.  The one he is
trying to install was linked against libreadline.so.2.0 not
libreadline.so.2.1.

According to some discussions that we saw a while back, Debian's
libreadline.so.2.1 is supposedly upwardly compatible with
libreadline.so.2.0.  The libreadline.so.3.0 in RedHat 5.0 is the same
as Debian's libreadline.so.2.1 but the two maintainers can't agree on
a number.  (I think that's the way it works.  It got a bit confusing
for a while there.)

Anyway, if you do get it to install I would definitely try it out with
 R -noreadline
initially.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 16 23:29:14 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1998 00:29:14 +0100
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: Douglas Bates's message of 16 Jan 1998 17:12:24 -0600
References: <Pine.LNX.3.96.980116135528.471D-100000@gemini.biostat.washington.edu>
 <x2d8hsdnra.fsf@blueberry.kubism.ku.dk>
 <6r1zy8nhd3.fsf@franz.stat.wisc.edu>
Message-ID: <x2btxcdmlx.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> 
> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
> 
> > "Gregory R. Warnes" <warnes@biostat.washington.edu> writes:
> > 
> > > RedHat 5.0 comes with libreadline.so.3.  R-base depends on
> > > libreadline.so.2.  There seem to be no other unresolved dependencies, so
> > > I'm looking to find a copy of libreadlin.so.2...
> > 
> > It *should* work if you make a symlink from libreadline.so.2.1 to
> > libreadline.so.3 and rerun ldconfig.
> 
> It may work but it may not.  Gregory is referring to installing the
> r-base_0.61.1-2_i386.rpm file from the bin/i386-linux/RedHat-4.2/
> directory, not the one from the RedHat-5.0 directory.  The one he is
> trying to install was linked against libreadline.so.2.0 not
> libreadline.so.2.1.

Oh. I missed that. I suspect that readline is the least of his worries
in that case, though. All sorts of "fun" are liable to arise when you
run a program that was (e.g.) linked with libc5 and X libs on a system
where libc5 is still there, but the X libs are now linked against
libc6. Still, it *might* work...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.Princeton.EDU  Fri Jan 16 23:35:28 1998
From: ben@eno.Princeton.EDU (Ben Bolker)
Date: Fri, 16 Jan 1998 18:35:28 -0500 (EST)
Subject: matplot
Message-ID: <Pine.SUN.3.95.980116183449.18756B-100000@paca>


   matplot doesn't seem to pass through options like lwd, cex, etc.
quite the way I'd like.  I've thought of two ways to fix this, I don't
know which is better.

  The first is to treat lwd, cex, etc., exactly like the other options
(col, lty ...) --  (these diffs are long, skip down two pages if you want
to see the other way)

*** matplot.orig	Tue Jan 13 18:17:54 1998
--- matplot.new2	Tue Jan 13 18:16:49 1998
***************
*** 1,12 ****
  ###---- As S  (just 'better' ...)
  
! matpoints <- function(x, y, lty=1:5, pch=NULL, col=1:6, ...)
  	matplot(x=x, y=y, type = 'p', lty=lty, pch=pch, col=col, add=TRUE, ...)
! matlines  <- function(x, y, lty=1:5, pch=NULL, col=1:6, ...)
  	matplot(x=x, y=y, type = 'l', lty=lty, pch=pch, col=col, add=TRUE, ...)
  
  matplot <- function(x, y, type="p",
! 		    lty=1:5, pch=NULL, col=1:6,
  		    xlab=NULL, ylab=NULL, xlim=NULL, ylim=NULL,
  		    ..., add= FALSE, verbose = FALSE)
  {
--- 1,12 ----
  ###---- As S  (just 'better' ...)
  
! matpoints <- function(x, y, lty=1:5, pch=NULL, col=1:6, cex=1, ...)
  	matplot(x=x, y=y, type = 'p', lty=lty, pch=pch, col=col, add=TRUE, ...)
! matlines  <- function(x, y, lty=1:5, pch=NULL, col=1:6, lwd=1, ...)
  	matplot(x=x, y=y, type = 'l', lty=lty, pch=pch, col=col, add=TRUE, ...)
  
  matplot <- function(x, y, type="p",
! 		    lty=1:5, pch=NULL, col=1:6, cex=1, lwd=1,
  		    xlab=NULL, ylab=NULL, xlim=NULL, ylim=NULL,
  		    ..., add= FALSE, verbose = FALSE)
  {
***************
*** 61,66 ****
--- 61,68 ----
  	if(length(lty) < k) lty <- rep(lty, length= k)
  	if(length(pch) < k) pch <- rep(pch, length= k)
  	if(length(col) < k) col <- rep(col, length= k)
+ 	if(length(cex) < k) cex <- rep(col, length= k)
+ 	if(length(lwd) < k) lwd <- rep(col, length= k)
  	ii <- 1:k
  	if(!add) {
  		ii <- ii[-1]
***************
*** 71,78 ****
  	for (i in ii) {
  		tp <- type[i]
  		if(tp=='l' || tp=='b'|| tp=='o'|| tp=='h')
! 		  lines(x[,i],y[,i], type=tp, lty=lty[i],pch=pch[i],col=col[i])
  		if(do.points && tp=='p')
! 		  points(x[,i],y[,i], pch=pch[i], col=col[i])
  	}
  }
--- 73,82 ----
  	for (i in ii) {
  		tp <- type[i]
  		if(tp=='l' || tp=='b'|| tp=='o'|| tp=='h')
! 		  lines(x[,i],y[,i], type=tp, lty=lty[i],pch=pch[i],col=col[i],
! 	                  lwd=lwd[i])
  		if(do.points && tp=='p')
! 		  points(x[,i],y[,i], pch=pch[i], col=col[i],
! 	                  cex=cex[i])
  	}
  }


  The second is to pass extra options through ... -- I don't know if this
breaks anything, it doesn't seem to for me (and it may be more general).

*** matplot.orig	Tue Jan 13 18:17:54 1998
--- matplot.new	Tue Jan 13 18:06:48 1998
***************
*** 71,78 ****
  	for (i in ii) {
  		tp <- type[i]
  		if(tp=='l' || tp=='b'|| tp=='o'|| tp=='h')
! 		  lines(x[,i],y[,i], type=tp, lty=lty[i],pch=pch[i],col=col[i])
  		if(do.points && tp=='p')
! 		  points(x[,i],y[,i], pch=pch[i], col=col[i])
  	}
  }
--- 71,79 ----
  	for (i in ii) {
  		tp <- type[i]
  		if(tp=='l' || tp=='b'|| tp=='o'|| tp=='h')
! 		  lines(x[,i],y[,i], type=tp, lty=lty[i],pch=pch[i],col=col[i],
!                         ...)
  		if(do.points && tp=='p')
! 		  points(x[,i],y[,i], pch=pch[i], col=col[i], ...)
  	}
  }

Benjamin Bolker          Dep't of Ecology and Evolutionary Biology,
ben@eno.princeton.edu    Princeton University
tel: (609) 258-6886,     fax: (609) 258-1334


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Sat Jan 17 00:15:57 1998
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Fri, 16 Jan 1998 16:15:57 -0800 (PST)
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: <x2btxcdmlx.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.3.96.980116155506.1985B-100000@gemini.warnes.org>





Various individuals wrote:

> > It may work but it may not.  Gregory is referring to installing the
> > r-base_0.61.1-2_i386.rpm file from the bin/i386-linux/RedHat-4.2/
> > directory, not the one from the RedHat-5.0 directory.  The one he is
> > trying to install was linked against libreadline.so.2.0 not
> > libreadline.so.2.1.
> 
> Oh. I missed that. I suspect that readline is the least of his worries
> in that case, though. All sorts of "fun" are liable to arise when you
> run a program that was (e.g.) linked with libc5 and X libs on a system
> where libc5 is still there, but the X libs are now linked against
> libc6. Still, it *might* work...
> 

Okay, okay.  I didn't notice that there was a RedHat5 directory, so I
downloaded the 4.2 rpms just to see.  No, they don't work, even if I get
the correct readline.  I've now downloaded the correct RPM from the RedHat
5 directory.  

The RPM for RedHat5 wants libncurses.so.3.4.  Hmm, I've got
libncurses-3.0.  Lets try.. 

# cd /usr/lib
# ln -s libncurses.so.3.0 libncurses.so.3.4

seems to make it run OK.

Now

# rpm -i --nodeps r-base-0.61.1-2.i386.rpm 
group src does not exist - using root


R seems to work now.  The packages I downloaded from RedHat4.2, don't seem
to work.  At least, 

> library(survival4)
Error in dyn.load(file) : unable to load shared library
"/usr/lib/R/library/survival4/libs/survival4.so"

The file is there and is readable, so I expect that the libc5 libc6
difference is the problem...

-Greg

-------------------------------------------------------------------------------
    Gregory R. Warnes          | It is high time that the ideal of success
warnes@biostat.washington.edu  |  be replaced by the ideal of service.
                               |                       Albert Einstein
-------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jan 17 19:26:01 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1998 20:26:01 +0100
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: "Gregory R. Warnes"'s message of Fri, 16 Jan 1998 16:15:57 -0800 (PST)
References: <Pine.LNX.3.96.980116155506.1985B-100000@gemini.warnes.org>
Message-ID: <x2pvlqc37a.fsf@blueberry.kubism.ku.dk>

"Gregory R. Warnes" <warnes@biostat.washington.edu> writes:

> Various individuals wrote:
> 
> > > It may work but it may not.  Gregory is referring to installing the
> > > r-base_0.61.1-2_i386.rpm file from the bin/i386-linux/RedHat-4.2/
> > > directory, not the one from the RedHat-5.0 directory.  The one he is
> > > trying to install was linked against libreadline.so.2.0 not
> > > libreadline.so.2.1.
> > 
> > Oh. I missed that. I suspect that readline is the least of his worries
> > in that case, though. All sorts of "fun" are liable to arise when you
> > run a program that was (e.g.) linked with libc5 and X libs on a system
> > where libc5 is still there, but the X libs are now linked against
> > libc6. Still, it *might* work...
> > 
> 
> Okay, okay.  I didn't notice that there was a RedHat5 directory, so I
> downloaded the 4.2 rpms just to see.  No, they don't work, even if I get
> the correct readline.  I've now downloaded the correct RPM from the RedHat
> 5 directory.  

And the symlink libreadline.so.2.1->3.0 doesn't work either. I just
tried it and ldconfig is too smart to go by the filename alone, it
looks inside the file, which has the 3.0 signature, and ignores it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 20 08:37:53 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 20 Jan 1998 09:37:53 +0100
Subject: as.numeric(<factor>) [Difference R/S]
In-Reply-To: <199801200734.IAA32737@pc25.none> (message from Kurt Hornik on
 Tue, 20 Jan 1998 08:34:59 +0100)
Message-ID: <199801200837.JAA06241@sophie.ethz.ch>

>From  R-core;  this should interest most R-devel'ers (to some extent):

Since 0.60,  the semantics of   as.numeric(<factor>)  has changed,
e.g.

R> as.integer(factor(c("A","BB")))
[1] NA NA
R> as.integer(factor(c(100,40,100)))
[1] 100  40 100

whereas older R and S:

S> as.integer(factor(c("A","BB")))
[1] 1 2
S> as.integer(factor(c(100,40,100)))
[1] 2 1 2


-------------------------------------
as explained by Ross, below :

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Ross Ihaka writes:
    KH>> From hornik@ci.tuwien.ac.at Mon Jan 19 22:52 NZD 1998 Subject:
    KH>> Difference R/S
    KH>> 
    KH>> Andreas just pointed me to the following:
    KH>> 
    KH>> v <- as.factor(c("Age","Number","Age")) as.numeric(v)
    KH>> 
    KH>> gives
    KH>> 
    KH>> [1] 1 2 1
    KH>> 
    KH>> in S+ and
    KH>> 
    KH>> [1] NA NA NA
    KH>> 
    KH>> Bug/feature/intentional?
    KH>> 
    KH>> Of course, R makes more sense because as.numeric("Age") gives NA in
    KH>> both R and S+ ...
    KH>> 
    KH>> Or, should we have as.numeric() return the codes on a non-numeric
    KH>> factor?

    Ross> At present R (implicitly) computes as.numeric(x) for x a factor as

    Ross> 	as.numeric(as.character(x))

    Ross> and S computes

    Ross> 	codes(x)

    Ross> I mistakenly thought that S does what I have implemented for R.
    Ross> Thomas first objected to the difference and then said he quite liked
    Ross> it.

    Ross> I quite like the present semantics, but it is easy to change if
    Ross> others have different preferences.

    KH> I personally think that the current R approach makes more sense,
    KH> too.  If we all agree on it, I would like to add the difference to
    KH> the FAQ, so that it is (well) documented.

Hmm,  I first had advocated your view above, myself.

Later, I started to discover in how much S-code
	as.numeric(ff) 
is just used to extract the factor codes (in {1:M})  from a factor.

This lead me (and Peter Dalgaard, I think) to the conclusion that
- yes, the present R behavior maybe ``cleaner'' than S's
- no, it is a pain to keep it, because it breaks S code too often.

However, as you see, we haven't agreed yet on the topic.
I think we should agree ASAP, since it involves code in several places
(outside R base).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 20 10:44:51 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jan 1998 11:44:51 +0100
Subject: as.numeric(<factor>) [Difference R/S]
In-Reply-To: Martin Maechler's message of Tue, 20 Jan 1998 09:37:53 +0100
References: <199801200837.JAA06241@sophie.ethz.ch>
Message-ID: <x2n2gr77bv.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> 
> From  R-core;  this should interest most R-devel'ers (to some extent):
> 
> Since 0.60,  the semantics of   as.numeric(<factor>)  has changed,
> e.g.
> 
> R> as.integer(factor(c("A","BB")))
> [1] NA NA
> R> as.integer(factor(c(100,40,100)))
> [1] 100  40 100
> 
> whereas older R and S:
> 
> S> as.integer(factor(c("A","BB")))
> [1] 1 2
> S> as.integer(factor(c(100,40,100)))
> [1] 2 1 2
> 
...
> 
> Hmm,  I first had advocated your view above, myself.
> 
> Later, I started to discover in how much S-code
> 	as.numeric(ff) 
> is just used to extract the factor codes (in {1:M})  from a factor.
> 
> This lead me (and Peter Dalgaard, I think) to the conclusion that
> - yes, the present R behavior maybe ``cleaner'' than S's
> - no, it is a pain to keep it, because it breaks S code too often.
> 
> However, as you see, we haven't agreed yet on the topic.
> I think we should agree ASAP, since it involves code in several places
> (outside R base).

Actually, I'm even stronger in favour of the S semantics. In addition
to the above

	- you can always get current behaviour with
        as.numeric(as.character(f)) or as.numeric(levels(f))[f]

	- one should avoid generating NA's unless absolutely necessary

	- when a factor is used for subscripting, you mean the codes,
        not the levels. Currently, we have

> (1:5)[factor(1:5,labels=5:1)]
[1] 1 2 3 4 5

but

> as.numeric(factor(1:5,labels=5:1))
[1] 5 4 3 2 1

	I.e. *sometimes* when a factor is coerced to numeric you get
	something different. (And if you change the index semantics,
	code for trend tests and the like is likely to break!). 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan 20 15:02:56 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 20 Jan 1998 09:02:56 -0600
Subject: prlab
In-Reply-To: Andreas Weingessel's message of Tue, 20 Jan 1998 10:42:37 +0100
References: <199801200942.KAA16633@elendil.ci.tuwien.ac.at>
Message-ID: <6rd8hn9oin.fsf@franz.stat.wisc.edu>

Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at> writes:

> When I tried to port the statlib-Pkg rpart to R, I came across the
> c-Function prlab which seems to be part of S+, but not of R.
> 
> Does anyone know what prlab does and how difficult it would be to
> emulate it in R?

Can you show us the context?  If I had to guess I would say it was a
routine to print labels but that's just a guess.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Tue Jan 20 15:17:00 1998
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas Weingessel)
Date: Tue, 20 Jan 1998 16:17:00 +0100
Subject: prlab
In-Reply-To: <6rd8hn9oin.fsf@franz.stat.wisc.edu>
References: <199801200942.KAA16633@elendil.ci.tuwien.ac.at>
 <6rd8hn9oin.fsf@franz.stat.wisc.edu>
Message-ID: <199801201517.QAA17174@elendil.ci.tuwien.ac.at>

>>>>> On 20 Jan 1998 09:02:56 -0600,
>>>>> Douglas Bates wrote:

> Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at> writes:
>> When I tried to port the statlib-Pkg rpart to R, I came across the
>> c-Function prlab which seems to be part of S+, but not of R.
>> 
>> Does anyone know what prlab does and how difficult it would be to
>> emulate it in R?

> Can you show us the context?  If I had to guess I would say it was a
> routine to print labels but that's just a guess.

That seems right, the function is called labels.rpart and seems to be
similar to the S-Fct labels.tree.

The call itself is

        pn <- .C("prlab",
                lab = character(2 * length(var)),
                as.character(splits[, 1]),
                as.character(splits[, 2]),
                as.character(unlist(xlevels)),
                as.integer(var2),             #with 0 denoting a leaf
                as.integer(temp),
                as.integer(length(var2)))

where (for the data I tried) var is a vector of factor objects, splits
is an nx2 matrix of strings, xlevels is NULL, var2 and temp are
numeric vectors.

Of course I can send the whole code, if someone is interested.

	Andreas
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 20 20:38:10 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 20 Jan 1998 15:38:10 -0500
Subject: .h files
Message-ID: <98Jan20.154626est.13453@mailgate.bank-banque-canada.ca>

I'm trying to set up R INSTALL for my padi package and the compile needs
    -I pkg/src-c
to find some .h files. (Perhaps I should be putting these in a different
location?)

Could someone please explain how I should pass this location to the compiler
used by R INSTALL from the Makefile in my pkg/src?

Thanks
Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 20 21:29:27 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jan 1998 22:29:27 +0100
Subject: .h files
In-Reply-To: Paul Gilbert's message of Tue, 20 Jan 1998 15:38:10 -0500
References: <98Jan20.154626est.13453@mailgate.bank-banque-canada.ca>
Message-ID: <x2d8hmvnpk.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I'm trying to set up R INSTALL for my padi package and the compile needs
>     -I pkg/src-c
> to find some .h files. (Perhaps I should be putting these in a different
> location?)
> 
> Could someone please explain how I should pass this location to the compiler
> used by R INSTALL from the Makefile in my pkg/src?

What goes wrong with putting the include files along with the sources
and using  #include "file.h"  ?


As for sticking extra options into the gcc command line, I suppose
something like CFLAGS+=-I pkg/src-c in the Makefile could do it, but
does it work with all make programs or just GNU make? Or spell out
$(CC) -c $< $(CFLAGS) -I pkg/src-c $(FFLAGS) ...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 21 08:14:24 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 21 Jan 1998 09:14:24 +0100
Subject: R (off-topic): How to make mail-archives searchable?
Message-ID: <199801210814.JAA07731@sophie.ethz.ch>

As you (hopefully) know, the mail archives of
 R-devel, R-help and R-announce
have been available via FTP from here, and now also from CRAN.

I had spent a little effort to enhance these monthly plain unix-mail
folders to be 'Emacs outlined'
	(i.e., emacs is put in outline-mode when you open one of these).
and you all are probably efficient users of grep, etc.

However, for average R users, a better user interface is desired:
Something like statlib's  search engine (on S-news)
IN ADDITION to these simple plain files, or one of the many other
CGI / HTML based archive searchers should be added.

On the other hand, we have not yet desired if CRAN servers really should be
(mis)usable via CGI running on them; then, of course, the alternative are
java `beans'.

Since I've never installed any of these, I'd like to get some advice
of more experienced people like you.

Since this is a slightly off-topic subject, you could reply only to me 
and I'd summarize to R-devel...
--
Martin Maechler <maechler@stat.math.ethz.ch>			<><
http://www.stat.math.ethz.ch/~maechler/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan 21 08:59:27 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 21 Jan 1998 09:59:27 +0100
Subject: as.numeric(<factor>) [Difference R/S]
In-Reply-To: <x2n2gr77bv.fsf@blueberry.kubism.ku.dk>
References: <199801200837.JAA06241@sophie.ethz.ch>
 <x2n2gr77bv.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801210859.JAA14222@pc25.none>

>>>>> Peter Dalgaard BSA writes:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
>> 
>> From  R-core;  this should interest most R-devel'ers (to some extent):
>> 
>> Since 0.60,  the semantics of   as.numeric(<factor>)  has changed,
>> e.g.
>> 
R> as.integer(factor(c("A","BB")))
>> [1] NA NA
R> as.integer(factor(c(100,40,100)))
>> [1] 100  40 100
>> 
>> whereas older R and S:
>> 
S> as.integer(factor(c("A","BB")))
>> [1] 1 2
S> as.integer(factor(c(100,40,100)))
>> [1] 2 1 2
>> 
> ...
>> 
>> Hmm,  I first had advocated your view above, myself.
>> 
>> Later, I started to discover in how much S-code
>> as.numeric(ff) 
>> is just used to extract the factor codes (in {1:M})  from a factor.
>> 
>> This lead me (and Peter Dalgaard, I think) to the conclusion that
>> - yes, the present R behavior maybe ``cleaner'' than S's
>> - no, it is a pain to keep it, because it breaks S code too often.
>> 
>> However, as you see, we haven't agreed yet on the topic.
>> I think we should agree ASAP, since it involves code in several places
>> (outside R base).

> Actually, I'm even stronger in favour of the S semantics. In addition
> to the above

> 	- you can always get current behaviour with
>         as.numeric(as.character(f)) or as.numeric(levels(f))[f]

> 	- one should avoid generating NA's unless absolutely necessary

Right :-)

> 	- when a factor is used for subscripting, you mean the codes,
>         not the levels. Currently, we have

>> (1:5)[factor(1:5,labels=5:1)]
> [1] 1 2 3 4 5

> but

>> as.numeric(factor(1:5,labels=5:1))
> [1] 5 4 3 2 1

> 	I.e. *sometimes* when a factor is coerced to numeric you get
> 	something different. (And if you change the index semantics,
> 	code for trend tests and the like is likely to break!).

But that is really a matter of how subscripting treats factors, and not
necessarily what coercion does.

As much as I am in favor of compatibility (remember I do a lot of
porting):

* Suppose f is a factor with numeric levels other than 1 to n.  Then
as.numeric(f) returning the codes rather than the levels is strange.

* You also cannot coerce a character vector to numeric without getting
NA's.

Btw:

	x <- factor(c(10, 5, 6, 7))

Then levels(x) gives the CHARACTER vector c("5", "6", "7", "10") [in
both R and S+], why that?

And:

R> codes(x)
[1] 4 1 2 3

S> codes(x)
[1] 1 2 3 4

???
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 21 10:39:59 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jan 1998 11:39:59 +0100
Subject: as.numeric(<factor>) [Difference R/S]
In-Reply-To: Kurt Hornik's message of Wed, 21 Jan 1998 09:59:27 +0100
References: <199801200837.JAA06241@sophie.ethz.ch>
 <x2n2gr77bv.fsf@blueberry.kubism.ku.dk>
 <199801210859.JAA14222@pc25.none>
Message-ID: <x2zpkqxg8v.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> But that is really a matter of how subscripting treats factors, and not
> necessarily what coercion does.

Well, the point was that one could say that there's an implicit
coercion involved in indexing. (Note BTW that in general
A[as.numeric(as.character(f))] != 
A[as.character(f)] !=
A[codes(f)] == A[f])

> As much as I am in favor of compatibility (remember I do a lot of
> porting):
> 
> * Suppose f is a factor with numeric levels other than 1 to n.  Then
> as.numeric(f) returning the codes rather than the levels is strange.

No, it's not. It may come as a surprise to some, but it might as well
be thought strange that the internal numeric codes are not available
via as.numeric. The levels are character strings that may or may not
happen to be convertible to numbers, so why should you expect that the
general procedure assumes that they are convertible?

> * You also cannot coerce a character vector to numeric without getting
> NA's.

This is true, but in that case, there's no obvious alternative.

> Btw:
> 
> 	x <- factor(c(10, 5, 6, 7))
> 
> Then levels(x) gives the CHARACTER vector c("5", "6", "7", "10") [in
> both R and S+], why that?

By definition, a factor is an integer vector of codes coupled with a
character vector of levels. Where's the problem? We could of course
introduce the possibility of having levels vectors of any type (and
take the pains arising from differences between factor(1:3) and
factor(1:3,labels=as.character(1:3)) ). 

> 
> And:
> 
> R> codes(x)
> [1] 4 1 2 3
> 
> S> codes(x)
> [1] 1 2 3 4
> 
> ???

Apparently R is defaulting levels=as.character(sort(unique(x)),
whereas S is doing levels=sort(as.character(unique(x))), so that 10
sorts alphabetically before 5,6,7...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 21 15:57:04 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jan 1998 10:57:04 -0500
Subject: .h files
References: <98Jan20.154626est.13453@mailgate.bank-banque-canada.ca>
 <x2d8hmvnpk.fsf@blueberry.kubism.ku.dk>
 <98Jan20.165835est.13445@mailgate.bank-banque-canada.ca> <x2afcqvl8l.fsf@blueberry.kubism.ku.dk>
Message-ID: <98Jan21.110542est.13455@mailgate.bank-banque-canada.ca>

PG>> gcc -g -fpic -I/home/res8/gilp/R-versions/R-0.61.1/include  -c  putpadi.c
PG>> putpadi.c:29: padi.h: No such file or directory
PG>> putpadi.c:34: padiutil.h: No such file or directory

PD>Hum. If line 29 really reads #include "padi.h" (not <padi.h>) and
PD>padi.h really is in the same directory as putpadi.c, then I don't
PD>understand a word of it...

Well, it is <padi.h> and not "padi.h" and changing this fixes this problem in
the sense that I copied the .h files to the local directory and with "" it no
longer matters if I append to -I.

However, the .h files really should not be in the local directory as they are
used by other programs and it is important that they all stay in sync, so I
really would prefer to append to CFLAGS. When I use CFLAGS += -I. in my Makefile
it is ignored, unless I edit R/etc/INSTALL  and change to CFLAGS+= thus:

(cd ${src}; make CC="gcc" CFLAGS+="-g -fpic -I${RHOME}/include"

But then the "-g -fpic -I${RHOME}/include" is ignored and only my setting is
used! This does not make sense to me and I would certainly appreciate any
suggestions.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 21 17:22:29 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jan 1998 12:22:29 -0500
Subject: alloc
Message-ID: <98Jan21.123109est.13455@mailgate.bank-banque-canada.ca>

I am trying to get our database interface (PADI) working with R. The code does
some memory allocation and for Splus there is an ifdef which controls whether
malloc or S_alloc is called. I did  nm R.binary | grep alloc to see if this was
supported and I find there are some choices:
[2490] |    446036|     272|FUNC |GLOB |0    |7      |R_alloc
[806] |    693956|     312|FUNC |LOCL |0    |7      |ReallocString
[807] |    693220|     736|FUNC |LOCL |0    |7      |ReallocVector
[3444] |    446308|     144|FUNC |GLOB |0    |7      |S_alloc
[2429] |    446452|     200|FUNC |GLOB |0    |7      |S_realloc
...
[2204] |   1445856|       0|FUNC |GLOB |0    |UNDEF  |calloc
[2595] |   1444644|       0|FUNC |GLOB |0    |UNDEF  |malloc
[3066] |   1444728|       0|FUNC |GLOB |0    |UNDEF  |realloc
...
Is there any advantage to calling R_alloc rather than S_alloc? I also see that
malloc is UNDEF. Now I'm not a C programmer, but I have a funny feeling that
this could lead to some problems?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jan 21 17:58:20 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 21 Jan 1998 11:58:20 -0600
Subject: alloc
In-Reply-To: Paul Gilbert's message of Wed, 21 Jan 1998 12:22:29 -0500
References: <98Jan21.123109est.13455@mailgate.bank-banque-canada.ca>
Message-ID: <6rn2gpr9oj.fsf@franz.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I am trying to get our database interface (PADI) working with R. The code does
> some memory allocation and for Splus there is an ifdef which controls whether
> malloc or S_alloc is called. I did  nm R.binary | grep alloc to see if this was
> supported and I find there are some choices:
> [2490] |    446036|     272|FUNC |GLOB |0    |7      |R_alloc
> [806] |    693956|     312|FUNC |LOCL |0    |7      |ReallocString
> [807] |    693220|     736|FUNC |LOCL |0    |7      |ReallocVector
> [3444] |    446308|     144|FUNC |GLOB |0    |7      |S_alloc
> [2429] |    446452|     200|FUNC |GLOB |0    |7      |S_realloc
> ...
> [2204] |   1445856|       0|FUNC |GLOB |0    |UNDEF  |calloc
> [2595] |   1444644|       0|FUNC |GLOB |0    |UNDEF  |malloc
> [3066] |   1444728|       0|FUNC |GLOB |0    |UNDEF  |realloc
> ...
> Is there any advantage to calling R_alloc rather than S_alloc? I also see that
> malloc is UNDEF. Now I'm not a C programmer, but I have a funny feeling that
> this could lead to some problems?

I can't answer the first question but the second one is not a problem.
The UNDEF here means that these symbols not defined in the R.binary
file.  They are defined in the libc.so shared object which will be
linked at run time.  This is the basic idea of shared libraries - all
the processes that running and use malloc, for example, use the same
copy of this function.  It is dynamically linked and shared between
the processes.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 21 20:47:50 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jan 1998 21:47:50 +0100
Subject: .h files
In-Reply-To: Paul Gilbert's message of Wed, 21 Jan 1998 10:57:04 -0500
References: <98Jan20.154626est.13453@mailgate.bank-banque-canada.ca>
 <x2d8hmvnpk.fsf@blueberry.kubism.ku.dk>
 <98Jan20.165835est.13445@mailgate.bank-banque-canada.ca>
 <x2afcqvl8l.fsf@blueberry.kubism.ku.dk>
 <98Jan21.110542est.13455@mailgate.bank-banque-canada.ca>
Message-ID: <x2n2gpsgeh.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> PG>> gcc -g -fpic -I/home/res8/gilp/R-versions/R-0.61.1/include  -c  putpadi.c
> PG>> putpadi.c:29: padi.h: No such file or directory
> PG>> putpadi.c:34: padiutil.h: No such file or directory
> 
> PD>Hum. If line 29 really reads #include "padi.h" (not <padi.h>) and
> PD>padi.h really is in the same directory as putpadi.c, then I don't
> PD>understand a word of it...
> 
> Well, it is <padi.h> and not "padi.h" and changing this fixes this problem in
> the sense that I copied the .h files to the local directory and with "" it no
> longer matters if I append to -I.
> 
> However, the .h files really should not be in the local directory as they are
> used by other programs and it is important that they all stay in sync, so I
> really would prefer to append to CFLAGS. 

There's always #include "../include/padi.h", etc. ...

When I use CFLAGS += -I. in my Makefile
> it is ignored, unless I edit R/etc/INSTALL  and change to CFLAGS+= thus:
> 
> (cd ${src}; make CC="gcc" CFLAGS+="-g -fpic -I${RHOME}/include"
> 
> But then the "-g -fpic -I${RHOME}/include" is ignored and only my setting is
> used! This does not make sense to me and I would certainly appreciate any
> suggestions.

You don't want to mess with etc/INSTALL anyway since it's different
between platforms and gets autogenerated by configure. You're right,
an explicit CFLAGS on the make command line overrides any assignment
inside the makefile. To wit:

$ cat Makefile
CFLAGS+=-I.
$ make x.o
cc -I.   -c x.c -o x.o
$ rm x.o
$ make x.o CFLAGS=-Ibip
cc -Ibip   -c x.c -o x.o

However, using += isn't any different here:

$ rm x.o
$ make x.o CFLAGS+=-Ibip
cc -Ibip   -c x.c -o x.o

Curiously, the override does not apply if one sets CFLAG as an
environment variable

$ rm x.o
$ CFLAGS=-Ibip make x.o             
cc -Ibip -I.   -c x.c -o x.o

I suppose we could just fix etc/INSTALL.in to use that technique.
Anyone have objections? On the other hand explicit relative paths in
#include "..." might be good enough already.
 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Jan 22 05:25:36 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 21 Jan 1998 21:25:36 -0800 (PST)
Subject: alloc
In-Reply-To: <98Jan21.123109est.13455@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.SOL.3.95.980121212409.1809A-100000@gorn>

On Wed, 21 Jan 1998, Paul Gilbert wrote:

> ...
> Is there any advantage to calling R_alloc rather than S_alloc? 

R_alloc does not zero the memory, and so is faster (if you don't want the
memory zeroed)


Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 22 08:35:05 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 22 Jan 1998 09:35:05 +0100
Subject: R feature request:  stop(..) should print its caller call
Message-ID: <199801220835.JAA09231@sophie.ethz.ch>

The following shows what I mean:

tst<-function(x)in.tst(x); in.tst<-function(y)stop(paste("y is",y)); tst(pi)

in R gives

--------------------
Error: y is 3.141593
--------------------

in S-plus gives

----------------------------------------
> > Error in in.tst(x): y is 3.14159265358979
Dumped    ^^^^^^^^^^^^
----------------------------------------

For locating bugs / problems in functions, it would be tremendously helpful
if R also printed the name of the function from which it is called
(actually the ``call(..)'' rather than just the function name).

Martin Maechler
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jan 22 10:07:45 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 22 Jan 1998 11:07:45 +0100
Subject: R feature request:  stop(..) should print its caller call
In-Reply-To: <199801220835.JAA09231@sophie.ethz.ch>
References: <199801220835.JAA09231@sophie.ethz.ch>
Message-ID: <199801221007.LAA21175@pc25.none>

>>>>> Martin Maechler writes:

> The following shows what I mean:
> tst<-function(x)in.tst(x); in.tst<-function(y)stop(paste("y is",y)); tst(pi)

> in R gives

> --------------------
> Error: y is 3.141593
> --------------------

> in S-plus gives

> ----------------------------------------
>> > Error in in.tst(x): y is 3.14159265358979
> Dumped    ^^^^^^^^^^^^
> ----------------------------------------

> For locating bugs / problems in functions, it would be tremendously
> helpful if R also printed the name of the function from which it is
> called (actually the ``call(..)'' rather than just the function name).

Martin,

I am not sure.  I find it more useful to call traceback() after an error
occurred to find out what really happened.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 22 11:02:36 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 22 Jan 1998 12:02:36 +0100
Subject: Re^2: R feature request:  stop(..) should print its caller call
In-Reply-To: <199801221007.LAA21175@pc25.none> (message from Kurt Hornik on
 Thu, 22 Jan 1998 11:07:45 +0100)
Message-ID: <199801221102.MAA09835@sophie.ethz.ch>


>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Martin Maechler writes:

    >> The following shows what I mean:
    >> tst<-function(x)in.tst(x); in.tst<-function(y)stop(paste("y is",y)); tst(pi)

    >> in R gives

    >> --------------------
    >> Error: y is 3.141593
    >> --------------------

    >> in S-plus gives

    >> ----------------------------------------
    >>> > Error in in.tst(x): y is 3.14159265358979
    >> Dumped    ^^^^^^^^^^^^
    >> ----------------------------------------

    >> For locating bugs / problems in functions, it would be tremendously
    >> helpful if R also printed the name of the function from which it is
    >> called (actually the ``call(..)'' rather than just the function name).

    KH> Martin,

    KH> I am not sure.  I find it more useful to call traceback() after an error
    KH> occurred to find out what really happened.

The existence of a good utility such as traceback() 
should not prevent  stop(..) from producing more informative output.

The reason I think this is really wanted:

Many S- and R- function  composers try to write functions which 
``behave'', i.e. produce reasonable error messages when they are called
with "bad" arguments.

If I (as a function composer) 
think on how to fill the "...." in a  stop(....),
I've always been assuming that stop() would prepend the call (i.e. at least
the calling function).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 23 03:42:27 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 22 Jan 1998 21:42:27 -0600
Subject: netscape to become freely redistributable
Message-ID: <6ryb07g8kc.fsf@verdi.stat.wisc.edu>

I presume by now that most everyone has heard that, starting later
this quarter with Netscape 5.0's developers' release, the Netscape
browser program and its source code will become freely
redistributable.  They didn't say it would be GPL'd (GNU Public
License) but they said their source code would be available in the
spirit of the GPL.

Initially it bothered me that the start.help() function in R tried to
find netscape on your system and started that to read the .html files.
I thought it might be better to rely on a freely available browser
like mosaic or chimera2 or arena.  Even lynx would have been an
alternative.  I find I still often use lynx for browsing when I
am on a a machine with 8 bit planes of color because I don't want a
bloated netscape eating up my color table.

In retrospect the decision to standardize on netscape and to use their
extensions to the HTML standards in the R documentation looks like a
good one.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Jan 23 04:17:00 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 23 Jan 1998 17:17:00 +1300 (NZDT)
Subject: netscape to become freely redistributable
In-Reply-To: <6ryb07g8kc.fsf@verdi.stat.wisc.edu>
References: <6ryb07g8kc.fsf@verdi.stat.wisc.edu>
Message-ID: <199801230417.RAA17067@stat1.stat.auckland.ac.nz>

Douglas Bates writes:
 > I presume by now that most everyone has heard that, starting later
 > this quarter with Netscape 5.0's developers' release, the Netscape
 > browser program and its source code will become freely
 > redistributable.  They didn't say it would be GPL'd (GNU Public
 > License) but they said their source code would be available in the
 > spirit of the GPL.
 > 
 > Initially it bothered me that the start.help() function in R tried to
 > find netscape on your system and started that to read the .html files.
 > I thought it might be better to rely on a freely available browser
 > like mosaic or chimera2 or arena.  Even lynx would have been an
 > alternative.  I find I still often use lynx for browsing when I
 > am on a a machine with 8 bit planes of color because I don't want a
 > bloated netscape eating up my color table.
 > 
 > In retrospect the decision to standardize on netscape and to use their
 > extensions to the HTML standards in the R documentation looks like a
 > good one.

Yowser!  This is very good news indeed.

However, I think we should stay away from anyone's HTML extensions.
On the Mac and under Windows, the other browser may be prefereble.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 23 08:43:14 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 23 Jan 1998 09:43:14 +0100
Subject: S-Plus graphs to LaTeX picture commands
In-Reply-To: <34C8144A.713B@caoba.entelnet.bo> (message from kjetil halvorsen
 on Thu, 22 Jan 1998 21:53:46 -0600)
Message-ID: <199801230843.JAA11083@sophie.ethz.ch>

Well, R   ( http://lib.stat.cmu.edu/R/CRAN/ )
has a pictex(..) driver.

>>>>> "kjetil" == kjetil halvorsen <kjetil@caoba.entelnet.bo> writes:

    kjetil> Is there any possibility to write code which ``translates''
    kjetil> from splus graphics to latex picture commands? Or somebody has
    kjetil> written something like that?

    kjetil> I did some of that for xlispstat, but cannot see how to do it
    kjetil> for splus.

R  further allows some `mathematical text'
(greek, sub- and super-scripts, fractions, sum and integrals, square roots)
in the plots for x11 and postscript. 

You can see two pages with some examples in PostScript
at
	ftp://ftp.stat.math.ethz.ch/R/All-Ex-plotmath.ps

Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 23 13:07:21 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 23 Jan 1998 14:07:21 +0100
Subject: non-standard HTML? [Re: netscape to become freely redistributable]
In-Reply-To: <6ryb07g8kc.fsf@verdi.stat.wisc.edu> (message from Douglas Bates
 on 22 Jan 1998 21:42:27 -0600)
Message-ID: <199801231307.OAA11280@sophie.ethz.ch>

>>>>> "DougB" == Douglas Bates <bates@stat.wisc.edu> writes:

    DougB> I presume by now that most everyone has heard that, starting
    DougB> later this quarter with Netscape 5.0's developers' release, the
    DougB> Netscape browser program and its source code will become freely
    DougB> redistributable.  They didn't say it would be GPL'd (GNU Public
    DougB> License) but they said their source code would be available in
    DougB> the spirit of the GPL.

I did not know this.  Thank you for the information.
I *do* like it!

    DougB> Initially it bothered me that the start.help() function in R
    DougB> tried to find netscape on your system and started that to read
    DougB> the .html files.  I thought it might be better to rely on a
    DougB> freely available browser like mosaic or chimera2 or arena.  Even
    DougB> lynx would have been an alternative.  I find I still often use
    DougB> lynx for browsing when I am on a a machine with 8 bit planes of
    DougB> color because I don't want a bloated netscape eating up my color
    DougB> table.
ok.
That's why we use  
	netscape -install 
which keeps its own colormap.

    DougB> In retrospect the decision to standardize on netscape and to use
    DougB> their extensions to the HTML standards in the R documentation
    DougB> looks like a good one.

That's the paragraph which made me respond:

---> Which Non-HTML 3.2  Netscape-HTML extensions are we still using?

I've once looked a little bit at it and thought I didn't see any,
at that time.

I very much agree with Ross (and Tony Rossini and ...) that we would not
want to use non-standard HTML.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plambert@ulg.ac.be  Fri Jan 23 13:53:10 1998
From: plambert@ulg.ac.be (Philippe Lambert)
Date: Fri, 23 Jan 1998 14:53:10 +0100
Subject: hist: rel.freqs
Message-ID: <34C8A0C6.11E8BEBE@ulg.ac.be>

In R0.61,

In hist(), should the line
  rel.freqs <- counts/(sum(x) * diff(breaks))
computing the relative frequencies or height of the rectangles 
in a histogram not be
  rel.freqs <- counts/(sum(counts) * diff(breaks))
instead, or do I misunderstand something?

Thanks,
 Philippe

-- 
--------------------------------------------------------
 Philippe Lambert                   Tel: (+32)-4-3663091
 Universite de Liege               Fax: (+32)-4-3662983
 Faculte d'Economie, de Gestion et de Sciences Sociales
 Sart-Tilman B31, B-4000 Liege
 Belgium                      email: plambert@ulg.ac.be
--------------------------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 23 15:15:16 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Jan 1998 16:15:16 +0100
Subject: hist: rel.freqs
In-Reply-To: Philippe Lambert's message of Fri, 23 Jan 1998 14:53:10 +0100
References: <34C8A0C6.11E8BEBE@ulg.ac.be>
Message-ID: <x2btx32pdn.fsf@blueberry.kubism.ku.dk>

Philippe Lambert <plambert@ulg.ac.be> writes:

> 
> In R0.61,
> 
> In hist(), should the line
>   rel.freqs <- counts/(sum(x) * diff(breaks))
> computing the relative frequencies or height of the rectangles 
> in a histogram not be
>   rel.freqs <- counts/(sum(counts) * diff(breaks))
> instead, or do I misunderstand something?

Oops. You're right. Total area should be 1, not mean(x). Current code
mus give funny results if the mean is negative...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 23 15:11:27 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 23 Jan 1998 09:11:27 -0600
Subject: non-standard HTML? [Re: netscape to become freely redistributable]
In-Reply-To: Martin Maechler's message of Fri, 23 Jan 1998 14:07:21 +0100
References: <199801231307.OAA11280@sophie.ethz.ch>
Message-ID: <6ru3avi5sw.fsf@verdi.stat.wisc.edu>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> >>>>> "DougB" == Douglas Bates <bates@stat.wisc.edu> writes:

>     DougB> In retrospect the decision to standardize on netscape and to use
>     DougB> their extensions to the HTML standards in the R documentation
>     DougB> looks like a good one.

> That's the paragraph which made me respond:

> ---> Which Non-HTML 3.2  Netscape-HTML extensions are we still using?
> 
> I've once looked a little bit at it and thought I didn't see any,
> at that time.
> 
> I very much agree with Ross (and Tony Rossini and ...) that we would not
> want to use non-standard HTML.

OK, I phrased that wrong.  I have found that I can't use lynx or
chimera or arena or w3 to view the initial page at
$RHOME/html/index.html because it uses tables.  I guess that is more
of a problem with the browsers than with the html files.

It appears that recent versions of lynx still cannot work with tables.
w3 as distributed with xemacs-20 will do tables but it is awkward
because of the fixed width fonts.  Chimera 2.0 seems to work on those
pages now as does chimera 1.7.  Arena displayed the pages but got a
little confused with the spacing of the tables.  Gzilla croaked on
startup so I don't know what it would do with them.

Overall if you need a freely available browser for the next few months 
it looks like chimera is the best bet.  From the ANNOUNCE file

 It is available for anonymous ftp at ftp.cs.unlv.edu in the
 directory /pub/chimera.  Check out the URL

 http://www.unlv.edu/chimera/

 for a partial list of mirrors and other information.

Chimera 2.0 is still in alpha test and appears to need a bit of work.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 23 15:55:10 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Jan 1998 16:55:10 +0100
Subject: non-standard HTML? [Re: netscape to become freely redistributable]
In-Reply-To: Douglas Bates's message of 23 Jan 1998 09:11:27 -0600
References: <199801231307.OAA11280@sophie.ethz.ch>
 <6ru3avi5sw.fsf@verdi.stat.wisc.edu>
Message-ID: <x2afcn2nj5.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> 
> OK, I phrased that wrong.  I have found that I can't use lynx or
> chimera or arena or w3 to view the initial page at
> $RHOME/html/index.html because it uses tables.  I guess that is more
> of a problem with the browsers than with the html files.
> 
> It appears that recent versions of lynx still cannot work with tables.

Huh? Lynx 2.7.1 seems OK here. The tabular layout is a bit -- hmm,
lacking, but it's usable enough:

                               The R Language
                   Tutorials Data Structures Control Flow
                            Data Entry Graphics
                            Data Analysis with R
          Basic Statistics Exploratory Data Analysis Linear Models

The only silliness is the remark "Only the bold entries are real",
because in Lynx, *all* entries with a link are bold.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 23 15:50:10 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 23 Jan 1998 16:50:10 +0100
Subject: hist: rel.freqs  --> pre-release version of hist(.)
In-Reply-To: <34C8A0C6.11E8BEBE@ulg.ac.be> (message from Philippe Lambert on
 Fri, 23 Jan 1998 14:53:10 +0100)
Message-ID: <199801231550.QAA11412@sophie.ethz.ch>

Dear Philippe,

you've reported a known bug, the fix of which hadn't made it into 0.61.1
because the fix included substantial enhancements
(and we decided that only small or important fixes should go into patches).

Following is the current (0.62 prerelease) version of

	RHOME/src/library/base/R/hist

[[BTW: If you dare to live on the bleeding edge,
	you can always pickup the current development source from
	  <CRAN>/src/devel/R-snapshot.tar.gz
]]

Martin

------------------------------------------------------------------

hist <- function(x, ...) UseMethod("hist")

hist.default <-
function (x, breaks, freq = NULL, probability = !freq, include.lowest = TRUE,
	col = NULL, border = par("fg"),
	main = paste("Histogram of" , deparse(substitute(x))),
	xlim = range(breaks), ylim = range(y, 0),
	xlab = deparse(substitute(x)), ylab,
	axes = TRUE, plot = TRUE, labels = FALSE, ...)
{
	if (!is.numeric(x))
		stop("hist: x must be numeric")
	eval(main)
	eval(xlab)
	n <- length(x <- x[!is.na(x)])
	use.br <- !missing(breaks) && length(breaks) > 1
	breaks <-
	  if(use.br) sort(breaks)
	  else {
		rx <- range(x)
		pretty (rx + c(0, diff(rx)/1000),
			n = if(missing(breaks)) 1 + log2(n)
			else { # breaks = `nclass'
				if (is.na(breaks) | breaks < 2)
				  stop("invalid number of breaks")
				breaks
			})
	  }
	nB <- length(breaks)
	counts <- .C("bincount",
		as.double(x),
		n,
		as.double(breaks),
		nB,
		counts = integer(nB - 1),
		include= as.logical(include.lowest),
		NAOK = FALSE) $counts
	if (any(counts < 0))
	  stop("negative `counts'. Internal Error in C-code for \"bincount\"")
	if (sum(counts) < n)
	  stop("some `x' not counted; maybe `breaks' do not span range of `x'")
	h <- diff(breaks)
	if (!use.br && any(h <= 0))
		stop("not strictly increasing `breaks'.")
	if (is.null(freq)) {
	  freq <- if(!missing(probability))
		!as.logical(probability)
	  else if(use.br) {
		##-- Do frequencies if breaks are evenly spaced
		max(h)-min(h) < 1e-7 * mean(h)
	  } else TRUE
	} else if(!missing(probability) && any(probability == freq))
	 stop("`probability is an alias for `!freq', however they differ.")
	intensities <- counts/(n*h)
	mids <- 0.5 * (breaks[-1] + breaks[-nB])
	y <- if (freq) counts else intensities
	if (plot) {
		plot.new()
		plot.window(xlim, ylim, "") #-> ylim's default from 'y'
          	if (missing(ylab))
                	ylab <- paste(if(!freq)"Relative ", "Frequency", sep="")
                if(freq && use.br && max(h)-min(h) > 1e-7 * mean(h))
                	warning("the AREAS in the plot are wrong -- maybe use `freq=F'")
		title(main = main, xlab = xlab, ylab = ylab, ...)
		if(axes) {
			axis(1, ...)
			axis(2, ...)
		}
		rect(breaks[-nB], 0, breaks[-1], y,
		     col = col, border = border)
		if(labels)
			text(mids, y,
			     labels = if(freq) counts else round(intensities,3),
			     adj = c(0.5, -0.5))
	}
	invisible(list(breaks = breaks, counts = counts,
		intensities = intensities, mids = mids))
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Jan 23 15:55:33 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 23 Jan 1998 16:55:33 +0100
Subject: non-standard HTML? [Re: netscape to become freely redistributable]
In-Reply-To: <x2afcn2nj5.fsf@blueberry.kubism.ku.dk>
References: <199801231307.OAA11280@sophie.ethz.ch>
 <6ru3avi5sw.fsf@verdi.stat.wisc.edu>
 <x2afcn2nj5.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801231555.QAA00544@galadriel.ci.tuwien.ac.at>

>>>>> On 23 Jan 1998 16:55:10 +0100,
>>>>> Peter Dalgaard BSA (PDB) wrote:

PDB> Douglas Bates <bates@stat.wisc.edu> writes:
>> 
>> OK, I phrased that wrong.  I have found that I can't use lynx or
>> chimera or arena or w3 to view the initial page at
>> $RHOME/html/index.html because it uses tables.  I guess that is more
>> of a problem with the browsers than with the html files.
>> 
>> It appears that recent versions of lynx still cannot work with tables.

PDB> Huh? Lynx 2.7.1 seems OK here. The tabular layout is a bit -- hmm,
PDB> lacking, but it's usable enough:

PDB>                                The R Language
PDB>                    Tutorials Data Structures Control Flow
PDB>                             Data Entry Graphics
PDB>                             Data Analysis with R
PDB>           Basic Statistics Exploratory Data Analysis Linear Models

PDB> The only silliness is the remark "Only the bold entries are real",
PDB> because in Lynx, *all* entries with a link are bold.

Funny that today everybody seems to be starting to discuss the html
pages ...

I am reworking all html pages this weekend (the necessary files are
already on a floppy and wait for me to go home) ... this includes the top
page. I will also change the layout of all functions pages etc.

But I definetely will use tables etc because I don't know how to
format some of the pages without. But I'm currently putting lynx 2.7.1
on a floppy, so I will try to make the pages look as goos as possible
under lynx (though this has low priuority for me as we have a
text-representation using nroff).

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 23 22:03:58 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 23 Jan 1998 16:03:58 -0600
Subject: Copyrights for R contributed libraries
In-Reply-To: Douglas Bates's message of 23 Jan 1998 15:58:48 -0600
References: <6riuran97r.fsf@verdi.stat.wisc.edu>
Message-ID: <6rhg6un8z5.fsf@verdi.stat.wisc.edu>

I have been packaging both R and the R contributed libraries for the
Debian GNU/Linux operating system.  Right now if anyone installs
Debian Linux on an Intel machine or a DEC Alpha they will have the
option of installing R as a regular part of the operating system.  I
think this is a good way of getting wider distribution of high quality
statistical software.  The Linux community is growing rapidly and is
one of the highlights of the free software effort.  I have heard from
several people who started using R because it was included with 
Debian Linux.
 
Since vendors are encouraged to make CD-ROM's from the entire
distribution, the Debian organization is very careful about copyrights 
for the code.  The base R language is covered by the GNU Public
License (GPL) but some of the contributed libraries have other
copyright statements.  As a result I have divided the libraries into
r-cran, the contributed libraries that are covered by a copyright that 
follows the Debian Free Software Guidelines (DFSG), r-cran-non-free,
the contributed libraries that do not seem to be DFSG-compliant, and
r-mlbench.  That mlbench library is split into its own package because 
it is large and not everyone wants to install it.

I have just been informed (see below) that the copyright statement I
made about the r-cran-non-free package is insufficient.  I have to
clarify the copyright status of every library included in this
package.  I'm a little pressed for time right now and may not be able
to do this by myself.  My only option then would be to withdraw the
package.  I think that would be a shame because the package contains
very useful libraries like the survival analysis library.

I believe Kurt and Fritz are going to start to ask for contributed
libraries to include a statement of copyright as part of the
submission to CRAN.  That would help me a lot.  Could anyone
converting a library or writing a new library please take care to
include a copyright statement?  If you are converting a library and
the copyright status of the original code seems murky, please try to
contact the original authors and get the copyright status cleared up.

If we could quickly establish a format for the copyright file for a
submitted library and contributors could update their libraries, that
again would help a lot.  I don't like making work for others but I
think there are great benefits from this.  I believe that it is
helpful to have good cooperation between the Debian organization and
the R developers.

I personally prefer the GPL for code but the "Artistic" license under
which perl is distributed or the BSD-style license are also acceptable
for the regular Debian distribution.

Feel free to contact me if I can provide further information.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
------- Start of forwarded message -------
Subject: Bug#17407: r-cran-non-free: incomplete copyright file
Reply-To: Christian Schwarz <schwarz@monet.m.isar.de>, 17407@bugs.debian.org
Resent-CC: Douglas Bates <bates@cs.wisc.edu>
Resent-Date: Fri, 23 Jan 1998 07:33:01 GMT
Resent-Message-ID: <handler.17407.B.8855406599032@bugs.debian.org>
Date: Thu, 22 Jan 1998 18:23:40 +0100 (CET)
From: Christian Schwarz <schwarz@monet.m.isar.de>
To: Debian Bugs <submit@bugs.debian.org>
Message-ID: <Pine.LNX.3.96.980122182112.6087A-100000@monet>


Package: r-cran-non-free
Version: 0.61-2

The /usr/doc/r-cran-non-free/copright file reads:

--cut-here--
Individual modules, installed under /usr/lib/R/library/, contain their
own copyright statements.  These modules considered not to be Debian
Free Software Guidelines (DFSG) compliant.
--cut-here--

According to current policy, the copyright file should contain the
complete license texts. (This is important, since we are planning to set
up a license/ directory on ftp.debian.org which contains the copyright
files from all non-free packages.)


Thanks,

Chris

--                 Christian Schwarz
Do you know         schwarz@monet.m.isar.de, schwarz@schwarz-online.com,
Debian GNU/Linux?    schwarz@debian.org, schwarz@mathematik.tu-muenchen.de
      
Visit                  PGP-fp: 8F 61 EB 6D CF 23 CA D7  34 05 14 5C C8 DC 22 BA
http://www.debian.org   http://fatman.mathematik.tu-muenchen.de/~schwarz/

------- End of forwarded message -------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jan 26 13:16:58 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 26 Jan 1998 14:16:58 +0100
Subject: New design for R html help pages
Message-ID: <199801261316.OAA18164@galadriel.ci.tuwien.ac.at>


Hi,

I've completed a re-design of the R html help pages over the weekend
(without the Kitzb=FChel ski races on TV I would have had some more time
...). The design is actually not from me but from Tanja Afra, a
student of our department.

Anyway, I've put a snapshot on

	http://www.ci.tuwien.ac.at/~leisch/R/doc/html/index.html

please have a look and feel free to make any suggestions when you
think something is not intuitive or ... I really want to get feedback
before I start writing new stuff.

I'm mostly concerned about usability, function is more important than
form. The biggest changes are in the listing of the base package
... there is now a description for each function in it and a
click-able alphabet in the beginning (known bug: it also includes dead
links for letters where no R objects exist.

The function pages contain no `back' button on purpose ... eventually
I also want to include pages from different locations than
$RHOME/library and then there will be no way to have a back button
(these use relative links working only inside $RHOME). Use your
browser's back button or history instead

Features I'll implement once we have agreed on the design:

	*) alphabetic list of all functions installed in RHOME
	*) function lists sorted by keywords
	*) help() optionally sends a request to netscape instead of
	   displaying the nroff version (controlled via options or
	   something similar)

Features I'd like to have but don't know how to do (because I don't
speak Java):
	*) search the help pages


Ok, so much for contents, now for design: The look of a product is
certainly important when trying to sell something, so I really think
we should have something slick (would be depressing if people don't
use R simply because the Splus manual looks better ...)

I don't want to enforce the logo ... it's just that pages look better
with something on it and I think Tanja did a nice job ... if soembody
send's a better one, I've just to replace one jpg file.


Ok, so much for now.

Best,
Fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jan 26 16:45:29 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 26 Jan 1998 11:45:29 -0500
Subject: library.dynam
Message-ID: <98Jan26.115659est.13442@mailgate.bank-banque-canada.ca>

I keep an Splus library on our file server and support different architectures
by giving different names to compiled files to be loaded (eg. Sun4.dse.so,
Sun5.dse.so). I have the impression that it is not possible to do this with R's
current library.dynam(name)  because it uses the name to indicate both the
location and name of the binary file? Is that correct or could someone explain
how I do this?

Thanks,
Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 26 17:58:54 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 26 Jan 1998 18:58:54 +0100
Subject: Factor variables are not vectors...
In-Reply-To: <Pine.SUN.3.95.980126083031.935A-100000@chekov> (message from
 Thomas Lumley on Mon, 26 Jan 1998 08:34:35 -0800 (PST))
Message-ID: <199801261758.SAA08574@sophie.ethz.ch>

	[diverted from R-help to R-devel;  this gets technical ...]
>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> On Mon, 26 Jan 1998, Jim Lindsey wrote:

    >> 2. Factor variables are not vectors!!
    >> is.vector(gl(20,2,40)) gives FALSE

    TL> Even stranger 

    R> is.vector(factor(1:3))# [1] FALSE
    R> is.factor(factor(1:3))# [1] TRUE
    R> is.vector(as.vector(factor(1:3)))# [1] TRUE
    R> is.factor(as.vector(factor(1:3)))# [1] TRUE

    TL> so that factor variables *can* be vectors, but aren't naturally.

and why should they, really?

	(BTW, they are not either in S-plus, by the way).

In your code, shouldn't you test rather 

	if(!is.array(..))

instead?


-------------------

But if we are bashing on  is.vector(.):

Here is an excerpt from a mail I wrote more than 9 months ago:

##- Date: Mon, 7 Apr 97 09:33:51 +0200
##- From: Martin Maechler <maechler@stat.math.ethz.ch>
##- Cc: r-devel@stat.math.ethz.ch
##- In-Reply-To: <199704062058.IAA09618@stat1.stat.auckland.ac.nz> (message from
##- 
##- Ross>> Another reasonable definition of "vector" is !is.array(x).
##- Ross>> or possibly "isVector(x) == 1 && !is.array(x)

##- Yes, I think
##- 		isVector(x) == 1 && !is.array(x)
##- 
##- is the way to go, at least for   mode = 'any'
##- 
##- Now, for the 2nd argument  mode = '...' :
##- I think it should always be more restrictive, i.e.,
##- 	  is.vector(OB, mode= MODE)   <-->   is.vector(OB) &&  MODE.test(OB)
##- 
##- which is not the case currently [[correcting a typo in $RHOME/TASKS l.449-451]

 is.vector(call("ls"))			#[1] FALSE --- but SHOULD be 'TRUE'
 is.vector(call("ls"), mode='language')	#[1] TRUE
 is.vector(call("ls"), mode='call')	#[1] FALSE

## [[here, is.vector(call("ls"), mode='any')  should really return TRUE]]


-----
Martin Maechler
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 27 17:18:11 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 27 Jan 1998 12:18:11 -0500
Subject: New design for R html help pages
References: <199801261316.OAA18164@galadriel.ci.tuwien.ac.at>
 <98Jan26.114658est.13441@mailgate.bank-banque-canada.ca>
 <199801261652.RAA18287@galadriel.ci.tuwien.ac.at>
 <98Jan26.123117est.13448@mailgate.bank-banque-canada.ca> <199801270812.JAA18581@galadriel.ci.tuwien.ac.at>
Message-ID: <98Jan27.123012est.13452@mailgate.bank-banque-canada.ca>

Fritz

One potential problem with the html help is the difficulty of dealing with file
systems which do not support long file names (since you're using function names
as file names). I guess we can ignore DOS. I'm not sure if Windows poses any
problems, but for some reason I thought there were some Unixes that also caused
problems?

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Tue Jan 27 18:42:17 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Wed, 28 Jan 1998 07:42:17 +1300 (NZDT)
Subject: New design for R html help pages
Message-ID: <199801271842.HAA19283@stat1.stat.auckland.ac.nz>

There will definitely be problems on Windows if we go to a system with
long file names. We really must maintain (at a least a version of the
html help) with file names that comply with the old Windows standard
of 8.3. There are a large number of machines (most in students hands)
that run older versions of windows.

robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 27 19:32:19 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 27 Jan 1998 14:32:19 -0500
Subject: New design for R html help pages
References: <199801271842.HAA19283@stat1.stat.auckland.ac.nz>
Message-ID: <98Jan27.144419est.13448@mailgate.bank-banque-canada.ca>

One approach to handling long file names might be to convince everyone to
upgrade to Win95 or Linux.

Another approach is to build an index which points to files with meaningless
names. This is what I did a few years ago with my help system. It's definetly
not as nice, but it does work. You can take a look at
<http://www.bank-banque-canada.ca/pgilbert/help/dsehome.htm>
It might be best to do this as a special needs help system as I think this is a
problem that is going away. Keep the approach you're using and then build this
system afterwards.

You're welcome to use my scripts. I think they could be modified fairly easily
to build the index and files out of the html files (but I haven't looked at them
in a long time so I might be forgetting something).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 27 19:59:29 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Jan 1998 20:59:29 +0100
Subject: New design for R html help pages
In-Reply-To: Paul Gilbert's message of Tue, 27 Jan 1998 14:32:19 -0500
References: <199801271842.HAA19283@stat1.stat.auckland.ac.nz>
 <98Jan27.144419est.13448@mailgate.bank-banque-canada.ca>
Message-ID: <x2zpkhwuvy.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> Another approach is to build an index which points to files with meaningless
> names. This is what I did a few years ago with my help system. It's definetly
> not as nice, but it does work. You can take a look at
> <http://www.bank-banque-canada.ca/pgilbert/help/dsehome.htm>

Of course, what you really want is "magic links", so that jumping to
say idx.htm#long.winded.fname automagically transfers you to say
xr025.thm which contains the actual documentation for
long.winded.fname. Judging from the hoops that web pages seem to jump
through, one should expect that to be possible, but...

There's a third approach: Rdconv -t rtf followed by the Windows help
compiler. That would give the standard WinHelp interface and remove
the dependency on the browser. The obvious problem is how to get
Rdconv to accept the rtf option...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 27 20:44:10 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 27 Jan 1998 15:44:10 -0500
Subject: New design for R html help pages
References: <199801271842.HAA19283@stat1.stat.auckland.ac.nz>
 <98Jan27.144419est.13448@mailgate.bank-banque-canada.ca> <x2zpkhwuvy.fsf@blueberry.kubism.ku.dk>
Message-ID: <98Jan27.155919est.13442@mailgate.bank-banque-canada.ca>

>Of course, what you really want is "magic links", so that jumping to
>say idx.htm#long.winded.fname automagically transfers you to say
>xr025.thm which contains the actual documentation for
>long.winded.fname.

What I did is about as close as I could get without magic links. In the index,
if you click on the name of a function you do get directly to the help for that
function (a file with a meaningless name). If you click on a "see also" link you
jump to the index at the name of the function, so you have to click a second
time on the name of the function. It was a compromise that didn't seem too bad
and made things realively simple.

I also considered rtf. I thought that I could do it but quickly realized that
the ongoing support effort would kill me. HTML was a choice that worked for Unix
(which I mainly use) and also for Windows. I was afraid that if I had to make
any ongoing special separate effort for Windows then it would quickly get
out-of-date.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 29 09:17:29 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 29 Jan 1998 10:17:29 +0100
Subject: Summary of mails concerning R help system
Message-ID: <199801290917.KAA25806@galadriel.ci.tuwien.ac.at>


Hi,

here's a short summary of all the mails I got concerning the R help
system during the last days ... I really want to have all open
questions in this list, so if I forgot your most important topic
please forgive (and remind me again) ... it's probably only because of
lack of time such that I had to compile the list in a hurry ...

Ok, here we go:

1) It would be useful to have a button at the bottom and/or top of each page
which returns to the index. If you jump around a few "see also's" it is hard to
get back to the index ==> fairly easy, will be in the final version


2) dealing with packages not located in $RHOME/library ... that's the
most complicated part ... ideally the package list would look
different for every user, such that everybody sees the system-wide
installed pkgs together with his private pkg's

two possible solution's come to mind:

 - building the pkg list at run-time (via help.start())

 - building a list for every user, i.e. everytime one issues R INSTALL 
   a file in the user's home directory is modified

both have one major drawback which I don't know how to handle: I have
to jump between a static file located in $RHOME/docs/html and a
user-specific file, say $HOME/.R/pkg-list.html

but there seems to be no tilde expansion or $HOME variable in html,
i.e., an URL like "file:~/.R/pkg-list.html" works neither in netscape
nor lynx.


3) Short file names for windoze 3.1 systems ... there seems to be an
easy solution that I missed so far (simply replace the filenames by
something meaningless, because I use hash arrays to match aliases and
coprresponding files anyway), so this could be finished by
monday (if it really works like I think it should).


4) Rdconv -t rtf  to support the windoze help format ... I definetely
don't have time or any motivation to do that, so if somebody wants to
do that, he's welcome.


5) That's actually a wish/suggestion from me: Maybe somebody wants to
help the R project but doesn't know too much about writing code
etc. ... we need a lot more of and better documentation, e.g., short
tutorials on various topics to get people started. These should
explain the basic concept of something and accompany it with some
examples that can be copied & pasted ...

The current demos or the appendix of the R notes could get you
started.  Topics could include those as the the non-existing links
under ``Data Analysis with R'' (Basic Statistics, Exploratory Data
Analysis, Linear Models, ...)

So if you think you could write two or three pages on how to use R for
any topic you could simply write it in LaTeX ideally in such a way
that it can be translated to HTML using hyperlatex ...


Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 29 12:59:16 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Jan 1998 13:59:16 +0100
Subject: Summary of mails concerning R help system
In-Reply-To: Friedrich Leisch's message of Thu, 29 Jan 1998 10:17:29 +0100
References: <199801290917.KAA25806@galadriel.ci.tuwien.ac.at>
Message-ID: <x290rzfnbv.fsf@blueberry.kubism.ku.dk>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> 4) Rdconv -t rtf  to support the windoze help format ... I definetely
> don't have time or any motivation to do that, so if somebody wants to
> do that, he's welcome.

Actually, you are probably the one best *capable* of doing it, but
obviously someone needs to dig out the relevant instructions for what
is supposed to translate to what, and how to get and apply the help
compiler. I snooped around at some point and found some pointers, but
of course I didn't do it systematically in any way. There are, btw,
also (commercial) HTML to WinHelp converters, which I suppose we could
get someone to pay for a copy of.

> 5) That's actually a wish/suggestion from me: Maybe somebody wants to
> help the R project but doesn't know too much about writing code
..
> So if you think you could write two or three pages on how to use R ...
                                  ^^^^^^^^^^^^^^^^^^
.. I'll send you a lollipop. These things tend to expand!   

The first ca. 10 pages of my course notes might actually form the
basis of a "tutorial round trip" for zero-knowledge users, once I get
them translated from Danish. 

I've done a little of that already, but right now, my priorities are
on revising the Danish version before my students need them (due to
<mumble>, they have to learn ANOVA before linear regression this time,
which is a fairly innocent change at the theoretical level, but
implies quite some perturbation at the software level)

One thing we need to be aware of is that there are several types of
users at several skill levels, and that the help system should be
useful for all of them. In particular, we have practitioners (some of
which are not statistical professionals), and academics/programmers.
These - or even the same person in different modes - will be looking
for very different things. Also one should know that a good
introduction is meant to be read exactly once, nothing is more
annoying than when the author has put everything in one document and
you have to wade through pages of trivialities to find the one piece
of information you need.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Thu Jan 29 14:37:32 1998
From: luke@stat.umn.edu (Luke Tierney)
Date: Thu, 29 Jan 1998 08:37:32 -0600 (CST)
Subject: Summary of mails concerning R help system
In-Reply-To: <x290rzfnbv.fsf@blueberry.kubism.ku.dk> from "Peter Dalgaard BSA" at Jan 29, 98 01:59:16 pm
Message-ID: <9801291437.AA29282@nokomis.stat.umn.edu>

Peter Dalgaard BSA wrote:
> 
> Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:
> 
> > 4) Rdconv -t rtf  to support the windoze help format ... I definetely
> > don't have time or any motivation to do that, so if somebody wants to
> > do that, he's welcome.
> 

A curious aside: one of the C compilers I use on Windows has all its
documentation in html files and uses a browser integrated into its
environment to read the help. The manufacturer of the compiler is
located somewhere near Seattle :-).

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
206 Church Street                            email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan  2 17:14:03 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Fri, 2 Jan 1998 11:14:03 -0600 (CST)
Subject: is .Dyn.libs saved in .Rdata?
Message-ID: <m0xoAfb-000hh5C@franz.stat.wisc.edu>

I seem to be having problems with the value of .Dyn.libs being saved
between sessions.  The value is being assigned in library.dynam by
                assign(".Dyn.libs", c(.Dyn.libs, name), envir = .GlobalEnv)
I don't know enough about R environments to decide if this means it
will be saved between sessions if the workspace is saved and
restored.  If so, this should be changed because you do not want to
restore previous values of this variable in a new session.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan  5 07:49:12 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 5 Jan 1998 08:49:12 +0100
Subject: unary !
In-Reply-To: <Pine.SOL.3.95.980104105608.7341B-100000@gorn> (message from
 Thomas Lumley on Sun, 4 Jan 1998 10:58:25 -0800 (PST))
Message-ID: <199801050749.IAA00426@sophie.ethz.ch>

[spill over from  R-core]

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> On Sun, 4 Jan 1998, Kurt Hornik wrote:
    >> Another thing I noticed when playing with chron is that apparently
    >> code like if (!(length(value)) works in S but not in R.  The error
    >> in R is unary ! is only defined for logical vectors
    >> 
    >> I assume that this is a bug and not a feature (although the code in
    >> src/main/logic.c makes me wonder ...).

    TL> I complained about this more than a year ago and I thought we (or
    TL> in those days R+R) had decided it was a feature -- I just explained
    TL> to someone on r-help that it was one of the deliberate
    TL> incompatibilities that ! didn't work on numerics.

Yes, positively.  We've discussed this quite a bit, and
this was defined to be a feature long ago.

The proper (non C-hacker but normal-user readable) way  is to test for

	if(length(vector) == 0)

- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan  5 09:23:16 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 5 Jan 1998 10:23:16 +0100
Subject: as.numeric changes?
In-Reply-To: <199801050102.OAA07591@stat1.stat.auckland.ac.nz> (message from
 Ross Ihaka on Mon, 5 Jan 1998 14:02:14 +1300 (NZDT))
Message-ID: <199801050923.KAA00538@sophie.ethz.ch>

[another spill over from R-core
 concering the new behavior of as.numeric(.) for factors. - MM]

>>>>> "Ross" == Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

    Ross> Thomas Lumley writes:
 > On 27 Dec 1997, Peter Dalgaard BSA wrote:
 > > Thomas Lumley <thomas@biostat.washington.edu> writes:
 > > 
 > > > Now as.numeric() operates on the levels of the factor	
 > > > 	 > as.numeric(factor(c("2","3")))
 > > > 	 [1] 2 3
 > > > 	 > as.numeric(factor(c("A","B")))
 > > > 	 [1] NA NA
 > > > 
 > > > Is this new behaviour a feature? If so, we need to document it in the FAQ
 > > > and the help page.
 > > 
 > > I seem to remember that it got changed in S-plus 3.4 -> 4.0 ? I also
 > > prefer the old behavior, but perhaps codes() is better anyway?

codes(.) is now well documented.
Maybe we should add some extra like

 Note that  \code{\link{as.numeric}(f)} does \emph{not} give the same as
 \code{codes(f)}.  This is not compatible to version of Splus prior to 4.0

    >> We are entirely Unix-based here, so I haven't seen Splus 4.0. I'm
    >> happy to have the new version of as.numeric but I think it needs
    >> documentation as an incompatibility at least with Unix S(-PLUS).

    Ross> Mea culpa.  I as attempting to get rid of what I though was an S
    Ross> incompatibility and succeeded in replacing it with another.

    Ross> I'm not very happy with:

    >> as.numeric(factor(c(100, 200)))
    Ross> 	[1] 1 2

    Ross> but I can live with it. 

Ok, I've now checked it on our PC (S-plus 4.0):
This is the same as  S 4 ("L"), S-plus 3.4 and S-plus 4.0  

On the other hand,
 
	> as.numeric(factor(c("A","B")))
 	[1] NA NA

is not compatible to any version of S-plus or S 4
and I now wonder if we shouldn't go for compatibility here.

- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Jan  5 17:09:38 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 5 Jan 1998 09:09:38 -0800 (PST)
Subject: English compatibility library
In-Reply-To: <34B0B3FB.3A42@math.uio.no>
Message-ID: <Pine.SUN.3.95.980105090633.1964B-100000@chekov>


Is there any good reason not to add the following:

	# R English compatibility library
	licence<-license
	colours<-colors
	heat.colours<-heat.colors
	terrain.colours<-terrain.colors
	topo.colours<-topo.colors
	optimise<-optimize
	

I don't actually have difficulty with any of the R terms, but this sort of
thing can be annoying.  In LaTeX I still type \begin{itemise} annoyingly
often.


Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jan  5 19:20:27 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 5 Jan 1998 14:20:27 -0500
Subject: make docs
Message-ID: <98Jan5.142048est.13456@mailgate.bank-banque-canada.ca>

Installing 0.61 in Solaris (SunOS 5.5) I am getting the following error when I
try to make docs or make help

[28] /home/res8/gilp/R : make docs
make: Fatal error: Don't know how to make target `../src/library/*/man/*.Rd'
Current working directory /home/res8/gilp/R-versions/R-0.61/etc

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jan  5 19:55:12 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Jan 1998 20:55:12 +0100
Subject: make docs
In-Reply-To: Paul Gilbert's message of Mon, 5 Jan 1998 14:20:27 -0500
References: <98Jan5.142048est.13456@mailgate.bank-banque-canada.ca>
Message-ID: <x2pvm6u25b.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> Installing 0.61 in Solaris (SunOS 5.5) I am getting the following error when I
> try to make docs or make help
> 
> [28] /home/res8/gilp/R : make docs
> make: Fatal error: Don't know how to make target `../src/library/*/man/*.Rd'
> Current working directory /home/res8/gilp/R-versions/R-0.61/etc

This is well-known and caused by use of a non-GNU make. Unfortunately,
we don't quite know how to work around it...

If you have GNU make installed and not called "make" but e.g. "gmake",
just do "cd etc ; gmake build-docs". Otherwise, the trick is to
replace the right hand side of the below definition in etc/Makefile
with its shell expansion.

MANSRC = ../src/library/*/man/*.Rd

or, for Solaris *only* (I think), you can replace it with this:

MANSRC:sh = echo ../src/library/*/man/*.Rd

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jan  5 22:23:01 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 5 Jan 1998 17:23:01 -0500
Subject: Error in parse
Message-ID: <98Jan5.172327est.13453@mailgate.bank-banque-canada.ca>

I have narrowed my problem with parse to the example below. This is not a
working piece of code, but does cause the source problem. (This also occurs with
R 0.61.) The code will cut and paste into R ok, but if I cut and paste into a
file and source the file I get
Error in parse(file, n, text, prompt) : syntax error on line 23

Relatively minor things like changing
   }  }  }  }
to
   }  }  }
}
will make the problem go away. (So I guess I know a solution, but it seems like
there is a bug.)

Paul Gilbert
________

ARMA <- function(model)
{
if (0 !=m) if (p != dim(C)[2]) stop("dimension of model parameters do not
conform!")
if (fortran)  if (m==0) C <- array(0,c(1,p,1))
else
  {for (Time in 1:sampleT)
      {if (b >= 2) for (l in 2:b)
          if (l<=Time) vt <- vt - c(B[l,,] %*% prederror[Time+1-l,])
       if (m!=0) for (l in 1:dim(C)[1])
          if (l<=Time) vt <- vt - c(C[l,,] %*% u[Time+1-l,])
       prederror[Time,] <- vt
       if (any(0!=error.weights))
        {
         if (length(error.weights)>1)
           {for (h in 2:length(error.weights))
            if ( (Time+h-1) <= sampleT)
              {vt    <-  rep(0,p)
     }  }  }  }
  }
1
}

KF <- function(model)
{2}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  6 10:11:56 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Jan 1998 11:11:56 +0100
Subject: Error in parse
In-Reply-To: Paul Gilbert's message of Mon, 5 Jan 1998 17:23:01 -0500
References: <98Jan5.172327est.13453@mailgate.bank-banque-canada.ca>
Message-ID: <x24t3hkj2r.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> Error in parse(file, n, text, prompt) : syntax error on line 23
...
> 
> ARMA <- function(model)
> {
> if (0 !=m) if (p != dim(C)[2]) stop("dimension of model parameters do not
> conform!")
> if (fortran)  if (m==0) C <- array(0,c(1,p,1))
> else
>   {for (Time in 1:sampleT)
>       {if (b >= 2) for (l in 2:b)
>           if (l<=Time) vt <- vt - c(B[l,,] %*% prederror[Time+1-l,])
>        if (m!=0) for (l in 1:dim(C)[1])
>           if (l<=Time) vt <- vt - c(C[l,,] %*% u[Time+1-l,])
>        prederror[Time,] <- vt
>        if (any(0!=error.weights))
>         {
>          if (length(error.weights)>1)
>            {for (h in 2:length(error.weights))
>             if ( (Time+h-1) <= sampleT)
>               {vt    <-  rep(0,p)
>      }  }  }  }
>   }
> 1
> }
> 
> KF <- function(model)
> {2}


What is happening here is that the lexical analyser reads the "KF"
token on the penultimate line, but the parser never sees it. 

This must be related to the token-lookahead code in main/src/gram.[yc]
(the token() function). The R_ParseFile function works by repeated
calls to R_Parse1File, which parses single expressions in the file and
R_Parse1File starts with ParseInit(), which as one of its first duties
sets SavedToken = 0. So if a token is saved and not used at the end of
one expression, it gets discarded.

So the bug is one of two (or both):

1) There's a bug in the readahead logic (this essentially works by
counting if's, else's, braces and newlines, so it would be no wonder
if your code tickled it)

2) It is wrong to assume that there's no initial saved token when
parsing 2nd and subsequent expressions in a file.

I think #1 is certainly present, because there should be no reason
to read past the terminating brace in your ARMA() function to detect
the end of it, but I'm not sure that you can't get other examples
where readahead will happen legally.

<better hand this over to Ross now>

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan  6 10:36:18 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 6 Jan 1998 11:36:18 +0100
Subject: R-beta: More glm bugs
In-Reply-To: <9801061000.AA20049@alpha.luc.ac.be> (message from Jim Lindsey on
 Tue, 6 Jan 1998 11:00:11 +0100 (MET))
Message-ID: <199801061036.LAA02319@sophie.ethz.ch>

>>>>> "Jim" == Jim Lindsey <jlindsey@luc.ac.be> writes:

    Jim> 1. The null degrees of freedom do not allow for observations weighted
    Jim> out although the residual df do.
    Jim> in glm.fit(), line. 271, change to
    Jim> nulldf <- nobs-qs.numeric(intercept)-sum(weights==0)
    Jim> similar to the following line for residual df

    Jim> 2. in print.glm(), I do not know what "Total df" means. At present, it
    Jim> is the length of the residal vector, hence not allowing for
    Jim> observations weighted out, which does not make much sense. Logically,
    Jim> it should be the df for the null deviance that follows directly and
    Jim> this is how students here tend to interpret it. Hence, I suggest that
    Jim> line 286 be changed to
    Jim> cat("\nDegrees of Freedom:",x$df.null,"Total;",
    Jim> etc.

    Jim> 4. The problem with names of coefficients being mixed up when there
    Jim> is aliasing, that I have pointed out for some time with each new
    Jim> release, is still not corrected in 0.61. The fix is in the archives
    Jim> (move the 4 or 5 lines that shift names outside the iteration loop in
    Jim> glm.fit)

I'm fixing these three (above). They should be in the next release
(0.61.patched  aka 0.61.1)

----

The following, I think is more a problem  of  model.matrix(.) and such lower
level functions which I leave for  Thomas and Ross ...

    Jim> 3. The following two lines should produce the same result but don't:
    Jim> glm(y~x1:x2:x3-x1:x2:(1+x3))
    Jim> glm(y~x1:x2:x3-x1:x2:-x1:x2:x3)
    Jim> Only the second gives the correct answer. I have not tried to fix this.

-- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  6 12:21:52 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Jan 1998 13:21:52 +0100
Subject: R-beta: More glm bugs
In-Reply-To: Martin Maechler's message of Tue, 6 Jan 1998 11:36:18 +0100
References: <199801061036.LAA02319@sophie.ethz.ch>
Message-ID: <x21zylkd27.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> The following, I think is more a problem  of  model.matrix(.) and such lower
> level functions which I leave for  Thomas and Ross ...
> 
>     Jim> 3. The following two lines should produce the same result but don't:
>     Jim> glm(y~x1:x2:x3-x1:x2:(1+x3))
>     Jim> glm(y~x1:x2:x3-x1:x2:-x1:x2:x3)
>     Jim> Only the second gives the correct answer. I have not tried to fix this.

There seems to be a typo in Jims 2nd example (extra :) (no, that was
not a smiley...). However, the problem seems to boil down to this:

> model.matrix(~x1:x2:1)
     (Intercept)
[1,]           1
[2,]           1
[3,]           1
[4,]           1
[5,]           1
[6,]           1
[7,]           1
[8,]           1
attr(,"assign")
[1] 0

Which is pretty clearly wrong. It should be the same as ~x1:x2

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 15:55:41 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Tue, 6 Jan 1998 09:55:41 -0600 (CST)
Subject: tapply and factors in R-0.61
Message-ID: <m0xpbLx-000hhBC@franz.stat.wisc.edu>

Somehow it seems that tapply converts factors given as the _first_
argument to a numerical representation without the old factor levels.

> unlist(lapply(Machines, data.class))
   Worker   Machine     score 
"ordered"  "factor" "numeric" 
> Machines[ 1:10, ]
Grouped Data: score ~ 1 | Worker
   Worker Machine score
1       1       A  52.0
2       1       A  52.8
3       1       A  53.1
4       2       A  51.8
5       2       A  52.8
6       2       A  53.1
7       3       A  60.0
8       3       A  60.2
9       3       A  58.4
10      4       A  51.1
> tapply( Machines$Machine, Machines$Worker, function(x) x )
$6
[1] 1 1 1 2 2 2 3 3 3

$2
[1] 1 1 1 2 2 2 3 3 3

$4
[1] 1 1 1 2 2 2 3 3 3

$1
[1] 1 1 1 2 2 2 3 3 3

$3
[1] 1 1 1 2 2 2 3 3 3

$5
[1] 1 1 1 2 2 2 3 3 3

> tapply( Machines$Machine, Machines$Worker, data.class )
       6        2        4        1        3        5 
"factor" "factor" "factor" "factor" "factor" "factor" 
> tapply( Machines$Machine, Machines$Worker, levels )
$6
character(0)

$2
character(0)

$4
character(0)

$1
character(0)

$3
character(0)

$5
character(0)
> levels( Machines$Machine )
[1] "A" "B" "C"

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 15:59:46 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Tue, 6 Jan 1998 09:59:46 -0600 (CST)
Subject: More on tapply and factors
Message-ID: <m0xpbPu-000hhBC@franz.stat.wisc.edu>

Here is an even more awkward property of tapply with factors.  What we 
want to do is to determine the modal value of the first factor given
the level of the second factor.  We do that by applying table in a
tapply call then finding the maximum count then ...

Turns out that table gives unexpected results in tapply.

> table(Machines$Machine)
 A  B  C 
18 18 18 
> tapply( Machines$Machine, Machines$Worker, table )
$6
integer(0)

$2
integer(0)

$4
integer(0)

$1
integer(0)

$3
integer(0)

$5
integer(0)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  6 17:09:57 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Jan 1998 18:09:57 +0100
Subject: More on tapply and factors
In-Reply-To: Douglas Bates's message of Tue, 6 Jan 1998 09:59:46 -0600 (CST)
References: <m0xpbPu-000hhBC@franz.stat.wisc.edu>
Message-ID: <x2vhvxil5m.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> > tapply( Machines$Machine, Machines$Worker, table )
> $6
> integer(0)

Yuk! Apparently, the culprit is "split":

> f1<-gl(2,1,4)
> f2<-gl(2,2,4)
> dput(split(f1,f2))
list(1 = factor(c(1, 2), levels=1:0), 2 = factor(c(1, 2), levels=1:0))

> dput(f1)
structure(factor(c(1, 2, 1, 2), levels=1:2), class = "factor", .Label = c("1", 
"2"))
> dput(f2)
structure(factor(c(1, 1, 2, 2), levels=1:2), class = "factor", .Label = c("1", 
"2"))

I wonder if this is a side effect of the ...hmm... "undesirable
feature" of as.numeric(factor)??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan  6 17:42:58 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 6 Jan 1998 18:42:58 +0100
Subject: split(.) woes + "very cheap" fix
In-Reply-To: <x2vhvxil5m.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 06 Jan 1998 18:09:57 +0100)
Message-ID: <199801061742.SAA03394@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Douglas Bates <bates@stat.wisc.edu> writes:
    >> > tapply( Machines$Machine, Machines$Worker, table )
    >> $6
    >> integer(0)

    PD> Yuk! Apparently, the culprit is "split":
ok

    >> f1<-gl(2,1,4)
    >> f2<-gl(2,2,4)
    >> dput(split(f1,f2))
    PD> list(1 = factor(c(1, 2), levels=1:0), 2 = factor(c(1, 2), levels=1:0))

    >> dput(f1)
    PD> structure(factor(c(1, 2, 1, 2), levels=1:2), class = "factor", .Label = c("1", "2"))
    >> dput(f2)
    PD> structure(factor(c(1, 1, 2, 2), levels=1:2), class = "factor", .Label = c("1", "2"))

    PD> I wonder if this is a side effect of the ...hmm... "undesirable
    PD> feature" of as.numeric(factor)??

no, it's a different bug.  The same things happen in 0.50


A very silly workaround (which I am  NOT committing to the sources) 
which seems to help is

  split.default <- function(x,f) {
	  if(is.factor(x)) x <- codes(x)
	  .Internal(split(x,as.factor(f)))
  }

At least it prevents the SEG.FAULT in the following:

    > split.default <- function(x,f) {
    +  if(is.factor(x)) x <- codes(x)
    +  .Internal(split(x,as.factor(f)))
    + }
    > f1<-gl(2,1,4) ; f2<-gl(2,2,4);  dput(split(f1,f2))
    list(1 = c(1, 2), 2 = c(1, 2))
    > tapply(f1,f2,table)
    $1
    1 2 
    1 1 

    $2
    1 2 
    1 1 

    > rm(split.default)
    > tapply(f1,f2,table)

    Process R bus error at Tue Jan  6 18:41:04 1998

--------------


-- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Jan  6 17:55:38 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 6 Jan 1998 09:55:38 -0800 (PST)
Subject: split(.) woes + "very cheap" fix
In-Reply-To: <199801061742.SAA03394@sophie.ethz.ch>
Message-ID: <Pine.SUN.3.95.980106095351.5275C-100000@chekov>

On Tue, 6 Jan 1998, Martin Maechler wrote:

> 
> A very silly workaround (which I am  NOT committing to the sources) 
> which seems to help is
> 
>   split.default <- function(x,f) {
> 	  if(is.factor(x)) x <- codes(x)
> 	  .Internal(split(x,as.factor(f)))
>   }
> 

It looks as though what we really need to do is to remove and then restore
some of the attributes of x.  The question is, which ones? Factor levels
do want to be restored, but other things like dimension don't.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan  6 18:35:28 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 6 Jan 1998 13:35:28 -0500
Subject: private libraries
Message-ID: <98Jan6.133625est.13449@mailgate.bank-banque-canada.ca>

My code mostly seems to be working fairly well under R 0.61 but I am still
trying to clean up the install procedures. Is the private library mechanism
working now (i.e. am I doing something wrong because it doesn't work for me) or
should I just install under $RHOME/library?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan  6 18:48:19 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 6 Jan 1998 13:48:19 -0500
Subject: pow_ii
Message-ID: <98Jan6.134910est.13446@mailgate.bank-banque-canada.ca>

I was hoping
fatal: relocation error: symbol not found: pow_ii: referenced in .../dsefor.so
would disappear in R 0.6x, but it has not. I believe this is suppose to come
from the f2c lib, but I seem to need just a couple of routines:
nm -u dsefor.so
Undefined symbols from dsefor.so:
    .umul
    pow_dd
    pow_ii
    pow_ri
For my own purposes I could compile with fortran but that makes it much harder
for others to use the library. Can anyone suggest a good strategy so that the
whole library can be used easily?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 18:56:19 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 1998 12:56:19 -0600
Subject: private libraries
In-Reply-To: Paul Gilbert's message of Tue, 6 Jan 1998 13:35:28 -0500
References: <98Jan6.133625est.13449@mailgate.bank-banque-canada.ca>
Message-ID: <6rzpl9bfe4.fsf@franz.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> My code mostly seems to be working fairly well under R 0.61 but I am still
> trying to clean up the install procedures. Is the private library mechanism
> working now (i.e. am I doing something wrong because it doesn't work for me) or
> should I just install under $RHOME/library?

Private libraries work just fine for me.  Are you remembering to set
the environment variable RLIBS to the path for your private library
directory. You can also accomplish the same thing by redefining
.lib.loc as soon as you start up like
 > .lib.loc <- c("/home/bates/library/R", .lib.loc)
 > library( lme )
but using the RLIBS environment variable is more elegant.

As far as R INSTALL goes I haven't had any trouble with it in versions 
0.60 and 0.61
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 19:42:59 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Tue, 6 Jan 1998 13:42:59 -0600 (CST)
Subject: match.arg()
Message-ID: <m0xpetv-000hhBC@franz.stat.wisc.edu>

$ R -norestore

R : Copyright 1997, Robert Gentleman and Ross Ihaka
Version 0.61.0 Alpha (December 21, 1997)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"license()" for details.

Type	"demo()" for some demos, "help()" for on-line help, or
	"help.start()" for a HTML browser interface to help.

> foo <- function(a = c("bar", "baz", "boz")) match.arg(a)
> foo("baz")
[1] "baz"
> foo()  # should return "bar" but doesn't
[1] "bar" "baz" "boz"

The current definition of match.arg is
 "match.arg" <-
   function (arg, choices) 
 {
   if (missing(choices)) {
     formal.args <- formals(sys.function(sys.parent()))
     choices <- eval(formal.args[[deparse(substitute(arg))]])
   }
   i <- pmatch(arg, choices)
   if (is.na(i)) 
     stop(paste("ARG should be one of", paste(choices, 
					      collapse = ", "), sep = " "))
   else if (i == 0) 
     if (arg == choices) 
       rval <- choices[1]
     else stop("there is more than one match in match.arg")
   else rval <- choices[i]
   return(rval)
 }

I believe what is happening is that arg is being evaluated when passed 
to match.arg hence it takes on the default value which is the same
value as choices will assume.  Another R-like language defines this
function with the first statement like

   if (missing(choices)) {
     formal.args <- formals(sys.function(sys.parent()))
     choices <- eval(formal.args[[deparse(substitute(arg))]])
     arg <- arg[1]
   }

I think that creates the desired behaviour here too.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan  6 22:03:58 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 6 Jan 1998 17:03:58 -0500
Subject: private libraries
References: <98Jan6.133625est.13449@mailgate.bank-banque-canada.ca> <6rzpl9bfe4.fsf@franz.stat.wisc.edu>
Message-ID: <98Jan6.170457est.13454@mailgate.bank-banque-canada.ca>

>Private libraries work just fine for me.  Are you remembering to set
>the environment variable RLIBS to the path for your private library

Well perhaps I just didn't persist long enough, but I posted a message when I
was having trouble in 0.60 and got a response that the private library mechanism
was not working correctly. I am setting the environment variable RLIBS. I have
tried several variations with no success. One problem is that parts of the R
INSTALL seem to work, but not enough so the UNINSTALL works, so it is hard to
get back to a clean starting point.

Following is what I think I should do to install two private libraries
(packages). Could you please contrast what you do with this.

1/ put code into files   .../Rdse/tframe/R/tframe.R and .../Rdse/dse/R/dse.R

2/ cd to .../Rdse and
      INSTALL R tframe tframe
      INSTALL R dse dse

3/ RLIBS=.../Rdse    export RLIBS

4/ start R and then library() should indicate the two packages in the .../Rdse
and
    library("tframe") ; library("dse")  should load the libraries.

Thanks in advance.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan  6 22:15:30 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Jan 1998 16:15:30 -0600
Subject: private libraries
In-Reply-To: Paul Gilbert's message of Tue, 6 Jan 1998 17:03:58 -0500
References: <98Jan6.133625est.13449@mailgate.bank-banque-canada.ca> <6rzpl9bfe4.fsf@franz.stat.wisc.edu> <98Jan6.170457est.13454@mailgate.bank-banque-canada.ca>
Message-ID: <6rra6lb665.fsf@franz.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 1/ put code into files   .../Rdse/tframe/R/tframe.R and .../Rdse/dse/R/dse.R
> 
> 2/ cd to .../Rdse and
>       INSTALL R tframe tframe
>       INSTALL R dse dse

There's the problem.  The last argument should be a directory into
which the library will be installed.  It will automatically become a
subdirectory with the library name within the directory you specify

There is another problem in that it should be R INSTALL, not INSTALL R
but I presume that was just a typo.

I put my personal libraries into ~/library/R so I use the R INSTALL
command as
 R INSTALL lme /home/bates/library/R  # creates /home/bates/library/R/lme
then I set
 export RLIBS=/home/bates/library/R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Jan  6 23:51:15 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 7 Jan 1998 12:51:15 +1300 (NZDT)
Subject: IEEE 754 Style Arithmetic
Message-ID: <199801062351.MAA09299@stat1.stat.auckland.ac.nz>

I have been looking at the R mathematical library with a view to
making changes so that it will handle IEEE 754 entities like NaN and
+/- Inf.  This appears to be not too hard and I am fairly well down
the path to converting the existing code (and simultaneously
converting some of the more suspect algorithms to something more
solid).

Q1:

I have looked at the Splus implementation and I have a bit of a
problem with some of the decisions that have been made.  For example

	pnorm(0, 1, Inf)   ->   0.5

This seems VERY dangerous to me.  It's the kind of thing which could
make errors almost impossible to find.  I would much rather that this
generated NaN (it's a domain error in my view).

There are some other nits like this too.  Would it be a serious
problem if I were to "fix" these?

Q2:

At present, the functions returning information about discrete
distributions work on integer (32-bit C int) arguments.  This limits
the domain for these functions.  Has anyone found that that this is a
problem?

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Jan  7 02:47:08 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 7 Jan 1998 15:47:08 +1300 (NZDT)
Subject: Error in parse
In-Reply-To: <x24t3hkj2r.fsf@blueberry.kubism.ku.dk>
References: <98Jan5.172327est.13453@mailgate.bank-banque-canada.ca>
 <x24t3hkj2r.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801070247.PAA12670@stat1.stat.auckland.ac.nz>

Peter Dalgaard writes:
 > Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
 > 
 > > Error in parse(file, n, text, prompt) : syntax error on line 23

 > 1) There's a bug in the readahead logic (this essentially works by
 > counting if's, else's, braces and newlines, so it would be no wonder
 > if your code tickled it)


Got it in one (1?).  The problem is that '}', ')' and ']' should each
terminate ALL preceding if clauses.  Here is the fix ...

At the very bottom of gram.y in yylex, there are case statements of
the form:

        case ']':
                ifpop();
		...
 
        case RBRACE:
                ifpop();
		...

        case ')':
                ifpop();
		...

These should read

        case ']':
		while(*contextp == 'i')
			ifpop();
		...
 
        case RBRACE:
		while(*contextp == 'i')
			ifpop();
		...

        case ')':
                while(*contextp == 'i')
                        ifpop();

This seems to make Paul's example work.  I will commit this in a minute.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan  7 07:41:45 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 7 Jan 1998 08:41:45 +0100
Subject: unary !
In-Reply-To: <199801050749.IAA00426@sophie.ethz.ch>
References: <Pine.SOL.3.95.980104105608.7341B-100000@gorn>
 <199801050749.IAA00426@sophie.ethz.ch>
Message-ID: <199801070741.IAA08682@pc25.none>

>>>>> Martin Maechler writes:

> [spill over from  R-core]
>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

TL> On Sun, 4 Jan 1998, Kurt Hornik wrote:
>>> Another thing I noticed when playing with chron is that apparently
>>> code like if (!(length(value)) works in S but not in R.  The error
>>> in R is unary ! is only defined for logical vectors
>>> 
>>> I assume that this is a bug and not a feature (although the code in
>>> src/main/logic.c makes me wonder ...).

TL> I complained about this more than a year ago and I thought we (or
TL> in those days R+R) had decided it was a feature -- I just explained
TL> to someone on r-help that it was one of the deliberate
TL> incompatibilities that ! didn't work on numerics.

> Yes, positively.  We've discussed this quite a bit, and
> this was defined to be a feature long ago.

> The proper (non C-hacker but normal-user readable) way is to test for

> 	if(length(vector) == 0)

O.k.  I will add this to the FAQ but I am still not convinced.  If I may
e.g. do

R> 0 & 0
[1] FALSE
R> 1 | 0
[1] TRUE

then why can't !0 be TRUE?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 08:00:24 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 09:00:24 +0100
Subject: IEEE 754 Style Arithmetic
In-Reply-To: <199801062351.MAA09299@stat1.stat.auckland.ac.nz> (message from
 Ross Ihaka on Wed, 7 Jan 1998 12:51:15 +1300 (NZDT))
Message-ID: <199801070800.JAA03967@sophie.ethz.ch>

>>>>> "Ross" == Ross Ihaka <ihaka@stat.auckland.ac.nz> writes:

    Ross> I have been looking at the R mathematical library with a view to
    Ross> making changes so that it will handle IEEE 754 entities like NaN
    Ross> and +/- Inf.  This appears to be not too hard and I am fairly
    Ross> well down the path to converting the existing code (and
    Ross> simultaneously converting some of the more suspect algorithms to
    Ross> something more solid).
Great !  
Thank you -- this has been my longest lasting wish for R...

(has Heiner Schwarte contacted you, yet?
 during holiday season, he has almost finished doing the same
 while successfully porting R 0.61 to Windows NT (!!!) (MS C compiler)
)


    Ross> Q1:

    Ross> I have looked at the Splus implementation and I have a bit of a
    Ross> problem with some of the decisions that have been made.  For
    Ross> example

    Ross> 	pnorm(0, 1, Inf) -> 0.5

    Ross> This seems VERY dangerous to me.  It's the kind of thing which
    Ross> could make errors almost impossible to find.  I would much rather
    Ross> that this generated NaN (it's a domain error in my view).

I disagree quite strongly.

You are right, that some errors are harder to track down when  Inf & -Inf
work properly.
But in my oppinion the advantages really do abound.

for(s in 10^(0:9))cat("sd=",formatC(s,wid=5),"pnorm(0,1,sd)=",pnorm(0,1,s),"\n")
sd=     1 pnorm(0,1,sd)= 0.1586553 
sd=    10 pnorm(0,1,sd)= 0.4601722 
sd=   100 pnorm(0,1,sd)= 0.4960106 
sd=  1000 pnorm(0,1,sd)= 0.4996011 
sd= 1e+04 pnorm(0,1,sd)= 0.4999601 
sd= 1e+05 pnorm(0,1,sd)= 0.499996 
sd= 1e+06 pnorm(0,1,sd)= 0.4999996 
sd= 1e+07 pnorm(0,1,sd)= 0.5 
sd= 1e+08 pnorm(0,1,sd)= 0.5 
sd= 1e+09 pnorm(0,1,sd)= 0.5 


I think one of the merits of useful IEEE implementations is
continuity (in the mathematical sense)
and ``automatic fulfillment'' of limit theorems.

This has been very useful for me in several situations of S-plus code
development.  
And I have been longing for these to be available in R, as well.

    Ross> There are some other nits like this too.  Would it be a serious
    Ross> problem if I were to "fix" these?

yes (see above).


    Ross> Q2:

    Ross> At present, the functions returning information about discrete
    Ross> distributions work on integer (32-bit C int) arguments.  This
    Ross> limits the domain for these functions.  Has anyone found that
    Ross> that this is a problem?

not yet.
How much speed would be lost, if they worked for all double (and Inf, -Inf)
arguments?

- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 08:29:02 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 09:29:02 +0100
Subject: Two more R/S differences
In-Reply-To: <199801070741.IAA08668@pc25.none> (message from Kurt Hornik on
 Wed, 7 Jan 1998 08:41:45 +0100)
Message-ID: <199801070829.JAA03989@sophie.ethz.ch>

(Another discussion out of R-core,  
 I think  anyone in R-devel might have an opinion -- MM):

>>>>> "KH" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

>>>>> Martin Maechler writes:
>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:
    KH> * Bug or feature?
    R> NULL + NULL
    real(0)
    R> NULL > NULL
    Error: comparison is possible only for vector types
    R> NULL & NULL
    Error in NULL & NULL : operations are possible only for numeric or
    logical types

    KH> whereas S-PLUS:

    >>>> NULL > NULL
    NULL
    >>>> NULL + NULL
    NULL
    >>>> NULL & NULL
    NULL

    >> NULL + NULL real(0) and NULL are not so different..  I think R is
    >> better here...

    >> The other two: R (once more) is stricter in order to help avoiding
    >> buggy code.

    >> In R,
    >>> real(0) > integer(0)
    >> logical(0)

    >> Therefore, I don't see why NULL > NULL should work...

    >> In sum, I think R behaves as we want, and the different behavior
    >> should go into the FAQ and probably also be mentioned in some *.Rd
    >> files.

    KH> Again, I am not entirely convinced yet.

you are right, me neither anymore..

We should discuss this some more

    KH> Why does adding two empty objects give something non-NULL?  To me,
    KH> this seems to violate `nihil nihilo fit' (the ``no-arbitrage
    KH> condition'').

I think the paradigm is

 NULL    :=  list of length 0  + is sometimes coerced to vector of length 0
				    ~~~~~~~~~
 real(0) :=  numeric(0) =  numeric vector of length 0

The real point of discussion is:

 -------------------------------------------------------------------------
##   In which situations should
##   NULL silently be coerced to numeric(0) / logical(0) / character(0) ?
 --------------------------------------------------------------------------

Currently,  S does this silent coercion very often
while  R does not.
I start thinking that maybe R should change here.

    KH> Also, why is it o.k. to ADD two empty objects, but not to compare
    KH> them?  (Shouldn't two NULL objects be the same?)

    KH> Btw, the code in chron that got me started on this was

    KH> 	if(any(o1 != o2))

    KH> trying to figure out whether two origins (o1, o2) were different.
    KH> Under R, this code fails if at least one of the origins is NULL.
    KH> What is the right way of coding this?  (Surely not the

    KH> 	if(any(o1 - o2))

    KH> I changed it to :-))

All was ok, if both  o1 and o2  where never NULL but rather numeric(0),
however see above.

-- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Jan  7 09:20:35 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 7 Jan 1998 10:20:35 +0100
Subject: tabular environment for Rd files
Message-ID: <199801070920.KAA14297@galadriel.ci.tuwien.ac.at>


I have added a preliminary version of a tabular environment to Rdconv
and committed it to the current development sources.

Syntax:

\tabular{format}{
  aaa \tab bbb \tab ccc \cr
  xxx \tab yyy \tab zzz
}

i.e., the column seperator is \tab and the line seperator is \cr

format is a usual LaTeX tabular format string, e.g in the above
example it could be `lll' giving three left justified columns.

currently only l, r, and c identifiers are supported, all doing the
obvious.=20

I thought about using LaTeX's `&' and `\\' as seperatoirs but these
would be inconsistent with the Rd-philosophy of having no special
characters (we want to get rid of having to escape & a.s.a.p.).

If you don't like \tab and \cr, please feel free to make better
suggestions.

The latex and html conversions seem to work perfectly ... as usual I'm
not so sure about nroff (it seems to work fine for me).

As I said, it's preliminary: Don't use any formatting such as \eqn
inside a tabular ... there might be unexpected results.

Best,
Fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 09:24:06 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 10:24:06 +0100
Subject: hist(.) -- S compatibility : [a,b) versus (a,b]  and ....
Message-ID: <199801070924.KAA04110@sophie.ethz.ch>

Looking at Albrech Gebhardt's bug report to R-help (Dec.23)
and proposal for improvement,

I've been also trying several examples and comparing results with S-plus.
Note that we have decided to NOT be fully compatible to S with our hist(.)
function since we found S to be really `wrong' and `unuseful':
S: - The value returned by hist(.) depends on plot=T or plot=F
R: - We return a list(.) either way which contains additional useful things
     anyway, see,  hist(.) in 0.60 or 0.61.
   - we will have a ``label = FALSE'' argument as proposed by Albrecht

However, there are several  incompatibilities:


1) S uses half-open  (a,b] intervals 
   where for the left most cell,  [a,b] is used when
	``include.lowest  =  T'' (which is default).

   R currently uses half-open  [a,b) intervals.

I propose to change R here, including the "include.lowest = TRUE" argument


2) S has    ``probability = F'',
   we have  ``freq = NULL''  (which defaults to FALSE for equidistant breaks
			      and  TRUE for non-equidistant breaks).

I think we don't want to change the better default here.
I wonder if we should change the argument name from 'freq' to 'probability'
			
---------

If I don't hear objections or better proposals from you,
I'll change "1)" and leave "2)".

Martin Maechler <maechler@stat.math.ethz.ch>		 <><
Seminar fuer Statistik, SOL G1
ETH (Federal Inst. Technology)	8092 Zurich	 SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Wed Jan  7 10:54:25 1998
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas Weingessel)
Date: Wed, 7 Jan 1998 11:54:25 +0100
Subject: R/S difference (data frames)
Message-ID: <199801071054.LAA13594@elendil.ci.tuwien.ac.at>


In R, it is not possible to use binary operations, like -, on the
lines of a data frame, even if all columns contain numeric values. In
Splus this is possible:

R> a<-data.frame(int1=3D1:3,int2=3D4:6)
R> a[1,]-a[2,]
Error in a[1, ] - a[2, ] : non-numeric argument to binary operator

but

S>  a<-data.frame(int1=3D1:3,int2=3D4:6)
S> a[1,]-a[2,]
  int1 int2=20
1   -1   -1


If not all columns contain numeric values, both R and S give an error:

R> b<-data.frame(int1=3D1:3,int2=3D4:6,char=3Dc("a","b","c"))
R> b[1,]-b[2,]
Error in b[1, ] - b[2, ] : non-numeric argument to binary operator

S> b<-data.frame(int1=3D1:3,int2=3D4:6,char=3Dc("a","b","c"))
S> b[1,]-b[2,]
Error in Ops.factor(e1, e2): "-" not meaningful for factors
Dumped

but the following is again different:

R> b<-data.frame(int1=3D1:3,int2=3D4:6,char=3Dc("a","b","c"))
R> b[1,1:2]-b[2,1:2]
Error in b[1, 1:2] - b[2, 1:2] : non-numeric argument to binary operator

S> b<-data.frame(int1=3D1:3,int2=3D4:6,char=3Dc("a","b","c"))
> b[1,1:2]-b[2,1:2]
  int1 int2=20
1   -1   -1



************************************************************************
*                          Andreas Weingessel                          *
************************************************************************
* Institut f=FCr Statistik      *                Tel: (+43 1) 58801 4541 =
*
* Technische Universit=E4t Wien *                Fax: (+43 1)  504 14 98 =
*
* Wiedner Hauptstr. 8-10/1071 *     Andreas.Weingessel@ci.tuwien.ac.at *
* A-1040 Wien, Austria        * http://www.ci.tuwien.ac.at/~weingessel *
************************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 11:06:14 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 12:06:14 +0100
Subject: pow_ii
In-Reply-To: <98Jan6.134910est.13446@mailgate.bank-banque-canada.ca> (message
 from Paul Gilbert on Tue, 6 Jan 1998 13:48:19 -0500)
Message-ID: <199801071106.MAA04212@sophie.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I was hoping fatal: relocation error: symbol not found: pow_ii:
    PaulG> referenced in .../dsefor.so would disappear in R 0.6x, but it
    PaulG> has not. I believe this is suppose to come from the f2c lib, but
    PaulG> I seem to need just a couple of routines: 

    PaulG> nm -u dsefor.so
    PaulG> Undefined symbols from dsefor.so:
    PaulG> .umul
    PaulG> pow_dd
    PaulG> pow_ii
    PaulG> pow_ri

    PaulG> For my own purposes I could compile with fortran but that makes
    PaulG> it much harder for others to use the library. Can anyone suggest
    PaulG> a good strategy so that the whole library can be used easily?

    PaulG> Paul Gilbert

Well, I don't know myself.

Paul, there are quite a few people eagerly waiting for your time-series
package to appear on CRAN !!
	==============
	please keep on
	==============

Ross plans to change and cleanup the R setup such
that either Fortran or f2c  will be required in a future release anyway.

On the other hand, there's currently 
	src/appl/fortran.c
	src/include/Fortran.h
which define
	POW_DD
and	POW_DI

You may augment these by  POW_II and POW_RI
and send your patches to R-devel....

-------

Probably, Ross should correct or augment these statements ...
	
- Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan  7 11:35:41 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Jan 1998 12:35:41 +0100
Subject: pow_ii
In-Reply-To: Martin Maechler's message of Wed, 7 Jan 1998 12:06:14 +0100
References: <199801071106.MAA04212@sophie.ethz.ch>
Message-ID: <x24t3gldo2.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

>     PaulG> nm -u dsefor.so
>     PaulG> Undefined symbols from dsefor.so:
>     PaulG> .umul
>     PaulG> pow_dd
>     PaulG> pow_ii
>     PaulG> pow_ri
> 
> Well, I don't know myself.
...
> Ross plans to change and cleanup the R setup such
> that either Fortran or f2c  will be required in a future release anyway.

Are we already requiring the libs? I forget. If we do, isn't it just a
matter of adding them in when the .so file is linked?

> 
> On the other hand, there's currently 
> 	src/appl/fortran.c
> 	src/include/Fortran.h
> which define
> 	POW_DD
> and	POW_DI
> 
> You may augment these by  POW_II and POW_RI
> and send your patches to R-devel....



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 14:58:14 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 15:58:14 +0100
Subject: Segfault from seq(.)
Message-ID: <199801071458.PAA04442@sophie.ethz.ch>


R> gl(2,3):gl(1,6)

Process R segmentation violation at Wed Jan  7 15:56:45 1998

The reason seems to be that gl(1,6) is a factor with only one level.

patches welcome...
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan  7 15:50:59 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 7 Jan 1998 16:50:59 +0100
Subject: R-beta: sequences -- asReal(.) ?
In-Reply-To: <9801071055.AA14982@alpha.luc.ac.be> (message from Jim Lindsey on
 Wed, 7 Jan 1998 11:55:12 +0100 (MET))
Message-ID: <199801071550.QAA04539@sophie.ethz.ch>

[diverted from R-help to R-devel]

>>>>> "Jim" == Jim Lindsey <jlindsey@luc.ac.be> writes:

    Jim>   1. The change of sequences from reals to integers has created a
    Jim> number of problems. I already mentioned this earlier on the list
    Jim> but here is another example: contour(1:10,1:10,z) where z is an
    Jim> appropriate matrix, does not work. After searching quite a while,
    Jim> I discovered in the C code that contour checks for reals and does
    Jim> not allow integers. Someone is going to have through all the C
    Jim> code and change checks for reals to numeric anywhere where
    Jim> sequences might be used.

Sequences are not the only integer variables in R, even though probably the
most frequent ones.

I wonder, too what to do.
There is the  asReal(.) macro  which could be used instead of REAL(.),
but I wonder if this is the correct approach.

Ross ?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan  7 16:27:37 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 7 Jan 1998 17:27:37 +0100
Subject: pow_ii
In-Reply-To: <x24t3gldo2.fsf@blueberry.kubism.ku.dk>
References: <199801071106.MAA04212@sophie.ethz.ch>
 <x24t3gldo2.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801071627.RAA11761@pc25.none>

>>>>> Peter Dalgaard BSA writes:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
PaulG> nm -u dsefor.so
PaulG> Undefined symbols from dsefor.so:
PaulG> .umul
PaulG> pow_dd
PaulG> pow_ii
PaulG> pow_ri
>> 
>> Well, I don't know myself.
> ...
>> Ross plans to change and cleanup the R setup such
>> that either Fortran or f2c  will be required in a future release anyway.

> Are we already requiring the libs? I forget. If we do, isn't it just a
> matter of adding them in when the .so file is linked?

No, we're not.  In the current stage, we don't require a FORTRAN
compiler or f2c.  What you can (should) do now is to add "-lf2c" to the
.so rule in src-c/Makefile and hope that everyone has libf2c.  This will
of course mean that those who have a ``plain C only'' environment (no
FORTRAN compiler, no f2c) will not be able to install the package.  But
then again, in the near future they won't be able to compiler R anyway.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan  7 17:06:22 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 7 Jan 1998 18:06:22 +0100
Subject: English compatibility library
In-Reply-To: <Pine.SUN.3.95.980105090633.1964B-100000@chekov>
References: <34B0B3FB.3A42@math.uio.no>
 <Pine.SUN.3.95.980105090633.1964B-100000@chekov>
Message-ID: <199801071706.SAA11818@pc25.none>

>>>>> Thomas Lumley writes:

> Is there any good reason not to add the following:

> 	# R English compatibility library
> 	licence<-license
> 	colours<-colors
> 	heat.colours<-heat.colors
> 	terrain.colours<-terrain.colors
> 	topo.colours<-topo.colors
> 	optimise<-optimize
	

> I don't actually have difficulty with any of the R terms, but this
> sort of thing can be annoying.  In LaTeX I still type \begin{itemise}
> annoyingly often.

You could use the completion features provided by the corresponding
Emacs packages ...

Personally, I have no problem with a British compatibility package.
(Didn't you propose something similar with a ``Be nice to the English!''
email sometimes last year :-))  A potential problem is that it will
result in code being unusable in R- (yes, I know, one could provide the
same compatibility package there, ...).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Jan  7 17:13:38 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 7 Jan 1998 09:13:38 -0800 (PST)
Subject: pow_ii
In-Reply-To: <98Jan6.134910est.13446@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.SUN.3.95.980107091229.7924C-100000@chekov>

On Tue, 6 Jan 1998, Paul Gilbert wrote:

> I was hoping
> fatal: relocation error: symbol not found: pow_ii: referenced in .../dsefor.so
> would disappear in R 0.6x, but it has not. I believe this is suppose to come
> from the f2c lib, but I seem to need just a couple of routines:
> nm -u dsefor.so
> Undefined symbols from dsefor.so:
>     .umul
>     pow_dd
>     pow_ii
>     pow_ri
> For my own purposes I could compile with fortran but that makes it much harder
> for others to use the library. Can anyone suggest a good strategy so that the
> whole library can be used easily?

Until something final happens with R and FORTRAN you could include those
routines from the f2c library in your package.  The integrate package
already does this with pow_ii

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Wed Jan  7 18:43:05 1998
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas Weingessel)
Date: Wed, 7 Jan 1998 19:43:05 +0100
Subject: R/S Difference - split
Message-ID: <199801071843.TAA14847@elendil.ci.tuwien.ac.at>


In S it is possible to "split" a matrix into its rows, using
split(matrix, 1:number_of_rows). This is not possible in R.

Example:

R:
R> split(matrix(rnorm(1:20),4, 5), 1:4)
Error in split(x, as.factor(f)) : argument lengths differ


S:
> split(matrix(rnorm(1:20),4, 5), 1:4)
$"1":
[1] -0.1804794  0.5269439  0.6248224 -0.3243427 -1.2987407

$"2":
[1]  0.9384254 -1.7596400  1.1210493 -0.2711708  0.7039623

$"3":
[1] -0.02645670  0.81864215  0.58816596 -0.42465974 -0.02682458

$"4":
[1] -0.5523629 -0.7176803  0.3159648  0.7787409  1.6325061



************************************************************************
*                          Andreas Weingessel                          *
************************************************************************
* Institut f=FCr Statistik      *                Tel: (+43 1) 58801 4541 =
*
* Technische Universit=E4t Wien *                Fax: (+43 1)  504 14 98 =
*
* Wiedner Hauptstr. 8-10/1071 *     Andreas.Weingessel@ci.tuwien.ac.at *
* A-1040 Wien, Austria        * http://www.ci.tuwien.ac.at/~weingessel *
************************************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Thu Jan  8 00:18:55 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Thu, 8 Jan 1998 13:18:55 +1300 (NZDT)
Subject: R/S Difference - split
Message-ID: <199801080018.NAA20873@stat1.stat.auckland.ac.nz>

The difference is more fundamental:
   split(1:10,1:2)
   
 yields
 
  $"1":
[1] 1 3 5 7 9

$"2":
[1]  2  4  6  8 10

in Splus and an error in R. R is not recycling the factor. I'll see
about fixing this. Splus says that if group is shorter it should be
replicated to fill things up and if it is longer a warning will be
printed that some of the groups will have length zero. Any reasons
not to be compatible?

robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan  8 16:45:26 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 8 Jan 1998 17:45:26 +0100
Subject: R, LANG, and LC_....
In-Reply-To: <Pine.GSO.3.95.980108162951.3354A-100000@pc30.stat.umu.se>
 (message from Goran Brostrom on Thu, 8 Jan 1998 16:32:47 +0100 (MET))
Message-ID: <199801081645.RAA05896@sophie.ethz.ch>

=09[diverted from R-help  to R-devel]

>>>>> "GB" =3D=3D Goran Brostrom <gb@stat.umu.se> writes:

    GB> On 8 Jan 1998, Peter Dalgaard BSA wrote:

    >> Goran Brostrom <gb@stat.umu.se> writes:
    >> 
    >> > I am running R 0.61.0 on a Sparc 5, Solaris 2.4, in tcsh. Today I
    >> > couldn't, to my big surprise, scan a data file in R. As I finally
    >> > understood it, R wanted a decimal comma instead of a decimal
    >> point, > because LANG was set to 'sv'. See my runs below. I wonder
    >> why this
    >> 
    >> Apparently, the strtod() C library function accepts different
    >> formats depending on locale settings, so probably the
    >> setlocale(LC_ALL,""); in src/main/main.c is doing you in.
    >> 
    >> This is the same thing that allows you to have a variable called
    >> "f=F6r=E4ldre" and see come out right on plots, etc., so you don't w=
ant
    >> to remove that line.
    >> 
    >> I think that either you should setenv LC_NUMERIC to C or POSIX or R
    >> should only set LC_CTYPE (and maybe some of the others?).

    GB> Yes, the combination (LANG =3D sv & LC_NUMERIC =3D C) seems to work
    GB> properly.  Thanks!

    GB> Goran

Peter (and everyone), I still think we should replace

=09setlocale(LC_ALL,"");
by

=09setlocale(LC_CTYPE,"");
=09setlocale(LC_........);
=09setlocale(LC_........);

But probably you know better than me what the  ...... should be.

Note that we still have the problem that R's parser does not properly use
all the isalpha(.) characters when e.g. checking variable names.


- Martin.=
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan  8 17:15:21 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 8 Jan 1998 18:15:21 +0100
Subject: "X segfault" with   lty = '01'
Message-ID: <199801081715.SAA05968@sophie.ethz.ch>

Another situation, where an argument is not properly checked :

> plot(1:10,type='l',lty='01')

X Error of failed request:  BadValue (integer parameter out of range for operation)
  Major opcode of failed request:  58 (X_SetDashes)
  Value in failed request:  0x0
  Serial number of failed request:  26
  Current serial number in output stream:  29

Process R exited abnormally with code 1 at Thu Jan  8 18:13:55 1998
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jan  8 17:48:56 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 8 Jan 1998 18:48:56 +0100
Subject: development snapshot of Design package
Message-ID: <199801081748.SAA17071@pc25.none>

Jim Lindsey has made his quick shot at porting F Harrell's Design pkg
available in the CRAN src/contrib/devel area.

His changes are actually relative to version 0.50, so perhaps there is
need for undoing some changes.  They are cleanly documented, however.

It would be great if anyone could ``play'' some more with the port, so
that we have a fully functional one eventually.

-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan  8 18:02:37 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Jan 1998 19:02:37 +0100
Subject: R, LANG, and LC_....
In-Reply-To: Martin Maechler's message of Thu, 8 Jan 1998 17:45:26 +0100
References: <199801081645.RAA05896@sophie.ethz.ch>
Message-ID: <x24t3eu9mq.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> =09setlocale(LC_ALL,"");
> by
>=20
> =09setlocale(LC_CTYPE,"");
> =09setlocale(LC_........);
> =09setlocale(LC_........);
>=20
> But probably you know better than me what the  ...... should be.

Hmm, it's not easy to say. LC_COLL is a rather obvious candidate, but
maybe not in all languages (Danish alphabet contains the English one
as the first 26 characters in their usual order, so English text would
sort the same, but does that hold for all languages?).

> Note that we still have the problem that R's parser does not properly =
use
> all the isalpha(.) characters when e.g. checking variable names.

Yes, this is strange (Solaris 2.5.1, LC_CTYPE=3Diso_8859_1):

> b=F8<-1
> =E6=F8=E5<-1
Error: syntax error
> =F8=E5<-1
> =E6<-1
Error in 0 <- 1 : invalid (do_set) left-hand side to assignment

apparently =E6 (0xf8) is treated differently from its siblings. It seems
to get treated syntactically as digit 0. Even stranger, if I set
LANG=3Dda and unset LC_CTYPE, I get a syntax error on everything with
an '=F8' in it (??!!!)

--=20
   O__  ---- Peter Dalgaard             Blegdamsvej 3 =20
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N  =20
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan  8 18:18:46 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Jan 1998 19:18:46 +0100
Subject: R, LANG, and LC_....
In-Reply-To: Peter Dalgaard BSA's message of 08 Jan 1998 19:02:37 +0100
References: <199801081645.RAA05896@sophie.ethz.ch>
 <x24t3eu9mq.fsf@blueberry.kubism.ku.dk>
Message-ID: <x21zyiu8vt.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> apparently =E6 (0xf8) is treated differently from its siblings. It seems
             ^^^^^^^^^^
Hum. For once, quoted-unreadable seems to serve a useful purpose by
pointing out obvious mistakes....
 
> to get treated syntactically as digit 0. Even stranger, if I set
> LANG=3Dda and unset LC_CTYPE, I get a syntax error on everything with
> an '=F8' in it (??!!!)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Fri Jan  9 00:52:32 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Fri, 9 Jan 1998 13:52:32 +1300 (NZDT)
Subject: split(.) woes
Message-ID: <199801090052.NAA04850@stat1.stat.auckland.ac.nz>

I have fixed most (all I think) of the reported problems with split.
There should be a patch release this Sunday and the fixes will be in it
if anyone wants/needs them sooner please let me know and I'll pass them
along directly. Now I just need to change the documentation.....

I also fixed the problem with seq reported by Martin,
 On line 85 of seq.c change the i to a j.

  v2 = strlen(CHAR(STRING(levs2)[i]));
  
 should read
  v2 = strlen(CHAR(STRING(levs2)[j]));
  
  this will also be in the patches.
  
  robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan  9 18:07:47 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jan 1998 19:07:47 +0100
Subject: ctest miscellania
In-Reply-To: Kurt Hornik's message of Sun, 4 Jan 1998 15:05:28 +0100
References: <199801041405.PAA15561@aragorn.ci.tuwien.ac.at>
Message-ID: <x2wwg9jzbg.fsf@blueberry.kubism.ku.dk>

Sorry for leaving this one in my mail box for so long, but - well, I
suppose you know what I mean.

(I'm shifting it over to r-devel, so I'll include all your original
text)  

Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

> Well, ctest is not making progress as quickly as I wanted it ...
> Anyway, here are a few questions/remarks.
> 
> * I am still a bit confused about what binom.test() does.  For which
> test are the p-values computed?  In theory, ``the'' test to use would be
> the optimal unbiased one for one-parameter exponential families, which I
> think is not used ... also, this would be a randomized test, how is the
> p-value for such a test defined?  I should really appreciate someone
> helping me out on this.

I really don't think we should do randomized tests, except possibly as
an option. Different people getting different p-values for the same
data??

If one must do it, I conjecture that one could get a "p-value" by
looking at x + runif(1,-.5,.5) and linearly interpolating between - er,
draw a picture of the density of the modified x and think about it...

> * I would still like to come up with rather general functions for
> 	location.test()
> 	scale.test()
> and perhaps some more ...  Some time ago, Peter and Tony Rossini and I
> had quite a vivid exchange of emails on this, but I seem to have lost
> our final findings (in case we ever got this far).
> 
> Anyway, any input on this would be great.  Remember, the basic idea was
> to have a unified approach to e.g. several non-parametric tests for a
> difference in location or scale (rather than having mood.test,
> ansaribradley.test, vanderwaerden.test, ...).  However, as PD pointed
> out, it would be a bad idea to use this general scheme for tests which
> don't really fit in there (such as the Wilcoxon tests).  In fact, I seem
> to remember that one issue was whether there are any tests which really
> are location or scale tests ...

I think the main point was that they're not *median* tests,
(irrespective of what the SAS output says!) "Location test" is
probably OK. My basic worry was the risk of losing the simplicity of
having well known standard tests called simply t.test(),
wilcoxon.test(), in favour of a perhaps unnecessarily abstract
taxonomy. Of course there's always the possibility to do things like

spearman.test(...) <- function(...) cor.test(..., method="spearman")

etc.

> * Speaking of the Wilcoxon tests, I still need to add exact computations
> for the small-sample cases.  Does anyone have code or algorithms for
> doing that?

Signed rank is trivial, you just generate the 2^k different sign
patterns and look at the distribution of the sums. Even in interpreted
code, this can be done for k up to 16 or so, at which point the
difference from the approximation is immaterial. The bit patterns are
simply all binary numbers between 0 and 2^k-1.

The two-sample case is a bit more unwieldy...

> 
> * I also mentioned some time ago that I'd like to make Fisher's test
> available for tables larger than 2 by 2.  There is an implementation
> (FEXACT) of the Mehta and Patel algorithm available via APSTAT (I
> think).  However, when I last used it (for an association analysis of a
> gene with 12 alleles) it could not deal with the ``large'' 12 by 2
> table.  (More precisely, it can deal with it after enlarging some size
> parameters in the sources and recompiling, but that's not the smart
> wayof doing things ...)  Again, does anyone have a suggestion what to do
> here?  (FEXACT has a ``mixed'' method of dealing with larger tables, but
> it seems stupid to have an R function which may produce a message like
> ``no, I need more memory ... please try to change param XYZ and then
> recompile''.)

If one can precompute the size of the array, one can usually allocate
it in R and pass it as a parameter instead.

As you know, *my* main desires for ctest is to allow model formula
specifications for all of the common tests (for consistency), and in
the slightly longer run also include trend tests and stratification.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sun Jan 11 20:32:41 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Sun, 11 Jan 1998 14:32:41 -0600 (CST)
Subject: "precise description" in output of prompt()
Message-ID: <m0xrU3l-000hhBC@franz.stat.wisc.edu>

The output of prompt(function) includes the line
 \description{
  ~~ A precise description of what the function does. ~~
 }
Should that be "concise" rather than "precise"?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 11 21:21:37 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Jan 1998 22:21:37 +0100
Subject: "precise description" in output of prompt()
In-Reply-To: Douglas Bates's message of Sun, 11 Jan 1998 14:32:41 -0600 (CST)
References: <m0xrU3l-000hhBC@franz.stat.wisc.edu>
Message-ID: <x21zyeogf2.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> 
> The output of prompt(function) includes the line
>  \description{
>   ~~ A precise description of what the function does. ~~
>  }
> Should that be "concise" rather than "precise"?

I don't think so. That would be what goes in \title. Perhaps
"detailed"? 

Of course, I don't have English as my mother tongue. Er, I mean, I do,
actually, literally, but my native language is Danish...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Sun Jan 11 23:58:57 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Mon, 12 Jan 1998 12:58:57 +1300 (NZDT)
Subject: matrix multiply
Message-ID: <199801112358.MAA08468@stat1.stat.auckland.ac.nz>

A long time ago thomas noted:

----------------------------------------------------------------------
TASK:   Matrix multiply problems
STATUS: Open
FROM:   <thomas@biostat.washington.edu>
        Both of these used to work and seem useful and harmless (and work in S):
        R> matrix(1,ncol=1)%*%c(1,2)
        Error in matrix(1, ncol = 1) %*% c(1, 2) : non-conformable arguments
        R> matrix(1,ncol=1)*(1:2)
        Error: dim<- length of dims do not match the length of object

----------------------------------------------------------------------

 I have fixed both of these. In the second case all binary ops now
 behave in this manner. In the first case only %*% has been "fixed".
 
 
 robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Jan 12 14:49:53 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 12 Jan 1998 08:49:53 -0600
Subject: Symbolic derivation
In-Reply-To: Wenyaun Xi's message of Sun, 11 Jan 1998 20:38:27 -0700 (MST)
References: <Pine.SOL.3.90.980111202649.3948A-100000@keynes.econ.utah.edu>
Message-ID: <6roh1hg31q.fsf@franz.stat.wisc.edu>

Wenyaun Xi <xi@keynes.econ.utah.edu> writes to S-news:

> I ran into some problems when I tried to get symbolic derivation by 
> using a function deriv3(). The expression contains 18 
> parameters, of which I want to have an information matrix eventually. I 
> ran it on my 200MHz Pentium PC with 64meg RAM. Each time I kick out the 
> job, the S-plus 3.1 for Windows stops after about 2 hour of real time 
> and suggests that it requires more memory(size varies each time) in 
> addition to those already in use. I don't know if this is a memory related 
> problem or there is a whole different issue involved here other than the 
> memory.

May I suggest sending a message on this to R-devel@stat.math.ethz.ch?
I am sending a cc: of this message to that group.

R is a freely available language that behaves like S but has a
fundamentally different underlying implementation.  It is possible
that your problem that causes difficulty in S will be easier to run in 
R.  The issues are probably memory related and R does "garbage
collection" but S does not.  Also, deriv in R is implemented in the
underlying C code rather than in the S code.

If you want to install R yourself you can check the CRAN
(Comprehensive R Archive Network) sites.  One close to you is
	   ftp://ftp.biostat.washington.edu/mirrors/R/CRAN/
Otherwise, you could post the call to deriv3() that you are trying to
evaluate to the R-devel list and someone could try to run it for you.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 12 16:38:16 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 12 Jan 1998 17:38:16 +0100
Subject: Default device instead of ``No graphics device is active''
Message-ID: <199801121638.RAA01160@sophie.ethz.ch>

in RHOME/src/ :
	grep DevInit */*.[ch]
reveals only a few calls such as

	if(!DevInit) error("No graphics device is active\n");

(in graphics/graphics.c  and  main/par.c).

Couldn't we startup a default device instead of having the error message?

The Default device would be

	Unix, interactive:	x11
	Unix, batch:		postscript
	
	Win,  interactive:	windows
	Win,  batch:		postscript ??

	Mac,  interactive:	macintosh
	Mac,  batch:		postscript  ????

[ one could even  define

	default.device <- x11		
  in Rprofile.unix, etc.

 and have the same .First function  
	(which could be moved out of profile to base

  .First <- function() if(interactive()) default.device()
]

-- If I remember properly, this is also  how S4 behaves..

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jan 12 17:02:12 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jan 1998 18:02:12 +0100
Subject: Default device instead of ``No graphics device is active''
In-Reply-To: Martin Maechler's message of Mon, 12 Jan 1998 17:38:16 +0100
References: <199801121638.RAA01160@sophie.ethz.ch>
Message-ID: <x2d8hx62y3.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> Couldn't we startup a default device instead of having the error message?

Very good idea!

> The Default device would be
> 
> 	Unix, interactive:	x11

or: "none" (or "printer"???) if DISPLAY not set, or maybe customizable
(sometimes you really don't want it, e.g. when connected to Auckland
from Europe...)

>   .First <- function() if(interactive()) default.device()

Actually, it might be a better idea to use this to *get rid* of the
initial graphics startup. I, for one, tend to get annoyed at seeing
the window popup, even when what I am trying to do has nothing to do
with graphics. Having to place it manually doesn't help...

While we're at this, how about making it possible to override the
printer and device orientation in print.plot() and save.plot()?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Jan 12 17:07:12 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 12 Jan 1998 09:07:12 -0800 (PST)
Subject: Default device instead of ``No graphics device is active''
In-Reply-To: <199801121638.RAA01160@sophie.ethz.ch>
Message-ID: <Pine.SUN.3.95.980112090129.4431B-100000@chekov>

On Mon, 12 Jan 1998, Martin Maechler wrote:

> in RHOME/src/ :
> 	grep DevInit */*.[ch]
> reveals only a few calls such as
> 
> 	if(!DevInit) error("No graphics device is active\n");
> 
> (in graphics/graphics.c  and  main/par.c).
> 
> Couldn't we startup a default device instead of having the error message?

yes, though I think the default device for batch processing should do
nothing or just emit warnings -- if postscript() is the default then you
might overwrite the previous contents of an output file. At least if it is
going to be postscript() it should use a unique file name. 

It should be relatively easy to define a none() device that does
absolutely nothing (a simple but inefficient one would be
postscript("/dev/null") under Unix)

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 13 17:08:40 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 13 Jan 1998 18:08:40 +0100
Subject: par2(..) ? -- only used in library(mva)..
Message-ID: <199801131708.SAA02573@sophie.ethz.ch>

src/library/base/R/par

	still defines  par2(.) which is not used anymore ..
	in the base package.

This (undocumented) function had been introduced around 0.49 or so.
I'm guessing that its intent is to be used from
high-level plotting functions for setting parameters specified by the
 "..." arguments.

Since (at least) 0.61,  par2(.) has been eliminated from all the
library/base/R/ code.
However it IS still used in  src/library/mva/R/hclust and ......./mva

Ross, Paul, ??
can we decide if this function is  needed / useful enough to be part of R
``properly'' (i.e. including documentation), or 
was it just a convenience kludge that should be eliminated ASAP?

--
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 13 17:26:51 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 13 Jan 1998 18:26:51 +0100
Subject: funny axis ranges;  GPretty(.) vs.  pretty(.) and all that...
Message-ID: <199801131726.SAA02683@sophie.ethz.ch>

[This is something like a bug report;
 maybe somewhat longish & technical ..]

As an introduction, just try the following code
(it should work both in R and S).
I think it screws up the postscript() driver both for S and R, but this is
not the issue here.


is.R <- function() { ## returns  'TRUE'  iff we are using 'R'
  exists("version") && !is.null(vl <- version$language) && vl == "R"
}

p.axis.range <- function(k.set = c(-100,-9:-6,-3,3,5,20),
                         y.k.add = 1)
{
  ## Purpose: Plot axis scaling & labeling with funny range(.)
  ## -------------------------------------------------------------------------
  ## Arguments: k.set: (0, 10^k  will be the ranges
  ## -------------------------------------------------------------------------
  ## Author: Martin Maechler, Date: 12 Jan 98, 18:15

  lk <- length(k.set); slk <- ceiling(sqrt(lk))
  op <- par(mfrow=c(slk,slk), mar = .2+c(3,2,1,1), oma=rep(1,4))
  on.exit(par(op))
  ##        oma does not really work
  if(is.R()) { colx <- rainbow(lk); coly <- terrain.colors(lk)
             } else colx <- lk + (coly <- 1:lk)
  for(i in 1:lk) {
    k <- k.set[i]
    if(is.R()) {
      plot.new()
      plot.window(xlim= c(0,10^ k),
                  ylim= c(0,10^(k+y.k.add)),"")
      box(lty='dashed')
    } else { ## S4 and S-plus
      plot.default(0,0,xlim= c(0,10^ k), ylim= c(0,10^(k+1)),
                   type = 'n', xlab='', ylab='')
    }
    cat("\n--------------------------------\n\n",
        "xlim= c(0, 10^", k,")    ==> par('usr')[1:2]=", par("usr")[1:2],"\n")
    par(col=colx[i]); if(is.R()) axis(1, col.axis= colx[i]) else axis(1)
    mtext(paste("xlim= (0, 10^",k,")",sep=""),	       line=-4)
    par(col=coly[i]); if(is.R()) axis(2, col.axis= coly[i]) else axis(2)
    mtext(paste("ylim= 10^",y.k.add," * xlim",sep=""), line=-6)
    par(col=if(is.R())'black' else 1)
    mtext(paste("par(\"usr\")= 10 ^", k," *"), line= -9, cex= .4)
    mtext(paste(format(par("usr")*10^-k),collapse=",  "), line= -11, cex= .3)
  }
  invisible(NULL)
}

p.axis.range()

##-----------------------------------------------------------------------------

##>> Now, what's going on? [in R, don't know for S; this all hidden in 
##>> 			calls such as 
##>> 			.Internal(.Cur.picture(), "S_cur_pic", T, 1) ]

## The main problem is  GPretty() in  $RHOME/src/graphics/graphics.c !

##R: plot.default()  -->   plot.new();  plot.window(xlim, ylim, log)

##C: 1:  do_plot_window()   in  $RHOME/src/main/plot.c

##		checks its arguments and then
##		GCheckState(); GScale(xmin, xmax, 1); GScale(ymin, ymax, 2);

##   2:  GScale(.)	    in $RHOME/src/graphics/graphics.c

##		checks args; sets up 'xmin', 'xmax' depending on 'log',..axt'
##		then  GPretty(&xmin, &xmax, &n);
##		      ~~~~~~~
##		and puts its result  in  GP->[x/y]axp  -- i.e. par("xaxp") or y.

##   3:  GPretty(.)   [also in ...graphics.c  is SIMILAR to but different from
##		       		$RHOME/src/appl/pretty.c
##		       which is called from
##		       		$RHOME/src/library/base/R/pretty

##	uses  FLT_EPSILON  (/usr/include/float.h)  in 3 places, where the above
##	pretty(.)  uses FLT_EPSILON only once ...
##
## Why use it at all (the way it is done)?
##
## S-plus's  pretty(.) is quite different;   also the  p.axis.range(.) below:
## ---> Comparison of  pretty(.) and Gpretty(.)  : see below.

So it's the  FLT_EPSILON which is about 1e-7,
and leads to the funny  -1e-7, +1e-7  axis ranges.

%%>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>
%%>=>  Questions/Remarks						     %%
%%>=>  									     %%
%%>=>  1) Why (and how if..) should GPretty(.) be different from pretty?     %%
%%>=>  									     %%
%%>=>  2) Couldn't we at least replace FLT_EPSILON  by DOUBLE_EPSILON ?	     %%
%%>=>  									     %%
%%>=>  3) axis(.) still has another bug: it draws the line and writes labels %%
%%>=>  	   OUTSIDE the "usr" coordinates.				     %%
%%>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>=>



###------ Try the following code to find out about the differences
###------ of the 2 versions of  pretty(.) : ------------------------

Cpretty <- Cpretty1 <- function (x, n = 5)
  unlist(.C("pretty", l = min(x), u = max(x), n = as.integer(n)))
Cpretty2 <- function (x, n = 5) {
  ##-- return what  .C("pretty... doe
  n <- length(p <- pretty(x,n))
  c(l=p[1], u=p[n], n=n-1)
}

Cpretty(pi)
all(Cpretty1(pi) == Cpretty2(pi))
all(Cpretty1(c(0,pi)) == Cpretty2(c(0,pi)))
for(i in 1:100) {
  x_c(runif(1),pi)
  for(k in -14:14) {
    ok <- all(Cpretty1(x*10^k) == Cpretty2(x*10^k))
    if(!ok) cat("NOT ok:  x=",deparse(x)," k=",k,"\n")
  }
}

Gpretty <- function (x, n = 5)
{
  plot.new(); op <- par(); on.exit(par(op))
  par(lab=c(n, par("lab")[-1]))
  plot.window(xlim=c(min(x),max(x)), ylim=0:1, "")
  par("xaxp")
}

##--- Gpretty() and Cpretty() are DIFFERENT much more than the same !!! -------

vcat <- function(vec, sep = " ", dig=2)
  paste(formatC(vec, dig=dig), collapse = sep)

show.ok <- TRUE
show.nok <- TRUE
show.nok <- !show.ok
for(i in 1:100) {
  x <<- sort(c(runif(1),4*rexp(1)))
  n <- max(1, rpois(1,lam=3))
  cat("\n")
  for(k in -14:14) { cat(".")
    ok <- all((cp <- Cpretty(x*10^k,n=n)) == (gp <- Gpretty(x*10^k,n=n)))
    if(!ok && show.nok) cat("NOT the same:  n=",n,"x=",vcat(x)," k=",k,
                "; Cp=",vcat(cp), " Gp=",vcat(gp),"\n")
    else if(ok && show.ok) cat("the same:  n=",n,"x=",deparse(x)," k=",k,
                              ";  Cp=Gp=",vcat(cp),"\n")
  }
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Jan 14 14:28:09 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 14 Jan 1998 15:28:09 +0100
Subject: New features in Rd format
Message-ID: <199801141428.PAA19087@galadriel.ci.tuwien.ac.at>


I have added the following features to the Rd format:

* Sd output format as contributed by Doug Bates ... this should create
help files for S[+] from Rd files

* New sections Format and Source ... both are necessary for
documentation of data files (these are not supported by Sd yet, but
should work for html, nroff and latex)

E.g., the documentation source for the acid data now looks like:

**********************************************************

\name{acid}
\title{Determination of Formaldehyde}
\usage{data(acid)}
\format{A data frame with 6 observations on 2 variables.

  \tabular{rlll}{
  [,1]  \tab carb  \tab numeric  \tab Carbohydrate (ml) \cr
  [,2]  \tab opt   \tab numeric  \tab Optical Density \cr
  }
}
\description{These data are from an chemical experiment to prepare a standard cur
ve
for the determination of formaldehyde by the addition of chromatropic
acid and concentrated sulpuric acid and the reading of the resulting
purple color on a spectophotometer.

}
\source{Bennett, N. A. and N. L. Franklin (1954).  Statistical analysis in
Chemistry and the Chemical Industry.  New York: Wiley
}
\references{McNeil, D. R. (1977).  Interactive Data Analysis.  New York: Wiley.
}


**********************************************************


Eventually all data files will be documented using the Rd format
... it just needs somebody with some extra time ...


Best,
Fritz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 14 14:53:29 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 14 Jan 1998 15:53:29 +0100
Subject: system.file(..) :  Any reason why it should not work with wildcards?
Message-ID: <199801141453.PAA03685@sophie.ethz.ch>

{BTW:  there's still no docu. for it}

Do you see any reason why
system.file() should not work with wildcards?

Currently, it just returns the first file found.
The obvious change to make would be to erase "; exit 0"
in RHOME/cmd/filename

-- If nobody objects, I'll do the change .. --

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 14 16:38:53 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 14 Jan 1998 11:38:53 -0500
Subject: DSE alpha
Message-ID: <98Jan14.114356est.13445@mailgate.bank-banque-canada.ca>

I have a  version of my DSE time series library working in R 0.61.1 under
Solaris, but have had a few minor problems making a tar file to test at home
under Linux. I think I have it fixed now, but since there is a one day
turnaround on this process it may slow me down even more than the ice storm and
the power outages. I would like to test if things work on some other OSs before
I put this on CRAN. Could someone please

ftp data.bank-banque-canada.ca
logon as anonymous
cd pub/pgilbert
get dse.v.98.1alpha.tar
(Beware there is also a dse.v.98.1alpha.tar.gz but this seems to have been
  mangled by the firewall? and does not uncompress)

then
tar xf dse.v.98.1alpha.tar
cd Rdse
run the INSTALL script (several R INSTALLs)
and run the script test.dse.lite (I'll fix English spellings later.) which
starts R, attaches libraries, and runs many tests.

Also, if anyone would like to try compiling the fortran or C under Windows and
installing, I would appreciate knowing how that works.

Thanks.
Paul Gilbert




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 15 11:13:13 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 15 Jan 1998 12:13:13 +0100
Subject: debugging dynamically loaded code
Message-ID: <199801151113.MAA01121@galadriel.ci.tuwien.ac.at>


How can I debug code that I load at runtime?

Currently I do the following:

	load R.binary into gdb
	run
	load shared object code using dyn.load()
	quit the R process

from then on gdb seems to be smart enough such that the source code
of the .so file is available and I can set breakpoints etc.

however, when I restart the R process I get:

(gdb) break printing.c:7
Breakpoint 1 at 0x407af036: file printing.c, line 7.
(gdb) run
Starting program: /usr/local/lib/R/bin/R.binary
Cannot insert breakpoint 1:
Temporarily disabling shared library breakpoints:


i.e., all breakpoints are disbled and I cannot figure out how to
enable them again (even after inserting the .so object).

Am I missing anything?

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan 15 14:54:38 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Jan 1998 08:54:38 -0600
Subject: debugging dynamically loaded code
In-Reply-To: Friedrich Leisch's message of Thu, 15 Jan 1998 12:13:13 +0100
References: <199801151113.MAA01121@galadriel.ci.tuwien.ac.at>
Message-ID: <6rbtxdwzwx.fsf@franz.stat.wisc.edu>

The secret of symbolic debugging of dynamically loaded code is to
 - Call the debugger on the R executable.  Since I do this within
   emacs, I don't use the "R gdb" facility, I symbolically link the
   R.binary file into the directory with my code and call the debugger 
   through M-x gdb.
 - Set the environment variables that the $RHOME/bin/R script would.
 - Start the R program.
 - At the R prompt, use dyn.load() to load your library.
 - Send an interrupt signal.  Inside of gud mode in emacs, I think you 
   send C-C C-C.  This will put you back to the debugger prompt.
 - Set the breakpoints in your code.
 - Continue execution of R by typing "signal 0<ret>".

As I mentioned above, I find it easiest to use the directory with my
code in it as the cwd and then make a symbolic link from that
directory to the R executable.  That way the .gdbinit can stay in the
directory with the code and be used to set up the environment and the
search paths for the source.

A sample .gdbinit would be
 set env RHOME /usr/lib/R
 set env R_PAPERSIZE letter
 set env R_PRINTCMD lpr
 dir /usr/lib/R/src/main
 dir /usr/lib/R/src/math
 dir /usr/lib/R/src/appl
 dir /usr/lib/R/src/unix

It is possible that those last lines could be written as
 dir $(RHOME)/src/main
instead.  I haven't tried it out.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 15 15:13:16 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 15 Jan 1998 10:13:16 -0500
Subject: $CRAN/src/contrib/devel
References: <199712221638.RAA16954@galadriel.ci.tuwien.ac.at>
Message-ID: <98Jan15.101848est.13451@mailgate.bank-banque-canada.ca>

Friedrich

I've tested my DSE library under Solaris and Linux and I'm ready to put a tar.gz
on
CRAN/src/contrib/devel. How do I do that? I apologize, I know you've explained
this before, but I can't find the instructions.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 15 15:20:59 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 15 Jan 1998 16:20:59 +0100
Subject: $CRAN/src/contrib/devel
In-Reply-To: <98Jan15.101848est.13451@mailgate.bank-banque-canada.ca>
References: <199712221638.RAA16954@galadriel.ci.tuwien.ac.at>
 <98Jan15.101848est.13451@mailgate.bank-banque-canada.ca>
Message-ID: <199801151520.QAA02069@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 15 Jan 1998 10:13:16 -0500,
>>>>> Paul Gilbert (PG) wrote:

PG> Friedrich
PG> I've tested my DSE library under Solaris and Linux and I'm ready to p=
ut a tar.gz
PG> on
PG> CRAN/src/contrib/devel. How do I do that? I apologize, I know you've =
explained
PG> this before, but I can't find the instructions.

Ooops, there's really nothing about uploading in the html pages, only
in the mirrors page and that's not the obvious place to look at
... I'll change that a.s.a.p.

just put it into

	ftp://ftp.ci.tuwien.ac.at/incoming

and drop a note to wwwadmin@ci.tuwien.ac.at

best,
fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan 15 15:47:39 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Jan 1998 09:47:39 -0600
Subject: $CRAN/src/contrib/devel
In-Reply-To: Friedrich Leisch's message of Thu, 15 Jan 1998 16:20:59 +0100
References: <199712221638.RAA16954@galadriel.ci.tuwien.ac.at> 	<98Jan15.101848est.13451@mailgate.bank-banque-canada.ca> <199801151520.QAA02069@galadriel.ci.tuwien.ac.at>
Message-ID: <6ryb0hviw4.fsf@franz.stat.wisc.edu>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> Ooops, there's really nothing about uploading in the html pages, only
> in the mirrors page and that's not the obvious place to look at
> ... I'll change that a.s.a.p.

The instructions are in the FAQ.

(Imagine that - someone actually read at least part of the FAQ!  What
a novel idea.)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jan 15 17:01:29 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 15 Jan 1998 12:01:29 -0500
Subject: $CRAN/src/contrib/devel
References: <199712221638.RAA16954@galadriel.ci.tuwien.ac.at> 	<98Jan15.101848est.13451@mailgate.bank-banque-canada.ca> <199801151520.QAA02069@galadriel.ci.tuwien.ac.at> <6ryb0hviw4.fsf@franz.stat.wisc.edu>
Message-ID: <98Jan15.120707est.13441@mailgate.bank-banque-canada.ca>

Doug

>> Ooops, there's really nothing about uploading in the html pages, only
>> in the mirrors page and that's not the obvious place to look at

>The instructions are in the FAQ.
>(Imagine that - someone actually read at least part of the FAQ!  What
>a novel idea.)

I did look in the FAQ, which I usually find very useful, but even checking it
again I don't see these instructions. I must be going blind in my old age.
Perhaps I'm using the wrong version of the FAQ. Just exactly which FAQ are you
reading and where do you see these instructions?

(BTW - Thanks for your clarification on R INSTALL pkg lib, which I was also
following from the FAQ, but I made some wrong assumptions. I didn't think that
INSTALL actually needed to copy things since all the structure was already in
pkg, so I was quite confused.)

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jan 15 19:17:27 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Thu, 15 Jan 1998 13:17:27 -0600 (CST)
Subject: a -nographics option to R
Message-ID: <m0xsun9-000hiQC@franz.stat.wisc.edu>

Right now the standard R.profile assigns the .First function as

 .First <- function() {
   if (interactive() && getenv("DISPLAY") != "") x11()
 }

Is it reasonable to extend that a bit and use

 .First <- function() {
   if (interactive() && getenv("DISPLAY") != "" && ! (getenv("R_NOX") != "")) x11()
 }

or something like that then put a -nographics flag into the R script
that would set R_NOX.  I am encountering the same kind of difficulty
that Peter Dalgaard mentioned when working remotely over a slow
connection.  I'm just checking that the compiled R works properly on
the other computer and I don't want to wait for it to spring up the
X11 window every time it starts.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 15 20:17:55 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Jan 1998 21:17:55 +0100
Subject: a -nographics option to R
In-Reply-To: Douglas Bates's message of Thu, 15 Jan 1998 13:17:27 -0600 (CST)
References: <m0xsun9-000hiQC@franz.stat.wisc.edu>
Message-ID: <x24t35lcek.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> that would set R_NOX.  I am encountering the same kind of difficulty
> that Peter Dalgaard mentioned when working remotely over a slow
> connection.  I'm just checking that the compiled R works properly on
> the other computer and I don't want to wait for it to spring up the
> X11 window every time it starts.

The current plans are to get rid of the initial graphics startup
altogether and make the plot commands do it automagically instead of
faulting when there's no graphics device. (We seem to have committed
our usual sin of discussing things in R-core that might as well have
been discussed on R-devel.)

BTW: If it's ssh that does this to you, note that it has a config file
that can turn the X transport off. If it's telnet, I wouldn't know,
but you might murder the DISPLAY setting by invoking as

DISPLAY= R

(which, incidentally, is fewer keypresses than "R -nographics"...)

Requires an sh-family shell, though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Jan 16 07:17:32 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 16 Jan 1998 08:17:32 +0100
Subject: Packages for RedHat 4.2, Debian 1.3
Message-ID: <199801160717.IAA10104@galadriel.ci.tuwien.ac.at>

Doug Bates has succeeded in building rpm's for RedHat 4.2:

>>>>> On Thu, 15 Jan 1998 14:57:22 -0600 (CST),
>>>>> Douglas Bates (DB) wrote:

DB> I finally got r-base to build on a Debian 1.3 machine.  The
DB> r-base_0.61.1-1_i386.deb file now in the incoming area is for 1.3.

These are on CRAN now.

DB> I also got an .rpm for RedHat 4.2 to build.  It looks like it does no=
t
DB> have any problematic dependencies.  I will upload it, too.  It may be
DB> a good idea to have someone try to install it on a RedHat 4.2 machine
DB> before putting it into CRAN.  What do you think?

Yes, it might save us a couple of (correctly) complaining emails ...

I have put the RedHat 4.2 packages into

	ftp://ftp.ci.tuwien.ac.at/outgoing

Could someone running RH 4.2 system please check them and email me
(and Doug) if they can be put onto CRAN? Thanks in advance!

Best,
Fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 15:02:17 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jan 1998 09:02:17 -0600
Subject: ESS-mode and X-emacs problem
In-Reply-To: kim.pilegaard@risoe.dk's message of Fri, 16 Jan 1998 08:40:10 -0100
References: <9801160940.AA07107@eco-sun.risoe.dk>
Message-ID: <6r7m80pime.fsf@franz.stat.wisc.edu>

kim.pilegaard@risoe.dk (Kim Pilegaard) writes:

> When I try to invoke R from xemacs I get the following responses:
> 
> ESS starting data directory? ~/
> 
> "Process R is not running". 
> 
> This is what the R buffer shows:
> 
> R : Copyright 1997, Robert Gentleman and Ross Ihaka
> Version 0.61.0 Alpha (December 21, 1997)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type	"license()" for details.
> 
> Type	"demo()" for some demos, "help()" for on-line help, or
> 	"help.start()" for a HTML browser interface to help.
> 
> "TERMCAP", line 0, terminal 'emacs': /usr/share/terminfo: permission denied
> 
> Process R exited abnormally with code 1 at Fri Jan  9 08:11:59 1998
> 
> R runs correct from the shell and is installed as /usr/local/bin/R.
> I am running Linux 2.0, Xemacs 19-14 and R-0.61.

It looks like R is trying to run with the readline history facilities
started.  It shouldn't do this when you are running under ESS.

One quick fix might be to install a terminfo entry for the "emacs" 
terminal type but I'm not sure how you do that.

I had thought that when ESS started the R process it should send the
-noreadline flag to it.  From the R manual page

       The following options are present to support the use of  R
       from  other  programs.   In  particular,  the  -noreadline
       option exists so that R can  be  run  under  emacs(1)  and
       xemacs(1) using ESS.

       -noreadline
              Turn  off  the  use of the readline(3) command line
              editing.

If R is getting the -noreadline flag properly then my guess is that
the call to initialize the readline library (probably in
$RHOME/src/unix/system.c) is not being protected by an if statement
that checks for this flag.

Earlier I reported a problem in $RHOME/src/unix/system.c that some
ifdef's were checking for HAVE_READLINE_HISTORY_H but that variable
was not being defined by the autoconfigure script.  I'm not sure if
that has been corrected yet.

When I was looking for those definitions I noticed the
autoconfiguration on the version I compiled for Debian Linux 2.0 does
not set HAVE_READLINE but that version on Debian Linux 1.3 does.  This 
looks like another autoconfigure problem. 
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 15:13:39 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jan 1998 09:13:39 -0600
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: Friedrich Leisch's message of Fri, 16 Jan 1998 10:14:34 +0100
References: <199801160914.KAA25868@galadriel.ci.tuwien.ac.at>
Message-ID: <6r67nkpi3g.fsf@franz.stat.wisc.edu>

Goran Brostrom <gb@stat.umu.se> writes:

> I tried it on my newly installed RH 4.2 system (as root):
> 
> # rpm -i r-base-.....rpm
> failed dependencies:
>      /usr/bin/perl is needed by r-....
>      /bin/sh  is needed by r-....
>      /bin/sh     is needed by r-...
> 
> I have those guys, and I was running sh. I guess that I don't know enough
> about RedHat and rpms (I know nothing...). What is the correct way to=20
> do the installation?
> 
> G|ran Brostr|m
> Statistics Department
> Umea University, Umea, Sweden

You may be able to install it with
 rpm -i --nodeps r-base-....rpm

My problem in making these packages is that I generate them under
Debian GNU/Linux as .deb packages then use an automatic transformation
program to create the RedHat Linux .rpm packages.  Since I don't use
rpm for installation myself it is difficult for me to test them.  I
know what the Debian package installer does when it checks
dependencies but I don't know where rpm looks to satisfy dependencies.

Maybe we can try a bit more with installation of the RedHat packages
and if people are still encountering problems like this then we'll
punt and ask others to build the .rpm packages on RedHat systems.

The reason I wanted to keep the Debian and RedHat packages in sync was 
that it makes the organization of the directories, etc. consistent so
it is easier to track down bugs.  Also, I had hoped it would avoid
some duplication of effort.  That may not be the case.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 15:27:27 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jan 1998 09:27:27 -0600
Subject: ESS-mode and X-emacs problem
In-Reply-To: Douglas Bates's message of 16 Jan 1998 09:02:17 -0600
References: <9801160940.AA07107@eco-sun.risoe.dk> <6r7m80pime.fsf@franz.stat.wisc.edu>
Message-ID: <6rzpkwo2w0.fsf@franz.stat.wisc.edu>

Douglas Bates <bates@stat.wisc.edu> writes:

> It looks like R is trying to run with the readline history facilities
> started.  It shouldn't do this when you are running under ESS.
> 
> One quick fix might be to install a terminfo entry for the "emacs" 
> terminal type but I'm not sure how you do that.
> 
> I had thought that when ESS started the R process it should send the
> -noreadline flag to it.  From the R manual page
> 
>        The following options are present to support the use of  R
>        from  other  programs.   In  particular,  the  -noreadline
>        option exists so that R can  be  run  under  emacs(1)  and
>        xemacs(1) using ESS.
> 
>        -noreadline
>               Turn  off  the  use of the readline(3) command line
>               editing.
> 
> If R is getting the -noreadline flag properly then my guess is that
> the call to initialize the readline library (probably in
> $RHOME/src/unix/system.c) is not being protected by an if statement
> that checks for this flag.

Maybe I pointed the finger in the wrong direction.  I don't see that
the -noreadline flag is being passed to R when invoked by ESS.
 cd /usr/lib/xemacs/site-lisp/ESS-5.0/
 grep -n noreadline *.el /dev/null
 # no responses.

Try starting R by
C-u M-x R
and when it asks for "Starting Args ?" put in the -noreadline flag.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 15:36:41 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: Fri, 16 Jan 1998 09:36:41 -0600 (CST)
Subject: mtp2R.pl
Message-ID: <m0xtDp3-000hiQC@franz.stat.wisc.edu>

I received some large data sets in Minitab Portable Worksheet (.mtp)
format and wanted to read them into R.  Here is a _first cut_ at a
perl script that transforms .mtp files into something that can be
read by R. Comments, bug-fixes, enhancements and extensions are welcome.

#!/usr/bin/perl

# Convert a Minitab Portable Worksheet to an R (or S-PLUS) list structure

# $Id: mtp2R.pl,v 1.1 1998/01/16 15:33:27 bates Exp $
# Copyright (C) 1998 Douglas M Bates
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2, or (at your option)
# any later version.
#
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.	See the GNU
# General Public License for more details.
#
# A copy of the GNU General Public License is available via WWW at
# http://www.gnu.org/copyleft/gpl.html.	 You can also obtain it by
# writing to the Free Software Foundation, Inc., 675 Mass Ave,
# Cambridge, MA 02139, USA.

# Send any bug reports to Douglas Bates <bates@stat.wisc.edu>

require 5.003;
use strict;
use Carp;

for ( @ARGV ) {
    open( MTP, "< $_" ) ||
        carp( "Unable to open $_ for reading: $!\n" );
    s/\.mtp$/.R/i;
    open( R, "> $_" ) ||
        carp( "Unable to open $_ for writing: $!\n" );
    my $line = <MTP>;
    carp( "Input does not seem to be in Minitab Portable Format\n" )
	unless ( $line =~ /^Minitab Portable Worksheet/ );
    print R "# R data file automatically created by mtp2R\n";
    s/\.R$//;
    print R "\"$_\" <- list(\n";
    my $initial = 1;
    while (1) {
	last unless ( $line = <MTP> );
	carp( "Incorrect format\n" ) unless ( $line =~ /^%/ );
	my ($pct, $colmat, $number, $length, $NAs, $name) =
	    split(' ', $line );
	next if ( 100 <= $colmat && $colmat <= 102 );
	print R ",\n" unless $initial;
	$initial = 0;
	$name = "C" . $number if ( $name =~ /^\.$/ );
	print R "$name = c(\n";
	my $width = 16;
	$width = -$NAs + 1 if ( $NAs < 0 );
	while ( $length > 0 ) {
	    $line = <MTP>;
	    chomp $line;
	    chop $line if ($line =~ /\r$/); # Generated on DOS/Windows
	    chop $line if ($line =~ /\.$/);
	    while ( length( $line ) >= $width && $length) {
		my $value = substr( $line, 0, $width );
		$line = substr( $line, $width );
		$value =~ s/^\s+//;
		$value =~ s/\s+$//;
		if ( $NAs < 0 ) { print R "\"$value\""; } else { print R 0+$value; }
		$length--;
		print R ", " if $length;
	    }
	    print R "\n";
	}
	print R ")";
    }
    print R ")\n";
    close ( MTP );
    close ( R );
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Jan 16 15:42:08 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 16 Jan 1998 16:42:08 +0100
Subject: debugging dynamically loaded code
In-Reply-To: <6rbtxdwzwx.fsf@franz.stat.wisc.edu>
References: <199801151113.MAA01121@galadriel.ci.tuwien.ac.at>
 <6rbtxdwzwx.fsf@franz.stat.wisc.edu>
Message-ID: <199801161542.QAA28822@galadriel.ci.tuwien.ac.at>

>>>>> On 15 Jan 1998 08:54:38 -0600,
>>>>> Douglas Bates (DB) wrote:

DB> The secret of symbolic debugging of dynamically loaded code is to
DB>  - Call the debugger on the R executable.  Since I do this within
DB>    emacs, I don't use the "R gdb" facility, I symbolically link the
DB>    R.binary file into the directory with my code and call the debugger 
DB>    through M-x gdb.
DB>  - Set the environment variables that the $RHOME/bin/R script would.
DB>  - Start the R program.
DB>  - At the R prompt, use dyn.load() to load your library.
DB>  - Send an interrupt signal.  Inside of gud mode in emacs, I think you 
DB>    send C-C C-C.  This will put you back to the debugger prompt.
DB>  - Set the breakpoints in your code.
DB>  - Continue execution of R by typing "signal 0<ret>".

Thanks a lot ... I did not know about the interrupt signal before
inserting a breakpoint etc.

Best,
Fritz

PS: Thanks also for the S_compat stuff ... now I've got a first
version of [mpf]da up and running ... now it's only the buggy
model.matrix code that troubles me ... but that's a different story!

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 16 15:57:31 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 16 Jan 1998 16:57:31 +0100
Subject: ESS-mode and X-emacs problem  "-noreadline" solution
In-Reply-To: <6r7m80pime.fsf@franz.stat.wisc.edu> (message from Douglas Bates
 on 16 Jan 1998 09:02:17 -0600)
Message-ID: <199801161557.QAA23573@sophie.ethz.ch>


ESS-5.0  does not yet contain the "-noreadline" flag.

ESS-5.0 came out only very shortly after R 0.60,
if "-noreadline" would have been builtin, no R version < 0.60
would have worked....

Here is the patch --- apply it if you are willing to only use  
R versions >= 0.60 (with ESS):

Excuse that I didn't give this answer earlier...

---------------
Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/



--- essd-r.el.~1~	Mon Nov 24 18:26:40 1997
+++ essd-r.el	Fri Dec  5 09:21:17 1997
@@ -92,9 +92,10 @@
    (format "(R): current-prefix-arg=%s \n"
 	   current-prefix-arg))
 
-  (let ((r-start-args  (if start-args (read-string "Starting Args ? ") nil)))
-    (if (not start-args) (inferior-ess)
-      (inferior-ess r-start-args))))
+  (let ((r-start-args  (concat "-noreadline "
+	 (if start-args (read-string
+			 "Starting Args [other than `-noreadline'] ? ") nil))))
+      (inferior-ess r-start-args)))
 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jan 16 16:46:46 1998
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 16 Jan 1998 16:46:46 -0000 ()
Subject: Packages for RedHat 4.2, Debian 1.3
Message-ID: <XFMail.980116174438.plummer@iarc.fr>

On 16-Jan-98 bates@stat.wisc.edu wrote:
>Goran Brostrom <gb@stat.umu.se> writes:
>> I tried it on my newly installed RH 4.2 system (as root):
>> 
>> # rpm -i r-base-.....rpm
>> failed dependencies:
>>      /usr/bin/perl is needed by r-....
>>      /bin/sh  is needed by r-....
>>      /bin/sh     is needed by r-...
>> 
>> I have those guys, and I was running sh. I guess that I don't know enough
>> about RedHat and rpms (I know nothing...). What is the correct way to=20
>> do the installation?

There are two kinds of dependencies:
1) Libraries against which the executable files in a package are linked
2) Programs required by scripts in the package

The version of rpm which ships with RedHat 4.2 (version 2.3) expects
only the first kind of dependency. It can't interpret the entries
/bin/sh ... etc in the dependency list. 

Version 2.4 of rpm _does_ expect both kinds of dependencies, so
one way round this problem is to install the latest version of rpm.
This is available in the directory /redhat-4.2/updates/i386 on
RedHat's ftp site. (Don't pick up the one in the redhat-5.0 directory
as this is linked against libc6 which you don't have). This isn't
a very good solution, but it is a solution. Ultimately you might find it
easier to do the unzip/untar/configure/make procedure.

>My problem in making these packages is that I generate them under
>Debian GNU/Linux as .deb packages then use an automatic transformation
>program to create the RedHat Linux .rpm packages.  Since I don't use
>rpm for installation myself it is difficult for me to test them.  I
>know what the Debian package installer does when it checks
>dependencies but I don't know where rpm looks to satisfy dependencies.

This one is more of a backward compatibility problem. IMHO supporting
old releases of Linux distributions is too difficult. This position may
seem a bit extreme, but Linux evolves in "internet time".

>Maybe we can try a bit more with installation of the RedHat packages
>and if people are still encountering problems like this then we'll
>punt and ask others to build the .rpm packages on RedHat systems.

I remain at your disposal.
Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 16 18:12:32 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 16 Jan 1998 19:12:32 +0100
Subject: data.frame(...) not constructing "1:n" row.names [diff.  S <--> R]
Message-ID: <199801161812.TAA09746@sophie.ethz.ch>

	[I think Doug Bates has already alluded to this, somewhere..]

In R, 	data.frame( ... )

does not construct row.names whereas in S, it does:

R:

> data.frame(x=1:2,y=3:4)
     x y
[1,] 1 3
[2,] 2 4
> row.names(data.frame(x=1:2,y=3:4))
NULL


S-plus:

> data.frame(x=1:2,y=3:4)
  x y 
1 1 3
2 2 4
> row.names(data.frame(x=1:2,y=3:4))
[1] "1" "2"

---------------------------------------------------------------------------

R core: Is there a good reason for this?

Well (as a member of R-core, I give my answer):

	Memory efficiency can be a good reason, actually...
	together with ``cleanness'' :  
		``1:n'' are the IMPLICIT DEFAULT row.names

We could stay at the current way `internally',
but make sure that all functions working on data.frames `d.f'
automatically work as if

	 row.names(d.f)   *was indeed* ==  paste(1:nrow(d.f)

Some of them maybe even are, (lm, glm, and their methods  ??)
but not 'print.data.frame' (a <primitive>)
nor  row.names(.) or dimnames(.) (also <primitive>).
(and if dimnames is fixed, rownames(.) [the one without "."] will also work].

It may well be that it is sufficient to upgrade

	print.data.frame
	dimnames
and	row.names  (which is trivial to fix).

On the other hand,

	attr(d.f, "row.names")    [yet another <primitive> !]

would also have to be fixed for `complete' S compatibility
which is less "clean".


Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 16 18:34:20 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jan 1998 19:34:20 +0100
Subject: data.frame(...) not constructing "1:n" row.names [diff.  S <--> R]
In-Reply-To: Martin Maechler's message of Fri, 16 Jan 1998 19:12:32 +0100
References: <199801161812.TAA09746@sophie.ethz.ch>
Message-ID: <x2lnwgcloz.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> 
> 	[I think Doug Bates has already alluded to this, somewhere..]
> 
> In R, 	data.frame( ... )
> 
> does not construct row.names whereas in S, it does:
...
> R core: Is there a good reason for this?

No.
 
> Well (as a member of R-core, I give my answer):
> 
> 	Memory efficiency can be a good reason, actually...
> 	together with ``cleanness'' :  
> 		``1:n'' are the IMPLICIT DEFAULT row.names
> 
> We could stay at the current way `internally',
> but make sure that all functions working on data.frames `d.f'
> automatically work as if
> 
> 	 row.names(d.f)   *was indeed* ==  paste(1:nrow(d.f)

Ugh. Please, let's avoid implicit stuff. All the special-casing
involved all over the place would soon outweigh the saved storage of a
character vector. We'll get nothing but trouble from it. Just add the
rownames. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jan 16 20:29:04 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 16 Jan 1998 21:29:04 +0100
Subject: data.frame(...) not constructing "1:n" row.names [diff.  S <--> R]
In-Reply-To: <x2lnwgcloz.fsf@blueberry.kubism.ku.dk>
References: <199801161812.TAA09746@sophie.ethz.ch>
 <x2lnwgcloz.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801162029.VAA17133@pc25.none>

>>>>> Peter Dalgaard BSA writes:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
>> 
>> [I think Doug Bates has already alluded to this, somewhere..]

And I did, too ...

>> 
>> In R, 	data.frame( ... )
>> 
>> does not construct row.names whereas in S, it does:
> ...
>> R core: Is there a good reason for this?

> No.
 
>> Well (as a member of R-core, I give my answer):
>> 
>> Memory efficiency can be a good reason, actually...
>> together with ``cleanness'' :  
>> ``1:n'' are the IMPLICIT DEFAULT row.names
>> 
>> We could stay at the current way `internally',
>> but make sure that all functions working on data.frames `d.f'
>> automatically work as if
>> 
>> row.names(d.f)   *was indeed* ==  paste(1:nrow(d.f)

> Ugh. Please, let's avoid implicit stuff. All the special-casing
> involved all over the place would soon outweigh the saved storage of a
> character vector. We'll get nothing but trouble from it. Just add the
> rownames. 

Yes.  Does R- simply add a default 1:n for the row names if there are
none?  Then we should do the same.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Fri Jan 16 21:00:24 1998
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Fri, 16 Jan 1998 13:00:24 -0800 (PST)
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: <XFMail.980116174438.plummer@iarc.fr>
Message-ID: <Pine.LNX.3.96.980116125848.471A-100000@gemini.biostat.washington.edu>


> >My problem in making these packages is that I generate them under
> >Debian GNU/Linux as .deb packages then use an automatic transformation
> >program to create the RedHat Linux .rpm packages.  Since I don't use
> >rpm for installation myself it is difficult for me to test them.  I

I've just purchased a new system that came with RedHat 5.0, and would be
glad to test RPM's.  Just send them to me...


-------------------------------------------------------------------------------
    Gregory R. Warnes          | It is high time that the ideal of success
warnes@biostat.washington.edu  |  be replaced by the ideal of service.
                               |                       Albert Einstein
-------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Fri Jan 16 22:09:59 1998
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Fri, 16 Jan 1998 14:09:59 -0800 (PST)
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: <Pine.LNX.3.96.980116125848.471A-100000@gemini.biostat.washington.edu>
Message-ID: <Pine.LNX.3.96.980116135528.471D-100000@gemini.biostat.washington.edu>


RedHat 5.0 comes with libreadline.so.3.  R-base depends on
libreadline.so.2.  There seem to be no other unresolved dependencies, so
I'm looking to find a copy of libreadlin.so.2...

On Fri, 16 Jan 1998, Gregory R. Warnes wrote:

> 
> > >My problem in making these packages is that I generate them under
> > >Debian GNU/Linux as .deb packages then use an automatic transformation
> > >program to create the RedHat Linux .rpm packages.  Since I don't use
> > >rpm for installation myself it is difficult for me to test them.  I
> 
> I've just purchased a new system that came with RedHat 5.0, and would be
> glad to test RPM's.  Just send them to me...
> 
> 
> -------------------------------------------------------------------------------
>     Gregory R. Warnes          | It is high time that the ideal of success
> warnes@biostat.washington.edu  |  be replaced by the ideal of service.
>                                |                       Albert Einstein
> -------------------------------------------------------------------------------
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-------------------------------------------------------------------------------
    Gregory R. Warnes          | It is high time that the ideal of success
warnes@biostat.washington.edu  |  be replaced by the ideal of service.
                               |                       Albert Einstein
-------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 16 23:04:25 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1998 00:04:25 +0100
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: "Gregory R. Warnes"'s message of Fri, 16 Jan 1998 14:09:59 -0800 (PST)
References: <Pine.LNX.3.96.980116135528.471D-100000@gemini.biostat.washington.edu>
Message-ID: <x2d8hsdnra.fsf@blueberry.kubism.ku.dk>

"Gregory R. Warnes" <warnes@biostat.washington.edu> writes:

> RedHat 5.0 comes with libreadline.so.3.  R-base depends on
> libreadline.so.2.  There seem to be no other unresolved dependencies, so
> I'm looking to find a copy of libreadlin.so.2...

It *should* work if you make a symlink from libreadline.so.2.1 to
libreadline.so.3 and rerun ldconfig.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 16 23:12:24 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 16 Jan 1998 17:12:24 -0600
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: Peter Dalgaard BSA's message of 17 Jan 1998 00:04:25 +0100
References: <Pine.LNX.3.96.980116135528.471D-100000@gemini.biostat.washington.edu> <x2d8hsdnra.fsf@blueberry.kubism.ku.dk>
Message-ID: <6r1zy8nhd3.fsf@franz.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> "Gregory R. Warnes" <warnes@biostat.washington.edu> writes:
> 
> > RedHat 5.0 comes with libreadline.so.3.  R-base depends on
> > libreadline.so.2.  There seem to be no other unresolved dependencies, so
> > I'm looking to find a copy of libreadlin.so.2...
> 
> It *should* work if you make a symlink from libreadline.so.2.1 to
> libreadline.so.3 and rerun ldconfig.

It may work but it may not.  Gregory is referring to installing the
r-base_0.61.1-2_i386.rpm file from the bin/i386-linux/RedHat-4.2/
directory, not the one from the RedHat-5.0 directory.  The one he is
trying to install was linked against libreadline.so.2.0 not
libreadline.so.2.1.

According to some discussions that we saw a while back, Debian's
libreadline.so.2.1 is supposedly upwardly compatible with
libreadline.so.2.0.  The libreadline.so.3.0 in RedHat 5.0 is the same
as Debian's libreadline.so.2.1 but the two maintainers can't agree on
a number.  (I think that's the way it works.  It got a bit confusing
for a while there.)

Anyway, if you do get it to install I would definitely try it out with
 R -noreadline
initially.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 16 23:29:14 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1998 00:29:14 +0100
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: Douglas Bates's message of 16 Jan 1998 17:12:24 -0600
References: <Pine.LNX.3.96.980116135528.471D-100000@gemini.biostat.washington.edu>
 <x2d8hsdnra.fsf@blueberry.kubism.ku.dk>
 <6r1zy8nhd3.fsf@franz.stat.wisc.edu>
Message-ID: <x2btxcdmlx.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> 
> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
> 
> > "Gregory R. Warnes" <warnes@biostat.washington.edu> writes:
> > 
> > > RedHat 5.0 comes with libreadline.so.3.  R-base depends on
> > > libreadline.so.2.  There seem to be no other unresolved dependencies, so
> > > I'm looking to find a copy of libreadlin.so.2...
> > 
> > It *should* work if you make a symlink from libreadline.so.2.1 to
> > libreadline.so.3 and rerun ldconfig.
> 
> It may work but it may not.  Gregory is referring to installing the
> r-base_0.61.1-2_i386.rpm file from the bin/i386-linux/RedHat-4.2/
> directory, not the one from the RedHat-5.0 directory.  The one he is
> trying to install was linked against libreadline.so.2.0 not
> libreadline.so.2.1.

Oh. I missed that. I suspect that readline is the least of his worries
in that case, though. All sorts of "fun" are liable to arise when you
run a program that was (e.g.) linked with libc5 and X libs on a system
where libc5 is still there, but the X libs are now linked against
libc6. Still, it *might* work...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.Princeton.EDU  Fri Jan 16 23:35:28 1998
From: ben@eno.Princeton.EDU (Ben Bolker)
Date: Fri, 16 Jan 1998 18:35:28 -0500 (EST)
Subject: matplot
Message-ID: <Pine.SUN.3.95.980116183449.18756B-100000@paca>


   matplot doesn't seem to pass through options like lwd, cex, etc.
quite the way I'd like.  I've thought of two ways to fix this, I don't
know which is better.

  The first is to treat lwd, cex, etc., exactly like the other options
(col, lty ...) --  (these diffs are long, skip down two pages if you want
to see the other way)

*** matplot.orig	Tue Jan 13 18:17:54 1998
--- matplot.new2	Tue Jan 13 18:16:49 1998
***************
*** 1,12 ****
  ###---- As S  (just 'better' ...)
  
! matpoints <- function(x, y, lty=1:5, pch=NULL, col=1:6, ...)
  	matplot(x=x, y=y, type = 'p', lty=lty, pch=pch, col=col, add=TRUE, ...)
! matlines  <- function(x, y, lty=1:5, pch=NULL, col=1:6, ...)
  	matplot(x=x, y=y, type = 'l', lty=lty, pch=pch, col=col, add=TRUE, ...)
  
  matplot <- function(x, y, type="p",
! 		    lty=1:5, pch=NULL, col=1:6,
  		    xlab=NULL, ylab=NULL, xlim=NULL, ylim=NULL,
  		    ..., add= FALSE, verbose = FALSE)
  {
--- 1,12 ----
  ###---- As S  (just 'better' ...)
  
! matpoints <- function(x, y, lty=1:5, pch=NULL, col=1:6, cex=1, ...)
  	matplot(x=x, y=y, type = 'p', lty=lty, pch=pch, col=col, add=TRUE, ...)
! matlines  <- function(x, y, lty=1:5, pch=NULL, col=1:6, lwd=1, ...)
  	matplot(x=x, y=y, type = 'l', lty=lty, pch=pch, col=col, add=TRUE, ...)
  
  matplot <- function(x, y, type="p",
! 		    lty=1:5, pch=NULL, col=1:6, cex=1, lwd=1,
  		    xlab=NULL, ylab=NULL, xlim=NULL, ylim=NULL,
  		    ..., add= FALSE, verbose = FALSE)
  {
***************
*** 61,66 ****
--- 61,68 ----
  	if(length(lty) < k) lty <- rep(lty, length= k)
  	if(length(pch) < k) pch <- rep(pch, length= k)
  	if(length(col) < k) col <- rep(col, length= k)
+ 	if(length(cex) < k) cex <- rep(col, length= k)
+ 	if(length(lwd) < k) lwd <- rep(col, length= k)
  	ii <- 1:k
  	if(!add) {
  		ii <- ii[-1]
***************
*** 71,78 ****
  	for (i in ii) {
  		tp <- type[i]
  		if(tp=='l' || tp=='b'|| tp=='o'|| tp=='h')
! 		  lines(x[,i],y[,i], type=tp, lty=lty[i],pch=pch[i],col=col[i])
  		if(do.points && tp=='p')
! 		  points(x[,i],y[,i], pch=pch[i], col=col[i])
  	}
  }
--- 73,82 ----
  	for (i in ii) {
  		tp <- type[i]
  		if(tp=='l' || tp=='b'|| tp=='o'|| tp=='h')
! 		  lines(x[,i],y[,i], type=tp, lty=lty[i],pch=pch[i],col=col[i],
! 	                  lwd=lwd[i])
  		if(do.points && tp=='p')
! 		  points(x[,i],y[,i], pch=pch[i], col=col[i],
! 	                  cex=cex[i])
  	}
  }


  The second is to pass extra options through ... -- I don't know if this
breaks anything, it doesn't seem to for me (and it may be more general).

*** matplot.orig	Tue Jan 13 18:17:54 1998
--- matplot.new	Tue Jan 13 18:06:48 1998
***************
*** 71,78 ****
  	for (i in ii) {
  		tp <- type[i]
  		if(tp=='l' || tp=='b'|| tp=='o'|| tp=='h')
! 		  lines(x[,i],y[,i], type=tp, lty=lty[i],pch=pch[i],col=col[i])
  		if(do.points && tp=='p')
! 		  points(x[,i],y[,i], pch=pch[i], col=col[i])
  	}
  }
--- 71,79 ----
  	for (i in ii) {
  		tp <- type[i]
  		if(tp=='l' || tp=='b'|| tp=='o'|| tp=='h')
! 		  lines(x[,i],y[,i], type=tp, lty=lty[i],pch=pch[i],col=col[i],
!                         ...)
  		if(do.points && tp=='p')
! 		  points(x[,i],y[,i], pch=pch[i], col=col[i], ...)
  	}
  }

Benjamin Bolker          Dep't of Ecology and Evolutionary Biology,
ben@eno.princeton.edu    Princeton University
tel: (609) 258-6886,     fax: (609) 258-1334


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Sat Jan 17 00:15:57 1998
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Fri, 16 Jan 1998 16:15:57 -0800 (PST)
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: <x2btxcdmlx.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.3.96.980116155506.1985B-100000@gemini.warnes.org>





Various individuals wrote:

> > It may work but it may not.  Gregory is referring to installing the
> > r-base_0.61.1-2_i386.rpm file from the bin/i386-linux/RedHat-4.2/
> > directory, not the one from the RedHat-5.0 directory.  The one he is
> > trying to install was linked against libreadline.so.2.0 not
> > libreadline.so.2.1.
> 
> Oh. I missed that. I suspect that readline is the least of his worries
> in that case, though. All sorts of "fun" are liable to arise when you
> run a program that was (e.g.) linked with libc5 and X libs on a system
> where libc5 is still there, but the X libs are now linked against
> libc6. Still, it *might* work...
> 

Okay, okay.  I didn't notice that there was a RedHat5 directory, so I
downloaded the 4.2 rpms just to see.  No, they don't work, even if I get
the correct readline.  I've now downloaded the correct RPM from the RedHat
5 directory.  

The RPM for RedHat5 wants libncurses.so.3.4.  Hmm, I've got
libncurses-3.0.  Lets try.. 

# cd /usr/lib
# ln -s libncurses.so.3.0 libncurses.so.3.4

seems to make it run OK.

Now

# rpm -i --nodeps r-base-0.61.1-2.i386.rpm 
group src does not exist - using root


R seems to work now.  The packages I downloaded from RedHat4.2, don't seem
to work.  At least, 

> library(survival4)
Error in dyn.load(file) : unable to load shared library
"/usr/lib/R/library/survival4/libs/survival4.so"

The file is there and is readable, so I expect that the libc5 libc6
difference is the problem...

-Greg

-------------------------------------------------------------------------------
    Gregory R. Warnes          | It is high time that the ideal of success
warnes@biostat.washington.edu  |  be replaced by the ideal of service.
                               |                       Albert Einstein
-------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jan 17 19:26:01 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 1998 20:26:01 +0100
Subject: Packages for RedHat 4.2, Debian 1.3
In-Reply-To: "Gregory R. Warnes"'s message of Fri, 16 Jan 1998 16:15:57 -0800 (PST)
References: <Pine.LNX.3.96.980116155506.1985B-100000@gemini.warnes.org>
Message-ID: <x2pvlqc37a.fsf@blueberry.kubism.ku.dk>

"Gregory R. Warnes" <warnes@biostat.washington.edu> writes:

> Various individuals wrote:
> 
> > > It may work but it may not.  Gregory is referring to installing the
> > > r-base_0.61.1-2_i386.rpm file from the bin/i386-linux/RedHat-4.2/
> > > directory, not the one from the RedHat-5.0 directory.  The one he is
> > > trying to install was linked against libreadline.so.2.0 not
> > > libreadline.so.2.1.
> > 
> > Oh. I missed that. I suspect that readline is the least of his worries
> > in that case, though. All sorts of "fun" are liable to arise when you
> > run a program that was (e.g.) linked with libc5 and X libs on a system
> > where libc5 is still there, but the X libs are now linked against
> > libc6. Still, it *might* work...
> > 
> 
> Okay, okay.  I didn't notice that there was a RedHat5 directory, so I
> downloaded the 4.2 rpms just to see.  No, they don't work, even if I get
> the correct readline.  I've now downloaded the correct RPM from the RedHat
> 5 directory.  

And the symlink libreadline.so.2.1->3.0 doesn't work either. I just
tried it and ldconfig is too smart to go by the filename alone, it
looks inside the file, which has the 3.0 signature, and ignores it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Jan 20 08:37:53 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 20 Jan 1998 09:37:53 +0100
Subject: as.numeric(<factor>) [Difference R/S]
In-Reply-To: <199801200734.IAA32737@pc25.none> (message from Kurt Hornik on
 Tue, 20 Jan 1998 08:34:59 +0100)
Message-ID: <199801200837.JAA06241@sophie.ethz.ch>

>From  R-core;  this should interest most R-devel'ers (to some extent):

Since 0.60,  the semantics of   as.numeric(<factor>)  has changed,
e.g.

R> as.integer(factor(c("A","BB")))
[1] NA NA
R> as.integer(factor(c(100,40,100)))
[1] 100  40 100

whereas older R and S:

S> as.integer(factor(c("A","BB")))
[1] 1 2
S> as.integer(factor(c(100,40,100)))
[1] 2 1 2


-------------------------------------
as explained by Ross, below :

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Ross Ihaka writes:
    KH>> From hornik@ci.tuwien.ac.at Mon Jan 19 22:52 NZD 1998 Subject:
    KH>> Difference R/S
    KH>> 
    KH>> Andreas just pointed me to the following:
    KH>> 
    KH>> v <- as.factor(c("Age","Number","Age")) as.numeric(v)
    KH>> 
    KH>> gives
    KH>> 
    KH>> [1] 1 2 1
    KH>> 
    KH>> in S+ and
    KH>> 
    KH>> [1] NA NA NA
    KH>> 
    KH>> Bug/feature/intentional?
    KH>> 
    KH>> Of course, R makes more sense because as.numeric("Age") gives NA in
    KH>> both R and S+ ...
    KH>> 
    KH>> Or, should we have as.numeric() return the codes on a non-numeric
    KH>> factor?

    Ross> At present R (implicitly) computes as.numeric(x) for x a factor as

    Ross> 	as.numeric(as.character(x))

    Ross> and S computes

    Ross> 	codes(x)

    Ross> I mistakenly thought that S does what I have implemented for R.
    Ross> Thomas first objected to the difference and then said he quite liked
    Ross> it.

    Ross> I quite like the present semantics, but it is easy to change if
    Ross> others have different preferences.

    KH> I personally think that the current R approach makes more sense,
    KH> too.  If we all agree on it, I would like to add the difference to
    KH> the FAQ, so that it is (well) documented.

Hmm,  I first had advocated your view above, myself.

Later, I started to discover in how much S-code
	as.numeric(ff) 
is just used to extract the factor codes (in {1:M})  from a factor.

This lead me (and Peter Dalgaard, I think) to the conclusion that
- yes, the present R behavior maybe ``cleaner'' than S's
- no, it is a pain to keep it, because it breaks S code too often.

However, as you see, we haven't agreed yet on the topic.
I think we should agree ASAP, since it involves code in several places
(outside R base).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 20 10:44:51 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jan 1998 11:44:51 +0100
Subject: as.numeric(<factor>) [Difference R/S]
In-Reply-To: Martin Maechler's message of Tue, 20 Jan 1998 09:37:53 +0100
References: <199801200837.JAA06241@sophie.ethz.ch>
Message-ID: <x2n2gr77bv.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> 
> From  R-core;  this should interest most R-devel'ers (to some extent):
> 
> Since 0.60,  the semantics of   as.numeric(<factor>)  has changed,
> e.g.
> 
> R> as.integer(factor(c("A","BB")))
> [1] NA NA
> R> as.integer(factor(c(100,40,100)))
> [1] 100  40 100
> 
> whereas older R and S:
> 
> S> as.integer(factor(c("A","BB")))
> [1] 1 2
> S> as.integer(factor(c(100,40,100)))
> [1] 2 1 2
> 
...
> 
> Hmm,  I first had advocated your view above, myself.
> 
> Later, I started to discover in how much S-code
> 	as.numeric(ff) 
> is just used to extract the factor codes (in {1:M})  from a factor.
> 
> This lead me (and Peter Dalgaard, I think) to the conclusion that
> - yes, the present R behavior maybe ``cleaner'' than S's
> - no, it is a pain to keep it, because it breaks S code too often.
> 
> However, as you see, we haven't agreed yet on the topic.
> I think we should agree ASAP, since it involves code in several places
> (outside R base).

Actually, I'm even stronger in favour of the S semantics. In addition
to the above

	- you can always get current behaviour with
        as.numeric(as.character(f)) or as.numeric(levels(f))[f]

	- one should avoid generating NA's unless absolutely necessary

	- when a factor is used for subscripting, you mean the codes,
        not the levels. Currently, we have

> (1:5)[factor(1:5,labels=5:1)]
[1] 1 2 3 4 5

but

> as.numeric(factor(1:5,labels=5:1))
[1] 5 4 3 2 1

	I.e. *sometimes* when a factor is coerced to numeric you get
	something different. (And if you change the index semantics,
	code for trend tests and the like is likely to break!). 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Jan 20 15:02:56 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 20 Jan 1998 09:02:56 -0600
Subject: prlab
In-Reply-To: Andreas Weingessel's message of Tue, 20 Jan 1998 10:42:37 +0100
References: <199801200942.KAA16633@elendil.ci.tuwien.ac.at>
Message-ID: <6rd8hn9oin.fsf@franz.stat.wisc.edu>

Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at> writes:

> When I tried to port the statlib-Pkg rpart to R, I came across the
> c-Function prlab which seems to be part of S+, but not of R.
> 
> Does anyone know what prlab does and how difficult it would be to
> emulate it in R?

Can you show us the context?  If I had to guess I would say it was a
routine to print labels but that's just a guess.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Tue Jan 20 15:17:00 1998
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas Weingessel)
Date: Tue, 20 Jan 1998 16:17:00 +0100
Subject: prlab
In-Reply-To: <6rd8hn9oin.fsf@franz.stat.wisc.edu>
References: <199801200942.KAA16633@elendil.ci.tuwien.ac.at>
 <6rd8hn9oin.fsf@franz.stat.wisc.edu>
Message-ID: <199801201517.QAA17174@elendil.ci.tuwien.ac.at>

>>>>> On 20 Jan 1998 09:02:56 -0600,
>>>>> Douglas Bates wrote:

> Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at> writes:
>> When I tried to port the statlib-Pkg rpart to R, I came across the
>> c-Function prlab which seems to be part of S+, but not of R.
>> 
>> Does anyone know what prlab does and how difficult it would be to
>> emulate it in R?

> Can you show us the context?  If I had to guess I would say it was a
> routine to print labels but that's just a guess.

That seems right, the function is called labels.rpart and seems to be
similar to the S-Fct labels.tree.

The call itself is

        pn <- .C("prlab",
                lab = character(2 * length(var)),
                as.character(splits[, 1]),
                as.character(splits[, 2]),
                as.character(unlist(xlevels)),
                as.integer(var2),             #with 0 denoting a leaf
                as.integer(temp),
                as.integer(length(var2)))

where (for the data I tried) var is a vector of factor objects, splits
is an nx2 matrix of strings, xlevels is NULL, var2 and temp are
numeric vectors.

Of course I can send the whole code, if someone is interested.

	Andreas
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 20 20:38:10 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 20 Jan 1998 15:38:10 -0500
Subject: .h files
Message-ID: <98Jan20.154626est.13453@mailgate.bank-banque-canada.ca>

I'm trying to set up R INSTALL for my padi package and the compile needs
    -I pkg/src-c
to find some .h files. (Perhaps I should be putting these in a different
location?)

Could someone please explain how I should pass this location to the compiler
used by R INSTALL from the Makefile in my pkg/src?

Thanks
Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 20 21:29:27 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Jan 1998 22:29:27 +0100
Subject: .h files
In-Reply-To: Paul Gilbert's message of Tue, 20 Jan 1998 15:38:10 -0500
References: <98Jan20.154626est.13453@mailgate.bank-banque-canada.ca>
Message-ID: <x2d8hmvnpk.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I'm trying to set up R INSTALL for my padi package and the compile needs
>     -I pkg/src-c
> to find some .h files. (Perhaps I should be putting these in a different
> location?)
> 
> Could someone please explain how I should pass this location to the compiler
> used by R INSTALL from the Makefile in my pkg/src?

What goes wrong with putting the include files along with the sources
and using  #include "file.h"  ?


As for sticking extra options into the gcc command line, I suppose
something like CFLAGS+=-I pkg/src-c in the Makefile could do it, but
does it work with all make programs or just GNU make? Or spell out
$(CC) -c $< $(CFLAGS) -I pkg/src-c $(FFLAGS) ...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 21 08:14:24 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 21 Jan 1998 09:14:24 +0100
Subject: R (off-topic): How to make mail-archives searchable?
Message-ID: <199801210814.JAA07731@sophie.ethz.ch>

As you (hopefully) know, the mail archives of
 R-devel, R-help and R-announce
have been available via FTP from here, and now also from CRAN.

I had spent a little effort to enhance these monthly plain unix-mail
folders to be 'Emacs outlined'
	(i.e., emacs is put in outline-mode when you open one of these).
and you all are probably efficient users of grep, etc.

However, for average R users, a better user interface is desired:
Something like statlib's  search engine (on S-news)
IN ADDITION to these simple plain files, or one of the many other
CGI / HTML based archive searchers should be added.

On the other hand, we have not yet desired if CRAN servers really should be
(mis)usable via CGI running on them; then, of course, the alternative are
java `beans'.

Since I've never installed any of these, I'd like to get some advice
of more experienced people like you.

Since this is a slightly off-topic subject, you could reply only to me 
and I'd summarize to R-devel...
--
Martin Maechler <maechler@stat.math.ethz.ch>			<><
http://www.stat.math.ethz.ch/~maechler/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan 21 08:59:27 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 21 Jan 1998 09:59:27 +0100
Subject: as.numeric(<factor>) [Difference R/S]
In-Reply-To: <x2n2gr77bv.fsf@blueberry.kubism.ku.dk>
References: <199801200837.JAA06241@sophie.ethz.ch>
 <x2n2gr77bv.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801210859.JAA14222@pc25.none>

>>>>> Peter Dalgaard BSA writes:

> Martin Maechler <maechler@stat.math.ethz.ch> writes:
>> 
>> From  R-core;  this should interest most R-devel'ers (to some extent):
>> 
>> Since 0.60,  the semantics of   as.numeric(<factor>)  has changed,
>> e.g.
>> 
R> as.integer(factor(c("A","BB")))
>> [1] NA NA
R> as.integer(factor(c(100,40,100)))
>> [1] 100  40 100
>> 
>> whereas older R and S:
>> 
S> as.integer(factor(c("A","BB")))
>> [1] 1 2
S> as.integer(factor(c(100,40,100)))
>> [1] 2 1 2
>> 
> ...
>> 
>> Hmm,  I first had advocated your view above, myself.
>> 
>> Later, I started to discover in how much S-code
>> as.numeric(ff) 
>> is just used to extract the factor codes (in {1:M})  from a factor.
>> 
>> This lead me (and Peter Dalgaard, I think) to the conclusion that
>> - yes, the present R behavior maybe ``cleaner'' than S's
>> - no, it is a pain to keep it, because it breaks S code too often.
>> 
>> However, as you see, we haven't agreed yet on the topic.
>> I think we should agree ASAP, since it involves code in several places
>> (outside R base).

> Actually, I'm even stronger in favour of the S semantics. In addition
> to the above

> 	- you can always get current behaviour with
>         as.numeric(as.character(f)) or as.numeric(levels(f))[f]

> 	- one should avoid generating NA's unless absolutely necessary

Right :-)

> 	- when a factor is used for subscripting, you mean the codes,
>         not the levels. Currently, we have

>> (1:5)[factor(1:5,labels=5:1)]
> [1] 1 2 3 4 5

> but

>> as.numeric(factor(1:5,labels=5:1))
> [1] 5 4 3 2 1

> 	I.e. *sometimes* when a factor is coerced to numeric you get
> 	something different. (And if you change the index semantics,
> 	code for trend tests and the like is likely to break!).

But that is really a matter of how subscripting treats factors, and not
necessarily what coercion does.

As much as I am in favor of compatibility (remember I do a lot of
porting):

* Suppose f is a factor with numeric levels other than 1 to n.  Then
as.numeric(f) returning the codes rather than the levels is strange.

* You also cannot coerce a character vector to numeric without getting
NA's.

Btw:

	x <- factor(c(10, 5, 6, 7))

Then levels(x) gives the CHARACTER vector c("5", "6", "7", "10") [in
both R and S+], why that?

And:

R> codes(x)
[1] 4 1 2 3

S> codes(x)
[1] 1 2 3 4

???
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 21 10:39:59 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jan 1998 11:39:59 +0100
Subject: as.numeric(<factor>) [Difference R/S]
In-Reply-To: Kurt Hornik's message of Wed, 21 Jan 1998 09:59:27 +0100
References: <199801200837.JAA06241@sophie.ethz.ch>
 <x2n2gr77bv.fsf@blueberry.kubism.ku.dk>
 <199801210859.JAA14222@pc25.none>
Message-ID: <x2zpkqxg8v.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> But that is really a matter of how subscripting treats factors, and not
> necessarily what coercion does.

Well, the point was that one could say that there's an implicit
coercion involved in indexing. (Note BTW that in general
A[as.numeric(as.character(f))] != 
A[as.character(f)] !=
A[codes(f)] == A[f])

> As much as I am in favor of compatibility (remember I do a lot of
> porting):
> 
> * Suppose f is a factor with numeric levels other than 1 to n.  Then
> as.numeric(f) returning the codes rather than the levels is strange.

No, it's not. It may come as a surprise to some, but it might as well
be thought strange that the internal numeric codes are not available
via as.numeric. The levels are character strings that may or may not
happen to be convertible to numbers, so why should you expect that the
general procedure assumes that they are convertible?

> * You also cannot coerce a character vector to numeric without getting
> NA's.

This is true, but in that case, there's no obvious alternative.

> Btw:
> 
> 	x <- factor(c(10, 5, 6, 7))
> 
> Then levels(x) gives the CHARACTER vector c("5", "6", "7", "10") [in
> both R and S+], why that?

By definition, a factor is an integer vector of codes coupled with a
character vector of levels. Where's the problem? We could of course
introduce the possibility of having levels vectors of any type (and
take the pains arising from differences between factor(1:3) and
factor(1:3,labels=as.character(1:3)) ). 

> 
> And:
> 
> R> codes(x)
> [1] 4 1 2 3
> 
> S> codes(x)
> [1] 1 2 3 4
> 
> ???

Apparently R is defaulting levels=as.character(sort(unique(x)),
whereas S is doing levels=sort(as.character(unique(x))), so that 10
sorts alphabetically before 5,6,7...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 21 15:57:04 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jan 1998 10:57:04 -0500
Subject: .h files
References: <98Jan20.154626est.13453@mailgate.bank-banque-canada.ca>
 <x2d8hmvnpk.fsf@blueberry.kubism.ku.dk>
 <98Jan20.165835est.13445@mailgate.bank-banque-canada.ca> <x2afcqvl8l.fsf@blueberry.kubism.ku.dk>
Message-ID: <98Jan21.110542est.13455@mailgate.bank-banque-canada.ca>

PG>> gcc -g -fpic -I/home/res8/gilp/R-versions/R-0.61.1/include  -c  putpadi.c
PG>> putpadi.c:29: padi.h: No such file or directory
PG>> putpadi.c:34: padiutil.h: No such file or directory

PD>Hum. If line 29 really reads #include "padi.h" (not <padi.h>) and
PD>padi.h really is in the same directory as putpadi.c, then I don't
PD>understand a word of it...

Well, it is <padi.h> and not "padi.h" and changing this fixes this problem in
the sense that I copied the .h files to the local directory and with "" it no
longer matters if I append to -I.

However, the .h files really should not be in the local directory as they are
used by other programs and it is important that they all stay in sync, so I
really would prefer to append to CFLAGS. When I use CFLAGS += -I. in my Makefile
it is ignored, unless I edit R/etc/INSTALL  and change to CFLAGS+= thus:

(cd ${src}; make CC="gcc" CFLAGS+="-g -fpic -I${RHOME}/include"

But then the "-g -fpic -I${RHOME}/include" is ignored and only my setting is
used! This does not make sense to me and I would certainly appreciate any
suggestions.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jan 21 17:22:29 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jan 1998 12:22:29 -0500
Subject: alloc
Message-ID: <98Jan21.123109est.13455@mailgate.bank-banque-canada.ca>

I am trying to get our database interface (PADI) working with R. The code does
some memory allocation and for Splus there is an ifdef which controls whether
malloc or S_alloc is called. I did  nm R.binary | grep alloc to see if this was
supported and I find there are some choices:
[2490] |    446036|     272|FUNC |GLOB |0    |7      |R_alloc
[806] |    693956|     312|FUNC |LOCL |0    |7      |ReallocString
[807] |    693220|     736|FUNC |LOCL |0    |7      |ReallocVector
[3444] |    446308|     144|FUNC |GLOB |0    |7      |S_alloc
[2429] |    446452|     200|FUNC |GLOB |0    |7      |S_realloc
...
[2204] |   1445856|       0|FUNC |GLOB |0    |UNDEF  |calloc
[2595] |   1444644|       0|FUNC |GLOB |0    |UNDEF  |malloc
[3066] |   1444728|       0|FUNC |GLOB |0    |UNDEF  |realloc
...
Is there any advantage to calling R_alloc rather than S_alloc? I also see that
malloc is UNDEF. Now I'm not a C programmer, but I have a funny feeling that
this could lead to some problems?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Jan 21 17:58:20 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 21 Jan 1998 11:58:20 -0600
Subject: alloc
In-Reply-To: Paul Gilbert's message of Wed, 21 Jan 1998 12:22:29 -0500
References: <98Jan21.123109est.13455@mailgate.bank-banque-canada.ca>
Message-ID: <6rn2gpr9oj.fsf@franz.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I am trying to get our database interface (PADI) working with R. The code does
> some memory allocation and for Splus there is an ifdef which controls whether
> malloc or S_alloc is called. I did  nm R.binary | grep alloc to see if this was
> supported and I find there are some choices:
> [2490] |    446036|     272|FUNC |GLOB |0    |7      |R_alloc
> [806] |    693956|     312|FUNC |LOCL |0    |7      |ReallocString
> [807] |    693220|     736|FUNC |LOCL |0    |7      |ReallocVector
> [3444] |    446308|     144|FUNC |GLOB |0    |7      |S_alloc
> [2429] |    446452|     200|FUNC |GLOB |0    |7      |S_realloc
> ...
> [2204] |   1445856|       0|FUNC |GLOB |0    |UNDEF  |calloc
> [2595] |   1444644|       0|FUNC |GLOB |0    |UNDEF  |malloc
> [3066] |   1444728|       0|FUNC |GLOB |0    |UNDEF  |realloc
> ...
> Is there any advantage to calling R_alloc rather than S_alloc? I also see that
> malloc is UNDEF. Now I'm not a C programmer, but I have a funny feeling that
> this could lead to some problems?

I can't answer the first question but the second one is not a problem.
The UNDEF here means that these symbols not defined in the R.binary
file.  They are defined in the libc.so shared object which will be
linked at run time.  This is the basic idea of shared libraries - all
the processes that running and use malloc, for example, use the same
copy of this function.  It is dynamically linked and shared between
the processes.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 21 20:47:50 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jan 1998 21:47:50 +0100
Subject: .h files
In-Reply-To: Paul Gilbert's message of Wed, 21 Jan 1998 10:57:04 -0500
References: <98Jan20.154626est.13453@mailgate.bank-banque-canada.ca>
 <x2d8hmvnpk.fsf@blueberry.kubism.ku.dk>
 <98Jan20.165835est.13445@mailgate.bank-banque-canada.ca>
 <x2afcqvl8l.fsf@blueberry.kubism.ku.dk>
 <98Jan21.110542est.13455@mailgate.bank-banque-canada.ca>
Message-ID: <x2n2gpsgeh.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> PG>> gcc -g -fpic -I/home/res8/gilp/R-versions/R-0.61.1/include  -c  putpadi.c
> PG>> putpadi.c:29: padi.h: No such file or directory
> PG>> putpadi.c:34: padiutil.h: No such file or directory
> 
> PD>Hum. If line 29 really reads #include "padi.h" (not <padi.h>) and
> PD>padi.h really is in the same directory as putpadi.c, then I don't
> PD>understand a word of it...
> 
> Well, it is <padi.h> and not "padi.h" and changing this fixes this problem in
> the sense that I copied the .h files to the local directory and with "" it no
> longer matters if I append to -I.
> 
> However, the .h files really should not be in the local directory as they are
> used by other programs and it is important that they all stay in sync, so I
> really would prefer to append to CFLAGS. 

There's always #include "../include/padi.h", etc. ...

When I use CFLAGS += -I. in my Makefile
> it is ignored, unless I edit R/etc/INSTALL  and change to CFLAGS+= thus:
> 
> (cd ${src}; make CC="gcc" CFLAGS+="-g -fpic -I${RHOME}/include"
> 
> But then the "-g -fpic -I${RHOME}/include" is ignored and only my setting is
> used! This does not make sense to me and I would certainly appreciate any
> suggestions.

You don't want to mess with etc/INSTALL anyway since it's different
between platforms and gets autogenerated by configure. You're right,
an explicit CFLAGS on the make command line overrides any assignment
inside the makefile. To wit:

$ cat Makefile
CFLAGS+=-I.
$ make x.o
cc -I.   -c x.c -o x.o
$ rm x.o
$ make x.o CFLAGS=-Ibip
cc -Ibip   -c x.c -o x.o

However, using += isn't any different here:

$ rm x.o
$ make x.o CFLAGS+=-Ibip
cc -Ibip   -c x.c -o x.o

Curiously, the override does not apply if one sets CFLAG as an
environment variable

$ rm x.o
$ CFLAGS=-Ibip make x.o             
cc -Ibip -I.   -c x.c -o x.o

I suppose we could just fix etc/INSTALL.in to use that technique.
Anyone have objections? On the other hand explicit relative paths in
#include "..." might be good enough already.
 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Jan 22 05:25:36 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 21 Jan 1998 21:25:36 -0800 (PST)
Subject: alloc
In-Reply-To: <98Jan21.123109est.13455@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.SOL.3.95.980121212409.1809A-100000@gorn>

On Wed, 21 Jan 1998, Paul Gilbert wrote:

> ...
> Is there any advantage to calling R_alloc rather than S_alloc? 

R_alloc does not zero the memory, and so is faster (if you don't want the
memory zeroed)


Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 22 08:35:05 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 22 Jan 1998 09:35:05 +0100
Subject: R feature request:  stop(..) should print its caller call
Message-ID: <199801220835.JAA09231@sophie.ethz.ch>

The following shows what I mean:

tst<-function(x)in.tst(x); in.tst<-function(y)stop(paste("y is",y)); tst(pi)

in R gives

--------------------
Error: y is 3.141593
--------------------

in S-plus gives

----------------------------------------
> > Error in in.tst(x): y is 3.14159265358979
Dumped    ^^^^^^^^^^^^
----------------------------------------

For locating bugs / problems in functions, it would be tremendously helpful
if R also printed the name of the function from which it is called
(actually the ``call(..)'' rather than just the function name).

Martin Maechler
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Jan 22 10:07:45 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 22 Jan 1998 11:07:45 +0100
Subject: R feature request:  stop(..) should print its caller call
In-Reply-To: <199801220835.JAA09231@sophie.ethz.ch>
References: <199801220835.JAA09231@sophie.ethz.ch>
Message-ID: <199801221007.LAA21175@pc25.none>

>>>>> Martin Maechler writes:

> The following shows what I mean:
> tst<-function(x)in.tst(x); in.tst<-function(y)stop(paste("y is",y)); tst(pi)

> in R gives

> --------------------
> Error: y is 3.141593
> --------------------

> in S-plus gives

> ----------------------------------------
>> > Error in in.tst(x): y is 3.14159265358979
> Dumped    ^^^^^^^^^^^^
> ----------------------------------------

> For locating bugs / problems in functions, it would be tremendously
> helpful if R also printed the name of the function from which it is
> called (actually the ``call(..)'' rather than just the function name).

Martin,

I am not sure.  I find it more useful to call traceback() after an error
occurred to find out what really happened.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan 22 11:02:36 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 22 Jan 1998 12:02:36 +0100
Subject: Re^2: R feature request:  stop(..) should print its caller call
In-Reply-To: <199801221007.LAA21175@pc25.none> (message from Kurt Hornik on
 Thu, 22 Jan 1998 11:07:45 +0100)
Message-ID: <199801221102.MAA09835@sophie.ethz.ch>


>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Martin Maechler writes:

    >> The following shows what I mean:
    >> tst<-function(x)in.tst(x); in.tst<-function(y)stop(paste("y is",y)); tst(pi)

    >> in R gives

    >> --------------------
    >> Error: y is 3.141593
    >> --------------------

    >> in S-plus gives

    >> ----------------------------------------
    >>> > Error in in.tst(x): y is 3.14159265358979
    >> Dumped    ^^^^^^^^^^^^
    >> ----------------------------------------

    >> For locating bugs / problems in functions, it would be tremendously
    >> helpful if R also printed the name of the function from which it is
    >> called (actually the ``call(..)'' rather than just the function name).

    KH> Martin,

    KH> I am not sure.  I find it more useful to call traceback() after an error
    KH> occurred to find out what really happened.

The existence of a good utility such as traceback() 
should not prevent  stop(..) from producing more informative output.

The reason I think this is really wanted:

Many S- and R- function  composers try to write functions which 
``behave'', i.e. produce reasonable error messages when they are called
with "bad" arguments.

If I (as a function composer) 
think on how to fill the "...." in a  stop(....),
I've always been assuming that stop() would prepend the call (i.e. at least
the calling function).

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 23 03:42:27 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 22 Jan 1998 21:42:27 -0600
Subject: netscape to become freely redistributable
Message-ID: <6ryb07g8kc.fsf@verdi.stat.wisc.edu>

I presume by now that most everyone has heard that, starting later
this quarter with Netscape 5.0's developers' release, the Netscape
browser program and its source code will become freely
redistributable.  They didn't say it would be GPL'd (GNU Public
License) but they said their source code would be available in the
spirit of the GPL.

Initially it bothered me that the start.help() function in R tried to
find netscape on your system and started that to read the .html files.
I thought it might be better to rely on a freely available browser
like mosaic or chimera2 or arena.  Even lynx would have been an
alternative.  I find I still often use lynx for browsing when I
am on a a machine with 8 bit planes of color because I don't want a
bloated netscape eating up my color table.

In retrospect the decision to standardize on netscape and to use their
extensions to the HTML standards in the R documentation looks like a
good one.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Jan 23 04:17:00 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 23 Jan 1998 17:17:00 +1300 (NZDT)
Subject: netscape to become freely redistributable
In-Reply-To: <6ryb07g8kc.fsf@verdi.stat.wisc.edu>
References: <6ryb07g8kc.fsf@verdi.stat.wisc.edu>
Message-ID: <199801230417.RAA17067@stat1.stat.auckland.ac.nz>

Douglas Bates writes:
 > I presume by now that most everyone has heard that, starting later
 > this quarter with Netscape 5.0's developers' release, the Netscape
 > browser program and its source code will become freely
 > redistributable.  They didn't say it would be GPL'd (GNU Public
 > License) but they said their source code would be available in the
 > spirit of the GPL.
 > 
 > Initially it bothered me that the start.help() function in R tried to
 > find netscape on your system and started that to read the .html files.
 > I thought it might be better to rely on a freely available browser
 > like mosaic or chimera2 or arena.  Even lynx would have been an
 > alternative.  I find I still often use lynx for browsing when I
 > am on a a machine with 8 bit planes of color because I don't want a
 > bloated netscape eating up my color table.
 > 
 > In retrospect the decision to standardize on netscape and to use their
 > extensions to the HTML standards in the R documentation looks like a
 > good one.

Yowser!  This is very good news indeed.

However, I think we should stay away from anyone's HTML extensions.
On the Mac and under Windows, the other browser may be prefereble.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 23 08:43:14 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 23 Jan 1998 09:43:14 +0100
Subject: S-Plus graphs to LaTeX picture commands
In-Reply-To: <34C8144A.713B@caoba.entelnet.bo> (message from kjetil halvorsen
 on Thu, 22 Jan 1998 21:53:46 -0600)
Message-ID: <199801230843.JAA11083@sophie.ethz.ch>

Well, R   ( http://lib.stat.cmu.edu/R/CRAN/ )
has a pictex(..) driver.

>>>>> "kjetil" == kjetil halvorsen <kjetil@caoba.entelnet.bo> writes:

    kjetil> Is there any possibility to write code which ``translates''
    kjetil> from splus graphics to latex picture commands? Or somebody has
    kjetil> written something like that?

    kjetil> I did some of that for xlispstat, but cannot see how to do it
    kjetil> for splus.

R  further allows some `mathematical text'
(greek, sub- and super-scripts, fractions, sum and integrals, square roots)
in the plots for x11 and postscript. 

You can see two pages with some examples in PostScript
at
	ftp://ftp.stat.math.ethz.ch/R/All-Ex-plotmath.ps

Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 23 13:07:21 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 23 Jan 1998 14:07:21 +0100
Subject: non-standard HTML? [Re: netscape to become freely redistributable]
In-Reply-To: <6ryb07g8kc.fsf@verdi.stat.wisc.edu> (message from Douglas Bates
 on 22 Jan 1998 21:42:27 -0600)
Message-ID: <199801231307.OAA11280@sophie.ethz.ch>

>>>>> "DougB" == Douglas Bates <bates@stat.wisc.edu> writes:

    DougB> I presume by now that most everyone has heard that, starting
    DougB> later this quarter with Netscape 5.0's developers' release, the
    DougB> Netscape browser program and its source code will become freely
    DougB> redistributable.  They didn't say it would be GPL'd (GNU Public
    DougB> License) but they said their source code would be available in
    DougB> the spirit of the GPL.

I did not know this.  Thank you for the information.
I *do* like it!

    DougB> Initially it bothered me that the start.help() function in R
    DougB> tried to find netscape on your system and started that to read
    DougB> the .html files.  I thought it might be better to rely on a
    DougB> freely available browser like mosaic or chimera2 or arena.  Even
    DougB> lynx would have been an alternative.  I find I still often use
    DougB> lynx for browsing when I am on a a machine with 8 bit planes of
    DougB> color because I don't want a bloated netscape eating up my color
    DougB> table.
ok.
That's why we use  
	netscape -install 
which keeps its own colormap.

    DougB> In retrospect the decision to standardize on netscape and to use
    DougB> their extensions to the HTML standards in the R documentation
    DougB> looks like a good one.

That's the paragraph which made me respond:

---> Which Non-HTML 3.2  Netscape-HTML extensions are we still using?

I've once looked a little bit at it and thought I didn't see any,
at that time.

I very much agree with Ross (and Tony Rossini and ...) that we would not
want to use non-standard HTML.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plambert@ulg.ac.be  Fri Jan 23 13:53:10 1998
From: plambert@ulg.ac.be (Philippe Lambert)
Date: Fri, 23 Jan 1998 14:53:10 +0100
Subject: hist: rel.freqs
Message-ID: <34C8A0C6.11E8BEBE@ulg.ac.be>

In R0.61,

In hist(), should the line
  rel.freqs <- counts/(sum(x) * diff(breaks))
computing the relative frequencies or height of the rectangles 
in a histogram not be
  rel.freqs <- counts/(sum(counts) * diff(breaks))
instead, or do I misunderstand something?

Thanks,
 Philippe

-- 
--------------------------------------------------------
 Philippe Lambert                   Tel: (+32)-4-3663091
 Universite de Liege               Fax: (+32)-4-3662983
 Faculte d'Economie, de Gestion et de Sciences Sociales
 Sart-Tilman B31, B-4000 Liege
 Belgium                      email: plambert@ulg.ac.be
--------------------------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 23 15:15:16 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Jan 1998 16:15:16 +0100
Subject: hist: rel.freqs
In-Reply-To: Philippe Lambert's message of Fri, 23 Jan 1998 14:53:10 +0100
References: <34C8A0C6.11E8BEBE@ulg.ac.be>
Message-ID: <x2btx32pdn.fsf@blueberry.kubism.ku.dk>

Philippe Lambert <plambert@ulg.ac.be> writes:

> 
> In R0.61,
> 
> In hist(), should the line
>   rel.freqs <- counts/(sum(x) * diff(breaks))
> computing the relative frequencies or height of the rectangles 
> in a histogram not be
>   rel.freqs <- counts/(sum(counts) * diff(breaks))
> instead, or do I misunderstand something?

Oops. You're right. Total area should be 1, not mean(x). Current code
mus give funny results if the mean is negative...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 23 15:11:27 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 23 Jan 1998 09:11:27 -0600
Subject: non-standard HTML? [Re: netscape to become freely redistributable]
In-Reply-To: Martin Maechler's message of Fri, 23 Jan 1998 14:07:21 +0100
References: <199801231307.OAA11280@sophie.ethz.ch>
Message-ID: <6ru3avi5sw.fsf@verdi.stat.wisc.edu>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> >>>>> "DougB" == Douglas Bates <bates@stat.wisc.edu> writes:

>     DougB> In retrospect the decision to standardize on netscape and to use
>     DougB> their extensions to the HTML standards in the R documentation
>     DougB> looks like a good one.

> That's the paragraph which made me respond:

> ---> Which Non-HTML 3.2  Netscape-HTML extensions are we still using?
> 
> I've once looked a little bit at it and thought I didn't see any,
> at that time.
> 
> I very much agree with Ross (and Tony Rossini and ...) that we would not
> want to use non-standard HTML.

OK, I phrased that wrong.  I have found that I can't use lynx or
chimera or arena or w3 to view the initial page at
$RHOME/html/index.html because it uses tables.  I guess that is more
of a problem with the browsers than with the html files.

It appears that recent versions of lynx still cannot work with tables.
w3 as distributed with xemacs-20 will do tables but it is awkward
because of the fixed width fonts.  Chimera 2.0 seems to work on those
pages now as does chimera 1.7.  Arena displayed the pages but got a
little confused with the spacing of the tables.  Gzilla croaked on
startup so I don't know what it would do with them.

Overall if you need a freely available browser for the next few months 
it looks like chimera is the best bet.  From the ANNOUNCE file

 It is available for anonymous ftp at ftp.cs.unlv.edu in the
 directory /pub/chimera.  Check out the URL

 http://www.unlv.edu/chimera/

 for a partial list of mirrors and other information.

Chimera 2.0 is still in alpha test and appears to need a bit of work.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 23 15:55:10 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Jan 1998 16:55:10 +0100
Subject: non-standard HTML? [Re: netscape to become freely redistributable]
In-Reply-To: Douglas Bates's message of 23 Jan 1998 09:11:27 -0600
References: <199801231307.OAA11280@sophie.ethz.ch>
 <6ru3avi5sw.fsf@verdi.stat.wisc.edu>
Message-ID: <x2afcn2nj5.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> 
> OK, I phrased that wrong.  I have found that I can't use lynx or
> chimera or arena or w3 to view the initial page at
> $RHOME/html/index.html because it uses tables.  I guess that is more
> of a problem with the browsers than with the html files.
> 
> It appears that recent versions of lynx still cannot work with tables.

Huh? Lynx 2.7.1 seems OK here. The tabular layout is a bit -- hmm,
lacking, but it's usable enough:

                               The R Language
                   Tutorials Data Structures Control Flow
                            Data Entry Graphics
                            Data Analysis with R
          Basic Statistics Exploratory Data Analysis Linear Models

The only silliness is the remark "Only the bold entries are real",
because in Lynx, *all* entries with a link are bold.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Jan 23 15:50:10 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 23 Jan 1998 16:50:10 +0100
Subject: hist: rel.freqs  --> pre-release version of hist(.)
In-Reply-To: <34C8A0C6.11E8BEBE@ulg.ac.be> (message from Philippe Lambert on
 Fri, 23 Jan 1998 14:53:10 +0100)
Message-ID: <199801231550.QAA11412@sophie.ethz.ch>

Dear Philippe,

you've reported a known bug, the fix of which hadn't made it into 0.61.1
because the fix included substantial enhancements
(and we decided that only small or important fixes should go into patches).

Following is the current (0.62 prerelease) version of

	RHOME/src/library/base/R/hist

[[BTW: If you dare to live on the bleeding edge,
	you can always pickup the current development source from
	  <CRAN>/src/devel/R-snapshot.tar.gz
]]

Martin

------------------------------------------------------------------

hist <- function(x, ...) UseMethod("hist")

hist.default <-
function (x, breaks, freq = NULL, probability = !freq, include.lowest = TRUE,
	col = NULL, border = par("fg"),
	main = paste("Histogram of" , deparse(substitute(x))),
	xlim = range(breaks), ylim = range(y, 0),
	xlab = deparse(substitute(x)), ylab,
	axes = TRUE, plot = TRUE, labels = FALSE, ...)
{
	if (!is.numeric(x))
		stop("hist: x must be numeric")
	eval(main)
	eval(xlab)
	n <- length(x <- x[!is.na(x)])
	use.br <- !missing(breaks) && length(breaks) > 1
	breaks <-
	  if(use.br) sort(breaks)
	  else {
		rx <- range(x)
		pretty (rx + c(0, diff(rx)/1000),
			n = if(missing(breaks)) 1 + log2(n)
			else { # breaks = `nclass'
				if (is.na(breaks) | breaks < 2)
				  stop("invalid number of breaks")
				breaks
			})
	  }
	nB <- length(breaks)
	counts <- .C("bincount",
		as.double(x),
		n,
		as.double(breaks),
		nB,
		counts = integer(nB - 1),
		include= as.logical(include.lowest),
		NAOK = FALSE) $counts
	if (any(counts < 0))
	  stop("negative `counts'. Internal Error in C-code for \"bincount\"")
	if (sum(counts) < n)
	  stop("some `x' not counted; maybe `breaks' do not span range of `x'")
	h <- diff(breaks)
	if (!use.br && any(h <= 0))
		stop("not strictly increasing `breaks'.")
	if (is.null(freq)) {
	  freq <- if(!missing(probability))
		!as.logical(probability)
	  else if(use.br) {
		##-- Do frequencies if breaks are evenly spaced
		max(h)-min(h) < 1e-7 * mean(h)
	  } else TRUE
	} else if(!missing(probability) && any(probability == freq))
	 stop("`probability is an alias for `!freq', however they differ.")
	intensities <- counts/(n*h)
	mids <- 0.5 * (breaks[-1] + breaks[-nB])
	y <- if (freq) counts else intensities
	if (plot) {
		plot.new()
		plot.window(xlim, ylim, "") #-> ylim's default from 'y'
          	if (missing(ylab))
                	ylab <- paste(if(!freq)"Relative ", "Frequency", sep="")
                if(freq && use.br && max(h)-min(h) > 1e-7 * mean(h))
                	warning("the AREAS in the plot are wrong -- maybe use `freq=F'")
		title(main = main, xlab = xlab, ylab = ylab, ...)
		if(axes) {
			axis(1, ...)
			axis(2, ...)
		}
		rect(breaks[-nB], 0, breaks[-1], y,
		     col = col, border = border)
		if(labels)
			text(mids, y,
			     labels = if(freq) counts else round(intensities,3),
			     adj = c(0.5, -0.5))
	}
	invisible(list(breaks = breaks, counts = counts,
		intensities = intensities, mids = mids))
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Jan 23 15:55:33 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 23 Jan 1998 16:55:33 +0100
Subject: non-standard HTML? [Re: netscape to become freely redistributable]
In-Reply-To: <x2afcn2nj5.fsf@blueberry.kubism.ku.dk>
References: <199801231307.OAA11280@sophie.ethz.ch>
 <6ru3avi5sw.fsf@verdi.stat.wisc.edu>
 <x2afcn2nj5.fsf@blueberry.kubism.ku.dk>
Message-ID: <199801231555.QAA00544@galadriel.ci.tuwien.ac.at>

>>>>> On 23 Jan 1998 16:55:10 +0100,
>>>>> Peter Dalgaard BSA (PDB) wrote:

PDB> Douglas Bates <bates@stat.wisc.edu> writes:
>> 
>> OK, I phrased that wrong.  I have found that I can't use lynx or
>> chimera or arena or w3 to view the initial page at
>> $RHOME/html/index.html because it uses tables.  I guess that is more
>> of a problem with the browsers than with the html files.
>> 
>> It appears that recent versions of lynx still cannot work with tables.

PDB> Huh? Lynx 2.7.1 seems OK here. The tabular layout is a bit -- hmm,
PDB> lacking, but it's usable enough:

PDB>                                The R Language
PDB>                    Tutorials Data Structures Control Flow
PDB>                             Data Entry Graphics
PDB>                             Data Analysis with R
PDB>           Basic Statistics Exploratory Data Analysis Linear Models

PDB> The only silliness is the remark "Only the bold entries are real",
PDB> because in Lynx, *all* entries with a link are bold.

Funny that today everybody seems to be starting to discuss the html
pages ...

I am reworking all html pages this weekend (the necessary files are
already on a floppy and wait for me to go home) ... this includes the top
page. I will also change the layout of all functions pages etc.

But I definetely will use tables etc because I don't know how to
format some of the pages without. But I'm currently putting lynx 2.7.1
on a floppy, so I will try to make the pages look as goos as possible
under lynx (though this has low priuority for me as we have a
text-representation using nroff).

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 23 22:03:58 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 23 Jan 1998 16:03:58 -0600
Subject: Copyrights for R contributed libraries
In-Reply-To: Douglas Bates's message of 23 Jan 1998 15:58:48 -0600
References: <6riuran97r.fsf@verdi.stat.wisc.edu>
Message-ID: <6rhg6un8z5.fsf@verdi.stat.wisc.edu>

I have been packaging both R and the R contributed libraries for the
Debian GNU/Linux operating system.  Right now if anyone installs
Debian Linux on an Intel machine or a DEC Alpha they will have the
option of installing R as a regular part of the operating system.  I
think this is a good way of getting wider distribution of high quality
statistical software.  The Linux community is growing rapidly and is
one of the highlights of the free software effort.  I have heard from
several people who started using R because it was included with 
Debian Linux.
 
Since vendors are encouraged to make CD-ROM's from the entire
distribution, the Debian organization is very careful about copyrights 
for the code.  The base R language is covered by the GNU Public
License (GPL) but some of the contributed libraries have other
copyright statements.  As a result I have divided the libraries into
r-cran, the contributed libraries that are covered by a copyright that 
follows the Debian Free Software Guidelines (DFSG), r-cran-non-free,
the contributed libraries that do not seem to be DFSG-compliant, and
r-mlbench.  That mlbench library is split into its own package because 
it is large and not everyone wants to install it.

I have just been informed (see below) that the copyright statement I
made about the r-cran-non-free package is insufficient.  I have to
clarify the copyright status of every library included in this
package.  I'm a little pressed for time right now and may not be able
to do this by myself.  My only option then would be to withdraw the
package.  I think that would be a shame because the package contains
very useful libraries like the survival analysis library.

I believe Kurt and Fritz are going to start to ask for contributed
libraries to include a statement of copyright as part of the
submission to CRAN.  That would help me a lot.  Could anyone
converting a library or writing a new library please take care to
include a copyright statement?  If you are converting a library and
the copyright status of the original code seems murky, please try to
contact the original authors and get the copyright status cleared up.

If we could quickly establish a format for the copyright file for a
submitted library and contributors could update their libraries, that
again would help a lot.  I don't like making work for others but I
think there are great benefits from this.  I believe that it is
helpful to have good cooperation between the Debian organization and
the R developers.

I personally prefer the GPL for code but the "Artistic" license under
which perl is distributed or the BSD-style license are also acceptable
for the regular Debian distribution.

Feel free to contact me if I can provide further information.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
------- Start of forwarded message -------
Subject: Bug#17407: r-cran-non-free: incomplete copyright file
Reply-To: Christian Schwarz <schwarz@monet.m.isar.de>, 17407@bugs.debian.org
Resent-CC: Douglas Bates <bates@cs.wisc.edu>
Resent-Date: Fri, 23 Jan 1998 07:33:01 GMT
Resent-Message-ID: <handler.17407.B.8855406599032@bugs.debian.org>
Date: Thu, 22 Jan 1998 18:23:40 +0100 (CET)
From: Christian Schwarz <schwarz@monet.m.isar.de>
To: Debian Bugs <submit@bugs.debian.org>
Message-ID: <Pine.LNX.3.96.980122182112.6087A-100000@monet>


Package: r-cran-non-free
Version: 0.61-2

The /usr/doc/r-cran-non-free/copright file reads:

--cut-here--
Individual modules, installed under /usr/lib/R/library/, contain their
own copyright statements.  These modules considered not to be Debian
Free Software Guidelines (DFSG) compliant.
--cut-here--

According to current policy, the copyright file should contain the
complete license texts. (This is important, since we are planning to set
up a license/ directory on ftp.debian.org which contains the copyright
files from all non-free packages.)


Thanks,

Chris

--                 Christian Schwarz
Do you know         schwarz@monet.m.isar.de, schwarz@schwarz-online.com,
Debian GNU/Linux?    schwarz@debian.org, schwarz@mathematik.tu-muenchen.de
      
Visit                  PGP-fp: 8F 61 EB 6D CF 23 CA D7  34 05 14 5C C8 DC 22 BA
http://www.debian.org   http://fatman.mathematik.tu-muenchen.de/~schwarz/

------- End of forwarded message -------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Jan 26 13:16:58 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 26 Jan 1998 14:16:58 +0100
Subject: New design for R html help pages
Message-ID: <199801261316.OAA18164@galadriel.ci.tuwien.ac.at>


Hi,

I've completed a re-design of the R html help pages over the weekend
(without the Kitzb=FChel ski races on TV I would have had some more time
...). The design is actually not from me but from Tanja Afra, a
student of our department.

Anyway, I've put a snapshot on

	http://www.ci.tuwien.ac.at/~leisch/R/doc/html/index.html

please have a look and feel free to make any suggestions when you
think something is not intuitive or ... I really want to get feedback
before I start writing new stuff.

I'm mostly concerned about usability, function is more important than
form. The biggest changes are in the listing of the base package
... there is now a description for each function in it and a
click-able alphabet in the beginning (known bug: it also includes dead
links for letters where no R objects exist.

The function pages contain no `back' button on purpose ... eventually
I also want to include pages from different locations than
$RHOME/library and then there will be no way to have a back button
(these use relative links working only inside $RHOME). Use your
browser's back button or history instead

Features I'll implement once we have agreed on the design:

	*) alphabetic list of all functions installed in RHOME
	*) function lists sorted by keywords
	*) help() optionally sends a request to netscape instead of
	   displaying the nroff version (controlled via options or
	   something similar)

Features I'd like to have but don't know how to do (because I don't
speak Java):
	*) search the help pages


Ok, so much for contents, now for design: The look of a product is
certainly important when trying to sell something, so I really think
we should have something slick (would be depressing if people don't
use R simply because the Splus manual looks better ...)

I don't want to enforce the logo ... it's just that pages look better
with something on it and I think Tanja did a nice job ... if soembody
send's a better one, I've just to replace one jpg file.


Ok, so much for now.

Best,
Fritz

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jan 26 16:45:29 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 26 Jan 1998 11:45:29 -0500
Subject: library.dynam
Message-ID: <98Jan26.115659est.13442@mailgate.bank-banque-canada.ca>

I keep an Splus library on our file server and support different architectures
by giving different names to compiled files to be loaded (eg. Sun4.dse.so,
Sun5.dse.so). I have the impression that it is not possible to do this with R's
current library.dynam(name)  because it uses the name to indicate both the
location and name of the binary file? Is that correct or could someone explain
how I do this?

Thanks,
Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jan 26 17:58:54 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 26 Jan 1998 18:58:54 +0100
Subject: Factor variables are not vectors...
In-Reply-To: <Pine.SUN.3.95.980126083031.935A-100000@chekov> (message from
 Thomas Lumley on Mon, 26 Jan 1998 08:34:35 -0800 (PST))
Message-ID: <199801261758.SAA08574@sophie.ethz.ch>

	[diverted from R-help to R-devel;  this gets technical ...]
>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> On Mon, 26 Jan 1998, Jim Lindsey wrote:

    >> 2. Factor variables are not vectors!!
    >> is.vector(gl(20,2,40)) gives FALSE

    TL> Even stranger 

    R> is.vector(factor(1:3))# [1] FALSE
    R> is.factor(factor(1:3))# [1] TRUE
    R> is.vector(as.vector(factor(1:3)))# [1] TRUE
    R> is.factor(as.vector(factor(1:3)))# [1] TRUE

    TL> so that factor variables *can* be vectors, but aren't naturally.

and why should they, really?

	(BTW, they are not either in S-plus, by the way).

In your code, shouldn't you test rather 

	if(!is.array(..))

instead?


-------------------

But if we are bashing on  is.vector(.):

Here is an excerpt from a mail I wrote more than 9 months ago:

##- Date: Mon, 7 Apr 97 09:33:51 +0200
##- From: Martin Maechler <maechler@stat.math.ethz.ch>
##- Cc: r-devel@stat.math.ethz.ch
##- In-Reply-To: <199704062058.IAA09618@stat1.stat.auckland.ac.nz> (message from
##- 
##- Ross>> Another reasonable definition of "vector" is !is.array(x).
##- Ross>> or possibly "isVector(x) == 1 && !is.array(x)

##- Yes, I think
##- 		isVector(x) == 1 && !is.array(x)
##- 
##- is the way to go, at least for   mode = 'any'
##- 
##- Now, for the 2nd argument  mode = '...' :
##- I think it should always be more restrictive, i.e.,
##- 	  is.vector(OB, mode= MODE)   <-->   is.vector(OB) &&  MODE.test(OB)
##- 
##- which is not the case currently [[correcting a typo in $RHOME/TASKS l.449-451]

 is.vector(call("ls"))			#[1] FALSE --- but SHOULD be 'TRUE'
 is.vector(call("ls"), mode='language')	#[1] TRUE
 is.vector(call("ls"), mode='call')	#[1] FALSE

## [[here, is.vector(call("ls"), mode='any')  should really return TRUE]]


-----
Martin Maechler
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 27 17:18:11 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 27 Jan 1998 12:18:11 -0500
Subject: New design for R html help pages
References: <199801261316.OAA18164@galadriel.ci.tuwien.ac.at>
 <98Jan26.114658est.13441@mailgate.bank-banque-canada.ca>
 <199801261652.RAA18287@galadriel.ci.tuwien.ac.at>
 <98Jan26.123117est.13448@mailgate.bank-banque-canada.ca> <199801270812.JAA18581@galadriel.ci.tuwien.ac.at>
Message-ID: <98Jan27.123012est.13452@mailgate.bank-banque-canada.ca>

Fritz

One potential problem with the html help is the difficulty of dealing with file
systems which do not support long file names (since you're using function names
as file names). I guess we can ignore DOS. I'm not sure if Windows poses any
problems, but for some reason I thought there were some Unixes that also caused
problems?

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Tue Jan 27 18:42:17 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Wed, 28 Jan 1998 07:42:17 +1300 (NZDT)
Subject: New design for R html help pages
Message-ID: <199801271842.HAA19283@stat1.stat.auckland.ac.nz>

There will definitely be problems on Windows if we go to a system with
long file names. We really must maintain (at a least a version of the
html help) with file names that comply with the old Windows standard
of 8.3. There are a large number of machines (most in students hands)
that run older versions of windows.

robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 27 19:32:19 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 27 Jan 1998 14:32:19 -0500
Subject: New design for R html help pages
References: <199801271842.HAA19283@stat1.stat.auckland.ac.nz>
Message-ID: <98Jan27.144419est.13448@mailgate.bank-banque-canada.ca>

One approach to handling long file names might be to convince everyone to
upgrade to Win95 or Linux.

Another approach is to build an index which points to files with meaningless
names. This is what I did a few years ago with my help system. It's definetly
not as nice, but it does work. You can take a look at
<http://www.bank-banque-canada.ca/pgilbert/help/dsehome.htm>
It might be best to do this as a special needs help system as I think this is a
problem that is going away. Keep the approach you're using and then build this
system afterwards.

You're welcome to use my scripts. I think they could be modified fairly easily
to build the index and files out of the html files (but I haven't looked at them
in a long time so I might be forgetting something).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 27 19:59:29 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Jan 1998 20:59:29 +0100
Subject: New design for R html help pages
In-Reply-To: Paul Gilbert's message of Tue, 27 Jan 1998 14:32:19 -0500
References: <199801271842.HAA19283@stat1.stat.auckland.ac.nz>
 <98Jan27.144419est.13448@mailgate.bank-banque-canada.ca>
Message-ID: <x2zpkhwuvy.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> Another approach is to build an index which points to files with meaningless
> names. This is what I did a few years ago with my help system. It's definetly
> not as nice, but it does work. You can take a look at
> <http://www.bank-banque-canada.ca/pgilbert/help/dsehome.htm>

Of course, what you really want is "magic links", so that jumping to
say idx.htm#long.winded.fname automagically transfers you to say
xr025.thm which contains the actual documentation for
long.winded.fname. Judging from the hoops that web pages seem to jump
through, one should expect that to be possible, but...

There's a third approach: Rdconv -t rtf followed by the Windows help
compiler. That would give the standard WinHelp interface and remove
the dependency on the browser. The obvious problem is how to get
Rdconv to accept the rtf option...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 27 20:44:10 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 27 Jan 1998 15:44:10 -0500
Subject: New design for R html help pages
References: <199801271842.HAA19283@stat1.stat.auckland.ac.nz>
 <98Jan27.144419est.13448@mailgate.bank-banque-canada.ca> <x2zpkhwuvy.fsf@blueberry.kubism.ku.dk>
Message-ID: <98Jan27.155919est.13442@mailgate.bank-banque-canada.ca>

>Of course, what you really want is "magic links", so that jumping to
>say idx.htm#long.winded.fname automagically transfers you to say
>xr025.thm which contains the actual documentation for
>long.winded.fname.

What I did is about as close as I could get without magic links. In the index,
if you click on the name of a function you do get directly to the help for that
function (a file with a meaningless name). If you click on a "see also" link you
jump to the index at the name of the function, so you have to click a second
time on the name of the function. It was a compromise that didn't seem too bad
and made things realively simple.

I also considered rtf. I thought that I could do it but quickly realized that
the ongoing support effort would kill me. HTML was a choice that worked for Unix
(which I mainly use) and also for Windows. I was afraid that if I had to make
any ongoing special separate effort for Windows then it would quickly get
out-of-date.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jan 29 09:17:29 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 29 Jan 1998 10:17:29 +0100
Subject: Summary of mails concerning R help system
Message-ID: <199801290917.KAA25806@galadriel.ci.tuwien.ac.at>


Hi,

here's a short summary of all the mails I got concerning the R help
system during the last days ... I really want to have all open
questions in this list, so if I forgot your most important topic
please forgive (and remind me again) ... it's probably only because of
lack of time such that I had to compile the list in a hurry ...

Ok, here we go:

1) It would be useful to have a button at the bottom and/or top of each page
which returns to the index. If you jump around a few "see also's" it is hard to
get back to the index ==> fairly easy, will be in the final version


2) dealing with packages not located in $RHOME/library ... that's the
most complicated part ... ideally the package list would look
different for every user, such that everybody sees the system-wide
installed pkgs together with his private pkg's

two possible solution's come to mind:

 - building the pkg list at run-time (via help.start())

 - building a list for every user, i.e. everytime one issues R INSTALL 
   a file in the user's home directory is modified

both have one major drawback which I don't know how to handle: I have
to jump between a static file located in $RHOME/docs/html and a
user-specific file, say $HOME/.R/pkg-list.html

but there seems to be no tilde expansion or $HOME variable in html,
i.e., an URL like "file:~/.R/pkg-list.html" works neither in netscape
nor lynx.


3) Short file names for windoze 3.1 systems ... there seems to be an
easy solution that I missed so far (simply replace the filenames by
something meaningless, because I use hash arrays to match aliases and
coprresponding files anyway), so this could be finished by
monday (if it really works like I think it should).


4) Rdconv -t rtf  to support the windoze help format ... I definetely
don't have time or any motivation to do that, so if somebody wants to
do that, he's welcome.


5) That's actually a wish/suggestion from me: Maybe somebody wants to
help the R project but doesn't know too much about writing code
etc. ... we need a lot more of and better documentation, e.g., short
tutorials on various topics to get people started. These should
explain the basic concept of something and accompany it with some
examples that can be copied & pasted ...

The current demos or the appendix of the R notes could get you
started.  Topics could include those as the the non-existing links
under ``Data Analysis with R'' (Basic Statistics, Exploratory Data
Analysis, Linear Models, ...)

So if you think you could write two or three pages on how to use R for
any topic you could simply write it in LaTeX ideally in such a way
that it can be translated to HTML using hyperlatex ...


Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jan 29 12:59:16 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Jan 1998 13:59:16 +0100
Subject: Summary of mails concerning R help system
In-Reply-To: Friedrich Leisch's message of Thu, 29 Jan 1998 10:17:29 +0100
References: <199801290917.KAA25806@galadriel.ci.tuwien.ac.at>
Message-ID: <x290rzfnbv.fsf@blueberry.kubism.ku.dk>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> 4) Rdconv -t rtf  to support the windoze help format ... I definetely
> don't have time or any motivation to do that, so if somebody wants to
> do that, he's welcome.

Actually, you are probably the one best *capable* of doing it, but
obviously someone needs to dig out the relevant instructions for what
is supposed to translate to what, and how to get and apply the help
compiler. I snooped around at some point and found some pointers, but
of course I didn't do it systematically in any way. There are, btw,
also (commercial) HTML to WinHelp converters, which I suppose we could
get someone to pay for a copy of.

> 5) That's actually a wish/suggestion from me: Maybe somebody wants to
> help the R project but doesn't know too much about writing code
..
> So if you think you could write two or three pages on how to use R ...
                                  ^^^^^^^^^^^^^^^^^^
.. I'll send you a lollipop. These things tend to expand!   

The first ca. 10 pages of my course notes might actually form the
basis of a "tutorial round trip" for zero-knowledge users, once I get
them translated from Danish. 

I've done a little of that already, but right now, my priorities are
on revising the Danish version before my students need them (due to
<mumble>, they have to learn ANOVA before linear regression this time,
which is a fairly innocent change at the theoretical level, but
implies quite some perturbation at the software level)

One thing we need to be aware of is that there are several types of
users at several skill levels, and that the help system should be
useful for all of them. In particular, we have practitioners (some of
which are not statistical professionals), and academics/programmers.
These - or even the same person in different modes - will be looking
for very different things. Also one should know that a good
introduction is meant to be read exactly once, nothing is more
annoying than when the author has put everything in one document and
you have to wade through pages of trivialities to find the one piece
of information you need.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Thu Jan 29 14:37:32 1998
From: luke@stat.umn.edu (Luke Tierney)
Date: Thu, 29 Jan 1998 08:37:32 -0600 (CST)
Subject: Summary of mails concerning R help system
In-Reply-To: <x290rzfnbv.fsf@blueberry.kubism.ku.dk> from "Peter Dalgaard BSA" at Jan 29, 98 01:59:16 pm
Message-ID: <9801291437.AA29282@nokomis.stat.umn.edu>

Peter Dalgaard BSA wrote:
> 
> Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:
> 
> > 4) Rdconv -t rtf  to support the windoze help format ... I definetely
> > don't have time or any motivation to do that, so if somebody wants to
> > do that, he's welcome.
> 

A curious aside: one of the C compilers I use on Windows has all its
documentation in html files and uses a browser integrated into its
environment to read the help. The manufacturer of the compiler is
located somewhere near Seattle :-).

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
206 Church Street                            email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

