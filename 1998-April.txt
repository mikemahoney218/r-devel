From p.dalgaard@biostat.ku.dk  Wed Apr  1 16:23:21 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Apr 1998 17:23:21 +0200
Subject: R-tk mailing list
Message-ID: <x2zpi5bm6u.fsf@blueberry.kubism.ku.dk>


This is to announce that Martin Maechler has set up a new mailing list
with the purpose of investigating the possibility to use Tcl/Tk with
R.

As you may know, Tcl is a scripting language and Tk is its GUI
toolkit. In the context of R, the main attractions are
	- portability X/Win3.1/Win32/Mac
	- ease of implementation (people say...)
	- nice GUI model of Tk
	- possibility of making language bindings, i.e. extending R
	  itself into a GUI programming language

The potential detractions are (we hope that these will be less
important or at least diminish with time, of course)
	- inefficiency?
	- the Tcl language, which many aren't too happy with

I guess that a sensible prioritization/sequencing of the work could be
(not that I'm trying to take control or anything...)

1) Getting a simple Tk Console running with R
2) Device driver for a TkCanvas graphics widget 
3) Looking at the glue mechanisms used in e.g. STk (Scheme/Tk)
4) Designing R/Tk interface functions

To join up, send a one-line message containing the word "subscribe" to
R-tk-request@stat.math.ethz.ch (in the *body*, not the subject).
	
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Apr  1 18:09:51 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 1 Apr 1998 09:09:51 -0800 (PST)
Subject: R-beta: Not loading C library
In-Reply-To: <x2afa6a483.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SUN.3.95.980401085119.12211A-100000@chekov>

On 1 Apr 1998, Peter Dalgaard BSA wrote:
> 
> Argh. Right. The .Dyn.libs problem is still in 0.61.2. Like Martin, I
> could have *sworn* that it was fixed...

It's still in pre0.62 as well.  
 
> A workaround is simply to remove .Dyn.libs in the startup code. It
> should suffice to change the system Rprofile by having something like
> this in it:
 
How about putting .Dyn.libs in the "Autoloads" environment? That way it
will be accessible and modifiable but it will go away when you quit R.
It's a little inelegant, but it works and it's a lot better than the
current situation.

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Wed Apr  1 19:34:46 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Wed, 1 Apr 1998 12:34:46 -0600 (CST)
Subject: line plot with NA
Message-ID: <Pine.OSF.3.95.980401122715.17690A-100000@io.uwinnipeg.ca>

I have the following data:

intens<-c(28000,72000,120000,150000,180000,260000,310000) #Td

peakcb<-c(1.2,2.5,2.7,3.7,5.6,6.2,6.8) #presses/s
peakan<-c(0.5,3.7,5.1,5.8,7.4,NA,8.4)

(See why I am using NA? I can work around this problem by using
intensityan and intensitycb)

Now do a plot of peakan:
plot(intensity, peakan, pch=10,type="b") 

The plot skips the point (260000,NA), but no  line beyond x=260,000.

I think the behaviour should be to draw a line between (180000,7.4) and
(310000,8.4).

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@math.sc.edu  Wed Apr  1 21:29:08 1998
From: rossini@math.sc.edu (Anthony Rossini)
Date: 01 Apr 1998 15:29:08 -0500
Subject: line plot with NA
In-Reply-To: Bill Simpson's message of "Wed, 1 Apr 1998 12:34:46 -0600 (CST)"
References: <Pine.OSF.3.95.980401122715.17690A-100000@io.uwinnipeg.ca>
Message-ID: <wncn2e58ewb.fsf@fhat.stat.sc.edu>


>>>>> "Bill" == Bill Simpson <wsimpson@uwinnipeg.ca> writes:

    Bill> (See why I am using NA? I can work around this problem by using
    Bill> intensityan and intensitycb)

    Bill> Now do a plot of peakan:
    Bill> plot(intensity, peakan, pch=10,type="b") 

    Bill> The plot skips the point (260000,NA), but no  line beyond x=260,000.

    Bill> I think the behaviour should be to draw a line between
    Bill> (180000,7.4) and (310000,8.4).

I respectfully disagree.  If the data were in fact longitudinal data,
with missing observations, one valid scenario would be to halt, which
is what is happening.  

Maybe a na.omit flag would be appropriate for plot?  (is there one?
I'm just speculating, not having easy access to R or Splus today).

best,
-tony

--
Anthony Rossini
Manifold Graphics / Epimetrics
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oncley@atd.ucar.edu  Thu Apr  2 01:20:54 1998
From: oncley@atd.ucar.edu (Steve Oncley)
Date: Wed, 1 Apr 1998 17:20:54 -0700 (MST)
Subject: attributes now inherited
Message-ID: <199804020020.RAA07324@clover.atd.ucar.edu>

Hi R-Developers,

After my message about a month ago concerning attributes being lost during
simple operations, Martin Maechler invited me to fix the code if I was in 
a hurry (especially for attributes in general).  We've just made the 
following changes here, which appear to implement the rules in the 
Blue Book (pg. 257) 

Enclosed is the output from "diff -c" from /R-0.61.1/src for:
main/arithmetic.c 	(calls my new routine based on Blue Book rules)
main/attrib.c 		(I added a new routine: copyMostAttrib)
main/complex.c 		(calls my new routine based on Blue Book rules)
include/Defn.h 		(one line addition to define copyMostAttrib)

We hope you will find this useful and install it in the next R release.

...Steve Oncley and Gordon Maclean
National Center for Atmospheric Research
Boulder, Colorado USA
(where the sun will soon set into the mountains)

**************************************************************************

*** arithmetic.c	Mon Nov 10 19:35:01 1997
--- /net/aster/R/src/main/arithmetic.c	Wed Apr  1 16:33:27 1998
***************
*** 428,433 ****
--- 428,443 ----
  	else
  		ans = allocVector(INTSXP, n);
  
+         /* copy attributes from longest argument */
+ 	if (n1 > n2)
+               copyMostAttrib(s1, ans);
+ 	else if (n1 == n2) {
+               copyMostAttrib(s2, ans);
+               copyMostAttrib(s1, ans);
+ 	}
+         else
+               copyMostAttrib(s2, ans);
+ 
  	if (n1 < 1 || n2 < 1) {
  		for (i = 0; i < n; i++)
  			INTEGER(ans)[i] = NA_INTEGER;
***************
*** 531,536 ****
--- 541,557 ----
  	PROTECT(s1);
  	PROTECT(s2);
  	ans = allocVector(REALSXP, n);
+ 
+         /* copy attributes from longest argument */
+ 	if (n1 > n2)
+               copyMostAttrib(s1, ans);
+ 	else if (n1 == n2) {
+               copyMostAttrib(s2, ans);
+               copyMostAttrib(s1, ans);
+ 	}
+         else
+               copyMostAttrib(s2, ans);
+ 
  	UNPROTECT(2);
  
  	if (n1 < 1 || n2 < 1) {

**************************************************************************

*** attrib.c	Mon Dec  8 02:36:53 1997
--- /net/aster/R/src/main/attrib.c	Wed Apr  1 16:43:28 1998
***************
*** 114,119 ****
--- 114,141 ----
  		return installAttrib(vec, name, val);
  }
  
+ SEXP copyMostAttrib(SEXP inp, SEXP ans)
+ {
+   /* This is called in the case of binary operations to copy most
+      attributes from (one of) the input arguments to the output.
+      Note that the Dim and Names attributes should have been assigned
+      elsewhere. */
+         SEXP s, t, u;
+ 
+ 	PROTECT(inp);
+ 	PROTECT(ans);
+ 
+ 	for (s=ATTRIB(inp); s!=R_NilValue; s=CDR(s)) {
+ 	  if ( (TAG(s) != R_NamesSymbol) &&
+ 	       (TAG(s) != R_DimSymbol) &&
+  	       (TAG(s) != R_DimNamesSymbol) ) {
+ 	    installAttrib(ans, TAG(s), CAR(s));
+ 	  }
+ 	}
+ 	UNPROTECT(2);
+         return;
+ }
+ 
  static SEXP installAttrib(SEXP vec, SEXP name, SEXP val)
  {
  	SEXP s, t;

**************************************************************************

*** complex.c	Wed Sep 17 22:37:02 1997
--- /net/aster/R/src/main/complex.c	Wed Apr  1 16:33:28 1998
***************
*** 104,109 ****
--- 104,121 ----
  	PROTECT(s1);
  	PROTECT(s2);
  	ans = allocVector(CPLXSXP, n);
+ 
+        /* copy attributes from longest argument */
+         if (n1 > n2)
+               copyMostAttrib(s1, ans);
+         else if (n1 == n2) {
+               copyMostAttrib(s2, ans);
+               copyMostAttrib(s1, ans);
+         }
+         else
+               copyMostAttrib(s2, ans);
+ 
+ 
  	UNPROTECT(2);
  
  	if (n1 < 1 || n2 < 1) {

**************************************************************************

*** Defn.h	Thu Jan  8 20:42:58 1998
--- /net/aster/R/src/include/Defn.h	Wed Apr  1 16:49:55 1998
***************
*** 459,464 ****
--- 459,465 ----
  SEXP cons(SEXP, SEXP);
  void copyListMatrix(SEXP, SEXP, int);
  void copyMatrix(SEXP, SEXP, int);
+ SEXP copyMostAttrib(SEXP, SEXP);
  void copyVector(SEXP, SEXP);
  SEXP CreateTag(SEXP);
  void CustomPrintValue(SEXP);
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Apr  2 05:49:34 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 2 Apr 1998 16:49:34 +1200 (NZST)
Subject: attributes now inherited
Message-ID: <199804020449.QAA19868@stat1.stat.auckland.ac.nz>

Thanks very much for the patches.  I have made the changes to the
sources for the current development version (0.62).

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Apr  2 17:03:47 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 2 Apr 1998 11:03:47 -0500
Subject: prcomp
Message-ID: <98Apr2.110959est.13445@mailgate.bank-banque-canada.ca>

I've noticed that the arguments and result list of prcomp in the mva package
(with 61.1) are not quite the same as in the Blue Book and in Splus. Is this
intentional or can I change it? If I change it who should I send the code to?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Apr  2 17:46:39 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 2 Apr 1998 18:46:39 +0200
Subject: prcomp;  send patches to whom?
In-Reply-To: <98Apr2.110959est.13445@mailgate.bank-banque-canada.ca> (message
 from Paul Gilbert on Thu, 2 Apr 1998 11:03:47 -0500)
Message-ID: <199804021646.SAA03511@sophie.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I've noticed that the arguments and result list of prcomp in the
    PaulG> mva package (with 61.1) are not quite the same as in the Blue
    PaulG> Book and in Splus. Is this intentional or can I change it? If I
    PaulG> change it who should I send the code to?

I think for small things like this, the best is to post 
diffs (diff -cb  or  diff -ubBw  if the latter works) to this mailing list.

Bigger things could be sent to "R-core@stat.math.ethz.ch"
 (the people who can actually change the sources in Auckland...).

Thanks for your offer to fix this yourself!
Optimally, you'd also send a patch for the help file (man/prcomp.Rd)!

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Apr  2 19:15:48 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 2 Apr 1998 13:15:48 -0500
Subject: f2c
Message-ID: <98Apr2.132201est.13448@mailgate.bank-banque-canada.ca>

I have a problem with my dynamically loaded code in R not finding pow_ii, which
for some time I thought was because library f2c is not on my Sparcstation.
However, I have now been experiencing the same problem in Linux, with all the
proper libraries in place.

My incomplete understanding of elf and shared libraries does not help, but when
compiling a complete program I usually muddle through. However, in the case of
dynamically loading code into R, I am not sure whether it is my dse.so or R
which should have the knowledge of where to find /usr/lib/libf2c.so*. I haven't
had much success trying to configure so that that information is in dse.so. None
of the usual things seem to help, so I suspect R itself needs to be able to find
the library. If someone can explain this I would very much appreciate it.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Apr  2 19:20:38 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 2 Apr 1998 20:20:38 +0200
Subject: line plot with NA
In-Reply-To: <wncn2e58ewb.fsf@fhat.stat.sc.edu> (message from Anthony Rossini
 on 01 Apr 1998 15:29:08 -0500)
Message-ID: <199804021820.UAA03706@sophie.ethz.ch>

>>>>> "tony" == Anthony Rossini <rossini@math.sc.edu> writes:

>>>>> "Bill" == Bill Simpson <wsimpson@uwinnipeg.ca> writes:

    Bill> (See why I am using NA? I can work around this problem by using
    Bill> intensityan and intensitycb)

    Bill> Now do a plot of peakan: plot(intensity, peakan, pch=10,type="b")

    Bill> The plot skips the point (260000,NA), but no line beyond
    Bill> x=260,000.

    Bill> I think the behaviour should be to draw a line between
    Bill> (180000,7.4) and (310000,8.4).

    tony> I respectfully disagree.  If the data were in fact longitudinal
    tony> data, with missing observations, one valid scenario would be to
    tony> halt, which is what is happening.

I'm with Tony (and the  S(-plus) developers are, too).
Bill, note that the current behavior is really the desired one
in typical time-series situations with missing values:
The missing values *are* graphically missing, 
which you would really want, especially in exploratory sitatuations.
((we had quite a few data analysis projects with enviromental data over
  time, where it was important to visualize the "measurement gaps")).

    tony> Maybe a na.omit flag would be appropriate for plot?  (is there
    tony> one?  I'm just speculating, not having easy access to R or Splus
    tony> today).

There's none, currently (neither R nor S-plus).

In R ( version >= 0.62 ,  == UNSTABLE)
you could use

	 plot(peakan ~ intens, subset = !is.na(peakan), pch=10,type="b")

to get the result you want.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Apr  2 19:36:56 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 02 Apr 1998 12:36:56 -0600
Subject: f2c
In-Reply-To: Paul Gilbert's message of Thu, 2 Apr 1998 13:15:48 -0500
References: <98Apr2.132201est.13448@mailgate.bank-banque-canada.ca>
Message-ID: <6rlntot6if.fsf@verdi.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I have a problem with my dynamically loaded code in R not finding pow_ii, which
> for some time I thought was because library f2c is not on my Sparcstation.
> However, I have now been experiencing the same problem in Linux, with all the
> proper libraries in place.
> 
> My incomplete understanding of elf and shared libraries does not help, but when
> compiling a complete program I usually muddle through. However, in the case of
> dynamically loading code into R, I am not sure whether it is my dse.so or R
> which should have the knowledge of where to find /usr/lib/libf2c.so*. I haven't
> had much success trying to configure so that that information is in dse.so. None
> of the usual things seem to help, so I suspect R itself needs to be able to find
> the library. If someone can explain this I would very much appreciate it.

One thing you can do is to check the R.binary file with "nm -g" to find
out what symbols are defined in it.  On my machine R.binary includes
pow_dd and pow_di but not pow_ii.

$ nm -g R.binary
...
08108c30 T pnt
         U popen
080ef370 T pow_dd
080ef460 T pow_di
08106c80 T ppois
...

This means that you will have to include a reference to the f2c library
when you are making the dse.so object.  I'm not sure of the sequence
invoked by "R INSTALL dse" but it may be that you can override the
library specification in the makefile by exporting an appropriate
value for the environment variable SHLIBLDFLAGS.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Thu Apr  2 19:48:27 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Thu, 2 Apr 1998 12:48:27 -0600 (CST)
Subject: line plot with NA
In-Reply-To: <199804021820.UAA03706@sophie.ethz.ch>
Message-ID: <Pine.OSF.3.95.980402124638.26975B-100000@io.uwinnipeg.ca>

OK Thanks for the responses.

Both Tony and Martin mentioned time series as the rationale for the
current behaviour.  That's not what I'm doing. Anyway if R is consistent
with S-Plus that's fine, I just was surprised by this.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Apr  2 21:04:02 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 3 Apr 1998 08:04:02 +1200 (NZST)
Subject: prcomp
Message-ID: <199804022004.IAA29592@stat1.stat.auckland.ac.nz>

	From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
	MIME-Version: 1.0
	To: R-devel <R-devel@stat.math.ethz.ch>
	Subject: prcomp

	I've noticed that the arguments and result list of prcomp in
	the mva package (with 61.1) are not quite the same as in the
	Blue Book and in Splus. Is this intentional or can I change it?
	If I change it who should I send the code to?

The present prcomp is a compromise between the Splus prcomp and
princomp (I didn't know about princomp and felt that prcomp wasn't
satisfactory).  I suppose each of these have their place, but I don't
really like the idea of having two functions, it just makes it harder
for users.

As for the "who"; post it to r-devel.  This gives a chance for anyone
interested to review it.  You may need to ask a week or so later
whether anyone with commit rights has committed it.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Apr  2 21:16:24 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 3 Apr 1998 08:16:24 +1200 (NZST)
Subject: f2c
Message-ID: <199804022016.IAA29773@stat1.stat.auckland.ac.nz>

> To: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> Cc: R-devel <R-devel@stat.math.ethz.ch>
> Subject: Re: f2c
> From: Douglas Bates <bates@stat.wisc.edu>
> Date: 02 Apr 1998 12:36:56 -0600

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
>
> > I have a problem with my dynamically loaded code in R not finding
> > pow_ii, which for some time I thought was because library f2c is
> > not on my Sparcstation.  > > However, I have now been experiencing
> > the same problem in Linux, with all the  proper libraries in place.
> > 
> > My incomplete understanding of elf and shared libraries does not
> > help, but when compiling a complete program I usually muddle through.
> > However, in the case of dynamically loading code into R, I am not
> > sure whether it is my dse.so or R which should have the knowledge
> > of where to find /usr/lib/libf2c.so*. I haven't  had much success
> > trying to configure so that that information is in dse.so. None
> > of the usual things seem to help, so I suspect R itself needs to
> > be able to find the library. If someone can explain this I would
> > very much appreciate it.

DB> One thing you can do is to check the R.binary file with "nm -g" to find
DB> out what symbols are defined in it.  On my machine R.binary includes
DB> pow_dd and pow_di but not pow_ii.

This is a general problem we need a solution to.  Recently, Kurt Hornik
has changed the configuration procedures so that fortran is located and
used to load R.  I thought this would fix this kind of problem.
(Any references to fortran things like pow_ii should be removed from the
C sources).

I'd suggest that you get in touch with Kurt directly:
	Kurt.Hornik@ci.tuwien.ac.at
to sort this out.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Fri Apr  3 08:20:07 1998
From: gb@stat.umu.se (Goran Brostrom)
Date: Fri, 3 Apr 1998 09:20:07 +0200 (MET DST)
Subject: R-beta: Bug in dhyper (and phyper) (fwd)
Message-ID: <Pine.GSO.3.95.980403091231.24285A-100000@pc30.stat.umu.se>


Last night I sent the bug report below to r-help. I have since then looked
at dhyper.c and found:

        if (NR < 0 || NB < 0 || n <= 0 || n > N)
                DOMAIN_ERROR;

I changed 'n <= 0' to 'n < 0' and then dhyper worked as I wanted. Am I
introducing some potentially dangerous behaviour by this change?

Goran
----------------------------------------------------------------------
I think I have found a bug in the function dhyper (R-0.61.2):

R> dhyper(0,3,3,0)
Warning: NAs produced in function "dhyper"
[1] NA

Documentation:

"Usage

dhyper(x, N1, N2, n)

.......

The hypergeometric distribution is used for sampling without replacement. 
It has density 

  p(x) = Choose(N1, x) Choose(N2, n-x) / Choose(N1+N2, n)

for x = 0,...,n"

R> choose(3,0) * choose(3,0) / choose(6,0)
[1] 1

This result is correct, and obviously dhyper is implemented in some way 
not consistent with the documentation.

Also note the spelling error of 'choose' in the documentation.

---
Goran Brostrom                         phone : +46 90 7865223
Department of Statistics                              7865213 (secr)
Umea University                        fax   :        7866614
S-90187 Umea, Sweden                   e-mail: gb@stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Apr  3 08:22:53 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 3 Apr 1998 09:22:53 +0200
Subject: Bug in dhyper (and phyper) (fwd) -- and patch
In-Reply-To: <Pine.GSO.3.95.980403091231.24285A-100000@pc30.stat.umu.se>
 (message from Goran Brostrom on Fri, 3 Apr 1998 09:20:07 +0200 (MET
 DST))
Message-ID: <199804030722.JAA00409@sophie.ethz.ch>

>>>>> "GB" == Goran Brostrom <gb@stat.umu.se> writes:

    GB> Last night I sent the bug report below to r-help. I have since then
    GB> looked at dhyper.c and found:

    GB>         if (NR < 0 || NB < 0 || n <= 0 || n > N) DOMAIN_ERROR;

    GB> I changed 'n <= 0' to 'n < 0' and then dhyper worked as I
    GB> wanted. Am I introducing some potentially dangerous behaviour by
    GB> this change?

No, I think your change was correct.
Thanks a lot for your fix!

I'm going to put your change into the 0.62 unstable version of R.

What's the typo in the documentation you mentioned (below, at the end)?
[you may answer to me privately..]


Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/



    GB> ----------------------------------------------------------------------

    GB> I think I have found a bug in the function dhyper (R-0.61.2):

    R> dhyper(0,3,3,0)
    GB> Warning: NAs produced in function "dhyper" [1] NA

    GB> Documentation:

    GB> "Usage

    GB> dhyper(x, N1, N2, n)

    GB> .......

    GB> The hypergeometric distribution is used for sampling without
    GB> replacement.  It has density

    GB>   p(x) = Choose(N1, x) Choose(N2, n-x) / Choose(N1+N2, n)

    GB> for x = 0,...,n"

    R> choose(3,0) * choose(3,0) / choose(6,0)
    GB> [1] 1

    GB> This result is correct, and obviously dhyper is implemented in some
    GB> way not consistent with the documentation.

    GB> Also note the spelling error of 'choose' in the documentation.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Fri Apr  3 21:56:08 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Fri, 3 Apr 1998 14:56:08 -0600 (CST)
Subject: cex and pch=1
Message-ID: <Pine.OSF.3.95.980403144616.10428A-101000@io.uwinnipeg.ca>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--0-375965957-891636968=:10428
Content-Type: TEXT/PLAIN; charset=US-ASCII

I do
par(cex=2,mex=.7)
when I have the plotsymbols pch=1 and pch=16 (empty and filled circles).

In x11() the plot looks fine.  But see the attachment to see how it is
saved.  I saved it with:
dev.print(horizontal=F,width=7,height=7,file="rstuff/data/varyflash/peak.ps")

The biggest problem is that the empty circles are now twice the diameter
of the filled circles.

(Also the text labels got shifted upwards and the left axis label is
clipped--latter problem can be fixed I guess by fooling around with mai or
mar.)

BTW is there any way to get the empty circles to be opaque?

Thanks for any help!

Bill Simpson

--0-375965957-891636968=:10428
Content-Type: APPLICATION/PostScript; name="peak.ps"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.OSF.3.95.980403145608.10428B@io.uwinnipeg.ca>
Content-Description: 

JSFQUy1BZG9iZS0zLjAKJSVEb2N1bWVudEZvbnRzOiBIZWx2ZXRpY2EgSGVs
dmV0aWNhLUJvbGQgSGVsdmV0aWNhLU9ibGlxdWUKJSUrIEhlbHZldGljYS1C
b2xkT2JsaXF1ZSBTeW1ib2wKJSVEb2N1bWVudE1lZGlhOiBsZXR0ZXIgNjEy
IDc5MiAwICgpCiUlVGl0bGU6IFIgR3JhcGhpY3MgT3V0cHV0CiUlQ3JlYXRv
cjogUiBTb2Z0d2FyZQolJVBhZ2VzOiAoYXRlbmQpCiUlT3JpZW50YXRpb246
IFBvcnRyYWl0CiUlQm91bmRpbmdCb3g6IDE4IDEwOCA1OTQgNjg0CiUlRW5k
Q29tbWVudHMKJSVCZWdpblByb2xvZwovZ3MgIHsgZ3NhdmUgfSBkZWYKL2dy
ICB7IGdyZXN0b3JlIH0gZGVmCi9icCAgeyBncyB9IGRlZgovZXAgIHsgc2hv
d3BhZ2UgZ3IgfSBkZWYKL20gICB7IG1vdmV0byB9IGRlZgovbCAgIHsgbGlu
ZXRvIH0gZGVmCi9ucCAgeyBuZXdwYXRoIH0gZGVmCi9jcCAgeyBjbG9zZXBh
dGggfSBkZWYKL2YgICB7IGZpbGwgfSBkZWYKL28gICB7IHN0cm9rZSB9IGRl
ZgovY2YgIHsgbmV3cGF0aCAwIDM2MCBhcmMgZmlsbCB9IGRlZgovY28gIHsg
bmV3cGF0aCAwIDM2MCBhcmMgc3Ryb2tlIH0gZGVmCi9yICAgeyAzIGluZGV4
IDMgaW5kZXggbW92ZXRvIDEgaW5kZXggNCAtMSByb2xsCiAgICAgICBsaW5l
dG8gZXhjaCAxIGluZGV4IGxpbmV0byBsaW5ldG8gY2xvc2VwYXRoIH0gZGVm
Ci9yZiAgeyByIGYgfSBkZWYKL3JvICB7IHIgbyB9IGRlZgovdCAgIHsgNiAt
MiByb2xsIG1vdmV0byBnc2F2ZSAzIGluZGV4IHRydWUKICAgICAgIGNoYXJw
YXRoIGZsYXR0ZW5wYXRoIHBhdGhiYm94IGdyZXN0b3JlIGdzYXZlCiAgICAg
ICA1IC0xIHJvbGwgcm90YXRlIDYgLTEgcm9sbCBuZWcgMyAtMSByb2xsIDUg
LTEKICAgICAgIHJvbGwgc3ViIG11bCA0IC0xIHJvbGwgbmVnIDMgLTEgcm9s
bCA0IC0xIHJvbGwKICAgICAgIHN1YiBtdWwgcm1vdmV0byBzaG93IGdyZXN0
b3JlIH0gZGVmCi9jbCAgeyBpbml0Y2xpcCBuZXdwYXRoIDMgaW5kZXggMyBp
bmRleCBtb3ZldG8gMSBpbmRleAogICAgICAgNCAtMSByb2xsIGxpbmV0byAg
ZXhjaCAxIGluZGV4IGxpbmV0byBsaW5ldG8KICAgICAgIGNsb3NlcGF0aCBj
bGlwIG5ld3BhdGggfSBkZWYKL3JnYiB7IHNldHJnYmNvbG9yIH0gZGVmCi9z
ICAgeyBzY2FsZWZvbnQgc2V0Zm9udCB9IGRlZgovUiAgIHsgL0hlbHZldGlj
YSBmaW5kZm9udCB9IGRlZgovQiAgIHsgL0hlbHZldGljYS1Cb2xkIGZpbmRm
b250IH0gZGVmCi9JICAgeyAvSGVsdmV0aWNhLU9ibGlxdWUgZmluZGZvbnQg
fSBkZWYKL0JJICB7IC9IZWx2ZXRpY2EtQm9sZE9ibGlxdWUgZmluZGZvbnQg
fSBkZWYKL1MgICB7IC9TeW1ib2wgZmluZGZvbnQgfSBkZWYKJSVFbmRQcm9s
b2cKJSVQYWdlOiAxIDEKYnAKUiAxMCBzCjAuNzUgc2V0bGluZXdpZHRoCjAu
MDAwMCAwLjAwMDAgMC4wMDAwIHJnYgo3NS40MCAxNzkuNDAgNTY0LjYwIDYy
Ni42MCBjbAo3NS40MCAxNzkuNDAgNTY0LjYwIDYyNi42MCBjbApbXSAwIHNl
dGRhc2gKOTMuNTIgMjIwLjMyIDExLjAxIGNvCltdIDAgc2V0ZGFzaAoxNjQu
MTkgMzc2LjIxIDExLjAxIGNvCltdIDAgc2V0ZGFzaAoyNDEuMjkgNDQ0LjQx
IDExLjAxIGNvCltdIDAgc2V0ZGFzaAoyODkuNDggNDc4LjUxIDExLjAxIGNv
CltdIDAgc2V0ZGFzaAozMzcuNjcgNTU2LjQ1IDExLjAxIGNvCltdIDAgc2V0
ZGFzaAo1NDYuNDggNjA1LjE3IDExLjAxIGNvCjE4LjAwIDEwOC4wMCA1OTQu
MDAgNjg0LjAwIGNsCltdIDAgc2V0ZGFzaApucAoxMjguODYgMTc5LjQwIG0K
NTMwLjQyIDE3OS40MCBsCm8KW10gMCBzZXRkYXNoCm5wCjEyOC44NiAxNzku
NDAgbQoxMjguODYgMTcyLjQwIGwKbwpbXSAwIHNldGRhc2gKbnAKMjA5LjE3
IDE3OS40MCBtCjIwOS4xNyAxNzIuNDAgbApvCltdIDAgc2V0ZGFzaApucAoy
ODkuNDggMTc5LjQwIG0KMjg5LjQ4IDE3Mi40MCBsCm8KW10gMCBzZXRkYXNo
Cm5wCjM2OS43OSAxNzkuNDAgbQozNjkuNzkgMTcyLjQwIGwKbwpbXSAwIHNl
dGRhc2gKbnAKNDUwLjExIDE3OS40MCBtCjQ1MC4xMSAxNzIuNDAgbApvCltd
IDAgc2V0ZGFzaApucAo1MzAuNDIgMTc5LjQwIG0KNTMwLjQyIDE3Mi40MCBs
Cm8KUiAyNCBzCjEyOC44NiAxNTIuODAgKDUwKSAwLjUwIDAuMDAgMC4wMCB0
CjIwOS4xNyAxNTIuODAgKDEwMCkgMC41MCAwLjAwIDAuMDAgdAoyODkuNDgg
MTUyLjgwICgxNTApIDAuNTAgMC4wMCAwLjAwIHQKMzY5Ljc5IDE1Mi44MCAo
MjAwKSAwLjUwIDAuMDAgMC4wMCB0CjQ1MC4xMSAxNTIuODAgKDI1MCkgMC41
MCAwLjAwIDAuMDAgdAo1MzAuNDIgMTUyLjgwICgzMDApIDAuNTAgMC4wMCAw
LjAwIHQKW10gMCBzZXRkYXNoCm5wCjc1LjQwIDE5NS45NiBtCjc1LjQwIDU4
NS42OCBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDE5NS45NiBtCjY4LjQw
IDE5NS45NiBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDI5My4zOSBtCjY4
LjQwIDI5My4zOSBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDM5MC44MiBt
CjY4LjQwIDM5MC44MiBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDQ4OC4y
NSBtCjY4LjQwIDQ4OC4yNSBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDU4
NS42OCBtCjY4LjQwIDU4NS42OCBsCm8KNjAuMDAgMTk1Ljk2ICgwKSAwLjUw
IDAuMDAgOTAuMDAgdAo2MC4wMCAyOTMuMzkgKDIpIDAuNTAgMC4wMCA5MC4w
MCB0CjYwLjAwIDM5MC44MiAoNCkgMC41MCAwLjAwIDkwLjAwIHQKNjAuMDAg
NDg4LjI1ICg2KSAwLjUwIDAuMDAgOTAuMDAgdAo2MC4wMCA1ODUuNjggKDgp
IDAuNTAgMC4wMCA5MC4wMCB0CltdIDAgc2V0ZGFzaApucAo1NjQuNjAgMTc5
LjQwIG0KNTY0LjYwIDYyNi42MCBsCjc1LjQwIDYyNi42MCBsCjc1LjQwIDE3
OS40MCBsCmNwIG8KMzIwLjAwIDEyNC44MCAoRmxhc2ggaW50ZW5zaXR5IFwo
VGQvMTAwMFwpKSAwLjUwIDAuMDAgMC4wMCB0CjMyLjAwIDQwMy4wMCAoUGVh
ayByZXNwb25zZSByYXRlIFwocHJlc3Nlcy9zXCkpIDAuNTAgMC4wMCA5MC4w
MCB0Cjc1LjQwIDE3OS40MCA1NjQuNjAgNjI2LjYwIGNsCltdIDAgc2V0ZGFz
aApucAo5My41MiAyNjEuMjkgbQo5OC43NSAyNjUuNDcgbAoxMDMuOTggMjY5
Ljg2IGwKMTA5LjIxIDI3NC40NyBsCjExNC40NCAyNzkuMjkgbAoxMTkuNjcg
Mjg0LjMzIGwKMTI0LjkwIDI4OS41OCBsCjEzMC4xMyAyOTUuMDUgbAoxMzUu
MzYgMzAwLjczIGwKMTQwLjU5IDMwNi42MiBsCjE0NS44MiAzMTIuNzIgbAox
NTEuMDQgMzE5LjAxIGwKMTU2LjI3IDMyNS40OSBsCjE2MS41MCAzMzIuMTUg
bAoxNjYuNzMgMzM4Ljk4IGwKMTcxLjk2IDM0NS45NiBsCjE3Ny4xOSAzNTMu
MDggbAoxODIuNDIgMzYwLjMyIGwKMTg3LjY1IDM2Ny42NyBsCjE5Mi44OCAz
NzUuMTAgbAoxOTguMTEgMzgyLjYxIGwKMjAzLjM0IDM5MC4xNiBsCjIwOC41
NyAzOTcuNzQgbAoyMTMuODAgNDA1LjMyIGwKMjE5LjAzIDQxMi44OSBsCjIy
NC4yNiA0MjAuNDMgbAoyMjkuNDkgNDI3LjkxIGwKMjM0LjcyIDQzNS4zMiBs
CjIzOS45NSA0NDIuNjMgbAoyNDUuMTggNDQ5LjgzIGwKMjUwLjQxIDQ1Ni45
MSBsCjI1NS42NCA0NjMuODMgbAoyNjAuODcgNDcwLjYwIGwKMjY2LjEwIDQ3
Ny4yMCBsCjI3MS4zMyA0ODMuNjIgbAoyNzYuNTYgNDg5Ljg0IGwKMjgxLjc5
IDQ5NS44NiBsCjI4Ny4wMiA1MDEuNjggbAoyOTIuMjUgNTA3LjI5IGwKMjk3
LjQ4IDUxMi42OCBsCjMwMi43MCA1MTcuODYgbAozMDcuOTMgNTIyLjgyIGwK
MzEzLjE2IDUyNy41NyBsCjMxOC4zOSA1MzIuMTAgbAozMjMuNjIgNTM2LjQx
IGwKMzI4Ljg1IDU0MC41MiBsCjMzNC4wOCA1NDQuNDIgbAozMzkuMzEgNTQ4
LjEzIGwKMzQ0LjU0IDU1MS42NCBsCjM0OS43NyA1NTQuOTYgbAozNTUuMDAg
NTU4LjEwIGwKMzYwLjIzIDU2MS4wNyBsCjM2NS40NiA1NjMuODYgbAozNzAu
NjkgNTY2LjUwIGwKMzc1LjkyIDU2OC45OCBsCjM4MS4xNSA1NzEuMzEgbAoz
ODYuMzggNTczLjUwIGwKMzkxLjYxIDU3NS41NiBsCjM5Ni44NCA1NzcuNDkg
bAo0MDIuMDcgNTc5LjMwIGwKNDA3LjMwIDU4MS4wMCBsCjQxMi41MyA1ODIu
NTkgbAo0MTcuNzYgNTg0LjA3IGwKNDIyLjk5IDU4NS40NiBsCjQyOC4yMiA1
ODYuNzYgbAo0MzMuNDUgNTg3Ljk4IGwKNDM4LjY4IDU4OS4xMSBsCjQ0My45
MSA1OTAuMTcgbAo0NDkuMTQgNTkxLjE2IGwKNDU0LjM2IDU5Mi4wOCBsCjQ1
OS41OSA1OTIuOTQgbAo0NjQuODIgNTkzLjc0IGwKNDcwLjA1IDU5NC40OSBs
CjQ3NS4yOCA1OTUuMTggbAo0ODAuNTEgNTk1LjgzIGwKNDg1Ljc0IDU5Ni40
MyBsCjQ5MC45NyA1OTYuOTkgbAo0OTYuMjAgNTk3LjUyIGwKNTAxLjQzIDU5
OC4wMCBsCjUwNi42NiA1OTguNDYgbAo1MTEuODkgNTk4Ljg4IGwKNTE3LjEy
IDU5OS4yNyBsCjUyMi4zNSA1OTkuNjQgbAo1MjcuNTggNTk5Ljk4IGwKNTMy
LjgxIDYwMC4yOSBsCjUzOC4wNCA2MDAuNTggbAo1NDMuMjcgNjAwLjg2IGwK
bwo0MDkuOTUgNjE5Ljc4IChBTikgMC41MCAwLjMzIDAuMDAgdAo5My41MiAy
NTQuNDIgNS4wMCBjZgpbXSAwIHNldGRhc2gKOTMuNTIgMjU0LjQyIDUuMDAg
Y28KMTY0LjE5IDMxNy43NSA1LjAwIGNmCltdIDAgc2V0ZGFzaAoxNjQuMTkg
MzE3Ljc1IDUuMDAgY28KMjQxLjI5IDMyNy40OSA1LjAwIGNmCltdIDAgc2V0
ZGFzaAoyNDEuMjkgMzI3LjQ5IDUuMDAgY28KMjg5LjQ4IDM3Ni4yMSA1LjAw
IGNmCltdIDAgc2V0ZGFzaAoyODkuNDggMzc2LjIxIDUuMDAgY28KMzM3LjY3
IDQ2OC43NiA1LjAwIGNmCltdIDAgc2V0ZGFzaAozMzcuNjcgNDY4Ljc2IDUu
MDAgY28KNDY2LjE3IDQ5Ny45OSA1LjAwIGNmCltdIDAgc2V0ZGFzaAo0NjYu
MTcgNDk3Ljk5IDUuMDAgY28KNTQ2LjQ4IDUyNy4yMiA1LjAwIGNmCltdIDAg
c2V0ZGFzaAo1NDYuNDggNTI3LjIyIDUuMDAgY28KW10gMCBzZXRkYXNoCm5w
CjkzLjUyIDI1NC45NCBtCjk4Ljc1IDI1Ny40MiBsCjEwMy45OCAyNTkuOTkg
bAoxMDkuMjEgMjYyLjYzIGwKMTE0LjQ0IDI2NS4zNiBsCjExOS42NyAyNjgu
MTggbAoxMjQuOTAgMjcxLjA3IGwKMTMwLjEzIDI3NC4wNSBsCjEzNS4zNiAy
NzcuMTIgbAoxNDAuNTkgMjgwLjI3IGwKMTQ1LjgyIDI4My41MCBsCjE1MS4w
NCAyODYuODEgbAoxNTYuMjcgMjkwLjIxIGwKMTYxLjUwIDI5My42OCBsCjE2
Ni43MyAyOTcuMjMgbAoxNzEuOTYgMzAwLjg2IGwKMTc3LjE5IDMwNC41NyBs
CjE4Mi40MiAzMDguMzQgbAoxODcuNjUgMzEyLjE5IGwKMTkyLjg4IDMxNi4x
MCBsCjE5OC4xMSAzMjAuMDcgbAoyMDMuMzQgMzI0LjEwIGwKMjA4LjU3IDMy
OC4xOSBsCjIxMy44MCAzMzIuMzMgbAoyMTkuMDMgMzM2LjUyIGwKMjI0LjI2
IDM0MC43NSBsCjIyOS40OSAzNDUuMDIgbAoyMzQuNzIgMzQ5LjMzIGwKMjM5
Ljk1IDM1My42NiBsCjI0NS4xOCAzNTguMDIgbAoyNTAuNDEgMzYyLjM5IGwK
MjU1LjY0IDM2Ni43OCBsCjI2MC44NyAzNzEuMTggbAoyNjYuMTAgMzc1LjU4
IGwKMjcxLjMzIDM3OS45OCBsCjI3Ni41NiAzODQuMzYgbAoyODEuNzkgMzg4
Ljc0IGwKMjg3LjAyIDM5My4wOSBsCjI5Mi4yNSAzOTcuNDIgbAoyOTcuNDgg
NDAxLjczIGwKMzAyLjcwIDQwNS45OSBsCjMwNy45MyA0MTAuMjIgbAozMTMu
MTYgNDE0LjQxIGwKMzE4LjM5IDQxOC41NCBsCjMyMy42MiA0MjIuNjMgbAoz
MjguODUgNDI2LjY2IGwKMzM0LjA4IDQzMC42MyBsCjMzOS4zMSA0MzQuNTMg
bAozNDQuNTQgNDM4LjM3IGwKMzQ5Ljc3IDQ0Mi4xNCBsCjM1NS4wMCA0NDUu
ODQgbAozNjAuMjMgNDQ5LjQ2IGwKMzY1LjQ2IDQ1My4wMSBsCjM3MC42OSA0
NTYuNDcgbAozNzUuOTIgNDU5Ljg2IGwKMzgxLjE1IDQ2My4xNyBsCjM4Ni4z
OCA0NjYuMzkgbAozOTEuNjEgNDY5LjU0IGwKMzk2Ljg0IDQ3Mi41OSBsCjQw
Mi4wNyA0NzUuNTcgbAo0MDcuMzAgNDc4LjQ2IGwKNDEyLjUzIDQ4MS4yNiBs
CjQxNy43NiA0ODMuOTkgbAo0MjIuOTkgNDg2LjYyIGwKNDI4LjIyIDQ4OS4x
OCBsCjQzMy40NSA0OTEuNjYgbAo0MzguNjggNDk0LjA1IGwKNDQzLjkxIDQ5
Ni4zNiBsCjQ0OS4xNCA0OTguNjAgbAo0NTQuMzYgNTAwLjc2IGwKNDU5LjU5
IDUwMi44NCBsCjQ2NC44MiA1MDQuODUgbAo0NzAuMDUgNTA2Ljc5IGwKNDc1
LjI4IDUwOC42NSBsCjQ4MC41MSA1MTAuNDUgbAo0ODUuNzQgNTEyLjE3IGwK
NDkwLjk3IDUxMy44NCBsCjQ5Ni4yMCA1MTUuNDMgbAo1MDEuNDMgNTE2Ljk3
IGwKNTA2LjY2IDUxOC40NCBsCjUxMS44OSA1MTkuODYgbAo1MTcuMTIgNTIx
LjIyIGwKNTIyLjM1IDUyMi41MiBsCjUyNy41OCA1MjMuNzcgbAo1MzIuODEg
NTI0Ljk3IGwKNTM4LjA0IDUyNi4xMiBsCjU0My4yNyA1MjcuMjIgbApvCjQw
OS45NSA0NjMuODkgKENCKSAwLjUwIDAuMzMgMC4wMCB0CmVwCiUlVHJhaWxl
cgolJVBhZ2VzOiAxCiUlRU9GCg==
--0-375965957-891636968=:10428--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Sun Apr  5 17:02:14 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Sun, 5 Apr 1998 11:02:14 -0500 (CDT)
Subject: plogis bug
Message-ID: <Pine.OSF.3.95.980405105309.20600A-100000@io.uwinnipeg.ca>

plogis seems broken:

> xfit<-seq(1,5,.1)
> pfit<-pnorm(-(3-xfit)/1)
> pfit
 [1] 0.02275013 0.02871656 0.03593032 0.04456546 0.05479929 0.06680720
 [7] 0.08075666 0.09680048 0.11506967 0.13566606 0.15865525 0.18406013
[13] 0.21185540 0.24196365 0.27425312 0.30853754 0.34457826 0.38208858
[19] 0.42074029 0.46017216 0.50000000 0.53982784 0.57925971 0.61791142
[25] 0.65542174 0.69146246 0.72574688 0.75803635 0.78814460 0.81593987
[31] 0.84134475 0.86433394 0.88493033 0.90319952 0.91924334 0.93319280
[37] 0.94520071 0.95543454 0.96406968 0.97128344 0.97724987
> pfit<-plogis(-(3-xfit)/1)
> pfit
 [1] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
 [8] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
[15] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.5000000
[22] 0.5249792 0.5498340 0.5744425 0.5986877 0.6224593 0.6456563 0.6681878
[29] 0.6899745 0.7109495 0.7310586 0.7502601 0.7685248 0.7858350 0.8021839
[36] 0.8175745 0.8320184 0.8455347 0.8581489 0.8698915 0.8807971
notice all the zeros--this is wrong.

> myplogis<-function(q)
{
1/(1+exp(-q))
}+ + + 
> pfit<-myplogis((-(3-xfit)/1))
> pfit
 [1] 0.1192029 0.1301085 0.1418511 0.1544653 0.1679816 0.1824255 0.1978161
 [8] 0.2141650 0.2314752 0.2497399 0.2689414 0.2890505 0.3100255 0.3318122
[15] 0.3543437 0.3775407 0.4013123 0.4255575 0.4501660 0.4750208 0.5000000
[22] 0.5249792 0.5498340 0.5744425 0.5986877 0.6224593 0.6456563 0.6681878
[29] 0.6899745 0.7109495 0.7310586 0.7502601 0.7685248 0.7858350 0.8021839
[36] 0.8175745 0.8320184 0.8455347 0.8581489 0.8698915 0.8807971

I actually looked at plogis.c and it looks fine.  Not sure what is causing
the trouble.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Sun Apr  5 18:14:05 1998
From: gb@stat.umu.se (Goran Brostrom)
Date: Sun, 5 Apr 1998 19:14:05 +0200 (MET DST)
Subject: plogis bug
In-Reply-To: <Pine.OSF.3.95.980405105309.20600A-100000@io.uwinnipeg.ca>
Message-ID: <Pine.GSO.3.95.980405191018.784A-100000@pc30.stat.umu.se>


On Sun, 5 Apr 1998, Bill Simpson wrote:

> plogis seems broken:
> 
> > xfit<-seq(1,5,.1)
> > pfit<-pnorm(-(3-xfit)/1)
> > pfit
>  [1] 0.02275013 0.02871656 0.03593032 0.04456546 0.05479929 0.06680720
>  [7] 0.08075666 0.09680048 0.11506967 0.13566606 0.15865525 0.18406013
> [13] 0.21185540 0.24196365 0.27425312 0.30853754 0.34457826 0.38208858
> [19] 0.42074029 0.46017216 0.50000000 0.53982784 0.57925971 0.61791142
> [25] 0.65542174 0.69146246 0.72574688 0.75803635 0.78814460 0.81593987
> [31] 0.84134475 0.86433394 0.88493033 0.90319952 0.91924334 0.93319280
> [37] 0.94520071 0.95543454 0.96406968 0.97128344 0.97724987
> > pfit<-plogis(-(3-xfit)/1)
> > pfit
>  [1] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
>  [8] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
> [15] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.5000000
> [22] 0.5249792 0.5498340 0.5744425 0.5986877 0.6224593 0.6456563 0.6681878
> [29] 0.6899745 0.7109495 0.7310586 0.7502601 0.7685248 0.7858350 0.8021839
> [36] 0.8175745 0.8320184 0.8455347 0.8581489 0.8698915 0.8807971
> notice all the zeros--this is wrong.
> 
> I actually looked at plogis.c and it looks fine.  Not sure what is causing
> the trouble.
 
I also looked at plogis.c. It looks fine in R-0.61.1, but not in 
R-snapshot; the difference is an added line

if(x < location) return 0;

which should not be there. Guess you are running snapshot and looking at
plogis.c form another version.

Goran Brostrom
Statistics Dept, Umea University
Umea, Sweden


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Sun Apr  5 21:34:32 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Mon, 6 Apr 1998 08:34:32 +1200 (NZST)
Subject: plogis bug
Message-ID: <199804052034.IAA08685@stat1.stat.auckland.ac.nz>

	From: Goran Brostrom <gb@stat.umu.se>
	To: Bill Simpson <wsimpson@uwinnipeg.ca>
	cc: r-devel <r-devel@stat.math.ethz.ch>
	Subject: Re: plogis bug


	On Sun, 5 Apr 1998, Bill Simpson wrote:

	> plogis seems broken:
	> 
	 
	I also looked at plogis.c. It looks fine in R-0.61.1, but not in 
	R-snapshot; the difference is an added line

	if(x < location) return 0;

	which should not be there. Guess you are running snapshot and looking at
	plogis.c form another version.

Exactly right!  I just commited the change, thanks.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kim.pilegaard@risoe.dk  Mon Apr  6 11:51:58 1998
From: kim.pilegaard@risoe.dk (Kim Pilegaard)
Date: Mon, 06 Apr 1998 09:51:58 -0100 (GMT)
Subject: problems with chron library
Message-ID: <Pine.GSO.3.95.980406094808.3957A-100000@eco-sun.risoe.dk>

I have installed the chron library, but it does not seem to work:

> chron("04/06/98")
Error in .C(NAME = "to_lower", strings = as.character(str), nstrings =
as.integer(n)) : C/Fortran function not in load table
> chron(17894)
Error in .C(NAME = "to_lower", strings = as.character(str), nstrings =
as.integer(n)) : C/Fortran function not in load table
>

I am using R Version 0.61.0 Alpha (December 21, 1997) with 
chron_2.1-2.tar.gz

Best wishes,

Kim

=============================================================================
Kim Pilegaard
Plant Biology and Biogeochemistry Department
Building 114
Risoe National Laboratory
P.O. Box 49
DK-4000 Roskilde
DENMARK
Phone:  +45 4677 4175
Fax:    +45 4677 4193
E-mail: kim.pilegaard@risoe.dk


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Apr  6 10:57:58 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 6 Apr 1998 11:57:58 +0200
Subject: problems with chron library
In-Reply-To: <Pine.GSO.3.95.980406094808.3957A-100000@eco-sun.risoe.dk>
 (message from Kim Pilegaard on Mon, 06 Apr 1998 09:51:58 -0100 (GMT))
Message-ID: <199804060957.LAA00694@sophie.ethz.ch>

Kim,

The chron package is in contrib/devel
			        -----
rather than contrib.
The reason is that it requires R 0.62 (the "unstable" development version).

Your problem might also be the famous ``lingering .Dyn.lib'' problem.
Try to add
	rm(.Dyn.libs)
to your .First function  (or at least try to execute it before library(chron)).
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Osman.Buyukisik@ae.ge.com  Mon Apr  6 13:28:36 1998
From: Osman.Buyukisik@ae.ge.com (Buyukisik, Osman (GEAE))
Date: Mon, 6 Apr 1998 08:28:36 -0400
Subject: compiling Snapshots under RedHat4.2
Message-ID: <0302875C631AD11198DE00600806C63747A030@ev009msxaege.ae.ge.com>

Hi,
 I have hp/hpux10.20 at work, and was able to build snapshots there. At home, I
have p120 linux redhat4.2. I thought it would work better than the hp, but... I
am getting missing routines drotg_ (I guess supposed to be in blas?) and
readline related linking errors. Do I need to upgrade to 5.0???
TIA
Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Mon Apr  6 17:18:48 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Mon, 6 Apr 1998 11:18:48 -0500 (CDT)
Subject: data.entry()
Message-ID: <Pine.OSF.3.95.980406111614.22416A-100000@io.uwinnipeg.ca>

In the snapshot, if you try to quit data.entry() by clicking the kill box
instead of clicking in quit box, you crash R.  This was the same behaviour
that used to happen in graphics window (now fixed).

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kim.pilegaard@risoe.dk  Tue Apr  7 09:55:15 1998
From: kim.pilegaard@risoe.dk (Kim Pilegaard)
Date: Tue, 07 Apr 1998 07:55:15 -0100
Subject: problems with chron library
Message-ID: <9804070855.AA06585@eco-sun.risoe.dk>


> Kim,
> 
> The chron package is in contrib/devel
> 			        -----
> rather than contrib.
> The reason is that it requires R 0.62 (the "unstable" development version).
> 
> Your problem might also be the famous ``lingering .Dyn.lib'' problem.
> Try to add
> 	rm(.Dyn.libs)
> to your .First function  (or at least try to execute it before 
library(chron)).

Thanks for the information. 
Does this mean that all the packages in contrib/devel requires R 0.62 ?
I don't seem to have .Dyn.lib so that does not help.


Kim
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Apr  7 08:37:37 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 7 Apr 1998 09:37:37 +0200
Subject: problems with chron library
In-Reply-To: <9804070855.AA06585@eco-sun.risoe.dk> (kim.pilegaard@risoe.dk)
Message-ID: <199804070737.JAA00491@sophie.ethz.ch>

>>>>> "Kim" == Kim Pilegaard <kim.pilegaard@risoe.dk> writes:

    >> Kim,
    >> 
    >> The chron package is in contrib/devel ----- rather than contrib.
    >> The reason is that it requires R 0.62 (the "unstable" development
    >> version).
    >> 
    >> Your problem might also be the famous ``lingering .Dyn.lib''
    >> problem.  Try to add rm(.Dyn.libs) to your .First function (or at
    >> least try to execute it before
    >> library(chron)).

    Kim> Thanks for the information.  Does this mean that all the packages
    Kim> in contrib/devel requires R 0.62 ?

No, it doesn't mean that.
"devel" means something like:	

	This is a package in DEVELopment, i.e.,
	it is known to have problems under some circumstances.

The "some circumstances"  
	- can mean that not all functions work in current
	  versions of R,

	- can mean that C / Fortran code does not properly link on some
	  architectures,..

	- can mean that the code hasn't been tested thoroughly and is huge
	  (which automatically means it has bugs  :-)

Note that the last case is certainly true  for  'lme', 'dse' and 'design'.
I think all of these three do not require 0.62 at all.

CRAN-maintainers: 
	It certainly would be useful to have a  README file in
		 <<CRAN>>/src/contrib/devel/
But then I agree "devel" just means: 
	``You are on your own if you hope it works'' :-)


    Kim> I don't seem to have .Dyn.lib so that does not help.

too bad.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Apr  7 19:57:55 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 07 Apr 1998 13:57:55 -0500
Subject: R-beta: spline problems(?)
In-Reply-To: "A. Tsiolakidis"'s message of "Tue, 7 Apr 1998 04:25:10 +0100 (BST)"
References: <2441.199804070325@arnie.cs.keele.ac.uk>
Message-ID: <6riuol793g.fsf@verdi.stat.wisc.edu>

"A. Tsiolakidis"  <tsioltas@cs.keele.ac.uk> writes:

> OK, thanks, it looks like I can use the splines library instead (I had no
> idea how, but now I do!). Should we call it a bug then?
> 
> Question No. 2:
> 
> >From the same S-plus program, I was forced to change a line that was giving
> me Segmentation Error problems (a crash on Solaris 2.5):
> 
>  error _ t(y.fit) %*% ( DBD + Lambda ) %*% y.fit +
>  rbind(rep(1,n)) %*% F.vec.sq - 2 * t(y.fit) %*% F.vec

> Apparently, leaving out the middle term did the trick:
>  error _ t(y.fit) %*% ( DBD + Lambda ) %*% y.fit - 2 * t(y.fit) %*% F.vec
> , while the program still runs more or less as expected. There's nothing
> nasty about this middle term, is there?

It could possibly be a problem with rbind or with the matrix
multiplication for a column vector like that.  It is unusual to create 
a matrix that way.  If you want a single column you could create it as
 matrix( 1, nrow = n, ncol = 1)
or reverse the value of the nrow and ncol arguments for a matrix with
1 row.  Even more concise is
 array( 1, c(n, 1) ) or array( 1, c(1, n)) 
depending on which orientation you want.

> Finally, a certain READ.MAT function, that reads in a single-column file,
> taking the first two entries as the dimension of a matrix and storing the
> remaining values in such a matrix, wouldn't work; anybody can see why?

> READ.MAT _function(file, nrow = 0) {
> if(nrow > 0) {
>     n <- scan(file, n = 2)[2] * nrow
>     tmp <- scan(file, n = n + 2)
>   } 
> 
> ## first point of action: simply read in the file in vector 'tmp'
> else {
>     tmp <- scan(file)
>   }
> 
> if(length(tmp)<=2) {
>     return(NULL) 
>   }
> 
> ## the following clause should do the vector>>matrix conversion
> 
>  else {
>     x <- matrix(tmp[ - c(1, 2)], ncol = tmp[2], byrow = T)
>     return(x)
>   }
> }

I'm not sure exactly what is happening with that.

> Finally, if anybody is curious to see what is giving me all this trouble,
> it is some code for what is termed Mixture Spline models:
> http://cm.bell-labs.com/cm/ms/departments/sia/dxsun/speech/mixSplineSpec

This was sent to me only.  I am forwarding the reply onto the r-devel
list so others can take a look at it.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Apr  7 22:13:52 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 8 Apr 1998 09:13:52 +1200 (NZST)
Subject: Update to R-unstable
Message-ID: <199804072113.JAA26315@stat1.stat.auckland.ac.nz>

I just want to signal to anyone using the develoment (i.e. more
unstable) version of R that (with permission) I have just
incorporated John Chambers' StatLib dataframe code into R and also
rewritten the code for "factors" to more closely resemble that in S.

This is a BIG change (2-3k lines of C code perished in the struggle).
The change seems to work well, but there may be residual problems.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Apr  8 06:10:32 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 8 Apr 1998 17:10:32 +1200 (NZST)
Subject: Spline code fixed
Message-ID: <199804080510.RAA08583@stat1.stat.auckland.ac.nz>

The problem in "spline" and "splinefun" has been fixed.  There was a
typo in the code computing natural and Forsythe/Malcom/Moler splines.
Only extrapolation beyond the right-hand endpoint would have produced
incorrect results.  Periodic splines were not affected.
	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Apr  8 21:10:30 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 9 Apr 1998 08:10:30 +1200 (NZST)
Subject: Image restoration in latest snapshots
Message-ID: <199804082010.IAA17686@stat1.stat.auckland.ac.nz>

I have restored backward compatibility of .RData files in the latest
development snapshot.  This should be propagating to archives shortly.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Apr  9 17:27:47 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 9 Apr 1998 09:27:47 -0700 (PDT)
Subject: 0-extent matrices?
In-Reply-To: <199803302030.IAA23649@stat1.stat.auckland.ac.nz>
Message-ID: <Pine.SUN.3.95.980409091945.15125A-100000@chekov>


Is there a good reason not to allow matrix extents to be zero? I have been
writing a function which fits glms under certain linear constraints.  I
fit the model with a reduced set of variables and then transform back to
the original set.  This involves operating on submatrices of the
covariance matrix and subsets of the coefficients. Sometimes these subsets
are empty.  A zero-length subset of the coefficient vector causes no
problems, but a 0x6 submatrix of the covariance matrix won't work with
rbind and cbind.  There appears to be no difficulty in deciding how
standard matrix and array operations should work with a 0x6 matrix and in
fact you might expect that the same C code would usually work.

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Apr 11 09:56:16 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 11 Apr 1998 10:56:16 +0200
Subject: 0-extent matrices?
In-Reply-To: <Pine.SUN.3.95.980409091945.15125A-100000@chekov> (message from
 Thomas Lumley on Thu, 9 Apr 1998 09:27:47 -0700 (PDT))
Message-ID: <199804110856.KAA00986@sophie.ethz.ch>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> Is there a good reason not to allow matrix extents to be zero? 

No, I don't think so.

And I agree that it would be really useful to have them in circumstances
like yours.

    TL> I have been writing a function which fits glms under certain linear
    TL> constraints.  I fit the model with a reduced set of variables and
    TL> then transform back to the original set.  This involves operating
    TL> on submatrices of the covariance matrix and subsets of the
    TL> coefficients. Sometimes these subsets are empty.  A zero-length
    TL> subset of the coefficient vector causes no problems, but a 0x6
    TL> submatrix of the covariance matrix won't work with rbind and cbind.
    TL> There appears to be no difficulty in deciding how standard matrix
    TL> and array operations should work with a 0x6 matrix and in fact you
    TL> might expect that the same C code would usually work.

Could you look into implementing them? 

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Lumley <thomas@biostat.washington.edu>  Sun Apr 12 00:24:41 1998
From: Thomas Lumley <thomas@biostat.washington.edu> (Thomas Lumley)
Date: Sat, 11 Apr 1998 16:24:41 -0700 (PDT)
Subject: 0-extent matrices?
In-Reply-To: <199804110856.KAA00986@sophie.ethz.ch>
Message-ID: <Pine.LNX.3.96.980411161742.11966A-100000@buffy>


Implementing 0-extent matrices turns out to be easy -- it's almost
entirely a matter of removing the tests for 0.  There seems to be only one
thing that may require special-case handling, but I'm not sure what the
Right Thing to do is.

If m is a 0x4 matrix, say, what should 2*m, 2+m and so on return?

Since m+m is a 0x4 matrix but 2*as.vector(m) is NA we can't have complete
consistency.  My preference is for these operations to happen elementwise
-- ie m+m is a 0x4 matrix.  Comments?

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Apr 12 15:57:34 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 12 Apr 1998 16:57:34 +0200 (CEST)
Subject: 0-extent matrices?
In-Reply-To: <Pine.LNX.3.96.980411161742.11966A-100000@buffy>
References: <199804110856.KAA00986@sophie.ethz.ch>
 <Pine.LNX.3.96.980411161742.11966A-100000@buffy>
Message-ID: <13616.54878.596955.835572@aragorn.ci.tuwien.ac.at>

>>>>> Thomas Lumley writes:

> Implementing 0-extent matrices turns out to be easy -- it's almost
> entirely a matter of removing the tests for 0.  There seems to be only one
> thing that may require special-case handling, but I'm not sure what the
> Right Thing to do is.

> If m is a 0x4 matrix, say, what should 2*m, 2+m and so on return?

> Since m+m is a 0x4 matrix but 2*as.vector(m) is NA we can't have complete
> consistency.  My preference is for these operations to happen elementwise
> -- ie m+m is a 0x4 matrix.  Comments?

Sounds very much like going the Octave/MATLAB way.  I thought we'd
eventually have a `Matrix' class for such things?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Apr 14 02:04:40 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 13 Apr 1998 18:04:40 -0700 (PDT)
Subject: 0-extent matrices?
In-Reply-To: <13616.54878.596955.835572@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.SUN.3.95.980413175740.28284D-100000@chekov>

On Sun, 12 Apr 1998, Kurt Hornik wrote:
> 
> Sounds very much like going the Octave/MATLAB way.  I thought we'd
> eventually have a `Matrix' class for such things?

Not really -- this applies to arrays as well and is basically a
programming issue similar to using drop=F when subscripting.  If you
subscript an array and it turns out that the result is empty you still
want as much as possible of the same code to work.  The most important
things are cbind, rbind and t, but it is useful that %*%, chol, solve, and
qr all give sensible results with empty matrices.  I went with m+2 giving
NA, for consistency with real(0)+2, so you do have to explicitly do
m+array(2,dim=dim(m)) or some such if you want elementwise arithmetic
operations on a possibly empty array.  This means very little special case
work is need to handle possibly empty arrays


Thomas Lumley
------------------------
Biostatistics		
Uni of Washington	
Box 357232		
Seattle WA 98195-7232	
------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Apr 14 09:06:35 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 14 Apr 1998 10:06:35 +0200
Subject: R-beta: S Compatibility (again)
In-Reply-To: <199804132350.LAA07571@stat1.stat.auckland.ac.nz> (message from
 Robert Gentleman on Tue, 14 Apr 1998 11:50:43 +1200 (NZST))
Message-ID: <199804140806.KAA00527@sophie.ethz.ch>

[I am diverting to R-devel,  I think it get's too technical..]

>>>>> "RobG" == Robert Gentleman <rgentlem@stat.auckland.ac.nz> writes:

    RobG> ....


    RobG>   It should be possible to write a body<- function that let you
    RobG> assign a new body (given lexical scope this can be absolutely
    RobG> disasterous). There is already an environment<-
    RobG> function. Probably we need arguments (since args returns a
    RobG> function rather than the list of args). If you really want it let
    RobG> me know and I'll whip up something that does this.....

We already have  formals(.), I think exactly for that purpose..
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Apr 17 16:29:13 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 17 Apr 1998 17:29:13 +0200 (CEST)
Subject: development mda package
Message-ID: <13623.30025.254231.357114@galadriel.ci.tuwien.ac.at>


NEW: CRAN/src/contrib/devel/mda_0.1-1.tar.gz


I have made a first shot at porting the Hastie & Tibshirani mda package t=
o
R ... this is almost not tested at all ... but it works for the iris
data and what else could a statistician be possibly interested in anyway =
:-)


All BRUTO stuff is missing because there are some unresolved symbols:
  R.binary: can't resolve symbol 'sgram_'
  R.binary: can't resolve symbol 'd_sign'
  R.binary: can't resolve symbol 'pack_'
  R.binary: can't resolve symbol 'unpack_'
  R.binary: can't resolve symbol 'sknotl_'
  R.binary: can't resolve symbol 'wmean_'
which I didn't have time to search/imitate/...

Mda and fda with MARS seem to work fine, though.

You'll additionally need the e1071 (kmeans) and class (lvq & friends)
packages from CRAN.

It also seems only to work with the new dataframe code that is
in the latest snapshot version (>=3D easter 1998).

Good luck,

-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 17 17:05:55 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Apr 1998 18:05:55 +0200
Subject: development mda package
In-Reply-To: Friedrich Leisch's message of Fri, 17 Apr 1998 17:29:13 +0200 (CEST)
References: <13623.30025.254231.357114@galadriel.ci.tuwien.ac.at>
Message-ID: <x2u37smo0s.fsf@blueberry.kubism.ku.dk>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> All BRUTO stuff is missing because there are some unresolved symbols:
>   R.binary: can't resolve symbol 'sgram_'
>   R.binary: can't resolve symbol 'd_sign'
>   R.binary: can't resolve symbol 'pack_'
>   R.binary: can't resolve symbol 'unpack_'
>   R.binary: can't resolve symbol 'sknotl_'
>   R.binary: can't resolve symbol 'wmean_'

I believe sgram and sknotl are B-spline routines used also in the gcv
code on netlib (in RATFOR...), way back when. I can guess what d_sign
and wmean_ does. How about pack and unpack, anyone?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Lumley <thomas@biostat.washington.edu>  Sat Apr 18 17:51:16 1998
From: Thomas Lumley <thomas@biostat.washington.edu> (Thomas Lumley)
Date: Sat, 18 Apr 1998 09:51:16 -0700 (PDT)
Subject: attr(modelmatrix,"assign")
In-Reply-To: <9804178928.AA892838755@nass.usda.gov>
Message-ID: <Pine.SUN.3.95.980417121655.11386D-100000@chekov>


The "assign" attribute for model matrices has mutated in S-PLUS (probably
in 3.3 or 3.4) -- the model code is obviously not subject to
enough evolutionary pressure to keep mutations down.

Now it returns a list with elements named for each model term, giving the
vector of column numbers arising from that term
> y<-1:10
> x<-1:10
> attr(model.matrix(~y+factor(x)),"assign") 
$"(Intercept)":
[1] 1

$y:
[1] 2

$"factor(x)":
[1]  3  4  5  6  7  8  9 10 11

I don't think we necessarily want to change from our attr(,"assign"),
which follows Chambers & Hastie, but we may want to be able to create a
compatible version.
This can be done by the following function, which needs the terms
object as well as the model matrix

attrassign<-function(mmat,tt){
        if (!inherits(tt,"terms"))
                stop("need terms object")
        aa<-attr(mmat,"assign")
        if (is.null(aa))
                stop("argument is not really a model matrix")
        ll<-attr(tt,"term.labels")
        if (attr(tt,"intercept")>0)
                ll<-c("(Intercept)",ll)
        aaa<-factor(aa,labels=ll)
        split(order(aa),aaa)
        }

Perhaps we should add another attribute ("S.assign") to model matrices?

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Lumley <thomas@biostat.washington.edu>  Sat Apr 18 19:28:04 1998
From: Thomas Lumley <thomas@biostat.washington.edu> (Thomas Lumley)
Date: Sat, 18 Apr 1998 11:28:04 -0700 (PDT)
Subject: RFC: large database interface
In-Reply-To: <Pine.LNX.3.96.980226163351.22796A-100000@alpha.fuzzy.at>
Message-ID: <Pine.LNX.3.96.980301144403.7917A-100000@buffy>


I have been playing with a large database interface for R, and have
written one complete but useless demonstration and one incomplete but
potentially useful example (with memory mapping of a fixed-format ASCII
file). The idea is to make the file appear like a matrix or data frame but
not have to read it into the R heap.

A description and code can be found at
http://www.biostat.washington.edu/~thomas/Rdb.html
                                          Rdb.nw  (noweb literate program)
                                          Rdb.c
                                          Rdb.R

Comments?

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eschmid@delos.lf.net  Sun Apr 19 12:10:37 1998
From: eschmid@delos.lf.net (Egon Schmid)
Date: Sun, 19 Apr 1998 13:10:37 +0200
Subject: RFC: large database interface
References: <Pine.LNX.3.96.980301144403.7917A-100000@buffy>
Message-ID: <3539DBAD.76AD3DC1@delos.lf.net>

Thomas Lumley wrote:
> 
> I have been playing with a large database interface for R, and have
> written one complete but useless demonstration and one incomplete but
> potentially useful example (with memory mapping of a fixed-format ASCII
> file). The idea is to make the file appear like a matrix or data frame but
> not have to read it into the R heap.
> 
> A description and code can be found at
> http://www.biostat.washington.edu/~thomas/Rdb.html
>                                           Rdb.nw  (noweb literate program)
>                                           Rdb.c
>                                           Rdb.R
> 
> Comments?

Well, there is a web interface through the Apache module PHP Hypertext
Preprocessor. At http://www.php.net/ there are plenty more database
interfaces.

Personaly I think it would a great idea to interface large datasets with
netCDF 

	http://www.unidata.ucar.edu/packages/netcdf

>From the manual '1.2 NetCDF Is Not a Database Management System'

"Why not use an existing database management system for storing
array-oriented data? Relational database software is not suitable for
the kinds of data access supported by the netCDF interface.

First, existing database systems that support the relational model do
not support multidimensional objects (arrays) as a basic unit of data
access. Representing arrays as relations makes some useful kinds of data
access awkward and provides little support for the abstractions of
multidimensional data and coordinate systems. A quite different data
model is needed for array-oriented data to facilitate its retrieval,
modification, mathematical manipulation and visualization.

Related to this is a second problem with general-purpose database
systems: their poor performance on large arrays. Collections of
satellite images, scientific model outputs and long-term global weather
observations are beyond the capabilities of most database systems to
organize and index for efficient retrieval.

Finally, general-purpose database systems provide, at significant cost
in terms of both resources and access performance, many facilities that
are not needed in the analysis, management, and display of
array-oriented data. For example, elaborate update facilities, audit
trails, report formatting, and mechanisms designed for
transaction-processing are unnecessary for most scientific
applications."

On Feb 3 there was a small thread on this mailing list. 

-Egon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Apr 20 01:44:00 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Mon, 20 Apr 1998 12:44:00 +1200 (NZST)
Subject: RFC: large database interface
In-Reply-To: <3539DBAD.76AD3DC1@delos.lf.net>
References: <Pine.LNX.3.96.980301144403.7917A-100000@buffy>
 <3539DBAD.76AD3DC1@delos.lf.net>
Message-ID: <199804200044.MAA16425@stat1.stat.auckland.ac.nz>

Egon Schmid writes:
 > Thomas Lumley wrote:
 > > 
 > > I have been playing with a large database interface for R, and have
 > > written one complete but useless demonstration and one incomplete but
 > > potentially useful example (with memory mapping of a fixed-format ASCII
 > > file). The idea is to make the file appear like a matrix or data frame but
 > > not have to read it into the R heap.
 > > 
 > > A description and code can be found at
 > > http://www.biostat.washington.edu/~thomas/Rdb.html
 > >                                           Rdb.nw  (noweb literate program)
 > >                                           Rdb.c
 > >                                           Rdb.R
 > > 
 > > Comments?

This looks very interesting.  It would be nice if the such an
interface were written in a way that could be customized to a variety
of applications.  Being able to read spreadsheets is one thing which
comes to mind.  It might be nice (for example) to have a rather
complex initialization procedure which inspects the dataset thoroughly
and determines things like variable types (if the database does not
contain this information).

Egon Schmid writes:
 > Well, there is a web interface through the Apache module PHP Hypertext
 > Preprocessor. At http://www.php.net/ there are plenty more database
 > interfaces.
 > 
 > Personaly I think it would a great idea to interface large datasets with
 > netCDF 
 >
 > "Why not use an existing database management system for storing
 > array-oriented data? Relational database software is not suitable for
 > the kinds of data access supported by the netCDF interface.
 > 

Hmm. Over the past week I have been looking at NetCDF because GMT
(The Generic Mapping Tools)
	http://www.soest.hawaii.edu/wessel/gmt.html
use NetCDF to store their maps.

[ The maps are rather better than the Becker and Wilks ones because
  they are based on the World Vector Shoreline as well as the CIA WDB
  that B&W use.  They also have the maps prepared pretty well for
  plotting.  The only place where B&W are better is in the naming
  of places ... ]

I wasn't thinking about pulling the data from these maps into R, but
rather just rendering them on a graphics device so that they could
then be added to.

I suspect that when I've done that I'll probably know enough to create
an R/NetCDF link, perhaps using a framework of the type Thomas
proposes.
	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 20 18:48:42 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Apr 1998 19:48:42 +0200
Subject: R-0.61.1 compiled with egcs-mingw32
In-Reply-To: guido@sirio.stat.unipd.it's message of Sun, 22 Mar 1998 18:59:19 +0100 (GMT+0100)
References: <19980322175919.1333.qmail@sirio.stat.unipd.it>
Message-ID: <x24szo2xl1.fsf@blueberry.kubism.ku.dk>

guido@sirio.stat.unipd.it writes:

> rgnwbin.tgz and rgnwsrc.tgz are the first results of an attempt to
> build R for Win95 and WinNT using egcs-mingw32.
> 
> The advantages over the binaries for MsWindows that can be found in CRAN
> are:
> 1. R seems to run faster. Some simple (perhaps too simple)
>    benchmarks point to a 20% gain.
> 2. The port is based on a more recent version (0.61.1) and it is more
>    complete (more "system calls": system, tempfile, unlink, 
>    WinExec - to launch applications without waiting for the result;
>    support for the standard help system: try help(), help(abline),
>    help(line,eda), ?women, data(), library())
> 3. A new menu item "Stop current computation" make  possible 
>    to interupt long computation (but only when  something is printed).
> 4. Since egcs-mingw32 uses the standard C calling convention, 
>    you don't need a Watcom compiler to build dynamic link libraries.
>    Indeed, this was my original motivation.
> 5. It should be easy to use some other gnu-win32 compilers (maybe
>    running on a non MsWindows machine). It should be easy to 
>    adapt the port to lcc-win32, too.


One piece of bad news is that it doesn't work on Win3.X systems
(win32s). The PE-COFF object files that mingw32 makes simply won't
load, even for a "Hello, world" example.

The most likely candidate to get something running on that platform
(I, for one, still have quite a few students with older notebooks
and/or upgrade paranoia) seems to be RSXNT, but it's not all that
simple. It's also GCC-based, but the "specs" file is set up
differently from the mingw32/egcs one, which may create a great deal
of "fun".

RSXNT can (e.g.) be found at
ftp://ftp.tex.ac.uk/tex-archive/systems/msdos/dpmigcc/

I did a quick test and it does seem that a little fiddling makes it
possible to compile e.g. wincons.c with mingw32 headers plus a few
extra defines from the mingw32 specs file, so it would seem to be
doable, but it's hardly trivial. (Actually, this was with the ordinary
Linux GCC, but it's the header files that always cause trouble).

I also haven't got the foggiest about how to create DLL's with RSXNT,
especially how to to the important callbacks to the R binary (call_R). 

And, there's no g77 in RSXNT, so you'd need f2c. Perhaps it would be
easier to make the egcs cross-platform tools once and for all?

In any case, we need to do an "official" collection of tools. I tried
to compile using Guido's files during Easter, but immediately got
stopped by the absence of an "ls" command... 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Mon Apr 20 21:38:27 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Tue, 21 Apr 1998 08:38:27 +1200 (NZST)
Subject: R-0.61.1 compiled with egcs-mingw32
Message-ID: <199804202038.IAA28998@stat1.stat.auckland.ac.nz>

My own efforts to get a new windows version out have been hampered by the
preponderance of bugs in Watcom C (11.0). They decided to make their dll's
and exe's somewhat more compatible with M'soft stuff out of Visual C. 
They seemed to create a large number of bugs in the process. They have
also decided not to distribute patches but rather to sell CD's with
the patches on them......(isn't commercial software a wonderful thing)

robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 20 22:34:18 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Apr 1998 23:34:18 +0200
Subject: R-0.61.1 compiled with egcs-mingw32
In-Reply-To: Robert Gentleman's message of Tue, 21 Apr 1998 08:38:27 +1200 (NZST)
References: <199804202038.IAA28998@stat1.stat.auckland.ac.nz>
Message-ID: <x2vhs4xjmt.fsf@biostat.ku.dk>

Robert Gentleman <rgentlem@stat.auckland.ac.nz> writes:

> 
> My own efforts to get a new windows version out have been hampered by the
> preponderance of bugs in Watcom C (11.0). They decided to make their dll's
> and exe's somewhat more compatible with M'soft stuff out of Visual C. 
> They seemed to create a large number of bugs in the process. They have
> also decided not to distribute patches but rather to sell CD's with
> the patches on them......(isn't commercial software a wonderful thing)
> 

Ouch! In that case, I suggest that we try to put some collective
effort into getting something working with RSXNT. The only thing that
bothers me a little is that RSXNT isn't quite GPL compatible (you have
to pay a license for non-freeware usage) but I suppose that (a) it's a
very mild restriction, and (b) it can hardly be worse than shipping
GCC itself for RSXNT... There are certainly a lot of good things to be
said for using GCC throughout.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Tue Apr 21 09:56:06 1998
From: guido@sirio.stat.unipd.it (guido@sirio.stat.unipd.it)
Date: Tue, 21 Apr 1998 09:56:06 +0100 (GMT+0100)
Subject: R-0.61.1 compiled with egcs-mingw32
Message-ID: <19980421085606.8796.qmail@sirio.stat.unipd.it>

 Peter Dalgaard BSA writes:
 > 
 > Ouch! In that case, I suggest that we try to put some collective
 > effort into getting something working with RSXNT. The only thing that
 > bothers me a little is that RSXNT isn't quite GPL compatible (you have
 > to pay a license for non-freeware usage) but I suppose that (a) it's a
 > very mild restriction, and (b) it can hardly be worse than shipping
 > GCC itself for RSXNT... There are certainly a lot of good things to be
 > said for using GCC throughout.
 > 
 
 1) More than one year ago, hence, maybe, things are changed, I download
 RSXNT. However, I had problems to run its demo under MsWin3.1 (not under
 Win95). So, I prefered to give up. Just a limited experience, however.
 The other problem that I see is that, if I understand well,
 RSXNT is the effort of just one pearson  not of a team.
 
 2) What about DOS? Do you think that we really need a GUI console under 
 Microsoft-something? A couple of week ago, I took a look to the
 R code thinking to recompile it with DJGPP. I didn't try but it seems
 possible. The advantages that I can see are:
  a) DJGPP is stable, mature and supported. 
  b) I have limited experence but dynamic linking with DJGPP works
     better than under Windows. For me, of course. And I am not a 
     Windows programmers. But, I was able to to build dyn. libs
     which call routines in the main executable (and we need this
     non only for call_R but also for R_alloc and S_alloc).
     With, just 3 #define's its possible to use the dlopen/dlsym/dlclose
     interface.
  c) Same user interface under MsWindows and Unix (character+readline).
  d) DJGPP has g77.
  e) From DOS to WinNt, only one executable.
  A couple of disadvantages are:
  a) Old fashion.
  b) We need a new device. I suggest one based on grx (the standard djgpp
     graphic library) since this will have a small side effect:
     grx is available also for the linux console so can be used under
     linux without X (I remember some question about this on
     the R mailing list).
  c) dll's must be built using djgpp; anyway, djgpp is GPL.
  
  Comments? I have no time for a couple of weeks, but, after, if you
  think that can be a worth tentative, I can make  the first
  attempt (manage to recompile the non-graphic part +
  write a first draft for the graphic device if the previous
  point go well).
  
  guido m.
  
  
 
 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Apr 21 10:51:28 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 21 Apr 1998 11:51:28 +0200
Subject: R-beta: SEs for one-param MLE in R?
In-Reply-To: <9804210759.AA11933@alpha.luc.ac.be> (message from Jim Lindsey on
 Tue, 21 Apr 1998 09:59:54 +0200 (MET DST))
Message-ID: <199804210951.LAA00664@sophie.ethz.ch>

	[--- diverting from  R-help to R-devel ... MM ---]

>>>>> "Jim" == Jim Lindsey <jlindsey@luc.ac.be> writes:

    Jim> Just back from a week camping in the snow in the English Lakes,
    Jim> and trying to catch up...

I hope the adventurous vacation was also relaxing in some ways..

    MM> ....
    MM> BTW: I am (we are) interested in the functions that you are writing
    MM> for nlm(.)  It certainly is worthwhile to have nlm(.) return a class
    MM> "nlm" result and provide print.nlm(.) and summary.nlm(.) functions
    MM> {{ Jim Lindsey already posted something like this, unfortunately
    MM> using "nls" which we don't want as long as it is not very close to
    MM> S' nls(.) function }}

    Jim> I am afraid that I don't understand the logic of this requirement
    Jim> of closeness to R for such functions. nlm() itself is not close
    Jim> and even hist() has never been very similar.

Yes, there are some cases where we (the R-core team, or the "R-devel" group)
have decided that S-plus is so wrong that we don't want to emulate or stay
close to it.   hist(.) is one such example.

With  nls(.), this is quite different, I think.
nls(.) has several nice features, (your "nls" did too!).
Most notably, the calling syntax of nls(.) using model notation,
is something I would want before I'd call a function "nls".

At the moment, I think it would be better to add an "nlm" class and
corresponding print and summary methods to  nlm(.), rather than calling
such a thing "nls".

Also, a few weeks ago, Ross said that he planned to add code to nlm
which would make use of  gradient and hessian function when provided
(or also, using D(.) ?).

    Jim> On the other hand,
    Jim> remember that the nls() I sent was a very cut-down version of one
    Jim> in one of my libraries. It had the above solution for the
    Jim> inversion with one dimensional parameters. By the way, the
    Jim> original Fortran for nlm that I ported to R printed out a warning
    Jim> that the algorithm is very inefficient for one-dimensional
    Jim> problems.
Yes, your "nls" function was useful!
and I agree that "nlm" should be pushed in the direction of what you had.

    Jim>   With respect to Bill's negative binomial that started another
    Jim> discussion, one of the functions in my nonlinear regression
    Jim> library does negative binomial nonlinear regression for both the
    Jim> mean and the dispersion parameters, along with twenty odd other
    Jim> distributions. I used it for beta-binomial regression in my paper
    Jim> with Pat Altham in the latest Applied Statistics. (Also another
    Jim> similar function for a finite mixture with these distributions,
    Jim> for example for negative binomial with inflated zeroes.) In my
    Jim> repeated measures library, there is a similar function for
    Jim> regressions with the same collection of distributions, but having
    Jim> a random intercept. Once R stabilizes...

well, isn't  R  stabilizing more and more?
Since 0.61, at least the way extension packages (formerly known as "libraries")
should be written is pretty stable.
Jim, I think several people really would be interested in your 
``nonlinear regression library'' and the ``repeated measures library''.

If they don't work in R 0.61, they could be at least put into 
CRAN/src/contrib/devel/.

Best regards!
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 21 13:56:37 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Apr 1998 14:56:37 +0200
Subject: R-0.61.1 compiled with egcs-mingw32
In-Reply-To: guido@sirio.stat.unipd.it's message of Tue, 21 Apr 1998 09:56:06 +0100 (GMT+0100)
References: <19980421085606.8796.qmail@sirio.stat.unipd.it>
Message-ID: <x27m4je3ju.fsf@blueberry.kubism.ku.dk>

guido@sirio.stat.unipd.it writes:

> 
>  Peter Dalgaard BSA writes:
>  > 
>  > Ouch! In that case, I suggest that we try to put some collective
>  > effort into getting something working with RSXNT. The only thing that
>  > bothers me a little is that RSXNT isn't quite GPL compatible (you have
>  > to pay a license for non-freeware usage) but I suppose that (a) it's a
>  > very mild restriction, and (b) it can hardly be worse than shipping
>  > GCC itself for RSXNT... There are certainly a lot of good things to be
>  > said for using GCC throughout.
>  > 
>  
>  1) More than one year ago, hence, maybe, things are changed, I download
>  RSXNT. However, I had problems to run its demo under MsWin3.1 (not under
>  Win95). So, I prefered to give up. Just a limited experience, however.
>  The other problem that I see is that, if I understand well,
>  RSXNT is the effort of just one pearson  not of a team.

Hmm. Things *have* changed. 1.4 came out in Dec97. However, I haven't
checked the win3.X demos, just read the docs. Sounds like I should,
eh? Was it compiling or running them that didn't work?

The RS in RSX is Rainer Schnittke, so you're right that it's
essentially a one-man job. So is EMX, on the other hand (Eberhard
Matthes). And GCC is GCC, obviously. The core of RSXNT really isn't
that big, and since it's only needed to help us over the Win32s
problem, I'd say try it - if it works, it works...

>  2) What about DOS? Do you think that we really need a GUI console under 
>  Microsoft-something? 

For teaching, yes, we need the GUI. Some of us, anyway. If we could
move to Tcl/Tk, we might get rid of the awful win32 API. That's
not a one-night project though.

Still, the ESS-mode people will want a stdio type interface, and it is
also useful for batch processing, so it should get done at some point.

> A couple of week ago, I took a look to the
>  R code thinking to recompile it with DJGPP. I didn't try but it seems
>  possible. The advantages that I can see are:
>   a) DJGPP is stable, mature and supported. 
>   b) I have limited experence but dynamic linking with DJGPP works
>      better than under Windows. For me, of course. And I am not a 
>      Windows programmers. But, I was able to to build dyn. libs
>      which call routines in the main executable (and we need this
>      non only for call_R but also for R_alloc and S_alloc).
>      With, just 3 #define's its possible to use the dlopen/dlsym/dlclose
>      interface.

As long as you stay away from graphics/dynload/system(), it's
certainly possible. (One of my former colleagues has done it a year or
so back.) With RSXNT as well - I'm pretty sure I tried that
at some point.

In principle, this isn't too hard with DLL's either, once the
generation of relocatable DLL's and import/export libraries is in
place. Luke Tierney has a set of dl* compatibility routines on

http://www.stat.umn.edu/~luke/xls/projects/dlbasics/dlbasics.html

>   c) Same user interface under MsWindows and Unix (character+readline).

- but no scrollback on the console. This will turn out to be a major
problem in practice, I suspect.

>   d) DJGPP has g77.

There's one somewhere for RSXNT, I believe.

>   e) From DOS to WinNt, only one executable.

And win3/95 ? DOS box or?

>   Comments? I have no time for a couple of weeks, but, after, if you
>   think that can be a worth tentative, I can make  the first
>   attempt (manage to recompile the non-graphic part +
>   write a first draft for the graphic device if the previous
>   point go well).

Hmm. If I have any influence to exert, I think that I'd like you to
try to reach a definitive verdict over the RSXNT/Win3.x issues first.
You seem to be the most skilled person around, when it comes to these
matters.

If I find some time, I might give it a stab myself. There's a SAS
course (yeah...) coming up next week though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Apr 21 14:34:23 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 21 Apr 1998 08:34:23 -0500
Subject: R-beta: SEs for one-param MLE in R?
In-Reply-To: Martin Maechler's message of "Tue, 21 Apr 1998 11:51:28 +0200"
References: <199804210951.LAA00664@sophie.ethz.ch>
Message-ID: <6r90ozguxs.fsf@verdi.stat.wisc.edu>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> With  nls(.), this is quite different, I think.
> nls(.) has several nice features, (your "nls" did too!).
> Most notably, the calling syntax of nls(.) using model notation,
> is something I would want before I'd call a function "nls".

I have to admit to some bias here being one of the people who wrote
nls for S.  I find a couple of other features for nls to be very
helpful.  The "plinear" algorithm that profiles over any linear
parameters in the model can be very effective.  It doesn't always
converge in fewer iterations but it starts at values of the parameters
that are much closer to the optimum and it requires fewer starting
estimates to be calculated.

I have just finished preparing a short course on nonlinear regression
to be presented this weekend.  The slides are available at
	     http://franz.stat.wisc.edu/pub/NLME/Kansas/
Section 4 shows the use of some of the current and new facilties in
S for nonlinear regression.  

I refer in those slides to the nonlinear regression test cases at the
U.S. National Institutes of Standards and Technology (NIST) web site.
It is interesting to compare how numerical analysts view nonlinear
least squares with the approach of statisticians.  The NIST folks make
a big deal about using 128 bit arithmetic to produce "certified"
values of the parameter estimates.  In their favor they also produce
the approximate standard errors for the estimates but they don't seem
to notice that the estimates are things like 2.3 +/- 0.7 and they are
worrying about whether the 8th decimal place should be a 6 or a 7.
Also their idea of a "difficult" problem is to take a relatively easy
model fit and multiply all the starting estimates by 100.  In one
case, for the BoxBOD data where there is an increase to an asymptote,
all the responses are between 100 and 225 so they start the asymptote
at 1 and find it is difficult to converge.  With the "plinear"
algorithm you don't even need a starting estimate for the asymptote.

Those slides show the new approach to selfStart models in S.  We have
found that with a minimal effort it is possible to get convergence on
any of the examples on the NIST site simply by considering what the
parameters represent and by exploiting conditional (or "partial")
linearity.

For R it is still not clear to me how to manipulate the expressions
and functions.  I saw some of the discussion about function closures
and why it is not easy to coerce to a function but that is still black 
magic to me.  I regret that I am not likely to be able to take the
time to understand it better in the near future.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 21 19:11:45 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Apr 1998 20:11:45 +0200
Subject: Expressions and such
In-Reply-To: Douglas Bates's message of 21 Apr 1998 08:34:23 -0500
References: <199804210951.LAA00664@sophie.ethz.ch>
 <6r90ozguxs.fsf@verdi.stat.wisc.edu>
Message-ID: <x2wwcjcae6.fsf_-_@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> For R it is still not clear to me how to manipulate the expressions
> and functions.  I saw some of the discussion about function closures
> and why it is not easy to coerce to a function but that is still black 
> magic to me.  I regret that I am not likely to be able to take the
> time to understand it better in the near future.

You could always take Bill V's approach of blatantly claiming "this
can't be done in R" and watching the reaction... ;)

<tutorial audience=anyone>

Expressions are fairly easy: Just mentally convert them to LISP to
access the parse tree. Convert everything to function calls and
represent each as a list with the first element being the function
name and the others being it's arguments. (This is not particularly
useful to people who don't know Lisp, I know.)

This little function gets you some of the way, although it won't do
things like tagged arguments (it can certainly be improved in other
ways too):

> dissect                                           
function (e) 
{
        level <<- level + 1
        cat(substring("||||||||||||||||", 1, level))
        cat(deparse(e), "\n")
        if (is.call(e) || is.expression(e)) 
                for (i in 1:length(e)) dissect(e[[i]])
        level <<- level - 1
}
> level<- -1
> dissect(expression(1+2+3*4))
1 + 2 + 3 * 4 
|1 + 2 + 3 * 4 
||+ 
||1 + 2 
|||+ 
|||1 
|||2 
||3 * 4 
|||* 
|||3 
|||4 

e.g. like LISP's (+(+ 1 2)(* 3 4)). 

This is all pretty much like S. What was the problem in the first place?

</tutorial>

Regarding function coercion, I'm still unconvinced why this shouldn't
be possible. I'd kind of like to keep the "everything is a list"
paradigm. Obviously, one cannot keep perfect S compatibility (because
of the environment/closure issue), but some way of constructing a
function from it's arguments, body, and environment would be useful.

Many things are in fact possible if you are sneaky enough, e.g. here's
a list.to.envir conversion:

environment(eval(expression(function(){}),envir=list(a=1,b=2))))

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 21 23:11:06 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Apr 1998 00:11:06 +0200
Subject: R-0.61.1 compiled with egcs-mingw32
In-Reply-To: Peter Dalgaard BSA's message of 21 Apr 1998 14:56:37 +0200
References: <19980421085606.8796.qmail@sirio.stat.unipd.it>
 <x27m4je3ju.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2n2deq0zp.fsf@biostat.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> >  1) More than one year ago, hence, maybe, things are changed, I download
> >  RSXNT. However, I had problems to run its demo under MsWin3.1 (not under
> >  Win95). So, I prefered to give up. Just a limited experience, however.
> >  The other problem that I see is that, if I understand well,
> >  RSXNT is the effort of just one pearson  not of a team.
> 
> Hmm. Things *have* changed. 1.4 came out in Dec97. However, I haven't
> checked the win3.X demos, just read the docs. Sounds like I should,
> eh? Was it compiling or running them that didn't work?

Ok. Checked up on it now with 1.31 which is what I already had
installed. Essentially, "make" is a no-go on win32s, most likely due to
upper/lowercase issues, whereas the compiler and linker seems to work.
Some of the sample programs compiled on W95 do work OK, others die due
to missing comctr32.dll and the like, i.e. from trying to use
something that simply isn't there in win32s. So it's no good as a
development platform, but it should be quite possible to cross-develop
from win95.

> The RS in RSX is Rainer Schnittke,

Um. *Schnitker*. I thought it looked wrong...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Apr 24 14:03:10 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 24 Apr 1998 09:03:10 -0400
Subject: R-beta: exponentiation continued
References: <9804240824.AA30933@alpha.luc.ac.be>
Message-ID: <98Apr24.092140edt.13489@mailgate.bank-banque-canada.ca>

>I have now tried the same thing on Red Hat 4.1 with R 0.61.1 and there
>is no problem. Hence I agree that it is Red Hat 5 libc. Thanks.

I haven't tried Red Hat 5 yet, in part because I thought it was necessary to
switch from libc to libgc and I'm not looking forward to that headache. Could
this be the problem?

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 24 14:28:44 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Apr 1998 15:28:44 +0200
Subject: R-beta: exponentiation continued
In-Reply-To: Paul Gilbert's message of Fri, 24 Apr 1998 09:03:10 -0400
References: <9804240824.AA30933@alpha.luc.ac.be>
 <98Apr24.092140edt.13489@mailgate.bank-banque-canada.ca>
Message-ID: <x27m4f8i2b.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> >I have now tried the same thing on Red Hat 4.1 with R 0.61.1 and there
> >is no problem. Hence I agree that it is Red Hat 5 libc. Thanks.
> 
> I haven't tried Red Hat 5 yet, in part because I thought it was necessary to
> switch from libc to libgc and I'm not looking forward to that headache. Could
> this be the problem?

Most likely, that is exactly what it is, and the ^C-works-once problem
likewise.

If we at all can, we should try and extract some tiny test problems
that show the effect and submit them to the glibc maintainers. First
we'd want to see if it has been solved in the current updates, though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Apr 24 17:49:40 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 24 Apr 1998 12:49:40 -0400
Subject: Warning: ignored non function "scale"
Message-ID: <98Apr24.130723edt.13444@mailgate.bank-banque-canada.ca>

I've been working on a revised version of prcomp and princomp. Below is my
current draft of prcomp,  which is marginally different from V&R. I've added
center and scale as optional arguments. However, scale causes the following:

> zi _ prcomp(iris[,,2])
Warning: ignored non function "scale"

because scale is both a variable and a function. Is there any way to avoid this
error message and still keep the name scale for both the argument and the name
of the function?

Paul Gilbert
______

prcomp <- function(x, retx=TRUE, center=TRUE, scale=FALSE) {
 s <- svd(scale(x, center=center, scale=scale),nu=0)
# rank <- sum(s$d > 0)
 rank <- sum(s$d > (s$d[1]*sqrt(.Machine$double.eps)))
 if (rank < ncol(x)) s$v <- s$v[,1:rank]
 s$d <- s$d/sqrt(max(1,nrow(x) -1))
 if(retx) list(sdev=s$d, rotation=s$v, x=x %*% s$v)
 else     list(sdev=s$d, rotation=s$v)
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 24 18:11:03 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Apr 1998 19:11:03 +0200
Subject: Warning: ignored non function "scale"
In-Reply-To: Paul Gilbert's message of Fri, 24 Apr 1998 12:49:40 -0400
References: <98Apr24.130723edt.13444@mailgate.bank-banque-canada.ca>
Message-ID: <x2zphb6t7c.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I've been working on a revised version of prcomp and princomp. Below is my
> current draft of prcomp,  which is marginally different from V&R. I've added
> center and scale as optional arguments. However, scale causes the following:
> 
> > zi _ prcomp(iris[,,2])
> Warning: ignored non function "scale"
> 
> because scale is both a variable and a function. Is there any way to avoid this
> error message and still keep the name scale for both the argument and the name
> of the function?

There are several. One, which has been used in other parts of R is to
lengthen the formal argument a bit, e.g. "scale.it" which - since
there's no "..." part can be truncate to, say, "scale". 

Another option is to explicitly fetch the function scale() using
get("scale","package:base") or get("scale",envir=.GlobalEnv). Anything
not including the functions local variables should do the trick.

Actually, I think that the first of the above get()s needs to be 

get("scale",match("package:base",search()))

hmmm, shouldn't we make pos.to.env accept character variables?


> prcomp <- function(x, retx=TRUE, center=TRUE, scale=FALSE) {
>  s <- svd(scale(x, center=center, scale=scale),nu=0)
> # rank <- sum(s$d > 0)
>  rank <- sum(s$d > (s$d[1]*sqrt(.Machine$double.eps)))
>  if (rank < ncol(x)) s$v <- s$v[,1:rank]
>  s$d <- s$d/sqrt(max(1,nrow(x) -1))
>  if(retx) list(sdev=s$d, rotation=s$v, x=x %*% s$v)
>  else     list(sdev=s$d, rotation=s$v)
> }

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Apr 28 16:11:18 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 28 Apr 1998 11:11:18 -0400
Subject: princomp
Message-ID: <98Apr28.113103edt.13450@mailgate.bank-banque-canada.ca>

Below is a draft of a function "princomp" which reproduces Splus 3.3 results. In
writing this I have found there is an certain inconsistency in the scaling (N vs
N-1) used when cor is T or F. The net result is that for data which has already
been scaled (so cor=cov) the function gives slightly different results depending
on whether the argument cor is T or F. I have some reluctance in reproducing
this behavior, and perhaps someone could check if it has been changed in a more
recent version of Splus:

> z <- scale(iris[,,2], scale=T, center=T)
> z1 <- princomp(z, cor=F)
> z2 <- princomp(z, cor=T)
> z1$sdev
   Comp.1    Comp.2    Comp.3    Comp.4
1.6934621 0.7316756 0.6221717 0.3601935
> z2$sdev
   Comp.1    Comp.2    Comp.3    Comp.4
1.7106550 0.7391040 0.6284883 0.3638504

I have at leasted tried to make the inconsistency obvious in the code, and
document it. Any other thoughts would be appreciated.

Paul Gilbert
______


princomp <- function(x, cor=FALSE, scores=TRUE,
   subset=rep(TRUE, nrow(as.matrix(x)))) {
 z<- as.matrix(x)[subset,, drop=F]
 N <- nrow(z)
 if(cor) cv <- get("cor",envir=.GlobalEnv)(z)
 else    cv <- cov(z)
#  (svd can be used but gives different signs for some vectors)
 edc <- eigen(cv)
 cn <- paste("Comp.", 1:ncol(cv), sep="")
 names(edc$values) <- cn
 dimnames(edc$vectors) <- list(dimnames(x)[[2]], cn)
 scr<- NULL
 if (cor)
   {sdev <- sqrt(edc$values)
    sc <- (apply(z,2,var)*(N-1)/N)^0.5
    if (scores)
        scr<-(scale(z,center=T,scale=T) %*% edc$vectors)*sqrt(N/(N-1))
   }
 else
   {sdev <- sqrt(edc$values*(N-1)/N)
    sc <- rep(1, ncol(z))
    if (scores)
        scr<- (scale(z,center=T,scale=F) %*% edc$vectors)
   }
 names(sc) <- dimnames(x)[[2]]
 edc <-list(sdev=sdev, loadings=edc$vectors,
     center=apply(z,2,mean), scale=sc, n.obs=N, scores=scr)
# The splus function also return list elements factor.sdev, correlations
# and coef, but these are not documented in the help. coef seems to equal
# load. The splus function also return list elements call and terms which
# are not supported here.
 class(edc) <- "princomp"
 edc
}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr  1 16:23:21 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Apr 1998 17:23:21 +0200
Subject: R-tk mailing list
Message-ID: <x2zpi5bm6u.fsf@blueberry.kubism.ku.dk>


This is to announce that Martin Maechler has set up a new mailing list
with the purpose of investigating the possibility to use Tcl/Tk with
R.

As you may know, Tcl is a scripting language and Tk is its GUI
toolkit. In the context of R, the main attractions are
	- portability X/Win3.1/Win32/Mac
	- ease of implementation (people say...)
	- nice GUI model of Tk
	- possibility of making language bindings, i.e. extending R
	  itself into a GUI programming language

The potential detractions are (we hope that these will be less
important or at least diminish with time, of course)
	- inefficiency?
	- the Tcl language, which many aren't too happy with

I guess that a sensible prioritization/sequencing of the work could be
(not that I'm trying to take control or anything...)

1) Getting a simple Tk Console running with R
2) Device driver for a TkCanvas graphics widget 
3) Looking at the glue mechanisms used in e.g. STk (Scheme/Tk)
4) Designing R/Tk interface functions

To join up, send a one-line message containing the word "subscribe" to
R-tk-request@stat.math.ethz.ch (in the *body*, not the subject).
	
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Apr  1 18:09:51 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 1 Apr 1998 09:09:51 -0800 (PST)
Subject: R-beta: Not loading C library
In-Reply-To: <x2afa6a483.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SUN.3.95.980401085119.12211A-100000@chekov>

On 1 Apr 1998, Peter Dalgaard BSA wrote:
> 
> Argh. Right. The .Dyn.libs problem is still in 0.61.2. Like Martin, I
> could have *sworn* that it was fixed...

It's still in pre0.62 as well.  
 
> A workaround is simply to remove .Dyn.libs in the startup code. It
> should suffice to change the system Rprofile by having something like
> this in it:
 
How about putting .Dyn.libs in the "Autoloads" environment? That way it
will be accessible and modifiable but it will go away when you quit R.
It's a little inelegant, but it works and it's a lot better than the
current situation.

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Wed Apr  1 19:34:46 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Wed, 1 Apr 1998 12:34:46 -0600 (CST)
Subject: line plot with NA
Message-ID: <Pine.OSF.3.95.980401122715.17690A-100000@io.uwinnipeg.ca>

I have the following data:

intens<-c(28000,72000,120000,150000,180000,260000,310000) #Td

peakcb<-c(1.2,2.5,2.7,3.7,5.6,6.2,6.8) #presses/s
peakan<-c(0.5,3.7,5.1,5.8,7.4,NA,8.4)

(See why I am using NA? I can work around this problem by using
intensityan and intensitycb)

Now do a plot of peakan:
plot(intensity, peakan, pch=10,type="b") 

The plot skips the point (260000,NA), but no  line beyond x=260,000.

I think the behaviour should be to draw a line between (180000,7.4) and
(310000,8.4).

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@math.sc.edu  Wed Apr  1 21:29:08 1998
From: rossini@math.sc.edu (Anthony Rossini)
Date: 01 Apr 1998 15:29:08 -0500
Subject: line plot with NA
In-Reply-To: Bill Simpson's message of "Wed, 1 Apr 1998 12:34:46 -0600 (CST)"
References: <Pine.OSF.3.95.980401122715.17690A-100000@io.uwinnipeg.ca>
Message-ID: <wncn2e58ewb.fsf@fhat.stat.sc.edu>


>>>>> "Bill" == Bill Simpson <wsimpson@uwinnipeg.ca> writes:

    Bill> (See why I am using NA? I can work around this problem by using
    Bill> intensityan and intensitycb)

    Bill> Now do a plot of peakan:
    Bill> plot(intensity, peakan, pch=10,type="b") 

    Bill> The plot skips the point (260000,NA), but no  line beyond x=260,000.

    Bill> I think the behaviour should be to draw a line between
    Bill> (180000,7.4) and (310000,8.4).

I respectfully disagree.  If the data were in fact longitudinal data,
with missing observations, one valid scenario would be to halt, which
is what is happening.  

Maybe a na.omit flag would be appropriate for plot?  (is there one?
I'm just speculating, not having easy access to R or Splus today).

best,
-tony

--
Anthony Rossini
Manifold Graphics / Epimetrics
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oncley@atd.ucar.edu  Thu Apr  2 01:20:54 1998
From: oncley@atd.ucar.edu (Steve Oncley)
Date: Wed, 1 Apr 1998 17:20:54 -0700 (MST)
Subject: attributes now inherited
Message-ID: <199804020020.RAA07324@clover.atd.ucar.edu>

Hi R-Developers,

After my message about a month ago concerning attributes being lost during
simple operations, Martin Maechler invited me to fix the code if I was in 
a hurry (especially for attributes in general).  We've just made the 
following changes here, which appear to implement the rules in the 
Blue Book (pg. 257) 

Enclosed is the output from "diff -c" from /R-0.61.1/src for:
main/arithmetic.c 	(calls my new routine based on Blue Book rules)
main/attrib.c 		(I added a new routine: copyMostAttrib)
main/complex.c 		(calls my new routine based on Blue Book rules)
include/Defn.h 		(one line addition to define copyMostAttrib)

We hope you will find this useful and install it in the next R release.

...Steve Oncley and Gordon Maclean
National Center for Atmospheric Research
Boulder, Colorado USA
(where the sun will soon set into the mountains)

**************************************************************************

*** arithmetic.c	Mon Nov 10 19:35:01 1997
--- /net/aster/R/src/main/arithmetic.c	Wed Apr  1 16:33:27 1998
***************
*** 428,433 ****
--- 428,443 ----
  	else
  		ans = allocVector(INTSXP, n);
  
+         /* copy attributes from longest argument */
+ 	if (n1 > n2)
+               copyMostAttrib(s1, ans);
+ 	else if (n1 == n2) {
+               copyMostAttrib(s2, ans);
+               copyMostAttrib(s1, ans);
+ 	}
+         else
+               copyMostAttrib(s2, ans);
+ 
  	if (n1 < 1 || n2 < 1) {
  		for (i = 0; i < n; i++)
  			INTEGER(ans)[i] = NA_INTEGER;
***************
*** 531,536 ****
--- 541,557 ----
  	PROTECT(s1);
  	PROTECT(s2);
  	ans = allocVector(REALSXP, n);
+ 
+         /* copy attributes from longest argument */
+ 	if (n1 > n2)
+               copyMostAttrib(s1, ans);
+ 	else if (n1 == n2) {
+               copyMostAttrib(s2, ans);
+               copyMostAttrib(s1, ans);
+ 	}
+         else
+               copyMostAttrib(s2, ans);
+ 
  	UNPROTECT(2);
  
  	if (n1 < 1 || n2 < 1) {

**************************************************************************

*** attrib.c	Mon Dec  8 02:36:53 1997
--- /net/aster/R/src/main/attrib.c	Wed Apr  1 16:43:28 1998
***************
*** 114,119 ****
--- 114,141 ----
  		return installAttrib(vec, name, val);
  }
  
+ SEXP copyMostAttrib(SEXP inp, SEXP ans)
+ {
+   /* This is called in the case of binary operations to copy most
+      attributes from (one of) the input arguments to the output.
+      Note that the Dim and Names attributes should have been assigned
+      elsewhere. */
+         SEXP s, t, u;
+ 
+ 	PROTECT(inp);
+ 	PROTECT(ans);
+ 
+ 	for (s=ATTRIB(inp); s!=R_NilValue; s=CDR(s)) {
+ 	  if ( (TAG(s) != R_NamesSymbol) &&
+ 	       (TAG(s) != R_DimSymbol) &&
+  	       (TAG(s) != R_DimNamesSymbol) ) {
+ 	    installAttrib(ans, TAG(s), CAR(s));
+ 	  }
+ 	}
+ 	UNPROTECT(2);
+         return;
+ }
+ 
  static SEXP installAttrib(SEXP vec, SEXP name, SEXP val)
  {
  	SEXP s, t;

**************************************************************************

*** complex.c	Wed Sep 17 22:37:02 1997
--- /net/aster/R/src/main/complex.c	Wed Apr  1 16:33:28 1998
***************
*** 104,109 ****
--- 104,121 ----
  	PROTECT(s1);
  	PROTECT(s2);
  	ans = allocVector(CPLXSXP, n);
+ 
+        /* copy attributes from longest argument */
+         if (n1 > n2)
+               copyMostAttrib(s1, ans);
+         else if (n1 == n2) {
+               copyMostAttrib(s2, ans);
+               copyMostAttrib(s1, ans);
+         }
+         else
+               copyMostAttrib(s2, ans);
+ 
+ 
  	UNPROTECT(2);
  
  	if (n1 < 1 || n2 < 1) {

**************************************************************************

*** Defn.h	Thu Jan  8 20:42:58 1998
--- /net/aster/R/src/include/Defn.h	Wed Apr  1 16:49:55 1998
***************
*** 459,464 ****
--- 459,465 ----
  SEXP cons(SEXP, SEXP);
  void copyListMatrix(SEXP, SEXP, int);
  void copyMatrix(SEXP, SEXP, int);
+ SEXP copyMostAttrib(SEXP, SEXP);
  void copyVector(SEXP, SEXP);
  SEXP CreateTag(SEXP);
  void CustomPrintValue(SEXP);
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Apr  2 05:49:34 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 2 Apr 1998 16:49:34 +1200 (NZST)
Subject: attributes now inherited
Message-ID: <199804020449.QAA19868@stat1.stat.auckland.ac.nz>

Thanks very much for the patches.  I have made the changes to the
sources for the current development version (0.62).

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Apr  2 17:03:47 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 2 Apr 1998 11:03:47 -0500
Subject: prcomp
Message-ID: <98Apr2.110959est.13445@mailgate.bank-banque-canada.ca>

I've noticed that the arguments and result list of prcomp in the mva package
(with 61.1) are not quite the same as in the Blue Book and in Splus. Is this
intentional or can I change it? If I change it who should I send the code to?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Apr  2 17:46:39 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 2 Apr 1998 18:46:39 +0200
Subject: prcomp;  send patches to whom?
In-Reply-To: <98Apr2.110959est.13445@mailgate.bank-banque-canada.ca> (message
 from Paul Gilbert on Thu, 2 Apr 1998 11:03:47 -0500)
Message-ID: <199804021646.SAA03511@sophie.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I've noticed that the arguments and result list of prcomp in the
    PaulG> mva package (with 61.1) are not quite the same as in the Blue
    PaulG> Book and in Splus. Is this intentional or can I change it? If I
    PaulG> change it who should I send the code to?

I think for small things like this, the best is to post 
diffs (diff -cb  or  diff -ubBw  if the latter works) to this mailing list.

Bigger things could be sent to "R-core@stat.math.ethz.ch"
 (the people who can actually change the sources in Auckland...).

Thanks for your offer to fix this yourself!
Optimally, you'd also send a patch for the help file (man/prcomp.Rd)!

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Apr  2 19:15:48 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 2 Apr 1998 13:15:48 -0500
Subject: f2c
Message-ID: <98Apr2.132201est.13448@mailgate.bank-banque-canada.ca>

I have a problem with my dynamically loaded code in R not finding pow_ii, which
for some time I thought was because library f2c is not on my Sparcstation.
However, I have now been experiencing the same problem in Linux, with all the
proper libraries in place.

My incomplete understanding of elf and shared libraries does not help, but when
compiling a complete program I usually muddle through. However, in the case of
dynamically loading code into R, I am not sure whether it is my dse.so or R
which should have the knowledge of where to find /usr/lib/libf2c.so*. I haven't
had much success trying to configure so that that information is in dse.so. None
of the usual things seem to help, so I suspect R itself needs to be able to find
the library. If someone can explain this I would very much appreciate it.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Apr  2 19:20:38 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 2 Apr 1998 20:20:38 +0200
Subject: line plot with NA
In-Reply-To: <wncn2e58ewb.fsf@fhat.stat.sc.edu> (message from Anthony Rossini
 on 01 Apr 1998 15:29:08 -0500)
Message-ID: <199804021820.UAA03706@sophie.ethz.ch>

>>>>> "tony" == Anthony Rossini <rossini@math.sc.edu> writes:

>>>>> "Bill" == Bill Simpson <wsimpson@uwinnipeg.ca> writes:

    Bill> (See why I am using NA? I can work around this problem by using
    Bill> intensityan and intensitycb)

    Bill> Now do a plot of peakan: plot(intensity, peakan, pch=10,type="b")

    Bill> The plot skips the point (260000,NA), but no line beyond
    Bill> x=260,000.

    Bill> I think the behaviour should be to draw a line between
    Bill> (180000,7.4) and (310000,8.4).

    tony> I respectfully disagree.  If the data were in fact longitudinal
    tony> data, with missing observations, one valid scenario would be to
    tony> halt, which is what is happening.

I'm with Tony (and the  S(-plus) developers are, too).
Bill, note that the current behavior is really the desired one
in typical time-series situations with missing values:
The missing values *are* graphically missing, 
which you would really want, especially in exploratory sitatuations.
((we had quite a few data analysis projects with enviromental data over
  time, where it was important to visualize the "measurement gaps")).

    tony> Maybe a na.omit flag would be appropriate for plot?  (is there
    tony> one?  I'm just speculating, not having easy access to R or Splus
    tony> today).

There's none, currently (neither R nor S-plus).

In R ( version >= 0.62 ,  == UNSTABLE)
you could use

	 plot(peakan ~ intens, subset = !is.na(peakan), pch=10,type="b")

to get the result you want.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Apr  2 19:36:56 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 02 Apr 1998 12:36:56 -0600
Subject: f2c
In-Reply-To: Paul Gilbert's message of Thu, 2 Apr 1998 13:15:48 -0500
References: <98Apr2.132201est.13448@mailgate.bank-banque-canada.ca>
Message-ID: <6rlntot6if.fsf@verdi.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I have a problem with my dynamically loaded code in R not finding pow_ii, which
> for some time I thought was because library f2c is not on my Sparcstation.
> However, I have now been experiencing the same problem in Linux, with all the
> proper libraries in place.
> 
> My incomplete understanding of elf and shared libraries does not help, but when
> compiling a complete program I usually muddle through. However, in the case of
> dynamically loading code into R, I am not sure whether it is my dse.so or R
> which should have the knowledge of where to find /usr/lib/libf2c.so*. I haven't
> had much success trying to configure so that that information is in dse.so. None
> of the usual things seem to help, so I suspect R itself needs to be able to find
> the library. If someone can explain this I would very much appreciate it.

One thing you can do is to check the R.binary file with "nm -g" to find
out what symbols are defined in it.  On my machine R.binary includes
pow_dd and pow_di but not pow_ii.

$ nm -g R.binary
...
08108c30 T pnt
         U popen
080ef370 T pow_dd
080ef460 T pow_di
08106c80 T ppois
...

This means that you will have to include a reference to the f2c library
when you are making the dse.so object.  I'm not sure of the sequence
invoked by "R INSTALL dse" but it may be that you can override the
library specification in the makefile by exporting an appropriate
value for the environment variable SHLIBLDFLAGS.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Thu Apr  2 19:48:27 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Thu, 2 Apr 1998 12:48:27 -0600 (CST)
Subject: line plot with NA
In-Reply-To: <199804021820.UAA03706@sophie.ethz.ch>
Message-ID: <Pine.OSF.3.95.980402124638.26975B-100000@io.uwinnipeg.ca>

OK Thanks for the responses.

Both Tony and Martin mentioned time series as the rationale for the
current behaviour.  That's not what I'm doing. Anyway if R is consistent
with S-Plus that's fine, I just was surprised by this.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Apr  2 21:04:02 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 3 Apr 1998 08:04:02 +1200 (NZST)
Subject: prcomp
Message-ID: <199804022004.IAA29592@stat1.stat.auckland.ac.nz>

	From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
	MIME-Version: 1.0
	To: R-devel <R-devel@stat.math.ethz.ch>
	Subject: prcomp

	I've noticed that the arguments and result list of prcomp in
	the mva package (with 61.1) are not quite the same as in the
	Blue Book and in Splus. Is this intentional or can I change it?
	If I change it who should I send the code to?

The present prcomp is a compromise between the Splus prcomp and
princomp (I didn't know about princomp and felt that prcomp wasn't
satisfactory).  I suppose each of these have their place, but I don't
really like the idea of having two functions, it just makes it harder
for users.

As for the "who"; post it to r-devel.  This gives a chance for anyone
interested to review it.  You may need to ask a week or so later
whether anyone with commit rights has committed it.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Apr  2 21:16:24 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 3 Apr 1998 08:16:24 +1200 (NZST)
Subject: f2c
Message-ID: <199804022016.IAA29773@stat1.stat.auckland.ac.nz>

> To: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> Cc: R-devel <R-devel@stat.math.ethz.ch>
> Subject: Re: f2c
> From: Douglas Bates <bates@stat.wisc.edu>
> Date: 02 Apr 1998 12:36:56 -0600

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
>
> > I have a problem with my dynamically loaded code in R not finding
> > pow_ii, which for some time I thought was because library f2c is
> > not on my Sparcstation.  > > However, I have now been experiencing
> > the same problem in Linux, with all the  proper libraries in place.
> > 
> > My incomplete understanding of elf and shared libraries does not
> > help, but when compiling a complete program I usually muddle through.
> > However, in the case of dynamically loading code into R, I am not
> > sure whether it is my dse.so or R which should have the knowledge
> > of where to find /usr/lib/libf2c.so*. I haven't  had much success
> > trying to configure so that that information is in dse.so. None
> > of the usual things seem to help, so I suspect R itself needs to
> > be able to find the library. If someone can explain this I would
> > very much appreciate it.

DB> One thing you can do is to check the R.binary file with "nm -g" to find
DB> out what symbols are defined in it.  On my machine R.binary includes
DB> pow_dd and pow_di but not pow_ii.

This is a general problem we need a solution to.  Recently, Kurt Hornik
has changed the configuration procedures so that fortran is located and
used to load R.  I thought this would fix this kind of problem.
(Any references to fortran things like pow_ii should be removed from the
C sources).

I'd suggest that you get in touch with Kurt directly:
	Kurt.Hornik@ci.tuwien.ac.at
to sort this out.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Fri Apr  3 08:20:07 1998
From: gb@stat.umu.se (Goran Brostrom)
Date: Fri, 3 Apr 1998 09:20:07 +0200 (MET DST)
Subject: R-beta: Bug in dhyper (and phyper) (fwd)
Message-ID: <Pine.GSO.3.95.980403091231.24285A-100000@pc30.stat.umu.se>


Last night I sent the bug report below to r-help. I have since then looked
at dhyper.c and found:

        if (NR < 0 || NB < 0 || n <= 0 || n > N)
                DOMAIN_ERROR;

I changed 'n <= 0' to 'n < 0' and then dhyper worked as I wanted. Am I
introducing some potentially dangerous behaviour by this change?

Goran
----------------------------------------------------------------------
I think I have found a bug in the function dhyper (R-0.61.2):

R> dhyper(0,3,3,0)
Warning: NAs produced in function "dhyper"
[1] NA

Documentation:

"Usage

dhyper(x, N1, N2, n)

.......

The hypergeometric distribution is used for sampling without replacement. 
It has density 

  p(x) = Choose(N1, x) Choose(N2, n-x) / Choose(N1+N2, n)

for x = 0,...,n"

R> choose(3,0) * choose(3,0) / choose(6,0)
[1] 1

This result is correct, and obviously dhyper is implemented in some way 
not consistent with the documentation.

Also note the spelling error of 'choose' in the documentation.

---
Goran Brostrom                         phone : +46 90 7865223
Department of Statistics                              7865213 (secr)
Umea University                        fax   :        7866614
S-90187 Umea, Sweden                   e-mail: gb@stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Apr  3 08:22:53 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 3 Apr 1998 09:22:53 +0200
Subject: Bug in dhyper (and phyper) (fwd) -- and patch
In-Reply-To: <Pine.GSO.3.95.980403091231.24285A-100000@pc30.stat.umu.se>
 (message from Goran Brostrom on Fri, 3 Apr 1998 09:20:07 +0200 (MET
 DST))
Message-ID: <199804030722.JAA00409@sophie.ethz.ch>

>>>>> "GB" == Goran Brostrom <gb@stat.umu.se> writes:

    GB> Last night I sent the bug report below to r-help. I have since then
    GB> looked at dhyper.c and found:

    GB>         if (NR < 0 || NB < 0 || n <= 0 || n > N) DOMAIN_ERROR;

    GB> I changed 'n <= 0' to 'n < 0' and then dhyper worked as I
    GB> wanted. Am I introducing some potentially dangerous behaviour by
    GB> this change?

No, I think your change was correct.
Thanks a lot for your fix!

I'm going to put your change into the 0.62 unstable version of R.

What's the typo in the documentation you mentioned (below, at the end)?
[you may answer to me privately..]


Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/



    GB> ----------------------------------------------------------------------

    GB> I think I have found a bug in the function dhyper (R-0.61.2):

    R> dhyper(0,3,3,0)
    GB> Warning: NAs produced in function "dhyper" [1] NA

    GB> Documentation:

    GB> "Usage

    GB> dhyper(x, N1, N2, n)

    GB> .......

    GB> The hypergeometric distribution is used for sampling without
    GB> replacement.  It has density

    GB>   p(x) = Choose(N1, x) Choose(N2, n-x) / Choose(N1+N2, n)

    GB> for x = 0,...,n"

    R> choose(3,0) * choose(3,0) / choose(6,0)
    GB> [1] 1

    GB> This result is correct, and obviously dhyper is implemented in some
    GB> way not consistent with the documentation.

    GB> Also note the spelling error of 'choose' in the documentation.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Fri Apr  3 21:56:08 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Fri, 3 Apr 1998 14:56:08 -0600 (CST)
Subject: cex and pch=1
Message-ID: <Pine.OSF.3.95.980403144616.10428A-101000@io.uwinnipeg.ca>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--0-375965957-891636968=:10428
Content-Type: TEXT/PLAIN; charset=US-ASCII

I do
par(cex=2,mex=.7)
when I have the plotsymbols pch=1 and pch=16 (empty and filled circles).

In x11() the plot looks fine.  But see the attachment to see how it is
saved.  I saved it with:
dev.print(horizontal=F,width=7,height=7,file="rstuff/data/varyflash/peak.ps")

The biggest problem is that the empty circles are now twice the diameter
of the filled circles.

(Also the text labels got shifted upwards and the left axis label is
clipped--latter problem can be fixed I guess by fooling around with mai or
mar.)

BTW is there any way to get the empty circles to be opaque?

Thanks for any help!

Bill Simpson

--0-375965957-891636968=:10428
Content-Type: APPLICATION/PostScript; name="peak.ps"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.OSF.3.95.980403145608.10428B@io.uwinnipeg.ca>
Content-Description: 

JSFQUy1BZG9iZS0zLjAKJSVEb2N1bWVudEZvbnRzOiBIZWx2ZXRpY2EgSGVs
dmV0aWNhLUJvbGQgSGVsdmV0aWNhLU9ibGlxdWUKJSUrIEhlbHZldGljYS1C
b2xkT2JsaXF1ZSBTeW1ib2wKJSVEb2N1bWVudE1lZGlhOiBsZXR0ZXIgNjEy
IDc5MiAwICgpCiUlVGl0bGU6IFIgR3JhcGhpY3MgT3V0cHV0CiUlQ3JlYXRv
cjogUiBTb2Z0d2FyZQolJVBhZ2VzOiAoYXRlbmQpCiUlT3JpZW50YXRpb246
IFBvcnRyYWl0CiUlQm91bmRpbmdCb3g6IDE4IDEwOCA1OTQgNjg0CiUlRW5k
Q29tbWVudHMKJSVCZWdpblByb2xvZwovZ3MgIHsgZ3NhdmUgfSBkZWYKL2dy
ICB7IGdyZXN0b3JlIH0gZGVmCi9icCAgeyBncyB9IGRlZgovZXAgIHsgc2hv
d3BhZ2UgZ3IgfSBkZWYKL20gICB7IG1vdmV0byB9IGRlZgovbCAgIHsgbGlu
ZXRvIH0gZGVmCi9ucCAgeyBuZXdwYXRoIH0gZGVmCi9jcCAgeyBjbG9zZXBh
dGggfSBkZWYKL2YgICB7IGZpbGwgfSBkZWYKL28gICB7IHN0cm9rZSB9IGRl
ZgovY2YgIHsgbmV3cGF0aCAwIDM2MCBhcmMgZmlsbCB9IGRlZgovY28gIHsg
bmV3cGF0aCAwIDM2MCBhcmMgc3Ryb2tlIH0gZGVmCi9yICAgeyAzIGluZGV4
IDMgaW5kZXggbW92ZXRvIDEgaW5kZXggNCAtMSByb2xsCiAgICAgICBsaW5l
dG8gZXhjaCAxIGluZGV4IGxpbmV0byBsaW5ldG8gY2xvc2VwYXRoIH0gZGVm
Ci9yZiAgeyByIGYgfSBkZWYKL3JvICB7IHIgbyB9IGRlZgovdCAgIHsgNiAt
MiByb2xsIG1vdmV0byBnc2F2ZSAzIGluZGV4IHRydWUKICAgICAgIGNoYXJw
YXRoIGZsYXR0ZW5wYXRoIHBhdGhiYm94IGdyZXN0b3JlIGdzYXZlCiAgICAg
ICA1IC0xIHJvbGwgcm90YXRlIDYgLTEgcm9sbCBuZWcgMyAtMSByb2xsIDUg
LTEKICAgICAgIHJvbGwgc3ViIG11bCA0IC0xIHJvbGwgbmVnIDMgLTEgcm9s
bCA0IC0xIHJvbGwKICAgICAgIHN1YiBtdWwgcm1vdmV0byBzaG93IGdyZXN0
b3JlIH0gZGVmCi9jbCAgeyBpbml0Y2xpcCBuZXdwYXRoIDMgaW5kZXggMyBp
bmRleCBtb3ZldG8gMSBpbmRleAogICAgICAgNCAtMSByb2xsIGxpbmV0byAg
ZXhjaCAxIGluZGV4IGxpbmV0byBsaW5ldG8KICAgICAgIGNsb3NlcGF0aCBj
bGlwIG5ld3BhdGggfSBkZWYKL3JnYiB7IHNldHJnYmNvbG9yIH0gZGVmCi9z
ICAgeyBzY2FsZWZvbnQgc2V0Zm9udCB9IGRlZgovUiAgIHsgL0hlbHZldGlj
YSBmaW5kZm9udCB9IGRlZgovQiAgIHsgL0hlbHZldGljYS1Cb2xkIGZpbmRm
b250IH0gZGVmCi9JICAgeyAvSGVsdmV0aWNhLU9ibGlxdWUgZmluZGZvbnQg
fSBkZWYKL0JJICB7IC9IZWx2ZXRpY2EtQm9sZE9ibGlxdWUgZmluZGZvbnQg
fSBkZWYKL1MgICB7IC9TeW1ib2wgZmluZGZvbnQgfSBkZWYKJSVFbmRQcm9s
b2cKJSVQYWdlOiAxIDEKYnAKUiAxMCBzCjAuNzUgc2V0bGluZXdpZHRoCjAu
MDAwMCAwLjAwMDAgMC4wMDAwIHJnYgo3NS40MCAxNzkuNDAgNTY0LjYwIDYy
Ni42MCBjbAo3NS40MCAxNzkuNDAgNTY0LjYwIDYyNi42MCBjbApbXSAwIHNl
dGRhc2gKOTMuNTIgMjIwLjMyIDExLjAxIGNvCltdIDAgc2V0ZGFzaAoxNjQu
MTkgMzc2LjIxIDExLjAxIGNvCltdIDAgc2V0ZGFzaAoyNDEuMjkgNDQ0LjQx
IDExLjAxIGNvCltdIDAgc2V0ZGFzaAoyODkuNDggNDc4LjUxIDExLjAxIGNv
CltdIDAgc2V0ZGFzaAozMzcuNjcgNTU2LjQ1IDExLjAxIGNvCltdIDAgc2V0
ZGFzaAo1NDYuNDggNjA1LjE3IDExLjAxIGNvCjE4LjAwIDEwOC4wMCA1OTQu
MDAgNjg0LjAwIGNsCltdIDAgc2V0ZGFzaApucAoxMjguODYgMTc5LjQwIG0K
NTMwLjQyIDE3OS40MCBsCm8KW10gMCBzZXRkYXNoCm5wCjEyOC44NiAxNzku
NDAgbQoxMjguODYgMTcyLjQwIGwKbwpbXSAwIHNldGRhc2gKbnAKMjA5LjE3
IDE3OS40MCBtCjIwOS4xNyAxNzIuNDAgbApvCltdIDAgc2V0ZGFzaApucAoy
ODkuNDggMTc5LjQwIG0KMjg5LjQ4IDE3Mi40MCBsCm8KW10gMCBzZXRkYXNo
Cm5wCjM2OS43OSAxNzkuNDAgbQozNjkuNzkgMTcyLjQwIGwKbwpbXSAwIHNl
dGRhc2gKbnAKNDUwLjExIDE3OS40MCBtCjQ1MC4xMSAxNzIuNDAgbApvCltd
IDAgc2V0ZGFzaApucAo1MzAuNDIgMTc5LjQwIG0KNTMwLjQyIDE3Mi40MCBs
Cm8KUiAyNCBzCjEyOC44NiAxNTIuODAgKDUwKSAwLjUwIDAuMDAgMC4wMCB0
CjIwOS4xNyAxNTIuODAgKDEwMCkgMC41MCAwLjAwIDAuMDAgdAoyODkuNDgg
MTUyLjgwICgxNTApIDAuNTAgMC4wMCAwLjAwIHQKMzY5Ljc5IDE1Mi44MCAo
MjAwKSAwLjUwIDAuMDAgMC4wMCB0CjQ1MC4xMSAxNTIuODAgKDI1MCkgMC41
MCAwLjAwIDAuMDAgdAo1MzAuNDIgMTUyLjgwICgzMDApIDAuNTAgMC4wMCAw
LjAwIHQKW10gMCBzZXRkYXNoCm5wCjc1LjQwIDE5NS45NiBtCjc1LjQwIDU4
NS42OCBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDE5NS45NiBtCjY4LjQw
IDE5NS45NiBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDI5My4zOSBtCjY4
LjQwIDI5My4zOSBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDM5MC44MiBt
CjY4LjQwIDM5MC44MiBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDQ4OC4y
NSBtCjY4LjQwIDQ4OC4yNSBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDU4
NS42OCBtCjY4LjQwIDU4NS42OCBsCm8KNjAuMDAgMTk1Ljk2ICgwKSAwLjUw
IDAuMDAgOTAuMDAgdAo2MC4wMCAyOTMuMzkgKDIpIDAuNTAgMC4wMCA5MC4w
MCB0CjYwLjAwIDM5MC44MiAoNCkgMC41MCAwLjAwIDkwLjAwIHQKNjAuMDAg
NDg4LjI1ICg2KSAwLjUwIDAuMDAgOTAuMDAgdAo2MC4wMCA1ODUuNjggKDgp
IDAuNTAgMC4wMCA5MC4wMCB0CltdIDAgc2V0ZGFzaApucAo1NjQuNjAgMTc5
LjQwIG0KNTY0LjYwIDYyNi42MCBsCjc1LjQwIDYyNi42MCBsCjc1LjQwIDE3
OS40MCBsCmNwIG8KMzIwLjAwIDEyNC44MCAoRmxhc2ggaW50ZW5zaXR5IFwo
VGQvMTAwMFwpKSAwLjUwIDAuMDAgMC4wMCB0CjMyLjAwIDQwMy4wMCAoUGVh
ayByZXNwb25zZSByYXRlIFwocHJlc3Nlcy9zXCkpIDAuNTAgMC4wMCA5MC4w
MCB0Cjc1LjQwIDE3OS40MCA1NjQuNjAgNjI2LjYwIGNsCltdIDAgc2V0ZGFz
aApucAo5My41MiAyNjEuMjkgbQo5OC43NSAyNjUuNDcgbAoxMDMuOTggMjY5
Ljg2IGwKMTA5LjIxIDI3NC40NyBsCjExNC40NCAyNzkuMjkgbAoxMTkuNjcg
Mjg0LjMzIGwKMTI0LjkwIDI4OS41OCBsCjEzMC4xMyAyOTUuMDUgbAoxMzUu
MzYgMzAwLjczIGwKMTQwLjU5IDMwNi42MiBsCjE0NS44MiAzMTIuNzIgbAox
NTEuMDQgMzE5LjAxIGwKMTU2LjI3IDMyNS40OSBsCjE2MS41MCAzMzIuMTUg
bAoxNjYuNzMgMzM4Ljk4IGwKMTcxLjk2IDM0NS45NiBsCjE3Ny4xOSAzNTMu
MDggbAoxODIuNDIgMzYwLjMyIGwKMTg3LjY1IDM2Ny42NyBsCjE5Mi44OCAz
NzUuMTAgbAoxOTguMTEgMzgyLjYxIGwKMjAzLjM0IDM5MC4xNiBsCjIwOC41
NyAzOTcuNzQgbAoyMTMuODAgNDA1LjMyIGwKMjE5LjAzIDQxMi44OSBsCjIy
NC4yNiA0MjAuNDMgbAoyMjkuNDkgNDI3LjkxIGwKMjM0LjcyIDQzNS4zMiBs
CjIzOS45NSA0NDIuNjMgbAoyNDUuMTggNDQ5LjgzIGwKMjUwLjQxIDQ1Ni45
MSBsCjI1NS42NCA0NjMuODMgbAoyNjAuODcgNDcwLjYwIGwKMjY2LjEwIDQ3
Ny4yMCBsCjI3MS4zMyA0ODMuNjIgbAoyNzYuNTYgNDg5Ljg0IGwKMjgxLjc5
IDQ5NS44NiBsCjI4Ny4wMiA1MDEuNjggbAoyOTIuMjUgNTA3LjI5IGwKMjk3
LjQ4IDUxMi42OCBsCjMwMi43MCA1MTcuODYgbAozMDcuOTMgNTIyLjgyIGwK
MzEzLjE2IDUyNy41NyBsCjMxOC4zOSA1MzIuMTAgbAozMjMuNjIgNTM2LjQx
IGwKMzI4Ljg1IDU0MC41MiBsCjMzNC4wOCA1NDQuNDIgbAozMzkuMzEgNTQ4
LjEzIGwKMzQ0LjU0IDU1MS42NCBsCjM0OS43NyA1NTQuOTYgbAozNTUuMDAg
NTU4LjEwIGwKMzYwLjIzIDU2MS4wNyBsCjM2NS40NiA1NjMuODYgbAozNzAu
NjkgNTY2LjUwIGwKMzc1LjkyIDU2OC45OCBsCjM4MS4xNSA1NzEuMzEgbAoz
ODYuMzggNTczLjUwIGwKMzkxLjYxIDU3NS41NiBsCjM5Ni44NCA1NzcuNDkg
bAo0MDIuMDcgNTc5LjMwIGwKNDA3LjMwIDU4MS4wMCBsCjQxMi41MyA1ODIu
NTkgbAo0MTcuNzYgNTg0LjA3IGwKNDIyLjk5IDU4NS40NiBsCjQyOC4yMiA1
ODYuNzYgbAo0MzMuNDUgNTg3Ljk4IGwKNDM4LjY4IDU4OS4xMSBsCjQ0My45
MSA1OTAuMTcgbAo0NDkuMTQgNTkxLjE2IGwKNDU0LjM2IDU5Mi4wOCBsCjQ1
OS41OSA1OTIuOTQgbAo0NjQuODIgNTkzLjc0IGwKNDcwLjA1IDU5NC40OSBs
CjQ3NS4yOCA1OTUuMTggbAo0ODAuNTEgNTk1LjgzIGwKNDg1Ljc0IDU5Ni40
MyBsCjQ5MC45NyA1OTYuOTkgbAo0OTYuMjAgNTk3LjUyIGwKNTAxLjQzIDU5
OC4wMCBsCjUwNi42NiA1OTguNDYgbAo1MTEuODkgNTk4Ljg4IGwKNTE3LjEy
IDU5OS4yNyBsCjUyMi4zNSA1OTkuNjQgbAo1MjcuNTggNTk5Ljk4IGwKNTMy
LjgxIDYwMC4yOSBsCjUzOC4wNCA2MDAuNTggbAo1NDMuMjcgNjAwLjg2IGwK
bwo0MDkuOTUgNjE5Ljc4IChBTikgMC41MCAwLjMzIDAuMDAgdAo5My41MiAy
NTQuNDIgNS4wMCBjZgpbXSAwIHNldGRhc2gKOTMuNTIgMjU0LjQyIDUuMDAg
Y28KMTY0LjE5IDMxNy43NSA1LjAwIGNmCltdIDAgc2V0ZGFzaAoxNjQuMTkg
MzE3Ljc1IDUuMDAgY28KMjQxLjI5IDMyNy40OSA1LjAwIGNmCltdIDAgc2V0
ZGFzaAoyNDEuMjkgMzI3LjQ5IDUuMDAgY28KMjg5LjQ4IDM3Ni4yMSA1LjAw
IGNmCltdIDAgc2V0ZGFzaAoyODkuNDggMzc2LjIxIDUuMDAgY28KMzM3LjY3
IDQ2OC43NiA1LjAwIGNmCltdIDAgc2V0ZGFzaAozMzcuNjcgNDY4Ljc2IDUu
MDAgY28KNDY2LjE3IDQ5Ny45OSA1LjAwIGNmCltdIDAgc2V0ZGFzaAo0NjYu
MTcgNDk3Ljk5IDUuMDAgY28KNTQ2LjQ4IDUyNy4yMiA1LjAwIGNmCltdIDAg
c2V0ZGFzaAo1NDYuNDggNTI3LjIyIDUuMDAgY28KW10gMCBzZXRkYXNoCm5w
CjkzLjUyIDI1NC45NCBtCjk4Ljc1IDI1Ny40MiBsCjEwMy45OCAyNTkuOTkg
bAoxMDkuMjEgMjYyLjYzIGwKMTE0LjQ0IDI2NS4zNiBsCjExOS42NyAyNjgu
MTggbAoxMjQuOTAgMjcxLjA3IGwKMTMwLjEzIDI3NC4wNSBsCjEzNS4zNiAy
NzcuMTIgbAoxNDAuNTkgMjgwLjI3IGwKMTQ1LjgyIDI4My41MCBsCjE1MS4w
NCAyODYuODEgbAoxNTYuMjcgMjkwLjIxIGwKMTYxLjUwIDI5My42OCBsCjE2
Ni43MyAyOTcuMjMgbAoxNzEuOTYgMzAwLjg2IGwKMTc3LjE5IDMwNC41NyBs
CjE4Mi40MiAzMDguMzQgbAoxODcuNjUgMzEyLjE5IGwKMTkyLjg4IDMxNi4x
MCBsCjE5OC4xMSAzMjAuMDcgbAoyMDMuMzQgMzI0LjEwIGwKMjA4LjU3IDMy
OC4xOSBsCjIxMy44MCAzMzIuMzMgbAoyMTkuMDMgMzM2LjUyIGwKMjI0LjI2
IDM0MC43NSBsCjIyOS40OSAzNDUuMDIgbAoyMzQuNzIgMzQ5LjMzIGwKMjM5
Ljk1IDM1My42NiBsCjI0NS4xOCAzNTguMDIgbAoyNTAuNDEgMzYyLjM5IGwK
MjU1LjY0IDM2Ni43OCBsCjI2MC44NyAzNzEuMTggbAoyNjYuMTAgMzc1LjU4
IGwKMjcxLjMzIDM3OS45OCBsCjI3Ni41NiAzODQuMzYgbAoyODEuNzkgMzg4
Ljc0IGwKMjg3LjAyIDM5My4wOSBsCjI5Mi4yNSAzOTcuNDIgbAoyOTcuNDgg
NDAxLjczIGwKMzAyLjcwIDQwNS45OSBsCjMwNy45MyA0MTAuMjIgbAozMTMu
MTYgNDE0LjQxIGwKMzE4LjM5IDQxOC41NCBsCjMyMy42MiA0MjIuNjMgbAoz
MjguODUgNDI2LjY2IGwKMzM0LjA4IDQzMC42MyBsCjMzOS4zMSA0MzQuNTMg
bAozNDQuNTQgNDM4LjM3IGwKMzQ5Ljc3IDQ0Mi4xNCBsCjM1NS4wMCA0NDUu
ODQgbAozNjAuMjMgNDQ5LjQ2IGwKMzY1LjQ2IDQ1My4wMSBsCjM3MC42OSA0
NTYuNDcgbAozNzUuOTIgNDU5Ljg2IGwKMzgxLjE1IDQ2My4xNyBsCjM4Ni4z
OCA0NjYuMzkgbAozOTEuNjEgNDY5LjU0IGwKMzk2Ljg0IDQ3Mi41OSBsCjQw
Mi4wNyA0NzUuNTcgbAo0MDcuMzAgNDc4LjQ2IGwKNDEyLjUzIDQ4MS4yNiBs
CjQxNy43NiA0ODMuOTkgbAo0MjIuOTkgNDg2LjYyIGwKNDI4LjIyIDQ4OS4x
OCBsCjQzMy40NSA0OTEuNjYgbAo0MzguNjggNDk0LjA1IGwKNDQzLjkxIDQ5
Ni4zNiBsCjQ0OS4xNCA0OTguNjAgbAo0NTQuMzYgNTAwLjc2IGwKNDU5LjU5
IDUwMi44NCBsCjQ2NC44MiA1MDQuODUgbAo0NzAuMDUgNTA2Ljc5IGwKNDc1
LjI4IDUwOC42NSBsCjQ4MC41MSA1MTAuNDUgbAo0ODUuNzQgNTEyLjE3IGwK
NDkwLjk3IDUxMy44NCBsCjQ5Ni4yMCA1MTUuNDMgbAo1MDEuNDMgNTE2Ljk3
IGwKNTA2LjY2IDUxOC40NCBsCjUxMS44OSA1MTkuODYgbAo1MTcuMTIgNTIx
LjIyIGwKNTIyLjM1IDUyMi41MiBsCjUyNy41OCA1MjMuNzcgbAo1MzIuODEg
NTI0Ljk3IGwKNTM4LjA0IDUyNi4xMiBsCjU0My4yNyA1MjcuMjIgbApvCjQw
OS45NSA0NjMuODkgKENCKSAwLjUwIDAuMzMgMC4wMCB0CmVwCiUlVHJhaWxl
cgolJVBhZ2VzOiAxCiUlRU9GCg==
--0-375965957-891636968=:10428--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Sun Apr  5 17:02:14 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Sun, 5 Apr 1998 11:02:14 -0500 (CDT)
Subject: plogis bug
Message-ID: <Pine.OSF.3.95.980405105309.20600A-100000@io.uwinnipeg.ca>

plogis seems broken:

> xfit<-seq(1,5,.1)
> pfit<-pnorm(-(3-xfit)/1)
> pfit
 [1] 0.02275013 0.02871656 0.03593032 0.04456546 0.05479929 0.06680720
 [7] 0.08075666 0.09680048 0.11506967 0.13566606 0.15865525 0.18406013
[13] 0.21185540 0.24196365 0.27425312 0.30853754 0.34457826 0.38208858
[19] 0.42074029 0.46017216 0.50000000 0.53982784 0.57925971 0.61791142
[25] 0.65542174 0.69146246 0.72574688 0.75803635 0.78814460 0.81593987
[31] 0.84134475 0.86433394 0.88493033 0.90319952 0.91924334 0.93319280
[37] 0.94520071 0.95543454 0.96406968 0.97128344 0.97724987
> pfit<-plogis(-(3-xfit)/1)
> pfit
 [1] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
 [8] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
[15] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.5000000
[22] 0.5249792 0.5498340 0.5744425 0.5986877 0.6224593 0.6456563 0.6681878
[29] 0.6899745 0.7109495 0.7310586 0.7502601 0.7685248 0.7858350 0.8021839
[36] 0.8175745 0.8320184 0.8455347 0.8581489 0.8698915 0.8807971
notice all the zeros--this is wrong.

> myplogis<-function(q)
{
1/(1+exp(-q))
}+ + + 
> pfit<-myplogis((-(3-xfit)/1))
> pfit
 [1] 0.1192029 0.1301085 0.1418511 0.1544653 0.1679816 0.1824255 0.1978161
 [8] 0.2141650 0.2314752 0.2497399 0.2689414 0.2890505 0.3100255 0.3318122
[15] 0.3543437 0.3775407 0.4013123 0.4255575 0.4501660 0.4750208 0.5000000
[22] 0.5249792 0.5498340 0.5744425 0.5986877 0.6224593 0.6456563 0.6681878
[29] 0.6899745 0.7109495 0.7310586 0.7502601 0.7685248 0.7858350 0.8021839
[36] 0.8175745 0.8320184 0.8455347 0.8581489 0.8698915 0.8807971

I actually looked at plogis.c and it looks fine.  Not sure what is causing
the trouble.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Sun Apr  5 18:14:05 1998
From: gb@stat.umu.se (Goran Brostrom)
Date: Sun, 5 Apr 1998 19:14:05 +0200 (MET DST)
Subject: plogis bug
In-Reply-To: <Pine.OSF.3.95.980405105309.20600A-100000@io.uwinnipeg.ca>
Message-ID: <Pine.GSO.3.95.980405191018.784A-100000@pc30.stat.umu.se>


On Sun, 5 Apr 1998, Bill Simpson wrote:

> plogis seems broken:
> 
> > xfit<-seq(1,5,.1)
> > pfit<-pnorm(-(3-xfit)/1)
> > pfit
>  [1] 0.02275013 0.02871656 0.03593032 0.04456546 0.05479929 0.06680720
>  [7] 0.08075666 0.09680048 0.11506967 0.13566606 0.15865525 0.18406013
> [13] 0.21185540 0.24196365 0.27425312 0.30853754 0.34457826 0.38208858
> [19] 0.42074029 0.46017216 0.50000000 0.53982784 0.57925971 0.61791142
> [25] 0.65542174 0.69146246 0.72574688 0.75803635 0.78814460 0.81593987
> [31] 0.84134475 0.86433394 0.88493033 0.90319952 0.91924334 0.93319280
> [37] 0.94520071 0.95543454 0.96406968 0.97128344 0.97724987
> > pfit<-plogis(-(3-xfit)/1)
> > pfit
>  [1] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
>  [8] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
> [15] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.5000000
> [22] 0.5249792 0.5498340 0.5744425 0.5986877 0.6224593 0.6456563 0.6681878
> [29] 0.6899745 0.7109495 0.7310586 0.7502601 0.7685248 0.7858350 0.8021839
> [36] 0.8175745 0.8320184 0.8455347 0.8581489 0.8698915 0.8807971
> notice all the zeros--this is wrong.
> 
> I actually looked at plogis.c and it looks fine.  Not sure what is causing
> the trouble.
 
I also looked at plogis.c. It looks fine in R-0.61.1, but not in 
R-snapshot; the difference is an added line

if(x < location) return 0;

which should not be there. Guess you are running snapshot and looking at
plogis.c form another version.

Goran Brostrom
Statistics Dept, Umea University
Umea, Sweden


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Sun Apr  5 21:34:32 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Mon, 6 Apr 1998 08:34:32 +1200 (NZST)
Subject: plogis bug
Message-ID: <199804052034.IAA08685@stat1.stat.auckland.ac.nz>

	From: Goran Brostrom <gb@stat.umu.se>
	To: Bill Simpson <wsimpson@uwinnipeg.ca>
	cc: r-devel <r-devel@stat.math.ethz.ch>
	Subject: Re: plogis bug


	On Sun, 5 Apr 1998, Bill Simpson wrote:

	> plogis seems broken:
	> 
	 
	I also looked at plogis.c. It looks fine in R-0.61.1, but not in 
	R-snapshot; the difference is an added line

	if(x < location) return 0;

	which should not be there. Guess you are running snapshot and looking at
	plogis.c form another version.

Exactly right!  I just commited the change, thanks.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kim.pilegaard@risoe.dk  Mon Apr  6 11:51:58 1998
From: kim.pilegaard@risoe.dk (Kim Pilegaard)
Date: Mon, 06 Apr 1998 09:51:58 -0100 (GMT)
Subject: problems with chron library
Message-ID: <Pine.GSO.3.95.980406094808.3957A-100000@eco-sun.risoe.dk>

I have installed the chron library, but it does not seem to work:

> chron("04/06/98")
Error in .C(NAME = "to_lower", strings = as.character(str), nstrings =
as.integer(n)) : C/Fortran function not in load table
> chron(17894)
Error in .C(NAME = "to_lower", strings = as.character(str), nstrings =
as.integer(n)) : C/Fortran function not in load table
>

I am using R Version 0.61.0 Alpha (December 21, 1997) with 
chron_2.1-2.tar.gz

Best wishes,

Kim

=============================================================================
Kim Pilegaard
Plant Biology and Biogeochemistry Department
Building 114
Risoe National Laboratory
P.O. Box 49
DK-4000 Roskilde
DENMARK
Phone:  +45 4677 4175
Fax:    +45 4677 4193
E-mail: kim.pilegaard@risoe.dk


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Apr  6 10:57:58 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 6 Apr 1998 11:57:58 +0200
Subject: problems with chron library
In-Reply-To: <Pine.GSO.3.95.980406094808.3957A-100000@eco-sun.risoe.dk>
 (message from Kim Pilegaard on Mon, 06 Apr 1998 09:51:58 -0100 (GMT))
Message-ID: <199804060957.LAA00694@sophie.ethz.ch>

Kim,

The chron package is in contrib/devel
			        -----
rather than contrib.
The reason is that it requires R 0.62 (the "unstable" development version).

Your problem might also be the famous ``lingering .Dyn.lib'' problem.
Try to add
	rm(.Dyn.libs)
to your .First function  (or at least try to execute it before library(chron)).
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Osman.Buyukisik@ae.ge.com  Mon Apr  6 13:28:36 1998
From: Osman.Buyukisik@ae.ge.com (Buyukisik, Osman (GEAE))
Date: Mon, 6 Apr 1998 08:28:36 -0400
Subject: compiling Snapshots under RedHat4.2
Message-ID: <0302875C631AD11198DE00600806C63747A030@ev009msxaege.ae.ge.com>

Hi,
 I have hp/hpux10.20 at work, and was able to build snapshots there. At home, I
have p120 linux redhat4.2. I thought it would work better than the hp, but... I
am getting missing routines drotg_ (I guess supposed to be in blas?) and
readline related linking errors. Do I need to upgrade to 5.0???
TIA
Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Mon Apr  6 17:18:48 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Mon, 6 Apr 1998 11:18:48 -0500 (CDT)
Subject: data.entry()
Message-ID: <Pine.OSF.3.95.980406111614.22416A-100000@io.uwinnipeg.ca>

In the snapshot, if you try to quit data.entry() by clicking the kill box
instead of clicking in quit box, you crash R.  This was the same behaviour
that used to happen in graphics window (now fixed).

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kim.pilegaard@risoe.dk  Tue Apr  7 09:55:15 1998
From: kim.pilegaard@risoe.dk (Kim Pilegaard)
Date: Tue, 07 Apr 1998 07:55:15 -0100
Subject: problems with chron library
Message-ID: <9804070855.AA06585@eco-sun.risoe.dk>


> Kim,
> 
> The chron package is in contrib/devel
> 			        -----
> rather than contrib.
> The reason is that it requires R 0.62 (the "unstable" development version).
> 
> Your problem might also be the famous ``lingering .Dyn.lib'' problem.
> Try to add
> 	rm(.Dyn.libs)
> to your .First function  (or at least try to execute it before 
library(chron)).

Thanks for the information. 
Does this mean that all the packages in contrib/devel requires R 0.62 ?
I don't seem to have .Dyn.lib so that does not help.


Kim
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Apr  7 08:37:37 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 7 Apr 1998 09:37:37 +0200
Subject: problems with chron library
In-Reply-To: <9804070855.AA06585@eco-sun.risoe.dk> (kim.pilegaard@risoe.dk)
Message-ID: <199804070737.JAA00491@sophie.ethz.ch>

>>>>> "Kim" == Kim Pilegaard <kim.pilegaard@risoe.dk> writes:

    >> Kim,
    >> 
    >> The chron package is in contrib/devel ----- rather than contrib.
    >> The reason is that it requires R 0.62 (the "unstable" development
    >> version).
    >> 
    >> Your problem might also be the famous ``lingering .Dyn.lib''
    >> problem.  Try to add rm(.Dyn.libs) to your .First function (or at
    >> least try to execute it before
    >> library(chron)).

    Kim> Thanks for the information.  Does this mean that all the packages
    Kim> in contrib/devel requires R 0.62 ?

No, it doesn't mean that.
"devel" means something like:	

	This is a package in DEVELopment, i.e.,
	it is known to have problems under some circumstances.

The "some circumstances"  
	- can mean that not all functions work in current
	  versions of R,

	- can mean that C / Fortran code does not properly link on some
	  architectures,..

	- can mean that the code hasn't been tested thoroughly and is huge
	  (which automatically means it has bugs  :-)

Note that the last case is certainly true  for  'lme', 'dse' and 'design'.
I think all of these three do not require 0.62 at all.

CRAN-maintainers: 
	It certainly would be useful to have a  README file in
		 <<CRAN>>/src/contrib/devel/
But then I agree "devel" just means: 
	``You are on your own if you hope it works'' :-)


    Kim> I don't seem to have .Dyn.lib so that does not help.

too bad.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Apr  7 19:57:55 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 07 Apr 1998 13:57:55 -0500
Subject: R-beta: spline problems(?)
In-Reply-To: "A. Tsiolakidis"'s message of "Tue, 7 Apr 1998 04:25:10 +0100 (BST)"
References: <2441.199804070325@arnie.cs.keele.ac.uk>
Message-ID: <6riuol793g.fsf@verdi.stat.wisc.edu>

"A. Tsiolakidis"  <tsioltas@cs.keele.ac.uk> writes:

> OK, thanks, it looks like I can use the splines library instead (I had no
> idea how, but now I do!). Should we call it a bug then?
> 
> Question No. 2:
> 
> >From the same S-plus program, I was forced to change a line that was giving
> me Segmentation Error problems (a crash on Solaris 2.5):
> 
>  error _ t(y.fit) %*% ( DBD + Lambda ) %*% y.fit +
>  rbind(rep(1,n)) %*% F.vec.sq - 2 * t(y.fit) %*% F.vec

> Apparently, leaving out the middle term did the trick:
>  error _ t(y.fit) %*% ( DBD + Lambda ) %*% y.fit - 2 * t(y.fit) %*% F.vec
> , while the program still runs more or less as expected. There's nothing
> nasty about this middle term, is there?

It could possibly be a problem with rbind or with the matrix
multiplication for a column vector like that.  It is unusual to create 
a matrix that way.  If you want a single column you could create it as
 matrix( 1, nrow = n, ncol = 1)
or reverse the value of the nrow and ncol arguments for a matrix with
1 row.  Even more concise is
 array( 1, c(n, 1) ) or array( 1, c(1, n)) 
depending on which orientation you want.

> Finally, a certain READ.MAT function, that reads in a single-column file,
> taking the first two entries as the dimension of a matrix and storing the
> remaining values in such a matrix, wouldn't work; anybody can see why?

> READ.MAT _function(file, nrow = 0) {
> if(nrow > 0) {
>     n <- scan(file, n = 2)[2] * nrow
>     tmp <- scan(file, n = n + 2)
>   } 
> 
> ## first point of action: simply read in the file in vector 'tmp'
> else {
>     tmp <- scan(file)
>   }
> 
> if(length(tmp)<=2) {
>     return(NULL) 
>   }
> 
> ## the following clause should do the vector>>matrix conversion
> 
>  else {
>     x <- matrix(tmp[ - c(1, 2)], ncol = tmp[2], byrow = T)
>     return(x)
>   }
> }

I'm not sure exactly what is happening with that.

> Finally, if anybody is curious to see what is giving me all this trouble,
> it is some code for what is termed Mixture Spline models:
> http://cm.bell-labs.com/cm/ms/departments/sia/dxsun/speech/mixSplineSpec

This was sent to me only.  I am forwarding the reply onto the r-devel
list so others can take a look at it.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Apr  7 22:13:52 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 8 Apr 1998 09:13:52 +1200 (NZST)
Subject: Update to R-unstable
Message-ID: <199804072113.JAA26315@stat1.stat.auckland.ac.nz>

I just want to signal to anyone using the develoment (i.e. more
unstable) version of R that (with permission) I have just
incorporated John Chambers' StatLib dataframe code into R and also
rewritten the code for "factors" to more closely resemble that in S.

This is a BIG change (2-3k lines of C code perished in the struggle).
The change seems to work well, but there may be residual problems.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Apr  8 06:10:32 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 8 Apr 1998 17:10:32 +1200 (NZST)
Subject: Spline code fixed
Message-ID: <199804080510.RAA08583@stat1.stat.auckland.ac.nz>

The problem in "spline" and "splinefun" has been fixed.  There was a
typo in the code computing natural and Forsythe/Malcom/Moler splines.
Only extrapolation beyond the right-hand endpoint would have produced
incorrect results.  Periodic splines were not affected.
	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Apr  8 21:10:30 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 9 Apr 1998 08:10:30 +1200 (NZST)
Subject: Image restoration in latest snapshots
Message-ID: <199804082010.IAA17686@stat1.stat.auckland.ac.nz>

I have restored backward compatibility of .RData files in the latest
development snapshot.  This should be propagating to archives shortly.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Apr  9 17:27:47 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 9 Apr 1998 09:27:47 -0700 (PDT)
Subject: 0-extent matrices?
In-Reply-To: <199803302030.IAA23649@stat1.stat.auckland.ac.nz>
Message-ID: <Pine.SUN.3.95.980409091945.15125A-100000@chekov>


Is there a good reason not to allow matrix extents to be zero? I have been
writing a function which fits glms under certain linear constraints.  I
fit the model with a reduced set of variables and then transform back to
the original set.  This involves operating on submatrices of the
covariance matrix and subsets of the coefficients. Sometimes these subsets
are empty.  A zero-length subset of the coefficient vector causes no
problems, but a 0x6 submatrix of the covariance matrix won't work with
rbind and cbind.  There appears to be no difficulty in deciding how
standard matrix and array operations should work with a 0x6 matrix and in
fact you might expect that the same C code would usually work.

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Apr 11 09:56:16 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 11 Apr 1998 10:56:16 +0200
Subject: 0-extent matrices?
In-Reply-To: <Pine.SUN.3.95.980409091945.15125A-100000@chekov> (message from
 Thomas Lumley on Thu, 9 Apr 1998 09:27:47 -0700 (PDT))
Message-ID: <199804110856.KAA00986@sophie.ethz.ch>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> Is there a good reason not to allow matrix extents to be zero? 

No, I don't think so.

And I agree that it would be really useful to have them in circumstances
like yours.

    TL> I have been writing a function which fits glms under certain linear
    TL> constraints.  I fit the model with a reduced set of variables and
    TL> then transform back to the original set.  This involves operating
    TL> on submatrices of the covariance matrix and subsets of the
    TL> coefficients. Sometimes these subsets are empty.  A zero-length
    TL> subset of the coefficient vector causes no problems, but a 0x6
    TL> submatrix of the covariance matrix won't work with rbind and cbind.
    TL> There appears to be no difficulty in deciding how standard matrix
    TL> and array operations should work with a 0x6 matrix and in fact you
    TL> might expect that the same C code would usually work.

Could you look into implementing them? 

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Lumley <thomas@biostat.washington.edu>  Sun Apr 12 00:24:41 1998
From: Thomas Lumley <thomas@biostat.washington.edu> (Thomas Lumley)
Date: Sat, 11 Apr 1998 16:24:41 -0700 (PDT)
Subject: 0-extent matrices?
In-Reply-To: <199804110856.KAA00986@sophie.ethz.ch>
Message-ID: <Pine.LNX.3.96.980411161742.11966A-100000@buffy>


Implementing 0-extent matrices turns out to be easy -- it's almost
entirely a matter of removing the tests for 0.  There seems to be only one
thing that may require special-case handling, but I'm not sure what the
Right Thing to do is.

If m is a 0x4 matrix, say, what should 2*m, 2+m and so on return?

Since m+m is a 0x4 matrix but 2*as.vector(m) is NA we can't have complete
consistency.  My preference is for these operations to happen elementwise
-- ie m+m is a 0x4 matrix.  Comments?

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Apr 12 15:57:34 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 12 Apr 1998 16:57:34 +0200 (CEST)
Subject: 0-extent matrices?
In-Reply-To: <Pine.LNX.3.96.980411161742.11966A-100000@buffy>
References: <199804110856.KAA00986@sophie.ethz.ch>
 <Pine.LNX.3.96.980411161742.11966A-100000@buffy>
Message-ID: <13616.54878.596955.835572@aragorn.ci.tuwien.ac.at>

>>>>> Thomas Lumley writes:

> Implementing 0-extent matrices turns out to be easy -- it's almost
> entirely a matter of removing the tests for 0.  There seems to be only one
> thing that may require special-case handling, but I'm not sure what the
> Right Thing to do is.

> If m is a 0x4 matrix, say, what should 2*m, 2+m and so on return?

> Since m+m is a 0x4 matrix but 2*as.vector(m) is NA we can't have complete
> consistency.  My preference is for these operations to happen elementwise
> -- ie m+m is a 0x4 matrix.  Comments?

Sounds very much like going the Octave/MATLAB way.  I thought we'd
eventually have a `Matrix' class for such things?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Apr 14 02:04:40 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 13 Apr 1998 18:04:40 -0700 (PDT)
Subject: 0-extent matrices?
In-Reply-To: <13616.54878.596955.835572@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.SUN.3.95.980413175740.28284D-100000@chekov>

On Sun, 12 Apr 1998, Kurt Hornik wrote:
> 
> Sounds very much like going the Octave/MATLAB way.  I thought we'd
> eventually have a `Matrix' class for such things?

Not really -- this applies to arrays as well and is basically a
programming issue similar to using drop=F when subscripting.  If you
subscript an array and it turns out that the result is empty you still
want as much as possible of the same code to work.  The most important
things are cbind, rbind and t, but it is useful that %*%, chol, solve, and
qr all give sensible results with empty matrices.  I went with m+2 giving
NA, for consistency with real(0)+2, so you do have to explicitly do
m+array(2,dim=dim(m)) or some such if you want elementwise arithmetic
operations on a possibly empty array.  This means very little special case
work is need to handle possibly empty arrays


Thomas Lumley
------------------------
Biostatistics		
Uni of Washington	
Box 357232		
Seattle WA 98195-7232	
------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Apr 14 09:06:35 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 14 Apr 1998 10:06:35 +0200
Subject: R-beta: S Compatibility (again)
In-Reply-To: <199804132350.LAA07571@stat1.stat.auckland.ac.nz> (message from
 Robert Gentleman on Tue, 14 Apr 1998 11:50:43 +1200 (NZST))
Message-ID: <199804140806.KAA00527@sophie.ethz.ch>

[I am diverting to R-devel,  I think it get's too technical..]

>>>>> "RobG" == Robert Gentleman <rgentlem@stat.auckland.ac.nz> writes:

    RobG> ....


    RobG>   It should be possible to write a body<- function that let you
    RobG> assign a new body (given lexical scope this can be absolutely
    RobG> disasterous). There is already an environment<-
    RobG> function. Probably we need arguments (since args returns a
    RobG> function rather than the list of args). If you really want it let
    RobG> me know and I'll whip up something that does this.....

We already have  formals(.), I think exactly for that purpose..
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Apr 17 16:29:13 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 17 Apr 1998 17:29:13 +0200 (CEST)
Subject: development mda package
Message-ID: <13623.30025.254231.357114@galadriel.ci.tuwien.ac.at>


NEW: CRAN/src/contrib/devel/mda_0.1-1.tar.gz


I have made a first shot at porting the Hastie & Tibshirani mda package t=
o
R ... this is almost not tested at all ... but it works for the iris
data and what else could a statistician be possibly interested in anyway =
:-)


All BRUTO stuff is missing because there are some unresolved symbols:
  R.binary: can't resolve symbol 'sgram_'
  R.binary: can't resolve symbol 'd_sign'
  R.binary: can't resolve symbol 'pack_'
  R.binary: can't resolve symbol 'unpack_'
  R.binary: can't resolve symbol 'sknotl_'
  R.binary: can't resolve symbol 'wmean_'
which I didn't have time to search/imitate/...

Mda and fda with MARS seem to work fine, though.

You'll additionally need the e1071 (kmeans) and class (lvq & friends)
packages from CRAN.

It also seems only to work with the new dataframe code that is
in the latest snapshot version (>=3D easter 1998).

Good luck,

-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 17 17:05:55 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Apr 1998 18:05:55 +0200
Subject: development mda package
In-Reply-To: Friedrich Leisch's message of Fri, 17 Apr 1998 17:29:13 +0200 (CEST)
References: <13623.30025.254231.357114@galadriel.ci.tuwien.ac.at>
Message-ID: <x2u37smo0s.fsf@blueberry.kubism.ku.dk>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> All BRUTO stuff is missing because there are some unresolved symbols:
>   R.binary: can't resolve symbol 'sgram_'
>   R.binary: can't resolve symbol 'd_sign'
>   R.binary: can't resolve symbol 'pack_'
>   R.binary: can't resolve symbol 'unpack_'
>   R.binary: can't resolve symbol 'sknotl_'
>   R.binary: can't resolve symbol 'wmean_'

I believe sgram and sknotl are B-spline routines used also in the gcv
code on netlib (in RATFOR...), way back when. I can guess what d_sign
and wmean_ does. How about pack and unpack, anyone?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Lumley <thomas@biostat.washington.edu>  Sat Apr 18 17:51:16 1998
From: Thomas Lumley <thomas@biostat.washington.edu> (Thomas Lumley)
Date: Sat, 18 Apr 1998 09:51:16 -0700 (PDT)
Subject: attr(modelmatrix,"assign")
In-Reply-To: <9804178928.AA892838755@nass.usda.gov>
Message-ID: <Pine.SUN.3.95.980417121655.11386D-100000@chekov>


The "assign" attribute for model matrices has mutated in S-PLUS (probably
in 3.3 or 3.4) -- the model code is obviously not subject to
enough evolutionary pressure to keep mutations down.

Now it returns a list with elements named for each model term, giving the
vector of column numbers arising from that term
> y<-1:10
> x<-1:10
> attr(model.matrix(~y+factor(x)),"assign") 
$"(Intercept)":
[1] 1

$y:
[1] 2

$"factor(x)":
[1]  3  4  5  6  7  8  9 10 11

I don't think we necessarily want to change from our attr(,"assign"),
which follows Chambers & Hastie, but we may want to be able to create a
compatible version.
This can be done by the following function, which needs the terms
object as well as the model matrix

attrassign<-function(mmat,tt){
        if (!inherits(tt,"terms"))
                stop("need terms object")
        aa<-attr(mmat,"assign")
        if (is.null(aa))
                stop("argument is not really a model matrix")
        ll<-attr(tt,"term.labels")
        if (attr(tt,"intercept")>0)
                ll<-c("(Intercept)",ll)
        aaa<-factor(aa,labels=ll)
        split(order(aa),aaa)
        }

Perhaps we should add another attribute ("S.assign") to model matrices?

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Lumley <thomas@biostat.washington.edu>  Sat Apr 18 19:28:04 1998
From: Thomas Lumley <thomas@biostat.washington.edu> (Thomas Lumley)
Date: Sat, 18 Apr 1998 11:28:04 -0700 (PDT)
Subject: RFC: large database interface
In-Reply-To: <Pine.LNX.3.96.980226163351.22796A-100000@alpha.fuzzy.at>
Message-ID: <Pine.LNX.3.96.980301144403.7917A-100000@buffy>


I have been playing with a large database interface for R, and have
written one complete but useless demonstration and one incomplete but
potentially useful example (with memory mapping of a fixed-format ASCII
file). The idea is to make the file appear like a matrix or data frame but
not have to read it into the R heap.

A description and code can be found at
http://www.biostat.washington.edu/~thomas/Rdb.html
                                          Rdb.nw  (noweb literate program)
                                          Rdb.c
                                          Rdb.R

Comments?

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eschmid@delos.lf.net  Sun Apr 19 12:10:37 1998
From: eschmid@delos.lf.net (Egon Schmid)
Date: Sun, 19 Apr 1998 13:10:37 +0200
Subject: RFC: large database interface
References: <Pine.LNX.3.96.980301144403.7917A-100000@buffy>
Message-ID: <3539DBAD.76AD3DC1@delos.lf.net>

Thomas Lumley wrote:
> 
> I have been playing with a large database interface for R, and have
> written one complete but useless demonstration and one incomplete but
> potentially useful example (with memory mapping of a fixed-format ASCII
> file). The idea is to make the file appear like a matrix or data frame but
> not have to read it into the R heap.
> 
> A description and code can be found at
> http://www.biostat.washington.edu/~thomas/Rdb.html
>                                           Rdb.nw  (noweb literate program)
>                                           Rdb.c
>                                           Rdb.R
> 
> Comments?

Well, there is a web interface through the Apache module PHP Hypertext
Preprocessor. At http://www.php.net/ there are plenty more database
interfaces.

Personaly I think it would a great idea to interface large datasets with
netCDF 

	http://www.unidata.ucar.edu/packages/netcdf

>From the manual '1.2 NetCDF Is Not a Database Management System'

"Why not use an existing database management system for storing
array-oriented data? Relational database software is not suitable for
the kinds of data access supported by the netCDF interface.

First, existing database systems that support the relational model do
not support multidimensional objects (arrays) as a basic unit of data
access. Representing arrays as relations makes some useful kinds of data
access awkward and provides little support for the abstractions of
multidimensional data and coordinate systems. A quite different data
model is needed for array-oriented data to facilitate its retrieval,
modification, mathematical manipulation and visualization.

Related to this is a second problem with general-purpose database
systems: their poor performance on large arrays. Collections of
satellite images, scientific model outputs and long-term global weather
observations are beyond the capabilities of most database systems to
organize and index for efficient retrieval.

Finally, general-purpose database systems provide, at significant cost
in terms of both resources and access performance, many facilities that
are not needed in the analysis, management, and display of
array-oriented data. For example, elaborate update facilities, audit
trails, report formatting, and mechanisms designed for
transaction-processing are unnecessary for most scientific
applications."

On Feb 3 there was a small thread on this mailing list. 

-Egon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Apr 20 01:44:00 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Mon, 20 Apr 1998 12:44:00 +1200 (NZST)
Subject: RFC: large database interface
In-Reply-To: <3539DBAD.76AD3DC1@delos.lf.net>
References: <Pine.LNX.3.96.980301144403.7917A-100000@buffy>
 <3539DBAD.76AD3DC1@delos.lf.net>
Message-ID: <199804200044.MAA16425@stat1.stat.auckland.ac.nz>

Egon Schmid writes:
 > Thomas Lumley wrote:
 > > 
 > > I have been playing with a large database interface for R, and have
 > > written one complete but useless demonstration and one incomplete but
 > > potentially useful example (with memory mapping of a fixed-format ASCII
 > > file). The idea is to make the file appear like a matrix or data frame but
 > > not have to read it into the R heap.
 > > 
 > > A description and code can be found at
 > > http://www.biostat.washington.edu/~thomas/Rdb.html
 > >                                           Rdb.nw  (noweb literate program)
 > >                                           Rdb.c
 > >                                           Rdb.R
 > > 
 > > Comments?

This looks very interesting.  It would be nice if the such an
interface were written in a way that could be customized to a variety
of applications.  Being able to read spreadsheets is one thing which
comes to mind.  It might be nice (for example) to have a rather
complex initialization procedure which inspects the dataset thoroughly
and determines things like variable types (if the database does not
contain this information).

Egon Schmid writes:
 > Well, there is a web interface through the Apache module PHP Hypertext
 > Preprocessor. At http://www.php.net/ there are plenty more database
 > interfaces.
 > 
 > Personaly I think it would a great idea to interface large datasets with
 > netCDF 
 >
 > "Why not use an existing database management system for storing
 > array-oriented data? Relational database software is not suitable for
 > the kinds of data access supported by the netCDF interface.
 > 

Hmm. Over the past week I have been looking at NetCDF because GMT
(The Generic Mapping Tools)
	http://www.soest.hawaii.edu/wessel/gmt.html
use NetCDF to store their maps.

[ The maps are rather better than the Becker and Wilks ones because
  they are based on the World Vector Shoreline as well as the CIA WDB
  that B&W use.  They also have the maps prepared pretty well for
  plotting.  The only place where B&W are better is in the naming
  of places ... ]

I wasn't thinking about pulling the data from these maps into R, but
rather just rendering them on a graphics device so that they could
then be added to.

I suspect that when I've done that I'll probably know enough to create
an R/NetCDF link, perhaps using a framework of the type Thomas
proposes.
	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 20 18:48:42 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Apr 1998 19:48:42 +0200
Subject: R-0.61.1 compiled with egcs-mingw32
In-Reply-To: guido@sirio.stat.unipd.it's message of Sun, 22 Mar 1998 18:59:19 +0100 (GMT+0100)
References: <19980322175919.1333.qmail@sirio.stat.unipd.it>
Message-ID: <x24szo2xl1.fsf@blueberry.kubism.ku.dk>

guido@sirio.stat.unipd.it writes:

> rgnwbin.tgz and rgnwsrc.tgz are the first results of an attempt to
> build R for Win95 and WinNT using egcs-mingw32.
> 
> The advantages over the binaries for MsWindows that can be found in CRAN
> are:
> 1. R seems to run faster. Some simple (perhaps too simple)
>    benchmarks point to a 20% gain.
> 2. The port is based on a more recent version (0.61.1) and it is more
>    complete (more "system calls": system, tempfile, unlink, 
>    WinExec - to launch applications without waiting for the result;
>    support for the standard help system: try help(), help(abline),
>    help(line,eda), ?women, data(), library())
> 3. A new menu item "Stop current computation" make  possible 
>    to interupt long computation (but only when  something is printed).
> 4. Since egcs-mingw32 uses the standard C calling convention, 
>    you don't need a Watcom compiler to build dynamic link libraries.
>    Indeed, this was my original motivation.
> 5. It should be easy to use some other gnu-win32 compilers (maybe
>    running on a non MsWindows machine). It should be easy to 
>    adapt the port to lcc-win32, too.


One piece of bad news is that it doesn't work on Win3.X systems
(win32s). The PE-COFF object files that mingw32 makes simply won't
load, even for a "Hello, world" example.

The most likely candidate to get something running on that platform
(I, for one, still have quite a few students with older notebooks
and/or upgrade paranoia) seems to be RSXNT, but it's not all that
simple. It's also GCC-based, but the "specs" file is set up
differently from the mingw32/egcs one, which may create a great deal
of "fun".

RSXNT can (e.g.) be found at
ftp://ftp.tex.ac.uk/tex-archive/systems/msdos/dpmigcc/

I did a quick test and it does seem that a little fiddling makes it
possible to compile e.g. wincons.c with mingw32 headers plus a few
extra defines from the mingw32 specs file, so it would seem to be
doable, but it's hardly trivial. (Actually, this was with the ordinary
Linux GCC, but it's the header files that always cause trouble).

I also haven't got the foggiest about how to create DLL's with RSXNT,
especially how to to the important callbacks to the R binary (call_R). 

And, there's no g77 in RSXNT, so you'd need f2c. Perhaps it would be
easier to make the egcs cross-platform tools once and for all?

In any case, we need to do an "official" collection of tools. I tried
to compile using Guido's files during Easter, but immediately got
stopped by the absence of an "ls" command... 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Mon Apr 20 21:38:27 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Tue, 21 Apr 1998 08:38:27 +1200 (NZST)
Subject: R-0.61.1 compiled with egcs-mingw32
Message-ID: <199804202038.IAA28998@stat1.stat.auckland.ac.nz>

My own efforts to get a new windows version out have been hampered by the
preponderance of bugs in Watcom C (11.0). They decided to make their dll's
and exe's somewhat more compatible with M'soft stuff out of Visual C. 
They seemed to create a large number of bugs in the process. They have
also decided not to distribute patches but rather to sell CD's with
the patches on them......(isn't commercial software a wonderful thing)

robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 20 22:34:18 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Apr 1998 23:34:18 +0200
Subject: R-0.61.1 compiled with egcs-mingw32
In-Reply-To: Robert Gentleman's message of Tue, 21 Apr 1998 08:38:27 +1200 (NZST)
References: <199804202038.IAA28998@stat1.stat.auckland.ac.nz>
Message-ID: <x2vhs4xjmt.fsf@biostat.ku.dk>

Robert Gentleman <rgentlem@stat.auckland.ac.nz> writes:

> 
> My own efforts to get a new windows version out have been hampered by the
> preponderance of bugs in Watcom C (11.0). They decided to make their dll's
> and exe's somewhat more compatible with M'soft stuff out of Visual C. 
> They seemed to create a large number of bugs in the process. They have
> also decided not to distribute patches but rather to sell CD's with
> the patches on them......(isn't commercial software a wonderful thing)
> 

Ouch! In that case, I suggest that we try to put some collective
effort into getting something working with RSXNT. The only thing that
bothers me a little is that RSXNT isn't quite GPL compatible (you have
to pay a license for non-freeware usage) but I suppose that (a) it's a
very mild restriction, and (b) it can hardly be worse than shipping
GCC itself for RSXNT... There are certainly a lot of good things to be
said for using GCC throughout.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Tue Apr 21 09:56:06 1998
From: guido@sirio.stat.unipd.it (guido@sirio.stat.unipd.it)
Date: Tue, 21 Apr 1998 09:56:06 +0100 (GMT+0100)
Subject: R-0.61.1 compiled with egcs-mingw32
Message-ID: <19980421085606.8796.qmail@sirio.stat.unipd.it>

 Peter Dalgaard BSA writes:
 > 
 > Ouch! In that case, I suggest that we try to put some collective
 > effort into getting something working with RSXNT. The only thing that
 > bothers me a little is that RSXNT isn't quite GPL compatible (you have
 > to pay a license for non-freeware usage) but I suppose that (a) it's a
 > very mild restriction, and (b) it can hardly be worse than shipping
 > GCC itself for RSXNT... There are certainly a lot of good things to be
 > said for using GCC throughout.
 > 
 
 1) More than one year ago, hence, maybe, things are changed, I download
 RSXNT. However, I had problems to run its demo under MsWin3.1 (not under
 Win95). So, I prefered to give up. Just a limited experience, however.
 The other problem that I see is that, if I understand well,
 RSXNT is the effort of just one pearson  not of a team.
 
 2) What about DOS? Do you think that we really need a GUI console under 
 Microsoft-something? A couple of week ago, I took a look to the
 R code thinking to recompile it with DJGPP. I didn't try but it seems
 possible. The advantages that I can see are:
  a) DJGPP is stable, mature and supported. 
  b) I have limited experence but dynamic linking with DJGPP works
     better than under Windows. For me, of course. And I am not a 
     Windows programmers. But, I was able to to build dyn. libs
     which call routines in the main executable (and we need this
     non only for call_R but also for R_alloc and S_alloc).
     With, just 3 #define's its possible to use the dlopen/dlsym/dlclose
     interface.
  c) Same user interface under MsWindows and Unix (character+readline).
  d) DJGPP has g77.
  e) From DOS to WinNt, only one executable.
  A couple of disadvantages are:
  a) Old fashion.
  b) We need a new device. I suggest one based on grx (the standard djgpp
     graphic library) since this will have a small side effect:
     grx is available also for the linux console so can be used under
     linux without X (I remember some question about this on
     the R mailing list).
  c) dll's must be built using djgpp; anyway, djgpp is GPL.
  
  Comments? I have no time for a couple of weeks, but, after, if you
  think that can be a worth tentative, I can make  the first
  attempt (manage to recompile the non-graphic part +
  write a first draft for the graphic device if the previous
  point go well).
  
  guido m.
  
  
 
 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Apr 21 10:51:28 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 21 Apr 1998 11:51:28 +0200
Subject: R-beta: SEs for one-param MLE in R?
In-Reply-To: <9804210759.AA11933@alpha.luc.ac.be> (message from Jim Lindsey on
 Tue, 21 Apr 1998 09:59:54 +0200 (MET DST))
Message-ID: <199804210951.LAA00664@sophie.ethz.ch>

	[--- diverting from  R-help to R-devel ... MM ---]

>>>>> "Jim" == Jim Lindsey <jlindsey@luc.ac.be> writes:

    Jim> Just back from a week camping in the snow in the English Lakes,
    Jim> and trying to catch up...

I hope the adventurous vacation was also relaxing in some ways..

    MM> ....
    MM> BTW: I am (we are) interested in the functions that you are writing
    MM> for nlm(.)  It certainly is worthwhile to have nlm(.) return a class
    MM> "nlm" result and provide print.nlm(.) and summary.nlm(.) functions
    MM> {{ Jim Lindsey already posted something like this, unfortunately
    MM> using "nls" which we don't want as long as it is not very close to
    MM> S' nls(.) function }}

    Jim> I am afraid that I don't understand the logic of this requirement
    Jim> of closeness to R for such functions. nlm() itself is not close
    Jim> and even hist() has never been very similar.

Yes, there are some cases where we (the R-core team, or the "R-devel" group)
have decided that S-plus is so wrong that we don't want to emulate or stay
close to it.   hist(.) is one such example.

With  nls(.), this is quite different, I think.
nls(.) has several nice features, (your "nls" did too!).
Most notably, the calling syntax of nls(.) using model notation,
is something I would want before I'd call a function "nls".

At the moment, I think it would be better to add an "nlm" class and
corresponding print and summary methods to  nlm(.), rather than calling
such a thing "nls".

Also, a few weeks ago, Ross said that he planned to add code to nlm
which would make use of  gradient and hessian function when provided
(or also, using D(.) ?).

    Jim> On the other hand,
    Jim> remember that the nls() I sent was a very cut-down version of one
    Jim> in one of my libraries. It had the above solution for the
    Jim> inversion with one dimensional parameters. By the way, the
    Jim> original Fortran for nlm that I ported to R printed out a warning
    Jim> that the algorithm is very inefficient for one-dimensional
    Jim> problems.
Yes, your "nls" function was useful!
and I agree that "nlm" should be pushed in the direction of what you had.

    Jim>   With respect to Bill's negative binomial that started another
    Jim> discussion, one of the functions in my nonlinear regression
    Jim> library does negative binomial nonlinear regression for both the
    Jim> mean and the dispersion parameters, along with twenty odd other
    Jim> distributions. I used it for beta-binomial regression in my paper
    Jim> with Pat Altham in the latest Applied Statistics. (Also another
    Jim> similar function for a finite mixture with these distributions,
    Jim> for example for negative binomial with inflated zeroes.) In my
    Jim> repeated measures library, there is a similar function for
    Jim> regressions with the same collection of distributions, but having
    Jim> a random intercept. Once R stabilizes...

well, isn't  R  stabilizing more and more?
Since 0.61, at least the way extension packages (formerly known as "libraries")
should be written is pretty stable.
Jim, I think several people really would be interested in your 
``nonlinear regression library'' and the ``repeated measures library''.

If they don't work in R 0.61, they could be at least put into 
CRAN/src/contrib/devel/.

Best regards!
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 21 13:56:37 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Apr 1998 14:56:37 +0200
Subject: R-0.61.1 compiled with egcs-mingw32
In-Reply-To: guido@sirio.stat.unipd.it's message of Tue, 21 Apr 1998 09:56:06 +0100 (GMT+0100)
References: <19980421085606.8796.qmail@sirio.stat.unipd.it>
Message-ID: <x27m4je3ju.fsf@blueberry.kubism.ku.dk>

guido@sirio.stat.unipd.it writes:

> 
>  Peter Dalgaard BSA writes:
>  > 
>  > Ouch! In that case, I suggest that we try to put some collective
>  > effort into getting something working with RSXNT. The only thing that
>  > bothers me a little is that RSXNT isn't quite GPL compatible (you have
>  > to pay a license for non-freeware usage) but I suppose that (a) it's a
>  > very mild restriction, and (b) it can hardly be worse than shipping
>  > GCC itself for RSXNT... There are certainly a lot of good things to be
>  > said for using GCC throughout.
>  > 
>  
>  1) More than one year ago, hence, maybe, things are changed, I download
>  RSXNT. However, I had problems to run its demo under MsWin3.1 (not under
>  Win95). So, I prefered to give up. Just a limited experience, however.
>  The other problem that I see is that, if I understand well,
>  RSXNT is the effort of just one pearson  not of a team.

Hmm. Things *have* changed. 1.4 came out in Dec97. However, I haven't
checked the win3.X demos, just read the docs. Sounds like I should,
eh? Was it compiling or running them that didn't work?

The RS in RSX is Rainer Schnittke, so you're right that it's
essentially a one-man job. So is EMX, on the other hand (Eberhard
Matthes). And GCC is GCC, obviously. The core of RSXNT really isn't
that big, and since it's only needed to help us over the Win32s
problem, I'd say try it - if it works, it works...

>  2) What about DOS? Do you think that we really need a GUI console under 
>  Microsoft-something? 

For teaching, yes, we need the GUI. Some of us, anyway. If we could
move to Tcl/Tk, we might get rid of the awful win32 API. That's
not a one-night project though.

Still, the ESS-mode people will want a stdio type interface, and it is
also useful for batch processing, so it should get done at some point.

> A couple of week ago, I took a look to the
>  R code thinking to recompile it with DJGPP. I didn't try but it seems
>  possible. The advantages that I can see are:
>   a) DJGPP is stable, mature and supported. 
>   b) I have limited experence but dynamic linking with DJGPP works
>      better than under Windows. For me, of course. And I am not a 
>      Windows programmers. But, I was able to to build dyn. libs
>      which call routines in the main executable (and we need this
>      non only for call_R but also for R_alloc and S_alloc).
>      With, just 3 #define's its possible to use the dlopen/dlsym/dlclose
>      interface.

As long as you stay away from graphics/dynload/system(), it's
certainly possible. (One of my former colleagues has done it a year or
so back.) With RSXNT as well - I'm pretty sure I tried that
at some point.

In principle, this isn't too hard with DLL's either, once the
generation of relocatable DLL's and import/export libraries is in
place. Luke Tierney has a set of dl* compatibility routines on

http://www.stat.umn.edu/~luke/xls/projects/dlbasics/dlbasics.html

>   c) Same user interface under MsWindows and Unix (character+readline).

- but no scrollback on the console. This will turn out to be a major
problem in practice, I suspect.

>   d) DJGPP has g77.

There's one somewhere for RSXNT, I believe.

>   e) From DOS to WinNt, only one executable.

And win3/95 ? DOS box or?

>   Comments? I have no time for a couple of weeks, but, after, if you
>   think that can be a worth tentative, I can make  the first
>   attempt (manage to recompile the non-graphic part +
>   write a first draft for the graphic device if the previous
>   point go well).

Hmm. If I have any influence to exert, I think that I'd like you to
try to reach a definitive verdict over the RSXNT/Win3.x issues first.
You seem to be the most skilled person around, when it comes to these
matters.

If I find some time, I might give it a stab myself. There's a SAS
course (yeah...) coming up next week though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Apr 21 14:34:23 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 21 Apr 1998 08:34:23 -0500
Subject: R-beta: SEs for one-param MLE in R?
In-Reply-To: Martin Maechler's message of "Tue, 21 Apr 1998 11:51:28 +0200"
References: <199804210951.LAA00664@sophie.ethz.ch>
Message-ID: <6r90ozguxs.fsf@verdi.stat.wisc.edu>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> With  nls(.), this is quite different, I think.
> nls(.) has several nice features, (your "nls" did too!).
> Most notably, the calling syntax of nls(.) using model notation,
> is something I would want before I'd call a function "nls".

I have to admit to some bias here being one of the people who wrote
nls for S.  I find a couple of other features for nls to be very
helpful.  The "plinear" algorithm that profiles over any linear
parameters in the model can be very effective.  It doesn't always
converge in fewer iterations but it starts at values of the parameters
that are much closer to the optimum and it requires fewer starting
estimates to be calculated.

I have just finished preparing a short course on nonlinear regression
to be presented this weekend.  The slides are available at
	     http://franz.stat.wisc.edu/pub/NLME/Kansas/
Section 4 shows the use of some of the current and new facilties in
S for nonlinear regression.  

I refer in those slides to the nonlinear regression test cases at the
U.S. National Institutes of Standards and Technology (NIST) web site.
It is interesting to compare how numerical analysts view nonlinear
least squares with the approach of statisticians.  The NIST folks make
a big deal about using 128 bit arithmetic to produce "certified"
values of the parameter estimates.  In their favor they also produce
the approximate standard errors for the estimates but they don't seem
to notice that the estimates are things like 2.3 +/- 0.7 and they are
worrying about whether the 8th decimal place should be a 6 or a 7.
Also their idea of a "difficult" problem is to take a relatively easy
model fit and multiply all the starting estimates by 100.  In one
case, for the BoxBOD data where there is an increase to an asymptote,
all the responses are between 100 and 225 so they start the asymptote
at 1 and find it is difficult to converge.  With the "plinear"
algorithm you don't even need a starting estimate for the asymptote.

Those slides show the new approach to selfStart models in S.  We have
found that with a minimal effort it is possible to get convergence on
any of the examples on the NIST site simply by considering what the
parameters represent and by exploiting conditional (or "partial")
linearity.

For R it is still not clear to me how to manipulate the expressions
and functions.  I saw some of the discussion about function closures
and why it is not easy to coerce to a function but that is still black 
magic to me.  I regret that I am not likely to be able to take the
time to understand it better in the near future.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 21 19:11:45 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Apr 1998 20:11:45 +0200
Subject: Expressions and such
In-Reply-To: Douglas Bates's message of 21 Apr 1998 08:34:23 -0500
References: <199804210951.LAA00664@sophie.ethz.ch>
 <6r90ozguxs.fsf@verdi.stat.wisc.edu>
Message-ID: <x2wwcjcae6.fsf_-_@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> For R it is still not clear to me how to manipulate the expressions
> and functions.  I saw some of the discussion about function closures
> and why it is not easy to coerce to a function but that is still black 
> magic to me.  I regret that I am not likely to be able to take the
> time to understand it better in the near future.

You could always take Bill V's approach of blatantly claiming "this
can't be done in R" and watching the reaction... ;)

<tutorial audience=anyone>

Expressions are fairly easy: Just mentally convert them to LISP to
access the parse tree. Convert everything to function calls and
represent each as a list with the first element being the function
name and the others being it's arguments. (This is not particularly
useful to people who don't know Lisp, I know.)

This little function gets you some of the way, although it won't do
things like tagged arguments (it can certainly be improved in other
ways too):

> dissect                                           
function (e) 
{
        level <<- level + 1
        cat(substring("||||||||||||||||", 1, level))
        cat(deparse(e), "\n")
        if (is.call(e) || is.expression(e)) 
                for (i in 1:length(e)) dissect(e[[i]])
        level <<- level - 1
}
> level<- -1
> dissect(expression(1+2+3*4))
1 + 2 + 3 * 4 
|1 + 2 + 3 * 4 
||+ 
||1 + 2 
|||+ 
|||1 
|||2 
||3 * 4 
|||* 
|||3 
|||4 

e.g. like LISP's (+(+ 1 2)(* 3 4)). 

This is all pretty much like S. What was the problem in the first place?

</tutorial>

Regarding function coercion, I'm still unconvinced why this shouldn't
be possible. I'd kind of like to keep the "everything is a list"
paradigm. Obviously, one cannot keep perfect S compatibility (because
of the environment/closure issue), but some way of constructing a
function from it's arguments, body, and environment would be useful.

Many things are in fact possible if you are sneaky enough, e.g. here's
a list.to.envir conversion:

environment(eval(expression(function(){}),envir=list(a=1,b=2))))

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 21 23:11:06 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Apr 1998 00:11:06 +0200
Subject: R-0.61.1 compiled with egcs-mingw32
In-Reply-To: Peter Dalgaard BSA's message of 21 Apr 1998 14:56:37 +0200
References: <19980421085606.8796.qmail@sirio.stat.unipd.it>
 <x27m4je3ju.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2n2deq0zp.fsf@biostat.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> >  1) More than one year ago, hence, maybe, things are changed, I download
> >  RSXNT. However, I had problems to run its demo under MsWin3.1 (not under
> >  Win95). So, I prefered to give up. Just a limited experience, however.
> >  The other problem that I see is that, if I understand well,
> >  RSXNT is the effort of just one pearson  not of a team.
> 
> Hmm. Things *have* changed. 1.4 came out in Dec97. However, I haven't
> checked the win3.X demos, just read the docs. Sounds like I should,
> eh? Was it compiling or running them that didn't work?

Ok. Checked up on it now with 1.31 which is what I already had
installed. Essentially, "make" is a no-go on win32s, most likely due to
upper/lowercase issues, whereas the compiler and linker seems to work.
Some of the sample programs compiled on W95 do work OK, others die due
to missing comctr32.dll and the like, i.e. from trying to use
something that simply isn't there in win32s. So it's no good as a
development platform, but it should be quite possible to cross-develop
from win95.

> The RS in RSX is Rainer Schnittke,

Um. *Schnitker*. I thought it looked wrong...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Apr 24 14:03:10 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 24 Apr 1998 09:03:10 -0400
Subject: R-beta: exponentiation continued
References: <9804240824.AA30933@alpha.luc.ac.be>
Message-ID: <98Apr24.092140edt.13489@mailgate.bank-banque-canada.ca>

>I have now tried the same thing on Red Hat 4.1 with R 0.61.1 and there
>is no problem. Hence I agree that it is Red Hat 5 libc. Thanks.

I haven't tried Red Hat 5 yet, in part because I thought it was necessary to
switch from libc to libgc and I'm not looking forward to that headache. Could
this be the problem?

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 24 14:28:44 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Apr 1998 15:28:44 +0200
Subject: R-beta: exponentiation continued
In-Reply-To: Paul Gilbert's message of Fri, 24 Apr 1998 09:03:10 -0400
References: <9804240824.AA30933@alpha.luc.ac.be>
 <98Apr24.092140edt.13489@mailgate.bank-banque-canada.ca>
Message-ID: <x27m4f8i2b.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> >I have now tried the same thing on Red Hat 4.1 with R 0.61.1 and there
> >is no problem. Hence I agree that it is Red Hat 5 libc. Thanks.
> 
> I haven't tried Red Hat 5 yet, in part because I thought it was necessary to
> switch from libc to libgc and I'm not looking forward to that headache. Could
> this be the problem?

Most likely, that is exactly what it is, and the ^C-works-once problem
likewise.

If we at all can, we should try and extract some tiny test problems
that show the effect and submit them to the glibc maintainers. First
we'd want to see if it has been solved in the current updates, though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Apr 24 17:49:40 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 24 Apr 1998 12:49:40 -0400
Subject: Warning: ignored non function "scale"
Message-ID: <98Apr24.130723edt.13444@mailgate.bank-banque-canada.ca>

I've been working on a revised version of prcomp and princomp. Below is my
current draft of prcomp,  which is marginally different from V&R. I've added
center and scale as optional arguments. However, scale causes the following:

> zi _ prcomp(iris[,,2])
Warning: ignored non function "scale"

because scale is both a variable and a function. Is there any way to avoid this
error message and still keep the name scale for both the argument and the name
of the function?

Paul Gilbert
______

prcomp <- function(x, retx=TRUE, center=TRUE, scale=FALSE) {
 s <- svd(scale(x, center=center, scale=scale),nu=0)
# rank <- sum(s$d > 0)
 rank <- sum(s$d > (s$d[1]*sqrt(.Machine$double.eps)))
 if (rank < ncol(x)) s$v <- s$v[,1:rank]
 s$d <- s$d/sqrt(max(1,nrow(x) -1))
 if(retx) list(sdev=s$d, rotation=s$v, x=x %*% s$v)
 else     list(sdev=s$d, rotation=s$v)
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 24 18:11:03 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Apr 1998 19:11:03 +0200
Subject: Warning: ignored non function "scale"
In-Reply-To: Paul Gilbert's message of Fri, 24 Apr 1998 12:49:40 -0400
References: <98Apr24.130723edt.13444@mailgate.bank-banque-canada.ca>
Message-ID: <x2zphb6t7c.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I've been working on a revised version of prcomp and princomp. Below is my
> current draft of prcomp,  which is marginally different from V&R. I've added
> center and scale as optional arguments. However, scale causes the following:
> 
> > zi _ prcomp(iris[,,2])
> Warning: ignored non function "scale"
> 
> because scale is both a variable and a function. Is there any way to avoid this
> error message and still keep the name scale for both the argument and the name
> of the function?

There are several. One, which has been used in other parts of R is to
lengthen the formal argument a bit, e.g. "scale.it" which - since
there's no "..." part can be truncate to, say, "scale". 

Another option is to explicitly fetch the function scale() using
get("scale","package:base") or get("scale",envir=.GlobalEnv). Anything
not including the functions local variables should do the trick.

Actually, I think that the first of the above get()s needs to be 

get("scale",match("package:base",search()))

hmmm, shouldn't we make pos.to.env accept character variables?


> prcomp <- function(x, retx=TRUE, center=TRUE, scale=FALSE) {
>  s <- svd(scale(x, center=center, scale=scale),nu=0)
> # rank <- sum(s$d > 0)
>  rank <- sum(s$d > (s$d[1]*sqrt(.Machine$double.eps)))
>  if (rank < ncol(x)) s$v <- s$v[,1:rank]
>  s$d <- s$d/sqrt(max(1,nrow(x) -1))
>  if(retx) list(sdev=s$d, rotation=s$v, x=x %*% s$v)
>  else     list(sdev=s$d, rotation=s$v)
> }

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Apr 28 16:11:18 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 28 Apr 1998 11:11:18 -0400
Subject: princomp
Message-ID: <98Apr28.113103edt.13450@mailgate.bank-banque-canada.ca>

Below is a draft of a function "princomp" which reproduces Splus 3.3 results. In
writing this I have found there is an certain inconsistency in the scaling (N vs
N-1) used when cor is T or F. The net result is that for data which has already
been scaled (so cor=cov) the function gives slightly different results depending
on whether the argument cor is T or F. I have some reluctance in reproducing
this behavior, and perhaps someone could check if it has been changed in a more
recent version of Splus:

> z <- scale(iris[,,2], scale=T, center=T)
> z1 <- princomp(z, cor=F)
> z2 <- princomp(z, cor=T)
> z1$sdev
   Comp.1    Comp.2    Comp.3    Comp.4
1.6934621 0.7316756 0.6221717 0.3601935
> z2$sdev
   Comp.1    Comp.2    Comp.3    Comp.4
1.7106550 0.7391040 0.6284883 0.3638504

I have at leasted tried to make the inconsistency obvious in the code, and
document it. Any other thoughts would be appreciated.

Paul Gilbert
______


princomp <- function(x, cor=FALSE, scores=TRUE,
   subset=rep(TRUE, nrow(as.matrix(x)))) {
 z<- as.matrix(x)[subset,, drop=F]
 N <- nrow(z)
 if(cor) cv <- get("cor",envir=.GlobalEnv)(z)
 else    cv <- cov(z)
#  (svd can be used but gives different signs for some vectors)
 edc <- eigen(cv)
 cn <- paste("Comp.", 1:ncol(cv), sep="")
 names(edc$values) <- cn
 dimnames(edc$vectors) <- list(dimnames(x)[[2]], cn)
 scr<- NULL
 if (cor)
   {sdev <- sqrt(edc$values)
    sc <- (apply(z,2,var)*(N-1)/N)^0.5
    if (scores)
        scr<-(scale(z,center=T,scale=T) %*% edc$vectors)*sqrt(N/(N-1))
   }
 else
   {sdev <- sqrt(edc$values*(N-1)/N)
    sc <- rep(1, ncol(z))
    if (scores)
        scr<- (scale(z,center=T,scale=F) %*% edc$vectors)
   }
 names(sc) <- dimnames(x)[[2]]
 edc <-list(sdev=sdev, loadings=edc$vectors,
     center=apply(z,2,mean), scale=sc, n.obs=N, scores=scr)
# The splus function also return list elements factor.sdev, correlations
# and coef, but these are not documented in the help. coef seems to equal
# load. The splus function also return list elements call and terms which
# are not supported here.
 class(edc) <- "princomp"
 edc
}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr  1 16:23:21 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Apr 1998 17:23:21 +0200
Subject: R-tk mailing list
Message-ID: <x2zpi5bm6u.fsf@blueberry.kubism.ku.dk>


This is to announce that Martin Maechler has set up a new mailing list
with the purpose of investigating the possibility to use Tcl/Tk with
R.

As you may know, Tcl is a scripting language and Tk is its GUI
toolkit. In the context of R, the main attractions are
	- portability X/Win3.1/Win32/Mac
	- ease of implementation (people say...)
	- nice GUI model of Tk
	- possibility of making language bindings, i.e. extending R
	  itself into a GUI programming language

The potential detractions are (we hope that these will be less
important or at least diminish with time, of course)
	- inefficiency?
	- the Tcl language, which many aren't too happy with

I guess that a sensible prioritization/sequencing of the work could be
(not that I'm trying to take control or anything...)

1) Getting a simple Tk Console running with R
2) Device driver for a TkCanvas graphics widget 
3) Looking at the glue mechanisms used in e.g. STk (Scheme/Tk)
4) Designing R/Tk interface functions

To join up, send a one-line message containing the word "subscribe" to
R-tk-request@stat.math.ethz.ch (in the *body*, not the subject).
	
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Apr  1 18:09:51 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 1 Apr 1998 09:09:51 -0800 (PST)
Subject: R-beta: Not loading C library
In-Reply-To: <x2afa6a483.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SUN.3.95.980401085119.12211A-100000@chekov>

On 1 Apr 1998, Peter Dalgaard BSA wrote:
> 
> Argh. Right. The .Dyn.libs problem is still in 0.61.2. Like Martin, I
> could have *sworn* that it was fixed...

It's still in pre0.62 as well.  
 
> A workaround is simply to remove .Dyn.libs in the startup code. It
> should suffice to change the system Rprofile by having something like
> this in it:
 
How about putting .Dyn.libs in the "Autoloads" environment? That way it
will be accessible and modifiable but it will go away when you quit R.
It's a little inelegant, but it works and it's a lot better than the
current situation.

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Wed Apr  1 19:34:46 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Wed, 1 Apr 1998 12:34:46 -0600 (CST)
Subject: line plot with NA
Message-ID: <Pine.OSF.3.95.980401122715.17690A-100000@io.uwinnipeg.ca>

I have the following data:

intens<-c(28000,72000,120000,150000,180000,260000,310000) #Td

peakcb<-c(1.2,2.5,2.7,3.7,5.6,6.2,6.8) #presses/s
peakan<-c(0.5,3.7,5.1,5.8,7.4,NA,8.4)

(See why I am using NA? I can work around this problem by using
intensityan and intensitycb)

Now do a plot of peakan:
plot(intensity, peakan, pch=10,type="b") 

The plot skips the point (260000,NA), but no  line beyond x=260,000.

I think the behaviour should be to draw a line between (180000,7.4) and
(310000,8.4).

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@math.sc.edu  Wed Apr  1 21:29:08 1998
From: rossini@math.sc.edu (Anthony Rossini)
Date: 01 Apr 1998 15:29:08 -0500
Subject: line plot with NA
In-Reply-To: Bill Simpson's message of "Wed, 1 Apr 1998 12:34:46 -0600 (CST)"
References: <Pine.OSF.3.95.980401122715.17690A-100000@io.uwinnipeg.ca>
Message-ID: <wncn2e58ewb.fsf@fhat.stat.sc.edu>


>>>>> "Bill" == Bill Simpson <wsimpson@uwinnipeg.ca> writes:

    Bill> (See why I am using NA? I can work around this problem by using
    Bill> intensityan and intensitycb)

    Bill> Now do a plot of peakan:
    Bill> plot(intensity, peakan, pch=10,type="b") 

    Bill> The plot skips the point (260000,NA), but no  line beyond x=260,000.

    Bill> I think the behaviour should be to draw a line between
    Bill> (180000,7.4) and (310000,8.4).

I respectfully disagree.  If the data were in fact longitudinal data,
with missing observations, one valid scenario would be to halt, which
is what is happening.  

Maybe a na.omit flag would be appropriate for plot?  (is there one?
I'm just speculating, not having easy access to R or Splus today).

best,
-tony

--
Anthony Rossini
Manifold Graphics / Epimetrics
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oncley@atd.ucar.edu  Thu Apr  2 01:20:54 1998
From: oncley@atd.ucar.edu (Steve Oncley)
Date: Wed, 1 Apr 1998 17:20:54 -0700 (MST)
Subject: attributes now inherited
Message-ID: <199804020020.RAA07324@clover.atd.ucar.edu>

Hi R-Developers,

After my message about a month ago concerning attributes being lost during
simple operations, Martin Maechler invited me to fix the code if I was in 
a hurry (especially for attributes in general).  We've just made the 
following changes here, which appear to implement the rules in the 
Blue Book (pg. 257) 

Enclosed is the output from "diff -c" from /R-0.61.1/src for:
main/arithmetic.c 	(calls my new routine based on Blue Book rules)
main/attrib.c 		(I added a new routine: copyMostAttrib)
main/complex.c 		(calls my new routine based on Blue Book rules)
include/Defn.h 		(one line addition to define copyMostAttrib)

We hope you will find this useful and install it in the next R release.

...Steve Oncley and Gordon Maclean
National Center for Atmospheric Research
Boulder, Colorado USA
(where the sun will soon set into the mountains)

**************************************************************************

*** arithmetic.c	Mon Nov 10 19:35:01 1997
--- /net/aster/R/src/main/arithmetic.c	Wed Apr  1 16:33:27 1998
***************
*** 428,433 ****
--- 428,443 ----
  	else
  		ans = allocVector(INTSXP, n);
  
+         /* copy attributes from longest argument */
+ 	if (n1 > n2)
+               copyMostAttrib(s1, ans);
+ 	else if (n1 == n2) {
+               copyMostAttrib(s2, ans);
+               copyMostAttrib(s1, ans);
+ 	}
+         else
+               copyMostAttrib(s2, ans);
+ 
  	if (n1 < 1 || n2 < 1) {
  		for (i = 0; i < n; i++)
  			INTEGER(ans)[i] = NA_INTEGER;
***************
*** 531,536 ****
--- 541,557 ----
  	PROTECT(s1);
  	PROTECT(s2);
  	ans = allocVector(REALSXP, n);
+ 
+         /* copy attributes from longest argument */
+ 	if (n1 > n2)
+               copyMostAttrib(s1, ans);
+ 	else if (n1 == n2) {
+               copyMostAttrib(s2, ans);
+               copyMostAttrib(s1, ans);
+ 	}
+         else
+               copyMostAttrib(s2, ans);
+ 
  	UNPROTECT(2);
  
  	if (n1 < 1 || n2 < 1) {

**************************************************************************

*** attrib.c	Mon Dec  8 02:36:53 1997
--- /net/aster/R/src/main/attrib.c	Wed Apr  1 16:43:28 1998
***************
*** 114,119 ****
--- 114,141 ----
  		return installAttrib(vec, name, val);
  }
  
+ SEXP copyMostAttrib(SEXP inp, SEXP ans)
+ {
+   /* This is called in the case of binary operations to copy most
+      attributes from (one of) the input arguments to the output.
+      Note that the Dim and Names attributes should have been assigned
+      elsewhere. */
+         SEXP s, t, u;
+ 
+ 	PROTECT(inp);
+ 	PROTECT(ans);
+ 
+ 	for (s=ATTRIB(inp); s!=R_NilValue; s=CDR(s)) {
+ 	  if ( (TAG(s) != R_NamesSymbol) &&
+ 	       (TAG(s) != R_DimSymbol) &&
+  	       (TAG(s) != R_DimNamesSymbol) ) {
+ 	    installAttrib(ans, TAG(s), CAR(s));
+ 	  }
+ 	}
+ 	UNPROTECT(2);
+         return;
+ }
+ 
  static SEXP installAttrib(SEXP vec, SEXP name, SEXP val)
  {
  	SEXP s, t;

**************************************************************************

*** complex.c	Wed Sep 17 22:37:02 1997
--- /net/aster/R/src/main/complex.c	Wed Apr  1 16:33:28 1998
***************
*** 104,109 ****
--- 104,121 ----
  	PROTECT(s1);
  	PROTECT(s2);
  	ans = allocVector(CPLXSXP, n);
+ 
+        /* copy attributes from longest argument */
+         if (n1 > n2)
+               copyMostAttrib(s1, ans);
+         else if (n1 == n2) {
+               copyMostAttrib(s2, ans);
+               copyMostAttrib(s1, ans);
+         }
+         else
+               copyMostAttrib(s2, ans);
+ 
+ 
  	UNPROTECT(2);
  
  	if (n1 < 1 || n2 < 1) {

**************************************************************************

*** Defn.h	Thu Jan  8 20:42:58 1998
--- /net/aster/R/src/include/Defn.h	Wed Apr  1 16:49:55 1998
***************
*** 459,464 ****
--- 459,465 ----
  SEXP cons(SEXP, SEXP);
  void copyListMatrix(SEXP, SEXP, int);
  void copyMatrix(SEXP, SEXP, int);
+ SEXP copyMostAttrib(SEXP, SEXP);
  void copyVector(SEXP, SEXP);
  SEXP CreateTag(SEXP);
  void CustomPrintValue(SEXP);
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Apr  2 05:49:34 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 2 Apr 1998 16:49:34 +1200 (NZST)
Subject: attributes now inherited
Message-ID: <199804020449.QAA19868@stat1.stat.auckland.ac.nz>

Thanks very much for the patches.  I have made the changes to the
sources for the current development version (0.62).

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Apr  2 17:03:47 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 2 Apr 1998 11:03:47 -0500
Subject: prcomp
Message-ID: <98Apr2.110959est.13445@mailgate.bank-banque-canada.ca>

I've noticed that the arguments and result list of prcomp in the mva package
(with 61.1) are not quite the same as in the Blue Book and in Splus. Is this
intentional or can I change it? If I change it who should I send the code to?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Apr  2 17:46:39 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 2 Apr 1998 18:46:39 +0200
Subject: prcomp;  send patches to whom?
In-Reply-To: <98Apr2.110959est.13445@mailgate.bank-banque-canada.ca> (message
 from Paul Gilbert on Thu, 2 Apr 1998 11:03:47 -0500)
Message-ID: <199804021646.SAA03511@sophie.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I've noticed that the arguments and result list of prcomp in the
    PaulG> mva package (with 61.1) are not quite the same as in the Blue
    PaulG> Book and in Splus. Is this intentional or can I change it? If I
    PaulG> change it who should I send the code to?

I think for small things like this, the best is to post 
diffs (diff -cb  or  diff -ubBw  if the latter works) to this mailing list.

Bigger things could be sent to "R-core@stat.math.ethz.ch"
 (the people who can actually change the sources in Auckland...).

Thanks for your offer to fix this yourself!
Optimally, you'd also send a patch for the help file (man/prcomp.Rd)!

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Apr  2 19:15:48 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 2 Apr 1998 13:15:48 -0500
Subject: f2c
Message-ID: <98Apr2.132201est.13448@mailgate.bank-banque-canada.ca>

I have a problem with my dynamically loaded code in R not finding pow_ii, which
for some time I thought was because library f2c is not on my Sparcstation.
However, I have now been experiencing the same problem in Linux, with all the
proper libraries in place.

My incomplete understanding of elf and shared libraries does not help, but when
compiling a complete program I usually muddle through. However, in the case of
dynamically loading code into R, I am not sure whether it is my dse.so or R
which should have the knowledge of where to find /usr/lib/libf2c.so*. I haven't
had much success trying to configure so that that information is in dse.so. None
of the usual things seem to help, so I suspect R itself needs to be able to find
the library. If someone can explain this I would very much appreciate it.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Apr  2 19:20:38 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 2 Apr 1998 20:20:38 +0200
Subject: line plot with NA
In-Reply-To: <wncn2e58ewb.fsf@fhat.stat.sc.edu> (message from Anthony Rossini
 on 01 Apr 1998 15:29:08 -0500)
Message-ID: <199804021820.UAA03706@sophie.ethz.ch>

>>>>> "tony" == Anthony Rossini <rossini@math.sc.edu> writes:

>>>>> "Bill" == Bill Simpson <wsimpson@uwinnipeg.ca> writes:

    Bill> (See why I am using NA? I can work around this problem by using
    Bill> intensityan and intensitycb)

    Bill> Now do a plot of peakan: plot(intensity, peakan, pch=10,type="b")

    Bill> The plot skips the point (260000,NA), but no line beyond
    Bill> x=260,000.

    Bill> I think the behaviour should be to draw a line between
    Bill> (180000,7.4) and (310000,8.4).

    tony> I respectfully disagree.  If the data were in fact longitudinal
    tony> data, with missing observations, one valid scenario would be to
    tony> halt, which is what is happening.

I'm with Tony (and the  S(-plus) developers are, too).
Bill, note that the current behavior is really the desired one
in typical time-series situations with missing values:
The missing values *are* graphically missing, 
which you would really want, especially in exploratory sitatuations.
((we had quite a few data analysis projects with enviromental data over
  time, where it was important to visualize the "measurement gaps")).

    tony> Maybe a na.omit flag would be appropriate for plot?  (is there
    tony> one?  I'm just speculating, not having easy access to R or Splus
    tony> today).

There's none, currently (neither R nor S-plus).

In R ( version >= 0.62 ,  == UNSTABLE)
you could use

	 plot(peakan ~ intens, subset = !is.na(peakan), pch=10,type="b")

to get the result you want.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Apr  2 19:36:56 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 02 Apr 1998 12:36:56 -0600
Subject: f2c
In-Reply-To: Paul Gilbert's message of Thu, 2 Apr 1998 13:15:48 -0500
References: <98Apr2.132201est.13448@mailgate.bank-banque-canada.ca>
Message-ID: <6rlntot6if.fsf@verdi.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I have a problem with my dynamically loaded code in R not finding pow_ii, which
> for some time I thought was because library f2c is not on my Sparcstation.
> However, I have now been experiencing the same problem in Linux, with all the
> proper libraries in place.
> 
> My incomplete understanding of elf and shared libraries does not help, but when
> compiling a complete program I usually muddle through. However, in the case of
> dynamically loading code into R, I am not sure whether it is my dse.so or R
> which should have the knowledge of where to find /usr/lib/libf2c.so*. I haven't
> had much success trying to configure so that that information is in dse.so. None
> of the usual things seem to help, so I suspect R itself needs to be able to find
> the library. If someone can explain this I would very much appreciate it.

One thing you can do is to check the R.binary file with "nm -g" to find
out what symbols are defined in it.  On my machine R.binary includes
pow_dd and pow_di but not pow_ii.

$ nm -g R.binary
...
08108c30 T pnt
         U popen
080ef370 T pow_dd
080ef460 T pow_di
08106c80 T ppois
...

This means that you will have to include a reference to the f2c library
when you are making the dse.so object.  I'm not sure of the sequence
invoked by "R INSTALL dse" but it may be that you can override the
library specification in the makefile by exporting an appropriate
value for the environment variable SHLIBLDFLAGS.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Thu Apr  2 19:48:27 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Thu, 2 Apr 1998 12:48:27 -0600 (CST)
Subject: line plot with NA
In-Reply-To: <199804021820.UAA03706@sophie.ethz.ch>
Message-ID: <Pine.OSF.3.95.980402124638.26975B-100000@io.uwinnipeg.ca>

OK Thanks for the responses.

Both Tony and Martin mentioned time series as the rationale for the
current behaviour.  That's not what I'm doing. Anyway if R is consistent
with S-Plus that's fine, I just was surprised by this.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Apr  2 21:04:02 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 3 Apr 1998 08:04:02 +1200 (NZST)
Subject: prcomp
Message-ID: <199804022004.IAA29592@stat1.stat.auckland.ac.nz>

	From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
	MIME-Version: 1.0
	To: R-devel <R-devel@stat.math.ethz.ch>
	Subject: prcomp

	I've noticed that the arguments and result list of prcomp in
	the mva package (with 61.1) are not quite the same as in the
	Blue Book and in Splus. Is this intentional or can I change it?
	If I change it who should I send the code to?

The present prcomp is a compromise between the Splus prcomp and
princomp (I didn't know about princomp and felt that prcomp wasn't
satisfactory).  I suppose each of these have their place, but I don't
really like the idea of having two functions, it just makes it harder
for users.

As for the "who"; post it to r-devel.  This gives a chance for anyone
interested to review it.  You may need to ask a week or so later
whether anyone with commit rights has committed it.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Apr  2 21:16:24 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 3 Apr 1998 08:16:24 +1200 (NZST)
Subject: f2c
Message-ID: <199804022016.IAA29773@stat1.stat.auckland.ac.nz>

> To: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> Cc: R-devel <R-devel@stat.math.ethz.ch>
> Subject: Re: f2c
> From: Douglas Bates <bates@stat.wisc.edu>
> Date: 02 Apr 1998 12:36:56 -0600

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
>
> > I have a problem with my dynamically loaded code in R not finding
> > pow_ii, which for some time I thought was because library f2c is
> > not on my Sparcstation.  > > However, I have now been experiencing
> > the same problem in Linux, with all the  proper libraries in place.
> > 
> > My incomplete understanding of elf and shared libraries does not
> > help, but when compiling a complete program I usually muddle through.
> > However, in the case of dynamically loading code into R, I am not
> > sure whether it is my dse.so or R which should have the knowledge
> > of where to find /usr/lib/libf2c.so*. I haven't  had much success
> > trying to configure so that that information is in dse.so. None
> > of the usual things seem to help, so I suspect R itself needs to
> > be able to find the library. If someone can explain this I would
> > very much appreciate it.

DB> One thing you can do is to check the R.binary file with "nm -g" to find
DB> out what symbols are defined in it.  On my machine R.binary includes
DB> pow_dd and pow_di but not pow_ii.

This is a general problem we need a solution to.  Recently, Kurt Hornik
has changed the configuration procedures so that fortran is located and
used to load R.  I thought this would fix this kind of problem.
(Any references to fortran things like pow_ii should be removed from the
C sources).

I'd suggest that you get in touch with Kurt directly:
	Kurt.Hornik@ci.tuwien.ac.at
to sort this out.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Fri Apr  3 08:20:07 1998
From: gb@stat.umu.se (Goran Brostrom)
Date: Fri, 3 Apr 1998 09:20:07 +0200 (MET DST)
Subject: R-beta: Bug in dhyper (and phyper) (fwd)
Message-ID: <Pine.GSO.3.95.980403091231.24285A-100000@pc30.stat.umu.se>


Last night I sent the bug report below to r-help. I have since then looked
at dhyper.c and found:

        if (NR < 0 || NB < 0 || n <= 0 || n > N)
                DOMAIN_ERROR;

I changed 'n <= 0' to 'n < 0' and then dhyper worked as I wanted. Am I
introducing some potentially dangerous behaviour by this change?

Goran
----------------------------------------------------------------------
I think I have found a bug in the function dhyper (R-0.61.2):

R> dhyper(0,3,3,0)
Warning: NAs produced in function "dhyper"
[1] NA

Documentation:

"Usage

dhyper(x, N1, N2, n)

.......

The hypergeometric distribution is used for sampling without replacement. 
It has density 

  p(x) = Choose(N1, x) Choose(N2, n-x) / Choose(N1+N2, n)

for x = 0,...,n"

R> choose(3,0) * choose(3,0) / choose(6,0)
[1] 1

This result is correct, and obviously dhyper is implemented in some way 
not consistent with the documentation.

Also note the spelling error of 'choose' in the documentation.

---
Goran Brostrom                         phone : +46 90 7865223
Department of Statistics                              7865213 (secr)
Umea University                        fax   :        7866614
S-90187 Umea, Sweden                   e-mail: gb@stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Apr  3 08:22:53 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 3 Apr 1998 09:22:53 +0200
Subject: Bug in dhyper (and phyper) (fwd) -- and patch
In-Reply-To: <Pine.GSO.3.95.980403091231.24285A-100000@pc30.stat.umu.se>
 (message from Goran Brostrom on Fri, 3 Apr 1998 09:20:07 +0200 (MET
 DST))
Message-ID: <199804030722.JAA00409@sophie.ethz.ch>

>>>>> "GB" == Goran Brostrom <gb@stat.umu.se> writes:

    GB> Last night I sent the bug report below to r-help. I have since then
    GB> looked at dhyper.c and found:

    GB>         if (NR < 0 || NB < 0 || n <= 0 || n > N) DOMAIN_ERROR;

    GB> I changed 'n <= 0' to 'n < 0' and then dhyper worked as I
    GB> wanted. Am I introducing some potentially dangerous behaviour by
    GB> this change?

No, I think your change was correct.
Thanks a lot for your fix!

I'm going to put your change into the 0.62 unstable version of R.

What's the typo in the documentation you mentioned (below, at the end)?
[you may answer to me privately..]


Martin Maechler <maechler@stat.math.ethz.ch>			<><
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086
http://www.stat.math.ethz.ch/~maechler/



    GB> ----------------------------------------------------------------------

    GB> I think I have found a bug in the function dhyper (R-0.61.2):

    R> dhyper(0,3,3,0)
    GB> Warning: NAs produced in function "dhyper" [1] NA

    GB> Documentation:

    GB> "Usage

    GB> dhyper(x, N1, N2, n)

    GB> .......

    GB> The hypergeometric distribution is used for sampling without
    GB> replacement.  It has density

    GB>   p(x) = Choose(N1, x) Choose(N2, n-x) / Choose(N1+N2, n)

    GB> for x = 0,...,n"

    R> choose(3,0) * choose(3,0) / choose(6,0)
    GB> [1] 1

    GB> This result is correct, and obviously dhyper is implemented in some
    GB> way not consistent with the documentation.

    GB> Also note the spelling error of 'choose' in the documentation.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Fri Apr  3 21:56:08 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Fri, 3 Apr 1998 14:56:08 -0600 (CST)
Subject: cex and pch=1
Message-ID: <Pine.OSF.3.95.980403144616.10428A-101000@io.uwinnipeg.ca>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--0-375965957-891636968=:10428
Content-Type: TEXT/PLAIN; charset=US-ASCII

I do
par(cex=2,mex=.7)
when I have the plotsymbols pch=1 and pch=16 (empty and filled circles).

In x11() the plot looks fine.  But see the attachment to see how it is
saved.  I saved it with:
dev.print(horizontal=F,width=7,height=7,file="rstuff/data/varyflash/peak.ps")

The biggest problem is that the empty circles are now twice the diameter
of the filled circles.

(Also the text labels got shifted upwards and the left axis label is
clipped--latter problem can be fixed I guess by fooling around with mai or
mar.)

BTW is there any way to get the empty circles to be opaque?

Thanks for any help!

Bill Simpson

--0-375965957-891636968=:10428
Content-Type: APPLICATION/PostScript; name="peak.ps"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.OSF.3.95.980403145608.10428B@io.uwinnipeg.ca>
Content-Description: 

JSFQUy1BZG9iZS0zLjAKJSVEb2N1bWVudEZvbnRzOiBIZWx2ZXRpY2EgSGVs
dmV0aWNhLUJvbGQgSGVsdmV0aWNhLU9ibGlxdWUKJSUrIEhlbHZldGljYS1C
b2xkT2JsaXF1ZSBTeW1ib2wKJSVEb2N1bWVudE1lZGlhOiBsZXR0ZXIgNjEy
IDc5MiAwICgpCiUlVGl0bGU6IFIgR3JhcGhpY3MgT3V0cHV0CiUlQ3JlYXRv
cjogUiBTb2Z0d2FyZQolJVBhZ2VzOiAoYXRlbmQpCiUlT3JpZW50YXRpb246
IFBvcnRyYWl0CiUlQm91bmRpbmdCb3g6IDE4IDEwOCA1OTQgNjg0CiUlRW5k
Q29tbWVudHMKJSVCZWdpblByb2xvZwovZ3MgIHsgZ3NhdmUgfSBkZWYKL2dy
ICB7IGdyZXN0b3JlIH0gZGVmCi9icCAgeyBncyB9IGRlZgovZXAgIHsgc2hv
d3BhZ2UgZ3IgfSBkZWYKL20gICB7IG1vdmV0byB9IGRlZgovbCAgIHsgbGlu
ZXRvIH0gZGVmCi9ucCAgeyBuZXdwYXRoIH0gZGVmCi9jcCAgeyBjbG9zZXBh
dGggfSBkZWYKL2YgICB7IGZpbGwgfSBkZWYKL28gICB7IHN0cm9rZSB9IGRl
ZgovY2YgIHsgbmV3cGF0aCAwIDM2MCBhcmMgZmlsbCB9IGRlZgovY28gIHsg
bmV3cGF0aCAwIDM2MCBhcmMgc3Ryb2tlIH0gZGVmCi9yICAgeyAzIGluZGV4
IDMgaW5kZXggbW92ZXRvIDEgaW5kZXggNCAtMSByb2xsCiAgICAgICBsaW5l
dG8gZXhjaCAxIGluZGV4IGxpbmV0byBsaW5ldG8gY2xvc2VwYXRoIH0gZGVm
Ci9yZiAgeyByIGYgfSBkZWYKL3JvICB7IHIgbyB9IGRlZgovdCAgIHsgNiAt
MiByb2xsIG1vdmV0byBnc2F2ZSAzIGluZGV4IHRydWUKICAgICAgIGNoYXJw
YXRoIGZsYXR0ZW5wYXRoIHBhdGhiYm94IGdyZXN0b3JlIGdzYXZlCiAgICAg
ICA1IC0xIHJvbGwgcm90YXRlIDYgLTEgcm9sbCBuZWcgMyAtMSByb2xsIDUg
LTEKICAgICAgIHJvbGwgc3ViIG11bCA0IC0xIHJvbGwgbmVnIDMgLTEgcm9s
bCA0IC0xIHJvbGwKICAgICAgIHN1YiBtdWwgcm1vdmV0byBzaG93IGdyZXN0
b3JlIH0gZGVmCi9jbCAgeyBpbml0Y2xpcCBuZXdwYXRoIDMgaW5kZXggMyBp
bmRleCBtb3ZldG8gMSBpbmRleAogICAgICAgNCAtMSByb2xsIGxpbmV0byAg
ZXhjaCAxIGluZGV4IGxpbmV0byBsaW5ldG8KICAgICAgIGNsb3NlcGF0aCBj
bGlwIG5ld3BhdGggfSBkZWYKL3JnYiB7IHNldHJnYmNvbG9yIH0gZGVmCi9z
ICAgeyBzY2FsZWZvbnQgc2V0Zm9udCB9IGRlZgovUiAgIHsgL0hlbHZldGlj
YSBmaW5kZm9udCB9IGRlZgovQiAgIHsgL0hlbHZldGljYS1Cb2xkIGZpbmRm
b250IH0gZGVmCi9JICAgeyAvSGVsdmV0aWNhLU9ibGlxdWUgZmluZGZvbnQg
fSBkZWYKL0JJICB7IC9IZWx2ZXRpY2EtQm9sZE9ibGlxdWUgZmluZGZvbnQg
fSBkZWYKL1MgICB7IC9TeW1ib2wgZmluZGZvbnQgfSBkZWYKJSVFbmRQcm9s
b2cKJSVQYWdlOiAxIDEKYnAKUiAxMCBzCjAuNzUgc2V0bGluZXdpZHRoCjAu
MDAwMCAwLjAwMDAgMC4wMDAwIHJnYgo3NS40MCAxNzkuNDAgNTY0LjYwIDYy
Ni42MCBjbAo3NS40MCAxNzkuNDAgNTY0LjYwIDYyNi42MCBjbApbXSAwIHNl
dGRhc2gKOTMuNTIgMjIwLjMyIDExLjAxIGNvCltdIDAgc2V0ZGFzaAoxNjQu
MTkgMzc2LjIxIDExLjAxIGNvCltdIDAgc2V0ZGFzaAoyNDEuMjkgNDQ0LjQx
IDExLjAxIGNvCltdIDAgc2V0ZGFzaAoyODkuNDggNDc4LjUxIDExLjAxIGNv
CltdIDAgc2V0ZGFzaAozMzcuNjcgNTU2LjQ1IDExLjAxIGNvCltdIDAgc2V0
ZGFzaAo1NDYuNDggNjA1LjE3IDExLjAxIGNvCjE4LjAwIDEwOC4wMCA1OTQu
MDAgNjg0LjAwIGNsCltdIDAgc2V0ZGFzaApucAoxMjguODYgMTc5LjQwIG0K
NTMwLjQyIDE3OS40MCBsCm8KW10gMCBzZXRkYXNoCm5wCjEyOC44NiAxNzku
NDAgbQoxMjguODYgMTcyLjQwIGwKbwpbXSAwIHNldGRhc2gKbnAKMjA5LjE3
IDE3OS40MCBtCjIwOS4xNyAxNzIuNDAgbApvCltdIDAgc2V0ZGFzaApucAoy
ODkuNDggMTc5LjQwIG0KMjg5LjQ4IDE3Mi40MCBsCm8KW10gMCBzZXRkYXNo
Cm5wCjM2OS43OSAxNzkuNDAgbQozNjkuNzkgMTcyLjQwIGwKbwpbXSAwIHNl
dGRhc2gKbnAKNDUwLjExIDE3OS40MCBtCjQ1MC4xMSAxNzIuNDAgbApvCltd
IDAgc2V0ZGFzaApucAo1MzAuNDIgMTc5LjQwIG0KNTMwLjQyIDE3Mi40MCBs
Cm8KUiAyNCBzCjEyOC44NiAxNTIuODAgKDUwKSAwLjUwIDAuMDAgMC4wMCB0
CjIwOS4xNyAxNTIuODAgKDEwMCkgMC41MCAwLjAwIDAuMDAgdAoyODkuNDgg
MTUyLjgwICgxNTApIDAuNTAgMC4wMCAwLjAwIHQKMzY5Ljc5IDE1Mi44MCAo
MjAwKSAwLjUwIDAuMDAgMC4wMCB0CjQ1MC4xMSAxNTIuODAgKDI1MCkgMC41
MCAwLjAwIDAuMDAgdAo1MzAuNDIgMTUyLjgwICgzMDApIDAuNTAgMC4wMCAw
LjAwIHQKW10gMCBzZXRkYXNoCm5wCjc1LjQwIDE5NS45NiBtCjc1LjQwIDU4
NS42OCBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDE5NS45NiBtCjY4LjQw
IDE5NS45NiBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDI5My4zOSBtCjY4
LjQwIDI5My4zOSBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDM5MC44MiBt
CjY4LjQwIDM5MC44MiBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDQ4OC4y
NSBtCjY4LjQwIDQ4OC4yNSBsCm8KW10gMCBzZXRkYXNoCm5wCjc1LjQwIDU4
NS42OCBtCjY4LjQwIDU4NS42OCBsCm8KNjAuMDAgMTk1Ljk2ICgwKSAwLjUw
IDAuMDAgOTAuMDAgdAo2MC4wMCAyOTMuMzkgKDIpIDAuNTAgMC4wMCA5MC4w
MCB0CjYwLjAwIDM5MC44MiAoNCkgMC41MCAwLjAwIDkwLjAwIHQKNjAuMDAg
NDg4LjI1ICg2KSAwLjUwIDAuMDAgOTAuMDAgdAo2MC4wMCA1ODUuNjggKDgp
IDAuNTAgMC4wMCA5MC4wMCB0CltdIDAgc2V0ZGFzaApucAo1NjQuNjAgMTc5
LjQwIG0KNTY0LjYwIDYyNi42MCBsCjc1LjQwIDYyNi42MCBsCjc1LjQwIDE3
OS40MCBsCmNwIG8KMzIwLjAwIDEyNC44MCAoRmxhc2ggaW50ZW5zaXR5IFwo
VGQvMTAwMFwpKSAwLjUwIDAuMDAgMC4wMCB0CjMyLjAwIDQwMy4wMCAoUGVh
ayByZXNwb25zZSByYXRlIFwocHJlc3Nlcy9zXCkpIDAuNTAgMC4wMCA5MC4w
MCB0Cjc1LjQwIDE3OS40MCA1NjQuNjAgNjI2LjYwIGNsCltdIDAgc2V0ZGFz
aApucAo5My41MiAyNjEuMjkgbQo5OC43NSAyNjUuNDcgbAoxMDMuOTggMjY5
Ljg2IGwKMTA5LjIxIDI3NC40NyBsCjExNC40NCAyNzkuMjkgbAoxMTkuNjcg
Mjg0LjMzIGwKMTI0LjkwIDI4OS41OCBsCjEzMC4xMyAyOTUuMDUgbAoxMzUu
MzYgMzAwLjczIGwKMTQwLjU5IDMwNi42MiBsCjE0NS44MiAzMTIuNzIgbAox
NTEuMDQgMzE5LjAxIGwKMTU2LjI3IDMyNS40OSBsCjE2MS41MCAzMzIuMTUg
bAoxNjYuNzMgMzM4Ljk4IGwKMTcxLjk2IDM0NS45NiBsCjE3Ny4xOSAzNTMu
MDggbAoxODIuNDIgMzYwLjMyIGwKMTg3LjY1IDM2Ny42NyBsCjE5Mi44OCAz
NzUuMTAgbAoxOTguMTEgMzgyLjYxIGwKMjAzLjM0IDM5MC4xNiBsCjIwOC41
NyAzOTcuNzQgbAoyMTMuODAgNDA1LjMyIGwKMjE5LjAzIDQxMi44OSBsCjIy
NC4yNiA0MjAuNDMgbAoyMjkuNDkgNDI3LjkxIGwKMjM0LjcyIDQzNS4zMiBs
CjIzOS45NSA0NDIuNjMgbAoyNDUuMTggNDQ5LjgzIGwKMjUwLjQxIDQ1Ni45
MSBsCjI1NS42NCA0NjMuODMgbAoyNjAuODcgNDcwLjYwIGwKMjY2LjEwIDQ3
Ny4yMCBsCjI3MS4zMyA0ODMuNjIgbAoyNzYuNTYgNDg5Ljg0IGwKMjgxLjc5
IDQ5NS44NiBsCjI4Ny4wMiA1MDEuNjggbAoyOTIuMjUgNTA3LjI5IGwKMjk3
LjQ4IDUxMi42OCBsCjMwMi43MCA1MTcuODYgbAozMDcuOTMgNTIyLjgyIGwK
MzEzLjE2IDUyNy41NyBsCjMxOC4zOSA1MzIuMTAgbAozMjMuNjIgNTM2LjQx
IGwKMzI4Ljg1IDU0MC41MiBsCjMzNC4wOCA1NDQuNDIgbAozMzkuMzEgNTQ4
LjEzIGwKMzQ0LjU0IDU1MS42NCBsCjM0OS43NyA1NTQuOTYgbAozNTUuMDAg
NTU4LjEwIGwKMzYwLjIzIDU2MS4wNyBsCjM2NS40NiA1NjMuODYgbAozNzAu
NjkgNTY2LjUwIGwKMzc1LjkyIDU2OC45OCBsCjM4MS4xNSA1NzEuMzEgbAoz
ODYuMzggNTczLjUwIGwKMzkxLjYxIDU3NS41NiBsCjM5Ni44NCA1NzcuNDkg
bAo0MDIuMDcgNTc5LjMwIGwKNDA3LjMwIDU4MS4wMCBsCjQxMi41MyA1ODIu
NTkgbAo0MTcuNzYgNTg0LjA3IGwKNDIyLjk5IDU4NS40NiBsCjQyOC4yMiA1
ODYuNzYgbAo0MzMuNDUgNTg3Ljk4IGwKNDM4LjY4IDU4OS4xMSBsCjQ0My45
MSA1OTAuMTcgbAo0NDkuMTQgNTkxLjE2IGwKNDU0LjM2IDU5Mi4wOCBsCjQ1
OS41OSA1OTIuOTQgbAo0NjQuODIgNTkzLjc0IGwKNDcwLjA1IDU5NC40OSBs
CjQ3NS4yOCA1OTUuMTggbAo0ODAuNTEgNTk1LjgzIGwKNDg1Ljc0IDU5Ni40
MyBsCjQ5MC45NyA1OTYuOTkgbAo0OTYuMjAgNTk3LjUyIGwKNTAxLjQzIDU5
OC4wMCBsCjUwNi42NiA1OTguNDYgbAo1MTEuODkgNTk4Ljg4IGwKNTE3LjEy
IDU5OS4yNyBsCjUyMi4zNSA1OTkuNjQgbAo1MjcuNTggNTk5Ljk4IGwKNTMy
LjgxIDYwMC4yOSBsCjUzOC4wNCA2MDAuNTggbAo1NDMuMjcgNjAwLjg2IGwK
bwo0MDkuOTUgNjE5Ljc4IChBTikgMC41MCAwLjMzIDAuMDAgdAo5My41MiAy
NTQuNDIgNS4wMCBjZgpbXSAwIHNldGRhc2gKOTMuNTIgMjU0LjQyIDUuMDAg
Y28KMTY0LjE5IDMxNy43NSA1LjAwIGNmCltdIDAgc2V0ZGFzaAoxNjQuMTkg
MzE3Ljc1IDUuMDAgY28KMjQxLjI5IDMyNy40OSA1LjAwIGNmCltdIDAgc2V0
ZGFzaAoyNDEuMjkgMzI3LjQ5IDUuMDAgY28KMjg5LjQ4IDM3Ni4yMSA1LjAw
IGNmCltdIDAgc2V0ZGFzaAoyODkuNDggMzc2LjIxIDUuMDAgY28KMzM3LjY3
IDQ2OC43NiA1LjAwIGNmCltdIDAgc2V0ZGFzaAozMzcuNjcgNDY4Ljc2IDUu
MDAgY28KNDY2LjE3IDQ5Ny45OSA1LjAwIGNmCltdIDAgc2V0ZGFzaAo0NjYu
MTcgNDk3Ljk5IDUuMDAgY28KNTQ2LjQ4IDUyNy4yMiA1LjAwIGNmCltdIDAg
c2V0ZGFzaAo1NDYuNDggNTI3LjIyIDUuMDAgY28KW10gMCBzZXRkYXNoCm5w
CjkzLjUyIDI1NC45NCBtCjk4Ljc1IDI1Ny40MiBsCjEwMy45OCAyNTkuOTkg
bAoxMDkuMjEgMjYyLjYzIGwKMTE0LjQ0IDI2NS4zNiBsCjExOS42NyAyNjgu
MTggbAoxMjQuOTAgMjcxLjA3IGwKMTMwLjEzIDI3NC4wNSBsCjEzNS4zNiAy
NzcuMTIgbAoxNDAuNTkgMjgwLjI3IGwKMTQ1LjgyIDI4My41MCBsCjE1MS4w
NCAyODYuODEgbAoxNTYuMjcgMjkwLjIxIGwKMTYxLjUwIDI5My42OCBsCjE2
Ni43MyAyOTcuMjMgbAoxNzEuOTYgMzAwLjg2IGwKMTc3LjE5IDMwNC41NyBs
CjE4Mi40MiAzMDguMzQgbAoxODcuNjUgMzEyLjE5IGwKMTkyLjg4IDMxNi4x
MCBsCjE5OC4xMSAzMjAuMDcgbAoyMDMuMzQgMzI0LjEwIGwKMjA4LjU3IDMy
OC4xOSBsCjIxMy44MCAzMzIuMzMgbAoyMTkuMDMgMzM2LjUyIGwKMjI0LjI2
IDM0MC43NSBsCjIyOS40OSAzNDUuMDIgbAoyMzQuNzIgMzQ5LjMzIGwKMjM5
Ljk1IDM1My42NiBsCjI0NS4xOCAzNTguMDIgbAoyNTAuNDEgMzYyLjM5IGwK
MjU1LjY0IDM2Ni43OCBsCjI2MC44NyAzNzEuMTggbAoyNjYuMTAgMzc1LjU4
IGwKMjcxLjMzIDM3OS45OCBsCjI3Ni41NiAzODQuMzYgbAoyODEuNzkgMzg4
Ljc0IGwKMjg3LjAyIDM5My4wOSBsCjI5Mi4yNSAzOTcuNDIgbAoyOTcuNDgg
NDAxLjczIGwKMzAyLjcwIDQwNS45OSBsCjMwNy45MyA0MTAuMjIgbAozMTMu
MTYgNDE0LjQxIGwKMzE4LjM5IDQxOC41NCBsCjMyMy42MiA0MjIuNjMgbAoz
MjguODUgNDI2LjY2IGwKMzM0LjA4IDQzMC42MyBsCjMzOS4zMSA0MzQuNTMg
bAozNDQuNTQgNDM4LjM3IGwKMzQ5Ljc3IDQ0Mi4xNCBsCjM1NS4wMCA0NDUu
ODQgbAozNjAuMjMgNDQ5LjQ2IGwKMzY1LjQ2IDQ1My4wMSBsCjM3MC42OSA0
NTYuNDcgbAozNzUuOTIgNDU5Ljg2IGwKMzgxLjE1IDQ2My4xNyBsCjM4Ni4z
OCA0NjYuMzkgbAozOTEuNjEgNDY5LjU0IGwKMzk2Ljg0IDQ3Mi41OSBsCjQw
Mi4wNyA0NzUuNTcgbAo0MDcuMzAgNDc4LjQ2IGwKNDEyLjUzIDQ4MS4yNiBs
CjQxNy43NiA0ODMuOTkgbAo0MjIuOTkgNDg2LjYyIGwKNDI4LjIyIDQ4OS4x
OCBsCjQzMy40NSA0OTEuNjYgbAo0MzguNjggNDk0LjA1IGwKNDQzLjkxIDQ5
Ni4zNiBsCjQ0OS4xNCA0OTguNjAgbAo0NTQuMzYgNTAwLjc2IGwKNDU5LjU5
IDUwMi44NCBsCjQ2NC44MiA1MDQuODUgbAo0NzAuMDUgNTA2Ljc5IGwKNDc1
LjI4IDUwOC42NSBsCjQ4MC41MSA1MTAuNDUgbAo0ODUuNzQgNTEyLjE3IGwK
NDkwLjk3IDUxMy44NCBsCjQ5Ni4yMCA1MTUuNDMgbAo1MDEuNDMgNTE2Ljk3
IGwKNTA2LjY2IDUxOC40NCBsCjUxMS44OSA1MTkuODYgbAo1MTcuMTIgNTIx
LjIyIGwKNTIyLjM1IDUyMi41MiBsCjUyNy41OCA1MjMuNzcgbAo1MzIuODEg
NTI0Ljk3IGwKNTM4LjA0IDUyNi4xMiBsCjU0My4yNyA1MjcuMjIgbApvCjQw
OS45NSA0NjMuODkgKENCKSAwLjUwIDAuMzMgMC4wMCB0CmVwCiUlVHJhaWxl
cgolJVBhZ2VzOiAxCiUlRU9GCg==
--0-375965957-891636968=:10428--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Sun Apr  5 17:02:14 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Sun, 5 Apr 1998 11:02:14 -0500 (CDT)
Subject: plogis bug
Message-ID: <Pine.OSF.3.95.980405105309.20600A-100000@io.uwinnipeg.ca>

plogis seems broken:

> xfit<-seq(1,5,.1)
> pfit<-pnorm(-(3-xfit)/1)
> pfit
 [1] 0.02275013 0.02871656 0.03593032 0.04456546 0.05479929 0.06680720
 [7] 0.08075666 0.09680048 0.11506967 0.13566606 0.15865525 0.18406013
[13] 0.21185540 0.24196365 0.27425312 0.30853754 0.34457826 0.38208858
[19] 0.42074029 0.46017216 0.50000000 0.53982784 0.57925971 0.61791142
[25] 0.65542174 0.69146246 0.72574688 0.75803635 0.78814460 0.81593987
[31] 0.84134475 0.86433394 0.88493033 0.90319952 0.91924334 0.93319280
[37] 0.94520071 0.95543454 0.96406968 0.97128344 0.97724987
> pfit<-plogis(-(3-xfit)/1)
> pfit
 [1] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
 [8] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
[15] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.5000000
[22] 0.5249792 0.5498340 0.5744425 0.5986877 0.6224593 0.6456563 0.6681878
[29] 0.6899745 0.7109495 0.7310586 0.7502601 0.7685248 0.7858350 0.8021839
[36] 0.8175745 0.8320184 0.8455347 0.8581489 0.8698915 0.8807971
notice all the zeros--this is wrong.

> myplogis<-function(q)
{
1/(1+exp(-q))
}+ + + 
> pfit<-myplogis((-(3-xfit)/1))
> pfit
 [1] 0.1192029 0.1301085 0.1418511 0.1544653 0.1679816 0.1824255 0.1978161
 [8] 0.2141650 0.2314752 0.2497399 0.2689414 0.2890505 0.3100255 0.3318122
[15] 0.3543437 0.3775407 0.4013123 0.4255575 0.4501660 0.4750208 0.5000000
[22] 0.5249792 0.5498340 0.5744425 0.5986877 0.6224593 0.6456563 0.6681878
[29] 0.6899745 0.7109495 0.7310586 0.7502601 0.7685248 0.7858350 0.8021839
[36] 0.8175745 0.8320184 0.8455347 0.8581489 0.8698915 0.8807971

I actually looked at plogis.c and it looks fine.  Not sure what is causing
the trouble.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Sun Apr  5 18:14:05 1998
From: gb@stat.umu.se (Goran Brostrom)
Date: Sun, 5 Apr 1998 19:14:05 +0200 (MET DST)
Subject: plogis bug
In-Reply-To: <Pine.OSF.3.95.980405105309.20600A-100000@io.uwinnipeg.ca>
Message-ID: <Pine.GSO.3.95.980405191018.784A-100000@pc30.stat.umu.se>


On Sun, 5 Apr 1998, Bill Simpson wrote:

> plogis seems broken:
> 
> > xfit<-seq(1,5,.1)
> > pfit<-pnorm(-(3-xfit)/1)
> > pfit
>  [1] 0.02275013 0.02871656 0.03593032 0.04456546 0.05479929 0.06680720
>  [7] 0.08075666 0.09680048 0.11506967 0.13566606 0.15865525 0.18406013
> [13] 0.21185540 0.24196365 0.27425312 0.30853754 0.34457826 0.38208858
> [19] 0.42074029 0.46017216 0.50000000 0.53982784 0.57925971 0.61791142
> [25] 0.65542174 0.69146246 0.72574688 0.75803635 0.78814460 0.81593987
> [31] 0.84134475 0.86433394 0.88493033 0.90319952 0.91924334 0.93319280
> [37] 0.94520071 0.95543454 0.96406968 0.97128344 0.97724987
> > pfit<-plogis(-(3-xfit)/1)
> > pfit
>  [1] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
>  [8] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000
> [15] 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.0000000 0.5000000
> [22] 0.5249792 0.5498340 0.5744425 0.5986877 0.6224593 0.6456563 0.6681878
> [29] 0.6899745 0.7109495 0.7310586 0.7502601 0.7685248 0.7858350 0.8021839
> [36] 0.8175745 0.8320184 0.8455347 0.8581489 0.8698915 0.8807971
> notice all the zeros--this is wrong.
> 
> I actually looked at plogis.c and it looks fine.  Not sure what is causing
> the trouble.
 
I also looked at plogis.c. It looks fine in R-0.61.1, but not in 
R-snapshot; the difference is an added line

if(x < location) return 0;

which should not be there. Guess you are running snapshot and looking at
plogis.c form another version.

Goran Brostrom
Statistics Dept, Umea University
Umea, Sweden


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Sun Apr  5 21:34:32 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Mon, 6 Apr 1998 08:34:32 +1200 (NZST)
Subject: plogis bug
Message-ID: <199804052034.IAA08685@stat1.stat.auckland.ac.nz>

	From: Goran Brostrom <gb@stat.umu.se>
	To: Bill Simpson <wsimpson@uwinnipeg.ca>
	cc: r-devel <r-devel@stat.math.ethz.ch>
	Subject: Re: plogis bug


	On Sun, 5 Apr 1998, Bill Simpson wrote:

	> plogis seems broken:
	> 
	 
	I also looked at plogis.c. It looks fine in R-0.61.1, but not in 
	R-snapshot; the difference is an added line

	if(x < location) return 0;

	which should not be there. Guess you are running snapshot and looking at
	plogis.c form another version.

Exactly right!  I just commited the change, thanks.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kim.pilegaard@risoe.dk  Mon Apr  6 11:51:58 1998
From: kim.pilegaard@risoe.dk (Kim Pilegaard)
Date: Mon, 06 Apr 1998 09:51:58 -0100 (GMT)
Subject: problems with chron library
Message-ID: <Pine.GSO.3.95.980406094808.3957A-100000@eco-sun.risoe.dk>

I have installed the chron library, but it does not seem to work:

> chron("04/06/98")
Error in .C(NAME = "to_lower", strings = as.character(str), nstrings =
as.integer(n)) : C/Fortran function not in load table
> chron(17894)
Error in .C(NAME = "to_lower", strings = as.character(str), nstrings =
as.integer(n)) : C/Fortran function not in load table
>

I am using R Version 0.61.0 Alpha (December 21, 1997) with 
chron_2.1-2.tar.gz

Best wishes,

Kim

=============================================================================
Kim Pilegaard
Plant Biology and Biogeochemistry Department
Building 114
Risoe National Laboratory
P.O. Box 49
DK-4000 Roskilde
DENMARK
Phone:  +45 4677 4175
Fax:    +45 4677 4193
E-mail: kim.pilegaard@risoe.dk


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Apr  6 10:57:58 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 6 Apr 1998 11:57:58 +0200
Subject: problems with chron library
In-Reply-To: <Pine.GSO.3.95.980406094808.3957A-100000@eco-sun.risoe.dk>
 (message from Kim Pilegaard on Mon, 06 Apr 1998 09:51:58 -0100 (GMT))
Message-ID: <199804060957.LAA00694@sophie.ethz.ch>

Kim,

The chron package is in contrib/devel
			        -----
rather than contrib.
The reason is that it requires R 0.62 (the "unstable" development version).

Your problem might also be the famous ``lingering .Dyn.lib'' problem.
Try to add
	rm(.Dyn.libs)
to your .First function  (or at least try to execute it before library(chron)).
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Osman.Buyukisik@ae.ge.com  Mon Apr  6 13:28:36 1998
From: Osman.Buyukisik@ae.ge.com (Buyukisik, Osman (GEAE))
Date: Mon, 6 Apr 1998 08:28:36 -0400
Subject: compiling Snapshots under RedHat4.2
Message-ID: <0302875C631AD11198DE00600806C63747A030@ev009msxaege.ae.ge.com>

Hi,
 I have hp/hpux10.20 at work, and was able to build snapshots there. At home, I
have p120 linux redhat4.2. I thought it would work better than the hp, but... I
am getting missing routines drotg_ (I guess supposed to be in blas?) and
readline related linking errors. Do I need to upgrade to 5.0???
TIA
Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsimpson@uwinnipeg.ca  Mon Apr  6 17:18:48 1998
From: wsimpson@uwinnipeg.ca (Bill Simpson)
Date: Mon, 6 Apr 1998 11:18:48 -0500 (CDT)
Subject: data.entry()
Message-ID: <Pine.OSF.3.95.980406111614.22416A-100000@io.uwinnipeg.ca>

In the snapshot, if you try to quit data.entry() by clicking the kill box
instead of clicking in quit box, you crash R.  This was the same behaviour
that used to happen in graphics window (now fixed).

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kim.pilegaard@risoe.dk  Tue Apr  7 09:55:15 1998
From: kim.pilegaard@risoe.dk (Kim Pilegaard)
Date: Tue, 07 Apr 1998 07:55:15 -0100
Subject: problems with chron library
Message-ID: <9804070855.AA06585@eco-sun.risoe.dk>


> Kim,
> 
> The chron package is in contrib/devel
> 			        -----
> rather than contrib.
> The reason is that it requires R 0.62 (the "unstable" development version).
> 
> Your problem might also be the famous ``lingering .Dyn.lib'' problem.
> Try to add
> 	rm(.Dyn.libs)
> to your .First function  (or at least try to execute it before 
library(chron)).

Thanks for the information. 
Does this mean that all the packages in contrib/devel requires R 0.62 ?
I don't seem to have .Dyn.lib so that does not help.


Kim
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Apr  7 08:37:37 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 7 Apr 1998 09:37:37 +0200
Subject: problems with chron library
In-Reply-To: <9804070855.AA06585@eco-sun.risoe.dk> (kim.pilegaard@risoe.dk)
Message-ID: <199804070737.JAA00491@sophie.ethz.ch>

>>>>> "Kim" == Kim Pilegaard <kim.pilegaard@risoe.dk> writes:

    >> Kim,
    >> 
    >> The chron package is in contrib/devel ----- rather than contrib.
    >> The reason is that it requires R 0.62 (the "unstable" development
    >> version).
    >> 
    >> Your problem might also be the famous ``lingering .Dyn.lib''
    >> problem.  Try to add rm(.Dyn.libs) to your .First function (or at
    >> least try to execute it before
    >> library(chron)).

    Kim> Thanks for the information.  Does this mean that all the packages
    Kim> in contrib/devel requires R 0.62 ?

No, it doesn't mean that.
"devel" means something like:	

	This is a package in DEVELopment, i.e.,
	it is known to have problems under some circumstances.

The "some circumstances"  
	- can mean that not all functions work in current
	  versions of R,

	- can mean that C / Fortran code does not properly link on some
	  architectures,..

	- can mean that the code hasn't been tested thoroughly and is huge
	  (which automatically means it has bugs  :-)

Note that the last case is certainly true  for  'lme', 'dse' and 'design'.
I think all of these three do not require 0.62 at all.

CRAN-maintainers: 
	It certainly would be useful to have a  README file in
		 <<CRAN>>/src/contrib/devel/
But then I agree "devel" just means: 
	``You are on your own if you hope it works'' :-)


    Kim> I don't seem to have .Dyn.lib so that does not help.

too bad.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Apr  7 19:57:55 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 07 Apr 1998 13:57:55 -0500
Subject: R-beta: spline problems(?)
In-Reply-To: "A. Tsiolakidis"'s message of "Tue, 7 Apr 1998 04:25:10 +0100 (BST)"
References: <2441.199804070325@arnie.cs.keele.ac.uk>
Message-ID: <6riuol793g.fsf@verdi.stat.wisc.edu>

"A. Tsiolakidis"  <tsioltas@cs.keele.ac.uk> writes:

> OK, thanks, it looks like I can use the splines library instead (I had no
> idea how, but now I do!). Should we call it a bug then?
> 
> Question No. 2:
> 
> >From the same S-plus program, I was forced to change a line that was giving
> me Segmentation Error problems (a crash on Solaris 2.5):
> 
>  error _ t(y.fit) %*% ( DBD + Lambda ) %*% y.fit +
>  rbind(rep(1,n)) %*% F.vec.sq - 2 * t(y.fit) %*% F.vec

> Apparently, leaving out the middle term did the trick:
>  error _ t(y.fit) %*% ( DBD + Lambda ) %*% y.fit - 2 * t(y.fit) %*% F.vec
> , while the program still runs more or less as expected. There's nothing
> nasty about this middle term, is there?

It could possibly be a problem with rbind or with the matrix
multiplication for a column vector like that.  It is unusual to create 
a matrix that way.  If you want a single column you could create it as
 matrix( 1, nrow = n, ncol = 1)
or reverse the value of the nrow and ncol arguments for a matrix with
1 row.  Even more concise is
 array( 1, c(n, 1) ) or array( 1, c(1, n)) 
depending on which orientation you want.

> Finally, a certain READ.MAT function, that reads in a single-column file,
> taking the first two entries as the dimension of a matrix and storing the
> remaining values in such a matrix, wouldn't work; anybody can see why?

> READ.MAT _function(file, nrow = 0) {
> if(nrow > 0) {
>     n <- scan(file, n = 2)[2] * nrow
>     tmp <- scan(file, n = n + 2)
>   } 
> 
> ## first point of action: simply read in the file in vector 'tmp'
> else {
>     tmp <- scan(file)
>   }
> 
> if(length(tmp)<=2) {
>     return(NULL) 
>   }
> 
> ## the following clause should do the vector>>matrix conversion
> 
>  else {
>     x <- matrix(tmp[ - c(1, 2)], ncol = tmp[2], byrow = T)
>     return(x)
>   }
> }

I'm not sure exactly what is happening with that.

> Finally, if anybody is curious to see what is giving me all this trouble,
> it is some code for what is termed Mixture Spline models:
> http://cm.bell-labs.com/cm/ms/departments/sia/dxsun/speech/mixSplineSpec

This was sent to me only.  I am forwarding the reply onto the r-devel
list so others can take a look at it.
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Apr  7 22:13:52 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 8 Apr 1998 09:13:52 +1200 (NZST)
Subject: Update to R-unstable
Message-ID: <199804072113.JAA26315@stat1.stat.auckland.ac.nz>

I just want to signal to anyone using the develoment (i.e. more
unstable) version of R that (with permission) I have just
incorporated John Chambers' StatLib dataframe code into R and also
rewritten the code for "factors" to more closely resemble that in S.

This is a BIG change (2-3k lines of C code perished in the struggle).
The change seems to work well, but there may be residual problems.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Apr  8 06:10:32 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 8 Apr 1998 17:10:32 +1200 (NZST)
Subject: Spline code fixed
Message-ID: <199804080510.RAA08583@stat1.stat.auckland.ac.nz>

The problem in "spline" and "splinefun" has been fixed.  There was a
typo in the code computing natural and Forsythe/Malcom/Moler splines.
Only extrapolation beyond the right-hand endpoint would have produced
incorrect results.  Periodic splines were not affected.
	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Apr  8 21:10:30 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 9 Apr 1998 08:10:30 +1200 (NZST)
Subject: Image restoration in latest snapshots
Message-ID: <199804082010.IAA17686@stat1.stat.auckland.ac.nz>

I have restored backward compatibility of .RData files in the latest
development snapshot.  This should be propagating to archives shortly.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Apr  9 17:27:47 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 9 Apr 1998 09:27:47 -0700 (PDT)
Subject: 0-extent matrices?
In-Reply-To: <199803302030.IAA23649@stat1.stat.auckland.ac.nz>
Message-ID: <Pine.SUN.3.95.980409091945.15125A-100000@chekov>


Is there a good reason not to allow matrix extents to be zero? I have been
writing a function which fits glms under certain linear constraints.  I
fit the model with a reduced set of variables and then transform back to
the original set.  This involves operating on submatrices of the
covariance matrix and subsets of the coefficients. Sometimes these subsets
are empty.  A zero-length subset of the coefficient vector causes no
problems, but a 0x6 submatrix of the covariance matrix won't work with
rbind and cbind.  There appears to be no difficulty in deciding how
standard matrix and array operations should work with a 0x6 matrix and in
fact you might expect that the same C code would usually work.

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Apr 11 09:56:16 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 11 Apr 1998 10:56:16 +0200
Subject: 0-extent matrices?
In-Reply-To: <Pine.SUN.3.95.980409091945.15125A-100000@chekov> (message from
 Thomas Lumley on Thu, 9 Apr 1998 09:27:47 -0700 (PDT))
Message-ID: <199804110856.KAA00986@sophie.ethz.ch>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> Is there a good reason not to allow matrix extents to be zero? 

No, I don't think so.

And I agree that it would be really useful to have them in circumstances
like yours.

    TL> I have been writing a function which fits glms under certain linear
    TL> constraints.  I fit the model with a reduced set of variables and
    TL> then transform back to the original set.  This involves operating
    TL> on submatrices of the covariance matrix and subsets of the
    TL> coefficients. Sometimes these subsets are empty.  A zero-length
    TL> subset of the coefficient vector causes no problems, but a 0x6
    TL> submatrix of the covariance matrix won't work with rbind and cbind.
    TL> There appears to be no difficulty in deciding how standard matrix
    TL> and array operations should work with a 0x6 matrix and in fact you
    TL> might expect that the same C code would usually work.

Could you look into implementing them? 

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Lumley <thomas@biostat.washington.edu>  Sun Apr 12 00:24:41 1998
From: Thomas Lumley <thomas@biostat.washington.edu> (Thomas Lumley)
Date: Sat, 11 Apr 1998 16:24:41 -0700 (PDT)
Subject: 0-extent matrices?
In-Reply-To: <199804110856.KAA00986@sophie.ethz.ch>
Message-ID: <Pine.LNX.3.96.980411161742.11966A-100000@buffy>


Implementing 0-extent matrices turns out to be easy -- it's almost
entirely a matter of removing the tests for 0.  There seems to be only one
thing that may require special-case handling, but I'm not sure what the
Right Thing to do is.

If m is a 0x4 matrix, say, what should 2*m, 2+m and so on return?

Since m+m is a 0x4 matrix but 2*as.vector(m) is NA we can't have complete
consistency.  My preference is for these operations to happen elementwise
-- ie m+m is a 0x4 matrix.  Comments?

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Apr 12 15:57:34 1998
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 12 Apr 1998 16:57:34 +0200 (CEST)
Subject: 0-extent matrices?
In-Reply-To: <Pine.LNX.3.96.980411161742.11966A-100000@buffy>
References: <199804110856.KAA00986@sophie.ethz.ch>
 <Pine.LNX.3.96.980411161742.11966A-100000@buffy>
Message-ID: <13616.54878.596955.835572@aragorn.ci.tuwien.ac.at>

>>>>> Thomas Lumley writes:

> Implementing 0-extent matrices turns out to be easy -- it's almost
> entirely a matter of removing the tests for 0.  There seems to be only one
> thing that may require special-case handling, but I'm not sure what the
> Right Thing to do is.

> If m is a 0x4 matrix, say, what should 2*m, 2+m and so on return?

> Since m+m is a 0x4 matrix but 2*as.vector(m) is NA we can't have complete
> consistency.  My preference is for these operations to happen elementwise
> -- ie m+m is a 0x4 matrix.  Comments?

Sounds very much like going the Octave/MATLAB way.  I thought we'd
eventually have a `Matrix' class for such things?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Apr 14 02:04:40 1998
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 13 Apr 1998 18:04:40 -0700 (PDT)
Subject: 0-extent matrices?
In-Reply-To: <13616.54878.596955.835572@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.SUN.3.95.980413175740.28284D-100000@chekov>

On Sun, 12 Apr 1998, Kurt Hornik wrote:
> 
> Sounds very much like going the Octave/MATLAB way.  I thought we'd
> eventually have a `Matrix' class for such things?

Not really -- this applies to arrays as well and is basically a
programming issue similar to using drop=F when subscripting.  If you
subscript an array and it turns out that the result is empty you still
want as much as possible of the same code to work.  The most important
things are cbind, rbind and t, but it is useful that %*%, chol, solve, and
qr all give sensible results with empty matrices.  I went with m+2 giving
NA, for consistency with real(0)+2, so you do have to explicitly do
m+array(2,dim=dim(m)) or some such if you want elementwise arithmetic
operations on a possibly empty array.  This means very little special case
work is need to handle possibly empty arrays


Thomas Lumley
------------------------
Biostatistics		
Uni of Washington	
Box 357232		
Seattle WA 98195-7232	
------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Apr 14 09:06:35 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 14 Apr 1998 10:06:35 +0200
Subject: R-beta: S Compatibility (again)
In-Reply-To: <199804132350.LAA07571@stat1.stat.auckland.ac.nz> (message from
 Robert Gentleman on Tue, 14 Apr 1998 11:50:43 +1200 (NZST))
Message-ID: <199804140806.KAA00527@sophie.ethz.ch>

[I am diverting to R-devel,  I think it get's too technical..]

>>>>> "RobG" == Robert Gentleman <rgentlem@stat.auckland.ac.nz> writes:

    RobG> ....


    RobG>   It should be possible to write a body<- function that let you
    RobG> assign a new body (given lexical scope this can be absolutely
    RobG> disasterous). There is already an environment<-
    RobG> function. Probably we need arguments (since args returns a
    RobG> function rather than the list of args). If you really want it let
    RobG> me know and I'll whip up something that does this.....

We already have  formals(.), I think exactly for that purpose..
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Apr 17 16:29:13 1998
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 17 Apr 1998 17:29:13 +0200 (CEST)
Subject: development mda package
Message-ID: <13623.30025.254231.357114@galadriel.ci.tuwien.ac.at>


NEW: CRAN/src/contrib/devel/mda_0.1-1.tar.gz


I have made a first shot at porting the Hastie & Tibshirani mda package t=
o
R ... this is almost not tested at all ... but it works for the iris
data and what else could a statistician be possibly interested in anyway =
:-)


All BRUTO stuff is missing because there are some unresolved symbols:
  R.binary: can't resolve symbol 'sgram_'
  R.binary: can't resolve symbol 'd_sign'
  R.binary: can't resolve symbol 'pack_'
  R.binary: can't resolve symbol 'unpack_'
  R.binary: can't resolve symbol 'sknotl_'
  R.binary: can't resolve symbol 'wmean_'
which I didn't have time to search/imitate/...

Mda and fda with MARS seem to work fine, though.

You'll additionally need the e1071 (kmeans) and class (lvq & friends)
packages from CRAN.

It also seems only to work with the new dataframe code that is
in the latest snapshot version (>=3D easter 1998).

Good luck,

-------------------------------------------------------------------
                        Friedrich  Leisch                            =20
Institut f=FCr Statistik                      Tel: (+43 1) 58801 4541
Technische Universit=E4t Wien                 Fax: (+43 1)  504 14 98
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 17 17:05:55 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Apr 1998 18:05:55 +0200
Subject: development mda package
In-Reply-To: Friedrich Leisch's message of Fri, 17 Apr 1998 17:29:13 +0200 (CEST)
References: <13623.30025.254231.357114@galadriel.ci.tuwien.ac.at>
Message-ID: <x2u37smo0s.fsf@blueberry.kubism.ku.dk>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> All BRUTO stuff is missing because there are some unresolved symbols:
>   R.binary: can't resolve symbol 'sgram_'
>   R.binary: can't resolve symbol 'd_sign'
>   R.binary: can't resolve symbol 'pack_'
>   R.binary: can't resolve symbol 'unpack_'
>   R.binary: can't resolve symbol 'sknotl_'
>   R.binary: can't resolve symbol 'wmean_'

I believe sgram and sknotl are B-spline routines used also in the gcv
code on netlib (in RATFOR...), way back when. I can guess what d_sign
and wmean_ does. How about pack and unpack, anyone?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Lumley <thomas@biostat.washington.edu>  Sat Apr 18 17:51:16 1998
From: Thomas Lumley <thomas@biostat.washington.edu> (Thomas Lumley)
Date: Sat, 18 Apr 1998 09:51:16 -0700 (PDT)
Subject: attr(modelmatrix,"assign")
In-Reply-To: <9804178928.AA892838755@nass.usda.gov>
Message-ID: <Pine.SUN.3.95.980417121655.11386D-100000@chekov>


The "assign" attribute for model matrices has mutated in S-PLUS (probably
in 3.3 or 3.4) -- the model code is obviously not subject to
enough evolutionary pressure to keep mutations down.

Now it returns a list with elements named for each model term, giving the
vector of column numbers arising from that term
> y<-1:10
> x<-1:10
> attr(model.matrix(~y+factor(x)),"assign") 
$"(Intercept)":
[1] 1

$y:
[1] 2

$"factor(x)":
[1]  3  4  5  6  7  8  9 10 11

I don't think we necessarily want to change from our attr(,"assign"),
which follows Chambers & Hastie, but we may want to be able to create a
compatible version.
This can be done by the following function, which needs the terms
object as well as the model matrix

attrassign<-function(mmat,tt){
        if (!inherits(tt,"terms"))
                stop("need terms object")
        aa<-attr(mmat,"assign")
        if (is.null(aa))
                stop("argument is not really a model matrix")
        ll<-attr(tt,"term.labels")
        if (attr(tt,"intercept")>0)
                ll<-c("(Intercept)",ll)
        aaa<-factor(aa,labels=ll)
        split(order(aa),aaa)
        }

Perhaps we should add another attribute ("S.assign") to model matrices?

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Lumley <thomas@biostat.washington.edu>  Sat Apr 18 19:28:04 1998
From: Thomas Lumley <thomas@biostat.washington.edu> (Thomas Lumley)
Date: Sat, 18 Apr 1998 11:28:04 -0700 (PDT)
Subject: RFC: large database interface
In-Reply-To: <Pine.LNX.3.96.980226163351.22796A-100000@alpha.fuzzy.at>
Message-ID: <Pine.LNX.3.96.980301144403.7917A-100000@buffy>


I have been playing with a large database interface for R, and have
written one complete but useless demonstration and one incomplete but
potentially useful example (with memory mapping of a fixed-format ASCII
file). The idea is to make the file appear like a matrix or data frame but
not have to read it into the R heap.

A description and code can be found at
http://www.biostat.washington.edu/~thomas/Rdb.html
                                          Rdb.nw  (noweb literate program)
                                          Rdb.c
                                          Rdb.R

Comments?

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eschmid@delos.lf.net  Sun Apr 19 12:10:37 1998
From: eschmid@delos.lf.net (Egon Schmid)
Date: Sun, 19 Apr 1998 13:10:37 +0200
Subject: RFC: large database interface
References: <Pine.LNX.3.96.980301144403.7917A-100000@buffy>
Message-ID: <3539DBAD.76AD3DC1@delos.lf.net>

Thomas Lumley wrote:
> 
> I have been playing with a large database interface for R, and have
> written one complete but useless demonstration and one incomplete but
> potentially useful example (with memory mapping of a fixed-format ASCII
> file). The idea is to make the file appear like a matrix or data frame but
> not have to read it into the R heap.
> 
> A description and code can be found at
> http://www.biostat.washington.edu/~thomas/Rdb.html
>                                           Rdb.nw  (noweb literate program)
>                                           Rdb.c
>                                           Rdb.R
> 
> Comments?

Well, there is a web interface through the Apache module PHP Hypertext
Preprocessor. At http://www.php.net/ there are plenty more database
interfaces.

Personaly I think it would a great idea to interface large datasets with
netCDF 

	http://www.unidata.ucar.edu/packages/netcdf

>From the manual '1.2 NetCDF Is Not a Database Management System'

"Why not use an existing database management system for storing
array-oriented data? Relational database software is not suitable for
the kinds of data access supported by the netCDF interface.

First, existing database systems that support the relational model do
not support multidimensional objects (arrays) as a basic unit of data
access. Representing arrays as relations makes some useful kinds of data
access awkward and provides little support for the abstractions of
multidimensional data and coordinate systems. A quite different data
model is needed for array-oriented data to facilitate its retrieval,
modification, mathematical manipulation and visualization.

Related to this is a second problem with general-purpose database
systems: their poor performance on large arrays. Collections of
satellite images, scientific model outputs and long-term global weather
observations are beyond the capabilities of most database systems to
organize and index for efficient retrieval.

Finally, general-purpose database systems provide, at significant cost
in terms of both resources and access performance, many facilities that
are not needed in the analysis, management, and display of
array-oriented data. For example, elaborate update facilities, audit
trails, report formatting, and mechanisms designed for
transaction-processing are unnecessary for most scientific
applications."

On Feb 3 there was a small thread on this mailing list. 

-Egon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Mon Apr 20 01:44:00 1998
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Mon, 20 Apr 1998 12:44:00 +1200 (NZST)
Subject: RFC: large database interface
In-Reply-To: <3539DBAD.76AD3DC1@delos.lf.net>
References: <Pine.LNX.3.96.980301144403.7917A-100000@buffy>
 <3539DBAD.76AD3DC1@delos.lf.net>
Message-ID: <199804200044.MAA16425@stat1.stat.auckland.ac.nz>

Egon Schmid writes:
 > Thomas Lumley wrote:
 > > 
 > > I have been playing with a large database interface for R, and have
 > > written one complete but useless demonstration and one incomplete but
 > > potentially useful example (with memory mapping of a fixed-format ASCII
 > > file). The idea is to make the file appear like a matrix or data frame but
 > > not have to read it into the R heap.
 > > 
 > > A description and code can be found at
 > > http://www.biostat.washington.edu/~thomas/Rdb.html
 > >                                           Rdb.nw  (noweb literate program)
 > >                                           Rdb.c
 > >                                           Rdb.R
 > > 
 > > Comments?

This looks very interesting.  It would be nice if the such an
interface were written in a way that could be customized to a variety
of applications.  Being able to read spreadsheets is one thing which
comes to mind.  It might be nice (for example) to have a rather
complex initialization procedure which inspects the dataset thoroughly
and determines things like variable types (if the database does not
contain this information).

Egon Schmid writes:
 > Well, there is a web interface through the Apache module PHP Hypertext
 > Preprocessor. At http://www.php.net/ there are plenty more database
 > interfaces.
 > 
 > Personaly I think it would a great idea to interface large datasets with
 > netCDF 
 >
 > "Why not use an existing database management system for storing
 > array-oriented data? Relational database software is not suitable for
 > the kinds of data access supported by the netCDF interface.
 > 

Hmm. Over the past week I have been looking at NetCDF because GMT
(The Generic Mapping Tools)
	http://www.soest.hawaii.edu/wessel/gmt.html
use NetCDF to store their maps.

[ The maps are rather better than the Becker and Wilks ones because
  they are based on the World Vector Shoreline as well as the CIA WDB
  that B&W use.  They also have the maps prepared pretty well for
  plotting.  The only place where B&W are better is in the naming
  of places ... ]

I wasn't thinking about pulling the data from these maps into R, but
rather just rendering them on a graphics device so that they could
then be added to.

I suspect that when I've done that I'll probably know enough to create
an R/NetCDF link, perhaps using a framework of the type Thomas
proposes.
	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 20 18:48:42 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Apr 1998 19:48:42 +0200
Subject: R-0.61.1 compiled with egcs-mingw32
In-Reply-To: guido@sirio.stat.unipd.it's message of Sun, 22 Mar 1998 18:59:19 +0100 (GMT+0100)
References: <19980322175919.1333.qmail@sirio.stat.unipd.it>
Message-ID: <x24szo2xl1.fsf@blueberry.kubism.ku.dk>

guido@sirio.stat.unipd.it writes:

> rgnwbin.tgz and rgnwsrc.tgz are the first results of an attempt to
> build R for Win95 and WinNT using egcs-mingw32.
> 
> The advantages over the binaries for MsWindows that can be found in CRAN
> are:
> 1. R seems to run faster. Some simple (perhaps too simple)
>    benchmarks point to a 20% gain.
> 2. The port is based on a more recent version (0.61.1) and it is more
>    complete (more "system calls": system, tempfile, unlink, 
>    WinExec - to launch applications without waiting for the result;
>    support for the standard help system: try help(), help(abline),
>    help(line,eda), ?women, data(), library())
> 3. A new menu item "Stop current computation" make  possible 
>    to interupt long computation (but only when  something is printed).
> 4. Since egcs-mingw32 uses the standard C calling convention, 
>    you don't need a Watcom compiler to build dynamic link libraries.
>    Indeed, this was my original motivation.
> 5. It should be easy to use some other gnu-win32 compilers (maybe
>    running on a non MsWindows machine). It should be easy to 
>    adapt the port to lcc-win32, too.


One piece of bad news is that it doesn't work on Win3.X systems
(win32s). The PE-COFF object files that mingw32 makes simply won't
load, even for a "Hello, world" example.

The most likely candidate to get something running on that platform
(I, for one, still have quite a few students with older notebooks
and/or upgrade paranoia) seems to be RSXNT, but it's not all that
simple. It's also GCC-based, but the "specs" file is set up
differently from the mingw32/egcs one, which may create a great deal
of "fun".

RSXNT can (e.g.) be found at
ftp://ftp.tex.ac.uk/tex-archive/systems/msdos/dpmigcc/

I did a quick test and it does seem that a little fiddling makes it
possible to compile e.g. wincons.c with mingw32 headers plus a few
extra defines from the mingw32 specs file, so it would seem to be
doable, but it's hardly trivial. (Actually, this was with the ordinary
Linux GCC, but it's the header files that always cause trouble).

I also haven't got the foggiest about how to create DLL's with RSXNT,
especially how to to the important callbacks to the R binary (call_R). 

And, there's no g77 in RSXNT, so you'd need f2c. Perhaps it would be
easier to make the egcs cross-platform tools once and for all?

In any case, we need to do an "official" collection of tools. I tried
to compile using Guido's files during Easter, but immediately got
stopped by the absence of an "ls" command... 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Mon Apr 20 21:38:27 1998
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Tue, 21 Apr 1998 08:38:27 +1200 (NZST)
Subject: R-0.61.1 compiled with egcs-mingw32
Message-ID: <199804202038.IAA28998@stat1.stat.auckland.ac.nz>

My own efforts to get a new windows version out have been hampered by the
preponderance of bugs in Watcom C (11.0). They decided to make their dll's
and exe's somewhat more compatible with M'soft stuff out of Visual C. 
They seemed to create a large number of bugs in the process. They have
also decided not to distribute patches but rather to sell CD's with
the patches on them......(isn't commercial software a wonderful thing)

robert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 20 22:34:18 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Apr 1998 23:34:18 +0200
Subject: R-0.61.1 compiled with egcs-mingw32
In-Reply-To: Robert Gentleman's message of Tue, 21 Apr 1998 08:38:27 +1200 (NZST)
References: <199804202038.IAA28998@stat1.stat.auckland.ac.nz>
Message-ID: <x2vhs4xjmt.fsf@biostat.ku.dk>

Robert Gentleman <rgentlem@stat.auckland.ac.nz> writes:

> 
> My own efforts to get a new windows version out have been hampered by the
> preponderance of bugs in Watcom C (11.0). They decided to make their dll's
> and exe's somewhat more compatible with M'soft stuff out of Visual C. 
> They seemed to create a large number of bugs in the process. They have
> also decided not to distribute patches but rather to sell CD's with
> the patches on them......(isn't commercial software a wonderful thing)
> 

Ouch! In that case, I suggest that we try to put some collective
effort into getting something working with RSXNT. The only thing that
bothers me a little is that RSXNT isn't quite GPL compatible (you have
to pay a license for non-freeware usage) but I suppose that (a) it's a
very mild restriction, and (b) it can hardly be worse than shipping
GCC itself for RSXNT... There are certainly a lot of good things to be
said for using GCC throughout.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Tue Apr 21 09:56:06 1998
From: guido@sirio.stat.unipd.it (guido@sirio.stat.unipd.it)
Date: Tue, 21 Apr 1998 09:56:06 +0100 (GMT+0100)
Subject: R-0.61.1 compiled with egcs-mingw32
Message-ID: <19980421085606.8796.qmail@sirio.stat.unipd.it>

 Peter Dalgaard BSA writes:
 > 
 > Ouch! In that case, I suggest that we try to put some collective
 > effort into getting something working with RSXNT. The only thing that
 > bothers me a little is that RSXNT isn't quite GPL compatible (you have
 > to pay a license for non-freeware usage) but I suppose that (a) it's a
 > very mild restriction, and (b) it can hardly be worse than shipping
 > GCC itself for RSXNT... There are certainly a lot of good things to be
 > said for using GCC throughout.
 > 
 
 1) More than one year ago, hence, maybe, things are changed, I download
 RSXNT. However, I had problems to run its demo under MsWin3.1 (not under
 Win95). So, I prefered to give up. Just a limited experience, however.
 The other problem that I see is that, if I understand well,
 RSXNT is the effort of just one pearson  not of a team.
 
 2) What about DOS? Do you think that we really need a GUI console under 
 Microsoft-something? A couple of week ago, I took a look to the
 R code thinking to recompile it with DJGPP. I didn't try but it seems
 possible. The advantages that I can see are:
  a) DJGPP is stable, mature and supported. 
  b) I have limited experence but dynamic linking with DJGPP works
     better than under Windows. For me, of course. And I am not a 
     Windows programmers. But, I was able to to build dyn. libs
     which call routines in the main executable (and we need this
     non only for call_R but also for R_alloc and S_alloc).
     With, just 3 #define's its possible to use the dlopen/dlsym/dlclose
     interface.
  c) Same user interface under MsWindows and Unix (character+readline).
  d) DJGPP has g77.
  e) From DOS to WinNt, only one executable.
  A couple of disadvantages are:
  a) Old fashion.
  b) We need a new device. I suggest one based on grx (the standard djgpp
     graphic library) since this will have a small side effect:
     grx is available also for the linux console so can be used under
     linux without X (I remember some question about this on
     the R mailing list).
  c) dll's must be built using djgpp; anyway, djgpp is GPL.
  
  Comments? I have no time for a couple of weeks, but, after, if you
  think that can be a worth tentative, I can make  the first
  attempt (manage to recompile the non-graphic part +
  write a first draft for the graphic device if the previous
  point go well).
  
  guido m.
  
  
 
 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Apr 21 10:51:28 1998
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 21 Apr 1998 11:51:28 +0200
Subject: R-beta: SEs for one-param MLE in R?
In-Reply-To: <9804210759.AA11933@alpha.luc.ac.be> (message from Jim Lindsey on
 Tue, 21 Apr 1998 09:59:54 +0200 (MET DST))
Message-ID: <199804210951.LAA00664@sophie.ethz.ch>

	[--- diverting from  R-help to R-devel ... MM ---]

>>>>> "Jim" == Jim Lindsey <jlindsey@luc.ac.be> writes:

    Jim> Just back from a week camping in the snow in the English Lakes,
    Jim> and trying to catch up...

I hope the adventurous vacation was also relaxing in some ways..

    MM> ....
    MM> BTW: I am (we are) interested in the functions that you are writing
    MM> for nlm(.)  It certainly is worthwhile to have nlm(.) return a class
    MM> "nlm" result and provide print.nlm(.) and summary.nlm(.) functions
    MM> {{ Jim Lindsey already posted something like this, unfortunately
    MM> using "nls" which we don't want as long as it is not very close to
    MM> S' nls(.) function }}

    Jim> I am afraid that I don't understand the logic of this requirement
    Jim> of closeness to R for such functions. nlm() itself is not close
    Jim> and even hist() has never been very similar.

Yes, there are some cases where we (the R-core team, or the "R-devel" group)
have decided that S-plus is so wrong that we don't want to emulate or stay
close to it.   hist(.) is one such example.

With  nls(.), this is quite different, I think.
nls(.) has several nice features, (your "nls" did too!).
Most notably, the calling syntax of nls(.) using model notation,
is something I would want before I'd call a function "nls".

At the moment, I think it would be better to add an "nlm" class and
corresponding print and summary methods to  nlm(.), rather than calling
such a thing "nls".

Also, a few weeks ago, Ross said that he planned to add code to nlm
which would make use of  gradient and hessian function when provided
(or also, using D(.) ?).

    Jim> On the other hand,
    Jim> remember that the nls() I sent was a very cut-down version of one
    Jim> in one of my libraries. It had the above solution for the
    Jim> inversion with one dimensional parameters. By the way, the
    Jim> original Fortran for nlm that I ported to R printed out a warning
    Jim> that the algorithm is very inefficient for one-dimensional
    Jim> problems.
Yes, your "nls" function was useful!
and I agree that "nlm" should be pushed in the direction of what you had.

    Jim>   With respect to Bill's negative binomial that started another
    Jim> discussion, one of the functions in my nonlinear regression
    Jim> library does negative binomial nonlinear regression for both the
    Jim> mean and the dispersion parameters, along with twenty odd other
    Jim> distributions. I used it for beta-binomial regression in my paper
    Jim> with Pat Altham in the latest Applied Statistics. (Also another
    Jim> similar function for a finite mixture with these distributions,
    Jim> for example for negative binomial with inflated zeroes.) In my
    Jim> repeated measures library, there is a similar function for
    Jim> regressions with the same collection of distributions, but having
    Jim> a random intercept. Once R stabilizes...

well, isn't  R  stabilizing more and more?
Since 0.61, at least the way extension packages (formerly known as "libraries")
should be written is pretty stable.
Jim, I think several people really would be interested in your 
``nonlinear regression library'' and the ``repeated measures library''.

If they don't work in R 0.61, they could be at least put into 
CRAN/src/contrib/devel/.

Best regards!
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 21 13:56:37 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Apr 1998 14:56:37 +0200
Subject: R-0.61.1 compiled with egcs-mingw32
In-Reply-To: guido@sirio.stat.unipd.it's message of Tue, 21 Apr 1998 09:56:06 +0100 (GMT+0100)
References: <19980421085606.8796.qmail@sirio.stat.unipd.it>
Message-ID: <x27m4je3ju.fsf@blueberry.kubism.ku.dk>

guido@sirio.stat.unipd.it writes:

> 
>  Peter Dalgaard BSA writes:
>  > 
>  > Ouch! In that case, I suggest that we try to put some collective
>  > effort into getting something working with RSXNT. The only thing that
>  > bothers me a little is that RSXNT isn't quite GPL compatible (you have
>  > to pay a license for non-freeware usage) but I suppose that (a) it's a
>  > very mild restriction, and (b) it can hardly be worse than shipping
>  > GCC itself for RSXNT... There are certainly a lot of good things to be
>  > said for using GCC throughout.
>  > 
>  
>  1) More than one year ago, hence, maybe, things are changed, I download
>  RSXNT. However, I had problems to run its demo under MsWin3.1 (not under
>  Win95). So, I prefered to give up. Just a limited experience, however.
>  The other problem that I see is that, if I understand well,
>  RSXNT is the effort of just one pearson  not of a team.

Hmm. Things *have* changed. 1.4 came out in Dec97. However, I haven't
checked the win3.X demos, just read the docs. Sounds like I should,
eh? Was it compiling or running them that didn't work?

The RS in RSX is Rainer Schnittke, so you're right that it's
essentially a one-man job. So is EMX, on the other hand (Eberhard
Matthes). And GCC is GCC, obviously. The core of RSXNT really isn't
that big, and since it's only needed to help us over the Win32s
problem, I'd say try it - if it works, it works...

>  2) What about DOS? Do you think that we really need a GUI console under 
>  Microsoft-something? 

For teaching, yes, we need the GUI. Some of us, anyway. If we could
move to Tcl/Tk, we might get rid of the awful win32 API. That's
not a one-night project though.

Still, the ESS-mode people will want a stdio type interface, and it is
also useful for batch processing, so it should get done at some point.

> A couple of week ago, I took a look to the
>  R code thinking to recompile it with DJGPP. I didn't try but it seems
>  possible. The advantages that I can see are:
>   a) DJGPP is stable, mature and supported. 
>   b) I have limited experence but dynamic linking with DJGPP works
>      better than under Windows. For me, of course. And I am not a 
>      Windows programmers. But, I was able to to build dyn. libs
>      which call routines in the main executable (and we need this
>      non only for call_R but also for R_alloc and S_alloc).
>      With, just 3 #define's its possible to use the dlopen/dlsym/dlclose
>      interface.

As long as you stay away from graphics/dynload/system(), it's
certainly possible. (One of my former colleagues has done it a year or
so back.) With RSXNT as well - I'm pretty sure I tried that
at some point.

In principle, this isn't too hard with DLL's either, once the
generation of relocatable DLL's and import/export libraries is in
place. Luke Tierney has a set of dl* compatibility routines on

http://www.stat.umn.edu/~luke/xls/projects/dlbasics/dlbasics.html

>   c) Same user interface under MsWindows and Unix (character+readline).

- but no scrollback on the console. This will turn out to be a major
problem in practice, I suspect.

>   d) DJGPP has g77.

There's one somewhere for RSXNT, I believe.

>   e) From DOS to WinNt, only one executable.

And win3/95 ? DOS box or?

>   Comments? I have no time for a couple of weeks, but, after, if you
>   think that can be a worth tentative, I can make  the first
>   attempt (manage to recompile the non-graphic part +
>   write a first draft for the graphic device if the previous
>   point go well).

Hmm. If I have any influence to exert, I think that I'd like you to
try to reach a definitive verdict over the RSXNT/Win3.x issues first.
You seem to be the most skilled person around, when it comes to these
matters.

If I find some time, I might give it a stab myself. There's a SAS
course (yeah...) coming up next week though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Apr 21 14:34:23 1998
From: bates@stat.wisc.edu (Douglas Bates)
Date: 21 Apr 1998 08:34:23 -0500
Subject: R-beta: SEs for one-param MLE in R?
In-Reply-To: Martin Maechler's message of "Tue, 21 Apr 1998 11:51:28 +0200"
References: <199804210951.LAA00664@sophie.ethz.ch>
Message-ID: <6r90ozguxs.fsf@verdi.stat.wisc.edu>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> With  nls(.), this is quite different, I think.
> nls(.) has several nice features, (your "nls" did too!).
> Most notably, the calling syntax of nls(.) using model notation,
> is something I would want before I'd call a function "nls".

I have to admit to some bias here being one of the people who wrote
nls for S.  I find a couple of other features for nls to be very
helpful.  The "plinear" algorithm that profiles over any linear
parameters in the model can be very effective.  It doesn't always
converge in fewer iterations but it starts at values of the parameters
that are much closer to the optimum and it requires fewer starting
estimates to be calculated.

I have just finished preparing a short course on nonlinear regression
to be presented this weekend.  The slides are available at
	     http://franz.stat.wisc.edu/pub/NLME/Kansas/
Section 4 shows the use of some of the current and new facilties in
S for nonlinear regression.  

I refer in those slides to the nonlinear regression test cases at the
U.S. National Institutes of Standards and Technology (NIST) web site.
It is interesting to compare how numerical analysts view nonlinear
least squares with the approach of statisticians.  The NIST folks make
a big deal about using 128 bit arithmetic to produce "certified"
values of the parameter estimates.  In their favor they also produce
the approximate standard errors for the estimates but they don't seem
to notice that the estimates are things like 2.3 +/- 0.7 and they are
worrying about whether the 8th decimal place should be a 6 or a 7.
Also their idea of a "difficult" problem is to take a relatively easy
model fit and multiply all the starting estimates by 100.  In one
case, for the BoxBOD data where there is an increase to an asymptote,
all the responses are between 100 and 225 so they start the asymptote
at 1 and find it is difficult to converge.  With the "plinear"
algorithm you don't even need a starting estimate for the asymptote.

Those slides show the new approach to selfStart models in S.  We have
found that with a minimal effort it is possible to get convergence on
any of the examples on the NIST site simply by considering what the
parameters represent and by exploiting conditional (or "partial")
linearity.

For R it is still not clear to me how to manipulate the expressions
and functions.  I saw some of the discussion about function closures
and why it is not easy to coerce to a function but that is still black 
magic to me.  I regret that I am not likely to be able to take the
time to understand it better in the near future.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 21 19:11:45 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Apr 1998 20:11:45 +0200
Subject: Expressions and such
In-Reply-To: Douglas Bates's message of 21 Apr 1998 08:34:23 -0500
References: <199804210951.LAA00664@sophie.ethz.ch>
 <6r90ozguxs.fsf@verdi.stat.wisc.edu>
Message-ID: <x2wwcjcae6.fsf_-_@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> For R it is still not clear to me how to manipulate the expressions
> and functions.  I saw some of the discussion about function closures
> and why it is not easy to coerce to a function but that is still black 
> magic to me.  I regret that I am not likely to be able to take the
> time to understand it better in the near future.

You could always take Bill V's approach of blatantly claiming "this
can't be done in R" and watching the reaction... ;)

<tutorial audience=anyone>

Expressions are fairly easy: Just mentally convert them to LISP to
access the parse tree. Convert everything to function calls and
represent each as a list with the first element being the function
name and the others being it's arguments. (This is not particularly
useful to people who don't know Lisp, I know.)

This little function gets you some of the way, although it won't do
things like tagged arguments (it can certainly be improved in other
ways too):

> dissect                                           
function (e) 
{
        level <<- level + 1
        cat(substring("||||||||||||||||", 1, level))
        cat(deparse(e), "\n")
        if (is.call(e) || is.expression(e)) 
                for (i in 1:length(e)) dissect(e[[i]])
        level <<- level - 1
}
> level<- -1
> dissect(expression(1+2+3*4))
1 + 2 + 3 * 4 
|1 + 2 + 3 * 4 
||+ 
||1 + 2 
|||+ 
|||1 
|||2 
||3 * 4 
|||* 
|||3 
|||4 

e.g. like LISP's (+(+ 1 2)(* 3 4)). 

This is all pretty much like S. What was the problem in the first place?

</tutorial>

Regarding function coercion, I'm still unconvinced why this shouldn't
be possible. I'd kind of like to keep the "everything is a list"
paradigm. Obviously, one cannot keep perfect S compatibility (because
of the environment/closure issue), but some way of constructing a
function from it's arguments, body, and environment would be useful.

Many things are in fact possible if you are sneaky enough, e.g. here's
a list.to.envir conversion:

environment(eval(expression(function(){}),envir=list(a=1,b=2))))

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 21 23:11:06 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Apr 1998 00:11:06 +0200
Subject: R-0.61.1 compiled with egcs-mingw32
In-Reply-To: Peter Dalgaard BSA's message of 21 Apr 1998 14:56:37 +0200
References: <19980421085606.8796.qmail@sirio.stat.unipd.it>
 <x27m4je3ju.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2n2deq0zp.fsf@biostat.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> >  1) More than one year ago, hence, maybe, things are changed, I download
> >  RSXNT. However, I had problems to run its demo under MsWin3.1 (not under
> >  Win95). So, I prefered to give up. Just a limited experience, however.
> >  The other problem that I see is that, if I understand well,
> >  RSXNT is the effort of just one pearson  not of a team.
> 
> Hmm. Things *have* changed. 1.4 came out in Dec97. However, I haven't
> checked the win3.X demos, just read the docs. Sounds like I should,
> eh? Was it compiling or running them that didn't work?

Ok. Checked up on it now with 1.31 which is what I already had
installed. Essentially, "make" is a no-go on win32s, most likely due to
upper/lowercase issues, whereas the compiler and linker seems to work.
Some of the sample programs compiled on W95 do work OK, others die due
to missing comctr32.dll and the like, i.e. from trying to use
something that simply isn't there in win32s. So it's no good as a
development platform, but it should be quite possible to cross-develop
from win95.

> The RS in RSX is Rainer Schnittke,

Um. *Schnitker*. I thought it looked wrong...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Apr 24 14:03:10 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 24 Apr 1998 09:03:10 -0400
Subject: R-beta: exponentiation continued
References: <9804240824.AA30933@alpha.luc.ac.be>
Message-ID: <98Apr24.092140edt.13489@mailgate.bank-banque-canada.ca>

>I have now tried the same thing on Red Hat 4.1 with R 0.61.1 and there
>is no problem. Hence I agree that it is Red Hat 5 libc. Thanks.

I haven't tried Red Hat 5 yet, in part because I thought it was necessary to
switch from libc to libgc and I'm not looking forward to that headache. Could
this be the problem?

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 24 14:28:44 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Apr 1998 15:28:44 +0200
Subject: R-beta: exponentiation continued
In-Reply-To: Paul Gilbert's message of Fri, 24 Apr 1998 09:03:10 -0400
References: <9804240824.AA30933@alpha.luc.ac.be>
 <98Apr24.092140edt.13489@mailgate.bank-banque-canada.ca>
Message-ID: <x27m4f8i2b.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> >I have now tried the same thing on Red Hat 4.1 with R 0.61.1 and there
> >is no problem. Hence I agree that it is Red Hat 5 libc. Thanks.
> 
> I haven't tried Red Hat 5 yet, in part because I thought it was necessary to
> switch from libc to libgc and I'm not looking forward to that headache. Could
> this be the problem?

Most likely, that is exactly what it is, and the ^C-works-once problem
likewise.

If we at all can, we should try and extract some tiny test problems
that show the effect and submit them to the glibc maintainers. First
we'd want to see if it has been solved in the current updates, though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Apr 24 17:49:40 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 24 Apr 1998 12:49:40 -0400
Subject: Warning: ignored non function "scale"
Message-ID: <98Apr24.130723edt.13444@mailgate.bank-banque-canada.ca>

I've been working on a revised version of prcomp and princomp. Below is my
current draft of prcomp,  which is marginally different from V&R. I've added
center and scale as optional arguments. However, scale causes the following:

> zi _ prcomp(iris[,,2])
Warning: ignored non function "scale"

because scale is both a variable and a function. Is there any way to avoid this
error message and still keep the name scale for both the argument and the name
of the function?

Paul Gilbert
______

prcomp <- function(x, retx=TRUE, center=TRUE, scale=FALSE) {
 s <- svd(scale(x, center=center, scale=scale),nu=0)
# rank <- sum(s$d > 0)
 rank <- sum(s$d > (s$d[1]*sqrt(.Machine$double.eps)))
 if (rank < ncol(x)) s$v <- s$v[,1:rank]
 s$d <- s$d/sqrt(max(1,nrow(x) -1))
 if(retx) list(sdev=s$d, rotation=s$v, x=x %*% s$v)
 else     list(sdev=s$d, rotation=s$v)
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 24 18:11:03 1998
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Apr 1998 19:11:03 +0200
Subject: Warning: ignored non function "scale"
In-Reply-To: Paul Gilbert's message of Fri, 24 Apr 1998 12:49:40 -0400
References: <98Apr24.130723edt.13444@mailgate.bank-banque-canada.ca>
Message-ID: <x2zphb6t7c.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> I've been working on a revised version of prcomp and princomp. Below is my
> current draft of prcomp,  which is marginally different from V&R. I've added
> center and scale as optional arguments. However, scale causes the following:
> 
> > zi _ prcomp(iris[,,2])
> Warning: ignored non function "scale"
> 
> because scale is both a variable and a function. Is there any way to avoid this
> error message and still keep the name scale for both the argument and the name
> of the function?

There are several. One, which has been used in other parts of R is to
lengthen the formal argument a bit, e.g. "scale.it" which - since
there's no "..." part can be truncate to, say, "scale". 

Another option is to explicitly fetch the function scale() using
get("scale","package:base") or get("scale",envir=.GlobalEnv). Anything
not including the functions local variables should do the trick.

Actually, I think that the first of the above get()s needs to be 

get("scale",match("package:base",search()))

hmmm, shouldn't we make pos.to.env accept character variables?


> prcomp <- function(x, retx=TRUE, center=TRUE, scale=FALSE) {
>  s <- svd(scale(x, center=center, scale=scale),nu=0)
> # rank <- sum(s$d > 0)
>  rank <- sum(s$d > (s$d[1]*sqrt(.Machine$double.eps)))
>  if (rank < ncol(x)) s$v <- s$v[,1:rank]
>  s$d <- s$d/sqrt(max(1,nrow(x) -1))
>  if(retx) list(sdev=s$d, rotation=s$v, x=x %*% s$v)
>  else     list(sdev=s$d, rotation=s$v)
> }

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Apr 28 16:11:18 1998
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 28 Apr 1998 11:11:18 -0400
Subject: princomp
Message-ID: <98Apr28.113103edt.13450@mailgate.bank-banque-canada.ca>

Below is a draft of a function "princomp" which reproduces Splus 3.3 results. In
writing this I have found there is an certain inconsistency in the scaling (N vs
N-1) used when cor is T or F. The net result is that for data which has already
been scaled (so cor=cov) the function gives slightly different results depending
on whether the argument cor is T or F. I have some reluctance in reproducing
this behavior, and perhaps someone could check if it has been changed in a more
recent version of Splus:

> z <- scale(iris[,,2], scale=T, center=T)
> z1 <- princomp(z, cor=F)
> z2 <- princomp(z, cor=T)
> z1$sdev
   Comp.1    Comp.2    Comp.3    Comp.4
1.6934621 0.7316756 0.6221717 0.3601935
> z2$sdev
   Comp.1    Comp.2    Comp.3    Comp.4
1.7106550 0.7391040 0.6284883 0.3638504

I have at leasted tried to make the inconsistency obvious in the code, and
document it. Any other thoughts would be appreciated.

Paul Gilbert
______


princomp <- function(x, cor=FALSE, scores=TRUE,
   subset=rep(TRUE, nrow(as.matrix(x)))) {
 z<- as.matrix(x)[subset,, drop=F]
 N <- nrow(z)
 if(cor) cv <- get("cor",envir=.GlobalEnv)(z)
 else    cv <- cov(z)
#  (svd can be used but gives different signs for some vectors)
 edc <- eigen(cv)
 cn <- paste("Comp.", 1:ncol(cv), sep="")
 names(edc$values) <- cn
 dimnames(edc$vectors) <- list(dimnames(x)[[2]], cn)
 scr<- NULL
 if (cor)
   {sdev <- sqrt(edc$values)
    sc <- (apply(z,2,var)*(N-1)/N)^0.5
    if (scores)
        scr<-(scale(z,center=T,scale=T) %*% edc$vectors)*sqrt(N/(N-1))
   }
 else
   {sdev <- sqrt(edc$values*(N-1)/N)
    sc <- rep(1, ncol(z))
    if (scores)
        scr<- (scale(z,center=T,scale=F) %*% edc$vectors)
   }
 names(sc) <- dimnames(x)[[2]]
 edc <-list(sdev=sdev, loadings=edc$vectors,
     center=apply(z,2,mean), scale=sc, n.obs=N, scores=scr)
# The splus function also return list elements factor.sdev, correlations
# and coef, but these are not documented in the help. coef seems to equal
# load. The splus function also return list elements call and terms which
# are not supported here.
 class(edc) <- "princomp"
 edc
}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

