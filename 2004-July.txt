From bates at stat.wisc.edu  Thu Jul  1 06:09:46 2004
From: bates at stat.wisc.edu (Douglas Bates)
Date: Thu Jul  1 06:07:12 2004
Subject: [Rd] AS_NUMERIC and as.numeric - Could someone explain?
In-Reply-To: <000701c45eb8$8e001520$82b98283@DH>
References: <000701c45eb8$8e001520$82b98283@DH>
Message-ID: <40E38E8A.5080209@stat.wisc.edu>

AS_NUMERIC in C more closely corresponds to as.double() in R

All that as.numeric() in R does is assure that the result is of a 
numeric mode.  It does not coerce integer variables to doubles.

Check, for example,
str(as.numeric(1:100))


Daniel Hoppe wrote:

> Dear List,
> 
> I stepped into a strange effect which I can't explain to myself
> (probably due to lack of knowledge on R internals). 
> 
> I have four vectors a,b,c and z of size 10000 each. With these vectors I
> call
> 
>     .Call("hyp2f1forrey", a, b, b, z, PACKAGE = "hyp2f1")
> 
> to access 
> 
> SEXP hyp2f1forrey(SEXP a, SEXP b, SEXP c, SEXP x)
> {
>     int i,n;
>     double *xa, *xb, *xc, *xx, *xresr, *xresi;
>     SEXP resr, resi;
> 
>     n = LENGTH(a);
> 
>     PROTECT(a = AS_NUMERIC(a));
>     PROTECT(b = AS_NUMERIC(b));
>     PROTECT(c = AS_NUMERIC(c));
>     PROTECT(x = AS_NUMERIC(x));
>     PROTECT(resr = NEW_NUMERIC(n));
>     PROTECT(resi = NEW_NUMERIC(n));
> 
>     xa = NUMERIC_POINTER(a);
>     xb = NUMERIC_POINTER(b);
>     xc = NUMERIC_POINTER(c);
>     xx = NUMERIC_POINTER(x);
>     xresr = NUMERIC_POINTER(resr);
>     xresi = NUMERIC_POINTER(resi);
> 
>     for (i = 0; i < n; i++)
>         F77_CALL(hyp)(&xx[i], &xa[i], &xb[i], &xc[i],  &xresr[i],
> &xresi[i]);
>     UNPROTECT(6);
>     return(resr);
> }
> 
> I read the documentation in the way that I could either do the call from
> above or  
> 
>     .Call("hyp2f1forrey", as.numeric(a), as.numeric(b), as.numeric(b),
> as.numeric(z), PACKAGE = "hyp2f1")
> 
> and remove the 
> 
>     PROTECT(a = AS_NUMERIC(a));
>     PROTECT(b = AS_NUMERIC(b));
>     PROTECT(c = AS_NUMERIC(c));
>     PROTECT(x = AS_NUMERIC(x));
> 
> in the C-Code. What happens now is that in my resulting vector of length
> 10000 some values are incorrect depending on the exact way of calling
> the C-Function. 
> 
>     .Call("hyp2f1forrey", a, b, b, z, PACKAGE = "hyp2f1")[11]  -->
> incorrect result
>     .Call("hyp2f1forrey", a[11], b[11], b[11]), z[11]), PACKAGE =
> "hyp2f1") --> works
>     .Call("hyp2f1forrey", as.numeric(a), as.numeric(b), as.numeric(c),
> as.numeric(z), PACKAGE = "hyp2f1")[11] -- works
>     .Call("hyp2f1forrey", a[1:10000], b[1:10000], b[1:10000]),
> z[1:10000]), PACKAGE = "hyp2f1") --> works too!
> 
> 
> Could someone explain to me where the difference in these calls comes
> from?
> 
> Thanks in advance,
> 
> Daniel
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From nikhilg at uab.edu  Thu Jul  1 09:25:17 2004
From: nikhilg at uab.edu (nikhilg@uab.edu)
Date: Thu Jul  1 09:25:20 2004
Subject: [Rd] Bug in SOM package (PR#7038)
Message-ID: <20040701072517.932711093F@slim.kubism.ku.dk>

Bug in "SOM" package in R.
 
This simple code withot for loop runs:-------simple.r--------
 
library(som)
A <- as.matrix(read.table("C:/code/h.txt", sep="\t", header=TRUE,
row.names=1))
print(som(A,1,2)$visual)
print(som(A,1,3)$visual)
----------------------------------------
 
The same code if inserted in for loop generates "Assertion failure" in
Rgui.exe.
 
This is Microsoft Visual C++ runtime error in Rgui.exe and File =
tn/vec.h
 
Line 250 
Expression: i<=n_
 
Code with for loop:----------------------------sim.r--------------------
 
library(som)
A <- as.matrix(read.table("C:/code/h.txt", sep="\t", header=TRUE,
row.names=1))
for(x in 2:3){
print(som(A,1,x)$visual)
}

Thanks,
Nikhil Garge
Computer Science graduate student,
UAB

	[[alternative HTML version deleted]]

From ripley at stats.ox.ac.uk  Thu Jul  1 09:36:18 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Jul  1 09:36:21 2004
Subject: [Rd] Bug in SOM package (PR#7038)
In-Reply-To: <20040701072517.932711093F@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0407010828230.32491-100000@gannet.stats>

Please send bugs in packages (I think this is som, not SOM, and R does
care) to the package maintainer (Cc:ed here), as the FAQ asks. Also,
please give the version of R and of the package used.

I can't test this as I cannot even install som with gcc 3.4.0, and I have
just reported that to the maintainer.

As the package maintainer has no access to R-bugs and basic information is 
missing I am going to close this report on R-bugs and refer it to the 
maintainer.

On Thu, 1 Jul 2004 nikhilg@uab.edu wrote:

> Bug in "SOM" package in R.
>  
> This simple code withot for loop runs:-------simple.r--------
>  
> library(som)
> A <- as.matrix(read.table("C:/code/h.txt", sep="\t", header=TRUE,
> row.names=1))
> print(som(A,1,2)$visual)
> print(som(A,1,3)$visual)
> ----------------------------------------
>  
> The same code if inserted in for loop generates "Assertion failure" in
> Rgui.exe.
>  
> This is Microsoft Visual C++ runtime error in Rgui.exe and File =
> tn/vec.h
>  
> Line 250 
> Expression: i<=n_
>  
> Code with for loop:----------------------------sim.r--------------------
>  
> library(som)
> A <- as.matrix(read.table("C:/code/h.txt", sep="\t", header=TRUE,
> row.names=1))
> for(x in 2:3){
> print(som(A,1,x)$visual)
> }
> 
> Thanks,
> Nikhil Garge
> Computer Science graduate student,
> UAB

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From chabrier at toulouse.inra.fr  Thu Jul  1 12:26:28 2004
From: chabrier at toulouse.inra.fr (chabrier@toulouse.inra.fr)
Date: Thu Jul  1 12:26:30 2004
Subject: [Rd] segfault in apply with "==" and double (PR#7039)
Message-ID: <20040701102628.9A0951093F@slim.kubism.ku.dk>

Full_Name: Patrick Chabrier
Version: 1.9.1
OS: Linux version 2.4.18  (gcc version 2.95.4 20011002 (Debian prerelease))
Submission from: (NULL) (193.54.96.5)


R : Copyright 2004, The R Foundation for Statistical Computing
Version 1.9.1  (2004-06-21), ISBN 3-900051-00-3

R is free .....

.....

>  apply(matrix(rnorm(1000*3000),nrow=3000), 2,"==",rnorm(400))
Segmentation fault

I'm conscious that this is not the best way to use the "==" operator.

I just hope it can help,

Cordially,

Patrick CHABRIER                                                     
------------------------------------------------------------------------\
Institut National de la Recherche Agronomique                        \_0/
Station de Biom?trie & d'Intelligence Artificielle                    (/
Chemin de Borde-Rouge                       Tel : (0)5-61-28-54-36   _o
BP 27 - 31326 Castanet-Tolosan Cedex        Fax : (0)5-61-28-53-35 _/ |_
FRANCE                                                                  \
------------------------------- e-mail : chabrier@toulouse.inra.fr

From ripley at stats.ox.ac.uk  Thu Jul  1 10:19:46 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Jul  1 15:39:26 2004
Subject: [Rd] Top-level code in package files is not a good idea
Message-ID: <Pine.LNX.4.44.0407010905020.974-100000@gannet.stats>

It is not a good idea to have executable code other than assignments in R 
code files in packages.  (The most common example is to require() some 
other package.)  Doing so presumes that the R code will be sourced when 
the package is loaded, and this is not true when saved images are used or 
with the databases of saved objects that we are testing for R 2.0.0.

The following packages fail under tests of an experimental version of R 
because of top-level require()s

    DCluster SASmixed agce cramer forward gridBase hier.part its multidim
    pcurve phyloarray sandwich

Please put code that should be executed when the package is loaded in a 
.First.lib function, or for package with a namespace in a .onLoad function 
(or import another namespace in the namespace).  And if you are using 
require(), you should test its value and act appropriately if the package 
is not available (even if it is a standard package, as we do sometimes 
rename those).

This is not urgent (the databases of saved objects are not expected to be 
released until October, and then will be optional for packages and 
probably not the default), but please bear this in mind.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From nali at umn.edu  Thu Jul  1 17:15:35 2004
From: nali at umn.edu (Na Li)
Date: Thu Jul  1 17:20:38 2004
Subject: [Rd] \middle in Rd.sty conflicts with newer LaTeX?
Message-ID: <1obrizahd4.fsf@bass.biostat.umn.edu>


Rd.sty defines 

\newlength{\middle}

which seems to be in conflict with the my latex installation.

Here is a minimal example:

\documentclass{article}
\newlength{\middle}
\begin{document}
\end{document}

It runs fine on a Linux box:

carp:136% latex test.tex 
This is TeX, Version 3.14159 (Web2C 7.3.1)
(test.tex
LaTeX2e <2000/06/01>
Babel <v3.7h> and hyphenation patterns for american, french, german, ngerman, i
talian, nohyphenation, loaded.
(/usr/share/texmf/tex/latex/base/article.cls
Document Class: article 2000/05/19 v1.4b Standard LaTeX document class
(/usr/share/texmf/tex/latex/base/size10.clo))
No file test.aux.
(test.aux) )
No pages of output.
Transcript written on test.log.

but fails on a Mac with the TeX installed using GW's i-installer:

bass$ latex test.tex 
This is e-TeXk, Version 3.141592-2.1 (Web2C 7.5.2)
 \write18 enabled.
 %&-line parsing enabled.
 (/usr/local/teTeX/share/texmf.tetex/web2c/cp8bit.tcx)
entering extended mode
(./test.tex
LaTeX2e <2001/06/01>
Babel <v3.7h> and hyphenation patterns for american, nohyphenation, loaded.
(/usr/local/teTeX/share/texmf.tetex/tex/latex/base/article.cls
Document Class: article 2001/04/21 v1.4e Standard LaTeX document class
(/usr/local/teTeX/share/texmf.tetex/tex/latex/base/size10.clo))

! LaTeX Error: Command \middle already defined.
               Or name \end... illegal, see p.192 of the manual.

I couldn't find where \middle is defined.  Has anyone else experienced
the same problem?  

Michael

-- 
Na (Michael) Li, Ph.D.               
Division of Biostatistics          A443 Mayo Building, MMC 303   
School of Public Health            420 Delaware St SE            
University of Minnesota            Minneapolis, MN 55455         
Phone: (612) 626-4765              Email: nali@umn.edu                  
Fax:   (612) 626-0660              http://www.biostat.umn.edu/~nali

From ripley at stats.ox.ac.uk  Thu Jul  1 17:22:53 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Jul  1 17:22:57 2004
Subject: [Rd] \middle in Rd.sty conflicts with newer LaTeX?
In-Reply-To: <1obrizahd4.fsf@bass.biostat.umn.edu>
Message-ID: <Pine.LNX.4.44.0407011621400.1421-100000@gannet.stats>

The conflict is with e-tex.  Please use latex, not e-latex.

This comes up on MikTeX (Windows) too.  We'll try to work around this for 
the next release.

On Thu, 1 Jul 2004, Na Li wrote:

> 
> Rd.sty defines 
> 
> \newlength{\middle}
> 
> which seems to be in conflict with the my latex installation.
> 
> Here is a minimal example:
> 
> \documentclass{article}
> \newlength{\middle}
> \begin{document}
> \end{document}
> 
> It runs fine on a Linux box:
> 
> carp:136% latex test.tex 
> This is TeX, Version 3.14159 (Web2C 7.3.1)
> (test.tex
> LaTeX2e <2000/06/01>
> Babel <v3.7h> and hyphenation patterns for american, french, german, ngerman, i
> talian, nohyphenation, loaded.
> (/usr/share/texmf/tex/latex/base/article.cls
> Document Class: article 2000/05/19 v1.4b Standard LaTeX document class
> (/usr/share/texmf/tex/latex/base/size10.clo))
> No file test.aux.
> (test.aux) )
> No pages of output.
> Transcript written on test.log.
> 
> but fails on a Mac with the TeX installed using GW's i-installer:
> 
> bass$ latex test.tex 
> This is e-TeXk, Version 3.141592-2.1 (Web2C 7.5.2)
>  \write18 enabled.
>  %&-line parsing enabled.
>  (/usr/local/teTeX/share/texmf.tetex/web2c/cp8bit.tcx)
> entering extended mode
> (./test.tex
> LaTeX2e <2001/06/01>
> Babel <v3.7h> and hyphenation patterns for american, nohyphenation, loaded.
> (/usr/local/teTeX/share/texmf.tetex/tex/latex/base/article.cls
> Document Class: article 2001/04/21 v1.4e Standard LaTeX document class
> (/usr/local/teTeX/share/texmf.tetex/tex/latex/base/size10.clo))
> 
> ! LaTeX Error: Command \middle already defined.
>                Or name \end... illegal, see p.192 of the manual.
> 
> I couldn't find where \middle is defined.  Has anyone else experienced
> the same problem?  
> 
> Michael
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From msk at scientiaterrae.org  Thu Jul  1 18:10:09 2004
From: msk at scientiaterrae.org (msk@scientiaterrae.org)
Date: Thu Jul  1 18:10:13 2004
Subject: [Rd] help.start() not able to run (PR#7040)
Message-ID: <20040701161009.B681710E88@slim.kubism.ku.dk>

Full_Name: Matthew Krause
Version: 1.9.1
OS: Mac OS 10.3.4
Submission from: (NULL) (194.78.187.114)


To whom it may concern:

I cannot get "help.start()" to work after installing the latest version of R (v
1.9.1).  I had no problems with this when running the previous version (v1.8). 
In the R Console window, the following dialogue appears in the latest version:

> help.start()
Making links in per-session dir ...
If /usr/bin/open is already running, it is *not* restarted, and you must
    switch to its window.
Otherwise, be patient ...
> 

The console.log window then displays:

dyld: /usr/bin/open version mismatch for library: /usr/local/lib/libxml2.2.dylib
(compatibility version of user: 9.0.0 greater than library's version: 8.0.0)
dyld: /usr/bin/open version mismatch for library: /usr/local/lib/libxml2.2.dylib
(compatibility version of user: 9.0.0 greater than library's version: 8.0.0)

What can be done to remedy this situation?

Thank you in advance for your advice.

Respectfully,

M. S. Krause

From simon.urbanek at math.uni-augsburg.de  Thu Jul  1 19:06:03 2004
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Thu Jul  1 19:06:16 2004
Subject: [Rd] help.start() not able to run (PR#7040)
In-Reply-To: <20040701161009.B681710E88@slim.kubism.ku.dk>
References: <20040701161009.B681710E88@slim.kubism.ku.dk>
Message-ID: <EF03C0AA-CB80-11D8-806A-000A959F327E@math.uni-augsburg.de>

On Jul 1, 2004, at 6:10 PM, msk@scientiaterrae.org wrote:

> Full_Name: Matthew Krause
> Version: 1.9.1
> OS: Mac OS 10.3.4
> Submission from: (NULL) (194.78.187.114)
>
> dyld: /usr/bin/open version mismatch for library: 
> /usr/local/lib/libxml2.2.dylib
> (compatibility version of user: 9.0.0 greater than library's version: 
> 8.0.0)
> dyld: /usr/bin/open version mismatch for library: 
> /usr/local/lib/libxml2.2.dylib
> (compatibility version of user: 9.0.0 greater than library's version: 
> 8.0.0)
>
> What can be done to remedy this situation?

sudo rm -f /usr/local/lib/libxml2*

libxml2 should *NOT* be installed in /usr/local on Panther machines as 
it's already present in the system.
The libxml2 package is optional and is meant for Jaguar *only* since is 
older that the one already installed in Panther (see ReadMe).

Cheers,
Simon

From nikhilg at uab.edu  Thu Jul  1 19:12:55 2004
From: nikhilg at uab.edu (Nikhil R Garge)
Date: Thu Jul  1 19:13:02 2004
Subject: [Rd] Bug in SOM package (PR#7038)
Message-ID: <9988F937F72AB3438C19BFC30D30C966012B0050@UABEXMB1.ad.uab.edu>

Dear Mr. Jun Yan and Dr. Riply,
 
Sorry for the sloppy email I sent earlier about the bug in R.
 
Bug Report in R:
 
Version: 1.9
Package: som 
 
Bug description:
This simple code WITHOUT "for loop"  EXECUTES
PROPERLY:-------simple.r--------
 
library(som)
 A <- as.matrix(read.table("C:/code/h.txt", sep="\t", header=TRUE,
row.names=1))
 print(som(A,1,2)$visual)
 print(som(A,1,3)$visual)
 
------------------------------------------------------------------------
---------------------------------------
 
But the same logic if coded IN "for loop" DOESNT EXECUTE:
 
Code WITH "for
loop":-----------------------------sim.r--------------------
 
library(som)
 A <- as.matrix(read.table("C:/code/h.txt", sep="\t", header=TRUE,
row.names=1))
 for(x in 2:3){
 print(som(A,1,x)$visual)
 }
------------------------------------------------------------
 
ERROR GENERATED: -----------------------------------------------------
 
This is Microsoft Visual C++ runtime error in Rgui.exe
File =  tn/vec.h
Line 250
Expression: i<=n_
------------------------------------------------------------------------
-----------
 
 Thanks,
 Nikhil Garge
 Computer Science graduate student,
 University go Alabama Birmingham

 
 

	-----Original Message----- 
	From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk] 
	Sent: Thu 7/1/2004 2:36 AM 
	To: Nikhil R Garge 
	Cc: r-devel@stat.math.ethz.ch; Jun Yan 
	Subject: Re: [Rd] Bug in SOM package (PR#7038)
	
	

	Please send bugs in packages (I think this is som, not SOM, and
R does
	care) to the package maintainer (Cc:ed here), as the FAQ asks.
Also,
	please give the version of R and of the package used.
	
	I can't test this as I cannot even install som with gcc 3.4.0,
and I have
	just reported that to the maintainer.
	
	As the package maintainer has no access to R-bugs and basic
information is
	missing I am going to close this report on R-bugs and refer it
to the
	maintainer.
	
	On Thu, 1 Jul 2004 nikhilg@uab.edu wrote:
	
	> Bug in "SOM" package in R.
	> 
	> This simple code withot for loop runs:-------simple.r--------
	> 
	> library(som)
	> A <- as.matrix(read.table("C:/code/h.txt", sep="\t",
header=TRUE,
	> row.names=1))
	> print(som(A,1,2)$visual)
	> print(som(A,1,3)$visual)
	> ----------------------------------------
	> 
	> The same code if inserted in for loop generates "Assertion
failure" in
	> Rgui.exe.
	> 
	> This is Microsoft Visual C++ runtime error in Rgui.exe and
File =
	> tn/vec.h
	> 
	> Line 250
	> Expression: i<=n_
	> 
	> Code with for
loop:----------------------------sim.r--------------------
	> 
	> library(som)
	> A <- as.matrix(read.table("C:/code/h.txt", sep="\t",
header=TRUE,
	> row.names=1))
	> for(x in 2:3){
	> print(som(A,1,x)$visual)
	> }
	>
	> Thanks,
	> Nikhil Garge
	> Computer Science graduate student,
	> UAB
	
	--
	Brian D. Ripley,                  ripley@stats.ox.ac.uk
	Professor of Applied Statistics,
http://www.stats.ox.ac.uk/~ripley/
	University of Oxford,             Tel:  +44 1865 272861 (self)
	1 South Parks Road,                     +44 1865 272866 (PA)
	Oxford OX1 3TG, UK                Fax:  +44 1865 272595
	
	


	[[alternative HTML version deleted]]

From nali at umn.edu  Thu Jul  1 19:21:11 2004
From: nali at umn.edu (Na Li)
Date: Thu Jul  1 19:21:19 2004
Subject: [Rd] \middle in Rd.sty conflicts with newer LaTeX?
References: <1obrizahd4.fsf@bass.biostat.umn.edu>
	<Pine.LNX.4.44.0407011621400.1421-100000@gannet.stats>
Message-ID: <jelli34pa0.fsf@bass.biostat.umn.edu>

On 1 Jul 2004, Brian Ripley uttered the following:

> The conflict is with e-tex.  Please use latex, not e-latex.
> 
> This comes up on MikTeX (Windows) too.  We'll try to work around this
> for the next release.

Thanks.  However I couldn't figure out how to have etex run in
compatibility mode with GWTeX.  For now I just changed \middle -> \Rmiddle
in Rd.sty and everything seems to be working.  I did some poking around
and did not find \middle is used anywhere except in Rd.sty.

Michael

-- 
Na (Michael) Li, Ph.D.               
Division of Biostatistics          A443 Mayo Building, MMC 303   
School of Public Health            420 Delaware St SE            
University of Minnesota            Minneapolis, MN 55455         
Phone: (612) 626-4765              Email: nali@umn.edu                  
Fax:   (612) 626-0660              http://www.biostat.umn.edu/~nali

From ripley at stats.ox.ac.uk  Thu Jul  1 19:27:43 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Jul  1 19:27:45 2004
Subject: [Rd] \middle in Rd.sty conflicts with newer LaTeX?
In-Reply-To: <jelli34pa0.fsf@bass.biostat.umn.edu>
Message-ID: <Pine.LNX.4.44.0407011826170.5013-100000@gannet.stats>

On Thu, 1 Jul 2004, Na Li wrote:

> On 1 Jul 2004, Brian Ripley uttered the following:
> 
> > The conflict is with e-tex.  Please use latex, not e-latex.
> > 
> > This comes up on MikTeX (Windows) too.  We'll try to work around this
> > for the next release.
> 
> Thanks.  However I couldn't figure out how to have etex run in
> compatibility mode with GWTeX.  For now I just changed \middle -> \Rmiddle
> in Rd.sty and everything seems to be working.  I did some poking around
> and did not find \middle is used anywhere except in Rd.sty.

Yes, we know, but we have not yet clarified that it is not actually used 
*any*where by any user of Rd.sty.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From simon.urbanek at math.uni-augsburg.de  Thu Jul  1 19:28:20 2004
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Thu Jul  1 19:29:05 2004
Subject: [Rd] AS_NUMERIC and as.numeric - Could someone explain?
In-Reply-To: <40E38E8A.5080209@stat.wisc.edu>
References: <000701c45eb8$8e001520$82b98283@DH>
	<40E38E8A.5080209@stat.wisc.edu>
Message-ID: <0BE5C464-CB84-11D8-806A-000A959F327E@math.uni-augsburg.de>

On Jul 1, 2004, at 6:09 AM, Douglas Bates wrote:

> AS_NUMERIC in C more closely corresponds to as.double() in R
>
> All that as.numeric() in R does is assure that the result is of a 
> numeric mode.  It does not coerce integer variables to doubles.

Um... are you sure?? For the sake of lots of code I saw I hope you're 
wrong:

> Check, for example,
> str(as.numeric(1:100))

Yes:

 > str(as.double(1:10))
  num [1:10] 1 2 3 4 5 6 7 8 9 10
 > str(as.numeric(1:10))
  num [1:10] 1 2 3 4 5 6 7 8 9 10
 > str(1:10)
  int [1:10] 1 2 3 4 5 6 7 8 9 10

And moreover:

 > as.numeric
function (x, ...)
UseMethod("as.double")
<environment: namespace:base>

... admittedly I didn't answer the original question, but I suspect 
that the problem lies somewhere else ...

Simon

From bates at stat.wisc.edu  Thu Jul  1 20:27:11 2004
From: bates at stat.wisc.edu (Douglas Bates)
Date: Thu Jul  1 20:24:55 2004
Subject: [Rd] AS_NUMERIC and as.numeric - Could someone explain?
In-Reply-To: <0BE5C464-CB84-11D8-806A-000A959F327E@math.uni-augsburg.de>
References: <000701c45eb8$8e001520$82b98283@DH>
	<40E38E8A.5080209@stat.wisc.edu>
	<0BE5C464-CB84-11D8-806A-000A959F327E@math.uni-augsburg.de>
Message-ID: <40E4577F.5010704@stat.wisc.edu>

I knew I should have checked before I mailed that response. :-) I guess 
you are right and I was wrong.

I don't have the opportunity to check bits of R code on the computer 
that I use for email this month.  (I am in northern Canada and my only 
email connection is via a 24 Kb modem connection on a machine running 
Windows ME.  The modem connection is metered so I don't want to download 
the installer for R-1.9.1 for Windows just to be able to check a few 
bits of code.)  I'll try to stay quiet unless I'm sure of the answer.

Simon Urbanek wrote:
> On Jul 1, 2004, at 6:09 AM, Douglas Bates wrote:
> 
>> AS_NUMERIC in C more closely corresponds to as.double() in R
>>
>> All that as.numeric() in R does is assure that the result is of a 
>> numeric mode.  It does not coerce integer variables to doubles.
> 
> 
> Um... are you sure?? For the sake of lots of code I saw I hope you're 
> wrong:
> 
>> Check, for example,
>> str(as.numeric(1:100))
> 
> 
> Yes:
> 
>  > str(as.double(1:10))
>  num [1:10] 1 2 3 4 5 6 7 8 9 10
>  > str(as.numeric(1:10))
>  num [1:10] 1 2 3 4 5 6 7 8 9 10
>  > str(1:10)
>  int [1:10] 1 2 3 4 5 6 7 8 9 10
> 
> And moreover:
> 
>  > as.numeric
> function (x, ...)
> UseMethod("as.double")
> <environment: namespace:base>
> 
> ... admittedly I didn't answer the original question, but I suspect that 
> the problem lies somewhere else ...
> 
> Simon

From wwsprague at ucdavis.edu  Thu Jul  1 21:42:08 2004
From: wwsprague at ucdavis.edu (wwsprague@ucdavis.edu)
Date: Thu Jul  1 21:42:10 2004
Subject: [Rd] PDF text strangeness (PR#7043)
Message-ID: <20040701194208.C79A710E8A@slim.kubism.ku.dk>

Hi R-developers

I have noticed a strange little bug/feature:  I often create pdf's of plots, then edit them in Adobe Illustrator.  Generally this works great, but whenever I have text that is aligned vertically (along the y-axis usually), the text is written out as lots of individual objects.  When the text is horizontal (x-axis, other stuff), it is all one object.  I would prefer one object per label as that is a good deal easier to edit.

I am using Adobe Illustrator CS 11.0.0 in windows.

Thanks!
<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status = alpha
 major = 1
 minor = 9.1
 year = 2004
 month = 06
 day = 07
 language = R

Search Path:
 .GlobalEnv, my.frame, my.frame, my.frame, my.frame, my.frame, my.frame, my.frame, my.frame, my.frame, my.frame, my.frame, crab.landings, package:methods, package:stats, package:graphics, package:utils, Autoloads, package:base

From ripley at stats.ox.ac.uk  Thu Jul  1 22:18:02 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Jul  1 22:18:40 2004
Subject: [Rd] PDF text strangeness (PR#7043)
In-Reply-To: <20040701194208.C79A710E8A@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0407012104420.5526-100000@gannet.stats>

Where is the bug here?  Please read the R FAQ and learn what is required
in a bug report.

On Thu, 1 Jul 2004 wwsprague@ucdavis.edu wrote:

> I have noticed a strange little bug/feature:  I often create pdf's of
> plots, then edit them in Adobe Illustrator.  Generally this works great,
> but whenever I have text that is aligned vertically (along the y-axis
> usually), the text is written out as lots of individual objects.  When
> the text is horizontal (x-axis, other stuff), it is all one object.  I
> would prefer one object per label as that is a good deal easier to edit.

There is nothing to reproduce here.  Hint: if you look at the source code
and find PDF_Text you will see it only writes one object for each piece of
text.  I've just run an example, and each piece of vertical text (ylab
and axis labels) in

plot(1:10, ylab="foo")

is one object.

> I am using Adobe Illustrator CS 11.0.0 in windows.

You need to read the PDF code to determine what has actually been written
as an object: Illustrator's native format is not PDF and I suspect the
issue is in its PDF->AI converter.

> <<insert bug report here>>

None reported!

> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-linux-gnu
>  arch = i386
>  os = linux-gnu
>  system = i386, linux-gnu
>  status = alpha

Please, use a released version of R for bug reports.

>  major = 1
>  minor = 9.1
>  year = 2004
>  month = 06
>  day = 07
>  language = R

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Michael.G.Shafto at nasa.gov  Fri Jul  2 01:29:51 2004
From: Michael.G.Shafto at nasa.gov (Michael.G.Shafto@nasa.gov)
Date: Fri Jul  2 01:29:56 2004
Subject: [Rd] homals: Error in y[g[i, j],
	] : incorrect number of dimensions (PR#7045)
Message-ID: <20040701232951.36F1510915@slim.kubism.ku.dk>

Full_Name: Michael G. Shafto
Version: 1.9.1
OS: Microsoft Windows XP
Submission from: (NULL) (192.150.38.75)


> homals(x, sets=0, ndim=3, active=T, rank=3, level="NO", starplots=FALSE,
+ catplots=FALSE, trfplots=FALSE, lossplots=FALSE, hullplots=FALSE,
+ spanplots=FALSE, graphplot=TRUE, objplot=TRUE, objscores=TRUE,
+ objlabel=TRUE, offset=1.20, eps1 = -Inf, eps2=1e-5, itermax=32,
+ voronoi=FALSE, saveMe=TRUE, demo=FALSE, timer=FALSE, tk=FALSE)
Iteration:    1  Eigenvalues:   0.275420  0.182711  0.117240  Gain:   0.575371 
0.981319 
Iteration:    2  Eigenvalues:   0.284051  0.185338  0.129728  Gain:   0.599117 
0.992531 
Iteration:    3  Eigenvalues:   0.285723  0.186139  0.137560  Gain:   0.609422 
0.995753 

... etc. ...

Iteration:   26  Eigenvalues:   0.286144  0.186919  0.155740  Gain:   0.628804 
0.999988 
Iteration:   27  Eigenvalues:   0.286144  0.186919  0.155761  Gain:   0.628824 
0.999990 
Iteration:   28  Eigenvalues:   0.286144  0.186919  0.155778  Gain:   0.628841 
0.999991 
Error in y[g[i, j], ] : incorrect number of dimensions
------------------------------------------------------
I get this same error with various different parameter settings in homals.
For example,
     homals(x, graphplot = TRUE, objplot = TRUE)
produces the same error message.

I am using a rather large data set. 2237 rows and 1196 columns. 
Also, some variables have range=0 (all cases have the same value).
Still, the error message has no clear relation to either of these properties
of the data.
The Graphplot for dimension 1 vs. dimension 2 is produced in a readable .pdf
file.

From ripley at stats.ox.ac.uk  Fri Jul  2 06:49:54 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Jul  2 06:50:11 2004
Subject: (PR#7045) Re: [Rd] homals: Error in y[g[i, j], ] : incorrect number
Message-ID: <20040702044954.93CF910930@slim.kubism.ku.dk>

Function homals() is not part of R.  It appears to be in a contributed 
package `homals', but you did not say so.

To quote the FAQ

   Bug reports on contributed packages should be sent first to the package
   maintainer, and only submitted to the R-bugs repository by package
   maintainers, mentioning the package in the subject line.

I have closed this bug report on R-bugs.


On Fri, 2 Jul 2004 Michael.G.Shafto@nasa.gov wrote:

> Full_Name: Michael G. Shafto
> Version: 1.9.1
> OS: Microsoft Windows XP
> Submission from: (NULL) (192.150.38.75)
> 
> 
> > homals(x, sets=0, ndim=3, active=T, rank=3, level="NO", starplots=FALSE,
> + catplots=FALSE, trfplots=FALSE, lossplots=FALSE, hullplots=FALSE,
> + spanplots=FALSE, graphplot=TRUE, objplot=TRUE, objscores=TRUE,
> + objlabel=TRUE, offset=1.20, eps1 = -Inf, eps2=1e-5, itermax=32,
> + voronoi=FALSE, saveMe=TRUE, demo=FALSE, timer=FALSE, tk=FALSE)
> Iteration:    1  Eigenvalues:   0.275420  0.182711  0.117240  Gain:   0.575371 
> 0.981319 
> Iteration:    2  Eigenvalues:   0.284051  0.185338  0.129728  Gain:   0.599117 
> 0.992531 
> Iteration:    3  Eigenvalues:   0.285723  0.186139  0.137560  Gain:   0.609422 
> 0.995753 
> 
> ... etc. ...
> 
> Iteration:   26  Eigenvalues:   0.286144  0.186919  0.155740  Gain:   0.628804 
> 0.999988 
> Iteration:   27  Eigenvalues:   0.286144  0.186919  0.155761  Gain:   0.628824 
> 0.999990 
> Iteration:   28  Eigenvalues:   0.286144  0.186919  0.155778  Gain:   0.628841 
> 0.999991 
> Error in y[g[i, j], ] : incorrect number of dimensions
> ------------------------------------------------------
> I get this same error with various different parameter settings in homals.
> For example,
>      homals(x, graphplot = TRUE, objplot = TRUE)
> produces the same error message.
> 
> I am using a rather large data set. 2237 rows and 1196 columns. 
> Also, some variables have range=0 (all cases have the same value).
> Still, the error message has no clear relation to either of these properties
> of the data.
> The Graphplot for dimension 1 vs. dimension 2 is produced in a readable .pdf
> file.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From hb at maths.lth.se  Fri Jul  2 09:44:57 2004
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Fri Jul  2 09:45:09 2004
Subject: [Rd] \middle in Rd.sty conflicts with newer LaTeX?
In-Reply-To: <jelli34pa0.fsf@bass.biostat.umn.edu>
Message-ID: <002301c46008$7accbf20$01000001@hblaptop>

> -----Original Message-----
> From: r-devel-bounces@stat.math.ethz.ch 
> [mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of Na Li
> Sent: Thursday, July 01, 2004 7:21 PM
> To: r-devel@stat.math.ethz.ch
> Subject: Re: [Rd] \middle in Rd.sty conflicts with newer LaTeX?
> 
> 
> On 1 Jul 2004, Brian Ripley uttered the following:
> 
> > The conflict is with e-tex.  Please use latex, not e-latex.
> > 
> > This comes up on MikTeX (Windows) too.  We'll try to work 
> around this 
> > for the next release.
> 
> Thanks.  However I couldn't figure out how to have etex run 
> in compatibility mode with GWTeX.  For now I just changed 

See Duncan Murdoch's "Using MiKTeX with R for Windows" at

  http://www.murdoch-sutherland.com/Rtools/miktex.html 

and it tells you how. If you can't get e-tex compatibility mode to work,
just go for "plain" tex, latex, and pdftex; it works for me with MikTeX v2.4
and R v1.9.0.

> \middle -> \Rmiddle in Rd.sty and everything seems to be 
> working.  I did some poking around and did not find \middle 
> is used anywhere except in Rd.sty.
> 
> Michael
> 
> -- 
> Na (Michael) Li, Ph.D.               
> Division of Biostatistics          A443 Mayo Building, MMC 303   
> School of Public Health            420 Delaware St SE            
> University of Minnesota            Minneapolis, MN 55455         
> Phone: (612) 626-4765              Email: nali@umn.edu        
>           
> Fax:   (612) 626-0660              http://www.biostat.umn.edu/~nali

Henrik Bengtsson

From wolfram at fischer-zim.ch  Fri Jul  2 10:15:35 2004
From: wolfram at fischer-zim.ch (Wolfram Fischer)
Date: Fri Jul  2 10:15:46 2004
Subject: [Rd] mosaicplot: new argument for color of borders of mosaic cells
Message-ID: <20040702081535.GA2549@s1x.local>

A proposal:

Adding an argument ``border'' (default: NA) for mosaicplots
would give the opportunity to create another kind of nice plots.


Proposed code changes:

a) add argument ``border=NA'' to mosaicplot.default()
b) add ``border=border'' to the first to calls to polygon()
   within mosaicplot.default()
c) copying and adjusting the help page entry for ``border''
   of ``?polygon''.

Regards - Wolfram

From ripley at stats.ox.ac.uk  Fri Jul  2 10:15:58 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Jul  2 10:16:02 2004
Subject: [Rd] \middle in Rd.sty conflicts with newer LaTeX?
In-Reply-To: <002301c46008$7accbf20$01000001@hblaptop>
Message-ID: <Pine.LNX.4.44.0407020854120.23059-100000@gannet.stats>

We have now tracked down what \middle was used for, and it was last needed 
4 years ago.  So it can be removed, and has been in R-devel.


On Fri, 2 Jul 2004, Henrik Bengtsson wrote:

> > -----Original Message-----
> > From: r-devel-bounces@stat.math.ethz.ch 
> > [mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of Na Li
> > Sent: Thursday, July 01, 2004 7:21 PM
> > To: r-devel@stat.math.ethz.ch
> > Subject: Re: [Rd] \middle in Rd.sty conflicts with newer LaTeX?
> > 
> > 
> > On 1 Jul 2004, Brian Ripley uttered the following:
> > 
> > > The conflict is with e-tex.  Please use latex, not e-latex.
> > > 
> > > This comes up on MikTeX (Windows) too.  We'll try to work 
> > around this 
> > > for the next release.
> > 
> > Thanks.  However I couldn't figure out how to have etex run 
> > in compatibility mode with GWTeX.  For now I just changed 
> 
> See Duncan Murdoch's "Using MiKTeX with R for Windows" at
> 
>   http://www.murdoch-sutherland.com/Rtools/miktex.html 
> 
> and it tells you how. If you can't get e-tex compatibility mode to work,
> just go for "plain" tex, latex, and pdftex; it works for me with MikTeX v2.4
> and R v1.9.0.
> 
> > \middle -> \Rmiddle in Rd.sty and everything seems to be 
> > working.  I did some poking around and did not find \middle 
> > is used anywhere except in Rd.sty.
> > 
> > Michael
> > 
> > -- 
> > Na (Michael) Li, Ph.D.               
> > Division of Biostatistics          A443 Mayo Building, MMC 303   
> > School of Public Health            420 Delaware St SE            
> > University of Minnesota            Minneapolis, MN 55455         
> > Phone: (612) 626-4765              Email: nali@umn.edu        
> >           
> > Fax:   (612) 626-0660              http://www.biostat.umn.edu/~nali
> 
> Henrik Bengtsson
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From rpeng at jhsph.edu  Fri Jul  2 16:18:06 2004
From: rpeng at jhsph.edu (Roger D. Peng)
Date: Fri Jul  2 16:18:11 2004
Subject: [Rd] Guidelines for writing model term functions (?)
Message-ID: <40E56E9E.1060805@jhsph.edu>

Are there any general guidelines for writing functions that appear in 
model formulas for functions like lm()/glm()?  The ones I can think of 
are ns()/bs() in `splines' and s() in `mgcv'.  It seems that ns()/bs() 
basically create matrix with a number of attributes and a class, while 
s() returns a list of parameters.  It seems that gam() in `mgcv' has 
its own way of dealing with formulas so maybe that's not a great 
example, but are there any suggestions for writing a function that 
might appear in the formula for, say, lm() or glm()?

Thanks,

-roger

-- 
Roger D. Peng
http://www.biostat.jhsph.edu/~rpeng/

From ripley at stats.ox.ac.uk  Fri Jul  2 17:15:45 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Jul  2 17:15:51 2004
Subject: [Rd] Guidelines for writing model term functions (?)
In-Reply-To: <40E56E9E.1060805@jhsph.edu>
Message-ID: <Pine.LNX.4.44.0407021610310.27303-100000@gannet.stats>

Well, there are examples like log, too, and poly() is a good one.

poly, ns and bs are special because they participate in the safe 
prediction scheme (?SafePrediction). If you don't need that, just return a 
vector or matrix (whose columns will be treated as a set of vectors).


On Fri, 2 Jul 2004, Roger D. Peng wrote:

> Are there any general guidelines for writing functions that appear in 
> model formulas for functions like lm()/glm()?  The ones I can think of 
> are ns()/bs() in `splines' and s() in `mgcv'.  It seems that ns()/bs() 
> basically create matrix with a number of attributes and a class, while 
> s() returns a list of parameters.  It seems that gam() in `mgcv' has 
> its own way of dealing with formulas so maybe that's not a great 
> example, but are there any suggestions for writing a function that 
> might appear in the formula for, say, lm() or glm()?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From eweese at bank-banque-canada.ca  Fri Jul  2 18:59:16 2004
From: eweese at bank-banque-canada.ca (eweese@bank-banque-canada.ca)
Date: Fri Jul  2 18:59:18 2004
Subject: [Rd] make fails with utf-8 locale, RH9 (PR#6958)
Message-ID: <20040702165916.692A91095F@slim.kubism.ku.dk>

I don't know enough to be sure that this is a related problem, but it 
looks similar...

I just compiled 1.9.1 on sparc-sun-solaris, and ld would do

collect2: ld terminated with signal 11 [Segmentation Fault], core dumped

in ./configure.  This is because LC_CTYPE was set to C.  If I deleted 
that line, leaving LC_CTYPE at its standard setting of 
"en_CA.ISO8859-1", ld worked fine.  If I try to compile a simple program 
with LC_CTYPE=C, it works fine with

$ gcc prog.c

but ld breaks if I do

$ gcc prog.c -lm

Anyways, I'm not sure whether this is an R problem, or an autoconf 
problem, or what, but I thought I would try here first...

Thanks.

From ripley at stats.ox.ac.uk  Fri Jul  2 19:21:35 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Jul  2 19:21:46 2004
Subject: [Rd] make fails with utf-8 locale, RH9 (PR#6958)
In-Reply-To: <20040702165916.692A91095F@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0407021818030.28693-100000@gannet.stats>

There is no known problem with LANG=C on Solaris and it is tested
regularly. Clearly from

> but ld breaks if I do
>
> $ gcc prog.c -lm

this is nothing to do with R or autoconf.

On Fri, 2 Jul 2004 eweese@bank-banque-canada.ca wrote:

> I don't know enough to be sure that this is a related problem, but it 
> looks similar...
> 
> I just compiled 1.9.1 on sparc-sun-solaris, and ld would do
> 
> collect2: ld terminated with signal 11 [Segmentation Fault], core dumped
> 
> in ./configure.  This is because LC_CTYPE was set to C.  If I deleted 
> that line, leaving LC_CTYPE at its standard setting of 
> "en_CA.ISO8859-1", ld worked fine.  If I try to compile a simple program 

That is *NOT* a utf-8 locale.

> with LC_CTYPE=C, it works fine with
> 
> $ gcc prog.c
> 
> but ld breaks if I do
> 
> $ gcc prog.c -lm
> 
> Anyways, I'm not sure whether this is an R problem, or an autoconf 
> problem, or what, but I thought I would try here first...

Please do read the section on BUGS in the R FAQ, and do not use R-bugs to 
report errors in your own system configuration.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From weigand.stephen at charter.net  Sat Jul  3 05:09:38 2004
From: weigand.stephen at charter.net (weigand.stephen@charter.net)
Date: Sat Jul  3 05:09:41 2004
Subject: [Rd] DSTEIN error (PR#7047)
Message-ID: <20040703030938.EFBC010930@slim.kubism.ku.dk>

Full_Name: Stephen Weigand
Version: 1.9.0
OS: Mac OS X 10.3.4
Submission from: (NULL) (68.115.89.235)


When running an iteratively reweighted least squares program R crashes and the
following is
written to the console.app (when using R GUI) or to stdout (when using R from
the command
line):

Parameter 5 to routine DSTEIN was incorrect
Mac OS BLAS parameter error in DSTEIN, parameter #0, (unavailable), is 0

In case it helps, here's the function and function call that causes the crash.

n <- 4
p <- 1
f <- 2; k <- 2

lms.bcn.univar <- function(y, B, p, f, k, lambda.0, mu.0, sigma.0){

  n <- length(y)
  
  D11 <- matrix(1, nrow = p, ncol = n)
  
  D1 <- rbind(cbind(D11, matrix(0, nrow = p,  ncol = f)),
              cbind(matrix(0, nrow = f, ncol = n), diag(f)))

  D22 <- rbind(rep(1:0,n),
               rep(0:1,n))
  
  x1 <- t(D22)[,1]
  x2 <- t(D22)[,2]
  
  D2 <- rbind(cbind(diag(n), matrix(0, nrow = n, ncol = 2*n)),
              cbind(matrix(0, nrow = f, ncol = n), D22))
  
  R <- matrix(0, nrow = n, ncol = k * n)
  Ra <- diag(n + n*k)


  A11 <- function(lambda, mu, sigma){
    diag((1 + 2 * lambda^2 * sigma^2)/(mu^2 * sigma^2), nrow = n)
  }
  
  A22 <- function(lambda, sigma, n) {

    A <- matrix(0, nrow = n*2, ncol = n*2)
    
    block <- c(7 * sigma^2 / 4, lambda * sigma,
               lambda * sigma, 2 / (sigma^2))
    
    ## code to get the indices of the elements of a block
    ## diagonal matrix when the matrix is treated as a vector.    
    m <- n*2
    s <- integer(0)
    for (i in seq(1, m-1, by = 2)) s <- c(s, rep(i:(i+1),2))
    block.indices <- m * rep(0:(m-1), each = 2) + s

    A[block.indices] <- block
    return(A)
  }
  
  A12 <- function(lambda, mu, sigma, n) {
    A <- matrix(0, nrow = n, ncol = n * 2)
    
    block <- c(-1/(2 * mu), (2*lambda)/(mu * sigma))
    
    block.indices <- n * 0:(2*n-1) + rep(1:n, each = 2)

    A[block.indices] <- block
    return(A)
  }
  
  I.exp <- function(A11,A12,A22) {
    rbind(cbind(A11, A12),
          cbind(t(A12),A22))
  }
  
  G <- function(D2, Ra, A11, A12, A22){
    D2 %*% Ra %*% I.exp(A11,A12,A22) %*% t(Ra) %*% t(D2)
  }
  
  W <- function(G){
    G11 <- G[1:n, 1:4]
    G12 <- G[1:4, 5:6]
    G22 <- G[5:6, 5:6]
  }
  
  W <- function(G,n,k){
    G11 <- G[1:n, 1:n]
    G12 <- G[1:n, (n+1):(n+k)]
    G22 <- G[(n+1):(n+k), (n+1):(n+k)]
    
    G11 - G12 %*% solve(G22) %*% t(G12)
  }
  
  zbc <- function(y,lambda, mu, sigma) {
    ((y/mu)^lambda - 1) / (lambda * sigma)
  }
  
  L1 <- function(y,lambda, mu, sigma) {
    z <- zbc(y,lambda, mu, sigma)
    return(z/(mu * sigma) + lambda * (z^2 - 1) / mu)
  }
  
  L2 <- function(y,lambda,mu,sigma){
    z <- zbc(y,lambda, mu, sigma)
    
    L.lambda <- z/lambda * (z - log(y/mu)/sigma) - log(y/mu) * (z^2 - 1)
    L.sigma <- (z^2 - 1)/sigma
    
    L <- c(L.lambda, L.sigma)
    
    return(L[c(1, n + 1) + rep(0:(n-1), each = 2)])
  }
  
  u1 <- function(L1, L2, G, R, D22) {
    G12 <- G[1:n, (n+1):(n+k)]
    G22 <- G[(n+1):(n+k), (n+1):(n+k)]
    return(L1 + (R - G12 %*% solve(G22) %*% D22) %*% L2)
  }
  
  u2 <- function(L2, A12, A22, R, D11, beta.new, beta.old){
    L2 - (t(A12) + A22 %*% t(R)) %*% t(D11) %*% (beta.new - beta.old)
  }
  
  loglike <- function(y, l, m, s) {
    sum( l * log(y/m) - log(s) - 0.5 * zbc(y,l,m,s)^2 )
  }
  
  loglikeOptim <- function(par,y){
    lambda <- par[1]
    mu <- par[2]
    sigma <- par[3]
    
    -1 * loglike(y, lambda, mu, sigma)
  }

  ll.0 <- loglike(y, lambda.0, mu.0, sigma.0)
  require(MASS)

  lambda.old <- lambda.0; mu.old <- mu.0; sigma.old <- sigma.0

  parameters <- as.data.frame(matrix(NA, ncol = 4, nrow = B))
  colnames(parameters) <- c("lambda", "mu", "sigma", "loglike")
  
  for(i in 1:B) {
    ##cat(paste(i, ","))
    a11 <- A11(lambda.old, mu.old, sigma.old)
    a22 <- A22(lambda.old, sigma.old, n)  
    a12 <- A12(lambda.old, mu.old, sigma.old, n)
    
    g <- G(D2, Ra, a11, a12, a22); w <- W(g, n ,2) 
    
    l1 <- L1(y, lambda.old, mu.old, sigma.old)
    l2 <- L2(y, lambda.old, mu.old, sigma.old)  
    
    Y.mu <- solve(w) %*% u1(l1, l2, g, R, D22) + t(D11) %*% mu.old
    mu.new <- coef(lm.gls(Y.mu ~ 1, W = w))
    
    psi.old <- rbind(lambda.old, sigma.old)
    Y.psi <- solve(a22) %*% u2(l2, a12, a22, R, D11, mu.new, mu.old) + t(D22)
%*% psi.old
    psi.new <- coef(lm.gls(Y.psi ~ -1 + x1 + x2, W = a22))
    
    lambda.new <- psi.new[1]; sigma.new <- psi.new[2]
    
    parameters[i, 1] <- lambda.new
    parameters[i, 2] <- mu.new
    parameters[i, 3] <- sigma.new
    parameters[i, 4] <- loglike(y, lambda.new, mu.new, sigma.new)

    ### update the old with the new
    lambda.old <- lambda.new; mu.old <- mu.new; sigma.old <- sigma.new;
                  
  }

  return(list(lambda.0 = lambda.0, mu.0 = mu.0, sigma.0 = sigma.0, loglike.0 =
ll.0,
              parameters = parameters))
}
                  

require(MASS)

set.seed(1676)
y <- exp(rnorm(20) + 2)
y <- round(y,2)
##print(lms.bcn.univar(y, B=15, p=1, f=2, k=2, 0.3, 8, 0.8))

y <- rgamma(100,3,2)
print(lms.bcn.univar(y, B=5, p=1, f=2, k=2, 0.3,
                     mu.0 = median(y),
                     sigma.0 = sd(y)/median(y)))

From f.harrell at vanderbilt.edu  Sat Jul  3 05:16:11 2004
From: f.harrell at vanderbilt.edu (Frank E Harrell Jr)
Date: Sat Jul  3 05:22:06 2004
Subject: [Rd] Top-level code in packages
Message-ID: <40E624FB.5060208@vanderbilt.edu>

Brian Ripley stated that in the future it will not be a good idea to 
have top-level code in R packages other than assignments.  There is one 
important exception, though it leads instantly to an assignment.  To 
maintain compatibility across multiple platforms (R, S-Plus, and more 
than one version of each, Windows, Linux, etc.) I frequently use if( ) 
statements to conditionally define functions depending on the operating 
system and the version of R or S-Plus in effect.

Frank
-- 
Frank E Harrell Jr   Professor and Chair           School of Medicine
                      Department of Biostatistics   Vanderbilt University

From ripley at stats.ox.ac.uk  Sat Jul  3 07:30:36 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Jul  3 07:30:41 2004
Subject: [Rd] Top-level code in packages
In-Reply-To: <40E624FB.5060208@vanderbilt.edu>
Message-ID: <Pine.LNX.4.44.0407030622030.32334-100000@gannet.stats>

On Fri, 2 Jul 2004, Frank E Harrell Jr wrote:

> Brian Ripley stated that in the future it will not be a good idea to 
> have top-level code in R packages other than assignments.  There is one 
> important exception, though it leads instantly to an assignment.  To 
> maintain compatibility across multiple platforms (R, S-Plus, and more 
> than one version of each, Windows, Linux, etc.) I frequently use if( ) 
> statements to conditionally define functions depending on the operating 
> system and the version of R or S-Plus in effect.

That _is_ a top-level assignment. `Defining' a function is actually
assigning a value to a symbol, and code inside if, for, etc is executed at
top level.

I prefer to write

foo <- if(tools:::.OStype() == "windows") {...} else {...}

for conditional `definitions' precisely because it is clearer that is what 
is going on.

BTW, if you want to test the OS you can't do it with .Platform$OS.type and
allow cross-building, hence the test illustrated.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Sat Jul  3 07:41:06 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat Jul  3 07:41:09 2004
Subject: [Rd] DSTEIN error (PR#7047)
Message-ID: <20040703054106.186F710930@slim.kubism.ku.dk>

What does `R crashes' mean?  Please see the R posting guide.

I think the error message indicates a bug in MacOS X.  What made you think 
this was a bug in R?  (It depends of course what `crashes' meant - if the 
R application aborted it would be, but not if it just gave an error 
message (hardly a crash) nor if the MacOS runtime aborted.)

The code runs to completion on Windows and Linux with a variety of BLASes,
including that supplied with R (which MacOS X is unable to use as it is
Fortran).

On Sat, 3 Jul 2004 weigand.stephen@charter.net wrote:

> Full_Name: Stephen Weigand
> Version: 1.9.0
> OS: Mac OS X 10.3.4
> Submission from: (NULL) (68.115.89.235)
> 
> 
> When running an iteratively reweighted least squares program R crashes and the
> following is
> written to the console.app (when using R GUI) or to stdout (when using R from
> the command
> line):
> 
> Parameter 5 to routine DSTEIN was incorrect
> Mac OS BLAS parameter error in DSTEIN, parameter #0, (unavailable), is 0

....


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From deleeuw at stat.ucla.edu  Sat Jul  3 09:24:42 2004
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Sat Jul  3 09:24:52 2004
Subject: [Rd] OS X problem with DSTEIN in IGLS code
Message-ID: <0D26A378-CCC2-11D8-A180-000A95A67E82@stat.ucla.edu>

1. R-devel on OS X  aborts when the code below  is run after spitting 
out the
message

Loading required package: MASS
Parameter 5 to routine DSTEIN was incorrect
Mac OS BLAS parameter error in DSTEIN, parameter #0, (unavailable), is 0

2. I compiled R-patched using the included BLAS and Lapack, although
Brian says this is impossible on OS X, because they are in FORTRAN (??).
This version of R runs the code below just fine.

3. So there seems to be a difference between the implementation of
DSTEIN in vecLib.framework and in other BLAS versions. The error
message comes from vecLib.

4. To build libRlapack.dylib on OS X add the flags "-flat_namespace
-undefined suppress" to the link.

-------------- next part --------------


5. I will post this version of R-1.9.1 (using the X11 version of Tcl/Tk  
8.5
and the R version of BLAS and Lapack) on gifi.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 8130 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        
From ripley at stats.ox.ac.uk  Sat Jul  3 09:59:09 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Jul  3 09:59:12 2004
Subject: [Rd] OS X problem with DSTEIN in IGLS code
In-Reply-To: <0D26A378-CCC2-11D8-A180-000A95A67E82@stat.ucla.edu>
Message-ID: <Pine.LNX.4.44.0407030850060.941-100000@gannet.stats>

On Sat, 3 Jul 2004, Jan de Leeuw wrote:

> 1. R-devel on OS X  aborts when the code below  is run after spitting 
> out the
> message
> 
> Loading required package: MASS
> Parameter 5 to routine DSTEIN was incorrect
> Mac OS BLAS parameter error in DSTEIN, parameter #0, (unavailable), is 0
> 
> 2. I compiled R-patched using the included BLAS and Lapack, although
> Brian says this is impossible on OS X, because they are in FORTRAN (??).

It depends on the compiler build.  The version some (most?) people have of
the gcc tools has a -lg2c that cannot be linked into a dylib.  You seem to
have one that does but no one else has reported success.  Only a week ago
someone reported being unable to build with the default configure settings
on MacOS X for exactly this reason.

> This version of R runs the code below just fine.
> 
> 3. So there seems to be a difference between the implementation of
> DSTEIN in vecLib.framework and in other BLAS versions. The error
> message comes from vecLib.

Correction: DSTEIN is part of LAPACK, not BLAS

In short, that is a MacOS error, for there is a reference implementation
of LAPACK. It is compounded by an error in the error message.  Have you
reported it to `MacOS-bugs' yet?  Please do so.

> 4. To build libRlapack.dylib on OS X add the flags "-flat_namespace
> -undefined suppress" to the link.

That's not what works for other people.  Why is is necessary for you?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jago at mclink.it  Sat Jul  3 12:48:50 2004
From: jago at mclink.it (stefano iacus)
Date: Sat Jul  3 12:48:42 2004
Subject: [Rd] OS X problem with DSTEIN in IGLS code
In-Reply-To: <Pine.LNX.4.44.0407030850060.941-100000@gannet.stats>
References: <Pine.LNX.4.44.0407030850060.941-100000@gannet.stats>
Message-ID: <91AFD6A6-CCDE-11D8-A951-000A95C87F66@mclink.it>

If I remember well, Jan is using g77 3.5(!) from KHanna page? I'm I 
right Jan?
We have to solve this g77 issues on Mac OS X soon as many packages 
doesn't pass make check when they contain fortran code.
I hope I can make some advance with xlf to see if I can manage to fix 
most of these.
stefano

On Jul 3, 2004, at 9:59 AM, Prof Brian Ripley wrote:

> On Sat, 3 Jul 2004, Jan de Leeuw wrote:
>
>> 1. R-devel on OS X  aborts when the code below  is run after spitting
>> out the
>> message
>>
>> Loading required package: MASS
>> Parameter 5 to routine DSTEIN was incorrect
>> Mac OS BLAS parameter error in DSTEIN, parameter #0, (unavailable), 
>> is 0
>>
>> 2. I compiled R-patched using the included BLAS and Lapack, although
>> Brian says this is impossible on OS X, because they are in FORTRAN 
>> (??).
>
> It depends on the compiler build.  The version some (most?) people 
> have of
> the gcc tools has a -lg2c that cannot be linked into a dylib.  You 
> seem to
> have one that does but no one else has reported success.  Only a week 
> ago
> someone reported being unable to build with the default configure 
> settings
> on MacOS X for exactly this reason.
>
>> This version of R runs the code below just fine.
>>
>> 3. So there seems to be a difference between the implementation of
>> DSTEIN in vecLib.framework and in other BLAS versions. The error
>> message comes from vecLib.
>
> Correction: DSTEIN is part of LAPACK, not BLAS
>
> In short, that is a MacOS error, for there is a reference 
> implementation
> of LAPACK. It is compounded by an error in the error message.  Have you
> reported it to `MacOS-bugs' yet?  Please do so.
>
>> 4. To build libRlapack.dylib on OS X add the flags "-flat_namespace
>> -undefined suppress" to the link.
>
> That's not what works for other people.  Why is is necessary for you?
>
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From bolker at zoo.ufl.edu  Sat Jul  3 15:42:37 2004
From: bolker at zoo.ufl.edu (Ben Bolker)
Date: Sat Jul  3 15:43:09 2004
Subject: [Rd] do_optimhess vs. fdHess ...
Message-ID: <40E6B7CD.90406@zoo.ufl.edu>


   Quick question:
   poking around and comparing the performance of do_optimhess
(C code within optim.c) and fdHess (in the nlme package), it looks
like do_optimhess evaluates an n-parameter function (2*n)^2 times,
while fdHess evaluates it (n+1)*(n+2)/2 times, to find a
numeric estimate of the Hessian -- and only (n^2+1) of do_optimhess's
evaluations are for unique values of the parameters.
Is there something I'm missing?
(My guess is that it's the result of evaluating the Hessian by comparing
evaluations of the gradient, which might overlap in the
numerical values they compute -- but which would make sense
if you were computing the gradient directly rather than by
finite differencing.)

   The reason I ask is that I'm working with some objective
functions that are moderately slow, and the Hessian calculation
at the end can take nearly as much time/as many function
evaluations as finding the optimum in the first place
(64 vs 79 function evaluations in one recent example)

    I can hack my own optim() that substitutes fdHess for do_optimhess
at the end if no gradient function is defined, but just wanted
to know if it would be a bad idea ... (?fdHess cites a reason
for its design, but I don't see any explanations lurking in the
do_optimhess code ...)

   [this is in R 1.9.0, but I don't see anything in the NEWS
file for 1.9.1 that indicates anything has changed ...]

  thanks,
    Ben Bolker

From f.harrell at vanderbilt.edu  Sat Jul  3 15:51:10 2004
From: f.harrell at vanderbilt.edu (Frank E Harrell Jr)
Date: Sat Jul  3 15:57:18 2004
Subject: [Rd] Top-level code in packages
In-Reply-To: <Pine.LNX.4.44.0407030622030.32334-100000@gannet.stats>
References: <Pine.LNX.4.44.0407030622030.32334-100000@gannet.stats>
Message-ID: <40E6B9CE.5010606@vanderbilt.edu>

Prof Brian Ripley wrote:
> On Fri, 2 Jul 2004, Frank E Harrell Jr wrote:
> 
> 
>>Brian Ripley stated that in the future it will not be a good idea to 
>>have top-level code in R packages other than assignments.  There is one 
>>important exception, though it leads instantly to an assignment.  To 
>>maintain compatibility across multiple platforms (R, S-Plus, and more 
>>than one version of each, Windows, Linux, etc.) I frequently use if( ) 
>>statements to conditionally define functions depending on the operating 
>>system and the version of R or S-Plus in effect.
> 
> 
> That _is_ a top-level assignment. `Defining' a function is actually
> assigning a value to a symbol, and code inside if, for, etc is executed at
> top level.
> 
> I prefer to write
> 
> foo <- if(tools:::.OStype() == "windows") {...} else {...}
> 
> for conditional `definitions' precisely because it is clearer that is what 
> is going on.

I use that sort of construct a lot, except that tools::: can't be used 
in general for backwards compatibility and for compatibility with 
S-Plus.  But often I use the following construct and would like to keep 
doing so, especially when defining functions for compatibility when the 
function only needs defining for a subset of the supported systems:

if(.R. || .SV4.) {  # variables defined in Hmisc or Design package
  foo <- function( . . . ) {
  }
  NULL   # prevents printing a result in S-Plus
}

> 
> BTW, if you want to test the OS you can't do it with .Platform$OS.type and
> allow cross-building, hence the test illustrated.
> 

Thanks Brian,

Frank

-- 
Frank E Harrell Jr   Professor and Chair           School of Medicine
                      Department of Biostatistics   Vanderbilt University

From deleeuw at stat.ucla.edu  Sat Jul  3 18:59:26 2004
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Sat Jul  3 18:59:38 2004
Subject: [Rd] OS X problem with DSTEIN in IGLS code
In-Reply-To: <91AFD6A6-CCDE-11D8-A951-000A95C87F66@mclink.it>
References: <Pine.LNX.4.44.0407030850060.941-100000@gannet.stats>
	<91AFD6A6-CCDE-11D8-A951-000A95C87F66@mclink.it>
Message-ID: <577C1DEE-CD12-11D8-94CA-000A95A67E82@stat.ucla.edu>

[cabledoc110:~] deleeuw% gcc -v
Reading specs from /usr/libexec/gcc/darwin/ppc/3.3/specs
Thread model: posix
gcc version 3.3 20030304 (Apple Computer, Inc. build 1660)

[cabledoc110:~] deleeuw% g77 -v
Reading specs from  
/usr/local/lib/gcc/powerpc-apple-darwin7.3.0/3.5.0/specs
Configured with: ../gcc/configure --enable-threads=posix  
--enable-languages=f77
Thread model: posix
gcc version 3.5.0 20040429 (experimental)

I have tried xlf as well, but no success so far.

On Jul 3, 2004, at 3:48, stefano iacus wrote:

> If I remember well, Jan is using g77 3.5(!) from KHanna page? I'm I  
> right Jan?
> We have to solve this g77 issues on Mac OS X soon as many packages  
> doesn't pass make check when they contain fortran code.
> I hope I can make some advance with xlf to see if I can manage to fix  
> most of these.
> stefano
>
> On Jul 3, 2004, at 9:59 AM, Prof Brian Ripley wrote:
>
>> On Sat, 3 Jul 2004, Jan de Leeuw wrote:
>>
>>> 1. R-devel on OS X  aborts when the code below  is run after spitting
>>> out the
>>> message
>>>
>>> Loading required package: MASS
>>> Parameter 5 to routine DSTEIN was incorrect
>>> Mac OS BLAS parameter error in DSTEIN, parameter #0, (unavailable),  
>>> is 0
>>>
>>> 2. I compiled R-patched using the included BLAS and Lapack, although
>>> Brian says this is impossible on OS X, because they are in FORTRAN  
>>> (??).
>>
>> It depends on the compiler build.  The version some (most?) people  
>> have of
>> the gcc tools has a -lg2c that cannot be linked into a dylib.  You  
>> seem to
>> have one that does but no one else has reported success.  Only a week  
>> ago
>> someone reported being unable to build with the default configure  
>> settings
>> on MacOS X for exactly this reason.
>>
>>> This version of R runs the code below just fine.
>>>
>>> 3. So there seems to be a difference between the implementation of
>>> DSTEIN in vecLib.framework and in other BLAS versions. The error
>>> message comes from vecLib.
>>
>> Correction: DSTEIN is part of LAPACK, not BLAS
>>
>> In short, that is a MacOS error, for there is a reference  
>> implementation
>> of LAPACK. It is compounded by an error in the error message.  Have  
>> you
>> reported it to `MacOS-bugs' yet?  Please do so.
>>
>>> 4. To build libRlapack.dylib on OS X add the flags "-flat_namespace
>>> -undefined suppress" to the link.
>>
>> That's not what works for other people.  Why is is necessary for you?
>>
>> --  
>> Brian D. Ripley,                  ripley@stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>
>> ______________________________________________
>> R-devel@stat.math.ethz.ch mailing list
>> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>>
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 8130 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au

From ripley at stats.ox.ac.uk  Sat Jul  3 19:30:35 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Jul  3 19:30:44 2004
Subject: [Rd] Top-level code in packages
In-Reply-To: <40E6B9CE.5010606@vanderbilt.edu>
Message-ID: <Pine.LNX.4.44.0407031829080.1296-100000@gannet.stats>

On Sat, 3 Jul 2004, Frank E Harrell Jr wrote:

[...]

> I use that sort of construct a lot, except that tools::: can't be used 
> in general for backwards compatibility and for compatibility with 
> S-Plus.  But often I use the following construct and would like to keep 
> doing so, especially when defining functions for compatibility when the 
> function only needs defining for a subset of the supported systems:
> 
> if(.R. || .SV4.) {  # variables defined in Hmisc or Design package
>   foo <- function( . . . ) {
>   }
>   NULL   # prevents printing a result in S-Plus
> }

That's fine, as its effect is a top-level assignment and nothing else 
useful (the NULL will be pointless, but who cares).


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From baron at psych.upenn.edu  Sun Jul  4 15:34:59 2004
From: baron at psych.upenn.edu (baron@psych.upenn.edu)
Date: Sun Jul  4 15:35:06 2004
Subject: [Rd] bad link in R/library/stats4/html/coef-methods.html (PR#7050)
Message-ID: <20040704133459.D12AA1091D@slim.kubism.ku.dk>

Full_Name: Jonathan Baron
Version: 1.9.1
OS: Lunux
Submission from: (NULL) (141.158.44.22)


The link from "coef" doesn't go anywhere.  Should probably go to
R/library/stats/html/coefficients.html
This applies to all the "coef" pages in stats4.

From ripley at stats.ox.ac.uk  Sun Jul  4 16:02:39 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Jul  4 16:02:47 2004
Subject: [Rd] bad link in R/library/stats4/html/coef-methods.html (PR#7050)
In-Reply-To: <20040704133459.D12AA1091D@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0407041500500.10171-100000@gannet.stats>

On Sun, 4 Jul 2004 baron@psych.upenn.edu wrote:

> Full_Name: Jonathan Baron
> Version: 1.9.1
> OS: Lunux
> Submission from: (NULL) (141.158.44.22)
> 
> 
> The link from "coef" doesn't go anywhere.  Should probably go to
> R/library/stats/html/coefficients.html

Note that the html pages are not in the sources, and the change needs to 
be made in the sources.

> This applies to all the "coef" pages in stats4.

Are there any others?  I can't find another instance in the sources.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From maechler at stat.math.ethz.ch  Mon Jul  5 10:26:19 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon Jul  5 10:26:23 2004
Subject: [Rd] homals: Error in y[g[i, j],
	]: incorrect number of dimensions (PR#7045)
Message-ID: <20040705082619.90907108FD@slim.kubism.ku.dk>

>>>>> "Michael" == Michael G Shafto <Michael.G.Shafto@nasa.gov>
>>>>>     on Fri,  2 Jul 2004 01:29:51 +0200 (CEST) writes:

    Michael> Full_Name: Michael G. Shafto Version: 1.9.1 OS:
    Michael> Microsoft Windows XP Submission from: (NULL)
    Michael> (192.150.38.75)


    >> homals(x, sets=0, ndim=3, active=T, rank=3, level="NO",
    >> starplots=FALSE,
    ...........


this is neither about a standard (core or recommended) package
nor is it reproducible.

===> this bug report is *definitely not* appropriate for R-bugs.
     please do read the posting guide
     and the section "R Bugs" (chapt.9) in the "R FAQ" (manual)

Regards,
Martin Maechler

From Weigand.Stephen at mayo.edu  Tue Jul  6 23:24:20 2004
From: Weigand.Stephen at mayo.edu (Weigand.Stephen@mayo.edu)
Date: Tue Jul  6 23:24:22 2004
Subject: [Rd] 2nd sentence of ?attributes has a typo (PR#7060)
Message-ID: <20040706212420.0CFD8108E6@slim.kubism.ku.dk>

The second sentence of the Description of ?attributes has 
a typo. Either "the" or "an" (but not both) should be deleted. 

  Description:
  
       These functions access an object's attribute list. The 
       first form above returns the an object's attribute list.

(I'm using 1.9.0 now, but the typo also exists in 1.9.1 
for Mac OS X.) 

Thank you,

Stephen

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.8
 arch = sparc
 os = solaris2.8
 system = sparc, solaris2.8
 status = 
 major = 1
 minor = 9.0
 year = 2004
 month = 04
 day = 12
 language = R

Search Path:
 .GlobalEnv, package:survival, package:Hmisc, package:methods, 
 package:stats, package:graphics, package:utils, Autoloads, package:base

From bauerda at ieee.org  Tue Jul  6 20:25:07 2004
From: bauerda at ieee.org (bauerda@ieee.org)
Date: Tue Jul  6 23:31:42 2004
Subject: [Rd] Wrong object type produced - LANGSXP should be LISTSXP
	(PR#7055)
Message-ID: <20040706182507.2731B108D8@slim.kubism.ku.dk>

Full_Name: David Bauer
Version: 1.9
OS: Linux
Submission from: (NULL) (160.91.245.8)


In the file gram.y, the xxsubscript function generates a LANGSXP with another
LANGSXP as its CDR.  I believe that this is a mistake and that the second
LANGSXP should be a LISTSXP.  The inputs a1, a3 are parameters to the subscript
function (a2), and as such they should be in a dotted-pair list.

David Bauer


--- gram.y.orig      2003-11-15 05:40:35.000000000 -0500
+++ gram.y        2004-07-06 13:45:10.000000000 -0400
@@ -731,11 +731,11 @@
                                                                               

 static SEXP xxsubscript(SEXP a1, SEXP a2, SEXP a3)
 {
     SEXP ans;
     if (GenerateCode)
-       PROTECT(ans = LCONS(a2, LCONS(a1, CDR(a3))));
+       PROTECT(ans = LCONS(a2, CONS(a1, CDR(a3))));
     else
        PROTECT(ans = R_NilValue);
     UNPROTECT_PTR(a3);
     UNPROTECT_PTR(a1);
     return ans;

From recrutement at coriolis.fr  Tue Jul  6 23:44:57 2004
From: recrutement at coriolis.fr (recrutement)
Date: Tue Jul  6 23:44:12 2004
Subject: [Rd] RE : Your music
Message-ID: <D44DF40A93B6EC4A81E16B5DD3DC7CE9025E31@SERVMAIL.ad.domaine>

Bonjour,

Nous avons bien re?u votre candidature et nous vous en remercions.

Elle sera analys?e et ?valu?e dans les plus brefs d?lais. Si nous ne vous contactons pas dans un d?lai de 10 jours apr?s l'envoi de cet e-mail, veuillez consid?rer que votre dossier n'a pas ?t? retenu.

Si votre candidature ne correspond pas exactement ? nos recherches en cours, et sauf mention contraire de votre part, nous nous r?servons le droit de conserver votre dossier afin de vous contacter lors d'une mission future.

Nous vous remercions de votre confiance et de l'int?r?t que vous portez ? notre soci?t?.

Cordialement.

From yangsu at rutchem.rutgers.edu  Wed Jul  7 00:06:33 2004
From: yangsu at rutchem.rutgers.edu (yangsu@rutchem.rutgers.edu)
Date: Wed Jul  7 00:06:36 2004
Subject: [Rd] bugs in summary.lm (PR#7061)
Message-ID: <20040706220633.4A5AB108D8@slim.kubism.ku.dk>

Full_Name: Yang Su
Version: 1.9.0
OS: mac.ox
Submission from: (NULL) (128.6.69.117)


Hi 

I always get a large R^2 when i using summary.lm(lm(x~y-1)), where i force my
intercept as 0.  also i got 
an  crazy F - statictis number for the regression compare to my handed
calculations

could you like check, and give  me an email ASAP. 

thanks lots!

yang

From p.dalgaard at biostat.ku.dk  Wed Jul  7 00:08:45 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Wed Jul  7 00:10:24 2004
Subject: [Rd] 2nd sentence of ?attributes has a typo (PR#7060)
In-Reply-To: <20040706212420.0CFD8108E6@slim.kubism.ku.dk>
References: <20040706212420.0CFD8108E6@slim.kubism.ku.dk>
Message-ID: <x2brispz4i.fsf@biostat.ku.dk>

Weigand.Stephen@mayo.edu writes:

>        These functions access an object's attribute list. The 
>        first form above returns the an object's attribute list.

Fixed in r-patched now.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From p.dalgaard at biostat.ku.dk  Wed Jul  7 00:30:11 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Wed Jul  7 00:31:35 2004
Subject: [Rd] bugs in summary.lm (PR#7061)
In-Reply-To: <20040706220633.4A5AB108D8@slim.kubism.ku.dk>
References: <20040706220633.4A5AB108D8@slim.kubism.ku.dk>
Message-ID: <x27jtgpy4s.fsf@biostat.ku.dk>

yangsu@rutchem.rutgers.edu writes:

> Full_Name: Yang Su
> Version: 1.9.0
> OS: mac.ox
> Submission from: (NULL) (128.6.69.117)
> 
> 
> Hi 
> 
> I always get a large R^2 when i using summary.lm(lm(x~y-1)), where i force my
> intercept as 0.  also i got 
> an  crazy F - statictis number for the regression compare to my handed
> calculations
> 
> could you like check, and give  me an email ASAP. 
> 
> thanks lots!

Not a bug, but due to the fact that the null model is different when
there is no intercept. Please read the description of what constitutes
a bug at http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html#R%20Bugs

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From p.dalgaard at biostat.ku.dk  Wed Jul  7 00:54:51 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Wed Jul  7 00:56:18 2004
Subject: [Rd] Wrong object type produced - LANGSXP should be LISTSXP
	(PR#7055)
In-Reply-To: <20040706182507.2731B108D8@slim.kubism.ku.dk>
References: <20040706182507.2731B108D8@slim.kubism.ku.dk>
Message-ID: <x23c44pwzo.fsf@biostat.ku.dk>

bauerda@ieee.org writes:

> Full_Name: David Bauer
> Version: 1.9
> OS: Linux
> Submission from: (NULL) (160.91.245.8)
> 
> 
> In the file gram.y, the xxsubscript function generates a LANGSXP with another
> LANGSXP as its CDR.  I believe that this is a mistake and that the second
> LANGSXP should be a LISTSXP.  The inputs a1, a3 are parameters to the subscript
> function (a2), and as such they should be in a dotted-pair list.

Hmmm. Probably true in principle (as far as I can see, corresponding
logic for funcalls does make the argument list an ordinary pairlist,
not a language object). However, is it not a victimless crime? I can't
think of a way to make it matter at the R level. It's the sort of thing
that you tend not to want to fix if it isn't broken...

Notice that 

z <- quote(x[2])
mode(z[-1])

returns call, but the same is true of any function call (and that's
kind of weird, but a consequence of a general rule that [-indexing
returns an object of the same mode as the original).

[snip...] 
> -       PROTECT(ans = LCONS(a2, LCONS(a1, CDR(a3))));
> +       PROTECT(ans = LCONS(a2, CONS(a1, CDR(a3))));


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From Piers.Dunstan at csiro.au  Wed Jul  7 02:01:47 2004
From: Piers.Dunstan at csiro.au (Piers.Dunstan@csiro.au)
Date: Wed Jul  7 02:01:49 2004
Subject: [Rd] fedora core 2 + bitmap() + ghostscript (PR#7062)
Message-ID: <20040707000147.BCE4B108D0@slim.kubism.ku.dk>

Hi all,
	A bug popped up recently when I upgraded to fedora core 2 (from core
1).  Whenever I used the bitmap() function, ghostscript complained that
it couldn't handle png or tiff devices.  This was NOT a bug with R.  It
was with the version of ghostscript shipped with core 2.  Going to
rawhide and getting ghostscript 7.07-29 (core 2 comes with 7.07-25)
solved this problem.

Unfortunately, I have no output to demonstrate this problem as I FINALLY
managed to fix it, and there's no way I going back :)

Thanks  Piers


-- 
/*****************************/
Dr Piers Dunstan
Marine Research
CSIRO
Hobart, Tasmania

Ph: 613 6232 5382
Email: Piers.Dunstan@csiro.au

/************************************/

From MSchwartz at MedAnalytics.com  Wed Jul  7 03:05:43 2004
From: MSchwartz at MedAnalytics.com (Marc Schwartz)
Date: Wed Jul  7 03:05:57 2004
Subject: [Rd] fedora core 2 + bitmap() + ghostscript (PR#7062)
In-Reply-To: <20040707000147.BCE4B108D0@slim.kubism.ku.dk>
References: <20040707000147.BCE4B108D0@slim.kubism.ku.dk>
Message-ID: <1089162343.16727.90.camel@localhost.localdomain>

On Tue, 2004-07-06 at 19:01, Piers.Dunstan@csiro.au wrote:
> Hi all,
> 	A bug popped up recently when I upgraded to fedora core 2 (from core
> 1).  Whenever I used the bitmap() function, ghostscript complained that
> it couldn't handle png or tiff devices.  This was NOT a bug with R.  It
> was with the version of ghostscript shipped with core 2.  Going to
> rawhide and getting ghostscript 7.07-29 (core 2 comes with 7.07-25)
> solved this problem.
> 
> Unfortunately, I have no output to demonstrate this problem as I FINALLY
> managed to fix it, and there's no way I going back :)
> 
> Thanks  Piers


Here is some example output, which is a problem with the default version
of GS in FC2:

> bitmap("test.png")
> DEBUG: no psname was provided.
DEBUG: no psname was provided.
DEBUG: no psname was provided.
plot(1:10)
> dev.off()
null device
          1

However, despite the msgs, the PNG file _is_ created with the plot.

I have noted the above problems when opening postscript files using gv,
where the above DEBUG msg appears in a pop up window. You have to clear
the pop up to get the file to display. This has been a problem since
moving to FC2.

Note that I installed the updated '-29' rpms from fedora development and
re-ran the sequence of statements _during the same R session_ and the
second sequence below is the result, with the DEBUG msgs gone:

> bitmap("test.png")
> plot(1:10)
> dev.off()
null device
          1


This should not have been reported however to R-bugs, since as you note
above, it is not a bug in R. An FYI "heads up" msg to r-devel and/or
r-help would have been entirely reasonable though.

Marc Schwartz

From weigand.stephen at charter.net  Wed Jul  7 05:48:08 2004
From: weigand.stephen at charter.net (weigand.stephen@charter.net)
Date: Wed Jul  7 05:48:11 2004
Subject: [Rd] DSTEIN error (PR#7047)
Message-ID: <20040707034808.45FE8108D0@slim.kubism.ku.dk>

By "R crashes" I mean R GUI quits completely and
R from the command line returns the user to the
Unix shell.

On Jul 3, 2004, at 12:40 AM, Prof Brian Ripley wrote:

> What does `R crashes' mean?  Please see the R posting guide.
>
> I think the error message indicates a bug in MacOS X.  What made you 
> think
> this was a bug in R?  (It depends of course what `crashes' meant - if 
> the
> R application aborted it would be, but not if it just gave an error
> message (hardly a crash) nor if the MacOS runtime aborted.)
>
> The code runs to completion on Windows and Linux with a variety of 
> BLASes,
> including that supplied with R (which MacOS X is unable to use as it is
> Fortran).
>
> On Sat, 3 Jul 2004 weigand.stephen@charter.net wrote:
>
>> Full_Name: Stephen Weigand
>> Version: 1.9.0
>> OS: Mac OS X 10.3.4
>> Submission from: (NULL) (68.115.89.235)
>>
>>
>> When running an iteratively reweighted least squares program R 
>> crashes and the
>> following is
>> written to the console.app (when using R GUI) or to stdout (when 
>> using R from
>> the command
>> line):
>>
>> Parameter 5 to routine DSTEIN was incorrect
>> Mac OS BLAS parameter error in DSTEIN, parameter #0, (unavailable), 
>> is 0
>
> ....

From administrador at elmet.es  Wed Jul  7 08:31:32 2004
From: administrador at elmet.es (Administrador)
Date: Wed Jul  7 08:31:13 2004
Subject: [Rd] Incidencia del filtro
Message-ID: <3D81A96AB6BE9141BA5290F4EAA7B574381316@elmet_serv.elmet.es>


Panda Antivirus ha realizado las siguientes acciones en el mensaje filtrado:
	Server :	ELMET_SERV

	Enviado por :	r-devel@r-project.org
	Direcci?n :	r-devel@r-project.org
	Para :	Susana Matute
	Asunto :	Re: My details
	Fecha :	07/07/2004  08:31:32
Enviado por Usted

Un mensaje enviado por usted, tiene Virus

Fichero :  my_details.pif - Fichero borrado

http://www.pandasoftware.es

From theodos at csd.auth.gr  Wed Jul  7 12:41:51 2004
From: theodos at csd.auth.gr (theodos@csd.auth.gr)
Date: Wed Jul  7 12:41:54 2004
Subject: [Rd] libxml2.2.dylib compatibility problem opening browser (PR#7063)
Message-ID: <20040707104151.AD7C8108D1@slim.kubism.ku.dk>

Full_Name: Theodosios Theodosiou
Version: 1.9.1
OS: MAC OS X (10.3.4)
Submission from: (NULL) (193.62.199.161)


dyld: /usr/bin/open version mismatch for library: /usr/local/lib/libxml2.2.dylib
(compatibility version of user: 9.0.0 greater than library's version: 8.0.0)

type help.start() to reproduce the problem. Have checked the "Show system error
output in R console of the Misc tab at Preferences".

From rpeng at jhsph.edu  Wed Jul  7 16:52:16 2004
From: rpeng at jhsph.edu (Roger D. Peng)
Date: Wed Jul  7 16:52:19 2004
Subject: [Rd] non-Sweave vignettes in packages
Message-ID: <40EC0E20.7080806@jhsph.edu>

Is there any way to include non-Sweave "vignettes" in packages so that 
they can be launched with the vignette() function and will show up 
when doing library(help = packagename)?  I'd like to just include a 
short PDF file with the package which does not come from Sweave 
sources (just simple LaTeX).  Copying the PDF file into the inst/doc 
directory of the sources, appears to be insufficient.  Is this out of 
the scope of the vignette() function?

Thanks,

-roger

-- 
Roger D. Peng
http://www.biostat.jhsph.edu/~rpeng/

From anja.von.heydebreck at merck.de  Wed Jul  7 17:19:01 2004
From: anja.von.heydebreck at merck.de (anja.von.heydebreck@merck.de)
Date: Wed Jul  7 17:19:03 2004
Subject: [Rd] negative p-value from fisher.test() (PR#7064)
Message-ID: <20040707151901.107BA108C7@slim.kubism.ku.dk>

Full_Name: Anja von Heydebreck
Version: 1.9.1
OS: Linux
Submission from: (NULL) (155.250.128.25)


I obtained a negative p-value from the fisher.test() function:

> fisher.test(matrix(c(14576,3023,89,68),2), alternative="g")$p.value
[1] -8.426593e-13

With R 1.8.1, I got a p-value of -6.239231e-12 for this example.

Anja von Heydebreck

From maechler at stat.math.ethz.ch  Wed Jul  7 17:52:33 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed Jul  7 17:52:38 2004
Subject: [Rd] negative p-value from fisher.test() (PR#7064)
Message-ID: <20040707155233.DAC65108C7@slim.kubism.ku.dk>

>>>>> "anja" == anja von heydebreck <anja.von.heydebreck@merck.de>
>>>>>     on Wed,  7 Jul 2004 17:19:01 +0200 (CEST) writes:

    anja> Full_Name: Anja von Heydebreck Version: 1.9.1 OS:
    anja> Linux Submission from: (NULL) (155.250.128.25)


    anja> I obtained a negative p-value from the fisher.test()
    anja> function:

    >> fisher.test(matrix(c(14576,3023,89,68),2),
    >> alternative="g")$p.value
    anja> [1] -8.426593e-13

[I do get a slightly different negative P-value here].

    anja> With R 1.8.1, I got a p-value of -6.239231e-12 for
    anja> this example.

(which is slightly worse ;-)

    anja> Anja von Heydebreck

Thank you, Anja!

Note that this is the  2x2 case which does not resort to the
(in)famous FEXACT routine.  The rounding / precision problem is
rather from  dhyper() and/or phyper().

Now, as bug report PR#6772   "phyper accuracy and efficiency",
Morten Welinder
had proposed a new algorithm for phyper().
I'm about to try that and see if it cures this example.

Best regards,
Martin Maechler

From williams.elliot at bls.gov  Thu Jul  8 01:50:16 2004
From: williams.elliot at bls.gov (williams.elliot@bls.gov)
Date: Thu Jul  8 01:50:20 2004
Subject: [Rd] Bug in Make or configure: spaces in path (PR#7068)
Message-ID: <20040707235016.09165108C5@slim.kubism.ku.dk>

Full_Name: Elliot Williams
Version: 1.9.1
OS: Linux
Submission from: (NULL) (146.142.53.18)


Hi,

The usual configure/make procedure hangs when there is a space in the pathname. 


For instance, I had R in "/home/elliot/R Software/R-1.9.1/" and make complained
that it couldn't find "Software/R-1.9.1/".  Changing the directory to R_Software
resolved the problem.  

This is a small problem, but it might bite new linux users who like to use
spaces in directory names and don't know that it can cause troubles.

Note that this is similar to a bug about commas in filepaths, number 5536.  I do
not, however, expect the earth.  :-)

       Elliot.

From maechler at stat.math.ethz.ch  Thu Jul  8 11:36:46 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu Jul  8 11:36:48 2004
Subject: [Rd] Bug in Make or configure: spaces in path (PR#7068)
Message-ID: <20040708093646.09FB0108EA@slim.kubism.ku.dk>

>>>>> "williams" == williams elliot <williams.elliot@bls.gov>
>>>>>     on Thu,  8 Jul 2004 01:50:16 +0200 (CEST) writes:

    williams> Full_Name: Elliot Williams Version: 1.9.1 OS:
    williams> Linux Submission from: (NULL) (146.142.53.18)

    williams> Hi,

    williams> The usual configure/make procedure hangs when
    williams> there is a space in the pathname.

    williams> For instance, I had R in "/home/elliot/R
    williams> Software/R-1.9.1/" and make complained that it
    williams> couldn't find "Software/R-1.9.1/".  Changing the
    williams> directory to R_Software resolved the problem.

    williams> This is a small problem, but it might bite new
    williams> linux users who like to use spaces in directory
    williams> names and don't know that it can cause troubles.

Hmm, I think these new users should rather learn that it
probably *will* cause much too much trouble and stop using
spaces in file names....  {well, I can hear some people scream,
but that's my humble opinion}.

    williams> Note that this is similar to a bug about commas in
    williams> filepaths, number 5536.  I do not, however, expect
    williams> the earth.  :-)

I'm waiting for others to comment, but I wouldn't consider this
a bug. Just don't use "crazy" directory names ("," or non-ASCII
accents..) since this will bite you eventually anyway (i.e. not
only with R), e.g. using an accented char, or Umlaut and moving your directory
tree to a locale where these characters are not valid or at
least not displayed usually.

Martin

From jago at mclink.it  Thu Jul  8 15:29:13 2004
From: jago at mclink.it (stefano iacus)
Date: Thu Jul  8 15:29:42 2004
Subject: [Rd] libxml2.2.dylib compatibility problem opening browser
	(PR#7063)
In-Reply-To: <20040707104151.AD7C8108D1@slim.kubism.ku.dk>
References: <20040707104151.AD7C8108D1@slim.kubism.ku.dk>
Message-ID: <CD47C0AF-D0E2-11D8-9C4B-000A95C87F66@mclink.it>

Please remove your copy of libxml2 in /usr/local/lib, you no longer 
need it on Panther and the one included in 10.3.4 is incompatible with 
the one in /usr/local/lib
stefano

On Jul 7, 2004, at 12:41 PM, theodos@csd.auth.gr wrote:

> Full_Name: Theodosios Theodosiou
> Version: 1.9.1
> OS: MAC OS X (10.3.4)
> Submission from: (NULL) (193.62.199.161)
>
>
> dyld: /usr/bin/open version mismatch for library: 
> /usr/local/lib/libxml2.2.dylib
> (compatibility version of user: 9.0.0 greater than library's version: 
> 8.0.0)
>
> type help.start() to reproduce the problem. Have checked the "Show 
> system error
> output in R console of the Misc tab at Preferences".
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From jago at mclink.it  Thu Jul  8 15:37:39 2004
From: jago at mclink.it (stefano iacus)
Date: Thu Jul  8 15:37:57 2004
Subject: [Rd] libxml2.2.dylib compatibility problem opening browser
	(PR#7063)
In-Reply-To: <20040707104151.AD7C8108D1@slim.kubism.ku.dk>
References: <20040707104151.AD7C8108D1@slim.kubism.ku.dk>
Message-ID: <FB4BC987-D0E3-11D8-9C4B-000A95C87F66@mclink.it>

Please remove your copy of libxml2 in /usr/local/lib, you no longer 
need it on Panther and the one included in 10.3.4 is incompatible with 
the one in /usr/local/lib
stefano

On Jul 7, 2004, at 12:41 PM, theodos@csd.auth.gr wrote:

> Full_Name: Theodosios Theodosiou
> Version: 1.9.1
> OS: MAC OS X (10.3.4)
> Submission from: (NULL) (193.62.199.161)
>
>
> dyld: /usr/bin/open version mismatch for library: 
> /usr/local/lib/libxml2.2.dylib
> (compatibility version of user: 9.0.0 greater than library's version: 
> 8.0.0)
>
> type help.start() to reproduce the problem. Have checked the "Show 
> system error
> output in R console of the Misc tab at Preferences".
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From Rembert.DeBlander at econ.kuleuven.ac.be  Thu Jul  8 17:31:10 2004
From: Rembert.DeBlander at econ.kuleuven.ac.be (Rembert.DeBlander@econ.kuleuven.ac.be)
Date: Thu Jul  8 17:31:12 2004
Subject: [Rd] (PR#7070)
Message-ID: <20040708153110.679E1108E6@slim.kubism.ku.dk>

> version
         _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    7.1
year     2003
month    06
day      16
language R

Bug:

integrate(f,lower,upper,extra_args)

where

f <- function(x,extra_args)
{
body
}

integrate doesn't pass the extra arguments when calling f.
As a first check of this finding I integrated dnorm from minus infinity =
to 1, with mu =3D -1 and sd =3D 7. As shown below the result is not =
equal to pnorm(1,-1,7), but it is equal to pnorm(1,0,1) where the =
default values for mu and sd are taken.
As a second check I debugged integrate see example 2 below.
Since the function I need to integrate doesn't make sense with default =
values for the extra parameters, I do not find a way to work around this =
problem.
I have not found any relevant existing bug reports.

Rembert.DeBlander@econ.kuleuven.ac.be

Example 1
*********
> integrate(dnorm,lower=3D"-INF",upper=3D1,-1,7)
Error in integrate(dnorm, lower =3D "-INF", upper =3D 1, -1, 7) :
        invalid parameter values

> integrate(dnorm,lower=3D"-INF",upper=3D1,subdivisions=3D100,-1,7)
0.841331 with absolute error < 0.16=20

>integrate(dnorm,lower=3D"-INF",upper=3D1,subdivisions=3D100,rel.tol=3D.M=
achine$double.eps^0.25,abs.tol=3D.Machine$double.eps^0.25,-1,7)
0.8413448 with absolute error < 1.5e-05

> pnorm(1,-1,7)
[1] 0.6124515

> pnorm(1,0,1)
[1] 0.8413447

Example 2
*********
fex <- function(x, v, M)
{
(x - t(v) %*% M %*% v)^2
}
debug(integrate)
integrate(fex,lower=3D-3,upper=3D7,subdivisions=3D100,c(1,2,3),matrix(2,3=
,3))

results in
.
.
.
debug: wk <- .External("call_dqags", ff, rho =3D environment(), =
as.double(lower),
    as.double(upper), as.double(abs.tol), as.double(rel.tol),
    limit =3D limit, PACKAGE =3D "base")
Browse[1]>
Error in t(v) : Argument "v" is missing, with no default

From ligges at statistik.uni-dortmund.de  Thu Jul  8 17:45:43 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu Jul  8 17:45:45 2004
Subject: [Rd] a not-a-bug report on integrate (PR#7070)
Message-ID: <20040708154543.23315108D0@slim.kubism.ku.dk>

Rembert.DeBlander@econ.kuleuven.ac.be wrote:
>>version
> 

PLEASE:

a) Use a sensible subject line
b) Please post only post bug reports if you are sure it is a bug (and 
here it is not a bug!)
c) Check the recent R version (1.9.1) if posting bugs, not an outdated one!
d) Only named arguments are passed through the ... argument:

  integrate(dnorm, lower=-Inf, upper=3, mean=-1, sd=7)

Uwe Ligges



           _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    7.1
> year     2003
> month    06
> day      16
> language R
> 
> Bug:
> 
> integrate(f,lower,upper,extra_args)
> 
> where
> 
> f <- function(x,extra_args)
> {
> body
> }
> 
> integrate doesn't pass the extra arguments when calling f.
> As a first check of this finding I integrated dnorm from minus infinity =
> to 1, with mu =3D -1 and sd =3D 7. As shown below the result is not =
> equal to pnorm(1,-1,7), but it is equal to pnorm(1,0,1) where the =
> default values for mu and sd are taken.
> As a second check I debugged integrate see example 2 below.
> Since the function I need to integrate doesn't make sense with default =
> values for the extra parameters, I do not find a way to work around this =
> problem.
> I have not found any relevant existing bug reports.
> 
> Rembert.DeBlander@econ.kuleuven.ac.be
> 
> Example 1
> *********
> 
>>integrate(dnorm,lower=3D"-INF",upper=3D1,-1,7)
> 
> Error in integrate(dnorm, lower =3D "-INF", upper =3D 1, -1, 7) :
>         invalid parameter values
> 
> 
>>integrate(dnorm,lower=3D"-INF",upper=3D1,subdivisions=3D100,-1,7)
> 
> 0.841331 with absolute error < 0.16=20
> 
> 
>>integrate(dnorm,lower=3D"-INF",upper=3D1,subdivisions=3D100,rel.tol=3D.M=
> 
> achine$double.eps^0.25,abs.tol=3D.Machine$double.eps^0.25,-1,7)
> 0.8413448 with absolute error < 1.5e-05
> 
> 
>>pnorm(1,-1,7)
> 
> [1] 0.6124515
> 
> 
>>pnorm(1,0,1)
> 
> [1] 0.8413447
> 
> Example 2
> *********
> fex <- function(x, v, M)
> {
> (x - t(v) %*% M %*% v)^2
> }
> debug(integrate)
> integrate(fex,lower=3D-3,upper=3D7,subdivisions=3D100,c(1,2,3),matrix(2,3=
> ,3))
> 
> results in
> .
> .
> .
> debug: wk <- .External("call_dqags", ff, rho =3D environment(), =
> as.double(lower),
>     as.double(upper), as.double(abs.tol), as.double(rel.tol),
>     limit =3D limit, PACKAGE =3D "base")
> Browse[1]>
> Error in t(v) : Argument "v" is missing, with no default
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From tplate at blackmesacapital.com  Thu Jul  8 17:53:01 2004
From: tplate at blackmesacapital.com (Tony Plate)
Date: Thu Jul  8 17:53:19 2004
Subject: [Rd] (PR#7070)
In-Reply-To: <20040708153110.679E1108E6@slim.kubism.ku.dk>
References: <20040708153110.679E1108E6@slim.kubism.ku.dk>
Message-ID: <6.1.0.6.2.20040708094507.05bbd9f8@mailhost.blackmesacapital.com>

AFAICS, this is not a bug: you need to name those extra arguments that you 
want passed to the function, otherwise they are positionally matched to 
other arguments of integrate.

E.g.:

# Here "-1" and "7" are interpreted as the values for the arguments 
"rel.tol" and "abs.tol" of integrate
 > integrate(dnorm,lower=0,upper=1,subdivisions=100,-1,7)
0.3413447 with absolute error < 3.8e-15

# Give your extra arguments names (that do not match arguments of 
integrate) and they get passed down to the function being integrated
 > integrate(dnorm,lower=0,upper=1,subdivisions=100,mean=-1,sd=7)
0.05565302 with absolute error < 6.2e-16
 >

However, given that the "..." appears at the end of the argument list for 
integrate() (which means that prior argument names can be partially 
matched), how would one pass the value for an argument named "k" (for example)?

 > integrate(function(x,k=NA) browser(), 0, 1, k=7)
Called from: f(x, ...)
Browse[1]> k
[1] NA
Browse[1]>

(the problem is that "k" partially matches the integrate() argument "keep.xy")

-- Tony

At Thursday 09:31 AM 7/8/2004, Rembert.DeBlander@econ.kuleuven.ac.be wrote:
> > version
>          _
>platform i686-pc-linux-gnu
>arch     i686
>os       linux-gnu
>system   i686, linux-gnu
>status
>major    1
>minor    7.1
>year     2003
>month    06
>day      16
>language R
>
>Bug:
>
>integrate(f,lower,upper,extra_args)
>
>where
>
>f <- function(x,extra_args)
>{
>body
>}
>
>integrate doesn't pass the extra arguments when calling f.
>As a first check of this finding I integrated dnorm from minus infinity =
>to 1, with mu =3D -1 and sd =3D 7. As shown below the result is not =
>equal to pnorm(1,-1,7), but it is equal to pnorm(1,0,1) where the =
>default values for mu and sd are taken.
>As a second check I debugged integrate see example 2 below.
>Since the function I need to integrate doesn't make sense with default =
>values for the extra parameters, I do not find a way to work around this =
>problem.
>I have not found any relevant existing bug reports.
>
>Rembert.DeBlander@econ.kuleuven.ac.be
>
>Example 1
>*********
> > integrate(dnorm,lower=3D"-INF",upper=3D1,-1,7)
>Error in integrate(dnorm, lower =3D "-INF", upper =3D 1, -1, 7) :
>         invalid parameter values
>
> > integrate(dnorm,lower=3D"-INF",upper=3D1,subdivisions=3D100,-1,7)
>0.841331 with absolute error < 0.16=20
>
> >integrate(dnorm,lower=3D"-INF",upper=3D1,subdivisions=3D100,rel.tol=3D.M=
>achine$double.eps^0.25,abs.tol=3D.Machine$double.eps^0.25,-1,7)
>0.8413448 with absolute error < 1.5e-05
>
> > pnorm(1,-1,7)
>[1] 0.6124515
>
> > pnorm(1,0,1)
>[1] 0.8413447
>
>Example 2
>*********
>fex <- function(x, v, M)
>{
>(x - t(v) %*% M %*% v)^2
>}
>debug(integrate)
>integrate(fex,lower=3D-3,upper=3D7,subdivisions=3D100,c(1,2,3),matrix(2,3=
>,3))
>
>results in
>.
>.
>.
>debug: wk <- .External("call_dqags", ff, rho =3D environment(), =
>as.double(lower),
>     as.double(upper), as.double(abs.tol), as.double(rel.tol),
>     limit =3D limit, PACKAGE =3D "base")
>Browse[1]>
>Error in t(v) : Argument "v" is missing, with no default
>
>______________________________________________
>R-devel@stat.math.ethz.ch mailing list
>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From Kurt.Hornik at wu-wien.ac.at  Thu Jul  8 15:58:41 2004
From: Kurt.Hornik at wu-wien.ac.at (Kurt Hornik)
Date: Thu Jul  8 18:35:59 2004
Subject: [Rd] Bug in Make or configure: spaces in path (PR#7068)
In-Reply-To: <20040708093646.09FB0108EA@slim.kubism.ku.dk>
References: <20040708093646.09FB0108EA@slim.kubism.ku.dk>
Message-ID: <16621.21265.600464.390925@mithrandir.hornik.net>

>>>>> maechler  writes:

>>>>> "williams" == williams elliot <williams.elliot@bls.gov>
>>>>>     on Thu,  8 Jul 2004 01:50:16 +0200 (CEST) writes:

williams> Full_Name: Elliot Williams Version: 1.9.1 OS:
williams> Linux Submission from: (NULL) (146.142.53.18)

williams> Hi,

williams> The usual configure/make procedure hangs when
williams> there is a space in the pathname.

williams> For instance, I had R in "/home/elliot/R
williams> Software/R-1.9.1/" and make complained that it
williams> couldn't find "Software/R-1.9.1/".  Changing the
williams> directory to R_Software resolved the problem.

williams> This is a small problem, but it might bite new
williams> linux users who like to use spaces in directory
williams> names and don't know that it can cause troubles.

> Hmm, I think these new users should rather learn that it
> probably *will* cause much too much trouble and stop using
> spaces in file names....  {well, I can hear some people scream,
> but that's my humble opinion}.

williams> Note that this is similar to a bug about commas in
williams> filepaths, number 5536.  I do not, however, expect
williams> the earth.  :-)

> I'm waiting for others to comment, but I wouldn't consider this a
> bug. Just don't use "crazy" directory names ("," or non-ASCII
> accents..) since this will bite you eventually anyway (i.e. not only
> with R), e.g. using an accented char, or Umlaut and moving your
> directory tree to a locale where these characters are not valid or at
> least not displayed usually.

Formally, we could claim it is not a bug if it was clearly stated in
some place (R-admin?) to be the "official" behavior.

I had a brief look: the first problem is

	$(MAKE) rhome=`cd $(top_builddir); pwd` install-bin

and it should not be too hard to change this to something like

	$(MAKE) rhome="`cd \"$(top_builddir)\"; pwd`" install-bin

(or start propagating abs_top_builddir which I think Autoconf would have
given us for a few years now).

I think R mostly runs even if R_HOME has a path with spaces, so why
shouldn't we be able to build in a dir whose path has spaces?

Of course, using double quotes in file paths is another story ...

-k

From maechler at stat.math.ethz.ch  Fri Jul  9 10:35:42 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri Jul  9 10:35:46 2004
Subject: [Rd] Re: tail(<matrix>) column numbers
In-Reply-To: <401673AE.1090900@pburns.seanet.com>
References: <Pine.LNX.4.44.0401261539050.28730-100000@gannet.stats>
	<40158C9E.9060807@pburns.seanet.com>
	<p0rc10l69l3igm327l4kkjoi8eiobop64l@4ax.com>
	<401673AE.1090900@pburns.seanet.com>
Message-ID: <16622.22750.297030.525566@gargle.gargle.HOWL>

>>>>> "PatBurns" == Patrick Burns <pburns@pburns.seanet.com>
>>>>>     on Tue, 27 Jan 2004 14:20:30 +0000 writes:

[more than half a year ago]

    PatBurns> Duncan Murdoch wrote:

   .............

    DM> One other one I'll look at:
    DM> 
    DM> If a matrix doesn't have row names, I might add names
    DM> like '[nn,]' to it, so I get results like

      R> x <- matrix(1:100,ncol=2)
      R> tail(x)
   Rout>       [,1] [,2]
   Rout> [45,]   45   95
   Rout> [46,]   46   96
   Rout> [47,]   47   97
   Rout> [48,]   48   98
   Rout> [49,]   49   99
   Rout> [50,]   50  100
   Rout> 
    DM> instead of the current

      R> tail(x)
   Rout>      [,1] [,2]
   Rout> [1,]   45   95
   Rout> [2,]   46   96
   Rout> [3,]   47   97
   Rout> [4,]   48   98
   Rout> [5,]   49   99
   Rout> [6,]   50  100

    DM> I just want to be careful that this doesn't mess up
    DM> something else.
    DM> 
    DM> Duncan Murdoch


    PatBurns> I think this could be being too "helpful".  Using
    PatBurns> tail on a matrix may often be done in a program so
    PatBurns> I think leaving things as they come is the best
    PatBurns> policy.

I tend to disagree, and would like to have us think about it
again:

1)  Duncan's proposal was to only add row names *when* there are none.
2)  Pat is write that tail() for matrices maybe used not only interactively
    and help(tail)'s "Value:" section encourages this to some extent.

    However, how can adding column names to such a matrix-tail be harmful?

    Well, only in the case where the tail is quite large, the
    added dimnames add unneeded memory and other overhead when
    dealing with that matrix.

 But I think, programmers/users caring about efficient code
 wouldn't use tail(<matrix>) in their function code, would they?

In conclusion, I'd still argue for following Duncan's proposal,
maybe adding a \note{.} to head.Rd stating that these functions
were meant for interactive use, and for "programming", we'd
rather recommend the direct  (n-k+1):n indexing.

From maechler at stat.math.ethz.ch  Fri Jul  9 10:43:32 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri Jul  9 10:43:33 2004
Subject: [Rd] Re: tail(<matrix>) column numbers
In-Reply-To: <16622.22750.297030.525566@gargle.gargle.HOWL>
References: <Pine.LNX.4.44.0401261539050.28730-100000@gannet.stats>
	<40158C9E.9060807@pburns.seanet.com>
	<p0rc10l69l3igm327l4kkjoi8eiobop64l@4ax.com>
	<401673AE.1090900@pburns.seanet.com>
	<16622.22750.297030.525566@gargle.gargle.HOWL>
Message-ID: <16622.23220.81740.396355@gargle.gargle.HOWL>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch>
>>>>>     on Fri, 9 Jul 2004 10:35:42 +0200 writes:

  .......

    MM> 1) Duncan's proposal was to only add row names *when* there are none.
    MM> 2) Pat is write that tail() for matrices maybe used not only
		  ^^^^^
                 'right'  
of course!
wondering what happened in my brain just that second ... 

Martin

From Kurt.Hornik at wu-wien.ac.at  Fri Jul  9 12:08:41 2004
From: Kurt.Hornik at wu-wien.ac.at (Kurt Hornik)
Date: Fri Jul  9 12:08:41 2004
Subject: [Rd] rsync-recommended in r-patched
Message-ID: <16622.28329.772913.357438@mithrandir.hornik.net>

I am about to change the rsync-recommended mechanism for r-patched to
look for recommended packages in the $version-patched subdir of the main
CRAN package are (as opposed to the $version one which is "frozen" at
release time).

Of course, it will take a day or two for the CRAN mirrors to populate
this new subdirectory ...

-k

From dmurdoch at pair.com  Fri Jul  9 16:35:30 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Fri Jul  9 16:35:30 2004
Subject: [Rd] Re: tail(<matrix>) column numbers
In-Reply-To: <16622.22750.297030.525566@gargle.gargle.HOWL>
References: <Pine.LNX.4.44.0401261539050.28730-100000@gannet.stats>
	<40158C9E.9060807@pburns.seanet.com>
	<p0rc10l69l3igm327l4kkjoi8eiobop64l@4ax.com>
	<401673AE.1090900@pburns.seanet.com>
	<16622.22750.297030.525566@gargle.gargle.HOWL>
Message-ID: <80bte0t995lm51fuduqk2olrup11o8232a@4ax.com>

If efficiency is a concern, an "add.row.names=TRUE" option could be
added; users who didn't want the overhead would set this to FALSE.

Duncan Murdoch

On Fri, 9 Jul 2004 10:35:42 +0200, Martin Maechler
<maechler@stat.math.ethz.ch> wrote :

>>>>>> "PatBurns" == Patrick Burns <pburns@pburns.seanet.com>
>>>>>>     on Tue, 27 Jan 2004 14:20:30 +0000 writes:
>
>[more than half a year ago]
>
>    PatBurns> Duncan Murdoch wrote:
>
>   .............
>
>    DM> One other one I'll look at:
>    DM> 
>    DM> If a matrix doesn't have row names, I might add names
>    DM> like '[nn,]' to it, so I get results like
>
>      R> x <- matrix(1:100,ncol=2)
>      R> tail(x)
>   Rout>       [,1] [,2]
>   Rout> [45,]   45   95
>   Rout> [46,]   46   96
>   Rout> [47,]   47   97
>   Rout> [48,]   48   98
>   Rout> [49,]   49   99
>   Rout> [50,]   50  100
>   Rout> 
>    DM> instead of the current
>
>      R> tail(x)
>   Rout>      [,1] [,2]
>   Rout> [1,]   45   95
>   Rout> [2,]   46   96
>   Rout> [3,]   47   97
>   Rout> [4,]   48   98
>   Rout> [5,]   49   99
>   Rout> [6,]   50  100
>
>    DM> I just want to be careful that this doesn't mess up
>    DM> something else.
>    DM> 
>    DM> Duncan Murdoch
>
>
>    PatBurns> I think this could be being too "helpful".  Using
>    PatBurns> tail on a matrix may often be done in a program so
>    PatBurns> I think leaving things as they come is the best
>    PatBurns> policy.
>
>I tend to disagree, and would like to have us think about it
>again:
>
>1)  Duncan's proposal was to only add row names *when* there are none.
>2)  Pat is write that tail() for matrices maybe used not only interactively
>    and help(tail)'s "Value:" section encourages this to some extent.
>
>    However, how can adding column names to such a matrix-tail be harmful?
>
>    Well, only in the case where the tail is quite large, the
>    added dimnames add unneeded memory and other overhead when
>    dealing with that matrix.
>
> But I think, programmers/users caring about efficient code
> wouldn't use tail(<matrix>) in their function code, would they?
>
>In conclusion, I'd still argue for following Duncan's proposal,
>maybe adding a \note{.} to head.Rd stating that these functions
>were meant for interactive use, and for "programming", we'd
>rather recommend the direct  (n-k+1):n indexing.
>
>______________________________________________
>R-devel@stat.math.ethz.ch mailing list
>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From rmh at temple.edu  Fri Jul  9 21:28:45 2004
From: rmh at temple.edu (rmh@temple.edu)
Date: Fri Jul  9 21:28:53 2004
Subject: [Rd] Reproducible Rterm crash. (PR#7072)
Message-ID: <20040709192845.EC9C0FC09@slim.kubism.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org

Reproducible Rterm crash.

I drew a complicated graph, then resized the graphics window.

R reported
> Insufficient memory for resize. Killing device
and then killed the device.  It also killed itself.

Windows saved
c:\cygwin\tmp\WER3A8D.tmp.dir00\appcompat.txt
I copied it to ~/tmp/appcompat.txt
I can send it, if you ask for it.

Windows gave all sorts of information in an "Error Report Contents" popup
and then wouldn't let me copy it.

Error Signature
AppName: rterm.exe      AppVer: 1.91.30621.0   ModName:ntdll.dll
ModVer: 5.1.2600.1217   Offset: 00025a58



I copied the appended file bivnorm.s into the *R* buffer (running Rterm
under ESS 5.2.1) and hit ENTER.  The graphs eventually showed up.
They were empty shells.  When I resize the graph device, it crashed.

I repeated the exercise on Windows NT4 and the resize worked correctly.
The graph itself was still empty.  This example works correctly on S-Plus
and generates a series of wireplots of a rotated bivariate normal density.

##---------------------bivnorm.s----------------------------------------
## Bivariate Normal density in 3-D space with various viewpoints.
## Based on the function   example.draping2   in the trellis library.

example.bivariate.normal <-
  function(rho=0, layout.in=c(3,3),
           lwd.in=.1,
           col.regions.in=trellis.par.get("regions")$col)
{
  old.par <- par(lwd=lwd.in)
  on.exit(par(old.par))
  x <- seq(-2, 2, length=33)
  y <- x
  fxy <- 1/(2*pi*sqrt(1-rho^2)) *
    exp(-.5/(1-rho^2) * outer(x^2, y^2, "+") - 2*rho*outer(x,y,"*"))
  angle <- c(22.5, 67.5, 112.5, 337.5, 157.5, 292.5, 247.5, 202.5)
  Angle <- rep(angle, rep(length(fxy), 8))
  Viewing.Angle <- ordered(Angle, angle)
  wireframe(rep(fxy, 8) ~ rep(x[row(fxy)], 8) * rep(y[col(fxy)], 8) |
            Viewing.Angle,
            panel = function(x, y, subscripts, z, angle, ...)
            {
              w <- unique(angle[subscripts])
              panel.wireframe(x, y, subscripts, z,
                              screen = list(z = w, x = -60, y = 0), ...)
            },
            angle = Angle, ## this is how to pass down external element
            strip = function(...)
            strip.default(..., strip.names = T, style = "1"),
            skip = c(F, F, F, F, T, F, F, F, F),
            drape = T, layout = layout.in, distance = 0.3,
            main = paste("Bivariate Normal, rho=", rho),
            xlab = list("x", cex = 0.4),
            ylab = list("y", cex = 0.4),
            zlab = list("f(x,y)", cex = 0.4),
            col.regions=col.regions.in)
}

## example.bivariate.normal()                   # boring, with rho=0

example.bivariate.normal(.7)                 # all views on one page
### export.eps is not recommended for this example.
### The minimum lwd parameter is too thick on the graphsheet
##
### We recommend using a the postscript driver directly.
## black and white
## trellis.device(postscript, file=hh("conc/figure/bivnorm.eps"), color=F)
## strip.background0()
## example.bivariate.normal(.7,                 # all views on one page
##                          col.regions.in=rep(82:106, rep(4,25)))
## dev.off()
##
## color
## trellis.device(postscript, file=hh("conc/figure/bivnorm-color.eps"), color=T)
## strip.background0()
## example.bivariate.normal(.7)                 # all views on one page
## dev.off()


example.bivariate.normal(.7, layout=c(1,1))  # each view on its own page
## One per page, cycle through pages with Ctrl-PageUp and Ctrl-PageDown
##
## This is the plot from which the figure in the book is taken.
## We use just the Viewing.Angle=112.5 panel.
##
### We recommend using a the postscript driver directly.
## black and white
## trellis.device(postscript, onefile=F, print.it=F, color=F)
## strip.background0()
## example.bivariate.normal(.7, layout=c(1,1),  # One panel per page
##                          col.regions.in=rep(82:106, rep(4,25)))
## dev.off()
## ## manually rename ps.out.003.ps to hh("conc/figure/bivnorm1125.eps")
##
## color
## trellis.device(postscript, onefile=F, print.it=F, color=T)
## strip.background0()
## example.bivariate.normal(.7, layout=c(1,1))  # One panel per page
## dev.off()
## ## manually rename ps.out.003.ps to hh("conc/figure/bivnorm1125-color.eps")


## for (rho in seq(-.9,.9,.1))                  # one page for each rho
##   print(example.bivariate.normal(rho))

##---------------------bivnorm.s----------------------------------------

#
######################################################





--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 9.1
 year = 2004
 month = 06
 day = 21
 language = R

Windows XP Home Edition (build 2600) Service Pack 1.0

Search Path:
 .GlobalEnv, package:methods, package:stats, package:utils, 
file:c:/HOME/rmh/hh/splus.library/HH/.RData, package:multcomp, package:mvtnorm, package:abind, 
package:graphics, package:lattice, package:grid, Autoloads, package:base

From dmurdoch at pair.com  Fri Jul  9 21:57:36 2004
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Fri Jul  9 21:58:17 2004
Subject: [Rd] Reproducible Rterm crash. (PR#7072)
Message-ID: <20040709195736.5EB86FC09@slim.kubism.ku.dk>

On Fri,  9 Jul 2004 21:28:45 +0200 (CEST), rmh@temple.edu wrote :

>Reproducible Rterm crash.
>
>I drew a complicated graph, then resized the graphics window.
>
>R reported
>> Insufficient memory for resize. Killing device
>and then killed the device.  It also killed itself.

I just tried your code (after loading lattice so it would run), and
didn't crash.  I think you just ran out of memory.  We try to recover
gracefully from situations like that, but it's hard, and especially
hard to track down when we can't reproduce it.

All I can suggest (and I know it's not much of a suggestion) is that
you recompile R with debug information, then run it under gdb and see
if you can figure out where we've missed some checks.

It's possible that Emacs has something to do with this, but hard to
know.  You might find that running Rterm outside of Emacs works fine
just because more memory is available.

Duncan Murdoch

From deepayan at stat.wisc.edu  Sat Jul 10 03:06:25 2004
From: deepayan at stat.wisc.edu (Deepayan Sarkar)
Date: Sat Jul 10 03:05:20 2004
Subject: [Rd] Reproducible Rterm crash. (PR#7072)
In-Reply-To: <20040709192845.EC9C0FC09@slim.kubism.ku.dk>
References: <20040709192845.EC9C0FC09@slim.kubism.ku.dk>
Message-ID: <200407092006.25359.deepayan@stat.wisc.edu>

On Friday 09 July 2004 14:28, rmh@temple.edu wrote:

I didn't get a crash (on Windows 2000) with XEmacs/ESS, so this is 
likely to be related to amount of memory.

> I repeated the exercise on Windows NT4 and the resize worked
> correctly. The graph itself was still empty.  This example works
> correctly on S-Plus and generates a series of wireplots of a rotated
> bivariate normal density.

There are a couple of issues here. panel.wireframe() has a very 
different argument list in S-PLUS and lattice, and even though the ones 
you have used are common to both, the sequence is different. Using 
named arguments should fix this, i.e., use 

        panel = function(x, y, subscripts, z, angle, ...)
        {
          w <- unique(angle[subscripts])
-         panel.wireframe(x, y, subscripts, z,
+         panel.wireframe(x = x, y = y, subscripts = subscripts, z = z,
                          screen = list(z = w, x = -60, y = 0), ...)
        },

This will give you non-empty panels, but not different angles of 
rotation. This is because panel.wireframe doesn't handle screen, the 
top-level function (wireframe) does. There's no good reason for this 
behavior, so I'll fix it. But since this would be an API change, I 
don't think I should do it in a stable update. I can send you a patched 
version privately if you wish.

Deepayan

From rmh at temple.edu  Sat Jul 10 05:14:07 2004
From: rmh at temple.edu (Richard M. Heiberger)
Date: Sat Jul 10 05:19:41 2004
Subject: [Rd] Reproducible Rterm crash. (PR#7072)
Message-ID: <7acf301b.5d80e420.81e4000@po-d.temple.edu>

Deepayan Sarkar:
> This will give you non-empty panels, but not different angles of 
> rotation. This is because panel.wireframe doesn't handle screen, the 
> top-level function (wireframe) does. There's no good reason for this 
> behavior, so I'll fix it. But since this would be an API change, I 
> don't think I should do it in a stable update. I can send you a patched 
> version privately if you wish.

I named the arguments as you suggested and now the panels are filled.  As you noted,
they all show the same rotation.

Please send me the revised wireframe and panel.wireframe with the rotation moved
down into the panel.  Thank you.

Can you clarify the statement "stable update".  I think this means (I hope that is what
it means) that you will make the change in 1.9.2, but not in any intermediate release.

My book will be out August 1---and available at the JSM in Toronto where I am doing
a short course---and I am now systematically going through every example to make them
all work in R.  They all currently work in S-Plus and most of them currently work in R.
I want them all to work by August 1.  A private copy of the functions, with the assurance
that they will be public soon, satisfies my needs.

Thanks
Rich

From rmh at temple.edu  Sat Jul 10 23:21:10 2004
From: rmh at temple.edu (rmh@temple.edu)
Date: Sat Jul 10 23:21:13 2004
Subject: [Rd] read.table, read.fwf, and na.strings (PR#7075)
Message-ID: <20040710212110.29A8AEAC3@slim.kubism.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################


Is this intended behavior for the read.fwf(na.strings="-999")?
I anticipated that the na.strings would be padded with blanks.
Therefore I anticipated getting the result tmp2 from the simpler
na.strings in the tmp1 assignment?  My anticipation is based on the
documentation that says
"Blank fields are also considered to be missing values."

> na.strings: a vector of strings which are to be interpreted as 'NA'
>           values.  Blank fields are also considered to be missing
>           values.


temp.dat
----------------
123456-999 01234
56-9990123412345
----------------

read.fwf.test.r
------------------------------------------------
tmp1 <- read.fwf("temp.dat",
                 na.strings="-999",
                 col.names=LETTERS[1:4],
                 widths=c(2,4,5,5))
tmp1
tmp2 <- read.fwf("temp.dat",
                 na.strings=c("-999","-999 "),
                 col.names=LETTERS[1:4],
                 widths=c(2,4,5,5))
tmp2
------------------------------------------------


> tmp1
   A    B    C     D
1 12 3456 -999  1234
2 56   NA 1234 12345
> tmp2
   A    B    C     D
1 12 3456   NA  1234
2 56   NA 1234 12345


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 9.1
 year = 2004
 month = 06
 day = 21
 language = R

Windows XP Home Edition (build 2600) Service Pack 1.0

Search Path:
 .GlobalEnv, file:c:/HOME/rmh/hh/splus.library/HH/.RData, package:methods, package:stats, 
package:utils, package:multcomp, package:mvtnorm, package:abind, package:graphics, 
package:lattice, package:grid, Autoloads, package:base

From rmh at temple.edu  Sat Jul 10 23:28:10 2004
From: rmh at temple.edu (rmh@temple.edu)
Date: Sat Jul 10 23:28:12 2004
Subject: [Rd] bug in xyplot xlab, etc (PR#7076)
Message-ID: <20040710212810.1244FEAC0@slim.kubism.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################


This looks to me like a bug in xyplot and friends.  I anticipated
that all three of these xyplot statements would work.  This is based
on the documentation line
> The 'label' tag can be omitted if it is the first element of the list.

> x <- 1:10
> y <- 1:10
> xyplot(y ~ x, xlab=list("abcd", cex=2))  ## works as intended
> xyplot(y ~ x, xlab=list(label="abcd"))   ## works as intended
> xyplot(y ~ x, xlab=list("abcd"))         ## error message
Error in if (is.list(label) && names(label)[1] == "") label[[1]] else default.label : 
	missing value where TRUE/FALSE needed

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 9.1
 year = 2004
 month = 06
 day = 21
 language = R

Windows XP Home Edition (build 2600) Service Pack 1.0

Search Path:
 .GlobalEnv, file:c:/HOME/rmh/hh/splus.library/HH/.RData, package:methods, package:stats, 
package:utils, package:multcomp, package:mvtnorm, package:abind, package:graphics, 
package:lattice, package:grid, Autoloads, package:base

From pburns at pburns.seanet.com  Sun Jul 11 13:06:44 2004
From: pburns at pburns.seanet.com (Patrick Burns)
Date: Sun Jul 11 13:07:34 2004
Subject: [Rd] Re: tail(<matrix>) column numbers
References: <Pine.LNX.4.44.0401261539050.28730-100000@gannet.stats>	<40158C9E.9060807@pburns.seanet.com>	<p0rc10l69l3igm327l4kkjoi8eiobop64l@4ax.com>	<401673AE.1090900@pburns.seanet.com>
	<16622.22750.297030.525566@gargle.gargle.HOWL>
Message-ID: <40F11F44.3010302@pburns.seanet.com>

I disagree with Martin's assertion that "tail" is not useful
for programming.  It has a few features relative to the
do-it-yourself approach:

*)  It compactly makes the intention clear.
*)  It automatically handles cases where there may be
either a vector or a matrix.
*)  It handles cases where there is less data than is being
sought (which may or may not be a good thing).

"tail" of functions is what is definitely intended for interactive
use.

Pat

Martin Maechler wrote:

>>>>>>"PatBurns" == Patrick Burns <pburns@pburns.seanet.com>
>>>>>>    on Tue, 27 Jan 2004 14:20:30 +0000 writes:
>>>>>>            
>>>>>>
>
>[more than half a year ago]
>
>    PatBurns> Duncan Murdoch wrote:
>
>   .............
>
>    DM> One other one I'll look at:
>    DM> 
>    DM> If a matrix doesn't have row names, I might add names
>    DM> like '[nn,]' to it, so I get results like
>
>      R> x <- matrix(1:100,ncol=2)
>      R> tail(x)
>   Rout>       [,1] [,2]
>   Rout> [45,]   45   95
>   Rout> [46,]   46   96
>   Rout> [47,]   47   97
>   Rout> [48,]   48   98
>   Rout> [49,]   49   99
>   Rout> [50,]   50  100
>   Rout> 
>    DM> instead of the current
>
>      R> tail(x)
>   Rout>      [,1] [,2]
>   Rout> [1,]   45   95
>   Rout> [2,]   46   96
>   Rout> [3,]   47   97
>   Rout> [4,]   48   98
>   Rout> [5,]   49   99
>   Rout> [6,]   50  100
>
>    DM> I just want to be careful that this doesn't mess up
>    DM> something else.
>    DM> 
>    DM> Duncan Murdoch
>
>
>    PatBurns> I think this could be being too "helpful".  Using
>    PatBurns> tail on a matrix may often be done in a program so
>    PatBurns> I think leaving things as they come is the best
>    PatBurns> policy.
>
>I tend to disagree, and would like to have us think about it
>again:
>
>1)  Duncan's proposal was to only add row names *when* there are none.
>2)  Pat is write that tail() for matrices maybe used not only interactively
>    and help(tail)'s "Value:" section encourages this to some extent.
>
>    However, how can adding column names to such a matrix-tail be harmful?
>
>    Well, only in the case where the tail is quite large, the
>    added dimnames add unneeded memory and other overhead when
>    dealing with that matrix.
>
> But I think, programmers/users caring about efficient code
> wouldn't use tail(<matrix>) in their function code, would they?
>
>In conclusion, I'd still argue for following Duncan's proposal,
>maybe adding a \note{.} to head.Rd stating that these functions
>were meant for interactive use, and for "programming", we'd
>rather recommend the direct  (n-k+1):n indexing.
>
>
>  
>

From f.harrell at vanderbilt.edu  Sun Jul 11 13:07:00 2004
From: f.harrell at vanderbilt.edu (Frank E Harrell Jr)
Date: Sun Jul 11 13:08:50 2004
Subject: [Rd] library( ) and verbose=
Message-ID: <40F11F54.5070505@vanderbilt.edu>

The Hmisc package has in its .First.lib function a verbose argument,
which I thought was the way to allow users to suppress certain messages,
by issuing library(Hmisc, verbose=FALSE).  But I see that library( )
does not pass verbose to .First.lib.  The default for verbose in Hmisc
is TRUE because .First.lib prints some important information about
masked functions.  What is the best way to fix this?  Is it reasonable
to expect library to pass verbose along?  I'm running R 1.9 on debian.
-- 
Frank E Harrell Jr   Professor and Chair           School of Medicine
                      Department of Biostatistics   Vanderbilt University

From ripley at stats.ox.ac.uk  Sun Jul 11 14:00:34 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Jul 11 14:01:19 2004
Subject: [Rd] library( ) and verbose=
In-Reply-To: <40F11F54.5070505@vanderbilt.edu>
Message-ID: <Pine.LNX.4.44.0407111253450.435-100000@gannet.stats>

On Sun, 11 Jul 2004, Frank E Harrell Jr wrote:

> The Hmisc package has in its .First.lib function a verbose argument,
> which I thought was the way to allow users to suppress certain messages,
> by issuing library(Hmisc, verbose=FALSE).  But I see that library( )
> does not pass verbose to .First.lib.  The default for verbose in Hmisc
> is TRUE because .First.lib prints some important information about
> masked functions.  What is the best way to fix this?  Is it reasonable
> to expect library to pass verbose along?  I'm running R 1.9 on debian.

No. It is not documented to, and .First.lib (in R or S) has only two 
documented arguments so it would not be possible to do this in a 
backwards-compatible way.  (If we passed ... along, then using
library(foo, verbose=FALSE) would fail for almost all packages foo with a 
.First.lib function.)

We normally suggest that such options are handled by setting an 
environment variable or perhaps an option (e.g. option(Hmisc.verbose = 
FALSE)).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ligges at statistik.uni-dortmund.de  Sun Jul 11 14:42:12 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun Jul 11 14:41:46 2004
Subject: [Rd] bug in xyplot xlab, etc (PR#7076)
In-Reply-To: <20040710212810.1244FEAC0@slim.kubism.ku.dk>
References: <20040710212810.1244FEAC0@slim.kubism.ku.dk>
Message-ID: <40F135A4.4090606@statistik.uni-dortmund.de>

rmh@temple.edu wrote:

> # Your mailer is set to "none" (default on Windows),
> # hence we cannot send the bug report directly from R.
> # Please copy the bug report (after finishing it) to
> # your favorite email program and send it to
> #
> #       r-bugs@r-project.org
> #
> ######################################################
> 
> 
> This looks to me like a bug in xyplot and friends.  I anticipated
> that all three of these xyplot statements would work.  This is based
> on the documentation line
> 
>>The 'label' tag can be omitted if it is the first element of the list.
> 
> 
>>x <- 1:10
>>y <- 1:10
>>xyplot(y ~ x, xlab=list("abcd", cex=2))  ## works as intended
>>xyplot(y ~ x, xlab=list(label="abcd"))   ## works as intended
>>xyplot(y ~ x, xlab=list("abcd"))         ## error message
> 
> Error in if (is.list(label) && names(label)[1] == "") label[[1]] else default.label : 
> 	missing value where TRUE/FALSE needed


Let me also point out that the documentation (?xy.plot from lattice) is 
like some of those german bureaucreatic documents:

   ylab  Fine control possible, see entry for xlab.
   xlab  Fine control is possible, see entry for sub.
   sub   See entry for main for finer control options.

Deepayan might want to point to "main" from all of these ....

Best,
Uwe


BTW: Is it the correct way to submit bug reports on recommended packages 
to the R's bug repository? Instead, I would have send it to Deepayan as 
the maintainer of lattice (maybe a point that is not entirely clear from 
the FAQs: distinguishing contributed, recommended and base package 
related to bug reports).



> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status = 
>  major = 1
>  minor = 9.1
>  year = 2004
>  month = 06
>  day = 21
>  language = R
> 
> Windows XP Home Edition (build 2600) Service Pack 1.0
> 
> Search Path:
>  .GlobalEnv, file:c:/HOME/rmh/hh/splus.library/HH/.RData, package:methods, package:stats, 
> package:utils, package:multcomp, package:mvtnorm, package:abind, package:graphics, 
> package:lattice, package:grid, Autoloads, package:base
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From deepayan at stat.wisc.edu  Sun Jul 11 14:53:24 2004
From: deepayan at stat.wisc.edu (deepayan@stat.wisc.edu)
Date: Sun Jul 11 14:53:28 2004
Subject: [Rd] bug in xyplot xlab, etc (PR#7076)
Message-ID: <20040711125324.C4E45EAC3@slim.kubism.ku.dk>

On Saturday 10 July 2004 16:28, rmh@temple.edu wrote:

> This looks to me like a bug in xyplot and friends.  I anticipated
> that all three of these xyplot statements would work.  This is based
> on the documentation line
>
> > The 'label' tag can be omitted if it is the first element of the
> > list.
> >
> > x <- 1:10
> > y <- 1:10
> > xyplot(y ~ x, xlab=list("abcd", cex=2))  ## works as intended
> > xyplot(y ~ x, xlab=list(label="abcd"))   ## works as intended
> > xyplot(y ~ x, xlab=list("abcd"))         ## error message
>
> Error in if (is.list(label) && names(label)[1] == "") label[[1]] else
> default.label : missing value where TRUE/FALSE needed

Evidently, this is due to my (unreasonable) expectation that 
names(list("abcd")) would be "". I'll fix that.

Deepayan

From ripley at stats.ox.ac.uk  Sun Jul 11 14:55:49 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Jul 11 14:55:51 2004
Subject: [Rd] bug in xyplot xlab, etc
In-Reply-To: <40F135A4.4090606@statistik.uni-dortmund.de>
Message-ID: <Pine.LNX.4.44.0407111350110.838-100000@gannet.stats>

> BTW: Is it the correct way to submit bug reports on recommended packages 
> to the R's bug repository? Instead, I would have send it to Deepayan as 
> the maintainer of lattice (maybe a point that is not entirely clear from 
> the FAQs: distinguishing contributed, recommended and base package 
> related to bug reports).

What's unclear?  Recommended packages _are_ contributed (and they are in 
the contrib section on CRAN), and we do say

   Bug reports on contributed packages should be sent first to the package
   maintainer, and only submitted to the R-bugs repository by package
   maintainers, mentioning the package in the subject line.

Would you prefer `contributed (including recommended)'?

As Deepayan does not have write access to R-bugs, someone who does has to 
clean up reports such as this.  So we do really only want the package 
maintainers to file reports for the record.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ligges at statistik.uni-dortmund.de  Sun Jul 11 15:07:11 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun Jul 11 15:06:44 2004
Subject: [Rd] bug in xyplot xlab, etc
In-Reply-To: <Pine.LNX.4.44.0407111350110.838-100000@gannet.stats>
References: <Pine.LNX.4.44.0407111350110.838-100000@gannet.stats>
Message-ID: <40F13B7F.1000409@statistik.uni-dortmund.de>

Prof Brian Ripley wrote:
>>BTW: Is it the correct way to submit bug reports on recommended packages 
>>to the R's bug repository? Instead, I would have send it to Deepayan as 
>>the maintainer of lattice (maybe a point that is not entirely clear from 
>>the FAQs: distinguishing contributed, recommended and base package 
>>related to bug reports).
> 
> 
> What's unclear?  Recommended packages _are_ contributed (and they are in 
> the contrib section on CRAN), and we do say
> 
>    Bug reports on contributed packages should be sent first to the package
>    maintainer, and only submitted to the R-bugs repository by package
>    maintainers, mentioning the package in the subject line.
> 
> Would you prefer `contributed (including recommended)'?

Yes, thanks.

Uwe


> As Deepayan does not have write access to R-bugs, someone who does has to 
> clean up reports such as this.  So we do really only want the package 
> maintainers to file reports for the record.
>

From deepayan at stat.wisc.edu  Sun Jul 11 16:09:32 2004
From: deepayan at stat.wisc.edu (Deepayan Sarkar)
Date: Sun Jul 11 16:09:06 2004
Subject: [Rd] Reproducible Rterm crash. (PR#7072)
In-Reply-To: <7acf301b.5d80e420.81e4000@po-d.temple.edu>
References: <7acf301b.5d80e420.81e4000@po-d.temple.edu>
Message-ID: <200407110909.32848.deepayan@stat.wisc.edu>

On Friday 09 July 2004 22:14, Richard M. Heiberger wrote:
> Deepayan Sarkar:
> > This will give you non-empty panels, but not different angles of
> > rotation. This is because panel.wireframe doesn't handle screen,
> > the top-level function (wireframe) does. There's no good reason for
> > this behavior, so I'll fix it. But since this would be an API
> > change, I don't think I should do it in a stable update. I can send
> > you a patched version privately if you wish.
>
> I named the arguments as you suggested and now the panels are filled.
>  As you noted, they all show the same rotation.
>
> Please send me the revised wireframe and panel.wireframe with the
> rotation moved down into the panel.  Thank you.

An updated source package is up at

http://www.stat.wisc.edu/~deepayan/R/lattice-versions/lattice_0.9-16.001.tar.gz

> Can you clarify the statement "stable update".  I think this means (I
> hope that is what it means) that you will make the change in 1.9.2,
> but not in any intermediate release.

By stable, I mean the R 1.9.x series. I don't know if there will be a 
1.9.2, but even if there is, I think it would be inappropriate to make 
changes that could potentially break currently working code. While 
that's extremely unlikely to happen with these changes, it's possible, 
and I can't really assume that no one would be affected. For example, 
it would be possible to get different rotations in different panels 
using the current lattice (in a non-S-compatible way), by using the 
'rot.mat' argument in panel.wireframe instead of 'screen', and that 
code would no longer work after the changes. 

On the other hand, such changes would be acceptable for a major upgrade. 
The next one's going to be 2.0.0, sometime around October. Till then, 
you can get the updated version of lattice with the pre-release 
unstable builds, but not with the 'released' 1.9.x versions.

Deepayan

From simon.urbanek at math.uni-augsburg.de  Sun Jul 11 16:23:10 2004
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Sun Jul 11 16:23:55 2004
Subject: [Rd] library( ) and verbose=
In-Reply-To: <40F11F54.5070505@vanderbilt.edu>
References: <40F11F54.5070505@vanderbilt.edu>
Message-ID: <D6389012-D345-11D8-BE4D-000A959F327E@math.uni-augsburg.de>

On Jul 11, 2004, at 1:07 PM, Frank E Harrell Jr wrote:

> The Hmisc package has in its .First.lib function a verbose argument,
> which I thought was the way to allow users to suppress certain 
> messages,
> by issuing library(Hmisc, verbose=FALSE).  But I see that library( )
> does not pass verbose to .First.lib.  The default for verbose in Hmisc
> is TRUE because .First.lib prints some important information about
> masked functions.  What is the best way to fix this?

AFAIR the official way to suppress unwanted messages is 
warn.conflicts=FALSE so the user probably wants to issue
library(Hmisc, warn.conflicts=FALSE).
As of 'verbose' - it is not by default TRUE - it's actually determined 
by the current "verbose" option, so users can actually change the 
default as desired.
On the other hand .First.lib takes only two, fixed arguments, so AFAIK 
you cannot pass any additional arguments from outside (I believe this 
applies to .onLoad and friends, too).
In fact I'm not quite sure what you want to "fix" here .. is it the 
wish in general to be able to pass arguments to packages while being 
loaded? In your specific case I'd say you don't need that since you 
have always access to the 'verbose' option ...

Simon

From deepayan at stat.wisc.edu  Sun Jul 11 17:07:21 2004
From: deepayan at stat.wisc.edu (Deepayan Sarkar)
Date: Sun Jul 11 17:17:30 2004
Subject: [Rd] bug in xyplot xlab, etc (PR#7076)
In-Reply-To: <40F135A4.4090606@statistik.uni-dortmund.de>
References: <20040710212810.1244FEAC0@slim.kubism.ku.dk>
	<40F135A4.4090606@statistik.uni-dortmund.de>
Message-ID: <200407111007.21176.deepayan@stat.wisc.edu>

On Sunday 11 July 2004 07:42, Uwe Ligges wrote:

> Let me also point out that the documentation (?xy.plot from lattice)
> is like some of those german bureaucreatic documents:
>
>    ylab  Fine control possible, see entry for xlab.
>    xlab  Fine control is possible, see entry for sub.
>    sub   See entry for main for finer control options.
>
> Deepayan might want to point to "main" from all of these ....

Well, that was my idea of a bad joke.

:-(

Deepayan

From simon.urbanek at math.uni-augsburg.de  Sun Jul 11 19:13:27 2004
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Sun Jul 11 19:14:09 2004
Subject: [Rd] R + OS X + gcc 3.5 = not quite there ..
Message-ID: <9FB0B53C-D35D-11D8-BE4D-000A959F327E@math.uni-augsburg.de>

I tried to compile R (current R-patched to be more precise) with gcc 
3.5 by Apple (which will be probably shipped with Tiger) and here's how 
far I got:

1) compilation itself was fine except for one exception:
../../../../../../R-patched/src/library/stats/src/starma.c: In function 
`forkal':
../../../../../../R-patched/src/library/stats/src/starma.c:384: error: 
invalid lvalue in assignment

relevant code:

for (j = 0; j < nt; j++)
if(!ISNAN(tmp = G->resid[j])) { nu++; sigma2 += tmp * tmp; }

problem: ISNAN changed obviously as the pre-processing result shows:

  if(!(( ( sizeof ( tmp = G->resid[j] ) == sizeof(double) ) ? __isnand ( 
(double)tmp = G->resid[j] ) : ( sizeof ( tmp = G->resid[j] ) == sizeof( 
float) ) ? __isnanf ( (float)tmp = G->resid[j] ) : __isnan ( ( long 
double )tmp = G->resid[j] ) )!=0)) { nu++; sigma2 += tmp * tmp; }

fix: get the assignment out of ISNAN:
for (j = 0; j < nt; j++) {
     tmp = G->resid[j];
     if(!ISNAN(tmp)) { nu++; sigma2 += tmp * tmp; }
}

2) DYLD_LIBRARY_PATH shouldn't be too eagerly changed - R segfaulted 
with the default setting. Unfortunately it segfaulted in a weird place 
(in code responsible for loading a shared library somewhere in non-R 
code). Removing all unnecessary stuff (such as /usr/local) from the 
path helped (i.e. the path is now just ${R_HOME}/bin).

3) problem with saved images. I can't quite figure out this one:
basically R isn't able to load images stored during the package 
installation phase. I get this error:
Error: bad restore file magic number (file may be corrupted)-- no data 
loaded

for example with stats:
 > library(stats)
Error: bad restore file magic number (file may be corrupted)-- no data 
loaded
Error in library(stats) : package/namespace load failed

same if you try to load .../stats/R/all.rda manually.
I put the rda file in http://www.rosuda.org/misc/all.rda (it comes from 
the stats package) for anyone who can have a look at it...

using save/load manually on arbitrary objects worked for me, however I 
don't know how to re-create the all.rda manually, so I'm stuck here. 
Any ideas?

Cheers,
Simon

From edd at debian.org  Sun Jul 11 20:09:41 2004
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun Jul 11 20:10:25 2004
Subject: [Rd] library( ) and verbose=
In-Reply-To: <D6389012-D345-11D8-BE4D-000A959F327E@math.uni-augsburg.de>
References: <40F11F54.5070505@vanderbilt.edu>
	<D6389012-D345-11D8-BE4D-000A959F327E@math.uni-augsburg.de>
Message-ID: <20040711180941.GA1455@sonny.eddelbuettel.com>

On Sun, Jul 11, 2004 at 04:23:10PM +0200, Simon Urbanek wrote:
> On Jul 11, 2004, at 1:07 PM, Frank E Harrell Jr wrote:
> 
> >The Hmisc package has in its .First.lib function a verbose argument,
> >which I thought was the way to allow users to suppress certain 
> >messages,
> >by issuing library(Hmisc, verbose=FALSE).  But I see that library( )
> >does not pass verbose to .First.lib.  The default for verbose in Hmisc
> >is TRUE because .First.lib prints some important information about
> >masked functions.  What is the best way to fix this?
> 
> AFAIR the official way to suppress unwanted messages is 
> warn.conflicts=FALSE so the user probably wants to issue
> library(Hmisc, warn.conflicts=FALSE).

Not bad, but note that Hmisc has a very explicit

    .First.lib <- function(lib, pkg, verbose=TRUE, ...) {
      if(verbose)
          cat("Hmisc library by Frank E Harrell Jr\n\n",
              "Type library(help='Hmisc'), ?Overview, or ?Hmisc.Overview')\n",
	      [...]     
	      
so the additional option() Brian suggested way indeed be the best way.	      

> As of 'verbose' - it is not by default TRUE - it's actually determined 
> by the current "verbose" option, so users can actually change the 
> default as desired.

I tried that several different ways before I brought this to Frank's
attention. No method worked; I ended up altering the R code in the installed
package to set the verbose=FALSE in the snipped shown above.

> On the other hand .First.lib takes only two, fixed arguments, so AFAIK 
> you cannot pass any additional arguments from outside (I believe this 
> applies to .onLoad and friends, too).
> In fact I'm not quite sure what you want to "fix" here .. is it the 
> wish in general to be able to pass arguments to packages while being 
> loaded? In your specific case I'd say you don't need that since you 
> have always access to the 'verbose' option ...

Quite so.

Dirk

-- 
Those are my principles, and if you don't like them... well, I have others.
                                                -- Groucho Marx

From deepayan at stat.wisc.edu  Mon Jul 12 05:46:08 2004
From: deepayan at stat.wisc.edu (deepayan@stat.wisc.edu)
Date: Mon Jul 12 05:46:10 2004
Subject: [Rd] Segfault with options() (PR#7078)
Message-ID: <20040712034608.3E043E963@slim.kubism.ku.dk>


This is completely undocumented use of options, but it does cause a 
segfault with r-patched and r-devel on Linux:

options(list('digits', 'scipen'))

Strangely enough, 

options(list('digits'))

and 

options(list(digits = 10, scipen = 2))

work as might be expected.

Deepayan

From dmurdoch at pair.com  Mon Jul 12 14:05:58 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Mon Jul 12 14:06:33 2004
Subject: [Rd] Re: tail(<matrix>) column numbers
In-Reply-To: <40F11F44.3010302@pburns.seanet.com>
References: <Pine.LNX.4.44.0401261539050.28730-100000@gannet.stats>	<40158C9E.9060807@pburns.seanet.com>	<p0rc10l69l3igm327l4kkjoi8eiobop64l@4ax.com>	<401673AE.1090900@pburns.seanet.com>
	<16622.22750.297030.525566@gargle.gargle.HOWL>
	<40F11F44.3010302@pburns.seanet.com>
Message-ID: <iev4f0t7thrp89acfnpctbvu7o9n5l3t7b@4ax.com>

On Sun, 11 Jul 2004 12:06:44 +0100, Patrick Burns
<pburns@pburns.seanet.com> wrote :

>I disagree with Martin's assertion that "tail" is not useful
>for programming.  It has a few features relative to the
>do-it-yourself approach:

Me too actually.  I think tail() has two uses, interactive and
programmatic.  I think it would be better for interactive use if 
the row names were added, and only slightly worse for programmatic use
if an option were given to turn them off.

In interactive use, I find it unhelpful to be told that something is
in row 3 when it's really in row 47.

Duncan Murdoch

>
>*)  It compactly makes the intention clear.
>*)  It automatically handles cases where there may be
>either a vector or a matrix.
>*)  It handles cases where there is less data than is being
>sought (which may or may not be a good thing).
>
>"tail" of functions is what is definitely intended for interactive
>use.
>
>Pat
>
>Martin Maechler wrote:
>
>>>>>>>"PatBurns" == Patrick Burns <pburns@pburns.seanet.com>
>>>>>>>    on Tue, 27 Jan 2004 14:20:30 +0000 writes:
>>>>>>>            
>>>>>>>
>>
>>[more than half a year ago]
>>
>>    PatBurns> Duncan Murdoch wrote:
>>
>>   .............
>>
>>    DM> One other one I'll look at:
>>    DM> 
>>    DM> If a matrix doesn't have row names, I might add names
>>    DM> like '[nn,]' to it, so I get results like
>>
>>      R> x <- matrix(1:100,ncol=2)
>>      R> tail(x)
>>   Rout>       [,1] [,2]
>>   Rout> [45,]   45   95
>>   Rout> [46,]   46   96
>>   Rout> [47,]   47   97
>>   Rout> [48,]   48   98
>>   Rout> [49,]   49   99
>>   Rout> [50,]   50  100
>>   Rout> 
>>    DM> instead of the current
>>
>>      R> tail(x)
>>   Rout>      [,1] [,2]
>>   Rout> [1,]   45   95
>>   Rout> [2,]   46   96
>>   Rout> [3,]   47   97
>>   Rout> [4,]   48   98
>>   Rout> [5,]   49   99
>>   Rout> [6,]   50  100
>>
>>    DM> I just want to be careful that this doesn't mess up
>>    DM> something else.
>>    DM> 
>>    DM> Duncan Murdoch
>>
>>
>>    PatBurns> I think this could be being too "helpful".  Using
>>    PatBurns> tail on a matrix may often be done in a program so
>>    PatBurns> I think leaving things as they come is the best
>>    PatBurns> policy.
>>
>>I tend to disagree, and would like to have us think about it
>>again:
>>
>>1)  Duncan's proposal was to only add row names *when* there are none.
>>2)  Pat is write that tail() for matrices maybe used not only interactively
>>    and help(tail)'s "Value:" section encourages this to some extent.
>>
>>    However, how can adding column names to such a matrix-tail be harmful?
>>
>>    Well, only in the case where the tail is quite large, the
>>    added dimnames add unneeded memory and other overhead when
>>    dealing with that matrix.
>>
>> But I think, programmers/users caring about efficient code
>> wouldn't use tail(<matrix>) in their function code, would they?
>>
>>In conclusion, I'd still argue for following Duncan's proposal,
>>maybe adding a \note{.} to head.Rd stating that these functions
>>were meant for interactive use, and for "programming", we'd
>>rather recommend the direct  (n-k+1):n indexing.
>>
>>
>>  
>>
>
>
>

From maechler at stat.math.ethz.ch  Mon Jul 12 15:39:39 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon Jul 12 15:39:46 2004
Subject: [Rd] Re: tail(<matrix>) column numbers
In-Reply-To: <iev4f0t7thrp89acfnpctbvu7o9n5l3t7b@4ax.com>
References: <Pine.LNX.4.44.0401261539050.28730-100000@gannet.stats>
	<40158C9E.9060807@pburns.seanet.com>
	<p0rc10l69l3igm327l4kkjoi8eiobop64l@4ax.com>
	<401673AE.1090900@pburns.seanet.com>
	<16622.22750.297030.525566@gargle.gargle.HOWL>
	<40F11F44.3010302@pburns.seanet.com>
	<iev4f0t7thrp89acfnpctbvu7o9n5l3t7b@4ax.com>
Message-ID: <16626.38043.790301.243252@gargle.gargle.HOWL>

>>>>> "Duncan" == Duncan Murdoch <dmurdoch@pair.com>
>>>>>     on Mon, 12 Jul 2004 08:05:58 -0400 writes:

    Duncan> On Sun, 11 Jul 2004 12:06:44 +0100, Patrick Burns
    Duncan> <pburns@pburns.seanet.com> wrote :

    >> I disagree with Martin's assertion that "tail" is not
    >> useful for programming.  

I really didn't assert that.... to the contrary I said you were
*right* (where I used 'write' -- probably my worst typing lapsus ever)
but never mind

    >> useful for programming.  It has a few features relative
    >> to the do-it-yourself approach:

    Duncan> Me too actually.  I think tail() has two uses,
    Duncan> interactive and programmatic.  I think it would be
    Duncan> better for interactive use if the row names were
    Duncan> added, and only slightly worse for programmatic use
    Duncan> if an option were given to turn them off.

yes, so a programmer would use

       tail(obj, barebones=TRUE)
or     tail(obj, addnames=FALSE)
or such an option -- where we'd want the interactive use not to
have to specify the option.

Note that this would still be a non-backward compatibaly
behavior -- which I think however is acceptable in this special
case.


    Duncan> In interactive use, I find it unhelpful to be told
    Duncan> that something is in row 3 when it's really in row
    Duncan> 47.

indeed.

    Duncan> Duncan Murdoch

    >>  *) It compactly makes the intention clear.  *) It
    >> automatically handles cases where there may be either a
    >> vector or a matrix.  *) It handles cases where there is
    >> less data than is being sought (which may or may not be a
    >> good thing).
    >> 
    >> "tail" of functions is what is definitely intended for
    >> interactive use.
    >> 
    >> Pat
    >> 
    >> Martin Maechler wrote:
    >> 
    >>>>>>>> "PatBurns" == Patrick Burns
    >>>>>>>> <pburns@pburns.seanet.com> on Tue, 27 Jan 2004
    >>>>>>>> 14:20:30 +0000 writes:
    >>>>>>>> 
    >>>>>>>> 
    >>>  [more than half a year ago]
    >>> 
    PatBurns> Duncan Murdoch wrote:
    >>>  .............
    >>> 
    DM> One other one I'll look at:
    DM> 
    DM> If a matrix doesn't have row names, I might add names
    DM> like '[nn,]' to it, so I get results like
    >>>
    R> x <- matrix(1:100,ncol=2) tail(x)
    Rout> [,1] [,2] [45,] 45 95 [46,] 46 96 [47,] 47 97 [48,] 48
    Rout> 98 [49,] 49 99 [50,] 50 100
    Rout> 
    DM> instead of the current
    >>>
    R> tail(x)
    Rout> [,1] [,2] [1,] 45 95 [2,] 46 96 [3,] 47 97 [4,] 48 98
    Rout> [5,] 49 99 [6,] 50 100
    >>>
    DM> I just want to be careful that this doesn't mess up
    DM> something else.
    DM> 
    DM> Duncan Murdoch
    >>>
    PatBurns> I think this could be being too "helpful".  Using
    PatBurns> tail on a matrix may often be done in a program so
    PatBurns> I think leaving things as they come is the best
    PatBurns> policy.
    >>>  I tend to disagree, and would like to have us think
    >>> about it again:
    >>> 
    >>> 1) Duncan's proposal was to only add row names *when*
    >>> there are none.  2) Pat is write that tail() for
    >>> matrices maybe used not only interactively and
    >>> help(tail)'s "Value:" section encourages this to some
    >>> extent.
    >>> 
    >>> However, how can adding column names to such a
    >>> matrix-tail be harmful?
    >>> 
    >>> Well, only in the case where the tail is quite large,
    >>> the added dimnames add unneeded memory and other
    >>> overhead when dealing with that matrix.
    >>> 
    >>> But I think, programmers/users caring about efficient
    >>> code wouldn't use tail(<matrix>) in their function code,
    >>> would they?
    >>> 
    >>> In conclusion, I'd still argue for following Duncan's
    >>> proposal, maybe adding a \note{.} to head.Rd stating
    >>> that these functions were meant for interactive use, and
    >>> for "programming", we'd rather recommend the direct
    >>> (n-k+1):n indexing.
    >>> 
    >>> 
    >>> 
    >>> 
    >>

    Duncan> ______________________________________________
    Duncan> R-devel@stat.math.ethz.ch mailing list
    Duncan> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From ligges at statistik.uni-dortmund.de  Mon Jul 12 16:27:47 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon Jul 12 16:27:58 2004
Subject: [Rd] Re: [R] Creating a minimal package
In-Reply-To: <ta45f0ljhetd4ai746fs18dff7mim7o1i0@4ax.com>
References: <OAEOKPIGCLDDHAEMCAKICEHJCPAA.sdhyok@email.unc.edu>	<40F0B07E.5060105@jhsph.edu>	<loom.20040711T073351-641@post.gmane.org>	<ngc2f0h8up0ip07bshguimh85644ltme39@4ax.com>	<loom.20040711T231128-574@post.gmane.org>	<ebr3f098aho62muqapebiplkh1n3prf7et@4ax.com>	<loom.20040712T055834-547@post.gmane.org>	<40F23322.6010809@statistik.uni-dortmund.de>
	<loom.20040712T131806-594@post.gmane.org>
	<40F28EB3.7060902@statistik.uni-dortmund.de>
	<ta45f0ljhetd4ai746fs18dff7mim7o1i0@4ax.com>
Message-ID: <40F29FE3.40906@statistik.uni-dortmund.de>

Duncan Murdoch wrote:

> On Mon, 12 Jul 2004 15:14:27 +0200, Uwe Ligges
> <ligges@statistik.uni-dortmund.de> wrote :
> 
> 
>>Gabor Grothendieck wrote:
> 
> 
>>>The objective should be that creating a package is as easy as this:
>>>
>>>   f <- function()1; g <- function()2; d <- 3; e <- 4:5
>>>   package.skeleton(list=c("f","g","d","e"), name="AnExample")
>>>   library(AnExample)
>>>   f()
>>>   
>>>which means that the package needs to be inserted where library will
>>>find it. It should not be necessary to have an understanding of this.
>>>
>>
>>OK, I understand what you are going to do, but in that case you can use 
>>dump() into an *.R or save() into an *.RData file and use 
>>source()/load() to load it again. I don't see any advantage of a package 
>>if you don't want to modify documentation or other stuff in the package.
>>Also, you would need the tools to make a binary package from the source 
>>package somewhere. package.skeleton() is clearly not intended to be used 
>>for that purpose, but to create the template for your source package.
>>Hence the default should not be changed.
> 
> 
> I agree with both of you on this.  Currently the method that Uwe
> describes is a lot easier than creating a package, but I think the
> objective should be to make things almost as easy as Gabor describes.
> 
> Not completely as easy:  he's missing the step where the package is
> installed.  I think we want to keep that (because the distinction
> between the source of a package and the installed copy of it is
> important), but it should be easier to install a new package than it
> is now, especially in Windows.  So I'm suggesting that it would be
> nice to be able to do something like this:
> 
>  f <- function()1; g <- function()2; d <- 3; e <- 4:5
>  package.skeleton(list=c("f","g","d","e"), name="AnExample")
>  install.packages("AnExample", build = TRUE)
>  library(AnExample)
>  f()

[moved the thread to R-devel....]

Yes. That's the ideal solution.

Anyway, these days you still need perl, and what happens if you have got 
some C or Fortran sources?
Additionally, we can never do all the stuff without the tools. And I 
think you don't want to be able to do so, because maintaining the R 
sources will get much harder if development of the package management is 
that different under Unix-alikes and Windows. From my point of view the 
aim should be to join, not to diverge here ....

Uwe


BTW: Note that creating packages in such an easy manner does not remind 
people to write their documentation. And if nobody tells me to write 
documentation, my function will be useless (even for myself in a couple 
of weeks). But that's just the pedagogical part. ;-)



> but currently install.packages doesn't know how to build, and for most
> Windows users, a fairly substantial effort is necessary to obtain all
> the tools.
 >
> Duncan Murdoch

From ligges at statistik.uni-dortmund.de  Mon Jul 12 16:35:08 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Mon Jul 12 16:35:50 2004
Subject: [Rd] read.table, read.fwf, and na.strings (PR#7075)
Message-ID: <20040712143508.BAA80FC04@slim.kubism.ku.dk>

rmh@temple.edu wrote:

> # Your mailer is set to "none" (default on Windows),
> # hence we cannot send the bug report directly from R.
> # Please copy the bug report (after finishing it) to
> # your favorite email program and send it to
> #
> #       r-bugs@r-project.org
> #
> ######################################################
> 
> 
> Is this intended behavior for the read.fwf(na.strings="-999")?
> I anticipated that the na.strings would be padded with blanks.
> Therefore I anticipated getting the result tmp2 from the simpler
> na.strings in the tmp1 assignment?  My anticipation is based on the
> documentation that says
> "Blank fields are also considered to be missing values."
> 
> 
>>na.strings: a vector of strings which are to be interpreted as 'NA'
>>          values.  Blank fields are also considered to be missing
>>          values.
> 
> 
> 
> temp.dat

A blank field in the first column of the first row is:

   3456-999 01234
56-9990123412345

The field "-999 " cannot assumed to be blank in any sence from my point
of view.

Anyway, improving NA handling in read.fwf() is certainly something for
the wishlist (particularly padding blanks for na.string(s)). Is anybody
out there going to contribute (given anybody else thinks it is useful)?

Uwe Ligges



> ----------------
> 123456-999 01234
> 56-9990123412345
> ----------------
> 
> read.fwf.test.r
> ------------------------------------------------
> tmp1 <- read.fwf("temp.dat",
>                  na.strings="-999",
>                  col.names=LETTERS[1:4],
>                  widths=c(2,4,5,5))
> tmp1
> tmp2 <- read.fwf("temp.dat",
>                  na.strings=c("-999","-999 "),
>                  col.names=LETTERS[1:4],
>                  widths=c(2,4,5,5))
> tmp2
> ------------------------------------------------
> 
> 
> 
>>tmp1
> 
>    A    B    C     D
> 1 12 3456 -999  1234
> 2 56   NA 1234 12345
> 
>>tmp2
> 
>    A    B    C     D
> 1 12 3456   NA  1234
> 2 56   NA 1234 12345
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status = 
>  major = 1
>  minor = 9.1
>  year = 2004
>  month = 06
>  day = 21
>  language = R
> 
> Windows XP Home Edition (build 2600) Service Pack 1.0
> 
> Search Path:
>  .GlobalEnv, file:c:/HOME/rmh/hh/splus.library/HH/.RData, package:methods, package:stats, 
> package:utils, package:multcomp, package:mvtnorm, package:abind, package:graphics, 
> package:lattice, package:grid, Autoloads, package:base
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From gregory_r_warnes at groton.pfizer.com  Mon Jul 12 17:28:29 2004
From: gregory_r_warnes at groton.pfizer.com (Warnes, Gregory R)
Date: Mon Jul 12 17:31:24 2004
Subject: [Rd] RE: tail(<matrix>) column numbers
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20C521708@groexmb02.pfizer.com>

I also vote for the 'helpful' addition on row numbers based on the original
matrix when no row names are present, with an optional argument to prevent
this behaviour.

-G

> -----Original Message-----
> From: Duncan Murdoch [mailto:dmurdoch@pair.com]
> Sent: Monday, July 12, 2004 8:06 AM
> To: Patrick Burns
> Cc: Martin Maechler; Warnes, Gregory R; Prof Brian Ripley; 
> Kevin Wright;
> r-devel@stat.math.ethz.ch; Peter Dalgaard
> Subject: Re: tail(<matrix>) column numbers
> 
> 
> On Sun, 11 Jul 2004 12:06:44 +0100, Patrick Burns
> <pburns@pburns.seanet.com> wrote :
> 
> >I disagree with Martin's assertion that "tail" is not useful
> >for programming.  It has a few features relative to the
> >do-it-yourself approach:
> 
> Me too actually.  I think tail() has two uses, interactive and
> programmatic.  I think it would be better for interactive use if 
> the row names were added, and only slightly worse for programmatic use
> if an option were given to turn them off.
> 
> In interactive use, I find it unhelpful to be told that something is
> in row 3 when it's really in row 47.
> 
> Duncan Murdoch
> 
> >
> >*)  It compactly makes the intention clear.
> >*)  It automatically handles cases where there may be
> >either a vector or a matrix.
> >*)  It handles cases where there is less data than is being
> >sought (which may or may not be a good thing).
> >
> >"tail" of functions is what is definitely intended for interactive
> >use.
> >
> >Pat
> >
> >Martin Maechler wrote:
> >
> >>>>>>>"PatBurns" == Patrick Burns <pburns@pburns.seanet.com>
> >>>>>>>    on Tue, 27 Jan 2004 14:20:30 +0000 writes:
> >>>>>>>            
> >>>>>>>
> >>
> >>[more than half a year ago]
> >>
> >>    PatBurns> Duncan Murdoch wrote:
> >>
> >>   .............
> >>
> >>    DM> One other one I'll look at:
> >>    DM> 
> >>    DM> If a matrix doesn't have row names, I might add names
> >>    DM> like '[nn,]' to it, so I get results like
> >>
> >>      R> x <- matrix(1:100,ncol=2)
> >>      R> tail(x)
> >>   Rout>       [,1] [,2]
> >>   Rout> [45,]   45   95
> >>   Rout> [46,]   46   96
> >>   Rout> [47,]   47   97
> >>   Rout> [48,]   48   98
> >>   Rout> [49,]   49   99
> >>   Rout> [50,]   50  100
> >>   Rout> 
> >>    DM> instead of the current
> >>
> >>      R> tail(x)
> >>   Rout>      [,1] [,2]
> >>   Rout> [1,]   45   95
> >>   Rout> [2,]   46   96
> >>   Rout> [3,]   47   97
> >>   Rout> [4,]   48   98
> >>   Rout> [5,]   49   99
> >>   Rout> [6,]   50  100
> >>
> >>    DM> I just want to be careful that this doesn't mess up
> >>    DM> something else.
> >>    DM> 
> >>    DM> Duncan Murdoch
> >>
> >>
> >>    PatBurns> I think this could be being too "helpful".  Using
> >>    PatBurns> tail on a matrix may often be done in a program so
> >>    PatBurns> I think leaving things as they come is the best
> >>    PatBurns> policy.
> >>
> >>I tend to disagree, and would like to have us think about it
> >>again:
> >>
> >>1)  Duncan's proposal was to only add row names *when* 
> there are none.
> >>2)  Pat is write that tail() for matrices maybe used not 
> only interactively
> >>    and help(tail)'s "Value:" section encourages this to 
> some extent.
> >>
> >>    However, how can adding column names to such a 
> matrix-tail be harmful?
> >>
> >>    Well, only in the case where the tail is quite large, the
> >>    added dimnames add unneeded memory and other overhead when
> >>    dealing with that matrix.
> >>
> >> But I think, programmers/users caring about efficient code
> >> wouldn't use tail(<matrix>) in their function code, would they?
> >>
> >>In conclusion, I'd still argue for following Duncan's proposal,
> >>maybe adding a \note{.} to head.Rd stating that these functions
> >>were meant for interactive use, and for "programming", we'd
> >>rather recommend the direct  (n-k+1):n indexing.
> >>
> >>
> >>  
> >>
> >
> >
> >
> 
> 


LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}

From maechler at stat.math.ethz.ch  Mon Jul 12 18:37:21 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon Jul 12 18:37:22 2004
Subject: [Rd] Segfault with options() (PR#7078)
Message-ID: <20040712163721.080D1F539@slim.kubism.ku.dk>

Thank you, Deepayan:

>>>>> "Deepayan" == Deepayan Sarkar <deepayan@stat.wisc.edu>
>>>>>     on Mon, 12 Jul 2004 05:46:08 +0200 (CEST) writes:

    Deepayan> This is completely undocumented use of options,
    Deepayan> but it does cause a segfault with r-patched and
    Deepayan> r-devel on Linux:

    Deepayan> options(list('digits', 'scipen'))

    Deepayan> Strangely enough,

    Deepayan> options(list('digits'))

    Deepayan> and

    Deepayan> options(list(digits = 10, scipen = 2))

    Deepayan> work as might be expected.

I think I've seen where and how the problem occurs and am
currently testing an easy patch.

That will however give an error message for all calls 
   options( mylist )
when mylist is a list that has  
  length(names(mylist)) !=  length(mylist)

You weren't making a "feature request" in the other direction 
where you? 

Regards,
Martin Maechler

From deepayan at stat.wisc.edu  Mon Jul 12 18:54:22 2004
From: deepayan at stat.wisc.edu (deepayan@stat.wisc.edu)
Date: Mon Jul 12 18:54:23 2004
Subject: [Rd] Segfault with options() (PR#7078)
Message-ID: <20040712165422.303A4FBF9@slim.kubism.ku.dk>

On Monday 12 July 2004 11:37, Martin Maechler wrote:
> Thank you, Deepayan:
> >>>>> "Deepayan" == Deepayan Sarkar <deepayan@stat.wisc.edu>
> >>>>>     on Mon, 12 Jul 2004 05:46:08 +0200 (CEST) writes:
>
>     Deepayan> This is completely undocumented use of options,
>     Deepayan> but it does cause a segfault with r-patched and
>     Deepayan> r-devel on Linux:
>
>     Deepayan> options(list('digits', 'scipen'))
>
>     Deepayan> Strangely enough,
>
>     Deepayan> options(list('digits'))
>
>     Deepayan> and
>
>     Deepayan> options(list(digits = 10, scipen = 2))
>
>     Deepayan> work as might be expected.
>
> I think I've seen where and how the problem occurs and am
> currently testing an easy patch.
>
> That will however give an error message for all calls
>    options( mylist )
> when mylist is a list that has
>   length(names(mylist)) !=  length(mylist)
>
> You weren't making a "feature request" in the other direction
> where you?

No. I'm playing around with the possibility of having similarly behaved 
functions like lattice.options() and lattice.getOption(), and I was 
checking the behaviour of options() when I encountered the segfault.

Should options( mylist ) work at all? It's not documented, at least not 
in ?options. Is that a documentation oversight?

Deepayan

From maechler at stat.math.ethz.ch  Mon Jul 12 19:04:42 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon Jul 12 19:04:44 2004
Subject: [Rd] Non-documentation of options(<list>) (PR#7079)
Message-ID: <20040712170442.3F20EFC04@slim.kubism.ku.dk>

This is a new bug report on missing documentation only

>>>>> "Deepayan" == Deepayan Sarkar <deepayan@stat.wisc.edu>
>>>>>     on Mon, 12 Jul 2004 11:55:20 -0500 writes:

    Deepayan> On Monday 12 July 2004 11:37, Martin Maechler
    Deepayan> wrote:

    <.......>

    >> You weren't making a "feature request" in the other
    >> direction where you?

    <.......>

    Deepayan> Should options( mylist ) work at all? It's not
    Deepayan> documented, at least not in ?options. Is that a
    Deepayan> documentation oversight?

You are right, it's not properly documentated,
but has been used "forever", typically as in

    op <- options(......) # previous option settings

    ...
    ...
    ...

    options(op) # reset options

analogously to par().

Patches to <Rsrc>/src/library/base/man/options.Rd are gladly accepted. ;-)

Martin Maechler

From dmurdoch at pair.com  Mon Jul 12 19:35:26 2004
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Mon Jul 12 19:35:30 2004
Subject: [Rd] Segfault with options() (PR#7078)
Message-ID: <20040712173526.5A95FEAC4@slim.kubism.ku.dk>

On Mon, 12 Jul 2004 18:54:22 +0200 (CEST), deepayan@stat.wisc.edu
wrote :

>Should options( mylist ) work at all?

Yes, that's used fairly often in the pattern

 save <- options( <something new> )
 on.exit(options(save))

>  It's not documented, at least not 
>in ?options.  Is that a documentation oversight?

Looks like it.  ?par, which uses similar syntax, documents ... as

     ...: arguments in 'tag = value' form, or a list of tagged values.
          The tags must come from the graphical parameters described
          below.

as opposed to ?options, which leaves off the "or a list" part.

Duncan Murdoch

From pburns at pburns.seanet.com  Mon Jul 12 21:27:56 2004
From: pburns at pburns.seanet.com (Patrick Burns)
Date: Mon Jul 12 21:28:15 2004
Subject: [Rd] Re: tail(<matrix>) column numbers
References: <D7A3CFD7825BD6119B880002A58F06C20C521708@groexmb02.pfizer.com>
Message-ID: <40F2E63C.3010509@pburns.seanet.com>

I give it my vote as well.

Pat


Warnes, Gregory R wrote:

>I also vote for the 'helpful' addition on row numbers based on the original
>matrix when no row names are present, with an optional argument to prevent
>this behaviour.
>
>-G
>
>  
>
>>-----Original Message-----
>>From: Duncan Murdoch [mailto:dmurdoch@pair.com]
>>Sent: Monday, July 12, 2004 8:06 AM
>>To: Patrick Burns
>>Cc: Martin Maechler; Warnes, Gregory R; Prof Brian Ripley; 
>>Kevin Wright;
>>r-devel@stat.math.ethz.ch; Peter Dalgaard
>>Subject: Re: tail(<matrix>) column numbers
>>
>>
>>On Sun, 11 Jul 2004 12:06:44 +0100, Patrick Burns
>><pburns@pburns.seanet.com> wrote :
>>
>>    
>>
>>>I disagree with Martin's assertion that "tail" is not useful
>>>for programming.  It has a few features relative to the
>>>do-it-yourself approach:
>>>      
>>>
>>Me too actually.  I think tail() has two uses, interactive and
>>programmatic.  I think it would be better for interactive use if 
>>the row names were added, and only slightly worse for programmatic use
>>if an option were given to turn them off.
>>
>>In interactive use, I find it unhelpful to be told that something is
>>in row 3 when it's really in row 47.
>>
>>Duncan Murdoch
>>
>>    
>>
>>>*)  It compactly makes the intention clear.
>>>*)  It automatically handles cases where there may be
>>>either a vector or a matrix.
>>>*)  It handles cases where there is less data than is being
>>>sought (which may or may not be a good thing).
>>>
>>>"tail" of functions is what is definitely intended for interactive
>>>use.
>>>
>>>Pat
>>>
>>>Martin Maechler wrote:
>>>
>>>      
>>>
>>>>>>>>>"PatBurns" == Patrick Burns <pburns@pburns.seanet.com>
>>>>>>>>>   on Tue, 27 Jan 2004 14:20:30 +0000 writes:
>>>>>>>>>           
>>>>>>>>>
>>>>>>>>>                  
>>>>>>>>>
>>>>[more than half a year ago]
>>>>
>>>>   PatBurns> Duncan Murdoch wrote:
>>>>
>>>>  .............
>>>>
>>>>   DM> One other one I'll look at:
>>>>   DM> 
>>>>   DM> If a matrix doesn't have row names, I might add names
>>>>   DM> like '[nn,]' to it, so I get results like
>>>>
>>>>     R> x <- matrix(1:100,ncol=2)
>>>>     R> tail(x)
>>>>  Rout>       [,1] [,2]
>>>>  Rout> [45,]   45   95
>>>>  Rout> [46,]   46   96
>>>>  Rout> [47,]   47   97
>>>>  Rout> [48,]   48   98
>>>>  Rout> [49,]   49   99
>>>>  Rout> [50,]   50  100
>>>>  Rout> 
>>>>   DM> instead of the current
>>>>
>>>>     R> tail(x)
>>>>  Rout>      [,1] [,2]
>>>>  Rout> [1,]   45   95
>>>>  Rout> [2,]   46   96
>>>>  Rout> [3,]   47   97
>>>>  Rout> [4,]   48   98
>>>>  Rout> [5,]   49   99
>>>>  Rout> [6,]   50  100
>>>>
>>>>   DM> I just want to be careful that this doesn't mess up
>>>>   DM> something else.
>>>>   DM> 
>>>>   DM> Duncan Murdoch
>>>>
>>>>
>>>>   PatBurns> I think this could be being too "helpful".  Using
>>>>   PatBurns> tail on a matrix may often be done in a program so
>>>>   PatBurns> I think leaving things as they come is the best
>>>>   PatBurns> policy.
>>>>
>>>>I tend to disagree, and would like to have us think about it
>>>>again:
>>>>
>>>>1)  Duncan's proposal was to only add row names *when* 
>>>>        
>>>>
>>there are none.
>>    
>>
>>>>2)  Pat is write that tail() for matrices maybe used not 
>>>>        
>>>>
>>only interactively
>>    
>>
>>>>   and help(tail)'s "Value:" section encourages this to 
>>>>        
>>>>
>>some extent.
>>    
>>
>>>>   However, how can adding column names to such a 
>>>>        
>>>>
>>matrix-tail be harmful?
>>    
>>
>>>>   Well, only in the case where the tail is quite large, the
>>>>   added dimnames add unneeded memory and other overhead when
>>>>   dealing with that matrix.
>>>>
>>>>But I think, programmers/users caring about efficient code
>>>>wouldn't use tail(<matrix>) in their function code, would they?
>>>>
>>>>In conclusion, I'd still argue for following Duncan's proposal,
>>>>maybe adding a \note{.} to head.Rd stating that these functions
>>>>were meant for interactive use, and for "programming", we'd
>>>>rather recommend the direct  (n-k+1):n indexing.
>>>>
>>>>
>>>> 
>>>>
>>>>        
>>>>
>>>
>>>      
>>>
>>    
>>
>
>
>LEGAL NOTICE
>Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
>
>
>  
>

From wolfram at fischer-zim.ch  Mon Jul 12 22:41:25 2004
From: wolfram at fischer-zim.ch (wolfram@fischer-zim.ch)
Date: Mon Jul 12 22:41:33 2004
Subject: [Rd] automated response (PR#7081)
Message-ID: <20040712204125.E2CC1F539@slim.kubism.ku.dk>


Zu Ihrer Information: Unsere Betriebsferien 
dauern bis zum bis 3.8.2004.

Mit freundlichen Gruessen - Wolfram Fischer

From rpeng at jhsph.edu  Mon Jul 12 23:36:08 2004
From: rpeng at jhsph.edu (rpeng@jhsph.edu)
Date: Mon Jul 12 23:36:12 2004
Subject: [Rd] names in `getAnywhere' object don't match docs (PR#7082)
Message-ID: <20040712213608.9EB21F58D@slim.kubism.ku.dk>

Full_Name: Roger D. Peng
Version: 1.9.1
OS: Linux (Fedora Core 1)
Submission from: (NULL) (162.129.44.120)


The docs for getAnywhere say:

Value:

     An object of class '"getAnywhere"'.  This is a list with
     components 

    name: the name searched for.

    funs: a list of objects found

  where: a character vector explaining where the object(s) were found

 visible: logical: is the object visible

    dups: logical: is the object identical to one earlier in the list.

But the object returned by getAnywhere() has names

> g <- getAnywhere("print")
> names(g)
[1] "name"    "objs"    "where"   "visible" "dups"   
>

From dmurdoch at pair.com  Tue Jul 13 03:09:06 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Tue Jul 13 03:09:16 2004
Subject: [Rd] Re: tail(<matrix>) column numbers
In-Reply-To: <40F2E63C.3010509@pburns.seanet.com>
References: <D7A3CFD7825BD6119B880002A58F06C20C521708@groexmb02.pfizer.com>
	<40F2E63C.3010509@pburns.seanet.com>
Message-ID: <9dd6f01tj99mcko0g66ui5hfmqpn0j59fv@4ax.com>

Sounds like most are in favour, so I'll go ahead with this change in
r-devel (to be 2.0.0 in the fall).

Duncan Murdoch

On Mon, 12 Jul 2004 20:27:56 +0100, Patrick Burns
<pburns@pburns.seanet.com> wrote:

>I give it my vote as well.
>
>Pat
>
>
>Warnes, Gregory R wrote:
>
>>I also vote for the 'helpful' addition on row numbers based on the original
>>matrix when no row names are present, with an optional argument to prevent
>>this behaviour.

 ....

From rmh at temple.edu  Tue Jul 13 06:07:52 2004
From: rmh at temple.edu (rmh@temple.edu)
Date: Tue Jul 13 06:08:00 2004
Subject: [Rd] read.table, read.fwf, and na.strings (PR#7083)
Message-ID: <20040713040752.ACBAFEAC4@slim.kubism.ku.dk>

I am pleased to report that R already has the answer to my request in
the 
   strip.white=TRUE,
argument.   With this argument
tmp3 <- read.fwf("temp.dat",
                 na.strings="-999",
                 strip.white=TRUE,
                 col.names=LETTERS[1:4],
                 widths=c(2,4,5,5))
tmp3
behaves exactly like I want it to behave.

Please add it explicitly to the documentation for read.fwf and all will be well.
Currently it is there only by indirect reference to read.table.

Rich

From maechler at stat.math.ethz.ch  Tue Jul 13 09:43:27 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue Jul 13 09:43:29 2004
Subject: [Rd] Non-documentation of options(<list>) (PR#7079)
Message-ID: <20040713074327.67E30F58D@slim.kubism.ku.dk>

This is now fixed in R-patched (and R-devel).

Martin

From dmurdoch at pair.com  Tue Jul 13 16:02:16 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Tue Jul 13 16:02:18 2004
Subject: [Rd] Re: [R] Creating a minimal package
In-Reply-To: <40F3E850.8020202@stat.wisc.edu>
References: <40F0B07E.5060105@jhsph.edu>	<loom.20040711T073351-641@post.gmane.org>	<ngc2f0h8up0ip07bshguimh85644ltme39@4ax.com>	<loom.20040711T231128-574@post.gmane.org>	<ebr3f098aho62muqapebiplkh1n3prf7et@4ax.com>	<loom.20040712T055834-547@post.gmane.org>	<40F23322.6010809@statistik.uni-dortmund.de>	<loom.20040712T131806-594@post.gmane.org>	<40F28EB3.7060902@statistik.uni-dortmund.de>
	<ta45f0ljhetd4ai746fs18dff7mim7o1i0@4ax.com>
	<40F3E850.8020202@stat.wisc.edu>
Message-ID: <j0q7f0hldlv3vhshgdggt3crpsi46ppt3f@4ax.com>

On Tue, 13 Jul 2004 08:49:04 -0500, Douglas Bates
<bates@stat.wisc.edu> wrote :

>I haven't checked on the installation tools under Windows but I think 
>that most, if not all, of the creation and installation of a binary 
>package (i.e. building indices, etc.) could be done in R for packages 
>that do not require compilation of source code and provided that you are 
>willing to go without some forms of the man pages.

Yes, I think that's right.  Currently the roadblocks are:

 - Perl 

I think we could write around this.

 - Microsoft Help Compiler

Users who don't have it could do without CHM help files.

 - Lots of Cygwin (and other) tools involved in making packages.

We could possibly rewrite the build process in R, but I don't think we
should.  I think a better solution would be to distribute the toolset
with R.  The full toolset doesn't add up to much (maybe 1.5 M).  A
problem is that multiple Cygwin versions don't coexist nicely, so we'd
have to be careful during installation.

 - MinGW gcc

Users who want to compile code would still have to install the
compiler.

Duncan

From ggrothendieck at myway.com  Tue Jul 13 17:29:40 2004
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Tue Jul 13 17:29:45 2004
Subject: [Rd] Re: [R] Creating a minimal package
Message-ID: <20040713152940.4E3C112CE0@mprdmxin.myway.com>


Duncan Murdoch writes:

> - Lots of Cygwin (and other) tools involved in making packages.
>
> We could possibly rewrite the build process in R, but I don't think we
> should. I think a better solution would be to distribute the toolset
> with R. The full toolset doesn't add up to much (maybe 1.5 M). A
> problem is that multiple Cygwin versions don't coexist nicely, so we'd
> have to be careful during installation.

There have been attempts to rewrite the UNIX tools in other languages
(perl, lua) and given the high level facilities available in R it 
would be no less feasible to rewrite them in R although I don't know
whether it is really a good idea or not.

From tplate at blackmesacapital.com  Tue Jul 13 18:05:09 2004
From: tplate at blackmesacapital.com (Tony Plate)
Date: Tue Jul 13 18:05:23 2004
Subject: [Rd] Re: tail(<matrix>) column numbers
In-Reply-To: <40F2E63C.3010509@pburns.seanet.com>
References: <D7A3CFD7825BD6119B880002A58F06C20C521708@groexmb02.pfizer.com>
	<40F2E63C.3010509@pburns.seanet.com>
Message-ID: <6.1.0.6.2.20040712142450.03f5f290@mailhost.blackmesacapital.com>

It does seem useful to report original line numbers when tail() is used 
interactively, but to do this properly, shouldn't it be done in "print" 
method, rather than by adding row numbers to the data?  This is admittedly 
difficult, because the tail method and the print method are completely 
separate.  One could possibly do this by adding an additional attribute to 
the object returned by tail (which presumably would be lost on further 
subsetting), and modifying the relevant print methods to use such 
information when it is present.

I suspect that the trouble may not be worth the effort in this particular 
case, but nonetheless it still may be worth thinking about as an example of 
the general problem of how reconcile what is convenient for interactive use 
with what is convenient for programming use.  (Other examples of which have 
resulted in permanent defects (IMHO) of the language, such as partial 
matching for "$" and the default drop=T in subsetting.)

-- Tony Plate

At Monday 01:27 PM 7/12/2004, Patrick Burns wrote:
>I give it my vote as well.
>
>Pat
>
>
>Warnes, Gregory R wrote:
>
>>I also vote for the 'helpful' addition on row numbers based on the original
>>matrix when no row names are present, with an optional argument to prevent
>>this behaviour.
>>
>>-G
>>
>>
>>
>>>-----Original Message-----
>>>From: Duncan Murdoch [mailto:dmurdoch@pair.com]
>>>Sent: Monday, July 12, 2004 8:06 AM
>>>To: Patrick Burns
>>>Cc: Martin Maechler; Warnes, Gregory R; Prof Brian Ripley; Kevin Wright;
>>>r-devel@stat.math.ethz.ch; Peter Dalgaard
>>>Subject: Re: tail(<matrix>) column numbers
>>>
>>>
>>>On Sun, 11 Jul 2004 12:06:44 +0100, Patrick Burns
>>><pburns@pburns.seanet.com> wrote :
>>>
>>>
>>>
>>>>I disagree with Martin's assertion that "tail" is not useful
>>>>for programming.  It has a few features relative to the
>>>>do-it-yourself approach:
>>>>
>>>Me too actually.  I think tail() has two uses, interactive and
>>>programmatic.  I think it would be better for interactive use if the row 
>>>names were added, and only slightly worse for programmatic use
>>>if an option were given to turn them off.
>>>
>>>In interactive use, I find it unhelpful to be told that something is
>>>in row 3 when it's really in row 47.
>>>
>>>Duncan Murdoch
>>>
>>>
>>>
>>>>*)  It compactly makes the intention clear.
>>>>*)  It automatically handles cases where there may be
>>>>either a vector or a matrix.
>>>>*)  It handles cases where there is less data than is being
>>>>sought (which may or may not be a good thing).
>>>>
>>>>"tail" of functions is what is definitely intended for interactive
>>>>use.
>>>>
>>>>Pat
>>>>
>>>>Martin Maechler wrote:
>>>>
>>>>
>>>>
>>>>>>>>>>"PatBurns" == Patrick Burns <pburns@pburns.seanet.com>
>>>>>>>>>>   on Tue, 27 Jan 2004 14:20:30 +0000 writes:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>[more than half a year ago]
>>>>>
>>>>>   PatBurns> Duncan Murdoch wrote:
>>>>>
>>>>>  .............
>>>>>
>>>>>   DM> One other one I'll look at:
>>>>>   DM>   DM> If a matrix doesn't have row names, I might add names
>>>>>   DM> like '[nn,]' to it, so I get results like
>>>>>
>>>>>     R> x <- matrix(1:100,ncol=2)
>>>>>     R> tail(x)
>>>>>  Rout>       [,1] [,2]
>>>>>  Rout> [45,]   45   95
>>>>>  Rout> [46,]   46   96
>>>>>  Rout> [47,]   47   97
>>>>>  Rout> [48,]   48   98
>>>>>  Rout> [49,]   49   99
>>>>>  Rout> [50,]   50  100
>>>>>  Rout>   DM> instead of the current
>>>>>
>>>>>     R> tail(x)
>>>>>  Rout>      [,1] [,2]
>>>>>  Rout> [1,]   45   95
>>>>>  Rout> [2,]   46   96
>>>>>  Rout> [3,]   47   97
>>>>>  Rout> [4,]   48   98
>>>>>  Rout> [5,]   49   99
>>>>>  Rout> [6,]   50  100
>>>>>
>>>>>   DM> I just want to be careful that this doesn't mess up
>>>>>   DM> something else.
>>>>>   DM>   DM> Duncan Murdoch
>>>>>
>>>>>
>>>>>   PatBurns> I think this could be being too "helpful".  Using
>>>>>   PatBurns> tail on a matrix may often be done in a program so
>>>>>   PatBurns> I think leaving things as they come is the best
>>>>>   PatBurns> policy.
>>>>>
>>>>>I tend to disagree, and would like to have us think about it
>>>>>again:
>>>>>
>>>>>1)  Duncan's proposal was to only add row names *when*
>>>there are none.
>>>
>>>
>>>>>2)  Pat is write that tail() for matrices maybe used not
>>>only interactively
>>>
>>>
>>>>>   and help(tail)'s "Value:" section encourages this to
>>>some extent.
>>>
>>>
>>>>>   However, how can adding column names to such a
>>>matrix-tail be harmful?
>>>
>>>
>>>>>   Well, only in the case where the tail is quite large, the
>>>>>   added dimnames add unneeded memory and other overhead when
>>>>>   dealing with that matrix.
>>>>>
>>>>>But I think, programmers/users caring about efficient code
>>>>>wouldn't use tail(<matrix>) in their function code, would they?
>>>>>
>>>>>In conclusion, I'd still argue for following Duncan's proposal,
>>>>>maybe adding a \note{.} to head.Rd stating that these functions
>>>>>were meant for interactive use, and for "programming", we'd
>>>>>rather recommend the direct  (n-k+1):n indexing.
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>
>>
>>
>>LEGAL NOTICE
>>Unless expressly stated otherwise, this message is confidential and may 
>>be privileged. It is intended for the addressee(s) only. Access to this 
>>E-mail by anyone else is unauthorized. If you are not an addressee, any 
>>disclosure or copying of the contents of this E-mail or any action taken 
>>(or not taken) in reliance on it is unauthorized and may be unlawful. If 
>>you are not an addressee, please inform the sender immediately.
>>
>>
>>
>
>______________________________________________
>R-devel@stat.math.ethz.ch mailing list
>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From edd at debian.org  Tue Jul 13 18:20:36 2004
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue Jul 13 18:20:41 2004
Subject: [Rd] Re: [R] Creating a minimal package
In-Reply-To: <j0q7f0hldlv3vhshgdggt3crpsi46ppt3f@4ax.com>
References: <ngc2f0h8up0ip07bshguimh85644ltme39@4ax.com>
	<loom.20040711T231128-574@post.gmane.org>
	<ebr3f098aho62muqapebiplkh1n3prf7et@4ax.com>
	<loom.20040712T055834-547@post.gmane.org>
	<40F23322.6010809@statistik.uni-dortmund.de>
	<loom.20040712T131806-594@post.gmane.org>
	<40F28EB3.7060902@statistik.uni-dortmund.de>
	<ta45f0ljhetd4ai746fs18dff7mim7o1i0@4ax.com>
	<40F3E850.8020202@stat.wisc.edu>
	<j0q7f0hldlv3vhshgdggt3crpsi46ppt3f@4ax.com>
Message-ID: <20040713162036.GA30197@sonny.eddelbuettel.com>

On Tue, Jul 13, 2004 at 10:02:16AM -0400, Duncan Murdoch wrote:
> Yes, I think that's right.  Currently the roadblocks are:
> 
>  - Perl 
> 
> I think we could write around this.

Is that worth it?  ActiveState Perl is easy to install. 
 
>  - Microsoft Help Compiler
> 
> Users who don't have it could do without CHM help files.

I built local packages for years, and only added this tool fairly recently
(mostly to suppress the error/warning during build).  As I don't use html
help, I obviously didn't care much.  

Non-issue in my biased book, but I acknowledge that this is probably a
minority view. That said, this is likely to be non-redistributable, so a
case could be made that as a user needs to download this anyway, how much
harder is it to download the free-as-in-beer Perl?
 
>  - Lots of Cygwin (and other) tools involved in making packages.
> 
> We could possibly rewrite the build process in R, but I don't think we
> should.  I think a better solution would be to distribute the toolset
> with R.  The full toolset doesn't add up to much (maybe 1.5 M).  A

Neat idea. I like that a lot. I can see how some users would have Perl and
Cygwin, and even MinGW, anyway, but not the BDR tools collection. This helps.

> problem is that multiple Cygwin versions don't coexist nicely, so we'd
> have to be careful during installation.
> 
>  - MinGW gcc
> 
> Users who want to compile code would still have to install the
> compiler.

And that's where it gets hairy. So we do all this to let lusers build R-only
packages, but not compiled packages?  Isn't that both a little inconsistent
and confusing?

But we could rewrite MinGW gcc in R too.

Dirk

PS Yes, I am of course joking w.r.t. MinGW

-- 
Those are my principles, and if you don't like them... well, I have others.
                                                -- Groucho Marx

From maechler at stat.math.ethz.ch  Tue Jul 13 18:22:05 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue Jul 13 18:22:11 2004
Subject: [Rd] text(x, y, labels) - recycling problems and RFC (PR#7084)
Message-ID: <20040713162205.8415D108BD@slim.kubism.ku.dk>

Not a bug necessarily, in text(), but at least an inconsistency,
and a need for more documentation:  Contrary to e.g., plot(),
text(x,y,labels) *does* recycle it's arguments to some extent --
and probably has always in S.

However it doesn't do all I think it should, i.e.,

 plot(1:7); text(1:2, 1+ 1:3, LETTERS[1:4])

does recycle 'x' to c(1:2, 1) {length 3} to match 'y'
but doesn't recycle to length 4 in order to match 'labels'.

While one can well accept this, I believe it should give a
warning since it silently 'drops' the "d".

However, I'm proposing to consider S(-plus) compatibility here.
In S-PLUS 6.1, the result of the above is
identical to
    plot(1:7); text(rep(1:2,length=4), rep(1+ 1:3, length=4), LETTERS[1:4])
i.e. (x,y) is recycled to length 4, the length of 'labels'.
					
Further note that in
    plot(1:7); text(1:2, 1+ 1:3, LETTERS[1:2], col=2:6)
the 'labels' *are* recycled to length 3, matching (x,y) -- but
not to length 5 of 'col' which is fine -- just not the other way around.

I'd propose that R should recycle all three (x,y,labels)
[but not more] to common length.

BTW, "grid" graphics do recycle as well, at least  
grid.text(labels, x, y) does --- and as I see it does also
recycle at least the 'rotation'.

Martin Maechler

From dmurdoch at pair.com  Tue Jul 13 19:47:12 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Tue Jul 13 19:47:14 2004
Subject: [Rd] Re: [R] Creating a minimal package
In-Reply-To: <20040713162036.GA30197@sonny.eddelbuettel.com>
References: <ngc2f0h8up0ip07bshguimh85644ltme39@4ax.com>
	<loom.20040711T231128-574@post.gmane.org>
	<ebr3f098aho62muqapebiplkh1n3prf7et@4ax.com>
	<loom.20040712T055834-547@post.gmane.org>
	<40F23322.6010809@statistik.uni-dortmund.de>
	<loom.20040712T131806-594@post.gmane.org>
	<40F28EB3.7060902@statistik.uni-dortmund.de>
	<ta45f0ljhetd4ai746fs18dff7mim7o1i0@4ax.com>
	<40F3E850.8020202@stat.wisc.edu>
	<j0q7f0hldlv3vhshgdggt3crpsi46ppt3f@4ax.com>
	<20040713162036.GA30197@sonny.eddelbuettel.com>
Message-ID: <c578f0p6jrurk9qcai4nvhfgjughf7v8gr@4ax.com>

On Tue, 13 Jul 2004 11:20:36 -0500, Dirk Eddelbuettel <edd@debian.org>
wrote :

>On Tue, Jul 13, 2004 at 10:02:16AM -0400, Duncan Murdoch wrote:
>> Yes, I think that's right.  Currently the roadblocks are:
>> 
>>  - Perl 
>> 
>> I think we could write around this.
>
>Is that worth it?  ActiveState Perl is easy to install. 

I think it's worth it if someone else does the work, but so far I
haven't thought it's worthwhile enough to do the work myself.

The reason is that it would simplify support and maintenance if the R
installer could install a complete R system.  We can't do that, but
the fewer "and then you need to..." instructions we have, the better.

>>  - Microsoft Help Compiler
>> 
>> Users who don't have it could do without CHM help files.
>
>I built local packages for years, and only added this tool fairly recently
>(mostly to suppress the error/warning during build).  As I don't use html
>help, I obviously didn't care much.  
>
>Non-issue in my biased book, but I acknowledge that this is probably a
>minority view. That said, this is likely to be non-redistributable, so a
>case could be made that as a user needs to download this anyway, how much
>harder is it to download the free-as-in-beer Perl?

The difference is that package installation works without it, it just
does a more complete job if you have it.  Currently installation
doesn't work at all without Perl.
 
>>  - Lots of Cygwin (and other) tools involved in making packages.
>> 
>> We could possibly rewrite the build process in R, but I don't think we
>> should.  I think a better solution would be to distribute the toolset
>> with R.  The full toolset doesn't add up to much (maybe 1.5 M).  A
>
>Neat idea. I like that a lot. I can see how some users would have Perl and
>Cygwin, and even MinGW, anyway, but not the BDR tools collection. This helps.
>
>> problem is that multiple Cygwin versions don't coexist nicely, so we'd
>> have to be careful during installation.
>> 
>>  - MinGW gcc
>> 
>> Users who want to compile code would still have to install the
>> compiler.
>
>And that's where it gets hairy. So we do all this to let lusers build R-only
>packages, but not compiled packages?  Isn't that both a little inconsistent
>and confusing?

Lots and lots of users have compilers other than MinGW.  This would
allow them to install their own packages built with those compilers.

>But we could rewrite MinGW gcc in R too.

I just tried this:

> gcc <- function(file) { # compile it 
+ }
> package.skeleton('Rgcc', 'gcc')
Creating directories ...
Creating DESCRIPTION ...
Creating READMEs ...
Saving functions and data ...
Making help files ...
Done.
Further steps are described in ./Rgcc/README 

When I have time I'll work through the README and finish it off.

Duncan Murdoch

From eManager at hksfc.org.hk  Wed Jul 14 01:50:33 2004
From: eManager at hksfc.org.hk (eManager@hksfc.org.hk)
Date: Wed Jul 14 01:50:45 2004
Subject: [Rd] Spam mail warning notification! (Attachment Removal)
Message-ID: <200407132350.i6DNoemi009151@proxy01.hksfc.org.hk>

**************** eManager Notification *****************

The following mail was blocked since it contains sensitive content.

Source mailbox: <r-devel@r-project.org>
Destination mailbox(es): <<helentong@mail.hksfc.org.hk>>
Policy: Attachment Removal
Attachment file name: message.scr - audio/x-wav
Action: Replaced with text

The attachment file in the email has been removed as a precautionary measure against suspected computer virus infection.

******************* End of message *********************
-------------- next part --------------
Received: from mr02.finnet-hk.net ([203.198.6.230])
	by sfcmail.hksfc.org.hk (8.12.9-20031101/8.12.9) with ESMTP id i6DNoXnT012523
	for <helentong@hksfc.org.hk>; Wed, 14 Jul 2004 07:50:38 +0800 (HKT)
Received: from sfc.finnet-hk.net (222-152-6-110.jetstream.xtra.co.nz [222.152.6.110])
	by mr02.finnet-hk.net (8.11.6/8.11.6) with ESMTP id g0V1Zn005744
	for <helentong@sfc.finnet-hk.net>; Thu, 31 Jan 2002 09:35:50 +0800
Message-Id: <200201310135.g0V1Zn005744@mr02.finnet-hk.net>
From: r-devel@r-project.org
To: helentong@hksfc.org.hk
Subject: Mail Delivery (failure helentong@sfc.finnet-hk.net)
Date: Wed, 14 Jul 2004 11:50:24 +1200
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----=_NextPart_000_001B_01C0CA80.6B015D10"
X-Priority: 3
X-MSMail-Priority: Normal
From clock at twibright.com  Wed Jul 14 08:19:14 2004
From: clock at twibright.com (clock@twibright.com)
Date: Wed Jul 14 08:19:17 2004
Subject: [Rd] umask problem (PR#7086)
Message-ID: <20040714061914.7B116108B9@slim.kubism.ku.dk>

Hello

R-1.9.0
when the user that compiles R has umask 027 and root has umask 022, then
R is installed incorrectly:
clock@beton:~$ R
/usr/bin/R: line 156: /usr/lib/R/bin/R.bin: Permission denied
/usr/bin/R: line 156: exec: /usr/lib/R/bin/R.bin: cannot execute: Success
clock@beton:~$ ls -la /usr/lib/R/bin/R.bin
-rwxr-x---    1 root     root      2032542 Jul 13 20:04 /usr/lib/R/bin/R.bin
       ^^^

Cl<

From dmurdoch at pair.com  Wed Jul 14 16:25:16 2004
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Wed Jul 14 16:25:21 2004
Subject: [Rd] Re: [R] constrOptim and function with additional parameters?
	(PR#7088)
Message-ID: <20040714142516.B14D1108C7@slim.kubism.ku.dk>

I've moved this from r-help to r-bugs.  If you reply, please be
careful that replies go to the right place:  r-bugs if your comment is
specifically about the bug (and it contains the PR# in the subject
that will be added when this is cc'd to r-devel), r-devel if general
discussion, not both.

On Wed, 14 Jul 2004 10:01:45 -0400, "Roger D. Peng" <rpeng@jhsph.edu>
wrote :

>Actually, I think this is a bug.  Take a look at this part of constrOptim:

This is the problem all right, but it's a little tricky to fix.  The
problem is that "..." is documented as being additional parameters to
pass through to optim().  You don't want to pass all of those to f(),
only the ones that don't match optim()'s arg list.  (And that has to
be done carefully, because of partial argument matching.)

I don't know of other cases where we edit the "..." list before
passing it onwards.  Are there any?

>
> > constrOptim
>function (theta, f, grad, ui, ci, mu = 1e-04, control = list(),
>     method = if (is.null(grad)) "Nelder-Mead" else "BFGS", 
>outer.iterations = 10
>0,
>     outer.eps = 1e-05, ...)
>{
>     if (!is.null(control$fnscale) && control$fnscale < 0)
>         mu <- -mu
>     [...]
>     obj <- f(theta)
>     ^^^^^^^^^^^^^^^
>     r <- R(theta, theta)
>     for (i in 1:outer.iterations) {
>         obj.old <- obj
>         r.old <- r
>     [...]
>}
>
>So the object function `f' is called on the starting value `theta' but 
>the `...' is not passed through.
>
>-roger
>
>Duncan Murdoch wrote:
>> On Wed, 14 Jul 2004 14:59:01 +0200 (MEST), "Marlene Mueller"
>> <Marlene.Mueller@gmx.de> wrote :
>> 
>> 
>>>How can I use a function with some additional input parameters
>>>in constrOptim? For example, something like
>>>
>>>fr <- function(x,a) {   ## Rosenbrock Banana function
>>> x1 <- x[1]
>>> x2 <- x[2]
>>> a * (x2 - x1 * x1)^2 + (1 - x1)^2
>>>}
>>>
>>>where the optimum is to be found w.r.t. x. Calling
>>>optim(c(-1.2,1), fr, NULL, a=100) works as expected, but I fail 
>>>to provide the a=100 in the constrained case:
>>>
>>>
>>>> constrOptim(c(-1.2,0.9), fr, NULL, ui=rbind(c(-1,0),c(0,-1)),
>>>
>>>ci=c(-1,-1),a=100)
>>>Error in f(theta) : Argument "a" is missing, with no default
>>>
>>>Is this a bug or is there a different solution that I miss here?
>> 
>> 
>> I can't spot why your use of constrOptim isn't working, but you should
>> be able to workaround it by doing something  like this:
>> 
>> applyDefaults <- function(fn, ...) {
>>   function(x) fn(x, ...)
>> }
>> 
>> constrOptim(c(-1.2,0.9), applyDefaults(fr, a=100), NULL,
>> ui=rbind(c(-1,0),c(0,-1)),ci=c(-1,-1))
>> 
>> The applyDefaults function creates a new function which evaluates the
>> old one with some of the parameters set to fixed values.
>> 
>> Duncan Murdoch
>> 
>> ______________________________________________
>> R-help@stat.math.ethz.ch mailing list
>> https://www.stat.math.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
>>

From rpeng at jhsph.edu  Wed Jul 14 16:38:34 2004
From: rpeng at jhsph.edu (rpeng@jhsph.edu)
Date: Wed Jul 14 16:38:41 2004
Subject: [Rd] Re: [R] constrOptim and function with additional parameters?
	(PR#7089)
Message-ID: <20040714143834.5893F108BC@slim.kubism.ku.dk>

Okay, looking at the docs, then it's not a bug, since the "..." 
argument is not actually documented as "other arguments passed to f or 
grad".  However, that *is* how it's document in `optim', so one can 
see how this might cause some confusion.

Now, it's not clear to me which other arguments need to be passed to 
`optim' except perhaps `hessian'.  Am I missing something?

-roger

Duncan Murdoch wrote:
> I've moved this from r-help to r-bugs.  If you reply, please be
> careful that replies go to the right place:  r-bugs if your comment is
> specifically about the bug (and it contains the PR# in the subject
> that will be added when this is cc'd to r-devel), r-devel if general
> discussion, not both.
> 
> On Wed, 14 Jul 2004 10:01:45 -0400, "Roger D. Peng" <rpeng@jhsph.edu>
> wrote :
> 
> 
>>Actually, I think this is a bug.  Take a look at this part of constrOptim:
> 
> 
> This is the problem all right, but it's a little tricky to fix.  The
> problem is that "..." is documented as being additional parameters to
> pass through to optim().  You don't want to pass all of those to f(),
> only the ones that don't match optim()'s arg list.  (And that has to
> be done carefully, because of partial argument matching.)
> 
> I don't know of other cases where we edit the "..." list before
> passing it onwards.  Are there any?
> 
> 
>>>constrOptim
>>
>>function (theta, f, grad, ui, ci, mu = 1e-04, control = list(),
>>    method = if (is.null(grad)) "Nelder-Mead" else "BFGS", 
>>outer.iterations = 10
>>0,
>>    outer.eps = 1e-05, ...)
>>{
>>    if (!is.null(control$fnscale) && control$fnscale < 0)
>>        mu <- -mu
>>    [...]
>>    obj <- f(theta)
>>    ^^^^^^^^^^^^^^^
>>    r <- R(theta, theta)
>>    for (i in 1:outer.iterations) {
>>        obj.old <- obj
>>        r.old <- r
>>    [...]
>>}
>>
>>So the object function `f' is called on the starting value `theta' but 
>>the `...' is not passed through.
>>
>>-roger
>>
>>Duncan Murdoch wrote:
>>
>>>On Wed, 14 Jul 2004 14:59:01 +0200 (MEST), "Marlene Mueller"
>>><Marlene.Mueller@gmx.de> wrote :
>>>
>>>
>>>
>>>>How can I use a function with some additional input parameters
>>>>in constrOptim? For example, something like
>>>>
>>>>fr <- function(x,a) {   ## Rosenbrock Banana function
>>>>x1 <- x[1]
>>>>x2 <- x[2]
>>>>a * (x2 - x1 * x1)^2 + (1 - x1)^2
>>>>}
>>>>
>>>>where the optimum is to be found w.r.t. x. Calling
>>>>optim(c(-1.2,1), fr, NULL, a=100) works as expected, but I fail 
>>>>to provide the a=100 in the constrained case:
>>>>
>>>>
>>>>
>>>>>constrOptim(c(-1.2,0.9), fr, NULL, ui=rbind(c(-1,0),c(0,-1)),
>>>>
>>>>ci=c(-1,-1),a=100)
>>>>Error in f(theta) : Argument "a" is missing, with no default
>>>>
>>>>Is this a bug or is there a different solution that I miss here?
>>>
>>>
>>>I can't spot why your use of constrOptim isn't working, but you should
>>>be able to workaround it by doing something  like this:
>>>
>>>applyDefaults <- function(fn, ...) {
>>>  function(x) fn(x, ...)
>>>}
>>>
>>>constrOptim(c(-1.2,0.9), applyDefaults(fr, a=100), NULL,
>>>ui=rbind(c(-1,0),c(0,-1)),ci=c(-1,-1))
>>>
>>>The applyDefaults function creates a new function which evaluates the
>>>old one with some of the parameters set to fixed values.
>>>
>>>Duncan Murdoch
>>>
>>>______________________________________________
>>>R-help@stat.math.ethz.ch mailing list
>>>https://www.stat.math.ethz.ch/mailman/listinfo/r-help
>>>PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
>>>
> 
> 
>

From tazus_fr at yahoo.fr  Wed Jul 14 17:46:14 2004
From: tazus_fr at yahoo.fr (tazus_fr@yahoo.fr)
Date: Wed Jul 14 17:46:20 2004
Subject: [Rd] Yahoo! - Message d'absence
Message-ID: <200407141546.i6EFkFFu018746@hypatia.math.ethz.ch>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 1241 bytes
Desc: not available
Url : https://www.stat.math.ethz.ch/pipermail/r-devel/attachments/20040714/97a2a33c/attachment.pl
From rmh at temple.edu  Wed Jul 14 21:33:07 2004
From: rmh at temple.edu (rmh@temple.edu)
Date: Wed Jul 14 21:33:11 2004
Subject: [Rd] tracing something in a namespace (PR#7091)
Message-ID: <20040714193307.15F58108C7@slim.kubism.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################


> x <- rnorm(10)
> y <- 1:10
> xyplot(y ~ x)
> trace(lattice:::print.trellis, exit=recover)
[1] "print.trellis"
Warning message: 
Assigning over the binding of symbol "print.trellis" in environment/package "lattice" 
in: .assignOverBinding(what, newFun, whereF) 
> xyplot(y ~ x)
> untrace(lattice:::print.trellis)
Error in untrace(lattice:::print.trellis) : 
	Argument what should be the name of a function
> 


Something isn't right.  I see three possibilities.

a. tracing something in a namespace is prohibited and I didn't get an error,
instead I got a warning.

b. tracing in a namespace is acceptable, but the trace didn't work.

c. untrace doesn't recognize lattice:::print.trellis as the name of a function,
even though trace did.


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 9.1
 year = 2004
 month = 06
 day = 21
 language = R

Windows XP Home Edition (build 2600) Service Pack 1.0

Search Path:
 .GlobalEnv, file:c:/HOME/rmh/hh/splus.library/HH/.RData, package:methods, package:stats, 
package:utils, package:multcomp, package:mvtnorm, package:abind, package:graphics, 
package:lattice, package:grid, Autoloads, package:base

From stoffer at pitt.edu  Thu Jul 15 02:13:05 2004
From: stoffer at pitt.edu (stoffer@pitt.edu)
Date: Thu Jul 15 02:13:08 2004
Subject: [Rd] arima (PR#7092)
Message-ID: <20040715001305.3C7FA108BD@slim.kubism.ku.dk>

Full_Name: david stoffer
Version: 1.9.0
OS: win xp pro
Submission from: (NULL) (67.165.78.88)


arima() doesn't fit the model correctly if there is differencing and a constant
is still needed.  also, the description saying that it's not necessary to ever
fit a constant is incorrect.

if you fit a pure AR using arima(), it tells you it's giving you the intercept
term, but it's actually reporting the estimate of the mean.

From michael.cole at unisg.ch  Thu Jul 15 09:46:44 2004
From: michael.cole at unisg.ch (michael.cole@unisg.ch)
Date: Thu Jul 15 09:46:49 2004
Subject: [Rd] lattice (PR#7093)
Message-ID: <20040715074644.BA190108C6@slim.kubism.ku.dk>

Full_Name: michael cole
Version: 1.9.1
OS: Windows
Submission from: (NULL) (80.219.153.13)


When trying to install lattice graphics... I receieve the following:

trying URL `http://cran.r-project.org/bin/windows/contrib/1.9/lattice_0.9-16.zip'
Content type `application/zip' length 496618 bytes
opened URL
downloaded 484Kb

package 'lattice' successfully unpacked and MD5 sums checked
Error in unpackPkg(foundpkgs[okp, 2], pkgnames[okp], lib, installWithVers) : 
        Can not remove prior installation of package

From ligges at statistik.uni-dortmund.de  Thu Jul 15 09:53:39 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu Jul 15 09:53:45 2004
Subject: [Rd] lattice (PR#7093)
Message-ID: <20040715075339.5218B108C4@slim.kubism.ku.dk>

michael.cole@unisg.ch wrote:

> Full_Name: michael cole
> Version: 1.9.1
> OS: Windows
> Submission from: (NULL) (80.219.153.13)
> 
> 
> When trying to install lattice graphics... I receieve the following:
> 
> trying URL `http://cran.r-project.org/bin/windows/contrib/1.9/lattice_0.9-16.zip'
> Content type `application/zip' length 496618 bytes
> opened URL
> downloaded 484Kb
> 
> package 'lattice' successfully unpacked and MD5 sums checked
> Error in unpackPkg(foundpkgs[okp, 2], pkgnames[okp], lib, installWithVers) : 
>         Can not remove prior installation of package
> 

That's not bug in R! Please send questions to r-help rather than r-bugs.


Either you have no write access to the library install.packages() tries 
to install the package in, or you have loaded lattice before and Windows 
has locked some files (probably the any dll or help file).

If the former, try to install into a different library you have got 
write access to.
If the latter, restart R without loading the library and try again.

Uwe Ligges

From Kurt.Hornik at wu-wien.ac.at  Wed Jul 14 21:29:32 2004
From: Kurt.Hornik at wu-wien.ac.at (Kurt Hornik)
Date: Thu Jul 15 10:07:36 2004
Subject: [Rd] umask problem (PR#7086)
In-Reply-To: <20040714061914.7B116108B9@slim.kubism.ku.dk>
References: <20040714061914.7B116108B9@slim.kubism.ku.dk>
Message-ID: <16629.35228.827261.216203@mithrandir.hornik.net>

>>>>> clock  writes:

> Hello
> R-1.9.0
> when the user that compiles R has umask 027 and root has umask 022, then
> R is installed incorrectly:
> clock@beton:~$ R
> /usr/bin/R: line 156: /usr/lib/R/bin/R.bin: Permission denied
> /usr/bin/R: line 156: exec: /usr/lib/R/bin/R.bin: cannot execute: Success
> clock@beton:~$ ls -la /usr/lib/R/bin/R.bin
> -rwxr-x---    1 root     root      2032542 Jul 13 20:04 /usr/lib/R/bin/R.bin
>        ^^^

Thanks.

This is due to using copy-if-change to avoid unnecessary copying for (at
least) the main executable and the shared libraries under Unix.

Now, copy-if-change of course uses "cp" for doing its work, whereas in
the GNU build environment we would typically use $INSTALL and its
variants for doing so (and the latter would always set the mode to 755
or 644 [for data]).

The simplest fix to me seems to enhance copy-if-change to

* Take an argument, say '-m', for specifying the mode, with 755 as the
  default;

* Chmod $mode after the cp.

I guess there is a similar issue with things "installed" by
move-if-change.

-k

From ab at transcience.freeserve.co.uk  Thu Jul 15 18:56:57 2004
From: ab at transcience.freeserve.co.uk (ab@transcience.freeserve.co.uk)
Date: Thu Jul 15 18:57:02 2004
Subject: [Rd] R#7036 (PR#7095)
Message-ID: <20040715165657.36765108C6@slim.kubism.ku.dk>

Full_Name: A.Boodoo
Version: 1.9.1
OS: MacOS X 10.2.8
Submission from: (NULL) (217.35.120.113)


Same problem identified as in report 7036 - R icon appears briefly in dock when
double clocked, then disappears after about 0.5s. I will try to open the package
and manually install framework and see if this works...

From simon.urbanek at math.uni-augsburg.de  Thu Jul 15 20:11:12 2004
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Thu Jul 15 20:11:15 2004
Subject: [Rd] R#7036 (PR#7095)
In-Reply-To: <20040715165657.36765108C6@slim.kubism.ku.dk>
References: <20040715165657.36765108C6@slim.kubism.ku.dk>
Message-ID: <5B10236C-D68A-11D8-B99E-000A959F327E@math.uni-augsburg.de>


On Jul 15, 2004, at 6:56 PM, ab@transcience.freeserve.co.uk wrote:

> Full_Name: A.Boodoo
> Version: 1.9.1
> OS: MacOS X 10.2.8
> Submission from: (NULL) (217.35.120.113)
>
>
> Same problem identified as in report 7036

please don't open new bug reports, especially when you say that it's 
the same as an existing bug.

> - R icon appears briefly in dock when
> double clocked, then disappears after about 0.5s. I will try to open 
> the package
> and manually install framework and see if this works...

An information from the Console would be much more helpful - and there 
are plenty of posts on the list on the possible causes once you 
actually look at the log.

Simon

From pliu3 at unity.ncsu.edu  Thu Jul 15 22:13:51 2004
From: pliu3 at unity.ncsu.edu (Peng Liu)
Date: Thu Jul 15 22:13:57 2004
Subject: [Rd] getWindowsHandle()
Message-ID: <Pine.GSO.4.58.0407151559590.14948@uni01du.unity.ncsu.edu>

I notice that this function is available after Dr. Murdoch's post at
R-GUI. I am further wondering how to use "Process" and "ProcessID" two
choices. Suppose I created more than one 'Document' windows within MDI. I
need to find their corresponding process ID or handle, in order to
communicate with them correctly.

Regards,
Peng

From dmurdoch at pair.com  Thu Jul 15 22:39:18 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Thu Jul 15 22:39:19 2004
Subject: [Rd] getWindowsHandle()
In-Reply-To: <Pine.GSO.4.58.0407151559590.14948@uni01du.unity.ncsu.edu>
References: <Pine.GSO.4.58.0407151559590.14948@uni01du.unity.ncsu.edu>
Message-ID: <g5qdf0tqb7dvvrdorqqlbg6ool5309p28c@4ax.com>

On Thu, 15 Jul 2004 16:13:51 -0400 (EDT), Peng Liu
<pliu3@unity.ncsu.edu> wrote :

>I notice that this function is available after Dr. Murdoch's post at
>R-GUI. I am further wondering how to use "Process" and "ProcessID" two
>choices. Suppose I created more than one 'Document' windows within MDI. I
>need to find their corresponding process ID or handle, in order to
>communicate with them correctly.

You'll need to read Windows documentation.  

The difference between Process and ProcessID is that one is the result
of a call to the GetCurrentProcess function, and the other is the
result of a call to the GetCurrentProcessID function. 

Currently R has no way to get the list of MDI document windows.  I
think the function you want is EnumChildWindows, but you might need to
use EnumWindows.  I can't remember whether MDI documents are child
windows or top level windows.

If you do get all of this worked out nicely, contributions of patches
to R would be welcomed.  The file where this function lives is
src/gnuwin32/extra.c.

Duncan Murdoch

From jmc at research.bell-labs.com  Thu Jul 15 23:43:21 2004
From: jmc at research.bell-labs.com (John Chambers)
Date: Thu Jul 15 23:43:41 2004
Subject: [Rd] tracing something in a namespace (PR#7091)
References: <20040714193307.15F58108C7@slim.kubism.ku.dk>
Message-ID: <40F6FA79.596C87E7@research.bell-labs.com>

rmh@temple.edu wrote:
> 
> # Your mailer is set to "none" (default on Windows),
> # hence we cannot send the bug report directly from R.
> # Please copy the bug report (after finishing it) to
> # your favorite email program and send it to
> #
> #       r-bugs@r-project.org
> #
> ######################################################
> 
> > x <- rnorm(10)
> > y <- 1:10
> > xyplot(y ~ x)
> > trace(lattice:::print.trellis, exit=recover)
> [1] "print.trellis"
> Warning message:
> Assigning over the binding of symbol "print.trellis" in environment/package "lattice"
> in: .assignOverBinding(what, newFun, whereF)
> > xyplot(y ~ x)
> > untrace(lattice:::print.trellis)
> Error in untrace(lattice:::print.trellis) :
>         Argument what should be the name of a function
> >
> 
> Something isn't right.  I see three possibilities.
> 
> a. tracing something in a namespace is prohibited and I didn't get an error,
> instead I got a warning.

No, it's not prohibited, though it's not encouraged.

Not to be counted on as being guaranteed to exist forever.

Use the alternative under b.

> 
> b. tracing in a namespace is acceptable, but the trace didn't work.

I believe your problem has to do with S3 methods in namespaces. 
Effectively, the first dispatch of an S3 method in a namespace caches
the method found (at least that is my impression).

If I take your example and move the trace() call before the first call
to xyplot() (and therefore before the first dispatch of print.trellis)
it works for me.

But, then you cannot redefine the method, so untrace() wouldn't work in
any case.

DON'T USE trace() ON S3 METHODS IN NAMESPACES.

Instead, a mechanism that is slightly more cumbersome but perfectly
legal (and no warnings) is to copy the S3 method to the global
environment and trace it there.

As long as the method is being dispatched, not called directly inside
the namespace, then the global copy will be used.

For your example:

R> print.trellis <- lattice:::print.trellis
R> trace(print.trellis, exit = recover)
R> x <- rnorm(10)
R> y <- 1:10
R> xyplot(y ~ x)
Tracing print.trellis(yy$value) on exit 

Enter a frame number, or 0 to exit   
1:source("~/testR/latticeTrace.R", echo = T) 
2:print(yy$value) 
3:print.trellis(yy$value) 
Selection: 0
R> untrace(print.trellis)
R> xyplot(y ~ x)
R> 

> 
> c. untrace doesn't recognize lattice:::print.trellis as the name of a function,
> even though trace did.

True, more or less.  We'll likely fix that for the next release, but the
recommended technique is as above for S3 methods.


> 
> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status =
>  major = 1
>  minor = 9.1
>  year = 2004
>  month = 06
>  day = 21
>  language = R
> 
> Windows XP Home Edition (build 2600) Service Pack 1.0
> 
> Search Path:
>  .GlobalEnv, file:c:/HOME/rmh/hh/splus.library/HH/.RData, package:methods, package:stats,
> package:utils, package:multcomp, package:mvtnorm, package:abind, package:graphics,
> package:lattice, package:grid, Autoloads, package:base
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From dmurdoch at pair.com  Fri Jul 16 03:50:25 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Fri Jul 16 03:50:29 2004
Subject: [Rd] Re: [R] adding option in the Windows installer for --internet2
In-Reply-To: <3A822319EB35174CA3714066D590DCD504AF8060@usrymx25.merck.com>
References: <3A822319EB35174CA3714066D590DCD504AF8060@usrymx25.merck.com>
Message-ID: <sbbef013d36dhbsm2joopffqh26ou5kkla@4ax.com>

(Moved from r-help)

On Thu, 15 Jul 2004 19:41:54 -0400, "Liaw, Andy" <andy_liaw@merck.com>
wrote:

>The XEmacs and cygwin netinstaller has three install options: "Use IE5
>settings", "Direct connection" (or something like that) and "Install from
>local disk".  Option #2 never work for me, but #1 does.  

Yes, I've seen that, but I never knew what it meant, and so it didn't
give me confidence in the installation.  (Did I make the right choice?
How would I know if I didn't?)

>I suspect the R
>installer can do something similar:  offer the two options (with and
>without), and somehow test if the connection (to CRAN) works.  If not,
>prompt the user to try the other option.

We don't have a netinstaller, so a connection to CRAN is not
necessary.  I would guess that a large number of people installing R
don't have a net connection at the time, because a lot of students get
it on a CD.

> My take is that this option should
>be (semi?) permanent:  If it's needed, it's needed all the time for that
>installation.  

It seems to me that if internet2 works at all, it should always be
used, whether necessary or not.  (It might be that your machine is
behind a firewall sometimes, but not always:  but if you've got the
required library installed, you probably won't lose it.)

Maybe internet2 should be the default now.  I'd guess nowadays most
Windows systems would support it.

Does anyone know if there are any disadvantages to using the WinINet
functions via internet2.dll instead of the WinSock functions via
internet.dll?

Duncan Murdoch

From Mark.Bravington at csiro.au  Fri Jul 16 04:37:07 2004
From: Mark.Bravington at csiro.au (Mark.Bravington@csiro.au)
Date: Fri Jul 16 04:37:28 2004
Subject: [Rd] tracing something in a namespace (PR#7091)
Message-ID: <C4178DC99E08604EA5E2BDB989F093800240A2D3@extas2-hba.tas.csiro.au>

Richard: you might also try 'mtrace' in the 'debug' package, which works fine in the example you give, without any need to globalize 'print.trellis' or similar. You can't specify methods by package e.g. lattice:::print.trellis, but then again you don't need to:

library( lattice)
...
mtrace( print.trellis) # traces all copies, even ones that 'find' doesn't find
xyplot( y ~ x) # up comes the debug window
...
mtrace( print.trellis, F) # removes all traces
xyplot( y~x) # no debug window

It took me quite a while to figure out how to get this to work. Briefly, S3 methods in namespaces seem to exist in either two or three places, depending on whether they are explicitly exported. It is probably unhealthy for there to be any differences between the versions. 'mtrace' finds all copies and changes them all; see 'fun.locator' in 'mvbutils' for more details.

Hope this helps

Mark

BTW I devoutly hope that it never becomes impossible to change things inside namespaces or the "base" environment(e.g. via bindings that cannot be unlocked). It's probably good to make it hard for users to screw up (as is the case now), but not good to prevent interested and determined parties from changing code if they really want to. Losing the ability to trace in namespaces, or to try fixing code in namespaces, would be bad-- there are always going to be *some* bugs even in bits of "core" code. A huge part of the power of R lies in the ability to change bits of it, and locking more away than is absolutely necessary seems to me undesirable. Perhaps I'm over-interpreting John Chambers "don't count on it" comment here-- anyway, I hope so!

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au 

#-----Original Message-----
#From: r-devel-bounces@stat.math.ethz.ch
#[mailto:r-devel-bounces@stat.math.ethz.ch]On Behalf Of John Chambers
#Sent: Friday, 16 July 2004 7:43 AM
#To: rmh@temple.edu
#Cc: R-bugs@biostat.ku.dk; r-devel@stat.math.ethz.ch
#Subject: Re: [Rd] tracing something in a namespace (PR#7091)
#
#
#rmh@temple.edu wrote:
#> 
#> # Your mailer is set to "none" (default on Windows),
#> # hence we cannot send the bug report directly from R.
#> # Please copy the bug report (after finishing it) to
#> # your favorite email program and send it to
#> #
#> #       r-bugs@r-project.org
#> #
#> ######################################################
#> 
#> > x <- rnorm(10)
#> > y <- 1:10
#> > xyplot(y ~ x)
#> > trace(lattice:::print.trellis, exit=recover)
#> [1] "print.trellis"
#> Warning message:
#> Assigning over the binding of symbol "print.trellis" in 
#environment/package "lattice"
#> in: .assignOverBinding(what, newFun, whereF)
#> > xyplot(y ~ x)
#> > untrace(lattice:::print.trellis)
#> Error in untrace(lattice:::print.trellis) :
#>         Argument what should be the name of a function
#> >
#> 
#> Something isn't right.  I see three possibilities.
#> 
#> a. tracing something in a namespace is prohibited and I 
#didn't get an error,
#> instead I got a warning.
#
#No, it's not prohibited, though it's not encouraged.
#
#Not to be counted on as being guaranteed to exist forever.
#
#Use the alternative under b.
#
#> 
#> b. tracing in a namespace is acceptable, but the trace didn't work.
#
#I believe your problem has to do with S3 methods in namespaces. 
#Effectively, the first dispatch of an S3 method in a namespace caches
#the method found (at least that is my impression).
#
#If I take your example and move the trace() call before the first call
#to xyplot() (and therefore before the first dispatch of print.trellis)
#it works for me.
#
#But, then you cannot redefine the method, so untrace() wouldn't work in
#any case.
#
#DON'T USE trace() ON S3 METHODS IN NAMESPACES.
#
#Instead, a mechanism that is slightly more cumbersome but perfectly
#legal (and no warnings) is to copy the S3 method to the global
#environment and trace it there.
#
#As long as the method is being dispatched, not called directly inside
#the namespace, then the global copy will be used.
#
#For your example:
#
#R> print.trellis <- lattice:::print.trellis
#R> trace(print.trellis, exit = recover)
#R> x <- rnorm(10)
#R> y <- 1:10
#R> xyplot(y ~ x)
#Tracing print.trellis(yy$value) on exit 
#
#Enter a frame number, or 0 to exit   
#1:source("~/testR/latticeTrace.R", echo = T) 
#2:print(yy$value) 
#3:print.trellis(yy$value) 
#Selection: 0
#R> untrace(print.trellis)
#R> xyplot(y ~ x)
#R> 
#
#> 
#> c. untrace doesn't recognize lattice:::print.trellis as the 
#name of a function,
#> even though trace did.
#
#True, more or less.  We'll likely fix that for the next 
#release, but the
#recommended technique is as above for S3 methods.
#
#
#> 
#> --please do not edit the information below--
#> 
#> Version:
#>  platform = i386-pc-mingw32
#>  arch = i386
#>  os = mingw32
#>  system = i386, mingw32
#>  status =
#>  major = 1
#>  minor = 9.1
#>  year = 2004
#>  month = 06
#>  day = 21
#>  language = R
#> 
#> Windows XP Home Edition (build 2600) Service Pack 1.0
#> 
#> Search Path:
#>  .GlobalEnv, file:c:/HOME/rmh/hh/splus.library/HH/.RData, 
#package:methods, package:stats,
#> package:utils, package:multcomp, package:mvtnorm, 
#package:abind, package:graphics,
#> package:lattice, package:grid, Autoloads, package:base
#> 
#> ______________________________________________
#> R-devel@stat.math.ethz.ch mailing list
#> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
#
#-- 
#John M. Chambers                  jmc@bell-labs.com
#Bell Labs, Lucent Technologies    office: (908)582-2681
#700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
#Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
#
#______________________________________________
#R-devel@stat.math.ethz.ch mailing list
#https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
#

From Richard.Mott at well.ox.ac.uk  Fri Jul 16 16:30:05 2004
From: Richard.Mott at well.ox.ac.uk (Richard.Mott@well.ox.ac.uk)
Date: Fri Jul 16 16:30:07 2004
Subject: [Rd] inconsistency in pchisq (PR#7099)
Message-ID: <20040716143005.7418A108B9@slim.kubism.ku.dk>

Full_Name: Richard Mott
Version: 1.9.0
OS: Windows XP
Submission from: (NULL) (81.178.233.208)


Shouldn't these give the same answer?

> pchisq(67.60644,df=1,lower.tail=F,ncp=0)
[1] 3.219647e-15
> pchisq(67.60644,df=1,lower.tail=F)
[1] 1.996145e-16
>

From joehl at gmx.de  Fri Jul 16 17:01:46 2004
From: joehl at gmx.de (joehl@gmx.de)
Date: Fri Jul 16 17:01:51 2004
Subject: [Rd] list.files fails with all.files = TRUE and recursive = TRUE
	(PR#7100)
Message-ID: <20040716150146.CAB10108BB@slim.kubism.ku.dk>


> list.files("c:/tmp", all.files = TRUE, recursive = TRUE)
Error in list.files("c:/tmp", all.files = TRUE, recursive = TRUE) : 
        directory/folder path name too long

> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    9.1            
year     2004           
month    06             
day      21             
language R 


Best


Jens Oehlschl?gel

From joehl at gmx.de  Fri Jul 16 17:09:38 2004
From: joehl at gmx.de (joehl@gmx.de)
Date: Fri Jul 16 17:09:42 2004
Subject: [Rd] tkStartGUI fails under RW1091 (PR#7101)
Message-ID: <20040716150938.855B1108BC@slim.kubism.ku.dk>

> library(tcltk)
> tkStartGUI()
Error in .C("RTcl_ActivateConsole", PACKAGE = "tcltk") : 
        C function name not in DLL for package tcltk

> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    9.1            
year     2004           
month    06             
day      21             
language R     


Best


Jens Oehlschl?gel

From rpeng at jhsph.edu  Fri Jul 16 17:18:19 2004
From: rpeng at jhsph.edu (rpeng@jhsph.edu)
Date: Fri Jul 16 17:18:21 2004
Subject: [Rd] list.files fails with all.files = TRUE and recursive = TRUE
	(PR#7102)
Message-ID: <20040716151819.2A777108BC@slim.kubism.ku.dk>

I get different behavior on Linux:

system("mkdir newdir")
dir("newdir", all.files = TRUE, recursive = TRUE)  ## R hangs
## After hitting Ctrl-C
There were 50 or more warnings (use warnings() to see the first 50)
 > dir("newdir", all.files = TRUE, recursive = TRUE)
character(0)
Warning message:
list.files: newdir is not a readable directory

After hitting Ctrl-C the first time, dir() doesn't hang but it 
produces the warning.

 > version
          _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    9.1
year     2004
month    06
day      21
language R

-roger


joehl@gmx.de wrote:
>>list.files("c:/tmp", all.files = TRUE, recursive = TRUE)
> 
> Error in list.files("c:/tmp", all.files = TRUE, recursive = TRUE) : 
>         directory/folder path name too long
> 
> 
>>version
> 
>          _              
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    1              
> minor    9.1            
> year     2004           
> month    06             
> day      21             
> language R 
> 
> 
> Best
> 
> 
> Jens Oehlschl?gel
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From maechler at stat.math.ethz.ch  Fri Jul 16 18:17:35 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri Jul 16 18:17:37 2004
Subject: [Rd] inconsistency in pchisq (PR#7099)
Message-ID: <20040716161735.5B8AF108BC@slim.kubism.ku.dk>

>>>>> "Richard" == Richard Mott <Richard.Mott@well.ox.ac.uk>
>>>>>     on Fri, 16 Jul 2004 16:30:05 +0200 (CEST) writes:

    Richard> Full_Name: Richard Mott Version: 1.9.0 OS: Windows
    Richard> XP Submission from: (NULL) (81.178.233.208)


    Richard> Shouldn't these give the same answer?

well, no,..
though I agree it should be mentioned in the documentation

    > pchisq(67.60644,df=1,lower.tail=F,ncp=0)
    [1] 3.219647e-15
    > pchisq(67.60644,df=1,lower.tail=F)
    [1] 1.996145e-16

The first call uses the internal code
for non-central chisq, the 2nd one using the central chisq.
In extreme cases (like the above), these differ more than just
neglibly.  
But we want to have both available, partly for experimental reasons

BTW 1: There are still concrete plans (by me) to use better (and much
     larger) code for improved incomplete beta and gamma
     functions which are really at the base of many of these
     p*() functions [and often consequently the q*() ones] in R.

BTW 2: the same (difference between "no ncp" and "ncp=0")
       applies to   pt(*, ncp).

--
Martin Maechler

From ligges at statistik.uni-dortmund.de  Fri Jul 16 19:23:21 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri Jul 16 19:23:24 2004
Subject: [Rd] (PR#7100) and #7102: list.files fails with all.files = TRUE
Message-ID: <20040716172321.E2CAB108C4@slim.kubism.ku.dk>

rpeng@jhsph.edu wrote:

> I get different behavior on Linux:
> 
> system("mkdir newdir")
> dir("newdir", all.files = TRUE, recursive = TRUE)  ## R hangs

The point is that all.files=TRUE implies returning also "." and ".."!
Hence the recursion uses to be infinite (from "." to "." to "." ......).

If recursiv = TRUE, the function should never look into "." and "..", 
except of the first step of the recursion.

Uwe Ligges


> ## After hitting Ctrl-C
> There were 50 or more warnings (use warnings() to see the first 50)
>  > dir("newdir", all.files = TRUE, recursive = TRUE)
> character(0)
> Warning message:
> list.files: newdir is not a readable directory
> 
> After hitting Ctrl-C the first time, dir() doesn't hang but it 
> produces the warning.
> 
>  > version
>           _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    9.1
> year     2004
> month    06
> day      21
> language R
> 
> -roger
> 
> 
> joehl@gmx.de wrote:
> 
>>>list.files("c:/tmp", all.files = TRUE, recursive = TRUE)
>>
>>Error in list.files("c:/tmp", all.files = TRUE, recursive = TRUE) : 
>>        directory/folder path name too long
>>
>>
>>
>>>version
>>
>>         _              
>>platform i386-pc-mingw32
>>arch     i386           
>>os       mingw32        
>>system   i386, mingw32  
>>status                  
>>major    1              
>>minor    9.1            
>>year     2004           
>>month    06             
>>day      21             
>>language R 
>>
>>
>>Best
>>
>>
>>Jens Oehlschl?gel
>>
>>______________________________________________
>>R-devel@stat.math.ethz.ch mailing list
>>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>>
> 
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From dmurdoch at pair.com  Fri Jul 16 20:47:44 2004
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Fri Jul 16 20:47:46 2004
Subject: [Rd] (PR#7100) and #7102: list.files fails with all.files = TRUE
Message-ID: <20040716184744.B4DF7108BB@slim.kubism.ku.dk>

On Fri, 16 Jul 2004 19:23:21 +0200 (CEST),
ligges@statistik.uni-dortmund.de wrote :

>rpeng@jhsph.edu wrote:
>
>> I get different behavior on Linux:
>> 
>> system("mkdir newdir")
>> dir("newdir", all.files = TRUE, recursive = TRUE)  ## R hangs
>
>The point is that all.files=TRUE implies returning also "." and ".."!
>Hence the recursion uses to be infinite (from "." to "." to "." ......).
>
>If recursiv = TRUE, the function should never look into "." and "..", 
>except of the first step of the recursion.

I'll fix this in r-patched.  It may be a few days before I'm able to
commit the change, though.

Duncan Murdoch

From pliu3 at unity.ncsu.edu  Fri Jul 16 22:05:57 2004
From: pliu3 at unity.ncsu.edu (Peng Liu)
Date: Fri Jul 16 22:06:01 2004
Subject: [Rd] getWindowsHandle()
In-Reply-To: <g5qdf0tqb7dvvrdorqqlbg6ool5309p28c@4ax.com>
References: <Pine.GSO.4.58.0407151559590.14948@uni01du.unity.ncsu.edu>
	<g5qdf0tqb7dvvrdorqqlbg6ool5309p28c@4ax.com>
Message-ID: <Pine.GSO.4.58.0407161551420.12812@uni01du.unity.ncsu.edu>

On Thu, 15 Jul 2004, Duncan Murdoch wrote:

> You'll need to read Windows documentation.
> Currently R has no way to get the list of MDI document windows.  I
> think the function you want is EnumChildWindows, but you might need to
> use EnumWindows.  I can't remember whether MDI documents are child
> windows or top level windows.

Hi Dr. Murdoch,
Thanks for you advice. I checked WIN32API documents and write the
following codes. So far, the call just gives all the hwnd's of child
windows. Many window widgets are treated as child windows, such as
tool bar, shortcut buttons, workspace, and so on. Therefore, the output
can be a long list. Probably, I need to redefine the maximum number of
handles. Moreover, it does not make sense to give a list of hwnd's only. I
will add more information to the output later.

Cheers!
Peng

/*************************C codes begin*************************/

#define MAXNCHILDWINS 100
struct hwndlst
{
	HWND childhwndlst[MAXNCHILDWINS];
	int p;
};
BOOL CALLBACK EnumChildProc(HWND hwndChild, struct hwndlst * lParam)
{
	struct hwndlst * plist=lParam;
	plist->childhwndlst[(plist->p)++] = hwndChild;
	return TRUE;
}

struct hwndlst getMDIChildHandle(void)
{
	HWND hwnd;
	struct hwndlst hwndlst;
	hwndlst.p = 0;
	hwnd = GetForegroundWindow();
	EnumChildWindows(hwnd, EnumChildProc, &hwndlst);
	return(hwndlst);
}

SEXP getMDIChildhandles()
{
    SEXP result;
	int i;
	struct hwndlst lst;

    result = R_NilValue; /* to avoid warnings */

    lst = getMDIChildHandle();
    PROTECT(result = allocVector(INTSXP, MAXNCHILDWINS+1));
	INTEGER(result)[0]=(int)(lst.p);
    for (i=1; i<MAXNCHILDWINS+1; i++)
    {
	    INTEGER(result)[i] = ((int)(lst.childhwndlst)[i-1]);
    }
    UNPROTECT(1);

    return result;
}

/**********************C codes end.************************/

####################R codes begin###########################
getMDIChildhandles <- function() {
    a <- .Call("getMDIChildhandles")
    a <- a[2:(a[1])]
    return(a)
}
##################R codes end.#############################
-------------------------------------
Peng Liu
Department of Statistics
NC State University
Raleigh, NC 27695, USA
E-mail: pliu3@ncsu.edu
URL: http://www4.ncsu.edu/~pliu3

From rpeng at jhsph.edu  Fri Jul 16 22:13:17 2004
From: rpeng at jhsph.edu (Roger D. Peng)
Date: Fri Jul 16 22:13:26 2004
Subject: [Rd] Replying to bug reports
Message-ID: <40F836DD.40901@jhsph.edu>

I have a naive question here, but only because I've managed to screw 
this up twice in the last week.

What is the correct way to reply to a bug report?

Should r-bugs be in the To: or Cc: fields?  I originally thought that 
hitting "Reply" and stripping of the r-devel email address was 
sufficient but apparently not.

-roger

From hb at maths.lth.se  Sat Jul 17 01:59:17 2004
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Sat Jul 17 01:59:47 2004
Subject: [Rd] RE: [R] Strange (non-deterministic) problem with strsplit
In-Reply-To: <f8e6ff05040716135022ed686e@mail.gmail.com>
Message-ID: <004501c46b90$efe19ea0$0701a8c0@hblaptop>

[Moving this thread to R-devel instead]

I suspect your "random" results are due to a bug in gsub(). On my R v1.9.0
(Rterm and Rgui) R crashes when I do

% R --vanilla
> gsub(" ", "", "abb + c | a*b", perl=TRUE)

Trying 

> gsub(" ", "", "b c + d | a * b", perl=TRUE)

and I'll get NULL. With 

> gsub("\\s", "", "bc + d | a * b", perl=TRUE)

it works as expected. So there is something buggy for sure.

This might have been fixed in R v1.9.1 or its patched version. (I'm still
busy to recover from a HDD crash, but, yes, I will update to Rv1.9.1. BTW,
what's the name of the error logger for Windows that is once in a while
recommended on this list and that gives more detailed errors than the
default Windows one?)

Cheers

Henrik

> -----Original Message-----
> From: r-help-bounces@stat.math.ethz.ch 
> [mailto:r-help-bounces@stat.math.ethz.ch] On Behalf Of hadley wickham
> Sent: Friday, July 16, 2004 10:50 PM
> To: r-help@stat.math.ethz.ch
> Subject: [R] Strange (non-deterministic) problem with strsplit
> 
> 
> I'm having an odd problem with strsplit (well I think it's 
> strplit that's causing the problem).  When I run the code 
> below as follows:  str(parseFormulaMin(y +x +d ~ b +d +e| a * b))
> 
> I expect to get
> List of 3
>  $ y: chr "y+x+d"
>  $ x: chr "b+d+e"
>  $ g: chr "a*b"
> 
> But about half the time I get 
> 
> List of 3
>  $ y: chr "y+x+d"
>  $ x: chr "b+d+e"
>  $ g: chr "a*[square box]"
> (square box not reproduced here because copy and pasting it 
> seems to break my web mail)
> 
> Can anyone reproduce the problem and/or suggest any solutions? 
> 
> parseFormula <- function(formula) {
> 	splitvars <- function(x) {
> 		strsplit(x, "\\+|\\*")[[1]]
> 	}
> 	stripwhitespace <- function(x) {
> 		gsub("\\s", "", x, perl=T)
> 	}
> 	
> 	vars <- stripwhitespace(as.character(formula)[3])
> 	varsplit <- strsplit(vars, "|", fixed=TRUE)[[1]]
> 
> 	parts <- list(
> 		y = stripwhitespace(as.character(formula)[2]),
> 		x = varsplit[1],
> 		g = varsplit[2]
> 	)
> 	lapply(parts, splitvars)
> } 
> 
> Thanks,
> 
> Hadley
> 
> ______________________________________________
> R-help@stat.math.ethz.ch mailing list 
> https://www.stat.math.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide! 
> http://www.R-project.org/posting-guide.html
> 
>

From maechler at stat.math.ethz.ch  Sat Jul 17 10:03:24 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Sat Jul 17 10:03:25 2004
Subject: [Rd] Replying to bug reports
In-Reply-To: <40F836DD.40901@jhsph.edu>
References: <40F836DD.40901@jhsph.edu>
Message-ID: <16632.56652.21794.180776@gargle.gargle.HOWL>

>>>>> "Roger" == Roger D Peng <rpeng@jhsph.edu>
>>>>>     on Fri, 16 Jul 2004 16:13:17 -0400 writes:

    Roger> I have a naive question here, but only because I've
    Roger> managed to screw this up twice in the last week.

    Roger> What is the correct way to reply to a bug report?

    Roger> Should r-bugs be in the To: or Cc: fields?  I
    Roger> originally thought that hitting "Reply" and stripping
    Roger> of the r-devel email address was sufficient but
    Roger> apparently not.

and be careful to keep the string '(PR#....)' as part of the
subject *)  That should really suffice.

Can you remind me of an example where it didn't?

Martin

*)
 Brian found it useful to move that string to the
 beginning of the subject line in those cases where that line
 has been relatively long -- since other people's mailers may
 break the line in two - which for the 'R-bugs' mail handler
 makes the 2nd part to be "not Subject" and leads to creation of
 another PR#.

From maechler at stat.math.ethz.ch  Sat Jul 17 10:44:43 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Sat Jul 17 10:44:44 2004
Subject: [Rd] RE: [R] Strange (non-deterministic) problem with strsplit
In-Reply-To: <004501c46b90$efe19ea0$0701a8c0@hblaptop>
References: <f8e6ff05040716135022ed686e@mail.gmail.com>
	<004501c46b90$efe19ea0$0701a8c0@hblaptop>
Message-ID: <16632.59131.544548.337755@gargle.gargle.HOWL>

>>>>> "HenrikB" == Henrik Bengtsson <hb@maths.lth.se>
>>>>>     on Sat, 17 Jul 2004 01:59:17 +0200 writes:

    HenrikB> [Moving this thread to R-devel instead] I suspect
    HenrikB> your "random" results are due to a bug in
    HenrikB> gsub(). On my R v1.9.0 (Rterm and Rgui) R crashes
    HenrikB> when I do

    HenrikB> % R --vanilla
    >> gsub(" ", "", "abb + c | a*b", perl=TRUE)

    HenrikB> Trying

    >> gsub(" ", "", "b c + d | a * b", perl=TRUE)

    HenrikB> and I'll get NULL. With

    >> gsub("\\s", "", "bc + d | a * b", perl=TRUE)

    HenrikB> it works as expected. So there is something buggy
    HenrikB> for sure.

    HenrikB> This might have been fixed in R v1.9.1 or its
    HenrikB> patched version.

probably not.  Here are results from 1.91-patched

> gsub(" ",   "", "b c + d | a * b", perl=TRUE)
NULL
> gsub("\\s", "", "b c + d | a * b", perl=TRUE)
NULL
> gsub("\\s", "", "bc + d | a * b", perl=TRUE)
[1] "bc+d|a*b"
> gsub(" ",   "", "bc + d | a * b", perl=TRUE)
[1] "bc+d|a*b"
> 

Martin Maechler, ETH Zurich

From maechler at stat.math.ethz.ch  Sat Jul 17 12:15:18 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Sat Jul 17 12:15:21 2004
Subject: [Rd] gsub(*, perl=TRUE) bug incl. seg.fault (PR#7108)
Message-ID: <20040717101518.CF36C108BB@slim.kubism.ku.dk>

Experimenting a bit further, I've "found" the following

1) the problem seems only gsub(), not sub()

  > sub(" ", "", "b c + d | a * b", perl=TRUE)
  [1] "bc + d | a * b"
  > gsub(" ", "", "b c + d | a * b", perl=TRUE)
  NULL

2) only if perl = TRUE, not otherwise

3) Also modifying the replacement string only slightly leads to a
  different (correct instead of bug) result:

  > gsub(" ", "", "bc + d | a * b", perl=TRUE)
  [1] "bc+d|a*b"
  > gsub(" ", "", "b c + d | a *", perl=TRUE)
  [1] "bc+d|a*"
  > gsub(" ", "", "b c + d | b", perl=TRUE)
  [1] "bc+d|b"

Whereas those give the bug as well :

  > gsub(" ", "", "b : : d : a : b", perl=TRUE)
  NULL
  > gsub(" ", "", "b : : : : a : b", perl=TRUE)
  NULL
  > gsub(" ", "", "b : : : : : : b", perl=TRUE)
  NULL
  > gsub(" ", "", "a : : : : : : a", perl=TRUE)
  NULL
but not this
  > gsub(" ", "", "b : : : : : : a", perl=TRUE)
  [1] "b::::::a"

But it's even worse :

  > gsub(" ", "", "a: 12345 :a", perl=TRUE)

  -> segmentation fault

and from "R -d gdb" :

    > gsub(" ", "", "a: 12345 :a", perl=TRUE)

    Program received signal SIGSEGV, Segmentation fault.
    hashIndex (symbol=0x8fd0060, table=0x823f2b8) at
    ../../../R/src/main/envir.c:599
    599	  if( !HASHASH(c) ) {
    (gdb) bt
    #0  hashIndex (symbol=0x8fd0060, table=0x823f2b8)
	at ../../../R/src/main/envir.c:599
    #1  0x080b145d in R_GetGlobalCache (symbol=0x1)
	at ../../../R/src/main/envir.c:656
    #2  0x080b1ac1 in findGlobalVar (symbol=0x8fd0060)
	at ../../../R/src/main/envir.c:923
    #3  0x080b8873 in Rf_eval (e=0x823f2b8, rho=0x823f014)
	at ../../../R/src/main/eval.c:329
    #4  0x080b88c9 in Rf_eval (e=0x8fd1e60, rho=0x821e540)
	at ../../../R/src/main/eval.c:354
    #5  0x080e1e0e in GetObject (cptr=0xbfffd400)
	at ../../../R/src/main/objects.c:88
    #6  0x080e2a3b in do_usemethod (call=0x84eb084, op=0x823be78, args=0x84eb0a0, 
	env=0x8fd1df0) at ../../../R/src/main/objects.c:381
    #7  0x080b8c33 in Rf_eval (e=0x84eb084, rho=0x8fd1df0)
	at ../../../R/src/main/eval.c:375
    #8  0x080b8f48 in Rf_applyClosure (call=0x8fd1eb4, op=0x84eafa4, 
	arglist=0x8fd1e44, rho=0x823f014, suppliedenv=0x821e540)
	at ../../../R/src/main/eval.c:559
    #9  0x080b89bf in Rf_eval (e=0x8fd1eb4, rho=0x823f014)
	at ../../../R/src/main/eval.c:410
    #10 0x0811b0f3 in Rf_PrintValueEnv (s=0x8fd1eb4, env=0x823f014)
	at ../../../R/src/main/print.c:775
    #11 0x080d55f1 in Rf_ReplIteration (rho=0x823f014, savestack=150798432, 
	browselevel=1, state=0x823f014) at ../../../R/src/main/main.c:254
    #12 0x080d578d in R_ReplConsole (rho=0x823f014, savestack=0, browselevel=0)
	at ../../../R/src/main/main.c:298
    #13 0x080d60d0 in run_Rmainloop () 
        at ../../../R/src/main/main.c:656
    #14 0x08147e90 in main (ac=150798432, av=0x8fd0060)
	at ../../../R/src/unix/system.c:99
    #15 0x42017589 in __libc_start_main () from /lib/i686/libc.so.6

(which is not directly helpful since  src/main/pcre.c  (where
the C source for gsub(*, perl=TRUE) resides)  isn't mentioned above.

Must be a memory allocation / mismatch / end_of_string problem
somewhere.

Martin Maechler, ETH Zurich

From ligges at statistik.uni-dortmund.de  Sat Jul 17 12:37:23 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Sat Jul 17 12:36:52 2004
Subject: [Rd] Replying to bug reports
In-Reply-To: <16632.56652.21794.180776@gargle.gargle.HOWL>
References: <40F836DD.40901@jhsph.edu>
	<16632.56652.21794.180776@gargle.gargle.HOWL>
Message-ID: <40F90163.2030604@statistik.uni-dortmund.de>

Martin Maechler wrote:

>>>>>>"Roger" == Roger D Peng <rpeng@jhsph.edu>
>>>>>>    on Fri, 16 Jul 2004 16:13:17 -0400 writes:
> 
> 
>     Roger> I have a naive question here, but only because I've
>     Roger> managed to screw this up twice in the last week.
> 
>     Roger> What is the correct way to reply to a bug report?
> 
>     Roger> Should r-bugs be in the To: or Cc: fields?  I
>     Roger> originally thought that hitting "Reply" and stripping
>     Roger> of the r-devel email address was sufficient but
>     Roger> apparently not.
> 
> and be careful to keep the string '(PR#....)' as part of the
> subject *)  That should really suffice.
> 
> Can you remind me of an example where it didn't?
> 
> Martin
> 
> *)
>  Brian found it useful to move that string to the
>  beginning of the subject line in those cases where that line
>  has been relatively long -- since other people's mailers may
>  break the line in two - which for the 'R-bugs' mail handler
>  makes the 2nd part to be "not Subject" and leads to creation of
>  another PR#.

Indeed, see yesterdays the duplicated reports #7100 and #7102. Where it 
would have been essential (at least for Roger's mail client) to move the 
PR#7100 in front of the subject line.

I don't know JitterBug. Is it possible to put the PR# in front of the 
subject line rather than appending it at the end in order to overcome 
this quite frequent problem with rather long subject lines?

Uwe


> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From maechler at stat.math.ethz.ch  Sat Jul 17 13:21:45 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Sat Jul 17 13:21:47 2004
Subject: [Rd] inconsistency in pchisq (PR#7099)
Message-ID: <20040717112145.47DC6FC29@slim.kubism.ku.dk>

>>>>> "Richard" == Richard Mott <Richard.Mott@well.ox.ac.uk>
>>>>>     on Sat, 17 Jul 2004 11:12:23 +0100 (BST) writes:

    Richard> Martin - I agree that the p-values are essentially
    Richard> identical. i raised the issue becuase i can get
    Richard> negative p-values with the ncp=0 version. It is
    Richard> hard to reproduce this problem in the sense that
    Richard> the value of the chi-squared statistic that causes
    Richard> the phenomenom is identical to the one i sent you
    Richard> to 5 sig figures - i don't know how to print the
    Richard> full value in order to send it to you. Negative
    Richard> small probabilities could of course be treated as
    Richard> 0, but this creates problems when i take logs

sure, and much more of a problem, i.e., a clear bug.
--> so after all your bug report was well valid [-> CC'ed back to R-bugs]

To see it more extremely, try the following :

 > curve(pchisq(x, df=1 ,       lower=FALSE), 65, 70, ylim=c(-1,4)*4e-16, col=2)
 > curve(pchisq(x, df=1, ncp=0, lower=FALSE), 65, 70, add=TRUE)

The reason for this behavior is simply that internal pnchisq(*, lower=FALSE)
at the moment simply is equivalent to  1 - pnchisq(*, lower=TRUE), 
and since the computer epsilon is 2e-16 it's no wonder that
cancellation swamps everything for these extreme abscissa values.

Note that we could easily change the case  'ncp=0' to use the
central chisq,  but that's not the case for e.g. ncp = 0.001.

==> pchisq(*, ncp) definitely needs to be improved.

I have code to do it (using "Wiener germ approximations"), but not
finished testing it yet.

    Richard> If you like i can send you the data and program
    Richard> used to generate the problem - the chi-squared
    Richard> value is generated from a call to glm()

    Richard> Richard

    >>>>>>> "Richard" == Richard Mott <rmott@well.ox.ac.uk> on
    >>>>>>> Sat, 17 Jul 2004 01:42:18 +0100 writes:
    >>
    Richard> Martin - thanks - so is it always better to use
    Richard> pchisq(67.60644,df=1,lower.tail=F) if indeed ncp=0
    Richard> ?
    >>  Yes, (for the algorithms currently in use; and as I
    >> said, these are destined to be improved).
    >> 
    >> However I do wonder: In which situations would it matter
    >> to have P = 2e-16 vs P = 3e-15 ??
    >> 
    >> Very often everything depends on underlying model
    >> assumptions, and such extreme tail probabilities are
    >> typically extremely dependent, i.e. would vary heavily by
    >> small changes in the underlying model.
    >> 
    >> Regards, Martin

From dmurdoch at pair.com  Sat Jul 17 13:52:42 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Sat Jul 17 13:52:46 2004
Subject: [Rd] RE: [R] Strange (non-deterministic) problem with strsplit
In-Reply-To: <004501c46b90$efe19ea0$0701a8c0@hblaptop>
References: <f8e6ff05040716135022ed686e@mail.gmail.com>
	<004501c46b90$efe19ea0$0701a8c0@hblaptop>
Message-ID: <uc4if0pr7jtegd9rdhskn061sfvl6guap7@4ax.com>

On Sat, 17 Jul 2004 01:59:17 +0200, "Henrik Bengtsson"
<hb@maths.lth.se> wrote:

> BTW,
>what's the name of the error logger for Windows that is once in a while
>recommended on this list and that gives more detailed errors than the
>default Windows one?)

I think you mean DrMinGW, available from the mingw-utils bundle on
www.mingw.org.

I've put together a page of debugging tips (with a Windows emphasis)
at

 http://www.stats.uwo.ca/faculty/murdoch/software/debuggingR

It's still fairly new, so there are likely important details missing;
please pass them on to me, or tell me which advice doesn't work for
you.

Duncan Murdoch

From cwu006 at uottawa.ca  Sun Jul 18 21:19:27 2004
From: cwu006 at uottawa.ca (cheng wu)
Date: Sun Jul 18 21:19:37 2004
Subject: [Rd] pacf.mts
Message-ID: <000601c46cfc$25255ae0$e88c7a89@math00>

> predict(a.lda,a[i,c(7:10)])$class -> q
Error in eval(expr, envir, enclos) : couldn't find function "SD"

I don't know what's wrong with this?
	[[alternative HTML version deleted]]

From ligges at statistik.uni-dortmund.de  Mon Jul 19 08:37:02 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon Jul 19 08:36:31 2004
Subject: [Rd] pacf.mts
In-Reply-To: <000601c46cfc$25255ae0$e88c7a89@math00>
References: <000601c46cfc$25255ae0$e88c7a89@math00>
Message-ID: <40FB6C0E.3060009@statistik.uni-dortmund.de>

cheng wu wrote:

>>predict(a.lda,a[i,c(7:10)])$class -> q
> 
> Error in eval(expr, envir, enclos) : couldn't find function "SD"
> 
> I don't know what's wrong with this?

We don't know either, because there is almost no information in your 
message.

What is a.lda? What is a? What is i? In which way have you created these 
objects? What R version? What OS? ......????
Why do you send this message to R-devel rather than R-help?

Please specify repoducible code and read the posting guide at 
http://www.r-project.org/posting-guide.html.

Uwe Ligges

From clock at twibright.com  Mon Jul 19 12:28:32 2004
From: clock at twibright.com (clock@twibright.com)
Date: Mon Jul 19 12:28:40 2004
Subject: [Rd] par(xlog) is not honoured (PR#7111)
Message-ID: <20040719102832.E4A99FC2D@slim.kubism.ku.dk>

Full_Name: Karel Kulhavy
Version: 1.9.0
OS: GNU/Linux
Submission from: (NULL) (212.71.168.94)


plot(function(x){x^2}, 1, 10) doesn't react to par(xlog=TRUE).

From ligges at statistik.uni-dortmund.de  Mon Jul 19 12:50:29 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Mon Jul 19 12:50:32 2004
Subject: [Rd] par(xlog) is not honoured (PR#7111)
Message-ID: <20040719105029.A8CBAFC2D@slim.kubism.ku.dk>

clock@twibright.com wrote:

> Full_Name: Karel Kulhavy
> Version: 1.9.0
> OS: GNU/Linux
> Submission from: (NULL) (212.71.168.94)
> 
> 
> plot(function(x){x^2}, 1, 10) doesn't react to par(xlog=TRUE).

That is NOT a bug. Please only submit reports if you are sure you have 
obsrved a bug. Please read the FAQs on what a bug really is. Please 
check against the most recent version of R (at least the last official 
release which is R-1.9.1) before reporting a bug.


?par tells you that xlog is readonly, and that you are going to use

   plot(function(x){x^2}, 1, 10, log = "x")

Uwe Ligges



> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From clock at twibright.com  Mon Jul 19 12:52:55 2004
From: clock at twibright.com (clock@twibright.com)
Date: Mon Jul 19 12:52:57 2004
Subject: [Rd] par(ann=FALSE) ignored by image() (PR#7112)
Message-ID: <20040719105255.EE5BEFC29@slim.kubism.ku.dk>

Full_Name: Karel 'Clock' Kulhavy
Version: 1.9.0
OS: GNU/Linux
Submission from: (NULL) (212.71.168.94)


par(ann=FALSE) is ignored by image() graphics function.

From clock at twibright.com  Mon Jul 19 12:57:11 2004
From: clock at twibright.com (clock@twibright.com)
Date: Mon Jul 19 12:57:14 2004
Subject: [Rd] par(cex) is ignored by persp() (PR#7113)
Message-ID: <20040719105711.B5E1CFC29@slim.kubism.ku.dk>

Full_Name: Karel 'Clock' Kulhavy
Version: 1.9.0
OS: GNU/Linux
Submission from: (NULL) (212.71.168.94)


persp() graphing function ignores par(cex).

From clock at twibright.com  Mon Jul 19 12:58:19 2004
From: clock at twibright.com (clock@twibright.com)
Date: Mon Jul 19 12:58:23 2004
Subject: [Rd] filled.contour() ignores mfrow (PR#7114)
Message-ID: <20040719105819.106CEFC29@slim.kubism.ku.dk>

Full_Name: Karel 'Clock' Kulhavy
Version: 1.9.0
OS: GNU/Linux
Submission from: (NULL) (212.71.168.94)


par(mfrow=c(2,1) is ignored by filled.contour().

From ligges at statistik.uni-dortmund.de  Mon Jul 19 13:00:45 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Mon Jul 19 13:00:52 2004
Subject: [Rd] par(ann=FALSE) ignored by image() (PR#7112)
Message-ID: <20040719110045.734C1FC2D@slim.kubism.ku.dk>

clock@twibright.com wrote:

> Full_Name: Karel 'Clock' Kulhavy
> Version: 1.9.0
> OS: GNU/Linux
> Submission from: (NULL) (212.71.168.94)
> 
> 
> par(ann=FALSE) is ignored by image() graphics function.

Please stop sending unsensible bug reports! Those have to be handled 
manually in the bug repository!


I don't see any bug. Please only submit reports if you are sure you have
obsrved a bug. Please read the FAQs on what a bug really is. Please
check against the most recent version of R (at least the last official
release which is R-1.9.1) before reporting a bug.

Also, please specify reproducible code in order to make bugs 
reproducible by people who try to fix bugs.


par(ann=FALSE)
x <- y <- seq(-4*pi, 4*pi, len=27)
r <- sqrt(outer(x^2, y^2, "+"))
image(z = z <- cos(r^2)*exp(-r/6), col=gray((0:32)/32), main = "test")

Do you see "test" appearing in the plot??? I don't!

Uwe Ligges

From ligges at statistik.uni-dortmund.de  Mon Jul 19 13:04:53 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Mon Jul 19 13:04:55 2004
Subject: [Rd] par(cex) is ignored by persp() (PR#7113)
Message-ID: <20040719110453.6443FFC2D@slim.kubism.ku.dk>

clock@twibright.com wrote:

> Full_Name: Karel 'Clock' Kulhavy
> Version: 1.9.0
> OS: GNU/Linux
> Submission from: (NULL) (212.71.168.94)
> 
> 
> persp() graphing function ignores par(cex).


Please stop sending unsensible bug reports! Those have to be handled 
manually in the bug repository!

That's not a bug. persp() does not draw any points, so what do you think 
is par(cex) supposed to do in this context???

Note that persp() is special anyway and (apart from this one which is 
completely OK), there may be some other arguments in par() that are 
indeed ignored in persp().

lease only submit reports if you are sure you have
obsrved a bug. Please read the FAQs on what a bug really is. Please
check against the most recent version of R (at least the last official
release which is R-1.9.1) before reporting a bug.

Also, please specify reproducible code in order to make bugs 
reproducible by people who try to fix bugs.

Uwe Ligges

From ligges at statistik.uni-dortmund.de  Mon Jul 19 13:07:52 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Mon Jul 19 13:07:56 2004
Subject: [Rd] filled.contour() ignores mfrow (PR#7114)
Message-ID: <20040719110752.A53EFFC2D@slim.kubism.ku.dk>

clock@twibright.com wrote:

> Full_Name: Karel 'Clock' Kulhavy
> Version: 1.9.0
> OS: GNU/Linux
> Submission from: (NULL) (212.71.168.94)
> 
> 
> par(mfrow=c(2,1) is ignored by filled.contour().


Oh dear ...

Please stop sending unsensible bug reports! Those have to be handled 
manually in the bug repository!

That's not a bug. ?filled.contour tells us:

"This function currently uses the layout function and so is restricted 
to a full page display. As an alternative consider the levelplot 
function from the lattice package which works in multipanel displays."


Please only submit reports if you are sure you have
observed a bug. Please read the FAQs on what a bug really is. Please
check against the most recent version of R (at least the last official
release which is R-1.9.1) before reporting a bug.

Also, please specify reproducible code in order to make bugs 
reproducible by people who try to fix bugs.

Uwe Ligges

From B.Rowlingson at lancaster.ac.uk  Mon Jul 19 13:21:28 2004
From: B.Rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Mon Jul 19 13:21:34 2004
Subject: [Rd] filled.contour() ignores mfrow
In-Reply-To: <20040719110752.A53EFFC2D@slim.kubism.ku.dk>
References: <20040719110752.A53EFFC2D@slim.kubism.ku.dk>
Message-ID: <40FBAEB8.6030802@lancaster.ac.uk>

ligges@statistik.uni-dortmund.de wrote:

> Please stop sending unsensible bug reports! Those have to be handled 
> manually in the bug repository!

  Really? They seem to be being handled automatically and frighteningly 
well by the Uwe-bot at the moment. Congratulations, you've passed the 
Turning Test.

Baz

From dmurdoch at pair.com  Mon Jul 19 15:27:28 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Mon Jul 19 15:27:58 2004
Subject: [Rd] getWindowsHandle()
In-Reply-To: <Pine.GSO.4.58.0407161551420.12812@uni01du.unity.ncsu.edu>
References: <Pine.GSO.4.58.0407151559590.14948@uni01du.unity.ncsu.edu>
	<g5qdf0tqb7dvvrdorqqlbg6ool5309p28c@4ax.com>
	<Pine.GSO.4.58.0407161551420.12812@uni01du.unity.ncsu.edu>
Message-ID: <iiinf0huiif9i780smbhna4ka45i5lkrkl@4ax.com>

On Fri, 16 Jul 2004 16:05:57 -0400 (EDT), Peng Liu
<pliu3@unity.ncsu.edu> wrote :

>On Thu, 15 Jul 2004, Duncan Murdoch wrote:
>
>> You'll need to read Windows documentation.
>> Currently R has no way to get the list of MDI document windows.  I
>> think the function you want is EnumChildWindows, but you might need to
>> use EnumWindows.  I can't remember whether MDI documents are child
>> windows or top level windows.
>
>Hi Dr. Murdoch,
>Thanks for you advice. I checked WIN32API documents and write the
>following codes. So far, the call just gives all the hwnd's of child
>windows. Many window widgets are treated as child windows, such as
>tool bar, shortcut buttons, workspace, and so on. Therefore, the output
>can be a long list. Probably, I need to redefine the maximum number of
>handles. Moreover, it does not make sense to give a list of hwnd's only. I
>will add more information to the output later.

As a general principle, I don't think we should put things in R if
they done more easily in C.  It's relatively tricky to figure out R's
window handles if you start from nothing, so I put in
getWindowsHandle.  But I don't have a clear picture of what you want
the MDI child window handles for.  Is there something you can do with
those with R code?  If not, why not just write code like your C code
whenever you need the child window?

The problem with putting functions into R is that it increases the
maintenance burden.  Functions need to add value to justify this.  I'm
not saying a function like yours wouldn't add value, just that it's
not obvious to me how it would.

Could I suggest that you write all of this up as a package?  Let me
know when you come to something that just can't be done because of
something missing from R itself.

Duncan Murdoch

From maechler at stat.math.ethz.ch  Mon Jul 19 17:16:55 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon Jul 19 17:16:57 2004
Subject: [Rd] filled.contour() ignores mfrow
In-Reply-To: <40FBAEB8.6030802@lancaster.ac.uk>
References: <20040719110752.A53EFFC2D@slim.kubism.ku.dk>
	<40FBAEB8.6030802@lancaster.ac.uk>
Message-ID: <16635.58855.758991.800917@gargle.gargle.HOWL>

>>>>> "BaRow" == Barry Rowlingson <B.Rowlingson@lancaster.ac.uk>
>>>>>     on Mon, 19 Jul 2004 12:21:28 +0100 writes:

    BaRow> ligges@statistik.uni-dortmund.de wrote:
    >> Please stop sending unsensible bug reports! Those have to be handled 
    >> manually in the bug repository!

    BaRow> Really? They seem to be being handled automatically and frighteningly 
    BaRow> well by the Uwe-bot at the moment. Congratulations, you've passed the 
    BaRow> Turning Test.
	      ^
 [you mean "Turing" -  do you have a not-so-sophisticated 
		       auto-speller 'bot handling your e-mail ?]

Well, the problem is that the Uwe-bot only can work on the
R-devel side of it, not --- as the 'bot mentioned correctly --
on the 'R bug repository' side.  There, one real person, from
R-core, must authenticate and move the bug report to the trashcan.

Martin

From MSchwartz at MedAnalytics.com  Mon Jul 19 19:15:28 2004
From: MSchwartz at MedAnalytics.com (Marc Schwartz)
Date: Mon Jul 19 19:15:37 2004
Subject: [Rd] rsync -> cvs down?
Message-ID: <1090257328.3449.46.camel@localhost.localdomain>

Hi all,

I am not able to access cvs via rsync today. Is the service down?

Thanks,

Marc Schwartz

From bates at stat.wisc.edu  Mon Jul 19 19:38:26 2004
From: bates at stat.wisc.edu (Douglas Bates)
Date: Mon Jul 19 19:34:39 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <1090257328.3449.46.camel@localhost.localdomain>
References: <1090257328.3449.46.camel@localhost.localdomain>
Message-ID: <40FC0712.301@stat.wisc.edu>

Marc Schwartz wrote:

> I am not able to access cvs via rsync today. Is the service down?

Yes.  We should have sent email about it to r-devel but it has been a 
hectic several days.

The bad news is that the newly installed cvs.r-project.org machine, 
which is also rsync.r-project.org, was compromised and we had to take it 
off the net.

The good news is that, thanks to heroic efforts by Martin Maechler and 
Deepayan Sarkar, the CVS repository has been transformed to Subversion 
and is available at http://svn.r-project.org/R/ (and at 
https://svn.r-project.org/R/ but SSL is probably only needed by those 
doing commits).  If you have a Subversion client (see 
http://subversion.tigris.org - those using Windows may also want to look 
at http://tortoiseSVN.tigris.org/) you can check out and update the 
current r-devel from http://svn.r-project.org/R/trunk/ and the current 
R-patched from http://svn.r-project.org/R/branches/R-1-9-patches/

From rossini at blindglobe.net  Mon Jul 19 19:51:30 2004
From: rossini at blindglobe.net (A.J. Rossini)
Date: Mon Jul 19 19:51:37 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <40FC0712.301@stat.wisc.edu> (Douglas Bates's message of "Mon,
	19 Jul 2004 12:38:26 -0500")
References: <1090257328.3449.46.camel@localhost.localdomain>
	<40FC0712.301@stat.wisc.edu>
Message-ID: <85bribhom5.fsf@servant.blindglobe.net>


The svn server appears to be down.

best,
-tony


Douglas Bates <bates@stat.wisc.edu> writes:

> Marc Schwartz wrote:
>
>> I am not able to access cvs via rsync today. Is the service down?
>
> Yes.  We should have sent email about it to r-devel but it has been a
> hectic several days.
>
> The bad news is that the newly installed cvs.r-project.org machine,
> which is also rsync.r-project.org, was compromised and we had to take
> it off the net.
>
> The good news is that, thanks to heroic efforts by Martin Maechler and
> Deepayan Sarkar, the CVS repository has been transformed to Subversion
> and is available at http://svn.r-project.org/R/ (and at
> https://svn.r-project.org/R/ but SSL is probably only needed by those
> doing commits).  If you have a Subversion client (see
> http://subversion.tigris.org - those using Windows may also want to
> look at http://tortoiseSVN.tigris.org/) you can check out and update
> the current r-devel from http://svn.r-project.org/R/trunk/ and the
> current R-patched from
> http://svn.r-project.org/R/branches/R-1-9-patches/
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

-- 
Anthony Rossini			    Research Associate Professor
rossini@u.washington.edu            http://www.analytics.washington.edu/ 
Biomedical and Health Informatics   University of Washington
Biostatistics, SCHARP/HVTN          Fred Hutchinson Cancer Research Center
UW (Tu/Th/F): 206-616-7630 FAX=206-543-3461 | Voicemail is unreliable
FHCRC  (M/W): 206-667-7025 FAX=206-667-4812 | use Email

CONFIDENTIALITY NOTICE: This e-mail message and any attachme...{{dropped}}

From MSchwartz at MedAnalytics.com  Mon Jul 19 19:57:12 2004
From: MSchwartz at MedAnalytics.com (Marc Schwartz)
Date: Mon Jul 19 19:57:22 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <40FC0712.301@stat.wisc.edu>
References: <1090257328.3449.46.camel@localhost.localdomain>
	<40FC0712.301@stat.wisc.edu>
Message-ID: <1090259831.3449.54.camel@localhost.localdomain>

On Mon, 2004-07-19 at 12:38, Douglas Bates wrote:
> Marc Schwartz wrote:
> 
> > I am not able to access cvs via rsync today. Is the service down?
> 
> Yes.  We should have sent email about it to r-devel but it has been a 
> hectic several days.
> 
> The bad news is that the newly installed cvs.r-project.org machine, 
> which is also rsync.r-project.org, was compromised and we had to take it 
> off the net.
> 
> The good news is that, thanks to heroic efforts by Martin Maechler and 
> Deepayan Sarkar, the CVS repository has been transformed to Subversion 
> and is available at http://svn.r-project.org/R/ (and at 
> https://svn.r-project.org/R/ but SSL is probably only needed by those 
> doing commits).  If you have a Subversion client (see 
> http://subversion.tigris.org - those using Windows may also want to look 
> at http://tortoiseSVN.tigris.org/) you can check out and update the 
> current r-devel from http://svn.r-project.org/R/trunk/ and the current 
> R-patched from http://svn.r-project.org/R/branches/R-1-9-patches/
> 

Doug,

Thanks and thanks to Martin and Deepayan!

subversion is part of FC2 as is the svn client.

Presuming that I am using the proper command:

svn co http://svn.r-project.org/R/branches/R-1-9-patches

Is the svn server down or is the command incorrect?

Thanks again Doug.

Best,

Marc

From ligges at statistik.uni-dortmund.de  Mon Jul 19 20:01:07 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon Jul 19 20:00:32 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <85bribhom5.fsf@servant.blindglobe.net>
References: <1090257328.3449.46.camel@localhost.localdomain>	<40FC0712.301@stat.wisc.edu>
	<85bribhom5.fsf@servant.blindglobe.net>
Message-ID: <40FC0C63.9080100@statistik.uni-dortmund.de>

A.J. Rossini wrote:

> The svn server appears to be down.

Actually, I'm just checking out a developer release from

  https://svn.r-project.org/R/trunk/

Note that https is required,
               ^
the unsecured http protocol seems not to be working...


Uwe


> best,
> -tony
> 
> 
> Douglas Bates <bates@stat.wisc.edu> writes:
> 
> 
>>Marc Schwartz wrote:
>>
>>
>>>I am not able to access cvs via rsync today. Is the service down?
>>
>>Yes.  We should have sent email about it to r-devel but it has been a
>>hectic several days.
>>
>>The bad news is that the newly installed cvs.r-project.org machine,
>>which is also rsync.r-project.org, was compromised and we had to take
>>it off the net.
>>
>>The good news is that, thanks to heroic efforts by Martin Maechler and
>>Deepayan Sarkar, the CVS repository has been transformed to Subversion
>>and is available at http://svn.r-project.org/R/ (and at
>>https://svn.r-project.org/R/ but SSL is probably only needed by those
>>doing commits).  If you have a Subversion client (see
>>http://subversion.tigris.org - those using Windows may also want to
>>look at http://tortoiseSVN.tigris.org/) you can check out and update
>>the current r-devel from http://svn.r-project.org/R/trunk/ and the
>>current R-patched from
>>http://svn.r-project.org/R/branches/R-1-9-patches/
>>
>>______________________________________________
>>R-devel@stat.math.ethz.ch mailing list
>>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>>
> 
>

From rossini at blindglobe.net  Mon Jul 19 20:03:51 2004
From: rossini at blindglobe.net (A.J. Rossini)
Date: Mon Jul 19 20:03:58 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <40FC0C63.9080100@statistik.uni-dortmund.de> (Uwe Ligges's
	message of "Mon, 19 Jul 2004 20:01:07 +0200")
References: <1090257328.3449.46.camel@localhost.localdomain>
	<40FC0712.301@stat.wisc.edu> <85bribhom5.fsf@servant.blindglobe.net>
	<40FC0C63.9080100@statistik.uni-dortmund.de>
Message-ID: <851xj7ho1k.fsf@servant.blindglobe.net>


I stand corrected.  One of the servers IS down, and the other one is
running.

best,
-tony

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> A.J. Rossini wrote:
>
>> The svn server appears to be down.
>
> Actually, I'm just checking out a developer release from
>
>   https://svn.r-project.org/R/trunk/
>
> Note that https is required,
>                ^
> the unsecured http protocol seems not to be working...
>
>
> Uwe
>
>
>> best,
>> -tony
>> Douglas Bates <bates@stat.wisc.edu> writes:
>>
>>>Marc Schwartz wrote:
>>>
>>>
>>>>I am not able to access cvs via rsync today. Is the service down?
>>>
>>>Yes.  We should have sent email about it to r-devel but it has been a
>>>hectic several days.
>>>
>>>The bad news is that the newly installed cvs.r-project.org machine,
>>>which is also rsync.r-project.org, was compromised and we had to take
>>>it off the net.
>>>
>>>The good news is that, thanks to heroic efforts by Martin Maechler and
>>>Deepayan Sarkar, the CVS repository has been transformed to Subversion
>>>and is available at http://svn.r-project.org/R/ (and at
>>>https://svn.r-project.org/R/ but SSL is probably only needed by those
>>>doing commits).  If you have a Subversion client (see
>>>http://subversion.tigris.org - those using Windows may also want to
>>>look at http://tortoiseSVN.tigris.org/) you can check out and update
>>>the current r-devel from http://svn.r-project.org/R/trunk/ and the
>>>current R-patched from
>>>http://svn.r-project.org/R/branches/R-1-9-patches/
>>>
>>>______________________________________________
>>>R-devel@stat.math.ethz.ch mailing list
>>>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>
>

-- 
Anthony Rossini			    Research Associate Professor
rossini@u.washington.edu            http://www.analytics.washington.edu/ 
Biomedical and Health Informatics   University of Washington
Biostatistics, SCHARP/HVTN          Fred Hutchinson Cancer Research Center
UW (Tu/Th/F): 206-616-7630 FAX=206-543-3461 | Voicemail is unreliable
FHCRC  (M/W): 206-667-7025 FAX=206-667-4812 | use Email

CONFIDENTIALITY NOTICE: This e-mail message and any attachme...{{dropped}}

From EBSCO_AV_Gateway at ebsco.com  Mon Jul 19 20:20:33 2004
From: EBSCO_AV_Gateway at ebsco.com (EBSCO_AV_Gateway@ebsco.com)
Date: Mon Jul 19 20:20:26 2004
Subject: [Rd] Policy Violation
Message-ID: <200407191820.i6JIKOg5028487@hypatia.math.ethz.ch>

The following message sent by this account has violated system policy:

From: r-devel@stat.math.ethz.ch
To: ebsfeedback@ebsco.com
Date: Mon, 19 Jul 2004 13:20:09 -0500
Subject: Delivered Message (ebsfeedback@ebsco.com)


The following violations were detected:

--- Scan information follows ---

Virus Name: W32.Netsky.Q@mm.enc
File Attachment: M2004071913200918349.mes
Attachment Status: infected

Virus Name: W32.Netsky.Q@mm
File Attachment: msg20327.pif
Attachment Status: deleted

--- File name Block information follows ---

File Attachment: M2004071913200918349.mes/msg20327.pif
Matching file name: *.pif

From MSchwartz at MedAnalytics.com  Mon Jul 19 20:22:43 2004
From: MSchwartz at MedAnalytics.com (Marc Schwartz)
Date: Mon Jul 19 20:22:49 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <40FC0C63.9080100@statistik.uni-dortmund.de>
References: <1090257328.3449.46.camel@localhost.localdomain>
	<40FC0712.301@stat.wisc.edu> <85bribhom5.fsf@servant.blindglobe.net>
	<40FC0C63.9080100@statistik.uni-dortmund.de>
Message-ID: <1090261363.3449.64.camel@localhost.localdomain>

Uwe,

That did it.  Using https: I am now able to do a checkout.

It seems to be slow at the moment, but the files are coming through.

Thanks,

Marc

On Mon, 2004-07-19 at 13:01, Uwe Ligges wrote:
> A.J. Rossini wrote:
> 
> > The svn server appears to be down.
> 
> Actually, I'm just checking out a developer release from
> 
>   https://svn.r-project.org/R/trunk/
> 
> Note that https is required,
>                ^
> the unsecured http protocol seems not to be working...
> 
> 
> Uwe
> 
> 
> > best,
> > -tony
> > 
> > 
> > Douglas Bates <bates@stat.wisc.edu> writes:
> > 
> > 
> >>Marc Schwartz wrote:
> >>
> >>
> >>>I am not able to access cvs via rsync today. Is the service down?
> >>
> >>Yes.  We should have sent email about it to r-devel but it has been a
> >>hectic several days.
> >>
> >>The bad news is that the newly installed cvs.r-project.org machine,
> >>which is also rsync.r-project.org, was compromised and we had to take
> >>it off the net.
> >>
> >>The good news is that, thanks to heroic efforts by Martin Maechler and
> >>Deepayan Sarkar, the CVS repository has been transformed to Subversion
> >>and is available at http://svn.r-project.org/R/ (and at
> >>https://svn.r-project.org/R/ but SSL is probably only needed by those
> >>doing commits).  If you have a Subversion client (see
> >>http://subversion.tigris.org - those using Windows may also want to
> >>look at http://tortoiseSVN.tigris.org/) you can check out and update
> >>the current r-devel from http://svn.r-project.org/R/trunk/ and the
> >>current R-patched from
> >>http://svn.r-project.org/R/branches/R-1-9-patches/
> >>
> >>______________________________________________
> >>R-devel@stat.math.ethz.ch mailing list
> >>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> >>
> > 
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From maechler at stat.math.ethz.ch  Mon Jul 19 20:25:14 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon Jul 19 20:25:15 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <40FC0C63.9080100@statistik.uni-dortmund.de>
References: <1090257328.3449.46.camel@localhost.localdomain>
	<40FC0712.301@stat.wisc.edu>
	<85bribhom5.fsf@servant.blindglobe.net>
	<40FC0C63.9080100@statistik.uni-dortmund.de>
Message-ID: <16636.4618.410905.515836@gargle.gargle.HOWL>

>>>>> "UweL" == Uwe Ligges <ligges@statistik.uni-dortmund.de>
>>>>>     on Mon, 19 Jul 2004 20:01:07 +0200 writes:

    UweL> A.J. Rossini wrote:
    >> The svn server appears to be down.

    UweL> Actually, I'm just checking out a developer release from

    UweL> https://svn.r-project.org/R/trunk/

    UweL> Note that https is required,
    UweL>               ^
    UweL> the unsecured http protocol seems not to be working...

On purpose: It's "firewalled out".

I'm sorry: I've never mentioned this explicitly in my e-mails to
Doug and R-core :
Since we (R-core and potentially other people working on
	 projects off svn.r-project.org) *will* need
authentication, I just wanted to make sure that no plain text authentication can
happen (and be sniffed and then misused for yet another cracker attack)

Please also note that the SSL certificate for https://svn.r-project.org/

Certificate information:
 - Hostname: svn.r-project.org
 - Valid: from Jul 16 08:10:01 2004 GMT until Jul 14 08:10:01 2014 GMT
 - Issuer: Department of Mathematics, ETH Zurich, Zurich, Switzerland, CH
 - Fingerprint: c9:5d:eb:f9:f2:56:d1:04:ba:44:61:f8:64:6b:d9:33:3f:93:6e:ad

may seem to be fishy to you, but do accept it.
AFAIK, only in certain places of the world (inside the US only?),
you can get free "trusted certificates".
I've been told (by our departmental webmaster) that for us, a
trusted certificate would cost around
1000.- swiss francs PER YEAR.  In case anyone wants to
investigate:  He mentioned  http://www.verisign.com/products/site/secure/ 

But then, you can accept the certificate permanently and won't
be asked about it anymore.

From rossini at blindglobe.net  Mon Jul 19 20:29:28 2004
From: rossini at blindglobe.net (A.J. Rossini)
Date: Mon Jul 19 20:29:37 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <1090261363.3449.64.camel@localhost.localdomain> (Marc
	Schwartz's message of "Mon, 19 Jul 2004 13:22:43 -0500")
References: <1090257328.3449.46.camel@localhost.localdomain>
	<40FC0712.301@stat.wisc.edu> <85bribhom5.fsf@servant.blindglobe.net>
	<40FC0C63.9080100@statistik.uni-dortmund.de>
	<1090261363.3449.64.camel@localhost.localdomain>
Message-ID: <85oembg8af.fsf@servant.blindglobe.net>

Marc Schwartz <MSchwartz@MedAnalytics.com> writes:

> Uwe,
>
> That did it.  Using https: I am now able to do a checkout.
>
> It seems to be slow at the moment, but the files are coming through.

Seems to run comparable to anoncvs.  Also seems to hiccup and barf,
like anoncvs (infamouse server stalls).  

Thankfully, it's safer than anoncvs.  Thanks!

best,
-tony

-- 
Anthony Rossini			    Research Associate Professor
rossini@u.washington.edu            http://www.analytics.washington.edu/ 
Biomedical and Health Informatics   University of Washington
Biostatistics, SCHARP/HVTN          Fred Hutchinson Cancer Research Center
UW (Tu/Th/F): 206-616-7630 FAX=206-543-3461 | Voicemail is unreliable
FHCRC  (M/W): 206-667-7025 FAX=206-667-4812 | use Email

CONFIDENTIALITY NOTICE: This e-mail message and any attachme...{{dropped}}

From maechler at stat.math.ethz.ch  Mon Jul 19 20:29:59 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon Jul 19 20:30:00 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <1090259831.3449.54.camel@localhost.localdomain>
References: <1090257328.3449.46.camel@localhost.localdomain>
	<40FC0712.301@stat.wisc.edu>
	<1090259831.3449.54.camel@localhost.localdomain>
Message-ID: <16636.4903.331794.112493@gargle.gargle.HOWL>

>>>>> "Marc" == Marc Schwartz <MSchwartz@medanalytics.com>
>>>>>     on Mon, 19 Jul 2004 12:57:12 -0500 writes:

    Marc> On Mon, 2004-07-19 at 12:38, Douglas Bates wrote:
    >> Marc Schwartz wrote:
    >> 
    >> > I am not able to access cvs via rsync today. Is the service down?
    >> 
    >> Yes.  We should have sent email about it to r-devel but it has been a 
    >> hectic several days.
    >> 
    >> The bad news is that the newly installed cvs.r-project.org machine, 
    >> which is also rsync.r-project.org, was compromised and we had to take it 
    >> off the net.
    >> 
    >> The good news is that, thanks to heroic efforts by Martin Maechler and 
    >> Deepayan Sarkar, the CVS repository has been transformed to Subversion 
    >> and is available at http://svn.r-project.org/R/ (and at 
    >> https://svn.r-project.org/R/ but SSL is probably only needed by those 
    >> doing commits).  If you have a Subversion client (see 
    >> http://subversion.tigris.org - those using Windows may also want to look 
    >> at http://tortoiseSVN.tigris.org/) you can check out and update the 
    >> current r-devel from http://svn.r-project.org/R/trunk/ and the current 
    >> R-patched from http://svn.r-project.org/R/branches/R-1-9-patches/
    >> 

    Marc> Doug,

    Marc> Thanks and thanks to Martin and Deepayan!

    Marc> subversion is part of FC2 as is the svn client.

Thanks, good to know.  It's also part of Debian "testing" and
newer;  it's *not* part of RH Enterprise though.

Installing it from source, http://subversion.tigris.org/
is not hard.  The important thing for the R-project though is to
use  "configure --with-ssl ...."
because only then you get SSL support, i.e. only then you can use https://...
which is (currently) absolutely required as I just said in
another message on this thread.


    Marc> Presuming that I am using the proper command:

    Marc> svn co http://svn.r-project.org/R/branches/R-1-9-patches

    Marc> Is the svn server down or is the command incorrect?

Use 'https' instead of 'http'.
This is a requirement for svn.r-project.org/    (on purpose).

Martin

From ligges at statistik.uni-dortmund.de  Mon Jul 19 20:34:53 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon Jul 19 20:34:15 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <40FC0712.301@stat.wisc.edu>
References: <1090257328.3449.46.camel@localhost.localdomain>
	<40FC0712.301@stat.wisc.edu>
Message-ID: <40FC144D.2020300@statistik.uni-dortmund.de>

Douglas Bates wrote:

> Marc Schwartz wrote:
> 
>> I am not able to access cvs via rsync today. Is the service down?
> 
> 
> Yes.  We should have sent email about it to r-devel but it has been a 
> hectic several days.
> 
> The bad news is that the newly installed cvs.r-project.org machine, 
> which is also rsync.r-project.org, was compromised and we had to take it 
> off the net.
> 
> The good news is that, thanks to heroic efforts by Martin Maechler and 
> Deepayan Sarkar, the CVS repository has been transformed to Subversion 
> and is available at http://svn.r-project.org/R/ (and at 
> https://svn.r-project.org/R/ but SSL is probably only needed by those 
> doing commits).  If you have a Subversion client (see 
> http://subversion.tigris.org - those using Windows may also want to look 
> at http://tortoiseSVN.tigris.org/) you can check out and update the 
> current r-devel from http://svn.r-project.org/R/trunk/ and the current 
> R-patched from http://svn.r-project.org/R/branches/R-1-9-patches/
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

Duncan,

may I suggest to make the following change in .../src/gnuwin32/Makefile:


old:

rsync-recommended:
     @(cd ../library; \
     rsync -rvCt --delete --exclude=Makefile.in --exclude=.cvsignore \
      --include=*.tar.gz --exclude=*.tgz $(CRANREC) . ); \


new:

rsync-recommended:
     @(cd ../library; \
     rsync -rvCt --delete --exclude=Makefile.in --exclude=.cvsignore \
      --exclude=.svn --include=*.tar.gz --exclude=*.tgz $(CRANREC) . ); \
      ^^^^^^^^^^^^^^


Thanks,
Uwe

From MSchwartz at MedAnalytics.com  Mon Jul 19 20:47:21 2004
From: MSchwartz at MedAnalytics.com (Marc Schwartz)
Date: Mon Jul 19 20:47:29 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <16636.4903.331794.112493@gargle.gargle.HOWL>
References: <1090257328.3449.46.camel@localhost.localdomain>
	<40FC0712.301@stat.wisc.edu>
	<1090259831.3449.54.camel@localhost.localdomain>
	<16636.4903.331794.112493@gargle.gargle.HOWL>
Message-ID: <1090262840.3449.73.camel@localhost.localdomain>

On Mon, 2004-07-19 at 13:29, Martin Maechler wrote:
> >>>>> "Marc" == Marc Schwartz <MSchwartz@medanalytics.com>
> >>>>>     on Mon, 19 Jul 2004 12:57:12 -0500 writes:
> 
>     Marc> On Mon, 2004-07-19 at 12:38, Douglas Bates wrote:
>     >> Marc Schwartz wrote:
>     >> 
>     >> > I am not able to access cvs via rsync today. Is the service down?
>     >> 
>     >> Yes.  We should have sent email about it to r-devel but it has been a 
>     >> hectic several days.
>     >> 
>     >> The bad news is that the newly installed cvs.r-project.org machine, 
>     >> which is also rsync.r-project.org, was compromised and we had to take it 
>     >> off the net.
>     >> 
>     >> The good news is that, thanks to heroic efforts by Martin Maechler and 
>     >> Deepayan Sarkar, the CVS repository has been transformed to Subversion 
>     >> and is available at http://svn.r-project.org/R/ (and at 
>     >> https://svn.r-project.org/R/ but SSL is probably only needed by those 
>     >> doing commits).  If you have a Subversion client (see 
>     >> http://subversion.tigris.org - those using Windows may also want to look 
>     >> at http://tortoiseSVN.tigris.org/) you can check out and update the 
>     >> current r-devel from http://svn.r-project.org/R/trunk/ and the current 
>     >> R-patched from http://svn.r-project.org/R/branches/R-1-9-patches/
>     >> 
> 
>     Marc> Doug,
> 
>     Marc> Thanks and thanks to Martin and Deepayan!
> 
>     Marc> subversion is part of FC2 as is the svn client.
> 
> Thanks, good to know.  It's also part of Debian "testing" and
> newer;  it's *not* part of RH Enterprise though.

subversion 1.0.2 ships with FC2 and subversion 1.0.4 is available via
yum/up2date repository updates. 1.0.5 appears to not have made it to the
FC update sites yet.

There is a security advisory for versions <= 1.0.4 at:

http://subversion.tigris.org/security/CAN-2004-0413-advisory.txt


> Installing it from source, http://subversion.tigris.org/
> is not hard.  The important thing for the R-project though is to
> use  "configure --with-ssl ...."
> because only then you get SSL support, i.e. only then you can use https://...
> which is (currently) absolutely required as I just said in
> another message on this thread.
> 
> 
>     Marc> Presuming that I am using the proper command:
> 
>     Marc> svn co http://svn.r-project.org/R/branches/R-1-9-patches
> 
>     Marc> Is the svn server down or is the command incorrect?
> 
> Use 'https' instead of 'http'.
> This is a requirement for svn.r-project.org/    (on purpose).


Good idea.

Thanks Martin!

Regards,

Marc

From maechler at stat.math.ethz.ch  Mon Jul 19 21:03:17 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon Jul 19 21:03:18 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <85oembg8af.fsf@servant.blindglobe.net>
References: <1090257328.3449.46.camel@localhost.localdomain>
	<40FC0712.301@stat.wisc.edu>
	<85bribhom5.fsf@servant.blindglobe.net>
	<40FC0C63.9080100@statistik.uni-dortmund.de>
	<1090261363.3449.64.camel@localhost.localdomain>
	<85oembg8af.fsf@servant.blindglobe.net>
Message-ID: <16636.6901.345587.69798@gargle.gargle.HOWL>

>>>>> "tony" == A J Rossini <rossini@blindglobe.net>
>>>>>     on Mon, 19 Jul 2004 11:29:28 -0700 writes:

    tony> Marc Schwartz <MSchwartz@MedAnalytics.com> writes:
    >> Uwe,
    >> 
    >> That did it.  Using https: I am now able to do a checkout.
    >> 
    >> It seems to be slow at the moment, but the files are coming through.

    tony> Seems to run comparable to anoncvs.  Also seems to hiccup and barf,
    tony> like anoncvs (infamouse server stalls).  

Note one difference   subversion <-> CVS :

subversion being a 21th century child it rather
optimizes bandwidth over the expense of disk space:

It keeps files 'pristine' and your modification.
I.e. you need more than double the diskspace 
but you can be offline to "diff" files !

Martin

From maechler at stat.math.ethz.ch  Mon Jul 19 21:57:07 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon Jul 19 21:57:13 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <1090261363.3449.64.camel@localhost.localdomain>
References: <1090257328.3449.46.camel@localhost.localdomain>
	<40FC0712.301@stat.wisc.edu>
	<85bribhom5.fsf@servant.blindglobe.net>
	<40FC0C63.9080100@statistik.uni-dortmund.de>
	<1090261363.3449.64.camel@localhost.localdomain>
Message-ID: <16636.10131.427212.263523@gargle.gargle.HOWL>

>>>>> "Marc" == Marc Schwartz <MSchwartz@medanalytics.com>
>>>>>     on Mon, 19 Jul 2004 13:22:43 -0500 writes:

    Marc> Uwe,
    Marc> That did it.  Using https: I am now able to do a checkout.

    Marc> It seems to be slow at the moment, but the files are coming through.
	  ---------------------------------

that should have improved now.

The default apache2 configuration (for RH Enterprise) had
'KeepAlive Off'  which I now have replaced with 'On'.

For this to take effect, I had to restart the server --
this pretty brutally terminates all running svn requests, which
in this case lead to the need for "svnadmin recover"ing the
archive... Well, well, we're getting there eventually.
If anybody has good experiences to share about
Apache performance tweaking, please let me hear.

But note that the idea (of the server setup) really was to serve 
R-core (and maybe ESS-core and maybe some really small few-person
collaboration projects).  If too many people (such as "hundreds
of R-devel readers") are going at the server it will become
pretty unusable, and I will have to make it accessible only
"non-anonymously"  {and find another one doing rsync...} eventually.

Martin Maechler

From rossini at blindglobe.net  Mon Jul 19 22:15:37 2004
From: rossini at blindglobe.net (A.J. Rossini)
Date: Mon Jul 19 22:15:48 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <16636.10131.427212.263523@gargle.gargle.HOWL> (Martin
	Maechler's message of "Mon, 19 Jul 2004 21:57:07 +0200")
References: <1090257328.3449.46.camel@localhost.localdomain>
	<40FC0712.301@stat.wisc.edu> <85bribhom5.fsf@servant.blindglobe.net>
	<40FC0C63.9080100@statistik.uni-dortmund.de>
	<1090261363.3449.64.camel@localhost.localdomain>
	<16636.10131.427212.263523@gargle.gargle.HOWL>
Message-ID: <853c3nvjme.fsf@servant.blindglobe.net>


Looks like it's down again?  (this, after it almost worked a while
back).

I'm glad I'm GNU arch'ing it...

best,
-tony



Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>>> "Marc" == Marc Schwartz <MSchwartz@medanalytics.com>
>>>>>>     on Mon, 19 Jul 2004 13:22:43 -0500 writes:
>
>     Marc> Uwe,
>     Marc> That did it.  Using https: I am now able to do a checkout.
>
>     Marc> It seems to be slow at the moment, but the files are coming through.
> 	  ---------------------------------
>
> that should have improved now.
>
> The default apache2 configuration (for RH Enterprise) had
> 'KeepAlive Off'  which I now have replaced with 'On'.
>
> For this to take effect, I had to restart the server --
> this pretty brutally terminates all running svn requests, which
> in this case lead to the need for "svnadmin recover"ing the
> archive... Well, well, we're getting there eventually.
> If anybody has good experiences to share about
> Apache performance tweaking, please let me hear.
>
> But note that the idea (of the server setup) really was to serve 
> R-core (and maybe ESS-core and maybe some really small few-person
> collaboration projects).  If too many people (such as "hundreds
> of R-devel readers") are going at the server it will become
> pretty unusable, and I will have to make it accessible only
> "non-anonymously"  {and find another one doing rsync...} eventually.
>
> Martin Maechler
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

-- 
Anthony Rossini			    Research Associate Professor
rossini@u.washington.edu            http://www.analytics.washington.edu/ 
Biomedical and Health Informatics   University of Washington
Biostatistics, SCHARP/HVTN          Fred Hutchinson Cancer Research Center
UW (Tu/Th/F): 206-616-7630 FAX=206-543-3461 | Voicemail is unreliable
FHCRC  (M/W): 206-667-7025 FAX=206-667-4812 | use Email

CONFIDENTIALITY NOTICE: This e-mail message and any attachme...{{dropped}}

From MSchwartz at MedAnalytics.com  Mon Jul 19 22:40:17 2004
From: MSchwartz at MedAnalytics.com (Marc Schwartz)
Date: Mon Jul 19 22:40:24 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <16636.10131.427212.263523@gargle.gargle.HOWL>
References: <1090257328.3449.46.camel@localhost.localdomain>
	<40FC0712.301@stat.wisc.edu> <85bribhom5.fsf@servant.blindglobe.net>
	<40FC0C63.9080100@statistik.uni-dortmund.de>
	<1090261363.3449.64.camel@localhost.localdomain>
	<16636.10131.427212.263523@gargle.gargle.HOWL>
Message-ID: <1090269617.3449.114.camel@localhost.localdomain>

On Mon, 2004-07-19 at 14:57, Martin Maechler wrote:
> >>>>> "Marc" == Marc Schwartz <MSchwartz@medanalytics.com>
> >>>>>     on Mon, 19 Jul 2004 13:22:43 -0500 writes:
> 
>     Marc> Uwe,
>     Marc> That did it.  Using https: I am now able to do a checkout.
> 
>     Marc> It seems to be slow at the moment, but the files are coming through.
> 	  ---------------------------------
> 
> that should have improved now.
> 
> The default apache2 configuration (for RH Enterprise) had
> 'KeepAlive Off'  which I now have replaced with 'On'.
> 
> For this to take effect, I had to restart the server --
> this pretty brutally terminates all running svn requests, which
> in this case lead to the need for "svnadmin recover"ing the
> archive... Well, well, we're getting there eventually.
> If anybody has good experiences to share about
> Apache performance tweaking, please let me hear.
> 
> But note that the idea (of the server setup) really was to serve 
> R-core (and maybe ESS-core and maybe some really small few-person
> collaboration projects).  If too many people (such as "hundreds
> of R-devel readers") are going at the server it will become
> pretty unusable, and I will have to make it accessible only
> "non-anonymously"  {and find another one doing rsync...} eventually.
> 
> Martin Maechler


Martin,

To play 'devil's advocate', if you want to limit access for the group(s)
that you have identified above, you may wish to consider having
references to the use of rsync/CVS (now subversion) access removed from
the CRAN Source Code Page (ie. http://cran.r-project.org/sources.html)
and from pages 1 - 2 of the R-admin manual.

The rest of us can always download the daily stable, patched or devel
tarballs periodically, though of course losing the 'incremental
download' functionality by doing so. I am not sure that most of us folks
need to have access to hourly updated source code.

It's a question of being proactive or reactive...

Of course, now that I have stepped face first into it today, it's in the
archives...  ;-)

Best regards,

Marc

From murdoch at stats.uwo.ca  Mon Jul 19 22:40:28 2004
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon Jul 19 22:40:31 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <853c3nvjme.fsf@servant.blindglobe.net>
References: <1090257328.3449.46.camel@localhost.localdomain>
	<40FC0712.301@stat.wisc.edu>
	<85bribhom5.fsf@servant.blindglobe.net>
	<40FC0C63.9080100@statistik.uni-dortmund.de>
	<1090261363.3449.64.camel@localhost.localdomain>
	<16636.10131.427212.263523@gargle.gargle.HOWL>
	<853c3nvjme.fsf@servant.blindglobe.net>
Message-ID: <7bcof0lnid501iacfpqlkm3h30tifmjf16@4ax.com>

On Mon, 19 Jul 2004 13:15:37 -0700, rossini@blindglobe.net (A.J.
Rossini) wrote :

>
>Looks like it's down again?  (this, after it almost worked a while
>back).

Yes, I'm now getting errors when I try an update:

>$ svn update
>svn: PROPFIND request failed on '/R/trunk'
>svn:
>Could not open the requested SVN filesystem

Duncan Murdoch

From jusung at andrew.cmu.edu  Mon Jul 19 23:13:01 2004
From: jusung at andrew.cmu.edu (jusung@andrew.cmu.edu)
Date: Mon Jul 19 23:13:13 2004
Subject: [Rd] Bug in cor() with named array and matrix (PR#7116)
Message-ID: <20040719211301.248C6FBF9@slim.kubism.ku.dk>

Full_Name: Ju-Sung Lee
Version: 1.9.1
OS: Windows XP
Submission from: (NULL) (128.2.79.102)


The following commands causes R to crash:
a = array(1:3)
dimnames(a)[[1]] = c('1','2','3')
cor(a,matrix(1:3))

not naming the array seems to work.

From deepayan at stat.wisc.edu  Tue Jul 20 03:15:55 2004
From: deepayan at stat.wisc.edu (Deepayan Sarkar)
Date: Tue Jul 20 03:16:17 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <16636.6901.345587.69798@gargle.gargle.HOWL>
References: <1090257328.3449.46.camel@localhost.localdomain>
	<85oembg8af.fsf@servant.blindglobe.net>
	<16636.6901.345587.69798@gargle.gargle.HOWL>
Message-ID: <200407192015.55691.deepayan@stat.wisc.edu>

On Monday 19 July 2004 14:03, Martin Maechler wrote:
> Note one difference   subversion <-> CVS :
>
> subversion being a 21th century child it rather
> optimizes bandwidth over the expense of disk space:
>
> It keeps files 'pristine' and your modification.
> I.e. you need more than double the diskspace
> but you can be offline to "diff" files !

And similarly, when committing, only the diff's are sent over the 
network.

Deepayan

From rossini at blindglobe.net  Tue Jul 20 04:17:46 2004
From: rossini at blindglobe.net (A.J. Rossini)
Date: Tue Jul 20 04:18:31 2004
Subject: [Rd] rsync -> cvs down?
In-Reply-To: <200407192015.55691.deepayan@stat.wisc.edu> (Deepayan Sarkar's
	message of "Mon, 19 Jul 2004 20:15:55 -0500")
References: <1090257328.3449.46.camel@localhost.localdomain>
	<85oembg8af.fsf@servant.blindglobe.net>
	<16636.6901.345587.69798@gargle.gargle.HOWL>
	<200407192015.55691.deepayan@stat.wisc.edu>
Message-ID: <854qo3bewl.fsf@servant.blindglobe.net>

Deepayan Sarkar <deepayan@stat.wisc.edu> writes:

> On Monday 19 July 2004 14:03, Martin Maechler wrote:
>> Note one difference   subversion <-> CVS :
>>
>> subversion being a 21th century child it rather
>> optimizes bandwidth over the expense of disk space:
>>
>> It keeps files 'pristine' and your modification.
>> I.e. you need more than double the diskspace
>> but you can be offline to "diff" files !
>
> And similarly, when committing, only the diff's are sent over the 
> network.

Just like all modern revision control systems.  Thankfully, there are
many to choose from.

best,
-tony

-- 
Anthony Rossini			    Research Associate Professor
rossini@u.washington.edu            http://www.analytics.washington.edu/ 
Biomedical and Health Informatics   University of Washington
Biostatistics, SCHARP/HVTN          Fred Hutchinson Cancer Research Center
UW (Tu/Th/F): 206-616-7630 FAX=206-543-3461 | Voicemail is unreliable
FHCRC  (M/W): 206-667-7025 FAX=206-667-4812 | use Email

CONFIDENTIALITY NOTICE: This e-mail message and any attachme...{{dropped}}

From Rob.Hyndman at buseco.monash.edu.au  Tue Jul 20 06:38:36 2004
From: Rob.Hyndman at buseco.monash.edu.au (Rob Hyndman)
Date: Tue Jul 20 06:44:21 2004
Subject: [Rd] Suggestion for quantile.default()
Message-ID: <40FCA1CC.2080509@buseco.monash.edu.au>

I'm not sure who is responsible for quantile(), but I assume they read 
this list. Ivan Frohne and I have produced a revision of the 
quantile.default() function which enables the computation of alternative 
sample quantile definitions. The code and .Rd file are attached.

This enables the user to produce quantiles that are equivalent to those 
in various statistics package. There is a type argument that allows one 
to choose between the various sample quantile methods. type=7 gives 
identical results to the current R function quantile.default(). In our 
revised function, type=8 is the default following the recommendation of 
Hyndman and Fan (American Statistician, 1996).

We suggest the attached function replaces the current quantile.default() 
function in R as it provides additional functionality without increasing 
computation time or affecting ease-of-use. If backwards-compatibility is 
important, we are happy to set type=7 as the default. However, we prefer 
type=8. For moderate to large sample sizes, the difference is negligble.

The code and associated documentation is as close as possible to what 
already exists.

Regards,
Rob Hyndman


__________________________________________________
Professor Rob J Hyndman
Department of Econometrics & Business Statistics
Monash University, VIC 3800, Australia.
http://www-personal.buseco.monash.edu.au/~hyndman/
-------------- next part --------------
quantile.default <- function(x, probs = seq(0, 1, 0.25), na.rm = FALSE,
                           names = TRUE, type = 8, ...)                                                                             
{
    if (na.rm) 
        x <- x[!is.na(x)]
    else if (any(is.na(x)))
        stop("Missing values and NaN's not allowed if `na.rm' is FALSE")
    if (any((p.ok <- !is.na(probs)) & (probs < 0 | probs > 1))) 
        stop("probs outside [0,1]")
    if (na.p <- any(!p.ok)) {
        o.pr <- probs
        probs <- probs[p.ok]
    }
    type <- as.integer(type)   
    if (is.na(type) || (type < 1 | type > 9))
        stop("type outside range [1,9]")
    np <- length(probs)
    n <- length(x)
    if (n > 0 && np > 0) {                              
        if (type <= 3) {
            ## Types 1, 2 and 3 are discontinuous sample qs.
            if (type == 3)
                nppm <- n * probs - .5          # n * probs + m; m = -0.5
            else 
                nppm <- n * probs               # m = 0
            j <- floor(nppm) 
            switch(type,
                        h <- ifelse(nppm > j, 1, 0),        # type 1
                        h <- ifelse(nppm > j, 1, 0.5),      # type 2
                        h <- ifelse((nppm == j) &&
                             ((j %% 2) == 0), 0, 1))        # type 3
        }
        else {
            ## Types 4 through 9 are continuous sample qs.
            switch(type - 3,
                            {a <- 0; b <- 1},               # type 4
                            a <- b <- 0.5,                  # type 5
                            a <- b <- 0,                    # type 6
                            a <- b <- 1,                    # type 7
                            a <- b <- 1 / 3,                # type 8
                            a <- b <- 3 / 8)                # type 9
            nppm <- a + probs * (n + 1 - a - b) # n*probs + m
            j <- floor(nppm)                    # m = a + probs*(1 - a - b)
            h <- nppm - j 
        }
        x <- sort(x, partial = unique(c(1,j[j>0 & j<=n],(j+1)[j>0 & j<n],n)))
        x <- c(x[1], x[1], x, x[n], x[n])
        qs <- (1 - h) * x[j + 2] + h * x[j + 3]
    }
    else {
        qs <- rep(as.numeric(NA), np)
    }
    if (names && np > 0) {
        dig <- max(2, getOption("digits"))
        names(qs) <- paste(if (np < 100) 
            formatC(100 * probs, format = "fg", wid = 1, digits = dig)
        else format(100 * probs, trim = TRUE, digits = dig), 
            "%", sep = "")
    }
    if (na.p) {
        o.pr[p.ok] <- qs
        names(o.pr) <- rep("", length(o.pr))
        names(o.pr)[p.ok] <- names(qs)
        o.pr
    }
    else qs
}
-------------- next part --------------
\name{quantile}
\title{Sample Quantiles}
\alias{quantile}
\alias{quantile.default}
\description{
    The generic function \code{quantile} produces sample quantiles corresponding to the
    given probabilities. The smallest observation corresponds to a probability of
    0 and the largest to a probability of 1.
}
\usage{
quantile(x, \dots)

\method{quantile}{default}(x, probs = seq(0, 1, 0.25), na.rm = FALSE,
         names = TRUE, type = 8, ...)
}
\arguments{
    \item{x}{numeric vector whose sample quantiles are wanted.}
    \item{probs}{numeric vector of probabilities with values in \eqn{[0,1]}{[0,1]}.}
    \item{na.rm}{logical; if \code{TRUE} any \code{NA} or \code{NaN}
        is removed from \code{x} before the quantiles are computed.  If
        \code{FALSE} the presence of \code{NA} or \code{NaN} in \code{x}
        aborts the function.}
    \item{names}{logical; if \code{TRUE}, the result has a \code{\link[base]{names}} attribute.
    Set to FALSE for efficiency when \code{probs} is long.}
    \item{type}{an integer between 1 and 9 selecting one of the
         nine quantile algorithms detailed below to be used.}
    \item{\dots}{further arguments passed to or from other methods}
}
\value{
A vector of the same length as \code{probs} is returned;
if \code{names = TRUE}, it has a \code{\link[base]{names}} attribute.

\code{\link[base]{NA}} and \code{\link[base]{NaN}} values in \code{probs} are propagated to the result.
}
\details{
\code{quantile} returns estimates of underlying distribution quantiles
based on one or two order statistics from the supplied elements in \code{x} at
probabilities in \code{probs}.  One of the nine quantile algorithms discussed in
Hyndman and Fan (1996), selected by \code{type}, is employed.

Sample quantiles of type \eqn{i} are defined by
\deqn{Q_{i}(p) = (1 - \gamma)x_{j} + \gamma x_{j+1}}{Q[i](p) = (1 - gamma) x[j] + gamma x[j+1],} where
\eqn{1 \le i \le 9}{1 <= i <= 9}, \eqn{  }
\eqn{\frac{j - m}{n} \le p < \frac{j - m + 1}{n}}{(j - m) / n <= p < (j - m + 1) / n}, \eqn{  }
\eqn{x_{j}}{x[j]} is the \eqn{j}th order statistic,
\eqn{n} is the sample size, and \eqn{m} is a constant determined by
the sample quantile type.
Here \eqn{\gamma}{gamma} depends on
\eqn{j = \lfloor np + m\rfloor}{j = floor(np + m),} and
\eqn{g = np + m - j.}

For the continuous sample quantile types (4 through 9), the sample quantiles can be obtained
by linear interpolation between the \eqn{k}th order statistic and \eqn{p(k)}:
\deqn{p(k) = \frac{k - \alpha} {n - \alpha - \beta + 1}}{p(k) = (k - alpha) / (n - alpha - beta + 1),}
where \eqn{\alpha}{alpha} and \eqn{\beta}{beta} are constants determined by the type.
Further,
\eqn{m = \alpha + p \left( 1 - \alpha - \beta \right)}{m = alpha + p(1 - alpha - beta),}
and \eqn{\gamma = g = np + m - j}{gamma = g = np + m - j.}


            \strong{Discontinuous sample quantile types 1, 2, and 3}

\describe{
\item{Type 1}{Inverse of empirical distribution function.}
\item{Type 2}{Similar to type 1 but with averaging at discontinuities.}
\item{Type 3}{SAS definition: nearest even order statistic.}
}


            \strong{Continuous sample quantile types 4 through 9}

\describe{
\item{Type 4}{\eqn{p(k) = \frac{k}{n}}{p(k) = k / n}.
    That is, linear interpolation of the empirical cdf.}

\item{Type 5}{\eqn{p(k) = \frac{k - 0.5}{n}}{p(k) = (k - 0.5) / n}.
    That is a piecewise linear function where the knots are the values
    midway through the steps of the empirical cdf. This is popular amongst hydrologists.}

\item{Type 6}{\eqn{p(k) = \frac{k}{n + 1}}{p(k) = k / (n + 1)}.
    Thus \eqn{p(k) = \mbox{E}[F(x_{k})]}{p(k) = E[F(x[k])]}. This is used by Minitab and by SPSS.}

\item{Type 7}{\eqn{p(k) = \frac{k - 1}{n - 1}}{p(k) = (k - 1) / (n - 1)}.
    In this case, \eqn{p(k) = \mbox{mode}[F(x_{k})]}{p(k) = mode[F(x[k])]}. This is used by S-Plus.}

\item{Type 8}{\eqn{p(k) = \frac{k - \frac{1}{3}}{n + \frac{1}{3}}}{p(k) = (k - 1/3) / (n + 1/3)}.
    Then \eqn{p(k) \approx \mbox{median}[F(x_{k})]}{p(k) =~ median[F(x[k])]}.
    The resulting quantile estimates are approximately median-unbiased regardless of the
    distribution of \code{x}.}

\item{Type 9}{\eqn{p(k) = \frac{k - \frac{3}{8}}{n + \frac{1}{4}}}{p(k) = (k - 3/8) / (n + 1/4)}.
    The resulting quantile estimates are approximately unbiased if \code{x} is normally distributed.}
}

Hyndman and Fan (1996) recommend type 8 which is the default method for this function.
}
\references{
Hyndman, R. J. and Fan, Y. (1996) Sample quantiles in
statistical packages, \emph{American Statistician}, \bold{50}, 361-365.
}
\seealso{
\code{\link[stats]{ecdf}} for empirical distributions of which quantile is
the \dQuote{inverse}; \code{\link[graphics]{boxplot.stats}} and \code{\link[stats]{fivenum}}
for computing \dQuote{versions} of quartiles, etc.
}
\examples{
quantile(x <- rnorm(1001))# Extremes & Quartiles by default

### Compare different methods
p <- c(0.1,0.5,1,2,5,10,50)/100
quantile(x,  p, type=1)
quantile(x,  p, type=2)
quantile(x,  p, type=3)
quantile(x,  p, type=4)
quantile(x,  p, type=5)
quantile(x,  p, type=6)
quantile(x,  p, type=7)
quantile(x,  p, type=8)
quantile(x,  p, type=9)
}
\keyword{univar}
\author{Ivan Frohne and Rob J Hyndman}
From roman.pahl at web.de  Tue Jul 20 13:25:10 2004
From: roman.pahl at web.de (roman.pahl@web.de)
Date: Tue Jul 20 13:25:14 2004
Subject: [Rd] some problems building a package using R CMD CHECK (PR#7118)
Message-ID: <20040720112510.120D6108B6@slim.kubism.ku.dk>

hello,

my name is Roman Pahl and recently i tried to build a package under Windows.
I created the skeleton and did alle the documentation stuff.

As i wanted to check it using the 'R CMD CHECK pkgname' command in the Dos-=
console some errors appeared.
I don=B4t know how to handle.
Here are important parts of the log: I marked my questions with a "<-------=
---"

D:\tools\R\rw1090>R CMD CHECK --no-latex GroupSeqPack
* using log directory 'D:/tools/R/rw1090/GroupSeqPack.Rcheck'
* checking for file 'GroupSeqPack/DESCRIPTION' ... OK
* checking if this is a source package ... OK

installing R.css in D:/tools/R/rw1090/GroupSeqPack.Rcheck


---------- Making package GroupSeqPack ------------
  adding build stamp to DESCRIPTION
  installing R files
  installing man source files
  installing indices
There were 18 warnings (use warnings() to see them)                        =
           <------------------------------------------ i tried "warnings()"=
 but that command does not seem to exist
  installing help
 >>> Building/Updating help pages for package 'GroupSeqPack'
     Formats: text html latex example
  alphaByUseFunction                text    html    latex   example
  ....
  ........some more functions..........
  .....
  useSpendingFunction               text    html    latex   example
 >>> Building/Updating help pages for package 'GroupSeqPack'
     Formats: chm
hhc: not found                                                             =
                            <-------------------------------------------- w=
hat is "hhc" for?
cp: cannot stat `D:/tools/R/rw1090/GroupSeqPack/chm/GroupSeqPack.chm': No s=
uch f <-------------------------  maybe this follows cause of missing hhc
ile or directory
make[1]: *** [chm-GroupSeqPack] Error 1                                    =
              <----------------------------------------  and this ones also=
 following mistakes=20
make: *** [pkg-GroupSeqPack] Error 2                                       =
                <----------------------------------------=20=20
*** Installation of GroupSeqPack failed ***


* checking package directory ... OK
* checking for portable file names ... OK
* checking DESCRIPTION meta-information ... OK
* checking package dependencies ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for syntax errors ... OK
* checking R files for library.dynam ... OK
* checking S3 generic/method consistency ... OK
* checking for replacement functions with final arg not named 'value' ... OK
* checking foreign function calls ... OK
* checking Rd files ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* creating GroupSeqPack-Ex.R ... OK
* checking examples ... OK


thanks for your efforts,
sincerly
Roman Pahl
	[[alternative HTML version deleted]]

From murdoch at stats.uwo.ca  Tue Jul 20 14:00:42 2004
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue Jul 20 14:00:46 2004
Subject: [Rd] some problems building a package using R CMD CHECK (PR#7118)
In-Reply-To: <20040720112510.120D6108B6@slim.kubism.ku.dk>
References: <20040720112510.120D6108B6@slim.kubism.ku.dk>
Message-ID: <0a2qf0pihn2a13n9et0uc20trts3l7sccn@4ax.com>

First off, this is not a bug, and should not be reported to r-bugs.
Second, the email address you used bounces.  Please use a real one, or
make it clear that what you used is not real.

On Tue, 20 Jul 2004 13:25:10 +0200 (CEST), roman.pahl@web.de wrote:

>---------- Making package GroupSeqPack ------------
>  adding build stamp to DESCRIPTION
>  installing R files
>  installing man source files
>  installing indices
>There were 18 warnings (use warnings() to see them)                        =
>           <------------------------------------------ i tried "warnings()"=
> but that command does not seem to exist

warnings() is an R command.  You should try to track this down, but
it's not urgent:  solve the other problems first.

>  installing help
> >>> Building/Updating help pages for package 'GroupSeqPack'
>     Formats: text html latex example
>  alphaByUseFunction                text    html    latex   example
>  ....
>  ........some more functions..........
>  .....
>  useSpendingFunction               text    html    latex   example
> >>> Building/Updating help pages for package 'GroupSeqPack'
>     Formats: chm
>hhc: not found                                                             =
>                            <-------------------------------------------- w=
>hat is "hhc" for?

hhc is the Microsoft help compiler.  It is needed if you want to use
CHMHELP, but you should be able to a package without it.  You'll need
to modify the MkRules file in src/gnuwin32, setting WINHELP = NO.

readme.packages gives instructions on getting the help compiler.

Duncan Murdoch

From simon.urbanek at math.uni-augsburg.de  Tue Jul 20 14:21:22 2004
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Tue Jul 20 14:21:24 2004
Subject: [Rd] some problems building a package using R CMD CHECK
In-Reply-To: <20040720112510.120D6108B6@slim.kubism.ku.dk>
References: <20040720112510.120D6108B6@slim.kubism.ku.dk>
Message-ID: <4FCCD0CE-DA47-11D8-B0CB-000A959F327E@math.uni-augsburg.de>

On Jul 20, 2004, at 1:25 PM, roman.pahl@web.de wrote:

> hhc: not found                                                          
>     =
>                              
> <-------------------------------------------- w=
> hat is "hhc" for?

from the INSTALL file:

   If you want to make compiled html (.chm) files you will need the
   Microsoft HTML Help Workshop, currently available for download at
    
http://msdn.microsoft.com/library/en-us/htmlhelp/html/ 
hwmicrosofthtmlhelpdownloads.asp
   and http://www.microsoft.com/office/ork/xp/appndx/appa06.htm

That's the hhc. Further reading in the INSTALL:

   You need the following in your path (with the first two first):
   .
   our toolset
   mingw\bin
   Perl\bin
   the latex bin directory
   zip.exe, unzip.exe, hhc.exe

And, please, this is not a bug in R, so don't post it in R-bugs!

Cheers,
Simon

---
Simon Urbanek
Department of computer oriented statistics and data analysis
Universit?tsstr. 14
86135 Augsburg
Germany

Tel: +49-821-598-2236
Fax: +49-821-598-2280

Simon.Urbanek@Math.Uni-Augsburg.de
http://simon.urbanek.info

From simon.urbanek at math.uni-augsburg.de  Tue Jul 20 14:44:28 2004
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Tue Jul 20 14:44:30 2004
Subject: [Rd] libz>=1.2.1 requirement - necessary?
Message-ID: <8A2452FD-DA4A-11D8-B0CB-000A959F327E@math.uni-augsburg.de>

I the course of cleaning up the build for OS X I wondered why R 
requires zlib 1.2.1+. Is there any specific reason for that? OS X comes 
with zlib 1.1.4, so I wonder if using the system library has any 
drawbacks... (it worked for me, but..). I found nothing in the 
archives, but maybe someone remembers?

Cheers,
Simon

From maechler at stat.math.ethz.ch  Tue Jul 20 15:51:21 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue Jul 20 15:51:30 2004
Subject: [Rd] Bug in cor() with named array and matrix (PR#7116)
Message-ID: <20040720135121.7F807108B6@slim.kubism.ku.dk>

>>>>> "jusung" == jusung  <jusung@andrew.cmu.edu>
>>>>>     on Mon, 19 Jul 2004 23:13:01 +0200 (CEST) writes:

    jusung> Full_Name: Ju-Sung Lee
    jusung> Version: 1.9.1
    jusung> OS: Windows XP
    jusung> Submission from: (NULL) (128.2.79.102)


    jusung> The following commands causes R to crash:
    jusung> a = array(1:3)
    jusung> dimnames(a)[[1]] = c('1','2','3')
    jusung> cor(a,matrix(1:3))

    jusung> not naming the array seems to work.

yes, indeed.  
Thank you for the good bug report.

A shorter version is
   cor(as.array(c(a=1, b=2)), cbind(1:2))

The internals assume to have either a matrix or a vector when
the other argument is a matrix.

I'm still thinking about where to fix the bug, in C or in R.
What I find is that R also excepts list()s as arguments to
cor(), cov(), etc. which I think should rather give an error, 
IMO.

Martin Maechler

From sandy at stat.umn.edu  Tue Jul 20 15:54:49 2004
From: sandy at stat.umn.edu (sandy@stat.umn.edu)
Date: Tue Jul 20 15:54:51 2004
Subject: [Rd] Accuracy in summary (PR#7121)
Message-ID: <20040720135449.A5D8F108B3@slim.kubism.ku.dk>

Full_Name: Sanford Weisberg
Version: 1.9.1
OS: Win XP
Submission from: (NULL) (160.94.148.2)


> wm <- read.table(url("http://www.stat.umn.edu/~sandy/wmdata0.txt"),
header=TRUE)
> mean(wm$Spd1)
[1] 7.7773
> summary(wm$Spd1)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  0.222   4.780   7.550   7.780  10.200  21.600 

The mean of this variable DOES NOT ROUND to the value shown in the summary
output. 

> options(digits=6)
> mean(wm$Spd1)
[1] 7.77733
> summary(wm$Spd1)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  0.222   4.780   7.550   7.780  10.200  21.600

This is still wrong.  Also, the minimum value is 0.2221, which should have been
printed in full given digits=6.

From murdoch at stats.uwo.ca  Tue Jul 20 16:13:30 2004
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue Jul 20 16:13:35 2004
Subject: [Rd] Accuracy in summary (PR#7121)
Message-ID: <20040720141330.A5686108BA@slim.kubism.ku.dk>

On Tue, 20 Jul 2004 15:54:49 +0200 (CEST), sandy@stat.umn.edu wrote :

>Full_Name: Sanford Weisberg
>Version: 1.9.1
>OS: Win XP
>Submission from: (NULL) (160.94.148.2)
>
>
>> wm <- read.table(url("http://www.stat.umn.edu/~sandy/wmdata0.txt"),
>header=TRUE)
>> mean(wm$Spd1)
>[1] 7.7773
>> summary(wm$Spd1)
>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
>  0.222   4.780   7.550   7.780  10.200  21.600 
>
>The mean of this variable DOES NOT ROUND to the value shown in the summary
>output. 

This is not a bug. summary.default() is behaving as documented.  You
asked (by default) for 3 significant figures, and that's what you got.

>
>> options(digits=6)
>> mean(wm$Spd1)
>[1] 7.77733
>> summary(wm$Spd1)
>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
>  0.222   4.780   7.550   7.780  10.200  21.600
>
>This is still wrong.  Also, the minimum value is 0.2221, which should have been
>printed in full given digits=6.

No, see the man page.

Duncan Murdoch

From Passwort at alma-mater.de  Tue Jul 20 18:12:23 2004
From: Passwort at alma-mater.de (alma mater AG)
Date: Tue Jul 20 18:12:53 2004
Subject: [Rd] =?utf-8?q?Empfangsbest=EF=BF=BDtigung?=
References: <ESSLINGEN02z5b6KZmc0000000c@esslingen02.alma-mater.de>
Message-ID: <200407201812230161.729058C1@192.168.0.29>

### automatisch generierte EMail ###

Hallo,

Ihre Email ist bei unserem automatischen Dienst eingegangen.

Bitte beachten Sie, dass diese EMail von keiner Person gelesen wird,
sondern ausschliesslich von unsererm
"Roboter" bearbeitet wird.
Daher ist es besonders wichtig, dass Sie ausschliesslich die bei uns
eingetragene EMail-Adresse als 
Absende-Adresse verwenden.

Sollten Sie vergessen haben welche Adresse sie bei uns eingetragen haben,
so schauen Sie in die EMail die wir Ihnen 
zuschicken.

From kundenservice at alma-mater.de  Tue Jul 20 18:12:37 2004
From: kundenservice at alma-mater.de (Kundenservice alma mater AG)
Date: Tue Jul 20 18:30:44 2004
Subject: [Rd] Benutzer nicht gefunden (Passwort)
Message-ID: <00a201c46e74$5fa38470$6f00a8c0@almamater.de>

Automatisch generierte Meldung !
################################


Hallo,


leider wurde die von Ihnen verwendete EMail-Adresse 'r-devel@r-project.org' in 
unseren Datenbanken (Bewerber/Firmen-Ansprechpartner) nicht gefunden. 

Ihre Userdaten k?nnen Sie auch ?ber unsere Homepage www.alma-mater.de unter 
Hilfe/Passwort direkt abfragen.

Bitte verwenden Sie als Absendeadresse die EMail-Adresse, die Sie bei uns in die 
Datenbank eingetragen haben. ?ber diese EMail-Adresse wird Ihr Account bei uns gesucht 
und verifiziert. 

Da es sich um einen vollautomatischen Dienst handelt, hat eine Angabe von anderen 
EMail-Adressen oder zus?tzlichen Hinweisen an dieser Stelle keinen Sinn.

Sollten Sie diese EMail-Adresse nicht benutzen k?nnen oder haben Sie andere Probleme, dann 
kontaktieren Sie bitte unseren Kundenservice unter: Kundenservice@alma-mater.de oder rufen
Sie uns an:

Mo-Fr von 08:00-20:00 Uhr, +49 (711) 549971-31


Mit freundlichem Gru?

Ihr alma mater Team


###############################################################
(Achtung: Diese Mail wurde automatisch generiert! Bei Problemen 
wenden Sie sich bitte an Kundenservice@alma-mater.de)
M?glichkeiten f?r automatische Dienste ?ber EMail bei alma-mater.de:

Austragen: 		Austragen@alma-mater.de
Keine weitere EMail:	NoEMail@alma-mater.de
Passwort vergessen:	Passwort@alma-mater.de
Allg. Gesch?ftsbed.:	AGB@alma-mater.de

From maechler at stat.math.ethz.ch  Tue Jul 20 19:40:01 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue Jul 20 19:40:02 2004
Subject: [Rd] R daily snapshots - available again
Message-ID: <16637.22769.432826.521466@gargle.gargle.HOWL>

The daily snapshot "diff" (which produces "R-patched" from "R-release"),
 R-release.diff.gz

as hyperlinked on CRAN's main page 

and the ones on http://stat.ethz.ch/CRAN/sources.html

    * Gzipped and bzipped tar files are available by anonymous
      FTP from ftp://ftp.stat.math.ethz.ch/Software/R

are now updated again (and current) as of this evening.

---

What's not there yet is the correct date in the
 <toplevel>/date-stamp
file.  You may do this manually or wait another day or two
 before this will be automated as well.

Martin Maechler

From brahm at alum.mit.edu  Wed Jul 21 01:36:16 2004
From: brahm at alum.mit.edu (David Brahm)
Date: Wed Jul 21 01:36:34 2004
Subject: [Rd] as.matrix.data.frame() warning for POSIXt columns
Message-ID: <16637.44144.896582.143029@arbres1a.fmr.com>

as.matrix.data.frame() issues a spurious warning for POSIXt columns in R-1.9.1:

R> x <- data.frame(date=as.POSIXct("2004-07-20"))
R> as.matrix(x)
     date        
   1 "2004-07-20"
   Warning message: longer object length is not a multiple of shorter
   object length in: cl == c("Date", "POSIXct", "POSIXlt") 

This bug also affects write.table(x), which uses as.matrix.data.frame(x).  It
arises because the function is comparing the column class, which is a vector of
length 2, to a vector of possible values of length 3, using == instead of %in%.

It was discussed in R-help on May 24,2004 by Don MacQueen <macq@llnl.gov> and
Brian Ripley <ripley@stats.ox.ac.uk>, where Brian Ripley said:
  BDR> The Warning is wrong, though, and will be fixed. 
but it is still there as of R-patched_2004-07-20.

The following patch to R-1.9.1/src/library/base/R/dataframe.R ought to do it:
agate> diff dataframe.R dataframe.new.R 
1044c1044
<              any(cl == c("Date", "POSIXct", "POSIXlt"))))
---
>              any(cl %in% c("Date", "POSIXct", "POSIXlt"))))

-- 
                              -- David Brahm (brahm@alum.mit.edu)

From maechler at stat.math.ethz.ch  Wed Jul 21 11:51:25 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed Jul 21 11:51:27 2004
Subject: [Rd] as.matrix.data.frame() warning for POSIXt columns
In-Reply-To: <16637.44144.896582.143029@arbres1a.fmr.com>
References: <16637.44144.896582.143029@arbres1a.fmr.com>
Message-ID: <16638.15517.608307.32313@gargle.gargle.HOWL>

Thank you David,

the report and the patch look perfectly valid to me
and I will commit a patch shortly {Brian is still traveling
currently}.

Martin

From spencer.graves at pdf.com  Wed Jul 21 14:47:01 2004
From: spencer.graves at pdf.com (Spencer Graves)
Date: Wed Jul 21 14:46:49 2004
Subject: [Rd] vector documentation error?
Message-ID: <40FE65C5.1070708@pdf.com>

      The help file for "vector" in R 1.9.1 for Windows includes the 
following: 

     x <- c(a = 1, b = 2)
     is.vector(x)
     as.vector(x)
     all.equal(x, as.vector(x)) ## FALSE

      I ran this just now and got TRUE. 

      Should I bother to report such things?  If yes, to whom? 

      Thanks for all your hard work to make R a reality.  It makes it so 
much easier to develop new statistical methods for almost any purpose 
and through that to contribute to building a better world for all. 

      Sincerely, Spencer Graves

p.s.  Please excuse if I'm sending this to the wrong address.  I went to 
www.r-project.org -> Mailing Lists and double clicked on an apparent hot 
link to "r-bugs" and got nothing (in Netscape 7.1 under Windows 2000).  
Therefore, I decided to send this to r-devel.

From andy_liaw at merck.com  Wed Jul 21 15:39:29 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Wed Jul 21 15:40:11 2004
Subject: [Rd] RE: [Rcom-l] rcom 0.97 available for download
Message-ID: <3A822319EB35174CA3714066D590DCD504AF80BD@usrymx25.merck.com>

> From: Thomas Baier
> 
> > I am confused as to what I need and must do.
> > 
> > Your message said
> > ftp://cran.r-project.org/pub/R/src/contrib/Devel/rcom_0.97.tar.gz
> > 
> > The DESCRIPTION file inside that download says
> > Package: rcom
> > Version: 0.95
> > Date: 2004-07-14
> 
> That's too bad. Sorry for that.
> 
> Nevertheless, what you can download here is the source 
> package. I guess
> some kind soul (Duncan maybe...) will prepare a binary 
> package for easy installation.

I believe it's Uwe that's been providing the Windows binaries for packages.
 
[The reason for cc to R-devel:]

Would it make sense to have platform specific packages in a separate area on
CRAN?  I don't know of anything other than Windows that understand COM.
Having the source for rcom in the general area seems a bit strange to me.
The install.packages() function on windows will only handle pre-compiled
packages, so I don't really see much point in having the source for rcom in
the general contrib area...  Just my $0.02...

Best,
Andy

From edd at debian.org  Wed Jul 21 16:18:46 2004
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed Jul 21 16:18:59 2004
Subject: [Rd] RE: [Rcom-l] rcom 0.97 available for download
In-Reply-To: <3A822319EB35174CA3714066D590DCD504AF80BD@usrymx25.merck.com>
References: <3A822319EB35174CA3714066D590DCD504AF80BD@usrymx25.merck.com>
Message-ID: <20040721141846.GA23293@sonny.eddelbuettel.com>

On Wed, Jul 21, 2004 at 09:39:29AM -0400, Liaw, Andy wrote:
> Would it make sense to have platform specific packages in a separate area on
> CRAN?  I don't know of anything other than Windows that understand COM.

Yup, and 'core' CRAN contains at least one Windows-only package: rbugs [ as
I found when working on a script to automagically build Debian packages from
CPAN packages, the script is a modified version of Albrecht's script ]

So apart from moving arch-specific packages into their own little corners [
bad, balkanization ] we could extend the Description file and flag the
architecture restriction there.

> Having the source for rcom in the general area seems a bit strange to me.

Well there is the rbugs precedent.

I may of course be missing something here, still haven't had the required
caffeine dosage for the day ...

Dirk

-- 
Those are my principles, and if you don't like them... well, I have others.
                                                -- Groucho Marx

From baier at ci.tuwien.ac.at  Wed Jul 21 16:29:14 2004
From: baier at ci.tuwien.ac.at (Thomas Baier)
Date: Wed Jul 21 16:29:23 2004
Subject: [Rd] RE: [Rcom-l] rcom 0.97 available for download
In-Reply-To: <20040721141846.GA23293@sonny.eddelbuettel.com>
Message-ID: <200407211429.i6LETEA1022180@elendil.ci.tuwien.ac.at>

> On Wed, Jul 21, 2004 at 09:39:29AM -0400, Liaw, Andy wrote:
> > Would it make sense to have platform specific packages in a separate area on
> > CRAN?  I don't know of anything other than Windows that understand COM.
> 
> Yup, and 'core' CRAN contains at least one Windows-only package: rbugs [ as
> I found when working on a script to automagically build Debian packages from
> CPAN packages, the script is a modified version of Albrecht's script ]
> 
> So apart from moving arch-specific packages into their own little corners [
> bad, balkanization ] we could extend the Description file and flag the
> architecture restriction there.

That sounds reasonable to me. At the moment, there's just a configure
script in rcom issuing an error on non-windows platforms. (thanks to kh
for this.)

Thomas

From ligges at statistik.uni-dortmund.de  Wed Jul 21 16:40:46 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed Jul 21 16:39:56 2004
Subject: [Rd] RE: [Rcom-l] rcom 0.97 available for download
In-Reply-To: <20040721141846.GA23293@sonny.eddelbuettel.com>
References: <3A822319EB35174CA3714066D590DCD504AF80BD@usrymx25.merck.com>
	<20040721141846.GA23293@sonny.eddelbuettel.com>
Message-ID: <40FE806E.8070809@statistik.uni-dortmund.de>

Dirk Eddelbuettel wrote:

> On Wed, Jul 21, 2004 at 09:39:29AM -0400, Liaw, Andy wrote:
> 
>>Would it make sense to have platform specific packages in a separate area on
>>CRAN?  I don't know of anything other than Windows that understand COM.

The question is: What exactly is platform-specific?


> Yup, and 'core' CRAN contains at least one Windows-only package: rbugs [ as
> I found when working on a script to automagically build Debian packages from
> CPAN packages, the script is a modified version of Albrecht's script ]

The author told me that rbugs is intended to work with WinBUGS under 
wine on a linux system  (whereas I'm pretty sure R2WinBUGS is capable - 
at least with minimal modification - to do it as well).


> So apart from moving arch-specific packages into their own little corners [
> bad, balkanization ] we could extend the Description file and flag the
> architecture restriction there.
> 
> 
>>Having the source for rcom in the general area seems a bit strange to me.
> 
> 
> Well there is the rbugs precedent.


If you say rbugs is platform specific, then also R2WinBUGS, mimR and 
probably others as well.

Also note that maintainer(s) of binary packages will have a lot of work 
to merge the different repositories.

Where's the point not to have just this one source repository related to 
platform dependency?

Uwe


> I may of course be missing something here, still haven't had the required
> caffeine dosage for the day ...
> 
> Dirk
>

From edd at debian.org  Wed Jul 21 16:49:24 2004
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed Jul 21 16:49:30 2004
Subject: [Rd] RE: [Rcom-l] rcom 0.97 available for download
In-Reply-To: <40FE806E.8070809@statistik.uni-dortmund.de>
References: <3A822319EB35174CA3714066D590DCD504AF80BD@usrymx25.merck.com>
	<20040721141846.GA23293@sonny.eddelbuettel.com>
	<40FE806E.8070809@statistik.uni-dortmund.de>
Message-ID: <20040721144924.GA23942@sonny.eddelbuettel.com>


On Wed, Jul 21, 2004 at 04:40:46PM +0200, Uwe Ligges wrote:
> Dirk Eddelbuettel wrote:
> 
> >On Wed, Jul 21, 2004 at 09:39:29AM -0400, Liaw, Andy wrote:
> >
> >>Would it make sense to have platform specific packages in a separate area 
> >>on
> >>CRAN?  I don't know of anything other than Windows that understand COM.
> 
> The question is: What exactly is platform-specific?

Platform-specific means what it says -- works only on a given platform (or
maybe a few).  Or are trying to pull a Clinton here: "it depends was your
meaning of platform is" ? :)

> >Yup, and 'core' CRAN contains at least one Windows-only package: rbugs [ as
> >I found when working on a script to automagically build Debian packages 
> >from
> >CPAN packages, the script is a modified version of Albrecht's script ]
> 
> The author told me that rbugs is intended to work with WinBUGS under 
> wine on a linux system  (whereas I'm pretty sure R2WinBUGS is capable - 

Think about it, what does 'run under wine' mean?  Do you get it: it ain't no
native package when it needs an emulator.

Saying it runs under Linux using wine is like claiming your car just turned
into a boat. While it will float once driven into the river, I presume it
won't float for very long ...

> Where's the point not to have just this one source repository related to 
> platform dependency?

Precisely. Let's have one source repo but _let us label any and all binary
restrictions_ more clearly so that I for one can skip over stuff that may
build for you [ Windoze ] but won't for me [ Linux, preferable on all all
ten to twelve hardware platforms supported by Debian for packages that get
uploaded ].  

Does that make sense? Would it improve over what we currently have?

Dirk


-- 
Those are my principles, and if you don't like them... well, I have others.
                                                -- Groucho Marx

From ligges at statistik.uni-dortmund.de  Wed Jul 21 17:07:17 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed Jul 21 17:06:26 2004
Subject: [Rd] RE: [Rcom-l] rcom 0.97 available for download
In-Reply-To: <20040721144924.GA23942@sonny.eddelbuettel.com>
References: <3A822319EB35174CA3714066D590DCD504AF80BD@usrymx25.merck.com>
	<20040721141846.GA23293@sonny.eddelbuettel.com>
	<40FE806E.8070809@statistik.uni-dortmund.de>
	<20040721144924.GA23942@sonny.eddelbuettel.com>
Message-ID: <40FE86A5.40907@statistik.uni-dortmund.de>

Dirk Eddelbuettel wrote:
> On Wed, Jul 21, 2004 at 04:40:46PM +0200, Uwe Ligges wrote:
> 
>>Dirk Eddelbuettel wrote:
>>
>>
>>>On Wed, Jul 21, 2004 at 09:39:29AM -0400, Liaw, Andy wrote:
>>>
>>>
>>>>Would it make sense to have platform specific packages in a separate area 
>>>>on
>>>>CRAN?  I don't know of anything other than Windows that understand COM.
>>
>>The question is: What exactly is platform-specific?
> 
> 
> Platform-specific means what it says -- works only on a given platform (or
> maybe a few).  Or are trying to pull a Clinton here: "it depends was your
> meaning of platform is" ? :)
> 
> 
>>>Yup, and 'core' CRAN contains at least one Windows-only package: rbugs [ as
>>>I found when working on a script to automagically build Debian packages 
>>>from
>>>CPAN packages, the script is a modified version of Albrecht's script ]
>>
>>The author told me that rbugs is intended to work with WinBUGS under 
>>wine on a linux system  (whereas I'm pretty sure R2WinBUGS is capable - 
> 
> 
> Think about it, what does 'run under wine' mean?  Do you get it: it ain't no
> native package when it needs an emulator.
> 
> Saying it runs under Linux using wine is like claiming your car just turned
> into a boat. While it will float once driven into the river, I presume it
> won't float for very long ...


I mean WinBUGS runs under Wine and is somehow controlled from rbugs in R 
running in native mode under Linux. Hence the package is not 
platform-specific.


>>Where's the point not to have just this one source repository related to 
>>platform dependency?
> 
> 
> Precisely. Let's have one source repo but _let us label any and all binary
> restrictions_ more clearly so that I for one can skip over stuff that may
> build for you [ Windoze ] but won't for me [ Linux, preferable on all all
> ten to twelve hardware platforms supported by Debian for packages that get
> uploaded ].  
> 
> Does that make sense? Would it improve over what we currently have?

Yes. I agree. But we have to invent something like the dependency field 
in the current DESCRIPTION file. Then the question is how to distinguish 
between different platforms. Is a distiction "windows"/"unix"/"mac" 
sufficient? Probably not (something that runs under Windows XP and does 
not under Windows NT, someting that runs under Linux but not under 
Solaris or AIX, ......... and then there is cygwin .....)

Is it really worth the effort to invent something for 
platform-dependence-management for those few packages?
Note that R CMD INSTALL, R CMD check, CRAN scripts, scripts from 
repository maintainers etc. all need to be changed.

At least I can live with the fact that R CMD check results in an error 
on any unsupported platform.

Uwe



> Dirk
> 
>

From ramasamy at cancer.org.uk  Wed Jul 21 17:06:58 2004
From: ramasamy at cancer.org.uk (Adaikalavan Ramasamy)
Date: Wed Jul 21 17:06:47 2004
Subject: [Rd] rank() with decreasing argument - feature request
Message-ID: <1090422417.3012.26.camel@localhost.localdomain>

I like to request that the an argument/option to rank numbers in
decreasing order, i.e. largest number first, be added to rank().
Currently I am using the following construct, which can get a bit
cumbersome at time.

> rank.decreasing <- function(x) length(x) + 1 - rank(x)
> x <- c(101, 103, 102)
> rank(x)
[1] 1 3 2
> rank.decreasing(x)
[1] 3 1 2

I hope this is not an unreasonable request considering sort() and
order() have decreasing option. Thank you.

Regards, Adai

From jgentry at jimmy.harvard.edu  Wed Jul 21 16:57:44 2004
From: jgentry at jimmy.harvard.edu (Jeff Gentry)
Date: Wed Jul 21 17:06:48 2004
Subject: [Rd] RE: [Rcom-l] rcom 0.97 available for download
In-Reply-To: <20040721144924.GA23942@sonny.eddelbuettel.com>
Message-ID: <Pine.SOL.4.20.0407211056210.1942-100000@jaws.dfci.harvard.edu>

On Wed, 21 Jul 2004, Dirk Eddelbuettel wrote:
> Precisely. Let's have one source repo but _let us label any and all binary
> restrictions_ more clearly so that I for one can skip over stuff that may
> build for you [ Windoze ] but won't for me [ Linux, preferable on all all
> ten to twelve hardware platforms supported by Debian for packages that get
> uploaded ].  

While there's no automated checking of the field, there is the
SystemRequirements field in the DESCRIPTION file which is intended for
dependencies which are not R packages.  I have only seen it used for
external libraries and the like but this would seem to be a place where
one could specify any particular platform requirements as well.

-J

From maechler at stat.math.ethz.ch  Wed Jul 21 17:08:37 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed Jul 21 17:08:38 2004
Subject: [Rd] all.equal(,
	) not considering names [was "vector documentation error?"]
In-Reply-To: <40FE65C5.1070708@pdf.com>
References: <40FE65C5.1070708@pdf.com>
Message-ID: <16638.34549.228605.464549@gargle.gargle.HOWL>

>>>>> "Spencer" == Spencer Graves <spencer.graves@pdf.com>
>>>>>     on Wed, 21 Jul 2004 05:47:01 -0700 writes:

    Spencer> The help file for "vector" in R 1.9.1 for Windows includes the 
    Spencer> following: 

    Spencer> x <- c(a = 1, b = 2)
    Spencer> is.vector(x)
    Spencer> as.vector(x)
    Spencer> all.equal(x, as.vector(x)) ## FALSE

    Spencer> I ran this just now and got TRUE. 

yes, I get this as well {R-patched on Linux}.

I'm sure that it never returned FALSE, since  all.equal()
doesn't ever.   However it *did* give non TRUE
in R versions up to 1.6.2 :

  > x <- c(a=1,b=2); all.equal(x, as.vector(x))
  [1] "names for target but not for current" "TRUE" 

and it does give something similar in the our S-plus 6.1 version.

Our documentation does nowhere specify what should happen
exactly in this case, but I do doubt that the current behavior
is correct.
What do other (long time S language) users think?


    Spencer> Should I bother to report such things?  

yes, please, in any case!

    Spencer> If yes, to whom? 

As long as you have a "?" going with it, it's not something you
should report as bug. 
In that case, you decide between R-help or R-devel
and the posting guide has a paragraph on this.
I think you decided very well for the current topic.

<....>


    Spencer> p.s.  Please excuse if I'm sending this to the
    Spencer> wrong address.  I went to www.r-project.org ->
    Spencer> Mailing Lists and double clicked on an apparent hot
    Spencer> link to "r-bugs" and got nothing <....>

Well, R-bugs is *not* a mailing list.  You'll find its address
in other places such as the R-FAQ or
help(bug.report).

    Spencer> Therefore, I decided to send this to r-devel.

The "therefore" wasn't quite correct IMO, but your conclusion
anyway ;-)

From ligges at statistik.uni-dortmund.de  Wed Jul 21 17:12:37 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed Jul 21 17:11:46 2004
Subject: [Rd] vector documentation error?
In-Reply-To: <40FE65C5.1070708@pdf.com>
References: <40FE65C5.1070708@pdf.com>
Message-ID: <40FE87E5.2040903@statistik.uni-dortmund.de>

Spencer Graves wrote:

>      The help file for "vector" in R 1.9.1 for Windows includes the 
> following:
>     x <- c(a = 1, b = 2)
>     is.vector(x)
>     as.vector(x)
>     all.equal(x, as.vector(x)) ## FALSE

That's a documentation bug (still there in R-devel from yesterday).
I guess the author of the help page meant

    identical(x, as.vector(x)) ## FALSE

Uwe



>      I ran this just now and got TRUE.
>      Should I bother to report such things?  If yes, to whom?
>      Thanks for all your hard work to make R a reality.  It makes it so 
> much easier to develop new statistical methods for almost any purpose 
> and through that to contribute to building a better world for all.
>      Sincerely, Spencer Graves
> 
> p.s.  Please excuse if I'm sending this to the wrong address.  I went to 
> www.r-project.org -> Mailing Lists and double clicked on an apparent hot 
> link to "r-bugs" and got nothing (in Netscape 7.1 under Windows 2000).  
> Therefore, I decided to send this to r-devel.
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From ligges at statistik.uni-dortmund.de  Wed Jul 21 17:18:07 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed Jul 21 17:17:17 2004
Subject: [Rd] vector documentation error?
In-Reply-To: <40FE65C5.1070708@pdf.com>
References: <40FE65C5.1070708@pdf.com>
Message-ID: <40FE892F.5070507@statistik.uni-dortmund.de>

Spencer Graves wrote:

>      The help file for "vector" in R 1.9.1 for Windows includes the 
> following:
>     x <- c(a = 1, b = 2)
>     is.vector(x)
>     as.vector(x)
>     all.equal(x, as.vector(x)) ## FALSE
> 
>      I ran this just now and got TRUE.
>      Should I bother to report such things?  If yes, to whom?
>      Thanks for all your hard work to make R a reality.  It makes it so 
> much easier to develop new statistical methods for almost any purpose 
> and through that to contribute to building a better world for all.
>      Sincerely, Spencer Graves
> 
> p.s.  Please excuse if I'm sending this to the wrong address.  I went to 
> www.r-project.org -> Mailing Lists and double clicked on an apparent hot 
> link to "r-bugs" and got nothing (in Netscape 7.1 under Windows 2000).  
> Therefore, I decided to send this to r-devel.


Whoops. Haven't read your message completely.

The DNS entry for bugs.r-project.org seems to be broken.

A working address is:
http://r-bugs.biostat.ku.dk/cgi-bin/R

Uwe Ligges



> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From maechler at stat.math.ethz.ch  Wed Jul 21 17:18:38 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed Jul 21 17:18:40 2004
Subject: [Rd] RE: [Rcom-l] rcom 0.97 available for download
In-Reply-To: <20040721144924.GA23942@sonny.eddelbuettel.com>
References: <3A822319EB35174CA3714066D590DCD504AF80BD@usrymx25.merck.com>
	<20040721141846.GA23293@sonny.eddelbuettel.com>
	<40FE806E.8070809@statistik.uni-dortmund.de>
	<20040721144924.GA23942@sonny.eddelbuettel.com>
Message-ID: <16638.35150.431900.884105@gargle.gargle.HOWL>

>>>>> "Dirk" == Dirk Eddelbuettel <edd@debian.org>
>>>>>     on Wed, 21 Jul 2004 09:49:24 -0500 writes:

    Dirk> On Wed, Jul 21, 2004 at 04:40:46PM +0200, Uwe Ligges wrote:
    >> Dirk Eddelbuettel wrote:
    >> 
    >> >On Wed, Jul 21, 2004 at 09:39:29AM -0400, Liaw, Andy wrote:
    >> >
    >> >>Would it make sense to have platform specific packages in a separate area 
    >> >>on
    >> >>CRAN?  I don't know of anything other than Windows that understand COM.
    >> 
    >> The question is: What exactly is platform-specific?

    Dirk> Platform-specific means what it says -- works only on
    Dirk> a given platform (or maybe a few).  Or are trying to
    Dirk> pull a Clinton here: "it depends was your meaning of
    Dirk> platform is" ? :)

    >> >Yup, and 'core' CRAN contains at least one Windows-only
    >> >package: rbugs [ as I found when working on a script to
    >> >automagically build Debian packages from CPAN packages,
    >> >the script is a modified version of Albrecht's script ]
    >> 
    >> The author told me that rbugs is intended to work with WinBUGS under 
    >> wine on a linux system  (whereas I'm pretty sure R2WinBUGS is capable - 

    Dirk> Think about it, what does 'run under wine' mean?  Do
    Dirk> you get it: it ain't no native package when it needs
    Dirk> an emulator.

    Dirk> Saying it runs under Linux using wine is like claiming
    Dirk> your car just turned into a boat. While it will float
    Dirk> once driven into the river, I presume it won't float
    Dirk> for very long ...

    >> Where's the point not to have just this one source repository related to 
    >> platform dependency?

    Dirk> Precisely. Let's have one source repo but _let us
    Dirk> label any and all binary restrictions_ more clearly so
    Dirk> that I for one can skip over stuff that may build for
    Dirk> you [ Windoze ] but won't for me [ Linux, preferable
    Dirk> on all all ten to twelve hardware platforms supported
    Dirk> by Debian for packages that get uploaded ].

    Dirk> Does that make sense? Would it improve over what we currently have?

Yes (2x).

I'd prefer to keep those packages in one place and rather mark
them than to move them to specific directories.

E.g., Dirk's proposal will also work when a package only works,
in IBM AIX and in Windows.

Martin

From spencer.graves at pdf.com  Wed Jul 21 17:25:43 2004
From: spencer.graves at pdf.com (Spencer Graves)
Date: Wed Jul 21 17:25:34 2004
Subject: [Rd] Re: all.equal(,
 ) not considering names [was "vector documentation error?"]
In-Reply-To: <16638.34549.228605.464549@gargle.gargle.HOWL>
References: <40FE65C5.1070708@pdf.com>
	<16638.34549.228605.464549@gargle.gargle.HOWL>
Message-ID: <40FE8AF7.8060304@pdf.com>

The following is what I got from S-Plus 6.2 under Windows 2000: 

 > x <- c(a = 1, b = 2)
 > is.vector(x)
[1] F
 > as.vector(x)
[1] 1 2
 > all.equal(x, as.vector(x))
[1] "target, current classes differ: named : 
integer"                                                   
[2] "class of target is \"named\", class of current is \"integer\" 
(coercing target to class of current)"

      Thanks, Martin and all of the core R team for their exceptional 
contribution to this marvelous software.  I think it provides a great 
liberating force to all research that includes the development of new 
statistical algorithms by making it so much easier for others to modify 
and extend something that previous researchers have developed. 

      Best Wishes,
      spencer graves

Martin Maechler wrote:

>>>>>>"Spencer" == Spencer Graves <spencer.graves@pdf.com>
>>>>>>    on Wed, 21 Jul 2004 05:47:01 -0700 writes:
>>>>>>            
>>>>>>
>
>    Spencer> The help file for "vector" in R 1.9.1 for Windows includes the 
>    Spencer> following: 
>
>    Spencer> x <- c(a = 1, b = 2)
>    Spencer> is.vector(x)
>    Spencer> as.vector(x)
>    Spencer> all.equal(x, as.vector(x)) ## FALSE
>
>    Spencer> I ran this just now and got TRUE. 
>
>yes, I get this as well {R-patched on Linux}.
>
>I'm sure that it never returned FALSE, since  all.equal()
>doesn't ever.   However it *did* give non TRUE
>in R versions up to 1.6.2 :
>
>  > x <- c(a=1,b=2); all.equal(x, as.vector(x))
>  [1] "names for target but not for current" "TRUE" 
>
>and it does give something similar in the our S-plus 6.1 version.
>
>Our documentation does nowhere specify what should happen
>exactly in this case, but I do doubt that the current behavior
>is correct.
>What do other (long time S language) users think?
>
>
>    Spencer> Should I bother to report such things?  
>
>yes, please, in any case!
>
>    Spencer> If yes, to whom? 
>
>As long as you have a "?" going with it, it's not something you
>should report as bug. 
>In that case, you decide between R-help or R-devel
>and the posting guide has a paragraph on this.
>I think you decided very well for the current topic.
>
><....>
>
>
>    Spencer> p.s.  Please excuse if I'm sending this to the
>    Spencer> wrong address.  I went to www.r-project.org ->
>    Spencer> Mailing Lists and double clicked on an apparent hot
>    Spencer> link to "r-bugs" and got nothing <....>
>
>Well, R-bugs is *not* a mailing list.  You'll find its address
>in other places such as the R-FAQ or
>help(bug.report).
>
>    Spencer> Therefore, I decided to send this to r-devel.
>
>The "therefore" wasn't quite correct IMO, but your conclusion
>anyway ;-)
>
>
>  
>

From ggrothendieck at myway.com  Wed Jul 21 18:08:19 2004
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Wed Jul 21 18:09:23 2004
Subject: [Rd] rank() with decreasing argument - feature request
References: <1090422417.3012.26.camel@localhost.localdomain>
Message-ID: <loom.20040721T180340-170@post.gmane.org>

Adaikalavan Ramasamy <ramasamy <at> cancer.org.uk> writes:

> 
> I like to request that the an argument/option to rank numbers in
> decreasing order, i.e. largest number first, be added to rank().
> Currently I am using the following construct, which can get a bit
> cumbersome at time.
> 
> > rank.decreasing <- function(x) length(x) + 1 - rank(x)
> > x <- c(101, 103, 102)
> > rank(x)
> [1] 1 3 2
> > rank.decreasing(x)
> [1] 3 1 2


If your data is numeric then 

   rank(-x)

would be a bit shorter.  I agree, however, that it would be nice to support 

   decreasing = TRUE 

as an arg to rank, not only for the above reason but also for consistency 
with order which already supports such an argument.

From kwright at eskimo.com  Wed Jul 21 18:25:54 2004
From: kwright at eskimo.com (Kevin Wright)
Date: Wed Jul 21 18:26:14 2004
Subject: [Rd] Wanted: sort.data.frame
Message-ID: <200407211625.JAA14448@eskimo.com>

I've often wanted a function for sorting a data frame by multiple columns.
I know it's not too hard to do using the order function, but given the
frequency of questions about this on R-help, it would seem to me the task
could be simplified.

d = data.frame(x=c("A","D","A","C"),y=c(8,3,9,9),z=c(1,1,1,1))

My first attempt was something like
sort.data.frame(d, by=c(x,y))
which immediately failed since x is not an object.

I then decided something like this would be better
sort.data.frame(d, ~ x -y +z)
where + indicates ascending and - indicates descending.  
This ordering of the arguments seems natural to me, but in order to
be consistent with other functions that have formulae it would 
probably be better to use sort.data.frame(formula, data).

I spent an hour or so working on this and then admitted that manipulating
R formlas is not one of my stronger skills.  (I would have use a loop, and
then use substitute and eval(parse(text=...)) and would be embarassed
for anyone to see it.)

My personal feeling is that this function would be quite helpful and 
reduce
the frequency of sort questions on R-help.

This might be a nice, modest programming challenge for R gurus.

All contributors with such a function would have my respect.  

Kevin Wright

From rossini at blindglobe.net  Wed Jul 21 19:09:40 2004
From: rossini at blindglobe.net (A.J. Rossini)
Date: Wed Jul 21 19:09:45 2004
Subject: [Rd] RE: [Rcom-l] rcom 0.97 available for download
In-Reply-To: <40FE86A5.40907@statistik.uni-dortmund.de> (Uwe Ligges's
	message of "Wed, 21 Jul 2004 17:07:17 +0200")
References: <3A822319EB35174CA3714066D590DCD504AF80BD@usrymx25.merck.com>
	<20040721141846.GA23293@sonny.eddelbuettel.com>
	<40FE806E.8070809@statistik.uni-dortmund.de>
	<20040721144924.GA23942@sonny.eddelbuettel.com>
	<40FE86A5.40907@statistik.uni-dortmund.de>
Message-ID: <85n01ts2wb.fsf@servant.blindglobe.net>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> I mean WinBUGS runs under Wine and is somehow controlled from rbugs in
> R running in native mode under Linux. Hence the package is not
> platform-specific.

Is this true?  I've used WinBUGS under Wine (granted, not for a few
years, but it was adequate back then) and I'm not sure how you'd do
process communication with it (other than via explicit or scriptde
load/unload of files).

best,
-tony

-- 
Anthony Rossini			    Research Associate Professor
rossini@u.washington.edu            http://www.analytics.washington.edu/ 
Biomedical and Health Informatics   University of Washington
Biostatistics, SCHARP/HVTN          Fred Hutchinson Cancer Research Center
UW (Tu/Th/F): 206-616-7630 FAX=206-543-3461 | Voicemail is unreliable
FHCRC  (M/W): 206-667-7025 FAX=206-667-4812 | use Email

CONFIDENTIALITY NOTICE: This e-mail message and any attachme...{{dropped}}

From cberry at tajo.ucsd.edu  Wed Jul 21 19:37:55 2004
From: cberry at tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Wed Jul 21 19:38:04 2004
Subject: [Rd] loglin( tab, margin, start = bad.start ) kills R (PR#7123)
Message-ID: <20040721173755.11747FC0D@slim.kubism.ku.dk>



> tab <- array( sample(3^5), rep(3,5) )
> loglin( tab, list(1,2,3,4,5) )[[1]] # AOK
2 iterations: deviation 5.456968e-12 
[1] 10909.89
> loglin( tab, list(1,2,3,4,5), c(1,2,3) )[[1]] # OUCH!

Process R bus error at Wed Jul 21 17:03:55 2004


this is inconsistent - sometimes issuing this msg several times before 
barfing:

Error in switch(z$ifault, stop("This should not happen"), stop("This 
should not happen"),  : 
	Incorrect specification of 'table' or 'start'


appl/loglin.c assumes that start (aka 'fit') has enough memory allocated.

Possible fix in stats/R/loglin.R :

    	ntab <- length(table)
+	nstart <- length( start )
+	if (nstart != ntab ) stop(" start and table must be same length " )




> version
         _                      
platform sparc-unknown-linux-gnu
arch     sparc                  
os       linux-gnu              
system   sparc, linux-gnu       
status                          
major    1                      
minor    9.0                    
year     2004                   
month    04                     
day      12                     
language R          

and with windows 98 rw1091.exe version, I get the popup for illegal 
operation. Again, I sometimes get the above error msg first.

Chuck


Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0717

From stoffer at pitt.edu  Thu Jul 22 00:47:37 2004
From: stoffer at pitt.edu (stoffer@pitt.edu)
Date: Thu Jul 22 00:47:47 2004
Subject: [Rd] spec.pgram (PR#7124)
Message-ID: <20040721224737.C0DAFFBF9@slim.kubism.ku.dk>

Full_Name: david stoffer
Version: 1.9.0
OS: win xp pro
Submission from: (NULL) (67.165.78.88)


spec.pgram is supposed to plot the periodogram values in dB, i.e., 10log10(.).
the value on the graph look ok, but the y-axis, plotted on dB scale NEVER shows
negative values. in other words,  all values are shown as positive.

From johnm at comanche.anu.edu.au  Thu Jul 22 02:11:14 2004
From: johnm at comanche.anu.edu.au (johnm@comanche.anu.edu.au)
Date: Thu Jul 22 02:11:23 2004
Subject: [Rd] lme4 (PR#7125)
Message-ID: <20040722001114.2E5EFFC29@slim.kubism.ku.dk>


<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = powerpc-apple-darwin6.8
 arch = powerpc
 os = darwin6.8
 system = powerpc, darwin6.8
 status = 
 major = 1
 minor = 9.1
 year = 2004
 month = 06
 day = 21
 language = R

Search Path:
 .GlobalEnv, package:lme4, package:Matrix, package:DAAG, package:methods, package:stats, package:graphics, package:utils, Autoloads, package:base

From adriano at techoffix.org  Thu Jul 22 05:22:51 2004
From: adriano at techoffix.org (adriano@techoffix.org)
Date: Thu Jul 22 05:22:54 2004
Subject: [Rd] Bug: wrong R-squared in lm formula w/o intercept (PR#7127)
Message-ID: <20040722032251.D94A4FC29@slim.kubism.ku.dk>

Full_Name: Adriano Azevedo Filho
Version: 1.9.1
OS: Windows, Linux
Submission from: (NULL) (200.171.246.212)


R-squared and Adjusted R-squared appear to be wrong when 
the formula in lm() is specified without intercept. Problem
present in both Windows and Linux 1.9.1 version. Also
in the 1.8.1 version for Windows (other versions not 
checked).
Possible example which reproduces the problem:
x<-1:10
y<-c(2,4,3,4,6,9,10,12,15,13)
summary(lm(y~x)) # with intercept, result is OK
#Residual standard error: 1.329 on 8 degrees of freedom
#Multiple R-Squared: 0.9262,     Adjusted R-squared: 0.917
summary(lm(y~x-1)) # without intercept, 
#Residual standard error: 1.26 on 9 degrees of freedom
#Multiple R-Squared: 0.9821,     Adjusted R-squared: 0.9802
#>>>> Not possible to have a R-squared larger in the restricted
#>>>> model (forced without intercept)

From deepayan at stat.wisc.edu  Thu Jul 22 05:15:23 2004
From: deepayan at stat.wisc.edu (Deepayan Sarkar)
Date: Thu Jul 22 06:15:44 2004
Subject: [Rd] Bug: wrong R-squared in lm formula w/o intercept (PR#7127)
In-Reply-To: <20040722032251.D94A4FC29@slim.kubism.ku.dk>
References: <20040722032251.D94A4FC29@slim.kubism.ku.dk>
Message-ID: <200407212215.23047.deepayan@stat.wisc.edu>


On Wednesday 21 July 2004 22:22, adriano@techoffix.org wrote:
> Full_Name: Adriano Azevedo Filho
> Version: 1.9.1
> OS: Windows, Linux
> Submission from: (NULL) (200.171.246.212)
>
>
> R-squared and Adjusted R-squared appear to be wrong when
> the formula in lm() is specified without intercept. Problem
> present in both Windows and Linux 1.9.1 version. Also
> in the 1.8.1 version for Windows (other versions not
> checked).
> Possible example which reproduces the problem:
> x<-1:10
> y<-c(2,4,3,4,6,9,10,12,15,13)
> summary(lm(y~x)) # with intercept, result is OK
> #Residual standard error: 1.329 on 8 degrees of freedom
> #Multiple R-Squared: 0.9262,     Adjusted R-squared: 0.917
> summary(lm(y~x-1)) # without intercept,
> #Residual standard error: 1.26 on 9 degrees of freedom
> #Multiple R-Squared: 0.9821,     Adjusted R-squared: 0.9802
> #>>>> Not possible to have a R-squared larger in the restricted
> #>>>> model (forced without intercept)

Didn't it seem a bit odd to you that there would be such a fundamental 
bug in something so basic in such a widely used statistical software? 
Perhaps you should have considered the other possibility (that you are 
interpreting the R-Squared incorrectly) and posted this on r-help 
rather than filing it as a bug. Please read the paragraph titled 
"Surprising behavior and bugs" in the posting guide.

R^2 is a measure of how much of the variability in the response is 
explained by a model compared to a baseline model. Normally, the 
baseline model is taken to be the model with an intercept and nothing 
else. However, this doesn't make sense when the fitted model doesn't 
have an intercept, because the model with intercept only is not a 
submodel. In other words, the R^2 for the two models you have fit are 
calculated with different baseline models, and hence are not 
comparable.

Deepayan

From ligges at statistik.uni-dortmund.de  Thu Jul 22 08:55:55 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu Jul 22 08:56:00 2004
Subject: [Rd] spec.pgram (PR#7124)
Message-ID: <20040722065555.A214EF32C@slim.kubism.ku.dk>

stoffer@pitt.edu wrote:

> Full_Name: david stoffer
> Version: 1.9.0
> OS: win xp pro
> Submission from: (NULL) (67.165.78.88)
> 

This is not a bug.

Please read the R FAQ and the posting guide 
(http://www.r-project.org/posting-guide.html) re. what a bug is and how 
to report bugs.

Please check against a recent version of R when reporting bugs (at least 
R-1.9.1, or R-patched or R-devel).


> spec.pgram is supposed to plot the periodogram values in dB, i.e., 10log10(.).

No! It is supposed to do what is documented.

?spec.pgram tells us that plot.spec() does the plotting. And ?plot.spec 
tells us that "conventional log scale" is used as the default.
You can explicitly set the argument  log="dB"  in order to apply the 
10*log10() transformation.


Uwe Ligges


> the value on the graph look ok, but the y-axis, plotted on dB scale NEVER shows
> negative values. in other words,  all values are shown as positive.
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From john.maindonald at anu.edu.au  Thu Jul 22 13:19:48 2004
From: john.maindonald at anu.edu.au (John Maindonald)
Date: Thu Jul 22 13:19:54 2004
Subject: [Rd] lme4 (PR#7125)
In-Reply-To: <200407221008.i6MA7spA013486@hypatia.math.ethz.ch>
References: <200407221008.i6MA7spA013486@hypatia.math.ethz.ch>
Message-ID: <0B295E16-DBD1-11D8-8920-000A95CDA0F2@anu.edu.au>

This was sent by mistake, in the course of trying to generate platform 
information to send directly to Stefanos, Deepayan and Doug.  My 
apologies.

John Maindonald             email: john.maindonald@anu.edu.au
phone : +61 2 (6125)3473    fax  : +61 2(6125)5549
Centre for Bioinformation Science, Room 1194,
John Dedman Mathematical Sciences Building (Building 27)
Australian National University, Canberra ACT 0200.

From bates at stat.wisc.edu  Thu Jul 22 14:47:11 2004
From: bates at stat.wisc.edu (Douglas Bates)
Date: Thu Jul 22 14:43:14 2004
Subject: [Rd] Discussion of the GPL on Groklaw
Message-ID: <40FFB74F.1080206@stat.wisc.edu>

I'm not looking to start a discussion of the GPL on R-devel; I'm just 
giving a reference because the subject of the GPL, the license under 
which R is issued, has been brought up on this list.

If you want to follow some of the legal discussion of the Free Software 
Foundation's General Public License (GPL), the web site groklaw.net is 
required reading.  One reason is because Pamela Jones (PJ as she is 
known there), the primary author, writes so well.  Even if I didn't 
agree with her opinions I would enjoy her writing.

Recently a lawyer wrote an article for LinuxInsider criticizing the GPL. 
  PJ rebuts the article in 
http://www.groklaw.net/article.php?story=2004072110004290

One thing to realize about legal discussions of the GPL is that the 
whole concept is so foreign to the typical corporate lawyer that they 
frequently misconstrue it, as you will see in PJ's comments about the 
article.  Also, some proprietary software companies have taken to 
spreading FUD (Fear, Uncertainty, and Doubt) about the GPL and many 
people take such material at face value.

From MSchwartz at MedAnalytics.com  Thu Jul 22 15:18:13 2004
From: MSchwartz at MedAnalytics.com (Marc Schwartz)
Date: Thu Jul 22 15:18:20 2004
Subject: [Rd] Discussion of the GPL on Groklaw
In-Reply-To: <40FFB74F.1080206@stat.wisc.edu>
References: <40FFB74F.1080206@stat.wisc.edu>
Message-ID: <1090502293.9010.19.camel@localhost.localdomain>

On Thu, 2004-07-22 at 07:47, Douglas Bates wrote:
> I'm not looking to start a discussion of the GPL on R-devel; I'm just 
> giving a reference because the subject of the GPL, the license under 
> which R is issued, has been brought up on this list.
> 
> If you want to follow some of the legal discussion of the Free Software 
> Foundation's General Public License (GPL), the web site groklaw.net is 
> required reading.  One reason is because Pamela Jones (PJ as she is 
> known there), the primary author, writes so well.  Even if I didn't 
> agree with her opinions I would enjoy her writing.
> 
> Recently a lawyer wrote an article for LinuxInsider criticizing the GPL. 
>   PJ rebuts the article in 
> http://www.groklaw.net/article.php?story=2004072110004290
> 
> One thing to realize about legal discussions of the GPL is that the 
> whole concept is so foreign to the typical corporate lawyer that they 
> frequently misconstrue it, as you will see in PJ's comments about the 
> article.  Also, some proprietary software companies have taken to 
> spreading FUD (Fear, Uncertainty, and Doubt) about the GPL and many 
> people take such material at face value.


If I may tack on to Doug's post, a somewhat related FYI.

For those interested in a multi-faceted dissertation on Open Source,
there is a relatively new (April 2004) book available from Harvard
University Press.

The book is:

The Success of Open Source
by Steven Weber
ISBN 0-674-01292-5
http://www.hup.harvard.edu/catalog/WEBSUC.html

Weber is a Professor of Political Science at UC Berkeley and provides an
interesting insight into the history, technical, political, social,
organizational and business/legal perspectives of the Open Source
community.

I recently picked it up at our local Barnes and Noble, though I have not
yet finished it due to distractions (otherwise known as work). I have so
far found it to be a fairly balanced presentation with respect to
evangelism and pragmatism and his perspectives on some of the
personalities well known in the community. It is also interesting to get
a sense of the background and history on the evolution of the various
licensing schemes (ie. GPL, BSD, etc.), addressing both the convergence
and divergence of philosophy over time.

I note that it is on back order at the moment from the publisher, but it
is available via Amazon.com at
http://www.amazon.com/exec/obidos/tg/detail/-/0674012925 and presumably
other outlets as well.

HTH,

Marc Schwartz

From ripley at stats.ox.ac.uk  Thu Jul 22 18:15:20 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Jul 22 18:15:23 2004
Subject: [Rd] R-devel now uses lazy loading
Message-ID: <Pine.LNX.4.44.0407221709570.14084-100000@gannet.stats>

The R-devel version of R now uses lazy loading, in which objects in a 
package are initially stored in a database and replaced by a promise.  
This makes R much faster to start up (40% of the previous time) and it 
will (usually) use a smaller footprint.

Given the loss of the CVS archive whilst I was away the merging has had to 
be done manually and so a lot of checking of a CVS branch has been lost.
You will almost certainly need to do make clean if updating an existing 
build.

Packages can be installed to use lazy loading by INSTALL --lazy.  This is 
not yet the default, but it will become so in due course, so please test 
your package(s) with lazy loading before submission to CRAN.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From listserv-request at territorial.fr  Fri Jul 23 16:46:00 2004
From: listserv-request at territorial.fr (listserv-request@territorial.fr)
Date: Fri Jul 23 16:46:02 2004
Subject: [Rd] Votre message pour lettreinfo-ame a ete rejete (PR#7129)
Message-ID: <20040723144600.78121EAC6@slim.kubism.ku.dk>

Votre message pour la liste lettreinfo-ame a ?t? rejet?.
Le message vous est donc renvoy?.

Votre message :
Received: from territorial.fr (root@[172.16.1.207])
	by hermes.eolas-services.com (8.11.6/8.11.6) with ESMTP id i6NEj4l30648
	for <lettreinfo-ame@territorial.fr>; Fri, 23 Jul 2004 16:45:08 +0200
Message-Id: <200407231445.i6NEj4l30648@hermes.eolas-services.com>
From: r-bugs@r-project.org
To: lettreinfo-ame@territorial.fr
Subject: 
Date: Thu, 3 Jun 2004 16:45:06 +0200
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0016----=_NextPart_000_0016"
X-Priority: 3
X-MSMail-Priority: Normal

This is a multi-part message in MIME format.

------=_NextPart_000_0016----=_NextPart_000_0016
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

------------------  Message d'alerte virale

Found virus WORM_NETSKY.P in file details_lettreinfo-ame.doc                                                                   .pif
The uncleanable file details_lettreinfo-ame.doc                                                                   .pif is moved to /etc/iscan/virus/virMUmtqb.

---------------------------------------------------------

------=_NextPart_000_0016----=_NextPart_000_0016
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: 7bit



+++ Attachment: No Virus found
+++ Bitdefender AntiVirus - www.bitdefender.com


------=_NextPart_000_0016----=_NextPart_000_0016
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


------------------  Message d'alerte virale

details_lettreinfo-ame.doc                                                                   .pif is removed from here because it contains a virus.

---------------------------------------------------------
------=_NextPart_000_0016----=_NextPart_000_0016--

From tplate at blackmesacapital.com  Fri Jul 23 16:45:59 2004
From: tplate at blackmesacapital.com (Tony Plate)
Date: Fri Jul 23 16:46:11 2004
Subject: [Rd] all.equal(, ) not considering names [was "vector
	documentation error?"]
In-Reply-To: <16638.34549.228605.464549@gargle.gargle.HOWL>
References: <40FE65C5.1070708@pdf.com>
	<16638.34549.228605.464549@gargle.gargle.HOWL>
Message-ID: <6.1.0.6.2.20040721112303.0446d180@mailhost.blackmesacapital.com>

At Wednesday 09:08 AM 7/21/2004, Martin Maechler wrote:
> >>>>> "Spencer" == Spencer Graves <spencer.graves@pdf.com>
> >>>>>     on Wed, 21 Jul 2004 05:47:01 -0700 writes:
>
>     Spencer> The help file for "vector" in R 1.9.1 for Windows includes the
>     Spencer> following:
>
>     Spencer> x <- c(a = 1, b = 2)
>     Spencer> is.vector(x)
>     Spencer> as.vector(x)
>     Spencer> all.equal(x, as.vector(x)) ## FALSE
>
>     Spencer> I ran this just now and got TRUE.
>
>yes, I get this as well {R-patched on Linux}.
>
>I'm sure that it never returned FALSE, since  all.equal()
>doesn't ever.   However it *did* give non TRUE
>in R versions up to 1.6.2 :
>
>   > x <- c(a=1,b=2); all.equal(x, as.vector(x))
>   [1] "names for target but not for current" "TRUE"
>
>and it does give something similar in the our S-plus 6.1 version.
>
>Our documentation does nowhere specify what should happen
>exactly in this case, but I do doubt that the current behavior
>is correct.
>What do other (long time S language) users think?

Sometimes I want one thing, sometime the other.  What I generally do when I 
need a test for equivalence is construct one, by trial and error, that 
works for the situation at hand, since the documentation for these types of 
things in various implementations of the S-language tends to be not 
comprehensive.  So, above all, I don't want the behavior to change.

The current behavior in R seems to vaguely follow the spirit of the 
documentation for all.equal, which emphasizes approximation in numeric 
comparisons, and ignores the issues of names (which is just what the 
current implementation of the function does too).  It might be nice to have 
an argument ignore.names that is passed down recursively, but that would 
probably be difficult to add since all.equal is a generic function.

I'd argue for the documentation being updated to reflect the current 
behavior (i.e., ignore names).

-- Tony Plate

From rmh at temple.edu  Sun Jul 25 09:52:50 2004
From: rmh at temple.edu (rmh@temple.edu)
Date: Sun Jul 25 09:52:53 2004
Subject: [Rd] bug and a proposed fix for model.tables. (PR#7132)
Message-ID: <20040725075250.4A9A2F58D@slim.kubism.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################


Here is a bug and a proposed fix for model.tables.
I can't fully test the fix because I haven't figured out how
to make my function take precedence over the one inside the namespace.

Rich

##############################################################
## bug fix for R 1.9.1 and earlier
## donated to The R Foundation for Statistical Computing by HH
## See cc135.s for an example.
## model.tables(a1c, type="means") doesn't work because one of the columns
## of prjs is all 0, hence removed by the calling function model.tables.aov.

## assign("make.tables.aovproj", envir=environment("make.tables.aovproj"),
make.tables.aovproj <-
function (proj.cols, mf.cols, prjs, mf,
          fun = "mean", prt = FALSE, ...)
{
    tables <- vector(mode = "list", length = length(proj.cols))
    names(tables) <- names(proj.cols)
    for (i in seq(length(tables))) {
        terms <- proj.cols[[i]]
        terms <- terms[match(terms, dimnames(prjs)[[2]], 0)]  ## new line
        data <- if (length(terms) == 1) 
            prjs[, terms]
        else prjs[, terms] %*% as.matrix(rep.int(1, length(terms)))
        tables[[i]] <- tapply(data, mf[mf.cols[[i]]], get(fun, 
            mode = "function"))
        class(tables[[i]]) <- "mtable"
        if (prt) 
            print(tables[i], ..., quote = FALSE)
    }
    tables
}
## )
## <environment: namespace:stats>
##############################################################




##############################################################


tmp <- data.frame(y=rnorm(8),
                  aa=factor(c(1,1,1,1,2,2,2,2)),
                  bb=factor(c(1,1,2,2,1,1,2,2)),
                  cc=factor(c(1,2,3,4,1,2,3,4)))

tmp.aov <- aov(y ~ cc + bb/aa, data=tmp)
anova(tmp.aov)
model.tables(tmp.aov)                ## this works correctly
model.tables(tmp.aov, type="means")  ## bug in make.tables.aovproj

attr(terms(y ~ cc + bb/aa), "term.labels")  ## "bb" is present
dimnames(proj(tmp.aov))[[2]]                ## "bb" is absent
##############################################################





--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = Patched
 major = 1
 minor = 9.0
 year = 2004
 month = 04
 day = 27
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:methods, package:stats, package:graphics, package:utils, 
file:c:/users/rmh28285/data/rmh/hh/splus.library/HH/.RData, package:lattice, package:grid, 
Autoloads, package:base

From ggrothendieck at myway.com  Mon Jul 26 01:16:49 2004
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Mon Jul 26 01:17:02 2004
Subject: [Rd] directing print.packageInfo to a file
Message-ID: <loom.20040726T011220-264@post.gmane.org>

There was a discussion on r-help of getting the output from 
print.packageInfo into a file.  Spencer and I have added a file=
argument to print.packageInfo for consideration in R.  Had this
been available it would have simplified the answer to that
thread.  If the file= argument is used then the packageInfo
information is sent to the file specified rather than displayed
using file.show .

print.packageInfo <- function (x, ..., file = NULL) 
{
    if (!inherits(x, "packageInfo")) 
        stop("wrong class")
    outFile <- if (is.null(file))
	tempfile("RpackageInfo")
    else
	file
    outConn <- file(outFile, open = "w")
    vignetteMsg <- paste("Further information is available in the following ", 
        "vignettes in directory ", sQuote(file.path(x$path, "doc")), 
        ":", sep = "")
    headers <- c("", "Description:\n\n", "Index:\n\n", paste(paste(strwrap
(vignetteMsg), 
        collapse = "\n"), "\n\n", sep = ""))
    footers <- c("\n", "\n", "\n", "")
    formatDocEntry <- function(entry) {
        if (is.list(entry) || is.matrix(entry)) 
            formatDL(entry, style = "list")
        else entry
    }
    for (i in which(!sapply(x$info, is.null))) {
        writeLines(headers[i], outConn, sep = "")
        writeLines(formatDocEntry(x$info[[i]]), outConn)
        writeLines(footers[i], outConn, sep = "")
    }
    close(outConn)
    if (is.null(file))
	    file.show(outFile, delete.file = TRUE, title = paste
("Documentation for package", 
		sQuote(x$name)))
    invisible(x)
}

From abuse at hotmail.com  Mon Jul 26 06:45:25 2004
From: abuse at hotmail.com (MSN Hotmail)
Date: Mon Jul 26 06:45:37 2004
Subject: [Rd] hi
Message-ID: <200407260445.i6Q4jPJI017776@bay0-pcs1.bay0.hotmail.com>

This is an auto-generated response designed to let you know that our system received your support inquiry and a Support Representative will review your question and respond to you soon. Please note that you will not receive a reply if you respond directly to this message. 

Thank you for contacting MSN Hotmail Support.

Remember that MSN Hotmail also has comprehensive online help available--just click "Help" in the upper right corner.

From p.dalgaard at biostat.ku.dk  Mon Jul 26 07:26:24 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Mon Jul 26 07:29:10 2004
Subject: [Rd] tkStartGUI fails under RW1091 (PR#7101)
In-Reply-To: <20040716150938.855B1108BC@slim.kubism.ku.dk>
References: <20040716150938.855B1108BC@slim.kubism.ku.dk>
Message-ID: <x27jsrmj9b.fsf@biostat.ku.dk>

joehl@gmx.de writes:

> > library(tcltk)
> > tkStartGUI()
> Error in .C("RTcl_ActivateConsole", PACKAGE = "tcltk") : 
>         C function name not in DLL for package tcltk

Yes. The source code for that function sits inside #ifndef Win32, so
it's hardly a bug, except that the documentation might be clearer (or
the R wrapper could throw a more explicit error). The whole thing is
quite experimental, on Unix too -- really just a proof of concept
thing at present. 

The fundamental issue is that the way Tk takes over R's event loop
involves redefining ptr_R_ReadConsole and friends. This is quite
Unix-specific and the relevant declarations are lifted from
src/unix/devUI.h. 

I don't know what the equivalent would be on Windows (a platform I use
reluctantly myself), and I kind of suspect that it can only work from
Rterm, not Rgui. Contributions from knowledgeable Windows programmers
would be welcome.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From grass at grass-gmbh.de  Mon Jul 26 11:47:00 2004
From: grass at grass-gmbh.de (Ulrich Grass)
Date: Mon Jul 26 11:47:22 2004
Subject: [Rd] automated response
Message-ID: <10407261147.AA04464@grass-gmbh.de>

In der Zeit vom 21.07.2004 bis 31.07.2004 bin ich im Urlaub.
In dieser Zeit wird mein E-Mail Briefkasten nicht geleert.

F?r eBay Fragen wenden Sie sich bitte an meinen Kollegen Holger Schlamp schlamp@birke-wellness.de

mfg
Ulrich Grass

From phgrosjean at sciviews.org  Mon Jul 26 11:54:20 2004
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Mon Jul 26 11:54:58 2004
Subject: [Rd] tkStartGUI fails under RW1091 (PR#7101)
In-Reply-To: <x27jsrmj9b.fsf@biostat.ku.dk>
Message-ID: <MABBLJDICACNFOLGIHJOMEOLEKAA.phgrosjean@sciviews.org>

Peter,

I think it should be possible to find a different solution to completelly
replace the R console by a Tcl/Tk console. The basic idea is to redirect
inputs and outputs of the R console in Rgui (SDI mode), and then hide R
console itself, thus without touching to the event loop(s). There are some
parts of such an implementation in John Fox's Rcmdr (redirection of output
to a Tcl/Tk window), and for the input (it is the way SciViews-R
communicates with external programs, but in this case, it is the Tcl/Tk
window that is hidden, not the original R console). Indeed, I just reworked
some code in the air for a simple code editor in tcltk (you present it in
your R-news paper about tcltk, isn't it).

Moreover, under Windows, the program that spawns a console can specify
different channels for input, output and error before spawning the console
(this works with Rterm only, of course). I use this in the SciViews R plug.
Indeed, R is driven by the R plug in --ess mode by redirecting input, output
and error to pipes. Under Windows NT/2000/XP, it is possible to specify
named pipes. Those are very convenient, because they can be handled as
files, including through the net. However, Windows 9X/Me/Millenium can only
connect to existing named pipes, but cannot create new ones. So, a solution
that works with any Windows platform should not use names pipes. This is a
different approach we could use. However, in this case, the solution would
be Windows-specific, I imagine. So, it means we would end up with a
different mechanisms under Unix/Linux, and under Windows.

Please, note that in both solutions, I have code capable to interrupt
calculation in R. I think this is a required feature, but it is not easy to
implement with all mechanisms.

I plan to replace totally my Visual Basic code by platform-independent code
in SciViews in the future. Using a Tcl/Tk console window may be a solution,
so I *may* further develop the concept. However, I am still looking at
potentially interesting alternatives, like James Wettenhall's wxPython, or
some improved Tcl/Tk solution based on your tcltk package, supplemented with
Tile and other supplemental widgets (I find the basic Tk widgets too limited
to implement the GUI I want to build with them).

Best,

Philippe

.......................................................<?}))><....
 ) ) ) ) )
( ( ( ( (   Prof. Philippe Grosjean
\  ___   )
 \/ECO\ (   Numerical Ecology of Aquatic Systems
 /\___/  )  Mons-Hainaut University, Pentagone
/ ___  /(   8, Av. du Champ de Mars, 7000 Mons, Belgium
 /NUM\/  )
 \___/\ (   phone: + 32.65.37.34.97, fax: + 32.65.37.33.12
       \ )  email: Philippe.Grosjean@umh.ac.be
 ) ) ) ) )  SciViews project coordinator (http://www.sciviews.org)
( ( ( ( (
...................................................................

-----Original Message-----
From: r-devel-bounces@stat.math.ethz.ch
[mailto:r-devel-bounces@stat.math.ethz.ch]On Behalf Of Peter Dalgaard
Sent: Monday, 26 July, 2004 07:26
To: joehl@gmx.de
Cc: R-bugs@biostat.ku.dk; r-devel@stat.math.ethz.ch
Subject: Re: [Rd] tkStartGUI fails under RW1091 (PR#7101)


joehl@gmx.de writes:

> > library(tcltk)
> > tkStartGUI()
> Error in .C("RTcl_ActivateConsole", PACKAGE = "tcltk") :
>         C function name not in DLL for package tcltk

Yes. The source code for that function sits inside #ifndef Win32, so
it's hardly a bug, except that the documentation might be clearer (or
the R wrapper could throw a more explicit error). The whole thing is
quite experimental, on Unix too -- really just a proof of concept
thing at present.

The fundamental issue is that the way Tk takes over R's event loop
involves redefining ptr_R_ReadConsole and friends. This is quite
Unix-specific and the relevant declarations are lifted from
src/unix/devUI.h.

I don't know what the equivalent would be on Windows (a platform I use
reluctantly myself), and I kind of suspect that it can only work from
Rterm, not Rgui. Contributions from knowledgeable Windows programmers
would be welcome.

--
   O__  ---- Peter Dalgaard             Blegdamsvej 3
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

______________________________________________
R-devel@stat.math.ethz.ch mailing list
https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From ripley at stats.ox.ac.uk  Mon Jul 26 17:11:51 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Jul 26 17:47:19 2004
Subject: [Rd] gsub(*, perl=TRUE) bug incl. seg.fault (PR#7108)
In-Reply-To: <20040717101518.CF36C108BB@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0407261609360.6962-100000@gannet.stats>

I presume this was in R 1.9.1?

It seems that this was something I had already fixed (from another
symptom) and not been able to commit because the CVS archive was down.

I have now fixed it in R 1.9.1 patched and R-devel, and put a regression
test into the latter.

Brian

On Sat, 17 Jul 2004 maechler@stat.math.ethz.ch wrote:

> Experimenting a bit further, I've "found" the following
> 
> 1) the problem seems only gsub(), not sub()
> 
>   > sub(" ", "", "b c + d | a * b", perl=TRUE)
>   [1] "bc + d | a * b"
>   > gsub(" ", "", "b c + d | a * b", perl=TRUE)
>   NULL
> 
> 2) only if perl = TRUE, not otherwise
> 
> 3) Also modifying the replacement string only slightly leads to a
>   different (correct instead of bug) result:
> 
>   > gsub(" ", "", "bc + d | a * b", perl=TRUE)
>   [1] "bc+d|a*b"
>   > gsub(" ", "", "b c + d | a *", perl=TRUE)
>   [1] "bc+d|a*"
>   > gsub(" ", "", "b c + d | b", perl=TRUE)
>   [1] "bc+d|b"
> 
> Whereas those give the bug as well :
> 
>   > gsub(" ", "", "b : : d : a : b", perl=TRUE)
>   NULL
>   > gsub(" ", "", "b : : : : a : b", perl=TRUE)
>   NULL
>   > gsub(" ", "", "b : : : : : : b", perl=TRUE)
>   NULL
>   > gsub(" ", "", "a : : : : : : a", perl=TRUE)
>   NULL
> but not this
>   > gsub(" ", "", "b : : : : : : a", perl=TRUE)
>   [1] "b::::::a"
> 
> But it's even worse :
> 
>   > gsub(" ", "", "a: 12345 :a", perl=TRUE)
> 
>   -> segmentation fault
> 
> and from "R -d gdb" :
> 
>     > gsub(" ", "", "a: 12345 :a", perl=TRUE)
> 
>     Program received signal SIGSEGV, Segmentation fault.
>     hashIndex (symbol=0x8fd0060, table=0x823f2b8) at
>     ../../../R/src/main/envir.c:599
>     599	  if( !HASHASH(c) ) {
>     (gdb) bt
>     #0  hashIndex (symbol=0x8fd0060, table=0x823f2b8)
> 	at ../../../R/src/main/envir.c:599
>     #1  0x080b145d in R_GetGlobalCache (symbol=0x1)
> 	at ../../../R/src/main/envir.c:656
>     #2  0x080b1ac1 in findGlobalVar (symbol=0x8fd0060)
> 	at ../../../R/src/main/envir.c:923
>     #3  0x080b8873 in Rf_eval (e=0x823f2b8, rho=0x823f014)
> 	at ../../../R/src/main/eval.c:329
>     #4  0x080b88c9 in Rf_eval (e=0x8fd1e60, rho=0x821e540)
> 	at ../../../R/src/main/eval.c:354
>     #5  0x080e1e0e in GetObject (cptr=0xbfffd400)
> 	at ../../../R/src/main/objects.c:88
>     #6  0x080e2a3b in do_usemethod (call=0x84eb084, op=0x823be78, args=0x84eb0a0, 
> 	env=0x8fd1df0) at ../../../R/src/main/objects.c:381
>     #7  0x080b8c33 in Rf_eval (e=0x84eb084, rho=0x8fd1df0)
> 	at ../../../R/src/main/eval.c:375
>     #8  0x080b8f48 in Rf_applyClosure (call=0x8fd1eb4, op=0x84eafa4, 
> 	arglist=0x8fd1e44, rho=0x823f014, suppliedenv=0x821e540)
> 	at ../../../R/src/main/eval.c:559
>     #9  0x080b89bf in Rf_eval (e=0x8fd1eb4, rho=0x823f014)
> 	at ../../../R/src/main/eval.c:410
>     #10 0x0811b0f3 in Rf_PrintValueEnv (s=0x8fd1eb4, env=0x823f014)
> 	at ../../../R/src/main/print.c:775
>     #11 0x080d55f1 in Rf_ReplIteration (rho=0x823f014, savestack=150798432, 
> 	browselevel=1, state=0x823f014) at ../../../R/src/main/main.c:254
>     #12 0x080d578d in R_ReplConsole (rho=0x823f014, savestack=0, browselevel=0)
> 	at ../../../R/src/main/main.c:298
>     #13 0x080d60d0 in run_Rmainloop () 
>         at ../../../R/src/main/main.c:656
>     #14 0x08147e90 in main (ac=150798432, av=0x8fd0060)
> 	at ../../../R/src/unix/system.c:99
>     #15 0x42017589 in __libc_start_main () from /lib/i686/libc.so.6
> 
> (which is not directly helpful since  src/main/pcre.c  (where
> the C source for gsub(*, perl=TRUE) resides)  isn't mentioned above.
> 
> Must be a memory allocation / mismatch / end_of_string problem
> somewhere.
> 
> Martin Maechler, ETH Zurich
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Mon Jul 26 18:07:08 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Jul 26 18:07:20 2004
Subject: [Rd] Re: [R] adding option in the Windows installer for
	--internet2
In-Reply-To: <sbbef013d36dhbsm2joopffqh26ou5kkla@4ax.com>
Message-ID: <Pine.LNX.4.44.0407261700420.7079-100000@gannet.stats>

The direct connection provides you with better capabilities behind
firewalls if you set it up well enough.  It also has the advantage of 
working the same way on all R platforms.

I don't agree with the basic premise:  --internet2 is only easier for
people whose sysadmins set up IE5/6 for them, and does not work with
authenticating proxies.  As it loads an alternative DLL, the choice needs
to be made before internet functions are first used.

We could make this a configure option, but why is it so hard to point 
people at the rw-FAQ and ask them to follow the instructions there?

On Thu, 15 Jul 2004, Duncan Murdoch wrote:

> (Moved from r-help)
> 
> On Thu, 15 Jul 2004 19:41:54 -0400, "Liaw, Andy" <andy_liaw@merck.com>
> wrote:
> 
> >The XEmacs and cygwin netinstaller has three install options: "Use IE5
> >settings", "Direct connection" (or something like that) and "Install from
> >local disk".  Option #2 never work for me, but #1 does.  
> 
> Yes, I've seen that, but I never knew what it meant, and so it didn't
> give me confidence in the installation.  (Did I make the right choice?
> How would I know if I didn't?)
> 
> >I suspect the R
> >installer can do something similar:  offer the two options (with and
> >without), and somehow test if the connection (to CRAN) works.  If not,
> >prompt the user to try the other option.
> 
> We don't have a netinstaller, so a connection to CRAN is not
> necessary.  I would guess that a large number of people installing R
> don't have a net connection at the time, because a lot of students get
> it on a CD.
> 
> > My take is that this option should
> >be (semi?) permanent:  If it's needed, it's needed all the time for that
> >installation.  
> 
> It seems to me that if internet2 works at all, it should always be
> used, whether necessary or not.  (It might be that your machine is
> behind a firewall sometimes, but not always:  but if you've got the
> required library installed, you probably won't lose it.)
> 
> Maybe internet2 should be the default now.  I'd guess nowadays most
> Windows systems would support it.
> 
> Does anyone know if there are any disadvantages to using the WinINet
> functions via internet2.dll instead of the WinSock functions via
> internet.dll?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From maechler at stat.math.ethz.ch  Mon Jul 26 18:17:03 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon Jul 26 18:17:06 2004
Subject: [Rd] gsub(*, perl=TRUE) bug incl. seg.fault (PR#7108)
Message-ID: <20040726161703.B7E16F32C@slim.kubism.ku.dk>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk>
>>>>>     on Mon, 26 Jul 2004 16:11:51 +0100 (BST) writes:

    BDR> I presume this was in R 1.9.1?  

yes and R-patched (and R-devel) of that time -- of course not
containing your "off line" fixes.

Thanks a lot for taking care of it!
Martin

    BDR> I presume this was in R 1.9.1?  It seems that this was
    BDR> something I had already fixed (from another symptom)
    BDR> and not been able to commit because the CVS archive was
    BDR> down.

    BDR> I have now fixed it in R 1.9.1 patched and R-devel, and
    BDR> put a regression test into the latter.

    BDR> Brian

    BDR> On Sat, 17 Jul 2004 maechler@stat.math.ethz.ch wrote:

    >> Experimenting a bit further, I've "found" the following
    >> 
    >> 1) the problem seems only gsub(), not sub()
    >> 
    >> > sub(" ", "", "b c + d | a * b", perl=TRUE) [1] "bc + d
    >> | a * b" > gsub(" ", "", "b c + d | a * b", perl=TRUE)
    >> NULL
    >> 
    >> 2) only if perl = TRUE, not otherwise
    >> 
    >> 3) Also modifying the replacement string only slightly
    >> leads to a different (correct instead of bug) result:
    >> 
    >> > gsub(" ", "", "bc + d | a * b", perl=TRUE) [1]
    >> "bc+d|a*b" > gsub(" ", "", "b c + d | a *", perl=TRUE)
    >> [1] "bc+d|a*" > gsub(" ", "", "b c + d | b", perl=TRUE)
    >> [1] "bc+d|b"
    >> 
    >> Whereas those give the bug as well :
    >> 
    >> > gsub(" ", "", "b : : d : a : b", perl=TRUE) NULL >
    >> gsub(" ", "", "b : : : : a : b", perl=TRUE) NULL > gsub("
    >> ", "", "b : : : : : : b", perl=TRUE) NULL > gsub(" ", "",
    >> "a : : : : : : a", perl=TRUE) NULL but not this > gsub("
    >> ", "", "b : : : : : : a", perl=TRUE) [1] "b::::::a"
    >> 
    >> But it's even worse :
    >> 
    >> > gsub(" ", "", "a: 12345 :a", perl=TRUE)
    >> 
    -> segmentation fault
    >>  and from "R -d gdb" :
    >> 
    >> > gsub(" ", "", "a: 12345 :a", perl=TRUE)
    >> 
    >> Program received signal SIGSEGV, Segmentation fault.
    >> hashIndex (symbol=0x8fd0060, table=0x823f2b8) at
    >> ../../../R/src/main/envir.c:599 599 if( !HASHASH(c) ) {
    >> (gdb) bt #0 hashIndex (symbol=0x8fd0060, table=0x823f2b8)
    >> at ../../../R/src/main/envir.c:599 #1 0x080b145d in
    >> R_GetGlobalCache (symbol=0x1) at
    >> ../../../R/src/main/envir.c:656 #2 0x080b1ac1 in
    >> findGlobalVar (symbol=0x8fd0060) at
    >> ../../../R/src/main/envir.c:923 #3 0x080b8873 in Rf_eval
    >> (e=0x823f2b8, rho=0x823f014) at
    >> ../../../R/src/main/eval.c:329 #4 0x080b88c9 in Rf_eval
    >> (e=0x8fd1e60, rho=0x821e540) at
    >> ../../../R/src/main/eval.c:354 #5 0x080e1e0e in GetObject
    >> (cptr=0xbfffd400) at ../../../R/src/main/objects.c:88 #6
    >> 0x080e2a3b in do_usemethod (call=0x84eb084, op=0x823be78,
    >> args=0x84eb0a0, env=0x8fd1df0) at
    >> ../../../R/src/main/objects.c:381 #7 0x080b8c33 in
    >> Rf_eval (e=0x84eb084, rho=0x8fd1df0) at
    >> ../../../R/src/main/eval.c:375 #8 0x080b8f48 in
    >> Rf_applyClosure (call=0x8fd1eb4, op=0x84eafa4,
    >> arglist=0x8fd1e44, rho=0x823f014, suppliedenv=0x821e540)
    >> at ../../../R/src/main/eval.c:559 #9 0x080b89bf in
    >> Rf_eval (e=0x8fd1eb4, rho=0x823f014) at
    >> ../../../R/src/main/eval.c:410 #10 0x0811b0f3 in
    >> Rf_PrintValueEnv (s=0x8fd1eb4, env=0x823f014) at
    >> ../../../R/src/main/print.c:775 #11 0x080d55f1 in
    >> Rf_ReplIteration (rho=0x823f014, savestack=150798432,
    >> browselevel=1, state=0x823f014) at
    >> ../../../R/src/main/main.c:254 #12 0x080d578d in
    >> R_ReplConsole (rho=0x823f014, savestack=0, browselevel=0)
    >> at ../../../R/src/main/main.c:298 #13 0x080d60d0 in
    >> run_Rmainloop () at ../../../R/src/main/main.c:656 #14
    >> 0x08147e90 in main (ac=150798432, av=0x8fd0060) at
    >> ../../../R/src/unix/system.c:99 #15 0x42017589 in
    >> __libc_start_main () from /lib/i686/libc.so.6
    >> 
    >> (which is not directly helpful since src/main/pcre.c
    >> (where the C source for gsub(*, perl=TRUE) resides) isn't
    >> mentioned above.
    >> 
    >> Must be a memory allocation / mismatch / end_of_string
    >> problem somewhere.
    >> 
    >> Martin Maechler, ETH Zurich
    >> 
    >> ______________________________________________
    >> R-devel@stat.math.ethz.ch mailing list
    >> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
    >> 
    >> 

    BDR> -- Brian D. Ripley, ripley@stats.ox.ac.uk Professor of
    BDR> Applied Statistics, http://www.stats.ox.ac.uk/~ripley/
    BDR> University of Oxford, Tel: +44 1865 272861 (self) 1
    BDR> South Parks Road, +44 1865 272866 (PA) Oxford OX1 3TG,
    BDR> UK Fax: +44 1865 272595

From ripley at stats.ox.ac.uk  Mon Jul 26 19:23:01 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Jul 26 19:23:10 2004
Subject: [Rd] RE: [R] Strange (non-deterministic) problem with strsplit
In-Reply-To: <004501c46b90$efe19ea0$0701a8c0@hblaptop>
Message-ID: <Pine.LNX.4.44.0407261820130.13871-100000@gannet.stats>

Yes, that is a bug that I found a while back and now we have a replacement
for the CVS archive is in 1.9.1 patched.  However, it is in
gsub(perl=TRUE) only, and Hadley was not using anything like that.

On Sat, 17 Jul 2004, Henrik Bengtsson wrote:

> [Moving this thread to R-devel instead]
> 
> I suspect your "random" results are due to a bug in gsub(). On my R v1.9.0
> (Rterm and Rgui) R crashes when I do
> 
> % R --vanilla
> > gsub(" ", "", "abb + c | a*b", perl=TRUE)
> 
> Trying 
> 
> > gsub(" ", "", "b c + d | a * b", perl=TRUE)
> 
> and I'll get NULL. With 
> 
> > gsub("\\s", "", "bc + d | a * b", perl=TRUE)
> 
> it works as expected. So there is something buggy for sure.
> 
> This might have been fixed in R v1.9.1 or its patched version. (I'm still
> busy to recover from a HDD crash, but, yes, I will update to Rv1.9.1. BTW,
> what's the name of the error logger for Windows that is once in a while
> recommended on this list and that gives more detailed errors than the
> default Windows one?)

Dr. Mingw.  See the rw-FAQ Q7.4.  (FAQs are always worth consulting.)

> Cheers
> 
> Henrik
> 
> > -----Original Message-----
> > From: r-help-bounces@stat.math.ethz.ch 
> > [mailto:r-help-bounces@stat.math.ethz.ch] On Behalf Of hadley wickham
> > Sent: Friday, July 16, 2004 10:50 PM
> > To: r-help@stat.math.ethz.ch
> > Subject: [R] Strange (non-deterministic) problem with strsplit
> > 
> > 
> > I'm having an odd problem with strsplit (well I think it's 
> > strplit that's causing the problem).  When I run the code 
> > below as follows:  str(parseFormulaMin(y +x +d ~ b +d +e| a * b))
> > 
> > I expect to get
> > List of 3
> >  $ y: chr "y+x+d"
> >  $ x: chr "b+d+e"
> >  $ g: chr "a*b"
> > 
> > But about half the time I get 
> > 
> > List of 3
> >  $ y: chr "y+x+d"
> >  $ x: chr "b+d+e"
> >  $ g: chr "a*[square box]"
> > (square box not reproduced here because copy and pasting it 
> > seems to break my web mail)
> > 
> > Can anyone reproduce the problem and/or suggest any solutions? 
> > 
> > parseFormula <- function(formula) {
> > 	splitvars <- function(x) {
> > 		strsplit(x, "\\+|\\*")[[1]]
> > 	}
> > 	stripwhitespace <- function(x) {
> > 		gsub("\\s", "", x, perl=T)
> > 	}
> > 	
> > 	vars <- stripwhitespace(as.character(formula)[3])
> > 	varsplit <- strsplit(vars, "|", fixed=TRUE)[[1]]
> > 
> > 	parts <- list(
> > 		y = stripwhitespace(as.character(formula)[2]),
> > 		x = varsplit[1],
> > 		g = varsplit[2]
> > 	)
> > 	lapply(parts, splitvars)
> > } 
> > 
> > Thanks,
> > 
> > Hadley
> > 
> > ______________________________________________
> > R-help@stat.math.ethz.ch mailing list 
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide! 
> > http://www.R-project.org/posting-guide.html
> > 
> >
> 
> ______________________________________________
> R-help@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Mon Jul 26 21:40:02 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Jul 26 21:40:17 2004
Subject: [Rd] libz>=1.2.1 requirement - necessary?
In-Reply-To: <8A2452FD-DA4A-11D8-B0CB-000A959F327E@math.uni-augsburg.de>
Message-ID: <Pine.LNX.4.44.0407262036450.14312-100000@gannet.stats>

There are some slight interface differences in the gzfile code, so 1.2.1
is needed.  However, we have since found a bug in that which affects R, so
please use the bundled code.

The circumstances of both are rather rare, and valgrind was needed to show 
the second (a use of an unitialized variable that sometimes bit us).

On Tue, 20 Jul 2004, Simon Urbanek wrote:

> I the course of cleaning up the build for OS X I wondered why R 
> requires zlib 1.2.1+. Is there any specific reason for that? OS X comes 
> with zlib 1.1.4, so I wonder if using the system library has any 
> drawbacks... (it worked for me, but..). I found nothing in the 
> archives, but maybe someone remembers?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From stvjc at channing.harvard.edu  Mon Jul 26 21:48:34 2004
From: stvjc at channing.harvard.edu (Vincent Carey 525-2265)
Date: Mon Jul 26 21:48:40 2004
Subject: [Rd] do.call and double-colon access
Message-ID: <Pine.GSO.4.58.0407261545180.13421@capecod.bwh.harvard.edu>


Using R 2.0.0 of July 20 2004

train, test, and cl as defined in example(knn),

we have

> search()
[1] ".GlobalEnv"       "package:methods"  "package:stats"    "package:graphics"
[5] "package:utils"    "Autoloads"        "package:base"
> knn(train, test, cl, k=3)
Error: couldn't find function "knn"
> class::knn(train, test, cl, k=3)
 [1] s s s s s s s s s s s s s s s s s s s s s s s s s c c v c c c c c v c c c c
[39] c c c c c c c c c c c c v c c v v v v v v v v v v c v v v v v v v v v v v
Levels: c s v
> do.call("class::knn", list(train=train, test=test, cl=cl, k=3))
Error in do.call("class::knn", list(train = train, test = test, cl = cl,  :
        couldn't find function "class::knn"
> library(class)
> do.call("knn", list(train=train, test=test, cl=cl, k=3))
 [1] s s s s s s s s s s s s s s s s s s s s s s s s s c c v c c c c c v c c c c
[39] c c c c c c c c c c c c v c c v v v v v c v v v v c v v v v v v v v v v v
Levels: c s v


should do.call("class::knn", ...) succeed?

From ripley at stats.ox.ac.uk  Mon Jul 26 22:07:36 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Jul 26 22:07:44 2004
Subject: [Rd] do.call and double-colon access
In-Reply-To: <Pine.GSO.4.58.0407261545180.13421@capecod.bwh.harvard.edu>
Message-ID: <Pine.LNX.4.44.0407262104170.14817-100000@gannet.stats>

On Mon, 26 Jul 2004, Vincent Carey 525-2265 wrote:

> 
> Using R 2.0.0 of July 20 2004
> 
> train, test, and cl as defined in example(knn),
> 
> we have
> 
> > search()
> [1] ".GlobalEnv"       "package:methods"  "package:stats"    "package:graphics"
> [5] "package:utils"    "Autoloads"        "package:base"
> > knn(train, test, cl, k=3)
> Error: couldn't find function "knn"
> > class::knn(train, test, cl, k=3)
>  [1] s s s s s s s s s s s s s s s s s s s s s s s s s c c v c c c c c v c c c c
> [39] c c c c c c c c c c c c v c c v v v v v v v v v v c v v v v v v v v v v v
> Levels: c s v
> > do.call("class::knn", list(train=train, test=test, cl=cl, k=3))
> Error in do.call("class::knn", list(train = train, test = test, cl = cl,  :
>         couldn't find function "class::knn"
> > library(class)
> > do.call("knn", list(train=train, test=test, cl=cl, k=3))
>  [1] s s s s s s s s s s s s s s s s s s s s s s s s s c c v c c c c c v c c c c
> [39] c c c c c c c c c c c c v c c v v v v v c v v v v c v v v v v v v v v v v
> Levels: c s v
> 
> 
> should do.call("class::knn", ...) succeed?

No.  From the help page for do.call

Arguments:

    what: a character string naming the function to be called.

class::knn is a function call that get()s a function (try get("::") -- it
is really "::"("get", "class")) and not the name of a function.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Tue Jul 27 11:05:28 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Jul 27 11:05:33 2004
Subject: Platform-restricted packages (was Re: [Rd] RE: [Rcom-l] rcom 0.97
	available for download)
In-Reply-To: <16638.35150.431900.884105@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.44.0407270932300.24043-100000@gannet.stats>

This thread seems to have come to an end.  To attempt to summarize:

- It is a good idea to have a single source repository on CRAN.
- There are quite a few packages that are for Linux/Unix only (or a 
  small subset of those), and a few which are Windows only.
- It would be helpful to mark these exceptions in the DESCRIPTION file.

It seems which are the exceptions and exactly what the restrictions are 
needs human judgement (and normally depends on the non-availability of 
other software, e.g. mim or Oracle).  Given that, we have to rely on the
package maintainers providing the information (possibly with a hint from 
the CRAN maintainers if the package does not run on i386 Debian Linux).

[BTW, fork gtkDevice RmSQL RSvgDevice are examples of Linux/Unix only and
I think the complete such list is longer than the Windows-only one.]

The best I can come up with is an optional field (not SystemRequirements 
as that is documented for something else), say OSRequirement with 
suggested values `Windows' `MacOS X', `most useful under Windows' ....

BTW, SystemRequirements appears to be missing in almost all cases where it 
is needed, and

regress/DESCRIPTION:SystemRequirements: R
spatialCovariance/DESCRIPTION:SystemRequirements: R

are not helpful.  Only two instances (out of five) seem useful, and I
think it should be used by at least

RArcinfo RODBC RMySQL ROracle RQuantLib RScaLAPACK RmSQL Rmpi RSvgDevice
gtkDevice hdf5 mimR ncdf rgdal rgl rimage rpvm rsprng udunits

This does not bode well for suggesting a new field.  I would find it more 
helpful if these were resolved than if the OS dependencies were ....


On Wed, 21 Jul 2004, Martin Maechler wrote:

> >>>>> "Dirk" == Dirk Eddelbuettel <edd@debian.org>
> >>>>>     on Wed, 21 Jul 2004 09:49:24 -0500 writes:
> 
>     Dirk> On Wed, Jul 21, 2004 at 04:40:46PM +0200, Uwe Ligges wrote:
>     >> Dirk Eddelbuettel wrote:
>     >> 
>     >> >On Wed, Jul 21, 2004 at 09:39:29AM -0400, Liaw, Andy wrote:
>     >> >
>     >> >>Would it make sense to have platform specific packages in a separate area 
>     >> >>on
>     >> >>CRAN?  I don't know of anything other than Windows that understand COM.
>     >> 
>     >> The question is: What exactly is platform-specific?
> 
>     Dirk> Platform-specific means what it says -- works only on
>     Dirk> a given platform (or maybe a few).  Or are trying to
>     Dirk> pull a Clinton here: "it depends was your meaning of
>     Dirk> platform is" ? :)
> 
>     >> >Yup, and 'core' CRAN contains at least one Windows-only
>     >> >package: rbugs [ as I found when working on a script to
>     >> >automagically build Debian packages from CPAN packages,
>     >> >the script is a modified version of Albrecht's script ]
>     >> 
>     >> The author told me that rbugs is intended to work with WinBUGS under 
>     >> wine on a linux system  (whereas I'm pretty sure R2WinBUGS is capable - 

mimR is a better example, I think.

>     Dirk> Think about it, what does 'run under wine' mean?  Do
>     Dirk> you get it: it ain't no native package when it needs
>     Dirk> an emulator.
> 
>     Dirk> Saying it runs under Linux using wine is like claiming
>     Dirk> your car just turned into a boat. While it will float
>     Dirk> once driven into the river, I presume it won't float
>     Dirk> for very long ...
> 
>     >> Where's the point not to have just this one source repository related to 
>     >> platform dependency?
> 
>     Dirk> Precisely. Let's have one source repo but _let us
>     Dirk> label any and all binary restrictions_ more clearly so
>     Dirk> that I for one can skip over stuff that may build for
>     Dirk> you [ Windoze ] but won't for me [ Linux, preferable
>     Dirk> on all all ten to twelve hardware platforms supported
>     Dirk> by Debian for packages that get uploaded ].
> 
>     Dirk> Does that make sense? Would it improve over what we currently have?
> 
> Yes (2x).
> 
> I'd prefer to keep those packages in one place and rather mark
> them than to move them to specific directories.
> 
> E.g., Dirk's proposal will also work when a package only works,
> in IBM AIX and in Windows.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From maechler at stat.math.ethz.ch  Tue Jul 27 12:51:08 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue Jul 27 12:51:09 2004
Subject: [Rd] Problems with Lapack's eigen() on 64-bit
Message-ID: <16646.13212.240890.26590@gargle.gargle.HOWL>

I'm only now realizing that we have severe problems with R on our
AMD 'Opteron' and 'Athlon64' clients running Redhat Enterprise
with all 64-bit libraries (AFAICS).

The Lapack problem happens for R-patched and R-devel both on
the Opteron and the Athlon64.

Here are platform details:

o  "gcc -v" and "g77 -v" both end with the line
   gcc version 3.2.3 20030502 (Red Hat Linux 3.2.3-34)

o  I've used ...../configure --without-blas

1) Opteron ("deb7", a dual-processor compute server):

  - uname -a :
    Linux deb7 2.4.21-9.0.3.ELsmp #1 SMP Tue Apr 20 19:44:29 EDT 2004 x86_64 x86_64 x86_64 GNU/Linux
  - /proc/cpuinfo  contains (among much more)
    vendor_id       : AuthenticAMD
    cpu family      : 15
    model           : 5
    model name      : AMD Opteron(tm) Processor 248

2) Athlon64 (a simple "new generation" client - to become my desktop soon):
  
  - uname -a :
    Linux setup-12 2.4.21-15.0.2.EL #1 Wed Jun 16 22:41:44 EDT
    2004 x86_64 x86_64 x86_64 GNU/Linux 

  - /proc/cpuinfo  contains
    vendor_id       : AuthenticAMD
    cpu family      : 15
    model           : 14
    model name      : AMD Athlon(tm) 64 Processor 2800+

----------------

Now the Lapack problem, easily seen from the base eigen()
example:

    > eigen(cbind(1, 3:1, 1:3))
    $values
    [1]  5.7015621  1.0000000 -0.7015621

    $vectors
	      [,1]       [,2]       [,3]
    [1,] 0.4877939 -0.7181217 -0.9576161
    [2,] 0.6172751 -0.3893848  0.2036804
    [3,] 0.6172751  0.5767849  0.2036804

which is simply plainly wrong and  
    eigen(cbind(1, 3:1, 1:3), EISPACK=TRUE)
gives the correct eigen values c(5, 1, 0)  and corresponding
eigenvectors.

IIRC, we've already dealt with a Lapack problem, and that
workaround (built into R-devel's Makefiles) has been to use
-ffloat-store for the compilation of src/modules/lapack/dlamc.f

----------

Thank you for hints / suggestions.

Others with 64-bit platforms might also try to see what
   eigen(cbind(1, 3:1, 1:3)) 
gives there.

Martin Maechler

From ripley at stats.ox.ac.uk  Tue Jul 27 14:17:48 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Jul 27 14:17:50 2004
Subject: [Rd] Problems with Lapack's eigen() on 64-bit
In-Reply-To: <16646.13212.240890.26590@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.44.0407271155110.24352-100000@gannet.stats>

Our `public' Opteron (dual 248, FC2 + Goto BLAS) is right, as is Solaris
64-bit. FC2 is using gcc version 3.3.3 20040412 (Red Hat Linux 3.3.3-7), 
quite a lot later.

I would try updating your compiler (to 3.4.1?) and perhaps try a different 
BLAS.

We do have RHEL for Opteron, but AFAIK it is not on a system at present.
(There are others running SuSE 9.0/.1, I believe.)

On Tue, 27 Jul 2004, Martin Maechler wrote:

> I'm only now realizing that we have severe problems with R on our
> AMD 'Opteron' and 'Athlon64' clients running Redhat Enterprise
> with all 64-bit libraries (AFAICS).
> 
> The Lapack problem happens for R-patched and R-devel both on
> the Opteron and the Athlon64.
> 
> Here are platform details:
> 
> o  "gcc -v" and "g77 -v" both end with the line
>    gcc version 3.2.3 20030502 (Red Hat Linux 3.2.3-34)
> 
> o  I've used ...../configure --without-blas
> 
> 1) Opteron ("deb7", a dual-processor compute server):
> 
>   - uname -a :
>     Linux deb7 2.4.21-9.0.3.ELsmp #1 SMP Tue Apr 20 19:44:29 EDT 2004 x86_64 x86_64 x86_64 GNU/Linux
>   - /proc/cpuinfo  contains (among much more)
>     vendor_id       : AuthenticAMD
>     cpu family      : 15
>     model           : 5
>     model name      : AMD Opteron(tm) Processor 248
> 
> 2) Athlon64 (a simple "new generation" client - to become my desktop soon):
>   
>   - uname -a :
>     Linux setup-12 2.4.21-15.0.2.EL #1 Wed Jun 16 22:41:44 EDT
>     2004 x86_64 x86_64 x86_64 GNU/Linux 
> 
>   - /proc/cpuinfo  contains
>     vendor_id       : AuthenticAMD
>     cpu family      : 15
>     model           : 14
>     model name      : AMD Athlon(tm) 64 Processor 2800+
> 
> ----------------
> 
> Now the Lapack problem, easily seen from the base eigen()
> example:
> 
>     > eigen(cbind(1, 3:1, 1:3))
>     $values
>     [1]  5.7015621  1.0000000 -0.7015621
> 
>     $vectors
> 	      [,1]       [,2]       [,3]
>     [1,] 0.4877939 -0.7181217 -0.9576161
>     [2,] 0.6172751 -0.3893848  0.2036804
>     [3,] 0.6172751  0.5767849  0.2036804
> 
> which is simply plainly wrong and  
>     eigen(cbind(1, 3:1, 1:3), EISPACK=TRUE)
> gives the correct eigen values c(5, 1, 0)  and corresponding
> eigenvectors.
> 
> IIRC, we've already dealt with a Lapack problem, and that
> workaround (built into R-devel's Makefiles) has been to use
> -ffloat-store for the compilation of src/modules/lapack/dlamc.f
> 
> ----------
> 
> Thank you for hints / suggestions.
> 
> Others with 64-bit platforms might also try to see what
>    eigen(cbind(1, 3:1, 1:3)) 
> gives there.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Tue Jul 27 14:23:06 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Tue Jul 27 14:25:57 2004
Subject: [Rd] Problems with Lapack's eigen() on 64-bit
In-Reply-To: <16646.13212.240890.26590@gargle.gargle.HOWL>
References: <16646.13212.240890.26590@gargle.gargle.HOWL>
Message-ID: <x2u0vtmyfp.fsf@biostat.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> I'm only now realizing that we have severe problems with R on our
> AMD 'Opteron' and 'Athlon64' clients running Redhat Enterprise
> with all 64-bit libraries (AFAICS).
> 
> The Lapack problem happens for R-patched and R-devel both on
> the Opteron and the Athlon64.
> 
> Here are platform details:
> 
> o  "gcc -v" and "g77 -v" both end with the line
>    gcc version 3.2.3 20030502 (Red Hat Linux 3.2.3-34)
> 
> o  I've used ...../configure --without-blas
> 
> 1) Opteron ("deb7", a dual-processor compute server):
> 
>   - uname -a :
>     Linux deb7 2.4.21-9.0.3.ELsmp #1 SMP Tue Apr 20 19:44:29 EDT 2004 x86_64 x86_64 x86_64 GNU/Linux
>   - /proc/cpuinfo  contains (among much more)
>     vendor_id       : AuthenticAMD
>     cpu family      : 15
>     model           : 5
>     model name      : AMD Opteron(tm) Processor 248
> 
> 2) Athlon64 (a simple "new generation" client - to become my desktop soon):
>   
>   - uname -a :
>     Linux setup-12 2.4.21-15.0.2.EL #1 Wed Jun 16 22:41:44 EDT
>     2004 x86_64 x86_64 x86_64 GNU/Linux 
> 
>   - /proc/cpuinfo  contains
>     vendor_id       : AuthenticAMD
>     cpu family      : 15
>     model           : 14
>     model name      : AMD Athlon(tm) 64 Processor 2800+
> 
> ----------------
> 
> Now the Lapack problem, easily seen from the base eigen()
> example:
> 
>     > eigen(cbind(1, 3:1, 1:3))
>     $values
>     [1]  5.7015621  1.0000000 -0.7015621
> 
>     $vectors
> 	      [,1]       [,2]       [,3]
>     [1,] 0.4877939 -0.7181217 -0.9576161
>     [2,] 0.6172751 -0.3893848  0.2036804
>     [3,] 0.6172751  0.5767849  0.2036804
> 
> which is simply plainly wrong and  
>     eigen(cbind(1, 3:1, 1:3), EISPACK=TRUE)
> gives the correct eigen values c(5, 1, 0)  and corresponding
> eigenvectors.
> 
> IIRC, we've already dealt with a Lapack problem, and that
> workaround (built into R-devel's Makefiles) has been to use
> -ffloat-store for the compilation of src/modules/lapack/dlamc.f
> 
> ----------
> 
> Thank you for hints / suggestions.
> 
> Others with 64-bit platforms might also try to see what
>    eigen(cbind(1, 3:1, 1:3)) 
> gives there.

SuSE Linux doesn't seem to have problems, neither with a default build
of 1.9.1 (as per Detlef's SPEC file), my ATLAS or GOTO builds of 1.9.0
or a 2.0.0-in-progress from May 5 (sorry: not SVN-ified yet, I *am* on
vacation you know...). All give

> eigen(cbind(1, 3:1, 1:3))
$values
[1]  5.000000e+00  1.000000e+00 -4.440892e-16

$vectors
          [,1]       [,2]       [,3]
[1,] 0.5773503 -0.8451543 -0.9428090
[2,] 0.5773503 -0.1690309  0.2357023
[3,] 0.5773503  0.5070926  0.2357023

The largest and smallest eigenvectors/values are easily
seen to be correct. And the middle one is basically this:

pd@linux:~/r-devel/BUILD> echo  'cbind(1, 3:1, 1:3)%*%c(-5,-1,3)' | bin/R -q --vanilla
> cbind(1, 3:1, 1:3)%*%c(-5,-1,3)
     [,1]
[1,]   -5
[2,]   -1
[3,]    3


The g77 version info says "3.3.1 (SuSE Linux)"

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From rpeng at jhsph.edu  Tue Jul 27 15:52:20 2004
From: rpeng at jhsph.edu (Roger D. Peng)
Date: Tue Jul 27 15:52:26 2004
Subject: [Rd] Problems with Lapack's eigen() on 64-bit
In-Reply-To: <16646.13212.240890.26590@gargle.gargle.HOWL>
References: <16646.13212.240890.26590@gargle.gargle.HOWL>
Message-ID: <41065E14.2010804@jhsph.edu>

On our AMD dual Opteron system running SuSE SLES 8 with

gcc version 3.2.2 (SuSE Linux)

and with R built with `./configure --without-blas' I get

 > eigen(cbind(1, 3:1, 1:3))
$values
[1]  5.000000e+00  1.000000e+00 -4.440892e-16

$vectors
           [,1]       [,2]       [,3]
[1,] 0.5773503 -0.8451543 -0.9428090
[2,] 0.5773503 -0.1690309  0.2357023
[3,] 0.5773503  0.5070926  0.2357023

-roger

Martin Maechler wrote:
> I'm only now realizing that we have severe problems with R on our
> AMD 'Opteron' and 'Athlon64' clients running Redhat Enterprise
> with all 64-bit libraries (AFAICS).
> 
> The Lapack problem happens for R-patched and R-devel both on
> the Opteron and the Athlon64.
> 
> Here are platform details:
> 
> o  "gcc -v" and "g77 -v" both end with the line
>    gcc version 3.2.3 20030502 (Red Hat Linux 3.2.3-34)
> 
> o  I've used ...../configure --without-blas
> 
> 1) Opteron ("deb7", a dual-processor compute server):
> 
>   - uname -a :
>     Linux deb7 2.4.21-9.0.3.ELsmp #1 SMP Tue Apr 20 19:44:29 EDT 2004 x86_64 x86_64 x86_64 GNU/Linux
>   - /proc/cpuinfo  contains (among much more)
>     vendor_id       : AuthenticAMD
>     cpu family      : 15
>     model           : 5
>     model name      : AMD Opteron(tm) Processor 248
> 
> 2) Athlon64 (a simple "new generation" client - to become my desktop soon):
>   
>   - uname -a :
>     Linux setup-12 2.4.21-15.0.2.EL #1 Wed Jun 16 22:41:44 EDT
>     2004 x86_64 x86_64 x86_64 GNU/Linux 
> 
>   - /proc/cpuinfo  contains
>     vendor_id       : AuthenticAMD
>     cpu family      : 15
>     model           : 14
>     model name      : AMD Athlon(tm) 64 Processor 2800+
> 
> ----------------
> 
> Now the Lapack problem, easily seen from the base eigen()
> example:
> 
>     > eigen(cbind(1, 3:1, 1:3))
>     $values
>     [1]  5.7015621  1.0000000 -0.7015621
> 
>     $vectors
> 	      [,1]       [,2]       [,3]
>     [1,] 0.4877939 -0.7181217 -0.9576161
>     [2,] 0.6172751 -0.3893848  0.2036804
>     [3,] 0.6172751  0.5767849  0.2036804
> 
> which is simply plainly wrong and  
>     eigen(cbind(1, 3:1, 1:3), EISPACK=TRUE)
> gives the correct eigen values c(5, 1, 0)  and corresponding
> eigenvectors.
> 
> IIRC, we've already dealt with a Lapack problem, and that
> workaround (built into R-devel's Makefiles) has been to use
> -ffloat-store for the compilation of src/modules/lapack/dlamc.f
> 
> ----------
> 
> Thank you for hints / suggestions.
> 
> Others with 64-bit platforms might also try to see what
>    eigen(cbind(1, 3:1, 1:3)) 
> gives there.
> 
> Martin Maechler
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From andy_liaw at merck.com  Tue Jul 27 16:03:56 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Tue Jul 27 16:04:22 2004
Subject: [Rd] Problems with Lapack's eigen() on 64-bit
Message-ID: <3A822319EB35174CA3714066D590DCD504AF8113@usrymx25.merck.com>

On our Opteron with SLES8, the GCC 3.2 is only 32-bit, and does not support
the -mcpu=k8 flag.  I had to install GCC33 to get them.

Andy

> From: Roger D. Peng
> 
> On our AMD dual Opteron system running SuSE SLES 8 with
> 
> gcc version 3.2.2 (SuSE Linux)
> 
> and with R built with `./configure --without-blas' I get
> 
>  > eigen(cbind(1, 3:1, 1:3))
> $values
> [1]  5.000000e+00  1.000000e+00 -4.440892e-16
> 
> $vectors
>            [,1]       [,2]       [,3]
> [1,] 0.5773503 -0.8451543 -0.9428090
> [2,] 0.5773503 -0.1690309  0.2357023
> [3,] 0.5773503  0.5070926  0.2357023
> 
> -roger
> 
> Martin Maechler wrote:
> > I'm only now realizing that we have severe problems with R on our
> > AMD 'Opteron' and 'Athlon64' clients running Redhat Enterprise
> > with all 64-bit libraries (AFAICS).
> > 
> > The Lapack problem happens for R-patched and R-devel both on
> > the Opteron and the Athlon64.
> > 
> > Here are platform details:
> > 
> > o  "gcc -v" and "g77 -v" both end with the line
> >    gcc version 3.2.3 20030502 (Red Hat Linux 3.2.3-34)
> > 
> > o  I've used ...../configure --without-blas
> > 
> > 1) Opteron ("deb7", a dual-processor compute server):
> > 
> >   - uname -a :
> >     Linux deb7 2.4.21-9.0.3.ELsmp #1 SMP Tue Apr 20 
> 19:44:29 EDT 2004 x86_64 x86_64 x86_64 GNU/Linux
> >   - /proc/cpuinfo  contains (among much more)
> >     vendor_id       : AuthenticAMD
> >     cpu family      : 15
> >     model           : 5
> >     model name      : AMD Opteron(tm) Processor 248
> > 
> > 2) Athlon64 (a simple "new generation" client - to become 
> my desktop soon):
> >   
> >   - uname -a :
> >     Linux setup-12 2.4.21-15.0.2.EL #1 Wed Jun 16 22:41:44 EDT
> >     2004 x86_64 x86_64 x86_64 GNU/Linux 
> > 
> >   - /proc/cpuinfo  contains
> >     vendor_id       : AuthenticAMD
> >     cpu family      : 15
> >     model           : 14
> >     model name      : AMD Athlon(tm) 64 Processor 2800+
> > 
> > ----------------
> > 
> > Now the Lapack problem, easily seen from the base eigen()
> > example:
> > 
> >     > eigen(cbind(1, 3:1, 1:3))
> >     $values
> >     [1]  5.7015621  1.0000000 -0.7015621
> > 
> >     $vectors
> > 	      [,1]       [,2]       [,3]
> >     [1,] 0.4877939 -0.7181217 -0.9576161
> >     [2,] 0.6172751 -0.3893848  0.2036804
> >     [3,] 0.6172751  0.5767849  0.2036804
> > 
> > which is simply plainly wrong and  
> >     eigen(cbind(1, 3:1, 1:3), EISPACK=TRUE)
> > gives the correct eigen values c(5, 1, 0)  and corresponding
> > eigenvectors.
> > 
> > IIRC, we've already dealt with a Lapack problem, and that
> > workaround (built into R-devel's Makefiles) has been to use
> > -ffloat-store for the compilation of src/modules/lapack/dlamc.f
> > 
> > ----------
> > 
> > Thank you for hints / suggestions.
> > 
> > Others with 64-bit platforms might also try to see what
> >    eigen(cbind(1, 3:1, 1:3)) 
> > gives there.
> > 
> > Martin Maechler
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
>

From ripley at stats.ox.ac.uk  Tue Jul 27 16:35:26 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Jul 27 16:35:34 2004
Subject: [Rd] Problems with Lapack's eigen() on 64-bit
In-Reply-To: <3A822319EB35174CA3714066D590DCD504AF8113@usrymx25.merck.com>
Message-ID: <Pine.LNX.4.44.0407271528450.973-100000@gannet.stats>

AFIACS the gcc/g77/g++ flag for 64-bit generation is -m64, just as on 
Solaris:

       -m32
       -m64
           Generate code for a 32-bit or 64-bit environment.  The 32-bit envi-
           ronment sets int, long and pointer to 32 bits and generates code
           that runs on any i386 system.  The 64-bit environment sets int to
           32 bits and long and pointer to 64 bits and generates code for
           AMD's x86-64 architecture.

However, on FC2 -m64 appears to be the default (with gcc 3.3.3).

On Tue, 27 Jul 2004, Liaw, Andy wrote:

> On our Opteron with SLES8, the GCC 3.2 is only 32-bit, and does not support
> the -mcpu=k8 flag.  I had to install GCC33 to get them.
> 
> Andy
> 
> > From: Roger D. Peng
> > 
> > On our AMD dual Opteron system running SuSE SLES 8 with
> > 
> > gcc version 3.2.2 (SuSE Linux)
> > 
> > and with R built with `./configure --without-blas' I get
> > 
> >  > eigen(cbind(1, 3:1, 1:3))
> > $values
> > [1]  5.000000e+00  1.000000e+00 -4.440892e-16
> > 
> > $vectors
> >            [,1]       [,2]       [,3]
> > [1,] 0.5773503 -0.8451543 -0.9428090
> > [2,] 0.5773503 -0.1690309  0.2357023
> > [3,] 0.5773503  0.5070926  0.2357023
> > 
> > -roger
> > 
> > Martin Maechler wrote:
> > > I'm only now realizing that we have severe problems with R on our
> > > AMD 'Opteron' and 'Athlon64' clients running Redhat Enterprise
> > > with all 64-bit libraries (AFAICS).
> > > 
> > > The Lapack problem happens for R-patched and R-devel both on
> > > the Opteron and the Athlon64.
> > > 
> > > Here are platform details:
> > > 
> > > o  "gcc -v" and "g77 -v" both end with the line
> > >    gcc version 3.2.3 20030502 (Red Hat Linux 3.2.3-34)
> > > 
> > > o  I've used ...../configure --without-blas
> > > 
> > > 1) Opteron ("deb7", a dual-processor compute server):
> > > 
> > >   - uname -a :
> > >     Linux deb7 2.4.21-9.0.3.ELsmp #1 SMP Tue Apr 20 
> > 19:44:29 EDT 2004 x86_64 x86_64 x86_64 GNU/Linux
> > >   - /proc/cpuinfo  contains (among much more)
> > >     vendor_id       : AuthenticAMD
> > >     cpu family      : 15
> > >     model           : 5
> > >     model name      : AMD Opteron(tm) Processor 248
> > > 
> > > 2) Athlon64 (a simple "new generation" client - to become 
> > my desktop soon):
> > >   
> > >   - uname -a :
> > >     Linux setup-12 2.4.21-15.0.2.EL #1 Wed Jun 16 22:41:44 EDT
> > >     2004 x86_64 x86_64 x86_64 GNU/Linux 
> > > 
> > >   - /proc/cpuinfo  contains
> > >     vendor_id       : AuthenticAMD
> > >     cpu family      : 15
> > >     model           : 14
> > >     model name      : AMD Athlon(tm) 64 Processor 2800+
> > > 
> > > ----------------
> > > 
> > > Now the Lapack problem, easily seen from the base eigen()
> > > example:
> > > 
> > >     > eigen(cbind(1, 3:1, 1:3))
> > >     $values
> > >     [1]  5.7015621  1.0000000 -0.7015621
> > > 
> > >     $vectors
> > > 	      [,1]       [,2]       [,3]
> > >     [1,] 0.4877939 -0.7181217 -0.9576161
> > >     [2,] 0.6172751 -0.3893848  0.2036804
> > >     [3,] 0.6172751  0.5767849  0.2036804
> > > 
> > > which is simply plainly wrong and  
> > >     eigen(cbind(1, 3:1, 1:3), EISPACK=TRUE)
> > > gives the correct eigen values c(5, 1, 0)  and corresponding
> > > eigenvectors.
> > > 
> > > IIRC, we've already dealt with a Lapack problem, and that
> > > workaround (built into R-devel's Makefiles) has been to use
> > > -ffloat-store for the compilation of src/modules/lapack/dlamc.f
> > > 
> > > ----------
> > > 
> > > Thank you for hints / suggestions.
> > > 
> > > Others with 64-bit platforms might also try to see what
> > >    eigen(cbind(1, 3:1, 1:3)) 
> > > gives there.
> > > 
> > > Martin Maechler
> > > 
> > > ______________________________________________
> > > R-devel@stat.math.ethz.ch mailing list
> > > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > >
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From hb at maths.lth.se  Tue Jul 27 19:12:14 2004
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Tue Jul 27 19:12:39 2004
Subject: [Rd] Incorrect display of b[hat((a))] expression in plots
Message-ID: <000001c473fc$e927a9a0$01000001@hblaptop>

Hi, I am not sure if this is a bug or a non-implement feature of
text-drawing functions with TeX-style expression, but hat() and some of its
equals does not get the right "bounding boxes" if they are put in sub- or
superscripts. For instance, for the expression 'b[hat(a)]' the hat() seems
to shift 'hat(a)' too much to the right of 'b'. Try the below example and
you'll see what I mean:

label <- list(
  expression((b[sqrt(a)])),
  expression((b[bar(a)])),
  expression((b[widehat(a)])),
  expression((b[widetilde(a)])),
  expression((tilde(a))),
  # Problematic:
  expression((b[dot(a)])),
  expression((b[ring(a)])),
  expression((b[hat(a)])),
  expression((b[tilde(a)])),
  expression((b^dot(a))),
  expression((b^ring(a))),
  expression((b^hat(a))),
  expression((b^tilde(a)))
)

plot(NA, xlim=c(0,2), ylim=c(-1,length(label)))
for (kk in seq(label))
  text(1,length(label)-kk, label=label[[kk]])

The problem occurs for the postscript and png devices too (I haven't tried
the others).

I'm on WindowsXP and "R version 1.9.1, 2004-06-21" (non-patched).

Best wishes

Henrik Bengtsson

Dept. of Mathematical Statistics @ Centre for Mathematical Sciences 
Lund Institute of Technology/Lund University, Sweden (+2h UTC)
+46 46 2229611 (off), +46 708 909208 (cell), +46 46 2224623 (fax)
h b @ m a t h s . l t h . s e, http://www.maths.lth.se/~hb/

From cliff at research.telcordia.com  Tue Jul 27 21:47:39 2004
From: cliff at research.telcordia.com (cliff@research.telcordia.com)
Date: Tue Jul 27 21:47:50 2004
Subject: [Rd] dynamic creation of matrix objects (PR#7136)
Message-ID: <20040727194739.B530410461@slim.kubism.ku.dk>

I am trying to assign the values in a matrix to an object whose name is 
created dynamically, i.e., using eval-parse-text-paste sequence.  It 
seems that only the very last value in the matrix is assigned to the new 
object.  I have included an example below where I create a matrix object 
called "aMat".  I can assign the contents of aMat to another object 
called "thisMat."  However, when I attempt to make a similar assignment 
to a new object called "thatMat", only the last value is returned, when 
queried.  Does anybody know whether this is a bug...or am I doing 
something wrong?

Cliff Behrens

 > aMat<- matrix(c(1,2,3,4,5,6,7,8),ncol=2)
 > aMat
     [,1] [,2]
[1,]    1    5
[2,]    2    6
[3,]    3    7
[4,]    4    8
 > thisMat<- aMat
 > thisMat
     [,1] [,2]
[1,]    1    5
[2,]    2    6
[3,]    3    7
[4,]    4    8
 > tName<-"that"
 > eval(parse(text=paste(tName,"Mat <-",aMat,sep="")))
 > thatMat
[1] 8
 >

From andy_liaw at merck.com  Tue Jul 27 21:57:24 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Tue Jul 27 21:58:21 2004
Subject: [Rd] dynamic creation of matrix objects (PR#7136)
Message-ID: <3A822319EB35174CA3714066D590DCD504AF8122@usrymx25.merck.com>

How is this a bug?  You get exactly what you _should_ get (or otherwise it
might have been a legitimate bug report).

I suspect what you really should use is assign().

Andy

> From: cliff@research.telcordia.com
> 
> I am trying to assign the values in a matrix to an object 
> whose name is 
> created dynamically, i.e., using eval-parse-text-paste sequence.  It 
> seems that only the very last value in the matrix is assigned 
> to the new 
> object.  I have included an example below where I create a 
> matrix object 
> called "aMat".  I can assign the contents of aMat to another object 
> called "thisMat."  However, when I attempt to make a similar 
> assignment 
> to a new object called "thatMat", only the last value is 
> returned, when 
> queried.  Does anybody know whether this is a bug...or am I doing 
> something wrong?
> 
> Cliff Behrens
> 
>  > aMat<- matrix(c(1,2,3,4,5,6,7,8),ncol=2)
>  > aMat
>      [,1] [,2]
> [1,]    1    5
> [2,]    2    6
> [3,]    3    7
> [4,]    4    8
>  > thisMat<- aMat
>  > thisMat
>      [,1] [,2]
> [1,]    1    5
> [2,]    2    6
> [3,]    3    7
> [4,]    4    8
>  > tName<-"that"
>  > eval(parse(text=paste(tName,"Mat <-",aMat,sep="")))
>  > thatMat
> [1] 8
>  >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
>

From cliff at research.telcordia.com  Tue Jul 27 22:06:54 2004
From: cliff at research.telcordia.com (Cliff Behrens)
Date: Tue Jul 27 22:07:01 2004
Subject: [Rd] dynamic creation of matrix objects (PR#7136)
In-Reply-To: <1090958245.3398.8.camel@atlantic>
References: <20040727194739.B530410461@slim.kubism.ku.dk>
	<1090958245.3398.8.camel@atlantic>
Message-ID: <4106B5DE.10309@research.telcordia.com>

Thanks to all of you for your suggestion to use "assign" instead.

Cliff Behrens

Pedro Pereira Rodrigues wrote:

>You should consider using
>
>  
>
>>eval(parse(text=paste(tName,"Mat <-aMat",sep="")))
>>    
>>
>
>instead.
>
>If you try only 
>
>  
>
>>parse(text=paste(tName,"Mat <-",aMat,sep=""))
>>    
>>
>
>you see where the problem is:
>
>expression(thatMat <- 1, thatMat <- 2, thatMat <- 3, thatMat <- 4,
>    thatMat <- 5, thatMat <- 6, thatMat <- 7, thatMat <- 8)
>
>
>Good Luck.
>
>
>On Tue, 2004-07-27 at 20:47, cliff@research.telcordia.com wrote:
>  
>
>>I am trying to assign the values in a matrix to an object whose name is 
>>created dynamically, i.e., using eval-parse-text-paste sequence.  It 
>>seems that only the very last value in the matrix is assigned to the new 
>>object.  I have included an example below where I create a matrix object 
>>called "aMat".  I can assign the contents of aMat to another object 
>>called "thisMat."  However, when I attempt to make a similar assignment 
>>to a new object called "thatMat", only the last value is returned, when 
>>queried.  Does anybody know whether this is a bug...or am I doing 
>>something wrong?
>>
>>Cliff Behrens
>>
>> > aMat<- matrix(c(1,2,3,4,5,6,7,8),ncol=2)
>> > aMat
>>     [,1] [,2]
>>[1,]    1    5
>>[2,]    2    6
>>[3,]    3    7
>>[4,]    4    8
>> > thisMat<- aMat
>> > thisMat
>>     [,1] [,2]
>>[1,]    1    5
>>[2,]    2    6
>>[3,]    3    7
>>[4,]    4    8
>> > tName<-"that"
>> > eval(parse(text=paste(tName,"Mat <-",aMat,sep="")))
>> > thatMat
>>[1] 8
>> >
>>
>>______________________________________________
>>R-devel@stat.math.ethz.ch mailing list
>>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>>    
>>

	[[alternative HTML version deleted]]

From cliff at research.telcordia.com  Tue Jul 27 22:07:12 2004
From: cliff at research.telcordia.com (Cliff Behrens)
Date: Tue Jul 27 22:07:02 2004
Subject: [Rd] dynamic creation of matrix objects (PR#7136)
In-Reply-To: <3A822319EB35174CA3714066D590DCD504AF8122@usrymx25.merck.com>
References: <3A822319EB35174CA3714066D590DCD504AF8122@usrymx25.merck.com>
Message-ID: <4106B5F0.6000205@research.telcordia.com>

Thanks to all of you for your suggestion to use "assign" instead.

Cliff Behrens

Liaw, Andy wrote:

>How is this a bug?  You get exactly what you _should_ get (or otherwise it
>might have been a legitimate bug report).
>
>I suspect what you really should use is assign().
>
>Andy
>
>  
>
>>From: cliff@research.telcordia.com
>>
>>I am trying to assign the values in a matrix to an object 
>>whose name is 
>>created dynamically, i.e., using eval-parse-text-paste sequence.  It 
>>seems that only the very last value in the matrix is assigned 
>>to the new 
>>object.  I have included an example below where I create a 
>>matrix object 
>>called "aMat".  I can assign the contents of aMat to another object 
>>called "thisMat."  However, when I attempt to make a similar 
>>assignment 
>>to a new object called "thatMat", only the last value is 
>>returned, when 
>>queried.  Does anybody know whether this is a bug...or am I doing 
>>something wrong?
>>
>>Cliff Behrens
>>
>> > aMat<- matrix(c(1,2,3,4,5,6,7,8),ncol=2)
>> > aMat
>>     [,1] [,2]
>>[1,]    1    5
>>[2,]    2    6
>>[3,]    3    7
>>[4,]    4    8
>> > thisMat<- aMat
>> > thisMat
>>     [,1] [,2]
>>[1,]    1    5
>>[2,]    2    6
>>[3,]    3    7
>>[4,]    4    8
>> > tName<-"that"
>> > eval(parse(text=paste(tName,"Mat <-",aMat,sep="")))
>> > thatMat
>>[1] 8
>> >
>>
>>______________________________________________
>>R-devel@stat.math.ethz.ch mailing list
>>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>>
>>
>>    
>>
>
>
>------------------------------------------------------------------------------
>Notice:  This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (One Merck Drive, Whitehouse Station, New Jersey, USA 08889), and/or its affiliates (which may be known outside the United States as Merck Frosst, Merck Sharp & Dohme or MSD and in Japan, as Banyu) that may be confidential, proprietary copyrighted and/or legally privileged. It is intended solely for the use of the individual or entity named on this message.  If you are not the intended recipient, and have received this message in error, please notify us immediately by reply e-mail and then delete it from your system.
>------------------------------------------------------------------------------
>  
>

	[[alternative HTML version deleted]]

From ripley at stats.ox.ac.uk  Tue Jul 27 22:09:04 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Jul 27 22:09:10 2004
Subject: [Rd] dynamic creation of matrix objects (PR#7136)
In-Reply-To: <20040727194739.B530410461@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0407272105120.4367-100000@gannet.stats>

PLEASE read the FAQ about BUGS.  R-bugs is not for users to report their 
own lack of understanding, and not for questions.

Take a look at

> parse(text=paste(tName,"Mat <-",aMat,sep=""))
expression(thatMat <- 1, thatMat <- 2, thatMat <- 3, thatMat <- 4,
    thatMat <- 5, thatMat <- 6, thatMat <- 7, thatMat <- 8)

The bug is in your understanding of your own code, which is working
correctly.  What do you really want to do here?

assign(paste(tName,"Mat", sep=""), aMat)

perhaps?

On Tue, 27 Jul 2004 cliff@research.telcordia.com wrote:

> I am trying to assign the values in a matrix to an object whose name is 
> created dynamically, i.e., using eval-parse-text-paste sequence.  It 
> seems that only the very last value in the matrix is assigned to the new 
> object.  I have included an example below where I create a matrix object 
> called "aMat".  I can assign the contents of aMat to another object 
> called "thisMat."  However, when I attempt to make a similar assignment 
> to a new object called "thatMat", only the last value is returned, when 
> queried.  Does anybody know whether this is a bug...or am I doing 
> something wrong?
> 
> Cliff Behrens
> 
>  > aMat<- matrix(c(1,2,3,4,5,6,7,8),ncol=2)
>  > aMat
>      [,1] [,2]
> [1,]    1    5
> [2,]    2    6
> [3,]    3    7
> [4,]    4    8
>  > thisMat<- aMat
>  > thisMat
>      [,1] [,2]
> [1,]    1    5
> [2,]    2    6
> [3,]    3    7
> [4,]    4    8
>  > tName<-"that"
>  > eval(parse(text=paste(tName,"Mat <-",aMat,sep="")))
>  > thatMat
> [1] 8
>  >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From k.hansen at biostat.ku.dk  Wed Jul 28 01:29:24 2004
From: k.hansen at biostat.ku.dk (k.hansen@biostat.ku.dk)
Date: Wed Jul 28 01:29:30 2004
Subject: [Rd] summaryRprof (PR#7137)
Message-ID: <20040727232924.F0344FC29@slim.kubism.ku.dk>

Full_Name: Kasper Daniel Hansen
Version: 1.9.1
OS: linux
Submission from: (NULL) (128.32.208.249)


summaryRprof gives a very different result than R CMD Rprof. This is because
summaryRprof does not record calls starting with a dot, most notably .C calls.

Following a suggestion by P.Dalgaard I tried replacing the two ls calls with
ls(, all.names = TRUE). IE. the two lines

    totalt <- sapply(ls(envir = total), function(f) get(f, envir = total))
    selft <- sapply(ls(envir = self), function(f) get(f, envir = self))

was replaced with


    totalt <- sapply(ls(envir = total, all.names= TRUE), 
                     function(f) get(f, envir = total))
    selft <- sapply(ls(envir = self, all.names = TRUE), 
                    function(f) get(f, envir = self))

This seemed to solve the problem.

From ligges at statistik.uni-dortmund.de  Wed Jul 28 10:15:11 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed Jul 28 10:14:28 2004
Subject: [Rd] Incorrect display of b[hat((a))] expression in plots
In-Reply-To: <000001c473fc$e927a9a0$01000001@hblaptop>
References: <000001c473fc$e927a9a0$01000001@hblaptop>
Message-ID: <4107608F.2090802@statistik.uni-dortmund.de>

Confirmed.

I might look at it during August, since the underlying code is not that 
new to me. If Paul (or anybody else from R Core) has not answered yet 
and there is not already a related bug report in the database, I'd 
suggest to submit a bug report.

Uwe

Henrik Bengtsson wrote:

> Hi, I am not sure if this is a bug or a non-implement feature of
> text-drawing functions with TeX-style expression, but hat() and some of its
> equals does not get the right "bounding boxes" if they are put in sub- or
> superscripts. For instance, for the expression 'b[hat(a)]' the hat() seems
> to shift 'hat(a)' too much to the right of 'b'. Try the below example and
> you'll see what I mean:
> 
> label <- list(
>   expression((b[sqrt(a)])),
>   expression((b[bar(a)])),
>   expression((b[widehat(a)])),
>   expression((b[widetilde(a)])),
>   expression((tilde(a))),
>   # Problematic:
>   expression((b[dot(a)])),
>   expression((b[ring(a)])),
>   expression((b[hat(a)])),
>   expression((b[tilde(a)])),
>   expression((b^dot(a))),
>   expression((b^ring(a))),
>   expression((b^hat(a))),
>   expression((b^tilde(a)))
> )
> 
> plot(NA, xlim=c(0,2), ylim=c(-1,length(label)))
> for (kk in seq(label))
>   text(1,length(label)-kk, label=label[[kk]])
> 
> The problem occurs for the postscript and png devices too (I haven't tried
> the others).
> 
> I'm on WindowsXP and "R version 1.9.1, 2004-06-21" (non-patched).
> 
> Best wishes
> 
> Henrik Bengtsson
> 
> Dept. of Mathematical Statistics @ Centre for Mathematical Sciences 
> Lund Institute of Technology/Lund University, Sweden (+2h UTC)
> +46 46 2229611 (off), +46 708 909208 (cell), +46 46 2224623 (fax)
> h b @ m a t h s . l t h . s e, http://www.maths.lth.se/~hb/
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From maechler at stat.math.ethz.ch  Wed Jul 28 10:18:10 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed Jul 28 10:18:12 2004
Subject: [Rd] Problems with Lapack's eigen() on 64-bit
In-Reply-To: <Pine.LNX.4.44.0407271155110.24352-100000@gannet.stats>
References: <16646.13212.240890.26590@gargle.gargle.HOWL>
	<Pine.LNX.4.44.0407271155110.24352-100000@gannet.stats>
Message-ID: <16647.24898.976986.75803@gargle.gargle.HOWL>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk>
>>>>>     on Tue, 27 Jul 2004 13:17:48 +0100 (BST) writes:

    BDR> Our `public' Opteron (dual 248, FC2 + Goto BLAS) is
    BDR> right, as is Solaris 64-bit. FC2 is using gcc version
    BDR> 3.3.3 20040412 (Red Hat Linux 3.3.3-7), quite a lot
    BDR> later.

    BDR> I would try updating your compiler (to 3.4.1?) and
    BDR> perhaps try a different BLAS.

I've now hand-compiled gcc 3.4.1 and recompiled R-patched and
R-devel both configured "--without-blas" and the eigen()
problem is gone.

For the record, note that before the problem appeared both for
"--with-blas=goto" and "--without-blas".

I've also added a regression test to R-devel which makes sure
that "make check" only passes when the mentioned eigen()
computation is correct.

Martin

    BDR> We do have RHEL for Opteron, but AFAIK it is not on a
    BDR> system at present.  (There are others running SuSE
    BDR> 9.0/.1, I believe.)

    BDR> On Tue, 27 Jul 2004, Martin Maechler wrote:

    >> I'm only now realizing that we have severe problems with
    >> R on our AMD 'Opteron' and 'Athlon64' clients running
    >> Redhat Enterprise with all 64-bit libraries (AFAICS).
    >> 
    >> The Lapack problem happens for R-patched and R-devel both
    >> on the Opteron and the Athlon64.
    >> 
    >> Here are platform details:
    >> 
    >> o "gcc -v" and "g77 -v" both end with the line gcc
    >> version 3.2.3 20030502 (Red Hat Linux 3.2.3-34)
    >> 
    >> o I've used ...../configure --without-blas
    >> 
    >> 1) Opteron ("deb7", a dual-processor compute server):
    >> 
    >> - uname -a : Linux deb7 2.4.21-9.0.3.ELsmp #1 SMP Tue Apr
    >> 20 19:44:29 EDT 2004 x86_64 x86_64 x86_64 GNU/Linux -
    >> /proc/cpuinfo contains (among much more) vendor_id :
    >> AuthenticAMD cpu family : 15 model : 5 model name : AMD
    >> Opteron(tm) Processor 248
    >> 
    >> 2) Athlon64 (a simple "new generation" client - to become
    >> my desktop soon):
    >> 
    >> - uname -a : Linux setup-12 2.4.21-15.0.2.EL #1 Wed Jun
    >> 16 22:41:44 EDT 2004 x86_64 x86_64 x86_64 GNU/Linux
    >> 
    >> - /proc/cpuinfo contains vendor_id : AuthenticAMD cpu
    >> family : 15 model : 14 model name : AMD Athlon(tm) 64
    >> Processor 2800+
    >> 
    >> ----------------
    >> 
    >> Now the Lapack problem, easily seen from the base eigen()
    >> example:
    >> 
    >> > eigen(cbind(1, 3:1, 1:3)) $values [1] 5.7015621
    >> 1.0000000 -0.7015621
    >> 
    >> $vectors [,1] [,2] [,3] [1,] 0.4877939 -0.7181217
    >> -0.9576161 [2,] 0.6172751 -0.3893848 0.2036804 [3,]
    >> 0.6172751 0.5767849 0.2036804
    >> 
    >> which is simply plainly wrong and eigen(cbind(1, 3:1,
    >> 1:3), EISPACK=TRUE) gives the correct eigen values c(5,
    >> 1, 0) and corresponding eigenvectors.
    >> 
    >> IIRC, we've already dealt with a Lapack problem, and that
    >> workaround (built into R-devel's Makefiles) has been to
    >> use -ffloat-store for the compilation of
    >> src/modules/lapack/dlamc.f
    >> 
    >> ----------
    >> 
    >> Thank you for hints / suggestions.
    >> 
    >> Others with 64-bit platforms might also try to see what
    >> eigen(cbind(1, 3:1, 1:3)) gives there.

    BDR> -- Brian D. Ripley, ripley@stats.ox.ac.uk Professor of
    BDR> Applied Statistics, http://www.stats.ox.ac.uk/~ripley/
    BDR> University of Oxford, Tel: +44 1865 272861 (self) 1
    BDR> South Parks Road, +44 1865 272866 (PA) Oxford OX1 3TG,
    BDR> UK Fax: +44 1865 272595

    BDR> ______________________________________________
    BDR> R-devel@stat.math.ethz.ch mailing list
    BDR> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From rls54 at cornell.edu  Wed Jul 28 18:08:35 2004
From: rls54 at cornell.edu (rls54@cornell.edu)
Date: Wed Jul 28 18:08:37 2004
Subject: [Rd] startup bug (PR#7138)
Message-ID: <20040728160835.7767EF539@slim.kubism.ku.dk>

Full_Name: Rob Strawderman
Version: 1.9.1
OS: red hat linux 8
Submission from: (NULL) (128.253.217.211)


The following demonstrates the basic problem:

[martingale <99>]% rm .RData 
rm: remove regular file `.RData'? y

[martingale <100>]% R

R : Copyright 2004, The R Foundation for Statistical Computing
Version 1.9.1  (2004-06-21), ISBN 3-900051-00-3

[deleted]

> source("test.q")

Loading required package: nlme 
Loading required package: MASS 
Loading required package: Matrix 

[deleted - test.q uses the MASS function glmmPQL
and runs just fine. Some output is written to a 
 structure I wish to save]

> q()
Save workspace image? [y/n/c]: y

[martingale <101>]% R

R : Copyright 2004, The R Foundation for Statistical Computing
Version 1.9.1  (2004-06-21), ISBN 3-900051-00-3

Error: object 'family' not found whilst loading namespace 'MASS'
Fatal error: unable to restore saved data in .RData


If I simply remove .RData, start up R, load the indicated libraries,
and quit & save, I can start R up again with no problem.

From ripley at stats.ox.ac.uk  Wed Jul 28 19:06:14 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Jul 28 19:06:21 2004
Subject: [Rd] startup bug (PR#7138)
In-Reply-To: <20040728160835.7767EF539@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0407281759440.630-100000@gannet.stats>

This is almost surely not bug in R: it is working as intended.

You can search the R-help archives for similar problems and several 
solutions.  However, your main problem is that your MASS is not up to 
date, and you need to run update.packages().  (The current MASS has a 
workaround for this.)

Note that there is nothing reproducible here, and we have to guess that
you have the same cause as the previously reported symptom.  There is an
extensive section on BUGS in the FAQ: please read and follow its advice.

On Wed, 28 Jul 2004 rls54@cornell.edu wrote:

> Full_Name: Rob Strawderman
> Version: 1.9.1
> OS: red hat linux 8
> Submission from: (NULL) (128.253.217.211)
> 
> 
> The following demonstrates the basic problem:
> 
> [martingale <99>]% rm .RData 
> rm: remove regular file `.RData'? y
> 
> [martingale <100>]% R
> 
> R : Copyright 2004, The R Foundation for Statistical Computing
> Version 1.9.1  (2004-06-21), ISBN 3-900051-00-3
> 
> [deleted]
> 
> > source("test.q")
> 
> Loading required package: nlme 
> Loading required package: MASS 
> Loading required package: Matrix 
> 
> [deleted - test.q uses the MASS function glmmPQL
> and runs just fine. Some output is written to a 
>  structure I wish to save]
> 
> > q()
> Save workspace image? [y/n/c]: y
> 
> [martingale <101>]% R
> 
> R : Copyright 2004, The R Foundation for Statistical Computing
> Version 1.9.1  (2004-06-21), ISBN 3-900051-00-3
> 
> Error: object 'family' not found whilst loading namespace 'MASS'
> Fatal error: unable to restore saved data in .RData
> 
> 
> If I simply remove .RData, start up R, load the indicated libraries,
> and quit & save, I can start R up again with no problem.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From gunter.berton at gene.com  Wed Jul 28 20:22:42 2004
From: gunter.berton at gene.com (gunter.berton@gene.com)
Date: Wed Jul 28 20:22:44 2004
Subject: [Rd] R 1.9.1 Crash in Win2000 (PR#7139)
Message-ID: <20040728182242.266D2FCDC@slim.kubism.ku.dk>


This probably should go to Duncan Murdoch ...

The following reliably crashes R Version 1.9.1 on Win2000:

winDialogString(paste(sample(letters,500,rep=TRUE),
collapse=""),default="")

(presumably because of the too lengthy message string; but what is the
length limit?).
--

Bert Gunter

Non-Clinical Biostatistics
Genentech
MS: 240B
Phone: 650-467-7374


"The business of the statistician is to catalyze the scientific learning
process."

 -- George E.P. Box

From gunter.berton at gene.com  Wed Jul 28 20:42:12 2004
From: gunter.berton at gene.com (gunter.berton@gene.com)
Date: Wed Jul 28 20:42:16 2004
Subject: [Rd] [Re: R 1.9.1 Crash in Win2000] (PR#7140)
Message-ID: <20040728184212.3A050F58D@slim.kubism.ku.dk>

I should have added that this is under RGui.exe of course. -- Bert

-------- Original Message --------
Subject: R 1.9.1 Crash in Win2000
Date: Wed, 28 Jul 2004 11:22:30 -0700
From: Berton Gunter <bgunter@gene.com>
Organization: Genentech, Inc.
To: r-bugs@biostat.ku.dk


This probably should go to Duncan Murdoch ...

The following reliably crashes R Version 1.9.1 on Win2000:

winDialogString(paste(sample(letters,500,rep=TRUE),
collapse=""),default="")

(presumably because of the too lengthy message string; but what is the
length limit?).
--

Bert Gunter

Non-Clinical Biostatistics
Genentech
MS: 240B
Phone: 650-467-7374


"The business of the statistician is to catalyze the scientific learning
process."

 -- George E.P. Box

From hb at maths.lth.se  Wed Jul 28 21:11:29 2004
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Wed Jul 28 21:11:38 2004
Subject: [Rd] read.table() and NULL for colClasses
Message-ID: <000001c474d6$b0e5cc90$410040d5@hblaptop>

Hi,

is there are reason for not supporting NULL or "NULL" values for argument
colClasses in read.table(), much like you can use NULL values for argument
'what' in scan()? This would help quite a bit when reading large data files
where only a few columns are of interest. 

I've modfied read.table() to so it calls scan(what=...) also with NULLs for
the fields to be skipped. Here's the diff of readtable.R (from the
R-1.9.1.tgz; 9,591,217 bytes):

diff readtable.new.R readtable.R
117,123d116
<     # Skip NULL columns in scan()
<     void <- sapply(colClasses, FUN=identical, "NULL") |
<             sapply(colClasses, FUN=is.null)
<     # If all (data) columns are NULL, return empty data frame.
<     if (sum(!void) <= 1*rlabp)
<       return(data.frame())
<     what[void] <- list(NULL)
131c124
<     nlines <- length(data[[which(!void)[1]]])
---
>     nlines <- length(data[[1]])
161c154
<     for (i in (1:cols)[!known & !void]) {
---
>     for (i in 1:cols) {
171,178d163
<     # Skipped row names equals row.names=NULL.
<     if (rlabp) {
<       if (void[1]) {
<         row.names <- NULL
<         data <- data[-1]
<       }
<       void <- void[-1]
<     }
201,202d185
<     # Remove NULL columns
<     data[void] <- NULL

and a diff for read.table.Rd:

diff read.table.new.Rd read.table.Rd
102,104c102
<     \code{NA} when \code{\link{type.convert}} is used.  Columns for
<     which the value is \code{"NULL"} (or \code{NULL} in a list) are
<     skipped. NB: \code{as} is
---
>     \code{NA} when \code{\link{type.convert}} is used.  NB: \code{as} is
181,183c179
<   the five atomic vector classes. Skipping columns with \code{"NULL"}
<   (or \code{NULL} will also require less memory.
<
---
>   the five atomic vector classes.

Note that there is already an, what I assume is unintentional, effect of
setting a colClasses to "NULL". The data conversion, which happens *after*
scan() has read the data anyway, "NULL" will NULL a column via as(x,
"NULL"), but unfortunately the wrong column. If not the above modifications,
maybe a warning for the latter?

Best wishes

Henrik Bengtsson

Dept. of Mathematical Statistics @ Centre for Mathematical Sciences 
Lund Institute of Technology/Lund University, Sweden (+2h UTC)
+46 46 2229611 (off), +46 708 909208 (cell), +46 46 2224623 (fax)
h b @ m a t h s . l t h . s e, http://www.maths.lth.se/~hb/

From rls54 at cornell.edu  Wed Jul 28 21:19:48 2004
From: rls54 at cornell.edu (Rob Strawderman)
Date: Wed Jul 28 21:19:44 2004
Subject: [Rd] startup bug (PR#7138)
In-Reply-To: <Pine.LNX.4.44.0407281759440.630-100000@gannet.stats>
Message-ID: <Pine.LNX.4.44.0407281518520.28705-100000@martingale.bscb.cornell.edu>


The suggestion to use update.packages() appears to have
solved the problem, thanks.

-- 
***************************************************************************
Robert Strawderman		Graduate Director, Field of Statistics

BSCB Department                 Email:  rls54@cornell.edu
Cornell University              Voice:  (607) 254-1398
437 Warren Hall                 Main:   (607) 255-8066
Ithaca, NY 14853                Fax:    (607) 255-4698

	WEB: www.bscb.cornell.edu/strawderman

From gregory_r_warnes at groton.pfizer.com  Wed Jul 28 21:25:09 2004
From: gregory_r_warnes at groton.pfizer.com (Warnes, Gregory R)
Date: Wed Jul 28 21:25:42 2004
Subject: [Rd] Packages of snippets?
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20C52185B@groexmb02.pfizer.com>


FWIW, I already include function 'snippets' in the gregmisc package (soon to
be a package bundle).   I would be happy to do this in a more public
fashion.

I generally require that the sumitter provide both the R code and a
corresponding .Rd file.

-Greg


> -----Original Message-----
> From: r-devel-bounces@stat.math.ethz.ch
> [mailto:r-devel-bounces@stat.math.ethz.ch]On Behalf Of Roger D. Peng
> Sent: Wednesday, June 23, 2004 11:35 PM
> To: Duncan Murdoch
> Cc: Patrick Connolly; Barry Rowlingson; r-devel@stat.math.ethz.ch
> Subject: Re: [Rd] Packages of snippets?
> 
> 
> Duncan, I very much like your idea of a RNews/JSS "package" which 
> would contain code snippets from different contributors.  In 
> fact, I would be willing to maintain such a package if it came 
> into existence.  One note (I'm not sure if this is a flaw, 
> strictly speaking), the package would only be able to cover 
> functions.  So general "tips", for example those covered on the 
> Rtips webpage (http://www.ku.edu/~pauljohn/R/Rtips.html), would 
> not be able to make their way into the package.
> 
> Another issue is that as of now, there are many useful tools for 
> checking for errors/problems in *packages*.  But there's no real 
> way to check a single code file and a documentation file (say, an 
> .Rd file).  One possibility might be to force contributors to 
> submit something like a DESCRIPTION file for their function (with 
> the necessary contact information), along with the code and a man 
> page.  Then there would be anough material to make a fake package 
> on which to run R CMD check.
> 
> -roger
> 
> Duncan Murdoch wrote:
> 
> > [Moved from r-help to r-devel]
> > 
> > On Thu, 24 Jun 2004 09:29:12 +1200, Patrick Connolly
> > <p.connolly@hortresearch.co.nz> wrote:
> > 
> > 
> >>I made myself a function in the S-PLUS days which I've modified to
> >>work in R.  It involved adding another few functions to add dates to
> >>objects.
> > 
> > 
> > This isn't something I'd use, since I prefer to keep 
> objects in source
> > form, but I bet there are quite a few people who would use it if it
> > were generally available.
> > 
> > 
> >>I've toyed with the idea of adding an object size column 
> but it's not
> >>important enough for my use.  Since I revisit projects over a period
> >>of years at times, the date is very useful information -- in fact,
> >>it's the main reason why I wrote it.
> >>
> >>My code is not elegant enough for an esteemed place on 
> CRAN.  I could
> >>make it a lot better myself if I spent the time on it, but it works
> >>well enough for me as it is, so in that sense, it ain't broke.
> >>However, if anyone is interested in having such 
> functionality my code
> >>could be a good starting point.
> > 
> > 
> > Inelegance is no excuse!  However, I do understand the feeling of
> > writing a nice little function, and not knowing exactly what to do
> > with it:  CRAN is crowded, and it does seem that an entire package
> > just to support one or two simple functions is a bit of overkill.
> > 
> > Can we work out a way to publish such things?  Here's a 
> proposal, with
> > some serious flaws listed below.  Can someone fix them?
> > 
> >  - It should be easy to publish a short article describing your nice
> > little function, and making the code available to others.  (I think
> > this is already in place, either by publishing in RNews or 
> Journal of
> > Statistical Software, as a code snippet.)
> > 
> >  - It should be easy for users to get it, together with man pages,
> > etc.  This is not in place, unless you package your 
> function and send
> > it to CRAN.  What I'd propose is that a volunteer should act as an
> > editor of an "RNews" or "JSS" package, that contains *all* of the
> > snippets that have been published in RNews or JSS.
> > 
> > Some major flaws in this proposal are:
> > 
> >  - It needs a volunteer editor.
> > 
> >  - The editor would have to be organized, and willing to bug authors
> > for updates whenever R changes and breaks their snippet (or makes it
> > obsolete).  If there's no one willing to do this, the editor should
> > feel free to drop the snippet from the package.
> > 
> >  - There'd have to be a way for someone to see which snippets don't
> > have maintainers so have been dropped, but could be resurrected.
> > 
> >  - If it's successful, there'll be name clashes.  The editor should
> > try to head these off from the start, by setting some rules for what
> > kinds of names should be used for internal functions, and 
> what public
> > names should look like.
> > 
> >  - There aren't actually that many snippets being published, because
> > it's hard work to convert something that works "well enough 
> for me" to
> > something we'd like others to see.
> > 
> > Duncan Murdoch
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> 
> -- 
> Roger D. Peng
> http://www.biostat.jhsph.edu/~rpeng/
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 


LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}

From ripley at stats.ox.ac.uk  Wed Jul 28 22:12:56 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Jul 28 22:13:02 2004
Subject: [Rd] read.table() and NULL for colClasses
In-Reply-To: <000001c474d6$b0e5cc90$410040d5@hblaptop>
Message-ID: <Pine.LNX.4.44.0407282101150.794-100000@gannet.stats>

NULL is not a valid value for colClasses and I don't see why you thought
it was.  colClasses has to be character according to the documentation, so
"NULL" is allowed but not NULL.

Your diff appears to be backwards for a patch.  A patch against the 
current R-devel sources is what is needed, including some regression 
tests.

On Wed, 28 Jul 2004, Henrik Bengtsson wrote:

> Hi,
> 
> is there are reason for not supporting NULL or "NULL" values for argument
> colClasses in read.table(), much like you can use NULL values for argument
> 'what' in scan()? This would help quite a bit when reading large data files
> where only a few columns are of interest. 

Is that a common enough case to make this worth the code complication,
given that scan() (or better, a DBMS) can be used?  The usual reason is
that R is maintained by a small and overworked team and adding
complications needs justification, not not adding them.

> I've modfied read.table() to so it calls scan(what=...) also with NULLs for
> the fields to be skipped. Here's the diff of readtable.R (from the
> R-1.9.1.tgz; 9,591,217 bytes):
> 
> diff readtable.new.R readtable.R
> 117,123d116
> <     # Skip NULL columns in scan()
> <     void <- sapply(colClasses, FUN=identical, "NULL") |
> <             sapply(colClasses, FUN=is.null)
> <     # If all (data) columns are NULL, return empty data frame.
> <     if (sum(!void) <= 1*rlabp)
> <       return(data.frame())
> <     what[void] <- list(NULL)
> 131c124
> <     nlines <- length(data[[which(!void)[1]]])
> ---
> >     nlines <- length(data[[1]])
> 161c154
> <     for (i in (1:cols)[!known & !void]) {
> ---
> >     for (i in 1:cols) {
> 171,178d163
> <     # Skipped row names equals row.names=NULL.
> <     if (rlabp) {
> <       if (void[1]) {
> <         row.names <- NULL
> <         data <- data[-1]
> <       }
> <       void <- void[-1]
> <     }
> 201,202d185
> <     # Remove NULL columns
> <     data[void] <- NULL
> 
> and a diff for read.table.Rd:
> 
> diff read.table.new.Rd read.table.Rd
> 102,104c102
> <     \code{NA} when \code{\link{type.convert}} is used.  Columns for
> <     which the value is \code{"NULL"} (or \code{NULL} in a list) are
> <     skipped. NB: \code{as} is
> ---
> >     \code{NA} when \code{\link{type.convert}} is used.  NB: \code{as} is
> 181,183c179
> <   the five atomic vector classes. Skipping columns with \code{"NULL"}
> <   (or \code{NULL} will also require less memory.
> <
> ---
> >   the five atomic vector classes.
> 
> Note that there is already an, what I assume is unintentional, effect of
> setting a colClasses to "NULL". The data conversion, which happens *after*
> scan() has read the data anyway, "NULL" will NULL a column via as(x,
> "NULL"), but unfortunately the wrong column. If not the above modifications,
> maybe a warning for the latter?

That's not usage as documented so the effect is definitely unintentional.
We can't catch all misuses!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From kwright at eskimo.com  Thu Jul 29 00:09:04 2004
From: kwright at eskimo.com (Kevin Wright)
Date: Thu Jul 29 00:09:13 2004
Subject: [Rd] Parsing multi-line strings.  Bug?  Feature?
Message-ID: <200407282209.PAA03103@eskimo.com>

I have an S-Plus library that I would like to port to R.  The library 
sends a mix of static and dynamic output to an html file.  For example

cat("
...
Big block of HTML formatting code
...
")
cat(dat())
cat("
More static text
")

With S-Plus I can just cut and paste HTML code from other files into my 
S-Plus script file.  This makes maintenance of the script fairly easy.

The R parser chokes on this and requires strings to have a backslash for 
line continuation:

f = function(){
 sometext = " abc \
def"
}

Mark Bravington discussed the same issue (with comments about
the documentation) here:
http://tolstoy.newcastle.edu.au/R/help/02b/5199.html

I would like to echo Mark's request that compatability with S-Plus 
be considered.

Thanks

Kevin Wright

From ggrothendieck at myway.com  Thu Jul 29 00:48:17 2004
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Thu Jul 29 00:48:24 2004
Subject: [Rd] Parsing multi-line strings.  Bug?  Feature?
Message-ID: <20040728224817.3F03512CCC@mprdmxin.myway.com>



One workaround is the idea in 

http://maths.newcastle.edu.au/~rking/R/help/03a/6855.html

which, applied to this problem would be used by entering the
snippets as inline data files and reading them into R variables
which can then be cat'ed.  You do have to preface each line of
the inline data with a marker but that is trivial in 
sufficiently powerful text editors.

---

Date:   	Wed, 28 Jul 2004 15:09:04 -0700 (PDT)
From:   	Kevin Wright <kwright@eskimo.com>
To:   	<r-devel@stat.math.ethz.ch>
Subject:   	[Rd] Parsing multi-line strings. Bug? Feature?

I have an S-Plus library that I would like to port to R. The library
sends a mix of static and dynamic output to an html file. For example

cat("
...
Big block of HTML formatting code
...
")
cat(dat())
cat("
More static text
")

With S-Plus I can just cut and paste HTML code from other files into my
S-Plus script file. This makes maintenance of the script fairly easy.

The R parser chokes on this and requires strings to have a backslash for
line continuation:

f = function(){
sometext = " abc \
def"
}

Mark Bravington discussed the same issue (with comments about
the documentation) here:
http://tolstoy.newcastle.edu.au/R/help/02b/5199.html

I would like to echo Mark's request that compatability with S-Plus
be considered.

Thanks

Kevin Wright

From ripley at stats.ox.ac.uk  Thu Jul 29 09:45:31 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Jul 29 09:45:42 2004
Subject: [Rd] Parsing multi-line strings.  Bug?  Feature?
In-Reply-To: <200407282209.PAA03103@eskimo.com>
Message-ID: <Pine.LNX.4.44.0407290839150.1679-100000@gannet.stats>

Perhaps the two of you would like to submit a patch for consideration?
I think you can take it that it was considered in Dec 2002 and no one 
wanted to do the work to check the feasibility.

The form in Open Source projects is that those who want a feature 
implement it and offer it to the maintainers.

On Wed, 28 Jul 2004, Kevin Wright wrote:

> I have an S-Plus library that I would like to port to R.  The library 
> sends a mix of static and dynamic output to an html file.  For example
> 
> cat("
> ...
> Big block of HTML formatting code
> ...
> ")
> cat(dat())
> cat("
> More static text
> ")
> 
> With S-Plus I can just cut and paste HTML code from other files into my 
> S-Plus script file.  This makes maintenance of the script fairly easy.
> 
> The R parser chokes on this and requires strings to have a backslash for 
> line continuation:
> 
> f = function(){
>  sometext = " abc \
> def"
> }
> 
> Mark Bravington discussed the same issue (with comments about
> the documentation) here:
> http://tolstoy.newcastle.edu.au/R/help/02b/5199.html
> 
> I would like to echo Mark's request that compatability with S-Plus 
> be considered.
> 
> Thanks
> 
> Kevin Wright
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From simon.urbanek at math.uni-augsburg.de  Thu Jul 29 22:37:47 2004
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Thu Jul 29 22:37:53 2004
Subject: [Rd] cross-compile R darwin2win, almost there
Message-ID: <26A73152-E19F-11D8-8118-000A959F327E@math.uni-augsburg.de>

I'm trying to cross-compile R on a Mac OS X box to target Win32. It 
works quite well, everything works, except for one fortran file ppr.f 
in the stats package:

---------- Making package stats ------------
   adding build stamp to DESCRIPTION
   installing NAMESPACE file and metadata
   making DLL ...
i386-mingw32-g77 -O2 -Wall   -c ppr.f -o ppr.o
ppr.f:803: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:803: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:803: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:803: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:803: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:803: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:803: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:803: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:803: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:803: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:803: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:803: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:1186: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:1186: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:1186: sorry, unimplemented: data initializer on host with 
different endianness
ppr.f:1186: sorry, unimplemented: data initializer on host with 
different endianness
make[5]: *** [ppr.o] Error 1
make[4]: *** [srcDynlib] Error 2

It's just a "block data" with some common variables that are 
initialized en-block. Obviously g77 tries to copy the whole block and 
bails out, because it's unsure about the endianness conversion (could 
be int/double whatever). My Fortran knowledge is rather limited, so can 
anyone provide me with alternate Fortran code that will use regular 
assignments instead of the "block data", so we can work around the 
missing feature of the compiler? If someone has a different idea, 
that's fine, too :).

Otherwise it works very nicely, the compiled R works (except that stats 
is not compiled of course) ... Solving the above would allow us to 
provide binary packages for both platforms OS X and Windows using just 
one machine to automatically generate both... (for those interested I 
could put the cross-compile tools on my pages..)

Any help is appreciated,
Simon

---
Simon Urbanek
Department of computer oriented statistics and data analysis
Universit?tsstr. 14
86135 Augsburg
Germany

Tel: +49-821-598-2236
Fax: +49-821-598-2280

Simon.Urbanek@Math.Uni-Augsburg.de
http://simon.urbanek.info

From tlogvinenko at partners.org  Thu Jul 29 22:43:20 2004
From: tlogvinenko at partners.org (tlogvinenko@partners.org)
Date: Thu Jul 29 22:43:22 2004
Subject: [Rd] aov for unbalanced design (PR#7144)
Message-ID: <20040729204320.05FE5FC04@slim.kubism.ku.dk>

Full_Name: Tanya Logvinenko
Version: 1.7.0
OS: Windows 2000
Submission from: (NULL) (132.183.156.125)


For unbalanced design, I ran into problem with ANOVA (aov function). The sum of
squares for only for the second factor and total are computed correctly, but sum
of squares for the first factor is computed incorreclty. Changing order of
factors in the formula changes the ANOVA table. For the balanced design, there
is no such problem.

> summary(aov(data[1,]~factor1+factor2))
            Df  Sum Sq Mean Sq F value    Pr(>F)    
factor1      5 1524420  304884  6.4529 0.0003229 ***
factor2      7 1447830  206833  4.3776 0.0017808 ** 
Residuals   31 1464674   47248                      
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1 
> summary(aov(data[1,]~factor2+factor1))
            Df  Sum Sq Mean Sq F value    Pr(>F)    
factor2      7 1648225  235461  4.9836 0.0007295 ***
factor1      5 1324025  264805  5.6046 0.0008612 ***
Residuals   31 1464674   47248                      
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1

From pburns at pburns.seanet.com  Thu Jul 29 22:46:27 2004
From: pburns at pburns.seanet.com (Patrick Burns)
Date: Thu Jul 29 22:47:03 2004
Subject: [Rd] Re: matrix subsetting  (was: [R] as(obj,"matrix"))
In-Reply-To: <4107C973.F6C106E0@research.bell-labs.com>
References: <200407281655350828.732ED9CA@mail.math.fu-berlin.de>
	<4107C973.F6C106E0@research.bell-labs.com>
Message-ID: <41096223.6080507@pburns.seanet.com>

On a related topic, a client came up with this example
a few days ago which I was unable to explain.  (But he
did heed my advise of "don't do that".)


 > matrixObj <- array(1:4, c(2,2))
 > class(matrixObj) <- "matrix"
 > fooObj <- matrixObj
 > class(fooObj) <- "foo"
 > fooObj[1:2]
Testing
     [,1] [,2]
[1,]    1    3
[2,]    2    4
attr(,"class")
[1] "foo"
 > matrixObj[1:2]
[1] 1 2
 > get("[.matrix")
function(x, i, j, drop = if(missing(i)) TRUE else length(cols)==1)
{   
    cat("Testing\n")
    x  
}
 > get("[.foo")
function(x, i, j, drop = if(missing(i)) TRUE else length(cols)==1)
{   
    cat("Testing\n")
    x  
}

Everything is the same except for the name of the class.  When
the class is "matrix", it ignores the subset method.  But the very
same code works if the class is "foo".  This is 1.9.1 Windows,
and the same happens with  1.7.0 (the oldest version I have on
my machine).

What is happening here?


Patrick Burns

Burns Statistics
patrick@burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")


John Chambers wrote:

>Wolski wrote:
>  
>
>>Hi!
>>
>>Here a simple example.
>>
>>setClass("myclass"
>>,representation(info="character")
>>,contains="matrix"
>>)
>>
>>rownames(dd)<-c("a","b")
>>tt<-new("myclass",dd)
>>#the source of pain.
>>as(tt,"matrix")<-matrix(1,3,3)
>>Error: length of dimnames [1] not equal to array extent
>>
>>Is there a different way to do what I would like to do (I would like to change the @.Data and all its attributes in the object)?
>>    
>>
>
>It's not particularly a problem with as().  Your class just doesn't
>behave as you expect.
>
>"matrix" is not a formal class with slots.  (It isn't even an S3 class
>in R; attr(x,"class") is NULL.)  So you cannot expect classes extending
>"matrix" to know what a matrix is supposed to be.
>
>Part of the problem is that matrix objects sometimes have dimnames and
>sometimes don't.  And there is basic code in R that assumes or applies
>constraints on the "dim" or "dimnames".
>
>In S-Plus, "matrix" is a formal class, always having a slot for
>dimnames.  R has not gone that route, at least not yet.
>
>It may be possible to define a new class, "Matrix", say, that looks like
>a matrix to old-style code but has a formal definition.  But the details
>are likely to be tricky, and it's definitely a topic for r-devel, not
>r-help.
>
>John Chambers
>
>  
>
>>Eryk.
>>
>>______________________________________________
>>R-help@stat.math.ethz.ch mailing list
>>https://www.stat.math.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
>>    
>>
>
>  
>

From tlumley at u.washington.edu  Fri Jul 30 00:09:01 2004
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Fri Jul 30 00:09:08 2004
Subject: [Rd] aov for unbalanced design (PR#7144)
In-Reply-To: <20040729204320.05FE5FC04@slim.kubism.ku.dk>
References: <20040729204320.05FE5FC04@slim.kubism.ku.dk>
Message-ID: <Pine.A41.4.58.0407291508260.234570@homer06.u.washington.edu>


It is not a bug. It is supposed to be that way. It is even a FAQ.

	-thomas

On Thu, 29 Jul 2004 tlogvinenko@partners.org wrote:

> Full_Name: Tanya Logvinenko
> Version: 1.7.0
> OS: Windows 2000
> Submission from: (NULL) (132.183.156.125)
>
>
> For unbalanced design, I ran into problem with ANOVA (aov function). The sum of
> squares for only for the second factor and total are computed correctly, but sum
> of squares for the first factor is computed incorreclty. Changing order of
> factors in the formula changes the ANOVA table. For the balanced design, there
> is no such problem.
>
> > summary(aov(data[1,]~factor1+factor2))
>             Df  Sum Sq Mean Sq F value    Pr(>F)
> factor1      5 1524420  304884  6.4529 0.0003229 ***
> factor2      7 1447830  206833  4.3776 0.0017808 **
> Residuals   31 1464674   47248
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
> > summary(aov(data[1,]~factor2+factor1))
>             Df  Sum Sq Mean Sq F value    Pr(>F)
> factor2      7 1648225  235461  4.9836 0.0007295 ***
> factor1      5 1324025  264805  5.6046 0.0008612 ***
> Residuals   31 1464674   47248
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

Thomas Lumley			Assoc. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

From ggrothendieck at myway.com  Fri Jul 30 04:14:33 2004
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Fri Jul 30 04:14:43 2004
Subject: [Rd] Re: matrix subsetting  (was: [R] as(obj,
Message-ID: <20040730021433.E945F12CD7@mprdmxin.myway.com>



Suggest you try R 1.9.1 patched.  This is what I get on 
Windows XP with that:

> matrixObj <- array(1:4, c(2,2))
> class(matrixObj) <- "matrix"
> fooObj <- matrixObj
> class(fooObj) <- "foo"
> fooObj[1:2]
[1] 1 2
> matrixObj[1:2]
[1] 1 2
> getAnywhere("[.matrix")
no object named '[.matrix' was found
> getAnywhere("[.foo")
no object named '[.foo' was found
> 
> args("[.matrix")
Error in args("[.matrix") : couldn't find function "[.matrix"
> body("[.matrix")
Error in get(x, envir, mode, inherits) : variable "[.matrix" of mode "function" was not found
> R.version.string
[1] "R version 1.9.1, 2004-07-13"







Date:   	Thu, 29 Jul 2004 21:46:27 +0100
From:   	Patrick Burns <pburns@pburns.seanet.com>
To:   	John Chambers <jmc@research.bell-labs.com>, <r-devel@stat.math.ethz.ch>
Subject:   	[Rd] Re: matrix subsetting (was: [R] as(obj,"matrix"))

On a related topic, a client came up with this example
a few days ago which I was unable to explain. (But he
did heed my advise of "don't do that".)


> matrixObj <- array(1:4, c(2,2))
> class(matrixObj) <- "matrix"
> fooObj <- matrixObj
> class(fooObj) <- "foo"
> fooObj[1:2]
Testing
[,1] [,2]
[1,] 1 3
[2,] 2 4
attr(,"class")
[1] "foo"
> matrixObj[1:2]
[1] 1 2
> get("[.matrix")
function(x, i, j, drop = if(missing(i)) TRUE else length(cols)==1)
{
cat("Testing\n")
x
}
> get("[.foo")
function(x, i, j, drop = if(missing(i)) TRUE else length(cols)==1)
{
cat("Testing\n")
x
}

Everything is the same except for the name of the class. When
the class is "matrix", it ignores the subset method. But the very
same code works if the class is "foo". This is 1.9.1 Windows,
and the same happens with 1.7.0 (the oldest version I have on
my machine).

What is happening here?


Patrick Burns

Burns Statistics
patrick@burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")


John Chambers wrote:

>Wolski wrote:
>
>
>>Hi!
>>
>>Here a simple example.
>>
>>setClass("myclass"
>>,representation(info="character")
>>,contains="matrix"
>>)
>>
>>rownames(dd)<-c("a","b")
>>tt<-new("myclass",dd)
>>#the source of pain.
>>as(tt,"matrix")<-matrix(1,3,3)
>>Error: length of dimnames [1] not equal to array extent
>>
>>Is there a different way to do what I would like to do (I would like to change the @.Data and all its attributes in the object)?
>>
>>
>
>It's not particularly a problem with as(). Your class just doesn't
>behave as you expect.
>
>"matrix" is not a formal class with slots. (It isn't even an S3 class
>in R; attr(x,"class") is NULL.) So you cannot expect classes extending
>"matrix" to know what a matrix is supposed to be.
>
>Part of the problem is that matrix objects sometimes have dimnames and
>sometimes don't. And there is basic code in R that assumes or applies
>constraints on the "dim" or "dimnames".
>
>In S-Plus, "matrix" is a formal class, always having a slot for
>dimnames. R has not gone that route, at least not yet.
>
>It may be possible to define a new class, "Matrix", say, that looks like
>a matrix to old-style code but has a formal definition. But the details
>are likely to be tricky, and it's definitely a topic for r-devel, not
>r-help.
>
>John Chambers
>
>
>
>>Eryk.
>>

From ripley at stats.ox.ac.uk  Fri Jul 30 07:07:22 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Jul 30 07:07:30 2004
Subject: [Rd] aov for unbalanced design (PR#7144)
In-Reply-To: <20040729204320.05FE5FC04@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0407300556280.3375-100000@gannet.stats>

What do you think is the correct answer and on what authority?
(These are explicitly sequential aka Type 1 anova tables.)

That the SSqs depend on the order of fitting is a feature of an unbalanced 
design.  I believe that R is correct and your understanding is not.

On Thu, 29 Jul 2004 tlogvinenko@partners.org wrote:

> Full_Name: Tanya Logvinenko
> Version: 1.7.0

Oh, please!  Don't send in bug reports from very old versions -- there 
have been 5 releases since then.

> OS: Windows 2000
> Submission from: (NULL) (132.183.156.125)
> 
> 
> For unbalanced design, I ran into problem with ANOVA (aov function). The sum of
> squares for only for the second factor and total are computed correctly, but sum
> of squares for the first factor is computed incorreclty. Changing order of
> factors in the formula changes the ANOVA table. For the balanced design, there
> is no such problem.
> 
> > summary(aov(data[1,]~factor1+factor2))
>             Df  Sum Sq Mean Sq F value    Pr(>F)    
> factor1      5 1524420  304884  6.4529 0.0003229 ***
> factor2      7 1447830  206833  4.3776 0.0017808 ** 
> Residuals   31 1464674   47248                      
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1 
> > summary(aov(data[1,]~factor2+factor1))
>             Df  Sum Sq Mean Sq F value    Pr(>F)    
> factor2      7 1648225  235461  4.9836 0.0007295 ***
> factor1      5 1324025  264805  5.6046 0.0008612 ***
> Residuals   31 1464674   47248                      
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1

The FAQ has a section on BUGS asking for a *reproducible* example.  This 
is not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Freja.Vamborg at astrazeneca.com  Fri Jul 30 14:07:53 2004
From: Freja.Vamborg at astrazeneca.com (Freja.Vamborg@astrazeneca.com)
Date: Fri Jul 30 14:08:20 2004
Subject: [Rd] existence of easy example of .Call??
Message-ID: <950E0EFCFDB083468E2A8BBC812E5E98954FBD@seludsmsx02.selu.astrazeneca.net>

Dear R-develers,

I have been seraching in vain for an example of source-code, using .Call, to
call an R-function from within C.
Am also wondering i this .Call command works for all functions, say if I
write a function analyse<-function()
within my R functoin, can this function be called by the c-code called later
in the same function.

Eg, 

my.function<-function(){
...

analyse<-function() {}

result<-.Call("My.c.code",...)
}

I then want My.c.code to call, analyse..

I have read the R-extension manual, but am just wondernig if anyone has
another example of use of .Call, which may be more clear to a beginning
user.
Many thanks in advance, 
Freja

From liao1k at cmich.edu  Fri Jul 30 15:03:05 2004
From: liao1k at cmich.edu (Liao, Kexiao )
Date: Fri Jul 30 15:03:12 2004
Subject: [Rd] plot(x,y) core dump
Message-ID: <291B348BC59B47468C7824603C326082946164@cmail3.central.cmich.local>

Dear R Development Team,

   I compile R-1.9.1 on AIX 5.2 under 2.9-aix51-020209, and xlf 7.1. In
order to let R compile successfully under gcc 2.9, I have to change one
C statement of file(RHOME//src/modules/X11/devX11.c) line 1768 from
"retrun FALSE" to "retrun NULL", following is C code snapshot:

 

newX11Desc * Rf_allocNewX11DeviceDesc(double ps)

{

    newX11Desc *xd;

    /* allocate new device description */

    if (!(xd = (newX11Desc*)calloc(1, sizeof(newX11Desc))))

        return NULL;

 

    /* From here on, if we need to bail out with "error", */

    /* then we must also free(xd). */

 

    /*  Font will load at first use.  */

 

    if (ps < 6 || ps > 24) ps = 12;

    xd->fontface = -1;

    xd->fontsize = -1;

    xd->basefontface = 1;

    xd->basefontsize = ps;

    xd->handleOwnEvents = FALSE;

    xd->window = (Window) NULL;

 

    return(xd);

}

 

However I got core dump while I try to use plot() from R:

 

 

R : Copyright 2004, The R Foundation for Statistical Computing

Version 1.9.1  (2004-06-21), ISBN 3-900051-00-3

 

R is free software and comes with ABSOLUTELY NO WARRANTY.

You are welcome to redistribute it under certain conditions.

Type 'license()' or 'licence()' for distribution details.

 

R is a collaborative project with many contributors.

Type 'contributors()' for more information and

'citation()' on how to cite R in publications.

 

Type 'demo()' for some demos, 'help()' for on-line help, or

'help.start()' for a HTML browser interface to help.

Type 'q()' to quit R.

 

> help.start()

Making links in per-session dir ...

If /usr/bin/netscape is already running, it is *not* restarted, and

    you must switch to its window.

Otherwise, be patient ...

> x <- rnorm(50)

> y <- rnorm(x)

> plot(x,y)

Illegal instruction (core dumped)

 

 

Can anyone give me some suggestion? Thanks!

 

 

Kexiao

 


	[[alternative HTML version deleted]]

From liao1k at cmich.edu  Fri Jul 30 15:29:28 2004
From: liao1k at cmich.edu (Liao, Kexiao )
Date: Fri Jul 30 15:29:32 2004
Subject: [Rd] Parrallel and multiple-thread 
Message-ID: <291B348BC59B47468C7824603C326082946168@cmail3.central.cmich.local>

Dear R Development Team,

   Does R-1.9.1 support multiple-thread and parallel computation when it
is running under IBM e-server P series AIX environment?

 

Kexiao

 

 


	[[alternative HTML version deleted]]

From bates at stat.wisc.edu  Fri Jul 30 16:20:15 2004
From: bates at stat.wisc.edu (Douglas Bates)
Date: Fri Jul 30 16:16:53 2004
Subject: [Rd] existence of easy example of .Call??
In-Reply-To: <950E0EFCFDB083468E2A8BBC812E5E98954FBD@seludsmsx02.selu.astrazeneca.net>
References: <950E0EFCFDB083468E2A8BBC812E5E98954FBD@seludsmsx02.selu.astrazeneca.net>
Message-ID: <410A591F.7070909@stat.wisc.edu>

Freja.Vamborg@astrazeneca.com wrote:
> Dear R-develers,
> 
> I have been seraching in vain for an example of source-code, using .Call, to
> call an R-function from within C.
> Am also wondering i this .Call command works for all functions, say if I
> write a function analyse<-function()
> within my R functoin, can this function be called by the c-code called later
> in the same function.
> 
> Eg, 
> 
> my.function<-function(){
> ...
> 
> analyse<-function() {}
> 
> result<-.Call("My.c.code",...)
> }
> 
> I then want My.c.code to call, analyse..
> 
> I have read the R-extension manual, but am just wondernig if anyone has
> another example of use of .Call, which may be more clear to a beginning
> user.


This is not as simple as it may seem it should be.  There are a lot of 
details hidden from you when you evaluate a function call in R.  These 
details are not hidden from you when you evaluate an R function call in C.

You must create an SEXP of the function call with the correct number of 
arguments, populate the argument list with pointers to the actual values 
of the arguments, eval the function call, and extract the values from 
the resulting SEXP.  Of course you need to remember to PROTECT and 
UNPROTECT the function call and the result when working with them.

In most cases there is another intermediate step in that you pass a 
character vector containing the name of the function through .Call and 
you must do the equivalent of the R function call get("My.R.function") 
inside your C code so that you can create the function call.

If you really think that you want to embark on this you could find some 
examples in $(R-SRC)/src/library/stats/src/nls.c

If you know that the R function call is eventually going to call another 
C function it is often easier to short-circuit the process and call the 
other C function directly from within your C code.

From tlumley at u.washington.edu  Fri Jul 30 17:28:04 2004
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Fri Jul 30 17:28:36 2004
Subject: [Rd] existence of easy example of .Call??
In-Reply-To: <950E0EFCFDB083468E2A8BBC812E5E98954FBD@seludsmsx02.selu.astrazeneca.net>
References: <950E0EFCFDB083468E2A8BBC812E5E98954FBD@seludsmsx02.selu.astrazeneca.net>
Message-ID: <Pine.A41.4.58.0407300824590.153958@homer09.u.washington.edu>

On Fri, 30 Jul 2004 Freja.Vamborg@astrazeneca.com wrote:

> Dear R-develers,
>
> I have been seraching in vain for an example of source-code, using .Call, to
> call an R-function from within C.
> Am also wondering i this .Call command works for all functions, say if I
> write a function analyse<-function()
> within my R functoin, can this function be called by the c-code called later
> in the same function.
>

There are examples using .C rather than .Call (for backwards
compatibility) in the survival package. The calls to R are in
cox_Rcallback.c and surv_callback.c

	-thomas

From deleeuw at stat.ucla.edu  Sat Jul 31 21:15:51 2004
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Sat Jul 31 21:16:18 2004
Subject: [Rd] R + OS X + gcc 3.5 = not quite there ..
Message-ID: <095CB4BC-E326-11D8-9ED2-000A95A67E82@stat.ucla.edu>

I tried R-devel (07/31/04) with

setenv CC gcc-3.5
setenv F77 gfortran
setenv CXX g++-3.5

Here gfortran is g-95, version 3.5, from Gaurav's site.

Configure goes fine, build goes fine, except for problems with 
macro-expansion
in plot.c, similar to the one you mention in starma.c. After clobbering 
those, the
compile is allright, the base package builds fine, and the binary runs. 
There
is a problem with loading packages, however (see below).

==================================================================

[cabledoc70:Developer/R/R-devel] deleeuw% bin/R
Error in lazyLoadDBfetch(key, datafile, compressed, envhook) :
         internal error in decompress1

R : Copyright 2004, The R Foundation for Statistical Computing
Version 2.0.0 Under development (unstable) (2004-07-30), ISBN 
3-900051-00-3

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for a HTML browser interface to help.
Type 'q()' to quit R.

 > library()
Error in lazyLoadDBfetch(key, datafile, compressed, envhook) :
         internal error in decompress1
==================================================================

With R-patched (07/31/04) there are no problems with plot.c, but there 
is the
problem with starma.c (I guess a cpp-3.5 bug). Even when fixing starma.c
the package stats still refuses to build because of
==================================================================

gfortran   -fno-common  -g -O2 -c ppr.f -o ppr.o
/var/tmp//ccSqEJAf.s:8241:FATAL:Symbol __BLOCK_DATA____ already defined.
make[5]: *** [ppr.o] Error 1
make[4]: *** [all] Error 2
make[3]: *** [all] Error 1
make[2]: *** [R] Error 1
make[1]: *** [R] Error 1
make: *** [R] Error 1

and the "bad restore file magic number" errors are there as well.
==================================================================

[

