From ||u|@@rev|||@ @end|ng |rom gm@||@com  Sat Mar  1 13:07:24 2025
From: ||u|@@rev|||@ @end|ng |rom gm@||@com (=?UTF-8?Q?Llu=C3=ADs_Revilla?=)
Date: Sat, 1 Mar 2025 13:07:24 +0100
Subject: [Rd] write_PACKAGES's fields default
Message-ID: <CAN+W6_uyiPFrxZY+1jpZfWr2OuyB8GjZWGasyKe3-0=Uj2R3iQ@mail.gmail.com>

Dear list,

I'm trying to get some details from repositories with
available.packages. However, despite being included on the DESCRIPTION
files they are not available.

ap <- utils::available.packages(fields = "Additional_repositories",
    filters = c("CRAN", "duplicates"),
    ignore_repo_cache =  TRUE,
    repos = "https://cran.r-project.org")
ap[, "Additional_repositories"] |> is.na() |> all()
## [1] TRUE

However, some packages like Seurat have the Additional_repositories
field [2]. If I try with another repository (Bioconductor software
repository):

ap <- available.packages(fields = "biocViews",
    ignore_repo_cache =  TRUE,
    repos = "https://bioconductor.org/packages/3.21/bioc")
ap[, "biocViews"] |> is.na() |> all()
## [1] TRUE

It also misses the BiocViews field compulsory on that repository.
Both repositories use tools::write_PACKAGES [3][4] to generate the
file read by available.packages. This function writes by default
fields "needed by available.packages".

However, it is unclear what is needed for available.packages.
According to its documentation, it returns "details corresponding to
packages currently available at one or more repositories". To me this
would mean that fields on the DESCRIPTION files should appear, but the
default of write_PACKAGES doesn't write other fields besides
'"Package"', '"Version"', '"Priority"',  '"Depends"', '"Imports"',
'"LinkingTo"', '"Suggests"', '"Enhances"', '"OS_type"', '"License"'
and '"Archs"'.

I could approach each repository and ask to include more fields.
However, to match the documentation on available.packages and help all
repository administrators it would make sense to change the default on
write_PACKAGES.
Could the default fields be changed, so
that all fields available on packages' DESCRIPTION to
PACKAGES(.gz,.rds). Perhaps with fields = TRUE?
If this is too much it would be great if fields documented by Writing
R Extensions are written on PACKAGES.
This modification would make it easier for all to reuse repository data.

Many thanks for your consideration,

Llu?s

PD: From CRAN perspective CRAN_packages_db() function can be used to
get Additional_repositories, but this is limited to CRAN and won't
work for BiocViews on Bioconductor or for other arbitrary fields like
'"RoxygenNote"'.

[1]: https://stat.ethz.ch/pipermail/r-devel/2024-June/083477.html
[2]: https://cran.r-project.org/package=Seurat
[3]: https://svn.r-project.org/R-dev-web/trunk/CRAN/QA/Uwe/make/writeCRANPackages.R
[4]: https://github.com/Bioconductor/BBS/blob/devel/utils/makePropagationStatusDb.R#L348


From mo@@@ @end|ng |rom @und@ku@dk  Sat Mar  1 20:45:45 2025
From: mo@@@ @end|ng |rom @und@ku@dk (Mossa Merhi Reimert)
Date: Sat, 1 Mar 2025 19:45:45 +0000
Subject: [Rd] R CMD check and CRAN's Rust policy
Message-ID: <6ea9752b54b347e682240bc024665cef@sund.ku.dk>

Hello everyone!

I'm Mossa, I'm one of the maintainers of extendr, an automated generation of bindings project for
Rust code, for use in R-packages.

I'm writing to you, as R 4.4.3 was just released, and there have not been
follow-up on an issue important to us. Link to the issue as discussed on r-devel
https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html

A community member has provided a suggestion to a patch here https://github.com/r-devel/r-svn/pull/182, and we have also attempted to bring it up on
Bugzilla: https://bugs.r-project.org/show_bug.cgi?id=18806

TLDR: Default `R CMD check` uses additional CRAN-specific checks for Rust,
instead of keeping this behind the --as-cran flag.

I would like to say, that there is a growing interest in Rust within the R community.
And generally, Rust becoming a widely adopted language within the Python community (including the scientific part of that community). It is time to deal with the
pain points with using Rust in R.

Therefore, I would kindly ask that we have a dialogue on how to remedy the issue above first, and how we may deal with other issues going forward. There are both challenges embedded in R itself, and the current CRAN policy for Rust is prohibitive.



Mossa Merhi Reimert
Postdoctoral Researcher

K?benhavns Universitet
Department of Veterinary and Animal Sciences
Animal Welfare and Disease Control
Gr?nneg?rdsvej 8
1870 Frederiksberg C
Denmark

+45 35324135
mossa at sund.ku.dk<mailto:mossa at sund.ku.dk>


	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Sun Mar  2 00:39:31 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 2 Mar 2025 12:39:31 +1300
Subject: [Rd] R CMD check and CRAN's Rust policy
In-Reply-To: <6ea9752b54b347e682240bc024665cef@sund.ku.dk>
References: <6ea9752b54b347e682240bc024665cef@sund.ku.dk>
Message-ID: <9CB72F1A-D397-4133-B8D6-C7B9CD04A4A1@R-project.org>

Mossa,

the issue you cite is lacking any pertinent information and it's not even clear why it should be an issue. The check is perfectly justified, it just reports whether a package using rust declares this correctly and where it downloads 3rd party content - something that is important to R users in general and not related to CRAN. I don't see how any of this is "prohibitive" it just calls out what the package is already doing.

As discussed before, my hope was that the "R"ust community will mature enough to work on proper support. It is not clear that it happened yet, but once it does it would make sense to talk about support just as we have for C, C++ and Java, so certainly that should be the right discussion. However, it will have to start with some thinking and a proposal on how the associated issues (compiler support, versioning, dependency sources etc.) are to be addressed, as opposed to making random demands. All this has nothing to do with CRAN so the issue you mention seems irrelevant to the progress. Also I'd like to know what are the "challenges embedded in R itself".

Cheers,
Simon


> On Mar 2, 2025, at 8:45 AM, Mossa Merhi Reimert via R-devel <r-devel at r-project.org> wrote:
> 
> Hello everyone!
> 
> I'm Mossa, I'm one of the maintainers of extendr, an automated generation of bindings project for
> Rust code, for use in R-packages.
> 
> I'm writing to you, as R 4.4.3 was just released, and there have not been
> follow-up on an issue important to us. Link to the issue as discussed on r-devel
> https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html
> 
> A community member has provided a suggestion to a patch here https://github.com/r-devel/r-svn/pull/182, and we have also attempted to bring it up on
> Bugzilla: https://bugs.r-project.org/show_bug.cgi?id=18806
> 
> TLDR: Default `R CMD check` uses additional CRAN-specific checks for Rust,
> instead of keeping this behind the --as-cran flag.
> 
> I would like to say, that there is a growing interest in Rust within the R community.
> And generally, Rust becoming a widely adopted language within the Python community (including the scientific part of that community). It is time to deal with the
> pain points with using Rust in R.
> 
> Therefore, I would kindly ask that we have a dialogue on how to remedy the issue above first, and how we may deal with other issues going forward. There are both challenges embedded in R itself, and the current CRAN policy for Rust is prohibitive.
> 
> 
> 
> Mossa Merhi Reimert
> Postdoctoral Researcher
> 
> K?benhavns Universitet
> Department of Veterinary and Animal Sciences
> Animal Welfare and Disease Control
> Gr?nneg?rdsvej 8
> 1870 Frederiksberg C
> Denmark
> 
> +45 35324135
> mossa at sund.ku.dk<mailto:mossa at sund.ku.dk>
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From mo@@@ @end|ng |rom @und@ku@dk  Sun Mar  2 11:45:41 2025
From: mo@@@ @end|ng |rom @und@ku@dk (Mossa Merhi Reimert)
Date: Sun, 2 Mar 2025 10:45:41 +0000
Subject: [Rd] R CMD check and CRAN's Rust policy
In-Reply-To: <9CB72F1A-D397-4133-B8D6-C7B9CD04A4A1@R-project.org>
References: <6ea9752b54b347e682240bc024665cef@sund.ku.dk>,
 <9CB72F1A-D397-4133-B8D6-C7B9CD04A4A1@R-project.org>
Message-ID: <32ad0520e7784407b08ad105304b714b@sund.ku.dk>

Dear Simon Urbanek,

There has been very little engagement with the issue I referred to. If it was decided that this ?check? ought to be part of the default checks for R,
then that could have been written to us. Either on the bugs.r-project.org or the proposed patch. Before we talk about anything else,
it does seem very strange that we cannot get a reasonable dialogue going.

I would like to say that the R/Rust community has grown substantially. From my end, there are 3 bindings project, extendr, savvy, and roxido.
Then, there are now many rust-based packages on CRAN, see this most recent compiled list https://github.com/nanxstats/r-rust-pkgs.
There is also proof-of-concept https://github.com/r-rust/hellorust that integrates `cargo`, rust?s official build system, with R?s package build system,
and https://github.com/extendr/hellorustc, which showcases how Rust compiler could be directly linked with R?s package system.

 Let me say, that the current R CMD check is not meant to be ?helpful?. When a package is built, `cargo` tells the user ?Downloading crates?.
Thus, this information is already conveyed to the user.

Personally, I do wish we could debate this requirement further. I do not believe that having R-packages on CRAN vendor rust dependencies
as a good policy. Download statistics is a success metric of a given r-package and rust packages. By insisting on vendoring, and thus
side-stepping `cargo` / crates.io, we are robbing upstream authors of their download-numbers. I do not think such policy is honourable.

While C/C++ do not have official package repositories, it could be thought of, as fair game, to have CRAN act as a pseudo package manager for C/C++ libraries.
I?m not going to argue for or against this part.

There are many objections from the CRAN side to all things related to Rust. I don?t want to open multiple topics in the same thread.
But there is plenty to bring up. And I had hoped we could talk this little issue through, before embarking on a larger discussion.
I do not appreciate the ?random demands? comment, as this is not a demand, nor is it random.
I have inquired my end of the community for suggestions
to compile a larger proposal, but then I was afraid that this would be perceived as a big, bulky demand.

Rust is not C/C++/Java, and the support for Rust cannot look like the support for these languages.



From: Simon Urbanek <simon.urbanek at R-project.org>
Date: Sunday, 2 March 2025 at 00.39
To: Mossa Merhi Reimert <mossa at sund.ku.dk>
Cc: r-devel at r-project.org <r-devel at r-project.org>
Subject: Re: [Rd] R CMD check and CRAN's Rust policy
[Du f?r ikke ofte mails fra simon.urbanek at r-project.org. F? mere at vide om, hvorfor dette er vigtigt, p? https://aka.ms/LearnAboutSenderIdentification ]

Mossa,

the issue you cite is lacking any pertinent information and it's not even clear why it should be an issue. The check is perfectly justified, it just reports whether a package using rust declares this correctly and where it downloads 3rd party content - something that is important to R users in general and not related to CRAN. I don't see how any of this is "prohibitive" it just calls out what the package is already doing.

As discussed before, my hope was that the "R"ust community will mature enough to work on proper support. It is not clear that it happened yet, but once it does it would make sense to talk about support just as we have for C, C++ and Java, so certainly that should be the right discussion. However, it will have to start with some thinking and a proposal on how the associated issues (compiler support, versioning, dependency sources etc.) are to be addressed, as opposed to making random demands. All this has nothing to do with CRAN so the issue you mention seems irrelevant to the progress. Also I'd like to know what are the "challenges embedded in R itself".

Cheers,
Simon


> On Mar 2, 2025, at 8:45 AM, Mossa Merhi Reimert via R-devel <r-devel at r-project.org> wrote:
>
> Hello everyone!
>
> I'm Mossa, I'm one of the maintainers of extendr, an automated generation of bindings project for
> Rust code, for use in R-packages.
>
> I'm writing to you, as R 4.4.3 was just released, and there have not been
> follow-up on an issue important to us. Link to the issue as discussed on r-devel
> https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html
>
> A community member has provided a suggestion to a patch here https://github.com/r-devel/r-svn/pull/182, and we have also attempted to bring it up on
> Bugzilla: https://bugs.r-project.org/show_bug.cgi?id=18806
>
> TLDR: Default `R CMD check` uses additional CRAN-specific checks for Rust,
> instead of keeping this behind the --as-cran flag.
>
> I would like to say, that there is a growing interest in Rust within the R community.
> And generally, Rust becoming a widely adopted language within the Python community (including the scientific part of that community). It is time to deal with the
> pain points with using Rust in R.
>
> Therefore, I would kindly ask that we have a dialogue on how to remedy the issue above first, and how we may deal with other issues going forward. There are both challenges embedded in R itself, and the current CRAN policy for Rust is prohibitive.
>
>
>
> Mossa Merhi Reimert
> Postdoctoral Researcher
>
> K?benhavns Universitet
> Department of Veterinary and Animal Sciences
> Animal Welfare and Disease Control
> Gr?nneg?rdsvej 8
> 1870 Frederiksberg C
> Denmark
>
> +45 35324135
> mossa at sund.ku.dk<mailto:mossa at sund.ku.dk>
>
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Mar  2 15:49:02 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 2 Mar 2025 09:49:02 -0500
Subject: [Rd] R CMD check and CRAN's Rust policy
In-Reply-To: <32ad0520e7784407b08ad105304b714b@sund.ku.dk>
References: <6ea9752b54b347e682240bc024665cef@sund.ku.dk>
 <9CB72F1A-D397-4133-B8D6-C7B9CD04A4A1@R-project.org>
 <32ad0520e7784407b08ad105304b714b@sund.ku.dk>
Message-ID: <66df3450-ed40-4d0c-b40b-626b75eabf0b@gmail.com>

You seem to be taking a confontational tone, which isn't likely to 
encourage a reasonable dialogue.

I've looked for other messages on this, and didn't see any besides this 
one explaining why including check_rust() in the checks is a problem. 
The problem you talk about here is that it encourages vendoring, which 
makes it harder for package authors to count downloads.

To be honest, that doesn't seem like a very serious problem.  I assume 
the packages ("crates") we are talking about are open source, so this is 
entirely in the spirit of how they are allowed to be distributed.

If they aren't open source, then users of those packages should be 
warned about that, and a check failure is a good way to do that.

So you need to explain why it is important to be able to download and 
install software and not be warned about it.

I am not in R Core or CRAN, but I can suggest why it is better to 
include source in the package:  it makes the use of that package more 
reliable in the future.  It's not uncommon to run an R computation that 
was written a few years ago.  Sometimes libraries or R have changed, and 
a user will need to go back to a previous version to reproduce the 
calculation.  Being able to able to rebuild a system as it would have 
been back then is important.

Is that possible if the package needs to make a download?  The download 
site that worked a few years ago may no longer exist.  If the site 
exists, the code versions there may be different.

Those are some of the issues that Simon was alluding to.

Duncan Murdoch



On 2025-03-02 5:45 a.m., Mossa Merhi Reimert via R-devel wrote:
> Dear Simon Urbanek,
> 
> There has been very little engagement with the issue I referred to. If it was decided that this ?check? ought to be part of the default checks for R,
> then that could have been written to us. Either on the bugs.r-project.org or the proposed patch. Before we talk about anything else,
> it does seem very strange that we cannot get a reasonable dialogue going.
> 
> I would like to say that the R/Rust community has grown substantially. From my end, there are 3 bindings project, extendr, savvy, and roxido.
> Then, there are now many rust-based packages on CRAN, see this most recent compiled list https://github.com/nanxstats/r-rust-pkgs.
> There is also proof-of-concept https://github.com/r-rust/hellorust that integrates `cargo`, rust?s official build system, with R?s package build system,
> and https://github.com/extendr/hellorustc, which showcases how Rust compiler could be directly linked with R?s package system.
> 
>   Let me say, that the current R CMD check is not meant to be ?helpful?. When a package is built, `cargo` tells the user ?Downloading crates?.
> Thus, this information is already conveyed to the user.
> 
> Personally, I do wish we could debate this requirement further. I do not believe that having R-packages on CRAN vendor rust dependencies
> as a good policy. Download statistics is a success metric of a given r-package and rust packages. By insisting on vendoring, and thus
> side-stepping `cargo` / crates.io, we are robbing upstream authors of their download-numbers. I do not think such policy is honourable.
> 
> While C/C++ do not have official package repositories, it could be thought of, as fair game, to have CRAN act as a pseudo package manager for C/C++ libraries.
> I?m not going to argue for or against this part.
> 
> There are many objections from the CRAN side to all things related to Rust. I don?t want to open multiple topics in the same thread.
> But there is plenty to bring up. And I had hoped we could talk this little issue through, before embarking on a larger discussion.
> I do not appreciate the ?random demands? comment, as this is not a demand, nor is it random.
> I have inquired my end of the community for suggestions
> to compile a larger proposal, but then I was afraid that this would be perceived as a big, bulky demand.
> 
> Rust is not C/C++/Java, and the support for Rust cannot look like the support for these languages.
> 
> 
> 
> From: Simon Urbanek <simon.urbanek at R-project.org>
> Date: Sunday, 2 March 2025 at 00.39
> To: Mossa Merhi Reimert <mossa at sund.ku.dk>
> Cc: r-devel at r-project.org <r-devel at r-project.org>
> Subject: Re: [Rd] R CMD check and CRAN's Rust policy
> [Du f?r ikke ofte mails fra simon.urbanek at r-project.org. F? mere at vide om, hvorfor dette er vigtigt, p? https://aka.ms/LearnAboutSenderIdentification ]
> 
> Mossa,
> 
> the issue you cite is lacking any pertinent information and it's not even clear why it should be an issue. The check is perfectly justified, it just reports whether a package using rust declares this correctly and where it downloads 3rd party content - something that is important to R users in general and not related to CRAN. I don't see how any of this is "prohibitive" it just calls out what the package is already doing.
> 
> As discussed before, my hope was that the "R"ust community will mature enough to work on proper support. It is not clear that it happened yet, but once it does it would make sense to talk about support just as we have for C, C++ and Java, so certainly that should be the right discussion. However, it will have to start with some thinking and a proposal on how the associated issues (compiler support, versioning, dependency sources etc.) are to be addressed, as opposed to making random demands. All this has nothing to do with CRAN so the issue you mention seems irrelevant to the progress. Also I'd like to know what are the "challenges embedded in R itself".
> 
> Cheers,
> Simon
> 
> 
>> On Mar 2, 2025, at 8:45 AM, Mossa Merhi Reimert via R-devel <r-devel at r-project.org> wrote:
>>
>> Hello everyone!
>>
>> I'm Mossa, I'm one of the maintainers of extendr, an automated generation of bindings project for
>> Rust code, for use in R-packages.
>>
>> I'm writing to you, as R 4.4.3 was just released, and there have not been
>> follow-up on an issue important to us. Link to the issue as discussed on r-devel
>> https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html
>>
>> A community member has provided a suggestion to a patch here https://github.com/r-devel/r-svn/pull/182, and we have also attempted to bring it up on
>> Bugzilla: https://bugs.r-project.org/show_bug.cgi?id=18806
>>
>> TLDR: Default `R CMD check` uses additional CRAN-specific checks for Rust,
>> instead of keeping this behind the --as-cran flag.
>>
>> I would like to say, that there is a growing interest in Rust within the R community.
>> And generally, Rust becoming a widely adopted language within the Python community (including the scientific part of that community). It is time to deal with the
>> pain points with using Rust in R.
>>
>> Therefore, I would kindly ask that we have a dialogue on how to remedy the issue above first, and how we may deal with other issues going forward. There are both challenges embedded in R itself, and the current CRAN policy for Rust is prohibitive.
>>
>>
>>
>> Mossa Merhi Reimert
>> Postdoctoral Researcher
>>
>> K?benhavns Universitet
>> Department of Veterinary and Animal Sciences
>> Animal Welfare and Disease Control
>> Gr?nneg?rdsvej 8
>> 1870 Frederiksberg C
>> Denmark
>>
>> +45 35324135
>> mossa at sund.ku.dk<mailto:mossa at sund.ku.dk>
>>
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From yut@n|@|n| @end|ng |rom gm@||@com  Sun Mar  2 16:44:51 2025
From: yut@n|@|n| @end|ng |rom gm@||@com (Hiroaki Yutani)
Date: Mon, 3 Mar 2025 00:44:51 +0900
Subject: [Rd] R CMD check and CRAN's Rust policy
In-Reply-To: <66df3450-ed40-4d0c-b40b-626b75eabf0b@gmail.com>
References: <6ea9752b54b347e682240bc024665cef@sund.ku.dk>
 <9CB72F1A-D397-4133-B8D6-C7B9CD04A4A1@R-project.org>
 <32ad0520e7784407b08ad105304b714b@sund.ku.dk>
 <66df3450-ed40-4d0c-b40b-626b75eabf0b@gmail.com>
Message-ID: <CALyqOb868v51RcrEZNc7TCfg9aOb5D23Kjnvei0HAtgj4sEVzw@mail.gmail.com>

> I've looked for other messages on this, and didn't see any besides this
> one explaining why including check_rust() in the checks is a problem.

I agree with you. It seems no one explained what problem it causes to them.
In my understanding (disclaimer: I haven't hit this by myself yet), the
problem is that the "Downloading crates ..." log raises a warning, which
makes the CI check fail. Although it's true that none of this is
"prohibitive," it's just inconvenient.

Maybe it's possible to make it a NOTE instead of a WARNING at least?

I'm suggesting so because otherwise this will end up encouraging the
package authors to hide these logs as a workaround to avoid the CI failure.
As it's very easy, I'm personally fine with the status quo, but if it
becomes a common practice, it makes it harder for the CRAN maintainers to
investigate the installation logs.

Best,
Yutani


2025?3?2?(?) 23:49 Duncan Murdoch <murdoch.duncan at gmail.com>:

> You seem to be taking a confontational tone, which isn't likely to
> encourage a reasonable dialogue.
>
> I've looked for other messages on this, and didn't see any besides this
> one explaining why including check_rust() in the checks is a problem.
> The problem you talk about here is that it encourages vendoring, which
> makes it harder for package authors to count downloads.
>
> To be honest, that doesn't seem like a very serious problem.  I assume
> the packages ("crates") we are talking about are open source, so this is
> entirely in the spirit of how they are allowed to be distributed.
>
> If they aren't open source, then users of those packages should be
> warned about that, and a check failure is a good way to do that.
>
> So you need to explain why it is important to be able to download and
> install software and not be warned about it.
>
> I am not in R Core or CRAN, but I can suggest why it is better to
> include source in the package:  it makes the use of that package more
> reliable in the future.  It's not uncommon to run an R computation that
> was written a few years ago.  Sometimes libraries or R have changed, and
> a user will need to go back to a previous version to reproduce the
> calculation.  Being able to able to rebuild a system as it would have
> been back then is important.
>
> Is that possible if the package needs to make a download?  The download
> site that worked a few years ago may no longer exist.  If the site
> exists, the code versions there may be different.
>
> Those are some of the issues that Simon was alluding to.
>
> Duncan Murdoch
>
>
>
> On 2025-03-02 5:45 a.m., Mossa Merhi Reimert via R-devel wrote:
> > Dear Simon Urbanek,
> >
> > There has been very little engagement with the issue I referred to. If
> it was decided that this ?check? ought to be part of the default checks for
> R,
> > then that could have been written to us. Either on the
> bugs.r-project.org or the proposed patch. Before we talk about anything
> else,
> > it does seem very strange that we cannot get a reasonable dialogue going.
> >
> > I would like to say that the R/Rust community has grown substantially.
> From my end, there are 3 bindings project, extendr, savvy, and roxido.
> > Then, there are now many rust-based packages on CRAN, see this most
> recent compiled list https://github.com/nanxstats/r-rust-pkgs.
> > There is also proof-of-concept https://github.com/r-rust/hellorust that
> integrates `cargo`, rust?s official build system, with R?s package build
> system,
> > and https://github.com/extendr/hellorustc, which showcases how Rust
> compiler could be directly linked with R?s package system.
> >
> >   Let me say, that the current R CMD check is not meant to be ?helpful?.
> When a package is built, `cargo` tells the user ?Downloading crates?.
> > Thus, this information is already conveyed to the user.
> >
> > Personally, I do wish we could debate this requirement further. I do not
> believe that having R-packages on CRAN vendor rust dependencies
> > as a good policy. Download statistics is a success metric of a given
> r-package and rust packages. By insisting on vendoring, and thus
> > side-stepping `cargo` / crates.io, we are robbing upstream authors of
> their download-numbers. I do not think such policy is honourable.
> >
> > While C/C++ do not have official package repositories, it could be
> thought of, as fair game, to have CRAN act as a pseudo package manager for
> C/C++ libraries.
> > I?m not going to argue for or against this part.
> >
> > There are many objections from the CRAN side to all things related to
> Rust. I don?t want to open multiple topics in the same thread.
> > But there is plenty to bring up. And I had hoped we could talk this
> little issue through, before embarking on a larger discussion.
> > I do not appreciate the ?random demands? comment, as this is not a
> demand, nor is it random.
> > I have inquired my end of the community for suggestions
> > to compile a larger proposal, but then I was afraid that this would be
> perceived as a big, bulky demand.
> >
> > Rust is not C/C++/Java, and the support for Rust cannot look like the
> support for these languages.
> >
> >
> >
> > From: Simon Urbanek <simon.urbanek at R-project.org>
> > Date: Sunday, 2 March 2025 at 00.39
> > To: Mossa Merhi Reimert <mossa at sund.ku.dk>
> > Cc: r-devel at r-project.org <r-devel at r-project.org>
> > Subject: Re: [Rd] R CMD check and CRAN's Rust policy
> > [Du f?r ikke ofte mails fra simon.urbanek at r-project.org. F? mere at
> vide om, hvorfor dette er vigtigt, p?
> https://aka.ms/LearnAboutSenderIdentification ]
> >
> > Mossa,
> >
> > the issue you cite is lacking any pertinent information and it's not
> even clear why it should be an issue. The check is perfectly justified, it
> just reports whether a package using rust declares this correctly and where
> it downloads 3rd party content - something that is important to R users in
> general and not related to CRAN. I don't see how any of this is
> "prohibitive" it just calls out what the package is already doing.
> >
> > As discussed before, my hope was that the "R"ust community will mature
> enough to work on proper support. It is not clear that it happened yet, but
> once it does it would make sense to talk about support just as we have for
> C, C++ and Java, so certainly that should be the right discussion. However,
> it will have to start with some thinking and a proposal on how the
> associated issues (compiler support, versioning, dependency sources etc.)
> are to be addressed, as opposed to making random demands. All this has
> nothing to do with CRAN so the issue you mention seems irrelevant to the
> progress. Also I'd like to know what are the "challenges embedded in R
> itself".
> >
> > Cheers,
> > Simon
> >
> >
> >> On Mar 2, 2025, at 8:45 AM, Mossa Merhi Reimert via R-devel <
> r-devel at r-project.org> wrote:
> >>
> >> Hello everyone!
> >>
> >> I'm Mossa, I'm one of the maintainers of extendr, an automated
> generation of bindings project for
> >> Rust code, for use in R-packages.
> >>
> >> I'm writing to you, as R 4.4.3 was just released, and there have not
> been
> >> follow-up on an issue important to us. Link to the issue as discussed
> on r-devel
> >> https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html
> >>
> >> A community member has provided a suggestion to a patch here
> https://github.com/r-devel/r-svn/pull/182, and we have also attempted to
> bring it up on
> >> Bugzilla: https://bugs.r-project.org/show_bug.cgi?id=18806
> >>
> >> TLDR: Default `R CMD check` uses additional CRAN-specific checks for
> Rust,
> >> instead of keeping this behind the --as-cran flag.
> >>
> >> I would like to say, that there is a growing interest in Rust within
> the R community.
> >> And generally, Rust becoming a widely adopted language within the
> Python community (including the scientific part of that community). It is
> time to deal with the
> >> pain points with using Rust in R.
> >>
> >> Therefore, I would kindly ask that we have a dialogue on how to remedy
> the issue above first, and how we may deal with other issues going forward.
> There are both challenges embedded in R itself, and the current CRAN policy
> for Rust is prohibitive.
> >>
> >>
> >>
> >> Mossa Merhi Reimert
> >> Postdoctoral Researcher
> >>
> >> K?benhavns Universitet
> >> Department of Veterinary and Animal Sciences
> >> Animal Welfare and Disease Control
> >> Gr?nneg?rdsvej 8
> >> 1870 Frederiksberg C
> >> Denmark
> >>
> >> +45 35324135
> >> mossa at sund.ku.dk<mailto:mossa at sund.ku.dk>
> >>
> >>
> >>        [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

	[[alternative HTML version deleted]]


From jo@|@h@p@rry @end|ng |rom gm@||@com  Sun Mar  2 17:03:13 2025
From: jo@|@h@p@rry @end|ng |rom gm@||@com (Josiah Parry)
Date: Sun, 2 Mar 2025 08:03:13 -0800
Subject: [Rd] R CMD check and CRAN's Rust policy
In-Reply-To: <66df3450-ed40-4d0c-b40b-626b75eabf0b@gmail.com>
References: <6ea9752b54b347e682240bc024665cef@sund.ku.dk>
 <9CB72F1A-D397-4133-B8D6-C7B9CD04A4A1@R-project.org>
 <32ad0520e7784407b08ad105304b714b@sund.ku.dk>
 <66df3450-ed40-4d0c-b40b-626b75eabf0b@gmail.com>
Message-ID: <CAL3ufUKSkMXpgSD6-o7dC7tZuD+DmpHaq2JUzuF9+9dosE+XEA@mail.gmail.com>

Well this has surely veered off course!

As the one who filed the BugZilla report, I'd like to redirect the
conversation and provide further context.

The question should be *"how do we get a dialogue started on this bugzilla
issue before the next minor *
*release of R?"*

The current check for Rust-based R package's downloading external
dependencies works by looking at
the output logs for the presence of  "Downloading crates." This can is an
entirely fine requirement for
CRAN?however, due to the fact that it is an error, packages distributed
through other repositories
fail the R-CMD check.

Folks who use R-universe or PPM or some mysterious third thing may not
share the same philosophy as
CRAN and prefer the convenience of fetching the dependencies at compile
time and not vendoring them.

An alternative would be for the check to be optionally skipped or become a
NOTE when the CRAN
flag is not set and an ERROR otherwise. Skipping this CRAN check is as easy
as adding `--quiet`
or setting an environment variable?but that is against the spirit of the
check.

Ideally, the check can remain, but scoped appropriately.


On Sun, Mar 2, 2025 at 6:49?AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> You seem to be taking a confontational tone, which isn't likely to
> encourage a reasonable dialogue.
>
> I've looked for other messages on this, and didn't see any besides this
> one explaining why including check_rust() in the checks is a problem.
> The problem you talk about here is that it encourages vendoring, which
> makes it harder for package authors to count downloads.
>
> To be honest, that doesn't seem like a very serious problem.  I assume
> the packages ("crates") we are talking about are open source, so this is
> entirely in the spirit of how they are allowed to be distributed.
>
> If they aren't open source, then users of those packages should be
> warned about that, and a check failure is a good way to do that.
>
> So you need to explain why it is important to be able to download and
> install software and not be warned about it.
>
> I am not in R Core or CRAN, but I can suggest why it is better to
> include source in the package:  it makes the use of that package more
> reliable in the future.  It's not uncommon to run an R computation that
> was written a few years ago.  Sometimes libraries or R have changed, and
> a user will need to go back to a previous version to reproduce the
> calculation.  Being able to able to rebuild a system as it would have
> been back then is important.
>
> Is that possible if the package needs to make a download?  The download
> site that worked a few years ago may no longer exist.  If the site
> exists, the code versions there may be different.
>
> Those are some of the issues that Simon was alluding to.
>
> Duncan Murdoch
>
>
>
> On 2025-03-02 5:45 a.m., Mossa Merhi Reimert via R-devel wrote:
> > Dear Simon Urbanek,
> >
> > There has been very little engagement with the issue I referred to. If
> it was decided that this ?check? ought to be part of the default checks for
> R,
> > then that could have been written to us. Either on the
> bugs.r-project.org or the proposed patch. Before we talk about anything
> else,
> > it does seem very strange that we cannot get a reasonable dialogue going.
> >
> > I would like to say that the R/Rust community has grown substantially.
> From my end, there are 3 bindings project, extendr, savvy, and roxido.
> > Then, there are now many rust-based packages on CRAN, see this most
> recent compiled list https://github.com/nanxstats/r-rust-pkgs.
> > There is also proof-of-concept https://github.com/r-rust/hellorust that
> integrates `cargo`, rust?s official build system, with R?s package build
> system,
> > and https://github.com/extendr/hellorustc, which showcases how Rust
> compiler could be directly linked with R?s package system.
> >
> >   Let me say, that the current R CMD check is not meant to be ?helpful?.
> When a package is built, `cargo` tells the user ?Downloading crates?.
> > Thus, this information is already conveyed to the user.
> >
> > Personally, I do wish we could debate this requirement further. I do not
> believe that having R-packages on CRAN vendor rust dependencies
> > as a good policy. Download statistics is a success metric of a given
> r-package and rust packages. By insisting on vendoring, and thus
> > side-stepping `cargo` / crates.io, we are robbing upstream authors of
> their download-numbers. I do not think such policy is honourable.
> >
> > While C/C++ do not have official package repositories, it could be
> thought of, as fair game, to have CRAN act as a pseudo package manager for
> C/C++ libraries.
> > I?m not going to argue for or against this part.
> >
> > There are many objections from the CRAN side to all things related to
> Rust. I don?t want to open multiple topics in the same thread.
> > But there is plenty to bring up. And I had hoped we could talk this
> little issue through, before embarking on a larger discussion.
> > I do not appreciate the ?random demands? comment, as this is not a
> demand, nor is it random.
> > I have inquired my end of the community for suggestions
> > to compile a larger proposal, but then I was afraid that this would be
> perceived as a big, bulky demand.
> >
> > Rust is not C/C++/Java, and the support for Rust cannot look like the
> support for these languages.
> >
> >
> >
> > From: Simon Urbanek <simon.urbanek at R-project.org>
> > Date: Sunday, 2 March 2025 at 00.39
> > To: Mossa Merhi Reimert <mossa at sund.ku.dk>
> > Cc: r-devel at r-project.org <r-devel at r-project.org>
> > Subject: Re: [Rd] R CMD check and CRAN's Rust policy
> > [Du f?r ikke ofte mails fra simon.urbanek at r-project.org. F? mere at
> vide om, hvorfor dette er vigtigt, p?
> https://aka.ms/LearnAboutSenderIdentification ]
> >
> > Mossa,
> >
> > the issue you cite is lacking any pertinent information and it's not
> even clear why it should be an issue. The check is perfectly justified, it
> just reports whether a package using rust declares this correctly and where
> it downloads 3rd party content - something that is important to R users in
> general and not related to CRAN. I don't see how any of this is
> "prohibitive" it just calls out what the package is already doing.
> >
> > As discussed before, my hope was that the "R"ust community will mature
> enough to work on proper support. It is not clear that it happened yet, but
> once it does it would make sense to talk about support just as we have for
> C, C++ and Java, so certainly that should be the right discussion. However,
> it will have to start with some thinking and a proposal on how the
> associated issues (compiler support, versioning, dependency sources etc.)
> are to be addressed, as opposed to making random demands. All this has
> nothing to do with CRAN so the issue you mention seems irrelevant to the
> progress. Also I'd like to know what are the "challenges embedded in R
> itself".
> >
> > Cheers,
> > Simon
> >
> >
> >> On Mar 2, 2025, at 8:45 AM, Mossa Merhi Reimert via R-devel <
> r-devel at r-project.org> wrote:
> >>
> >> Hello everyone!
> >>
> >> I'm Mossa, I'm one of the maintainers of extendr, an automated
> generation of bindings project for
> >> Rust code, for use in R-packages.
> >>
> >> I'm writing to you, as R 4.4.3 was just released, and there have not
> been
> >> follow-up on an issue important to us. Link to the issue as discussed
> on r-devel
> >> https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html
> >>
> >> A community member has provided a suggestion to a patch here
> https://github.com/r-devel/r-svn/pull/182, and we have also attempted to
> bring it up on
> >> Bugzilla: https://bugs.r-project.org/show_bug.cgi?id=18806
> >>
> >> TLDR: Default `R CMD check` uses additional CRAN-specific checks for
> Rust,
> >> instead of keeping this behind the --as-cran flag.
> >>
> >> I would like to say, that there is a growing interest in Rust within
> the R community.
> >> And generally, Rust becoming a widely adopted language within the
> Python community (including the scientific part of that community). It is
> time to deal with the
> >> pain points with using Rust in R.
> >>
> >> Therefore, I would kindly ask that we have a dialogue on how to remedy
> the issue above first, and how we may deal with other issues going forward.
> There are both challenges embedded in R itself, and the current CRAN policy
> for Rust is prohibitive.
> >>
> >>
> >>
> >> Mossa Merhi Reimert
> >> Postdoctoral Researcher
> >>
> >> K?benhavns Universitet
> >> Department of Veterinary and Animal Sciences
> >> Animal Welfare and Disease Control
> >> Gr?nneg?rdsvej 8
> >> 1870 Frederiksberg C
> >> Denmark
> >>
> >> +45 35324135
> >> mossa at sund.ku.dk<mailto:mossa at sund.ku.dk>
> >>
> >>
> >>        [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Mar  2 18:21:39 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 2 Mar 2025 12:21:39 -0500
Subject: [Rd] R CMD check and CRAN's Rust policy
In-Reply-To: <CAL3ufUKSkMXpgSD6-o7dC7tZuD+DmpHaq2JUzuF9+9dosE+XEA@mail.gmail.com>
References: <6ea9752b54b347e682240bc024665cef@sund.ku.dk>
 <9CB72F1A-D397-4133-B8D6-C7B9CD04A4A1@R-project.org>
 <32ad0520e7784407b08ad105304b714b@sund.ku.dk>
 <66df3450-ed40-4d0c-b40b-626b75eabf0b@gmail.com>
 <CAL3ufUKSkMXpgSD6-o7dC7tZuD+DmpHaq2JUzuF9+9dosE+XEA@mail.gmail.com>
Message-ID: <4eb96716-9f8c-4f4e-8d2d-a43feba44392@gmail.com>

On 2025-03-02 11:03 a.m., Josiah Parry wrote:
> Well this has surely veered off course!
> 
> As the one who filed the BugZilla report, I'd like to redirect the 
> conversation and provide further context.
> 
> The question should?be /"how do we get a dialogue started on this 
> bugzilla issue before the next minor /
> /release of R?"/

Isn't this exactly that dialogue?

> 
> The current check for Rust-based R package's downloading external 
> dependencies works by looking at
> the output logs for the presence of? "Downloading crates." This can is 
> an entirely fine requirement for
> CRAN?however, due to the fact that it is an error, packages distributed 
> through other repositories
> fail the R-CMD check.

I think you misunderstood me.  CRAN shares the view I gave that you 
should be able to run old code to reproduce old results, but they aren't 
the only ones.  That's always been a goal of R.

> Folks who use R-universe or PPM or some mysterious third thing may not 
> share the same philosophy as
> CRAN and prefer the convenience of fetching the dependencies at compile 
> time and not vendoring them.
> An alternative would be for the check to be optionally skipped or become 
> a NOTE when the CRAN
> flag is not set and an ERROR otherwise. Skipping this CRAN check is as 
> easy as adding `--quiet`
> or setting an environment variable?but that is against the spirit of the 
> check.

If it is that easy to skip the check, then I really don't see the issue. 
  Just ask the repository where you want to put your package to put that 
option or environment variable in place, and there's no longer a problem.

Duncan Murdoch

> Ideally, the check can remain, but scoped appropriately.
> 
> 
> On Sun, Mar 2, 2025 at 6:49?AM Duncan Murdoch <murdoch.duncan at gmail.com 
> <mailto:murdoch.duncan at gmail.com>> wrote:
> 
>     You seem to be taking a confontational tone, which isn't likely to
>     encourage a reasonable dialogue.
> 
>     I've looked for other messages on this, and didn't see any besides this
>     one explaining why including check_rust() in the checks is a problem.
>     The problem you talk about here is that it encourages vendoring, which
>     makes it harder for package authors to count downloads.
> 
>     To be honest, that doesn't seem like a very serious problem.? I assume
>     the packages ("crates") we are talking about are open source, so
>     this is
>     entirely in the spirit of how they are allowed to be distributed.
> 
>     If they aren't open source, then users of those packages should be
>     warned about that, and a check failure is a good way to do that.
> 
>     So you need to explain why it is important to be able to download and
>     install software and not be warned about it.
> 
>     I am not in R Core or CRAN, but I can suggest why it is better to
>     include source in the package:? it makes the use of that package more
>     reliable in the future.? It's not uncommon to run an R computation that
>     was written a few years ago.? Sometimes libraries or R have changed,
>     and
>     a user will need to go back to a previous version to reproduce the
>     calculation.? Being able to able to rebuild a system as it would have
>     been back then is important.
> 
>     Is that possible if the package needs to make a download?? The download
>     site that worked a few years ago may no longer exist.? If the site
>     exists, the code versions there may be different.
> 
>     Those are some of the issues that Simon was alluding to.
> 
>     Duncan Murdoch
> 
> 
> 
>     On 2025-03-02 5:45 a.m., Mossa Merhi Reimert via R-devel wrote:
>      > Dear Simon Urbanek,
>      >
>      > There has been very little engagement with the issue I referred
>     to. If it was decided that this ?check? ought to be part of the
>     default checks for R,
>      > then that could have been written to us. Either on the
>     bugs.r-project.org <http://bugs.r-project.org> or the proposed
>     patch. Before we talk about anything else,
>      > it does seem very strange that we cannot get a reasonable
>     dialogue going.
>      >
>      > I would like to say that the R/Rust community has grown
>     substantially. From my end, there are 3 bindings project, extendr,
>     savvy, and roxido.
>      > Then, there are now many rust-based packages on CRAN, see this
>     most recent compiled list https://github.com/nanxstats/r-rust-pkgs
>     <https://github.com/nanxstats/r-rust-pkgs>.
>      > There is also proof-of-concept
>     https://github.com/r-rust/hellorust
>     <https://github.com/r-rust/hellorust> that integrates `cargo`,
>     rust?s official build system, with R?s package build system,
>      > and https://github.com/extendr/hellorustc
>     <https://github.com/extendr/hellorustc>, which showcases how Rust
>     compiler could be directly linked with R?s package system.
>      >
>      >? ?Let me say, that the current R CMD check is not meant to be
>     ?helpful?. When a package is built, `cargo` tells the user
>     ?Downloading crates?.
>      > Thus, this information is already conveyed to the user.
>      >
>      > Personally, I do wish we could debate this requirement further. I
>     do not believe that having R-packages on CRAN vendor rust dependencies
>      > as a good policy. Download statistics is a success metric of a
>     given r-package and rust packages. By insisting on vendoring, and thus
>      > side-stepping `cargo` / crates.io <http://crates.io>, we are
>     robbing upstream authors of their download-numbers. I do not think
>     such policy is honourable.
>      >
>      > While C/C++ do not have official package repositories, it could
>     be thought of, as fair game, to have CRAN act as a pseudo package
>     manager for C/C++ libraries.
>      > I?m not going to argue for or against this part.
>      >
>      > There are many objections from the CRAN side to all things
>     related to Rust. I don?t want to open multiple topics in the same
>     thread.
>      > But there is plenty to bring up. And I had hoped we could talk
>     this little issue through, before embarking on a larger discussion.
>      > I do not appreciate the ?random demands? comment, as this is not
>     a demand, nor is it random.
>      > I have inquired my end of the community for suggestions
>      > to compile a larger proposal, but then I was afraid that this
>     would be perceived as a big, bulky demand.
>      >
>      > Rust is not C/C++/Java, and the support for Rust cannot look like
>     the support for these languages.
>      >
>      >
>      >
>      > From: Simon Urbanek <simon.urbanek at R-project.org>
>      > Date: Sunday, 2 March 2025 at 00.39
>      > To: Mossa Merhi Reimert <mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>>
>      > Cc: r-devel at r-project.org <mailto:r-devel at r-project.org>
>     <r-devel at r-project.org <mailto:r-devel at r-project.org>>
>      > Subject: Re: [Rd] R CMD check and CRAN's Rust policy
>      > [Du f?r ikke ofte mails fra simon.urbanek at r-project.org
>     <mailto:simon.urbanek at r-project.org>. F? mere at vide om, hvorfor
>     dette er vigtigt, p? https://aka.ms/LearnAboutSenderIdentification
>     <https://aka.ms/LearnAboutSenderIdentification> ]
>      >
>      > Mossa,
>      >
>      > the issue you cite is lacking any pertinent information and it's
>     not even clear why it should be an issue. The check is perfectly
>     justified, it just reports whether a package using rust declares
>     this correctly and where it downloads 3rd party content - something
>     that is important to R users in general and not related to CRAN. I
>     don't see how any of this is "prohibitive" it just calls out what
>     the package is already doing.
>      >
>      > As discussed before, my hope was that the "R"ust community will
>     mature enough to work on proper support. It is not clear that it
>     happened yet, but once it does it would make sense to talk about
>     support just as we have for C, C++ and Java, so certainly that
>     should be the right discussion. However, it will have to start with
>     some thinking and a proposal on how the associated issues (compiler
>     support, versioning, dependency sources etc.) are to be addressed,
>     as opposed to making random demands. All this has nothing to do with
>     CRAN so the issue you mention seems irrelevant to the progress. Also
>     I'd like to know what are the "challenges embedded in R itself".
>      >
>      > Cheers,
>      > Simon
>      >
>      >
>      >> On Mar 2, 2025, at 8:45 AM, Mossa Merhi Reimert via R-devel
>     <r-devel at r-project.org <mailto:r-devel at r-project.org>> wrote:
>      >>
>      >> Hello everyone!
>      >>
>      >> I'm Mossa, I'm one of the maintainers of extendr, an automated
>     generation of bindings project for
>      >> Rust code, for use in R-packages.
>      >>
>      >> I'm writing to you, as R 4.4.3 was just released, and there have
>     not been
>      >> follow-up on an issue important to us. Link to the issue as
>     discussed on r-devel
>      >> https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html
>     <https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html>
>      >>
>      >> A community member has provided a suggestion to a patch here
>     https://github.com/r-devel/r-svn/pull/182
>     <https://github.com/r-devel/r-svn/pull/182>, and we have also
>     attempted to bring it up on
>      >> Bugzilla: https://bugs.r-project.org/show_bug.cgi?id=18806
>     <https://bugs.r-project.org/show_bug.cgi?id=18806>
>      >>
>      >> TLDR: Default `R CMD check` uses additional CRAN-specific checks
>     for Rust,
>      >> instead of keeping this behind the --as-cran flag.
>      >>
>      >> I would like to say, that there is a growing interest in Rust
>     within the R community.
>      >> And generally, Rust becoming a widely adopted language within
>     the Python community (including the scientific part of that
>     community). It is time to deal with the
>      >> pain points with using Rust in R.
>      >>
>      >> Therefore, I would kindly ask that we have a dialogue on how to
>     remedy the issue above first, and how we may deal with other issues
>     going forward. There are both challenges embedded in R itself, and
>     the current CRAN policy for Rust is prohibitive.
>      >>
>      >>
>      >>
>      >> Mossa Merhi Reimert
>      >> Postdoctoral Researcher
>      >>
>      >> K?benhavns Universitet
>      >> Department of Veterinary and Animal Sciences
>      >> Animal Welfare and Disease Control
>      >> Gr?nneg?rdsvej 8
>      >> 1870 Frederiksberg C
>      >> Denmark
>      >>
>      >> +45 35324135
>      >> mossa at sund.ku.dk
>     <mailto:mossa at sund.ku.dk><mailto:mossa at sund.ku.dk
>     <mailto:mossa at sund.ku.dk>>
>      >>
>      >>
>      >>? ? ? ? [[alternative HTML version deleted]]
>      >>
>      >> ______________________________________________
>      >> R-devel at r-project.org <mailto:R-devel at r-project.org> mailing list
>      >> https://stat.ethz.ch/mailman/listinfo/r-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-devel>
>      >
>      >? ? ? ?[[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-devel at r-project.org <mailto:R-devel at r-project.org> mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-devel>
> 
>     ______________________________________________
>     R-devel at r-project.org <mailto:R-devel at r-project.org> mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-devel>
>


From bbo|ker @end|ng |rom gm@||@com  Sun Mar  2 19:09:28 2025
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sun, 2 Mar 2025 13:09:28 -0500
Subject: [Rd] R CMD check and CRAN's Rust policy
In-Reply-To: <4eb96716-9f8c-4f4e-8d2d-a43feba44392@gmail.com>
References: <6ea9752b54b347e682240bc024665cef@sund.ku.dk>
 <9CB72F1A-D397-4133-B8D6-C7B9CD04A4A1@R-project.org>
 <32ad0520e7784407b08ad105304b714b@sund.ku.dk>
 <66df3450-ed40-4d0c-b40b-626b75eabf0b@gmail.com>
 <CAL3ufUKSkMXpgSD6-o7dC7tZuD+DmpHaq2JUzuF9+9dosE+XEA@mail.gmail.com>
 <4eb96716-9f8c-4f4e-8d2d-a43feba44392@gmail.com>
Message-ID: <df6bc0fc-1699-4691-a83c-1606d5db72a7@gmail.com>

  I, like Duncan, am just following along here. I think there might be 
two distinct questions which it would be useful to keep distinct:

  * how to silence the rust-check if desired?

   rather than debating whether the rust-check should be always-on, 
on-for-CRAN-only, etc., would it provide for useful flexibility to add 
an environment variable that enables/disables this functionality?  There 
are already 168 of these environment variables, how much would one more 
cost?

   I'm not sure how adding an environment variable to allow easier 
user/alternate-repository control of the check is "against the spirit of 
the check" ...

   All the existing check-regulating env variables ...

cd src/library/tools/R
grep 'Sys.getenv("_R_CHECK' * | sed -e 's/^.*Sys.getenv(//' | sed -e 
's/[,)].*//' | sort | uniq | wc


   * should CRAN allow Rust crates to be downloaded?

   This is a much more fundamental policy decision, which I have no 
opinion about.

   cheers
    Ben Bolker




On 2025-03-02 12:21 p.m., Duncan Murdoch wrote:
> On 2025-03-02 11:03 a.m., Josiah Parry wrote:
>> Well this has surely veered off course!
>>
>> As the one who filed the BugZilla report, I'd like to redirect the 
>> conversation and provide further context.
>>
>> The question should?be /"how do we get a dialogue started on this 
>> bugzilla issue before the next minor /
>> /release of R?"/
> 
> Isn't this exactly that dialogue?
> 
>>
>> The current check for Rust-based R package's downloading external 
>> dependencies works by looking at
>> the output logs for the presence of? "Downloading crates." This can is 
>> an entirely fine requirement for
>> CRAN?however, due to the fact that it is an error, packages 
>> distributed through other repositories
>> fail the R-CMD check.
> 
> I think you misunderstood me.? CRAN shares the view I gave that you 
> should be able to run old code to reproduce old results, but they aren't 
> the only ones.? That's always been a goal of R.
> 
>> Folks who use R-universe or PPM or some mysterious third thing may not 
>> share the same philosophy as
>> CRAN and prefer the convenience of fetching the dependencies at 
>> compile time and not vendoring them.
>> An alternative would be for the check to be optionally skipped or 
>> become a NOTE when the CRAN
>> flag is not set and an ERROR otherwise. Skipping this CRAN check is as 
>> easy as adding `--quiet`
>> or setting an environment variable?but that is against the spirit of 
>> the check.
> 
> If it is that easy to skip the check, then I really don't see the issue. 
>  ?Just ask the repository where you want to put your package to put that 
> option or environment variable in place, and there's no longer a problem.
> 
> Duncan Murdoch
> 
>> Ideally, the check can remain, but scoped appropriately.
>>
>>
>> On Sun, Mar 2, 2025 at 6:49?AM Duncan Murdoch 
>> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>>
>> ??? You seem to be taking a confontational tone, which isn't likely to
>> ??? encourage a reasonable dialogue.
>>
>> ??? I've looked for other messages on this, and didn't see any besides 
>> this
>> ??? one explaining why including check_rust() in the checks is a problem.
>> ??? The problem you talk about here is that it encourages vendoring, 
>> which
>> ??? makes it harder for package authors to count downloads.
>>
>> ??? To be honest, that doesn't seem like a very serious problem.? I 
>> assume
>> ??? the packages ("crates") we are talking about are open source, so
>> ??? this is
>> ??? entirely in the spirit of how they are allowed to be distributed.
>>
>> ??? If they aren't open source, then users of those packages should be
>> ??? warned about that, and a check failure is a good way to do that.
>>
>> ??? So you need to explain why it is important to be able to download and
>> ??? install software and not be warned about it.
>>
>> ??? I am not in R Core or CRAN, but I can suggest why it is better to
>> ??? include source in the package:? it makes the use of that package more
>> ??? reliable in the future.? It's not uncommon to run an R computation 
>> that
>> ??? was written a few years ago.? Sometimes libraries or R have changed,
>> ??? and
>> ??? a user will need to go back to a previous version to reproduce the
>> ??? calculation.? Being able to able to rebuild a system as it would have
>> ??? been back then is important.
>>
>> ??? Is that possible if the package needs to make a download?? The 
>> download
>> ??? site that worked a few years ago may no longer exist.? If the site
>> ??? exists, the code versions there may be different.
>>
>> ??? Those are some of the issues that Simon was alluding to.
>>
>> ??? Duncan Murdoch
>>
>>
>>
>> ??? On 2025-03-02 5:45 a.m., Mossa Merhi Reimert via R-devel wrote:
>> ???? > Dear Simon Urbanek,
>> ???? >
>> ???? > There has been very little engagement with the issue I referred
>> ??? to. If it was decided that this ?check? ought to be part of the
>> ??? default checks for R,
>> ???? > then that could have been written to us. Either on the
>> ??? bugs.r-project.org <http://bugs.r-project.org> or the proposed
>> ??? patch. Before we talk about anything else,
>> ???? > it does seem very strange that we cannot get a reasonable
>> ??? dialogue going.
>> ???? >
>> ???? > I would like to say that the R/Rust community has grown
>> ??? substantially. From my end, there are 3 bindings project, extendr,
>> ??? savvy, and roxido.
>> ???? > Then, there are now many rust-based packages on CRAN, see this
>> ??? most recent compiled list https://github.com/nanxstats/r-rust-pkgs
>> ??? <https://github.com/nanxstats/r-rust-pkgs>.
>> ???? > There is also proof-of-concept
>> ??? https://github.com/r-rust/hellorust
>> ??? <https://github.com/r-rust/hellorust> that integrates `cargo`,
>> ??? rust?s official build system, with R?s package build system,
>> ???? > and https://github.com/extendr/hellorustc
>> ??? <https://github.com/extendr/hellorustc>, which showcases how Rust
>> ??? compiler could be directly linked with R?s package system.
>> ???? >
>> ???? >? ?Let me say, that the current R CMD check is not meant to be
>> ??? ?helpful?. When a package is built, `cargo` tells the user
>> ??? ?Downloading crates?.
>> ???? > Thus, this information is already conveyed to the user.
>> ???? >
>> ???? > Personally, I do wish we could debate this requirement further. I
>> ??? do not believe that having R-packages on CRAN vendor rust 
>> dependencies
>> ???? > as a good policy. Download statistics is a success metric of a
>> ??? given r-package and rust packages. By insisting on vendoring, and 
>> thus
>> ???? > side-stepping `cargo` / crates.io <http://crates.io>, we are
>> ??? robbing upstream authors of their download-numbers. I do not think
>> ??? such policy is honourable.
>> ???? >
>> ???? > While C/C++ do not have official package repositories, it could
>> ??? be thought of, as fair game, to have CRAN act as a pseudo package
>> ??? manager for C/C++ libraries.
>> ???? > I?m not going to argue for or against this part.
>> ???? >
>> ???? > There are many objections from the CRAN side to all things
>> ??? related to Rust. I don?t want to open multiple topics in the same
>> ??? thread.
>> ???? > But there is plenty to bring up. And I had hoped we could talk
>> ??? this little issue through, before embarking on a larger discussion.
>> ???? > I do not appreciate the ?random demands? comment, as this is not
>> ??? a demand, nor is it random.
>> ???? > I have inquired my end of the community for suggestions
>> ???? > to compile a larger proposal, but then I was afraid that this
>> ??? would be perceived as a big, bulky demand.
>> ???? >
>> ???? > Rust is not C/C++/Java, and the support for Rust cannot look like
>> ??? the support for these languages.
>> ???? >
>> ???? >
>> ???? >
>> ???? > From: Simon Urbanek <simon.urbanek at R-project.org>
>> ???? > Date: Sunday, 2 March 2025 at 00.39
>> ???? > To: Mossa Merhi Reimert <mossa at sund.ku.dk 
>> <mailto:mossa at sund.ku.dk>>
>> ???? > Cc: r-devel at r-project.org <mailto:r-devel at r-project.org>
>> ??? <r-devel at r-project.org <mailto:r-devel at r-project.org>>
>> ???? > Subject: Re: [Rd] R CMD check and CRAN's Rust policy
>> ???? > [Du f?r ikke ofte mails fra simon.urbanek at r-project.org
>> ??? <mailto:simon.urbanek at r-project.org>. F? mere at vide om, hvorfor
>> ??? dette er vigtigt, p? https://aka.ms/LearnAboutSenderIdentification
>> ??? <https://aka.ms/LearnAboutSenderIdentification> ]
>> ???? >
>> ???? > Mossa,
>> ???? >
>> ???? > the issue you cite is lacking any pertinent information and it's
>> ??? not even clear why it should be an issue. The check is perfectly
>> ??? justified, it just reports whether a package using rust declares
>> ??? this correctly and where it downloads 3rd party content - something
>> ??? that is important to R users in general and not related to CRAN. I
>> ??? don't see how any of this is "prohibitive" it just calls out what
>> ??? the package is already doing.
>> ???? >
>> ???? > As discussed before, my hope was that the "R"ust community will
>> ??? mature enough to work on proper support. It is not clear that it
>> ??? happened yet, but once it does it would make sense to talk about
>> ??? support just as we have for C, C++ and Java, so certainly that
>> ??? should be the right discussion. However, it will have to start with
>> ??? some thinking and a proposal on how the associated issues (compiler
>> ??? support, versioning, dependency sources etc.) are to be addressed,
>> ??? as opposed to making random demands. All this has nothing to do with
>> ??? CRAN so the issue you mention seems irrelevant to the progress. Also
>> ??? I'd like to know what are the "challenges embedded in R itself".
>> ???? >
>> ???? > Cheers,
>> ???? > Simon
>> ???? >
>> ???? >
>> ???? >> On Mar 2, 2025, at 8:45 AM, Mossa Merhi Reimert via R-devel
>> ??? <r-devel at r-project.org <mailto:r-devel at r-project.org>> wrote:
>> ???? >>
>> ???? >> Hello everyone!
>> ???? >>
>> ???? >> I'm Mossa, I'm one of the maintainers of extendr, an automated
>> ??? generation of bindings project for
>> ???? >> Rust code, for use in R-packages.
>> ???? >>
>> ???? >> I'm writing to you, as R 4.4.3 was just released, and there have
>> ??? not been
>> ???? >> follow-up on an issue important to us. Link to the issue as
>> ??? discussed on r-devel
>> ???? >> https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html
>> ??? <https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html>
>> ???? >>
>> ???? >> A community member has provided a suggestion to a patch here
>> ??? https://github.com/r-devel/r-svn/pull/182
>> ??? <https://github.com/r-devel/r-svn/pull/182>, and we have also
>> ??? attempted to bring it up on
>> ???? >> Bugzilla: https://bugs.r-project.org/show_bug.cgi?id=18806
>> ??? <https://bugs.r-project.org/show_bug.cgi?id=18806>
>> ???? >>
>> ???? >> TLDR: Default `R CMD check` uses additional CRAN-specific checks
>> ??? for Rust,
>> ???? >> instead of keeping this behind the --as-cran flag.
>> ???? >>
>> ???? >> I would like to say, that there is a growing interest in Rust
>> ??? within the R community.
>> ???? >> And generally, Rust becoming a widely adopted language within
>> ??? the Python community (including the scientific part of that
>> ??? community). It is time to deal with the
>> ???? >> pain points with using Rust in R.
>> ???? >>
>> ???? >> Therefore, I would kindly ask that we have a dialogue on how to
>> ??? remedy the issue above first, and how we may deal with other issues
>> ??? going forward. There are both challenges embedded in R itself, and
>> ??? the current CRAN policy for Rust is prohibitive.
>> ???? >>
>> ???? >>
>> ???? >>
>> ???? >> Mossa Merhi Reimert
>> ???? >> Postdoctoral Researcher
>> ???? >>
>> ???? >> K?benhavns Universitet
>> ???? >> Department of Veterinary and Animal Sciences
>> ???? >> Animal Welfare and Disease Control
>> ???? >> Gr?nneg?rdsvej 8
>> ???? >> 1870 Frederiksberg C
>> ???? >> Denmark
>> ???? >>
>> ???? >> +45 35324135
>> ???? >> mossa at sund.ku.dk
>> ??? <mailto:mossa at sund.ku.dk><mailto:mossa at sund.ku.dk
>> ??? <mailto:mossa at sund.ku.dk>>
>> ???? >>
>> ???? >>
>> ???? >>? ? ? ? [[alternative HTML version deleted]]
>> ???? >>
>> ???? >> ______________________________________________
>> ???? >> R-devel at r-project.org <mailto:R-devel at r-project.org> mailing list
>> ???? >> https://stat.ethz.ch/mailman/listinfo/r-devel
>> ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>> ???? >
>> ???? >? ? ? ?[[alternative HTML version deleted]]
>> ???? >
>> ???? > ______________________________________________
>> ???? > R-devel at r-project.org <mailto:R-devel at r-project.org> mailing list
>> ???? > https://stat.ethz.ch/mailman/listinfo/r-devel
>> ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>
>> ??? ______________________________________________
>> ??? R-devel at r-project.org <mailto:R-devel at r-project.org> mailing list
>> ??? https://stat.ethz.ch/mailman/listinfo/r-devel
>> ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
 > E-mail is sent at my convenience; I don't expect replies outside of 
working hours.


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Mar  2 20:41:50 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 2 Mar 2025 14:41:50 -0500
Subject: [Rd] R CMD check and CRAN's Rust policy
In-Reply-To: <df6bc0fc-1699-4691-a83c-1606d5db72a7@gmail.com>
References: <6ea9752b54b347e682240bc024665cef@sund.ku.dk>
 <9CB72F1A-D397-4133-B8D6-C7B9CD04A4A1@R-project.org>
 <32ad0520e7784407b08ad105304b714b@sund.ku.dk>
 <66df3450-ed40-4d0c-b40b-626b75eabf0b@gmail.com>
 <CAL3ufUKSkMXpgSD6-o7dC7tZuD+DmpHaq2JUzuF9+9dosE+XEA@mail.gmail.com>
 <4eb96716-9f8c-4f4e-8d2d-a43feba44392@gmail.com>
 <df6bc0fc-1699-4691-a83c-1606d5db72a7@gmail.com>
Message-ID: <19f561ae-d787-4f27-b3ba-f63c9b65fba5@gmail.com>

On 2025-03-02 1:09 p.m., Ben Bolker wrote:
>    I, like Duncan, am just following along here. I think there might be
> two distinct questions which it would be useful to keep distinct:
> 
>    * how to silence the rust-check if desired?
> 
>     rather than debating whether the rust-check should be always-on,
> on-for-CRAN-only, etc., would it provide for useful flexibility to add
> an environment variable that enables/disables this functionality?  There
> are already 168 of these environment variables, how much would one more
> cost?

I may have misunderstood Josiah.  I thought his message said that it is 
already easy to silence the check, by stopping the code from issuing the 
message the check is looking for.

Presumably the package shouldn't do that, but if there's an environment 
variable that can be set to do it, then the repository or user can 
choose to do it, so there's no need for R to add another environment 
variable.

BTW, as far as I can see current R-devel doesn't issue an error, it just 
issues warnings about two issues:

  - the package is downloading crates
  - the rustc compiler doesn't report a version number

Duncan Murdoch

> 
>     I'm not sure how adding an environment variable to allow easier
> user/alternate-repository control of the check is "against the spirit of
> the check" ...
> 
>     All the existing check-regulating env variables ...
> 
> cd src/library/tools/R
> grep 'Sys.getenv("_R_CHECK' * | sed -e 's/^.*Sys.getenv(//' | sed -e
> 's/[,)].*//' | sort | uniq | wc
> 
> 
>     * should CRAN allow Rust crates to be downloaded?
> 
>     This is a much more fundamental policy decision, which I have no
> opinion about.
> 
>     cheers
>      Ben Bolker
> 
> 
> 
> 
> On 2025-03-02 12:21 p.m., Duncan Murdoch wrote:
>> On 2025-03-02 11:03 a.m., Josiah Parry wrote:
>>> Well this has surely veered off course!
>>>
>>> As the one who filed the BugZilla report, I'd like to redirect the
>>> conversation and provide further context.
>>>
>>> The question should?be /"how do we get a dialogue started on this
>>> bugzilla issue before the next minor /
>>> /release of R?"/
>>
>> Isn't this exactly that dialogue?
>>
>>>
>>> The current check for Rust-based R package's downloading external
>>> dependencies works by looking at
>>> the output logs for the presence of? "Downloading crates." This can is
>>> an entirely fine requirement for
>>> CRAN?however, due to the fact that it is an error, packages
>>> distributed through other repositories
>>> fail the R-CMD check.
>>
>> I think you misunderstood me.? CRAN shares the view I gave that you
>> should be able to run old code to reproduce old results, but they aren't
>> the only ones.? That's always been a goal of R.
>>
>>> Folks who use R-universe or PPM or some mysterious third thing may not
>>> share the same philosophy as
>>> CRAN and prefer the convenience of fetching the dependencies at
>>> compile time and not vendoring them.
>>> An alternative would be for the check to be optionally skipped or
>>> become a NOTE when the CRAN
>>> flag is not set and an ERROR otherwise. Skipping this CRAN check is as
>>> easy as adding `--quiet`
>>> or setting an environment variable?but that is against the spirit of
>>> the check.
>>
>> If it is that easy to skip the check, then I really don't see the issue.
>>   ?Just ask the repository where you want to put your package to put that
>> option or environment variable in place, and there's no longer a problem.
>>
>> Duncan Murdoch
>>
>>> Ideally, the check can remain, but scoped appropriately.
>>>
>>>
>>> On Sun, Mar 2, 2025 at 6:49?AM Duncan Murdoch
>>> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>>>
>>>  ??? You seem to be taking a confontational tone, which isn't likely to
>>>  ??? encourage a reasonable dialogue.
>>>
>>>  ??? I've looked for other messages on this, and didn't see any besides
>>> this
>>>  ??? one explaining why including check_rust() in the checks is a problem.
>>>  ??? The problem you talk about here is that it encourages vendoring,
>>> which
>>>  ??? makes it harder for package authors to count downloads.
>>>
>>>  ??? To be honest, that doesn't seem like a very serious problem.? I
>>> assume
>>>  ??? the packages ("crates") we are talking about are open source, so
>>>  ??? this is
>>>  ??? entirely in the spirit of how they are allowed to be distributed.
>>>
>>>  ??? If they aren't open source, then users of those packages should be
>>>  ??? warned about that, and a check failure is a good way to do that.
>>>
>>>  ??? So you need to explain why it is important to be able to download and
>>>  ??? install software and not be warned about it.
>>>
>>>  ??? I am not in R Core or CRAN, but I can suggest why it is better to
>>>  ??? include source in the package:? it makes the use of that package more
>>>  ??? reliable in the future.? It's not uncommon to run an R computation
>>> that
>>>  ??? was written a few years ago.? Sometimes libraries or R have changed,
>>>  ??? and
>>>  ??? a user will need to go back to a previous version to reproduce the
>>>  ??? calculation.? Being able to able to rebuild a system as it would have
>>>  ??? been back then is important.
>>>
>>>  ??? Is that possible if the package needs to make a download?? The
>>> download
>>>  ??? site that worked a few years ago may no longer exist.? If the site
>>>  ??? exists, the code versions there may be different.
>>>
>>>  ??? Those are some of the issues that Simon was alluding to.
>>>
>>>  ??? Duncan Murdoch
>>>
>>>
>>>
>>>  ??? On 2025-03-02 5:45 a.m., Mossa Merhi Reimert via R-devel wrote:
>>>  ???? > Dear Simon Urbanek,
>>>  ???? >
>>>  ???? > There has been very little engagement with the issue I referred
>>>  ??? to. If it was decided that this ?check? ought to be part of the
>>>  ??? default checks for R,
>>>  ???? > then that could have been written to us. Either on the
>>>  ??? bugs.r-project.org <http://bugs.r-project.org> or the proposed
>>>  ??? patch. Before we talk about anything else,
>>>  ???? > it does seem very strange that we cannot get a reasonable
>>>  ??? dialogue going.
>>>  ???? >
>>>  ???? > I would like to say that the R/Rust community has grown
>>>  ??? substantially. From my end, there are 3 bindings project, extendr,
>>>  ??? savvy, and roxido.
>>>  ???? > Then, there are now many rust-based packages on CRAN, see this
>>>  ??? most recent compiled list https://github.com/nanxstats/r-rust-pkgs
>>>  ??? <https://github.com/nanxstats/r-rust-pkgs>.
>>>  ???? > There is also proof-of-concept
>>>  ??? https://github.com/r-rust/hellorust
>>>  ??? <https://github.com/r-rust/hellorust> that integrates `cargo`,
>>>  ??? rust?s official build system, with R?s package build system,
>>>  ???? > and https://github.com/extendr/hellorustc
>>>  ??? <https://github.com/extendr/hellorustc>, which showcases how Rust
>>>  ??? compiler could be directly linked with R?s package system.
>>>  ???? >
>>>  ???? >? ?Let me say, that the current R CMD check is not meant to be
>>>  ??? ?helpful?. When a package is built, `cargo` tells the user
>>>  ??? ?Downloading crates?.
>>>  ???? > Thus, this information is already conveyed to the user.
>>>  ???? >
>>>  ???? > Personally, I do wish we could debate this requirement further. I
>>>  ??? do not believe that having R-packages on CRAN vendor rust
>>> dependencies
>>>  ???? > as a good policy. Download statistics is a success metric of a
>>>  ??? given r-package and rust packages. By insisting on vendoring, and
>>> thus
>>>  ???? > side-stepping `cargo` / crates.io <http://crates.io>, we are
>>>  ??? robbing upstream authors of their download-numbers. I do not think
>>>  ??? such policy is honourable.
>>>  ???? >
>>>  ???? > While C/C++ do not have official package repositories, it could
>>>  ??? be thought of, as fair game, to have CRAN act as a pseudo package
>>>  ??? manager for C/C++ libraries.
>>>  ???? > I?m not going to argue for or against this part.
>>>  ???? >
>>>  ???? > There are many objections from the CRAN side to all things
>>>  ??? related to Rust. I don?t want to open multiple topics in the same
>>>  ??? thread.
>>>  ???? > But there is plenty to bring up. And I had hoped we could talk
>>>  ??? this little issue through, before embarking on a larger discussion.
>>>  ???? > I do not appreciate the ?random demands? comment, as this is not
>>>  ??? a demand, nor is it random.
>>>  ???? > I have inquired my end of the community for suggestions
>>>  ???? > to compile a larger proposal, but then I was afraid that this
>>>  ??? would be perceived as a big, bulky demand.
>>>  ???? >
>>>  ???? > Rust is not C/C++/Java, and the support for Rust cannot look like
>>>  ??? the support for these languages.
>>>  ???? >
>>>  ???? >
>>>  ???? >
>>>  ???? > From: Simon Urbanek <simon.urbanek at R-project.org>
>>>  ???? > Date: Sunday, 2 March 2025 at 00.39
>>>  ???? > To: Mossa Merhi Reimert <mossa at sund.ku.dk
>>> <mailto:mossa at sund.ku.dk>>
>>>  ???? > Cc: r-devel at r-project.org <mailto:r-devel at r-project.org>
>>>  ??? <r-devel at r-project.org <mailto:r-devel at r-project.org>>
>>>  ???? > Subject: Re: [Rd] R CMD check and CRAN's Rust policy
>>>  ???? > [Du f?r ikke ofte mails fra simon.urbanek at r-project.org
>>>  ??? <mailto:simon.urbanek at r-project.org>. F? mere at vide om, hvorfor
>>>  ??? dette er vigtigt, p? https://aka.ms/LearnAboutSenderIdentification
>>>  ??? <https://aka.ms/LearnAboutSenderIdentification> ]
>>>  ???? >
>>>  ???? > Mossa,
>>>  ???? >
>>>  ???? > the issue you cite is lacking any pertinent information and it's
>>>  ??? not even clear why it should be an issue. The check is perfectly
>>>  ??? justified, it just reports whether a package using rust declares
>>>  ??? this correctly and where it downloads 3rd party content - something
>>>  ??? that is important to R users in general and not related to CRAN. I
>>>  ??? don't see how any of this is "prohibitive" it just calls out what
>>>  ??? the package is already doing.
>>>  ???? >
>>>  ???? > As discussed before, my hope was that the "R"ust community will
>>>  ??? mature enough to work on proper support. It is not clear that it
>>>  ??? happened yet, but once it does it would make sense to talk about
>>>  ??? support just as we have for C, C++ and Java, so certainly that
>>>  ??? should be the right discussion. However, it will have to start with
>>>  ??? some thinking and a proposal on how the associated issues (compiler
>>>  ??? support, versioning, dependency sources etc.) are to be addressed,
>>>  ??? as opposed to making random demands. All this has nothing to do with
>>>  ??? CRAN so the issue you mention seems irrelevant to the progress. Also
>>>  ??? I'd like to know what are the "challenges embedded in R itself".
>>>  ???? >
>>>  ???? > Cheers,
>>>  ???? > Simon
>>>  ???? >
>>>  ???? >
>>>  ???? >> On Mar 2, 2025, at 8:45 AM, Mossa Merhi Reimert via R-devel
>>>  ??? <r-devel at r-project.org <mailto:r-devel at r-project.org>> wrote:
>>>  ???? >>
>>>  ???? >> Hello everyone!
>>>  ???? >>
>>>  ???? >> I'm Mossa, I'm one of the maintainers of extendr, an automated
>>>  ??? generation of bindings project for
>>>  ???? >> Rust code, for use in R-packages.
>>>  ???? >>
>>>  ???? >> I'm writing to you, as R 4.4.3 was just released, and there have
>>>  ??? not been
>>>  ???? >> follow-up on an issue important to us. Link to the issue as
>>>  ??? discussed on r-devel
>>>  ???? >> https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html
>>>  ??? <https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html>
>>>  ???? >>
>>>  ???? >> A community member has provided a suggestion to a patch here
>>>  ??? https://github.com/r-devel/r-svn/pull/182
>>>  ??? <https://github.com/r-devel/r-svn/pull/182>, and we have also
>>>  ??? attempted to bring it up on
>>>  ???? >> Bugzilla: https://bugs.r-project.org/show_bug.cgi?id=18806
>>>  ??? <https://bugs.r-project.org/show_bug.cgi?id=18806>
>>>  ???? >>
>>>  ???? >> TLDR: Default `R CMD check` uses additional CRAN-specific checks
>>>  ??? for Rust,
>>>  ???? >> instead of keeping this behind the --as-cran flag.
>>>  ???? >>
>>>  ???? >> I would like to say, that there is a growing interest in Rust
>>>  ??? within the R community.
>>>  ???? >> And generally, Rust becoming a widely adopted language within
>>>  ??? the Python community (including the scientific part of that
>>>  ??? community). It is time to deal with the
>>>  ???? >> pain points with using Rust in R.
>>>  ???? >>
>>>  ???? >> Therefore, I would kindly ask that we have a dialogue on how to
>>>  ??? remedy the issue above first, and how we may deal with other issues
>>>  ??? going forward. There are both challenges embedded in R itself, and
>>>  ??? the current CRAN policy for Rust is prohibitive.
>>>  ???? >>
>>>  ???? >>
>>>  ???? >>
>>>  ???? >> Mossa Merhi Reimert
>>>  ???? >> Postdoctoral Researcher
>>>  ???? >>
>>>  ???? >> K?benhavns Universitet
>>>  ???? >> Department of Veterinary and Animal Sciences
>>>  ???? >> Animal Welfare and Disease Control
>>>  ???? >> Gr?nneg?rdsvej 8
>>>  ???? >> 1870 Frederiksberg C
>>>  ???? >> Denmark
>>>  ???? >>
>>>  ???? >> +45 35324135
>>>  ???? >> mossa at sund.ku.dk
>>>  ??? <mailto:mossa at sund.ku.dk><mailto:mossa at sund.ku.dk
>>>  ??? <mailto:mossa at sund.ku.dk>>
>>>  ???? >>
>>>  ???? >>
>>>  ???? >>? ? ? ? [[alternative HTML version deleted]]
>>>  ???? >>
>>>  ???? >> ______________________________________________
>>>  ???? >> R-devel at r-project.org <mailto:R-devel at r-project.org> mailing list
>>>  ???? >> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>  ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>  ???? >
>>>  ???? >? ? ? ?[[alternative HTML version deleted]]
>>>  ???? >
>>>  ???? > ______________________________________________
>>>  ???? > R-devel at r-project.org <mailto:R-devel at r-project.org> mailing list
>>>  ???? > https://stat.ethz.ch/mailman/listinfo/r-devel
>>>  ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>
>>>  ??? ______________________________________________
>>>  ??? R-devel at r-project.org <mailto:R-devel at r-project.org> mailing list
>>>  ??? https://stat.ethz.ch/mailman/listinfo/r-devel
>>>  ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From @|mon@urb@nek @end|ng |rom R-project@org  Sun Mar  2 20:59:18 2025
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Mon, 3 Mar 2025 08:59:18 +1300
Subject: [Rd] R CMD check and CRAN's Rust policy
In-Reply-To: <32ad0520e7784407b08ad105304b714b@sund.ku.dk>
References: <6ea9752b54b347e682240bc024665cef@sund.ku.dk>
 <9CB72F1A-D397-4133-B8D6-C7B9CD04A4A1@R-project.org>
 <32ad0520e7784407b08ad105304b714b@sund.ku.dk>
Message-ID: <6156CEC1-8C11-4E5A-9871-67E27E5C9F48@R-project.org>

Mossa,


> On Mar 2, 2025, at 11:45 PM, Mossa Merhi Reimert <mossa at sund.ku.dk> wrote:
> 
> There has been very little engagement with the issue I referred to. If it was decided that this ?check? ought to be part of the default checks for R, then that could have been written to us. Either on the bugs.r-project.org or the proposed patch. Before we talk about anything else, it does seem very strange that we cannot get a reasonable dialogue going.
>  

I don't see anything from you on this list - your first engagement was yesterday. I have no idea what you refer to as "us" and what makes you think you should have been notified if no one heard from you before. A start of any engagement is to start communication, so here we are, perhaps not the most fortunate way to start off, but we have a discussion and there is hope.


> I would like to say that the R/Rust community has grown substantially. From my end, there are 3 bindings project, extendr, savvy, and roxido. Then, there are now many rust-based packages on CRAN, see this most recent compiled list https://github.com/nanxstats/r-rust-pkgs. There is also proof-of-concept https://github.com/r-rust/hellorust that integrates `cargo`, rust?s official build system, with R?s package build system, and https://github.com/extendr/hellorustc, which showcases how Rust compiler could be directly linked with R?s package system.
>  

I think this part of the problem - there is no systematic rust support, so each package author does something differently. As much as it is nice to have the freedom to have many different implementation of the same thing, I would argue that in cases like language support it makes more sense to combine the effort into one solution (after everyone experimented and gained enough experience) that is easy to manage and is well maintained. This is what happened to most mature languages such as C++, Java and Python. That would avoid the "hacks" in place today (I'm referring to the check).


>  Let me say, that the current R CMD check is not meant to be ?helpful?. When a package is built, `cargo` tells the user ?Downloading crates?. Thus, this information is already conveyed to the user.
>  
> Personally, I do wish we could debate this requirement further. I do not believe that having R-packages on CRAN vendor rust dependencies as a good policy. Download statistics is a success metric of a given r-package and rust packages. By insisting on vendoring, and thus side-stepping `cargo` / crates.io, we are robbing upstream authors of their download-numbers. I do not think such policy is honourable.
>  


You are jumping issues here: as I said before this has nothing to do with CRAN. So let us first take CRAN out of the picture and talk about the check. The check does two things: a) it checks that the package correctly declares rust dependency and  b) checks whether the package uses 3rd party dynamic downloads. Since the "R"ust community has yet to come up with any systematic rust support, both seem very reasonable checks. We want to know if a package requires rust by checking the DESCRIPTION file alone so the user can make an informed decision whether they want (or even can) use the package. It is also important to know if a package can accesses 3rd party resources online. Due to rising security threats it is increasingly common to not allow analytics machines to have access to the Internet so sensitive data cannot be leaked. It also opens the can of legality as the resulting software may not adhere to the license of the package and there is no guarantee that the user will still have the license. Moreover, reproducibility is very important to R users so it should be possible to reproduce the installation - which excludes 3rd party distributed systems which don't have any such guarantees unless they provide a way to fully vendor dependencies. So, in short, there are many reasons why the user should know about the things checked so they can make informed decisions. Whether this is the best way to signal that is up for debate.

Your argument is that the important reason is a popularity contest based on download statistics. I would argue that it is a very weak reason, since vast majority of R users does not use source installations to install packages, so there is no "robbing" of upstream authors - the statistics don't reflect real usage anyway.

If you want to propose improvements to the check, I'm sure it would be appreciated, but putting it behind --as-cran doesn't seem the right approach nor does that solve the problem in any way as the issues are not CRAN-specifc. I would think that some proposal to declare rust requirements (incl. toolchain) and have declared a way to vendor dependencies to address off-line install, licensing and security issues uniformly for rust packages would be steps in the right direction.


> While C/C++ do not have official package repositories, it could be thought of, as fair game, to have CRAN act as a pseudo package manager for C/C++ libraries.
> I?m not going to argue for or against this part.
>  
> There are many objections from the CRAN side to all things related to Rust. I don?t want to open multiple topics in the same thread.
> But there is plenty to bring up. And I had hoped we could talk this little issue through, before embarking on a larger discussion.
> I do not appreciate the ?random demands? comment, as this is not a demand, nor is it random.
> I have inquired my end of the community for suggestions
> to compile a larger proposal, but then I was afraid that this would be perceived as a big, bulky demand.
>  
> Rust is not C/C++/Java, and the support for Rust cannot look like the support for these languages.
>  


Why not? They all require compilers, ways to deal with dependencies and produce binaries - so does Rust. It's just one of many similar languages. The key is to have proper support instead of having each package deal with the complexities alone.

Cheers,
Simon


